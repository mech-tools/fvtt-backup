!function(){"use strict";const e={MODULE_NAME:"theme-glass",MODULE_TITLE:"Theme: Glass"};e.PATH=`modules/${e.MODULE_NAME}/`;class t extends FormApplication{COMPONENTS={colorPrimary:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.color-primary`),colorSecondary:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.color-secondary`),colorText:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.color-text`),colorTextHighlight:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.color-text-highlight`),colorTextDim:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.color-text-dim`)};static DEFAULTS={colorPrimary:"#20222c",colorSecondary:"#d2232a",colorText:"#f0f0e0",colorTextHighlight:"#ffffff",colorTextDim:"#acacac"};static register(){game.settings.registerMenu(e.MODULE_NAME,s.COLOR_THEME_FORM,{label:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.menu`),icon:"fa-solid fa-palette",type:t,restricted:!0}),game.settings.register(e.MODULE_NAME,s.COLOR_THEME_VALUES,{scope:"world",config:!1,default:JSON.stringify(this.DEFAULTS),type:String,onChange:()=>foundry.utils.debouncedReload()})}static get defaultOptions(){return mergeObject(super.defaultOptions,{...super.defaultOptions,template:`${e.PATH}templates/color-theme-settings.hbs`,title:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLOR_THEME_FORM}.title`),width:550,id:`${e.MODULE_NAME}-${s.COLOR_THEME_FORM}`})}activateListeners(e){super.activateListeners(e);const t=e[0];t.querySelectorAll("input.color").forEach((e=>{e.addEventListener("change",(e=>{e.target.nextElementSibling.value=e.target.value}))})),t.querySelectorAll('input[type="color"]').forEach((e=>{e.addEventListener("change",(e=>{e.target.previousElementSibling.value=e.target.value}))})),t.querySelector("#reset").addEventListener("click",(e=>{e.preventDefault(),this.resetDefaults()}))}getData(){let t=super.getData();t.components=this.COMPONENTS;const a=game.settings.get(e.MODULE_NAME,s.COLOR_THEME_VALUES);return t.values=JSON.parse(a),t}_updateObject(t,a){const n=expandObject(a);game.settings.set(e.MODULE_NAME,s.COLOR_THEME_VALUES,JSON.stringify(n))}resetDefaults(){game.settings.set(e.MODULE_NAME,s.COLOR_THEME_VALUES,JSON.stringify(this.DEFAULTS))}}class a extends FormApplication{COMPONENTS={logo:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.logo`),navigation:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.navigation`),controls:game.i18n.localize("CONTROLS.NavLabel"),players:game.i18n.localize("PLAYERS.Title"),hotbar:game.i18n.localize("DOCUMENT.Macros"),chat:game.i18n.localize("THESIDEBAR.ChatLogTitle"),combat:game.i18n.localize("THESIDEBAR.CombatTrackerTitle"),scenes:game.i18n.localize("THESIDEBAR.ScenesTitle"),actors:game.i18n.localize("THESIDEBAR.ActorDirectoryTitle"),items:game.i18n.localize("THESIDEBAR.ItemDirectoryTitle"),journal:game.i18n.localize("THESIDEBAR.JournalEntryTitle"),tables:game.i18n.localize("THESIDEBAR.RollableTablesTitle"),cards:game.i18n.localize("THESIDEBAR.CardStacksTitle"),playlists:game.i18n.localize("THESIDEBAR.PlaylistsTitle"),compendium:game.i18n.localize("THESIDEBAR.CompendiumPacksTitle"),settings:game.i18n.localize("THESIDEBAR.SettingsTitle")};static DEFAULTS={logo:{player:!0,gm:!0},navigation:{player:!0,gm:!0},controls:{player:!0,gm:!0},players:{player:!0,gm:!0},hotbar:{player:!0,gm:!0},chat:{player:!0,gm:!0},combat:{player:!0,gm:!0},scenes:{player:!0,gm:!0},actors:{player:!0,gm:!0},items:{player:!0,gm:!0},journal:{player:!0,gm:!0},tables:{player:!0,gm:!0},cards:{player:!0,gm:!0},playlists:{player:!0,gm:!0},compendium:{player:!0,gm:!0},settings:{player:!0,gm:!0}};static register(){game.settings.registerMenu(e.MODULE_NAME,s.HIDE_INTERFACE_FORM,{label:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.menu`),icon:"fas fa-eye",type:a,restricted:!0}),game.settings.register(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES,{scope:"world",config:!1,default:JSON.stringify(this.DEFAULTS),type:String,onChange:()=>foundry.utils.debouncedReload()})}static get defaultOptions(){return mergeObject(super.defaultOptions,{...super.defaultOptions,template:`${e.PATH}templates/hide-interface-settings.hbs`,title:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.title`),width:400,id:`${e.MODULE_NAME}-${s.HIDE_INTERFACE_FORM}`})}getData(){let t=super.getData();t.components=this.COMPONENTS;const a=game.settings.get(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES);return t.values=JSON.parse(a),t}_updateObject(t,a){const n=expandObject(a);game.settings.set(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES,JSON.stringify(n))}}const s={ENABLE_BLUR:"enable-blur",CHAT_OPACITY_VALUE:"chat-opacity-value",CHAT_OPACITY_TIMER:"chat-opacity-timer",WINDOW_CONTENT_OPACITY_VALUE:"window-content-opacity-value",COLLAPSE_HOTBAR:"collapse-hotbar",NO_PAUSE:"no-pause",REDUCE_SCENE_LIST:"reduce-scene-list",HIDE_INTERFACE_FORM:"hide-interface-form",HIDE_INTERFACE_VALUES:"hide-interface-values",COLOR_THEME_FORM:"color-theme-form",COLOR_THEME_VALUES:"color-theme-values"};class n{hookName="";once=!1;byPassSetting=null;settingName="";onHook(){if(!this.hookName)throw new Error("Missing hook definition");Hooks.on(this.hookName,this.handle.bind(this),{once:this.once})}handle(...t){this.setting=this.byPassSetting??game.settings.get(e.MODULE_NAME,s[this.settingName]),this.setting&&this.fireFeature(...t)}fireFeature(...e){}}class i extends n{settingName="ENABLE_BLUR";hookName="ready";once=!0;fireFeature(){document.body.classList.add("addBlur")}}class o extends n{byPassSetting=!0;hookName="ready";once=!0;fireFeature(){if(document.body.addEventListener("click",(async t=>{(t.target.classList.contains("glass-theme-blur-message")||t.target.parentNode.classList.contains("glass-theme-blur-message"))&&((new SettingsConfig).render(!0),await new Promise((e=>setTimeout(e,100))).then((()=>ui.activeWindow.activateTab(e.MODULE_NAME))))})),!game.user.getFlag(e.MODULE_NAME,"blurWarningMessageShown")){const t=[`\n          <div>\n            <h3>Theme: Glass</h3>\n            <p>${game.i18n.localize(`${e.MODULE_NAME}.blurWarningMessage`)}</p>\n            <p>\n              <button type="button" class="glass-theme-blur-message" data-key="theme-glass.enable-blur">\n                <i class="fas fa-cogs"></i> ${game.i18n.localize("SETTINGS.Configure")}\n              </button>\n            </p>\n          </div>\n        `].map((e=>({whisper:[game.user.id],speaker:{alias:"Theme: Glass"},flags:{core:{canPopout:!0}},content:e})));ChatMessage.implementation.createDocuments(t),game.user.setFlag(e.MODULE_NAME,"blurWarningMessageShown",!0)}}}class l extends n{byPassSetting=!0;hookName="ready";once=!0;fireFeature(){const t=JSON.parse(game.settings.get(e.MODULE_NAME,s.COLOR_THEME_VALUES));for(const[e,a]of Object.entries(t)){const t=e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase())),s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);document.documentElement.style.setProperty(`--${t}`,`\n        ${parseInt(s[1],16)},\n        ${parseInt(s[2],16)},\n        ${parseInt(s[3],16)}\n        `)}}}class E extends n{byPassSetting=!0;settingName="CHAT_OPACITY_VALUE";hookName="ready";once=!0;fireFeature(){const t=game.settings.get(e.MODULE_NAME,s.CHAT_OPACITY_VALUE);1!==t&&(document.body.classList.add("addChatOpacity"),document.documentElement.style.setProperty("--chat-opactity-value",t),document.querySelectorAll("#chat-log li.chat-message").forEach((e=>e.classList.add("opacity-transition"))),this.handleNewChatCards())}handleNewChatCards(){const t=1e3*game.settings.get(e.MODULE_NAME,s.CHAT_OPACITY_TIMER);Hooks.on("renderChatMessage",(async(e,a)=>{const s=a[0];s.classList.add("opacity-delay"),await new Promise((e=>setTimeout(e,t))).then((()=>{s.classList.add("opacity-transition"),s.classList.remove("opacity-delay")}))}))}}class r extends n{settingName="COLLAPSE_HOTBAR";hookName="renderHotbar";once=!0;fireFeature(){ui.hotbar.collapse()}}class c extends n{byPassSetting=!0;hookName="ready";once=!0;fireFeature(){const t=JSON.parse(game.settings.get(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES)),a=game.user.isGM?"gm":"player";for(const[e,s]of Object.entries(t))s[a]||document.body.classList.add(`hide${e.charAt(0).toUpperCase()+e.slice(1)}`)}}class g extends n{settingName="REDUCE_SCENE_LIST";hookName="renderSceneDirectory";fireFeature(){document.body.classList.add("reduceScenesHeight")}}class m extends n{settingName="NO_PAUSE";hookName="ready";once=!0;fireFeature(){game.users.current.isGM&&game.paused&&game.togglePause(!1,!0)}}class O extends n{byPassSetting=!0;settingName="WINDOW_CONTENT_OPACITY_VALUE";hookName="ready";once=!0;fireFeature(){const t=game.settings.get(e.MODULE_NAME,s.WINDOW_CONTENT_OPACITY_VALUE);1!==t&&(document.body.classList.add("addWindowContentOpacity"),document.documentElement.style.setProperty("--window-content-opactity-value",t))}}new class{constructor(){this.init(),this.loadFeatures()}init(){Hooks.once("init",(()=>{console.log(`${e.MODULE_TITLE} | Initializing module`),game.settings.register(e.MODULE_NAME,s.ENABLE_BLUR,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.ENABLE_BLUR}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.ENABLE_BLUR}-hint`),scope:"client",config:!0,default:!0,type:Boolean,onChange:()=>foundry.utils.debouncedReload()}),game.settings.register(e.MODULE_NAME,s.CHAT_OPACITY_VALUE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_VALUE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_VALUE}-hint`),scope:"world",config:!0,default:.5,range:{min:.1,max:1,step:.1},type:Number,onChange:()=>foundry.utils.debouncedReload()}),game.settings.register(e.MODULE_NAME,s.CHAT_OPACITY_TIMER,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_TIMER}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_TIMER}-hint`),scope:"world",config:!0,default:10,range:{min:1,max:30,step:1},type:Number,onChange:()=>foundry.utils.debouncedReload()}),game.settings.register(e.MODULE_NAME,s.WINDOW_CONTENT_OPACITY_VALUE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.WINDOW_CONTENT_OPACITY_VALUE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.WINDOW_CONTENT_OPACITY_VALUE}-hint`),scope:"world",config:!0,default:.9,range:{min:.5,max:1,step:.1},type:Number,onChange:()=>foundry.utils.debouncedReload()}),game.settings.register(e.MODULE_NAME,s.COLLAPSE_HOTBAR,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLLAPSE_HOTBAR}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLLAPSE_HOTBAR}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>foundry.utils.debouncedReload()}),game.settings.register(e.MODULE_NAME,s.NO_PAUSE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.NO_PAUSE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.NO_PAUSE}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>foundry.utils.debouncedReload()}),game.settings.register(e.MODULE_NAME,s.REDUCE_SCENE_LIST,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.REDUCE_SCENE_LIST}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.REDUCE_SCENE_LIST}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>foundry.utils.debouncedReload()}),a.register(),t.register()}))}loadFeatures(){[new i,new o,new l,new E,new r,new c,new g,new m,new O].forEach((e=>e.onHook()))}}}();