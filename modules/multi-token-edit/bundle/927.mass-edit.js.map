{"version":3,"file":"927.mass-edit.js","mappings":"gJAGO,SAASA,EAAkBC,GAChC,IAAIC,UAAUD,GAAWE,QAAO,EAClC,CAEA,MAAMD,kBAAkBE,gBACtB,WAAAC,CAAYJ,GACV,MAAMK,EAAMC,GAAGC,SAASC,QAAQC,KAAK,+BAA+BC,WACpEC,MAAM,CAAC,EAAG,CAAEC,KAAMP,EAAIO,KAAO,GAAIC,IAAKR,EAAIQ,MAE1CC,KAAKd,UAAYA,CACnB,CAEA,yBAAWe,GACT,OAAOC,QAAQC,MAAMC,YAAYP,MAAMI,eAAgB,CACrDI,GAAI,8BACJC,SAAU,WAAW,kCACrBC,QAAS,CAAC,mBAAoB,oBAAqB,wBAAyB,yBAC5EC,WAAW,EACXC,aAAa,EACbC,MAAO,IACPC,OAAQ,KAEZ,CAEA,aAAMC,CAAQC,EAAU,CAAC,GACvB,MAAMC,EAAO,CAAC,EAERC,EAAMf,KAAKd,UAAU8B,UAAYhB,KAAKd,UAQ5C,MANyB,UAArB6B,EAAIE,cAAiD,SAArBF,EAAIE,aACtCH,EAAKI,IAAMH,EAAII,QAAQC,IAEvBN,EAAKI,IAAM,KAAiBH,EAAIE,cAG3BH,CACT,CAEA,iBAAAO,CAAkBC,GAChBzB,MAAMwB,kBAAkBC,GAExBA,EAAK3B,KAAK,mBAAmB4B,GAAG,SAAS,IAAM,KAAUC,UAAU,CAAEC,YAAY,MACjFH,EAAK3B,KAAK,uBAAuB4B,GAAG,SAAS,IAAM,KAAUC,UAAU,CAAEC,YAAY,MACrFH,EACG3B,KAAK,cACL4B,GAAG,cAAc,KAChB,KAAUG,oBAAoB,KAAUC,mBAAmB3B,KAAKd,WAAW0C,IAAI5B,KAAKd,WAAW,IAEhGqC,GAAG,aAAc,KAAUM,gBAChC,CAEA,MAAAC,CAAOC,GACDA,EAAWpC,MAAMqC,GAAMA,EAAE3B,KAAOL,KAAKd,UAAUmB,MAAKL,KAAKiC,OAAM,EACrE,CAEA,SAAIC,GACF,MAAO,YACT,CAEA,WAAMD,CAAMpB,EAAU,CAAC,GAGrB,OAFA,KAAUsB,WAAa,KACvB,KAAUN,kBACHhC,MAAMoC,MAAMpB,EACrB,E","sources":["webpack:///./multi-token-edit/scripts/linker/smartMenu.js"],"sourcesContent":["import { LINKER_DOC_ICONS, MODULE_ID } from '../constants.js';\r\nimport { LinkerAPI } from './linker.js';\r\n\r\nexport function openSmartLinkMenu(placeable) {\r\n  new SmartMenu(placeable).render(true);\r\n}\r\n\r\nclass SmartMenu extends FormApplication {\r\n  constructor(placeable) {\r\n    const pos = ui.controls.element.find('[data-control=\"me-presets\"]').position();\r\n    super({}, { left: pos.left + 50, top: pos.top });\r\n\r\n    this.placeable = placeable;\r\n  }\r\n\r\n  static get defaultOptions() {\r\n    return foundry.utils.mergeObject(super.defaultOptions, {\r\n      id: 'mass-edit-smart-linker-menu',\r\n      template: `modules/${MODULE_ID}/templates/smartLinker.html`,\r\n      classes: ['mass-edit-linker', 'smart-linker-menu', 'mass-edit-dark-window', 'mass-edit-window-fill'],\r\n      resizable: false,\r\n      minimizable: false,\r\n      width: 200,\r\n      height: 190,\r\n    });\r\n  }\r\n\r\n  async getData(options = {}) {\r\n    const data = {};\r\n\r\n    const doc = this.placeable.document ?? this.placeable;\r\n\r\n    if (doc.documentName === 'Token' || doc.documentName === 'Tile') {\r\n      data.img = doc.texture.src;\r\n    } else {\r\n      data.img = LINKER_DOC_ICONS[doc.documentName];\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  activateListeners(html) {\r\n    super.activateListeners(html);\r\n\r\n    html.find('.selectedToLink').on('click', () => LinkerAPI.smartLink({ multiLayer: false }));\r\n    html.find('.pickerSelectToLink').on('click', () => LinkerAPI.smartLink({ multiLayer: true }));\r\n    html\r\n      .find('.image img')\r\n      .on('mouseenter', () => {\r\n        LinkerAPI._highlightDocuments(LinkerAPI.getLinkedDocuments(this.placeable).add(this.placeable));\r\n      })\r\n      .on('mouseleave', LinkerAPI._clearHighlight);\r\n  }\r\n\r\n  unlink(placeables) {\r\n    if (placeables.find((p) => p.id === this.placeable.id)) this.close(true);\r\n  }\r\n\r\n  get title() {\r\n    return 'Smart Link';\r\n  }\r\n\r\n  async close(options = {}) {\r\n    LinkerAPI._smartLink = null;\r\n    LinkerAPI._clearHighlight();\r\n    return super.close(options);\r\n  }\r\n}\r\n"],"names":["openSmartLinkMenu","placeable","SmartMenu","render","FormApplication","constructor","pos","ui","controls","element","find","position","super","left","top","this","defaultOptions","foundry","utils","mergeObject","id","template","classes","resizable","minimizable","width","height","getData","options","data","doc","document","documentName","img","texture","src","activateListeners","html","on","smartLink","multiLayer","_highlightDocuments","getLinkedDocuments","add","_clearHighlight","unlink","placeables","p","close","title","_smartLink"],"sourceRoot":""}