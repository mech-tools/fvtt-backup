{"_id":"0L4G1WzM1jJB3gwm","name":"Aide","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/life/heart-cross-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"eF3PK0jR2lKIxRL5\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'eF3PK0jR2lKIxRL5'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2200000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"0RRviX1NXb1Slx8r","name":"Rage","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/creatures/abilities/mouth-teeth-human.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"EgnG8I8woUHnamCo\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'EgnG8I8woUHnamCo'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"1LECiUtn1CU4VcUe","name":"CUB-Exhausted","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0] == \"on\") {\n    var exNew = args[1].efData.label\n    const levels = [\"Fatigue 1\",\"Fatigue 2\",\"Fatigue 3\",\"Fatigue 4\",\"Fatigue 5\"]\n    \n    for(const ex of levels){\n        if ((ex != exNew) && (game.cub.hasCondition(ex))){\n            await game.cub.removeCondition(ex)\n        }\n    }\n}","folder":"1F3e0ZCRKTOyCJmZ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"1ZcGQsEKhkRsNgQp","name":"AE_Companion_Macro(Brutus)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"return {\n    actor: {\n        \"data.attributes.hp.max\": Math.floor(args[0].assignedActor?.data.data.attributes.hp.max / 2) > args[0].summon?.data.data.attributes.hp.max ? Math.floor(args[0].assignedActor?.data.data.attributes.hp.max / 2) : args[0].summon?.data.data.attributes.hp.max\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"3zeexRTlY2kf8O4h","name":"Prière de soins","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/life/cross-worn-green.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"tBnsQSOoZLulR4CW\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'tBnsQSOoZLulR4CW'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":100000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"40aOjhuUgHyddmat","name":"effectOverTime","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"// args[0] => each/on/off\n// args[1] => options|array [\"save\", \"save[type|dc?]\", \"damage\", \"damage[formula|type]\", \"aura\" (optional)\n// args[last] => origin object\n\nclass DDEffectOverTime {\n\n    static async build(args) {\n        const repeat = args[0]\n\n        const options = []\n        for (let index = 1; index < args.length - 1; index++) {\n            if (typeof args[index] === 'string') options.push(args[index])\n        }\n\n        const save = options.includes('save')\n        let customSave = options.filter(s => /^save\\[(.*?)\\|?([0-9]+)?\\]$/.test(s))\n        customSave = customSave.length > 0 ? customSave : false\n        const damage = options.includes('damage')\n        let customDamage = options.filter(s => /^damage\\[(.+d?.+)\\|(.+)\\]$/.test(s))\n        customDamage = customDamage.length > 0 ? customDamage : false\n        const aura = options.includes('aura')\n        const auraEach = options.includes('auraEach')\n        let spellLevel = options.filter(s => /^level([0-9])$/.test(s))\n        spellLevel = spellLevel.length > 0 ? spellLevel : false\n\n        const actorUuid = args[args.length - 1].actorUuid\n        const originUuid = args[args.length - 1].origin\n\n        let originActor, originToken, originItem\n\n        // Linked actor\n        if (originUuid.match(/Actor\\.(.+)\\.Item.+/)) {\n            originActor = await game.actors.get(originUuid.match(/Actor\\.(.+)\\.Item.+/)[1])\n            originToken = await originActor.getActiveTokens()[0]\n            originItem = await originActor.items.get(originUuid.match(/Actor\\..+\\.Item\\.(.+)/)[1])\n        } else {\n            // Unliked actor\n            originToken = await canvas.tokens.get(originUuid.match(/.+Token\\.(.+)\\.Item.+/)[1])\n            originActor = originToken?.actor || game.actors.find(a => a.items.get(originUuid.match(/.+Token\\..+\\.Item\\.(.+)/)[1]))\n            originItem = await originActor.items.get(originUuid.match(/.+Token\\..+\\.Item\\.(.+)/)[1])\n        }\n\n        const actor = await game.actors.get(args[args.length - 1].actorId)\n        const token = await canvas.tokens.get(args[args.length - 1].tokenId)\n\n        return new this({ repeat, save, customSave, damage, customDamage, aura, auraEach, spellLevel, actorUuid, originUuid, originActor, originToken, originItem, actor, token })\n    }\n\n    constructor(options = {}) {\n        Object.assign(this, options)\n        this.createHook()\n    }\n\n    createHook() {\n        if (window.DDEffectOverTime?.renderChatMessageHookID) return\n\n        const hookID = Hooks.on('renderChatMessage', (message, html) => {\n            html.find('.DDEffectOverTime .card-buttons button[data-action=\"delete-effect\"]').click(e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const button = event.currentTarget\n                window.DAE.deleteActiveEffect(button.dataset.actor, button.dataset.origin)\n            })\n\n            html.find('.DDEffectOverTime .card-buttons button[data-action=\"save\"]').click(async (e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                const button = event.currentTarget\n                const targets = canvas.tokens.controlled.filter(t => !!t.actor);\n                for (let token of targets) {\n                    const speaker = ChatMessage.getSpeaker({ scene: canvas.scene, token });\n                    await token.actor.rollAbilitySave(button.dataset.ability, { speaker });\n                }\n            })\n\n            html.find('.DDEffectOverTime .card-header.flexrow img').click(async e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const img = event.currentTarget\n                const actor = await game.actors.get(img.dataset.actorid)\n                if (!actor) return\n                const token = actor.getActiveTokens().find(t => t.data._id === img.dataset.tokenid)\n                token.control()\n                canvas.animatePan({ x: token.data.x, y: token.data.y })\n            })\n        })\n\n        window.DDEffectOverTime = { renderChatMessageHookID: hookID }\n    }\n\n    _buildHeader() {\n        return `\n            <header class=\"card-header flexrow\">\n                <img data-tokenid=\"${this.token.data._id}\" data-actorid=\"${this.actor.data._id}\" src=\"${this.token.data.img}\" width=\"36\" height=\"36\"/>\n                <h3 class=\"item-name\">${this.token.data.name}</h3>\n                <img ${this.originToken ? `data-tokenid=\"${this.originToken.data._id}\" data-actorid=\"${this.originActor.data._id}\" title=\"${this.originActor.data.name} (${this.originToken.data.name})\"` : null}  src=\"${this.originItem.img}\" width=\"36\" height=\"36\"/>\n            </header>\n        `\n    }\n\n    _buildDescription() {\n        return `\n            <div><b>${this.originItem.data.name} (${this.originActor.data.name})</b></div>\n            <div class=\"card-content\" style=\"display: none;\">\n                <p>${this.originItem.data.data.description.value}</p>\n            </div>\n        `\n    }\n\n    async _buildDamage() {\n        if (!this.damage && !this.customDamage) return ['', []]\n        if (this.damage && this.originItem.data.data.damage.parts.length < 1) return ['', []]\n\n\n        let html = ''\n        let damagesRolls = []\n        let damageParts\n\n        if (this.damage) {\n            damageParts = this.originItem.data.data.damage.parts\n        } else {\n            const damageDetail = new RegExp(/^damage\\[(.+d?.+)\\|(.+)\\]$/).exec(this.customDamage[0])\n            damageParts = [[damageDetail[1].replaceAll('&', '+'), damageDetail[2]]]\n        }\n\n        // For each damage formula\n        await damageParts.reduce(async (promise, part, index) => {\n            await promise\n\n            let formula = [part[0]]\n\n            // Scale damage from up-casting spells\n            if (index === 0 && this.damage) {\n                if (this.originItem.data.type === 'spell') {\n                    if (this.originItem.data.data.scaling.mode === 'cantrip') {\n                        let level\n                        if (this.originActor.type === 'character') level = this.originActor.data.data.details.level\n                        else if (this.originItem.data.data.preparation.mode === 'innate') level = Math.ceil(this.originActor.data.data.details.cr)\n                        else level = this.originActor.data.data.details.spellLevel\n                        this.originItem._scaleCantripDamage(formula, this.originItem.data.data.scaling.formula, level, this.originItem.getRollData())\n                    }\n                    else if (this.originItem.data.data.level && (this.originItem.data.data.scaling.mode === 'level') && this.originItem.data.data.scaling.formula && this.spellLevel) {\n                        const spellLevel = parseInt(new RegExp(/^level([0-9])$/).exec(this.spellLevel[0])[1])\n                        this.originItem._scaleSpellDamage(formula, this.originItem.data.data.level, spellLevel, this.originItem.data.data.scaling.formula, this.originItem.getRollData())\n                    }\n                }\n            }\n            formula = formula[0]\n\n            const damagesRoll = await new Roll(`${Roll.replaceFormulaData(`${formula}`, this.originActor.data.data)}`).roll({ async: true })\n            damagesRolls.push(damagesRoll)\n\n            // For each damage expression\n            let dicePart = ''\n            damagesRoll.dice.forEach(die => {\n                let diceDetail = ''\n\n                // For each damage die\n                die.results.forEach(r => {\n                    diceDetail += `<li class=\"roll die d${die.faces} ${r.result === die.faces ? 'max' : r.result === 1 ? 'min' : ''}\">${r.result}</li>`\n                })\n\n                dicePart += `\n                    <div class=\"dice-tooltip\">\n                        <section class=\"tooltip-part\">\n                            <div class=\"dice\">\n                                <ol class=\"dice-rolls\">\n                                    ${diceDetail}\n                                </ol>\n                            </div>\n                        </section>\n                    </div>\n                `\n            })\n\n            // Localize damage type\n            let toLocalize = part[1].charAt(0).toUpperCase() + part[1].slice(1)\n            const localizationPrefix = toLocalize === 'Healing' || toLocalize === 'Temphp' ? 'DND5E.' : 'DND5E.Damage'\n            if (toLocalize === 'Temphp') toLocalize = 'HealingTemp'\n            const localizedDamagePart = game.i18n.localize(localizationPrefix + toLocalize)\n\n\n            html += `\n                <div class=\"card-roll formula-group\">\n                    <div class=\"dice-roll\">\n                        <div class=\"dice-result\">\n                            <div class=\"dice-formula\">${damagesRoll.formula}</div>\n                            ${dicePart}\n                            <h4 class=\"dice-total\">\n                                ${damagesRoll.total}\n                                <div style=\"margin-bottom: 0.25rem;font-size: .8rem;line-height: .8rem;font-weight: normal;\">${localizedDamagePart}</div>\n                            </h4>\n                        </div>\n                    </div>\n                </div>\n            `\n        }, Promise.resolve())\n\n        return [html, damagesRolls]\n    }\n\n    _buildSave() {\n        if (!this.save && !this.customSave) return ''\n        if (this.save && !this.originItem.data.data.save?.ability) return ''\n\n        let saveValue, saveType, saveLocalized\n\n        if (this.save) {\n            saveValue = this.originItem.data.data.save.dc\n            saveType = this.originItem.data.data.save.ability\n            saveLocalized = game.i18n.localize(\"DND5E.Ability\" + this.originItem.data.data.save.ability.charAt(0).toUpperCase() + this.originItem.data.data.save.ability.slice(1))\n        } else {\n            const saveDetail = new RegExp(/^save\\[(.*?)\\|?([0-9]+)?\\]$/).exec(this.customSave[0])\n            saveValue = saveDetail[2] ? parseInt(saveDetail[2]) : this.originItem.data.data.save.dc\n            saveType = saveDetail[1]\n            saveLocalized = game.i18n.localize(\"DND5E.Ability\" + saveDetail[1].charAt(0).toUpperCase() + saveDetail[1].slice(1))\n        }\n\n        return `\n            <button data-action=\"save\" data-ability=\"${saveType}\">\n                Jet de sauvegarde DD ${saveValue} ${saveLocalized}\n            </button>\n        `\n    }\n\n    _buildDeleteEffect() {\n        if (!window.DAE) return ''\n\n        return `\n            <button data-action=\"delete-effect\" data-actor=\"${this.actorUuid}\" data-origin=\"${this.originUuid}\">\n                Supprimer l'effet\n            </button>\n        `\n    }\n\n    async sendChatMessage() {\n        if (this.repeat === 'off') return\n        if (this.repeat === 'on' && (!this.aura || this.auraEach)) return\n        if (this.aura && this.actor.data._id === this.originActor.data._id) return\n        //if (this.aura && this.token.data._id !== game.combats.active.current.tokenId) return\n\n        const header = this._buildHeader()\n        const description = this._buildDescription()\n        const damages = await this._buildDamage()\n        const save = this._buildSave()\n        const deleteEffect = this._buildDeleteEffect()\n\n        const content = `\n            <div class=\"dnd5e chat-card item-card DDEffectOverTime\">\n                ${header}\n                ${description}\n                ${damages[0]}\n                <div class=\"card-buttons\" style=\"margin: 5px 0;\">\n                    ${save}\n                    ${deleteEffect}\n                <div>\n            <div>\n        `\n\n        let chatData = {\n            user: game.user._id,\n            speaker: ChatMessage.getSpeaker(this.originToken),\n            content\n        }\n\n        if (this.damage || this.customDamage) {\n            chatData.type = CONST.CHAT_MESSAGE_TYPES.ROLL\n            chatData.roll = Roll.fromTerms([PoolTerm.fromRolls(damages[1])])\n        }\n\n        if (!this.originActor.hasPlayerOwner) {\n            chatData.whisper = [game.user._id]\n        } else {\n            chatData.rollMode = CONST.DICE_ROLL_MODES.PUBLIC\n        }\n\n        const chatMessage = await ChatMessage.create(chatData, {})\n    }\n\n}\n\nconst effectOverTime = await DDEffectOverTime.build(args)\neffectOverTime.sendChatMessage()","folder":"1F3e0ZCRKTOyCJmZ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"435j3MwrDDTlvjp9","name":"Expert au bouclier : désavantage à un adversaire","type":"script","author":"smDCHl04t3XJPorJ","img":"modules/srd-heros-et-dragons/assets/icons/expert-bouclier.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"u3RnNsW7PkIivv9n\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'u3RnNsW7PkIivv9n'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-12500,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"4GwGp5vyYyI79RHz","name":"Opportunisme funèbre","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/unholy/strike-body-life-soul-purple.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"PAd96hEWjT5UFReF\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'PAd96hEWjT5UFReF'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3200000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"6TUN1JugGxZYSS2k","name":"Épée courte","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/weapons/swords/sword-guard-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"jhU6eD8hH8ovNisZ\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'jhU6eD8hH8ovNisZ'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":0,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"8784enkxu94ZKgHg","name":"Tranche-Cauchemar (Nocturno)","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/magic/unholy/orb-beam-pink.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"VphXZT6DuoHhVruo\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'VphXZT6DuoHhVruo'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-100000,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"9nDWilUn6IDFkzgL","name":"Protection Morphéenne (Nocturno)","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/magic/defensive/shield-barrier-glowing-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"8312jGkC5Xyrd474\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = '8312jGkC5Xyrd474'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":0,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"Af7ynjmAji3AsHJB","name":"itemToChat","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"// args[0] => actor\n// args[1] => item\n// args[2] => { configureDialog: true } (optional)\n\nconst actorId = args[0].data._id;\nconst itemId = args[1].data._id;\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nreturn itemToRoll.roll(args[2] || {})","folder":"1F3e0ZCRKTOyCJmZ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"CJYlU2Ht3Y2KLSsh","name":"Métamorphe","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/creatures/abilities/stinger-poison-green.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"zWWF9rbjVFbCUBXi\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'zWWF9rbjVFbCUBXi'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-9375,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"DNCaKKcMIKbJk9j7","name":"Assistance","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/control/buff-flight-wings-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"dmtc3sxL9lXV3WVD\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'dmtc3sxL9lXV3WVD'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2000000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"DemGJ7i9kRPBatnK","name":"Canalisation d’énergie divine","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/lightning/bolt-strike-smoke-yellow.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"Q4RvBYzJjg3Unjk4\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'Q4RvBYzJjg3Unjk4'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":200000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"DlPyJyFj1In3iU6p","name":"Bénédiction","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/control/buff-flight-wings-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"VZ9fQ1ZcIA43ynmd\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'VZ9fQ1ZcIA43ynmd'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":300000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"FIDzrScL0NZew2Ac","name":"_evocationJSON","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"game.settings.set(AECONSTS.MN, \"customautospells\",\n    {\n        \"Lumière\": [\n            {\n                \"creature\": \"Lumière\",\n                \"number\": 1,\n                \"animation\": \"fourelements\"\n            }\n        ],\n        \"Illusion mineure\": [\n            {\n                \"creature\": \"Illusion mineure\",\n                \"number\": 1,\n                \"animation\": \"magic1\"\n            }\n        ],\n        \"Image silencieuse\": [\n            {\n                \"creature\": \"Image silencieuse\",\n                \"number\": 1,\n                \"animation\": \"magic1\"\n            }\n        ],\n        \"Lumières dansantes\": [\n            {\n                \"creature\": \"Lumière dansante\",\n                \"number\": 4,\n                \"animation\": \"fourelements\"\n            }\n        ],\n        \"Main du mage\": [\n            {\n                \"creature\": \"Main du mage\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            }\n        ],\n        \"Serviteur invisible\": [\n            {\n                \"creature\": \"Serviteur invisible\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            }\n        ],\n        \"Arme spirituelle\": [\n            {\n                \"creature\": \"Arme spirituelle\",\n                \"number\": 1,\n                \"animation\": \"energy1\"\n            }\n        ],\n        \"Petit fumigène\": [\n            {\n                \"creature\": \"Petit fumigène\",\n                \"number\": 1,\n                \"animation\": \"none\"\n            }\n        ],\n        \"Aura de ténèbres\": [\n            {\n                \"creature\": \"Aura de ténèbres\",\n                \"number\": 1,\n                \"animation\": \"none\"\n            }\n        ],\n        \"Obscurité\": [\n            {\n                \"creature\": \"Obscurité\",\n                \"number\": 1,\n                \"animation\": \"none\"\n            }\n        ],\n        \"Flamme éternelle\": [\n            {\n                \"creature\": \"Flamme éternelle\",\n                \"number\": 1,\n                \"animation\": \"fourelements\"\n            }\n        ],\n        \"Silence\": [\n            {\n                \"creature\": \"Silence\",\n                \"number\": 1,\n                \"animation\": \"energy1\"\n            }\n        ],\n        \"Nuée de dagues\": [\n            {\n                \"creature\": \"Nuée de dagues\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            }\n        ],\n        \"Pyrotechnie\": [\n            {\n                \"creature\": \"Pyrotechnie\",\n                \"number\": 1,\n                \"animation\": \"none\"\n            }\n        ],\n        \"Nappe de brouillard\": [\n            {\n                \"creature\": \"Nappe de brouillard\",\n                \"number\": 1,\n                \"animation\": \"none\"\n            }\n        ],\n        \"Animal totem\": [\n            {\n                \"creature\": \"Tigre\",\n                \"number\": 1,\n                \"animation\": \"energy1\"\n            }\n        ],\n        \"Clairvoyance\": [\n            {\n                \"creature\": \"Clairvoyance\",\n                \"number\": 1,\n                \"animation\": \"energy1\"\n            }\n        ],\n        \"Animation des morts\": [\n            {\n                \"creature\": \"Zombi\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            },\n            {\n                \"creature\": \"Squelette\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            }\n        ],\n        \"Lumière du jour\": [\n            {\n                \"creature\": \"Lumière du jour\",\n                \"number\": 1,\n                \"animation\": \"fourelements\"\n            }\n        ],\n        \"Image majeure\": [\n            {\n                \"creature\": \"Image majeure\",\n                \"number\": 1,\n                \"animation\": \"magic1\"\n            }\n        ],\n        \"Nuage puant\": [\n            {\n                \"creature\": \"Nuage puant\",\n                \"number\": 1,\n                \"animation\": \"energy1\"\n            }\n        ],\n        \"Cordon de flèches\": [\n            {\n                \"creature\": \"Cordon de flèches\",\n                \"number\": 1,\n                \"animation\": \"magic1\"\n            }\n        ],\n        \"Esprit guérisseur\": [\n            {\n                \"creature\": \"Esprit guérisseur\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            }\n        ],\n        \"Gardien de la foi\": [\n            {\n                \"creature\": \"Gardien de la foi\",\n                \"number\": 1,\n                \"animation\": \"magic2\"\n            }\n        ],\n    }\n)","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"Fa6hmy1hwcQxHRlv","name":"Lumière","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/light/explosion-star-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"RRIxgGtdL9DnTJc4\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'RRIxgGtdL9DnTJc4'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":400000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"FvCjV3kQ6oihMpnb","name":"Saut de brume","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/skills/movement/feet-winged-boots-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"91tyiWVLpjjpocNu\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = '91tyiWVLpjjpocNu'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":0,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"GSIBdYciQb0UADyy","name":"Disposition du token","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/skills/social/diplomacy-handshake.webp","scope":"global","command":"// Token(s) selected\n\nif (canvas.tokens.controlled.length < 1) return ui.notifications.warn(\"No Token selected\")\n\nlet applyChanges = false\nlet tokens = canvas.tokens.controlled\nlet disposition\n\nnew Dialog({\n    title: `Disposition du token`,\n    content: `\n        <style>\n            #DDChangeTokenDisposition .dialog-content .header {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                font-weight: bold;\n                margin-bottom: 10px;\n            }\n\n            #DDChangeTokenDisposition .dialog-content .question {\n                text-align: center;\n                font-style: italic;\n                margin-bottom: 10px;\n            }\n\n            #DDChangeTokenDisposition .dialog-content form {\n                margin-bottom: 10px;\n            }\n\n            #DDChangeTokenDisposition .dialog-content .token {\n                display: flex;\n                align-items: center;\n                margin-bottom: 2px;\n            }\n\n            #DDChangeTokenDisposition .dialog-content .token:last-child {\n                margin-bottom: 10px;\n            }\n        </style>\n\n        <div class=\"header\">\n            <img src=\"icons/skills/social/diplomacy-handshake.webp\" width=\"36\" height=\"36\"/>&nbsp;&nbsp;&nbsp;\n            <div>Changer la disposition des tokens</div>\n        </div>\n\n        <form>\n            <div class=\"form-group\">\n                <label for=\"other-tokens\">Modifier les tokens de cette scène ?</label>\n                <input type=\"checkbox\" name=\"other-tokens\" id=\"other-tokens\" checked>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"prototype-token\">Modifier les tokens de <b>toutes</b> les scènes et de l'acteur ?</label>\n                <input type=\"checkbox\" name=\"prototype-token\" id=\"prototype-token\">\n            </div>\n        </form>\n        \n        ${tokens.map(t => `<div class=\"token\"><img src=\"${t.data.img}\" width=\"24\" height=\"24\"/>&nbsp;${t.data.name} (${t.data.actorLink ? 'lié' : 'non-lié'})</div>`).join('')}\n    `,\n    buttons: {\n        hostile: { \n            label: `Hostile`,\n            callback: () => {\n                applyChanges = true\n                disposition = CONST.TOKEN_DISPOSITIONS.HOSTILE\n            }\n        },\n        neutral: { \n            label: `Neutre`,\n            callback: () => {\n                applyChanges = true\n                disposition = CONST.TOKEN_DISPOSITIONS.NEUTRAL\n            }\n        },\n        friendly: { \n            label: `Amical`,\n            callback: () => {\n                applyChanges = true\n                disposition = CONST.TOKEN_DISPOSITIONS.FRIENDLY\n            }\n        }\n    },\n    default: \"friendly\",\n    close: async html => {\n        if (applyChanges) {\n            const otherTokens = html.find('[name=\"other-tokens\"]')[0].checked || false\n            const prototypeToken = html.find('[name=\"prototype-token\"]')[0].checked || false\n            const actorsProcessed = []\n\n            tokens.reduce(async (promise, t) => {\n                await promise\n\n                const prototypeActor = game.actors.get(t.data.actorId)\n                if ((prototypeToken || otherTokens) && actorsProcessed.includes(prototypeActor.data._id)) return\n\n                if (prototypeToken) {\n                    await prototypeActor.update({'token.disposition': disposition})\n\n                    const scenesWithTokens = await game.scenes.filter(s => s.tokens.filter(t => t.data.actorId === prototypeActor.data._id))\n                    for (let s of scenesWithTokens) {\n                        const tokensToUpdate = await s.tokens.filter(t => t.data.actorId === prototypeActor.data._id)\n\n                        for (let t of tokensToUpdate) {\n                            await t.update({ disposition })\n                        }\n                    }\n                } else if (otherTokens) {\n                    const tokensToUpdate = await prototypeActor.getActiveTokens(false, true)\n\n                    for (let t of tokensToUpdate) {\n                        await t.update({ disposition })\n                    }\n                } else {\n                    await t.update({ disposition })\n                }\n                \n                actorsProcessed.push(prototypeActor.data._id)\n            }, Promise.resolve())\n        }\n    }\n}, {\n    id: 'DDChangeTokenDisposition'\n}).render(true)","folder":"ZijsCmFthdbTUjd6","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"Giftb5xaesIdqCg2","name":"Méduse circéale (Euryale)","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/creatures/tentacles/tentacles-octopus-black-pink.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"pLwL9ph0vGCHRDQv\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'pLwL9ph0vGCHRDQv'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":400000,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"GsS8VyQy4jhS3tde","name":"Égide fugace","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/defensive/barrier-shield-dome-deflect-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"6L7dDU5NBKGyoXbg\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = '6L7dDU5NBKGyoXbg'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":500000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"HMxTnFv5Dl085GLJ","name":"Flèche assassine","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/weapons/ammunition/arrow-broadhead-glowing-orange.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"DyP8B0R6gKSu56Na\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'DyP8B0R6gKSu56Na'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":500000,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"HXeuDcWELNh6yJee","name":"Nocturno","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/weapons/swords/sword-runed-glowing.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"MjhpmobVcTfKPYD0\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'MjhpmobVcTfKPYD0'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":100000,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"Hs8Ws11ww0l5jhNC","name":"Restauration inférieure","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/life/heart-cross-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"CUhFNYec3aSL55Kx\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'CUhFNYec3aSL55Kx'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2700000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"IHeIKJaXbXIwexsV","name":"Témérité","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/magic/light/explosion-beam-impact-silhouette.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"zQXG7IUGppcHNwEU\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'zQXG7IUGppcHNwEU'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":100000,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"IPWPNIv832tEtPYK","name":"Balisage","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/light/beam-rays-yellow-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"zBzfyHeccHppmYxh\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'zBzfyHeccHppmYxh'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2300000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"ISRwDwM88abGwN3S","name":"Détection de la magie","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/light/explosion-star-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"l1YPt5QlSec0qnHc\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'l1YPt5QlSec0qnHc'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3400000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"name":"New Macro","type":"chat","author":"OcWFeOWyVpu4vxi5","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{},"_id":"Ia8MCkPnNHt6uaX5"}
{"_id":"IacZeppjE1zCTopa","name":"Flèche assassine","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/weapons/ammunition/arrow-broadhead-glowing-orange.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"DyP8B0R6gKSu56Na\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'DyP8B0R6gKSu56Na'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":600000,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"JkOQnmnxe030HCxb","name":"Mot de guérison","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/life/heart-cross-green.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"fNNkkdeKyiaDoqs0\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'fNNkkdeKyiaDoqs0'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":850000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"JkxgsMS8mCemGUf7","name":"Lumière","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/light/explosion-star-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"RRIxgGtdL9DnTJc4\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'RRIxgGtdL9DnTJc4'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2800000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"JupFs0FPBwOXvfPq","name":"Arbalète légère","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/weapons/crossbows/crossbow-simple-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"B1mWINRYUthhlaU5\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'B1mWINRYUthhlaU5'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":600000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"MbyYYkxkOw7Ryvk5","name":"Marque du chasseur","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/magic/perception/eye-ringed-glow-angry-small-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"dntdvFakBdoXUJ0g\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'dntdvFakBdoXUJ0g'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":200000,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"name":"Liberté de mouvement","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/skills/armor_01.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"BihuxeI0MSjxHkSI\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'BihuxeI0MSjxHkSI'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":null,"sort":0,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}},"_id":"N09TeWyMWBsm7M7L"}
{"_id":"NGQHZGP43e97hdYw","name":"Frère d'armes","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/skills/melee/hand-grip-sword-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"PcyONDH6FhKPCSBw\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'PcyONDH6FhKPCSBw'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":400000,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"NNlVOWHFeQmYj84Y","name":"Bougie","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/sundries/lights/candle-unlit-white.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"tdZ2zwU11f7xpY4b\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'tdZ2zwU11f7xpY4b'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1700000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"NlBcWXugss19nlsu","name":"Arc composite (puissante)","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/weapons/bows/bow-ornamental-gold-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"bzNuQECJmAb9J0Ev\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'bzNuQECJmAb9J0Ev'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":500000,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"ODDauLUHUUKBNJ7p","name":"Apaisement des émotions","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/light/explosion-star-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"eeXSjeib4BCDqqTg\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'eeXSjeib4BCDqqTg'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3500000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"OVSx3b100FGwskaM","name":"Par le sang, la puissance","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/skills/wounds/blood-drip-droplet-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"u0NWoRMLUsdCu2Gc\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'u0NWoRMLUsdCu2Gc'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":800000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"OnuWx1yi1ep7tsDK","name":"Morsure","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/creatures/abilities/mouth-teeth-long-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"5m9XQO9jbwEPPclm\" ItemID=\"npiswgaiGzupcEmw\"\nconst actorId = '5m9XQO9jbwEPPclm'\nconst itemId = 'npiswgaiGzupcEmw'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"Op5IbCIIZ6HmxccS","name":"musicLink","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"if(game.user.isGM) {\nwindow.open('https://vdo.ninja/v20/?push=DarKDinDoN&view=DarKDinDoN&videodevice=0&audiodevice=2250764c5c79c6a45fad159b85c302e3e17695d2f7c37f80447c6f0e73e27c01&stereo=1&aec=0&autogain=0&denoise=0&aj&noap&audiobitrate=320')\n} else {\nwindow.open('https://vdo.ninja/?view=DarKDinDoN&stereo=1&audiobitrate=320&noap')\n}","folder":"1F3e0ZCRKTOyCJmZ","sort":100000,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.iP8y6GL6QztIuwgO"}}}
{"_id":"PDUZnpZRcNXYIbf4","name":"Rations (1 jour)","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/consumables/meat/hock-leg-pink-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"nFUNJKXrRkDOWbxL\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'nFUNJKXrRkDOWbxL'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":900000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"Qd8jgoYVTrq6HjrK","name":"Cube de force","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/items/inventory/dice.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"CLSXrakOqOSiPOci\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'CLSXrakOqOSiPOci'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2500000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"QpMrJAFzwiCUkisy","name":"Sursaut d'activité","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/skills/social/intimidation-impressing.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"LndtPCkmk5VWLCby\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'LndtPCkmk5VWLCby'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-50000,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"QzxyfrThf8a56ZCA","name":"openNotes","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"game.modules.get('gm-screen')?.api?.toggleGmScreenVisibility(true);","folder":"1F3e0ZCRKTOyCJmZ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"SE7pfq0JedjGBVgk","name":"AE_Companion_Macro(Arme spirituelle)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"return {\n    embedded: {\n        Item: {\n            \"Arme spirituelle (attaque)\": {\n                \"data.attackBonus\": args[0].assignedActor?.data.data.attributes.spelldc-8+args[0].assignedActor?.data.data.bonuses.msak.attack,\n                \"data.damage.parts\":[[`${1 + Math.floor((args[0].spellLevel-2)/2)}d8 + ${args[0].assignedActor?.data.data.abilities[args[0].assignedActor?.data.data.attributes.spellcasting]?.mod || \"\"}`,\"force\"]]\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"SRteYrB9ttJ7nd40","name":"_noneAnimation","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"U4AXyTJI1G6sl0Vn","name":"Par la douleur, le pouvoir","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/skills/wounds/injury-hand-blood-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"2EBNm36mGq5YVaB7\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = '2EBNm36mGq5YVaB7'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1000000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"VgvcZ8gVWmHIqIOp","name":"Sanctuaire","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/defensive/shield-barrier-flaming-diamond-blue-yellow.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"BIjvWBvENymSINYB\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'BIjvWBvENymSINYB'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2400000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"WDArGoh0P7ebQw16","name":"Lumières","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/sundries/lights/torch-brown-lit.webp","scope":"global","command":"if (canvas.tokens.controlled.length === 0)\n    return ui.notifications.error(\"Please select a token first\")\n\nconst defaultLight = {\n    dim: 0,\n    bright: 0,\n    angle: 360,\n    color: '#7f4a14',\n    alpha: 0.7,\n    animation: { type: '', speed: 1, intensity: 1, reverse: false },\n    coloration: 1,\n    luminosity: 0.5\n}\n\n\nconst lights = {\n    none: {\n        label: \"Aucune\",\n        data: {}\n    },\n    candle: {\n        label: \"Bougie\",\n        data: { dim: 3, bright: 1.5, animation: { type: 'torch' } }\n    },\n    eternalflame: {\n        label: \"Flamme éternelle (sort)\",\n        data: { dim: 12, bright: 6, animation: { type: 'torch' } }\n    },\n    lamp: {\n        label: \"Lampe\",\n        data: { dim: 13.5, bright: 4.5, animation: { type: 'torch' } }\n    },\n    ceramiclamp: {\n        label: \"Lampe à huile en céramique\",\n        data: { dim: 6, bright: 3, animation: { type: 'torch' } }\n    },\n    hoodedbright: {\n        label: \"Lanterne à capote (normal)\",\n        data: { dim: 18, bright: 9, animation: { type: 'torch' } }\n    },\n    hoodeddim: {\n        label: \"Lanterne à capote (couverte)\",\n        data: { dim: 0.1, bright: 0, animation: { type: 'torch' } }\n    },\n    bullseye: {\n        label: \"Lanterne sourde\",\n        data: { dim: 36, bright: 18, angle: 52.5, animation: { type: 'torch' } }\n    },\n    light: {\n        label: \"Lumière (sort)\",\n        data: { dim: 12, bright: 6, color: '', animation: { type: 'pulse', speed: 2 } }\n    },\n    torch: {\n        label: \"Torche\",\n        data: { dim: 12, bright: 6, animation: { type: 'torch' } }\n    },\n}\n\nlet applyChanges = false\n\nnew Dialog({\n    title: `Token Vision Configuration`,\n    content: `\n        <form>\n            <div class=\"form-group\">\n                <label>Light Source:</label>\n                <select id=\"light-source\" name=\"light-source\">\n                    ${(function () {\n            let html = ''\n\n            Object.entries(lights).forEach(([key, light]) => {\n                html += `\n                    <option value=\"${key}\">${light.label}</option>\n                `\n            })\n\n            return html\n        }())}\n                </select>\n            </div>\n        </form>\n    `,\n    buttons: {\n        no: {\n            icon: '<i class=\"fas fa-times\"></i>',\n            label: 'Cancel Changes'\n        },\n        yes: {\n            icon: '<i class=\"fas fa-check\"></i>',\n            label: 'Apply Changes',\n            callback: () => applyChanges = true\n        }\n    },\n    default: 'yes',\n    close: async html => {\n        if (applyChanges) {\n            let lightSource = html.find('[name=\"light-source\"]')[0].value\n            for (let token of canvas.tokens.controlled) {\n                const lightData = mergeObject(deepClone(defaultLight), lights[lightSource].data)\n                await token.document.update({ light: lightData })\n            }\n        }\n    }\n}).render(true)","folder":"ZijsCmFthdbTUjd6","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"Xf18p8ZqQYjq1wQS","name":"Épée à deux mains","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/weapons/swords/greatsword-guard-gem-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"IoOrPQgYoyB06Jc9\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'IoOrPQgYoyB06Jc9'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"YF6grO9lKh0nhy0S","name":"Dague","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/weapons/daggers/dagger-jeweled-purple.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"8bFx3Gt8e5bwlpGN\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = '8bFx3Gt8e5bwlpGN'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1900000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"YZqdNlFpNbPecsvQ","name":"Effets actifs","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/magic/movement/chevrons-down-yellow.webp","scope":"global","command":"if (!canvas.tokens.controlled[0]?.actor) {\nui.notifications.warn(\"No Token selected\");\nreturn;\n}\nnew DAE.ActiveEffects(canvas.tokens.controlled[0].actor).render(true)","folder":"ZijsCmFthdbTUjd6","sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.V3BxEbwh7WL2VXsI"}}}
{"_id":"Yl5INxBgSzvchTKV","name":"Arme spirituelle","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/fire/dagger-rune-enchant-flame-purple.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"dxzJUvU4rJUc5VTZ\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'dxzJUvU4rJUc5VTZ'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1100000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"ZXoJyA4NkPAZeDwE","name":"Arc long","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/weapons/bows/longbow-leather-green.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"glRUbh0gSqiBd8Fn\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'glRUbh0gSqiBd8Fn'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":0,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"aRVQnrmYEkHSkHwy","name":"Marche sur l'eau","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/skills/blue_20.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"cFOsrQP5By76I1Pi\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'cFOsrQP5By76I1Pi'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3600000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"dCZqAu4wSTc9OoCJ","name":"Éclairages","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/sundries/lights/candle-pillar-lit-yellow.webp","scope":"global","command":"const defaultLight = {\n    dim: 0,\n    bright: 0,\n    angle: 360,\n    color: '#7f4a14',\n    alpha: 0.7,\n    darkness: { min: 0.5, max: 1 },\n    animation: { type: '', speed: 1, intensity: 1, reverse: false },\n    coloration: 1,\n    luminosity: 0.5,\n    hidden: false\n}\n\nconst lights = {\n    none: {\n        label: \"Aucune\",\n        data: {}\n    },\n    candle: {\n        label: \"Bougie\",\n        data: { dim: 3.75, bright: 2.25, animation: { type: 'torch' } }\n    },\n    eternalflame: {\n        label: \"Flamme éternelle (sort)\",\n        data: { dim: 12.75, bright: 6.75, animation: { type: 'torch' } }\n    },\n    lamp: {\n        label: \"Lampe\",\n        data: { dim: 14.5, bright: 5.25, animation: { type: 'torch' } }\n    },\n    ceramiclamp: {\n        label: \"Lampe à huile en céramique\",\n        data: { dim: 6.75, bright: 3.25, animation: { type: 'torch' } }\n    },\n    hoodedbright: {\n        label: \"Lanterne à capote (normal)\",\n        data: { dim: 18.75, bright: 9.75, animation: { type: 'torch' } }\n    },\n    hoodeddim: {\n        label: \"Lanterne à capote (couverte)\",\n        data: { dim: 0.85, bright: 0, animation: { type: 'torch' } }\n    },\n    bullseye: {\n        label: \"Lanterne sourde\",\n        data: { dim: 36.75, bright: 18.75, angle: 52.5, animation: { type: 'torch' } }\n    },\n    light: {\n        label: \"Lumière (sort)\",\n        data: { dim: 12.75, bright: 6.75, color: '', animation: { type: 'pulse', speed: 2 } }\n    },\n    torch: {\n        label: \"Torche\",\n        data: { dim: 12.75, bright: 6.75, animation: { type: 'torch' } }\n    },\n}\n\nlet applyChanges = false\n\nnew Dialog({\n    title: `Map lights Configuration`,\n    content: `\n        <form>\n            <div class=\"form-group\">\n                <label>Light Source:</label>\n                <select id=\"light-source\" name=\"light-source\">\n                    ${(function () {\n            let html = ''\n\n            Object.entries(lights).forEach(([key, light]) => {\n                html += `\n                                <option value=\"${key}\">${light.label}</option>\n                            `\n            })\n\n            return html\n        }())}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"turn-on-off\">Switch turn on / off</label>\n                <input type=\"checkbox\" name=\"turn-on-off\" id=\"turn-on-off\">\n            </div>\n        </form>\n    `,\n    buttons: {\n        no: {\n            icon: '<i class=\"fas fa-times\"></i>',\n            label: 'Cancel Changes'\n        },\n        yes: {\n            icon: '<i class=\"fas fa-check\"></i>',\n            label: 'Apply Changes',\n            callback: () => applyChanges = true\n        }\n    },\n    default: 'yes',\n    close: async html => {\n        if (applyChanges) {\n            const lightSource = html.find('[name=\"light-source\"]')[0].value\n            const turnOnOff = html.find('[name=\"turn-on-off\"]')[0].checked || false\n            for (let light of canvas.lighting.objects.children) {\n                if (turnOnOff === true) {\n                    await light.document.update({ hidden: !light.data.hidden })\n                } else {\n                    const lightData = mergeObject(deepClone(defaultLight), lights[lightSource].data)\n                    await light.document.update({ config: lightData })\n                }\n            }\n        }\n    }\n}).render(true)","folder":"ZijsCmFthdbTUjd6","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"dqQcRebbxbJp62xp","name":"_searchItem","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"const effects = ['aveuglé', 'charmé', 'concentré', 'assourdi', 'fatigue', 'terrorisé', 'empoigné', 'neutralisé', 'invisible', 'paralysé', 'pétrifié', 'empoisonné', 'a terre', 'entravé', 'etourdi', 'inconscient', 'mort', 'engourdi', 'possédé', 'repoussé', 'surpris']\n\n// const search = i => i.name.toLowerCase().includes('Envoûtement'.toLowerCase())\n// const search = i => i.data.data?.description?.value?.toLowerCase().includes(\"temporaire\")\n// const search = i => i.data.effects?.size > 0\nconst search = i => typeof i.hasMacro === 'function' && i.hasMacro() && i.data.flags.itemacro.macro.data.command.includes(\"classes\")\n// const search = i => i.data.effects?.some(e => e.data.changes?.some(c => c.key.toLowerCase().includes(\"ac.\") && !c.key.toLowerCase().includes(\"ac.bonus\")))\n\nconsole.log('-------------------------------------------------')\nconsole.log('--------------------- ACTORS --------------------')\nconsole.log('-------------------------------------------------')\nawait Promise.all(game.actors.map(a => {\n    const items = a.items.filter(search)\n    if (items) {\n        items.forEach(i => console.log(`----> Actor: ${a.name} - Item: ${i.name}`))\n    }\n}))\n\n\nconsole.log('-------------------------------------------------')\nconsole.log('--------------------- ITEMS ---------------------')\nconsole.log('-------------------------------------------------')\nconst items = game.items.filter(search)\nif (items) {\n    items.forEach(i => console.log(`----> Item: ${i.folder?.name ? i.folder?.name : 'root'} - Item: ${i.name}`))\n}\n\n\nconsole.log('-------------------------------------------------')\nconsole.log('--------------------- PACKS ---------------------')\nconsole.log('-------------------------------------------------')\nconst packKeys = game.packs.keys()\nawait Promise.all(game.packs.map(async p => {\n    if (!packKeys.next().value.startsWith('world.')) return\n\n    const packContent = await p.getDocuments()\n    const items = packContent.filter(search)\n    if (items) {\n        items.forEach(i => console.log(`----> Compendium: ${p.collection} - Item: ${i.name}`))\n    }\n}))","folder":"1F3e0ZCRKTOyCJmZ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"fExAk4CLN6U1qJJC","name":"Protection contre les énergies","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/spells/protect-jade-2.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"8AWo7yUu9dHwGOcU\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = '8AWo7yUu9dHwGOcU'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3300000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"frLIDnqmGlOuTma9","name":"Récupérer des munitions","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/weapons/ammunition/arrows-fletching.webp","scope":"global","command":"let applyChanges = false;\nnew Dialog({\n  title: `Récupérer des munitions`,\n  content: `\n    <style>\n    #DDAmmoCheck .dialog-content .header {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-weight: bold;\n        margin-bottom: 10px;\n    }\n\n    #DDAmmoCheck .dialog-content .question {\n        text-align: center;\n        font-style: italic;\n        margin-bottom: 10px;\n    }\n    #DDAmmoCheck .dialog-content form {\n        margin-bottom: 10px;\n    }\n\n    #DDAmmoCheck .dialog-content form .form-fields input {\n        flex: auto;\n    }\n    </style>\n\n    <div class=\"header\">\n        <img src=\"icons/weapons/ammunition/arrows-fletching.webp\" width=\"36\" height=\"36\"/>&nbsp;&nbsp;&nbsp;\n        <div>Récupérer des munitions</div>\n    </div>\n\n    <div class=\"question\">Combien de munitions avez-vous dépensé ?</div>\n\n    <form>\n      <div class=\"form-group\">\n        <div class=\"form-fields\">\n          <input type=\"range\" id=\"ammo\" name=\"ammo\" value=\"1\" min=\"1\" max=\"20\" step=\"1\" oninput=\"updateRangeAmmo(this.value);\">\n          <span id=\"ammo-value\" class=\"range-value\">1</span>\n        </div>\n      </div>\n    </form>\n    <script>\n      function updateRangeAmmo(val) {\n          document.getElementById(\"ammo-value\").innerHTML = val\n      }\n    </script>\n    `,\n  buttons: {\n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Annuler`\n    },\n    yes: {\n      icon: \"<i class='fas fa-check'></i>\",\n      label: `Valider`,\n      callback: () => applyChanges = true\n    }\n  },\n  default: \"yes\",\n  close: html => {\n    if (applyChanges) {\n      let ammo = parseInt(html.find('#ammo')[0].value)\n\n      let msgContent = `Nombres de munitions récupérées sur ${ammo} dépensées`\n      let diceRoll = `${ammo}d2cs2`\n      new Roll(diceRoll).toMessage({\n        flavor: msgContent\n      })\n    }\n  }\n},\n{\n  id: 'DDAmmoCheck'\n}).render(true)","folder":"wGx3BjD7f1N3B5PM","sort":0,"permission":{"default":2,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"fwJN7oj6bNx1nCb1","name":"Mot de guérison de groupe","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/spells/heal-jade-2.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"sydJofKMvCrRlfhf\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'sydJofKMvCrRlfhf'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3700000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"fzZ9IlWsVw2T55TL","name":"AE_Companion_Macro(Esprit guérisseur)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"let count = Math.max(args[0].assignedActor.data.data.abilities[args[0].assignedActor.data.data.attributes.spellcasting].mod + 1, 2)\n\nconst effects = [\n    {\n        \"changes\": [\n            {\n                \"key\": \"macro.execute\",\n                \"mode\": 0,\n                \"value\": \"\\\"effectOverTime\\\" damage aura\",\n                \"priority\": \"20\"\n            }\n        ],\n        \"icon\": \"modules/jb2a_patreon/Library/Generic/Healing/HealingAbility_02_Regular_GreenOrange_Burst_Thumb.webp\",\n        \"label\": \"Esprit guérisseur\",\n        \"flags\": {\n            \"dae\": {\n                \"macroRepeat\": \"startEveryTurn\",\n                \"transfer\": true\n            },\n            \"ActiveAuras\": {\n                \"isAura\": true,\n                \"aura\": \"All\",\n                \"radius\": 0.25,\n                \"ignoreSelf\": true,\n                \"height\": true,\n                \"hostile\": true,\n                \"onlyOnce\": true\n            }\n        }\n    }\n]\n\nfor (let index = 1; index <= count; index++) {\n    effects.push(\n        {\n            \"icon\": \"icons/magic/life/cross-worn-green.webp\",\n            \"label\": \"Guérison\",\n            \"flags\": {\n                \"core\": {\n                    \"statusId\": \"Guérison\"\n                }\n            }\n        }\n    );\n}\n\n\nreturn {\n    embedded: {\n        Item: {\n            \"Esprit guérisseur\": {\n                \"data.damage.parts\":[[`${args[0].spellLevel - 1}d6`,\"healing\"]],\n                \"effects\": effects\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"gtO013QkSVDrezGc","name":"Nappe de brouillard","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/magic/air/fog-gas-smoke-dense-gray.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"w2QoszGmKSh5oQie\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'w2QoszGmKSh5oQie'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":0,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"hIm4fthEPiHxlDm4","name":"Blessures","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/skills/melee/blade-tip-chipped-blood-red.webp","scope":"global","command":"let applyChanges = false;\nlet dicePoolDivider = 2;\nnew Dialog({\n  title: `Calculateur de blessure`,\n  content: `\n    <style>\n      #5e-wound-calculator form .form-group .form-fields button {\n        flex: 1 !important;\n      }\n    </style>\n    <form>\n      <div class=\"form-group\">\n        <label>Nombre de dés :</label>\n        <div class=\"form-fields\">\n          <input type=\"range\" id=\"dicepool\" name=\"dicepool\" value=\"1\" min=\"1\" max=\"12\" step=\"1\" oninput=\"updateRangeDicePool(this.value);\">\n          <span id=\"range-value\" class=\"range-value\">1</span>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>Type de dé :</label>\n        <div class=\"form-fields buttons\">\n          <button type=\"button\" class=\"button\" onclick=\"updateDiceValue(4)\">D4</button>\n          <button type=\"button\" class=\"button\" onclick=\"updateDiceValue(6)\">D6</button>\n          <button type=\"button\" class=\"button\" onclick=\"updateDiceValue(8)\">D8</button>\n          <button type=\"button\" class=\"button\" onclick=\"updateDiceValue(10)\">D10</button>\n          <button type=\"button\" class=\"button\" onclick=\"updateDiceValue(12)\">D12</button>\n          <input type=\"hidden\" id=\"dicevalue\" value=\"4\">\n        </div>\n      </div>\n    </form>\n    <script>\n      function updateDiceValue(val) {\n        document.getElementById(\"dicevalue\").value = val\n      }\n      function updateRangeDicePool(val) {\n        document.getElementById(\"range-value\").innerHTML = val\n      }\n    </script>\n    `,\n  buttons: {\n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Cancel Changes`\n    },\n    yes: {\n      icon: \"<i class='fas fa-check'></i>\",\n      label: `Apply Changes`,\n      callback: () => applyChanges = true\n    }\n  },\n  default: \"yes\",\n  close: html => {\n    if (applyChanges) {\n      let diceValue = parseInt(html.find('#dicevalue')[0].value);\n      let dicePool = parseInt(html.find('#dicepool')[0].value);\n      let realDicePool = 0;\n\n      if(dicePool > 1) {\n        realDicePool = Math.max(Math.floor(dicePool / dicePoolDivider), 1);\n      }\n\n      let msgContent = `Jours pour récupérer de la blessure (${dicePool}d${diceValue}) divisés par 2 sur un test de médecine de DD ${10 + diceValue} :`\n      let diceRoll = `1d${diceValue} + ${parseInt(realDicePool)}`;\n      new Roll(diceRoll).toMessage({\n        flavor: msgContent\n      });\n\n      new ChatMessage\n    }\n  }\n},\n{\n  id: '5e-wound-calculator'\n}).render(true)","folder":"ZijsCmFthdbTUjd6","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{}}
{"_id":"iAvvrT5R3ljKbu4h","name":"Lame tonnante","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/skills/melee/strike-sword-slashing-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"CowTHl8pWh9qmJFS\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'CowTHl8pWh9qmJFS'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"iDqvgEKMvk59Gfu1","name":"Sonner le glas","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/tools/instruments/bell-brass-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"DiWPAR1MBu2GcWBq\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'DiWPAR1MBu2GcWBq'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1800000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"io9pnF4rCtVm5LNZ","name":"Arbalète légère","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/weapons/crossbows/crossbow-simple-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"Za9nEQV4oQXXUDtj\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'Za9nEQV4oQXXUDtj'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2900000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"irmVucTphnyQlqFF","name":"Esprits gardiens","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/creatures/magical/spirit-undead-masked-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"vPefl4s5qrKga4YG\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'vPefl4s5qrKga4YG'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3000000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"j4on1klNKphCKtEF","name":"AE_Companion_Macro(Nuage puant)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"return {\n    embedded: {\n        Item: {\n            \"Nuage puant\": {\n                \"data.save.dc\": args[0].assignedActor.data.data.abilities[args[0].assignedActor.data.data.attributes.spellcasting].mod + 8 + args[0].assignedActor.data.data.attributes.prof,\n                \"effects\": [\n                    {\n                        \"changes\": [\n                            {\n                                \"key\": \"macro.execute\",\n                                \"mode\": 0,\n                                \"value\": \"\\\"effectOverTime\\\" save aura auraEach\",\n                                \"priority\": \"20\"\n                            }\n                        ],\n                        \"icon\": \"modules/jb2a_patreon/Library/1st_Level/Fog_Cloud/FogCloud_02_Regular_Green_Thumb.webp\",\n                        \"label\": \"Nuage puant\",\n                        \"flags\": {\n                            \"core\": {\n                                \"statusId\": \"nuage-puant\"\n                            },\n                            \"dae\": {\n                                \"macroRepeat\": \"startEveryTurn\",\n                                \"transfer\": true\n                            },\n                            \"ActiveAuras\": {\n                                \"isAura\": true,\n                                \"aura\": \"All\",\n                                \"radius\": 5.5,\n                                \"ignoreSelf\": true,\n                                \"height\": true,\n                                onlyOnce: true,\n                                hostile: true\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"k5P5kN6m7Z8w6XoH","name":"Bloquer un adversaire","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/magic/defensive/shield-barrier-deflect-teal.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"lpfB03N0sRtafuPr\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'lpfB03N0sRtafuPr'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-75000,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"k5PbXRzqcSyqfxbf","name":"Effets Sequencer","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/magic/movement/trail-streak-zigzag-yellow.webp","scope":"global","command":"Sequencer.EffectManager.show()","folder":"ZijsCmFthdbTUjd6","sort":100000,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"kHiHHzBRMWKKrhxK","name":"AE_Companion_Macro(Tigre)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"return {\n    actor: {\n        \"data.attributes.hp.value\": Math.floor(args[0].assignedActor?.data.data.attributes.hp.max / 2),\n        \"data.attributes.hp.max\": Math.floor(args[0].assignedActor?.data.data.attributes.hp.max / 2),\n        \"data.attributes.ac.flat\": args[0].assignedActor.classes.barbarian.data.data.levels >= 10 ? 10 + args[0].assignedActor?.data.data.abilities.dex.mod + args[0].assignedActor?.data.data.abilities.con.mod : args[0].summon?.data.data.attributes.ac.flat\n    },\n    embedded: {\n        Item: {\n            \"Griffes\": {\n                \"data.attackBonus\": args[0].assignedActor?.data.data.attributes.prof + args[0].assignedActor?.data.data.abilities.str.mod - 4,\n                \"data.damage.parts\": [[`1d${args[0].assignedActor.classes.barbarian.data.data.levels >= 14 ? '10' : '8'}+${args[0].assignedActor?.data.data.abilities.str.mod}`, \"slashing\"]]\n            },\n            \"Morsure\": {\n                \"data.attackBonus\": args[0].assignedActor?.data.data.attributes.prof + args[0].assignedActor?.data.data.abilities.str.mod - 4,\n                \"data.damage.parts\": [[`1d${args[0].assignedActor.classes.barbarian.data.data.levels >= 14 ? '10' : '8'}+${args[0].assignedActor?.data.data.abilities.str.mod}`, \"piercing\"]]\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"l1GU28rROgqVrB0s","name":"Hypnose","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/creatures/eyes/lizard-single-slit-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"83XvUUdMPHLTMIg9\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = '83XvUUdMPHLTMIg9'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-25000,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"lGeH46GpPbXHJGpu","name":"AE_Companion_Macro(Gardien de la foi)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"return {\n    embedded: {\n        Item: {\n            \"Gardien de la foi\": {\n                \"data.save.dc\": args[0].assignedActor.data.data.abilities[args[0].assignedActor.data.data.attributes.spellcasting].mod + 8 + args[0].assignedActor.data.data.attributes.prof,\n                \"effects\": [\n                    {\n                        \"changes\": [\n                            {\n                                \"key\": \"macro.execute\",\n                                \"mode\": 0,\n                                \"value\": \"\\\"effectOverTime\\\" save aura damage\",\n                                \"priority\": \"20\"\n                            }\n                        ],\n                        \"icon\": \"worlds/oblivion/images/npcs/generic/gardien-de-la-foi/gardien-de-la-foi-token.png\",\n                        \"label\": \"Gardien de la foi\",\n                        \"flags\": {\n                            \"dae\": {\n                                \"macroRepeat\": \"startEveryTurn\",\n                                \"transfer\": true\n                            },\n                            \"ActiveAuras\": {\n                                \"isAura\": true,\n                                \"aura\": \"Enemy\",\n                                \"radius\": 3.5,\n                                \"ignoreSelf\": true,\n                                \"height\": true,\n                                onlyOnce: true,\n                                hostile: true\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"lRVmbULNk0fBTP4c","name":"Canalisation d’énergie divine : Renvoi des Morts-vivants","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/fire/flame-burning-creature-skeleton.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"Kw3n4TNbT3FvjHkt\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'Kw3n4TNbT3FvjHkt'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1600000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"lroX7FhDEQ4C0Axw","name":"Second souffle","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/magic/life/heart-glowing-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"LrVXQxk6eubb9sqC\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'LrVXQxk6eubb9sqC'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":-6250,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"nahhnnpgf2CqdUrC","name":"Épargner les mourants","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/life/heart-glowing-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"q9tUCou4jjaNAmnY\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'q9tUCou4jjaNAmnY'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1200000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"okCpNkuiZ3vovGjo","name":"Arbalète légère","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/weapons/crossbows/crossbow-simple-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"Za9nEQV4oQXXUDtj\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'Za9nEQV4oQXXUDtj'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3800000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"oxKimZ4Oih6i6cWU","name":"Hachette","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/weapons/axes/axe-broad-black.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"oEJOJQRXMFkcnLDh\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'oEJOJQRXMFkcnLDh'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"p0IQ3W3QcYRbBQhv","name":"Masse d'armes","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/weapons/maces/mace-round-spiked-black.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"GGnEenJ7WmiEjceP\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'GGnEenJ7WmiEjceP'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1300000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"pD9lojeooh2jtGJg","name":"AE_Companion_Macro(Nuée de dagues)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"return {\n    embedded: {\n        Item: {\n            \"Nuée de dagues\": {\n                \"data.damage.parts\":[[`${((args[0].spellLevel - 1) * 2) + 2}d4`,\"slashing\"]],\n                \"effects\": [\n                    {\n                        \"changes\": [\n                            {\n                                \"key\": \"macro.execute\",\n                                \"mode\": 0,\n                                \"value\": \"\\\"effectOverTime\\\" damage aura\",\n                                \"priority\": \"20\"\n                            }\n                        ],\n                        \"icon\": \"icons/weapons/daggers/dagger-ritual-crooked-crystal.webp\",\n                        \"label\": \"Nuée de dagues\",\n                        \"flags\": {\n                            \"dae\": {\n                                \"macroRepeat\": \"startEveryTurn\",\n                                \"transfer\": true\n                            },\n                            \"ActiveAuras\": {\n                                \"isAura\": true,\n                                \"aura\": \"All\",\n                                \"radius\": 0.25,\n                                \"ignoreSelf\": true,\n                                \"height\": true\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"q37hZN7JEvqaw12M","name":"Silence","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/water/orb-water-transparent.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"47Zko2ykPD0AEW1R\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = '47Zko2ykPD0AEW1R'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2100000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"qJKL09Tp2hfiWOlq","name":"Animal totem","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/creatures/abilities/paw-print-yellow.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"iGC9bt9bus5B7xx5\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'iGC9bt9bus5B7xx5'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"rX5iskWWRFtZbbm3","name":"Méduse circéale (Euryale)","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/creatures/tentacles/tentacles-octopus-black-pink.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"eL6eeBiZjqR4ECMM\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'eL6eeBiZjqR4ECMM'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3100000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"t5gdpIUADQczNayR","name":"Échanger","type":"chat","author":"3UjVNZPJLHwgrlkI","img":"icons/skills/social/trading-justice-scale-yellow.webp","scope":"global","command":"!itempiles trade","folder":"wGx3BjD7f1N3B5PM","sort":100000,"permission":{"default":2,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"name":"Gardien de la foi","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/skills/weapon_28.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"G8C9REEY4jHWnZsL\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'G8C9REEY4jHWnZsL'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":null,"sort":0,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}},"_id":"tkGhTACf1txRFayY"}
{"_id":"tooW03OtT8oaoiW4","name":"Javeline","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/weapons/ammunition/arrows-bodkin-yellow-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"wWtlCwQMdujD9pMV\" ItemID=\"Kzo5HqjhgUOqwYI4\"\nconst actorId = 'wWtlCwQMdujD9pMV'\nconst itemId = 'Kzo5HqjhgUOqwYI4'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":0,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"uyzroDMQ8KLo5DfM","name":"_Delete Missing Links","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"tokenAttacher.deleteMissingLinks()","folder":"1F3e0ZCRKTOyCJmZ","sort":0,"permission":{"default":0,"El5JYRyNAovcZ1JK":3,"3UjVNZPJLHwgrlkI":3},"flags":{"core":{"sourceId":"Macro.B0KxxJfRpqWy7UiO"},"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"vBhM0tnlYBi9fgWi","name":"AE_Companion_Macro(Cordon de flèches)","type":"script","author":"3UjVNZPJLHwgrlkI","img":"icons/svg/dice-target.svg","scope":"global","command":"let count = 4\nconst overSpellLevel = args[0].spellLevel - 2\ncount += overSpellLevel * 2\n\nconst effects = []\n\nfor (let index = 1; index <= count; index++) {\n    effects.push(\n        {\n            \"icon\": \"icons/weapons/ammunition/arrowhead-glowing-blue.webp\",\n            \"label\": \"Flèche\",\n            \"flags\": {\n                \"core\": {\n                    \"statusId\": \"flèche\"\n                }\n            }\n        }\n    );\n}\n\n\nreturn {\n    embedded: {\n        Item: {\n            \"Cordon de flèches\": {\n                \"data.save.dc\": args[0].assignedActor.data.data.abilities[args[0].assignedActor.data.data.attributes.spellcasting].mod + 8 + args[0].assignedActor.data.data.attributes.prof,\n                \"effects\": effects\n            }\n        }\n    }\n}","folder":"gAPabRFTPRnDJ6PQ","sort":0,"permission":{"default":0,"3UjVNZPJLHwgrlkI":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"vVE8eBLITF62wB2U","name":"Cube de force","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/items/inventory/dice.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"CLSXrakOqOSiPOci\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'CLSXrakOqOSiPOci'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":2600000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"vbR9oVix99A6qS9w","name":"Griffes","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/skills/melee/strike-slashes-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"5m9XQO9jbwEPPclm\" ItemID=\"ne7sqIvKNNHSVHxh\"\nconst actorId = '5m9XQO9jbwEPPclm'\nconst itemId = 'ne7sqIvKNNHSVHxh'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":200000,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"vqUuG9Re5JHnZAA3","name":"Archer : flèche supplémentaire","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/weapons/ammunition/arrows-bodkin-yellow-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"nAYMIAxGL13xm1m7\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'nAYMIAxGL13xm1m7'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":300000,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"wen1hiwFZMasbyQS","name":"Soin des blessures","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/life/heart-cross-strong-purple-orange.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"OdiPe4QPPoJZd4CF\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'OdiPe4QPPoJZd4CF'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":1400000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"xTbvWL7MmMdEWZQp","name":"Style de combat : protection","type":"script","author":"smDCHl04t3XJPorJ","img":"icons/magic/defensive/shield-barrier-deflect-gold.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"lXQpmMuEhq8vOvHP\" ItemID=\"ioQFGflWjCg2Zm9u\"\nconst actorId = 'lXQpmMuEhq8vOvHP'\nconst itemId = 'ioQFGflWjCg2Zm9u'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"BldKM5fsWIkCZ7DP","sort":50000,"permission":{"default":0,"smDCHl04t3XJPorJ":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"xmrks05MIZZDXUwm","name":"Porte-bonheur","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/magic/control/buff-luck-fortune-green.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"DrZakc3TO5nZeccc\" ItemID=\"xMiXgjtsaHngMDJj\"\nconst actorId = 'DrZakc3TO5nZeccc'\nconst itemId = 'xMiXgjtsaHngMDJj'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":0,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"xvZNG17p3VeSkUZK","name":"Détection de la magie","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/magic/light/explosion-star-blue.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"l1YPt5QlSec0qnHc\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'l1YPt5QlSec0qnHc'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":3900000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"y2eq3MHpVMKiSLiC","name":"Morsure","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/creatures/abilities/mouth-teeth-long-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"DrZakc3TO5nZeccc\" ItemID=\"D0gZZImBCvZ5xlWU\"\nconst actorId = 'DrZakc3TO5nZeccc'\nconst itemId = 'D0gZZImBCvZ5xlWU'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\nif (!itemToRoll) {\n    return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":0,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"yobB0tLiLdckI4IC","name":"Envoi de message","type":"script","author":"OcWFeOWyVpu4vxi5","img":"icons/sundries/documents/envelope-stealed-brown.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"OgtvpdOt602xHuTx\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'OgtvpdOt602xHuTx'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":4000000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"zv5rSmUkdu41warN","name":"Bond agressif","type":"script","author":"4DvztJi1ixGg96fy","img":"icons/creatures/abilities/cougar-pounce-stalk-black.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"5m9XQO9jbwEPPclm\" ItemID=\"CMHSRjIOwiEhQquc\"\nconst actorId = '5m9XQO9jbwEPPclm'\nconst itemId = 'CMHSRjIOwiEhQquc'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"i5rW8MmBvdHPvbMt","sort":300000,"permission":{"default":0,"4DvztJi1ixGg96fy":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"zwmimE99DKtgvLuU","name":"Marque du chasseur","type":"script","author":"WQyaVx6ngA6iNiKp","img":"icons/magic/perception/eye-ringed-glow-angry-small-red.webp","scope":"global","command":"// HotbarUses5e: ActorID=\"WKQepZRZ8pKzqGWa\" ItemID=\"dntdvFakBdoXUJ0g\"\nconst actorId = 'WKQepZRZ8pKzqGWa'\nconst itemId = 'dntdvFakBdoXUJ0g'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"Rz4hcLH0NKN6hAaz","sort":700000,"permission":{"default":0,"WQyaVx6ngA6iNiKp":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"$$deleted":true,"_id":"Ia8MCkPnNHt6uaX5"}
{"_id":"tkGhTACf1txRFayY","name":"Gardien de la foi","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/skills/weapon_28.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"G8C9REEY4jHWnZsL\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'G8C9REEY4jHWnZsL'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":4100000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"N09TeWyMWBsm7M7L","name":"Liberté de mouvement","type":"script","author":"OcWFeOWyVpu4vxi5","img":"systems/dnd5e/icons/skills/armor_01.jpg","scope":"global","command":"// HotbarUses5e: ActorID=\"UBIv6svs9enPMYbC\" ItemID=\"BihuxeI0MSjxHkSI\"\nconst actorId = 'UBIv6svs9enPMYbC'\nconst itemId = 'BihuxeI0MSjxHkSI'\nconst actorToRoll = canvas.tokens.placeables.find(t => t.actor?.id === actorId)?.actor ?? game.actors.get(actorId)\nconst itemToRoll = actorToRoll?.items.get(itemId)\n\nif (!itemToRoll) {\n  return ui.notifications.warn(game.i18n.format('DND5E.ActionWarningNoItem', { item: itemId, name: actorToRoll?.name ?? '[Not Found]' }))\n}\n\nif (game.modules.get('itemacro')?.active && itemToRoll.hasMacro()) {\n  return itemToRoll.executeMacro()\n}\n\ngame.dnd5e.rollItemMacro(itemToRoll.data.name, actorToRoll.data._id, itemToRoll.data._id)","folder":"SzFmcVlzZzKlvhOa","sort":4200000,"permission":{"default":0,"OcWFeOWyVpu4vxi5":3},"flags":{"dnd5e":{"itemMacro":true}}}
