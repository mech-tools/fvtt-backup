{{#each blocks}}
<div class="custom-system-block-title" id="title_{{this.id}}" data-block-id="{{this.id}}">
    <i class="fas {{#if this.visible}}fa-caret-down{{else}}fa-caret-right{{/if}}"></i>
    <p>{{this.label}} ({{this.modifiers.length}} modifiers)</p>
</div>
<div
    class="custom-system-modifiers"
    style="{{#unless this.visible}}display:none{{/unless}}"
    id="modifiers_{{this.id}}"
    data-block-id="{{this.id}}"
>
    <table>
        <thead>
            <tr>
                <th>Prio.</th>
                <th>Key</th>
                <th>Op.</th>
                <th>Value formula</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {{#each this.modifiers}}
            <tr class="custom-system-modifier">
                <td>
                    <input type="number" class="custom-system-modifier-priority" value="{{this.priority}}" />
                </td>
                <td>
                    <input type="text" class="custom-system-modifier-key" value="{{this.key}}" />
                </td>
                <td>
                    <select class="custom-system-modifier-operator">
                        {{#select this.operator}}
                        <option value="add">+</option>
                        <option value="multiply">x</option>
                        <option value="subtract">-</option>
                        <option value="divide">/</option>
                        <option value="set">=</option>
                        {{/select}}
                    </select>
                </td>
                <td>
                    <textarea class="custom-system-modifier-formula">{{this.formula}}</textarea>
                </td>
                <td class="custom-system-modifier-controls">
                    <a class="custom-system-delete-modifier"><i class="fas fa-trash"></i></a>
                </td>
            </tr>
            {{/each}}
            <tr>
                <td colspan="4"></td>
                <td>
                    <a><i class="fas fa-plus-circle" id="addModifier"></i></a>
                </td>
            </tr>
        </tbody>
    </table>
</div>
{{/each}}
