(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",gasLight:"CoC7.EraGasLight",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}static filterActiveEffects(effect,conditionName){return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.has(conditionName):effect.flags.core?.statusId===conditionName}static getStatusKey(effect){let options=[];return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.size>0&&(options=[...effect.statuses.values()]):options=[effect.getFlag("core","statusId")],options.find((v=>Object.prototype.hasOwnProperty.call(COC7.status,v)))}get isStatus(){return"string"==typeof CoC7ActiveEffect.getStatusKey(this)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("CoC7.Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("CoC7.Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("CoC7.Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("CoC7.Suppressed"),effects:[],info:[game.i18n.localize("CoC7.Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,0===chatData.whisper.length?null:chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"+1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"+1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.specialization":"",name:this.system.skillName}:this.system.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.system.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.system.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.system.range.normal.value)}get longRange(){return parseInt(this.system.range.long.value)}get extremeRange(){return parseInt(this.system.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}async getChatData(htmlOptions={}){htmlOptions.async=!0;const data=foundry.utils.duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=await TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.special=await TextEditor.enrichHTML(data.description.special,htmlOptions);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else game.settings.get("CoC7","distanceTheatreOfTheMind")||ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class AverageParentheticalTerm extends ParentheticalTerm{_evaluateSync({minimize=!1,maximize=!1}={}){const roll=this.roll||new AverageRoll(this.term);return this.roll=roll.evaluate({minimize,maximize,async:!1}),this.flavor&&this.roll.terms.forEach((t=>{t.options.flavor=t.options.flavor??this.flavor})),this}}class AverageRoll extends Roll{_evaluateSync({minimize=!1,maximize=!1}={}){return this.terms=this.terms.map((term=>{if(!(term instanceof RollTerm))throw new Error("Roll evaluation encountered an invalid term which was not a RollTerm instance");if(term.isIntermediate){term.evaluate({minimize,maximize,async:!1}),this._dice=this._dice.concat(term.dice);let total=term.total;return minimize&&maximize&&term.dice.length&&(total=Math.floor((term.dice[0].faces+1)/2*term.total)),new NumericTerm({number:total,options:term.options})}return term})),this.terms=this.constructor.simplifyTerms(this.terms),this.terms=this.terms.map((term=>{if(!term._evaluated){if(void 0!==term.faces)return new NumericTerm({number:Math.floor((term.faces+1)/2*term.number),options:term.options});term.evaluate({minimize,maximize,async:!1})}return term})),this._total=this._evaluateTotal(),this}static _splitParentheses(_formula){return this._splitGroup(_formula,{openRegexp:AverageParentheticalTerm.OPEN_REGEXP,closeRegexp:AverageParentheticalTerm.CLOSE_REGEXP,openSymbol:"(",closeSymbol:")",onClose:group=>{const fn=group.open.slice(0,-1),expression=group.terms.join(""),options={flavor:group.flavor?group.flavor.slice(1,-1):void 0},terms=[];if(fn in Math){const args=this._splitMathArgs(expression);terms.push(new MathTerm({fn,terms:args,options}))}else fn&&terms.push(fn),terms.push(new AverageParentheticalTerm({term:expression,options}));return terms}})}}class ActorPickerDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-picker"],title:game.i18n.localize("CoC7.PickWhichActorTitle"),template:"systems/CoC7/templates/chat/messages/actor-picker.hbs",closeOnSubmit:!1,width:415,height:375})}activateListeners(html){super.activateListeners(html),html.on("click",".directory-item",this._onPick.bind(this)),html.find(".can-ping").hover(this._onHoverIn.bind(this),this._onHoverOut.bind(this)),html.on("click",".submit-button",this._onSubmitButton.bind(this))}_onPick(event){const li=event.currentTarget;for(const l of li.parentElement.children)l.classList.toggle("picked",l===li);this.object.selected=li.dataset.entryUuid}async _onHoverIn(event){if(event.preventDefault(),!canvas.ready)return;const li=event.currentTarget,token=(await fromUuid(li.dataset.entryUuid))?.object;token?.isVisible&&(token.controlled||(token._onHoverIn(event,{hoverOutOthers:!0}),this._highlighted=token))}_onHoverOut(event){event.preventDefault(),this._highlighted&&this._highlighted._onHoverOut(event),this._highlighted=null}async _onSubmitButton(event){this.object.resolve(await fromUuid(this.object.selected)),this.close()}static async create(){const allowedTypes=["character","npc","creature"];let found=[];if(game.user.isGM&&canvas.ready&&canvas.tokens.controlled.length>0)found=canvas.tokens.controlled.map((t=>t.document));else{canvas.ready&&(found=canvas.tokens.placeables.filter((t=>allowedTypes.includes(t.document.actor.type)&&(t.actor.ownership[game.user.id]??t.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER)).map((t=>t.document)));const foundIDs=found.map((t=>t.actorId));found=found.concat(game.actors.filter((a=>allowedTypes.includes(a.type)&&!foundIDs.includes(a.id)&&(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER)))}if(1===found.length)return found[0];if(found.length>1){const options=[];for(const option of found){const isTokenDocument=option instanceof TokenDocument;options.push({uuid:option.uuid,name:option.name,img:isTokenDocument?option.actor.portrait:option.portrait,canPing:isTokenDocument})}options.sort(CoC7Utilities.sortByNameKey);let selected=options[1].uuid;if(game.user.character){const defaultOption=found.find((option=>(option.actorId??option.id)===game.user.character.id));defaultOption&&(selected=defaultOption.uuid)}return new Promise((resolve=>{new ActorPickerDialog({options,selected,resolve}).render(!0)}))}return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor")),null}}class CoC7GroupMessage{static async removeRoll({messageId,msg,which}){if(void 0!==messageId&&(msg=game.messages.get(messageId)),void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which]){const updates={["flags.CoC7.group-message.rollStatuses.-="+which]:null};await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}}static async pushMyRoll({messageId,msg,which}){void 0!==messageId&&(msg=game.messages.get(messageId));const updates={};let gmId=!1;switch(msg.canUserModify(game.user,"update")||(gmId=CoC7Utilities.getAnIdForGm()),msg.flags.CoC7["group-message"].type){case"combined":updates["flags.CoC7.group-message.wasPushed"]=!0,CoC7GroupMessage.performCombinedRoll({msg,gmId,updates,pushing:!0});break;case"opposed":{const rolls={[which]:msg.flags.CoC7["group-message"].rollStatuses[which].roll};CoC7GroupMessage.performNormalRoll({msg,rolls,gmId,updates,pushing:!0})}}}static async spendMyLuck({messageId,msg,which,index,luckAmount}){if(void 0!==messageId&&(msg=game.messages.get(messageId)),void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed)switch(msg.flags.CoC7["group-message"].type){case"combined":if(!luckAmount){luckAmount=CoC7Check.fromData(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed).increaseSuccess[index].luckToSpend??null}if(luckAmount){const actor=await CoC7GroupMessage.getActor(msg.flags.CoC7["group-message"].actorUuid);if(!(actor instanceof TokenDocument?actor.actor:actor).spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}));const updates={};for(const which in msg.flags.CoC7["group-message"].rollStatuses){const check=CoC7Check.fromData(msg.flags.CoC7["group-message"].rollStatuses[which].completed);check.increaseLuckSpend(luckAmount),updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData}if(Object.keys(updates).length)if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}break;case"opposed":{const check=CoC7Check.fromData(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed);void 0!==index?check.upgradeCheck(index,!1):void 0!==luckAmount&&check.forcePass(luckAmount,!1);const updates={["flags.CoC7.group-message.rollStatuses."+which+".completed"]:check.JSONRollData};if(Object.keys(updates).length)if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}}else ui.notifications.error("CoC7.ErrorRollAlreadyCompleted",{localize:!0})}static async updateTheGroupMessage({msg,updates,rollData}={}){if(msg?.flags?.CoC7?.["group-message"]){if(void 0===rollData){rollData={};for(const which in msg?.flags?.CoC7?.["group-message"].rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:msg?.flags?.CoC7?.["group-message"].rollStatuses[which].roll,quick:!0});rollData[which]=roll}}const options=Object.assign({rollData},foundry.utils.mergeObject(msg.flags.CoC7["group-message"],foundry.utils.expandObject(updates)?.flags?.CoC7?.["group-message"]??{},{performDeletions:!0}));for(const which in options.rollStatuses)options.rollStatuses[which].completed&&(options.rollStatuses[which].completed=CoC7Check.fromData(options.rollStatuses[which].completed));options.allRollsCompleted=!0;for(const which in options.rollStatuses)void 0===options.rollStatuses[which].completed&&(options.allRollsCompleted=!1);switch(updates["flags.CoC7.group-message.allRollsCompleted"]=options.allRollsCompleted,options.type){case"combined":if(options.isSuccess=!1,options.isFailure=!1,options.allRollsCompleted){let successes=0,failures=0;for(const which in options.rollStatuses)options.rollStatuses[which].completed.isSuccess?successes++:options.rollStatuses[which].completed.isFailure&&failures++;successes>0&&("any"===options.combined||0===failures&&"all"===options.combined)?options.isSuccess=!0:options.isFailure=!0}updates["flags.CoC7.group-message.isSuccess"]=options.isSuccess,updates["flags.CoC7.group-message.isFailure"]=options.isFailure;break;case"opposed":if(options.allRollsCompleted){if(options.isTie=!1,options.isCombat){options.rollOrder=Array.from(new Int8Array(options.rollOrder.map((v=>parseInt(v.substr(1),10)))).sort()).map((v=>"r"+v));const successLevels={};options.defenderIsDodging=!1;for(const which in options.rollStatuses)options.rollStatuses[which].completed.passed&&(successLevels[options.rollStatuses[which].completed.successLevel]=parseInt(successLevels[options.rollStatuses[which].completed.successLevel]??0,10)+1),options.rollStatuses[which].isDodging&&!options.rollStatuses[which].isAttacker&&(options.defenderIsDodging=!0);updates["flags.CoC7.group-message.defenderIsDodging"]=options.defenderIsDodging,!1===options.advantageAttacker&&!1===options.advantageDefender&&(options.defenderIsDodging?(options.advantageDefender=!0,updates["flags.CoC7.group-message.advantageDefender"]=options.advantageDefender):(options.advantageAttacker=!0,updates["flags.CoC7.group-message.advantageAttacker"]=options.advantageAttacker));const best=Math.max(...Object.keys(successLevels));if(options.needsTieBreaker=!1,options.resultText=game.i18n.localize("CoC7.NoWinner"),best>0)for(const which in options.rollStatuses){let rollIsWinner=!1,rollIsTie=!1;options.rollStatuses[which].completed.successLevel===best&&1===successLevels[best]?rollIsWinner=!0:options.rollStatuses[which].completed.successLevel===best&&(options.advantageAttacker&&options.rollStatuses[which].isAttacker||options.advantageDefender&&!options.rollStatuses[which].isAttacker?rollIsWinner=!0:(rollIsTie=!0,options.needsTieBreaker=!0,options.isTie=!0)),options.rollStatuses[which].isWinner=rollIsWinner,options.rollStatuses[which].isTie=rollIsTie,updates["flags.CoC7.group-message.rollStatuses."+which+".isWinner"]=rollIsWinner,updates["flags.CoC7.group-message.rollStatuses."+which+".isTie"]=rollIsTie,rollIsWinner&&!rollIsTie&&(options.rollStatuses[which].isAttacker?options.rollStatuses[which].isManeuver?options.resultText=game.i18n.format("CoC7.ManeuverSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.AttackSuccess",{name:rollData[which].actor.name}):options.rollStatuses[which].isManeuver?options.rollStatuses[which].isDodging?options.resultText=game.i18n.format("CoC7.DodgeSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.ManeuverSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.AttackSuccess",{name:rollData[which].actor.name}))}updates["flags.CoC7.group-message.needsTieBreaker"]=options.needsTieBreaker}else{const opposedRollTieBreaker=game.settings.get("CoC7","opposedRollTieBreaker");options.rollOrder.sort(((a,b)=>{if(options.rollStatuses[a].completed.successLevel>options.rollStatuses[b].completed.successLevel)return-1;if(options.rollStatuses[a].completed.successLevel<options.rollStatuses[b].completed.successLevel)return 1;if(opposedRollTieBreaker){if(options.rollStatuses[a].completed.modifiedResult>options.rollStatuses[b].completed.modifiedResult)return-1;if(options.rollStatuses[a].completed.modifiedResult<options.rollStatuses[b].completed.modifiedResult)return 1}else{if(options.rollStatuses[a].completed.rawValue>options.rollStatuses[b].completed.rawValue)return-1;if(options.rollStatuses[a].completed.rawValue<options.rollStatuses[b].completed.rawValue)return 1}return 0}));const offsetMax=options.rollOrder.length;let offset=0;const a=options.rollStatuses[options.rollOrder[0]];if(a.failed)offset=-1;else for(;offset<offsetMax;offset++){const b=options.rollStatuses[options.rollOrder[offset]];if(a.completed.successLevel!==b.completed.successLevel||(opposedRollTieBreaker?a.completed.modifiedResult!==b.completed.modifiedResult:a.completed.rawValue!==b.completed.rawValue)){offset--;break}}options.isTie=offset>0;for(let i=0;i<offsetMax;i++){let isWinner=!1,isTie=!1;i<=offset&&(isWinner=!0,isTie=options.isTie);const which=options.rollOrder[i];options.rollStatuses[which].isWinner=isWinner,options.rollStatuses[which].isTie=isTie,updates["flags.CoC7.group-message.rollStatuses."+which+".isWinner"]=isWinner,updates["flags.CoC7.group-message.rollStatuses."+which+".isTie"]=isTie}options.needsTieBreaker=!1,updates["flags.CoC7.group-message.needsTieBreaker"]=!1}updates["flags.CoC7.group-message.isTie"]=options.isTie}}const html=await renderTemplate(CoC7GroupMessage.getTemplatePath(msg.flags.CoC7["group-message"].type),options);updates.content=html,await msg.update(updates)}}static async updateTheMessage({messageId,updates}){const msg=game.messages.get(messageId);msg?.flags?.CoC7?.["group-message"]&&await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}static async getCheck({msg,theRoll}){const checkData={difficulty:theRoll.difficulty,diceModifier:theRoll.bonus,actorKey:theRoll.actor.actorKey??theRoll.actor.actor.actorKey,denyPush:!1,combat:msg.flags?.CoC7?.["group-message"].isCombat??!1};switch(theRoll.type){case"characteristic":checkData.characteristic=theRoll.key,checkData.denyPush=msg.flags?.CoC7?.["group-message"].denyPush??!1;break;case"attribute":checkData.attribute=theRoll.key,checkData.denyPush=msg.flags?.CoC7?.["group-message"].denyPush??!1;break;case"skill":checkData.skill=theRoll.skill,checkData.denyPush=(msg.flags?.CoC7?.["group-message"].denyPush??!1)||!theRoll.pushable;break;case"item":checkData.item=theRoll.item,checkData.denyPush=(msg.flags?.CoC7?.["group-message"].denyPush??!1)||!theRoll.pushable}return CoC7Check.create(checkData)}static async performRoll({msg,which,roll,pushing}={}){const theRoll=await CoC7GroupMessage.parseRolls({roll,quick:!1});if(!theRoll)return{};const check=await CoC7GroupMessage.getCheck({msg,theRoll});pushing&&(check.pushing=pushing),await check._perform({forceDSN:!0});const updates={};return updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData,updates}static async performCombinedRoll({messageId,msg,gmId,updates,pushing=!1}){void 0!==messageId&&(msg=game.messages.get(messageId));const rollData={};for(const which in msg?.flags?.CoC7?.["group-message"].rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:msg?.flags?.CoC7?.["group-message"].rollStatuses[which].roll,quick:!1});roll&&(rollData[which]=roll)}const pool={};for(const which in rollData)pool[parseInt(rollData[which].bonus??0,10)]=!1;const roll=await CoC7Dice.combinedRoll({pool});let first=!0;for(const which in rollData){const bonus=parseInt(rollData[which].bonus??0,10),check=await CoC7GroupMessage.getCheck({msg,theRoll:rollData[which]});pushing&&(check.pushing=pushing),await check._perform({roll:roll[bonus],silent:!1===first||void 0,forceDSN:first}),updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData,first=!1}if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}static async performNormalRoll({messageId,msg,rolls,gmId,updates,pushing=!1}){void 0!==messageId&&(msg=game.messages.get(messageId));for(const which in rolls)void 0===msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed||pushing?Object.assign(updates,await CoC7GroupMessage.performRoll({msg,which,roll:rolls[which],pushing})):ui.notifications.error("CoC7.ErrorRollAlreadyCompleted",{localize:!0});msg.canUserModify(game.user,"update")?await CoC7GroupMessage.updateTheGroupMessage({msg,updates}):!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}static async performMyRolls({messageId,msg,rolls}){void 0!==messageId&&(msg=game.messages.get(messageId));const updates={};for(const which in rolls)await CoC7GroupMessage.nameRoll({which,roll:rolls[which],updates});const gmId=!msg.canUserModify(game.user,"update")&&CoC7Utilities.getAnIdForGm();switch(Object.keys(updates).length>0&&(msg.canUserModify(game.user,"update")?await CoC7GroupMessage.updateTheGroupMessage({msg,updates}):!1!==gmId&&(game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates}),await new Promise((resolve=>setTimeout(resolve,200))))),msg.flags.CoC7["group-message"].type){case"combined":CoC7GroupMessage.performCombinedRoll({msg,gmId,updates});break;case"opposed":CoC7GroupMessage.performNormalRoll({msg,rolls,gmId,updates})}}static async nameRoll({which,roll,updates}){const parsed=await CoC7GroupMessage.parseRolls({roll,quick:!1});parsed&&(updates["flags.CoC7.group-message.rollStatuses."+which+".shortName"]=parsed.shortName,updates["flags.CoC7.group-message.rollStatuses."+which+".fullName"]=parsed.fullName,updates["flags.CoC7.group-message.rollStatuses."+which+".tags"]=parsed.tags??[],updates["flags.CoC7.group-message.rollStatuses."+which+".percent"]=parsed.percent??1,updates["flags.CoC7.group-message.rollStatuses."+which+".isManeuver"]=parsed.isManeuver??!1,updates["flags.CoC7.group-message.rollStatuses."+which+".isDodging"]=parsed.isDodge??!1,updates["flags.CoC7.group-message.rollStatuses."+which+".isWeapon"]=parsed.isDodge??!1)}static async newGroupMessage({rollData,options}){if(void 0===rollData){rollData={};for(const which in options.rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:options.rollStatuses[which].roll,quick:!0});rollData[which]=roll}}const rollsByUser={},rollRequiresName={};for(const which in rollData){let asUserId="";switch(rollData[which].autoRoll.length){case 1:if(rollData[which].autoRoll[0]!==game.user.id){asUserId=rollData[which].autoRoll[0];break}case 0:asUserId=game.user.id;break;default:options.rollStatuses[which].rolling=!1,"-"===rollData[which].shortName&&(rollRequiresName[which]=rollData[which].roll)}""!==asUserId&&(Object.prototype.hasOwnProperty.call(rollsByUser,asUserId)||(rollsByUser[asUserId]={}),rollsByUser[asUserId][which]=options.rollStatuses[which].roll,options.rollStatuses[which].rolling=asUserId)}const templateData=Object.assign({rollData},options),chatData={flags:{CoC7:{"group-message":options}},content:await renderTemplate(CoC7GroupMessage.getTemplatePath(options.type),templateData)};switch(chatData.flags?.CoC7?.["group-message"]?.type){case"opposed":chatData.speaker=Object.assign(chatData.speaker??{},{alias:game.i18n.localize("CoC7.OpposedRollCard")});break;case"combined":chatData.speaker=Object.assign(chatData.speaker??{},{alias:Object.values(rollData)[0].actor.name})}const msg=await ChatMessage.create(chatData),updates={};for(const which in rollRequiresName)await CoC7GroupMessage.nameRoll({which,roll:rollRequiresName[which],updates});Object.keys(updates).length>0&&await CoC7GroupMessage.updateTheGroupMessage({msg,updates,rollData});for(const userId in rollsByUser)userId!==game.user.id&&game.socket.emit("system.CoC7",{type:"group-message-roll",listener:userId,messageId:msg.id,rolls:rollsByUser[userId]});return Object.prototype.hasOwnProperty.call(rollsByUser,game.user.id)&&await CoC7GroupMessage.performMyRolls({msg,rolls:rollsByUser[game.user.id]}),msg}static async isUserActive({which,msg}){if(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].rolling){const user=game.users.get(msg.flags.CoC7["group-message"].rollStatuses[which].rolling);if(game.user.isGM||!user||!user.active){const updates={["flags.CoC7.group-message.rollStatuses."+which+".rolling"]:!1};if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}}}static async _onToggle(event){event.preventDefault();const button=event.currentTarget,messageId=button.closest("li.chat-message")?.dataset.messageId,key=button.dataset.key;let value=button.dataset.value;if(messageId&&key){if(button.classList.contains("select-only-gm")&&!game.user.isGM)return;const msg=game.messages.get(messageId);if(void 0!==msg.flags?.CoC7?.["group-message"]?.[key]&&msg.canUserModify(game.user,"update")){void 0===value&&(value=!msg.flags.CoC7["group-message"][key]);const updates={["flags.CoC7.group-message."+key]:value};switch(key){case"advantageDefender":updates["flags.CoC7.group-message.advantageAttacker"]=!value;break;case"advantageAttacker":updates["flags.CoC7.group-message.advantageDefender"]=!value}await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}}}static async _onClick(event){event.preventDefault();const button=event.currentTarget,action=button.dataset.action,messageId=button.closest("li.chat-message")?.dataset.messageId,which=button.dataset.which;if(messageId){const msg=game.messages.get(messageId);if(void 0!==msg)if(void 0!==which&&void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which]){const actor=await fromUuid(msg.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0]);if(!actor||!actor.canUserModify(game.user,"update"))return void ui.notifications.error("CoC7.ErrorNoActorPermission",{localize:!0});switch(action){case"impatient-roll":CoC7GroupMessage.isUserActive({which,msg});break;case"normal-roll":CoC7GroupMessage.performMyRolls({msg,rolls:{[which]:msg.flags.CoC7?.["group-message"].rollStatuses[which].roll}});break;case"use-luck":CoC7GroupMessage.spendMyLuck({which,index:button.dataset.index,luckAmount:button.dataset.luckAmount,msg});break;case"remove-roll":CoC7GroupMessage.removeRoll({which,msg});break;case"push":CoC7GroupMessage.pushMyRoll({which,msg})}}else if(void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses){let okay=!1;for(const which in msg.flags.CoC7["group-message"].rollStatuses){if((await fromUuid(msg.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0])).canUserModify(game.user,"update")){okay=!0;break}}if(!okay)return void ui.notifications.error("CoC7.ErrorNoActorPermission",{localize:!0});switch(action){case"roll-once":if("combined"===msg.flags.CoC7["group-message"].type){const updates={};CoC7GroupMessage.performCombinedRoll({msg,updates})}break;case"toggle":CoC7GroupMessage._onToggle(event)}}}}static async renderChatMessage(app,html,data){const canModify={gm:game.user.isGM};for(const which in app.flags?.CoC7?.["group-message"]?.rollStatuses){const actor=await fromUuid(app.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0]);canModify[which]=actor?.canUserModify(game.user,"update")??!1}canModify.any=Object.values(canModify).filter((b=>b)).length>0;for(const key in canModify)canModify[key]?html.find(".hidden-only-"+key).remove():html.find(".visible-only-"+key).remove();html.on("click",".roll-card-v2 button:not(.toggle-switch)",CoC7GroupMessage._onClick.bind(this)),html.on("click",".roll-card-v2 a:not(.toggle-link)",CoC7GroupMessage._onClick.bind(this)),html.on("click",".roll-card-v2 button.toggle-switch",CoC7GroupMessage._onToggle.bind(this)),html.on("click",".roll-card-v2 a.toggle-link",CoC7GroupMessage._onToggle.bind(this))}static async getActor(identifier){return identifier.match(/^a\./)?(await game.system.api.cocid.fromCoCID(identifier))?.[0]??null:identifier.indexOf(".")>-1?await fromUuid(identifier):game.actors.get(identifier)??null}static async parseRolls({roll,quick=!0,defaultUuid=""}){const match=roll.match(/^(?<a>[^#]+#)?(?<t>attribute|characteristic|item|skill)#(?<k>[^#]+)(#(?<m>.*))?$/);if(match){const modifiers=(match.groups.m??"").toLowerCase().split("#"),bonus=parseInt(modifiers.find((m=>m.match(/^[+-]\d+$/)))??0,10),difficulty=modifiers.find((m=>m.match(/^\d+$/))),pushing=modifiers.filter((m=>"p"===m)).length>0,rollData={type:match.groups.t,key:match.groups.k,bonus,difficulty:"0"===(difficulty??"").toString()?CoC7Check.difficultyLevel.unknown:difficulty?parseInt(difficulty,10):"unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular,pushing};if(!match.groups.a&&defaultUuid&&""!==defaultUuid&&(match.groups.a=defaultUuid+"#"),match.groups.a){const actor=await CoC7GroupMessage.getActor(match.groups.a.substr(0,match.groups.a.length-1));if(!actor)return null;rollData.actor=actor,rollData.autoRoll=game.users.filter((u=>!u.isGM&&rollData.actor.canUserModify(u,"update"))).map((u=>({id:u.id,active:u.active}))),rollData.autoRoll.length>0&&(rollData.autoRoll=rollData.autoRoll.filter((d=>d.active)).map((d=>d.id)),0===rollData.autoRoll.length&&(rollData.autoRoll=["prevent","roll"]))}else{const actor=await ActorPickerDialog.create();if(!actor)return ui.notifications.warn("CoC7.WarnNoControlledActor",{localize:!0}),null;rollData.actor=actor,game.user.isGM?(rollData.autoRoll=game.users.filter((u=>!u.isGM&&rollData.actor.canUserModify(u,"update"))).map((u=>({id:u.id,active:u.active}))),rollData.autoRoll.length>0&&(rollData.autoRoll=rollData.autoRoll.filter((d=>d.active)).map((d=>d.id)),0===rollData.autoRoll.length&&(rollData.autoRoll=["prevent","roll"]))):rollData.autoRoll=[game.user.id]}switch(rollData.roll=rollData.actor.uuid+"#"+rollData.type+"#"+rollData.key+(rollData.bonus<0?"#"+rollData.bonus:rollData.bonus>0?"#+"+rollData.bonus:"")+(0===difficulty?"#0":difficulty?"#"+parseInt(difficulty,10):""),rollData.portrait=rollData.actor instanceof TokenDocument?rollData.actor.texture.src:rollData.actor.portrait,rollData.shortName="-",rollData.fullName="-",rollData.type){case"characteristic":if(rollData.shortName=CoC7Utilities.getCharacteristicNames(rollData.key)?.short??"-",rollData.fullName=CoC7Utilities.getCharacteristicNames(rollData.key)?.label??"-",rollData.percent=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).system?.characteristics[rollData.key]?.value??1,"-"===rollData.shortName)return null;break;case"attribute":switch(rollData.key){case"lck":rollData.shortName=game.i18n.localize("CoC7.Luck"),rollData.fullName=game.i18n.localize("CoC7.Luck");break;case"san":rollData.shortName=game.i18n.localize("CoC7.SAN"),rollData.fullName=game.i18n.localize("CoC7.Sanity");break;default:return null}rollData.percent=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).system?.attribs[rollData.key]?.value??1;break;case"skill":if(!quick){const skills=await(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).getItemOrAdd(rollData.key,"skill");skills.length&&(rollData.skill=skills[0],rollData.shortName=skills[0].shortName,rollData.fullName=skills[0].shortName,rollData.pushable=skills[0].system.properties?.push??!1,rollData.percent=skills[0].value,rollData.isManeuver=skills[0].isDodge,rollData.isDodge=skills[0].isDodge)}break;case"item":if(!quick){const items=await(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).getItemOrAdd(rollData.key,"weapon");if(items.length){rollData.item=items[0],rollData.shortName=items[0].shortName,rollData.fullName=items[0].shortName,rollData.isManeuver=items[0].system.properties?.mnvr??!1,rollData.isWeapon=!0;const skillId=items[0].system.skill[items[0].usesAlternativeSkill?"alternativ":"main"].id;if(skillId){const skill=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).items.find((d=>d.id===skillId));rollData.tags=[skill.name],rollData.percent=skill.value,rollData.pushable=skill.system.properties?.push??!1}}}}return rollData}return null}static getTemplatePath(type){switch(type){case"opposed":return"systems/CoC7/templates/chat/messages/opposed.hbs";case"combinedall":case"combinedany":case"combined":return"systems/CoC7/templates/chat/messages/combined.hbs"}return null}static async createGroupMessage(options){if(!CoC7GroupMessage.getTemplatePath(options.type))return null;let config=Object.assign({type:"",denyPush:!1,showCompletedRolls:!0,allRollsCompleted:!1,isCombat:!1,isEditable:!0,rollStatuses:{},rollOrder:[]},options);switch(config.type){case"opposed":config=Object.assign({denyPush:!0,isTie:!1,needsTieBreaker:!1,advantageAttacker:!1,advantageDefender:!1,defenderIsDodging:!1,winnerRollsDamage:!1},config);break;case"combinedall":case"combinedany":case"combined":config=Object.assign({combined:"combinedall"===config.type?"all":"combinedany"===config.type?"any":"",actorUuid:"",isSuccess:!1,isFailure:!1,wasPushed:!1},config),config.type="combined"}const rollData={};let count=0;for(const offset in options.rollRequisites){const which="r"+offset,roll=await CoC7GroupMessage.parseRolls({roll:options.rollRequisites[offset],quick:!0,defaultUuid:config.actorUuid??""});if(!roll)return null;if("combined"===config.type){if(""!==config.actorUuid&&config.actorUuid!==roll.actor.uuid)return ui.notifications.error("CoC7.ErrorCombinedRollsRequireSingleActor",{localize:!0}),null;config.actorUuid=roll.actor.uuid}if(rollData[which]=roll,config.rollStatuses[which]={roll:roll.roll,rollable:"combined"!==config.type,rolling:!1,shortName:roll.shortName,fullName:roll.fullName,percent:roll.percent,tags:[],isManeuver:!1,isDodging:!1,isWeapon:!1},"opposed"===config.type)config.rollStatuses[which]=Object.assign({isAttacker:0===count,isWinner:!1,isTie:!1},config.rollStatuses[which]);config.rollOrder.push(which),count++}if("opposed"===config.type&&2!==Object.keys(rollData).length)return ui.notifications.error("CoC7.ErrorOpposedRollsLimitedToTwoActors",{localize:!0}),null;if(delete config.rollRequisites,game.user.isGM)return CoC7GroupMessage.newGroupMessage({rollData,options:config});{const gmId=CoC7Utilities.getAnIdForGm();return!1===gmId?null:(game.socket.emit("system.CoC7",{type:"group-message-new",listener:gmId,options:config}),!0)}}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link};const body=$("body");body.on("click","a.coc7-link",CoC7Link._onLinkClick),body.on("dragstart","a.coc7-link",(event=>CoC7Link._onDragCoC7Link(event))),CONFIG.TextEditor.enrichers.push({pattern:new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi"),enricher:CoC7Link._createLink})}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=foundry.utils.duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=foundry.utils.mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),void 0===value&&("blind"===key?(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())):"pushing"===key?(value=!0,data.pushing=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())):"combat"===key&&(value=!0,data.combat=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase()))),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}${data.pushing?"Pushing":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name&&!eventData.rolls)return"";let options=`${eventData.blind?"blind,":""}${eventData.pushing?"pushing,":""}type:${eventData.linkType}`;if(eventData.name?options+=`,name:${eventData.name}`:eventData.rolls&&(options+=`,rolls:${eventData.rolls}`,eventData.combat&&(options+=",combat")),void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);if(["combinedall","combinedany","opposed"].includes(options.linkType.toLowerCase()))return CoC7GroupMessage.createGroupMessage({type:options.linkType.toLowerCase(),rollRequisites:options.rolls.split("&&"),isCombat:Boolean(options.combat??!1)});break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER));if(1===actors.length)actor=actors[0];else{const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}get isPushing(){return this.isCheck&&this.object.pushing}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"pushing":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty!==CoC7Check.difficultyLevel.regular||0!==parseInt(link.modifier,10)||link.isPushing?this.object.hasModifiers=!0:this.object.hasModifiers=!1,""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=foundry.utils.mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}static async resolveOld(userId){const messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===userId)));if(messages.length){await messages[0].setFlag("CoC7","state","resolved");const card=await this.fromMessage(messages[0]);card.closeCard(),await card.updateChatCard()}}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.system));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=foundry.utils.mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).object;data=foundry.utils.diffObject(this,foundry.utils.expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula=formula+"+ floor("+db+"/2)"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers?.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);this.checkTotal(),"validate"===action&&this.data.data.validate&&this.close()}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value)?(validation.classList.add("warning"),this.data.data.validate=!1):(validation.classList.remove("warning"),this.data.data.validate=!0);validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&(this.data.data.validate=0===Object.values(this.data.data.characteristics.values).filter((val=>isNaN(parseInt(val)))).length)}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners){const user=game.users.get(k);user&&(content=content+'<option value="'+k+'">'+user.name+"</option>")}content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"∞":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.type){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0}}):"npc"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/cultist.svg"):"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/floating-tentacles.svg"):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="icons/svg/chest.svg"),data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:`+await TextEditor.enrichHTML(item.system.description.value,{async:!0}),result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=await TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!0}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?foundry.utils.duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=foundry.utils.duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=foundry.utils.duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=foundry.utils.duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags,keepBase=data.system.properties?.keepbasevalue??!1;data=foundry.utils.duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);keepBase&&(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data))}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data)),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(foundry.utils.duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(mainSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=secondSkill.match(/\(([^)]+)\)/)?secondSkill.match(/\(([^)]+)\)/)[1]:secondSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(secondSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(foundry.utils.duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=foundry.utils.mergeObject(this.system.monetary,foundry.utils.duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(foundry.utils.duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(foundry.utils.duplicate(data)),occupation=!0}break;default:processedDataArray.push(foundry.utils.duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstItemByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=foundry.utils.duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(foundry.utils.duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=foundry.utils.duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}static toolTipSkillText(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),skillId=game.CoC7Tooltips.ToolTipHover.closest(".item")?.dataset.skillId,actorAppId=game.CoC7Tooltips.ToolTipHover.closest(".window-app")?.dataset?.appid;if(void 0!==skillId&&void 0!==actorAppId&&void 0!==ui.windows[actorAppId]?.actor?.id){const actorId=ui.windows[actorAppId].actor.id,actor=game.actors.get(actorId);if(actor){const skill=actor.items.get(skillId);if(skill){let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});return game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:actor.name}):""})),toolTip}}}}return!1}async getItemOrAdd(itemIdentifier,type="skill"){if(itemIdentifier.match(/^i\.([^\\.]+)\../)){let item=this.getFirstItemByCoCID(itemIdentifier);if(!item){const newItems=await game.system.api.cocid.fromCoCIDBest({cocid:itemIdentifier,showLoading:!0});if(1===newItems.length&&(await this.createEmbeddedDocuments("Item",newItems),item=this.getFirstItemByCoCID(itemIdentifier),item))if("skill"===item.type)ui.notifications.info(game.i18n.format("CoC7.InfoSkillAddedAtBase",{name:item.name,percent:item.value}));else if("weapon"===item.type){await item.reload();const updates={};if(""===item.system.skill.main.id&&""!==item.system.skill.main.name){const skill=await this.getItemOrAdd(item.system.skill.main.name,"skill");skill.length&&(updates["system.skill.main.id"]=skill[0].id,updates["system.skill.main.name"]=skill[0].name)}if(""===item.system.skill.alternativ.id&&""!==item.system.skill.alternativ.name){const skill=await this.getItemOrAdd(item.system.skill.alternativ.name,"skill");skill.length&&(updates["system.skill.alternativ.id"]=skill[0].id,updates["system.skill.alternativ.name"]=skill[0].name)}Object.keys(updates).length&&await item.update(updates)}}if(item)return[item]}let myItems=this.getSkillsByName(itemIdentifier);if(!myItems.length){const era=game.settings.get("CoC7","worldEra"),newItem=game.items.find((d=>{if(d.type===type&&d.name===itemIdentifier){const eras=newItem.flags?.CoC7?.cocidFlag?.eras;return!(eras&&Object.keys(eras).length>0&&!eras[era])}return!1}));if(newItem&&myItems.push(newItem),0===myItems.length)for(const pack of game.packs)if("Item"===pack.metadata?.type){await pack.getDocuments();const newItem=game.items.find((d=>{if(d.type===type&&d.name===itemIdentifier){const eras=newItem.flags?.CoC7?.cocidFlag?.eras;return!(eras&&Object.keys(eras).length>0&&!eras[era])}return!1}));newItem&&myItems.push(newItem)}if(1===myItems.length&&(await this.createEmbeddedDocuments("Item",myItems),myItems=this.getSkillsByName(itemIdentifier),1===myItems.length))if("skill"===myItems[0].type)ui.notifications.info(game.i18n.format("CoC7.InfoSkillAddedAtBase",{name:myItems[0].name,percent:myItems[0].value}));else if("weapon"===myItems[0].type){await myItems[0].reload();const updates={};if(""===myItems[0].system.skill.main.id&&""!==myItems[0].system.skill.main.name){const skill=await this.getItemOrAdd(myItems[0].system.skill.main.name,"skill");skill.length&&(updates["system.skill.main.id"]=skill[0].id,updates["system.skill.main.name"]=skill[0].name)}if(""===myItems[0].system.skill.alternativ.id&&""!==myItems[0].system.skill.alternativ.name){const skill=await this.getItemOrAdd(myItems[0].system.skill.alternativ.name,"skill");skill.length&&(updates["system.skill.alternativ.id"]=skill[0].id,updates["system.skill.alternativ.name"]=skill[0].name)}Object.keys(updates).length&&await myItems[0].update(updates)}}return myItems}async skillCheck(skillData,fastForward,options={}){const skillIdentifier=skillData.name?skillData.name:skillData;let skill=await this.getItemOrAdd(skillIdentifier,"skill");if(skill.length&&(options.name=skill[0].name),!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+" "+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillIdentifier,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[foundry.utils.duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,"false"===options.pushing?check.pushing=!1:check.pushing=!!options.pushing,await check.roll(),check.toMessage(check.pushing)}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}get hasRollableCharacteristics(){for(const[,value]of Object.entries(this.system.characteristics))if(isNaN(Number(value.formula)))return!0;return!1}get hosRollableSkills(){for(const skill of this.skills)if(isNaN(skill.system?.value))return!0;return!1}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const average=new AverageRoll("("+value.formula+")").evaluate({minimize:!0,maximize:!0}).total;characteristics[`system.characteristics.${key}.value`]=average}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const source={icon:effect[0].icon,disabled:!1};foundry.utils.isNewerVersion(game.version,"11")?(source.name=game.i18n.localize(effect[0].name),source.statuses=[effect[0].id]):(source.label=game.i18n.localize(effect[0].label),source.flags={core:{statusId:effect[0].id}});const effectData=foundry.utils.mergeObject(source,custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.firearm&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstItemByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstItemByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstItemByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){return 0===this._rawValue?"0":this._rawValue?this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString():void 0}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll&&0!==this._rawValue)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async increaseLuckSpend(luckAmount){const spendingAmount=parseInt(luckAmount,10);this.totalLuckSpent=parseInt(this.totalLuckSpent??0,10)+spendingAmount;const modifiedResult=Math.max(1,this.modifiedResult-this.totalLuckSpent);1===modifiedResult?this.successLevel=CoC7Check.successLevel.critical:modifiedResult<=this.extremeThreshold?this.successLevel=CoC7Check.successLevel.extreme:modifiedResult<=this.hardThreshold?this.successLevel=CoC7Check.successLevel.hard:modifiedResult<=this.rawValue?this.successLevel=CoC7Check.successLevel.regular:this.fumbleThreshold<=modifiedResult?this.successLevel=CoC7Check.successLevel.fumble:modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),this.difficulty<=this.successLevel&&(this.isSuccess=!0,this.isFailure=!1),this.luckSpent=!0;let remove=0;for(let index=0,maxIndex=this.increaseSuccess.length;index<maxIndex;index++)this.increaseSuccess[index].luckToSpend=this.increaseSuccess[index].luckToSpend-spendingAmount,this.increaseSuccess[index].luckToSpend<1&&remove++;for(let index=0;index<remove;index++)this.increaseSuccess.shift();this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=foundry.utils.duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(foundry.utils.duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLocaleLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}static getAnIdForGm(){const keepers=game.users.filter((u=>u.active&&u.isGM&&u.id!==game.user.id));switch(keepers.length){case 0:return ui.notifications.error("CoC7.ErrorMissingKeeperUser",{localize:!0}),!1;case 1:return keepers[0].id}return keepers[Math.floor(Math.random()*keepers.length)].id}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=foundry.utils.flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=await Promise.all(worldDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:d?.folder?.name}}))),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=await Promise.all(compendiumDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:d?.folder?.name??""}}))),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId),this.render()}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.firearm));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=foundry.utils.mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),html.find(".section-header").click(this._onSectionHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),this.actor.isOwner&&!this.actor.compendium?.locked&&(html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this))),this.actor.isOwner&&void 0===this.actor.compendium){if(game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((()=>{const toolTip=game.actors.documentClass.toolTipSkillText();!1!==toolTip&&game.CoC7Tooltips.displayToolTip(toolTip)}),delay))}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"characteristic",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"attribute",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=await TextEditor.enrichHTML(skill.system.description.value,{async:!0});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=await TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized;let options=foundry.utils.duplicate(CoC7CharacterSheet.defaultOptions);this.summarized&&(options=foundry.utils.mergeObject(options,{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700})),options.token=this.options.token,await this.close(),await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".mythosEncountersTotalLoss").blur(this._onEditSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?foundry.utils.duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}async _onEditSanityLossReason(event){const input=$(event.currentTarget),offset=input.closest(".flexrow").data("offset");if(void 0!==this.actor.system.sanityLossEvents?.[offset]?.totalLoss){const sanityLossEvents=foundry.utils.duplicate(this.actor.system.sanityLossEvents);sanityLossEvents[offset].totalLoss=parseInt(input.val(),10),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=foundry.utils.flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=foundry.utils.expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=foundry.utils.mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=foundry.utils.duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;for(const key in foundry.utils.flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}))foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=foundry.utils.isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);module&&(!runMigrate&&Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)&&String(this.updatedModules[module.id])===String(module.version)||(this.currentModules[module.id]=module.version))}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=foundry.utils.mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(foundry.utils.expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&foundry.utils.mergeObject(original,update)})),delete update[embeddedName]})),foundry.utils.mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=foundry.utils.duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=foundry.utils.mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("áéíóàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃĀÑÕäëïöüÿÄËÏÖÜŸàèçÇßØøÅåÆæœ“”«»ąćęłńóśźżĄĆĘŁŃÓŚŹŻ"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(½|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilität: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archäologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrażeń|MO)",halfdb:"(½|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejętności(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Języki)[:\n]",sectionSpells:"\n(?:Zaklęcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrówka|Garand|Gauge |Lee-Enfield|Strzelba na słonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mołotowa|Granat|Laska dynamitu|Dynamit)",example:"Przykładowa postać, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczęście: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalności: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obrażenia 1K6\nWalka 30% (15/6), obrażenia 1K3\nDerringer 40% (20/8), obrażenia 1K8+1\nUnik 50% (25/10)\nUmiejętności\nTresura Zwierząt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasłuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczość 35%, Ukrywanie 10%\nJęzyki: Angielski 80%, Eklo 5%.\nZaklęcia: Przyzwanie NPC, Odesłanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(½|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Compétences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilèges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bâton de dynamite|Cocktail Molotov|Grenade à main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 ÉDU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nCompétences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilèges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificación de daño)",halfdb:"(½|medio daño|mitad|daño a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 años\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNúmero de Ataques 3 Pérdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), daño 1D6\nBrawl 30% (15/6), daño 1D3\nDerringer 40% (20/8), daño 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|傷害加值)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戰鬥技能|戰鬥列表|武器)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|技能列表)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|語言)[:\n]",sectionSpells:"\n(?:spells|咒文列表|咒文)[:\n]",handgun:"(?<type> 遂發槍|\\.22短口自動手槍|\\.25短口手槍(單管)|\\.32或7\\.65mm左輪手槍|\\.32或7\\.65mm自動手槍|\\.357 Magnum左輪手槍|\\.38或9mm左輪手槍|\\.38自動手槍|貝雷塔M9|格洛克17|9mm自動手槍|魯格P08|\\.41左輪手槍|\\.44馬格南左輪手槍|\\.45左輪手槍|\\.45自動手槍|沙漠之鷹|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>步槍|卡賓槍|半自動步槍|獵象槍|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|衝鋒槍)",machineGun:"(?<type>Browning|Vickers|機槍)",launched:"(?<type>Molotov|Grenade|Dynamite爆炸物|手榴彈|重武器)",example:"示範角色, 年齡 27\n力量 75 體質 60 體型 80 敏捷 70 外貎 60 智力 80\n意志 50 教育 85 SAN 55 HP 14 DB: 1D4\n體格: 1 Move: 7 MP: 10 幸運: 40 護甲: 1\n攻擊次數: 3 理智喪失: 1d4/1d8\n戰鬥列表\n咬 50% (25/10), 傷害 1D6\n空手 30% (15/6), 傷害 1D3\n手槍 40% (20/8), 傷害 1D8+1\n閃避 50% (25/10)\n技能列表\n動物馴養 55%, 取悅 30%, 急救 25%, 潛行 20%,\n聆聽 50%, 藥學 45%, 精神分析 25%, 心理學 75%,\n科學 (司法科學) 90%, 科學 (密碼學) 35%, \n偵查 35%, 喬裝 10%\n語言: 粵語 80%, 讀唇 5%.\n咒文: 召喚 NPC, 指揮 NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilität)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glück(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilitätsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beißen)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawód(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalność)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymałości)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczęście(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalności|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obrażenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Broń Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])ÉDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Santé Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Déplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Santé mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dégâts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact|À distance|Combat rapproché|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[ñÑ]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupación(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mágicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Número de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Pérdida de cordura|Pérdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*daño)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Pelea|Mordisco)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|年齡(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|力量(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|體質(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|體型(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|智力(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|意志(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|敏捷(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|外貎(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|教育(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|理智)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|生命)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|體格(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|護甲(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|幸運(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks|攻擊次數|# 攻擊)(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss|理智喪失|SAN值損失|SAN值喪失|扣SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|傷害))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge|閃避|閃躲)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近戰技能|射擊技能|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(foundry.utils.duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Handgun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Rifle/Shotgun",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Rifle",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Shotgun",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Submachine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Machine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill","Launch",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.message.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory);return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill&&"1"===skill.value&&"0"===skill.half&&"0"===skill.fifth)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];Array.isArray(dholehousePossessions)||null==dholehousePossessions||(dholehousePossessions=[dholehousePossessions]);for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?foundry.utils.duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:foundry.utils.duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?foundry.utils.duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=foundry.utils.duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}async _onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=foundry.utils.duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=foundry.utils.duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=await TextEditor.enrichHTML(archetype.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=await TextEditor.enrichHTML(archetype.system.suggestedOccupations,{async:!0,secrets:game.user.isGM}),sheetData.suggestedTraits=await TextEditor.enrichHTML(archetype.system.suggestedTraits,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points.toString())&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>game.i18n.localize("CHARAC."+n.toUpperCase()))).join(", ").replace(/(, )([^,]+)$/,"$1"+game.i18n.localize("CoC7.Or")+" $2").replace(/^([^,]+),([^,]+)$/,"$1$2"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=game.i18n.localize("CHARAC."+this.object.requiresAgeAdjustments.reduce.from.toUpperCase())),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=await TextEditor.enrichHTML(occupation.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.personalText=occupation.system.personalText,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=(parseInt(sheetData.default,10)||0)+(parseInt(sheetData.object.personal,10)||0)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+(parseInt(v,10)||0)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:foundry.utils.mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]=""}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.personalText=occupation.system.personalText,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_canDragStart(selector){return!0}_canDragDrop(selector){return!0}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,"-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResult=await rolltable[0].roll();tableResult.results[0].type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.results[0].text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES&&(this.object.enforcePointBuy=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=foundry.utils.randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):item.system.properties?.firearm&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=foundry.utils.duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=foundry.utils.duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0}},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){options=foundry.utils.mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),placeable:foundry.utils.duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,personalText:"",creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link","locator","getToken"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),data.type){case"CoC7Link":if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)));break;case"getToken":void 0!==data.appId&&"string"==typeof data.callBack&&void 0!==ui.windows[data.appId]&&"function"==typeof ui.windows[data.appId][data.callBack]&&ui.windows[data.appId][data.callBack](dropTargetTokens);break;default:if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find("#settings-documentation").append('<button class="trigger-system-manual"><i class="fas fa-books"></i> '+game.i18n.localize("CoC7.System.Documentation")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})),html.find(".trigger-system-manual").click((async()=>{(await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=foundry.utils.duplicate(this.system.costs),losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=foundry.utils.mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else await super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?foundry.utils.duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():foundry.utils.deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(foundry.utils.mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid);let particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token)){const foundTokens=canvas.scene.tokens.filter((d=>d.actorLink&&d.actor?.id===particpantDocument.id));1===foundTokens.length&&(particpantDocument=foundTokens[0])}if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize();const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize()):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.combat=output.fighting||output.firearm}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends Die{constructor(termData){termData.faces=10,super(termData)}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=await TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=await TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!0,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedContent=await TextEditor.enrichHTML(sheetData.data.system.content,{async:!0,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?foundry.utils.duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?foundry.utils.duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dragSelector:".chase-token",permissions:{dragstart:game.user.isGM},callbacks:{dragstart:this._onTokenSelectorDragStart.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async _onTokenSelectorDragStart(event){const data={type:"getToken",appId:this.appId,callBack:"addTokenToChase"};event.dataTransfer.setData("text/plain",JSON.stringify(data))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async addTokenToChase(tokens){1===tokens.length?(this.object.docUuid=tokens[0].document?.uuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)):ui.notifications.warn(game.i18n.localize("CoC7.ErrorTokenIncorrect"))}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.system.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.system.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?foundry.utils.mergeObject(data,updateData):foundry.utils.expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=foundry.utils.duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);foundry.utils.mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return foundry.utils.flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=foundry.utils.expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=foundry.utils.duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,foundry.utils.mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=foundry.utils.getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=foundry.utils.duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?foundry.utils.duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?foundry.utils.duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=await TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("div.app[data-appid="+appId+"]"),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=search]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;if(filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era){const eras=item.flags?.CoC7?.cocidFlag?.eras;eras&&Object.keys(eras).length>0&&!eras[era]&&(filter=!1)}filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):(!0===era&&(era=game.settings.get("CoC7","worldEra")),game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era}))}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=foundry.utils.flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys);return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];const result=[];let count=0;if(showLoading&&(["match","all","world"].includes(scope)&&count++,["match","all","compendiums"].includes(scope)&&(count+=game.packs.size)),["match","all","world"].includes(scope)){const worldDocuments=await CoCID.documentsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count});if("match"===scope&&worldDocuments.length)return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(worldDocuments,langFallback&&"en"!==lang);result.splice(0,0,...worldDocuments)}if(["match","all","compendiums"].includes(scope)){const compendiaDocuments=await CoCID.documentsFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count});result.splice(result.length,0,...compendiaDocuments)}return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(result,langFallback&&"en"!==lang)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const allDocuments=await this.fromCoCIDRegexAll({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});return this.filterBestCoCID(allDocuments)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return!1===era?(ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[]):CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static filterBestCoCID(documents){const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const currentDoc=bestMatchDocuments.get(docCoCID);if(void 0===currentDoc){bestMatchDocuments.set(docCoCID,doc);continue}if(!(""===(doc.pack??"")||""!==(currentDoc?.pack??"")))continue;let docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);docPriority=isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority;let existingPriority=parseInt(currentDoc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);existingPriority=isNaN(existingPriority)?Number.MIN_SAFE_INTEGER:existingPriority;if(!(docPriority>=existingPriority))continue;bestMatchDocuments.set(docCoCID,doc)}}return[...bestMatchDocuments.values()]}static filterAllCoCID(documents,langFallback){if(!langFallback)return documents;const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const docEras=Object.entries(doc.getFlag("CoC7","cocidFlag")?.eras??{}).filter((e=>e[1])).map((e=>e[0])).sort().join("/");let docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);docPriority=isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority;const key=docCoCID+"/"+docEras+"/"+(isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority),currentDoc=bestMatchDocuments.get(key);if(void 0===currentDoc){bestMatchDocuments.set(key,doc);continue}const docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=currentDoc?.getFlag("CoC7","cocidFlag")?.lang??"en";"en"===existingLang&&existingLang!==docLang&&bestMatchDocuments.set(key,doc)}}return[...bestMatchDocuments.values()]}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments.sort(CoCID.compareCoCIDPrio)}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const eraText=CoCID.eraText(era),documentType=CoCID.getDocumentType(type).schema.name,candidateDocuments=[];let count=1;for(const pack of game.packs)if(progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType){pack.indexed||await pack.getIndex();const indexInstances=pack.index.filter((i=>{const cocidFlag=i.flags?.CoC7?.cocidFlag;if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));for(const index of indexInstances){const document=await pack.getDocument(index._id);if(!document){const msg=game.i18n.format("CoC7.CoCIDFlag.error.document-not-found",{cocid:cocidRegExp,lang,era:eraText});throw ui.notifications.error(msg),console.log("CoC7 |",msg,index),new Error}candidateDocuments.push(document)}}return candidateDocuments.sort(CoCID.compareCoCIDPrio)}static compareCoCIDPrio(a,b){return b.getFlag("CoC7","cocidFlag")?.priority-a.getFlag("CoC7","cocidFlag")?.priority}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}}function init_listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs","systems/CoC7/templates/chat/messages/roll-container.hbs","systems/CoC7/templates/chat/messages/roll-dice.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","distanceTheatreOfTheMind",{name:"SETTINGS.SceneDistanceNotCalcualtedNoError",hint:"SETTINGS.SceneDistanceNotCalcualtedNoErrorHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","tokenDropMode",{name:"SETTINGS.TokenDropMode",hint:"SETTINGS.TokenDropModeHint",scope:"world",config:!0,default:"ask",type:String,choices:{ask:"SETTINGS.TokenDropModeAsk",roll:"SETTINGS.TokenDropModeRoll",average:"SETTINGS.TokenDropModeAverage",ignore:"SETTINGS.TokenDropModeIgnore"}}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),Handlebars.registerHelper("localizeRollName",(function(options){const difficulty=options.hash.difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(options.hash.difficulty),modifier=options.hash.modifier>0?`+${options.hash.modifier}`:options.hash.modifier<0&&options.hash.modifier.toString();return game.i18n.format("CoC7.LinkCheck"+(difficulty?"Diff":"")+(modifier?"Modif":"")+(options.hash.pushing?"Pushing":""),{difficulty,modifier,name:options.hash.name})})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'">'+era.name+"</option>");html.data("packId",app.metadata.id);let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}(),CoCID.init(),CoC7Link.init(),Hooks.once("diceSoNiceReady",(dice3d=>{for(const system in dice3d.DiceFactory.systems){const d100=dice3d.DiceFactory.systems[system].dice.find((d=>"d100"===d.type));if(void 0!==d100){if(void 0===dice3d.DiceFactory.systems[system].dice.find((d=>"dt"===d.type))){const diceDecader=Object.assign(Object.create(Object.getPrototypeOf(d100)),d100);diceDecader.type="dt",dice3d.DiceFactory.systems[system].dice.push(diceDecader)}if(void 0===dice3d.DiceFactory.systems[system].dice.find((d=>"do"===d.type))){const diceDecader=Object.assign(Object.create(Object.getPrototypeOf(d100)),d100);diceDecader.type="do",dice3d.DiceFactory.systems[system].dice.push(diceDecader)}}}}))}))}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector),void 0!==this.currentStep.sidebarTab&&ui.sidebar.activateTab(this.currentStep.sidebarTab)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(foundry.utils.mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'.tabs>a[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",sidebarTab:"settings"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-tab="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les règles optionnelles.",description:"Activez les règles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramètres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramètres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Système de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Système de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/règles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/règles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ",es:"35FM7ZOdzC6L2xlj",fr:"tdakyzTVOQsAMdSm"};void 0===readMe[lang]&&(lang="en"),CONFIG.CoC7=CONFIG.CoC7??{},CONFIG.CoC7.Manual=readMe[lang],foundry.utils.isNewerVersion(game.system.version,instructionsVersion??"0")&&((await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)),async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){Hooks.on("createToken",(async(tokenDocument,options,craetorId)=>{if(game.user.id===craetorId&&("icons/svg/mystery-man.svg"===tokenDocument.texture.src&&tokenDocument.texture.src!==tokenDocument._object.actor.img&&(tokenDocument.texture.src=tokenDocument._object.actor.img),"character"!==tokenDocument._object.actor.type&&(tokenDocument._object.actor.hasRollableCharacteristics||tokenDocument._object.actor.hosRollableSkills)))switch(game.settings.get("CoC7","tokenDropMode")){case"ask":new Dialog({title:game.i18n.localize("CoC7.TokenCreationRoll.Title"),content:game.i18n.localize("CoC7.TokenCreationRoll.Prompt"),buttons:{roll:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonRoll"),callback:async()=>{await tokenDocument._object.actor.rollCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Rolled",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}},average:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonAverage"),callback:async()=>{await tokenDocument._object.actor.averageCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Averaged",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0);break;case"roll":tokenDocument._object.actor.rollCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Rolled",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0;break;case"average":tokenDocument._object.actor.averageCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Averaged",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"})})),init_listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data),void 0!==app.flags?.CoC7?.["group-message"]&&CoC7GroupMessage.renderChatMessage(app,html,data)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.on("renderPlayerList",((playerList,html,data)=>{$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderRealRoll",((app,html,options)=>{for(const term in options.dieTerms)for(const input in options.dieTerms[term].inputs)if(options.dieTerms[term]instanceof CoC7DecaderDie){const tag=html.find('[name="'+term+"."+input+'"]');1===tag.length&&(tag[0].placeholder=game.i18n.localize("CoC7.RealRollDecaderPlaceholderName"))}})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0);break;case"group-message-new":CoC7GroupMessage.newGroupMessage(data);break;case"group-message-roll":CoC7GroupMessage.performMyRolls(data);break;case"group-message-update":CoC7GroupMessage.updateTheMessage(data)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}if("updateChar"===data.type)CoC7Utilities.updateCharSheets()}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg");const effectNameKey=foundry.utils.isNewerVersion(game.version,"11")?"name":"label";CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,[effectNameKey]:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,[effectNameKey]:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,[effectNameKey]:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,[effectNameKey]:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(statusKey,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(statusKey,{forceValue:!0})}}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDTyxNQUFNQSxLQUFPLENBU3BCQSxLQUFZLENBQ1ZDLFNBQVUsZUFDVkMsT0FBUSxpQkFDUkMsV0FBWSxxQkFDWkMsS0FBTSxlQUNOQyxpQkFBa0IsMkJBQ2xCQyxxQkFBc0IsK0JBQ3RCQyxTQUFVLG1CQUNWQyxhQUFjLHVCQUNkQyxRQUFTLGtCQUNUQyxZQUFhLHNCQUViQyxTQUFVLG1CQUNWQyxTQUFVLG9CQUdaWixtQkFBMEIsQ0FDeEJhLFlBQWEsY0FDYkMsYUFBYyxlQUNkQyxZQUFhLGNBQ2JDLGFBQWMsZUFDZEMsSUFBSyxNQUNMQyxNQUFPLFNBR1RsQixnQkFBdUIsQ0FDckJhLFlBQWEsaUNBQ2JDLGFBQWMsa0NBQ2RDLFlBQWEsaUNBQ2JDLGFBQWMsa0NBQ2RDLElBQUsseUJBQ0xDLE1BQU8sNEJBR1RsQixpQkFBd0IsQ0FDdEJtQixLQUFNLE9BQ05DLE1BQU8sUUFDUEMsVUFBVyxZQUNYQyxTQUFVLFdBQ1ZDLFFBQVMsVUFDVEMsRUFBRyxJQUNIQyxFQUFHLElBQ0hDLE1BQU8sUUFDUEMsV0FBWSxjQUdkM0IsY0FBcUIsQ0FDbkJtQixLQUFNLENBQ0pTLEtBQU0sd0JBQ05DLE9BQVEsSUFFVlQsTUFBTyxDQUNMUSxLQUFNLHlCQUNOQyxPQUFRLENBQUMsVUFFWFIsVUFBVyxDQUNUTyxLQUFNLDZCQUNOQyxPQUFRLENBQUMsVUFFWFAsU0FBVSxDQUNSTSxLQUFNLDRCQUNOQyxPQUFRLENBQUMsVUFFWE4sUUFBUyxDQUNQSyxLQUFNLDJCQUNOQyxPQUFRLENBQUMsVUFFWEwsRUFBRyxDQUNESSxLQUFNLDJCQUNOQyxPQUFRLENBQUMsUUFFWEosRUFBRyxDQUNERyxLQUFNLHdCQUNOQyxPQUFRLENBQUMsUUFFWEgsTUFBTyxDQUNMRSxLQUFNLHVCQUNOQyxPQUFRLElBRVZGLFdBQVksQ0FDVkMsS0FBTSxnQ0FDTkMsT0FBUSxLQUlaN0IsZ0JBQXVCLENBQ3JCOEIsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxrQkFPUHJDLGdCQUF1QixDQUNyQnNDLGNBQWUsMEJBQ2ZDLFNBQVUscUJBQ1ZDLFFBQVMsb0JBQ1RDLE9BQVEsbUJBQ1JDLEtBQU0saUJBQ05DLE9BQVEsbUJBQ1JDLFNBQVUscUJBQ1ZDLFFBQVMsb0JBQ1RDLGFBQWMseUJBQ2RDLGNBQWUsMEJBQ2ZDLGFBQWMseUJBQ2RDLFFBQVMsb0NBR1hqRCxpQkFBd0IsQ0FDdEJrRCxNQUFPLDZCQUNQQyxLQUFNLGtCQUNOQyxLQUFNLDZCQUNOQyxPQUFRLDhCQUNSQyxRQUFTLCtCQUNUQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLDZCQUdSbkUsZ0JBQXVCLENBQ3JCb0UsS0FBTSxpQkFDTkMsUUFBUyxvQkFDVEMsUUFBUyxvQkFDVEMsT0FBUSxtQkFDUkMsS0FBTSxpQkFDTkMsWUFBYSx3QkFDYkMsS0FBTSxpQkFDTi9CLE9BQVEsb0JBR1YzQyxTQUFnQixDQUNkMkUsT0FBUSxrQkFDUkMsT0FBUSxrQkFDUkMsTUFBTyxjQUdUN0UsV0FBa0IsQ0FDaEI4RSxTQUFVLHNCQUNWQyxPQUFRLG9CQUNScEMsT0FBUSxvQkFDUnFDLGNBQWUsMkJBQ2ZDLE1BQU8sbUJBQ1BDLE9BQVEsb0JBQ1JMLE1BQU8sb0JBR1Q3RSxXQUFrQixDQUNoQm1GLE1BQU8sYUFDUEMsT0FBUSxlQUdWcEYscUJBQTRCLENBQzFCcUYsUUFBUyxlQUNUQyxhQUFjLG9CQUNkcEYsT0FBUSxjQUNSRSxLQUFNLGFBR1JKLFFBQWUsQ0FBQyxHQUVoQkEsS0FBS3VGLFFBQVFDLE1BQVEsQ0FDbkIsT0FBUSx3Q0FDUixPQUFRLHdDQUNSLE9BQVEsd0NBQ1IsT0FBUSx3Q0FDUixPQUFRLHdDQUNSLE9BQVEsd0NBQ1IsT0FBUSx3Q0FDUixPQUFRLHlDQUdWeEYsS0FBS3VGLFFBQVFFLFdBQWEsQ0FDeEIsT0FBUSw4Q0FDUixPQUFRLDhDQUNSLE9BQVEsOENBQ1IsT0FBUSw4Q0FDUixPQUFRLDhDQUNSLE9BQVEsOENBQ1IsT0FBUSw4Q0FDUixPQUFRLCtDQUdWekYsS0FBSzBGLE9BQVMsQ0FDWkMsWUFBYSxjQUNiQyxZQUFhLGNBQ2JDLFlBQWEsY0FDYkMsZUFBZ0IsaUJBQ2hCQyxNQUFPLFFBQ1BDLE1BQU8sUUFDUEMsS0FBTSxRQUdSakcsS0FBS2tHLFlBQWMsbUJBQ25CbEcsS0FBS21HLGFBQWUsb0JBQ3BCbkcsS0FBS29HLGFBQWUsb0JBQ3BCcEcsS0FBS3FHLFlBQWMsbUJBQ25CckcsS0FBS3NHLGNBQWdCLHFCQUVyQnRHLEtBQUt1RyxzQkFBd0IsNkJBRTdCdkcsS0FBS3dHLDJCQUE2QixrQ0FDbEN4RyxLQUFLeUcsMEJBQTRCLGlDQUVqQ3pHLEtBQUswRyxZQUFjLENBQ2pCQyxVQUFXLGlCQUNYQyxNQUFPLGFBQ1BDLFNBQVUsZ0JBQ1ZDLFdBQVksbUJDdk9DLE1BQU1DLHlCQUF5QkMsYUFDNUMsS0FBQUMsQ0FBT3pCLE1BQU8wQixRQUNPLCtCQUFmQSxPQUFPQyxJQUVKQyxNQUFNRixPQUFPeEYsUUFBVzBGLE1BQU01QixNQUFNNkIsT0FBT0MsUUFBUUMsTUFBTTdGLFNBQzVEOEQsTUFBTTZCLE9BQU9DLFFBQVFDLE1BQU03RixNQUFROEYsT0FBT2hDLE1BQU02QixPQUFPQyxRQUFRQyxNQUFNN0YsUUFFL0MsNEJBQWZ3RixPQUFPQyxLQUVaQyxNQUFNRixPQUFPeEYsU0FBVzBGLE1BQU01QixNQUFNNkIsT0FBT0MsUUFBUUcsR0FBRy9GLFNBQ3hEOEQsTUFBTTZCLE9BQU9DLFFBQVFHLEdBQUcvRixNQUFRZ0csT0FBT2xDLE1BQU02QixPQUFPQyxRQUFRRyxHQUFHL0YsUUFJbkUsT0FEZ0JpRyxNQUFNVixNQUFNekIsTUFBTzBCLE9BRXJDLENBUUEsMkJBQU9VLENBQXNCQyxNQUFPQyxPQUNsQ0QsTUFBTUUsaUJBQ04sTUFBTUMsRUFBSUgsTUFBTUksY0FDVkMsR0FBS0YsRUFBRUcsUUFBUSxNQUNmQyxPQUFTRixHQUFHRyxRQUFRQyxTQUN0QlIsTUFBTVMsUUFBUUMsSUFBSU4sR0FBR0csUUFBUUMsVUFDN0IsS0FDSixPQUFRTixFQUFFSyxRQUFRSSxRQUNoQixJQUFLLFNBQ0gsT0FBT1gsTUFBTVksd0JBQXdCLGVBQWdCLENBQ25ELENBQ0VDLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsa0JBQzFCQyxLQUFNLHFCQUNOQyxPQUFRbEIsTUFBTW1CLEtBQ2Qsa0JBQzRCLGNBQTFCZixHQUFHRyxRQUFRYSxXQUE2QixPQUFJQyxFQUM5Q0MsU0FBb0MsYUFBMUJsQixHQUFHRyxRQUFRYSxjQUczQixJQUFLLE9BQ0gsT0FBT2QsT0FBT2lCLE1BQU1DLFFBQU8sR0FDN0IsSUFBSyxTQUNILE9BQU9sQixPQUFPbUIsU0FDaEIsSUFBSyxTQUNILE9BQU9uQixPQUFPb0IsT0FBTyxDQUFFSixVQUFXaEIsT0FBT2dCLFdBRS9DLENBRUEsZ0JBQUFLLEdBQ0UsTUFBTUMsU0FBVy9CLE1BQU04QixtQkFRdkIsTUFQc0IsWUFBbEJDLFNBQVNDLE9BQ1BELFNBQVNFLFFBQVUsS0FDckJGLFNBQVNmLE1BQVEsSUFBSWtCLEtBQXdCLElBQW5CSCxTQUFTRSxTQUFnQkUsY0FBY0MsTUFBTSxHQUFJLElBQ2xFTCxTQUFTRSxRQUFVLE1BQzVCRixTQUFTZixNQUFRLElBQUlrQixLQUF3QixJQUFuQkgsU0FBU0UsU0FBZ0JFLGNBQWNDLE1BQU0sR0FBSSxNQUd4RUwsUUFDVCxDQUVBLDBCQUFPTSxDQUFxQjVCLE9BQVE2QixlQUNsQyxPQUFLQyxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFJekNqQyxPQUFPa0MsU0FBU0MsSUFBSU4sZUFGbEI3QixPQUFPb0MsTUFBTUMsTUFBTUMsV0FBYVQsYUFHM0MsQ0FFQSxtQkFBT1UsQ0FBY3ZDLFFBQ25CLElBQUl3QyxRQUFVLEdBT2QsT0FOS1YsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BR3JDakMsT0FBT2tDLFNBQVNPLEtBQU8sSUFDaENELFFBQVUsSUFBSXhDLE9BQU9rQyxTQUFTUSxXQUY5QkYsUUFBVSxDQUFDeEMsT0FBTzJDLFFBQVEsT0FBUSxhQUk3QkgsUUFBUUksTUFBS0MsR0FBS0MsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUtwRSxLQUFLMEYsT0FBUXVGLElBQzdFLENBRUEsWUFBSUksR0FDRixNQUFzRCxpQkFBeEN0RSxpQkFBaUI0RCxhQUFhVyxLQUM5QyxDQUVBLG9DQUFPQyxDQUErQmhELFNBQVMsUUFBVyxHQUFTLENBQUMsR0FFbEUsTUFBTWlELFdBQWEsQ0FDakJDLFVBQVcsQ0FDVDlCLEtBQU0sWUFDTmhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsa0JBQzFCUCxRQUFTLElBRVhtRCxRQUFTLENBQ1AvQixLQUFNLFVBQ05oQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUMxQlAsUUFBUyxJQUVYb0QsU0FBVSxDQUNSaEMsS0FBTSxXQUNOaEIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxpQkFDMUJQLFFBQVMsSUFFWHFELFdBQVksQ0FDVmpDLEtBQU0sYUFDTmhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsbUJBQzFCUCxRQUFTLEdBQ1RzRCxLQUFNLENBQUNqRCxLQUFLQyxLQUFLQyxTQUFTLHVCQUkxQnBELFNBQ0Y4RixXQUFXOUYsT0FBUyxDQUNsQmlFLEtBQU0sU0FDTmhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsVUFDMUJQLFFBQVMsS0FJYixJQUFLLE1BQU11RCxLQUFLdkQsUUFDVnVELEVBQUVDLGFBQWNQLFdBQVdJLFdBQVdyRCxRQUFRN0YsS0FBS29KLEdBQzlDQSxFQUFFVCxTQUFVRyxXQUFXOUYsT0FBTzZDLFFBQVE3RixLQUFLb0osR0FDM0NBLEVBQUUxQyxTQUFVb0MsV0FBV0csU0FBU3BELFFBQVE3RixLQUFLb0osR0FDN0NBLEVBQUVFLFlBQWFSLFdBQVdDLFVBQVVsRCxRQUFRN0YsS0FBS29KLEdBQ3JETixXQUFXRSxRQUFRbkQsUUFBUTdGLEtBQUtvSixHQUl2QyxPQURBTixXQUFXSSxXQUFXSyxRQUFVVCxXQUFXSSxXQUFXckQsUUFBUTJELE9BQ3ZEVixVQUNULENBRUEsdUNBQU9XLENBQWtDNUQsU0FDdkMsSUFBSTZELE1BQVEsRUFFWixNQUFNWixXQUFhLENBQ2pCYSxPQUFRLENBQ04xQyxLQUFNLFNBQ05oQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLFVBQzFCUCxRQUFTLElBRVhvRCxTQUFVLENBQ1JoQyxLQUFNLFdBQ05oQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLFlBQzFCUCxRQUFTLEtBSWIsSUFBSyxNQUFNdUQsS0FBS3ZELFFBQ2Q2RCxPQUFTLEVBQ1ROLEVBQUVRLGlCQUNFUixFQUFFQyxjQUFnQkQsRUFBRTFDLFNBQVVvQyxXQUFXRyxTQUFTcEQsUUFBUTdGLEtBQUtvSixHQUM5RE4sV0FBV2EsT0FBTzlELFFBQVE3RixLQUFLb0osR0FJdEMsT0FESU0sTUFBUSxJQUFHWixXQUFXZSxVQUFXLEdBQzlCZixVQUNULEVDOUpLLE1BQU1nQixTQUNYLGlCQUFhQyxDQUFNQyxNQUFRLEVBQUdDLFNBQVcsS0FBTUMsVUFBVyxHQUN4RCxJQVFJSCxLQVJBSSxnQkFBa0IsR0FDbEJqRSxLQUFLa0UsUUFBUXRFLElBQUksaUJBQWlCNkQsU0FDaENLLE1BQVEsRUFDVkcsZ0JBQWtCakUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBQ25Da0UsTUFBUSxJQUNqQkcsZ0JBQWtCakUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBUTlDaUUsS0FIQTdELEtBQUtvRSxLQUFLQyxJQUFJQyxLQUFLQyxZQUNuQnZFLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUVuQjRFLEtBQUtDLFNBQVNiLFNBQVNjLFFBRTlCMUUsS0FBS29FLEtBQUtDLElBQUlDLEtBQUtLLGNBQ25CM0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBRW5CNEUsS0FBS0MsU0FBU2IsU0FBU2dCLGdCQUVqQixJQUFJSixLQUNmLE9BQ3VCLEtBQXBCUCxnQkFDRyxRQUFVQSxnQkFBa0IsSUFDNUIsUUFDRlksT0FBT0MsS0FBS0MsSUFBSWpCLFFBQ2xCLFNBQ0ZELEtBQUssQ0FBRW1CLE9BQU8sSUFHbEIsTUFBTUMsT0FBUyxDQUNiQyxLQUFNLENBQ0pDLE1BQU8sRUFDUEMsUUFBUyxJQUVYQyxLQUFNLENBQ0pGLE1BQU8sRUFDUEMsUUFBUyxJQUVYRCxNQUFPLEVBQ1B0QixNQUdFRSxXQUFVa0IsT0FBT2xCLFNBQVdBLFVBQzVCQyxXQUFVaUIsT0FBT2pCLFNBQVdBLFVBQ2hDLElBQUssTUFBTXBMLEtBQUtpTCxLQUFLUyxLQUNmMUwsYUFBYTBNLE9BQU9DLEtBQUtDLE1BQU1DLEVBQ2pDUixPQUFPSSxLQUFLRCxRQUFRdEwsS0FBS2xCLEVBQUV1TSxRQUUzQkYsT0FBT0MsS0FBS0MsTUFBb0IsS0FBWnZNLEVBQUV1TSxNQUFlLEVBQUl2TSxFQUFFdU0sTUFDM0NGLE9BQU9DLEtBQUtFLFFBQVF0TCxLQUFLbUwsT0FBT0MsS0FBS0MsUUFHekMsR0FBSXJCLE1BQVEsRUFDVm1CLE9BQU9JLEtBQUtGLE1BQ1ksSUFBdEJGLE9BQU9DLEtBQUtDLE9BQWVGLE9BQU9JLEtBQUtELFFBQVFNLFNBQVMsR0FDcEQsSUFDQVosS0FBS2EsT0FBT1YsT0FBT0ksS0FBS0QsY0FDekIsR0FBMEIsSUFBdEJILE9BQU9DLEtBQUtDLE1BQWEsQ0FDbEMsTUFBTWIsS0FBT1csT0FBT0ksS0FBS0QsUUFBUW5NLFFBQU93TSxHQUFLQSxFQUFJLElBQ2pEUixPQUFPSSxLQUFLRixNQUF3QixJQUFoQmIsS0FBS2hCLE9BQWUsSUFBTXdCLEtBQUtjLE9BQU90QixLQUM1RCxNQUNFVyxPQUFPSSxLQUFLRixNQUFRTCxLQUFLYyxPQUFPWCxPQUFPSSxLQUFLRCxTQUc5QyxPQURBSCxPQUFPRSxNQUFRRixPQUFPQyxLQUFLQyxNQUFRRixPQUFPSSxLQUFLRixNQUN4Q0YsTUFDVCxDQUVBLDJCQUFhWSxDQUFnQmhDLE1BQzNCLEdBQUk3RCxLQUFLa0UsUUFBUXRFLElBQUksaUJBQWlCNkQsT0FBUSxDQUM1QyxNQUFNcUMsU0FBVzlGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBRXJDbUcsU0FBVyxDQUNmQyxRQUFTLEtBQ1RDLE9BQU8sR0FFVEMsWUFBWUMsY0FBY0osU0FBVS9GLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUV4REksS0FBS29HLE9BQU9DLFlBQ2hCeEMsS0FDQTdELEtBQUtzRyxLQUNMUixTQUM2QixJQUE1QkMsU0FBU0MsUUFBUTFDLE9BQWUsS0FBT3lDLFNBQVNDLFFBQ2pERCxTQUFTRSxNQUViLENBQ0YsQ0FFQSx5QkFBYU0sQ0FBY3ZFLFNBQ3pCQSxRQUFRd0UsS0FBT3hFLFFBQVF3RSxNQUFRLENBQUMsRUFDaEN4RSxRQUFRd0UsS0FBSyxJQUFPLEVBQ3BCLE1BQU1DLEtBQU9uRSxPQUFPbUUsS0FBS3pFLFFBQVF3RSxNQUFNRSxLQUFJckUsR0FBS3NFLFNBQVN0RSxFQUFHLE1BQzVELElBQUl1RSxZQUFjOUIsS0FBS0MsSUFBSUQsS0FBS2MsSUFBSSxFQUFHZCxLQUFLYyxPQUFPYSxRQUMvQ0ksVUFBWS9CLEtBQUthLElBQUksRUFBR2IsS0FBS2EsT0FBT2MsT0FDeEMsTUFBTUssT0FBUzlHLEtBQUtrRSxRQUFRdEUsSUFBSSxpQkFBaUI2RCxPQUUzQytDLEtBQU8sR0FDYkEsS0FBSzFNLEtBQUssWUFFTjhNLFlBQWMsR0FDaEJKLEtBQUsxTSxNQUNGZ04sT0FDRyxRQUFVOUcsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBQW1CLElBQ3ZELFFBQ0ZpRixPQUFPQyxLQUFLQyxJQUFJNkIsZUFHbEJDLFVBQVksR0FDZEwsS0FBSzFNLE1BQ0ZnTixPQUNHLFFBQVU5RyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxlQUFpQixJQUNyRCxRQUNGaUYsT0FBT0MsS0FBS0MsSUFBSThCLGFBR3RCLE1BQU1oRCxXQUFhLElBQUlXLEtBQUtnQyxLQUFLTyxLQUFLLEtBQUtsRCxLQUFLLENBQUVtQixPQUFPLElBQ25EQyxPQUFTLENBQ2IrQixPQUFRLENBQ05DLFFBQVMsRUFDVEwsWUFBYSxHQUNiQyxVQUFXLElBRWIzQixLQUFNLEVBQ05yQixNQUVGLElBQUlxRCxTQUFVLEVBQ2QsSUFBSyxNQUFNdE8sS0FBS2lMLEtBQUtTLEtBQ2YxTCxhQUFhME0sT0FBT0MsS0FBS0MsTUFBTUMsRUFDNUJ5QixRQUdNTixZQUFjLEdBQ3ZCM0IsT0FBTytCLE9BQU9KLFlBQVk5TSxLQUFLbEIsRUFBRXVNLE9BQ2pDeUIsZ0JBRUEzQixPQUFPK0IsT0FBT0gsVUFBVS9NLEtBQUtsQixFQUFFdU0sT0FDL0IwQixjQVBBNUIsT0FBTytCLE9BQU9DLFFBQVVyTyxFQUFFdU0sTUFDMUIrQixTQUFVLEdBU1pqQyxPQUFPQyxLQUFtQixLQUFadE0sRUFBRXVNLE1BQWUsRUFBSXZNLEVBQUV1TSxNQUl6QyxNQUFNZ0MsT0FBUyxDQUFDLEVBRWhCLElBQUssTUFBTTVJLE9BQU95RCxRQUFRd0UsS0FBTSxDQUM5QlcsT0FBTzVJLEtBQU8sQ0FDWjJHLEtBQU0sQ0FDSkMsTUFBT0YsT0FBT0MsS0FDZEUsUUFBUyxDQUFDSCxPQUFPQyxPQUVuQkcsS0FBTSxDQUNKRixNQUFPLEVBQ1BDLFFBQVMsSUFFWEQsTUFBTyxFQUNQdEIsTUFFRixNQUFNQyxNQUFRNkMsU0FBU3BJLElBQUssSUFDNUIsSUFBSTZJLFNBQVd0RCxNQUNmcUQsT0FBTzVJLEtBQUs4RyxLQUFLRCxRQUFRdEwsS0FBS21MLE9BQU8rQixPQUFPQyxTQUM1QyxJQUFLLE1BQU1JLE9BQVN2QyxLQUFLQyxJQUFJcUMsVUFBV0EsU0FBVyxFQUFHQSxXQUNwREQsT0FBTzVJLEtBQUs4RyxLQUFLRCxRQUFRdEwsS0FDdkJtTCxPQUFPK0IsT0FBT0osWUFBWVEsU0FBV0MsU0FHekMsSUFBSyxNQUFNQSxPQUFTRCxTQUFVQSxTQUFXLEVBQUdBLFdBQzFDRCxPQUFPNUksS0FBSzhHLEtBQUtELFFBQVF0TCxLQUN2Qm1MLE9BQU8rQixPQUFPSCxVQUFVL0IsS0FBS0MsSUFBSXFDLFNBQVdDLFVBR2hELEdBQUl2RCxNQUFRLEVBQ1ZxRCxPQUFPNUksS0FBSzhHLEtBQUtGLE1BQ1ksSUFBM0JnQyxPQUFPNUksS0FBSzJHLEtBQUtDLE9BQWVnQyxPQUFPNUksS0FBSzhHLEtBQUtELFFBQVFNLFNBQVMsR0FDOUQsSUFDQVosS0FBS2EsT0FBT3dCLE9BQU81SSxLQUFLOEcsS0FBS0QsY0FDOUIsR0FBK0IsSUFBM0IrQixPQUFPNUksS0FBSzJHLEtBQUtDLE1BQWEsQ0FDdkMsTUFBTWIsS0FBTzZDLE9BQU81SSxLQUFLOEcsS0FBS0QsUUFBUW5NLFFBQU93TSxHQUFLQSxFQUFJLElBQ3REMEIsT0FBTzVJLEtBQUs4RyxLQUFLRixNQUF3QixJQUFoQmIsS0FBS2hCLE9BQWUsSUFBTXdCLEtBQUtjLE9BQU90QixLQUNqRSxNQUNFNkMsT0FBTzVJLEtBQUs4RyxLQUFLRixNQUFRTCxLQUFLYyxPQUFPdUIsT0FBTzVJLEtBQUs4RyxLQUFLRCxTQUV4RCtCLE9BQU81SSxLQUFLNEcsTUFBUWdDLE9BQU81SSxLQUFLMkcsS0FBS0MsTUFBUWdDLE9BQU81SSxLQUFLOEcsS0FBS0YsS0FDaEUsQ0FDQSxPQUFPZ0MsTUFDVCxDQUdBRyxnQkFBa0IsQ0FDaEJDLE1BQU8sT0FDUHZGLFFBQVMsQ0FBQyxFQUNWc0MsS0FBTSxHQUNOM0gsUUFBUyxhQUNUNkksTUFBTyxDQUNMLENBQ0UrQixNQUFPLGlCQUNQdkYsUUFBUyxDQUFDLEVBQ1Z3RixXQUFXLEVBQ1hDLE9BQVEsRUFDUkMsTUFBTyxHQUNQQyxVQUFXLEdBQ1h2QyxRQUFTLENBQ1AsQ0FDRUgsT0FBUSxFQUNSeEIsUUFBUSxLQUlkLENBQ0U4RCxNQUFPLGVBQ1B2RixRQUFTLENBQUMsRUFDVndGLFdBQVcsRUFDWEksU0FBVSxLQUVaLENBQ0VMLE1BQU8sTUFDUHZGLFFBQVMsQ0FBQyxFQUNWd0YsV0FBVyxFQUNYQyxPQUFRLEVBQ1JDLE1BQU8sR0FDUEMsVUFBVyxHQUNYdkMsUUFBUyxDQUNQLENBQ0VILE9BQVEsRUFDUnhCLFFBQVEsTUFLaEIwQixNQUFPLEdBQ1BxQyxXQUFXLEdBR2JGLGNBQWdCLENBQ2RDLE1BQU8sT0FDUHZGLFFBQVMsQ0FBQyxFQUNWc0MsS0FBTSxHQUNOM0gsUUFBUyxhQUNUNkksTUFBTyxDQUNMLENBQ0UrQixNQUFPLGlCQUNQdkYsUUFBUyxDQUFDLEVBQ1Z3RixXQUFXLEVBQ1hDLE9BQVEsRUFDUkMsTUFBTyxHQUNQQyxVQUFXLEdBQ1h2QyxRQUFTLENBQ1AsQ0FDRUgsT0FBUSxHQUNSeEIsUUFBUSxLQUlkLENBQ0U4RCxNQUFPLGVBQ1B2RixRQUFTLENBQUMsRUFDVndGLFdBQVcsRUFDWEksU0FBVSxLQUVaLENBQ0VMLE1BQU8sTUFDUHZGLFFBQVMsQ0FBQyxFQUNWd0YsV0FBVyxFQUNYQyxPQUFRLEVBQ1JDLE1BQU8sR0FDUEMsVUFBVyxHQUNYdkMsUUFBUyxDQUNQLENBQ0VILE9BQVEsRUFDUnhCLFFBQVEsTUFLaEIwQixNQUFPLEVBQ1BxQyxXQUFXLEdDL1FSLE1BQU1LLGlCQUFpQkMsS0FFNUIsV0FBQUMsQ0FBYUMsS0FBTUMsU0FFakIsR0FBSUQsS0FBS2pILFFBQVF1RSxPQUFPd0MsS0FBS0ksa0JBQW9CRCxTQUFTRSxTQU14RCxPQUFPLElBQUk3QyxPQUFPd0MsS0FBS0ksZ0JBQWdCRixLQUFLakgsTUFBTWlILEtBQU0sQ0FDakRHLFVBQVUsS0FDWkYsZUFHaUIsSUFBYkQsS0FBS0ksTUFDSSxVQUFkSixLQUFLakgsS0FDUGlILEtBQUtJLElBQU0sdUNBQ1ksV0FBZEosS0FBS2pILEtBQ2RpSCxLQUFLSSxJQUFNLHFCQUNZLFdBQWRKLEtBQUtqSCxPQUNkaUgsS0FBS0ksSUFBTSx3QkFJZnJKLE1BQU1pSixLQUFNQyxRQUNkLENBRUEseUJBQU1JLENBQXFCQyxXQUFXLFdBQVksT0FBWSxDQUFDLEdBQzdELEdBQThCLGlCQUFuQkEsVUFBVXZILE1BQStDLGlCQUFuQnVILFVBQVVqSSxNQUF3QyxTQUFuQmlJLFVBQVV2SCxNQUFtQnVILFVBQVVqSSxLQUFLa0ksTUFBTSxhQUFlQyxzQkFBc0JsRCxPQUFPbUQsaUJBQWlCQyxjQUFlLENBRTVNLE1BQU1DLFdBQWFDLFNBQVNOLFVBQVVqSSxNQUN0QyxHQUFJLENBQUMsUUFBUyxVQUFVcUYsU0FBU2lELEtBQUs1SCxNQUNwQyxNQUFPLG9CQUFzQjRILEtBQUs1SCxLQUFPLFNBQVc0SCxLQUFLM1AsS0FBTyxHQUVwRSxDQUNBLE9BQU8rRixNQUFNc0osb0JBQW9CQyxVQUFXLENBQUVFLFdBQVl6SSxPQUM1RCxDQUVBLHVCQUFXOEksR0FDVCxNQUFPLCtDQUNULENBRUEsZ0JBQVdqSCxHQUNULE1BQU8sQ0FDTGtILFlBQWEsUUFFakIsQ0FNQSxvQkFBTUMsQ0FBZ0JDLFdBQVlDLFVBQVcsR0FDM0MsSUFDSWpQLFNBQ0FrUCxTQUZBQyxhQUFlLENBQUMsRUFHcEIsUUFBcUMsSUFBMUIvUixLQUFLZ1MsS0FBS0osWUFDbkIsT0FBT0ssWUFBWUMsVUFBVTVHLEtBQU1zRyxZQUM5QixHQUFrQixXQUFkdEcsS0FBSzNCLE1BQXNCa0ksVUEyRS9CLEdBQWtCLFVBQWR2RyxLQUFLM0IsT0FBcUJrSSxTQUFVLENBQzdDLElBQUluRixPQUFRLEVBMENaLEdBekNtQixXQUFma0YsYUFDR3RHLEtBQUtqRSxPQUFPOEssV0FBV3hQLE9BTTFCb1AsYUFBZSxDQUNiLDRCQUE0QixFQUM1Qiw2QkFBNkIsRUFDN0IsOEJBQThCLEVBQzlCLDZCQUE2QixFQUM3Qix3QkFBeUIsR0FDekJuUSxLQUFNMEosS0FBS2pFLE9BQU8rSyxXQVZmOUcsS0FBS2pFLE9BQU84SyxXQUFXdFAsUUFFckJpUCxVQUFXLEVBRGhCbFAsVUFBVyxFQVlmOEosT0FBUSxHQUdTLGFBQWZrRixhQUNHdEcsS0FBS2pFLE9BQU84SyxXQUFXdlAsVUFJMUJrUCxVQUFXLEVBQ1hsUCxVQUFXLElBSlhrUCxVQUFXLEVBQ1hsUCxVQUFXLEdBS2I4SixPQUFRLEdBR1MsWUFBZmtGLGFBQ0d0RyxLQUFLakUsT0FBTzhLLFdBQVd0UCxTQUkxQmlQLFVBQVcsRUFDWGxQLFVBQVcsSUFKWGtQLFVBQVcsRUFDWGxQLFVBQVcsR0FLYjhKLE9BQVEsR0FHTkEsTUFBTyxDQUVULEdBQUk5SixTQUFVLENBQ1ptUCxhQUFlLENBQ2IsOEJBQThCLEVBQzlCLDZCQUE2QixFQUM3Qiw0QkFBNEIsRUFDNUIsNkJBQTZCLEdBRS9CLE1BQU1NLE1BQVE1QixTQUFTNkIsaUJBQ3JCaEgsS0FBS2pFLE9BQU8rSyxVQUNaeEosS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUt3Ryw2QkFFMUJ1TCxhQUFhblEsS0FBT3lRLE1BQU16USxLQUMxQm1RLGFBQWFLLFVBQVlDLE1BQU1ELFVBQy9CTCxhQUFhLHlCQUEyQk0sTUFBTUUsY0FDaEQsQ0FDQSxHQUFJVCxTQUFVLENBQ1pDLGFBQWUsQ0FDYiw4QkFBOEIsRUFDOUIsNkJBQTZCLEVBQzdCLDRCQUE0QixFQUM1Qiw2QkFBNkIsR0FFL0IsTUFBTU0sTUFBUTVCLFNBQVM2QixpQkFDckJoSCxLQUFLakUsT0FBTytLLFVBQ1p4SixLQUFLQyxLQUFLQyxTQUFTOUksS0FBS3lHLDRCQUUxQnNMLGFBQWFuUSxLQUFPeVEsTUFBTXpRLEtBQzFCbVEsYUFBYUssVUFBWUMsTUFBTUQsVUFDL0JMLGFBQWEseUJBQTJCTSxNQUFNRSxjQUNoRCxDQUNGLENBQ0YsT0ExR0UsR0E1Q21CLFNBQWZYLGFBT0FHLGFBTkd6RyxLQUFLakUsT0FBTzhLLFdBQVd4TyxLQU1YLENBQ2IsMEJBQTBCLEdBTmIsQ0FDYiwwQkFBMEIsRUFDMUIsMEJBQTBCLElBU2IsU0FBZmlPLGFBT0FHLGFBTkd6RyxLQUFLakUsT0FBTzhLLFdBQVd2TyxLQU1YLENBQ2IsMEJBQTBCLEdBTmIsQ0FDYiwwQkFBMEIsRUFDMUIsMEJBQTBCLElBU2IsWUFBZmdPLGFBUUFHLGFBUEd6RyxLQUFLakUsT0FBTzhLLFdBQVc3TyxRQU9YLENBQ2IsNkJBQTZCLEVBQzdCLDZCQUE4QixLQUM5Qiw4QkFBK0IsS0FDL0IsMEJBQTJCLEtBQzNCLDJCQUE0QixNQVhmLENBQ2IsMEJBQTBCLEVBQzFCLDJCQUEyQixFQUMzQiw2QkFBNkIsSUFhaEIsVUFBZnNPLFlBQXlDLFNBQWZBLFdBQXVCLENBQ25ELElBQUlZLFlBQ2UsVUFBZlosWUFBMkJ0RyxLQUFLakUsT0FBTzhLLFdBQVdqUCxRQUNwRHNQLGFBQWMsR0FFRyxVQUFmWixZQUEwQnRHLEtBQUtqRSxPQUFPOEssV0FBV2pQLFFBQ25Ec1AsYUFBYyxHQUVHLFNBQWZaLFlBQTBCdEcsS0FBS2pFLE9BQU84SyxXQUFXaFAsT0FDbkRxUCxhQUFjLEdBRUcsU0FBZlosWUFBeUJ0RyxLQUFLakUsT0FBTzhLLFdBQVdoUCxPQUNsRHFQLGFBQWMsR0FHZFQsYUFERVMsWUFDYSxDQUNiLDJCQUEyQixFQUMzQiwwQkFBMEIsRUFDMUIsNkJBQTZCLEVBQzdCLDBCQUEwQixFQUMxQiwwQkFBMEIsRUFDMUIsMEJBQTBCLEdBR2IsQ0FDYiwyQkFBMkIsRUFDM0IsMEJBQTBCLEVBR2hDLENBaUdGLEdBbEJtQixZQUFmWixhQUVBRyxhQURFekcsS0FBS2pFLE9BQU84SyxXQUFXUCxZQUNWLENBQ2IsNkJBQTZCLEVBQzdCLDhCQUE4QixFQUM5Qiw2QkFBNkIsRUFDN0IsNEJBQTRCLEVBQzVCLHdCQUF5QixHQUN6QmhRLEtBQU0wSixLQUFLakUsT0FBTytLLFdBR0wsQ0FDYiw2QkFBNkIsRUFDN0J4USxLQUFNMEosS0FBS2pFLE9BQU9rTCxlQUFpQixLQUFPakgsS0FBS2pFLE9BQU8rSyxVQUFZLE1BS3BFbEgsT0FBT21FLEtBQUswQyxjQUFjN0YsT0FBUyxFQUFHLENBRXhDLGFBRG1CWixLQUFLOUIsT0FBT3VJLGFBRWpDLENBQU8sQ0FDTCxNQUFNVSxTQUFXLHFCQUFxQmIsYUFDaENjLFdBQWFwSCxLQUFLakUsT0FBTzhLLFdBQVdQLGtCQUNwQ3RHLEtBQUs5QixPQUFPLENBQUUsQ0FBQ2lKLFVBQVdDLFlBQWFDLE1BQUtwQixNQUN6Q0EsTUFFWCxDQUNGLENBRUEsV0FBQXFCLENBQWFoQixZQUNYLE9BQU90RyxLQUFLdUgsZ0JBQWdCLGFBQWNqQixXQUM1QyxDQUVBLGFBQUlrQixHQUNGLE9BQUl4SCxLQUFLakUsT0FBTzhLLFdBQVczUCxRQUNsQjhJLEtBQUtqRSxPQUFPK0ssVUFFZDlHLEtBQUsxSixJQUNkLENBRUEsZ0JBQU1tUixDQUFZdEcsTUFDaEIsTUFBSSxlQUFnQm5CLEtBQUtqQyxZQUFvQmlDLEtBQUtqQyxNQUFNMEosV0FBV3RHLE1BQzFELGVBQWdCbkIsV0FBbUJBLEtBQUt5SCxXQUFXdEcsV0FBdkQsQ0FFUCxDQUVBLHVCQUFPNkYsQ0FBa0JGLFVBQVdHLGdCQUNsQyxJQUFLQSxlQUNILE1BQU8sQ0FDTDNRLEtBQU13USxVQUNORyxlQUFnQixHQUNoQkgsV0FHSixNQUFNWSxjQUFnQixJQUFJQyxPQUN4QixLQUFPQyxjQUFjQyxZQUFZWixnQkFBa0IsbUJBQ25ELEtBRUlwQixNQUFRaUIsVUFBVWpCLE1BQU02QixlQUs5QixPQUpJN0IsUUFDRm9CLGVBQWlCcEIsTUFBTSxHQUN2QmlCLFVBQVlqQixNQUFNLElBRWIsQ0FDTHZQLEtBQU0yUSxlQUFpQixLQUFPSCxVQUFZLElBQzFDRyxlQUNBSCxVQUVKLENBRUEseUJBQU9nQixDQUFvQjdCLE1BQ3pCLEdBQUlBLGdCQUFnQmQsVUFDbEIsR0FBSWMsS0FBS2xLLFFBQVE4SyxZQUFZM1AsY0FBNEMsSUFBMUIrTyxLQUFLbEssT0FBTytLLFVBQ3pELE9BQU9iLEtBQUtsSyxPQUFPK0ssZUFHckIsR0FBSWIsS0FBS1ksWUFBWTNQLGNBQXFDLElBQW5CK08sS0FBS2EsVUFDMUMsT0FBT2IsS0FBS2EsVUFHaEIsT0FBT2IsS0FBSzNQLElBQ2QsQ0FFQSxnQkFBT3lSLENBQVc5QixNQUNoQixRQUFrQixVQUFkQSxLQUFLNUgsT0FBcUI0SCxLQUFLbEssT0FBTzhLLFlBQVkzUCxjQUdsRCtPLEtBQUtsSyxPQUFPOEssWUFBWXJQLGVBQWdCeU8sS0FBS2xLLE9BQU84SyxZQUFZblAsZUFHN0QsQ0FDTDRGLEtBQUtDLEtBQUtDLFNBQVMsb0JBQW9Cd0ssY0FDdkMsT0FDQWhGLFNBQVNKLE9BQU93QyxLQUFLSSxnQkFBZ0J5QyxNQUFNQyxlQUFlakMsS0FBSzNQLE1BQU13USxVQUFVa0IsZUFDbkYsQ0FFQSwwQkFBTUcsR0FDSixHQUFrQixVQUFkbkksS0FBSzNCLEtBQWtCLE9BQzNCLE1BQU1vSSxhQUFlLENBQUMsRUF5RHRCLE9BeERJekcsS0FBS2pFLE9BQU84SyxXQUFXeFAsUUFFcEIySSxLQUFLakUsT0FBTzhLLFdBQVczUCxVQUMxQjhJLEtBQUtqRSxPQUFPOEssV0FBVzNQLFNBQVUsRUFDakN1UCxhQUFhLDhCQUErQixHQUszQ3pHLEtBQUtqRSxPQUFPOEssV0FBV3ZQLFVBQ3ZCMEksS0FBS2pFLE9BQU84SyxXQUFXdFAsVUFFeEJ5SSxLQUFLakUsT0FBTzhLLFdBQVd2UCxVQUFXLEVBQ2xDbVAsYUFBYSwrQkFBZ0MsSUFLN0N6RyxLQUFLakUsT0FBTzhLLFdBQVd2UCxVQUNyQjBJLEtBQUtqRSxPQUFPa0wsZ0JBQWlELEtBQS9CakgsS0FBS2pFLE9BQU9rTCxpQkFFNUNqSCxLQUFLakUsT0FBT2tMLGVBQWlCM0osS0FBS0MsS0FBS0MsU0FDckM5SSxLQUFLd0csNEJBRVB1TCxhQUFhLHlCQUEyQm5KLEtBQUtDLEtBQUtDLFNBQ2hEOUksS0FBS3dHLDhCQU1QOEUsS0FBS2pFLE9BQU84SyxXQUFXdFAsU0FDckJ5SSxLQUFLakUsT0FBT2tMLGdCQUFpRCxLQUEvQmpILEtBQUtqRSxPQUFPa0wsaUJBRTVDakgsS0FBS2pFLE9BQU9rTCxlQUFpQjNKLEtBQUtDLEtBQUtDLFNBQ3JDOUksS0FBS3lHLDJCQUVQc0wsYUFBYSx5QkFBMkJuSixLQUFLQyxLQUFLQyxTQUNoRDlJLEtBQUt5Ryw4QkFJTDZFLEtBQUtqRSxPQUFPOEssV0FBV3ZQLFdBQ3pCMEksS0FBS2pFLE9BQU84SyxXQUFXdlAsVUFBVyxFQUNsQ21QLGFBQWEsK0JBQWdDLEdBRTNDekcsS0FBS2pFLE9BQU84SyxXQUFXdFAsVUFDekJ5SSxLQUFLakUsT0FBTzhLLFdBQVd0UCxTQUFVLEVBQ2pDa1AsYUFBYSw4QkFBK0IsSUFJNUM3RyxPQUFPbUUsS0FBSzBDLGNBQWM3RixPQUFTLFNBQy9CWixLQUFLOUIsT0FBT3VJLGNBR2JBLFlBQ1QsQ0FFQSxlQUFBYyxDQUFpQmEsSUFBSzlCLFlBQ2Z0RyxLQUFLakUsT0FBT3FNLE9BQU1wSSxLQUFLakUsT0FBT3FNLEtBQU8sSUFFMUMsT0FEc0JwSSxLQUFLakUsT0FBT3FNLEtBQUtDLFFBQVEvQixhQUMxQixDQUV2QixDQUVBLHlCQUFNZ0MsSUFDQWhMLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQWdCSSxLQUFLc0csS0FBSzJFLFFBQ2pEdkksS0FBS2pFLE9BQU9tRCxhQUNUYyxLQUFLOUIsT0FBTyxDQUFFLGVBQWdCLENBQUMsVUFFakM4QixLQUFLOUIsT0FBTyxDQUFFLDZCQUE2QixJQUVyRCxDQUVBLDJCQUFNc0ssSUFDQWxMLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQWdCSSxLQUFLc0csS0FBSzJFLFFBQ2pEdkksS0FBS2pFLE9BQU9tRCxhQUNUYyxLQUFLOUIsT0FBTyxDQUFFLGVBQWdCLENBQUMsVUFFakM4QixLQUFLOUIsT0FBTyxDQUFFLDZCQUE2QixJQUVyRCxDQUVBLG9CQUFJdUssR0FDRixPQUFPekksS0FBSzBJLFlBQVksZUFDMUIsQ0FFQSxvQkFBTUMsQ0FBZ0JDLFNBQVVDLGlCQUFrQixHQUNoRCxNQUFNQyxXQUFhOUksS0FBSzBJLFlBQVlFLFVBQzlCdFMsS0FBTyxnQkFBZ0JzUyxXQUViLGVBQWJBLFVBQTBDLGNBQWJBLFVBQzdCRSxZQUNERCxnQkFNc0IsaUJBQWJELFNBQ0x0TCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxjQUFnQkksS0FBS3NHLEtBQUsyRSxXQUNoRHZJLEtBQUs5QixPQUFPLENBQUUsQ0FBQzVILE1BQU93UyxZQUU1QkMsR0FBR0MsY0FBY3pJLEtBQUtqRCxLQUFLQyxLQUFLQyxTQUFTLG1DQUVoQ3dDLEtBQUs5QixPQUFPLENBQUUsQ0FBQzVILE1BQU93UyxrQkFWM0I5SSxLQUFLOUIsT0FBTyxDQUNoQixDQUFDLHNCQUFzQjBLLFlBQWEsS0FDcEMsQ0FBQ3RTLE1BQU93UyxXQVNkLENBRUEsaUJBQU1HLENBQWFMLGdCQUNYNUksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDLGdCQUFnQjBLLGFBQWEsR0FDcEQsQ0FFQSxtQkFBTU0sQ0FBZU4sU0FBVUMsaUJBQWtCLEdBQy9DLE1BQU12UyxLQUFPLGdCQUFnQnNTLFdBRWIsZUFBYkEsVUFBMEMsY0FBYkEsV0FDOUJDLHNCQU1XN0ksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDNUgsT0FBTyxVQUozQjBKLEtBQUs5QixPQUFPLENBQ2hCLENBQUMsc0JBQXNCMEssWUFBYSxLQUNwQyxDQUFDdFMsT0FBTyxHQUdkLENBRUEsV0FBQW9TLENBQWFFLFVBQ1gsT0FBSzVJLEtBQUtqRSxPQUFPbUQsUUFPWmMsS0FBS2pFLE9BQU9tRCxNQUFNMEosV0FDaEI1SSxLQUFLakUsT0FBT21ELE1BQU0wSixXQVB2QjVJLEtBQUtqRSxPQUFPbUQsTUFBUSxDQUFDLEVBQ3JCYyxLQUFLakUsT0FBT21ELE1BQU1pSyxRQUFTLEVBQzNCbkosS0FBSzlCLE9BQU8sQ0FBRSxlQUFnQixDQUFDLEtBQ3hCLEVBS1gsQ0FFQSx3QkFBSWtMLEdBQ0YsTUFDZ0IsV0FBZHBKLEtBQUszQixRQUM2QixJQUFqQzJCLEtBQUtqRSxPQUFPOEssWUFBWXpPLE9BQ1UsSUFBakM0SCxLQUFLakUsT0FBTzhLLFlBQVkxTyxPQUNXLElBQW5DNkgsS0FBS2pFLE9BQU84SyxZQUFZOU8sT0FFOUIsQ0FFQSxtQkFBSXNSLEdBQ0YsR0FBa0IsV0FBZHJKLEtBQUszQixLQUFtQixPQUFPLEtBQ25DLE1BQU1pTCxVQUFZckYsU0FBU2pFLEtBQUtqRSxPQUFPd04sYUFBYXRHLEtBQ3BELE9BQUluSCxNQUFNd04sV0FBbUIsRUFDdEJBLFNBQ1QsQ0FFQSxnQkFBSUMsR0FDRixHQUFrQixXQUFkdkosS0FBSzNCLEtBQW1CLE9BQU8sS0FDbkMsTUFBTW1MLFdBQWF2RixTQUFTakUsS0FBS2pFLE9BQU93TixhQUFhRSxRQUNyRCxPQUFJM04sTUFBTTBOLFlBQW9CLEVBQ3ZCQSxVQUNULENBRUEsc0JBQUlFLEdBQ0YsSUFBSUgsYUFtQkosT0FqQkVBLGFBREV2SixLQUFLakUsT0FBT3dOLGFBQWFFLE9BQ1p6SixLQUFLakUsT0FBT3dOLGFBQWFFLE9BRXpCLElBRWJ6SixLQUFLakUsT0FBT3dOLGFBQWF0RyxNQUMzQnNHLGNBQWdCLElBQUl2SixLQUFLakUsT0FBT3dOLGFBQWF0RyxRQUUzQ2pELEtBQUtqRSxPQUFPOEssV0FBV3pPLE9BQ3pCbVIsY0FBZ0IsSUFBSWpNLEtBQUtDLEtBQUtDLFNBQVMsc0JBRXJDd0MsS0FBS2pFLE9BQU84SyxXQUFXMU8sT0FDekJvUixjQUFnQixJQUFJak0sS0FBS0MsS0FBS0MsU0FBUyxxQkFDbkN3QyxLQUFLakUsT0FBT3dOLGFBQWFJLFFBQzNCSixjQUFnQixJQUFJdkosS0FBS2pFLE9BQU93TixhQUFhSSxXQUkxQ0osWUFDVCxDQUVBLGlCQUFJSyxHQUNGLE1BQWtCLFdBQWQ1SixLQUFLM0IsS0FBMEIsT0FDL0IyQixLQUFLcUosaUJBQW1CLEVBSTlCLENBRUEsY0FBSUcsR0FDRixNQUFrQixXQUFkeEosS0FBSzNCLEtBQTBCLE9BQzlCMkIsS0FBS3VKLFlBSVosQ0FFQSxhQUFJTSxHQUNGLE9BQU81RixTQUFTakUsS0FBS2pFLE9BQU8rTixNQUFNTCxPQUFPclQsTUFDM0MsQ0FFQSxhQUFJMlQsR0FDRixPQUFPOUYsU0FBU2pFLEtBQUtqRSxPQUFPK04sTUFBTUUsS0FBSzVULE1BQ3pDLENBRUEsZ0JBQUk2VCxHQUNGLE9BQU9oRyxTQUFTakUsS0FBS2pFLE9BQU8rTixNQUFNSSxRQUFROVQsTUFDNUMsQ0FFQSxtQkFBSStULEdBQ0YsR0FBa0IsVUFBZG5LLEtBQUszQixLQUFrQixNQUFPLEdBRWxDLE1BQU04TCxnQkFBa0IsR0FDeEIsSUFBSyxNQUFPdE8sSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTFWLEtBQUt5VixrQkFDVCxJQUFoQ25LLEtBQUtqRSxPQUFPOEssV0FBV2hMLE1BQ3pCc08sZ0JBQWdCL1MsS0FBS2tHLEtBQUtDLEtBQUtDLFNBQVNwSCxRQUc1QyxPQUFPK1QsZUFDVCxDQUVBLDBCQUFhRSxDQUFlblEsTUFBT29MLE1BQ2pDLEdBQWtCLFVBQWRBLEtBQUtqSCxLQUFrQixPQUFPLEtBQ2xDLEdBQUlqQyxPQUFPa0osS0FBS3ZKLE9BQU91TyxNQUFNdEgsU0FBUyxLQUFNLENBQzFDLE1BQU11SCxPQUFTLENBQUMsRUFDaEIsSUFBSyxNQUFPMU8sSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTFWLEtBQUt1RixRQUFRRSxZQUNqRDBCLElBQUkyTyxXQUFXLE1BQVFwVSxNQUFNb1UsV0FBVyxpQkFDMUNELE9BQU8xTyxJQUFJNE8sVUFBVSxJQUFNN0wsUUFBUUMsTUFBTTZMLFlBQVl4USxNQUFPOUQsTUFBTXFVLFVBQVUsTUFHaEYsSUFBSXJVLE1BQ0osSUFDRUEsTUFBUWdNLEtBQUt1SSxNQUNYLElBQUk3SSxLQUFLd0QsS0FBS3ZKLE9BQU91TyxLQUFNQyxRQUFRSyxTQUFTLENBQzFDQyxVQUFVLElBQ1RwSSxNQUVQLENBQUUsTUFBT3FJLEtBQ1AxVSxNQUFRLENBQ1YsQ0FDQSxPQUFPQSxLQUNULENBQ0EsT0FBUTBGLE1BQU1tSSxTQUFTcUIsS0FBS3ZKLE9BQU91TyxPQUFzQyxLQUE3QnJHLFNBQVNxQixLQUFLdkosT0FBT3VPLEtBQ25FLENBRUEsU0FBSVMsR0FDRixHQUFrQixVQUFkL0ssS0FBSzNCLEtBQWtCLE1BQU8sQ0FBQyxNQUFNLEdBQ3pDLEdBQWdDLGlCQUFyQjJCLEtBQUtqRSxPQUFPdU8sS0FDckIsTUFBTyxDQUFDdEssS0FBS2pFLE9BQU91TyxNQUFNLEdBRzVCLEdBQUl0SyxLQUFLakUsT0FBT3VPLEtBQUt0SCxTQUFTLEtBQU0sQ0FDbEMsTUFBTXVILE9BQVMsQ0FBQyxFQUNoQixJQUFLLE1BQU8xTyxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRMVYsS0FBS3VGLFFBQVFFLFlBQ2pEMEIsSUFBSTJPLFdBQVcsTUFBUXBVLE1BQU1vVSxXQUFXLFdBQzFDRCxPQUFPMU8sSUFBSTRPLFVBQVUsSUFBTTdMLFFBQVFDLE1BQU02TCxZQUFZMUssS0FBTTVKLE1BQU1xVSxVQUFVLEtBRy9FLElBQUlyVSxNQUNKLElBQ0VBLE1BQVFnTSxLQUFLdUksTUFDWCxJQUFJN0ksS0FBSzlCLEtBQUtqRSxPQUFPdU8sS0FBTUMsUUFBUUssU0FBUyxDQUMxQ0MsVUFBVSxJQUNUcEksTUFFUCxDQUFFLE1BQU9xSSxLQUNQMVUsTUFBUSxDQUNWLENBRUEsTUFBTyxDQUFDQSxPQUFPLEVBQ2pCLENBQ0EsTUFBTyxDQUNKMEYsTUFBTW1JLFNBQVNqRSxLQUFLakUsT0FBT3VPLE9BRXhCLEtBREFyRyxTQUFTakUsS0FBS2pFLE9BQU91TyxPQUV6QixFQUVKLENBRUEsZUFBTVUsR0FDSixNQUFNeEssRUFBSVIsS0FBSytLLE1BT2YsT0FOSXZLLEVBQUUsS0FDSnlLLFFBQVExSyxLQUNOLFdBQVdQLEtBQUtrTCxRQUFRNVUsMEJBQTBCMEosS0FBSzFKLFFBQVEwSixLQUFLakUsT0FBT3VPLFdBQVc5SixFQUFFLFlBRXBGUixLQUFLOUIsT0FBTyxDQUFFLGNBQWVzQyxFQUFFLE1BRWhDQSxFQUFFLEVBQ1gsQ0FFQSxRQUFJOEosR0FDRixNQUFNOUosRUFBSVIsS0FBSytLLE1BSWYsT0FISXZLLEVBQUUsSUFDSlIsS0FBSzlCLE9BQU8sQ0FBRSxjQUFlc0MsRUFBRSxLQUUxQkEsRUFBRSxFQUNYLENBRUEsYUFBQTJLLEdBQ0UsTUFBa0IsV0FBZG5MLEtBQUszQixLQUEwQixLQUM5QjJCLEtBQUtqRSxPQUFPcVAsS0FJVnBMLEtBQUtqRSxPQUFPcVAsTUFIakJwTCxLQUFLcUwsV0FBVyxHQUNULEVBR1gsQ0FFQSxZQUFNQyxHQUNKLEdBQWtCLFdBQWR0TCxLQUFLM0IsS0FBbUIsT0FBTyxLQUNuQyxNQUFNa04sVUFBWXZMLEtBQUtqRSxPQUFPeVAsUUFDMUJ2SCxTQUFTakUsS0FBS2pFLE9BQU95UCxTQUNyQixRQUNFeEwsS0FBS3FMLFdBQVdFLFVBQ3hCLENBRUEsZ0JBQU1GLENBQVlHLFNBQ2hCLEdBQWtCLFdBQWR4TCxLQUFLM0IsS0FBbUIsT0FBTyxXQUM3QjJCLEtBQUs5QixPQUFPLENBQUUsY0FBZXNOLFNBQVcsR0FDaEQsQ0FFQSxlQUFNQyxHQUNKLEdBQWtCLFdBQWR6TCxLQUFLM0IsS0FBbUIsT0FBTyxLQUNuQyxNQUFNbU4sY0FBZ0J4TCxLQUFLbUwsZ0JBQ3JCTyxXQUFhMUwsS0FBS2pFLE9BQU95UCxRQUMzQnZILFNBQVNqRSxLQUFLakUsT0FBT3lQLFNBQ3JCLEVBQ0FBLFFBQVUsR0FBS0UsaUJBQWtCMUwsS0FBS3FMLFdBQVdLLGtCQUMxQzFMLEtBQUtxTCxXQUFXRyxRQUFVLEVBQ3ZDLENBRUEsa0JBQU1HLENBQWNDLEdBQ2xCLEdBQWtCLFdBQWQ1TCxLQUFLM0IsS0FBbUIsT0FBTyxLQUNuQyxNQUFNbU4sY0FBZ0J4TCxLQUFLbUwsZ0JBQ3ZCUyxFQUFJSixjQUFleEwsS0FBS3FMLFdBQVcsU0FDNUJyTCxLQUFLcUwsV0FBV0csUUFBVUksRUFDdkMsQ0FFQSwwQkFBT0MsQ0FBcUJDLFVBQVd4TSxTQUVyQyxPQURtQndNLFVBQVVDLE9BQU96TSxTQUVqQzBNLFFBQU8sQ0FBQ0MsU0FBVWhHLFFBR2RkLFNBQVM0QyxVQUFVOUIsT0FDcEJnRyxTQUFTdk0sTUFBS3VJLE9BQVNBLE1BQU0zUixPQUFTMlAsS0FBSzNQLE9BRXBDMlYsU0FHRixJQUFJQSxTQUFVaEcsT0FDcEIsSUFDRmlHLEtBQUt0RSxjQUFjdUUsY0FDeEIsQ0FRQSx3QkFBT0MsQ0FBbUJDLE1BRXhCLE1BQU1DLFNBQVdELEtBQUt0UCxRQUFRd1AsUUFDOUIsR0FBSUQsU0FBVSxDQUNaLE1BQU9FLFFBQVNELFNBQVdELFNBQVNHLE1BQU0sS0FDMUMsR0FBZ0IsVUFBWkQsUUFDRixPQUFPbFAsS0FBS29QLE9BQU9DLE9BQU9KLFNBQ3JCLENBQ0wsTUFBTUssTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUFPLEtBRXZCLE9BRGMsSUFBSUUsTUFBTUYsV0FDWDVTLEtBQ2YsQ0FDRixDQUdBLE1BQU0rUyxRQUFVWixLQUFLdFAsUUFBUWtRLFFBQzdCLE9BQU8zUCxLQUFLb1AsT0FBT3hQLElBQUkrUCxVQUFZLElBQ3JDLENBV0EsaUJBQU1DLENBQWFDLFlBQWMsQ0FBQyxHQUVoQ0EsWUFBWTdLLE9BQVEsRUFDcEIsTUFBTWdELEtBQU8xRyxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxRQUVWLGlCQUFyQnVKLEtBQUsrSCxjQUNkL0gsS0FBSytILFlBQWMsQ0FDakJqWCxNQUFPa1AsS0FBSytILFlBQ1puVyxRQUFTLFVBR3lCLElBQTNCb08sS0FBSytILFlBQVlqWCxRQUMxQmtQLEtBQUsrSCxZQUFZalgsTUFBUSxTQUVhLElBQTdCa1AsS0FBSytILFlBQVluVyxVQUMxQm9PLEtBQUsrSCxZQUFZblcsUUFBVSxJQUU3QixNQUFNb1csT0FBUyxHQUdmaEksS0FBSytILFlBQVlqWCxZQUFjbVgsV0FBV0MsV0FDeENsSSxLQUFLK0gsWUFBWWpYLE1BQ2pCK1csYUFFRjdILEtBQUsrSCxZQUFZblcsY0FBZ0JxVyxXQUFXQyxXQUMxQ2xJLEtBQUsrSCxZQUFZblcsUUFDakJpVyxhQUlGLE1BQU1NLE1BQVEsR0FDUkMsR0FBSzFOLEtBQUssSUFBSUEsS0FBSzNCLGdCQUd6QixHQUZJcVAsSUFBSUEsR0FBR3hVLEtBQUs4RyxLQUFSME4sQ0FBY3BJLEtBQU1nSSxPQUFRRyxNQUFPTixhQUV6QixVQUFkbk4sS0FBSzNCLEtBQ1AsSUFBSyxNQUFPeEMsSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTFWLEtBQUt5VixrQkFDVCxJQUFoQ25LLEtBQUtqRSxPQUFPOEssV0FBV2hMLE1BQWU0UixNQUFNclcsS0FBS2hCLE9BT3pELE9BRkFrUCxLQUFLdUIsV0FBYTRHLE1BQU1sWCxRQUFPb1gsS0FBT0EsSUFDdENySSxLQUFLZ0ksT0FBU0EsT0FDUGhJLElBQ1QsQ0FFQSxlQUFBc0ksQ0FBaUJ0SSxLQUFNZ0ksT0FBUUcsT0FDN0IsSUFBSyxNQUFPNVIsSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTFWLEtBQUttWixtQkFDVCxJQUFoQzdOLEtBQUtqRSxPQUFPOEssV0FBV2hMLE1BQWU0UixNQUFNclcsS0FBS2hCLE9BR3ZELElBQUkwWCxXQUFheFEsS0FBS0MsS0FBS0MsU0FBUyxjQUNoQ3NKLFVBQVksR0FDWmlILE9BQVEsRUFDWixHQUFJL04sS0FBS2pFLE9BQU9rTSxNQUFNK0YsS0FBS0MsR0FBSSxDQUM3QixNQUFNaEcsTUFBUWpJLEtBQUs5RixPQUFPZ1UsTUFBTWhSLElBQUk4QyxLQUFLakUsT0FBT2tNLE1BQU0rRixLQUFLQyxJQUN2RGhHLFFBQ0ZuQixXQUFhM0IsU0FBUzJDLG1CQUFtQkcsT0FDekM4RixPQUFRLEVBRVosQ0FFQSxHQUFJL04sS0FBS29KLHNCQUF3QnBKLEtBQUtqRSxPQUFPa00sTUFBTWtHLFdBQVdGLEdBQUksQ0FDaEVILFdBQWF4USxLQUFLQyxLQUFLQyxTQUFTLGVBQ2hDLE1BQU15SyxNQUFRakksS0FBSzlGLE9BQU9nVSxNQUFNaFIsSUFBSThDLEtBQUtqRSxPQUFPa00sTUFBTWtHLFdBQVdGLElBQzdEaEcsUUFDRm5CLFdBQWEsSUFBSTNCLFNBQVMyQyxtQkFBbUJHLFNBQzdDOEYsT0FBUSxFQUVaLENBRUtBLFFBQ0hqSCxVQUFZOUcsS0FBS2pFLE9BQU9rTSxNQUFNK0YsS0FBSzFYLEtBQy9CMEosS0FBS29KLHNCQUF3QnBKLEtBQUtqRSxPQUFPa00sTUFBTWtHLFdBQVc3WCxPQUM1RHdRLFdBQWEsSUFBSTlHLEtBQUtqRSxPQUFPa00sTUFBTWtHLFdBQVc3WCxTQUk5Q3dRLFdBQ0Z3RyxPQUFPbFcsS0FBSyxDQUNWZCxLQUFNd1gsV0FDTjFYLE1BQU8wUSxZQUlYd0csT0FBT2xXLEtBQUssQ0FDVmQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMsMkJBQ3pCcEgsTUFBTzRKLEtBQUswSixxQkFHZDRELE9BQU9sVyxLQUFLLENBQ1ZkLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLDBCQUN6QnBILE1BQU80SixLQUFLakUsT0FBT3FLLFlBQWNwRyxLQUFLakUsT0FBT3FLLFlBQWMsTUFHekRwRyxLQUFLakUsT0FBT3lQLFNBQ2Q4QixPQUFPbFcsS0FBSyxDQUNWZCxLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBUywyQkFDekJwSCxNQUFPNEosS0FBS2pFLE9BQU95UCxTQUd6QixDQUVBLFdBQUE0QyxHQUNFLFFBQWtCLFVBQWRwTyxLQUFLM0IsT0FBb0IyQixLQUFLakUsT0FBTzhLLFdBQVd6UCxLQUV0RCxDQUVBLFVBQUlpWCxHQUNGLE9BQU9yTyxLQUFLakUsT0FBTzhLLFdBQVczTyxJQUNoQyxDQUVBLFdBQUlvVyxHQUNGLE1BQWtCLFVBQWR0TyxLQUFLM0IsTUFFUDJCLEtBQUsxSixLQUFLMFIsZ0JBQ1YxSyxLQUFLQyxLQUFLQyxTQUFTLHFDQUFxQ3dLLGFBRTVELEVDdnpCSyxTQUFTdUcsaUJBQWtCcE4sTUFDaEMsTUFBTW1FLEtBQU8sQ0FDWGtKLElBQUssQ0FBQyxlQUNOelIsUUFBUyxDQUFDLEdBR1osSUFDRXVJLEtBQUtrSixJQUFJcFgsS0FBSyxpQkFDZGtPLEtBQUsvQyxPQUFTcEIsS0FBS3NCLE1BQ25CNkMsS0FBS21KLE1BQVF0TixLQUFLbEgsUUFDbEJxTCxLQUFLdkksUUFBUW9FLEtBQU91TixPQUFPQyxLQUFLQyxVQUFVek4sTUFDNUMsQ0FBRSxNQUFPMkosS0FDUCxPQUFPLElBQ1QsQ0FHQSxNQUFNcE8sRUFBSW1TLFNBQVNDLGNBQWMsS0FDakNwUyxFQUFFcVMsVUFBVUMsT0FBTzFKLEtBQUtrSixLQUN4QjlSLEVBQUUrUixNQUFRbkosS0FBS21KLE1BQ2YsSUFBSyxNQUFPUSxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVE5RSxLQUFLdkksU0FDdkNMLEVBQUVLLFFBQVFrUyxHQUFLdFAsRUFHakIsT0FEQWpELEVBQUV3UyxVQUFZLG1DQUFtQzVKLEtBQUsvQyxTQUMvQzdGLENBQ1QsQ0FvQ08sU0FBU3lTLFVBQVc1UyxPQUN6QixPQUFjLElBQVZBLFFBSUZBLE1BQU02UyxTQUNON1MsTUFBTThTLFNBQ1ksS0FBbEI5UyxNQUFNK1MsU0FDWSxNQUFsQi9TLE1BQU0rUyxRQUVWLENBRU8sTUFBTUMsV0FDWCx3QkFBT0MsQ0FBbUJDLFFBQ3hCLE9BQU9BLE9BQU9DLFFBQVEsYUFBYSxTQUFVRCxRQUMzQyxPQUFPQSxPQUFPLEdBQUdFLGFBQ25CLEdBQ0YsQ0FFQSwwQkFBYUMsQ0FBZW5CLE1BQU9vQixRQUFTdlEsUUFBVSxDQUFDLEdBQ3JELE1BQU13USxZQUFjLENBQUMsRUFDckJBLFlBQVlDLE9BQVN0QixNQUNyQnFCLFlBQVlFLFFBQVUxUSxRQUFRMFEsU0FBV3hNLFlBQVl5TSxhQUNqRDNRLFFBQVFnRSxVQUNWd00sWUFBWXpSLEtBQU82UixNQUFNQyxtQkFBbUJDLFFBQzVDTixZQUFZeE0sUUFBVWhFLFFBQVFnRSxjQUVKLElBQWpCaEUsUUFBUTZCLE9BQ2pCMk8sWUFBWTNPLEtBQU83QixRQUFRNkIsS0FDM0IyTyxZQUFZelIsS0FBTzZSLE1BQU1DLG1CQUFtQkUsS0FDNUNQLFlBQVl6TyxTQUFXNk8sTUFBTUksZ0JBQWdCQyxNQUUvQ1QsWUFBWWxNLEtBQU90RyxLQUFLc0csS0FBS3FLLEdBQzdCNkIsWUFBWVUsUUFBVVgsUUFFdEJyTSxZQUFZaU4sT0FBT1gsYUFBYXpJLE1BQUtxSixLQUM1QkEsS0FFWCxDQUVBLHdCQUFPQyxDQUFtQmxCLFFBQ3hCLE9BQU9BLE9BQU9DLFFBQVEsWUFBWSxTQUFVRCxRQUMxQyxNQUFPLElBQU1BLE9BQU96SCxhQUN0QixHQUNGLENBRUEsc0JBQU80SSxDQUFpQi9VLEtBQ3RCLElBQUtBLElBQUssT0FBTyxLQUVqQixHQUFJK0wsY0FBY2lKLGVBQWVoVixLQUMvQixPQUFJK0wsY0FBY2tKLG1CQUFtQmpWLEtBQWFxSyxTQUFTckssS0FDcEQrTCxjQUFjbUosVUFBVWxWLEtBSWpDLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FFckIsTUFBT3dKLFFBQVNELFNBQVcxUSxJQUFJNFEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUNGLE9BQU9sUCxLQUFLb1AsT0FBT0MsT0FBT0osU0FFNUIsTUFBTXlFLE1BQVF6QixXQUFXMEIsZ0JBQWdCcFYsS0FDekMsT0FBT21WLE9BQU85VyxLQUNoQixDQUdBLE9BQU9vRCxLQUFLb1AsT0FBT3hQLElBQUlyQixNQUFRLElBQ2pDLENBRUEsd0JBQU9xVixDQUFtQkMsVUFDeEIsTUFBTW5CLFFBQVUsQ0FBQyxFQUNYOVYsTUFBUXFWLFdBQVdxQixnQkFBZ0JPLFVBQ3pDLEdBQUlBLFNBQVNuTyxTQUFTLEtBQU0sQ0FDMUIsTUFBT3dKLFFBQVNELFNBQVc0RSxTQUFTMUUsTUFBTSxLQUMxQ3VELFFBQVFnQixNQUFRekUsUUFDaEJ5RCxRQUFRcEQsTUFBUUosUUFDWnRTLE1BQU04VyxPQUFPMWEsT0FBTTBaLFFBQVFvQixNQUFRbFgsTUFBTThXLE1BQU0xYSxNQUNuRDBaLFFBQVE5VixNQUFRQSxNQUFNK1QsRUFDeEIsTUFDRStCLFFBQVE5VixNQUFRaVgsU0FDaEJuQixRQUFRb0IsTUFBUWxYLE1BQU01RCxLQUV4QixPQUFPMFosT0FDVCxDQUVBLDRCQUFPcUIsQ0FBdUJDLE9BQVFDLFFBQVNDLFdBQWEsSUFDMUQsSUFBSyxNQUFNQyxRQUFRN1IsT0FBT21FLEtBQUt1TixRQUN4QkcsS0FBS2pILFdBQVcsT0FDUyxpQkFBakI4RyxPQUFPRyxNQUNoQmxDLFdBQVc4QixzQkFDVEMsT0FBT0csTUFDUEYsUUFDQSxHQUFHQyxjQUFjQyxTQUduQkYsUUFBUXhVLFFBQVEsR0FBR3lVLGFBQWFDLFFBQVVILE9BQU9HLE1BSXpELENBRUEsMkJBQU9DLENBQXNCSixPQUFRQyxTQUNuQyxTQUFTSSxZQUFhQyxJQUFLL1YsSUFBS3pGLE9BQzlCLEdBQUl5RixJQUFJMk8sV0FBVyxLQUFNLENBQ3ZCLE1BQU1yVSxFQUFJMEYsSUFBSTRDLE1BQU0sR0FDZG9ULFFBQVUxYixFQUFFc0ksTUFBTXRJLEVBQUVrUyxRQUFRLEtBQU8sR0FDbkN5SixRQUFVM2IsRUFBRXNVLFVBQVUsRUFBR3RVLEVBQUVrUyxRQUFRLFdBQ2IsSUFBakJ1SixJQUFJRSxXQUEwQkYsSUFBSUUsU0FBVyxDQUFDLEdBQ3pESCxZQUFZQyxJQUFJRSxTQUFVRCxRQUFTemIsTUFDckMsS0FDZ0IsU0FBVkEsTUFBa0J3YixJQUFJL1YsTUFBTyxFQUNkLFVBQVZ6RixNQUFtQndiLElBQUkvVixNQUFPLEVBQzlCSyxPQUFPOUYsT0FBTzJiLGFBQWUzYixNQUFPd2IsSUFBSS9WLEtBQU9LLE9BQU85RixPQUMxRHdiLElBQUkvVixLQUFPekYsS0FFcEIsQ0FFQSxHQUFLbWIsU0FBWUQsT0FDakIsSUFBSyxNQUFNRyxRQUFRN1IsT0FBT21FLEtBQUt3TixRQUFReFUsU0FBVSxDQUMvQyxHQUFhLGFBQVQwVSxLQUFxQixPQUN6QkUsWUFBWUwsT0FBUUcsS0FBTUYsUUFBUXhVLFFBQVEwVSxNQUM1QyxDQUNGLENBRUEsc0JBQU9SLENBQWlCcFYsS0FDdEIsSUFBS0EsSUFBSyxPQUFPLEtBQ2pCLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FDckIsTUFBT3dKLFFBQVNELFNBQVcxUSxJQUFJNFEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUFxQixDQUN2QixNQUFNd0YsU0FBVzFVLEtBQUtvUCxPQUFPQyxPQUFPSixVQUFVeUUsTUFDOUMsT0FBT2dCLFNBQVNWLE1BQ2xCLENBQU8sQ0FDTCxNQUFNMUUsTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUFPLEtBQ3ZCLE1BQU1rRSxNQUFRLElBQUloRSxNQUFNRixXQUV4QixPQURLa0UsTUFBTXBFLFFBQU9vRSxNQUFNcEUsTUFBUWhPLFFBQVFDLE1BQU11TyxVQUFVUixNQUFNaUMsV0FDdkRtQyxLQUNULENBQ0YsQ0FBTyxDQUNMLE1BQU05VyxNQUFRb0QsS0FBS29QLE9BQU94UCxJQUFJckIsS0FDOUIsT0FBTzBULFdBQVcwQyxjQUFjL1gsTUFDbEMsQ0FDRixDQUVBLG9CQUFPK1gsQ0FBZS9YLE9BQ3BCLE9BQUtBLE1BQ0VBLE1BQU04VyxPQUFTOVcsTUFBTWdZLGVBRFQsSUE0QnJCLENBRUEseUJBQU9DLENBQW9CaEIsVUFDekIsSUFBS0EsU0FBVSxPQUFPLEtBQ3RCLEdBQUk3VCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxZQUFhLENBRXpDLE1BQU04VCxNQUFRekIsV0FBVzBCLGdCQUFnQkUsVUFDekMsR0FBSUgsUUFDR0EsTUFBTW5DLFVBQVltQyxPQUFPb0IsUUFBUUMsTUFDd0IsS0FBdkRyQixNQUFNbkMsVUFBWW1DLE9BQU9vQixRQUFRQyxJQUFJaEssUUFBUSxLQUNoRCxPQUFRMkksTUFBTW5DLFVBQVltQyxPQUFPb0IsUUFBUUMsR0FJakQsQ0FDQSxNQUFNblksTUFBUXFWLFdBQVdxQixnQkFBZ0JPLFVBQ3pDLE9BQUk3VCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUV4QmhELE1BQU1nWSxnQkFDSmhZLE1BQU1nWSxlQUFlRSxRQUFRQyxNQUN5QixJQUFwRG5ZLE1BQU1nWSxlQUFlRSxRQUFRQyxLQUFLaEssUUFBUSxLQUNyQ25PLE1BQU1nWSxlQUFlRSxRQUFRQyxJQUtyQ25ZLE1BQU13TCxHQUNmLENBRUEsa0JBQU80TSxDQUFhQyxXQUFZQyxVQUc5QixRQUM2QixJQUFwQkEsU0FBU0MsYUFDTyxJQUFoQkQsU0FBU3ZFLElBRVpzRSxXQUFXM0YsT0FBT3FCLEdBQWEsQ0FDakMsTUFBTXJCLE1BQVF0UCxLQUFLdVAsT0FBTzNQLElBQUlxVixXQUFXM0YsTUFBTXFCLElBQy9DLFFBQTZCLElBQWxCckIsT0FBT0QsT0FBd0IsQ0FDeEMsTUFBTUEsT0FBU0MsT0FBT0QsT0FDbkJwVyxRQUFPeWEsT0FBU0EsTUFBTTlXLE1BQU0rVCxLQUFPdUUsU0FBU2xOLEtBQUt1SixTQUFTWixLQUMxRGpLLEtBQUlnTixPQUFTQSxNQUFNTSxTQUNBLElBQWxCM0UsT0FBTy9MLFNBQ1Q0UixTQUFXN0YsT0FBTyxHQUV0QixDQUNGLENBRUYsSUFBSStGLFNBQVcsQ0FDYkMsU0FBVSxFQUNWdmMsTUFBTyxFQUNQb00sS0FBTW9RLE9BQU9oRyxNQUFNaUcsS0FBS0MsT0FFMUIsUUFDd0IsSUFBZlAsaUJBQ3NCLElBQXRCQSxXQUFXRSxhQUNFLElBQWJELGVBQ29CLElBQXBCQSxTQUFTQyxPQUNoQixDQUNBLE1BQU1NLElBQU0sSUFBSUMsSUFBSVQsV0FBV0UsT0FBUUQsU0FBU0MsUUFDMUNRLFFBQVUsQ0FBQyxDQUFFRixNQVNuQixHQVJBTCxTQUFXLENBQ1RDLFNBQVVJLElBQUlMLFNBQVdFLE9BQU9oRyxNQUFNaUcsS0FBS3RULEtBRTNDbkosTUFBT3djLE9BQU9DLEtBQUtLLGlCQUFpQkQsUUFBUyxDQUMzQ0UsV0FBWTdWLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGdCQUNyQyxHQUNIc0YsS0FBTW9RLE9BQU9oRyxNQUFNaUcsS0FBS0MsT0FFdEJ4VixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFBc0IsQ0FDbEQsTUFBTWtXLFVBQVloUixLQUFLQyxLQUNwQmtRLFdBQVcxRCxTQUFTdUUsV0FBYSxJQUFNWixTQUFTM0QsU0FBU3VFLFdBQWEsSUFFekVWLFNBQVN0YyxNQUFRZ00sS0FBS2lSLEtBQ3BCWCxTQUFTdGMsTUFBUXNjLFNBQVN0YyxNQUFRZ2QsVUFBWUEsVUFFbEQsQ0FDRixNQUFZOVYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNkJBQ3BDNkwsR0FBR0MsY0FBY3NLLEtBQ2ZoVyxLQUFLQyxLQUFLQyxTQUFTLDJDQUd2QixPQUFPa1YsUUFDVCxDQUVBLGNBQU9hLENBQVNiLFVBQ2QsTUFDTyxPQURDQSxTQUFTbFEsS0FFTmtRLFNBQVN0YyxNQUFRLEVBU2pCc2MsU0FBU3RjLEtBRXRCLEVBR0ssTUFBTW9kLFNBQ1gsa0JBQU9DLENBQWFwSCxNQUNsQixNQUFNcUgsUUFBVXJILEtBQUtzSCxjQUFjLGlCQUNuQyxJQUFLRCxRQUFTLE9BQU8sS0FFckIsTUFBTXZTLEtBQU8sSUFBSXFTLFNBR2pCLE9BRkFqRSxXQUFXbUMscUJBQXFCdlEsS0FBTXVTLFNBRS9CdlMsSUFDVCxDQUVBLGNBQUl5UyxHQUVGLE9BREE1VCxLQUFLNlQsYUFBZTVQLFNBQVNqRSxLQUFLNlQsY0FDMUI3VCxLQUFLNlQsY0FDWCxLQUFLQyxVQUFVRCxhQUFhRSxRQUMxQixPQUFPelcsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQzFCLEtBQUtGLFVBQVVELGFBQWFJLEtBQzFCLE9BQU8zVyxLQUFLQyxLQUFLeVcsT0FBTyxvQkFDMUIsS0FBS0YsVUFBVUQsYUFBYTNKLFFBQzFCLE9BQU81TSxLQUFLQyxLQUFLeVcsT0FBTyx1QkFDMUIsS0FBS0YsVUFBVUQsYUFBYUssU0FDMUIsT0FBTzVXLEtBQUtDLEtBQUt5VyxPQUFPLHdCQUMxQixLQUFLRixVQUFVRCxhQUFhTSxPQUMxQixPQUFPN1csS0FBS0MsS0FBS3lXLE9BQU8sZUFDMUIsS0FBS0YsVUFBVUQsYUFBYU8sUUFDMUIsT0FBTzlXLEtBQUtDLEtBQUt5VyxPQUFPLGdCQUUxQixRQUNFLE9BQU8sS0FFYixDQUVBLFNBQUk5WixHQUNGLE9BQUk4RixLQUFLbVIsU0FBaUI1QixXQUFXcUIsZ0JBQWdCNVEsS0FBS21SLFVBQ25ELElBQ1QsQ0FFQSxRQUFJbEwsR0FDRixPQUFJakcsS0FBS3FVLFFBQVVyVSxLQUFLOUYsTUFBYzhGLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUk4QyxLQUFLcVUsUUFDekQsSUFDVCxDQUVBLFNBQUlwTSxHQUNGLE9BQUlqSSxLQUFLc1UsU0FBV3RVLEtBQUs5RixNQUFjOEYsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSThDLEtBQUtzVSxTQUMxRCxJQUNULENBRUEsWUFBQUMsR0FDRSxHQUFJalgsS0FBS2tFLFFBQVF0RSxJQUFJLGlCQUFpQjZELE9BQVEsQ0FDNUMsTUFBTXlULFlBQWMsR0FDcEIsSUFBSyxNQUFNQyxhQUFhelUsS0FBSzBVLE1BQU0vUixLQUNqQzZSLFlBQVlwZCxLQUF5QixNQUFwQnFkLFVBQVVyZSxNQUFnQixFQUFJcWUsVUFBVXJlLE1BQVEsSUFFbkVvZSxZQUFZcGQsS0FBSzRJLEtBQUswVSxNQUFNbFMsS0FBS3BNLE9BRWpDLE1BQU11ZSxTQUFXLENBQ2YxYSxRQUFTLEdBQUcrRixLQUFLMFUsTUFBTS9SLEtBQUsvQixrQkFDNUI4QixRQUFTOFIsWUFDVGxSLFFBQVMsS0FDVEMsT0FBTyxHQUVUakcsS0FBS29HLE9BQU9rUixLQUFLRCxTQUNuQixDQUNGLENBRUEscUJBQU9FLENBQWdCdEQsUUFBU0QsT0FBUyxNQUN2QyxJQUFLQyxRQUFTLE9BQ2QsTUFBTXBRLEtBQU9tUSxRQUFVLElBQUlrQyxTQUMzQmpFLFdBQVdtQyxxQkFBcUJ2USxLQUFNb1EsU0FDdENwUSxLQUFLdVQsTUFBUSxDQUNYL1IsS0FBTSxHQUNOSCxLQUFNLENBQUMsR0FFVCtNLFdBQVdtQyxxQkFDVHZRLEtBQUt1VCxNQUNMbkQsUUFBUW9DLGNBQWMsaUJBRXhCeFMsS0FBS3VULE1BQU1JLFNBQWlDLElBQXRCM1QsS0FBSzRULGFBQzNCNVQsS0FBS3VULE1BQU1NLE1BQVE1UyxLQUFLQyxJQUFJbEIsS0FBSzRULGNBQ2pDNVQsS0FBS3VULE1BQU1PLFVBQ1Q5VCxLQUFLNFQsYUFBZSxFQUNoQnpYLEtBQUtDLEtBQUt5VyxPQUFPLDRCQUNqQjFXLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUN2QixNQUFNa0IsUUFBVTNELFFBQVFvQyxjQUFjLGFBQ3RDLEdBQUl1QixRQUNGLElBQUssTUFBTWhmLEtBQUtnZixRQUFRQyxpQkFBaUIsTUFBTyxDQUM5QyxNQUFNQyxJQUFNLENBQ1ZDLFVBQVUsRUFDVkMsT0FBTyxFQUNQQyxPQUFPLEVBQ1BuZixPQUFRLEdBRVZtWixXQUFXbUMscUJBQXFCMEQsSUFBS2xmLEdBQ3JDaUwsS0FBS3VULE1BQU0vUixLQUFLdkwsS0FBS2dlLElBQ3ZCLENBRUYsTUFBTUksUUFBVWpFLFFBQVFvQyxjQUFjLGFBQ2xDcEMsUUFBUW9DLGNBQWMsYUFBYUEsY0FBYyxNQUNqRCxLQUNKeFMsS0FBS3VULE1BQU1sUyxLQUFLcE0sTUFBUW9mLFFBQVV2UixTQUFTdVIsUUFBUXpZLFFBQVEzRyxPQUFTLEtBRXBFK0ssS0FBS3NVLGdCQUFrQixHQUN2QixNQUFNQSxnQkFBa0JsRSxRQUFRb0MsY0FBYyxxQkFDOUMsR0FBSThCLGlCQUFtQkEsZ0JBQWdCTixpQkFBaUIsVUFDdEQsSUFBSyxNQUFNTyxPQUFPRCxnQkFBZ0JOLGlCQUFpQixVQUFXLENBQzVELE1BQU1RLGVBQWlCLENBQUMsRUFDeEJwRyxXQUFXbUMscUJBQXFCaUUsZUFBZ0JELEtBQ2hEdlUsS0FBS3NVLGdCQUFnQnJlLEtBQUt1ZSxlQUM1QixDQVFGLE9BTEl4VSxLQUFLeVUsYUFDUHpVLEtBQUswVSxjQUFnQnZZLEtBQUtDLEtBQUt5VyxPQUFPLGlCQUFrQixDQUN0RDhCLGdCQUFpQjNVLEtBQUt5VSxjQUdyQnRFLFlBQUwsRUFBb0JuUSxJQUN0QixDQUVBLG1CQUFPNFUsQ0FBY0MsT0FDbkIsTUFBTTdVLEtBQU8sSUFBSXFTLFNBNkJqQixPQTNCQXJTLEtBQUs4VSxTQUFXRCxNQUFNQyxTQUN0QjlVLEtBQUsrVSxLQUFPRixNQUFNRSxLQUNsQi9VLEtBQUtoRSxPQUFTNlksTUFBTTdZLE9BQ3BCZ0UsS0FBS2dWLGFBQWVILE1BQU1HLGFBQzFCaFYsS0FBS2lWLG1CQUFxQkosTUFBTUksbUJBRWhDalYsS0FBSzBTLGFBQWVtQyxNQUFNbkMsYUFDMUIxUyxLQUFLa1YsV0FBYUwsTUFBTUssV0FDeEJsVixLQUFLbVQsUUFBVTBCLE1BQU0vTixNQUFRK04sTUFBTS9OLE1BQU1nRyxHQUFLLEtBQzlDOU0sS0FBS2tULE9BQVMyQixNQUFNL1AsS0FBTytQLE1BQU0vUCxLQUFLZ0ksR0FBSyxLQUMzQzlNLEtBQUttVixRQUFVTixNQUFNakIsYUFDckI1VCxLQUFLL0ssTUFBUTZOLFNBQVMrUixNQUFNTyxVQUM1QnBWLEtBQUtnVCxPQUFTNkIsTUFBTVEsU0FDcEJyVixLQUFLK1MsU0FBVzhCLE1BQU1TLFdBQ3RCdFYsS0FBS3VWLGVBQWlCVixNQUFNVSxlQUFpQlYsTUFBTVUsZUFBaUIsS0FDcEV2VixLQUFLb0IsT0FBU3lULE1BQU1wVSxLQUFLYSxNQUV6QnRCLEtBQUtnUSxTQUFXNkUsTUFBTTliLE1BQU1vUyxTQUV4QjBKLE1BQU05YixNQUFNeWMsU0FDZHhWLEtBQUtvTCxRQUFVeUosTUFBTTliLE1BQU1vUyxTQUMzQm5MLEtBQUs4TCxRQUFVLE9BRWY5TCxLQUFLbUwsU0FBVyxLQUNoQm5MLEtBQUs4TCxRQUFVK0ksTUFBTTliLE1BQU1vUyxVQUd0Qm5MLElBQ1QsQ0FFQSwyQkFBT3lWLENBQXNCQyxZQUFhYixPQUN4QyxNQUFNN1UsS0FBT3FTLFNBQVN1QyxhQUFhQyxPQUduQyxPQUZBN1UsS0FBSzJWLGdCQUFnQkQsYUFFZDFWLElBQ1QsQ0FFQSxlQUFBMlYsQ0FBaUJELGFBQ2Z0SCxXQUFXOEIsc0JBQXNCclIsS0FBTTZXLFlBQ3pDLEVBR0ssTUFBTUUsV0FDWCxpQkFBT0MsQ0FBWUMsY0FDakIsT0FBSUEsYUFBYWpQLGNBQWNoRixTQUFTLE9BQWUsTUFDbkRpVSxhQUFhalAsY0FBY2hGLFNBQVMsT0FBZSxNQUNuRGlVLGFBQWFqUCxjQUFjaEYsU0FBUyxPQUFlLE1BQ25EaVUsYUFBYWpQLGNBQWNoRixTQUFTLE1BQWMsS0FDbERpVSxhQUFhalAsY0FBY2hGLFNBQVMsTUFBYyxLQUMvQyxJQUNULENBRUEscUJBQU82UixDQUFnQnRELFFBQVNELE9BQVMsTUFDdkMsSUFBS0MsUUFBUyxPQUNkLE1BQU0yRixPQUFTNUYsUUFBVSxDQUFDLEVBQzFCL0IsV0FBV21DLHFCQUFxQndGLE9BQVEzRixTQUN4QyxNQUFNNEYsTUFBUTVGLFFBQVFvQyxjQUFjLGVBQWV3QixpQkFBaUIsTUFDcEUrQixPQUFPQyxNQUFRLEdBQ2YsSUFBSyxNQUFNQyxLQUFLRCxNQUFPLENBQ3JCLE1BQU1oVyxLQUFPLENBQUMsRUFDZG9PLFdBQVdtQyxxQkFBcUJ2USxLQUFNaVcsR0FDdENGLE9BQU9DLE1BQU0vZixLQUFLK0osS0FDcEIsQ0FFQSxPQUFLbVEsWUFBTCxFQUFvQjRGLE1BQ3RCLEVDcGhCRixNQUFNRyxpQ0FBaUNDLGtCQUVyQyxhQUFBQyxFQUFlLFVBQWEsRUFBSyxVQUFhLEdBQVUsQ0FBQyxHQUV2RCxNQUFNcFcsS0FBT25CLEtBQUttQixNQUFRLElBQUlxVyxZQUFZeFgsS0FBS3lYLE1BSy9DLE9BSkF6WCxLQUFLbUIsS0FBT0EsS0FBS3lKLFNBQVMsQ0FBRThNLFNBQVU3TSxTQUFVdkksT0FBTyxJQUduRHRDLEtBQUsrUCxRQUFRL1AsS0FBS21CLEtBQUsyQixNQUFNNlUsU0FBUTVVLElBQU9BLEVBQUV6RCxRQUFReVEsT0FBU2hOLEVBQUV6RCxRQUFReVEsUUFBVS9QLEtBQUsrUCxVQUNyRi9QLElBQ1QsRUFHSyxNQUFNd1gsb0JBQW9CMVYsS0FVL0IsYUFBQXlWLEVBQWUsVUFBYSxFQUFLLFVBQWEsR0FBVSxDQUFDLEdBc0N2RCxPQXBDQXZYLEtBQUs4QyxNQUFROUMsS0FBSzhDLE1BQU1rQixLQUFJeVQsT0FDMUIsS0FBTUEsZ0JBQWdCRyxVQUNwQixNQUFNLElBQUlDLE1BQU0saUZBRWxCLEdBQUlKLEtBQUtLLGVBQWdCLENBQ3ZCTCxLQUFLN00sU0FBUyxDQUFFOE0sU0FBVTdNLFNBQVV2SSxPQUFPLElBQzNDdEMsS0FBSytYLE1BQVEvWCxLQUFLK1gsTUFBTWhNLE9BQU8wTCxLQUFLN1YsTUFHcEMsSUFBSWEsTUFBUWdWLEtBQUtoVixNQUtqQixPQUpJaVYsVUFBWTdNLFVBQVk0TSxLQUFLN1YsS0FBS2hCLFNBQ3BDNkIsTUFBUUwsS0FBS3VJLE9BQU84TSxLQUFLN1YsS0FBSyxHQUFHb0QsTUFBUSxHQUFLLEVBQUl5UyxLQUFLaFYsUUFHbEQsSUFBSXVWLFlBQVksQ0FBRWpULE9BQVF0QyxNQUFPbkQsUUFBU21ZLEtBQUtuWSxTQUN4RCxDQUNBLE9BQU9tWSxRQUlUelgsS0FBSzhDLE1BQVE5QyxLQUFLcUYsWUFBWTRTLGNBQWNqWSxLQUFLOEMsT0FHakQ5QyxLQUFLOEMsTUFBUTlDLEtBQUs4QyxNQUFNa0IsS0FBSXlULE9BQzFCLElBQUtBLEtBQUtTLFdBQVksQ0FDcEIsUUFBMEIsSUFBZlQsS0FBS3pTLE1BQ2QsT0FBTyxJQUFJZ1QsWUFBWSxDQUFFalQsT0FBUTNDLEtBQUt1SSxPQUFPOE0sS0FBS3pTLE1BQVEsR0FBSyxFQUFJeVMsS0FBSzFTLFFBQVN6RixRQUFTbVksS0FBS25ZLFVBRS9GbVksS0FBSzdNLFNBQVMsQ0FBRThNLFNBQVU3TSxTQUFVdkksT0FBTyxHQUUvQyxDQUNBLE9BQU9tVixRQUlUelgsS0FBS21ZLE9BQVNuWSxLQUFLb1ksaUJBQ1pwWSxJQUNULENBUUEsd0JBQU9xWSxDQUFtQkMsVUFDeEIsT0FBT3RZLEtBQUt1WSxZQUFZRCxTQUFVLENBQ2hDRSxXQUFZbkIseUJBQXlCb0IsWUFDckNDLFlBQWFyQix5QkFBeUJzQixhQUN0Q0MsV0FBWSxJQUNaQyxZQUFhLElBQ2JDLFFBQVNDLFFBRVAsTUFBTXJMLEdBQUtxTCxNQUFNQyxLQUFLdmEsTUFBTSxHQUFJLEdBQzFCd2EsV0FBYUYsTUFBTWpXLE1BQU11QixLQUFLLElBQzlCL0UsUUFBVSxDQUFFeVEsT0FBUWdKLE1BQU1oSixPQUFTZ0osTUFBTWhKLE9BQU90UixNQUFNLEdBQUksUUFBS1osR0FHL0RpRixNQUFRLEdBQ2QsR0FBSTRLLE1BQU10TCxLQUFNLENBQ2QsTUFBTThXLEtBQU9sWixLQUFLbVosZUFBZUYsWUFDakNuVyxNQUFNMUwsS0FBSyxJQUFJZ2lCLFNBQVMsQ0FBRTFMLEdBQUk1SyxNQUFPb1csS0FBTTVaLFVBQzdDLE1BQ01vTyxJQUFJNUssTUFBTTFMLEtBQUtzVyxJQUNuQjVLLE1BQU0xTCxLQUFLLElBQUlpZ0IseUJBQXlCLENBQUVJLEtBQU13QixXQUFZM1osV0FFOUQsT0FBT3dELFFBR2IsRUM1RkssTUFBTXVXLDBCQUEwQkMsZ0JBQ3JDLHlCQUFXQyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsU0FBVSxnQkFDNUJoTCxNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyw0QkFDMUJrYyxTQUFVLHdEQUNWQyxlQUFlLEVBQ2ZDLE1BQU8sSUFDUEMsT0FBUSxLQUVaLENBR0EsaUJBQUFDLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BRXhCQSxLQUFLQyxHQUFHLFFBQVMsa0JBQW1CaGEsS0FBS2lhLFFBQVEvZ0IsS0FBSzhHLE9BQ3REK1osS0FBS3JhLEtBQUssYUFBYXdhLE1BQU1sYSxLQUFLbWEsV0FBV2poQixLQUFLOEcsTUFBT0EsS0FBS29hLFlBQVlsaEIsS0FBSzhHLE9BQy9FK1osS0FBS0MsR0FBRyxRQUFTLGlCQUFrQmhhLEtBQUtxYSxnQkFBZ0JuaEIsS0FBSzhHLE1BQy9ELENBRUEsT0FBQWlhLENBQVMxZCxPQUNQLE1BQU1LLEdBQUtMLE1BQU1JLGNBQ2pCLElBQUssTUFBTTJkLEtBQUsxZCxHQUFHMmQsY0FBY0MsU0FDL0JGLEVBQUV2TCxVQUFVMEwsT0FBTyxTQUFVSCxJQUFNMWQsSUFFckNvRCxLQUFLc1IsT0FBTytELFNBQVd6WSxHQUFHRyxRQUFRMmQsU0FDcEMsQ0FFQSxnQkFBTVAsQ0FBWTVkLE9BRWhCLEdBREFBLE1BQU1FLGtCQUNEbVcsT0FBTytILE1BQ1YsT0FFRixNQUFNL2QsR0FBS0wsTUFBTUksY0FDWHFVLGFBQWU5SyxTQUFTdEosR0FBR0csUUFBUTJkLGFBQWFwSixPQUNsRE4sT0FBTzRKLFlBQ0o1SixNQUFNNkosYUFDVDdKLE1BQU1tSixXQUFXNWQsTUFBTyxDQUFFdWUsZ0JBQWdCLElBQzFDOWEsS0FBSythLGFBQWUvSixPQUcxQixDQUVBLFdBQUFvSixDQUFhN2QsT0FDWEEsTUFBTUUsaUJBQ0Z1RCxLQUFLK2EsY0FDUC9hLEtBQUsrYSxhQUFhWCxZQUFZN2QsT0FFaEN5RCxLQUFLK2EsYUFBZSxJQUN0QixDQUVBLHFCQUFNVixDQUFpQjlkLE9BQ3JCeUQsS0FBS3NSLE9BQU8wSixjQUFjOVUsU0FBU2xHLEtBQUtzUixPQUFPK0QsV0FDL0NyVixLQUFLaWIsT0FDUCxDQUVBLG1CQUFheEssR0FDWCxNQUFNeUssYUFBZSxDQUFDLFlBQWEsTUFBTyxZQUMxQyxJQUFJbk4sTUFBUSxHQUNaLEdBQUl6USxLQUFLc0csS0FBSzJFLE1BQVFxSyxPQUFPK0gsT0FBUy9ILE9BQU9qRyxPQUFPa08sV0FBV2phLE9BQVMsRUFDdEVtTixNQUFRNkUsT0FBT2pHLE9BQU9rTyxXQUFXN1csS0FBSWpCLEdBQUtBLEVBQUU4TCxlQUN2QyxDQUNEK0QsT0FBTytILFFBQ1Q1TSxNQUFRNkUsT0FBT2pHLE9BQU93TyxXQUFXNWtCLFFBQU93TSxHQUFLbVksYUFBYWxZLFNBQVNELEVBQUU4TCxTQUFTM1UsTUFBTW1FLFFBQVUwRSxFQUFFN0ksTUFBTWtoQixVQUFVOWQsS0FBS3NHLEtBQUtxSyxLQUFPbEwsRUFBRTdJLE1BQU1raEIsVUFBVUMsV0FBYW5MLE1BQU1vTCwwQkFBMEJDLFFBQU92WCxLQUFJakIsR0FBS0EsRUFBRThMLFlBRXBOLE1BQU0yTSxTQUFXek4sTUFBTS9KLEtBQUlqQixHQUFLQSxFQUFFa0ssVUFDbENjLE1BQVFBLE1BQU1oQyxPQUFPek8sS0FBS29QLE9BQU9uVyxRQUFPbUcsR0FBS3dlLGFBQWFsWSxTQUFTdEcsRUFBRTJCLFFBQVVtZCxTQUFTeFksU0FBU3RHLEVBQUV1UixNQUFRdlIsRUFBRTBlLFVBQVU5ZCxLQUFLc0csS0FBS3FLLEtBQU92UixFQUFFMGUsVUFBVUMsV0FBYW5MLE1BQU1vTCwwQkFBMEJDLFFBQ25NLENBQ0EsR0FBcUIsSUFBakJ4TixNQUFNbk4sT0FDUixPQUFPbU4sTUFBTSxHQUVmLEdBQUlBLE1BQU1uTixPQUFTLEVBQUcsQ0FDcEIsTUFBTXRCLFFBQVUsR0FDaEIsSUFBSyxNQUFNbWMsVUFBVTFOLE1BQU8sQ0FDMUIsTUFBTTJOLGdCQUFtQkQsa0JBQWtCRSxjQUMzQ3JjLFFBQVFsSSxLQUFLLENBQ1h1RyxLQUFNOGQsT0FBTzlkLEtBQ2JySCxLQUFNbWxCLE9BQU9ubEIsS0FDYm9QLElBQU1nVyxnQkFBa0JELE9BQU92aEIsTUFBTTBoQixTQUFXSCxPQUFPRyxTQUN2REMsUUFBU0gsaUJBRWIsQ0FDQXBjLFFBQVE0TSxLQUFLdEUsY0FBY3VFLGVBRTNCLElBQUlrSixTQUFXL1YsUUFBUSxHQUFHM0IsS0FDMUIsR0FBSUwsS0FBS3NHLEtBQUtrWSxVQUFXLENBQ3ZCLE1BQU1DLGNBQWdCaE8sTUFBTXJPLE1BQUsrYixTQUFXQSxPQUFPeE8sU0FBV3dPLE9BQU94TixNQUFRM1EsS0FBS3NHLEtBQUtrWSxVQUFVN04sS0FDN0Y4TixnQkFDRjFHLFNBQVcwRyxjQUFjcGUsS0FFN0IsQ0FFQSxPQUFPLElBQUlxZSxTQUFRaEIsVUFDakIsSUFBSTNCLGtCQUFrQixDQUFFL1osUUFBUytWLFNBQVUyRixVQUFXaGQsUUFBTyxFQUFJLEdBRXJFLENBRUEsT0FEQStLLEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS0MsU0FBUywrQkFDbEMsSUFDVCxFQ2hHSyxNQUFNeWUsaUJBRVgsdUJBQWFDLEVBQVksVUFBVyxJQUFLLFFBSXZDLFFBSHlCLElBQWRDLFlBQ1R6TCxJQUFNcFQsS0FBSzhlLFNBQVNsZixJQUFJaWYsaUJBRTZDLElBQTVEekwsSUFBSXhSLE9BQU93QyxPQUFPLGtCQUFrQjJhLGFBQWFDLE9BQXdCLENBQ2xGLE1BQU1DLFFBQVUsQ0FDZCxDQUFDLDJDQUE2Q0QsT0FBUSxZQUVsREwsaUJBQWlCTyxzQkFBc0IsQ0FBRTlMLElBQUs2TCxTQUN0RCxDQUNGLENBR0EsdUJBQWFFLEVBQVksVUFBVyxJQUFLLGFBQ2QsSUFBZE4sWUFDVHpMLElBQU1wVCxLQUFLOGUsU0FBU2xmLElBQUlpZixZQUUxQixNQUFNSSxRQUFVLENBQUMsRUFDakIsSUFBSUcsTUFBTyxFQUlYLE9BSEtoTSxJQUFJaU0sY0FBY3JmLEtBQUtzRyxLQUFNLFlBQ2hDOFksS0FBTzlVLGNBQWNnVixnQkFFZmxNLElBQUl4UixNQUFNd0MsS0FBSyxpQkFBaUJyRCxNQUN0QyxJQUFLLFdBQ0hrZSxRQUFRLHVDQUF3QyxFQUNoRE4saUJBQWlCWSxvQkFBb0IsQ0FBRW5NLElBQUtnTSxLQUFNSCxRQUFTTyxTQUFTLElBQ3BFLE1BQ0YsSUFBSyxVQUNILENBQ0UsTUFBTTNGLE1BQVEsQ0FBRSxDQUFDbUYsT0FBUTVMLElBQUl4UixNQUFNd0MsS0FBSyxpQkFBaUIyYSxhQUFhQyxPQUFPbmIsTUFDN0U4YSxpQkFBaUJjLGtCQUFrQixDQUFFck0sSUFBS3lHLE1BQU91RixLQUFNSCxRQUFTTyxTQUFTLEdBQzNFLEVBR04sQ0FHQSx3QkFBYUUsRUFBYSxVQUFXLElBQUssTUFBTyxNQUFPLGFBSXRELFFBSHlCLElBQWRiLFlBQ1R6TCxJQUFNcFQsS0FBSzhlLFNBQVNsZixJQUFJaWYsaUJBRXVELElBQXRFekwsSUFBSXhSLE9BQU93QyxPQUFPLGtCQUFrQjJhLGFBQWFDLE9BQU9XLFVBQ2pFLE9BQVF2TSxJQUFJeFIsTUFBTXdDLEtBQUssaUJBQWlCckQsTUFDdEMsSUFBSyxXQUNILElBQUs2ZSxXQUFZLENBRWZBLFdBRGNwSixVQUFVL1IsU0FBUzJPLElBQUl4UixPQUFPd0MsT0FBTyxrQkFBa0IyYSxhQUFhQyxPQUFPVyxXQUN0RXhILGdCQUFnQjBILE9BQU9DLGFBQWUsSUFDM0QsQ0FDQSxHQUFJRixXQUFZLENBQ2QsTUFBTWhqQixZQUFjK2hCLGlCQUFpQm9CLFNBQVMzTSxJQUFJeFIsTUFBTXdDLEtBQUssaUJBQWlCNGIsV0FDOUUsS0FBTXBqQixpQkFBaUJ5aEIsY0FBZ0J6aEIsTUFBTUEsTUFBUUEsT0FBT3FqQixVQUFVTCxZQU1wRSxZQUxBblUsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sMEJBQTJCLENBQzFDOVosTUFBT0EsTUFBTTVELFFBS25CLE1BQU1pbUIsUUFBVSxDQUFDLEVBQ2pCLElBQUssTUFBTUQsU0FBUzVMLElBQUl4UixNQUFNd0MsS0FBSyxpQkFBaUIyYSxhQUFjLENBQ2hFLE1BQU1yRyxNQUFRbEMsVUFBVS9SLFNBQVMyTyxJQUFJeFIsTUFBTXdDLEtBQUssaUJBQWlCMmEsYUFBYUMsT0FBT1csV0FDckZqSCxNQUFNeUgsa0JBQWtCUCxZQUN4QlgsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0J0RyxNQUFNMEgsWUFDbkYsQ0FDQSxHQUFJOWQsT0FBT21FLEtBQUt3WSxTQUFTM2IsT0FDdkIsR0FBSThQLElBQUlpTSxjQUFjcmYsS0FBS3NHLEtBQU0sZ0JBQ3pCcVksaUJBQWlCTyxzQkFBc0IsQ0FBRTlMLElBQUs2TCxjQUMvQyxDQUNMLE1BQU1HLEtBQU85VSxjQUFjZ1YsZ0JBQ2QsSUFBVEYsTUFDRnBmLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFlLENBQzlCQyxTQUFVbkIsS0FDVnJlLEtBQU0sdUJBQ044ZCxVQUFXekwsSUFBSXpDLEdBQ2ZzTyxTQUdOLENBRUosQ0FDQSxNQUNGLElBQUssVUFDSCxDQUNFLE1BQU12RyxNQUFRbEMsVUFBVS9SLFNBQVMyTyxJQUFJeFIsT0FBT3dDLE9BQU8sa0JBQWtCMmEsYUFBYUMsT0FBT1csZ0JBQ3BFLElBQVZFLE1BQ1RuSCxNQUFNOEgsYUFBYVgsT0FBTyxRQUNLLElBQWZELFlBQ2hCbEgsTUFBTStILFVBQVViLFlBQVksR0FFOUIsTUFBTVgsUUFBVSxDQUNkLENBQUMseUNBQTJDRCxNQUFRLGNBQWV0RyxNQUFNMEgsY0FFM0UsR0FBSTlkLE9BQU9tRSxLQUFLd1ksU0FBUzNiLE9BQ3ZCLEdBQUk4UCxJQUFJaU0sY0FBY3JmLEtBQUtzRyxLQUFNLGdCQUN6QnFZLGlCQUFpQk8sc0JBQXNCLENBQUU5TCxJQUFLNkwsY0FDL0MsQ0FDTCxNQUFNRyxLQUFPOVUsY0FBY2dWLGdCQUNkLElBQVRGLE1BQ0ZwZixLQUFLcWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QkMsU0FBVW5CLEtBQ1ZyZSxLQUFNLHVCQUNOOGQsVUFBV3pMLElBQUl6QyxHQUNmc08sU0FHTixDQUVKLE9BSUp4VCxHQUFHQyxjQUFjd1UsTUFBTSxpQ0FBa0MsQ0FBRWhnQixVQUFVLEdBRXpFLENBR0Esa0NBQWFnZixFQUF1QixJQUFLLFFBQVMsVUFBZSxDQUFDLEdBQ2hFLEdBQUk5TCxLQUFLeFIsT0FBT3dDLE9BQU8saUJBQWtCLENBQ3ZDLFFBQXdCLElBQWJzYyxTQUEwQixDQUNuQ0EsU0FBVyxDQUFDLEVBQ1osSUFBSyxNQUFNMUIsU0FBUzVMLEtBQUt4UixPQUFPd0MsT0FBTyxpQkFBaUIyYSxhQUFjLENBQ3BFLE1BQU1sYixXQUFhOGEsaUJBQWlCZ0MsV0FBVyxDQUFFOWMsS0FBTXVQLEtBQUt4UixPQUFPd0MsT0FBTyxpQkFBaUIyYSxhQUFhQyxPQUFPbmIsS0FBTStjLE9BQU8sSUFDNUhGLFNBQVMxQixPQUFTbmIsSUFDcEIsQ0FDRixDQUNBLE1BQU03QixRQUFVTSxPQUFPdWUsT0FBTyxDQUFFSCxVQUFZcGYsUUFBUUMsTUFBTTJhLFlBQVk5SSxJQUFJeFIsTUFBTXdDLEtBQUssaUJBQWtCOUMsUUFBUUMsTUFBTXVmLGFBQWE3QixVQUFVcmQsT0FBT3dDLE9BQU8sa0JBQW9CLENBQUMsRUFBRyxDQUFFMmMsa0JBQWtCLEtBQ3RNLElBQUssTUFBTS9CLFNBQVNoZCxRQUFRK2MsYUFDdEIvYyxRQUFRK2MsYUFBYUMsT0FBT1csWUFDOUIzZCxRQUFRK2MsYUFBYUMsT0FBT1csVUFBWW5KLFVBQVUvUixTQUFTekMsUUFBUStjLGFBQWFDLE9BQU9XLFlBRzNGM2QsUUFBUWdmLG1CQUFvQixFQUM1QixJQUFLLE1BQU1oQyxTQUFTaGQsUUFBUStjLGtCQUMyQixJQUExQy9jLFFBQVErYyxhQUFhQyxPQUFPVyxZQUNyQzNkLFFBQVFnZixtQkFBb0IsR0FJaEMsT0FEQS9CLFFBQVEsOENBQWdEamQsUUFBUWdmLGtCQUN4RGhmLFFBQVFqQixNQUNkLElBQUssV0FHSCxHQUZBaUIsUUFBUWlmLFdBQVksRUFDcEJqZixRQUFRa2YsV0FBWSxFQUNoQmxmLFFBQVFnZixrQkFBbUIsQ0FDN0IsSUFBSUcsVUFBWSxFQUNaQyxTQUFXLEVBQ2YsSUFBSyxNQUFNcEMsU0FBU2hkLFFBQVErYyxhQUN0Qi9jLFFBQVErYyxhQUFhQyxPQUFPVyxVQUFVc0IsVUFDeENFLFlBQ1NuZixRQUFRK2MsYUFBYUMsT0FBT1csVUFBVXVCLFdBQy9DRSxXQUdBRCxVQUFZLElBQTJCLFFBQXJCbmYsUUFBUXFmLFVBQW9DLElBQWJELFVBQXVDLFFBQXJCcGYsUUFBUXFmLFVBQzdFcmYsUUFBUWlmLFdBQVksRUFFcEJqZixRQUFRa2YsV0FBWSxDQUV4QixDQUNBakMsUUFBUSxzQ0FBd0NqZCxRQUFRaWYsVUFDeERoQyxRQUFRLHNDQUF3Q2pkLFFBQVFrZixVQUN4RCxNQUNGLElBQUssVUFDSCxHQUFJbGYsUUFBUWdmLGtCQUFtQixDQUU3QixHQURBaGYsUUFBUXNmLE9BQVEsRUFDWnRmLFFBQVF1ZixTQUFVLENBRXBCdmYsUUFBUXdmLFVBQVlDLE1BQU1DLEtBQUssSUFBS0MsVUFBVTNmLFFBQVF3ZixVQUFVOWEsS0FBSXJFLEdBQUtzRSxTQUFTdEUsRUFBRXVmLE9BQU8sR0FBSSxPQUFPaFQsUUFBUWxJLEtBQUlyRSxHQUFLLElBQU1BLElBQzdILE1BQU13ZixjQUFnQixDQUFDLEVBQ3ZCN2YsUUFBUThmLG1CQUFvQixFQUM1QixJQUFLLE1BQU05QyxTQUFTaGQsUUFBUStjLGFBQ3RCL2MsUUFBUStjLGFBQWFDLE9BQU9XLFVBQVVvQyxTQUN4Q0YsY0FBYzdmLFFBQVErYyxhQUFhQyxPQUFPVyxVQUFVcEosY0FBZ0I1UCxTQUFTa2IsY0FBYzdmLFFBQVErYyxhQUFhQyxPQUFPVyxVQUFVcEosZUFBaUIsRUFBRyxJQUFNLEdBRXpKdlUsUUFBUStjLGFBQWFDLE9BQU9nRCxZQUFjaGdCLFFBQVErYyxhQUFhQyxPQUFPaUQsYUFDeEVqZ0IsUUFBUThmLG1CQUFvQixHQUdoQzdDLFFBQVEsOENBQWdEamQsUUFBUThmLG1CQUM5QixJQUE5QjlmLFFBQVFrZ0Isb0JBQTZELElBQTlCbGdCLFFBQVFtZ0Isb0JBQzdDbmdCLFFBQVE4ZixtQkFDVjlmLFFBQVFtZ0IsbUJBQW9CLEVBQzVCbEQsUUFBUSw4Q0FBZ0RqZCxRQUFRbWdCLG9CQUVoRW5nQixRQUFRa2dCLG1CQUFvQixFQUM1QmpELFFBQVEsOENBQWdEamQsUUFBUWtnQixvQkFHcEUsTUFBTUUsS0FBT3RkLEtBQUthLE9BQU9yRCxPQUFPbUUsS0FBS29iLGdCQUdyQyxHQUZBN2YsUUFBUXFnQixpQkFBa0IsRUFDMUJyZ0IsUUFBUXNnQixXQUFhdGlCLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ3BDa2lCLEtBQU8sRUFDVCxJQUFLLE1BQU1wRCxTQUFTaGQsUUFBUStjLGFBQWMsQ0FDeEMsSUFBSXdELGNBQWUsRUFDZkMsV0FBWSxFQUNaeGdCLFFBQVErYyxhQUFhQyxPQUFPVyxVQUFVcEosZUFBaUI2TCxNQUFnQyxJQUF4QlAsY0FBY08sTUFDL0VHLGNBQWUsRUFDTnZnQixRQUFRK2MsYUFBYUMsT0FBT1csVUFBVXBKLGVBQWlCNkwsT0FDNURwZ0IsUUFBUWtnQixtQkFBcUJsZ0IsUUFBUStjLGFBQWFDLE9BQU9pRCxZQUVsRGpnQixRQUFRbWdCLG9CQUFzQm5nQixRQUFRK2MsYUFBYUMsT0FBT2lELFdBRG5FTSxjQUFlLEdBS2ZDLFdBQVksRUFDWnhnQixRQUFRcWdCLGlCQUFrQixFQUMxQnJnQixRQUFRc2YsT0FBUSxJQUdwQnRmLFFBQVErYyxhQUFhQyxPQUFPeUQsU0FBV0YsYUFDdkN2Z0IsUUFBUStjLGFBQWFDLE9BQU9zQyxNQUFRa0IsVUFDcEN2RCxRQUFRLHlDQUEyQ0QsTUFBUSxhQUFldUQsYUFDMUV0RCxRQUFRLHlDQUEyQ0QsTUFBUSxVQUFZd0QsVUFDbkVELGVBQWlCQyxZQUNmeGdCLFFBQVErYyxhQUFhQyxPQUFPaUQsV0FDMUJqZ0IsUUFBUStjLGFBQWFDLE9BQU8wRCxXQUM5QjFnQixRQUFRc2dCLFdBQWF0aUIsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXdCLENBQzVEMWQsS0FBTTBuQixTQUFTMUIsT0FBT3BpQixNQUFNNUQsT0FHOUJnSixRQUFRc2dCLFdBQWF0aUIsS0FBS0MsS0FBS3lXLE9BQU8scUJBQXNCLENBQzFEMWQsS0FBTTBuQixTQUFTMUIsT0FBT3BpQixNQUFNNUQsT0FHdkJnSixRQUFRK2MsYUFBYUMsT0FBTzBELFdBQ2pDMWdCLFFBQVErYyxhQUFhQyxPQUFPZ0QsVUFDOUJoZ0IsUUFBUXNnQixXQUFhdGlCLEtBQUtDLEtBQUt5VyxPQUFPLG9CQUFxQixDQUN6RDFkLEtBQU0wbkIsU0FBUzFCLE9BQU9waUIsTUFBTTVELE9BRzlCZ0osUUFBUXNnQixXQUFhdGlCLEtBQUtDLEtBQUt5VyxPQUFPLHVCQUF3QixDQUM1RDFkLEtBQU0wbkIsU0FBUzFCLE9BQU9waUIsTUFBTTVELE9BSWhDZ0osUUFBUXNnQixXQUFhdGlCLEtBQUtDLEtBQUt5VyxPQUFPLHFCQUFzQixDQUMxRDFkLEtBQU0wbkIsU0FBUzFCLE9BQU9waUIsTUFBTTVELE9BSXBDLENBRUZpbUIsUUFBUSw0Q0FBOENqZCxRQUFRcWdCLGVBQ2hFLEtBQU8sQ0FFTCxNQUFNTSxzQkFBd0IzaUIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEseUJBQ3hEb0MsUUFBUXdmLFVBQVU1UyxNQUFLLENBQUN4UCxFQUFHd2pCLEtBQ3pCLEdBQUk1Z0IsUUFBUStjLGFBQWEzZixHQUFHdWdCLFVBQVVwSixhQUFldlUsUUFBUStjLGFBQWE2RCxHQUFHakQsVUFBVXBKLGFBQ3JGLE9BQVEsRUFDSCxHQUFJdlUsUUFBUStjLGFBQWEzZixHQUFHdWdCLFVBQVVwSixhQUFldlUsUUFBUStjLGFBQWE2RCxHQUFHakQsVUFBVXBKLGFBQzVGLE9BQU8sRUFDRixHQUFJb00sc0JBQXVCLENBQ2hDLEdBQUkzZ0IsUUFBUStjLGFBQWEzZixHQUFHdWdCLFVBQVVrRCxlQUFpQjdnQixRQUFRK2MsYUFBYTZELEdBQUdqRCxVQUFVa0QsZUFDdkYsT0FBUSxFQUNILEdBQUk3Z0IsUUFBUStjLGFBQWEzZixHQUFHdWdCLFVBQVVrRCxlQUFpQjdnQixRQUFRK2MsYUFBYTZELEdBQUdqRCxVQUFVa0QsZUFDOUYsT0FBTyxDQUVYLEtBQU8sSUFBSTdnQixRQUFRK2MsYUFBYTNmLEdBQUd1Z0IsVUFBVTFHLFNBQVdqWCxRQUFRK2MsYUFBYTZELEdBQUdqRCxVQUFVMUcsU0FDeEYsT0FBUSxFQUNILEdBQUlqWCxRQUFRK2MsYUFBYTNmLEdBQUd1Z0IsVUFBVTFHLFNBQVdqWCxRQUFRK2MsYUFBYTZELEdBQUdqRCxVQUFVMUcsU0FDeEYsT0FBTyxDQUNULENBQ0EsT0FBTyxLQUVULE1BQU02SixVQUFZOWdCLFFBQVF3ZixVQUFVbGUsT0FDcEMsSUFBSStELE9BQVMsRUFDYixNQUFNakksRUFBSTRDLFFBQVErYyxhQUFhL2MsUUFBUXdmLFVBQVUsSUFDakQsR0FBS3BpQixFQUFFMmpCLE9BU0wxYixRQUFVLE9BUlYsS0FBT0EsT0FBU3liLFVBQVd6YixTQUFVLENBQ25DLE1BQU11YixFQUFJNWdCLFFBQVErYyxhQUFhL2MsUUFBUXdmLFVBQVVuYSxTQUNqRCxHQUFJakksRUFBRXVnQixVQUFVcEosZUFBaUJxTSxFQUFFakQsVUFBVXBKLGVBQWlCb00sc0JBQXdCdmpCLEVBQUV1Z0IsVUFBVWtELGlCQUFtQkQsRUFBRWpELFVBQVVrRCxlQUFpQnpqQixFQUFFdWdCLFVBQVUxRyxXQUFhMkosRUFBRWpELFVBQVUxRyxVQUFXLENBQ2hNNVIsU0FDQSxLQUNGLENBQ0YsQ0FJRnJGLFFBQVFzZixNQUFRamEsT0FBUyxFQUN6QixJQUFLLElBQUkyYixFQUFJLEVBQUdBLEVBQUlGLFVBQVdFLElBQUssQ0FDbEMsSUFBSVAsVUFBVyxFQUNYbkIsT0FBUSxFQUNSMEIsR0FBSzNiLFNBQ1BvYixVQUFXLEVBQ1huQixNQUFRdGYsUUFBUXNmLE9BRWxCLE1BQU10QyxNQUFRaGQsUUFBUXdmLFVBQVV3QixHQUNoQ2hoQixRQUFRK2MsYUFBYUMsT0FBT3lELFNBQVdBLFNBQ3ZDemdCLFFBQVErYyxhQUFhQyxPQUFPc0MsTUFBUUEsTUFDcENyQyxRQUFRLHlDQUEyQ0QsTUFBUSxhQUFleUQsU0FDMUV4RCxRQUFRLHlDQUEyQ0QsTUFBUSxVQUFZc0MsS0FDekUsQ0FDQXRmLFFBQVFxZ0IsaUJBQWtCLEVBQzFCcEQsUUFBUSw2Q0FBOEMsQ0FDeEQsQ0FDQUEsUUFBUSxrQ0FBb0NqZCxRQUFRc2YsS0FDdEQsRUFHSixNQUFNN0UsV0FBYXdHLGVBQWV0RSxpQkFBaUJ1RSxnQkFBZ0I5UCxJQUFJeFIsTUFBTXdDLEtBQUssaUJBQWlCckQsTUFBT2lCLFNBQzFHaWQsUUFBUS9MLFFBQVV1SixXQUNackosSUFBSXhTLE9BQU9xZSxRQUNuQixDQUNGLENBR0EsNkJBQWFrRSxFQUFrQixVQUFXLFVBQ3hDLE1BQU0vUCxJQUFNcFQsS0FBSzhlLFNBQVNsZixJQUFJaWYsV0FDMUJ6TCxLQUFLeFIsT0FBT3dDLE9BQU8sd0JBQ2Z1YSxpQkFBaUJPLHNCQUFzQixDQUFFOUwsSUFBSzZMLFNBRXhELENBRUEscUJBQWFtRSxFQUFVLElBQUssVUFDMUIsTUFBTUMsVUFBWSxDQUNoQnRLLFdBQVl1SyxRQUFRdkssV0FDcEJ0QixhQUFjNkwsUUFBUTVMLE1BQ3RCN0QsU0FBV3lQLFFBQVExbUIsTUFBTWlYLFVBQVl5UCxRQUFRMW1CLE1BQU1BLE1BQU1pWCxTQUN6RDBQLFVBQVUsRUFDVnhwQixPQUFTcVosSUFBSXhSLE9BQU93QyxPQUFPLGlCQUFpQm1kLFdBQVksR0FFMUQsT0FBUStCLFFBQVF2aUIsTUFDZCxJQUFLLGlCQUNIc2lCLFVBQVVqSyxlQUFpQmtLLFFBQVEva0IsSUFDbkM4a0IsVUFBVUUsU0FBWW5RLElBQUl4UixPQUFPd0MsT0FBTyxpQkFBaUJtZixXQUFZLEVBQ3JFLE1BQ0YsSUFBSyxZQUNIRixVQUFVRyxVQUFZRixRQUFRL2tCLElBQzlCOGtCLFVBQVVFLFNBQVluUSxJQUFJeFIsT0FBT3dDLE9BQU8saUJBQWlCbWYsV0FBWSxFQUNyRSxNQUNGLElBQUssUUFDSEYsVUFBVTFZLE1BQVEyWSxRQUFRM1ksTUFDMUIwWSxVQUFVRSxVQUFhblEsSUFBSXhSLE9BQU93QyxPQUFPLGlCQUFpQm1mLFdBQVksS0FBV0QsUUFBUUcsU0FDekYsTUFDRixJQUFLLE9BQ0hKLFVBQVUxYSxLQUFPMmEsUUFBUTNhLEtBQ3pCMGEsVUFBVUUsVUFBYW5RLElBQUl4UixPQUFPd0MsT0FBTyxpQkFBaUJtZixXQUFZLEtBQVdELFFBQVFHLFNBRzdGLE9BQU9qTixVQUFVckQsT0FBT2tRLFVBQzFCLENBR0Esd0JBQWFLLEVBQWEsSUFBSyxNQUFPLEtBQU0sU0FBYyxDQUFDLEdBQ3pELE1BQU1KLGNBQWdCM0UsaUJBQWlCZ0MsV0FBVyxDQUFFOWMsS0FBTStjLE9BQU8sSUFDakUsSUFBSzBDLFFBQ0gsTUFBTyxDQUFDLEVBRVYsTUFBTTVLLFlBQWNpRyxpQkFBaUJ5RSxTQUFTLENBQUVoUSxJQUFLa1EsVUFDakQ5RCxVQUNGOUcsTUFBTThHLFFBQVVBLGVBRVo5RyxNQUFNaUwsU0FBUyxDQUNuQkMsVUFBVSxJQUVaLE1BQU0zRSxRQUFVLENBQUMsRUFFakIsT0FEQUEsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0J0RyxNQUFNMEgsYUFDMUVuQixPQUNULENBR0EsZ0NBQWFNLEVBQXFCLFVBQVcsSUFBSyxLQUFNLFFBQVMsU0FBWSxTQUNsRCxJQUFkVixZQUNUekwsSUFBTXBULEtBQUs4ZSxTQUFTbGYsSUFBSWlmLFlBRzFCLE1BQU02QixTQUFXLENBQUMsRUFDbEIsSUFBSyxNQUFNMUIsU0FBUzVMLEtBQUt4UixPQUFPd0MsT0FBTyxpQkFBaUIyYSxhQUFjLENBQ3BFLE1BQU1sYixXQUFhOGEsaUJBQWlCZ0MsV0FBVyxDQUFFOWMsS0FBTXVQLEtBQUt4UixPQUFPd0MsT0FBTyxpQkFBaUIyYSxhQUFhQyxPQUFPbmIsS0FBTStjLE9BQU8sSUFDeEgvYyxPQUNGNmMsU0FBUzFCLE9BQVNuYixLQUV0QixDQUVBLE1BQU0yQyxLQUFPLENBQUMsRUFDZCxJQUFLLE1BQU13WSxTQUFTMEIsU0FDbEJsYSxLQUFLRyxTQUFTK1osU0FBUzFCLE9BQU90SCxPQUFTLEVBQUcsTUFBTyxFQUduRCxNQUFNN1QsV0FBYUQsU0FBUzJDLGFBQWEsQ0FBRUMsT0FFM0MsSUFBSXFkLE9BQVEsRUFDWixJQUFLLE1BQU03RSxTQUFTMEIsU0FBVSxDQUM1QixNQUFNaEosTUFBUS9RLFNBQVMrWixTQUFTMUIsT0FBT3RILE9BQVMsRUFBRyxJQUM3Q2dCLFlBQWNpRyxpQkFBaUJ5RSxTQUFTLENBQUVoUSxJQUFLa1EsUUFBUzVDLFNBQVMxQixTQUNuRVEsVUFDRjlHLE1BQU04RyxRQUFVQSxlQUVaOUcsTUFBTWlMLFNBQVMsQ0FDbkI5ZixLQUFNQSxLQUFLNlQsT0FDWG9NLFFBQW1CLElBQVZELFlBQXlCdGpCLEVBQ2xDcWpCLFNBQVVDLFFBRVo1RSxRQUFRLHlDQUEyQ0QsTUFBUSxjQUFnQnRHLE1BQU0wSCxhQUNqRnlELE9BQVEsQ0FDVixDQUVBLEdBQUl6USxJQUFJaU0sY0FBY3JmLEtBQUtzRyxLQUFNLGdCQUN6QnFZLGlCQUFpQk8sc0JBQXNCLENBQUU5TCxJQUFLNkwsY0FDL0MsQ0FDTCxNQUFNRyxLQUFPOVUsY0FBY2dWLGdCQUNkLElBQVRGLE1BQ0ZwZixLQUFLcWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QkMsU0FBVW5CLEtBQ1ZyZSxLQUFNLHVCQUNOOGQsVUFBV3pMLElBQUl6QyxHQUNmc08sU0FHTixDQUNGLENBR0EsOEJBQWFRLEVBQW1CLFVBQVcsSUFBSyxNQUFPLEtBQU0sUUFBUyxTQUFZLFNBQ3ZELElBQWRaLFlBQ1R6TCxJQUFNcFQsS0FBSzhlLFNBQVNsZixJQUFJaWYsWUFHMUIsSUFBSyxNQUFNRyxTQUFTbkYsV0FDK0QsSUFBdEV6RyxJQUFJeFIsT0FBT3dDLE9BQU8sa0JBQWtCMmEsYUFBYUMsT0FBT1csV0FBNkJILFFBQzlGbGQsT0FBT3VlLE9BQU81QixjQUFlTixpQkFBaUIrRSxZQUFZLENBQUV0USxJQUFLNEwsTUFBT25iLEtBQU1nVyxNQUFNbUYsT0FBUVEsV0FFNUYvVCxHQUFHQyxjQUFjd1UsTUFBTSxpQ0FBa0MsQ0FBRWhnQixVQUFVLElBR3JFa1QsSUFBSWlNLGNBQWNyZixLQUFLc0csS0FBTSxnQkFDekJxWSxpQkFBaUJPLHNCQUFzQixDQUFFOUwsSUFBSzZMLFdBQ2xDLElBQVRHLE1BQ1RwZixLQUFLcWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QkMsU0FBVW5CLEtBQ1ZyZSxLQUFNLHVCQUNOOGQsVUFBV3pMLElBQUl6QyxHQUNmc08sU0FHTixDQUdBLDJCQUFhOEUsRUFBZ0IsVUFBVyxJQUFLLGFBQ2xCLElBQWRsRixZQUNUekwsSUFBTXBULEtBQUs4ZSxTQUFTbGYsSUFBSWlmLFlBRTFCLE1BQU1JLFFBQVUsQ0FBQyxFQUNqQixJQUFLLE1BQU1ELFNBQVNuRixZQUNaOEUsaUJBQWlCcUYsU0FBUyxDQUFFaEYsTUFBT25iLEtBQU1nVyxNQUFNbUYsT0FBUUMsVUFHL0QsTUFBTUcsTUFBUWhNLElBQUlpTSxjQUFjcmYsS0FBS3NHLEtBQU0sV0FBb0JnRSxjQUFjZ1YsZUFpQjdFLE9BZkloZCxPQUFPbUUsS0FBS3dZLFNBQVMzYixPQUFTLElBQzVCOFAsSUFBSWlNLGNBQWNyZixLQUFLc0csS0FBTSxnQkFDekJxWSxpQkFBaUJPLHNCQUFzQixDQUFFOUwsSUFBSzZMLFdBQ2xDLElBQVRHLE9BQ1RwZixLQUFLcWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QkMsU0FBVW5CLEtBQ1ZyZSxLQUFNLHVCQUNOOGQsVUFBV3pMLElBQUl6QyxHQUNmc08sZ0JBR0ksSUFBSVAsU0FBUWhCLFNBQVd1RyxXQUFXdkcsUUFBUyxTQUk3Q3RLLElBQUl4UixNQUFNd0MsS0FBSyxpQkFBaUJyRCxNQUN0QyxJQUFLLFdBQ0g0ZCxpQkFBaUJZLG9CQUFvQixDQUFFbk0sSUFBS2dNLEtBQU1ILFVBQ2xELE1BQ0YsSUFBSyxVQUNITixpQkFBaUJjLGtCQUFrQixDQUFFck0sSUFBS3lHLE1BQU91RixLQUFNSCxVQUc3RCxDQUdBLHFCQUFhK0UsRUFBVSxNQUFPLEtBQU0sVUFDbEMsTUFBTS9XLGFBQWUwUixpQkFBaUJnQyxXQUFXLENBQUU5YyxLQUFNK2MsT0FBTyxJQUM1RDNULFNBQ0ZnUyxRQUFRLHlDQUEyQ0QsTUFBUSxjQUFnQi9SLE9BQU8vQyxVQUNsRitVLFFBQVEseUNBQTJDRCxNQUFRLGFBQWUvUixPQUFPaVgsU0FDakZqRixRQUFRLHlDQUEyQ0QsTUFBUSxTQUFXL1IsT0FBT2tYLE1BQVEsR0FDckZsRixRQUFRLHlDQUEyQ0QsTUFBUSxZQUFjL1IsT0FBT21YLFNBQVcsRUFDM0ZuRixRQUFRLHlDQUEyQ0QsTUFBUSxlQUFpQi9SLE9BQU95VixhQUFjLEVBQ2pHekQsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0IvUixPQUFPK0QsVUFBVyxFQUM3RmlPLFFBQVEseUNBQTJDRCxNQUFRLGFBQWUvUixPQUFPK0QsVUFBVyxFQUVoRyxDQUdBLDRCQUFhcVQsRUFBaUIsU0FBc0IsVUFDbEQsUUFBd0IsSUFBYjNELFNBQTBCLENBQ25DQSxTQUFXLENBQUMsRUFDWixJQUFLLE1BQU0xQixTQUFTaGQsUUFBUStjLGFBQWMsQ0FDeEMsTUFBTWxiLFdBQWE4YSxpQkFBaUJnQyxXQUFXLENBQUU5YyxLQUFNN0IsUUFBUStjLGFBQWFDLE9BQU9uYixLQUFNK2MsT0FBTyxJQUNoR0YsU0FBUzFCLE9BQVNuYixJQUNwQixDQUNGLENBRUEsTUFBTXlnQixZQUFjLENBQUMsRUFDZkMsaUJBQW1CLENBQUMsRUFDMUIsSUFBSyxNQUFNdkYsU0FBUzBCLFNBQVUsQ0FDNUIsSUFBSThELFNBQVcsR0FDZixPQUFROUQsU0FBUzFCLE9BQU95RixTQUFTbmhCLFFBQy9CLEtBQUssRUFDSCxHQUFJb2QsU0FBUzFCLE9BQU95RixTQUFTLEtBQU96a0IsS0FBS3NHLEtBQUtxSyxHQUFJLENBQ2hENlQsU0FBVzlELFNBQVMxQixPQUFPeUYsU0FBUyxHQUNwQyxLQUNGLENBRUYsS0FBSyxFQUNIRCxTQUFXeGtCLEtBQUtzRyxLQUFLcUssR0FDckIsTUFDRixRQUNFM08sUUFBUStjLGFBQWFDLE9BQU8wRixTQUFVLEVBQ0osTUFBOUJoRSxTQUFTMUIsT0FBTzlVLFlBQ2xCcWEsaUJBQWlCdkYsT0FBUzBCLFNBQVMxQixPQUFPbmIsTUFJL0IsS0FBYjJnQixXQUNHbGlCLE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLOG9CLFlBQWFFLFlBQ3JERixZQUFZRSxVQUFZLENBQUMsR0FFM0JGLFlBQVlFLFVBQVV4RixPQUFTaGQsUUFBUStjLGFBQWFDLE9BQU9uYixLQUMzRDdCLFFBQVErYyxhQUFhQyxPQUFPMEYsUUFBVUYsU0FFMUMsQ0FFQSxNQUFNRyxhQUFlcmlCLE9BQU91ZSxPQUFPLENBQUVILFVBQVkxZSxTQUUzQytELFNBQVcsQ0FDZm5FLE1BQU8sQ0FDTHdDLEtBQU0sQ0FDSixnQkFBaUJwQyxVQUdyQmtSLGNBUGlCK1AsZUFBZXRFLGlCQUFpQnVFLGdCQUFnQmxoQixRQUFRakIsTUFBTzRqQixlQVNsRixPQUFRNWUsU0FBU25FLE9BQU93QyxPQUFPLGtCQUFrQnJELE1BQy9DLElBQUssVUFDSGdGLFNBQVMyTSxRQUFVcFEsT0FBT3VlLE9BQU85YSxTQUFTMk0sU0FBVyxDQUFDLEVBQUcsQ0FBRW9CLE1BQU85VCxLQUFLQyxLQUFLQyxTQUFTLDBCQUNyRixNQUNGLElBQUssV0FDSDZGLFNBQVMyTSxRQUFVcFEsT0FBT3VlLE9BQU85YSxTQUFTMk0sU0FBVyxDQUFDLEVBQUcsQ0FBRW9CLE1BQU94UixPQUFPSixPQUFPd2UsVUFBVSxHQUFHOWpCLE1BQU01RCxPQUd2RyxNQUFNb2EsVUFBWWxOLFlBQVlpTixPQUFPcE4sVUFFL0JrWixRQUFVLENBQUMsRUFDakIsSUFBSyxNQUFNRCxTQUFTdUYsdUJBQ1o1RixpQkFBaUJxRixTQUFTLENBQUVoRixNQUFPbmIsS0FBTTBnQixpQkFBaUJ2RixPQUFRQyxVQUV0RTNjLE9BQU9tRSxLQUFLd1ksU0FBUzNiLE9BQVMsU0FDMUJxYixpQkFBaUJPLHNCQUFzQixDQUFFOUwsSUFBSzZMLFFBQVN5QixXQUUvRCxJQUFLLE1BQU1rRSxVQUFVTixZQUNmTSxTQUFXNWtCLEtBQUtzRyxLQUFLcUssSUFDdkIzUSxLQUFLcWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QnZmLEtBQU0scUJBQ053ZixTQUFVcUUsT0FDVi9GLFVBQVd6TCxJQUFJekMsR0FDZmtKLE1BQU95SyxZQUFZTSxVQVV6QixPQU5JdGlCLE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLOG9CLFlBQWF0a0IsS0FBS3NHLEtBQUtxSyxXQUN4RGdPLGlCQUFpQm9GLGVBQWUsQ0FDcEMzUSxJQUNBeUcsTUFBT3lLLFlBQVl0a0IsS0FBS3NHLEtBQUtxSyxNQUcxQnlDLEdBQ1QsQ0FFQSx5QkFBYXlSLEVBQWMsTUFBTyxNQUNoQyxHQUFJelIsSUFBSXhSLE9BQU93QyxPQUFPLGtCQUFrQjJhLGFBQWFDLE9BQU8wRixRQUFrQixDQUM1RSxNQUFNcGUsS0FBT3RHLEtBQUs4a0IsTUFBTWxsQixJQUFJd1QsSUFBSXhSLE1BQU13QyxLQUFLLGlCQUFpQjJhLGFBQWFDLE9BQU8wRixTQUNoRixHQUFJMWtCLEtBQUtzRyxLQUFLMkUsT0FBUzNFLE9BQVNBLEtBQUs3QyxPQUFRLENBQzNDLE1BQU13YixRQUFVLENBQ2QsQ0FBQyx5Q0FBMkNELE1BQVEsYUFBYSxHQUVuRSxHQUFJNUwsSUFBSWlNLGNBQWNyZixLQUFLc0csS0FBTSxnQkFDekJxWSxpQkFBaUJPLHNCQUFzQixDQUFFOUwsSUFBSzZMLGNBQy9DLENBQ0wsTUFBTUcsS0FBTzlVLGNBQWNnVixnQkFDZCxJQUFURixNQUNGcGYsS0FBS3FnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJDLFNBQVVuQixLQUNWcmUsS0FBTSx1QkFDTjhkLFVBQVd6TCxJQUFJekMsR0FDZnNPLFNBR04sQ0FDRixDQUNGLENBQ0YsQ0FFQSxzQkFBYThGLENBQVc5bEIsT0FDdEJBLE1BQU1FLGlCQUNOLE1BQU02bEIsT0FBUy9sQixNQUFNSSxjQUNmd2YsVUFBWW1HLE9BQU96bEIsUUFBUSxvQkFBb0JFLFFBQVFvZixVQUN2RHRnQixJQUFNeW1CLE9BQU92bEIsUUFBUWxCLElBQzNCLElBQUl6RixNQUFRa3NCLE9BQU92bEIsUUFBUTNHLE1BQzNCLEdBQUkrbEIsV0FBYXRnQixJQUFLLENBQ3BCLEdBQUl5bUIsT0FBT3ZULFVBQVV3VCxTQUFTLG9CQUFzQmpsQixLQUFLc0csS0FBSzJFLEtBQzVELE9BRUYsTUFBTW1JLElBQU1wVCxLQUFLOGUsU0FBU2xmLElBQUlpZixXQUM5QixRQUF5RCxJQUE5Q3pMLElBQUl4UixPQUFPd0MsT0FBTyxtQkFBbUI3RixNQUF3QjZVLElBQUlpTSxjQUFjcmYsS0FBS3NHLEtBQU0sVUFBVyxNQUN6RixJQUFWeE4sUUFDVEEsT0FBU3NhLElBQUl4UixNQUFNd0MsS0FBSyxpQkFBaUI3RixNQUUzQyxNQUFNMGdCLFFBQVUsQ0FDZCxDQUFDLDRCQUE4QjFnQixLQUFNekYsT0FFdkMsT0FBUXlGLEtBQ04sSUFBSyxvQkFDSDBnQixRQUFRLCtDQUFpRG5tQixNQUN6RCxNQUNGLElBQUssb0JBQ0htbUIsUUFBUSwrQ0FBaURubUIsWUFHdkQ2bEIsaUJBQWlCTyxzQkFBc0IsQ0FBRTlMLElBQUs2TCxTQUN0RCxDQUNGLENBQ0YsQ0FFQSxxQkFBYWlHLENBQVVqbUIsT0FDckJBLE1BQU1FLGlCQUNOLE1BQU02bEIsT0FBUy9sQixNQUFNSSxjQUNmUSxPQUFTbWxCLE9BQU92bEIsUUFBUUksT0FDeEJnZixVQUFZbUcsT0FBT3psQixRQUFRLG9CQUFvQkUsUUFBUW9mLFVBQ3ZERyxNQUFRZ0csT0FBT3ZsQixRQUFRdWYsTUFDN0IsR0FBSUgsVUFBVyxDQUNiLE1BQU16TCxJQUFNcFQsS0FBSzhlLFNBQVNsZixJQUFJaWYsV0FDOUIsUUFBbUIsSUFBUnpMLElBQ1QsUUFBcUIsSUFBVjRMLFlBQTRGLElBQTVENUwsSUFBSXhSLE9BQU93QyxPQUFPLGtCQUFrQjJhLGFBQWFDLE9BQXdCLENBQ2xILE1BQU1waUIsWUFBY2dNLFNBQVN3SyxJQUFJeFIsTUFBTXdDLEtBQUssaUJBQWlCMmEsYUFBYUMsT0FBT25iLEtBQUtzTCxNQUFNLEtBQUssSUFDakcsSUFBS3ZTLFFBQVVBLE1BQU15aUIsY0FBY3JmLEtBQUtzRyxLQUFNLFVBRTVDLFlBREFtRixHQUFHQyxjQUFjd1UsTUFBTSw4QkFBK0IsQ0FBRWhnQixVQUFVLElBR3BFLE9BQVFMLFFBQ04sSUFBSyxpQkFDSDhlLGlCQUFpQmtHLGFBQWEsQ0FDNUI3RixNQUNBNUwsTUFFRixNQUNGLElBQUssY0FDSHVMLGlCQUFpQm9GLGVBQWUsQ0FDOUIzUSxJQUNBeUcsTUFBTyxDQUFFLENBQUNtRixPQUFRNUwsSUFBSXhSLE1BQU13QyxPQUFPLGlCQUFpQjJhLGFBQWFDLE9BQU9uYixRQUUxRSxNQUNGLElBQUssV0FDSDhhLGlCQUFpQmUsWUFBWSxDQUMzQlYsTUFDQWEsTUFBT21GLE9BQU92bEIsUUFBUW9nQixNQUN0QkQsV0FBWW9GLE9BQU92bEIsUUFBUW1nQixXQUMzQnhNLE1BRUYsTUFDRixJQUFLLGNBQ0h1TCxpQkFBaUJDLFdBQVcsQ0FDMUJJLE1BQ0E1TCxNQUVGLE1BQ0YsSUFBSyxPQUNIdUwsaUJBQWlCUSxXQUFXLENBQzFCSCxNQUNBNUwsTUFJUixNQUFPLFFBQWdFLElBQXJEQSxJQUFJeFIsT0FBT3dDLE9BQU8sa0JBQWtCMmEsYUFBOEIsQ0FDbEYsSUFBSW9HLE1BQU8sRUFDWCxJQUFLLE1BQU1uRyxTQUFTNUwsSUFBSXhSLE1BQU13QyxLQUFLLGlCQUFpQjJhLGFBQWMsQ0FFaEUsVUFEb0JuVyxTQUFTd0ssSUFBSXhSLE1BQU13QyxLQUFLLGlCQUFpQjJhLGFBQWFDLE9BQU9uYixLQUFLc0wsTUFBTSxLQUFLLEtBQ3ZGa1EsY0FBY3JmLEtBQUtzRyxLQUFNLFVBQVcsQ0FDNUM2ZSxNQUFPLEVBQ1AsS0FDRixDQUNGLENBQ0EsSUFBS0EsS0FFSCxZQURBMVosR0FBR0MsY0FBY3dVLE1BQU0sOEJBQStCLENBQUVoZ0IsVUFBVSxJQUdwRSxPQUFRTCxRQUNOLElBQUssWUFDSCxHQUE2QyxhQUF6Q3VULElBQUl4UixNQUFNd0MsS0FBSyxpQkFBaUJyRCxLQUFxQixDQUN2RCxNQUFNa2UsUUFBVSxDQUFDLEVBQ2pCTixpQkFBaUJZLG9CQUFvQixDQUFFbk0sSUFBSzZMLFNBQzlDLENBQ0EsTUFDRixJQUFLLFNBQ0hOLGlCQUFpQm9HLFVBQVU5bEIsT0FHakMsQ0FFSixDQUNGLENBRUEsOEJBQWFtbUIsQ0FBbUI5ckIsSUFBS21qQixLQUFNelUsTUFDekMsTUFBTXFkLFVBQVksQ0FDaEJDLEdBQUl0bEIsS0FBS3NHLEtBQUsyRSxNQUVoQixJQUFLLE1BQU0rVCxTQUFTMWxCLElBQUlzSSxPQUFPd0MsT0FBTyxrQkFBa0IyYSxhQUFjLENBQ3BFLE1BQU1uaUIsWUFBY2dNLFNBQVN0UCxJQUFJc0ksTUFBTXdDLEtBQUssaUJBQWlCMmEsYUFBYUMsT0FBT25iLEtBQUtzTCxNQUFNLEtBQUssSUFDakdrVyxVQUFVckcsT0FBU3BpQixPQUFPeWlCLGNBQWNyZixLQUFLc0csS0FBTSxZQUFhLENBQ2xFLENBQ0ErZSxVQUFVRSxJQUFNampCLE9BQU9KLE9BQU9takIsV0FBV3BzQixRQUFPMnBCLEdBQUtBLElBQUd0ZixPQUFTLEVBQ2pFLElBQUssTUFBTS9FLE9BQU84bUIsVUFDWEEsVUFBVTltQixLQUdia2UsS0FBS3JhLEtBQUssZ0JBQWtCN0QsS0FBS2luQixTQUZqQy9JLEtBQUtyYSxLQUFLLGlCQUFtQjdELEtBQUtpbkIsU0FLdEMvSSxLQUFLQyxHQUFHLFFBQVMsMkNBQTRDaUMsaUJBQWlCdUcsU0FBU3RwQixLQUFLOEcsT0FDNUYrWixLQUFLQyxHQUFHLFFBQVMsb0NBQXFDaUMsaUJBQWlCdUcsU0FBU3RwQixLQUFLOEcsT0FDckYrWixLQUFLQyxHQUFHLFFBQVMscUNBQXNDaUMsaUJBQWlCb0csVUFBVW5wQixLQUFLOEcsT0FDdkYrWixLQUFLQyxHQUFHLFFBQVMsOEJBQStCaUMsaUJBQWlCb0csVUFBVW5wQixLQUFLOEcsTUFDbEYsQ0FFQSxxQkFBYXFkLENBQVUwRixZQUNyQixPQUFJQSxXQUFXbGQsTUFBTSxlQUNKdkksS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTUMsVUFBVUgsZUFBZSxJQUFPLEtBRW5FQSxXQUFXMWEsUUFBUSxNQUFRLFFBQ2hCbkMsU0FBUzZjLFlBRWpCemxCLEtBQUtvUCxPQUFPeFAsSUFBSTZsQixhQUFlLElBQ3hDLENBRUEsdUJBQWE5RSxFQUFZLEtBQU0sT0FBVSxFQUFJLFlBQWdCLEtBQzNELE1BQU1wWSxNQUFRMUUsS0FBSzBFLE1BQU0sb0ZBQ3pCLEdBQUlBLE1BQU8sQ0FDVCxNQUFNWixXQUFhWSxNQUFNdkIsT0FBTzZlLEdBQUssSUFBSW5iLGNBQWN5RSxNQUFNLEtBQ3ZEdUksTUFBUS9RLFNBQVNnQixVQUFVdkYsTUFBS3lqQixHQUFLQSxFQUFFdGQsTUFBTSxnQkFBaUIsRUFBRyxJQUNqRXdRLFdBQWFwUixVQUFVdkYsTUFBS3lqQixHQUFLQSxFQUFFdGQsTUFBTSxXQUN6Q2lYLFFBQVU3WCxVQUFVMU8sUUFBTzRzQixHQUFXLE1BQU5BLElBQVd2aUIsT0FBUyxFQUdwRG9kLFNBQVcsQ0FDZjNmLEtBQU13SCxNQUFNdkIsT0FBT3ZCLEVBQ25CbEgsSUFBS2dLLE1BQU12QixPQUFPMkssRUFDbEIrRixNQUNBcUIsV0FBK0MsT0FBakNBLFlBQWMsSUFBSXRFLFdBQXFCK0IsVUFBVXNQLGdCQUFnQkMsUUFBV2hOLFdBQWFwUyxTQUFTb1MsV0FBWSxJQUErRCxZQUF4RC9ZLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUEwQzRXLFVBQVVzUCxnQkFBZ0JDLFFBQVV2UCxVQUFVc1AsZ0JBQWdCclAsUUFDclErSSxTQUtGLElBSEtqWCxNQUFNdkIsT0FBTzVILEdBQUs0bUIsYUFBK0IsS0FBaEJBLGNBQ3BDemQsTUFBTXZCLE9BQU81SCxFQUFJNG1CLFlBQWMsS0FFN0J6ZCxNQUFNdkIsT0FBTzVILEVBQUcsQ0FDbEIsTUFBTXhDLFlBQWMraEIsaUJBQWlCb0IsU0FBU3hYLE1BQU12QixPQUFPNUgsRUFBRXdpQixPQUFPLEVBQUdyWixNQUFNdkIsT0FBTzVILEVBQUVrRSxPQUFTLElBQy9GLElBQUsxRyxNQUNILE9BQU8sS0FFVDhqQixTQUFTOWpCLE1BQVFBLE1BQ2pCOGpCLFNBQVMrRCxTQUFXemtCLEtBQUs4a0IsTUFBTTdyQixRQUFPZ3RCLElBQU1BLEVBQUVoYixNQUFReVYsU0FBUzlqQixNQUFNeWlCLGNBQWM0RyxFQUFHLFlBQVd2ZixLQUFJdWYsSUFBYyxDQUFFdFYsR0FBSXNWLEVBQUV0VixHQUFJbE4sT0FBUXdpQixFQUFFeGlCLFdBQ3JJaWQsU0FBUytELFNBQVNuaEIsT0FBUyxJQUM3Qm9kLFNBQVMrRCxTQUFXL0QsU0FBUytELFNBQVN4ckIsUUFBT0wsR0FBS0EsRUFBRTZLLFNBQVFpRCxLQUFJOU4sR0FBS0EsRUFBRStYLEtBQ3RDLElBQTdCK1AsU0FBUytELFNBQVNuaEIsU0FDcEJvZCxTQUFTK0QsU0FBVyxDQUFDLFVBQVcsU0FHdEMsS0FBTyxDQUNMLE1BQU03bkIsWUFBY21mLGtCQUFrQjVJLFNBQ3RDLElBQUt2VyxNQUVILE9BREE2TyxHQUFHQyxjQUFjc0ssS0FBSyw2QkFBOEIsQ0FBRTlWLFVBQVUsSUFDekQsS0FFVHdnQixTQUFTOWpCLE1BQVFBLE1BQ1pvRCxLQUFLc0csS0FBSzJFLE1BR2J5VixTQUFTK0QsU0FBV3prQixLQUFLOGtCLE1BQU03ckIsUUFBT2d0QixJQUFNQSxFQUFFaGIsTUFBUXlWLFNBQVM5akIsTUFBTXlpQixjQUFjNEcsRUFBRyxZQUFXdmYsS0FBSXVmLElBQWMsQ0FBRXRWLEdBQUlzVixFQUFFdFYsR0FBSWxOLE9BQVF3aUIsRUFBRXhpQixXQUNySWlkLFNBQVMrRCxTQUFTbmhCLE9BQVMsSUFDN0JvZCxTQUFTK0QsU0FBVy9ELFNBQVMrRCxTQUFTeHJCLFFBQU9MLEdBQUtBLEVBQUU2SyxTQUFRaUQsS0FBSTlOLEdBQUtBLEVBQUUrWCxLQUN0QyxJQUE3QitQLFNBQVMrRCxTQUFTbmhCLFNBQ3BCb2QsU0FBUytELFNBQVcsQ0FBQyxVQUFXLFdBTnBDL0QsU0FBUytELFNBQVcsQ0FBQ3prQixLQUFLc0csS0FBS3FLLEdBVW5DLENBS0EsT0FKQStQLFNBQVM3YyxLQUFPNmMsU0FBUzlqQixNQUFNeUQsS0FBTyxJQUFNcWdCLFNBQVMzZixLQUFPLElBQU0yZixTQUFTbmlCLEtBQU9taUIsU0FBU2hKLE1BQVEsRUFBSSxJQUFNZ0osU0FBU2hKLE1BQVNnSixTQUFTaEosTUFBUSxFQUFJLEtBQU9nSixTQUFTaEosTUFBUSxLQUF1QixJQUFmcUIsV0FBbUIsS0FBUUEsV0FBYSxJQUFNcFMsU0FBU29TLFdBQVksSUFBTSxJQUM3UDJILFNBQVNwQyxTQUFZb0MsU0FBUzlqQixpQkFBaUJ5aEIsY0FBZ0JxQyxTQUFTOWpCLE1BQU1rWSxRQUFRQyxJQUFNMkwsU0FBUzlqQixNQUFNMGhCLFNBQzNHb0MsU0FBU3hXLFVBQVksSUFDckJ3VyxTQUFTd0QsU0FBVyxJQUNaeEQsU0FBUzNmLE1BQ2YsSUFBSyxpQkFJSCxHQUhBMmYsU0FBU3hXLFVBQVlJLGNBQWM0Yix1QkFBdUJ4RixTQUFTbmlCLE1BQU00bkIsT0FBUyxJQUNsRnpGLFNBQVN3RCxTQUFXNVosY0FBYzRiLHVCQUF1QnhGLFNBQVNuaUIsTUFBTXdCLE9BQVMsSUFDakYyZ0IsU0FBUzBELFNBQVcxRCxTQUFTOWpCLGlCQUFpQnloQixjQUFnQnFDLFNBQVM5akIsTUFBTUEsTUFBUThqQixTQUFTOWpCLE9BQU82QixRQUFRMm5CLGdCQUFnQjFGLFNBQVNuaUIsTUFBTXpGLE9BQVMsRUFDMUgsTUFBdkI0bkIsU0FBU3hXLFVBQ1gsT0FBTyxLQUVULE1BQ0YsSUFBSyxZQUNILE9BQVF3VyxTQUFTbmlCLEtBQ2YsSUFBSyxNQUNIbWlCLFNBQVN4VyxVQUFZbEssS0FBS0MsS0FBS0MsU0FBUyxhQUN4Q3dnQixTQUFTd0QsU0FBV2xrQixLQUFLQyxLQUFLQyxTQUFTLGFBQ3ZDLE1BQ0YsSUFBSyxNQUNId2dCLFNBQVN4VyxVQUFZbEssS0FBS0MsS0FBS0MsU0FBUyxZQUN4Q3dnQixTQUFTd0QsU0FBV2xrQixLQUFLQyxLQUFLQyxTQUFTLGVBQ3ZDLE1BQ0YsUUFDRSxPQUFPLEtBRVh3Z0IsU0FBUzBELFNBQVcxRCxTQUFTOWpCLGlCQUFpQnloQixjQUFnQnFDLFNBQVM5akIsTUFBTUEsTUFBUThqQixTQUFTOWpCLE9BQU82QixRQUFRQyxRQUFRZ2lCLFNBQVNuaUIsTUFBTXpGLE9BQVMsRUFDN0ksTUFDRixJQUFLLFFBQ0gsSUFBSzhuQixNQUFPLENBQ1YsTUFBTXlGLGFBQWdCM0YsU0FBUzlqQixpQkFBaUJ5aEIsY0FBZ0JxQyxTQUFTOWpCLE1BQU1BLE1BQVE4akIsU0FBUzlqQixPQUFPMHBCLGFBQWE1RixTQUFTbmlCLElBQUssU0FDOUg4bkIsT0FBTy9pQixTQUNUb2QsU0FBUy9WLE1BQVEwYixPQUFPLEdBQ3hCM0YsU0FBU3hXLFVBQVltYyxPQUFPLEdBQUduYyxVQUMvQndXLFNBQVN3RCxTQUFXbUMsT0FBTyxHQUFHbmMsVUFDOUJ3VyxTQUFTK0MsU0FBWTRDLE9BQU8sR0FBRzVuQixPQUFPOEssWUFBWXpQLE9BQVEsRUFDMUQ0bUIsU0FBUzBELFFBQVVpQyxPQUFPLEdBQUd2dEIsTUFDN0I0bkIsU0FBU2dDLFdBQWEyRCxPQUFPLEdBQUdyVixRQUNoQzBQLFNBQVMxUCxRQUFVcVYsT0FBTyxHQUFHclYsUUFFakMsQ0FDQSxNQUNGLElBQUssT0FDSCxJQUFLNFAsTUFBTyxDQUNWLE1BQU1oUSxZQUFlOFAsU0FBUzlqQixpQkFBaUJ5aEIsY0FBZ0JxQyxTQUFTOWpCLE1BQU1BLE1BQVE4akIsU0FBUzlqQixPQUFPMHBCLGFBQWE1RixTQUFTbmlCLElBQUssVUFDakksR0FBSXFTLE1BQU10TixPQUFRLENBQ2hCb2QsU0FBUy9YLEtBQU9pSSxNQUFNLEdBQ3RCOFAsU0FBU3hXLFVBQVkwRyxNQUFNLEdBQUcxRyxVQUM5QndXLFNBQVN3RCxTQUFXdFQsTUFBTSxHQUFHMUcsVUFDN0J3VyxTQUFTZ0MsV0FBYTlSLE1BQU0sR0FBR25TLE9BQU84SyxZQUFZL08sT0FBUSxFQUMxRGttQixTQUFTNkYsVUFBVyxFQUNwQixNQUFNdlAsUUFBVXBHLE1BQU0sR0FBR25TLE9BQU9rTSxNQUFNaUcsTUFBTSxHQUFHOUUscUJBQXVCLGFBQWUsUUFBUTZFLEdBQzdGLEdBQUlxRyxRQUFTLENBQ1gsTUFBTXJNLE9BQVMrVixTQUFTOWpCLGlCQUFpQnloQixjQUFnQnFDLFNBQVM5akIsTUFBTUEsTUFBUThqQixTQUFTOWpCLE9BQU9nVSxNQUFNeE8sTUFBS3hKLEdBQUtBLEVBQUUrWCxLQUFPcUcsVUFDekgwSixTQUFTeUQsS0FBTyxDQUFDeFosTUFBTTNSLE1BQ3ZCMG5CLFNBQVMwRCxRQUFVelosTUFBTTdSLE1BQ3pCNG5CLFNBQVMrQyxTQUFZOVksTUFBTWxNLE9BQU84SyxZQUFZelAsT0FBUSxDQUN4RCxDQUNGLENBQ0YsRUFHSixPQUFPNG1CLFFBQ1QsQ0FDQSxPQUFPLElBQ1QsQ0FFQSxzQkFBT3dDLENBQWlCbmlCLE1BQ3RCLE9BQVFBLE1BQ04sSUFBSyxVQUNILE1BQU8sbURBQ1QsSUFBSyxjQUNMLElBQUssY0FDTCxJQUFLLFdBQ0gsTUFBTyxvREFFWCxPQUFPLElBQ1QsQ0FFQSwrQkFBYXlsQixDQUFvQnhrQixTQUcvQixJQUFLMmMsaUJBQWlCdUUsZ0JBQWdCbGhCLFFBQVFqQixNQUM1QyxPQUFPLEtBR1QsSUFBSTBsQixPQUFTbmtCLE9BQU91ZSxPQUFPLENBQ3pCOWYsS0FBTSxHQUNOd2lCLFVBQVUsRUFDVm1ELG9CQUFvQixFQUNwQjFGLG1CQUFtQixFQUNuQk8sVUFBVSxFQUNWb0YsWUFBWSxFQUNaNUgsYUFBYyxDQUFDLEVBQ2Z5QyxVQUFXLElBQ1Z4ZixTQUVILE9BQVF5a0IsT0FBTzFsQixNQUNiLElBQUssVUFDSDBsQixPQUFTbmtCLE9BQU91ZSxPQUFPLENBQ3JCMEMsVUFBVSxFQUNWakMsT0FBTyxFQUNQZSxpQkFBaUIsRUFDakJILG1CQUFtQixFQUNuQkMsbUJBQW1CLEVBQ25CTCxtQkFBbUIsRUFDbkI4RSxtQkFBbUIsR0FDbEJILFFBQ0gsTUFDRixJQUFLLGNBQ0wsSUFBSyxjQUNMLElBQUssV0FDSEEsT0FBU25rQixPQUFPdWUsT0FBTyxDQUNyQlEsU0FBMkIsZ0JBQWhCb0YsT0FBTzFsQixLQUF5QixNQUF5QixnQkFBaEIwbEIsT0FBTzFsQixLQUF5QixNQUFRLEdBQzVGaWYsVUFBVyxHQUNYaUIsV0FBVyxFQUNYQyxXQUFXLEVBQ1gyRixXQUFXLEdBQ1ZKLFFBQ0hBLE9BQU8xbEIsS0FBTyxXQUlsQixNQUFNMmYsU0FBVyxDQUFDLEVBQ2xCLElBQUlsZCxNQUFRLEVBQ1osSUFBSyxNQUFNNkQsVUFBVXJGLFFBQVE4a0IsZUFBZ0IsQ0FDM0MsTUFBTTlILE1BQVEsSUFBTTNYLE9BQ2R4RCxXQUFhOGEsaUJBQWlCZ0MsV0FBVyxDQUFFOWMsS0FBTTdCLFFBQVE4a0IsZUFBZXpmLFFBQVN1WixPQUFPLEVBQU1vRixZQUFhUyxPQUFPekcsV0FBYSxLQUNySSxJQUFLbmMsS0FDSCxPQUFPLEtBRVQsR0FBb0IsYUFBaEI0aUIsT0FBTzFsQixLQUFxQixDQUM5QixHQUF5QixLQUFyQjBsQixPQUFPekcsV0FBb0J5RyxPQUFPekcsWUFBY25jLEtBQUtqSCxNQUFNeUQsS0FJN0QsT0FEQW9MLEdBQUdDLGNBQWN3VSxNQUFNLDRDQUE2QyxDQUFFaGdCLFVBQVUsSUFDekUsS0FIUHVtQixPQUFPekcsVUFBWW5jLEtBQUtqSCxNQUFNeUQsSUFLbEMsQ0FjQSxHQWJBcWdCLFNBQVMxQixPQUFTbmIsS0FDbEI0aUIsT0FBTzFILGFBQWFDLE9BQVMsQ0FDM0JuYixLQUFNQSxLQUFLQSxLQUNYa2pCLFNBQTJCLGFBQWhCTixPQUFPMWxCLEtBQ2xCMmpCLFNBQVMsRUFDVHhhLFVBQVdyRyxLQUFLcUcsVUFDaEJnYSxTQUFVcmdCLEtBQUtxZ0IsU0FDZkUsUUFBU3ZnQixLQUFLdWdCLFFBQ2RELEtBQU0sR0FDTnpCLFlBQVksRUFDWlYsV0FBVyxFQUNYdUUsVUFBVSxHQUdMLFlBRENFLE9BQU8xbEIsS0FFWDBsQixPQUFPMUgsYUFBYUMsT0FBUzFjLE9BQU91ZSxPQUFPLENBQ3pDb0IsV0FBc0IsSUFBVnplLE1BQ1ppZixVQUFVLEVBQ1ZuQixPQUFPLEdBQ05tRixPQUFPMUgsYUFBYUMsUUFLM0J5SCxPQUFPakYsVUFBVTFuQixLQUFLa2xCLE9BQ3RCeGIsT0FDRixDQUNBLEdBQW9CLFlBQWhCaWpCLE9BQU8xbEIsTUFBdUQsSUFBakN1QixPQUFPbUUsS0FBS2lhLFVBQVVwZCxPQUVyRCxPQURBbUksR0FBR0MsY0FBY3dVLE1BQU0sMkNBQTRDLENBQUVoZ0IsVUFBVSxJQUN4RSxLQUdULFVBRE91bUIsT0FBT0ssZUFDVjltQixLQUFLc0csS0FBSzJFLEtBQ1osT0FBTzBULGlCQUFpQjBGLGdCQUFnQixDQUFFM0QsU0FBVTFlLFFBQVN5a0IsU0FDeEQsQ0FDTCxNQUFNckgsS0FBTzlVLGNBQWNnVixlQUMzQixPQUFhLElBQVRGLEtBRUssTUFFVHBmLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFlLENBQUV2ZixLQUFNLG9CQUFxQndmLFNBQVVuQixLQUFNcGQsUUFBU3lrQixVQUMvRSxFQUNULENBQ0YsRUNoOUJLLE1BQU1PLGNBQ1gsV0FBQWpmLENBQWE4TCxTQUFXLEtBQU1vVCxhQUFjLEdBQzFDdmtCLEtBQUttUixTQUFXQSxTQUNoQm5SLEtBQUt1a0IsWUFBY0EsV0FDckIsQ0FFQSxzQkFBSUMsR0FDRixPQUFPbG5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUNuQyxDQUVBLFdBQUl1bkIsR0FDRixPQUFLemtCLEtBQUtxQixlQUNOeEQsSUFBY21DLEtBQUswa0IsV0FDckIxa0IsS0FBSzBrQixTQUE2QixjQUFsQjFrQixLQUFLcUIsVUFFaEJyQixLQUFLMGtCLFVBSmUsSUFLN0IsQ0FFQSxXQUFJRCxDQUFTN1ksR0FDWDVMLEtBQUswa0IsU0FBVzlZLENBQ2xCLENBRUEsWUFBSXZLLEdBRUYsT0FES3JCLEtBQUsya0IsWUFBVzNrQixLQUFLMmtCLFVBQVlybkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFDekQ4QyxLQUFLMmtCLFNBQ2QsQ0FFQSxZQUFJdGpCLENBQVV1SyxHQUNaNUwsS0FBSzJrQixVQUFZL1ksQ0FDbkIsQ0FFQSxTQUFJMVIsR0FDRixPQUFLOEYsS0FBS21SLFNBQ0g1QixXQUFXcUIsZ0JBQWdCNVEsS0FBS21SLFVBRFosSUFFN0IsQ0FFQSxTQUFJSCxHQUNGLE9BQUtoUixLQUFLOUYsTUFDSHFWLFdBQVcwQixnQkFBZ0JqUixLQUFLbVIsVUFEZixJQUUxQixDQUVBLFFBQUlsTCxHQUNGLE9BQUtqRyxLQUFLcVUsT0FDSHJVLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUk4QyxLQUFLcVUsUUFEUixJQUUzQixDQUVBLFVBQUl1USxHQUNGLE9BQU81a0IsS0FBS2lHLElBQ2QsQ0FFQSxrQkFBSTRlLEdBQ0YsTUFBTyxJQUFJdm5CLEtBQUtzRyxLQUFLa2hCLFFBQ3ZCLENBRUEsVUFBSUMsR0FDRixPQUFJL2tCLEtBQUtnbEIsWUFBb0JobEIsS0FBS2dsQixZQUMzQmhsQixLQUFLaWxCLFdBQ2QsQ0FNQSxlQUFJRCxHQWNGLE9BYktobEIsS0FBS2tsQixlQUNKbGxCLEtBQUttbEIsV0FDUG5sQixLQUFLa2xCLGFBQWUzVixXQUFXMEIsZ0JBQWdCalIsS0FBS21sQixhQUVwRG5sQixLQUFLa2xCLGFBQWVsbEIsS0FBSzZrQixlQUFlTyxNQUNwQ3BsQixLQUFLa2xCLGFBQ1BsbEIsS0FBS21sQixXQUFhLEdBQUdubEIsS0FBS2tsQixhQUFhdFksTUFBTXFCLE1BQU1qTyxLQUFLa2xCLGFBQWFqWCxLQUdyRWpPLEtBQUtrbEIsYUFBZSxPQUluQmxsQixLQUFLa2xCLFlBQ2QsQ0FFQSxlQUFJRCxHQUtGLE9BSktqbEIsS0FBS3FsQixlQUNKcmxCLEtBQUtnbEIsWUFBYWhsQixLQUFLcWxCLGFBQWVybEIsS0FBS2dsQixZQUFZOXFCLE1BQ3REOEYsS0FBS3FsQixhQUFlOVYsV0FBV3FCLGdCQUFnQjVRLEtBQUttbEIsYUFFcERubEIsS0FBS3FsQixZQUNkLENBRUEsYUFBSUMsR0FDRixPQUFLdGxCLEtBQUtnbEIsYUFBZ0JobEIsS0FBS2lsQixZQUN4QmpsQixLQUFLbWxCLFdBRHVDLElBRXJELENBRUEsYUFBSUksR0FDRixTQUFLdmxCLEtBQUtnbEIsY0FBZ0JobEIsS0FBS2lsQixZQUVqQyxDQUVBLGFBQUlLLENBQVcxWixHQUNiNUwsS0FBS21sQixXQUFhdlosQ0FDcEIsQ0FFQSxVQUFJK1gsR0FDRixPQUFPM2pCLEtBQUs5RixNQUFNc3JCLGdCQUFnQnhsQixLQUFLcVUsT0FDekMsQ0FFQSxhQUFJb1IsR0FDRixNQUFNL2YsSUFBTTZKLFdBQVc0QyxtQkFBbUJuUyxLQUFLc2xCLFdBQy9DLE9BQUk1ZixLQUNHLG9DQUNULENBRUEsUUFBSXBQLEdBQ0YsT0FBSTBKLEtBQUtnUixNQUFjaFIsS0FBS2dSLE1BQU0xYSxLQUMzQjBKLEtBQUs5RixNQUFNNUQsSUFDcEIsQ0FFQSxjQUFJb3ZCLEdBQ0YsT0FBSzFsQixLQUFLK2tCLE9BQ0gva0IsS0FBSytrQixPQUFPenVCLEtBRE0sT0FFM0IsQ0FFQSxZQUFJcXZCLEdBQ0YsTUFBTWpnQixJQUFNNkosV0FBVzRDLG1CQUFtQm5TLEtBQUttUixVQUMvQyxPQUFJekwsS0FDRyxvQ0FDVCxDQUVBLFNBQU1rZ0IsQ0FBSy9WLFFBQVNFLE9BQVMsTUFDM0IsTUFBTThWLFlBQWMsQ0FBQyxFQUNyQixJQUFJN1YsUUFDQWhRLEtBQUs5RixPQUNQMnJCLFlBQVkzckIsTUFBUThGLEtBQUs5RixNQUNyQjhGLEtBQUtnUixRQUNQNlUsWUFBWTdVLE1BQVFoUixLQUFLZ1IsTUFBTW5DLFVBRWpDbUIsUUFBVXhNLFlBQVl5TSxXQUFXNFYsY0FFakM3VixRQUFVeE0sWUFBWXlNLGFBR3hCLE1BRU01TSxTQUFXLENBQ2ZPLE1BSFc1RCxLQUFLOUYsTUFBTTBKLEtBQU81RCxLQUFLOUYsTUFBTTBKLEtBQU90RyxLQUFLc0csTUFHekNxSyxHQUNYK0IsUUFDQUQsT0FDQVMsUUFBU1gsU0FJVCxDQUFDLFNBQVUsYUFBYTdNLFNBQVMxRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxlQUUzRG1HLFNBQVNDLFFBQVVFLFlBQVlzaUIscUJBQXFCLE9BRWhDLGNBQWxCOWxCLEtBQUtxQixXQUEwQmdDLFNBQVNFLE9BQVEsR0FFcERDLFlBQVlpTixPQUFPcE4sVUFBVWdFLE1BQUtxSixLQUN6QkEsS0FFWCxFQzVKRixTQUFTcVYsU0FBVWxxQixJQUFLekYsT0FDdEIsR0FBSXlGLElBQUkyTyxXQUFXLE1BQ2pCLE9BSUYsR0FEZ0IsQ0FBQyxVQUNMeEgsU0FBU25ILEtBQ25CLE9BSUYsTUFEZSxDQUFDLFdBQVksWUFDakJtSCxTQUFTbkgsS0FDWHpGLE1BQU1zbkIsYUFHUnRuQixLQUNULENBRU8sTUFBTTR2QixxQkFBcUIxQixjQUNoQyxXQUFBamYsQ0FBYThMLFNBQVcsS0FBTThVLFFBQVUsQ0FBQyxFQUFHM21CLFFBQVUsQ0FBQyxHQUNyRGpELE1BQ0U4VSxjQUMrQixJQUF4QjdSLFFBQVFpbEIsYUFDWDJCLFFBQVE1bUIsUUFBUWlsQixjQUd0QjBCLFFBQVFFLFVBQVlGLFFBQVFFLFdBQWEsR0FDekNubUIsS0FBS2ltQixRQUFVQSxRQUNmam1CLEtBQUtWLFFBQVVBLFFBQ1gybUIsUUFBUXZoQixXQUFhNUksTUFBTUksT0FBTytwQixRQUFRdmhCLGFBQzVDMUUsS0FBS1YsUUFBUThtQixZQUFjbHFCLE9BQU8rcEIsUUFBUXZoQixXQUV4Q3VoQixRQUFRNVAsYUFBZXZhLE1BQU1JLE9BQU8rcEIsUUFBUTVQLGVBQzlDclcsS0FBS1YsUUFBUSttQixjQUFnQm5xQixPQUFPK3BCLFFBQVE1UCxhQUU5Q3JXLEtBQUtzbUIsTUFBUSxDQUFDLENBQ2hCLENBRUEsV0FBSTdCLEdBQ0YsWUFBdUMsSUFBekJ6a0IsS0FBS1YsUUFBUW1sQixRQUN2QnlCLFFBQVFsbUIsS0FBS1YsUUFBUW1sQixTQUNyQnBvQixNQUFNb29CLE9BQ1osQ0FFQSxjQUFJcE8sR0FDRixZQUEwQyxJQUE1QnJXLEtBQUtWLFFBQVErVyxXQUN2QnJXLEtBQUtWLFFBQVErVyxXQUNidkMsVUFBVXNQLGdCQUFnQnJQLE9BQ2hDLENBRUEsWUFBSXJQLEdBQ0YsWUFBd0MsSUFBMUIxRSxLQUFLVixRQUFRb0YsU0FDdkIxRSxLQUFLVixRQUFRb0YsU0FDYixDQUNOLENBRUEsaUJBQUk2aEIsR0FDRixPQUFLdm1CLEtBQUtpbUIsUUFBUTNaLFNBQ1hpRCxXQUFXcUIsZ0JBQWdCNVEsS0FBS2ltQixRQUFRM1osVUFEWixJQUVyQyxDQUVBLHFCQUFJa2EsR0FDRixTQUNFeG1CLEtBQUtzbUIsTUFBTUcsWUFDVnptQixLQUFLMG1CLFNBQVNsSSxZQUFheGUsS0FBSzBtQixTQUFTbFEsU0FLOUMsQ0FFQSxrQkFBSW1RLEdBQ0YsT0FBSTNtQixLQUFLc21CLE1BQU1HLFVBQ1R6bUIsS0FBS2ltQixRQUFRVyxRQUFVNW1CLEtBQUswbUIsU0FBU3JHLE9BQy9CdmtCLE1BQU1JLE9BQU84RCxLQUFLaW1CLFFBQVFXLFNBRTlCNW1CLEtBQUtpbUIsUUFBUVcsT0FEYjFxQixPQUFPOEQsS0FBS2ltQixRQUFRVyxRQUd0QjVtQixLQUFLaW1CLFFBQVFZLFFBQVU3bUIsS0FBSzBtQixTQUFTckgsT0FDL0J2akIsTUFBTUksT0FBTzhELEtBQUtpbUIsUUFBUVksU0FFOUI3bUIsS0FBS2ltQixRQUFRWSxPQURiM3FCLE9BQU84RCxLQUFLaW1CLFFBQVFZLFFBR25CLEVBRUYsSUFDVCxDQUVBLG1CQUFJQyxHQUNGLE9BQU85bUIsS0FBSzlGLE1BQU00c0IsZ0JBQWdCOW1CLEtBQUtpbUIsUUFBUUUsVUFDakQsQ0FFQSxzQkFBSVksR0FDRixPQUFPL21CLEtBQUs5RixNQUFNOHNCLG1CQUNoQmhuQixLQUFLaW1CLFFBQVFFLFVBQ2JubUIsS0FBS2ltQixRQUFRVyxPQUVqQixDQUVBLGNBQUlLLEdBQ0YsT0FBTyxJQUFJbmxCLEtBQUs5QixLQUFLaW1CLFFBQVFXLE9BQU83VSxZQUFZbkgsU0FBUyxDQUN2REMsVUFBVSxJQUNUcEksS0FDTCxDQUVBLDRCQUFJeWtCLEdBQ0YsT0FBT2xuQixLQUFLOUYsTUFBTWd0Qix5QkFBeUJsbkIsS0FBS2ltQixRQUFRRSxVQUMxRCxDQUVBLGtCQUFJZ0IsR0FDRixPQUFRbm5CLEtBQUs5RixNQUFNa3RCLHlCQUNyQixDQUVBLHFCQUFJQyxHQUVGLE9BQUlybkIsS0FBSzlGLE1BQU1vdEIsaUJBS2EsSUFBeEJ0bkIsS0FBSzJtQixrQkFHUDNtQixLQUFLaW1CLFFBQVFFLFdBSVAsSUFITm5tQixLQUFLOUYsTUFBTThzQixtQkFDVGhuQixLQUFLaW1CLFFBQVFFLFVBQ2JubUIsS0FBS2ltQixRQUFRVyxVQUdmNW1CLEtBQUtzbUIsTUFBTWlCLGtCQUFtQixHQUN2QixJQUlYLENBRUEsb0JBQUlDLEdBQ0YsR0FBSXhuQixLQUFLeW5CLGFBQWMsQ0FDckIsR0FBSXpuQixLQUFLMG5CLGFBQ1AsTUFBTyxHQUFHMW5CLEtBQUt5bkIsZ0JBQWdCbnFCLEtBQUtDLEtBQUtDLFNBQVMsaUJBRXBELEdBQUl3QyxLQUFLMm5CLFlBQ1AsTUFBTyxHQUFHM25CLEtBQUt5bkIsZ0JBQWdCbnFCLEtBQUtDLEtBQUtDLFNBQVMsZUFFdEQsQ0FDQSxPQUFPLElBQ1QsQ0FFQSw4QkFBSW9xQixHQUNGLE9BQUk1bkIsS0FBSzZuQixXQUNBdnFCLEtBQUtDLEtBQUt5VyxPQUFPLDhCQUErQixDQUNyRDVkLE1BQU80SixLQUFLNm5CLGFBR1QsSUFDVCxDQUVBLGtCQUFNQyxDQUFjeEIsT0FDbEIsT0FBUUEsT0FDTixJQUFLLHNCQUNIdG1CLEtBQUtzbUIsTUFBTXlCLHFCQUFzQixFQUNqQyxNQUVGLElBQUssNkJBQ0gvbkIsS0FBS3NtQixNQUFNQSxRQUFTLEVBQ2Z0bUIsS0FBS3FuQixvQkFBbUJybkIsS0FBS3NtQixNQUFNMEIsUUFBUyxHQUNqRCxNQUVGLElBQUssdUJBQ0dob0IsS0FBS2lvQixlQUNYLE1BRUYsSUFBSyw2QkFDSGpvQixLQUFLeW5CLG9CQUFzQixJQUFJM2xCLEtBQUssUUFBUVgsS0FBSyxDQUFFbUIsT0FBTyxLQUFTRyxNQUNuRXpDLEtBQUswbkIsY0FBZSxFQUNwQjFuQixLQUFLMm5CLGFBQWMsRUFDbkIzbkIsS0FBS2tvQixpQkFBbUJsb0IsS0FBSzlGLE1BQU1pdUIsb0JBQ2pDLEVBQ0Fub0IsS0FBS3luQixjQUVQem5CLEtBQUtzbUIsTUFBTThCLHVCQUF3QixFQUNuQ3BvQixLQUFLc21CLE1BQU0rQixtQkFBb0IsRUFDL0IsTUFFRixJQUFLLDRCQUNIcm9CLEtBQUt5bkIsb0JBQXNCLElBQUkzbEIsS0FBSyxRQUFRWCxLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BQ25FekMsS0FBSzBuQixjQUFlLEVBQ3BCMW5CLEtBQUsybkIsYUFBYyxFQUNuQjNuQixLQUFLa29CLGlCQUFtQmxvQixLQUFLOUYsTUFBTWl1QixvQkFDakMsRUFDQW5vQixLQUFLeW5CLGNBRVB6bkIsS0FBS3NtQixNQUFNOEIsdUJBQXdCLFFBQzdCcG9CLEtBQUtzb0Isa0JBQ1gsTUFFRixJQUFLLDBCQUNHdG9CLEtBQUs5RixNQUFNcXVCLGVBQWU3ekIsS0FBSzBGLE9BQU9DLG1CQUN0QzJGLEtBQUtzb0Isa0JBQ1gsTUFFRixJQUFLLGlCQUNIdG9CLEtBQUtzbUIsTUFBTWtDLHNCQUF1QixFQUNsQ3hvQixLQUFLNm5CLFdBQWEsRUFDbEIsTUFFRixJQUFLLHVCQUF3QixDQUMzQixJQUFJWSxhQUFlLEVBQ2R6b0IsS0FBSzlGLE1BQU1rdEIsNEJBQ2RxQixhQUFlLFFBQ1R6b0IsS0FBSzlGLE1BQU13dUIsaUNBRW5CMW9CLEtBQUtzbUIsTUFBTWtDLHNCQUF1QixFQUNsQyxNQUFNRyxtQkFBcUIzb0IsS0FBSzlGLE1BQU15dUIsbUJBQ2hDQyxTQUNKRCxtQkFBbUJyakIsS0FBS0EsS0FBS3VqQixZQUFZQyxZQUFjLEVBQ3JESCwwQkFDSUEsbUJBQW1CenFCLE9BQU8sQ0FDOUIsOEJBQStCMHFCLFNBQVdILGVBRzlDem9CLEtBQUs2bkIsV0FBYVksYUFDbEIsS0FDRixFQUVKLENBRUEsbUJBQU1NLEdBQ0ovb0IsS0FBS2dwQixZQUFhLEVBQ2xCaHBCLEtBQUswbUIsU0FBVyxJQUFJNVMsVUFDcEI5VCxLQUFLMG1CLFNBQVN4c0IsTUFBUThGLEtBQUttUixTQUMzQm5SLEtBQUswbUIsU0FBUzVGLFVBQVksTUFDMUI5Z0IsS0FBSzBtQixTQUFTclEsV0FDWnJXLEtBQUtWLFFBQVErbUIsZUFBaUJ2UyxVQUFVc1AsZ0JBQWdCclAsUUFDMUQvVCxLQUFLMG1CLFNBQVMzUixhQUFlL1UsS0FBS1YsUUFBUThtQixhQUFlLFFBQ25EcG1CLEtBQUswbUIsU0FBU3pGLFNBQVMsQ0FBRUMsVUFBVSxJQUN6Q2xoQixLQUFLc21CLE1BQU1HLFdBQVksRUFDdkJ6bUIsS0FBS3NtQixNQUFNMkMsMkJBQTZCanBCLEtBQUswbUIsU0FBU3JILE9BQ3REcmYsS0FBS3NtQixNQUFNNEMsZUFBZ0IsRUFDM0JscEIsS0FBS3NtQixNQUFNNkMsZ0JBQWlCLEVBQzVCbnBCLEtBQUtvcEIsUUFBVXBwQixLQUFLMm1CLGNBQ3RCLENBRUEsYUFBTTBDLEdBVUosR0FUQXJwQixLQUFLMG1CLFNBQVcsSUFBSTVTLFVBQ3BCOVQsS0FBSzBtQixTQUFTeHNCLE1BQVE4RixLQUFLbVIsU0FDM0JuUixLQUFLMG1CLFNBQVM1RixVQUFZLE1BQzFCOWdCLEtBQUswbUIsU0FBU3JRLFdBQ1pyVyxLQUFLVixRQUFRK21CLGVBQWlCdlMsVUFBVXNQLGdCQUFnQnJQLFFBQzFEL1QsS0FBSzBtQixTQUFTM1IsYUFBZS9VLEtBQUtWLFFBQVE4bUIsYUFBZSxRQUNuRHBtQixLQUFLMG1CLFNBQVN6RixTQUFTLENBQUVDLFVBQVUsSUFDekNsaEIsS0FBS3NtQixNQUFNRyxXQUFZLEVBQ3ZCem1CLEtBQUtzbUIsTUFBTTJDLDJCQUE2QmpwQixLQUFLMG1CLFNBQVNySCxPQUNqRHJmLEtBQUtxbkIsbUJBV0gsR0FBbUMsaUJBQXhCcm5CLEtBQUsybUIsZUFDckIzbUIsS0FBS3NtQixNQUFNNEMsZUFBZ0IsRUFDdkJscEIsS0FBS2ltQixRQUFRRSxXQUNmbm1CLEtBQUtvcEIsUUFBVXBwQixLQUFLOUYsTUFBTThzQixtQkFDeEJobkIsS0FBS2ltQixRQUFRRSxVQUNibm1CLEtBQUsybUIsZ0JBRUgzbUIsS0FBS29wQixRQUFVcHBCLEtBQUsybUIsaUJBQ3RCM21CLEtBQUtzbUIsTUFBTWdELHVCQUF3QixJQUdyQ3RwQixLQUFLb3BCLFFBQVVwcEIsS0FBSzJtQixvQkFFakIsR0FBSTNtQixLQUFLMG1CLFNBQVNsUSxTQUN2QnhXLEtBQUtzbUIsTUFBTTRDLGVBQWdCLEVBQzNCbHBCLEtBQUtvcEIsUUFBVXBwQixLQUFLOUYsTUFBTThzQixtQkFDeEJobkIsS0FBS2ltQixRQUFRRSxVQUNibm1CLEtBQUtpbUIsUUFBUVcsYUFFVixHQUFJNW1CLEtBQUtpbUIsUUFBUUUsVUFBVyxDQUNqQyxNQUFNampCLElBQU0sSUFBSXBCLEtBQUs5QixLQUFLMm1CLGdCQUFnQi9iLFNBQVMsQ0FDakQ4TSxVQUFVLElBQ1RqVixNQUNHUSxJQUFNakQsS0FBSzlGLE1BQU04c0IsbUJBQ3JCaG5CLEtBQUtpbUIsUUFBUUUsVUFDYm5tQixLQUFLaW1CLFFBQVFXLFFBRVgxakIsS0FBT0QsTUFDVGpELEtBQUtzbUIsTUFBTTRDLGVBQWdCLEVBQzNCbHBCLEtBQUtvcEIsUUFBVW5tQixJQUNmakQsS0FBS3NtQixNQUFNZ0QsdUJBQXdCLEVBRXZDLE9BMUNFdHBCLEtBQUtzbUIsTUFBTTBCLFFBQVMsRUFDaEJob0IsS0FBSzlGLE1BQU1vdEIsaUJBQ2J0bkIsS0FBS3NtQixNQUFNaUQscUJBQXNCLEVBQzVCdnBCLEtBQUswbUIsU0FBU3JILFNBQVFyZixLQUFLc21CLE1BQU0wQixRQUFTLElBRWpEaG9CLEtBQUtzbUIsTUFBTTRDLGVBQWdCLEVBQzNCbHBCLEtBQUtzbUIsTUFBTWtELGdCQUFpQixFQUM1QnhwQixLQUFLc21CLE1BQU1tRCxXQUFZLEVBQ3ZCenBCLEtBQUtzbUIsTUFBTW9ELFVBQVcsRUFDdEIxcEIsS0FBS29wQixRQUFVLENBa0NuQixDQUVBLGlCQUFNTyxHQUNKM3BCLEtBQUs0cEIsWUFBYyxJQUFJOW5CLEtBQUssR0FBRzlCLEtBQUsybUIsd0JBRTlCM21CLEtBQUs0cEIsWUFBWXpvQixLQUFLLENBQUVtQixPQUFPLFVBRS9CcEIsU0FBU2lDLGVBQWVuRCxLQUFLNHBCLGFBRW5DLE1BQU0zbUIsSUFBTWpELEtBQUs5RixNQUFNOHNCLG1CQUNyQmhuQixLQUFLaW1CLFFBQVFFLFVBQ2JubUIsS0FBS2ltQixRQUFRVyxRQUdYNW1CLEtBQUs0cEIsWUFBWW5uQixNQUFRUSxNQUMzQmpELEtBQUtzbUIsTUFBTWdELHVCQUF3QixHQUdyQ3RwQixLQUFLb3BCLFFBQVVobkIsS0FBS2MsSUFBSWxELEtBQUs0cEIsWUFBWW5uQixNQUFPUSxLQUNoRGpELEtBQUtzbUIsTUFBTTRDLGVBQWdCLENBQzdCLENBRUEsa0JBQU1qQixHQUtKLFNBSk1qb0IsS0FBSzlGLE1BQU0ydkIsU0FBUzdwQixLQUFLaW1CLFFBQVFFLFVBQVdubUIsS0FBS29wQixTQUVuRHBwQixLQUFLb3BCLFFBQVUsSUFBR3BwQixLQUFLc21CLE1BQU13RCxjQUFlLEdBQ2hEOXBCLEtBQUtzbUIsTUFBTWtELGdCQUFpQixFQUN4QnhwQixLQUFLOUYsTUFBTTZ2QixLQUFPLEVBUXBCLE9BUEEvcEIsS0FBS3NtQixNQUFNbUQsV0FBWSxFQUN2QnpwQixLQUFLc21CLE1BQU0rQixtQkFBb0IsRUFFL0Jyb0IsS0FBS3NtQixNQUFNb0QsVUFBVyxFQUN0QjFwQixLQUFLc21CLE1BQU0wRCxtQkFBb0IsT0FFL0JocUIsS0FBS3NtQixNQUFNMEIsUUFBUyxHQUlsQmhvQixLQUFLb3BCLFFBQVUsR0FDakJwcEIsS0FBS3NtQixNQUFNbUQsV0FBWSxFQUNuQnpwQixLQUFLOUYsTUFBTSt2QixnQkFDYmpxQixLQUFLc21CLE1BQU1vRCxVQUFXLEVBQ3RCMXBCLEtBQUtzbUIsTUFBTTRELFFBQVMsRUFDcEJscUIsS0FBS3NtQixNQUFNNkQscUJBQXNCLEVBQ2pDbnFCLEtBQUtzbUIsTUFBTTBCLFFBQVMsRUFDcEJob0IsS0FBS3NtQixNQUFNbUQsV0FBWSxJQUV2QnpwQixLQUFLc21CLE1BQU1vRCxVQUFXLEVBQ3RCMXBCLEtBQUtzbUIsTUFBTTRELFFBQVMsRUFDcEJscUIsS0FBS3NtQixNQUFNNkQscUJBQXNCLEVBQ2pDbnFCLEtBQUtzbUIsTUFBTTBCLFFBQVMsSUFHdEJob0IsS0FBS3NtQixNQUFNbUQsV0FBWSxFQUdyQnpwQixLQUFLOUYsTUFBTWt3QixjQUFnQnBxQixLQUFLOUYsTUFBTW13QixnQkFFeENycUIsS0FBS3NtQixNQUFNb0QsVUFBVyxFQUN0QjFwQixLQUFLc21CLE1BQU1tRCxXQUFZLEVBQ3ZCenBCLEtBQUtzbUIsTUFBTWdFLGlCQUFrQixFQUM3QnRxQixLQUFLc21CLE1BQU1pRSxvQkFBcUIsRUFDaEN2cUIsS0FBS3NtQixNQUFNNkQscUJBQXNCLEVBQ2pDbnFCLEtBQUtzbUIsTUFBTWtFLGlCQUFrQixFQUM3QnhxQixLQUFLc21CLE1BQU0wQixRQUFTLEVBRXhCLENBRUEsYUFBTXlDLEdBQ0p6cUIsS0FBSzBxQixTQUFXLElBQUk1VyxVQUNwQjlULEtBQUswcUIsU0FBU3h3QixNQUFROEYsS0FBS21SLFNBQzNCblIsS0FBSzBxQixTQUFTaFUsZUFBaUIsTUFDL0IxVyxLQUFLMHFCLFNBQVNyVSxXQUNaclcsS0FBS1YsUUFBUXFyQixlQUFpQjdXLFVBQVVzUCxnQkFBZ0JyUCxRQUMxRC9ULEtBQUswcUIsU0FBUzNWLGFBQWUvVSxLQUFLVixRQUFRc3JCLGFBQWUsUUFDbkQ1cUIsS0FBSzBxQixTQUFTekosU0FBUyxDQUFFQyxVQUFVLElBQ3pDbGhCLEtBQUtzbUIsTUFBTW1ELFdBQVksRUFDbkJ6cEIsS0FBSzBxQixTQUFTckwsUUFBVXJmLEtBQUtzbUIsTUFBTXVFLGVBQ3JDN3FCLEtBQUtzbUIsTUFBTW9ELFVBQVcsRUFDdEIxcEIsS0FBS3NtQixNQUFNZ0UsaUJBQWtCLEVBQzdCdHFCLEtBQUtzbUIsTUFBTWlFLG9CQUFxQixFQUNoQ3ZxQixLQUFLc21CLE1BQU1rRSxpQkFBa0IsSUFFN0J4cUIsS0FBS3NtQixNQUFNb0QsVUFBVyxFQUN0QjFwQixLQUFLc21CLE1BQU1nRSxpQkFBa0IsRUFDN0J0cUIsS0FBS3NtQixNQUFNaUUsb0JBQXFCLEVBQ2hDdnFCLEtBQUtzbUIsTUFBTWtFLGlCQUFrQixFQUM3QnhxQixLQUFLc21CLE1BQU0wQixRQUFTLEVBRXhCLENBRUEscUJBQU1NLEdBQ0p0b0IsS0FBS3NtQixNQUFNK0IsbUJBQW9CLEVBQzNCcm9CLEtBQUtzbUIsTUFBTWlFLDBCQUNQdnFCLEtBQUs5RixNQUFNNHdCLGFBQWFwMkIsS0FBSzBGLE9BQU9FLGFBRTVDMEYsS0FBS3NtQixNQUFNMEIsUUFBUyxDQUN0QixDQUVBLHdCQUFNK0MsU0FDRS9xQixLQUFLOUYsTUFBTTh3QixpQkFBaUJockIsS0FBS2ltQixRQUFRRSxVQUFXLEdBQ3JEbm1CLEtBQUtrbkIsMkJBQ1JsbkIsS0FBS3NtQixNQUFNeUIscUJBQXNCLEVBRXJDLENBRUEsb0JBQU1rRCxHQU1KLEdBSklqckIsS0FBS3NtQixNQUFNRyxZQUNiem1CLEtBQUtrckIsaUJBQW1CbHJCLEtBQUswbUIsU0FBU3lFLFlBQVlDLFdBR2hEcHJCLEtBQUs0cEIsWUFBYSxDQUNwQixNQUFNbHRCLEVBQUk2UixpQkFBaUJ2TyxLQUFLNHBCLGFBQ2hDNXBCLEtBQUtxckIsb0JBQXNCM3VCLEVBQUUwdUIsU0FDL0IsQ0FFSXByQixLQUFLc21CLE1BQU1tRCxXQUFhenBCLEtBQUswcUIsV0FDL0IxcUIsS0FBS3NyQixpQkFBbUJ0ckIsS0FBSzBxQixTQUFTUyxZQUFZQyxXQUdwRCxNQUFNclIsV0FBYXdHLGVBQWV5RixhQUFhdE0sU0FBVTFaLE1BQ25EdXJCLGdCQUFrQkMsRUFBRUMsVUFBVTFSLE1BQU0sR0FHMUN3UixnQkFBZ0J4dUIsUUFBUXVVLE9BQVM1QyxPQUFPQyxLQUFLQyxVQUFVNU8sS0FBTStsQixXQUc3RCxNQUFNMkYsWUFBY3B1QixLQUFLOGUsU0FBU2xmLElBQUk4QyxLQUFLbWMsV0FFckN6TCxVQUFZZ2IsWUFBWXh0QixPQUFPLENBQ25Dc1MsUUFBUythLGdCQUFnQkgsWUFHM0IsYUFETXJpQixHQUFHNGlCLEtBQUtDLGNBQWNsYixLQUFLLEdBQzFCQSxHQUNULENBRUEsbUJBQVdnSixHQUNULE1BQU8sa0RBQ1QsQ0FFQSxtQkFBT21TLENBQWM1RixRQUFTMUIsYUFBYyxHQUMxQyxNQUFNTyxRQUFVLElBQUl4bkIsS0FBS3NHLEtBQUtraEIsU0FDOUIsR0FBSUEsUUFBUWxrQixPQUNWLElBQUssTUFBTW1DLEtBQUsraEIsUUFDVi9oQixFQUFFN0ksTUFBTXljLFFBQ1ZxUCxhQUFhdlYsT0FBTzFOLEVBQUU3SSxNQUFNb1MsU0FBVTJaLFFBQVMsQ0FDN0MxQixjQUdGeUIsYUFBYXZWLE9BQU8xTixFQUFFN0ksTUFBTStULEdBQUlnWSxRQUFTLENBQUUxQixtQkFJL0N4YixHQUFHQyxjQUFjc0ssS0FBS2hXLEtBQUtDLEtBQUtDLFNBQVMsOEJBRTdDLENBRUEsbUJBQWFpVCxJQUFXeUksTUFDdEIsTUFBTTRTLFNBQVcsSUFBSTlGLGdCQUFnQjlNLE1BQ2pDNFMsU0FBUzV4QixNQUFNK3ZCLGlCQUNqQjZCLFNBQVN4RixNQUFNdUUsZUFBZ0IsR0FHN0JpQixTQUFTNXhCLE1BQU02dkIsS0FBTyxJQUN4QitCLFNBQVN4RixNQUFNbUQsV0FBWSxFQUMzQnFDLFNBQVN4RixNQUFNK0IsbUJBQW9CLEVBRW5DeUQsU0FBU3hGLE1BQU1vRCxVQUFXLEVBQzFCb0MsU0FBU3hGLE1BQU0wRCxtQkFBb0IsRUFFbkM4QixTQUFTeEYsTUFBTTBCLFFBQVMsR0FHMUIsTUFBTWpPLFdBQWF3RyxlQUFleUYsYUFBYXRNLFNBQVVvUyxVQUNuRFAsZ0JBQWtCQyxFQUFFQyxVQUFVMVIsTUFBTSxHQUUxQ3dSLGdCQUFnQnh1QixRQUFRdVUsT0FBUzVDLE9BQU9DLEtBQUtDLFVBQVVrZCxTQUFVL0YsaUJBQzNEK0YsU0FBU2xHLElBQUkyRixnQkFBZ0JILFVBQ3JDLENBRUEsdUJBQU9XLENBQWtCNVAsV0FDdkIsTUFBTXRNLFFBQVV2UyxLQUFLOGUsU0FBU2xmLElBQUlpZixXQUc1QjZQLFNBRmNSLEVBQUVDLFVBQVU1YixRQUFRVyxTQUFTLEdBRXBCbUQsY0FBYyxjQUUzQyxPQUFPcVMsYUFBYXZTLFlBQVl1WSxTQUNsQyxDQUVBLGtCQUFPdlksQ0FBYXBILE1BQ2xCLE1BQU00ZixpQkFBbUJ0ZCxLQUFLdWQsTUFBTUMsU0FBUzlmLEtBQUt0UCxRQUFRdVUsU0FFcEQ4YSxhQUFlLElBQUlwRyxhQXdCekIsT0F2QkFwbUIsT0FBT3VlLE9BQU9pTyxhQUFjSCxrQkFDdkJHLGFBQWFqUSxZQUNoQmlRLGFBQWFqUSxVQUFZOVAsS0FBS3hQLFFBQVEsWUFBWUUsUUFBUW9mLFdBR1gsV0FBN0NpUSxhQUFhMUYsVUFBVXJoQixhQUFhL08sT0FDdEM4MUIsYUFBYTFGLFNBQVc5bUIsT0FBT3VlLE9BQzdCLElBQUlySyxVQUNKc1ksYUFBYTFGLFdBSWdDLFdBQTdDMEYsYUFBYTFCLFVBQVVybEIsYUFBYS9PLE9BQ3RDODFCLGFBQWExQixTQUFXOXFCLE9BQU91ZSxPQUM3QixJQUFJckssVUFDSnNZLGFBQWExQixXQUltQyxXQUFoRDBCLGFBQWF4QyxhQUFhdmtCLGFBQWEvTyxPQUN6QzgxQixhQUFheEMsWUFBYzluQixLQUFLQyxTQUFTcXFCLGFBQWF4QyxjQUdqRHdDLFlBQ1QsRUNqZUssTUFBTUMsU0FDWCxxQkFBV0MsR0FDVCxNQUFPLENBQ0xDLE1BQU8sUUFDUEMsUUFBUyxVQUNUQyxLQUFNLE9BQ05DLE9BQVEsU0FFWixDQUVBLG9CQUFXQyxHQUNULE1BQU8sQ0FDTEMsZUFBZ0IsaUJBQ2hCQyxVQUFXLFlBQ1hDLE1BQU8sUUFFWCxDQUVBLFdBQU9DLEdBQ0xucUIsT0FBT3lwQixTQUFXLENBQ2hCcm1CLGNBQWVxbUIsVUFFakIsTUFBTVcsS0FBT3hCLEVBQUUsUUFDZndCLEtBQUtoVCxHQUFHLFFBQVMsY0FBZXFTLFNBQVNZLGNBQ3pDRCxLQUFLaFQsR0FBRyxZQUFhLGVBQWV6ZCxPQUFTOHZCLFNBQVNhLGdCQUFnQjN3QixTQUV0RXFHLE9BQU8ySyxXQUFXNGYsVUFBVS8xQixLQUFLLENBQy9CZzJCLFFBQVMsSUFBSXpsQixPQUFPLHNJQUFzSixNQUMxSzBsQixTQUFVaEIsU0FBU2lCLGFBRXZCLENBRUEscUJBQU9DLENBQWdCaHhCLE9BQ3JCLE1BQU1HLEVBQUlILE1BQU1JLGNBQ1YyakIsRUFBSTVqQixFQUFFaVgsY0FBYyxvQkFDcEJyTyxLQUFPMUcsUUFBUUMsTUFBTXVPLFVBQVUxUSxFQUFFSyxTQUVqQ3l3QixRQUFVbG9CLEtBQUtqSCxLQTRCckIsT0ExQkFpSCxLQUFLakgsS0FBTyxXQUNaaUgsS0FBSzdILEtBQU8sS0FFUit2QixVQUNGbG9CLEtBQUttb0IsU0FBV0QsU0FJaEJsb0IsS0FBS2dNLFNBQ21CLGlCQUFoQmhNLEtBQUtnTSxRQUF1QmhNLEtBQUtnTSxrQkFBa0JsVixVQUUzRGtKLEtBQUtnTSxPQUFTM0MsS0FBS3VkLE1BQU01bUIsS0FBS2dNLFNBSzlCZ1AsRUFBRXZqQixTQUNGdWpCLEVBQUV2akIsUUFBUTJ3QixVQUNhLGdCQUF2QnBOLEVBQUV2akIsUUFBUTJ3QixXQUVWcG9CLEtBQUs3SCxLQUFPNmlCLEVBQUV2akIsUUFBUTJ3QixVQUV4QnBvQixLQUFLcW9CLFlBQWNqeEIsRUFBRUssUUFBUTR3QixZQUFjanhCLEVBQUVreEIsVUFBWSxLQUNyRHRvQixLQUFLK1EsYUFDUC9RLEtBQUsrUSxXQUFhek8sY0FBY2ltQixrQkFBa0J2b0IsS0FBSytRLGFBRWxEL1EsSUFDVCxDQUVBLHNCQUFPNG5CLENBQWlCM3dCLE9BQ3RCLE1BQU0rSSxLQUFPK21CLFNBQVNrQixlQUFlaHhCLE9BQ3JDQSxNQUFNdXhCLGNBQWNDLGFBQWFDLFFBQVEsYUFBY3JmLEtBQUtDLFVBQVV0SixNQUN4RSxDQWFBLHlCQUFhMm9CLENBQWMzb0IsS0FBTWhHLFFBQVUsQ0FBQyxHQUMxQyxNQUFNa1AsSUFBTSxJQUFJNmQsU0FDaEI3ZCxJQUFJOEMsT0FBUzFTLFFBQVFDLE1BQU0yYSxZQUFZLENBQ3JDbmIsS0FBTSxXQUNOMlgsTUFBT3FXLFNBQVNDLFdBQVdDLE1BQzNCa0IsU0FBVXBCLFNBQVNNLFVBQVVHLE1BQzdCelcsV0FBWXZDLFVBQVVzUCxnQkFBZ0JyUCxRQUN0Q3JQLFNBQVUsRUFDVjRNLE9BQVEsQ0FDTmpVLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsa0JBQzFCQyxLQUFNLHFCQUNOeXdCLFFBQVMsS0FFVjVvQixNQUNILElBQUssTUFBTXpKLE1BQU8sQ0FBQyxPQUFRLGNBQWUsT0FBUSxLQUFNLE9BQVEsU0FBVSxTQUFVLGFBQ2xGMlMsSUFBSThDLE9BQU96VixLQUFPMlMsSUFBSThDLE9BQU96VixNQUFRLEdBTXZDLFlBSnNDLElBQTNCMlMsSUFBSThDLE9BQU9BLE9BQU83VCxXQUE4RCxJQUEvQitRLElBQUk4QyxPQUFPQSxPQUFPNmMsVUFBNEIsQ0FBQyxPQUFRLFNBQVNuckIsU0FBU3dMLElBQUk4QyxPQUFPQSxPQUFPNmMsWUFDckozZixJQUFJOEMsT0FBT0EsT0FBTzdULEtBQU8rUSxJQUFJOEMsT0FBT0EsT0FBTzZjLFNBQVcsTUFBUTNmLElBQUk4QyxPQUFPQSxPQUFPN1QsTUFFbEYrUSxJQUFJbFAsUUFBVUEsUUFDUGtQLEdBQ1QsQ0FFQSxrQkFBTzhlLENBQWF6bkIsT0FDbEIsTUFBTXZQLEtBQU91UCxNQUFNLFNBQU1oSSxFQUNuQnlCLFFBQVV1RyxNQUFNLFNBQU1oSSxFQUN0QlEsS0FBT3dILE1BQU0sU0FBTWhJLEVBRW5CeUgsS0FBTyxDQUNYa0osSUFBSyxDQUFDLGFBQ056UixRQUFTLENBQUVpWixNQUFPM1gsTUFDbEJaLEtBQU0sS0FDTjhGLE9BQU8sRUFDUGpOLE1BR0YsR0FBSStILE9BQVNndUIsU0FBU0MsV0FBV0ksT0FDL0JwbkIsS0FBS3hJLE9BQVM2UixLQUFLdWQsTUFBTTVzQixTQUN6QmdHLEtBQUt2SSxRQUFRdVUsT0FBU2hTLGFBQ1UsSUFBckJnRyxLQUFLeEksT0FBT1csV0FBd0QsSUFBekI2SCxLQUFLeEksT0FBT3F4QixVQUE0QixDQUFDLE9BQVEsU0FBU25yQixTQUFTc0MsS0FBS3hJLE9BQU9xeEIsWUFDbkk3b0IsS0FBS3hJLE9BQU9XLEtBQU82SCxLQUFLeEksT0FBT3F4QixTQUFXLE1BQVE3b0IsS0FBS3hJLE9BQU9XLFVBRTNELENBQ0wsTUFBTTJ3QixRQUFVOXVCLFFBQVErdUIsU0FBUyxXQUNqQyxJQUFLLE1BQU14b0IsU0FBU2taLE1BQU1DLEtBQUtvUCxTQUFVLENBQ3ZDLElBQUt2eUIsSUFBS3pGLE9BQVN5UCxNQUFNLEdBQUc0RyxNQUFNLEtBQ3RCLFNBQVI1USxNQUNGeUosS0FBSzdILEtBQU9ySCxZQUVPLElBQVZBLFFBQ0csVUFBUnlGLEtBQ0Z6RixPQUFRLEVBQ1JrUCxLQUFLL0IsTUFBZ0IsQ0FBQzhvQixTQUFTQyxXQUFXQyxPQUFPdnBCLFNBQVMzRSxLQUFLMkosZ0JBQzlDLFlBQVJuTSxLQUNUekYsT0FBUSxFQUNSa1AsS0FBS3dYLFFBQWtCLENBQUN1UCxTQUFTQyxXQUFXQyxPQUFPdnBCLFNBQVMzRSxLQUFLMkosZ0JBQ2hELFdBQVJuTSxNQUNUekYsT0FBUSxFQUNSa1AsS0FBS2pPLE9BQWlCLENBQUNnMUIsU0FBU0MsV0FBV0MsT0FBT3ZwQixTQUFTM0UsS0FBSzJKLGlCQUdwRTFDLEtBQUt2SSxRQUFRbEIsS0FBT3pGLEtBQ3RCLE1BQ2lDLElBQXRCa1AsS0FBS3ZJLFFBQVFVLFdBQXlELElBQTFCNkgsS0FBS3ZJLFFBQVFveEIsVUFBNEIsQ0FBQyxPQUFRLFNBQVNuckIsU0FBU3NDLEtBQUt2SSxRQUFRb3hCLFlBQ3RJN29CLEtBQUt2SSxRQUFRVSxLQUFPNkgsS0FBS3ZJLFFBQVFveEIsU0FBVyxNQUFRN29CLEtBQUt2SSxRQUFRVSxLQUNqRTZILEtBQUs3SCxLQUFPNkgsS0FBS3ZJLFFBQVFVLEtBRTdCLENBRUEsSUFBSWdSLE1BQ0osTUFBTTRILFdBQWF2QyxVQUFVd2EsaUJBQWlCaHBCLEtBQUt2SSxRQUFRc1osWUFFM0QsT0FBUWhZLEtBQUsySixlQUNYLEtBQUtxa0IsU0FBU0MsV0FBV0MsTUFBTyxDQUM5QixJQUFJZ0MsVUFBWWpwQixLQUFLdkksUUFBUXpHLEtBQ3pCLENBQUMsYUFBYyxZQUFhLFNBQVUsV0FBVzBNLFNBQVNzQyxLQUFLdkksUUFBUXNCLE1BQU0ySixpQkFDckQsUUFBdEIxQyxLQUFLdkksUUFBUXpHLE9BQ2ZpNEIsVUFBWWp4QixLQUFLQyxLQUFLQyxTQUFTLGNBRVAsUUFBdEI4SCxLQUFLdkksUUFBUXpHLE9BQ2ZpNEIsVUFBWWp4QixLQUFLQyxLQUFLQyxTQUFTLGlCQUcvQixDQUFDLFNBQVUsT0FBUSxpQkFBa0IsbUJBQW1Cd0YsU0FBU3NDLEtBQUt2SSxRQUFRc0IsTUFBTTJKLGlCQUN0RnVtQixVQUFZM21CLGNBQWM0Yix1QkFBdUJsZSxLQUFLdkksUUFBUXpHLE9BQU8rRyxPQUV2RW9SLE1BQVFuUixLQUFLQyxLQUFLeVcsT0FDaEIsaUJBQWtCMU8sS0FBS3ZJLFFBQVFzWixXQUFrQixPQUFMLEtBQWUvUSxLQUFLdkksUUFBUTJILFNBQWdCLFFBQUwsS0FBZVksS0FBS3dYLFFBQVUsVUFBWSxLQUM3SCxDQUNFekcsV0FDQTNSLFNBQVVZLEtBQUt2SSxRQUFRMkgsU0FDdkJwTyxLQUFNaTRCLFlBR1YsS0FDRixDQUVBLEtBQUtsQyxTQUFTQyxXQUFXRSxRQUN2Qi9kLE1BQVFuUixLQUFLQyxLQUFLeVcsT0FDaEIsbUJBQW9CMU8sS0FBS3ZJLFFBQVFzWixXQUFrQixPQUFMLEtBQWUvUSxLQUFLdkksUUFBUTJILFNBQWdCLFFBQUwsS0FDckYsQ0FDRTJSLFdBQ0EzUixTQUFVWSxLQUFLdkksUUFBUTJILFNBQ3ZCbWlCLE9BQVF2aEIsS0FBS3ZJLFFBQVE4cEIsT0FDckJELE9BQVF0aEIsS0FBS3ZJLFFBQVE2cEIsU0FHekIsTUFFRixLQUFLeUYsU0FBU0MsV0FBV0csS0FDdkJoZSxNQUFRblIsS0FBS0MsS0FBS3lXLE9BQ2hCLGdCQUFpQjFPLEtBQUt2SSxRQUFRc1osV0FBa0IsT0FBTCxLQUFlL1EsS0FBS3ZJLFFBQVEySCxTQUFnQixRQUFMLEtBQ2xGLENBQ0UyUixXQUNBM1IsU0FBVVksS0FBS3ZJLFFBQVEySCxTQUN2QnBPLEtBQU1nUCxLQUFLdkksUUFBUXpHLE9BR3ZCLE1BRUYsS0FBSysxQixTQUFTQyxXQUFXSSxPQUN2QmplLE1BQVFuSixLQUFLeEksT0FBT08sTUFJbkIvRyxLQUdIZ1AsS0FBS3ZJLFFBQVE0d0IsYUFBYyxFQUYzQnJvQixLQUFLaFAsS0FBT21ZLE1BS2QsTUFBTS9SLEVBQUltUyxTQUFTQyxjQUFjLEtBQ2pDcFMsRUFBRStSLE1BQVFuUixLQUFLc0csS0FBSzJFLEtBQU9qRCxLQUFLaFAsS0FBT21ZLE1BQ3ZDL1IsRUFBRXFTLFVBQVVDLE9BQU8xSixLQUFLa0osS0FDeEIsSUFBSyxNQUFPUyxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVE5RSxLQUFLdkksU0FDdkNMLEVBQUVLLFFBQVFrUyxHQUFLdFAsRUFrQmpCLE9BaEJBakQsRUFBRTh4QixXQUFZLEVBQ2RscEIsS0FBSzdILEtBQU82SCxLQUFLN0gsTUFBUTZILEtBQUt4SSxRQUFRVyxNQUFRLGVBRTFDNkgsS0FBSzdILEtBQUt1RixTQUFTLE9BQVNzQyxLQUFLN0gsS0FBS3VGLFNBQVMsUUFDakRzQyxLQUFLSSxJQUFNSixLQUFLN0gsTUFFZDZILEtBQUsvQixRQUNQN0csRUFBRXdTLFdBQWEsb0NBRWI1SixLQUFLSSxJQUNQaEosRUFBRXdTLFdBQWEsd0JBQXdCNUosS0FBSzdILGNBQWM2SCxLQUFLSSxRQUUvRGhKLEVBQUV3UyxXQUFhLHNCQUFzQjVKLEtBQUs3SCwwQkFBMEI2SCxLQUFLN0gsYUFFM0VmLEVBQUV3UyxXQUFhLFNBQVM1SixLQUFLaFAsY0FFdEJvRyxDQUNULENBV0EsbUJBQUFpSixDQUFxQkMsV0FBVyxXQUFZLE9BQVksQ0FBQyxHQUN2RCxJQUFLQSxVQUFVb1EsTUFDYixNQUFPLEdBRVQsT0FBUXBRLFVBQVVvUSxNQUFNaE8sZUFDdEIsS0FBS3FrQixTQUFTQyxXQUFXQyxNQUFPLENBSzlCLElBQUszbUIsVUFBVTZuQixXQUFjN25CLFVBQVV0UCxPQUFTc1AsVUFBVXVSLE1BQ3hELE1BQU8sR0FFVCxJQUFJN1gsUUFBVSxHQUFHc0csVUFBVXJDLE1BQVEsU0FBVyxLQUFLcUMsVUFBVWtYLFFBQVUsV0FBYSxVQUFVbFgsVUFBVTZuQixXQWV4RyxHQWRJN25CLFVBQVV0UCxLQUNaZ0osU0FBVyxTQUFTc0csVUFBVXRQLE9BQ3JCc1AsVUFBVXVSLFFBQ25CN1gsU0FBVyxVQUFVc0csVUFBVXVSLFFBQzNCdlIsVUFBVXZPLFNBQ1ppSSxTQUFXLGlCQUdxQixJQUF6QnNHLFVBQVV5USxZQUE4QnpRLFVBQVV5USxhQUFldkMsVUFBVXNQLGdCQUFnQnJQLFVBQ3BHelUsU0FBVyxlQUFlc0csVUFBVXlRLG1CQUVKLElBQXZCelEsVUFBVWxCLFVBQW1ELElBQXZCa0IsVUFBVWxCLFdBQ3pEcEYsU0FBVyxhQUFhc0csVUFBVWxCLFlBRWhDa0IsVUFBVW5JLEtBQU0sQ0FDbEIsTUFBTXNKLE1BQVFuQixVQUFVbkksS0FBS29JLE1BQU0sdUJBRWpDdkcsU0FERXlILE1BQ1MsYUFBYUEsTUFBTSxXQUFXQSxNQUFNLEtBRXBDLFNBQVNuQixVQUFVbkksTUFFbEMsQ0FDSW1JLFVBQVU2b0IsT0FDWm52QixTQUFXLFNBQVNzRyxVQUFVNm9CLFFBRTVCN29CLFVBQVVxSSxLQUNaM08sU0FBVyxPQUFPc0csVUFBVXFJLE1BRTlCLElBQUl5Z0IsS0FBTyxlQUFlcHZCLFdBQzFCLE1BQU1xdUIsWUFBYy9uQixVQUFVK25CLGFBQWdCdHdCLE9BQVMsR0FJdkQsT0FISXN3QixjQUNGZSxNQUFRLElBQUlmLGdCQUVQZSxJQUNULENBRUEsS0FBS3JDLFNBQVNDLFdBQVdFLFFBQVMsQ0FFaEMsSUFBSzVtQixVQUFVZ2hCLFNBQVdoaEIsVUFBVWloQixPQUNsQyxNQUFPLEdBRVQsSUFBSXZuQixRQUFVLEdBQUdzRyxVQUFVckMsTUFBUSxTQUFXLFlBQVlxQyxVQUFVZ2hCLGlCQUFpQmhoQixVQUFVaWhCLFNBVS9GLEdBVElqaEIsVUFBVXVnQixZQUNaN21CLFNBQVcsY0FBY3NHLFVBQVV1Z0IsYUFFakN2Z0IsVUFBVXlRLFlBQWN6USxVQUFVeVEsYUFBZXZDLFVBQVVzUCxnQkFBZ0JyUCxVQUM3RXpVLFNBQVcsZUFBZXNHLFVBQVV5USxjQUVsQ3pRLFVBQVVsQixVQUFtQyxJQUF2QmtCLFVBQVVsQixXQUNsQ3BGLFNBQVcsYUFBYXNHLFVBQVVsQixZQUVoQ2tCLFVBQVVuSSxLQUFNLENBQ2xCLE1BQU1zSixNQUFRbkIsVUFBVW5JLEtBQUtvSSxNQUFNLHVCQUVqQ3ZHLFNBREV5SCxNQUNTLGFBQWFBLE1BQU0sV0FBV0EsTUFBTSxLQUVwQyxTQUFTbkIsVUFBVW5JLE1BRWxDLENBQ0EsSUFBSWl4QixLQUFPLGlCQUFpQnB2QixXQUM1QixNQUFNcXVCLFlBQWMvbkIsVUFBVStuQixhQUFnQnR3QixPQUFTLEdBSXZELE9BSElzd0IsY0FDRmUsTUFBUSxJQUFJZixnQkFFUGUsSUFDVCxDQUVBLEtBQUtyQyxTQUFTQyxXQUFXRyxLQUFNLENBRTdCLElBQUs3bUIsVUFBVXRQLEtBQ2IsTUFBTyxHQUVULElBQUlnSixRQUFVLEdBQUdzRyxVQUFVckMsTUFBUSxTQUFXLFVBQVVxQyxVQUFVdFAsT0FDbEUsR0FBSXNQLFVBQVVuSSxLQUFNLENBQ2xCLE1BQU1zSixNQUFRbkIsVUFBVW5JLEtBQUtvSSxNQUFNLHVCQUVqQ3ZHLFNBREV5SCxNQUNTLGFBQWFBLE1BQU0sV0FBV0EsTUFBTSxLQUVwQyxTQUFTbkIsVUFBVW5JLE1BRWxDLENBQ0ltSSxVQUFVNm9CLE9BQ1pudkIsU0FBVyxTQUFTc0csVUFBVTZvQixRQUU1QjdvQixVQUFVcUksS0FDWjNPLFNBQVcsT0FBT3NHLFVBQVVxSSxNQUU5QixJQUFJeWdCLEtBQU8sY0FBY3B2QixXQUN6QixNQUFNcXVCLFlBQWMvbkIsVUFBVStuQixhQUFnQnR3QixPQUFTLEdBSXZELE9BSElzd0IsY0FDRmUsTUFBUSxJQUFJZixnQkFFUGUsSUFDVCxDQUVBLEtBQUtyQyxTQUFTQyxXQUFXSSxPQUFRLENBTy9CLE1BQU0zbEIsTUFBUW5CLFVBQVUwTCxPQUFPN1QsS0FBS29JLE1BQU0sdUJBQ3RDa0IsUUFDRm5CLFVBQVUwTCxPQUFPNmMsU0FBV3BuQixNQUFNLEdBQ2xDbkIsVUFBVTBMLE9BQU83VCxLQUFPc0osTUFBTSxJQUVoQyxJQUFJMm5CLEtBQU8sZ0JBQWdCL2YsS0FBS0MsVUFBVWhKLFVBQVUwTCxXQUNwRCxNQUFNcWMsWUFBYy9uQixVQUFVK25CLGFBQWdCdHdCLE9BQVMsR0FJdkQsT0FISXN3QixjQUNGZSxNQUFRLElBQUlmLGdCQUVQZSxJQUNULEVBRUYsTUFBTyxHQUNULENBRUEsOEJBQWFDLENBQW1CejBCLE1BQU9vRixTQUFTLFVBQWEsR0FBVSxDQUFDLEdBQ3RFLE9BQVFBLFFBQVEwVyxPQUNkLEtBQUtxVyxTQUFTQyxXQUFXQyxNQUN2QixHQUFJLENBQUMsU0FBVSxPQUFRLGlCQUFrQixtQkFBbUJ2cEIsU0FBUzFELFFBQVFtdUIsU0FBU3psQixlQUNwRixPQUFPOU4sTUFBTTAwQixvQkFDWHR2QixRQUFRaEosS0FDUnU0QixTQUNBdnZCLFNBR0osR0FBSSxDQUFDLFNBQVMwRCxTQUFTMUQsUUFBUW11QixTQUFTemxCLGVBQ3RDLE9BQU85TixNQUFNNDBCLFdBQVd4dkIsUUFBU3V2QixTQUFVdnZCLFNBRTdDLEdBQUksQ0FBQyxhQUFjLFlBQWEsU0FBVSxXQUFXMEQsU0FBUzFELFFBQVFtdUIsU0FBU3psQixlQUM3RSxPQUFPOU4sTUFBTTYwQixlQUFlenZCLFFBQVFoSixLQUFNdTRCLFNBQVV2dkIsU0FFdEQsR0FBSSxDQUFDLGNBQWUsY0FBZSxXQUFXMEQsU0FBUzFELFFBQVFtdUIsU0FBU3psQixlQUN0RSxPQUFPaVUsaUJBQWlCNkgsbUJBQW1CLENBQ3pDemxCLEtBQU1pQixRQUFRbXVCLFNBQVN6bEIsY0FDdkJvYyxlQUFnQjlrQixRQUFRNlgsTUFBTTFLLE1BQU0sTUFDcENvUyxTQUFVcUgsUUFBUTVtQixRQUFRakksU0FBVSxLQUd4QyxNQUVGLEtBQUtnMUIsU0FBU0MsV0FBV0UsUUFJdkIsWUFIQXhHLGFBQWF2VixPQUFPdlcsTUFBTWlYLFNBQVU3UixRQUFTLENBQzNDaWxCLFlBQWFzSyxXQUlqQixLQUFLeEMsU0FBU0MsV0FBV0csS0FDdkIsT0FBT3Z5QixNQUFNODBCLFlBQVkxdkIsUUFBU3V2QixVQUVwQyxLQUFLeEMsU0FBU0MsV0FBV0ksYUFDakJ4eUIsTUFBTWtELHdCQUF3QixlQUFnQixDQUFDLENBQ25EQyxNQUFPaUMsUUFBUWdTLE9BQU9qVSxNQUN0QkksS0FBTTZCLFFBQVFnUyxPQUFPN1QsS0FDckJ5d0IsUUFBUzV1QixRQUFRZ1MsT0FBTzRjLFdBSWhDLENBRUEsb0JBQU9lLENBQWUzdkIsU0FDcEIsTUFBTW1jLE9BQVMsQ0FDYnpMLFFBQVMsQ0FDUG9CLE1BQU85VCxLQUFLc0csS0FBS3ROLE9BR3JCLElBQUl1WixRQUNKLE1BQU02ZSxNQUFPLElBQUtyQyxVQUFZMW1CLG9CQUFvQnJHLFNBRWhEdVEsUUFERXZRLFFBQVEwVyxRQUFVcVcsU0FBU0MsV0FBV0ksT0FDOUIsK0JBQStCZ0MsYUFFL0JweEIsS0FBS0MsS0FBS3lXLE9BQU8saUNBQWtDLENBQzNEZ0MsTUFBTzBZLE9BR1huZixXQUFXSyxjQUFjLEtBQU1DLFFBQVM0TCxPQUMxQyxDQUVBLHVCQUFPeVQsQ0FBa0I1dkIsUUFBU29OLFFBQ2hDLElBQUssTUFBTXhTLFNBQVN3UyxPQUFRLENBQzFCLE1BQU0rTyxPQUFTLENBQ2J6TCxRQUFTLENBQ1BvQixNQUFPOVQsS0FBS3NHLEtBQUt0TixNQUVuQmdOLFFBQVNwSixNQUFNaTFCLE9BQU9uckIsS0FBSXRILEdBQUtBLEVBQUV1UixNQUVuQyxJQUFJNEIsUUFDSixNQUFNNmUsTUFBTyxJQUFLckMsVUFBWTFtQixvQkFBb0JyRyxTQUVoRHVRLFFBREV2USxRQUFRMFcsUUFBVXFXLFNBQVNDLFdBQVdJLE9BQzlCLCtCQUErQmdDLGFBRS9CcHhCLEtBQUtDLEtBQUt5VyxPQUFPLG1DQUFvQyxDQUM3RDFkLEtBQU00RCxNQUFNNUQsS0FDWjBmLE1BQU8wWSxPQUdYbmYsV0FBV0ssY0FBYyxLQUFNQyxRQUFTNEwsT0FDMUMsQ0FDRixDQVFBLHlCQUFhd1IsQ0FBYzF3QixPQUN6QixNQUFNK0MsUUFBVStzQixTQUFTa0IsZUFBZWh4QixPQUV4QyxHQUFJZSxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsR0FBSTRHLFVBQVU1UyxPQUVaLFlBREE2eUIsc0JBQXNCM2UsT0FBT25SLFNBRy9CLEdBQUlzVCxPQUFPakcsT0FBT2tPLFdBQVdqYSxPQUFRLENBQ25DLElBQUssTUFBTW9RLFNBQVM0QixPQUFPakcsT0FBT2tPLFdBQ2hDd1IsU0FBU3NDLGtCQUFrQjNkLE1BQU05VyxNQUFPb0YsUUFBUyxDQUFFdXZCLFNBQVV0eUIsTUFBTXN5QixXQUVyRSxNQUNGLENBQ0EsTUFBTTdlLFFBQVV4TSxZQUFZeU0sYUFDdEIvVixNQUFRc0osWUFBWTZyQixnQkFBZ0JyZixTQUMxQyxPQUFJOVYsV0FDRm15QixTQUFTc0Msa0JBQWtCejBCLE1BQU9vRixRQUFTLENBQUV1dkIsU0FBVXR5QixNQUFNc3lCLGdCQUcvRHhDLFNBQVM0QyxjQUFjM3ZCLFFBRXpCLENBQU8sQ0FDTCxNQUFNMFEsUUFBVXhNLFlBQVl5TSxhQUM1QixJQUFJL1YsTUFBUXNKLFlBQVk2ckIsZ0JBQWdCcmYsU0FDeEMsSUFBSzlWLE1BQU8sQ0FDVixNQUFNd1MsT0FBU3BQLEtBQUtvUCxPQUFPblcsUUFBT21HLElBQU1BLEVBQUUwZSxVQUFVOWQsS0FBS3NHLEtBQUtxSyxLQUFPdlIsRUFBRTBlLFVBQVVDLFdBQWFuTCxNQUFNb0wsMEJBQTBCQyxRQUM5SCxHQUFzQixJQUFsQjdPLE9BQU85TCxPQUNUMUcsTUFBUXdTLE9BQU8sT0FDVixDQUNMLE1BQU1BLE9BQVNwUCxLQUFLb1AsT0FBT25XLFFBQU9tRyxJQUFNQSxFQUFFMGUsVUFBVTlkLEtBQUtzRyxLQUFLcUssS0FBT3ZSLEVBQUUwZSxVQUFVQyxXQUFhbkwsTUFBTW9MLDBCQUEwQmdVLFdBQ3hHLElBQWxCNWlCLE9BQU85TCxTQUNUMUcsTUFBUXdTLE9BQU8sR0FFbkIsQ0FDRixDQUNBLEdBQUl4UyxNQUVGLFlBREFteUIsU0FBU3NDLGtCQUFrQnowQixNQUFPb0YsUUFBUyxDQUFFdXZCLFNBQVV0eUIsTUFBTXN5QixVQUdqRSxDQUNBOWxCLEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS0MsU0FBUyw4QkFDM0MsQ0FFQSxRQUFBK3hCLENBQVUxekIsSUFBS3pGLE9BQ2I0SixLQUFLc1IsT0FBT3pWLEtBQU96RixLQUNyQixDQUVBLFFBQUlzNEIsR0FDRixPQUFPMXVCLEtBQUsyRixvQkFBb0IzRixLQUFLc1IsT0FDdkMsQ0FFQSxNQUFJckQsR0FDRixPQUFPak8sS0FBS3NSLE9BQU9yRCxFQUNyQixDQUVBLFFBQUl3Z0IsR0FDRixPQUFPenVCLEtBQUtzUixPQUFPbWQsSUFDckIsQ0FFQSxhQUFJZSxHQUNGLE9BQU94dkIsS0FBS3NSLE9BQU8wRSxLQUNyQixDQUVBLGNBQUlLLEdBQ0YsT0FBT3JXLEtBQUtzUixPQUFPK0UsVUFDckIsQ0FFQSxRQUFJNVksR0FDRixPQUFPdUMsS0FBS3NSLE9BQU83VCxJQUNyQixDQUVBLGVBQUlrd0IsR0FDRixPQUFPM3RCLEtBQUtzUixPQUFPcWMsV0FDckIsQ0FFQSxZQUFJanBCLEdBQ0YsT0FBTzFFLEtBQUtzUixPQUFPNU0sUUFDckIsQ0FFQSxZQUFJK29CLEdBQ0YsT0FBT3p0QixLQUFLc1IsT0FBT21jLFFBQ3JCLENBRUEsVUFBSTVHLEdBQ0YsT0FBTzdtQixLQUFLc1IsT0FBT3VWLE1BQ3JCLENBRUEsVUFBSUQsR0FDRixPQUFPNW1CLEtBQUtzUixPQUFPc1YsTUFDckIsQ0FFQSxhQUFJVCxHQUNGLE9BQU9ubUIsS0FBS3NSLE9BQU82VSxTQUNyQixDQUVBLFVBQUlycEIsR0FDRixPQUFPa0QsS0FBS3NSLE9BQU9BLE1BQ3JCLENBRUEsYUFBSW1lLEdBQ0YsR0FBSXp2QixLQUFLMHZCLHNCQUF1QixDQUM5QixNQUFNaE0sZ0JBQWtCaU0sU0FBU0MsOEJBQ2pDLE9BQU9sTSxnQkFBZ0Joa0IsTUFBS213QixHQUFLQSxFQUFFaDBCLE1BQVFtRSxLQUFLc1IsT0FBT2hiLE1BQVF1NUIsRUFBRXJvQixZQUFjeEgsS0FBS3NSLE9BQU9oYixNQUFRdTVCLEVBQUV4eUIsUUFBVTJDLEtBQUtzUixPQUFPaGIsUUFBT3VGLEtBQU8sRUFDM0ksQ0FDQSxPQUFPbUUsS0FBS3NSLE9BQU9oYixJQUNyQixDQUVBLFdBQUl3NUIsR0FDRixPQUFPOXZCLEtBQUtzUixPQUFPMEUsUUFBVXFXLFNBQVNDLFdBQVdDLEtBQ25ELENBRUEseUJBQUltRCxHQUNGLE9BQU8xdkIsS0FBSzh2QixTQUFXOXZCLEtBQUtzUixPQUFPbWMsV0FBYXBCLFNBQVNNLFVBQVVDLGNBQ3JFLENBRUEsb0JBQUltRCxHQUNGLE9BQU8vdkIsS0FBSzh2QixTQUFXOXZCLEtBQUtzUixPQUFPbWMsV0FBYXBCLFNBQVNNLFVBQVVFLFNBQ3JFLENBRUEsZ0JBQUltRCxHQUNGLE9BQU9od0IsS0FBSzh2QixTQUFXOXZCLEtBQUtzUixPQUFPbWMsV0FBYXBCLFNBQVNNLFVBQVVHLEtBQ3JFLENBRUEsZUFBSW1ELEdBQ0YsT0FBT2p3QixLQUFLc1IsT0FBTzBFLFFBQVVxVyxTQUFTQyxXQUFXRyxJQUNuRCxDQUVBLGtCQUFJeUQsR0FDRixPQUFPbHdCLEtBQUtzUixPQUFPMEUsUUFBVXFXLFNBQVNDLFdBQVdFLE9BQ25ELENBRUEsWUFBSTJELEdBQ0YsT0FBT253QixLQUFLc1IsT0FBTzBFLFFBQVVxVyxTQUFTQyxXQUFXSSxNQUNuRCxDQUVBLFdBQUlqSSxHQUNGLE9BQU96a0IsS0FBSzh2QixTQUFXOXZCLEtBQUtzUixPQUFPL04sS0FDckMsQ0FFQSxhQUFJNnNCLEdBQ0YsT0FBT3B3QixLQUFLOHZCLFNBQVc5dkIsS0FBS3NSLE9BQU93TCxPQUNyQyxFQ3pvQkssTUFBTXNTLDhCQUE4QjlWLGdCQUN6Qyx5QkFBV0MsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckR0TCxHQUFJLGdCQUNKd0wsUUFBUyxDQUFDLE9BQVEsdUJBQ2xCaEwsTUFBT25SLEtBQUtDLEtBQUtDLFNBQVMsbUJBQzFCNnlCLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLEtBQU1DLGFBQWMsZUFDL0M3VyxTQUFVLGlEQUNWQyxlQUFlLEVBQ2ZDLE1BQU8sSUFDUEMsT0FBUSxPQUNSMlcsS0FBTSxDQUNKLENBQ0VDLFlBQWEsUUFDYkMsZ0JBQWlCLGtCQUNqQkMsUUFBUyxhQUlqQixDQUVBLGFBQU1DLEdBQ0osTUFBTUMsZ0JBQWtCeDBCLE1BQU11MEIsVUEyRTlCLE9BeEVBQyxVQUFVckIsVUFBWSxDQUNwQixDQUNFM3pCLElBQUt3d0IsU0FBU0MsV0FBV0MsTUFDekJsdkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxlQUU1QixDQUNFM0IsSUFBS3d3QixTQUFTQyxXQUFXRSxRQUN6Qm52QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHFCQUU1QixDQUNFM0IsSUFBS3d3QixTQUFTQyxXQUFXRyxLQUN6QnB2QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLG9CQUU1QixDQUNFM0IsSUFBS3d3QixTQUFTQyxXQUFXSSxPQUN6QnJ2QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHVCQUs5QnF6QixVQUFVcEQsU0FBVyxDQUNuQixDQUNFNXhCLElBQUt3d0IsU0FBU00sVUFBVUMsZUFDeEJ2dkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyx3QkFFNUIsQ0FDRTNCLElBQUt3d0IsU0FBU00sVUFBVUUsVUFDeEJ4dkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxtQkFFNUIsQ0FDRTNCLElBQUt3d0IsU0FBU00sVUFBVUcsTUFDeEJ6dkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxnQkFLOUJxekIsVUFBVUMsY0FBZ0IsQ0FDeEIsQ0FDRWoxQixJQUFLLE1BQ0x3QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGNBRTVCLENBQ0UzQixJQUFLLE1BQ0x3QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUs5QnF6QixVQUFVRSxZQUFjbnhCLE9BQU93SyxRQUFROEYsTUFBTThnQixxQkFBcUJobEIsUUFDaEUsQ0FBQzRGLElBQUtwUixLQUNKb1IsSUFBSXBSLEVBQUUsSUFBTWxELEtBQUtDLEtBQUtDLFNBQVMsZUFBaUJnRCxFQUFFLElBQzNDb1IsTUFFVCxDQUFDLEdBSUhpZixVQUFVSSxtQkFBcUJ0QixTQUFTQyw4QkFFeENpQixVQUFVbkMsS0FBT21DLFVBQVV2ZixPQUFPb2QsS0FFbENtQyxVQUFVSyxTQUFXTCxVQUFVbkMsS0FBS3VCLGFBQWVZLFVBQVVuQyxLQUFLc0IsYUFFbEVhLFVBQVVNLGNBQTRDLGtCQUEzQk4sVUFBVXZmLE9BQU84ZixNQUM1Q1AsVUFBVVEsZUFBNkMsbUJBQTNCUixVQUFVdmYsT0FBTzhmLE1BRTdDUCxVQUFVUyxjQUFpQlQsVUFBVW5DLEtBQUt6Z0IsS0FBTzRpQixVQUFVTSxlQUFpQk4sVUFBVVEsZ0JBRXRGUixVQUFVek4sZ0JBQWtCdFAsVUFBVXNQLGdCQUV0Q3lOLFVBQVVVLFdBQWFWLFVBQVV2ZixPQUFPNUUsT0FBTzFJLEtBQUl0SCxHQUFLQSxFQUFFcEcsT0FBTStOLEtBQUssTUFFOUR3c0IsU0FDVCxDQUVBLGlCQUFBL1csQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFFeEJBLEtBQ0dyYSxLQUFLLHNIQUNMOUQsT0FBT29FLEtBQUt3eEIsZ0JBQWdCdDRCLEtBQUs4RyxPQUdwQytaLEtBQUtyYSxLQUFLLG1CQUFtQit4QixNQUFNenhCLEtBQUsweEIsaUJBQWlCeDRCLEtBQUs4RyxNQUNoRSxDQUVBLGVBQUF3eEIsQ0FBaUJqMUIsT0FDZixPQUFRQSxNQUFNSSxjQUFjckcsTUFDMUIsSUFBSyxpQkFDTCxJQUFLLGdCQUNIMEosS0FBS3NSLE9BQU84ZixNQUFTNzBCLE1BQU1JLGNBQWNyRyxPQUFTMEosS0FBS3NSLE9BQU84ZixNQUFRLEdBQUs3MEIsTUFBTUksY0FBY3JHLEtBR25HMEosS0FBSzJ4QixVQUFVcDFCLE1BQ2pCLENBRUEsZ0JBQUFtMUIsQ0FBa0JuMUIsT0FDaEJBLE1BQU1FLGlCQUNOLE1BQU02bEIsT0FBUy9sQixNQUFNSSxjQUNyQixPQUFRMmxCLE9BQU92bEIsUUFBUUksUUFDckIsSUFBSyxNQUNILE9BQU82QyxLQUFLNHhCLG1CQUNkLElBQUssU0FDSHRQLE9BQU96bEIsUUFBUSxrQkFBa0JpbUIsU0FDakM5aUIsS0FBSzJ4QixVQUFVcDFCLE9BRXJCLENBRUEsc0JBQU1xMUIsR0FDSixNQUFNQyxJQUFNN3hCLEtBQUtzUixPQUFPb2QsS0FBSzV4QixPQUFPb3hCLFFBQVF0dEIsT0FDNUMsT0FBT1osS0FBSzh4QixPQUFPLENBQ2pCQyxjQUFjLEVBQ2RDLFdBQVksQ0FDVixDQUFDLGtCQUFrQkgsT0FBUSxDQUN6QmgyQixJQUFLLEdBQ0xvMkIsS0FBTS9oQixNQUFNOGdCLG9CQUFvQmtCLElBQ2hDOTdCLE1BQU8sTUFJZixDQUVBLG1CQUFNKzdCLENBQWU1MUIsTUFBTzYxQixVQUMxQixJQUFJQyxXQUFZLEVBQ2hCLE1BQU12MUIsT0FBUyxDQUNic0IsU0FBVSxDQUFDLEVBQ1g4dkIsUUFBUyxJQUVYLElBQUssTUFBTXJ5QixPQUFPdTJCLFNBQ2hCLE9BQVF2MkIsS0FDTixJQUFLLFlBQ0htRSxLQUFLc1IsT0FBT29kLEtBQUthLFNBQVMsT0FBUTZDLFNBQVMzQyxXQUMzQyxNQUNGLElBQUssUUFDTCxJQUFLLFVBQ0wsSUFBSyxhQUNMLElBQUssY0FDTCxJQUFLLE9BQ0wsSUFBSyxLQUNMLElBQUssV0FDTCxJQUFLLE9BQ0wsSUFBSyxTQUNMLElBQUssU0FDTCxJQUFLLFlBQ0h6dkIsS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTMXpCLElBQUt1MkIsU0FBU3YyQixNQUN4QyxNQUNGLElBQUssZUFDTCxJQUFLLFdBQ0wsSUFBSyxVQUNIbUUsS0FBS3NSLE9BQU96VixLQUFPdTJCLFNBQVN2MkIsS0FDNUIsTUFDRixJQUFLLGVBQ0hpQixPQUFPTyxNQUFRKzBCLFNBQVN2MkIsS0FDeEJ3MkIsV0FBWSxFQUNaLE1BQ0YsSUFBSyxjQUNIdjFCLE9BQU9XLEtBQU8yMEIsU0FBU3YyQixLQUN2QncyQixXQUFZLEVBQ1osTUFDRixJQUFLLGNBQ0h2MUIsT0FBT3cxQixLQUFPRixTQUFTdjJCLEtBQ3ZCdzJCLFdBQVksRUFDWixNQUNGLElBQUssa0JBQ0h2MUIsT0FBT2dCLFNBQVdzMEIsU0FBU3YyQixLQUMzQncyQixXQUFZLEVBQ1osTUFDRixJQUFLLDBCQUNIdjFCLE9BQU9zQixTQUFTRSxRQUFVOHpCLFNBQVN2MkIsS0FDbkN3MkIsV0FBWSxFQUNaLE1BQ0YsSUFBSyx5QkFDSHYxQixPQUFPc0IsU0FBU20wQixPQUFTSCxTQUFTdjJCLEtBQ2xDdzJCLFdBQVksRUFDWixNQUNGLElBQUssd0JBQ0h2MUIsT0FBT3NCLFNBQVNvMEIsTUFBUUosU0FBU3YyQixLQUNqQ3cyQixXQUFZLEVBQ1osTUFDRixRQUFTLENBQ1AsTUFBTXhzQixNQUFRaEssSUFBSWdLLE1BQU0saUNBQ3BCQSxRQUNGL0ksT0FBT294QixRQUFROTJCLEtBQUssQ0FDbEJ5RSxJQUFLdTJCLFNBQVN2MkIsS0FDZG8yQixLQUFNRyxTQUFTLGtCQUFvQnZzQixNQUFNLEdBQUssU0FDOUN6UCxNQUFPZzhCLFNBQVMsa0JBQW9CdnNCLE1BQU0sR0FBSyxZQUVqRHdzQixXQUFZLEVBRWhCLEVBR0FBLFdBQ0ZyeUIsS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTLFNBQVV6eUIsUUFFdEMsTUFBTWlvQixPQUFTeG9CLE1BQU1JLGNBQ3JCLEdBQUlvb0IsT0FBUSxDQUNWLE9BQVFBLE9BQU96dUIsTUFDYixJQUFLLE9BQ0gwSixLQUFLc1IsT0FBT29kLEtBQUthLFNBQVMsUUFBU3hLLE9BQU8zdUIsT0FDdEMydUIsT0FBTzN1QixRQUFVaTJCLFNBQVNDLFdBQVdDLFFBQ3ZDdnNCLEtBQUtzUixPQUFPb2QsS0FBS2EsU0FBUyxXQUFZbEQsU0FBU00sVUFBVUcsT0FDekQ5c0IsS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTLE9BQVEsS0FFcEMsTUFDRixJQUFLLFFBQ0h2dkIsS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTLFdBQVl4SyxPQUFPM3VCLE9BQ3pDMnVCLE9BQU8zdUIsUUFBVWkyQixTQUFTTSxVQUFVQyxlQUN0QzVzQixLQUFLc1IsT0FBT29kLEtBQUthLFNBQVMsT0FBUUksU0FBU0MsOEJBQThCLEdBQUcvekIsS0FDbkVrcEIsT0FBTzN1QixRQUFVaTJCLFNBQVNNLFVBQVVFLFVBQzdDN3NCLEtBQUtzUixPQUFPb2QsS0FBS2EsU0FBUyxPQUFRLE9BRWxDdnZCLEtBQUtzUixPQUFPb2QsS0FBS2EsU0FBUyxPQUFRLElBRXBDLE1BQ0YsSUFBSyxlQUNMLElBQUssb0JBQ0h2dkIsS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTLE9BQVF4SyxPQUFPM3VCLE9BRzdDLEdBQW1CLFdBQWZtRyxNQUFNOEIsS0FBbUIsQ0FDM0IsT0FBUTlCLE1BQU1rMkIsVUFBVTExQixRQUFRSSxRQUM5QixJQUFLLFlBQ0h5SyxjQUFjOHFCLGdCQUFnQjF5QixLQUFLc1IsT0FBT29kLEtBQUtBLE1BQy9DLE1BQ0YsSUFBSyxPQUNIckMsU0FBUzRDLGNBQWNqdkIsS0FBS3NSLE9BQU9vZCxLQUFLcGQsUUFDeEMsTUFDRixJQUFLLGdCQUNIK2EsU0FBUzZDLGlCQUFpQmx2QixLQUFLc1IsT0FBT29kLEtBQUtwZCxPQUFRdFIsS0FBS3NSLE9BQU81RSxRQUMvRCxNQUNGLElBQUssbUJBQ0gsSUFBS2tHLE9BQU9qRyxPQUFPa08sV0FBV2phLE9BSTVCLFlBSEFtSSxHQUFHQyxjQUFjc0ssS0FDZmhXLEtBQUtDLEtBQUtDLFNBQVMsK0JBSXZCNnVCLFNBQVM2QyxpQkFBaUJsdkIsS0FBS3NSLE9BQU9vZCxLQUFLcGQsT0FBUXNCLE9BQU9qRyxPQUFPa08sV0FBV3RrQixRQUFPd00sR0FBS0EsRUFBRTdJLE1BQU1pMUIsT0FBT3Z1QixTQUFRb0QsS0FBSWpCLEdBQUtBLEVBQUU3SSxTQUc5SCxNQUNGLENBQ0YsQ0FDQThGLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxhQUFNMjBCLENBQVNwMkIsT0FDYixNQUFNcTJCLFdBQWFyMkIsTUFBTXd4QixhQUFhNkMsUUFBUSxjQUN4Q3RyQixLQUFPcUosS0FBS3VkLE1BQU0wRyxZQUN4QixHQUFrQixhQUFkdHRCLEtBQUtqSCxLQUNQMkIsS0FBSzZ5QixjQUFjeEcsU0FBUzRCLGFBQWEzb0IsT0FDekN0RixLQUFLaEMsUUFBTyxRQUVaLEdBQW1CLFdBQWRzSCxLQUFLakgsTUFBMkMsVUFBdEJpSCxLQUFLd3RCLGNBQTZCLENBQUMsT0FBUSxTQUFTOXZCLFNBQVNzQyxLQUFLakgsTUFBTyxDQUN0RyxNQUFNMDBCLGVBQWlCbnJCLGNBQWNvckIscUJBQXFCejJCLE1BQU8rSSxLQUFLd3RCLGNBQWdCeHRCLEtBQUtqSCxNQUN2RmlILEtBQUt3dEIsY0FBOEIsVUFBZHh0QixLQUFLakgsTUFDNUIyQixLQUFLc1IsT0FBTzVFLE9BQVNxbUIsU0FBU3g4QixRQUFPbUcsR0FBS0EsRUFBRXl5QixPQUFPdnVCLFNBQ25EWixLQUFLaEMsUUFBTyxJQUNpQixJQUFwQiswQixTQUFTbnlCLFFBQ2QsQ0FBQyxRQUFTLFVBQVVvQyxTQUFTK3ZCLFNBQVMsR0FBRzEwQixRQUN2QzAwQixTQUFTLEdBQUd0RSxNQUNkenVCLEtBQUtzUixPQUFPOGYsTUFBUSxpQkFDcEJweEIsS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTLE9BQVF3RCxTQUFTLEdBQUd0RSxPQUU5Q3p1QixLQUFLc1IsT0FBTzhmLE1BQVEsZ0JBRXRCcHhCLEtBQUtzUixPQUFPb2QsS0FBS2EsU0FBUyxLQUFNd0QsU0FBUyxHQUFHOWtCLElBQzVDak8sS0FBS3NSLE9BQU9vZCxLQUFLYSxTQUFTLE9BQVF3RCxTQUFTLEdBQUd6OEIsTUFDOUMwSixLQUFLaEMsUUFBTyxHQUdsQixDQUVKLENBRUEsT0FBQTYwQixDQUFTbkUsTUFrQlAsT0FqQkExdUIsS0FBS3NSLE9BQU9vZCxLQUFPQSxLQUNELEtBQWRBLEtBQUtELEtBQ1B6dUIsS0FBS3NSLE9BQU84ZixNQUFRLGlCQUNDLEtBQVoxQyxLQUFLemdCLEtBQ2RqTyxLQUFLc1IsT0FBTzhmLE1BQVEsaUJBRWxCMUMsS0FBS3JZLGFBQWV2QyxVQUFVc1AsZ0JBQWdCclAsU0FBMkMsSUFBaEM5UCxTQUFTeXFCLEtBQUtocUIsU0FBVSxLQUFhZ3FCLEtBQUswQixVQUNyR3B3QixLQUFLc1IsT0FBTzJoQixjQUFlLEVBRTNCanpCLEtBQUtzUixPQUFPMmhCLGNBQWUsRUFFSixLQUFyQnZFLEtBQUtmLGNBQ1AzdEIsS0FBS3NSLE9BQU80aEIsVUFBVyxHQUVQLEtBQWR4RSxLQUFLanhCLE9BQ1B1QyxLQUFLc1IsT0FBTzZoQixTQUFVLEdBRWpCLEVBQ1QsQ0FFQSxtQkFBYTFpQixDQUFRMmlCLFNBQVcsQ0FBQyxFQUFHM1gsT0FBUyxDQUFDLEdBQzVDLE1BQU1uSyxPQUFTMVMsUUFBUUMsTUFBTTJhLFlBQVksQ0FDdkNrVixLQUFNLEtBQ04wQyxNQUFPLEdBQ1A2QixjQUFjLEVBQ2RDLFVBQVUsRUFDVkMsU0FBUyxFQUNUem1CLE9BQVEsSUFDUCtPLFFBQ0c0WCxPQUFTLElBQUlqRSxzQkFBc0I5ZCxPQUFRLENBQUMsR0FDbEQraEIsT0FBT1IsY0FBY3hHLFNBQVM0QixhQUFhbUYsV0FDM0NDLE9BQU9yMUIsUUFBTyxFQUNoQixFQy9VSyxNQUFNczFCLFdBQ1gsbUJBQWE3aUIsQ0FBUW5SLFFBQVUsQ0FBQyxHQUMxQkEsUUFBUStXLGFBQ1YvVyxRQUFROGpCLGdCQUFrQixDQUFDLEVBQ3ZCdFAsVUFBVXNQLGdCQUFnQkMsVUFBWS9qQixRQUFRK1csYUFDaEQvVyxRQUFROGpCLGdCQUFnQkMsU0FBVSxHQUVoQ3ZQLFVBQVVzUCxnQkFBZ0JyUCxVQUFZelUsUUFBUStXLGFBQ2hEL1csUUFBUThqQixnQkFBZ0JyUCxTQUFVLEdBRWhDRCxVQUFVc1AsZ0JBQWdCblAsT0FBUzNVLFFBQVErVyxhQUM3Qy9XLFFBQVE4akIsZ0JBQWdCblAsTUFBTyxHQUU3QkgsVUFBVXNQLGdCQUFnQmxaLFVBQVk1SyxRQUFRK1csYUFDaEQvVyxRQUFROGpCLGdCQUFnQmxaLFNBQVUsSUFJbEM1SyxRQUFRaEosT0FBU2dKLFFBQVFxdUIsY0FBYXJ1QixRQUFRcXVCLFlBQWNydUIsUUFBUWhKLE1BQ3hFLE1BQU1pOUIseUJBQ29ELFlBQXhEajJCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUN0Qm9JLEtBQU8sQ0FDWGt1QixzQkFDRWwyQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDekJvQyxRQUFRbTBCLHdCQUNYQywyQkFDRXAyQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxnQ0FDekJvQyxRQUFRcTBCLDZCQUNYdGQsV0FBWXZDLFVBQVVzUCxnQkFDdEJtUSx5QkFDQUssZUFBZ0J0MEIsUUFBUXMwQixpQkFBa0IsRUFDMUN0MEIsY0FHNEIsSUFBckJBLFFBQVF1MEIsWUFDYnYwQixRQUFRdzBCLGdCQUFrQixLQUU1Qnh1QixLQUFLeXVCLFVBQVlDLGdCQUFnQkQsVUFBVXowQixVQUU3QyxNQUFNeWEsV0FBYXdHLGVBQ2pCLHlDQUNBamIsTUFFRixPQUFPLElBQUkwVyxTQUFRaEIsVUFDakIsSUFBSW9YLFNBQVcsS0FDZixNQUFNNkIsSUFBTSxJQUFJQyxPQUFPLENBQ3JCemxCLE1BQU9uUCxRQUFRcXVCLFlBQ1hyd0IsS0FBS0MsS0FBS3lXLE9BQU8saUNBQWtDLENBQ25EMWQsS0FBTWdKLFFBQVFxdUIsY0FFZHJ3QixLQUFLQyxLQUFLQyxTQUFTLDZCQUN2QmdULFFBQVN1SixLQUNUb2EsUUFBUyxDQUNQaHpCLEtBQU0sQ0FDSjlELE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsaUJBQzFCNDJCLFNBQVVyYSxPQUNScVksU0FBVyxJQUFJaUMsU0FBU3RhLEtBQUssR0FBR3BHLGNBQWMscUJBQ3ZDcUgsUUFBUW9YLGFBSXJCL1csUUFBUyxPQUNUSixNQUFPLFNBRVRnWixJQUFJajJCLFFBQU8sRUFBSSxHQUVuQixFQ25FSyxNQUFNczJCLFNBQ1gsV0FBQWp2QixHQUNFckYsS0FBS21YLE1BQVEsR0FDYm5YLEtBQUt1MEIsVUFBWSxJQUNuQixDQUVBLDBCQUFhQyxDQUFlclksV0FDMUIsTUFBTXRNLFFBQVV2UyxLQUFLOGUsU0FBU2xmLElBQUlpZixXQUNsQyxJQUFLdE0sUUFBUyxPQUNkLE1BQU14RCxXQUFhck0sS0FBS3kwQixZQUFZNWtCLFNBRXBDLE9BREF4RCxLQUFLOFAsVUFBWUEsVUFDVjlQLElBQ1QsQ0FFQSx3QkFBYW9vQixDQUFhNWtCLFNBQ3hCLE1BQU02a0IsWUFBY2xKLEVBQUUzYixRQUFRVyxTQUFTLEdBQ3ZDLElBQUtra0IsWUFBYSxPQUNsQixNQUFNcm9CLFdBQWFyTSxLQUFLMjBCLG9CQUFvQkQsYUFFNUMsT0FEQXJvQixLQUFLd0QsUUFBVUEsUUFDUnhELElBQ1QsQ0FFQSxnQ0FBYXNvQixDQUFxQnRvQixNQUNoQyxNQUFNdW9CLFNBQVdqbUIsS0FBS3VkLE1BQU1DLFNBQVM5ZixLQUFLdFAsUUFBUXVVLFNBQ2xELGFBQWF0UixLQUFLK0IsU0FBUzZ5QixTQUM3QixDQUVBLHFCQUFhN3lCLENBQVV1RCxNQUNyQixNQUFNK0csS0FBT3pNLE9BQU91ZSxPQUFPLElBQUluZSxLQUFRc0YsTUFDdkMsSUFBSyxJQUFJNlgsTUFBUSxFQUFHQSxNQUFROVEsS0FBSzhLLE1BQU12VyxPQUFRdWMsUUFDQSxXQUF6QzlRLEtBQUs4SyxNQUFNZ0csUUFBUTlYLGFBQWEvTyxPQUNsQytWLEtBQUs4SyxNQUFNZ0csT0FBU3ZkLE9BQU91ZSxPQUFPLElBQUlySyxVQUFhekgsS0FBSzhLLE1BQU1nRyxRQUMxRDlRLEtBQUs4SyxNQUFNZ0csT0FBTzBYLFNBQ3BCeG9CLEtBQUs4SyxNQUFNZ0csT0FBTzJYLGdCQUFrQnpvQixLQUFLOEssTUFBTWdHLE9BQU80WCxnQkFJNUQsT0FBTzFvQixJQUNULENBRUEsc0JBQWFnVyxDQUFXOWxCLE9BQ3RCQSxNQUFNRSxpQkFFTixNQUFNdTRCLEtBQU96NEIsTUFBTUksY0FDbkIsR0FBSXE0QixNQUFRQSxLQUFLam1CLFVBQVV3VCxTQUFTLG9CQUFzQmpsQixLQUFLc0csS0FBSzJFLEtBQ2xFLE9BRUYsTUFBTXNILFFBQVVtbEIsS0FBS240QixRQUFRLGlCQUN2QndQLFdBQWFyTSxLQUFLdzBCLGNBQWMza0IsUUFBUTlTLFFBQVFvZixXQUN0RCxJQUFLOVAsS0FBTSxPQUNYLE1BQU00b0IsS0FBT0QsS0FBS2o0QixRQUFRazRCLEtBQzFCLElBQUtBLEtBQU0sT0FDWCxNQUFNeGEsT0FBU3VhLEtBQUtuNEIsUUFBUSxXQUM1QixHQUFLNGQsT0FFRSxDQUNMLE1BQU0wWixRQUFVMVosT0FBT3RGLGlCQUFpQixrQkFDeEMsSUFBSyxNQUFNK0ssS0FBS2lVLFFBQ2Q5bkIsS0FBSzZvQixVQUFVaFYsRUFBRW5qQixRQUFRazRCLE1BRTNCNW9CLEtBQUs4b0IsUUFBUUYsS0FDZixNQVBFNW9CLEtBQUsrb0IsV0FBV0gsTUFRbEI1b0IsS0FBSzRlLGdCQUNQLENBRUEscUJBQWFvSyxDQUFVL3ZCLE1BQ3JCLEdBQUloSSxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsSUF3Qkk4RCxLQXhCQStQLFNBQVdyVCxHQUFHNGlCLEtBQUsySixXQUFXLytCLFFBQU9zWixTQUVyQzdQLEtBQUt1MUIsY0FBY2wzQixPQUFTd1IsUUFBUXBRLFFBQVEsT0FBUSxTQUNmLGFBQXJDb1EsUUFBUXBRLFFBQVEsT0FBUSxZQUVwQixDQUFDLGdCQUFnQnVELFNBQVNoRCxLQUFLdTFCLGNBQWNsM0IsT0FDeEN3UixRQUFRcFEsUUFBUSxPQUFRLGVBQWlCNkYsS0FBS25FLEtBQUtvekIsYUFPaEUsR0FBSW5ZLFNBQVN4YixPQUFRLENBRW5CLE1BQU00MEIsVUFBWSxJQUFJajNCLEtBQUs2ZCxTQUFTLEdBQUdvWixXQUduQyxPQUZRLElBQUlqM0IsS0FDV2kzQixXQUFhLFlBRWhDcFosU0FBUyxHQUFHK1ksUUFBUSxPQUFRLFFBQVMsWUFDM0MvWSxTQUFXLEdBRWYsQ0FJSy9QLEtBREErUCxTQUFTeGIsYUFDSVosS0FBS3kwQixZQUFZclksU0FBUyxJQURmLElBQUlwYyxVQUVILElBQW5Cc0YsS0FBS3FmLFlBQ2R0WSxLQUFLc1ksVUFBWXJmLEtBQUtxZixpQkFFbEJ0WSxLQUFLb3BCLFFBQVFud0IsS0FDckIsTUFBT2hJLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFldFksS0FDekMsQ0FFQSx1QkFBYW93QixDQUFZeFQsUUFDdkIsTUFBTTlGLFNBQVdyVCxHQUFHNGlCLEtBQUsySixXQUFXLytCLFFBQU9zWixTQUNyQzdQLEtBQUt1MUIsY0FBY2wzQixPQUFTd1IsUUFBUXBRLFFBQVEsT0FBUSxTQUFnRCxhQUFyQ29RLFFBQVFwUSxRQUFRLE9BQVEsWUFDckYsQ0FBQyxnQkFBZ0J1RCxTQUFTaEQsS0FBS3UxQixjQUFjbDNCLE9BQ3hDd1IsUUFBUXBRLFFBQVEsT0FBUSxlQUFpQnlpQixVQU10RCxHQUFJOUYsU0FBU3hiLE9BQVEsT0FDYndiLFNBQVMsR0FBRytZLFFBQVEsT0FBUSxRQUFTLFlBQzNDLE1BQU05b0IsV0FBYXJNLEtBQUt5MEIsWUFBWXJZLFNBQVMsSUFDN0MvUCxLQUFLc3BCLGtCQUNDdHBCLEtBQUs0ZSxnQkFDYixDQUNGLENBRUEsZUFBTTJLLEdBQ0osTUFBTTdiLFdBQWF3RyxlQUFldmdCLEtBQUsrakIsT0FBT3JLLFNBQVUxWixNQUNsRHVyQixnQkFBa0JDLEVBQUV6UixNQUMxQndSLGdCQUFnQixHQUFHeHVCLFFBQVF1VSxPQUFTNUMsT0FBTzFPLEtBQUs0eUIsWUFFaEQsTUFBTXZ2QixTQUFXLENBQ2ZPLEtBQU10RyxLQUFLc0csS0FBS3FLLEdBQ2hCOEIsT0FBUXpTLEtBQUtDLEtBQUtDLFNBQVN3QyxLQUFLK2pCLE9BQU90VixPQUN2QytCLFFBQVMrYSxnQkFBZ0IsR0FBR0gsVUFDNUJsc0IsTUFBTyxDQUNMd0MsS0FBTSxDQUNKckQsS0FBTTJCLEtBQUsrakIsT0FBTzFsQixLQUNsQmlvQixNQUFPLFlBQ1BpTyxVQUFXdjBCLEtBQUt1MEIsYUFLbEIsQ0FBQyxTQUFVLGFBQWF2eEIsU0FBU2hELEtBQUtxQixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVlzaUIscUJBQXFCLE9BRWhDLGNBQWxCOWxCLEtBQUtxQixXQUEwQmdDLFNBQVNFLE9BQVEsR0FHcEQsYUFEa0JDLFlBQVlpTixPQUFPcE4sU0FFdkMsQ0FFQSxvQkFBTTRuQixHQUVKLFNBRE1qckIsS0FBSzYxQixVQUNONzFCLEtBQUttYyxVQUVILENBQ0wsTUFBTXBDLFdBQWF3RyxlQUFldmdCLEtBQUsrakIsT0FBT3JLLFNBQVUxWixNQUNsRHVyQixnQkFBa0JDLEVBQUVDLFVBQVUxUixNQUFNLEdBRzFDd1IsZ0JBQWdCeHVCLFFBQVF1VSxPQUFTNUMsT0FBTzFPLEtBQUs0eUIsWUFHN0MsTUFBTWxILFlBQWNwdUIsS0FBSzhlLFNBQVNsZixJQUFJOEMsS0FBS21jLFdBQ3ZDbmMsS0FBSzgxQixjQUFjcEssWUFBWXlKLFFBQVEsT0FBUSxRQUFTLFlBRTVELE1BQU16a0IsVUFBWWdiLFlBQVl4dEIsT0FBTyxDQUNuQ3NTLFFBQVMrYSxnQkFBZ0JILFlBRzNCLGFBRE1yaUIsR0FBRzRpQixLQUFLQyxjQUFjbGIsS0FBSyxHQUMxQkEsR0FDVCxPQWpCUTFRLEtBQUs0MUIsV0FrQmYsQ0FFQSxVQUFBbnVCLENBQVluQyxNQUNMQSxLQUFLeXdCLFFBQ1JuMkIsT0FBT3VlLE9BQU9uZSxLQUFLbVgsTUFBTTdSLEtBQUswd0IsTUFBTzF3QixLQUFLbkUsS0FFOUMsQ0FFQSxXQUFBODBCLENBQWEzd0IsTUFDWCxNQUFNMFEsTUFBUXBXLE9BQU91ZSxPQUFPLElBQUlySyxVQUFheE8sS0FBS25FLE1BQ2xEbkIsS0FBS21YLE1BQU0vZixLQUFLNGUsT0FDUyxpQkFBckJoVyxLQUFLK2pCLE9BQU8xbEIsT0FDZDJCLEtBQUt1MEIsVUFBWWp2QixLQUFLbkUsS0FBS296QixVQUUvQixDQUVBLE9BQUEyQixDQUFTNXdCLE1BQ1B0RixLQUFLbVgsTUFBTS9mLEtBQUtrTyxLQUNsQixDQUVBLFVBQUE0VyxDQUFZOFosTUFDVmgyQixLQUFLbVgsTUFBTWdmLE9BQU9ILEtBQU0sRUFDMUIsQ0FFQSxPQUFBYixDQUFTdnNCLFdBQ0ZBLFVBQW1DLFdBQXJCNGlCLEVBQUVudEIsS0FBS3VLLGFBQzFCNUksS0FBSzRJLFdBQVksRUFDbkIsQ0FFQSxTQUFBc3NCLENBQVd0c0IsV0FDSkEsVUFBbUMsV0FBckI0aUIsRUFBRW50QixLQUFLdUssYUFDMUI1SSxLQUFLNEksV0FBWSxFQUNuQixDQUVBLFVBQUF3c0IsQ0FBWXhzQixVQUNWNUksS0FBSzRJLFdBQWE1SSxLQUFLNEksU0FDekIsQ0FFQSxXQUFJaUgsR0FDRixPQUFJN1AsS0FBS28yQixTQUFpQnAyQixLQUFLbzJCLFNBQzNCcDJCLEtBQUtxMkIsV0FBbUIvNEIsS0FBSzhlLFNBQVNsZixJQUFJOEMsS0FBS3EyQixpQkFBbkQsQ0FFRixDQUVBLFdBQUl4bUIsQ0FBU2pFLEdBQ1g1TCxLQUFLbzJCLFNBQVd4cUIsQ0FDbEIsQ0FFQSxhQUFJdVEsR0FDRixPQUFJbmMsS0FBS3EyQixXQUFtQnIyQixLQUFLcTJCLFdBQzdCcjJCLEtBQUtvMkIsU0FBaUJwMkIsS0FBS28yQixTQUFTbm9CLFFBQXhDLENBRUYsQ0FFQSxhQUFJa08sQ0FBV3ZRLEdBQ2I1TCxLQUFLcTJCLFdBQWF6cUIsQ0FDcEIsQ0FJQSx3QkFBVzJwQixHQUNULE1BQU8sQ0FDTGUsUUFBUyxDQUFDLFNBQVUsU0FBVSxRQUFTLFdBQVksYUFDbkRDLGlCQUFrQixLQUV0QixDQUlBLFdBQUlDLEdBQ0YsT0FBT3gyQixLQUFLbVgsTUFBTTVnQixRQUFPNmdCLEdBQUtBLEVBQUVxZixRQUNsQyxDQUVBLFVBQUlBLEdBQ0YsR0FBSXoyQixLQUFLdzJCLFFBQVE1MUIsT0FBUSxPQUFPWixLQUFLdzJCLFFBQVEsRUFFL0MsQ0FFQSxXQUFJRSxHQUNGLE9BQU8xMkIsS0FBS21YLE1BQU01Z0IsUUFBTzZnQixJQUFNQSxFQUFFcWYsUUFDbkMsQ0FFQSxVQUFJRSxHQUNGLEdBQUkzMkIsS0FBSzAyQixRQUFROTFCLE9BQVEsT0FBT1osS0FBSzAyQixRQUFRLEVBRS9DLENBRUEsYUFBSUUsR0FDRixPQUFJNTJCLEtBQUt3MkIsUUFBUTUxQixPQUFTLENBRTVCLENBRUEsWUFBSWkyQixHQUNGLE9BQU92NUIsS0FBS3NHLEtBQUsyRSxJQUNuQixDQUVBLFlBQUlsSCxHQUVGLE9BREtyQixLQUFLMmtCLFlBQVcza0IsS0FBSzJrQixVQUFZcm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ3pEOEMsS0FBSzJrQixTQUNkLENBRUEsWUFBSXRqQixDQUFVdUssSUFDRixJQUFOQSxJQUFhNUwsS0FBSzJrQixVQUFZcm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQzVEOEMsS0FBSzJrQixVQUFZL1ksQ0FDbkIsQ0FFQSxRQUFJdEcsR0FDRixPQUFPcUosS0FBS3VkLE1BQU1sc0IsS0FBSzR5QixXQUN6QixDQUVBLGNBQUlBLEdBQ0YsT0FBT2prQixLQUFLQyxVQUFVNU8sTUFBTSxDQUFDbkUsSUFBS3pGLFNBQ2hDLEdBQWMsT0FBVkEsUUFDQTRKLEtBQUsrakIsT0FBT3VTLFNBQVN0ekIsU0FBU25ILE9BQzlCQSxJQUFJMk8sV0FBV3hLLEtBQUsrakIsT0FBT3dTLGtCQUMvQixPQUFPbmdDLFFBRVgsRUMzUkssTUFBTTBnQywwQkFBMEJ4QyxTQUNyQywyQkFBYXlDLENBQWdCaGQsTUFDM0JBLEtBQUtDLEdBQ0gsUUFDQSxxQ0FDQWhhLEtBQUtxaUIsVUFBVW5wQixLQUFLOEcsT0FHdEIrWixLQUFLQyxHQUNILFFBQ0Esd0JBQ0E4YyxrQkFBa0J0VSxTQUFTdHBCLEtBQUs4RyxPQUVsQytaLEtBQUtDLEdBQ0gsUUFDQSw2QkFDQThjLGtCQUFrQnRVLFNBQVN0cEIsS0FBSzhHLE1BRXBDLENBRUEsd0JBQVd1MUIsR0FDVCxPQUFPMzJCLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWs1QixjQUFlLENBQ3BEN2IsU0FBVSx1REFDVnJiLEtBQU0sZUFDTm9RLE1BQU8seUJBRVgsQ0FFQSxVQUFJc1YsR0FDRixPQUFPK1Msa0JBQWtCdkIsYUFDM0IsQ0FFQSxnQkFBSXlCLEdBQ0YsR0FBSWgzQixLQUFLNjBCLE9BQVEsQ0FDZixJQUFJL3pCLE1BQVEsRUFDWixJQUFLLE1BQU1zVyxLQUFLcFgsS0FBS21YLE1BQ2ZDLEVBQUVpSSxTQUFRdmUsT0FBUyxHQUV6QixPQUFPQSxLQUNULENBRUYsQ0FFQSxnQkFBSW0yQixHQUNGLE9BQU9qM0IsS0FBS21YLE1BQU0sSUFBSWpkLE9BQU9pWCxlQUFZdFQsQ0FDM0MsQ0FFQSxXQUFJcTVCLEdBQ0YsUUFBaUMsSUFBdEJsM0IsS0FBS2czQixhQUNoQixPQUFJaDNCLEtBQUs2aUIsSUFDSDdpQixLQUFLZzNCLGFBQWUsRUFHdEJoM0IsS0FBS20zQixJQUNIbjNCLEtBQUtnM0IsZUFBaUJoM0IsS0FBS21YLE1BQU12VyxZQUR2QyxDQUtGLENBRUEsV0FBSXdULEdBQ0YsUUFBNEIsSUFBakJwVSxLQUFLazNCLFFBQ2hCLE9BQVFsM0IsS0FBS2szQixPQUNmLENBRUEsb0JBQUlFLEdBQ0YsT0FBTzk1QixLQUFLOGtCLE1BQU1sbEIsSUFBSThDLEtBQUt1MEIsWUFBWWhzQixJQUN6QyxDQUVBLGlCQUFNd3NCLEdBQ0osSUFBSy8wQixLQUFLNjBCLE9BQVEsT0FDbEIsTUFBTTdlLE1BQVEsSUFBSWxDLFVBS2xCLGFBSk1rQyxNQUFNaUwsU0FBUyxDQUNuQjlmLEtBQU1uQixLQUFLcTNCLE1BQU1yaEIsTUFBTWpCLGNBQWdCLEdBQ3ZDcU0sUUFBUSxVQUVHcEwsTUFBTStlLFlBQVksQ0FBRXVDLGFBQWEsR0FDaEQsQ0FFQSxPQUFBN0IsQ0FBU253QixNQUNQLE9BQVFBLEtBQUtuSSxRQUNYLElBQUssTUFJTCxJQUFLLE9BQ0g2QyxLQUFLaTJCLFlBQVkzd0IsTUFDakIsTUFFRixJQUFLLGFBQ0h0RixLQUFLeUgsV0FBV25DLE1BQ2hCLE1BR0YsSUFBSyxhQUNIdEYsS0FBS3UzQixXQUFXanlCLE1BS2hCaEksS0FBS3NHLEtBQUsyRSxLQUFNdkksS0FBS2lyQixpQkFDcEIzdEIsS0FBS3FnQixPQUFPQyxLQUFLLGNBQWV0WSxLQUN2QyxDQUVBLGdCQUFNaXlCLENBQVlqeUIsTUFDWmhJLEtBQUtzRyxLQUFLMkUsT0FDUHZJLEtBQUs2MEIsU0FDUjcwQixLQUFLNjBCLFFBQVMsRUFDZDcwQixLQUFLcTNCLE1BQVEveEIsS0FBS25FLE1BR3hCLENBRUEscUJBQWFxaEIsQ0FBVWptQixPQUNyQkEsTUFBTUUsaUJBRU4sTUFBTUMsRUFBSUgsTUFBTUksY0FDVlEsT0FBU1QsRUFBRUssUUFBUUksT0FDbkJQLEdBQUtGLEVBQUVHLFFBQVEsaUJBQ2ZnVCxRQUFVblQsRUFBRUcsUUFBUSxpQkFDcEI2M0IsWUFBY2g0QixFQUFFRyxRQUFRLGlCQUN4QndQLFdBQWF5cUIsa0JBQWtCbkMsb0JBQW9CRCxhQUN6RHJvQixLQUFLOFAsVUFBWXRNLFFBQVE5UyxRQUFRb2YsVUFDakMsTUFBTTZaLEtBQU85NUIsT0FBT1UsSUFBSUcsU0FBU2k1QixNQUVqQyxPQUFRNzRCLFFBQ04sSUFBSyxjQUNIa1AsS0FBSzZQLFdBQVc4WixZQUNWM3BCLEtBQUs0ZSxpQkFDWCxNQUdGLElBQUssYUFDSDVlLEtBQUtzcEIsa0JBQ0N0cEIsS0FBSzRlLGlCQUNYLE1BR0YsSUFBSyxZQUFhLENBQ2hCLE1BQU1ubkIsS0FBTyxDQUFDLEVBQ2QsSUFBSyxNQUFNbEMsUUFBUXlLLEtBQUs4SyxNQUFPLENBQzdCLE1BQU1wQyxhQUFlOVEsU0FBU3JDLEtBQUttVCxhQUFjLElBQzVDalosTUFBTWlaLGdCQUNUalIsS0FBS2lSLGVBQWdCLEVBRXpCLENBRUEsTUFBTTVULFdBQWFELFNBQVMyQyxhQUFhLENBQUVDLE9BQzNDM0MsS0FBS296QixVQUFZajNCLEtBQUtzRyxLQUFLcUssR0FFM0IsTUFBTTNJLEtBQU8sQ0FDWGpILEtBQU0yQixLQUFLdTFCLGNBQWNsM0IsS0FDekJsQixPQUFRLGFBQ1I0NEIsT0FBUXo0QixLQUFLc0csS0FBSzJFLEtBQ2xCcEgsTUFFRnEyQixZQUFZQyxLQUFLLENBQUVwbEIsSUFBS3pQLE9BQU84MEIsT0FBTzkxQixPQUFRLEdBQzlDeUssS0FBS29wQixRQUFRbndCLE1BQ2IsS0FDRixDQUVBLFFBQVMsQ0FDUCxNQUFNaEcsUUFBVSxDQUNkcEIsUUFBUSxFQUNSb0gsS0FBTTVJLEVBQUVLLFFBQ1IwYyxRQUFTL2MsRUFBRXFTLFVBQ1hnVyxPQUFRcm9CLFNBRUpvWCxVQUFVNmpCLE1BQU10ckIsS0FBSzhLLE1BQU02ZSxNQUFPNzRCLE9BQVFtQyxTQUNoRCxNQUFNZ0csS0FBTyxDQUNYakgsS0FBTTJCLEtBQUt1MUIsY0FBY2wzQixLQUN6QmxCLE9BQVEsYUFDUjY0QixLQUNBRCxPQUFRejRCLEtBQUtzRyxLQUFLMkUsS0FDbEJwSCxLQUFNLENBQ0pvekIsVUFBV2ozQixLQUFLc0csS0FBS3FLLEtBR3BCM1EsS0FBS3NHLEtBQUsyRSxPQUFNakQsS0FBS25FLEtBQU9rTCxLQUFLOEssTUFBTTZlLE1BQU10WSxjQUNsRHJSLEtBQUtvcEIsUUFBUW53QixNQUNiLEtBQ0YsRUFFSixDQUVBLGFBQU11d0IsR0FDSixHQUFLNzFCLEtBQUtxM0IsTUFBVixDQUVBcjNCLEtBQUttWCxNQUFRblgsS0FBS21YLE1BQU01Z0IsUUFBTzRLLFdBQ08sSUFBdEJBLEtBQUtqSCxNQUFNNkIsU0FHM0IsSUFBSyxNQUFNcWIsS0FBS3BYLEtBQUttWCxNQUNkQyxFQUFFeWQsU0FDTHpkLEVBQUUxUyxTQUFXMFMsRUFBRXJDLGNBQWdCLEVBQy9CcUMsRUFBRWYsV0FBYWUsRUFBRWYsWUFBY3ZDLFVBQVVzUCxnQkFBZ0JyUCxRQUN6RHFELEVBQUV3Z0IsaUJBQW1CeGdCLEVBQUV3Z0Isa0JBQW9CLEVBQzNDeGdCLEVBQUV5Z0Isc0JBQXdCemdCLEVBQUV5Z0IsdUJBQXlCLFFBQy9DemdCLEVBQUU2SixTQUFTLENBQUU5ZixLQUFNbkIsS0FBS3EzQixNQUFNamdCLEVBQUUxUyxVQUFXMGMsUUFBUSxLQUc3RCxJQUFLLElBQUlkLEVBQUksRUFBR0EsRUFBSXRnQixLQUFLbVgsTUFBTXZXLE9BQVEwZixJQUNqQ3RnQixLQUFLbVgsTUFBTW1KLEdBQUd1VSxTQUNoQjcwQixLQUFLbVgsTUFBTW1KLEdBQUd3VSxnQkFBa0I5MEIsS0FBS21YLE1BQU1tSixHQUFHeVUsWUFBWSxDQUN4RCtDLGdCQUFnQixLQUt0QjkzQixLQUFLODBCLGdCQUFrQjkwQixLQUFLKzBCLGFBdkJYLENBd0JuQixDQUVBLFNBQUFZLEdBQ0UzMUIsS0FBSzgxQixRQUFTLENBQ2hCLEVDeE5LLE1BQU1pQyxvQkFDWCxXQUFBMXlCLENBQWEvRixRQUFVLENBQUMsR0FDdEJVLEtBQUtnNEIsU0FBVzE0QixPQUNsQixDQUVBLFdBQUlBLEdBQ0YsT0FBT1YsUUFBUUMsTUFBTTJhLFlBQVl4WixLQUFLcUYsWUFBWWtVLGVBQWdCdlosS0FBS2c0QixTQUN6RSxDQUVBLFlBQUl0ZSxHQUNGLE9BQU8xWixLQUFLVixRQUFRb2EsUUFDdEIsQ0FFQSxjQUFJdWUsR0FDRixPQUFPajRCLEtBQUtWLFFBQVFtYSxPQUN0QixDQUVBLGVBQU1tYyxDQUFXc0Msa0JBQW9CLENBQUMsR0FDcEMsTUFBTW5lLFdBQWF3RyxlQUFldmdCLEtBQUswWixTQUFVMVosTUFDM0N1ckIsZ0JBQWtCQyxFQUFFelIsTUFBTSxHQUNoQ3dSLGdCQUFnQnh1QixRQUFRdVUsT0FBUzVDLE9BQU8xTyxLQUFLNHlCLFlBQzdDckgsZ0JBQWdCeHVCLFFBQVFvN0IsVUFBWW40QixLQUFLcUYsWUFBWS9PLEtBQ3JEaTFCLGdCQUFnQnhjLFVBQVVDLE9BQU9oUCxLQUFLaTRCLFlBRXRDLE1BQU01MEIsU0FBV3pFLFFBQVFDLE1BQU0yYSxZQUM3QixDQUNFNVYsS0FBTXRHLEtBQUtzRyxLQUFLcUssR0FDaEI4QixPQUFRelMsS0FBS0MsS0FBS0MsU0FBU3dDLEtBQUtWLFFBQVFtUCxPQUN4QytCLFFBQVMrYSxnQkFBZ0JILFdBRTNCOE0sbUJBR0UsQ0FBQyxTQUFVLGFBQWFsMUIsU0FBU2hELEtBQUtxQixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVlzaUIscUJBQXFCLE9BRWhDLGNBQWxCOWxCLEtBQUtxQixXQUEwQmdDLFNBQVNFLE9BQVEsR0FFcERDLFlBQVlpTixPQUFPcE4sVUFBVWdFLE1BQUtxSixLQUN6QkEsS0FFWCxDQUVBLG9CQUFNdWEsQ0FBZ0IzckIsUUFBVSxDQUFDLEdBRS9CLEdBRElBLFFBQVF1MkIsU0FBUzcxQixLQUFLNjFCLFVBQ3JCNzFCLEtBQUttYyxVQUVILENBQ0wsTUFBTXBDLFdBQWF3RyxlQUFldmdCLEtBQUswWixTQUFVMVosTUFDM0N1ckIsZ0JBQWtCQyxFQUFFQyxVQUFVMVIsTUFBTSxHQUcxQ3dSLGdCQUFnQnh1QixRQUFRdVUsT0FBUzVDLE9BQU8xTyxLQUFLNHlCLFlBQzdDckgsZ0JBQWdCeHVCLFFBQVFvN0IsVUFBWW40QixLQUFLcUYsWUFBWS9PLEtBQ3JEaTFCLGdCQUFnQnhjLFVBQVVDLE9BQU9oUCxLQUFLaTRCLFlBR3RDLE1BQU12TSxZQUFjcHVCLEtBQUs4ZSxTQUFTbGYsSUFBSThDLEtBQUttYyxXQUN2Q25jLEtBQUs4MUIsY0FBY3BLLFlBQVl5SixRQUFRLE9BQVEsUUFBUyxZQUU1RCxNQUFNemtCLFVBQVlnYixZQUFZeHRCLE9BQU8sQ0FDbkNzUyxRQUFTK2EsZ0JBQWdCSCxZQUczQixhQURNcmlCLEdBQUc0aUIsS0FBS0MsY0FBY2xiLEtBQUssR0FDMUJBLEdBQ1QsQ0FuQkUxUSxLQUFLNDFCLFdBb0JULENBRUEsaUJBQUE5YixDQUFtQkMsTUFDakJBLEtBQUtDLEdBQ0gsUUFDQSxxQ0FDQWhhLEtBQUtxaUIsVUFBVW5wQixLQUFLOEcsT0FFdEIrWixLQUFLQyxHQUFHLFFBQVMsK0JBQWdDaGEsS0FBS3FpQixVQUFVbnBCLEtBQUs4RyxPQUNyRStaLEtBQUtDLEdBQUcsUUFBUyw0QkFBNkJoYSxLQUFLMnhCLFVBQVV6NEIsS0FBSzhHLE9BQ2xFK1osS0FBS0MsR0FBRyxXQUFZLFFBQVNoYSxLQUFLMnhCLFVBQVV6NEIsS0FBSzhHLE9BQ2pEK1osS0FBS0MsR0FBRyxRQUFTLDJCQUE0QmhhLEtBQUtvNEIsVUFBVWwvQixLQUFLOEcsT0FDakUrWixLQUFLQyxHQUFHLFVBQVcsT0FBUWhhLEtBQUtxNEIsT0FBT24vQixLQUFLOEcsTUFDOUMsQ0FFQSwwQkFBYXM0QixDQUFldmUsTUFDMUIsTUFDTXdSLGdCQURxQnhSLEtBQUssR0FDV3BHLGNBQWMsY0FDekQsSUFBSzRYLGdCQUFpQixPQUN0QixJQUFLQSxnQkFBZ0J4dUIsUUFBUW83QixVQUFXLE9BQ3hDLElBQ0d2NEIsT0FBTzI0QixvQkFBb0JqN0IsS0FBS29FLEtBQUs4MkIsT0FBT3gxQixTQUMzQ3VvQixnQkFBZ0J4dUIsUUFBUW83QixXQUcxQixPQUVGLE1BQU05ckIsV0FBYTByQixvQkFBb0JwRCxvQkFBb0JwSixpQkFDckRrTixVQUFZNzRCLE9BQU91ZSxPQUN2QixJQUFJN2dCLEtBQUtvRSxLQUFLODJCLE1BQU1qTixnQkFBZ0J4dUIsUUFBUW83QixXQUM1QzlyQixNQUVGb3NCLFVBQVVDLGVBQ1ZELFVBQVUzZSxrQkFBa0JDLEtBQzlCLENBTUEsWUFBQTJlLEdBQWlCLENBT2pCLFNBQUFOLENBQVc3N0IsT0FDVCxNQUVNWSxPQUZTWixNQUFNSSxjQUVDSSxRQUFRSSxPQUMxQjZDLEtBQUs3QyxTQUFTNkMsS0FBSzdDLFFBQVEsQ0FBRVosTUFBTzJCLFFBQVEsR0FDbEQsQ0FPQSxNQUFBbTZCLENBQVE5N0IsT0FFTixNQURrQixVQUFkQSxNQUFNVixLQUFpQm1FLEtBQUsyeEIsVUFBVXAxQixPQUNyQixVQUFkQSxNQUFNVixHQUNmLENBRUEsU0FBQTgxQixDQUFXcDFCLE9BQ1RBLE1BQU1FLGlCQUVOLE1BQ000UCxLQURTOVAsTUFBTUksY0FDREUsUUFBUSxxQkFDNUIsSUFBS3dQLEtBQU0sT0FDS3JNLEtBQUsyNEIsUUFBUXRzQixPQUNoQnJNLEtBQUtpckIsZ0JBQ3BCLENBRUEsT0FBQTBOLENBQVN0c0IsTUFDUCxNQUFNdXNCLE1BQVF2c0IsS0FBSzhJLGlCQUFpQixRQUNwQyxJQUFJb0gsU0FBVSxFQUNkLElBQUssSUFBSStELEVBQUksRUFBR0EsRUFBSXNZLE1BQU1oNEIsT0FBUTBmLElBQUssQ0FDckMsTUFBTXVZLEtBQU9ELE1BQU10WSxHQUVuQixJQUFJaGIsS0FETyxJQUFJd3pCLGlCQUFpQkQsTUFDbEJ2bkIsT0FDZGhNLEtBQU8xRyxRQUFRQyxNQUFNazZCLFdBQVcvNEIsS0FBTXBCLFFBQVFDLE1BQU11ZixhQUFhOVksT0FDakUsSUFBSyxNQUFPekosSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTlFLE1BQ3hDdEYsS0FBS25FLEtBQU96RixNQUNabW1CLFNBQVUsQ0FFZCxDQUNBLE9BQU9BLE9BQ1QsQ0FFQSxXQUFJMU0sR0FDRixPQUFJN1AsS0FBS28yQixTQUFpQnAyQixLQUFLbzJCLFNBQzNCcDJCLEtBQUtxMkIsV0FBbUIvNEIsS0FBSzhlLFNBQVNsZixJQUFJOEMsS0FBS3EyQixpQkFBbkQsQ0FFRixDQUVBLFdBQUl4bUIsQ0FBU2pFLEdBQ1g1TCxLQUFLbzJCLFNBQVd4cUIsQ0FDbEIsQ0FFQSxhQUFJdVEsR0FDRixPQUFJbmMsS0FBS3EyQixXQUFtQnIyQixLQUFLcTJCLFdBQzdCcjJCLEtBQUtvMkIsU0FBaUJwMkIsS0FBS28yQixTQUFTbm9CLFFBQXhDLENBRUYsQ0FFQSxhQUFJa08sQ0FBV3ZRLEdBQ2I1TCxLQUFLcTJCLFdBQWF6cUIsQ0FDcEIsQ0FFQSx5QkFBVzJOLEdBQ1QsTUFBTyxDQUNMRSxRQUFTLENBQUMsb0JBQ1Y2YyxRQUFTLENBQUMsU0FBVSxTQUFVLFFBQVMsV0FBWSxhQUNuREMsaUJBQWtCLEtBRXRCLENBRUEsUUFBSWp4QixHQUNGLE9BQU9xSixLQUFLdWQsTUFBTWxzQixLQUFLNHlCLFdBQ3pCLENBRUEsY0FBSUEsR0FDRixPQUFPamtCLEtBQUtDLFVBQVU1TyxNQUFNLENBQUNuRSxJQUFLekYsU0FDaEMsR0FBYyxPQUFWQSxRQUNBNEosS0FBS1YsUUFBUWczQixTQUFTdHpCLFNBQVNuSCxPQUMvQkEsSUFBSTJPLFdBQVd4SyxLQUFLVixRQUFRaTNCLGtCQUNoQyxPQUFPbmdDLFFBRVgsQ0FFQSxZQUFJaUwsR0FFRixPQURLckIsS0FBSzJrQixZQUFXM2tCLEtBQUsya0IsVUFBWXJuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUN6RDhDLEtBQUsya0IsU0FDZCxDQUVBLFlBQUl0akIsQ0FBVXVLLElBQ0YsSUFBTkEsSUFBYTVMLEtBQUsya0IsVUFBWXJuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUM1RDhDLEtBQUsya0IsVUFBWS9ZLENBQ25CLENBRUEsMEJBQWE0b0IsQ0FBZXJZLFdBQzFCLE1BQU10TSxRQUFVdlMsS0FBSzhlLFNBQVNsZixJQUFJaWYsV0FDbEMsSUFBS3RNLFFBQVMsT0FDZCxNQUFNeEQsV0FBYXJNLEtBQUt5MEIsWUFBWTVrQixTQUVwQyxPQURBeEQsS0FBSzhQLFVBQVlBLFVBQ1Y5UCxJQUNULENBRUEsd0JBQWFvb0IsQ0FBYTVrQixTQUN4QixNQUFNNmtCLFlBQWNsSixFQUFFM2IsUUFBUVcsU0FBUyxHQUN2QyxJQUFLa2tCLFlBQWEsT0FDbEIsTUFBTXJvQixXQUFhck0sS0FBSzIwQixvQkFBb0JELGFBRTVDLE9BREFyb0IsS0FBS3dELFFBQVVBLFFBQ1J4RCxJQUNULENBRUEsZ0NBQWFzb0IsQ0FBcUJ0b0IsTUFDaEMsTUFBTXVvQixTQUFXam1CLEtBQUt1ZCxNQUFNQyxTQUFTOWYsS0FBS3RQLFFBQVF1VSxTQUNsRCxJQUFLc2pCLFNBQVN6WSxVQUFXLENBQ3ZCLE1BQU10TSxRQUFVeEQsS0FBS3hQLFFBQVEsWUFDN0IrM0IsU0FBU3pZLFVBQVl0TSxTQUFTOVMsU0FBU29mLFNBQ3pDLENBQ0EsYUFBYW5jLEtBQUsrQixTQUFTNnlCLFNBQzdCLENBRUEscUJBQWE3eUIsQ0FBVXVELE1BQ3JCLE1BQU0rRyxLQUFPek0sT0FBT3VlLE9BQU8sSUFBSW5lLEtBQVFzRixNQUV2QyxhQURNK0csS0FBS3FzQixlQUNKcnNCLElBQ1QsQ0FHQSxPQUFBOG9CLENBQVN2c0IsV0FDRkEsVUFBbUMsV0FBckI0aUIsRUFBRW50QixLQUFLdUssYUFDMUI1SSxLQUFLNEksV0FBWSxFQUNuQixDQUVBLFNBQUFzc0IsQ0FBV3RzQixXQUNKQSxVQUFtQyxXQUFyQjRpQixFQUFFbnRCLEtBQUt1SyxhQUMxQjVJLEtBQUs0SSxXQUFZLEVBQ25CLENBRUEsVUFBQXdzQixDQUFZeHNCLFVBQ1Y1SSxLQUFLNEksV0FBYTVJLEtBQUs0SSxTQUN6QixDQUVBLGVBQU15WixDQUFXOWxCLE9BQ2ZBLE1BQU1FLGlCQUVOLE1BQU1zb0IsT0FBU3hvQixNQUFNSSxjQUNyQixHQUFJLFdBQVlvb0IsT0FBT2hvQixRQUFTLE9BQU9pRCxLQUFLbzRCLFVBQVU3N0IsT0FDdEQsR0FDRXdvQixRQUNBQSxPQUFPaFcsVUFBVXdULFNBQVMsb0JBQ3pCamxCLEtBQUtzRyxLQUFLMkUsS0FFWCxPQUVGLE1BQU0wc0IsS0FBT2xRLE9BQU9ob0IsUUFBUWs0QixLQUM1QixJQUFLQSxLQUFNLE9BQ1gsTUFBTXhhLE9BQVNzSyxPQUFPbG9CLFFBQVEsYUFDOUIsR0FBSzRkLE9BRUUsQ0FDTCxNQUFNMFosUUFBVTFaLE9BQU90RixpQkFBaUIsb0JBQ3hDLElBQUssTUFBTStLLEtBQUtpVSxRQUNkbjBCLEtBQUtrMUIsVUFBVWhWLEVBQUVuakIsUUFBUWs0QixNQUUzQmoxQixLQUFLbTFCLFFBQVFGLEtBQ2YsTUFQRWoxQixLQUFLbzFCLFdBQVdILE1BUWxCLE1BQU01b0IsS0FBTzBZLE9BQU9sb0IsUUFBUSxxQkFDeEJ3UCxNQUFNck0sS0FBSzI0QixRQUFRdHNCLE1BQ3ZCck0sS0FBS2lyQixnQkFDUCxDQUlBLHNCQUFJekcsR0FDRixPQUFPbG5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUNuQyxDQUVBLFdBQUl1bkIsR0FDRixPQUFLemtCLEtBQUtxQixlQUNOeEQsSUFBY21DLEtBQUswa0IsV0FDckIxa0IsS0FBSzBrQixTQUE2QixjQUFsQjFrQixLQUFLcUIsVUFFaEJyQixLQUFLMGtCLFVBSmUsSUFLN0IsQ0FFQSxXQUFJRCxDQUFTN1ksR0FDWDVMLEtBQUswa0IsU0FBVzlZLENBQ2xCLENBRUEsU0FBSTFSLEdBQ0YsT0FBSzhGLEtBQUttUixTQUNINUIsV0FBV3FCLGdCQUFnQjVRLEtBQUttUixVQURaLElBRTdCLENBRUEsU0FBSUgsR0FDRixPQUFLaFIsS0FBSzlGLE1BQ0hxVixXQUFXMEIsZ0JBQWdCalIsS0FBS21SLFVBRGYsSUFFMUIsQ0FFQSxRQUFJbEwsR0FDRixPQUFLakcsS0FBS3FVLE9BQ0hyVSxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJOEMsS0FBS3FVLFFBRFIsSUFFM0IsQ0FFQSxVQUFJdVEsR0FDRixPQUFPNWtCLEtBQUtpRyxJQUNkLENBRUEsa0JBQUk0ZSxHQUNGLE1BQU8sSUFBSXZuQixLQUFLc0csS0FBS2toQixRQUN2QixDQUVBLFVBQUlDLEdBQ0YsT0FBSS9rQixLQUFLZ2xCLFlBQW9CaGxCLEtBQUtnbEIsWUFDM0JobEIsS0FBS2lsQixXQUNkLENBRUEsaUJBQUkrVCxHQUNGLE9BQU9oNUIsS0FBSytrQixPQUFPa1UsT0FDckIsQ0FFQSxZQUFJcEMsR0FDRixPQUFPdjVCLEtBQUtzRyxLQUFLMkUsSUFDbkIsQ0FNQSxlQUFJeWMsR0FjRixPQWJLaGxCLEtBQUtrbEIsZUFDSmxsQixLQUFLbWxCLFdBQ1BubEIsS0FBS2tsQixhQUFlM1YsV0FBVzBCLGdCQUFnQmpSLEtBQUttbEIsYUFFcERubEIsS0FBS2tsQixhQUFlbGxCLEtBQUs2a0IsZUFBZU8sTUFDcENwbEIsS0FBS2tsQixhQUNQbGxCLEtBQUttbEIsV0FBYSxHQUFHbmxCLEtBQUtrbEIsYUFBYXRZLE1BQU1xQixNQUFNak8sS0FBS2tsQixhQUFhalgsS0FHckVqTyxLQUFLa2xCLGFBQWUsT0FJbkJsbEIsS0FBS2tsQixZQUNkLENBRUEsZUFBSUQsR0FXRixPQVZLamxCLEtBQUtxbEIsZUFDSnJsQixLQUFLZ2xCLFlBQ1BobEIsS0FBS3FsQixhQUNIcmxCLEtBQUtnbEIsWUFBWTlxQixPQUNqQjhGLEtBQUtnbEIsWUFBWTFmLEtBQUtwTCxPQUN0QjhGLEtBQUtnbEIsWUFBWTFmLEtBQUt1SixTQUV4QjdPLEtBQUtxbEIsYUFBZTlWLFdBQVdxQixnQkFBZ0I1USxLQUFLbWxCLGFBR2pEbmxCLEtBQUtxbEIsWUFDZCxDQUVBLGFBQUlDLEdBQ0YsT0FBS3RsQixLQUFLZ2xCLGFBQWdCaGxCLEtBQUtpbEIsWUFDeEJqbEIsS0FBS21sQixXQUR1QyxJQUVyRCxDQUVBLGFBQUlJLEdBQ0YsU0FBS3ZsQixLQUFLZ2xCLGNBQWdCaGxCLEtBQUtpbEIsWUFFakMsQ0FFQSxhQUFJSyxDQUFXMVosR0FDYjVMLEtBQUttbEIsV0FBYXZaLENBQ3BCLENBRUEsVUFBSStYLEdBQ0YsT0FBTzNqQixLQUFLOUYsTUFBTXNyQixnQkFBZ0J4bEIsS0FBS3FVLE9BQ3pDLENBRUEsYUFBSW9SLEdBQ0YsTUFBTS9mLElBQU02SixXQUFXNEMsbUJBQW1CblMsS0FBS3NsQixXQUMvQyxPQUFJNWYsS0FDRyxvQ0FDVCxDQUVBLFFBQUlwUCxHQUNGLE9BQUkwSixLQUFLZ1IsTUFBY2hSLEtBQUtnUixNQUFNMWEsS0FDM0IwSixLQUFLOUYsTUFBTTVELElBQ3BCLENBRUEsY0FBSW92QixHQUNGLE9BQUsxbEIsS0FBSytrQixPQUNIL2tCLEtBQUsra0IsT0FBT3p1QixLQURNLE9BRTNCLENBRUEsWUFBSXF2QixHQUNGLE1BQU1qZ0IsSUFBTTZKLFdBQVc0QyxtQkFBbUJuUyxLQUFLbVIsVUFDL0MsT0FBSXpMLEtBQ0csb0NBQ1QsRUN2WkssTUFBTXd6QixtQkFBbUJuQixvQkFLOUIseUJBQVd4ZSxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyRCtjLFFBQVMsQ0FDUCxlQUNBLGVBQ0EsWUFDQSxtQkFDQXZxQixPQUFPMVAsTUFBTWtkLGVBQWUrYyxTQUM5QjVjLFNBQVUsaURBRWQsQ0FNQSxrQkFBTWdmLEdBQ0ExNEIsS0FBS201QixZQUFtRCxXQUFyQ241QixLQUFLbTVCLFdBQVc5ekIsWUFBWS9PLE9BQ2pEMEosS0FBS201QixXQUFhcjNCLEtBQUtDLFNBQVMvQixLQUFLbTVCLFlBRXpDLENBRUEsU0FBQWYsQ0FBVzc3QixPQUNURixNQUFNKzdCLFVBQVU3N0IsTUFDbEIsQ0FFQSxZQUFJMlgsR0FDRixPQUFPbFUsS0FBS1YsUUFBUTRVLFFBQ3RCLENBRUEsWUFBSUEsQ0FBVXRJLEdBQ1o1TCxLQUFLZzRCLFNBQVM5akIsU0FBV3RJLENBQzNCLENBRUEsVUFBSXlDLEdBQ0YsWUFBNEIsSUFBakJyTyxLQUFLbzVCLFFBQWdDcDVCLEtBQUs0a0IsT0FBT3ZXLE9BQ3JEck8sS0FBS281QixPQUNkLENBRUEsVUFBSS9xQixDQUFRekMsR0FDVjVMLEtBQUtvNUIsUUFBVXh0QixDQUNqQixDQUVBLG1CQUFJeXRCLEdBQ0YsTUFBa0MsaUJBQXZCcjVCLEtBQUtzNUIsa0JBQ1h4OUIsTUFBTUksT0FBTzhELEtBQUtzNUIsaUJBQ2hCeDNCLEtBQUt5M0IsU0FBU3Y1QixLQUFLczVCLGVBQzVCLENBRUEsa0JBQUlFLEdBQ0YsT0FBUTE5QixNQUFNSSxPQUFPOEQsS0FBS3M1QixlQUM1QixDQUVBLGlCQUFJRyxHQUNGLE1BQTBCLGlCQUFmejVCLEtBQUsvRCxVQUNYSCxNQUFNSSxPQUFPOEQsS0FBSy9ELFNBQ2hCNkYsS0FBS3kzQixTQUFTdjVCLEtBQUsvRCxPQUM1QixDQUVBLHFCQUFJeTlCLEdBQ0YsSUFBSXhpQixPQUFTaGIsT0FDWDhELEtBQUt3NUIsZUFBaUJ4NUIsS0FBS3M1QixjQUFnQnQ1QixLQUFLbUIsS0FBS3NCLE9BRXZELE9BQUt6QyxLQUFLMjVCLGVBQ0o3OUIsTUFBTUksT0FBTzhELEtBQUsvRCxTQUFXQyxPQUFPOEQsS0FBSy9ELE9BQVMsS0FDcERpYixRQUFrQmhiLE9BQU84RCxLQUFLL0QsU0FFM0JILE1BQU1JLE9BQU84RCxLQUFLL0QsU0FDakJpYixRQUFVLEdBQ0w1WixLQUFLQyxLQUFLQyxTQUFTLDJCQUl6QjBaLE1BQ1QsQ0FFQSxZQUFJMGlCLEdBQ0YsR0FBSTU1QixLQUFLNjBCLE9BQVEsQ0FDZixNQUFNM2QsT0FBU2xYLEtBQUt3NUIsZUFBaUJ4NUIsS0FBS3M1QixjQUFnQnQ1QixLQUFLbUIsS0FBS3NCLE1BQ3BFLE9BQUt6QyxLQUFLMjVCLGVBTUV6aUIsUUFBVSxJQUxmcGIsTUFBTUksT0FBTzhELEtBQUsvRCxZQUNYaWIsT0FBU2hiLE9BQU84RCxLQUFLL0QsUUFBVSxFQU0vQyxDQUFPLE9BQU8sQ0FDaEIsQ0FFQSxvQkFBTWd2QixHQWlCSixJQWhCSWpyQixLQUFLVixRQUFRaWxCLGFBQWdCdmtCLEtBQUttQixNQUFTbkIsS0FBS3c1QixzQkFDNUN4NUIsS0FBSzY1QixXQUFXLENBQUUzN0IsUUFBUSxJQUdoQzhCLEtBQUt3NUIsZ0JBQ0p4NUIsS0FBS21CLE1BQTJCLE1BQW5CbkIsS0FBS21CLEtBQUtzQixPQUN4QnpDLEtBQUs4NUIsV0FFTDk1QixLQUFLNjBCLFFBQVMsRUFFZDcwQixLQUFLNjBCLFFBQVMsR0FFWjcwQixLQUFLVixRQUFRaWxCLGFBQWdCdmtCLEtBQUsrNUIsaUJBQW9CLzVCLEtBQUs0NUIsZ0JBQ3ZENTVCLEtBQUtnNkIsV0FBVyxDQUFFOTdCLFFBQVEsSUFHOUI4QixLQUFLNjBCLFFBQVU3MEIsS0FBS21CLEtBQU0sQ0FDTyxXQUEvQm5CLEtBQUttQixLQUFLa0UsWUFBWS9PLE9BQ3hCMEosS0FBS21CLEtBQU9XLEtBQUtDLFNBQVMvQixLQUFLbUIsT0FFakMsTUFBTXpFLEVBQUk2UixpQkFBaUJ2TyxLQUFLbUIsTUFDaENuQixLQUFLaTZCLGdCQUFrQnY5QixFQUFFMHVCLFVBQ3pCcHJCLEtBQUs4MEIsZ0JBQWtCOTBCLEtBQUttQixLQUFLbkQsUUFDbkMsT0FDTTNCLE1BQU00dUIsZ0JBQ2QsQ0FFQSxnQkFBTTRPLENBQVl2NkIsUUFBVSxDQUFFcEIsUUFBUSxJQUNwQzhCLEtBQUttQixXQUFhLElBQUlXLEtBQUs5QixLQUFLczVCLGVBQWlCLEtBQUsxdUIsU0FBUyxDQUM3RHRJLE9BQU8sVUFFSHBCLFNBQVNpQyxlQUFlbkQsS0FBS21CLE1BQ25DbkIsS0FBSzg1QixZQUFhLEVBQ2xCeDZCLFFBQVFwQixZQUNvQixJQUFuQm9CLFFBQVFwQixRQUFnQ29CLFFBQVFwQixPQUNyRG9CLFFBQVFwQixRQUFROEIsS0FBS2lyQixnQkFDM0IsQ0FFQSxlQUFNaVAsQ0FBVzU2QixRQUFVLENBQUVwQixRQUFRLElBQ25DLE1BQU1pRCxXQUFhLElBQUlXLEtBQUs5QixLQUFLL0QsT0FBTzJPLFNBQVMsQ0FBRXRJLE9BQU8sSUFDMUR0QyxLQUFLL0QsTUFBUWtGLEtBQUtzQixNQUNsQm5ELFFBQVFwQixZQUNvQixJQUFuQm9CLFFBQVFwQixRQUFnQ29CLFFBQVFwQixPQUNyRG9CLFFBQVFwQixRQUFROEIsS0FBS2lyQixnQkFDM0IsQ0FFQSxnQ0FBTWtQLENBQTRCNzZCLFFBQVUsQ0FBRXBCLFFBQVEsSUFFcEQsR0FESThCLEtBQUt5NUIscUJBQXFCejVCLEtBQUtrNkIsWUFDL0JwK0IsTUFBTUksT0FBTzhELEtBQUswNUIsb0JBRXBCLFlBREEzd0IsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUywrQkFHNUMsTUFBTXNuQixRQUFVLEdBQ1ZZLFdBQWEsR0FDYjBVLGdCQUFrQnhuQixPQUFPakcsT0FBT2tPLFdBQVc3VyxLQUFJZ04sT0FDNUNBLE1BQU05VyxRQUVmLElBQUssSUFBSWlqQixNQUFRLEVBQUdBLE1BQVFpZCxnQkFBZ0J4NUIsT0FBUXVjLFFBQzlDbmQsS0FBSzlGLE1BQU0rVCxLQUFPbXNCLGdCQUFnQmpkLE9BQU9sUCxLQUc3Q3lYLFdBQVd0dUIsS0FBS2dqQyxnQkFBZ0JqZCxPQUFPN21CLE1BQ3ZDd3VCLFFBQVExdEIsS0FBS2dqQyxnQkFBZ0JqZCxTQUUvQixNQUFNN1gsS0FBTyxDQUNYbUosTUFBTyxJQUNQK0IsUUFBU2xULEtBQUtDLEtBQUt5VyxPQUFPLGtCQUFtQixDQUMzQ2tELE9BQVFsWCxLQUFLMDVCLGtCQUNiM1UsT0FBUVcsYUFFVnlPLFFBQVMsQ0FDUGtHLElBQUssQ0FDSDU4QixLQUFNLCtCQUNOSixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUMxQjQyQixTQUFVLEtBQ1JwMEIsS0FBS3M2QixjQUFjeFYsUUFBTyxHQUc5QnlWLElBQUssQ0FDSDk4QixLQUFNLCtCQUNOSixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGVBQzFCNDJCLFNBQVUsU0FHZC9ZLFFBQVMsT0FFUHFLLFdBQVc5a0IsT0FBUyxHQUN0QixJQUFJc3pCLE9BQU81dUIsTUFBTXRILFFBQU8sRUFFNUIsQ0FFQSxtQkFBTXM4QixDQUFleFYsU0FDbkIsSUFBSyxJQUFJM0gsTUFBUSxFQUFHQSxNQUFRMkgsUUFBUWxrQixPQUFRdWMsY0FDcEMySCxRQUFRM0gsT0FBTzZjLFdBQVc5OUIsT0FBTzhELEtBQUswNUIsbUJBQW9CLENBQzlEQyxhQUFhLElBRWZuMkIsWUFBWWlOLE9BQU8sQ0FDakJELFFBQVNsVCxLQUFLQyxLQUFLeVcsT0FBTyxvQkFBcUIsQ0FDN0MxZCxLQUFNd3VCLFFBQVEzSCxPQUFPN21CLEtBQ3JCNGdCLE9BQVFsWCxLQUFLMDVCLHFCQUlyQixDQUVBLGdCQUFNTSxDQUFZMTZCLFFBQVUsQ0FBRXBCLFFBQVEsSUFDaEM4QixLQUFLeTVCLHFCQUFxQno1QixLQUFLazZCLFlBQ25DLElBQUloakIsT0FBU2xYLEtBQUswNUIsa0JBQ2xCLEdBQUk1OUIsTUFBTUksT0FBT2diLFNBQVUsQ0FDekIsR0FBSTVaLEtBQUtDLEtBQUtDLFNBQVMsNkJBQStCMFosT0FJcEQsWUFEQW5PLEdBQUdDLGNBQWN3VSxNQUFNLDJCQUZ2QnRHLE9BQVMsQ0FLYixDQUNJbFgsS0FBS2lsQixtQkFDRGpsQixLQUFLaWxCLFlBQVkrVSxXQUFXOTlCLE9BQU9nYixRQUFTLENBQ2hEeWlCLGFBQWEsSUFHakIzNUIsS0FBSys1QixpQkFBa0IsRUFDdkJ6NkIsUUFBUXBCLFlBQ29CLElBQW5Cb0IsUUFBUXBCLFFBQWdDb0IsUUFBUXBCLE9BQ3JEb0IsUUFBUXBCLFFBQVE4QixLQUFLaXJCLGdCQUMzQixDQUVBLFNBQUluaEIsR0FDRixPQUFPOUosS0FBS1YsUUFBUXdLLE9BQVMsUUFDL0IsQ0FFQSxTQUFJQSxDQUFPOEIsR0FDTSxDQUFDLFNBQVUsT0FBUSxXQUN0QjR1QixRQUFRNXVCLEVBQUU1RCxpQkFDdEJoSSxLQUFLZzRCLFNBQVNsdUIsTUFBUThCLEVBQ3hCLENBRUEsaUJBQUkwdEIsR0FDRixNQUFNeHZCLE1BQVE5SixLQUFLOEosTUFDbkIsSUFBSTdQLFFBQVUrRixLQUFLNGtCLFFBQVE3b0IsUUFBUStOLE1BQU1BLFFBQVFvTixPQUM3Qy9hLEdBQUs2RCxLQUFLOUYsTUFBTWlDLEdBT3BCLEdBTkFBLElBQXVDLE1BQWhDQSxJQUFNLElBQUk0VixXQUFXMG9CLE9BQWdCLEVBQUl0K0IsSUFBSTRWLFdBQVcwb0IsT0FFMUR0K0IsR0FBR3FPLFdBQVcsT0FBTXJPLEdBQUssSUFBTUEsSUFDaEM2RCxLQUFLNGtCLE9BQU83b0IsT0FBTzhLLFdBQVd2TyxPQUFNMkIsU0FBb0JrQyxJQUN4RDZELEtBQUs0a0IsT0FBTzdvQixPQUFPOEssV0FBV3hPLE9BQU00QixRQUFVQSxRQUFVLFdBQWFrQyxHQUFLLE9BRTFFbEMsUUFBUyxDQUNYLE1BQU15Z0MsVUFBWSxJQUFJNTRCLEtBQUs3SCxTQUFTMlEsU0FBUyxDQUFFQyxVQUFVLElBQVFwSSxNQUNqRSxJQUFJazRCLFdBQ0osT0FBSTM2QixLQUFLa1UsU0FDSGxVLEtBQUtxTyxRQUNQc3NCLFdBQWExZ0MsUUFBVSxJQUFNeWdDLFVBQ3RCQyxZQUVBRCxVQUdGemdDLE9BRVgsQ0FDRixDQUVBLFNBQUlnQyxHQUNGLFlBQUk0QixJQUFjbUMsS0FBSzQ2QixRQUEwQixLQUFoQjU2QixLQUFLNDZCLE9BQXNCNTZCLEtBQUs0NkIsT0FDN0Q1NkIsS0FBSytrQixPQUNBL2tCLEtBQUtpbEIsWUFBWWxwQixPQUFPQyxRQUFRQyxNQUFNN0YsTUFFeEMsQ0FDVCxDQUVBLFNBQUk2RixDQUFPMlAsR0FDVDVMLEtBQUs0NkIsT0FBU2h2QixDQUNoQixFQzdRSyxNQUFNaXZCLHlCQUF5QnZHLFNBQ3BDLDJCQUFheUMsQ0FBZ0JoZCxNQUMzQkEsS0FBS0MsR0FDSCxRQUNBLG9DQUNBaGEsS0FBS3FpQixVQUFVbnBCLEtBQUs4RyxPQUd0QitaLEtBQUtDLEdBQ0gsUUFDQSx1QkFDQTZnQixpQkFBaUJyWSxTQUFTdHBCLEtBQUs4RyxPQUVqQytaLEtBQUtDLEdBQ0gsUUFDQSw0QkFDQTZnQixpQkFBaUJyWSxTQUFTdHBCLEtBQUs4RyxNQUVuQyxDQUVBLHdCQUFXdTFCLEdBQ1QsT0FBTzMyQixRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rNUIsY0FBZSxDQUNwRDdiLFNBQVUsc0RBQ1ZyYixLQUFNLGVBRVYsQ0FFQSxVQUFJMGxCLEdBQ0YsT0FBTzhXLGlCQUFpQnRGLGFBQzFCLENBRUEsZ0JBQUl1RixHQUNGLEdBQUk5NkIsS0FBSzNJLFFBQ1AsR0FBSTJJLEtBQUttWCxPQUFPdlcsT0FBUSxDQUN0QixNQUFNbTZCLFNBQVcvNkIsS0FBS21YLE1BQU01Z0IsUUFBTzZnQixHQUFpQixJQUFaQSxFQUFFK0YsT0FBZS9GLEVBQUUyakIsV0FDM0QsR0FBSUEsU0FBU242QixPQUFRLE9BQU9tNkIsU0FBUyxFQUN2QyxPQUlKLENBRUEsZ0JBQUlDLEdBQ0YsR0FBSWg3QixLQUFLM0ksUUFDUCxHQUFJMkksS0FBS21YLE9BQU92VyxPQUFRLENBQ3RCLE1BQU1xNkIsU0FBV2o3QixLQUFLbVgsTUFBTTVnQixRQUFPNmdCLEdBQWlCLElBQVpBLEVBQUUrRixRQUFnQi9GLEVBQUUyakIsV0FDNUQsR0FBSUUsU0FBU3I2QixPQUFRLE9BQU9xNkIsU0FBUyxFQUN2QyxPQUlKLENBRUEscUJBQUk3YixHQUNGLFNBQ0VwZixLQUFLZzdCLGNBQWM5Z0MsT0FBT2doQyxZQUFZNWtDLE9BQ3RDMEosS0FBS2c3QixjQUFjL3lCLE9BQU8zUixPQUd4QjBKLEtBQUtnN0IsYUFBYTlnQyxNQUFNZ2hDLFdBQVc1a0MsS0FBSzBSLGdCQUN4Q2hJLEtBQUtnN0IsYUFBYS95QixNQUFNM1IsS0FBSzBSLGFBSW5DLENBRUEscUJBQUl3WCxHQUNGLFlBQXdCLElBQWJ4ZixLQUFLbTdCLE1BQ1ZuN0IsS0FBS2c3QixlQUNDaDdCLEtBQUtvZixrQkFLVnBmLEtBQUttN0IsR0FDZCxDQUVBLHFCQUFJalgsR0FDRixTQUNFbGtCLEtBQUszSSxRQUNMMkksS0FBS21YLE1BQU12VyxRQUFVLEdBQ3JCWixLQUFLNDJCLFdBQ3VCLFdBQTVCNTJCLEtBQUt5MkIsUUFBUXh3QixNQUFNNUgsS0FLdkIsQ0FFQSxxQkFBSW1oQixDQUFtQjVULEdBQ3JCNUwsS0FBS203QixLQUFNLEVBQ1huN0IsS0FBS283QixLQUFNLENBQ2IsQ0FFQSxxQkFBSTNiLEdBQ0YsWUFBd0IsSUFBYnpmLEtBQUtvN0IsSUFBNEJwN0IsS0FBS29mLGtCQUMxQ3BmLEtBQUtvN0IsR0FDZCxDQUVBLHFCQUFJM2IsQ0FBbUI3VCxHQUNyQjVMLEtBQUtvN0IsS0FBTSxFQUNYcDdCLEtBQUttN0IsS0FBTSxDQUNiLENBRUEsU0FBSXZjLEdBQ0YsT0FBTzVlLEtBQUtxN0IsWUFBYyxDQUM1QixDQUVBLG1CQUFJMWIsR0FDRixRQUFLM2YsS0FBSzNJLFdBRVIySSxLQUFLODZCLGVBQ0w5NkIsS0FBS2c3QixjQUNMaDdCLEtBQUs4NkIsYUFBYWpuQixlQUFpQjdULEtBQUtnN0IsYUFBYW5uQixhQUt6RCxDQUVBLGVBQUl3bkIsR0FDRixJQUFJdjZCLE1BQVEsRUFDWixJQUFLLE1BQU1zVyxLQUFLcFgsS0FBS21YLE1BQ2ZDLEVBQUVxZixTQUFRMzFCLE9BQVMsR0FFekIsT0FBT0EsS0FDVCxDQUVBLG9CQUFJdzZCLEdBQ0YsU0FDRXQ3QixLQUFLM0ksU0FDTDJJLEtBQUs4NkIsY0FDSDk2QixLQUFLODZCLGNBQWM3MEIsT0FDbkJqRyxLQUFLODZCLGNBQWM3MEIsS0FBS2xLLE9BQU84SyxZQUFZL08sS0FLakQsQ0FFQSxjQUFJOG5CLEdBQ0YsR0FBSTVmLEtBQUszSSxRQUFVMkksS0FBSzg2QixjQUFnQjk2QixLQUFLZzdCLGFBQWMsQ0FDekQsSUFBS2g3QixLQUFLODZCLGFBQWFyRSxTQUFXejJCLEtBQUtnN0IsYUFBYXZFLE9BQ2xELE9BQU9uNUIsS0FBS0MsS0FBS0MsU0FBUyxpQkFFNUIsR0FBSXdDLEtBQUs4NkIsYUFBYXJFLE9BQ3BCLE9BQUl6MkIsS0FBSzg2QixhQUFhdi9CLFNBQ2IrQixLQUFLQyxLQUFLeVcsT0FBTyx1QkFBd0IsQ0FDOUMxZCxLQUFNMEosS0FBSzg2QixhQUFhNWdDLE1BQU01RCxPQUczQmdILEtBQUtDLEtBQUt5VyxPQUFPLHFCQUFzQixDQUM1QzFkLEtBQU0wSixLQUFLODZCLGFBQWE1Z0MsTUFBTTVELE9BR2xDLEdBQUkwSixLQUFLZzdCLGFBQWF2RSxPQUNwQixPQUFJejJCLEtBQUtnN0IsYUFBYXovQixTQUNiK0IsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXdCLENBQzlDMWQsS0FBTTBKLEtBQUtnN0IsYUFBYTlnQyxNQUFNNUQsT0FHOUIwSixLQUFLb2Ysa0JBQ0E5aEIsS0FBS0MsS0FBS3lXLE9BQU8sb0JBQXFCLENBQzNDMWQsS0FBTTBKLEtBQUtnN0IsYUFBYTlnQyxNQUFNNUQsT0FHM0JnSCxLQUFLQyxLQUFLeVcsT0FBTyxxQkFBc0IsQ0FDNUMxZCxLQUFNMEosS0FBS2c3QixhQUFhOWdDLE1BQU01RCxNQUdwQyxDQUVGLENBRUEsYUFBTW0vQixDQUFTbndCLE1BQ2IsT0FBUUEsS0FBS25JLFFBQ1gsSUFBSyxNQUNFNkMsS0FBS21YLE9BQU92VyxTQUNmWixLQUFLM0ksT0FBU2lPLEtBQUtqTyxhQUFVd0csRUFDekJtQyxLQUFLM0ksU0FDUGlPLEtBQUtuRSxLQUFLNDVCLFVBQVcsSUFHekJ6MUIsS0FBS25FLEtBQUtnYyxNQUFRbmQsS0FBS21YLE1BQU12VyxPQUM3QlosS0FBS2kyQixZQUFZM3dCLE1BQ2pCLE1BRUYsSUFBSyxPQUNIdEYsS0FBS2kyQixZQUFZM3dCLE1BQ2pCLE1BRUYsSUFBSyxhQUNIdEYsS0FBS3lILFdBQVduQyxNQUloQmhJLEtBQUtzRyxLQUFLMkUsV0FBWXZJLEtBQUtpckIsaUJBQzFCM3RCLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFldFksS0FDdkMsQ0FFQSxVQUFNbkUsQ0FBTTYwQixZQUNKaDJCLEtBQUttWCxNQUFNNmUsTUFBTS9VLFdBQ3ZCLE1BQU0zYixLQUFPLENBQ1hqSCxLQUFNMkIsS0FBSytqQixPQUFPMWxCLEtBQ2xCbEIsT0FBUSxhQUNSNjRCLEtBQ0FELE9BQVF6NEIsS0FBS3NHLEtBQUsyRSxNQUdwQixPQURLakwsS0FBS3NHLEtBQUsyRSxPQUFNakQsS0FBS25FLEtBQU9uQixLQUFLbVgsTUFBTTZlLE1BQU10WSxjQUMzQ3BZLElBQ1QsQ0FFQSxxQkFBYWtkLENBQVVqbUIsT0FDckJBLE1BQU1FLGlCQUVOLE1BQU1DLEVBQUlILE1BQU1JLGNBQ1ZRLE9BQVNULEVBQUVLLFFBQVFJLE9BQ25CUCxHQUFLRixFQUFFRyxRQUFRLGlCQUNmZ1QsUUFBVW5ULEVBQUVHLFFBQVEsaUJBQ3BCNjNCLFlBQWNoNEIsRUFBRUcsUUFBUSxpQkFDeEJ3UCxXQUFhd3VCLGlCQUFpQmxHLG9CQUFvQkQsYUFDeERyb0IsS0FBSzhQLFVBQVl0TSxRQUFROVMsUUFBUW9mLFVBQ2pDLE1BQU02WixLQUFPOTVCLE9BQU9VLElBQUlHLFNBQVNpNUIsTUFFakMsT0FBUTc0QixRQUNOLElBQUssZ0JBQ0hrUCxLQUFLaFYsUUFBVWdWLEtBQUtoVixhQUVkZ1YsS0FBSzRlLGlCQUNYLE1BR0YsSUFBSyxjQUNINWUsS0FBSzZQLFdBQVc4WixZQUNWM3BCLEtBQUs0ZSxpQkFDWCxNQUdGLElBQUssYUFDSDVlLEtBQUtzcEIsa0JBQ0N0cEIsS0FBSzRlLGlCQUNYLE1BR0YsSUFBSyxhQUFjLENBQ2pCLE1BQU1qYixRQUFVeE0sWUFBWXlNLGFBQ3ZCNUQsS0FBSzhLLE1BQU02ZSxNQUFNN2tCLFdBQ3BCOUUsS0FBSzhLLE1BQU02ZSxNQUFNN2tCLFNBQVcsR0FBR25CLFFBQVFwRCxTQUFTb0QsUUFBUWdCLFNBRzFELE1BQU0xTCxXQUFhK0csS0FBS2xMLEtBQUs2MEIsWUFDdkIzcEIsS0FBS29wQixRQUFRbndCLE1BQ25CLEtBQ0YsQ0FFQSxJQUFLLGNBQWUsQ0FDbEIrRyxLQUFLc3BCLGtCQUNDdHBCLEtBQUs0ZSxpQkFDWCxNQUFNc1EsZUFBaUIsSUFBSXJDLFdBQVcsQ0FDcENobEIsU0FBVTdILEtBQUtvcUIsT0FBTytFLGlCQUN0QmpYLFlBQWFob0IsTUFBTXN5QixXQUVyQjBNLGVBQWVwcUIsU0FBVzlFLEtBQUtvcUIsT0FBT3Y4QixNQUFNaVgsU0FDNUNvcUIsZUFBZWpXLFVBQVlqWixLQUFLc3FCLE9BQU96OEIsTUFBTWlYLFNBQzdDb3FCLGVBQWVsbkIsT0FBU2hJLEtBQUtvcUIsT0FBT3BpQixPQUVwQ2tuQixlQUFldFEsaUJBQ2YsS0FDRixDQUVBLFFBQVMsQ0FDUCxNQUFNM3JCLFFBQVUsQ0FDZHBCLFFBQVEsRUFDUm9ILEtBQU01SSxFQUFFSyxRQUNSMGMsUUFBUy9jLEVBQUVxUyxVQUNYZ1csT0FBUXJvQixTQUVKb1gsVUFBVTZqQixNQUFNdHJCLEtBQUs4SyxNQUFNNmUsTUFBTzc0QixPQUFRbUMsU0FDaEQsTUFBTWdHLEtBQU8sQ0FDWGpILEtBQU0yQixLQUFLdTFCLGNBQWNsM0IsS0FDekJsQixPQUFRLGFBQ1I2NEIsS0FDQUQsT0FBUXo0QixLQUFLc0csS0FBSzJFLE1BRWZqTCxLQUFLc0csS0FBSzJFLE9BQU1qRCxLQUFLbkUsS0FBT2tMLEtBQUs4SyxNQUFNNmUsTUFBTXRZLGNBQ2xEclIsS0FBS29wQixRQUFRbndCLE1BQ2IsS0FDRixFQUVKLENBRUEsYUFBTXV3QixDQUFTRyxVQUFPbjRCLEdBS3BCLEdBSkFtQyxLQUFLbVgsTUFBUW5YLEtBQUttWCxNQUFNNWdCLFFBQU80SyxXQUNTLElBQXhCQSxLQUFLakgsTUFBTWlYLFdBR3RCNmtCLEtBc0JDaDJCLEtBQUttWCxNQUFNNmUsTUFBTW5CLFNBQ25CNzBCLEtBQUttWCxNQUFNNmUsTUFBTWxCLGdCQUFrQjkwQixLQUFLbVgsTUFBTTZlLE1BQU1qQixZQUFZLENBQzlEK0MsZ0JBQWdCLFVBdkJwQixJQUFLLElBQUl4WCxFQUFJLEVBQUdBLEVBQUl0Z0IsS0FBS21YLE1BQU12VyxPQUFRMGYsV0FDOUJ0Z0IsS0FBS21YLE1BQU1tSixHQUFHL2tCLFNBRW5CeUUsS0FBSzNJLFVBQ0gySSxLQUFLbVgsTUFBTW1KLEdBQUdyYSxNQUNkakcsS0FBS21YLE1BQU1tSixHQUFHcmEsS0FBS2xLLE9BQU84SyxZQUFZL08sUUFDdENrSSxLQUFLbVgsTUFBTW1KLElBQUlwbUIsT0FBT2doQyxZQUFZNWtDLE1BQ2xDMEosS0FBS21YLE1BQU1tSixJQUFJclksT0FBTzNSLE1BQ3RCMEosS0FBS21YLE1BQU1tSixHQUFHcG1CLE1BQU1naEMsV0FBVzVrQyxLQUFLMFIsZ0JBQ2xDaEksS0FBS21YLE1BQU1tSixHQUFHclksTUFBTTNSLEtBQUswUixnQkFDMUJoSSxLQUFLbVgsTUFBTW1KLElBQUlwbUIsT0FBT2doQyxZQUFZNWtDLFFBRXJDMEosS0FBS21YLE1BQU1tSixHQUFHL2tCLFVBQVcsR0FFdkJ5RSxLQUFLbVgsTUFBTW1KLEdBQUd1VSxTQUNoQjcwQixLQUFLbVgsTUFBTW1KLEdBQUd3VSxnQkFBa0I5MEIsS0FBS21YLE1BQU1tSixHQUFHeVUsWUFBWSxDQUN4RCtDLGdCQUFnQixLQVl4QixHQUFJOTNCLEtBQUszSSxPQUFRLENBU2YsR0FQQTJJLEtBQUttWCxNQUFNakwsTUFBSyxDQUFDeFAsRUFBR3dqQixJQUNkeGpCLEVBQUV5Z0IsTUFBUStDLEVBQUUvQyxNQUFjLEVBQzFCemdCLEVBQUV5Z0IsTUFBUStDLEVBQUUvQyxPQUFlLEVBQ3hCLElBSUxuZCxLQUFLbVgsTUFBTXZXLE9BQVMsRUFBRyxDQUN6QlosS0FBS21YLE1BQVEsQ0FBQ25YLEtBQUttWCxNQUFNLEdBQUluWCxLQUFLbVgsTUFBTSxJQUN4QyxJQUFLLE1BQU1DLEtBQUtwWCxLQUFLbVgsYUFDWkMsRUFBRXFmLGNBQ0ZyZixFQUFFcWtCLEdBRWIsQ0FHSXo3QixLQUFLbVgsTUFBTSxLQUFJblgsS0FBS21YLE1BQU0sR0FBRzRqQixVQUFXLEdBRXhDLzZCLEtBQUttWCxNQUFNLElBQUkwZCxRQUFVNzBCLEtBQUttWCxNQUFNLElBQUkwZCxTQUN0QzcwQixLQUFLbVgsTUFBTSxHQUFHa0ksUUFBVXJmLEtBQUttWCxNQUFNLEdBQUdrSSxVQUNwQ3JmLEtBQUttWCxNQUFNLEdBQUd0RCxhQUFlN1QsS0FBS21YLE1BQU0sR0FBR3RELGFBQzdDN1QsS0FBS21YLE1BQU0sR0FBR3NmLFFBQVMsRUFDZHoyQixLQUFLbVgsTUFBTSxHQUFHdEQsYUFBZTdULEtBQUttWCxNQUFNLEdBQUd0RCxhQUNwRDdULEtBQUttWCxNQUFNLEdBQUdzZixRQUFTLEVBRW5CejJCLEtBQUt3ZixrQkFBbUJ4ZixLQUFLbVgsTUFBTSxHQUFHc2YsUUFBUyxFQUM5Q3oyQixLQUFLbVgsTUFBTSxHQUFHc2YsUUFBUyxFQUlwQyxLQUFPLENBb0NMLEdBbkNBejJCLEtBQUttWCxNQUFNakwsTUFBSyxDQUFDeFAsRUFBR3dqQixLQUNsQixHQUFJeGpCLEVBQUVtNEIsU0FBVzNVLEVBQUUyVSxPQUFRLE9BQVEsRUFDbkMsSUFBS240QixFQUFFbTRCLFFBQVUzVSxFQUFFMlUsT0FBUSxPQUFPLEVBQ2xDLElBQUtuNEIsRUFBRW00QixTQUFXM1UsRUFBRTJVLE9BQVEsT0FBTyxFQUNuQyxHQUFJbjRCLEVBQUVtWCxhQUFlcU0sRUFBRXJNLGFBRXJCLE9BREE3VCxLQUFLMDdCLFVBQVcsR0FDUixFQUVWLEdBQUloL0IsRUFBRW1YLGFBQWVxTSxFQUFFck0sYUFFckIsT0FEQTdULEtBQUswN0IsVUFBVyxFQUNULEVBRVQsR0FBSXArQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx5QkFBMEIsQ0FDdEQsR0FBSVIsRUFBRXlqQixlQUFpQkQsRUFBRUMsZUFFdkIsT0FEQW5nQixLQUFLMDdCLFVBQVcsR0FDUixFQUVWLEdBQUloL0IsRUFBRXlqQixlQUFpQkQsRUFBRUMsZUFFdkIsT0FEQW5nQixLQUFLMDdCLFVBQVcsRUFDVCxDQUVYLEtBQU8sQ0FDTCxHQUFJaC9CLEVBQUU2WixTQUFXMkosRUFBRTNKLFNBRWpCLE9BREF2VyxLQUFLMDdCLFVBQVcsR0FDUixFQUVWLEdBQUloL0IsRUFBRTZaLFNBQVcySixFQUFFM0osU0FFakIsT0FEQXZXLEtBQUswN0IsVUFBVyxFQUNULENBRVgsQ0FDQSxPQUFPLEtBR1QxN0IsS0FBSzI3QixTQUFXLEVBQ1ozN0IsS0FBS21YLE1BQU0sSUFBTW5YLEtBQUttWCxNQUFNLEdBQUcwZCxTQUFXNzBCLEtBQUttWCxNQUFNLEdBQUdrSixPQUFRLENBQ2xFcmdCLEtBQUsyN0IsU0FBVyxFQUNoQixJQUFLLElBQUlyYixFQUFJLEVBQUdBLEVBQUl0Z0IsS0FBS21YLE1BQU12VyxPQUFRMGYsSUFFbkN0Z0IsS0FBS21YLE1BQU1tSixJQUNYdGdCLEtBQUttWCxNQUFNbUosR0FBR3VVLFFBQ2Q3MEIsS0FBS21YLE1BQU0sR0FBR3RELGVBQWlCN1QsS0FBS21YLE1BQU1tSixHQUFHek0sZUFDNUN2VyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx5QkFDdkI4QyxLQUFLbVgsTUFBTSxHQUFHZ0osaUJBQW1CbmdCLEtBQUttWCxNQUFNbUosR0FBR0gsZUFDL0NuZ0IsS0FBS21YLE1BQU0sR0FBR1osV0FBYXZXLEtBQUttWCxNQUFNbUosR0FBRy9KLFlBRTdDdlcsS0FBSzI3QixTQUFXMzdCLEtBQUsyN0IsU0FBVyxFQUd0QyxDQUVBLElBQUssSUFBSXJiLEVBQUksRUFBR0EsRUFBSXRnQixLQUFLbVgsTUFBTXZXLE9BQVEwZixJQUNyQ3RnQixLQUFLbVgsTUFBTW1KLEdBQUdtVyxPQUFTblcsRUFBSXRnQixLQUFLMjdCLFNBQ2hDMzdCLEtBQUttWCxNQUFNbUosR0FBR21iLElBQU16N0IsS0FBS21YLE1BQU1tSixHQUFHbVcsUUFBVXoyQixLQUFLMjdCLFNBQVcsQ0FFaEUsQ0FDRixDQUVBLFNBQUFoRyxHQUNFMzFCLEtBQUs4MUIsUUFBUyxDQUNoQixFQ3JhSyxNQUFNOEYsc0JBQXNCMUgsT0FDakMsaUJBQUFwYSxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUN4QkEsS0FBS3JhLEtBQUssYUFBYSt4QixPQUFNLElBQU16eEIsS0FBSzY3QixhQUFhOWhCLE9BQ3ZELENBRUEsWUFBQThoQixDQUFjOWhCLE1BQ1pBLEtBQUtyYSxLQUFLLHdCQUF3QithLFFBQ3BDLENBRUEsbUJBQWFoSyxDQUFRblIsUUFBVSxDQUFDLEdBQzlCLE1BQU15YSxXQUFhd0csZUFDakIsMkNBQ0FqaEIsU0FHRixPQUFPLElBQUkwYyxTQUFRaEIsVUFDakIsSUFBSW9YLFNBQVcsS0FDZixNQUFNNkIsSUFBTSxJQUFJMkgsY0FBYyxDQUM1Qm50QixNQUFPblAsUUFBUXF1QixZQUNYcndCLEtBQUtDLEtBQUt5VyxPQUFPLG1DQUFvQyxDQUNyRDFkLEtBQU1nSixRQUFRcXVCLGNBRWRyd0IsS0FBS0MsS0FBS0MsU0FBUywrQkFDdkJnVCxRQUFTdUosS0FDVG9hLFFBQVMsQ0FDUDJILFNBQVUsQ0FDUnorQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUMxQjQyQixTQUFVcmEsT0FDUnFZLFNBQVcsSUFBSWlDLFNBQVN0YSxLQUFLLEdBQUdwRyxjQUFjLG1CQUN2Q3FILFFBQVFvWCxhQUlyQi9XLFFBQVMsV0FDVEosTUFBTyxTQUVUZ1osSUFBSWoyQixRQUFPLEVBQUksR0FFbkIsRUM3QkssTUFBTWcyQixnQkFDWCw4QkFBVytILEdBQ1QsTUFBTyxNQUNULENBRUEsbUNBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMkJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsOEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsNkJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMkJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsNEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsOEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEseUJBQVdDLEdBQ1QsTUFBTyxNQUNULENBVUEsZ0JBQU8xSSxDQUFXaFEsUUFDaEIsR0FBSUEsT0FBTzlOLFdBQWErZCxnQkFBZ0JpSSxpQkFDdEMsT0FBTyxLQUVULE1BQU1TLE9BQVMsQ0FDYixDQUFDMUksZ0JBQWdCc0ksa0JBQW1CLHVCQUNwQyxDQUFDdEksZ0JBQWdCb0ksb0JBQXFCLHdCQUN0QyxDQUFDcEksZ0JBQWdCdUksbUJBQW9CLHdCQVN2QyxPQUxFeFksT0FBTzlOLFdBQWErZCxnQkFBZ0IrSCxxQkFDZixRQUFyQmhZLE9BQU9qRCxZQUVQNGIsT0FBTzFJLGdCQUFnQndJLHFCQUF1Qiw0QkFFekNFLE1BQ1QsQ0FFQSx1QkFBT0MsQ0FBa0JyOUIsU0FDdkIsUUFDMkIsSUFBbEJBLFFBQVEvQyxZQUNhLElBQXJCK0MsUUFBUXUwQixlQUNVLElBQWxCdjBCLFFBQVFwRixZQUNhLElBQXBCb0YsUUFBUWdWLGNBQ2UsSUFBdEJoVixRQUFRd0gsZ0JBQ2MsSUFBdEJ4SCxRQUFRd2hCLGdCQUNtQixJQUEzQnhoQixRQUFRb1gsZ0JBQ2ZwWCxRQUFRMlcsV0FBYStkLGdCQUFnQm1JLHFCQXlCbEMsUUFDb0IsSUFBbEI3OEIsUUFBUS9DLFlBQ2EsSUFBckIrQyxRQUFRdTBCLGVBQ2EsSUFBckJ2MEIsUUFBUTJXLFNBT2YsT0FMQWxOLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLHFCQUFzQixDQUNyQzVkLE1BQU9rSCxLQUFLQyxLQUFLQyxTQUFTLGlCQUd2QixPQWpDUCxRQUErQixJQUFwQjhCLFFBQVFnVixRQUNiaFYsUUFBUXBGLE1BQU1nVSxNQUFNaFIsSUFBSW9DLFFBQVFnVixXQUNsQ2hWLFFBQVEyVyxTQUFXK2QsZ0JBQWdCa0ksc0JBRWhDLFFBQWlDLElBQXRCNThCLFFBQVF3SCxVQUEyQixDQUNuRCxNQUFNODFCLFNBQVd0OUIsUUFBUXBGLE1BQU0yaUMsZ0JBQWdCdjlCLFFBQVF3SCxXQUNuRDgxQixTQUFTaDhCLE9BQVMsSUFDcEJ0QixRQUFRZ1YsUUFBVXNvQixTQUFTLEdBQUczdUIsR0FDOUIzTyxRQUFRMlcsU0FBVytkLGdCQUFnQmtJLGdCQUV2QyxXQUMrQixJQUF0QjU4QixRQUFRd2hCLFdBQ2YsQ0FBQyxNQUFPLE9BQU85ZCxTQUFTMUQsUUFBUXdoQixXQUVoQ3hoQixRQUFRMlcsU0FBVytkLGdCQUFnQitILHlCQUVELElBQTNCejhCLFFBQVFvWCxxQkFHVCxJQUZDcFgsUUFBUXBGLE1BQU02QixPQUFPMm5CLGdCQUMxQnBrQixRQUFRb1gsa0JBR1ZwWCxRQUFRMlcsU0FBVytkLGdCQUFnQmdJLDBCQWN2QyxJQUNHLENBQ0NoSSxnQkFBZ0JvSSxtQkFDaEJwSSxnQkFBZ0JxSSxnQkFDaEJySSxnQkFBZ0JzSSxpQkFDaEJ0SSxnQkFBZ0J1SSxrQkFDaEJ2SSxnQkFBZ0J3SSxxQkFDaEJ4NUIsU0FBUzFELFFBQVF1MEIsVUFPbkIsT0FMQTlxQixHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTywyQkFBNEIsQ0FDM0M1ZCxNQUFPa0gsS0FBS0MsS0FBS0MsU0FBUyxpQ0FHdkIsRUFFVCxJQUNHLENBQ0N3MkIsZ0JBQWdCa0ksZ0JBQ2hCbEksZ0JBQWdCZ0kseUJBQ2hCaEksZ0JBQWdCK0gsb0JBQ2hCL0gsZ0JBQWdCbUkscUJBQ2hCbjVCLFNBQVMxRCxRQUFRMlcsVUFPbkIsT0FMQWxOLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLDJCQUE0QixDQUMzQzVkLE1BQU9rSCxLQUFLQyxLQUFLQyxTQUFTLGlDQUd2QixFQUVULE1BQU11bUIsT0FBUyxDQUNiemtCLFFBQVMsQ0FDUHUwQixTQUFVdjBCLFFBQVF1MEIsU0FDbEJoRixTQUFVdnZCLFFBQVFpbEIsYUFBZWpsQixRQUFRL0MsT0FBT3N5QixVQUFZdnZCLFFBQVFpbEIsY0FBZSxFQUNuRnVZLE9BQVF4OUIsUUFBUS9DLE9BQU91Z0MsU0FBVSxFQUNqQzN0QixVQUFXQSxVQUFVN1AsUUFBUS9DLFFBQVMsR0FDdEN3Z0MsZ0JBQWlCejlCLFFBQVF5OUIsa0JBQW1CLEVBQzVDQyxhQUFjMTlCLFFBQVEwOUIsZUFBZ0IsRUFDdENDLFdBQVkzOUIsUUFBUTI5QixhQUFjLEVBQ2xDQyxnQkFBaUI1OUIsUUFBUTQ5QixrQkFBbUIsRUFDNUNyZSxTQUNFdmYsUUFBUS9DLE9BQU9JLGNBQWNvUyxXQUFXd1QsU0FBUyxZQUFhLEVBQ2hFNGEsZUFBZ0I3OUIsUUFBUTY5QixpQkFBa0IsRUFDMUNoNUIsVUFBVyxHQUViaTVCLGNBQWUsQ0FDYm5uQixTQUFVM1csUUFBUTJXLFNBQ2xCNGQsU0FBVXYwQixRQUFRdTBCLFNBQ2xCL1MsVUFBVyxHQUNYNEssWUFBYXBzQixRQUFRb3NCLGNBQWUsRUFDcENvSSxlQUFnQngwQixRQUFRdzBCLGlCQUFrQixFQUMxQ0YsZUFBZ0J0MEIsUUFBUXMwQixpQkFBa0IsSUFHOUMsT0FBUTdQLE9BQU9xWixjQUFjbm5CLFVBQzNCLEtBQUsrZCxnQkFBZ0JrSSxnQkFDckIsS0FBS2xJLGdCQUFnQmdJLHlCQUNyQixLQUFLaEksZ0JBQWdCK0gsb0JBQ3JCLEtBQUsvSCxnQkFBZ0JtSSxvQkFzQm5CLEdBckJBcFksT0FBT3prQixRQUFRZ1YsUUFDYmhWLFFBQVFnVixTQUNSaFYsUUFBUS9DLE9BQU9JLGNBQWNFLFFBQVEsVUFBVUUsUUFBUXVYLFFBQ3pEeVAsT0FBT3prQixRQUFRK1UsT0FDYi9VLFFBQVEvQyxPQUFPSSxjQUFjRSxRQUFRLFVBQVVFLFFBQVFzWCxPQUN6RDBQLE9BQU96a0IsUUFBUW9YLGVBQ2JwWCxRQUFRb1gsZ0JBQ1JwWCxRQUFRL0MsT0FBT0ksY0FBYzRkLGNBQWN4ZCxRQUFRMlosZUFDckRxTixPQUFPemtCLFFBQVF3aEIsVUFDYnhoQixRQUFRd2hCLFdBQ1J4aEIsUUFBUS9DLE9BQU9JLGNBQWM0ZCxjQUFjeGQsUUFBUXNnQyxPQUNyRHRaLE9BQU9xWixjQUFjdGMsVUFBWWlELE9BQU96a0IsUUFBUXdoQixVQUNoRGlELE9BQU96a0IsUUFBUTJOLFFBQ2IzTixRQUFRL0MsT0FBT0ksY0FBY0UsUUFBUSxRQUFRRSxRQUFRa1EsU0FDckQzTixRQUFRcEYsTUFBTStULEdBQ2hCOFYsT0FBT3prQixRQUFRZ04sU0FDYmhOLFFBQVEvQyxPQUFPSSxjQUFjRSxRQUFRLFFBQVFFLFFBQVF3UCxTQUNyRGpOLFFBQVFwRixNQUFNb1MsU0FDaEJ5WCxPQUFPemtCLFFBQVFnK0IsZUFDYmgrQixRQUFRL0MsT0FBT0ksY0FBY29TLFVBQVV3VCxTQUFTLG9CQUNsRHdCLE9BQU96a0IsUUFBUXBGLE1BQVFvRixRQUFRcEYsTUFFN0I2cEIsT0FBT3FaLGNBQWNubkIsV0FBYStkLGdCQUFnQmtJLGlCQUNsRG5ZLE9BQU96a0IsUUFBUXVmLFNBQ2YsQ0FDQSxNQUFNNVksS0FBTzhkLE9BQU96a0IsUUFBUXBGLE1BQU1nVSxNQUFNaFIsSUFBSTZtQixPQUFPemtCLFFBQVErVSxRQUMzRCxJQUFLcE8sS0FDSCxPQUFPLEVBRVMsV0FBZEEsS0FBSzVILE9BQ1AwbEIsT0FBT3prQixRQUFRaStCLFdBQWF0M0IsS0FBSzNQLEtBQ2pDeXRCLE9BQU9xWixjQUFjbm5CLFNBQVcrZCxnQkFBZ0JpSSxpQkFFcEQsQ0FDQSxRQUNvQyxJQUEzQmxZLE9BQU96a0IsUUFBUTJOLGNBQ2MsSUFBNUI4VyxPQUFPemtCLFFBQVFnTixlQUNXLElBQXpCeVgsT0FBT3prQixRQUFRcEYsTUFPeEIsT0FMQTZPLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLDJCQUE0QixDQUMzQzVkLE1BQU9rSCxLQUFLQyxLQUFLQyxTQUFTLHVCQUd2QixFQUVULEdBQ0V1bUIsT0FBT3FaLGNBQWNubkIsV0FBYStkLGdCQUFnQmtJLHNCQUNoQixJQUEzQm5ZLE9BQU96a0IsUUFBUWdWLFFBT3RCLE9BTEF2TCxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTywyQkFBNEIsQ0FDM0M1ZCxNQUFPa0gsS0FBS0MsS0FBS0MsU0FBUywyQkFHdkIsRUFDRixHQUNMdW1CLE9BQU9xWixjQUFjbm5CLFdBQ3JCK2QsZ0JBQWdCZ0kseUJBQ2hCLENBQ0EsUUFBNkMsSUFBbENqWSxPQUFPemtCLFFBQVFvWCxlQU14QixPQUxBM04sR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sMkJBQTRCLENBQzNDNWQsTUFBT2tILEtBQUtDLEtBQUtDLFNBQVMsMkJBR3ZCLEVBQ0YsSUFDSkYsS0FBS3NHLEtBQUsyRSxPQUNWd2IsT0FBT3prQixRQUFRcEYsTUFBTTZCLE9BQU8ybkIsZ0JBQzNCSyxPQUFPemtCLFFBQVFvWCxpQkFDZHRnQixNQUVILE9BQU8sQ0FFWCxNQUFPLEdBQ0wydEIsT0FBT3FaLGNBQWNubkIsV0FBYStkLGdCQUFnQitILG9CQUNsRCxDQUNBLFFBQXdDLElBQTdCaFksT0FBT3prQixRQUFRd2hCLFVBTXhCLE9BTEEvWCxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTywyQkFBNEIsQ0FDM0M1ZCxNQUFPa0gsS0FBS0MsS0FBS0MsU0FBUyxzQkFHdkIsRUFDRixJQUNKRixLQUFLc0csS0FBSzJFLE9BQ1Z3YixPQUFPemtCLFFBQVFwRixNQUFNNkIsT0FBT0MsUUFBUStuQixPQUFPemtCLFFBQVF3aEIsWUFDaEQxcUIsTUFFSixPQUFPLENBRVgsTUFBTyxHQUNMMnRCLE9BQU9xWixjQUFjbm5CLFdBQWErZCxnQkFBZ0JpSSxpQkFDbEQsQ0FDQSxRQUFxQyxJQUExQmxZLE9BQU96a0IsUUFBUStVLE9BTXhCLE9BTEF0TCxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTywyQkFBNEIsQ0FDM0M1ZCxNQUFPa0gsS0FBS0MsS0FBS0MsU0FBUyw0QkFHdkIsRUFDRixHQUFJdW1CLE9BQU96a0IsUUFBUXc5QixPQUN4QixPQUFPLENBRVgsQ0FDQS9ZLE9BQU96a0IsUUFBUWsrQixlQUNielosT0FBT3prQixRQUFRcEYsTUFBTXNqQyxpQkFBa0IsRUFFdkN6WixPQUFPcVosY0FBY25uQixXQUNyQitkLGdCQUFnQmdJLDBCQUVoQmpZLE9BQU9xWixjQUFjekosNkJBQ25CNVAsT0FBT3prQixRQUFRNlAsVUFDakI0VSxPQUFPcVosY0FBYzNKLHdCQUNuQjFQLE9BQU96a0IsUUFBUTZQLFlBRWpCNFUsT0FBT3FaLGNBQWN6Siw4QkFBK0IsRUFDcEQ1UCxPQUFPcVosY0FBYzNKLHlCQUEwQixHQUVqRDFQLE9BQU9xWixjQUFjMTRCLFNBQVcsRUFDaENxZixPQUFPcVosY0FBYy9tQixXQUNuQi9XLFFBQVErVyxZQUNSdkMsVUFBVXNQLGdCQUNSOWxCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUU5QjZtQixPQUFPcVosY0FBY3hGLGlCQUFtQixFQUN4QzdULE9BQU9xWixjQUFjdkYsc0JBQXdCLEVBR2pELE9BQU85VCxNQUNULENBRUEsb0JBQWEwWixDQUFTbitCLFFBQVUsQ0FBQyxHQUMvQixNQUFNeWtCLE9BQVNpUSxnQkFBZ0IySSxpQkFBaUJyOUIsU0FDaEQsSUFBZSxJQUFYeWtCLE9BR0osR0FDR0EsT0FBT3prQixRQUFpQixXQUN6QmhDLEtBQUtzRyxLQUFLMkUsTUFDVixDQUNFeXJCLGdCQUFnQnNJLGlCQUNoQnRJLGdCQUFnQndJLHFCQUNoQng1QixTQUFTK2dCLE9BQU9xWixjQUFjdkosVUFFaENHLGdCQUFnQjBKLFdBQVczWixZQUN0QixNQUNKQSxPQUFPemtCLFFBQVEyOUIsWUFBY2xaLE9BQU96a0IsUUFBUTQ5QixpQkFBbUJuWixPQUFPemtCLFFBQVEwOUIsY0FBZ0JqWixPQUFPemtCLFFBQVF5OUIsbUJBQzlHei9CLEtBQUtzRyxLQUFLMkUsTUFDVnlyQixnQkFBZ0J5SSxpQkFBbUIxWSxPQUFPcVosY0FBY3ZKLFNBR25ELENBQ0wsUUFBb0MsSUFBekI5UCxPQUFPemtCLFFBQVFwRixNQUF1QixDQUMvQyxRQUF3QyxJQUE3QjZwQixPQUFPemtCLFFBQVF3aEIsVUFBMkIsQ0FDbkQsTUFBTTNjLFVBQVk0ZixPQUFPemtCLFFBQVFwRixNQUFNNkIsUUFBUUMsVUFBVStuQixPQUFPemtCLFFBQVF3aEIsWUFBWTNjLFVBQ2hGQSxZQUNGNGYsT0FBT3FaLGNBQWMxNEIsU0FBV1AsVUFFcEMsTUFBTyxRQUE2QyxJQUFsQzRmLE9BQU96a0IsUUFBUW9YLGVBQWdDLENBQy9ELE1BQU12UyxVQUFZNGYsT0FBT3prQixRQUFRcEYsTUFBTTZCLFFBQVEybkIsa0JBQWtCSyxPQUFPemtCLFFBQVFvWCxpQkFBaUJ2UyxVQUM3RkEsWUFDRjRmLE9BQU9xWixjQUFjMTRCLFNBQVdQLFVBRXBDLE1BQU8sUUFBcUMsSUFBMUI0ZixPQUFPemtCLFFBQVErVSxPQUF3QixDQUN2RCxNQUFNc3BCLGNBQWdCLzlCLE9BQU9KLE9BQU91a0IsT0FBT3prQixRQUFRcEYsTUFBTTZCLE9BQU80bkIsUUFBUWprQixNQUFLdVAsR0FBS0EsRUFBRTJ1QixZQUFjN1osT0FBT3prQixRQUFRK1UsY0FDekUsSUFBN0JzcEIsZUFBZXg1QixZQUN4QjRmLE9BQU9xWixjQUFjMTRCLFNBQVdpNUIsY0FBY3g1QixVQUVsRCxDQUNBNGYsT0FBT3FaLGNBQWMxNEIsU0FBV3RDLEtBQUtjLElBQUlkLEtBQUthLElBQUk4Z0IsT0FBT3FaLGNBQWMxNEIsVUFBVyxHQUFJLEVBQ3hGLENBSUEsT0FIS3FmLE9BQU96a0IsUUFBUXV2QixnQkFDWm1GLGdCQUFnQjZKLFdBQVc5WixRQUU1QmlRLGdCQUFnQjhKLFFBQVEvWixPQUNqQyxDQXpCRWlRLGdCQUFnQjBKLFdBQVczWixPQXlCN0IsQ0FDRixDQUVBLGlCQUFPMlosQ0FBWTNaLFFBQ2pCLE9BQVFBLE9BQU9xWixjQUFjbm5CLFVBQzNCLEtBQUsrZCxnQkFBZ0IrSCxvQkFDckIsS0FBSy9ILGdCQUFnQmdJLHlCQUNyQixLQUFLaEksZ0JBQWdCaUksaUJBQ3JCLEtBQUtqSSxnQkFBZ0JrSSxnQkFDckIsS0FBS2xJLGdCQUFnQm1JLG9CQUNuQixDQUNFLE1BQU0vSSxTQUFXLENBQ2YvMEIsS0FBTSxZQUVSLEdBQUkwbEIsT0FBT3FaLGNBQWNubkIsV0FBYStkLGdCQUFnQmtJLGlCQUlwRCxHQUhBOUksU0FBU3BkLE1BQVFxVyxTQUFTQyxXQUFXQyxNQUNyQzZHLFNBQVMzRixTQUFXcEIsU0FBU00sVUFBVUcsTUFDdkNzRyxTQUFTOThCLEtBQU95dEIsT0FBT3prQixRQUFRcEYsTUFBTWdVLE1BQU1oUixJQUFJNm1CLE9BQU96a0IsUUFBUWdWLFVBQVU5TSxXQUNuRTRyQixTQUFTOThCLEtBQU0sWUFDZixHQUFJeXRCLE9BQU9xWixjQUFjbm5CLFdBQWErZCxnQkFBZ0JnSSx5QkFDM0Q1SSxTQUFTcGQsTUFBUXFXLFNBQVNDLFdBQVdDLE1BQ3JDNkcsU0FBUzNGLFNBQVdwQixTQUFTTSxVQUFVQyxlQUN2Q3dHLFNBQVM5OEIsS0FBT3l0QixPQUFPemtCLFFBQVFvWCxvQkFDMUIsR0FBSXFOLE9BQU9xWixjQUFjbm5CLFdBQWErZCxnQkFBZ0IrSCxxQkFDdERoWSxPQUFPemtCLFFBQVF3OUIsUUFBVS9ZLE9BQU96a0IsUUFBUXk5QixrQkFBaUQsUUFBN0JoWixPQUFPemtCLFFBQVF3aEIsVUFDOUVzUyxTQUFTcGQsTUFBUXFXLFNBQVNDLFdBQVdFLFNBRXJDNEcsU0FBU3BkLE1BQVFxVyxTQUFTQyxXQUFXQyxNQUNyQzZHLFNBQVMzRixTQUFXcEIsU0FBU00sVUFBVUUsVUFDdkN1RyxTQUFTOThCLEtBQU95dEIsT0FBT3prQixRQUFRd2hCLGdCQUU1QixHQUFJaUQsT0FBT3FaLGNBQWNubkIsV0FBYStkLGdCQUFnQmlJLGlCQUMzRDdJLFNBQVNwZCxNQUFRcVcsU0FBU0MsV0FBV0csS0FDckMyRyxTQUFTOThCLEtBQU95dEIsT0FBT3prQixRQUFRaStCLGVBQzFCLElBQUl4WixPQUFPcVosY0FBY25uQixXQUFhK2QsZ0JBQWdCbUksb0JBUTNELE9BUEEvSSxTQUFTcGQsTUFBUXFXLFNBQVNDLFdBQVdFLFFBQ3JDNEcsU0FBU3ZNLE9BQVM5QyxPQUFPemtCLFFBQVFwRixPQUFPNkIsUUFBUTdFLFNBQVNreUIsU0FBUzJVLFlBQ2xFM0ssU0FBU3hNLE9BQVM3QyxPQUFPemtCLFFBQVFwRixPQUFPNkIsUUFBUTdFLFNBQVNreUIsU0FBUzRVLGFBQ2xFNUssU0FBU2pOLFVBQVlwQyxPQUFPemtCLFFBQVFwRixNQUFNNkIsT0FBT2tpQyxNQUFNNS9CLE1BQU11QyxPQUN6RG1qQixPQUFPemtCLFFBQVFwRixNQUFNNkIsT0FBT2tpQyxNQUFNNS9CLEtBQ2xDMGxCLE9BQU96a0IsUUFBUXBGLE1BQU01RCxJQUczQixDQUM4QyxjQUExQ2dILEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQzVCazJCLFNBQVM3dkIsT0FBUSxHQUVmd2dCLE9BQU96a0IsUUFBUTI5QixXQUNqQjVRLFNBQVM0QyxjQUFjbUUsVUFDZHJQLE9BQU96a0IsUUFBUTQ5QixnQkFDeEI3USxTQUFTNEIsYUFBYW1GLFVBQVUvckIsTUFBS3FuQixPQUNuQzltQixjQUFjOHFCLGdCQUFnQmhFLEtBQUtBLEtBQUksSUFHekNVLHNCQUFzQjNlLE9BQU8yaUIsU0FBVSxDQUFFMW1CLE9BQVEsQ0FBQ3FYLE9BQU96a0IsUUFBUXBGLE9BQU8zRCxRQUFPbUcsR0FBS0EsRUFBRXl5QixPQUFPdnVCLFNBQVNxeUIsYUFBY2xQLE9BQU96a0IsUUFBUXV2QixVQUV2SSxFQUdOLENBRUEsdUJBQWFnUCxDQUFZOVosUUFDdkIsTUFBTW1hLFlBQWM1SyxXQUFXN2lCLE9BQU9zVCxPQUFPcVosZUFDN0MsR0FBSWMsTUFBTyxDQUNULE1BQU1ySyxTQUFXcUssTUFBTWhoQyxJQUFJLFlBQ3ZCMjJCLFdBQ0Y5UCxPQUFPcVosY0FBY3ZKLFNBQVdBLFVBRWxDOVAsT0FBT3FaLGNBQWMxNEIsU0FBV3hJLE9BQU9naUMsTUFBTWhoQyxJQUFJLGNBQ2pENm1CLE9BQU9xWixjQUFjL21CLFdBQWFuYSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxlQUNuRDZtQixPQUFPcVosY0FBY3hGLGlCQUFtQjE3QixPQUN0Q2dpQyxNQUFNaGhDLElBQUkscUJBRVo2bUIsT0FBT3FaLGNBQWN2RixzQkFBd0IzN0IsT0FDM0NnaUMsTUFBTWhoQyxJQUFJLHlCQUVkLENBQ0YsQ0FFQSxvQkFBYTRnQyxDQUFTL1osUUFDcEIsT0FBUUEsT0FBT3FaLGNBQWN2SixVQUMzQixLQUFLRyxnQkFBZ0J3SSxvQkFDbkIsQ0FDRSxNQUFNdlcsY0FBZ0IyVixjQUFjbnJCLE9BQU8sQ0FDekMwdEIsYUFBYSxJQUVmLEdBQUlsWSxRQUFTLENBQ1gsSUFBSVksT0FBU1osUUFBUS9vQixJQUFJLFdBQWEsRUFDbEMwcEIsT0FBU1gsUUFBUS9vQixJQUFJLFdBQWEsRUFDdEMsTUFBTWlwQixVQUFZRixRQUFRL29CLElBQUksYUFFekJwQixNQUFNSSxPQUFPMnFCLFdBQVVBLE9BQVMzcUIsT0FBTzJxQixTQUN2Qy9xQixNQUFNSSxPQUFPMHFCLFdBQVVBLE9BQVMxcUIsT0FBTzBxQixTQUU1Q1osYUFBYXZWLE9BQ1hzVCxPQUFPemtCLFFBQVFwRixNQUFNaVgsU0FDckIsQ0FBRTBWLE9BQVFELE9BQVFULFdBQ2xCLENBQ0VDLFlBQWFyQyxPQUFPcVosY0FBYzE0QixTQUNsQzJoQixjQUFldEMsT0FBT3FaLGNBQWMvbUIsV0FDcENrTyxZQUFhUixPQUFPemtCLFFBQVF1dkIsVUFHbEMsQ0FDRixDQUNBLE1BQ0YsS0FBS21GLGdCQUFnQnNJLGlCQUFrQixDQUNyQyxNQUFNdG1CLE1BQVEsSUFBSWxDLFVBMEJsQixPQXpCQWtDLE1BQU1qQixhQUFlZ1AsT0FBT3FaLGNBQWMxNEIsU0FDMUNzUixNQUFNSyxXQUFhME4sT0FBT3FaLGNBQWMvbUIsV0FDeENMLE1BQU05YixNQUFTNnBCLE9BQU96a0IsUUFBUWdOLFNBRTFCeVgsT0FBT3prQixRQUFRZ04sU0FEZnlYLE9BQU96a0IsUUFBUTJOLFFBRW5CK0ksTUFBTTRoQixpQkFBbUI3VCxPQUFPcVosY0FBY3hGLGlCQUM5QzVoQixNQUFNNmhCLHNCQUF3QjlULE9BQU9xWixjQUFjdkYsc0JBQ25EN2hCLE1BQU1vb0IsU0FDSHJhLE9BQU96a0IsUUFBUTY5QixnQkFDaEI3L0IsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCSSxLQUFLc0csS0FBSzJFLE1BQ1Z3YixPQUFPemtCLFFBQVFrK0IsZUFDYnpaLE9BQU9xWixjQUFjbm5CLFdBQWErZCxnQkFBZ0JrSSxpQkFDcERsbUIsTUFBTS9OLE1BQVE4YixPQUFPemtCLFFBQVFnVixjQUN2QjBCLE1BQU03VSxRQUVaNGlCLE9BQU9xWixjQUFjbm5CLFdBQWErZCxnQkFBZ0IrSCwwQkFFNUMvbEIsTUFBTXFvQixjQUFjdGEsT0FBT3prQixRQUFRd2hCLGlCQUVuQzlLLE1BQU1zb0IsbUJBQW1CdmEsT0FBT3prQixRQUFRb1gsZ0JBRTVDcU4sT0FBT3FaLGNBQWMxUixhQUN2QjFWLE1BQU00ZixZQUVELENBQ0xyekIsT0FBUXlULE1BQU1tSyxlQUNkdE0sYUFBY21DLE1BQU11b0IsbUJBQ3BCL25CLFNBQVVSLE1BQU1RLFNBQ2hCQyxXQUFZVCxNQUFNUyxXQUNsQjBJLGNBQWUsQ0FDYixFQUFHbkosTUFBTXdvQixpQkFDVCxFQUFHeG9CLE1BQU15b0IsY0FDVCxFQUFHem9CLE1BQU0wb0Isa0JBRVhyZixPQUFRckosTUFBTXFKLE9BRWxCLENBQ0EsS0FBSzJVLGdCQUFnQnVJLGtCQUNyQixLQUFLdkksZ0JBQWdCb0ksbUJBQ25CLENBQ0UsTUFBTXBtQixNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU05YixNQUFTNnBCLE9BQU96a0IsUUFBUWdOLFNBRTFCeVgsT0FBT3prQixRQUFRZ04sU0FEZnlYLE9BQU96a0IsUUFBUTJOLFFBRW5CK0ksTUFBTVUsZUFBaUJxTixPQUFPemtCLFFBQVFvWCxlQUN0Q1YsTUFBTThLLFVBQVlpRCxPQUFPemtCLFFBQVF3aEIsVUFDakM5SyxNQUFNMUIsUUFBVXlQLE9BQU96a0IsUUFBUWdWLFFBQy9CMEIsTUFBTTNVLFNBQVcvRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxZQUMzQzhZLE1BQU11ZSxVQUFZajNCLEtBQUtzRyxLQUFLcUssR0FDNUIsSUFBSTNJLEtBQU8sQ0FBQyxFQUVWeWUsT0FBT3FaLGNBQWN2SixXQUFhRyxnQkFBZ0J1SSxtQkFFbERqM0IsS0FBTyxDQUNMakgsS0FBTXc4QixpQkFBaUJ0RixjQUFjbDNCLEtBQ3JDaEgsT0FBUTBzQixPQUFPemtCLFFBQVF1ZixTQUN2QjFoQixPQUFRLE9BRVY2WSxNQUFNL1AsS0FBTzhkLE9BQU96a0IsUUFBUStVLE9BQzVCMkIsTUFBTXNuQixlQUFpQnZaLE9BQU96a0IsUUFBUWcrQixlQUN0Q3RuQixNQUFNNkssVUFBVyxRQUNYN0ssTUFBTWlMLGFBRVozYixLQUFPLENBQ0xqSCxLQUFNeTRCLGtCQUFrQnZCLGNBQWNsM0IsS0FDdENsQixPQUFRLE9BRVY2WSxNQUFNSyxXQUFhME4sT0FBT3FaLGNBQWMvbUIsWUFFMUMvUSxLQUFLbkUsS0FBTzZVLE1BQU0wSCxhQUNsQnBZLEtBQUtxZixVQUFZcm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLFlBRXpDNm1CLE9BQU9xWixjQUFjdkosV0FBYUcsZ0JBQWdCdUksa0JBRWxEMUIsaUJBQWlCeEYsU0FBUy92QixNQUUxQnd4QixrQkFBa0J6QixTQUFTL3ZCLEtBRS9CLEVBR04sRUN4aUJLLE1BQU1xNUIsYUFDWCxXQUFBdDVCLENBQWE0SCxRQUFVLEtBQU1vSixXQUFhdkMsVUFBVXNQLGdCQUFnQnJQLFNBQ2xFL1QsS0FBS2dXLE1BQVEsSUFBSWxDLFVBQVU3RyxTQUMzQmpOLEtBQUtnVyxNQUFNVSxlQUFpQixNQUM1QjFXLEtBQUtnVyxNQUFNSyxXQUFhQSxXQUN4QnJXLEtBQUtnVyxNQUFNNkssVUFBVyxFQUN0QjdnQixLQUFLaU4sUUFBVUEsT0FDakIsQ0FFQSxXQUFJd1gsR0FJRixZQUhJNW1CLElBQWNtQyxLQUFLMGtCLFdBQ3JCMWtCLEtBQUswa0IsU0FBNkIsY0FBbEIxa0IsS0FBS3FCLFVBRWhCckIsS0FBSzBrQixRQUNkLENBRUEsV0FBSUQsQ0FBUzdZLEdBQ1g1TCxLQUFLMGtCLFNBQVc5WSxDQUNsQixDQUVBLFlBQUl2SyxHQUVGLE9BREtyQixLQUFLMmtCLFlBQVcza0IsS0FBSzJrQixVQUFZcm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ3pEOEMsS0FBSzJrQixTQUNkLENBRUEsWUFBSXRqQixDQUFVdUssSUFDRixJQUFOQSxJQUFhNUwsS0FBSzJrQixVQUFZcm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQzVEOEMsS0FBSzJrQixVQUFZL1ksQ0FDbkIsQ0FFQSxTQUFJMVIsR0FDRixPQUFJOEYsS0FBS2lOLFFBQWdCc0MsV0FBV3FCLGdCQUFnQjVRLEtBQUtpTixTQUNsRCxJQUNULENBRUEsV0FBSUEsQ0FBU3JCLEdBQ1g1TCxLQUFLNCtCLFNBQVdoekIsRUFDaEI1TCxLQUFLZ1csTUFBTTliLE1BQVEwUixDQUNyQixDQUVBLFdBQUlxQixHQUNGLE9BQUlqTixLQUFLNCtCLFNBQWlCNStCLEtBQUs0K0IsU0FDeEIsSUFDVCxDQUVBLFlBQUl0eUIsR0FDRixPQUFJdE0sS0FBSzlGLE1BQU15YyxRQUFnQjNXLEtBQUs5RixNQUFNb1MsU0FDbkMsSUFDVCxDQUVBLGFBQUlpUyxHQUNGLFFBQUl2ZSxLQUFLZ1csT0FBY2hXLEtBQUtnVyxNQUFNdUksU0FFcEMsQ0FFQSxZQUFJc2dCLEdBQ0YsU0FBSTcrQixLQUFLZ1csT0FBU2hXLEtBQUtnVyxNQUFNdEIsT0FBUzFVLEtBQUtnVyxNQUFNdEIsTUFBTWpTLE1BRXpELENBRUEsa0JBQU9nUixDQUFhcEgsTUFDbEIsTUFBTXl5QixTQUFXLElBQUlILGFBQ3JCcHZCLFdBQVdtQyxxQkFBcUJvdEIsU0FBVXp5QixNQUMxQyxNQUFNMHlCLFVBQVkxeUIsS0FBS3NILGNBQWMsZ0JBR3JDLE9BRkFILFNBQVNxQixlQUFla3FCLFVBQVdELFNBQVM5b0IsT0FDNUM4b0IsU0FBUzNpQixVQUFZOVAsS0FBS3hQLFFBQVEsWUFBWUUsUUFBUW9mLFVBQy9DMmlCLFFBQ1QsQ0FFQSxxQkFBTUUsR0FDSixNQUNNamxCLFdBQWF3RyxlQURGLCtDQUMyQnZnQixLQUFLZ1csT0FDM0NhLFlBQWMyVSxFQUFFQyxVQUFVMVIsTUFBTSxHQUN0QyxPQUFJbEQsYUFDRkEsWUFBWTlILFVBQVUrVCxPQUFPLFlBQWEsWUFBYSxhQUNoRGpNLGFBRUYsSUFDVCxDQUVBLGVBQU0rZSxDQUFXclIsYUFBYyxHQUd6QkEsbUJBQ0l2a0IsS0FBS2kvQixVQUdiLE1BQU1sbEIsV0FBYXdHLGVBTkYsNkNBTTJCdmdCLE1BQ3RDNlcsWUFBYzJVLEVBQUVDLFVBQVUxUixNQUFNLEdBRXRDLEdBQUl3SyxZQUFhLENBQ0QxTixZQUFZbEQsY0FBYyxnQkFDbEN1ckIsa0JBQWtCbC9CLEtBQUtnL0Isa0JBQy9CLENBRUEsTUFBTW5aLFlBQWMsQ0FBQyxFQUNyQixJQUFJN1YsUUFDQWhRLEtBQUs5RixPQUNIOEYsS0FBS2dSLE1BQU82VSxZQUFZN1UsTUFBUWhSLEtBQUtnUixNQUNwQzZVLFlBQVkzckIsTUFBUThGLEtBQUs5RixNQUM5QjhWLFFBQVV4TSxZQUFZeU0sV0FBVzRWLGNBRWpDN1YsUUFBVXhNLFlBQVl5TSxhQUd4QixNQUVNNU0sU0FBVyxDQUNmTyxNQUhXNUQsS0FBSzlGLE1BQU0wSixLQUFPNUQsS0FBSzlGLE1BQU0wSixLQUFPdEcsS0FBS3NHLE1BR3pDcUssR0FDWCtCLFFBQ0FELE9BQVEvUCxLQUFLK1AsT0FDYlMsUUFBU3FHLFlBQVl1VSxXQUlyQixDQUFDLFNBQVUsYUFBYXBvQixTQUFTMUYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsZUFFM0RtRyxTQUFTQyxRQUFVRSxZQUFZc2lCLHFCQUFxQixPQUVoQyxjQUFsQjlsQixLQUFLcUIsV0FBMEJnQyxTQUFTRSxPQUFRLEdBRXBEQyxZQUFZaU4sT0FBT3BOLFVBQVVnRSxNQUFLcUosS0FDekJBLEtBRVgsQ0FFQSxhQUFNdXVCLEdBQ0pqL0IsS0FBS2dXLE1BQU04aEIsZ0JBQWlCLFFBQ3RCOTNCLEtBQUtnVyxNQUFNaUwsV0FDWmpoQixLQUFLeWtCLFNBQVl6a0IsS0FBSzYrQixVQUFhNytCLEtBQUt1ZSxZQUN2Q3ZlLEtBQUttL0IsZ0JBQ0RuL0IsS0FBSzlGLE1BQU00d0IsYUFBYXAyQixLQUFLMEYsT0FBT08sWUFFcENxRixLQUFLOUYsTUFBTTR3QixhQUFhcDJCLEtBQUswRixPQUFPRyxjQUc5Q3lGLEtBQUtvL0IsU0FBVSxDQUNqQixDQUVBLG9CQUFNblUsR0FDSixNQUVNbFIsV0FBYXdHLGVBRkYsNkNBRTJCdmdCLE1BQ3RDNlcsWUFBYzJVLEVBQUVDLFVBQVUxUixNQUFNLEdBYXRDLEdBWGNsRCxZQUFZbEQsY0FBYyxnQkFDbEN1ckIsa0JBQWtCbC9CLEtBQUtnL0IsbUJBRXhCaC9CLEtBQUt5a0IsVUFBV3prQixLQUFLNitCLFVBQWE3K0IsS0FBS3VlLFlBQ3RDdmUsS0FBS20vQixnQkFDRG4vQixLQUFLOUYsTUFBTTR3QixhQUFhcDJCLEtBQUswRixPQUFPTyxZQUVwQ3FGLEtBQUs5RixNQUFNNHdCLGFBQWFwMkIsS0FBSzBGLE9BQU9HLGVBSXpDeUYsS0FBS21jLFVBQVcsT0FDckIsTUFBTXVQLFlBQWNwdUIsS0FBSzhlLFNBQVNsZixJQUFJOEMsS0FBS21jLFdBRXJDekwsVUFBWWdiLFlBQVl4dEIsT0FBTyxDQUFFc1MsUUFBU3FHLFlBQVl1VSxZQUU1RCxhQURNcmlCLEdBQUc0aUIsS0FBS0MsY0FBY2xiLEtBQUssR0FDMUJBLEdBQ1QsRUN0S0ssTUFBTTJ1QiwwQkFBMEJuTCxPQUNyQyxpQkFBQXBhLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BRXhCQSxLQUNHcmEsS0FBSyxpQkFDTCt4QixPQUFNbnZCLGFBQWV0QyxLQUFLcy9CLHNCQUFzQi9pQyxRQUNyRCxDQUVBLDJCQUFNK2lDLENBQXVCL2lDLE9BQzNCLE1BQU1LLEdBQUtMLE1BQU1JLGNBQWNFLFFBQVEsU0FHdkNtRCxLQUFLc0YsS0FBS0EsS0FBS3FlLE9BQU96bkIsT0FBT1UsR0FBR0csUUFBUW9nQixRQUFROUgsVUFBVyxFQUMzRDlZLE1BQU1JLGNBQWM0aUMsTUFBTUMsUUFBVSxPQUMvQngvQixLQUFLc0YsS0FBS0EsS0FBS202QixRQUFPei9CLEtBQUtzRixLQUFLQSxLQUFLbTZCLE1BQVEsR0FDbER6L0IsS0FBS3NGLEtBQUtBLEtBQUttNkIsUUFDRmxqQyxNQUFNSSxjQUFjRSxRQUFRLG1CQUNuQjhXLGNBQWMsVUFDM0JpYSxVQUFZNXRCLEtBQUtzRixLQUFLQSxLQUFLbTZCLE1BQ2hDei9CLEtBQUtzRixLQUFLQSxLQUFLbTZCLE9BQVN6L0IsS0FBS3NGLEtBQUtBLEtBQUtvNkIsY0FDekMxL0IsS0FBS2liLE9BRVQsQ0FFQSxtQkFBYXhLLENBQVFuTCxNQUNuQixNQUFNeVUsV0FBYXdHLGVBQ2pCLGdEQUNBamIsTUFFRixPQUFPLElBQUkwVyxTQUFRaEIsVUFDTCxJQUFJcWtCLGtCQUNkLENBQ0U1d0IsTUFBT25KLEtBQUttSixNQUNaK0IsUUFBU3VKLEtBQ1R6VSxLQUNBNnVCLFFBQVMsQ0FBQyxFQUNWbFosTUFBTyxLQUNMLElBQUszVixLQUFLbTZCLE9BQVNuNkIsS0FBS282QixhQUFjLE9BQU8xa0IsU0FBUSxHQUNyRCxNQUFNM0YsU0FBVy9QLEtBQUtxZSxPQUFPcHRCLFFBQU8wUixPQUFTQSxNQUFNb04sV0FDbkQsT0FBTzJGLFFBQVEzRixTQUFRLEdBRzNCLENBQUVvRSxRQUFTLENBQUMsT0FBUSxTQUFVLGtCQUU1QnpiLFFBQU8sRUFBSSxHQUVuQixFQzlDSyxNQUFNMmhDLDBCQUEwQnpMLE9BQ3JDLGlCQUFBcGEsQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFFeEJBLEtBQ0dyYSxLQUFLLGNBQ0wreEIsT0FBTW52QixhQUFldEMsS0FBSzQvQix3QkFBd0JyakMsU0FDckR3ZCxLQUFLcmEsS0FBSyxVQUFVK3hCLE9BQU1sMUIsT0FBU3lELEtBQUs2L0IsaUJBQWlCdGpDLFFBQzNELENBRUEsNkJBQU1xakMsQ0FBeUJyakMsT0FDN0IsTUFBTUssR0FBS0wsTUFBTUksY0FBY0UsUUFBUSxTQUNqQ2lqQyxTQUFXbGpDLEdBQUdDLFFBQVEsY0FDNUIsSUFBSyxNQUFNb0osUUFBUTY1QixTQUFTM3FCLGlCQUFpQixlQUMzQ2xQLEtBQUs4SSxVQUFVK1QsT0FBTyxZQUN0QjlpQixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnpkLEtBQUtsSixRQUFRbEIsS0FBS3daLFVBQVcsRUFDNURyVixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnpkLEtBQUtsSixRQUFRbEIsS0FBS2trQyxVQUFXLEVBRTlEdlUsRUFBRTV1QixJQUFJb2pDLFlBQVksWUFDbEJoZ0MsS0FBS3NGLEtBQUtBLEtBQUtvZSxnQkFBZ0I5bUIsR0FBR0csUUFBUWxCLEtBQUt3WixVQUFXLEVBQ3RDelksR0FDakJDLFFBQVEseUJBQ1I4VyxjQUFjLFdBQ0xpYSxVQUNWNXRCLEtBQUtzRixLQUFLQSxLQUFLN0MsTUFDZnpDLEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCOW1CLEdBQUdHLFFBQVFsQixLQUFLeEYsV0FDN0MySixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQjltQixHQUFHRyxRQUFRbEIsS0FBS3pGLE1BQ3BDd0csR0FDWkMsUUFBUSx5QkFDUjhXLGNBQWMsbUJBQ1Y1RSxVQUFVK1QsT0FBTyxZQUN4QjlpQixLQUFLc0YsS0FBS0EsS0FBS28yQixVQUFXLENBVzVCLENBRUEsc0JBQU1tRSxDQUFrQnRqQyxPQUN0QkEsTUFBTUUsaUJBQ0ZGLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxhQUMzQ2xtQixNQUFNNGUsT0FDUixDQUVBLG1CQUFheEssQ0FBUW5MLE1BQ25CLE1BQU15VSxXQUFhd0csZUFDakIsZ0RBQ0FqYixNQUVGLE9BQU8sSUFBSTBXLFNBQVFoQixVQUNMLElBQUkya0Isa0JBQ2QsQ0FDRWx4QixNQUFPbkosS0FBS21KLE1BQ1orQixRQUFTdUosS0FDVHpVLEtBQ0E2dUIsUUFBUyxDQUFDLEVBQ1ZsWixNQUFPLElBQ0QzVixLQUFLbzJCLFNBQWlCMWdCLFFBQVExVixNQUN0QjBWLFNBQVEsSUFHeEIsQ0FBRXZCLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCemIsUUFBTyxFQUFJLEdBRW5CLEVDeEVLLE1BQU1paUMsMkJBQTJCL0wsT0FDdEMsaUJBQUFwYSxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUV4QkEsS0FDR3JhLEtBQUssY0FDTCt4QixPQUFNbnZCLGFBQWV0QyxLQUFLNC9CLHdCQUF3QnJqQyxRQUN2RCxDQUVBLDZCQUFNcWpDLENBQXlCcmpDLE9BQzdCLE1BQU1LLEdBQUtMLE1BQU1JLGNBQWNFLFFBQVEsU0FDdkNtRCxLQUFLc0YsS0FBS0EsS0FBSytQLFNBQVd6WSxHQUFHRyxRQUFRbEIsSUFDckNtRSxLQUFLaWIsT0FDUCxDQUVBLG1CQUFheEssQ0FBUW5MLE1BQ25CLE1BQU15VSxXQUFhd0csZUFDakIsK0NBQ0FqYixNQUVGLE9BQU8sSUFBSTBXLFNBQVFoQixVQUNMLElBQUlpbEIsbUJBQ2QsQ0FDRXh4QixNQUFPbkosS0FBS21KLE1BQ1orQixRQUFTdUosS0FDVHpVLEtBQ0E2dUIsUUFBUyxDQUFDLEVBQ1ZsWixNQUFPLElBQ0QzVixLQUFLK1AsU0FBaUIyRixRQUFRMVYsS0FBSytQLFVBQzNCMkYsU0FBUSxJQUd4QixDQUFFdkIsUUFBUyxDQUFDLE9BQVEsU0FBVSxpQkFFNUJ6YixRQUFPLEVBQUksR0FFbkIsRUNwQ0ssTUFBTWtpQyx5QkFBeUJoTSxPQUNwQyxXQUFBN3VCLENBQWFDLEtBQU1oRyxTQUNqQmpELE1BQU1pSixLQUFNaEcsU0FFWlUsS0FBSzYwQixPQUFTdnZCLEtBQUt1dkIsUUFBVSxDQUFDLENBQ2hDLENBRUEsaUJBQUEvYSxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUN4QkEsS0FBS0MsR0FBRyxTQUFVLFFBQVNoYSxLQUFLbWdDLGVBQWVqbkMsS0FBSzhHLE9BQ3BEK1osS0FBS0MsR0FBRyxTQUFVLE9BQVFoYSxLQUFLMnhCLFVBQVV6NEIsS0FBSzhHLE9BQzlDK1osS0FBS0MsR0FDSCxRQUNBLHVCQUNBaGEsS0FBS29nQyxzQkFBc0JsbkMsS0FBSzhHLE9BRWxDK1osS0FBS0MsR0FDSCxRQUNBLDJCQUNBaGEsS0FBS3FnQywwQkFBMEJubkMsS0FBSzhHLE9BRXRDK1osS0FBS0MsR0FDSCxRQUNBLDJCQUNBaGEsS0FBS3NnQywwQkFBMEJwbkMsS0FBSzhHLE9BRXRDK1osS0FBS0MsR0FDSCxRQUNBLHdCQUNBaGEsS0FBS3VnQyx1QkFBdUJybkMsS0FBSzhHLE9BRW5DK1osS0FBS0MsR0FBRyxRQUFTLFNBQVVoYSxLQUFLbzRCLFVBQVVsL0IsS0FBSzhHLE1BQ2pELENBRUEsMkJBQU1vZ0MsQ0FBdUI3akMsT0FDM0JBLE1BQU1FLGlCQUNOLE1BQ00rakMsVUFES2prQyxNQUFNSSxjQUFjRSxRQUFRLFNBQ2xCRSxRQUFRbEIsVUFDdkJtRSxLQUFLcytCLG1CQUFtQmtDLFVBQ2hDLENBRUEsK0JBQU1ILENBQTJCOWpDLE9BQy9CQSxNQUFNRSxpQkFDTixNQUNNK2pDLFVBREtqa0MsTUFBTUksY0FBY0UsUUFBUSxTQUNsQkUsUUFBUWxCLElBQzdCbUUsS0FBS3lnQyx1QkFBdUJELFVBQzlCLENBRUEsK0JBQU1GLENBQTJCL2pDLE9BQy9CQSxNQUFNRSxpQkFDTixNQUNNK2pDLFVBREtqa0MsTUFBTUksY0FBY0UsUUFBUSxTQUNsQkUsUUFBUWxCLElBQzdCbUUsS0FBSzBnQyx1QkFBdUJGLFVBQzlCLENBRUEsNEJBQU1ELENBQXdCaGtDLE9BQzVCQSxNQUFNRSxpQkFDTixNQUNNK2pDLFVBREtqa0MsTUFBTUksY0FBY0UsUUFBUSxTQUNsQkUsUUFBUWxCLElBQzdCbUUsS0FBSzJnQyxvQkFBb0JILFVBQzNCLENBRUEsZUFBTXBJLENBQVc3N0IsT0FDZixNQUFNWSxPQUFTWixNQUFNSSxjQUFjSSxRQUFRSSxPQUMzQyxHQUFlLFNBQVhBLE9BQ0YsSUFBSyxNQUFNeWpDLE9BQVEsQ0FDakIsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLGNBRU01Z0MsS0FBS3MrQixtQkFBbUJzQyxNQUdsQzVnQyxLQUFLNmdDLGFBQ1UsYUFBWDFqQyxRQUF5QjZDLEtBQUtzRixLQUFLQSxLQUFLaTBCLFVBQzFDdjVCLEtBQUtpYixPQUVULENBRUEsd0JBQU1xakIsQ0FBb0J6aUMsS0FDeEIsTUFBTWUsR0FBS29ELEtBQUs4Z0MsU0FBUyxHQUFHbnRCLGNBQWMsb0JBQW9COVgsUUFDeERrbEMsTUFBUW5rQyxJQUFJK1csY0FBYyxTQUMxQjFaLFFBQVUrRixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnZNLE1BQU10YixLQUNyRCxHQUFJa2xDLE9BQVM5bUMsUUFBUyxDQUNwQixHQUFJNkIsTUFBTUksT0FBT2pDLFVBQVcsQ0FDMUIsTUFBTWtILEtBQU8sSUFBSVcsS0FBSzdILGVBQ2hCa0gsS0FBS3lKLFNBQVMsQ0FBRXRJLE9BQU8sSUFDN0JuQixLQUFLeTBCLFVBQVUsQ0FDYjdsQixPQUFRelMsS0FBS0MsS0FBS3lXLE9BQU8sb0NBQXFDLENBQzVEM1csTUFBTzJDLEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCc2QsS0FBS25sQyxLQUFLd0IsTUFDaERwRCxZQUdKOG1DLE1BQU0zcUMsTUFBUStLLEtBQUtzQixLQUNyQixNQUFPcytCLE1BQU0zcUMsTUFBUThGLE9BQU9qQyxTQUM1QitGLEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCbGtCLE9BQU8zRCxLQUFPSyxPQUFPNmtDLE1BQU0zcUMsT0FDckQ0SixLQUFLNjBCLFNBQVE3MEIsS0FBSzYwQixPQUFTLENBQUMsR0FDakM3MEIsS0FBSzYwQixPQUFPaDVCLE1BQU8sQ0FDckIsQ0FDQW1FLEtBQUs2Z0MsWUFDUCxDQUVBLDRCQUFNSixDQUF3QjVrQyxLQUM1QixNQUFNZSxHQUFLb0QsS0FBSzhnQyxTQUFTLEdBQUdudEIsY0FBYyxvQkFBb0I5WCxRQUN4RGtsQyxNQUFRbmtDLElBQUkrVyxjQUFjLFNBQzVCb3RCLFFBQ0ZBLE1BQU0zcUMsTUFBUThGLE9BQU82a0MsTUFBTTNxQyxPQUFTLEVBQ3BDNEosS0FBS3NGLEtBQUtBLEtBQUtvZSxnQkFBZ0Jsa0IsT0FBTzNELEtBQU9LLE9BQU82a0MsTUFBTTNxQyxRQUU1RDRKLEtBQUs2Z0MsWUFDUCxDQUVBLDRCQUFNSCxDQUF3QjdrQyxLQUM1QixNQUFNZSxHQUFLb0QsS0FBSzhnQyxTQUFTLEdBQUdudEIsY0FBYyxvQkFBb0I5WCxRQUN4RGtsQyxNQUFRbmtDLElBQUkrVyxjQUFjLFNBQzVCb3RCLE9BQVM3a0MsT0FBTzZrQyxNQUFNM3FDLE9BQVMsSUFDakMycUMsTUFBTTNxQyxNQUFROEYsT0FBTzZrQyxNQUFNM3FDLE9BQVMsRUFDcEM0SixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQmxrQixPQUFPM0QsS0FBT0ssT0FBTzZrQyxNQUFNM3FDLFFBRTVENEosS0FBSzZnQyxZQUNQLENBRUEseUJBQU1GLENBQXFCOWtDLEtBQ3pCLE1BQU1lLEdBQUtvRCxLQUFLOGdDLFNBQVMsR0FBR250QixjQUFjLG9CQUFvQjlYLFFBQ3hEa2xDLE1BQVFua0MsSUFBSStXLGNBQWMsU0FDNUJvdEIsUUFDRkEsTUFBTTNxQyxNQUFRLEtBQ2Q0SixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQmxrQixPQUFPM0QsS0FBTyxHQUUvQ21FLEtBQUs2Z0MsWUFDUCxDQUVBLG9CQUFNVixDQUFnQjVqQyxPQUNwQkEsTUFBTUUsaUJBQ04sTUFBTXNrQyxNQUFReGtDLE1BQU1JLGNBQ2R2RyxNQUFROEYsT0FBTzZrQyxNQUFNM3FDLE9BQ3RCMEYsTUFBTTFGLFNBQ1Q0SixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQmxrQixPQUFPdWhDLE1BQU16cUMsTUFBUUYsT0FHdEQ0SixLQUFLNmdDLFlBQ1AsQ0FFQSxVQUFBQSxHQUNFN2dDLEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCdWQsT0FBT3grQixNQUFRLEVBQzlDLElBQUssTUFBTzVHLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQ2hDcEssS0FBS3NGLEtBQUtBLEtBQUtvZSxnQkFBZ0Jsa0IsUUFFbkIsU0FBUjNELE1BQ0ZtRSxLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnVkLE9BQU94K0IsT0FBU3JNLE9BSW5ELE1BQU04cUMsV0FBYWxoQyxLQUFLOGdDLFNBQVMsR0FBR250QixjQUFjLFdBQ2xELEdBQUkzVCxLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnVkLE9BQU9FLFFBQVMsQ0FFL0NqbEMsT0FBTzhELEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCdWQsT0FBT3grQixTQUM3Q3ZHLE9BQU84RCxLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnVkLE9BQU83cUMsUUFFN0M4cUMsV0FBV255QixVQUFVQyxJQUFJLFdBQ3pCaFAsS0FBS3NGLEtBQUtBLEtBQUtpMEIsVUFBVyxJQUUxQjJILFdBQVdueUIsVUFBVStULE9BQU8sV0FDNUI5aUIsS0FBS3NGLEtBQUtBLEtBQUtpMEIsVUFBVyxHQUVkMkgsV0FBV3Z0QixjQUFjLFVBQ2pDaWEsVUFBWTV0QixLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQnVkLE9BQU83cUMsS0FDMUQsQ0FFYzhxQyxXQUFXdnRCLGNBQWMsVUFDakNpYSxVQUFZNXRCLEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCdWQsT0FBT3grQixNQUVwRHpDLEtBQUtzRixLQUFLQSxLQUFLb2UsZ0JBQWdCdk0sTUFBTWdxQixVQUN2Q25oQyxLQUFLc0YsS0FBS0EsS0FBS2kwQixTQUErRyxJQUFwRzM1QixPQUFPSixPQUFPUSxLQUFLc0YsS0FBS0EsS0FBS29lLGdCQUFnQmxrQixRQUFRakosUUFBTzZxQyxLQUFPdGxDLE1BQU1tSSxTQUFTbTlCLFFBQU94Z0MsT0FFdkgsQ0FFQSxlQUFNK3dCLENBQVdwMUIsT0FDZkEsTUFBTUUsZ0JBQ1IsQ0FFQSxtQkFBYWdVLENBQVFuTCxNQUNuQixNQUFNdXZCLE9BQVMsQ0FBQyxFQUNoQnZ2QixLQUFLb2UsZ0JBQWdCdWQsT0FBT3grQixNQUFRLEVBQ3BDLElBQUssTUFBTzVHLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVE5RSxLQUFLb2UsZ0JBQWdCbGtCLFFBQ2pELFNBQVIzRCxNQUNGeUosS0FBS29lLGdCQUFnQnVkLE9BQU94K0IsT0FBU3JNLE9BQVMsSUFFM0MwRixNQUFNMUYsUUFBVUEsTUFBUSxJQUMzQnkrQixPQUFPaDVCLE1BQU8sR0FJZHlKLEtBQUtvZSxnQkFBZ0J1ZCxPQUFPRSxTQUU1QmpsQyxPQUFPb0osS0FBS29lLGdCQUFnQnVkLE9BQU94K0IsU0FDbkN2RyxPQUFPb0osS0FBS29lLGdCQUFnQnVkLE9BQU83cUMsU0FFbkNrUCxLQUFLKzdCLGVBQWdCLEdBSXpCLE1BQU10bkIsV0FBYXdHLGVBQ2pCLDZDQUNBamIsTUFFRixPQUFPLElBQUkwVyxTQUFRaEIsVUFDTCxJQUFJa2xCLGlCQUNkLENBQ0V6eEIsTUFBT25KLEtBQUttSixNQUNaK0IsUUFBU3VKLEtBQ1R6VSxLQUNBdXZCLE9BQ0FWLFFBQVMsQ0FBQyxFQUNWbFosTUFBTyxJQUNEM1YsS0FBS2kwQixTQUFpQnZlLFNBQVEsR0FDdEJBLFNBQVEsSUFHeEIsQ0FBRXZCLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCemIsUUFBTyxFQUFJLEdBRW5CLEVDck9LLE1BQU1zakMsc0JBQ1gsbUJBQWE3d0IsQ0FDWGtULE9BQ0E0ZCxtQkFDQUMsVUFBWSxLQUNabHJDLEtBQU8sTUFFUCxNQUFNeWpCLFdBQWF3RyxlQUNqQixxREFDQSxDQUNFa2hCLFVBQVc5ZCxPQUFPL2lCLE9BQVMsRUFDM0IraUIsT0FDQXJaLEtBQU1rM0IsVUFDTmxyQyxPQUdKLE9BQU8sSUFBSTBsQixTQUFRaEIsVUFDakIsSUFBSW9YLFNBQVcsS0FDZixNQUFNNkIsSUFBTSxJQUFJQyxPQUFPLENBQ3JCemxCLE1BQU9uWSxLQUNIZ0gsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXdCLENBQUUxZCxPQUMzQ2dILEtBQUtDLEtBQUt5VyxPQUFPLDRCQUE2QixDQUM5Qy9NLGVBQWdCczZCLHFCQUVwQi93QixRQUFTdUosS0FDVG9hLFFBQVMsQ0FDUG9GLFNBQVUsQ0FDUmw4QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUMxQjQyQixTQUFVcmEsT0FDUnFZLFNBQVcsSUFBSWlDLFNBQ2J0YSxLQUFLLEdBQUdwRyxjQUFjLHVCQUVqQnFILFFBQVFvWCxhQUlyQi9XLFFBQVMsV0FDVEosTUFBTyxJQUNFRCxTQUFRLEtBR25CaVosSUFBSWoyQixRQUFPLEVBQUksR0FFbkIsRUMxQ0ssTUFBTTBqQyx3Q0FBd0Nwb0IsZ0JBQ25ELHlCQUFXQyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEscUJBQ2xCaEwsTUFBTyxHQUNQaUwsU0FBVSw4REFDVkUsTUFBTyxJQUNQQyxPQUFRLE9BQ1JGLGVBQWUsR0FFbkIsQ0FFQSxTQUFJbEwsR0FDRixPQUFPblIsS0FBS0MsS0FBS3lXLE9BQU8sNEJBQTZCLENBQ25EL00sZUFBZ0JqSCxLQUFLc1IsT0FBT2l3QixvQkFFaEMsQ0FFQSxpQkFBQXpuQixDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUV4QkEsS0FBS3JhLEtBQUssa0JBQWtCK3hCLE1BQU16eEIsS0FBSzJoQyxlQUFlem9DLEtBQUs4RyxPQUMzRCtaLEtBQUtyYSxLQUFLLHlCQUF5QjlELE9BQU9vRSxLQUFLNGhDLGdCQUFnQjFvQyxLQUFLOEcsTUFDdEUsQ0FFQSxxQkFBTTRoQyxDQUFpQnJsQyxPQUNyQnlELEtBQUtzUixPQUFPK0QsU0FBVzlZLE1BQU1JLGNBQWN2RyxNQUMzQzRKLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxvQkFBTTJqQyxDQUFnQnBsQyxPQUNwQixHQUE2QixLQUF6QnlELEtBQUtzUixPQUFPK0QsU0FBaUIsQ0FDL0IsTUFBTXpELElBQU00WixFQUFFanZCLE1BQU1JLGVBQWVFLFFBQVEsUUFDM0NtRCxLQUFLc1IsT0FBT2hiLEtBQVFzYixJQUFJbFMsS0FBSyw4QkFBOEIwaEMsT0FBUyxHQUNwRXBoQyxLQUFLc1IsT0FBT2t3QixVQUFhNXZCLElBQUlsUyxLQUFLLDBCQUEwQjBoQyxPQUFTLEVBQ3ZFLENBQ0EsR0FBNkIsS0FBekJwaEMsS0FBS3NSLE9BQU8rRCxVQUF3QyxLQUFyQnJWLEtBQUtzUixPQUFPaGIsS0FDN0MsT0FBTyxFQUVUMEosS0FBS3NSLE9BQU8wSixRQUFRLENBQ2xCM0YsU0FBVXJWLEtBQUtzUixPQUFPK0QsU0FDdEIvZSxLQUFNMEosS0FBS3NSLE9BQU9oYixLQUNsQmtyQyxVQUFXeGhDLEtBQUtzUixPQUFPa3dCLFlBRXpCeGhDLEtBQUtpYixPQUNQLENBRUEsbUJBQU1rWCxDQUFlNTFCLE1BQU82MUIsVUFDNUIsQ0FFQSxtQkFBYTNoQixFQUFRLE9BQVcsR0FBRSxhQUFnQixFQUFLLGdCQUFtQixFQUFLLG1CQUF1QixHQUFFLE1BQVUsR0FBRSxVQUFjLE1BQVMsQ0FBQyxHQUMxSSxNQUFNaXNCLE9BQVMsR0FDZixJQUFLLE1BQU16MEIsU0FBUzBiLE9BQ2xCK1ksT0FBT3RsQyxLQUFLLENBQ1Y2VyxHQUFJaEcsTUFBTWdHLEdBQ1YzWCxLQUFNMlIsTUFBTTNSLEtBQ1pnVSxLQUFNckMsTUFBTWxNLE9BQU91TyxPQUd2QixhQUFhLElBQUkwUixTQUFRaEIsVUFDdkIsSUFBSTBtQixnQ0FBZ0MsQ0FDbENILG1CQUNBTSxZQUNBQyxlQUNBQyxZQUFhcGUsT0FBTy9pQixPQUFTLEVBQzdCK2lCLE9BQVErWSxPQUNScm5CLFNBQVUsR0FDVi9lLEtBQU0sR0FDTitHLE1BQ0Fta0MsVUFDQXhtQixTQUNDLENBQUMsR0FBR2hkLFFBQU8sRUFBSSxHQUV0QixFQzFFSyxNQUFNZ2tDLGlCQUNYLG1CQUFhdnhCLENBQVFuYSxLQUFPLEtBQU1rckMsVUFBWSxNQUM1QyxNQUFNem5CLFdBQWF3RyxlQUNqQiwrQ0FDQSxDQUFFalcsS0FBTWszQixVQUFXbHJDLE9BRXJCLE9BQU8sSUFBSTBsQixTQUFRaEIsVUFDakIsSUFBSW9YLFNBQVcsS0FDZixNQUFNNkIsSUFBTSxJQUFJQyxPQUFPLENBQ3JCemxCLE1BQU9uUixLQUFLQyxLQUFLeVcsT0FBTyxrQkFBbUIsQ0FBRTFkLE9BQzdDa2EsUUFBU3VKLEtBQ1RvYSxRQUFTLENBQ1BvRixTQUFVLENBQ1JsOEIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxpQkFDMUI0MkIsU0FBVXJhLE9BQ1JxWSxTQUFXLElBQUlpQyxTQUNidGEsS0FBSyxHQUFHcEcsY0FBYyx1QkFFakJxSCxRQUFRb1gsYUFJckIvVyxRQUFTLFdBQ1RKLE1BQU8sSUFDRUQsU0FBUSxLQUduQmlaLElBQUlqMkIsUUFBTyxFQUFJLEdBRW5CLEVDeEJLLE1BQU1pa0MsbUJBQ1gsV0FBQTU4QixDQUNFNjhCLGlCQUFtQixLQUNuQkMsY0FBZ0IsS0FDaEJobUIsVUFBWSxNQUVabmMsS0FBS2tpQyxpQkFBbUJBLGlCQUN4QmxpQyxLQUFLbWlDLGNBQWdCQSxjQUNyQm5pQyxLQUFLbWMsVUFBWUEsU0FDbkIsQ0FFQSxzQkFBTWltQixHQUNKLE1BQU1yb0IsV0FBYXdHLGVBQWV2Z0IsS0FBSzBaLFNBQVUxWixNQU8zQ3FELFNBQVcsQ0FDZk8sS0FBTXRHLEtBQUtzRyxLQUFLcUssR0FDaEJ1QyxRQUFTdUosTUFRTDFZLFNBQVcvRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxZQUN2QyxDQUFDLFNBQVUsYUFBYThGLFNBQVMzQixZQUNuQ2dDLFNBQVNDLFFBQVVFLFlBQVlzaUIscUJBQXFCLE9BR3REemlCLFNBQVNFLE9BQVEsRUFFakIsTUFBTW1vQixrQkFBb0Jsb0IsWUFBWWlOLE9BQU9wTixVQUU3QyxPQURBckQsS0FBS21jLFVBQVl1UCxZQUFZemQsR0FDdEJ5ZCxXQUNULENBRUEsc0JBQUlsSCxHQUNGLE9BQU9sbkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQ25DLENBRUEsVUFBSTZuQixHQUNGLE9BQUkva0IsS0FBS21pQyxjQUNBRSxnQkFBZ0J0VyxpQkFBaUIvckIsS0FBS21pQyxlQUV4QyxJQUNULENBRUEsZUFBSW5kLEdBQ0YsT0FBSWhsQixLQUFLK2tCLE9BQWV4VixXQUFXMEIsZ0JBQWdCalIsS0FBSytrQixPQUFPNVQsVUFDeEQsSUFDVCxDQUVBLGFBQUlvakIsR0FDRixPQUFJdjBCLEtBQUtraUMsaUJBQ0FJLG1CQUFtQnZXLGlCQUFpQi9yQixLQUFLa2lDLGtCQUUzQyxJQUNULENBRUEsa0JBQUlLLEdBQ0YsT0FBSXZpQyxLQUFLdTBCLFVBQ0FobEIsV0FBVzBCLGdCQUFnQmpSLEtBQUt1MEIsVUFBVXBqQixVQUU1QyxJQUNULENBRUEsYUFBTTZKLEdBQ0osR0FBSWhiLEtBQUsra0IsT0FDUCxPQUFRL2tCLEtBQUsra0IsT0FBTzVuQixRQUNsQixJQUFLLGFBQ0M2QyxLQUFLdTBCLFVBQVVwekIsS0FBSzBTLGFBQWUsR0FDckM3VCxLQUFLd2lDLGFBQWVsbEMsS0FBS0MsS0FBS3lXLE9BQU8sd0JBQXlCLENBQzVEMWQsS0FBTTBKLEtBQUt1MEIsVUFBVWorQixPQUV2QjBKLEtBQUs3QyxPQUFTLG9CQUNkNkMsS0FBSzY1QixZQUFhLElBRWxCNzVCLEtBQUt3aUMsYUFBZWxsQyxLQUFLQyxLQUFLeVcsT0FBTyx1QkFBd0IsQ0FDM0QxZCxLQUFNMEosS0FBS3UwQixVQUFVaitCLE9BRXZCMEosS0FBS3kyQixPQUFTejJCLEtBQUt1MEIsVUFDbkJ2MEIsS0FBSzY1QixZQUFhLEdBRXBCNzVCLEtBQUt5MkIsT0FBU3oyQixLQUFLdTBCLFVBQ25CdjBCLEtBQUt5aUMsVUFBWXppQyxLQUFLdTBCLFVBQVUzUCxPQUFPbGYsSUFDdkMxRixLQUFLMGlDLFlBQWMxaUMsS0FBS3UwQixVQUFVM1AsT0FBT3R1QixLQUN6QzBKLEtBQUsyMkIsT0FBUzMyQixLQUFLK2tCLE9BQ25CLE1BRUYsSUFBSyxRQUVEL2tCLEtBQUt1MEIsVUFBVXB6QixLQUFLMFMsY0FBZ0IsR0FDcEM3VCxLQUFLK2tCLE9BQU81akIsS0FBSzBTLGNBQWdCLEdBRWpDN1QsS0FBS3dpQyxhQUFlbGxDLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ3ZDd0MsS0FBS3kyQixPQUFTLEtBQ2R6MkIsS0FBSzY1QixZQUFhLEdBRWxCNzVCLEtBQUt1MEIsVUFBVXB6QixLQUFLMFMsYUFBZTdULEtBQUsra0IsT0FBTzVqQixLQUFLMFMsY0FFcEQ3VCxLQUFLd2lDLGFBQWVsbEMsS0FBS0MsS0FBS3lXLE9BQU8sd0JBQXlCLENBQzVEMWQsS0FBTTBKLEtBQUt1MEIsVUFBVWorQixPQUV2QjBKLEtBQUt5MkIsT0FBU3oyQixLQUFLdTBCLFVBQ25CdjBCLEtBQUt5aUMsVUFBWXppQyxLQUFLdTBCLFVBQVUzUCxPQUFPbGYsSUFDdkMxRixLQUFLMGlDLFlBQWMxaUMsS0FBS3UwQixVQUFVM1AsT0FBT3R1QixLQUN6QzBKLEtBQUsyMkIsT0FBUzMyQixLQUFLK2tCLE9BQ25CL2tCLEtBQUs3QyxPQUFTLG9CQUNkNkMsS0FBSzY1QixZQUFhLEdBRWxCNzVCLEtBQUt1MEIsVUFBVXB6QixLQUFLMFMsY0FBZ0I3VCxLQUFLK2tCLE9BQU81akIsS0FBSzBTLGVBRXJEN1QsS0FBS3dpQyxhQUFlbGxDLEtBQUtDLEtBQUt5VyxPQUFPLG9CQUFxQixDQUN4RDFkLEtBQU0wSixLQUFLK2tCLE9BQU96dUIsT0FFcEIwSixLQUFLeTJCLE9BQVN6MkIsS0FBSytrQixPQUNuQi9rQixLQUFLMjJCLE9BQVMzMkIsS0FBS3UwQixVQUNuQnYwQixLQUFLeWlDLFVBQVl6aUMsS0FBSytrQixPQUFPOWMsTUFBTXZDLElBQ25DMUYsS0FBSzBpQyxZQUFjMWlDLEtBQUsra0IsT0FBTzljLE1BQU0zUixLQUNyQzBKLEtBQUs3QyxPQUFTLFFBQ2Q2QyxLQUFLNjVCLFlBQWEsR0FHcEIsTUFFRixJQUFLLFlBRUQ3NUIsS0FBS3UwQixVQUFVcHpCLEtBQUswUyxjQUFnQixHQUNwQzdULEtBQUsra0IsT0FBTzVqQixLQUFLMFMsY0FBZ0IsR0FFakM3VCxLQUFLd2lDLGFBQWVsbEMsS0FBS0MsS0FBS0MsU0FBUyxpQkFDdkN3QyxLQUFLeTJCLE9BQVMsS0FDZHoyQixLQUFLNjVCLFlBQWEsR0FFbEI3NUIsS0FBS3UwQixVQUFVcHpCLEtBQUswUyxjQUFnQjdULEtBQUsra0IsT0FBTzVqQixLQUFLMFMsY0FFckQ3VCxLQUFLd2lDLGFBQWVsbEMsS0FBS0MsS0FBS3lXLE9BQU8sd0JBQXlCLENBQzVEMWQsS0FBTTBKLEtBQUt1MEIsVUFBVWorQixPQUV2QjBKLEtBQUt5MkIsT0FBU3oyQixLQUFLdTBCLFVBQ25CdjBCLEtBQUt5aUMsVUFBWXppQyxLQUFLdTBCLFVBQVUzUCxPQUFPbGYsSUFDdkMxRixLQUFLMGlDLFlBQWMxaUMsS0FBS3UwQixVQUFVM1AsT0FBT3R1QixLQUN6QzBKLEtBQUsyMkIsT0FBUzMyQixLQUFLK2tCLE9BQ25CL2tCLEtBQUs2NUIsWUFBYSxHQUVsQjc1QixLQUFLdTBCLFVBQVVwekIsS0FBSzBTLGNBQWdCN1QsS0FBSytrQixPQUFPNWpCLEtBQUswUyxlQUdyRDdULEtBQUt3aUMsYUFBZWxsQyxLQUFLQyxLQUFLeVcsT0FBTyx3QkFBeUIsQ0FDNUQxZCxLQUFNMEosS0FBSytrQixPQUFPenVCLE9BRXBCMEosS0FBS3kyQixPQUFTejJCLEtBQUsra0IsT0FDbkIva0IsS0FBS3lpQyxVQUFZemlDLEtBQUsra0IsT0FBT0gsT0FBT2xmLElBQ3BDMUYsS0FBSzBpQyxZQUFjMWlDLEtBQUsra0IsT0FBT0gsT0FBT3R1QixLQUN0QzBKLEtBQUsyMkIsT0FBUzMyQixLQUFLdTBCLFVBQ25CdjBCLEtBQUs2NUIsWUFBYSxHQUdwQixNQUVGLElBQUssV0FFRDc1QixLQUFLdTBCLFVBQVVwekIsS0FBSzBTLGNBQWdCLEdBQ3BDN1QsS0FBSytrQixPQUFPNWpCLEtBQUswUyxjQUFnQixHQUVqQzdULEtBQUt3aUMsYUFBZWxsQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUN2Q3dDLEtBQUt5MkIsT0FBUyxLQUNkejJCLEtBQUs2NUIsWUFBYSxHQUVsQjc1QixLQUFLdTBCLFVBQVVwekIsS0FBSzBTLGNBQWdCN1QsS0FBSytrQixPQUFPNWpCLEtBQUswUyxjQUVyRDdULEtBQUt3aUMsYUFBZWxsQyxLQUFLQyxLQUFLeVcsT0FBTyx3QkFBeUIsQ0FDNUQxZCxLQUFNMEosS0FBS3UwQixVQUFVaitCLE9BRXZCMEosS0FBS3kyQixPQUFTejJCLEtBQUt1MEIsVUFDbkJ2MEIsS0FBS3lpQyxVQUFZemlDLEtBQUt1MEIsVUFBVTNQLE9BQU9sZixJQUN2QzFGLEtBQUswaUMsWUFBYzFpQyxLQUFLdTBCLFVBQVUzUCxPQUFPdHVCLEtBQ3pDMEosS0FBSzIyQixPQUFTMzJCLEtBQUsra0IsT0FDbkIva0IsS0FBSzY1QixZQUFhLEdBRWxCNzVCLEtBQUt1MEIsVUFBVXB6QixLQUFLMFMsY0FBZ0I3VCxLQUFLK2tCLE9BQU81akIsS0FBSzBTLGVBRXJEN1QsS0FBS3dpQyxhQUFlbGxDLEtBQUtDLEtBQUt5VyxPQUFPLHVCQUF3QixDQUMzRDFkLEtBQU0wSixLQUFLK2tCLE9BQU96dUIsT0FFcEIwSixLQUFLeTJCLE9BQVN6MkIsS0FBSytrQixPQUNuQi9rQixLQUFLeWlDLFVBQVl6aUMsS0FBSytrQixPQUFPOWMsTUFBTTNDLEtBQUtJLElBQ3hDMUYsS0FBSzBpQyxZQUFjMWlDLEtBQUsra0IsT0FBTzljLE1BQU0zUixLQUNyQzBKLEtBQUsyMkIsT0FBUzMyQixLQUFLdTBCLFVBQ25CdjBCLEtBQUs2NUIsWUFBYSxRQVFmNzVCLEtBQUt1MEIsVUFBVXB6QixLQUFLMFMsYUFBZSxHQUM1QzdULEtBQUt3aUMsYUFBZWxsQyxLQUFLQyxLQUFLeVcsT0FBTyx3QkFBeUIsQ0FDNUQxZCxLQUFNMEosS0FBS3UwQixVQUFVaitCLE9BRXZCMEosS0FBS3kyQixPQUFTejJCLEtBQUt1MEIsVUFDbkJ2MEIsS0FBSzY1QixZQUFhLElBRWxCNzVCLEtBQUt3aUMsYUFBZWxsQyxLQUFLQyxLQUFLeVcsT0FBTyx1QkFBd0IsQ0FDM0QxZCxLQUFNMEosS0FBS3UwQixVQUFVaitCLE9BRXZCMEosS0FBS3kyQixPQUFTejJCLEtBQUt1MEIsVUFDbkJ2MEIsS0FBSzY1QixZQUFhLEdBR2hCNzVCLEtBQUt5MkIsU0FDSHoyQixLQUFLeTJCLE9BQU90MUIsS0FBSzBTLGNBQWdCQyxVQUFVRCxhQUFhM0osUUFDMURsSyxLQUFLeTJCLE9BQU90MUIsS0FBS3doQyxnQkFBaUIsRUFFbEMzaUMsS0FBS3kyQixPQUFPdDFCLEtBQUt3aEMsZ0JBQWlCLEdBSXRDM2lDLEtBQUswN0IsVUFBVyxFQUNoQixNQUFNM2hCLFdBQWF3RyxlQUFldmdCLEtBQUswWixTQUFVMVosTUFDakQsR0FBSUEsS0FBS21jLFVBQVcsQ0FDbEIsTUFBTXRNLFFBQVV2UyxLQUFLOGUsU0FBU2xmLElBQUk4QyxLQUFLbWMsV0FDakMwSixZQUFjLENBQUMsRUFDakI3bEIsS0FBS3kyQixTQUNIejJCLEtBQUt5MkIsT0FBT3psQixRQUFPNlUsWUFBWTdVLE1BQVFoUixLQUFLeTJCLE9BQU96bEIsTUFBTTR4QixXQUN6RDVpQyxLQUFLeTJCLE9BQU92OEIsUUFBTzJyQixZQUFZM3JCLE1BQVE4RixLQUFLeTJCLE9BQU92OEIsUUFFekQsTUFBTThWLFFBQVVoUSxLQUFLeTJCLE9BQVNqekIsWUFBWXlNLFdBQVc0VixhQUFlLEtBQzlEamlCLEtBQ0o1RCxLQUFLeTJCLFFBQVV6MkIsS0FBS3kyQixPQUFPdjhCLE1BQU0wSixLQUM3QjVELEtBQUt5MkIsT0FBT3Y4QixNQUFNMEosS0FDbEJ0RyxLQUFLc0csS0FFWCxJQUFJOE0sSUFDSixPQUFLYixTQU1IYSxJQURFVixjQUNVSCxRQUFRM1IsT0FBTyxDQUV6QjBGLEtBQU1BLEtBQUtxSyxHQUNYK0IsUUFDQVEsUUFBU3VKLGFBR0NsSyxRQUFRM1IsT0FBTyxDQUN6QjBGLEtBQU1BLEtBQUtxSyxHQUNYdUMsUUFBU3VKLGFBR1BoUixHQUFHNGlCLEtBQUtDLGNBQWNsYixLQUFLLEdBQzFCQSxVQWpCTDNILEdBQUdDLGNBQWNzSyxLQUFLLHlDQWtCMUIsQ0FDRixDQUVBLFlBQUlvRyxHQUNGLE1BQU8sMERBQ1QsRUN2UUssTUFBTTJvQix3QkFBd0IvZCxjQUNuQyxXQUFBamYsQ0FBYThMLFNBQVUweEIsZ0JBQWtCLEtBQU10ZSxhQUFjLEdBQzNEbG9CLE1BQU04VSxTQUFVb1QsYUFDaEJ2a0IsS0FBS21SLFNBQVdBLFNBQ2hCblIsS0FBSzhpQyxhQUFlLEtBQ3BCOWlDLEtBQUs2aUMsZ0JBQWtCQSxnQkFDdkI3aUMsS0FBS3VrQixZQUFjQSxZQUNuQnZrQixLQUFLMDdCLFVBQVcsRUFFaEIxN0IsS0FBSytpQyxhQUFjLEVBQ25CL2lDLEtBQUtnakMsV0FBWSxFQUNqQmhqQyxLQUFLaWpDLGFBQWMsRUFDbkJqakMsS0FBS2tqQyxXQUFZLEVBQ2pCbGpDLEtBQUttakMsY0FBZSxFQUVwQm5qQyxLQUFLbWMsVUFBWSxLQUNqQm5jLEtBQUtzVSxRQUFVLEtBQ2Z0VSxLQUFLcVUsT0FBUyxLQUNkclUsS0FBS29qQyxTQUFVLEVBQ2ZwakMsS0FBS3FqQyxlQUFnQixFQUNyQnJqQyxLQUFLc2pDLGNBQWUsRUFDcEJ0akMsS0FBS3VqQyxhQUFjLENBQ3JCLENBRUEsa0JBQUlDLEdBQ0YsT0FDRXhqQyxLQUFLb2pDLFNBQ0xwakMsS0FBS3FqQyxlQUNMcmpDLEtBQUtzakMsY0FDTHRqQyxLQUFLdWpDLFdBRVQsQ0FFQSxVQUFJcG1DLEdBQ0YsT0FBSTZDLEtBQUtvakMsUUFBZ0IsUUFDckJwakMsS0FBS3FqQyxjQUFzQixhQUMzQnJqQyxLQUFLc2pDLGFBQXFCLFlBQzFCdGpDLEtBQUt1akMsWUFBb0IsV0FDdEIsSUFDVCxDQUVBLFVBQUkzZSxHQUNGLE9BQU81a0IsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSThDLEtBQUtxVSxPQUNuQyxDQUVBLFNBQUlwTSxHQUNGLE9BQU9qSSxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJOEMsS0FBS3NVLFFBQ25DLENBRUEsZ0JBQUl3dUIsQ0FBY2wzQixHQUNoQjVMLEtBQUt5akMsY0FBZ0I3M0IsRUFDckI1TCxLQUFLc2xCLFVBQVkxWixDQUNuQixDQUVBLGdCQUFJazNCLEdBU0YsT0FSSzlpQyxLQUFLeWpDLGlCQUNIempDLEtBQUswakMsWUFBYzFqQyxLQUFLNmlDLGtCQUMzQjdpQyxLQUFLMGpDLFdBQWFwQixtQkFBbUJ2VyxpQkFDbkMvckIsS0FBSzZpQyxrQkFHTDdpQyxLQUFLMGpDLGFBQVkxakMsS0FBS3lqQyxjQUFnQnpqQyxLQUFLMGpDLFdBQVd2eUIsV0FFdkRuUixLQUFLeWpDLGNBTUh6akMsS0FBS3lqQyxlQUxWMTZCLEdBQUdDLGNBQWN3VSxNQUNmLG1DQUFtQ3hkLEtBQUs5RixNQUFNNUQsUUFFekMsS0FHWCxDQUVBLGFBQUlpK0IsR0FDRixJQUFLdjBCLEtBQUs4aUMsYUFBYyxDQUN0QixJQUFJOWlDLEtBQUs2aUMsZ0JBS0YsT0FBTyxLQUpaN2lDLEtBQUswakMsV0FBYXBCLG1CQUFtQnZXLGlCQUNuQy9yQixLQUFLNmlDLGlCQUVQN2lDLEtBQUs4aUMsYUFBZTlpQyxLQUFLMGpDLFdBQVd2eUIsUUFFeEMsQ0FDQSxPQUFPNUIsV0FBV3FCLGdCQUFnQjVRLEtBQUs4aUMsYUFDekMsQ0FFQSxrQkFBSWEsR0FNRixPQUxLM2pDLEtBQUswakMsYUFDUjFqQyxLQUFLMGpDLFdBQWFwQixtQkFBbUJ2VyxpQkFDbkMvckIsS0FBSzZpQyxrQkFHRjdpQyxLQUFLMGpDLFVBQ2QsQ0FFQSxZQUFJaHFCLEdBQ0YsTUFBTyxzREFDVCxDQUVBLHVCQUFPcVMsQ0FBa0I1UCxXQUN2QixNQUFNdE0sUUFBVXZTLEtBQUs4ZSxTQUFTbGYsSUFBSWlmLFdBQ2xDLElBQUt0TSxRQUFTLE9BQU8sS0FDckIsTUFBTXhELEtBQU9tZixFQUFFM2IsUUFBUVcsU0FBUyxHQUUxQnVVLE9BQVNzZCxnQkFBZ0I1dUIsWUFBWXBILEtBQU04UCxXQUdqRCxPQUZBNEksT0FBTzVJLFVBQVlBLFVBRVo0SSxNQUNULENBRUEsdUJBQU82ZSxDQUFrQnJuQyxNQUFPc25DLGVBQWdCLEdBQzlDLE1BQU14M0IsS0FBTzlQLE1BQU1JLGNBQWNFLFFBQVEsaUJBQ25DbzRCLEtBQU8xNEIsTUFBTUksY0FBY0ksUUFBUWs0QixLQUNuQzZPLFVBQVl2MEIsV0FBV0Msa0JBQWtCeWxCLE1BRy9DLEdBQUs0TyxjQUlFLENBRUwsTUFBTTllLE9BQVNzZCxnQkFBZ0I1dUIsWUFBWXBILE1BQzNDMFksT0FBT3FRLFdBQVdILE1BQ2xCbFEsT0FBT2tHLGdCQUNULE1BUkU1ZSxLQUFLdFAsUUFBUSttQyxXQUF5QyxTQUE1QnozQixLQUFLdFAsUUFBUSttQyxXQUN2Q3ZuQyxNQUFNSSxjQUFjb1MsVUFBVTBMLE9BQU8sZUFDckNsZSxNQUFNSSxjQUFjSSxRQUFRc1ksU0FBV2hKLEtBQUt0UCxRQUFRK21DLFVBT3hELENBRUEsVUFBQTFPLENBQVl4c0IsVUFDVixNQUFNcXNCLEtBQU9yc0IsU0FBUzVGLFNBQVMsS0FDM0J1TSxXQUFXQyxrQkFBa0I1RyxVQUM3QkEsU0FDSjVJLEtBQUtpMUIsT0FBU2oxQixLQUFLaTFCLEtBQ3JCLENBRUEsb0JBQU04TyxHQUNKLE1BQU1ocUIsV0FBYXdHLGVBQWV2Z0IsS0FBSzBaLFNBQVUxWixNQUUzQzZsQixZQUFjLENBQUMsRUFDZjdVLE1BQVF6QixXQUFXMEIsZ0JBQWdCalIsS0FBS21SLFVBQzFDSCxNQUFPNlUsWUFBWTdVLE1BQVFBLE1BQU1uQyxTQUNoQ2dYLFlBQVkzckIsTUFBUThGLEtBQUs5RixNQUU5QixNQUFNOFYsUUFBVXhNLFlBQVl5TSxXQUFXNFYsYUFDbkM3bEIsS0FBSzlGLE1BQU15YyxVQUFTM0csUUFBUW9CLE1BQVFwUixLQUFLOUYsTUFBTThXLE1BQU0xYSxNQUV6RCxJQUFJc04sS0FBT3RHLEtBQUtzRyxLQUNoQixRQUErQixJQUFwQjVELEtBQUs5RixNQUFNMEosS0FBc0IsQ0FDMUMsSUFBSXVyQixPQUFTLEdBQ2IsTUFBTTZVLElBQU0xbUMsS0FBSzhrQixNQUFNN3JCLFFBQU9tRyxHQUFLQSxFQUFFNkwsT0FBTXZFLEtBQUl0SCxHQUFLQSxFQUFFdVIsS0FDdEQsSUFBSyxNQUFPZ0IsRUFBR3RQLEtBQU1DLE9BQU93SyxRQUFRcEssS0FBSzlGLE1BQU1raEIsV0FDN0MsR0FBSXpiLElBQU11USxNQUFNb0wsMEJBQTBCQyxNQUFPLENBQy9DLEdBQVUsWUFBTnRNLEVBQWlCLENBQ25Ca2dCLE9BQVM3eEIsS0FBSzhrQixNQUFNcGUsS0FBSXRILEdBQUtBLEVBQUV1UixLQUMvQixLQUNGLENBQVkrMUIsSUFBSWhoQyxTQUFTaU0sSUFDdkJrZ0IsT0FBTy8zQixLQUFLNlgsRUFFaEIsQ0FFRixJQUFJdUIsUUFBVSxHQUNkLE9BQVEyZSxPQUFPdnVCLFFBQ2IsS0FBSyxFQUVILE1BQ0YsS0FBSyxPQUNzQyxJQUE5QnRELEtBQUs4a0IsTUFBTWxsQixJQUFJaXlCLE9BQU8sTUFDL0J2ckIsS0FBT3RHLEtBQUs4a0IsTUFBTWxsQixJQUFJaXlCLE9BQU8sS0FFL0IsTUFDRixRQUNFM2UsUUFDRSxNQUFRbFQsS0FBS0MsS0FBS0MsU0FBUyx5Q0FDN0JnVCxTQUFvQiw2Q0FDcEIsSUFBSyxNQUFNdkIsS0FBS2tnQixPQUFRLENBQ3RCLE1BQU12ckIsS0FBT3RHLEtBQUs4a0IsTUFBTWxsQixJQUFJK1IsR0FDeEJyTCxPQUNGNE0sUUFDRUEsUUFDQSxrQkFDQXZCLEVBQ0EsS0FDQXJMLEtBQUt0TixLQUNMLFlBRU4sQ0FDQWthLFNBQW9CLDZCQUNkMGpCLE9BQU8rUCxPQUFPLENBQ2xCeDFCLE1BQU9uUixLQUFLQyxLQUFLQyxTQUNmLDhDQUVGZ1QsUUFDQTRqQixTQUFVcmEsT0FDUixNQUFNcVksU0FBVyxJQUFJaUMsU0FDbkJ0YSxLQUFLLEdBQUdwRyxjQUFjLGdCQUV4QixJQUFLLE1BQU9yZCxLQUFNRixTQUFVZzhCLFNBQ2IsU0FBVDk3QixPQUNGc04sS0FBT3RHLEtBQUs4a0IsTUFBTWxsQixJQUFJOUcsT0FFMUIsSUFJVixXQUFzQyxJQUFwQjRKLEtBQUs5RixNQUFNMEosT0FDM0JBLEtBQU81RCxLQUFLOUYsTUFBTTBKLE1BR3BCLE1BQU1QLFNBQVcsQ0FDZk8sS0FBTUEsS0FBS3FLLEdBQ1grQixRQUNBUSxRQUFTdUosTUFHUCxDQUFDLFNBQVUsYUFBYS9XLFNBQVNoRCxLQUFLcUIsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZc2lCLHFCQUFxQixPQUd0RHppQixTQUFTRSxPQUFRLEVBRWpCLE1BQU1zTSxjQUFnQnJNLFlBQVlpTixPQUFPcE4sVUFHekMsT0FEQXJELEtBQUttYyxVQUFZdE0sUUFBUTVCLEdBQ2xCNEIsT0FDVCxDQUVBLG9CQUFNb2IsR0FDSixNQUFNcGIsUUFBVXZTLEtBQUs4ZSxTQUFTbGYsSUFBSThDLEtBQUttYyxXQUN2QyxJQUFLN2UsS0FBS3NHLEtBQUsyRSxNQUFRc0gsUUFBUWpNLEtBQUtxSyxLQUFPM1EsS0FBS3NHLEtBQUtxSyxHQUluRCxZQUhBbEYsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLQyxTQUFTLHNDQUl2QixNQUFNdWMsV0FBYXdHLGVBQWV2Z0IsS0FBSzBaLFNBQVUxWixNQUUzQzBRLFVBQVliLFFBQVEzUixPQUFPLENBQUVzUyxRQUFTdUosT0FFNUMsYUFETWhSLEdBQUc0aUIsS0FBS0MsY0FBY2xiLEtBQUssR0FDMUJBLEdBQ1QsQ0FFQSx3QkFBTXd6QixHQUNKM2pCLGVBQWV2Z0IsS0FBSzBaLFNBQVUxWixNQUFNcUgsTUFBSzBTLE1BQ2hDQSxNQUVYLENBRUEsMkJBQWFvcUIsQ0FBZ0I5M0IsS0FBTTlQLE9BQ2pDLE1BQU13b0IsT0FBU3NkLGdCQUFnQjV1QixZQUFZcEgsTUFFM0MsT0FBUTlQLE1BQU1JLGNBQWNJLFFBQVFJLFFBQ2xDLElBQUssUUFDSDRuQixPQUFPcWUsU0FBVSxFQUNqQnJlLE9BQU9zZSxlQUFnQixFQUN2QnRlLE9BQU91ZSxjQUFlLEVBQ3RCdmUsT0FBT3dlLGFBQWMsRUFDckJ4ZSxPQUFPelEsUUFBVS9YLE1BQU1JLGNBQWNJLFFBQVF1WCxRQUM3Q3lRLE9BQU8xUSxPQUFTLEtBQ2hCLE1BRUYsSUFBSyxhQUNIMFEsT0FBT3FlLFNBQVUsRUFDakJyZSxPQUFPc2UsZUFBZ0IsRUFDdkJ0ZSxPQUFPdWUsY0FBZSxFQUN0QnZlLE9BQU93ZSxhQUFjLEVBQ3JCeGUsT0FBT3pRLFFBQVUsS0FDakJ5USxPQUFPMVEsT0FBUyxLQUNoQixNQUVGLElBQUssWUFDSDBRLE9BQU9xZSxTQUFVLEVBQ2pCcmUsT0FBT3NlLGVBQWdCLEVBQ3ZCdGUsT0FBT3VlLGNBQWUsRUFDdEJ2ZSxPQUFPd2UsYUFBYyxFQUNyQnhlLE9BQU96USxRQUFVL1gsTUFBTUksY0FBY0ksUUFBUXVYLFFBQzdDeVEsT0FBTzFRLE9BQVM5WCxNQUFNSSxjQUFjSSxRQUFRcW5DLFNBQzVDLE1BRUYsSUFBSyxXQUNIcmYsT0FBT3FlLFNBQVUsRUFDakJyZSxPQUFPc2UsZUFBZ0IsRUFDdkJ0ZSxPQUFPdWUsY0FBZSxFQUN0QnZlLE9BQU93ZSxhQUFjLEVBQ3JCeGUsT0FBT3pRLFFBQVUvWCxNQUFNSSxjQUFjSSxRQUFRdVgsUUFDN0N5USxPQUFPMVEsT0FBUyxLQVNwQixPQUZBMFEsT0FBT2tHLGlCQUVBbEcsTUFDVCxDQUVBLHVCQUFNc2YsQ0FBbUIvdkIsUUFBVSxLQUFNZ3dCLFNBQVUsR0FDakQsTUFBTXR1QixNQUFRLElBQUlsQyxVQXVCbEIsT0FyQkFrQyxNQUFNeU8sU0FBVSxFQUNoQnpPLE1BQU11dUIsV0FBWSxFQUNsQnZ1QixNQUFNSSxtQkFBcUJwVyxLQUFLbWMsVUFDaENuRyxNQUFNQyxTQUFXLFVBQ2pCRCxNQUFNRSxLQUFPLFNBQ2JGLE1BQU03WSxPQUFTNkMsS0FBSzdDLE9BQ3BCNlksTUFBTTliLE1BQVE4RixLQUFLOUYsTUFDbkI4YixNQUFNL1AsS0FBT2pHLEtBQUtxVSxPQUNsQjJCLE1BQU0vTixNQUFRcU0sUUFDZDBCLE1BQU1LLFdBQWF2QyxVQUFVc1AsZ0JBQWdCclAsUUFDN0NpQyxNQUFNakIsYUFBZSxFQUVqQi9VLEtBQUttakMsZUFBY250QixNQUFNakIsY0FBZ0IsR0FDekMvVSxLQUFLa2pDLFlBQVdsdEIsTUFBTWpCLGNBQWdCLFNBRXBDaUIsTUFBTTdVLE9BQ1puQixLQUFLZ1csTUFBUUEsTUFDYmhXLEtBQUs2MEIsUUFBUyxFQUNkNzBCLEtBQUswN0IsVUFBVyxFQUNaNEksU0FBU3R1QixNQUFNNGYsWUFFWjVmLEtBQ1QsQ0FFQSw0QkFBTXd1QixHQUNKeGtDLEtBQUs2MEIsUUFBUyxFQUNkNzBCLEtBQUswN0IsVUFBVyxFQUNoQjE3QixLQUFLcWpDLGVBQWdCLEVBQ3JCLE1BQU1vQixlQUFpQixJQUFJeEMsbUJBQ3pCamlDLEtBQUs2aUMsZ0JBQ0w3aUMsS0FBS21jLFdBR0R1b0Isd0JBQTBCRCxlQUFlckMsbUJBRS9DcGlDLEtBQUt5a0MsZUFBaUJDLGtCQUFrQnoyQixTQUNsQ2pPLEtBQUtpckIsZ0JBQ2IsQ0FFQSx3QkFBTTBaLENBQW9CM3VCLE1BQVEsTUFDaEMsSUFBS0EsUUFBVWhXLEtBQUtnVyxNQUFPLE9BQU8sS0FPbEMsR0FMSUEsUUFBT2hXLEtBQUtnVyxNQUFRQSxPQUN4QmhXLEtBQUttQixLQUFPcVMsU0FBU3VDLGFBQWEvVixLQUFLZ1csT0FDdkNoVyxLQUFLNjBCLFFBQVMsRUFFZDcwQixLQUFLbUIsS0FBS3lqQyxVQUFZLEdBQ2xCNWtDLEtBQUttQixLQUFLK1MsU0FBVSxDQUN0QmxVLEtBQUttQixLQUFLMGpDLFVBQVksWUFDdEI3a0MsS0FBS21CLEtBQUsyakMsVUFBWXhuQyxLQUFLQyxLQUFLQyxTQUFTLHdCQUN6QyxJQUFLLElBQUkyZixNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0JuZCxLQUFLbUIsS0FBS3lqQyxVQUFVeHRDLEtBQUssUUFFN0IsTUFBTyxHQUFJNEksS0FBS21CLEtBQUtnVCxPQUFRLENBQzNCblUsS0FBS21CLEtBQUswakMsVUFBWSxVQUN0QjdrQyxLQUFLbUIsS0FBSzJqQyxVQUFZeG5DLEtBQUtDLEtBQUtDLFNBQVMsZUFDekMsSUFBSyxJQUFJMmYsTUFBUSxFQUFHQSxNQUFRLEVBQUdBLFFBQzdCbmQsS0FBS21CLEtBQUt5akMsVUFBVXh0QyxLQUFLLFNBRTdCLE1BQU8sR0FBSTRJLEtBQUttQixLQUFLKzFCLFFBQVMsQ0FDNUJsM0IsS0FBS21CLEtBQUswakMsVUFBWSxZQUNsQi93QixVQUFVRCxhQUFhRSxVQUFZL1QsS0FBS21CLEtBQUswUyxlQUMvQzdULEtBQUttQixLQUFLMmpDLFVBQVl4bkMsS0FBS0MsS0FBS0MsU0FBUyx3QkFFdkNzVyxVQUFVRCxhQUFhSSxPQUFTalUsS0FBS21CLEtBQUswUyxlQUM1QzdULEtBQUttQixLQUFLMmpDLFVBQVl4bkMsS0FBS0MsS0FBS0MsU0FBUyxxQkFFdkNzVyxVQUFVRCxhQUFhM0osVUFBWWxLLEtBQUttQixLQUFLMFMsZUFDL0M3VCxLQUFLbUIsS0FBSzJqQyxVQUFZeG5DLEtBQUtDLEtBQUtDLFNBQVMsd0JBRTNDLElBQUssSUFBSTJmLE1BQVEsRUFBR0EsTUFBUW5kLEtBQUttQixLQUFLMFMsYUFBY3NKLFFBQ2xEbmQsS0FBS21CLEtBQUt5akMsVUFBVXh0QyxLQUFLLE9BRTdCLE1BQ0U0SSxLQUFLbUIsS0FBSzBqQyxVQUFZLFFBQ3RCN2tDLEtBQUttQixLQUFLMmpDLFVBQVl4bkMsS0FBS0MsS0FBS0MsU0FBUyxnQkFDekN3QyxLQUFLbUIsS0FBS3lqQyxVQUFVeHRDLEtBQUssU0FHM0IsTUFBTXF0QyxlQUFpQixJQUFJeEMsbUJBQ3pCamlDLEtBQUs2aUMsZ0JBQ0w3aUMsS0FBS21jLFdBRUR1b0Isd0JBQTBCRCxlQUFlckMsbUJBRS9DcGlDLEtBQUt5a0MsZUFBaUJDLGtCQUFrQnoyQixTQUNsQ2pPLEtBQUtpckIsZ0JBQ2IsQ0FFQSxrQkFBT3hYLENBQWFwSCxLQUFNOFAsVUFBWSxNQUNwQyxNQUFNaEwsU0FBVzlFLEtBQUt0UCxRQUFRb1UsU0FDeEIweEIsZ0JBQWtCeDJCLEtBQUt0UCxRQUFROGxDLGdCQUMvQnRlLFlBQTJDLFNBQTdCbFksS0FBS3RQLFFBQVF3bkIsWUFDM0JRLE9BQVMsSUFBSXNkLGdCQUFnQmx4QixTQUFVMHhCLGdCQUFpQnRlLGFBUTlELE9BTkFRLE9BQU81akIsS0FBT3FTLFNBQVNDLFlBQVlwSCxNQUNuQ2tELFdBQVdtQyxxQkFBcUJxVCxPQUFRMVksTUFFcENBLEtBQUt4UCxRQUFRLFlBQ2Zrb0IsT0FBTzVJLFVBQVk5UCxLQUFLeFAsUUFBUSxZQUFZRSxRQUFRb2YsVUFDL0M0SSxPQUFPNUksVUFBWUEsVUFDbkI0SSxNQUNULENBRUEsV0FBQWdnQixDQUFhN25CLFdBQVk4bkIsZ0JBQWlCQyxTQUVuQ2psQyxLQUFLOUYsTUFBTXFqQixVQUFVTCxhQUN4Qm5VLEdBQUdDLGNBQWN3VSxNQUNmLEdBQUd4ZCxLQUFLOUYsTUFBTTVELGtEQUdsQjBKLEtBQUttQixLQUFLL0ssTUFBUSxLQUNsQjRKLEtBQUttQixLQUFLMFMsYUFBZW14QixnQkFDekJobEMsS0FBS21CLEtBQUsrakMsV0FBWSxFQUN0QkQsUUFBUWxvQyxRQUFRb29DLFdBQVksRUFFNUIsTUFBTUMsVUFBWUgsUUFBUXR4QixjQUFjLGNBQ3hDeXhCLFVBQVVyb0MsUUFBUTNHLE1BQVEsS0FDMUJndkMsVUFBVXJvQyxRQUFROFcsYUFBZW14QixnQkFDakNJLFVBQVVyb0MsUUFBUW1vQyxXQUFZLEVBRTlCLE1BQU1HLGFBQWVKLFFBQVF0eEIsY0FBYyxtQkFDckMyeEIsVUFBWUwsUUFBUXR4QixjQUFjLGVBQ3hDLE9BQVFxeEIsaUJBQ04sS0FBS2x4QixVQUFVRCxhQUFhRSxRQUMxQnV4QixVQUFVMVgsVUFBWXR3QixLQUFLQyxLQUFLQyxTQUFTLHVCQUN6QzZuQyxhQUFhelgsVUFBWXR3QixLQUFLQyxLQUFLeVcsT0FDakMsZ0NBQ0EsQ0FDRWtKLFdBQ0FySixhQUFjdlcsS0FBS0MsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLc1csVUFBVUQsYUFBYUksS0FDMUJxeEIsVUFBVTFYLFVBQVl0d0IsS0FBS0MsS0FBS0MsU0FBUyxvQkFDekM2bkMsYUFBYXpYLFVBQVl0d0IsS0FBS0MsS0FBS3lXLE9BQ2pDLGdDQUNBLENBQ0VrSixXQUNBckosYUFBY3ZXLEtBQUtDLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS3NXLFVBQVVELGFBQWEzSixRQUMxQm83QixVQUFVMVgsVUFBWXR3QixLQUFLQyxLQUFLQyxTQUFTLHVCQUN6QzZuQyxhQUFhelgsVUFBWXR3QixLQUFLQyxLQUFLeVcsT0FDakMsZ0NBQ0EsQ0FDRWtKLFdBQ0FySixhQUFjdlcsS0FBS0MsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLc1csVUFBVUQsYUFBYUssU0FDMUJveEIsVUFBVTFYLFVBQVl0d0IsS0FBS0MsS0FBS0MsU0FBUyx3QkFDekM2bkMsYUFBYXpYLFVBQVl0d0IsS0FBS0MsS0FBS3lXLE9BQ2pDLGdDQUNBLENBQ0VrSixXQUNBckosYUFBY3ZXLEtBQUtDLEtBQUtDLFNBQVMsNkJBU3pDOG5DLFVBQVV2MkIsVUFBVVcsUUFBUSxVQUFXLFdBQ3ZDdTFCLFFBQVF0eEIsY0FBYyxpQkFBaUJtUCxTQUN2Q21pQixRQUFRdHhCLGNBQWMsaUJBQWlCNHJCLE1BQU1DLFFBQVUsT0FDdkQrRixTQUFTdGEsZUFBZWdhLFFBQzFCLEVDNWRLLE1BQU1PLG1CQUNYLFdBQUFuZ0MsQ0FBYThMLFNBQVcsS0FBTWtELE9BQVMsS0FBTWtRLGFBQWMsR0FDekR2a0IsS0FBS21SLFNBQVdBLFNBQ2hCblIsS0FBS3FVLE9BQVNBLE9BQ2RyVSxLQUFLdWtCLFlBQWNBLFlBQ25CdmtCLEtBQUswN0IsVUFBVyxFQUNoQjE3QixLQUFLeWxDLE9BQVEsRUFDYnpsQyxLQUFLZ2pDLFdBQVksRUFDakJoakMsS0FBS2lqQyxhQUFjLEVBQ25CampDLEtBQUtrakMsV0FBWSxFQUNqQmxqQyxLQUFLbWpDLGNBQWUsRUFDcEJuakMsS0FBS21jLFVBQVksS0FDakJuYyxLQUFLMGxDLFdBQWEsS0FDbEIxbEMsS0FBSzYwQixRQUFTLEVBQ2Q3MEIsS0FBS3dKLFlBQWEsRUFDbEJ4SixLQUFLNEosZUFBZ0IsRUFDckI1SixLQUFLMkosT0FBUSxFQUNiM0osS0FBSzJsQyxVQUFXLEVBQ2hCM2xDLEtBQUtzTSxTQUFXLEtBQ2hCdE0sS0FBSzRsQyxPQUFRLEVBQ2I1bEMsS0FBSzZsQyxrQkFBb0IsRUFDekI3bEMsS0FBSzhsQyxTQUFXLEdBQ2hCLElBQUssTUFBTS9pQyxJQUFLLElBQUl6RixLQUFLc0csS0FBS2toQixTQUFVLENBQ3RDLE1BQU1DLE9BQVMsSUFBSWdoQixnQkFBZ0IsR0FBR2hqQyxFQUFFNkosTUFBTXFCLE1BQU1sTCxFQUFFa0wsTUFDdEQ4VyxPQUFPL1QsTUFBUWpPLEVBQ2YvQyxLQUFLOGxDLFNBQVMxdUMsS0FBSzJ0QixPQUNyQixDQUNBLEdBQUkva0IsS0FBSzhsQyxTQUFTbGxDLE9BQVFaLEtBQUs4bEMsU0FBUyxHQUFHL2tDLFFBQVMsTUFDL0MsQ0FDSCxNQUFNZ2tCLE9BQVMsSUFBSWdoQixnQkFDbkJoaEIsT0FBT2hrQixRQUFTLEVBQ2hCZixLQUFLOGxDLFNBQVMxdUMsS0FBSzJ0QixPQUNyQixDQUNBLEdBQUk1VCxTQUFVLENBQ1osTUFBTWpYLE1BQVFxVixXQUFXcUIsZ0JBQWdCTyxVQUd6QyxHQUZBblIsS0FBS2dSLE1BQVF6QixXQUFXMEIsZ0JBQWdCRSxVQUNwQ25SLEtBQUtnUixRQUFPaFIsS0FBS3NNLFNBQVdwUyxNQUFNb1MsVUFDbEMrSCxPQUFRLENBQ0tuYSxNQUFNZ1UsTUFBTWhSLElBQUltWCxVQUV6QnJVLEtBQUs0a0IsT0FBT3BiLFdBQVl4SixLQUFLd0osWUFBYSxFQUNyQ3hKLEtBQUs0a0IsT0FBTzdvQixPQUFPOEssV0FBV3pPLE9BQU00SCxLQUFLMmxDLFVBQVcsR0FFakUsQ0FDRixDQUNBLEdBQUkzbEMsS0FBS3NNLFNBQ1AsSUFBSyxNQUFNdkosS0FBSy9DLEtBQUs4bEMsU0FDbkIsR0FBSS9pQyxFQUFFaU8sT0FBU2hSLEtBQUtnUixNQUFPLENBQ3pCak8sRUFBRTJQLFNBQVduRCxXQUFXK0MsWUFBWXZQLEVBQUVpTyxNQUFPaFIsS0FBS2dSLE9BQ2xEak8sRUFBRWlqQyxnQkFBa0I1akMsS0FBSzZqQyxNQUF5QixJQUFuQmxqQyxFQUFFMlAsU0FBU3RjLE9BQWUsSUFDekQyTSxFQUFFbWpDLGFBQWVuakMsRUFBRTJQLFNBQVNsUSxLQUM1QixNQUFNMmpDLFNBQ0ovakMsS0FBSzZqQyxNQUF1QyxJQUFqQzEyQixXQUFXZ0UsUUFBUXhRLEVBQUUyUCxXQUFtQixJQUVyRCxHQUFJMVMsS0FBSzlGLE1BQU8sQ0FDZDZJLEVBQUVxakMsaUJBQWtCLEVBR2hCRCxVQURGbm1DLEtBQUs5RixNQUFNNkIsT0FBTzJuQixnQkFBZ0Ivc0IsSUFBSVAsTUFBUSxLQUNuQjJNLEVBQUVxakMsaUJBQWtCLEVBQ25ELENBQ0lwbUMsS0FBSzRrQixRQUNINWtCLEtBQUs0a0IsT0FBTy9hLFlBQ2Q5RyxFQUFFOEcsV0FBWSxFQUNkOUcsRUFBRWdILFdBQVksRUFDZGhILEVBQUVrSCxjQUFlLEVBQ2pCbEgsRUFBRXNqQyxZQUFhLEVBQ1hybUMsS0FBSzRrQixPQUFPN29CLE9BQU84SyxXQUFXN08sU0FDNUJtdUMsVUFBWW5tQyxLQUFLNGtCLE9BQU8vYSxZQUFXOUcsRUFBRThHLFdBQVksR0FFbkRzOEIsU0FBV25tQyxLQUFLNGtCLE9BQU8vYSxXQUN2QnM4QixVQUFZbm1DLEtBQUs0a0IsT0FBTzdhLFlBRXhCaEgsRUFBRWdILFdBQVksR0FHZG84QixTQUFXbm1DLEtBQUs0a0IsT0FBTzdhLFdBQ3ZCbzhCLFVBQVlubUMsS0FBSzRrQixPQUFPM2EsZUFFeEJsSCxFQUFFa0gsY0FBZSxHQUVmazhCLFNBQVdubUMsS0FBSzRrQixPQUFPM2EsZUFBY2xILEVBQUVzakMsWUFBYSxLQUVwREYsVUFBWW5tQyxLQUFLNGtCLE9BQU8vYSxZQUFXOUcsRUFBRThHLFdBQVksR0FFbkRzOEIsU0FBV25tQyxLQUFLNGtCLE9BQU8vYSxXQUN2QnM4QixVQUFvQyxFQUF4Qm5tQyxLQUFLNGtCLE9BQU8vYSxZQUV4QjlHLEVBQUVnSCxXQUFZLEdBR2RvOEIsU0FBbUMsRUFBeEJubUMsS0FBSzRrQixPQUFPL2EsV0FDdkJzOEIsVUFBb0MsRUFBeEJubUMsS0FBSzRrQixPQUFPL2EsWUFFeEI5RyxFQUFFa0gsY0FBZSxHQUVmazhCLFNBQW1DLEVBQXhCbm1DLEtBQUs0a0IsT0FBTy9hLFlBQWU5RyxFQUFFc2pDLFlBQWEsSUFHdkR0akMsRUFBRThHLFdBQWE5RyxFQUFFZ0gsV0FBYWhILEVBQUVrSCxjQUFnQmxILEVBQUVzakMsYUFFcER0akMsRUFBRThHLFdBQVksR0FLdEIsTUFBTzlHLEVBQUU4RyxXQUFZLENBRzNCLENBRUEsc0JBQUkyYSxHQUNGLE9BQU9sbkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQ25DLENBRUEsWUFBSXlvQixHQUNGLE1BQU1qZ0IsSUFBTTZKLFdBQVc0QyxtQkFBbUJuUyxLQUFLbVIsVUFDL0MsT0FBSXpMLEtBQ0csb0NBQ1QsQ0FFQSxTQUFJeEwsR0FDRixPQUFPcVYsV0FBV3FCLGdCQUFnQjVRLEtBQUttUixTQUN6QyxDQUVBLFFBQUlsTCxHQUNGLE9BQU9qRyxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJOEMsS0FBS3FVLE9BQ25DLENBRUEsVUFBSXVRLEdBQ0YsT0FBTzVrQixLQUFLaUcsSUFDZCxDQUVBLFdBQUk2ZSxHQUVGLE9BREs5a0IsS0FBSzhsQyxXQUFVOWxDLEtBQUs4bEMsU0FBVyxJQUM3QjlsQyxLQUFLOGxDLFFBQ2QsQ0FFQSxVQUFJL2dCLEdBQ0YsT0FBSS9rQixLQUFLOGtCLFNBQVc5a0IsS0FBSzhrQixRQUFRbGtCLE9BQWVaLEtBQUs4a0IsUUFBUU0sTUFDdEQsSUFDVCxDQUVBLFVBQUl6QixHQUNGLE9BQU8zakIsS0FBSzlGLE1BQU1zckIsZ0JBQWdCeGxCLEtBQUtxVSxPQUN6QyxDQUVBLG1CQUFJaXlCLEdBQ0YsT0FBT3RtQyxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJOEMsS0FBSzRrQixPQUFPN29CLE9BQU9rTSxNQUFNK0YsS0FBS0MsR0FDNUQsQ0FFQSxtQkFBSXM0QixHQUNGLE9BQUl2bUMsS0FBSzRrQixPQUFPN29CLE9BQU9rTSxNQUFNa0csV0FBV0YsR0FDL0JqTyxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJOEMsS0FBSzRrQixPQUFPN29CLE9BQU9rTSxNQUFNa0csV0FBV0YsSUFFM0RqTyxLQUFLc21DLGVBQ2QsQ0FFQSxZQUFJRSxHQUNGLE9BQU94bUMsS0FBSzJKLE9BQVMzSixLQUFLMmxDLFFBQzVCLENBRUEsZUFBSWMsR0FDRixPQUFPem1DLEtBQUsybEMsVUFBWTNsQyxLQUFLNEosYUFDL0IsQ0FFQSxVQUFJODhCLEdBSUYsWUFISTdvQyxJQUFjbUMsS0FBSzJtQyxVQUNyQjNtQyxLQUFLMm1DLFFBQVUzbUMsS0FBSzlGLE1BQU0wc0MsYUFBYSxXQUVsQzVtQyxLQUFLMm1DLE9BQ2QsQ0FFQSxnQkFBSUUsR0FDRixPQUFLN21DLEtBQUs4bEMsU0FBU2xsQyxPQUNaWixLQUFLOGxDLFNBQVNwbUMsTUFBS3FELEdBQUtBLEVBQUVoQyxTQURDLElBRXBDLENBRUEsU0FBSStsQyxHQUVGLFlBRElqcEMsSUFBY21DLEtBQUsrbUMsU0FBUS9tQyxLQUFLK21DLE9BQVMsSUFDdEMvbUMsS0FBSyttQyxNQUNkLENBRUEsbUJBQUlDLEdBQ0YsT0FBT2huQyxLQUFLOG1DLE1BQU1sbUMsT0FBUyxDQUM3QixDQUVBLDhCQUFJcW1DLEdBQ0YsT0FBT2puQyxLQUFLa25DLGdCQUNkLENBRUEsVUFBSVIsQ0FBUXhtQixHQUNWbGdCLEtBQUsybUMsUUFBVXptQixDQUNqQixDQUVBLGlCQUFJaW5CLEdBQ0YsSUFBSUMsUUFBUyxFQUNiLElBQUssTUFBTWh3QixLQUFLcFgsS0FBS21YLE1BQ25CaXdCLE9BQVNBLFFBQVVod0IsRUFBRW1ILFVBRXZCLE9BQU82b0IsTUFDVCxDQUVBLGtCQUFJQyxHQUNGLE1BQU1DLEtBQU8sR0FDYixJQUFLLElBQUlucUIsTUFBUSxFQUFHQSxNQUFRbmQsS0FBS21YLE1BQU12VyxPQUFRdWMsUUFDN0MsR0FBSW5kLEtBQUttWCxNQUFNZ0csT0FBT29CLFVBQVcsQ0FDL0IsTUFBTWdwQixJQUFNLENBQ1ZwbUMsS0FBTW5CLEtBQUttWCxNQUFNZ0csT0FDakJxcUIsS0FBTXhuQyxLQUFLOG1DLE1BQU0zcEIsUUFFbkJtcUIsS0FBS2x3QyxLQUFLbXdDLElBQ1osQ0FFRixPQUFvQixJQUFoQkQsS0FBSzFtQyxPQUFxQjBtQyxLQUNsQixJQUNkLENBRUEsYUFBSUcsR0FDRixPQUFPem5DLEtBQUs4bUMsTUFBUTltQyxLQUFLOG1DLE1BQU1sbUMsT0FBUyxDQUMxQyxDQUVBLGFBQUk4bUMsR0FDRixPQUFPMW5DLEtBQUs0a0IsT0FBT3paLGVBQ3JCLENBRUEsWUFBSXc4QixHQUNGLE9BQUkzbkMsS0FBSzJsQyxTQUFpQixJQUduQjNsQyxLQUFLNGtCLE9BQU83b0IsT0FBT3dOLGFBQWF0RyxJQUNuQ2dCLFNBQVNqRSxLQUFLNGtCLE9BQU83b0IsT0FBT3dOLGFBQWF0RyxLQUN6QyxDQUNOLENBRUEsY0FBSTJrQyxHQUNGLE9BQU90cUMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsZ0JBQ25DLENBRUEsc0JBQUkycUMsR0FDRixPQUFPdnFDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHVCQUNuQyxDQUVBLGFBQUk0cUMsR0FDRixPQUFJOW5DLEtBQUs0bkMsWUFDTDVuQyxLQUFLNmxDLG1CQUFxQjdsQyxLQUFLNGtCLE9BQU96WixlQUU1QyxDQUVBLGNBQUk0OEIsR0FDRixPQUFJL25DLEtBQUs2bkMsdUJBQ0w3bkMsS0FBSzhtQyxPQUFjOW1DLEtBQUs4bUMsTUFBTWxtQyxRQUFVWixLQUFLMm5DLFNBRW5ELENBRUEsY0FBSUssR0FDRixJQUFLaG9DLEtBQUs0a0IsT0FBTzdvQixPQUFPOEssV0FBV3pPLEtBQU0sT0FBTyxFQUNoRCxHQUFJNEgsS0FBS2lvQyxZQUFhLE9BQU9qb0MsS0FBS2lvQyxZQUNsQyxNQUFNMW9DLEtBQU82QyxLQUFLdUksTUFBTTNLLEtBQUt1bUMsZ0JBQWdCbndDLE1BQVEsSUFDckQsT0FBT21KLEtBQU8sRUFBSSxFQUFJQSxJQUN4QixDQUVBLGNBQUl5b0MsQ0FBWXA4QixHQUNWQSxHQUFLeEosS0FBS3VJLE1BQU0zSyxLQUFLdW1DLGdCQUFnQm53QyxNQUFRLElBQy9DNEosS0FBS2lvQyxZQUFjN2xDLEtBQUt1SSxNQUFNM0ssS0FBS3VtQyxnQkFBZ0Jud0MsTUFBUSxJQUNsRHdWLEdBQUssSUFDZDVMLEtBQUtpb0MsWUFBYyxHQUVyQmpvQyxLQUFLaW9DLFlBQWNoa0MsU0FBUzJILEVBQzlCLENBRUEsbUJBQUlzOEIsR0FDRixPQUF3QixJQUFwQmxvQyxLQUFLZ29DLFVBRVgsQ0FFQSxtQkFBSUcsR0FLRixPQUhFL2xDLEtBQUt1SSxNQUFNM0ssS0FBS3VtQyxnQkFBZ0Jud0MsTUFBUSxJQUFNLEVBQzFDLEVBQ0FnTSxLQUFLdUksTUFBTTNLLEtBQUt1bUMsZ0JBQWdCbndDLE1BQVEsT0FDOUI0SixLQUFLZ29DLFVBRXZCLENBRUEsZ0JBQUFJLENBQWtCdnNDLEtBQ2hCLE9BQU9tRSxLQUFLOGxDLFNBQVNwbUMsTUFBS3FELEdBQUtsSCxNQUFRa0gsRUFBRW9PLFVBQzNDLENBRUEscUJBQUFrM0IsR0FDRSxJQUFLLE1BQU10bEMsS0FBSy9DLEtBQUs4a0IsUUFDbkIvaEIsRUFBRW1rQyxlQUFpQmxuQyxLQUFLa25DLGVBQWVua0MsRUFFM0MsQ0FFQSxjQUFBbWtDLENBQWdCbmtDLEVBQUksTUFDbEIsTUFBTWdpQixPQUFTaGlCLEdBQUsvQyxLQUFLNm1DLGFBQ3pCLElBQUkzdkIsT0FBU2xYLEtBQUs0a0IsT0FBTzdvQixPQUFPK04sTUFBTUwsT0FBT3lOLE9BQ3pDbFgsS0FBSzRrQixPQUFPN29CLE9BQU84SyxXQUFXN08sVUFDNUIrSyxFQUFFZ0gsWUFBV21OLE9BQVNsWCxLQUFLNGtCLE9BQU83b0IsT0FBTytOLE1BQU1FLEtBQUtrTixRQUNwRG5VLEVBQUVrSCxlQUFjaU4sT0FBU2xYLEtBQUs0a0IsT0FBTzdvQixPQUFPK04sTUFBTUksUUFBUWdOLFNBRWhFLElBQ0liLFdBREEzUixTQUFXcWdCLE9BQU9yZ0IsU0FHakIyUixXQURMclcsS0FBSzRrQixPQUFPN29CLE9BQU84SyxXQUFXN08sUUFDWixFQUNBK3NCLE9BQU8xTyxXQUN6QixJQUFJaXlCLGVBQWlCLEdBT3JCLEdBTkl0b0MsS0FBSzBtQyxRQUFtQyxJQUF6QjFtQyxLQUFLZ25DLGlCQUF1QnRpQyxXQUMzQzFFLEtBQUtrakMsV0FBV3grQixXQUNoQjFFLEtBQUttakMsY0FBY3orQixXQUNuQjFFLEtBQUtzTCxRQUFRNUcsV0FDYjFFLEtBQUs0SixnQkFBa0I1SixLQUFLMmxDLFVBQVVqaEMsV0FDdEMxRSxLQUFLMmxDLFdBQVVqaEMsVUFBWTFFLEtBQUtnbkMsZ0JBQWtCLEdBQ2xEdGlDLFVBQVksRUFBRyxDQUVqQjJSLFlBRGVqVSxLQUFLQyxJQUFJcUMsU0FBVyxHQUUvQjJSLFdBQWF2QyxVQUFVc1AsZ0JBQWdCbFAsV0FDekNtQyxXQUFhdkMsVUFBVXNQLGdCQUFnQm1sQixZQUV6QzdqQyxVQUFZLENBQ2QsQ0FnQkEsT0FkSW9QLFVBQVVzUCxnQkFBZ0JyUCxVQUFZc0MsYUFDeENpeUIsZUFBaUIsV0FFZngwQixVQUFVc1AsZ0JBQWdCblAsT0FBU29DLGFBQVlpeUIsZUFBaUIsUUFDaEV4MEIsVUFBVXNQLGdCQUFnQmxaLFVBQVltTSxhQUN4Q2l5QixlQUFpQixXQUVmeDBCLFVBQVVzUCxnQkFBZ0JsUCxXQUFhbUMsYUFDekNpeUIsZUFBaUIsWUFFZngwQixVQUFVc1AsZ0JBQWdCbWxCLGFBQWVseUIsYUFDM0NpeUIsZUFBaUIsY0FHWixDQUNMRSxNQUFPbnlCLFdBQ1AvZixLQUFNZ3lDLGVBQ041akMsU0FDQXdTLE9BQ0FxeEIsV0FBWWx5QixhQUFldkMsVUFBVXNQLGdCQUFnQm1sQixXQUV6RCxDQU1BLHNCQUFBRSxHQUNFem9DLEtBQUtxb0Msd0JBQ0wsTUFBTWIsS0FBTyxDQUNYemlCLE9BQVEva0IsS0FBSzZtQyxhQUNiNThCLGFBQWNqSyxLQUFLNm1DLGFBQWE1OEIsYUFDaENrSCxTQUFVblIsS0FBSzZtQyxhQUFhMTFCLFNBQzVCdTNCLFVBQVcxb0MsS0FBSzZtQyxhQUFhdndDLEtBQzdCK2YsV0FBWXJXLEtBQUs2bUMsYUFBYUssZUFBZXNCLE1BQzdDOWpDLFNBQVUxRSxLQUFLNm1DLGFBQWFLLGVBQWV4aUMsU0FDM0N3UyxPQUFRbFgsS0FBSzZtQyxhQUFhSyxlQUFlaHdCLE9BQ3pDeXhCLFlBQWEsRUFDYkMsZUFBZ0IsRUFDaEJDLG1CQUFvQixFQUNwQkMsU0FBUyxHQUdYLElBQUlDLFdBQWEvb0MsS0FBSzBuQyxVQUFZMW5DLEtBQUs2bEMsa0JBRXZDLEdBQUk3bEMsS0FBSzJsQyxTQUFVLENBQ2pCLEdBQUkzbEMsS0FBS2duQyxnQkFBa0IsRUFBRyxDQUM1QixNQUFNZ0MsYUFBZWhwQyxLQUFLOG1DLE1BQU05bUMsS0FBS2duQyxnQkFBa0IsR0FDdkQsR0FBSWdDLGFBQWE3M0IsV0FBYW5SLEtBQUs2bUMsYUFBYTExQixTQUFVLENBQ3hELE1BQU11QixTQUFXbkQsV0FBVytDLFlBQzFCL0MsV0FBVzBCLGdCQUFnQiszQixhQUFhNzNCLFVBQ3hDNUIsV0FBVzBCLGdCQUFnQmpSLEtBQUs2bUMsYUFBYTExQixXQUUvQ3EyQixLQUFLb0IsZUFBaUJ4bUMsS0FBS3VJLE1BQU00RSxXQUFXZ0UsUUFBUWIsV0FDaEQ4MEIsS0FBS29CLGdCQUFrQkcsYUFBZS9vQyxLQUFLNG5DLGFBQzdDSixLQUFLb0IsZUFBaUJHLFdBQ3RCQSxXQUFhLEdBRWYvb0MsS0FBSzZsQyxrQkFDSDVoQyxTQUFTakUsS0FBSzZsQyxtQkFBcUIyQixLQUFLb0IsZUFDMUNwQixLQUFLc0IsU0FBVSxDQUNqQixDQUNGLENBQ0F0QixLQUFLbUIsWUFBYzNvQyxLQUFLZ29DLFdBQ3BCUixLQUFLbUIsYUFBZSxJQUFHbkIsS0FBS21CLFlBQWMsR0FDMUNuQixLQUFLbUIsYUFBZUksYUFBZS9vQyxLQUFLNG5DLGFBQzFDSixLQUFLbUIsWUFBY0ksV0FDbkJBLFdBQWEsR0FHZnZCLEtBQUtxQixtQkFBcUJyQixLQUFLbUIsWUFBY25CLEtBQUtvQixjQUNwRCxDQUNJNW9DLEtBQUsySixRQUNQNjlCLEtBQUttQixZQUFjMWtDLFNBQVNqRSxLQUFLNGtCLE9BQU83b0IsT0FBT3dOLGFBQWFJLE9BQ3hEMUYsU0FBU2pFLEtBQUs0a0IsT0FBTzdvQixPQUFPd04sYUFBYUksT0FDekMsRUFDQTY5QixLQUFLbUIsYUFBZUksYUFBZS9vQyxLQUFLNG5DLGFBQzFDSixLQUFLbUIsWUFBY0ksV0FDbkJBLFdBQWEsSUFJakIvb0MsS0FBSzZsQyxrQkFBb0I1aEMsU0FBU2pFLEtBQUs2bEMsbUJBQXFCMkIsS0FBS21CLFlBRTdEM29DLEtBQUswbUMsU0FDUDFtQyxLQUFLMG1DLFFBQVMsRUFDZDFtQyxLQUFLNGxDLE9BQVEsR0FHZjVsQyxLQUFLOG1DLE1BQU0xdkMsS0FBS293QyxLQUNsQixDQUVBLFlBQUk5dEIsR0FDRixNQUFPLHlEQUNULENBRUEsb0JBQU1xcUIsR0FDSi9qQyxLQUFLcW9DLHdCQUNMLE1BQU10dUIsV0FBYXdHLGVBQWV2Z0IsS0FBSzBaLFNBQVUxWixNQUszQzZsQixZQUFjLENBQUMsRUFDZjdVLE1BQVF6QixXQUFXMEIsZ0JBQWdCalIsS0FBS21SLFVBQzFDSCxNQUFPNlUsWUFBWTdVLE1BQVFBLE1BQU1uQyxTQUNoQ2dYLFlBQVkzckIsTUFBUThGLEtBQUs5RixNQUU5QixNQUFNOFYsUUFBVXhNLFlBQVl5TSxXQUFXNFYsYUFJakN4aUIsU0FBVyxDQUNmTyxNQUZXNUQsS0FBSzlGLE1BQU0wSixLQUFPNUQsS0FBSzlGLE1BQU0wSixLQUFPdEcsS0FBS3NHLE1BRXpDcUssR0FDWCtCLFFBQ0FRLFFBQVN1SixNQUdMMVksU0FBVy9ELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLFlBQ3ZDLENBQUMsU0FBVSxhQUFhOEYsU0FBUzNCLFlBQ25DZ0MsU0FBU0MsUUFBVUUsWUFBWXNpQixxQkFBcUIsT0FHdER6aUIsU0FBU0UsT0FBUSxFQUlqQixhQUYwQkMsWUFBWWlOLE9BQU9wTixTQUcvQyxDQUVBLG9CQUFNNG5CLEdBQ0pqckIsS0FBS3FvQyx3QkFDTCxNQUFNdHVCLFdBQWF3RyxlQUFldmdCLEtBQUswWixTQUFVMVosTUFFM0M2UCxRQUFVdlMsS0FBSzhlLFNBQVNsZixJQUFJOEMsS0FBS21jLFdBRWpDekwsVUFBWWIsUUFBUTNSLE9BQU8sQ0FBRXNTLFFBQVN1SixPQUU1QyxhQURNaFIsR0FBRzRpQixLQUFLQyxjQUFjbGIsS0FBSyxHQUMxQkEsR0FDVCxDQUVBLFVBQUEwa0IsQ0FBWXhzQixVQUNWLE1BQU1xc0IsS0FBT3JzQixTQUFTNUYsU0FBUyxLQUMzQnVNLFdBQVdDLGtCQUFrQjVHLFVBQzdCQSxTQUVPLGVBQVRxc0IsTUFDUyxrQkFBVEEsTUFDUyxhQUFUQSxNQUVBajFCLEtBQUt3SixZQUFhLEVBQ2xCeEosS0FBSzRKLGVBQWdCLEVBQ3JCNUosS0FBSzJsQyxVQUFXLEVBQ0gsYUFBVDFRLE9BQXFCajFCLEtBQUsySixPQUFRLEdBQ3RDM0osS0FBS2kxQixPQUFRLEdBQ0ssVUFBVEEsTUFDVGoxQixLQUFLMmxDLFVBQVcsRUFDWDNsQyxLQUFLd0osWUFBZXhKLEtBQUs0SixnQkFBZTVKLEtBQUt3SixZQUFhLEdBQy9EeEosS0FBSzJKLE9BQVMzSixLQUFLMkosT0FFbkIzSixLQUFLaTFCLE9BQVNqMUIsS0FBS2kxQixLQUV2QixDQUVBLGlCQUFNZ1UsR0FFSixHQURBanBDLEtBQUttWCxNQUFRLEdBQ1RuWCxLQUFLeW1DLFlBQWEsQ0FDcEIsSUFBSXlDLG1CQUFvQixFQUNwQi9yQixNQUFRLEVBQ1osTUFBUStyQixtQkFBcUJscEMsS0FBSzhtQyxNQUFNbG1DLE9BQVN1YyxPQUFPLENBQ3RELE1BQU1oYyxXQUFhbkIsS0FBS21wQyxjQUFjbnBDLEtBQUs4bUMsTUFBTTNwQixRQUM3Q2hjLEtBQUtTLE1BQU1ULFlBQ1BELFNBQVNpQyxlQUFlaEMsS0FBS1MsS0FBS1QsWUFFcENuQixLQUFLNGtCLE9BQU9qWixhQUNoQjFILFNBQVNqRSxLQUFLOG1DLE1BQU0zcEIsT0FBT3dyQixhQUN6QjFrQyxTQUFTakUsS0FBSzhtQyxNQUFNM3BCLE9BQU95ckIsaUJBRTNCem5DLEtBQUtpb0MsaUJBQ1Bqb0MsS0FBS29kLFdBQVksRUFDakIycUIsbUJBQW9CLEdBRXRCL3JCLFFBQ0FuZCxLQUFLbVgsTUFBTS9mLEtBQUsrSixLQUNsQixDQUNGLEtBQU8sQ0FDTCxNQUFNQSxXQUFhbkIsS0FBS21wQyxnQkFDcEJob0MsS0FBS1MsTUFBTVQsWUFDUEQsU0FBU2lDLGVBQWVoQyxLQUFLUyxLQUFLVCxNQUUxQyxJQUFJa29DLFlBQWNycEMsS0FBSzJKLE1BQ25CMUYsU0FBU2pFLEtBQUs0a0IsT0FBTzdvQixPQUFPd04sYUFBYUksT0FDekMsRUFDQTAvQixhQUFlcnBDLEtBQUswbkMsWUFBVzJCLFlBQWNycEMsS0FBSzBuQyxXQUN0RCxNQUFNRixLQUFPLENBQ1h6aUIsT0FBUS9rQixLQUFLNm1DLGFBQ2I1OEIsYUFBY2pLLEtBQUs2bUMsYUFBYTU4QixhQUNoQ2tILFNBQVVuUixLQUFLNm1DLGFBQWExMUIsU0FDNUJ1M0IsVUFBVzFvQyxLQUFLNm1DLGFBQWF2d0MsS0FDN0IrZixXQUFZclcsS0FBSzZtQyxhQUFhSyxlQUFlc0IsTUFDN0M5akMsU0FBVTFFLEtBQUs2bUMsYUFBYUssZUFBZXhpQyxTQUMzQ3dTLE9BQVFsWCxLQUFLNm1DLGFBQWFLLGVBQWVod0IsT0FDekN5eEIsWUFBYVUsWUFDYlQsZUFBZ0IsRUFDaEJFLFNBQVMsU0FFTDlvQyxLQUFLNGtCLE9BQU9qWixhQUFhMDlCLGFBRTNCbG9DLEtBQUtpb0MsaUJBQ1Bqb0MsS0FBS29kLFdBQVksR0FFbkJ2ZSxLQUFLOG1DLE1BQU0xdkMsS0FBS293QyxNQUNoQnhuQyxLQUFLbVgsTUFBTS9mLEtBQUsrSixLQUNsQixDQUNBbkIsS0FBSzA3QixVQUFXLEVBQ2hCMTdCLEtBQUs2MEIsUUFBUyxRQUVSNzBCLEtBQUtpckIsZ0JBQ2IsQ0FFQSxtQkFBTWtlLENBQWUzQixLQUFPLE1BQzFCLE1BQU16aUIsT0FBU3lpQixLQUNYeG5DLEtBQUtvb0MsaUJBQWlCWixLQUFLcjJCLFVBQzNCblIsS0FBSzZtQyxhQUNIN3dCLE1BQVEsSUFBSWxDLFVBMkJsQixPQTFCQWtDLE1BQU03RSxTQUFXblIsS0FBS21SLFNBQ3RCNkUsTUFBTTliLE1BQVE4RixLQUFLbVIsU0FDbkI2RSxNQUFNL1AsS0FBT2pHLEtBQUtxVSxPQUVsQjJCLE1BQU15TyxTQUFVLEVBQ2hCek8sTUFBTXV1QixXQUFZLEVBQ2R2a0MsS0FBS3dtQyxTQUFVeHdCLE1BQU0vTixNQUFRakksS0FBS3VtQyxnQkFDakN2d0IsTUFBTS9OLE1BQVFqSSxLQUFLc21DLGdCQUNwQnRtQyxLQUFLeW1DLGFBQ1B6d0IsTUFBTUssV0FBYW14QixLQUFLbnhCLFdBQ3hCTCxNQUFNakIsYUFBZXl5QixLQUFLOWlDLFdBRTFCMUUsS0FBS3FvQyx3QkFDTHJvQyxLQUFLNmxDLGtCQUFvQjVoQyxTQUFTakUsS0FBSzZsQyxtQkFBcUIsRUFDeEQ3bEMsS0FBSzBtQyxTQUNQMW1DLEtBQUswbUMsUUFBUyxFQUNkMW1DLEtBQUs0bEMsT0FBUSxHQUVmNXZCLE1BQU1LLFdBQWFyVyxLQUFLNm1DLGFBQWFLLGVBQWVzQixNQUNwRHh5QixNQUFNakIsYUFBZS9VLEtBQUs2bUMsYUFBYUssZUFBZXhpQyxVQUd4RHNSLE1BQU1zekIsUUFBVSxHQUFHaHNDLEtBQUtDLEtBQUtDLFNBQVMsbUJBQW1CdW5CLE9BQU96dUIsT0FDaEUwZixNQUFNc1AsVUFBWVAsT0FBTzVULGVBRW5CNkUsTUFBTTdVLE9BQ0w2VSxLQUNULENBRUEsdUJBQU8rVixDQUFrQjVQLFdBQ3ZCLE1BQU10TSxRQUFVdlMsS0FBSzhlLFNBQVNsZixJQUFJaWYsV0FDbEMsSUFBS3RNLFFBQVMsT0FBTyxLQUNyQixNQUFNeEQsS0FBT21mLEVBQUUzYixRQUFRVyxTQUFTLEdBRTFCK2pCLFVBQVlpUixtQkFBbUIveEIsWUFBWXBILEtBQU04UCxXQUd2RCxPQUZBb1ksVUFBVXBZLFVBQVlBLFVBRWZvWSxTQUNULENBRUEsZ0JBQUFnVixDQUFrQjM5QixHQUNoQjVMLEtBQUtnb0MsV0FBYWhvQyxLQUFLZ29DLFdBQWFwOEIsRUFDcEM1TCxLQUFLaXJCLGdCQUNQLENBRUEsdUJBQU8yWSxDQUFrQnJuQyxNQUFPc25DLGVBQWdCLEdBQzlDLE1BQU14M0IsS0FBTzlQLE1BQU1JLGNBQWNFLFFBQVEsb0JBQ25DbzRCLEtBQU8xNEIsTUFBTUksY0FBY0ksUUFBUWs0QixLQUNuQzZPLFVBQVl2MEIsV0FBV0Msa0JBQWtCeWxCLE1BRy9DLEdBQUs0TyxjQUlFLENBRUwsTUFBTXRQLFVBQVlpUixtQkFBbUIveEIsWUFBWXBILE1BQ2pELEdBQUk5UCxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsZUFBZ0IsQ0FDekQsTUFBTXdDLE9BQVN4b0IsTUFBTUksY0FBY0UsUUFBUSxXQUNyQ2hCLElBQU1vSSxTQUFTOGdCLE9BQU9ob0IsUUFBUXVvQixXQUNwQ2lQLFVBQVV6UCxRQUFRanBCLEtBQUt1NUIsV0FBVzBPLFVBQ3BDLE1BQU92UCxVQUFVYSxXQUFXME8sV0FDNUJ2UCxVQUFVdEosZ0JBQ1osTUFaRTVlLEtBQUt0UCxRQUFRK21DLFdBQXlDLFNBQTVCejNCLEtBQUt0UCxRQUFRK21DLFdBQ3ZDdm5DLE1BQU1JLGNBQWNvUyxVQUFVMEwsT0FBTyxlQUNyQ2xlLE1BQU1JLGNBQWNJLFFBQVFzWSxTQUFXaEosS0FBS3RQLFFBQVErbUMsVUFXeEQsQ0FFQSxRQUFBMEYsQ0FBVUMsV0FDUixNQUFNdG9DLEtBQU9uQixLQUFLbVgsTUFBTXN5QixXQUNsQnZzQixXQUFhalosU0FBUzlDLEtBQUt5VSxZQUM1QjVWLEtBQUs5RixNQUFNcWpCLFVBQVVMLGFBTTFCL2IsS0FBSzBTLGFBQWUxUyxLQUFLa1YsV0FDekJsVixLQUFLb2QsV0FBWSxFQUNqQnBkLEtBQUsrakMsV0FBWSxFQUNqQmxsQyxLQUFLaXJCLGtCQVJIbGlCLEdBQUdDLGNBQWN3VSxNQUNmLEdBQUd4ZCxLQUFLOUYsTUFBTTVELG1EQVFwQixDQUVBLFdBQUF5dUMsQ0FBYTBFLFVBQVdDLGNBRXRCLE1BQU12b0MsS0FBT25CLEtBQUttWCxNQUFNc3lCLFdBQ2xCRSxpQkFBbUJ4b0MsS0FBS3NVLGdCQUFnQmkwQixjQUN4Q3hzQixXQUFhalosU0FBUzBsQyxpQkFBaUJ6c0IsWUFDN0MsSUFBS2xkLEtBQUs5RixNQUFNcWpCLFVBQVVMLFlBSXhCLFlBSEFuVSxHQUFHQyxjQUFjd1UsTUFDZixHQUFHeGQsS0FBSzlGLE1BQU01RCxvREFJbEIsTUFBTTB1QyxnQkFBa0IvZ0MsU0FBUzBsQyxpQkFBaUIzRSxpQkFDbEQ3akMsS0FBSzBTLGFBQWVteEIsZ0JBQ2hCN2pDLEtBQUtrVixZQUFjMnVCLGtCQUFpQjdqQyxLQUFLb2QsV0FBWSxHQUN6RHBkLEtBQUsrakMsV0FBWSxFQUNqQmxsQyxLQUFLaXJCLGdCQUNQLENBRUEsa0JBQU94WCxDQUFhcEgsS0FBTThQLFVBQVksTUFDcEMsTUFBTXl0QixlQUFpQixJQUFJcEUsbUJBQzNCb0UsZUFBZTlELFNBQVcsR0FDdEIzcEIsVUFBV3l0QixlQUFlenRCLFVBQVlBLFVBQ2pDOVAsS0FBS3hQLFFBQVEsY0FDcEIrc0MsZUFBZXp0QixVQUFZOVAsS0FBS3hQLFFBQVEsWUFBWUUsUUFBUW9mLFdBRzlENU0sV0FBV21DLHFCQUFxQms0QixlQUFnQnY5QixNQUNoRCxNQUFNdzlCLFlBQWN4OUIsS0FBSzhJLGlCQUFpQixXQUMxQyxJQUFLLE1BQU1wUyxLQUFLOG1DLFlBQWEsQ0FDM0IsTUFBTTlrQixPQUFTZ2hCLGdCQUFnQmx4QixlQUFlOVIsR0FDOUM2bUMsZUFBZTlrQixRQUFRMXRCLEtBQUsydEIsT0FDOUIsQ0FFQSxNQUFNK2tCLFVBQVl6OUIsS0FBSzhJLGlCQUFpQixTQUN4QyxHQUFJMjBCLFVBQ0YsSUFBSyxNQUFNM3pDLEtBQUsyekMsVUFBVyxDQUN6QixNQUFNdEMsS0FBTyxDQUFDLEVBQ2RqNEIsV0FBV21DLHFCQUFxQjgxQixLQUFNcnhDLEdBQ3RDeXpDLGVBQWU5QyxNQUFNMXZDLEtBQUtvd0MsS0FDNUIsQ0FVRm9DLGVBQWV6eUIsTUFBUSxHQUN2QixNQUFNQSxNQUFROUssS0FBSzhJLGlCQUFpQixnQkFDcEMsSUFBSyxNQUFNaUMsS0FBS0QsTUFBTyxDQUNyQixNQUFNaFcsS0FBT3FTLFNBQVNxQixlQUFldUMsR0FDckN3eUIsZUFBZXp5QixNQUFNL2YsS0FBSytKLEtBQzVCLENBRUF5b0MsZUFBZTF5QixPQUFTLEdBQ3hCLE1BQU02eUIsWUFBYzE5QixLQUFLOEksaUJBQWlCLG1CQUMxQyxJQUFLLE1BQU02MEIsTUFBTUQsWUFBYSxDQUM1QixNQUFNNVEsV0FBYXBpQixXQUFXbEMsZUFBZW0xQixJQUM3Q0osZUFBZTF5QixPQUFPOWYsS0FBSytoQyxXQUM3QixDQUVBLE9BQU95USxjQUNULENBRUEsZ0JBQU0vUCxHQUNKNzVCLEtBQUtrWCxPQUFTLEdBQ2QsTUFBTW93QixLQUFPdG5DLEtBQUtxbkMsZUFRbEIsSUFBSyxJQUFJL21CLEVBQUksRUFBR0EsRUFBSWduQixLQUFLMW1DLE9BQVEwZixJQUFLLENBQ3BDLE1BQU0ycEIsRUFBSTNDLEtBQUtobkIsR0FDVDBuQixXQUFhL2pDLFNBQVNnbUMsRUFBRXpDLEtBQUttQixhQUM3Qm9CLFlBQWMsR0FFcEIsR0FBSS9CLFdBQWEsRUFBRyxDQUNsQixJQUFJMU8sY0FBZ0JsOUIsT0FBTzZ0QyxFQUFFekMsS0FBS3R3QixRQUM3Qm9pQixlQUFtQyxLQUFsQkEsZ0JBQXNCQSxjQUFnQixLQUM1RCxNQUFNNFEsVUFBWW56QixXQUFXQyxXQUFXc2lCLGVBQ2xDb0IsVUFBWSxJQUFJNTRCLEtBQUt3M0IsZUFBZTF1QixTQUFTLENBQ2pEQyxVQUFVLElBQ1RwSSxNQUNHMG5DLHNCQUF3Qm5xQyxLQUFLNGtCLE9BQU92VyxPQUN0QyxHQUFHaXJCLG1CQUFtQm9CLFlBQ3RCLEdBQUdBLFlBQ0QwUCxrQkFBb0JyekIsV0FBV0MsV0FBV216Qix1QkFFaEQsSUFBSUUsY0FBZ0IsRUFDaEJDLGdCQUFrQixFQUNsQnAyQixVQUFXLEdBQ1hsVSxLQUFLMmxDLFVBQVkzbEMsS0FBSzJKLFNBQ3hCMmdDLGdCQUFrQmxvQyxLQUFLdUksTUFBTXE5QixXQUFhLElBRXBCLElBQXBCc0Msa0JBQXVCQSxnQkFBa0IsR0FDekNMLEVBQUU5b0MsS0FBSzBTLGNBQWdCQyxVQUFVc1AsZ0JBQWdCbFosVUFDbkRtZ0MsY0FBZ0JDLGdCQUNoQkEsZ0JBQWtCdEMsV0FBYXFDLGNBQy9CbjJCLFVBQVcsRUFFVEosVUFBVXNQLGdCQUFnQmxQLFdBQWErMUIsRUFBRTlvQyxLQUFLMFMsZUFDN0NDLFVBQVVzUCxnQkFBZ0JsWixTQUFXKy9CLEVBQUU5b0MsS0FBS2tWLFlBQzNDNHpCLEVBQUV6QyxLQUFLdjlCLGdCQUVUcWdDLGdCQUFrQnRDLFdBQ2xCcUMsY0FBZ0IsRUFDaEJuMkIsVUFBVyxJQUlmLElBQUl6UixNQUFRLEVBQ1osSUFBSyxJQUFJMGEsTUFBUSxFQUFHQSxNQUFRbXRCLGdCQUFpQm50QixRQUFTLENBQ3BELE1BQU1oYyxLQUFPLElBQUlXLEtBQUt3M0IscUJBRWhCbjRCLEtBQUt5SixTQUFTLENBQUV0SSxPQUFPLFVBQ3ZCcEIsU0FBU2lDLGVBQWVoQyxNQUU5QjRvQyxZQUFZM3lDLEtBQUssQ0FDZjZDLFFBQVNxL0IsY0FDVDcyQixNQUFPdEIsS0FBS3NCLE1BQ1oyUyxJQUFLODBCLFVBQ0xoMkIsVUFBVSxJQUVaelIsT0FBU3RCLEtBQUtzQixLQUNoQixDQUNBLElBQUssSUFBSTBhLE1BQVEsRUFBR0EsTUFBUWt0QixjQUFlbHRCLFFBQVMsQ0FDbEQsTUFBTWhjLEtBQU8sSUFBSVcsS0FBS3FvQyw2QkFFaEJocEMsS0FBS3lKLFNBQVMsQ0FBRXRJLE9BQU8sVUFDdkJwQixTQUFTaUMsZUFBZWhDLE1BRTlCNG9DLFlBQVkzeUMsS0FBSyxDQUNmNkMsUUFBU2t3QyxzQkFDVDFuQyxNQUFPdEIsS0FBS3NCLE1BQ1oyUyxJQUFLZzFCLGtCQUNMbDJCLFVBQVUsSUFFWnpSLE9BQVN0QixLQUFLc0IsS0FDaEIsQ0FFQSxJQUFJaWpCLFdBQWEsUUFDYlgsT0FBU3hWLFdBQVcwQixnQkFBZ0JnNUIsRUFBRTlvQyxLQUFLbWtCLFdBQzFDUCxTQUFRQSxPQUFTeFYsV0FBV3FCLGdCQUFnQnE1QixFQUFFOW9DLEtBQUtta0IsWUFDcERQLFNBQVFXLFdBQWFYLE9BQU96dUIsTUFFaEMwSixLQUFLa1gsT0FBTzlmLEtBQUssQ0FDZmt1QixVQUFXMmtCLEVBQUU5b0MsS0FBS21rQixVQUNsQkksV0FDQXZPLE1BQU80eUIsWUFDUHRuQyxNQUNBeVIsU0FDQXEyQixPQUFPLEVBQ1AvSCxhQUFjbGxDLEtBQUtDLEtBQUt5VyxPQUFPLHlCQUEwQixDQUN2RDFkLEtBQU1vdkIsV0FDTmpqQixTQUdOLENBQ0YsQ0FFQXpDLEtBQUt3cUMsYUFBc0MsSUFBdkJ4cUMsS0FBS2tYLE9BQU90VyxPQUNoQ1osS0FBS2lyQixnQkFDUCxDQUVBLGdCQUFNK08sR0FDSixJQUFLLElBQUl5USxPQUFTLEVBQUdBLE9BQVN6cUMsS0FBS2tYLE9BQU90VyxPQUFRNnBDLFNBQVUsQ0FDMUQsTUFBTXZ3QyxNQUFRcVYsV0FBV3FCLGdCQUFnQjVRLEtBQUtrWCxPQUFPdXpCLFFBQVFubEIsV0FDN0QsR0FBYyxPQUFWcHJCLE1BQ0Y2TyxHQUFHQyxjQUFjd1UsTUFBTWxnQixLQUFLQyxLQUFLQyxTQUFTLDhCQUNyQyxDQUNMd0MsS0FBS2tYLE9BQU91ekIsUUFBUUMsV0FBYSxFQUNqQzFxQyxLQUFLa1gsT0FBT3V6QixRQUFRRSxjQUFnQixFQUNwQyxJQUNFLElBQUlDLE9BQVMsRUFDYkEsT0FBUzVxQyxLQUFLa1gsT0FBT3V6QixRQUFRdHpCLE1BQU12VyxPQUNuQ2dxQyxTQUNBLENBQ0EsTUFBTUMsa0JBQW9CM3dDLE1BQU04L0IsV0FDOUJoNkIsS0FBS2tYLE9BQU91ekIsUUFBUXR6QixNQUFNeXpCLFFBQVFub0MsT0FFcEN6QyxLQUFLa1gsT0FBT3V6QixRQUFRQyxZQUFjRyxZQUNsQzdxQyxLQUFLa1gsT0FBT3V6QixRQUFRdHpCLE1BQU15ekIsUUFBUUUsTUFBUUQsWUFDMUM3cUMsS0FBS2tYLE9BQU91ekIsUUFBUXR6QixNQUFNeXpCLFFBQVFHLFNBQ2hDL3FDLEtBQUtrWCxPQUFPdXpCLFFBQVF0ekIsTUFBTXl6QixRQUFRbm9DLE1BQVFvb0MsWUFDNUM3cUMsS0FBS2tYLE9BQU91ekIsUUFBUUUsZUFDbEIzcUMsS0FBS2tYLE9BQU91ekIsUUFBUXR6QixNQUFNeXpCLFFBQVFub0MsTUFBUW9vQyxXQUM5QyxDQUNBN3FDLEtBQUtrWCxPQUFPdXpCLFFBQVFGLE9BQVEsRUFDNUJ2cUMsS0FBS2tYLE9BQU91ekIsUUFBUWpJLGFBQWVsbEMsS0FBS0MsS0FBS3lXLE9BQzNDLDhCQUNBLENBQ0UxZCxLQUFNMEosS0FBS2tYLE9BQU91ekIsUUFBUS9rQixXQUMxQmpqQixNQUFPekMsS0FBS2tYLE9BQU91ekIsUUFBUUMsV0FDM0J6dUMsTUFBTytELEtBQUtrWCxPQUFPdXpCLFFBQVFFLGVBR2pDLENBQ0YsQ0FDQTNxQyxLQUFLZ3JDLGFBQWMsRUFDbkJockMsS0FBS2lyQixnQkFDUCxFQUdLLE1BQU04YSxnQkFDWCxXQUFBMWdDLENBQWE4TCxTQUFXLE1BQ3RCblIsS0FBS21SLFNBQVdBLFNBQ2hCblIsS0FBS3lsQyxPQUFRLEVBQ2J6bEMsS0FBS29tQyxpQkFBa0IsRUFDdkJwbUMsS0FBSzZKLFdBQVksRUFDakI3SixLQUFLK0osV0FBWSxFQUNqQi9KLEtBQUtpSyxjQUFlLEVBQ3BCakssS0FBS2lyQyxTQUFVLENBQ2pCLENBRUEsT0FBSUMsR0FLRixZQUpJcnRDLElBQWNtQyxLQUFLbXJDLE9BQ2pCbnJDLEtBQUs5RixPQUFTOEYsS0FBSzlGLE1BQU1reEMsTUFBT3ByQyxLQUFLbXJDLEtBQU9uckMsS0FBSzlGLE1BQU1reEMsT0FBUyxFQUMvRHByQyxLQUFLbXJDLE1BQU8sR0FFWm5yQyxLQUFLbXJDLElBQ2QsQ0FFQSxPQUFJRCxDQUFLaHJCLEdBQ1BsZ0IsS0FBS21yQyxLQUFPanJCLENBQ2QsQ0FFQSxTQUFJbXJCLEdBS0YsWUFKSXh0QyxJQUFjbUMsS0FBS3NyQyxTQUNqQnRyQyxLQUFLOUYsT0FBUzhGLEtBQUs5RixNQUFNa3hDLE1BQU9wckMsS0FBS3NyQyxPQUFTdHJDLEtBQUs5RixNQUFNa3hDLFFBQVUsRUFDbEVwckMsS0FBS3NyQyxRQUFTLEdBRWR0ckMsS0FBS3NyQyxNQUNkLENBRUEsU0FBSUQsQ0FBT25yQixHQUNUbGdCLEtBQUtzckMsT0FBU3ByQixDQUNoQixDQUVBLFVBQUl6VyxHQUNGLE9BQVF6SixLQUFLa3JDLE1BQVFsckMsS0FBS3FyQyxLQUM1QixDQUVBLFVBQUk1aEMsQ0FBUXlXLEdBQ1ZsZ0IsS0FBS21yQyxNQUFPLEVBQ1puckMsS0FBS3NyQyxRQUFTLENBQ2hCLENBRUEsVUFBSUMsR0FDRixTQUFJdnJDLEtBQUs5RixRQUFTOEYsS0FBSzlGLE1BQU1zeEMsTUFBWXhyQyxLQUFLOUYsTUFBTXN4QyxLQUFPLENBRTdELENBRUEsUUFBSUMsR0FNRixZQUxJNXRDLElBQWNtQyxLQUFLMHJDLFFBR3JCMXJDLEtBQUswckMsT0FBUSxHQUVSMXJDLEtBQUswckMsS0FDZCxDQUVBLFFBQUlELENBQU12ckIsR0FDUmxnQixLQUFLMHJDLE1BQVF4ckIsQ0FDZixDQUVBLFNBQUlobUIsR0FJRixPQUhJOEYsS0FBS21SLFdBQWFuUixLQUFLMnJDLFNBQ3pCM3JDLEtBQUsyckMsT0FBU3A4QixXQUFXcUIsZ0JBQWdCNVEsS0FBS21SLFdBRXpDblIsS0FBSzJyQyxNQUNkLENBRUEsUUFBSXIxQyxHQUNGLE9BQUkwSixLQUFLZ1IsTUFBY2hSLEtBQUtnUixNQUFNMWEsS0FDOUIwSixLQUFLOUYsTUFBYzhGLEtBQUs5RixNQUFNNUQsS0FDM0IsT0FDVCxDQUVBLE9BQUlvUCxHQUNGLE9BQUkxRixLQUFLZ1IsT0FDSGhSLEtBQUtnUixNQUFNbkMsVUFBVXVELFFBQVFDLElBQ3hCclMsS0FBS2dSLE1BQU1uQyxVQUFVdUQsUUFBUUMsSUFHcENyUyxLQUFLOUYsTUFBYzhGLEtBQUs5RixNQUFNb0wsS0FBS0ksSUFDaEMsb0NBQ1QsQ0FFQSxTQUFJc0wsR0FJRixPQUhLaFIsS0FBSzRyQyxRQUFVNXJDLEtBQUttUixXQUN2Qm5SLEtBQUs0ckMsT0FBU3I4QixXQUFXMEIsZ0JBQWdCalIsS0FBS21SLFdBRXpDblIsS0FBSzRyQyxNQUNkLENBRUEsWUFBSUMsR0FDRixPQUFJN3JDLEtBQUtrckMsSUFDQTV0QyxLQUFLQyxLQUFLQyxTQUFTLHVDQUV4QndDLEtBQUtxckMsTUFDQS90QyxLQUFLQyxLQUFLQyxTQUFTLHlDQUVyQkYsS0FBS0MsS0FBS0MsU0FBUyx5Q0FDNUIsQ0FFQSxhQUFJc3VDLEdBQ0YsT0FBSTlyQyxLQUFLa3JDLElBQVk1dEMsS0FBS0MsS0FBS0MsU0FBUyxrQ0FDcEN3QyxLQUFLcXJDLE1BQWMvdEMsS0FBS0MsS0FBS0MsU0FBUywrQkFDbkNGLEtBQUtDLEtBQUtDLFNBQVMsb0NBQzVCLENBRUEsY0FBSTZZLEdBQ0YsT0FBSXJXLEtBQUs2SixXQUFhN0osS0FBS29tQyxnQkFDbEJ0eUIsVUFBVXNQLGdCQUFnQnJQLFFBRS9CL1QsS0FBSytKLFVBQWtCK0osVUFBVXNQLGdCQUFnQm5QLEtBQ2pEalUsS0FBS2lLLGFBQXFCNkosVUFBVXNQLGdCQUFnQmxaLFFBQ2pENEosVUFBVXNQLGdCQUFnQm1sQixVQUNuQyxDQUVBLFlBQUk3akMsR0FDRixJQUFJQSxTQUFXLEVBUWYsT0FQSTFFLEtBQUt5bEMsT0FBTy9nQyxXQUNaMUUsS0FBS29tQyxpQkFBaUIxaEMsV0FDdEIxRSxLQUFLeXJDLE1BQU0vbUMsV0FDWDFFLEtBQUtxckMsT0FBTzNtQyxXQUNaMUUsS0FBS2tyQyxLQUFLeG1DLFdBQ1YxRSxLQUFLaXJDLFNBQVN2bUMsV0FDZDFFLEtBQUtnakMsV0FBV3QrQixXQUNiQSxRQUNULENBRUEsU0FBSXNNLENBQU9qTyxHQUNUL0MsS0FBSzRyQyxPQUFTN29DLENBQ2hCLENBRUEscUJBQU84UixDQUFnQnRELFNBQ3JCLE1BQU13VCxPQUFTLElBQUlnaEIsZ0JBRW5CLE9BREF4MkIsV0FBV21DLHFCQUFxQnFULE9BQVF4VCxTQUNqQ3dULE1BQ1QsQ0FFQSw0QkFBT2duQixDQUF1Qnh2QyxPQUM1QixJQUFLQSxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsbUJBQW9CLE9BQU8sS0FJdkUsT0FIdUJobUIsTUFBTUksY0FDRUUsUUFBUSxZQUNac1ksaUJBQWlCLFVBRTlDLENBRUEsZUFBQTJCLENBQWlCdkYsU0FDZmhDLFdBQVc4QixzQkFBc0JyUixLQUFNdVIsUUFDekMsQ0FFQSxVQUFBNmpCLENBQVlILE1BRUMsY0FBVEEsTUFDUyxjQUFUQSxNQUNTLGlCQUFUQSxNQUNTLG9CQUFUQSxNQUVBajFCLEtBQUtvbUMsaUJBQWtCLEVBQ3ZCcG1DLEtBQUs2SixXQUFZLEVBQ2pCN0osS0FBSytKLFdBQVksRUFDakIvSixLQUFLaUssY0FBZSxFQUNwQmpLLEtBQUtxbUMsWUFBYSxFQUNsQnJtQyxLQUFLaTFCLE9BQVEsR0FDSyxTQUFUQSxLQUNMajFCLEtBQUtxckMsT0FDUHJyQyxLQUFLcXJDLE9BQVEsRUFDYnJyQyxLQUFLa3JDLEtBQU0sR0FDRmxyQyxLQUFLa3JDLEtBQ2RsckMsS0FBS3FyQyxPQUFRLEVBQ2JyckMsS0FBS2tyQyxLQUFNLEdBQ05sckMsS0FBS3FyQyxPQUFRLEVBQ2ZyckMsS0FBS2kxQixPQUFTajFCLEtBQUtpMUIsTUFDYixTQUFUQSxNQUFtQmoxQixLQUFLeXJDLE9BQVN6ckMsS0FBS3VyQyxRQUN4Q3hpQyxHQUFHQyxjQUFjc0ssS0FDZmhXLEtBQUtDLEtBQUt5VyxPQUFPLGtDQUFtQyxDQUNsRHczQixJQUFLeHJDLEtBQUs5RixNQUFNc3hDLE1BSXhCLEVDNytCRixNQUFNUSwyQkFFRiwrSEFFRyxNQUFNekcsU0FDWCw0QkFBTzBHLENBQXVCdmdCLFlBQWEzUixNQUNyQzJSLFlBQVlqc0IsUUFBUSxPQUFRLGdCQUFrQm5DLEtBQUtzRyxLQUFLMkUsT0FDMUR3UixLQUFLcmEsS0FBSyxlQUFlb2pCLFNBQ3pCL0ksS0FDR3JhLEtBQUssZ0JBQ0x3L0IsWUFDQyw2QkFBNkI1aEMsS0FBS0MsS0FBS0MsU0FDckMsaUNBR051YyxLQUNHcmEsS0FBSyxvQkFDTHcvQixZQUNDLGdDQUFnQzhNLHFDQUlsQ3RnQixZQUFZanNCLFFBQVEsT0FBUSx5QkFBMkJuQyxLQUFLc0csS0FBSzJFLE1BQ25Fd1IsS0FBS3JhLEtBQUssZUFBZW9qQixTQUd2QjRJLFlBQVlqc0IsUUFBUSxPQUFRLGFBQWVuQyxLQUFLc0csS0FBSzJFLE9BQ3ZEd1IsS0FDR3JhLEtBQUssZ0JBQ0x3L0IsWUFBWTVoQyxLQUFLQyxLQUFLQyxTQUFTLHlCQUNsQ3VjLEtBQUtyYSxLQUFLLG9CQUFvQm9qQixTQUVsQyxDQUVBLHNCQUFPb3BCLEdBQ0wsTUFBTTdvQyxTQUFXLENBQ2ZPLEtBQU10RyxLQUFLc0csS0FBS3FLLEdBQ2hCOEIsT0FBUXpTLEtBQUtDLEtBQUtDLFNBQVMsdUJBQzNCOEYsUUFBU2hHLEtBQUs4a0IsTUFBTStwQixRQUNwQjl0QyxLQUFNNlIsTUFBTUMsbUJBQW1CQyxRQUMvQmxSLE1BQU8sQ0FDTHdDLEtBQU0sQ0FDSjBxQyxZQUFZLEVBQ1pDLHFCQUFxQixFQUNyQkMsVUFBVSxJQUdkOTdCLFFBQVN3N0IsNEJBR1h4b0MsWUFBWWlOLE9BQU9wTixTQUNyQixDQVFBLFlBQU9zWCxHQUVMcmQsS0FBS29FLEtBQU8sTUFDZCxDQVdBLDBCQUFhNnFDLENBQWUzMUMsSUFBS21qQixNQUMvQkEsS0FBS0MsR0FDSCxRQUNBLHVCQUNBdXJCLFNBQVNpSCxrQkFBa0J0ekMsS0FBSzhHLE9BR2xDK1osS0FBS0MsR0FDSCxRQUNBLGNBQ0F1ckIsU0FBU2tILHlCQUF5QnZ6QyxLQUFLOEcsT0FFekMrWixLQUFLQyxHQUNILFFBQ0EsZ0JBQ0F1ckIsU0FBU21ILHVCQUF1Qnh6QyxLQUFLOEcsT0FFdkMrWixLQUFLQyxHQUNILFFBQ0EsZ0JBQ0F1ckIsU0FBU29ILHdCQUF3Qnp6QyxLQUFLOEcsT0FHeEMrWixLQUFLQyxHQUNILFFBQ0EsZUFDQXVyQixTQUFTb0gsd0JBQXdCenpDLEtBQUs4RyxPQUV4QytaLEtBQUtDLEdBQUcsUUFBUyxlQUFnQnVyQixTQUFTcUgsc0JBQXNCMXpDLEtBQUs4RyxPQUVyRStaLEtBQUtDLEdBQ0gsUUFDQSxvQkFDQXVyQixTQUFTc0gsMkJBQTJCM3pDLEtBQUs4RyxPQUUzQytaLEtBQUtDLEdBQUcsUUFBUyxpQkFBa0J1ckIsU0FBU3VILGtCQUFrQjV6QyxLQUFLOEcsT0FHbkUrWixLQUFLQyxHQUFHLFFBQVMsbUJBQW9CdXJCLFNBQVN3SCxnQkFBZ0I3ekMsS0FBSzhHLE9BRW5FK1osS0FBS0MsR0FBRyxXQUFZLGNBQWV1ckIsU0FBU3lILGFBQWE5ekMsS0FBSzhHLE9BRTlEK1osS0FBS0MsR0FBRyxRQUFTLHFCQUFzQnVyQixTQUFTMEgsVUFBVS96QyxLQUFLOEcsT0FHL0Q2NkIsaUJBQWlCOUQsZUFBZWhkLE1BQ2hDK2Msa0JBQWtCQyxlQUFlaGQsS0FDbkMsQ0FFQSxtQkFBT2l6QixDQUFjendDLE9BQ25CQSxNQUFNRSxpQkFDTixNQUFNMFUsU0FBVzVVLE1BQU1JLGNBQWNJLFFBQVFvVSxTQUM3QyxHQUFJQSxTQUFVLENBQ1osTUFBTWpYLE1BQVFxVixXQUFXcUIsZ0JBQWdCTyxVQUNyQ2pYLE1BQU0rK0IsU0FBUy8rQixNQUFNNkQsTUFBTUMsUUFBTyxFQUN4QyxDQUNGLENBRUEsZ0NBQWFrdkMsQ0FBcUJ4aEIsYUFLaEMsR0FKQTNpQixHQUFHNGlCLEtBQUt3aEIsZUFJSjd2QyxLQUFLc0csS0FBSzJFLE1BQTZCLElBQXJCbWpCLFlBQVlydEIsS0FBWSxDQUM1QyxNQUFNZ08sS0FBT21mLEVBQUVFLFlBQVlsYixTQUFTLEdBQ3BDLEdBQUluRSxLQUFLMEMsVUFBVXdULFNBQVMsVUFDSSxTQUExQmxXLEtBQUt0UCxRQUFRMitCLFNBQXFCLENBQ3BDLEdBQUlydkIsS0FBSzBDLFVBQVV3VCxTQUFTLGFBQzFCLEdBQUlsVyxLQUFLdFAsUUFBUTJvQyxXQUFZLENBQzNCLE1BQU1uUixVQUFZK04sbUJBQW1CdlcsaUJBQ25DTCxZQUFZemQsSUFFUjhXLE9BQVNzZCxnQkFBZ0J0VyxpQkFDN0J3SSxVQUFVbVIsWUFFWixHQUFJM2dCLE9BQU8yVyxTQUFVLENBQ25CLE1BQU0rSSxlQUFpQixJQUFJeEMsbUJBQ3pCdlcsWUFBWXpkLEdBQ1o4VyxPQUFPNUksVUFDUDRJLE9BQU8wZixzQkFFSEEsZUFBZXpwQixVQUNoQnVaLFVBQVU2WSxxQkFBcUI3WSxVQUFVOFksYUFDaEQsQ0FDRixLQUFPLENBQ0wsTUFBTTlZLFVBQVkrTixtQkFBbUJ2VyxpQkFDbkNMLFlBQVl6ZCxJQUVkLEdBQUlzbUIsVUFBVWtRLGVBQWdCLENBQzVCLE1BQU1BLGVBQWlCLElBQUl4QyxtQkFDekJ2VyxZQUFZemQsR0FDWixLQUNBc21CLFVBQVVrUSxzQkFFTkEsZUFBZXpwQixVQUNoQnVaLFVBQVU2WSxxQkFBcUI3WSxVQUFVOFksYUFDaEQsQ0FDRixDQUVGLEdBQUloaEMsS0FBSzBDLFVBQVV3VCxTQUFTLFVBQVcsQ0FDckMsTUFBTXdDLE9BQVNzZCxnQkFBZ0J0VyxpQkFBaUJMLFlBQVl6ZCxJQUN0RHcyQixlQUFpQixJQUFJeEMsbUJBQ3pCbGQsT0FBTzhkLGdCQUNQblgsWUFBWXpkLEdBQ1o4VyxPQUFPMGYsc0JBRUhBLGVBQWV6cEIsVUFDaEIrSixPQUFPNGUsZUFBZXlKLHFCQUNuQnJvQixPQUFPNGUsZUFBZTBKLGFBRWhDLENBQ0YsQ0FFSixDQUNGLENBRUEsOEJBQWFDLENBQW1CejlCLFFBQVNrSyxNQWdDdkMsR0EvQkFoUixHQUFHNGlCLEtBQUt3aEIsZUFFUnBWLG9CQUFvQk8sY0FBY3ZlLE1BRTlCbEssUUFBUXBRLFFBQVEsT0FBUSxtQkFDMUJzYSxLQUFLcmEsS0FBSyxjQUFjNnRDLFlBQVksbUJBQ3BDeHpCLEtBQUssR0FBR2hkLFFBQVFxd0MsZUFBZ0IsR0FJbENyekIsS0FDR3JhLEtBQUssWUFDTCt4QixPQUFNbDFCLE9BQ0xBLE1BQU1JLGNBQ0hFLFFBQVEsYUFDUjhXLGNBQWMscUJBQ2Q1RSxVQUFVMEwsT0FBTyxVQUV4QlYsS0FDR3JhLEtBQUssYUFDTDh0QyxZQUFXanhDLE9BQ1ZBLE1BQU1JLGNBQ0hnWCxjQUFjLHFCQUNkNUUsVUFBVStULE9BQU8sVUFRcEJ4bEIsS0FBS3NHLEtBQUsyRSxLQUFNLENBQ2xCLE1BQU04RCxLQUFPME4sS0FBSyxHQUFHcEcsY0FBYyxtQkFDbkMsR0FBSXRILE1BRUFBLEtBQUswQyxVQUFVd1QsU0FBUyxjQUNLLFNBQTNCbFcsS0FBS3RQLFFBQVFvb0MsV0FDZjk0QixLQUFLdFAsUUFBUW9aLGFBQ2IsQ0FDQSxNQUFNaFYsS0FBT3FTLFNBQVNxQixlQUFleEksTUFFWCxXQUF0QkEsS0FBS3RQLFFBQVFtWixPQUNmL1UsS0FBS3NzQyxZQUFjcGhDLEtBQUt0UCxRQUFRd1AsUUFDNUJGLEtBQUt0UCxRQUFRd1AsUUFDYkYsS0FBS3RQLFFBQVFrUSxTQUVPLGNBQXRCWixLQUFLdFAsUUFBUW1aLE9BQ2YvVSxLQUFLdXNDLFlBQWNyaEMsS0FBS3RQLFFBQVF3UCxRQUM1QkYsS0FBS3RQLFFBQVF3UCxRQUNiRixLQUFLdFAsUUFBUWtRLFNBRW5CWixLQUFLdFAsUUFBUW9vQyxVQUFZLE9BRXpCSSxTQUFTb0ksdUJBQXVCeHNDLEtBQ2xDLENBRUosQ0FFQSxNQUFNeXNDLFNBQVc3ekIsS0FBS3JhLEtBQUssZ0JBQzNCLElBQUssTUFBTTZSLFdBQVdxOEIsU0FDcEIsSUFBS3R3QyxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbkJnSixRQUFRZ3VCLE1BQU1DLFFBQVUsT0FDeEIsTUFBTXZ5QixRQUFVc0UsUUFBUXM4QixhQUFhLGlCQUNqQzVnQyxTQUNFM1AsS0FBS29QLE9BQU94UCxJQUFJK1AsU0FBU2dzQixVQUMzQjFuQixRQUFRZ3VCLE1BQU1DLFFBQVUsUUFHOUIsQ0FHRixNQUFNc08sT0FBUy96QixLQUFLcmEsS0FBSyxZQUN6QixJQUFLLE1BQU1xdUMsUUFBUUQsT0FDWnh3QyxLQUFLc0csS0FBSzJFLE9BQ2J3bEMsS0FBS3hPLE1BQU1DLFFBQVUsUUFJekIsTUFBTXdPLGdCQUFrQmowQixLQUFLcmEsS0FBSyxzQkFDbEMsSUFBSyxNQUFNdXVDLFFBQVFELGdCQUNiMXdDLEtBQUtzRyxLQUFLMkUsT0FBTTBsQyxLQUFLMU8sTUFBTUMsUUFBVSxRQUczQyxNQUFNME8sY0FBZ0JuMEIsS0FBS3JhLEtBQUssb0JBQ2hDLElBQUssTUFBTXV1QyxRQUFRQyxjQUNYNXdDLEtBQUtzRyxLQUFLMkUsTUFBU2pMLEtBQUtzRyxLQUFLdXFDLFdBQWE3d0MsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBQTRCK3dDLEtBQUsxTyxNQUFNQyxRQUFVLFFBRzdILE1BQU00TyxpQkFBbUJyMEIsS0FBS3JhLEtBQUssdUJBQ25DLElBQUssTUFBTXF1QyxRQUFRSyxpQkFBa0IsQ0FFbkMsSUFBSWwwQyxNQUFRcXJDLFNBQVM4SSxpQkFBaUJOLEtBQUtoeEMsU0FBU29VLFVBQy9DalgsUUFBT0EsTUFBUXFyQyxTQUFTbjVCLGtCQUFrQjJoQyxLQUFLbHhDLFFBQVEsZ0JBQ3ZEM0MsUUFDSEEsTUFBUXFyQyxTQUFTOEksaUJBQWlCTixLQUFLeHpCLGNBQWN4ZCxRQUFRb1UsV0FFMURqWCxRQUNIQSxNQUFRcXJDLFNBQVM4SSxpQkFDZk4sS0FBS2x4QyxRQUFRLHFCQUFxQkUsUUFBUW9VLFdBR3pDalgsUUFDSEEsTUFBUXFyQyxTQUFTOEksaUJBQ2ZOLEtBQUtseEMsUUFBUSxxQkFBcUJFLFFBQVFvVSxZQUt6Q2pYLFFBQVVBLE1BQU0rK0IsU0FBWTM3QixLQUFLc0csS0FBSzJFLFFBQ3pDd2xDLEtBQUt4TyxNQUFNQyxRQUFVLE9BR3pCLENBRUEsSUFBS2xpQyxLQUFLc0csS0FBSzJFLEtBQU0sQ0FFbkIsTUFBTStsQyxVQUFZdjBCLEtBQUtyYSxLQUFLLGVBQzVCLElBQUssTUFBTXF1QyxRQUFRTyxVQUFXLENBRTVCLElBQUlwMEMsTUFBUXFyQyxTQUFTOEksaUJBQ25CTixLQUFLaHhDLFNBQVNvVSxVQUFZNDhCLEtBQUtoeEMsU0FBU2tRLFNBRXJDL1MsUUFDSEEsTUFBUXFyQyxTQUFTbjVCLGtCQUFrQjJoQyxLQUFLbHhDLFFBQVEsZ0JBRTdDM0MsUUFDSEEsTUFBUXFyQyxTQUFTOEksaUJBQWlCTixLQUFLeHpCLGNBQWN4ZCxRQUFRb1UsV0FFMURqWCxRQUNIQSxNQUFRcXJDLFNBQVM4SSxpQkFDZk4sS0FBS2x4QyxRQUFRLHFCQUFxQkUsUUFBUW9VLFdBR3pDalgsUUFDSEEsTUFBUXFyQyxTQUFTOEksaUJBQ2ZOLEtBQUtseEMsUUFBUSxxQkFBcUJFLFFBQVFvVSxZQUt6Q2pYLFFBQVVBLE1BQU0rK0IsVUFBYy8rQixRQUFVb0QsS0FBS3NHLEtBQUsyRSxRQUNyRHdsQyxLQUFLeE8sTUFBTUMsUUFBVSxPQUd6QixDQUVBLE1BQU0rTyxhQUFleDBCLEtBQUtyYSxLQUFLLG1CQUMvQixJQUFNcEMsS0FBS3NHLEtBQUt1cUMsWUFBYTd3QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDckQsSUFBSyxNQUFNdy9CLFVBQVU2UixhQUNuQjdSLE9BQU8zdEIsVUFBVUMsSUFBSSxZQUNyQjB0QixPQUFPM3RCLFVBQVUrVCxPQUFPLGNBRzlCLENBQ0YsQ0FFQSwyQkFBVzByQixHQUNULE1BQU8sQ0FDTG56QyxVQUFXLGlCQUNYRSxTQUFVLGdCQUNWNm5DLFFBQVMsYUFFYixDQUVBLHNCQUFPMkosQ0FBaUJ4d0MsT0FDdEIsTUFBTTRnQixNQUFRbFosU0FBUzFILE1BQU1JLGNBQWNJLFFBQVFsQixLQUM3QzR5QyxnQkFBa0JseUMsTUFBTUksY0FBY0UsUUFBUSxxQkFDcEQsSUFBSyxNQUFNeWpCLEtBQUttdUIsZ0JBQWdCdDVCLGlCQUFpQixPQUMvQ21MLEVBQUVpZixNQUFNbVAsT0FBUyxPQUVuQkQsZ0JBQ0c5NkIsY0FBYyxjQUFjd0osV0FDNUJ4SixjQUFjLE9BQU80ckIsTUFBTW1QLE9BQVMsaUJBQ3ZDLE1BQU01cEIsUUFBVXZvQixNQUFNSSxjQUFjRSxRQUFRLFlBQzVDLElBQUssTUFBTWtHLEtBQUsraEIsUUFBUTNQLGlCQUFpQixXQUN2Q3BTLEVBQUV3OEIsTUFBTUMsUUFBVSxPQUNsQno4QixFQUFFaEcsUUFBUWdFLE9BQVMsUUFFckIsTUFBTTR0QyxnQkFBa0I3cEIsUUFBUW5SLGNBQzlCLHFCQUFxQndKLFdBRXZCd3hCLGdCQUFnQnBQLE1BQU1DLFFBQVUsUUFDaENtUCxnQkFBZ0I1eEMsUUFBUWdFLE9BQVMsTUFHbkMsQ0FFQSxpQ0FBTzhyQyxDQUE0QnR3QyxPQUNqQ0EsTUFBTUUsaUJBRU4sTUFBTTRQLEtBQU85UCxNQUFNSSxjQUFjRSxRQUFRLGNBQ3pDLEdBQUl3UCxLQUFLMEMsVUFBVXdULFNBQVMsVUFFMUIsWUFEQThmLGdCQUFnQjhCLGVBQWU5M0IsS0FBTTlQLE9BS3ZDLE1BQU1xeUMsY0FBZ0JyeUMsTUFBTUksY0FDekJFLFFBQVEsdUJBQ1JzWSxpQkFBaUIsa0JBQ3BCLElBQUssTUFBTTA1QixXQUFXRCxjQUNwQkMsUUFBUTkvQixVQUFVK1QsT0FBTyxlQUUzQnZtQixNQUFNSSxjQUFjRSxRQUFRLGtCQUFrQmtTLFVBQVVDLElBQUksZUFHNUR6UyxNQUFNSSxjQUFjRSxRQUFRLHFCQUFxQmtTLFVBQVUwTCxPQUFPLFFBR2xFLE1BQU1xMEIsWUFBY3Z5QyxNQUFNSSxjQUN2QkUsUUFBUSwyQkFDUjhXLGNBQWMsb0JBQ2pCbTdCLFlBQVl2UCxNQUFNQyxRQUFVLFFBQzVCLE1BQU1sZCxPQUFTd3NCLFlBQVluN0IsY0FBYyxVQW1CekMsT0FWQTJPLE9BQU92bEIsUUFBUUksT0FBUyxZQUN4Qm1sQixPQUFPdmxCLFFBQVFneUMsV0FBYXh5QyxNQUFNSSxjQUFjSSxRQUFRSSxPQUN4RG1sQixPQUFPdmxCLFFBQVFpeUMsZUFBaUJ6eUMsTUFBTUksY0FBY0ksUUFBUUksT0FDNURtbEIsT0FBT3ZsQixRQUFRdVgsUUFBVS9YLE1BQU1JLGNBQWNJLFFBQVF1WCxRQUNyRGdPLE9BQU92bEIsUUFBUWt5QyxXQUFhMXlDLE1BQU1JLGNBQWNJLFFBQVFreUMsV0FDeEQzc0IsT0FBT3ZsQixRQUFRK0osVUFBWXZLLE1BQU1JLGNBQWNJLFFBQVErSixVQUN2RHdiLE9BQU92bEIsUUFBUXNYLE9BQVM5WCxNQUFNSSxjQUFjSSxRQUFRcW5DLFNBQ3BEOWhCLE9BQU92bEIsUUFBUW15QyxTQUFXM3lDLE1BQU1JLGNBQWNJLFFBQVF3Z0MsV0FHOUNoaEMsTUFBTUksY0FBY0ksUUFBUUksUUFDbEMsSUFBSyxXQUNIbWxCLE9BQU9zTCxVQUFZLEdBQUd0d0IsS0FBS0MsS0FBS0MsU0FDOUI5SSxLQUFLMEcsWUFBWW1CLE1BQU1JLGNBQWNJLFFBQVFJLGNBQ3hDWixNQUFNSSxjQUFjSSxRQUFRK0osY0FDakN2SyxNQUFNSSxjQUFjSSxRQUFRa3lDLGVBRTlCLE1BQ0YsSUFBSyxZQUNIM3NCLE9BQU9zTCxVQUFZLEdBQUd0d0IsS0FBS0MsS0FBS0MsU0FDOUI5SSxLQUFLMEcsWUFBWW1CLE1BQU1JLGNBQWNJLFFBQVFJLGNBQ3hDWixNQUFNSSxjQUFjSSxRQUFRd2dDLGVBQ2pDaGhDLE1BQU1JLGNBQWNJLFFBQVFreUMsZUFRcEMsQ0FFQSxzQkFBYWhDLENBQVcxd0MsT0FDdEJBLE1BQU1FLGlCQUNOLE1BQU1DLEVBQUlILE1BQU1JLGNBRWhCLEdBQUlELEVBQUVxUyxVQUFVd1QsU0FBUyxpQkFDdkIsT0FBSTdsQixFQUFFcVMsVUFBVXdULFNBQVMsWUFDaEJ6TyxVQUFVcTdCLHNCQUFzQnp5QyxHQUVoQ29YLFVBQVVzN0Isb0JBQW9CMXlDLEVBRzNDLENBRUEsd0JBQU9vd0MsQ0FBbUJ2d0MsT0FDeEIsTUFBTThQLEtBQU85UCxNQUFNSSxjQUFjRSxRQUFRLGNBQ3pDLEdBQUl3UCxLQUFLMEMsVUFBVXdULFNBQVMsVUFFMUIsWUFEQThmLGdCQUFnQjhCLGVBQWU5M0IsS0FBTTlQLE9BSXZDLEdBQTRDLEtBQXhDQSxNQUFNSSxjQUFjSSxRQUFRdVgsUUFFOUIsWUFEQXZMLEdBQUdDLGNBQWN3VSxNQUFNbGdCLEtBQUtDLEtBQUtDLFNBQVMsMkJBSzVDLE1BQU1veEMsY0FBZ0JyeUMsTUFBTUksY0FDekJFLFFBQVEsdUJBQ1JzWSxpQkFBaUIsa0JBQ3BCLElBQUssTUFBTTA1QixXQUFXRCxjQUNwQkMsUUFBUTkvQixVQUFVK1QsT0FBTyxlQUUzQnZtQixNQUFNSSxjQUFjb1MsVUFBVUMsSUFBSSxlQUdsQyxNQUFNOC9CLFlBQWN2eUMsTUFBTUksY0FDdkJFLFFBQVEsMkJBQ1I4VyxjQUFjLG9CQUNqQm03QixZQUFZdlAsTUFBTUMsUUFBVSxRQUM1QixNQUFNbGQsT0FBU3dzQixZQUFZbjdCLGNBQWMsVUFFekMyTyxPQUFPdmxCLFFBQVFJLE9BQVMsWUFDeEJtbEIsT0FBT3ZsQixRQUFRZ3lDLFdBQWEsVUFDNUJ6c0IsT0FBT3ZsQixRQUFRaXlDLGVBQWlCenlDLE1BQU1JLGNBQWNJLFFBQVFJLE9BQzVEbWxCLE9BQU92bEIsUUFBUXVYLFFBQVUvWCxNQUFNSSxjQUFjSSxRQUFRdVgsUUFDckRnTyxPQUFPdmxCLFFBQVFreUMsV0FBYTF5QyxNQUFNSSxjQUFjSSxRQUFRa3lDLFdBQ3hEM3NCLE9BQU92bEIsUUFBUStKLFVBQVl2SyxNQUFNSSxjQUFjSSxRQUFRK0osVUFFdkR3YixPQUFPc0wsVUFBWSxHQUFHdHdCLEtBQUtDLEtBQUtDLFNBQzlCOUksS0FBSzBHLFlBQVltQixNQUFNSSxjQUFjSSxRQUFRSSxjQUN4Q1osTUFBTUksY0FBY0ksUUFBUStKLGNBQ2pDdkssTUFBTUksY0FBY0ksUUFBUWt5QyxjQUVoQyxDQUVBLDZCQUFPdkMsQ0FBd0Jud0MsT0FFN0JBLE1BQU1FLGlCQUNOLE1BQU00eUMsV0FDSjl5QyxNQUFNSSxjQUFjNGQsY0FBYyswQix1QkFBdUIsZ0JBQzNELElBQUlueUIsTUFDSixJQUFLQSxNQUFRLEVBQUdBLE1BQVFreUIsV0FBV3p1QyxPQUFRdWMsUUFBUyxDQUNsRCxNQUFNNUwsUUFBVTg5QixXQUFXbHlCLE9BQ3ZCNUwsUUFBUXhVLFFBQVF3eUMsV0FBYWh6QyxNQUFNSSxjQUFjSSxRQUFRd3lDLFNBQzNEaCtCLFFBQVF4QyxVQUFVQyxJQUFJLGVBRXRCdUMsUUFBUXhDLFVBQVUrVCxPQUFPLGNBRTdCLENBQ0F2bUIsTUFBTUksY0FBYzRkLGNBQWN4ZCxRQUFRc1ksU0FDeEM5WSxNQUFNSSxjQUFjSSxRQUFRd3lDLFFBQ2hDLENBRUEsa0NBQWEzQyxDQUF1QnJ3QyxPQUNsQyxNQUFNOFAsS0FBTzlQLE1BQU1JLGNBQWNFLFFBQVEsY0FFekMsR0FBSXdQLEtBQUswQyxVQUFVd1QsU0FBUyxVQUN0QmxXLEtBQUswQyxVQUFVd1QsU0FBUyxhQUFjLENBQ3hDLE1BQU1pdEIsVUFBWWhLLG1CQUFtQi94QixZQUFZcEgsTUFDN0M5UCxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsWUFDekNpdEIsVUFBVWpHLGlCQUFpQixHQUNsQmh0QyxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsYUFDaERpdEIsVUFBVWpHLGtCQUFrQixFQUVoQyxDQUVKLENBRUEsb0NBQWFvRCxDQUF5QnB3QyxPQUNwQ0EsTUFBTUUsaUJBRU4sTUFBTTRQLEtBQU85UCxNQUFNSSxjQUFjRSxRQUFRLGNBQ3JDd1AsS0FBSzBDLFVBQVV3VCxTQUFTLFdBQ3RCbFcsS0FBSzBDLFVBQVV3VCxTQUFTLGNBQzFCK2YsbUJBQW1Cc0IsaUJBQWlCcm5DLE9BR2xDOFAsS0FBSzBDLFVBQVV3VCxTQUFTLFdBQzFCOGYsZ0JBQWdCdUIsaUJBQWlCcm5DLFFBSWpDOFAsS0FBSzBDLFVBQVV3VCxTQUFTLFVBQ3RCbFcsS0FBSzBDLFVBQVV3VCxTQUFTLGNBQzFCaWpCLG1CQUFtQjVCLGlCQUFpQnJuQyxPQUlwQzhQLEtBQUswQyxVQUFVd1QsU0FBUyxVQUl4QmxXLEtBQUswQyxVQUFVd1QsU0FBUyxjQUMxQnpPLFVBQVU4dkIsaUJBQWlCcm5DLE1BRS9CLENBUUEsd0JBQU82UCxDQUFtQkMsTUFHeEIsTUFBTXVvQixTQUFXdm9CLEtBQUt0UCxRQUFRdVUsT0FDMUIzQyxLQUFLdWQsTUFBTUMsU0FBUzlmLEtBQUt0UCxRQUFRdVUsU0FDakNqRixLQUFLdFAsUUFFVCxHQUFJNjNCLFNBQVN6akIsU0FBVSxPQUFPbzBCLFNBQVM4SSxpQkFBaUJ6WixTQUFTempCLFVBR2pFLE1BQU03RSxTQUFXc29CLFNBQVNyb0IsUUFDMUIsR0FBSUQsU0FBVSxDQUNaLE1BQU9FLFFBQVNELFNBQVdELFNBQVNHLE1BQU0sS0FDMUMsR0FBZ0IsVUFBWkQsUUFDRixPQUFPbFAsS0FBS29QLE9BQU9DLE9BQU9KLFNBQ3JCLENBQ0wsTUFBTUssTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNb0UsTUFBUXBFLE1BQU1HLG9CQUFvQixRQUFTUixTQUNqRCxPQUFLeUUsTUFDRUEsTUFBTTlXLE9BQVMsSUFBSThTLE1BQU1GLFdBQVc1UyxNQUR4QixJQUVyQixDQUNGLENBR0EsTUFBTStTLFFBQVUybkIsU0FBUzNuQixRQUN6QixHQUFJQSxRQUFTLE9BQU8zUCxLQUFLb1AsT0FBT3hQLElBQUkrUCxTQUVwQyxNQUFNNEMsUUFBVXhELEtBQUt4UCxRQUFRLFlBQ3ZCc2YsVUFBWXRNLFFBQVVBLFFBQVE5UyxRQUFRb2YsVUFBWSxLQUN4RCxHQUFJQSxVQUFXLENBQ2IsTUFBTXVQLFlBQWNwdUIsS0FBSzhlLFNBQVNsZixJQUFJaWYsV0FDdEMsR0FBSXVQLFlBQVk5bkIsS0FBTSxPQUFPOG5CLFlBQVk5bkIsS0FBS2tZLFNBQ2hELENBRUEsT0FBTyxJQUNULENBRUEsa0JBQU8yekIsQ0FBYXBqQyxNQUNsQixNQUFNd0QsUUFBVXhELEtBQUt4UCxRQUFRLFlBQ3ZCc2YsVUFBWXRNLFFBQVVBLFFBQVE5UyxRQUFRb2YsVUFBWSxLQUN4RCxHQUFJQSxVQUFXLENBRWIsT0FEb0I3ZSxLQUFLOGUsU0FBU2xmLElBQUlpZixXQUNuQnV6QixTQUFVLENBQy9CLENBRUEsT0FBTyxDQUNULENBRUEsdUJBQU9yQixDQUFrQnh5QyxLQUN2QixHQUFLQSxJQUFMLENBRUEsR0FBSUEsSUFBSW1ILFNBQVMsS0FBTSxDQUVyQixNQUFPd0osUUFBU0QsU0FBVzFRLElBQUk0USxNQUFNLEtBQ3JDLEdBQWdCLFVBQVpELFFBQ0YsT0FBT2xQLEtBQUtvUCxPQUFPQyxPQUFPSixTQUNyQixDQUNMLE1BQU1LLE1BQVF0UCxLQUFLdVAsT0FBTzNQLElBQUlzUCxTQUM5QixJQUFLSSxNQUFPLE9BQU8sS0FDbkIsTUFBTW9FLE1BQVFwRSxNQUFNRyxvQkFBb0IsUUFBU1IsU0FDakQsT0FBS3lFLE1BQ0VBLE1BQU05VyxPQUFTLElBQUk4UyxNQUFNRixXQUFXNVMsTUFEeEIsSUFFckIsQ0FDRixDQUdBLE9BQU9vRCxLQUFLb1AsT0FBT3hQLElBQUlyQixNQUFRLElBakJkZ0MsQ0FrQm5CLENBRUEsd0JBQU84eEMsQ0FBbUJyakMsVUFDeEIsTUFBTTBFLE1BQVF1MEIsU0FBU3FLLFNBQVN0akMsVUFDaEMsT0FBTzBFLE1BQVFBLE1BQU05VyxNQUFRLElBQy9CLENBRUEsZUFBTzAxQyxDQUFVdGpDLFVBQ2YsR0FBSUEsU0FBVSxDQUNaLE1BQU9FLFFBQVNELFNBQVdELFNBQVNHLE1BQU0sS0FDMUMsR0FBZ0IsVUFBWkQsUUFBcUIsQ0FDdkIsTUFBTXdGLFNBQVcxVSxLQUFLb1AsT0FBT0MsT0FBT0osVUFBVXlFLE1BQzlDLE9BQU9nQixTQUFTVixNQUNsQixDQUFPLENBQ0wsTUFBTTFFLE1BQVF0UCxLQUFLdVAsT0FBTzNQLElBQUlzUCxTQUM5QixJQUFLSSxNQUFPLE9BQU8sS0FDbkIsTUFBTW9FLE1BQVFwRSxNQUFNRyxvQkFBb0IsUUFBU1IsU0FDakQsT0FBS3lFLE1BQ0VBLE9BQVMsSUFBSWhFLE1BQU1GLFdBRFAsSUFFckIsQ0FDRixDQUNBLE9BQU8sSUFDVCxDQU1BLDJCQUFhbWUsQ0FBZ0I1ZSxLQUFNd2pDLE9BQVMsTUFDMUMsTUFBTTF6QixVQUNNLE1BQVYwekIsT0FBaUJ4akMsS0FBS3hQLFFBQVEsWUFBWUUsUUFBUW9mLFVBQVkwekIsT0FDMURoZ0MsUUFBVXZTLEtBQUs4ZSxTQUFTbGYsSUFBSWlmLFdBRTVCekwsVUFBWWIsUUFBUTNSLE9BQU8sQ0FBRXNTLFFBQVNuRSxLQUFLK2UsWUFFakQsYUFETXJpQixHQUFHNGlCLEtBQUtDLGNBQWNsYixLQUFLLEdBQzFCQSxHQUNULENBRUEsOEJBQWE4N0IsQ0FBbUJqd0MsT0FFOUJBLE1BQU1FLGlCQUVOLE1BQU02bEIsT0FBUy9sQixNQUFNSSxjQUNmMFAsS0FBT2lXLE9BQU96bEIsUUFBUSxjQUM1QixJQUFLd1AsS0FBTSxPQUNYLE1BQU15akMsY0FBZ0J4dEIsT0FBT3psQixRQUFRLFlBRS9CTSxPQUFTbWxCLE9BQU92bEIsUUFBUUksT0FFOUIsR0FBS29vQyxTQUFTbjVCLGtCQUFrQkMsTUFFaEMsT0FBUWxQLFFBQ04sSUFBSyxVQUFXLENBQ2QsTUFBTStmLFdBQWFqWixTQUFTcWUsT0FBT3ZsQixRQUFRbWdCLFlBQ3JDOG5CLGdCQUFrQi9nQyxTQUN0QjFILE1BQU1JLGNBQWNJLFFBQVFpb0MsaUJBRzlCLEdBQUkzNEIsS0FBSzBDLFVBQVV3VCxTQUFTLFNBQVUsQ0FDcEMsSUFBSXd0QixVQUNBMWpDLEtBQUswQyxVQUFVd1QsU0FBUyxZQUMxQnd0QixVQUFZMU4sZ0JBQWdCNXVCLFlBQVlwSCxPQUV0Q0EsS0FBSzBDLFVBQVV3VCxTQUFTLGVBQzFCd3RCLFVBQVl6TixtQkFBbUI3dUIsWUFBWXBILE9BRTdDMGpDLFVBQVVoTCxZQUFZN25CLFdBQVk4bkIsZ0JBQWlCMzRCLEtBQ3JELE1BQU8sR0FBSUEsS0FBSzBDLFVBQVV3VCxTQUFTLFNBQVUsQ0FDM0MsTUFBTWl0QixVQUFZaEssbUJBQW1CL3hCLFlBQVlwSCxNQUMzQzJqQyxXQUFhMXRCLE9BQU96bEIsUUFBUSxnQkFDNUI0c0MsVUFBWXVHLFdBQ2QvckMsU0FBUytyQyxXQUFXanpDLFFBQVFvZ0IsT0FDNUIsS0FDSixHQUFJbUYsT0FBT3ZULFVBQVV3VCxTQUFTLGNBQzVCaXRCLFVBQVVoRyxTQUFTQyxlQUNkLENBQ0wsTUFBTXdHLGFBQWVoc0MsU0FBU3FlLE9BQU92bEIsUUFBUW9nQixPQUM3Q3F5QixVQUFVekssWUFBWTBFLFVBQVd3RyxhQUNuQyxDQUNGLE1BQU8sR0FDTDVqQyxLQUFLMEMsVUFBVXdULFNBQVMsY0FDYyxNQUF0Q2xXLEtBQUtzSCxjQUFjLGdCQUNuQixDQUNBLE1BQU1xQyxZQUFjbEMsVUFBVUwsWUFBWXBILE1BQzFDLEdBQUlpVyxPQUFPdlQsVUFBVXdULFNBQVMsY0FBZSxDQUMzQyxNQUFNckYsV0FBYWpaLFNBQVNxZSxPQUFPdmxCLFFBQVFtZ0IsWUFDM0NsSCxNQUFNK0gsVUFBVWIsV0FDbEIsS0FBTyxDQUNMLE1BQU0reUIsYUFBZWhzQyxTQUFTcWUsT0FBT3ZsQixRQUFRb2dCLGFBQ3ZDbkgsTUFBTThILGFBQWFteUIsYUFDM0IsQ0FDRixLQUFPLENBQ0wsTUFBTS8xQyxNQUFRcXJDLFNBQVNuNUIsa0JBQWtCQyxNQUNuQzZqQywwQkFDSjdqQyxLQUFLc0gsY0FBYyxtQkFFckIsR0FBSXpaLE1BQU1xakIsVUFBVUwsWUFBYSxDQUMvQixNQUFNM2EsT0FBUzhKLEtBQUtzSCxjQUFjLGVBR2xDLE9BRkF0SCxLQUFLdFAsUUFBUThXLGFBQWVteEIsZ0JBQzVCMzRCLEtBQUt0UCxRQUFRb29DLFVBQVksUUFDakJILGlCQUNOLEtBQUtseEIsVUFBVUQsYUFBYUUsUUFDMUJ4UixPQUFPcXJCLFVBQVl0d0IsS0FBS0MsS0FBS0MsU0FBUyx1QkFDdEMweUMsMEJBQTBCdGlCLFVBQVl0d0IsS0FBS0MsS0FBS3lXLE9BQzlDLGdDQUNBLENBQ0VrSixXQUNBckosYUFBY3ZXLEtBQUtDLEtBQUtDLFNBQVMsNEJBR3JDLE1BRUYsS0FBS3NXLFVBQVVELGFBQWFJLEtBQzFCMVIsT0FBT3FyQixVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMsb0JBQ3RDMHlDLDBCQUEwQnRpQixVQUFZdHdCLEtBQUtDLEtBQUt5VyxPQUM5QyxnQ0FDQSxDQUNFa0osV0FDQXJKLGFBQWN2VyxLQUFLQyxLQUFLQyxTQUFTLHlCQUdyQyxNQUVGLEtBQUtzVyxVQUFVRCxhQUFhM0osUUFDMUIzSCxPQUFPcXJCLFVBQVl0d0IsS0FBS0MsS0FBS0MsU0FBUyx1QkFDdEMweUMsMEJBQTBCdGlCLFVBQVl0d0IsS0FBS0MsS0FBS3lXLE9BQzlDLGdDQUNBLENBQ0VrSixXQUNBckosYUFBY3ZXLEtBQUtDLEtBQUtDLFNBQVMsNEJBR3JDLE1BRUYsS0FBS3NXLFVBQVVELGFBQWFLLFNBQzFCM1IsT0FBT3FyQixVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ3RDMHlDLDBCQUEwQnRpQixVQUFZdHdCLEtBQUtDLEtBQUt5VyxPQUM5QyxnQ0FDQSxDQUNFa0osV0FDQXJKLGFBQWN2VyxLQUFLQyxLQUFLQyxTQUFTLDZCQVF6QytFLE9BQU93TSxVQUFVVyxRQUFRLFVBQVcsV0FDcENuTixPQUFPd00sVUFBVStULE9BQU8sVUFDeEJ6VyxLQUFLc0gsY0FBYyxpQkFBaUJtUCxTQUNwQ3pXLEtBQUtzSCxjQUFjLGlCQUFpQjRyQixNQUFNQyxRQUFVLGFBQzlDK0YsU0FBU3RhLGVBQWU1ZSxLQUNoQyxNQUNFdEQsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sMEJBQTJCLENBQzFDOVosTUFBT0EsTUFBTTVELE9BSXJCLENBQ0EsS0FDRixDQUNBLElBQUssT0FBUSxDQUNYLE1BQU02NUMsUUFBVTlqQyxLQUFLK2pDLFdBQVUsR0FDekI3dEMsT0FBUzR0QyxRQUFReDhCLGNBQWMsZUFDckNwUixPQUFPcXJCLFVBQ0xyckIsT0FBT3FyQixVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMscUJBQ3hDK0UsT0FBT3dNLFVBQVUrVCxPQUFPLFdBQ3hCcXRCLFFBQVF4OEIsY0FBYyxpQkFBaUJtUCxTQUN2Q3F0QixRQUFRcHpDLFFBQVFzekMsWUFBYSxRQUN2QjlLLFNBQVN0YSxlQUFla2xCLFFBQVNMLGNBQWMveUMsUUFBUW9mLGlCQUN2RHJJLFVBQVUxYyxLQUFLaVYsTUFDckIsS0FDRixDQUNBLElBQUssWUFBYSxDQUNoQixJQUVJNHVCLFNBRkFxVixZQUFjL3pDLE1BQU1JLGNBQWNFLFFBQVEsMkJBQzNDRSxRQUFRd1AsUUFFTitqQyxZQUtIclYsU0FBV2o3QixLQUFLMnZDLGtCQUFrQlcsY0FKbENBLFlBQWMvekMsTUFBTUksY0FBY0UsUUFBUSwyQkFDdkNFLFFBQVFrUSxRQUNYZ3VCLFNBQVczOUIsS0FBS29QLE9BQU94UCxJQUFJb3pDLGNBSzdCLE1BQU1DLGFBQWVoMEMsTUFBTUksY0FBY0ksUUFBUWd5QyxXQUMzQ2hNLFlBQTBELFNBQTVDeG1DLE1BQU1JLGNBQWNJLFFBQVFnbUMsWUFDMUMvc0IsTUFBUSxJQUFJbEMsVUFLbEIsT0FKQWtDLE1BQU1JLG1CQUFxQjA1QixjQUFjL3lDLFFBQVFvZixVQUNqRG5HLE1BQU1DLFNBQVcsVUFDakJELE1BQU1FLEtBQU8sU0FDYkYsTUFBTTdZLE9BQVNvekMsYUFDUEEsY0FDTixJQUFLLFVBQ0h2NkIsTUFBTTliLE1BQVErZ0MsU0FDZGpsQixNQUFNL04sTUFBUTFMLE1BQU1JLGNBQWNJLFFBQVF1WCxRQUMxQzBCLE1BQU1LLFdBQWF2QyxVQUFVc1AsZ0JBQWdCclAsUUFDekNndkIsY0FBYS9zQixNQUFNakIsY0FBZ0IsU0FFakNpQixNQUFNN1UsT0FDWjZVLE1BQU00ZixZQUNOLE1BQ0YsSUFBSyxZQUNINWYsTUFBTTliLE1BQVErZ0MsU0FDZGpsQixNQUFNL04sTUFBUTFMLE1BQU1JLGNBQWNJLFFBQVF1WCxRQUMxQzBCLE1BQU1LLFdBQWF2QyxVQUFVc1AsZ0JBQWdCclAsUUFDN0NpQyxNQUFNL1AsS0FBTzFKLE1BQU1JLGNBQWNJLFFBQVFzWCxPQUNyQzB1QixjQUFhL3NCLE1BQU1qQixjQUFnQixTQUVqQ2lCLE1BQU03VSxPQUNaNlUsTUFBTTRmLFlBQ04sTUFDRixJQUFLLFdBQVksQ0FDZixNQUFNMTdCLE1BQVFxckMsU0FBU241QixrQkFBa0JDLE1BQ3pDLEdBQUk0dUIsU0FBU21RLE9BQVNseEMsTUFBTWt4QyxNQUFRLEVBSWxDLFlBSEFyaUMsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS0MsU0FBUyxrQ0FJdkJ3WSxNQUFNOWIsTUFBUStnQyxTQUNkamxCLE1BQU0vTixNQUFRMUwsTUFBTUksY0FBY0ksUUFBUXVYLFFBQzFDMEIsTUFBTUssV0FBYXZDLFVBQVVzUCxnQkFBZ0JyUCxRQUN6Q2d2QixjQUFhL3NCLE1BQU1qQixjQUFnQixHQUNuQ2ttQixTQUFTbVEsTUFBUWx4QyxNQUFNa3hDLFFBQ3pCcDFCLE1BQU1qQixhQUNKaUIsTUFBTWpCLGNBQWdCN2EsTUFBTWt4QyxNQUFRblEsU0FBU21RLFFBRzdDcDFCLE1BQU1qQixjQUFnQixJQUN4QmlCLE1BQU1LLFdBQ0pMLE1BQU1LLFdBQWFqVSxLQUFLQyxJQUFJMlQsTUFBTWpCLGNBQWdCLEVBQ3BEaUIsTUFBTWpCLGNBQWdCLFNBR2xCaUIsTUFBTTdVLE9BQ1o2VSxNQUFNNGYsWUFDTixLQUNGLEVBSUYsS0FDRixDQUVBLElBQUssdUJBQXdCLENBQzNCLE1BQU1yQixVQUFZK04sbUJBQW1CN3VCLFlBQVlwSCxNQUMzQzJKLFlBQWN1ZSxVQUFVOFAsa0JBQzVCOW5DLE1BQU1JLGNBQWNJLFFBQVFrTCxPQUU5QnVqQixFQUFFbEosUUFBUTdRLEtBQUssWUFBWSxTQUNyQnZRLFNBQVNpQyxlQUFlNlMsTUFBTXBVLEtBQUtULFlBQ25Db3pCLFVBQVVvUSxxQkFDaEIsS0FDRixDQUVBLElBQUssMkJBQTRCLENBQy9CLE1BQU01ZixPQUFTc2QsZ0JBQWdCNXVCLFlBQVlwSCxZQUNyQzBZLE9BQU95Zix5QkFDYixLQUNGLENBRUEsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTXpmLE9BQVNzZCxnQkFBZ0I1dUIsWUFBWXBILE1BQ3JDMkosWUFBYytPLE9BQU9zZixrQkFDekI5bkMsTUFBTUksY0FBY0ksUUFBUWtMLE9BRTlCdWpCLEVBQUVsSixRQUFRN1EsS0FBSyxZQUFZLFNBQ3JCdlEsU0FBU2lDLGVBQWU2UyxNQUFNcFUsS0FBS1QsWUFDbkM0akIsT0FBTzRmLHFCQUNiLEtBQ0YsQ0FDQSxJQUFLLG9CQUFxQixDQUN4QixNQUFNcEosZUFBaUIsSUFBSXJDLFdBQVcsQ0FDcENobEIsU0FBc0MsU0FBNUJvTyxPQUFPdmxCLFFBQVFtWCxTQUN6QnFRLFlBQWFob0IsTUFBTXN5QixXQUVyQjBNLGVBQWVwcUIsU0FBV21SLE9BQU92bEIsUUFBUXl6QyxPQUN6Q2pWLGVBQWVqVyxVQUFZaEQsT0FBT3ZsQixRQUFRZ29CLE9BQzFDd1csZUFBZWxuQixPQUFTaU8sT0FBT3ZsQixRQUFRNm5CLE9BQ25Da3JCLGNBQWMveUMsUUFBUW9mLFlBQ3hCb2YsZUFBZXBmLFVBQVkyekIsY0FBYy95QyxRQUFRb2YsV0FFbkRvZixlQUFldFEsaUJBZ0JmLEtBQ0YsQ0FDQSxJQUFLLHdCQUF5QixDQUM1QixNQUFNMmUsZUFBaUJwRSxtQkFBbUIveEIsWUFBWXBILE1BQ3REdTlCLGVBQWVuQiwrQkFDVG1CLGVBQWUzZSxpQkFDckIsS0FDRixDQUNBLElBQUssdUJBQXdCLENBQzNCLE1BQU0yZSxlQUFpQnBFLG1CQUFtQi94QixZQUFZcEgsWUFDaER1OUIsZUFBZVgsY0FDckIsS0FDRixDQUNBLElBQUssb0JBQXFCLENBQ3hCLE1BQU1XLGVBQWlCcEUsbUJBQW1CL3hCLFlBQVlwSCxZQUNoRHU5QixlQUFlL1AsYUFDckIsS0FDRixDQUNBLElBQUssb0JBQXFCLENBQ3hCLE1BQU12VSxVQUFZalosS0FBS3RQLFFBQVF1b0IsVUFDekJtckIsT0FBU3BrQyxLQUFLdFAsUUFBUXdGLE9BQ3RCMGlCLFlBQWMxVixXQUFXcUIsZ0JBQWdCMFUsaUJBQ3pDTCxZQUFZK1UsV0FBV3lXLFFBQzdCLE1BQU10YyxRQUFVOW5CLEtBQUtzSCxjQUFjLGlCQUM3QjJ4QixVQUFZajVCLEtBQUtzSCxjQUFjLGVBQ3JDNlgsRUFBRThaLFdBQVdvTCxPQUFPLGdDQUNoQnZjLFNBQVNBLFFBQVFyUixlQUNmeWlCLFNBQVN0YSxlQUFlNWUsTUFFOUIsS0FDRixDQUVBLElBQUssb0JBQXFCLENBQ3hCLE1BQU11OUIsZUFBaUJwRSxtQkFBbUIveEIsWUFBWXBILFlBQ2hEdTlCLGVBQWU1UCxhQUNyQixLQUNGLENBRUEsSUFBSyxtQkFDaUJsbUIsVUFBVUwsWUFBWXBILE9BQ3BDMFIsWUFDTixNQUdGLElBQUssb0JBQ2lCakssVUFBVUwsWUFBWXBILE9BQ3BDMFIsWUFDTixNQUdGLElBQUssb0JBQ2lCakssVUFBVUwsWUFBWXBILE9BQ3BDc2tDLFlBQ04sTUFHRixJQUFLLGdDQUNpQjc4QixVQUFVTCxZQUFZcEgsT0FDcEN1a0MsdUJBQ04sTUFHRixJQUFLLGdDQUNpQjk4QixVQUFVTCxZQUFZcEgsT0FDcEN3a0MsdUJBQ04sTUFHRixJQUFLLGVBQWdCLENBQ25CLE1BQU03NkIsWUFBY2xDLFVBQVVMLFlBQVlwSCxNQUMxQzJKLE1BQU15TyxTQUFVLEVBQ2hCek8sTUFBTTg2QixlQUVKM2hDLFVBQVU1UyxPQUVWeVosTUFBTWlWLGVBQWUsQ0FBRThsQixZQUFZLElBSXJDLEtBQ0YsQ0FFQSxJQUFLLGtCQUFtQixDQUN0QixNQUFNLzZCLFlBQWNsQyxVQUFVTCxZQUFZcEgsTUFDMUMySixNQUFNb29CLFNBQVUsUUFDVnBvQixNQUFNaUwsV0FDWmpMLE1BQU1pVixlQUFlLENBQUUrbEIsV0FBVyxJQUNsQyxLQUNGLENBRUEsSUFBSyx1QkFBd0IsQ0FDM0IsTUFBTWg3QixZQUFjbEMsVUFBVUwsWUFBWXBILFlBQ3BDMkosTUFBTTFOLHNCQUNaME4sTUFBTTg2QixlQUNOOTZCLE1BQU1pVixpQkFDTixLQUNGLENBRUEsSUFBSywwQkFBMkIsQ0FDOUIsTUFBTXZFLFNBQVdWLGFBQWF2UyxZQUFZcEgsWUFDcENxYSxTQUFTcUUsMkJBQ1RyRSxTQUFTdUUsaUJBQ2YsS0FDRixDQUVBLElBQUssaUJBQWtCLENBQ3JCLE1BQU12RSxTQUFXVixhQUFhdlMsWUFBWXBILFlBQ3BDcWEsU0FBUzJDLGdCQUNUM0MsU0FBU3VFLGlCQUNmLEtBQ0YsQ0FFQSxJQUFLLGdCQUFpQixDQUNwQixNQUFNdkUsU0FBV1YsYUFBYXZTLFlBQVlwSCxZQUNwQ3FhLFNBQVNvQixhQUNieEYsT0FBT3ZsQixRQUFRdXBCLGFBRVhJLFNBQVN1RSxpQkFDZixLQUNGLENBRUEsSUFBSyxnQkFBaUIsQ0FDcEIsTUFBTXZFLFNBQVdWLGFBQWF2UyxZQUFZcEgsWUFDcENxYSxTQUFTaUQsY0FDZmpELFNBQVN1RSxpQkFDVCxLQUNGLENBRUEsSUFBSyxpQkFBa0IsQ0FDckIsTUFBTXZFLFNBQVdWLGFBQWF2UyxZQUFZcEgsWUFDcENxYSxTQUFTK0QsVUFDZi9ELFNBQVN1RSxpQkFDVCxLQUNGLENBZ0JBLElBQUssaUJBQWtCLENBQ3JCLE1BQU02VCxTQUFXSCxhQUFhbHJCLFlBQVlwSCxZQUNwQ3l5QixTQUFTRyxVQUNmSCxTQUFTN1QsaUJBQ1QsS0FDRixDQUVBLElBQUssbUJBQW9CLENBQ3ZCLE1BQU02VCxTQUFXSCxhQUFhbHJCLFlBQVlwSCxNQUMxQ3l5QixTQUFTcmEsU0FBVSxFQUNuQnFhLFNBQVM3VCxpQkFDVCxLQUNGLEVBS0osQ0FPQSwrQkFBT3doQixDQUEwQmx3QyxPQUMvQkEsTUFBTUUsaUJBQ04sTUFFTStULFFBRlNqVSxNQUFNSSxjQUNERSxRQUFRLGNBQ1A4VyxjQUFjLGlCQUMvQm5ELFVBQ0dBLFFBQVErdUIsTUFBTUMsUUFHakJodkIsUUFBUSt1QixNQUFNQyxRQUNjLFNBQTFCaHZCLFFBQVErdUIsTUFBTUMsUUFBcUIsUUFBVSxPQUgvQ2h2QixRQUFRK3VCLE1BQU1DLFFBQVUsUUFNOUIsRUMzbUNLLE1BQU04QywyQkFBMkJoZSxjQUN0QyxXQUFBamYsQ0FBYThMLFNBQVcsS0FBTWtELE9BQVMsS0FBTWtRLGFBQWMsR0FDekRsb0IsTUFBTThVLFNBQVVvVCxhQUNoQnZrQixLQUFLcVUsT0FBU0EsT0FDZHJVLEtBQUswN0IsVUFBVyxFQUNoQjE3QixLQUFLK2lDLGFBQWMsRUFDbkIvaUMsS0FBS2dqQyxXQUFZLEVBQ2pCaGpDLEtBQUtpakMsYUFBYyxFQUNuQmpqQyxLQUFLa2pDLFdBQVksRUFDakJsakMsS0FBS21qQyxjQUFlLEVBQ3BCbmpDLEtBQUttYyxVQUFZLEtBQ2pCbmMsS0FBSzBsQyxXQUFhLEtBQ2xCMWxDLEtBQUs2MEIsUUFBUyxDQUNoQixDQUVBLFlBQUluYixHQUNGLE1BQU8seURBQ1QsQ0FFQSxpQkFBTTJ6QixHQUVKLE1BQU0zaEIsWUFBY3B1QixLQUFLOGUsU0FBU2xmLElBQUk4QyxLQUFLbWMsaUJBRXJDdVAsWUFBWXlKLFFBQVEsT0FBUSxpQkFBaUIsU0FDN0Nwc0IsR0FBRzRpQixLQUFLQyxjQUFjRixhQUFhLEVBQzNDLENBRUEsb0JBQU1xWSxHQUNKeDBCLFdBQVc0QyxtQkFBbUJuUyxLQUFLbVIsVUFDbkMsTUFBTTRJLFdBQWF3RyxlQUFldmdCLEtBQUswWixTQUFVMVosTUFFM0M2bEIsWUFBYyxDQUFDLEVBQ2pCN2xCLEtBQUtnUixNQUFPNlUsWUFBWTdVLE1BQVFoUixLQUMvQjZsQixZQUFZM3JCLE1BQVE4RixLQUN6QixNQUFNZ1EsUUFBVXhNLFlBQVl5TSxXQUFXNFYsYUFJakN4aUIsU0FBVyxDQUNmTyxNQUhXNUQsS0FBSzlGLE1BQU0wSixLQUFPNUQsS0FBSzlGLE1BQU0wSixLQUFPdEcsS0FBS3NHLE1BR3pDcUssR0FDWCtCLFFBQ0FRLFFBQVN1SixNQUdQLENBQUMsU0FBVSxhQUFhL1csU0FBU2hELEtBQUtxQixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVlzaUIscUJBQXFCLE9BR3REemlCLFNBQVNFLE9BQVEsRUFJakIsYUFGMEJDLFlBQVlpTixPQUFPcE4sU0FHL0MsQ0FFQSxvQkFBTTRuQixHQUNKLE1BQU1sUixXQUFhd0csZUFBZXZnQixLQUFLMFosU0FBVTFaLE1BRTNDNlAsUUFBVXZTLEtBQUs4ZSxTQUFTbGYsSUFBSThDLEtBQUttYyxXQUVqQ3pMLFVBQVliLFFBQVEzUixPQUFPLENBQUVzUyxRQUFTdUosT0FFNUMsYUFETWhSLEdBQUc0aUIsS0FBS0MsY0FBY2xiLEtBQUssR0FDMUJBLEdBQ1QsQ0FFQSxVQUFBMGtCLENBQVl4c0IsVUFDVixNQUFNcXNCLEtBQU9yc0IsU0FBUzVGLFNBQVMsS0FDM0J1TSxXQUFXQyxrQkFBa0I1RyxVQUM3QkEsU0FDSjVJLEtBQUtpMUIsT0FBU2oxQixLQUFLaTFCLEtBQ3JCLENBRUEsdUJBQU1vUCxDQUFtQi92QixRQUFVLEtBQU1nd0IsU0FBVSxHQUNqRCxNQUFNdHVCLE1BQVEsSUFBSWxDLFVBK0JsQixHQTdCQWtDLE1BQU15TyxTQUFVLEVBQ2hCek8sTUFBTXV1QixXQUFZLEVBQ2xCdnVCLE1BQU1JLG1CQUFxQnBXLEtBQUttYyxVQUNoQ25HLE1BQU1DLFNBQVcsVUFDakJELE1BQU1FLEtBQU8sWUFDYkYsTUFBTTdZLE9BQVMsU0FDZjZZLE1BQU05YixNQUFROEYsS0FBS21SLFNBQ25CNkUsTUFBTS9QLEtBQU9qRyxLQUFLcVUsT0FDbEIyQixNQUFNL04sTUFBUXFNLFFBQ2QwQixNQUFNSyxXQUFhdkMsVUFBVXNQLGdCQUFnQnJQLFFBQzdDaUMsTUFBTWpCLGFBQWUsRUFFakJ6WCxLQUFLc0csS0FBSzJFLEtBQU12SSxLQUFLb3RDLGVBQWdCLEVBQ3BDcHRDLEtBQUtvdEMsZUFBZ0IsRUFFdEJwdEMsS0FBSytpQyxjQUFhL3NCLE1BQU1qQixjQUFnQixHQUN4Qy9VLEtBQUtnakMsWUFBV2h0QixNQUFNakIsY0FBZ0IsR0FDdEMvVSxLQUFLbWpDLGVBQWNudEIsTUFBTWpCLGNBQWdCLEdBQ3pDL1UsS0FBS2tqQyxZQUFXbHRCLE1BQU1qQixjQUFnQixTQUVwQ2lCLE1BQU03VSxPQUNabkIsS0FBS2dXLE1BQVFBLE1BQ2JoVyxLQUFLNjBCLFFBQVMsRUFDZDcwQixLQUFLMDdCLFVBQVcsRUFDWjRJLFNBQVN0dUIsTUFBTTRmLFlBRW5CNTFCLEtBQUsyaUMsZUFDSDNzQixNQUFNbkMsZUFBaUJDLFVBQVVELGFBQWEzSixTQUM5QzhMLE1BQU1uQyxlQUFpQkMsVUFBVUQsYUFBYUssU0FDNUNsVSxLQUFLdWxCLFlBQWN2bEIsS0FBS2lqQyxZQUFhLENBQ3ZDLE1BQU1wekIsY0FBZ0J2UyxLQUFLMnpDLFdBQVdDLFlBQVksb0JBQXFCLENBQ3JFNXJCLFVBQVd0bEIsS0FBS3NsQixVQUNoQm5KLFVBQVduYyxLQUFLbWMsVUFDaEJvSSxZQUFhdmtCLEtBQUt1a0IsWUFDbEJwVCxTQUFVblIsS0FBS21SLFdBRWpCblIsS0FBSzBsQyxXQUFhNzFCLFFBQVE1QixJQUFNNEIsUUFBUXNoQyxHQUMxQyxDQUtBLE9BSElueEMsS0FBS2lqQyxjQUFnQmpqQyxLQUFLZ1csTUFBTVEsVUFDbEN4VyxLQUFLZ1csTUFBTStILFlBRU4vSCxLQUNULENBRUEsd0JBQU0ydUIsQ0FBb0IzdUIsTUFBUSxNQUNoQyxJQUFLQSxRQUFVaFcsS0FBS2dXLE1BQU8sT0FBTyxLQU9sQyxHQUxJQSxRQUFPaFcsS0FBS2dXLE1BQVFBLE9BQ3hCaFcsS0FBS21CLEtBQU9xUyxTQUFTdUMsYUFBYS9WLEtBQUtnVyxPQUN2Q2hXLEtBQUs2MEIsUUFBUyxFQUVkNzBCLEtBQUttQixLQUFLeWpDLFVBQVksR0FDbEI1a0MsS0FBS21CLEtBQUsrUyxTQUFVLENBQ3RCbFUsS0FBS21CLEtBQUswakMsVUFBWSxZQUN0QjdrQyxLQUFLbUIsS0FBSzJqQyxVQUFZeG5DLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ3pDLElBQUssSUFBSTJmLE1BQVEsRUFBR0EsTUFBUSxFQUFHQSxRQUM3Qm5kLEtBQUttQixLQUFLeWpDLFVBQVV4dEMsS0FBSyxRQUU3QixNQUFPLEdBQUk0SSxLQUFLbUIsS0FBS2dULE9BQVEsQ0FDM0JuVSxLQUFLbUIsS0FBSzBqQyxVQUFZLFVBQ3RCN2tDLEtBQUttQixLQUFLMmpDLFVBQVl4bkMsS0FBS0MsS0FBS0MsU0FBUyxlQUN6QyxJQUFLLElBQUkyZixNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0JuZCxLQUFLbUIsS0FBS3lqQyxVQUFVeHRDLEtBQUssU0FFN0IsTUFBTyxHQUFJNEksS0FBS21CLEtBQUsrMUIsUUFBUyxDQUM1QmwzQixLQUFLbUIsS0FBSzBqQyxVQUFZLFlBQ2xCL3dCLFVBQVVELGFBQWFFLFVBQVkvVCxLQUFLbUIsS0FBSzBTLGVBQy9DN1QsS0FBS21CLEtBQUsyakMsVUFBWXhuQyxLQUFLQyxLQUFLQyxTQUFTLHdCQUV2Q3NXLFVBQVVELGFBQWFJLE9BQVNqVSxLQUFLbUIsS0FBSzBTLGVBQzVDN1QsS0FBS21CLEtBQUsyakMsVUFBWXhuQyxLQUFLQyxLQUFLQyxTQUFTLHFCQUV2Q3NXLFVBQVVELGFBQWEzSixVQUFZbEssS0FBS21CLEtBQUswUyxlQUMvQzdULEtBQUttQixLQUFLMmpDLFVBQVl4bkMsS0FBS0MsS0FBS0MsU0FBUyx3QkFFM0MsSUFBSyxJQUFJMmYsTUFBUSxFQUFHQSxNQUFRbmQsS0FBS21CLEtBQUswUyxhQUFjc0osUUFDbERuZCxLQUFLbUIsS0FBS3lqQyxVQUFVeHRDLEtBQUssT0FFN0IsTUFDRTRJLEtBQUttQixLQUFLMGpDLFVBQVksUUFDdEI3a0MsS0FBS21CLEtBQUsyakMsVUFBWXhuQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUN6Q3dDLEtBQUttQixLQUFLeWpDLFVBQVV4dEMsS0FBSyxTQUczQixJQUFLNEksS0FBSzBsQyxhQUFlMWxDLEtBQUtpakMsYUFBZWpqQyxLQUFLdWxCLFVBQVcsQ0FDM0QsTUFBTWtmLGVBQWlCLElBQUl4QyxtQkFDekJqaUMsS0FBSzZpQyxnQkFDTDdpQyxLQUFLbWMsV0FFRHVvQix3QkFBMEJELGVBQWVyQyxtQkFDL0NwaUMsS0FBS3lrQyxlQUFpQkMsa0JBQWtCejJCLEVBQzFDLE9BQ01qTyxLQUFLaXJCLGdCQUNiLENBRUEsa0JBQU94WCxDQUFhcEgsS0FBTThQLFVBQVksTUFDcEMsTUFBTW9ZLFVBQVksSUFBSStOLG1CQU90QixPQU5BL3lCLFdBQVdtQyxxQkFBcUI2aUIsVUFBV2xvQixNQUMzQ2tvQixVQUFVcHpCLEtBQU9xUyxTQUFTQyxZQUFZcEgsTUFFbENBLEtBQUt4UCxRQUFRLFlBQ2YwM0IsVUFBVXBZLFVBQVk5UCxLQUFLeFAsUUFBUSxZQUFZRSxRQUFRb2YsVUFDbERvWSxVQUFVcFksVUFBWUEsVUFDdEJvWSxTQUNULENBRUEsdUJBQU94SSxDQUFrQjVQLFdBQ3ZCLE1BQU10TSxRQUFVdlMsS0FBSzhlLFNBQVNsZixJQUFJaWYsV0FDbEMsSUFBS3RNLFFBQVMsT0FBTyxLQUNyQixNQUFNeEQsS0FBT21mLEVBQUUzYixRQUFRVyxTQUFTLEdBRTFCK2pCLFVBQVkrTixtQkFBbUI3dUIsWUFBWXBILEtBQU04UCxXQUd2RCxPQUZBb1ksVUFBVXBZLFVBQVlBLFVBRWZvWSxTQUNULENBRUEsdUJBQU9xUCxDQUFrQnJuQyxNQUFPc25DLGVBQWdCLEdBQzlDLE1BQU14M0IsS0FBTzlQLE1BQU1JLGNBQWNFLFFBQVEsb0JBQ25DbzRCLEtBQU8xNEIsTUFBTUksY0FBY0ksUUFBUWs0QixLQUNuQzZPLFVBQVl2MEIsV0FBV0Msa0JBQWtCeWxCLE1BRy9DLEdBQUs0TyxjQUlFLENBRUwsTUFBTXRQLFVBQVkrTixtQkFBbUI3dUIsWUFBWXBILE1BQ2pEa29CLFVBQVVhLFdBQVdILE1BQ3JCVixVQUFVdEosZ0JBQ1osTUFSRTVlLEtBQUt0UCxRQUFRK21DLFdBQXlDLFNBQTVCejNCLEtBQUt0UCxRQUFRK21DLFdBQ3ZDdm5DLE1BQU1JLGNBQWNvUyxVQUFVMEwsT0FBTyxlQUNyQ2xlLE1BQU1JLGNBQWNJLFFBQVFzWSxTQUFXaEosS0FBS3RQLFFBQVErbUMsVUFPeEQsQ0FFQSxXQUFBaUIsQ0FBYTduQixXQUFZOG5CLGdCQUFpQkMsU0FFbkNqbEMsS0FBSzlGLE1BQU1xakIsVUFBVUwsYUFDeEJuVSxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTyxxQkFBc0IsQ0FDckMxZCxLQUFNMEosS0FBSzlGLE1BQU01RCxRQUl2QjBKLEtBQUttQixLQUFLL0ssTUFBUSxLQUNsQjRKLEtBQUttQixLQUFLMFMsYUFBZW14QixnQkFDekJobEMsS0FBS21CLEtBQUsrakMsV0FBWSxFQUN0QkQsUUFBUWxvQyxRQUFRb29DLFdBQVksRUFFNUIsTUFBTUMsVUFBWUgsUUFBUXR4QixjQUFjLGNBQ3hDeXhCLFVBQVVyb0MsUUFBUTNHLE1BQVEsS0FDMUJndkMsVUFBVXJvQyxRQUFROFcsYUFBZW14QixnQkFDakNJLFVBQVVyb0MsUUFBUW1vQyxXQUFZLEVBRTlCLE1BQU1HLGFBQWVKLFFBQVF0eEIsY0FBYyxtQkFDckMyeEIsVUFBWUwsUUFBUXR4QixjQUFjLGVBQ2xDeTlCLGlCQUFtQm5NLFFBQVF0eEIsY0FDL0IsMkNBSUYsT0FGSXk5QixrQkFBa0JBLGlCQUFpQnJpQyxVQUFVK1QsT0FBTyxhQUVoRGtpQixpQkFDTixLQUFLbHhCLFVBQVVELGFBQWFFLFFBQzFCdXhCLFVBQVUxWCxVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ3pDNm5DLGFBQWF6WCxVQUFZdHdCLEtBQUtDLEtBQUt5VyxPQUNqQyxnQ0FDQSxDQUNFa0osV0FDQXJKLGFBQWN2VyxLQUFLQyxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUtzVyxVQUFVRCxhQUFhSSxLQUMxQnF4QixVQUFVMVgsVUFBWXR3QixLQUFLQyxLQUFLQyxTQUFTLG9CQUN6QzZuQyxhQUFhelgsVUFBWXR3QixLQUFLQyxLQUFLeVcsT0FDakMsZ0NBQ0EsQ0FDRWtKLFdBQ0FySixhQUFjdlcsS0FBS0MsS0FBS0MsU0FBUyx5QkFHckMsTUFFRixLQUFLc1csVUFBVUQsYUFBYTNKLFFBQ3RCa25DLG1CQUFrQkEsaUJBQWlCcjBDLFFBQVFtWCxVQUFXLEdBQzFEb3hCLFVBQVUxWCxVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ3pDNm5DLGFBQWF6WCxVQUFZdHdCLEtBQUtDLEtBQUt5VyxPQUNqQyxnQ0FDQSxDQUNFa0osV0FDQXJKLGFBQWN2VyxLQUFLQyxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUtzVyxVQUFVRCxhQUFhSyxTQUN0Qms5QixtQkFBa0JBLGlCQUFpQnIwQyxRQUFRbVgsVUFBVyxHQUMxRG94QixVQUFVMVgsVUFBWXR3QixLQUFLQyxLQUFLQyxTQUFTLHdCQUN6QzZuQyxhQUFhelgsVUFBWXR3QixLQUFLQyxLQUFLeVcsT0FDakMsZ0NBQ0EsQ0FDRWtKLFdBQ0FySixhQUFjdlcsS0FBS0MsS0FBS0MsU0FBUyw2QkFTekM4bkMsVUFBVXYyQixVQUFVVyxRQUFRLFVBQVcsV0FDdkN1MUIsUUFBUXR4QixjQUFjLGlCQUFpQm1QLFNBQ3ZDbWlCLFFBQVF0eEIsY0FBYyxpQkFBaUI0ckIsTUFBTUMsUUFBVSxPQUN2RCtGLFNBQVN0YSxlQUFlZ2EsUUFDMUIsRUNuUkssTUFBTXRWLGlCQUFpQjBoQixNQUU1QixXQUFBaHNDLENBQWFDLEtBQU1DLFNBRWpCLEdBQUlELEtBQUtqSCxRQUFRdUUsT0FBT3l1QyxNQUFNN3JDLGtCQUFvQkQsU0FBU0UsU0FNekQsT0FBTyxJQUFJN0MsT0FBT3l1QyxNQUFNN3JDLGdCQUFnQkYsS0FBS2pILE1BQU1pSCxLQUFNLENBQ2xERyxVQUFVLEtBQ1pGLFVBYVBsSixNQUFNaUosS0FBTUMsUUFDZCxDQUVBLGdCQUFNK3JDLEdBQ0pqMUMsTUFBTWkxQyxtQkFDQXR4QyxLQUFLdXhDLGNBQ2IsQ0FzQ0EsZUFBQUMsR0FDRSxHQUFJLENBQUMsWUFBYSxNQUFPLFlBQVl4dUMsU0FBU2hELEtBQUszQixNQUFPLENBQ3hEMkIsS0FBS2pFLE9BQU80bkIsT0FBUyxDQUFDLEVBQ3RCLElBQUssTUFBTXJELEtBQUt0Z0IsS0FBS2tPLE1BQ0osVUFBWG9TLEVBQUVqaUIsT0FDTjJCLEtBQUtqRSxPQUFPNG5CLE9BQU8sR0FBR3JELEVBQUVteEIsa0JBQW9CLENBQUU3VCxVQUFXdGQsRUFBRXJTLEdBQUlnVixNQUFPM0MsRUFBRXBoQixPQUFPd0MsTUFBTWd3QyxXQUFXempDLEdBQUk3WCxNQUFPa3FCLEVBQUUvSixTQUFVcFMsVUFBV21jLEVBQUV2a0IsT0FBT29JLFlBUzdJLFFBQWtELElBQXZDbkUsS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSTRuQixXQUNqQyxHQUFJM3hDLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUk2bkIsZUFBZ0IsQ0FDMUMsTUFBTXo3QyxFQUFJNkosS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSTZuQixlQUFlbmxDLE1BQU0sS0FDbkR0VyxFQUFFLEtBQU8yRixNQUFNSSxPQUFPL0YsRUFBRSxLQUMxQjZKLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUk0bkIsV0FBYXoxQyxPQUFPL0YsRUFBRSxJQUU5QzZKLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUk0bkIsV0FBYSxDQUV6QyxNQUNFM3hDLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUk0bkIsV0FBYSxFQUt6QzN4QyxLQUFLakUsT0FBT0MsUUFBUXd2QyxJQUFJcDFDLE1BQVE0SixLQUFLNnhDLE9BQ3JDN3hDLEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHL0YsTUFBUTRKLEtBQUs4eEMsTUFDcEM5eEMsS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTWgxQyxNQUFRNEosS0FBSyt4QyxTQUd2Qy94QyxLQUFLakUsT0FBT0MsUUFBUW92QyxNQUFNNEcsUUFBVWh5QyxLQUFLaXlDLEVBMkIzQyxDQUNBNTFDLE1BQU1tMUMsaUJBQ1IsQ0FRQSx3QkFBQVUsR0FDRTcxQyxNQUFNNjFDLDBCQUNSLENBUUEsa0JBQUFDLEdBQ0UsR0FBSSxDQUFDLFlBQWEsTUFBTyxZQUFZbnZDLFNBQVNoRCxLQUFLM0IsTUFBTyxDQUN4RGhDLE1BQU04MUMscUJBRU5ueUMsS0FBS2pFLE9BQU9DLFFBQVF3dkMsSUFBSXAxQyxNQUFRNEosS0FBSzZ4QyxPQUNyQzd4QyxLQUFLakUsT0FBT0MsUUFBUUcsR0FBRy9GLE1BQVE0SixLQUFLOHhDLE1BQ3BDOXhDLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU1oMUMsTUFBUTRKLEtBQUsreEMsU0FFdkMveEMsS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBR2h2QyxJQUFNakQsS0FBS295QyxTQUNsQixPQUFacHlDLEtBQUtpeUMsS0FBYWp5QyxLQUFLakUsT0FBT0MsUUFBUWkyQyxHQUFHNzdDLE1BQVE0SixLQUFLb3lDLFVBRTFEcHlDLEtBQUtqRSxPQUFPQyxRQUFRcTJDLEdBQUdwdkMsSUFBTWpELEtBQUtzeUMsU0FDbEIsT0FBWnR5QyxLQUFLcXlDLEtBQWFyeUMsS0FBS2pFLE9BQU9DLFFBQVFxMkMsR0FBR2o4QyxNQUFRNEosS0FBS3N5QyxVQUUxRHR5QyxLQUFLakUsT0FBT0MsUUFBUSt0QixJQUFJOW1CLElBQU1qRCxLQUFLdXlDLFVBQ2xCLE9BQWJ2eUMsS0FBSytwQixNQUFjL3BCLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUkzekIsTUFBUTRKLEtBQUt1eUMsV0FHNUQsTUFBTUMsYUFBZSxHQUVqQnh5QyxLQUFLakUsT0FBT0MsUUFBUWkyQyxHQUFHNzVDLE1BQU1vNkMsYUFBYXA3QyxLQUFLLHlCQUMvQzRJLEtBQUtqRSxPQUFPQyxRQUFRcTJDLEdBQUdqNkMsTUFBTW82QyxhQUFhcDdDLEtBQUsseUJBQy9DNEksS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSTN4QixNQUFNbzZDLGFBQWFwN0MsS0FBSywwQkFDaEQ0SSxLQUFLakUsT0FBT0MsUUFBUXd2QyxJQUFJcHpDLE1BQU1vNkMsYUFBYXA3QyxLQUFLLDRCQUNoRDRJLEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHL0QsTUFBTW82QyxhQUFhcDdDLEtBQUssMkJBQy9DNEksS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTWh6QyxNQUFNbzZDLGFBQWFwN0MsS0FBSyw4QkFFdEQsTUFBTTgyQixRQUFVbHVCLEtBQUsvQyxRQUFRK08sUUFBTyxDQUFDa2lCLFFBQVMxdEIsSUFDeENBLEVBQUUxQyxVQUFZMEMsRUFBRUMsYUFBcUJ5dEIsUUFDbENBLFFBQVFuaUIsT0FDYnZMLEVBQUUwdEIsUUFBUWxxQixLQUFJNnJCLEtBQ1pBLEVBQUlqeEIsUUFBUUMsTUFBTXVPLFVBQVV5aUIsSUFDMUIveUIsT0FBUzBELEVBQ1hxdkIsRUFBRTRpQixTQUFXNWlCLEVBQUU0aUIsVUFBcUIsR0FBVDVpQixFQUFFb0MsS0FDdEJwQyxPQUdWLElBQ0gzQixRQUFRaGlCLE1BQUssQ0FBQ3hQLEVBQUd3akIsSUFBTXhqQixFQUFFKzFDLFNBQVd2eUIsRUFBRXV5QixXQUV0QyxNQUFNQyxjQUFnQnhrQixRQUFRMzNCLFFBQU9pSyxHQUFLZ3lDLGFBQWF4dkMsU0FBU3hDLEVBQUUzRSxPQUdsRSxJQUFLLE1BQU1ELFVBQVU4MkMsY0FDbkI5MkMsT0FBT2tCLE9BQU9uQixNQUFNcUUsS0FBTXBFLFFBR3hCb0UsS0FBSzJ5QyxPQUFTM3lDLEtBQUsyeUMsTUFBUTN5QyxLQUFLaXlDLEtBQU1qeUMsS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBRzc3QyxNQUFRNEosS0FBSzJ5QyxPQUMxRTN5QyxLQUFLNHlDLE9BQVM1eUMsS0FBSzR5QyxNQUFRNXlDLEtBQUtxeUMsS0FBTXJ5QyxLQUFLakUsT0FBT0MsUUFBUXEyQyxHQUFHajhDLE1BQVE0SixLQUFLNHlDLE9BQzFFNXlDLEtBQUs0bUIsUUFBVTVtQixLQUFLNG1CLE9BQVM1bUIsS0FBSytwQixNQUFPL3BCLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUkzekIsTUFBUTRKLEtBQUs0bUIsT0FDcEYsQ0FDRixDQUdBLG1CQUFhblcsQ0FBUW5MLEtBQU1oRyxRQUFVLENBQUMsR0F5QnBDLE1BeEJrQixjQUFkZ0csS0FBS2pILEtBQ1BpSCxLQUFLNE0sZUFBaUJ0VCxRQUFRQyxNQUFNMmEsWUFBWWxVLEtBQUs0TSxnQkFBa0IsQ0FBQyxFQUFHLENBQ3pFMmdDLFdBQVcsRUFDWEMsWUFBYSxFQUNiQyxNQUFPLENBQ0w1UixTQUFTLEtBR1UsUUFBZDc3QixLQUFLakgsVUFDVSxJQUFiaUgsS0FBS0ksS0FBb0MsOEJBQWJKLEtBQUtJLE1BQzFDSixLQUFLSSxJQUFNLHlDQUVVLGFBQWRKLEtBQUtqSCxVQUNVLElBQWJpSCxLQUFLSSxLQUFvQyw4QkFBYkosS0FBS0ksTUFDMUNKLEtBQUtJLElBQU0sb0RBRVUsY0FBZEosS0FBS2pILFlBQ1UsSUFBYmlILEtBQUtJLEtBQW9DLDhCQUFiSixLQUFLSSxNQUMxQ0osS0FBS0ksSUFBTSx1QkFFYkosS0FBSzRNLGVBQWlCdFQsUUFBUUMsTUFBTTJhLFlBQVlsVSxLQUFLNE0sZ0JBQWtCLENBQUMsRUFBRyxDQUN6RTJnQyxXQUFXLEtBR1J4MkMsTUFBTW9VLE9BQU9uTCxLQUFNaEcsUUFDNUIsQ0FNQSxrQkFBQTB6QyxHQUNFLE1BQU1DLFdBQWEsQ0FDakJqM0MsUUFBUyxDQUNQaTJDLEdBQUksQ0FBQyxFQUNMSSxHQUFJLENBQUMsRUFDTHRvQixJQUFLLENBQUMsRUFDTnloQixJQUFLLENBQUMsRUFDTnJ2QyxHQUFJLENBQUMsRUFDTGl2QyxNQUFPLENBQUMsSUFzQlosWUFuQnNDdnRDLElBQWxDbUMsS0FBS2pFLE9BQU9DLFNBQVNpMkMsSUFBSTc1QyxPQUMzQjY2QyxXQUFXajNDLFFBQVFpMkMsR0FBRzc1QyxNQUFPLFFBRU95RixJQUFsQ21DLEtBQUtqRSxPQUFPQyxTQUFTcTJDLElBQUlqNkMsT0FDM0I2NkMsV0FBV2ozQyxRQUFRcTJDLEdBQUdqNkMsTUFBTyxRQUVReUYsSUFBbkNtQyxLQUFLakUsT0FBT0MsU0FBUyt0QixLQUFLM3hCLE9BQzVCNjZDLFdBQVdqM0MsUUFBUSt0QixJQUFJM3hCLE1BQU8sUUFFT3lGLElBQW5DbUMsS0FBS2pFLE9BQU9DLFNBQVN3dkMsS0FBS3B6QyxPQUM1QjY2QyxXQUFXajNDLFFBQVF3dkMsSUFBSXB6QyxNQUFPLFFBRU15RixJQUFsQ21DLEtBQUtqRSxPQUFPQyxTQUFTRyxJQUFJL0QsT0FDM0I2NkMsV0FBV2ozQyxRQUFRRyxHQUFHL0QsTUFBTyxRQUVVeUYsSUFBckNtQyxLQUFLakUsT0FBT0MsU0FBU292QyxPQUFPaHpDLE9BQzlCNjZDLFdBQVdqM0MsUUFBUW92QyxNQUFNaHpDLE1BQU8sR0FHM0I2NkMsVUFDVCxDQUVBLG1CQUFJdnZCLEdBQ0YsTUFBTUEsZ0JBQWtCLENBQ3RCbHRCLElBQUssQ0FDSEosTUFBTyxLQUNQb1IsVUFBVyxhQUNYbkssTUFBTyxrQkFDUHBELFFBQVMsTUFFWHhELElBQUssQ0FDSEwsTUFBTyxLQUNQb1IsVUFBVyxhQUNYbkssTUFBTyxzQkFDUHBELFFBQVMsTUFFWHZELElBQUssQ0FDSE4sTUFBTyxLQUNQb1IsVUFBVyxhQUNYbkssTUFBTyxjQUNQcEQsUUFBUyxNQUVYdEQsSUFBSyxDQUNIUCxNQUFPLEtBQ1BvUixVQUFXLGFBQ1huSyxNQUFPLG1CQUNQcEQsUUFBUyxNQUVYckQsSUFBSyxDQUNIUixNQUFPLEtBQ1BvUixVQUFXLGFBQ1huSyxNQUFPLG9CQUNQcEQsUUFBUyxNQUVYcEQsSUFBSyxDQUNIVCxNQUFPLEtBQ1BvUixVQUFXLGFBQ1huSyxNQUFPLHNCQUNQcEQsUUFBUyxNQUVYbkQsSUFBSyxDQUNIVixNQUFPLEtBQ1BvUixVQUFXLGFBQ1huSyxNQUFPLGVBQ1BwRCxRQUFTLE1BRVhsRCxJQUFLLENBQ0hYLE1BQU8sS0FDUG9SLFVBQVcsYUFDWG5LLE1BQU8sbUJBQ1BwRCxRQUFTLE9BR2IsR0FBSStGLEtBQUtqRSxPQUFPMm5CLGdCQUNkLElBQUssTUFBTzduQixJQUFLekYsU0FBVXdKLE9BQU93SyxRQUNoQ3BLLEtBQUtqRSxPQUFPMm5CLGlCQUVaQSxnQkFBZ0I3bkIsS0FBTyxDQUNyQkEsSUFDQTJMLFVBQVdsSyxLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTXF0QixPQUNwQ3BtQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTWlILE9BQ2hDakgsTUFBT0EsTUFBTUEsTUFDYjZkLEtBQU03UixLQUFLdUksTUFBTXZVLE1BQU1BLE1BQVEsSUFBTSxLQUNyQzhULFFBQVM5SCxLQUFLdUksTUFBTXZVLE1BQU1BLE1BQVEsSUFBTSxLQUN4QzZELFFBQVM3RCxNQUFNNkQsU0FJckIsT0FBT3lwQixlQUNULENBTUEsc0JBQWF3dkIsQ0FBV0MsWUFLeEIsQ0FFQSxrQkFBSTdyQixHQUNGLE9BQU90bkIsS0FBS296QyxtQkFBbUIxK0MsS0FBSzBGLE9BQU9DLFlBQzdDLENBRUEsOEJBQUlnNUMsR0FDRixPQUFPcnpDLEtBQUtzekMsa0JBQWtCNStDLEtBQUswRixPQUFPQyxZQUFhLGVBQ3pELENBRUEsa0JBQUk0dkIsR0FDRixPQUFPanFCLEtBQUtvekMsbUJBQW1CMStDLEtBQUswRixPQUFPRSxZQUM3QyxDQUVBLFlBQUlzaEIsR0FDRixPQUFLdGUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsY0FDeEI4QyxLQUFLZ1IsT0FBT29CLFNBQVNDLEtBQU9yUyxLQUFLa1MsZ0JBQWdCRSxTQUFTQyxNQURkclMsS0FBSzBGLEdBRTFELENBRUEsd0JBQU15aUIsQ0FBb0JvckIsVUFBVyxFQUFNbjFDLFNBQVcsR0FTcEQsSUFBSW1FLE9BQVMsS0FDYixNQUFNaXhDLHFCQUF1QkQsU0FDekJqMkMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQzFCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw2QkFDOUIsR0FBNkIsU0FBekJzMkMscUJBQWlDLENBQ25DanhDLE9BQVMsQ0FDUHpJLFFBQVEsRUFDUkQsT0FBTyxFQUNQd1QsWUFBYSxNQUVmLE1BQU1vbUMsbUJBQXFCbjJDLEtBQUtvMkMsT0FBT3gyQyxJQUFJczJDLHNCQUUzQyxHQURBanhDLE9BQU9veEMsZ0JBQWtCRixtQkFBbUJ0eUMsWUFDRCxJQUFoQ29CLE9BQU9veEMsVUFBVWp4QyxRQUFRLEdBQW9CLENBQ3RELEdBQ0V3TixNQUFNMGpDLG1CQUFtQkMsV0FDekJ0eEMsT0FBT294QyxVQUFVanhDLFFBQVEsR0FBR3JFLEtBQzVCLENBQ0EsTUFBTTRILEtBQU8zSSxLQUFLNFEsTUFBTWhSLElBQUlxRixPQUFPb3hDLFVBQVVqeEMsUUFBUSxHQUFHb3hDLFlBQ3hELFFBQW9CLElBQVQ3dEMsS0FBc0IsQ0FDM0JBLEtBQUtsSyxRQUFRc0MsTUFBTXZFLFNBQVF5SSxPQUFPekksUUFBUyxHQUMzQ21NLEtBQUtsSyxRQUFRc0MsTUFBTXhFLFFBQU8wSSxPQUFPMUksT0FBUSxHQUM3QzBJLE9BQU84SyxZQUFjLEdBQUdwSCxLQUFLM1AsY0FBZ0JpWCxXQUFXQyxXQUN0RHZILEtBQUtsSyxPQUFPc1IsWUFBWWpYLE1BQ3hCLENBQUVrTSxPQUFPLElBRVhDLE9BQU9qTSxLQUFPMlAsS0FBSzNQLEtBQ25CLE1BQU15OUMsU0FBVzl0QyxLQUFLK3RDLGtCQUNmRCxTQUFTNUMsVUFDVm54QyxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQzIyQyxVQUM5QyxNQUNFaHJDLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUtDLFNBQVMseUNBR3pCLENBRUUwUyxNQUFNMGpDLG1CQUFtQkssT0FDekIxeEMsT0FBT294QyxVQUFVanhDLFFBQVEsR0FBR3JFLE9BRTVCa0UsT0FBTzhLLGtCQUFvQkUsV0FBV0MsV0FDcENqTCxPQUFPb3hDLFVBQVVqeEMsUUFBUSxHQUFHd3hDLEtBQzVCLENBQUU1eEMsT0FBTyxJQUdmLE1BQ0V5RyxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLQyxTQUFTLDBDQUd6QixDQUdBLE9BQUsrMUMsVUFFTHZ6QyxLQUFLOHFCLGFBQWFwMkIsS0FBSzBGLE9BQU9DLFlBQWEsQ0FDekNrNUMsU0FDQW4xQyxXQU1LbUUsUUFWZUEsTUFXeEIsQ0FlQSxpQkFBTzR4QyxDQUNMcnRDLFVBQ0ExUSxPQUNBLFFBQ1csRUFBSyxNQUNQLEVBQUksUUFDRixFQUFLLEtBQ1IsRUFBSyxnQkFDTSxHQUNmLENBQUMsR0FFTCxNQUFNa1AsS0FBTyxDQUNYaFAsS0FBTXdRLFVBQ056SSxLQUFNLFFBQ050QyxPQUFRLENBQ04zRixNQUNBMFEsVUFDQUcsZUFBZ0IsR0FDaEJKLFdBQVksQ0FDVjNQLFNBQVMsRUFDVEMsT0FDQUMsS0FDQUMsVUFPTixJQUhZLElBQVJxTyxNQUNGSixLQUFLSSxJQUFNQSxNQUVVLElBQW5CdUIsZUFBMEIsQ0FDNUIsTUFBTUYsTUFBUTVCLFNBQVM2QixpQkFBaUJGLFVBQVdHLGdCQUNuRDNCLEtBQUt2SixPQUFPa0wsZUFBaUJGLE1BQU1FLGVBQ25DM0IsS0FBS3ZKLE9BQU8rSyxVQUFZQyxNQUFNRCxVQUM5QnhCLEtBQUtoUCxLQUFPeVEsTUFBTXpRLEtBQ2xCZ1AsS0FBS3ZKLE9BQU84SyxXQUFXM1AsU0FBVSxDQUNuQyxDQUNBLE9BQU9vTyxJQUNULENBa0NBLGlCQUFNOHVDLENBQWF0dEMsVUFBVzFRLE1BQU9pK0MsV0FBWSxHQUMvQyxNQUFNL3VDLEtBQU9xcUIsU0FBU3drQixXQUFXcnRDLFVBQVcxUSxPQUk1QyxhQUhzQjRKLEtBQUs1Qyx3QkFBd0IsT0FBUSxDQUFDa0ksTUFBTyxDQUNqRWd2QyxZQUFhRCxXQUdqQixDQUVBLHVCQUFNRSxDQUFtQmorQyxLQUFNa1EsVUFBVyxFQUFPOEQsS0FBTyxNQUd0RCxNQUFNa3FDLGdCQUFrQmxULHNCQUFzQjd3QixPQUM1QyxHQUNBblQsS0FBS0MsS0FBS0MsU0FDUmdKLFNBQ0ksaUNBQ0EsbUNBRU4sRUFDQWxRLE1BRUlGLE1BQVE4RixPQUFPczRDLFVBQVV0M0MsSUFBSSxlQUM3QjZKLE1BQVE1QixTQUFTNkIsaUJBQ3JCMVEsS0FDQWdILEtBQUtDLEtBQUtDLFNBQ1JnSixTQUNJLGlDQUNBLG9DQUdGbEIsS0FBTyxDQUNYaFAsS0FBTXlRLE1BQU16USxLQUNaK0gsS0FBTSxRQUNOdEMsT0FBUSxDQUNOdU8sS0FBTXhPLE1BQU0xRixPQUFTLEVBQUlBLE1BQ3pCeXlCLFlBQWEsQ0FDWDRyQixTQUFVLEtBQ1ZDLFdBQVksS0FDWkMsVUFBVyxLQUNYN3JCLFdBQVksTUFFZGhpQixVQUFXQyxNQUFNRCxVQUNqQkcsZUFBZ0JGLE1BQU1FLGVBQ3RCSixXQUFZLENBQ1YzUCxTQUFTLEVBQ1RJLFVBQVdrUCxTQUNYalAsUUFBU2lQLFNBQ1RuUCxRQUFRLFdBSVIySSxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ2tJLE1BQU8sQ0FDakRndkMsYUFBY2hxQyxPQUdoQixPQURjdEssS0FBSzY4QixnQkFBZ0J2bUMsTUFDdEIsRUFDZixDQUtBLGtCQUFNaTdDLEdBQ0osR0FBa0IsYUFBZHZ4QyxLQUFLM0IsS0FBcUIsT0FDOUIsR0FBSTJCLEtBQUs0bUMsYUFBYSxlQUFnQixPQU10QyxHQUFzQixJQUhQNW1DLEtBQUs2OEIsZ0JBQ2xCdi9CLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLdUcsd0JBRWYyRixPQUFjLENBRXZCLElBQ0UsTUFBTW1HLE1BQVE1QixTQUFTNkIsaUJBQ3JCMUosS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUt1Ryx1QkFDeEJxQyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBS3dHLDZCQUVwQm9LLEtBQU8sQ0FDWGpILEtBQU0sUUFDTi9ILEtBQU15USxNQUFNelEsS0FDWnlGLE9BQVEsQ0FDTnVPLEtBQU0sRUFDTmxVLE1BQU8sS0FDUDBRLFVBQVdDLE1BQU1ELFVBQ2pCRyxlQUFnQkYsTUFBTUUsZUFDdEJKLFdBQVksQ0FDVnhQLFFBQVEsRUFDUkMsVUFBVSxFQUNWSixTQUFTLEdBRVhnSSxNQUFPLENBQUMsSUFHTitJLFlBQWNqSSxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ2tJLE1BQU8sQ0FDL0RndkMsYUFBYSxJQUdUTSxhQUFlNTBDLEtBQUs1Qyx3QkFDeEIsT0FDQSxDQUNFLENBQ0U5RyxLQUFNLGdCQUNOK0gsS0FBTSxTQUNOdEMsT0FBUSxDQUNOc1IsWUFBYSxDQUNYalgsTUFBTyw0QkFDUHUxQixLQUFNLDZCQUVSa3BCLFFBQVMsU0FDVGh1QyxXQUFZLENBQ1Z2TyxNQUFNLEVBQ05DLE1BQU0sTUFLZCxDQUFFKzdDLGFBQWEsSUFFakIsR0FBSXJzQyxNQUFNckgsT0FBUyxHQUFLZzBDLE9BQU9oMEMsT0FBUyxFQUFHLENBQ3pDLE1BQU1rMEMsY0FBZ0I5MEMsS0FBS2tPLE1BQU1oUixJQUFJMDNDLE9BQU8sR0FBRzNtQyxVQUN6QzZtQyxjQUFjNTJDLE9BQU8sQ0FDekIsdUJBQXdCK0osTUFBTSxHQUFHZ0csR0FDakMseUJBQTBCaEcsTUFBTSxHQUFHM1IsTUFFdkMsQ0FDRixDQUFFLE1BQU93VSxLQUNQRyxRQUFRdVMsTUFBTSxrQkFBb0IxUyxJQUFJK0UsUUFDeEMsT0FFTTdQLEtBQUsrMEMsYUFBYSxjQUUxQixDQUNGLENBRUEsZ0JBQU1DLENBQVk5RixTQUFVK0YsU0FBVyxFQUFHWixXQUFZLEdBQ3BELE1BQU0vdUMsS0FBTyxDQUNYaFAsS0FBTTQ0QyxTQUNON3dDLEtBQU0sT0FDTnRDLE9BQVEsQ0FDTms1QyxXQU1KLGFBSHNCajFDLEtBQUs1Qyx3QkFBd0IsT0FBUSxDQUFDa0ksTUFBTyxDQUNqRWd2QyxZQUFhRCxXQUdqQixDQUVBLHFCQUFNYSxDQUFpQjM0QyxNQUFRLE1BQzdCLE1BQU04M0MsV0FBWTkzQyxRQUFTQSxNQUFNc3lCLFNBQ2pDLElBQUs3dUIsS0FBS20xQyxnQkFBZ0I3M0MsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUtrRyxjQUNoRCxPQUFPb0YsS0FBS28xQyxXQUFXOTNDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLa0csYUFBY3k1QyxXQUUvRCxJQUFJbDNCLE1BQVEsRUFDUit4QixTQUFXNXhDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLa0csYUFBZSxJQUFNdWlCLE1BQzVELEtBQU9uZCxLQUFLbTFDLGdCQUFnQmpHLFdBQzFCL3hCLFFBQ0EreEIsU0FBVzV4QyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBS2tHLGFBQWUsSUFBTXVpQixNQUUxRCxPQUFPbmQsS0FBS28xQyxXQUFXbEcsU0FBVW1GLFVBQ25DLENBRUEsZ0JBQU1lLENBQVlsRyxTQUFVbUYsV0FBWSxHQUN0QyxNQUFNL3VDLEtBQU8sQ0FDWGhQLEtBQU00NEMsU0FDTjd3QyxLQUFNLE9BQ050QyxPQUFRLENBQUMsR0FLWCxhQUhzQmlFLEtBQUs1Qyx3QkFBd0IsT0FBUSxDQUFDa0ksTUFBTyxDQUNqRWd2QyxZQUFhRCxXQUdqQixDQUVBLHNCQUFNZ0IsQ0FBa0I5NEMsTUFBUSxNQUM5QixNQUFNODNDLFdBQVk5M0MsUUFBU0EsTUFBTXN5QixTQUNqQyxJQUFLN3VCLEtBQUttMUMsZ0JBQWdCNzNDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLb0csZUFDaEQsT0FBT2tGLEtBQUtzMUMsWUFBWWg0QyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBS29HLGNBQWV1NUMsV0FFakUsSUFBSWwzQixNQUFRLEVBQ1IreEIsU0FBVzV4QyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBS29HLGNBQWdCLElBQU1xaUIsTUFDN0QsS0FBT25kLEtBQUttMUMsZ0JBQWdCakcsV0FDMUIveEIsUUFDQSt4QixTQUFXNXhDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLb0csY0FBZ0IsSUFBTXFpQixNQUUzRCxPQUFPbmQsS0FBS3MxQyxZQUFZcEcsU0FBVW1GLFVBQ3BDLENBRUEsaUJBQU9rQixDQUFZckcsVUFNakIsTUFMYSxDQUNYNTRDLEtBQU00NEMsU0FDTjd3QyxLQUFNLFFBQ050QyxPQUFRLENBQUMsRUFHYixDQUVBLGlCQUFNdTVDLENBQWFwRyxTQUFVbUYsV0FBWSxHQUN2QyxNQUFNL3VDLEtBQU9xcUIsU0FBUzRsQixXQUFXckcsVUFJakMsYUFIc0JsdkMsS0FBSzVDLHdCQUF3QixPQUFRLENBQUNrSSxNQUFPLENBQ2pFZ3ZDLFlBQWFELFdBR2pCLENBRUEsc0JBQU1tQixDQUFrQmo1QyxNQUFRLE1BQzlCLE1BQU04M0MsV0FBWTkzQyxRQUFTQSxNQUFNc3lCLFNBQ2pDLElBQUs3dUIsS0FBS20xQyxnQkFBZ0I3M0MsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUttRyxlQUNoRCxPQUFPbUYsS0FBS28wQyxZQUNWOTJDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLbUcsY0FDVCxjQUFkbUYsS0FBSzNCLEtBQXVCLEVBQUksS0FDakNnMkMsV0FHSixJQUFJbDNCLE1BQVEsRUFDUnJXLFVBQVl4SixLQUFLQyxLQUFLQyxTQUFTOUksS0FBS21HLGNBQWdCLElBQU1zaUIsTUFDOUQsS0FBT25kLEtBQUttMUMsZ0JBQWdCcnVDLFlBQzFCcVcsUUFDQXJXLFVBQVl4SixLQUFLQyxLQUFLQyxTQUFTOUksS0FBS21HLGNBQWdCLElBQU1zaUIsTUFHNUQsT0FBT25kLEtBQUtvMEMsWUFBWXR0QyxVQUFXLEtBQU11dEMsVUFDM0MsQ0FFQSxxQkFBTW9CLENBQWlCbDVDLE1BQVEsTUFDN0IsTUFBTTgzQyxXQUFZOTNDLFFBQVNBLE1BQU1zeUIsU0FDakMsSUFBSzd1QixLQUFLbTFDLGdCQUFnQjczQyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBS3FHLGNBQ2hELE9BQU9pRixLQUFLZzFDLFdBQVcxM0MsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUtxRyxhQUFjLEVBQUdzNUMsV0FFbEUsSUFBSWwzQixNQUFRLEVBQ1IreEIsU0FBVzV4QyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBS3FHLGFBQWUsSUFBTW9pQixNQUM1RCxLQUFPbmQsS0FBS20xQyxnQkFBZ0JqRyxXQUMxQi94QixRQUNBK3hCLFNBQVc1eEMsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUtxRyxhQUFlLElBQU1vaUIsTUFFMUQsT0FBT25kLEtBQUtnMUMsV0FBVzlGLFNBQVUsRUFBR21GLFVBQ3RDLENBRUEsdUJBQU1xQixDQUFtQm41QyxNQUFRLEtBQU1zSyxXQUFhLENBQUMsR0FDbkQsTUFBTXd0QyxXQUFZOTNDLFFBQVNBLE1BQU1zeUIsU0FDakMsSUFBSTBPLFdBQWFqZ0MsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUtzRyxlQUN6QyxHQUFJZ0YsS0FBS20xQyxnQkFBZ0I3M0MsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUtzRyxnQkFBaUIsQ0FDaEUsSUFBSW1pQixNQUFRLEVBRVosSUFEQW9nQixXQUFhamdDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLc0csZUFBaUIsSUFBTW1pQixNQUNyRG5kLEtBQUttMUMsZ0JBQWdCNVgsYUFDMUJwZ0IsUUFDQW9nQixXQUFhamdDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLc0csZUFBaUIsSUFBTW1pQixLQUVoRSxDQUVBLE1BQU03WCxLQUFPLENBQ1hoUCxLQUFNaW5DLFdBQ05sL0IsS0FBTSxTQUNOdEMsT0FBUSxDQUNOOEssV0FBWSxDQUFDLElBSWpCLElBQUssTUFBT2hMLE9BQVErRCxPQUFPd0ssUUFBUTFWLEtBQUttWixrQkFDdEN2SSxLQUFLdkosT0FBTzhLLFdBQVdoTCxLQUNyQitELE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLK04sV0FBWWhMLE9BQVEsUUFHdkRtRSxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ2tJLE1BQU8sQ0FDakRndkMsWUFBYUQsV0FFakIsQ0FFQSxzQkFBTXNCLENBQWtCbG5DLE1BQVEsTUFDOUIsTUFBTW1uQyxJQUFNNTFDLEtBQUtqRSxPQUFPODVDLFVBQ3BCajNDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU84NUMsV0FDcEMsR0FDSkQsSUFBSXgrQyxLQUFLLENBQ1BxWCxNQUNBclksTUFBTyxhQUVINEosS0FBSzlCLE9BQU8sQ0FBRSxtQkFBb0IwM0MsS0FBTyxDQUFFdEIsYUFBYSxHQUNoRSxDQUVBLG9CQUFNd0IsQ0FBZ0IzNEIsTUFBTzNNLFNBQzNCLE1BQU1vbEMsSUFBTWgzQyxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPODVDLFdBQ2hERCxJQUFJejRCLE9BQU8vbUIsTUFBUW9hLGNBQ2J4USxLQUFLOUIsT0FBTyxDQUFFLG1CQUFvQjAzQyxLQUFPLENBQUU1M0MsUUFBUSxHQUMzRCxDQUVBLG9CQUFNKzNDLENBQWdCNTRCLE1BQU8xTyxPQUMzQixNQUFNbW5DLElBQU1oM0MsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBTzg1QyxXQUNoREQsSUFBSXo0QixPQUFPMU8sTUFBUUEsWUFDYnpPLEtBQUs5QixPQUFPLENBQUUsbUJBQW9CMDNDLEtBQzFDLENBRUEsc0JBQU1JLENBQWtCNzRCLE9BQ3RCLE1BQU15NEIsSUFBTWgzQyxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPODVDLFdBQ2hERCxJQUFJemYsT0FBT2haLE1BQU8sU0FDWm5kLEtBQUs5QixPQUFPLENBQUUsbUJBQW9CMDNDLEtBQzFDLENBRUEsc0JBQU1LLENBQWtCOTRCLE9BQ3RCLEdBQWMsSUFBVkEsTUFBYSxPQUNqQixNQUFNeTRCLElBQU1oM0MsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBTzg1QyxXQUNoRCxHQUFJMTRCLE9BQVN5NEIsSUFBSWgxQyxPQUFRLE9BQ3pCLE1BQU1xdEMsS0FBTzJILElBQUl6ZixPQUFPaFosTUFBTyxHQUFHLEdBQ2xDeTRCLElBQUl6ZixPQUFPaFosTUFBUSxFQUFHLEVBQUc4d0IsWUFDbkJqdUMsS0FBSzlCLE9BQU8sQ0FBRSxtQkFBb0IwM0MsS0FDMUMsQ0FFQSx3QkFBTU0sQ0FBb0IvNEIsT0FDeEIsTUFBTXk0QixJQUFNaDNDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU84NUMsV0FDaEQsR0FBSTE0QixPQUFTeTRCLElBQUloMUMsT0FBUyxFQUFHLE9BQzdCLE1BQU1xdEMsS0FBTzJILElBQUl6ZixPQUFPaFosTUFBTyxHQUFHLEdBQ2xDeTRCLElBQUl6ZixPQUFPaFosTUFBUSxFQUFHLEVBQUc4d0IsWUFDbkJqdUMsS0FBSzlCLE9BQU8sQ0FBRSxtQkFBb0IwM0MsS0FDMUMsQ0FFQSxvQkFBTU8sQ0FBZ0JDLFVBQ3BCLE1BQU05L0MsS0FBTyxVQUFZOC9DLFNBQVNyNUMsUUFBUXM1QyxlQUNwQ3IyQyxLQUFLOUIsT0FBTyxDQUFFLENBQUM1SCxNQUFPOC9DLFNBQVNoZ0QsT0FDdkMsQ0FzQkEsNkJBQU1nSCxDQUF5Qms1QyxhQUFjQyxVQUFXajNDLFNBQ3RELE1BQU1rM0MsbUJBQXFCLEdBQzNCLElBQUloVixVQUFZLEVBQ1ppVixlQUFpQixFQUNqQjlCLFdBQVksRUFDWkQsWUFBYSxFQUNqQixJQUFLLElBQUlwdkMsUUFBUWl4QyxVQUNmLE9BQVFqeEMsS0FBS2pILE1BQ1gsSUFBSyxRQUFTLENBR1osR0FGQW1qQyxVQUFZbDhCLEtBQUt2SixPQUFPdU8sS0FDeEJtc0MscUJBQXVCdHhDLFNBQVNrRixjQUFjckssS0FBTXNGLE1BQ2xDLGNBQWR0RixLQUFLM0IsS0FBc0IsQ0FFN0IsR0FBSTJCLEtBQUttMUMsZ0JBQWdCN3ZDLEtBQUtoUCxNQUFPLE9BUXJDLEdBTklrckMsV0FDRXBsQyxPQUFPb2xDLGFBQWVwbEMsT0FBT2tKLEtBQUt2SixPQUFPM0YsU0FDM0NrUCxLQUFLdkosT0FBTzNGLE1BQVFxZ0QsZ0JBSXBCMzZDLE1BQU1JLE9BQU9vSixLQUFLdkosT0FBTzNGLFFBQVMsQ0FDcEMsSUFBSUEsTUFDSixJQUNFQSxhQUNRLElBQUkwTCxLQUNSd0QsS0FBS3ZKLE9BQU8zRixNQUNaNEosS0FBSzAyQyx3QkFDTDlyQyxTQUFTLENBQUV0SSxPQUFPLEtBQ3BCRyxLQUNKLENBQUUsTUFBT3FJLEtBQ1AxVSxNQUFRLElBQ1YsQ0FDSUEsUUFBT2tQLEtBQUt2SixPQUFPM0YsTUFBUWdNLEtBQUt1SSxNQUFNdlUsT0FDNUMsQ0FDRixNQUNFa1AsS0FBS3ZKLE9BQU8zRixNQUFRLEtBR3RCLElBQUl1Z0QsU0FBVSxFQUVkLEdBQUl4eEMsU0FBUzRDLFVBQVV6QyxNQUFPLENBQzVCLE1BQU1zeEMscUJBQXdCdHhDLEtBQUt2SixPQUFPOEssWUFBWXJQLGVBQWlCLEtBQVk4TixLQUFLdkosT0FBTzhLLFlBQVluUCxhQUMzRyxJQUFJb1UsVUFBWSxHQUNoQixNQUFNaU4sTUFBUXpiLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU00ekIsdUJBQXVCdnhDLE1BTTNELEdBTEl5VCxRQUNGak4saUJBQW1CeE8sS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTTZ6QixtQkFBbUIsQ0FBRUMsWUFBYSxJQUFJcHZDLE9BQU8sSUFBTUMsY0FBY0MsWUFBWWtSLE9BQVMsT0FBUTFhLEtBQU0sT0FBUTlILFFBQU8wUCxPQUNsSkEsS0FBS2xLLE9BQU84SyxZQUFZM1AsVUFBVyxLQUFZK08sS0FBS2xLLE9BQU84SyxZQUFZclAsZUFBNEJ5TyxLQUFLbEssT0FBTzhLLFlBQVluUCxnQkFHbkk0TixLQUFLdkosUUFBUW1ELE9BQU93MUMsWUFBY3B2QyxLQUFLdkosUUFBUW1ELE9BQU95MUMsVUFBVyxDQUNuRSxNQUFNcUMsZUFBaUJoM0MsS0FBSzJqQixPQUFPcHRCLFFBQU8wZ0QsTUFDbkNBLEdBQUdsN0MsT0FBT2tMLG1CQUViM0IsS0FBS3ZKLFFBQVFtRCxPQUFPdzFDLGFBQ3BCdUMsR0FBR2w3QyxPQUFPbUQsT0FBT3cxQyxnQkFLakJwdkMsS0FBS3ZKLFFBQVFtRCxPQUFPeTFDLFlBQ3BCc0MsR0FBR2w3QyxPQUFPbUQsT0FBT3kxQyxZQUtqQnJ2QyxLQUFLdkosT0FBT2tMLGVBQWVpd0Msc0JBQzNCRCxHQUFHbDdDLE9BQU9rTCxlQUFlaXdDLHdCQUc3QixHQUFJRixlQUFlcDJDLE9BQVMsRUFDMUIsR0FBSWtMLFVBQVVsTCxPQUFTLEVBQUcsQ0FDeEIsSUFBSyxJQUFJMGYsRUFBSTAyQixlQUFlcDJDLE9BQVMsRUFBRzBmLEdBQUssRUFBR0EsSUFBSyxDQUNuRCxNQUFNdlMsTUFBUWpDLFVBQVVxckMsV0FBVWx4QyxNQUN6QkEsS0FBSzNQLE9BQVMwZ0QsZUFBZTEyQixHQUFHaHFCLE1BQVEyUCxLQUFLL0csT0FBT3dDLE1BQU1nd0MsV0FBV3pqQyxLQUFPK29DLGVBQWUxMkIsR0FBR3BoQixPQUFPd0MsTUFBTWd3QyxXQUFXempDLEtBRTNIRixPQUFTLEdBQ1hqQyxVQUFVcXFCLE9BQU9wb0IsTUFBTyxFQUU1QixDQUNBakMsVUFBWUEsVUFBVUMsT0FBT2lyQyxlQUMvQixNQUNFbHJDLFVBQVlrckMsY0FHbEIsQ0FDSWxyQyxVQUFVbEwsT0FBUyxHQUNyQmtMLFVBQVVJLEtBQUt0RSxjQUFjdUUsZUFFL0IsTUFBTXFvQyxnQkFBa0I5UyxnQ0FBZ0NqeEIsT0FBTyxDQUM3RGtULE9BQVE3WCxVQUNSKzFCLFlBQWMrVSxxQkFBdUJ0eEMsS0FBS3ZKLE9BQU84SyxZQUFZclAsZUFBZ0IsR0FDN0VzcUMsZUFBaUJ4OEIsS0FBS3ZKLE9BQU84SyxZQUFZcFAsZ0JBQWlCLEVBQzFEOHBDLG1CQUFvQmo4QixLQUFLdkosT0FBT2tMLGVBQ2hDNUosTUFBT2lJLEtBQUtoUCxLQUNaa3JDLFVBQVdsOEIsS0FBS3ZKLE9BQU91TyxPQUV6QixHQUFJMUssT0FBT0MsVUFBVUMsZUFBZWhILEtBQUswN0MsVUFBVyxZQUNsRCxHQUFJQSxVQUFVbi9CLFNBQVUsQ0FDdEIsTUFBTStoQyxhQUFlcDNDLEtBQUtrTyxNQUFNaFIsSUFDOUJzM0MsVUFBVW4vQixVQUVaLEdBQUkraEMsYUFBYyxDQUNoQixNQUFNbHBCLFFBQVUsQ0FBQyxFQUNYNW9CLEtBQUt2SixPQUFPOEssWUFBWXBQLGVBQ0EsS0FBeEIrOEMsVUFBVWhULFlBQ1ppVixlQUFpQmpDLFVBQVVoVCxVQUMzQnRULFFBQVEsZ0JBQWtCdW9CLGdCQUc5QixJQUFLLE1BQU81NkMsSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTlFLEtBQUt2SixPQUFPbUQsT0FDaEQ5SSxRQUNGODNCLFFBQVEsZ0JBQWdCcnlCLFFBQVMsR0FHakMrRCxPQUFPbUUsS0FBS21xQixTQUFTdHRCLE9BQVMsSUFDaENzdEIsUUFBUWlqQixJQUFNaUcsYUFBYW5wQyxTQUNyQmpPLEtBQUtxM0Msd0JBQXdCLE9BQVEsQ0FBQ25wQixXQUU5QzVvQixLQUFLaFAsS0FBTzZPLFNBQVMyQyxtQkFBbUJzdkMsY0FDeENULFNBQVUsQ0FDWixLQUFPLENBQ0wsTUFBTVcsU0FBV3hyQyxVQUFVcE0sTUFBSzRnQixHQUFLQSxFQUFFclMsS0FBT3VtQyxVQUFVbi9CLFdBQ3hELEdBQUlpaUMsU0FBVSxDQUNaLE1BQU1wNEMsTUFBUW9HLEtBQUt2SixRQUFRbUQsTUFDckJxNEMsU0FBWWp5QyxLQUFLdkosT0FBTzhLLFlBQVlwUCxnQkFBaUIsRUFDM0Q2TixLQUFPMUcsUUFBUUMsTUFBTXVPLFVBQVVrcUMsVUFDL0IsSUFBSyxNQUFPejdDLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVFsTCxPQUNwQzlJLFFBQ0ZrUCxLQUFLdkosT0FBT21ELE1BQU1yRCxNQUFPLEdBR3pCMDdDLFdBQzBCLEtBQXhCL0MsVUFBVWhULFlBQ1psOEIsS0FBS3ZKLE9BQU91TyxLQUFPa3FDLFVBQVVoVCxXQUUvQkEsVUFBWWdULFVBQVVoVCxVQUN0QmlWLHFCQUF1QnR4QyxTQUFTa0YsY0FBY3JLLEtBQU1zRixNQUV4RCxDQUNGLENBQ0YsS0FBTyxDQUNMLE1BQU15QixNQUFRNUIsU0FBUzZCLGlCQUNyQnd0QyxVQUFVbCtDLEtBQ1ZnUCxLQUFLdkosT0FBT2tMLGdCQUVSM0IsS0FBS3ZKLE9BQU84SyxZQUFZcFAsZ0JBQ0EsS0FBeEIrOEMsVUFBVWhULFlBQ1psOEIsS0FBS3ZKLE9BQU91TyxLQUFPa3FDLFVBQVVoVCxXQUUvQkEsVUFBWWdULFVBQVVoVCxVQUN0QmlWLHFCQUF1QnR4QyxTQUFTa0YsY0FBY3JLLEtBQU1zRixPQUV0REEsS0FBS3ZKLE9BQU8rSyxVQUFZQyxNQUFNRCxVQUM5QnhCLEtBQUtoUCxLQUFPeVEsTUFBTXpRLElBQ3BCLENBRUosQ0FFSXFnRCxVQUNFdjZDLE9BQU9vbEMsYUFBZXBsQyxPQUFPcTZDLGtCQUMvQm54QyxLQUFLdkosT0FBT3VPLEtBQU9tc0MsZ0JBR3JCRCxtQkFBbUJwL0MsS0FBS3dILFFBQVFDLE1BQU11TyxVQUFVOUgsUUFFbEQsS0FDRixDQUVBLElBQUssU0FDSCxHQUFrQixjQUFkdEYsS0FBSzNCLEtBQXNCLENBQzdCLE1BQU1tNUMsVUFBWWx5QyxLQUFLdkosUUFBUWtNLE9BQU8rRixNQUFNMVgsS0FDNUMsR0FBSWtoRCxVQUFXLENBQ2IsSUFBSXZ2QyxNQUFRakksS0FBSzY4QixnQkFBZ0IyYSxXQUFXLEdBQzVDLElBQUt2dkMsTUFBTyxDQUNWLE1BQU0zUixLQUFPa2hELFVBQVUzeEMsTUFBTSxlQUN6QjJ4QyxVQUFVM3hDLE1BQU0sZUFBZSxHQUMvQjJ4QyxVQUdFRixTQUFXaDZDLEtBQUs0USxNQUFNeE8sTUFDMUJ1RyxNQUFzQixVQUFkQSxLQUFLNUgsT0FDVjRILEtBQUszUCxLQUFLNGdELHNCQUF3QjVnRCxLQUFLNGdELHFCQUF1Qmp4QyxLQUFLbEssT0FBTytLLFdBQVdvd0Msc0JBQXdCNWdELEtBQUs0Z0QsNEJBRS9GLElBQWJJLGdCQUNIdDNDLEtBQUt5M0MsU0FBUyxDQUFDSCxXQUNyQnJ2QyxZQUFjakksS0FBSzY4QixnQkFBZ0IyYSxXQUFXLElBRzlDdnZDLFlBQWNqSSxLQUFLdTBDLGtCQUNqQmorQyxPQUNFZ1AsS0FBS3ZKLE9BQU84SyxZQUFZaFAsS0FHaEMsQ0FDSW9RLFFBQU8zQyxLQUFLdkosT0FBT2tNLE1BQU0rRixLQUFLQyxHQUFLaEcsTUFBTWdHLEdBQy9DLENBRUEsTUFBTXlwQyxZQUFjcHlDLEtBQUt2SixRQUFRa00sT0FBT2tHLFlBQVk3WCxLQUNwRCxHQUFJb2hELFlBQWEsQ0FDZixJQUFJenZDLE1BQVFqSSxLQUFLNjhCLGdCQUFnQjZhLGFBQWEsR0FDOUMsSUFBS3p2QyxNQUFPLENBQ1YsTUFBTTNSLEtBQU9vaEQsWUFBWTd4QyxNQUFNLGVBQzNCNnhDLFlBQVk3eEMsTUFBTSxlQUFlLEdBQ2pDNnhDLFlBQ0VKLFNBQVdoNkMsS0FBSzRRLE1BQU14TyxNQUMxQnVHLE1BQXNCLFVBQWRBLEtBQUs1SCxPQUNWNEgsS0FBSzNQLEtBQUs0Z0Qsc0JBQXdCNWdELEtBQUs0Z0QscUJBQXVCanhDLEtBQUtsSyxPQUFPK0ssV0FBV293QyxzQkFBd0I1Z0QsS0FBSzRnRCw0QkFFL0YsSUFBYkksZ0JBQ0h0M0MsS0FBS3kzQyxTQUFTLENBQUNILFdBQ3JCcnZDLFlBQWNqSSxLQUFLNjhCLGdCQUFnQjZhLGFBQWEsSUFHaER6dkMsWUFBY2pJLEtBQUt1MEMsa0JBQ2pCaitDLE9BQ0VnUCxLQUFLdkosT0FBTzhLLFlBQVloUCxLQUdoQyxDQUNJb1EsUUFBTzNDLEtBQUt2SixPQUFPa00sTUFBTWtHLFdBQVdGLEdBQUtoRyxNQUFNZ0csR0FDckQsQ0FDRixDQUVBdW9DLG1CQUFtQnAvQyxLQUFLd0gsUUFBUUMsTUFBTXVPLFVBQVU5SCxPQUNoRCxNQUdGLElBQUssUUFBUyxDQUNaLEdBQUlBLEtBQUt2SixPQUFPNDdDLHVCQUF3QixDQUN0Q3J5QyxLQUFLdkosT0FBTzJuQixnQkFBZ0JzZCxLQUFPLENBQUMsRUFDcEMxN0IsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS3hxQyxJQUFNd0osS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS3ZxQyxJQUFNdUosS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS3RxQyxJQUFNc0osS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS3JxQyxJQUFNcUosS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS3BxQyxJQUFNb0osS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS25xQyxJQUFNbUosS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS2xxQyxJQUFNa0osS0FBSzQzQyxrQkFBa0IsT0FDOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS2pxQyxJQUFNaUosS0FBSzQzQyxrQkFBa0IsT0FFOUR0eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBSzZXLEtBQU8sQ0FBQyxFQUN6Q3Z5QyxLQUFLdkosT0FBTzJuQixnQkFBZ0JzZCxLQUFLNlcsS0FBS3poRCxNQUFRMEYsTUFBTWtFLEtBQUs2M0MsTUFDckQsS0FDQTczQyxLQUFLNjNDLEtBQ1R2eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBSzZXLEtBQUt4NkMsTUFBUUMsS0FBS0MsS0FBS0MsU0FDdEQsYUFFRjhILEtBQUt2SixPQUFPMm5CLGdCQUFnQnNkLEtBQUs2VyxLQUFLcndDLFVBQVlsSyxLQUFLQyxLQUFLQyxTQUMxRCxhQUdHOEgsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLFNBQy9COEYsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQVMsQ0FBQyxHQUV4QzhGLEtBQUt2SixPQUFPMm5CLGdCQUFnQmxrQixPQUFPaEosSUFDakM4TyxLQUFLdkosT0FBTzJuQixnQkFBZ0JzZCxLQUFLeHFDLElBQUlKLE1BQ3ZDa1AsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8vSSxJQUNqQzZPLEtBQUt2SixPQUFPMm5CLGdCQUFnQnNkLEtBQUt2cUMsSUFBSUwsTUFDdkNrUCxLQUFLdkosT0FBTzJuQixnQkFBZ0Jsa0IsT0FBTzlJLElBQ2pDNE8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS3RxQyxJQUFJTixNQUN2Q2tQLEtBQUt2SixPQUFPMm5CLGdCQUFnQmxrQixPQUFPN0ksSUFDakMyTyxLQUFLdkosT0FBTzJuQixnQkFBZ0JzZCxLQUFLcnFDLElBQUlQLE1BQ3ZDa1AsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU81SSxJQUNqQzBPLEtBQUt2SixPQUFPMm5CLGdCQUFnQnNkLEtBQUtwcUMsSUFBSVIsTUFDdkNrUCxLQUFLdkosT0FBTzJuQixnQkFBZ0Jsa0IsT0FBTzNJLElBQ2pDeU8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCc2QsS0FBS25xQyxJQUFJVCxNQUN2Q2tQLEtBQUt2SixPQUFPMm5CLGdCQUFnQmxrQixPQUFPMUksSUFDakN3TyxLQUFLdkosT0FBTzJuQixnQkFBZ0JzZCxLQUFLbHFDLElBQUlWLE1BQ3ZDa1AsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU96SSxJQUNqQ3VPLEtBQUt2SixPQUFPMm5CLGdCQUFnQnNkLEtBQUtqcUMsSUFBSVgsTUFDdkNrUCxLQUFLdkosT0FBTzJuQixnQkFBZ0Jsa0IsT0FBT3E0QyxLQUNqQ3Z5QyxLQUFLdkosT0FBTzJuQixnQkFBZ0JzZCxLQUFLNlcsS0FBS3poRCxNQUNwQ2tQLEtBQUt2SixPQUFPMm5CLGdCQUFnQnVkLE9BQU9FLFFBQ3JDNzdCLEtBQUt2SixPQUFPMFMsTUFBUW5SLEtBQUtDLEtBQUtDLFNBQVMsb0JBRXZDOEgsS0FBS3ZKLE9BQU8wUyxNQUFRblIsS0FBS0MsS0FBS0MsU0FBUyxtQkFFekM4SCxLQUFLdkosT0FBT3NsQyxnQkFDaUMsT0FBM0MvN0IsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU9oSixLQUNRLE9BQTNDOE8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8vSSxLQUNRLE9BQTNDNk8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU85SSxLQUNRLE9BQTNDNE8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU83SSxLQUNRLE9BQTNDMk8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU81SSxLQUNRLE9BQTNDME8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8zSSxLQUNRLE9BQTNDeU8sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8xSSxLQUNRLE9BQTNDd08sS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU96SSxLQUdyQyxVQURxQm1wQyxpQkFBaUJ6dkIsT0FBT25MLEtBQUt2SixRQXdDaEQsT0F2Q1UsQ0FDVixNQUFNaTJCLFdBQWEsQ0FBQyxFQUNwQixJQUFLLE1BQU1uMkIsTUFBTyxDQUNoQixNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE9BRUl5SixLQUFLdkosT0FBTzJuQixnQkFBZ0Jsa0IsT0FBTzNELE9BQ3JDbTJCLFdBQVcsMEJBQTBCbjJCLGFBQ25DeUosS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8zRCxLQUNyQ20yQixXQUFXLDBCQUEwQm4yQixlQUNuQ3lKLEtBQUt2SixPQUFPMm5CLGdCQUFnQnZNLE1BQU10YixNQUdwQ3lKLEtBQUt2SixPQUFPMm5CLGdCQUFnQmxrQixPQUFPcTRDLE9BQ3JDN2xCLFdBQVcsNEJBQ1Qxc0IsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU9xNEMsTUFFbkN2eUMsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8xSSxNQUNyQ2s3QixXQUFXLDRCQUNUMXNCLEtBQUt2SixPQUFPMm5CLGdCQUFnQmxrQixPQUFPMUksSUFDckNrN0IsV0FBVyxpQ0FBbUM1dkIsS0FBS3VJLE1BQ2pEckYsS0FBS3ZKLE9BQU8ybkIsZ0JBQWdCbGtCLE9BQU8xSSxJQUFNLEdBRTNDazdCLFdBQVcseUJBQTJCNXZCLEtBQUt1SSxNQUN6Q3JGLEtBQUt2SixPQUFPMm5CLGdCQUFnQmxrQixPQUFPMUksSUFBTSxVQUd2Q2tKLEtBQUs5QixPQUFPOHpCLFdBQVksQ0FBRXNpQixhQUFhLFVBQ3ZDdDBDLEtBQUs5QixPQUFPLENBQ2hCLDBCQUEyQjhCLEtBQUtveUMsU0FDaEMsd0JBQXlCcHlDLEtBQUtveUMsVUFDN0IsQ0FBRWtDLGFBQWEsR0FDcEIsQ0FHRixDQUNBLE1BQU13RCxJQUFNbDRDLE9BQU93SyxRQUFROUUsS0FBS3BHLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsTUFBTW5RLFFBQU9pSyxHQUFLQSxFQUFFLEtBQUl3RCxLQUFJeEQsR0FBS0EsRUFBRSxLQUNyRjBOLFlBQWM1USxLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNODBCLGdCQUFnQixDQUFFalksU0FBVXg2QixLQUFLdkosT0FBT21TLE1BQU80cEMsU0FBd0IsSUFBWEEsSUFBSSxJQUFxQkEsSUFBSSxLQUM3SG4wQixPQUFTelYsTUFBTTNYLFFBQU95aEQsSUFBa0IsVUFBWkEsR0FBRzM1QyxPQUMvQjQ1QyxZQUFjL3BDLE1BQU0zWCxRQUFPeWhELElBQWtCLFVBQVpBLEdBQUczNUMsT0FHMUMsU0FGTTJCLEtBQUtrNEMsZUFBZXYwQixjQUNwQjNqQixLQUFLeTNDLFNBQVNRLGFBQ2hCMzZDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUN0QjhDLEtBQUs5QixPQUFPLENBQUUsbUJBQW9Cb0gsS0FBS3ZKLE9BQU9vOEMsV0FBYSxDQUFFN0QsYUFBYSxTQUVoRixJQUFLLE1BQU04RCxlQUFlOXlDLEtBQUt2SixPQUFPczhDLGFBRWpDcjRDLEtBQUtqRSxPQUFPODVDLFdBQVduMkMsTUFDdEJ1M0MsSUFBTW1CLGNBQWdCbkIsR0FBR3hvQyxTQUUzQjJwQyxtQkFFTXA0QyxLQUFLMjFDLGlCQUFpQnlDLGFBS2xDLE1BQU1FLFNBQVcxNUMsUUFBUUMsTUFBTTJhLFlBQVl4WixLQUFLakUsT0FBT3U4QyxTQUFVMTVDLFFBQVFDLE1BQU11TyxVQUFVOUgsS0FBS3ZKLE9BQU91OEMsV0FDL0Z2NkMsTUFBUWlDLEtBQUtqQyxNQUNuQixJQUFJdW9CLE9BQVEsRUFDWixHQUNFQSxZQUFjLElBQUl0SyxTQUFRaEIsU0FBV3VHLFlBQVcsS0FDOUN2RyxRQUFRamQsTUFBTXc2QyxPQUFNLEdBQ25CLGFBQ0lqeUIsUUFBVWt5QixZQUFZQyxjQUFjQyxpQkFDdkMxNEMsS0FBSzlCLE9BQU8sQ0FDaEIsa0JBQW1CbzZDLFdBRXJCSyxNQUFNNy9DLEtBQUsscUJBQ1gsS0FDRixDQUNBLElBQUssWUFDSCxHQUFrQixjQUFka0gsS0FBSzNCLEtBQXNCLENBRTdCLEdBQUkyQixLQUFLMjBDLFVBQVcsQ0FDbEIsSUFBSWlFLGdCQUFpQixFQVdyQixTQVZNMWtCLE9BQU8ya0IsUUFBUSxDQUNuQnBxQyxNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyx1QkFDMUJnVCxRQUFTLE1BQU1sVCxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDekQxZCxLQUFNMEosS0FBSzFKLGFBRWJ3aUQsSUFBSyxLQUNIRixnQkFBaUIsR0FFbkJHLFlBQVksS0FFVkgsZUFDQyxhQURxQjU0QyxLQUFLNDRDLGdCQUVqQyxDQUVBLE1BQU1JLFdBQWEsR0FDbkIsSUFBSyxNQUFNQyxTQUFTcjVDLE9BQU93SyxRQUFROUUsS0FBS3ZKLE9BQU9tOUMscUJBQXNCLENBQ25FLE1BQU9yOUMsSUFBS3pGLE9BQVM2aUQsTUFFckIsR0FEQTN6QyxLQUFLdkosT0FBT205QyxvQkFBb0JyOUMsTUFBTyxFQUNuQ3pGLE1BQU8sQ0FDVCxNQUFNd3FDLEtBQU81Z0MsS0FBSzQzQyxrQkFBa0IvN0MsS0FDcEMra0MsS0FBSy9rQyxJQUFNQSxJQUNYbTlDLFdBQVc1aEQsS0FBS3dwQyxLQUNsQixDQUNGLENBRUEsSUFBSXVZLE9BRUosR0FBSUgsV0FBV3A0QyxPQUFTLEVBQUcsQ0FDekIsTUFBTXc0QyxlQUFpQixDQUFDLEVBQ3hCQSxlQUFlMTFCLGdCQUFrQnMxQixXQUNqQ0ksZUFBZTNxQyxNQUFRblIsS0FBS0MsS0FBS0MsU0FBUyx5QkFDMUMyN0MsYUFBZWxaLG1CQUFtQnh2QixPQUFPMm9DLGVBQzNDLE1BQWlDLElBQXRCSixXQUFXcDRDLFNBQ3BCdTRDLE9BQVNILFdBQVcsR0FBR245QyxLQUd6QixJQUFLczlDLE9BQVEsT0FFYixHQURBN3pDLEtBQUt2SixPQUFPbTlDLG9CQUFvQkMsU0FBVSxFQUN0Qzd6QyxLQUFLdkosT0FBT3M5QywyQkFBMkJsWSxRQUFTLENBQ2xELElBQUkvcUMsTUFBUThGLE9BQU9vSixLQUFLdkosT0FBT3M5QywyQkFBMkJqakQsT0FDMUQsR0FBSTBGLE1BQU0xRixPQUFRLENBQ2hCLE1BQU13cUMsS0FBTzVnQyxLQUFLNDNDLGtCQUFrQnVCLFFBQzlCaDRDLEtBQU8sSUFBSVcsS0FDZndELEtBQUt2SixPQUFPczlDLDJCQUEyQmpqRCxhQUVuQytLLEtBQUtBLEtBQUssQ0FBRW1CLE9BQU8sSUFDekJuQixLQUFLeTBCLFVBQVUsQ0FDYjdsQixPQUFRelMsS0FBS0MsS0FBS3lXLE9BQ2hCLG9DQUNBLENBQ0UzVyxNQUFPdWpDLEtBQUt2akMsTUFDWnBELFFBQVNxTCxLQUFLdkosT0FBT3M5QywyQkFBMkJqakQsVUFJdERBLE1BQVF3cUMsS0FBS3hxQyxNQUFRK0ssS0FBS3NCLE1BQVF0QixLQUFLc0IsTUFBUW0rQixLQUFLeHFDLEtBQ3RELE9BQ000SixLQUFLOUIsT0FBTyxDQUNoQixDQUFDLDBCQUEwQmk3QyxnQkFBaUIvaUQsT0FFaEQsQ0FHQWtQLEtBQUt2SixPQUFPNG5CLGFBQWVybUIsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTTgwQixnQkFBZ0IsQ0FBRWpZLFNBQVV4NkIsS0FBS3ZKLE9BQU80bkIsZUFDbkYzakIsS0FBS2s0QyxlQUFlNXlDLEtBQUt2SixPQUFPNG5CLE9BQVEsYUFFOUM2eUIsbUJBQW1CcC9DLEtBQUt3SCxRQUFRQyxNQUFNdU8sVUFBVTlILE9BQ2hEcXZDLFdBQVksQ0FDZCxDQUVBLE1BQ0YsSUFBSyxhQUNILEdBQWtCLGNBQWQzMEMsS0FBSzNCLEtBQXNCLENBRTdCLEdBQUkyQixLQUFLMDBDLFdBQVksQ0FDbkIsSUFBSTRFLGlCQUFrQixFQVd0QixTQVZNcGxCLE9BQU8ya0IsUUFBUSxDQUNuQnBxQyxNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyx3QkFDMUJnVCxRQUFTLE1BQU1sVCxLQUFLQyxLQUFLeVcsT0FBTywyQkFBNEIsQ0FDMUQxZCxLQUFNMEosS0FBSzFKLGFBRWJ3aUQsSUFBSyxLQUNIUSxpQkFBa0IsR0FFcEJQLFlBQVksS0FFVk8sZ0JBQ0MsYUFEc0J0NUMsS0FBS3M1QyxpQkFFbEMsQ0FLQSxHQUZBaDBDLEtBQUt2SixPQUFPNG5CLGFBQWVybUIsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTTgwQixnQkFBZ0IsQ0FBRWpZLFNBQVV4NkIsS0FBS3ZKLE9BQU80bkIsU0FFckZ6bkIsT0FBT29KLEtBQUt2SixPQUFPdzlDLGFBQWF0MkMsS0FBTyxFQUFHLENBRTVDLE1BQU11MkMsa0JBQW9CbDhDLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU13MkIsZ0JBQWdCLHdCQUF5Qm4wQyxLQUFLdkosT0FBTzRuQixRQUNwRSxJQUE3QjYxQixrQkFBa0I1NEMsT0FDc0UsSUFBdEZ0RCxLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNdzJCLGdCQUFnQix3QkFBeUJ6NUMsS0FBS2tPLE9BQU90TixTQUM3RTBFLEtBQUt2SixPQUFPNG5CLE9BQU92c0IsS0FBSyx5QkFDeEJrTyxLQUFLdkosT0FBTzRuQixhQUFlcm1CLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU04MEIsZ0JBQWdCLENBQUVqWSxTQUFVeDZCLEtBQUt2SixPQUFPNG5CLFVBR0QsSUFBdEZybUIsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTXcyQixnQkFBZ0Isd0JBQXlCejVDLEtBQUtrTyxPQUFPdE4sUUFDN0UwRSxLQUFLdkosT0FBTzRuQixPQUFPdnNCLEtBQUtvaUQsa0JBQWtCLEdBR2hELENBR0EsTUFBTUUsaUJBQW1CLENBQUMsRUFDMUJBLGlCQUFpQmgyQixnQkFBa0JwZSxLQUFLdkosT0FBTzQ5QyxzQkFDL0MsSUFBSWwzQyxNQUFRLEVBQ1JtM0MsY0FBZSxFQUNuQixJQUFLLE1BQU1YLFNBQVNyNUMsT0FBT3dLLFFBQ3pCOUUsS0FBS3ZKLE9BQU80OUMsdUJBQ1gsQ0FDRCxNQUFPOTlDLElBQUt6RixPQUFTNmlELE1BQ2ZyWSxLQUFPNWdDLEtBQUs0M0Msa0JBQWtCLzdDLEtBQ3BDNjlDLGlCQUFpQmgyQixnQkFBZ0I3bkIsS0FBS3ZGLEtBQU9zcUMsS0FBS3ZqQyxNQUNsRHE4QyxpQkFBaUJoMkIsZ0JBQWdCN25CLEtBQUt6RixNQUFRd3FDLEtBQUt4cUMsTUFDL0NBLE1BQU1pZixXQUNScWtDLGlCQUFpQmgyQixnQkFBZ0I3bkIsS0FBSzRHLE1BQ3BDbStCLEtBQUt4cUMsTUFDTDhGLE9BQU93OUMsaUJBQWlCaDJCLGdCQUFnQjduQixLQUFLeEYsWUFDMUNELE1BQU0ycEMsU0FHVDZaLGNBQWUsRUFGZm4zQyxPQUFTaTNDLGlCQUFpQmgyQixnQkFBZ0I3bkIsS0FBSzRHLE1BS3JELENBRUEsR0FEQWkzQyxpQkFBaUJqM0MsTUFBUUEsTUFDckJtM0MsYUFBYyxDQUdoQixVQURxQmphLGtCQUFrQmx2QixPQUFPaXBDLGtCQUNqQyxNQUNmLENBR0EsSUFBSyxJQUFJdjhCLE1BQVEsRUFBR0EsTUFBUTdYLEtBQUt2SixPQUFPdUksT0FBTzFELE9BQVF1YyxRQUFTLENBRTlEN1gsS0FBS3ZKLE9BQU91SSxPQUFPNlksT0FBT3dHLGFBQWVybUIsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTTgwQixnQkFBZ0IsQ0FBRWpZLFNBQVV4NkIsS0FBS3ZKLE9BQU91SSxPQUFPNlksT0FBT3dHLFNBRXJILE1BQU1rMkIsV0FBYSxDQUNuQkEsT0FBb0IsR0FDcEJBLEtBQWtCLGNBQ2xCQSxXQUFXNXNDLFFBQVVqTixLQUFLaU8sR0FDMUI0ckMsV0FBV25hLGFBQWV4akMsT0FBT29KLEtBQUt2SixPQUFPdUksT0FBTzZZLE9BQU83ZCxTQUMzRHU2QyxXQUFXcHJDLE1BQVFuUixLQUFLQyxLQUFLQyxTQUFTLDZCQUd0QyxJQUFLLE1BQU1wSCxTQUFTa1AsS0FBS3ZKLE9BQU91SSxPQUFPNlksT0FBT3dHLE9BQzVDLEdBQUl4ZSxTQUFTNEMsVUFBVTNSLE9BQVF5akQsV0FBV2wyQixPQUFPdnNCLEtBQUtoQixXQUVqRCxDQUNILE1BQU02UixNQUFRakksS0FBS2tPLE1BQU14TyxNQUFLdUcsTUFDckJBLEtBQUszUCxPQUFTRixNQUFNRSxNQUFzQixVQUFkMlAsS0FBSzVILE9BRTFDLElBQUs0SixRQUFVQSxNQUFNbE0sT0FBT21ELE9BQU93MUMsV0FBWSxDQUVoQnB2QyxLQUFLdkosT0FBTzRuQixPQUFPamtCLE1BQUt1RyxNQUM1Q0EsS0FBSzNQLE9BQVNGLE1BQU1FLFFBRUZ1akQsV0FBV2wyQixPQUFPdnNCLEtBQUtoQixNQUNwRCxDQUNGLENBSUYsR0FBaUMsSUFBN0J5akQsV0FBV2wyQixPQUFPL2lCLE9BQ3BCLEdBQUlpNUMsV0FBV2wyQixPQUFPL2lCLFFBQVVpNUMsV0FBV25hLGFBQWMsQ0FFdkQzMkIsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLeVcsT0FBTyxnQ0FBaUMsQ0FDaEQ4bEMsV0FBWUQsV0FBV2wyQixPQUFPL2lCLE9BQzlCOCtCLGFBQWNtYSxXQUFXbmEsZ0JBSTdCLE1BQU1xYSxPQUFTNTBDLFNBQVMwRyxvQkFDdEJ2RyxLQUFLdkosT0FBTzRuQixPQUNaazJCLFdBQVdsMkIsUUFFYnJlLEtBQUt2SixPQUFPNG5CLE9BQVNvMkIsTUFDdkIsS0FBTyxDQUVMLE1BQU0xa0MsZUFBaUJncUIsa0JBQWtCNXVCLE9BQU9vcEMsWUFDaEQsSUFBS3hrQyxTQUFVLE9BQ2YsTUFBTTBrQyxPQUFTNTBDLFNBQVMwRyxvQkFDdEJ2RyxLQUFLdkosT0FBTzRuQixPQUNadE8sVUFFRi9QLEtBQUt2SixPQUFPNG5CLE9BQVNvMkIsTUFDdkIsTUFFQWh4QyxHQUFHQyxjQUFjekksS0FDZmpELEtBQUtDLEtBQUtDLFNBQVMscUNBR3pCLENBR0EsR0FBSXRCLE9BQU9vSixLQUFLdkosT0FBTzA0QyxVQUFXLENBQ2hDLE1BQU1vRixXQUFhLENBQ25CQSxPQUFvQixHQUNwQkEsS0FBa0IsY0FDbEJBLFdBQVc1c0MsUUFBVWpOLEtBQUtpTyxHQUMxQjRyQyxXQUFXbmEsYUFBZXhqQyxPQUFPb0osS0FBS3ZKLE9BQU8wNEMsVUFDN0NvRixXQUFXcHJDLE1BQVFuUixLQUFLQyxLQUFLeVcsT0FBTyw0QkFBNkIsQ0FDL0RqUCxPQUFRN0ksT0FBT29KLEtBQUt2SixPQUFPMDRDLFlBSTdCLElBQUssTUFBTXQrQyxLQUFLNkosS0FBSzJqQixPQUVuQixJQUNHeHRCLEVBQUU0RixPQUFPbUQsTUFBTXcxQyxhQUNmditDLEVBQUU0RixPQUFPOEssV0FBVzdQLGdCQUNwQmIsRUFBRTRGLE9BQU84SyxXQUFXNVAsU0FDckIsQ0FFNkJxTyxLQUFLdkosT0FBTzRuQixPQUFPamtCLE1BQUt1RyxNQUM1Q0EsS0FBSzNQLE9BQVNILEVBQUVHLFFBRUV1akQsV0FBV2wyQixPQUFPdnNCLEtBQUtqQixFQUNwRCxDQUlGLEdBQWlDLElBQTdCMGpELFdBQVdsMkIsT0FBTy9pQixPQUNwQixHQUFJaTVDLFdBQVdsMkIsT0FBTy9pQixRQUFVaTVDLFdBQVduYSxhQUFjLENBRXZEMzJCLEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBS3lXLE9BQU8sZ0NBQWlDLENBQ2hEOGxDLFdBQVlELFdBQVdsMkIsT0FBTy9pQixPQUM5QjgrQixhQUFjbWEsV0FBV25hLGdCQUk3QixNQUFNcWEsT0FBUzUwQyxTQUFTMEcsb0JBQ3RCdkcsS0FBS3ZKLE9BQU80bkIsT0FDWmsyQixXQUFXbDJCLFFBRWJyZSxLQUFLdkosT0FBTzRuQixPQUFTbzJCLE1BQ3ZCLEtBQU8sQ0FFTCxNQUFNMWtDLGVBQWlCZ3FCLGtCQUFrQjV1QixPQUFPb3BDLFlBQ2hELElBQUt4a0MsU0FBVSxPQUNmLE1BQU0wa0MsT0FBUzUwQyxTQUFTMEcsb0JBQ3RCdkcsS0FBS3ZKLE9BQU80bkIsT0FDWnRPLFVBRUYvUCxLQUFLdkosT0FBTzRuQixPQUFTbzJCLE1BQ3ZCLE1BRUFoeEMsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLQyxTQUFTLHFDQUd6QixPQUdNd0MsS0FBS2s0QyxlQUFlNXlDLEtBQUt2SixPQUFPNG5CLE9BQVEsb0JBRXhDM2pCLEtBQUtnNkMsbUJBQW1CL3dDLFlBQVkscUJBRXBDakosS0FBS2c2QyxtQkFBbUI5N0MsT0FBTyxDQUNuQyxnQ0FBaUNoQyxPQUFPb0osS0FBS3ZKLE9BQU93OUMsYUFBYXIyQyxRQUduRXN6QyxtQkFBbUJwL0MsS0FBS3dILFFBQVFDLE1BQU11TyxVQUFVOUgsT0FDaERvdkMsWUFBYSxDQUNmLENBQ0EsTUFFRixRQUNFOEIsbUJBQW1CcC9DLEtBQUt3SCxRQUFRQyxNQUFNdU8sVUFBVTlILE9BR3RELEdBQWtDLElBQTlCa3hDLG1CQUFtQjUxQyxPQUNyQixNQUFPLEdBRVQsTUFBTXVrQyxnQkFBa0I5b0MsTUFBTWUsd0JBQzVCazVDLGFBQ0FFLG1CQUNBbDNDLFNBbUJGLE9BaEJJcTFDLGtCQUVJMzBDLEtBQUs5QixPQUFPLENBQ2hCLCtCQUFnQzhCLEtBQUtpNkMsa0JBRXZDdEIsTUFBTTcvQyxLQUFLLDBCQUVUNDdDLG1CQUVJMTBDLEtBQUs5QixPQUFPLENBQ2hCLGdDQUFpQzhCLEtBQUtrNkMsaUJBQ3RDLDhCQUErQmw2QyxLQUFLbTZDLGlCQUV0Q3hCLE1BQU03L0MsS0FBSywyQkFHTnFzQyxTQUNULENBV0EsZUFBQWdRLENBQWlCakcsVUFDZixJQUFJamhDLEdBQUssS0FDVCxNQUFNM1gsS0FBTzQ0QyxTQUFTcnBDLE1BQU0sZUFDeEJxcEMsU0FBU3JwQyxNQUFNLGVBQWUsR0FDOUJxcEMsU0FDSixJQUFLLE1BQU05NEMsU0FBUzRKLEtBQUtrTyxNQUVyQi9JLFNBQVMyQyxtQkFBbUIxUixPQUFPNFIsZ0JBQWtCMVIsS0FBSzBSLGdCQUUxRGlHLEdBQUs3WCxNQUFNNlgsSUFJZixPQUFPQSxFQUNULENBRUEsY0FBQW1zQyxDQUFnQmxMLFVBQ2QsTUFBTXBQLFNBQVcsR0FDakIsSUFBSyxNQUFNMXBDLFNBQVM0SixLQUFLa08sTUFDbkI5WCxNQUFNRSxPQUFTNDRDLFVBQVVwUCxTQUFTMW9DLEtBQUtoQixPQUc3QyxPQUFPMHBDLFFBQ1QsQ0FNQSxlQUFBakQsQ0FBaUIvMUIsV0FFZixNQUFNZ0YsVUFBWSxHQUNaeFYsS0FBT3dRLFVBQVVqQixNQUFNLGVBQ3pCaUIsVUFBVWpCLE1BQU0sZUFBZSxHQUMvQmlCLFVBRUosSUFBSyxNQUFNMVEsU0FBUzRKLEtBQUtrTyxNQUduQi9JLFNBQVMyQyxtQkFBbUIxUixPQUFPNFIsZ0JBQWtCMVIsS0FBSzBSLGVBQzFENVIsTUFBTThJLE9BQU93QyxNQUFNZ3dDLFdBQVd6akMsS0FBT25ILFdBRXhCLFVBQWYxUSxNQUFNaUksTUFFTnlOLFVBQVUxVSxLQUFLaEIsT0FHbkIsT0FBTzBWLFNBQ1QsQ0FFQSxtQkFBQXV1QyxDQUFxQnAzQixPQUNuQixPQUFPampCLEtBQUtrTyxNQUFNeE8sTUFBSzRnQixHQUFLQSxFQUFFcGhCLE9BQU93QyxNQUFNZ3dDLFdBQVd6akMsS0FBT2dWLE9BQy9ELENBVUEsb0JBQUF5ekIsR0FDRSxNQUFNbnNDLE9BQVMsQ0FBQyxFQUNoQixJQUFLLE1BQU8xTyxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRMVYsS0FBS3VGLFFBQVFDLE9BQ2pEMkIsSUFBSTJPLFdBQVcsTUFBUXBVLE1BQU1vVSxXQUFXLFdBQzFDRCxPQUFPMU8sSUFBSTRPLFVBQVUsSUFBTTdMLFFBQVFDLE1BQU02TCxZQUFZMUssS0FBTTVKLE1BQU1xVSxVQUFVLEtBRy9FLE9BQU9GLE1BQ1QsQ0FFQSxrQ0FBT3FsQixHQUNMLE1BQU1sTSxnQkFBa0IsR0FDeEIsSUFBSyxNQUFPN25CLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQ2hDOU0sS0FBS3ZCLE9BQU8yZCxTQUFTMjNCLE1BQU1pSixVQUFVNTJCLGdCQUFnQkEsaUJBRXJEQSxnQkFBZ0J0c0IsS0FBSyxDQUNuQnlFLElBQ0EyTCxVQUFXbEssS0FBS0MsS0FBS0MsU0FBU3BILE1BQU1xdEIsT0FDcENwbUIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBU3BILE1BQU1pSCxTQUdwQyxPQUFPcW1CLGVBQ1QsQ0FFQSxpQkFBQWswQixDQUFtQjJDLFVBQ2pCLEdBQUl2NkMsS0FBS2pFLE9BQU8ybkIsZ0JBQ2QsSUFBSyxNQUFPN25CLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQ2hDcEssS0FBS2pFLE9BQU8ybkIsaUJBRVosR0FDRXBtQixLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTXF0QixPQUFPemIsZ0JBQzlCdXlDLFNBQVN2eUMsZUFDWDFLLEtBQUtDLEtBQUtDLFNBQVNwSCxNQUFNaUgsT0FBTzJLLGdCQUM5QnV5QyxTQUFTdnlDLGVBQ1huTSxNQUFRMCtDLFNBQVN2eUMsY0FFakIsTUFBTyxDQUNMbk0sSUFDQTJMLFVBQVdsSyxLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTXF0QixPQUNwQ3BtQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTWlILE9BQ2hDakgsTUFBT0EsTUFBTUEsT0FLckIsT0FBTyxJQUNULENBRUEsWUFBQXkzQyxDQUFjMk0sWUFDWixNQUNFLENBQUMsTUFBTyxPQUFRbDlDLEtBQUtDLEtBQUtDLFNBQVMsYUFBYXdLLGVBQWVoRixTQUM3RHczQyxXQUFXeHlDLGVBR04sQ0FDTG5NLElBQUssTUFDTDJMLFVBQVcsT0FDWG5LLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsYUFDMUJwSCxNQUFPNEosS0FBS2pFLE9BQU9DLFFBQVF5K0MsSUFBSXJrRCxPQUlqQyxDQUNFLE1BQ0FrSCxLQUFLQyxLQUFLQyxTQUFTLFlBQVl3SyxjQUMvQjFLLEtBQUtDLEtBQUtDLFNBQVMsZUFBZXdLLGVBQ2xDaEYsU0FBU3czQyxXQUFXeHlDLGVBRWYsQ0FDTG5NLElBQUssTUFDTDJMLFVBQVdsSyxLQUFLQyxLQUFLQyxTQUFTLFlBQzlCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGVBQzFCcEgsTUFBTzRKLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUkzekIsT0FHNUIsSUFDVCxDQUVBLGFBQU0wbkMsQ0FBU3grQixRQUFVLENBQUMsUUFDUSxJQUFyQkEsUUFBUXUwQixXQUNqQnYwQixRQUFRdTBCLFNBQVdHLGdCQUFnQnNJLHVCQUVDLElBQTNCaDlCLFFBQVE2OUIsaUJBQ2pCNzlCLFFBQVE2OUIsZ0JBQWlCLEdBRTNCNzlCLFFBQVFwRixNQUFROEYsS0FFaEIsYUFEc0JnMEIsZ0JBQWdCeUosUUFBUW4rQixRQUVoRCxDQUVBLGNBQUlvMUMsR0FFRixPQURtQjEwQyxLQUFLa08sTUFBTTNYLFFBQU8wUCxNQUFzQixlQUFkQSxLQUFLNUgsT0FDaEMsRUFDcEIsQ0FFQSxhQUFJczJDLEdBRUYsT0FEa0IzMEMsS0FBS2tPLE1BQU0zWCxRQUFPMFAsTUFBc0IsY0FBZEEsS0FBSzVILE9BQ2hDLEVBQ25CLENBRUEscUJBQU1pN0MsQ0FBaUJvQixVQUFXLEdBQ2hDLEdBQUlBLFNBQVUsQ0FDWixNQUFNQyxnQkFBa0IzNkMsS0FBS2tPLE1BQU0zWCxRQUFPMFAsTUFDeENBLEtBQUt5QyxZQUFZLGdCQUVuQixJQUFLLElBQUl5VSxNQUFRLEVBQUdBLE1BQVF3OUIsZ0JBQWdCLzVDLE9BQVF1YyxjQUM1Q3c5QixnQkFBZ0J4OUIsT0FBT2pVLGNBQWMsYUFFL0MsQ0FDSWxKLEtBQUswMEMsa0JBQWtCMTBDLEtBQUswMEMsV0FBV3oyQyxlQUNyQytCLEtBQUs5QixPQUFPLENBQUUsZ0NBQWlDLE1BQ3ZELENBRUEsb0JBQU0wNkMsQ0FBZ0I4QixVQUFXLEdBQy9CLEdBQUlBLFNBQVUsQ0FDWixNQUFNRSxlQUFpQjU2QyxLQUFLa08sTUFBTTNYLFFBQU8wUCxNQUN2Q0EsS0FBS3lDLFlBQVksZUFFbkIsSUFBSyxJQUFJeVUsTUFBUSxFQUFHQSxNQUFReTlCLGVBQWVoNkMsT0FBUXVjLGNBQzNDeTlCLGVBQWV6OUIsT0FBT2pVLGNBQWMsWUFFOUMsQ0FDSWxKLEtBQUsyMEMsaUJBQWlCMzBDLEtBQUsyMEMsVUFBVTEyQyxlQUNuQytCLEtBQUs5QixPQUFPLENBQUUsK0JBQWdDLE1BQ3RELENBRUEsUUFBSTI1QyxHQUNGLE9BQU81ekMsU0FBU2pFLEtBQUtqRSxPQUFPQyxTQUFTeStDLEtBQUtya0QsTUFDNUMsQ0FFQSxhQUFNeWtELENBQVN6a0QsT0FDYixhQUFhNEosS0FBSzlCLE9BQU8sQ0FBRSwyQkFBNEI5SCxPQUN6RCxDQUVBLGVBQU1tbkIsQ0FBV2t6QixRQUVmLE9BREFBLE9BQVN4c0MsU0FBU3dzQyxRQUNaendDLEtBQUs2M0MsTUFBUXBILFFBQ1p6d0MsS0FBSzY2QyxRQUFRNzZDLEtBQUs2M0MsS0FBT3BILE9BQ2xDLENBRUEsTUFBSXdCLEdBQ0YsT0FBT2h1QyxTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBRzc3QyxNQUN6QyxDQUVBLFlBQUlnOEMsR0FDRixPQUFJcHlDLEtBQUtqRSxPQUFPQyxRQUFRaTJDLEdBQUc3NUMsS0FFa0IsTUFBekM0SCxLQUFLakUsT0FBTzJuQixnQkFBZ0JodEIsSUFBSU4sT0FDUyxNQUF6QzRKLEtBQUtqRSxPQUFPMm5CLGdCQUFnQmp0QixJQUFJTCxNQUV6QnU1QixTQUFTbXJCLHNCQUFzQjk2QyxLQUFLakUsT0FBTzJuQixnQkFBaUIxakIsS0FBSzNCLE1BRXRFMkIsS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBR2h2QyxJQUNsQmdCLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUWkyQyxHQUFHaHZDLEtBRWxDLEtBRUZnQixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBR2h2QyxJQUN6QyxDQUVBLFNBQUkwdkMsR0FDRixPQUFPMXVDLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUWkyQyxHQUFHaHZDLElBQ3pDLENBRUEsWUFBTTgzQyxDQUFRM2tELE9BS1osT0FKSUEsTUFBUSxJQUFHQSxNQUFRLEdBQ25CQSxNQUFRNEosS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBR2h2QyxNQUNqQzdNLE1BQVE2TixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBR2h2QyxZQUU3QmpELEtBQUs5QixPQUFPLENBQUUsMEJBQTJCOUgsT0FDeEQsQ0FFQSxvQkFBTThoRCxDQUFnQnBzQyxVQUFXbXBCLEtBQU8sTUFDdEMsTUFBTWtRLFVBQVksR0FDbEIsSUFBSyxJQUFJbDlCLFNBQVM2RCxVQVFoQixHQVBBN0QsTUFBUXJKLFFBQVFDLE1BQU11TyxVQUFVbkYsT0FDNUJndEIsT0FDR3IxQixPQUFPQyxVQUFVQyxlQUFlaEgsS0FBS21QLE1BQU1sTSxPQUFRLFdBQ3REa00sTUFBTWxNLE9BQU9tRCxNQUFRLENBQUMsR0FFeEIrSSxNQUFNbE0sT0FBT21ELE1BQU0rMUIsT0FBUSxHQUV6Qjl2QixTQUFTNEMsVUFBVUUsT0FDckJrOUIsVUFBVS90QyxLQUFLNlEsV0FDVixDQUNMLE1BQU1vTSxPQUFTclUsS0FBS20xQyxnQkFBZ0JsdEMsTUFBTTNSLE1BQzFDLEdBQUsrZCxRQUVFLEdBQUk0Z0IsS0FBTSxDQUNmLE1BQU1odkIsS0FBT2pHLEtBQUtrTyxNQUFNaFIsSUFBSW1YLGNBQ3RCcE8sS0FBS2dELFlBQVlnc0IsS0FDekIsT0FKRWtRLFVBQVUvdEMsS0FBSzZRLE1BS25CLENBRXVCLElBQXJCazlCLFVBQVV2a0MsY0FHUlosS0FBSzVDLHdCQUF3QixPQUFRK25DLFVBQVcsQ0FDcERtUCxhQUFhLEdBRWpCLENBRUEsY0FBTW1ELENBQVUzWCxTQUFVN0ssS0FBTyxNQUMvQixNQUFNa1EsVUFBWSxHQUNsQixJQUFLLE1BQU1sL0IsUUFBUTY1QixTQUNiN0ssT0FDR2h2QixLQUFLbEssT0FBT21ELFFBQU8rRyxLQUFLbEssT0FBT21ELE1BQVEsQ0FBQyxHQUM3QytHLEtBQUtsSyxPQUFPbUQsTUFBTSsxQixPQUFRLEdBRTVCa1EsVUFBVS90QyxLQUFLd0gsUUFBUUMsTUFBTXVPLFVBQVVuSCxPQUV6QyxHQUF5QixJQUFyQmsvQixVQUFVdmtDLE9BR2QsYUFBYVosS0FBSzVDLHdCQUF3QixPQUFRK25DLFVBQVcsQ0FDM0RtUCxhQUFhLEdBRWpCLENBRUEsbUJBQU0wRyxDQUFlL3lDLE1BQU9ndEIsS0FBTyxNQUNqQyxNQUFNNWdCLE9BQVNyVSxLQUFLbTFDLGdCQUFnQmx0QyxNQUFNM1IsTUFDMUMsR0FBSytkLFFBUUUsR0FBSTRnQixLQUFNLENBQ2YsTUFBTWh2QixLQUFPakcsS0FBS2tPLE1BQU1oUixJQUFJbVgsY0FDdEJwTyxLQUFLZ0QsWUFBWWdzQixLQUN6QixPQVZNQSxPQUNHaHRCLE1BQU1sTSxPQUFPbUQsUUFBTytJLE1BQU1sTSxPQUFPbUQsTUFBUSxDQUFDLEdBQy9DK0ksTUFBTWxNLE9BQU9tRCxNQUFNKzFCLE9BQVEsU0FFdkJqMUIsS0FBSzVDLHdCQUF3QixPQUFRLENBQUM2SyxPQUFRLENBQ2xEcXNDLGFBQWEsR0FNbkIsQ0FFQSxZQUFJaEMsR0FDRixPQUFJdHlDLEtBQUtqRSxPQUFPQyxRQUFRcTJDLEdBQUdqNkMsS0FDb0IsTUFBekM0SCxLQUFLakUsT0FBTzJuQixnQkFBZ0I1c0IsSUFBSVYsTUFDM0J1NUIsU0FBU3NyQixzQkFBc0JqN0MsS0FBS2pFLE9BQU8ybkIsaUJBQ3RDLEVBRVR6ZixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFxMkMsR0FBR3B2QyxJQUN6QyxDQUVBLGdCQUFBaTRDLENBQWtCLzBCLFdBQ2hCLE1BQXlCLGlCQUFkQSxVQUVQbm1CLEtBQUtqRSxPQUFPby9DLGlCQUFpQjVrRCxRQUMzQjZnQixHQUFLQSxFQUFFL1ksS0FBSzY0QyxzQkFBd0Ivd0IsVUFBVSt3QixzQkFDOUMsSUFBTSxDQUFFNzRDLEtBQU0sR0FBSSs4QyxVQUFXLEVBQUdDLFVBQVUsR0FHekMsQ0FBRWg5QyxLQUFNLEdBQUkrOEMsVUFBVyxFQUFHQyxVQUFVLEVBQzdDLENBRUEsZUFBQXYwQixDQUFpQlgsV0FDZixHQUFJQSxVQUFXLENBRWIsT0FEd0JubUIsS0FBS2s3QyxpQkFBaUIvMEIsV0FDdkJpMUIsU0FDekIsQ0FDQSxPQUFPLENBQ1QsQ0FFQSx3QkFBQWwwQixDQUEwQmYsV0FDeEIsR0FBSUEsVUFBVyxDQUViLE1BQWdDLEtBRFJubUIsS0FBS2s3QyxpQkFBaUIvMEIsV0FDdkI5bkIsSUFDekIsQ0FDQSxPQUFPLENBQ1QsQ0FFQSxnQkFBQTJzQixDQUFrQjdFLFVBQVdpRCxTQUMzQixHQUF5QixpQkFBZGpELFdBQXdDLEtBQWRBLFVBQWtCLENBQ3JELE1BQU1nMUIsaUJBQW1CdjhDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU9vL0Msa0JBQ3ZEaCtCLE1BQVFnK0IsaUJBQWlCaEUsV0FDN0IvL0IsR0FBS0EsRUFBRS9ZLEtBQUs2NEMsc0JBQXdCL3dCLFVBQVUrd0Isc0JBa0JoRCxPQWhCSTl0QixRQUFVLEdBQ0csSUFBWGpNLE1BQ0ZnK0IsaUJBQWlCL2pELEtBQUssQ0FDcEJpSCxLQUFNOG5CLFVBQ05pMUIsVUFBV2h5QixRQUNYaXlCLFVBQVUsSUFHWkYsaUJBQWlCaCtCLE9BQU9pK0IsV0FBYWh5QixRQUU5QmpNLE9BQVMsSUFDbEJnK0IsaUJBQWlCaGxCLE9BQU9oWixNQUFPLEdBQy9CZytCLGlCQUFpQmp2QyxNQUFLLFNBQVVvdkMsS0FBTUMsT0FDcEMsT0FBT0QsS0FBS2o5QyxLQUFLbTlDLGNBQWNELE1BQU1sOUMsS0FDdkMsS0FFSzJCLEtBQUs5QixPQUFPLENBQ2pCLDBCQUEyQmk5QyxrQkFFL0IsQ0FDRixDQUVBLGtCQUFBbjBCLENBQW9CYixVQUFXczFCLGVBQzdCLE1BQU03MEIsT0FBUyxJQUFJOWtCLEtBQUsyNUMsY0FBYzFwQyxZQUFZbkgsU0FBUyxDQUN6REMsVUFBVSxJQUNUcEksTUFDR2k1QyxnQkFBa0IxN0MsS0FBS2s3QyxpQkFBaUIvMEIsV0FDOUMsT0FBSXUxQixnQkFBZ0JMLFNBQ1gsRUFFRmo1QyxLQUFLYSxJQUFJLEVBQUcyakIsT0FBUzgwQixnQkFBZ0JOLFVBQzlDLENBRUEsY0FBTXZ4QixDQUFVMUQsVUFBV2lELFNBRXpCLE9BRHdCcHBCLEtBQUtrN0MsaUJBQWlCLzBCLFdBQ3pCazFCLFNBS2QsU0FKQ3I3QyxLQUFLMjdDLE9BQU8zN0MsS0FBSytwQixJQUFNWCxTQUM3QnBwQixLQUFLZ3JCLGlCQUFpQjdFLFVBQVdpRCxTQUMxQkEsUUFHWCxDQUVBLE9BQUFBLENBQVMyVSxhQUNQLE9BQUlBLFlBQW9CLzlCLEtBQUs0N0MsbUJBQ3RCNTdDLEtBQUs2N0MsbUJBQ2QsQ0FFQSxzQkFBSUQsR0FDRixPQUFPNTdDLEtBQUtqRSxPQUFPN0UsU0FBU2t5QixTQUFTMlUsV0FDdkMsQ0FFQSx1QkFBSThkLEdBQ0YsT0FBTzc3QyxLQUFLakUsT0FBTzdFLFNBQVNreUIsU0FBUzRVLFlBQ3ZDLENBRUEsY0FBSThkLEdBQ0YsT0FBSTk3QyxLQUFLNjdDLG9CQUNGLy9DLE1BQU1JLE9BQU84RCxLQUFLNjdDLHNCQUdoQixJQUFJLzVDLEtBQUs5QixLQUFLNjdDLHFCQUFxQmp4QyxTQUFTLENBQ2pEQyxVQUFVLElBQ1RwSSxNQUpNdkcsT0FBTzhELEtBQUs2N0MscUJBTWhCLENBQ1QsQ0FFQSxjQUFJRSxHQUNGLE9BQUkvN0MsS0FBSzQ3QyxtQkFDRjkvQyxNQUFNSSxPQUFPOEQsS0FBSzQ3QyxxQkFHaEIsSUFBSTk1QyxLQUFLOUIsS0FBSzQ3QyxvQkFBb0JoeEMsU0FBUyxDQUNoREMsVUFBVSxJQUNUcEksTUFKTXZHLE9BQU84RCxLQUFLNDdDLG9CQU1oQixDQUNULENBRUEsZ0JBQUl4eEIsR0FDRixPQUFPcHFCLEtBQUtqRSxPQUFPQyxRQUFRK3RCLEtBQUtpeUIsV0FBYSxDQUMvQyxDQUVBLGlCQUFJM3hCLEdBQ0YsT0FBT3JxQixLQUFLakUsT0FBT0MsUUFBUSt0QixLQUFLNG5CLFlBQWMsQ0FDaEQsQ0FFQSxhQUFJWSxHQUNGLEdBQUt2eUMsS0FBS2pFLE9BQU9DLFFBQ2pCLE9BQUlnRSxLQUFLakUsT0FBT0MsU0FBUyt0QixLQUFLM3hCLEtBQ3hCNEgsS0FBS2k4QyxjQUFzQjc1QyxLQUFLYSxJQUFJLEdBQUtqRCxLQUFLaThDLGNBQWUsR0FDMUQsR0FFRmg0QyxTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSTltQixJQUMxQyxDQUVBLFVBQUkyakIsR0FDRixPQUFPM2lCLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUSt0QixJQUFJOW1CLElBQzFDLENBRUEsTUFBSW92QyxHQUNGLE9BQU9wdUMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRcTJDLEdBQUdqOEMsTUFDekMsQ0FFQSxTQUFJdzhDLEdBQ0YsT0FBSTV5QyxLQUFLakUsT0FBT0MsUUFBUXEyQyxHQUFHajZDLEtBRW9CLE1BQXpDNEgsS0FBS2pFLE9BQU8ybkIsZ0JBQWdCNXNCLElBQUlWLE1BQzNCZ00sS0FBS3VJLE1BQU0zSyxLQUFLakUsT0FBTzJuQixnQkFBZ0I1c0IsSUFBSVYsTUFBUSxHQUVyRCxFQUVGNk4sU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRcTJDLEdBQUdwdkMsSUFDekMsQ0FFQSxXQUFNaTVDLENBQU85bEQsT0FHWCxPQUZJQSxNQUFRLElBQUdBLE1BQVEsR0FDbkJBLE1BQVE2TixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFxMkMsR0FBR3B2QyxPQUFRN00sTUFBUTZOLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUXEyQyxHQUFHcHZDLFlBQy9FakQsS0FBSzlCLE9BQU8sQ0FBRSwwQkFBMkI5SCxPQUN4RCxDQUVBLE9BQUkyekIsR0FDRixPQUFPOWxCLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUSt0QixJQUFJM3pCLE1BQzFDLENBRUEsT0FBSVMsR0FDRixPQUFPbUosS0FBSzQzQyxrQkFBa0IsTUFDaEMsQ0FFQSx5QkFBSXVFLEdBQ0YsSUFBSWpDLGlCQUFtQixFQUN2QixJQUFLLE1BQU1qeUMsU0FBU2pJLEtBQUsyakIsT0FDbkIxYixNQUFNbE0sT0FBTzhzQixhQUFhNnJCLGFBQzVCd0Ysa0JBQW9CanlDLE1BQU1sTSxPQUFPOHNCLFlBQVk2ckIsWUFHakQsT0FBT3dGLGdCQUNULENBRUEsb0JBQUlBLEdBQ0YsSUFBS2w2QyxLQUFLMDBDLFdBQVksT0FBTyxFQUM3QixJQUFJelQsT0FBUyxFQUNiLElBQUssTUFBTWdZLFNBQVNyNUMsT0FBT3dLLFFBQ3pCcEssS0FBSzAwQyxXQUFXMzRDLE9BQU80OUMsdUJBQ3RCLENBQ0QsTUFBTzk5QyxJQUFLekYsT0FBUzZpRCxNQUNmclksS0FBTzVnQyxLQUFLNDNDLGtCQUFrQi83QyxLQUNoQ3pGLE1BQU1pZixXQUNSNHJCLFFBQVVMLEtBQUt4cUMsTUFBUThGLE9BQU85RixNQUFNQyxZQUV4QyxDQUNBLE9BQU80cUMsTUFDVCxDQUVBLDJCQUFNbWIsU0FDRXA4QyxLQUFLOUIsT0FBTyxDQUNoQixnQ0FBaUM4QixLQUFLazZDLGtCQUUxQyxDQUVBLDBCQUFNbUMsU0FDRXI4QyxLQUFLOUIsT0FBTyxDQUNoQiwrQkFBZ0M4QixLQUFLazZDLGtCQUV6QyxDQUVBLHlCQUFNb0MsU0FDRXQ4QyxLQUFLOUIsT0FBTyxDQUNoQiw4QkFBK0I4QixLQUFLbTZDLGdCQUV4QyxDQUVBLHdCQUFJb0MsR0FDRixJQUFJdEMsZ0JBQWtCLEVBQ3RCLElBQUssTUFBTWh5QyxTQUFTakksS0FBSzJqQixPQUNuQjFiLE1BQU1sTSxPQUFPOHNCLGFBQWE4ckIsWUFDNUJzRixpQkFBbUJoeUMsTUFBTWxNLE9BQU84c0IsWUFBWThyQixXQUdoRCxPQUFPc0YsZUFDVCxDQUVBLG1CQUFJQSxHQUNGLE9BQUtqNkMsS0FBSzIwQyxVQUNIMzBDLEtBQUsyMEMsVUFBVTU0QyxPQUFPeWdELFlBREQsQ0FFOUIsQ0FFQSxvQkFBSUMsR0FDRixJQUFJQSxpQkFBbUIsRUFDdkIsSUFBSyxNQUFNeDBDLFNBQVNqSSxLQUFLMmpCLE9BQ25CMWIsTUFBTWxNLE9BQU84c0IsYUFBYUMsYUFDNUIyekIsa0JBQW9CeDBDLE1BQU1sTSxPQUFPOHNCLFlBQVlDLFlBR2pELE9BQU8yekIsZ0JBQ1QsQ0FFQSx1QkFBSUMsR0FDRixJQUFJdkMsZUFBaUIsRUFDckIsSUFBSyxNQUFNbHlDLFNBQVNqSSxLQUFLMmpCLE9BQ25CMWIsTUFBTWxNLE9BQU84c0IsYUFBYTRyQixXQUM1QjBGLGdCQUFrQmx5QyxNQUFNbE0sT0FBTzhzQixZQUFZNHJCLFVBRy9DLE9BQU8wRixjQUNULENBRUEsa0JBQUlBLEdBQ0YsT0FBTyxFQUFJaitDLE9BQU84RCxLQUFLakUsT0FBTzJuQixnQkFBZ0I3c0IsSUFBSVQsTUFDcEQsQ0FFQSx1QkFBSXVtRCxHQUNGLElBQUssTUFBTTEwQyxTQUFTakksS0FBSzJqQixPQUN2QixHQUFJMWIsTUFBTWxNLE9BQU9tRCxPQUFPMDlDLGFBQWMsT0FBTyxFQUUvQyxHQUFJNThDLEtBQUs2OEMsc0JBQ1AsT0FBTyxFQUVULElBQUssTUFBTW5CLG1CQUFtQjE3QyxLQUFLakUsT0FBT28vQyxpQkFDeEMsSUFBS08sZ0JBQWdCTCxTQUFVLE9BQU8sRUFFeEMsT0FBTyxDQUNULENBRUEsWUFBTU0sQ0FBUXZsRCxPQUNSQSxNQUFRLElBQUdBLE1BQVEsR0FDbkJBLE1BQVE0SixLQUFLakUsT0FBT0MsUUFBUSt0QixJQUFJOW1CLE1BQU83TSxNQUFRNEosS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSTltQixLQUMzRSxNQUFNNjVDLEtBQU83NEMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUkzekIsT0FBU0EsTUFFdkQsR0FBSTBtRCxLQUFPLEVBQUcsQ0FDWixJQUFJMUIsVUFBWW4zQyxTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSWl5QixXQUM3Qy8zQyxTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVErdEIsSUFBSWl5QixXQUNqQyxFQUNKWixXQUF3QjBCLEtBQ3BCQSxNQUFRLFNBQVM5OEMsS0FBSzhxQixhQUFhcDJCLEtBQUswRixPQUFPQyxhQUMvQytnRCxXQUFhcDdDLEtBQUtqRSxPQUFPQyxRQUFRK3RCLElBQUk0bkIsa0JBQ2pDM3hDLEtBQUs4cUIsYUFBYXAyQixLQUFLMEYsT0FBT0UsbUJBRWhDMEYsS0FBSzlCLE9BQU8sQ0FDaEIsMkJBQTRCOUgsTUFDNUIsK0JBQWdDZ2xELFdBRXBDLFlBQWFwN0MsS0FBSzlCLE9BQU8sQ0FBRSwyQkFBNEI5SCxRQUN2RCxPQUFPQSxLQUNULENBRUEsbUJBQU0ybUQsQ0FBZTNtRCxNQUFPaW5DLFFBQzFCLE1BQU0yZixXQUFhLGtCQUFrQjNmLGNBQ3JDLGFBQWFyOUIsS0FBSzlCLE9BQU8sQ0FBRSxDQUFDOCtDLFlBQWE1bUQsT0FDM0MsQ0FFQSxzQkFBTTZtRCxDQUFrQjVmLFFBQ3RCcjlCLEtBQUsrOEMsZUFBZS84QyxLQUFLakUsT0FBT0MsUUFBUXFoQyxRQUFRamxDLEtBQU1pbEMsT0FDeEQsQ0FFQSw0QkFBTzZmLENBQXVCeDVCLGlCQUM1QixNQUFNeTVCLEtBQU96NUIsZ0JBQWdCbHRCLElBQUlKLE9BQVMsSUFBTXN0QixnQkFBZ0JodEIsSUFBSU4sT0FBUyxHQUM3RSxPQUFJK21ELElBQU0sSUFBWSxFQUNsQkEsSUFBTSxJQUFZLEVBQ2xCQSxJQUFNLElBQVksRUFDbEJBLElBQU0sSUFBWSxNQUNmLEdBQUcvNkMsS0FBS3VJLE9BQU93eUMsSUFBTSxJQUFNLE9BQ3BDLENBRUEsK0JBQU9DLENBQTBCMTVCLGlCQUMvQixNQUFNeTVCLEtBQU96NUIsZ0JBQWdCbHRCLElBQUlKLE9BQVMsSUFBTXN0QixnQkFBZ0JodEIsSUFBSU4sT0FBUyxHQUM3RSxPQUFJK21ELElBQU0sSUFBWSxFQUNsQkEsSUFBTSxJQUFZLEVBQ2xCQSxJQUFNLElBQVksRUFDbEJBLElBQU0sSUFBWSxFQUNmLzZDLEtBQUt1SSxPQUFPd3lDLElBQU0sSUFBTSxJQUFNLENBQ3ZDLENBRUEsNEJBQU9yQyxDQUF1QnAzQixnQkFBaUJybEIsTUFDN0MsTUFBTTgrQyxJQUFNbDVDLFNBQVN5ZixnQkFBZ0JodEIsSUFBSU4sT0FBUyxFQUFHLElBQU02TixTQUFTeWYsZ0JBQWdCanRCLElBQUlMLE9BQVMsRUFBRyxJQUM5RmluRCxRQUFXLy9DLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDRCQUF1QyxjQUFUbUIsS0FBdUIsRUFBSSxHQUNwRyxPQUFPK0QsS0FBS3VJLE1BQU13eUMsSUFBTUUsUUFDMUIsQ0FFQSw0QkFBT3BDLENBQXVCdjNCLGlCQUM1QixPQUFPdGhCLEtBQUt1SSxNQUFNK1ksZ0JBQWdCNXNCLElBQUlWLE1BQVEsRUFDaEQsQ0FFQSw2QkFBT2tuRCxDQUF3QjU1QixnQkFBaUJybEIsS0FBTWsvQyxLQUNwRCxJQUFJQyxJQWFKLE9BWEVBLElBREU5NUIsZ0JBQWdCL3NCLElBQUlQLE1BQVFzdEIsZ0JBQWdCaHRCLElBQUlOLE9BQVNzdEIsZ0JBQWdCbHRCLElBQUlKLE1BQVFzdEIsZ0JBQWdCaHRCLElBQUlOLE1BQ3JHLEVBQ0dzdEIsZ0JBQWdCL3NCLElBQUlQLE9BQVNzdEIsZ0JBQWdCaHRCLElBQUlOLE9BQVNzdEIsZ0JBQWdCbHRCLElBQUlKLE9BQVNzdEIsZ0JBQWdCaHRCLElBQUlOLE1BQzlHLEVBRUEsRUFFSyxhQUFUaUksTUFBd0JmLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLCtCQUMvQ3BCLE1BQU1tSSxTQUFTczVDLFFBQ2xCQyxJQUFNdjVDLFNBQVNzNUMsTUFBUSxHQUFLQyxJQUFNcDdDLEtBQUt1SSxNQUFNMUcsU0FBU3M1QyxLQUFPLElBQU0sRUFBSUMsS0FHcEVwN0MsS0FBS2EsSUFBSSxFQUFHdTZDLElBQ3JCLENBRUEsWUFBSXpMLEdBQ0YsT0FBSy94QyxLQUFLakUsT0FBT0MsU0FDWmdFLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE9BQ2UsU0FBcENwckMsS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTWgxQyxRQUM1QjRKLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU1oekMsTUFBTyxHQUUvQjRILEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU1oekMsS0FDckJ1M0IsU0FBU3l0Qix5QkFBeUJwOUMsS0FBS2pFLE9BQU8ybkIsaUJBR2hEMWpCLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU1oMUMsT0FUQSxJQVVuQyxDQUVBLFNBQUlnMUMsR0FDRixPQUFPcHJDLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU1oMUMsS0FDbkMsQ0FFQSxTQUFJMDdDLEdBQ0YsT0FBSzl4QyxLQUFLakUsT0FBT0MsU0FDWmdFLEtBQUtqRSxPQUFPQyxRQUFRRyxJQUNZLFNBQWpDNkQsS0FBS2pFLE9BQU9DLFFBQVFHLEdBQUcvRixRQUN6QjRKLEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHL0QsTUFBTyxHQUU1QjRILEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHL0QsS0FDbEJ1M0IsU0FBU3V0QixzQkFBc0JsOUMsS0FBS2pFLE9BQU8ybkIsaUJBRTdDMWpCLEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHL0YsT0FSRyxJQVNuQyxDQUVBLE1BQUkrRixHQUNGLE9BQU82RCxLQUFLakUsT0FBT0MsUUFBUUcsR0FBRy9GLEtBQ2hDLENBRUEsVUFBSXk3QyxHQUNGLElBQUs3eEMsS0FBS2pFLE9BQU9DLFFBQVMsT0FBTyxLQUNqQyxJQUFLZ0UsS0FBS2pFLE9BQU9DLFFBQVF3dkMsSUFBSyxPQUFPLEtBSXJDLEdBSHNDLFNBQWxDeHJDLEtBQUtqRSxPQUFPQyxRQUFRd3ZDLElBQUlwMUMsUUFDMUI0SixLQUFLakUsT0FBT0MsUUFBUXd2QyxJQUFJcHpDLE1BQU8sR0FFN0I0SCxLQUFLakUsT0FBT0MsUUFBUXd2QyxJQUFJcHpDLEtBQU0sQ0FDaEMsTUFBTW9sRCxJQUFNN3RCLFNBQVMydEIsdUJBQXVCdDlDLEtBQUtqRSxPQUFPMm5CLGdCQUFpQjFqQixLQUFLakUsT0FBT3NDLEtBQU0yQixLQUFLakUsT0FBT2tpQyxNQUFNc2YsS0FDN0csR0FBSUMsSUFBTSxFQUFHLE9BQU9BLEdBQ3RCLENBQ0EsT0FBT3g5QyxLQUFLakUsT0FBT0MsUUFBUXd2QyxJQUFJcDFDLEtBQ2pDLENBRUEsT0FBSW8xQyxHQUNGLE9BQU94ckMsS0FBS2pFLE9BQU9DLFFBQVF3dkMsSUFBSXAxQyxLQUNqQyxDQUVBLFdBQUltVyxHQUVGLE9BQU92TSxLQUFLZ1IsTUFBUSxHQUFHaFIsS0FBS2dSLE1BQU1wRSxNQUFNdWtDLE9BQU9ueEMsS0FBS2dSLE1BQU0vQyxLQUFPLElBQ25FLENBRUEsVUFBSTlFLEdBUUYsT0FQS25KLEtBQUtqRSxPQUFPbUQsUUFDZmMsS0FBS2pFLE9BQU9tRCxNQUFRLENBQUMsRUFDckJjLEtBQUtqRSxPQUFPbUQsTUFBTWlLLFFBQVMsRUFDM0JuSixLQUFLOUIsT0FBTyxDQUFFLGVBQWdCLENBQUMsSUFDL0I4QixLQUFLOUIsT0FBTyxDQUFFLHVCQUF1QixLQUdoQzhCLEtBQUtqRSxPQUFPbUQsTUFBTWlLLE1BQzNCLENBRUEsZ0JBQUFzMEMsQ0FBa0JubkQsTUFDaEIsT0FBTzBKLEtBQUtrTyxNQUFNM1gsUUFBTytwQixHQUFLQSxFQUFFaHFCLE9BQVNBLE1BQzNDLENBRUEsVUFBSTZTLENBQVEvUyxPQUNWNEosS0FBSzlCLE9BQU8sQ0FBRSxzQkFBdUI5SCxPQUN2QyxDQUVBLHFCQUFNc25ELENBQWlCOTBDLFVBQ3JCLE1BQU1FLFdBQWE5SSxLQUFLakUsT0FBT21ELE1BQU0wSixVQUMvQnRTLEtBQU8sZ0JBQWdCc1MsaUJBQ3ZCNUksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDNUgsTUFBT3dTLFdBQzlCLENBUUEsb0JBQU1pbUIsQ0FBZ0I0dUIsY0FBZXA1QixhQUFjLEVBQU9qbEIsUUFBVSxDQUFDLEdBQ25FLE1BQU0rOUIsT0FBU3I5QixLQUFLNnRDLGFBQWE4UCxjQUFjMzFDLGVBQy9DLElBQUtxMUIsT0FNSCxPQUxBdDBCLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLHFCQUFzQixDQUNyQzRwQyxRQUFTRCxpQkFHTixLQUdULE1BQU0zbkMsTUFBUSxJQUFJbEMsVUFPbEIsR0FMSXhVLFFBQVFvRixXQUFVc1IsTUFBTWpCLGFBQWU3WSxPQUFPb0QsUUFBUW9GLFdBQ3REcEYsUUFBUStXLGFBQ1ZMLE1BQU1LLFdBQWF6TyxjQUFjaW1CLGtCQUFrQnZ1QixRQUFRK1csY0FHeERrTyxtQkFDQzFtQixJQUFjeUIsUUFBUStXLGlCQUFjeFksSUFBY3lCLFFBQVFvRixVQUFVLENBQ3RFLE1BQU13NUIsWUFBYzVLLFdBQVc3aUIsT0FBT25SLFNBQ2xDNCtCLFFBQ0Zsb0IsTUFBTWpCLGFBQWU3WSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxjQUN0QzhZLE1BQU1LLFdBQWFuYSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxlQUNwQzhZLE1BQU00aEIsaUJBQW1CMTdCLE9BQU9naUMsTUFBTWhoQyxJQUFJLHFCQUMxQzhZLE1BQU02aEIsc0JBQXdCMzdCLE9BQzVCZ2lDLE1BQU1oaEMsSUFBSSwwQkFHaEIsQ0FHRjhZLE1BQU05YixNQUFROEYsS0FBS3NNLFNBQ0csVUFBbEJoTixRQUFRaUUsTUFBbUJ5UyxNQUFNeU8sU0FBVSxFQUMxQ3pPLE1BQU15TyxVQUFZbmxCLFFBQVFpRSxZQUN6QnlTLE1BQU1xb0IsY0FBY2hCLE9BQU94aEMsS0FDakNtYSxNQUFNNGYsV0FDUixDQVFBLHlCQUFNaEgsQ0FDSml2QixtQkFDQXQ1QixhQUFjLEVBQ2RqbEIsUUFBVSxDQUFDLEdBRVgsTUFBTXNoQyxLQUFPNWdDLEtBQUs0M0Msa0JBQWtCaUcsb0JBRXBDLElBQUtqZCxLQU9ILFlBTkE3M0IsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sNkJBQThCLENBQzdDNHBDLFFBQVNDLG1CQUNUM2pELE1BQU84RixLQUFLMUosUUFNbEIsTUFBTTBmLE1BQVEsSUFBSWxDLFVBT2xCLEdBTEl4VSxRQUFRb0YsV0FBVXNSLE1BQU1qQixhQUFlN1ksT0FBT29ELFFBQVFvRixXQUN0RHBGLFFBQVErVyxhQUNWTCxNQUFNSyxXQUFhek8sY0FBY2ltQixrQkFBa0J2dUIsUUFBUStXLGNBR3hEa08sbUJBQ0MxbUIsSUFBY3lCLFFBQVErVyxpQkFBY3hZLElBQWN5QixRQUFRb0YsVUFBVSxDQUN0RXBGLFFBQVFxdUIsWUFBY2lULEtBQUt2akMsTUFDM0IsTUFBTTZnQyxZQUFjNUssV0FBVzdpQixPQUFPblIsU0FDbEM0K0IsUUFDRmxvQixNQUFNakIsYUFBZTdZLE9BQU9naUMsTUFBTWhoQyxJQUFJLGNBQ3RDOFksTUFBTUssV0FBYW5hLE9BQU9naUMsTUFBTWhoQyxJQUFJLGVBQ3BDOFksTUFBTTRoQixpQkFBbUIxN0IsT0FBT2dpQyxNQUFNaGhDLElBQUkscUJBQzFDOFksTUFBTTZoQixzQkFBd0IzN0IsT0FDNUJnaUMsTUFBTWhoQyxJQUFJLDBCQUdoQixDQUdGOFksTUFBTTliLE1BQVE4RixLQUFLc00sU0FDRyxVQUFsQmhOLFFBQVFpRSxNQUFtQnlTLE1BQU15TyxTQUFVLEVBQzFDek8sTUFBTXlPLFVBQVlubEIsUUFBUWlFLFlBQ3pCeVMsTUFBTXNvQixtQkFBbUJzQyxLQUFLL2tDLEtBQ3BDbWEsTUFBTTRmLFdBQ1IsQ0FFQSx1QkFBT2tvQixHQUNMLFFBQzRDLElBQW5DeGdELEtBQUt5Z0QsYUFBYUMsY0FDVSxPQUFuQzFnRCxLQUFLeWdELGFBQWFDLGFBQ2xCLENBQ0EsTUFBTW4vQixTQUFXdmhCLEtBQUt5Z0QsYUFBYUMsYUFBYWp2QyxXQUFXd1QsU0FDekQsVUFFSWpPLFFBQVVoWCxLQUFLeWdELGFBQWFDLGFBQWFuaEQsUUFBUSxVQUFVRSxRQUFRdVgsUUFDbkUycEMsV0FBYTNnRCxLQUFLeWdELGFBQWFDLGFBQWFuaEQsUUFBUSxnQkFBZ0JFLFNBQVNtaEQsTUFDbkYsUUFBdUIsSUFBWjVwQyxjQUFpRCxJQUFmMnBDLGlCQUEyRSxJQUF0Q2wxQyxHQUFHbzFDLFFBQVFGLGFBQWEvakQsT0FBTytULEdBQW9CLENBQ25JLE1BQU1oQixRQUFVbEUsR0FBR28xQyxRQUFRRixZQUFZL2pELE1BQU0rVCxHQUN2Qy9ULE1BQVFvRCxLQUFLb1AsT0FBT3hQLElBQUkrUCxTQUM5QixHQUFJL1MsTUFBTyxDQUNULE1BQU0rTixNQUFRL04sTUFBTWdVLE1BQU1oUixJQUFJb1gsU0FDOUIsR0FBSXJNLE1BQU8sQ0FDVCxJQUFJbTJDLFFBQVU5Z0QsS0FBS0MsS0FBS3lXLE9BQ3RCNkssU0FBVyxxQkFBdUIsb0JBQ2xDLENBQ0U1VyxNQUFPQSxNQUFNM1IsS0FDYnlkLFFBQVM5TCxNQUFNN1IsTUFDZjZkLEtBQU03UixLQUFLdUksTUFBTTFDLE1BQU03UixNQUFRLEdBQy9COFQsUUFBUzlILEtBQUt1SSxNQUFNMUMsTUFBTTdSLE1BQVEsS0FnQnRDLE9BYklrSCxLQUFLc0csS0FBSzJFLE9BQ1o2MUMsU0FFRTlnRCxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDMUN6YSxNQUNFK0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCaEQsTUFBTXNqQyxlQUNGbGdDLEtBQUtDLEtBQUt5VyxPQUFPLGlDQUFrQyxDQUNuRDFkLEtBQU00RCxNQUFNNUQsT0FFWixNQUdMOG5ELE9BQ1QsQ0FDRixDQUNGLENBQ0YsQ0FDQSxPQUFPLENBQ1QsQ0FFQSxrQkFBTXg2QixDQUFjNnRCLGVBQWdCcHpDLEtBQU8sU0FFekMsR0FEa0JvekMsZUFBZTVyQyxNQUFNLG9CQUN4QixDQUViLElBQUlJLEtBQU9qRyxLQUFLcTZDLG9CQUFvQjVJLGdCQUNwQyxJQUFLeHJDLEtBQU0sQ0FDVCxNQUFNbzRDLGVBQWlCL2dELEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU1xN0IsY0FBYyxDQUFFcjdCLE1BQU93dUIsZUFBZ0I4TSxhQUFhLElBQ2pHLEdBQXdCLElBQXBCRixTQUFTejlDLGVBQ0xaLEtBQUs1Qyx3QkFBd0IsT0FBUWloRCxVQUMzQ3A0QyxLQUFPakcsS0FBS3E2QyxvQkFBb0I1SSxnQkFDNUJ4ckMsTUFDRixHQUFrQixVQUFkQSxLQUFLNUgsS0FDUDBLLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBS3lXLE9BQU8sNEJBQTZCLENBQ2xFMWQsS0FBTTJQLEtBQUszUCxLQUNYb3JCLFFBQVN6YixLQUFLN1AsY0FFWCxHQUFrQixXQUFkNlAsS0FBSzVILEtBQW1CLE9BQzNCNEgsS0FBS3FGLFNBQ1gsTUFBTWlSLFFBQVUsQ0FBQyxFQUNqQixHQUFrQyxLQUE5QnRXLEtBQUtsSyxPQUFPa00sTUFBTStGLEtBQUtDLElBQTZDLEtBQWhDaEksS0FBS2xLLE9BQU9rTSxNQUFNK0YsS0FBSzFYLEtBQWEsQ0FDMUUsTUFBTTJSLFlBQWNqSSxLQUFLNGpCLGFBQWEzZCxLQUFLbEssT0FBT2tNLE1BQU0rRixLQUFLMVgsS0FBTSxTQUMvRDJSLE1BQU1ySCxTQUNSMmIsUUFBUSx3QkFBMEJ0VSxNQUFNLEdBQUdnRyxHQUMzQ3NPLFFBQVEsMEJBQTRCdFUsTUFBTSxHQUFHM1IsS0FFakQsQ0FDQSxHQUF3QyxLQUFwQzJQLEtBQUtsSyxPQUFPa00sTUFBTWtHLFdBQVdGLElBQW1ELEtBQXRDaEksS0FBS2xLLE9BQU9rTSxNQUFNa0csV0FBVzdYLEtBQWEsQ0FDdEYsTUFBTTJSLFlBQWNqSSxLQUFLNGpCLGFBQWEzZCxLQUFLbEssT0FBT2tNLE1BQU1rRyxXQUFXN1gsS0FBTSxTQUNyRTJSLE1BQU1ySCxTQUNSMmIsUUFBUSw4QkFBZ0N0VSxNQUFNLEdBQUdnRyxHQUNqRHNPLFFBQVEsZ0NBQWtDdFUsTUFBTSxHQUFHM1IsS0FFdkQsQ0FDSXNKLE9BQU9tRSxLQUFLd1ksU0FBUzNiLGNBQ2pCcUYsS0FBSy9ILE9BQU9xZSxRQUV0QixDQUdOLENBQ0EsR0FBSXRXLEtBQ0YsTUFBTyxDQUFDQSxLQUVaLENBRUEsSUFBSXU0QyxRQUFVeCtDLEtBQUs2OEIsZ0JBQWdCNFUsZ0JBQ25DLElBQUsrTSxRQUFRNTlDLE9BQVEsQ0FDbkIsTUFBTWszQyxJQUFNeDZDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLFlBRWhDdWhELFFBQVVuaEQsS0FBSzRRLE1BQU14TyxNQUFNeEosSUFDL0IsR0FBSUEsRUFBRW1JLE9BQVNBLE1BQVFuSSxFQUFFSSxPQUFTbTdDLGVBQWdCLENBQ2hELE1BQU0vcUMsS0FBTyszQyxRQUFRdi9DLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsS0FDN0MsUUFBSUEsTUFBUTlHLE9BQU9tRSxLQUFLMkMsTUFBTTlGLE9BQVMsSUFBTzhGLEtBQUtveEMsS0FLckQsQ0FDQSxPQUFPLEtBS1QsR0FISTJHLFNBQ0ZELFFBQVFwbkQsS0FBS3FuRCxTQUVRLElBQW5CRCxRQUFRNTlDLE9BRVYsSUFBSyxNQUFNNnRCLFFBQVFueEIsS0FBS29oRCxNQUN0QixHQUE0QixTQUF4Qmp3QixLQUFLa3dCLFVBQVV0Z0QsS0FBaUIsT0FDNUJvd0IsS0FBS213QixlQUNYLE1BQU1ILFFBQVVuaEQsS0FBSzRRLE1BQU14TyxNQUFNeEosSUFDL0IsR0FBSUEsRUFBRW1JLE9BQVNBLE1BQVFuSSxFQUFFSSxPQUFTbTdDLGVBQWdCLENBQ2hELE1BQU0vcUMsS0FBTyszQyxRQUFRdi9DLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsS0FDN0MsUUFBSUEsTUFBUTlHLE9BQU9tRSxLQUFLMkMsTUFBTTlGLE9BQVMsSUFBTzhGLEtBQUtveEMsS0FLckQsQ0FDQSxPQUFPLEtBRUwyRyxTQUNGRCxRQUFRcG5ELEtBQUtxbkQsUUFFakIsQ0FHSixHQUF1QixJQUFuQkQsUUFBUTU5QyxlQUNKWixLQUFLNUMsd0JBQXdCLE9BQVFvaEQsU0FDM0NBLFFBQVV4K0MsS0FBSzY4QixnQkFBZ0I0VSxnQkFDUixJQUFuQitNLFFBQVE1OUMsUUFDVixHQUF3QixVQUFwQjQ5QyxRQUFRLEdBQUduZ0QsS0FDYjBLLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBS3lXLE9BQU8sNEJBQTZCLENBQ2xFMWQsS0FBTWtvRCxRQUFRLEdBQUdsb0QsS0FDakJvckIsUUFBUzg4QixRQUFRLEdBQUdwb0QsY0FFakIsR0FBd0IsV0FBcEJvb0QsUUFBUSxHQUFHbmdELEtBQW1CLE9BQ2pDbWdELFFBQVEsR0FBR2x6QyxTQUNqQixNQUFNaVIsUUFBVSxDQUFDLEVBQ2pCLEdBQXdDLEtBQXBDaWlDLFFBQVEsR0FBR3ppRCxPQUFPa00sTUFBTStGLEtBQUtDLElBQW1ELEtBQXRDdXdDLFFBQVEsR0FBR3ppRCxPQUFPa00sTUFBTStGLEtBQUsxWCxLQUFhLENBQ3RGLE1BQU0yUixZQUFjakksS0FBSzRqQixhQUFhNDZCLFFBQVEsR0FBR3ppRCxPQUFPa00sTUFBTStGLEtBQUsxWCxLQUFNLFNBQ3JFMlIsTUFBTXJILFNBQ1IyYixRQUFRLHdCQUEwQnRVLE1BQU0sR0FBR2dHLEdBQzNDc08sUUFBUSwwQkFBNEJ0VSxNQUFNLEdBQUczUixLQUVqRCxDQUNBLEdBQThDLEtBQTFDa29ELFFBQVEsR0FBR3ppRCxPQUFPa00sTUFBTWtHLFdBQVdGLElBQXlELEtBQTVDdXdDLFFBQVEsR0FBR3ppRCxPQUFPa00sTUFBTWtHLFdBQVc3WCxLQUFhLENBQ2xHLE1BQU0yUixZQUFjakksS0FBSzRqQixhQUFhNDZCLFFBQVEsR0FBR3ppRCxPQUFPa00sTUFBTWtHLFdBQVc3WCxLQUFNLFNBQzNFMlIsTUFBTXJILFNBQ1IyYixRQUFRLDhCQUFnQ3RVLE1BQU0sR0FBR2dHLEdBQ2pEc08sUUFBUSxnQ0FBa0N0VSxNQUFNLEdBQUczUixLQUV2RCxDQUNJc0osT0FBT21FLEtBQUt3WSxTQUFTM2IsY0FDakI0OUMsUUFBUSxHQUFHdGdELE9BQU9xZSxRQUU1QixDQUdOLENBQ0EsT0FBT2lpQyxPQUNULENBRUEsZ0JBQU0xdkIsQ0FBWTBsQixVQUFXandCLFlBQWFqbEIsUUFBVSxDQUFDLEdBQ25ELE1BQU11L0MsZ0JBQWtCckssVUFBVWwrQyxLQUFPaytDLFVBQVVsK0MsS0FBT2srQyxVQUMxRCxJQUFJdnNDLFlBQWNqSSxLQUFLNGpCLGFBQWFpN0IsZ0JBQWlCLFNBSXJELEdBSEk1MkMsTUFBTXJILFNBQ1J0QixRQUFRaEosS0FBTzJSLE1BQU0sR0FBRzNSLE9BRXJCMlIsTUFBTXJILE9BQVEsQ0FDakIsSUFBSXFGLEtBQU8sS0FDWCxHQUFJdXVDLFVBQVUvbEIsS0FBTSxDQUNsQixNQUFNQSxLQUFPbnhCLEtBQUtvaEQsTUFBTXhoRCxJQUFJczNDLFVBQVUvbEIsTUFDdEMsR0FBNkIsU0FBekJBLEtBQUtrd0IsU0FBU0csT0FBbUIsT0FDckM3NEMsV0FBYXdvQixLQUFLc3dCLFlBQVl2SyxVQUFVdm1DLEdBQzFDLE1BQVd1bUMsVUFBVXZtQyxLQUNuQmhJLEtBQU8zSSxLQUFLNFEsTUFBTWhSLElBQUlzM0MsVUFBVXZtQyxLQUlsQyxJQUFLaEksS0FBTSxDQUdULE1BQU0rUCxNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU1ncEMsVUFBWSxVQUNaaHBDLE1BQU03VSxPQUNaNlUsTUFBTTRmLFdBQ1IsQ0FDQSxJQUFLM3ZCLEtBQ0gsT0FBTzhDLEdBQUdDLGNBQWNzSyxLQUN0QmhXLEtBQUtDLEtBQUt5VyxPQUFPLGdCQUFrQixJQUNqQzFXLEtBQUtDLEtBQUt5VyxPQUFPLDZCQUE4QixDQUM3QzRwQyxRQUFTaUIsZ0JBQ1Qza0QsTUFBTzhGLEtBQUsxSixRQUtwQixJQUFJbWEsUUFBUyxFQVliLFNBWE15akIsT0FBTzJrQixRQUFRLENBQ25CcHFDLE1BQU8sR0FBR25SLEtBQUtDLEtBQUtDLFNBQVMsb0JBQzdCZ1QsUUFBUyxNQUFNbFQsS0FBS0MsS0FBS3lXLE9BQU8sc0JBQXVCLENBQ3JENFEsT0FBUTR2QixVQUFVbCtDLEtBQ2xCNEQsTUFBTzhGLEtBQUsxSixhQUVkd2lELElBQUssS0FDSHJvQyxRQUFTLE1BSUUsSUFBWEEsT0FFRyxPQUlQLFNBTFF6USxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ3dCLFFBQVFDLE1BQU11TyxVQUFVbkgsUUFHdEVnQyxNQUFRakksS0FBSzY4QixnQkFBZ0I1MkIsS0FBSzNQLE9BRTdCMlIsTUFBTXJILE9BQVEsT0FFbkIsR0FBSXRELEtBQUtzRyxLQUFLMkUsS0FBTSxDQUNsQixNQUFNMG1DLGlCQUFtQmpOLGlCQUFpQnZ4QixPQUN4Q3hJLE1BQU0sR0FBRzNSLEtBQ1QyUixNQUFNLEdBQUdxQyxNQUVMbFUsTUFBUThGLE9BQU8reUMsV0FBVy94QyxJQUFJLHFCQUM5QitLLE1BQU0sR0FBR2czQyxZQUFZN29ELE1BQzdCLENBQ0YsQ0FFQSxNQUFNNGYsTUFBUSxJQUFJbEMsVUFTbEIsUUFQZ0MsSUFBckJ4VSxRQUFRb0YsV0FDakJzUixNQUFNakIsYUFBZTdZLE9BQU9vRCxRQUFRb0YsZ0JBRUosSUFBdkJwRixRQUFRK1csYUFDakJMLE1BQU1LLFdBQWF6TyxjQUFjaW1CLGtCQUFrQnZ1QixRQUFRK1csY0FHeERrTyxtQkFDK0IsSUFBdkJqbEIsUUFBUStXLGlCQUEwRCxJQUFyQi9XLFFBQVFvRixVQUEwQixDQUN4RixNQUFNdzVCLFlBQWM1SyxXQUFXN2lCLE9BQU9uUixTQUNsQzQrQixRQUNGbG9CLE1BQU1qQixhQUFlN1ksT0FBT2dpQyxNQUFNaGhDLElBQUksY0FDdEM4WSxNQUFNSyxXQUFhbmEsT0FBT2dpQyxNQUFNaGhDLElBQUksZUFDcEM4WSxNQUFNNGhCLGlCQUFtQjE3QixPQUFPZ2lDLE1BQU1oaEMsSUFBSSxxQkFDMUM4WSxNQUFNNmhCLHNCQUF3QjM3QixPQUM1QmdpQyxNQUFNaGhDLElBQUksMEJBR2hCLENBR0Y4WSxNQUFNOWIsTUFBUThGLEtBQUtzTSxTQUNuQjBKLE1BQU0vTixNQUFRQSxNQUFNLEdBQUdnRyxHQUNELFVBQWxCM08sUUFBUWlFLE1BQW1CeVMsTUFBTXlPLFNBQVUsRUFDMUN6TyxNQUFNeU8sVUFBWW5sQixRQUFRaUUsTUFDUCxVQUFwQmpFLFFBQVF3ZCxRQUFxQjlHLE1BQU04RyxTQUFVLEVBQzVDOUcsTUFBTThHLFVBQVl4ZCxRQUFRd2QsY0FDekI5RyxNQUFNN1UsT0FDWjZVLE1BQU00ZixVQUFVNWYsTUFBTThHLFFBQ3hCLENBRUEsaUJBQU1rUyxDQUFha3dCLFdBQVkzNkIsYUFBYyxHQUMzQyxJQUFJSyxPQU9KLFFBTitCLElBQXBCczZCLFdBQVd2aEQsT0FDcEJpbkIsYUFBZTFlLFNBQVNnNUMsV0FBV3ZoRCxZQUVSLElBQWxCdWhELFdBQVdqeEMsS0FDcEIyVyxPQUFTNWtCLEtBQUtrTyxNQUFNaFIsSUFBSWdpRCxXQUFXanhDLE1BRWhDMlcsT0FBUSxDQUNYLElBQUl1NkIsUUFBVW4vQyxLQUFLeTlDLGlCQUFpQnlCLFdBQVc1b0QsTUFDL0MsR0FBdUIsSUFBbkI2b0QsUUFBUXYrQyxPQUFjLENBQ3hCLElBQUl0RCxLQUFLc0csS0FBSzJFLEtBMkNaLFlBTkFRLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS3lXLE9BQU8sa0NBQW1DLENBQ2xEMDBCLFVBQVcxb0MsS0FBSzFKLEtBQ2hCaW5DLFdBQVkyaEIsV0FBVzVvRCxRQXhDVCxDQUNsQixJQUFJMlAsS0FBTyxLQUNYLE1BQU13b0IsS0FBT3l3QixXQUFXendCLEtBQU9ueEIsS0FBS29oRCxNQUFNeGhELElBQUlnaUQsV0FBV3p3QixNQUFRLEtBQ2pFLEdBQUlBLEtBQU0sQ0FDUixHQUE2QixTQUF6QkEsS0FBS2t3QixTQUFTRyxPQUFtQixPQUNyQzc0QyxXQUFhd29CLEtBQUtzd0IsWUFBWUcsV0FBV2p4QyxHQUMzQyxNQUFXaXhDLFdBQVdqeEMsS0FDcEJoSSxLQUFPM0ksS0FBSzRRLE1BQU1oUixJQUFJZ2lELFdBQVdqeEMsS0FHbkMsSUFBS2hJLEtBQ0gsT0FBTzhDLEdBQUdDLGNBQWNzSyxLQUN0QmhXLEtBQUtDLEtBQUtDLFNBQVMsOEJBSXZCLElBQUlpVCxRQUFTLFFBQ1B5akIsT0FBTzJrQixRQUFRLENBQ25CcHFDLE1BQU8sR0FBR25SLEtBQUtDLEtBQUtDLFNBQVMsb0JBQzdCZ1QsUUFBUyxNQUFNbFQsS0FBS0MsS0FBS3lXLE9BQU8sc0JBQXVCLENBQ3JENFEsT0FBUXM2QixXQUFXNW9ELEtBQ25CNEQsTUFBTzhGLEtBQUsxSixhQUVkd2lELElBQUssS0FDSHJvQyxRQUFTLEtBR2IsTUFBTXZXLFdBQzBCLElBQXZCOEYsS0FBS2tMLFFBQVFoUixNQUF3QjhGLEtBQUtrTCxPQUFPaFIsTUFBUThGLEtBRWxFLElBQWUsSUFBWHlRLE9BRUcsT0FFUCxTQUhRdlcsTUFBTWtELHdCQUF3QixPQUFRLENBQUM2SSxLQUFLbTVDLFdBRXBERCxRQUFVamxELE1BQU11akQsaUJBQWlCeDNDLEtBQUszUCxPQUNqQzZvRCxRQUFRditDLE9BQVEsYUFDZnUrQyxRQUFRLEdBQUc3ekMsUUFDbkIsQ0FTRixNQUFXNnpDLFFBQVF2K0MsT0FBUyxHQUMxQm1JLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS3lXLE9BQU8sd0NBQXlDLENBQ3hEMDBCLFVBQVcxb0MsS0FBSzFKLEtBQ2hCaW5DLFdBQVkyaEIsV0FBVzVvRCxRQUk3QnN1QixPQUFTdTZCLFFBQVEsRUFDbkIsQ0FFQSxJQUFLdjZCLE9BQU83b0IsT0FBTzhLLFdBQVdoUCxLQUFNLENBQzlCeUYsS0FBS3NHLEtBQUtraEIsUUFBUXZsQixLQUFPLEdBQzNCd0osR0FBR0MsY0FBY3NLLEtBQUtoVyxLQUFLQyxLQUFLQyxTQUFTLDJCQUc5QixJQUFJOGtDLG1CQUFtQnRpQyxLQUFLc00sU0FBVzR5QyxXQUFXdmhELE1BQVFpbkIsT0FBTzNXLEdBQUtzVyxhQUM5RXdmLGdCQUNQLENBQ0EsR0FBSW5mLE9BQU83b0IsT0FBTzhLLFdBQVdoUCxLQUFNLENBQ3BCLElBQUkydEMsbUJBQW1CeGxDLEtBQUtzTSxTQUFXNHlDLFdBQVd2aEQsTUFBUWluQixPQUFPM1csR0FBS3NXLGFBQzlFd2YsZ0JBQ1AsQ0FDRixDQUVBLG9CQUFNc2IsQ0FBZ0JDLFFBQVMsR0FDN0IsR0FDTyxhQURDaGlELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGtCQUNmLENBQ2YsTUFBTWlFLEtBQU8sSUFBSTJTLFVBQVU5VCxLQUFLbVIsVUFRaEMsT0FQQWhRLEtBQUswZixVQUFXLEVBQ2hCMWYsS0FBS28rQyxVQUFXLEVBQ2hCcCtDLEtBQUtxK0Msb0JBQXFCLEVBQzFCcitDLEtBQUtHLFVBQTZELElBQWxEaEUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsb0JBQzFDaUUsS0FBSzRPLE9BQVMsd0JBQ1I1TyxLQUFLbTlCLG1CQUFtQixNQUFPZ2hCLE9BQVMsRUFBSSxHQUNsRG4rQyxLQUFLeTBCLFlBRUh6MEIsS0FBSzBTLGFBQWU3VCxLQUFLakUsT0FBTzJuQixnQkFBZ0Ivc0IsSUFBSVAsTUFBUSxHQUVoRSxDQUdFLE9BQU9rcEQsT0FDSHQvQyxLQUFLakUsT0FBTzJuQixnQkFBZ0Ivc0IsSUFBSVAsTUFBUSxHQUN4QzRKLEtBQUtqRSxPQUFPMm5CLGdCQUFnQi9zQixJQUFJUCxLQUUxQyxDQUVBLFlBQUF3d0MsQ0FBY2grQixVQUNaLE9BQUs1SSxLQUFLakUsT0FBT21ELFFBT1pjLEtBQUtqRSxPQUFPbUQsTUFBTTBKLFdBQ2hCNUksS0FBS2pFLE9BQU9tRCxNQUFNMEosV0FQdkI1SSxLQUFLakUsT0FBT21ELE1BQVEsQ0FBQyxFQUNyQmMsS0FBS2pFLE9BQU9tRCxNQUFNaUssUUFBUyxFQUMzQm5KLEtBQUs5QixPQUFPLENBQUUsZUFBZ0IsQ0FBQyxLQUN4QixFQUtYLENBRUEsa0JBQU02MkMsQ0FBY25zQyxnQkFDWjVJLEtBQUs5QixPQUFPLENBQUUsQ0FBQyxnQkFBZ0IwSyxhQUFhLEdBQ3BELENBRUEsb0JBQU02MkMsQ0FBZ0I3MkMsZ0JBQ2Q1SSxLQUFLOUIsT0FBTyxDQUFFLENBQUMsZ0JBQWdCMEssYUFBYSxHQUNwRCxDQUVBLGVBQUE0YyxDQUFpQm5SLFFBQ2YsSUFBSXVRLE9BQVM4NkIsYUFBYXJyQyxRQU0xQixHQUxLdVEsWUFFK0IsSUFBbEJBLE9BQU83b0IsU0FDdkI2b0IsT0FBU3RuQixLQUFLb2hELE1BQU14aEQsSUFBSTBuQixPQUFPNkosTUFBTXZ4QixJQUFJMG5CLE9BQU91c0IsTUFGaER2c0IsT0FBUzVrQixLQUFLa08sTUFBTWhSLElBQUltWCxRQUlOLFdBQWhCdVEsT0FBT3ZtQixLQUFtQixPQUFPLEtBQ3JDLE1BQU1zbEIsT0FBUyxHQVFmLE9BUElpQixPQUFPN29CLE9BQU9rTSxNQUFNK0YsS0FBS0MsSUFDM0IwVixPQUFPdnNCLEtBQUs0SSxLQUFLa08sTUFBTWhSLElBQUkwbkIsT0FBTzdvQixPQUFPa00sTUFBTStGLEtBQUtDLEtBR2xEMlcsT0FBT3hiLHNCQUF3QndiLE9BQU83b0IsT0FBT2tNLE1BQU1rRyxXQUFXRixJQUNoRTBWLE9BQU92c0IsS0FBSzRJLEtBQUtrTyxNQUFNaFIsSUFBSTBuQixPQUFPN29CLE9BQU9rTSxNQUFNa0csV0FBV0YsS0FFckQwVixNQUNULENBR0EsSUFBQWprQixDQUFNcEosTUFDSixJQUFLQSxLQUFNLE9BRVgsTUFBTTJQLEtBQU9qRyxLQUFLa08sTUFBTWhSLElBQUk1RyxNQUM1QixHQUFJMlAsS0FDRixNQUFPLENBQ0w1SCxLQUFNLE9BQ05qSSxNQUFPNlAsTUFJWCxNQUNNbW9CLFFBRFMsY0FDUXV4QixLQUFLcnBELE1BQzVCLElBQUlrUixVQUFZLEtBQ1o0bUIsU0FBV0EsUUFBUXh0QixTQUFRNEcsVUFBWTRtQixRQUFRLElBRW5ELE1BQU1ubUIsTUFBUWpJLEtBQUsyakIsT0FBT3B0QixRQUFPSixLQUUzQkEsRUFBRUcsT0FDSEgsRUFBRUcsS0FBSzRnRCxvQkFBb0J4bkMsUUFBUSxNQUFPLE1BQ3pDcFosS0FBSzRnRCxvQkFBb0J4bkMsUUFBUSxNQUFPLEtBQ3hDdlosRUFBRUcsS0FBSzRnRCxvQkFBb0J4bkMsUUFBUSxNQUFPLE1BQ3hDcFosS0FBSzRnRCxvQkFBb0J4bkMsUUFBUSxNQUFPLEtBQzFDdlosRUFBRUcsS0FBSzRnRCxvQkFBb0J4bkMsUUFBUSxNQUFPLE1BQ3hDbEksV0FBVzB2QyxvQkFBb0J4bkMsUUFBUSxNQUFPLE9BR3RELEdBQUl6SCxNQUFNckgsT0FBUSxNQUFPLENBQUV2QyxLQUFNLE9BQVFqSSxNQUFPNlIsTUFBTSxJQUd0RCxNQUFNMjNDLFFBQVUsQ0FBQyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE9BQ2xFLElBQUssSUFBSXQvQixFQUFJLEVBQUdBLEVBQUlzL0IsUUFBUWgvQyxPQUFRMGYsSUFBSyxDQUN2QyxNQUFNc2dCLEtBQU81Z0MsS0FBSzQzQyxrQkFBa0JnSSxRQUFRdC9CLElBQzVDLEdBQUlzZ0IsS0FBTSxDQUVSLEdBREFBLEtBQUt0cUMsS0FBT3NxQyxLQUFLdmpDLE1BRWZ1akMsS0FBSy9rQyxLQUFLcTdDLHNCQUF3QjVnRCxLQUFLMFIsZUFDdkM0NEIsS0FBSy9rQyxLQUFLcTdDLHNCQUF3QjF2QyxXQUFXUSxjQUU3QyxNQUFPLENBQUUzSixLQUFNLGlCQUFrQmpJLE1BQU93cUMsTUFFMUMsR0FDRUEsS0FBS3A1QixXQUFXMHZDLHNCQUF3QjVnRCxLQUFLMFIsZUFDN0M0NEIsS0FBS3A1QixXQUFXMHZDLHNCQUF3QjF2QyxXQUFXUSxjQUVuRCxNQUFPLENBQUUzSixLQUFNLGlCQUFrQmpJLE1BQU93cUMsTUFFMUMsR0FDRUEsS0FBS3ZqQyxPQUFPNjVDLHNCQUF3QjVnRCxLQUFLMFIsZUFDekM0NEIsS0FBS3ZqQyxPQUFPNjVDLHNCQUF3QjF2QyxXQUFXUSxjQUUvQyxNQUFPLENBQUUzSixLQUFNLGlCQUFrQmpJLE1BQU93cUMsS0FFNUMsQ0FDRixDQUdBLE1BQU1pZixVQUFZLENBQUMsTUFBTyxPQUMxQixJQUFLLElBQUl2L0IsRUFBSSxFQUFHQSxFQUFJdS9CLFVBQVVqL0MsT0FBUTBmLElBQUssQ0FDekMsTUFBTXcvQixLQUFPOS9DLEtBQUs2dEMsYUFBYWdTLFVBQVV2L0IsSUFDekMsR0FBSXcvQixLQUFNLENBRVIsR0FEQUEsS0FBS3hwRCxLQUFPd3BELEtBQUt6aUQsTUFFZnlpRCxLQUFLamtELEtBQUtxN0Msc0JBQXdCNWdELEtBQUswUixlQUN2QzgzQyxLQUFLamtELEtBQUtxN0Msc0JBQXdCMXZDLFdBQVdRLGNBRTdDLE1BQU8sQ0FBRTNKLEtBQU0sWUFBYWpJLE1BQU8wcEQsTUFFckMsR0FDRUEsS0FBS3Q0QyxXQUFXMHZDLHNCQUF3QjVnRCxLQUFLMFIsZUFDN0M4M0MsS0FBS3Q0QyxXQUFXMHZDLHNCQUF3QjF2QyxXQUFXUSxjQUVuRCxNQUFPLENBQUUzSixLQUFNLFlBQWFqSSxNQUFPMHBELE1BRXJDLEdBQ0VBLEtBQUt6aUQsT0FBTzY1QyxzQkFBd0I1Z0QsS0FBSzBSLGVBQ3pDODNDLEtBQUt6aUQsT0FBTzY1QyxzQkFBd0IxdkMsV0FBV1EsY0FFL0MsTUFBTyxDQUFFM0osS0FBTSxZQUFhakksTUFBTzBwRCxLQUV2QyxDQUNGLENBSUYsQ0FFQSxlQUFJQyxHQUNGLE9BQU8vL0MsS0FBSzJqQixPQUFPcHRCLFFBQU9KLEdBRXRCQSxFQUFFNEYsT0FBTzhLLFlBQVkzUCxTQUNyQmYsRUFBRTRGLE9BQU9rTCxnQkFBZ0Jpd0Msc0JBQ3ZCNTVDLEtBQUtDLEtBQ0ZDLFNBQVMsaUNBQ1IwNUMscUJBR1osQ0FFQSxlQUFJOEksR0FDRixPQUFPaGdELEtBQUsyakIsT0FBT3B0QixRQUFPSixHQUV0QkEsRUFBRTRGLE9BQU84SyxZQUFZM1AsU0FDckJmLEVBQUU0RixPQUFPa0wsZ0JBQWdCaXdDLHNCQUN2QjU1QyxLQUFLQyxLQUNGQyxTQUFTLGlDQUNSMDVDLHFCQUdaLENBRUEsYUFBSStJLEdBQ0YsT0FBSWpnRCxLQUFLakMsTUFBTWlULE1BQ05oUixLQUFLakMsTUFBTWlULE1BQU1yVCxLQUVuQixJQUNULENBRUEsWUFBSTJPLEdBS0YsT0FBSXRNLEtBQUtqQyxNQUFNaVQsTUFDTixHQUFHaFIsS0FBS2pDLE1BQU1pVCxNQUFNOUYsT0FBTytDLE1BQU1qTyxLQUFLakMsTUFBTWlULE1BQU0vQyxLQUdsRGpPLEtBQUtpTyxFQVdoQixDQUVBLFlBQUlrRCxHQUNGLE9BQUluUixLQUFLa1MsZUFBZTJnQyxVQUFrQjd5QyxLQUFLaU8sR0FDeENqTyxLQUFLc00sUUFDZCxDQUVBLHNCQUFPc0UsQ0FBaUIvVSxLQUV0QixHQUFJQSxJQUFJbUgsU0FBUyxLQUFNLENBRXJCLE1BQU93SixRQUFTRCxTQUFXMVEsSUFBSTRRLE1BQU0sS0FDckMsR0FBZ0IsVUFBWkQsUUFDRixPQUFPbFAsS0FBS29QLE9BQU9DLE9BQU9KLFNBQ3JCLENBQ0wsTUFBTUssTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUFPLEtBRXZCLE9BRGMsSUFBSUUsTUFBTUYsV0FDWDVTLEtBQ2YsQ0FDRixDQUdBLE9BQU9vRCxLQUFLb1AsT0FBT3hQLElBQUlyQixNQUFRLElBQ2pDLENBRUEsOEJBQUlxa0QsR0FDRixJQUFLLE1BQU8sQ0FBRTlwRCxTQUFVd0osT0FBT3dLLFFBQVFwSyxLQUFLakUsT0FBTzJuQixpQkFDakQsR0FBSTVuQixNQUFNSSxPQUFPOUYsTUFBTTZELFVBQVcsT0FBTyxFQUUzQyxPQUFPLENBQ1QsQ0FFQSxxQkFBSWttRCxHQUNGLElBQUssTUFBTWw0QyxTQUFTakksS0FBSzJqQixPQUN2QixHQUFJN25CLE1BQU1tTSxNQUFNbE0sUUFBUTNGLE9BQVEsT0FBTyxFQUV6QyxPQUFPLENBQ1QsQ0FLQSw4QkFBTWdxRCxHQUNKLE1BQU0xOEIsZ0JBQWtCLENBQUMsRUFDekIsSUFBSyxNQUFPN25CLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVFwSyxLQUFLakUsT0FBTzJuQixpQkFDcEQsR0FBSXR0QixNQUFNNkQsVUFBWTdELE1BQU02RCxRQUFRdVEsV0FBVyxLQUFNLENBQ25ELE1BQU00TSxFQUFJLElBQUl0VixLQUFLMUwsTUFBTTZELGVBQ25CbWQsRUFBRWpXLEtBQUssQ0FBRW1CLE9BQU8sSUFDbEI4VSxFQUFFM1UsUUFDSmloQixnQkFBZ0IsMEJBQTBCN25CLGFBQWV1RyxLQUFLdUksTUFDNUR5TSxFQUFFM1UsT0FHUixPQUdJekMsS0FBSzlCLE9BQU93bEIsdUJBQ1oxakIsS0FBS3FnRCw0QkFDYixDQUtBLGlDQUFNQyxHQUNKLE1BQU01OEIsZ0JBQWtCLENBQUMsRUFDekIsSUFBSyxNQUFPN25CLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVFwSyxLQUFLakUsT0FBTzJuQixpQkFDcEQsR0FBSXR0QixNQUFNNkQsVUFBWTdELE1BQU02RCxRQUFRdVEsV0FBVyxLQUFNLENBQ25ELE1BQU0rMUMsUUFBVSxJQUFJL29DLFlBQVksSUFBTXBoQixNQUFNNkQsUUFBVSxLQUFLMlEsU0FBUyxDQUFFOE0sVUFBVSxFQUFNN00sVUFBVSxJQUFRcEksTUFDeEdpaEIsZ0JBQWdCLDBCQUEwQjduQixhQUFlMGtELE9BQzNELE9BR0l2Z0QsS0FBSzlCLE9BQU93bEIsdUJBQ1oxakIsS0FBS3FnRCw0QkFDYixDQUtBLGdDQUFNQSxHQUNKLE1BQU0zOEIsZ0JBQWtCLENBQUMsRUFDekIsSUFBSyxNQUFPN25CLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVFwSyxLQUFLakUsT0FBTzJuQixpQkFDcEQsR0FBSXR0QixNQUFNNkQsU0FBVzdELE1BQU02RCxRQUFRdVEsV0FBVyxLQUFNLENBQ2xELElBQUlnMkMsVUFDSixJQUNFQSxVQUFZLElBQUkxK0MsS0FDZDFMLE1BQU02RCxRQUNOK0YsS0FBSzAyQyx3QkFDTDlyQyxTQUFTLENBQUVDLFVBQVUsSUFBUXBJLEtBQ2pDLENBQUUsTUFBT3FJLEtBQ1AwMUMsVUFBWSxJQUNkLENBQ0lBLFlBQ0Y5OEIsZ0JBQWdCLDBCQUEwQjduQixhQUFlMmtELFVBRTdELE9BR0l4Z0QsS0FBSzlCLE9BQU93bEIsZ0JBQ3BCLENBRUEsdUJBQU0rOEIsQ0FBbUJucUQsS0FBTUYsT0FDN0IsTUFBTXNnQixlQUFpQixDQUFDLEVBQ2xCOHBDLFVBQVkxa0QsTUFBTW1JLFNBQVM3TixRQUFVLEtBQU82TixTQUFTN04sT0FFM0QsR0FEQXNnQixlQUFlcGdCLE1BQVFrcUQsV0FDbEJBLFdBQ0NwcUQsTUFBTW9VLFdBQVcsS0FBTSxDQUV6QmtNLGVBRGdCcGdCLEtBQUtvWixRQUFRLFNBQVUsYUFDYnRaLEtBQzVCLE9BR0k0SixLQUFLOUIsT0FBT3dZLHNCQUNaMVcsS0FBS3FnRCw0QkFDYixDQUVBLHVCQUFNSyxDQUFtQm44QixhQUFjLEdBQ3JDLE1BQU1uUSxRQUFVLEdBQ1Y4aUIsUUFBVSxHQUlWem9CLE1BQVFuUixLQUFLQyxLQUFLQyxTQUFTLG9CQUNqQyxJQUFJbWpELGFBQWUsRUFDZjl3QyxRQUFVLHdCQUNkLElBQUssTUFBTTVKLFFBQVFqRyxLQUFLa08sTUFDdEIsR0FBa0IsVUFBZGpJLEtBQUs1SCxNQUNINEgsS0FBS3dDLGlCQUFrQixDQUN6Qms0QyxlQUNBLE1BQU12ckMsVUFBWSxJQUFJd3JDLElBQUksQ0FBRTU3QyxNQUFPLE1BQU80RixTQUFTLENBQUV0SSxPQUFPLElBQ3REMnNDLFdBQWFocEMsS0FBSzdQLE1BQ3hCLElBQUl5cUQsUUFBVSxLQUNWQyxzQkFBd0IsS0FDNUIsR0FBSTFyQyxJQUFJM1MsTUFBUXdzQyxZQUFjNzVCLElBQUkzUyxPQWJULEdBYTBDLENBQ2pFLE1BQU1zK0MsaUJBQW1CLElBQUlILElBQUksQ0FBRTU3QyxNQUFPLEtBQU00RixTQUFTLENBQ3ZEdEksT0FBTyxJQUlULEdBRkE0MEIsUUFBUTkvQixLQUFLNk8sS0FBS2dJLElBR2hCZ2hDLFdBckJzQixJQXNCdEJBLFdBQWE4UixXQUFXdCtDLE9BdEJGLEdBdUJ0QixDQUNBLE1BQU11K0Msb0JBQXNCLElBQUlKLElBQUksQ0FDbEM1N0MsTUFBTyxFQUNQRCxPQUFRLElBQ1A2RixTQUFTLENBQUV0SSxPQUFPLElBQ2YyK0MsVUFBWUQsY0FBY3YrQyxNQUMxQnkrQyxpQkFBbUIsZUFBZUYsY0FBY3hoRCxPQUFPLFFBQVF3aEQsY0FBY3hoRCxPQUFPLFFBQVF5aEQsaUJBQ2xHaDJDLFFBQVFrMkMsTUFBTUQsa0JBQ2RKLHNCQUF3QixpQ0FBaUN4akQsS0FBS0MsS0FBS3lXLE9BQ2pFLGlCQUNBLENBQ0V0UixRQUFTLEdBQUdzK0MsY0FBY3hoRCxPQUFPLFFBQVF3aEQsY0FBY3hoRCxPQUFPLEtBQzlEeWhELFVBQ0FoNUMsTUFBT2hDLEtBQUszUCxLQUNaMjRDLFdBQVlBLFdBQWE4UixXQUFXdCtDLDJCQUlsQ3pDLEtBQUsyN0MsT0FBTzM3QyxLQUFLK3BCLElBQU1rM0IsVUFDL0IsQ0FDQUosU0FBV0UsV0FBV3QrQyxNQUN0Qm9OLFNBQVcsaUNBQWlDdlMsS0FBS0MsS0FBS3lXLE9BQ3BELGtCQUNBLENBQ0UvTixLQUFNQSxLQUFLM1AsS0FDWDhlLElBQUtBLElBQUkzUyxNQUNUMitDLE1BQU9uN0MsS0FBSzdQLE1BQ1p5cUQsUUFBU0UsV0FBV3QrQyxxQkFHTSxPQUExQnErQyx3QkFDRmp4QyxTQUFXaXhDLDZCQUVQNzZDLEtBQUtvN0MsbUJBQW1CUixRQUNoQyxNQUNFaHhDLFNBQVcsZ0NBQWdDdlMsS0FBS0MsS0FBS3lXLE9BQ25ELGtCQUNBLENBQ0UvTixLQUFNQSxLQUFLM1AsS0FDWDhlLElBQUtBLElBQUkzUyxNQUNUMitDLE1BQU9uN0MsS0FBSzdQLHFCQUdoQmdlLFFBQVFoZCxLQUFLNk8sS0FBS2dJLFVBRWRoSSxLQUFLdUMsdUJBQ2IsQ0FHSixNQUFNMnlDLGlCQUFtQixHQUN6QixJQUFJbUcsU0FBVSxFQUNkLElBQUssTUFBTTVGLG1CQUFtQjE3QyxLQUFLakUsT0FBT28vQyxpQkFDcENPLGdCQUFnQkwsU0FDbEJGLGlCQUFpQi9qRCxLQUFLc2tELGlCQUNiQSxnQkFBZ0JOLFVBQVksR0FDckNNLGdCQUFnQk4sWUFDaEJELGlCQUFpQi9qRCxLQUFLc2tELGlCQUN0QjRGLFNBQVUsR0FFVkEsU0FBVSxFQVlkLEdBVElBLFVBQ0VYLGVBQ0Y5d0MsU0FBVyxRQUViQSxTQUFXLFNBQVN2UyxLQUFLQyxLQUFLeVcsT0FBTywwQ0FDL0JoVSxLQUFLOUIsT0FBTyxDQUNoQiwwQkFBMkJpOUMscUJBRzFCNTJCLFlBQWEsQ0FDaEIxVSxTQUFXLE9BQ1gsTUFBTUcsUUFBVSxDQUFFOVYsTUFBTzhGLFlBQ25CdVAsV0FBV0ssY0FBYyt3QyxhQUFlbHlDLE1BQVEsR0FBSW9CLFFBQVMsQ0FDakVHLFVBRUZoUSxLQUFLNjhDLHVCQUF3QixDQUMvQixDQUNBLE1BQU8sQ0FBRXpvQyxRQUFTOGlCLFFBQ3BCLENBRUEsaUJBQU1xcUIsQ0FBYWg5QixhQUFjLEdBQy9CLE1BQU1pOUIsWUFBY3hoRCxLQUFLakUsT0FBT0MsUUFBUXkrQyxJQUFJcmtELE1BQ3ZDb3JELG1CQUFtQnhoRCxLQUFLOUIsT0FBTyxDQUFFLDJCQUE0QixJQUNsRSxNQUFNdWpELDRCQUE4Qm5rRCxLQUFLbUUsU0FBU3ZFLElBQ2hELE9BQ0EsK0JBRUk2bkMsbUJBQXFCLElBQUlqakMsS0FBSyxTQUFTWCxLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BQzlEaS9DLHNCQUF3QjNjLFlBQWN5YyxZQUM1QyxJQUFJRyxZQUNBRiw0QkFFR0UsWUFETEQsc0JBQ21CLFVBQ0EsU0FDVkEsd0JBQ1RDLFlBQWMsUUFFaEIsTUFBTWx6QyxNQUFRblIsS0FBS0MsS0FBS0MsU0FBUyxxQkFDakMsSUFBSXFTLFFBQVUsd0JBQ2QsR0FBSTR4Qyw2QkFBK0JDLHNCQUF1QixDQUN4RCxNQUFNRSxvQkFBc0IsSUFBSTkvQyxLQUFLNi9DLGFBQWF4Z0QsS0FBSyxDQUFFbUIsT0FBTyxLQUM3REcsWUFDR3pDLEtBQUs5QixPQUFPLENBQ2hCLDJCQUNFOEIsS0FBS2pFLE9BQU9DLFFBQVF5K0MsSUFBSXJrRCxNQUFRd3JELGVBRXBDL3hDLFNBQVcsaUNBQWlDdlMsS0FBS0MsS0FBS3lXLE9BQ3BELHFCQUNBLENBQ0VvQixJQUFLMnZCLFlBQ0xxYyxNQUFPSSxZQUNQWCxRQUFTZSx1QkFHZixNQUNFL3hDLFNBQVcsZ0NBQWdDdlMsS0FBS0MsS0FBS3lXLE9BQ25ELHdCQUNBLENBQUVvQixJQUFLMnZCLFlBQWFxYyxNQUFPSSx1QkFHL0IsSUFBS2o5QixZQUFhLENBQ2hCMVUsU0FBVyxPQUNYLE1BQU1HLFFBQVUsQ0FBRTlWLE1BQU84RixZQUNuQnVQLFdBQVdLLGNBQWNuQixNQUFPb0IsUUFBUyxDQUFFRyxTQUNuRCxDQUNGLENBRUEsa0JBQU02eEMsQ0FBY3Z0QyxRQUFTaVEsYUFBYyxHQUN6QyxNQUFNdGMsTUFBUWpJLEtBQUtrTyxNQUFNaFIsSUFBSW9YLFNBQzdCLElBQUtyTSxNQUFPLE9BQ1osSUFBSXdHLE1BQVEsR0FDUm9CLFFBQVUsR0FDZCxNQUFNazFCLFlBQWMsSUFBSWpqQyxLQUFLLFNBRzdCLFNBRk1pakMsWUFBWTVqQyxLQUFLLENBQUVtQixPQUFPLElBQzNCaWlCLG1CQUFtQnJqQixTQUFTaUMsZUFBZTRoQyxhQUM1Q0EsWUFBWXRpQyxNQUFRd0YsTUFBTTdSLE9BQVMydUMsWUFBWXRpQyxPQUFTLEdBQUksQ0FDOUQsTUFBTWsvQyxZQUFjLElBQUk3L0MsS0FBSyxjQUN2QjYvQyxZQUFZeGdELEtBQUssQ0FBRW1CLE9BQU8sSUFDM0JpaUIsbUJBQW1CcmpCLFNBQVNpQyxlQUFldytDLGFBQ2hEOXhDLFFBQVV2UyxLQUFLQyxLQUFLeVcsT0FBTyx5QkFBMEIsQ0FDbkQvTixLQUFNZ0MsTUFBTTNSLEtBQ1p1cUQsUUFBU2MsWUFBWWwvQyxRQUV2QmdNLE1BQVFuUixLQUFLQyxLQUFLeVcsT0FBTyxvQkFBcUIsQ0FDNUMvTixLQUFNZ0MsTUFBTTNSLEtBQ1o4ZSxJQUFLMnZCLFlBQVl0aUMsTUFDakIyK0MsTUFBT241QyxNQUFNN1IsY0FFVDZSLE1BQU1vNUMsbUJBQW1CTSxZQUFZbC9DLE1BQzdDLE1BQ0VnTSxNQUFRblIsS0FBS0MsS0FBS3lXLE9BQU8sb0JBQXFCLENBQzVDL04sS0FBTWdDLE1BQU0zUixLQUNaOGUsSUFBSzJ2QixZQUFZdGlDLE1BQ2pCMitDLE1BQU9uNUMsTUFBTTdSLFFBRWZ5WixRQUFVdlMsS0FBS0MsS0FBS3lXLE9BQU8seUJBQTBCLENBQ25EL04sS0FBTWdDLE1BQU0zUixPQUdoQixNQUFNMFosUUFBVSxDQUFFOVYsTUFBTzhGLEtBQUtteEMsV0FDeEI1aEMsV0FBV0ssY0FBY25CLE1BQU9vQixRQUFTLENBQUVHLGdCQUMzQy9ILE1BQU1PLHVCQUNkLENBRUEsa0JBQUE0cUMsQ0FBb0J6MEMsZUFDbEIsTUFBTW1qRCxlQUFpQjloRCxLQUFLakUsT0FBT2dtRCxhQUFhcGpELGdCQUFnQnZJLE1BQ2hFLE1BQThCLGtCQUFuQjByRCxnQkFHSkEsY0FDVCxDQUVBLGlCQUFBeE8sQ0FBbUIzMEMsY0FBZXFqRCxPQUNoQyxHQUFLaGlELEtBQUtvekMsbUJBQW1CejBDLGVBQTdCLENBR0EsR0FBSUEsZ0JBQWtCakssS0FBSzBGLE9BQU9DLGFBQXlCLGlCQUFWMm5ELE1BQTBCLENBQ3pFLE1BQU16TyxTQUFXdnpDLEtBQUtzekMsa0JBQWtCMzBDLGNBQWUsWUFDakRQLFNBQVc0QixLQUFLc3pDLGtCQUFrQjMwQyxjQUFlLFlBQ3ZELFFBQXdCLElBQWJQLFNBQTBCLENBQ25DLElBQWlCLElBQWJtMUMsU0FDRixPQUFPbjFDLFNBQVcsSUFBTWQsS0FBS0MsS0FBS0MsU0FBUyxlQUN0QyxJQUFpQixJQUFiKzFDLFNBQ1QsT0FBT24xQyxTQUFXLElBQU1kLEtBQUtDLEtBQUtDLFNBQVMsYUFFL0MsQ0FDQSxNQUFPLEVBQ1QsQ0FDQSxPQUFPd0MsS0FBS2pFLE9BQU9nbUQsYUFBYXBqRCxpQkFBaUJxakQsTUFiakQsQ0FjRixDQUVBLHFCQUFNQyxDQUFpQnRqRCxlQUNFcUIsS0FBS296QyxtQkFBbUJ6MEMscUJBSXZDcUIsS0FBS3VvQixlQUFlNXBCLHFCQUZwQnFCLEtBQUs4cUIsYUFBYW5zQixjQUk1QixDQUVBLGtCQUFNbXNCLENBQ0puc0IsZUFDQSxZQUNlLEVBQUssVUFDUCxFQUFLLFNBQ0wsS0FBSSxTQUNKLE1BQ1QsQ0FBQyxHQUVMLElBQUt1akQsWUFBYzVrRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFBc0IsQ0FDakUsTUFBTUQsUUFBVStDLEtBQUsvQyxRQUNsQjFHLFFBQU91RyxRQUFVckIsaUJBQWlCaUQsb0JBQW9CNUIsT0FBUTZCLGlCQUM5RHFGLEtBQUlsSCxRQUFVQSxPQUFPbVIsS0FDbEJrMEMsT0FBUyxDQUFDLEVBQ2hCLE9BQVF4akQsZUFDTixLQUFLakssS0FBSzBGLE9BQU9PLEtBQ2Z3bkQsT0FBT2pqRCxNQUFRLENBQ2JDLEtBQU0sQ0FDSmlqRCxTQUFTLElBR2IsTUFDRixLQUFLMXRELEtBQUswRixPQUFPQyxZQUNmOG5ELE9BQU9qakQsTUFBUSxDQUNid0MsS0FBTSxDQUNKNnhDLGNBQVUxMUMsSUFHZHNrRCxPQUFPL2pELFNBQVcsQ0FDaEJtMEIsWUFBUTEwQixFQUNSUyxhQUFTVCxJQUVNLElBQWIwMUMsV0FBa0MsSUFBYkEsV0FDdkI0TyxPQUFPampELE1BQU13QyxLQUFLNnhDLFNBQVdBLFNBQzdCNE8sT0FBT2pqRCxNQUFRLENBQ2J3QyxLQUFNLENBQ0o2eEMsV0FHQW4xQyxpQkFDRW0xQyxTQUNGNE8sT0FBTy9qRCxTQUFTbTBCLE9BQVNuMEIsU0FFekIrakQsT0FBTy9qRCxTQUFTRSxRQUFxQixLQUFYRixXQU1wQyxHQUF1QixJQUFuQm5CLFFBQVEyRCxPQUFjLENBQ3hCLE1BQU05RCxPQUFTOEYsT0FBT3kvQyxjQUFjOXJELFFBQ2xDdUcsUUFBVUEsT0FBT21SLEtBQU90UCxnQkFFMUIsR0FBc0IsSUFBbEI3QixPQUFPOEQsT0FBYyxDQUN2QixNQUFNMGhELE9BQVMsQ0FDYjdrRCxLQUFNWCxPQUFPLEdBQUdXLEtBQ2hCSyxVQUFVLEdBRVBjLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxPQVM5Q3VqRCxPQUFPaHNELEtBQU9nSCxLQUFLQyxLQUFLQyxTQUFTVixPQUFPLEdBQUd4RyxNQUMzQ2dzRCxPQUFPdGpELFNBQVcsQ0FBQ2xDLE9BQU8sR0FBR21SLE1BUjdCcTBDLE9BQU9qbEQsTUFBUUMsS0FBS0MsS0FBS0MsU0FBU1YsT0FBTyxHQUFHTyxPQUM1Q2lsRCxPQUFPcGpELE1BQVEsQ0FDYkMsS0FBTSxDQUNKQyxTQUFVdEMsT0FBTyxHQUFHbVIsTUFPMUIsTUFBTXMwQyxXQUFhM2pELFFBQVFDLE1BQU0yYSxZQUFZOG9DLE9BQVFILGNBQy9DOWxELE1BQU1lLHdCQUF3QixlQUFnQixDQUFDbWxELFlBQ3ZELE1BRUVMLFlBQWEsQ0FFakIsTUFDRUMsT0FBT2hSLElBQU1sMEMsUUFBUSxTQUNmWixNQUFNZzdDLHdCQUF3QixlQUFnQixDQUFDOEssU0FDckRELFlBQWEsQ0FFakIsQ0FDQSxHQUFJQSxhQUFlNWtELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUFzQixDQUNqRSxPQUFReUIsZUFDTixLQUFLakssS0FBSzBGLE9BQU9FLFlBQ2pCLEtBQUs1RixLQUFLMEYsT0FBT0csWUFDakIsS0FBSzdGLEtBQUswRixPQUFPSSxlQUNqQixLQUFLOUYsS0FBSzBGLE9BQU9LLE1BQ2pCLEtBQUsvRixLQUFLMEYsT0FBT00sTUFDakIsS0FBS2hHLEtBQUswRixPQUFPTyxXQUNUcUYsS0FBSzlCLE9BQU8sQ0FDaEIsQ0FBQyxxQkFBcUJTLHdCQUF3QixJQUVoRCxNQUNGLEtBQUtqSyxLQUFLMEYsT0FBT0MsWUFDZixDQUNFLE1BQU1tb0QsT0FBUyxDQUFDLEVBQ2hCQSxPQUFPLHFCQUFxQjdqRCx3QkFBeUIsR0FDcEMsSUFBYjQwQyxXQUFrQyxJQUFiQSxXQUN2QmlQLE9BQU8scUJBQXFCN2pELDBCQUE0QjQwQyxTQUNwRG4xQyxpQkFDRm9rRCxPQUFPLHFCQUFxQjdqRCwwQkFBNEJQLFdBSXpEd0IsT0FBT0MsVUFBVUMsZUFBZWhILEtBQy9CMHBELE9BQ0EscUJBQXFCN2pELDRCQUd2QjZqRCxPQUFPLHFCQUFxQjdqRCw0QkFBOEIsTUFHekRpQixPQUFPQyxVQUFVQyxlQUFlaEgsS0FDL0IwcEQsT0FDQSxxQkFBcUI3akQsNEJBR3ZCNmpELE9BQU8scUJBQXFCN2pELDRCQUE4QixZQUV0RHFCLEtBQUs5QixPQUFPc2tELE9BQ3BCLEVBR0osSUFBS0MsU0FHSCxPQUFROWpELGVBQ04sS0FBS2pLLEtBQUswRixPQUFPSSxlQUVmLFNBRE13RixLQUFLOHFCLGFBQWFwMkIsS0FBSzBGLE9BQU9NLFFBRWpDc0YsS0FBS296QyxtQkFBbUIxK0MsS0FBSzBGLE9BQU9HLGVBQ3BDeUYsS0FBS296QyxtQkFBbUIxK0MsS0FBSzBGLE9BQU9PLE1BQ3JDLENBQ2lCLElBQUlna0MsYUFDbkIzK0IsS0FBSzJXLFFBQVUzVyxLQUFLc00sU0FBV3RNLEtBQUtpTyxJQUU3QjJuQixXQUNYLENBQ0EsTUFDRixLQUFLbGhDLEtBQUswRixPQUFPTyxXQUNUcUYsS0FBS3VvQixlQUFlN3pCLEtBQUswRixPQUFPSSxzQkFDaEN3RixLQUFLdW9CLGVBQWU3ekIsS0FBSzBGLE9BQU9LLGFBQ2hDdUYsS0FBS3VvQixlQUFlN3pCLEtBQUswRixPQUFPRyxhQUk5QyxDQUNGLENBRUEsb0JBQU1ndUIsQ0FBZ0I1cEIsZUFBZSxZQUFlLEdBQVUsQ0FBQyxHQUM3RCxJQUFLdWpELFlBQWM1a0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQXNCLENBQ2pFLE1BQU1ELFFBQVUrQyxLQUFLL0MsUUFDbEIxRyxRQUFPdUcsUUFBVXJCLGlCQUFpQmlELG9CQUFvQjVCLE9BQVE2QixpQkFDOURxRixLQUFJbEgsUUFBVUEsT0FBT21SLEtBQ3BCaFIsUUFBUTJELE9BQVMsUUFDYnZFLE1BQU1xbUQsd0JBQXdCLGVBQWdCemxELFNBRXBEaWxELFlBQWEsQ0FFakIsQ0FDQSxHQUFJQSxhQUFlNWtELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUMzQyxPQUFReUIsZUFDTixLQUFLakssS0FBSzBGLE9BQU9DLFlBQ2pCLEtBQUszRixLQUFLMEYsT0FBT0UsWUFDakIsS0FBSzVGLEtBQUswRixPQUFPRyxZQUNqQixLQUFLN0YsS0FBSzBGLE9BQU9JLGVBQ2pCLEtBQUs5RixLQUFLMEYsT0FBT0ssTUFDakIsS0FBSy9GLEtBQUswRixPQUFPTSxNQUNqQixLQUFLaEcsS0FBSzBGLE9BQU9PLFdBQ1RxRixLQUFLOUIsT0FBTyxDQUNoQixDQUFDLHFCQUFxQlMseUJBQTBCLGFBRTVDcUIsS0FBSzlCLE9BQU8sQ0FDaEIsQ0FBQyxxQkFBcUJTLHdCQUF3QixJQUt4RCxDQUdBLGtCQUFNZ2tELENBQWNDLGVBQ1o1aUQsS0FBSzlCLE9BQU8sQ0FBRSxDQUFDMGtELFNBQVUsR0FDakMsQ0FFQSxzQkFBTUMsU0FDRTdpRCxLQUFLOUIsT0FBTyxDQUNoQixnQ0FBaUNrRSxLQUFLdUksTUFDcEMzSyxLQUFLakUsT0FBT0MsUUFBUSt0QixJQUFJM3pCLE1BQVEsR0FFbEMsK0JBQWdDLEdBRXBDLENBRUEsa0JBQUkwc0QsR0FDRixNQUFNaDNDLFVBQVksR0FDbEIsSUFBSyxNQUFNMVYsU0FBUzRKLEtBQUtrTyxNQUNKLFVBQWY5WCxNQUFNaUksTUFBb0JqSSxNQUFNMkYsT0FBTzhLLFdBQVd2UCxVQUNwRHdVLFVBQVUxVSxLQUFLaEIsT0FNbkIsT0FGQTBWLFVBQVVJLEtBQUt0RSxjQUFjdUUsZUFFdEJMLFNBQ1QsQ0FFQSxzQkFBSWkzQyxHQUNGLE1BQU1DLFdBQWEsR0FDbkIsSUFBSyxNQUFNNXNELFNBQVM0SixLQUFLa08sTUFDdkIsR0FBbUIsV0FBZjlYLE1BQU1pSSxPQUFzQmpJLE1BQU0yRixPQUFPOEssV0FBV2hQLEtBQU0sQ0FDNUQsTUFBTW9RLE1BQVFqSSxLQUFLa08sTUFBTWhSLElBQUk5RyxNQUFNMkYsT0FBT2tNLE1BQU0rRixLQUFLQyxJQUNyRDdYLE1BQU0yRixPQUFPa00sTUFBTStGLEtBQUs1WCxNQUFRNlIsTUFBUUEsTUFBTTdSLE1BQVEsRUFDdEQ0c0QsV0FBVzVyRCxLQUFLaEIsTUFDbEIsQ0FLRixPQUZBNHNELFdBQVc5MkMsS0FBS3RFLGNBQWN1RSxlQUV2QjYyQyxVQUNULENBRUEsaUJBQUlDLEdBQ0YsTUFBTW4zQyxVQUFZLEdBQ2xCLElBQUssTUFBTTFWLFNBQVM0SixLQUFLa08sTUFDSixVQUFmOVgsTUFBTWlJLE1BQW9CakksTUFBTTJGLE9BQU84SyxXQUFXdFAsU0FDcER1VSxVQUFVMVUsS0FBS2hCLE9BTW5CLE9BRkEwVixVQUFVSSxLQUFLdEUsY0FBY3VFLGVBRXRCTCxTQUNULENBRUEsUUFBSWxJLEdBRUYsT0FBT3RHLEtBQUs4a0IsTUFBTTFpQixNQUFLa0UsU0FDakJBLEtBQUtrWSxXQUNIbFksS0FBS2tZLFVBQVU3TixLQUFPak8sS0FBS2lPLEtBSXJDLENBRUEsY0FBSWl0QixHQUNGLE1BQU1qekIsTUFBUWpJLEtBQUtxNkMsb0JBQW9CLGlCQUN2QyxHQUFJcHlDLE1BQ0YsT0FBT0EsTUFFVCxNQUFNNkQsVUFBWTlMLEtBQUs2OEIsZ0JBQ3JCdi9CLEtBQUtDLEtBQUtDLFNBQVMsc0NBRXJCLE9BQXlCLElBQXJCc08sVUFBVWxMLE9BQXFCa0wsVUFBVSxHQUN0QyxJQUNULENBRUEscUJBQUlrdUMsR0FDRixNQUFNL3hDLE1BQVFqSSxLQUFLcTZDLG9CQUFvQix5QkFDdkMsR0FBSXB5QyxNQUNGLE9BQU9BLE1BRVQsTUFBTTZELFVBQVk5TCxLQUFLNjhCLGdCQUNyQnYvQixLQUFLQyxLQUFLQyxTQUFTLDhDQUVyQixPQUF5QixJQUFyQnNPLFVBQVVsTCxPQUFxQmtMLFVBQVUsR0FDdEMsSUFDVCxDQUVBLHNCQUFJNmMsR0FDRixNQUFNMWdCLE1BQVFqSSxLQUFLcTZDLG9CQUFvQiwwQkFDdkMsR0FBSXB5QyxNQUNGLE9BQU9BLE1BRVQsTUFBTTZELFVBQVk5TCxLQUFLNjhCLGdCQUNyQnYvQixLQUFLQyxLQUFLQyxTQUFTLCtDQUVyQixPQUF5QixJQUFyQnNPLFVBQVVsTCxPQUFxQmtMLFVBQVUsR0FDdEMsSUFDVCxDQUVBLGlCQUFJbXdDLEdBQ0YsTUFBTWlILEdBQUtsakQsS0FBSzJvQixtQkFDaEIsR0FBSXU2QixHQUFJLENBQ04sTUFBTTlzRCxNQUFROHNELEdBQUc5c0QsTUFDakIsT0FBSUEsT0FDRzZOLFNBQVNpL0MsR0FBR25uRCxPQUFPM0YsTUFDNUIsQ0FDQSxPQUFPLENBQ1QsQ0FFQSxrQkFBSStzRCxHQUNGLE9BQU9uakQsS0FBS1AsUUFBUSxPQUFRLG9CQUFxQixDQUNuRCxDQUVBLHVCQUFNMmpELFNBQ0VwakQsS0FBS20xQixRQUFRLE9BQVEsa0JBQWtCLEVBQy9DLENBRUEsNkJBQUkvTixHQUNGLE9BQU9wbkIsS0FBS1AsUUFBUSxPQUFRLCtCQUFnQyxDQUM5RCxDQUVBLG1DQUFNaXBCLFNBQ0Uxb0IsS0FBS20xQixRQUFRLE9BQVEsNkJBQTZCLEVBQzFELENBRUEsZ0JBQUlva0IsR0FDRixNQUFNOEosR0FBS3JqRCxLQUFLZzZDLGtCQUNoQixHQUFJcUosR0FBSSxDQUNOLE1BQU1qdEQsTUFBUWl0RCxHQUFHanRELE1BQ2pCLE9BQUlBLE9BQ0c2TixTQUFTby9DLEdBQUd0bkQsT0FBTzNGLE1BQzVCLENBQ0EsT0FBTyxDQUNULENBRUEscUJBQU9rdEQsQ0FBZ0J0dkMsT0FBUXV2QyxPQUFRbnRELE9BQ3JDLE9BQVE0ZCxRQUNOLEtBQUt0ZixLQUFLOHVELG1CQUFtQjd0RCxJQUMzQixPQUFPeU0sS0FBS3VJLE1BQU12VSxNQUFRLEtBQU8sSUFBT2dNLEtBQUt1SSxNQUFNdlUsTUFBUSxJQUFNLEdBQU0sSUFBT0EsTUFBUSxHQUN4RixLQUFLMUIsS0FBSzh1RCxtQkFBbUI1dEQsTUFDM0IsT0FBUXdNLEtBQUt1SSxNQUFNdlUsTUFBUSxLQUFRLElBQU9nTSxLQUFLdUksTUFBTXZVLE1BQVEsSUFBTSxHQUFNLElBQU9nTSxLQUFLdUksTUFBTXZVLE1BQVEsR0FBSyxFQUFLLElBQU9nTSxLQUFLdUksTUFBTXZVLE1BQVEsR0FBSyxFQUFLLElBQU9BLE1BQVEsRUFDbEssS0FBSzFCLEtBQUs4dUQsbUJBQW1CanVELFlBQzNCLE9BQU9ndUQsT0FBU3JuRCxPQUFPOUYsT0FBT3F0RCxvQkFBZTVsRCxFQUFXLENBQUU2bEQsc0JBQXVCLElBQUtoMEMsUUFBUSxRQUFTLElBQ3pHLEtBQUtoYixLQUFLOHVELG1CQUFtQmh1RCxhQUMzQixPQUFPMEcsT0FBTzlGLE9BQU9xdEQsb0JBQWU1bEQsRUFBVyxDQUFFNmxELHNCQUF1QixJQUFLaDBDLFFBQVEsUUFBUyxJQUFNLElBQU02ekMsT0FDNUcsS0FBSzd1RCxLQUFLOHVELG1CQUFtQi90RCxZQUMzQixPQUFPOHRELE9BQVNybkQsT0FBTzlGLE9BQU9xdEQsaUJBQ2hDLEtBQUsvdUQsS0FBSzh1RCxtQkFBbUI5dEQsYUFDM0IsT0FBT3dHLE9BQU85RixPQUFPcXRELGlCQUFtQixJQUFNRixPQUVsRCxNQUFPLEdBQ1QsQ0FFQSxvQkFBT0ksQ0FBZTN2QyxPQUFReFUsT0FBUTZqRCxHQUFJaGxELEtBQU1qSSxPQUM5Q2l0RCxHQUFLQSxJQUFNLEVBQ1gsTUFBTU8sSUFBTXBrRCxPQUFPRSxNQUFLMFgsSUFBdUIsaUJBQVZBLEVBQUVsVSxLQUFvQmtVLEVBQUVsVSxLQUFPbWdELE1BQXlCLGlCQUFWanNDLEVBQUVuVSxLQUFvQm1VLEVBQUVuVSxLQUFPb2dELE1BQ2xILFFBQW1CLElBQVJPLFVBQTRDLElBQWRBLElBQUl2bEQsWUFBK0MsSUFBZnVsRCxJQUFJeHRELE9BQy9FLE9BQVE0ZCxRQUNOLEtBQUt0ZixLQUFLOHVELG1CQUFtQjd0RCxJQUMzQixPQUFRaXVELElBQUl2bEQsT0FDVixLQUFLM0osS0FBS212RCxpQkFBaUJ4dEQsV0FDekIsT0FBTyxJQUFNZ3RELEdBQUtPLElBQUl4dEQsT0FDeEIsS0FBSzFCLEtBQUttdkQsaUJBQWlCenRELE1BQ3pCLE9BQU8sSUFBTXd0RCxJQUFJeHRELE9BQ25CLEtBQUsxQixLQUFLbXZELGlCQUFpQjF0RCxFQUN6QixPQUFPLEdBQUt5dEQsSUFBSXh0RCxPQUNsQixLQUFLMUIsS0FBS212RCxpQkFBaUIzdEQsRUFDekIsT0FBTyxFQUFJMHRELElBQUl4dEQsT0FFbkIsTUFDRixLQUFLMUIsS0FBSzh1RCxtQkFBbUI1dEQsTUFDM0IsT0FBUWd1RCxJQUFJdmxELE9BQ1YsS0FBSzNKLEtBQUttdkQsaUJBQWlCeHRELFdBQ3pCLE9BQU8sSUFBTWd0RCxHQUFLTyxJQUFJeHRELE9BQ3hCLEtBQUsxQixLQUFLbXZELGlCQUFpQnp0RCxNQUN6QixPQUFPLElBQU13dEQsSUFBSXh0RCxPQUNuQixLQUFLMUIsS0FBS212RCxpQkFBaUI1dEQsUUFDekIsT0FBTyxHQUFLMnRELElBQUl4dEQsT0FDbEIsS0FBSzFCLEtBQUttdkQsaUJBQWlCN3RELFNBQ3pCLE9BQU8sRUFBSTR0RCxJQUFJeHRELE9BQ2pCLEtBQUsxQixLQUFLbXZELGlCQUFpQjl0RCxVQUN6QixPQUFPLEVBQUk2dEQsSUFBSXh0RCxPQUNqQixLQUFLMUIsS0FBS212RCxpQkFBaUIvdEQsTUFDekIsT0FBTyxFQUFJOHRELElBQUl4dEQsT0FFbkIsTUFDRixRQUNFLE9BQVF3dEQsSUFBSXZsRCxPQUNWLEtBQUszSixLQUFLbXZELGlCQUFpQnh0RCxXQUN6QixPQUFPZ3RELEdBQUtPLElBQUl4dEQsT0FDbEIsS0FBSzFCLEtBQUttdkQsaUJBQWlCenRELE1BQ3pCLE9BQU8sRUFBSXd0RCxJQUFJeHRELFFBS3pCLE9BQU8sQ0FDVCxDQUVBLGlCQUFJMHRELEdBQ0YsT0FBT24wQixTQUFTZzBCLGNBQWMzakQsS0FBS2pFLE9BQU91OEMsU0FBU3RrQyxPQUFRaFUsS0FBS2pFLE9BQU91OEMsU0FBUzk0QyxPQUFRUSxLQUFLdTVDLGFBQWMsZUFBZ0IsZ0JBQzdILENBRUEsUUFBSXdLLEdBQ0YsT0FBT3AwQixTQUFTZzBCLGNBQWMzakQsS0FBS2pFLE9BQU91OEMsU0FBU3RrQyxPQUFRaFUsS0FBS2pFLE9BQU91OEMsU0FBUzk0QyxPQUFRUSxLQUFLdTVDLGFBQWMsV0FBWSxZQUN6SCxDQUVBLFVBQUl5SyxHQUNGLE9BQU9yMEIsU0FBU2cwQixjQUFjM2pELEtBQUtqRSxPQUFPdThDLFNBQVN0a0MsT0FBUWhVLEtBQUtqRSxPQUFPdThDLFNBQVM5NEMsT0FBUVEsS0FBS3U1QyxhQUFjLGFBQWMsY0FDM0gsQ0FFQSxVQUFJNTFCLEdBQ0YsTUFBTTdYLFVBQVksR0FDbEIsSUFBSyxNQUFNMVYsU0FBUzRKLEtBQUtrTyxNQUNKLFVBQWY5WCxNQUFNaUksTUFBa0J5TixVQUFVMVUsS0FBS2hCLE9BSzdDLE9BRkEwVixVQUFVSSxLQUFLdEUsY0FBY3VFLGVBRXRCTCxTQUNULENBRUEsVUFBSXFqQixHQUNGLE9BQU83eEIsS0FBSzhrQixNQUFNN3JCLFFBQ2hCZ3RCLEdBQUt2akIsS0FBS2lrRCxtQkFBbUIxZ0MsRUFBRyxXQUFhQSxFQUFFaGIsTUFFbkQsQ0FFQSxVQUFJMjdDLEdBQ0YsT0FBT2xrRCxLQUFLbXZCLE9BQU81NEIsUUFBT2d0QixHQUFLQSxFQUFFekgsV0FBVzdOLEtBQU9qTyxLQUFLaU8sSUFDMUQsQ0FFQSxpQkFBSWsyQyxHQUNGLE9BQ0U3bUQsS0FBSzhrQixNQUFNZ2lDLFNBQVM3dEQsUUFBT2d0QixHQUFLQSxFQUFFekgsV0FBVzdOLEtBQU9qTyxLQUFLaU8sS0FBSSxJQUFNLElBRXZFLENBRUEsV0FBTW8yQyxDQUFPanVELE9BQ1BBLE1BQVEsSUFBR0EsTUFBUSxHQUNuQkEsTUFBUTRKLEtBQUtqRSxPQUFPQyxRQUFRaTJDLEdBQUdodkMsTUFDakM3TSxNQUFRNEosS0FBS2pFLE9BQU9DLFFBQVFpMkMsR0FBR2h2QyxLQUVqQyxNQUFNcWhELGFBQWV0a0QsS0FBS2l5QyxHQUMxQixJQUFJc1MsWUFRSixPQU5Jem9ELE1BQU13b0QsZUFBaUJsdUQsT0FBU2t1RCxtQkFDNUJ0a0QsS0FBSys2QyxPQUFPM2tELFFBRWxCbXVELFlBQWNELGFBQWVsdUQsWUFDdkI0SixLQUFLZzZCLFdBQVd1cUIsWUFBYSxDQUFFNXFCLGFBQWEsS0FFN0N2akMsS0FDVCxDQUVBLGdCQUFNNGpDLENBQVl5VyxPQUFRbnhDLFFBQVUsQ0FBQyxHQUVuQyxNQUFNa2xELFVBQVlsbEQsUUFBUXJELE1BQ3RCcUQsUUFBUXJELE1BQ1IrRCxLQUFLakUsT0FBT0MsUUFBUUMsTUFDbEJ3b0QsWUFBY3hnRCxTQUFTd3NDLFFBQzdCLElBQUlpVSxXQUFhLEVBQ1pwbEQsUUFBUXE2QixhQUNPLE9BQWQ2cUIsWUFFTzU4QyxjQUFjKzhDLFVBQVVILFdBQ2pDRSxrQkFBb0IsSUFBSTVpRCxLQUFLMGlELFdBQVdyakQsS0FBSyxDQUFFbUIsT0FBTyxLQUFTRyxNQUNyRDNHLE1BQU1JLE9BQU9zb0QsWUFFYjFvRCxNQUFNSSxPQUFPc29ELFdBQVdwdUQsUUFHbEMyUyxHQUFHQyxjQUFjc0ssS0FDZmhXLEtBQUtDLEtBQUt5VyxPQUFPLHNDQUF1QyxDQUN0RDVkLE1BQU9vdUQsYUFKWEUsV0FBYXhvRCxPQUFPc29ELFVBQVVwdUQsT0FGOUJzdUQsV0FBYXhvRCxPQUFPc29ELFlBV3hCLE1BQU1JLFVBQVlILFlBQWNDLFdBQ2hDLEdBQUlFLFdBQWEsRUFBRyxPQUFPLEVBRTNCLFNBRE01a0QsS0FBSys2QyxPQUFPLzZDLEtBQUtpeUMsR0FBSzJTLFdBQ3hCQSxXQUFhNWtELEtBQUtqRSxPQUFPQyxRQUFRaTJDLEdBQUdodkMsVUFDaENqRCxLQUFLOHFCLGFBQWFwMkIsS0FBSzBGLE9BQU9PLFdBRXBDLEdBQUkyQyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFDNUIsR0FBZ0IsSUFBWjhDLEtBQUtpeUMsR0FDSDJTLFdBQWF4aUQsS0FBS3lpRCxLQUFLN2tELEtBQUtqRSxPQUFPQyxRQUFRaTJDLEdBQUdodkMsSUFBTSxHQUN0RGpELEtBQUs4cUIsYUFBYXAyQixLQUFLMEYsT0FBT0ssT0FFOUJ1RixLQUFLOHFCLGFBQWFwMkIsS0FBSzBGLE9BQU9HLGtCQUUzQixHQUFJcXFELFdBQWF4aUQsS0FBS3lpRCxLQUFLN2tELEtBQUtqRSxPQUFPQyxRQUFRaTJDLEdBQUdodkMsSUFBTSxHQUFJLENBQ2hELElBQUkwN0IsYUFDbkIzK0IsS0FBSzJXLFFBQVUzVyxLQUFLc00sU0FBV3RNLEtBQUtpTyxJQUU3QjJuQixXQUNYLE1BQ0ssQ0FDTCxJQUFJa3ZCLGVBQWdCLEVBQ2hCRixXQUFheGlELEtBQUt5aUQsS0FBSzdrRCxLQUFLakUsT0FBT0MsUUFBUWkyQyxHQUFHaHZDLElBQU0sVUFDaERqRCxLQUFLOHFCLGFBQWFwMkIsS0FBSzBGLE9BQU9JLGdCQUNwQ3NxRCxlQUFnQixHQUVoQkEsY0FBZ0I5a0QsS0FBS296QyxtQkFBbUIxK0MsS0FBSzBGLE9BQU9JLGdCQUV0QyxJQUFad0YsS0FBS2l5QyxXQUNEanlDLEtBQUs4cUIsYUFBYXAyQixLQUFLMEYsT0FBT0csYUFDaEN1cUQsZUFDRjlrRCxLQUFLOHFCLGFBQWFwMkIsS0FBSzBGLE9BQU9LLE9BR3BDLENBRUYsT0FBT21xRCxTQUNULENBRUEsY0FBSUcsR0FDRixPQUFPL2tELEtBQUtvekMsbUJBQW1CMStDLEtBQUswRixPQUFPSSxlQUM3QyxDQUVBLFNBQUlDLEdBQ0YsT0FBT3VGLEtBQUtvekMsbUJBQW1CMStDLEtBQUswRixPQUFPSyxNQUM3QyxDQUVBLGVBQUlGLEdBQ0YsT0FBT3lGLEtBQUtvekMsbUJBQW1CMStDLEtBQUswRixPQUFPRyxZQUM3QyxDQUVBLFFBQUlJLEdBQ0YsT0FBT3FGLEtBQUtvekMsbUJBQW1CMStDLEtBQUswRixPQUFPTyxLQUM3QyxDQUVBLFNBQUlELEdBQ0YsT0FBT3NGLEtBQUtvekMsbUJBQW1CMStDLEtBQUswRixPQUFPTSxNQUM3QyxFQ2x0SEssTUFBTW9aLFVBQ1gsV0FBQXpPLENBQ0VuTCxNQUFRLEtBQ1IrTixNQUFRLEtBQ1JoQyxLQUFPLEtBQ1BxUSxRQUFVLEVBQ1ZELFdBQWEsS0FDYndoQixzQkFBd0IsRUFDeEJELGlCQUFtQixHQWNuQixHQVpBNTNCLEtBQUs5RixNQUFRQSxNQUNiOEYsS0FBS2lJLE1BQVFBLE1BQ2JqSSxLQUFLaUcsS0FBT0EsS0FDWmpHLEtBQUtxVyxXQUFhQSxXQUNsQnJXLEtBQUsrVSxhQUFldUIsUUFDcEJ0VyxLQUFLdVcsU0FBVyxFQUNoQnZXLEtBQUs2VCxhQUFlLEtBQ3BCN1QsS0FBS29XLG1CQUFxQixLQUMxQnBXLEtBQUs4YyxTQUFVLEVBQ2Y5YyxLQUFLNDNCLGlCQUFtQkEsaUJBQ3hCNTNCLEtBQUs2M0Isc0JBQXdCQSxzQkFFVixPQUFmeGhCLFdBQXFCLENBQ3ZCLE1BQU0ydUMsVUFDb0QsWUFBeEQxbkQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQzVCOEMsS0FBS3FXLFdBQWEydUMsVUFDZGx4QyxVQUFVc1AsZ0JBQWdCQyxRQUMxQnZQLFVBQVVzUCxnQkFBZ0JyUCxPQUNoQyxDQUNGLENBRUEsbUJBQVc4ZixHQUNULE1BQU8sVUFDVCxDQUVBLDBCQUFXelEsR0FDVCxNQUFPLENBQ0xDLFNBQVUsRUFDVnRQLFFBQVMsRUFDVEUsS0FBTSxFQUNOL0osUUFBUyxFQUNUZ0ssU0FBVSxFQUNWcTBCLFdBQVksRUFFaEIsQ0FFQSx1QkFBVzEwQixHQUNULE1BQU8sQ0FDTE0sUUFBUyxHQUNUQyxRQUFTLEVBQ1RMLFFBQVMsRUFDVEUsS0FBTSxFQUNOL0osUUFBUyxFQUNUZ0ssU0FBVSxFQUVkLENBRUEsZUFBVzdWLEdBQ1QsTUFBTyxDQUNMcVksZUFBZ0IsaUJBQ2hCb0ssVUFBVyxZQUNYN1ksTUFBTyxPQUNQaEMsS0FBTSxPQUNON1AsTUFBTyxRQUVYLENBRUEsdUJBQU9rNEIsQ0FBa0JsTCxpQkFDdkIsT0FDR3RuQixNQUFNSSxPQUFPa25CLGtCQUVWQSxnQkFEQWxuQixPQUFPa25CLGtCQUdYLElBQUssSUFDSCxPQUFPOWxCLEtBQUtDLEtBQUtDLFNBQVMsMEJBQzVCLElBQUssSUFDSCxPQUFPRixLQUFLQyxLQUFLQyxTQUFTLHVCQUM1QixJQUFLLEtBQ0gsT0FBT0YsS0FBS0MsS0FBS0MsU0FBUywwQkFDNUIsSUFBSyxNQUNILE9BQU9GLEtBQUtDLEtBQUtDLFNBQVMsMkJBQzVCLEtBQUssRUFDSCxPQUFPRixLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLc1csVUFBVXNQLGdCQUFnQkMsUUFDN0IsT0FBTy9sQixLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLc1csVUFBVXNQLGdCQUFnQnJQLFFBQzdCLE9BQU96VyxLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLc1csVUFBVXNQLGdCQUFnQm5QLEtBQzdCLE9BQU8zVyxLQUFLQyxLQUFLQyxTQUFTLHVCQUM1QixLQUFLc1csVUFBVXNQLGdCQUFnQmxaLFFBQzdCLE9BQU81TSxLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLc1csVUFBVXNQLGdCQUFnQmxQLFNBQzdCLE9BQU81VyxLQUFLQyxLQUFLQyxTQUFTLDJCQUM1QixRQUNFLE9BQU8sS0FFYixDQUVBLFlBQUkrWSxHQVlGLEdBVkt2VyxLQUFLZy9DLFlBQ0poL0MsS0FBSzBXLGlCQUNQMVcsS0FBS3VXLFNBQ0h2VyxLQUFLOUYsTUFBTTZCLE9BQU8ybkIsZ0JBQWdCMWpCLEtBQUswVyxnQkFBZ0J0Z0IsT0FFdkQ0SixLQUFLaUksUUFBT2pJLEtBQUt1VyxTQUFXdlcsS0FBS2lJLE1BQU03UixPQUN2QzRKLEtBQUs4Z0IsWUFDUDlnQixLQUFLdVcsU0FBV3ZXLEtBQUs5RixNQUFNNkIsT0FBT0MsUUFBUWdFLEtBQUs4Z0IsV0FBVzFxQixRQUcxRDRKLEtBQUtnL0MsVUFDUCxPQUNFaC9DLEtBQUs2M0IsdUJBQ0x2NkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBRXRCOEMsS0FBS2cvQyxVQUFZaC9DLEtBQUs2M0Isc0JBQXdCLEVBQVUsRUFDckQ3M0IsS0FBS2cvQyxVQUFZaC9DLEtBQUs2M0Isc0JBRXhCNzNCLEtBQUtnL0MsU0FHaEIsQ0FFQSxZQUFJem9DLENBQVUzSyxHQUNaNUwsS0FBS2cvQyxVQUFZcHpDLENBQ25CLENBRUEsUUFBSWpPLENBQU1pTyxHQUNSNUwsS0FBS2lsRCxNQUFRcjVDLENBQ2YsQ0FFQSxRQUFJak8sR0FFRixPQURLcUMsS0FBS2lsRCxRQUFPamxELEtBQUtpbEQsTUFBUXJtRCxRQUFRQyxNQUFNcW1ELFNBQVMsS0FDOUNsbEQsS0FBS2lsRCxLQUNkLENBRUEsV0FBSUUsR0FPRixPQU5pQnA4QyxHQUFHNGlCLEtBQUsySixXQUFXLytCLFFBQU9zWixTQUV2QzdQLEtBQUtyQyxPQUFTa1MsUUFBUXBRLFFBQVEsT0FBUSxTQUN0Q3FVLFVBQVUrZixXQUFhaGtCLFFBQVFwUSxRQUFRLE9BQVEsVUFHdENtQixPQUFTLENBRXhCLENBRUEsa0JBQUl3a0QsR0FDRixPQUF1QixJQUFuQnBsRCxLQUFLZy9DLFVBQ0EsSUFFSmgvQyxLQUFLZy9DLFVBRVJoL0MsS0FBSzYzQix1QkFDTHY2QixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFFdEI4QyxLQUFLNjNCLHNCQUF3QixFQUN4QjczQixLQUFLZy9DLFVBQVVqdEMsV0FBYS9SLEtBQUs2M0Isc0JBQXNCOWxCLFdBRzlEL1IsS0FBS2cvQyxVQUFVanRDLFdBQWEsSUFBTS9SLEtBQUs2M0Isc0JBQXNCOWxCLFdBRW5EL1IsS0FBS2cvQyxVQUFVanRDLGdCQVg3QixDQVlGLENBRUEscUJBQUlzekMsR0FDRixPQUFPLENBQ1QsQ0FFQSxvQkFBSTdtQixHQUNGLE9BQUl4K0IsS0FBS3VXLFNBQ0h2VyxLQUFLdVcsVUFBWSxJQUFZLEdBQzFCdFMsU0FBU2pFLEtBQUt1VyxVQUVoQixJQUNULENBRUEsaUJBQUlrb0IsR0FDRixPQUFJeitCLEtBQUt1VyxTQUFpQm5VLEtBQUt1SSxNQUFNM0ssS0FBS3VXLFNBQVcsR0FDOUMsSUFDVCxDQUVBLG9CQUFJbW9CLEdBQ0YsT0FBSTErQixLQUFLdVcsU0FBaUJuVSxLQUFLdUksTUFBTTNLLEtBQUt1VyxTQUFXLEdBQzlDLElBQ1QsQ0FFQSxtQkFBSSt1QyxHQUNGLEdBQUl0bEQsS0FBS3VXLFNBQVUsQ0FDakIsR0FBSXZXLEtBQUtxVyxXQUFZLENBQ25CLEdBQUlyVyxLQUFLcVcsWUFBY3ZDLFVBQVVzUCxnQkFBZ0JsWixRQUMvQyxPQUFPbEssS0FBSzArQixpQkFBbUIsR0FBSyxHQUFLLElBQ3BDLEdBQUkxK0IsS0FBS3FXLFlBQWN2QyxVQUFVc1AsZ0JBQWdCblAsS0FDdEQsT0FBT2pVLEtBQUt5K0IsY0FBZ0IsR0FBSyxHQUFLLEdBRTFDLENBQ0EsT0FBT3orQixLQUFLdVcsU0FBVyxHQUFLLEdBQUssR0FDbkMsQ0FDQSxPQUFPLElBQ1QsQ0FFQSxtQkFBSWd2QyxHQUNGLFFBQStCLElBQXBCdmxELEtBQUtxVyxXQUNkLE9BQVFyVyxLQUFLcVcsWUFDWCxLQUFLdkMsVUFBVXNQLGdCQUFnQmxaLFFBQzdCLE9BQU9sSyxLQUFLMCtCLGlCQUNkLEtBQUs1cUIsVUFBVXNQLGdCQUFnQm5QLEtBQzdCLE9BQU9qVSxLQUFLeStCLGNBQ2QsS0FBSzNxQixVQUFVc1AsZ0JBQWdCclAsUUFDN0IsT0FBTy9ULEtBQUt3K0IsaUJBQ2QsS0FBSzFxQixVQUFVc1AsZ0JBQWdCbFAsU0FDN0IsT0FBT2xVLEtBQUtxbEQsa0JBQ2QsS0FBS3Z4QyxVQUFVc1AsZ0JBQWdCQyxRQUM3QixPQUFRLEVBQ1YsUUFDRSxPQUFPcmpCLEtBQUt1VyxTQUdsQixPQUFPLElBQ1QsQ0FFQSxvQkFBSStYLEdBQ0YsUUFBK0IsSUFBcEJ0dUIsS0FBS3FXLFdBQ2QsT0FBUXJXLEtBQUtxVyxZQUNYLEtBQUt2QyxVQUFVc1AsZ0JBQWdCbFosUUFDN0IsT0FBTzVNLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUMxQixLQUFLRixVQUFVc1AsZ0JBQWdCblAsS0FDN0IsT0FBTzNXLEtBQUtDLEtBQUt5VyxPQUFPLHVCQUMxQixLQUFLRixVQUFVc1AsZ0JBQWdCclAsUUFDN0IsT0FBT3pXLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUMxQixLQUFLRixVQUFVc1AsZ0JBQWdCbFAsU0FDN0IsT0FBTzVXLEtBQUtDLEtBQUt5VyxPQUFPLDJCQUMxQixLQUFLRixVQUFVc1AsZ0JBQWdCQyxRQUM3QixPQUFPL2xCLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUMxQixRQUNFLE1BQU8sR0FHYixNQUFPLEVBQ1QsQ0FFQSxrQkFBSW1NLEdBQ0YsSUFBSW5nQixLQUFLbytCLFFBQVQsQ0FDQSxRQUFvQyxJQUF6QnArQixLQUFLd2xELGdCQUFpQyxPQUFPeGxELEtBQUt3bEQsZ0JBQzdELEdBQUl4bEQsS0FBSzQzQixpQkFBa0IsQ0FDekIsTUFBTTZ0QixTQUFXemxELEtBQUswVSxNQUFNalMsTUFBUXpDLEtBQUs0M0IsaUJBQ3pDLE9BQUk2dEIsU0FBVyxFQUFVLEVBQ3JCQSxTQUFXLElBQVksSUFDcEJBLFFBQ1QsQ0FDQSxPQUFPemxELEtBQUswVSxNQUFNalMsS0FSTzVFLENBUzNCLENBRUEsa0JBQUlzaUIsQ0FBZ0J2VSxHQUNsQjVMLEtBQUt3bEQsZ0JBQWtCNTVDLENBQ3pCLENBRUEsMEJBQUk4NUMsR0FDRixPQUFLMWxELEtBQUs0M0IsaUJBQ041M0IsS0FBSzQzQixpQkFBbUIsRUFBVSxJQUFJNTNCLEtBQUs0M0IsbUJBQ3hDNTNCLEtBQUs0M0IsaUJBQWlCN2xCLFdBRk0sSUFHckMsQ0FFQSxZQUFJeUUsR0FDRixJQUFJeFcsS0FBS28rQixVQUNMcCtCLEtBQUsybEQsYUFDVCxPQUFPM2xELEtBQUttZ0IsZ0JBQWtCbmdCLEtBQUtzbEQsZUFDckMsQ0FFQSxjQUFJN3VDLEdBQ0YsSUFBSXpXLEtBQUtvK0IsUUFDVCxPQUErQixJQUF4QnArQixLQUFLbWdCLGNBQ2QsQ0FFQSxvQkFBSXFiLEdBQ0YsSUFBSXg3QixLQUFLbytCLFFBQ1QsT0FBT3ArQixLQUFLNlQsY0FBZ0JDLFVBQVVELGFBQWEzSixPQUNyRCxDQUVBLFVBQUltVixHQUNGLElBQUlyZixLQUFLbytCLFVBQ0xwK0IsS0FBSzJsRCxhQUNULE9BQUkzbEQsS0FBS2tsQyxVQUFrQmxsQyxLQUFLcVcsWUFBY3JXLEtBQUs2VCxhQUM1QzdULEtBQUt1bEQsaUJBQW1CdmxELEtBQUttZ0IsZ0JBQWtCbmdCLEtBQUt5VyxVQUM3RCxDQUVBLFVBQUk0SixHQUNGLElBQUlyZ0IsS0FBS28rQixVQUNMcCtCLEtBQUsybEQsYUFDVCxPQUFRM2xELEtBQUtxZixNQUNmLENBRUEsZ0JBQUlzbUMsR0FDRixZQUFnQyxJQUFsQjNsRCxLQUFLdVcsUUFDckIsQ0FFQSxZQUFJekIsR0FDRixTQUFJOVUsS0FBSytVLGNBQWdCL1UsS0FBSytVLGFBQWUsRUFFL0MsQ0FFQSxjQUFJNndDLEdBQ0YsU0FBSTVsRCxLQUFLK1UsY0FBZ0IvVSxLQUFLK1UsYUFBZSxFQUUvQyxDQUVBLGVBQUk4d0MsR0FDRixTQUFJN2xELEtBQUsrVSxjQUFzQyxJQUF0Qi9VLEtBQUsrVSxhQUVoQyxDQUVBLGdCQUFJQSxHQUNGLE9BQUkvVSxLQUFLOGxELGNBQXNCOWxELEtBQUs4bEQsY0FDN0IsSUFDVCxDQUVBLGdCQUFJL3dDLENBQWNuSixHQUNoQjVMLEtBQUs4bEQsY0FBZ0I3aEQsU0FBUzJILEVBQ2hDLENBRUEsUUFBSXRWLEdBQ0YsR0FBSTBKLEtBQUs5RixNQUFPLENBQ2QsR0FBSThGLEtBQUtpSSxNQUFPLE9BQU9qSSxLQUFLaUksTUFBTVQsVUFDbEMsR0FBSXhILEtBQUtpRyxLQUFNLE9BQU9qRyxLQUFLaUcsS0FBSzNQLEtBQ2hDLEdBQUkwSixLQUFLMFcsZUFDUCxPQUFPOU8sY0FBYzRiLHVCQUF1QnhqQixLQUFLMFcsaUJBQWlCclosTUFFcEUsR0FBSTJDLEtBQUs4Z0IsVUFBVyxDQUNsQixHQUF1QixRQUFuQjlnQixLQUFLOGdCLFVBQXFCLE9BQU94akIsS0FBS0MsS0FBS0MsU0FBUyxhQUN4RCxHQUF1QixRQUFuQndDLEtBQUs4Z0IsVUFBcUIsT0FBT3hqQixLQUFLQyxLQUFLQyxTQUFTLGNBQzFELENBQ0YsQ0FDQSxPQUFPLElBQ1QsQ0FFQSxhQUFJZ0ssR0FDRixHQUFJeEgsS0FBSzlGLE1BQU8sQ0FDZCxHQUFJOEYsS0FBS2lJLE1BQU8sT0FBT2pJLEtBQUtpSSxNQUFNVCxVQUNsQyxHQUFJeEgsS0FBS2lHLEtBQU0sT0FBT2pHLEtBQUtpRyxLQUFLM1AsS0FDaEMsR0FBSTBKLEtBQUswVyxlQUNQLE9BQU85TyxjQUFjNGIsdUJBQXVCeGpCLEtBQUswVyxpQkFBaUIrTSxNQUVwRSxHQUFJempCLEtBQUs4Z0IsVUFBVyxDQUNsQixHQUF1QixRQUFuQjlnQixLQUFLOGdCLFVBQXFCLE9BQU94akIsS0FBS0MsS0FBS0MsU0FBUyxhQUN4RCxHQUF1QixRQUFuQndDLEtBQUs4Z0IsVUFBcUIsT0FBT3hqQixLQUFLQyxLQUFLQyxTQUFTLFdBQzFELENBQ0YsQ0FDQSxPQUFPLElBQ1QsQ0FFQSxZQUFJZ2tCLEdBQ0YsTUFBTW5MLFdBQ0pyVyxLQUFLK2xELGNBQWdCanlDLFVBQVVzUCxnQkFBZ0JyUCxTQUUzQ0QsVUFBVXdhLGlCQUFpQnR1QixLQUFLK2xELGFBQ2hDcmhELFNBQ0oxRSxLQUFLOGxELGNBQWdCLEVBQ2pCLElBQUk5bEQsS0FBSzhsRCxnQkFDVDlsRCxLQUFLOGxELGNBQWMvekMsV0FDekIsT0FBT3pVLEtBQUtDLEtBQUt5VyxPQUNmLGlCQUFrQnFDLFdBQWtCLE9BQUwsS0FDNUJyVyxLQUFLOGxELGNBQXFCLFFBQUwsS0FFeEIsQ0FBRXp2QyxXQUFZM1IsU0FBVXBPLEtBQU0wSixLQUFLMUosTUFFdkMsQ0FFQSxVQUFJdStCLEdBQ0YsUUFBSTcwQixLQUFLNEIsSUFFWCxDQU9BLGtCQUFPNlIsQ0FBYXBILE1BQ2xCLE1BQU0yakMsV0FBYTNqQyxLQUFLMEMsVUFBVXdULFNBQVMsZUFDdkNsVyxLQUNBQSxLQUFLc0gsY0FBYyxnQkFDakJxQyxNQUFRLElBQUlsQyxVQUNsQk4sU0FBU3FCLGVBQWVtN0IsV0FBWWg2QixPQUNwQyxNQUFNbkcsUUFBVXhELEtBQUt4UCxRQUFRLFlBRTdCLE9BREFtWixNQUFNbUcsVUFBWXRNLFFBQVVBLFFBQVE5UyxRQUFRb2YsVUFBWSxLQUNqRG5HLEtBQ1QsQ0FFQSxpQkFBYTVlLENBQU1pVixLQUFNaTRCLFNBQVUsR0FDakMsTUFBTTBoQixTQUFXbHlDLFVBQVVMLFlBQVlwSCxNQUNqQ1ksUUFBVVosS0FBS3RQLFFBQVF3UCxRQUN6QkYsS0FBS3RQLFFBQVF3UCxRQUNiRixLQUFLdFAsUUFBUWtRLFFBQ1hxSCxRQUFVakksS0FBS3RQLFFBQVF1WCxRQUN2QjZrQyxPQUFTOXNDLEtBQUt0UCxRQUFRMlosZUFDdEJyQyxPQUFTaEksS0FBS3RQLFFBQVFzWCxPQUN0QmlDLFFBQVVqSyxLQUFLdFAsUUFBUXVaLFFBQ3ZCRCxXQUFhaEssS0FBS3RQLFFBQVFzWixXQUVoQyxJQUFJZzZCLFdBQ0osR0FBSS83QixRQUNGKzdCLFdBQWEsSUFBSXY4QixVQUFVN0csUUFBU3FILFFBQVNELE9BQVFpQyxRQUFTRCxnQkFDekQsS0FBSThpQyxPQU1KLE9BTEw5SSxXQUFhLElBQUl2OEIsVUFDakJ1OEIsV0FBV3Q3QixhQUFldUIsUUFDMUIrNUIsV0FBV2g2QixXQUFhQSxXQUN4Qmc2QixXQUFXbjJDLE1BQVErUyxRQUNuQm9qQyxXQUFXMzVCLGVBQWlCeWlDLE1BQ3ZCLENBQ0g2TSxTQUFTcm9ELE9BQ1gweUMsV0FBVzlxQyxRQUFVeWdELFNBQVN6Z0QsUUFDOUI4cUMsV0FBVzF5QyxLQUFPcW9ELFNBQVNyb0QsTUFFekJxb0QsU0FBUzk2QyxTQUFRbWxDLFdBQVdubEMsT0FBUzg2QyxTQUFTOTZDLFFBQ2xEbWxDLFdBQVd2ekIsU0FBVSxRQUNmdXpCLFdBQVdsdkMsT0FDYm1qQyxTQUFTK0wsV0FBV3phLFdBQVUsRUFBTXZwQixLQUMxQyxDQUVBLFNBQUkyRSxHQUNGLE9BQUtoUixLQUFLOUYsTUFDSHFWLFdBQVcwQixnQkFBZ0JqUixLQUFLbVIsVUFEZixJQUUxQixDQUVBLFNBQUlqWCxDQUFPMFIsR0FFVCxHQURBNUwsS0FBS21SLFNBQVd2RixFQUNQLE1BQUxBLEVBQUosQ0FLQSxHQUFJQSxhQUFheWxDLE1BT2YsT0FMQXJ4QyxLQUFLMnJDLE9BQVMvL0IsRUFDZDVMLEtBQUsyckMsT0FBT3Y2QixNQUFRcFIsS0FBSzlGLE1BQU01RCxVQUMzQnNWLEVBQUVvRixPQUFTcEYsRUFBRW9GLE1BQU1wRSxPQUFTaEIsRUFBRW9GLE1BQU1wRSxNQUFNcUIsR0FDNUNqTyxLQUFLbVIsU0FBVyxHQUFHdkYsRUFBRW9GLE1BQU1wRSxNQUFNcUIsTUFBTXJDLEVBQUVvRixNQUFNL0MsS0FDMUNqTyxLQUFLbVIsU0FBV3ZGLEVBQUVxQyxJQUkzQixHQUFJckMsRUFBRTVJLFNBQVMsS0FBZixDQUNFLE1BQU93SixRQUFTRCxTQUFXWCxFQUFFYSxNQUFNLEtBQ25DLEdBQWdCLFVBQVpELFFBQ0Z4TSxLQUFLMnJDLE9BQVNydUMsS0FBS29QLE9BQU9DLE9BQU9KLFNBQ2pDdk0sS0FBSzJyQyxPQUFPdjZCLE1BQVFwUixLQUFLMnJDLE9BQU9yMUMsU0FDM0IsQ0FDTCxNQUFNc1csTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQzlCLElBQUtJLE1BQU8sT0FDWixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUNoQixNQUFNa0UsTUFBUSxJQUFJaEUsTUFBTUYsV0FDeEI5TSxLQUFLMnJDLE9BQVMzNkIsTUFBTTlXLE1BQ3BCOEYsS0FBSzJyQyxPQUFPdjZCLE1BQVFKLE1BQU0xYSxJQUM1QixDQUVGLE1BRUEwSixLQUFLMnJDLE9BQVNydUMsS0FBS29QLE9BQU94UCxJQUFJME8sR0FDOUI1TCxLQUFLOUYsTUFBTWtYLE1BQVFwUixLQUFLOUYsTUFBTTVELElBOUI5QixNQUZFMEosS0FBSzJyQyxPQUFTLy9CLENBaUNsQixDQUVBLHFCQUFJcTZDLEdBQ0YsR0FBSWptRCxLQUFLa21ELGtCQUFtQixPQUFPLEtBQ25DLEdBQUlsbUQsS0FBSzJsRCxjQUFtQyxJQUFuQjNsRCxLQUFLZy9DLFVBQWlCLE9BQU8sS0FDdEQsR0FBSWgvQyxLQUFLNlQsY0FBZ0I3VCxLQUFLcVcsV0FBWSxDQUN4QyxNQUFNOHZDLE1BQVEsR0FDZCxJQUNFLElBQUlocEMsTUFBUSxFQUNaQSxNQUFRbmQsS0FBSzZULGFBQWU3VCxLQUFLcVcsV0FBYSxFQUM5QzhHLFFBRUFncEMsTUFBTS91RCxLQUFLNEksS0FBS3lXLFdBQWEsUUFBVSxRQUV6QyxNQUFNMnZDLFlBQWM5b0QsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXdCLENBQzNENWQsTUFBTzRKLEtBQUs2VCxhQUFlN1QsS0FBS3FXLFdBQWEsSUFFL0MsTUFBTyxDQUNMNmdCLFNBQVMsRUFDVG12QixTQUFVcm1ELEtBQUt5VyxXQUFhLFdBQWEsVUFDekM2dkMsS0FBTUYsWUFDTkQsTUFFSixDQUFPLENBQ0wsTUFBTUEsTUFBUSxHQUNSdHlDLGFBQWU3VCxLQUFLd1csVUFBWSxFQUFJeFcsS0FBSzZULGFBQy9DLElBQUssSUFBSXNKLE1BQVEsRUFBR0EsTUFBUW5kLEtBQUtxVyxXQUFheEMsYUFBY3NKLFFBQzFEZ3BDLE1BQU0vdUQsS0FBSzRJLEtBQUt3VyxTQUFXLFFBQVUsVUFFdkMsTUFBTSt2QyxZQUFjanBELEtBQUtDLEtBQUt5VyxPQUFPLHdCQUF5QixDQUM1RDVkLE1BQU80SixLQUFLcVcsV0FBYXhDLGVBRTNCLE1BQU8sQ0FDTHFqQixTQUFTLEVBQ1RtdkIsU0FBVXJtRCxLQUFLd1csU0FBVyxTQUFXLFVBQ3JDOHZDLEtBQU1DLFlBQ05KLE1BRUosQ0FDRixDQUVBLFdBQUkxaEMsR0FJRixZQUhJNW1CLElBQWNtQyxLQUFLMGtCLFdBQ3JCMWtCLEtBQUswa0IsU0FBNkIsY0FBbEIxa0IsS0FBS3FCLFVBRWhCckIsS0FBSzBrQixRQUNkLENBRUEsV0FBSUQsQ0FBUzdZLEdBQ1g1TCxLQUFLMGtCLFNBQVc5WSxDQUNsQixDQUVBLHFCQUFJczZDLEdBQ0YsUUFDRWxtRCxLQUFLd21ELHNCQUNMeG1ELEtBQUt5bUQscUJBQ0x6bUQsS0FBSzBtRCxrQkFDTDFtRCxLQUFLMm1ELHNCQUlBN3lDLFVBQVVzUCxnQkFBZ0JDLFVBQVlyakIsS0FBS3FXLFVBQ3BELENBRUEsWUFBSWhWLEdBRUYsT0FES3JCLEtBQUsya0IsWUFBVzNrQixLQUFLMmtCLFVBQVlybkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFDekQ4QyxLQUFLMmtCLFNBQ2QsQ0FFQSxZQUFJdGpCLENBQVV1SyxJQUNGLElBQU5BLElBQWE1TCxLQUFLMmtCLFVBQVlybkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFDNUQ4QyxLQUFLMmtCLFVBQVkvWSxDQUNuQixDQUVBLFNBQUkzRCxDQUFPMkQsR0FDVDVMLEtBQUs0bUQsT0FBUzVtRCxLQUFLNm1ELGVBQWVqN0MsR0FDbEM1TCxLQUFLc1UsUUFBVTFJLENBQ2pCLENBRUEsUUFBSTNGLENBQU0yRixHQUNSNUwsS0FBSzhtRCxNQUFROW1ELEtBQUs2bUQsZUFBZWo3QyxHQUNSLFdBQXJCNUwsS0FBSzhtRCxPQUFPem9ELEtBQ2QyQixLQUFLcVUsT0FBU3pJLEdBRWQ1TCxLQUFLOG1ELFdBQVFqcEQsRUFDYm1DLEtBQUtxVSxZQUFTeFcsRUFFbEIsQ0FFQSxjQUFBZ3BELENBQWdCajdDLEdBQ2QsT0FBUyxNQUFMQSxFQUFrQixLQUNsQkEsYUFBYXhHLEtBQWF3RyxFQUMxQjVMLEtBQUsyckMsT0FBZTNyQyxLQUFLMnJDLE9BQU96OUIsTUFBTWhSLElBQUkwTyxHQUN2Q3RPLEtBQUs0USxNQUFNaFIsSUFBSTBPLEVBQ3hCLENBRUEsU0FBSTFSLEdBQ0YsR0FBSzhGLEtBQUsyckMsUUFBVzNyQyxLQUFLMnJDLFFBQVExOUIsSUFZM0IsR0FBcUMsV0FBakNqTyxLQUFLMnJDLE9BQU90bUMsWUFBWS9PLEtBQW1CLENBQ3BELE1BQU00RCxNQUFRLElBQUl5MUIsU0FBUzN2QixLQUFLMnJDLFFBQ2hDM3JDLEtBQUsyckMsT0FBU3p4QyxLQUNoQixPQVpFLEdBRkk4RixLQUFLbVIsV0FBVW5SLEtBQUsyckMsT0FBU3A4QixXQUFXcUIsZ0JBQWdCNVEsS0FBS21SLFdBQzdEblIsS0FBS2lOLFVBQVNqTixLQUFLMnJDLE9BQVNwOEIsV0FBV3FCLGdCQUFnQjVRLEtBQUtpTixXQUMzRGpOLEtBQUsyckMsT0FDUixNQUFPLENBQ0xvYixTQUFTLEVBQ1R6d0QsS0FBTTBKLEtBQUswb0MsVUFBWTFvQyxLQUFLMG9DLGVBQVk3cUMsRUFDeENvUSxRQUFJcFEsRUFDSjZILElBQUssd0RBQ0xrVyxTQUFVLHlEQU9oQixPQUFPNWIsS0FBSzJyQyxNQUNkLENBRUEsU0FBSTFqQyxHQWtCRixPQWpCS2pJLEtBQUs0bUQsUUFBVTVtRCxLQUFLc1UsVUFDdkJ0VSxLQUFLNG1ELE9BQVM1bUQsS0FBSzlGLE9BQU9nVSxNQUFNaFIsSUFBSThDLEtBQUtzVSxXQUV0Q3RVLEtBQUs0bUQsUUFBVTVtRCxLQUFLaUcsTUFDbkJqRyxLQUFLaUcsS0FBS2xLLE9BQU9rTSxRQUNmakksS0FBS2lHLEtBQUtsSyxPQUFPa00sTUFBTStGLEtBQUtDLEtBQU9qTyxLQUFLczlCLGVBQzFDdDlCLEtBQUs0bUQsT0FBUzVtRCxLQUFLMnJDLE9BQU96OUIsTUFBTWhSLElBQUk4QyxLQUFLaUcsS0FBS2xLLE9BQU9rTSxNQUFNK0YsS0FBS0MsSUFFaEVqTyxLQUFLaUcsS0FBS2xLLE9BQU9rTSxNQUFNa0csV0FBV0YsSUFDbENqTyxLQUFLczlCLGlCQUVMdDlCLEtBQUs0bUQsT0FBUzVtRCxLQUFLMnJDLE9BQU96OUIsTUFBTWhSLElBQzlCOEMsS0FBS2lHLEtBQUtsSyxPQUFPa00sTUFBTWtHLFdBQVdGLE1BS25Dak8sS0FBSzRtRCxNQUNkLENBRUEsUUFBSTNnRCxHQUlGLE9BSEtqRyxLQUFLOG1ELE9BQVM5bUQsS0FBS3FVLFFBQVVyVSxLQUFLOUYsUUFDckM4RixLQUFLOG1ELE1BQVE5bUQsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSThDLEtBQUtxVSxTQUVsQ3JVLEtBQUs4bUQsS0FDZCxDQUVBLHFCQUFJRSxHQUNGLE9BQU8xcEQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsb0JBQ25DLENBRUEsNEJBQUkrcEQsR0FDRixPQUFPM3BELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUNuQyxDQUVBLDJCQUFJZ3FELEdBQ0YsT0FBT2xuRCxLQUFLZ25ELG1CQUFxQmhuRCxLQUFLaW5ELHdCQUN4QyxDQUVBLDJCQUFJRSxHQUNGLE9BQVFubkQsS0FBS2duRCxvQkFBc0JobkQsS0FBS2luRCx3QkFDMUMsQ0FFQSxTQUFJRyxHQUNGLE9BQUlwbkQsS0FBS2lJLE1BQWNqSSxLQUFLaUksTUFBTXZDLElBQzlCMUYsS0FBS2lHLEtBQWFqRyxLQUFLaUcsS0FBS1AsU0FBaEMsQ0FFRixDQUVBLFFBQUlncEIsR0FDRixPQUFPMXVCLEtBQUtxbkQsaUJBQWlCajhCLFNBQy9CLENBRUEsc0JBQUk1RyxHQUNGLE9BQU9sbkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQ25DLENBRUEsY0FBQW1xRCxDQUFnQjV0QyxRQUFVLE1BQ3hCLE1BQU1uVSxLQUFPLENBQ1hrSixJQUFLLENBQUMsWUFBYSxhQUFhekMsT0FBTzBOLFNBQ3ZDMWMsUUFBUyxDQUFFaVosTUFBTyxTQUNsQnZZLEtBQU11QyxLQUFLb25ELE1BQ1AscUNBQXFDcG5ELEtBQUtvbkQsaUJBQzFDLDhCQUNKN2pELE1BQU92RCxLQUFLeWtCLFNBR1JwTyxXQUFhdkMsVUFBVXdhLGlCQUFpQnR1QixLQUFLK2xELGFBQzdDdDNDLE1BQVFuUixLQUFLQyxLQUFLeVcsT0FDdEIsaUJBQWtCaFUsS0FBSytsRCxZQUFtQixPQUFMLEtBQ2xDL2xELEtBQUs4bEQsY0FBcUIsUUFBTCxLQUV4QixDQUNFenZDLFdBQ0EzUixTQUFVMUUsS0FBSzhsRCxjQUNmeHZELEtBQU0wSixLQUFLMUosT0FJVG9HLEVBQUltUyxTQUFTQyxjQUFjLEtBT2pDLE9BTkFwUyxFQUFFK1IsTUFBUUEsTUFDVi9SLEVBQUVxUyxVQUFVQyxPQUFPMUosS0FBS2tKLEtBQ3hCOVIsRUFBRXdTLFVBQVksR0FBRzVKLEtBQUsvQixNQUFRLG1DQUFxQyxLQUNqRStCLEtBQUs3SCxPQUNKdUMsS0FBSzFKLE9BRURvRyxDQUNULENBRUEsVUFBTXlFLENBQU1tVixRQUFVLEtBQU1ELFdBQWEsS0FBTS9XLFFBQVUsQ0FBQyxHQUNwRGdYLFVBQVN0VyxLQUFLK1UsYUFBZXVCLFNBQzdCRCxhQUFZclcsS0FBS3FXLFdBQWFBLFlBQzdCclcsS0FBS28rQixlQUFlcCtCLEtBQUtpaEIsU0FBUzNoQixRQUN6QyxDQVFBLDhCQUFPZ29ELENBQXlCdHBDLFVBQzlCLE1BQU03YyxLQUFPLENBQUMsRUFlZCxPQWJJNmMsU0FBUzNILGFBQVlsVixLQUFLa1YsV0FBYTJILFNBQVMzSCxZQUNoRDJILFNBQVNqSixlQUFjNVQsS0FBSzRULGFBQWVpSixTQUFTakosZUFDOUIsSUFBdEJpSixTQUFTNkMsV0FBbUIxZixLQUFLMGYsVUFBVyxHQUM1QzdDLFNBQVM0WixtQkFDWHoyQixLQUFLeTJCLGlCQUFtQjVaLFNBQVM0WixrQkFFL0I1WixTQUFTNlosd0JBQ1gxMkIsS0FBSzAyQixzQkFBd0I3WixTQUFTNlosdUJBR3BDN1osU0FBUzlqQixPQUFPaVgsU0FBVWhRLEtBQUtnUSxTQUFXNk0sU0FBUzlqQixNQUFNaVgsU0FDcEQ2TSxTQUFTOWpCLE9BQU81RCxPQUFNNkssS0FBS3VuQyxVQUFZMXFCLFNBQVM5akIsTUFBTTVELE1BRXZEMG5CLFNBQVMzZixNQUNmLEtBQUt5VixVQUFVelYsS0FBS3FZLGVBQ2xCdlYsS0FBS3VWLGVBQWlCc0gsU0FBUzVuQixPQUFPeUYsSUFDdEMsTUFDRixLQUFLaVksVUFBVXpWLEtBQUt5aUIsVUFDbEIzZixLQUFLMmYsVUFBWTlDLFNBQVM1bkIsT0FBT3lGLElBQ2pDLE1BQ0YsS0FBS2lZLFVBQVV6VixLQUFLNEgsS0FDbEI5RSxLQUFLZ1EsU0FBVzZNLFNBQVM1bkIsTUFBTThELE1BQU1pWCxTQUNSLFVBQXpCNk0sU0FBUzVuQixPQUFPaUksS0FBa0I4QyxLQUFLOEcsTUFBUStWLFNBQVM1bkIsTUFBTTZYLEdBQzdEOU0sS0FBSzhFLEtBQU8rWCxTQUFTNW5CLE1BQU02WCxHQUNoQyxNQUNGLEtBQUs2RixVQUFVelYsS0FBSzRKLE1BQ2xCOUcsS0FBS2dRLFNBQVc2TSxTQUFTNW5CLE1BQU04RCxNQUFNaVgsU0FDckNoUSxLQUFLOEcsTUFBUStWLFNBQVM1bkIsTUFBTTZYLEdBQzVCLE1BQ0YsS0FBSzZGLFVBQVV6VixLQUFLakksTUFDbEIrSyxLQUFLd3NCLFlBQWMzUCxTQUFTNW5CLE1BQU1FLEtBQ2xDNkssS0FBS29WLFNBQVd5SCxTQUFTNW5CLE1BQU1teEQsVUFLbkMsT0FBT3p6QyxVQUFVckQsT0FBT3RQLEtBQzFCLENBRUEsYUFBT3NQLEVBQVEsV0FDQXFELFVBQVVzUCxnQkFBZ0JyUCxRQUFPLGFBQy9CLEtBQUksU0FDUixLQUFJLGVBQ0UsS0FBSSxVQUNULEtBQUksU0FDTCxFQUFDLEtBQ0wsS0FBSSxNQUNILEtBQUksaUJBQ08sRUFBQyxzQkFDSSxFQUFDLFlBQ1gsS0FBSSxVQUNOLEtBQUksVUFFZCxDQUFDLEdBQ0gsTUFBTWlDLE1BQVEsSUFBSWxDLFVBb0JsQixPQW5CQWtDLE1BQU1LLFdBQWFBLFlBQ0YsSUFBYndLLFdBQW1CN0ssTUFBTTZLLFVBQVcsR0FDcEM5TCxlQUFjaUIsTUFBTWpCLGFBQWVBLGNBQ25DNmlCLG1CQUFrQjVoQixNQUFNNGhCLGlCQUFtQkEsa0JBQzNDQyx3QkFDRjdoQixNQUFNNmhCLHNCQUF3QkEsdUJBRTVCbEssY0FBYTNYLE1BQU0yWCxZQUFjQSxhQUNqQ3hjLFdBQVU2RSxNQUFNOWIsTUFBUWlYLFVBQ3hCdTNCLFlBQVcxeUIsTUFBTTB5QixVQUFZQSxXQUM1QjVzQyxNQUFNSSxPQUFPcWEsYUFBWVAsTUFBTU8sU0FBV3JhLE9BQU9xYSxXQUNsRFAsTUFBTTliLFFBQVU4YixNQUFNOWIsTUFBTTZzRCxVQUUxQjkrQyxNQUFPK04sTUFBTS9OLE1BQVFBLE1BRWhCeU8sZUFBZ0JWLE1BQU1VLGVBQWlCQSxlQUN2Q29LLFVBQVc5SyxNQUFNOEssVUFBWUEsVUFDN0I3YSxPQUFNK1AsTUFBTS9QLEtBQU9BLE9BRXZCK1AsS0FDVCxDQUVBLHdCQUFNc29CLENBQW9Cc0MsS0FBTXRxQixRQUFVLEtBQU1ELFdBQWEsTUFDdkRDLFVBQVN0VyxLQUFLK1UsYUFBZXVCLFNBQzdCRCxhQUFZclcsS0FBS3FXLFdBQWFBLFlBQ2xDclcsS0FBSzBXLGVBQWlCa3FCLEtBQ2pCNWdDLEtBQUtvK0IsZUFBZXArQixLQUFLaWhCLFVBQ2hDLENBRUEsbUJBQU1vZCxDQUFlaEIsT0FBUS9tQixRQUFVLEtBQU1ELFdBQWEsTUFDcERDLFVBQVN0VyxLQUFLK1UsYUFBZXVCLFNBQzdCRCxhQUFZclcsS0FBS3FXLFdBQWFBLFlBQ2xDclcsS0FBSzhnQixVQUFZdWMsT0FDWnI5QixLQUFLbytCLGVBQWVwK0IsS0FBS2loQixVQUNoQyxDQUVBLGVBQU11bUMsQ0FBV3BtQixJQUFLOXFCLFFBQVUsS0FBTUQsV0FBYSxNQUM3Q0MsVUFBU3RXLEtBQUsrVSxhQUFldUIsU0FDN0JELGFBQVlyVyxLQUFLcVcsV0FBYUEsWUFDbENyVyxLQUFLdVcsU0FBVzZxQixJQUNYcGhDLEtBQUtvK0IsZUFBZXArQixLQUFLaWhCLFVBQ2hDLENBRUEsc0JBQUlzZCxHQUNGLE9BQU92K0IsS0FBSzZULFlBQ2QsQ0FFQSxjQUFNb04sQ0FBVTNoQixRQUFVLENBQUMsR0FDekJVLEtBQUs0QixLQUNIdEMsUUFBUTZCLFlBQ0RELFNBQVNDLEtBQUtuQixLQUFLK1UsYUFBYy9VLEtBQUtxQixTQUFVckIsS0FBS3lrQixTQUN6RG5sQixRQUFROGhCLFFBQVc5akIsS0FBS2tFLFFBQVF0RSxJQUFJLGlCQUFpQjZELFFBQ3hEeTJCLFlBQVlDLEtBQUssQ0FBRXBsQixJQUFLelAsT0FBTzgwQixPQUFPOTFCLE9BQVEsR0FHNUN0QyxRQUFRNGhCLGdCQUNKaGdCLFNBQVNpQyxlQUFlbkQsS0FBSzRCLEtBQUtULE1BRzFDbkIsS0FBSzBVLE1BQVEsQ0FDWC9SLEtBQU0sR0FDTkgsS0FBTSxDQUNKcE0sTUFBTzRKLEtBQUs0QixLQUFLWSxLQUFLQyxPQUV4QkEsTUFBT3pDLEtBQUs0QixLQUFLYSxNQUNqQmdsRCxVQUFXem5ELEtBQUs0QixLQUFLYSxNQUFRekMsS0FBSzRCLEtBQUtZLEtBQUtDLE1BQzVDcVMsV0FBWTlVLEtBQUsrVSxhQUNqQkMsTUFBTzVTLEtBQUtDLElBQUlyQyxLQUFLK1UsY0FDckJFLFVBQ0VqVixLQUFLK1UsYUFBZSxFQUNoQnpYLEtBQUtDLEtBQUt5VyxPQUFPLDRCQUNqQjFXLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUN2QnFDLFdBQVlyVyxLQUFLcVcsWUFHbkIsTUFBTXBULElBQStCLElBQXpCakQsS0FBSzRCLEtBQUtZLEtBQUtDLE1BQWMsSUFBTSxHQUN6Q1MsSUFBK0IsSUFBekJsRCxLQUFLNEIsS0FBS1ksS0FBS0MsTUFBYyxHQUFLLEVBQzlDLElBQUk0UyxTQUFXclYsS0FBSzRCLEtBQUthLE1BQVF6QyxLQUFLNEIsS0FBS1ksS0FBS0MsTUFFaEQsSUFBSyxJQUFJNmQsRUFBSSxFQUFHQSxFQUFJdGdCLEtBQUs0QixLQUFLZSxLQUFLRCxRQUFROUIsT0FBUTBmLElBQUssQ0FDdEQsTUFBTWxMLElBQU0sQ0FBQyxFQUNiQSxJQUFJaGYsTUFBUTRKLEtBQUs0QixLQUFLZSxLQUFLRCxRQUFRNGQsR0FDL0JsTCxJQUFJaGYsUUFBVWlmLFVBQ2hCQSxTQUFXLElBQ1hELElBQUlDLFVBQVcsRUFDWHJWLEtBQUswVSxNQUFNSSxVQUNiTSxJQUFJRSxPQUFRLEVBQ1pGLElBQUlHLE9BQVEsSUFFWkgsSUFBSUcsT0FBUSxFQUNaSCxJQUFJRSxPQUFRLEtBR1ZGLElBQUloZixRQUFVNk0sSUFBS21TLElBQUlFLE9BQVEsRUFDOUJGLElBQUlFLE9BQVEsRUFDYkYsSUFBSWhmLFFBQVU4TSxJQUFLa1MsSUFBSUcsT0FBUSxFQUM5QkgsSUFBSUcsT0FBUSxHQUduQnZWLEtBQUswVSxNQUFNL1IsS0FBS3ZMLEtBQUtnZSxJQUN2QixDQUNBcFYsS0FBSzh3QyxjQUNQLENBRUEsdUJBQU1yekIsQ0FBbUJQLFlBQ3ZCLE1BQU13cUMsZUFBaUJ6akQsU0FBU2laLFdBQVksSUFDNUNsZCxLQUFLMm5ELGVBQWlCMWpELFNBQVNqRSxLQUFLMm5ELGdCQUFrQixFQUFHLElBQU1ELGVBQy9ELE1BQU12bkMsZUFBaUIvZCxLQUFLYSxJQUFJLEVBQUdqRCxLQUFLbWdCLGVBQWlCbmdCLEtBQUsybkQsZ0JBQ3ZDLElBQW5CeG5DLGVBQ0ZuZ0IsS0FBSzZULGFBQWVDLFVBQVVELGFBQWFLLFNBQ2xDaU0sZ0JBQWtCbmdCLEtBQUswK0IsaUJBQ2hDMStCLEtBQUs2VCxhQUFlQyxVQUFVRCxhQUFhM0osUUFDbENpVyxnQkFBa0JuZ0IsS0FBS3krQixjQUNoQ3orQixLQUFLNlQsYUFBZUMsVUFBVUQsYUFBYUksS0FDbENrTSxnQkFBa0JuZ0IsS0FBS3VXLFNBQ2hDdlcsS0FBSzZULGFBQWVDLFVBQVVELGFBQWFFLFFBQ2xDL1QsS0FBS3NsRCxpQkFBbUJubEMsZUFDakNuZ0IsS0FBSzZULGFBQWVDLFVBQVVELGFBQWFNLE9BQ2xDZ00sZUFBaUJuZ0IsS0FBS3VXLFdBQy9CdlcsS0FBSzZULGFBQWVDLFVBQVVELGFBQWFPLFNBRXpDcFUsS0FBS3FXLFlBQWNyVyxLQUFLNlQsZUFDMUI3VCxLQUFLdWUsV0FBWSxFQUNqQnZlLEtBQUt3ZSxXQUFZLEdBRW5CeGUsS0FBS2tsQyxXQUFZLEVBQ2pCLElBQUlwaUIsT0FBUyxFQUNiLElBQUssSUFBSTNGLE1BQVEsRUFBR3lxQyxTQUFXNW5ELEtBQUt5VixnQkFBZ0I3VSxPQUFRdWMsTUFBUXlxQyxTQUFVenFDLFFBQzVFbmQsS0FBS3lWLGdCQUFnQjBILE9BQU9DLFlBQWNwZCxLQUFLeVYsZ0JBQWdCMEgsT0FBT0MsWUFBY3NxQyxlQUNoRjFuRCxLQUFLeVYsZ0JBQWdCMEgsT0FBT0MsWUFBYyxHQUM1QzBGLFNBR0osSUFBSyxJQUFJM0YsTUFBUSxFQUFHQSxNQUFRMkYsT0FBUTNGLFFBQ2xDbmQsS0FBS3lWLGdCQUFnQm95QyxRQUV2QjduRCxLQUFLOHdDLGNBQ1AsQ0FFQSxrQkFBTUEsR0FpRUosT0FoRUE5d0MsS0FBS2dsRCxVQUFZaGxELEtBQUtrbUQsa0JBRWxCbG1ELEtBQUsybUQsc0JBQ1AzbUQsS0FBS3FXLFdBQWF2QyxVQUFVc1AsZ0JBQWdCclAsU0FFMUMvVCxLQUFLMG1ELG1CQUFrQjFtRCxLQUFLcVcsV0FBYXZDLFVBQVVzUCxnQkFBZ0JuUCxNQUNuRWpVLEtBQUt5bUQsc0JBQ1B6bUQsS0FBS3FXLFdBQWF2QyxVQUFVc1AsZ0JBQWdCbFosU0FFMUNsSyxLQUFLd21ELHVCQUNQeG1ELEtBQUtxVyxXQUFhdkMsVUFBVXNQLGdCQUFnQmxQLFVBRzlDbFUsS0FBSzhuRCxjQUEyQyxJQUEzQjluRCxLQUFLMFUsTUFBTS9SLEtBQUsvQixPQUVyQ1osS0FBSytuRCxTQUFVLEVBQ2YvbkQsS0FBS2dvRCxrQkFBbUIsRUFDeEJob0QsS0FBS2lvRCxTQUFVLEVBQ2Zqb0QsS0FBS2tvRCxRQUFTLEVBQ2Rsb0QsS0FBS21vRCxhQUFjLEVBQ2Zub0QsS0FBSzJsRCxjQUNQM2xELEtBQUs2Z0IsVUFBVyxFQUNoQjdnQixLQUFLdS9DLFVBQVcsR0FDTyxNQUFkdi9DLEtBQUs5RixNQUNkOEYsS0FBSytuRCxTQUFVLEdBRVgvbkQsS0FBSzBXLGlCQUNQMVcsS0FBS2dvRCxrQkFBbUIsRUFDeEJob0QsS0FBS3VXLFNBQ0h2VyxLQUFLOUYsTUFBTTZCLE9BQU8ybkIsZ0JBQWdCMWpCLEtBQUswVyxnQkFBZ0J0Z0IsT0FHdkQ0SixLQUFLaUksUUFDUGpJLEtBQUtpb0QsU0FBVSxFQUNmam9ELEtBQUt1VyxTQUFXdlcsS0FBS2lJLE1BQU03UixPQUd6QjRKLEtBQUs4Z0IsWUFDUDlnQixLQUFLbW9ELGFBQWMsRUFDbkJub0QsS0FBS3VXLFNBQVd2VyxLQUFLOUYsTUFBTTZCLE9BQU9DLFFBQVFnRSxLQUFLOGdCLFdBQVcxcUIsUUFJekQ0SixLQUFLa2xDLFdBQWNsbEMsS0FBSzJsRCxlQUN2QjNsRCxLQUFLbWdCLGdCQUFrQm5nQixLQUFLdVcsV0FDOUJ2VyxLQUFLNlQsYUFBZUMsVUFBVUQsYUFBYUUsU0FFekMvVCxLQUFLbWdCLGdCQUFrQm5nQixLQUFLeStCLGdCQUM5QnorQixLQUFLNlQsYUFBZUMsVUFBVUQsYUFBYUksTUFFekNqVSxLQUFLbWdCLGdCQUFrQm5nQixLQUFLMCtCLG1CQUM5QjErQixLQUFLNlQsYUFBZUMsVUFBVUQsYUFBYTNKLFNBRXpDbEssS0FBS21nQixlQUFpQm5nQixLQUFLdVcsV0FDN0J2VyxLQUFLNlQsYUFBZUMsVUFBVUQsYUFBYU8sU0FFakIsSUFBeEJwVSxLQUFLbWdCLGlCQUNQbmdCLEtBQUs2VCxhQUFlQyxVQUFVRCxhQUFhSyxVQUV6Q2xVLEtBQUtzbEQsaUJBQW1CdGxELEtBQUttZ0IsaUJBQy9CbmdCLEtBQUs2VCxhQUFlQyxVQUFVRCxhQUFhTSxTQUl2Q25VLEtBQUs2VCxjQUNYLEtBQUtDLFVBQVVELGFBQWFFLFFBQzFCL1QsS0FBSzRULFdBQWF0VyxLQUFLQyxLQUFLeVcsT0FBTyx1QkFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhSSxLQUMxQmpVLEtBQUs0VCxXQUFhdFcsS0FBS0MsS0FBS3lXLE9BQU8sb0JBQ25DLE1BQ0YsS0FBS0YsVUFBVUQsYUFBYTNKLFFBQzFCbEssS0FBSzRULFdBQWF0VyxLQUFLQyxLQUFLeVcsT0FBTyx1QkFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhSyxTQUMxQmxVLEtBQUs0VCxXQUFhdFcsS0FBS0MsS0FBS3lXLE9BQU8sd0JBQ25DLE1BQ0YsS0FBS0YsVUFBVUQsYUFBYU0sT0FDMUJuVSxLQUFLNFQsV0FBYXRXLEtBQUtDLEtBQUt5VyxPQUFPLGVBQ25DLE1BQ0YsS0FBS0YsVUFBVUQsYUFBYU8sUUFDMUJwVSxLQUFLNFQsV0FBYXRXLEtBQUtDLEtBQUt5VyxPQUFPLGdCQWdEdkMsR0F6Q0loVSxLQUFLa21ELGtCQUNQbG1ELEtBQUtvb0QsZ0JBQWtCLEdBQ2Jwb0QsS0FBSzJsRCxlQUNmM2xELEtBQUtvb0QsZ0JBQWtCOXFELEtBQUtDLEtBQUt5VyxPQUFPLHVCQUF3QixDQUM5RG8wQyxnQkFBaUJwb0QsS0FBS3N1QixvQkFJRSxJQUF4QnR1QixLQUFLbWdCLGlCQUNQbmdCLEtBQUs2VCxhQUFlQyxVQUFVRCxhQUFhSyxVQUV4Q2xVLEtBQUtrbEMsV0FBY2xsQyxLQUFLZ2xELFdBQWNobEQsS0FBSzJsRCxlQUM5QzNsRCxLQUFLd2UsVUFBWXhlLEtBQUtxZ0IsT0FDdEJyZ0IsS0FBS3VlLFVBQVl2ZSxLQUFLcWYsUUFHeEJyZixLQUFLb3BDLGdCQUFpQixFQUNsQnBwQyxLQUFLd1csV0FBVXhXLEtBQUs2VCxhQUFlQyxVQUFVRCxhQUFhTSxRQUUxRG5VLEtBQUtpRyxPQUNQakcsS0FBS2tvRCxRQUFTLEVBQ1Zsb0QsS0FBS2lHLEtBQUtsSyxPQUFPcUssYUFFakJsSyxPQUFPOEQsS0FBS21nQixpQkFBbUJqa0IsT0FBTzhELEtBQUtpRyxLQUFLbEssT0FBT3FLLGVBRXZEcEcsS0FBS29wQyxnQkFBaUIsRUFDdEJwcEMsS0FBS3FvRCxlQUFpQi9xRCxLQUFLQyxLQUFLeVcsT0FBTyxtQkFBb0IsQ0FDekRrN0IsU0FBVWx2QyxLQUFLaUcsS0FBSzNQLGFBRWhCMEosS0FBS2lHLEtBQUswQyxlQUFleEQsU0FBU2pHLE1BQU1rSCxvQkFLcEIsSUFBckJwRyxLQUFLb08sY0FDZHBPLEtBQUtvTyxjQUFjcE8sS0FBS2lJLE9BQVFqSSxLQUFLaUksTUFBTW1HLGNBQ2hCLE1BQXZCcE8sS0FBSzBXLGlCQUF3QjFXLEtBQUtvTyxhQUFjLEdBQ2hEcE8sS0FBS3dXLFdBQVV4VyxLQUFLb08sYUFBYyxHQUNsQ3BPLEtBQUs2Z0IsV0FBVTdnQixLQUFLb08sYUFBYyxLQUduQ3BPLEtBQUt1L0MsVUFBWXYvQyxLQUFLOUYsTUFBTyxDQUNoQyxLQUNHOEYsS0FBS2tsQyxXQUNMbGxDLEtBQUtxZixRQUNMcmYsS0FBS3dXLFVBQ054VyxLQUFLcVcsYUFBZXZDLFVBQVVzUCxnQkFBZ0JsUCxVQUM3Q2xVLEtBQUtrbUQscUJBRUZsbUQsS0FBS2lJLE9BQVNqSSxLQUFLMFcsZ0JBQWdCLENBQ3JDLE1BQU1kLFdBQWE1VixLQUFLbWdCLGVBQWlCbmdCLEtBQUt1bEQsZ0JBQzFDdmxELEtBQUs5RixNQUFNMjlDLEtBQU9qaUMsYUFDcEI1VixLQUFLc29ELGVBQWdCLEVBQ3JCdG9ELEtBQUs0VixXQUFhQSxXQUNsQjVWLEtBQUs2VixjQUFnQnZZLEtBQUtDLEtBQUt5VyxPQUFPLGlCQUFrQixDQUN0RDhCLGdCQUFpQkYsYUFHdkIsQ0FHRixJQUFLNVYsS0FBS2tsQyxZQUNSbGxDLEtBQUt5VixnQkFBa0IsSUFJcEJ6VixLQUFLOGMsU0FDYSxRQUFuQjljLEtBQUs4Z0IsV0FDYyxRQUFuQjlnQixLQUFLOGdCLFdBQ0wsQ0FDQSxHQUNFOWdCLEtBQUtrbUQsbUJBQ0xsbUQsS0FBS21nQixlQUFpQm5nQixLQUFLdytCLGlCQUMzQixDQUNBLE1BQU0rcEIsVUFBWSxDQUFDLEVBQ25CQSxVQUFVamdCLGVBQWlCaHJDLEtBQUtDLEtBQUtDLFNBQ25DLDBCQUVGK3FELFVBQVVseUMsV0FBYXZDLFVBQVVzUCxnQkFBZ0JyUCxRQUNqRHcwQyxVQUFVbnJDLFlBQWNwZCxLQUFLbWdCLGVBQWlCbmdCLEtBQUt3K0IsaUJBQ25EK3BCLFVBQVVELGNBQWdCQyxVQUFVbnJDLGFBQWVwZCxLQUFLOUYsTUFBTTI5QyxLQUMxRDBRLFVBQVVuckMsYUFBZXBkLEtBQUs5RixNQUFNMjlDLE1BQ3RDNzNDLEtBQUt5VixnQkFBZ0JyZSxLQUFLbXhELFVBRTlCLENBRUEsR0FDRXZvRCxLQUFLcVcsWUFBY3ZDLFVBQVVzUCxnQkFBZ0JyUCxTQUM3Qy9ULEtBQUttZ0IsZUFBaUJuZ0IsS0FBS3krQixjQUMzQixDQUNBLE1BQU04cEIsVUFBWSxDQUFDLEVBQ25CQSxVQUFVamdCLGVBQWlCaHJDLEtBQUtDLEtBQUtDLFNBQVMsdUJBQzlDK3FELFVBQVVseUMsV0FBYXZDLFVBQVVzUCxnQkFBZ0JuUCxLQUNqRHMwQyxVQUFVbnJDLFlBQWNwZCxLQUFLbWdCLGVBQWlCbmdCLEtBQUt5K0IsY0FDbkQ4cEIsVUFBVUQsY0FBZ0JDLFVBQVVuckMsYUFBZXBkLEtBQUs5RixNQUFNMjlDLEtBQzFEMFEsVUFBVW5yQyxhQUFlcGQsS0FBSzlGLE1BQU0yOUMsTUFDdEM3M0MsS0FBS3lWLGdCQUFnQnJlLEtBQUtteEQsVUFFOUIsQ0FFQSxHQUNFdm9ELEtBQUtxVyxZQUFjdkMsVUFBVXNQLGdCQUFnQm5QLE1BQzdDalUsS0FBS21nQixlQUFpQm5nQixLQUFLMCtCLGlCQUMzQixDQUNBLE1BQU02cEIsVUFBWSxDQUFDLEVBQ25CQSxVQUFVamdCLGVBQWlCaHJDLEtBQUtDLEtBQUtDLFNBQ25DLDBCQUVGK3FELFVBQVVseUMsV0FBYXZDLFVBQVVzUCxnQkFBZ0JsWixRQUNqRHErQyxVQUFVbnJDLFlBQWNwZCxLQUFLbWdCLGVBQWlCbmdCLEtBQUswK0IsaUJBQ25ENnBCLFVBQVVELGNBQWdCQyxVQUFVbnJDLGFBQWVwZCxLQUFLOUYsTUFBTTI5QyxLQUMxRDBRLFVBQVVuckMsYUFBZXBkLEtBQUs5RixNQUFNMjlDLE1BQ3RDNzNDLEtBQUt5VixnQkFBZ0JyZSxLQUFLbXhELFVBRTlCLENBQ0YsQ0FHRnZvRCxLQUFLd29ELG1CQUFxQnhvRCxLQUFLeVYsZ0JBQWdCN1UsT0FBUyxFQUNwRFosS0FBS3dXLFdBQVV4VyxLQUFLd29ELG9CQUFxQixFQUMvQyxDQWtCQSxHQWhCQXhvRCxLQUFLeW9ELG1CQUNIem9ELEtBQUtpSSxRQUFVakksS0FBS2lJLE1BQU1sTSxPQUFPOEssV0FBVzVQLFdBRzVDK0ksS0FBS3FmLFFBQ0xyZixLQUFLK1UsY0FBZ0IsR0FDckIvVSxLQUFLaUksUUFDSmpJLEtBQUtpSSxNQUFNbE0sT0FBTzhLLFdBQVc1UCxVQUM3QitJLEtBQUtrbEMsV0FDTGxsQyxLQUFLMG9ELFFBQ0wxb0QsS0FBS3lrQixTQUNMemtCLEtBQUtnbEQsV0FFTmhsRCxLQUFLc0ksc0JBR0h0SSxLQUFLa0wsT0FBUSxDQUNmLE1BQU1BLGFBQWVoRixTQUFTbEcsS0FBS2tMLFFBQy9CQSxRQUFVLGVBQWdCQSxjQUN0QkEsT0FBT3pELFdBQVd6SCxLQUFLMm9ELGVBR2pDLENBQ0YsQ0FFQSxZQUFBcDBDLEdBQ0UsR0FBSWpYLEtBQUtrRSxRQUFRdEUsSUFBSSxpQkFBaUI2RCxPQUFRLENBQzVDLE1BQU15VCxZQUFjLEdBQ3BCLElBQUssTUFBTUMsYUFBYXpVLEtBQUswVSxNQUFNL1IsS0FDakM2UixZQUFZcGQsS0FBeUIsTUFBcEJxZCxVQUFVcmUsTUFBZ0IsRUFBSXFlLFVBQVVyZSxNQUFRLElBRW5Fb2UsWUFBWXBkLEtBQUs0SSxLQUFLMFUsTUFBTWxTLEtBQUtwTSxPQUVqQyxNQUFNdWUsU0FBVyxDQUNmMWEsUUFBUyxHQUFHK0YsS0FBSzBVLE1BQU0vUixLQUFLL0Isa0JBQzVCOEIsUUFBUzhSLFlBQ1RsUixRQUFTLEtBQ1RDLE9BQU8sR0FFVGpHLEtBQUtvRyxPQUFPa1IsS0FBS0QsU0FDbkIsQ0FDRixDQUVBLFlBQUkweEMsR0FDRixJQUFJQSxTQUFXLEdBZWYsT0FkSXJtRCxLQUFLdWUsWUFBVzhuQyxTQUFXLFdBQzNCcm1ELEtBQUt3ZSxZQUFXNm5DLFNBQVcsV0FDM0JybUQsS0FBS3lXLGFBQWV6VyxLQUFLd2UsWUFBVzZuQyxTQUFXLG9CQUMvQ3JtRCxLQUFLd1csV0FBYXhXLEtBQUt1ZSxZQUFXOG5DLFNBQVcsa0JBQzdDdnlDLFVBQVVELGFBQWFFLFVBQVkvVCxLQUFLNlQsZUFDMUN3eUMsVUFBWSxvQkFFVnZ5QyxVQUFVRCxhQUFhSSxPQUFTalUsS0FBSzZULGVBQ3ZDd3lDLFVBQVksaUJBRVZ2eUMsVUFBVUQsYUFBYTNKLFVBQVlsSyxLQUFLNlQsZUFDMUN3eUMsVUFBWSxvQkFHUEEsUUFDVCxDQUVBLGdCQUFJdUMsR0FDRixNQUFNdkMsU0FBVyxHQWVqQixPQWRJcm1ELEtBQUt1ZSxXQUFXOG5DLFNBQVNqdkQsS0FBSyxXQUM5QjRJLEtBQUt3ZSxXQUFXNm5DLFNBQVNqdkQsS0FBSyxXQUM5QjRJLEtBQUt5VyxhQUFlelcsS0FBS3dlLFdBQVc2bkMsU0FBU2p2RCxLQUFLLFVBQVcsWUFDN0Q0SSxLQUFLd1csV0FBYXhXLEtBQUt1ZSxXQUFXOG5DLFNBQVNqdkQsS0FBSyxVQUFXLFVBQzNEMGMsVUFBVUQsYUFBYUUsVUFBWS9ULEtBQUs2VCxjQUMxQ3d5QyxTQUFTanZELEtBQUssbUJBRVowYyxVQUFVRCxhQUFhSSxPQUFTalUsS0FBSzZULGNBQ3ZDd3lDLFNBQVNqdkQsS0FBSyxnQkFFWjBjLFVBQVVELGFBQWEzSixVQUFZbEssS0FBSzZULGNBQzFDd3lDLFNBQVNqdkQsS0FBSyxtQkFHVGl2RCxRQUNULENBRUEsa0JBQUl3QyxHQUNGLE9BQUk3b0QsS0FBS3VlLFdBQWF2ZSxLQUFLOG9ELGNBQXNCLFVBQzdDOW9ELEtBQUt3ZSxXQUFheGUsS0FBSytvRCxjQUFzQixVQUMxQyxJQUNULENBRUEsa0JBQU1qckMsQ0FBYzRyQixhQUFjeHJDLFFBQVMsR0FDekMsTUFBTXlyQyxpQkFBbUIzcEMsS0FBS3lWLGdCQUFnQmkwQixjQUN4Q3hzQixXQUNKalosU0FBUzBsQyxpQkFBaUJ6c0IsYUFDMUJqWixTQUFTMGxDLGlCQUFpQnZzQixhQUM1QixJQUFLcGQsS0FBSzlGLE1BQU1xakIsVUFBVUwsWUFNeEIsWUFMQW5VLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUEyQixDQUMxQzlaLE1BQU84RixLQUFLOUYsTUFBTTVELFFBS3hCMEosS0FBSzJuRCxlQUFrQjFqRCxTQUFTakUsS0FBSzJuRCxnQkFFakMxakQsU0FBU2pFLEtBQUsybkQsZ0JBRGQsRUFFSjNuRCxLQUFLMm5ELGdCQUFrQjFqRCxTQUFTaVosWUFDaEMsTUFBTThuQixnQkFDSi9nQyxTQUFTMGxDLGlCQUFpQjNFLGtCQUMxQi9nQyxTQUFTMGxDLGlCQUFpQnR6QixZQUM1QnJXLEtBQUs2VCxhQUFlbXhCLGdCQUNoQmhsQyxLQUFLcVcsWUFBYzJ1QixrQkFDckJobEMsS0FBS3VlLFdBQVksRUFDakJ2ZSxLQUFLd2UsV0FBWSxHQUVuQixJQUFLLElBQUlyQixNQUFRLEVBQUdBLE1BQVF1c0IsYUFBZSxFQUFHdnNCLFFBQzVDbmQsS0FBS3lWLGdCQUFnQm95QyxRQUV2QixJQUFLLE1BQU0xeEQsS0FBSzZKLEtBQUt5VixnQkFDbkJ0ZixFQUFFaW5CLFlBQWNqbkIsRUFBRWluQixZQUFjRixXQUlsQyxPQUZBbGQsS0FBS2tsQyxXQUFZLEVBQ2pCbGxDLEtBQUs4d0MsZUFDRDV5QyxhQUFxQjhCLEtBQUtpckIsc0JBQTlCLENBQ0YsQ0FFQSxjQUFBKzlCLEdBQ0VocEQsS0FBS3dvRCxvQkFBcUIsRUFDMUJ4b0QsS0FBS3lWLGdCQUFrQixHQUN2QnpWLEtBQUs0VixXQUFhLEVBQ2xCNVYsS0FBSzZWLGNBQWdCLEtBQ3JCN1YsS0FBS29PLGFBQWMsQ0FDckIsQ0FFQSxTQUFBMlAsQ0FBV2IsV0FBYSxLQUFNaGYsUUFBUyxHQUNyQyxHQUFJZ2YsV0FBWSxDQUNkbGQsS0FBSzlGLE1BQU1xakIsVUFBVUwsWUFDckJsZCxLQUFLNlQsYUFBZTdULEtBQUtxVyxXQUN6QixJQUFLLE1BQU1sZ0IsS0FBSzZKLEtBQUt5VixnQkFDbkJ0ZixFQUFFaW5CLFlBQWNqbkIsRUFBRWluQixZQUFjRixXQUVsQ2xkLEtBQUtrbEMsV0FBWSxFQUNqQmxsQyxLQUFLdWUsV0FBWSxFQUNqQnZlLEtBQUt3ZSxXQUFZLEVBQ2pCeGUsS0FBSzJuRCxlQUFrQjFqRCxTQUFTakUsS0FBSzJuRCxnQkFFakMxakQsU0FBU2pFLEtBQUsybkQsZ0JBRGQsRUFFSjNuRCxLQUFLMm5ELGdCQUFrQjFqRCxTQUFTaVosWUFDaENsZCxLQUFLOHdDLGVBQ0Q1eUMsUUFBUThCLEtBQUtpckIsZ0JBQ25CLE1BQ0VqckIsS0FBSzBvRCxRQUFTLEVBQ2Qxb0QsS0FBSzhvRCxlQUFnQixFQUNqQjlvRCxLQUFLZ2xELFVBQ1BobEQsS0FBS2lwRCxrQkFBa0JuMUMsVUFBVUQsYUFBYUUsUUFBUzdWLFFBRXZEOEIsS0FBS2lwRCxrQkFBa0JqcEQsS0FBS3FXLFdBQVluWSxPQUc5QyxDQUVBLFNBQUF5eUMsQ0FBV3p5QyxRQUFTLEdBQ2xCOEIsS0FBSzBvRCxRQUFTLEVBQ2Qxb0QsS0FBSytvRCxlQUFnQixFQUNqQi9vRCxLQUFLZ2xELFVBQ1BobEQsS0FBS2lwRCxrQkFBa0JuMUMsVUFBVUQsYUFBYU8sUUFBU2xXLFFBRXZEOEIsS0FBS2lwRCxrQkFBa0JqcEQsS0FBS3FXLFdBQWEsRUFBR25ZLE9BRWhELENBRUEsV0FBQWdyRCxDQUFhQyxLQUFNQyxJQUFLbHJELFFBQVMsR0FDL0IsSUFBSXVFLE1BQVFMLEtBQUt1SSxNQUFNdkksS0FBS2luRCxVQUFZRixLQUFPQyxNQUFRQSxJQUFNLEVBQzdELE1BQU1FLFVBQVk3bUQsTUFBUSxHQUMxQixJQUFJOG1ELFNBQVdubkQsS0FBS3VJLE1BQU1sSSxNQUFRLElBQ2xDLE1BQU1FLEtBQU8sR0FFYixJQUFJNm1ELFVBQVlwbkQsS0FBS0MsSUFBSXJDLEtBQUsrVSxnQkFBa0JwUyxLQUFLL0IsT0FDckQsTUFBUTRvRCxXQUFXLENBQ2pCLElBQUlDLElBQU1ybkQsS0FBS3VJLE1BQXNCLEdBQWhCdkksS0FBS2luRCxVQUN0QmxvRCxLQUFhLEdBQU5zb0QsSUFBV0gsVUFDVCxJQUFUbm9ELE9BQ0ZBLEtBQU8sSUFDUHNvRCxJQUFNLEtBRUp6cEQsS0FBSzRsRCxZQUFjemtELE1BQVFnb0QsT0FDN0J4bUQsS0FBS3ZMLEtBQUtxeUQsS0FDTnRvRCxLQUFPc0IsUUFBT0EsTUFBUXRCLE9BRXhCbkIsS0FBSzhVLFVBQVkzVCxLQUFPaW9ELE1BQzFCem1ELEtBQUt2TCxLQUFLcXlELEtBQ050b0QsS0FBT3NCLFFBQU9BLE1BQVF0QixPQUU1QnFvRCxVQUFZN21ELEtBQUsvQixTQUFXd0IsS0FBS0MsSUFBSXJDLEtBQUsrVSxhQUM1QyxDQUdpQixLQUFidzBDLFVBQWlDLElBQWRELFlBQ3JCQyxTQUFXLEtBRWI1bUQsS0FBS3d6QixPQUNIL3pCLEtBQUt1SSxNQUFNdkksS0FBS2luRCxTQUFXMW1ELEtBQUsvQixPQUFTLEdBQ3pDLEVBQ2EsS0FBYjJvRCxTQUFrQixFQUFJQSxVQUd4QnZwRCxLQUFLMFUsTUFBTS9SLEtBQU8sR0FDbEIzQyxLQUFLMFUsTUFBTWxTLEtBQUtwTSxNQUFRa3pELFVBQ3hCdHBELEtBQUttZ0IsZUFBaUIxZCxNQUN0QnpDLEtBQUswVSxNQUFNalMsTUFBUUEsTUFDbkJ6QyxLQUFLMFUsTUFBTSt5QyxVQUFZaGxELE1BQVE2bUQsVUFFL0IsTUFBTXJtRCxJQUFvQixJQUFkcW1ELFVBQWtCLElBQU0sR0FDOUJwbUQsSUFBb0IsSUFBZG9tRCxVQUFrQixHQUFLLEVBQ25DLElBQUlqMEMsU0FBVzVTLE1BQVE2bUQsVUFFdkIsSUFBSyxJQUFJaHBDLEVBQUksRUFBR0EsRUFBSTNkLEtBQUsvQixPQUFRMGYsSUFBSyxDQUNwQyxNQUFNbEwsSUFBTSxDQUFDLEVBQ2JBLElBQUloZixNQUFRdU0sS0FBSzJkLEdBQ2JsTCxJQUFJaGYsUUFBVWlmLFVBQ2hCQSxTQUFXLElBQ1hELElBQUlDLFVBQVcsRUFDWHJWLEtBQUs4VSxVQUNQTSxJQUFJRSxPQUFRLEVBQ1pGLElBQUlHLE9BQVEsSUFFWkgsSUFBSUcsT0FBUSxFQUNaSCxJQUFJRSxPQUFRLEtBR1ZGLElBQUloZixRQUFVNk0sSUFBS21TLElBQUlFLE9BQVEsRUFDOUJGLElBQUlFLE9BQVEsRUFDYkYsSUFBSWhmLFFBQVU4TSxJQUFLa1MsSUFBSUcsT0FBUSxFQUM5QkgsSUFBSUcsT0FBUSxHQUduQnZWLEtBQUswVSxNQUFNL1IsS0FBS3ZMLEtBQUtnZSxJQUN2QixDQUVBcFYsS0FBSzh3QyxlQUNENXlDLFFBQVE4QixLQUFLaXJCLGdCQUNuQixDQUVBLGlCQUFBZytCLENBQW1CcDFDLGFBQWMzVixRQUFTLEdBQ3hDLElBQUlpckQsS0FBTUMsSUFDTnQxQyxVQUFVRCxhQUFhTSxTQUFXTixlQUNwQ3MxQyxLQUFPLElBQ1BDLElBQU1wcEQsS0FBS3NsRCxnQkFBa0IsR0FFM0J4eEMsVUFBVUQsYUFBYU8sVUFBWVAsZUFFbkNzMUMsS0FERW5wRCxLQUFLdytCLG1CQUFxQngrQixLQUFLc2xELGdCQUFrQixFQUM1QyxJQUNLdGxELEtBQUtzbEQsZ0JBQWtCLEVBQ3JDOEQsSUFBTXBwRCxLQUFLdytCLGtCQUVUMXFCLFVBQVVELGFBQWFFLFVBQVlGLGVBQ3JDczFDLEtBQU9ucEQsS0FBS3crQixpQkFDWjRxQixJQUFNcHBELEtBQUt5K0IsZUFFVDNxQixVQUFVRCxhQUFhSSxPQUFTSixlQUNsQ3MxQyxLQUFPbnBELEtBQUt5K0IsY0FDWjJxQixJQUFNcHBELEtBQUswK0Isa0JBRVQ1cUIsVUFBVUQsYUFBYTNKLFVBQVkySixlQUNyQ3MxQyxLQUFPbnBELEtBQUswK0IsaUJBQ1owcUIsSUFBTSxHQUVKdDFDLFVBQVVELGFBQWFLLFdBQWFMLGVBQ3RDczFDLEtBQU8sRUFDUEMsSUFBTSxHQUVKRCxPQUFTQyxLQUFLQSxNQUNMLElBQVRELE9BQVlBLEtBQU9ucEQsS0FBS3NsRCxnQkFBa0IsR0FDOUN0bEQsS0FBS2twRCxZQUFZQyxLQUFNQyxJQUFLbHJELE9BQzlCLENBRUEsb0JBQUEweUMsQ0FBc0IxeUMsUUFBUyxHQUM3QixJQUFJaXJELEtBQU1DLElBQ050MUMsVUFBVUQsYUFBYU0sU0FBV25VLEtBQUs2VCxlQUN6Q3MxQyxLQUFPbnBELEtBQUtzbEQsZ0JBQWtCLEVBRTVCOEQsSUFERXBwRCxLQUFLdytCLG1CQUFxQngrQixLQUFLc2xELGdCQUFrQixFQUM3Q3RsRCxLQUFLeStCLGNBRUx6K0IsS0FBS3crQixrQkFHWDFxQixVQUFVRCxhQUFhTyxVQUFZcFUsS0FBSzZULGVBQzFDczFDLEtBQU9ucEQsS0FBS3crQixpQkFDWjRxQixJQUFNcHBELEtBQUt5K0IsZUFFVDNxQixVQUFVRCxhQUFhRSxVQUFZL1QsS0FBSzZULGVBQzFDczFDLEtBQU9ucEQsS0FBS3krQixjQUNaMnFCLElBQU1wcEQsS0FBSzArQixrQkFFVDVxQixVQUFVRCxhQUFhSSxPQUFTalUsS0FBSzZULGVBQ3ZDczFDLEtBQU9ucEQsS0FBSzArQixpQkFDWjBxQixJQUFNcHBELEtBQUtxbEQsbUJBRVR2eEMsVUFBVUQsYUFBYTNKLFVBQVlsSyxLQUFLNlQsZUFDMUNzMUMsS0FBT25wRCxLQUFLcWxELGtCQUNaK0QsSUFBTSxHQUVKRCxPQUFTQyxLQUFLQSxNQUNsQnBwRCxLQUFLa3BELFlBQVlDLEtBQU1DLElBQUtsckQsT0FDOUIsQ0FFQSxvQkFBQTJ5QyxDQUFzQjN5QyxRQUFTLEdBQzdCLElBQUlpckQsS0FBTUMsSUFDTnQxQyxVQUFVRCxhQUFhTyxVQUFZcFUsS0FBSzZULGVBQzFDczFDLEtBQU8sSUFDUEMsSUFBTXBwRCxLQUFLc2xELGdCQUFrQixHQUUzQnh4QyxVQUFVRCxhQUFhRSxVQUFZL1QsS0FBSzZULGVBQzFDczFDLEtBQU9ucEQsS0FBS3NsRCxnQkFBa0IsRUFDOUI4RCxJQUFNcHBELEtBQUt3K0Isa0JBRVQxcUIsVUFBVUQsYUFBYUksT0FBU2pVLEtBQUs2VCxlQUN2Q3MxQyxLQUFPbnBELEtBQUt3K0IsaUJBQ1o0cUIsSUFBTXBwRCxLQUFLeStCLGVBRVQzcUIsVUFBVUQsYUFBYTNKLFVBQVlsSyxLQUFLNlQsZUFDMUNzMUMsS0FBT25wRCxLQUFLeStCLGNBQ1oycUIsSUFBTXBwRCxLQUFLMCtCLGtCQUVUNXFCLFVBQVVELGFBQWFLLFdBQWFsVSxLQUFLNlQsZUFDM0NzMUMsS0FBT25wRCxLQUFLMCtCLGlCQUNaMHFCLElBQU0sR0FFSyxJQUFURCxPQUFZQSxLQUFPbnBELEtBQUtzbEQsZ0JBQWtCLEdBQzlDdGxELEtBQUtrcEQsWUFBWUMsS0FBTUMsSUFBS2xyRCxPQUM5QixDQUVBLHlCQUFNb0ssR0FDSnRJLEtBQUswcEQsdUJBQXdCLEVBQ3pCMXBELEtBQUtpSSxhQUFhakksS0FBS2lJLE1BQU1LLHFCQUNuQyxDQUVBLGNBQUkrTixDQUFZekssR0FDZDVMLEtBQUsrbEQsWUFBYzloRCxTQUFTMkgsRUFDOUIsQ0FFQSxjQUFJeUssR0FDRixPQUFPclcsS0FBSytsRCxXQUNkLENBRUEsVUFBSWgyQyxDQUFRbkUsR0FDVjVMLEtBQUsycEQsUUFBVS85QyxDQUNqQixDQUVBLFdBQUlyRyxDQUFTcUcsR0FDWDVMLEtBQUs0cEQsU0FBV2grQyxDQUNsQixDQUVBLFdBQUlyRyxHQUNGLEdBQUt2RixLQUFLNHBELFNBQ1YsT0FBTzVwRCxLQUFLNHBELFFBQ2QsQ0FFQSxVQUFJMStDLENBQVFVLEdBQ0w1TCxLQUFLckMsT0FBTXFDLEtBQUtyQyxLQUFPaUIsUUFBUUMsTUFBTXFtRCxTQUFTLEtBQ25EbGxELEtBQUs2cEQsV0FBYWorQyxDQUNwQixDQUVBLFVBQUlWLEdBQ0YsR0FBS2xMLEtBQUs2cEQsV0FDVixPQUFPN3BELEtBQUs2cEQsVUFDZCxDQUVBLFVBQUk5NUMsR0FDRixHQUFJL1AsS0FBSzJwRCxRQUFTLE9BQU8zcEQsS0FBSzJwRCxRQUM5QixJQUFJNTVDLE9BQVMsR0E2RGIsT0E1REkvUCxLQUFLOUYsT0FBTzZCLFNBQ1ZpRSxLQUFLaUksTUFDUDhILE9BQVN6UyxLQUFLQyxLQUFLeVcsT0FBTyxtQkFBb0IsQ0FDNUMxZCxLQUFNMEosS0FBS2lJLE1BQU0zUixLQUNqQkYsTUFBTzRKLEtBQUtvbEQsZUFDWi91QyxXQUFZclcsS0FBS3N1QixtQkFFVnR1QixLQUFLaUcsS0FDZDhKLE9BQVN6UyxLQUFLQyxLQUFLeVcsT0FBTyx1QkFBd0IsQ0FDaEQvTixLQUFNakcsS0FBS2lHLEtBQUszUCxLQUNoQjJSLE1BQU9qSSxLQUFLaUksTUFBTTNSLEtBQ2xCRixNQUFPNEosS0FBS29sRCxlQUNaL3VDLFdBQVlyVyxLQUFLc3VCLG1CQUVWdHVCLEtBQUswVyxlQUNkM0csT0FBU3pTLEtBQUtDLEtBQUt5VyxPQUFPLG1CQUFvQixDQUM1QzFkLEtBQU1nSCxLQUFLQyxLQUFLeVcsT0FDZGhVLEtBQUs5RixNQUFNNkIsT0FBTzJuQixnQkFBZ0IxakIsS0FBSzBXLGdCQUFnQnJaLE9BRXpEakgsTUFBTzRKLEtBQUtvbEQsZUFDWi91QyxXQUFZclcsS0FBS3N1QixtQkFFVnR1QixLQUFLOGdCLFVBQ2QvUSxPQUFTelMsS0FBS0MsS0FBS3lXLE9BQU8sbUJBQW9CLENBQzVDMWQsS0FBTWdILEtBQUtDLEtBQUt5VyxPQUNkLFFBQVFoVSxLQUFLOUYsTUFBTTZCLE9BQU9DLFFBQVFnRSxLQUFLOGdCLFdBQVd6akIsU0FFcERqSCxNQUFPNEosS0FBS29sRCxlQUNaL3VDLFdBQVlyVyxLQUFLc3VCLG1CQUVWdHVCLEtBQUsydEIsY0FDZDVkLE9BQVN6UyxLQUFLQyxLQUFLeVcsT0FBTyxtQkFBb0IsQ0FDNUMxZCxLQUFNMEosS0FBSzJ0QixZQUNYdjNCLE1BQU80SixLQUFLb2xELGVBQ1ovdUMsV0FBWXJXLEtBQUtzdUIscUJBS2xCdmUsUUFDQy9QLEtBQUt1VyxXQUVMeEcsT0FERS9QLEtBQUsydEIsWUFDRXJ3QixLQUFLQyxLQUFLeVcsT0FBTyxtQkFBb0IsQ0FDNUMxZCxLQUFNMEosS0FBSzJ0QixZQUNYdjNCLE1BQU80SixLQUFLb2xELGVBQ1ovdUMsV0FBWXJXLEtBQUtzdUIsbUJBR1ZoeEIsS0FBS0MsS0FBS3lXLE9BQU8scUJBQXNCLENBQzlDODFDLFNBQVU5cEQsS0FBS3VXLFNBQ2ZGLFdBQVlyVyxLQUFLc3VCLG9CQU1yQnR1QixLQUFLOGMsVUFDUC9NLE9BQVMsR0FBR3pTLEtBQUtDLEtBQUt5VyxPQUFPLG1CQUFtQmpFLFVBRzNDQSxNQUNULENBRUEsaUJBQUlnNkMsR0FDRixPQUFJL3BELEtBQUs4Z0IsVUFFTHhqQixLQUFLQyxLQUFLeVcsT0FDUixpQkFDRWhVLEtBQUtxVyxhQUFldkMsVUFBVXNQLGdCQUFnQnJQLFFBQVUsR0FBSyxTQUMzRC9ULEtBQUsrVSxhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZclcsS0FBS3N1QixpQkFDakI1cEIsU0FBVTFFLEtBQUsrVSxhQUNmemUsS0FBTWdILEtBQUtDLEtBQUt5VyxPQUNkLFFBQVFoVSxLQUFLOUYsTUFBTTZCLE9BQU9DLFFBQVFnRSxLQUFLOGdCLFdBQVd6akIsV0FHcEQsS0FBSzJDLEtBQUs5RixNQUFNNkIsT0FBT0MsUUFBUWdFLEtBQUs4Z0IsV0FBVzFxQixVQUduRDRKLEtBQUswVyxlQUVMcFosS0FBS0MsS0FBS3lXLE9BQ1IsaUJBQ0VoVSxLQUFLcVcsYUFBZXZDLFVBQVVzUCxnQkFBZ0JyUCxRQUFVLEdBQUssU0FDM0QvVCxLQUFLK1UsYUFBb0IsUUFBTCxLQUN4QixDQUNFc0IsV0FBWXJXLEtBQUtzdUIsaUJBQ2pCNXBCLFNBQVUxRSxLQUFLK1UsYUFDZnplLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUNkd0MsS0FBSzlGLE1BQU02QixPQUFPMm5CLGdCQUFnQjFqQixLQUFLMFcsZ0JBQWdCclosU0FJN0QsS0FBSzJDLEtBQUs5RixNQUFNNkIsT0FBTzJuQixnQkFBZ0IxakIsS0FBSzBXLGdCQUFnQnRnQixVQUc1RDRKLEtBQUtpSSxNQUVMM0ssS0FBS0MsS0FBS3lXLE9BQ1IsaUJBQ0VoVSxLQUFLcVcsYUFBZXZDLFVBQVVzUCxnQkFBZ0JyUCxRQUFVLEdBQUssU0FDM0QvVCxLQUFLK1UsYUFBb0IsUUFBTCxLQUN4QixDQUNFc0IsV0FBWXJXLEtBQUtzdUIsaUJBQ2pCNXBCLFNBQVUxRSxLQUFLK1UsYUFDZnplLEtBQU0wSixLQUFLaUksTUFBTTNSLE9BRWpCLEtBQUswSixLQUFLaUksTUFBTTdSLFVBR3BCNEosS0FBSzJ0QixZQUVMcndCLEtBQUtDLEtBQUt5VyxPQUNSLGlCQUNFaFUsS0FBS3FXLGFBQWV2QyxVQUFVc1AsZ0JBQWdCclAsUUFBVSxHQUFLLFNBQzNEL1QsS0FBSytVLGFBQW9CLFFBQUwsS0FDeEIsQ0FDRXNCLFdBQVlyVyxLQUFLc3VCLGlCQUNqQjVwQixTQUFVMUUsS0FBSytVLGFBQ2Z6ZSxLQUFNMEosS0FBSzJ0QixjQUVYLEtBQUszdEIsS0FBS29sRCxtQkFHWCxJQUNULENBRUEsd0JBQU00RSxDQUFvQjFxRCxRQUFVLENBQUMsR0FFL0JVLEtBQUtWLFFBQVNVLEtBQUtWLFFBQVVWLFFBQVFDLE1BQU0yYSxZQUFZeFosS0FBS1YsUUFBU0EsU0FDcEVVLEtBQUtWLFFBQVVBLFFBQ3BCLE1BQU15YSxXQUFhd0csZUFIRixzREFHMkJ2Z0IsTUFDNUMsT0FBSStaLEtBQWF5UixFQUFFQyxVQUFVMVIsTUFBTSxHQUM1QixJQUNULENBRUEsaUJBQU1nYixDQUFhejFCLFFBQVUsQ0FBQyxHQUV4QlUsS0FBS1YsUUFBU1UsS0FBS1YsUUFBVVYsUUFBUUMsTUFBTTJhLFlBQVl4WixLQUFLVixRQUFTQSxTQUNwRVUsS0FBS1YsUUFBVUEsUUFFcEIsYUFEbUJpaEIsZUFIRixzREFHMkJ2Z0IsWUFDN0JuQyxDQUNqQixDQUVBLGVBQU0rM0IsQ0FBVzlZLFNBQVUsR0FFekI5YyxLQUFLOGMsUUFBVUEsUUFDZixNQUVNL0MsV0FBYXdHLGVBRkYsK0NBRTJCdmdCLE1BRXRDNmxCLFlBQWMsQ0FBQyxFQUNyQixJQUFJN1YsUUFDQWhRLEtBQUs5RixPQUNIOEYsS0FBSzlGLE1BQU15YyxRQUNia1AsWUFBWTdVLE1BQVFoUixLQUFLZ1IsTUFBTW5DLFNBQ3RCN08sS0FBSzlGLE1BQU02c0QsUUFDaEIvbUQsS0FBSzlGLE1BQU01RCxPQUFNMFosUUFBVSxDQUFFb0IsTUFBT3BSLEtBQUs5RixNQUFNNUQsT0FFbkR1dkIsWUFBWTNyQixNQUFROEYsS0FBSzlGLE1BRTNCOFYsUUFBVXhNLFlBQVl5TSxXQUFXNFYsY0FFakM3VixRQUFVeE0sWUFBWXlNLGFBR3hCLE1BRU01TSxTQUFXLENBQ2ZPLE1BSFc1RCxLQUFLOUYsT0FBTzBKLEtBQU81RCxLQUFLOUYsTUFBTTBKLEtBQU90RyxLQUFLc0csTUFHMUNxSyxHQUNYK0IsUUFDQUQsT0FBUS9QLEtBQUsrUCxPQUNiUyxRQUFTdUosS0FDVDdhLE1BQU8sQ0FDTHdDLEtBQU0sQ0FDSnJELEtBQU15VixVQUFVK2YsWUFRdEIsR0FISTd6QixLQUFLckMsT0FBTTBGLFNBQVNuRSxNQUFNd0MsS0FBSy9ELEtBQU9xQyxLQUFLckMsTUFDM0NxQyxLQUFLdUYsVUFBU2xDLFNBQVNuRSxNQUFNd0MsS0FBSzZELFFBQVV2RixLQUFLdUYsU0FFL0IsYUFBbEJ2RixLQUFLcUIsU0FDUCxHQUFJL0QsS0FBS3NHLEtBQUsyRSxNQVdaLEdBVkFsRixTQUFTTyxLQUFPdEcsS0FBS3NHLEtBQUtxSyxHQUMxQjVLLFNBQVMwTSxPQUFTLElBQUkvUCxLQUFLOUYsTUFBTTVELFNBQVMrTSxTQUFTME0sU0FDbkQxTSxTQUFTbkUsTUFBUSxDQUNmd0MsS0FBTSxDQUNKMHFDLFlBQVksU0FHZ0IsSUFBckIvb0MsU0FBUzJNLFVBQ2xCM00sU0FBU25FLE1BQU13QyxLQUFLdW9ELGdCQUFrQnJyRCxRQUFRQyxNQUFNdU8sVUFBVS9KLFNBQVMyTSxVQUVyRTFTLEtBQUtzRyxLQUFLMkUsS0FDWixPQUFRakwsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQ2hDLElBQUssZ0JBQ0ltRyxTQUFTMk0sUUFDaEIzTSxTQUFTQyxRQUFVdEQsS0FBSzlGLE1BQU1pMUIsT0FDOUI5ckIsU0FBU2hGLEtBQU82UixNQUFNQyxtQkFBbUJDLFFBQ3pDLE1BRUYsSUFBSyxrQkFDSS9NLFNBQVMyTSxRQUNoQjNNLFNBQVNDLFFBQVVoRyxLQUFLOGtCLE1BQU0rcEIsUUFDOUI5b0MsU0FBU2hGLEtBQU82UixNQUFNQyxtQkFBbUJDLFFBQ3pDLE1BRUYsUUFDRTVNLFlBQVlDLGNBQWNKLFNBQVVyRCxLQUFLcUIsZ0JBSTFDbUMsWUFBWUMsY0FBY0osU0FBVXJELEtBQUtxQixVQUc5QyxDQUFDLFNBQVUsYUFBYTJCLFNBQVNoRCxLQUFLcUIsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZc2lCLHFCQUFxQixPQUVoQyxjQUFsQjlsQixLQUFLcUIsV0FBMEJnQyxTQUFTRSxPQUFRLEdBR2hEdkQsS0FBSzRCLE1BQU1ULE9BQVNuQixLQUFLNEIsTUFBTU4sV0FDakMrQixTQUFTbEMsS0FBT25CLEtBQUs0QixLQUFLVCxLQUMxQmtDLFNBQVNoRixLQUFPNlIsTUFBTUMsbUJBQW1CRSxLQUN6Q2hOLFNBQVNoQyxTQUFXckIsS0FBS3lrQixRQUFVLFlBQWN6a0IsS0FBS3FCLFVBR3hEbUMsWUFBWWlOLE9BQU9wTixVQUFVZ0UsTUFBS3FKLEtBQ3pCQSxLQUVYLENBTUEsb0JBQU11YSxFQUFnQixZQUFlLEVBQUssV0FBYyxHQUFVLENBQUMsR0FDN0Q4bEIsYUFBWS93QyxLQUFLcUIsVUFBVyxHQUVoQyxNQUFNZ0MsU0FBVyxDQUFFME0sT0FBUS9QLEtBQUsrUCxRQUU1QmdoQyxhQUNGMXRDLFNBQVNDLFFBQVUsR0FDbkJELFNBQVNFLE9BQVEsRUFDakJDLFlBQVlDLGNBQWNKLFdBT3hCQSxTQUFTRSxRQUNYdkQsS0FBS3lrQixTQUFVLEdBR2pCLE1BQ00xSyxXQUFhd0csZUFERiwrQ0FDMkJ2Z0IsTUFDNUMsSUFBSWtxRCxXQUFhbndDLEtBRWpCLElBQUsvWixLQUFLbWMsVUFBVyxPQUFPcVAsRUFBRUMsVUFBVTFSLE1BQU0sR0FHOUMsTUFBTWxLLFFBQVV2UyxLQUFLOGUsU0FBU2xmLElBQUk4QyxLQUFLbWMsV0FDakNndUMsWUFBYzMrQixFQUFFQyxVQUFVNWIsUUFBUVcsU0FBUyxHQUNqRCxJQUFLMjVDLFlBQVlwN0MsVUFBVXdULFNBQVMsZUFBZ0IsQ0FDbEQsTUFBTXdjLFVBQVl2VCxFQUFFQyxVQUFVMVIsTUFBTSxHQUM5QnF3QyxrQkFBb0JELFlBQVl4MkMsY0FBYyxnQkFDMUIsT0FBdEJ5MkMsbUJBQ0ZBLGtCQUFrQmxyQixZQUFZSCxXQUVoQ21yQixXQUFhQyxZQUFZLytCLFNBQzNCLENBRUEvbkIsU0FBU21OLFFBQVUwNUMsV0FFZmg2QyxNQUFNQyxtQkFBbUJFLE9BQVNSLFFBQVF4UixPQUN4Q3dSLFFBQVF2TSxTQUFTMUMsT0FDbkJ5QyxTQUFTaEYsS0FBTzZSLE1BQU1DLG1CQUFtQkMsUUFDcEMvTSxTQUFTaEYsS0FBTzZSLE1BQU1DLG1CQUFtQms2QyxPQUc5Q3JaLFdBQWFoeEMsS0FBSzRCLE1BQU1ULE9BQVM3RCxLQUFLc0csS0FBSzJFLE9BQVN2SSxLQUFLeWtCLGdCQUNyRHZqQixTQUFTaUMsZUFBZW5ELEtBQUs0QixLQUFLVCxNQUcxQyxNQUFNdVAsVUFBWWIsUUFBUTNSLE9BQU9tRixVQUVqQyxhQURNMEYsR0FBRzRpQixLQUFLQyxjQUFjbGIsS0FBSyxHQUMxQkEsR0FDVCxDQUVBLDZCQUFha3pCLENBQWtCcm5DLE9BQzdCLE1BQU04UCxLQUFPOVAsTUFBTUksY0FBY0UsUUFBUSxjQUNuQ21aLFlBQWNsQyxVQUFVTCxZQUFZcEgsTUFDMUMySixNQUFNMndDLHFCQUFzQixFQUM1QjN3QyxNQUFNMHdDLGtCQUFtQixFQUN6QjF3QyxNQUFNeXdDLHFCQUFzQixFQUM1Qnp3QyxNQUFNd3dDLHNCQUF1QixFQUNZLHdCQUFyQ2pxRCxNQUFNSSxjQUFjSSxRQUFRazRCLE9BQzlCamYsTUFBTTJ3QyxxQkFBc0IsR0FFVyxxQkFBckNwcUQsTUFBTUksY0FBY0ksUUFBUWs0QixPQUM5QmpmLE1BQU0wd0Msa0JBQW1CLEdBRWMsd0JBQXJDbnFELE1BQU1JLGNBQWNJLFFBQVFrNEIsT0FDOUJqZixNQUFNeXdDLHFCQUFzQixHQUVXLHlCQUFyQ2xxRCxNQUFNSSxjQUFjSSxRQUFRazRCLE9BQzlCamYsTUFBTXd3QyxzQkFBdUIsR0FFL0J4d0MsTUFBTTg2QixlQUNOOTZCLE1BQU1pVixnQkFDUixDQUVBLFdBQUlxL0IsR0FDRixPQUFPL3BDLGVBQ0wsc0RBQ0F2Z0IsS0FFSixDQUVBLGVBQUltckIsR0FDRixNQUFNenVCLEVBQUltUyxTQUFTQyxjQUFjLEtBVWpDLE9BVEFwUyxFQUFFcVMsVUFBVUMsSUFBSSxxQkFDaEJ0UyxFQUFFcVMsVUFBVUMsSUFBSSxxQkFDaEJ0UyxFQUFFcVMsVUFBVUMsSUFBSSxlQUNoQnRTLEVBQUVxUyxVQUFVQyxPQUFPaFAsS0FBSzRvRCxjQUN4QmxzRCxFQUFFK1IsTUFBUXpPLEtBQUsrcEQsY0FDZnJ0RCxFQUFFSyxRQUFRb0UsS0FBT3VOLE9BQU8xTyxLQUFLMm9ELGdCQUM3QmpzRCxFQUFFd1MsVUFBWSwyQ0FDWmxQLEtBQUttZ0IsZ0JBQWtCLE9BRWxCempCLENBQ1QsQ0FFQSxlQUFJNnRELEdBQ0YsR0FBSXZxRCxLQUFLbytCLFFBQVMsT0FDbEIsTUFBTXIzQixNQUFRLEdBQ1JwRSxLQUFPM0MsS0FBSzBVLE1BQU0vUixLQUFLcUIsS0FBSW9ULElBQ3hCLENBQ0w3VSxPQUFRNlUsRUFBRWhoQixNQUNWaWYsU0FBVStCLEVBQUUvQixTQUNab0UsUUFBUyxDQUNQLE1BQ0EsTUFDQ3JDLEVBQUUvQixTQUF5QixLQUFkLFlBQ2QrQixFQUFFN0IsTUFBUSxNQUFRLEtBQ2xCNkIsRUFBRTlCLE1BQVEsTUFBUSxNQUVqQi9lLFFBQU9zNUIsR0FBS0EsSUFDWnhyQixLQUFLLFNBR043QixLQUFPLENBQ1gsQ0FDRUQsT0FBUXZDLEtBQUswVSxNQUFNbFMsS0FBS3BNLE1BQ3hCaWYsVUFBVSxFQUNWb0UsUUFBUyxZQWNiLE9BVkExUyxNQUFNM1AsS0FBSyxDQUNUNkMsUUFBUytGLEtBQUsrcEQsY0FDZHRuRCxNQUFPekMsS0FBS21nQixlQUNaZ21DLE1BQU9ubUQsS0FBS2ltRCxrQkFDWnBoRCxNQUFPN0UsS0FBS3FtRCxTQUNaK0IsZ0JBQWlCcG9ELEtBQUtvb0QsZ0JBQ3RCeDBDLFdBQVk1VCxLQUFLNFQsV0FDakI0MkMsS0FBTSxHQUNOcnpDLE1BQU8sSUFBSXhVLFFBQVNILFFBRWYrZCxlQUNMLHNEQUNBLENBQUV4WixPQUVOLENBRUEsZ0JBQUkyVyxHQUNGLE9BQU8vTyxLQUFLdWQsTUFBTWxzQixLQUFLMm9ELGVBQ3pCLENBRUEsa0JBQUlBLEdBQ0YsT0FBT2g2QyxLQUFLQyxVQUFVNU8sTUFBTSxDQUFDbkUsSUFBS3pGLFNBQ2hDLEdBQWMsT0FBVkEsTUFBZ0IsT0FFcEIsTUFEZ0IsQ0FBQyxTQUFVLFNBQVUsU0FDekI0TSxTQUFTbkgsVUFBckIsRUFDT3pGLFFBRVgsQ0FFQSxlQUFPMkwsQ0FBVXVELE1BQ2YsT0FBTzFGLE9BQU91ZSxPQUFPLElBQUlySyxVQUFheE8sS0FDeEMsQ0FFQSxxQkFBT21sRCxDQUFnQjczQixZQUNyQixJQUFJdHRCLEtBQ0osSUFDRUEsS0FBT3FKLEtBQUt1ZCxNQUFNQyxTQUFTeUcsWUFDN0IsQ0FBRSxNQUFPOW5CLEtBRVAsT0FEQS9CLEdBQUdDLGNBQWN3VSxNQUFNMVMsSUFBSStFLFNBQ3BCLElBQ1QsQ0FDQSxPQUFPaUUsVUFBVS9SLFNBQVN1RCxLQUM1QixDQUVBLGtCQUFhcXlCLENBQU8zaEIsTUFBTzAwQyxRQUFTcHJELFFBQVUsQ0FBQyxHQUM3QyxPQUFRb3JELFNBQ04sSUFBSyxVQUNILEdBQUlwckQsUUFBUXlsQixPQUFPaFcsVUFBVXdULFNBQVMsY0FBZSxDQUNuRCxNQUFNckYsV0FBYWpaLFNBQVMzRSxRQUFReWxCLE9BQU9ob0IsUUFBUW1nQixZQUNuRGxILE1BQU0rSCxVQUFVYixXQUFZNWQsUUFBUXBCLE9BQ3RDLEtBQU8sQ0FDTCxNQUFNK3hDLGFBQWVoc0MsU0FBUzNFLFFBQVF5bEIsT0FBT2hvQixRQUFRb2dCLGFBQy9DbkgsTUFBTThILGFBQWFteUIsYUFBYzN3QyxRQUFRcEIsT0FDakQsQ0FDQSxNQUdGLElBQUssYUFDSDhYLE1BQU0rSCxVQUFVLEtBQU16ZSxRQUFRcEIsUUFDOUIsTUFHRixJQUFLLGFBQ0g4WCxNQUFNMjZCLFVBQVVyeEMsUUFBUXBCLFFBQ3hCLE1BR0YsSUFBSyx5QkFDSDhYLE1BQU00NkIscUJBQXFCdHhDLFFBQVFwQixRQUNuQyxNQUdGLElBQUsseUJBQ0g4WCxNQUFNNjZCLHFCQUFxQnZ4QyxRQUFRcEIsUUFDbkMsTUFHRixJQUFLLGVBQ0g4WCxNQUFNeU8sU0FBVSxFQUNoQnpPLE1BQU0zVSxVQUFXLEVBQ2pCMlUsTUFBTTg2QixlQUNGeHhDLFFBQVFwQixRQUFROFgsTUFBTWlWLGlCQUMxQixNQUdGLElBQUssNkJBQ0dqVixNQUFNMU4sc0JBQ1owTixNQUFNODZCLGVBQ0Z4eEMsUUFBUXBCLFFBQVE4WCxNQUFNaVYsaUJBQzFCLE1BR0YsSUFBSyxhQUNHalYsTUFBTWlMLFdBQ1pqTCxNQUFNOEcsU0FBVSxFQUNaeGQsUUFBUXBCLFFBQVE4WCxNQUFNaVYsaUJBR2hDLENBRUEsK0JBQWEwL0IsQ0FBb0JwdUQsT0FDL0JBLE1BQU1FLGlCQUNOLE1BQU1DLEVBQUlILE1BQU1JLGNBRWhCLEdBQUlELEVBQUVxUyxVQUFVd1QsU0FBUyxxQkFDdkIsT0FBSTdsQixFQUFFcVMsVUFBVXdULFNBQVMsWUFDaEJ6TyxVQUFVcTdCLHNCQUFzQnp5QyxHQUVoQ29YLFVBQVVzN0Isb0JBQW9CMXlDLEVBRzNDLENBRUEsNEJBQU95eUMsQ0FBdUJ6eUMsR0FDNUIsSUFBS0EsRUFBRXFTLFVBQVV3VCxTQUFTLHFCQUFzQixPQUNoRCxJQUFLN2xCLEVBQUVxUyxVQUFVd1QsU0FBUyxZQUFhLE9BQ3ZDLE1BQU0rbkMsUUFBVTV0RCxFQUFFaVgsY0FBYyx1QkFFaEMsT0FESTIyQyxTQUFTQSxRQUFReG5DLFNBQ2RwbUIsRUFBRXFTLFVBQVUrVCxPQUFPLFdBQzVCLENBRUEsZ0NBQWFzc0IsQ0FBcUIxeUMsR0FDaEMsSUFBS0EsRUFBRXFTLFVBQVV3VCxTQUFTLHFCQUFzQixPQUNoRCxHQUFJN2xCLEVBQUVxUyxVQUFVd1QsU0FBUyxZQUFhLE9BR3RDLE1BQU12TSxNQUFRcFcsT0FBT3VlLE9BQ25CLElBQUlySyxVQUNKbkYsS0FBS3VkLE1BQU1DLFNBQVN6dkIsRUFBRUssUUFBUW9FLFFBRWhDLEdBQUk2VSxNQUFNb29CLFFBQVMsT0FFbkIsTUFBTXdzQixJQUFNLzdDLFNBQVNDLGNBQWMsT0FDbkM4N0MsSUFBSTE3QyxnQkFBa0I4RyxNQUFNdTBDLFlBRzVCLE1BQU1ELFFBQVVNLElBQUlwd0MsU0FBUyxHQUM3QjlkLEVBQUVtdUQsWUFBWVAsU0FDZDV0RCxFQUFFcVMsVUFBVUMsSUFBSSxZQUdoQixNQUFNODdDLEdBQUtwdUQsRUFBRXF1RCx3QkFDUEMsR0FBS1YsUUFBUVMsd0JBQ25CVCxRQUFRL3FCLE1BQU0rYixLQUFPLEdBQUdsNUMsS0FBS2MsSUFDM0I0bkQsR0FBR2wvQyxFQUNIcS9DLE9BQU9DLFlBQWNGLEdBQUdweEMsTUFBUSxRQUVsQzB3QyxRQUFRL3FCLE1BQU00ckIsSUFBTSxHQUFHL29ELEtBQUtjLElBQzFCNG5ELEdBQUdNLEVBQUlOLEdBQUdqeEMsT0FBUyxFQUNuQm94QyxPQUFPSSxhQUFlTCxHQUFHbnhDLE9BQVMsUUFFcEMsTUFBTXl4QyxHQUFLQyxpQkFBaUI3dUQsR0FBRzh1RCxPQUMvQmxCLFFBQVEvcUIsTUFBTWlzQixPQUFTdHZELE9BQU91dkQsVUFBVUgsSUFBTUEsR0FBSyxFQUFJLEdBQ3pELEVDbDdESyxNQUFNMWpELGNBWVgsZ0JBQU8rOEMsQ0FBVy80QyxHQUNoQixNQUFpQixpQkFBTkEsTUFDTjlQLE1BQU1JLE9BQU8wUCxLQUNYOUosS0FBS3kzQixTQUFTM3RCLEdBQ3ZCLENBRUEscUJBQU84L0MsQ0FBZ0IzeEMsS0FBTXZKLFNBQzNCLE1BQ00xTixNQUFRME4sUUFBUTNLLE1BRFQsVUFFYixHQUNFL0MsTUFBTSxJQUFJa0YsY0FBY25DLE1BQU0sZ0JBQzlCL0MsTUFBTSxJQUFJa0YsY0FBY3dDLFdBQVcsT0FNbkMsT0FIQStXLFlBQVcsV0FDVDNaLGNBQWMrakQsYUFBYW43QyxRQUM3QixHQUFHLE1BQ0ksQ0FFWCxDQUVBLHlCQUFhbTdDLENBQWNuN0MsU0FDekIsTUFBTWxSLFFBQVVrUixRQUNieEksY0FDQXlFLE1BQU0sTUFDTHBJLEtBQUssS0FDTHFMLFFBQVEsZUFBZ0IsSUFDdEJzRyxNQUFRLElBQUlsQyxVQUNsQixHQUFJeFUsUUFBUXNCLE9BQVEsQ0FDbEIsSUFDSTJtRCxVQUlBM3ZCLGlCQUNBQyxzQkFOQSt6QixRQUFVdHNELFFBRVYrVyxXQUFhdkMsVUFBVXNQLGdCQUFnQnJQLFFBQ3ZDZ0IsYUFBZSxFQUNmODJDLEtBQU0sRUFHVixNQUFNQyxhQUFlRixRQUFRL2xELE1BQU0sZUFDbkMsR0FBSWltRCxjQUFnQkEsYUFBYWxyRCxPQUFRLENBQ3ZDMm1ELFVBQVlyckQsT0FBTzR2RCxhQUFhLElBQ2hDLElBQUssTUFBTWptRCxTQUFTaW1ELGFBQ2xCRixRQUFVQSxRQUFRbDhDLFFBQVEsSUFBSTdKLFNBQVUsR0FFNUMsQ0FDQSxNQUFNa21ELGNBQWdCSCxRQUFRL2xELE1BQU0sZUFDcEMsR0FBSWttRCxlQUFpQkEsY0FBY25yRCxPQUFRLENBQ3pDeVYsV0FBYXpPLGNBQWNpbUIsa0JBQWtCaytCLGNBQWMsSUFDM0QsSUFBSyxNQUFNbG1ELFNBQVNrbUQsY0FDbEJILFFBQVVBLFFBQVFsOEMsUUFBUSxJQUFJN0osU0FBVSxHQUU1QyxDQU9BLEdBTkkrbEQsUUFBUTVvRCxTQUFTLE9BQ25CNm9ELEtBQU0sRUFDTkQsUUFBVUEsUUFBUWw4QyxRQUFRLElBQUssS0FFNUI1VCxNQUFNSSxPQUFPMHZELFlBQVc3MkMsYUFBZTdZLE9BQU8wdkQsVUFFL0NDLElBQUssQ0FDUCxNQUFNenVCLGNBQWdCLENBQ3BCbXFCLFVBQ0E3aUQsU0FBVXFRLGFBQ1ZzQixXQUNBMjFDLFVBQVUsR0FFTjl0QixZQUFjNUssV0FBVzdpQixPQUFPMnNCLGVBQ2xDYyxRQUNGbnBCLGFBQWU3WSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxjQUNoQ21aLFdBQWFuYSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxlQUM5QnFxRCxVQUFZcnJELE9BQU9naUMsTUFBTWhoQyxJQUFJLGVBQWlCcXFELFVBQzlDM3ZCLGlCQUFtQjE3QixPQUFPZ2lDLE1BQU1oaEMsSUFBSSxxQkFDcEMyNkIsc0JBQXdCMzdCLE9BQU9naUMsTUFBTWhoQyxJQUFJLDBCQUU3QyxDQUVBOFksTUFBTWpCLGFBQWVBLGNBQWdCLEVBQ3JDaUIsTUFBTUssV0FBYUEsWUFBY3ZDLFVBQVVzUCxnQkFBZ0JyUCxRQUMzRGlDLE1BQU1PLFNBQVdneEMsVUFDakJ2eEMsTUFBTTRoQixpQkFBbUJBLGlCQUN6QjVoQixNQUFNNmhCLHNCQUF3QkEsc0JBQzFCMHZCLFlBQVd2eEMsTUFBTU8sU0FBWXphLE1BQU15ckQsZ0JBQXlCMXBELEVBQVowcEQsVUFDdEQsQ0FDQSxNQUFNdjNDLFFBQVV4TSxZQUFZeU0sYUFDNUIsR0FBSUQsUUFBUWdCLE9BQVNoQixRQUFRcEQsTUFBTyxDQUNsQyxNQUFNMVMsTUFBUXFWLFdBQVdxQixnQkFDdkIsR0FBR1osUUFBUXBELFNBQVNvRCxRQUFRZ0IsU0FFMUI5VyxRQUFPOGIsTUFBTTliLE1BQVFBLE1BQzNCLE1BQU8sR0FBSThWLFFBQVE5VixNQUFPLENBQ3hCLE1BQU1BLE1BQVFvRCxLQUFLb1AsT0FBT3hQLElBQUk4UyxRQUFROVYsT0FDbENBLFFBQU84YixNQUFNOWIsTUFBUUEsTUFDM0IsT0FDTThiLE1BQU03VSxPQUNaNlUsTUFBTTRmLFdBQ1IsQ0FFQSxpQkFBYXEyQixHQUNYbGpELEdBQUdDLGNBQWNpMUIsTUFBTSxnQkFDekIsQ0FFQSx5QkFBT2l1QixDQUFvQkMsYUFDekIsSUFBSWp5RCxNQUtKLE9BQUlvRCxLQUFLb1AsT0FBT0MsT0FBT3cvQyxhQUFxQjd1RCxLQUFLb1AsT0FBT0MsT0FBT3cvQyxjQUUvRGp5RCxNQUFRb0QsS0FBS29QLE9BQU94UCxJQUFJaXZELGFBQ3BCanlELFFBSUpBLE1BQVEwRixPQUFPSixPQUFPbEMsS0FBS29QLE9BQU9DLFFBQVFqTixNQUFLcUQsR0FDekNBLEVBQUV6TSxLQUFLMFIsZ0JBQWtCbWtELFlBQVlua0QsZ0JBR3RDOU4sUUFFSEEsTUFBUW9ELEtBQUtvUCxPQUFPaE4sTUFBS2hELEdBQ25CQSxFQUFFcEcsS0FBSzBSLGdCQUFrQm1rRCxZQUFZbmtELGlCQUl6QzlOLE9BU0csTUFDVCxDQUVBLDZCQUFPc3BCLENBQXdCb2QsTUFDN0IsTUFBTWdmLFFBQVVoZixLQUFLNTRCLGNBRXJCLE9BQVE0M0MsU0FDTixJQUFLLE1BQ0gsTUFBTyxDQUNMbjhCLE1BQU9ubUIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxQkgsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxvQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTGltQixNQUFPbm1CLEtBQUtDLEtBQUtDLFNBQVMsY0FDMUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsd0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpbUIsTUFBT25tQixLQUFLQyxLQUFLQyxTQUFTLGNBQzFCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUU5QixJQUFLLE1BQ0gsTUFBTyxDQUNMaW1CLE1BQU9ubUIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxQkgsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxxQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTGltQixNQUFPbm1CLEtBQUtDLEtBQUtDLFNBQVMsY0FDMUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsc0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpbUIsTUFBT25tQixLQUFLQyxLQUFLQyxTQUFTLGNBQzFCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHdCQUU5QixJQUFLLE1BQ0gsTUFBTyxDQUNMaW1CLE1BQU9ubUIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxQkgsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxpQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTGltQixNQUFPbm1CLEtBQUtDLEtBQUtDLFNBQVMsY0FDMUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMscUJBRTlCLElBQUssT0FDSCxNQUFPLENBQ0xpbUIsTUFBT25tQixLQUFLQyxLQUFLQyxTQUFTLGFBQzFCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGNBRTlCLFFBQ0UsSUFBSyxNQUFPLENBQUVwSCxTQUFVd0osT0FBT3dLLFFBQzdCOU0sS0FBS3ZCLE9BQU8yZCxTQUFTMjNCLE1BQU1pSixVQUFVNTJCLGdCQUFnQkEsaUJBRXJELEdBQUlrOEIsVUFBWXRpRCxLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTXF0QixPQUFPemIsY0FDOUMsTUFBTyxDQUNMeWIsTUFBT25tQixLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTXF0QixPQUNoQ3BtQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTcEgsTUFBTWlILFFBSXRDLE9BQU8sS0FHYixDQUVBLHdCQUFPd3dCLENBQW1CeFgsWUFDeEIsR0FBMkIsTUFBdkJqYSxPQUFPaWEsWUFBcUIsT0FBT3ZDLFVBQVVzUCxnQkFBZ0JyUCxRQUNqRSxHQUEwQixpQkFBZnNDLFdBQXlCLE9BQU9BLFdBQzNDLElBQUt2YSxNQUFNSSxPQUFPbWEsYUFBYyxPQUFPbmEsT0FBT21hLFlBRTlDLE9BQVFBLFlBQ04sSUFBSyxJQUNILE9BQU92QyxVQUFVc1AsZ0JBQWdCQyxRQUNuQyxJQUFLLElBQ0gsT0FBT3ZQLFVBQVVzUCxnQkFBZ0JuUCxLQUNuQyxJQUFLLEtBQ0gsT0FBT0gsVUFBVXNQLGdCQUFnQmxaLFFBQ25DLElBQUssTUFDSCxPQUFPNEosVUFBVXNQLGdCQUFnQmxQLFNBQ25DLFFBQ0UsT0FBT0osVUFBVXNQLGdCQUFnQnJQLFFBRXZDLENBRUEsc0JBQU9xNEMsQ0FBaUJua0QsTUFBTzFMLE1BQU8rQyxRQUFVLENBQUMsR0FDL0MvQyxNQUFNRSxpQkFDTixNQUFNdVQsUUFBVXhNLFlBQVl5TSxhQUM1QixJQUFJL1YsTUFDQThWLFFBQVFnQixRQUFPOVcsTUFBUW9ELEtBQUtvUCxPQUFPQyxPQUFPcUQsUUFBUWdCLFFBQ2pEOVcsUUFBT0EsTUFBUW9ELEtBQUtvUCxPQUFPeFAsSUFBSThTLFFBQVE5VixRQUV2Q0EsTUFLTEEsTUFBTTQwQixXQUFXN21CLE1BQU8xTCxNQUFNc3lCLFNBQVV2dkIsU0FKdEN5SixHQUFHQyxjQUFjc0ssS0FBS2hXLEtBQUtDLEtBQUtDLFNBQVMsNkJBSzdDLENBRUEsdUJBQU82dUQsQ0FBa0J6bkMsT0FBUXJvQixPQUMvQkEsTUFBTUUsaUJBQ04sTUFBTXVULFFBQVV4TSxZQUFZeU0sYUFDNUIsSUFBSS9WLE1BRUosR0FESThWLFFBQVFnQixRQUFPOVcsTUFBUW9ELEtBQUtvUCxPQUFPQyxPQUFPcUQsUUFBUWdCLFNBQ2pEOVcsTUFDSCxHQUFJOFYsUUFBUXBELE9BQVNvRCxRQUFRZ0IsTUFBTyxDQUVsQyxNQUFNczdDLFVBQVlodkQsS0FBS29QLE9BQU94UCxJQUFJOFMsUUFBUTlWLE9BRXBDOFcsTUFEUTFULEtBQUt1UCxPQUFPM1AsSUFBSThTLFFBQVFwRCxPQUNsQkQsT0FBT3pQLElBQUk4UyxRQUFRZ0IsT0FNdkM5VyxNQUhtQixJQURBcXlELGlCQUFpQixTQUNqQixDQUFlRCxVQUFVbE4sU0FBVSxDQUNwRGwwQyxPQUFROEYsT0FHWixNQUFPOVcsTUFBUW9ELEtBQUtvUCxPQUFPeFAsSUFBSThTLFFBQVE5VixPQUdwQ0EsTUFLTEEsTUFBTTgwQixZQUFZcEssT0FBUXJvQixNQUFNc3lCLFVBSjlCOWxCLEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS0MsU0FBUyw2QkFLN0MsQ0FFQSx1QkFBYWd2RCxDQUFZakYsZUFBWTFwRCxFQUFXdEIsTUFBUSxZQUNoRHFMLGNBQWM2a0QsU0FBU2x3RCxNQUFPLENBQUVnckQsV0FDeEMsQ0FFQSxrQkFBT21GLENBQWFDLElBQUtybkQsS0FBTXNuRCxNQUM3QixHQUFrQixTQUFkdG5ELEtBQUtqSCxLQUFpQixPQUUxQixNQUFNNEgsS0FBT3k1QyxhQUFhcDZDLEtBQUszSCxLQUFNZ3ZELEtBRXJDLElBQUsxbUQsS0FDSCxPQUFPOEMsR0FBR0MsY0FBY3NLLEtBQ3RCaFcsS0FBS0MsS0FBS0MsU0FBUyw4QkFHdkIsR0FBb0IsV0FBZHlJLEtBQUs1SCxNQUFzQyxVQUFkNEgsS0FBSzVILEtBQ3RDLE9BQU8wSyxHQUFHQyxjQUFjc0ssS0FDdEJoVyxLQUFLQyxLQUFLQyxTQUFTLGdDQUl2QixJQUFJa3RELFFBQVUsR0FNZCxHQUprQixXQUFkemtELEtBQUs1SCxPQUNQcXNELFFBQVUsdUNBQXVDemtELEtBQUszUCxnQkFBZ0JnUCxLQUFLM0gsbUJBRzNELFVBQWRzSSxLQUFLNUgsS0FBa0IsQ0FDekIsR0FBSThHLFNBQVM0QyxVQUFVOUIsTUFDckIsT0FBTzhDLEdBQUdDLGNBQWNzSyxLQUN0QmhXLEtBQUtDLEtBQUtDLFNBQVMsMEJBR3ZCa3RELFFBQVUsc0NBQXNDemtELEtBQUszUCxnQkFBZ0JnUCxLQUFLM0gsaUJBQzVFLENBRUEsR0FBZ0IsS0FBWitzRCxRQUFnQixDQUVsQixNQUFNbUMsTUFBUXZ2RCxLQUFLd3ZELE9BQU8xSSxTQUFTMWtELE1BQ2pDeWpCLEdBQUtBLEVBQUU3c0IsT0FBUzJQLEtBQUszUCxNQUFRNnNCLEVBQUV1bkMsVUFBWUEsVUFFN0MsT0FBS21DLE9BV0x2dkQsS0FBS3NHLEtBQUttcEQsa0JBQWtCRixNQUFPRCxPQUM1QixJQVhMSSxNQUFNdjhDLE9BQU83UixRQUFRQyxNQUFNdU8sVUFBVSxDQUNuQzlXLEtBQU0yUCxLQUFLM1AsS0FDWCtILEtBQU0sU0FDTnFILElBQUtPLEtBQUtQLElBQ1ZnbEQsV0FDRXJqRCxNQUFLd2xELFFBQ1B2dkQsS0FBS3NHLEtBQUttcEQsa0JBQWtCRixNQUFPRCxLQUFJLEtBRWxDLEVBSVgsQ0FDQSxPQUFPLENBQ1QsQ0FFQSwyQkFBYUssQ0FBZ0J4eUMsY0FDckJuZCxLQUFLbUUsU0FBUzJHLElBQUksT0FBUSxxQkFBc0JxUyxRQUN0RDFSLEdBQUdDLGNBQWN6SSxLQUNma2EsT0FDSW5kLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ25CRixLQUFLQyxLQUFLQyxTQUFTLDBCQUV6QkYsS0FBS3FnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJ2ZixLQUFNLGVBRVJ1SixjQUFjc2xELGtCQUNoQixDQUVBLCtCQUFhQyxDQUFvQjF5QyxjQUN6Qm5kLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLHNCQUF1QnFTLFFBQ3ZEMVIsR0FBR0MsY0FBY3pJLEtBQ2ZrYSxPQUNJbmQsS0FBS0MsS0FBS0MsU0FBUyw0QkFDbkJGLEtBQUtDLEtBQUtDLFNBQVMsOEJBRXpCRixLQUFLcWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QnZmLEtBQU0sZUFFUnVKLGNBQWNzbEQsbUJBQ2R2VSxNQUFNNy9DLEtBQUsscUJBQXNCMmhCLE9BQ25DLENBRUEsc0JBQWEyeUMsR0FDWCxNQUFNaHJDLE1BQVE5a0IsS0FBSzhrQixNQUFNN3JCLFFBQU9xTixNQUFRQSxLQUFLN0MsU0FDdkMyTCxPQUFTcFAsS0FBS29QLE9BQ3BCLElBQUkyZ0QsYUFBZSxxR0FDVS92RCxLQUFLQyxLQUFLQyxTQUFTLDRCQUNoRCxNQUFNOHZELGVBQWlCbHJDLE1BQ3BCcGUsS0FBSXVmLEdBQUtBLEVBQUV6SCxXQUFXN04sS0FDdEIxWCxRQUFPMFgsU0FBYXBRLElBQVBvUSxLQUNWcy9DLGtCQUFvQjM2QyxPQUFPakcsT0FBT2tPLFdBQVc3VyxLQUFJZ04sT0FDOUNBLE1BQU05VyxNQUFNK1QsS0FJckJ2QixPQUFPaUwsU0FBUXpkLFFBQ2IsTUFBTXN6RCxTQUNIRCxrQkFBa0J2cUQsU0FBUzlJLE1BQU0rVCxLQUNoQ3EvQyxlQUFldHFELFNBQVM5SSxNQUFNK1QsTUFDaEMsVUFDRm8vQyxjQUFnQixrREFFY256RCxNQUFNK1QsV0FBVy9ULE1BQU0rVCxjQUFjL1QsTUFBTTVELFNBQVNrM0QsZ0NBQ3JFdHpELE1BQU0rVCxPQUFPL1QsTUFBTTVELHVCQUFJLElBSXRDLElBQUk0OUIsT0FBTyxDQUNUemxCLE1BQU8sR0FBR25SLEtBQUtDLEtBQUtDLFNBQVMsbUJBQzdCZ1QsUUFBUyxHQUFHbFQsS0FBS0MsS0FBS0MsU0FDcEIsd0JBQ0k2dkQsb0JBQ05sNUIsUUFBUyxDQUNQN3dCLFFBQVMsQ0FDUGpHLE1BQU8sR0FBR0MsS0FBS0MsS0FBS0MsU0FBUyxvQkFDN0I0MkIsU0FBVTl4QixhQUNSLE1BQU13aUIsUUFBVSxHQUNoQixJQUFJcVMsS0FBTSxFQUNWLE1BQU0vVSxNQUFRckksS0FBS3JhLEtBQUsscUJBQ3hCLElBQUssTUFBTWtFLFFBQVF3ZSxNQUNDLGtCQUFkeGUsS0FBS3ROLE1BQTRCc04sS0FBSzRwRCxVQUFTcjJCLEtBQU0sSUFDckR2ekIsS0FBSzRwRCxTQUFXcjJCLE1BQUtyUyxRQUFRMXRCLEtBQUt3TSxLQUFLcUssVUFFdkNyRyxjQUFjNmxELFVBQVUzb0MsUUFBTyxNQUkxQzltQixRQUFPLEVBQ1osQ0FFQSxzQkFBYXl2RCxDQUFXM29DLFNBQ3RCLElBQUtBLFFBQVFsa0IsT0FBUSxPQUNyQixNQUFNOEwsT0FBU3BQLEtBQUtvUCxPQUFPblcsUUFBTzJELE9BQVM0cUIsUUFBUTloQixTQUFTOUksTUFBTStULE1BQ2xFLElBQUl5L0MsWUFBYyxNQUFNcHdELEtBQUtDLEtBQUtDLFNBQVMsOEJBQzNDLElBQUssTUFBTXRELFNBQVN3UyxPQUNsQixHQUFJLENBQUMsWUFBYSxNQUFPLFlBQVkxSixTQUFTOUksTUFBTW1FLE1BQU8sQ0FDekQsSUFBSXN2RCxhQUFjLEVBQ2xCLElBQUssTUFBTTFuRCxRQUFRL0wsTUFBTWdVLE1BQ0wsV0FBZGpJLEtBQUs1SCxNQUNINEgsS0FBSzNQLE9BQVMsR0FBR2dILEtBQUtDLEtBQUtDLFNBQVMsd0JBQ3RDbXdELGFBQWMsR0FJcEIsTUFBTUMsa0JBQ0h0d0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQzNCaEQsTUFBTWs1QyxtQkFBbUIxK0MsS0FBSzBGLE9BQU9JLGdCQUNqQ3F6RCxnQkFBa0IzekQsTUFBTTZCLE9BQU9DLFFBQVErdEIsSUFBSWl5QixVQUMzQzhSLFFBQVU1ekQsTUFBTTZCLE9BQU9DLFFBQVFpMkMsR0FBRzc3QyxNQUNsQ3U4QyxNQUFRejRDLE1BQU02QixPQUFPQyxRQUFRaTJDLEdBQUdodkMsSUFDaEM4cUQsUUFBVTd6RCxNQUFNNkIsT0FBT0MsUUFBUXEyQyxHQUFHajhDLE1BQ2xDdzhDLE1BQVExNEMsTUFBTTZCLE9BQU9DLFFBQVFxMkMsR0FBR3B2QyxJQUNoQ25NLElBQU1vRCxNQUFNNkIsT0FBTzJuQixnQkFBZ0I1c0IsSUFBSVYsTUFFN0MsR0FEQXMzRCxhQUE0QixVQUFVeHpELE1BQU01RCxhQUN4Q3czRCxRQUFVbmIsTUFDWixJQUF5QixJQUFyQmliLGlCQUNGRixhQUVFLDRCQUE0QnB3RCxLQUFLQyxLQUFLQyxTQUNwQyxzQ0FFQyxDQUNMLElBQUl3d0QsV0FBYSxFQUNiMXdELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDRCQUM1Qjh3RCxXQUFhLElBRUssSUFBaEJMLGFBQ0ZLLGFBRUZBLFdBQWE1ckQsS0FBS2MsSUFBSThxRCxXQUFZcmIsTUFBUW1iLFNBRXhDSixhQURpQixJQUFmTSxXQUdBLG1DQUFtQzF3RCxLQUFLQyxLQUFLQyxTQUMzQyxnQ0FLRixtQ0FBbUNGLEtBQUtDLEtBQUt5VyxPQUMzQywyQkFDQSxDQUFFalAsT0FBUWlwRCxxQkFHaEI5ekQsTUFBTWdFLE9BQU8sQ0FDWCwwQkFDRWhFLE1BQU02QixPQUFPQyxRQUFRaTJDLEdBQUc3N0MsTUFBUTQzRCxZQUV0QyxDQUVFSCxnQkFBa0IsSUFDcEJILGFBRUUsbUNBQW1DcHdELEtBQUtDLEtBQUtDLFNBQzNDLHFDQUVKdEQsTUFBTWdFLE9BQU8sQ0FDWCwrQkFBZ0MsRUFDaEMsZ0NBQWlDa0UsS0FBS3VJLE1BQU16USxNQUFNNkIsT0FBT0MsUUFBUSt0QixJQUFJM3pCLE1BQVEsTUFHakYsTUFBTTYzRCxNQUFRLEVBQ2QsR0FBSUEsTUFBUSxHQUFLRixRQUFVbmIsTUFBTyxDQUNoQyxJQUFJc2IsWUFBY0QsTUFBUTdyRCxLQUFLeWlELEtBQUsvdEQsSUFBTSxLQUMxQ28zRCxZQUFjOXJELEtBQUtjLElBQUlnckQsWUFBYXRiLE1BQVFtYixTQUM1Q0wsYUFFRSxtQ0FBbUNwd0QsS0FBS0MsS0FBS3lXLE9BQzNDLGlDQUNJazZDLG1CQUNSaDBELE1BQU1nRSxPQUFPLENBQ1gsMEJBQ0VoRSxNQUFNNkIsT0FBT0MsUUFBUXEyQyxHQUFHajhDLE1BQVE4M0QsYUFFdEMsQ0FDRixDQUVGLE1BQU03cUQsU0FBVyxDQUNmTyxLQUFNdEcsS0FBS3NHLEtBQUtxSyxHQUNoQitCLFFBQVN4TSxZQUFZeU0sYUFDckJPLFFBQVNrOUMsWUFDVHJ2RCxLQUFNNlIsTUFBTUMsbUJBQW1CazZDLE9BRWpDN21ELFlBQVlpTixPQUFPcE4sU0FDckIsQ0FFQSx5QkFBYThxRCxDQUFjMXpDLGNBQ25CbmQsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsWUFBYXFTLFFBQzdDMVIsR0FBR0MsY0FBY3pJLEtBQ2ZrYSxPQUNJbmQsS0FBS0MsS0FBS0MsU0FBUyxzQkFDbkJGLEtBQUtDLEtBQUtDLFNBQVMsdUJBRTNCLENBRUEscUJBQWFpdkQsQ0FBVWx3RCxNQUFPK0MsUUFBVSxDQUFDLEdBRXZDLElBQUl5VixhQUFjc0IsV0FBWXVoQixpQkFBa0JDLHNCQURoRHY0QixRQUFRMHNELFVBQVkxc0QsUUFBUWlvRCxVQUU1QixJQUFJQSxVQUFZam9ELFFBQVFpb0QsVUFPeEIsUUFMSTFwRCxJQUFjeUIsUUFBUW9GLFdBQVVxUSxhQUFlN1ksT0FBT29ELFFBQVFvRixnQkFDOUQ3RyxJQUFjeUIsUUFBUStXLGFBQ3hCQSxXQUFhek8sY0FBY2ltQixrQkFBa0J2dUIsUUFBUStXLGNBR2xEOVosT0FBT3N5QixXQUFhdnZCLFFBQVFpbEIsWUFBYSxDQUM1QyxNQUFNMlosWUFBYzVLLFdBQVc3aUIsT0FBT25SLFNBQ2xDNCtCLFFBQ0ZucEIsYUFBZTdZLE9BQU9naUMsTUFBTWhoQyxJQUFJLGNBQ2hDbVosV0FBYW5hLE9BQU9naUMsTUFBTWhoQyxJQUFJLGVBQzlCcXFELFVBQVlyckQsT0FBT2dpQyxNQUFNaGhDLElBQUksY0FDN0IwNkIsaUJBQW1CMTdCLE9BQU9naUMsTUFBTWhoQyxJQUFJLHFCQUNwQzI2QixzQkFBd0IzN0IsT0FBT2dpQyxNQUFNaGhDLElBQUksMEJBRTdDLENBRUEsTUFBTXdQLE9BQVMsR0FFZixHQUFJcFAsS0FBS3NHLEtBQUsyRSxNQUFRcUssT0FBT2pHLE9BQU9rTyxXQUFXamEsT0FDN0MsSUFBSyxNQUFNb1EsU0FBUzRCLE9BQU9qRyxPQUFPa08sV0FDaENuTyxPQUFPdFYsS0FBSzRaLE1BQU05VyxNQUFNb1MsZUFFakJoUCxLQUFLc0csS0FBS2tZLFdBQ25CcFAsT0FBT3RWLEtBQUtrRyxLQUFLc0csS0FBS2tZLFVBQVV4UCxVQUdsQyxJQUFLLE1BQU04aEQsTUFBTTFoRCxPQUFRLENBQ3ZCLE1BQU1zSixNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU1qQixhQUFlQSxjQUFnQixFQUNyQ2lCLE1BQU1LLFdBQWFBLFlBQWN2QyxVQUFVc1AsZ0JBQWdCclAsUUFDM0RpQyxNQUFNTyxTQUFXZ3hDLFVBQ2pCdnhDLE1BQU00aEIsaUJBQW1CQSxpQkFDekI1aEIsTUFBTTZoQixzQkFBd0JBLHNCQUM5QjdoQixNQUFNOWIsTUFBUWswRCxTQUNScDRDLE1BQU03VSxPQUNaNlUsTUFBTTRmLFdBQ1IsQ0FFQSxJQUFLbHBCLE9BQU85TCxPQUFRLENBQ2xCLE1BQU1vVixNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU1qQixhQUFlQSxjQUFnQixFQUNyQ2lCLE1BQU1LLFdBQWFBLFlBQWN2QyxVQUFVc1AsZ0JBQWdCclAsUUFDM0RpQyxNQUFNTyxTQUFXZ3hDLFVBQ2pCdnhDLE1BQU00aEIsaUJBQW1CQSxpQkFDekI1aEIsTUFBTTZoQixzQkFBd0JBLDRCQUN4QjdoQixNQUFNN1UsT0FDWjZVLE1BQU00ZixXQUNSLENBQ0YsQ0FFQSx1QkFBT3MzQixHQUNMLEdBQUk1dkQsS0FBS3NHLEtBQUsyRSxLQUNaLElBQUssTUFBTTdMLEtBQUtZLEtBQUtvUCxPQUFPMDNDLFNBQ1YsY0FBWjFuRCxHQUFHMkIsTUFBd0IzQixHQUFHcUIsT0FBU3JCLEdBQUdxQixPQUFPc3dELFdBQ25EM3hELEVBQUV3QixPQUFPLENBQUUsdUJBQXVCLElBQ2xDeEIsRUFBRXNCLFFBQU8sU0FJYixJQUFLLE1BQU10QixLQUFLWSxLQUFLb1AsT0FBTzAzQyxTQUN0QjFuRCxFQUFFdThCLFVBQ0p2OEIsRUFBRXdCLE9BQU8sQ0FBRSx1QkFBdUIsSUFDbEN4QixFQUFFc0IsUUFBTyxHQUlqQixDQU9BLGlDQUFhZzFCLENBQXNCejJCLE1BQU8reEQsV0FBYSxRQUNyRCxHQUFJL3hELE1BQU11eEIsY0FBZSxNQUFPLEdBQ2hDLElBQ0UsTUFBTWlGLFNBQVdwa0IsS0FBS3VkLE1BQU0zdkIsTUFBTXd4QixhQUFhNkMsUUFBUSxlQUN2RCxHQUFzQixXQUFsQm1DLFNBQVMxMEIsTUFBcUIwMEIsU0FBU0QsZUFBaUJ3N0IsV0FBWSxDQUN0RSxNQUFNQyxhQUFlcm9ELFNBQVM2c0IsU0FBU3AxQixNQUN2QyxPQUFLNHdELE9BQ0VBLE9BQU9uSyxTQURNLEVBRXRCLENBQU8sR0FBSXJ4QixTQUFTMTBCLE9BQVNpd0QsV0FBWSxDQUN2QyxNQUFNcm9ELFdBQWFDLFNBQVM2c0IsU0FBU3AxQixNQUNyQyxPQUFLc0ksS0FDRSxDQUFDQSxNQURVLEVBRXBCLENBQ0UsTUFBTyxFQUVYLENBQUUsTUFBTzZFLEtBQ1AsTUFBTyxFQUNULENBQ0YsQ0FFQSw0QkFBYTRuQixDQUFpQndoQixNQUM1QixJQUNFLEdBQUlzYSxVQUFVQyxXQUFheEQsT0FBT3lELGdCQUNoQyxPQUFPRixVQUFVQyxVQUFVRSxVQUFVemEsTUFDaEMsQ0FDTCxNQUFNa0MsU0FBV3ZuQyxTQUFTQyxjQUFjLFlBUXhDLE9BUEFzbkMsU0FBU2hnRCxNQUFRODlDLEtBQ2pCa0MsU0FBUzdXLE1BQU1xdkIsU0FBVyxRQUMxQnhZLFNBQVM3VyxNQUFNK2IsS0FBTyxTQUN0QmxGLFNBQVM3VyxNQUFNNHJCLElBQU0sU0FDckJ0OEMsU0FBU21lLEtBQUs2OUIsWUFBWXpVLFVBQzFCQSxTQUFTeVksUUFDVHpZLFNBQVMxWixTQUNGLElBQUkxZ0IsU0FBUSxDQUFDaEIsUUFBUzh6QyxVQUMzQmpnRCxTQUFTa2dELFlBQVksUUFDakIvekMsVUFDQTh6QyxPQUNBLElBQUlqM0MsTUFBTXZhLEtBQUtDLEtBQUtDLFNBQVMsa0NBRWpDNDRDLFNBQVN0ekIsUUFBTyxJQUNma3NDLE9BQU1sa0QsS0FBTy9CLEdBQUdDLGNBQWN3VSxNQUFNMVMsTUFDekMsQ0FDRixDQUFFLE1BQU9BLEtBQ1AvQixHQUFHQyxjQUFjd1UsTUFBTWxnQixLQUFLQyxLQUFLQyxTQUFTLGdDQUM1QyxDQUNGLENBRUEsa0JBQU9xSyxDQUFhNEgsUUFFbEIsTUFBTXcvQyxJQUFNeC9DLE9BQU83TyxPQUNuQixJQUFJc3VELFFBQVUsR0FFZCxJQUFLLElBQUlsZCxRQUFTMXhCLEVBQUksRUFBR0EsRUFBSTJ1QyxNQUFPM3VDLEVBR2xDLEdBRkEweEIsUUFBVXZpQyxPQUFPMC9DLE9BQU83dUMsR0FFcEIweEIsU0FBVyxLQUFPQSxTQUFXLElBQ2YsT0FBWkEsU0FBZ0MsTUFBWkEsVUFDdEJrZCxTQUFXLE1BR2JBLFNBQVdsZCxRQUFRdGlDLFFBQVEsd0JBQXlCLGFBRXBELE9BQVFzaUMsU0FDTixJQUFLLEtBQ0hrZCxTQUFXLE1BQ1gsTUFFRixJQUFLLEtBQ0hBLFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixJQUFLLEtBQ0hBLFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsUUFDRUEsU0FBVyxNQUNYbGQsUUFBVUEsUUFBUW9kLFdBQVcsR0FBR3I5QyxTQUFTLElBQ3pDLElBQUssSUFBSXM5QyxFQUFJLElBQUtBLEdBQUtyZCxRQUFRcHhDLE9BQVFzdUQsU0FBVyxLQUNsREEsU0FBV2xkLFFBS25CLE9BQU9rZCxPQUNULENBRUEsZ0JBQU9JLENBQVcxOUMsSUFBSzI5QyxLQUFNbjVELE9BQzNCLE1BQU0yUSxNQUFRd29ELEtBQUs5aUQsTUFBTSxLQUN6QixJQUFJK2lELEVBQUk1OUMsSUFDUixHQUFJN0ssTUFBTW5HLE9BQVMsRUFDakIsSUFBSyxJQUFJMGYsRUFBSSxFQUFHQSxFQUFJdlosTUFBTW5HLE9BQVMsRUFBRzBmLElBQy9Ca3ZDLEVBQUV6b0QsTUFBTXVaLE1BQUtrdkMsRUFBRXpvRCxNQUFNdVosSUFBTSxDQUFDLEdBQ2pDa3ZDLEVBQUlBLEVBQUV6b0QsTUFBTXVaLElBSWhCa3ZDLEVBQUV6b0QsTUFBTUEsTUFBTW5HLE9BQVMsSUFBTXhLLEtBQy9CLENBRUEsZ0JBQU9xNUQsQ0FBVzc5QyxJQUFLMjlDLE1BQ3JCLE1BQU14b0QsTUFBUXdvRCxLQUFLOWlELE1BQU0sS0FDekIsSUFBSStpRCxFQUFJNTlDLElBQ1IsR0FBSTdLLE1BQU1uRyxPQUFTLEVBQ2pCLElBQUssSUFBSTBmLEVBQUksRUFBR0EsRUFBSXZaLE1BQU1uRyxPQUFTLEVBQUcwZixJQUFLLENBQ3pDLElBQUtrdkMsRUFBRXpvRCxNQUFNdVosSUFBSyxPQUNsQmt2QyxFQUFJQSxFQUFFem9ELE1BQU11WixHQUNkLENBR0YsT0FBT2t2QyxFQUFFem9ELE1BQU1BLE1BQU1uRyxPQUFTLEdBQ2hDLENBT0EsZ0JBQU9tUSxDQUFXcFQsTUFDaEIsSUFDSSt4RCxJQURBM29ELE1BQVFwSixLQUFLOE8sTUFBTSxLQUl2QixHQUFpQixlQUFiMUYsTUFBTSxHQUNSLE9BQU8sS0FPRixDQUVMLE1BQU80b0QsUUFBU0MsT0FBUzdvRCxNQUFNdEksTUFBTSxFQUFHLEdBQ3hDc0ksTUFBUUEsTUFBTXRJLE1BQU0sR0FFcEJpeEQsSUFEbUI5c0QsT0FBTytzRCxTQUFTcjZCLFdBQVd1NkIsU0FDN0IzeUQsSUFBSTB5RCxNQUN2QixDQUdBLEtBQU9GLEtBQU8zb0QsTUFBTW5HLE9BQVMsR0FBRyxDQUM5QixNQUFPMDFDLGFBQWN3WixZQUFjL29ELE1BQU10SSxNQUFNLEVBQUcsR0FDbERpeEQsSUFBTUEsSUFBSTNpRCxvQkFBb0J1cEMsYUFBY3daLFlBQzVDL29ELE1BQVFBLE1BQU10SSxNQUFNLEVBQ3RCLENBQ0EsT0FBT2l4RCxLQUFPLElBQ2hCLENBRUEseUJBQU81K0MsQ0FBb0JuVCxNQUN6QixRQUFJQSxLQUFLcUYsU0FBUyxhQUVwQixDQUVBLHFCQUFPNk4sQ0FBZ0JsVCxNQUNyQixNQUFNb3lELFlBQWMsQ0FBQyxRQUFTLFFBQVMsUUFBUyxPQUFRLGNBQ3hELElBQUssSUFBSXp2QyxFQUFJLEVBQUdBLEVBQUl5dkMsWUFBWW52RCxPQUFRMGYsSUFDdEMsR0FBSTNpQixLQUFLcUYsU0FBUytzRCxZQUFZenZDLElBQUssT0FBTyxFQUU1QyxPQUFPLENBQ1QsQ0FFQSxtQ0FBTzB2QyxDQUE4QkMsVUFDbkMsSUFBSUMsUUFBU2gyRCxNQXFCYixPQW5CRWcyRCxRQURFRCxTQUFTaFEsVUFDRGdRLFNBQVNoUSxlQUNlLElBQWxCZ1EsU0FBU3R5RCxLQUNmc3lELFNBQVN0eUQsS0FHakJzeUQsU0FBU3pqRCxTQUFXeWpELFNBQVMxakQsUUFDekIsU0FBUzBqRCxTQUFTempELGlCQUFpQnlqRCxTQUFTMWpELFVBQzVDMGpELFNBQVNoakQsU0FBV2dqRCxTQUFTOStDLFVBQVk4K0MsU0FBU2hpRCxHQUVwQyxVQUFsQmdpRCxTQUFTNXhELEtBQ1g2eEQsUUFBVUQsU0FBU3R5RCxLQUNWdXlELFVBQ1RoMkQsTUFBUTBOLGNBQWNnSixnQkFBZ0JzL0MsU0FDakNoMkQsT0FBMkIsU0FBbEIrMUQsU0FBUzV4RCxPQUFpQjZ4RCxRQUFVLE9BR2hEaDJELE9BQVNnMkQsVUFBWWgyRCxNQUFNeUQsT0FDN0J1eUQsUUFBVWgyRCxNQUFNeUQsTUFFWHV5RCxPQUNULENBRUEseUJBQU9DLENBQW9CdDBELEtBQ3pCLElBQUtBLElBQUssT0FBTyxLQUVqQixHQUFJK0wsY0FBY2lKLGVBQWVoVixLQUMvQixPQUFJK0wsY0FBY2tKLG1CQUFtQmpWLEtBQWFxSyxTQUFTckssS0FDcEQrTCxjQUFjbUosVUFBVWxWLEtBSWpDLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FFckIsTUFBT3dKLFFBQVNELFNBQVcxUSxJQUFJNFEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUNGLE9BQU9sUCxLQUFLb1AsT0FBT0MsT0FBT0osU0FFNUIsTUFBTUssTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUFPLEtBQ3ZCLE1BQU1rRSxNQUFRLElBQUloRSxNQUFNRixXQUV4QixPQURLa0UsTUFBTXBFLFFBQU9vRSxNQUFNcEUsTUFBUWhPLFFBQVFDLE1BQU11TyxVQUFVUixRQUNqRG9FLEtBQ1QsQ0FFQSxPQUFPMVQsS0FBS29QLE9BQU94UCxJQUFJckIsTUFBUSxJQUNqQyxDQUVBLHNCQUFPK1UsQ0FBaUIvVSxLQUN0QixNQUFNNnpELElBQU05bkQsY0FBY3VvRCxtQkFBbUJ0MEQsS0FDN0MsT0FBSzZ6RCxJQUNEQSxJQUFJeDFELE1BQWN3MUQsSUFBSXgxRCxNQUNJLGFBQTFCdzFELElBQUlycUQsYUFBYS9PLEtBQTRCbzVELElBQzFDLEtBSFUsSUFJbkIsQ0FNQSxvREFBYVUsR0FDWCxJQUFJQyxXQUFhL3lELEtBQUtDLEtBQUtDLFNBQVMsaUNBQ2pCLGtDQUFmNnlELGFBQ0ZBLFdBQWEsdUJBRWYsSUFBSUMseUJBQTJCaHpELEtBQUtpekQsUUFBUTd3RCxNQUMxQ3U1QyxPQUFTQSxNQUFNM2lELE9BQVMrNUQsWUFBNkIsVUFBZnBYLE1BQU01NkMsT0FnQjlDLE9BYkVpeUQsaUNBSUFBLCtCQUFpQ0UsT0FBTy8vQyxPQUFPLENBQzdDbmEsS0FBTSs1RCxXQUNOaHlELEtBQU0sUUFDTjZNLE9BQVEsT0FFVm5DLEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBS0MsU0FBUywwQ0FHaEI4eUQsd0JBQ1QsQ0FXQSxzQkFBYUcsQ0FDWHB5RCxLQUNBL0gsTUFDQSxPQUFXLEtBQUksT0FBVyxHQUFFLGFBQWdCLEdBQVUsQ0FBQyxHQUV2RCxJQUFJZ2hELFNBQVcsS0FDZmhoRCxLQUFPQSxLQUFLNGdELG9CQUNaLElBQUssSUFBSXNZLEVBQUksRUFBR2tCLEdBQUtwTyxPQUFPMWhELE9BQVE0dUQsRUFBSWtCLEdBQUlsQixJQUMxQyxPQUFRbE4sT0FBTzczQyxVQUFVK2tELEVBQUdBLEVBQUksSUFDOUIsSUFBSyxJQU1ILEdBTEFsWSxTQUFXaDZDLEtBQUs0USxNQUFNeE8sTUFDcEJ1RyxNQUFRQSxLQUFLNUgsT0FBU0EsTUFDcEI0SCxLQUFLM1AsS0FBSzBSLGdCQUFrQjFSLE9BQ2hCLE9BQVhlLFFBQW1CNE8sS0FBS2xLLE9BQU84SyxXQUFXeFAsU0FBV0EsVUFFdERpZ0QsU0FDRixPQUFPQSxTQUVULE1BQ0YsSUFBSyxJQUNMLElBQUssSUFDTCxJQUFLLElBQ0gsSUFBSyxNQUFNN29CLFFBQVFueEIsS0FBS29oRCxNQUN0QixHQUN5QixTQUF2Qmp3QixLQUFLa3dCLFNBQVN0Z0QsT0FDRSxNQUFkaWtELE9BQU9rTixJQUF3QyxVQUExQi9nQyxLQUFLa3dCLFNBQVNnUyxTQUNwQixNQUFkck8sT0FBT2tOLElBQXdDLFNBQTFCL2dDLEtBQUtrd0IsU0FBU2dTLFNBQ3JCLE1BQWRyTyxPQUFPa04sS0FDTCxDQUFDLFFBQVMsUUFBUXhzRCxTQUFTeXJCLEtBQUtrd0IsU0FBU2dTLFVBQzlDLENBUUEsR0FOQXJaLGdCQUR3QjdvQixLQUFLbXdCLGdCQUNSbC9DLE1BQ25CdUcsTUFDRUEsS0FBSzVILE9BQVNBLE1BQ2Q0SCxLQUFLM1AsS0FBSzBSLGdCQUFrQjFSLE9BQ2hCLE9BQVhlLFFBQW1CNE8sS0FBS2xLLE9BQU84SyxXQUFXeFAsU0FBV0EsVUFFdERpZ0QsU0FDRixPQUFPQSxRQUVYLEVBS1IsR0FBSXNaLGFBQXdCLFVBQVR2eUQsS0FBa0IsQ0FDbkMsTUFBTXdILE1BQVF2UCxLQUFLdVAsTUFBTSwwQkFDekIsR0FBSUEsTUFDRixhQUFhK0IsY0FBYzZvRCxVQUN6QnB5RCxLQUNBd0gsTUFBTSxHQUFLLE1BQVFBLE1BQU0sR0FDekIsQ0FBRXhPLE9BQVFpckQsUUFHaEIsQ0FDRixDQUVBLGtCQUFPdU8sQ0FBYTE2RCxHQUNsQixJQUFLQSxFQUNILE1BQU8sR0FFVCxNQUFNMFAsTUFBUTFQLEVBQUUwUCxNQUFNLHNFQUV0QixPQUFLQSxNQUlFQSxNQUFNeEIsS0FBSyxLQUFLMkQsY0FIZCxFQUlYLENBRUEsb0JBQU9tRSxDQUFlelAsRUFBR3dqQixHQUN2QixPQUFPeGpCLEVBQUVwRyxLQUNOdzZELFVBQVUsT0FDVnBoRCxRQUFRLG1CQUFvQixJQUM1QnduQyxvQkFDQXNFLGNBQ0N0N0IsRUFBRTVwQixLQUNDdzZELFVBQVUsT0FDVnBoRCxRQUFRLG1CQUFvQixJQUM1QnduQyxvQkFFVCxDQUVBLG1CQUFPdDZCLEdBQ0wsTUFBTW0wQyxRQUFVenpELEtBQUs4a0IsTUFBTTdyQixRQUFPZ3RCLEdBQUtBLEVBQUV4aUIsUUFBVXdpQixFQUFFaGIsTUFBUWdiLEVBQUV0VixLQUFPM1EsS0FBS3NHLEtBQUtxSyxLQUNoRixPQUFROGlELFFBQVFud0QsUUFDZCxLQUFLLEVBRUgsT0FEQW1JLEdBQUdDLGNBQWN3VSxNQUFNLDhCQUErQixDQUFFaGdCLFVBQVUsS0FDM0QsRUFDVCxLQUFLLEVBQ0gsT0FBT3V6RCxRQUFRLEdBQUc5aUQsR0FFdEIsT0FBTzhpRCxRQUFRM3VELEtBQUt1SSxNQUFNdkksS0FBS2luRCxTQUFXMEgsUUFBUW53RCxTQUFTcU4sRUFDN0QsRUMzN0JLLE1BQU10SCxvQkFBb0IyUyxnQkFDL0IseUJBQVdDLEdBQ1QsT0FBTzNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxTQUFVLGlCQUM1QkMsU0FBVSxnREFDVkUsTUFBTyxJQUNQQyxPQUFRLE9BQ1JwTCxNQUFPLHVCQUNQa0wsZUFBZSxFQUNmcTNDLGVBQWUsRUFDZkMsZ0JBQWdCLEdBRXBCLENBRUEsYUFBTXJnQyxHQUNKLE1BQU1DLFVBQVl4MEIsTUFBTXUwQixVQUV4QkMsVUFBVXFnQyxtQkFBcUJ0dUQsT0FBT3N1RCxtQkFFdENseEQsS0FBS1YsUUFBUTZ4RCxTQUFXbnhELEtBQUtzUixPQUFPdlQsTUFBTWttQixXQUUxQzRNLFVBQVV1Z0MsVUFBWTl6RCxLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNb3VDLFFBQVFyeEQsS0FBS3NSLFFBQ3pEdWYsVUFBVXlnQyxTQUFXaDBELEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU1zdUMsVUFBVXZ4RCxLQUFLc1IsUUFFMUR1ZixVQUFVNmdCLFVBQVkxeEMsS0FBS3NSLE9BQU9wUyxPQUFPd0MsTUFBTWd3QyxVQUUvQzdnQixVQUFVNWlCLEdBQUs0aUIsVUFBVTZnQixXQUFXempDLElBQU0sR0FDMUM0aUIsVUFBVTJnQyxLQUFPM2dDLFVBQVU2Z0IsV0FBVzhmLE1BQVFsMEQsS0FBS0MsS0FBS2kwRCxLQUN4RDNnQyxVQUFVNGhCLFNBQVc1aEIsVUFBVTZnQixXQUFXZSxVQUFZLEVBRXRENWhCLFVBQVVucUIsS0FBTyxHQUNqQixJQUFLLE1BQU83SyxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRMVYsS0FBS2dTLE1BQzdDbXFCLFVBQVVucUIsS0FBS3RQLEtBQUssQ0FDbEI2VyxHQUFJcFMsSUFDSnZGLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTcEgsT0FDekJxN0QsV0FBc0QsS0FBMUM1Z0MsVUFBVTZnQixXQUFXaHJDLE1BQVEsQ0FBQyxHQUFHN0ssT0FHakRnMUIsVUFBVW5xQixLQUFLd0YsS0FBS3RFLGNBQWN1RSxlQUVsQyxNQUFNdWxELFVBQVk5eUQsUUFBUUMsTUFBTTh5RCxjQUFjcjBELEtBQUtDLEtBQUtxMEQsYUFBYWx3RCxLQUFLbXdELFVBQVU5dEQsTUFBUSxDQUFDLEdBQ3ZGK3RELE9BQVMsSUFBSW5xRCxPQUFPLElBQU1DLGNBQWNDLFlBQVlncEIsVUFBVXlnQyxXQUNwRXpnQyxVQUFVa2hDLGFBQWVueUQsT0FBT21FLEtBQUsydEQsV0FBVzFsRCxRQUFPLENBQUM0RixJQUFLM0MsS0FDdkRBLEVBQUVwSixNQUFNaXNELFNBQ1ZsZ0QsSUFBSXhhLEtBQUssQ0FBRTZYLEVBQUczWSxLQUFNbzdELFVBQVV6aUQsS0FFekIyQyxNQUNOLElBQUkxRixLQUFLdEUsY0FBY3VFLGVBRTFCMGtCLFVBQVVtaEMsZ0JBQWlELElBQTVCTixVQUFVN2dDLFVBQVU1aUIsSUFDbkQsTUFBTXBJLE1BQVFnckIsVUFBVTVpQixHQUFHcEksTUFBTSwrQkFHakMsR0FGQWdyQixVQUFVb2hDLFVBQWFwc0QsWUFBNkIsSUFBYkEsTUFBTSxHQUFxQkEsTUFBTSxHQUFLLEdBRXpFZ3JCLFVBQVU1aUIsSUFBTTRpQixVQUFVMmdDLEtBQU0sQ0FFbEMsTUFBTVUscUJBQXVCNTBELEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU1rdkMsYUFBYSxDQUM5RGx2QyxNQUFPNE4sVUFBVTVpQixHQUNqQnVqRCxLQUFNM2dDLFVBQVUyZ0MsS0FDaEJZLE1BQU8sVUFFSEMsU0FBVyxDQUFDLEVBQ1pDLG9CQUFzQixDQUFDLEVBQzdCemhDLFVBQVUwaEMsd0JBQTBCdjJDLFFBQVFtYixJQUFJKzZCLGVBQWVsdUQsS0FBSTFCLE1BQU9wTSxJQUNwRUEsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsS0FDekI5RyxPQUFPd0ssUUFBUWxVLEVBQUVnSixNQUFNd0MsS0FBS2d3QyxVQUFVaHJDLE1BQU1uUSxRQUFPaUssR0FBS0EsRUFBRSxLQUFJd0QsS0FBSXhELElBQzNEWixPQUFPQyxVQUFVQyxlQUFlaEgsS0FBS3c1RCxvQkFBcUJwOEQsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVlLFNBQVcsSUFBTWp5QyxFQUFFLE1BQ3ZHOHhELG9CQUFvQnA4RCxFQUFFZ0osTUFBTXdDLEtBQUtnd0MsVUFBVWUsU0FBVyxJQUFNanlDLEVBQUUsSUFBTSxHQUV0RTh4RCxvQkFBb0JwOEQsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVlLFNBQVcsSUFBTWp5QyxFQUFFLE9BQ3ZELEtBR1Q4eEQsb0JBQW9CcDhELEVBQUVnSixNQUFNd0MsS0FBS2d3QyxVQUFVZSxTQUFXLE1BQVEsRUFFaEUsTUFBTS9yQyxLQUFReFEsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsS0FBTzlHLE9BQU93SyxRQUFRbFUsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsTUFBTW5RLFFBQU9pSyxHQUFLQSxFQUFFLEtBQUl3RCxLQUFJeEQsR0FBS0EsRUFBRSxLQUFJMEwsT0FBUyxHQUNsSSxJQUFLLE1BQU00ckMsT0FBT3B4QyxLQUNoQjJyRCxTQUFTdmEsS0FBT3BqRCxLQUFLZ1MsS0FBS294QyxNQUFRLElBRXBDLE1BQU8sQ0FDTHB4QyxLQUFNQSxLQUFLc0YsUUFBTyxTQUFVbXJCLElBQUs2YSxTQUUvQixPQURBN2EsSUFBSTZhLFVBQVcsRUFDUjdhLEdBQ1QsR0FBRyxDQUFDLEdBQ0pzYixTQUFVdjhDLEVBQUVnSixNQUFNd0MsS0FBS2d3QyxVQUFVZSxTQUNqQytlLEtBQU10N0QsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVU4ZixNQUFRLEtBQ3JDOWlDLFdBQVluaEIsV0FBV0MsV0FBV3RYLEVBQUV3NEIsS0FBTSxDQUFFcHNCLE9BQU8sSUFDbkRpc0QsT0FBUXI0RCxHQUFHcTRELFFBQVFqNEQsS0FDckIsS0FFRXNKLE9BQU93SyxRQUFRa29ELHFCQUFxQi83RCxRQUFPczVCLEdBQUtBLEVBQUUsR0FBSyxJQUFHanZCLE9BQVMsSUFDckVpd0IsVUFBVTJoQyw0QkFBNkIsR0FFekMzaEMsVUFBVTRoQyxnQkFBa0JQLGVBQWV0eEQsUUFBVSxFQUVyRCxNQUFNOHhELDBCQUE0QnAxRCxLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNa3ZDLGFBQWEsQ0FDbkVsdkMsTUFBTzROLFVBQVU1aUIsR0FDakJ1akQsS0FBTTNnQyxVQUFVMmdDLEtBQ2hCWSxNQUFPLGdCQUVITyx5QkFBMkIsQ0FBQyxFQUNsQzloQyxVQUFVK2hDLDZCQUErQjUyQyxRQUFRbWIsSUFBSXU3QixvQkFBb0IxdUQsS0FBSTFCLE1BQU9wTSxJQUM5RUEsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsS0FDekI5RyxPQUFPd0ssUUFBUWxVLEVBQUVnSixNQUFNd0MsS0FBS2d3QyxVQUFVaHJDLE1BQU1uUSxRQUFPaUssR0FBS0EsRUFBRSxLQUFJd0QsS0FBSXhELElBQzNEWixPQUFPQyxVQUFVQyxlQUFlaEgsS0FBSzY1RCx5QkFBMEJ6OEQsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVlLFNBQVcsSUFBTWp5QyxFQUFFLE1BQzVHbXlELHlCQUF5Qno4RCxFQUFFZ0osTUFBTXdDLEtBQUtnd0MsVUFBVWUsU0FBVyxJQUFNanlDLEVBQUUsSUFBTSxHQUUzRW15RCx5QkFBeUJ6OEQsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVlLFNBQVcsSUFBTWp5QyxFQUFFLE9BQzVELEtBR1RteUQseUJBQXlCejhELEVBQUVnSixNQUFNd0MsS0FBS2d3QyxVQUFVZSxTQUFXLE1BQVEsRUFFckUsTUFBTS9yQyxLQUFReFEsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsS0FBTzlHLE9BQU93SyxRQUFRbFUsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsTUFBTW5RLFFBQU9pSyxHQUFLQSxFQUFFLEtBQUl3RCxLQUFJeEQsR0FBS0EsRUFBRSxLQUFJMEwsT0FBUyxHQUNsSSxJQUFLLE1BQU00ckMsT0FBT3B4QyxLQUNoQjJyRCxTQUFTdmEsS0FBT3BqRCxLQUFLZ1MsS0FBS294QyxNQUFRLElBRXBDLE1BQU8sQ0FDTHB4QyxLQUFNQSxLQUFLc0YsUUFBTyxTQUFVbXJCLElBQUs2YSxTQUUvQixPQURBN2EsSUFBSTZhLFVBQVcsRUFDUjdhLEdBQ1QsR0FBRyxDQUFDLEdBQ0pzYixTQUFVdjhDLEVBQUVnSixNQUFNd0MsS0FBS2d3QyxVQUFVZSxTQUNqQytlLEtBQU10N0QsRUFBRWdKLE1BQU13QyxLQUFLZ3dDLFVBQVU4ZixNQUFRLEtBQ3JDOWlDLFdBQVluaEIsV0FBV0MsV0FBV3RYLEVBQUV3NEIsS0FBTSxDQUFFcHNCLE9BQU8sSUFDbkRpc0QsT0FBUXI0RCxHQUFHcTRELFFBQVFqNEQsTUFBUSxHQUM3QixLQUVFc0osT0FBT3dLLFFBQVF1b0QsMEJBQTBCcDhELFFBQU9zNUIsR0FBS0EsRUFBRSxHQUFLLElBQUdqdkIsT0FBUyxJQUMxRWl3QixVQUFVZ2lDLGlDQUFrQyxHQUU5Q2hpQyxVQUFVaWlDLHFCQUF1Qkosb0JBQW9COXhELFFBQVUsRUFDL0Rpd0IsVUFBVXdoQyxTQUFXLEdBQ3JCLElBQUssTUFBT3gyRCxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRaW9ELFVBQ3hDeGhDLFVBQVV3aEMsU0FBU2o3RCxLQUFLLENBQ3RCNlcsR0FBSXBTLElBQ0p2RixLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBU3BILFNBRzdCeTZCLFVBQVV3aEMsU0FBU25tRCxLQUFLdEUsY0FBY3VFLGNBQ3hDLE1BQ0Uwa0IsVUFBVStoQyx1QkFBeUIsR0FDbkMvaEMsVUFBVTBoQyxrQkFBb0IsR0FDOUIxaEMsVUFBVTRoQyxnQkFBa0IsRUFDNUI1aEMsVUFBVWlpQyxxQkFBdUIsRUFDakNqaUMsVUFBVTJoQyw0QkFBNkIsRUFDdkMzaEMsVUFBVWdpQyxpQ0FBa0MsRUFFOUMsT0FBT2hpQyxTQUNULENBRUEsaUJBQUEvVyxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUV4QkEsS0FBS3JhLEtBQUssdUJBQXVCK3hCLE9BQU0sU0FBVWp4QixHQUMvQ29ILGNBQWM4cUIsZ0JBQWdCbEgsRUFBRXhyQixNQUFNK3lELFNBQVMsU0FBUzN4QixNQUMxRCxJQUVLcGhDLEtBQUtzUixPQUFPdlQsTUFBTWttQixhQUV2QmxLLEtBQUtyYSxLQUFLLGtCQUFrQit4QixNQUFNenhCLEtBQUtnekQsZUFBZTk1RCxLQUFLOEcsT0FFM0QrWixLQUFLcmEsS0FBSyx3QkFBd0I5RCxRQUFPLFNBQVU0RSxHQUNqRCxNQUFNb1IsSUFBTTRaLEVBQUV4ckIsTUFDUjh4RCxPQUFTbGdELElBQUl0TSxLQUFLLFVBQ3hCLElBQUlsUCxNQUFRd2IsSUFBSXd2QixNQUNGLEtBQVZockMsUUFDRkEsTUFBUTA3RCxPQUFTbHFELGNBQWNpcEQsWUFBWXo2RCxRQUU3QzJqQixLQUFLcmEsS0FBSyxrQkFBa0IwaEMsSUFBSWhyQyxPQUFPcW5DLFFBQVEsU0FDakQsSUFFQTFqQixLQUFLcmEsS0FBSyxzQkFBc0I5RCxRQUFPLFNBQVU0RSxHQUMvQyxNQUFNb1IsSUFBTTRaLEVBQUV4ckIsTUFDZCtaLEtBQUtyYSxLQUFLLGtCQUFrQjBoQyxJQUFJeHZCLElBQUl3dkIsTUFDdEMsSUFFQXJuQixLQUFLcmEsS0FBSyxpQkFBaUIreEIsT0FBTW52QixlQUFnQjlCLEdBQy9DQSxFQUFFL0QsaUJBQ0YsTUFDTXcyRCxNQURNem5DLEVBQUV4ckIsTUFDSXNGLEtBQUssU0FDdkJ5VSxLQUFLcmEsS0FBSyxrQkFBa0IwaEMsSUFBSTZ4QixPQUFPeDFCLFFBQVEsU0FDakQsSUFDRixDQUVBLHNCQUFhNzJCLENBQVdpSSxTQUFVdkksWUFDaEMsR0FBc0IsVUFBbEJ1SSxTQUFTeFEsS0FBa0IsQ0FFN0IsTUFBTUgsT0FBUyxDQUNiLENBQUNvSSxhQUFhLEdBRWhCLFFBQXFELElBQTFDdUksU0FBUzNQLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsS0FDMUMsSUFBSyxNQUFPN0ssT0FBUStELE9BQU93SyxRQUFReUUsU0FBUzNQLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsTUFDM0Q3SyxNQUFReUssYUFDVnBJLE9BQU8sS0FBT3JDLEtBQU8sWUFJckJnVCxTQUFTM1EsT0FBTyxDQUNwQiw0QkFBNkJBLFFBRWpDLFdBQTBFLElBQXhEMlEsU0FBUzNQLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsT0FBT0osaUJBQ0gsSUFBMUN1SSxTQUFTM1AsT0FBT3dDLE1BQU1nd0MsV0FBV2hyQyxXQUNwQ21JLFNBQVMzUSxPQUFPLENBQ3BCLDRCQUE2QixDQUMzQixDQUFDb0ksYUFBYSxXQUladUksU0FBUzNRLE9BQU8sQ0FDcEIsQ0FBQyw2QkFBNkJvSSxlQUFlLFVBSTNDdUksU0FBUzNRLE9BQU8sQ0FDcEIsQ0FBQywrQkFBK0JvSSxjQUFlLE1BR3JELENBRUEsb0JBQU0wc0QsQ0FBZ0J6MkQsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU02SixXQUFhL0osTUFBTUksY0FBY0ksUUFBUXd5QyxlQUN6QzVvQyxZQUFZQyxVQUFVNUcsS0FBS3NSLE9BQVFoTCxZQUN6Q3RHLEtBQUtoQyxRQUNQLENBRUEsbUJBQU1tMEIsQ0FBZTUxQixNQUFPNjFCLFVBQzFCLE1BQU1ua0IsR0FBS21rQixTQUFTbmtCLElBQU0sU0FDcEJqTyxLQUFLc1IsT0FBT3BULE9BQU8sQ0FDdkIsMEJBQTJCK1AsR0FDM0IsNEJBQTZCbWtCLFNBQVNvL0IsTUFBUWwwRCxLQUFLQyxLQUFLaTBELEtBQ3hELGdDQUFpQ3AvQixTQUFTcWdCLFVBQVksRUFDdEQsNEJBQThCenlDLEtBQUtzUixPQUFPcFMsT0FBT3dDLE1BQU1nd0MsV0FBV2hyQyxNQUFRLENBQUMsSUFFN0UsTUFBTXFULEtBQU95UixFQUFFeHJCLEtBQUtzUixPQUFPdlQsTUFBTXdULFNBQVM3UixLQUFLLHVIQUMzQ3FhLEtBQUtuWixRQUNQbVosS0FBS201QyxJQUFJLENBQ1BDLE1BQVFsbEQsR0FBSyxvQ0FBc0MsUUFHdkRqTyxLQUFLaEMsUUFDUCxFQ2xQSyxTQUFTbzFELDBCQUEyQkMsY0FBZXQxRCxPQUN4RCxHQUFJVCxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsTUFBTStxRCxXQUFhdjFELE1BQU11VCxPQUFPcFMsT0FBT3dDLE1BQU1nd0MsVUFFdkM2aEIsa0JBQW9CLENBQ3hCMXVELFdBRmtDLElBQWZ5dUQsaUJBQXVELElBQWxCQSxXQUFXcmxELElBQXdDLEtBQWxCcWxELFdBQVdybEQsR0FFckYsc0JBQXdCLHdCQUN2QzVRLE1BQU8sb0JBQ1BJLEtBQU0scUJBQ04rMUQsUUFBUyxLQUNQLElBQUk3c0QsWUFBWTVJLE1BQU11VCxPQUFRLENBQUMsR0FBR3RULFFBQU8sRUFBTSxDQUFFNndELE9BQU8sR0FBTSxHQUc1RDRFLGdCQUFrQkosY0FBY3p5RCxPQUN0Q3l5RCxjQUFjbDlCLE9BQU9zOUIsZ0JBQWtCLEVBQUcsRUFBR0Ysa0JBQy9DLENBQ0YsQ0NqQk8sTUFBTUcsZ0JBQ1gsSUFBQXg2RCxDQUFNeTZELEtBQU01NUMsS0FBTXFhLFVBQ2hCcDBCLEtBQUs0ekQsVUFBWXgvQixTQUNqQnAwQixLQUFLNnpELE1BQVE5NUMsS0FDYi9aLEtBQUs4ekQsTUFBUUgsS0FDYixJQUNFLE1BQU1JLFlBQWNoNkMsS0FBS3JhLEtBQUssc0JBQXNCaTBELEtBQUsxbEQsT0FDekQsR0FBMkIsSUFBdkI4bEQsWUFBWW56RCxPQUFjLE9BQzlCbXpELFlBQVlDLFlBQVloMEQsS0FBS2kwRCxlQUFlLzZELEtBQUs4RyxPQUNqRCxNQUFNazBELFlBQWNSLGdCQUFnQlMsV0FBV1IsTUFDL0NPLFlBQVlsNkMsR0FBRyxRQUNiLGVBQ0FoYSxLQUFLbzBELGNBQWNsN0QsS0FBSzhHLE9BRUQsSUFBckJBLEtBQUsyekQsS0FBSy95RCxPQUFjWixLQUFLMnpELEtBQUt6MEIsWUFBWWcxQixhQUM3Q2wwRCxLQUFLcTBELGNBQWMzakIsT0FBT3dqQixZQUNqQyxDQUFFLE1BQU8xMkMsT0FDUHZTLFFBQVF1UyxNQUFNQSxNQUNoQixDQUNGLENBRUEsaUJBQUk2MkMsR0FDRixJQUFJQSxjQUFnQnIwRCxLQUFLNnpELE1BQU1uMEQsS0FBSyxtQkFLcEMsT0FKNkIsSUFBekIyMEQsY0FBY3p6RCxTQUNoQlosS0FBSzZ6RCxNQUFNbmpCLE9BQU8sc0NBQ2xCMmpCLGNBQWdCcjBELEtBQUs2ekQsTUFBTW4wRCxLQUFLLG9CQUUzQjIwRCxhQUNULENBRUEsUUFBSVYsR0FHRixPQUFPM3pELEtBQUtxMEQsY0FBYzMwRCxLQUFLLHlCQUF5Qk0sS0FBSzh6RCxNQUFNN2xELEtBQ3JFLENBRUEsYUFBQW1tRCxDQUFlNzNELE9BR2IsT0FBT3lELEtBQUs0ekQsVUFBVXIzRCxNQUFPeUQsS0FBSytrQixPQUNwQyxDQUVBLGVBQU91dkMsR0FDa0I5b0MsRUFBRSxRQUFROXJCLEtBQUssbUJBQ1RBLEtBQUsseUJBQzVCNjBELE1BQUssU0FBVWowQyxFQUFHNkMsR0FBS0EsRUFBRW9jLE1BQU1pMUIsV0FBYSxRQUFTLEdBRTdELENBRUEsY0FBQVAsQ0FBZ0IxM0QsT0FDZEEsTUFBTUUsZ0JBQWUsR0FDckJpM0QsZ0JBQWdCWSxXQUNoQixNQUFNdnZDLE9BQVN4b0IsT0FBT0ksY0FFdEIsR0FEQXFELEtBQUsra0IsT0FBU0EsUUFDVEEsT0FBUSxPQUNiLE1BQU0wdkMsU0FBVzF2QyxPQUFPaG9CLFNBQVMyM0QsWUFDakMsR0FBSUQsV0FBYXowRCxLQUFLOHpELE1BQU03bEQsR0FBSSxDQUM5QixNQUFNMG1ELFFBQVUzMEQsS0FBSzJ6RCxLQUNyQixHQUFJZ0IsUUFBUS96RCxPQUFTLEVBQUcsQ0FDdEIsTUFBTWcwRCxRQUFVRCxRQUFRajFELEtBQUssYUFDN0IsSUFBSTQ3QyxLQUFPLytDLE1BQU1zNEQsUUFDYjFKLElBQU01dUQsTUFBTXU0RCxRQUNoQixNQUFNQyxXQUFhSixRQUFRSyxjQUNyQkMsVUFBWU4sUUFBUU8sYUFDdEJqSyxPQUFPSSxZQUFjMEosV0FBYTVKLE1BQ3BDQSxLQUFZNEosWUFFVjlKLE9BQU9DLFdBQWErSixVQUFZM1osT0FDbENBLEtBQU8yUCxPQUFPQyxXQUFhK0osV0FFekJMLFFBQVFoMEQsT0FBUyxJQUNmcXFELE9BQU9DLFdBQWErSixVQUFZM1osS0FBT3NaLFFBQVFNLGFBQ2pETixRQUFRMUIsSUFBSSxDQUNWM1gsTUFBVTBaLFVBQVksRUFBZixLQUNQM1osS0FBTSxLQUdSc1osUUFBUTFCLElBQUksQ0FDVjVYLEtBQVMyWixVQUFZLEVBQWYsS0FDTjFaLE1BQU8sTUFJYm9aLFFBQVF6QixJQUFJLENBQ1Y1WCxLQUFNLEdBQUdBLFNBQ1Q2UCxJQUFLLEdBQUdBLFFBQ1JxSixXQUFZLFdBRWhCLENBQ0YsQ0FDRixDQUVBLGFBQU9XLENBQVFYLFlBQ2IsT0FBUUEsV0FBV3hzRCxlQUNqQixJQUFLLEtBQ0gsT0FBTzFLLEtBQUtzRyxLQUFLMkUsS0FDbkIsSUFBSyxVQUNILE9BQU9qTCxLQUFLc0csS0FBS3VxQyxVQUNuQixRQUNFLE9BQU8sRUFFYixDQUVBLGlCQUFPZ21CLENBQVlSLE1BQ2pCLE1BQU1sNkMsUUFBa0MsaUJBQWpCazZDLEtBQUtsNkMsUUFBdUIsQ0FBQ2s2QyxLQUFLbDZDLFNBQVdrNkMsS0FBS2w2QyxRQUN6RUEsUUFBUXJpQixLQUFLLHdCQUNiLE1BQU11OUQsUUFBVW5wQyxFQUFFLGVBR2xCLEdBRkFtcEMsUUFBUVMsU0FBU3pCLEtBQUsxbEQsSUFDdEJ3TCxRQUFROUIsU0FBUWtZLEdBQUs4a0MsUUFBUVMsU0FBU3ZsQyxLQUNsQzhqQyxLQUFLMEIsUUFDUDFCLEtBQUswQixRQUFRMTlDLFNBQVF4aEIsSUFDbkIsTUFBTWsvRCxRQUFVM0IsZ0JBQWdCNEIsY0FBY24vRCxFQUFHLENBQUVvL0QsT0FBTyxJQUN0REYsU0FBU1YsUUFBUWprQixPQUFPMmtCLFFBQU8sUUFFaEMsQ0FDTCxNQUFNQSxRQUFVM0IsZ0JBQWdCNEIsY0FBYzNCLE1BQzFDMEIsU0FBU1YsUUFBUWprQixPQUFPMmtCLFFBQzlCLENBQ0EsT0FBT1YsT0FDVCxDQUVBLG9CQUFPVyxDQUFlbi9ELEdBQUcsT0FBVSxFQUFLLFNBQVksR0FBVSxDQUFDLEdBQzdELElBQUtBLEVBQUUrWCxNQUFPLE9BQU8sS0FDckIsR0FBSS9YLEVBQUVxK0QsYUFBZWQsZ0JBQWdCeUIsT0FBT2gvRCxFQUFFcStELFlBQWEsT0FBTyxLQUNsRSxNQUFNLzZDLFFBQVV0akIsRUFBRXNqQixRQUErQixpQkFBZHRqQixFQUFFc2pCLFFBQXVCLENBQUN0akIsRUFBRXNqQixTQUFXdGpCLEVBQUVzakIsUUFBVSxHQUNsRjg3QyxPQUFPOTdDLFFBQVFyaUIsS0FBSyxnQkFDcEJ3OUQsU0FBU243QyxRQUFRcmlCLEtBQUssWUFDMUIsTUFBTWkrRCxRQUFVN3BDLEVBQUUsYUFzQmxCLE9BckJBL1IsUUFBUTlCLFNBQVFrWSxHQUFLd2xDLFFBQVFELFNBQVN2bEMsS0FDdEMxNUIsRUFBRStYLE1BQU15SixTQUFRMkksSUFDZCxNQUFNMWpCLEdBQUs0dUIsRUFBRSxhQVdiLEdBVkE1dUIsR0FBR3c0RCxTQUFTLGFBQ1I5MEMsRUFBRW5qQixTQUNKUCxHQUFHdzRELFNBQVMsZUFDWng0RCxHQUFHa2pELEtBQUssY0FBZXgvQixFQUFFbmpCLFNBRUosaUJBQVptakIsRUFBRWpqQixNQUFvQlQsR0FBRzh6QyxPQUFPLFNBQVNwd0IsRUFBRWpqQixpQkFFaERpakIsRUFBRWpqQixNQUFNSSxNQUFNYixHQUFHOHpDLE9BQU8sYUFBYXB3QixFQUFFampCLE1BQU1JLGNBQzdDNmlCLEVBQUVqakIsTUFBTTYyQyxNQUFNdDNDLEdBQUc4ekMsT0FBTyxTQUFTcHdCLEVBQUVqakIsTUFBTTYyQyxnQkFFM0M1ekIsRUFBRXMwQyxRQUFTLENBQ2JoNEQsR0FBR3c0RCxTQUFTLG1CQUNaeDRELEdBQUc4ekMsT0FBTyxzQ0FDVixNQUFNOGtCLElBQU05QixnQkFBZ0I0QixjQUFjaDFDLEVBQUVzMEMsUUFBUyxDQUFFQSxTQUFTLElBQzVEWSxLQUFLNTRELEdBQUc4ekMsT0FBTzhrQixJQUNyQixDQUNBSCxRQUFRM2tCLE9BQU85ekMsR0FBRSxJQUVaeTRELE9BQ1QsRUNsSUssTUFBTUksdUJBQXVCQyxXQUNsQyxpQkFBQUMsR0FDRSxNQUFNdEMsY0FBZ0JoM0QsTUFBTXM1RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZXJ6RCxNQUNsQ3F6RCxhQUNULENBRUEsYUFBTXppQyxHQUNKLE1BQU1DLGdCQUFrQngwQixNQUFNdTBCLFVBMkw5QixHQXpMQUMsVUFBVStrQyxrQkFBb0J0NEQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBRXhEMnpCLFVBQVVnbEMsZUFBaUI3MUQsS0FBS2dSLE9BQVMxVCxLQUFLc0csS0FBSzJFLEtBQ25Ec29CLFVBQVVpbEMsYUFBdUQsSUFBekM5MUQsS0FBSzlGLE1BQU1nWSxnQkFBZ0IyZ0MsVUFDbkRoaUIsVUFBVWxhLFFBQVUzVyxLQUFLOUYsTUFBTXljLFFBQy9Ca2EsVUFBVWtsQyxZQUFjLENBQUMsRUFDekJsbEMsVUFBVWxOLE9BQVMsQ0FBQyxFQUNwQmtOLFVBQVVtbEMsYUFBZSxDQUFDLEVBQzFCbmxDLFVBQVVzdUIsUUFBVSxDQUFDLEVBQ3JCdHVCLFVBQVVvbEMsU0FBVyxHQUNyQnBsQyxVQUFVcWxDLFNBQVcsR0FDckJybEMsVUFBVXNsQyxXQUFhLENBQUMsRUFFeEJ0bEMsVUFBVTV6QixRQUNZLGNBQXBCK0MsS0FBSzlGLE1BQU1tRSxLQUNQNUMsaUJBQWlCd0UsOEJBQThCRCxLQUFLOUYsTUFBTStDLFNBQzFEeEIsaUJBQWlCb0YsaUNBQWlDYixLQUFLOUYsTUFBTStDLFNBRW5FNHpCLFVBQVV1bEMsbUJBQXFCOTRELEtBQUtzRyxLQUFLMkUsT0FBU3ZJLEtBQUs5RixNQUFNa2hCLFVBQVU5ZCxLQUFLc0csS0FBS3FLLEtBQU9qTyxLQUFLOUYsTUFBTWtoQixVQUFVQyxXQUFhbkwsTUFBTW9MLDBCQUEwQis2QyxRQUUxSnhsQyxVQUFVZ0csU0FBV3Y1QixLQUFLc0csS0FBSzJFLEtBQy9Cc29CLFVBQVV5bEMsWUFDK0MsV0FBdkRoNUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQzFCSSxLQUFLc0csS0FBSzJFLE1BQzhDLGFBQXZEakwsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQ3pCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFFMkIsYUFBdkRJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUMxQkksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEseUJBRTFCMnpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssUUFBUyxHQUdmLFlBQXBCbkosS0FBSzlGLE1BQU1tRSxPQUNSd3lCLFVBQVV2ckIsS0FBS3ZKLE9BQU8ybkIsa0JBQ3pCbU4sVUFBVXZyQixLQUFLdkosT0FBTzJuQixnQkFBa0IsQ0FDdENsdEIsSUFBSyxDQUNISixNQUFPLEtBQ1BxdEIsTUFBTyxhQUNQcG1CLE1BQU8sa0JBQ1BwRCxRQUFTLE1BRVh4RCxJQUFLLENBQ0hMLE1BQU8sS0FDUHF0QixNQUFPLGFBQ1BwbUIsTUFBTyxzQkFDUHBELFFBQVMsTUFFWHZELElBQUssQ0FDSE4sTUFBTyxLQUNQcXRCLE1BQU8sYUFDUHBtQixNQUFPLGNBQ1BwRCxRQUFTLE1BRVh0RCxJQUFLLENBQ0hQLE1BQU8sS0FDUHF0QixNQUFPLGFBQ1BwbUIsTUFBTyxtQkFDUHBELFFBQVMsTUFFWHJELElBQUssQ0FDSFIsTUFBTyxLQUNQcXRCLE1BQU8sYUFDUHBtQixNQUFPLG9CQUNQcEQsUUFBUyxNQUVYcEQsSUFBSyxDQUNIVCxNQUFPLEtBQ1BxdEIsTUFBTyxhQUNQcG1CLE1BQU8sc0JBQ1BwRCxRQUFTLE1BRVhuRCxJQUFLLENBQ0hWLE1BQU8sS0FDUHF0QixNQUFPLGFBQ1BwbUIsTUFBTyxlQUNQcEQsUUFBUyxNQUVYbEQsSUFBSyxDQUNIWCxNQUFPLEtBQ1BxdEIsTUFBTyxhQUNQcG1CLE1BQU8sbUJBQ1BwRCxRQUFTLFFBS1Y0MkIsVUFBVXZyQixLQUFLdkosT0FBT0MsVUFDekI2MEIsVUFBVXZyQixLQUFLdkosT0FBT0MsUUFBVSxDQUM5QmkyQyxHQUFJLENBQ0Y3N0MsTUFBTyxLQUNQNk0sSUFBSyxLQUNMd2dCLE1BQU8sS0FDUHBtQixNQUFPLGFBQ1BqRixNQUFNLEdBRVJpNkMsR0FBSSxDQUNGajhDLE1BQU8sS0FDUDZNLElBQUssS0FDTHdnQixNQUFPLEtBQ1BwbUIsTUFBTyxlQUNQakYsTUFBTSxHQUVScWlELElBQUssQ0FBRXJrRCxNQUFPLEtBQU1xdEIsTUFBTyxNQUFPcG1CLE1BQU8sUUFDekMwc0IsSUFBSyxDQUNIM3pCLE1BQU8sS0FDUDZNLElBQUssR0FDTHdnQixNQUFPLE1BQ1BwbUIsTUFBTyxTQUNQakYsTUFBTSxHQUVSb3pDLElBQUssQ0FDSHAxQyxNQUFPLEtBQ1BxdEIsTUFBTyxNQUNQcG1CLE1BQU8sZ0JBQ1BqRixNQUFNLEdBRVIrRCxHQUFJLENBQ0YvRixNQUFPLEtBQ1BxdEIsTUFBTyxLQUNQcG1CLE1BQU8sZUFDUGpGLE1BQU0sR0FFUmd6QyxNQUFPLENBQ0xoMUMsTUFBTyxLQUNQcXRCLE1BQU8sTUFDUHBtQixNQUFPLFFBQ1BqRixNQUFNLEdBRVI2RCxNQUFPLENBQUU3RixNQUFPLEtBQU1nQyxNQUFNLEtBSTNCeTRCLFVBQVV2ckIsS0FBS3ZKLE9BQU84NUMsWUFDekJobEIsVUFBVXZyQixLQUFLdkosT0FBTzg1QyxVQUFZLENBQ2hDMGdCLG9CQUFxQixDQUFFbDRELEtBQU0sU0FBVWpJLE1BQU8sTUFJN0N5NkIsVUFBVXZyQixLQUFLdkosT0FBT2tpQyxRQUN6QnBOLFVBQVV2ckIsS0FBS3ZKLE9BQU9raUMsTUFBUSxDQUM1QnlXLFdBQVksR0FDWjZJLElBQUssR0FDTGlaLElBQUssR0FDTEMsVUFBVyxHQUNYQyxXQUFZLEdBQ1ovaEIsVUFBVyxHQUNYZ2lCLGFBQWMsR0FDZEMsV0FBWSxLQUlYL2xDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxRQUN6QjJ4QixVQUFVdnJCLEtBQUt2SixPQUFPbUQsTUFBUSxDQUFFaUssUUFBUSxFQUFNMHRELGNBQWMsSUFHekRobUMsVUFBVXZyQixLQUFLdkosT0FBTys2RCxTQUN6QmptQyxVQUFVdnJCLEtBQUt2SixPQUFPKzZELE9BQVMsQ0FDN0JDLGVBQWdCLEtBQ2hCMWdFLFdBQVksS0FDWjJnRSxNQUFPLEtBQ1BDLGNBQWUsT0FJZHBtQyxVQUFVdnJCLEtBQUt2SixPQUFPbTdELGNBQ3pCcm1DLFVBQVV2ckIsS0FBS3ZKLE9BQU9tN0QsWUFBYyxDQUNsQ3ppQixTQUFVLEtBQ1ZDLFdBQVksS0FDWkMsVUFBVyxPQUlWOWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU84NUMsWUFBV2hsQixVQUFVdnJCLEtBQUt2SixPQUFPODVDLFVBQVksSUFFeEVobEIsVUFBVXNtQyxrQkFBb0I3NUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQ3hEMnpCLFVBQVV1bUMscUJBQXVCOTVELEtBQUttRSxTQUFTdkUsSUFDN0MsT0FDQSx5QkFJSjJ6QixVQUFVd21DLE9BQVNyM0QsS0FBSzlGLE1BQU1TLEtBQzlCazJCLFVBQVV5bUMsUUFBVXQzRCxLQUFLOUYsTUFBTU8sTUFFM0JvMkIsVUFBVTNpQixNQUFPLENBQ25CLElBQUssTUFBTWpJLFFBQVE0cUIsVUFBVTNpQixNQUFPLENBR2xDLEdBQWtCLFVBQWRqSSxLQUFLNUgsS0FjUCxHQWJJNEgsS0FBS2xLLE9BQU84SyxXQUFXM1AsVUFDckIrTyxLQUFLbEssT0FBTzhLLFdBQVd2UCxXQUN6QjJPLEtBQUtsSyxPQUFPa0wsZUFBaUIzSixLQUFLQyxLQUFLQyxTQUNyQyxvQ0FHQXlJLEtBQUtsSyxPQUFPOEssV0FBV3RQLFVBQ3pCME8sS0FBS2xLLE9BQU9rTCxlQUFpQjNKLEtBQUtDLEtBQUtDLFNBQ3JDLG9DQUtrQixjQUFwQndDLEtBQUs5RixNQUFNbUUsS0FBc0IsQ0FDbkMsR0FBSXZDLE1BQU1JLE9BQU8rSixLQUFLbEssT0FBTzNGLFFBQVMsQ0FDcEMsSUFBSUEsTUFBUSxLQUNaLE1BQU1tVSxPQUFTLENBQUMsRUFDaEIsSUFBSyxNQUFPMU8sSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFDaEMxVixLQUFLdUYsUUFBUUUsWUFFVDBCLElBQUkyTyxXQUFXLE1BQVFwVSxNQUFNb1UsV0FBVyxXQUMxQ0QsT0FBTzFPLElBQUk0TyxVQUFVLElBQU03TCxRQUFRQyxNQUFNNkwsWUFDdkMxSyxLQUNBNUosTUFBTXFVLFVBQVUsS0FJdEIsSUFDRXJVLGFBQ1EsSUFBSTBMLEtBQUttRSxLQUFLbEssT0FBTzNGLE1BQU9tVSxRQUFRSyxTQUFTLENBQ2pEdEksT0FBTyxLQUVURyxLQUNKLENBQUUsTUFBT3FJLEtBQ1BHLFFBQVFxSSxLQUNOaFcsS0FBS0MsS0FBS3lXLE9BQU8sc0NBQXVDLENBQ3RENWQsTUFBTzZQLEtBQUtsSyxPQUFPM0YsTUFDbkJFLEtBQU0yUCxLQUFLM1AsUUFHZkYsTUFBUSxJQUNWLENBRUEsR0FBSUEsTUFBTyxDQUNUNlAsS0FBS2xLLE9BQU8zRixNQUFRQSxNQUNwQixNQUFNbWhFLGFBQWV2M0QsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSStJLEtBQUtrckMsS0FDL0NsbUMsUUFBUTFLLEtBQ04saUJBQWlCUCxLQUFLMUosMEJBQTBCMlAsS0FBSzNQLFFBQVEyUCxLQUFLbEssT0FBTzNGLFlBQVlBLGVBRWpGbWhFLGFBQWFyNUQsT0FBTyxDQUN4QixlQUFnQjlILE9BRXBCLENBQ0YsQ0FFQSxNQUFNNlIsTUFBUWpJLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUkrSSxLQUFLa3JDLE1BQ2xDLEtBQU0sU0FBVSxPQUFZbHBDLE1BQU1sTSxPQUd4Q2tLLEtBQUtsSyxPQUFPd2EsU0FBV0EsVUFBWW5nQixPQUFTa1UsS0FDNUNyRSxLQUFLbEssT0FBTzNGLE1BQVFBLE9BQVNrVSxJQUMvQixLQUFPLENBQ0wsTUFBTXJDLE1BQVFqSSxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJK0ksS0FBS2tyQyxLQUd4QyxHQUZBbHJDLEtBQUtsSyxPQUFPdU8sV0FBYXJDLE1BQU0rQyxZQUUzQi9FLEtBQUtsSyxPQUFPM0YsTUFBTyxDQU1yQixJQUFJb2hFLFlBSFF2eEQsS0FBS2xLLE9BQU84c0IsYUFBYUMsV0FDakM3a0IsU0FBU2dDLEtBQUtsSyxPQUFPOHNCLFlBQVlDLFlBQ2pDLEdBQ21CN2tCLFNBQVNnQyxLQUFLbEssT0FBTzNGLE9BQVM2UixNQUFNN1IsTUFDdkRvaEUsWUFBYyxJQUFHQSxXQUFhLE1BQ2xDdnNELFFBQVExSyxLQUNOLHlCQUF5QjBILE1BQU0zUix3Q0FBd0NraEUsb0JBRW5FeDNELEtBQUs5RixNQUFNbTlDLHdCQUF3QixPQUFRLENBQy9DLENBQ0VsRyxJQUFLbHJDLEtBQUtrckMsSUFDVixnQ0FBaUNxbUIsV0FDakMsZUFBZ0IsUUFHZnZ4RCxLQUFLbEssT0FBTzhzQixjQUFhNWlCLEtBQUtsSyxPQUFPOHNCLFlBQWMsQ0FBQyxHQUN6RDVpQixLQUFLbEssT0FBTzhzQixZQUFZQyxXQUFhMHVDLFdBQ3JDdnhELEtBQUtsSyxPQUFPd2EsU0FBV3RPLE1BQU1zTyxTQUM3QnRRLEtBQUtsSyxPQUFPM0YsTUFBUTZSLE1BQU03UixLQUM1QixNQUNFNlAsS0FBS2xLLE9BQU8zRixNQUFRNlIsTUFBTTdSLE1BQzFCNlAsS0FBS2xLLE9BQU93YSxTQUFXdE8sTUFBTXNPLFFBRWpDLENBR0YsSUFBSXlxQixLQUFPblEsVUFBVWtsQyxZQUFZOXZELEtBQUs1SCxNQUNqQzJpQyxPQUNIQSxLQUFPLEdBQ1BuUSxVQUFVa2xDLFlBQVk5dkQsS0FBSzVILE1BQVEyaUMsTUFFckNBLEtBQUs1cEMsS0FBSzZPLEtBQ1osQ0FFQSxJQUFLLE1BQU13eEQsWUFBWTVtQyxVQUFVa2xDLFlBQy9CbGxDLFVBQVVrbEMsWUFBWTBCLFVBQVV2ckQsS0FBS3RFLGNBQWN1RSxlQUlyRDBrQixVQUFVbE4sT0FBU2tOLFVBQVUzaUIsTUFDMUIzWCxRQUFPMFAsTUFBc0IsVUFBZEEsS0FBSzVILE9BQ3BCNk4sS0FBS3RFLGNBQWN1RSxlQUV0QjBrQixVQUFVNm1DLFlBQWM3bUMsVUFBVWxOLE9BQU9wdEIsUUFDdkMwUixRQUNxQyxJQUFuQ0EsTUFBTWxNLE9BQU84SyxXQUFXeFAsU0FDYSxJQUFyQzRRLE1BQU1sTSxPQUFPOEssV0FBV3ZQLFdBRTVCdTVCLFVBQVU4bUMsWUFBYzltQyxVQUFVbE4sT0FBT3B0QixRQUN2QzBSLFFBQ3FDLElBQW5DQSxNQUFNbE0sT0FBTzhLLFdBQVd4UCxTQUNZLElBQXBDNFEsTUFBTWxNLE9BQU84SyxXQUFXdFAsVUFHNUIsTUFBTXFnRSxVQUFZL21DLFVBQVVsTixPQUFPcHRCLFFBQ2pDMFIsUUFBNEMsSUFBbkNBLE1BQU1sTSxPQUFPOEssV0FBV3hQLFNBRW5DLEdBQUl1Z0UsVUFDRixJQUFLLE1BQU0zdkQsU0FBUzJ2RCxVQUNsQi9tQyxVQUFVbWxDLGFBQWEvdEQsTUFBTWtwQyxLQUFPbHBDLE1BSXhDLE1BQU1rM0MsUUFBVXR1QixVQUFVa2xDLFlBQVlueEMsT0FFdEMsR0FBSXU2QixRQUNGLElBQUssTUFBTXY2QixVQUFVdTZCLFFBQVMsQ0FXNUIsR0FWQXY2QixPQUFPaXpDLG9CQUM2QixJQUFsQ2p6QyxPQUFPN29CLE9BQU84SyxXQUFXek8sT0FDUyxJQUFsQ3dzQixPQUFPN29CLE9BQU84SyxXQUFXMU8sS0FDdEJ5c0IsT0FBTzdvQixPQUFPcVAsT0FBTXdaLE9BQU83b0IsT0FBT3FQLEtBQU8sR0FFOUN3WixPQUFPa3pDLFVBQVcsRUFLa0IsS0FBaENsekMsT0FBTzdvQixPQUFPa00sTUFBTStGLEtBQUtDLEdBRTNCMlcsT0FBT2t6QyxVQUFXLE1BQ2IsQ0FHTCxHQUFJam5DLFVBQVVtbEMsYUFBYXB4QyxPQUFPN29CLE9BQU9rTSxNQUFNK0YsS0FBS0MsSUFBSyxDQUN2RCxNQUFNaEcsTUFBUWpJLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUkwbkIsT0FBTzdvQixPQUFPa00sTUFBTStGLEtBQUtDLElBQzVEMlcsT0FBTzdvQixPQUFPa00sTUFBTStGLEtBQUsxWCxLQUFPMlIsTUFBTWxNLE9BQU8rSyxVQUM3QzhkLE9BQU83b0IsT0FBT2tNLE1BQU0rRixLQUFLNVgsTUFBUTZSLE1BQU03UixLQUN6QyxNQUNFd3VCLE9BQU9rekMsVUFBVyxFQUdwQixHQUEwQyxLQUF0Q2x6QyxPQUFPN29CLE9BQU9rTSxNQUFNa0csV0FBV0YsSUFDN0I0aUIsVUFBVW1sQyxhQUFhcHhDLE9BQU83b0IsT0FBT2tNLE1BQU1rRyxXQUFXRixJQUFLLENBQzdELE1BQU1oRyxNQUFRakksS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFDN0IwbkIsT0FBTzdvQixPQUFPa00sTUFBTWtHLFdBQVdGLElBRWpDMlcsT0FBTzdvQixPQUFPa00sTUFBTWtHLFdBQVc3WCxLQUFPMlIsTUFBTWxNLE9BQU8rSyxVQUNuRDhkLE9BQU83b0IsT0FBT2tNLE1BQU1rRyxXQUFXL1gsTUFBUTZSLE1BQU03UixLQUMvQyxDQUVKLENBRUF3dUIsT0FBTzdvQixPQUFPZzhELFlBQWMsR0FDNUIsSUFBSyxNQUFPbDhELElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVExVixLQUFLbVosa0JBQW1CLENBQ2hFLE1BQU0waEMsU0FBVyxDQUFDLEVBQ2xCQSxTQUFTdGhDLEdBQUtwUyxJQUNkMHpDLFNBQVNqNUMsS0FBT0YsTUFDaEJtNUMsU0FBU241QyxPQUEwQyxJQUFsQ3d1QixPQUFPN29CLE9BQU84SyxXQUFXaEwsS0FDMUMrb0IsT0FBTzdvQixPQUFPZzhELFlBQVkzZ0UsS0FBS200QyxTQUNqQyxDQUVBMWUsVUFBVXN1QixRQUFRdjZCLE9BQU91c0IsS0FBT3ZzQixPQUM1QkEsT0FBTzdvQixPQUFPOEssV0FBV2hQLEtBQU1nNUIsVUFBVW9sQyxTQUFTNytELEtBQUt3dEIsUUFDdERpTSxVQUFVcWxDLFNBQVM5K0QsS0FBS3d0QixPQUMvQixDQUdGLE1BQU01VCxNQUFRaFIsS0FBS2dSLE1BTW5CLEdBTEE2ZixVQUFVdGtCLFFBQVV5RSxNQUNoQixHQUFHQSxNQUFNOUYsUUFBUStDLEdBQUsrQyxNQUFNOUYsT0FBTytDLEdBQUssV0FBVytDLE1BQU0vQyxLQUN6RCxLQUVKNGlCLFVBQVVtbkMsMEJBQTJCLEVBQ2pDbm5DLFVBQVV2ckIsS0FBS3ZKLE9BQU8ybkIsZ0JBQ3hCLElBQUssTUFBTWhOLGtCQUFrQjlXLE9BQU9KLE9BQU9xeEIsVUFBVXZyQixLQUFLdkosT0FBTzJuQixpQkFDMURoTixlQUFldGdCLFFBQU9zZ0IsZUFBZXk2QyxVQUFXLEdBQ3JEejZDLGVBQWV6QyxLQUFPN1IsS0FBS3VJLE1BQU0rTCxlQUFldGdCLE1BQVEsR0FDeERzZ0IsZUFBZXhNLFFBQVU5SCxLQUFLdUksTUFBTStMLGVBQWV0Z0IsTUFBUSxHQUd0RHNnQixlQUFldGdCLE9BQVVzZ0IsZUFBZXpjLFFBRzNDeWMsZUFBZThvQixTQUFVLEVBRnpCOW9CLGVBQWU4b0IsU0FBVSxHQU10QjlvQixlQUFldGdCLE9BQVNzZ0IsZUFBZXpjLFVBQzFDeWMsZUFBZXNoRCwwQkFBMkIsR0FHNUNubkMsVUFBVW1uQyx5QkFDUm5uQyxVQUFVbW5DLDBCQUNWdGhELGVBQWVzaEQsd0JBR3ZCLENBR0EsR0FBSyxDQUFDLFVBQVcsYUFBYWgxRCxTQUFTaEQsS0FBSzlGLE1BQU1tRSxNQUloRHd5QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRaTJDLEdBQUc3NUMsTUFBTyxFQUN4Q3k0QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRcTJDLEdBQUdqNkMsTUFBTyxFQUN4Q3k0QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRK3RCLElBQUkzeEIsTUFBTyxFQUN6Q3k0QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRd3ZDLElBQUlwekMsTUFBTyxFQUN6Q3k0QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRRyxHQUFHL0QsTUFBTyxFQUN4Q3k0QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRb3ZDLE1BQU1oekMsTUFBTyxNQVRZLENBQ3ZELE1BQU1BLEtBQU80SCxLQUFLOUYsTUFBTTg0QyxxQkFDeEJuaUIsVUFBVXZyQixLQUFLdkosT0FBUzZDLFFBQVFDLE1BQU0yYSxZQUFZcVgsVUFBVXZyQixLQUFLdkosT0FBUTNELEtBQzNFLENBZ0NBLE9BdkJJeTRCLFVBQVV2ckIsS0FBS3ZKLE9BQU9DLFFBQVFxMkMsR0FBR2o4QyxNQUFRLElBQUd5NkIsVUFBVXZyQixLQUFLdkosT0FBT0MsUUFBUXEyQyxHQUFHajhDLE1BQVEsTUFDckZ5NkIsVUFBVXZyQixLQUFLdkosT0FBT0MsUUFBUSt0QixJQUFJM3pCLE1BQVEsSUFBR3k2QixVQUFVdnJCLEtBQUt2SixPQUFPQyxRQUFRK3RCLElBQUkzekIsTUFBUSxNQUV0RixDQUFDLFdBQVc0TSxTQUFTaEQsS0FBSzlGLE1BQU1tRSxPQUMvQnd5QixVQUFVdnJCLEtBQUt2SixPQUFPODVDLHFCQUFxQjkyQixPQUFTOFIsVUFBVXZyQixLQUFLdkosT0FBTzg1QyxVQUFVajFDLFNBQ3RGaXdCLFVBQVV2ckIsS0FBS3ZKLE9BQU84NUMsVUFBVSxHQUFHb2lCLFNBQVUsRUFDN0NwbkMsVUFBVXZyQixLQUFLdkosT0FBTzg1QyxVQUFVaGxCLFVBQVV2ckIsS0FBS3ZKLE9BQU84NUMsVUFBVWoxQyxPQUFTLEdBQUdzM0QsUUFBUyxHQUd6RnJuQyxVQUFVc25DLG9CQUFxQixFQUMvQnRuQyxVQUFVdW5DLG9CQUFxQixFQUMvQnZuQyxVQUFVd25DLHFCQUFzQixFQUNoQ3huQyxVQUFVeW5DLHNCQUF1QixFQUNqQ3puQyxVQUFVMG5DLHVCQUF3QixFQUNsQzFuQyxVQUFVMm5DLHNCQUF1QixFQUVqQzNuQyxVQUFVNG5DLGNBQ1J6NEQsS0FBSzlGLE1BQU0rQyxRQUFRc0MsS0FBTyxRQUNlLElBQWpDUyxLQUFLOUYsTUFBTTZCLE9BQU9nbUQsWUFDeEJuaUQsT0FBT21FLEtBQUsvRCxLQUFLOUYsTUFBTTZCLE9BQU9nbUQsWUFBWXhyRCxRQUN4Q21pRSxXQUFhMTRELEtBQUs5RixNQUFNNkIsT0FBT2dtRCxXQUFXMlcsV0FBV3RpRSxRQUNyRHdLLE9BQVMsRUFFUml3QixTQUNULENBV0EsWUFBSXZrQixHQUVGLE1BREF2RCxHQUFHQyxjQUFjd1UsTUFBTSxpQ0FDakIsSUFBSTNGLE1BQU0sd0RBR2xCLENBRUEsWUFBQThnRCxHQUVBLENBUUEsaUJBQUE3K0MsQ0FBbUJDLE1Bb0JqQixHQW5CQTFkLE1BQU15ZCxrQkFBa0JDLE1BRXhCQSxLQUFLcmEsS0FBSyxtQkFBbUIreEIsTUFBTXp4QixLQUFLNDRELGlCQUFpQjEvRCxLQUFLOEcsT0FDOUQrWixLQUFLcmEsS0FBSyxpQkFBaUIreEIsTUFBTXp4QixLQUFLNjRELGNBQWMzL0QsS0FBSzhHLE9BQ3pEK1osS0FBS3JhLEtBQUsscUJBQXFCK3hCLE1BQU16eEIsS0FBSzg0RCxtQkFBbUI1L0QsS0FBSzhHLE9BQ2xFK1osS0FBS3JhLEtBQUssY0FBY3E1RCxTQUFTLzRELEtBQUtnNUQsZ0JBQWdCOS9ELEtBQUs4RyxPQUMzRCtaLEtBQUtyYSxLQUFLLGFBQWEreEIsTUFBTXp4QixLQUFLaTVELFVBQVUvL0QsS0FBSzhHLE9BQ2pEK1osS0FBS3JhLEtBQUssa0JBQWtCK3hCLE9BQU1sMUIsT0FBU3lELEtBQUtrNUQsZ0JBQWdCMzhELFNBQ2hFd2QsS0FBS3JhLEtBQUssa0JBQWtCc2EsR0FBRyxlQUFlemQsT0FBU3lELEtBQUtrNUQsZ0JBQWdCMzhELFNBR3hFeUQsS0FBSzlGLE1BQU0rK0IsVUFBYWo1QixLQUFLOUYsTUFBTWkvRCxZQUFZaHdELFNBQ2pENFEsS0FBS3JhLEtBQUssU0FBUyt4QixNQUFNenhCLEtBQUtvNUQsZUFBZWxnRSxLQUFLOEcsT0FDbEQrWixLQUFLcmEsS0FBSyxTQUFTK3hCLE1BQU16eEIsS0FBS3E1RCxlQUFlbmdFLEtBQUs4RyxPQUNsRCtaLEtBQUtyYSxLQUFLLFlBQVkreEIsTUFBTXp4QixLQUFLczVELGtCQUFrQnBnRSxLQUFLOEcsT0FDeEQrWixLQUFLcmEsS0FBSyxnQkFBZ0IreEIsTUFBTXp4QixLQUFLdTVELGNBQWNyZ0UsS0FBSzhHLFFBSXREQSxLQUFLOUYsTUFBTSsrQixjQUE0QyxJQUExQmo1QixLQUFLOUYsTUFBTWkvRCxXQUE0QixDQUN0RSxHQUFJNzdELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUFvQixDQUMzQzhDLEtBQUt3NUQsUUFBT3g1RCxLQUFLdzVELE1BQVEsSUFFOUIsTUFBTUMsU0FBVyxDQUNmeHJELEdBQUksYUFDSndMLFFBQVMsWUFDVDQ3QyxRQUFTLENBQ1AsQ0FDRTU3QyxRQUFTLE9BQ1R2TCxNQUFPLENBQ0wsQ0FBRS9RLE9BQVEsT0FBUUUsTUFBTyxRQUN6QixDQUFFRixPQUFRLGVBQWdCRSxNQUFPLGdCQUNqQyxDQUFFRixPQUFRLGdCQUFpQkUsTUFBTyxtQkFHdEMsQ0FDRW9jLFFBQVMsU0FDVCs2QyxXQUFZLEtBQ1p0bUQsTUFBTyxDQUNMLENBQ0U3USxNQUFPLENBQUVJLEtBQU0sY0FBZXkyQyxLQUFNLFFBQ3BDMGdCLFFBQVMsQ0FDUDFtRCxNQUFPLENBQ0wsQ0FBRS9RLE9BQVEsWUFBYUUsTUFBTyxxQkFDOUIsQ0FBRUYsT0FBUSxZQUFhRSxNQUFPLGdCQUM5QixDQUFFRixPQUFRLG9CQUFxQkUsTUFBTyx5QkFJNUMsQ0FBRUYsT0FBUSxlQUFnQkUsTUFBTyxvQkFNbkNxOEQsUUFBVSxDQUNkenJELEdBQUksV0FDSndMLFFBQVMsWUFDVDQ3QyxRQUFTLENBQ1AsQ0FDRTU3QyxRQUFTLE9BQ1R2TCxNQUFPLENBQ0wsQ0FBRS9RLE9BQVEsWUFBYUUsTUFBTyxhQUM5QixDQUFFRixPQUFRLE9BQVFFLE1BQU8sUUFDekIsQ0FBRUYsT0FBUSxlQUFnQkUsTUFBTyxnQkFDakMsQ0FBRUYsT0FBUSxnQkFBaUJFLE1BQU8sbUJBR3RDLENBQ0VvYyxRQUFTLFNBQ1QrNkMsV0FBWSxVQUNadG1ELE1BQU8sQ0FDTCxDQUFFL1EsT0FBUSxlQUFnQkUsTUFBTyxnQkFDakMsQ0FDRUEsTUFBTyxDQUFFSSxLQUFNLGNBQWV5MkMsS0FBTSxRQUNwQzBnQixRQUFTLENBQ1AxbUQsTUFBTyxDQUNMLENBQUUvUSxPQUFRLFlBQWFFLE1BQU8scUJBQzlCLENBQUVGLE9BQVEsWUFBYUUsTUFBTyxnQkFDOUIsQ0FBRUYsT0FBUSxvQkFBcUJFLE1BQU8sc0JBQ3RDLENBQUVGLE9BQVEsaUJBQWtCRSxNQUFPLG9CQVMzQ3M4RCxnQkFBa0IsSUFBSWpHLGdCQUM1QmlHLGdCQUFnQnpnRSxLQUFLdWdFLFNBQVUxL0MsS0FBTS9aLEtBQUs0NUQsb0JBQW9CMWdFLEtBQUs4RyxPQUNuRUEsS0FBS3c1RCxNQUFNcGlFLEtBQUt1aUUsaUJBRWhCLE1BQU1FLGVBQWlCLElBQUluRyxnQkFDM0JtRyxlQUFlM2dFLEtBQUt3Z0UsUUFBUzMvQyxLQUFNL1osS0FBSzQ1RCxvQkFBb0IxZ0UsS0FBSzhHLE9BQ2pFQSxLQUFLdzVELE1BQU1waUUsS0FBS3lpRSxlQUNsQixNQUNFOS9DLEtBQ0dyYSxLQUFLLHlCQUNMczBELFlBQVloMEQsS0FBSzg1RCxlQUFlNWdFLEtBQUs4RyxPQUN4QytaLEtBQ0dyYSxLQUFLLHdCQUNMczBELFlBQVloMEQsS0FBSzg1RCxlQUFlNWdFLEtBQUs4RyxPQUN4QytaLEtBQ0dyYSxLQUFLLDZCQUNMczBELFlBQVloMEQsS0FBSzg1RCxlQUFlNWdFLEtBQUs4RyxPQUkxQytaLEtBQ0dyYSxLQUFLLHlCQUNMK3hCLE1BQU16eEIsS0FBSys1RCx5QkFBeUI3Z0UsS0FBSzhHLE9BQzVDK1osS0FBS3JhLEtBQUssd0JBQXdCK3hCLE1BQU16eEIsS0FBS2c2RCxpQkFBaUI5Z0UsS0FBSzhHLE9BQ25FK1osS0FBS3JhLEtBQUssZ0JBQWdCK3hCLE1BQU16eEIsS0FBS2c2RCxpQkFBaUI5Z0UsS0FBSzhHLE9BQzNEK1osS0FDR3JhLEtBQUssNkJBQ0wreEIsTUFBTXp4QixLQUFLaTZELGtCQUFrQi9nRSxLQUFLOEcsT0FFckMrWixLQUNHcmEsS0FBSyxzQkFDTHNhLEdBQUcsWUFBYWhhLEtBQUtrNkQsa0JBQWtCaGhFLEtBQUs4RyxPQUUvQytaLEtBQ0dyYSxLQUFLLHlCQUNMc2EsR0FBRyxhQUFhemQsT0FBU3lELEtBQUttNkQsc0JBQXNCNTlELFNBQ3ZEd2QsS0FDR3JhLEtBQUssb0JBQ0xzYSxHQUFHLGFBQWF6ZCxPQUFTeUQsS0FBS282RCxpQkFBaUI3OUQsU0FDbER3ZCxLQUNHcmEsS0FBSyxjQUNMc2EsR0FBRyxhQUFhemQsT0FBU3lELEtBQUtxNkQsZ0JBQWdCOTlELFNBRWpEd2QsS0FDR3JhLEtBQUsseUJBQ0xzMEQsWUFBWWgwRCxLQUFLODVELGVBQWU1Z0UsS0FBSzhHLE9BRXhDK1osS0FDR3JhLEtBQUssd0JBQ0wreEIsTUFBTXp4QixLQUFLczZELDJCQUEyQnBoRSxLQUFLOEcsT0FDOUMrWixLQUNHcmEsS0FBSywyQkFDTCt4QixNQUFNenhCLEtBQUt1NkQsOEJBQThCcmhFLEtBQUs4RyxPQUNqRCtaLEtBQUtyYSxLQUFLLGtCQUFrQit4QixNQUFNenhCLEtBQUtxaUIsVUFBVW5wQixLQUFLOEcsUUFHbEQxQyxLQUFLc0csS0FBSzJFLE1BQVFqTCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDOUM2YyxLQUFLcmEsS0FBSyxrQkFBa0IreEIsTUFBTXp4QixLQUFLdzZELGdCQUFnQnRoRSxLQUFLOEcsT0FDNUQrWixLQUNHcmEsS0FBSyxzQkFDTCt4QixNQUFNenhCLEtBQUt5NkQsbUJBQW1CdmhFLEtBQUs4RyxPQUN0QytaLEtBQUtyYSxLQUFLLGFBQWEreEIsTUFBTXp4QixLQUFLMDZELEtBQUt4aEUsS0FBSzhHLE9BQzVDK1osS0FBS3JhLEtBQUssWUFBWSt4QixNQUFNenhCLEtBQUsyNkQsT0FBT3poRSxLQUFLOEcsUUFHL0MrWixLQUFLcmEsS0FBSyxnQkFBZ0IreEIsTUFBTXp4QixLQUFLNDZELGNBQWMxaEUsS0FBSzhHLE9BRXhEK1osS0FBS3JhLEtBQUsscUJBQXFCK3hCLE9BQU1sMUIsT0FBU3lELEtBQUs2NkQsWUFBWXQrRCxTQUMvRHdkLEtBQ0dyYSxLQUFLLHlCQUNMK3hCLE9BQU1sMUIsT0FBU3lELEtBQUs4NkQsY0FBY3YrRCxTQUNyQ3dkLEtBQ0dyYSxLQUFLLDBCQUNMK3hCLE9BQU1sMUIsT0FBU3lELEtBQUsrNkQsVUFBVXgrRCxTQWVqQ3dkLEtBQ0dyYSxLQUFLLDBCQUNMK3hCLE9BQU1udkIsYUFBZXRDLEtBQUtnN0QsbUJBQW1CeitELFNBQ2hEd2QsS0FBS0MsR0FBRyxRQUFTLGlCQUFrQmhhLEtBQUtpN0QsZ0JBQWdCL2hFLEtBQUs4RyxPQUU3RCxNQUFNazdELFlBQWNuaEQsS0FBS3JhLEtBQUssb0JBQzlCLElBQUssTUFBTXk3RCxjQUFjRCxZQUN2QkMsV0FBV0MsaUJBQWlCLFNBQVM3K0QsT0FBU3lELEtBQUtxN0QsU0FBUzkrRCxRQUFRLENBQ2xFNkQsU0FBUyxHQUdmLENBR0tKLEtBQUtWLFFBQVE2eEQsV0FFbEJwM0MsS0FBS3JhLEtBQUssZ0JBQWdCK3hCLE9BQU1sMUIsT0FBU3lELEtBQUtzN0QsZUFBZS8rRCxTQUM3RHdkLEtBQUtyYSxLQUFLLGVBQWUreEIsTUFBTXp4QixLQUFLdTdELGFBQWFyaUUsS0FBSzhHLE9BR3REK1osS0FBS3JhLEtBQUssZ0JBQWdCcTVELFVBQVN4OEQsT0FBU3lELEtBQUt3N0QsbUJBQW1Cai9ELFNBQ3BFd2QsS0FBS3JhLEtBQUssY0FBYyt4QixPQUFNbDFCLE9BQVN5RCxLQUFLdzdELG1CQUFtQmovRCxTQUcvRHdkLEtBQUtyYSxLQUFLLGdCQUFnQit4QixPQUFNbnZCLFdBQzlCLE1BQU0xRixHQUFLNHVCLEVBQUVpd0MsR0FBRzkrRCxlQUFlKytELFFBQVEsU0FDakNDLGFBQWUzN0QsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSU4sR0FBRzBJLEtBQUssVUFBVyxDQUMzRHMyRCxRQUFRLFVBRUpELGFBQWExOUQsU0FDbkJyQixHQUFHaS9ELFFBQVEsS0FBSyxJQUFNNzdELEtBQUtoQyxRQUFPLElBQU0sSUFHMUMrYixLQUFLcmEsS0FBSyxhQUFhK3hCLE9BQU1ncUMsS0FFM0IsT0FEQUEsR0FBR0ssa0JBQ0tMLEdBQUc5K0QsY0FBY0ksUUFBUXNCLE1BQy9CLElBQUssT0FDSDJCLEtBQUs5RixNQUFNZzdDLGdCQUFnQnVtQixJQUMzQixNQUNGLElBQUssT0FDSHo3RCxLQUFLOUYsTUFBTXU3QyxnQkFBZ0JnbUIsSUFDM0IsTUFDRixJQUFLLFFBQ0h6N0QsS0FBSzlGLE1BQU1zN0MsaUJBQWlCaW1CLElBQzVCLE1BQ0YsSUFBSyxRQUNIejdELEtBQUs5RixNQUFNbTdDLGlCQUFpQm9tQixJQUM1QixNQUNGLElBQUssU0FDSCxDQUNFLE1BQU01MEQsV0FBYSxDQUFDLEVBQ2hCNDBELEdBQUc5K0QsY0FBY0ksUUFBUW5GLE1BQzNCaVAsV0FBV2pQLE9BQVEsRUFDVjZqRSxHQUFHOStELGNBQWNJLFFBQVFsRixPQUNsQ2dQLFdBQVdoUCxNQUFPLEdBRXBCbUksS0FBSzlGLE1BQU13N0Msa0JBQWtCK2xCLEdBQUk1MEQsV0FDbkMsRUFFSixJQU9Ga1QsS0FBS3JhLEtBQUssZUFBZSt4QixNQUFNenhCLEtBQUsrN0QsYUFBYTdpRSxLQUFLOEcsT0FFdEQrWixLQUFLcmEsS0FBSyxvQkFBb0IreEIsT0FBTSxLQUNsQ3p4QixLQUFLOUYsTUFBTXk3QyxtQkFDWDMxQyxLQUFLaEMsUUFBTyxJQUdkK2IsS0FBS3JhLEtBQUssbUJBQW1CK3hCLE9BQU1ncUMsS0FDakMsTUFBTXQrQyxNQUFRbFosU0FDWnczRCxHQUFHOStELGNBQWNFLFFBQVEsZ0JBQWdCRSxRQUFRb2dCLE9BRW5EbmQsS0FBSzlGLE1BQU04N0MsaUJBQWlCNzRCLE1BQUssSUFHbkNwRCxLQUFLcmEsS0FBSyxvQkFBb0IreEIsT0FBTWdxQyxLQUNsQyxNQUFNdCtDLE1BQVFsWixTQUNadzNELEdBQUc5K0QsY0FBY0UsUUFBUSxnQkFBZ0JFLFFBQVFvZ0IsT0FFbkRuZCxLQUFLOUYsTUFBTSs3QyxpQkFBaUI5NEIsTUFBSyxJQUduQ3BELEtBQUtyYSxLQUFLLHNCQUFzQit4QixPQUFNZ3FDLEtBQ3BDLE1BQU10K0MsTUFBUWxaLFNBQ1p3M0QsR0FBRzkrRCxjQUFjRSxRQUFRLGdCQUFnQkUsUUFBUW9nQixPQUVuRG5kLEtBQUs5RixNQUFNZzhDLG1CQUFtQi80QixNQUFLLElBR3JDcEQsS0FBS3JhLEtBQUsscUJBQXFCcTVELFVBQVMwQyxLQUN6Qno3RCxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUM1QnUrRCxHQUFHOStELGNBQWNFLFFBQVEsU0FBU0UsUUFBUXNYLFFBRXZDMUwsZUFBZSxlQUFjLElBR3BDb1IsS0FBS3JhLEtBQUssb0NBQW9DK3hCLE9BQU1ncUMsS0FDckN6N0QsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFDNUJ1K0QsR0FBRzkrRCxjQUFjRSxRQUFRLFNBQVNFLFFBQVFzWCxRQUV2QzFMLGVBQWUsYUFBWSxJQUdsQ29SLEtBQUtyYSxLQUFLLG1DQUFtQyt4QixPQUFNZ3FDLEtBQ3BDejdELEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQzVCdStELEdBQUc5K0QsY0FBY0UsUUFBUSxTQUFTRSxRQUFRc1gsUUFFdkMxTCxlQUFlLFlBQVcsSUFHakNvUixLQUFLcmEsS0FBSyx1QkFBdUIreEIsT0FBTWwxQixRQUNyQ3lELEtBQUs5RixNQUFNd21ELGtCQUFrQm5rRCxNQUFNc3lCLFNBQVEsSUFHN0M5VSxLQUFLcmEsS0FBSyxxQkFBcUIreEIsT0FBTWwxQixRQUM5QkEsTUFBTXkvRCxRQUEyQixJQUFqQnovRCxNQUFNeS9ELFFBQ3pCaDhELEtBQUs5RixNQUFNcW5ELFlBQVlobEQsTUFBTXN5QixTQUMvQixJQUdGOVUsS0FBS3JhLEtBQUsscUJBQXFCK3hCLE9BQU1sMUIsUUFDbkMsUUFBNEMsSUFBakN5RCxLQUFLOUYsTUFBTTZCLE9BQU9nbUQsV0FBNEIsQ0FDdkQsTUFBTWthLFFBQVUsQ0FBQyxFQUNqQixJQUFLLE1BQU12RCxhQUFhMTRELEtBQUs5RixNQUFNNkIsT0FBT2dtRCxnQkFHcEMsSUFESy9oRCxLQUFLOUYsTUFBTTZCLE9BQU9nbUQsV0FBVzJXLFdBQVd0aUUsUUFFRyxJQUFsRDRKLEtBQUs5RixNQUFNNkIsT0FBT2dtRCxXQUFXMlcsV0FBV3RpRSxRQUV4QzZsRSxRQUFRLHFCQUFxQnZELG9CQUFxQixHQUdsRDk0RCxPQUFPbUUsS0FBS2s0RCxTQUFTcjdELE9BQVMsR0FDaENaLEtBQUs5RixNQUFNZ0UsT0FBTys5RCxRQUV0QixDQUNBLE1BQU1oL0QsUUFBVStDLEtBQUs5RixNQUFNK0MsUUFBUStHLEtBQUlsSCxRQUFVQSxPQUFPbVIsS0FDcERoUixRQUFRMkQsT0FBUyxHQUNuQlosS0FBSzlGLE1BQU13b0Qsd0JBQXdCLGVBQWdCemxELFFBQ3JELElBTUY4YyxLQUFLcmEsS0FBSyxpQkFBaUIreEIsT0FBTW52QixjQUMvQixJQUFLaEYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBQWtCLE9BQU8sUUFvQjFENmMsS0FDR3JhLEtBQUssd0JBQ0x3OEQsV0FBV2w4RCxLQUFLbThELGtCQUFrQmpqRSxLQUFLOEcsT0FDdkN3dEMsV0FBV2x3QyxLQUFLeWdELGFBQWFxZSxhQUFhbGpFLEtBQUs4RyxPQUNsRCtaLEtBQ0dyYSxLQUFLLHlCQUNMdzhELFdBQVdsOEQsS0FBS3E4RCwyQkFBMkJuakUsS0FBSzhHLE9BQ2hEd3RDLFdBQVdsd0MsS0FBS3lnRCxhQUFhcWUsYUFBYWxqRSxLQUFLOEcsT0FDbEQrWixLQUNHcmEsS0FBSyw2QkFDTHc4RCxXQUFXbDhELEtBQUtzOEQsc0JBQXNCcGpFLEtBQUs4RyxPQUMzQ3d0QyxXQUFXbHdDLEtBQUt5Z0QsYUFBYXFlLGFBQWFsakUsS0FBSzhHLE9BQ2xEK1osS0FDR3JhLEtBQUssZ0JBQ0x3OEQsV0FBV2w4RCxLQUFLdThELGlCQUFpQnJqRSxLQUFLOEcsT0FDdEN3dEMsV0FBV2x3QyxLQUFLeWdELGFBQWFxZSxhQUFhbGpFLEtBQUs4RyxPQUNsRCtaLEtBQ0dyYSxLQUFLLGtDQUNMdzhELFdBQVdsOEQsS0FBS3c4RCwwQkFBMEJ0akUsS0FBSzhHLE9BQy9Dd3RDLFdBQVdsd0MsS0FBS3lnRCxhQUFhcWUsYUFBYWxqRSxLQUFLOEcsT0FHbEQrWixLQUNHcmEsS0FBSyxtQkFDTCt4QixPQUFNZ3FDLElBQU1oZ0UsaUJBQWlCYSxxQkFBcUJtL0QsR0FBSXo3RCxLQUFLOUYsU0FDaEUsQ0FFQSxpQkFBQWlpRSxDQUFtQjUvRCxPQUNqQixNQUFNa2dFLE1BQVF4NEQsU0FBUzNHLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUM3Q3UvRCxNQUFRLElBQ1ZuL0QsS0FBS3lnRCxhQUFhQyxhQUFlemhELE1BQU1JLGNBQ3ZDVyxLQUFLeWdELGFBQWEyZSxhQUFlbjdDLFlBQVcsS0FDMUMsTUFBTTY4QixRQUFVOWdELEtBQUtvUCxPQUFPMUcsY0FBYzgzQyxvQkFDMUIsSUFBWk0sU0FDRjlnRCxLQUFLeWdELGFBQWE0ZSxlQUFldmUsUUFDbkMsR0FDQ3FlLE9BRVAsQ0FFQSwwQkFBQUosQ0FBNEI5L0QsT0FDMUIsTUFBTWtnRSxNQUFReDRELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDakQsR0FBSXUvRCxNQUFRLEVBQUcsQ0FDYixNQUFNMStELE1BQVFpQyxLQUNkMUMsS0FBS3lnRCxhQUFhQyxhQUFlemhELE1BQU1JLGNBQ3ZDVyxLQUFLeWdELGFBQWEyZSxhQUFlbjdDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkNqa0IsS0FBS3lnRCxhQUFhQyxjQUNVLE9BQW5DMWdELEtBQUt5Z0QsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNcGQsS0FBT3RqQyxLQUFLeWdELGFBQWFDLGFBQWFuaEQsUUFBUSxhQUNwRCxRQUFvQixJQUFUK2pDLE1BQTBCQSxLQUFNLENBQ3pDLE1BQU1nOEIsT0FBU2g4QixLQUFLN2pDLFFBQVEyWixlQUN0QkEsZUFBaUIzWSxNQUFNN0QsTUFBTXdwQixnQkFBZ0JrNUMsUUFDbkQsSUFBSXhlLFFBQVU5Z0QsS0FBS0MsS0FBS3lXLE9BQU8sb0JBQXFCLENBQ2xEL0wsTUFBT3lPLGVBQWVyWixNQUN0QjBXLFFBQVMyQyxlQUFldGdCLE9BQVMsRUFDakM2ZCxLQUFNeUMsZUFBZXpDLE1BQVEsRUFDN0IvSixRQUFTd00sZUFBZXhNLFNBQVcsSUFFakM1TSxLQUFLc0csS0FBSzJFLE9BQ1o2MUMsU0FFRTlnRCxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDMUN6YSxNQUNFK0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCYSxNQUFNN0QsTUFBTXNqQyxlQUNSbGdDLEtBQUtDLEtBQUt5VyxPQUFPLGlDQUFrQyxDQUNuRDFkLEtBQU15SCxNQUFNN0QsTUFBTTVELE9BRWxCLE1BR1pnSCxLQUFLeWdELGFBQWE0ZSxlQUFldmUsUUFDbkMsQ0FDRixDQUNGLEdBQUdxZSxNQUNMLENBQ0YsQ0FFQSxxQkFBQUgsQ0FBdUIvL0QsT0FDckIsTUFBTWtnRSxNQUFReDRELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDakQsR0FBSXUvRCxNQUFRLEVBQUcsQ0FDYixNQUFNMStELE1BQVFpQyxLQUNkMUMsS0FBS3lnRCxhQUFhQyxhQUFlemhELE1BQU1JLGNBQ3ZDVyxLQUFLeWdELGFBQWEyZSxhQUFlbjdDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkNqa0IsS0FBS3lnRCxhQUFhQyxjQUNVLE9BQW5DMWdELEtBQUt5Z0QsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNM2dCLE9BQVMvL0IsS0FBS3lnRCxhQUFhQyxhQUFhbmhELFFBQVEsY0FDdEQsUUFBc0IsSUFBWHdnQyxPQUF3QixDQUNqQyxNQUFNdy9CLFlBQWN4L0IsT0FBT3RnQyxRQUFRc2dDLE9BQ25DLElBQUkrZ0IsUUFBVSxHQUNkLE1BQU0wZSxXQUFhLytELE1BQU03RCxNQUFNNkIsT0FBT0MsUUFBUTZnRSxhQUM5QyxPQUFRQSxhQUNOLElBQUssTUFDSHplLFFBQVU5Z0QsS0FBS0MsS0FBS3lXLE9BQU8sb0JBQXFCLENBQzlDL0wsTUFBTzYwRCxXQUFXei9ELE1BQ2xCMFcsUUFBUytvRCxXQUFXMW1FLE9BQVMsRUFDN0I2ZCxLQUFNN1IsS0FBS3VJLE9BQU9teUQsV0FBVzFtRSxPQUFTLEdBQUssR0FDM0M4VCxRQUFTOUgsS0FBS3VJLE9BQU9teUQsV0FBVzFtRSxPQUFTLEdBQUssS0FFNUNrSCxLQUFLc0csS0FBSzJFLE9BQ1o2MUMsU0FFRTlnRCxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDMUN6YSxNQUNFK0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCYSxNQUFNN0QsTUFBTXNqQyxlQUNSbGdDLEtBQUtDLEtBQUt5VyxPQUFPLGlDQUFrQyxDQUNuRDFkLEtBQU15SCxNQUFNN0QsTUFBTTVELE9BRWxCLE1BR1pnSCxLQUFLeWdELGFBQWE0ZSxlQUFldmUsU0FDakMsTUFDRixJQUFLLEtBQ0hBLFFBQVU5Z0QsS0FBS0MsS0FBS0MsU0FBUyxrQkFDN0JGLEtBQUt5Z0QsYUFBYTRlLGVBQWV2ZSxTQUNqQyxNQUNGLElBQUssTUFDSEEsUUFBVTlnRCxLQUFLQyxLQUFLeVcsT0FBTyxxQkFBc0IsQ0FDL0MvTCxNQUFPLFNBQ1A4TCxRQUFTK29ELFdBQVcxbUUsT0FBUyxFQUM3QjZkLEtBQU03UixLQUFLdUksT0FBT215RCxXQUFXMW1FLE9BQVMsR0FBSyxHQUMzQzhULFFBQVM5SCxLQUFLdUksT0FBT215RCxXQUFXMW1FLE9BQVMsR0FBSyxLQUU1Q2tILEtBQUtzRyxLQUFLMkUsT0FDWjYxQyxTQUVFOWdELEtBQUtDLEtBQUt5VyxPQUFPLDBCQUEyQixDQUMxQ3phLE1BQ0UrRCxLQUFLQyxLQUFLQyxTQUFTLDZCQUNsQkYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzNCYSxNQUFNN0QsTUFBTXNqQyxlQUNSbGdDLEtBQUtDLEtBQUt5VyxPQUFPLGlDQUFrQyxDQUNuRDFkLEtBQU15SCxNQUFNN0QsTUFBTTVELE9BRWxCLE9BR1pnSCxLQUFLeWdELGFBQWE0ZSxlQUFldmUsU0FHdkMsQ0FDRixDQUNGLEdBQUdxZSxNQUNMLENBQ0YsQ0FFQSxnQkFBQUYsQ0FBa0JoZ0UsT0FDaEIsTUFBTWtnRSxNQUFReDRELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDN0N1L0QsTUFBUSxJQUNWbi9ELEtBQUt5Z0QsYUFBYUMsYUFBZXpoRCxNQUFNSSxjQUN2Q1csS0FBS3lnRCxhQUFhMmUsYUFBZW43QyxZQUFXLFdBQzFDLFFBQzRDLElBQW5DamtCLEtBQUt5Z0QsYUFBYUMsY0FDVSxPQUFuQzFnRCxLQUFLeWdELGFBQWFDLGFBQ2xCLENBQ0EsTUFBTUksUUFBVTlnRCxLQUFLQyxLQUFLQyxTQUFTLDBCQUNuQ0YsS0FBS3lnRCxhQUFhNGUsZUFBZXZlLFFBQ25DLENBQ0YsR0FBR3FlLE9BRVAsQ0FFQSx5QkFBQUQsQ0FBMkJqZ0UsT0FDekIsTUFBTWtnRSxNQUFReDRELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDakQsR0FBSXUvRCxNQUFRLEVBQUcsQ0FDYixNQUFNMStELE1BQVFpQyxLQUNkMUMsS0FBS3lnRCxhQUFhQyxhQUFlemhELE1BQU1JLGNBQ3ZDVyxLQUFLeWdELGFBQWEyZSxhQUFlbjdDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkNqa0IsS0FBS3lnRCxhQUFhQyxjQUNVLE9BQW5DMWdELEtBQUt5Z0QsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNLzNDLEtBQU8zSSxLQUFLeWdELGFBQWFDLGFBQWFuaEQsUUFBUSxTQUNwRCxRQUFvQixJQUFUb0osS0FBc0IsQ0FDL0IsTUFBTXFPLFFBQVVyTyxLQUFLbEosUUFBUXVYLFFBQ3ZCck0sTUFBUWxLLE1BQU03RCxNQUFNZ1UsTUFBTWhSLElBQUlvWCxTQUM5QjhwQyxRQUFVOWdELEtBQUtDLEtBQUt5VyxPQUFPLDhCQUErQixDQUM5RDVaLE9BQVFrRCxLQUFLQyxLQUFLQyxTQUNoQnlLLE1BQU1sTSxPQUFPbUQsTUFBTTA5QyxhQUNmLDJCQUNBLGdDQUdSdC9DLEtBQUt5Z0QsYUFBYTRlLGVBQWV2ZSxRQUNuQyxDQUNGLENBQ0YsR0FBR3FlLE1BQ0wsQ0FDRixDQUVBLG1CQUFBN0MsQ0FBcUJyOUQsTUFBT3dvQixRQUMxQixNQUFNZzRDLFdBQWFoNEMsT0FBT2hvQixTQUFTZ2dFLFdBQzdCQyxZQUFjLENBQ2xCNy9CLGdCQUFnQixFQUNoQjVZLGFBQWEsRUFDYnJxQixNQUFPOEYsS0FBSzlGLE9BRWQsT0FBUTZpRSxZQUNOLElBQUssUUFDSEMsWUFBWS9tRCxTQUFXK2QsZ0JBQWdCa0ksZ0JBQ3ZDOGdDLFlBQVkxb0QsUUFBVXlRLE9BQU9sb0IsUUFBUSxVQUFVRSxRQUFRdVgsUUFFdkQsTUFDRixJQUFLLGlCQUNIMG9ELFlBQVkvbUQsU0FBVytkLGdCQUFnQmdJLHlCQUN2Q2doQyxZQUFZdG1ELGVBQWlCcU8sT0FBT2xvQixRQUFRLGFBQWFFLFFBQVEyWixlQUNqRSxNQUVGLElBQUssWUFDSHNtRCxZQUFZL21ELFNBQVcrZCxnQkFBZ0IrSCxvQkFDdkNpaEMsWUFBWWw4QyxVQUFZaUUsT0FBT2xvQixRQUFRLGNBQWNFLFFBQVFzZ0MsT0FHakUsT0FBUTlnQyxNQUFNSSxjQUFjSSxRQUFRSSxRQUNsQyxJQUFLLE9BQ0g2L0QsWUFBWW5wQyxTQUFXRyxnQkFBZ0JzSSxpQkFDdkMsTUFDRixJQUFLLGVBQ0gwZ0MsWUFBWW5wQyxTQUFXRyxnQkFBZ0J1SSxrQkFDdkMsTUFDRixJQUFLLGdCQUNIeWdDLFlBQVlucEMsU0FBV0csZ0JBQWdCb0ksbUJBQ3ZDLE1BQ0YsSUFBSyxlQUNINGdDLFlBQVlucEMsU0FBV0csZ0JBQWdCc0ksaUJBQ3ZDMGdDLFlBQVk3L0IsZ0JBQWlCLEVBQzdCLE1BQ0YsSUFBSyxZQUNINi9CLFlBQVlucEMsU0FBV0csZ0JBQWdCeUksZUFDdkN1Z0MsWUFBWWhnQyxjQUFlLEVBQzNCLE1BQ0YsSUFBSyxZQUNIZ2dDLFlBQVlucEMsU0FBV0csZ0JBQWdCeUksZUFDdkN1Z0MsWUFBWS8vQixZQUFhLEVBQ3pCLE1BQ0YsSUFBSyxvQkFDSCsvQixZQUFZbnBDLFNBQVdHLGdCQUFnQnlJLGVBQ3ZDdWdDLFlBQVk5L0IsaUJBQWtCLEVBQzlCLE1BQ0YsSUFBSyxpQkFDSDgvQixZQUFZbnBDLFNBQVdHLGdCQUFnQnlJLGVBQ3ZDdWdDLFlBQVlqZ0MsaUJBQWtCLEVBQzlCLE1BQ0YsSUFBSyxZQUNIaWdDLFlBQVlucEMsU0FBV0csZ0JBQWdCd0ksb0JBQ3ZDd2dDLFlBQVkvbUQsU0FBVytkLGdCQUFnQitILG9CQUN2Q2loQyxZQUFZejRDLGFBQWMsRUFPOUJ5UCxnQkFBZ0J5SixRQUFRdS9CLFlBQzFCLENBRUEsa0JBQUF4QixDQUFvQmovRCxPQUNsQixNQUFNSyxHQUFLNHVCLEVBQUVqdkIsTUFBTUksZUFBZSsrRCxRQUFRLFNBQzdCMTdELEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUlOLEdBQUcwSSxLQUFLLFdBQ3JDdkgsTUFBTUMsUUFBTyxFQUNwQixDQUVBLGtCQUFNKzlELENBQWN4L0QsT0FDbEIsTUFBTUssR0FBSzR1QixFQUFFanZCLE1BQU1JLGVBQWUrK0QsUUFBUSxTQUNwQ3oxRCxLQUFPakcsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSU4sR0FBRzBJLEtBQUssV0FDMUMsSUFBSWtMLFFBQVUsTUFBUWxULEtBQUtDLEtBQUtDLFNBQVMsa0NBQ3pDLE1BQU1xUyxRQUFVLENBQ2RvdEQsVUFBV2o5RCxLQUFLOUYsTUFBTStULEdBQ3RCckIsTUFBTyxLQUNQc3dELFFBQVNsOUQsS0FBSzlGLE1BQU0rVCxHQUNwQmhJLEtBQU1BLEtBQUtnSSxJQUVUak8sS0FBS2dSLE9BQU85VyxRQUNkMlYsUUFBUW90RCxVQUFZajlELEtBQUtnUixNQUFNL0MsR0FDL0I0QixRQUFRakQsTUFBUTVNLEtBQUtnUixNQUFNOUYsT0FBTytDLElBRXBDLE1BQU12QixPQUFTcFAsS0FBS29QLE9BQU9uVyxRQUFPaUssSUFDaEMsSUFBSyxDQUFDLFlBQWEsTUFBTyxXQUFZLGFBQWF3QyxTQUFTeEMsRUFBRW5DLE1BQzVELE9BQU8sRUFFVCxHQUFJMkIsS0FBSzlGLE1BQU0rVCxLQUFPek4sRUFBRXlOLEdBQ3RCLE9BQU8sRUFFVCxJQUFJa3ZELFNBQVUsRUFDZCxJQUFLLE1BQU9sdUQsRUFBR3RQLEtBQU1DLE9BQU93SyxRQUFRNUosRUFBRTRhLFdBQzFCLFlBQU5uTSxHQUFtQkEsSUFBTTNSLEtBQUtzRyxLQUFLcUssS0FDckNrdkQsUUFBVUEsU0FBV3g5RCxJQUFNdVEsTUFBTW9MLDBCQUEwQjhoRCxNQUcvRCxPQUFPRCxXQUVUM3NELFNBQW9CLDZDQUNwQixJQUFLLE1BQU10VyxTQUFTd1MsT0FDbEI4RCxRQUNFQSxRQUFVLGtCQUFvQnRXLE1BQU0rVCxHQUFLLEtBQU8vVCxNQUFNNUQsS0FBTyxZQUVqRWthLFNBQW9CLHVCQUNwQlgsUUFBUXF0RCxjQUFnQixJQUFJbGhELFNBQVFoQixVQUN0QixJQUFJa1osT0FBTyxDQUNyQnpsQixNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyx1Q0FDMUJnVCxRQUNBMmpCLFFBQVMsQ0FDUDBrQixRQUFTLENBQ1B4N0MsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxpQkFDMUI0MkIsU0FBVXJhLE9BQ1IsTUFBTXFZLFNBQVcsSUFBSWlDLFNBQ25CdGEsS0FBSyxHQUFHcEcsY0FBYyxnQkFFeEIsSUFBSyxNQUFPcmQsS0FBTUYsU0FBVWc4QixTQUMxQixHQUFhLFNBQVQ5N0IsS0FDRixPQUFPMGtCLFFBQVE1a0IsTUFFbkIsSUFJTmlsQixRQUFTLFVBQ1RKLE1BQU8sU0FFTGpkLFFBQU8sRUFBSSxVQUVYVixLQUFLMnpDLFdBQVdDLFlBQVksZ0JBQWlCcmhDLFFBQ3JELENBRUEsWUFBQXd0RCxDQUFjOWdFLE9BRVosR0FEQUYsTUFBTWdoRSxhQUFhOWdFLE9BQ2Z5RCxLQUFLZ1IsTUFBTyxDQUNkLE1BQU1zc0QsU0FBVzN1RCxLQUFLdWQsTUFBTTN2QixNQUFNd3hCLGFBQWE2QyxRQUFRLGVBQ3ZEMHNDLFNBQVNyZCxVQUFZamdELEtBQUtnUixNQUFNclQsS0FDaEMyL0QsU0FBUy93RCxRQUFVdk0sS0FBS2dSLE1BQU0vQyxHQUM5QnF2RCxTQUFTOXdELFFBQVV4TSxLQUFLZ1IsTUFBTTlGLE9BQU8rQyxHQUNyQzFSLE1BQU13eEIsYUFBYUMsUUFBUSxhQUFjcmYsS0FBS0MsVUFBVTB1RCxVQUMxRCxDQUNGLENBRUEscUJBQUFuRCxDQUF1QjU5RCxPQUNyQixNQUFNZ2hFLElBQU1oaEUsTUFBTUksY0FBYzRkLGNBQzFCalYsS0FBTyxDQUNYazRELFNBQVUsT0FDVi92QyxTQUFVLGlCQUNWelgsTUFBTyxRQUNQM1gsS0FBTSxXQUNObS9CLGVBQWdCeDlCLEtBQUs5RixNQUFNc2pDLGVBQzNCcnNCLFNBQVVuUixLQUFLOUYsTUFBTWlYLFNBQ3JCN2EsS0FBTWluRSxJQUFJeGdFLFFBQVEyWixlQUNsQmpaLEtBQU0sS0FDTm9SLFNBQVUsQ0FDUnhRLEtBQU0yQixLQUFLNk8sU0FBU3hRLEtBQ3BCVixLQUFNcUMsS0FBSzZPLFNBQVNsUixPQUl4QnBCLE1BQU11eEIsY0FBY0MsYUFBYUMsUUFBUSxhQUFjcmYsS0FBS0MsVUFBVXRKLE1BQ3hFLENBRUEsZ0JBQUE4MEQsQ0FBa0I3OUQsT0FDaEIsTUFBTWdoRSxJQUFNaGhFLE1BQU1JLGNBQWM0ZCxjQUMxQmpWLEtBQU8sQ0FDWGs0RCxTQUFVLE9BQ1YvdkMsU0FBVSxZQUNWelgsTUFBTyxRQUNQM1gsS0FBTSxXQUNObS9CLGVBQWdCeDlCLEtBQUs5RixNQUFNc2pDLGVBQzNCcnNCLFNBQVVuUixLQUFLOUYsTUFBTWlYLFNBQ3JCN2EsS0FBTWluRSxJQUFJeGdFLFFBQVFzZ0MsT0FDbEI1L0IsS0FBTSxLQUNOb1IsU0FBVSxDQUNSeFEsS0FBTTJCLEtBQUs2TyxTQUFTeFEsS0FDcEJWLEtBQU1xQyxLQUFLNk8sU0FBU2xSLE9BSXhCcEIsTUFBTXV4QixjQUFjQyxhQUFhQyxRQUFRLGFBQWNyZixLQUFLQyxVQUFVdEosTUFDeEUsQ0FFQSxlQUFBKzBELENBQWlCOTlELE9BQ2YsTUFBTXNxQixPQUFTdHFCLE1BQU1JLGNBQWNnWCxjQUFjLG1CQUMzQ2lULE9BQVNycUIsTUFBTUksY0FBY2dYLGNBQWMscUJBQzNDck8sS0FBTyxDQUNYazRELFNBQVUsT0FDVi92QyxTQUFVLFlBQ1Z6WCxNQUFPLFVBQ1B3bkIsZUFBZ0J4OUIsS0FBSzlGLE1BQU1zakMsZUFDM0Jyc0IsU0FBVW5SLEtBQUs5RixNQUFNaVgsU0FDckIwVixPQUFRQSxPQUFPK0csVUFDZmhILE9BQVFBLE9BQU9nSCxVQUNmbndCLEtBQU0sS0FDTm9SLFNBQVUsQ0FDUnhRLEtBQU0yQixLQUFLNk8sU0FBU3hRLEtBQ3BCVixLQUFNcUMsS0FBSzZPLFNBQVNsUixPQUl4QnBCLE1BQU11eEIsY0FBY0MsYUFBYUMsUUFBUSxhQUFjcmYsS0FBS0MsVUFBVXRKLE1BQ3hFLENBRUEsYUFBTXF0QixDQUFTcDJCLE9BQ2IsTUFBTXEyQixXQUFhcjJCLE1BQU13eEIsYUFBYTZDLFFBQVEsY0FDOUMsR0FBbUIsS0FBZmdDLFdBQ0YsT0FBTyxFQUVULE1BQU10dEIsS0FBT3FKLEtBQUt1ZCxNQUFNMEcsWUFDTixhQUFkdHRCLEtBQUtqSCxNQUNIaUgsS0FBSzBRLFFBQVVxVyxTQUFTQyxXQUFXSSxRQUNyQ0wsU0FBU3NDLGtCQUFrQjN1QixLQUFLOUYsTUFBT29MLFlBR3JDakosTUFBTXMyQixRQUFRcDJCLE1BQ3RCLENBRUEsd0JBQU1rK0QsQ0FBb0JsK0QsT0FDeEJBLE1BQU1FLGlCQUNGRixNQUFNSSxjQUFjSSxRQUFRMjdELGlCQUN4QjE0RCxLQUFLOUYsTUFBTStuRCxnQkFBZ0IxbEQsTUFBTUksY0FBY0ksUUFBUTI3RCxVQUVqRSxDQUVBLFlBQU1pQyxHQUNBcjlELEtBQUtzRyxLQUFLMkUsTUFBTXZJLEtBQUs5RixNQUFNcXVCLGVBQWU3ekIsS0FBSzBGLE9BQU9PLEtBQzVELENBRUEsVUFBTSsvRCxHQUNBcDlELEtBQUtzRyxLQUFLMkUsTUFBTXZJLEtBQUs5RixNQUFNcXVCLGVBQWU3ekIsS0FBSzBGLE9BQU9LLE1BQzVELENBRUEsbUJBQU1tZ0UsQ0FBZXIrRCxPQUNuQixNQUFNdWlDLFNBQVcsSUFBSUgsYUFDbkIzK0IsS0FBSzlGLE1BQU15YyxRQUFVM1csS0FBSzlGLE1BQU1vUyxTQUFXdE0sS0FBSzlGLE1BQU0rVCxJQUV4RDZ3QixTQUFTSyxXQUFZLEVBQ3JCTCxTQUFTbEosVUFBVXI1QixNQUFNc3lCLFNBQzNCLENBRUEsdUJBQU1xckMsQ0FBbUIzOUQsT0FDdkIsTUFBTStJLEtBQU8sQ0FDWGpILEtBQU0sUUFDTlYsS0FBTXFDLEtBQUtnUixNQUFNclQsTUFFbkJwQixNQUFNdXhCLGNBQWNDLGFBQWFDLFFBQVEsYUFBY3JmLEtBQUtDLFVBQVV0SixNQUN4RSxDQUVBLHFCQUFNazFELENBQWlCaitELE9BQ3JCQSxNQUFNRSx1QkFDQXVELEtBQUs5RixNQUFNMm9ELGtCQUNuQixDQUVBLG1CQUFNMFcsQ0FBZWg5RCxPQUNuQixHQUFJQSxNQUFNSSxjQUFjRSxRQUFRLGNBQWUsQ0FDN0MsTUFBTXdnQyxPQUFTOWdDLE1BQU1JLGNBQWNFLFFBQVEsY0FBY0UsUUFBUXNnQyxPQUNqRXI5QixLQUFLOUYsTUFBTStpRCxpQkFBaUI1ZixPQUM5QixDQUNGLENBRUEsZUFBTWhiLENBQVc5bEIsT0FDZixNQUFNcW9CLE9BQVM1a0IsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFDOUJYLE1BQU1JLGNBQWNFLFFBQVEsU0FBU0UsUUFBUXNYLFFBRTNDdVEsUUFDRkEsT0FBT3ZlLGVBQ0w5SixNQUFNSSxjQUFjSSxRQUFRd3lDLFNBQzVCcGdDLFVBQVU1UyxPQUdoQixDQUdBLGdDQUFNKzlELFNBQ0V0NkQsS0FBSzlGLE1BQU1rbUQsMEJBQ25CLENBRUEsbUNBQU1tYSxHQUNKdjZELEtBQUs5RixNQUFNb21ELDZCQUNiLENBRUEsb0JBQU04WSxDQUFnQjc4RCxPQUNwQkEsTUFBTUUsaUJBQ04sTUFBTWdoRSxTQUFXejlELEtBQUs5RixNQUFNaVAsT0FDNUJuSixLQUFLOUYsTUFBTWlQLFFBQVVzMEQsU0FDckI5a0IsTUFBTTcvQyxLQUFLLHVCQUF3QixFQUFFMmtFLFVBQ3ZDLENBRUEsb0JBQU1wRSxDQUFnQjk4RCxPQUNwQkEsTUFBTUUsaUJBQ04sTUFBTW1NLFNBQVdyTSxNQUFNSSxjQUFjSSxRQUFRazRCLEtBQzdDajFCLEtBQUs5RixNQUFNd2pELGdCQUFnQjkwQyxTQUM3QixDQUVBLHVCQUFNMHdELENBQW1CLzhELE9BQ3ZCQSxNQUFNRSxpQkFDTnVELEtBQUs5RixNQUFNd2pELGdCQUFnQixpQkFDN0IsQ0FFQSxjQUFNMmQsQ0FBVTkrRCxPQUNkLElBQUluRyxNQUFRNk4sU0FBUzFILE1BQU1JLGNBQWN2RyxRQUFVLEtBU25ELE9BUkltRyxNQUFNbWhFLE9BQVMsSUFDakJ0bkUsTUFBa0IsSUFBVkEsTUFBYyxFQUFJQSxNQUFRLEdBR2hDbUcsTUFBTW1oRSxPQUFTLElBQ2pCdG5FLE9BQWdCLEdBR1ZtRyxNQUFNSSxjQUFjckcsTUFDMUIsSUFBSywwQkFZTCxJQUFLLCtCQUNIMEosS0FBSzlGLE1BQU1tcUQsTUFBTWp1RCxPQUNqQixNQVhGLElBQUssMEJBQ0g0SixLQUFLOUYsTUFBTWdpRCxNQUFNOWxELE9BQ2pCLE1BQ0YsSUFBSywyQkFDSDRKLEtBQUs5RixNQUFNeWhELE9BQU92bEQsT0FDbEIsTUFDRixJQUFLLDJCQUNINEosS0FBSzlGLE1BQU0yZ0QsUUFBUXprRCxPQU16QixDQUVBLGVBQUE0aUUsQ0FBaUJ6OEQsT0FDZkEsTUFBTUksY0FBY2doRSxVQUFZcGhFLE1BQU1JLGNBQWNnaEUsU0FDcERwaEUsTUFBTUksY0FBY29TLFVBQVUwTCxPQUFPLFlBQ3ZDLENBRUEsb0JBQU02Z0QsQ0FBZ0IvK0QsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUs0dUIsRUFBRWp2QixNQUFNSSxlQUFlKytELFFBQVEsU0FDcEN6MUQsS0FBT2pHLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUlOLEdBQUcwSSxLQUFLLFlBQ3BDakMsZUFBaUI0QyxLQUFLaUgsWUFBWSxDQUFFMHdELFFBQVM1OUQsS0FBSzlGLE1BQU0rK0IsVUFHOUQsR0FBSXI4QixHQUFHaWhFLFNBQVMsWUFBYSxDQUMzQixNQUFNQyxRQUFVbGhFLEdBQUc0ZCxTQUFTLGlCQUM1QnNqRCxRQUFRakMsUUFBUSxLQUFLLEtBQ25CaUMsUUFBUWg3QyxTQUNSbG1CLEdBQUdvakMsWUFBWSxXQUFVLEdBRTdCLEtBQU8sQ0FDTCxNQUFNKzlCLElBQU12eUMsRUFBRSxvQ0FFUmxlLE9BQVNrZSxFQUFFLG1DQUNqQixJQUFLLE1BQU03ZCxLQUFLdEssU0FBU2lLLE9BQ3ZCQSxPQUFPb2pDLE9BQ0wsb0RBQW9EL2lDLEVBQUVyWCwwQ0FBMENxWCxFQUFFdlgsc0JBU3RHLEdBTkEybkUsSUFBSXJ0QixPQUFPcGpDLFFBRVh5d0QsSUFBSXJ0QixPQUNGbGxCLEVBQUUsaUNBQWlDbm9CLFNBQVNnSyxZQUFZalgsZ0JBR3RENlAsS0FBS2xLLE9BQU84SyxZQUFZck8sS0FBTSxDQUNoQyxNQUFNd2xFLFdBQWF4eUMsRUFDakIsNkJBQTZCbm9CLFNBQVNnSyxZQUFZblcsaUJBRXBENm1FLElBQUlydEIsT0FBT3N0QixXQUNiLENBRUEsTUFBTXZ3RCxNQUFRK2QsRUFBRSx1Q0FDaEIsSUFBSyxNQUFNN2QsS0FBS3RLLFNBQVN3RCxXQUN2QjRHLE1BQU1pakMsT0FDSixrQ0FBa0NwekMsS0FBS0MsS0FBS0MsU0FBU21RLFlBR3pEb3dELElBQUlydEIsT0FBT2pqQyxPQUVYN1EsR0FBRzh6QyxPQUFPcXRCLElBQUlFLFFBQ2RGLElBQUlHLFVBQVUsS0FBSyxJQUFNdGhFLEdBQUdvakMsWUFBWSxhQUMxQyxDQUVGLENBRUEsc0JBQU00NEIsQ0FBa0JyOEQsT0FDdEJBLE1BQU1FLGlCQUtOLE1BQU00NEQsUUFBVTk0RCxNQUFNSSxjQUFjRSxRQUFRLFdBQ3RDc2hFLFlBQWM1aEUsTUFBTUksY0FBY0ksUUFBUXFoRSxPQUNoRCxRQUEyQixJQUFoQkQsWUFBNkIsT0FDeEMsTUFBTUMsT0FBUzV5QyxFQUFFNnBDLFNBQVMzMUQsS0FBSyxXQUFXeStELGVBR3RDQyxPQUFPUCxTQUFTLFlBRWxCTyxPQUFPdkMsUUFBUSxLQUFLLElBQU11QyxPQUFPcCtCLFlBQVksY0FFN0NvK0IsT0FBT0YsVUFBVSxLQUFLLElBQU1FLE9BQU9wK0IsWUFBWSxjQUdqRCxNQUFNOEQsVUFBWXYwQixXQUFXQyxrQkFBa0IsZUFBZTJ1RCx3QkFFOURuK0QsS0FBSzlGLE1BQU1nRSxPQUNULENBQUUsQ0FBQzRsQyxZQUFhczZCLE9BQU9QLFNBQVMsYUFDaEMsQ0FBRTcvRCxRQUFRLEdBQ2QsQ0FFQSxrQkFBQTg2RCxDQUFvQnY4RCxPQUNsQkEsTUFBTUUsaUJBQ04sTUFBTUcsR0FBSzR1QixFQUFFanZCLE1BQU1JLGVBQWVvMkQsU0FBUyxNQUN2Q24yRCxHQUFHeWhFLEdBQUcsWUFBYXpoRSxHQUFHaS9ELFFBQVEsS0FDN0JqL0QsR0FBR3NoRSxVQUFVLElBQ3BCLENBRUEsYUFBQXJGLENBQWV0OEQsT0FDYkEsTUFBTUUsaUJBQ04sTUFBTTZoRSxHQUFLOXlDLEVBQUVqdkIsTUFBTUksZUFBZTRoRSxLQUFLLE1BQ25DRCxHQUFHRCxHQUFHLFlBQWFDLEdBQUd6QyxRQUFRLEtBQzdCeUMsR0FBR0osVUFBVSxJQUNwQixDQUVBLGtCQUFNM0MsQ0FBY2gvRCxPQUNsQkEsTUFBTUUsaUJBQ04sTUFBTUcsR0FBSzR1QixFQUFFanZCLE1BQU1JLGVBQWUrK0QsUUFBUSxTQUNwQ3oxRCxLQUFPakcsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSU4sR0FBRzBJLEtBQUssWUFFMUNtd0QsZUFBZStJLFdBQVd2NEQsS0FDNUIsQ0FFQSx1QkFBYXU0RCxDQUFZdjJELE9BQ3ZCQSxNQUFNbE0sT0FBT3NSLFlBQVlveEQsb0JBQXNCbHhELFdBQVdDLFdBQ3hEdkYsTUFBTWxNLE9BQU9zUixZQUFZalgsTUFDekIsQ0FBRWtNLE9BQU8sSUFFQyxJQUFJNHhCLE9BQ2QsQ0FDRXpsQixNQUFPblIsS0FBS0MsS0FBS0MsU0FBUywyQkFDMUJnVCxRQUFTdkksTUFDVGtzQixRQUFTLENBQUMsRUFDVmxaLE1BQU8sUUFFVCxDQUNFeEIsUUFBUyxDQUFDLE9BQVEsUUFBUyxTQUMzQkcsTUFBTyxJQUNQQyxPQUFRLElBQ1I2a0QsUUFBUyxDQUFDLHFCQUNWaGxELFNBQVUsbURBR1YxYixRQUFPLEVBQ2IsQ0FNQSxpQkFBTTY4RCxDQUFhdCtELE9BQ2pCQSxNQUFNRSxnQkFVUixDQUVBLGVBQU1zK0QsQ0FBV3grRCxPQUNmQSxNQUFNRSxpQkFDTixNQUFNTyxTQUFXVCxNQUFNSSxjQUFjRSxRQUFRLE1BQU1FLFFBQVFDLFNBQ3JERixPQUFTa0QsS0FBSzlGLE1BQU0rQyxRQUFRQyxJQUFJRixVQUNsQ21TLFVBQVU1UyxRQUFVZSxLQUFLc0csS0FBSzJFLE1BQ2hDNm1CLHNCQUFzQjNlLE9BQU8sQ0FBRXBTLEtBQU0sV0FBWTJYLE1BQU9xVyxTQUFTQyxXQUFXSSxPQUFRcGIsT0FBUXhVLFFBRWhHLENBRUEsbUJBQU1nK0QsQ0FBZXYrRCxPQUNuQkEsTUFBTUUsaUJBQ04sTUFBTTRYLE9BQVM5WCxNQUFNSSxjQUFjRSxRQUFRLE1BQU1FLFFBQVFzWCxPQUNuRGtRLFlBQWNob0IsTUFBTXN5QixTQUNwQmpLLE9BQVM1a0IsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSW1YLFFBR3BDLElBQUlsRCxTQVlKLEdBTklBLFNBTENuUixLQUFLZ1IsTUFJSmhSLEtBQUs5RixNQUFNeWMsU0FBV3JaLEtBQUtvUCxPQUFPQyxPQUFPM00sS0FBS2dSLE1BQU0vQyxJQUMzQyxTQUFTak8sS0FBS2dSLE1BQU0vQyxLQUVwQixHQUFHak8sS0FBS2dSLE1BQU05RixPQUFPK0MsTUFBTWpPLEtBQUtnUixNQUFNL0MsS0FQekJqTyxLQUFLOUYsTUFBTStULEdBV25Da0IsVUFBVTVTLFFBQVVlLEtBQUtzRyxLQUFLMkUsS0FBTSxDQUN0QyxNQUFNNnFCLFNBQVcsQ0FDZnBkLE1BQU9xVyxTQUFTQyxXQUFXRyxLQUMzQm4yQixLQUFNc3VCLE9BQU90dUIsTUFFZjg0QixzQkFBc0IzZSxPQUFPMmlCLFNBQVUsQ0FBRTFtQixPQUFRLENBQUMxTSxLQUFLOUYsUUFDekQsS0FBTyxDQUNMLElBQUl5a0UscUJBOEJKLEdBN0JJcmhFLEtBQUtzRyxLQUFLa2hCLFFBQVF2bEIsTUFBUSxJQUM1Qm8vRCwyQkFBNkIsSUFBSTNpRCxTQUFRaEIsVUFDdkMsTUFBTTFWLEtBQU8sQ0FDWG1KLE1BQU8sSUFDUCtCLFFBQVNsVCxLQUFLQyxLQUFLeVcsT0FBTyx3QkFBeUIsQ0FDakQ0USxPQUFRQSxPQUFPdHVCLE9BRWpCNjlCLFFBQVMsQ0FDUHlxQyxPQUFRLENBQ05uaEUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxlQUMxQjQyQixTQUFVLElBQ0RwWixTQUFRLElBR25CNmpELFFBQVMsQ0FDUHBoRSxLQUFNLCtCQUNOSixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUMxQjQyQixTQUFVLElBQ0RwWixTQUFRLEtBSXJCSyxRQUFTLFNBQ1Q1QixRQUFTLENBQUMsT0FBUSxXQUVwQixJQUFJeWEsT0FBTzV1QixNQUFNdEgsUUFBTyxFQUFJLEtBRzVCVixLQUFLc0csS0FBS2toQixRQUFRdmxCLEtBQU8sR0FBS28vRCxxQkFBc0IsQ0FDdEQsSUFBSy81QyxPQUFPN29CLE9BQU84SyxXQUFXaFAsS0FBTSxDQUM5QnlGLEtBQUtzRyxLQUFLa2hCLFFBQVF2bEIsS0FBTyxHQUMzQndKLEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS0MsU0FBUywyQkFHOUIsSUFBSThrQyxtQkFBbUJueEIsU0FBVWtELE9BQVFrUSxhQUNqRHdmLGdCQUNQLENBQ0EsR0FBSW5mLE9BQU83b0IsT0FBTzhLLFdBQVdoUCxLQUFNLENBQ3BCLElBQUkydEMsbUJBQW1CcjBCLFNBQVVrRCxPQUFRa1EsYUFDakR3ZixnQkFDUCxDQUNGLENBQ0YsQ0FDRixDQUVBLHFCQUFNbTFCLENBQWlCMzhELE9BQ3JCLE1BQU04WCxPQUFTOVgsTUFBTUksY0FBY0UsUUFBUSxTQUN2Q04sTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRc1gsT0FDN0MsS0FDSixJQUFLQSxPQUFRLE9BQ2IsTUFBTXVRLE9BQVM1a0IsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSW1YLFFBQ2YsSUFBakI5WCxNQUFNK2xCLE9BQ0ovbEIsTUFBTXN5QixlQUFnQmpLLE9BQU90WixlQUN0QnNaLE9BQU9uWixZQUNRLElBQWpCbFAsTUFBTStsQixTQUNYL2xCLE1BQU1zeUIsZUFBZ0JqSyxPQUFPdlosV0FBVyxTQUNqQ3VaLE9BQU9qWixhQUFhLEdBRW5DLENBRUEsZUFBTXN0RCxDQUFXMThELE9BQ2YsTUFBTThYLE9BQVM5WCxNQUFNSSxjQUFjRSxRQUFRLFNBQ3ZDTixNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVFzWCxPQUM3QyxLQUNKLElBQUtBLE9BQVEsT0FDYixNQUFNdVEsT0FBUzVrQixLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJbVgsY0FDOUJ1USxPQUFPblosV0FDZixDQUVBLHdCQUFNdXZELENBQW9CeitELE9BQ3hCQSxNQUFNRSxpQkFDTixNQUFNNlgsUUFBVS9YLE1BQU1JLGNBQWNJLFFBQVF1WCxRQUN0Q3JILFFBQVUxUSxNQUFNSSxjQUFjRSxRQUFRLFFBQVFFLFFBQVFrUSxRQUN0RFgsU0FBVy9QLE1BQU1JLGNBQWNFLFFBQVEsUUFBUUUsUUFBUXdQLFFBQ3ZEOEgsT0FBUzlYLE1BQU1JLGNBQWNFLFFBQVEsTUFDdkNOLE1BQU1JLGNBQWNFLFFBQVEsTUFBTUUsUUFBUXNYLE9BQzFDLEtBRUUyQixNQUFRLElBQUlsQyxVQUVsQixJQUFLdlgsTUFBTXN5QixTQUFVLENBQ25CLE1BQU1xUCxZQUFjNUssV0FBVzdpQixTQUMzQnl0QixRQUNGbG9CLE1BQU1qQixhQUFlbXBCLE1BQU1oaEMsSUFBSSxhQUMvQjhZLE1BQU1LLFdBQWE2bkIsTUFBTWhoQyxJQUFJLGNBQzdCOFksTUFBTTRoQixpQkFBbUIxN0IsT0FBT2dpQyxNQUFNaGhDLElBQUkscUJBQzFDOFksTUFBTTZoQixzQkFBd0IzN0IsT0FBT2dpQyxNQUFNaGhDLElBQUksMEJBRW5ELENBRUE4WSxNQUFNOWIsTUFBU29TLFVBQVdXLFFBQzFCK0ksTUFBTS9OLE1BQVFxTSxRQUNkMEIsTUFBTS9QLEtBQU9vTyxhQUNQMkIsTUFBTTdVLE9BQ1o2VSxNQUFNNGYsV0FJUixDQUVBLHFCQUFNcWxDLENBQWlCMStELE9BQ3JCQSxNQUFNRSxpQkFDTixNQUFNNFgsT0FBUzlYLE1BQU1JLGNBQWNFLFFBQVEsV0FBV0UsUUFBUXNYLE9BQ3hEdkssTUFBUXZOLE1BQU1JLGNBQWNFLFFBQVEsa0JBQWtCRSxRQUFRK00sTUFDOUR5eEIsZUFBaUIsSUFBSXJDLFdBQVcsQ0FDcEMzVSxZQUFhaG9CLE1BQU1zeUIsU0FDbkIva0IsUUFFRnl4QixlQUFlcHFCLFNBQVduUixLQUFLOUYsTUFBTW9TLFNBQ3JDaXZCLGVBQWVsbkIsT0FBU0EsT0FDeEJrbkIsZUFBZXRRLGdCQUVqQixDQUVBLG9CQUFNNnVDLENBQWdCdjlELE9BR3BCLEdBRkFBLE1BQU1FLGlCQUVtRCxPQUFyREYsTUFBTUksY0FBYzRkLGNBQWN4ZCxRQUFRc2dDLE9BQWlCLE9BRS9ELE1BQU0vM0IsS0FBTyxDQUNYMlEsU0FBVStkLGdCQUFnQmtJLGdCQUMxQnJJLFNBQVVHLGdCQUFnQnVJLGtCQUMxQmhnQyxNQUNBckMsTUFBTzhGLEtBQUs5RixPQUVWcUMsTUFBTUksY0FBY29TLFVBQVV3VCxTQUFTLHdCQUN6Q2pkLEtBQUsyUSxTQUFXK2QsZ0JBQWdCZ0kseUJBQ3ZCei9CLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxxQkFDaERqZCxLQUFLMlEsU0FBVytkLGdCQUFnQitILHFCQUc5QngvQixNQUFNdWdDLFNBQ1J4M0IsS0FBS3V1QixTQUFXRyxnQkFBZ0JvSSxvQkFHbENwSSxnQkFBZ0J5SixRQUFRbjRCLEtBQzFCLENBT0EsOEJBQU15MEQsQ0FBMEJ4OUQsT0FDOUJBLE1BQU1FLGlCQUNGRixNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsaUJBQ3ZDamxCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUM1QjgyQixnQkFBZ0J5SixRQUFRLENBQ3RCeG5CLFNBQVUrZCxnQkFBZ0JnSSx5QkFDMUJuSSxTQUFVRyxnQkFBZ0JzSSxpQkFDMUJhLGdCQUFnQixFQUNoQjVZLGFBQWEsRUFDYjdOLGVBQWdCbmEsTUFBTUksY0FBY0UsUUFBUSxhQUFhRSxRQUFRMlosZUFDakV4YyxNQUFPOEYsS0FBSzlGLFFBR2Q4NUIsZ0JBQWdCeUosUUFBUSxDQUN0QnhuQixTQUFVK2QsZ0JBQWdCZ0kseUJBQzFCbkksU0FBVUcsZ0JBQWdCc0ksaUJBQzFCLy9CLE1BQ0FyQyxNQUFPOEYsS0FBSzlGLFFBR2xCLENBRUEsdUJBQU0rL0QsQ0FBbUIxOUQsT0FFdkJBLE1BQU1FLGlCQUNOLE1BQU00Z0MsT0FBUzlnQyxNQUFNSSxjQUFjNGQsY0FBY3hkLFFBQVFzZ0MsT0FDekQsR0FBZSxPQUFYQSxPQW9CQS8vQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFDNUI4MkIsZ0JBQWdCeUosUUFBUSxDQUN0QnhuQixTQUFVK2QsZ0JBQWdCZ0kseUJBQzFCbkksU0FBVUcsZ0JBQWdCc0ksaUJBQzFCYSxnQkFBZ0IsRUFDaEI1WSxhQUFhLEVBQ2J6RCxVQUFXdmtCLE1BQU1JLGNBQWNFLFFBQVEsY0FBY0UsUUFBUXNnQyxPQUM3RG5qQyxNQUFPOEYsS0FBSzlGLFFBR2Q4NUIsZ0JBQWdCeUosUUFBUSxDQUN0QnhuQixTQUFVK2QsZ0JBQWdCK0gsb0JBQzFCbEksU0FDQXQzQixNQUFNdWdDLFFBQXFCLFFBQVhPLE9BQ1pySixnQkFBZ0J3SSxvQkFDaEJ4SSxnQkFBZ0JzSSxpQkFDcEIvL0IsTUFDQXJDLE1BQU84RixLQUFLOUYsYUFwQ2QsSUFDRyxjQUFjK3hELEtBQ2IxdkQsTUFBTUksY0FBYzRkLGNBQWN4ZCxRQUFRK2hFLGFBRTVDLENBQ0EsTUFBTTFuRCxFQUFJLElBQUl0VixLQUNadkYsTUFBTUksY0FBYzRkLGNBQWN4ZCxRQUFRK2hFLG1CQUV0QzFuRCxFQUFFalcsS0FBSyxDQUFFbUIsT0FBTyxJQUNqQnhHLE1BQU1zYixFQUFFM1UsYUFBd0I1RSxJQUFadVosRUFBRTNVLE9BQ3pCMlUsRUFBRXdlLFVBQVUsQ0FDVjVsQixRQUFTeE0sWUFBWXlNLGFBQ3JCRixPQUFRelMsS0FBS0MsS0FBS0MsU0FBUyx5QkFHakMsQ0F3QkosQ0FPQSxnQkFBQXc4RCxDQUFrQno5RCxPQUNoQkEsTUFBTUUsaUJBQ0ZGLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxpQkFDdkNqbEIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQzVCODJCLGdCQUFnQnlKLFFBQVEsQ0FDdEJ4bkIsU0FBVStkLGdCQUFnQmtJLGdCQUMxQnJJLFNBQVVHLGdCQUFnQnNJLGlCQUMxQmEsZ0JBQWdCLEVBQ2hCNVksYUFBYSxFQUNialEsUUFBUy9YLE9BQU9JLGNBQWNFLFFBQVEsVUFBVUUsUUFBUXVYLFFBQ3hEcGEsTUFBTzhGLEtBQUs5RixRQUdkODVCLGdCQUFnQnlKLFFBQVEsQ0FDdEJ4bkIsU0FBVStkLGdCQUFnQmtJLGdCQUMxQnJJLFNBQVVHLGdCQUFnQnNJLGlCQUMxQi8vQixNQUNBckMsTUFBTzhGLEtBQUs5RixRQUdsQixDQTJCQSxtQkFBTWk0QixDQUFlNTFCLE1BQU82MUIsVUFHMUIsTUFBTTJzQyxVQUFZbmdFLFFBQVFDLE1BQU04eUQsY0FBYzN4RCxLQUFLOUYsTUFBTTZrRSxXQUNuRHpvRSxLQUFPaUcsT0FBT0ksZUFBZXJHLEtBT25DLEdBTklBLE1BQVF5b0UsV0FBYUEsVUFBVXpvRSxPQUNqQ3lTLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS3lXLE9BQU8saUNBQWtDLENBQUUxZCxRQUlyRGlHLE1BQU1JLGVBQ0pKLE1BQU1JLGNBQWNvUyxVQUFXLENBQ2pDLEdBQUl4UyxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsb0JBQXFCLENBQzlELE1BQU10YyxLQUFPakcsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFDNUJYLE1BQU1JLGNBQWNFLFFBQVEsU0FBU0UsUUFBUXNYLFFBRS9DLEdBQUlwTyxLQUFNLENBQ1IsTUFBTTdQLE1BQVFtRyxNQUFNSSxjQUFjdkcsTUFDOUI2TixTQUFTMUgsTUFBTUksY0FBY3ZHLE9BQzdCLEtBYUosR0FYS21HLE1BQU1JLGNBQWN2RyxNQUtsQjBGLE1BQU0xRixjQUNINlAsS0FBSy9ILE9BQU8sQ0FDaEIsQ0FBQzNCLE1BQU1JLGNBQWNyRyxNQUFPRixjQU4xQjZQLEtBQUsvSCxPQUFPLENBQ2hCLENBQUMzQixNQUFNSSxjQUFjckcsTUFBTyxPQVM1QmdILEtBQUtDLEtBQUtDLFNBQVMsK0NBQWlEeUksS0FBSzNQLFdBQW9FLElBQXJEMEosS0FBSzlGLE1BQU13NkMsWUFBWTM0QyxRQUFRdzlDLGNBQWN0MkMsSUFBcUIsQ0FDNUosTUFBTSs3RCxhQUNILzRELEtBQUs3UCxPQUFTLElBQ2Q2UCxLQUFLbEssT0FBTzhzQixhQUFhQyxZQUFjLElBRXhDazJDLFlBQ0U5aUUsT0FBTzhELEtBQUs5RixNQUFNdzZDLFdBQVczNEMsT0FBT3c5QyxhQUFhdDJDLE1BQ25EKzdELFlBQ0U5aUUsT0FBTzhELEtBQUs5RixNQUFNdzZDLFdBQVczNEMsT0FBT3c5QyxhQUFhcjJDLE9BRW5ENkYsR0FBR0MsY0FBY3NLLEtBQ2ZoVyxLQUFLQyxLQUFLeVcsT0FBTyx3QkFBeUIsQ0FDeEM5USxJQUFLaEgsT0FDSDhELEtBQUs5RixNQUFNdzZDLFdBQVczNEMsT0FBT3c5QyxhQUFhcjJDLEtBRTVDRCxJQUFLL0csT0FDSDhELEtBQUs5RixNQUFNdzZDLFdBQVczNEMsT0FBT3c5QyxhQUFhdDJDLE9BS3BELENBQ0YsQ0FDRixDQUVBLEdBQUkxRyxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsbUJBQW9CLENBRTdELEdBQWlDLDZCQUE3QmhtQixNQUFNSSxjQUFjckcsS0FLdEIsYUFKTTBKLEtBQUs5RixNQUFNeWhELE9BQ2YxM0MsU0FBUzFILE1BQU1JLGNBQWN2RyxhQUUvQjRKLEtBQUtoQyxRQUFPLEdBR2QsR0FBaUMsNEJBQTdCekIsTUFBTUksY0FBY3JHLEtBS3RCLGFBSk0wSixLQUFLOUYsTUFBTW1xRCxNQUNmcGdELFNBQVMxSCxNQUFNSSxjQUFjdkcsYUFFL0I0SixLQUFLaEMsUUFBTyxFQUdoQixDQUVBLEdBQUl6QixNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsYUFFekMsWUFEQXZpQixLQUFLOUYsTUFBTWk4QyxlQUFlNTVDLE1BQU1JLGVBSWxDLEdBQUlKLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxxQkFBc0IsQ0FDL0QsTUFBTXBGLE1BQVFsWixTQUNaMUgsTUFBTUksY0FBY0UsUUFBUSxnQkFBZ0JFLFFBQVFvZ0IsYUFFaERuZCxLQUFLOUYsTUFBTTQ3QyxlQUFlMzRCLE1BQU81Z0IsTUFBTUksY0FBY3ZHLE1BQzdELENBRUEsR0FBSW1HLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxxQkFBc0IsQ0FDL0QsTUFBTXBGLE1BQVFsWixTQUNaMUgsTUFBTUksY0FBY0UsUUFBUSxnQkFBZ0JFLFFBQVFvZ0IsT0FFdERuZCxLQUFLOUYsTUFBTTY3QyxlQUFlNTRCLE1BQU81Z0IsTUFBTUksY0FBY3ZHLE1BQ3ZELENBRUEsR0FBSW1HLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxtQkFBb0IsQ0FDN0QsTUFBTXRhLE1BQVFqSSxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUM3QlgsTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRdVgsU0FFM0NyTSxhQUNJQSxNQUFNZzNDLFlBQVkxaUQsTUFBTUksY0FBY3ZHLE1BRWhELENBRUEsR0FDRW1HLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxlQUN2Q2htQixNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsYUFDdkMsQ0FDQSxNQUFNdGMsS0FBT2pHLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQzVCWCxNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF1WCxTQUUvQyxHQUFJck8sS0FBTSxDQUNSLE1BQU1YLEtBQU8sQ0FBQyxFQUNkLEdBQUlXLEtBQUtsSyxPQUFPOEssV0FBVzNQLFFBQVMsQ0FDbEMsTUFBTTZQLE1BQVE1QixTQUFTNkIsaUJBQ3JCekssTUFBTUksY0FBY3ZHLE1BQ3BCNlAsS0FBS2xLLE9BQU9rTCxnQkFFZDNCLEtBQUtoUCxLQUFPeVEsTUFBTXpRLEtBQ2xCZ1AsS0FBSyxvQkFBc0J5QixNQUFNRCxVQUNqQ3hCLEtBQUsseUJBQTJCeUIsTUFBTUUsY0FDeEMsTUFDRTNCLEtBQUssb0JBQXNCL0ksTUFBTUksY0FBY3ZHLE1BQy9Da1AsS0FBS2hQLEtBQU9pRyxNQUFNSSxjQUFjdkcsWUFFNUI2UCxLQUFLL0gsT0FBT29ILEtBQ3BCLENBQ0YsQ0FFQSxHQUFJL0ksTUFBTUksY0FBY29TLFVBQVV3VCxTQUFTLDJCQUVBLElBQXJDaG1CLE1BQU1JLGNBQWN2RyxNQUFNd0ssT0FBYyxDQUUxQyxNQUFNd1csRUFBSSxJQUFJdFYsS0FBS3ZGLE1BQU1JLGNBQWN2RyxhQUNqQ2doQixFQUFFalcsS0FBSyxDQUFFbUIsT0FBTyxLQUNsQnhHLE1BQU1zYixFQUFFM1UsYUFBNkIsSUFBWjJVLEVBQUUzVSxTQUM3QnNHLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLDJCQUE0QixDQUMzQzVkLE1BQU9tRyxNQUFNSSxjQUFjdkcsU0FHL0JnOEIsU0FBUzcxQixNQUFNSSxjQUFjckcsTUFBUWdILEtBQUtDLEtBQUt5VyxPQUM3QyxxQkFHTixDQUdGLEdBQUl6WCxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMsb0JBR0YsSUFBckNobUIsTUFBTUksY0FBY3ZHLE1BQU13SyxRQUNtQyxPQUE3RHJFLE1BQU1JLGNBQWNFLFFBQVEsY0FBY0UsUUFBUXNnQyxPQUNsRCxDQUVBLE1BQU1qbUIsRUFBSSxJQUFJdFYsS0FBS3ZGLE1BQU1JLGNBQWN2RyxhQUNqQ2doQixFQUFFalcsS0FBSyxDQUFFbUIsT0FBTyxLQUNsQnhHLE1BQU1zYixFQUFFM1UsYUFBc0I1RSxJQUFadVosRUFBRTNVLFNBQ3RCc0csR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sMkJBQTRCLENBQzNDNWQsTUFBT21HLE1BQU1JLGNBQWN2RyxTQUcvQmc4QixTQUFTNzFCLE1BQU1JLGNBQWNyRyxNQUFRZ0gsS0FBS0MsS0FBS3lXLE9BQzdDLHFCQUdOLENBTUYsR0FBSXpYLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxnQkFBaUIsQ0FDMUQsTUFBTXFDLE9BQVM1a0IsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFDOUJYLE1BQU1JLGNBQWNFLFFBQVEsU0FBU0UsUUFBUXNYLFFBRXpDcE0sTUFBUWpJLEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQzdCWCxNQUFNSSxjQUFjMkMsUUFBUS9DLE1BQU1JLGNBQWNzaUUsZUFBZTdvRSxPQUVqRSxHQUFJd3VCLFFBQVUzYyxNQUNaLE9BQVExTCxNQUFNSSxjQUFjSSxRQUFRa0wsT0FDbEMsSUFBSyxhQUNHMmMsT0FBTzFtQixPQUFPLENBQ2xCLHVCQUF3QitKLE1BQU1nRyxHQUM5Qix5QkFBMEJoRyxNQUFNM1IsT0FFbEMsTUFDRixJQUFLLG1CQUNHc3VCLE9BQU8xbUIsT0FBTyxDQUNsQiw2QkFBOEIrSixNQUFNZ0csR0FDcEMsK0JBQWdDaEcsTUFBTTNSLE9BS2hELENBR0EsR0FBSWlHLE1BQU1JLGNBQWNvUyxVQUFVd1QsU0FBUyxlQUFnQixDQUN6RCxNQUFNcUMsT0FBUzVrQixLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUM5QlgsTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRc1gsUUFFM0N1USxjQUNJQSxPQUFPMW1CLE9BQU8sQ0FBRTVILEtBQU1pRyxNQUFNSSxjQUFjdkcsT0FFcEQsQ0FLQSxHQUFJbUcsTUFBTUksY0FBY29TLFVBQVV3VCxTQUFTLGtCQUFtQixDQUM1RCxNQUFNcUMsT0FBUzVrQixLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUM5QlgsTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRc1gsUUFFL0MsR0FBSXVRLE9BRUYsR0FBeUMsSUFBckNyb0IsTUFBTUksY0FBY3ZHLE1BQU13SyxPQUFjLENBQzFDLE1BQU13VyxFQUFJLElBQUl0VixLQUFLdkYsTUFBTUksY0FBY3ZHLE9BRXZDLFNBRE1naEIsRUFBRWpXLEtBQUssQ0FBRW1CLE9BQU8sSUFDbEJ4RyxNQUFNc2IsRUFBRTNVLGFBQTZCLElBQVoyVSxFQUFFM1UsTUFDN0JzRyxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTyxpQ0FBa0MsQ0FDakQ1ZCxNQUFPbUcsTUFBTUksY0FBY3ZHLGNBSS9CLE9BQVFtRyxNQUFNSSxjQUFjSSxRQUFRK00sT0FDbEMsSUFBSyxlQUNHOGEsT0FBTzFtQixPQUFPLENBQ2xCLDZCQUE4QjNCLE1BQU1JLGNBQWN2RyxRQUVwRCxNQUNGLElBQUssYUFDR3d1QixPQUFPMW1CLE9BQU8sQ0FDbEIsMkJBQTRCM0IsTUFBTUksY0FBY3ZHLFFBRWxELE1BQ0YsSUFBSyxnQkFDR3d1QixPQUFPMW1CLE9BQU8sQ0FDbEIsOEJBQStCM0IsTUFBTUksY0FBY3ZHLFFBSzdELE1BQ0UsT0FBUW1HLE1BQU1JLGNBQWNJLFFBQVErTSxPQUNsQyxJQUFLLGVBQ0c4YSxPQUFPMW1CLE9BQU8sQ0FDbEIsNkJBQThCLE9BRWhDLE1BQ0YsSUFBSyxhQUNHMG1CLE9BQU8xbUIsT0FBTyxDQUNsQiwyQkFBNEIsT0FFOUIsTUFDRixJQUFLLGdCQUNHMG1CLE9BQU8xbUIsT0FBTyxDQUNsQiw4QkFBK0IsT0FNM0MsQ0FDRixDQUVGLE9BQU84QixLQUFLc1IsT0FBT3BULE9BQU9rMEIsU0FDNUIsRUM3aEVLLE1BQU04c0MscUJBQXFCekosZUFLaEMsYUFBTTdrQyxHQUNKLE1BQU1DLGdCQUFrQngwQixNQUFNdTBCLFVBb0Q5QixPQWpEQUMsVUFBVXN1QyxjQUFlLEVBQ3pCdHVDLFVBQVV1dUMsZUFBa0JwL0QsS0FBSzlGLE1BQU0wc0MsYUFBYSxvQkFBcUIsRUFFekUvVixVQUFVd3VDLE9BQXFELE9BQTVDeHVDLFVBQVV2ckIsS0FBS3ZKLE9BQU9DLFFBQVErdEIsSUFBSTN6QixNQUNyRHk2QixVQUFVeXVDLE1BQW1ELE9BQTNDenVDLFVBQVV2ckIsS0FBS3ZKLE9BQU9DLFFBQVFxMkMsR0FBR2o4QyxNQUNuRHk2QixVQUFVMHVDLFFBQXNELE9BQTVDMXVDLFVBQVV2ckIsS0FBS3ZKLE9BQU9DLFFBQVF5K0MsSUFBSXJrRCxNQUV0RHk2QixVQUFVMnVDLFlBQWEsRUFFdkIzdUMsVUFBVXNuQyxtQkFDUnY0RCxPQUFPQyxVQUFVQyxlQUFlaEgsS0FBSyszQixVQUFVa2xDLFlBQWEsVUFDM0RsbEMsVUFBVXZyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQjBuQixVQUFVdW5DLG1CQUNSeDRELE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLKzNCLFVBQVVrbEMsWUFBYSxVQUMzRGxsQyxVQUFVdnJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BQy9CMG5CLFVBQVV3bkMsb0JBQ1J6NEQsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUsrM0IsVUFBVWtsQyxZQUFhLFdBQzNEbGxDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0IwbkIsVUFBVXluQyxxQkFDUjE0RCxPQUFPQyxVQUFVQyxlQUFlaEgsS0FBSyszQixVQUFVa2xDLFlBQWEsWUFDMURsbEMsVUFBVXZyQixLQUFLdkosT0FBT21ELE1BQU1pSyxRQUFVN0wsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQ3BFMnpCLFVBQVUwbkMsc0JBQ1IzNEQsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUsrM0IsVUFBVWtsQyxZQUFhLFlBQzNEbGxDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0IwbkIsVUFBVTJuQyxzQkFBdUIsRUFDakMzbkMsVUFBVTR1QyxhQUNSNXVDLFVBQVVzbkMsb0JBQ1Z0bkMsVUFBVXVuQyxvQkFDVnZuQyxVQUFVd25DLHFCQUNWeG5DLFVBQVV5bkMsc0JBQ1Z6bkMsVUFBVTBuQyx1QkFDVjFuQyxVQUFVMm5DLHFCQUVaM25DLFVBQVU2dUMsMkNBQTZDbnlELFdBQVdDLFdBQ2hFcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU84NUMsVUFBVTBnQixxQkFBcUJuZ0UsTUFDckQsQ0FDRWtNLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVTh1QyxnQ0FBa0NweUQsV0FBV0MsV0FDckRxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVl1eUQsT0FDbEMsQ0FDRXQ5RCxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSWhCdGdDLFNBQ1QsQ0FFQSxpQkFBQS9XLENBQW1CQyxNQUdqQixHQUZBMWQsTUFBTXlkLGtCQUFrQkMsTUFFcEJ6YyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFBb0IsQ0FDM0M4QyxLQUFLdzVELFFBQU94NUQsS0FBS3c1RCxNQUFRLElBRTlCLE1BQU1xRyxZQUFjLENBQ2xCNXhELEdBQUksZ0JBQ0p3TCxRQUFTLFlBQ1Q0N0MsUUFBUyxDQUNQLENBQ0U1N0MsUUFBUyxPQUNUdkwsTUFBTyxDQUNMLENBQUUvUSxPQUFRLFlBQWFFLE1BQU8scUJBQzlCLENBQUVGLE9BQVEsWUFBYUUsTUFBTyxnQkFDOUIsQ0FBRUYsT0FBUSxvQkFBcUJFLE1BQU8sMEJBT3hDeWlFLG1CQUFxQixJQUFJcE0sZ0JBQy9Cb00sbUJBQW1CNW1FLEtBQUsybUUsWUFBYTlsRCxLQUFNL1osS0FBSysvRCwyQkFBMkI3bUUsS0FBSzhHLE9BQ2hGQSxLQUFLdzVELE1BQU1waUUsS0FBSzBvRSxtQkFDbEIsQ0FFQS9sRCxLQUFLcmEsS0FBSyxhQUFhK3hCLE1BQU16eEIsS0FBS2dnRSxZQUFZOW1FLEtBQUs4RyxNQU1yRCxDQUVBLGdDQUFNKy9ELENBQTRCeGpFLE9BQ2hDLE1BQU15Z0UsWUFBYyxDQUNsQi9tRCxTQUFVK2QsZ0JBQWdCbUksb0JBQzFCZ0IsZ0JBQWdCLEVBQ2hCNVksYUFBYSxFQUNiaG9CLE1BQ0FzM0IsU0FBVUcsZ0JBQWdCd0ksb0JBQzFCdGlDLE1BQU84RixLQUFLOUYsT0FHZCxPQUFRcUMsTUFBTUksY0FBY0ksUUFBUUksUUFDbEMsSUFBSyxZQUNINi9ELFlBQVlucEMsU0FBV0csZ0JBQWdCeUksZUFDdkN1Z0MsWUFBWWpnQyxpQkFBa0IsRUFDOUJpZ0MsWUFBWWhnQyxjQUFlLEVBQzNCLE1BQ0YsSUFBSyxZQUNIZ2dDLFlBQVlucEMsU0FBV0csZ0JBQWdCeUksZUFDdkN1Z0MsWUFBWWpnQyxpQkFBa0IsRUFDOUJpZ0MsWUFBWS8vQixZQUFhLEVBQ3pCLE1BQ0YsSUFBSyxvQkFDSCsvQixZQUFZbnBDLFNBQVdHLGdCQUFnQnlJLGVBQ3ZDdWdDLFlBQVlqZ0MsaUJBQWtCLEVBQzlCaWdDLFlBQVk5L0IsaUJBQWtCLEVBS2xDbEosZ0JBQWdCeUosUUFBUXUvQixZQUMxQixDQUVBLGlCQUFNZ0QsQ0FBYXpqRSxPQUVqQixHQURBQSxNQUFNRSxpQkFFSHVELEtBQUs5RixNQUFNNkIsT0FBTzdFLFFBQVFreUIsUUFBUTJVLGFBQ2xDLzlCLEtBQUs5RixNQUFNNkIsT0FBTzdFLFFBQVFreUIsUUFBUTRVLGFBS3JDLEdBQ0U3dUIsVUFBVTVTLFFBQ1ZlLEtBQUtzRyxLQUFLMkUsS0FDVixDQUNBLElBQUk4TixXQUFZM1IsU0FDaEIsSUFBS25JLE1BQU1zeUIsU0FBVSxDQUNuQixNQUFNcVAsWUFBYzVLLFdBQVc3aUIsT0FBTyxDQUNwQ2dqQix5QkFBeUIsSUFFdkJ5SyxRQUNGeDVCLFNBQVd4SSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxjQUM1Qm1aLFdBQWFuYSxPQUFPZ2lDLE1BQU1oaEMsSUFBSSxlQUVsQyxDQUNBLE1BQU1rMkIsU0FBVyxDQUNmcGQsTUFBTyxVQUNQNlEsT0FBUTdtQixLQUFLOUYsTUFBTTZCLE9BQU83RSxRQUFRa3lCLFFBQVEyVSxZQUMxQ25YLE9BQVE1bUIsS0FBSzlGLE1BQU02QixPQUFPN0UsUUFBUWt5QixRQUFRNFUsYUFDMUM3WCxVQUFXbm1CLEtBQUs5RixNQUFNNkIsT0FBT2tpQyxNQUFNNS9CLE1BQU11QyxPQUNyQ1osS0FBSzlGLE1BQU02QixPQUFPa2lDLE1BQU01L0IsS0FDeEIyQixLQUFLOUYsTUFBTTVELEtBQ2ZnVyxTQUFVdE0sS0FBSzlGLE1BQU1pWCxVQUV1QixjQUExQzdULEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQzVCazJCLFNBQVM3dkIsT0FBUSxRQUVLLElBQWJtQixXQUEwQjB1QixTQUFTMXVCLFNBQVdBLGVBQy9CLElBQWYyUixhQUE0QitjLFNBQVMvYyxXQUFhQSxZQUM3RCxNQUFNcVksTUFBTyxJQUFLckMsVUFBWTFtQixvQkFBb0J5dEIsVUFDOUMxRSxNQUNGbmYsV0FBV0ssY0FDVCxLQUNBdFMsS0FBS0MsS0FBS3lXLE9BQU8saUNBQWtDLENBQ2pEZ0MsTUFBTzBZLE9BSWYsS0FBTyxDQUNMLE1BQU16SSxRQUFVLENBQ2RXLE9BQVE1bUIsS0FBSzlGLE1BQU0yaEQsb0JBQ25CaDFCLE9BQVE3bUIsS0FBSzlGLE1BQU0waEQsbUJBQ25CejFCLFVBQVdubUIsS0FBSzlGLE1BQU02QixPQUFPa2lDLE1BQU01L0IsTUFBTXVDLE9BQ3JDWixLQUFLOUYsTUFBTTZCLE9BQU9raUMsTUFBTTUvQixLQUN4QjJCLEtBQUs5RixNQUFNNUQsS0FDZmdXLFNBQVV0TSxLQUFLOUYsTUFBTWlYLFVBRXZCNlUsYUFBYTZGLGFBQWE1RixRQUFTMXBCLE1BQU1zeUIsU0FDM0MsQ0FDRixDQUVBLFlBQUE4cEMsR0FDRTM0RCxLQUFLOUYsTUFBTXVsRCxlQUFlLGtCQUMxQnBqRCxNQUFNczhELGNBQ1IsQ0FTQSx5QkFBV3AvQyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUFTLE9BQ3BDNFcsU0FBVSxDQUFDLENBQUVDLGFBQWMsUUFBU0MsYUFBYyxPQUNsRDdXLFNBQVUsK0NBQ1ZFLE1BQU8sSUFDUHFtRCxXQUFXLEVBQ1hDLGFBQWEsR0FFakIsQ0FRQSxtQkFBTS90QyxDQUFlNTFCLE1BQU82MUIsVUFDMUIsS0FBSTcxQixNQUFNSSxlQUNKSixNQUFNSSxjQUFjb1MsV0FDbEJ4UyxNQUFNSSxjQUFjb1MsVUFBVXdULFNBQVMseUJBUy9DLE9BQU9sbUIsTUFBTTgxQixjQUFjNTFCLE1BQU82MUIsVUFSNUJweUIsS0FBSzlGLE1BQU11bUQsa0JBQ1Rsa0QsTUFBTUksY0FBY3JHLEtBQ3BCaUcsTUFBTUksY0FBY3ZHLE1BTzlCLENBRUEsZ0JBQU8rcEUsQ0FBV3ZwRSxJQUFLbWpCLE1BQ3JCQSxLQUFLRixPQUFPLE9BQ2QsQ0FFQSxXQUFBdW1ELENBQWExakUsR0FDWEwsTUFBTStqRSxZQUFZMWpFLEdBQ2xCd2lFLGFBQWFpQixVQUFVempFLEVBQUdzRCxLQUFLOGdDLFNBQ2pDLEVDcFBLLE1BQU11L0IsMEJBQTBCbkIsYUFLckMsYUFBTXR1QyxHQUNKLE1BQU1DLGdCQUFrQngwQixNQUFNdTBCLFVBRTlCLE9BREFDLFVBQVUydUMsWUFBYSxFQUNoQjN1QyxTQUNULENBTUEseUJBQVd0WCxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUFTLE1BQU8sYUFFL0MsRUN4QkssTUFBTTZtRCxrQ0FBa0NobkQsZ0JBQzdDLHlCQUFXQyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLFFBQ1ZoTCxNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyxrQ0FDMUJrYyxTQUFVLG1EQUNWRyxPQUFRLFFBRVosQ0FFQSxhQUFNK1csR0FDSixNQUFNdHJCLFdBQWFqSixNQUFNdTBCLFVBRXpCLE9BREF0ckIsS0FBS2k3RCxXQUFrQyxhQUFyQmo3RCxLQUFLZ00sT0FBT2pULEtBQ3ZCaUgsSUFDVCxDQUVBLGlCQUFBd1UsQ0FBbUJDLE1BQ2pCQSxLQUFLcmEsS0FBSyxlQUFlOUQsT0FBT29FLEtBQUs0aEMsZ0JBQWdCMW9DLEtBQUs4RyxPQUMxRCtaLEtBQUtyYSxLQUFLLGtCQUFrQit4QixNQUFNenhCLEtBQUt3Z0UsZUFBZXRuRSxLQUFLOEcsT0FDM0QzRCxNQUFNeWQsa0JBQWtCQyxLQUMxQixDQUVBLGNBQUF5bUQsQ0FBZ0Jqa0UsT0FDZCxHQUEyQyxRQUF2Q0EsTUFBTUksY0FBY0ksUUFBUXVsQixPQUFrQixDQUNoRCxNQUFNdkksS0FBT3lSLEVBQUVqdkIsTUFBTUksZUFBZUUsUUFBUSxtQkFDdEN3QixLQUFPMGIsS0FBS3JhLEtBQUssZUFBZTBoQyxNQUNoQzlxQyxLQUFPeWpCLEtBQUtyYSxLQUFLLGVBQWUwaEMsTUFDaENockMsTUFBUTZOLFNBQVM4VixLQUFLcmEsS0FBSyxnQkFBZ0IwaEMsT0FDM0MrWixpQkFDSm43QyxLQUFLc1IsT0FBT3BYLE1BQU02QixPQUFPby9DLGtCQUFvQixHQUMvQ0EsaUJBQWlCL2pELEtBQUssQ0FDcEJpSCxLQUFNL0gsS0FDTjhrRCxVQUFXaGxELE1BQ1hpbEQsU0FBbUIsYUFBVGg5QyxPQUVaODhDLGlCQUFpQmp2QyxNQUFLLFNBQVVvdkMsS0FBTUMsT0FDcEMsT0FBT0QsS0FBS2o5QyxLQUFLbTlDLGNBQWNELE1BQU1sOUMsS0FDdkMsSUFDQTJCLEtBQUtzUixPQUFPcFgsTUFBTWdFLE9BQU8sQ0FBRSx3QkFBeUJpOUMsa0JBQ3RELENBQ0FuN0MsS0FBS2liLE9BQ1AsQ0FFQSxlQUFBMm1CLENBQWlCcmxDLE9BQ2YsTUFBTXdkLEtBQU95UixFQUFFanZCLE1BQU1JLGVBQWVFLFFBQVEsbUJBQzVDbUQsS0FBS3NSLE9BQU9oYixLQUFPeWpCLEtBQUtyYSxLQUFLLGVBQWUwaEMsTUFDNUNwaEMsS0FBS3NSLE9BQU9qVCxLQUFPMGIsS0FBS3JhLEtBQUssZUFBZTBoQyxNQUM1Q3BoQyxLQUFLaEMsUUFBTyxFQUNkLENBRUEsbUJBQU1tMEIsQ0FBZTUxQixNQUFPNjFCLFVBQVcsRUM1Q2xDLE1BQU1xdUMsMkJBQTJCaEwsZUFDdEMsaUJBQUFFLEdBQ0UsR0FBOEIsdUJBQTFCMzFELEtBQUtxRixZQUFZL08sS0FBK0IsQ0FDN0MwSixLQUFLMGdFLGFBQVkxZ0UsS0FBSzBnRSxZQUFhLEdBQ3hDLElBQUl2c0MsUUFBVTkzQixNQUFNczVELG9CQW1CcEIsT0FsQkF4aEMsUUFBVSxDQUNSLENBQ0U5MkIsTUFBTzJDLEtBQUswZ0UsV0FDUnBqRSxLQUFLQyxLQUFLQyxTQUFTLGlCQUNuQkYsS0FBS0MsS0FBS0MsU0FBUyxrQkFDdkJxSCxNQUFPLGtCQUNQcEgsS0FBTXVDLEtBQUswZ0UsV0FDUCx5QkFDQSx5QkFDSmxOLFFBQVNqM0QsT0FBU3lELEtBQUsyZ0UsZ0JBQWdCcGtFLFNBUXpDd1AsT0FBT29vQixTQUNGQSxPQUNULENBQ0EsT0FBTzkzQixNQUFNczVELG1CQUNmLENBRUEscUJBQU1nTCxDQUFpQnBrRSxPQUNyQnlELEtBQUswZ0UsWUFBYzFnRSxLQUFLMGdFLFdBQ3hCLElBQUlwaEUsUUFBVVYsUUFBUUMsTUFBTXVPLFVBQVVxekQsbUJBQW1CbG5ELGdCQUNyRHZaLEtBQUswZ0UsYUFDUHBoRSxRQUFVVixRQUFRQyxNQUFNMmEsWUFBWWxhLFFBQVMsQ0FDM0NtYSxRQUFTLENBQUMsT0FBUSxRQUFTLFlBQWEsY0FDeENJLE9BQVEsSUFDUm9tRCxXQUFXLEVBQ1hybUQsTUFBTyxPQUdYdGEsUUFBUTBSLE1BQVFoUixLQUFLVixRQUFRMFIsWUFDdkJoUixLQUFLaWIsY0FDTGpiLEtBQUtoQyxRQUFPLEVBQU1zQixRQUMxQixDQUVBLGFBQU1zeEIsR0FDSixNQUFNQyxnQkFBa0J4MEIsTUFBTXUwQixVQUU1QjV3QixLQUFLaWtCLGlCQUNrRCxJQUFoRGprQixLQUFLOUYsTUFBTXVGLFFBQVEsT0FBUSx3QkFFNUJPLEtBQUs5RixNQUFNaTdCLFFBQVEsT0FBUSxpQkFBaUIsR0FHbERuMUIsS0FBS2lrQixpQkFDc0QsSUFBcERqa0IsS0FBSzlGLE1BQU11RixRQUFRLE9BQVEsNEJBRTVCTyxLQUFLOUYsTUFBTWk3QixRQUFRLE9BQVEscUJBQXFCLEdBRXhEdEUsVUFBVSt2QyxtQkFDUjVnRSxLQUFLOUYsTUFBTXVGLFFBQVEsT0FBUSxtQkFBb0IsRUFDakRveEIsVUFBVWd3QyxrQkFDUjdnRSxLQUFLOUYsTUFBTXVGLFFBQVEsT0FBUSx1QkFBd0IsRUFDckRveEIsVUFBVWl3QyxjQUFnQnhqRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFFaEQ4QyxLQUFLOUYsTUFBTXc2QyxZQUNiN2pCLFVBQVV2ckIsS0FBS3ZKLE9BQU9raUMsTUFBTXlXLFdBQWExMEMsS0FBSzlGLE1BQU13NkMsV0FBV3ArQyxLQUMvRHU2QixVQUFVdnJCLEtBQUt2SixPQUFPa2lDLE1BQU04aUMsZUFBZ0IsR0FDdkNsd0MsVUFBVXZyQixLQUFLdkosT0FBT2tpQyxNQUFNOGlDLGVBQWdCLEVBRS9DL2dFLEtBQUs5RixNQUFNeTZDLFdBQ2I5akIsVUFBVXZyQixLQUFLdkosT0FBT2tpQyxNQUFNMFcsVUFBWTMwQyxLQUFLOUYsTUFBTXk2QyxVQUFVcitDLEtBQzdEdTZCLFVBQVV2ckIsS0FBS3ZKLE9BQU9raUMsTUFBTStpQyxjQUFlLEdBQ3RDbndDLFVBQVV2ckIsS0FBS3ZKLE9BQU9raUMsTUFBTStpQyxjQUFlLEVBRWxEbndDLFVBQVVvd0MsZ0JBQWtCamhFLEtBQUs5RixNQUFNdWlELGlCQUN2QzVyQixVQUFVcXdDLGdCQUFrQmxoRSxLQUFLOUYsTUFBTWlpRCxzQkFDdkN0ckIsVUFBVXN3Qyx3QkFDUmpsRSxPQUFPOEQsS0FBSzlGLE1BQU1paUQseUJBQ2xCamdELE9BQU84RCxLQUFLOUYsTUFBTTZCLE9BQU9tN0QsYUFBYXhpQixZQUN4QzdqQixVQUFVdXdDLGVBQWlCcGhFLEtBQUs5RixNQUFNcWlELHFCQUN0QzFyQixVQUFVd3dDLHVCQUNSbmxFLE9BQU84RCxLQUFLOUYsTUFBTXFpRCx3QkFDbEJyZ0QsT0FBTzhELEtBQUs5RixNQUFNNkIsT0FBT203RCxhQUFhdmlCLFdBQ3hDOWpCLFVBQVV5d0MsY0FBZ0J0aEUsS0FBSzlGLE1BQU13aUQsb0JBQ3JDN3JCLFVBQVUwd0Msc0JBQ1JybEUsT0FBTzhELEtBQUs5RixNQUFNd2lELHVCQUNsQnhnRCxPQUFPOEQsS0FBSzlGLE1BQU02QixPQUFPbTdELGFBQWF6aUIsVUFDeEM1akIsVUFBVTJ3QyxnQkFBa0J0bEUsT0FDMUI4RCxLQUFLOUYsTUFBTXc2QyxZQUFZMzRDLE9BQU93OUMsYUFBYXQyQyxLQUU3QzR0QixVQUFVNHdDLGdCQUFrQnZsRSxPQUMxQjhELEtBQUs5RixNQUFNdzZDLFlBQVkzNEMsT0FBT3c5QyxhQUFhcjJDLEtBRTdDMnRCLFVBQVU2d0Msb0JBQ1IxaEUsS0FBSzlGLE1BQU04L0MsbUJBQW1CaitDLE9BQU84c0IsYUFBYTZyQixXQUNsRDdqQixVQUFVMndDLGlCQUNWeGhFLEtBQUs5RixNQUFNOC9DLG1CQUFtQmorQyxPQUFPOHNCLGFBQWE2ckIsV0FDbEQ3akIsVUFBVTR3QyxnQkFDWjV3QyxVQUFVOHdDLGdCQUFrQjl3QyxVQUFVa2xDLFlBQVk2TCxRQUFRaGhFLE9BQ3REaXdCLFVBQVVrbEMsWUFBWTZMLFFBQVFoaEUsT0FDOUIsRUFDSml3QixVQUFVZ3hDLGVBQWlCN2hFLEtBQUs5RixNQUFNeTZDLFdBQVc1NEMsT0FBTytsRSxRQUNwRDloRSxLQUFLOUYsTUFBTXk2QyxXQUFXNTRDLE9BQU8rbEUsUUFDN0IsRUFDSmp4QyxVQUFVa3hDLG1CQUFxQmx4QyxVQUFVOHdDLGdCQUFrQjl3QyxVQUFVZ3hDLGVBRXJFaHhDLFVBQVU4ckIsb0JBQXNCMzhDLEtBQUs5RixNQUFNeWlELG9CQUUzQzlyQixVQUFVbXhDLGlCQUFtQjFrRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFDdkQyekIsVUFBVW94QyxrQkFBb0Iza0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBQ3hEMnpCLFVBQVVxeEMsdUJBQXlCNWtFLEtBQUttRSxTQUFTdkUsSUFDL0MsT0FDQSwwQkFFRjJ6QixVQUFVc3hDLGNBQWdCdHhDLFVBQVVteEMsa0JBQW9CbnhDLFVBQVVveEMsa0JBRWxFcHhDLFVBQVV1eEMsaUJBQW1CLEdBQzdCLElBQUssTUFBTXZtRSxPQUFPbkgsS0FBSzJ0RSxnQkFDckJ4eEMsVUFBVXV4QyxpQkFBaUJockUsS0FBSyxDQUFFeUUsSUFBS3VsQyxJQUFLOWpDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLMnRFLGdCQUFnQnhtRSxRQUd0RmcxQixVQUFVeXhDLG1CQUFxQixDQUFDLGNBQWUsZUFBZ0IsY0FBZSxnQkFBZ0J0L0QsU0FBUzZ0QixVQUFVdnJCLEtBQUt2SixPQUFPdThDLFNBQVN0a0MsUUFFdEk2YyxVQUFVMHhDLGVBQWlCLEdBQzNCLElBQUssTUFBTTFtRSxPQUFPbkgsS0FBSzh0RSxlQUN5QixJQUExQzl0RSxLQUFLOHRFLGNBQWMzbUUsS0FBS3RGLE9BQU9xSyxRQUFnQmxNLEtBQUs4dEUsY0FBYzNtRSxLQUFLdEYsT0FBT3lNLFNBQVM2dEIsVUFBVXZyQixLQUFLdkosT0FBT3U4QyxTQUFTdGtDLFVBQ3hINmMsVUFBVTB4QyxlQUFlbnJFLEtBQUssQ0FBRXlFLElBQUt1bEMsSUFBSzlqQyxLQUFLQyxLQUFLQyxTQUFTOUksS0FBSzh0RSxjQUFjM21FLEtBQUt2RixRQUl6RnU2QixVQUFVZ21DLGFBQWU3MkQsS0FBSzlGLE1BQU0wc0MsYUFBYSxnQkFDNUMvVixVQUFVZ21DLGVBQ2JobUMsVUFBVXluQixTQUFXLENBQ25Cd0wsY0FBZW4wQixTQUFTMnpCLGVBQWV6eUIsVUFBVXZyQixLQUFLdkosT0FBT3U4QyxTQUFTdGtDLE9BQVE2YyxVQUFVdnJCLEtBQUt2SixPQUFPdThDLFNBQVNpTCxPQUFRdmpELEtBQUs5RixNQUFNNHBELGVBQ2hJRSxPQUFRcjBCLFNBQVMyekIsZUFBZXp5QixVQUFVdnJCLEtBQUt2SixPQUFPdThDLFNBQVN0a0MsT0FBUTZjLFVBQVV2ckIsS0FBS3ZKLE9BQU91OEMsU0FBU2lMLE9BQVF2akQsS0FBSzlGLE1BQU04cEQsUUFDekhELEtBQU1wMEIsU0FBUzJ6QixlQUFlenlCLFVBQVV2ckIsS0FBS3ZKLE9BQU91OEMsU0FBU3RrQyxPQUFRNmMsVUFBVXZyQixLQUFLdkosT0FBT3U4QyxTQUFTaUwsT0FBUXZqRCxLQUFLOUYsTUFBTTZwRCxRQUkzSGx6QixVQUFVNHhDLGtCQUFvQm5sRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFFeEQyekIsVUFBVTZ2QyxXQUFhMWdFLEtBQUswZ0UsYUFBZTd2QyxVQUFVdWxDLGtCQUNyRHZsQyxVQUFVL2tCLFVBQVksR0FDdEIsSUFBSTQyRCxhQUFlLEdBQ25CLElBQUssTUFBTXo2RCxTQUFTNG9CLFVBQVVsTixRQUN4QmtOLFVBQVVnd0MsbUJBQXNCNTRELE1BQU1sTSxPQUFPOEssV0FBVzFQLFNBQ3REOFEsTUFBTWxNLE9BQU84SyxXQUFXM1AsU0FDdEJ3ckUsZUFBaUJ6NkQsTUFBTWxNLE9BQU9rTCxpQkFDaEN5N0QsYUFBZXo2RCxNQUFNbE0sT0FBT2tMLGVBQzVCNHBCLFVBQVUva0IsVUFBVTFVLEtBQUssQ0FDdkJ1ckUsa0JBQWtCLEVBQ2xCcnNFLEtBQU0yUixNQUFNbE0sT0FBT2tMLGtCQUl6QjRwQixVQUFVL2tCLFVBQVUxVSxLQUFLNlEsUUFvQjdCLEdBakJBNG9CLFVBQVUreEMsY0FBZ0IsSUFBSS94QyxVQUFVbE4sUUFBUXpYLE1BQUssQ0FBQ3hQLEVBQUd3akIsSUFDaERBLEVBQUVua0IsT0FBTzNGLE1BQVFzRyxFQUFFWCxPQUFPM0YsUUFFbkN5NkIsVUFBVWd5QyxVQUFZLElBQUloeUMsVUFBVSt4QyxlQUFlbmtFLE1BQU0sRUFBRyxJQUM1RG95QixVQUFVK3hDLGNBQWdCL3hDLFVBQVUreEMsY0FBY3JzRSxRQUNoRDBSLE9BQVM0b0IsVUFBVWd3QyxvQkFBc0I1NEQsTUFBTWxNLE9BQU84SyxXQUFXMVAsU0FFbkUwNUIsVUFBVWl5QyxXQUFhLElBQUlqeUMsVUFBVXFsQyxZQUFhcmxDLFVBQVVvbEMsVUFDekQvcEQsTUFBSyxDQUFDeFAsRUFBR3dqQixJQUNEeGpCLEVBQUVYLE9BQU9rTSxNQUFNK0YsTUFBTTVYLE1BQVE4cEIsRUFBRW5rQixPQUFPa00sTUFBTStGLE1BQU01WCxRQUUxRDJzRSxVQUNBdGtFLE1BQU0sRUFBRyxHQUNab3lCLFVBQVVteUMsa0JBQW9CMWxFLEtBQUttRSxTQUFTdkUsSUFDMUMsT0FDQSw0QkFFRTJ6QixVQUFVbXlDLG9CQUFzQm55QyxVQUFVdnJCLEtBQUt2SixPQUFPa2lDLE1BQU0yNEIsV0FBWSxDQUMxRSxNQUFNaHpELEtBQU81RCxLQUFLOUYsTUFBTWlxRCxjQUNwQnZnRCxPQUNGaXRCLFVBQVV2ckIsS0FBS3ZKLE9BQU9raUMsTUFBTTI0QixXQUFhaHpELEtBQUt0TixLQUVsRCxDQTRDQSxPQTFDQXU2QixVQUFVb3lDLGVBQTZDLElBQTVCcHlDLFVBQVVsTixPQUFPL2lCLE9BRTVDaXdCLFVBQVVzbkMsbUJBQ1J2NEQsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUsrM0IsVUFBVWtsQyxZQUFhLFVBQzNEbGxDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0IwbkIsVUFBVXVuQyxtQkFDUng0RCxPQUFPQyxVQUFVQyxlQUFlaEgsS0FBSyszQixVQUFVa2xDLFlBQWEsVUFDM0RsbEMsVUFBVXZyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQjBuQixVQUFVd25DLG9CQUNSejRELE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLKzNCLFVBQVVrbEMsWUFBYSxXQUMzRGxsQyxVQUFVdnJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BQy9CMG5CLFVBQVV5bkMscUJBQ1IxNEQsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUsrM0IsVUFBVWtsQyxZQUFhLFlBQzFEbGxDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssUUFBVTdMLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUNwRTJ6QixVQUFVMG5DLHNCQUNSMzRELE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLKzNCLFVBQVVrbEMsWUFBYSxZQUMzRGxsQyxVQUFVdnJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BRS9CMG5CLFVBQVU0dUMsYUFDVjV1QyxVQUFVc25DLG9CQUNSdG5DLFVBQVV1bkMsb0JBQ1Z2bkMsVUFBVXduQyxxQkFDVnhuQyxVQUFVeW5DLHNCQUNWem5DLFVBQVUwbkMsdUJBQ1YxbkMsVUFBVTJuQyxxQkFFWjNuQyxVQUFVcXlDLHdCQUEwQjMxRCxXQUFXQyxXQUM3Q3FqQixVQUFVdnJCLEtBQUt2SixPQUFPbzhDLFVBQ3RCLENBQ0U3MUMsT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVOHVDLGdDQUFrQ3B5RCxXQUFXQyxXQUNyRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWXV5RCxPQUNsQyxDQUNFdDlELE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJaEJ0Z0MsU0FDVCxDQUVBLG9CQUFBc3lDLENBQXNCcHBELE1BQ3BCMWQsTUFBTThtRSxxQkFBcUJwcEQsTUFFM0IvWixLQUFLb2pFLGtCQURhLENBQUMsb0NBQ2dCcDNELFFBQU8sQ0FBQ3EzRCxJQUFLQyxPQUM5QyxNQUFNcnNCLEdBQUtsOUIsS0FBS3JhLEtBQUs0akUsS0FFckIsT0FEQUQsSUFBSUMsS0FBT3ZrRCxNQUFNQyxLQUFLaTRCLElBQUlqekMsS0FBSWl6QyxJQUFNQSxHQUFHc3NCLGFBQ2hDRixNQUNOLENBQUMsRUFDTixDQUVBLHVCQUFBRyxDQUF5QnpwRCxNQUN2QjFkLE1BQU1tbkUsd0JBQXdCenBELE1BQzlCLE1BQU0wcEQsVUFBWSxDQUFDLG9DQUNiQyxVQUFZMWpFLEtBQUtvakUsbUJBQXFCLENBQUMsRUFDN0MsSUFBSyxNQUFNRSxPQUFPRyxVQUFXLENBQ2hCMXBELEtBQUtyYSxLQUFLNGpFLEtBQ2xCL08sTUFBSyxDQUFDajBDLEVBQUcyMkIsTUFBU0EsR0FBR3NzQixXQUFhRyxVQUFVSixPQUFPaGpELElBQU0sSUFDOUQsQ0FDRixDQU1BLHlCQUFXL0csR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFVBQVcsUUFBUyxhQUN0Q0MsU0FBVSxxREFDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1JvbUQsV0FBVyxFQUNYNXZDLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFFBQVNDLGFBQWMsT0FDbERtdUMsUUFBUyxDQUFDLHFCQUNWbHVDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGFBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxZQUlqQixDQUVBLGlCQUFBN1csQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFFcEIvWixLQUFLOUYsTUFBTSsrQixVQUVibGYsS0FDR3JhLEtBQUssb0NBQ0wreEIsT0FBTW52QixhQUFldEMsS0FBSzJqRSxZQUFZcG5FLFNBQ3pDd2QsS0FDR3JhLEtBQUsscUJBQ0wreEIsT0FBTW52QixlQUFrQnRDLEtBQUs5RixNQUFNby9DLG9CQUN0Q3YvQixLQUNHcmEsS0FBSyxvQkFDTCt4QixPQUFNbnZCLGVBQWtCdEMsS0FBSzlGLE1BQU0wK0MsbUJBQ3RDNytCLEtBQUtyYSxLQUFLLGNBQWMreEIsT0FBTWwxQixPQUFTeUQsS0FBSzRqRSxlQUFlcm5FLFNBVTNEd2QsS0FBS3JhLEtBQUsscUJBQXFCK3hCLE9BQU1sMUIsUUFDbkN5RCxLQUFLNmpFLG9CQUFvQnRuRSxNQUFLLElBRWhDd2QsS0FBS3JhLEtBQUsseUJBQXlCK3hCLE9BQU1sMUIsUUFDdkN5RCxLQUFLOGpFLHdCQUF3QnZuRSxNQUFLLElBRWhDZSxLQUFLc0csS0FBSzJFLE9BQ1p3UixLQUNHcmEsS0FBSyx5QkFDTCt4QixNQUFNenhCLEtBQUsrakUsdUJBQXVCN3FFLEtBQUs4RyxPQUMxQytaLEtBQ0dyYSxLQUFLLDRCQUNMK3hCLE1BQU16eEIsS0FBS2drRSwwQkFBMEI5cUUsS0FBSzhHLE9BQzdDK1osS0FDR3JhLEtBQUssOEJBQ0x1a0UsS0FBS2prRSxLQUFLa2tFLHdCQUF3QmhyRSxLQUFLOEcsT0FDMUMrWixLQUNHcmEsS0FBSyx3QkFDTCt4QixNQUFNenhCLEtBQUtta0UscUJBQXFCanJFLEtBQUs4RyxPQUN4QytaLEtBQUtyYSxLQUFLLGlCQUFpQit4QixNQUFNenhCLEtBQUtva0UsZUFBZWxyRSxLQUFLOEcsT0FDMUQrWixLQUFLcmEsS0FBSyxvQkFBb0IreEIsTUFBTXp4QixLQUFLcWtFLGtCQUFrQm5yRSxLQUFLOEcsUUFHdEUsQ0FFQSxjQUFBb2tFLEdBQ0UsTUFBTTVrRSxPQUFTUSxLQUFLOUYsTUFBTTZCLE9BQU91OEMsU0FBUzk0QyxPQUFTWixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUs5RixNQUFNNkIsT0FBT3U4QyxTQUFTOTRDLFFBQVUsR0FDaEhBLE9BQU9wSSxLQUFLLENBQ1ZkLEtBQU0sR0FDTjRNLElBQUssS0FDTEQsSUFBSyxLQUNMcWhFLFNBQVUsRUFDVkMsVUFBVyxHQUNYQyxXQUFZLEVBQ1pDLFlBQWEsR0FDYkMsYUFBYyxFQUNkQyxjQUFlLEtBRWpCM2tFLEtBQUs5RixNQUFNZ0UsT0FBTyxDQUFFLHlCQUEwQnNCLFFBQ2hELENBRUEsaUJBQUE2a0UsQ0FBbUI5bkUsT0FDakIsTUFDTXdoRSxJQURJeGhFLE1BQU1JLGNBQ0ZFLFFBQVEsU0FDaEIyQyxPQUFTWixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUs5RixNQUFNNkIsT0FBT3U4QyxTQUFTOTRDLFFBQ2xFQSxPQUFPMjJCLE9BQU9qNkIsT0FBTzZoRSxJQUFJaGhFLFFBQVFvZ0IsT0FBUSxHQUN6Q25kLEtBQUs5RixNQUFNZ0UsT0FBTyxDQUFFLHlCQUEwQnNCLFFBQ2hELENBRUEsb0JBQUEya0UsQ0FBc0I1bkUsT0FFcEIsT0FEQUEsTUFBTUUsaUJBQ0VGLE1BQU1JLGNBQWNJLFFBQVFrNEIsTUFDbEMsSUFBSyw0QkFDSGoxQixLQUFLOUYsTUFBTWk3QixRQUNULE9BQ0EsNkJBQ0NuMUIsS0FBSzlGLE1BQU1rdEIsMkJBRWQsTUFDRixJQUFLLGlCQUNIcG5CLEtBQUs5RixNQUFNaTdCLFFBQVEsT0FBUSxrQkFBbUJuMUIsS0FBSzlGLE1BQU1pcEQsZ0JBRy9ELENBRUEsNEJBQU00Z0IsQ0FBd0J4bkUsT0FDNUJBLE1BQU1FLGlCQUNOLElBQUk2akUsMEJBQ0YsQ0FDRXBtRSxNQUFPOEYsS0FBSzlGLE1BQ1ptRSxLQUFNOUIsTUFBTUksY0FBY0ksUUFBUXNCLE1BRXBDLENBQUMsR0FDREwsUUFBTyxFQUNYLENBRUEsNkJBQU1rbUUsQ0FBeUIzbkUsT0FDN0IsTUFBTXdrQyxNQUFRdlYsRUFBRWp2QixNQUFNSSxlQUNoQmdJLE9BQVNvOEIsTUFBTWxrQyxRQUFRLFlBQVl5SSxLQUFLLFVBQzlDLFFBQXVFLElBQTVEdEYsS0FBSzlGLE1BQU02QixPQUFPby9DLG1CQUFtQngyQyxTQUFTeTJDLFVBQTJCLENBQ2xGLE1BQU1ELGlCQUFtQnY4QyxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUs5RixNQUFNNkIsT0FBT28vQyxrQkFDbkVBLGlCQUFpQngyQyxRQUFReTJDLFVBQVluM0MsU0FBUzg4QixNQUFNSyxNQUFPLElBQzNEcGhDLEtBQUs5RixNQUFNZ0UsT0FBTyxDQUFFLDBCQUEyQmk5QyxrQkFDakQsQ0FDRixDQUVBLHlCQUFBNm9CLENBQTJCem5FLE9BQ3pCQSxNQUFNRSxpQkFDTixNQUFNa0ksT0FBUzZtQixFQUFFanZCLE1BQU1JLGVBQ3BCRSxRQUFRLFlBQ1J5SSxLQUFLLFVBQ0Y2MUMsaUJBQW1CbjdDLEtBQUs5RixNQUFNNkIsT0FBT28vQyxrQkFBb0IsR0FDL0RBLGlCQUFpQmhsQixPQUFPeHhCLE9BQVEsR0FDaEN3MkMsaUJBQWlCanZDLE1BQUssU0FBVW92QyxLQUFNQyxPQUNwQyxPQUFPRCxLQUFLajlDLEtBQUttOUMsY0FBY0QsTUFBTWw5QyxLQUN2QyxJQUNBMkIsS0FBSzlGLE1BQU1nRSxPQUFPLENBQUUsMEJBQTJCaTlDLGtCQUNqRCxDQUVBLHlCQUFNMG9CLENBQXFCdG5FLE9BTXpCLGFBTE15RCxLQUFLOUYsTUFBTWk3QixRQUNmLE9BQ0EsaUJBQ0NuMUIsS0FBSzlGLE1BQU11RixRQUFRLE9BQVEsd0JBRWpCTyxLQUFLaEMsUUFBTyxFQUMzQixDQUVBLDZCQUFNOGxFLENBQXlCdm5FLE9BTTdCLGFBTE15RCxLQUFLOUYsTUFBTWk3QixRQUNmLE9BQ0EscUJBQ0NuMUIsS0FBSzlGLE1BQU11RixRQUFRLE9BQVEsNEJBRWpCTyxLQUFLaEMsUUFBTyxFQUMzQixDQUVBLGlCQUFNMmxFLENBQWFwbkUsT0FDakJBLE1BQU1FLGlCQUNOLE1BQU02WCxRQUFVL1gsTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRc1gsYUFDdkRyVSxLQUFLOUYsTUFBTTJuRCxhQUFhdnRDLFFBQVMvWCxNQUFNc3lCLFNBQy9DLENBRUEsY0FBQSswQyxDQUFnQnJuRSxPQUNkQSxNQUFNRSxpQkFDTixNQUFNNEIsS0FBTzlCLE1BQU1JLGNBQWNJLFFBQVFzQixLQUNuQzRILEtBQU9qRyxLQUFLOUYsTUFBTW1FLE1BQ3BCNEgsTUFBTUEsS0FBS2xJLE1BQU1DLFFBQU8sRUFDOUIsQ0FFQSxhQUFBbTBCLENBQWU1MUIsTUFBTzYxQixVQUNwQixNQUFNcjJCLE9BQVM2QyxRQUFRQyxNQUFNdWYsYUFBYWdVLFdBQVdyMkIsT0FDakRBLE9BQU91OEMsVUFBVTk0QyxTQUNuQjR5QixTQUFTLDBCQUE0Qnh5QixPQUFPSixPQUFPekQsT0FBT3U4QyxTQUFTOTRDLFFBQVUsS0FFL0VuRCxNQUFNODFCLGNBQWM1MUIsTUFBTzYxQixTQUM3QixDQUVBLGtCQUFPa2lCLENBQWF2MkMsTUFBT2djLE1BQ3pCLEdBQUl6YyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx3QkFBeUIsQ0FDckQsR0FBSUksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQzVCLEdBRUUsU0FEQUksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQTBCOEssY0FHcERqSyxNQUFNd1QsUUFBUTJoRCxJQUNaLGtCQUNBLDBDQVNGLEdBTkFuMUQsTUFBTXdULFFBQVEyaEQsSUFDWixrQkFDQTUxRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFLa0MsVUFBNURJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUMxQixDQUNBLElBQUkwbkUsV0FBWUMsYUFDaEIsSUFBSyxJQUFJdmtELEVBQUksRUFBR0EsRUFBSXpSLFNBQVNpMkQsWUFBWWxrRSxPQUFRMGYsSUFDL0MsR0FBSXpSLFNBQVNpMkQsWUFBWXhrRCxHQUFHeWtELE1BQU1DLFNBQVMsYUFBYyxDQUN2REosV0FBYS8xRCxTQUFTaTJELFlBQVl4a0QsR0FDbEMsS0FDRixDQUdGLEdBQUlza0QsV0FDRixJQUFLLElBQUl0a0QsRUFBSSxFQUFHQSxFQUFJc2tELFdBQVdLLE1BQU1ya0UsT0FBUTBmLElBQzNDLEdBQ3VDLDRCQUFyQ3NrRCxXQUFXSyxNQUFNM2tELEdBQUc0a0QsYUFDcEIsQ0FDQUwsYUFBZXZrRCxFQUNmLEtBQ0YsQ0FHSixHQUFJdWtELGFBQWMsQ0FDaEIsTUFBTU0sU0FBV1AsV0FBV0ssTUFBTUosY0FBY3RsQyxNQU1oRCxPQUxBNGxDLFNBQVNDLGVBQWUsZ0JBQ3hCRCxTQUFTRSxZQUNQLGFBQ0EvbkUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBRXBCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwrQkFDaEMsSUFBSyxPQVNMLFFBQ0Vpb0UsU0FBU0UsWUFBWSxrQkFBbUIsUUFDeEMsTUFSRixJQUFLLFVBQ0hGLFNBQVNFLFlBQVksa0JBQW1CLFdBQ3hDLE1BQ0YsSUFBSyxRQUNIRixTQUFTRSxZQUFZLGtCQUFtQixTQU05QyxDQUNGLENBOERKLEdBMURJL25FLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlDQUlMLFNBRnJCSSxLQUFLbUUsU0FDRnZFLElBQUksT0FBUSwrQkFDWjhLLGNBRUhqSyxNQUFNd1QsUUFBUTJoRCxJQUNaLG1CQUNBLHFDQUdGbjFELE1BQU13VCxRQUFRMmhELElBQ1osbUJBQ0E1MUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUNBSzVCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFHMUIsU0FEQUksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQXFCOEssY0FHL0NqSyxNQUFNd1QsUUFBUTJoRCxJQUNaLHFCQUNBLHFDQUdGbjFELE1BQU13VCxRQUFRMmhELElBQ1oscUJBQ0E1MUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBSzVCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFDNUJhLE1BQU13VCxRQUFRMmhELElBQ1osMkJBQ0E1MUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBRzFCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDNUJhLE1BQU13VCxRQUFRMmhELElBQ1osMEJBQ0E1MUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBRzFCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw0QkFDNUJhLE1BQU13VCxRQUFRMmhELElBQ1osaUNBQ0E1MUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNEJBR3pCSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw2QkFDN0JhLE1BQU13VCxRQUFRMmhELElBQUksaUJBQWtCLFFBQ3BDbjFELE1BQU13VCxRQUFRMmhELElBQUksZ0NBQWlDLFNBR2pENTFELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUFvQixDQUN4QixJQUFJb29FLFNBQzFCLGtCQUNBaG9FLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG9CQUd6QnFvRSxPQUNBbCtELE1BQUssU0FBVW0rRCxZQUNkMzJELFNBQVM0MkQsTUFBTXoyRCxJQUFJdzJELFdBQ3JCLElBQ0N4VyxPQUFNLFNBQVV4eEMsT0FDZnpVLEdBQUdDLGNBQWN3VSxNQUFNQSxNQUN6QixHQUNKLENBRUEsR0FBSWxnQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFBd0IsQ0FDckIsSUFBSW9vRSxTQUNqQyxrQkFDQWhvRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFDMUIsQ0FBRXdvRSxPQUFRLFNBR1RILE9BQ0FsK0QsTUFBSyxTQUFVbStELFlBQ2QzMkQsU0FBUzQyRCxNQUFNejJELElBQUl3MkQsV0FDckIsSUFDQ3hXLE9BQU0sU0FBVXh4QyxPQUNmelUsR0FBR0MsY0FBY3dVLE1BQU1BLE1BQ3pCLEdBQ0osQ0FFQSxHQUFJbGdCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHVCQUF3QixDQUNwRCxNQUFNcUMsS0FBTyxHQUFHakMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBQ3RDcUMsT0FBU2lzQixFQUFFLFNBQVMwbkMsSUFBSSxjQUMxQjFuQyxFQUFFLFNBQVMwbkMsSUFBSSxZQUFhM3pELEtBRWhDLENBQ0YsQ0FFQSxRQUEwQyxJQUEvQnhCLE1BQU03RCxPQUFPNkIsT0FBT3FpRSxPQUM3QixJQUFLLE1BQU92aUUsSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUXJNLE1BQU03RCxNQUFNNkIsT0FBT3FpRSxRQUFTLENBQ3BFLE1BQU1ELFlBQWM1dUQsV0FBV29CLGtCQUFrQjlVLEtBQzNDdWlFLE9BQVNya0QsS0FBS3JhLEtBQUssV0FBV3krRCxlQUNoQy9uRSxNQUFNdXZFLFNBQVV2SCxPQUFPaEosU0FBUyxZQUMvQmdKLE9BQU83d0IsWUFBWSxXQUMxQixDQUVKLEVDOWxCSyxNQUFNcTRCLFdBQ1gsMEJBQU9DLENBQXFCanZFLElBQUttakIsS0FBTXpVLE1BQ3JDLE1BQU13Z0UsY0FBZ0J4Z0UsS0FBS3lnRSxRQUFRemdFLEtBQUswZ0UsYUFBZSxHQUNsREYsZ0JBSUwvckQsS0FBS3JhLEtBQUssY0FBYzYwRCxNQUFLLENBQUNqMEMsRUFBRzIyQixNQUcvQixNQUFNZ3ZCLE9BQVNodkIsR0FBR3BKLGFBQWEscUJBQ3pCcTRCLHFCQUF1Qmp2QixHQUFHdGpDLGNBQWMsdUJBRXhDd3lELFVBQVlMLGNBQWNNLFdBQVdscEUsSUFBSStvRSxRQWUvQyxHQWJJRSxVQUFVMW1FLFFBQVEsT0FBUSxVQUM1QityQixFQUFFMDZDLHNCQUFzQkcsUUFDdEIsdURBQXVEL29FLEtBQUtDLEtBQUtDLFNBQy9ELCtGQUlKZ3VCLEVBQUUwNkMsc0JBQXNCRyxRQUN0QixnREFBZ0Qvb0UsS0FBS0MsS0FBS0MsU0FDeEQsNEZBSzRDLGFBQWhERixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFDMUJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUUxQixHQUFJaXBFLFVBQVVHLFdBQVksQ0FDeEIsTUFBTUMsZ0JBQWtCdHZCLEdBQUd0akMsY0FBYyxxQkFDbkM2eUQsZUFBaUJELGdCQUFnQjV5RCxjQUFjLGVBQy9DeFMsS0FDSixJQUFNZ2xFLFVBQVVHLFdBQWEsSUFBTWxrRSxLQUFLdUksTUFBTXc3RCxVQUFVRyxZQUMxRCxPQUFRbGtFLEtBQUt1SSxNQUFNdzdELFVBQVVHLGFBQzNCLEtBQUt4eUQsVUFBVUQsYUFBYU0sT0FDMUJveUQsZ0JBQWdCeDNELFVBQVVDLElBQUksVUFDOUJ3M0QsZUFBZTU0QyxVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMsZUFDOUNncEUsZUFBZS8zRCxNQUFRdE4sS0FDdkIsTUFDRixLQUFLMlMsVUFBVUQsYUFBYU8sUUFDMUJteUQsZ0JBQWdCeDNELFVBQVVDLElBQUksV0FDOUJ3M0QsZUFBZTU0QyxVQUFZdHdCLEtBQUtDLEtBQUtDLFNBQVMsZ0JBQzlDZ3BFLGVBQWUvM0QsTUFBUXROLEtBQ3ZCLE1BQ0YsS0FBSzJTLFVBQVVELGFBQWFFLFFBQzFCd3lELGdCQUFnQngzRCxVQUFVQyxJQUFJLG1CQUM5QnczRCxlQUFlNTRDLFVBQVl0d0IsS0FBS0MsS0FBS0MsU0FDbkMsOEJBRUZncEUsZUFBZS8zRCxNQUFRdE4sS0FDdkIsTUFDRixLQUFLMlMsVUFBVUQsYUFBYUksS0FDMUJzeUQsZ0JBQWdCeDNELFVBQVVDLElBQUksZ0JBQzlCdzNELGVBQWU1NEMsVUFBWXR3QixLQUFLQyxLQUFLQyxTQUNuQywyQkFFRmdwRSxlQUFlLzNELE1BQVF0TixLQUN2QixNQUNGLEtBQUsyUyxVQUFVRCxhQUFhM0osUUFDMUJxOEQsZ0JBQWdCeDNELFVBQVVDLElBQUksbUJBQzlCdzNELGVBQWU1NEMsVUFBWXR3QixLQUFLQyxLQUFLQyxTQUNuQyw4QkFFRmdwRSxlQUFlLzNELE1BQVF0TixLQUN2QixNQUNGLEtBQUsyUyxVQUFVRCxhQUFhSyxTQUMxQnF5RCxnQkFBZ0J4M0QsVUFBVUMsSUFBSSxZQUM5QnczRCxlQUFlNTRDLFVBQVl0d0IsS0FBS0MsS0FBS0MsU0FDbkMsK0JBRUZncEUsZUFBZS8zRCxNQUFRdE4sS0FHN0IsT0FDSyxHQUFJZ2xFLFVBQVVHLFdBQWEsRUFBRyxDQUNuQyxNQUFNRyxHQUFLeHZCLEdBQUd0akMsY0FBYyxlQUFlQSxjQUFjLE1BQ25EcWhCLEtBQU9paUIsR0FBR3RqQyxjQUFjLG1CQUM5Qjh5RCxHQUFHbG5DLE1BQU1tbkMsV0FBYSxNQUN0QkQsR0FBR2xuQyxNQUFNb25DLFdBQWEsc0JBQ3RCM3hDLEtBQUt1SyxNQUFNbW5DLFdBQWEsTUFDeEIxeEMsS0FBS3VLLE1BQU1vbkMsV0FBYSxzQkFFeEIxdkIsR0FBRzFYLE1BQU00ekIsTUFBUSxVQUNqQmxjLEdBQUcxWCxNQUFNcW5DLFdBQWEsUUFDdEIzdkIsR0FBRzFYLE1BQU1tbkMsV0FBYSxLQUN4QixLQUVGM3NELEtBQUtyYSxLQUFLLGFBQWEreEIsT0FBTWwxQixPQUFTcXBFLFdBQVdpQixhQUFhdHFFLFNBQ2hFLENBRUEseUJBQWFzcUUsQ0FBY3RxRSxPQUN6QkEsTUFBTUUsaUJBQ05GLE1BQU11L0Qsa0JBQ04sTUFDTWwvRCxHQURNTCxNQUFNSSxjQUNIRSxRQUFRLGNBQ2pCZ3pCLFFBQVV2eUIsS0FBS2pHLE9BQU8rdUUsV0FBV2xwRSxJQUFJTixHQUFHRyxRQUFRK3BFLGFBQ2xEajNDLEVBQUUzMUIsTUFBTSsrQixVQUNOcEosRUFBRXB3QixRQUFRLE9BQVEsZ0JBQ2Rvd0IsRUFBRXNGLFFBQVEsT0FBUSxVQUFVLFNBRTVCdEYsRUFBRXNGLFFBQVEsT0FBUSxVQUFVLElBSXRDLE1BQU00eEMsY0FBZ0JsM0MsRUFBRTMxQixNQUFNbWxELGlCQUFpQnh2QixFQUFFcHdCLFFBQVEsT0FBUSxXQUM3RG93QixFQUFFcHdCLFFBQVEsT0FBUSxVQUNoQm93QixFQUFFeTJDLFdBQWFTLFNBQVN6cEUsS0FBS2pHLE9BQU8ydkUsY0FBY24zQyxFQUFFNWhCLEdBQUk4NEQsU0FDdkR6cEUsS0FBS2pHLE9BQU8ydkUsY0FBY24zQyxFQUFFNWhCLEdBQUk4NEQsUUFDekMsRUFZS3prRSxlQUFlKzhDLGVBQ3BCNG5CLEtBQ0EsUUFBWSxLQUFJLFlBQWUsRUFBSSxlQUFtQixDQUFDLEdBQU0sQ0FBQyxHQUc5RCxNQUFNMXFELFFBQVUsR0FDaEIsSUFBSyxNQUFPLENBQUV0TyxNQUFPZzVELElBQUk3OEQsVUFBVyxDQUVsQyxNQUFNKzdELFVBQVlubUUsS0FBS29tRSxXQUFXbHBFLElBQUkrUSxJQUdoQzlNLFdBQWFnbEUsVUFBVWpzRSxNQUFNbWxELGlCQUMvQjhtQixVQUFVMW1FLFFBQVEsT0FBUSxXQUU5QjhjLFFBQVFubEIsS0FBSyxDQUFFKzVDLElBQUtsakMsR0FBSXE0RCxXQUFZbmxFLE1BQ3RDLENBQ0EsT0FBS29iLFFBQVEzYixjQUdQWixLQUFLcTNDLHdCQUF3QixZQUFhOTZCLFNBRXpDdmMsTUFMcUJBLElBTTlCLENDbEpPLE1BQU1rbkUsbUJBQW1CNXRELGdCQUM5Qix5QkFBV0MsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBQzVCQyxTQUFVLCtDQUNWRSxNQUFPLElBQ1BDLE9BQVEsT0FDUnBMLE1BQU8sdUJBQ1BrTCxlQUFlLEVBQ2ZxM0MsZUFBZSxFQUNmQyxnQkFBZ0IsR0FFcEIsQ0FFQSxhQUFNcmdDLEdBQ0osTUFBTUMsVUFBWXgwQixNQUFNdTBCLFVBU3hCLE9BUkFDLFVBQVVzMkMsVUFBWXZuRSxPQUFPbUUsS0FBSzhzQixVQUFVdmYsT0FBTzYxRCxXQUFXbjdELFFBQU8sQ0FBQ283RCxJQUFLdnJFLE9BQ3pFdXJFLElBQUlod0UsS0FBSyxDQUFFZCxLQUFNdUYsSUFBS0EsSUFBS2cxQixVQUFVdmYsT0FBTzYxRCxVQUFVdHJFLE9BQy9DdXJFLE1BQ04sSUFBSWw3RCxLQUFLdEUsY0FBY3VFLGVBQzFCMGtCLFVBQVV3MkMsYUFBZXpuRSxPQUFPbUUsS0FBSzhzQixVQUFVdmYsT0FBTysxRCxjQUFjcjdELFFBQU8sQ0FBQ283RCxJQUFLdnJFLE9BQy9FdXJFLElBQUlod0UsS0FBSyxDQUFFeUUsSUFBS2cxQixVQUFVdmYsT0FBTzYxRCxVQUFVdHJFLE1BQVEsR0FBSXZGLEtBQU11RixJQUFLc21ELE9BQVF0eEIsVUFBVXZmLE9BQU8rMUQsYUFBYXhyRSxLQUFNeXJFLE9BQVF6MkMsVUFBVXZmLE9BQU8rMUQsYUFBYXhyRSxLQUFLNlQsUUFBUTFQLEtBQUtzUixPQUFPaTJELGFBQWMsTUFDcExILE1BQ04sSUFBSWw3RCxLQUFLdEUsY0FBY3VFLGVBQ25CMGtCLFNBQ1QsQ0FFQSxpQkFBQS9XLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BQ3hCQSxLQUFLcmEsS0FBSyxhQUFhOUQsT0FBT29FLEtBQUt3bkUsVUFBVXR1RSxLQUFLOEcsT0FDbEQrWixLQUFLcmEsS0FBSyxrQkFBa0IreEIsTUFBTXp4QixLQUFLeW5FLGFBQWF2dUUsS0FBSzhHLE9BQ3pEK1osS0FBS3JhLEtBQUssU0FBU2dvRSxNQUFNMW5FLEtBQUsybkUsUUFBUXp1RSxLQUFLOEcsTUFDN0MsQ0FFQSxTQUFBd25FLENBQVdqckUsT0FDVCxNQUFNcVYsSUFBTTRaLEVBQUVqdkIsTUFBTUksZUFDcEJxRCxLQUFLc1IsT0FBTysxRCxhQUFhejFELElBQUkvVSxRQUFRLE1BQU15SSxLQUFLLFNBQVdzTSxJQUFJd3ZCLE1BQy9EcGhDLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxZQUFBeXBFLENBQWNsckUsT0FDWixNQUNNakcsS0FETWsxQixFQUFFanZCLE1BQU1JLGVBQ0hFLFFBQVEsTUFBTXlJLEtBQUssUUFDcEN0RixLQUFLc1IsT0FBTysxRCxhQUFhL3dFLE1BQVEwSixLQUFLc1IsT0FBT2dnRCxTQUFXMXBELGNBQWNpcEQsWUFBWXY2RCxNQUNsRjBKLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxPQUFBMnBFLENBQVNwckUsT0FDUCxNQUFNcVYsSUFBTTRaLEVBQUVqdkIsTUFBTUksZUFDZHJHLEtBQU9zYixJQUFJL1UsUUFBUSxNQUFNeUksS0FBSyxRQUNwQ3RGLEtBQUtzUixPQUFPKzFELGFBQWEvd0UsTUFBUTBKLEtBQUtzUixPQUFPZ2dELFNBQVcxL0MsSUFBSXd2QixLQUM5RCxDQUVBLG1CQUFNalAsQ0FBZTUxQixNQUFPNjFCLFVBQ3RCNzFCLE1BQU1rMkIsWUFDSnp5QixLQUFLc1IsT0FBT3MyRCxXQUFhdHFFLEtBQUtDLEtBQUtDLFNBQVMseUJBQzlDd0MsS0FBS2liLGNBQ0Npc0QsV0FBV1csaUJBQWlCN25FLEtBQUtzUixPQUFPdzJELFdBQVk5bkUsS0FBS3NSLE9BQU8rMUQsZUFFeEVybkUsS0FBS3NSLE9BQU8wSixTQUFRLEdBRXhCLENBRUEsNkJBQWE2c0QsQ0FBa0JDLFdBQVlULGNBQ3pDLE1BQU1uNUQsTUFBUSxHQUNSeEIsT0FBUyxDQUFDLEVBQ1ZHLE9BQVMsQ0FBQyxFQUNoQixJQUFLLE1BQU0zTyxVQUFVNHBFLFdBQVksQ0FDL0I1cEUsT0FBT3d6QyxVQUFVempDLEdBQUtvNUQsYUFBYW5wRSxPQUFPNUgsV0FDTCxJQUExQjRILE9BQU93ekMsVUFBVThmLE9BQzFCdHpELE9BQU93ekMsVUFBVThmLEtBQU9sMEQsS0FBS0MsS0FBS2kwRCxXQUVLLElBQTlCdHpELE9BQU93ekMsVUFBVWUsV0FDMUJ2MEMsT0FBT3d6QyxVQUFVZSxTQUFXLFFBRU8sSUFBMUJ2MEMsT0FBT3d6QyxVQUFVaHJDLE9BQzFCeEksT0FBT3d6QyxVQUFVaHJDLEtBQU8sQ0FBQyxHQUUzQixNQUFNeEgsTUFBUU4sUUFBUUMsTUFBTTh5RCxjQUFjLENBQUV6eUQsTUFBTyxDQUFFd0MsS0FBTSxDQUFFZ3dDLFVBQVd4ekMsT0FBT3d6QyxjQUMvRSxRQUE0QixJQUFqQnh6QyxPQUFPME8sTUFBdUIsQ0FDdkMsUUFBb0MsSUFBekJDLE9BQU8zTyxPQUFPME8sT0FBd0IsQ0FDL0MsTUFBTUEsTUFBUXRQLEtBQUt1UCxPQUFPM1AsSUFBSWdCLE9BQU8wTyxPQUNyQ0MsT0FBTzNPLE9BQU8wTyxPQUFTQSxNQUFNb25DLFVBQy9CLENBQ0EsTUFBTSt6QixZQUFjbDdELE9BQU8zTyxPQUFPME8sT0FBT0QsT0FBT3dxQyxXQUFVcDBDLEdBQUtBLEVBQUVvdUMsTUFBUWp6QyxPQUFPOFMsUUFDaEYsR0FBSSsyRCxhQUFlLEVBQUcsQ0FDcEIsTUFBTUMsV0FBYW43RCxPQUFPM08sT0FBTzBPLE9BQU9ELE9BQU9vN0QsYUFBYUUsVUFBVS81RCxNQUFNaXBDLFdBQVU3MkIsR0FBS0EsRUFBRTZ3QixNQUFRanpDLE9BQU8rSCxPQUM1RyxHQUFJK2hFLFlBQWMsRUFBRyxDQUNuQixNQUFNRSxjQUFnQnRwRSxRQUFRQyxNQUFNdWYsYUFBYXhlLE9BQU93SyxRQUFRbEwsT0FBTzhNLFFBQU8sQ0FBQ283RCxJQUFLbnVCLFNBQzlFQSxNQUFNLEdBQUdwekMsTUFBTSw2QkFDakJ1aEUsSUFBSW51QixNQUFNLElBQU1BLE1BQU0sSUFFakJtdUIsTUFDTixDQUFDLElBQ0p2NkQsT0FBTzNPLE9BQU8wTyxPQUFPRCxPQUFPbzdELGFBQWFFLFVBQVUvNUQsTUFBTTg1RCxZQUFjcHBFLFFBQVFDLE1BQU0yYSxZQUFZM00sT0FBTzNPLE9BQU8wTyxPQUFPRCxPQUFPbzdELGFBQWFFLFVBQVUvNUQsTUFBTTg1RCxZQUFhRSxjQUN6SyxDQUNGLENBQ0YsTUFBTyxRQUE0QixJQUFqQmhxRSxPQUFPaEUsTUFBdUIsTUFDVixJQUF6QndTLE9BQU94TyxPQUFPaEUsU0FDdkJ3UyxPQUFPeE8sT0FBT2hFLE9BQVMsSUFFekIsTUFBTStMLEtBQU8sQ0FDWGtyQyxJQUFLanpDLE9BQU8rSCxNQUVkLElBQUssTUFBTXBLLE9BQU8rRCxPQUFPbUUsS0FBSzdFLE9BQ3hCckQsSUFBSWdLLE1BQU0sNkJBQ1pJLEtBQUtwSyxLQUFPcUQsTUFBTXJELE1BR3RCNlEsT0FBT3hPLE9BQU9oRSxPQUFPOUMsS0FBSzZPLEtBQzVCLEtBQU8sQ0FDTCxNQUFNQSxLQUFPLENBQ1hrckMsSUFBS2p6QyxPQUFPK0gsTUFFZCxJQUFLLE1BQU1wSyxPQUFPK0QsT0FBT21FLEtBQUs3RSxPQUN4QnJELElBQUlnSyxNQUFNLDZCQUNaSSxLQUFLcEssS0FBT3FELE1BQU1yRCxNQUd0QnFTLE1BQU05VyxLQUFLNk8sS0FDYixDQUNGLENBSUEsR0FISWlJLE1BQU10TixjQUNGd0UsS0FBSytpRSxnQkFBZ0JqNkQsT0FFekJ0TyxPQUFPbUUsS0FBSzJJLFFBQVE5TCxPQUN0QixJQUFLLE1BQU1xTSxXQUFXck4sT0FBT21FLEtBQUsySSxjQUMxQnRILEtBQUsraUUsZ0JBQWdCejdELE9BQU9PLFNBQVUsQ0FBRS9CLE9BQVE1TixLQUFLb1AsT0FBT3hQLElBQUkrUCxXQUcxRSxHQUFJck4sT0FBT21FLEtBQUs4SSxRQUFRak0sT0FDdEIsSUFBSyxNQUFNNEwsV0FBVzVNLE9BQU9tRSxLQUFLOEksUUFBUyxDQUMzQnZQLEtBQUt1UCxPQUFPM1AsSUFBSXNQLFNBQ3hCdE8sT0FBTzJPLE9BQU9MLFNBQ3RCLENBRUYsT0FBTyxDQUNULENBRUEsOEJBQWE0N0QsQ0FBbUJOLFdBQVlULGFBQWNGLFdBQ3hELElBQUssTUFBTWp0RSxTQUFTb0QsS0FBS29QLE9BQU8wM0MsU0FBVSxDQUN4QyxNQUFNNmpCLFVBQVkvdEUsTUFBTTg1QyxXQUN4QixHQUFJaTBCLFVBQVUvNUQsTUFDWixJQUFLLE1BQU1qSSxRQUFRZ2lFLFVBQVUvNUQsTUFBTyxDQUNsQyxNQUFNNmxDLFNBQVc5dEMsZ0JBQWdCckQsT0FBT3dDLEtBQUtZLGNBQWdCQyxLQUFLK3RDLFdBQWEvdEMsS0FDekQsVUFBbEI4dEMsU0FBUzExQyxPQUNOMDFDLFNBQVM3MEMsTUFBTXdDLE1BQU1nd0MsV0FBV3pqQyxJQUFJcEksTUFBTSxZQVc3Q3NoRSxVQUFVcHpCLFNBQVN6OUMsTUFBUXk5QyxTQUFTNzBDLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsU0FWZCxJQUFoQ281RCxhQUFhdHpCLFNBQVN6OUMsUUFDL0Ird0UsYUFBYXR6QixTQUFTejlDLE1BQVEsSUFFaEN3eEUsV0FBVzF3RSxLQUFLLENBQ2Q4QyxNQUFPQSxNQUFNaTNDLElBQ2JsckMsS0FBTTh0QyxTQUFTNUMsSUFDZjc2QyxLQUFNeTlDLFNBQVN6OUMsS0FDZm83QyxVQUFXcUMsU0FBUzcwQyxNQUFNd0MsTUFBTWd3QyxXQUFhLENBQUMsS0FNdEQsQ0FFSixDQUNBLElBQUssTUFBTXpyQyxRQUFRM0ksS0FBSzRRLE1BQU1rMkMsU0FBVSxDQUN0QyxNQUFNclEsU0FBVzl0QyxnQkFBZ0JyRCxPQUFPd0MsS0FBS1ksY0FBZ0JDLEtBQUsrdEMsV0FBYS90QyxLQUN6RCxVQUFsQjh0QyxTQUFTMTFDLE9BQ04wMUMsU0FBUzcwQyxNQUFNd0MsTUFBTWd3QyxXQUFXempDLElBQUlwSSxNQUFNLFlBVTdDc2hFLFVBQVVwekIsU0FBU3o5QyxNQUFReTlDLFNBQVM3MEMsTUFBTXdDLEtBQUtnd0MsVUFBVXpqQyxTQVRkLElBQWhDbzVELGFBQWF0ekIsU0FBU3o5QyxRQUMvQit3RSxhQUFhdHpCLFNBQVN6OUMsTUFBUSxJQUVoQ3d4RSxXQUFXMXdFLEtBQUssQ0FDZDZPLEtBQU04dEMsU0FBUzVDLElBQ2Y3NkMsS0FBTXk5QyxTQUFTejlDLEtBQ2ZvN0MsVUFBV3FDLFNBQVM3MEMsTUFBTXdDLE1BQU1nd0MsV0FBYSxDQUFDLEtBTXRELENBQ0EsSUFBSyxNQUFNOWtDLFNBQVN0UCxLQUFLdVAsT0FBUSxDQUMvQixNQUFNdzdELFVBQVl6N0QsTUFBTW9uQyxXQUN4QixJQUFLLE1BQU1oakMsU0FBU3EzRCxVQUFVMTdELFFBQVUsR0FDdEMsR0FBSXFFLE1BQU0vRCxVQUFZK0QsTUFBTTZoQyxVQUFXLENBQ3JDLE1BQU1vMUIsVUFBWXJwRSxRQUFRQyxNQUFNdU8sVUFBVTRELE1BQU1pM0QsV0FDaEQsSUFBSyxNQUFNaGlFLFFBQVFnaUUsVUFBVS81RCxPQUFTLEdBQUksQ0FDeEMsTUFBTTZsQyxTQUFXOXRDLGdCQUFnQnJELE9BQU93QyxLQUFLWSxjQUFnQkMsS0FBSyt0QyxXQUFhL3RDLEtBQ3pELFVBQWxCOHRDLFNBQVMxMUMsT0FDTjAxQyxTQUFTNzBDLE1BQU13QyxNQUFNZ3dDLFdBQVd6akMsSUFBSXBJLE1BQU0sWUFZN0NzaEUsVUFBVXB6QixTQUFTejlDLE1BQVF5OUMsU0FBUzcwQyxNQUFNd0MsS0FBS2d3QyxVQUFVempDLFNBWGQsSUFBaENvNUQsYUFBYXR6QixTQUFTejlDLFFBQy9CK3dFLGFBQWF0ekIsU0FBU3o5QyxNQUFRLElBRWhDd3hFLFdBQVcxd0UsS0FBSyxDQUNkd1YsTUFBT3k3RCxVQUFVbDNCLElBQ2pCbmdDLE1BQU9BLE1BQU1tZ0MsSUFDYmxyQyxLQUFNOHRDLFNBQVM1QyxJQUNmNzZDLEtBQU15OUMsU0FBU3o5QyxLQUNmbzdDLFVBQVdxQyxTQUFTNzBDLE1BQU13QyxNQUFNZ3dDLFdBQWEsQ0FBQyxLQU10RCxDQUNGLENBRUosQ0FDQSxHQUFJOXhDLE9BQU9tRSxLQUFLc2pFLGNBQWM5d0UsUUFBT3NGLEtBQTZCLEtBQXRCd3JFLGFBQWF4ckUsT0FBYStFLE9BQVMsRUFBRyxDQUNoRixNQUFNc04sWUFBYzVRLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU02ekIsbUJBQW1CLENBQUVDLFlBQWEsY0FBZTE0QyxLQUFNLElBQUt5NUMsS0FBSyxJQUMzRyxJQUFLLE1BQU03eEMsUUFBUWlJLE1BQ2pCaTVELFVBQVVsaEUsS0FBSzNQLE1BQVEyUCxLQUFLL0csTUFBTXdDLEtBQUtnd0MsVUFBVXpqQyxHQUVuRCxJQUFLLE1BQU1wUyxPQUFPK0MsUUFBUUMsTUFBTTh5RCxjQUFjcjBELEtBQUtDLEtBQUtxMEQsYUFBYWx3RCxLQUFLbXdELFVBQVU5dEQsTUFBUSxDQUFDLEdBQzNGb2pFLFVBQVU3cEUsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXlCblksTUFBUUEsSUFFOUQsSUFBSyxNQUFNdkYsUUFBUSt3RSxrQkFDYyxJQUFwQkYsVUFBVTd3RSxRQUNuQit3RSxhQUFhL3dFLE1BQVE2d0UsVUFBVTd3RSxNQUdyQyxDQUNGLENBRUEsbUJBQWFtYSxDQUFRcFMsTUFDbkIsTUFBTXlwRSxXQUFhLEdBQ2JULGFBQWUsQ0FBQyxFQUNoQkYsVUFBWSxDQUFDLEVBQ25CLElBQUlTLFNBQVcsR0FDWHRXLFNBQVcsR0FDWGlXLGFBQWUsS0FDbkIsTUFDTyxVQURDbHBFLE9BRUp1cEUsU0FBV3RxRSxLQUFLQyxLQUFLQyxTQUFTLHVCQUM5Qjh6RCxTQUFXLFdBQ1hpVyxhQUFlLG9CQUtiTCxXQUFXa0Isa0JBQWtCTixXQUFZVCxhQUFjRixXQUNvQixJQUE3RXZuRSxPQUFPbUUsS0FBS3NqRSxjQUFjOXdFLFFBQU9zRixLQUE2QixLQUF0QndyRSxhQUFheHJFLE9BQWErRSxjQUM5RHNtRSxXQUFXVyxpQkFBaUJDLFdBQVlULGVBQ3ZDLEdBRUYsSUFBSXJyRCxTQUFRaEIsVUFDTCxJQUFJa3NELFdBQVcsQ0FBRVUsU0FBVXRXLFNBQVVpVyxhQUFjTyxXQUFZVCxhQUFjRixVQUFXbnNELFVBQ2hHaGQsUUFBTyxFQUFJLElBRW5CLEVDdlBLLE1BQU1zcUUsUUFDWCwyQkFBYUMsR0FDWCxJQUFJQyxvQkFBc0JsckUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBQ2hESSxLQUFLb1AsT0FBT25OLEtBQU9qQyxLQUFLdVAsT0FBT3ROLEtBQU9qQyxLQUFLNFEsTUFBTTNPLEtBQU9qQyxLQUFLbXJFLFFBQVFscEUsS0FBT2pDLEtBQUtvMkMsT0FBT24wQyxPQUFTLElBRW5HaXBFLG9CQUFzQmxyRSxLQUFLdkIsT0FBT2dELGNBQzVCekIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsc0JBQXVCb2dFLHNCQUV6RCxNQUFNRSxXQUFhOXBFLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLdkIsT0FBT2dELFFBQVN5cEUscUJBQXVCLEtBQzVGeG9FLEtBQUsyb0UsZUFBaUJyckUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsK0JBQWlDLENBQUMsRUFDbEY4QyxLQUFLNG9FLGVBQWlCLENBQUMsRUFDdkIsSUFBSyxNQUFNbjZDLFFBQVFueEIsS0FBS29oRCxNQUN0QixJQUFLLENBQUMsT0FBUSxTQUFTMTdDLFNBQVN5ckIsS0FBS2t3QixTQUFTa3FCLGNBQWdCLENBQUMsUUFBUyxPQUFRLFNBQVM3bEUsU0FBU3lyQixLQUFLa3dCLFNBQVN0Z0QsUUFDekd1QixPQUFPQyxVQUFVQyxlQUFlaEgsS0FBS2tILEtBQUs0b0UsZUFBZ0JuNkMsS0FBS2t3QixTQUFTa3FCLGFBQWMsQ0FFekYsTUFBTUMsT0FBU3hyRSxLQUFLa0UsUUFBUXRFLElBQUl1eEIsS0FBS2t3QixTQUFTa3FCLGFBQzFDQyxVQUNFSixZQUFlOW9FLE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLa0gsS0FBSzJvRSxlQUFnQkcsT0FBTzc2RCxLQUFPN1IsT0FBTzRELEtBQUsyb0UsZUFBZUcsT0FBTzc2RCxPQUFTN1IsT0FBTzBzRSxPQUFPL3BFLFdBRWxKaUIsS0FBSzRvRSxlQUFlRSxPQUFPNzZELElBQU02NkQsT0FBTy9wRSxTQUc5QyxFQUdBMnBFLFlBQWM5b0UsT0FBT21FLEtBQUsvRCxLQUFLNG9FLGdCQUFnQmhvRSxPQUFTLEtBQ3REdEQsS0FBS3NHLEtBQUsyRSxLQUNaLElBQUkyckIsT0FBTyxDQUNUemxCLE1BQU9uUixLQUFLQyxLQUFLQyxTQUFTLHNCQUMxQmdULFFBQVNsVCxLQUFLQyxLQUFLeVcsT0FDMkIsSUFBNUNwVSxPQUFPbUUsS0FBSy9ELEtBQUs0b0UsZ0JBQWdCaG9FLE9BQzdCLHVCQUNBLGtDQUNKLENBQ0U3QixRQUFTekIsS0FBS3ZCLE9BQU9nRCxRQUNyQnlDLFFBQ0UsV0FDQTVCLE9BQU9tRSxLQUFLL0QsS0FBSzRvRSxnQkFDZDVrRSxLQUFJK2tFLEtBQU96ckUsS0FBS2tFLFFBQVF0RSxJQUFJNnJFLEtBQUt0NkQsUUFDakNwSyxLQUFLLGFBQ1IsZUFHTjh2QixRQUFTLENBQ1BqMkIsT0FBUSxDQUNOYixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLDZCQUMxQjQyQixTQUFVOXhCLFNBQVlnbUUsUUFBUXBxRSxVQUVoQzhxRSxLQUFNLENBQ0ozckUsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUywrQkFHN0JRLFFBQU8sR0FFVixJQUFJazJCLE9BQU8sQ0FDVHpsQixNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyxzQkFDMUJnVCxRQUFTbFQsS0FBS0MsS0FBS3lXLE9BQU8sMEJBQTJCLENBQ25EalYsUUFBU3pCLEtBQUt2QixPQUFPZ0QsVUFFdkJvMUIsUUFBUyxDQUNQODBDLEdBQUksQ0FDRjVyRSxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLCtCQUc3QlEsUUFBTyxHQUdoQixDQUVBLG1CQUFhRSxTQUNMOEIsS0FBS21vRSxrQkFhUDdxRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxlQUM1QkksS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsMkJBQTJCLEdBQ3JEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsK0JBQStCLEdBQ3pEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEscUJBQXFCLEdBQy9DOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsd0JBQXdCLEdBQ2xEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsbUJBQW1CLEdBQzdDOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsMEJBQTBCLEdBQ3BEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsNkJBQTZCLEdBQ3ZEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsOEJBQThCLFVBR3BEOCtELFdBQVd6MkQsT0FBTyxTQUV4QixNQUFNaFAsU0FBVzdDLFFBQVFDLE1BQU0yYSxZQUFZeFosS0FBSzJvRSxnQkFBa0IsQ0FBQyxFQUFHM29FLEtBQUs0b0UsZ0JBQzNFdHJFLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLDZCQUE4QjNHLFVBQ3hEbkUsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsc0JBQXVCOUssS0FBS3ZCLE9BQU9nRCxTQUU3RGdLLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBS3lXLE9BQU8seUJBQTBCLENBQy9EazFELFdBQVcsR0FFZixDQUVBLDRCQUFhZixHQUVYLElBQUssTUFBTWp1RSxTQUFTb0QsS0FBS29QLE9BQU8wM0MsU0FDOUIsSUFDRSxNQUFNcHlCLFdBQWFoeUIsS0FBS21wRSxpQkFBaUJqdkUsTUFBTTg1QyxZQUMxQ3AxQyxRQUFRQyxNQUFNdXFFLFFBQVFwM0MsY0FDekIvbUIsUUFBUW8rRCxJQUFJLDRCQUE0Qm52RSxNQUFNNUQsY0FDeEM0RCxNQUFNZ0UsT0FBTzh6QixXQUFZLENBQUVzM0MsY0FBYyxJQUVuRCxDQUFFLE1BQU94K0QsS0FDUEcsUUFBUW8rRCxJQUFJLGdCQUFpQnYrRCxLQUM3QkEsSUFBSStFLFFBQVV2UyxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDeEQxZCxLQUFNNEQsTUFBTTVELEtBQ1p1WixRQUFTL0UsSUFBSStFLFVBRWY5RyxHQUFHQyxjQUFjd1UsTUFBTTFTLElBQUkrRSxRQUFTLENBQUVxNUQsV0FBVyxHQUNuRCxDQUlGLElBQUssTUFBTWpqRSxRQUFRM0ksS0FBSzRRLE1BQU1rMkMsU0FDNUIsSUFDRSxNQUFNcHlCLFdBQWFzMkMsUUFBUWlCLGdCQUFnQnRqRSxLQUFLK3RDLFlBQzNDcDFDLFFBQVFDLE1BQU11cUUsUUFBUXAzQyxjQUN6Qi9tQixRQUFRbytELElBQUksMkJBQTJCcGpFLEtBQUszUCxjQUN0QzJQLEtBQUsvSCxPQUFPOHpCLFdBQVksQ0FBRXMzQyxjQUFjLElBRWxELENBQUUsTUFBT3grRCxLQUNQRyxRQUFRbytELElBQUksZ0JBQWlCditELEtBQzdCQSxJQUFJK0UsUUFBVXZTLEtBQUtDLEtBQUt5VyxPQUFPLHlCQUEwQixDQUN2RDFkLEtBQU0yUCxLQUFLM1AsS0FDWHVaLFFBQVMvRSxJQUFJK0UsVUFFZjlHLEdBQUdDLGNBQWN3VSxNQUFNMVMsSUFBSStFLFFBQVMsQ0FBRXE1RCxXQUFXLEdBQ25ELENBSUYsSUFBSyxNQUFNTSxTQUFTbHNFLEtBQUtvMkMsT0FBTzBRLFNBQzlCLElBQ0UsTUFBTXB5QixXQUFhczJDLFFBQVFtQixpQkFBaUJELE1BQU14MUIsWUFDN0NwMUMsUUFBUUMsTUFBTXVxRSxRQUFRcDNDLGNBQ3pCL21CLFFBQVFvK0QsSUFBSSw0QkFBNEJHLE1BQU1sekUsY0FDeENrekUsTUFBTXRyRSxPQUFPOHpCLFdBQVksQ0FBRXMzQyxjQUFjLElBRW5ELENBQUUsTUFBT3grRCxLQUNQRyxRQUFRbytELElBQUksZ0JBQWlCditELEtBQzdCQSxJQUFJK0UsUUFBVXZTLEtBQUtDLEtBQUt5VyxPQUFPLDBCQUEyQixDQUN4RDFkLEtBQU1rekUsTUFBTWx6RSxLQUNadVosUUFBUy9FLElBQUkrRSxVQUVmOUcsR0FBR0MsY0FBY3dVLE1BQU0xUyxJQUFJK0UsUUFBUyxDQUFFcTVELFdBQVcsR0FDbkQsQ0FJRixJQUFLLE1BQU1yYyxTQUFTdnZELEtBQUt3dkQsT0FBTzFJLFNBQzlCLElBQ0UsTUFBTXB5QixXQUFhczJDLFFBQVFvQixpQkFBaUI3YyxNQUFNN1ksWUFDN0NwMUMsUUFBUUMsTUFBTXVxRSxRQUFRcDNDLGNBQ3pCL21CLFFBQVFvK0QsSUFBSSw0QkFBNEJ4YyxNQUFNdjJELGNBQ3hDdTJELE1BQU0zdUQsT0FBTzh6QixXQUFZLENBQUVzM0MsY0FBYyxJQUVuRCxDQUFFLE1BQU94K0QsS0FDUEcsUUFBUW8rRCxJQUFJLGdCQUFpQnYrRCxLQUM3QkEsSUFBSStFLFFBQVV2UyxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDeEQxZCxLQUFNdTJELE1BQU12MkQsS0FDWnVaLFFBQVMvRSxJQUFJK0UsVUFFZjlHLEdBQUdDLGNBQWN3VSxNQUFNMVMsSUFBSStFLFFBQVMsQ0FBRXE1RCxXQUFXLEdBQ25ELENBSUYsSUFBSyxNQUFNdDhELFNBQVN0UCxLQUFLdVAsT0FDdkIsSUFDRSxNQUFNbWxCLFdBQWFzMkMsUUFBUXFCLGlCQUFpQi84RCxPQUN2Q2hPLFFBQVFDLE1BQU11cUUsUUFBUXAzQyxjQUN6Qi9tQixRQUFRbytELElBQUksNEJBQTRCejhELE1BQU10VyxjQXNDeENzVyxNQUFNMU8sT0FBTzh6QixXQUFZLENBQUVzM0MsY0FBYyxLQUVqRDE4RCxNQUFNRCxPQUFPZ0wsU0FBUTVVLEdBQU1BLEVBQUU0b0MsT0FBUyxNQUN4QyxDQUFFLE1BQU83Z0MsS0FDUEcsUUFBUW8rRCxJQUFJLGdCQUFpQnYrRCxLQUM3QkEsSUFBSStFLFFBQVV2UyxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDeEQxZCxLQUFNc1csTUFBTXRXLEtBQ1p1WixRQUFTL0UsSUFBSStFLFVBRWY5RyxHQUFHQyxjQUFjd1UsTUFBTTFTLElBQUkrRSxRQUFTLENBQUVxNUQsV0FBVyxHQUNuRCxDQUlGLElBQUssTUFBTXo2QyxRQUFRbnhCLEtBQUtvaEQsTUFFVSxTQUE5Qmp3QixLQUFLa3dCLFNBQVNrcUIsYUFDZCxDQUFDLFFBQVMsT0FBUSxRQUFTLFlBQWEsU0FBUzdsRSxTQUMvQ3lyQixLQUFLa3dCLFNBQVN0Z0QsYUFHVmlxRSxRQUFRc0Isc0JBQXNCbjdDLEtBRzFDLENBRUEsdUJBQU8wNkMsQ0FBa0JqdkUsT0FDdkIsTUFBTTgzQixXQUFhLENBQUMsRUFZcEIsR0FUQXMyQyxRQUFRdUIsNkJBQTZCM3ZFLE1BQU84M0IsWUFDNUNzMkMsUUFBUXdCLHFCQUFxQjV2RSxNQUFPODNCLFlBQ3BDczJDLFFBQVF5Qix5QkFBeUI3dkUsTUFBTzgzQixZQUN4Q3MyQyxRQUFRMEIseUJBQXlCOXZFLE1BQU84M0IsWUFDeENzMkMsUUFBUTJCLGdDQUFnQy92RSxNQUFPODNCLFlBQy9DczJDLFFBQVE0Qiw0QkFBNEJod0UsTUFBTzgzQixZQUMzQ3MyQyxRQUFRNkIsc0JBQXNCandFLE1BQU84M0IsWUFHakM5M0IsTUFBTWdVLE1BQU8sQ0FDZixNQUFNQSxNQUFRaFUsTUFBTWdVLE1BQU1sQyxRQUFPLENBQUNvK0QsSUFBSzlwRCxLQUNyQyxNQUFNeXpCLFNBQ0p6ekIsYUFBYTFkLE9BQU93QyxLQUFLWSxjQUFnQnNhLEVBQUUwekIsV0FBYTF6QixFQUNwRCtwRCxXQUFhL0IsUUFBUWlCLGdCQUFnQngxQixVQUszQyxPQUpLbjFDLFFBQVFDLE1BQU11cUUsUUFBUWlCLGNBQ3pCQSxXQUFXbDVCLElBQU00QyxTQUFTNUMsSUFDMUJpNUIsSUFBSWh6RSxLQUFLd0gsUUFBUUMsTUFBTXVmLGFBQWFpc0QsY0FFL0JELE1BQ04sSUFDQ2w4RCxNQUFNdE4sT0FBUyxJQUNqQm94QixXQUFXOWpCLE1BQVFBLE1BRXZCLENBRUEsT0FBTzhqQixVQUNULENBRUEsa0NBQWE0M0MsQ0FBdUJuN0MsTUFDbEMsTUFBTTY3QyxhQUFlNzdDLEtBQUtrd0IsU0FBU3RnRCxLQUNuQyxJQUNHLENBQUMsUUFBUyxPQUFRLFFBQVMsWUFBYSxTQUFTMkUsU0FBU3NuRSxjQUUzRCxPQUlGLE1BQU1DLFVBQVk5N0MsS0FBS3RsQixhQUNqQnNsQixLQUFLKzdDLFVBQVUsQ0FBRXJoRSxRQUFRLElBRS9CLFVBQ1FzbEIsS0FBS2c4QyxTQUNiLENBQUUsTUFBTzMvRCxLQUNQRyxRQUFRbytELElBQUksc0JBQXVCNTZDLEtBQU0zakIsSUFDM0MsQ0FDQSxNQUFNNC9ELGdCQUFrQmo4QyxLQUFLbXdCLGVBRzdCLElBQUssTUFBTThRLE9BQU9nYixVQUFXLENBQzNCLElBQUkxNEMsV0FBYSxDQUFDLEVBQ2xCLElBQ0UsT0FBUXM0QyxjQUNOLElBQUssUUFDSHQ0QyxXQUFhczJDLFFBQVFhLGlCQUFpQnpaLElBQUkxYixZQUMxQyxNQUNGLElBQUssT0FDSGhpQixXQUFhczJDLFFBQVFpQixnQkFBZ0I3WixJQUFJMWIsWUFDekMsTUFDRixJQUFLLFFBQ0hoaUIsV0FBYXMyQyxRQUFRb0IsaUJBQWlCaGEsSUFBSTFiLFlBQzFDLE1BQ0YsSUFBSyxZQUNIaGlCLFdBQWFzMkMsUUFBUW1CLGlCQUFpQi9aLElBQUkxYixZQUMxQyxNQUNGLElBQUssUUFDSGhpQixXQUFhczJDLFFBQVFxQixpQkFBaUJqYSxLQUlyQzl3RCxRQUFRQyxNQUFNdXFFLFFBQVFwM0MsY0FDekIvbUIsUUFBUW8rRCxJQUNOLFlBQVlpQix5QkFBeUI1YSxJQUFJcDVELHNCQUFzQm00QixLQUFLNkcsb0JBRWhFbzZCLElBQUl4eEQsT0FBTzh6QixZQUVyQixDQUFFLE1BQU9sbkIsS0FDUEcsUUFBUW8rRCxJQUFJLGdCQUFpQnYrRCxLQUM3QkEsSUFBSStFLFFBQVV2UyxLQUFLQyxLQUFLeVcsT0FBTyxpQ0FBa0MsQ0FDL0QxZCxLQUFNbzVELElBQUlwNUQsS0FDVmcvQixXQUFZN0csS0FBSzZHLFdBQ2pCemxCLFFBQVMvRSxJQUFJK0UsVUFFZjlHLEdBQUdDLGNBQWN3VSxNQUFNMVMsSUFBSStFLFFBQVMsQ0FBRXE1RCxXQUFXLEdBQ25ELENBQ0YsT0FHTXo2QyxLQUFLKzdDLFVBQVUsQ0FBRXJoRSxPQUFRb2hFLFdBQ2pDLENBRUEsc0JBQU9oQixDQUFpQnRqRSxNQUN0QixNQUFNK3JCLFdBQWEsQ0FBQyxFQWNwQixPQVhBczJDLFFBQVFxQyx3QkFBd0Ixa0UsS0FBTStyQixZQUN0Q3MyQyxRQUFRc0MsdUJBQXVCM2tFLEtBQU0rckIsWUFDckNzMkMsUUFBUXVDLG9CQUFvQjVrRSxLQUFNK3JCLFlBQ2xDczJDLFFBQVF3QywwQkFBMEI3a0UsS0FBTStyQixZQUN4Q3MyQyxRQUFReUMsd0JBQXdCOWtFLEtBQU0rckIsWUFDdENzMkMsUUFBUTBDLDJCQUEyQi9rRSxLQUFNK3JCLFlBQ3pDczJDLFFBQVEyQyw2QkFBNkJobEUsS0FBTStyQixZQUMzQ3MyQyxRQUFRNEMsaUJBQWlCamxFLEtBQU0rckIsWUFDL0JzMkMsUUFBUTZDLGdCQUFnQmxsRSxLQUFNK3JCLFlBQzlCczJDLFFBQVE4QyxzQkFBc0JubEUsS0FBTStyQixZQUU3QkEsVUFDVCxDQUVBLHVCQUFPMDNDLENBQWtCRixPQUN2QixNQUFNeDNDLFdBQWEsQ0FBQyxFQUtwQixPQUZBczJDLFFBQVErQyxxQkFBcUI3QixNQUFPeDNDLFlBRTdCQSxVQUNULENBRUEsdUJBQU95M0MsQ0FBa0JELE9BQ3ZCLE1BQU14M0MsV0FBYSxDQUFDLEVBS3BCLE9BRkFzMkMsUUFBUWdELHFCQUFxQjlCLE1BQU94M0MsWUFFN0JBLFVBQ1QsQ0FFQSx1QkFBTzIzQyxDQUFrQi84RCxPQUN2QixNQUFNMitELFFBQVUsQ0FDZDUrRCxPQUFRLElBbUNWLFlBakM0QixJQUFqQkMsTUFBTUQsUUFBMEJDLE1BQU1ELE9BQU8vTCxTQUN0RDJxRSxRQUFRNStELE9BQVNDLE1BQU1ELE9BQU8zSSxLQUFJZ04sUUFDaEMsTUFBTWpPLEVBQUlpTyxNQUFNZ2pDLFdBQ1ZoaUIsV0FBYSxDQUFDLEVBS3BCLEdBSkFzMkMsUUFBUWtELHFCQUFxQnpvRSxFQUFHaXZCLFlBQzVCcHlCLE9BQU9tRSxLQUFLaXVCLFlBQVlweEIsUUFDMUJoQyxRQUFRQyxNQUFNMmEsWUFBWXpXLEVBQUdpdkIsYUFFMUJqdkIsRUFBRWtLLFNBQVdsSyxFQUFFOHZDLFVBQ2xCOXZDLEVBQUVrbEUsVUFBWSxDQUFDLE9BQ1YsR0FBSzNxRSxLQUFLb1AsT0FBT3pOLElBQUk4RCxFQUFFa0ssVUFHdkIsSUFBS2xLLEVBQUU4dkMsVUFBVyxDQUN2QixNQUFNbzFCLFVBQVlycEUsUUFBUUMsTUFBTXVPLFVBQVVySyxFQUFFa2xFLFdBQzVDQSxVQUFVNXBFLEtBQU8yUyxNQUFNOVcsT0FBT21FLEtBQzlCLE1BQU1ILE9BQVNvcUUsUUFBUWEsaUJBQWlCbEIsV0FDdkMsQ0FBQyxRQUFTLFdBQVd0d0QsU0FBUTIrQixlQUM1QixJQUFLcDRDLE9BQU9vNEMsZUFBZTExQyxPQUN6QixPQUVGLE1BQU0yYixRQUFVLElBQUlrdkQsSUFBSXZ0RSxPQUFPbzRDLGNBQWN0eUMsS0FBSXVmLEdBQUssQ0FBQ0EsRUFBRTR0QixJQUFLNXRCLE1BQzlEeGdCLEVBQUVrbEUsVUFBVTN4QixjQUFjMytCLFNBQVErekQsV0FDaEMsTUFBTXh0RSxPQUFTcWUsUUFBUXJmLElBQUl3dUUsU0FBU3Y2QixLQUNoQ2p6QyxRQUFRVSxRQUFRQyxNQUFNMmEsWUFBWWt5RCxTQUFVeHRFLE9BQU0sV0FFakRBLE9BQU9vNEMsYUFBWSxJQUU1QjEzQyxRQUFRQyxNQUFNMmEsWUFBWXpXLEVBQUVrbEUsVUFBVy9wRSxPQUN6QyxPQWxCRTZFLEVBQUVrSyxRQUFVLEtBQ1psSyxFQUFFa2xFLFVBQVksQ0FBQyxFQWtCakIsT0FBT2xsRSxNQUdKd29FLE9BQ1QsQ0FFQSw4QkFBT1IsQ0FBeUI5a0UsS0FBTStyQixZQWdDcEMsTUE5QkUsQ0FDRSxZQUNBLFFBQ0EsT0FDQSxhQUNBLFFBQ0EsUUFDQSxRQUNBLFNBQ0EsU0FDQSxVQUNBaHZCLFNBQVNpRCxLQUFLNUgsUUFFdUIsaUJBQTVCNEgsS0FBS2xLLE9BQU9zUixZQUNyQjJrQixXQUFXLHNCQUF3QixDQUNqQzU3QixNQUFPNlAsS0FBS2xLLE9BQU9zUixZQUNuQnV5RCxPQUFRLFNBR3lCLElBQTVCMzVELEtBQUtsSyxPQUFPc1IsYUFDUyxPQUE1QnBILEtBQUtsSyxPQUFPc1IsWUFFWjJrQixXQUFXLHNCQUF3QixDQUNqQzU3QixNQUFPLEdBQ1B3cEUsT0FBUSxTQUV5QyxJQUFuQzM1RCxLQUFLbEssT0FBT3NSLFlBQVl1eUQsU0FDeEM1dEMsV0FBVyw2QkFBK0IsS0FHdkNBLFVBQ1QsQ0FFQSw2QkFBTzQ0QyxDQUF3QjNrRSxLQUFNK3JCLFlBTW5DLE1BTGtCLFVBQWQvckIsS0FBSzVILFdBQzRDLElBQXhDNEgsS0FBS2xLLE9BQU84c0IsYUFBYUMsYUFDbENrSixXQUFXLGlDQUFtQyxHQUczQ0EsVUFDVCxDQUVBLDBCQUFPNjRDLENBQXFCNWtFLEtBQU0rckIsWUFDaEMsSUFBSW8xQixNQUFRaHJELE9BQU82SixLQUFLUCxLQUFLRyxNQUFNLHVDQUluQyxHQUhjLE9BQVZ1aEQsUUFDRnAxQixXQUFXdHNCLElBQU0sNkJBQStCMGhELE1BQU0sSUFFdEMsVUFBZG5oRCxLQUFLNUgsS0FDUCxJQUFLLE1BQU80USxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVFuRSxLQUFLbEssT0FBT21TLE9BQzdCLGlCQUFOdk8sSUFDVHluRCxNQUFRaHJELE9BQU91RCxFQUFFK0YsS0FBS0csTUFBTSx1Q0FDZCxPQUFWdWhELGFBQ3dDLElBQS9CcDFCLFdBQVcsa0JBQ3BCQSxXQUFXLGdCQUFrQi9yQixLQUFLbEssT0FBT21TLE9BRTNDOGpCLFdBQVcsZ0JBQWdCL2lCLEdBQUd2SixJQUM1Qiw2QkFBK0IwaEQsTUFBTSxVQUl4QyxHQUFrQixlQUFkbmhELEtBQUs1SCxLQUF1QixDQUNyQyxJQUFLLE1BQU80USxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVFuRSxLQUFLbEssT0FBTzRuQixRQUM3QixpQkFBTmhrQixJQUNUeW5ELE1BQVFockQsT0FBT3VELEVBQUUrRixLQUFLRyxNQUFNLHVDQUNkLE9BQVZ1aEQsYUFDeUMsSUFBaENwMUIsV0FBVyxtQkFDcEJBLFdBQVcsaUJBQW1CL3JCLEtBQUtsSyxPQUFPNG5CLFFBRTVDcU8sV0FBVyxpQkFBaUIvaUIsR0FBR3ZKLElBQzdCLDZCQUErQjBoRCxNQUFNLEtBSTdDLElBQUssTUFBT29JLEVBQUdtYyxLQUFNL3JFLE9BQU93SyxRQUFRbkUsS0FBS2xLLE9BQU91SSxRQUM5QyxJQUFLLE1BQU8ySyxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVF1aEUsRUFBRWhvRCxRQUNuQixpQkFBTmhrQixJQUNUeW5ELE1BQVFockQsT0FBT3VELEVBQUUrRixLQUFLRyxNQUFNLHVDQUNkLE9BQVZ1aEQsYUFDeUMsSUFBaENwMUIsV0FBVyxtQkFDcEJBLFdBQVcsaUJBQW1CL3JCLEtBQUtsSyxPQUFPdUksUUFFNUMwdEIsV0FBVyxpQkFBaUJ3OUIsR0FBRzdyQyxPQUFPMVUsR0FBR3ZKLElBQ3ZDLDZCQUErQjBoRCxNQUFNLElBS2pELE1BQU8sR0FBa0IsU0FBZG5oRCxLQUFLNUgsS0FDZCxJQUFLLE1BQU80USxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVFuRSxLQUFLbEssT0FBTzZ2RSxRQUM3QixpQkFBTmpzRSxJQUNUeW5ELE1BQVFockQsT0FBT3VELEVBQUUrRixLQUFLRyxNQUFNLHVDQUNkLE9BQVZ1aEQsYUFDeUMsSUFBaENwMUIsV0FBVyxtQkFDcEJBLFdBQVcsaUJBQW1CL3JCLEtBQUtsSyxPQUFPNnZFLFFBRTVDNTVDLFdBQVcsaUJBQWlCL2lCLEdBQUd2SixJQUM3Qiw2QkFBK0IwaEQsTUFBTSxVQUl4QyxHQUFrQixjQUFkbmhELEtBQUs1SCxLQUNkLElBQUssTUFBTzRRLEVBQUd0UCxLQUFNQyxPQUFPd0ssUUFBUW5FLEtBQUtsSyxPQUFPNG5CLFFBQzdCLGlCQUFOaGtCLElBQ1R5bkQsTUFBUWhyRCxPQUFPdUQsRUFBRStGLEtBQUtHLE1BQU0sdUNBQ2QsT0FBVnVoRCxhQUN5QyxJQUFoQ3AxQixXQUFXLG1CQUNwQkEsV0FBVyxpQkFBbUIvckIsS0FBS2xLLE9BQU80bkIsUUFFNUNxTyxXQUFXLGlCQUFpQi9pQixHQUFHdkosSUFDN0IsNkJBQStCMGhELE1BQU0sS0FLL0MsT0FBT3AxQixVQUNULENBRUEsaUNBQU9nNUMsQ0FBNEIva0UsS0FBTStyQixZQUNyQixVQUFkL3JCLEtBQUs1SCxXQUFnRCxJQUFyQjRILEtBQUtsSyxPQUFPOHZFLE9BQzlDNzVDLFdBQVcsc0JBQXdCL3JCLEtBQUtsSyxPQUFPK3ZFLGFBQWUsR0FDOUQ5NUMsV0FBVywwQkFBNEIvckIsS0FBS2xLLE9BQU84dkUsS0FBSzU1QixJQUFNLEVBQzlEamdCLFdBQVcsNEJBQThCL3JCLEtBQUtsSyxPQUFPOHZFLEtBQUt4NUIsSUFBTSxFQUNoRXJnQixXQUFXLHVCQUF5Qi9yQixLQUFLbEssT0FBTzh2RSxLQUFLOWhELEtBQU8sRUFDNURpSSxXQUFXLHNCQUF3Qi9yQixLQUFLbEssT0FBTzh2RSxLQUFLLzBFLEtBQU8sRUFDM0RrN0IsV0FBVyx1QkFBeUIsR0FFcENBLFdBQVcsaUJBQW1CLEtBQzlCQSxXQUFXLHFDQUF1QyxLQUNsREEsV0FBVyw4QkFBZ0MsS0FFL0MsQ0FTQSxnQ0FBTzg0QyxDQUEyQjdrRSxLQUFNK3JCLFlBMkN0QyxNQTFDa0IsU0FBZC9yQixLQUFLNUgsV0FFNkMsSUFBekM0SCxLQUFLbEssT0FBT3NSLFlBQVkwK0QsZUFFakMvNUMsV0FBVyxpQkFBbUIvckIsS0FBS2xLLE9BQU9pd0UsUUFBVSxHQUNwRGg2QyxXQUFXLGVBQWlCL3JCLEtBQUtsSyxPQUFPa3dFLE1BQVEsR0FDaERqNkMsV0FBVyxtQkFBcUIvckIsS0FBS2xLLE9BQU9td0UsVUFBWSxHQUV4RGw2QyxXQUFXLHFCQUF1Qi9yQixLQUFLbEssT0FBT3F0QixTQUFXLEVBQ3pENEksV0FBVyx1QkFBeUI5MUIsT0FBTytKLEtBQUtsSyxPQUFPb3dFLGVBQWlCLEVBRXhFbjZDLFdBQVcsa0JBQW9CL3JCLEtBQUtsSyxPQUFPc1IsWUFBWTArRCxhQUN2RC81QyxXQUFXLDZCQUErQi9yQixLQUFLbEssT0FBT3NSLFlBQVkrK0QsTUFFbEVwNkMsV0FBVywwQkFBNEIsVUFDdkNBLFdBQVcsc0JBQXdCLEVBQ25DQSxXQUFXLDBCQUEyQixFQUN0Q0EsV0FBVyxzQkFBd0IsR0FFbkNBLFdBQVcsc0NBQ1Q5MUIsT0FBTytKLEtBQUtsSyxPQUFPc3dFLEtBQUtwd0IsY0FBY3F3QixNQUFRLEVBQ2hEdDZDLFdBQVcsb0NBQ1Q5MUIsT0FBTytKLEtBQUtsSyxPQUFPc3dFLEtBQUtwd0IsY0FBY3N3QixNQUFRLEVBQ2hEdjZDLFdBQVcsdUJBQXlCOTFCLE9BQU8rSixLQUFLbEssT0FBT3N3RSxLQUFLL3lFLFNBQVcsRUFDdkUwNEIsV0FBVyx1QkFBeUIsR0FFcENBLFdBQVcsZ0JBQWtCLENBQzNCdzZDLFVBQVd0d0UsT0FBTytKLEtBQUtsSyxPQUFPMHdFLGlCQUFtQixFQUNqREMsU0FBVSxFQUNWNTVELE1BQU8sY0FHVGtmLFdBQVcsb0JBQXNCLEtBQ2pDQSxXQUFXLDJCQUE2QixLQUN4Q0EsV0FBVyxpQkFBbUIsS0FDOUJBLFdBQVcscUNBQXVDLEtBQ2xEQSxXQUFXLDhCQUFnQyxLQUMzQ0EsV0FBVyx3QkFBMEIsS0FDckNBLFdBQVcsdUJBQXlCLEtBQ3BDQSxXQUFXLGtCQUFvQixNQUc1QkEsVUFDVCxDQUVBLDRCQUFPbzVDLENBQXVCbmxFLEtBQU0rckIsWUFDaEIsU0FBZC9yQixLQUFLNUgsV0FFa0MsSUFBaEM0SCxLQUFLbEssT0FBTzR3RSxNQUFNSCxnQkFDVSxJQUE1QnZtRSxLQUFLbEssT0FBTzR3RSxNQUFNNzVELFFBRXpCa2YsV0FBVyxzQkFBd0IsYUFHekMsQ0FFQSxtQ0FBT2k1QyxDQUE4QmhsRSxLQUFNK3JCLFlBQ3ZCLFVBQWQvckIsS0FBSzVILE1BQWtDLFNBQWQ0SCxLQUFLNUgsWUFDQyxJQUF0QjRILEtBQUtsSyxPQUFPcXdFLGFBQ3lCLElBQW5Dbm1FLEtBQUtsSyxPQUFPc1IsWUFBWXV5RCxPQUNqQzV0QyxXQUFXLDZCQUNUL3JCLEtBQUtsSyxPQUFPc1IsWUFBWXV5RCxPQUFTMzVELEtBQUtsSyxPQUFPcXdFLE1BRS9DcDZDLFdBQVcsNkJBQStCL3JCLEtBQUtsSyxPQUFPcXdFLE1BRXhEcDZDLFdBQVcsa0JBQW9CLFdBRU0sSUFBNUIvckIsS0FBS2xLLE9BQU82d0UsbUJBQ2tDLElBQTVDNTZDLFdBQVcsNkJBQ3BCQSxXQUFXLDZCQUNUL3JCLEtBQUtsSyxPQUFPNndFLFlBQWM1NkMsV0FBVyw2QkFFdkNBLFdBQVcsNkJBQStCL3JCLEtBQUtsSyxPQUFPNndFLFlBRXhENTZDLFdBQVcsd0JBQTBCLE1BRzNDLENBRUEsOEJBQU8yNEMsQ0FBeUIxa0UsS0FBTStyQixZQUNwQyxHQUFrQixlQUFkL3JCLEtBQUs1SCxLQUF1QixDQUM5QixJQUFJaWpELFNBQVUsRUFDZCxJQUFLLE1BQU9rTyxFQUFHbWMsS0FBTS9yRSxPQUFPd0ssUUFBUW5FLEtBQUtsSyxPQUFPdUksUUFDOUMsSUFBSyxNQUFPMkssRUFBR3RQLEtBQU1DLE9BQU93SyxRQUFRdWhFLEVBQUVob0QsUUFDbkIsaUJBQU5oa0IsUUFDZSxJQUFiQSxFQUFFNUQsU0FDWGtLLEtBQUtsSyxPQUFPdUksT0FBT2tyRCxHQUFHN3JDLE9BQU8xVSxHQUFHbFQsT0FBUzRELEVBQUUyRixLQUMzQ2c4QyxTQUFVLEdBS2RBLFVBQ0Z0dkIsV0FBVyxpQkFBbUIvckIsS0FBS2xLLE9BQU91SSxPQUU5QyxDQUNBLEdBQUksQ0FBQyxTQUFTdEIsU0FBU2lELEtBQUs1SCxNQUFPLENBQ2pDLElBQUlpakQsU0FBVSxFQUNkLElBQUssTUFBT3J5QyxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVFuRSxLQUFLbEssT0FBT21TLE9BQzdCLGlCQUFOdk8sUUFDZSxJQUFiQSxFQUFFNUQsU0FDWGtLLEtBQUtsSyxPQUFPbVMsTUFBTWUsR0FBR2xULE9BQVM0RCxFQUFFMkYsS0FDaENnOEMsU0FBVSxHQUlaQSxVQUNGdHZCLFdBQVcsZ0JBQWtCL3JCLEtBQUtsSyxPQUFPbVMsTUFFN0MsQ0FDQSxHQUFJLENBQUMsWUFBYSxjQUFjbEwsU0FBU2lELEtBQUs1SCxNQUFPLENBQ25ELElBQUlpakQsU0FBVSxFQUNkLElBQUssTUFBT3J5QyxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVFuRSxLQUFLbEssT0FBTzRuQixRQUM3QixpQkFBTmhrQixRQUNlLElBQWJBLEVBQUU1RCxTQUNYa0ssS0FBS2xLLE9BQU80bkIsT0FBTzFVLEdBQUdsVCxPQUFTNEQsRUFBRTJGLEtBQ2pDZzhDLFNBQVUsR0FJWkEsVUFDRnR2QixXQUFXLGlCQUFtQi9yQixLQUFLbEssT0FBTzRuQixPQUU5QyxDQUNBLEdBQUksQ0FBQyxRQUFRM2dCLFNBQVNpRCxLQUFLNUgsTUFBTyxDQUNoQyxJQUFJaWpELFNBQVUsRUFDZCxJQUFLLE1BQU9yeUMsRUFBR3RQLEtBQU1DLE9BQU93SyxRQUFRbkUsS0FBS2xLLE9BQU82dkUsUUFDN0IsaUJBQU5qc0UsUUFDZSxJQUFiQSxFQUFFNUQsU0FDWGtLLEtBQUtsSyxPQUFPNnZFLE9BQU8zOEQsR0FBR2xULE9BQVM0RCxFQUFFMkYsS0FDakNnOEMsU0FBVSxHQUlaQSxVQUNGdHZCLFdBQVcsaUJBQW1CL3JCLEtBQUtsSyxPQUFPNnZFLE9BRTlDLENBQ0YsQ0FFQSxzQkFBT1QsQ0FBaUJsbEUsS0FBTStyQixZQUM1QixHQUNnQixVQUFkL3JCLEtBQUs1SCxXQUM2QixJQUExQjRILEtBQUtsSyxPQUFPK0ssV0FBdUQsS0FBMUJiLEtBQUtsSyxPQUFPK0ssV0FnQnhELEdBQWtCLFVBQWRiLEtBQUs1SCxNQUNkLElBQUssTUFBTzRRLEVBQUd0UCxLQUFNQyxPQUFPd0ssUUFBUW5FLEtBQUtsSyxPQUFPbVMsT0FDOUMsR0FBaUIsaUJBQU52TyxHQUVJLFVBQVhBLEVBQUV0QixZQUM2QixJQUF2QnNCLEVBQUU1RCxPQUFPK0ssV0FBb0QsS0FBdkJuSCxFQUFFNUQsT0FBTytLLFdBQ3ZELE1BQzBDLElBQS9Ca3JCLFdBQVcsa0JBQ3BCQSxXQUFXLGdCQUFrQi9yQixLQUFLbEssT0FBT21TLE9BRTNDOGpCLFdBQVcsZ0JBQWdCL2lCLEdBQUczWSxLQUFPcUosRUFBRXJKLEtBQ0ksVUFBdkMwN0IsV0FBVyxnQkFBZ0IvaUIsR0FBRzNZLE9BQ2hDMDdCLFdBQVcsZ0JBQWdCL2lCLEdBQUczWSxLQUFPLFFBRXZDLE1BQU15USxNQUFRNUIsU0FBUzZCLGlCQUNyQmdyQixXQUFXLGdCQUFnQi9pQixHQUFHM1ksS0FDWSxpQkFBbkNxSixFQUFFNUQsT0FBT2tMLGdCQUFnQjhSLE1BQzVCcFosRUFBRTVELE9BQU9rTCxlQUFlOFIsTUFDeEJwWixFQUFFNUQsT0FBT2tMLGdCQUVmK3FCLFdBQVcsZ0JBQWdCL2lCLEdBQUczWSxLQUFPeVEsTUFBTXpRLEtBQzNDMDdCLFdBQVcsZ0JBQWdCL2lCLEdBQUdsVCxPQUFPK0ssVUFBWUMsTUFBTUQsVUFDdkRrckIsV0FBVyxnQkFBZ0IvaUIsR0FBR2xULE9BQU9rTCxlQUFpQkYsTUFBTUUsY0FDOUQsT0FHQyxHQUFrQixlQUFkaEIsS0FBSzVILEtBQXVCLENBQ3JDLElBQUssTUFBTzRRLEVBQUd0UCxLQUFNQyxPQUFPd0ssUUFBUW5FLEtBQUtsSyxPQUFPNG5CLFFBQzlDLEdBQWlCLGlCQUFOaGtCLEdBRUksVUFBWEEsRUFBRXRCLFlBQzZCLElBQXZCc0IsRUFBRTVELE9BQU8rSyxXQUFvRCxLQUF2Qm5ILEVBQUU1RCxPQUFPK0ssV0FDdkQsTUFDMkMsSUFBaENrckIsV0FBVyxtQkFDcEJBLFdBQVcsaUJBQW1CL3JCLEtBQUtsSyxPQUFPNG5CLFFBRTVDcU8sV0FBVyxpQkFBaUIvaUIsR0FBRzNZLEtBQU9xSixFQUFFckosS0FDSSxVQUF4QzA3QixXQUFXLGlCQUFpQi9pQixHQUFHM1ksT0FDakMwN0IsV0FBVyxpQkFBaUIvaUIsR0FBRzNZLEtBQU8sUUFFeEMsTUFBTXlRLE1BQVE1QixTQUFTNkIsaUJBQ3JCZ3JCLFdBQVcsaUJBQWlCL2lCLEdBQUczWSxLQUNXLGlCQUFuQ3FKLEVBQUU1RCxPQUFPa0wsZ0JBQWdCOFIsTUFDNUJwWixFQUFFNUQsT0FBT2tMLGVBQWU4UixNQUN4QnBaLEVBQUU1RCxPQUFPa0wsZ0JBRWYrcUIsV0FBVyxpQkFBaUIvaUIsR0FBRzNZLEtBQU95USxNQUFNelEsS0FDNUMwN0IsV0FBVyxpQkFBaUIvaUIsR0FBR2xULE9BQU8rSyxVQUFZQyxNQUFNRCxVQUN4RGtyQixXQUFXLGlCQUFpQi9pQixHQUFHbFQsT0FBT2tMLGVBQ3BDRixNQUFNRSxjQUNWLENBR0osSUFBSyxNQUFPdW9ELEVBQUdtYyxLQUFNL3JFLE9BQU93SyxRQUFRbkUsS0FBS2xLLE9BQU91SSxRQUM5QyxJQUFLLE1BQU8ySyxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVF1aEUsRUFBRWhvRCxRQUNwQyxHQUFpQixpQkFBTmhrQixHQUVJLFVBQVhBLEVBQUV0QixZQUM2QixJQUF2QnNCLEVBQUU1RCxPQUFPK0ssV0FBb0QsS0FBdkJuSCxFQUFFNUQsT0FBTytLLFdBQ3ZELE1BQzJDLElBQWhDa3JCLFdBQVcsbUJBQ3BCQSxXQUFXLGlCQUFtQi9yQixLQUFLbEssT0FBT3VJLFFBRTVDMHRCLFdBQVcsaUJBQWlCdzlCLEdBQUc3ckMsT0FBTzFVLEdBQUczWSxLQUFPcUosRUFBRXJKLEtBQ0ksVUFBbEQwN0IsV0FBVyxpQkFBaUJ3OUIsR0FBRzdyQyxPQUFPMVUsR0FBRzNZLE9BQzNDMDdCLFdBQVcsaUJBQWlCdzlCLEdBQUc3ckMsT0FBTzFVLEdBQUczWSxLQUFPLFFBRWxELE1BQU15USxNQUFRNUIsU0FBUzZCLGlCQUNyQmdyQixXQUFXLGlCQUFpQnc5QixHQUFHN3JDLE9BQU8xVSxHQUFHM1ksS0FDQyxpQkFBbkNxSixFQUFFNUQsT0FBT2tMLGdCQUFnQjhSLE1BQzVCcFosRUFBRTVELE9BQU9rTCxlQUFlOFIsTUFDeEJwWixFQUFFNUQsT0FBT2tMLGdCQUVmK3FCLFdBQVcsaUJBQWlCdzlCLEdBQUc3ckMsT0FBTzFVLEdBQUczWSxLQUFPeVEsTUFBTXpRLEtBQ3REMDdCLFdBQVcsaUJBQWlCdzlCLEdBQUc3ckMsT0FBTzFVLEdBQUdsVCxPQUFPK0ssVUFDOUNDLE1BQU1ELFVBQ1JrckIsV0FBVyxpQkFBaUJ3OUIsR0FBRzdyQyxPQUFPMVUsR0FBR2xULE9BQU9rTCxlQUM5Q0YsTUFBTUUsY0FDVixDQUlSLE1BQU8sR0FBa0IsY0FBZGhCLEtBQUs1SCxLQUNkLElBQUssTUFBTzRRLEVBQUd0UCxLQUFNQyxPQUFPd0ssUUFBUW5FLEtBQUtsSyxPQUFPNG5CLFFBQzlDLEdBQWlCLGlCQUFOaGtCLEdBRUksVUFBWEEsRUFBRXRCLFlBQzZCLElBQXZCc0IsRUFBRTVELE9BQU8rSyxXQUFvRCxLQUF2Qm5ILEVBQUU1RCxPQUFPK0ssV0FDdkQsTUFDMkMsSUFBaENrckIsV0FBVyxtQkFDcEJBLFdBQVcsaUJBQW1CL3JCLEtBQUtsSyxPQUFPNG5CLFFBRTVDcU8sV0FBVyxpQkFBaUIvaUIsR0FBRzNZLEtBQU9xSixFQUFFckosS0FDSSxVQUF4QzA3QixXQUFXLGlCQUFpQi9pQixHQUFHM1ksT0FDakMwN0IsV0FBVyxpQkFBaUIvaUIsR0FBRzNZLEtBQU8sUUFFeEMsTUFBTXlRLE1BQVE1QixTQUFTNkIsaUJBQ3JCZ3JCLFdBQVcsaUJBQWlCL2lCLEdBQUczWSxLQUNXLGlCQUFuQ3FKLEVBQUU1RCxPQUFPa0wsZ0JBQWdCOFIsTUFDNUJwWixFQUFFNUQsT0FBT2tMLGVBQWU4UixNQUN4QnBaLEVBQUU1RCxPQUFPa0wsZ0JBRWYrcUIsV0FBVyxpQkFBaUIvaUIsR0FBRzNZLEtBQU95USxNQUFNelEsS0FDNUMwN0IsV0FBVyxpQkFBaUIvaUIsR0FBR2xULE9BQU8rSyxVQUFZQyxNQUFNRCxVQUN4RGtyQixXQUFXLGlCQUFpQi9pQixHQUFHbFQsT0FBT2tMLGVBQ3BDRixNQUFNRSxjQUNWLE1BekhKLENBQ0ErcUIsV0FBVzE3QixLQUFPMlAsS0FBSzNQLEtBRUMsVUFBcEIwN0IsV0FBVzE3QixPQUNiMDdCLFdBQVcxN0IsS0FBTyxRQUVwQixNQUFNeVEsTUFBUTVCLFNBQVM2QixpQkFDckJnckIsV0FBVzE3QixLQUNrQyxpQkFBdEMyUCxLQUFLbEssT0FBT2tMLGdCQUFnQjhSLE1BQy9COVMsS0FBS2xLLE9BQU9rTCxlQUFlOFIsTUFDM0I5UyxLQUFLbEssT0FBT2tMLGdCQUVsQitxQixXQUFXMTdCLEtBQU95USxNQUFNelEsS0FDeEIwN0IsV0FBVyxvQkFBc0JqckIsTUFBTUQsVUFDdkNrckIsV0FBVyx5QkFBMkJqckIsTUFBTUUsY0FDOUMsQ0E4R0YsQ0FFQSx1QkFBT2lrRSxDQUFrQmpsRSxLQUFNK3JCLFlBQzdCLFFBQWdDLElBQXJCL3JCLEtBQUtsSyxPQUFPMkssS0FBc0IsQ0FRM0MsSUFBSUEsS0FBTyxDQUFDLEVBQ1osSUFBSyxNQUFPN0ssSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUW5FLEtBQUtsSyxPQUFPMkssTUFDcEQsSUFBYyxJQUFWdFEsT0FBb0MsaUJBQVZBLFlBQWdELElBQW5CQSxNQUFNaWYsU0FDL0QsT0FBUXhaLEtBQ04sSUFBSyxPQUNINkssS0FBSy9SLFVBQVcsRUFDaEIsTUFDRixJQUFLLE9BQ0grUixLQUFLOVIsUUFBUyxFQUNkOFIsS0FBSzdSLFlBQWEsRUFDbEIsTUFDRixJQUFLLE9BQ0g2UixLQUFLNVIsTUFBTyxFQUNaLE1BQ0YsSUFBSyxPQUNINFIsS0FBSzNSLGtCQUFtQixFQUN4QjJSLEtBQUsxUixzQkFBdUIsRUFDNUIsTUFDRixJQUFLLE9BQ0gwUixLQUFLelIsVUFBVyxFQUNoQnlSLEtBQUt4UixjQUFlLEVBQ3BCLE1BQ0YsSUFBSyxPQUNId1IsS0FBS3JSLFVBQVcsRUFDaEIsTUFDRixJQUFLLE9BQ0hxUixLQUFLcFIsVUFBVyxFQUt4QixHQUFrQixVQUFkMlEsS0FBSzVILEtBQWtCLENBRXpCLE1BQU14QyxJQUFNK0QsT0FBT21FLEtBQUsyQyxNQUFNLEdBRTVCQSxLQURFN0ssSUFDSyxDQUFFLENBQUNBLE1BQU0sR0FHVCxDQUFFbEgsVUFBVSxFQUV2QixDQUNBLE1BQU0rTSxLQUFPLENBQ1hnd0MsVUFBVyxDQUNUempDLEdBQUksR0FDSnVqRCxLQUFNbDBELEtBQUtDLEtBQUtpMEQsS0FDaEIvZSxTQUFVLEVBQ1YvckMsWUFHNEIsSUFBckJULEtBQUsvRyxPQUFPd0MsTUFDckJ1RSxLQUFLL0csTUFBTXdDLEtBQU9BLEtBQ2xCc3dCLFdBQVcsY0FBZ0J0d0IsV0FDcUIsSUFBaEN1RSxLQUFLL0csT0FBT3dDLE1BQU1nd0MsV0FDbEN6ckMsS0FBSy9HLE1BQU13QyxLQUFLZ3dDLFVBQVlod0MsS0FBS2d3QyxVQUNqQzFmLFdBQVcsd0JBQTBCdHdCLEtBQUtnd0MsWUFFMUN6ckMsS0FBSy9HLE1BQU13QyxLQUFLZ3dDLFVBQVVockMsS0FBT2hGLEtBQUtnd0MsVUFBVWhyQyxLQUNoRHNyQixXQUFXLDZCQUErQnR3QixLQUFLZ3dDLFVBQVVockMsTUFFM0RzckIsV0FBVyxpQkFBbUIsSUFDaEMsQ0FDRixDQUVBLDJCQUFPODNDLENBQXNCNXZFLE1BQU84M0IsWUFDbEMsSUFBSW8xQixNQUFRaHJELE9BQU9sQyxNQUFNd0wsS0FBS0csTUFBTSx1Q0FlcEMsR0FkYyxPQUFWdWhELFFBQ0ZwMUIsV0FBV3RzQixJQUFNLDZCQUErQjBoRCxNQUFNLFNBR3RCLElBQXpCbHRELE1BQU1nWSxxQkFDZ0MsSUFBdENoWSxNQUFNZ1ksZUFBZUUsU0FBU0MsTUFFckMrMEMsTUFBUWhyRCxPQUFPbEMsTUFBTWdZLGVBQWVFLFFBQVFDLEtBQUt4TSxNQUMvQyx1Q0FFWSxPQUFWdWhELFFBQ0ZwMUIsV0FBVyw4QkFBZ0MsNkJBQStCbzFCLE1BQU0sVUFHdkQsSUFBbEJsdEQsTUFBTStDLFFBQ2YsSUFBSyxNQUFPZ1MsRUFBR3RQLEtBQU1DLE9BQU93SyxRQUFRbFEsTUFBTStDLFNBQ3hDbXFELE1BQVFockQsT0FBT3VELEVBQUVsQyxNQUFNb0ksTUFBTSx1Q0FDZixPQUFWdWhELGFBQ2dDLElBQXZCcDFCLFdBQVcvMEIsVUFDcEIrMEIsV0FBVy8wQixRQUFVL0MsTUFBTStDLFNBRTdCKzBCLFdBQVcvMEIsUUFBUWdTLEdBQUd4UixLQUFPLDZCQUErQjJwRCxNQUFNLEdBSTFFLENBRUEsK0JBQU8yaUIsQ0FBMEI3dkUsTUFBTzgzQixZQUNsQyxDQUFDLFlBQWEsTUFBTyxZQUFZaHZCLFNBQVM5SSxNQUFNbUUsWUFFeEIsSUFBakJuRSxNQUFNNkIsYUFDdUIsSUFBN0I3QixNQUFNNkIsT0FBT3NSLGNBRXBCMmtCLFdBQVcsc0JBQXdCLENBQ2pDNHRDLE9BQVEsSUFJaEIsQ0FFQSw0QkFBT3VLLENBQXVCandFLE1BQU84M0IsWUFDbkMsR0FBbUIsY0FBZjkzQixNQUFNbUUsV0FBbUUsSUFBcENuRSxNQUFNNkIsT0FBTys2RCxRQUFRemdFLFdBQTRCLENBQ3hGMjdCLFdBQVcsMEJBQTRCOTNCLE1BQU02QixPQUFPKzZELFFBQVFDLGVBQWlCNzhELE1BQU02QixPQUFPKzZELE9BQU9DLGVBQWlCLElBQ25ELEtBQTNEL2tDLFdBQVcsMEJBQTBCamdCLFdBQVcwb0IsU0FDbER6SSxXQUFXLDBCQUE0QixLQUV6QyxNQUFNMzdCLFdBQWE0TixTQUFTL0osTUFBTTZCLE9BQU8rNkQsT0FBT3pnRSxZQUFjNE4sU0FBUy9KLE1BQU02QixPQUFPKzZELE9BQU96Z0UsWUFBYyxFQU96RyxHQU5BMjdCLFdBQVcseUJBQTJCOTNCLE1BQU02QixPQUFPKzZELE9BQU9FLE1BQzFEaGxDLFdBQVcsaUNBQW1DOTNCLE1BQU02QixPQUFPKzZELE9BQU9HLGNBQ2xFamxDLFdBQVcsaUNBQW1DOTNCLE1BQU02QixPQUFPKzZELE9BQU9oVCxjQUNsRTl4QixXQUFXLHdCQUEwQjkzQixNQUFNNkIsT0FBTys2RCxPQUFPL1MsS0FDekQveEIsV0FBVywwQkFBNEI5M0IsTUFBTTZCLE9BQU8rNkQsT0FBTzlTLE9BQzNEaHlCLFdBQVcsMEJBQTRCcHpCLFFBQVFDLE1BQU11TyxVQUFVbFQsTUFBTTZCLE9BQU91OEMsU0FBUzk0QyxRQUNsRSxJQUFmbkosV0FDRixJQUFLLE1BQU1ELFNBQVM0N0IsV0FBVywwQkFDN0I1N0IsTUFBTW11RSxVQUFZbHVFLFdBQWFELE1BQU1tdUUsVUFDckNudUUsTUFBTXF1RSxZQUFjcHVFLFdBQWFELE1BQU1xdUUsWUFDdkNydUUsTUFBTXV1RSxjQUFnQnR1RSxXQUFhRCxNQUFNdXVFLGNBRzdDM3lDLFdBQVcsbUJBQXFCLElBQ2xDLENBQ0YsQ0FFQSxrQ0FBT2s0QyxDQUE2Qmh3RSxNQUFPODNCLFlBQ3pDLEdBQ2lCLGNBQWY5M0IsTUFBTW1FLFdBQ3dDLElBQXZDbkUsTUFBTTZCLFFBQVE4d0UscUJBQ3JCLENBQ0EsTUFBTXZvRSxPQUFTLENBQUMsRUFDaEIsSUFBSyxNQUFNbzNDLG1CQUFtQnhoRCxNQUFNNkIsT0FBTzh3RSxxQkFDckNueEIsZ0JBQWdCTixVQUFZLElBQzlCOTJDLE9BQU9vM0MsZ0JBQWdCcGxELE1BQVE4TCxLQUFLYSxJQUNsQ3FCLE9BQU9vM0MsZ0JBQWdCcGxELE9BQVMsRUFDaENvbEQsZ0JBQWdCTixZQUl0QixNQUFNRCxpQkFBbUIsR0FDekIsSUFBSyxNQUFNN2tELFFBQVFnTyxPQUNqQjYyQyxpQkFBaUIvakQsS0FBSyxDQUNwQmlILEtBQU0vSCxLQUNOOGtELFVBQVc5MkMsT0FBT2hPLE1BQ2xCK2tELFVBQVUsSUFHZHJwQixXQUFXLDJCQUE2Qm1wQixpQkFDeENucEIsV0FBVyxpQ0FBbUMsSUFDaEQsQ0FDRixDQUVBLHNDQUFPaTRDLENBQWlDL3ZFLE1BQU84M0IsWUFDN0MsR0FBSSxDQUFDLFlBQWEsTUFBTyxZQUFZaHZCLFNBQVM5SSxNQUFNbUUsWUFFeEIsSUFBakJuRSxNQUFNNkIsY0FDbUIsSUFBeEI3QixNQUFNNkIsT0FBTzNCLGFBQ2dCLElBQTVCRixNQUFNNkIsT0FBT2dtRCxZQUN0QixDQWtEQSxHQWpEQS92QixXQUFXLDJDQUE0QyxFQUN2REEsV0FBVyx3Q0FBeUMsRUFDcERBLFdBQVcsa0NBQW1DLEVBQzlDQSxXQUFXLGlDQUFrQyxFQUM3Q0EsV0FBVyxrQ0FBbUMsRUFDOUNBLFdBQVcsd0NBQXlDLEVBQ3BEQSxXQUFXLHdDQUF5QyxPQUVJLElBQS9DOTNCLE1BQU02QixPQUFPM0IsUUFBUUksZ0JBQWdCcEUsT0FDNUM4RCxNQUFNNkIsT0FBTzNCLFFBQVFJLGVBQWVwRSxRQUVwQzQ3QixXQUFXLDJDQUE0QyxRQUdKLElBQTVDOTNCLE1BQU02QixPQUFPM0IsUUFBUUcsYUFBYW5FLE9BQ3pDOEQsTUFBTTZCLE9BQU8zQixRQUFRRyxZQUFZbkUsUUFFakM0N0IsV0FBVyx3Q0FBeUMsUUFHUCxJQUF0QzkzQixNQUFNNkIsT0FBTzNCLFFBQVFLLE9BQU9yRSxPQUNuQzhELE1BQU02QixPQUFPM0IsUUFBUUssTUFBTXJFLFFBRTNCNDdCLFdBQVcsa0NBQW1DLFFBR0YsSUFBckM5M0IsTUFBTTZCLE9BQU8zQixRQUFRTyxNQUFNdkUsT0FDbEM4RCxNQUFNNkIsT0FBTzNCLFFBQVFPLEtBQUt2RSxRQUUxQjQ3QixXQUFXLGlDQUFrQyxRQUdBLElBQXRDOTNCLE1BQU02QixPQUFPM0IsUUFBUU0sT0FBT3RFLE9BQ25DOEQsTUFBTTZCLE9BQU8zQixRQUFRTSxNQUFNdEUsUUFFM0I0N0IsV0FBVyxrQ0FBbUMsUUFHSyxJQUE1QzkzQixNQUFNNkIsT0FBTzNCLFFBQVFDLGFBQWFqRSxPQUN6QzhELE1BQU02QixPQUFPM0IsUUFBUUMsWUFBWWpFLFFBRWpDNDdCLFdBQVcsd0NBQXlDLFFBR0QsSUFBNUM5M0IsTUFBTTZCLE9BQU8zQixRQUFRRSxhQUFhbEUsT0FDekM4RCxNQUFNNkIsT0FBTzNCLFFBQVFFLFlBQVlsRSxRQUVqQzQ3QixXQUFXLHdDQUF5QyxRQUV6QixJQUFsQjkzQixNQUFNK0MsUUFBeUIsQ0FDeEMsTUFBTUEsUUFBVS9DLE1BQU0rQyxRQUN0QixJQUFJcWtELFNBQVUsRUFDZCxJQUFLLElBQUloaEMsRUFBSSxFQUFHd3NELEdBQUs3dkUsUUFBUTJELE9BQVEwZixFQUFJd3NELEdBQUl4c0QsSUFBSyxDQUNoRCxNQUFNeGpCLE9BQVNHLFFBQVFxakIsR0FDakJ6YSxNQUFRL0ksT0FBT1csS0FBS29JLE1BQ3hCLG9IQUVGLEdBQWMsT0FBVkEsTUFBZ0IsQ0FDbEIsSUFBSXpHLFNBQVcsR0FDZixPQUFReUcsTUFBTSxJQUNaLElBQUssaUJBQ0h6RyxTQUFXLGNBQ1gsTUFDRixJQUFLLGtCQUNIQSxTQUFXLGNBQ1gsTUFDRixJQUFLLFlBQ0hBLFNBQVcsaUJBQ1gsTUFDRixJQUFLLGNBQ0hBLFNBQVcsUUFDWCxNQUNGLElBQUssWUFDTCxJQUFLLFFBQ0hBLFNBQVcsT0FDWCxNQUNGLElBQUssb0JBQ0wsSUFBSyxjQUNIQSxTQUFXLGNBQ1gsTUFDRixJQUFLLFVBQ0hBLFNBQVcsUUFHRSxLQUFiQSxXQUNHNHlCLFdBQVcscUJBQXFCNXlCLG9CQUNuQzR5QixXQUFXLHFCQUFxQjV5QixtQkFBb0IsRUFDcERraUQsU0FBVSxHQUVSeGtELE9BQU9vQyxNQUFNQyxNQUFNQyxXQUFhQSxXQUNsQ25DLFFBQVFxakIsR0FBSzFoQixRQUFRQyxNQUFNMmEsWUFBWTFjLE9BQVEsQ0FDN0NvQyxNQUFPLENBQ0xDLEtBQU0sQ0FDSkMsYUFJTmtpRCxTQUFVLEdBR2hCLENBQ0YsQ0FDSUEsVUFDRnR2QixXQUFXLzBCLFFBQVVBLFFBRXpCLENBQ0ErMEIsV0FBVyxtQkFBcUIsSUFDbEMsQ0FFRixPQUFPQSxVQUNULENBRUEsK0JBQU9nNEMsQ0FBMEI5dkUsTUFBTzgzQixZQVl0QyxNQVhJLENBQUMsT0FBT2h2QixTQUFTOUksTUFBTW1FLFlBQWlDLElBQWpCbkUsTUFBTTZCLGNBQ1gsSUFBekI3QixNQUFNNkIsT0FBTzdFLFVBQ3RCODZCLFdBQVcsa0JBQW9CLENBQzdCK0wsWUFBYSxLQUNiQyxhQUFjLFlBRzBCLElBQWpDOWpDLE1BQU02QixPQUFPZ3hFLGtCQUN0Qi82QyxXQUFXLDBCQUE0QixJQUdwQ0EsVUFDVCxDQUVBLG1DQUFPNjNDLENBQThCM3ZFLE1BQU84M0IsWUFDMUMsR0FDaUIsY0FBZjkzQixNQUFNbUUsV0FDZ0MsSUFBL0JuRSxNQUFNNkIsUUFBUUMsU0FBUyt0QixJQUM5QixDQUNBLE1BQU02bkIsZUFBaUJ4dkMsS0FBS3lpRCxLQUFLM3FELE1BQU02QixPQUFPQyxRQUFRK3RCLElBQUkzekIsTUFBUSxRQUVsQixJQUF2QzhELE1BQU02QixPQUFPQyxRQUFRK3RCLElBQUlpeUIsV0FDTyxPQUF2QzloRCxNQUFNNkIsT0FBT0MsUUFBUSt0QixJQUFJaXlCLFlBRXpCaHFCLFdBQVcsZ0NBQWtDLFFBR00sSUFBNUM5M0IsTUFBTTZCLE9BQU9DLFFBQVErdEIsSUFBSTZuQixnQkFDWSxPQUE1QzEzQyxNQUFNNkIsT0FBT0MsUUFBUSt0QixJQUFJNm5CLGlCQUV6QjVmLFdBQVcscUNBQXVDLE1BQVE0ZixxQkFHWixJQUF2QzEzQyxNQUFNNkIsT0FBT0MsUUFBUSt0QixJQUFJaXlCLFdBQ08sT0FBdkM5aEQsTUFBTTZCLE9BQU9DLFFBQVErdEIsSUFBSWl5QixZQUV6QmhxQixXQUFXLGdDQUFrQyxRQUdHLElBQXpDOTNCLE1BQU02QixPQUFPaXhFLHlCQUNxQixPQUF6Qzl5RSxNQUFNNkIsT0FBT2l4RSw4QkFDeUMsSUFBL0M5eUUsTUFBTTZCLE9BQU9peEUsd0JBQXdCNTJFLE9BQ0csT0FBL0M4RCxNQUFNNkIsT0FBT2l4RSx3QkFBd0I1MkUsUUFFckM0N0IsV0FBVyx3Q0FBMEMsUUFHTCxJQUF6QzkzQixNQUFNNkIsT0FBT2l4RSx5QkFDcUIsT0FBekM5eUUsTUFBTTZCLE9BQU9peEUsOEJBQ3VDLElBQTdDOXlFLE1BQU02QixPQUFPaXhFLHdCQUF3Qi9wRSxLQUNDLE9BQTdDL0ksTUFBTTZCLE9BQU9peEUsd0JBQXdCL3BFLE1BRXJDK3VCLFdBQVcsc0NBQXdDNGYscUJBRWQsSUFBNUIxM0MsTUFBTTZCLE9BQU9DLFFBQVFxMkMsVUFFYSxJQUFsQ240QyxNQUFNNkIsT0FBT0MsUUFBUXEyQyxHQUFHajhDLE9BQ0csT0FBbEM4RCxNQUFNNkIsT0FBT0MsUUFBUXEyQyxHQUFHajhDLFFBRXhCNDdCLFdBQVcsMkJBQTZCNGYscUJBR0QsSUFBaEMxM0MsTUFBTTZCLE9BQU9DLFFBQVFxMkMsR0FBR3B2QyxLQUNDLE9BQWhDL0ksTUFBTTZCLE9BQU9DLFFBQVFxMkMsR0FBR3B2QyxNQUV4Qit1QixXQUFXLHlCQUEyQjRmLHNCQUlWLElBQXZCMTNDLE1BQU02QixPQUFPcXdFLE9BQ0csT0FBdkJseUUsTUFBTTZCLE9BQU9xd0UsUUFFYnA2QyxXQUFXLGdCQUFrQixHQUVqQyxDQUNBLE9BQU9BLFVBQ1QsQ0FFQSwyQkFBT3E1QyxDQUFzQjdCLE1BQU94M0MsWUFDbEMsTUFBTW8xQixNQUFRaHJELE9BQU9vdEUsTUFBTTlqRSxLQUFLRyxNQUFNLHVDQUl0QyxPQUhjLE9BQVZ1aEQsUUFDRnAxQixXQUFXdHNCLElBQU0sNkJBQStCMGhELE1BQU0sSUFFakRwMUIsVUFDVCxDQUVBLDJCQUFPczVDLENBQXNCOUIsTUFBT3gzQyxZQUNsQyxJQUFJbzFCLE1BQVFockQsT0FBT290RSxNQUFNOWpFLEtBQUtHLE1BQU0sdUNBQ3RCLE9BQVZ1aEQsUUFDRnAxQixXQUFXdHNCLElBQU0sNkJBQStCMGhELE1BQU0sSUFFeEQsSUFBSyxNQUFPbjRDLEVBQUd0UCxLQUFNQyxPQUFPd0ssUUFBUW8vRCxNQUFNOW1FLFNBQ3hDMGtELE1BQVFockQsT0FBT3VELEVBQUUrRixLQUFLRyxNQUFNLHVDQUNkLE9BQVZ1aEQsYUFDZ0MsSUFBdkJwMUIsV0FBV3R2QixVQUNwQnN2QixXQUFXdHZCLFFBQVU4bUUsTUFBTTltRSxTQUU3QnN2QixXQUFXdHZCLFFBQVF1TSxHQUFHdkosSUFBTSw2QkFBK0IwaEQsTUFBTSxJQUdyRSxPQUFPcDFCLFVBQ1QsQ0FFQSwyQkFBT3c1QyxDQUFzQng2RCxNQUFPZ2hCLFlBQ2xDLE1BQU1vMUIsTUFBUWhyRCxPQUFPNFUsTUFBTXRMLEtBQUtHLE1BQU0sdUNBSXRDLE9BSGMsT0FBVnVoRCxRQUNGcDFCLFdBQVd0c0IsSUFBTSw2QkFBK0IwaEQsTUFBTSxJQUVqRHAxQixVQUNULEVDcnBDRixNQUFNaTdDLGVBQ0osMkRBQ0FybEUsY0FBY0MsWUFDWixpR0FHRTlELEtBQU8sQ0FDWG1wRSxHQUFJLENBQ0Y3L0QsWUFBYSxlQUNiOC9ELE9BQVEsT0FDUkMsVUFBVyxPQUNYQyxvQkFBcUIsT0FDckJDLFlBQWEsT0FDYkMsT0FBUSxvQkFDUkMsT0FBUSxXQUNSQyxlQUFnQixxQ0FDaEJDLGdCQUFpQixhQUNqQkMsY0FBZSwwQ0FDZkMsaUJBQWtCLHVCQUNsQkMsY0FBZSxvQkFDZkMsUUFDRSxvRkFHRkMsTUFDRSw2REFDRkMsSUFBSyxtQ0FDTEMsV0FBWSw0QkFDWkMsU0FBVSxvQ0FDVkMsUUFDRSxpbUJBRUpDLEdBQUksQ0FDRi9nRSxZQUFhLGNBQ2I4L0QsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiZSxVQUFXLE1BQ1hkLE9BQVEscUJBQ1JDLE9BQVEsNkJBQ1JDLGVBQWdCLHFDQUNoQkMsZ0JBQWlCLFlBQ2pCQyxjQUFlLGdEQUNmQyxpQkFBa0Isc0JBQ2xCQyxjQUFlLG9CQUNmQyxRQUNFLHFGQUdGQyxNQUNFLGdGQUdGQyxJQUFLLG1DQUNMQyxXQUFZLDRCQUNaQyxTQUFVLG1DQUNWQyxRQUNFLG1sQkFFSkcsR0FBSSxDQUNGamhFLFlBQWEsY0FDYjgvRCxPQUFRLE9BQ1JDLFVBQVcsT0FDWEMsb0JBQXFCLE9BQ3JCQyxZQUFhLE9BQ2JlLFVBQVcsTUFDWGQsT0FBUSwyQkFDUkMsT0FBUSxrQkFDUkMsZUFBZ0IseUJBQ2hCQyxnQkFBaUIsWUFDakJDLGNBQWUsZ0RBQ2ZDLGlCQUFrQixvQkFDbEJDLGNBQWUsc0JBQ2ZDLFFBQ0UsMEVBR0ZDLE1BQ0UsbUZBR0ZDLElBQUssdUNBQ0xDLFdBQVksNEJBQ1pDLFNBQVUsa0RBQ1ZDLFFBQ0Usd3JCQUVKSSxHQUFJLENBQ0ZsaEUsWUFBYSxjQUNiOC9ELE9BQVEsUUFDUkMsVUFBVyxtQkFDWEMsb0JBQXFCLFFBQ3JCQyxZQUFhLFFBQ2JDLE9BQVEscUNBQ1JDLE9BQVEsb0JBQ1JDLGVBQWdCLG1DQUNoQkMsZ0JBQWlCLGFBQ2pCQyxjQUFlLCtDQUNmQyxpQkFBa0IsMEJBQ2xCQyxjQUFlLGtDQUNmQyxRQUNFLHlFQUdGQyxNQUFPLHNDQUNQQyxJQUFLLHdCQUNMQyxXQUFZLHlDQUNaQyxTQUNFLG1JQUdGQyxRQUNFLHVuQkFFSkssR0FBSSxDQUNGbmhFLFlBQWEsZUFDYjgvRCxPQUFRLFVBQ1JDLFVBQVcsVUFDWEMsb0JBQXFCLFVBQ3JCQyxZQUFhLEtBQ2JDLE9BQVEsK0JBQ1JDLE9BQVEsdUNBQ1JDLGVBQWdCLDJCQUNoQkMsZ0JBQWlCLGNBQ2pCQyxjQUFlLCtDQUNmQyxpQkFBa0IsdUNBQ2xCQyxjQUFlLCtCQUNmQyxRQUNFLHdFQUdGQyxNQUNFLG9GQUdGQyxJQUFLLDZCQUNMQyxXQUFZLDBDQUNaQyxTQUFVLG9DQUNWQyxRQUNFLCtuQkFFSixRQUFTLENBQ1A5Z0UsWUFBYSwwQkFDYjgvRCxPQUFRLE9BQ1JDLFVBQVcsT0FDWEMsb0JBQXFCLE9BQ3JCQyxZQUFhLE9BQ2JDLE9BQVEseUJBRVJDLE9BQVEsV0FDUkMsZUFDRSxrREFDRkMsZ0JBQWlCLGFBQ2pCQyxjQUNFLG1EQUNGQyxpQkFBa0IsMEJBQ2xCQyxjQUFlLDRCQUNmQyxRQUNFLDRRQUdGQyxNQUNFLDhFQUdGQyxJQUFLLHVDQUNMQyxXQUFZLCtCQUNaQyxTQUFVLCtDQUNWQyxRQUNFLG1aQUlBdmMsYUFBZSxDQUNuQnNiLEdBQUksQ0FDRjN2QixJQUFLLCtDQUNMN0ksV0FDRSwwREFDRmwrQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMZ3pCLElBQ0UsOERBQ0Zrb0IsR0FDRSxnRUFDRkksR0FDRSxrRUFHRmwyQyxHQUNFLGdCQUNBNEgsS0FBS21wRSxHQUFHSyxPQUNSLGdEQUNBeHBFLEtBQUttcEUsR0FBR0MsT0FDUixhQUNGL2hDLE1BQU8sMERBQ1BudkMsTUFDRSx1Q0FHQThILEtBQUttcEUsR0FBR0UsVUFDUixrQkFDRjVoQyxJQUFLLGtEQUNMaVAsSUFBSyxvREFDTHN5QixnQkFDRSwyRUFHQWhwRSxLQUFLbXBFLEdBQUdHLG9CQUNSLHVCQUNGamtELFFBQ0UsNERBR0FybEIsS0FBS21wRSxHQUFHSSxZQUNSLHlDQUNGMW9ELE9BQ0Usd0JBQ0Fxb0QsZUFEQSwySkFLQWxwRSxLQUFLbXBFLEdBQUdLLE9BQ1IsSUFDQXhwRSxLQUFLbXBFLEdBQUdNLE9BQ1IsNENBQ0ZpQixZQUNFLHVGQUlGeG1FLE1BQ0UscUJBQ0FnbEUsZUFEQSxtSEFLRnlCLGlCQUFrQiw2Q0FDbEJwNEUsS0FBTSxtQkFBcUIyMkUsZUFBaUIsZUFDNUMwQixTQUNFLElBQ0E1cUUsS0FBS21wRSxHQUFHTyxlQUNSLElBQ0ExcEUsS0FBS21wRSxHQUFHUyxjQUNSLElBQ0E1cEUsS0FBS21wRSxHQUFHVSxpQkFDUixJQUNBN3BFLEtBQUttcEUsR0FBR1csY0FDUixLQUVKTyxHQUFJLENBQ0Y3d0IsSUFBSyxpREFDTDdJLFdBQVkscURBQ1psK0MsSUFBSyxrREFDTEMsSUFBSyxrREFDTEMsSUFBSyxrREFDTEcsSUFBSyxrREFDTEMsSUFBSyxrREFDTEgsSUFBSyxrREFDTEMsSUFBSyxrREFDTEcsSUFBSyxrREFDTGd6QixJQUNFLDhFQUdGa29CLEdBQ0UsbUVBR0ZJLEdBQ0UsaUVBR0ZsMkMsR0FDRSxnQkFDQTRILEtBQUtxcUUsR0FBR2IsT0FDUixrREFDQXhwRSxLQUFLcXFFLEdBQUdqQixPQUNSLGFBQ0YvaEMsTUFDRSxxRUFHRm52QyxNQUNFLDJDQUdBOEgsS0FBS3FxRSxHQUFHaEIsVUFDUixrQkFDRjVoQyxJQUNFLG1FQUdGaVAsSUFBSyxxREFDTHN5QixnQkFDRSxxRkFHQWhwRSxLQUFLcXFFLEdBQUdmLG9CQUNSLHVCQUNGamtELFFBQ0UsMERBR0FybEIsS0FBS3FxRSxHQUFHZCxZQUNSLCtDQUNGMW9ELE9BQ0Usd0JBQ0Fxb0QsZUFEQSw4SkFLQWxwRSxLQUFLcXFFLEdBQUdiLE9BQ1IsSUFDQXhwRSxLQUFLcXFFLEdBQUdaLE9BQ1IsOENBQ0ZpQixZQUNFLDRGQUlGeG1FLE1BQ0UscUJBQ0FnbEUsZUFEQSxvSEFLRnlCLGlCQUNFLHFFQUdGcDRFLEtBQU0sbUJBQXFCMjJFLGVBQWlCLGVBQzVDMEIsU0FDRSxJQUNBNXFFLEtBQUtxcUUsR0FBR1gsZUFDUixJQUNBMXBFLEtBQUtxcUUsR0FBR1QsY0FDUixJQUNBNXBFLEtBQUtxcUUsR0FBR1IsaUJBQ1IsSUFDQTdwRSxLQUFLcXFFLEdBQUdQLGNBQ1IsS0FFSlMsR0FBSSxDQUNGL3dCLElBQUssMENBQ0w3SSxXQUFZLHFEQUNabCtDLElBQUssaURBQ0xDLElBQUssbURBQ0xDLElBQUssa0RBQ0xHLElBQUssbURBQ0xDLElBQUssbURBQ0xILElBQUssa0RBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xnekIsSUFDRSxrRUFHRmtvQixHQUNFLDBFQUdGSSxHQUNFLGtFQUdGbDJDLEdBQ0UsZ0JBQ0E0SCxLQUFLdXFFLEdBQUdmLE9BQ1Isa0RBQ0F4cEUsS0FBS3VxRSxHQUFHbkIsT0FDUixhQUNGL2hDLE1BQU8sMkRBQ1BudkMsTUFDRSx5Q0FHQThILEtBQUt1cUUsR0FBR2xCLFVBQ1Isa0JBQ0Y1aEMsSUFBSyxrREFDTGlQLElBQUsseURBQ0xzeUIsZ0JBQ0UsdUVBR0FocEUsS0FBS3VxRSxHQUFHakIsb0JBQ1IsdUJBQ0Zqa0QsUUFDRSxxRUFHQXJsQixLQUFLdXFFLEdBQUdoQixZQUNSLCtDQUNGMW9ELE9BQ0Usd0JBQ0Fxb0QsZUFEQSxnS0FLQWxwRSxLQUFLdXFFLEdBQUdmLE9BQ1IsSUFDQXhwRSxLQUFLdXFFLEdBQUdkLE9BQ1IsNENBQ0ZpQixZQUNFLHNGQUlGeG1FLE1BQ0UscUJBQ0FnbEUsZUFEQSxtSEFLRnlCLGlCQUNFLHFEQUNGcDRFLEtBQU0sbUJBQXFCMjJFLGVBQWlCLGVBQzVDMEIsU0FDRSxJQUNBNXFFLEtBQUt1cUUsR0FBR2IsZUFDUixJQUNBMXBFLEtBQUt1cUUsR0FBR1gsY0FDUixJQUNBNXBFLEtBQUt1cUUsR0FBR1YsaUJBQ1IsSUFDQTdwRSxLQUFLdXFFLEdBQUdULGNBQ1IsS0FFSlUsR0FBSSxDQUNGaHhCLElBQUssc0NBQ0w3SSxXQUNFLDBEQUNGbCtDLElBQUssbURBQ0xDLElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xDLElBQUssbURBQ0xILElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xnekIsSUFDRSw2RUFHRmtvQixHQUNFLG1FQUdGSSxHQUNFLHFFQUdGbDJDLEdBQ0UsZ0JBQ0E0SCxLQUFLd3FFLEdBQUdoQixPQUNSLGdEQUNBeHBFLEtBQUt3cUUsR0FBR3BCLE9BQ1IsYUFDRi9oQyxNQUNFLDREQUNGbnZDLE1BQ0UsdURBR0E4SCxLQUFLd3FFLEdBQUduQixVQUNSLGtCQUNGNWhDLElBQ0UsMkVBR0ZpUCxJQUFLLHNEQUNMc3lCLGdCQUNFLGtFQUdBaHBFLEtBQUt3cUUsR0FBR2xCLG9CQUNSLHVCQUNGamtELFFBQ0UsMkVBR0FybEIsS0FBS3dxRSxHQUFHakIsWUFDUix5Q0FDRjFvRCxPQUNFLHdCQUNBcW9ELGVBREEsdUtBS0FscEUsS0FBS3dxRSxHQUFHaEIsT0FDUixJQUNBeHBFLEtBQUt3cUUsR0FBR2YsT0FDUiw0Q0FDRmlCLFlBQ0UsMkZBR0Z4bUUsTUFDRSxxQkFDQWdsRSxlQURBLG1IQUtGeUIsaUJBQ0UsNERBQ0ZwNEUsS0FBTSxtQkFBcUIyMkUsZUFBaUIsZUFDNUMwQixTQUNFLElBQ0E1cUUsS0FBS3dxRSxHQUFHZCxlQUNSLElBQ0ExcEUsS0FBS3dxRSxHQUFHWixjQUNSLElBQ0E1cEUsS0FBS3dxRSxHQUFHWCxpQkFDUixJQUNBN3BFLEtBQUt3cUUsR0FBR1YsY0FDUixLQUVKVyxHQUFJLENBQ0ZqeEIsSUFBSywwQ0FDTDdJLFdBQ0UseURBQ0ZsK0MsSUFBSyxtREFDTEMsSUFBSyxtREFDTEMsSUFBSyxtREFDTEcsSUFBSyxtREFDTEMsSUFBSyxtREFDTEgsSUFBSyxtREFDTEMsSUFBSyxtREFDTEcsSUFBSyxtREFDTGd6QixJQUNFLCtEQUNGa29CLEdBQ0UsK0VBR0ZJLEdBQ0Usb0ZBR0ZsMkMsR0FDRSxnQkFDQTRILEtBQUt5cUUsR0FBR2pCLE9BQ1IsZ0RBQ0F4cEUsS0FBS3lxRSxHQUFHckIsT0FDUixhQUNGL2hDLE1BQ0UsZ0VBQ0ZudkMsTUFDRSwwQ0FHQThILEtBQUt5cUUsR0FBR3BCLFVBQ1Isa0JBQ0Y1aEMsSUFBSyx3REFDTGlQLElBQUssc0RBQ0xzeUIsZ0JBQ0UsaUVBR0FocEUsS0FBS3lxRSxHQUFHbkIsb0JBQ1IsdUJBQ0Zqa0QsUUFDRSx5RUFHQXJsQixLQUFLeXFFLEdBQUdsQixZQUNSLHlDQUNGMW9ELE9BQ0Usd0JBQ0Fxb0QsZUFEQSx5SkFLQWxwRSxLQUFLeXFFLEdBQUdqQixPQUNSLElBQ0F4cEUsS0FBS3lxRSxHQUFHaEIsT0FDUiw0Q0FDRmlCLFlBQ0UsMEZBR0Z4bUUsTUFDRSxxQkFDQWdsRSxlQURBLG1IQUtGeUIsaUJBQ0UsdURBQ0ZwNEUsS0FBTSxtQkFBcUIyMkUsZUFBaUIsZUFDNUMwQixTQUNFLElBQ0E1cUUsS0FBS3lxRSxHQUFHZixlQUNSLElBQ0ExcEUsS0FBS3lxRSxHQUFHYixjQUNSLElBQ0E1cEUsS0FBS3lxRSxHQUFHWixpQkFDUixJQUNBN3BFLEtBQUt5cUUsR0FBR1gsY0FDUixLQUVKLFFBQVMsQ0FDUHR3QixJQUFLLGtEQUVMN0ksV0FDRSwwREFDRmwrQyxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMRyxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMSCxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMRyxJQUFLLHNEQUNMZ3pCLElBQ0UsaUVBR0Zrb0IsR0FDRSxtRUFHRkksR0FDRSxrRUFHRmwyQyxHQUNFLGdCQUNBNEgsS0FBSyxTQUFTd3BFLE9BQ2QsZ0RBQ0F4cEUsS0FBSyxTQUFTb3BFLE9BQ2QsYUFDRi9oQyxNQUNFLDZEQUNGbnZDLE1BQ0UsMENBR0E4SCxLQUFLLFNBQVNxcEUsVUFDZCxrQkFDRjVoQyxJQUFLLGtEQUNMaVAsSUFBSyx1REFDTHN5QixnQkFDRSxxRkFHQWhwRSxLQUFLLFNBQVNzcEUsb0JBQ2QsdUJBQ0Zqa0QsUUFDRSxvRkFHQXJsQixLQUFLLFNBQVN1cEUsWUFDZCx5Q0FDRjFvRCxPQUNFLHdCQUNBcW9ELGVBREEsa0tBS0FscEUsS0FBSyxTQUFTd3BFLE9BQ2QsSUFDQXhwRSxLQUFLLFNBQVN5cEUsT0FDZCw0Q0FDRmlCLFlBQ0UsOEZBR0Z4bUUsTUFDRSxxQkFDQWdsRSxlQURBLG1IQUtGeUIsaUJBQWtCLHFDQUNsQnA0RSxLQUFNLG1CQUFxQjIyRSxlQUFpQixlQUM1QzBCLFNBQ0UsSUFDQTVxRSxLQUFLLFNBQVMwcEUsZUFDZCxJQUNBMXBFLEtBQUssU0FBUzRwRSxjQUNkLElBQ0E1cEUsS0FBSyxTQUFTNnBFLGlCQUNkLElBQ0E3cEUsS0FBSyxTQUFTOHBFLGNBQ2QsTUFJQyxNQUFNZSx3QkFDWCxvQkFBT0MsQ0FBZXJkLEtBQU8sTUFPM0IsT0FOS0EsT0FDSEEsS0FBT2wwRCxLQUFLQyxLQUFLaTBELFdBRWUsSUFBdkJJLGFBQWFKLFFBQ3RCQSxLQUFPLE1BRUZBLElBQ1QsQ0FFQSxxQkFBT3NkLENBQWdCdGQsTUFDckIsSUFBSTJjLFFBQVVwcUUsS0FBS21wRSxHQUFHaUIsUUFJdEIsWUFIMEIsSUFBZnBxRSxLQUFLeXRELFFBQ2QyYyxRQUFVcHFFLEtBQUt5dEQsTUFBTTJjLFNBRWhCQSxPQUNULENBRUEsc0JBQU9ZLEdBQ0wsTUFBTXRxRSxPQUFTLENBQUMsRUFDaEIsSUFBSyxNQUFNNUksT0FBT2tJLEtBQ2hCVSxPQUFPNUksS0FBT2tJLEtBQUtsSSxLQUFLd1IsWUFFMUIsT0FBTzVJLE1BQ1QsQ0FFQSxjQUFPdXFFLENBQVN4ZCxNQUNkLE9BQU96dEQsS0FBS3l0RCxPQUFTenRELEtBQUttcEUsRUFDNUIsQ0FFQSw0QkFBTytCLENBQXVCemQsTUFDNUIsT0FBT0ksYUFBYUosT0FBU0ksYUFBYXNiLEVBQzVDLEVDdHdCSyxNQUFNZ0Msa0JBQ1gsV0FBQTdwRSxHQUNFckYsS0FBS3VLLE9BQVMsQ0FBQyxFQUNmdkssS0FBS212RSxjQUFnQixFQUN2QixDQUVBLG1CQUFXQyxHQUNULE1BQU8sR0FDVCxDQUVBLG1CQUFXQyxHQUNULE1BQU8sR0FDVCxDQVFBLFFBQUFDLENBQVVDLE1BQU90cUUsVUFBWSxNQUMzQixNQUFnQyxXQUE1QnNxRSxNQUFNbHFFLGFBQWEvTyxLQUNkaTVFLE1BRUYsSUFBSTVuRSxPQUFPNG5FLE1BQU90cUUsVUFDM0IsQ0FPQSxXQUFBdXFFLENBQWFyNUUsR0FDWCxPQUFPQSxFQUNKdVosUUFBUSxXQUFZLEtBQ3BCQSxRQUFRLE9BQVEsSUFDaEJBLFFBQVEsZ0JBQWlCLEdBQzlCLENBU0EsYUFBQSsvRCxDQUFldDVFLEdBQ2IsUUFBaUIsSUFBTkEsRUFBbUIsT0FBT0EsRUFDckMsUUFBbUMsSUFBeEI2SixLQUFLK0QsS0FBS3NxRSxVQUEyQixDQUM5QyxNQUFNcUIsTUFBUSxJQUFJL25FLE9BQ2hCLGNBQWdCM0gsS0FBSytELEtBQUtzcUUsVUFBWSxjQUN0QyxPQUVGLE9BQU9sNEUsRUFBRXVaLFFBQVFnZ0UsTUFBTyxjQUMxQixDQUNFLE9BQU92NUUsQ0FFWCxDQU9BLE1BQUF3NUUsQ0FBUXg1RSxHQUNOLE9BQXdCLElBQXBCQSxFQUFFc2tDLE9BQU83NUIsUUFTSSxLQU5qQnpLLEVBQUlBLEVBQ0Rza0MsT0FDQWh1QixNQUFNLE1BQ056SSxLQUFJa3dDLE1BQVFBLEtBQUt6WixPQUFPL3FCLFFBQVEsWUFBYSxNQUM3Q25aLFFBQU8yOUMsTUFBUUEsT0FDZjd2QyxLQUFLLFlBQ0Z6RCxPQVJHLEdBV0YsTUFBUXpLLEVBQUksTUFDckIsQ0FhQSxLQUFBNmYsQ0FDRTQ1RCxVQUNBLGdCQUNtQixFQUFJLFVBQ1YsRUFBSSxLQUNSVixrQkFBa0JHLFNBQVEsTUFDMUIsRUFBSyxlQUNJLEdBQ2QsQ0FBQyxHQUVMLElBQUk1cUUsUUFBUyxFQUNUb3JFLFFBQVMsRUFNYixRQUxvQyxJQUF6Qjd2RSxLQUFLMHZFLE1BQU1FLFVBQ3BCQyxPQUFTN3ZFLEtBQUtzdkUsU0FBU3R2RSxLQUFLMHZFLE1BQU1FLGdCQUNNLElBQXhCNXZFLEtBQUsrRCxLQUFLNnJFLFlBQzFCQyxPQUFTN3ZFLEtBQUtzdkUsU0FBU3R2RSxLQUFLK0QsS0FBSzZyRSxhQUVwQixJQUFYQyxPQUFrQixFQUNQLElBQVQzN0IsT0FDRkEsS0FBT2wwQyxLQUFLazBDLE1BRWQsTUFBTWwrQixNQUFRNjVELE9BQU9sd0IsS0FBS3pMLE1BQzFCLElBQUk5OUMsTUFBUSxLQUNaLEdBQ1ksT0FBVjRmLFNBQ21CLElBQWxCODVELG9CQUNnRCxLQUF2Qzk1RCxNQUFNMVIsUUFBVSxDQUFDLEdBQUd3ckUsZ0JBQzlCLENBS0EsR0FKQXJyRSxPQUFTdVIsTUFBTTFSLFFBQVUsQ0FBQyxFQUN0QnlyRSxpQkFDRi92RSxLQUFLazBDLEtBQU9sMEMsS0FBS2swQyxLQUFLeGtDLFFBQVFzRyxNQUFNLEdBQUd5a0IsT0FBUSxNQUFNQSxRQUVuRHUxQyxTQUNGLElBQUssTUFBTW4wRSxPQUFPK0QsT0FBT21FLEtBQUtpUyxNQUFNMVIsUUFDbEMsT0FBUWpHLE1BQ04sS0FBSzZ3RSxrQkFBa0JHLFNBQ3JCcnZFLEtBQUt1SyxPQUFPMU8sS0FBT08sT0FBTzRaLE1BQU0xUixPQUFPekksTUFBTTZULFFBQVEsS0FBTSxLQUMzRCxNQUNGLEtBQUt3L0Qsa0JBQWtCRSxTQUNyQmg1RSxNQUFROEYsT0FBTzhaLE1BQU0xUixPQUFPekksTUFDdkJDLE1BQU0xRixTQUNUNEosS0FBS3VLLE9BQU8xTyxLQUFPSyxPQUFPOFosTUFBTTFSLE9BQU96SSxPQU1qRDRJLE9BQU8sV0FBYXVSLE1BQU0sR0FDMUJ2UixPQUFPLFVBQVl1UixNQUFNbUgsS0FDM0IsQ0FDRixDQUNBLE9BQU8xWSxNQUNULENBT0EsYUFBQXdyRSxDQUFlLzdCLE1BQ2IsR0FBMkIsSUFBdkJBLEtBQUt6WixPQUFPNzVCLE9BQ2QsT0FLRixJQUFJZ2tCLE9BQ0F0cEIsTUFDQTQwRSxRQUxBdHRFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFvK0QsSUFBSSxjQUFlbjFCLE1BSzdCLElBQUlrOEIsYUFBYyxFQUNkQyxTQUFXLEdBQ2YsR0FHRSxHQUZBQSxXQUNBbjhCLEtBQU9BLEtBQUt6WixPQUVUbi9CLE1BQVEwRSxLQUFLZ1csTUFBTSxjQUFlLENBQUVnNkQsVUFBVSxFQUFPOTdCLE9BRXREQSxLQUFPQSxLQUFLeGtDLFFBQVFwVSxNQUFNLFdBQVksV0FDSixJQUF2QjBFLEtBQUt1SyxPQUFPb1osU0FDckIzakIsS0FBS3VLLE9BQU9vWixPQUFTLElBRXZCM2pCLEtBQUt1SyxPQUFPb1osT0FBT3ZzQixLQUFLLENBQ3RCZCxLQUFNMEosS0FBS3d2RSxZQUFZbDBFLE1BQU1oRixNQUM3QkYsTUFBTzhGLE9BQU9aLE1BQU1nMUUsWUFDcEJsNUUsTUFBTSxTQUVILEdBQ0p3dEIsT0FBUzVrQixLQUFLZ1csTUFBTSxTQUFVLENBQzdCZzZELFVBQVUsRUFDVjk3QixLQUNBNDdCLGVBQStCLElBQWhCTSxhQUF3QixlQUV6QyxDQUNBbDhCLEtBQU9BLEtBQUt4a0MsUUFBUWtWLE9BQU8sV0FBWSxNQUN2QyxNQUFNdHVCLEtBQU8wSixLQUFLd3ZFLFlBQVk1cUQsT0FBT3R1QixNQUFRLElBQzdDLElBQUk0Z0IsT0FBU2xYLEtBQUt5dkUsY0FBY3p2RSxLQUFLd3ZFLFlBQVk1cUQsT0FBTzFOLFFBQVUsS0FDbEUsTUFBTXE1RCxZQUNKdndFLEtBQUtnVyxNQUFNLFVBQVcsQ0FDcEJrK0IsS0FBTTU5QyxLQUNOeTVFLGdCQUFnQixFQUNoQkMsVUFBVSxLQUVaaHdFLEtBQUtnVyxNQUFNLFFBQVMsQ0FDbEJrK0IsS0FBTTU5QyxLQUNOeTVFLGdCQUFnQixFQUNoQkMsVUFBVSxLQUVaaHdFLEtBQUtnVyxNQUFNLE1BQU8sQ0FDaEJrK0IsS0FBTTU5QyxLQUNOeTVFLGdCQUFnQixFQUNoQkMsVUFBVSxLQUVaaHdFLEtBQUtnVyxNQUFNLGFBQWMsQ0FDdkJrK0IsS0FBTTU5QyxLQUNOeTVFLGdCQUFnQixFQUNoQkMsVUFBVSxLQUVaaHdFLEtBQUtnVyxNQUFNLFdBQVksQ0FDckJrK0IsS0FBTTU5QyxLQUNOeTVFLGdCQUFnQixFQUNoQkMsVUFBVSxLQVdkLElBQUlqaUUsTUFKRnFpRSxZQUhzQixPQUF0QnhyRCxPQUFPMHJELGlCQUNzQixJQUF0QjFyRCxPQUFPMHJELFlBRUFwMEUsT0FBTzBvQixPQUFPMHJELFlBSzlCLElBQUlqNEUsTUFBTyxFQUNQQyxNQUFPLEVBQ1gsR0FDRXlWLE1BQVEvTixLQUFLc3ZFLFNBQ1gsaUJBQ0V0dkUsS0FBSytELEtBQUt5cEUsT0FDVixTQUNBeHRFLEtBQUsrRCxLQUFLd3BFLE9BQ1YsZUFDQXZ0RSxLQUFLdUssT0FBT3BPLEdBQUd1VCxRQUFRLFFBQVMsSUFDaEMsTUFDRml3QyxLQUFLem9DLFFBQ0huSixPQUNGMVYsTUFBTyxFQUNQNmUsT0FBU0EsT0FBT3hILFFBQVEzQixNQUFNLEdBQUksTUFFbENBLE1BQVEvTixLQUFLc3ZFLFNBQ1gsaUJBQ0V0dkUsS0FBSytELEtBQUt3cEUsT0FDVixrQkFDQXZ0RSxLQUFLdUssT0FBT3BPLEdBQUd1VCxRQUFRLFFBQVMsSUFDaEMsTUFDRml3QyxLQUFLem9DLFFBQ0huSixRQUNGelYsTUFBTyxFQUNQNGUsT0FBU0EsT0FBT3hILFFBQVEzQixNQUFNLEdBQUksWUFHL0JBLE9BQ1QsTUFBTXlpRSxRQUFVdDVELE9BQU96SyxNQUFNLEtBQ3ZCZ2tFLFVBQStCLElBQW5CRCxRQUFRNXZFLE9BQ3BCMEUsS0FBTyxDQUNYaFAsS0FDQStILEtBQU0sU0FDTnRDLE9BQVEsQ0FDTmtNLE1BQU8sQ0FDTGdHLEdBQUltaUUsYUFFTnZwRSxXQUFZLENBQUMsRUFDYmlELE1BQU8sQ0FDTEwsT0FBUSxDQUNOclQsTUFBT3E2RSxVQUFZLEdBQUssRUFDeEJ2NUQsT0FBUXM1RCxRQUFRLElBRWxCeG1FLEtBQU0sQ0FDSjVULE1BQU9xNkUsVUFBWSxHQUFLLEVBQ3hCdjVELE9BQVF1NUQsVUFBWUQsUUFBUSxHQUFLLElBRW5DdG1FLFFBQVMsQ0FDUDlULE1BQU9xNkUsVUFBWSxHQUFLLEVBQ3hCdjVELE9BQVF1NUQsVUFBWUQsUUFBUSxHQUFLLE9BTXpDbHJFLEtBQUt2SixPQUFPOEssV0FBVzdPLFFBQVV5NEUsVUFDakNuckUsS0FBS3ZKLE9BQU84SyxXQUFXaFAsS0FBTzA0RSxVQUFZRSxVQUMxQ25yRSxLQUFLdkosT0FBTzhLLFdBQVdqUCxPQUFTME4sS0FBS3ZKLE9BQU84SyxXQUFXaFAsS0FDdkR5TixLQUFLdkosT0FBTzhLLFdBQVd4TyxLQUFPQSxLQUM5QmlOLEtBQUt2SixPQUFPOEssV0FBV3ZPLEtBQU9BLFVBQ0ssSUFBeEIwSCxLQUFLdUssT0FBT21tRSxVQUNyQjF3RSxLQUFLdUssT0FBT21tRSxRQUFVLElBRXhCMXdFLEtBQUt1SyxPQUFPbW1FLFFBQVF0NUUsS0FBS2tPLEtBQzNCLE1BQVk0cUUsUUFBVWg4QixLQUFLcnVDLE1BQU0sWUFDL0JxdUMsS0FBT0EsS0FBS3hrQyxRQUFRd2dFLFFBQVEsR0FBSSxPQUN0QkEsUUFBVWg4QixLQUFLcnVDLE1BQU0sZUFDL0JxdUMsS0FBTyxVQUVGbThCLFNBQVcsSUFBUXpyRCxRQUFZdHBCLE9BQVc0NEMsT0FDbEMsSUFBYm04QixXQUNGdG5FLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS0MsU0FBUyxtQ0FFckJ5TixRQUFRazJDLE1BQU0sc0JBQXVCak4sTUFFekMsQ0FPQSxhQUFBeThCLENBQWV6OEIsS0FBTXI0QyxJQUFNLFVBQ3pCLEdBQTJCLElBQXZCcTRDLEtBQUt6WixPQUFPNzVCLE9BQ2QsT0FFRixNQUFNZ3dFLE9BQVMxOEIsS0FBS3puQyxNQUFNLFdBSTFCLElBQUl4RSxNQUhBMm9FLE9BQU9od0UsT0FBUyxJQUNsQnN6QyxLQUFPMDhCLE9BQU8sSUFHaEIsSUFBSVAsU0FBVyxHQUNmLEdBQ0VBLFdBQ0FuOEIsS0FBT0EsS0FBS3paLE9BQ1p4eUIsTUFBUWpJLEtBQUtnVyxNQUFNLFFBQVMsQ0FBRWc2RCxVQUFVLEVBQU85N0IsT0FDM0Nqc0MsUUFDRmlzQyxLQUFPQSxLQUFLeGtDLFFBQVF6SCxNQUFNLFdBQVksV0FDTixJQUFyQmpJLEtBQUt1SyxPQUFPMU8sT0FDckJtRSxLQUFLdUssT0FBTzFPLEtBQU8sSUFFckJtRSxLQUFLdUssT0FBTzFPLEtBQUt6RSxLQUFLLENBQ3BCZCxLQUFNMEosS0FBS3d2RSxZQUFZdm5FLE1BQU0zUixNQUM3QkYsTUFBTzhGLE9BQU8rTCxNQUFNcW9FLHFCQUdqQkQsU0FBVyxHQUFLcG9FLE9BQ1IsSUFBYm9vRSxXQUNGdG5FLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS0MsU0FBUyxtQ0FFckJ5TixRQUFRazJDLE1BQU0scUJBQXNCak4sTUFFeEMsQ0FPQSxhQUFBMjhCLENBQWUzOEIsTUFDYixHQUEyQixJQUF2QkEsS0FBS3paLE9BQU83NUIsT0FDZCxPQUVGLE1BQU1nd0UsT0FBUzE4QixLQUFLem5DLE1BQU0sV0FDdEJta0UsT0FBT2h3RSxPQUFTLElBQ2xCc3pDLEtBQU8wOEIsT0FBTyxJQUVoQixNQUFNRSxVQUFZNThCLEtBQUt4a0MsUUFBUSxhQUFjLEtBQUtqRCxNQUFNLGlCQUN4RHpNLEtBQUtrMEMsS0FBT2wwQyxLQUFLazBDLEtBQUt4a0MsUUFBUXdrQyxLQUFLelosT0FBUSxNQUMzQyxJQUFLLE1BQU1zMkMsU0FBU0QsZUFDZ0IsSUFBdkI5d0UsS0FBS3VLLE9BQU9xaEUsU0FDckI1ckUsS0FBS3VLLE9BQU9xaEUsT0FBUyxJQUV2QjVyRSxLQUFLdUssT0FBT3FoRSxPQUFPeDBFLEtBQUs0SSxLQUFLd3ZFLFlBQVl1QixPQUU3QyxDQU9BLG9CQUFNQyxDQUFnQjk4QixNQUVwQmwwQyxLQUFLazBDLEtBQU85M0MsT0FBTzgzQyxNQUNoQnpaLE9BQ0EvcUIsUUFBUSx3QkFBeUIsS0FDakNBLFFBQVEsVUFBVyxLQUNuQkEsUUFBUSxrQ0FBbUMsSUFFOUMsSUEyREl1aEUsT0EzREEvdEUsSUFBTWxELEtBQUtrMEMsS0FBS3R6QyxPQUVoQm9WLE1BQVFoVyxLQUFLZ1csTUFBTSxNQUFPLENBQUUzWCxLQUFNNndFLGtCQUFrQkUsV0FDdEQsVUF5REYsR0F2REt0ekUsTUFBTWthLFNBQ1Q5UyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLOFMsUUFHdEJBLE1BQVFoVyxLQUFLZ1csTUFBTSxNQUFPLENBQUUzWCxLQUFNNndFLGtCQUFrQkUsV0FBWSxVQUMzRHR6RSxNQUFNa2EsU0FDVDlTLElBQU1kLEtBQUtjLElBQUlBLElBQUs4UyxRQUd0QkEsTUFBUWhXLEtBQUtnVyxNQUFNLE1BQU8sQ0FBRTNYLEtBQU02d0Usa0JBQWtCRSxXQUFZLFVBQzNEdHpFLE1BQU1rYSxTQUNUOVMsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSzhTLFFBR3RCQSxNQUFRaFcsS0FBS2dXLE1BQU0sTUFBTyxDQUFFM1gsS0FBTTZ3RSxrQkFBa0JFLFdBQVksVUFDM0R0ekUsTUFBTWthLFNBQ1Q5UyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLOFMsUUFHdEJBLE1BQVFoVyxLQUFLZ1csTUFBTSxNQUFPLENBQUUzWCxLQUFNNndFLGtCQUFrQkUsV0FBWSxVQUMzRHR6RSxNQUFNa2EsU0FDVDlTLElBQU1kLEtBQUtjLElBQUlBLElBQUs4UyxRQUd0QkEsTUFBUWhXLEtBQUtnVyxNQUFNLE1BQU8sQ0FBRTNYLEtBQU02d0Usa0JBQWtCRSxXQUFZLFVBQzNEdHpFLE1BQU1rYSxTQUNUOVMsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSzhTLFFBR3RCQSxNQUFRaFcsS0FBS2dXLE1BQU0sTUFBTyxDQUFFM1gsS0FBTTZ3RSxrQkFBa0JFLFdBQVksVUFDM0R0ekUsTUFBTWthLFNBQ1Q5UyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLOFMsUUFHdEJBLE1BQVFoVyxLQUFLZ1csTUFBTSxNQUFPLENBQUUzWCxLQUFNNndFLGtCQUFrQkUsV0FBWSxVQUMzRHR6RSxNQUFNa2EsU0FDVDlTLElBQU1kLEtBQUtjLElBQUlBLElBQUs4UyxRQUd0QkEsTUFBUWhXLEtBQUtnVyxNQUFNLE1BQU8sQ0FBRTNYLEtBQU02d0Usa0JBQWtCRSxXQUFZLFVBQzNEdHpFLE1BQU1rYSxTQUNUOVMsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSzhTLFFBR3RCQSxNQUFRaFcsS0FBS2dXLE1BQU0sS0FBTSxDQUFFM1gsS0FBTTZ3RSxrQkFBa0JFLFdBQVksVUFDMUR0ekUsTUFBTWthLFNBQ1Q5UyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLOFMsUUFHdEJBLE1BQVFoVyxLQUFLZ1csTUFBTSxLQUFNLENBQUUzWCxLQUFNNndFLGtCQUFrQkUsV0FBWSxVQUMxRHR6RSxNQUFNa2EsU0FDVDlTLElBQU1kLEtBQUtjLElBQUlBLElBQUs4UyxRQUlsQjlTLElBQU0sR0FrQlIsR0FqQkErdEUsT0FBU2p4RSxLQUFLazBDLEtBQUtoMUIsT0FBTyxFQUFHaGMsS0FFN0I4UyxNQUFRaFcsS0FBS2dXLE1BQU0sT0FBUSxDQUFFaytCLEtBQU0rOEIsVUFDckIsSUFBVmo3RCxNQUVGaFcsS0FBS3VLLE9BQU9qVSxLQUFPZ0gsS0FBS0MsS0FBS0MsU0FBUyxpQ0FHdEN5ekUsT0FBU0EsT0FBT3ZoRSxRQUFRc0csTUFBTSxXQUFZLE1BRzVDQSxNQUFRaFcsS0FBS2dXLE1BQU0sTUFBTyxDQUFFaytCLEtBQU0rOEIsVUFDcEIsSUFBVmo3RCxRQUVGaTdELE9BQVNBLE9BQU92aEUsUUFBUXNHLE1BQU0sV0FBWSxRQUd2Q2hXLEtBQUtnVyxNQUFNLGFBQWMsQ0FBRWsrQixLQUFNKzhCLFVBQStCLEtBQWxCQSxPQUFPeDJDLE9BQWUsQ0FFdkUsSUFBSWlhLFdBQWF1OEIsT0FDYkEsT0FBTzVvRSxRQUFRLE1BQVEsSUFFekJxc0MsV0FBYXU4QixPQUFPL3hELE9BQU8sRUFBRyt4RCxPQUFPNW9FLFFBQVEsS0FBTyxJQUV0RHJJLEtBQUt1SyxPQUFPbXFDLFdBQWFBLFdBQ3RCaGxDLFFBQVEsYUFBYyxLQUN0QitxQixPQUNBL3FCLFFBQVEsS0FBTSxJQUNqQjFQLEtBQUtrMEMsS0FBT2wwQyxLQUFLazBDLEtBQUt4a0MsUUFBUWdsQyxXQUFXamEsT0FBUSxLQUNuRCxPQUdBejZCLEtBQUt1SyxPQUFPalUsS0FBT2dILEtBQUtDLEtBQUtDLFNBQVMsaUNBR3hDLFFBQ29DLElBQTNCd0MsS0FBS3VLLE9BQU9tcUMsaUJBQ1EsSUFBcEIxMEMsS0FBS3VLLE9BQU9nekMsSUFDbkIsQ0FDQSxNQUFNMnpCLGNBQWdCbHhFLEtBQUt1SyxPQUFPbXFDLFdBQVc3dUMsTUFDM0MsbUNBRUVxckUsZ0JBQ0ZseEUsS0FBS3VLLE9BQU9nekMsSUFBTTJ6QixjQUFjNXNFLE9BQU9pNUMsSUFDdkN2OUMsS0FBS3VLLE9BQU9tcUMsV0FBYXc4QixjQUFjNXNFLE9BQU9vd0MsV0FBV2phLE9BRTdELENBR0d6NkIsS0FBS2dXLE1BQU0sUUFDWmhXLEtBQUtnVyxNQUFNLFNBQVUsQ0FDbkIrNUQsZ0JBQWdCLEVBQ2hCQyxVQUFVLEVBQ1Y5N0IsS0FBTWwwQyxLQUFLdUssT0FBT3BPLE9BR3BCNkQsS0FBS3VLLE9BQU9wTyxHQUFLLEtBRW5CNkQsS0FBS3VLLE9BQU9wTyxHQUFLNkQsS0FBS3l2RSxjQUFjenZFLEtBQUt1SyxPQUFPcE8sSUFFaEQ2RCxLQUFLZ1csTUFBTSxTQUdSaFcsS0FBS2dXLE1BQU0sV0FDWmhXLEtBQUtnVyxNQUFNLFlBQWEsQ0FDdEIrNUQsZ0JBQWdCLEVBQ2hCQyxVQUFVLEVBQ1Y5N0IsS0FBTWwwQyxLQUFLdUssT0FBT3RPLFVBR3BCK0QsS0FBS3VLLE9BQU90TyxNQUFRLEtBR3RCK0QsS0FBS2dXLE1BQU0sTUFBTyxDQUFFM1gsS0FBTTZ3RSxrQkFBa0JFLFdBRTVDcHZFLEtBQUtnVyxNQUFNLE1BQU8sQ0FBRTNYLEtBQU02d0Usa0JBQWtCRSxXQUU1Q3B2RSxLQUFLZ1csTUFBTSxXQUNYaFcsS0FBS3VLLE9BQU82ZSxRQUFVcHBCLEtBQUt5dkUsY0FBY3p2RSxLQUFLdUssT0FBTzZlLFNBR25EcHBCLEtBQUtnVyxNQUFNLG9CQUNYaFcsS0FBS2dXLE1BQU0sc0JBQXVCLENBQ2hDKzVELGdCQUFnQixFQUNoQkMsVUFBVSxFQUNWOTdCLEtBQU1sMEMsS0FBS3VLLE9BQU93aUUsb0JBR3BCL3NFLEtBQUt1SyxPQUFPd2lFLGdCQUFrQixLQUdoQy9zRSxLQUFLazBDLEtBQU8sS0FBT2wwQyxLQUFLazBDLEtBQ3hCLElBQUl5NkIsU0FBVzN1RSxLQUFLc3ZFLFNBQVMsSUFBTXR2RSxLQUFLK0QsS0FBSzBwRSxlQUFpQixJQUFLLEtBQ2pDLE9BQTlCenRFLEtBQUtrMEMsS0FBS3J1QyxNQUFNOG9FLFlBRWxCQSxTQUFXM3VFLEtBQUtnVyxNQUFNLG1CQUFvQixDQUN4Q2c2RCxVQUFVLEVBQ1ZELGdCQUFnQixJQUVkcEIsV0FFRjN1RSxLQUFLazBDLEtBQU8sQ0FDVmwwQyxLQUFLazBDLEtBQUt6MUMsTUFBTSxFQUFHa3dFLFNBQVMsV0FDNUIzdUUsS0FBSytELEtBQUsycEUsZ0JBQ1YxdEUsS0FBS2swQyxLQUFLejFDLE1BQU1rd0UsU0FBUyxZQUN6QnRxRSxLQUFLLE1BSVgsTUFBTThzRSxlQUFpQm54RSxLQUFLc3ZFLFNBQVN0dkUsS0FBSzB2RSxNQUFNZixTQUFVLEtBRTFELEdBREFBLFNBQVczdUUsS0FBS2swQyxLQUFLem5DLE1BQU0wa0UsZ0JBQ1YsT0FBYnhDLFNBQ0YsSUFBSyxJQUFJcnVELEVBQUksRUFBR3dzRCxHQUFLNkIsU0FBUy90RSxPQUFRMGYsRUFBSXdzRCxHQUFJeHNELElBSXBDLE9BRk5xdUQsU0FBU3J1RCxHQUFHemEsTUFDVjdGLEtBQUtzdkUsU0FBUyxJQUFNdHZFLEtBQUsrRCxLQUFLMHBFLGVBQWlCLElBQUssWUFFM0IsSUFBcEJrQixTQUFTcnVELEVBQUksSUFHcEJ0Z0IsS0FBS2swQyxNQUFRLEtBQU9sMEMsS0FBS2swQyxLQUFPLE1BQzdCeGtDLFFBQVFpL0QsU0FBU3J1RCxHQUFJLE1BQ3JCbWEsT0FDSHo2QixLQUFLaXdFLGNBQWN0QixTQUFTcnVELEVBQUksSUFDaENBLEtBSU0sT0FGTnF1RCxTQUFTcnVELEdBQUd6YSxNQUNWN0YsS0FBS3N2RSxTQUFTLElBQU10dkUsS0FBSytELEtBQUs0cEUsY0FBZ0IsSUFBSyxZQUUxQixJQUFwQmdCLFNBQVNydUQsRUFBSSxJQUdwQnRnQixLQUFLazBDLE1BQVEsS0FBT2wwQyxLQUFLazBDLEtBQU8sTUFDN0J4a0MsUUFBUWkvRCxTQUFTcnVELEdBQUksTUFDckJtYSxPQUNIejZCLEtBQUsyd0UsY0FBY2hDLFNBQVNydUQsRUFBSSxJQUNoQ0EsS0FJTSxPQUZOcXVELFNBQVNydUQsR0FBR3phLE1BQ1Y3RixLQUFLc3ZFLFNBQVMsSUFBTXR2RSxLQUFLK0QsS0FBSzZwRSxpQkFBbUIsSUFBSyxZQUU3QixJQUFwQmUsU0FBU3J1RCxFQUFJLElBR3BCdGdCLEtBQUtrMEMsTUFBUSxLQUFPbDBDLEtBQUtrMEMsS0FBTyxNQUM3QnhrQyxRQUFRaS9ELFNBQVNydUQsR0FBSSxNQUNyQm1hLE9BQ0h6NkIsS0FBSzJ3RSxjQUFjaEMsU0FBU3J1RCxFQUFJLEdBQUksYUFDcENBLEtBSU0sT0FGTnF1RCxTQUFTcnVELEdBQUd6YSxNQUNWN0YsS0FBS3N2RSxTQUFTLElBQU10dkUsS0FBSytELEtBQUs4cEUsY0FBZ0IsSUFBSyxZQUUxQixJQUFwQmMsU0FBU3J1RCxFQUFJLEtBR3BCdGdCLEtBQUtrMEMsTUFBUSxLQUFPbDBDLEtBQUtrMEMsS0FBTyxNQUM3QnhrQyxRQUFRaS9ELFNBQVNydUQsR0FBSSxNQUNyQm1hLE9BQ0h6NkIsS0FBSzZ3RSxjQUFjbEMsU0FBU3J1RCxFQUFJLElBQ2hDQSxLQU1OLE9BREF0Z0IsS0FBS3VLLE9BQU82bUUsUUFBVXB4RSxLQUFLMnZFLE9BQU8zdkUsS0FBS2swQyxNQUNoQ2wwQyxLQUFLdUssTUFDZCxDQUVBLGlCQUFBOG1FLENBQW1CeDFFLElBQUt5MUUsWUFBYXQ3RCxNQUFPZ2MsWUFDMUMsTUFBTTU3QixNQUFRZ00sS0FBS2EsSUFBSSxFQUFHL0csT0FBT28xRSxjQVVqQyxPQVRJbDdFLFFBQVU4RixPQUFPOFosU0FDbkJnYyxXQUFXLGtCQUFrQm4yQixhQUFjLEVBQzNDbTJCLFdBQVcsa0JBQWtCbjJCLGFBQWV6RixNQUNoQyxVQUFSeUYsSUFDRm0yQixXQUFXLGtCQUFrQm4yQixlQUFpQnpGLE1BRTlDNDdCLFdBQVcsa0JBQWtCbjJCLFdBQWF6RixPQUd2QzQ3QixVQUNULENBUUEsa0JBQU11L0MsQ0FBY0MsY0FBZWxqQixZQUNqQyxNQUFNZ0MsK0JBQ0Uxb0QsY0FBY3dvRCwwQ0FDSCxRQUFmOUIsYUFDRkEsV0FBYSxZQUVmLE1BQU0yWixVQUFZLENBQ2hCM3hFLEtBQU1rN0UsY0FBY2w3RSxLQUNwQitILEtBQU1pd0QsV0FDTkMsT0FBUStCLHlCQUF5QnJpRCxHQUNqQzNJLEtBQU1rc0UsY0FBY3QzRSxPQUVoQnUzRSxVQUFZcGdDLE1BQU01Z0MsT0FBT3czRCxpQkFDekJ3SixJQUFJcjBFLHdCQUF3QixPQUFRbzBFLGNBQWN0akUsTUFBTyxDQUM3RG9tQyxhQUFhLElBRWYsTUFBTXRpQixXQUFhLENBQUMsRUFDcEIsSUFBSTU3QixNQUFRLE9BQ3lDLElBQTFDbzdFLGNBQWN0M0UsTUFBTThCLFFBQVFpMkMsSUFBSTc3QyxPQUN6QzRKLEtBQUtxeEUsa0JBQ0gsS0FDQUcsY0FBY3QzRSxNQUFNOEIsUUFBUWkyQyxHQUFHNzdDLE1BQy9CcTdFLElBQUk5K0IsTUFDSjNnQixpQkFHaUQsSUFBMUN3L0MsY0FBY3QzRSxNQUFNOEIsUUFBUXEyQyxJQUFJajhDLE9BQ3pDNEosS0FBS3F4RSxrQkFDSCxLQUNBRyxjQUFjdDNFLE1BQU04QixRQUFRcTJDLEdBQUdqOEMsTUFDL0JxN0UsSUFBSTcrQixNQUNKNWdCLGlCQUdrRCxJQUEzQ3cvQyxjQUFjdDNFLE1BQU04QixRQUFRd3ZDLEtBQUtwMUMsT0FDMUM0SixLQUFLcXhFLGtCQUNILE1BQ0FHLGNBQWN0M0UsTUFBTThCLFFBQVF3dkMsSUFBSXAxQyxNQUNoQ3E3RSxJQUFJam1DLElBQ0p4WixpQkFHb0QsSUFBN0N3L0MsY0FBY3QzRSxNQUFNOEIsUUFBUW92QyxPQUFPaDFDLE9BQzVDNEosS0FBS3F4RSxrQkFDSCxRQUNBRyxjQUFjdDNFLE1BQU04QixRQUFRb3ZDLE1BQU1oMUMsTUFDbENxN0UsSUFBSXJtQyxNQUNKcFosaUJBR2lELElBQTFDdy9DLGNBQWN0M0UsTUFBTThCLFFBQVFHLElBQUkvRixRQUN6Q0EsTUFBUWdHLE9BQU9vMUUsY0FBY3QzRSxNQUFNOEIsUUFBUUcsR0FBRy9GLE9BQU9zWixRQUFRLFNBQVUsSUFDbkV0WixRQUFVZ0csT0FBT3ExRSxJQUFJdDFFLE1BQ3ZCNjFCLFdBQVcsMkJBQTRCLEVBQ3ZDQSxXQUFXLDJCQUE2QjU3QixRQUd4Q3dKLE9BQU9tRSxLQUFLaXVCLFlBQVlweEIsT0FBUyxJQUMvQmdDLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxjQUFlbnZCLGtCQUV6QnkvQyxJQUFJdnpFLE9BQU84ekIsYUFFbkIsTUFBTTAvQyxlQUFpQixHQUN2QixJQUFJQyxnQkFBa0IsS0FDdEIsSUFBSyxNQUFNQyxRQUFRNXhFLEtBQUs2eEUsYUFBYyxFQUNwQixJQUFaRCxLQUFLLEtBQ1BELGdCQUFrQkYsSUFBSXZqRSxNQUFNM1gsUUFDMUIrcEIsR0FBS0EsRUFBRWhxQixPQUFTczdFLEtBQUssR0FBR3Q3RSxNQUNYLFVBQVhncUIsRUFBRWppQixNQUNGbkMsT0FBT29rQixFQUFFdmtCLE9BQU8zRixTQUFXOEYsT0FBTzAxRSxLQUFLLEdBQUc3MUUsT0FBTzNGLFVBR3ZELE1BQU13dUIsT0FBUzZzRCxJQUFJdmpFLE1BQU0zWCxRQUN2QitwQixHQUFLQSxFQUFFaHFCLE9BQVNzN0UsS0FBSyxHQUFHdDdFLE1BQ1gsV0FBWGdxQixFQUFFamlCLE1BQ0ZpaUIsRUFBRXZrQixPQUFPK04sTUFBTUwsT0FBT3lOLFNBQVcwNkQsS0FBSyxHQUFHNzFFLE9BQU8rTixNQUFNTCxPQUFPeU4sU0FFN0R5NkQsZ0JBQWdCLElBQU0vc0QsT0FBTyxJQUMvQjhzRCxlQUFldDZFLEtBQUssQ0FDbEIrNUMsSUFBS3ZzQixPQUFPLEdBQUczVyxHQUNmLHVCQUF3QjBqRSxnQkFBZ0IsR0FBRzFqRSxHQUMzQyx5QkFBMEIwakUsZ0JBQWdCLEdBQUdyN0UsTUFHbkQsQ0FPQSxPQU5JbzdFLGVBQWU5d0UsT0FBUyxJQUN0QmdDLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxrQkFBbUJ1d0Isc0JBRTdCRCxJQUFJcDZCLHdCQUF3QixPQUFRcTZCLGlCQUVyQ0QsR0FDVCxDQU9BLFNBQUF4SixDQUFXNkosSUFDVCxNQUFNeHNFLEtBQU8sQ0FDWG9lLGdCQUFpQixDQUFDLEVBQ2xCMW5CLFFBQVMsQ0FBQyxFQUNWaWlDLE1BQU8sQ0FBQyxFQUNSL21DLFFBQVMsQ0FBQyxFQUNWbVcsWUFBYSxDQUNYdXlELE9BQVEsSUFFVjFnRSxNQUFPLENBQ0xpSyxRQUFRLEVBQ1JpMkQsZ0JBQWdCLElBR3BCLElBQUssTUFBTXZqRSxNQUFPLENBQ2hCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsWUFFdUIsSUFBWmkyRSxHQUFHajJFLE9BQ1p5SixLQUFLb2UsZ0JBQWdCN25CLEtBQU8sQ0FDMUJ6RixNQUFPOEYsT0FBTzQxRSxHQUFHajJFLFFBSXZCLElBQUssTUFBTUEsTUFBTyxDQUFDLE1BQU8sTUFBTyxRQUFTLFFBQVMsTUFBTyxLQUFNLFdBQ3ZDLElBQVppMkUsR0FBR2oyRSxPQUNaeUosS0FBS3RKLFFBQVFILEtBQU8sQ0FDbEJ6RixNQUFPOEYsT0FBTzQxRSxHQUFHajJFLGFBSUYsSUFBVmkyRSxHQUFHMzFFLEtBQ1ptSixLQUFLdEosUUFBUUcsR0FBSyxDQUNoQi9GLE1BQU8wN0UsR0FBRzMxRSxLQUdkLElBQUssTUFBTU4sTUFBTyxDQUFDLE1BQU8sbUJBQ0QsSUFBWmkyRSxHQUFHajJFLE9BQ1p5SixLQUFLMjRCLE1BQU1waUMsS0FBT2kyRSxHQUFHajJFLE1BR3pCLFFBQTBCLElBQWZpMkUsR0FBRzFvRCxRQUF5QixDQUNyQyxNQUFPL0osT0FBUWdCLFFBQVV5eEQsR0FBRzFvRCxRQUFRM2MsTUFBTSxLQUMxQ25ILEtBQUtwTyxRQUFRa3lCLFFBQVUsQ0FDckIyVSxZQUFhMWUsT0FDYjJlLGFBQWMzZCxPQUVsQixDQVFBLFlBUGtDLElBQXZCeXhELEdBQUcvRSxrQkFDWnpuRSxLQUFLcE8sUUFBUTYxRSxnQkFBa0I3d0UsT0FBTzQxRSxHQUFHL0Usa0JBRTNDem5FLEtBQUsrSCxZQUFZdXlELE9BQVNrUyxHQUFHVixRQUN6Qnh1RSxPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sYUFBYzc3QyxNQUV2QkEsSUFDVCxDQU9BLGVBQU15c0UsQ0FBV0QsSUFDZixNQUFNNWpFLE1BQVEsR0FHZCxHQUZBbE8sS0FBSzZ4RSxhQUFlLFFBRU0sSUFBZkMsR0FBR3BCLFFBQ1osSUFBSyxNQUFNOTdCLFVBQVVrOUIsR0FBR3BCLFFBQVMsQ0FDL0IsSUFBSXpvRSxPQUFRLEdBQ3FCLElBQTdCMnNDLE9BQU83NEMsUUFBUWtNLE9BQU9nRyxLQUN4QmhHLFlBQWNqSSxLQUFLZ3lFLFlBQVlwOUIsUUFDL0IxbUMsTUFBTTlXLEtBQUs2USxRQUViMnNDLE9BQU83NEMsT0FBT2tNLE1BQU1nRyxHQUFLLEtBQ3pCQyxNQUFNOVcsS0FBS3c5QyxRQUNYNTBDLEtBQUs2eEUsYUFBYXo2RSxLQUFLLENBQUM2USxNQUFPMnNDLFFBQ2pDLENBR0YsUUFBeUIsSUFBZGs5QixHQUFHbnVELE9BQ1osSUFBSyxNQUFNMWIsU0FBUzZwRSxHQUFHbnVELE9BQVEsQ0FDN0IsTUFBTTJ6QixlQUFpQjF2QyxjQUFjNm9ELFVBQVUsUUFBU3hvRCxNQUFNM1IsS0FBTSxDQUNsRWdzRCxPQUFRdGlELEtBQUttdkUsZ0JBRWYsUUFBd0IsSUFBYjczQixTQUEwQixDQUNuQyxNQUFNMjZCLE9BQVMzNkIsU0FBU3RELFdBQ3hCaStCLE9BQU9sMkUsT0FBT3VPLEtBQU9yQyxNQUFNN1IsV0FDRCxJQUFmNlIsTUFBTTdRLE9BQ2Y2NkUsT0FBT2wyRSxPQUFPOEssV0FBV3pQLEtBQU82USxNQUFNN1EsTUFFeEM4VyxNQUFNOVcsS0FBS3dILFFBQVFDLE1BQU11TyxVQUFVNmtFLFFBQ3JDLEtBQU8sQ0FDTCxNQUFNM3lFLFFBQVUsQ0FBQyxPQUNTLElBQWYySSxNQUFNN1EsT0FDZmtJLFFBQVFsSSxLQUFPNlEsTUFBTTdRLE1BRXZCOFcsTUFBTTlXLEtBQUt1NEIsU0FBU3drQixXQUFXbHNDLE1BQU0zUixLQUFNMlIsTUFBTTdSLE1BQU9rSixTQUMxRCxDQUNGLENBR0YsUUFBNEIsSUFBakJ3eUUsR0FBR0ksVUFDWixJQUFLLE1BQU1qcUUsU0FBUzZwRSxHQUFHSSxVQUFXLENBQ2hDLE1BQU01NkIsZUFBaUIxdkMsY0FBYzZvRCxVQUFVLFFBQVN4b0QsTUFBTTNSLEtBQU0sQ0FDbEVnc0QsT0FBUXRpRCxLQUFLbXZFLGdCQUVmLFFBQXdCLElBQWI3M0IsU0FBMEIsQ0FDbkMsTUFBTTI2QixPQUFTMzZCLFNBQVN0RCxXQUN4QmkrQixPQUFPbDJFLE9BQU91TyxLQUFPckMsTUFBTTdSLE1BQzNCOFgsTUFBTTlXLEtBQUt3SCxRQUFRQyxNQUFNdU8sVUFBVTZrRSxRQUNyQyxNQUNFL2pFLE1BQU05VyxLQUNKdTRCLFNBQVN3a0IsV0FBV2xzQyxNQUFNM1IsS0FBTTJSLE1BQU03UixNQUFPLENBQzNDc1AsSUFBS1AsU0FBU2dCLGFBQ2RjLGVBQWdCLGFBSXhCLENBR0YsUUFBeUIsSUFBZDZxRSxHQUFHbEcsT0FDWixJQUFLLE1BQU10MUUsUUFBUXc3RSxHQUFHbEcsT0FBUSxDQUM1QixNQUFNdDBCLGVBQWlCMXZDLGNBQWM2b0QsVUFBVSxRQUFTbjZELEtBQU0sQ0FDNURnc0QsT0FBUXRpRCxLQUFLbXZFLGdCQUVmLFFBQXdCLElBQWI3M0IsU0FBMEIsQ0FDbkMsTUFBTTI2QixPQUFTMzZCLFNBQVN0RCxXQUN4QjlsQyxNQUFNOVcsS0FBS3dILFFBQVFDLE1BQU11TyxVQUFVNmtFLFFBQ3JDLE1BQ0UvakUsTUFBTTlXLEtBQUt1NEIsU0FBUzRsQixXQUFXai9DLE1BRW5DLENBRUYsT0FBTzRYLEtBQ1QsQ0FLQSxpQkFBTThqRSxDQUFhcHRELFFBQ2pCLElBQUkzYyxNQUFRLEtBc0RaLEdBckRJakksS0FBS3N2RSxTQUFTLFdBQVczdkIsS0FBSy82QixPQUFPdHVCLE9BQ3ZDMlIsWUFBY0wsY0FBYzZvRCxVQUFVLFFBQVMsVUFBVyxDQUN4RHA1RCxRQUFRLEVBQ1JpckQsT0FBUXRpRCxLQUFLbXZFLGdCQUVYdnNFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxHQUFHdjhCLE9BQU90dUIsNEJBQTRCMlIsVUFFN0NqSSxLQUFLc3ZFLFNBQVMsU0FBUzN2QixLQUFLLzZCLE9BQU90dUIsT0FDNUMyUixZQUFjTCxjQUFjNm9ELFVBQVUsUUFBUyxnQkFBaUIsQ0FDOURwNUQsUUFBUSxFQUNSaXJELE9BQVF0aUQsS0FBS212RSxnQkFFVmxuRSxRQUNIQSxZQUFjTCxjQUFjNm9ELFVBQVUsUUFBUyxRQUFTLENBQ3REcDVELFFBQVEsRUFDUmlyRCxPQUFRdGlELEtBQUttdkUsZ0JBRVZsbkUsUUFDSEEsWUFBY0wsY0FBYzZvRCxVQUFVLFFBQVMsVUFBVyxDQUN4RHA1RCxRQUFRLEVBQ1JpckQsT0FBUXRpRCxLQUFLbXZFLGtCQUlmdnNFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxHQUFHdjhCLE9BQU90dUIsMEJBQTBCMlIsVUFFM0NqSSxLQUFLc3ZFLFNBQVMsT0FBTzN2QixLQUFLLzZCLE9BQU90dUIsT0FDMUMyUixZQUFjTCxjQUFjNm9ELFVBQVUsUUFBUyxpQkFBa0IsQ0FDL0RwNUQsUUFBUSxFQUNSaXJELE9BQVF0aUQsS0FBS212RSxnQkFFWHZzRSxPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sR0FBR3Y4QixPQUFPdHVCLG1DQUFtQzJSLFVBRXBEakksS0FBS3N2RSxTQUFTLGNBQWMzdkIsS0FBSy82QixPQUFPdHVCLE9BQ2pEMlIsWUFBY0wsY0FBYzZvRCxVQUFVLFFBQVMsY0FBZSxDQUM1RHA1RCxRQUFRLEVBQ1JpckQsT0FBUXRpRCxLQUFLbXZFLGdCQUVYdnNFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxHQUFHdjhCLE9BQU90dUIsZ0NBQWdDMlIsVUFFakRqSSxLQUFLc3ZFLFNBQVMsWUFBWTN2QixLQUFLLzZCLE9BQU90dUIsUUFDL0MyUixZQUFjTCxjQUFjNm9ELFVBQVUsUUFBUyxTQUFVLENBQ3ZEcDVELFFBQVEsRUFDUmlyRCxPQUFRdGlELEtBQUttdkUsZ0JBRVh2c0UsT0FBT3UrQyxNQUFNZ3ZCLGNBQ2ZsbEUsUUFBUWsyQyxNQUFNLEdBQUd2OEIsT0FBT3R1QiwyQkFBMkIyUixVQUduREEsWUFBZ0QsQ0FNbEQsT0FMbUJBLE1BQU1rcUUsTUFBTSxDQUM3QnAyRSxPQUFRLENBQ04zRixNQUFPd3VCLE9BQU83b0IsUUFBUWtNLE9BQU9nRyxLQUluQyxDQUNBLE1BQU16SCxTQUFXb2UsT0FBTzdvQixRQUFROEssWUFBWWhQLEtBQ3RDa1AsTUFBUTVCLFNBQVM2QixpQkFDckI0ZCxPQUFPdHVCLEtBQ1BnSCxLQUFLQyxLQUFLQyxTQUNSZ0osU0FDSSxpQ0FDQSxvQ0FHRjRyRSxTQUFXLENBQ2YvekUsS0FBTSxRQUNOL0gsS0FBTXlRLE1BQU16USxLQUNaeUYsT0FBUSxDQUNOK0ssVUFBV0MsTUFBTUQsVUFDakJHLGVBQWdCRixNQUFNRSxlQUN0QkosV0FBWSxDQUNWM1AsU0FBUyxFQUNUSSxVQUFXa1AsU0FDWGpQLFFBQVNpUCxTQUNUblAsUUFBUSxHQUVWaVQsS0FBTXNhLE9BQU83b0IsUUFBUWtNLE9BQU9nRyxHQUM1QjdYLE1BQU93dUIsT0FBTzdvQixRQUFRa00sT0FBT2dHLEtBU2pDLE9BTklyTCxPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQ04sOEJBQThCdjhCLE9BQU90dUIsMkJBQ3JDODdFLFVBR0dBLFFBQ1QsQ0FNQSxlQUFBQyxDQUFpQlosS0FDZixJQUFJYSx1QkFBd0IsRUFDNUIsSUFBSyxNQUFNejJFLE1BQU8sQ0FDaEIsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxZQUV3QixJQUFiNDFFLElBQUk1MUUsTUFBd0I0MUUsSUFBSTUxRSxLQUFPLEtBQ2hEeTJFLHVCQUF3QixHQU01QixPQUhJMXZFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxtQkFBb0JteEIsdUJBRTdCQSxxQkFDVCxDQVFBLGlCQUFNQyxDQUFhQyxRQUNiNXZFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxlQUFnQnF4QixRQUVoQyxNQUFNaGhCLEtBQU9vZCx3QkFBd0JDLGNBQWMyRCxPQUFPaGhCLE1BQzFEeHhELEtBQUsrRCxLQUFPNnFFLHdCQUF3QkksUUFBUXhkLE1BQzVDeHhELEtBQUswdkUsTUFBUWQsd0JBQXdCSyxzQkFBc0J6ZCxNQUMzRHh4RCxLQUFLbXZFLGNBQWdCcUQsT0FBT2x3QixPQUN4QjEvQyxPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sdUJBQXdCcVEsS0FBTXh4RCxLQUFLK0QsS0FBTS9ELEtBQUswdkUsT0FFOUQsSUFBSTV6RCxnQkFBa0I5YixLQUFLZ3hFLGVBQWV3QixPQUFPdCtCLE1BQzdDdHhDLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxrQkFBbUJybEMsWUFHUCxjQUF6QjAyRCxPQUFPQyxlQUNOenlFLEtBQUtxeUUsZ0JBQWdCdjJELFlBQ0UsZ0JBQXpCMDJELE9BQU9DLGlCQUVQMzJELGdCQUFrQjliLEtBQUsweUUsVUFBVTUyRCxZQUVuQyxNQUFNMDFELGNBQWdCLENBQ3BCbDdFLEtBQU13bEIsVUFBVXhsQixLQUNoQjRELE1BQU84RixLQUFLaW9FLFVBQVVuc0QsV0FDdEI1TixZQUFhbE8sS0FBSyt4RSxVQUFVajJELFlBRzlCLFFBQStCLElBQXBCMDJELE9BQU9HLFdBQWdELElBQXBCSCxPQUFPRyxTQUNuRCxPQUFPbkIsY0FHVCxhQURrQnh4RSxLQUFLdXhFLGFBQWFDLGNBQWVnQixPQUFPMXpCLE9BRTVELENBT0EsZUFBTTR6QixDQUFXRSxVQUNYaHdFLE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFrMkMsTUFBTSxpQkFBa0J5eEIsVUFFbEMsSUFBSyxNQUFNLzJFLE1BQU8sQ0FBQyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxZQUM5QixJQUFsQisyRSxTQUFTLzJFLE9BQ2xCKzJFLFNBQVMvMkUsTUFBUSxHQXVCckIsWUFwQjRCLElBQWpCKzJFLFNBQVM3N0UsTUFDZDY3RSxTQUFTNzdFLEtBQU8sR0FDbEI2N0UsU0FBUzc3RSxLQUFPLEVBQ1A2N0UsU0FBUzc3RSxLQUFPLEdBQ3pCNjdFLFNBQVM3N0UsSUFBTTY3RSxTQUFTNzdFLElBQU0sR0FBSyxHQUduQzY3RSxTQUFTNzdFLElBQU0sU0FHUSxJQUFoQjY3RSxTQUFTejJFLEtBQ0UsU0FBaEJ5MkUsU0FBU3oyRSxHQUNYeTJFLFNBQVN6MkUsSUFBTSxFQUNVLFNBQWhCeTJFLFNBQVN6MkUsS0FDbEJ5MkUsU0FBU3oyRSxJQUFNLElBR2Z5RyxPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sY0FBZXl4QixVQUV4QkEsUUFDVCxFQ3hqQ0ssTUFBTUMsNEJBQTRCQyxXQUN2QyxTQUFJcmtFLEdBQ0YsT0FBT25SLEtBQUtDLEtBQUtDLFNBQVMscUJBQzVCLENBRUEsU0FBQW0wQixDQUFXcDFCLE9BQ1RBLE1BQU1FLGlCQUNOLE1BQU04eUQsS0FBT2h6RCxNQUFNd29CLE9BQU9BLE9BQU8zdUIsTUFDM0IyOEUsYUFBZS95RSxLQUFLK3lFLGFBQ3BCQyxPQUFTejJFLE1BQU13b0IsT0FBT2l1RCxPQUFTejJFLE1BQU13b0IsT0FBT2l1RCxPQUFPNThFLE1BQVEsS0FDakU0SixLQUFLZ2lELE1BQU01ckQsTUFBUXk4RSxvQkFBb0I3K0QsT0FBTyxDQUM1QysrRCxhQUNBQyxPQUNBempCLE9BRUZ2dkQsS0FBS2liLE9BQ1AsQ0FFQSx1QkFBT2c0RCxDQUFrQjd4QyxLQUN2QixPQUFlLE9BQVJBLElBQWUsR0FBS2hsQyxPQUFPZ2xDLElBQ3BDLENBRUEsYUFBT3B0QixDQUFRNWQsT0FDYixPQUF3QixPQUFqQkEsTUFBTTQ4RSxPQUNULElBQUk1OEUsTUFBTTI4RSxnQkFBZ0IzOEUsTUFBTTQ4RSxXQUFXNThFLE1BQU1tNUQsT0FDakQsSUFBSW41RCxNQUFNMjhFLGlCQUFpQjM4RSxNQUFNbTVELE1BQ3ZDLENBRUEsWUFBT3JqQyxDQUFPZ25ELEtBQ1osTUFBTTE4RSxJQUFNMDhFLEtBQU8sR0FDYjlrRCxRQUFVNTNCLElBQUlxUCxNQUFNLGtDQUUxQixPQUFJdW9CLFFBQ0ssQ0FDTDJrRCxhQUFjM2tELFFBQVEsR0FDdEI0a0QsT0FBUTVrRCxRQUFRLElBQU0sR0FDdEI0akIsUUFBUzVqQixRQUFRLElBR2QsQ0FDTDJrRCxhQUFjLE9BQ2RDLE9BQVEsS0FDUmhoQyxRQUFTeDdDLElBRWIsQ0FFQSxrQkFBTzI4RSxDQUFhcDVELE1BQ2xCeVIsRUFBRXpSLE1BQ0NyYSxLQUFLLHdDQUNMNjBELE1BQUssQ0FBQ2owQyxFQUFHMjJCLE1BQ1IsTUFBTWxXLE1BQVF2VixFQUFFeXJCLElBRWhCLEdBREFsVyxNQUFNdHZCLEtBQUssWUFBWSxJQUNsQnN2QixNQUFNdzlCLE9BQU8zOUQsT0FBUSxDQUN4QixNQUFNd3lFLE9BQVMsSUFBSVAsb0JBQW9CLENBQ3JDN3dCLE1BQU9qaEIsTUFBTSxNQUNWOHhDLG9CQUFvQjNtRCxNQUFNNlUsTUFBTUssU0FFL0JpeUMsYUFBZTduRCxFQUNuQixvREFDRWx1QixLQUFLQyxLQUFLQyxTQUFTLHNCQUNuQix1REFFSnExRSxvQkFBb0JTLHlCQUNwQkQsYUFBYXI1RCxHQUFHLFNBQVMsS0FDdkJvNUQsT0FBT3AxRSxRQUFPLEVBQUksSUFFcEIraUMsTUFBTTcxQixTQUFTd2xDLE9BQU8yaUMsYUFDeEIsSUFFTixDQUVBLGlCQUFBdjVELENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BRXhCeVIsRUFBRXpSLE1BQU1yYSxLQUFLLGlCQUFpQm9qQixTQUM5QjBJLEVBQUV6UixNQUFNcmEsS0FBSyxjQUFjb2pCLFNBQzNCMEksRUFBRXpSLE1BQU1yYSxLQUFLLGlCQUFpQncwQyxLQUFLNTJDLEtBQUtDLEtBQUtDLFNBQVMsc0JBQ3hELENBRUEsbUNBQWE4MUUsR0FDWCxNQUFNL29FLE9BQVNzb0Usb0JBQW9CM21ELE1BQ2pDNXVCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHlCQUU1QixJQU1FLGFBTE0yMUUsb0JBQW9CVSxnQkFDeEJocEUsT0FBT3dvRSxhQUNQeG9FLE9BQU95bkMsUUFDUCxDQUFFZ2hDLE9BQVF6b0UsT0FBT3lvRSxVQUVaLENBQ1QsQ0FBRSxNQUFPeHlFLEdBQ1AsSUFBS0EsRUFBRXFQLFFBQVFyRixXQUFXLFVBSXhCLE9BSEF6QixHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLQyxTQUFTLG1DQUVkLENBRVgsQ0FDRixDQUVBLHFDQUFhZzJFLENBQTBCQyxLQUFNQyxVQUMzQyxNQUFNbnBFLE9BQVNzb0Usb0JBQW9CM21ELE1BQ2pDNXVCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHlCQVU1QixhQVJ1QjQxRSxXQUFXYSxPQUNoQ3BwRSxPQUFPd29FLGFBQ1B4b0UsT0FBT3luQyxRQUNQLElBQUk0aEMsS0FBSyxDQUFDSCxNQUFPQyxTQUFVLENBQ3pCcjFFLEtBQU0sY0FFUixDQUFFMjBFLE9BQVF6b0UsT0FBT3lvRSxVQUVMempCLEtBSVBobEQsT0FBT3luQyxRQUFVLElBQU0waEMsVUFINUIzcUUsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUywwQkFDbkMsRUFHWCxFQzlHSyxNQUFNcTJFLDRCQU1YLG1CQUFPQyxDQUFjQyxlQUNuQixNQUFNcEYsU0FBVyxDQUNmLENBQUMsY0FBZSxlQUNoQixDQUFDLFNBQVUsVUFDWCxDQUFDLFdBQVksWUFDYixDQUFDLFdBQVksV0FBWSxZQUN6QixDQUFDLFNBQVUsVUFDWCxDQUFDLFVBQVcsV0FDWixDQUFDLFlBQWEsYUFDZCxDQUFDLFFBQVMsU0FDVixDQUFDLGNBQWUsZUFDaEIsQ0FBQyxhQUFjLGVBRVh4MkIsVUFBWSxDQUNoQjY3QixNQUFPLEdBQ1ByRixTQUFVLElBRVosSUFBSyxNQUFNdFosV0FBV3NaLFNBQ2MsT0FBOUJvRixjQUFjMWUsUUFBUSxXQUNFLElBQWZBLFFBQVEsSUFBcUMsS0FBZkEsUUFBUSxLQUMvQ0EsUUFBUSxHQUFLQSxRQUFRLElBRXZCbGQsVUFBVTY3QixNQUFNNThFLEtBQ2QsT0FBT2krRCxRQUFRLHdCQUF3QkEsUUFBUSxTQUM3QzBlLGNBQWMxZSxRQUFRLGVBRzFCbGQsVUFBVXcyQixTQUFTdjNFLEtBQUssQ0FDdEJxWCxNQUFPNG1ELFFBQVEsR0FDZmovRCxNQUFPMjlFLGNBQWMxZSxRQUFRLE9BTW5DLE9BRkFsZCxVQUFVNjdCLE1BQ1IsdUJBQXlCNzdCLFVBQVU2N0IsTUFBTTN2RSxLQUFLLEtBQU04ekMsVUFBVTY3QixPQUN6RDc3QixTQUNULENBT0EsMkNBQWE4N0IsQ0FBZ0NDLGVBQWdCNTBFLFNBQ3ZEc0QsT0FBT3UrQyxNQUFNZ3ZCLGNBQ2ZsbEUsUUFBUW8rRCxJQUFJLFVBQVc2SyxnQkFFekJBLGVBQWlCQSxlQUFlQyxhQUNoQyxNQUFNQyxZQUFjUCw0QkFBNEJDLGFBQzlDSSxlQUFlRyxXQTZEakIsTUEzRGMsQ0FDWi85RSxLQUFNNDlFLGVBQWVJLGdCQUFnQkMsS0FDckNyNkUsTUFBTyxDQUNMd3BCLGdCQUFpQixDQUNmbHRCLElBQUssQ0FBRUosTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCQyxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRUwsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCRSxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRU4sTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCRyxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRVAsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCSSxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRVIsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCSyxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRVQsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCTSxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRVYsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCTyxJQUFLLEtBQzNEaCtFLElBQUssQ0FBRVgsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCUSxJQUFLLE1BRTdEaDVFLFFBQVMsQ0FDUCt0QixJQUFLLENBQ0gzekIsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCUyxPQUFRLElBQ3ZEaHlFLElBQUtnQixTQUFTaXdFLGVBQWVNLGdCQUFnQlUsVUFBVyxJQUN4RHZqQyxXQUFZdnZDLEtBQUt1SSxNQUFNdXBFLGVBQWVNLGdCQUFnQlMsT0FBUyxJQUVqRWhqQyxHQUFJLENBQ0Y3N0MsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCVyxPQUFRLElBQ3ZEbHlFLElBQUtnQixTQUFTaXdFLGVBQWVNLGdCQUFnQlksVUFBVyxLQUUxRC9pQyxHQUFJLENBQ0ZqOEMsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCYSxTQUFVLElBQ3pEcHlFLElBQUtnQixTQUFTaXdFLGVBQWVNLGdCQUFnQmMsWUFBYSxLQUU1RDc2QixJQUFLLENBQ0hya0QsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCZSxLQUFNLEtBRXZEL3BDLElBQUssQ0FDSHAxQyxNQUFPNk4sU0FBU2l3RSxlQUFlTSxnQkFBZ0JnQixLQUFNLElBQ3JEdnlFLElBQUtnQixTQUFTaXdFLGVBQWVNLGdCQUFnQmdCLEtBQU0sS0FFckRyNUUsR0FBSSxDQUFFL0YsTUFBTzg5RSxlQUFlTSxnQkFBZ0JpQixhQUM1Q3JxQyxNQUFPLENBQUVoMUMsTUFBTzZOLFNBQVNpd0UsZUFBZU0sZ0JBQWdCa0IsTUFBTyxNQUVqRXozQyxNQUFPLENBQ0x5VyxXQUFZdy9CLGVBQWVJLGdCQUFnQnFCLFdBQzNDcDRCLElBQUsyMkIsZUFBZUksZ0JBQWdCc0IsSUFDcENwZixJQUFLMGQsZUFBZUksZ0JBQWdCdUIsT0FDcENwZixVQUFXeWQsZUFBZUksZ0JBQWdCd0IsVUFDMUNwZixXQUFZd2QsZUFBZUksZ0JBQWdCeUIsWUFFN0M1OUIsVUFBV2k4QixZQUFZSixNQUN2Qm4rQixVQUFXdStCLFlBQVl6RixTQUN2QnRoRSxZQUFhLENBQ1h1eUQsT0FBUXRpRSxLQUFLQyxLQUFLQyxTQUFTLHdDQUcvQm1tQixhQUFja3dELDRCQUE0Qm1DLGNBQ3hDOUIsZUFBZStCLE9BQU9DLE9BQVMsR0FDL0I1MkUsU0FFRjYyRSxpQkFBa0J0Qyw0QkFBNEJ1QyxtQkFDNUNsQyxlQUFlbUMsYUFBYXB3RSxNQUFRLEdBQ3BDM0csU0FJTixDQUVBLG9CQUFPZzNFLENBQWVoZ0YsS0FBTTJRLGdCQVkxQixNQVh1QixTQUFuQkEsaUJBQ0ZBLGVBQWlCLE9BRU4scUJBQVQzUSxNQUF3QyxtQkFBVEEsS0FDakNBLEtBQU8sV0FDVywwQkFBVEEsS0FDVEEsS0FBTywwQkFDVyxVQUFUQSxNQUF1QyxLQUFuQjJRLGlCQUM3QjNRLEtBQU8sV0FDUDJRLGVBQWlCLFNBRVosQ0FDTEgsVUFBOEIsS0FBbkJHLGVBQXdCM1EsS0FBTzJRLGVBQzFDQSxlQUFtQyxLQUFuQkEsZUFBd0IsR0FBSzNRLEtBQzdDQSxLQUFNQSxNQUEyQixLQUFuQjJRLGVBQXdCLEdBQUssS0FBT0EsZUFBaUIsS0FFdkUsQ0FFQSwwQkFBYSt1RSxDQUFlTyxpQkFBa0JqM0UsU0FDNUMsTUFBTXFrQixPQUFTLEdBQ2YsSUFBSyxNQUFNMWIsU0FBU3N1RSxpQkFBa0IsQ0FDcEMsR0FDcUIsU0FBbkJ0dUUsTUFBTXV1RSxVQUNVLE1BQWhCdnVFLE1BQU03UixPQUNTLE1BQWY2UixNQUFNd3VFLE1BQ1UsTUFBaEJ4dUUsTUFBTXl1RSxNQUVOLFNBRUYsTUFBTTN2RSxNQUFROHNFLDRCQUE0QnlDLGNBQ3hDcnVFLE1BQU0zUixLQUNOMlIsTUFBTXV1RSxVQUFZLElBRWRsL0IsZUFBaUIxdkMsY0FBYzZvRCxVQUFVLFFBQVMxcEQsTUFBTXpRLEtBQU0sQ0FDbEVnc0QsT0FBUWhqRCxRQUFRZ2pELE9BQ2hCc08sYUFBYSxJQUVmLElBQUlxaEIsT0FBUyxVQUNXLElBQWIzNkIsVUFDVDI2QixPQUFTcnpFLFFBQVFDLE1BQU11TyxVQUFVa3FDLFNBQVN0RCxZQUMxQ2krQixPQUFPMzdFLEtBQU95USxNQUFNelEsS0FDcEIyN0UsT0FBT2wyRSxPQUFPK0ssVUFBWUMsTUFBTUQsVUFDaENtckUsT0FBT2wyRSxPQUFPa0wsZUFBaUJGLE1BQU1FLGlCQUVyQ2dyRSxPQUFTdGlELFNBQVN3a0IsV0FDaEJwdEMsTUFBTUQsVUFDTjdDLFNBQVNnRSxNQUFNN1IsT0FBUyxFQUFHLElBQzNCLENBQ0U2USxlQUMyQixLQUF6QkYsTUFBTUUsZ0JBQWdDRixNQUFNRSxpQkFHbERnckUsT0FBT2wyRSxPQUFPOEssV0FBYW9yRSxPQUFPbDJFLE9BQU84SyxZQUFjLENBQUMsRUFDM0IsYUFBekJFLE1BQU1FLGdCQUNSZ3JFLE9BQU9sMkUsT0FBTzhLLFdBQVd2UCxVQUFXLEVBQ3BDMjZFLE9BQU9sMkUsT0FBTzhLLFdBQVd4UCxRQUFTLEVBQ2xDNDZFLE9BQU9sMkUsT0FBTzhLLFdBQVd6UCxNQUFPLEdBQ0UsYUFBekIyUCxNQUFNRSxnQkFDZmdyRSxPQUFPbDJFLE9BQU84SyxXQUFXdFAsU0FBVSxFQUNuQzA2RSxPQUFPbDJFLE9BQU84SyxXQUFXeFAsUUFBUyxFQUNsQzQ2RSxPQUFPbDJFLE9BQU84SyxXQUFXelAsTUFBTyxHQUNILFVBQXBCMlAsTUFBTUQsWUFDZm1yRSxPQUFPbDJFLE9BQU84SyxXQUFXelAsTUFBTyxJQUdKLFFBQTVCNjZFLE9BQU9sMkUsT0FBTytLLFlBQ2hCbXJFLE9BQU8zN0UsS0FBTzI3RSxPQUFPMzdFLEtBQUtvWixRQUFRLFNBQVUsV0FDNUN1aUUsT0FBT2wyRSxPQUFPK0ssVUFBWSxRQUU1Qm1yRSxPQUFPbDJFLE9BQU91TyxLQUFPckcsU0FBU2dFLE1BQU03UixPQUFTLEVBQUcsSUFDaEQ2N0UsT0FBT2wyRSxPQUFPM0YsTUFBUTZOLFNBQVNnRSxNQUFNN1IsT0FBUyxFQUFHLElBQ2pENjdFLE9BQU9sMkUsT0FBT21ELE1BQVEreUUsT0FBT2wyRSxPQUFPbUQsT0FBUyxDQUFDLEVBQzlDK3lFLE9BQU9sMkUsT0FBT21ELE1BQU13MUMsWUFDRyxJQUFyQnpzQyxNQUFNeXNDLFlBQTRDLFNBQXJCenNDLE1BQU15c0MsV0FDckMvd0IsT0FBT3ZzQixLQUFLNjZFLE9BQ2QsQ0FDQSxPQUFPdHVELE1BQ1QsQ0FFQSx3QkFBT2d6RCxDQUFtQjd2RSxVQUFXZ1YsV0FDbkMsTUFBTTZILE9BQVM3SCxVQUFVODZELHNCQUFzQixRQUN6Q25uRCxVQUFZM29CLFVBQVU0SSxRQUFRLGFBQWMsTUFPbEQsT0FOdUJpVSxPQUFPamtCLE1BQUs0Z0IsR0FFL0JBLEVBQUV2a0IsUUFBUStLLFlBQWMyb0IsV0FDeEJuUCxFQUFFdmtCLFFBQVErSyxXQUFXdUIsUUFBUW9uQixZQUFjLEdBSWpELENBRUEsK0JBQWEybUQsQ0FBb0JTLHNCQUF1QnYzRSxTQUN0RCxNQUFNNE8sTUFBUSxHQUNUNlEsTUFBTSszRCxRQUFRRCx3QkFBbUQsTUFBekJBLHdCQUMzQ0Esc0JBQXdCLENBQUNBLHdCQUUzQixJQUFLLE1BQU01d0UsUUFBUTR3RSxzQkFBdUIsQ0FDeEMsTUFBTXYvQixlQUFpQjF2QyxjQUFjNm9ELFVBQVUsT0FBUXhxRCxLQUFLb0gsWUFBYSxDQUN2RWkxQyxPQUFRaGpELFFBQVFnakQsU0FFbEIsSUFBSTJ2QixPQUFTLEtBRVhBLFlBRHNCLElBQWIzNkIsU0FDQTE0QyxRQUFRQyxNQUFNdU8sVUFBVWtxQyxTQUFTdEQsWUFFakMsQ0FDUDE5QyxLQUFNMlAsS0FBS29ILFlBQ1hoUCxLQUFNLFFBR1Y2UCxNQUFNOVcsS0FBSzY2RSxPQUNiLENBQ0EsT0FBTy9qRSxLQUNULENBRUEsMkJBQWE2b0UsQ0FBZ0JDLGtCQUFtQmw3RCxVQUFXeGMsU0FDekQsTUFBTTYvQyxRQUFVLEdBQ1hwZ0MsTUFBTSszRCxRQUFRRSxxQkFDakJBLGtCQUFvQixDQUFDQSxvQkFFdkIsSUFBSyxNQUFNcHlELFVBQVVveUQsa0JBQW1CLENBQ3RDLE1BQU0vdUUsTUFBUTRyRSw0QkFBNEI4QyxrQkFDeEMveEQsT0FBT3F5RCxVQUNQbjdELFdBRUk1RSxPQUFTME4sT0FBTzFOLE9BQU94SCxRQUFRLFFBQVMsSUFDeENwWCxLQUFPNGUsU0FBVzBOLE9BQU8xTixPQUN6Qm9nQyxlQUFpQjF2QyxjQUFjNm9ELFVBQVUsU0FBVTdyQyxPQUFPdHVCLEtBQU0sQ0FDcEVnc0QsT0FBUWhqRCxRQUFRZ2pELFNBRWxCLElBQUkydkIsT0FBUyxVQUNXLElBQWIzNkIsVUFDVDI2QixPQUFTcnpFLFFBQVFDLE1BQU11TyxVQUFVa3FDLFNBQVN0RCxZQUMxQ2krQixPQUFPbDJFLE9BQU9rTSxNQUFNK0YsS0FBSzFYLEtBQU8yUixPQUFPM1IsTUFBUSxHQUMvQzI3RSxPQUFPbDJFLE9BQU9rTSxNQUFNK0YsS0FBS0MsR0FBS2hHLE9BQU9nRyxJQUFNLEdBQzNDZ2tFLE9BQU9sMkUsT0FBTytOLE1BQVFtb0UsT0FBT2wyRSxPQUFPK04sT0FBUyxDQUFDLEVBQzlDbW9FLE9BQU9sMkUsT0FBTytOLE1BQU1MLE9BQVN3b0UsT0FBT2wyRSxPQUFPK04sTUFBTUwsUUFBVSxDQUFDLEVBQzVEd29FLE9BQU9sMkUsT0FBTytOLE1BQU1MLE9BQU95TixPQUFTQSxPQUNwQys2RCxPQUFPbDJFLE9BQU9xUCxLQUFPd1osT0FBT3haLEtBQzVCNm1FLE9BQU9sMkUsT0FBT3FLLFlBQWN3ZSxPQUFPc3lELEtBQ25DakYsT0FBT2wyRSxPQUFPOEssV0FBYW9yRSxPQUFPbDJFLE9BQU84SyxZQUFjLENBQUMsRUFDeERvckUsT0FBT2wyRSxPQUFPOEssV0FBV2pQLE1BQ3ZCcVEsT0FBT2xNLE9BQU84SyxZQUFZdlAsV0FBWSxFQUN4QzI2RSxPQUFPbDJFLE9BQU84SyxXQUFXaFAsS0FDdkJvUSxPQUFPbE0sT0FBTzhLLFlBQVl0UCxVQUFXLEVBQ3ZDMDZFLE9BQU9sMkUsT0FBTzhLLFdBQVd2TyxLQUFPQSxNQUVoQzI1RSxPQUFTLENBQ1AzN0UsS0FBTXN1QixPQUFPdHVCLEtBQ2IrSCxLQUFNLFNBQ050QyxPQUFRLENBQ05rTSxNQUFPLENBQ0wrRixLQUFNLENBQ0oxWCxLQUFNMlIsT0FBTzNSLE1BQVEsR0FDckIyWCxHQUFJaEcsT0FBT2dHLElBQU0sS0FHckJuRSxNQUFPLENBQ0xMLE9BQVEsQ0FDTnlOLFNBR0o5TCxLQUFNd1osT0FBT3haLEtBQ2JoRixZQUFhd2UsT0FBT3N5RCxLQUNwQnJ3RSxXQUFZLENBQ1ZqUCxNQUFPcVEsT0FBT2xNLE9BQU84SyxZQUFZdlAsV0FBWSxFQUM3Q08sS0FBTW9RLE9BQU9sTSxPQUFPOEssWUFBWXRQLFVBQVcsRUFDM0NlLFFBS1I2bUQsUUFBUS9uRCxLQUFLNjZFLE9BQ2YsQ0FDQSxPQUFPOXlCLE9BQ1QsQ0FFQSx5QkFBYWc0QixDQUFjQyxlQUFnQkMsVUFDekMsTUFBTUMscUJBQXVCQyxNQUMzQix5QkFBMkJILGdCQUV2QkksZ0JBQWtCRixlQUFlRyxPQUt2QyxPQUppQjVFLG9CQUFvQlcseUJBQ25DZ0UsVUFDQUgsU0FHSixDQUVBLG9DQUFhSyxDQUF5QkMsd0JBQXlCcjRFLFNBQzdELElBQUtoQyxLQUFLc0csTUFBTWcwRSxJQUFJLGdCQUlsQixPQUhBN3VFLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUtDLFNBQVMsbUNBRWQsRUFFVCxNQUFNZzBFLG9CQUNFcUMsNEJBQTRCSSwrQkFDaEMwRCx3QkFDQXI0RSxTQUVBc0QsT0FBT3UrQyxNQUFNZ3ZCLGNBQ2ZsbEUsUUFBUW8rRCxJQUFJLGtCQUFtQm1JLGVBRWpDLE1BQU1saEIsK0JBQ0Uxb0QsY0FBY3dvRCwwQ0FDdEIsSUFBS3lpQixvQkFBb0JTLHlCQUN2QixPQUFPLEVBRVQsTUFBTXJMLFVBQVksQ0FDaEIzeEUsS0FBTWs3RSxjQUFjbDdFLEtBQ3BCK0gsS0FBTSxZQUNOa3dELE9BQVErQix5QkFBeUJyaUQsR0FDakMzSSxLQUFNa3NFLGNBQWN0M0UsT0FFaEJ1M0UsVUFBWXBnQyxNQUFNNWdDLE9BQU93M0QsV0FFL0IsR0FDRTBQLHdCQUF3QnhELGFBQWFHLGdCQUFnQnVELFVBQVVqM0UsT0FBUyxHQUN4RSxDQUNBLE1BQU15MkUsU0FBVyxVQUFZNUYsSUFBSXhqRSxHQUFLLE9BQ2hDMk4sZUFBaUJpNEQsNEJBQTRCc0QsYUFDakRRLHdCQUF3QnhELGFBQWFHLGdCQUFnQnVELFNBQ3JEUixXQUVlLElBQWJ6N0QsVUFDRjYxRCxJQUFJdnpFLE9BQU8sQ0FDVHdILElBQUtrVyxVQUdYLENBQ0loWixPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRbytELElBQUksVUFBV21JLGNBQWN0akUsYUFFakN1akUsSUFBSXIwRSx3QkFBd0IsT0FBUW8wRSxjQUFjN3RELE9BQVEsQ0FDOUQyd0IsYUFBYSxVQUVUbTlCLElBQUlyMEUsd0JBQXdCLE9BQVFvMEUsY0FBYzJFLFdBQVksQ0FDbEU3aEMsYUFBYSxJQUVmLE1BQU02SyxjQUFnQjAwQiw0QkFBNEJrRCxlQUNoRFksd0JBQXdCeEQsYUFBYTJELFNBQVNsekQsUUFBVSxHQUN4RDZzRCxJQUNBbnlFLFNBU0YsT0FQSXNELE9BQU91K0MsTUFBTWd2QixjQUNmbGxFLFFBQVFvK0QsSUFBSSxZQUFhbHFCLGVBRXJCc3lCLElBQUlyMEUsd0JBQXdCLE9BQVEraEQsUUFBUyxDQUNqRDdLLGFBQWEsSUFHUm05QixHQUNULEVDclhLLE1BQU1zRyxnQ0FBZ0N6K0QsZ0JBRTNDLHlCQUFXQyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsU0FBVSxrQkFDNUJoTCxNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyxzQkFDMUJrYyxTQUFVLGtEQUNWQyxlQUFlLEVBQ2ZDLE1BQU8sSUFDUEMsT0FBUSxRQUVaLENBR0EsYUFBTStXLEdBQ0osTUFBTXRyQixXQUFhakosTUFBTXUwQixVQWV6QixPQWJBdHJCLEtBQUsweUUsV0FBYTF5RSxLQUFLZ00sT0FBTzBtRSxXQUM5QjF5RSxLQUFLMnlFLFVBQVkzeUUsS0FBS2dNLE9BQU8ybUUsVUFDN0IzeUUsS0FBS2c5QyxPQUFTaDlDLEtBQUtnTSxPQUFPZ3hDLE9BQzFCaDlDLEtBQUtrc0UsY0FBZ0Jsc0UsS0FBS2dNLE9BQU9rZ0UsY0FDakNsc0UsS0FBSzR5RSxVQUFZNTZFLEtBQUtzRyxNQUFNZzBFLElBQUksZ0JBQzVCLENBQUMsTUFBTyxZQUFZNTBFLFNBQVNzQyxLQUFLMHlFLGNBQ3BDMXlFLEtBQUs0c0UsVUFBWXRELHdCQUF3Qkcsa0JBQ3pDenBFLEtBQUs0bUUsU0FBVzBDLHdCQUF3QkMsY0FDdEN2cEUsS0FBS2dNLE9BQU80NkQsVUFFZDVtRSxLQUFLNnlFLFlBQWN2Six3QkFBd0JFLGVBQWV4cEUsS0FBSzRtRSxXQUcxRDVtRSxJQUNULENBRUEsaUJBQUF3VSxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUV4QkEsS0FBS3JhLEtBQUssaUNBQWlDdStELE9BQzNDbGtELEtBQ0dyYSxLQUFLLHFDQUNMOUQsT0FBT29FLEtBQUt3eEIsZ0JBQWdCdDRCLEtBQUs4RyxPQUNwQytaLEtBQ0dyYSxLQUFLLGdDQUNMOUQsT0FBT29FLEtBQUtvNEUsb0JBQW9CbC9FLEtBQUs4RyxPQUV4QytaLEtBQ0dyYSxLQUFLLDhCQUNMc2EsR0FBRyxTQUFTLFNBQVV4WixHQUNyQixNQUFNNjNFLHNCQUF3QjdzRCxFQUFFeHJCLE1BQzdCb2hDLE1BQ0F2N0IsTUFBTSxrQ0FDSG8rQixPQUFTelksRUFBRSxlQUNieVksT0FBTzMrQixLQUFLLGFBQWUreUUsc0JBQzdCcDBDLE9BQ0dscUIsS0FBS3pjLEtBQUtDLEtBQUtDLFNBQVMsb0NBQ3hCNDNELFNBQVMsU0FFWm54QixPQUFPbHFCLEtBQUtrcUIsT0FBTzMrQixLQUFLLFNBQVNpb0MsWUFBWSxRQUVqRCxJQUNDOVAsUUFBUSxTQUVYMWpCLEtBQUtyYSxLQUFLLGtCQUFrQit4QixNQUFNenhCLEtBQUsyaEMsZUFBZXpvQyxLQUFLOEcsT0FDM0QrWixLQUFLcmEsS0FBSyxRQUFRb3lCLFFBQU90eEIsSUFDdkJBLEVBQUUvRCxnQkFBZSxHQUVyQixDQU9BLGdCQUFPNjdFLENBQVd6L0MsTUFDaEIsTUFBTTI1QyxPQUFTLENBQUMsRUF1QmhCLE9BdEJBQSxPQUFPMXpCLE9BQVNqbUIsS0FBS241QixLQUFLLG9CQUFvQjBoQyxNQUFNM0csT0FDaEQ3M0IsT0FBT3UrQyxNQUFNZ3ZCLGNBQ2ZsbEUsUUFBUWsyQyxNQUFNLGVBQWdCcXhCLE9BQU8xekIsUUFFbkNqbUIsS0FBS241QixLQUFLLG1CQUFtQmtCLE9BQVMsSUFDeEM0eEUsT0FBT0MsY0FBZ0I1NUMsS0FBS241QixLQUFLLG1CQUFtQjBoQyxNQUFNM0csUUFFeEQ1QixLQUFLbjVCLEtBQUssb0JBQW9Ca0IsT0FBUyxJQUN6QzR4RSxPQUFPaGhCLEtBQU9vZCx3QkFBd0JDLGNBQ3BDaDJDLEtBQUtuNUIsS0FBSyxvQkFBb0IwaEMsTUFBTTNHLFNBR3BDNUIsS0FBS241QixLQUFLLFdBQVdrQixPQUFTLElBQ2hDNHhFLE9BQU9sd0IsT0FBU3pwQixLQUFLbjVCLEtBQUssV0FBVzBoQyxNQUFNM0csUUFFekM1QixLQUFLbjVCLEtBQUssOEJBQThCa0IsT0FBUyxJQUNuRDR4RSxPQUFPdCtCLEtBQU9yYixLQUFLbjVCLEtBQUssOEJBQThCMGhDLE1BQU0zRyxRQUcxRDczQixPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sZ0JBQWlCLEtBQU9xeEIsT0FBT3QrQixLQUFPLE1BRS9DcytCLE1BQ1QsQ0FFQSxtQkFBQTRGLENBQXFCNzdFLE9BQ25CLE1BQU1nOEUsY0FBZ0IxcEUsU0FBUzJwRSxlQUFlLCtCQUN4Q0MsY0FBZ0I1cEUsU0FBUzJwRSxlQUM3QixpQ0FFSUUsY0FBZ0I3cEUsU0FBUzJwRSxlQUFlLDZCQUN4Q0csUUFBVTlwRSxTQUFTMnBFLGVBQWUsZ0NBQ2xDL0UsS0FBTzhFLGNBQWNLLE1BQU0sR0FDM0J2bEQsT0FBU3J6QixLQUNUNjRFLFdBQWEsSUFBSUMsV0FDdkJELFdBQVdFLE9BQVMsU0FBVXY0RSxHQUM1QixJQUNFNnlCLE9BQU8ybEQsY0FBZ0JycUUsS0FBS3VkLE1BQU0yc0QsV0FBV3QyRSxPQUMvQyxDQUFFLE1BQU8vQixHQUtQLE9BSkFnckIsRUFBRSxlQUNDelIsS0FBS3pjLEtBQUtDLEtBQUtDLFNBQVMsOEJBQ3hCNDNELFNBQVMsY0FDWjc0RCxNQUFNRSxnQkFFUixDQUNBLE1BQU13OEUsZ0JBQ0o1bEQsT0FBTzJsRCxlQUFlN0UsY0FBY0csZ0JBQ2pDMkUsaUJBTUxQLGNBQWNRLFlBQWNELGdCQUFnQjFFLEtBQzVDa0UsY0FBY3BtRSxJQUFNLHlCQUEyQjRtRSxnQkFBZ0JwQixTQUMvRGMsUUFBUXA1QyxNQUFNQyxRQUFVLFFBQ3hCaFUsRUFBRSwwQkFBMEIzUixPQUFPLFNBUmpDOVEsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS0MsU0FBUywrQkFRekIsRUFDQXE3RSxXQUFXTSxXQUFXMUYsS0FDeEIsQ0FFQSxlQUFBamlELENBQWlCajFCLE9BQ2Z5RCxLQUFLMnhCLFVBQVVwMUIsTUFDakIsQ0FFQSxvQkFBTW9sQyxDQUFnQnBsQyxPQUNwQixNQUFNMFIsR0FBSzFSLE1BQU1JLGNBQWNJLFFBQVF1bEIsT0FDdkMsR0FBVyxPQUFQclUsR0FDRmpPLEtBQUtpYixhQUNBLEdBQVcsa0JBQVBoTixHQUF3QixDQUNqQyxNQUFNdUMsUUFBVW8rRCx3QkFBd0JFLGVBQ3RDOXVFLEtBQUtzUixPQUFPNDZELFVBRWR0a0UsY0FBYzhxQixnQkFBZ0JsaUIsU0FBU25KLE1BQUssSUFDbkMwQixHQUFHQyxjQUFjekksS0FBS2pELEtBQUtDLEtBQUtDLFNBQVMsaUJBRXBELE1BQU8sR0FBVyxXQUFQeVEsR0FBaUIsQ0FDMUIsTUFBTXJYLElBQU00MEIsRUFBRWp2QixNQUFNSSxlQUFlRSxRQUFRLDZCQUMzQ2pHLElBQUlxbkUsT0FDSixNQUFNcGxDLEtBQU9yTixFQUFFanZCLE1BQU1JLGVBQWVFLFFBQVEsUUFDdEMyMUUsT0FBU3VGLHdCQUF3Qk8sVUFBVXovQyxNQUNqRCxHQUFzQixlQUFsQjI1QyxPQUFPMXpCLFFBQTJCOStDLEtBQUtnNUUsY0FBZSxDQUN4RCxNQUFNbDlELGdCQUNFKzNELDRCQUE0QjZELHdCQUNoQzEzRSxLQUFLZzVFLGNBQ0wsQ0FBRTEyQixPQUFRa3dCLE9BQU9sd0IsVUFFSCxJQUFkeG1DLFdBQ0VsWixPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sYUFBY3JsQyxXQUU5Qi9TLEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBS3lXLE9BQU8scUJBQXNCLENBQ3JDb2xFLFVBQVc5N0UsS0FBS0MsS0FBS0MsU0FBUywyQkFDOUJrckMsVUFBVzVzQixVQUFVeGxCLGNBR25Cd2xCLFVBQVUvZCxNQUFNQyxRQUFPLEdBQzdCZ0MsS0FBS2liLFNBRUxya0IsSUFBSWdlLE1BRVIsTUFBVzQ5RCxPQUFPdCtCLE1BQXdCLEtBQWhCcytCLE9BQU90K0IsTUFDL0I2akMsd0JBQXdCc0IsWUFBWTdHLFFBQ3BDeHlFLEtBQUtpYixTQUVMcmtCLElBQUlnZSxNQUVSLENBQ0YsQ0FLQSxtQkFBTXVkLENBQWU1MUIsTUFBTzYxQixVQUMxQnB5QixLQUFLc1IsT0FBTzBtRSxXQUFhNWxELFNBQVMsbUJBQ2xDcHlCLEtBQUtzUixPQUFPa2dFLGNBQWdCcC9DLFNBQVMsOEJBQThCcUksWUFDekIsSUFBL0JySSxTQUFTLG9CQUNsQnB5QixLQUFLc1IsT0FBTzJtRSxVQUFZN2xELFNBQVMsd0JBRVEsSUFBaENBLFNBQVMscUJBQ2xCcHlCLEtBQUtzUixPQUFPNDZELFNBQVc5NUMsU0FBUyx5QkFFSCxJQUFwQkEsU0FBU2t3QixTQUNsQnRpRCxLQUFLc1IsT0FBT2d4QyxPQUFTbHdCLFNBQVNrd0IsUUFFaEN0aUQsS0FBS2hDLFFBQU8sRUFDZCxDQU1BLHdCQUFhcTdFLENBQWE3RyxRQUNnQixNQUFwQ0EsT0FBT3QrQixLQUFLcytCLE9BQU90K0IsS0FBS3R6QyxVQUMxQjR4RSxPQUFPdCtCLE1BQVEsS0FFakIsTUFBTWg2QyxNQUFRLElBQUlnMUUsa0JBQ1pvSyxtQkFBcUJwL0UsTUFBTXE0RSxZQUFZQyxRQUV6QzV2RSxPQUFPdStDLE1BQU1ndkIsY0FDZmxsRSxRQUFRazJDLE1BQU0sZ0JBQWlCbTRCLGNBRWpDdndFLEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBS3lXLE9BQU8scUJBQXNCLENBQ3JDb2xFLFVBQVdFLGFBQWFqN0UsTUFBTXNSLGNBQzlCKzRCLFVBQVc0d0MsYUFBYWhqRixjQUd0QmdqRixhQUFhdjdFLE1BQU1DLFFBQU8sRUFHbEMsQ0FLQSxtQkFBYXlTLENBQVFuUixRQUFVLENBQUMsR0FDOUJBLFFBQVEwNEUsV0FBYTE0RSxRQUFRMDRFLFlBQWMsTUFDM0MxNEUsUUFBUTRzRSxTQUNONXNFLFFBQVE0c0UsVUFBWTBDLHdCQUF3QkMsY0FBYyxNQUM1RHZ2RSxRQUFRMjRFLFVBQVkzNEUsUUFBUTRzRSxVQUFZLFlBQ3hDNXNFLFFBQVFnakQsT0FBU2hqRCxRQUFRZ2pELFFBQVUsT0FDbkNoakQsUUFBUWt5RSxjQUFnQmx5RSxRQUFRa3lFLGVBQWlCLEdBRWpELElBQUl1Ryx3QkFBd0J6NEUsU0FBU3RCLFFBQU8sRUFDOUMsRUFHRjI2QyxNQUFNNGdDLEtBQUssU0FBUyxLQUNkajhFLEtBQUtrRSxRQUFRdEUsSUFBSSx3QkFBd0I2RCxTQUMzQ2txRCxPQUFPaWtCLGtCQUFvQkEsa0JBQzdCLElDNVBLLE1BQU1zSyxrQkFBa0J0bEQsT0FDN0Isa0JBQU91bEQsQ0FBYUMsU0FBVW5vRSxRQUFTeUosU0FDakN6SixRQUFRN1IsS0FBSyxTQUFTMitELEdBQUcsYUFDM0IvZ0UsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsWUFBY3N4RSxTQUFXLElBQU0sS0FFM0QxK0QsUUFBUTArRCxTQUNWLENBRUEsa0JBQU9DLENBQWFELFNBQVV6ekUsTUFDNUIsT0FBSXl6RSxVQUFZenpFLEtBQUsvRyxPQUFPd0MsTUFBTWd3QyxXQUFXempDLEdBQ3BDaEksS0FBSy9HLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsR0FFNUJyUCxRQUFRQyxNQUFNdU8sVUFBVW5ILEtBQ2pDLENBRUEsbUJBQWF3SyxHQUVYLE9BRGtCblQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsY0FFMUMsSUFBSyxHQUNILE9BQU8sSUFBSThlLFNBQVFoQixVQUNMLElBQUl3K0QsVUFBVSxDQUN4Qi9xRSxNQUFPblIsS0FBS0MsS0FBS3lXLE9BQU8sZ0NBQ3hCeEQsUUFBUyxNQUFRbFQsS0FBS0MsS0FBS3lXLE9BQU8sa0NBQW9DLDBHQUE0RzFXLEtBQUtDLEtBQUt5VyxPQUFPLG9DQUFzQyxlQUN6T3lGLFFBQVMsQ0FBQyxPQUFRLE1BQU8sVUFDekIwYSxRQUFTLENBQ1Aya0IsSUFBSyxDQUNIcjdDLEtBQU0sK0JBQ05KLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsT0FDMUI0MkIsU0FBVzdpQixVQUFjaW9FLFVBQVVDLGFBQVksRUFBTWxvRSxRQUFTeUosUUFBTyxHQUV2RTQrRCxHQUFJLENBQ0ZuOEUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxNQUMxQjQyQixTQUFXN2lCLFVBQWNpb0UsVUFBVUMsYUFBWSxFQUFPbG9FLFFBQVN5SixRQUFPLE1BSXhFaGQsUUFBTyxFQUFJLElBRW5CLElBQUssSUFDSCxPQUFPLEVBQ1QsSUFBSyxJQUNILE9BQU8sRUFFYixFQ25DSyxNQUFNNjdFLDRCQUE0QkMsVUFLdkMsaUJBQUFoZ0UsQ0FBbUJDLE1BR2pCLEdBRkExZCxNQUFNeWQsa0JBQWtCQyxPQUVuQi9aLEtBQUtWLFFBQVE2eEQsU0FBVSxPQUU1QnAzQyxLQUNHcmEsS0FBSyx1QkFDTCt4QixPQUFNbDFCLE9BQVN5RCxLQUFLczdELGVBQWUvK0QsTUFBTyxZQUM3Q3dkLEtBQ0dyYSxLQUFLLGdCQUNMK3hCLE9BQU1sMUIsT0FBU3lELEtBQUsrNUUsY0FBY3g5RSxNQUFPLFlBRTVDd2QsS0FBS3JhLEtBQUssc0JBQXNCK3hCLE1BQU16eEIsS0FBS2c2RSxtQkFBbUI5Z0YsS0FBSzhHLE9BQ25FK1osS0FBS3JhLEtBQUssa0JBQWtCK3hCLE1BQU16eEIsS0FBS2k2RSxnQkFBZ0IvZ0YsS0FBSzhHLE9BRTNDLElBQUlrNkUsU0FBUyxDQUM1QjNwRCxhQUFjLGFBQ2Q0cEQsVUFBVyxDQUFFQyxLQUFNcDZFLEtBQUsyeUIsUUFBUXo1QixLQUFLOEcsU0FFOUI5RyxLQUFLNmdCLEtBQUssR0FDckIsQ0FFQSxhQUFNNFksQ0FBU3AyQixNQUFPOEIsS0FBTyxRQUFTZzhFLGVBQWlCLFVBQ3JEOTlFLE1BQU1FLGlCQUNORixNQUFNdS9ELGtCQUVOLE1BQU13ZSxjQUFnQi85RSxPQUFPSSxlQUFlb1MsV0FBV3dULFNBQVMsbUJBQzFEKzdDLEdBQUsvaEUsT0FBT0ksZUFBZUUsUUFBUSxNQUNuQ3NnQixNQUFRbWhELElBQUl2aEUsU0FBU2djLE1BRXJCZ2EsZUFBaUJuckIsY0FBY29yQixxQkFBcUJ6MkIsTUFBTyxRQUVqRSxJQUFJZytFLFNBQVcsRUFDZixNQUFNamxELFdBQWF0MUIsS0FBS2lHLEtBQUtsSyxPQUFPcytFLGdCQUFrQno3RSxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3MrRSxpQkFBbUIsR0FDNUcvMUUsT0FBU3RFLEtBQUtpRyxLQUFLbEssT0FBT3VJLE9BQVMxRixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3VJLFFBQVUsR0FFNUYsSUFBSyxNQUFNMkIsUUFBUThzQixTQUNqQixHQUFLOXNCLE1BQVNBLEtBQUtsSyxRQUNkLENBQUNzQyxNQUFNMkUsU0FBU2lELEtBQUs1SCxNQUkxQixHQUFJaThFLGNBQWUsQ0FDakIsSUFBS24xRSxTQUFTNEMsVUFBVTlCLE1BQU8sQ0FFN0IsR0FBSXF2QixXQUFXNTFCLE1BQUt1M0MsSUFBTUEsR0FBRzNnRCxPQUFTMlAsS0FBSzNQLE9BQ3pDLFNBRUYsR0FBSWdPLE9BQU82WSxPQUFPd0csT0FBT2prQixNQUFLdTNDLElBQU1BLEdBQUczZ0QsT0FBUzJQLEtBQUszUCxPQUNuRCxRQUVKLENBRWlCLElBQWJpa0YsV0FDRkEsZUFBaUJmLFVBQVUvb0UsVUFFN0JuTSxPQUFPNlksT0FBT3dHLE9BQVNyZixPQUFPNlksT0FBT3dHLE9BQU81WCxPQUFPLENBQUN5dEUsVUFBVUcsWUFBWVksU0FBVXQwRSxPQUN0RixLQUFPLENBQ0wsSUFBS2QsU0FBUzRDLFVBQVU5QixNQUFPLENBRTdCLEdBQUlxdkIsV0FBVzUxQixNQUFLdTNDLElBQU1BLEdBQUczZ0QsT0FBUzJQLEtBQUszUCxPQUN6QyxTQUdGLElBQUssSUFBSWdxQixFQUFJLEVBQUdBLEVBQUloYyxPQUFPMUQsT0FBUTBmLElBQUssQ0FFdEMsTUFBTW5ELE1BQVE3WSxPQUFPZ2MsR0FBR3FELE9BQU93ekIsV0FDN0JGLElBQU1BLEdBQUczZ0QsT0FBUzJQLEtBQUszUCxRQUVWLElBQVg2bUIsT0FDRjdZLE9BQU9nYyxHQUFHcUQsT0FBT3dTLE9BQU9oWixNQUFPLEVBRW5DLENBQ0YsQ0FDaUIsSUFBYm85RCxXQUNGQSxlQUFpQmYsVUFBVS9vRSxVQUU3QjZrQixXQUFXbCtCLEtBQUtvaUYsVUFBVUcsWUFBWVksU0FBVXQwRSxNQUNsRCxPQUVJakcsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsZ0JBQWlCb0csZUFDcEN0RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxDQUFDLFVBQVVtOEUsa0JBQW1CL2tELFlBQ3pELENBRUEscUJBQU0ya0QsQ0FBaUIxOUUsT0FDckJBLE1BQU1FLGlCQUNOLE1BQU1DLEVBQUlILE1BQU1JLGNBR2hCLEdBQUlELEVBQUVxUyxVQUFVd1QsU0FBUyxhQUFjLE9BQy9CdmlCLEtBQUsyeEIsVUFBVXAxQixPQUNyQixNQUFNK0gsT0FBU3RFLEtBQUtpRyxLQUFLbEssT0FBT3VJLGFBQzFCdEUsS0FBS2lHLEtBQUsvSCxPQUFPLENBQ3JCLGdCQUFpQm9HLE9BQU95SCxPQUFPLENBQUMsQ0FBRXpNLFFBQVMsRUFBR3FrQixPQUFRLE9BRTFELENBRUEsR0FBSWpuQixFQUFFcVMsVUFBVXdULFNBQVMsZ0JBQWlCLE9BQ2xDdmlCLEtBQUsyeEIsVUFBVXAxQixPQUNyQixNQUFNK0gsT0FBUzFGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPdUksUUFDbERnNkQsR0FBSzVoRSxFQUFFRyxRQUFRLG9CQUNyQnlILE9BQU82eEIsT0FBT2o2QixPQUFPb2lFLEdBQUd2aEUsUUFBUWdjLE9BQVEsU0FDbEMvWSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxnQkFBaUJvRyxRQUM1QyxDQUNGLENBRUEsb0JBQU1nM0QsQ0FBZ0IvK0QsTUFBTzg5RSxlQUFpQixTQUM1Qzk5RSxNQUFNRSxpQkFDTixNQUFNbVYsSUFBTTRaLEVBQUVqdkIsTUFBTUksZUFDZEMsR0FBS2dWLElBQUk4cEQsUUFBUSxTQUNqQjNpRCxNQUFRbkgsSUFBSS9VLFFBQVEsVUFDMUIsSUFBSW9KLEtBVUosR0FSRUEsS0FERThTLE1BQU1uWSxPQUNEWixLQUFLaUcsS0FBS2xLLE9BQU91SSxPQUFPeVUsTUFBTXpULEtBQUssVUFBVSswRSxnQkFBZ0IzNkUsTUFBS3ZKLEdBQ2hFQSxFQUFFZzdDLE1BQVF2MEMsR0FBRzBJLEtBQUssYUFHcEJ0RixLQUFLaUcsS0FBS2xLLE9BQU9zK0UsZ0JBQWdCMzZFLE1BQUt2SixHQUNwQ0EsRUFBRWc3QyxNQUFRdjBDLEdBQUcwSSxLQUFLLGNBR3hCVyxLQUNILE9BRUYsTUFBTTVDLGVBQWlCa0ssV0FBV0MsV0FDaEN2SCxLQUFLbEssT0FBT3NSLFlBQVlqWCxNQUN4QixDQUNFa00sT0FBTyxFQUNQczdELFFBQVM1OUQsS0FBS2lHLEtBQUtrckQsV0FLdkIsR0FBSXYwRCxHQUFHaWhFLFNBQVMsWUFBYSxDQUMzQixNQUFNQyxRQUFVbGhFLEdBQUc0ZCxTQUFTLGlCQUM1QnNqRCxRQUFRakMsUUFBUSxLQUFLLElBQU1pQyxRQUFRaDdDLFVBQ3JDLEtBQU8sQ0FDTCxNQUFNaTdDLElBQU12eUMsRUFBRSw2QkFBNkJub0Isa0JBQ3JDb0ssTUFBUStkLEVBQUUsdUNBRWhCdXlDLElBQUlydEIsT0FBT2pqQyxPQUNYN1EsR0FBRzh6QyxPQUFPcXRCLElBQUlFLFFBQ2RGLElBQUlHLFVBQVUsSUFDaEIsQ0FDQXRoRSxHQUFHb2pDLFlBQVksV0FDakIsQ0FFQSxtQkFBTSs1QyxDQUFleDlFLE1BQU84OUUsZUFBaUIsU0FDM0MsTUFBTXAwRSxLQUFPdWxCLEVBQUVqdkIsTUFBTUksZUFBZUUsUUFBUSxTQUN0Q3dYLE9BQVNwTyxLQUFLWCxLQUFLLFdBQ25CazFFLE1BQVF2MEUsS0FBS1gsS0FBSyxTQUNsQm0xRSxVQUFZejZFLEtBQUtpRyxLQUFLbEssT0FBT3MrRSxnQkFBZ0JsakMsV0FBVTcyQixHQUFNak0sUUFBVWlNLEVBQUU2d0IsTUFBUTk4QixRQUFZbW1FLE9BQVNsNkQsSUFBTWs2RCxRQUNsSCxHQUFJQyxXQUFhLEVBQUcsQ0FDbEIsTUFBTW5sRCxXQUFhdDFCLEtBQUtpRyxLQUFLbEssT0FBT3MrRSxnQkFBa0J6N0UsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU9zK0UsaUJBQW1CLEdBQ2xIL2tELFdBQVdhLE9BQU9za0QsVUFBVyxTQUN2Qno2RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxDQUFDLFVBQVVtOEUsa0JBQW1CL2tELFlBQ3pELENBQ0YsQ0FFQSx3QkFBTTBrRCxDQUFvQno5RSxPQUN4QixNQUFNMEosS0FBT3VsQixFQUFFanZCLE1BQU1JLGVBQWVFLFFBQVEsU0FDdENrYyxNQUFRN2MsT0FBTytKLEtBQUtwSixRQUFRLG9CQUFvQnlJLEtBQUssVUFDckRoQixPQUFTMUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU91SSxRQUN4RCxRQUE2QixJQUFsQkEsT0FBT3lVLE9BQXdCLENBQ3hDLE1BQU0xRSxPQUFTcE8sS0FBS1gsS0FBSyxXQUNuQmsxRSxNQUFRdjBFLEtBQUtYLEtBQUssU0FDbEJtMUUsVUFBWW4yRSxPQUFPeVUsT0FBTzRLLE9BQU93ekIsV0FBVTcyQixHQUFNak0sUUFBVWlNLEVBQUU2d0IsTUFBUTk4QixRQUFZbW1FLE9BQVNsNkQsSUFBTWs2RCxRQUNsR0MsV0FBYSxJQUNmbjJFLE9BQU95VSxPQUFPNEssT0FBT3dTLE9BQU9za0QsVUFBVyxTQUNqQ3o2RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxnQkFBaUJvRyxTQUU5QyxDQUNGLENBRUEseUJBQVdpVixHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxjQUMzQkMsU0FBVSwrQ0FDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1J3VyxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUMzQm91QyxRQUFTLENBQUMsb0JBQ1ZsdUMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQWdsQyxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsQ0FFQSxhQUFNemlDLEdBQ0osTUFBTUMsVUFBWXgwQixNQUFNdTBCLFVBRXhCQyxVQUFVNnBELFVBQW9DLElBQXpCMTZFLEtBQUtpRyxLQUFLMDBFLFdBRS9COXBELFVBQVV2ckIsS0FBS3ZKLE9BQU80bkIsYUFBZXJtQixLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNODBCLGdCQUFnQixDQUFFalksU0FBVWpQLFVBQVV2ckIsS0FBS3ZKLE9BQU80bkIsU0FFN0drTixVQUFVb3lDLGVBQXlELElBQXhDcHlDLFVBQVV2ckIsS0FBS3ZKLE9BQU80bkIsT0FBTy9pQixPQUV4RGl3QixVQUFVdnJCLEtBQUt2SixPQUFPNG5CLE9BQU96WCxLQUFLdEUsY0FBY3VFLGVBRWhELElBQUssSUFBSWdSLE1BQVEsRUFBRzh4QyxJQUFNcCtCLFVBQVV2ckIsS0FBS3ZKLE9BQU91SSxPQUFPMUQsT0FBUXVjLE1BQVE4eEMsSUFBSzl4QyxRQUMxRTBULFVBQVV2ckIsS0FBS3ZKLE9BQU91SSxPQUFPNlksT0FBT3dHLGFBQWVybUIsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTTgwQixnQkFBZ0IsQ0FBRWpZLFNBQVVqUCxVQUFVdnJCLEtBQUt2SixPQUFPdUksT0FBTzZZLE9BQU93RyxTQUV6SWtOLFVBQVV2ckIsS0FBS3ZKLE9BQU91SSxPQUFPNlksT0FBT2lzRCxRQUFnRSxJQUF0RHY0QyxVQUFVdnJCLEtBQUt2SixPQUFPdUksT0FBTzZZLE9BQU93RyxPQUFPL2lCLE9BRXpGaXdCLFVBQVV2ckIsS0FBS3ZKLE9BQU91SSxPQUFPNlksT0FBT3dHLE9BQU96WCxLQUFLdEUsY0FBY3VFLGVBR2hFMGtCLFVBQVUrcEQsdUJBQXlCZixvQkFBb0JlLHVCQUF1Qi9wRCxVQUFVdnJCLEtBQUt2SixPQUFPNDlDLHVCQUVwRzlvQixVQUFVZ3FELGVBQWlCLEdBRTNCLElBQUssTUFBT2gvRSxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFReW1CLFVBQVV2ckIsS0FBS3ZKLE9BQU9zQyxNQUMxRGpJLE9BQ0Z5NkIsVUFBVWdxRCxlQUFlempGLEtBQUsxQyxLQUFLb21GLHFCQUFxQmovRSxLQUFPbkgsS0FBS29tRixxQkFBcUJqL0UsS0FBTyxNQXFCcEcsT0FqQkFnMUIsVUFBVWtxRCwrQkFBaUN4dEUsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVlqWCxNQUNsQyxDQUNFa00sT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVOHVDLGdDQUFrQ3B5RCxXQUFXQyxXQUNyRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWXV5RCxPQUNsQyxDQUNFdDlELE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVWdHLFNBQVd2NUIsS0FBS3NHLEtBQUsyRSxLQUN4QnNvQixTQUNULENBRUEsNkJBQU8rcEQsQ0FBd0JqaEMsdUJBQzdCLE1BQU1xaEMsVUFBWSxHQUNaQyxVQUFZLEdBQ2xCLElBQUssTUFBT3AvRSxJQUFLcS9FLFNBQVV0N0UsT0FBT3dLLFFBQVF1dkMsdUJBQ3hDLEdBQUl1aEMsTUFBTTdrRixXQUFZLENBQ3BCLE1BQU04a0YsVUFBWTc5RSxLQUFLQyxLQUFLQyxTQUFTLFVBQVUzQixJQUFJOFQsaUJBQy9DdXJFLE1BQU03bEUsVUFBWTZsRSxNQUFNbjdDLFVBQzFCaTdDLFVBQVU1akYsS0FBSyxHQUFHK2pGLGFBQWFELE1BQU03a0YsY0FFbkM2a0YsTUFBTTdsRSxXQUFhNmxFLE1BQU1uN0MsVUFDM0JrN0MsVUFBVTdqRixLQUFLLEdBQUcrakYsYUFBYUQsTUFBTTdrRixhQUV6QyxDQUVGLElBQUl1a0YsdUJBQXlCLEdBQzdCLE1BQU1RLFNBQVcsSUFBSTk5RSxLQUFLQyxLQUFLQyxTQUFTLGNBUXhDLE9BUEl5OUUsVUFBVXI2RSxTQUFRZzZFLHdCQUEwQkssVUFBVTUyRSxLQUFLLFFBQzNEMjJFLFVBQVVwNkUsUUFBVXE2RSxVQUFVcjZFLFNBQ2hDZzZFLHdCQUEwQixPQUFPSSxVQUFVMzJFLEtBQUsrMkUsY0FFOUNKLFVBQVVwNkUsU0FBV3E2RSxVQUFVcjZFLFNBQ2pDZzZFLHdCQUEwQkksVUFBVTMyRSxLQUFLKzJFLFdBRXBDUixzQkFDVCxDQUVBLGFBQUF6b0QsQ0FBZTUxQixNQUFPNjFCLFVBQ3BCLE1BQU1yMkIsT0FBUzZDLFFBQVFDLE1BQU11ZixhQUFhZ1UsV0FBV3IyQixPQUNyRCxHQUFJQSxPQUFPdUksT0FBUSxDQUNqQjh0QixTQUFTLGlCQUFtQnh5QixPQUFPSixPQUNqQ3pELE9BQU91SSxRQUFVLElBRW5CLElBQUssSUFBSTZZLE1BQVEsRUFBR0EsTUFBUW5kLEtBQUtpRyxLQUFLbEssT0FBT3VJLE9BQU8xRCxPQUFRdWMsUUFDMURpVixTQUFTLGlCQUFpQmpWLGdCQUFrQnZlLFFBQVFDLE1BQU11TyxVQUN4RHBOLEtBQUtpRyxLQUFLbEssT0FBT3VJLE9BQU82WSxPQUFPd0csT0FHckMsQ0FFQXRuQixNQUFNODFCLGNBQWM1MUIsTUFBTzYxQixTQUM3QixFQ3ZTSyxNQUFNaXBELCtCQUErQi9oRSxnQkFDMUMseUJBQVdDLEdBQ1QsT0FBTzNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQ3JEdEwsR0FBSSxrQ0FDSndMLFFBQVMsQ0FBQyxPQUFRLFNBQVUsdUJBQzVCaEwsTUFBT25SLEtBQUtDLEtBQUtDLFNBQVMsaUNBQzFCa2MsU0FBVSxzREFDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1JGLGVBQWUsRUFDZitrRCxRQUFTLENBQUMsa0JBQ1ZydUMsU0FBVSxDQUFDLENBQUVDLGFBQWMsYUFBY0MsYUFBYyxRQUUzRCxDQUVBLFlBQUkrcUQsR0FDRixNQUFPLENBQ0xDLFdBQVksRUFDWkMsa0JBQW1CLEVBQ25CQyxtQkFBb0IsRUFDcEJDLFlBQWEsRUFDYkMsZ0JBQWlCLEVBQ2pCQyxtQkFBb0IsRUFDcEJDLGdCQUFpQixFQUNqQkMscUJBQXNCLEVBQ3RCQyxpQkFBa0IsRUFDbEJDLHVCQUF3QixFQUN4QkMsc0JBQXVCLEVBQ3ZCQyxtQkFBb0IsR0FDcEJDLGtCQUFtQixHQUNuQkMsZUFBZ0IsR0FDaEJDLFlBQWEsR0FFakIsQ0FFQSwwQkFBSUMsR0FDRixNQUFPLENBQ0xDLGVBQWdCLEVBQ2hCQyxZQUFhLEVBQ2JDLGNBQWUsRUFDZkMsY0FBZSxFQUVuQixDQUVBLHFCQUFJQyxHQUNGLE1BQU8sdUJBQ1QsQ0FFQSxvQkFBSUMsR0FDRixNQUFPLHNCQUNULENBRUEsYUFBSUMsR0FDRixNQUFNQyxNQUFROThFLEtBQUtzN0UsU0FDbkIsSUFBSXVCLFVBQVksQ0FDZEMsTUFBTXRCLG1CQTZCUixPQTNCSWwrRSxLQUFLc0csS0FBSzJFLE1BQ1pzMEUsVUFBVXpsRixLQUFLMGxGLE1BQU1yQixvQkFFVSxLQUE3Qno3RSxLQUFLc1IsT0FBT3lyRSxjQUNkRixVQUFVemxGLEtBQUswbEYsTUFBTXBCLGFBRW5CcCtFLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUM1QjIvRSxVQUFVemxGLEtBQUswbEYsTUFBTW5CLGlCQUV2QmtCLFVBQVV6bEYsS0FBSzBsRixNQUFNbEIsb0JBQ2hCdCtFLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLCtCQUM3QjIvRSxVQUFVemxGLEtBQUswbEYsTUFBTWpCLGlCQUV2QmdCLFVBQVlBLFVBQVU5d0UsT0FBTyxDQUMzQit3RSxNQUFNaEIscUJBQ05nQixNQUFNZixpQkFDTmUsTUFBTWQseUJBRUoxK0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBQzVCMi9FLFVBQVV6bEYsS0FBSzBsRixNQUFNYix1QkFFdkJZLFVBQVlBLFVBQVU5d0UsT0FBTyxDQUMzQit3RSxNQUFNWixtQkFDTlksTUFBTVgsa0JBQ05XLE1BQU1WLGVBQ05VLE1BQU1ULGNBRURRLFNBQ1QsQ0FFQSxpQ0FBYUcsR0FDWCxPQUFPLElBQUloaEUsU0FBUSxDQUFDaEIsUUFBUzh6QyxVQUMzQnh4RCxLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNNnpCLG1CQUFtQixDQUFFQyxZQUFhLE9BQVExNEMsS0FBTSxJQUFLa2dELGFBQWEsSUFBUWwzQyxNQUFNNkcsUUFDcEcsTUFBTTh5QixLQUFPLENBQUMsRUFDZCxJQUFLLE1BQU0vNkIsUUFBUWlJLE1BQ2pCOHlCLEtBQUsvNkIsS0FBSy9HLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsSUFBTWhJLEtBRXZDK1UsUUFBUWdtQixLQUFJLEdBQ2IsR0FFTCxDQUVBLDRCQUFNaThDLENBQXdCQyxRQUM1QixPQUFPdDlFLE9BQU93SyxjQUFjcEssS0FBS3NSLE9BQU82ckUsWUFBWTVtRixRQUFPMGlELE9BQVNBLE1BQU0sR0FBR3B6QyxNQUFNcTNFLFVBQVNsNUUsS0FBSWkxQyxPQUFTQSxNQUFNLElBQ2pILENBRUEseUJBQU1ta0MsQ0FBcUJudkUsSUFDekIsYUFBY2pPLEtBQUtzUixPQUFPNnJFLFlBQVlsdkUsTUFBTyxDQUMvQyxDQUVBLHFCQUFNOHBDLENBQWlCalksVUFDckIsTUFBTTV4QixNQUFRNHhCLFNBQVN2cEMsUUFBT3loRCxJQUFvQixpQkFBUEEsS0FDckNxbEMsT0FBU3Y5QyxTQUFTdnBDLFFBQU95aEQsSUFBb0IsaUJBQVBBLEtBQzVDLEdBQUlxbEMsT0FBT3o4RSxPQUFRLENBQ2pCLE1BQU0waEQsYUFBZXRpRCxLQUFLc1IsT0FBTzZyRSxXQUMzQnYvQixRQUFVLEdBQ2hCLElBQUssTUFBTTM2QixTQUFTbzZELFlBQ1csSUFBbEIvNkIsT0FBT3IvQixPQUNoQi9VLE1BQU05VyxLQUFLa3JELE9BQU9yL0IsUUFFbEIyNkIsUUFBUXhtRCxLQUFLNnJCLE9BR2pCLEdBQUkyNkIsUUFBUWg5QyxPQUFRLENBQ2xCLE1BQU1rM0MsSUFBTXg2QyxLQUFLQyxLQUFLeVcsT0FBT3RmLEtBQUtnUyxLQUFLMUcsS0FBS3NSLE9BQU9nc0UsYUFBZSxtQ0FBb0MsQ0FBRXhsQyxJQUFLOTNDLEtBQUtzUixPQUFPZ3NFLGFBQ3pIdjBFLEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS3lXLE9BQU8sMkNBQTRDLENBQUVxcEUsT0FBUXovQixRQUFRdjVDLEtBQUssTUFBT210RCxLQUFNbDBELEtBQUtDLEtBQUtpMEQsS0FBTTFaLE1BQ3pJLENBQ0YsQ0FDQSxPQUFPNXBDLEtBQ1QsQ0FFQSxpQkFBQXF2RSxHQUNFLElBQUssTUFBTTFoRixPQUFPbUUsS0FBS3NSLE9BQU9rc0UsZUFDNUJ4OUUsS0FBS3NSLE9BQU9rc0UsZUFBZTNoRixLQUFPLEVBTXBDLElBQUt5QixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFBK0IsQ0FDNUQsR0FBSThDLEtBQUtzUixPQUFPaXNDLEtBQU8sR0FBSSxDQUN6QixNQUFNMWhELElBQU11RyxLQUFLdUksTUFBTTNLLEtBQUtzUixPQUFPaXNDLElBQU0sSUFDekN2OUMsS0FBS3NSLE9BQU9tc0UsdUJBQXlCLENBQ25DMW1GLElBQUssQ0FDSDBMLE1BQVE1RyxJQUFNLEVBQUksRUFBSSxFQUFJQSxJQUFNLEVBQ2hDZzVCLFFBQVEsR0FFVjZvRCxPQUFRLENBQ05qN0UsTUFBUTVHLElBQU0sRUFBSSxFQUFJdUcsS0FBS3RMLElBQUksRUFBRytFLElBQU0sR0FBSyxFQUM3Q21qQixLQUFNLENBQUMsTUFBTyxNQUFPLE9BQ3JCeGYsT0FBUSxDQUFDLEdBRVh3TSxPQUFRLENBQ052SixNQUFtQixHQUFYNUcsSUFBTSxHQUNkbWpCLEtBQU0sT0FHWixNQUFXaGYsS0FBS3NSLE9BQU9pc0MsS0FBTyxHQUM1QnY5QyxLQUFLc1IsT0FBT21zRSx1QkFBeUIsQ0FDbkMxbUYsSUFBSyxDQUNIMEwsTUFBTyxFQUNQb3lCLFFBQVEsSUFHSDcwQixLQUFLc1IsT0FBT2lzQyxLQUFPLEtBQzVCdjlDLEtBQUtzUixPQUFPbXNFLHVCQUF5QixDQUNuQ0MsT0FBUSxDQUNOajdFLE1BQU8sRUFDUHVjLEtBQU0sQ0FBQyxNQUFPLE9BQ2R4ZixPQUFRLENBQUMsR0FFWHdNLE9BQVEsQ0FDTnZKLE1BQU8sRUFDUHVjLEtBQU0sT0FFUjY0QixNQUFNLFNBRytDLElBQTlDNzNDLEtBQUtzUixPQUFPbXNFLHVCQUF1Qnp4RSxTQUM1Q2hNLEtBQUtzUixPQUFPa3NFLGVBQWV4OUUsS0FBS3NSLE9BQU9tc0UsdUJBQXVCenhFLE9BQU9nVCxPQUFTaGYsS0FBS3NSLE9BQU9tc0UsdUJBQXVCenhFLE9BQU92SixNQUU1SCxDQUNGLENBRUEsYUFBTW11QixHQUNKLE1BQU1DLGdCQUFrQngwQixNQUFNdTBCLFVBUzlCLElBQUkrc0QsTUFDQWhwQyxVQUNBRCxXQVRKN2pCLFVBQVVnRyxTQUFXdjVCLEtBQUtzRyxLQUFLMkUsS0FFL0Jzb0IsVUFBVWlzRCxNQUFROThFLEtBQUtzN0UsU0FFdkJ6cUQsVUFBVStzRCxTQUFVLEVBQ3BCL3NELFVBQVVndEQsY0FBZSxFQU16QixJQUFJQyxjQUFlLEVBRW5CLE9BQVFqdEQsVUFBVXZmLE9BQU95c0UsTUFDdkIsS0FBS2x0RCxVQUFVaXNELE1BQU10QixrQkFDbkIzcUQsVUFBVWluQixJQUFNeDZDLEtBQUtDLEtBQUt5VyxPQUFPdGYsS0FBS2dTLEtBQUttcUIsVUFBVXZmLE9BQU9nc0UsYUFBZSxtQ0FBb0MsQ0FBRXhsQyxJQUFLam5CLFVBQVV2ZixPQUFPZ3NFLGFBQ3ZJenNELFVBQVUrc0QsU0FBVSxFQUNwQixNQUVGLEtBQUsvc0QsVUFBVWlzRCxNQUFNckIsbUJBQ25CLEdBQUluK0UsS0FBS3NHLEtBQUsyRSxLQUFNLENBQ2xCc29CLFVBQVVtdEQsYUFBZWgrRSxLQUFLaTlFLHVCQUF1QixlQUNyRHBzRCxVQUFVb3RELGtCQUFvQmorRSxLQUFLaTlFLHVCQUF1QixvQkFDMURwc0QsVUFBVXF0RCxpQkFBbUJsK0UsS0FBS2k5RSx1QkFBdUIsbUJBQ3pEVSxNQUFROXNELFVBQVVtdEQsT0FBT3QrRSxNQUFLdkosR0FBS0EsRUFBRStJLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsS0FBTzRpQixVQUFVdmYsT0FBT3lyRSxvQkFDN0QsSUFBVlksT0FDVDlzRCxVQUFVdmYsT0FBT3lyRSxhQUFlLEdBQ2hDbHNELFVBQVV2ZixPQUFPcXNFLE1BQVEsSUFFekI5c0QsVUFBVXhqQixrQkFBb0JFLFdBQVdDLFdBQ3ZDbXdFLE1BQU01aEYsT0FBT3NSLFlBQVlqWCxNQUN6QixDQUNFa00sT0FBTyxFQUNQczdELFFBQVN0Z0UsS0FBS3NHLEtBQUsyRSxPQUl6QnNvQixVQUFVelYsVUFBWSxDQUNwQixDQUFDbEwsTUFBTW9MLDBCQUEwQjhoRCxNQUFPLGlCQUN4QyxDQUFDbHRELE1BQU1vTCwwQkFBMEIrNkMsU0FBVSxvQkFDM0MsQ0FBQ25tRCxNQUFNb0wsMEJBQTBCZ1UsVUFBVyxxQkFDNUMsQ0FBQ3BmLE1BQU1vTCwwQkFBMEJDLE9BQVEsbUJBRTNDc1YsVUFBVXN0RCxNQUFRLEdBQ2xCLElBQUssTUFBT3RpRixJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRMVYsS0FBS2dTLE1BQzdDbXFCLFVBQVVzdEQsTUFBTS9tRixLQUFLLENBQ25CNlcsR0FBSXBTLElBQ0p2RixLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBU3BILFNBRzdCeTZCLFVBQVV5ckQsdUJBQXlCdDhFLEtBQUtzOEUsdUJBQ3hDenJELFVBQVV1dEQsc0JBQXdCdnRELFVBQVV5ckQsdUJBQXVCQyxlQUMvRDFyRCxVQUFVdmYsT0FBTytzRSxnQkFDbkJ4dEQsVUFBVXV0RCxzQkFBd0J2dEQsVUFBVXlyRCx1QkFBdUJHLGNBQzFEejhFLEtBQUtzUixPQUFPZ3RFLGdCQUFnQjE5RSxTQUNyQ2l3QixVQUFVdXRELHNCQUF3QnZ0RCxVQUFVeXJELHVCQUF1QkksZUFFckU3ckQsVUFBVXN0RCxNQUFNanlFLEtBQUt0RSxjQUFjdUUsZUFDbkMwa0IsVUFBVTB0RCxjQUFnQmpoRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFDcEQyekIsVUFBVStzRCxTQUFVLENBQ3RCLENBQ0EsTUFFRixLQUFLL3NELFVBQVVpc0QsTUFBTXBCLFlBQ21CLEtBQWxDN3FELFVBQVV2ZixPQUFPeXJFLGVBQ25CbHNELFVBQVVtdEQsYUFBZWgrRSxLQUFLaTlFLHVCQUF1QixlQUNyRHBzRCxVQUFVbXRELE9BQU85eEUsS0FBS3RFLGNBQWN1RSxlQUNMLEtBQTNCMGtCLFVBQVV2ZixPQUFPcXNFLFFBQ25CQSxNQUFROXNELFVBQVVtdEQsT0FBT3QrRSxNQUFLdkosR0FBS0EsRUFBRStJLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsS0FBTzRpQixVQUFVdmYsT0FBT3FzRSxhQUM3RCxJQUFWQSxRQUNUOXNELFVBQVV4akIsa0JBQW9CRSxXQUFXQyxXQUN2Q213RSxNQUFNNWhGLE9BQU9zUixZQUFZalgsTUFDekIsQ0FDRWtNLE9BQU8sRUFDUHM3RCxRQUFTdGdFLEtBQUtzRyxLQUFLMkUsT0FHdkJzb0IsVUFBVStzRCxTQUFVLEtBSTFCLE1BRUYsS0FBSy9zRCxVQUFVaXNELE1BQU1uQixnQkFFbkIsR0FEQTlxRCxVQUFVcXRELGlCQUFtQmwrRSxLQUFLaTlFLHVCQUF1QixtQkFDckIsSUFBaENwc0QsVUFBVXF0RCxXQUFXdDlFLE9BQ3ZCaXdCLFVBQVUrc0QsU0FBVSxPQUdwQixHQURBL3NELFVBQVVxdEQsV0FBV2h5RSxLQUFLdEUsY0FBY3VFLGVBQ0wsS0FBL0Iwa0IsVUFBVXZmLE9BQU9xakMsWUFDbkJBLFVBQVk5akIsVUFBVXF0RCxXQUFXeCtFLE1BQUt2SixHQUFLQSxFQUFFK0ksTUFBTXdDLEtBQUtnd0MsVUFBVXpqQyxLQUFPNGlCLFVBQVV2ZixPQUFPcWpDLGlCQUNqRSxJQUFkQSxXQUEyQixDQUNwQzlqQixVQUFVeGpCLGtCQUFvQkUsV0FBV0MsV0FDdkNtbkMsVUFBVTU0QyxPQUFPc1IsWUFBWWpYLE1BQzdCLENBQ0VrTSxPQUFPLEVBQ1BzN0QsUUFBU3RnRSxLQUFLc0csS0FBSzJFLE9BR3ZCc29CLFVBQVUyckIsWUFBYzdILFVBQVU1NEMsT0FBT3lnRCxZQUN6QyxNQUFNdEQsb0JBQXNCLEdBQzVCLElBQUssTUFBTXNsQyxzQkFBc0I3cEMsVUFBVTU0QyxPQUFPbTlDLG9CQUM1Q3ZFLFVBQVU1NEMsT0FBT205QyxvQkFBb0JzbEMscUJBQ3ZDdGxDLG9CQUFvQjloRCxLQUFLb25GLG9CQUdNLElBQS9CdGxDLG9CQUFvQnQ0QyxPQUN0QlosS0FBS3NSLE9BQU9rdEUsbUJBQXFCLEdBQ08sSUFBL0J0bEMsb0JBQW9CdDRDLFNBQzdCWixLQUFLc1IsT0FBT2t0RSxtQkFBcUJ0bEMsb0JBQW9CLElBRXZEcm9CLFVBQVUydEQsbUJBQXFCdGxDLG9CQUFvQmwxQyxLQUFJNnJCLEdBQUtBLEVBQUU0dUQsc0JBQXFCcDZFLEtBQUssSUFBTS9HLEtBQUtDLEtBQUtDLFNBQVMsV0FBYSxLQUM5SCxNQUFNbW1CLE9BQVMsR0FDZmd4QixVQUFVNTRDLE9BQU80bkIsYUFBZTNqQixLQUFLKzNDLGdCQUFnQnBELFVBQVU1NEMsT0FBTzRuQixRQUN0RSxJQUFLLE1BQU0xYixTQUFTMHNDLFVBQVU1NEMsT0FBTzRuQixPQUNuQ0EsT0FBT3ZzQixLQUFLNlEsTUFBTTNSLE1BRXBCdTZCLFVBQVVsTixPQUFTQSxPQUFPdGYsS0FBSyxNQUMvQndzQixVQUFVNnRELDJCQUE2Qm54RSxXQUFXQyxXQUNoRG1uQyxVQUFVNTRDLE9BQU8yaUYscUJBQ2pCLENBQ0VwOEUsT0FBTyxFQUNQczdELFFBQVN0Z0UsS0FBS3NHLEtBQUsyRSxPQUd2QnNvQixVQUFVOHRELHNCQUF3QnB4RSxXQUFXQyxXQUMzQ21uQyxVQUFVNTRDLE9BQU80aUYsZ0JBQ2pCLENBQ0VyOEUsT0FBTyxFQUNQczdELFFBQVN0Z0UsS0FBS3NHLEtBQUsyRSxPQUd2QnNvQixVQUFVK3NELFNBQVUsQ0FDdEIsQ0FHSixNQUVGLEtBQUsvc0QsVUFBVWlzRCxNQUFNbEIsbUJBR25CLEdBRkEvcUQsVUFBVXlyRCx1QkFBeUJ0OEUsS0FBS3M4RSx1QkFDeEN6ckQsVUFBVXV0RCxzQkFBd0J2dEQsVUFBVXlyRCx1QkFBdUJFLFlBQ3BDLEtBQTNCM3JELFVBQVV2ZixPQUFPcXNFLFFBQ25CQSxZQUFjMzlFLEtBQUtvOUUsb0JBQW9CcDlFLEtBQUtzUixPQUFPcXNFLFlBQzlCLElBQVZBLE9BQXVCLENBeURoQyxHQXhESUEsTUFBTTVoRixPQUFPMm5CLGdCQUFnQnVkLE9BQU9FLFNBQVduaEMsS0FBS3NSLE9BQU8rc0UsZ0JBQzdEeHRELFVBQVV1dEQsc0JBQXdCdnRELFVBQVV5ckQsdUJBQXVCRyxjQUMxRHo4RSxLQUFLc1IsT0FBT2d0RSxnQkFBZ0IxOUUsU0FDckNpd0IsVUFBVXV0RCxzQkFBd0J2dEQsVUFBVXlyRCx1QkFBdUJJLGVBRXJFN3JELFVBQVU4c0QsTUFBUSxDQUNoQmw3RSxNQUFPLEVBQ1B3K0IsT0FBUTA4QyxNQUFNNWhGLE9BQU8ybkIsZ0JBQWdCdWQsT0FBTzdxQyxNQUM1Q3N0QixnQkFBaUIsQ0FDZixDQUNFN25CLElBQUssTUFDTHNGLEtBQU13OEUsTUFBTTVoRixPQUFPMm5CLGdCQUFnQnZNLE1BQU0zZ0IsSUFDekM2RyxNQUFPLG1CQUVULENBQ0V4QixJQUFLLE1BQ0xzRixLQUFNdzhFLE1BQU01aEYsT0FBTzJuQixnQkFBZ0J2TSxNQUFNMWdCLElBQ3pDNEcsTUFBTyx1QkFFVCxDQUNFeEIsSUFBSyxNQUNMc0YsS0FBTXc4RSxNQUFNNWhGLE9BQU8ybkIsZ0JBQWdCdk0sTUFBTXpnQixJQUN6QzJHLE1BQU8sZUFFVCxDQUNFeEIsSUFBSyxNQUNMc0YsS0FBTXc4RSxNQUFNNWhGLE9BQU8ybkIsZ0JBQWdCdk0sTUFBTXhnQixJQUN6QzBHLE1BQU8sb0JBRVQsQ0FDRXhCLElBQUssTUFDTHNGLEtBQU13OEUsTUFBTTVoRixPQUFPMm5CLGdCQUFnQnZNLE1BQU12Z0IsSUFDekN5RyxNQUFPLHFCQUVULENBQ0V4QixJQUFLLE1BQ0xzRixLQUFNdzhFLE1BQU01aEYsT0FBTzJuQixnQkFBZ0J2TSxNQUFNdGdCLElBQ3pDd0csTUFBTyx1QkFFVCxDQUNFeEIsSUFBSyxNQUNMc0YsS0FBTXc4RSxNQUFNNWhGLE9BQU8ybkIsZ0JBQWdCdk0sTUFBTXJnQixJQUN6Q3VHLE1BQU8sZ0JBRVQsQ0FDRXhCLElBQUssTUFDTHNGLEtBQU13OEUsTUFBTTVoRixPQUFPMm5CLGdCQUFnQnZNLE1BQU1wZ0IsSUFDekNzRyxNQUFPLHFCQUdYdzZDLEtBQU0sQ0FDSjEyQyxLQUFNdzhFLE1BQU01aEYsT0FBTzJuQixnQkFBZ0J2TSxNQUFNMGdDLEtBQ3pDeDZDLE1BQU8sY0FHWHd6QixVQUFVcW9CLG9CQUFzQixHQUNHLEtBQS9Ccm9CLFVBQVV2ZixPQUFPcWpDLFlBQ25CQSxnQkFBa0IzMEMsS0FBS285RSxvQkFBb0JwOUUsS0FBS3NSLE9BQU9xakMsZ0JBQzlCLElBQWRBLFdBQTJCLENBQ3BDLElBQUssTUFBTTZwQyxzQkFBc0I3cEMsVUFBVTU0QyxPQUFPbTlDLG9CQUM1Q3ZFLFVBQVU1NEMsT0FBT205QyxvQkFBb0JzbEMscUJBQ3ZDM3RELFVBQVVxb0Isb0JBQW9COWhELEtBQUssQ0FDakN5RSxJQUFLMmlGLG1CQUNMbG9GLEtBQU1nSCxLQUFLQyxLQUFLeVcsT0FBTzZjLFVBQVU4c0QsTUFBTWo2RCxnQkFBZ0Joa0IsTUFBS213QixHQUFLQSxFQUFFaDBCLE1BQVEyaUYsc0JBQXFCbmhGLE9BQVMsYUFJL0d3ekIsVUFBVXFvQixvQkFBb0JodEMsS0FBS3RFLGNBQWN1RSxlQUNWLEtBQW5Dbk0sS0FBS3NSLE9BQU9rdEUsb0JBQ1Y3cEMsVUFBVTU0QyxPQUFPczlDLDJCQUEyQmxZLFVBQzlDdFEsVUFBVThzRCxNQUFNajZELGdCQUFnQmhrQixNQUFLbXdCLEdBQUtBLEVBQUVoMEIsTUFBUW1FLEtBQUtzUixPQUFPa3RFLHFCQUFvQnI5RSxLQUFPd3pDLFVBQVU1NEMsT0FBT3M5QywyQkFBMkJqakQsTUFHN0ksQ0FFRixJQUFJd29GLFNBQVUsRUFDZCxJQUFLLE1BQU0vaUYsT0FBT2cxQixVQUFVdmYsT0FBT3V0RSxZQUNTLEtBQXRDaHVELFVBQVV2ZixPQUFPdXRFLFlBQVloakYsS0FDbkIsU0FBUkEsTUFDRmcxQixVQUFVOHNELE1BQU1sN0UsT0FBU3dCLFNBQVM0c0IsVUFBVXZmLE9BQU91dEUsWUFBWWhqRixLQUFNLEtBR3ZFK2lGLFNBQVUsRUFHVjUrRSxLQUFLc1IsT0FBT2t0RSxxQkFDZDN0RCxVQUFVMnRELG1CQUFxQngrRSxLQUFLc1IsT0FBT2t0RSxtQkFBbUJDLHNCQUUzREcsU0FBVzUrRSxLQUFLc1IsT0FBT2lzQyxLQUFPLEtBQzdCLENBQUMxc0IsVUFBVXlyRCx1QkFBdUJFLFlBQWEzckQsVUFBVXlyRCx1QkFBdUJJLGVBQWUxNUUsU0FBUzZ0QixVQUFVdXRELHdCQUUzR3Z0RCxVQUFVOHNELE1BQU1sN0UsTUFBTXNQLGFBQWU4ZSxVQUFVOHNELE1BQU0xOEMsT0FBT2x2QixjQURyRThlLFVBQVUrc0QsU0FBVSxFQUsxQixDQUVGLE1BRUYsS0FBSy9zRCxVQUFVaXNELE1BQU1qQixnQkFDbkJockQsVUFBVWl1RCwyQkFBNkJ4aEYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQ2pFMnpCLFVBQVUrc0QsU0FBVSxFQUNwQi9zRCxVQUFVb1EsT0FBUyxDQUFDLEVBQ3BCLElBQUssTUFBTXBsQyxPQUFPbUUsS0FBS3NSLE9BQU9rc0UsZUFDNUIzc0QsVUFBVW9RLE9BQU9wbEMsS0FBTyxDQUN0QnpGLE1BQU82TixTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixLQUFNLElBQU1vSSxTQUFTakUsS0FBS3NSLE9BQU9rc0UsZUFBZTNoRixLQUFNLElBQzlGcUgsSUFBbUQsRUFBN0NlLFNBQVNqRSxLQUFLc1IsT0FBT3V0RSxZQUFZaGpGLEtBQU0sSUFDN0N3QixNQUFPdUssY0FBYzRiLHVCQUF1QjNuQixLQUFLd0IsT0FNckQsUUFIc0QsSUFBM0MyQyxLQUFLc1IsT0FBT21zRSx1QkFBdUIxbUYsS0FBd0JpSixLQUFLc1IsT0FBT21zRSx1QkFBdUIxbUYsSUFBSTg5QixTQUMzR2hFLFVBQVUrc0QsU0FBVSxRQUVtQyxJQUE5QzU5RSxLQUFLc1IsT0FBT21zRSx1QkFBdUJDLE9BQXdCLENBQ3BFN3NELFVBQVVrdUQsWUFBYyxFQUN4QixJQUFLLE1BQU1sakYsT0FBT21FLEtBQUtzUixPQUFPbXNFLHVCQUF1QkMsT0FBTzErRCxLQUMxRDZSLFVBQVVrdUQsWUFBY2x1RCxVQUFVa3VELFlBQWM5NkUsU0FBU2pFLEtBQUtzUixPQUFPa3NFLGVBQWUzaEYsS0FBTSxJQUU1RmcxQixVQUFVbXVELFdBQWFoL0UsS0FBS3NSLE9BQU9tc0UsdUJBQXVCQyxPQUFPMStELEtBQUtoYixLQUFJaTdFLEdBQUszaEYsS0FBS0MsS0FBS0MsU0FBUyxVQUFZeWhGLEVBQUV0dkUsaUJBQWdCdEwsS0FBSyxNQUFNcUwsUUFBUSxlQUFnQixLQUFPcFMsS0FBS0MsS0FBS0MsU0FBUyxXQUFhLE9BQU9rUyxRQUFRLG9CQUFxQixRQUMxT21oQixVQUFVa3VELGNBQWdCLytFLEtBQUtzUixPQUFPbXNFLHVCQUF1QkMsT0FBT2o3RSxRQUN0RW91QixVQUFVK3NELFNBQVUsRUFFeEIsTUFDeUQsSUFBOUM1OUUsS0FBS3NSLE9BQU9tc0UsdUJBQXVCenhFLFNBQzVDNmtCLFVBQVVxdUQsV0FBYTVoRixLQUFLQyxLQUFLQyxTQUFTLFVBQVl3QyxLQUFLc1IsT0FBT21zRSx1QkFBdUJ6eEUsT0FBT2dULEtBQUtyUCxxQkFFaEQsSUFBNUMzUCxLQUFLc1IsT0FBT21zRSx1QkFBdUI1bEMsT0FDNUNobkIsVUFBVXN1RCxVQUFZLzhFLEtBQUthLElBQUlqRCxLQUFLc1IsT0FBT3V0RSxZQUFZaG5DLEtBQU03M0MsS0FBS3NSLE9BQU9rc0UsZUFBZTNsQyxNQUNoRCxJQUFwQzczQyxLQUFLc1IsT0FBT2tzRSxlQUFlM2xDLE9BQzdCaG5CLFVBQVUrc0QsU0FBVSxJQUd4QixNQUVGLEtBQUsvc0QsVUFBVWlzRCxNQUFNaEIscUJBQ25CanJELFVBQVVvUSxPQUFTLENBQUMsRUFDcEIsSUFBSyxNQUFNcGxDLE9BQU9tRSxLQUFLc1IsT0FBT2tzRSxlQUM1QjNzRCxVQUFVb1EsT0FBT3BsQyxLQUFPLENBQ3RCekYsTUFBTzZOLFNBQVNqRSxLQUFLc1IsT0FBT3V0RSxZQUFZaGpGLEtBQU0sSUFBTW9JLFNBQVNqRSxLQUFLc1IsT0FBT2tzRSxlQUFlM2hGLEtBQU0sSUFDOUZpMkQsT0FBUSxHQUNSd1YsT0FBUSxJQUNSanFFLE1BQU91SyxjQUFjNGIsdUJBQXVCM25CLEtBQUt3QixPQUdyRHd6QixVQUFVb1EsT0FBTzlrQyxHQUFLLENBQ3BCL0YsTUFBT3U1QixTQUFTdXRCLHNCQUFzQnJzQixVQUFVb1EsUUFDaEQ2d0IsT0FBUSxHQUNSd1YsT0FBUSxHQUNSanFFLE1BQU8scUJBRUx2QixNQUFNKzBCLFVBQVVvUSxPQUFPOWtDLEdBQUcvRixRQUFVOEYsT0FBTzIwQixVQUFVb1EsT0FBTzlrQyxHQUFHL0YsUUFBVSxLQUMzRXk2QixVQUFVb1EsT0FBTzlrQyxHQUFHMjFELE9BQVMsS0FFL0JqaEMsVUFBVW9RLE9BQU9tSyxNQUFRLENBQ3ZCaDFDLE1BQU91NUIsU0FBU3l0Qix5QkFBeUJ2c0IsVUFBVW9RLFFBQ25ENndCLE9BQVEsR0FDUndWLE9BQVEsR0FDUmpxRSxNQUFPLGNBRUxuQixPQUFPMjBCLFVBQVVvUSxPQUFPbUssTUFBTWgxQyxRQUFVLElBQzFDeTZCLFVBQVVvUSxPQUFPbUssTUFBTTBtQixPQUFTLEtBRWxDamhDLFVBQVVvUSxPQUFPZ1IsR0FBSyxDQUNwQjc3QyxNQUFPdTVCLFNBQVNtckIsc0JBQXNCanFCLFVBQVVvUSxPQUFRLGFBQ3hENndCLE9BQVEsR0FDUndWLE9BQVEsR0FDUmpxRSxNQUFPLGtCQUVUd3pCLFVBQVVvUSxPQUFPZ1IsR0FBRzZmLE9BQVNqaEMsVUFBVW9RLE9BQU9nUixHQUFHNzdDLE1BQVEsSUFDekR5NkIsVUFBVW9RLE9BQU9vUixHQUFLLENBQ3BCajhDLE1BQU91NUIsU0FBU3NyQixzQkFBc0JwcUIsVUFBVW9RLFFBQ2hENndCLE9BQVEsR0FDUndWLE9BQVEsR0FDUmpxRSxNQUFPLG9CQUVUd3pCLFVBQVVvUSxPQUFPb1IsR0FBR3lmLE9BQVNqaEMsVUFBVW9RLE9BQU9vUixHQUFHajhDLE1BQVEsSUFDekR5NkIsVUFBVW9RLE9BQU9sWCxJQUFNLENBQ3JCM3pCLE1BQU95NkIsVUFBVW9RLE9BQU9ucUMsSUFBSVYsTUFDNUIwN0QsT0FBUSxHQUNSd1YsT0FBUSxNQUNSanFFLE1BQU8sZUFFVHd6QixVQUFVb1EsT0FBT3VLLElBQU0sQ0FDckJwMUMsTUFBT3U1QixTQUFTMnRCLHVCQUF1QnpzQixVQUFVb1EsT0FBUSxZQUFhamhDLEtBQUtzUixPQUFPaXNDLEtBQ2xGdVUsT0FBUSxHQUNSd1YsT0FBUSxHQUNSanFFLE1BQU8saUJBRVR3ekIsVUFBVStzRCxTQUFVLEVBQ3BCLE1BRUYsS0FBSy9zRCxVQUFVaXNELE1BQU1mLGlCQUduQixHQUZBbHJELFVBQVVvdEQsa0JBQW9CaitFLEtBQUtpOUUsdUJBQXVCLG9CQUMxRHBzRCxVQUFVb3RELFlBQVkveEUsS0FBS3RFLGNBQWN1RSxlQUNMLEtBQWhDMGtCLFVBQVV2ZixPQUFPb2pDLGFBQ25CQSxXQUFhN2pCLFVBQVVvdEQsWUFBWXYrRSxNQUFLdkosR0FBS0EsRUFBRStJLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsS0FBTzRpQixVQUFVdmYsT0FBT29qQyxrQkFDbEUsSUFBZkEsWUFBNEIsQ0FDckM3akIsVUFBVXhqQixrQkFBb0JFLFdBQVdDLFdBQ3ZDa25DLFdBQVczNEMsT0FBT3NSLFlBQVlqWCxNQUM5QixDQUNFa00sT0FBTyxFQUNQczdELFFBQVN0Z0UsS0FBS3NHLEtBQUsyRSxPQUd2QnNvQixVQUFVK3BELHVCQUF5QmYsb0JBQW9CZSx1QkFBdUJsbUMsV0FBVzM0QyxPQUFPNDlDLHVCQUNoRzlvQixVQUFVMG9CLGFBQWU3RSxXQUFXMzRDLE9BQU93OUMsYUFDM0Mxb0IsVUFBVTRqQixTQUFXQyxXQUFXMzRDLE9BQU8wNEMsU0FDdkM1akIsVUFBVXV1RCxhQUFlMXFDLFdBQVczNEMsT0FBT3FqRixhQUMzQ3Z1RCxVQUFVbE4sYUFBZTNqQixLQUFLKzNDLGdCQUFnQnJELFdBQVczNEMsT0FBTzRuQixRQUNoRWtOLFVBQVV2c0IsT0FBUyxDQUFDLEVBQ3BCLElBQUssSUFBSTZZLE1BQVEsRUFBR0EsTUFBUXUzQixXQUFXMzRDLE9BQU91SSxPQUFPMUQsT0FBUXVjLFFBQzNEMFQsVUFBVXZzQixPQUFPNlksT0FBUyxDQUN4QjdkLFFBQVNvMUMsV0FBVzM0QyxPQUFPdUksT0FBTzZZLE9BQU83ZCxRQUN6Q3FrQixPQUFRLElBRVZrTixVQUFVdnNCLE9BQU82WSxPQUFPd0csYUFBZTNqQixLQUFLKzNDLGdCQUFnQnJELFdBQVczNEMsT0FBT3VJLE9BQU82WSxPQUFPd0csUUFFOUZrTixVQUFVb1EsT0FBUyxFQUNuQixNQUFNM2hDLFFBQVUsR0FDaEIsSUFBSyxNQUFPekQsSUFBS3EvRSxTQUFVdDdFLE9BQU93SyxRQUFRc3FDLFdBQVczNEMsT0FBTzQ5Qyx1QkFDdER1aEMsTUFBTTdsRSxXQUNKNmxFLE1BQU1uN0MsU0FDUnpnQyxRQUFRbEksS0FBSzhqRixNQUFNN2tGLFlBQWM0TixTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixLQUFNLElBQU1vSSxTQUFTakUsS0FBS3NSLE9BQU9rc0UsZUFBZTNoRixLQUFNLE1BRXhIZzFCLFVBQVVvUSxRQUFVaTZDLE1BQU03a0YsWUFBYzROLFNBQVNqRSxLQUFLc1IsT0FBT3V0RSxZQUFZaGpGLEtBQU0sSUFBTW9JLFNBQVNqRSxLQUFLc1IsT0FBT2tzRSxlQUFlM2hGLEtBQU0sTUFJakl5RCxRQUFRc0IsT0FBUyxJQUNuQml3QixVQUFVb1EsUUFBVTcrQixLQUFLYSxPQUFPM0QsVUFFbEN1eEIsVUFBVStzRCxTQUFVLENBQ3RCLENBRUYsTUFFRixLQUFLL3NELFVBQVVpc0QsTUFBTVgsa0JBQ25CdHJELFVBQVVxN0MsY0FBcUUsSUFBbERsc0UsS0FBS3NSLE9BQU8rdEUsV0FBV3IvRSxLQUFLNDhFLGtCQUNyRC9yRCxVQUFVcTdDLFNBQ1pyN0MsVUFBVXl1RCxhQUFldC9FLEtBQUtzUixPQUFPK3RFLFdBQVdyL0UsS0FBSzQ4RSxrQkFBa0IzMkUsS0FBSzNQLEtBRTVFdTZCLFVBQVV5dUQsYUFBZSxHQUUzQnp1RCxVQUFVK3NELFNBQVUsRUFDcEIsTUFFRixLQUFLL3NELFVBQVVpc0QsTUFBTWQsdUJBQ25CbnJELFVBQVV4VixRQUFVLEVBQ3BCd1YsVUFBVXhiLFNBQVcsRUFDckJ3YixVQUFVd3VELFdBQWEsR0FDdkIsSUFBSyxNQUFNeGpGLE9BQU9tRSxLQUFLc1IsT0FBTyt0RSxXQUFZLENBQ3hDLElBQUl0bUUsTUFBUSxRQUNaLE1BQU13bUUsS0FBTzF1RCxVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBSzMrRSxPQUM3QzQrRSxXQUFhM3VELFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBS3FELE1BQU1zZ0YsV0FDdERBLFlBQ0YzdUQsVUFBVXd1RCxXQUFXam9GLEtBQUssQ0FDeEJ5RSxJQUNBc2hCLE9BQVEsRUFDUjdtQixLQUFNdTZCLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBS29LLEtBQUszUCxLQUM1Q3lpQixNQUNBMEIsUUFBUSxFQUNSZ2xFLGdCQUFnQixFQUNoQkQsWUFBWSxFQUNaRSxZQUFZLElBR2hCLElBQUssSUFBSXZpRSxNQUFRLEVBQUdBLE1BQVFvaUUsS0FBTXBpRSxRQUFTLENBQ3pDLElBQUl1aUUsWUFBYSxFQUNiN3VELFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU93aUUscUJBQy9DNW1FLE1BQVEsVUFDSnltRSxhQUNGRSxZQUFhLEdBRWY3dUQsVUFBVXhWLFlBQ2tFLElBQW5Fd1YsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBT3lpRSxtQkFDdEQ3bUUsTUFBUThYLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU95aUUsa0JBQ2pESixhQUNGRSxZQUFhLElBR2YzbUUsTUFBUSxRQUVWLElBQUkwQixPQUFTb1csVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBTzBpRSxpQkFDdERILGFBQ0ZqbEUsUUFBUyxHQUVYLElBQUl4VCxlQUFpQjRwQixVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUtvSyxLQUFLbEssT0FBT2tMLGVBQzlESCxVQUFZK3BCLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBS29LLEtBQUtsSyxPQUFPK0ssVUFDekRnNUUsUUFBUyxFQUNUQyxZQUFhLEVBQ29ELGlCQUExRGx2RCxVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPOUgsVUFDdER5cUUsUUFBUyxFQUNUaDVFLFVBQVkrcEIsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBTzlILFdBQ1UsSUFBMUR3YixVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPOUgsV0FDdER5cUUsUUFBUyxFQUNUNzRFLGVBQWlCNHBCLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU85SCxTQUFTdFosT0FBT2tMLGVBQzlFSCxVQUFZK3BCLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU85SCxTQUFTdFosT0FBTytLLFlBRXZFMlQsUUFBV2lsRSxZQUFjSSxTQUMzQmp2RCxVQUFVeGIsV0FFWixJQUFJL2UsS0FBT3U2QixVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUtvSyxLQUFLM1AsTUFDN0N1RixNQUFRbUUsS0FBSzQ4RSxtQkFFTDhDLFlBQWNJLFVBRHhCeHBGLEtBQU8yUSxlQUFpQixLQUFPSCxVQUFZLE1BSXhDNDRFLFlBQWNJLFNBQ2pCQyxZQUFjbHZELFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU82aUUsaUJBRTdEbnZELFVBQVV3dUQsV0FBV2pvRixLQUFLLENBQ3hCeUUsSUFDQXNoQixNQUNBN21CLEtBQ0F5aUIsTUFBT0EsTUFBTWhILFdBQ2IwSSxPQUNBZ2xFLGVBQWdCNXVELFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU9zaUUsZUFDN0RELFlBQVksRUFDWkUsV0FDQUksT0FDQUMsV0FDQTk0RSxlQUNBSCxXQUVKLENBQ0YsQ0FDQStwQixVQUFVNXRCLEtBQU9nQixTQUFTNHNCLFVBQVV4VixRQUFTLEtBQU8sSUFBTXBYLFNBQVM0c0IsVUFBVXZmLE9BQU9takMsU0FBVSxLQUFPLEdBQUs3MEMsT0FBT0osT0FBT3F4QixVQUFVdmYsT0FBTzJ1RSxrQkFBa0JqMEUsUUFBTyxDQUFDN1YsRUFBR3dKLElBQU14SixHQUFLOE4sU0FBU3RFLEVBQUcsS0FBTyxJQUFJLEdBQ3hNa3hCLFVBQVV3dUQsV0FBV256RSxLQUFLdEUsY0FBY3VFLGVBQ3BDMGtCLFVBQVV4YixXQUFhd2IsVUFBVTV0QixNQUNuQzR0QixVQUFVK3NELFNBQVUsR0FFdEIsTUFFRixLQUFLL3NELFVBQVVpc0QsTUFBTWIsc0JBQ25CcHJELFVBQVU1dEIsSUFBTSxFQUNoQjR0QixVQUFVeGIsU0FBVyxFQUNyQndiLFVBQVV3dUQsV0FBYSxHQUN2QixJQUFLLE1BQU14akYsT0FBT21FLEtBQUtzUixPQUFPK3RFLFdBQVksQ0FDeEMsSUFBSXRtRSxNQUFRLFFBQ1osTUFBTXdtRSxLQUFPMXVELFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLMytFLE9BQzdDNCtFLFdBQWEzdUQsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLcUQsTUFBTXNnRixXQUN0REEsWUFDRjN1RCxVQUFVd3VELFdBQVdqb0YsS0FBSyxDQUN4QnlFLElBQ0FzaEIsT0FBUSxFQUNSN21CLEtBQU11NkIsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLb0ssS0FBSzNQLEtBQzVDeWlCLE1BQ0EwQixRQUFRLEVBQ1JnbEUsZ0JBQWdCLEVBQ2hCRCxZQUFZLEVBQ1pFLFlBQVksSUFHaEIsSUFBSyxJQUFJdmlFLE1BQVEsRUFBR0EsTUFBUW9pRSxLQUFNcGlFLFFBQVMsQ0FDekMsSUFBSXVpRSxZQUFhLEVBQ2I3dUQsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBTytpRSxvQkFDL0NubkUsTUFBUSxVQUNKeW1FLGFBQ0ZFLFlBQWEsR0FFZjd1RCxVQUFVNXRCLE9BRVY4VixNQUFRLFFBRVYsSUFBSTBCLE9BQVNvVyxVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPNmlFLGdCQUN0RE4sYUFDRmpsRSxRQUFTLEdBRVgsSUFBSXhULGVBQWlCNHBCLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBS29LLEtBQUtsSyxPQUFPa0wsZUFDOURILFVBQVkrcEIsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLb0ssS0FBS2xLLE9BQU8rSyxVQUN6RGc1RSxRQUFTLEVBQ1RDLFlBQWEsRUFDb0QsaUJBQTFEbHZELFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU85SCxVQUN0RHlxRSxRQUFTLEVBQ1RoNUUsVUFBWStwQixVQUFVdmYsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPOUgsV0FDVSxJQUExRHdiLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU85SCxXQUN0RHlxRSxRQUFTLEVBQ1Q3NEUsZUFBaUI0cEIsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBTzlILFNBQVN0WixPQUFPa0wsZUFDOUVILFVBQVkrcEIsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBTzlILFNBQVN0WixPQUFPK0ssWUFFdkUyVCxRQUFXaWxFLFlBQWNJLFNBQzNCanZELFVBQVV4YixXQUVaLElBQUkvZSxLQUFPdTZCLFVBQVV2ZixPQUFPK3RFLFdBQVd4akYsS0FBS29LLEtBQUszUCxNQUM3Q3VGLE1BQVFtRSxLQUFLNDhFLG1CQUVMOEMsWUFBY0ksVUFEeEJ4cEYsS0FBTzJRLGVBQWlCLEtBQU9ILFVBQVksTUFJeEM0NEUsWUFBY0ksU0FDakJDLFlBQWNsdkQsVUFBVXZmLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBTzBpRSxrQkFFN0RodkQsVUFBVXd1RCxXQUFXam9GLEtBQUssQ0FDeEJ5RSxJQUNBc2hCLE1BQ0E3bUIsS0FDQXlpQixNQUFPQSxNQUFNaEgsV0FDYjBJLE9BQ0FnbEUsZ0JBQWdCLEVBQ2hCRCxZQUFZLEVBQ1pFLFdBQ0FJLE9BQ0FDLFdBQ0E5NEUsZUFDQUgsV0FFSixDQUNGLENBQ0ErcEIsVUFBVXd1RCxXQUFXbnpFLEtBQUt0RSxjQUFjdUUsZUFDcEMwa0IsVUFBVXhiLFdBQWF3YixVQUFVNXRCLE1BQ25DNHRCLFVBQVUrc0QsU0FBVSxHQUV0QixNQUVGLEtBQUsvc0QsVUFBVWlzRCxNQUFNWixtQkFxQm5CLEdBcEJBcnJELFVBQVVsTixPQUFTLEdBQ25Ca04sVUFBVXN2RCxtQkFBcUJuZ0YsS0FBS3NSLE9BQU9pb0MsYUFBYXQyQyxJQUFNLEdBQzlENHRCLFVBQVU0akIsU0FBVyxDQUNuQjN6QyxNQUFPLEVBQ1AyQixNQUFPLEdBQUt3QixTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWWhvRixJQUFLLElBQU1vTixTQUFTakUsS0FBS3NSLE9BQU9rc0UsZUFBZTNtRixJQUFLLEtBQ2pHdXBGLFVBQVcsR0FFYnZ2RCxVQUFVNmpCLFdBQWEsQ0FDckI1ekMsTUFBTyxFQUNQMkIsTUFBTyxFQUNQMjlFLFVBQVcsR0FFYnZ2RCxVQUFVOGpCLFVBQVksQ0FDcEI3ekMsTUFBTyxFQUNQMkIsTUFBTyxFQUNQMjlFLFVBQVcsR0FFa0IsS0FBM0J2dkQsVUFBVXZmLE9BQU9xc0UsUUFDbkJHLG9CQUFzQjk5RSxLQUFLbzlFLG9CQUFvQnZzRCxVQUFVdmYsT0FBT3FzRSxRQUFRNWhGLE9BQU91OEMsU0FBUzk0QyxPQUFPb0IsT0FBUyxHQUV0RSxLQUFoQ2l3QixVQUFVdmYsT0FBT29qQyxhQUNuQkEsaUJBQW1CMTBDLEtBQUtvOUUsb0JBQW9CcDlFLEtBQUtzUixPQUFPb2pDLFlBQ3BEQSxZQUFZLENBQ2QsTUFBTXAxQyxRQUFVLEdBQ2hCLElBQUssTUFBT3pELElBQUtxL0UsU0FBVXQ3RSxPQUFPd0ssUUFBUXNxQyxXQUFXMzRDLE9BQU80OUMsdUJBQ3REdWhDLE1BQU03bEUsV0FDSjZsRSxNQUFNbjdDLFNBQ1J6Z0MsUUFBUWxJLEtBQUs4akYsTUFBTTdrRixZQUFjNE4sU0FBU2pFLEtBQUtzUixPQUFPdXRFLFlBQVloakYsS0FBTSxJQUFNb0ksU0FBU2pFLEtBQUtzUixPQUFPa3NFLGVBQWUzaEYsS0FBTSxNQUV4SGcxQixVQUFVNmpCLFdBQVdqeUMsT0FBU3k0RSxNQUFNN2tGLFlBQWM0TixTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixLQUFNLElBQU1vSSxTQUFTakUsS0FBS3NSLE9BQU9rc0UsZUFBZTNoRixLQUFNLE1BSTNJeUQsUUFBUXNCLE9BQVMsSUFDbkJpd0IsVUFBVTZqQixXQUFXanlDLE9BQVNMLEtBQUthLE9BQU8zRCxTQUU5QyxDQUVGLEdBQThCLEtBQTFCVSxLQUFLc1IsT0FBT3FqQyxVQUFrQixDQUNoQyxNQUFNQSxnQkFBa0JyM0MsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTUMsVUFBVWxqQixLQUFLc1IsT0FBT3FqQyxXQUMzQyxJQUFyQkEsVUFBVS96QyxTQUNaaXdCLFVBQVU4akIsVUFBVWx5QyxNQUFRa3lDLFVBQVUsR0FBRzU0QyxPQUFPeWdELFlBRXBELENBQ0EsR0FBSTU4QyxPQUFPbUUsS0FBSy9ELEtBQUtzUixPQUFPK3RFLFlBQVl6K0UsT0FBUyxFQUFHLENBQ2xELElBQUssTUFBTS9FLE9BQU9tRSxLQUFLc1IsT0FBTyt0RSxXQUFZLENBQ3hDLE1BQU1wM0UsTUFBUWpJLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FDckMsSUFBSyxJQUFJc2hCLE1BQVEsRUFBRzJ2RCxHQUFLN2tFLE1BQU1zM0UsS0FBSzMrRSxPQUFRdWMsTUFBUTJ2RCxHQUFJM3ZELFFBQVMsQ0FDL0QsTUFBTXltQyxJQUFNMzdDLE1BQU1zM0UsS0FBS3BpRSxPQUN2QixJQUFLbFYsTUFBTS9JLE1BQU1zZ0YsYUFBK0IsSUFBakI1N0IsSUFBSXZ1QyxTQUFvQixDQUNyRCxJQUFJcFAsS0FBT3JILFFBQVFDLE1BQU11TyxVQUFVbkYsTUFBTWhDLE9BQ3BCLElBQWpCMjlDLElBQUl2dUMsVUFBOEMsaUJBQWpCdXVDLElBQUl2dUMsV0FDdkNwUCxLQUFPckgsUUFBUUMsTUFBTXVPLFVBQVV3MkMsSUFBSXZ1QyxXQUVyQyxJQUFJL0ssS0FBT3JFLEtBQUtsSyxPQUFPdU8sS0FDdkIsSUFBS3BPLE9BQU91dkQsVUFBVW5oRCxNQUNwQixJQUFLLE1BQU16TyxPQUFPbUUsS0FBS3NSLE9BQU91dEUsWUFBYSxDQUN6QyxNQUFNblAsTUFBUSxJQUFJL25FLE9BQU8sSUFBTTlMLElBQUssS0FDcEN5TyxLQUFPQSxLQUFLb0YsUUFBUWdnRSxNQUFPenJFLFNBQVNqRSxLQUFLc1IsT0FBT3V0RSxZQUFZaGpGLEtBQU0sSUFBTW9JLFNBQVNqRSxLQUFLc1IsT0FBT2tzRSxlQUFlM2hGLEtBQU0sSUFDcEgsQ0FFR0ssT0FBT3V2RCxVQUFVbmhELFFBQ3BCQSxLQUFPbEksS0FBS3VJLE1BQU0sSUFBSTdJLEtBQUt3SSxNQUFNTSxTQUFTLENBQUV0SSxPQUFPLElBQVNHLFFBRTlELElBQUk0OUUsWUFBY3A4RSxTQUFTcUcsS0FBTSxJQUNqQyxHQUFJcE8sT0FBTzBuRCxJQUFJekosZ0JBQWtCLEVBQUcsQ0FDbEMsTUFBTW1tQyxJQUFNcGtGLE9BQU8wbkQsSUFBSXpKLGdCQUN2QnRwQixVQUFVNGpCLFNBQVMzekMsT0FBU3cvRSxJQUM1QkQsYUFBNEJDLEdBQzlCLENBQ0EsR0FBSXBrRixPQUFPMG5ELElBQUkxSixrQkFBb0IsRUFBRyxDQUNwQyxNQUFNb21DLElBQU1wa0YsT0FBTzBuRCxJQUFJMUosa0JBQ3ZCcnBCLFVBQVU2akIsV0FBVzV6QyxPQUFTdy9FLElBQzlCRCxhQUE0QkMsR0FDOUIsQ0FDQSxHQUFJcGtGLE9BQU8wbkQsSUFBSTNKLGlCQUFtQixFQUFHLENBQ25DLE1BQU1xbUMsSUFBTXBrRixPQUFPMG5ELElBQUkzSixpQkFDdkJwcEIsVUFBVThqQixVQUFVN3pDLE9BQVN3L0UsSUFDN0JELGFBQTRCQyxHQUM5QixDQUNBLEdBQUlwa0YsT0FBTzBuRCxJQUFJbkgsa0JBQW9CLEVBQUcsQ0FFcEM0akMsYUFEWW5rRixPQUFPMG5ELElBQUluSCxpQkFFekIsQ0FDQSxJQUFJbm1ELEtBQU8yUCxLQUFLM1AsS0FDWnVGLE1BQVFtRSxLQUFLNDhFLGlCQUNmdG1GLEtBQU8yUCxLQUFLbEssT0FBT2tMLGVBQWlCLEtBQU9oQixLQUFLbEssT0FBTytLLFVBQVksSUFDMURtQixNQUFNL0ksTUFBTXVnRixnQkFDckJucEYsS0FBT0EsS0FBTyxLQUFPMEosS0FBS3NSLE9BQU9pb0MsYUFBYXIyQyxJQUFNLE1BQVFsRCxLQUFLc1IsT0FBT2lvQyxhQUFhdDJDLElBQU0sSUFDdkZvOUUsYUFBZXJnRixLQUFLc1IsT0FBT2lvQyxhQUFhcjJDLEtBQU9tOUUsYUFBZXJnRixLQUFLc1IsT0FBT2lvQyxhQUFhdDJDLE1BQ3pGNHRCLFVBQVVzdkQsa0JBQW1CLElBRUUsaUJBQWpCdjhCLElBQUl2dUMsV0FDcEIvZSxLQUFPMlAsS0FBS2xLLE9BQU9rTCxlQUFpQixLQUFPMjhDLElBQUl2dUMsU0FBVyxLQUU1RHdiLFVBQVVsTixPQUFPdnNCLEtBQUssQ0FDcEJ5RSxJQUNBc2hCLE1BQ0E3bUIsS0FDQWlxRixhQUFjMzhCLElBQUlpOEIsaUJBQ2xCVyxZQUFhNThCLElBQUlvOEIsZ0JBQ2pCMTFFLEtBQ0E2dkMsZUFBZ0J5SixJQUFJekosZUFDcEJELGlCQUFrQjBKLElBQUkxSixpQkFDdEJELGdCQUFpQjJKLElBQUkzSixnQkFDckJ3QyxpQkFBa0JtSCxJQUFJbkgsaUJBQ3RCNGpDLFlBQ0FJLGlCQUFrQjNDLGNBQWdCamlGLE1BQVFtRSxLQUFLMjhFLG1CQUVuRCxDQUNGLENBQ0YsQ0FDQTlyRCxVQUFVbE4sT0FBT3pYLEtBQUt0RSxjQUFjdUUsZUFDaEMwa0IsVUFBVXN2RCxtQkFDWnR2RCxVQUFVK3NELFNBQVUsRUFFeEIsQ0FFQS9zRCxVQUFVNGpCLFNBQVMyckMsVUFBWXZ2RCxVQUFVNGpCLFNBQVNoeUMsTUFBUW91QixVQUFVNGpCLFNBQVMzekMsTUFDN0UrdkIsVUFBVTZqQixXQUFXMHJDLFVBQVl2dkQsVUFBVTZqQixXQUFXanlDLE1BQVFvdUIsVUFBVTZqQixXQUFXNXpDLE1BQ25GK3ZCLFVBQVU4akIsVUFBVXlyQyxVQUFZdnZELFVBQVU4akIsVUFBVWx5QyxNQUFRb3VCLFVBQVU4akIsVUFBVTd6QyxNQUNoRixNQUVGLEtBQUsrdkIsVUFBVWlzRCxNQUFNVixlQUNuQixDQUNFLE1BQU1zRSxxQkFBdUIxZ0YsS0FBS3NSLE9BQU9xdkUsaUJBQ3pDOXZELFVBQVV1akQsWUFBYyxDQUFDLEVBQ3pCLElBQUssSUFBSWozRCxNQUFRLEVBQUdBLE1BQVFuZCxLQUFLc1IsT0FBTyttQyxZQUFZejNDLE9BQVF1YyxRQUMxRDBULFVBQVV1akQsWUFBWWozRCxPQUFTLENBQzdCQSxNQUNBN21CLEtBQU0wSixLQUFLc1IsT0FBTyttQyxZQUFZbDdCLE9BQU83bUIsS0FDckM2Z0IsTUFBUTdaLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU13MkIsZ0JBQWdCejVDLEtBQUtzUixPQUFPK21DLFlBQVlsN0IsT0FBT3RoQixJQUFLNmtGLGdCQUFnQjkvRSxPQUFTWixLQUFLc1IsT0FBTyttQyxZQUFZbDdCLE9BQU90aEIsSUFBTSxHQUNoSnpGLE1BQU80SixLQUFLc1IsT0FBTyttQyxZQUFZbDdCLE9BQU8vbUIsTUFHNUMsQ0FDQXk2QixVQUFVK3NELFNBQVUsRUFDcEIvc0QsVUFBVWd0RCxhQUFldmdGLEtBQUtzRyxLQUFLZzlFLE1BQVExd0UsTUFBTTJ3RSxpQkFBaUJDLGFBQWFDLFlBQy9FLE1BRUYsS0FBS2x3RCxVQUFVaXNELE1BQU1ULFlBQ25CeHJELFVBQVUrc0QsU0FBVSxFQUNwQi9zRCxVQUFVZ3RELGNBQWUsRUFJN0IsT0FBT2h0RCxTQUNULENBRUEsaUJBQUEvVyxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUN4QkEsS0FBS2luRSxVQUFTeGdGLEdBQUssWUFBWXlyRCxNQUFNenJELEVBQUV1a0IsUUFBVXZrQixFQUFFeWdGLFlBQVlDLFVBQTBELE1BQTdDMWdGLEVBQUU4TyxTQUFXOU8sRUFBRThiLE9BQVM5YixFQUFFMmdGLFVBQVksS0FDbEhwbkUsS0FBS3JhLEtBQUsscUJBQXFCOUQsT0FBT29FLEtBQUt3eEIsZ0JBQWdCdDRCLEtBQUs4RyxPQUNoRStaLEtBQUtyYSxLQUFLLHdCQUF3Qit4QixNQUFNenhCLEtBQUtvZ0Msc0JBQXNCbG5DLEtBQUs4RyxPQUN4RStaLEtBQUtyYSxLQUFLLCtCQUErQit4QixNQUFNenhCLEtBQUtvaEYsNEJBQTRCbG9GLEtBQUs4RyxPQUNyRitaLEtBQUtyYSxLQUFLLDRCQUE0Qit4QixNQUFNenhCLEtBQUtxZ0MsMEJBQTBCbm5DLEtBQUs4RyxPQUNoRitaLEtBQUtyYSxLQUFLLDRCQUE0Qit4QixNQUFNenhCLEtBQUtzZ0MsMEJBQTBCcG5DLEtBQUs4RyxPQUNoRitaLEtBQUtyYSxLQUFLLCtCQUErQit4QixNQUFNenhCLEtBQUtxaEYsNEJBQTRCbm9GLEtBQUs4RyxPQUNyRitaLEtBQUtyYSxLQUFLLG1CQUFtQit4QixNQUFNenhCLEtBQUtzaEYsV0FBV3BvRixLQUFLOEcsT0FDeEQrWixLQUFLcmEsS0FBSyxtQkFBbUIreEIsTUFBTXp4QixLQUFLdWhGLFdBQVdyb0YsS0FBSzhHLE9BQ3hEK1osS0FBS3JhLEtBQUssb0JBQW9CK3hCLE1BQU16eEIsS0FBS3doRixZQUFZdG9GLEtBQUs4RyxPQUMxRCtaLEtBQUtyYSxLQUFLLDhCQUE4QnVrRSxLQUFLamtFLEtBQUt3eEIsZ0JBQWdCdDRCLEtBQUs4RyxPQUN2RStaLEtBQUtyYSxLQUFLLDJDQUEyQ3VrRSxLQUFLamtFLEtBQUt5aEYsNEJBQTRCdm9GLEtBQUs4RyxPQUNoRytaLEtBQUtyYSxLQUFLLG9CQUFvQit4QixNQUFNenhCLEtBQUswaEYsZUFBZXhvRixLQUFLOEcsT0FDN0QrWixLQUFLcmEsS0FBSyxtQkFBbUIreEIsTUFBTXp4QixLQUFLMmhGLGtCQUFrQnpvRixLQUFLOEcsT0FDL0QrWixLQUFLcmEsS0FBSyxzQkFBc0IreEIsTUFBTXp4QixLQUFLNGhGLHFCQUFxQjFvRixLQUFLOEcsT0FDckUrWixLQUFLcmEsS0FBSyw4QkFBOEIreEIsTUFBTXp4QixLQUFLNmhGLG9CQUFvQjNvRixLQUFLOEcsT0FDNUUrWixLQUFLcmEsS0FBSyxnQ0FBZ0N1a0UsS0FBS2prRSxLQUFLOGhGLHFCQUFxQjVvRixLQUFLOEcsT0FDOUUrWixLQUFLcmEsS0FBSywyQkFBMkJnb0UsTUFBTTFuRSxLQUFLK2hGLHVCQUF1QjdvRixLQUFLOEcsT0FDNUUrWixLQUFLcmEsS0FBSyx5QkFBeUIreEIsTUFBTXp4QixLQUFLZ2lGLGlCQUFpQjlvRixLQUFLOEcsT0FDcEUrWixLQUFLcmEsS0FBSywwQkFBMEIreEIsTUFBTXp4QixLQUFLaWlGLGtCQUFrQi9vRixLQUFLOEcsTUFDeEUsQ0FFQSxpQkFBTWtpRixDQUFhL3FFLE9BQ2pCLEdBQUlBLE1BQU12VyxPQUFRLENBQ2hCLE1BQU1tWixLQUFPLEdBQ2IsSUFBSyxNQUFNNVksUUFBUWdXLE1BQ2pCNEMsS0FBSzNpQixXQUFXbXBCLGVBQWV6ZSxLQUFLcWdGLGNBQWUsQ0FDakRsb0YsU0FBVTJOLGNBQWM0Yix1QkFBdUJyaUIsS0FBSyxLQUFLOUQsT0FBUzhELEtBQUssSUFBTSxLQUFPQSxLQUFLLEdBQ3pGbXBELGNBQWVucEQsS0FBSyxHQUFHaWhGLGFBQ3ZCMy9FLE1BQU90QixLQUFLLEdBQUdzQixTQUduQmUsWUFBWWlOLE9BQU8sQ0FDakI3TSxLQUFNdEcsS0FBS3NHLEtBQUtxSyxHQUNoQitCLFFBQVMsQ0FDUG9CLE1BQU85VCxLQUFLc0csS0FBS3ROLE1BRW5Ca2EsUUFBU3VKLEtBQUsxVixLQUFLLHFCQUNuQmYsUUFBU0UsWUFBWXNpQixxQkFBcUIsT0FFOUMsQ0FDRixDQUVBLGFBQUF1OEQsQ0FBZXA4RSxNQUFNLHFCQUF3QixFQUFLLG1CQUFzQixFQUFLLGtCQUFxQixFQUFLLG9CQUF1QixFQUFLLGlCQUFvQixFQUFLLGdCQUFtQixHQUFVLENBQUMsR0FDeEwsTUFBTXBLLElBQU9vSyxLQUFLL0csTUFBTXdDLE1BQU1nd0MsV0FBV3pqQyxJQUFNaEksS0FBSzNQLEtBQ3BELEdBQWtCLFVBQWQyUCxLQUFLNUgsS0FFUCxZQURBMkIsS0FBS3NSLE9BQU9neEUsa0JBQWtCbHJGLEtBQUs2TyxNQUdyQyxNQUFNdTVFLGNBQWdCdjVFLEtBQUtsSyxPQUFPOEssV0FBVzNQLFdBQWErTyxLQUFLbEssT0FBTzhLLFdBQVdyUCxlQUFrQnlPLEtBQUtsSyxPQUFPOEssV0FBV2xQLFNBQXNCc08sS0FBS2xLLE9BQU84SyxXQUFXblAsY0FBZ0J1TyxLQUFLM1AsT0FBU2dILEtBQUtDLEtBQUt5VyxPQUFPLHNCQUNoTjlVLE1BQVEsQ0FDWnlnRixvQkFDQUMsa0JBQ0FNLG1CQUNBVCxlQUNBSSxpQkFDQUcsaUJBRUlULEtBQU8sQ0FDWHJsQyxpQkFBa0IsR0FDbEJELGdCQUFpQixHQUNqQndDLGlCQUFrQixHQUNsQnRDLGVBQWdCLEdBQ2hCOWtDLFVBQVUsR0FFWixRQUEyQyxJQUFoQ3JWLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FDaENtRSxLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQU8sQ0FDNUJvSyxLQUNBL0csTUFBT04sUUFBUUMsTUFBTTJhLFlBQVl0YSxNQUFPLENBQUVzZ0YsWUFBYyxDQUFFK0MsU0FBUyxJQUNuRWhELEtBQU0sSUFFSEMsYUFBd0MsSUFBeEJHLHNCQUF1RCxJQUF0QkMsb0JBQXNELElBQXZCTSxvQkFDbkZsZ0YsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtub0YsS0FBS3dILFFBQVFDLE1BQU0yYSxZQUFZdGEsTUFBT3FnRixLQUFNLENBQUVnRCxTQUFTLFNBRXJGLENBQ0wsR0FBSy9DLFdBS0h4L0UsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtub0YsS0FBS3dILFFBQVFDLE1BQU0yYSxZQUFZdGEsTUFBT3FnRixLQUFNLENBQUVnRCxTQUFTLFVBSnhGLElBQUssTUFBTXR0RCxRQUFRLzFCLE1BQ2pCYyxLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBSyxHQUFHdHFELE1BQVFqMUIsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUssR0FBR3RxRCxPQUFTLzFCLE1BQU0rMUIsTUFLbkcsSUFBSyxNQUFNQSxRQUFRLzFCLE1BQ2pCYyxLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUtxRCxNQUFNKzFCLE1BQVFqMUIsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLcUQsTUFBTSsxQixPQUFTLzFCLE1BQU0rMUIsS0FFL0YsRUFDS3VxRCxZQUFjdGdGLE1BQU11Z0YsaUJBQ3ZCei9FLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLLEdBQUdybEMsaUJBQW1CbDZDLEtBQUtzUixPQUFPaW9DLGFBQWFyMkMsSUFFcEYsQ0FFQSxnQkFBQXMvRSxHQUNFLElBQUssTUFBTTNtRixPQUFPbUUsS0FBS3NSLE9BQU91dEUsWUFDNUI3K0UsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixLQUFPLEVBRW5DLENBRUEsbUJBQU00bUYsR0FDSnppRixLQUFLc1IsT0FBTyt0RSxXQUFhLENBQUMsRUFDMUJyL0UsS0FBS3NSLE9BQU8ydUUsaUJBQW1CLENBQUMsRUFDaENqZ0YsS0FBS3NSLE9BQU9neEUsa0JBQW9CLEdBQ2hDdGlGLEtBQUtzUixPQUFPb3hFLFVBQVk5akYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLc1IsT0FBT2d0RSxpQkFDNUQsTUFBTVgsWUFBYzM5RSxLQUFLbzlFLG9CQUFvQnA5RSxLQUFLc1IsT0FBT3FzRSxPQUNuRGpwQyxpQkFBbUIxMEMsS0FBS285RSxvQkFBb0JwOUUsS0FBS3NSLE9BQU9vakMsWUFDOUQsSUFBSUMsV0FBWSxFQUloQixHQUg4QixLQUExQjMwQyxLQUFLc1IsT0FBT3FqQyxZQUNkQSxnQkFBa0IzMEMsS0FBS285RSxvQkFBb0JwOUUsS0FBS3NSLE9BQU9xakMsWUFFckRncEMsT0FBU2pwQyxjQUFnQnAzQyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFBd0J5M0MsV0FBWSxDQUN6RjMwQyxLQUFLc1IsT0FBTyttQyxZQUFjLEdBQzFCLElBQUssSUFBSWw3QixNQUFRLEVBQUdBLE1BQVF3Z0UsTUFBTTVoRixPQUFPczhDLFlBQVl6M0MsT0FBUXVjLFFBQzNEbmQsS0FBS3NSLE9BQU8rbUMsWUFBWWpoRCxLQUFLLENBQzNCZCxLQUFNcW5GLE1BQU01aEYsT0FBT3M4QyxZQUFZbDdCLE9BQy9CL21CLE1BQU8sR0FDUHlGLElBQUssaUJBQW1CK0wsY0FBY2lwRCxZQUFZOHNCLE1BQU01aEYsT0FBT3M4QyxZQUFZbDdCLFVBRy9FbmQsS0FBS3NSLE9BQU9takMsU0FBV0MsV0FBVzM0QyxPQUFPMDRDLFNBQ3pDejBDLEtBQUtzUixPQUFPOHRFLGFBQWUxcUMsV0FBVzM0QyxPQUFPcWpGLGFBQzdDcC9FLEtBQUtzUixPQUFPaW9DLGFBQWU3RSxXQUFXMzRDLE9BQU93OUMsYUFDN0MsSUFBSXJyQyxNQUFRLEdBQ1pBLFlBQWNsTyxLQUFLKzNDLGdCQUFnQjRsQyxNQUFNNWhGLE9BQU9tUyxPQUNoRCxJQUFLLElBQUlpUCxNQUFRLEVBQUcydkQsR0FBSzUrRCxNQUFNdE4sT0FBUXVjLE1BQVEydkQsR0FBSTN2RCxRQUNqRG5kLEtBQUtxaUYsY0FBY24wRSxNQUFNaVAsUUFFM0JqUCxZQUFjbE8sS0FBSyszQyxnQkFBZ0JyRCxXQUFXMzRDLE9BQU80bkIsUUFDckQsSUFBSyxJQUFJeEcsTUFBUSxFQUFHMnZELEdBQUs1K0QsTUFBTXROLE9BQVF1YyxNQUFRMnZELEdBQUkzdkQsUUFDakRuZCxLQUFLcWlGLGNBQWNuMEUsTUFBTWlQLE9BQVEsQ0FBRXdpRSxxQkFBcUIsRUFBTUUsa0JBQWtCLElBRWxGLElBQUssSUFBSTltRSxNQUFRLEVBQUc2SixHQUFLOHhCLFdBQVczNEMsT0FBT3VJLE9BQU8xRCxPQUFRbVksTUFBUTZKLEdBQUk3SixRQUFTLENBQzdFL1ksS0FBS3NSLE9BQU8ydUUsaUJBQWlCbG5FLE9BQVMyN0IsV0FBVzM0QyxPQUFPdUksT0FBT3lVLE9BQU96WixRQUN0RTRPLFlBQWNsTyxLQUFLKzNDLGdCQUFnQnJELFdBQVczNEMsT0FBT3VJLE9BQU95VSxPQUFPNEssUUFDbkUsSUFBSyxJQUFJeEcsTUFBUSxFQUFHMnZELEdBQUs1K0QsTUFBTXROLE9BQVF1YyxNQUFRMnZELEdBQUkzdkQsUUFDakRuZCxLQUFLcWlGLGNBQWNuMEUsTUFBTWlQLE9BQVEsQ0FBRXlpRSxrQkFBbUI3bUUsT0FFMUQsQ0FDQSxHQUFJNDdCLFVBQVcsQ0FDYnptQyxZQUFjbE8sS0FBSyszQyxnQkFBZ0JwRCxVQUFVNTRDLE9BQU80bkIsUUFDcEQsSUFBSyxJQUFJeEcsTUFBUSxFQUFHMnZELEdBQUs1K0QsTUFBTXROLE9BQVF1YyxNQUFRMnZELEdBQUkzdkQsUUFDakRuZCxLQUFLcWlGLGNBQWNuMEUsTUFBTWlQLE9BQVEsQ0FBRStpRSxvQkFBb0IsRUFBTUYsaUJBQWlCLEdBRWxGLENBQ0EsR0FBSTlqRixPQUFPOEQsS0FBS3NSLE9BQU9pb0MsYUFBYXQyQyxLQUFPLEVBQUcsQ0FDNUMsTUFBTTAvRSxpQkFBbUJybEYsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXlCaFUsS0FBSzI4RSxtQkFDbEV6OUUsTUFBUSxDQUFFeWdGLHFCQUFxQixFQUFNRSxrQkFBa0IsRUFBTUosZ0JBQWdCLEdBQ25GLFFBQThELElBQW5Eei9FLEtBQUtzUixPQUFPK3RFLFdBQVdyL0UsS0FBSzI4RSxtQkFDckMzOEUsS0FBS3FpRixjQUFjcmlGLEtBQUtzUixPQUFPK3RFLFdBQVdyL0UsS0FBSzI4RSxtQkFBbUIxMkUsS0FBTS9HLFlBQ25FLFFBQXdELElBQTdDYyxLQUFLc1IsT0FBTyt0RSxXQUFXc0Qsa0JBQ3ZDM2lGLEtBQUtxaUYsY0FBY3JpRixLQUFLc1IsT0FBTyt0RSxXQUFXc0Qsa0JBQWtCMThFLEtBQU0vRyxXQUM3RCxDQUNMLE1BQU0rSSxZQUFjM0ssS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTUMsVUFBVWxqQixLQUFLMjhFLG1CQUNyRDEwRSxNQUFNckgsUUFDUlosS0FBS3FpRixjQUFjcDZFLE1BQU0sR0FBSS9JLE1BRWpDLENBQ0YsQ0FDRixDQUNGLENBRUEsWUFBQW0rRCxDQUFjOWdFLE9BQ1osR0FBSUEsTUFBTUksY0FBY0ksUUFBUTZsRixrQkFBbUIsQ0FDakQsTUFBTXRsQixTQUFXLENBQUVqL0QsS0FBTSw2QkFBOEJ4QyxJQUFLVSxNQUFNSSxjQUFjSSxRQUFRNmxGLGtCQUFtQnhzRixNQUFPbUcsTUFBTUksY0FBY0ksUUFBUTNHLE9BQzlJbUcsTUFBTXd4QixhQUFhQyxRQUFRLGFBQWNyZixLQUFLQyxVQUFVMHVELFVBQzFELENBQ0YsQ0FFQSxhQUFBdWxCLENBQWVDLFVBQ2IsT0FBTyxDQUNULENBRUEsWUFBQUMsQ0FBY0QsVUFDWixPQUFPLENBQ1QsQ0FFQSxhQUFNbndELENBQVNwMkIsT0FDYixJQUNFLE1BQU13MkIsU0FBV3BrQixLQUFLdWQsTUFBTTN2QixNQUFNd3hCLGFBQWE2QyxRQUFRLGVBQ3ZELFFBQTZCLElBQWxCbUMsU0FBUzEwQixNQUEwQywrQkFBbEIwMEIsU0FBUzEwQixLQUF1QyxDQUcxRixHQUZBMDBCLFNBQVNpd0QsWUFBY3ptRixNQUFNd29CLE9BQU9sb0IsUUFBUSxNQUFNRSxRQUFRNmxGLGtCQUMxRDd2RCxTQUFTdFEsTUFBTyxFQUNLLE1BQWpCc1EsU0FBU2wzQixVQUF3RSxJQUFsRG1FLEtBQUtzUixPQUFPdXRFLFlBQVk5ckQsU0FBU2l3RCxhQUE4QixDQUNoRyxNQUFNN2xFLE1BQVFuZCxLQUFLc1IsT0FBT294RSxVQUFVcjZFLFFBQVFwRSxTQUFTOHVCLFNBQVMzOEIsTUFBTyxNQUN0RCxJQUFYK21CLE9BQ0ZuZCxLQUFLc1IsT0FBT294RSxVQUFVdnNELE9BQU9oWixNQUFPLEdBRWdCLEtBQWxEbmQsS0FBS3NSLE9BQU91dEUsWUFBWTlyRCxTQUFTaXdELGNBQ25DaGpGLEtBQUtzUixPQUFPb3hFLFVBQVV0ckYsS0FBSzZNLFNBQVNqRSxLQUFLc1IsT0FBT3V0RSxZQUFZOXJELFNBQVNpd0QsYUFBYyxLQUVyRmhqRixLQUFLc1IsT0FBT3V0RSxZQUFZOXJELFNBQVNpd0QsYUFBZS8rRSxTQUFTOHVCLFNBQVMzOEIsTUFBTyxJQUN6RTRKLEtBQUtzUixPQUFPb3hFLFVBQVV4MkUsT0FBTzYyRCxVQUM3Qmh3QyxTQUFTdFEsTUFBTyxDQUNsQixNQUFPLFFBQXFELElBQTFDemlCLEtBQUtzUixPQUFPdXRFLFlBQVk5ckQsU0FBU2wzQixNQUFpRCxNQUF6QmszQixTQUFTaXdELFlBQ3BDLEtBQTFDaGpGLEtBQUtzUixPQUFPdXRFLFlBQVk5ckQsU0FBU2wzQixPQUNuQ21FLEtBQUtzUixPQUFPb3hFLFVBQVV0ckYsS0FBSzZNLFNBQVNqRSxLQUFLc1IsT0FBT3V0RSxZQUFZOXJELFNBQVNsM0IsS0FBTSxLQUMzRW1FLEtBQUtzUixPQUFPdXRFLFlBQVk5ckQsU0FBU2wzQixLQUFPLEdBQ3hDbUUsS0FBS3NSLE9BQU9veEUsVUFBVXgyRSxPQUFPNjJELFVBQzdCaHdDLFNBQVN0USxNQUFPLFFBRWIsUUFBcUQsSUFBMUN6aUIsS0FBS3NSLE9BQU91dEUsWUFBWTlyRCxTQUFTbDNCLFdBQWlGLElBQWxEbUUsS0FBS3NSLE9BQU91dEUsWUFBWTlyRCxTQUFTaXdELGFBQThCLENBQy9JLE1BQU1DLEtBQWtELEtBQTFDampGLEtBQUtzUixPQUFPdXRFLFlBQVk5ckQsU0FBU2wzQixLQUFjLEdBQUtvSSxTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWTlyRCxTQUFTbDNCLEtBQU0sSUFDbEhtRSxLQUFLc1IsT0FBT3V0RSxZQUFZOXJELFNBQVNsM0IsS0FBMEQsS0FBbERtRSxLQUFLc1IsT0FBT3V0RSxZQUFZOXJELFNBQVNpd0QsYUFBc0IsR0FBSy8rRSxTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWTlyRCxTQUFTaXdELGFBQWMsSUFDN0poakYsS0FBS3NSLE9BQU91dEUsWUFBWTlyRCxTQUFTaXdELGFBQWVDLEtBQ2hEbHdELFNBQVN0USxNQUFPLENBQ2xCLENBQ0EsR0FBSXNRLFNBQVN0USxLQUVYLFlBREF6aUIsS0FBS2hDLFFBQU8sRUFHaEIsQ0FDRixDQUFFLE1BQU84TSxLQUNULENBQ0EsTUFBTWlvQixlQUFpQm5yQixjQUFjb3JCLHFCQUFxQnoyQixNQUFPLFFBQ2pFLEdBQUksQ0FBQ3lELEtBQUtzN0UsU0FBU1csc0JBQXVCajhFLEtBQUtzN0UsU0FBU1Usd0JBQXdCaDVFLFNBQVNoRCxLQUFLc1IsT0FBT3lzRSxNQUNuRyxJQUFLLE1BQU05M0UsUUFBUThzQixTQUNDLFVBQWQ5c0IsS0FBSzVILE9BQ1AyQixLQUFLcWlGLGNBQWNwOEUsTUFDbkJqRyxLQUFLaEMsUUFBTyxHQUlwQixDQUVBLG9CQUFBNGpGLENBQXNCcmxGLE9BQ3BCQSxNQUFNdS9ELGlCQUNSLENBRUEsbUJBQUErbEIsQ0FBcUJ0bEYsT0FDbkJBLE1BQU11L0Qsa0JBQ04sTUFBTWpnRSxJQUFNVSxNQUFNSSxlQUFldW1GLFlBQVlubUYsU0FBU2xCLElBQ2hEc2hCLE1BQVE1Z0IsTUFBTUksZUFBZXVtRixZQUFZbm1GLFNBQVNvZ0IsV0FDQSxJQUE3Q25kLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsTUFBTTBqRixLQUFLcGlFLFNBQzNDbmQsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwcEQsT0FBT2haLE1BQU9BLE9BQy9DbmQsS0FBS2hDLFFBQU8sR0FFaEIsQ0FFQSxvQkFBTTBqRixDQUFnQm5sRixPQUNwQixNQUFNVixJQUFNVSxNQUFNSSxlQUFlSSxTQUFTbEIsSUFDcENzaEIsTUFBUTVnQixNQUFNSSxlQUFlSSxTQUFTb2dCLE1BQ3RDZ21FLFVBQVk1bUYsTUFBTUksZUFBZUksU0FBU29tRixlQUNRLElBQTdDbmpGLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsTUFBTTBqRixLQUFLcGlFLFNBQzNDbmQsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLMGpGLEtBQUtwaUUsT0FBT2dtRSxZQUFjbmpGLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU9nbUUsV0FDOUZuakYsS0FBS2hDLFFBQU8sR0FFaEIsQ0FFQSx1QkFBTTJqRixDQUFtQnBsRixPQUN2QixNQUFNVixJQUFNVSxNQUFNSSxlQUFlSSxTQUFTbEIsSUFDcENzaEIsTUFBUTVnQixNQUFNSSxlQUFlSSxTQUFTb2dCLE1BQ3RDZ21FLFVBQVk1bUYsTUFBTUksZUFBZUksU0FBU29tRixVQUNoRCxRQUEyQyxJQUFoQ25qRixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQXNCLENBQ2xEc2hCLE9BQVMsSUFDWG5kLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU9nbUUsWUFBYSxFQUNyRG5qRixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPOUgsVUFBVyxFQUNuRHJWLEtBQUtoQyxRQUFPLElBRWQsSUFBSThOLFVBQVksR0FDaEIsTUFBTWlOLE1BQVF6YixLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNbWdFLGtCQUFrQnZuRixLQUNsRGtkLFFBQ0ZqTixpQkFBbUJ4TyxLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNNnpCLG1CQUFtQixDQUFFQyxZQUFhLElBQUlwdkMsT0FBTyxJQUFNQyxjQUFjQyxZQUFZa1IsT0FBUyxPQUFRMWEsS0FBTSxPQUFROUgsUUFBTzBQLFFBQ2pKQSxLQUFLbEssT0FBTzhLLFlBQVkzUCxVQUFjK08sS0FBS2xLLE9BQU84SyxZQUFZclAsY0FBZ0J5TyxLQUFLbEssT0FBTzhLLFlBQVluUCxpQkFFN0dvVSxVQUFVbEwsT0FBUyxHQUNyQmtMLFVBQVVJLEtBQUt0RSxjQUFjdUUsZ0JBR2pDLE1BQU1xb0MsZ0JBQWtCOVMsZ0NBQWdDanhCLE9BQU8sQ0FDN0RrVCxPQUFRN1gsVUFDUisxQixZQUFjN2hDLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FBS29LLEtBQUtsSyxPQUFPOEssWUFBWXJQLGVBQWdCLEVBQ2xGc3FDLGdCQUFnQixFQUNoQlAsbUJBQW9CdmhDLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FBS29LLEtBQUtsSyxPQUFPa0wsZUFDNUQ1SixNQUFPMkMsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixLQUFLb0ssS0FBSzNQLE9BRTFDLEdBQUk2bUIsT0FBUyxFQUNnQixLQUF2QnEzQixVQUFVbi9CLFVBQ1pyVixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPOUgsU0FBV3ZKLFVBQVVwTSxNQUFLNGdCLEdBQUtBLEVBQUVyUyxLQUFPdW1DLFVBQVVuL0IsV0FDMUZyVixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPZ21FLFlBQWEsR0FDekIsS0FBbkIzdUMsVUFBVWwrQyxPQUNuQjBKLEtBQUtzUixPQUFPK3RFLFdBQVd4akYsS0FBSzBqRixLQUFLcGlFLE9BQU85SCxTQUFXbS9CLFVBQVVsK0MsS0FDN0QwSixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPZ21FLFlBQWEsT0FFbEQsQ0FDTCxJQUFJOXRFLFVBQVcsRUFDWSxLQUF2Qm0vQixVQUFVbi9CLFNBQ1pBLFNBQVd2SixVQUFVcE0sTUFBSzRnQixHQUFLQSxFQUFFclMsS0FBT3VtQyxVQUFVbi9CLFdBQ3RCLEtBQW5CbS9CLFVBQVVsK0MsT0FDbkIrZSxTQUFXbS9CLFVBQVVsK0MsTUFFdkIwSixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS25vRixLQUFLLENBQ3BDdW9GLHFCQUFxQixFQUNyQkMsbUJBQW1CLEVBQ25CTSxvQkFBb0IsRUFDcEJULGdCQUFnQixFQUNoQkksaUJBQWlDLHFCQUFkc0QsVUFDbkJuRCxnQkFBZ0Msb0JBQWRtRCxVQUNsQmpwQyxpQkFBa0IsR0FDbEJELGdCQUFpQixHQUNqQndDLGlCQUFrQixHQUNsQnRDLGVBQWdCLEdBQ2hCOWtDLFVBRUosQ0FDQXJWLEtBQUtoQyxRQUFPLEVBQ2QsQ0FDRixDQUVBLDBCQUFNOGpGLENBQXNCdmxGLE9BQzFCLE1BQU13a0MsTUFBUXZWLEVBQUVqdkIsTUFBTUksZUFDaEIwbUYsV0FBYXRpRCxNQUFNejdCLEtBQUssY0FDeEIxSSxHQUFLbWtDLE1BQU1sa0MsUUFBUSxNQUNuQmhCLElBQU1lLEdBQUcwSSxLQUFLLE9BQ2Q2WCxNQUFRdmdCLEdBQUcwSSxLQUFLLGNBQzhDLElBQXpEdEYsS0FBS3NSLE9BQU8rdEUsV0FBV3hqRixNQUFNMGpGLEtBQUtwaUUsT0FBT2ttRSxjQUNsRHJqRixLQUFLc1IsT0FBTyt0RSxXQUFXeGpGLEtBQUswakYsS0FBS3BpRSxPQUFPa21FLFlBQWN0aUQsTUFBTUssT0FFOURwaEMsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLDRCQUFNK2pGLENBQXdCeGxGLE9BQzVCLE1BQU0rbUYsU0FBVzkzRCxFQUFFanZCLE1BQU1JLGVBQ25Cd2dCLE1BQVFtbUUsU0FBU2grRSxLQUFLLGNBQ2tCLElBQW5DdEYsS0FBS3NSLE9BQU8rbUMsWUFBWWw3QixTQUNqQ25kLEtBQUtzUixPQUFPK21DLFlBQVlsN0IsT0FBTy9tQixNQUFRa3RGLFNBQVNsaUQsTUFFcEQsQ0FFQSxzQkFBTTRnRCxDQUFrQnpsRixPQUN0QixNQUFNK2xCLE9BQVNrSixFQUFFanZCLE1BQU1JLGVBQ2pCd2dCLE1BQVFtRixPQUFPaGQsS0FBSyxTQUNwQnpKLElBQU15bUIsT0FBT2hkLEtBQUssT0FDeEIsUUFBOEMsSUFBbkN0RixLQUFLc1IsT0FBTyttQyxZQUFZbDdCLE9BQXdCLENBQ3pELE1BQU1vbUUsZ0JBQWtCam1GLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU1DLFVBQVVybkIsS0FDeEQsR0FBeUIsSUFBckIwbkYsVUFBVTNpRixPQUFjLENBQzFCLE1BQU00aUYsa0JBQW9CRCxVQUFVLEdBQUdwaUYsT0FDbkNxaUYsWUFBWTlnRixRQUFRLEdBQUdyRSxPQUFTNlIsTUFBTTBqQyxtQkFBbUJLLE9BQzNEajBDLEtBQUtzUixPQUFPK21DLFlBQVlsN0IsT0FBTy9tQixPQUFTNEosS0FBS3NSLE9BQU8rbUMsWUFBWWw3QixPQUFPL21CLE1BQVEsS0FBT290RixZQUFZOWdGLFFBQVEsR0FBR3d4QyxLQUFLelosUUFBUUEsT0FFOUgsQ0FDRixDQUNBejZCLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSx1QkFBTWlrRixDQUFtQjFsRixPQUN2QixNQUNNNGdCLE1BRFNxTyxFQUFFanZCLE1BQU1JLGVBQ0YySSxLQUFLLGNBQ29CLElBQW5DdEYsS0FBS3NSLE9BQU8rbUMsWUFBWWw3QixTQUNqQ25kLEtBQUtzUixPQUFPK21DLFlBQVlsN0IsT0FBTy9tQixNQUFRLElBRXpDNEosS0FBS2hDLFFBQU8sRUFDZCxDQUVBLGlCQUFNd2pGLENBQWFqbEYsT0FDakIsTUFBTW9oRixZQUFjMzlFLEtBQUtvOUUsb0JBQW9CcDlFLEtBQUtzUixPQUFPcXNFLE9BQ3pELEdBQUlBLE1BQU8sQ0FDVCxNQUFNdm9FLFVBQVksSUFBSXRULEtBQUs2N0UsTUFBTTVoRixPQUFPMm5CLGdCQUFnQnZNLE1BQU0wZ0MsS0FBSzlsQyxZQUFZbkgsU0FBUyxDQUFFdEksT0FBTyxJQUNqR3RDLEtBQUtzUixPQUFPa3NFLGVBQWUzbEMsS0FBTyxDQUFDemlDLElBQUkzUyxPQUN2QyxNQUFNc1gsV0FBYXdHLGVBQWV6ZSxLQUFLcWdGLGNBQWUsQ0FDcERsb0YsUUFBU3FELEtBQUtDLEtBQUtDLFNBQVMsNENBQThDLEtBQU9tZ0YsTUFBTTVoRixPQUFPMm5CLGdCQUFnQnZNLE1BQU0wZ0MsS0FBSzlsQyxXQUN6SHU0QyxjQUFlbDFDLElBQUlndEUsYUFDbkIzL0UsTUFBTzJTLElBQUkzUyxRQUViZSxZQUFZaU4sT0FBTyxDQUNqQjdNLEtBQU10RyxLQUFLc0csS0FBS3FLLEdBQ2hCK0IsUUFBUyxDQUNQb0IsTUFBTzlULEtBQUtzRyxLQUFLdE4sTUFFbkJrYSxRQUFTdUosS0FDVHpXLFFBQVNFLFlBQVlzaUIscUJBQXFCLFFBRTVDOWxCLEtBQUtoQyxRQUFPLEVBQ2QsQ0FDRixDQUVBLGdCQUFNdWpGLENBQVlobEYsT0FFaEIsR0FEQUEsTUFBTUUsc0JBQ2dELElBQTNDdUQsS0FBS3NSLE9BQU9tc0UsdUJBQXVCMW1GLE1BQ3ZDaUosS0FBS3NSLE9BQU9tc0UsdUJBQXVCMW1GLElBQUk4OUIsUUFBVTcwQixLQUFLc1IsT0FBT21zRSx1QkFBdUIxbUYsSUFBSTBMLE1BQU8sQ0FDbEcsSUFBSXJNLE1BQVE2TixTQUFTakUsS0FBS3NSLE9BQU91dEUsWUFBWTluRixJQUFLLElBQ2xELE1BQU04WSxRQUFVLEdBQ2hCLElBQUssSUFBSXNILE1BQVFuWCxLQUFLc1IsT0FBT21zRSx1QkFBdUIxbUYsSUFBSTBMLE1BQU8wVSxNQUFRLEVBQUdBLFFBQVMsQ0FDakYsTUFBTS9CLFVBQVksSUFBSXRULEtBQUssU0FBUzhJLFNBQVMsQ0FBRXRJLE9BQU8sSUFDdEQsR0FBSThTLElBQUkzUyxNQUFRck0sTUFBTyxDQUNyQixNQUFNMnFELGlCQUFtQixJQUFJai9DLEtBQUssUUFBUThJLFNBQVMsQ0FBRXRJLE9BQU8sSUFDNUR1TixRQUFRelksS0FBSyxpQ0FBaUNrRyxLQUFLQyxLQUFLeVcsT0FDdEQsa0JBQ0EsQ0FDRS9OLEtBQU0zSSxLQUFLQyxLQUFLQyxTQUFTLG9CQUN6QjRYLElBQUtBLElBQUkzUyxNQUNUMitDLE1BQU9ockQsTUFDUHlxRCxRQUFTRSxXQUFXdCtDLHNCQUd4QnJNLE9BQWdCNk4sU0FBUzg4QyxXQUFXdCtDLE1BQU8sR0FDN0MsTUFDRW9OLFFBQVF6WSxLQUFLLGdDQUFnQ2tHLEtBQUtDLEtBQUt5VyxPQUNyRCxrQkFDQSxDQUNFL04sS0FBTTNJLEtBQUtDLEtBQUtDLFNBQVMsb0JBQ3pCNFgsSUFBS0EsSUFBSTNTLE1BQ1QyK0MsTUFBT2hyRCxxQkFJZixDQUNBb04sWUFBWWlOLE9BQU8sQ0FDakJWLE9BQVF6UyxLQUFLQyxLQUFLQyxTQUFTLG9CQUMzQm9HLEtBQU10RyxLQUFLc0csS0FBS3FLLEdBQ2hCK0IsUUFBUyxDQUNQb0IsTUFBTzlULEtBQUtzRyxLQUFLdE4sTUFFbkJrYSxRQUFTWCxRQUFReEwsS0FBSyxJQUN0QmYsUUFBU0UsWUFBWXNpQixxQkFBcUIsUUFFNUM5bEIsS0FBS3NSLE9BQU9rc0UsZUFBZXptRixJQUFNWCxNQUFRNk4sU0FBU2pFLEtBQUtzUixPQUFPdXRFLFlBQVk5bkYsSUFBSyxJQUMvRWlKLEtBQUtzUixPQUFPbXNFLHVCQUF1QjFtRixJQUFJODlCLFFBQVMsRUFDaEQ3MEIsS0FBS2hDLFFBQU8sRUFDZCxDQUVKLENBRUEsZ0JBQU1zakYsQ0FBWS9rRixPQUNoQkEsTUFBTUUsaUJBQ04sTUFBTTBhLE1BQVEsR0FDZCxJQUFLLE1BQU10YixNQUFPLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLFFBQVMsQ0FDbEYsTUFBTTBHLGFBQWV2QyxLQUFLcytCLG1CQUFtQnppQyxNQUM5QixJQUFYMEcsUUFDRjRVLE1BQU0vZixLQUFLbUwsT0FFZixDQUNBdkMsS0FBS2tpRixZQUFZL3FFLE9BQ2pCblgsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLGlDQUFNb2pGLENBQTZCN2tGLE9BQ2pDQSxNQUFNRSxpQkFDTixNQUFNRyxHQUFLTCxNQUFNSSxjQUFjRSxRQUFRLGNBQ04sSUFBdEJELEdBQUdHLFFBQVE0SCxhQUFvRCxJQUFuQi9ILEdBQUdHLFFBQVFtRyxVQUFpRCxJQUFuQnRHLEdBQUdHLFFBQVFrRyxJQUN6R2pELEtBQUt5akYsYUFBYTdtRixHQUFHRyxRQUFRNEgsT0FBUSxHQUFJL0gsR0FBR0csUUFBUW1HLElBQUt0RyxHQUFHRyxRQUFRa0csVUFDakMsSUFBbkJyRyxHQUFHRyxRQUFRbEIsS0FDM0JtRSxLQUFLMGpGLHFCQUFxQjltRixHQUFHRyxRQUFRbEIsSUFBSyxJQUU1Q21FLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSwrQkFBTXFpQyxDQUEyQjlqQyxPQUMvQkEsTUFBTUUsaUJBQ04sTUFBTUcsR0FBS0wsTUFBTUksY0FBY0UsUUFBUSxjQUNOLElBQXRCRCxHQUFHRyxRQUFRNEgsYUFBb0QsSUFBbkIvSCxHQUFHRyxRQUFRbUcsVUFBaUQsSUFBbkJ0RyxHQUFHRyxRQUFRa0csSUFDekdqRCxLQUFLeWpGLGFBQWE3bUYsR0FBR0csUUFBUTRILE9BQVEsRUFBRy9ILEdBQUdHLFFBQVFtRyxJQUFLdEcsR0FBR0csUUFBUWtHLFVBQ2hDLElBQW5CckcsR0FBR0csUUFBUWxCLEtBQzNCbUUsS0FBSzBqRixxQkFBcUI5bUYsR0FBR0csUUFBUWxCLElBQUssR0FFNUNtRSxLQUFLaEMsUUFBTyxFQUNkLENBRUEsK0JBQU1zaUMsQ0FBMkIvakMsT0FDL0JBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtMLE1BQU1JLGNBQWNFLFFBQVEsY0FDTixJQUF0QkQsR0FBR0csUUFBUTRILGFBQW9ELElBQW5CL0gsR0FBR0csUUFBUW1HLFVBQWlELElBQW5CdEcsR0FBR0csUUFBUWtHLElBQ3pHakQsS0FBS3lqRixhQUFhN21GLEdBQUdHLFFBQVE0SCxRQUFTLEVBQUcvSCxHQUFHRyxRQUFRbUcsSUFBS3RHLEdBQUdHLFFBQVFrRyxVQUNqQyxJQUFuQnJHLEdBQUdHLFFBQVFsQixLQUMzQm1FLEtBQUswakYscUJBQXFCOW1GLEdBQUdHLFFBQVFsQixLQUFNLEdBRTdDbUUsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLDJCQUFBcWpGLENBQTZCOWtGLE9BQzNCQSxNQUFNRSxpQkFDTixNQUFNRyxHQUFLTCxNQUFNSSxjQUFjRSxRQUFRLGNBQ04sSUFBdEJELEdBQUdHLFFBQVE0SCxhQUFvRCxJQUFuQi9ILEdBQUdHLFFBQVFtRyxVQUFpRCxJQUFuQnRHLEdBQUdHLFFBQVFrRyxJQUN6R2pELEtBQUt5akYsYUFBYTdtRixHQUFHRyxRQUFRNEgsUUFBUyxHQUFJL0gsR0FBR0csUUFBUW1HLElBQUt0RyxHQUFHRyxRQUFRa0csVUFDbEMsSUFBbkJyRyxHQUFHRyxRQUFRbEIsS0FDM0JtRSxLQUFLMGpGLHFCQUFxQjltRixHQUFHRyxRQUFRbEIsS0FBTSxJQUU3Q21FLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxZQUFBeWxGLENBQWM1bkYsSUFBS3pGLE1BQU84TSxJQUFLRCxLQUM3QmpELEtBQUtzUixPQUFPa3NFLGVBQWUzaEYsS0FBT3VHLEtBQUthLElBQUliLEtBQUtjLElBQUllLFNBQVNqRSxLQUFLc1IsT0FBT2tzRSxlQUFlM2hGLEtBQU0sSUFBTXpGLE1BQU82TixTQUFTaEIsSUFBSyxLQUFNZ0IsU0FBU2YsSUFBSyxJQUMvSSxDQUVBLG9CQUFBd2dGLENBQXNCN25GLElBQUt6RixPQUN6QixNQUFNd0csR0FBS29ELEtBQUs4Z0MsU0FBUyxHQUFHbnRCLGNBQWMsb0JBQW9COVgsUUFDeERrbEMsTUFBUW5rQyxJQUFJK1csY0FBYyxTQUM1Qm90QixRQUNGQSxNQUFNM3FDLE1BQVE4RixPQUFPNmtDLE1BQU0zcUMsT0FBU0EsTUFDcEM0SixLQUFLc1IsT0FBT3V0RSxZQUFZaGpGLEtBQU9LLE9BQU82a0MsTUFBTTNxQyxPQUVoRCxDQUVBLDJCQUFNZ3FDLENBQXVCN2pDLE9BQzNCQSxNQUFNRSxpQkFDTixNQUNNK2pDLFVBREtqa0MsTUFBTUksY0FBY0UsUUFBUSxTQUNsQkUsUUFBUWxCLElBQ3ZCMEcsYUFBZXZDLEtBQUtzK0IsbUJBQW1Ca0MsWUFDOUIsSUFBWGorQixRQUNGdkMsS0FBS2tpRixZQUFZLENBQUMzL0UsU0FFcEJ2QyxLQUFLaEMsUUFBTyxFQUNkLENBRUEsd0JBQU1zZ0MsQ0FBb0J6aUMsS0FDeEIsTUFBTWUsR0FBSzR1QixFQUFFLHFEQUFxRDN2QixRQUM1RGtsQyxNQUFRbmtDLEdBQUc4QyxLQUFLLFNBQ2hCekYsUUFBVTJDLEdBQUcwSSxLQUFLLFFBQ3hCLEdBQUl5N0IsT0FBUzltQyxVQUNQK0YsS0FBS3NSLE9BQU9xeUUsZ0JBQW1ELEtBQWpDM2pGLEtBQUtzUixPQUFPdXRFLFlBQVloakYsTUFBYSxDQUNyRSxNQUFNc0YsS0FBTyxJQUFJVyxLQUFLN0gsUUFBUThYLFlBSTlCLGFBSE01USxLQUFLeUosU0FBUyxDQUFFdEksT0FBTyxJQUM3QnkrQixNQUFNSyxJQUFJamdDLEtBQUtzQixPQUNmekMsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixLQUFPSyxPQUFPaUYsS0FBS3NCLE9BQ3BDLENBQUM1RyxJQUFLNUIsUUFBUThYLFdBQVk1USxLQUNuQyxDQUVGLE9BQU8sQ0FDVCxDQUtBLGVBQUFxd0IsQ0FBaUJqMUIsT0FDZnlELEtBQUsyeEIsVUFBVXAxQixNQUNqQixDQUVBLDJCQUFBa2xGLENBQTZCbGxGLE9BQzNCLE1BQU1xVixJQUFNNFosRUFBRWp2QixNQUFNSSxlQUNkckcsS0FBT3NiLElBQUlILEtBQUssUUFDdEIsUUFBNkMsSUFBbEN6UixLQUFLc1IsT0FBT3V0RSxZQUFZdm9GLE1BQXVCLENBQ3hEMEosS0FBS3NSLE9BQU91dEUsWUFBWXZvRixNQUFRc2IsSUFBSXd2QixNQUNwQyxJQUFJdzlDLFNBQVUsRUFDVm44RSxNQUFRLEVBQ1osSUFBSyxNQUFNNUcsT0FBT21FLEtBQUtzUixPQUFPdXRFLFlBQ1MsS0FBakM3K0UsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixLQUNkLFNBQVJBLE1BQ0Y0RyxPQUFTd0IsU0FBU2pFLEtBQUtzUixPQUFPdXRFLFlBQVloakYsS0FBTSxLQUdsRCtpRixTQUFVLEVBR2QsTUFBTWdGLFNBQVdoeUUsSUFBSS9VLFFBQVEsZ0JBQWdCNkMsS0FBSyxjQUM1Q3VELElBQU1nQixTQUFTMi9FLFNBQVM3d0IsU0FBUyxjQUFjN2UsT0FBUSxJQUM3RDB2QyxTQUFTMXZDLEtBQUt6eEMsT0FDVkEsUUFBVVEsS0FBUTI3RSxRQUtoQmh0RSxJQUFJL1UsUUFBUSxRQUFRNkMsS0FBSywwQ0FBMENrQixPQUFTLEdBQzlFWixLQUFLaEMsUUFBTyxHQUxvRSxJQUE5RTRULElBQUkvVSxRQUFRLFFBQVE2QyxLQUFLLDBDQUEwQ2tCLFFBQ3JFWixLQUFLaEMsUUFBTyxFQU9sQixDQUNGLENBRUEsYUFBQTZsRixDQUFlQyxXQUNiLE1BQU1qSCxVQUFZNzhFLEtBQUs2OEUsVUFDakJoaEYsSUFBTW9JLFNBQVNyRSxPQUFPbUUsS0FBSzg0RSxXQUFXbjlFLE1BQUs3RCxLQUFPZ2hGLFVBQVVoaEYsT0FBU21FLEtBQUtzUixPQUFPeXNFLE9BQU8sSUFBTStGLFVBQ3BHLE9BQU9qSCxVQUFVaGhGLElBQ25CLENBS0EsbUJBQU1zMkIsQ0FBZTUxQixNQUFPNjFCLFVBQzFCLEdBQUksQ0FBQyxPQUFRLFFBQVFwdkIsU0FBU3pHLE1BQU1rMkIsV0FBVzExQixRQUFRdWxCLFFBQVMsQ0FDOUQsR0FBSS9sQixNQUFNazJCLFVBQVVzeEQsVUFBVTE3RSxRQUFRLHlCQUEyQixFQUMvRCxPQUVGOUwsTUFBTWsyQixVQUFVc3hELFVBQVl4bkYsTUFBTWsyQixVQUFVc3hELFVBQVksdUJBQzFELENBQ0EsUUFBeUMsSUFBOUIzeEQsU0FBUyx1QkFBcUUsSUFBMUJBLFNBQVMsbUJBQXlFLElBQWxDQSxTQUFTLHFCQUFzQyxDQVk1SixHQVhJcHlCLEtBQUtzUixPQUFPeXJFLGVBQWlCM3FELFNBQVMsbUJBQ3hDcHlCLEtBQUtzUixPQUFPeXJFLGFBQWUzcUQsU0FBUyxpQkFDcEM5MEIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsMEJBQTJCcEksS0FBS3NSLE9BQU95ckUsY0FDakUvOEUsS0FBS3NSLE9BQU9xc0UsTUFBUTM5RSxLQUFLc1IsT0FBT3lyRSxhQUNoQy84RSxLQUFLd2lGLHlCQUNDeGlGLEtBQUt5aUYsaUJBRVR6aUYsS0FBS3NSLE9BQU8weUUsbUJBQXFCNXhELFNBQVMsdUJBQzVDcHlCLEtBQUtzUixPQUFPMHlFLGlCQUFtQjV4RCxTQUFTLHFCQUN4QzkwQixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSw4QkFBK0JwSSxLQUFLc1IsT0FBTzB5RSxtQkFFbkVoa0YsS0FBS3NSLE9BQU9nc0UsYUFBZWxyRCxTQUFTLGFBQWMsQ0FDcEQsTUFBTXhnQixJQUFNNFosRUFBRXhyQixLQUFLdVIsUUFBUTdSLEtBQUssU0FDMUJ1a0YsUUFBVTFsRixLQUFLMmxGLE1BQ3JCdHlFLElBQUlsUyxLQUFLLHlCQUF5QnUrRCxPQUNsQ3JzRCxJQUFJbFMsS0FBSyx3QkFBd0J1K0QsT0FDakNyc0QsSUFBSWxTLEtBQUssb0JBQW9Ca1YsT0FDN0I1VSxLQUFLc1IsT0FBT2dzRSxXQUFhbHJELFNBQVMsbUJBQzVCOTBCLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLFdBQVlwSSxLQUFLc1IsT0FBT2dzRSxZQUN4RHQ5RSxLQUFLc1IsT0FBTzZyRSxpQkFBbUI5Qix1QkFBdUIyQix1QkFFdEQsTUFBTW1ILE9BQVMsS0FBTzVsRixLQUFLMmxGLE1BQVFELFNBRS9CRSxPQUFTLFVBQ0wsSUFBSW5vRSxTQUFRaEIsU0FBV3VHLFdBQVd2RyxRQUFTbXBFLFNBRXJELENBQ0EsUUFBbUQsSUFBdkMveEQsU0FBUywwQkFBNEMsQ0FDL0QsTUFBTS96QixLQUFPbkMsT0FBT2syQixTQUFTLDJCQUN6Qi96QixPQUFTMkIsS0FBS3M4RSx1QkFBdUJDLGdCQUN2Q3Y4RSxLQUFLc1IsT0FBTytzRSxpQkFBa0IsRUFDOUJyK0UsS0FBS3NSLE9BQU9ndEUsZ0JBQWtCLElBQ3JCamdGLE9BQVMyQixLQUFLczhFLHVCQUF1QkcsZUFDOUN6OEUsS0FBS3NSLE9BQU8rc0UsaUJBQWtCLEVBQzlCcitFLEtBQUtzUixPQUFPZ3RFLGdCQUFrQixJQUNyQmpnRixPQUFTMkIsS0FBS3M4RSx1QkFBdUJJLGdCQUM5QzE4RSxLQUFLc1IsT0FBTytzRSxpQkFBa0IsRUFDMUIvZ0YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQzVCOEMsS0FBS3NSLE9BQU9ndEUsZ0JBQWtCLENBQUMsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxJQUUzRHQrRSxLQUFLc1IsT0FBT2d0RSxnQkFBa0IsQ0FBQyxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEtBRy9EaGhGLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLDZCQUE4QnBJLEtBQUtzUixPQUFPK3NFLGlCQUNwRS9nRixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSw4QkFBK0JwSSxLQUFLc1IsT0FBT2d0RSxnQkFDdkUsQ0FDQXQrRSxLQUFLc1IsT0FBT3F5RSxlQUF5RCxpQkFBaEN2eEQsU0FBUyxtQkFDOUM5MEIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsNEJBQTZCcEksS0FBS3NSLE9BQU9xeUUsZ0JBQ25FLElBQUssSUFBSXJqRSxFQUFJLEVBQUd3c0QsR0FBSzlzRSxLQUFLc1IsT0FBT2d0RSxnQkFBZ0IxOUUsT0FBUTBmLEVBQUl3c0QsR0FBSXhzRCxJQUFLLENBQ3BFLE1BQU1nZ0UsSUFBTXBrRixPQUFPazJCLFNBQVMscUJBQXVCOVIsSUFDL0NnZ0UsSUFBTSxJQUNSdGdGLEtBQUtzUixPQUFPZ3RFLGdCQUFnQmgrRCxHQUFLZ2dFLElBRXJDLENBQ0F0Z0YsS0FBS3NSLE9BQU9ndEUsZ0JBQWdCcHlFLE9BQU82MkQsVUFDbkMvaUUsS0FBS3NSLE9BQU9veEUsVUFBWTlqRixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtzUixPQUFPZ3RFLGlCQUNqQixpQkFBaENsc0QsU0FBUyxtQkFDNkIsTUFBM0NweUIsS0FBS3NSLE9BQU84eUUsZ0JBQWdCcnlFLFlBQzlCL1IsS0FBS3NSLE9BQU84eUUsZ0JBQWtCLEVBQzlCOW1GLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLDZCQUE4QnBJLEtBQUtzUixPQUFPOHlFLG1CQUVwRXBrRixLQUFLc1IsT0FBTzh5RSxnQkFBa0JoeUQsU0FBUyxvQkFDdkM5MEIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsNkJBQThCcEksS0FBS3NSLE9BQU84eUUsa0JBRWxCLE1BQTNDcGtGLEtBQUtzUixPQUFPOHlFLGdCQUFnQnJ5RSxhQUNyQy9SLEtBQUtzUixPQUFPOHlFLGdCQUFrQixFQUM5QjltRixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSw2QkFBOEJwSSxLQUFLc1IsT0FBTzh5RSxpQkFFeEUsTUFBTyxRQUFxQyxJQUExQmh5RCxTQUFTLGFBQ3JCcHlCLEtBQUtzUixPQUFPcXNFLFFBQVV2ckQsU0FBUyxlQUNqQ3B5QixLQUFLc1IsT0FBT3FzRSxNQUFRdnJELFNBQVMsYUFDN0JweUIsS0FBS3dpRix5QkFDQ3hpRixLQUFLeWlGLHNCQUVSLFFBQXlDLElBQTlCcndELFNBQVMsaUJBQ3JCcHlCLEtBQUtzUixPQUFPcWpDLFlBQWN2aUIsU0FBUyxtQkFDckNweUIsS0FBS3NSLE9BQU9xakMsVUFBWXZpQixTQUFTLGlCQUNqQ3B5QixLQUFLc1IsT0FBT2t0RSxtQkFBcUIsR0FDakN4K0UsS0FBS3dpRix5QkFDQ3hpRixLQUFLeWlGLHNCQUVSLFFBQTBDLElBQS9CcndELFNBQVMsa0JBQ3JCcHlCLEtBQUtzUixPQUFPb2pDLGFBQWV0aUIsU0FBUyxvQkFDdENweUIsS0FBS3NSLE9BQU9vakMsV0FBYXRpQixTQUFTLHdCQUM1QnB5QixLQUFLeWlGLHFCQUVSLENBQ0wsSUFBSyxNQUFNNW1GLE9BQU9tRSxLQUFLc1IsT0FBT3V0RSxpQkFDQyxJQUFsQnpzRCxTQUFTdjJCLE1BQXdCbUUsS0FBS3NSLE9BQU91dEUsWUFBWWhqRixPQUFTdTJCLFNBQVN2MkIsT0FDcEZtRSxLQUFLc1IsT0FBT3V0RSxZQUFZaGpGLEtBQU91MkIsU0FBU3YyQixXQUdPLElBQXhDdTJCLFNBQVMsNEJBQThDcHlCLEtBQUtzUixPQUFPa3RFLHFCQUF1QnBzRCxTQUFTLDZCQUM1R3B5QixLQUFLc1IsT0FBT2t0RSxtQkFBcUJwc0QsU0FBUywyQkFDMUNweUIsS0FBS3dpRixtQkFDTHhpRixLQUFLc1IsT0FBT294RSxVQUFZOWpGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS3NSLE9BQU9ndEUsaUJBRWhFLENBQ0EsTUFBTStGLFNBQVcsQ0FBQyxPQUFRLE1BQU8sWUFBYSxhQUFjLFdBQVksU0FBVSxTQUNsRixJQUFLLE1BQU14b0YsT0FBT3dvRixjQUNhLElBQWxCanlELFNBQVN2MkIsTUFBd0JtRSxLQUFLc1IsT0FBT3pWLE9BQVN1MkIsU0FBU3YyQixPQUN4RW1FLEtBQUtzUixPQUFPelYsS0FBT3UyQixTQUFTdjJCLEtBQ2hCLFFBQVJBLEtBQ0ZtRSxLQUFLdTlFLHFCQUlYLEdBQXdDLFNBQXBDaGhGLE1BQU1rMkIsV0FBVzExQixRQUFRdWxCLE9BQW1CLENBQzlDLE1BQU1naUUsV0FBYXRrRixLQUFLNmpGLGVBQWUsR0FDdkMsUUFBMEIsSUFBZlMsV0FBNEIsQ0FDckN0a0YsS0FBS3NSLE9BQU95c0UsS0FBT3VHLFdBRW5CLE1BQU0xeUUsSUFBTTVSLEtBQUt1UixRQUFRN1IsS0FBSyxrQkFDMUJrUyxJQUFJaFIsUUFBVWdSLElBQUksR0FBRzJ5RSxZQUN2QjN5RSxJQUFJLEdBQUcyeUUsVUFBWSxFQUV2QixDQUNGLE1BQU8sR0FBd0MsU0FBcENob0YsTUFBTWsyQixXQUFXMTFCLFFBQVF1bEIsT0FBbUIsQ0FDckQsR0FBSXRpQixLQUFLc1IsT0FBT3lzRSxPQUFTLzlFLEtBQUtzN0UsU0FBU2UsYUFBZ0JyOEUsS0FBS3NSLE9BQU95c0UsT0FBUy85RSxLQUFLczdFLFNBQVNjLGdCQUFrQjkrRSxLQUFLc0csS0FBS2c5RSxNQUFRMXdFLE1BQU0yd0UsaUJBQWlCQyxhQUFhQyxZQUVoSyxZQURBL2dGLEtBQUt3a0Ysa0JBRUEsQ0FDTCxNQUFNRixXQUFhdGtGLEtBQUs2akYsY0FBYyxHQUN0QyxRQUEwQixJQUFmUyxXQUE0QixDQUNyQ3RrRixLQUFLc1IsT0FBT3lzRSxLQUFPdUcsV0FFbkIsTUFBTTF5RSxJQUFNNVIsS0FBS3VSLFFBQVE3UixLQUFLLGtCQUMxQmtTLElBQUloUixRQUFVZ1IsSUFBSSxHQUFHMnlFLFlBQ3ZCM3lFLElBQUksR0FBRzJ5RSxVQUFZLEVBRXZCLENBQ0YsQ0FDRixDQUNBdmtGLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxxQkFBTXdtRixHQUNKLE1BQU12YyxnQkFBa0Jqb0UsS0FBS3lrRix1QkFBdUJ6a0YsS0FBS3NSLFFBQ3pELEdBQUloVSxLQUFLc0csS0FBSzJFLE1BQVFqTCxLQUFLc0csS0FBS2c5RSxNQUFRMXdFLE1BQU0yd0UsaUJBQWlCQyxhQUFhQyxZQUFhLFFBQ25FMUYsdUJBQXVCcUosZ0JBQWdCemMsWUFDckRscUUsTUFBTUMsUUFBTyxHQUNuQmdDLEtBQUtpYixPQUNQLEtBQU8sQ0FDTCxNQUFNODFDLFFBQVV6ekQsS0FBSzhrQixNQUFNN3JCLFFBQU9ndEIsR0FBS0EsRUFBRXhpQixRQUFVd2lCLEVBQUVoYixPQUNyRCxHQUFJd29ELFFBQVFud0QsT0FBUSxDQUNsQnFuRSxVQUFVN3NELFVBQVU5ZCxLQUFLc0csS0FBS3FLLElBQU1pQyxNQUFNb0wsMEJBQTBCQyxNQUNwRSxNQUFNalcsS0FBTyxDQUNYakgsS0FBTSxtQkFDTndmLFNBQVVrekMsUUFBUSxHQUFHOWlELEdBQ3JCMDJFLFFBQVMxYyxXQUVYM3FFLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFldFksTUFDaEN5RCxHQUFHQyxjQUFjekksS0FDZmpELEtBQUtDLEtBQUtDLFNBQVMsaURBRXJCd0MsS0FBS2liLE9BQ1AsTUFDRWxTLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUtDLFNBQVMsK0JBR3pCLENBQ0YsQ0FFQSw0QkFBTWluRixDQUF3Qm4vRSxNQUM1QixNQUFNdXNFLGFBQWUsQ0FDbkJqNkUsTUFBTyxDQUFDLEVBQ1JDLEtBQU0sQ0FBQyxHQUVIcVcsTUFBUSxHQUNkLElBQUssTUFBTXJTLE9BQU95SixLQUFLKzVFLFdBQVksQ0FDakMsTUFBTXAzRSxNQUFRM0MsS0FBSys1RSxXQUFXeGpGLEtBQzlCLElBQUssSUFBSXNoQixNQUFRLEVBQUcydkQsR0FBSzdrRSxNQUFNczNFLEtBQUszK0UsT0FBUXVjLE1BQVEydkQsR0FBSTN2RCxRQUFTLENBQy9ELE1BQU15bUMsSUFBTTM3QyxNQUFNczNFLEtBQUtwaUUsT0FDdkIsSUFBS2xWLE1BQU0vSSxNQUFNc2dGLGFBQStCLElBQWpCNTdCLElBQUl2dUMsU0FBb0IsQ0FDckQsSUFBSXBQLEtBQU9ySCxRQUFRQyxNQUFNdU8sVUFBVW5GLE1BQU1oQyxPQUNwQixJQUFqQjI5QyxJQUFJdnVDLFVBQThDLGlCQUFqQnV1QyxJQUFJdnVDLFdBQ3ZDcFAsS0FBT3JILFFBQVFDLE1BQU11TyxVQUFVdzJDLElBQUl2dUMsVUFDbkN1dUMsSUFBSXZ1QyxVQUFXLEdBRWJ1dUMsSUFBSWk4QixtQkFDTjU1RSxLQUFLbEssT0FBT21ELE1BQU13MUMsWUFBYSxHQUU3QmtQLElBQUlvOEIsa0JBQ04vNUUsS0FBS2xLLE9BQU9tRCxNQUFNeTFDLFdBQVksR0FFaEMsSUFBSXJxQyxLQUFPckUsS0FBS2xLLE9BQU91TyxLQUN2QixJQUFLcE8sT0FBT3V2RCxVQUFVbmhELE1BQ3BCLElBQUssTUFBTXpPLE9BQU95SixLQUFLdTVFLFlBQWEsQ0FDbEMsTUFBTW5QLE1BQVEsSUFBSS9uRSxPQUFPLElBQU05TCxJQUFLLEtBQ3BDeU8sS0FBT0EsS0FBS29GLFFBQVFnZ0UsTUFBT3pyRSxTQUFTcUIsS0FBS3U1RSxZQUFZaGpGLEtBQU0sSUFBTW9JLFNBQVNxQixLQUFLazRFLGVBQWUzaEYsS0FBTSxJQUN0RyxDQUVHSyxPQUFPdXZELFVBQVVuaEQsUUFDcEJBLEtBQU9sSSxLQUFLdUksTUFBTSxJQUFJN0ksS0FBS3dJLE1BQU1NLFNBQVMsQ0FBRXRJLE9BQU8sSUFBU0csUUFFOUR3RCxLQUFLbEssT0FBT3VPLEtBQU9BLEtBQ25CckUsS0FBS2xLLE9BQU84c0IsWUFBYzVpQixLQUFLbEssT0FBTzhzQixhQUFlLENBQUMsRUFDbEQzc0IsT0FBTzBuRCxJQUFJekosZ0JBQWtCLElBQy9CbDBDLEtBQUtsSyxPQUFPOHNCLFlBQVk0ckIsU0FBV3h3QyxTQUFTMi9DLElBQUl6SixlQUFnQixLQUU5RGorQyxPQUFPMG5ELElBQUkxSixrQkFBb0IsSUFDakNqMEMsS0FBS2xLLE9BQU84c0IsWUFBWTZyQixXQUFhendDLFNBQVMyL0MsSUFBSTFKLGlCQUFrQixLQUVsRWgrQyxPQUFPMG5ELElBQUkzSixpQkFBbUIsSUFDaENoMEMsS0FBS2xLLE9BQU84c0IsWUFBWThyQixVQUFZMXdDLFNBQVMyL0MsSUFBSTNKLGdCQUFpQixLQUVoRS85QyxPQUFPMG5ELElBQUluSCxrQkFBb0IsSUFDakN4MkMsS0FBS2xLLE9BQU84c0IsWUFBWUMsV0FBYTdrQixTQUFTMi9DLElBQUluSCxpQkFBa0IsS0FFbEU1Z0QsTUFBUW1FLEtBQUs0OEUsa0JBQ2YzMkUsS0FBS2xLLE9BQU8rSyxVQUFZeEIsS0FBSzRtRSxTQUM3QmptRSxLQUFLM1AsS0FBTzJQLEtBQUtsSyxPQUFPa0wsZUFBaUIsS0FBT2hCLEtBQUtsSyxPQUFPK0ssVUFBWSxLQUN2QyxpQkFBakI4OEMsSUFBSXZ1QyxXQUNwQnBQLEtBQUtsSyxPQUFPK0ssVUFBWTg4QyxJQUFJdnVDLFNBQzVCcFAsS0FBS2tyQyxJQUFNdnlDLFFBQVFDLE1BQU1xbUQsV0FDekJqL0MsS0FBSzNQLEtBQU8yUCxLQUFLbEssT0FBT2tMLGVBQWlCLEtBQU9oQixLQUFLbEssT0FBTytLLFVBQVksU0FDMUIsSUFBbkNiLEtBQUsvRyxNQUFNd0MsTUFBTWd3QyxXQUFXempDLEtBQ3JDaEksS0FBSy9HLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsR0FBSzNRLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU1vdUMsUUFBUXByRCxRQUc3REEsS0FBS2xLLE9BQU84SyxZQUFZdlAsVUFDMUJ1NkUsYUFBYWo2RSxNQUFNcU8sS0FBSzNQLE1BQVEyUCxLQUFLa3JDLElBQ3JDMGdDLGFBQWFqNkUsTUFBTXFPLEtBQUtsSyxPQUFPK0ssV0FBYWIsS0FBS2tyQyxLQUN4Q2xyQyxLQUFLbEssT0FBTzhLLFlBQVl0UCxVQUNqQ3M2RSxhQUFhaDZFLEtBQUtvTyxLQUFLM1AsTUFBUTJQLEtBQUtrckMsSUFDcEMwZ0MsYUFBYWg2RSxLQUFLb08sS0FBS2xLLE9BQU8rSyxXQUFhYixLQUFLa3JDLEtBRWxEampDLE1BQU05VyxLQUFLNk8sS0FDYixDQUNGLENBQ0YsQ0FDQSxJQUFLLE1BQU0yK0UsY0FBY3QvRSxLQUFLZzlFLGtCQUFtQixDQUMvQyxNQUFNcjhFLEtBQU9ySCxRQUFRQyxNQUFNdU8sVUFBVXczRSxZQUNqQzMrRSxLQUFLbEssT0FBTzhLLFdBQVdqUCxZQUNzQyxJQUFwRGk2RSxhQUFhajZFLE1BQU1xTyxLQUFLbEssT0FBT2tNLE1BQU0rRixLQUFLMVgsUUFDbkQyUCxLQUFLbEssT0FBT2tNLE1BQU0rRixLQUFLQyxHQUFLNGpFLGFBQWFqNkUsTUFBTXFPLEtBQUtsSyxPQUFPa00sTUFBTStGLEtBQUsxWCxZQUVILElBQTFEdTdFLGFBQWFqNkUsTUFBTXFPLEtBQUtsSyxPQUFPa00sTUFBTWtHLFdBQVc3WCxRQUN6RDJQLEtBQUtsSyxPQUFPa00sTUFBTWtHLFdBQVdGLEdBQUs0akUsYUFBYWo2RSxNQUFNcU8sS0FBS2xLLE9BQU9rTSxNQUFNa0csV0FBVzdYLFFBRTNFMlAsS0FBS2xLLE9BQU84SyxXQUFXaFAsWUFDOEIsSUFBbkRnNkUsYUFBYWg2RSxLQUFLb08sS0FBS2xLLE9BQU9rTSxNQUFNK0YsS0FBSzFYLFFBQ2xEMlAsS0FBS2xLLE9BQU9rTSxNQUFNK0YsS0FBS0MsR0FBSzRqRSxhQUFhaDZFLEtBQUtvTyxLQUFLbEssT0FBT2tNLE1BQU0rRixLQUFLMVgsWUFFSCxJQUF6RHU3RSxhQUFhaDZFLEtBQUtvTyxLQUFLbEssT0FBT2tNLE1BQU1rRyxXQUFXN1gsUUFDeEQyUCxLQUFLbEssT0FBT2tNLE1BQU1rRyxXQUFXRixHQUFLNGpFLGFBQWFoNkUsS0FBS29PLEtBQUtsSyxPQUFPa00sTUFBTWtHLFdBQVc3WCxRQUdyRjRYLE1BQU05VyxLQUFLNk8sS0FDYixDQUNBLElBQUlxeUMsU0FBVyxDQUFDLEVBQ2hCLE1BQU1xbEMsWUFBYzM5RSxLQUFLbzlFLG9CQUFvQnA5RSxLQUFLc1IsT0FBT3FzRSxPQUNyREEsUUFDRnJsQyxTQUFXMTVDLFFBQVFDLE1BQU11TyxVQUFVdXdFLE1BQU01aEYsT0FBT3U4QyxXQUVsRCxNQUFNNGUsWUFBYyxDQUNsQnppQixTQUFVLEdBQUt4d0MsU0FBU3FCLEtBQUt1NUUsWUFBWWhvRixJQUFLLElBQU1vTixTQUFTcUIsS0FBS2s0RSxlQUFlM21GLElBQUssS0FDdEY2OUMsV0FBWSxFQUNaQyxVQUFXLEdBRWIsR0FBdUIsS0FBbkJydkMsS0FBS3F2QyxVQUFrQixDQUN6QixNQUFNQSxnQkFBa0JyM0MsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTUMsVUFBVTVkLEtBQUtxdkMsV0FDcEMsSUFBckJBLFVBQVUvekMsU0FDWnNOLE1BQU05VyxLQUFLdTlDLFVBQVUsR0FBR1gsWUFDeEJrakIsWUFBWXZpQixVQUFZQSxVQUFVLEdBQUc1NEMsT0FBT3lnRCxZQUVoRCxDQUNBLEdBQXdCLEtBQXBCbDNDLEtBQUtvdkMsV0FBbUIsQ0FDMUIsTUFBTUEsaUJBQW1CcDNDLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU1DLFVBQVU1ZCxLQUFLb3ZDLFlBQzlELEdBQTBCLElBQXRCQSxXQUFXOXpDLE9BQWMsQ0FDM0JzTixNQUFNOVcsS0FBS3M5QyxXQUFXLEdBQUdWLFlBQ3pCLE1BQU0xMEMsUUFBVSxHQUNoQixJQUFLLE1BQU96RCxJQUFLcS9FLFNBQVV0N0UsT0FBT3dLLFFBQVFzcUMsV0FBVyxHQUFHMzRDLE9BQU80OUMsdUJBQ3pEdWhDLE1BQU03bEUsV0FDSjZsRSxNQUFNbjdDLFNBQ1J6Z0MsUUFBUWxJLEtBQUs4akYsTUFBTTdrRixZQUFjNE4sU0FBU3FCLEtBQUt1NUUsWUFBWWhqRixLQUFNLElBQU1vSSxTQUFTcUIsS0FBS2s0RSxlQUFlM2hGLEtBQU0sTUFFMUdxN0QsWUFBWXhpQixZQUFjd21DLE1BQU03a0YsWUFBYzROLFNBQVNxQixLQUFLdTVFLFlBQVloakYsS0FBTSxJQUFNb0ksU0FBU3FCLEtBQUtrNEUsZUFBZTNoRixLQUFNLE1BSXpIeUQsUUFBUXNCLE9BQVMsSUFDbkJzMkQsWUFBWXhpQixZQUFjdHlDLEtBQUthLE9BQU8zRCxTQUUxQyxDQUNGLENBQ0EsTUFBTXUyQyxVQUFZLEdBQ2xCLElBQUssSUFBSTE0QixNQUFRLEVBQUcydkQsR0FBS3huRSxLQUFLK3lDLFlBQVl6M0MsT0FBUXVjLE1BQVEydkQsR0FBSTN2RCxRQUM1RDA0QixVQUFVeitDLEtBQUssQ0FDYnFYLE1BQU9uSixLQUFLK3lDLFlBQVlsN0IsT0FBTzdtQixLQUMvQkYsTUFBT2tQLEtBQUsreUMsWUFBWWw3QixPQUFPL21CLFFBbUVuQyxNQWhFa0IsQ0FDaEJpSSxLQUFNLFlBQ04vSCxLQUFNZ1AsS0FBS2hQLEtBQ1hvUCxJQUFLSixLQUFLdS9FLE9BQ1Y5b0YsT0FBUSxDQUNOMm5CLGdCQUFpQixDQUNmbHRCLElBQUssQ0FDSEosTUFBTzZOLFNBQVNxQixLQUFLdTVFLFlBQVlyb0YsSUFBSyxJQUFNeU4sU0FBU3FCLEtBQUtrNEUsZUFBZWhuRixJQUFLLEtBRWhGQyxJQUFLLENBQ0hMLE1BQU82TixTQUFTcUIsS0FBS3U1RSxZQUFZcG9GLElBQUssSUFBTXdOLFNBQVNxQixLQUFLazRFLGVBQWUvbUYsSUFBSyxLQUVoRkMsSUFBSyxDQUNITixNQUFPNk4sU0FBU3FCLEtBQUt1NUUsWUFBWW5vRixJQUFLLElBQU11TixTQUFTcUIsS0FBS2s0RSxlQUFlOW1GLElBQUssS0FFaEZDLElBQUssQ0FDSFAsTUFBTzZOLFNBQVNxQixLQUFLdTVFLFlBQVlsb0YsSUFBSyxJQUFNc04sU0FBU3FCLEtBQUtrNEUsZUFBZTdtRixJQUFLLEtBRWhGQyxJQUFLLENBQ0hSLE1BQU82TixTQUFTcUIsS0FBS3U1RSxZQUFZam9GLElBQUssSUFBTXFOLFNBQVNxQixLQUFLazRFLGVBQWU1bUYsSUFBSyxLQUVoRkMsSUFBSyxDQUNIVCxNQUFPNk4sU0FBU3FCLEtBQUt1NUUsWUFBWWhvRixJQUFLLElBQU1vTixTQUFTcUIsS0FBS2s0RSxlQUFlM21GLElBQUssS0FFaEZDLElBQUssQ0FDSFYsTUFBTzZOLFNBQVNxQixLQUFLdTVFLFlBQVkvbkYsSUFBSyxJQUFNbU4sU0FBU3FCLEtBQUtrNEUsZUFBZTFtRixJQUFLLEtBRWhGQyxJQUFLLENBQ0hYLE1BQU82TixTQUFTcUIsS0FBS3U1RSxZQUFZOW5GLElBQUssSUFBTWtOLFNBQVNxQixLQUFLazRFLGVBQWV6bUYsSUFBSyxNQUdsRmlGLFFBQVMsQ0FDUHkrQyxJQUFLLENBQ0hya0QsTUFBT2dNLEtBQUthLElBQUlnQixTQUFTcUIsS0FBS3U1RSxZQUFZaG5DLEtBQU0sSUFBSzV6QyxTQUFTcUIsS0FBS2s0RSxlQUFlM2xDLEtBQU0sTUFFMUY5dEIsSUFBSyxDQUNIM3pCLE1BQU82TixTQUFTcUIsS0FBS3U1RSxZQUFZL25GLElBQUssSUFBTW1OLFNBQVNxQixLQUFLazRFLGVBQWUxbUYsSUFBSyxNQUdsRm1uQyxNQUFPLENBQ0xzZixJQUFLajRDLEtBQUtpNEMsSUFDVmtaLFVBQVdueEQsS0FBS214RCxVQUNoQkMsV0FBWXB4RCxLQUFLb3hELFlBRW5CUSxZQUNBcmhCLFVBQ0F5QyxVQUVGcG1DLGVBQWdCLENBQ2Q1YixLQUFNZ1AsS0FBS2hQLEtBQ1h1OEMsV0FBVyxFQUNYemdDLFFBQVMsQ0FDUEMsSUFBSy9NLEtBQUswTCxPQUVaOGhDLFlBQWE1aUMsTUFBTTQwRSxtQkFBbUJDLFNBQ3RDaHlDLE1BQU8sQ0FDTDVSLFNBQVMsSUFHYmp6QixNQUNBa04sVUFBVyxDQUNUQyxRQUFTcFgsU0FBU3FCLEtBQUswK0UsaUJBQWtCLEtBSS9DLENBRUEsb0NBQWFnQixDQUF5Qi9jLFdBQ3BDLE1BQU0vdEUsWUFBY21oRix1QkFBdUJxSixnQkFBZ0J6YyxXQUNyRGdkLFdBQWF0c0MsTUFBTTMrQixHQUFHLG9CQUFvQixDQUFDcGpCLElBQUttakIsS0FBTXpVLFFBQ3REMU8sSUFBSTBhLE9BQU9yRCxLQUFPL1QsTUFBTStULEtBQzFCM1EsS0FBS3FnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJ2ZixLQUFNLGlCQUNOd2YsU0FBVWplLE9BQU9tRSxLQUFLa2tFLFVBQVU3c0QsV0FBVzFiLE1BQUt1UCxHQUFXLFlBQU5BLElBQ3JEMDFFLFFBQVN6cUYsTUFBTStULEtBRWpCMHFDLE1BQU11c0MsSUFBSSxtQkFBb0JELFlBQ2hDLElBRUYvcUYsTUFBTTZELE1BQU1DLFFBQU8sRUFDckIsQ0FFQSw0QkFBYTBtRixDQUFpQnpjLFdBQzVCLE1BQU0vdEUsWUFBY20zQyxNQUFNNWdDLE9BQU93M0QsV0FPakMsYUFOTS90RSxNQUFNZ0UsT0FBTyxDQUNqQiwwQkFBMkJoRSxNQUFNazRDLFNBQ2pDLDBCQUEyQmw0QyxNQUFNbzRDLFNBQ2pDLHlCQUEwQnA0QyxNQUFNbzRDLGlCQUU1QnA0QyxNQUFNMm9ELG1CQUNMM29ELEtBQ1QsQ0FLQSxtQkFBYXVXLENBQVFuUixRQUFVLENBQUMsR0FFOUJBLFFBQVVWLFFBQVFDLE1BQU0yYSxZQUFZLENBQ2xDdWtFLEtBQU0sRUFDTmhCLGFBQWN6L0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBQ3hDa25GLGdCQUFpQjltRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFDM0M4bUYsaUJBQWtCMW1GLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLCtCQUM1Q29nRixXQUFZaGdGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLFlBQ3RDeW1GLGVBQWdCcm1GLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDZCQUMxQ21oRixnQkFBaUIvZ0YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQzNDb2hGLGdCQUFpQmhoRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwrQkFDM0N3bEYsVUFBVzlqRixRQUFRQyxNQUFNdU8sVUFBVTlQLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGdDQUM3RGlnRixXQUFZOUIsdUJBQXVCMkIsdUJBQ25DMkQsaUJBQWtCcmpGLEtBQUt2QixPQUFPaW5CLElBQUlDLE1BQU02ekIsbUJBQW1CLENBQUVDLFlBQWEsb0JBQXFCMTRDLEtBQU0sT0FDckc4bUYsV0FBWSxDQUFDLEVBQ2J4SCxNQUFPcmdGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUNqQ21pRixXQUFZLENBQUMsRUFDYlksaUJBQWtCLENBQUMsRUFDbkJxQyxrQkFBbUIsR0FDbkJ6RCxZQUFhLENBQ1hyb0YsSUFBSyxHQUNMQyxJQUFLLEdBQ0xDLElBQUssR0FDTEMsSUFBSyxHQUNMQyxJQUFLLEdBQ0xDLElBQUssR0FDTEMsSUFBSyxHQUNMQyxJQUFLLEdBQ0w4Z0QsS0FBTSxJQUVSMmxDLGVBQWdCLENBQ2RobkYsSUFBSyxFQUNMQyxJQUFLLEVBQ0xDLElBQUssRUFDTEMsSUFBSyxFQUNMQyxJQUFLLEVBQ0xDLElBQUssRUFDTEMsSUFBSyxFQUNMQyxJQUFLLEVBQ0w4Z0QsS0FBTSxHQUVSbEQsVUFBVyxHQUNYNnBDLG1CQUFvQixHQUNwQjlwQyxXQUFZLEdBQ1oyRCxZQUFhLEdBQ2I1RCxTQUFVLEVBQ1YycUMsYUFBYyxHQUNkN2xDLGFBQWMsQ0FDWnIyQyxJQUFLLEVBQ0xELElBQUssR0FFUDNNLEtBQU0sR0FDTmluRCxJQUFLLEdBQ0xrZ0Msd0JBQXdCLEVBQ3hCaG5CLFVBQVcsR0FDWEMsV0FBWSxHQUNad1YsU0FBVSxHQUNWMlksT0FBUSw0QkFDUjd6RSxNQUFPLDZCQUNOMVIsU0FDSCxJQUFJKzdFLHVCQUF1Qi83RSxTQUFTdEIsUUFBTyxFQUM3QyxFQzczREYsTUFBTW9uRixzQkFBc0JDLGdCQUMxQixXQUFBaGdGLEdBQ0VoSixRQUNBMkQsS0FBS3NsRixRQUFVLENBQUMsQ0FDbEIsQ0FFQSx1QkFBV0MsR0FDVCxPQUFPM21GLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtwRixhQUFjLENBQ25EanZGLEtBQU0sV0FDTmsxRCxPQUFRLElBRVosQ0FFQSx1QkFBVzE0QixHQUNULE1BQU8sT0FDVCxDQUVBLGNBQUkzWCxHQUNGLE1BQU8sRUFDVCxFQUdLLE1BQU1xcUUsU0FDWCxpQkFBT0MsQ0FBWUMsVUFDakI5eUUsT0FBTyt5RSxZQUFjLElBQUlQLGNBQ3pCLE1BQU12dUQsU0FBV3Y1QixLQUFLc0csS0FBSzJFLEtBQ3JCcXRELGtCQUFvQnQ0RCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDcER3b0YsU0FBU3R1RixLQUFLLENBQ1pkLEtBQU0sV0FDTm1ZLE1BQU8sZUFDUG0zRSxNQUFPLGNBQ1Bub0YsS0FBTSxzQ0FDTjAvRCxRQUFTdG1DLFNBQ1RndkQsTUFBTyxDQUNMLENBQ0VwckUsUUFBUSxFQUNSaGQsS0FBTSx5QkFDTm5ILEtBQU0sV0FDTnlLLE9BQVF6RCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFDbEN1UixNQUFPLGdCQUNQcTNFLFFBQVN4akYsb0JBQXNCc0YsY0FBY3FsRCxlQUFleHlDLFNBRTlELENBQ0VBLFFBQVEsRUFDUmhkLEtBQU0sbUJBQ05uSCxLQUFNLGFBQ055SyxPQUFRekQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBQ2xDdVIsTUFBTyx3QkFDUHEzRSxRQUFTeGpGLG9CQUNEc0YsY0FBY3VsRCxtQkFBbUIxeUMsU0FFM0MsQ0FDRTZILFFBQVEsRUFDUjdrQixLQUFNLG1CQUNObkgsS0FBTSxlQUNObVksTUFBTyxxQkFDUHEzRSxRQUFTeGpGLGVBQWtCeTFFLHdCQUF3QnRuRSxVQUVyRCxDQUNFNlIsUUFBUSxFQUNSN2tCLEtBQU0sb0JBQ05uSCxLQUFNLHNCQUNObVksTUFBTyxnQ0FDUHEzRSxRQUFTeGpGLGVBQWtCKzRFLHVCQUF1QjVxRSxVQUVwRCxDQUNFZ0ssUUFBUSxFQUNSaGQsS0FBTSxxQkFDTm9ILE1BQU8sWUFDUHZPLEtBQU0sV0FDTnlLLE9BQVF6RCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUNsQ3VSLE1BQU8sZ0JBQ1BxM0UsUUFBU3hqRixvQkFBc0JzRixjQUFjdW1ELGFBQWExekMsU0FFNUQsQ0FDRTZILFFBQVEsRUFDUjdrQixLQUFNLGlDQUNObkgsS0FBTSxXQUNObVksTUFBTyxnQkFDUHEzRSxRQUFTdmdELFNBQVMyRyxpQkFFcEIsQ0FDRTVwQixRQUFRLEVBQ1I3a0IsS0FBTSxjQUNObkgsS0FBTSxZQUNObVksTUFBTyxpQkFDUHEzRSxRQUFTeGpGLGVBQWtCc0YsY0FBY3dsRCxnQkFJM0N3SSxvQkFDRmhqRCxPQUFPbXpFLGFBQWUsSUFBSVgsY0FDMUJNLFNBQVN0dUYsS0FBSyxDQUNaZCxLQUFNLGNBQ05tWSxNQUNFLHlGQUNGbTNFLE1BQU8sZUFDUG5vRixLQUFNLG1DQUNOMC9ELFFBQVN0bUMsU0FDVGd2RCxNQUFPLENBQ0wsQ0FDRXByRSxRQUFRLEVBQ1JoZCxLQUFNLGdDQUNObkgsS0FBTSxhQUNOeUssT0FBUXpELEtBQUtvRSxLQUFLQyxJQUFJQyxLQUFLQyxXQUMzQjRNLE1BQU8sc0JBQ1BxM0UsUUFBU3JyRSxTQUNQbmQsS0FBS29FLEtBQUtDLElBQUlDLEtBQUtLLGNBQWUsRUFDbEMzRSxLQUFLb0UsS0FBS0MsSUFBSUMsS0FBS0MsV0FBYTRZLFNBR3BDLENBQ0VBLFFBQVEsRUFDUmhkLEtBQU0sd0NBQ05uSCxLQUFNLGVBQ055SyxPQUFRekQsS0FBS29FLEtBQUtDLElBQUlDLEtBQUtLLGFBQzNCd00sTUFBTyx3QkFDUHEzRSxRQUFTcnJFLFNBQ1BuZCxLQUFLb0UsS0FBS0MsSUFBSUMsS0FBS0ssYUFBZXdZLE9BQ2xDbmQsS0FBS29FLEtBQUtDLElBQUlDLEtBQUtDLFlBQWEsT0FNNUMsQ0FFQSxxQkFBT21rRixDQUFnQnB2RixJQUFLbWpCLEtBQU16VSxNQUNoQyxNQUFNdXhCLFNBQVd2NUIsS0FBS3NHLEtBQUsyRSxLQUNyQjA5RSxXQUFhbHNFLEtBQUtyYSxLQUFLLDhCQUE4QndMLFNBQzNEKzZFLFdBQVc3d0IsU0FBUyxhQUNoQnYrQixVQUNGb3ZELFdBQVdDLE1BQ1QsK0RBQ0U1b0YsS0FBS0MsS0FBS0MsU0FBUyxtQkFDbkIsc0NBR055b0YsV0FBV0MsTUFDVCw2REFDRTVvRixLQUFLQyxLQUFLQyxTQUFTLGlCQUNuQixrREFFSnVjLEtBQ0dyYSxLQUFLLDZCQUNMK3hCLE9BQU1sMUIsT0FBU3FMLGNBQWM2a0QsU0FBU2x3RCxTQUN6Q3dkLEtBQ0dyYSxLQUFLLCtCQUNMK3hCLE9BQU1sMUIsT0FBUzZ5QixzQkFBc0IzZSxPQUFPbFUsUUFDakQsRUN4SkssTUFBTTRwRixXQUNYLCtCQUFXQyxHQUNULE1BQU8sQ0FBQyxXQUFZLFVBQVcsV0FDakMsQ0FFQSw0QkFBYUMsQ0FBaUJ6ekUsT0FBUXROLE1BQ3BDLEdBQ0VBLEtBQUtqSCxNQUNMOG5GLFdBQVdDLHFCQUFxQnBqRixTQUFTc0MsS0FBS2pILE1BQzlDLENBQ0EsTUFBTWlvRixTQUFXMXpFLE9BQU9oRyxNQUFNaUcsS0FBS3RULEtBQzdCcU0sRUFBSXRHLEtBQUtzRyxFQUFJMDZFLFNBQVcsRUFDeEJsN0IsRUFBSTlsRCxLQUFLOGxELEVBQUlrN0IsU0FBVyxFQUN4QnpzRSxPQUFTeXNFLFNBQ1Qxc0UsTUFBUTBzRSxTQUNkLElBQUlDLGlCQUFtQjN6RSxPQUFPakcsT0FBT3dPLFdBQVc1a0IsUUFBT3FiLE1BQ3JELE1BQU1pZSxFQUFJamUsSUFBSWEsT0FDZCxPQUNFdlcsT0FBT3NxRixRQUFRMzJELEVBQUVqa0IsRUFBR0EsRUFBR0EsRUFBSWdPLFFBQzNCMWQsT0FBT3NxRixRQUFRMzJELEVBQUV1N0IsRUFBR0EsRUFBR0EsRUFBSXZ4QyxPQUM3QixJQUdGLE9BREswc0UsaUJBQWlCM2xGLFNBQVEybEYsaUJBQW1CM3pFLE9BQU9qRyxPQUFPa08sWUFDdkR2VixLQUFLakgsTUFDWCxJQUFLLFdBQ0gsR0FBSWlILEtBQUswUSxRQUFVcVcsU0FBU0MsV0FBV0ksUUFDckMsR0FBSTY1RCxpQkFBaUIzbEYsT0FDbkIsSUFBSyxNQUFNb1EsU0FBU3UxRSxpQkFDbEJsNkQsU0FBU3NDLGtCQUFrQjNkLE1BQU05VyxNQUFPb0wsV0FLbkNpaEYsaUJBQWlCM2xGLE9BQzFCeXJCLFNBQVM2QyxpQkFBaUI1cEIsS0FBTWloRixpQkFBaUJod0YsUUFBT3dNLEdBQUtBLEVBQUU3SSxNQUFNaTFCLE9BQU92dUIsU0FBUW9ELEtBQUlqQixHQUFLQSxFQUFFN0ksU0FFL0ZteUIsU0FBUzZDLGlCQUFpQjVwQixLQUFNaEksS0FBSzhrQixNQUFNK3BCLFFBQVE1MUMsUUFBT2d0QixLQUFPQSxFQUFFekgsWUFBVzlYLEtBQUl1ZixHQUFLQSxFQUFFekgsYUFFM0YsTUFDRixJQUFLLGdCQUN1QixJQUFmeFcsS0FBS21oRixPQUFrRCxpQkFBbEJuaEYsS0FBS29oRixlQUEyRCxJQUEzQjM5RSxHQUFHbzFDLFFBQVE3NEMsS0FBS21oRixRQUEyRSxtQkFBMUMxOUUsR0FBR28xQyxRQUFRNzRDLEtBQUttaEYsT0FBT25oRixLQUFLb2hGLFdBQ2hLMzlFLEdBQUdvMUMsUUFBUTc0QyxLQUFLbWhGLE9BQU9uaEYsS0FBS29oRixVQUFVSCxrQkFFeEMsTUFPRixRQUNFLEdBQUlqaEYsS0FBSzRxRCxTQUFXNXFELEtBQUtvaEYsU0FBVSxDQUNqQyxNQUFNaDNCLElBQU05bkQsY0FBY21KLFVBQVV6TCxLQUFLNHFELFNBQ3pDLEdBQ0VSLElBQUlwcUQsS0FBS29oRixXQUNxQixtQkFBdkJoM0IsSUFBSXBxRCxLQUFLb2hGLFVBRWhCLElBQ0VwaEYsS0FBS3NILE1BQVFnRyxPQUFPaEcsTUFBTWpQLEtBQzFCK3hELElBQUlwcUQsS0FBS29oRixVQUFVcGhGLEtBQ3JCLENBQUUsTUFBT2tZLE9BQ1B2UyxRQUFRcUksS0FBS2tLLE1BQU0zTixRQUNyQixDQUVKLEVBR04sQ0FDRixFQ3ZFSyxNQUFNODJFLDhCQUE4QkMsU0FDekMsaUJBQUE5c0UsQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFDcEJ6YyxLQUFLc0csS0FBSzJFLE9BQ1p3UixLQUNHcmEsS0FBSyxrQkFDTGd4QyxPQUNDLHdFQUNFcHpDLEtBQUtDLEtBQUtDLFNBQVMsOEJBQ25CLGFBRU51YyxLQUFLcmEsS0FBSywyQkFDUGd4QyxPQUFPLHNFQUNScHpDLEtBQUtDLEtBQUtDLFNBQVMsNkJBQ25CLGFBQ0Z1YyxLQUFLcmEsS0FBSywyQkFBMkIreEIsT0FBTSxLQUN6QyxJQUFJeUMsT0FDRixDQUNFemxCLE1BQU9uUixLQUFLQyxLQUFLQyxTQUFTLDZCQUMxQmdULFFBQVNsVCxLQUFLQyxLQUFLQyxTQUFTLGdDQUM1QjIyQixRQUFTLENBQ1BzMkMsUUFBUyxDQUNQaHRFLEtBQU0sK0JBQ05KLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsK0JBQzFCNDJCLFNBQVU5eEIsZ0JBQ0ZoRixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSxzQkFBdUIsR0FDdkQ2aUQsT0FBTzQ3QixTQUFTdjdFLFFBQU8sR0FHM0IyUCxNQUFPLENBQ0x4ZCxLQUFNLDZCQUNOSixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLFVBQzFCNDJCLFNBQVUsU0FHZC9ZLFFBQVMsU0FFWCxDQUFDLEdBQ0RyZCxRQUFPLEVBQUksSUFFZitiLEtBQUtyYSxLQUFLLDBCQUEwQit4QixPQUFNbnZCLGlCQUNqQ2hGLEtBQUtvaEQsTUFBTXhoRCxJQUFJLG1CQUFtQjZoRCxZQUFZbjhDLE9BQU9sQixLQUFLb2xGLFVBQVUvb0YsTUFBTUMsUUFBTyxFQUFJLElBR2xHLEVDNUNLLE1BQU0rb0YsZ0NBQWdDQyxvQkFDM0MsaUJBQUFsdEUsQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFDeEIsSUFBSWt0RSxZQUFhLEVBQ2pCLEdBQXVCLE9BQW5CM3BGLEtBQUtDLEtBQUtpMEQsS0FDWnkxQixZQUFhLE9BQ1IsUUFBMkIsSUFBaEIzcEYsS0FBSzRwRixPQUNyQixJQUFLLE1BQU12bkYsS0FBS0MsT0FBT0osT0FBT2xDLEtBQUs0cEYsT0FBTzFsRixTQUNwQzdCLEVBQUU2eEQsT0FBU2wwRCxLQUFLQyxLQUFLaTBELE9BQ3ZCeTFCLFlBQWEsR0FJZEEsYUFDSGx0RSxLQUNHcmEsS0FBSywyQkFDTGd4QyxPQUNDLDRDQUNFcHpDLEtBQUtDLEtBQUtDLFNBQVMsNEJBQ25CLEtBQ0FGLEtBQUtDLEtBQUtDLFNBQVMsNEJBQ25CLFFBRU51YyxLQUFLcmEsS0FBSywyQkFBMkIreEIsT0FBTSxLQUN6QyxNQUFNNWhCLFFBQ0osTUFDQXZTLEtBQUtDLEtBQUtDLFNBQVMsOEJBRG5CLFVBSUFGLEtBQUtDLEtBQUtDLFNBQVMsb0NBSm5CLFVBT0FGLEtBQUtDLEtBQUtDLFNBQVMseUNBUG5CLFVBVUFGLEtBQUtDLEtBQUtDLFNBQVMsd0NBVm5CLFVBYUFGLEtBQUtDLEtBQUtDLFNBQVMsb0NBQ25CLE9BQ0YsSUFBSTAyQixPQUNGLENBQ0V6bEIsTUFBT25SLEtBQUtDLEtBQUtDLFNBQVMsNEJBQzFCZ1QsUUFBU1gsUUFDVHNrQixRQUFTLENBQUMsRUFDVjlZLFFBQVMsU0FFWCxDQUFDLEdBQ0RyZCxRQUFPLEVBQUksSUFHbkIsRUNoREssTUFBTW1wRiwyQkFBMkJDLGVBQ3RDLGlCQUFBdHRFLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BS3hCLElBQUlzdEUsWUFBYy9wRixLQUFLc0csS0FBS2c5RSxNQUFRMXdFLE1BQU0yd0UsaUJBQWlCQyxhQUFhQyxZQUN4RSxJQUFLc0csWUFBYSxDQUNoQixNQUFNQyxRQUFVaHFGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUMxQyxHQUFJb3FGLFFBQVUsRUFBRyxDQUVmRCxZQURpQi9wRixLQUFLb1AsT0FBT25XLFFBQU9tRyxHQUFLLENBQUNBLEVBQUUwZSxVQUFVQyxRQUFVM2UsRUFBRTBlLFVBQVU5ZCxLQUFLc0csS0FBS3FLLEtBQU9pQyxNQUFNb0wsMEJBQTBCOGhELE1BQU9wNkQsU0FBU2tOLE1BQU1vTCwwQkFBMEJDLFNBQVEzYSxPQUM1SjBtRixPQUMzQixDQUNGLENBRUlELGNBQ0Z0dEUsS0FDR3JhLEtBQUssMkJBQ0xneEMsT0FBTyxrQ0FBb0NwekMsS0FBS0MsS0FBS0MsU0FBUyxpQ0FBbUMsUUFDcEd1YyxLQUFLcmEsS0FBSyx3QkFBd0IreEIsT0FBTSxLQUN0QzRwRCx1QkFBdUI1cUUsUUFBTyxLQUk5Qm5ULEtBQUtzRyxLQUFLZzlFLE1BQVExd0UsTUFBTTJ3RSxpQkFBaUJDLGFBQWFDLGNBQ3hEaG5FLEtBQ0dyYSxLQUFLLDJCQUNMZ3hDLE9BQ0MsMkJBQ0VwekMsS0FBS0MsS0FBS0MsU0FBUyxzQkFDbkIsUUFFTnVjLEtBQUtyYSxLQUFLLGlCQUFpQit4QixPQUFNLEtBQy9Cc21ELHdCQUF3QnRuRSxRQUFPLElBR3JDLEVDcENLLE1BQU04MkUsa0JBQWtCcGlGLFNBQzdCLFdBQUFFLENBQWFDLEtBQU1DLGNBQ08sSUFBYkQsS0FBS0ksTUFDZEosS0FBS0ksSUFBTSxnREFFYnJKLE1BQU1pSixLQUFNQyxTQUNadkYsS0FBS3VGLFFBQVVBLE9BQ2pCLENBRUEsVUFBTWlpRixHQUNKLElBQUt4bkYsS0FBS3luRixRQUVSLE9BQU8xK0UsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUyxrQkFFbkQsTUFBTWtxRixNQUFROW9GLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU8yckYsT0FDNUNDLE9BQVMsR0FDZixJQUFJQyw0QkFJSixHQUhBRixNQUFNRyxZQUFjamdGLGNBQWMrOEMsVUFBVStpQyxNQUFNRyxvQkFDdkMsSUFBSS9sRixLQUFLNGxGLE1BQU1HLGFBQWExbUYsS0FBSyxDQUFFbUIsT0FBTyxLQUFTRyxNQUMxRHdCLFNBQVN5akYsTUFBTUcsYUFFakJILE1BQU1HLGFBQ05ILE1BQU1HLFlBQWM3bkYsS0FBSzlGLE1BQU02QixPQUFPQyxRQUFRcTJDLEdBQUdqOEMsUUFFakR3eEYsa0NBQW9DLElBQUk1ckUsU0FBUWhCLFVBQzlDLE1BQU04c0UsbUJBQ0pKLE1BQU1HLFlBQWM3bkYsS0FBSzlGLE1BQU02QixPQUFPQyxRQUFRcTJDLEdBQUdqOEMsTUFDN0MyeEYscUJBQXVCTCxNQUFNRyxZQUFjQyxtQkFDM0N4aUYsS0FBTyxDQUNYbUosTUFBTyxJQUNQK0IsUUFBU2xULEtBQUtDLEtBQUt5VyxPQUFPLDRCQUE2QixDQUNyRGcwRSxpQkFBa0Job0YsS0FBSzlGLE1BQU02QixPQUFPQyxRQUFRcTJDLEdBQUdqOEMsTUFDL0MweEYsbUJBQ0FDLHFCQUNBRSxvQkFBcUJQLE1BQU1HLFlBQzNCOVcsTUFBTy93RSxLQUFLMUosT0FFZDY5QixRQUFTLENBQ1B5cUMsT0FBUSxDQUNObmhFLEtBQU0sK0JBQ05KLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsZUFDMUI0MkIsU0FBVSxJQUNEcFosU0FBUSxJQUduQjZqRCxRQUFTLENBQ1BwaEUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxnQkFDMUI0MkIsU0FBVSxLQUNSc3pELE1BQU1RLFVBQVlKLG1CQUNsQkosTUFBTUcsWUFBY0UscUJBQ2Ivc0UsU0FBUSxNQUlyQkssUUFBUyxTQUNUNUIsUUFBUyxDQUFDLE9BQVEsV0FFcEIsSUFBSXlhLE9BQU81dUIsTUFBTXRILFFBQU8sRUFBSSxLQUV6QjRwRiw2QkFBNkIsT0FFcEMsSUFBSyxNQUFPL3JGLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVFzOUUsT0FDbkN0eEYsT0FBMkIsSUFBbEI4RixPQUFPOUYsUUFDckJ1eEYsT0FBT3Z3RixXQUFXNEksS0FBS21vRixjQUFjdHNGLElBQUt6RixRQUU1QyxNQUNNaVgsWUFBY3JOLEtBQUtqRSxPQUFPc1IsWUFBWWpYLE1BQ3RDMmpCLFdBQWF3RyxlQUZGLCtDQUUyQixDQUFFbFQsWUFBYXM2RSxTQUMzRCxhQUFhbmtGLFlBQVlpTixPQUFPLENBQzlCN00sS0FBTXRHLEtBQUtzRyxLQUFLcUssR0FDaEIrQixRQUFTeE0sWUFBWXlNLFdBQVcsQ0FBRS9WLE1BQU84RixLQUFLOUYsUUFDOUM2VixPQUFRL1AsS0FBSzFKLEtBQ2JrYSxRQUFTdUosTUFFYixDQUVBLG1CQUFNb3VFLENBQWV6eEUsZUFBZ0J0Z0IsT0FDbkMsSUFBSXluRCxtQkFDQWYsS0FFRkEsS0FERWwxQyxjQUFjKzhDLFVBQVV2dUQsY0FDWixJQUFJMEwsS0FBSzFMLE9BQU8rSyxLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BRTlDd0IsU0FBUzdOLE9BRWxCLE1BQU02eEUsVUFBWWpvRSxLQUFLOUYsTUFBTTZCLE9BQzdCLE9BQVEyYSxnQkFDTixJQUFLLFlBQ0htbkMsbUJBQXFCdmdELEtBQUtDLEtBQUtDLFNBQVMsa0JBQ3hDd0MsS0FBSzlGLE1BQU04L0IsV0FBVzhpQixLQUFNLENBQUVuakIsYUFBYSxJQUMzQyxNQUNGLElBQUssU0FDSGtrQixtQkFBcUJ2Z0QsS0FBS0MsS0FBS0MsU0FBUyxxQkFDeEN3QyxLQUFLb29GLGdCQUFnQnRyQyxNQUNyQixNQUNGLElBQUssY0FDSGUsbUJBQXFCdmdELEtBQUtDLEtBQUtDLFNBQVMsb0JBQ3hDd0MsS0FBSzlGLE1BQU1naUQsTUFBTStyQixVQUFVanNFLFFBQVFxMkMsR0FBR2o4QyxNQUFRMG1ELE1BQzlDLE1BQ0YsSUFBSyxRQUNIZSxtQkFBcUJ2Z0QsS0FBS0MsS0FBS0MsU0FBUyxnQkFDeEN3QyxLQUFLOUYsTUFBTWdFLE9BQU8sQ0FDaEIsbUNBQ0UrcEUsVUFBVXZrRCxnQkFBZ0I1c0IsSUFBSVYsTUFBUTBtRCxPQUc5QyxNQUFPLENBQUVlLG1CQUFvQmYsS0FDL0IsQ0FHQSxxQkFBTXNyQyxDQUFpQmh5RixPQUNyQixNQUFNc2pCLFNBQVdzTSxhQUFhdE0sU0FDOUIsSUFBSUssV0FBYXdHLGVBQWU3RyxTQUFVLENBQUMsR0FDM0MsTUFBTTdKLGNBQWdCck0sWUFBWWlOLE9BQU8sQ0FDdkM3TSxLQUFNdEcsS0FBS3NHLEtBQUtxSyxHQUNoQitCLFFBQVN4TSxZQUFZeU0sV0FBVyxDQUFFL1YsTUFBTzhGLEtBQUs5RixRQUM5QzZWLE9BQVF6UyxLQUFLQyxLQUFLeVcsT0FBTyxvQkFBcUIsQ0FDNUMrOEQsTUFBTy93RSxLQUFLMUosT0FFZGthLFFBQVN1SixPQUVMMU4sV0FBYXdELFFBQVF3NEUsVUFDM0IsUUFBMkIsSUFBaEJoOEUsS0FBS3pMLFFBQTBDLElBQWhCeUwsS0FBS3pMLE9BQWMsQ0FDM0QsTUFBTTBuRixXQUFhbHlGLE1BQ25CMmpCLEtBQU8xTixLQUFLM00sS0FBSyxjQUFjLEdBQy9CcWEsS0FBS2hkLFFBQVF1VSxPQUFTNUMsT0FDcEJDLEtBQUtDLFVBQVUsQ0FDYnVDLFNBQVVuUixLQUFLOUYsTUFBTStULEdBQ3JCc1csYUFBYSxFQUNiMEIsUUFBUyxDQUNQWSxPQUFReWhFLFdBQ1IxaEUsT0FBUTBoRSxlQUlkLE1BQU1DLFlBQWN2aUUsYUFBYXZTLFlBQVlzRyxZQUN2Q3d1RSxZQUFZeC9ELHNCQUNady9ELFlBQVk1K0QsY0FDbEI0K0QsWUFBWXQ5RCxnQkFDZCxDQUNGLENBRUEsWUFBTS9zQixDQUFRb0gsS0FBTUMsU0FDbEIsUUFDaUMsSUFBeEJ2RixLQUFLdUYsUUFBUTJGLGFBQ1csSUFBeEJsTCxLQUFLdUYsUUFBUWlqRixPQUNwQixDQUNBLElBQUl2aUYsS0FDQXdpRixLQUV3QixPQUF4QnpvRixLQUFLdUYsUUFBUTJGLFFBQ2ZqRixLQUFPM0ksS0FBSzRRLE1BQU1oUixJQUFJOEMsS0FBS3VGLFFBQVFpakYsUUFDbkNDLEtBQU94aUYsS0FBSyt0QyxZQUVaeTBDLEtBQU96b0YsS0FBS3VGLFFBQVEyRixPQUFPZ0QsTUFBTWhSLElBQUk4QyxLQUFLdUYsUUFBUWlqRixRQUFReDBDLFdBRTVELElBQUssSUFBSTF6QixFQUFJLEVBQUd3c0QsR0FBSzJiLEtBQUsxc0YsT0FBTzZ2RSxPQUFPaHJFLE9BQVEwZixFQUFJd3NELEdBQUl4c0QsSUFDbERtb0UsS0FBSzFzRixPQUFPNnZFLE9BQU90ckQsR0FBRzZ3QixNQUFRbnhDLEtBQUtpTyxLQUNyQ3c2RSxLQUFLMXNGLE9BQU82dkUsT0FBT3RyRCxHQUFLMWhCLFFBQVFDLE1BQU0yYSxZQUFZaXZFLEtBQUsxc0YsT0FBTzZ2RSxPQUFPdHJELEdBQUloYixPQUlqRCxPQUF4QnRGLEtBQUt1RixRQUFRMkYsY0FDVGpGLEtBQUsvSCxPQUFPLENBQ2hCLGdCQUFpQnVxRixLQUFLMXNGLE9BQU82dkUsU0FFL0I1ckUsS0FBS2pDLE1BQU11VCxPQUFTLElBQUlpMkUsVUFDdEJrQixLQUFLMXNGLE9BQU82dkUsT0FBT2xzRSxNQUFLcXhFLE9BQVNBLE1BQU01L0IsTUFBUW54QyxLQUFLaU8sS0FDcERqTyxLQUFLdUYsaUJBR0R2RixLQUFLdUYsUUFBUTJGLE9BQU9tc0Msd0JBQXdCLE9BQVEsQ0FBQ294QyxPQUMzRHpvRixLQUFLakMsTUFBTXVULE9BQVMsSUFBSWkyRSxVQUN0QmtCLEtBQUsxc0YsT0FBTzZ2RSxPQUFPbHNFLE1BQUtxeEUsT0FBU0EsTUFBTTUvQixNQUFRbnhDLEtBQUtpTyxLQUNwRGpPLEtBQUt1RixVQUdUdkYsS0FBS2pDLE1BQU1DLFFBQU8sRUFDcEIsWUFDUTNCLE1BQU02QixPQUFPb0gsS0FBTUMsUUFFN0IsRUNwTEssTUFBTW1qRixpQkFBaUJ2akYsU0FDNUIsV0FBQUUsQ0FBYUMsS0FBTUMsY0FDTyxJQUFiRCxLQUFLSSxNQUNkSixLQUFLSSxJQUFNLDZDQUVickosTUFBTWlKLEtBQU1DLFFBQ2QsQ0FHQSx3QkFBT3NvQixDQUFtQnhYLFlBQ3hCLE9BQVFBLFlBQ04sSUFBSyxPQUNILE9BQU92QyxVQUFVc1AsZ0JBQWdCblAsS0FDbkMsSUFBSyxVQUNILE9BQU9ILFVBQVVzUCxnQkFBZ0JsWixRQUNuQyxJQUFLLFdBQ0gsT0FBTzRKLFVBQVVzUCxnQkFBZ0JsUCxTQUNuQyxJQUFLLGFBQ0gsT0FBT0osVUFBVXNQLGdCQUFnQm1sQixXQUNuQyxRQUNFLE9BQU96MEIsVUFBVXNQLGdCQUFnQnJQLFFBRXZDLENBT0EsZUFBTTQwRSxDQUFXL2MsUUFDZixNQUFNdDJDLFdBQWF0MUIsS0FBS2pFLE9BQU82dkUsT0FDM0JodEUsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBTzZ2RSxRQUNwQyxHQUNKLElBQUssTUFBTW1GLFNBQVNuRixPQUNsQnQyQyxXQUFXbCtCLEtBQUsyNUUsT0FFbEIsYUFBYS93RSxLQUFLOUIsT0FBTyxDQUFFLGdCQUFpQm8zQixZQUM5QyxDQUVBLGlCQUFNc3pELENBQWF6ckUsT0FDakIsTUFBTTBaLFNBQVd2NUIsS0FBS3NHLEtBQUsyRSxLQUNyQmpELEtBQU90RixLQUFLakUsT0FBTzZ2RSxPQUFPenVELE9BQzFCalMsT0FBU2xMLEtBQUs5RixNQUFROEYsS0FBSzlGLE1BQVEsS0FDbkM2MkUsTUFBUSxJQUFJd1csVUFBVWppRixLQUFNLENBQUU0RixPQUFRczlFLE9BQVF4b0YsS0FBS2lPLEtBQ3pELEdBQUk0b0IsVUFBWWs2QyxNQUFNaDFFLE9BQU84c0YsUUFDM0IsYUFBYTlYLE1BQU1oekUsTUFBTUMsUUFBTyxFQUVwQyxDQU1BLDJCQUFNOHFGLEdBRUosTUFBTXp5RSxXQUFhcXlFLFNBQVM3NkQsa0JBQzFCN3RCLEtBQUtqRSxPQUFPcW5CLGlCQUVSOG9ELFNBQVdsc0UsS0FBS2pFLE9BQU9td0UsU0FDdkJqa0UsTUFBUWpJLEtBQUs5RixPQUFPMmlDLGdCQUFnQnF2QyxVQUMxQyxHQUFLamtFLE1BR0UsSUFBcUIsSUFBakJBLE1BQU1ySCxPQUtmLE9BQU9tSSxHQUFHQyxjQUFjd1UsTUFDdEJsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sdUJBQXdCLENBQUU5WixNQUFPOEYsS0FBSzlGLE1BQU01RCxRQUUxRCxDQUNMLE1BQU0wZixNQUFRLElBQUlsQyxVQVlsQixPQVhBa0MsTUFBTTliLE1BQVE4RixLQUFLOUYsTUFDbkI4YixNQUFNL04sTUFBUUEsTUFBTSxHQUFHZ0csR0FDdkIrSCxNQUFNSyxXQUFhQSxXQUNuQkwsTUFBTTlLLE9BQVNsTCxLQUFLckMsS0FDcEJxWSxNQUFNelEsUUFBVSxrQkFDaEJ5USxNQUFNakcsT0FBU3pTLEtBQUtDLEtBQUt5VyxPQUFPLG1CQUFvQixDQUNsRHkwRSxLQUFNem9GLEtBQUsxSixLQUNYNDFFLFNBQ0E3MUQsV0FBWXJXLEtBQUtqRSxPQUFPcW5CLHdCQUVwQnBOLE1BQU03VSxhQUNDNlUsTUFBTTRmLFdBQ3JCLEVBdkJFLE9BQU83c0IsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUyxpQkF3QnJELENBUUEsb0JBQU11ckYsQ0FBZ0I5MkQsS0FBTTc3QixPQUMxQixJQUFLNEosS0FBS3luRixTQUFvQixVQUFUeDFELEtBRW5CLE9BQU9scEIsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUyxrQkFFbkQsSUFBS3dDLEtBQUtqRSxPQUFPaXRGLGdCQUEyQixVQUFULzJELEtBRWpDLE9BQU9scEIsR0FBR0MsY0FBY3dVLE1BQ3RCbGdCLEtBQUtDLEtBQUt5VyxPQUFPLDRCQUE2QixDQUM1QzlaLE1BQU84RixLQUFLOUYsTUFBTTVELEtBQ2xCbXlGLEtBQU16b0YsS0FBSzFKLFFBSWpCLElBQUswSixLQUFLakUsT0FBT3NDLEtBQUtoRixRQUFtQixVQUFUNDRCLEtBQzlCLE9BQU9scEIsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUyx1QkFFbkQsTUFBTWd2RSxVQUFZeHNFLEtBQUtqRSxPQUFPNHdFLE1BQU1ILFVBQ3BDLElBQUl5YyxVQUFZanBGLEtBQUtqRSxPQUFPa3RGLFVBQ3hCdmMsU0FBVzFzRSxLQUFLakUsT0FBTzR3RSxNQUFNRCxTQUNqQyxHQUFJNXdFLE1BQU00d0UsVUFFUixhQUFhMXNFLEtBQUs5QixPQUFPLENBQ3ZCLHdCQUF5QixJQUc3QixHQUFJOUgsT0FBU3MyRSxTQUFXdDJFLE1BU3RCLGFBSk00SixLQUFLOUIsT0FBTyxDQUNoQixxQkFBc0IrcUYsVUFDdEIsd0JBQXlCN3lGLGNBRWQ0SixLQUFLa3BGLG9CQUVwQixHQUFhLGFBQVRqM0QsTUFBdUJ5NkMsU0FBV0YsVUFBVyxDQUUvQyxJQUF1QyxVQUE1QnhzRSxLQUFLbXBGLGtCQUE4QixPQUk5QyxTQUhNbnBGLEtBQUs5QixPQUFPLENBQ2hCLDBCQUEyQnd1RSxXQUV6QkEsV0FBYUYsVUFHZixhQURNeHNFLEtBQUs5QixPQUFPLENBQUUscUJBQXNCK3FGLGtCQUM3QmpwRixLQUFLb3BGLGdCQUV0QixNQUFPLEdBQWEsYUFBVG4zRCxNQUF1Qnk2QyxTQUFXLEVBRTNDLGFBQWExc0UsS0FBSzlCLE9BQU8sQ0FDdkIsMEJBQTJCd3VFLFVBR2pDLENBRUEscUJBQU15YyxHQUNKLE1BQU1FLGlCQUFtQnJwRixLQUFLOUYsT0FBTytoRCxjQUMvQmt3QixhQUFlbnNFLEtBQUtqRSxPQUFPb3dFLGFBQ2pDLEdBQUluc0UsS0FBS2pFLE9BQU9pdEYsZUFDZCxPQUFJSyxrQkFBb0JsZCxxQkFDaEJuc0UsS0FBSzlCLE9BQU8sQ0FDaEIsd0JBQXlCOEIsS0FBS2pFLE9BQU80d0UsTUFBTUgsWUFFdEN6akUsR0FBR0MsY0FBY3NLLEtBQ3RCaFcsS0FBS0MsS0FBS3lXLE9BQU8saUNBQWtDLENBQ2pEOVosTUFBTzhGLEtBQUs5RixNQUFNNUQsS0FDbEJteUYsS0FBTXpvRixLQUFLMUosUUFLckIsQ0FFQSxvQkFBTTh5RixHQUNKLElBQUtwcEYsS0FBS2pFLE9BQU9zQyxLQUFLaEYsT0FBUSxPQUM5QixJQUF1QyxVQUE1QjJHLEtBQUttcEYsa0JBQThCLE9BQzlDLE1BQU1FLGlCQUFtQnJwRixLQUFLOUYsTUFBTStoRCxjQUM5QnF0QyxhQUFlLEdBQ2ZuZCxhQUFlbnNFLEtBQUtqRSxPQUFPb3dFLGFBQ2pDLElBQUlvZCxZQUFjdnBGLEtBQUtqRSxPQUFPeXRGLE1BQU12dEMsY0FBY3d0QyxNQUNsRCxHQUFJSixpQkFBbUJFLFlBQWNwZCxhQUNuQyxJQUFLLElBQUlodkQsTUFBUSxFQUFHQSxPQUFTb3NFLFlBQWFwc0UsUUFDcENrc0UsaUJBQW1CRSxZQUFjcHNFLE9BQVNndkQsZUFDNUNvZCxhQUFlcHNFLE9Bb0JyQixPQVpBbXNFLGFBQWFseUYsS0FDWCxDQUNFZCxLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBUyw4Q0FDekI2dUUsS0FBTXBvRSxTQUFTc2xGLGNBRWpCLENBQ0VqekYsS0FBTTBKLEtBQUtqRSxPQUFPbXdFLFNBQ2xCRyxLQUFNLHNCQUdKcnNFLEtBQUswcEYsc0JBQXNCSixvQkFDM0J0cEYsS0FBSzJwRix1QkFDRTNwRixLQUFLOUIsT0FBTyxDQUN2Qix1QkFBd0I4QixLQUFLakUsT0FBTzZ0RixhQUV4QyxDQU1BLHlCQUFNQyxHQUVKLEdBQUk3cEYsS0FBS2pFLE9BQU9pdEYsZUFBZ0IsT0FDaEMsTUFBTU0sYUFBZSxHQUNmandGLE9BQVMsQ0FDYm13RixNQUFPeHBGLEtBQUtqRSxPQUFPeXRGLE1BQU12dEMsY0FBY3RyQixRQUN2Q3R5QixLQUFNMkIsS0FBS2pFLE9BQU9zQyxLQUFLaEYsUUFFbkJDLE9BQVMsQ0FDYmt3RixNQUFPeHBGLEtBQUtqRSxPQUFPeXRGLE1BQU1sd0YsT0FDekIrRSxLQUFNMkIsS0FBS2pFLE9BQU9zQyxLQUFLL0UsUUFFbkJDLFlBQ0d5RyxLQUFLakUsT0FBT3l0RixNQUFNTSxPQURyQnZ3RixXQUVFeUcsS0FBS2pFLE9BQU9zQyxLQUFLOUUsTUFjekIsR0FaSUYsT0FBT2dGLE1BQVFoRixPQUFPbXdGLE9BQ3hCRixhQUFhbHlGLEtBQUssQ0FDaEJkLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLDhDQUN6QjZ1RSxLQUFNcG9FLFNBQVM1SyxPQUFPbXdGLFNBR3RCbHdGLE9BQU8rRSxNQUFRL0UsT0FBT2t3RixPQUN4QkYsYUFBYWx5RixLQUFLLENBQ2hCZCxLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBUyxlQUN6QjZ1RSxLQUFNcG9FLFNBQVMzSyxPQUFPa3dGLFNBR3RCandGLFdBQ0YsSUFBSyxNQUFNME8sU0FBUzFPLFlBQWEsQ0FDL0IsTUFBTTZ6QixRQUFVbmxCLE1BQU0zUixLQUFLdVAsTUFBTSxtQkFFN0J1bkIsVUFDRm5sQixNQUFNaEIsZUFBaUJtbUIsUUFBUSxHQUMvQm5sQixNQUFNM1IsS0FBTzgyQixRQUFRLElBRUgsZ0JBQWhCbmxCLE1BQU03UixRQUNSNlIsTUFBTTdSLGFBQ0UsSUFBSTBMLEtBQUttRyxNQUFNN1IsT0FBTytLLEtBQUssQ0FBRW1CLE9BQU8sS0FDMUNHLE9BRUF3RixNQUFNN1IsT0FDUmt6RixhQUFhbHlGLEtBQUssQ0FDaEJkLEtBQU0yUixNQUFNM1IsS0FDWisxRSxLQUFNcGtFLE1BQU03UixNQUNaNlEsZUFBZ0JnQixNQUFNaEIsZ0JBRzVCLENBT0YsYUFMTWpILEtBQUswcEYsc0JBQXNCSixlQUM1Qmp3RixPQUFPZ0YsTUFBUS9FLE9BQU8rRSxPQUFTMkIsS0FBS2pFLE9BQU91c0Ysa0JBQ3hDdG9GLEtBQUsycEYsdUJBR0EzcEYsS0FBSzlCLE9BQU8sQ0FBRSx5QkFBeUIsR0FDdEQsQ0FPQSx3QkFBTTZyRixDQUFvQkMsY0FDeEIsSUFBSyxNQUFNalosU0FBUy93RSxLQUFLakUsT0FBTzZ2RSxPQUM5QixHQUFJbUYsTUFBTTUvQixNQUFRNjRDLGFBQWE3NEMsSUFBSyxDQUNsQzQvQixNQUFNaDFFLE9BQU84c0YsU0FBVSxRQUVLN29GLEtBQUs5RixNQUFNZ1UsTUFBTXhPLE1BQzNDdUcsTUFDZ0IsVUFBZEEsS0FBSzVILE1BQW9CNEgsS0FBSzNQLE9BQVMwekYsYUFBYTF6RixPQUt0RHlTLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS3lXLE9BQU8sMkJBQTRCLENBQzNDKzhELE1BQU9pWixhQUFhMXpGLEtBQ3BCbXlGLEtBQU16b0YsS0FBSzFKLFFBTGYwekYsYUFBYWp1RixPQUFPOHNGLFNBQVUsRUFTaEMsS0FDRixPQUdJN29GLEtBQUs5QixPQUFPLENBQUUsZ0JBQWlCOEIsS0FBS2pFLE9BQU82dkUsU0FFN0NvZSxhQUFhanVGLE9BQU84c0YsVUFDdEI5L0UsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLeVcsT0FBTyxnQ0FBaUMsQ0FDaEQrOEQsTUFBT2laLGFBQWExekYsS0FDcEJteUYsS0FBTXpvRixLQUFLMUosY0FHVDBKLEtBQUs5RixNQUFNa0Qsd0JBQXdCLE9BQVEsQ0FDL0N3QixRQUFRQyxNQUFNdU8sVUFBVTQ4RSxnQkFHOUIsQ0FPQSwyQkFBTU4sQ0FBdUJKLGNBQzNCLEdBQTRCLElBQXhCQSxhQUFhMW9GLE9BQWpCLENBQ0EsSUFBSyxNQUFNczJELGVBQWVveUIsYUFBYyxDQUV0QyxJQUFLcHlCLFlBQVltVixLQUFNLFNBQ3ZCLElBQUlwa0UsWUFBY2pJLEtBQUs5RixNQUFNMmlDLGdCQUFnQnE2QixZQUFZNWdFLE1BS3pELEdBQXFCLElBQWpCMlIsTUFBTXJILE9BQWMsQ0FDdEIsTUFBTXFwRixvQkFBc0Izc0YsS0FBSzRRLE1BQU14TyxNQUNyQ3VHLE1BQ2dCLFVBQWRBLEtBQUs1SCxNQUFvQjRILEtBQUszUCxPQUFTNGdFLFlBQVk1Z0UsT0FFbkQyekYsY0FDRmhpRixZQUFjakksS0FBSzlGLE1BQU1rRCx3QkFBd0IsT0FBUSxDQUN2RHdCLFFBQVFDLE1BQU11TyxVQUFVNjhFLGtCQUcxQmhpRixZQUFjakksS0FBSzlGLE1BQU1rNkMsWUFBWThpQixZQUFZNWdFLEtBQU0sR0FDbkQ0Z0UsWUFBWWp3RCxzQkFDUmdCLE1BQU0sR0FBRy9KLE9BQU8sQ0FDcEIsNkJBQTZCLEVBQzdCLHdCQUF5Qmc1RCxZQUFZandELGlCQUk3QyxDQUVBLEdBREFnQixNQUFRQSxNQUFNLEdBQ1csZ0JBQXJCaXZELFlBQVltVixXQUVScGtFLE1BQU1LLDBCQUNQLENBS0wsR0FBSUwsTUFBTTdSLE1BQVE4Z0UsWUFBWW1WLEtBQU8sR0FDbkMsSUFBSyxJQUFJbHZELE1BQVEsRUFBR0EsT0FBUys1QyxZQUFZbVYsS0FBTWx2RCxRQUN6Q2xWLE1BQU03UixNQUFROGdFLFlBQVltVixLQUFPbHZELE9BQVMsS0FDNUMrNUMsWUFBWW1WLE1BQVFsdkQsWUFDZGxWLE1BQU1vNUMsbUJBQW1CNlYsWUFBWW1WLGFBSzNDcGtFLE1BQU1vNUMsbUJBQW1CNlYsWUFBWW1WLEtBQzdDLENBQ0YsQ0FDQSxPQUFPcnNFLEtBQUtrcUYsc0JBQXNCWixhQWpESCxDQWtEakMsQ0FPQSxtQkFBTWEsR0FFSixhQURNbnFGLEtBQUs5QixPQUFPLENBQUUsd0JBQXlCLFVBQ2hDOEIsS0FBSzlCLE9BQU8sQ0FDdkIseUJBQXdELEVBQTlCOEIsS0FBS2pFLE9BQU80d0UsTUFBTUgsV0FFaEQsQ0FHQSxvQkFBTW1kLEdBQ0osTUFBTXZ6RixNQUFRNEosS0FBS2pFLE9BQU91c0YsV0FDMUIsSUFBS2x5RixPQUFtQixLQUFWQSxNQUFjLE9BQzVCLE1BQU1zakIsU0FBV3NNLGFBQWF0TSxTQUM5QixJQUFJSyxXQUFhd0csZUFBZTdHLFNBQVUsQ0FBQyxHQUMzQyxNQUFNN0osY0FBZ0JyTSxZQUFZaU4sT0FBTyxDQUN2QzdNLEtBQU10RyxLQUFLc0csS0FBS3FLLEdBQ2hCK0IsUUFBU3hNLFlBQVl5TSxXQUFXLENBQUUvVixNQUFPOEYsS0FBSzlGLFFBQzlDNlYsT0FBUXpTLEtBQUtDLEtBQUt5VyxPQUFPLHlCQUEwQixDQUNqRHkwRSxLQUFNem9GLEtBQUsxSixPQUVia2EsUUFBU3VKLE9BRUwxTixXQUFhd0QsUUFBUXc0RSxVQUMzQixRQUEyQixJQUFoQmg4RSxLQUFLekwsUUFBMEMsSUFBaEJ5TCxLQUFLekwsT0FBYyxDQUMzRCxNQUFNMG5GLGtCQUFvQixJQUFJeG1GLEtBQUsxTCxPQUFPK0ssS0FBSyxDQUFFbUIsT0FBTyxLQUFTRyxNQUNqRXNYLEtBQU8xTixLQUFLM00sS0FBSyxjQUFjLEdBQy9CcWEsS0FBS2hkLFFBQVF1VSxPQUFTNUMsT0FDcEJDLEtBQUtDLFVBQVUsQ0FDYnVDLFNBQVVuUixLQUFLOUYsTUFBTStULEdBQ3JCc1csYUFBYSxFQUNiMEIsUUFBUyxDQUNQWSxPQUFReWhFLFdBQ1IxaEUsT0FBUTBoRSxlQUlkLE1BQU1DLFlBQWN2aUUsYUFBYXZTLFlBQVlzRyxZQUN2Q3d1RSxZQUFZeC9ELHNCQUNady9ELFlBQVk1K0QsY0FDbEI0K0QsWUFBWXQ5RCxnQkFDZCxDQUNGLENBT0EsMkJBQU1pL0QsQ0FBdUJaLGNBRTNCLElBQUssTUFBTXB5QixlQUFlb3lCLGFBQ3BCcHlCLFlBQVlqd0QsaUJBQ2Rpd0QsWUFBWTVnRSxLQUFPLEdBQUc0Z0UsWUFBWWp3RCxtQkFBbUJpd0QsWUFBWTVnRSxTQUUxQyxnQkFBckI0Z0UsWUFBWW1WLEtBQ2RuVixZQUFZbVYsS0FBTy91RSxLQUFLQyxLQUFLQyxTQUFTLDZCQUV0QzA1RCxZQUFZbVYsS0FBTyxJQUFJblYsWUFBWW1WLFFBQVEvdUUsS0FBS0MsS0FBS0MsU0FDbkQsaUJBSU4sTUFDTXVjLFdBQWF3RyxlQURGLHFEQUMyQixDQUFFK29FLGVBQzlDLGFBQWE5bEYsWUFBWWlOLE9BQU8sQ0FDOUI3TSxLQUFNdEcsS0FBS3NHLEtBQUtxSyxHQUNoQitCLFFBQVN4TSxZQUFZeU0sV0FBVyxDQUFFL1YsTUFBTzhGLEtBQUs5RixRQUM5QzZWLE9BQVF6UyxLQUFLQyxLQUFLeVcsT0FBTyx1QkFBd0IsQ0FBRXkwRSxLQUFNem9GLEtBQUsxSixPQUM5RGthLFFBQVN1SixNQUViLENBRUEsMEJBQU1xd0UsQ0FBc0JuOEUsSUFDMUIsSUFBS2pPLEtBQUt5bkYsUUFFUixPQUFPMStFLEdBQUdDLGNBQWN3VSxNQUFNbGdCLEtBQUtDLEtBQUtDLFNBQVMsa0JBRW5ELElBQUt3QyxLQUFLakUsT0FBT2l0RixlQUVmLE9BQU9qZ0YsR0FBR0MsY0FBY3dVLE1BQ3RCbGdCLEtBQUtDLEtBQUt5VyxPQUFPLDRCQUE2QixDQUM1QzlaLE1BQU84RixLQUFLOUYsTUFBTTVELEtBQ2xCbXlGLEtBQU16b0YsS0FBSzFKLFFBSWpCLE1BQU15NkUsTUFBUS93RSxLQUFLakUsT0FBTzZ2RSxPQUFPbHNFLE1BQUtxeEUsT0FDN0JBLE1BQU01L0IsTUFBUWxqQyxLQUV2QixHQUFJOGlFLE1BQU8sQ0FDVCxNQUFNLzZELE1BQVEsSUFBSWxDLFVBQ2xCa0MsTUFBTTliLE1BQVE4RixLQUFLOUYsTUFDbkI4YixNQUFNSyxXQUFhdkMsVUFBVXNQLGdCQUFnQm5QLEtBQzdDK0IsTUFBTTlLLE9BQVNsTCxLQUFLckMsS0FDcEJxWSxNQUFNakcsT0FBU3pTLEtBQUtDLEtBQUt5VyxPQUFPLHlCQUEwQixDQUN4RHkwRSxLQUFNem9GLEtBQUsxSixLQUNYeTZFLE1BQU9BLE1BQU16NkUsT0FFZjBmLE1BQU16USxRQUFVLGlCQUNoQnlRLE1BQU0rNkQsTUFBUUEsWUFDUi82RCxNQUFNc29CLG1CQUFtQixhQUN6QnRvQixNQUFNNGYsV0FDZCxDQUNGLENBR0EsZ0JBQU1udUIsQ0FBWXRHLE1BQ2hCLE1BQU02VSxNQUFRbEMsVUFBVTIyQyxlQUFldHBELE1BR3ZDLEdBQUk2VSxNQUFNcUosT0FBUSxDQUNoQixHQUFzQixvQkFBbEJySixNQUFNelEsUUFDUixhQUFhdkYsS0FBSzZwRixzQkFDYixHQUFzQixtQkFBbEI3ekUsTUFBTXpRLFFBQ2YsYUFBYXZGLEtBQUsrcEYsbUJBQW1CL3pFLE1BQU0rNkQsTUFFL0MsQ0FDRixFQzNlRixNQUFNc1osVUFBWSxxQkFFWkMsbUJBQ0EsS0FEQUEsdUJBRUksTUFGSkEsd0JBR0ssVUFITEEscUJBSUUsT0FKRkEsMEJBTU8sWUFHUEMsU0FDQSxjQURBQSxVQUVDLGVBeUJQam9GLGVBQWVzcEIsY0FBZXpQLFVBQVcrdEMsWUFDdkMsTUFBTXgrQixZQUFjcHVCLEtBQUs4ZSxTQUFTbGYsSUFBSWlmLGlCQUVoQ3VQLFlBQVl4dEIsT0FBTyxDQUN2QnNTLFFBQVMwNUMsWUFFYixDQUVBNW5ELGVBQWVrb0YsU0FBVWxsRixLQUFNaEcsUUFBU21yRixjQUFldHVFLGVBQVl0ZSxHQUNqRSxNQUFNd08sV0FBYXErRSxpQkFBaUIzb0YsU0FDbEN1RCxLQUNBaEcsUUFDQW1yRixjQUNBdHVFLFdBSUYsYUFGTTlQLEtBQUttK0UsV0FFSm4rRSxLQUFLMm5DLFVBQ2QsQ0FFQTF4QyxlQUFlcW9GLFNBQVcsQ0FFMUIsTUFBTUMsb0JBQ0osV0FBQXZsRixHQUNFckYsS0FBSzZxRixNQUFRLElBQUlwZixJQUNqQnpyRSxLQUFLMmQsT0FBUyxJQUVoQixDQUVBLGdCQUFPbXRFLEdBQ0wsSUFBSXZyRCxNQUFRL1QsRUFBRSxRQUFROXJCLEtBQUssU0FDdEI2L0IsT0FBTzMrQixTQUNWNHFCLEVBQUUsUUFBUWtsQixPQUFPbGxCLEVBQUUscUNBQ25CK1QsTUFBUS9ULEVBQUUsUUFBUTlyQixLQUFLLFVBRXpCNi9CLE1BQU1tUixPQUNKLGdGQUdKLENBRUEsaUJBQVcveUIsQ0FBUS9SLEdBQ1p0TyxLQUFLeXRGLHVCQUNSenRGLEtBQUt5dEYscUJBQXVCLElBQUlILHFCQUVsQ3R0RixLQUFLeXRGLHFCQUFxQnB0RSxPQUFTL1IsQ0FDckMsQ0FFQSxpQkFBVytSLEdBQ1QsR0FBS3JnQixLQUFLeXRGLHFCQUFWLENBSUEsR0FBS3p0RixLQUFLeXRGLHFCQUFxQnB0RSxPQUkvQixPQUFPcmdCLEtBQUt5dEYscUJBQXFCcHRFLE9BSC9CNVUsR0FBR0MsY0FBY3dVLE1BQU0sZ0JBRnpCLE1BRkV6VSxHQUFHQyxjQUFjd1UsTUFBTSxzQkFRM0IsQ0FFQSxnQkFBV3F0RSxHQUlULE9BSEt2dEYsS0FBS3l0Rix1QkFDUnp0RixLQUFLeXRGLHFCQUF1QixJQUFJSCxxQkFFM0J0dEYsS0FBS3l0RixxQkFBcUJGLEtBQ25DLENBRUEsZUFBT0csQ0FBVUMsa0JBQ2ZBLGlCQUFpQnR6RSxTQUFRdXpFLGtCQUNsQk4sb0JBQW9CQyxNQUFNM3RGLElBQUlndUYsZ0JBQWdCNTBGLE9BQ2pEczBGLG9CQUFvQkMsTUFBTXppRixJQUFJOGlGLGdCQUFnQjUwRixLQUFNNDBGLGdCQUN0RCxHQUVKLEVBT0YsU0FBUzU3QixVQUFXMTlDLElBQUsyOUMsS0FBTW41RCxPQUM3QixNQUFNMlEsTUFBUXdvRCxLQUFLOWlELE1BQU0sS0FDekIsSUFBSStpRCxFQUFJNTlDLElBQ1IsR0FBSTdLLE1BQU1uRyxPQUFTLEVBQ2pCLElBQUssSUFBSTBmLEVBQUksRUFBR0EsRUFBSXZaLE1BQU1uRyxPQUFTLEVBQUcwZixJQUMvQmt2QyxFQUFFem9ELE1BQU11WixNQUFLa3ZDLEVBQUV6b0QsTUFBTXVaLElBQU0sQ0FBQyxHQUNqQ2t2QyxFQUFJQSxFQUFFem9ELE1BQU11WixJQUloQmt2QyxFQUFFem9ELE1BQU1BLE1BQU1uRyxPQUFTLElBQU14SyxLQUMvQixDQUVBLFNBQVNxNUQsVUFBVzc5QyxJQUFLMjlDLE1BQ3ZCLE1BQU14b0QsTUFBUXdvRCxLQUFLOWlELE1BQU0sS0FDekIsSUFBSStpRCxFQUFJNTlDLElBQ1IsR0FBSTdLLE1BQU1uRyxPQUFTLEVBQ2pCLElBQUssSUFBSTBmLEVBQUksRUFBR0EsRUFBSXZaLE1BQU1uRyxPQUFTLEVBQUcwZixJQUFLLENBQ3pDLElBQUtrdkMsRUFBRXpvRCxNQUFNdVosSUFBSyxPQUNsQmt2QyxFQUFJQSxFQUFFem9ELE1BQU11WixHQUNkLENBR0YsT0FBT2t2QyxFQUFFem9ELE1BQU1BLE1BQU1uRyxPQUFTLEdBQ2hDLENBRU8sTUFBTThwRixpQkFLWCxXQUFBcmxGLENBQWFDLEtBQU8sQ0FBQyxFQUFHaEcsUUFBVSxDQUFDLEdBQ2pDVSxLQUFLc0YsS0FBT0EsS0FDUHRGLEtBQUtzRixLQUFLcEcsUUFBT2MsS0FBS3NGLEtBQUtwRyxNQUFRLENBQUMsR0FDekNjLEtBQUtnNEIsU0FBVzE0QixPQUNsQixDQU1BLGdCQUFNZ3lDLEdBQWUsQ0FFckIsV0FBSWh5QyxHQUNGLE9BQU9WLFFBQVFDLE1BQU0yYSxZQUFZeFosS0FBS3FGLFlBQVlrVSxlQUFnQnZaLEtBQUtnNEIsU0FDekUsQ0FFQSxXQUFJMTRCLENBQVNzTSxHQUNYNUwsS0FBS2c0QixTQUFXcHNCLENBQ2xCLENBRUEsWUFBSThOLEdBQ0YsT0FBTzFaLEtBQUtWLFFBQVFvYSxRQUN0QixDQUVBLGNBQUl1ZSxHQUNGLE9BQU9qNEIsS0FBS1YsUUFBUW1hLFNBQVNwVixLQUFLLElBQ3BDLENBRUEsV0FBSTJMLEdBQ0YsT0FBSWhRLEtBQUtWLFFBQVE2ckYsSUFBWTd0RixLQUFLc0csS0FFaEM1RCxLQUFLVixRQUFRMFEsU0FDYnhNLFlBQVk2ckIsZ0JBQWdCcnZCLEtBQUtWLFFBQVEwUSxTQUVsQ3hNLFlBQVk2ckIsZ0JBQWdCcnZCLEtBQUtWLFFBQVEwUSxTQUUzQzFTLEtBQUtzRyxJQUNkLENBRUEsYUFBTWd0QixHQUVKLE1BQU8sQ0FDTHZrQixLQUFNck0sS0FDTmQsTUFBT2MsS0FBS2QsTUFDWm9HLEtBQU10RixLQUFLZzBDLFdBQ1gxMEMsUUFBU1UsS0FBS1YsUUFDZDR6RCxJQUFLbHpELEtBQUtpNEIsV0FDVnIwQixLQUFNdEcsS0FBS3NHLEtBQ1hvTSxRQUFTaFEsS0FBS2dRLFFBRWxCLENBRUEsUUFBQWdrQyxHQUNFLElBQUtoMEMsS0FBS3NGLEtBQU0sT0FDaEIsTUFBTUEsS0FBTyxDQUFDLEVBQ2QsSUFBSyxNQUFNMkosS0FBS3JQLE9BQU9tRSxLQUFLL0QsS0FBS3NGLE1BQU8sQ0FDdEMsTUFBTTNGLEVBQUlLLEtBQUtzRixLQUFLMkosR0FFbEIzSixLQUFLMkosR0FESHRQLGFBQWFDLE9BQ0xELEVBQUVxMEMsU0FBV3IwQyxFQUFFcTBDLFdBQWFwMUMsUUFBUUMsTUFBTXVzRixVQUFVenJGLEdBQy9DQSxDQUNuQixDQUNBLE9BQU8yRixJQUNULENBRUEsZUFBTXN3QixDQUFXc0Msa0JBQW9CLENBQUMsU0FJOUJsNEIsS0FBS3N4QyxhQUdYLE1BQU1oc0MsV0FBYXRGLEtBQUs0d0IsVUFDbEI3VyxXQUFhd0csZUFBZXZnQixLQUFLMFosU0FBVXBVLE1BQzNDaW1CLGdCQUFrQkMsRUFBRXpSLE1BQU0sR0FDNUIvWixLQUFLVixRQUFRK3JGLGVBQ2Y5L0QsZ0JBQWdCeHVCLFFBQVF1VSxPQUFTNUMsT0FBTzFPLEtBQUtzckYsbUJBRS9DLy9ELGdCQUFnQnh1QixRQUFRd3VGLFNBQVd2ckYsS0FBS3FGLFlBQVkvTyxLQUNwRGkxQixnQkFBZ0J4YyxVQUFVQyxPQUFPaFAsS0FBS1YsUUFBUW1hLFNBRTlDLE1BQU16SixRQUNKaFEsS0FBS1YsUUFBUTBRLFVBQVloUSxLQUFLVixRQUFRNnJGLElBQ2xDM25GLFlBQVl5TSxXQUFXalEsS0FBS1YsUUFBUTBRLFNBQ3BDLENBQUMsRUFJRDNNLFNBQVd6RSxRQUFRQyxNQUFNMmEsWUFDN0IsQ0FFRTVWLEtBQU10RyxLQUFLc0csS0FBS3FLLEdBQ2hCK0IsUUFDQUQsT0FBUXpTLEtBQUtDLEtBQUtDLFNBQVN3QyxLQUFLVixRQUFRbVAsT0FDeEMrQixRQUFTK2EsZ0JBQWdCSCxXQUUzQjhNLG1CQUdFLENBQUMsU0FBVSxhQUFhbDFCLFNBQVNoRCxLQUFLcUIsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZc2lCLHFCQUFxQixPQUVoQyxhQUFsQjlsQixLQUFLcUIsV0FBeUJnQyxTQUFTQyxRQUFVLENBQUNoRyxLQUFLc0csS0FBS3FLLEtBQzFDLGNBQWxCak8sS0FBS3FCLFdBQTBCZ0MsU0FBU0UsT0FBUSxHQUVwREMsWUFBWWlOLE9BQU9wTixVQUFVZ0UsTUFBS3FKLEtBQ3pCQSxLQUVYLENBRUEsb0JBQU11YSxFQUFnQixjQUFpQixHQUFTLENBQUMsR0FJL0MsR0FGSWpyQixLQUFLVixRQUFRdTJCLGVBQWU3MUIsS0FBS3dyRixlQUNqQ3hyRixLQUFLVixRQUFRa3JGLGdCQUFnQnhxRixLQUFLeXJGLGtCQUNqQ3pyRixLQUFLbWMsVUFFSCxDQUNMLE1BQU03VyxXQUFhdEYsS0FBSzR3QixVQUNsQjdXLFdBQWF3RyxlQUFldmdCLEtBQUswWixTQUFVcFUsTUFDM0NpbUIsZ0JBQWtCQyxFQUFFQyxVQUFVMVIsTUFBTSxHQUd0Q3N4RSxlQUFpQnJyRixLQUFLc0YsS0FBS29tRixZQUFZQyxhQUN6Q3BnRSxnQkFBZ0J4dUIsUUFBUXVVLE9BQVM1QyxPQUFPMU8sS0FBS3NyRixtQkFFL0MvL0QsZ0JBQWdCeHVCLFFBQVF3dUYsU0FBV3ZyRixLQUFLcUYsWUFBWS9PLEtBQ3BEaTFCLGdCQUFnQnhjLFVBQVVDLE9BQU9oUCxLQUFLVixRQUFRbWEsU0FHOUNuYyxLQUFLeXRGLHFCQUFxQnB0RSxPQUFPdXpCLFlBQy9CLGdCQUNBbHhDLEtBQUttYyxVQUNMb1AsZ0JBQWdCSCxVQVNwQixNQTFCRXByQixLQUFLNDFCLFdBMkJULENBRUEsdUJBQU05YixDQUFtQkMsTUFNdkJBLEtBQUtDLEdBQUcsU0FBVSx3QkFBeUJoYSxLQUFLNHJGLFVBQVUxeUYsS0FBSzhHLE9BQy9EK1osS0FBS0MsR0FBRyxRQUFTLElBQUlxd0Usd0JBQXlCcnFGLEtBQUtxaUIsVUFBVW5wQixLQUFLOEcsT0FDbEUrWixLQUFLQyxHQUFHLFFBQVMsSUFBSXF3RSxvQkFBcUJycUYsS0FBSzJ4QixVQUFVejRCLEtBQUs4RyxPQUM5RCtaLEtBQUtDLEdBQUcsV0FBWSxJQUFJcXdFLGtCQUFtQnJxRixLQUFLNHJGLFVBQVUxeUYsS0FBSzhHLE9BQy9EK1osS0FBS0MsR0FBRyxRQUFTLElBQUlxd0UsbUJBQW9CcnFGLEtBQUtvNEIsVUFBVWwvQixLQUFLOEcsT0FDN0QrWixLQUFLQyxHQUFHLFVBQVcsSUFBSXF3RSxpQkFBa0JycUYsS0FBS3E0QixPQUFPbi9CLEtBQUs4RyxPQVMxRCtaLEtBQ0dyYSxLQUFLLHlCQUNMNjBELE1BQUtqeUQsTUFBT2dlLEVBQUcyMkIsV0FBYWozQyxLQUFLNnJGLGNBQWM1MEMsTUFDbERsOUIsS0FDR3JhLEtBQUssMEJBQ0w2MEQsTUFBS2p5RCxNQUFPZ2UsRUFBRzIyQixXQUFhajNDLEtBQUs4ckYsY0FBYzcwQyxNQUNsRGw5QixLQUFLcmEsS0FBSyxJQUFJMnFGLHlCQUF5QjkxQixNQUFLLENBQUNqMEMsRUFBRzIyQixLQUFPajNDLEtBQUsrckYsU0FBUzkwQyxNQUNyRWw5QixLQUNHcmEsS0FBSyxJQUFJMnFGLGlDQUNUOTFCLE1BQUssQ0FBQ2owQyxFQUFHMjJCLEtBQU9qM0MsS0FBS2dzRixjQUFjLzBDLEtBRXhDLENBRUEsUUFBQTgwQyxDQUFVeDZFLFNBQ1IsR0FBS0EsVUFDREEsUUFBUXhVLFFBQVFrNEIsTUFDbEIxakIsUUFBUXhDLFVBQVVDLElBQ2hCaFAsS0FBS2QsTUFBTXFTLFFBQVF4VSxRQUFRazRCLE1BQVFzMUQsU0FBV0EsV0FHOUNoNUUsUUFBUXhVLFFBQVF6RyxNQUFNLENBQ3hCLE1BQU1GLE1BQVFxNUQsVUFBVXp2RCxLQUFNdVIsUUFBUXhVLFFBQVF6RyxNQUM5Q2liLFFBQVF4QyxVQUFVQyxJQUFJNVksTUFBUW0wRixTQUFXQSxVQUMzQyxDQUNGLENBRUEsYUFBQXlCLENBQWV6NkUsU0FDYixJQUFLQSxVQUFZQSxRQUFRamIsS0FBTSxPQUMvQixNQUFNMjFGLFFBQVUxNkUsUUFBUWpiLEtBQUttVyxNQUFNLEtBQ0YsU0FBN0J3L0UsUUFBUSxHQUFHamtGLGVBQ1hoSSxLQUFLc0YsV0FBeUMsSUFBMUJ0RixLQUFLc0YsS0FBSzJtRixRQUFRLEtBQ3BDanNGLEtBQUtzRixLQUFLMm1GLFFBQVEsTUFBUTE2RSxRQUFRbmIsUUFDcENtYixRQUFRaThDLFNBQVUsRUFHeEIsQ0FFQSxtQkFBTXErQixDQUFldDZFLFNBQ25CLElBQUtBLFFBQVF4VSxRQUFRbXZGLGNBQWUsYUFDWmxzRixLQUFLbXNGLFFBQVE1NkUsUUFBUXhVLFFBQVFtdkYsZUFBZSxLQUNwRDM2RSxRQUFRZ3VCLE1BQU1DLFFBQVUsT0FDMUMsQ0FFQSxtQkFBTXNzRCxDQUFldjZFLFNBQ25CLElBQUtBLFFBQVF4VSxRQUFRcXZGLGVBQWdCLGFBQ2Jwc0YsS0FBS21zRixRQUFRNTZFLFFBQVF4VSxRQUFRcXZGLGtCQUVuRDc2RSxRQUFReEMsVUFBVUMsSUFBSSxrQkFDbEJ3YyxFQUFFamEsU0FBUzhzRCxHQUFHLFdBQ0ssVUFBakI5c0QsUUFBUWxULEtBQWtCbXRCLEVBQUVqYSxTQUFTdXVDLEtBQUssWUFBWSxHQUNyRHQwQixFQUFFamEsU0FBU3V1QyxLQUFLLFlBQVksSUFFL0J0MEIsRUFBRWphLFNBQVM4c0QsR0FBRyxXQUFXN3lDLEVBQUVqYSxTQUFTdXVDLEtBQUssWUFBWSxHQUU3RCxDQVNBLGFBQU1xc0MsQ0FBU0UsYUFBY0MsUUFBUyxHQUNwQyxJQUFLRCxhQUFhenJGLE9BQVEsT0FBTyxFQUNqQyxJQUFJMnJGLGlCQUFtQkYsYUFBYTUvRSxNQUFNLEtBQzFDLE1BQU0rL0UsV0FBYUQsaUJBQWlCdnBGLFNBQVNzbkYsMkJBTTdDLEdBTEtrQyxZQUNIRCxpQkFBbUJBLGlCQUFpQmgyRixRQUNsQ2lLLEdBQUtBLElBQU04cEYsNkJBR1hodEYsS0FBS3NHLEtBQUsyRSxLQUFNLENBQ2xCLElBQUsrakYsT0FBUSxPQUFPLEVBQ3BCLEdBQUlDLGlCQUFpQnZwRixTQUFTc25GLG9CQUM1QixPQUFla0MsVUFFakIsR0FBSUQsaUJBQWlCdnBGLFNBQVNzbkYsd0JBQzVCLE9BQWlCa0MsU0FFckIsQ0FZQSxHQVZBRCxpQkFBbUJBLGlCQUFpQmgyRixRQUFPaUssR0FBS0EsSUFBTThwRixxQkFDdERpQyxpQkFBbUJBLGlCQUFpQmgyRixRQUNsQ2lLLEdBQUtBLElBQU04cEYseUJBUVRpQyxpQkFBaUJ2cEYsU0FBU3NuRixzQkFBdUIsQ0FDbkQsR0FBSXRxRixLQUFLNlAsUUFBUTQ4RSxTQUFVLE9BQWVELFVBQzFDRCxpQkFBbUJBLGlCQUFpQmgyRixRQUNsQ2lLLEdBQUtBLElBQU04cEYsc0JBRWYsQ0FFQSxHQUFJaUMsaUJBQWlCdnBGLFNBQVNzbkYseUJBQTBCLENBQ3RELE1BQU10NkUsUUFBVWhRLEtBQUs2UCxRQUFRdkssS0FBSzBLLFFBQ2xDLEdBQUlBLFFBQVFnQixPQUFTaEIsUUFBUXBELE1BQU8sQ0FDbEMsTUFBTTFTLFlBQWNnTSxTQUNsQixTQUFTOEosUUFBUXBELGVBQWVvRCxRQUFRZ0IsU0FFMUMsR0FBSTlXLE9BQ0VBLE1BQU0rK0IsUUFBUyxPQUFldXpELFNBRXRDLE1BQU8sR0FBSXg4RSxRQUFROVYsTUFBTyxDQUN4QixNQUFNQSxNQUFRb0QsS0FBS29QLE9BQU94UCxJQUFJOFMsUUFBUTlWLE9BQ3RDLEdBQUlBLE9BQ0VBLE1BQU0rK0IsUUFBUyxPQUFldXpELFNBRXRDLENBSUFELGlCQUFtQkEsaUJBQWlCaDJGLFFBQ2xDaUssR0FBS0EsSUFBTThwRix5QkFFZixDQUVBLEdBQUlpQyxpQkFBaUIzckYsT0FDbkIsSUFBSyxJQUFJMGYsRUFBSSxFQUFHQSxFQUFJaXNFLGlCQUFpQjNyRixPQUFRMGYsSUFBSyxDQUNoRCxNQUFNM2lCLEtBQU80dUYsaUJBQWlCanNFLEdBQzlCLElBQUlwbUIsWUFBY2dNLFNBQVN2SSxNQUUzQixHQURLekQsUUFBT0EsTUFBUW9ELEtBQUtvUCxPQUFPeFAsSUFBSVMsT0FDaEN6RCxNQUNGLE9BQU9BLE1BQU0rK0IsUUFFYmx3QixHQUFHQyxjQUFjd1UsTUFBTSx3QkFBd0I3ZixPQUVuRCxDQUVGLE9BQWlCNnVGLFNBQ25CLENBRUEsMEJBQWFsMEQsQ0FBZXZlLE1BQzFCLE1BQ013UixnQkFEcUJ4UixLQUFLLEdBQ1dwRyxjQUFjLElBQUkwMkUsYUFDN0QsSUFBSzkrRCxnQkFBaUIsT0FFdEIsTUFBTWxmLFdBQWFxK0UsaUJBQWlCLzFELG9CQUFvQnBKLGlCQUNuRGxmLE1BQ0xBLEtBQUt5TixrQkFBa0JDLEtBQ3pCLENBRUEsU0FBSTdhLEdBQ0YsT0FBT2MsS0FBS3NGLEtBQUtwRyxLQUNuQixDQU1BLG1CQUFNd3RGLEdBQWtCLENBT3hCLGtCQUFNbEIsR0FBaUIsQ0FPdkIsY0FBTWhCLEdBQWEsQ0FFbkIscUJBQU1pQixHQUNKLE1BQU1rQixjQUFnQnJ2RixLQUFLeXRGLHFCQUFxQnB0RSxPQUFPdXpCLFlBQ3JELFdBQ0FseEMsS0FBS2cwQyxXQUNMaDBDLEtBQUtnNEIsU0FDTGg0QixLQUFLcUYsWUFBWS9PLEtBQ2pCMEosS0FBS21jLFdBR1BuYyxLQUFLc0YsS0FBT3FuRixjQUNOM3NGLEtBQUswc0YsZUFDYixDQU9BLGVBQU10MEQsQ0FBVzc3QixPQUNmQSxNQUFNRSxpQkFFTixNQUFNc29CLE9BQVN4b0IsTUFBTUksY0FFckJvb0IsT0FBT3dhLE1BQU1DLFFBQVUsT0FDdkIsTUFBTXJpQyxPQUFTNG5CLE9BQU9ob0IsUUFBUUksT0FFOUIsSUFBSXl2RixXQUNBQyxjQUFlLEVBT25CLE1BQU14Z0YsS0FBTzBZLE9BQU9sb0IsUUFBUSxJQUFJd3RGLGFBQzVCaCtFLEtBQU11Z0YsV0FBYTVzRixLQUFLMjRCLFFBQVF0c0IsTUFFbENwQixRQUFRdVMsTUFDTiw2Q0FBNkN4ZCxLQUFLcUYsWUFBWS9PLFFBSWxFLE1BQU13MkYscUJBQXVCL25FLE9BQU93YSxNQUFNQyxTQUVyQ3JpQyxTQUNIOE4sUUFBUXFJLEtBQUsseUNBQ1JzNUUsZUFFRjVzRixLQUFLN0MsVUFDUjhOLFFBQVFxSSxLQUFLLE1BQU1uVyxxQ0FDZHl2RixlQUVINXNGLEtBQUs3QyxVQUNQMHZGLG1CQUFxQjdzRixLQUFLN0MsUUFBUSxDQUFFWixNQUFPd3dGLFlBQVksS0FHckRILFlBQWNDLG1CQUFvQjdzRixLQUFLaXJCLGlCQUN0Q2xHLE9BQU93YSxNQUFNQyxRQUFVc3RELHFCQUM5QixDQU9BLE1BQUF6MEQsQ0FBUTk3QixPQUVOLE1BRGtCLFVBQWRBLE1BQU1WLEtBQWlCbUUsS0FBSzJ4QixVQUFVcDFCLE9BQ3JCLFVBQWRBLE1BQU1WLEdBQ2YsQ0FFQSxTQUFBK3ZGLENBQVdydkYsT0FDVCxHQUFJeUQsS0FBS1YsUUFBUTJ4RCxlQUNmLE9BQU9qeEQsS0FBSzJ4QixVQUFVcDFCLE1BRTFCLENBRUEsU0FBQW8xQixDQUFXcDFCLE9BQ1QsTUFBTXdvQixPQUFTeG9CLE1BQU1JLGNBRXJCLEdBQWdCLFdBREFvb0IsT0FBT204RCxTQUNLLFdBQVluOEQsT0FBT2hvQixRQUFTLE9BQ3hEUixNQUFNRSxpQkFFTixNQUFNNFAsS0FBTzBZLE9BQU9sb0IsUUFBUSxJQUFJd3RGLGFBQ2hDLElBQUtoK0UsS0FBTSxPQUNLck0sS0FBSzI0QixRQUFRdHNCLE9BQ2hCck0sS0FBS2lyQixnQkFDcEIsQ0FPQSxPQUFBME4sQ0FBU3RzQixNQUNQLE1BQU11c0IsTUFBUXZzQixLQUFLOEksaUJBQWlCLFFBQ3BDLElBQUlvSCxTQUFVLEVBQ2QsSUFBSyxJQUFJK0QsRUFBSSxFQUFHQSxFQUFJc1ksTUFBTWg0QixPQUFRMGYsSUFBSyxDQUNyQyxNQUFNdVksS0FBT0QsTUFBTXRZLEdBRWJoYixLQURLLElBQUl3ekIsaUJBQWlCRCxNQUNoQnZuQixPQUtoQixJQUFLLE1BQU96VixJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFROUUsTUFBTyxDQUM5Qm1xRCxVQUFVenZELEtBQU1uRSxPQUNkekYsUUFDakJrNUQsVUFBVXR2RCxLQUFNbkUsSUFBS3pGLE9BQ3JCbW1CLFNBQVUsRUFFZCxDQUNGLENBQ0EsT0FBT0EsT0FDVCxDQUVBLFdBQUkxTSxHQUNGLE9BQUk3UCxLQUFLbzJCLFNBQWlCcDJCLEtBQUtvMkIsU0FDM0JwMkIsS0FBS3EyQixXQUFtQi80QixLQUFLOGUsU0FBU2xmLElBQUk4QyxLQUFLcTJCLGlCQUFuRCxDQUVGLENBRUEsV0FBSXhtQixDQUFTakUsR0FDWDVMLEtBQUtvMkIsU0FBV3hxQixDQUNsQixDQUVBLGFBQUl1USxHQUNGLE9BQUluYyxLQUFLcTJCLFdBQW1CcjJCLEtBQUtxMkIsV0FDN0JyMkIsS0FBS28yQixTQUFpQnAyQixLQUFLbzJCLFNBQVNub0IsUUFBeEMsQ0FFRixDQUVBLGFBQUlrTyxDQUFXdlEsR0FDYjVMLEtBQUtxMkIsV0FBYXpxQixDQUNwQixDQUVBLHlCQUFXMk4sR0FDVCxNQUFPLENBQ0w4eEUsY0FBYyxFQUNkNXhFLFFBQVMsQ0FBQzR3RSxXQUNWL3pELFFBQVMsR0FDVEMsaUJBQWtCLElBQ2xCMDZCLGdCQUFnQixFQUNoQmpoRCxRQUFTeE0sWUFBWXlNLGFBQ3JCazdFLEtBQUssRUFDTHQxRCxTQUFTLEVBQ1QyMEQsVUFBVSxFQUVkLENBRUEsb0JBQUljLEdBQ0YsTUFBTTBCLFNBQVcsQ0FDZjFuRixLQUFNdEYsS0FBS3NGLEtBQ1hoRyxRQUFTVSxLQUFLZzRCLFVBRWhCLE9BQU9ycEIsS0FBS0MsVUFBVW8rRSxVQUFVLENBQUNueEYsSUFBS3pGLFNBQ3BDLEdBQWMsT0FBVkEsUUFDQTRKLEtBQUtWLFFBQVFnM0IsU0FBU3R6QixTQUFTbkgsT0FDL0JBLElBQUkyTyxXQUFXeEssS0FBS1YsUUFBUWkzQixrQkFDaEMsT0FBT25nQyxRQUVYLENBRUEsWUFBSWlMLEdBRUYsT0FES3JCLEtBQUsya0IsWUFBVzNrQixLQUFLMmtCLFVBQVlybkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFDekQ4QyxLQUFLMmtCLFNBQ2QsQ0FFQSxZQUFJdGpCLENBQVV1SyxJQUNGLElBQU5BLElBQWE1TCxLQUFLMmtCLFVBQVlybkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFDNUQ4QyxLQUFLMmtCLFVBQVkvWSxDQUNuQixDQUVBLDBCQUFhNG9CLENBQWVyWSxXQUMxQixNQUFNdE0sUUFBVXZTLEtBQUs4ZSxTQUFTbGYsSUFBSWlmLFdBQ2xDLElBQUt0TSxRQUFTLE9BQ2QsTUFBTXhELFdBQWFyTSxLQUFLeTBCLFlBQVk1a0IsU0FFcEMsT0FEQXhELEtBQUs4UCxVQUFZQSxVQUNWOVAsSUFDVCxDQUVBLHdCQUFhb29CLENBQWE1a0IsU0FDeEIsTUFBTTZrQixZQUFjbEosRUFBRTNiLFFBQVF2SyxLQUFLa0wsU0FBUyxHQUM1QyxJQUFLa2tCLFlBQWEsT0FDbEIsTUFBTXJvQixXQUFhck0sS0FBSzIwQixvQkFBb0JELGFBRTVDLE9BREFyb0IsS0FBS3dELFFBQVVBLFFBQ1J4RCxJQUNULENBRUEsZ0NBQWFzb0IsQ0FBcUJzNEQsV0FDaEMsSUFBS0EsVUFBVyxPQUNoQixJQUFLQSxVQUFVbHdGLFFBQVF3dUYsU0FBVSxPQUNqQyxJQUFLMEIsVUFBVWx3RixRQUFRdVUsT0FBUSxPQUMvQixNQUFNc2pCLFNBQVdqbUIsS0FBS3VkLE1BQU1DLFNBQVM4Z0UsVUFBVWx3RixRQUFRdVUsU0FDakR6QixRQUFVbzlFLFVBQVVwd0YsUUFBUSxZQUM1QnNmLFVBQVl0TSxTQUFTOVMsU0FBU29mLFVBRXBDLGFBQWFuYyxLQUFLK0IsU0FDaEI2eUIsU0FBU3R2QixLQUNUc3ZCLFNBQVN0MUIsUUFDVDJ0RixVQUFVbHdGLFFBQVF3dUYsU0FDbEJwdkUsVUFFSixDQUVBLHFCQUFhcGEsQ0FBVXVELEtBQU1oRyxRQUFTbXJGLGNBQWV0dUUsZUFBWXRlLEdBQy9ELE1BQU1xdkYsVUFBWTV2RixLQUFLeXRGLHFCQUFxQkYsTUFBTTN0RixJQUFJdXRGLGVBRXRELElBQUt5QyxVQUVILFlBREFqaUYsUUFBUXVTLE1BQU0sMkJBQTJCaXRFLGlCQUczQyxNQUFNcCtFLEtBQU8sSUFBSTZnRixVQUFVNW5GLEtBQU1oRyxTQUdqQyxPQUZJNmMsWUFBVzlQLEtBQUs4UCxVQUFZQSxpQkFDMUI5UCxLQUFLcWdGLGdCQUNKcmdGLElBQ1QsQ0FFQSxPQUFBMmhCLENBQVMxM0IsT0FDRkEsTUFBMkIsV0FBakJrMUIsRUFBRW50QixLQUFLL0gsUUFDdEJnNUQsVUFBVXR2RCxLQUFNMUosTUFBTSxFQUN4QixDQUVBLFNBQUE2MkYsQ0FBVzcyRixPQUNKQSxNQUEyQixXQUFqQmsxQixFQUFFbnRCLEtBQUsvSCxRQUN0Qmc1RCxVQUFVdHZELEtBQU0xSixNQUFNLEVBQ3hCLENBRUEsVUFBQTgyRixDQUFZOTJGLE1BQ1YsSUFBS0EsTUFBMkIsV0FBakJrMUIsRUFBRW50QixLQUFLL0gsTUFBcUIsT0FFM0NnNUQsVUFBVXR2RCxLQUFNMUosTUFERm01RCxVQUFVenZELEtBQU0xSixNQUVoQyxDQUVBLGVBQU0rckIsQ0FBVzlsQixPQUtmQSxNQUFNRSxpQkFFTixNQUFNc29CLE9BQVN4b0IsTUFBTUksY0FDckIsR0FBSSxXQUFZb29CLE9BQU9ob0IsUUFBUyxPQUFPaUQsS0FBS280QixVQUFVNzdCLE9BQ3RELEdBQ0V3b0IsUUFDQUEsT0FBT2hXLFVBQVV3VCxTQUFTLG9CQUN6QmpsQixLQUFLc0csS0FBSzJFLEtBRVgsT0FFRixNQUFNalMsS0FBT3l1QixPQUFPaG9CLFFBQVFrNEIsS0FDeEIsY0FBY2xRLE9BQU9ob0IsUUFBUWs0QixPQUM3QmxRLE9BQU9ob0IsUUFBUXpHLEtBQ25CLElBQUtBLEtBQU0sT0FDWCxNQUFNbWtCLE9BQVNzSyxPQUFPbG9CLFFBQVEsY0FDOUIsR0FBSzRkLE9BRUUsQ0FDTCxNQUFNMFosUUFBVTFaLE9BQU90RixpQkFBaUIsZUFDeEMsSUFBSyxNQUFNK0ssS0FBS2lVLFFBQVMsQ0FDdkIsTUFBTWs1RCxNQUFRbnRFLEVBQUVuakIsUUFBUWs0QixLQUNwQixjQUFjL1UsRUFBRW5qQixRQUFRazRCLE9BQ3hCL1UsRUFBRW5qQixRQUFRekcsS0FDZDBKLEtBQUttdEYsVUFBVUUsTUFDakIsQ0FDQXJ0RixLQUFLZ3VCLFFBQVExM0IsS0FDZixNQVZFMEosS0FBS290RixXQUFXOTJGLE1BV2xCLE1BQU0rVixLQUFPMFksT0FBT2xvQixRQUFRLElBQUl3dEYsYUFDNUJycUYsS0FBS1YsUUFBUTJ4RCxnQkFDWDVrRCxNQUFNck0sS0FBSzI0QixRQUFRdHNCLFlBRW5Cck0sS0FBS2lyQixnQkFDYixFQy91QkssTUFBTXFpRSxhQUNYLFdBQUFqb0YsQ0FBYUMsS0FBTyxDQUFDLEdBQ25CdEYsS0FBS3NGLEtBQU9BLElBQ2QsQ0FFQSxNQUFBaW9GLEdBS0UsSUFKS3Z0RixLQUFLd3RGLE1BQVF4dEYsS0FBS3NGLEtBQUs0cUQsVUFDMUJsd0QsS0FBS3d0RixLQUFPNWxGLGNBQWN1b0QsbUJBQW1CbndELEtBQUtzRixLQUFLNHFELFdBR3BEbHdELEtBQUsyckMsT0FDUixHQUFJM3JDLEtBQUt3dEYsS0FDUCxPQUFReHRGLEtBQUt3dEYsS0FBS25vRixhQUFhL08sTUFDN0IsSUFBSyxnQkFDSDBKLEtBQUsyckMsT0FBUzNyQyxLQUFLd3RGLEtBQUt0ekYsTUFDeEIsTUFFRixJQUFLLFdBQ0g4RixLQUFLMnJDLE9BQVMzckMsS0FBS3d0RixVQUtsQnh0RixLQUFLMnJDLE9BQVMvakMsY0FBY2dKLGdCQUFnQjVRLEtBQUtzRixLQUFLNHFELFFBRWpFLENBRUEsU0FBSWgyRCxHQUVGLE9BREE4RixLQUFLdXRGLFNBQ0V2dEYsS0FBSzJyQyxNQUNkLENBRUEsV0FBSThoRCxHQUNGLE9BQU96dEYsS0FBSzB0RixVQUFZMXRGLEtBQUsydEYsVUFDL0IsQ0FFQSxZQUFJQyxHQUNGLE9BQU81dEYsS0FBS3NGLEtBQUt2RSxTQUFVLENBQzdCLENBRUEsT0FBSWxGLEdBQ0YsT0FBSW1FLEtBQUsydEYsV0FBbUIzdEYsS0FBSzZ0RixRQUFRMThFLFNBQ3JDblIsS0FBSzB0RixTQUFpQjF0RixLQUFLOUYsTUFBTWlYLGNBQXJDLENBRUYsQ0FFQSxRQUFJMVQsR0FDRixPQUFLdUMsS0FBS3l0RixRQUdOenRGLEtBQUsydEYsV0FBbUIzdEYsS0FBSzZ0RixRQUFRbm9GLElBQ3JDMUYsS0FBSzB0RixTQUFpQjF0RixLQUFLOUYsTUFBTXdMLFNBQXJDLEVBSFMsdURBS1gsQ0FFQSxVQUFJb29GLEdBSUYsT0FISzl0RixLQUFLK3RGLFVBQ1IvdEYsS0FBSyt0RixRQUFVbm1GLGNBQWNnSixnQkFBZ0I1USxLQUFLc0YsS0FBSzRxRCxVQUVsRGx3RCxLQUFLK3RGLE9BQ2QsQ0FFQSxXQUFJRixHQUlGLE9BSEk3dEYsS0FBS3NGLEtBQUswb0YsYUFDWmh1RixLQUFLaXVGLFNBQVcxK0UsV0FBV3FCLGdCQUFnQjVRLEtBQUtzRixLQUFLMG9GLGFBRWhEaHVGLEtBQUtpdUYsUUFDZCxDQUVBLFlBQUlQLEdBQ0YsUUFBUzF0RixLQUFLOUYsS0FDaEIsQ0FFQSxjQUFJeXpGLEdBQ0YsUUFBUzN0RixLQUFLNnRGLE9BQ2hCLENBRUEsUUFBSXYzRixHQUNGLE9BQUkwSixLQUFLMnRGLFdBQW1CM3RGLEtBQUs2dEYsUUFBUXYzRixLQUNyQzBKLEtBQUswdEYsU0FBaUIxdEYsS0FBSzlGLE1BQU01RCxLQUM5QjBKLEtBQUtzRixLQUFLaFAsV0FBUXVILENBQzNCLENBRUEsT0FBSTJ0QyxHQWNGLE9BYkt4ckMsS0FBS3NGLEtBQUtrbUMsTUFDVHhyQyxLQUFLMnRGLFdBQVkzdEYsS0FBS3NGLEtBQUtrbUMsSUFBTXhyQyxLQUFLNnRGLFFBQVFyaUQsSUFDekN4ckMsS0FBSzB0RixXQUFVMXRGLEtBQUtzRixLQUFLa21DLElBQU14ckMsS0FBSzlGLE1BQU1zeEMsTUFHakR4ckMsS0FBS3NGLEtBQUtrbUMsTUFDUDF2QyxNQUFNSSxPQUFPOEQsS0FBS3NGLEtBQUtrbUMsT0FFMUJ4ckMsS0FBS3NGLEtBQUs0b0YsYUFBYyxFQUN4Qmx1RixLQUFLc0YsS0FBS2ttQyxTQUFNM3RDLEdBSGlCbUMsS0FBS3NGLEtBQUs0b0YsYUFBYyxHQU90RGx1RixLQUFLc0YsS0FBS2ttQyxHQUNuQixDQUVBLFFBQUk3dEMsR0FDRixPQUFPcUMsS0FBS3NGLEtBQUszSCxJQUNuQixDQUVBLG1CQUFJd3dGLEdBQ0YsT0FBT251RixLQUFLbUUsV0FBYSxDQUMzQixDQUVBLGFBQUlBLEdBQ0YsT0FDRXJJLE1BQU1rRSxLQUFLc0YsS0FBS25CLFlBQ2hCbkUsS0FBS3NGLEtBQUtuQixVQUFZLEdBQ3RCbkUsS0FBS3NGLEtBQUtuQixVQUFZLEVBRWYsRUFFRm5FLEtBQUtzRixLQUFLbkIsU0FDbkIsQ0FFQSxhQUFJQSxDQUFXeUgsR0FDVDlQLE1BQU04UCxHQUNSN0MsR0FBR0MsY0FBY3dVLE1BQU0sbUNBR3JCNVIsRUFBSSxFQUNON0MsR0FBR0MsY0FBY3dVLE1BQU0sb0JBR3JCNVIsRUFBSSxFQUNON0MsR0FBR0MsY0FBY3dVLE1BQU0seUJBR3pCeGQsS0FBS3NGLEtBQUtuQixVQUFZeUgsQ0FDeEIsQ0FFQSxNQUFJcW1DLEdBUUYsT0FQS2p5QyxLQUFLc0YsS0FBSzJzQyxLQUNianlDLEtBQUtzRixLQUFLMnNDLEdBQUssR0FFYmp5QyxLQUFLOUYsUUFDUDhGLEtBQUtzRixLQUFLMnNDLEdBQUtqeUMsS0FBSzlGLE1BQU0rM0MsSUFHckJqeUMsS0FBS3NGLEtBQUsyc0MsRUFDbkIsQ0FFQSxNQUFJQSxDQUFJcm1DLEdBQ041TCxLQUFLc0YsS0FBSzJzQyxHQUFLcm1DLEVBQ1g1TCxLQUFLOUYsT0FDUDhGLEtBQUs5RixNQUFNbXFELE1BQU16NEMsRUFFckIsQ0FFQSxZQUFBd2lGLEdBQ01wdUYsS0FBS3NGLEtBQUtuQixXQUFhLEVBQ3pCNEUsR0FBR0MsY0FBY3dVLE1BQU0sK0JBR3pCeGQsS0FBS3NGLEtBQUtuQixXQUFhLENBQ3pCLENBRUEsZUFBQWtxRixHQUNNcnVGLEtBQUtzRixLQUFLbkIsV0FBYSxFQUN6QjRFLEdBQUdDLGNBQWN3VSxNQUFNLDZCQUd6QnhkLEtBQUtzRixLQUFLbkIsV0FBYSxDQUN6QixDQUVBLGNBQUFtcUYsR0FDRXR1RixLQUFLc0YsS0FBS25CLFVBQVksQ0FDeEIsQ0FFQSxnQkFBSW9xRixHQUNGLE9BQU92dUYsS0FBS3d1RixpQkFBbUJ4dUYsS0FBS3l1RixlQUN0QyxDQUVBLG1CQUFJRCxHQUNGLE9BQU94dUYsS0FBS21FLFdBQWEsQ0FDM0IsQ0FFQSxtQkFBSXNxRixHQUNGLE9BQU96dUYsS0FBS21FLFdBQWEsQ0FDM0IsQ0FFQSxhQUFJdXFGLEdBQ0YsT0FBTzF1RixLQUFLMnVGLFFBQVEvdEYsT0FBUyxDQUMvQixDQUVBLGlCQUFJZ3VGLEdBQ0YsT0FBUTV1RixLQUFLbXVGLGVBQ2YsQ0FFQSxVQUFJUSxHQUNGLE9BQU8zdUYsS0FBS3NGLEtBQUtxcEYsUUFBVSxFQUM3QixDQUVBLE9BQUloNEYsR0FpQkYsT0FoQktxSixLQUFLc0YsS0FBSzNPLE1BQ1RxSixLQUFLMnRGLFlBQWMzdEYsS0FBSzZ1RixVQUMxQjd1RixLQUFLc0YsS0FBSzNPLElBQU1xSixLQUFLOHRGLE9BQU9wcUUsZ0JBQWdCL3NCLElBQUlQLE1BQ3ZDNEosS0FBSzB0RixXQUNkMXRGLEtBQUtzRixLQUFLM08sSUFBTXFKLEtBQUs5RixNQUFNd3BCLGdCQUFnQi9zQixJQUFJUCxRQUkvQzRKLEtBQUtzRixLQUFLM08sTUFDUG1GLE1BQU1JLE9BQU84RCxLQUFLc0YsS0FBSzNPLE9BRTFCcUosS0FBS3NGLEtBQUt3cEYsYUFBYyxFQUN4Qjl1RixLQUFLc0YsS0FBSzNPLElBQU0sR0FIaUJxSixLQUFLc0YsS0FBS3dwRixhQUFjLEdBT3REOXVGLEtBQUtzRixLQUFLM08sR0FDbkIsQ0FFQSxnQkFBSW80RixHQUNGLE9BQU8vdUYsS0FBS3NGLEtBQUt5cEYsZUFBZ0IsQ0FDbkMsQ0FFQSxjQUFJem9CLEdBQ0YsSUFBSXY1QyxLQUFPL3NCLEtBQUtySixJQVFoQixPQVBJcUosS0FBSyt1RixlQUNQaGlFLE1BQVEsSUFNSEEsSUFDVCxDQUVBLFlBQUlpaUUsR0FDRixRQUFTaHZGLEtBQUtzRixLQUFLMnBGLE1BQ3JCLENBRUEsVUFBSUMsR0FDRixPQUFRbHZGLEtBQUtndkYsUUFDZixDQUVBLFdBQUlHLEdBQ0YsT0FBT252RixLQUFLOHVGLGFBQWU5dUYsS0FBS2t1RixXQUNsQyxDQUVBLGVBQUlZLEdBQ0YsT0FBUWh6RixNQUFNSSxPQUFPOEQsS0FBS3NGLEtBQUszTyxLQUNqQyxDQUVBLGVBQUl1M0YsR0FDRixPQUFRcHlGLE1BQU1JLE9BQU84RCxLQUFLc0YsS0FBS2ttQyxLQUNqQyxDQUVBLGFBQUlxakQsR0FDRixPQUFPN3VGLEtBQUsydEYsWUFBYzN0RixLQUFLMHRGLFFBQ2pDLENBRUEsaUJBQUkwQixHQUNGLEdBQUlwdkYsS0FBS3NGLEtBQUsrcEYsWUFBWUMsZUFBZ0IsQ0FDeEMsTUFBTW51RixLQUFPMlMsVUFBVTIyQyxlQUFlenFELEtBQUtzRixLQUFLK3BGLFdBQVdDLGdCQUMzRCxHQUFJbnVGLE9BQ0dBLEtBQUtpOUIsUUFBUyxDQUNqQixHQUFJajlCLEtBQUswUyxjQUFnQkMsVUFBVUQsYUFBYTNKLFFBQVMsT0FBTyxFQUMzRCxHQUFJL0ksS0FBS2tmLE9BQVEsT0FBUSxDQUNoQyxDQUVKLENBQ0EsT0FBTyxDQUNULENBRUEsZUFBSWt2RSxHQUNGLFFBQXdCLElBQWJ2dkYsS0FBS3dyQyxNQUNaMXZDLE1BQU1JLE9BQU84RCxLQUFLd3JDLE1BQ3RCLE9BQU90dkMsT0FBTzhELEtBQUt3ckMsS0FBT3hyQyxLQUFLb3ZGLGFBQ2pDLENBRUEsb0JBQUlJLEdBQ0YsT0FBT3h2RixLQUFLeXZGLGFBQWV6dkYsS0FBSzB2RixXQUNsQyxDQUVBLGVBQUlELEdBQ0YsT0FBSXp2RixLQUFLc0YsS0FBSzhwRixjQUFnQixDQUVoQyxDQUVBLGVBQUlNLEdBQ0YsT0FBSTF2RixLQUFLc0YsS0FBSzhwRixjQUFnQixDQUVoQyxDQWtCQSxPQUFBTyxHQUNFM3ZGLEtBQUtzRixLQUFLc3FGLFVBQVcsQ0FDdkIsQ0FFQSxjQUFBQyxHQUNFN3ZGLEtBQUtzRixLQUFLc3FGLFVBQVcsRUFDckI1dkYsS0FBS3NGLEtBQUtzbUQsU0FBVSxDQUN0QixDQUVBLE9BQUFBLEdBQ0U1ckQsS0FBS3NGLEtBQUtzbUQsU0FBVSxDQUN0QixDQUVBLFdBQUlra0MsQ0FBU2xrRixHQUNYNUwsS0FBS3NGLEtBQUt3cUYsUUFBVWxrRixDQUN0QixDQUVBLFdBQUlra0YsR0FDRixPQUFPOXZGLEtBQUtzRixLQUFLd3FGLE9BQ25CLENBRUEsV0FBSUMsQ0FBU25rRixHQUNYNUwsS0FBS3NGLEtBQUt5cUYsUUFBVW5rRixDQUN0QixDQUVBLFdBQUlta0YsR0FDRixPQUFPL3ZGLEtBQUtzRixLQUFLeXFGLE9BQ25CLENBRUEsd0JBQUFDLENBQTBCQyxhQUVTLElBQXhCandGLEtBQUtrd0YscUJBQ2dCLElBQXJCbHdGLEtBQUt1dkYsYUFDWnp6RixNQUFNbTBGLFFBRU5qd0YsS0FBS2t3RixlQUFpQixFQUV0Qmx3RixLQUFLa3dGLGVBQXNCbHdGLEtBQUt1dkYsWUFBY1UsT0FBeEIsQ0FHMUIsQ0FFQSxrQkFBSUMsQ0FBZ0J0a0YsR0FDbEI1TCxLQUFLc0YsS0FBSzRxRixlQUFpQnRrRixDQUM3QixDQUVBLGtCQUFJc2tGLEdBQ0YsT0FBT2x3RixLQUFLc0YsS0FBSzRxRixjQUNuQixDQUVBLDBCQUFJQyxDQUF3QnZrRixHQUMxQjVMLEtBQUtzRixLQUFLNnFGLHVCQUF5QnZrRixDQUNyQyxDQUVBLDBCQUFJdWtGLEdBQ0YsT0FBT253RixLQUFLc0YsS0FBSzZxRix3QkFBMEIsQ0FDN0MsQ0FFQSxvQkFBSUMsR0FDRixPQUFPcHdGLEtBQUttd0Ysd0JBQTBCbndGLEtBQUtrd0YsY0FDN0MsQ0FFQSxtQkFBSUcsR0FDRixPQUFPcndGLEtBQUttd0Ysd0JBQTBCLENBQ3hDLENBRUEsa0JBQUFHLENBQW9CMWtGLEVBQUksR0FDdEI1TCxLQUFLbXdGLHdCQUEwQnZrRixFQUMzQjVMLEtBQUttd0YsdUJBQXlCbndGLEtBQUtrd0YsaUJBQ3JDbHdGLEtBQUttd0YsdUJBQXlCbndGLEtBQUtrd0YsZUFFdkMsQ0FFQSxvQkFBQUssQ0FBc0Iza0YsR0FDcEI1TCxLQUFLbXdGLHdCQUEwQnZrRixFQUMzQjVMLEtBQUttd0YsdUJBQXlCbndGLEtBQUtrd0YsaUJBQ3JDbHdGLEtBQUttd0YsdUJBQXlCbndGLEtBQUtrd0YsZUFFdkMsQ0FFQSx1QkFBSU0sR0FDRixNQUFNQyxVQUFZMXhFLE1BQU0vZSxLQUFLa3dGLGdCQUFnQlEsS0FBSyxRQUNsRCxHQUFJMXdGLEtBQUttd0Ysd0JBQTBCLEVBQUcsQ0FDcEMsSUFBSyxJQUFJN3ZFLEVBQUksRUFBR0EsRUFBSXRnQixLQUFLbXdGLHVCQUF3Qjd2RSxJQUMvQ213RSxVQUFVbndFLEdBQUssaUJBRWpCLE9BQU9td0UsU0FDVCxDQUVBLEdBQUl6d0YsS0FBS213Rix1QkFBeUIsRUFBRyxDQUluQyxPQUhxQnB4RSxNQUFNM2MsS0FBS0MsSUFBSXJDLEtBQUttd0YseUJBQXlCTyxLQUNoRSxXQUVrQjNrRixPQUFPMGtGLFVBQzdCLENBQ0YsQ0FFQSxZQUFJcHFDLEdBQ0YsTUFBTXB1QixXQUFhLEdBU25CLE9BUklqNEIsS0FBS2d2RixTQUFVLzJELFdBQVc3Z0MsS0FBSyxVQUM5QjZnQyxXQUFXN2dDLEtBQUssUUFDakI0SSxLQUFLc0YsS0FBS3NxRixVQUFVMzNELFdBQVc3Z0MsS0FBSyxXQUFZLFlBQ2hENEksS0FBS3NGLEtBQUtzbUQsU0FBUzN6QixXQUFXN2dDLEtBQUssV0FDbkM0SSxLQUFLc0YsS0FBS3lxRixTQUFTOTNELFdBQVc3Z0MsS0FBSyxXQUNuQzRJLEtBQUtzRixLQUFLd3FGLFNBQVM3M0QsV0FBVzdnQyxLQUFLLFdBQ25DNEksS0FBS3NGLEtBQUt2RSxRQUFRazNCLFdBQVc3Z0MsS0FBSyxVQUNsQzRJLEtBQUtzRixLQUFLNnFGLHdCQUEwQixHQUFHbDRELFdBQVc3Z0MsS0FBSyxjQUNwRDZnQyxXQUFXNXpCLEtBQUssSUFDekIsQ0FFQSxjQUFJZ3JGLEdBQ0YsTUFBTXI1RSxNQUFRLENBQUMsRUF5QmYsR0F4QkloVyxLQUFLc0YsS0FBSytwRixZQUFZLzRGLE9BQU0wZixNQUFNMWYsS0FBTzBKLEtBQUtzRixLQUFLK3BGLFdBQVcvNEYsTUFDOUQwSixLQUFLc0YsS0FBSytwRixZQUFZanVDLFFBQU9wckMsTUFBTW9yQyxNQUFRcGhELEtBQUtzRixLQUFLK3BGLFdBQVdqdUMsT0FDcEVwckMsTUFBTWlpQixXQUFhLEdBQ2ZqNEIsS0FBS3NGLEtBQUsrcEYsWUFBWUMsaUJBQ3hCdDVFLE1BQU03VSxLQUFPMlMsVUFBVTIyQyxlQUFlenFELEtBQUtzRixLQUFLK3BGLFdBQVdDLGdCQUN2RHQ1RSxNQUFNN1UsT0FDSDZVLE1BQU03VSxLQUFLaTlCLFVBQVdwb0IsTUFBTTdVLEtBQUtna0QsVUFDcENudkMsTUFBTTZlLFFBQVMsRUFDZjdlLE1BQU0yNkUsV0FBYTM2RSxNQUFNN1UsS0FBS2dxQixZQUFZQyxVQUMxQ3BWLE1BQU1paUIsWUFBYyxTQUNmamlCLE1BQU03VSxLQUFLaTlCLFVBQ1Zwb0IsTUFBTTdVLEtBQUswUyxjQUFnQkMsVUFBVUQsYUFBYTNKLFFBQ3BEOEwsTUFBTTQ2RSxZQUFjLFVBQ1g1NkUsTUFBTTdVLEtBQUtrZixTQUFRckssTUFBTTQ2RSxZQUFjLGNBRWhENTZFLE1BQU03VSxLQUFLMFMsY0FBZ0JDLFVBQVVELGFBQWEzSixTQUNsRDhMLE1BQU03VSxLQUFLa2YsVUFFWHJLLE1BQU02dkMsYUFBYyxPQU0xQjdsRCxLQUFLMHRGLFNBQVUsQ0FDakIxM0UsTUFBTTFXLFFBQVUsR0FDaEIsSUFBSyxNQUFNdXdCLElBQUssQ0FBQyxPQUFRLENBQ3ZCLE1BQU1uWixlQUFpQjFXLEtBQUs5RixNQUFNMDlDLGtCQUFrQi9uQixHQUNoRG5aLGdCQUFnQnRnQixPQUFPNGYsTUFBTTFXLFFBQVFsSSxLQUFLc2YsZUFBZXJaLE1BQy9ELENBRUEsSUFBSyxNQUFNbEgsS0FBSzZKLEtBQUs5RixNQUFNOGxELFlBQ3pCaHFDLE1BQU0xVyxRQUFRbEksS0FBS2pCLEVBQUVHLE1BR3ZCLElBQUssTUFBTUgsS0FBSzZKLEtBQUs5RixNQUFNNmxELFlBQ3pCL3BDLE1BQU0xVyxRQUFRbEksS0FBS2pCLEVBQUVHLE1BSXZCLEdBRkEwZixNQUFNNjZFLGFBQWU3NkUsTUFBTTFXLFFBQVFzQixPQUUvQlosS0FBS3NGLEtBQUsrcEYsWUFBWXBoRixHQUFJLENBQzVCLElBQUloSSxLQUFPakcsS0FBSzlGLE1BQU13RixLQUFLTSxLQUFLc0YsS0FBSytwRixXQUFXcGhGLElBQ2hELElBQUtoSSxLQUFNLENBQ1QsTUFBTTZxRixTQUFXeHpGLEtBQUs0USxNQUFNaFIsSUFBSThDLEtBQUtzRixLQUFLK3BGLFdBQVdwaEYsSUFDakQ2aUYsV0FBVTdxRixLQUFPakcsS0FBSzlGLE1BQU13RixLQUFLb3hGLFNBQVN4NkYsTUFDaEQsQ0FFSTJQLE9BQ2dCLFNBQWRBLEtBQUs1SCxNQUE2QyxVQUExQjRILEtBQUs3UCxNQUFNa1AsTUFBTWpILE9BQzNDMlgsTUFBTSs2RSxJQUFNOXFGLEtBQUs3UCxNQUNqQjRmLE1BQU0xZixLQUFPMlAsS0FBSzdQLE1BQU1FLEtBQ3hCMGYsTUFBTTNYLEtBQU8sUUFDYjJYLE1BQU1peUMsU0FBVSxFQUNoQmp5QyxNQUFNZzdFLFFBQVMsRUFDZmg3RSxNQUFNb3JDLE1BQVFuN0MsS0FBSzdQLE1BQU1BLE9BRVQsbUJBQWQ2UCxLQUFLNUgsT0FDUDJYLE1BQU0rNkUsSUFBTTlxRixLQUFLN1AsTUFDakI0ZixNQUFNMWYsS0FBTzJQLEtBQUs3UCxNQUFNaUgsTUFDeEIyWSxNQUFNM1gsS0FBTyxpQkFDYjJYLE1BQU1pN0Usa0JBQW1CLEVBQ3pCajdFLE1BQU1nN0UsUUFBUyxFQUNmaDdFLE1BQU1vckMsTUFBUW43QyxLQUFLN1AsTUFBTUEsT0FFVCxjQUFkNlAsS0FBSzVILE9BQ1AyWCxNQUFNKzZFLElBQU05cUYsS0FBSzdQLE1BQ2pCNGYsTUFBTTFmLEtBQU8yUCxLQUFLN1AsTUFBTWlILE1BQ3hCMlksTUFBTTNYLEtBQU8sWUFDYjJYLE1BQU1teUMsYUFBYyxFQUNwQm55QyxNQUFNZzdFLFFBQVMsRUFDZmg3RSxNQUFNb3JDLE1BQVFuN0MsS0FBSzdQLE1BQU1BLE9BRy9CLE1BQU8sR0FBSTRKLEtBQUtzRixLQUFLK3BGLFlBQVkvNEYsS0FBTSxDQUNyQyxNQUFNMlAsS0FBT2pHLEtBQUs5RixNQUFNd0YsS0FBS00sS0FBS3NGLEtBQUsrcEYsV0FBVy80RixNQUM5QzJQLE9BQ2dCLFNBQWRBLEtBQUs1SCxNQUE2QyxVQUExQjRILEtBQUs3UCxNQUFNa1AsTUFBTWpILE9BQzNDMlgsTUFBTSs2RSxJQUFNOXFGLEtBQUs3UCxNQUNqQjRmLE1BQU0xZixLQUFPMlAsS0FBSzdQLE1BQU1FLEtBQ3hCMGYsTUFBTTNYLEtBQU8sUUFDYjJYLE1BQU1peUMsU0FBVSxFQUNoQmp5QyxNQUFNZzdFLFFBQVMsRUFDZmg3RSxNQUFNb3JDLE1BQVFuN0MsS0FBSzdQLE1BQU1BLE9BRVQsbUJBQWQ2UCxLQUFLNUgsT0FDUDJYLE1BQU0rNkUsSUFBTTlxRixLQUFLN1AsTUFDakI0ZixNQUFNMWYsS0FBTzJQLEtBQUs3UCxNQUFNaUgsTUFDeEIyWSxNQUFNM1gsS0FBTyxpQkFDYjJYLE1BQU1pN0Usa0JBQW1CLEVBQ3pCajdFLE1BQU1nN0UsUUFBUyxFQUNmaDdFLE1BQU1vckMsTUFBUW43QyxLQUFLN1AsTUFBTUEsT0FFVCxjQUFkNlAsS0FBSzVILE9BQ1AyWCxNQUFNKzZFLElBQU05cUYsS0FBSzdQLE1BQ2pCNGYsTUFBTTFmLEtBQU8yUCxLQUFLN1AsTUFBTWlILE1BQ3hCMlksTUFBTTNYLEtBQU8sWUFDYjJYLE1BQU1teUMsYUFBYyxFQUNwQm55QyxNQUFNZzdFLFFBQVMsRUFDZmg3RSxNQUFNb3JDLE1BQVFuN0MsS0FBSzdQLE1BQU1BLE9BRy9CLENBQ0YsTUFBTyxHQUFJNEosS0FBS3NGLEtBQUsrcEYsWUFBWXBoRixHQUFJLENBQ25DLE1BQU1oSSxLQUFPM0ksS0FBSzRRLE1BQU1oUixJQUFJOEMsS0FBS3NGLEtBQUsrcEYsV0FBV3BoRixJQUM3Q2hJLE1BQ3NCLFVBQXBCQSxLQUFLWCxNQUFNakgsT0FDYjJYLE1BQU0rNkUsSUFBTTlxRixLQUNaK1AsTUFBTTFmLEtBQU8yUCxLQUFLM1AsS0FDbEIwZixNQUFNM1gsS0FBTyxRQUNiMlgsTUFBTWl5QyxTQUFVLEVBQ2hCanlDLE1BQU1nN0UsUUFBUyxFQUNmaDdFLE1BQU1vckMsTUFBUW43QyxLQUFLcUUsS0FHekIsTUFBV3RLLEtBQUtzRixLQUFLK3BGLFlBQVkvNEYsTUFBUTBKLEtBQUtzRixLQUFLK3BGLFlBQVlqdUMsUUFDN0RwckMsTUFBTTFmLEtBQU8wSixLQUFLc0YsS0FBSytwRixXQUFXLzRGLEtBQ2xDMGYsTUFBTW9yQyxNQUFRcGhELEtBQUtzRixLQUFLK3BGLFdBQVdqdUMsTUFDbkNwckMsTUFBTWc3RSxRQUFTLEdBV2pCLE9BUkFoN0UsTUFBTWs3RSxhQUFjLEVBRWZsN0UsTUFBTTZlLFFBQVc3ZSxNQUFNb3JDLFFBQzFCcHJDLE1BQU1paUIsWUFBYyxXQUNwQmppQixNQUFNazdFLGFBQWMsR0FFdEJsN0UsTUFBTW01RSxRQUFVbjVFLE1BQU02ZSxTQUFXLzRCLE1BQU1rYSxNQUFNb3JDLE9BRXRDcHJDLEtBQ1QsRUFHSyxTQUFTbTdFLGlCQUFrQnowRixFQUFHd2pCLEdBQ25DLE9BQUt4akIsR0FBS3dqQixFQUFVLEdBQ2ZBLEdBQUt4akIsR0FBVyxFQUNoQkEsR0FBTXdqQixFQUVQQSxFQUFFK3VFLFNBQVd2eUYsRUFBRXV5RixPQUFlLEVBQzlCdnlGLEVBQUV1eUYsU0FBVy91RSxFQUFFK3VFLFFBQWdCLEVBRTVCdnlGLEVBQUUvRixJQUFNdXBCLEVBQUV2cEIsSUFMSSxDQU12QixDQzVpQk8sTUFBTXk2RiwwQkFBMEIxRyxpQkFFckMseUJBQVdueEUsR0FDVCxNQUFNamEsUUFBVVYsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDOURHLFNBQVUsd0RBQ1Y4d0UsVUFBVSxJQUdaLE9BREFsckYsUUFBUW1hLFFBQVFyaUIsS0FBSyxpQkFDZGtJLE9BQ1QsQ0FHQSxhQUFNc3hCLEdBQ0osTUFBTXRyQixXQUFhakosTUFBTXUwQixVQTJEekIsR0F6REF0ckIsS0FBS2xMLE9BQVMsR0FDZGtMLEtBQUsrckYsUUFBVSxDQUFDLEVBQ2hCL3JGLEtBQUtrZixtQkFBcUJsbkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBR3BEb0ksS0FBS2xMLE9BQU9oRCxLQUFLLENBQ2ZkLEtBQ0VnSCxLQUFLQyxLQUFLQyxTQUFTLG1CQUFxQixLQUFLd0MsS0FBS3NGLEtBQUtnc0Ysb0JBRzNEaHNGLEtBQUsrRyxLQUFLa2xGLGtCQUNSanNGLEtBQUtBLEtBQUtrc0YsVUFBVUMsU0FBV25zRixLQUFLQSxLQUFLa3NGLFNBQVNFLGFBQ3BEcHNGLEtBQUsrRyxLQUFLc2xGLFlBQWEsRUFHckJyc0YsS0FBS0EsS0FBS3NzRixRQUFRQyxrQkFDakJ2c0YsS0FBS0EsS0FBS2tzRixTQUFTTSxRQUNqQnhzRixLQUFLQSxLQUFLa3NGLFNBQVNDLFVBQVluc0YsS0FBS0EsS0FBS2tzRixTQUFTRSxnQkFFckRwc0YsS0FBS0EsS0FBS3NzRixPQUFPRyxnQkFBaUIsRUFDbEN6c0YsS0FBS0EsS0FBS3NzRixPQUFPSSxZQUFhLEVBQzlCMXNGLEtBQUtBLEtBQUtzc0YsT0FBT0sseUJBQTBCLEdBR3pDanlGLEtBQUtreUYsYUFBYWg0RixPQUNwQm9MLEtBQUsyQyxNQUFRakksS0FBS2t5RixZQUFZaDRGLE1BQU13RixLQUFLNEYsS0FBS0EsS0FBS2tzRixTQUFTL2hFLFdBQzVEbnFCLEtBQUsrbkQsYUFBZXJ0RCxLQUFLbXlGLE1BQU1DLGlDQUM3QnB5RixLQUFLc0YsS0FBSytzRixpQkFFUi9zRixLQUFLMkMsT0FDUDNDLEtBQUtxc0YsWUFBYSxFQUNsQnJzRixLQUFLZ3RGLFlBQWEsR0FDVGh0RixLQUFLQSxLQUFLa3NGLFNBQVMvaEUsV0FBYW5xQixLQUFLQSxLQUFLaXRGLGlCQUNuRGp0RixLQUFLcXNGLFlBQWEsS0FHcEJyc0YsS0FBSytuRCxhQUFlcnRELEtBQUtteUYsTUFBTUssNEJBQy9CbHRGLEtBQUttdEYsWUFBYSxFQUNkbnRGLEtBQUtBLEtBQUtrc0YsU0FBUy9oRSxXQUFhbnFCLEtBQUtBLEtBQUtpdEYsaUJBQzVDanRGLEtBQUtxc0YsWUFBYSxJQUlqQnJzRixLQUFLQSxLQUFLbkIsWUFBV21CLEtBQUtBLEtBQUtuQixVQUFZLEdBRzlDbUIsS0FBS0EsS0FBS25CLFVBQVksR0FDdEJtQixLQUFLQSxLQUFLZ3NGLGdCQUFrQmhzRixLQUFLQSxLQUFLNHFGLGlCQUV0QzVxRixLQUFLb3RGLHlCQUEwQixHQUdqQ3B0RixLQUFLcXRGLGNBQWUsRUFDVyxNQUEzQjN5RixLQUFLc0YsS0FBS3N0RixlQUNadHRGLEtBQUtxdEYsY0FBZSxHQUdsQnJ0RixLQUFLcXNGLFdBQVksQ0FDbkIsSUFBSWxpRSxVQUFXcjVCLE1BQ1hrUCxLQUFLMkMsT0FDUHduQixVQUFZbnFCLEtBQUsyQyxNQUFNN1IsTUFBTUUsS0FDN0JGLE1BQVFrUCxLQUFLMkMsTUFBTTdSLE1BQU1BLFFBRXpCcTVCLFVBQVlucUIsS0FBS0EsS0FBS2tzRixTQUFTL2hFLFVBQy9CcjVCLE1BQVFrUCxLQUFLQSxLQUFLaXRGLGdCQUVwQmp0RixLQUFLK3JGLFFBQVF3QixpQkFBbUJ2MUYsS0FBS0MsS0FBS3lXLE9BQU8sZUFBZ0IsQ0FDL0QxZCxLQUFNbTVCLFVBQ05yNUIsUUFFMEIsSUFBeEJrUCxLQUFLQSxLQUFLbkIsWUFDUm1CLEtBQUtBLEtBQUtuQixVQUFZLEVBQ3hCbUIsS0FBSytyRixRQUFRd0Isa0JBQW9CLE1BQU12dEYsS0FBS0EsS0FBS25CLGFBQzVDbUIsS0FBSytyRixRQUFRd0Isa0JBQW9CLEtBQUt2dEYsS0FBS0EsS0FBS25CLGFBRTNELENBRUEsR0FBSW1CLEtBQUtBLEtBQUtzc0YsUUFBUUMsZ0JBQWlCLENBMENyQyxHQXpDQXZzRixLQUFLK3JGLFFBQVFRLGdCQUFrQnYwRixLQUFLQyxLQUFLeVcsT0FBTyxzQkFBdUIsQ0FDckUzVixLQUFNaUgsS0FBS0EsS0FBS2tzRixTQUFTQyxRQUNyQm4wRixLQUFLQyxLQUFLQyxTQUFTLGlCQUNuQkYsS0FBS0MsS0FBS0MsU0FBUyxrQkFFckI4SCxLQUFLQSxLQUFLa3NGLFNBQVNsN0YsT0FDckJnUCxLQUFLK3JGLFFBQVFRLGlCQUFtQixLQUFLdnNGLEtBQUtBLEtBQUtrc0YsU0FBU2w3RixTQUcxRGdQLEtBQUtBLEtBQUtzc0YsT0FBT2tCLFlBQWEsRUFFMUJ4dEYsS0FBS0EsS0FBS2tzRixTQUFTQyxVQUNyQm5zRixLQUFLbEwsT0FBT2hELEtBQUssQ0FBRWQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMsa0JBQ3hDOEgsS0FBS0EsS0FBS2tzRixTQUFTRSxjQUNyQnBzRixLQUFLbEwsT0FBT2hELEtBQUssQ0FBRWQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMscUJBSTVDOEgsS0FBS0EsS0FBS2tzRixTQUFTTSxRQUNyQnhzRixLQUFLbEwsT0FBT2hELEtBQUssQ0FBRWQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMsaUJBRzFDd0MsS0FBS3NGLEtBQUtzc0YsT0FBT0csaUJBQ2R6c0YsS0FBS3FzRixXQVVFcnNGLEtBQUtndEYsWUFDZmh0RixLQUFLbEwsT0FBT2hELEtBQUssQ0FDZmQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMscUJBQ3pCMDFELElBQUssYUFaUDV0RCxLQUFLbEwsT0FBT2hELEtBQUssQ0FDZmQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMscUJBQ3pCMDFELElBQUssVUFFUDV0RCxLQUFLK3JGLFFBQVEwQixnQkFBa0J6MUYsS0FBS0MsS0FBS3lXLE9BQ3ZDLHVCQUNBLENBQUUxZCxLQUFNZ1AsS0FBS0EsS0FBS2tzRixTQUFTL2hFLFlBRXhCbnFCLEtBQUtBLEtBQUtpdEYsaUJBQWdCanRGLEtBQUtBLEtBQUtzc0YsT0FBT2tCLFlBQWEsS0FTN0Q5eUYsS0FBS3NGLEtBQUtzc0YsT0FBT0ksV0FBWSxDQUMvQixJQUFJZ0IsYUFBZTExRixLQUFLQyxLQUFLQyxTQUFTLGtCQUNsQ3dDLEtBQUtzRixLQUFLZ2dGLFNBQVMyTixvQkFBb0J4d0YsUUFDekN1d0YsY0FBZ0IsTUFBTWh6RixLQUFLc0YsS0FBS2dnRixRQUFRMk4sbUJBQW1CeHdGLFNBRTdENkMsS0FBS2xMLE9BQU9oRCxLQUFLLENBQ2ZkLEtBQU0wOEYsZUFHSmh6RixLQUFLc0YsS0FBS3NzRixPQUFPc0IsdUJBQ2ZsekYsS0FBS3NGLEtBQUtnZ0YsU0FBUzJOLG9CQUFvQnh3RixPQUFTLEVBQ2xENkMsS0FBSytyRixRQUFROEIsZUFDWDcxRixLQUFLQyxLQUFLQyxTQUFTLHVCQUVyQjhILEtBQUs4dEYsaUJBQW1CN2tGLGlCQUN0QnZPLEtBQUtzRixLQUFLZ2dGLFFBQVEyTixxQkFDakI3bkUsVUFDSDlsQixLQUFLK3JGLFFBQVE4QixlQUFpQjcxRixLQUFLQyxLQUFLeVcsT0FBTyxtQkFBb0IsQ0FDakU1ZCxNQUFPa1AsS0FBSzh0RixvQkFJcEIsQ0FNQSxHQUpJcHpGLEtBQUtzRixLQUFLc3NGLE9BQU9HLGdCQUNuQnpzRixLQUFLbEwsT0FBT2hELEtBQUssQ0FBRWQsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMsb0JBRzFDd0MsS0FBS3NGLEtBQUsrdEYsc0JBQXVCLENBQ25DLE1BQU1DLGVBQWlCLENBQ3JCaDlGLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLGlCQUN6QjAxRCxJQUFLLElBRUhsekQsS0FBS3NGLEtBQUsrdEYsc0JBQXdCLEdBQ3BDQyxlQUFlcGdDLElBQU0sU0FDckI1dEQsS0FBSytyRixRQUFRa0MscUJBQXVCajJGLEtBQUtDLEtBQUtDLFNBQzVDLDJCQUdGOEgsS0FBSytyRixRQUFRa0MscUJBQ1hqMkYsS0FBS0MsS0FBS0MsU0FBUyxzQkFHbkJ3QyxLQUFLc0YsS0FBS3BHLE1BQU1zMEYsbUJBQWtCRixlQUFlcGdDLEtBQU8sWUFDNUQ1dEQsS0FBS2xMLE9BQU9oRCxLQUFLazhGLGVBQ25CLENBRUl0ekYsS0FBS3NGLEtBQUtnZ0YsU0FBU3R2RSxRQUNqQmhXLEtBQUtzRixLQUFLa3NGLFNBQVNNLFNBQVE5eEYsS0FBS3NGLEtBQUttdUYsWUFBYSxHQUNsRHp6RixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQU1xSixhQUNVLElBQXpCcmYsS0FBS3NGLEtBQUttdUYsYUFBNEJ6ekYsS0FBS3NGLEtBQUttdUYsWUFBYSxHQUN4RW51RixLQUFLK3JGLFFBQVFxQyxlQUFpQnAyRixLQUFLQyxLQUFLQyxTQUN0Qyx1QkFFRXdDLEtBQUtzRixLQUFLZ2dGLFFBQVF0dkUsTUFBTWt2QixZQUMxQjUvQixLQUFLK3JGLFFBQVFxQyxnQkFBa0IsS0FBS3AyRixLQUFLQyxLQUFLQyxTQUM1QyxxQkFHSjhILEtBQUtsTCxPQUFPaEQsS0FBSyxDQUNmZCxLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBUyxnQkFDekIwMUQsSUFBSyxhQUVFbHpELEtBQUtzRixLQUFLZ2dGLFFBQVF0dkUsTUFBTVEsVUFDakNsUixLQUFLK3JGLFFBQVFzQyxZQUFjcjJGLEtBQUtDLEtBQUtDLFNBQVMsdUJBQzlDOEgsS0FBS2xMLE9BQU9oRCxLQUFLLENBQ2ZkLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLGVBQ3pCMDFELElBQUssYUFHUDV0RCxLQUFLK3JGLFFBQVFzQyxZQUFjcjJGLEtBQUtDLEtBQUtDLFNBQVMscUJBQzlDOEgsS0FBS2xMLE9BQU9oRCxLQUFLLENBQ2ZkLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLGdCQUN6QjAxRCxJQUFLLGFBSWIsQ0FvQ0EsR0FsQ0lsekQsS0FBS3NGLEtBQUtzc0YsT0FBT2dDLHNCQUNmNXpGLEtBQUtzRixLQUFLa3NGLFNBQVNNLE9BQ3JCeHNGLEtBQUsrckYsUUFBUXdDLGlCQUFtQnYyRixLQUFLQyxLQUFLQyxTQUN4Qyw2QkFFT3dDLEtBQUtzRixLQUFLa3NGLFNBQVNDLFVBQ3hCenhGLEtBQUtzRixLQUFLc3NGLE9BQU9HLGVBQ25CenNGLEtBQUsrckYsUUFBUXdDLGlCQUFtQnYyRixLQUFLQyxLQUFLQyxTQUN4Qyw2QkFFT3dDLEtBQUtzRixLQUFLc3NGLE9BQU9JLGFBQzFCMXNGLEtBQUsrckYsUUFBUXdDLGlCQUFtQnYyRixLQUFLQyxLQUFLQyxTQUFTLHNCQUtyRHdDLEtBQUtzRixLQUFLc3NGLE9BQU9rQyxjQUNmOXpGLEtBQUtzRixLQUFLc3NGLE9BQU9tQyxhQUVuQnp1RixLQUFLeTVCLGdCQUFrQi8rQixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQU1tVixhQUFhQyxXQUN2RDlsQixLQUFLeTVCLGdCQUFrQi8rQixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQU0rZSxlQWNwRC8wQixLQUFLc0YsS0FBS3NzRixPQUFPbUMsYUFBYyxDQUNqQ3p1RixLQUFLMHVGLG1CQUFvQixFQUN6QjF1RixLQUFLMnVGLDJCQUE0QixFQUdwQmowRixLQUFLazBGLGNBQ1RobUUsVUFDUDVvQixLQUFLMnVGLDJCQUE0QixHQUkvQmowRixLQUFLc0YsS0FBS2tzRixTQUFTMkMsV0FBYW4wRixLQUFLc0YsS0FBS2dnRixTQUFTdHZFLE9BQU93SSxZQUM1RGxaLEtBQUswdUYsbUJBQW9CLEVBQ3pCMXVGLEtBQUs4dUYsc0JBQXdCN2xGLGlCQUMzQnZPLEtBQUtzRixLQUFLZ2dGLFFBQVErTyxtQkFDakJqcEUsVUFJc0MsSUFBckM5bEIsS0FBS0EsS0FBS2d2Rix1QkFDWmh2RixLQUFLK3JGLFFBQVE5c0MsWUFBY2puRCxLQUFLQyxLQUFLQyxTQUFTLHdCQUU5QzhILEtBQUsrckYsUUFBUTlzQyxZQUFjam5ELEtBQUtDLEtBQUt5VyxPQUNuQyx5QkFDQSxDQUFFeThCLE9BQVFuckMsS0FBS0EsS0FBS2d2Rix5QkFHeEJodkYsS0FBS2xMLE9BQU9oRCxLQUFLLENBQ2ZkLEtBQ0VnSCxLQUFLQyxLQUFLQyxTQUFTLG9CQUNuQixLQUFLOEgsS0FBS0EsS0FBS2d2Riw0QkFLbkJ0MEYsS0FBS3NGLEtBQUtrc0YsU0FBUytDLGVBQ25CdjBGLEtBQUtzRixLQUFLa3NGLFNBQVNNLFFBQ25COXhGLEtBQUtzRixLQUFLZ2dGLFNBQVN0dkUsT0FBT3dJLFlBRTFCbFosS0FBS2t2RixZQUFhLEVBQ2xCbHZGLEtBQUsrckYsUUFBUW1ELFdBQWFsM0YsS0FBS0MsS0FBS0MsU0FBUyxvQkFDN0M4SCxLQUFLbXZGLHFCQUF1QmxtRixpQkFDMUJ2TyxLQUFLc0YsS0FBS2dnRixRQUFRb1AsbUJBQ2pCdHBFLFdBR0w5bEIsS0FBS2xMLE9BQU9oRCxLQUFLLENBQ2ZkLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLHNCQUU3QixDQVdBLE9BVEl3QyxLQUFLc0YsS0FBS3NzRixPQUFPOTdELFNBQ2Y5MUIsS0FBS3NGLEtBQUttdUYsV0FDWm51RixLQUFLK3JGLFFBQVFzRCxhQUFlcjNGLEtBQUtDLEtBQUtDLFNBQVMsdUJBRS9DOEgsS0FBSytyRixRQUFRc0QsYUFBZXIzRixLQUFLQyxLQUFLQyxTQUNwQyw0QkFJQzhILElBQ1QsQ0FHQSxjQUFNa2xGLEdBQ0osR0FBS2x0RixLQUFLc0csS0FBSzJFLEtBQWYsQ0FJQSxHQUFJdkksS0FBS3NGLEtBQUtzc0YsT0FBT21DLGFBQWMsQ0FFakMsR0FBSS96RixLQUFLc0YsS0FBS2dnRixTQUFTK08sa0JBQWtCNXhGLE1BQU8sQ0FDOUMsTUFBTW15RixZQUFjNTBGLEtBQUtzRixLQUFLZ2dGLFFBQVErTyxpQkFBaUI1eEYsTUFDakRpaUQsV0FBYTFrRCxLQUFLc0YsS0FBS3BHLE1BQU15NkIsWUFBYyxFQUFJMzVCLEtBQUtzRixLQUFLckosTUFDM0QyTCxjQUFjKzhDLFVBQVVELFlBQzFCMWtELEtBQUtzRixLQUFLckosYUFDRixJQUFJNkYsS0FBSzRpRCxZQUFZdmpELEtBQUssQ0FBRW1CLE9BQU8sS0FDekNHLE1BQ1EzRyxNQUFNSSxPQUFPd29ELGVBQ3ZCMWtELEtBQUtzRixLQUFLckosTUFBUUMsT0FBT3dvRCxrQkFHcUIsSUFBckMxa0QsS0FBS3NGLEtBQUtndkYseUJBQ25CdDBGLEtBQUtzRixLQUFLZ3ZGLHVCQUF5Qk0sWUFBYzUwRixLQUFLc0YsS0FBS3JKLE1BQ3ZEK0QsS0FBS3NGLEtBQUtndkYsdUJBQXlCLElBQ3JDdDBGLEtBQUtzRixLQUFLZ3ZGLHVCQUF5QixHQUd6QyxNQUVJejJGLElBQWNtQyxLQUFLc0YsS0FBS3V2Rix3QkFDMUI3MEYsS0FBS3NGLEtBQUt1dkYsdUJBQXdCLFFBR2hDaDNGLElBQWNtQyxLQUFLc0YsS0FBS211RixhQUMxQnp6RixLQUFLc0YsS0FBS211RixZQUNQenpGLEtBQUtzRixLQUFLc3NGLE9BQU9HLGdCQUFrQi94RixLQUFLc0YsS0FBS2tzRixTQUFTTSxVQUN0RDl4RixLQUFLc0YsS0FBS3NzRixPQUFPa0QsMEJBSXBCOTBGLEtBQUtzRixLQUFLa3NGLFNBQVNDLFNBQ25CenhGLEtBQUtzRixLQUFLa3NGLFNBQVNFLGNBQ25CMXhGLEtBQUtzRixLQUFLZ2dGLFNBQVMyTixvQkFBb0J4d0YsYUFFbkM1RSxJQUFjbUMsS0FBS3NGLEtBQUt5dkYsc0JBQzFCLzBGLEtBQUtzRixLQUFLeXZGLG9CQUNSLzBGLEtBQUtzRixLQUFLZ2dGLFFBQVEyTixtQkFBbUJ4d0YsWUFFckM1RSxJQUFjbUMsS0FBS3NGLEtBQUtwRyxNQUFNODFGLG1CQUNoQ2gxRixLQUFLc0YsS0FBS3BHLE1BQU04MUYsaUJBQ2RoMUYsS0FBS3NGLEtBQUtrc0YsU0FBU3lELFVBQVlqMUYsS0FBS3NGLEtBQUt5dkYscUJBQXVCLEdBR3hFLENBRUkvMEYsS0FBS3NGLEtBQUtzc0YsT0FBTzk3RCxTQUNuQjkxQixLQUFLc0YsS0FBS2tyRixvQkFBc0I1eEYsUUFBUUMsTUFBTXVPLFVBQzVDcE4sS0FBS2t5RixZQUFZMUIscUJBRW5CeHdGLEtBQUtzRixLQUFLb21GLFdBQWEsQ0FBRUMsWUFBWSxHQXBEdkMsTUFGRTFnRixRQUFRdVMsTUFBTSx5Q0F3RGxCLENBR0Esa0JBQU1ndUUsR0FBaUIsQ0FHdkIsbUJBQU1rQixHQUVGMXNGLEtBQUtzRixLQUFLZ2dGLFNBQVN0dkUsT0FDNEIsV0FBL0NoVyxLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE9BQU8zUSxhQUFhL08sT0FFdEMwSixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQVFsQyxVQUFVL1IsU0FBUy9CLEtBQUtzRixLQUFLZ2dGLFFBQVF0dkUsUUFJL0RoVyxLQUFLc0YsS0FBS2dnRixTQUFTMk4sb0JBQ3lDLFdBQTVEanpGLEtBQUtzRixLQUFLZ2dGLFFBQVEyTixvQkFBb0I1dEYsYUFBYS9PLE9BRW5EMEosS0FBS3NGLEtBQUtnZ0YsUUFBUTJOLG1CQUFxQm54RixLQUFLQyxTQUMxQy9CLEtBQUtzRixLQUFLZ2dGLFFBQVEyTixxQkFJcEJqekYsS0FBS3NGLEtBQUtnZ0YsU0FBUytPLGtCQUN1QyxXQUExRHIwRixLQUFLc0YsS0FBS2dnRixRQUFRK08sa0JBQWtCaHZGLGFBQWEvTyxPQUVqRDBKLEtBQUtzRixLQUFLZ2dGLFFBQVErTyxpQkFBbUJ2eUYsS0FBS0MsU0FDeEMvQixLQUFLc0YsS0FBS2dnRixRQUFRK08sbUJBSXBCcjBGLEtBQUtzRixLQUFLZ2dGLFNBQVNvUCxrQkFDdUMsV0FBMUQxMEYsS0FBS3NGLEtBQUtnZ0YsUUFBUW9QLGtCQUFrQnJ2RixhQUFhL08sT0FFakQwSixLQUFLc0YsS0FBS2dnRixRQUFRb1AsaUJBQW1CNXlGLEtBQUtDLFNBQ3hDL0IsS0FBS3NGLEtBQUtnZ0YsUUFBUW9QLGtCQUd4QixDQUdBLGdCQUFNcGpELEdBRUN0eEMsS0FBS215RixZQUM0QyxJQUEzQ255RixLQUFLbXlGLE1BQU0rQyx1QkFBdUJ2M0YsWUFJcEIsSUFBZHFDLEtBQUtzRixPQUFzQnRGLEtBQUtzRixLQUFPLENBQUMsUUFDbkIsSUFBckJ0RixLQUFLc0YsS0FBS3NzRixTQUF3QjV4RixLQUFLc0YsS0FBS3NzRixPQUFTLENBQUMsR0FHakU1eEYsS0FBS3NGLEtBQUtrc0YsU0FBV3h4RixLQUFLNm1GLFVBQVVzTyxnQkFFcENuMUYsS0FBS3NGLEtBQUsrc0YsZ0JBQWtCcnlGLEtBQUtteUYsTUFBTStDLHNCQUFzQnYzRixLQUV6RHFDLEtBQUtvMUYsaUJBQWlCanhGLFVBQVksSUFDcENuRSxLQUFLc0YsS0FBS25CLFVBQVluRSxLQUFLbzFGLGdCQUFnQmp4RixVQUMzQ25FLEtBQUtzRixLQUFLcEcsTUFBTXMwRixrQkFBbUIsRUFDbkN4ekYsS0FBS3NGLEtBQUtwRyxNQUFNcXZGLGFBQWV2dUYsS0FBS2t5RixZQUFZM0QsY0FHbER2dUYsS0FBS3NGLEtBQUtrckYsb0JBQXNCNXhGLFFBQVFDLE1BQU11TyxVQUM1Q3BOLEtBQUtreUYsWUFBWTFCLHFCQUVuQnh3RixLQUFLc0YsS0FBSzRxRixlQUFpQmx3RixLQUFLa3lGLFlBQVkvQix1QkFDNUNud0YsS0FBS3NGLEtBQUtnc0YsZ0JBQWtCLEVBQzlCLENBRUEsZUFBSVksR0FDRixHQUFLbHlGLEtBQUtvMUYsZ0JBSVYsT0FBTyxJQUFJOUgsYUFBYXR0RixLQUFLbzFGLGdCQUMvQixDQUVBLG1CQUFJQSxHQUNGLEdBQUtwMUYsS0FBS215RixPQUNMbnlGLEtBQUtzRixLQUFLK3NGLGdCQUNmLE9BQU9yeUYsS0FBS215RixNQUFNa0QsbUJBQW1CcjFGLEtBQUtzRixLQUFLK3NGLGdCQUNqRCxDQUVBLFlBQUl4TCxHQUNGLEdBQUs3bUYsS0FBS215RixNQUNWLE9BQU9ueUYsS0FBS215RixNQUFNbUQsZ0JBQWdCdDFGLEtBQUtzRixLQUFLaXdGLGFBQzlDLENBRUEsWUFBSS9ELEdBQ0YsR0FBS3h4RixLQUFLNm1GLFNBQ1YsT0FBTzdtRixLQUFLNm1GLFNBQVNzTyxlQUN2QixDQUVBLFNBQUloRCxHQUNGLEdBQUtueUYsS0FBS3NGLEtBQUtrd0YsVUFFZixPQURLeDFGLEtBQUt5MUYsU0FBUXoxRixLQUFLeTFGLE9BQVM3dEYsY0FBY21KLFVBQVUvUSxLQUFLc0YsS0FBS2t3RixZQUMzRHgxRixLQUFLeTFGLE1BQ2QsQ0FFQSxRQUFJdDBGLEdBQ0YsSUFBSTZjLFNBQ0osR0FBSWhlLEtBQUtreUYsWUFBWWg0RixPQUFTOEYsS0FBS3NGLEtBQUtrc0YsU0FBUy9oRSxVQUFXLENBQzFELE1BQU1pbUUsV0FBYTExRixLQUFLa3lGLFlBQVloNEYsTUFBTXdGLEtBQ3hDTSxLQUFLc0YsS0FBS2tzRixTQUFTL2hFLFdBR25CelIsY0FEd0IsSUFBZjAzRSxXQUNFQSxXQUVBLENBQ1RyM0YsS0FBTSxRQUNOakksTUFBTyxDQUNMRSxLQUFNMEosS0FBS3NGLEtBQUtrc0YsU0FBUy9oRSxVQUN6QjgzQixVQUFXdm5ELEtBQUtzRixLQUFLaXRGLGlCQUkzQnYwRSxTQUFTOWpCLE1BQVEsQ0FBRWlYLFNBQVVuUixLQUFLa3lGLFlBQVloNEYsTUFBTStULEdBQ3RELE1BQ01qTyxLQUFLc0YsS0FBS2tzRixTQUFTL2hFLFdBQWF6dkIsS0FBS3NGLEtBQUtpdEYsaUJBQzVDdjBFLFNBQVcsQ0FDVDNmLEtBQU0sUUFDTmpJLE1BQU8sQ0FDTEUsS0FBTTBKLEtBQUtzRixLQUFLa3NGLFNBQVMvaEUsVUFDekI4M0IsVUFBV3ZuRCxLQUFLc0YsS0FBS2l0RixnQkFFdkJyNEYsTUFBTyxDQUNMNUQsS0FBTTBKLEtBQUtreUYsWUFBWTU3RixRQVUvQixPQUxJMG5CLFdBQ0ZBLFNBQVNqSixhQUFlL1UsS0FBS3NGLE1BQU1uQixXQUFhLEVBQ2hENlosU0FBUzNILFdBQWF2QyxVQUFVc1AsZ0JBQWdCclAsUUFDaERpSyxTQUFTNkMsVUFBVyxHQUVmN0MsZUFBWW5nQixDQUNyQixDQUVBLG9CQUFJODNGLEdBQ0YsSUFBSzMxRixLQUFLc0YsS0FBS2dnRixTQUFTdHZFLE9BQU93SSxVQUFXLE9BQU8sRUFDakQsR0FBSXhlLEtBQUtzRixLQUFLa3NGLFNBQVMyQyxVQUFXLENBQ2hDLE1BQU1qOUUsT0FDNEMsaUJBQXpDbFgsS0FBS3NGLEtBQUtrc0YsU0FBU29FLGtCQUN0QixHQUFHNTFGLEtBQUtzRixLQUFLa3NGLFNBQVNvRSxvQkFDdEI1MUYsS0FBS3NGLEtBQUtrc0YsU0FBU29FLGtCQUN6QixJQUFLNTFGLEtBQUtzRixLQUFLa3NGLFNBQVNvRSxrQkFBbUIsT0FBTyxFQUNsRCxHQUNFNTFGLEtBQUtzRixLQUFLa3NGLFNBQVNvRSxvQkFDbEI5ekYsS0FBS3kzQixTQUFTcmlCLFFBRWYsT0FBTyxDQUVYLENBQ0EsR0FBSWxYLEtBQUtzRixLQUFLa3NGLFNBQVNNLFFBQVU5eEYsS0FBS3NGLEtBQUtrc0YsU0FBUytDLGNBQWUsQ0FDakUsTUFBTXNCLFdBQzJDLGlCQUF4QzcxRixLQUFLc0YsS0FBS2tzRixTQUFTc0UsaUJBQ3RCLEdBQUc5MUYsS0FBS3NGLEtBQUtrc0YsU0FBU3NFLG1CQUN0QjkxRixLQUFLc0YsS0FBS2tzRixTQUFTc0UsaUJBQ3pCLElBQUs5MUYsS0FBS3NGLEtBQUtrc0YsU0FBU3NFLGlCQUFrQixPQUFPLEVBQ2pELEdBQUk5MUYsS0FBS3NGLEtBQUtrc0YsU0FBU3NFLG1CQUFxQmgwRixLQUFLeTNCLFNBQVNzOEQsWUFDeEQsT0FBTyxDQUVYLENBQ0EsT0FBTyxDQUNULENBRUEsa0JBQUlFLEdBQ0YsTUFBTTUyQyxRQUFVLEdBcUJoQixHQXBCQW4vQyxLQUFLa3lGLFlBQVloNEYsT0FBTzg3RixXQUFXcHhFLFFBQVFqTixTQUFRcytFLElBQ2pELElBQUloOEYsUUFBVWc4RixFQUFFM3dGLEtBQUtBLEtBQUt3RSxNQUFNTCxPQUFPeU4sT0FDbkMvYSxHQUFLNkQsS0FBS2t5RixZQUFZaDRGLE1BQU1pQyxHQUU5QkEsR0FEUyxPQUFQQSxJQUE4QixJQUFmRCxPQUFPQyxJQUNuQixHQUVBLEdBQUdBLEtBR05BLEtBQU9BLEdBQUdxTyxXQUFXLE9BQU1yTyxHQUFLLElBQU1BLElBQ3RDODVGLEVBQUUzd0YsS0FBS0EsS0FBS3VCLFdBQVd2TyxPQUFNMkIsU0FBb0JrQyxJQUNqRDg1RixFQUFFM3dGLEtBQUtBLEtBQUt1QixXQUFXcXZGLE9BQU1qOEYsUUFBVUEsUUFBVWtDLEdBQUssTUFDMURnakQsUUFBUS9uRCxLQUFLLENBQ1hkLEtBQU0sR0FBRzIvRixFQUFFM3dGLEtBQUtoUCxTQUFTMkQsV0FDekJpZCxPQUFRamQsUUFDUjBELEtBQU1zNEYsRUFBRXQ0RixNQUNULElBRUh3aEQsUUFBUWp6QyxLQUFLdEUsY0FBY3VFLGdCQUd4Qmd6QyxRQUFRei9DLE1BQUt1MkYsR0FDWkEsRUFBRTMvRixLQUNDcVosY0FDQW5GLFdBQ0NsTixLQUFLQyxLQUFLQyxTQUFTLDJCQUEyQm1TLGlCQUdwRCxDQUNBLElBQUl4VCxHQUFLLEdBQ0w2RCxLQUFLa3lGLFlBQVloNEYsUUFDbkJpQyxHQUFLNkQsS0FBS2t5RixZQUFZaDRGLE1BQU1pQyxHQUN4QkEsS0FBT0EsR0FBR3FPLFdBQVcsT0FBTXJPLEdBQUssSUFBTUEsSUFDL0IsT0FBUEEsSUFBOEIsSUFBZkQsT0FBT0MsTUFBV0EsR0FBSyxLQUc1Q2dqRCxRQUFRZzNDLFFBQVEsQ0FDZDcvRixLQUFNLEdBQUdnSCxLQUFLQyxLQUFLQyxTQUFTLGlDQUFpQ3JCLE1BQzdEK2EsT0FBUSxNQUFNL2EsS0FDZHdCLEtBQU0sV0FFVixDQU9BLE9BTEF3aEQsUUFBUS9uRCxLQUFLLENBQ1hkLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLGNBQ3pCMFosT0FBUWxYLEtBQUtzRixNQUFNOHdGLG9CQUFzQixLQUN6Q3o0RixLQUFNLElBRUR3aEQsT0FDVCxDQUVBLGNBQUlrM0MsR0FDRixJQUFLcjJGLEtBQUtzRixNQUFNc3RGLGFBQWMsQ0FDNUIsSUFBSzV5RixLQUFLKzFGLGVBQWdCLE9BQ3JCLzFGLEtBQUtzRixPQUFNdEYsS0FBS3NGLEtBQU8sQ0FBQyxHQUM3QnRGLEtBQUtzRixLQUFLc3RGLGFBQWU1eUYsS0FBSysxRixlQUFlLEdBQUdwNEYsSUFDbEQsQ0FFQSxHQUFJcUMsS0FBS3NGLEtBQUtzdEYsYUFBYyxDQUMxQixNQUFNaHVFLE9BQVM1a0IsS0FBSysxRixlQUFlcjJGLE1BQ2pDYyxHQUFLQSxFQUFFN0MsT0FBU3FDLEtBQUtzRixLQUFLc3RGLGVBRTVCLEdBQUlodUUsT0FBUSxPQUFPQSxNQUNyQixDQUNGLENBRUEsMEJBQUkweEUsR0FDRixHQUFJdDJGLEtBQUtxMkYsV0FBWSxDQUNuQixNQUFNenhFLE9BQVM1a0IsS0FBS3EyRixXQUNwQixPQUFJenhFLFFBQVVBLE9BQU8xTixRQUFVcFYsS0FBS3kzQixTQUFTM1UsT0FBTzFOLFFBQzNDME4sT0FBTzFOLFlBRWhCLENBQ0YsQ0FFRixDQUVBLHVCQUFJcS9FLEdBQ0YsU0FDRXYyRixLQUFLc0YsS0FBS2tzRixTQUFTRSxlQUNsQjUxRixNQUFNSSxPQUFPOEQsS0FBS3NGLEtBQUtrc0YsU0FBU3lELGFBQ2pDLzRGLE9BQU84RCxLQUFLc0YsS0FBS2tzRixTQUFTeUQsV0FBYSxHQUN2Q2oxRixLQUFLczJGLHVCQUtULENBRUEsV0FBSWpGLEdBQ0YsTUFBTUEsUUFBVSxDQUFDLEVBR2pCLE9BRkFBLFFBQVFtRixrQkFBb0J4MkYsS0FBS3EyRixXQUFXLy9GLEtBRXJDKzZGLE9BQ1QsQ0FHQSxrQkFBTW9GLENBQWNuM0YsU0FDbEIsSUFBSW8zRixnQkFDQUMsbUJBQW9CLEVBQ3hCLE1BQU1DLGVBQWlCLENBQ3ZCQSxnQkFBaUMsQ0FBQyxHQUM1QkMsa0JBQW9CLENBQUMsRUFDdkI3MkYsS0FBS3NGLEtBQUtwRyxNQUFNODFGLG1CQUNsQjBCLGlCQUFrQixFQUNsQkUsZUFBZXBGLFVBQVcsRUFDMUJvRixlQUFlekIsZ0JBQWdCckQsUUFBUyxFQUN4QzhFLGVBQWV6QixnQkFBZ0IxRCxTQUFVLEdBRzNDLE1BQU1xRixLQUFPOTJGLEtBQUtrMEYsY0FDbEIsR0FBSTRDLEtBQUs1b0UsU0FDSGx1QixLQUFLc0YsS0FBS3V2RixzQkFDWixJQUFLLE1BQU9oNUYsSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTBzRixLQUFLdEYsVUFDakMsU0FBUjMxRixNQUNGKzZGLGVBQWV6QixnQkFBZ0IvK0YsTUFBTXlGLEtBQU96RixNQUFNMmdHLElBQ2xETCxpQkFBa0IsR0FNMUIsR0FBSTEyRixLQUFLc0YsS0FBS3l2RixvQkFBc0IsR0FBSy8wRixLQUFLc0YsS0FBS2tzRixTQUFTRSxhQUFjLENBQ3hFLElBQUlzRixZQUFjaDNGLEtBQUtzRixLQUFLa3NGLFNBQVN5RCxVQUNyQytCLGFBQWVoM0YsS0FBS3NGLEtBQUt5dkYsb0JBQ3JCaUMsWUFBYyxJQUFHQSxZQUFjLEdBQy9CaDNGLEtBQUt3eEYsU0FBU3lELFlBQWMrQixjQUM5QkosZUFBZXpCLGdCQUFnQkYsVUFBWStCLFlBQzNDaDNGLEtBQUtzRixLQUFLa3NGLFNBQVN5RCxVQUFZK0IsWUFDL0JOLGlCQUFrQixFQUV0QixDQXFDQSxHQW5DSTEyRixLQUFLc0YsS0FBS2d2Rix1QkFBeUIsSUFDckNxQyxtQkFBb0IsRUFDaEIzMkYsS0FBS2t5RixZQUFZaDRGLFlBQ2I4RixLQUFLa3lGLFlBQVloNEYsTUFBTTgvQixXQUMzQmg2QixLQUFLc0YsS0FBS2d2Rix1QkFDVixDQUFFMzZELGFBQWEsS0FHakJrOUQsa0JBQWtCNWtELEdBQUtqeUMsS0FBS28xRixnQkFBZ0JuakQsR0FDNUM0a0Qsa0JBQWtCNWtELElBQU1qeUMsS0FBS3NGLEtBQUtndkYsdUJBQzlCdUMsa0JBQWtCNWtELEdBQUssSUFBRzRrRCxrQkFBa0I1a0QsR0FBSyxLQUlyRGp5QyxLQUFLc0YsS0FBS2dzRixnQkFBa0IsSUFDOUJxRixtQkFBb0IsRUFDcEJFLGtCQUFrQjFHLHVCQUNoQm53RixLQUFLbzFGLGdCQUFnQmpGLHVCQUN2QjBHLGtCQUFrQjFHLHdCQUEwQm53RixLQUFLc0YsS0FBS2dzRixzQkFHUixJQUFyQ3R4RixLQUFLc0YsS0FBS3BHLE1BQU1zMEYsbUJBQWtDeHpGLEtBQUtzRixLQUFLcEcsTUFBTXMwRixrQkFBbUIsR0FFNUZ4ekYsS0FBS3NGLEtBQUtwRyxNQUFNczBGLGtCQUNsQm1ELG1CQUFvQixFQUNwQkUsa0JBQWtCMXlGLFVBQVksR0FHM0JySSxNQUFNa0UsS0FBS3NGLEtBQUtuQixZQUNqQm5FLEtBQUtzRixLQUFLbkIsWUFBY25FLEtBQUtreUYsWUFBWS90RixZQUV6QzB5RixrQkFBa0IxeUYsVUFBWW5FLEtBQUtzRixLQUFLbkIsV0FJeENuRSxLQUFLc0YsS0FBS211RixXQUFZLENBQ3hCLElBQUl3RCxlQUVGQSxlQURFajNGLEtBQUtzRixLQUFLNHhGLFFBQ0tsM0YsS0FBSzZtRixTQUVMN21GLEtBQUtteUYsTUFBTWdGLGlCQUFpQm4zRixLQUFLNm1GLFNBQVNscEYsS0FBTSxDQUMvRHFyRSxNQUFPLElBSVBpdUIsZUFBZXQ1RixZQUNYcUMsS0FBS215RixNQUFNaUYsMEJBQ2ZwM0YsS0FBS28xRixnQkFBZ0J6M0YsS0FDckJzNUYsZUFBZXQ1RixLQUNmLENBQ0UwNUYsa0JBQWtCLEVBQ2xCQyxrQkFBa0IsRUFDbEJ0NUYsUUFBUSxHQUloQixDQWdCQSxPQWRJMDRGLHVCQUNJMTJGLEtBQUtteUYsTUFBTW9GLGVBQWV2M0YsS0FBSzZtRixTQUFTbHBGLEtBQU1pNUYsZUFBZ0IsQ0FDbEU1NEYsUUFBUSxJQUdSMjRGLHlCQUNJMzJGLEtBQUtteUYsTUFBTXFGLGtCQUNmeDNGLEtBQUtvMUYsZ0JBQWdCejNGLEtBQ3JCazVGLGtCQUNBLENBQUU3NEYsUUFBUSxJQUdkZ0MsS0FBS3NGLEtBQUtzc0YsT0FBTzk3RCxRQUFTLFFBQ3BCOTFCLEtBQUtteUYsTUFBTXNGLCtCQUNWLENBQ1QsQ0FFQSxvQkFBTUMsQ0FBZ0JwNEYsU0FHcEIsT0FGS1UsS0FBS3NGLEtBQUtzc0YsU0FBUTV4RixLQUFLc0YsS0FBS3NzRixPQUFTLENBQUMsR0FDM0M1eEYsS0FBS3NGLEtBQUtzc0YsT0FBT0MsaUJBQWtCLEdBQzVCLENBQ1QsQ0FFQSw0QkFBTThGLENBQXdCcjRGLFNBSTVCLE9BSEFVLEtBQUtzRixLQUFLc3NGLE9BQU9LLHlCQUEwQixFQUMzQ2p5RixLQUFLc0YsS0FBS3NzRixPQUFPRyxnQkFBaUIsRUFDbEMveEYsS0FBS3NGLEtBQUtzc0YsT0FBT0ksWUFBYSxHQUN2QixDQUNULENBRUEsNEJBQU00RixDQUF3QnQ0RixTQUk1QixPQUhBVSxLQUFLc0YsS0FBS3NzRixPQUFPSyx5QkFBMEIsRUFDM0NqeUYsS0FBS3NGLEtBQUtzc0YsT0FBT0csZ0JBQWlCLEVBQ2xDL3hGLEtBQUtzRixLQUFLc3NGLE9BQU9JLFlBQWEsR0FDdkIsQ0FDVCxDQUVBLDhCQUFNNkYsQ0FBMEJ2NEYsU0FLOUIsT0FKQVUsS0FBS3NGLEtBQUtzc0YsT0FBT0MsaUJBQWtCLEVBQ25DN3hGLEtBQUtzRixLQUFLc3NGLE9BQU9LLHlCQUEwQixFQUMzQ2p5RixLQUFLc0YsS0FBS3NzRixPQUFPRyxnQkFBaUIsRUFDbEMveEYsS0FBS3NGLEtBQUtzc0YsT0FBT0ksWUFBYSxHQUN2QixDQUNULENBRUEsNkJBQU04RixDQUF5Qng0RixTQUM3QixPQUFLVSxLQUFLc0YsS0FBS2tzRixTQUFTRSxjQUN4QjF4RixLQUFLc0YsS0FBS3NzRixPQUFPSyx5QkFBMEIsRUFDM0NqeUYsS0FBS3NGLEtBQUtzc0YsT0FBT0csZ0JBQWlCLEVBQ2xDL3hGLEtBQUtzRixLQUFLc3NGLE9BQU9JLFlBQWEsR0FDdkIsR0FKc0NoeUYsS0FBSzYzRiwwQkFLcEQsQ0FFQSxpQkFBTUUsQ0FBYXo0RixTQUVqQixPQURBVSxLQUFLc0YsS0FBS3NzRixPQUFPZ0MscUJBQXNCLEdBQ2hDLENBQ1QsQ0FFQSwwQkFBTW9FLENBQXNCMTRGLFNBZ0IxQixPQWZLVSxLQUFLc0YsS0FBSyt0Rix3QkFBdUJyekYsS0FBS3NGLEtBQUsrdEYsc0JBQXdCLEdBQ3hFcnpGLEtBQUtzRixLQUFLK3RGLHVCQUF5QixFQUNuQ3J6RixLQUFLc0YsS0FBS25CLFdBQWEsRUFDdkJuRSxLQUFLc0YsS0FBS2dzRixpQkFBbUIsRUFDeEJ0eEYsS0FBS3NGLEtBQUtwRyxNQUFNczBGLG1CQUNuQnh6RixLQUFLc0YsS0FBS3BHLE1BQU1zMEYsa0JBQW1CLEdBRWhDeHpGLEtBQUtzRixLQUFLcEcsTUFBTXF2RixlQUNuQnZ1RixLQUFLc0YsS0FBS3BHLE1BQU1xdkYsY0FBZSxHQUU3QnZ1RixLQUFLc0YsS0FBSzRxRixnQkFBa0Jsd0YsS0FBS3NGLEtBQUtnc0Ysa0JBQ3hDdHhGLEtBQUtzRixLQUFLcEcsTUFBTXMwRixrQkFBbUIsRUFDbkN4ekYsS0FBS3NGLEtBQUtzc0YsT0FBT21DLGNBQWUsRUFDaEMvekYsS0FBS3NGLEtBQUttdUYsWUFBYSxJQUVsQixDQUNULENBRUEsb0JBQU13RSxDQUFnQjM0RixTQUNwQixNQUFNeWxCLE9BQVN6bEIsUUFBUS9DLE1BQU1JLGNBQzdCLElBQUlvb0IsT0FBT2hXLFVBQVV3VCxTQUFTLFlBQTlCLENBRUEsR0FEQXdDLE9BQU9oVyxVQUFVMEwsT0FBTyxZQUNuQnphLEtBQUttQixLQU1WLE9BRktuQixLQUFLc0YsS0FBS2dnRixVQUFTdGxGLEtBQUtzRixLQUFLZ2dGLFFBQVUsQ0FBQyxHQUM3Q3RsRixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQVFsQyxVQUFVd3pDLHdCQUF3QnRuRCxLQUFLbUIsUUFDNURuQixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLFFBQ3ZCaFcsS0FBS3NGLEtBQUtnZ0YsUUFBUXR2RSxNQUFNNkssVUFBVyxRQUM3QjdnQixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQU1pTCxTQUFTLENBQUVDLFVBQVUsSUFDbkRsaEIsS0FBS3NGLEtBQUtnc0YsaUJBQW1CLEVBQzdCdHhGLEtBQUtzRixLQUFLc3NGLE9BQU9rQyxhQUFjLEVBQy9CL3VFLE9BQU9oVyxVQUFVMEwsT0FBTyxZQUNwQnphLEtBQUtzRixLQUFLZ2dGLFFBQVF0dkUsTUFBTXFKLFFBQzFCcmYsS0FBS3NGLEtBQUttdUYsWUFBYSxFQUN2Qnp6RixLQUFLc0YsS0FBS3NzRixPQUFPbUMsY0FBZSxRQUVELElBQXBCL3pGLEtBQUtzRixLQUFLckosT0FBeUIrRCxLQUFLa3lGLFlBQVloNEYsUUFDN0Q4RixLQUFLc0YsS0FBS3JKLE1BQ1IrRCxLQUFLa3lGLFlBQVloNEYsTUFBTW9MLEtBQUtBLEtBQUt0SixRQUFRQyxNQUFNN0YsT0FBUyxJQUl2RCxHQXJCTDJTLEdBQUdDLGNBQWN3VSxNQUFNbGdCLEtBQUtDLEtBQUtDLFNBQVMsc0JBSEQsQ0F5QjdDLENBRUEsYUFBTTA2RixDQUFTNTRGLFNBVWIsYUFUTXdVLFVBQVU2akIsTUFBTTMzQixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE1BQU8sVUFBVyxDQUN4RCtPLE9BQVF6bEIsUUFBUS9DLE1BQU1JLGNBQ3RCdUIsUUFBUSxJQUVOOEIsS0FBS3NGLEtBQUtnZ0YsUUFBUXR2RSxNQUFNcUosU0FDMUJyZixLQUFLc0YsS0FBS3NzRixPQUFPbUMsY0FBZSxFQUNoQy96RixLQUFLc0YsS0FBS211RixZQUFhLEVBQ3ZCenpGLEtBQUtzRixLQUFLZ3NGLGlCQUFtQixJQUV4QixDQUNULENBRUEsMEJBQU02RyxDQUFzQjc0RixTQUUxQixHQURLVSxLQUFLc0YsS0FBS2dnRixVQUFTdGxGLEtBQUtzRixLQUFLZ2dGLFFBQVUsQ0FBQyxHQUN6Q3RsRixLQUFLc0YsS0FBS2tzRixTQUFTMkMsV0FBYW4wRixLQUFLc0YsS0FBS2dnRixRQUFRdHZFLE9BQU93SSxVQUFXLENBQ3RFLE1BQU10SCxPQUM0QyxpQkFBekNsWCxLQUFLc0YsS0FBS2tzRixTQUFTb0Usa0JBQ3RCLEdBQUc1MUYsS0FBS3NGLEtBQUtrc0YsU0FBU29FLG9CQUN0QjUxRixLQUFLc0YsS0FBS2tzRixTQUFTb0Usa0JBQ3pCNTFGLEtBQUtzRixLQUFLZ2dGLFFBQVErTyxpQkFBbUIsSUFBSXZ5RixLQUFLb1YsY0FDeENsWCxLQUFLc0YsS0FBS2dnRixRQUFRK08saUJBQWlCenBGLFNBQVMsQ0FBRXRJLE9BQU8sR0FDN0QsQ0FDQSxHQUFJdEMsS0FBS3NGLEtBQUtrc0YsU0FBU00sUUFFbkI5eEYsS0FBS3NGLEtBQUtrc0YsU0FBUytDLGVBQ25CdjBGLEtBQUtzRixLQUFLZ2dGLFFBQVF0dkUsT0FBT3dJLFVBQ3pCLENBQ0EsTUFBTXEzRSxXQUMyQyxpQkFBeEM3MUYsS0FBS3NGLEtBQUtrc0YsU0FBU3NFLGlCQUN0QixHQUFHOTFGLEtBQUtzRixLQUFLa3NGLFNBQVNzRSxtQkFDdEI5MUYsS0FBS3NGLEtBQUtrc0YsU0FBU3NFLGlCQUN6QjkxRixLQUFLc0YsS0FBS2dnRixRQUFRb1AsaUJBQW1CLElBQUk1eUYsS0FBSyt6RixrQkFDeEM3MUYsS0FBS3NGLEtBQUtnZ0YsUUFBUW9QLGlCQUFpQjlwRixTQUFTLENBQUV0SSxPQUFPLElBQzNEdEMsS0FBS3NGLEtBQUtnc0YsaUJBQW9CdHhGLEtBQUtzRixLQUFLZ2dGLFFBQVFvUCxpQkFBaUJqeUYsTUFBUSxDQUMzRSxDQUtGLE9BRkF6QyxLQUFLc0YsS0FBS3NzRixPQUFPa0QsMEJBQTJCLEVBQzVDOTBGLEtBQUtzRixLQUFLc3NGLE9BQU9tQyxjQUFlLEdBQ3pCLENBQ1QsQ0FFQSwyQkFBTXFFLENBQXVCOTRGLFNBRTNCLE9BREFVLEtBQUtzRixLQUFLc3NGLE9BQU9nQyxxQkFBc0IsR0FDaEMsQ0FDVCxDQUVBLHdCQUFNeUUsQ0FBb0IvNEYsU0FReEIsT0FQS1UsS0FBS3NGLEtBQUtnZ0YsVUFBU3RsRixLQUFLc0YsS0FBS2dnRixRQUFVLENBQUMsR0FDN0N0bEYsS0FBS3NGLEtBQUtnZ0YsUUFBUTJOLG1CQUFxQixJQUFJbnhGLEtBQUs5QixLQUFLcTJGLFlBQVluL0UsY0FDM0RsWCxLQUFLc0YsS0FBS2dnRixRQUFRMk4sbUJBQW1Ccm9GLFNBQVMsQ0FBRXRJLE9BQU8sVUFDdkRwQixTQUFTaUMsZUFBZW5ELEtBQUtzRixLQUFLZ2dGLFFBQVEyTixvQkFDaERqekYsS0FBS3NGLEtBQUtzc0YsT0FBT3NCLHNCQUF1QixFQUN4Q2x6RixLQUFLc0YsS0FBS2dzRixpQkFBbUIsRUFDN0J0eEYsS0FBS3NGLEtBQUtzc0YsT0FBT21DLGNBQWUsR0FDekIsQ0FDVCxDQUdBLFdBQUFHLENBQWEzNkQsVUFBVyxHQUN0QixNQUFNdTlELEtBQU8sQ0FDWHRGLFNBQVUsQ0FBQyxFQUNYdHRDLE9BQVEsQ0FBQyxFQUNUaDJCLFNBQVMsR0FFTG9xRSxNQUFRLENBQ1o3RyxRQUFTbjBGLEtBQUtDLEtBQUtDLFNBQVMsYUFDNUJzMEYsT0FBUXgwRixLQUFLQyxLQUFLQyxTQUFTLGFBQzNCazBGLGFBQWNwMEYsS0FBS0MsS0FBS0MsU0FBUyxrQkFDakN5M0YsVUFBVzMzRixLQUFLQyxLQUFLQyxTQUFTLGtCQUM5QisyRixjQUFlajNGLEtBQUtDLEtBQUtDLFNBQVMsbUJBQ2xDczRGLGlCQUFrQng0RixLQUFLQyxLQUFLQyxTQUFTLG1CQUNyQzIyRixVQUFXNzJGLEtBQUtDLEtBQUtDLFNBQVMsa0JBQzlCbzRGLGtCQUFtQnQ0RixLQUFLQyxLQUFLQyxTQUFTLHFCQUN0Q2l5QixVQUFXbnlCLEtBQUtDLEtBQUtDLFNBQVMsY0FDOUJsSCxLQUFNZ0gsS0FBS0MsS0FBS0MsU0FBUyxjQUd2Qis3QixXQUFhdjVCLEtBQUtzRixLQUFLNDdCLGFBQ3pCbGhDLEtBQUtzRixLQUFLNDdCLFdBQWEsQ0FBQyxHQUcxQixNQUFNcTNELFlBQWMzNUYsUUFBUUMsTUFBTWs2QixXQUNoQy80QixLQUFLd3hGLFNBQ0x4eEYsS0FBS3NGLEtBQUtrc0YsVUFJWixJQUFLLE1BQU8zMUYsT0FBUStELE9BQU93SyxRQUFRbXVGLGFBdUJQLEtBQXJCQSxZQUFZMThGLE1BQXNDLE9BQXZCbUUsS0FBS3d4RixTQUFTMzFGLE9BQ3hDQyxNQUFNSSxPQUFPcThGLFlBQVkxOEYsUUFDekJLLE9BQU9xOEYsWUFBWTE4RixRQUFVbUUsS0FBS3d4RixTQUFTMzFGLE9BRy9DaTdGLEtBQUs1b0UsU0FBVSxFQUVmNG9FLEtBQUt0RixTQUFTMzFGLEtBQU8sQ0FDbkIyOEYsSUFBS3g0RixLQUFLd3hGLFNBQVMzMUYsS0FDbkJrN0YsSUFBS3dCLFlBQVkxOEYsS0FDakJ2RixLQUFNZ2lHLE1BQU16OEYsS0FDWkEsS0FFRTA5QixXQUFVdjVCLEtBQUtzRixLQUFLNDdCLFdBQVdybEMsTUFBTyxJQUs5QyxPQUFPaTdGLElBQ1QsRUN0OEJLLE1BQU0yQixrQkFBa0J0ekYsU0FDN0IsV0FBQUUsQ0FBYUMsS0FBTUMsY0FDTyxJQUFiRCxLQUFLSSxNQUNkSixLQUFLSSxJQUFNLCtDQUVickosTUFBTWlKLEtBQU1DLFNBQ1p2RixLQUFLdUYsUUFBVUEsT0FDakIsQ0FHQSxnQkFBSW16RixHQUNGLE1BQU1DLE1BQVEsR0FDUkMsTUFBUTU0RixLQUFLakUsT0FBTzI4RixhQUN2Qm5pRyxRQUFPb1gsSUFBTUEsRUFBRXNoRixTQUNmanJGLEtBQUkySixHQUNJLElBQUkyL0UsYUFBYTMvRSxLQUV0QmtyRixRQUFVNzRGLEtBQUtqRSxPQUFPMjhGLGFBQ3pCbmlHLFFBQU9vWCxHQUFLQSxFQUFFc2hGLFNBQ2RqckYsS0FBSTJKLEdBQ0ksSUFBSTIvRSxhQUFhMy9FLEtBc0I1QixPQXBCQTNOLEtBQUtqRSxPQUFPMjhGLGFBQWEvZ0YsU0FBUWhLLElBRS9CQSxFQUFFZ2hGLE9BQVMsR0FDUGhoRixFQUFFc2hGLE9BQ0p0aEYsRUFBRWdoRixPQUFTa0ssUUFDUnRpRyxRQUFPczVCLEdBQUtBLEVBQUVseUIsT0FBU2dRLEVBQUVoUSxPQUFTa3lCLEVBQUVzK0Qsa0JBQ3BDbnFGLEtBQUk2ckIsSUFDSSxDQUFFbHlCLEtBQU1reUIsRUFBRWx5QixLQUFNckgsS0FBTXU1QixFQUFFdjVCLFNBR25DcVgsRUFBRWdoRixPQUFTaUssTUFDUnJpRyxRQUFPczVCLEdBQUtBLEVBQUVseUIsT0FBU2dRLEVBQUVoUSxPQUFTa3lCLEVBQUVzK0Qsa0JBQ3BDbnFGLEtBQUk2ckIsSUFDSSxDQUFFbHlCLEtBQU1reUIsRUFBRWx5QixLQUFNckgsS0FBTXU1QixFQUFFdjVCLFNBR3JDLE1BQU13aUcsV0FBYSxJQUFJeEwsYUFBYTMvRSxHQUVwQ2dyRixNQUFNdmhHLEtBQUswaEcsV0FBVSxJQUVoQkgsS0FDVCxDQUVBLHNCQUFJSSxHQUNGLE1BQU1MLGFBQWUxNEYsS0FBSzA0RixhQUkxQixPQUhBQSxhQUFhL2dGLFNBQVFoSyxJQUNuQkEsRUFBRWs1RSxTQUFXN21GLEtBQUtnNUYsdUJBQXVCcnJGLEVBQUVoUSxLQUFJLElBRTFDKzZGLFlBQ1QsQ0FFQSx5QkFBSXhELEdBQ0YsT0FBT2wxRixLQUFLakUsT0FBTzI4RixhQUFhaDVGLE1BQUtpTyxHQUFLQSxFQUFFNU0sUUFDOUMsQ0FFQSxlQUFJazRGLEdBQ0YsTUFBTXRyRixFQUFJM04sS0FBS2sxRixzQkFDZixHQUFLdm5GLEVBQ0wsT0FBSUEsRUFBRXVpRCxRQUNHdG9ELGNBQWNnSixnQkFBZ0JqRCxFQUFFdWlELGNBRHpDLENBSUYsQ0FFQSw2QkFBSWdwQyxHQUNGLE1BQU1QLE1BQVEzNEYsS0FBS201RixtQkFBbUJqdEYsTUFDcEMsQ0FBQ3hQLEVBQUd3akIsSUFBTXhqQixFQUFFNnlGLFlBQWNydkUsRUFBRXF2RSxjQUs5QixPQUhBb0osTUFBTWhoRixTQUFRaEssSUFDWkEsRUFBRWs1RSxTQUFXN21GLEtBQUtnNUYsdUJBQXVCcnJGLEVBQUVoUSxLQUFJLElBRTFDZzdGLEtBQ1QsQ0FFQSw0QkFBSVMsR0FDRixNQUFNVCxNQUFRMzRGLEtBQUttNUYsbUJBQW1CanRGLE1BQ3BDLENBQUN4UCxFQUFHd2pCLElBQU1BLEVBQUVvbUQsV0FBYTVwRSxFQUFFNHBFLGFBSzdCLE9BSEFxeUIsTUFBTWhoRixTQUFRaEssSUFDWkEsRUFBRWs1RSxTQUFXN21GLEtBQUtnNUYsdUJBQXVCcnJGLEVBQUVoUSxLQUFJLElBRTFDZzdGLEtBQ1QsQ0FFQSxTQUFJQyxHQUNGLE9BQU81NEYsS0FBSzA0RixhQUFhbmlHLFFBQU9vWCxJQUFNQSxFQUFFcWhGLFVBQVlyaEYsRUFBRXdoRixXQUFZLEVBQ3BFLENBRUEsV0FBSTBKLEdBQ0YsT0FBTzc0RixLQUFLMDRGLGFBQWFuaUcsUUFBT29YLEdBQUtBLEVBQUVxaEYsVUFBWXJoRixFQUFFd2hGLFdBQVksRUFDbkUsQ0FFQSxtQkFBSWtLLEdBQ0YsT0FBT3I1RixLQUFLMDRGLGFBQWFZLE9BQU05NEYsR0FBS0EsRUFBRTB0RixhQUN4QyxDQUVBLG9CQUFJcUwsR0FDRixPQUFPdjVGLEtBQUswNEYsYUFBYVksT0FBTTNyRixHQUFLQSxFQUFFMGhGLFlBQVl4NkQsUUFDcEQsQ0FFQSxzQkFBQW1rRSxDQUF3QjNHLGlCQUN0QixJQUFLcnlGLEtBQUtqRSxPQUFPeTlGLFdBQVd4NEQsTUFBTXBnQyxPQUNoQyxPQUVGLElBQUtaLEtBQUtpa0YsUUFBUyxPQUNuQixNQUVNNEMsU0FGWTdtRixLQUFLdzVGLFVBRUk5NUYsTUFBSzRhLElBQzlCLE1BQU1tL0UsR0FBS24vRSxFQUFFbytFLGNBQWNoNUYsTUFBS2lPLEdBQUswa0Ysa0JBQW9CMWtGLEVBQUVoUSxPQUMzRCxRQUFTODdGLE1BRVgsT0FBSTVTLGVBQUosQ0FJRixDQUVBLGtCQUFBd08sQ0FBb0JoRCxpQkFDbEIsTUFBTUgsWUFBY2x5RixLQUFLakUsT0FBTzI4RixhQUFhaDVGLE1BQzNDaU8sR0FBSzBrRixrQkFBb0Ixa0YsRUFBRWhRLE9BRTdCLEdBQUl1MEYsWUFBYSxPQUFPdHpGLFFBQVFDLE1BQU11TyxVQUFVOGtGLFlBRWxELENBRUEsY0FBQXdILENBQWdCckgsaUJBQ2QsTUFBTStDLGdCQUFrQnAxRixLQUFLcTFGLG1CQUFtQmhELGlCQUNoRCxHQUFJK0MsZ0JBQWlCLE9BQU8sSUFBSTlILGFBQWE4SCxnQkFFL0MsQ0FFQSx5QkFBSXVFLEdBQ0YsR0FBSzM1RixLQUFLaWtGLFFBQ1YsT0FBT2prRixLQUFLbzVGLHlCQUF5QjE1RixNQUNuQ2lPLEdBQUtBLEVBQUVySSxLQUFLNnFGLHVCQUF5QixHQUV6QyxDQUVBLGVBQUl5SixHQUNGLE1BQU1oQixNQUFRNTRGLEtBQUswNEYsYUFDaEJ4c0YsTUFBSyxDQUFDeFAsRUFBR3dqQixJQUFNeGpCLEVBQUU2eUYsWUFBY3J2RSxFQUFFcXZFLGVBQ2hDaDVGLFFBQU9vWCxHQUFLQSxFQUFFdWhGLFNBQ2xCLEdBQUkwSixNQUFNaDRGLE9BQVMsRUFBRyxPQUFPZzRGLE1BQU0sRUFFckMsQ0FFQSxpQkFBSWlCLEdBQ0YsTUFBTWhCLFFBQVU3NEYsS0FBSzA0RixhQUNsQnhzRixNQUFLLENBQUN4UCxFQUFHd2pCLElBQU14akIsRUFBRTZ5RixZQUFjcnZFLEVBQUVxdkUsZUFDaENoNUYsUUFBT29YLEdBQUtBLEVBQUVxaEYsV0FDbEIsR0FBSTZKLFFBQVFqNEYsT0FBUyxFQUFHLE9BQU9pNEYsUUFBUXA2RixPQUFPLEdBQUcybUIsS0FFbkQsQ0FFQSxzQkFBSSt6RSxHQUNGLE1BQU1TLFlBQWM1NUYsS0FBSzQ1RixZQUNuQkMsY0FBZ0I3NUYsS0FBSzY1RixjQUMzQixJQUFJbEIsTUFBUTM0RixLQUFLMDRGLGFBaUJqQixPQWhCSzE0RixLQUFLakUsT0FBTys5RixtQkFBcUJGLGNBQ3BDakIsTUFBUUEsTUFBTXBpRyxRQUFPb1gsR0FFakJBLEVBQUV1aEYsUUFBV3ZoRixFQUFFcWhGLFVBQVlyaEYsRUFBRTRoRixhQUFlcUssWUFBWXJLLGdCQUt6RHZ2RixLQUFLakUsT0FBT2crRixnQkFBa0JGLGdCQUNqQ2xCLE1BQVFBLE1BQU1waUcsUUFBT29YLEdBRWpCQSxFQUFFcWhGLFVBQWFyaEYsRUFBRXVoRixRQUFVdmhGLEVBQUU0aEYsYUFBZXNLLGNBQWN0SyxlQUt6RG9KLEtBQ1QsQ0FFQSxzQkFBSXFCLEdBQ0YsTUFBTXJCLE1BQVEzNEYsS0FBS2s1RiwwQkFDbkIsR0FBSVAsTUFBTS8zRixPQUFTLEVBQUcsT0FBTyszRixNQUFNLEVBRXJDLENBRUEsd0JBQU1zQixDQUFvQmo1RCxNQUFNLFFBQVcsR0FBUyxDQUFDLEdBQ25ELE1BQU1rNUQsaUJBQW1CbDZGLEtBQUttNkYscUJBQXFCbjVELE1BQ25ELGFBQWFoaEMsS0FBSzlCLE9BQ2hCLENBQUUsc0JBQXVCZzhGLGtCQUN6QixDQUFFbDhGLFFBRU4sQ0FFQSx1QkFBTXc1RixDQUFtQjRDLGVBQWdCcG9FLFlBQVksUUFBVyxHQUFTLENBQUMsR0FDeEUsTUFBTTBtRSxhQUFlOTVGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU8yOEYsY0FDbkR4NkYsT0FBU1UsUUFBUUMsTUFBTXVPLFVBQVU0a0IsWUFDakNxb0UsaUJBQW1CM0IsYUFBYXZoRCxXQUNwQ3hwQyxHQUFLeXNGLGlCQUFtQnpzRixFQUFFaFEsUUFFRixJQUF0QjA4RixtQkFDQW44RixPQUFPUCxhQUFhTyxPQUFPUCxLQUMvQmlCLFFBQVFDLE1BQU0yYSxZQUFZay9FLGFBQWEyQixrQkFBbUJuOEYsT0FBUSxDQUNoRW84RixXQUFXLFVBRVB0NkYsS0FBS2k2RixtQkFBbUJ2QixhQUFjLENBQUUxNkYsU0FDaEQsQ0FFQSxvQkFBQW04RixDQUFzQm41RCxNQUNwQixNQUFNazVELGlCQUFtQmw1RCxNQUFRcGlDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU8yOEYsY0FnQnJFLE9BZkExM0QsS0FBS3JwQixTQUFRaEssSUFDWCxJQUFJckksS0FFRkEsS0FEeUIsaUJBQXZCcUksRUFBRXRJLFlBQVkvTyxLQUNUcVgsRUFBRXJJLEtBRUZxSSxFQUVULE1BQU13UCxNQUFRbmQsS0FBS20zQyxVQUFVK2lELGlCQUFrQjUwRixLQUFLM0gsT0FDckMsSUFBWHdmLE9BQ0YrOEUsaUJBQWlCOWlHLEtBQUtrTyxNQUN0QnlELEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS0MsU0FBUyxpQ0FFekMwOEYsaUJBQWlCLzhFLE9BQVM3WCxJQUM1QixJQUVLNDBGLGdCQUNULENBRUEsdUJBQU1LLENBQ0pDLGNBQ0FDLGlCQUNBLG9CQUF1QixFQUFJLFFBQVcsR0FBUyxDQUFDLEdBRWhELE1BQU1DLFVBQVkxNkYsS0FBSzA1RixlQUFlYyxlQUNoQ0csWUFBYzM2RixLQUFLMDVGLGVBQWVlLGlCQUNsQ1AsaUJBQW1CdDdGLFFBQVFDLE1BQU11TyxVQUNyQ3BOLEtBQUtqRSxPQUFPMjhGLGNBRVJrQyxlQUFpQlYsaUJBQWlCL2lELFdBQ3RDeHBDLEdBQUs2c0YsZ0JBQWtCN3NGLEVBQUVoUSxPQUVyQms5RixpQkFBbUJYLGlCQUFpQi9pRCxXQUN4Q3hwQyxHQUFLOHNGLGtCQUFvQjlzRixFQUFFaFEsT0FHN0IsR0FBSys4RixXQUFjQyxZQUtuQixHQUFJQSxZQUFZeE0sZ0JBQ2RwbEYsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sa0NBQW1DLENBQ2xEMWQsS0FBTXFrRyxZQUFZcmtHLFlBSHhCLENBU0EsR0FBSXdrRyxtQkFBb0IsQ0FDdEIsR0FBSUosVUFBVXZLLHVCQUF5QixFQU9yQyxZQU5BcG5GLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLG9DQUFxQyxDQUNwRHdtRixjQUNBTyxRQUFTTCxVQUFVdkssMEJBS3pCdUssVUFBVW5LLHNCQUFzQixHQUNoQzJKLGlCQUFpQlUsZ0JBQWtCaDhGLFFBQVFDLE1BQU11TyxVQUFVc3RGLFVBQVVwMUYsS0FDdkUsQ0FFQXExRixZQUFZdk0sZUFDWjhMLGlCQUFpQlcsa0JBQW9CajhGLFFBQVFDLE1BQU11TyxVQUNqRHV0RixZQUFZcjFGLFlBRVJ0RixLQUFLOUIsT0FDVCxDQUFFLHNCQUF1Qmc4RixrQkFDekIsQ0FBRWw4RixRQXRCSixNQVhFK0ssR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUyw0QkFtQzlDLENBRUEscUJBQU13OUYsQ0FBaUIzSSxnQkFBaUI0SSxZQUFZLFFBQVcsR0FBUyxDQUFDLEdBQ3ZFLE1BQU0vSSxZQUFjbHlGLEtBQUswNUYsZUFBZXJILGlCQUV4QyxJQUFLSCxZQU1ILFlBTEFucEYsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sK0JBQWdDLENBQy9DcStFLG1CQU1OLE1BQU02SCxpQkFBbUJ0N0YsUUFBUUMsTUFBTXVPLFVBQ3JDcE4sS0FBS2pFLE9BQU8yOEYsY0FFUjJCLGlCQUFtQkgsaUJBQWlCL2lELFdBQ3hDeHBDLEdBQUswa0Ysa0JBQW9CMWtGLEVBQUVoUSxPQUV6QnUwRixZQUFZL3RGLFdBQWE4MkYsV0FBWS9JLFlBQVk3RCxrQkFDaEQ2RCxZQUFZOUQsZUFDakI4TCxpQkFBaUJHLGtCQUFvQno3RixRQUFRQyxNQUFNdU8sVUFDakQ4a0YsWUFBWTVzRixZQUVSdEYsS0FBSzlCLE9BQ1QsQ0FBRSxzQkFBdUJnOEYsa0JBQ3pCLENBQUVsOEYsUUFFTixDQUVBLHNCQUFNazlGLENBQ0o3SSxpQkFDQSxvQkFBdUIsRUFBSSxRQUFXLEdBQVMsQ0FBQyxHQUVoRCxNQUFNSCxZQUFjbHlGLEtBQUswNUYsZUFBZXJILGlCQUV4QyxJQUFLSCxZQU1ILFlBTEFucEYsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sK0JBQWdDLENBQy9DcStFLG1CQU1OLE1BQU02SCxpQkFBbUJ0N0YsUUFBUUMsTUFBTXVPLFVBQ3JDcE4sS0FBS2pFLE9BQU8yOEYsY0FFUjJCLGlCQUFtQkgsaUJBQWlCL2lELFdBQ3hDeHBDLEdBQUswa0Ysa0JBQW9CMWtGLEVBQUVoUSxPQUU3QixHQUFJdTBGLFlBQVkvRCxnQkFDZHBsRixHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTyxrQ0FBbUMsQ0FDbERxK0UsdUJBSE4sQ0FRQSxHQUFJeUksbUJBQW9CLENBQ3RCLEdBQUk1SSxZQUFZL0IsdUJBQXlCLEVBT3ZDLFlBTkFwbkYsR0FBR0MsY0FBY3dVLE1BQ2ZsZ0IsS0FBS0MsS0FBS3lXLE9BQU8sb0NBQXFDLENBQ3BEd21GLGNBQWVuSSxnQkFDZjBJLFFBQVM3SSxZQUFZL0IsMEJBSzNCK0IsWUFBWTNCLHNCQUFzQixFQUNwQyxDQUNBMkIsWUFBWTlELGVBQ1o4TCxpQkFBaUJHLGtCQUFvQno3RixRQUFRQyxNQUFNdU8sVUFDakQ4a0YsWUFBWTVzRixZQUVSdEYsS0FBSzlCLE9BQ1QsQ0FBRSxzQkFBdUJnOEYsa0JBQ3pCLENBQUVsOEYsUUFuQkosQ0FxQkYsQ0FFQSxvQ0FBTW05RixDQUNKOUksZ0JBQ0F2eEYsT0FDQSxRQUFXLEdBQVMsQ0FBQyxHQUVyQixNQUFNb3hGLFlBQWNseUYsS0FBSzA1RixlQUFlckgsaUJBRXhDLElBQUtILFlBTUgsWUFMQW5wRixHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTywrQkFBZ0MsQ0FDL0NxK0UsbUJBTU4sTUFBTTZILGlCQUFtQnQ3RixRQUFRQyxNQUFNdU8sVUFDckNwTixLQUFLakUsT0FBTzI4RixjQUVSMkIsaUJBQW1CSCxpQkFBaUIvaUQsV0FDeEN4cEMsR0FBSzBrRixrQkFBb0Ixa0YsRUFBRWhRLE9BRzdCdTBGLFlBQVkzQixxQkFBcUJ6dkYsT0FFakNvNUYsaUJBQWlCRyxrQkFBb0J6N0YsUUFBUUMsTUFBTXVPLFVBQ2pEOGtGLFlBQVk1c0YsWUFFUnRGLEtBQUs5QixPQUNULENBQUUsc0JBQXVCZzhGLGtCQUN6QixDQUFFbDhGLFFBRU4sQ0FFQSxpQ0FBTXk1RixFQUE2QixrQkFDZCxFQUFJLGtCQUNKLEVBQUksUUFDZCxFQUFJLEtBQ04sTUFDTCxDQUFDLEdBQ0gsTUFBTTJELGtCQUFvQnA3RixLQUFLMjVGLHNCQUN6QnI2RixRQUFVLENBQ2QrM0YsaUJBQ0FDLGlCQUNBdDVGLE9BQ0ErYixNQUVGLE9BQUtxaEYsa0JBQ0VwN0YsS0FBS3E3RixvQkFBb0JELGtCQUFrQno5RixLQUFNMkIsU0FEekJVLEtBQUtxN0YseUJBQW9CeDlGLEVBQVd5QixRQUVyRSxDQUVBLHlCQUFNKzdGLENBQ0poSixpQkFDQSxrQkFDcUIsRUFBSSxrQkFDSixFQUFJLFFBQ2QsRUFBSSxLQUNOLE1BQ0wsQ0FBQyxHQUVMLE1BQU1pSixXQUFhdDdGLEtBQUt1N0YsaUNBQWlDbEosZ0JBQWlCLENBQ3hFZ0YsaUJBQ0FtRSxlQUFnQmxFLGlCQUNoQnY5RSxhQUVJL1osS0FBSzlCLE9BQU9vOUYsV0FBWSxDQUFFdDlGLFFBQ2xDLENBRUEsZ0NBQUF1OUYsQ0FDRWxKLGlCQUNBLGtCQUFxQixFQUFJLGtCQUFxQixFQUFJLEtBQVMsTUFBUyxDQUFDLEdBRXJFLE1BQU1vSixNQUFRcEosZ0JBR1JxSix1QkFBeUIsQ0FBQyxFQUMxQmhELGFBQWUxNEYsS0FBS2pFLE9BQU8yOEYsYUFDN0I5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBTzI4RixjQUNwQyxHQUNKQSxhQUFhL2dGLFNBQVFoSyxXQUNaQSxFQUFFNU0sT0FDTDA2RixPQUFTQSxRQUFVOXRGLEVBQUVoUSxPQUFNZ1EsRUFBRTVNLFFBQVMsTUFFNUMyNkYsdUJBQXVCLHVCQUF5QmhELGFBRWhELE1BQU1pRCxvQkFBc0IzN0YsS0FBS2c1Rix1QkFBdUJ5QyxPQUN4RCxJQUFJRyxvQkFBc0IsS0FzQjFCLE9BckJJRCxvQkFDRXJFLGlCQUNGc0Usb0JBQXNCNTdGLEtBQUs2N0YsOEJBQ3pCRixvQkFBb0JoK0YsS0FDcEIsQ0FBRTA1RixpQkFBa0J0OUUsT0FFYnM5RSxtQkFDVHVFLG9CQUFzQixDQUFDLEVBQ3ZCQSxvQkFBb0IsaUNBQ2xCNTdGLEtBQUs4N0YsZ0NBQ1BGLG9CQUFvQiwrQkFDbEI1N0YsS0FBSys3RixvQ0FBb0NKLG9CQUFvQmgrRixLQUFNLENBQ2pFb2MsUUFJTjZoRixvQkFBc0I1N0YsS0FBSzY3RixtQ0FBOEJoK0YsRUFBVyxDQUNsRXc1RixtQkFJQXVFLG9CQUNLaDlGLFFBQVFDLE1BQU0yYSxZQUNuQmtpRix1QkFDQUUscUJBRVVGLHNCQUNoQixDQUVBLDhCQUFBTSxDQUNFekcsY0FDQSxpQkFBb0IsR0FBUyxDQUFDLEdBRWpCLElBQUluRSxrQkFBa0IsQ0FDakNvRSxVQUFXeDFGLEtBQUtyQyxLQUNoQjQzRixhQUNBMEcsZ0JBQ0EvRSxRQUFTM0IsZUFBaUJ2MUYsS0FBS3c3RixlQUFlNzlGLE9BRTNDaTRCLFdBS1AsQ0FJQSx5QkFBTXNtRSxFQUFxQixRQUFXLEdBQVMsQ0FBQyxHQUM5QyxNQUFNeEQsYUFBZTE0RixLQUFLakUsT0FBTzI4RixhQUM3Qjk1RixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPMjhGLGNBQ3BDLEdBQ0pBLGFBQWEvZ0YsU0FBUWhLLElBQ2ZBLEVBQUV3aUYsdUJBQXlCeGlGLEVBQUV1aUYsaUJBQy9CdmlGLEVBQUV3aUYsd0JBQTBCeGlGLEVBQUV1aUYsZUFDMUJ2aUYsRUFBRXdpRix1QkFBeUJ4aUYsRUFBRXVpRixpQkFDL0J2aUYsRUFBRXdpRix1QkFBeUJ4aUYsRUFBRXVpRixnQkFFakMsVUFFSWx3RixLQUFLaTZGLG1CQUFtQnZCLGFBQWMsQ0FBRTE2RixRQUFRLElBQ3REZ0MsS0FBS3kzRiw0QkFBNEIsQ0FBRXo1RixRQUNyQyxDQUdBLGdCQUFNeUosQ0FBWWt6QixZQUNoQixHQUFJcjlCLEtBQUtzRyxLQUFLMkUsS0FBTSxDQUNsQixNQUFNcEgsS0FBTzJTLFVBQVUyMkMsZUFBZTl2QixZQUNoQys5RCxhQUFlMTRGLEtBQUtqRSxPQUFPMjhGLGFBQzdCOTVGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU8yOEYsY0FDcEMsR0FDRXY3RSxNQUFRdTdFLGFBQWF2aEQsV0FBVXhwQyxHQUFLQSxFQUFFd3VGLFdBQWFoN0YsS0FBS3hELE9BQzFEd2YsT0FBUyxJQUNYdTdFLGFBQWF2N0UsT0FBT2t5RSxXQUFXQyxlQUFpQm51RixLQUFLd25ELHFCQUMvQzNvRCxLQUFLOUIsT0FBTyxDQUFFLHNCQUF1Qnc2RixlQUUvQyxLQUFPLENBQ0wsTUFBTXB6RixLQUFPLENBQ1hBLEtBQU1xMUIsV0FDTnQ4QixLQUFNLFNBQ04rOUYsT0FBUSxhQUNSbjJGLEtBQU1qRyxLQUFLckMsTUFFYkwsS0FBS3FnQixPQUFPQyxLQUFLLGNBQWV0WSxLQUNsQyxDQUNGLENBR0EsYUFBSWswRixHQUNGLE1BQU1BLFVBQVl4NUYsS0FBS2lrRixRQUNuQmprRixLQUFLakUsT0FBT3k5RixVQUFVeDRELEtBQ3BCcGlDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxNQUM5QyxHQUNGaGhDLEtBQUtxOEYsVUFFVCxPQURBcjhGLEtBQUtzOEYsaUJBQWlCOUMsV0FDZkEsU0FDVCxDQUVBLGVBQUFsRSxDQUFpQkMsY0FBYyxlQUFrQixHQUFTLENBQUMsR0FJekQsT0FIa0JnSCxjQUNkMzlGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS3c1RixXQUM3Qng1RixLQUFLdzVGLFdBQ1E5NUYsTUFBSzRhLEdBQUtpN0UsZUFBaUJqN0UsRUFBRTNjLE1BQ2hELENBRUEsZ0JBQUEyK0YsQ0FBa0I5QyxXQUNoQixHQUFLQSxXQUFXNTRGLE9BQWhCLENBQ0E0NEYsVUFBVSxHQUFHcjRFLE9BQVEsRUFFckIsSUFBSyxJQUFJaEUsTUFBUSxFQUFHQSxNQUFRcThFLFVBQVU1NEYsT0FBUXVjLFFBQVMsQ0FDckQsTUFBTTFELFFBQVUsR0FDVm90RSxTQUFXMlMsVUFBVXI4RSxPQUN0QjBwRSxTQUFTdndGLE1BQU1takIsUUFBUXJpQixLQUFLLFNBQzdCeXZGLFNBQVM5bEYsUUFBUTBZLFFBQVFyaUIsS0FBSyxVQUM5Qnl2RixTQUFTOTVELE9BQVMvc0IsS0FBS2lrRixTQUFTeHFFLFFBQVFyaUIsS0FBSyxRQUNqRHl2RixTQUFTNXVELFdBQWF4ZSxRQUFRcFYsS0FBSyxJQUNyQyxDQUVJbTFGLFVBQVU1NEYsT0FBUyxJQUFHNDRGLFVBQVVBLFVBQVU1NEYsT0FBUyxHQUFHNDdGLE1BQU8sR0FFakVoRCxVQUFVN2hGLFNBQVEyQyxJQUNoQixHQUFJQSxFQUFFbytFLGNBQWdCcCtFLEVBQUVvK0UsYUFBYTkzRixPQUFRLENBQzNDMFosRUFBRW8rRSxhQUFlcCtFLEVBQUVvK0UsYUFBYW5pRyxRQUFPb1gsS0FBYSxPQUFOQSxLQUM5QyxJQUFLLElBQUkyUyxFQUFJLEVBQUdBLEVBQUloRyxFQUFFbytFLGFBQWE5M0YsT0FBUTBmLElBQUssQ0FDOUMsTUFBTTJ0QixLQUFPM3pCLEVBQUVvK0UsYUFBYXA0RSxHQUc1QixJQUFJM1MsRUFDZ0IsaUJBQVRzZ0MsTUFBcUJBLGdCQUFnQjd4QyxPQUM5Q3VSLEVBQUkzTixLQUFLakUsT0FBTzI4RixhQUFhaDVGLE1BQUtpTyxHQUFLc2dDLE9BQVN0Z0MsRUFBRWhRLE9BQ2IsaUJBQTVCc3dDLE1BQU01b0MsYUFBYS9PLE1BQzVCcVgsT0FBSTlQLEVBQ0prTCxHQUFHQyxjQUFjc0ssS0FDZmhXLEtBQUtDLEtBQUtDLFNBQVMsc0NBRWhCbVEsT0FBSTlQLE9BRU0sSUFBTjhQLEVBQ1QyTSxFQUFFbytFLGFBQWFwNEUsR0FBSyxJQUFJZ3RFLGFBQWEzL0UsR0FHckMxQyxRQUFRdVMsTUFDTiwyREFHTixDQUNBbEQsRUFBRW8rRSxhQUFheHNGLEtBQUtpbEYsaUJBQ3RCLElBekNzQixDQTJDMUIsQ0FFQSxhQUFJa0wsR0FDRixJQUNHcjhGLEtBQUtqRSxPQUFPeTlGLFVBQVV4NEQsTUFDZSxJQUF0Q2hoQyxLQUFLakUsT0FBT3k5RixVQUFVeDRELEtBQUtwZ0MsT0FFM0IsT0FHRixNQUFNNDRGLFVBQVksR0FFWnpzRSxLQUFPL3NCLEtBQUt5OEYsYUFDbEIsSUFBSUMsb0JBQXFCQyxlQUFnQkMsZ0JBaUJ6QyxHQWhCc0JGLG9CQUFsQjN2RSxLQUFLbnNCLFFBQVUsR0FDVlosS0FBS2pFLE9BQU84Z0csZUFBaUI5dkUsS0FBS25zQixPQURDLEVBR2Ztc0IsS0FBS25zQixPQUFTWixLQUFLakUsT0FBTzhnRyxjQUVuQkYsZUFBaEMzOEYsS0FBS2pFLE9BQU84Z0csZUFBaUIsR0FDeEI3OEYsS0FBS2pFLE9BQU84Z0csZUFBaUI5dkUsS0FBS25zQixPQURVLEVBRS9CWixLQUFLakUsT0FBTzhnRyxjQUFnQjl2RSxLQUFLbnNCLE9BR3JEZzhGLGdCQUQwQixJQUF4QkYsb0JBQ2dCMThGLEtBQUtqRSxPQUFPeTlGLFVBQVV4NEQsS0FBS3BnQyxPQUczQ1osS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxLQUFLcGdDLE9BQVM4N0Ysb0JBR3BCLElBQWhCM3ZFLEtBQUtuc0IsUUFDSFosS0FBS2pFLE9BQU84Z0csY0FBZ0IsRUFDOUIsSUFDRSxJQUFJMS9FLE1BQVEsRUFDWkEsTUFBUS9hLEtBQUtDLElBQUlyQyxLQUFLakUsT0FBTzhnRyxlQUM3QjEvRSxRQUVBNFAsS0FBSzMxQixLQUFLLENBQ1J1RyxLQUFNcUMsS0FBSzg4RixrQkFDWC92RSxNQUFNLEVBQ04yckUsYUFBYyxLQU10QixNQUFNcUUsZUFBaUJuK0YsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBT3k5RixXQUMzRCxJQUFLLElBQUlyOEUsTUFBUSxFQUFHQSxNQUFReS9FLGdCQUFpQnovRSxRQUFTLENBQ3BELElBQUkwcEUsU0FBVyxDQUFDLEVBQ2hCLE1BQU02UixhQUFlLEdBRW5CdjdFLE9BQVN1L0UscUJBQ1R2L0UsTUFBUXUvRSxvQkFBc0JLLGVBQWUvN0QsS0FBS3BnQyxTQUVsRGltRixTQUFXam9GLFFBQVFDLE1BQU11TyxVQUN2QjJ2RixlQUFlLzdELEtBQUs3akIsTUFBUXUvRSxzQkFFOUI3VixTQUFTOTVELE1BQU8sRUFDaEI4NUQsU0FBUzZSLGNBQWMvZ0YsU0FBUWhLLElBQ3BCLE1BQUxBLEdBQVcrcUYsYUFBYXRoRyxLQUFLdVcsRUFBQyxLQUdsQ3dQLE9BQVN3L0UsZ0JBQWtCeC9FLE1BQVF3L0UsZUFBaUI1dkUsS0FBS25zQixTQUMzRGhDLFFBQVFDLE1BQU0yYSxZQUFZcXRFLFNBQVU5NUQsS0FBSzVQLE1BQVF3L0UsZ0JBQWlCLENBQ2hFckMsV0FBVyxJQUdidnRFLEtBQUs1UCxNQUFRdy9FLGdCQUFnQmpFLGNBQWMvZ0YsU0FBUWhLLElBQ3hDLE1BQUxBLEdBQVcrcUYsYUFBYXRoRyxLQUFLdVcsRUFBQyxJQUdwQ2s1RSxTQUFTNlIsYUFBZUEsY0FFMUI3UixTQUFTMWxFLE9BQVEsRUFDakIwbEUsU0FBU21XLEtBQU0sRUFDZnhELFVBQVVwaUcsS0FBS3l2RixTQUNqQixDQUVBLE9BQU8yUyxTQUNULENBRUEsZ0JBQUlpRCxHQUVGLE1BQU03RCxNQUFRNTRGLEtBQUtqRSxPQUFPZytGLGVBQ3RCLzVGLEtBQUs0NEYsTUFDTDU0RixLQUFLNDRGLE9BQU9yaUcsUUFBT29YLElBQU1BLEVBQUVySSxLQUFLc21ELFVBRTlCaXRDLFFBQVU3NEYsS0FBS2pFLE9BQU8rOUYsa0JBQ3hCOTVGLEtBQUs2NEYsUUFDTDc0RixLQUFLNjRGLFNBQVN0aUcsUUFBT3M1QixJQUFNQSxFQUFFdnFCLEtBQUtzcUYsV0FlaENxTixXQUFhLEdBRWJDLGNBQWdCbDlGLEtBQUttOUYsV0FBV3RFLFNBQ2hDdUUsY0FBZ0JwOUYsS0FBS3E5RixXQUFXeEUsU0FDaEN5RSxZQUFjdDlGLEtBQUttOUYsV0FBV3ZFLE9BQzlCMkUsWUFBY3Y5RixLQUFLcTlGLFdBQVd6RSxPQUVwQyxJQUF1QixJQUFuQnNFLGdCQUEyQyxJQUFuQkUsY0FBc0IsQ0FFaEQsSUFBSyxJQUFJNXhELElBQU0weEQsY0FBZTF4RCxLQUFPNHhELGNBQWU1eEQsTUFBTyxDQUV6RCxNQUFNcTdDLFNBQVcsQ0FDZmxwRixLQUFNcUMsS0FBSzg4RixrQkFDWC92RSxNQUFNLEVBQ04yckUsYUFBYyxJQUVpQkcsUUFDOUJ0aUcsUUFBT29YLEdBQUs2OUIsTUFBUTc5QixFQUFFNGhGLGNBQ3RCcmpGLE1BQUssQ0FBQ3hQLEVBQUd3akIsSUFBTXhqQixFQUFFL0YsSUFBTXVwQixFQUFFdnBCLE1BQ0hnaEIsU0FBUWhLLEdBQy9CazVFLFNBQVM2UixhQUFhdGhHLEtBQUt1VyxFQUFFaFEsUUFFL0JzL0YsV0FBVzdsRyxLQUFLeXZGLFNBQ2xCLENBR0EsSUFBSyxJQUFJMXBFLE1BQVEsRUFBR0EsTUFBUW5kLEtBQUtqRSxPQUFPeWhHLGNBQWVyZ0YsUUFDckQ4L0UsV0FBVzdsRyxLQUFLLENBQ2R1RyxLQUFNcUMsS0FBSzg4RixrQkFDWC92RSxNQUFNLEVBQ04yckUsYUFBYyxJQUdwQixDQUVBLElBQXFCLElBQWpCNEUsY0FBdUMsSUFBakJDLFlBRXhCLElBQUssSUFBSS94RCxJQUFNOHhELFlBQWE5eEQsS0FBTyt4RCxZQUFhL3hELE1BQU8sQ0FFckQsTUFBTXE3QyxTQUFXLENBQ2ZscEYsS0FBTXFDLEtBQUs4OEYsa0JBQ1gvdkUsTUFBTSxFQUNOMnJFLGFBQWMsSUFFaUJFLE1BQzlCcmlHLFFBQU9vWCxHQUFLNjlCLE1BQVE3OUIsRUFBRTRoRixjQUN0QnJqRixNQUFLLENBQUN4UCxFQUFHd2pCLElBQU14akIsRUFBRS9GLElBQU11cEIsRUFBRXZwQixNQUNIZ2hCLFNBQVFoSyxHQUMvQms1RSxTQUFTNlIsYUFBYXRoRyxLQUFLdVcsRUFBRWhRLFFBRS9Ccy9GLFdBQVc3bEcsS0FBS3l2RixTQUNsQixDQUdGLE9BQU9vVyxVQUNULENBRUEseUJBQU1RLENBQXFCejhELE1BQU0sUUFBVyxHQUFTLENBQUMsR0FFcEQsTUFBTTA4RCxZQUFjMTlGLEtBQUsyOUYsbUJBQW1CMzhELFlBQ3RDaGhDLEtBQUs5QixPQUNULENBQUUsd0JBQXlCdy9GLGFBQzNCLENBQUUxL0YsUUFFTixDQUVBLG9CQUFNdTVGLENBQWdCaEMsYUFBY3ZqRSxZQUFZLFFBQVcsR0FBUyxDQUFDLEdBQ25FLE1BQU13bkUsVUFBWTU2RixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPeTlGLFVBQVV4NEQsTUFDMUQ5aUMsT0FBU1UsUUFBUUMsTUFBTXVPLFVBQVU0a0IsWUFDakM0ckUsY0FBZ0JwRSxVQUFVcmlELFdBQVU3OEIsR0FBS2k3RSxlQUFpQmo3RSxFQUFFM2MsUUFDM0MsSUFBbkJpZ0csZ0JBQ0ExL0YsT0FBT1AsYUFBYU8sT0FBT1AsS0FDL0JpQixRQUFRQyxNQUFNMmEsWUFBWWdnRixVQUFVb0UsZUFBZ0IxL0YsT0FBUSxDQUMxRG84RixXQUFXLFVBRVB0NkYsS0FBS3k5RixvQkFBb0JqRSxVQUFXLENBQUV4N0YsU0FDOUMsQ0FFQSxrQkFBQTIvRixDQUFvQjM4RCxNQUNsQixNQUFNMDhELFlBQWM5K0YsUUFBUUMsTUFBTXVPLFVBQVU0ekIsTUFDdEM2OEQsb0JBQXNCNzlGLEtBQUtqRSxPQUFPMjhGLGFBQWExMEYsS0FBSTJKLEdBQUtBLEVBQUVoUSxPQXdCaEUsT0F0QkErL0YsWUFBWS9sRixTQUFRMkMsSUFNbEIsVUFKT0EsRUFBRTJkLGtCQUNGM2QsRUFBRTZHLGFBQ0Y3RyxFQUFFa2lGLFlBQ0ZsaUYsRUFBRTBpRixJQUNMMWlGLEVBQUVvK0UsY0FBZ0JwK0UsRUFBRW8rRSxhQUFhOTNGLE9BQVEsQ0FDM0MsSUFBSyxJQUFJMGYsRUFBSSxFQUFHQSxFQUFJaEcsRUFBRW8rRSxhQUFhOTNGLE9BQVEwZixJQUN6Q2hHLEVBQUVvK0UsYUFBZXArRSxFQUFFbytFLGFBQWFuaUcsUUFBT29YLEtBQWEsT0FBTkEsS0FFMUMyTSxFQUFFbytFLGFBQWFwNEUsR0FBR2hiLE1BQU0zSCxPQUMxQjJjLEVBQUVvK0UsYUFBYXA0RSxHQUFLaEcsRUFBRW8rRSxhQUFhcDRFLEdBQUdoYixLQUFLM0gsTUFLL0MyYyxFQUFFbytFLGFBQWVwK0UsRUFBRW8rRSxhQUFhbmlHLFFBQU9vSCxNQUNyQ2tnRyxvQkFBb0I3NkYsU0FBU3JGLE9BRWpDLEtBR0srL0YsV0FDVCxDQUVBLG9CQUFNSSxDQUNKQyxjQUNBLE1BQVUsRUFBQyxRQUFZLENBQUMsRUFBQyxRQUFXLEdBQVMsQ0FBQyxHQUU5QyxNQUFNdkUsVUFBWTU2RixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPeTlGLFVBQVV4NEQsTUFDaEV3NEQsVUFBVTdoRixTQUFRMkMsV0FDVEEsRUFBRXZaLFVBRVgsTUFBTTY4RixjQUFnQnBFLFVBQVVyaUQsV0FBVTc4QixHQUFLeWpGLGVBQWlCempGLEVBQUUzYyxPQUNsRSxJQUF1QixJQUFuQmlnRyxjQUNGLE9BQU8sRUFFVCxNQUFNSSxpQkFBbUJKLGNBQWdCLzFDLE1BQ3pDLEdBQUltMkMsaUJBQW1CeEUsVUFBVTU0RixPQUFRLE9BQU8sRUFDaEQsTUFBTXE5RixZQUFjci9GLFFBQVFDLE1BQU11TyxVQUFVOHdGLFNBSzVDLE9BSkFELFlBQVl0Z0csS0FBT3FDLEtBQUs4OEYsa0JBQ3hCbUIsWUFBWWx4RSxLQUFPeXNFLFVBQVVvRSxlQUFlN3dFLEtBQzVDa3hFLFlBQVlsOUYsUUFBUyxFQUNyQnk0RixVQUFVcmpFLE9BQU82bkUsaUJBQWtCLEVBQUdDLG1CQUN6QmorRixLQUFLeTlGLG9CQUFvQmpFLFVBQVcsQ0FBRXg3RixRQUNyRCxDQUVBLG9CQUFNbWdHLENBQWdCeGdHLE1BQU0sUUFBVyxHQUFTLENBQUMsR0FDL0MsTUFBTTY3RixVQUFZNTZGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxNQUMxRDQ4RCxjQUFnQnBFLFVBQVVyaUQsV0FBVTc4QixHQUFLM2MsT0FBUzJjLEVBQUUzYyxPQUsxRCxHQUpBNjdGLFVBQVVyakUsT0FBT3luRSxjQUFlLEdBQ2hDcEUsVUFBVTdoRixTQUFRMkMsV0FDVEEsRUFBRXZaLFVBRVB5NEYsVUFBVTU0RixPQUFTLEVBQUcsQ0FDeEIsSUFBSXVjLE1BQVF5Z0YsY0FBZ0IsRUFDeEJ6Z0YsTUFBUSxJQUFHQSxNQUFRLEdBQ3ZCcThFLFVBQVVyOEUsT0FBT3BjLFFBQVMsQ0FDNUIsQ0FDQSxhQUFhZixLQUFLeTlGLG9CQUFvQmpFLFVBQVcsQ0FBRXg3RixRQUNyRCxDQUVBLHNCQUFNczVGLENBQ0ovQixjQUNBLGtCQUFxQixFQUFJLFFBQVcsR0FBUyxDQUFDLEdBRTlDLE1BQU12akUsV0FBYWh5QixLQUFLNjdGLDhCQUE4QnRHLGFBQWMsQ0FDbEU4Qix5QkFFSXIzRixLQUFLOUIsT0FBTzh6QixXQUFZLENBQUVoMEIsUUFDbEMsQ0FFQSxnQ0FBQW9nRyxFQUFrQyxrQkFDYixFQUFJLEtBQ2hCLE1BQ0wsQ0FBQyxHQUNILE1BQU1wc0UsV0FBYSxDQUFDLEVBQ2R3bkUsVUFBWXg1RixLQUFLakUsT0FBT3k5RixVQUFVeDRELEtBQ3BDcGlDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxNQUM5QyxHQVVKLE9BVEF3NEQsVUFBVTdoRixTQUFRMkMsV0FDVEEsRUFBRXZaLFVBRVhpeEIsV0FBVyx5QkFBMkJoeUIsS0FBSzI5RixtQkFBbUJuRSxXQUUxRG5DLG1CQUNGcmxFLFdBQVcsaUNBQW1DLEVBQzlDQSxXQUFXLGdDQUFrQyxHQUV4Q0EsVUFDVCxDQUVBLDZCQUFBNnBFLENBQ0V0RyxjQUNBLGtCQUFxQixFQUFJLEtBQVMsTUFBUyxDQUFDLEdBRTVDLElBQUtBLGFBQ0gsT0FBT3YxRixLQUFLbytGLGlDQUFpQyxDQUMzQy9HLG1CQUdKLE1BQU1ybEUsV0FBYSxDQUFDLEVBQ2R3bkUsVUFBWXg1RixLQUFLakUsT0FBT3k5RixVQUFVeDRELEtBQ3BDcGlDLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxNQUM5QyxHQWlCSixPQWhCQXc0RCxVQUFVN2hGLFNBQVEyQyxXQUNUQSxFQUFFdlosT0FDTHcwRixlQUFpQmo3RSxFQUFFM2MsT0FBTTJjLEVBQUV2WixRQUFTLE1BRTFDaXhCLFdBQVcseUJBQTJCaHlCLEtBQUsyOUYsbUJBQW1CbkUsV0FFMURuQyxtQkFDRnJsRSxXQUFXLGlDQUNUaHlCLEtBQUs4N0YsZ0NBQ1A5cEUsV0FBVywrQkFDVGh5QixLQUFLKzdGLG9DQUFvQ3hHLGFBQWMsQ0FBRXg3RSxRQU10RGlZLFVBQ1QsQ0FHQSxrQkFBSXdwRSxHQUNGLElBQUt4N0YsS0FBS3c1RixVQUFXLE9BQ3JCLE1BQU0zUyxTQUFXN21GLEtBQUt3NUYsVUFBVTk1RixNQUFLNGEsR0FBS0EsRUFBRXZaLFNBQzVDLElBQUs4bEYsU0FBVSxPQUNYQSxTQUFTNlIsY0FBYzkzRixTQUFRaW1GLFNBQVN3WCxnQkFBaUIsR0FDN0QsTUFBTW5rRyxNQUFROEYsS0FBS2k1RixZQUNuQixHQUFJLytGLE1BQU8sQ0FDVCxNQUFNK3hELEtBQU8veEQsTUFBTXdGLEtBQUttbkYsU0FBU3NPLGlCQUFpQjFsRSxXQUM5Q3c4QixPQUNGNDZCLFNBQVN5WCxxQkFBc0IsRUFDL0J6WCxTQUFTMFgsZ0JBQWtCdHlDLEtBRS9CLENBQ0EsT0FBTzQ2QixRQUNULENBRUEsb0JBQUkyWCxHQUNGLElBQUt4K0YsS0FBS3c1RixVQUFXLE9BQ3JCLE1BQU1pRixZQUFjeitGLEtBQUt3NUYsVUFBVXJpRCxXQUFVNzhCLEdBQUtBLEVBQUV2WixTQUNwRCxJQUFxQixJQUFqQjA5RixZQUFvQixPQUN4QixHQUFvQixJQUFoQkEsWUFBbUIsT0FDdkIsTUFBTTVYLFNBQVc3bUYsS0FBS3c1RixVQUFVaUYsWUFBYyxHQUN4Q3ZrRyxNQUFROEYsS0FBS2k1RixZQUNuQixHQUFJLytGLE1BQU8sQ0FDVCxNQUFNK3hELEtBQU8veEQsTUFBTXdGLEtBQUttbkYsU0FBU3NPLGlCQUFpQjFsRSxXQUM5Q3c4QixPQUNGNDZCLFNBQVN5WCxxQkFBc0IsRUFDL0J6WCxTQUFTMFgsZ0JBQWtCdHlDLEtBRS9CLENBQ0EsT0FBTzQ2QixRQUNULENBRUEsZ0JBQUk2WCxHQUNGLElBQUsxK0YsS0FBS3c1RixVQUFXLE9BQ3JCLE1BQU1pRixZQUFjeitGLEtBQUt3NUYsVUFBVXJpRCxXQUFVNzhCLEdBQUtBLEVBQUV2WixTQUNwRCxJQUFxQixJQUFqQjA5RixZQUFvQixPQUN4QixHQUFJQSxjQUFnQnorRixLQUFLdzVGLFVBQVU1NEYsT0FBUyxFQUFHLE9BQy9DLE1BQU1pbUYsU0FBVzdtRixLQUFLdzVGLFVBQVVpRixZQUFjLEdBQ3hDdmtHLE1BQVE4RixLQUFLaTVGLFlBQ25CLEdBQUkvK0YsTUFBTyxDQUNULE1BQU0reEQsS0FBTy94RCxNQUFNd0YsS0FBS21uRixTQUFTc08saUJBQWlCMWxFLFdBQzlDdzhCLE9BQ0Y0NkIsU0FBU3lYLHFCQUFzQixFQUMvQnpYLFNBQVMwWCxnQkFBa0J0eUMsS0FFL0IsQ0FDQSxPQUFPNDZCLFFBQ1QsQ0FFQSxvQkFBTThYLENBQWdCcjVGLFlBQ2R0RixLQUFLNCtGLHVCQUNUdDVGLEtBQUtpd0YsYUFDTGp3RixLQUFLc0csRUFDTHRHLEtBQUs4bEQsRUFDTDlsRCxLQUFLc0gsTUFFVCxDQUVBLDRCQUFNZ3lGLENBQ0pySixhQUNBM3BGLEVBQ0F3L0MsRUFDQTUrQyxTQUNBLFFBQVcsR0FBUyxDQUFDLEdBRXJCLE1BQU1ndEYsVUFBWTU2RixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPeTlGLFVBQVV4NEQsTUFDMUQ0OEQsY0FBZ0JwRSxVQUFVcmlELFdBQVU3OEIsR0FBS2k3RSxlQUFpQmo3RSxFQUFFM2MsT0FHbEUsT0FGQTY3RixVQUFVb0UsZUFBZWlCLFlBQWMsQ0FBRWp6RixFQUFHdy9DLEVBQUd4K0MsTUFBT0osZUFFekN4TSxLQUFLeTlGLG9CQUFvQmpFLFVBQVcsQ0FBRXg3RixRQUNyRCxDQUVBLG9DQUFNOGdHLEVBQWdDLFFBQVcsR0FBUyxDQUFDLEdBQ3pELEdBQUk5K0YsS0FBS3c3RixlQUNQLGFBQWF4N0YsS0FBSysrRix5QkFBeUIvK0YsS0FBS3c3RixlQUFlNzlGLEtBQU0sQ0FDbkVLLFFBR04sQ0FFQSw4QkFBTStnRyxDQUEwQnhKLGNBQWMsUUFBVyxHQUFTLENBQUMsR0FDakUsTUFBTWlFLFVBQVk1NkYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBT3k5RixVQUFVeDRELE1BQzFENDhELGNBQWdCcEUsVUFBVXJpRCxXQUFVNzhCLEdBQUtpN0UsZUFBaUJqN0UsRUFBRTNjLE9BR2xFLGNBRk82N0YsVUFBVW9FLGVBQWVpQixrQkFFbkI3K0YsS0FBS3k5RixvQkFBb0JqRSxVQUFXLENBQUV4N0YsUUFDckQsQ0FTQSxtQkFBTWdoRyxHQUNKLEdBQUtoL0YsS0FBS3U1RixrQkFJVixHQUFJdjVGLEtBQUttNUYsb0JBQW9CdjRGLE9BQVMsRUFDcENtSSxHQUFHQyxjQUFjc0ssS0FBS2hXLEtBQUtDLEtBQUtDLFNBQVMsbUNBRzNDLEdBQUl3QyxLQUFLcTVGLGdCQUFpQixDQUl4QixNQUFNWCxhQUFlMTRGLEtBQUswNEYsYUFDcEJ6SSxPQUFTandGLEtBQUttOUYsV0FBV245RixLQUFLbTVGLG9CQUNwQ1QsYUFBYS9nRixTQUFRaEssSUFFbkJBLEVBQUVxaUYseUJBQXlCQyxRQUMzQnRpRixFQUFFd2lGLHVCQUF5QnhpRixFQUFFdWlGLGVBQzdCdmlGLEVBQUV4SixVQUFZLFdBRVZuRSxLQUFLaTZGLG1CQUFtQnZCLGFBQWMsQ0FBRTE2RixRQUFRLFVBQ2hEZ0MsS0FBS3k5RixvQkFBb0J6OUYsS0FBS3c1RixVQUFXLENBQUV4N0YsUUFBUSxVQUNuRGdDLEtBQUtpL0YsT0FDYixPQXRCRWwyRixHQUFHQyxjQUFjc0ssS0FBS2hXLEtBQUtDLEtBQUtDLFNBQVMsNEJBdUI3QyxDQUVBLGFBQU0waEcsR0FFSixNQUFNMUYsVUFBWXg1RixLQUFLdzVGLFVBQVVqakcsUUFBTytqQixJQUFNQSxFQUFFeVMsT0FDaEQsSUFBSyxJQUFJek0sRUFBSSxFQUFHQSxFQUFJazVFLFVBQVU1NEYsT0FBUTBmLElBQ2hDazVFLFVBQVVsNUUsR0FBR280RSxlQUFjYyxVQUFVbDVFLEdBQUdvNEUsYUFBZSxJQUN2RGMsVUFBVWw1RSxHQUFHdmYsZUFBZXk0RixVQUFVbDVFLEdBQUd2ZixPQUUvQyxNQUFNbTVGLGlCQUFtQmw2RixLQUFLakUsT0FBTzI4RixhQUNqQzk1RixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPMjhGLGNBQ3BDLEdBQ0osSUFBSyxJQUFJcDRFLEVBQUksRUFBR0EsRUFBSTQ1RSxpQkFBaUJ0NUYsT0FBUTBmLElBQ3ZDNDVFLGlCQUFpQjU1RSxHQUFHdmYsZUFBZW01RixpQkFBaUI1NUUsR0FBR3ZmLGFBRXZEZixLQUFLbS9GLG9CQUFvQixFQUFHLEVBQUcsQ0FBRW5oRyxRQUFRLFVBQ3pDZ0MsS0FBS3k5RixvQkFBb0JqRSxVQUFXLENBQUV4N0YsUUFBUSxVQUM5Q2dDLEtBQUtpNkYsbUJBQW1CQyxpQkFBa0IsQ0FBRWw4RixRQUFRLFVBQ3BEZ0MsS0FBS28vRixNQUNiLENBRUEsZ0JBQUFqSSxDQUFrQjVCLGNBQWMsS0FBUyxHQUFNLENBQUMsR0FDOUMsTUFBTWlFLFVBQVk1NkYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBT3k5RixVQUFVeDRELE1BRTFEcStELGlCQURjN0YsVUFBVXJpRCxXQUFVNzhCLEdBQUtpN0UsZUFBaUJqN0UsRUFBRTNjLE9BQ3pCcXJFLEtBQ3ZDLE9BQXlCLElBQXJCd3dCLFVBQVU1NEYsT0FBcUIsS0FDL0J5K0Ysa0JBQW9CN0YsVUFBVTU0RixPQUN6QjQ0RixVQUFVQSxVQUFVNTRGLE9BQVMsR0FFbEN5K0YsaUJBQW1CLEVBQVU3RixVQUFVLEdBQ3BDQSxVQUFVNkYsaUJBQ25CLENBRUEsdUJBQU1DLENBQW1Cak4saUJBQWlCLFFBQVcsR0FBUyxDQUFDLEdBQzdELE1BQU0xa0YsRUFBSTNOLEtBQUswNUYsZUFBZXJILHVCQUN4Qm4rRCxPQUFPMmtCLFFBQVEsQ0FDbkJwcUMsTUFBT25SLEtBQUtDLEtBQUtDLFNBQVMsMEJBQzFCZ1QsUUFBUyxNQUFNbFQsS0FBS0MsS0FBS3lXLE9BQU8sNkJBQThCLENBQzVEMWQsS0FBTXFYLEVBQUVyWCxhQUVWd2lELElBQUt4MkMsVUFDSCxNQUdNaTlGLG9CQUhtQjNnRyxRQUFRQyxNQUFNdU8sVUFDckNwTixLQUFLakUsT0FBTzI4RixjQUUrQm5pRyxRQUMzQ29YLEdBQUswa0Ysa0JBQW9CMWtGLEVBQUVoUSxPQUV2QjZoRyxjQUFnQjVnRyxRQUFRQyxNQUFNdU8sVUFDbENwTixLQUFLakUsT0FBT3k5RixVQUFVeDRELE1BRXhCdytELGNBQWM3bkYsU0FBUTJDLElBQ2hCQSxFQUFFbytFLGNBQWdCcCtFLEVBQUVvK0UsYUFBYTkzRixTQUNuQzBaLEVBQUVvK0UsYUFBZXArRSxFQUFFbytFLGFBQWFuaUcsUUFDOUJvSCxNQUFRMDBGLGtCQUFvQjEwRixPQUVoQyxVQUVJcUMsS0FBS2k2RixtQkFBbUJzRixvQkFBcUIsQ0FBRXZoRyxRQUFRLFVBQ3ZEZ0MsS0FBS3k5RixvQkFBb0IrQixjQUFlLENBQUV4aEcsUUFBUSxHQUc5RCxDQUVBLG9CQUFNeWhHLENBQ0p2TixhQUNBLFFBQ1csRUFBSSxhQUNFLEtBQUksNEJBQ1UsRUFBSSxRQUN4QixHQUNQLENBQUMsR0FFTCxNQUFNZ0ksaUJBQW1CbDZGLEtBQUtqRSxPQUFPMjhGLGFBQ2pDOTVGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU8yOEYsY0FDcEMsR0FNSixHQUpJeEcsWUFBWTVzRixLQUFLa3dGLGtCQUFrQnRELFlBQVk1c0YsS0FBS2t3RixVQUNwRHRELFlBQVk1c0YsS0FBS2l3RixxQkFBcUJyRCxZQUFZNXNGLEtBQUtpd0YsYUFDdkRyRCxZQUFZNXNGLEtBQUtwSCxlQUFlZzBGLFlBQVk1c0YsS0FBS3BILFFBRWhEZzBGLFlBQVl2MEYsS0FBTSxDQUNyQixJQUFJK2hHLFFBQVMsRUFDYixNQUFRQSxRQUNOeE4sWUFBWTVzRixLQUFLM0gsS0FBT2lCLFFBQVFDLE1BQU1xbUQsU0FBUyxJQUMvQ3c2QyxPQUN1RSxJQUFyRXhGLGlCQUFpQjNqRyxRQUFPb1gsR0FBS0EsRUFBRWhRLE9BQVN1MEYsWUFBWXYwRixPQUFNaUQsTUFFaEUsQ0FFQSxHQUFJMUMsT0FBUSxDQUNOZzBGLFlBQVkvQix1QkFBeUIrQixZQUFZaEMsaUJBQ25EZ0MsWUFBWS9CLHVCQUF5QitCLFlBQVloQyxnQkFFbkQsTUFBTS95RSxNQUFRKzhFLGlCQUFpQi9pRCxXQUFVeHBDLEdBQUtBLEVBQUVoUSxPQUFTdTBGLFlBQVl2MEYsT0FDckV1OEYsaUJBQWlCLzhFLE9BQVMrMEUsWUFBWTVzRixJQUN4QyxNQUFPNDBGLGlCQUFpQjlpRyxLQUFLODZGLFlBQVk1c0YsTUFNekMsU0FKTXRGLEtBQUtpNkYsbUJBQW1CQyxpQkFBa0IsQ0FDOUNsOEYsT0FBUUEsU0FBV2dDLEtBQUtpa0YsVUFBWWprRixLQUFLMi9GLDZCQUd2Q0EsMkJBQTRCLENBQzlCLE1BQU03UCxRQUFVOXZGLEtBQUtnNkYsb0JBQW9CekssWUFDbkNtSixhQUFlMTRGLEtBQUswNEYsYUFDMUJBLGFBQWEvZ0YsU0FBUWhLLEdBQUtBLEVBQUVxaUYseUJBQXlCRixpQkFDL0M5dkYsS0FBS2k2RixtQkFBbUJ2QixhQUFjLENBQzFDMTZGLE9BQVFBLFNBQVdnQyxLQUFLaWtGLFNBRTVCLENBRUEsR0FDRWprRixLQUFLaWtGLFVBQ0hpTyxZQUFZNXNGLEtBQUtzbUQsVUFBV3NtQyxZQUFZNXNGLEtBQUtzcUYsU0FDL0MsQ0FDQSxNQUFNNFAsY0FBZ0J4L0YsS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxLQUN4Q3BpQyxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtqRSxPQUFPeTlGLFVBQVV4NEQsTUFDOUMsR0FFeUIsSUFBekJ3K0QsY0FBYzUrRixRQUNoQm1JLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUtDLFNBQVMsaUNBSXZCLElBQUlvZ0csY0FBZ0I0QixjQUFjcm9ELFdBQVU3OEIsR0FBS2k3RSxlQUFpQmo3RSxFQUFFM2MsUUFDN0MsSUFBbkJpZ0csZ0JBQXNCQSxjQUFnQixHQUNyQzRCLGNBQWM1QixlQUFlbEYsZUFDaEM4RyxjQUFjNUIsZUFBZWxGLGFBQWUsS0FLckMsSUFGUDhHLGNBQWM1QixlQUFlbEYsYUFBYXZoRCxXQUN4Q3hwQyxHQUFLQSxJQUFNdWtGLFlBQVl2MEYsUUFHekI2aEcsY0FBYzVCLGVBQWVsRixhQUFhdGhHLEtBQUs4NkYsWUFBWXYwRixZQUV2RHFDLEtBQUt5OUYsb0JBQW9CK0IsY0FBZSxDQUFFeGhHLFFBQ2xELENBQ0YsQ0FFQSxxQkFBTTRoRyxDQUNKdk4saUJBQ0Esb0JBQ3VCLEVBQUksa0JBQ04sRUFBSSxrQkFDSixFQUFJLHFCQUNELEVBQUksUUFDakIsR0FDUCxDQUFDLEdBQ0osQ0FRSCxxQkFBTTRKLENBQ0o1SixnQkFDQXdOLGVBQ0Esb0JBQ3VCLEVBQUksa0JBQ04sRUFBSSxrQkFDSixFQUFJLHFCQUNELEVBQUksUUFDakIsR0FDUCxDQUFDLEdBSUwsSUFBSXA2QyxVQUFXLEVBQ2YsTUFBTSt6QyxVQUFZNTZGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2pFLE9BQU95OUYsVUFBVXg0RCxNQUMxRDgrRCxZQUFjdEcsVUFBVXJpRCxXQUFVNzhCLEdBQ3RDQSxFQUFFbytFLGNBQWMxMUYsU0FBU3F2RixtQkFFM0IsSUFBSWdOLGlCQUFtQlMsWUFBY0QsY0FDakNSLGlCQUFtQjdGLFVBQVU1NEYsT0FBUyxJQUN4Q3krRixpQkFBbUI3RixVQUFVNTRGLE9BQVMsR0FHcEN5K0YsaUJBQW1CLElBQ3JCQSxpQkFBbUIsR0FHckIsTUFBTVUsVUFBWVYsaUJBQW1CUyxZQUMvQjVOLFlBQWNseUYsS0FBSzA1RixlQUFlckgsaUJBQ2xDNkgsaUJBQW1CdDdGLFFBQVFDLE1BQU11TyxVQUNyQ3BOLEtBQUtqRSxPQUFPMjhGLGNBRVIyQixpQkFBbUJILGlCQUFpQi9pRCxXQUN4Q3hwQyxHQUFLMGtGLGtCQUFvQjFrRixFQUFFaFEsT0FHN0IsR0FBSW05RixtQkFBb0IsQ0FDdEIsSUFBSzVJLFlBTUgsWUFMQW5wRixHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLeVcsT0FBTywrQkFBZ0MsQ0FDL0NxK0UsZ0JBQWlCcnlGLEtBQUtxeUYsbUJBSzVCLEdBQUlILFlBQVkvQix1QkFBeUIvdEYsS0FBS0MsSUFBSTA5RixXQU9oRCxZQU5BaDNGLEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUt5VyxPQUFPLG9DQUFxQyxDQUNwRHdtRixjQUFlbkksZ0JBQ2YwSSxRQUFTN0ksWUFBWS9CLDBCQUszQitCLFlBQVkzQixxQkFBcUIsRUFBSW51RixLQUFLQyxJQUFJMDlGLFlBQzlDN0YsaUJBQWlCRyxrQkFBb0J6N0YsUUFBUUMsTUFBTXVPLFVBQ2pEOGtGLFlBQVk1c0YsWUFFUnRGLEtBQUs5QixPQUNULENBQUUsc0JBQXVCZzhGLGtCQUN6QixDQUFFbDhGLFFBQVEsSUFFWnluRCxVQUFXLENBQ2IsQ0E2QkEsT0EzQmtCLElBQWRzNkMsa0JBQ0kvL0YsS0FBS28zRiwwQkFDVC9FLGdCQUNBbUgsVUFBVTZGLGtCQUFrQjFoRyxLQUM1QixDQUFFSyxRQUFRLElBRVp5bkQsVUFBVyxHQUdUNDFDLDRCQUNJcjdGLEtBQUtxN0Ysb0JBQW9CaEosZ0JBQWlCLENBQzlDZ0YsaUJBQ0FDLGlCQUNBdDVGLFFBQVEsSUFFVnluRCxVQUFXLEdBR1Q2eEMsbUJBQXFCK0QsNEJBQ2pCcjdGLEtBQUtzM0YsaUJBQWlCa0MsVUFBVTZGLGtCQUFrQjFoRyxLQUFNLENBQzVEMDVGLGlCQUNBcjVGLFFBQVEsSUFFVnluRCxVQUFXLEdBR1RBLFVBQVl6bkQsY0FBY2dDLEtBQUtqQyxNQUFNQyxRQUFPLEdBQ3pDK2hHLFNBQ1QsQ0FFQSwrQkFBTTNJLENBQ0ovRSxnQkFDQWtELGNBQ0Esa0JBQ3FCLEVBQUksa0JBQ0osRUFBSSxRQUNiLEtBQUksV0FDRixFQUFJLFFBQ1AsR0FDUCxDQUFDLEdBRUwsTUFBTWlFLFVBQVk1NkYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLakUsT0FBT3k5RixVQUFVeDRELE1BRzFEZ2lELFlBQWN3VyxVQUFVOTVGLE1BQUs0YSxHQUFLaTdFLGVBQWlCajdFLEVBQUUzYyxPQUMzRCxJQUFLcWxGLFlBSUgsWUFIQS8zRSxRQUFRdVMsTUFDTixrQkFBa0I2MEUsNkJBQTZCa0Qsd0JBTW5ELE1BQU03M0YsT0FBUzg3RixVQUFVOTVGLE1BQUs0YSxHQUM1QkEsRUFBRW8rRSxjQUFjMTFGLFNBQVNxdkYsbUJBRzNCLElBQUszMEYsT0FFSCxZQURBdU4sUUFBUXVTLE1BQU0sa0JBQWtCNjBFLGdDQUtsQyxHQURLclAsWUFBWTBWLGVBQWMxVixZQUFZMFYsYUFBZSxJQUN0RDFWLFlBQVkwVixhQUFhMTFGLFNBQVNxdkYsaUJBQWtCLE9BQ3hEclAsWUFBWTBWLGFBQWF0aEcsS0FBS2k3RixpQkFHOUIsTUFBTTJOLG9CQUFzQnRpRyxPQUFPZzdGLGFBQWFuaUcsUUFDOUNvWCxHQUFLMGtGLGtCQUFvQjFrRixJQUkzQixHQUZBalEsT0FBT2c3RixhQUFlc0gsb0JBRWxCQyxXQUFhamQsWUFBWTZiLFlBQWEsQ0FDeEMsTUFBTTNNLFlBQWNseUYsS0FBSzA1RixlQUFlckgsaUJBQ3hDLElBQUk2TixtQkFBcUJ0NEYsY0FBY3VvRCxtQkFDckMraEMsYUFBYTVzRixNQUFNNHFELFNBR3JCLEdBQUlnd0Msc0JBQXdCQSw4QkFBOEJ2a0YsZUFBaUJ1a0Ysb0JBQW9CNXVGLGtCQUFrQnRFLE9BQVEsQ0FDdkgsTUFBTW16RixZQUFjdnRGLE9BQU9oRyxNQUFNRCxPQUFPcFcsUUFBT0wsR0FBS0EsRUFBRTI4QyxXQUFhMzhDLEVBQUVnRSxPQUFPK1QsS0FBT2l5RixtQkFBbUJqeUYsS0FDM0UsSUFBdkJreUYsWUFBWXYvRixTQUNkcy9GLG1CQUFxQkMsWUFBWSxHQUVyQyxDQUNBLEdBQ0VELHNCQUdJQSw4QkFBOEJ2a0YsZUFDOUJ1a0Ysb0JBQW9CNXVGLGtCQUFrQnRFLE9BSTFDL0IsUUFBUXFJLEtBQUssNENBS2IsR0FISTB2RSxZQUFZNmIsWUFBWWp5RixRQUFVdFAsS0FBS3VQLE9BQU91ekYsT0FBT3ppRyxNQUN2RHNOLFFBQVFxSSxLQUFLLDZDQUVYNHNGLG1CQUFtQmgxRixRQUFRdk4sT0FBU3FsRixZQUFZNmIsWUFBWWp5RixNQUM5RDdELEdBQUdDLGNBQWN3VSxNQUNmbGdCLEtBQUtDLEtBQUtDLFNBQVMsa0NBRWhCLENBQ0wsTUFBTW9QLE1BQVFoRixjQUFjdW9ELG1CQUMxQjZ5QixZQUFZNmIsWUFBWWp5RixPQUUxQixJQUFJaEIsRUFBSW8zRSxZQUFZNmIsWUFBWWp6RixFQUNoQyxNQUFNdy9DLEVBQUk0M0IsWUFBWTZiLFlBQVl6ekMsRUFDbEMsSUFBSWkxQyxXQUFhLElBQUlDLEtBQUtDLFVBQ3hCMzBGLEVBQ0F3L0MsRUFDQTgwQyxtQkFBbUI1dUYsT0FBT3NJLE1BQzFCc21GLG1CQUFtQjV1RixPQUFPdUksUUFDMUJpM0MsWUFDRixNQUFNNXlELE9BQVMsR0FDZixJQUFJc2lHLGdCQUFpQixFQUNyQixNQUFRQSxnQkFBZ0IsQ0FDdEIsTUFBTUMsZ0JBQWtCN3pGLE1BQU1ELE9BQU9qTixNQUFLcUQsR0FDcENBLEVBQUVrTCxLQUFPaXlGLG1CQUFtQmp5RixJQUN6QmxMLEVBQUV1TyxPQUFPb3ZGLE9BQU9DLFdBQVdOLGNBRWhDSSxpQkFDRjcwRixFQUFJNjBGLGdCQUFnQm52RixPQUFPb3ZGLE9BQU9ubEQsTUFBUSxFQUMxQzhrRCxXQUFhLElBQUlDLEtBQUtDLFVBQ3BCMzBGLEVBQ0F3L0MsRUFDQTgwQyxtQkFBbUI1dUYsT0FBT3NJLE1BQzFCc21GLG1CQUFtQjV1RixPQUFPdUksUUFDMUJpM0MsYUFDRzB2QyxnQkFBaUIsQ0FDMUIsQ0FFQXRpRyxPQUFPOUcsS0FBSyxDQUNWKzVDLElBQUsrdUQsbUJBQW1CanlGLEdBQ3hCckMsRUFDQXcvQyxJQWdCRixNQUFNdzFDLGtCQUNlLGtCQUFaQyxRQUNIQSxRQUNBN2dHLEtBQUtqRSxPQUFPNmtHLHdCQUNaVixtQkFBbUJoMUYsT0FBT21zQyx3QkFDOUIsUUFDQW41QyxPQUNBLENBQUUyaUcsUUFBU0QsbUJBRWYsQ0FFSixPQUVNNWdHLEtBQUt5OUYsb0JBQW9CakUsVUFBVyxDQUFFeDdGLFFBQzlDLENBR0EseUJBQU1taEcsRUFBcUIsS0FDVCxJQUNYLEVBQUUsUUFDRSxHQUNQLENBQUMsU0FDR24vRixLQUFLOUIsT0FDVCxDQUNFLHFDQUNFTCxJQUFjbWhCLEtBQU9oZixLQUFLODdGLGdDQUFrQzk4RSxLQUM5RCxtQ0FDRW5oQixJQUFjaWpHLEdBQUs5Z0csS0FBSzg3RixnQ0FBa0NnRixJQUU5RCxDQUFFOWlHLFFBRU4sQ0FFQSxtQ0FBSTg5RixHQUNGLE1BQU0vaEYsS0FBTy9aLEtBQUtqQyxPQUFPK2lDLFNBQ3pCLElBQUsvbUIsS0FBTSxPQUFRLEVBQ25CLE1BQU1rakYsV0FBYWxqRixLQUFLLEdBQUdwRyxjQUFjLGdCQUN6QyxPQUFLc3BGLFdBTUVBLFdBQVcxNUIsWUFOTyxDQU8zQixDQU9BLDBDQUFJdzlCLEdBQ0YsT0FBSy9nRyxLQUFLdzdGLGVBQ0h4N0YsS0FBSys3RixvQ0FBb0MvN0YsS0FBS3c3RixlQUFlNzlGLE9BRGxDLENBRXBDLENBRUEsbUNBQUFvK0YsQ0FBcUN4RyxjQUFjLEtBQVMsT0FDMUQsTUFBTTErRSxZQUFja0QsTUFBUS9aLEtBQUtqQyxPQUFPK2lDLFNBQ3hDLElBQUtqcUIsY0FBZ0JBLFlBQVksR0FBSSxPQUFRLEVBQzdDLE1BQU1vbUYsV0FBYXBtRixZQUFZLEdBQUdsRCxjQUFjLGdCQUNoRCxJQUFLc3BGLFdBQVksT0FBUSxFQUN6QixNQUFNK0Qsc0JBQXdCL0QsV0FBV3RwRixjQUN2Qyw4QkFBOEI0aEYsa0JBRWhDLElBQUt5TCxzQkFBdUIsT0FBUSxFQUNwQyxNQUFNQyxXQUNKRCxzQkFBc0JFLFdBQ3RCRixzQkFBc0JHLFlBQWMsRUFDcENsRSxXQUFXa0UsWUFBYyxFQUMzQixPQUFPRixXQUFhLEVBQUksRUFBSTcrRixLQUFLdUksTUFBTXMyRixXQUN6QyxDQUdBLFVBQUE5RCxDQUFZbjhELE1BQ1YsT0FBS0EsTUFBTXBnQyxPQUNKb2dDLEtBQUtoMUIsUUFBTyxDQUFDbzFGLEtBQU1wdkQsVUFDeEJvdkQsS0FBSzdSLFlBQWN2OUMsUUFBUXU5QyxZQUFjNlIsS0FBT3B2RCxVQUNoRHU5QyxhQUh5QixDQUk3QixDQUVBLFVBQUE4TixDQUFZcjhELE1BQ1YsT0FBS0EsTUFBTXBnQyxPQUNKb2dDLEtBQUtoMUIsUUFBTyxDQUFDbzFGLEtBQU1wdkQsVUFDeEJvdkQsS0FBSzdSLFlBQWN2OUMsUUFBUXU5QyxZQUFjNlIsS0FBT3B2RCxVQUNoRHU5QyxhQUh5QixDQUk3QixDQUdBLFNBQUFwNEMsQ0FBV25XLEtBQU1yakMsTUFDZixPQUFPcWpDLEtBQUttVyxXQUFVeHBDLEdBQUtBLEVBQUVoUSxPQUFTQSxNQUN4QyxDQUVBLFdBQUlzbUYsR0FDRixPQUFPamtGLEtBQUtQLFFBQVEsT0FBUSxVQUM5QixDQUVBLFdBQU13L0YsR0FDSixNQUFNb0MsVUFBWTcxRSxFQUFFLFNBQVMwbkMsSUFBSSxhQUMzQm91QyxRQUFVcGxHLE9BQU9tbEcsVUFBVTN4RixRQUFRLEtBQU0sS0FDekM2eEYsT0FBU3ZoRyxLQUFLbTVGLG1CQUFtQnY0RixPQUNqQ2daLE1BQVF4WCxLQUFLYSxLQUFjLEtBQVRzK0YsT0FBZ0IsR0FBS0QsUUFBUyxHQUFLQSxTQUMzRHRoRyxLQUFLakMsTUFBTXlqRyxNQUFNLEdBQUd6Z0csT0FBUyxRQUM3QmYsS0FBS2pDLE1BQU02d0QsU0FBU2gxQyxNQUFRQSxZQUN0QjVaLEtBQUttMUIsUUFBUSxPQUFRLFdBQVcsU0FDaENuMUIsS0FBS3kzRiw2QkFDYixDQUVBLFVBQU0ySCxHQUNKLE9BQU9wL0YsS0FBS2sxQixVQUFVLE9BQVEsVUFDaEMsQ0FFQSxlQUFBNG5FLEdBQ0UsT0FBT2wrRixRQUFRQyxNQUFNcW1ELFNBQVMsR0FDaEMsQ0FFQSxnQ0FBQWt0QyxDQUFrQ0MsaUJBQ2hDLE1BQU1ILFlBQWNseUYsS0FBSzA1RixlQUFlckgsaUJBQ3hDLElBQUtILFlBQVloNEYsTUFBTyxPQUN4QixNQUFNOG1DLEtBQU8sR0FpQmIsT0FoQkFyUixTQUFTQyw4QkFBOEJqWSxTQUFRa1ksR0FDN0NtUixLQUFLNXBDLEtBQ0gsR0FBR2tHLEtBQUtDLEtBQUtDLFNBQVMsNEJBQTRCcXlCLEVBQUVyb0IsZ0JBR3hEdzVCLEtBQUs1cEMsS0FDSCxHQUFHa0csS0FBS0MsS0FBS0MsU0FBUyxzQkFBc0JGLEtBQUtDLEtBQUtDLFNBQ3BELGlCQUdKd2pDLEtBQUs1cEMsS0FDSCxHQUFHa0csS0FBS0MsS0FBS0MsU0FBUyxzQkFBc0JGLEtBQUtDLEtBQUtDLFNBQ3BELGdCQUdKMDBGLFlBQVloNEYsTUFBTXlwQixPQUFPaE0sU0FBUXhoQixHQUFLNnFDLEtBQUs1cEMsS0FBS2pCLEVBQUVHLFFBQzNDMHFDLElBQ1QsQ0FFQSx1Q0FBSXlnRSxHQUNGLE1BQU1DLGlCQUFtQjFoRyxLQUFLazFGLHNCQUM5QixHQUFLd00saUJBQ0wsT0FBTzFoRyxLQUFLb3lGLGlDQUFpQ3NQLGlCQUFpQi9qRyxLQUNoRSxDQUVBLCtCQUFJNjBGLEdBQ0YsTUFBTXh4RCxLQUFPLEdBa0NiLE9BakNBclIsU0FBU0MsOEJBQThCalksU0FBUWtZLEdBQzdDbVIsS0FBSzVwQyxLQUNILEdBQUdrRyxLQUFLQyxLQUFLQyxTQUFTLDRCQUE0QnF5QixFQUFFcm9CLGdCQUd4RHc1QixLQUFLNXBDLEtBQ0gsR0FBR2tHLEtBQUtDLEtBQUtDLFNBQVMsc0JBQXNCRixLQUFLQyxLQUFLQyxTQUNwRCxpQkFHSndqQyxLQUFLNXBDLEtBQ0gsR0FBR2tHLEtBQUtDLEtBQUtDLFNBQVMsc0JBQXNCRixLQUFLQyxLQUFLQyxTQUNwRCxnQkFJSkYsS0FBS29FLEtBQUtvSyxXQUFXNkwsU0FBUXhoQixJQUV4QjZxQyxLQUFLaCtCLFNBQVM3TSxFQUFFRyxPQUNoQkgsRUFBRUcsS0FDQTBSLGNBQ0FoRixTQUFTLElBQUkxRixLQUFLQyxLQUFLQyxTQUFTLHVCQUF1QndLLGdCQUUxRGc1QixLQUFLNXBDLEtBQUtqQixFQUFFRyxLQUNkLElBRUYwSixLQUFLMDRGLGFBQWEvZ0YsU0FBUWhLLElBQ3BCQSxFQUFFelQsT0FDSnlULEVBQUV6VCxNQUFNeXBCLE9BQU9oTSxTQUFReGhCLElBQ2hCNnFDLEtBQUtoK0IsU0FBUzdNLEVBQUVHLE9BQU8wcUMsS0FBSzVwQyxLQUFLakIsRUFBRUcsS0FBSSxHQUVoRCxJQUVLMHFDLEtBQUs5MEIsS0FBS3kxRixLQUFLQyxXQUFXQyxRQUNuQyxDQUVBLG9DQUFJQyxHQUNGLE1BQU05Z0UsS0FBTyxHQXNCYixPQXJCQXJSLFNBQVNDLDhCQUE4QmpZLFNBQVFrWSxHQUFLbVIsS0FBSzVwQyxLQUFLLEdBQUd5NEIsRUFBRXh5QixXQUNuRTJqQyxLQUFLNXBDLEtBQUssR0FBR2tHLEtBQUtDLEtBQUtDLFNBQVMsZ0JBQ2hDd2pDLEtBQUs1cEMsS0FBSyxHQUFHa0csS0FBS0MsS0FBS0MsU0FBUyxlQUVoQ0YsS0FBS29FLEtBQUtvSyxXQUFXNkwsU0FBUXhoQixJQUV4QjZxQyxLQUFLaCtCLFNBQVM3TSxFQUFFRyxPQUNoQkgsRUFBRUcsS0FDQTBSLGNBQ0FoRixTQUFTLElBQUkxRixLQUFLQyxLQUFLQyxTQUFTLHVCQUF1QndLLGdCQUUxRGc1QixLQUFLNXBDLEtBQUtqQixFQUFFRyxLQUNkLElBRUYwSixLQUFLMDRGLGFBQWEvZ0YsU0FBUWhLLElBQ3BCQSxFQUFFelQsT0FDSnlULEVBQUV6VCxNQUFNeXBCLE9BQU9oTSxTQUFReGhCLElBQ2hCNnFDLEtBQUtoK0IsU0FBUzdNLEVBQUVHLE9BQU8wcUMsS0FBSzVwQyxLQUFLakIsRUFBRUcsS0FBSSxHQUVoRCxJQUVLMHFDLEtBQUs5MEIsS0FBS3kxRixLQUFLQyxXQUFXQyxRQUNuQyxFQzlrREssTUFBTUUsa0JBQWtCNThGLFNBQzdCLFdBQUFFLENBQWFDLEtBQU1DLFNBQ2pCLFFBQXNDLElBQTNCRCxLQUFLdkosUUFBUStLLFVBQTJCLENBQ2pELE1BQU1tQixNQUFRODVGLFVBQVU3NUYsZUFBZTVDLEtBQUtoUCxPQUN0QyxLQUFNLFVBQVcsa0JBQXFCMHJHLGVBQWtCLzVGLE1BQzlEM0MsS0FBS2hQLEtBQU9BLEtBQ1pnUCxLQUFLdkosU0FBVyxDQUFDLEVBQ2pCLE1BQU04SyxXQUFhLElBQUt2QixLQUFLdkosT0FBTzhLLGNBQWVtN0YsZUFDbkQxOEYsS0FBS3ZKLE9BQVMsSUFBS3VKLEtBQUt2SixPQUFRK0ssVUFBV0csZUFBZ0JKLFdBQzdELENBQ0F4SyxNQUFNaUosS0FBTUMsUUFDZCxDQUVBLHFCQUFPMkMsQ0FBZ0JwQixXQUNyQixNQUFNckMsT0FBUyxDQUNicE4sUUFBUSxFQUNSQyxVQUFVLEVBQ1ZDLFNBQVMsRUFDVGpCLEtBQU13USxVQUNOQSxVQUNBNVAsU0FBUyxFQUNUK1AsZUFBZ0IsSUFHWnBCLE1BQVFpQixVQUFVakIsTUFBTSx3QkFDOUIsR0FBSUEsTUFBTyxDQUNUcEIsT0FBT3FDLFVBQVlqQixNQUFNLEdBQUc0MEIsT0FDNUJoMkIsT0FBT3ZOLFNBQVUsRUFFakIsTUFBTStQLGVBQWlCcEIsTUFBTSxHQUFHNDBCLE9BQ2hDaDJCLE9BQU93QyxlQUFpQkEsZUFDeEJ4QyxPQUFPbk8sS0FBTzJRLGVBQWlCLEtBQU94QyxPQUFPcUMsVUFBWSxJQUN6RHJDLE9BQU9uTixTQUFXMlAsaUJBQW1CM0osS0FBS0MsS0FBS0MsU0FBUyxtQ0FDeERpSCxPQUFPbE4sUUFBVTBQLGlCQUFtQjNKLEtBQUtDLEtBQUtDLFNBQVMsa0NBQ3ZEaUgsT0FBT3BOLE9BQVNvTixPQUFPbk4sVUFBWW1OLE9BQU9sTixPQUM1QyxDQUNBLE9BQU9rTixNQUNULENBRUEsb0JBQUl3OUYsR0FDRixPQUFPamlHLEtBQUtraUcsY0FBY3RoRyxPQUFTLENBQ3JDLENBRUEsaUJBQUlzaEcsR0FDRixHQUFJbGlHLEtBQUtrTCxRQUFVbEwsS0FBS2tMLE9BQU9qTyxRQUFTLENBQ3RDLE1BQU1rbEcsY0FBZ0IsU0FBU25pRyxLQUFLMUosT0FBTzBSLGNBQ3JDbzZGLGVBQWlCLFNBQVNwaUcsS0FBS2pFLE9BQU8rSyxZQUFZa0IsY0FDeEQsSUFBSWttQixRQUFVbHVCLEtBQUtrTCxPQUFPak8sUUFBUStPLFFBQU8sQ0FBQ2tpQixRQUFTMXRCLElBQzdDQSxFQUFFMUMsVUFBWTBDLEVBQUVDLGFBQXFCeXRCLFFBQ2xDQSxRQUFRbmlCLE9BQ2J2TCxFQUFFOEUsS0FBSzRvQixRQUFRbHFCLEtBQUk2ckIsS0FDakJBLEVBQUlqeEIsUUFBUUMsTUFBTXVPLFVBQVV5aUIsSUFDMUIveUIsT0FBUzBELEVBQ1hxdkIsRUFBRTRpQixTQUFXNWlCLEVBQUU0aUIsVUFBcUIsR0FBVDVpQixFQUFFb0MsS0FDdEJwQyxPQUdWLElBT0gsT0FOQTNCLFFBQVFoaUIsTUFBSyxDQUFDeFAsRUFBR3dqQixJQUFNeGpCLEVBQUUrMUMsU0FBV3Z5QixFQUFFdXlCLFdBQ3RDdmtCLFFBQVVBLFFBQVEzM0IsUUFDaEJpSyxHQUNFQSxFQUFFM0UsSUFBSW1NLGdCQUFrQm82RixnQkFDeEI1aEcsRUFBRTNFLElBQUltTSxnQkFBa0JtNkYsZ0JBRXJCajBFLE9BQ1QsQ0FDQSxNQUFPLEVBQ1QsQ0FPQSxrQkFBSXVqQixHQUNGLE9BQU96eEMsS0FBSzFKLElBQ2QsQ0FLQSxZQUFJaWdCLEdBQ0YsSUFBSW5nQixNQUFRLEVBdUJaLE1BdEJ3QixjQUFwQjRKLEtBQUs5RixNQUFNbUUsTUFFYmpJLE1BQVE0SixLQUFLc0ssS0FDYmxVLE9BQVM0SixLQUFLakUsT0FBTzhzQixhQUFhNHJCLFNBQzlCeHdDLFNBQVNqRSxLQUFLakUsT0FBTzhzQixhQUFhNHJCLFVBQ2xDLEVBQ0pyK0MsT0FBUzRKLEtBQUtqRSxPQUFPOHNCLGFBQWE2ckIsV0FDOUJ6d0MsU0FBU2pFLEtBQUtqRSxPQUFPOHNCLGFBQWE2ckIsWUFDbEMsRUFDSnQrQyxPQUFTNEosS0FBS2pFLE9BQU84c0IsYUFBYUMsV0FDOUI3a0IsU0FBU2pFLEtBQUtqRSxPQUFPOHNCLGFBQWFDLFlBQ2xDLEVBRUZ4ckIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBQzFCOEMsS0FBS2pFLE9BQU84c0IsYUFBYThyQixZQUV6QnYrQyxPQUFTNk4sU0FBU2pFLEtBQUtqRSxPQUFPOHNCLGFBQWE4ckIsYUFJN0N2K0MsTUFBUTZOLFNBQVNqRSxLQUFLakUsT0FBTzNGLE9BRXZCMEYsTUFBTTFGLE9BQWlCLEtBQVJBLEtBQ3pCLENBS0EsU0FBSUEsR0FDRixNQUFNQSxNQUFRNEosS0FBS2tMLFFBQVFuUCxPQUFPNG5CLFNBQVMsR0FBRzNqQixLQUFLeXhDLG1CQUFtQnI3QyxNQUN0RSxPQUFPQSxPQUFTNEosS0FBS3VXLFFBQ3ZCLENBRUEsaUJBQU0wb0MsQ0FBYTdvRCxPQUNqQixHQUF3QixjQUFwQjRKLEtBQUs5RixNQUFNbUUsS0FBc0IsQ0FDbkMsTUFBTWdrRyxNQUFRcCtGLFNBQVM3TixPQUFTNEosS0FBS3VXLFNBQy9CK3JGLEtBQ0h0aUcsS0FBS2pFLE9BQU84c0IsYUFBYUMsV0FDdEI3a0IsU0FBU2pFLEtBQUtqRSxPQUFPOHNCLFlBQVlDLFlBQ2pDLEdBQUt1NUUsWUFDTHJpRyxLQUFLOUIsT0FBTyxDQUNoQixnQ0FBaUNva0csSUFBTSxFQUFJQSxJQUFNLEdBRXJELFlBQWF0aUcsS0FBSzlCLE9BQU8sQ0FBRSxlQUFnQjlILE9BQzdDLENBRUEsd0JBQU1pckQsQ0FBb0J6MUMsR0FDeEIsR0FBa0IsVUFBZDVMLEtBQUszQixLQUFrQixPQUFPLEtBQ2xDLEdBQXdCLGNBQXBCMkIsS0FBSzlGLE1BQU1tRSxLQUFzQixDQUNuQyxNQUFNaWtHLEtBQ0h0aUcsS0FBS2pFLE9BQU84c0IsYUFBYUMsV0FDdEI3a0IsU0FBU2pFLEtBQUtqRSxPQUFPOHNCLFlBQVlDLFlBQ2pDLEdBQUs3a0IsU0FBUzJILFNBQ2Q1TCxLQUFLOUIsT0FBTyxDQUNoQixnQ0FBaUNva0csSUFBTSxFQUFJQSxJQUFNLEdBRXJELENBQ0YsRUM3SUssTUFBTUMsb0JBQW9CNXlFLFNBQy9CLFdBQUF0cUIsQ0FBYUMsS0FBTUMsY0FDTyxJQUFiRCxLQUFLSSxNQUNkSixLQUFLSSxJQUFNLHNDQUVickosTUFBTWlKLEtBQU1DLFFBQ2QsQ0FFQSxZQUFJd3NDLEdBQ0YsT0FBTy94QyxLQUFLb3JDLEtBQ2QsQ0FFQSxTQUFJQSxHQUNGLE1BQU1BLE1BQVFubkMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU1oMUMsT0FDakQsT0FBTzBGLE1BQU1zdkMsT0FBUyxLQUFPQSxLQUMvQixDQUVBLE1BQUk2RyxHQUNGLEdBQ3dDLE9BQXRDanlDLEtBQUtqRSxPQUFPQyxRQUFRb3ZDLE1BQU00RyxjQUMxQm4wQyxJQUFjbUMsS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTTRHLFNBQ0YsS0FBdENoeUMsS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTTRHLFFBRTFCLE9BQU9oeUMsS0FBS29yQyxNQUVkLEdBQ0VwckMsS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTTRHLFFBQVVoeUMsS0FBS2pFLE9BQU9DLFFBQVFvdkMsTUFBTWgxQyxNQUU5RCxPQUFPNEosS0FBS29yQyxNQUVkLE1BQU02RyxHQUFLaHVDLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUW92QyxNQUFNNEcsU0FDOUMsT0FBT2wyQyxNQUFNbTJDLElBQU0sS0FBT0EsRUFDNUIsQ0FFQSxTQUFJVSxHQUNGLE9BQU8zeUMsS0FBS29yQyxLQUNkLENBRUEsWUFBSWdILEdBQ0YsT0FBT3B5QyxLQUFLb3JDLEtBQ2QsQ0FFQSxXQUFNaVosQ0FBT2p1RCxPQUVYLE9BRElBLE1BQVE0SixLQUFLb3JDLFFBQU9oMUMsTUFBUTRKLEtBQUtvckMsYUFDeEJwckMsS0FBSzlCLE9BQU8sQ0FBRSwrQkFBZ0M5SCxPQUM3RCxDQUVBLFNBQUkwN0MsR0FDRixPQUFPOXhDLEtBQUs3RCxFQUNkLENBRUEsTUFBSUEsR0FDRixNQUFNQSxHQUFLOEgsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRRyxJQUFJL0YsT0FDNUMsT0FBTzBGLE1BQU1LLElBQU0sS0FBT0EsRUFDNUIsQ0FFQSxVQUFJMDFDLEdBQ0YsT0FBTzd4QyxLQUFLd3JDLEdBQ2QsQ0FFQSxPQUFJQSxHQUNGLE1BQU1BLElBQU12bkMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRd3ZDLEtBQUtwMUMsT0FDOUMsT0FBTzBGLE1BQU0wdkMsS0FBTyxLQUFPQSxHQUM3QixDQUVBLFNBQUlvSCxHQUNGLE9BQU8zdUMsU0FBU2pFLEtBQUtqRSxPQUFPQyxTQUFTcTJDLElBQUlwdkMsTUFBUSxDQUNuRCxDQUVBLFlBQUlxdkMsR0FDRixPQUFPdHlDLEtBQUs0eUMsS0FDZCxDQUVBLFVBQUloc0IsR0FDRixPQUFPLElBQ1QsQ0FFQSxhQUFJMnJCLEdBQ0YsT0FBTyxJQUNULEVDL0VLLE1BQU1pd0QsdUJBQXVCNWhELElBQ2xDLFdBQUF2N0MsQ0FBYW85RixVQUNYQSxTQUFTejlGLE1BQVEsR0FDakIzSSxNQUFNb21HLFNBQ1IsQ0FFQSxTQUFJaGdHLEdBQ0YsTUFBTUEsTUFBUXBHLE1BQU1vRyxNQUNwQixPQUFpQixLQUFWQSxNQUFlLEVBQVksR0FBUkEsS0FDNUIsQ0FJQSx1QkFBV2lnRyxHQUNULE1BQU8sR0FDVCxFQ2ZLLE1BQU1DLDRCQUE0QkgsZUFDdkMsdUJBQVdFLEdBQ1QsTUFBTyxHQUNULEVDSkYsTUFBTUUsU0FBVyxDQUNmQyxVQUFXLENBQ1R2c0csS0FBTSxHQUNOZ3dELEtBQU0sR0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFNBRVI0OEUsZUFBZ0IsQ0FDZHhzRyxLQUFNLDBCQUNOZ3dELEtBQU0sOEJBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxRQUNUaGQsS0FBTWpDLE9BQ04ybUcsUUFBUyxDQUNQcHBHLE1BQU8sK0JBQ1BvbUMsU0FBVSxtQ0FFWmlqRSxTQUFVQyxNQUFRQyxzQkFBc0JELE9BRTFDL2dDLHVCQUF3QixDQUN0QjVyRSxLQUFNLGtDQUNOZ3dELEtBQU0sc0NBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixTQUVSaTlFLHdCQUF5QixDQUN2QjdzRyxLQUFNLCtDQUNOZ3dELEtBQU0sK0NBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixTQUVSdTdCLDRCQUE2QixDQUMzQm5yRCxLQUFNLG1EQUNOZ3dELEtBQU0sbURBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixTQUVSaXhDLGtCQUFtQixDQUNqQjdnRSxLQUFNLHlDQUNOZ3dELEtBQU0seUNBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixTQUVSa3hDLHFCQUFzQixDQUNwQjlnRSxLQUFNLDRDQUNOZ3dELEtBQU0sNENBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixTQUVSazlFLGdCQUFpQixDQUNmOXNHLEtBQU0sdUNBQ05nd0QsS0FBTSx1Q0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFNBRVJtOUUsdUJBQXdCLENBQ3RCL3NHLEtBQU0sOENBQ05nd0QsS0FBTSw4Q0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFNBRVJvOUUsMEJBQTJCLENBQ3pCaHRHLEtBQU0saURBQ05nd0QsS0FBTSxpREFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFNBRVI0NEQsMkJBQTRCLENBQzFCeG9GLEtBQU0sa0RBQ05nd0QsS0FBTSxrREFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFNBRVJqRyxzQkFBdUIsQ0FDckIzcEIsS0FBTSxpQ0FDTmd3RCxLQUFNLHFDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFJVixTQUFTZzlFLHNCQUF1QkQsTUFDOUIsSUFBSU0sU0FBVyxFQUNmLE9BQVFOLE1BQ04sSUFBSyxXQUNITSxTQUFXLEVBQ1gsTUFDRixJQUFLLFFBQ0hBLFNBQVcsRUFHZjNnRyxPQUFPNGdHLE9BQU9sOUIsV0FBYSxDQUN6QnJzRSxRQUFTLEtBQ1RzcEcsU0FFSixDQUVPLE1BQU1FLDZCQUE2Qm5xRixnQkFDeEMseUJBQVdDLEdBQ1QsT0FBTzNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQ3JEOUssTUFBTyxzQkFDUFIsR0FBSSxpQkFDSnlMLFNBQVUsbURBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxPQUNSRixlQUFlLEdBRW5CLENBRUEsT0FBQWlYLEdBQ0UsTUFBTXR4QixRQUFVLENBQUMsRUFDWHVqRyxVQUFZLENBQ2hCYSxNQUFNLEVBQ05DLE9BQU8sR0FFVCxJQUFLLE1BQU8xMEYsRUFBR3RQLEtBQU1DLE9BQU93SyxRQUFRdzRGLFVBQ2xDdGpHLFFBQVEyUCxHQUFLLENBQ1g3WSxNQUFPa0gsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVErUixHQUNqQzIwRixRQUFTamtHLEdBRVBzUCxFQUFFcEosTUFBTSxxQkFDVmc5RixVQUFVdmpHLFFBQVEyUCxHQUFHN1ksUUFBUyxHQVFsQyxPQUxBa0osUUFBUXVrRyxjQUFnQmhCLFVBQVVhLEtBQzlCYixVQUFVYyxNQUNSLE9BQ0EsTUFDRixPQUNHcmtHLE9BQ1QsQ0FFQSx1QkFBT3drRyxHQUNMLElBQUssTUFBTzcwRixFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVF3NEYsVUFDbEN0bEcsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLzdFLEVBQUd0UCxHQUVwQ3VqRyxzQkFBc0I1bEcsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQ2xELENBRUEsaUJBQUE0YyxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUN4QkEsS0FDR3JhLEtBQUssb0JBQ0xzYSxHQUFHLFVBQVV6ZCxPQUFTeUQsS0FBSytqRyxtQkFBbUJ4bkcsU0FDakR3ZCxLQUNHcmEsS0FBSyx3Q0FDTHNhLEdBQUcsU0FBU3pkLE9BQVN5RCxLQUFLZ2tHLFlBQVl6bkcsU0FDekN3ZCxLQUNHcmEsS0FBSyxzQkFDTHNhLEdBQUcsU0FBU3pkLE9BQVN5RCxLQUFLaWtHLGdCQUFnQjFuRyxRQUMvQyxDQUVBLGtCQUFBd25HLENBQW9CeG5HLE9BQ2xCLE1BQU02a0MsSUFBTTVWLEVBQUVqdkIsTUFBTUksZUFBZXlrQyxNQUN2QixTQUFSQSxLQUEwQixRQUFSQSxLQUNwQjVWLEVBQUUsbUJBQ0M5ckIsS0FBSyx3Q0FDTDYwRCxNQUFLLFdBQ0osTUFBTTJ2QyxTQUFXMTRFLEVBQUV4ckIsTUFDUCxTQUFSb2hDLElBQ0Y4aUUsU0FBU3p5RixLQUFLLFdBQVcsR0FFekJ5eUYsU0FBU3p5RixLQUFLLFdBQVcsRUFFN0IsR0FFTixDQUVBLFdBQUF1eUYsQ0FBYXpuRyxPQUNYLE1BQU1zbUcsVUFBWSxDQUNoQmEsTUFBTSxFQUNOQyxPQUFPLEdBRVRuNEUsRUFBRSxtQkFDQzlyQixLQUFLLHdDQUNMNjBELE1BQUssV0FDYS9vQyxFQUFFeHJCLE1BQ055UixLQUFLLFdBQ2hCb3hGLFVBQVVhLE1BQU8sRUFFakJiLFVBQVVjLE9BQVEsQ0FFdEIsSUFDRm40RSxFQUFFLG9CQUFvQjRWLElBQ3BCeWhFLFVBQVVhLEtBQVFiLFVBQVVjLE1BQVEsT0FBUyxNQUFTLE9BRTFELENBRUEscUJBQU1NLENBQWlCMW5HLE9BQ3JCQSxNQUFNRSxpQkFDTixVQUFXLE1BQU93UyxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVF3NEYsZ0JBQ2xDdGxHLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRNkcsRUFBR3RQLEdBQUcwYixTQUV4QyxPQUFPcmIsS0FBS2hDLFFBQ2QsQ0FFQSxtQkFBTW0wQixDQUFlNTFCLE1BQU8rSSxNQUMxQixNQUFNdTlGLFVBQVksQ0FDaEJhLE1BQU0sRUFDTkMsT0FBTyxHQUVULFVBQVcsTUFBTTluRyxPQUFPK0QsT0FBT21FLEtBQUs2K0YsVUFDbEN0bEcsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVF2TSxJQUFLeUosS0FBS3pKLE1BQ2hDQSxJQUFJZ0ssTUFBTSxxQkFDWmc5RixVQUFVdjlGLEtBQUt6SixPQUFRLEdBRzNCeUIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsWUFBYXk2RixVQUFVYSxPQUFTYixVQUFVYyxNQUN0RSxFQy9OSyxNQUFNUSwyQkFBMkJycUIsVUFLdEMsaUJBQUFoZ0UsQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFFbkIvWixLQUFLVixRQUFRNnhELFdBRWxCcDNDLEtBQ0dyYSxLQUFLLHVCQUNMK3hCLE9BQU1sMUIsT0FBU3lELEtBQUtzN0QsZUFBZS8rRCxNQUFPLFlBQzdDd2QsS0FDR3JhLEtBQUssZ0JBQ0wreEIsT0FBTWwxQixPQUFTeUQsS0FBSys1RSxjQUFjeDlFLE1BQU8sWUFDOUMsQ0FFQSxhQUFNbzJCLENBQVNwMkIsTUFBTzhCLEtBQU8sUUFBU2c4RSxlQUFpQixVQUNyRDk5RSxNQUFNRSxpQkFDTkYsTUFBTXUvRCxrQkFFTixNQUFNL29DLGVBQWlCbnJCLGNBQWNvckIscUJBQXFCejJCLE1BQU8sUUFFakUsSUFBSWcrRSxTQUFXLEVBQ2YsTUFBTWpsRCxXQUFhdDFCLEtBQUtpRyxLQUFLbEssT0FBT3MrRSxnQkFBa0J6N0UsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU9zK0UsaUJBQW1CLEdBQ2xILElBQUssTUFBTXAwRSxRQUFROHNCLFNBQ1o5c0IsTUFBU0EsS0FBS2xLLFFBQ2QsQ0FBQ3NDLE1BQU0yRSxTQUFTaUQsS0FBSzVILFNBR3JCOEcsU0FBUzRDLFVBQVU5QixPQUNsQnF2QixXQUFXNTFCLE1BQUt1M0MsSUFBTUEsR0FBRzNnRCxPQUFTMlAsS0FBSzNQLFNBSzVCLElBQWJpa0YsV0FDRkEsZUFBaUJmLFVBQVUvb0UsVUFFN0I2a0IsV0FBV2wrQixLQUFLb2lGLFVBQVVHLFlBQVlZLFNBQVV0MEUsZUFFNUNqRyxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxDQUFDLFVBQVVtOEUsa0JBQW1CL2tELFlBQ3pELENBRUEsb0JBQU1nbUMsQ0FBZ0IvK0QsTUFBTzg5RSxlQUFpQixTQUM1Qzk5RSxNQUFNRSxpQkFDTixNQUFNRyxHQUFLNHVCLEVBQUVqdkIsTUFBTUksZUFBZSsrRCxRQUFRLFNBQ3BDejFELEtBQU9qRyxLQUFLaUcsS0FBS2xLLE9BQU9zK0UsZ0JBQWdCMzZFLE1BQUt2SixHQUMxQ0EsRUFBRWc3QyxNQUFRdjBDLEdBQUcwSSxLQUFLLGFBRTNCLElBQUtXLEtBQ0gsT0FFRixNQUFNNUMsZUFBaUJrSyxXQUFXQyxXQUNoQ3ZILEtBQUtsSyxPQUFPc1IsWUFBWWpYLE1BQ3hCLENBQ0VrTSxPQUFPLEVBQ1BzN0QsUUFBUzU5RCxLQUFLaUcsS0FBS2tyRCxXQUt2QixHQUFJdjBELEdBQUdpaEUsU0FBUyxZQUFhLENBQzNCLE1BQU1DLFFBQVVsaEUsR0FBRzRkLFNBQVMsaUJBQzVCc2pELFFBQVFqQyxRQUFRLEtBQUssSUFBTWlDLFFBQVFoN0MsVUFDckMsS0FBTyxDQUNMLE1BQU1pN0MsSUFBTXZ5QyxFQUFFLDZCQUE2Qm5vQixrQkFDckNvSyxNQUFRK2QsRUFBRSx1Q0FFaEJ1eUMsSUFBSXJ0QixPQUFPampDLE9BQ1g3USxHQUFHOHpDLE9BQU9xdEIsSUFBSUUsUUFDZEYsSUFBSUcsVUFBVSxJQUNoQixDQUNBdGhFLEdBQUdvakMsWUFBWSxXQUNqQixDQUVBLG1CQUFNKzVDLENBQWV4OUUsTUFBTzg5RSxlQUFpQixTQUMzQyxNQUFNcDBFLEtBQU91bEIsRUFBRWp2QixNQUFNSSxlQUFlRSxRQUFRLFNBQ3RDd1gsT0FBU3BPLEtBQUtYLEtBQUssV0FDbkJrMUUsTUFBUXYwRSxLQUFLWCxLQUFLLFNBQ2xCbTFFLFVBQVl6NkUsS0FBS2lHLEtBQUtsSyxPQUFPcytFLGdCQUFnQmxqQyxXQUFVNzJCLEdBQU1qTSxRQUFVaU0sRUFBRTZ3QixNQUFROThCLFFBQVltbUUsT0FBU2w2RCxJQUFNazZELFFBQ2xILEdBQUlDLFdBQWEsRUFBRyxDQUNsQixNQUFNbmxELFdBQWF0MUIsS0FBS2lHLEtBQUtsSyxPQUFPcytFLGdCQUFrQno3RSxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3MrRSxpQkFBbUIsR0FDbEgva0QsV0FBV2EsT0FBT3NrRCxVQUFXLFNBQ3ZCejZFLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLENBQUMsVUFBVW04RSxrQkFBbUIva0QsWUFDekQsQ0FDRixDQUVBLHlCQUFXL2IsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsY0FDM0JDLFNBQVUsOENBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxJQUNSd1csU0FBVSxDQUFDLENBQUVDLGFBQWMsVUFDM0JvdUMsUUFBUyxDQUFDLG9CQUNWbHVDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsaUJBSWpCLENBRUEsaUJBQUFnbEMsR0FDRSxNQUFNdEMsY0FBZ0JoM0QsTUFBTXM1RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZXJ6RCxNQUNsQ3F6RCxhQUNULENBRUEsYUFBTXppQyxHQUNKLE1BQU1DLFVBQVl4MEIsTUFBTXUwQixVQUV4QkMsVUFBVTZwRCxVQUFvQyxJQUF6QjE2RSxLQUFLaUcsS0FBSzAwRSxXQUUvQixNQUFNemhDLG9CQUFzQixHQUM1QixJQUFLLE1BQU9yOUMsSUFBS3daLFlBQWF6VixPQUFPd0ssUUFDbkN5bUIsVUFBVXZyQixLQUFLdkosT0FBT205QyxxQkFFdEIsR0FBSTdqQyxTQUFVLENBQ1osTUFBTSt1RixXQUFhOW1HLEtBQUtDLEtBQUtDLFNBQVMsVUFBVTNCLElBQUk4VCxpQkFDcER1cEMsb0JBQW9COWhELEtBQUtndEcsV0FDM0IsQ0FHRnZ6RSxVQUFVa3FELCtCQUFpQ3h0RSxXQUFXQyxXQUNwRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWWpYLE1BQ2xDLENBQ0VrTSxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVU4dUMsZ0NBQWtDcHlELFdBQVdDLFdBQ3JEcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZdXlELE9BQ2xDLENBQ0V0OUQsT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVd3pFLG1DQUFxQzkyRixXQUFXQyxXQUN4RHFqQixVQUFVdnJCLEtBQUt2SixPQUFPMmlGLHFCQUN0QixDQUNFcDhFLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVXl6RSw4QkFBZ0MvMkYsV0FBV0MsV0FDbkRxakIsVUFBVXZyQixLQUFLdkosT0FBTzRpRixnQkFDdEIsQ0FDRXI4RSxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVV2ckIsS0FBS3ZKLE9BQU80bkIsYUFBZXJtQixLQUFLdkIsT0FBT2luQixJQUFJQyxNQUFNODBCLGdCQUFnQixDQUFFalksU0FBVWpQLFVBQVV2ckIsS0FBS3ZKLE9BQU80bkIsU0FDN0drTixVQUFVb3lDLGVBQXlELElBQXhDcHlDLFVBQVV2ckIsS0FBS3ZKLE9BQU80bkIsT0FBTy9pQixPQUV4RGl3QixVQUFVdnJCLEtBQUt2SixPQUFPNG5CLE9BQU96WCxLQUFLdEUsY0FBY3VFLGVBRWhEMGtCLFVBQVUwekUsMEJBQTRCLEdBQ3RDLE1BQU1ucEIsU0FBVyxJQUFJOTlFLEtBQUtDLEtBQUtDLFNBQVMsY0FleEMsT0FkSTA3QyxvQkFBb0J0NEMsU0FDdEJpd0IsVUFBVTB6RSwyQkFBNkJyckQsb0JBQW9CNzBDLEtBQUsrMkUsV0FHbEV2cUQsVUFBVWdxRCxlQUFpQixHQUUzQmhxRCxVQUFVZ3FELGVBQWV6akYsS0FDdkIsR0FBR2tHLEtBQUtDLEtBQUtDLFNBQVMsd0JBQXdCcXpCLFVBQVV2ckIsS0FBS3ZKLE9BQU8rbEUsV0FFdEVqeEMsVUFBVWdxRCxlQUFlempGLEtBQ3ZCLEdBQUdrRyxLQUFLQyxLQUFLQyxTQUFTLHdCQUF3QnF6QixVQUFVdnJCLEtBQUt2SixPQUFPeWdELGVBR3RFM3JCLFVBQVVnRyxTQUFXdjVCLEtBQUtzRyxLQUFLMkUsS0FDeEJzb0IsU0FDVCxFQzNMSyxNQUFNMnpFLHNCQUFzQjFxQixVQUNqQyx5QkFBV3ZnRSxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREcsU0FBVSw4Q0FDVkQsUUFBUyxDQUFDLE9BQVEsT0FBUSxRQUMxQkcsTUFBTyxJQUNQQyxPQUFRLE9BQ1JvbUQsV0FBVyxFQUNYNXZDLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFVBQVdDLGFBQWMsT0FDcERtdUMsUUFBUyxDQUFDLFNBQ1ZsdUMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsY0FDYkMsZ0JBQWlCLFFBQ2pCQyxRQUFTLGlCQUlqQixDQUVBLGlCQUFBZ2xDLEdBQ0UsTUFBTXRDLGNBQWdCaDNELE1BQU1zNUQsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVyekQsTUFDbENxekQsYUFDVCxDQUVBLGFBQU16aUMsR0FDSixNQUFNQyxVQUFZeDBCLE1BQU11MEIsVUFrQ3hCLE9BakNBQyxVQUFVbTRELGVBQWlCaHBGLEtBQUtpRyxLQUFLbEssT0FBT2l0RixlQUM1Q240RCxVQUFVZ0csU0FBV3Y1QixLQUFLc0csS0FBSzJFLEtBQy9Cc29CLFVBQVVvSSxRQUFVajVCLEtBQUtpRyxLQUFLZ3pCLFFBQzlCcEksVUFBVTR6RSxjQUFnQnprRyxLQUFLeWtHLGNBQy9CNXpFLFVBQVU2ekUsV0FBb0QsVUFBakMxa0csS0FBS2lHLEtBQUtrakYsa0JBQ3ZDdDRELFVBQVU4ekUsZUFBaUIza0csS0FBS2lHLEtBQUtsSyxPQUFPNHdFLE1BQU1ELFdBQWExc0UsS0FBS2lHLEtBQUtsSyxPQUFPNHdFLE1BQU1ILFVBQ3RGMzdDLFVBQVU2cEQsVUFBb0MsSUFBekIxNkUsS0FBS2lHLEtBQUswMEUsV0FDL0I5cEQsVUFBVSt6RSxlQUFvRCxJQUFuQzVrRyxLQUFLaUcsS0FBS2xLLE9BQU82dkUsT0FBT2hyRSxPQUVuRGl3QixVQUFVa3FELCtCQUFpQ3h0RSxXQUFXQyxXQUNwRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWWpYLE1BQ2xDLENBQ0VrTSxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVU4dUMsZ0NBQWtDcHlELFdBQVdDLFdBQ3JEcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZdXlELE9BQ2xDLENBQ0V0OUQsT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVZzBFLHNCQUF3QnQzRixXQUFXQyxXQUMzQ3FqQixVQUFVdnJCLEtBQUt2SixPQUFPeVUsUUFDdEIsQ0FDRWxPLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJaEJ0Z0MsU0FDVCxDQUVBLGlCQUFJNHpFLEdBQ0YsSUFBSWgwRCxPQUFTLEVBQ2IsTUFBTW03QixPQUFTNXJFLEtBQUtpRyxLQUFLbEssT0FBTzZ2RSxPQUNoQyxJQUFLLE1BQU1tRixTQUFTbkYsT0FDZG1GLE1BQU1oMUUsT0FBTzhzRixTQUFTcDRDLFNBRTVCLE1BQU8sR0FBR0EsWUFBWW03QixPQUFPaHJFLFFBQy9CLENBRUEsaUJBQUFrWixDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUN4QkEsS0FBS3JhLEtBQUssNEJBQTRCK3hCLE9BQU1sMUIsUUFDMUNBLE1BQU1FLGlCQUNOdUQsS0FBS2lHLEtBQUs2aUYsdUJBQXNCLElBRWxDL3VFLEtBQUtyYSxLQUFLLGlCQUFpQit4QixPQUFNbDFCLE9BQVN5RCxLQUFLOGtHLFVBQVV2b0csU0FDekR3ZCxLQUFLcmEsS0FBSyxlQUFlK3hCLE9BQU1sMUIsT0FBU3lELEtBQUsra0csZUFBZXhvRyxTQUM1RHdkLEtBQUtyYSxLQUFLLGVBQWUreEIsT0FBTWwxQixPQUFTeUQsS0FBSytrRyxlQUFleG9HLFNBQzVEd2QsS0FBS3JhLEtBQUssZ0JBQWdCK3hCLE9BQU1sMUIsUUFDOUIsTUFBTTBSLEdBQUt1ZCxFQUFFanZCLE1BQU1JLGVBQWUrK0QsUUFBUSxNQUFNcDJELEtBQUssTUFDckR0RixLQUFLaUcsS0FBS21rRixxQkFBcUJuOEUsR0FBRSxJQUVuQzhMLEtBQUtyYSxLQUFLLG1DQUFtQzlELFFBQU9XLFFBQ2xELE1BQU1uRyxNQUFRNk4sU0FBUzFILE1BQU1JLGNBQWN2RyxPQUMzQzRKLEtBQUtpRyxLQUFLOGlGLGVBQWUsUUFBUzN5RixNQUFLLElBRXpDMmpCLEtBQUtyYSxLQUFLLHNCQUFzQit4QixPQUFNLEtBQ3BDenhCLEtBQUtpRyxLQUFLOGlGLGVBQWUsV0FBVSxJQUVyQ2h2RSxLQUFLcmEsS0FBSyxzQkFBc0IreEIsT0FBTSxLQUNwQ3p4QixLQUFLaUcsS0FBSzhpRixlQUFlLFdBQVUsSUFFckNodkUsS0FBS3JhLEtBQUssb0JBQW9CK3hCLE9BQU1sMUIsUUFDbEN5RCxLQUFLZ2xHLGtCQUFrQnpvRyxNQUFPLE1BQUssSUFFckN3ZCxLQUFLcmEsS0FBSyx1QkFBdUI5RCxRQUFPVyxRQUN0Q3lELEtBQUtnbEcsa0JBQWtCem9HLE1BQU8sU0FBUSxJQUV4Q3dkLEtBQUtyYSxLQUFLLG9CQUFvQit4QixPQUFNLEtBQ2xDenhCLEtBQUtpRyxLQUFLa2tGLGVBQWMsSUFFMUJwd0UsS0FBS3JhLEtBQUssdUJBQXVCK3hCLE9BQU1sMUIsUUFDckN5RCxLQUFLZ2xHLGtCQUFrQnpvRyxNQUFPLFNBQVEsSUFFeEN3ZCxLQUFLcmEsS0FBSyxXQUFXK3hCLE9BQU1sMUIsT0FBU3lELEtBQUtpbEcsV0FBVzFvRyxRQUN0RCxDQUVBLG9CQUFNd29HLENBQWdCeG9HLE9BQ3BCQSxNQUFNRSxpQkFDTixNQUVNMGdCLE1BRlVxTyxFQUFFanZCLE1BQU1JLGVBRUYrK0QsUUFBUSxNQUFNcDJELEtBQUssU0FDekMsYUFBYXRGLEtBQUtpRyxLQUFLMmlGLFlBQVl6ckUsTUFDckMsQ0FPQSxlQUFNMm5GLENBQVd2b0csT0FDZixJQUFLZSxLQUFLc0csS0FBSzJFLEtBQU0sT0FDckJoTSxNQUFNRSxpQkFDTixNQUVNMGdCLE1BRlVxTyxFQUFFanZCLE1BQU1JLGVBRUYrK0QsUUFBUSxNQUFNcDJELEtBQUssU0FFbkNzbUUsT0FBUzVyRSxLQUFLaUcsS0FBS2xLLE9BQU82dkUsT0FDNUJodEUsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU82dkUsUUFDekMsR0FFSixPQURJenVELE9BQVMsR0FBR3l1RCxPQUFPejFDLE9BQU9oWixNQUFPLFNBQ3hCbmQsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsZ0JBQWlCMHRFLFFBQ25ELENBUUEsYUFBTWo1QyxDQUFTcDJCLE1BQU84QixLQUFPLFNBQzNCOUIsTUFBTUUsaUJBRU5GLE1BQU11L0Qsa0JBRU4sTUFBTS9vQyxlQUFpQm5yQixjQUFjb3JCLHFCQUFxQnoyQixNQUFPLFFBRTNEcXZFLE9BQVMsR0FDZixJQUFLLE1BQU0zbEUsUUFBUThzQixTQUNaOXNCLE1BQVMsQ0FBQyxRQUFTLFNBQVNqRCxTQUFTaUQsS0FBSzVILFFBQzdCLFVBQWQ0SCxLQUFLNUgsS0FDUHV0RSxPQUFPeDBFLEtBQUs2TyxNQUNXLFVBQWRBLEtBQUs1SCxNQUFvQjJCLEtBQUtpRyxLQUFLbEssT0FBT3NDLEtBQUs5RSxPQUN4RHlHLEtBQUtnbEcsa0JBQWtCLEtBQU0sTUFBTyxDQUFFMXVHLEtBQU0yUCxLQUFLM1AsY0FHL0MwSixLQUFLaUcsS0FBSzBpRixVQUFVL2MsT0FDNUIsQ0FRQSxVQUFBcTVCLENBQVkxb0csT0FDVkEsTUFBTUUsaUJBRU5GLE1BQU11L0Qsa0JBRU4sT0FEcUJ0d0MsRUFBRWp2QixNQUFNSSxlQUNUeWtHLE9BQU8zakUsUUFBUSxRQUNyQyxDQVNBLHVCQUFNdW5FLENBQW1Cem9HLE1BQU8wMUIsS0FBTTN5QixRQUFVLENBQUMsR0FFL0MsSUFBSTZkLE1BQVEsS0FDUjVMLFFBQVUsS0FDVmhWLFFBQ0ZBLE1BQU1FLGlCQUNOOFUsUUFBVWlhLEVBQUVqdkIsTUFBTUksZUFFbEJ3Z0IsTUFBUTVMLFFBQVFtcUQsUUFBUSxNQUFNcDJELEtBQUssVUFHckMsTUFBTXFlLE9BQVMzakIsS0FBS2lHLEtBQUtsSyxPQUFPeXRGLE1BQU1NLE9BQ2xDbHJGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPeXRGLE1BQU1NLFFBQy9DLEdBQ0osT0FBUTczRCxNQUNOLElBQUssTUFFSHRPLE9BQU92c0IsS0FBSyxDQUVWZCxLQUFNZ0osUUFBUWhKLE1BQVFnSCxLQUFLQyxLQUFLQyxTQUFTLHFCQUV6Q3BILE1BQU8sZ0JBRVQsTUFDRixJQUFLLFNBRUh1dEIsT0FBT3hHLE9BQVMsQ0FDZDdtQixLQUFNaWIsUUFBUThzRCxHQUFHLFNBQVc5c0QsUUFBUTZ2QixNQUFRemQsT0FBT3hHLE9BQU83bUIsS0FDMURGLE1BQU9tYixRQUFROHNELEdBQUcsVUFBWTlzRCxRQUFRNnZCLE1BQVF6ZCxPQUFPeEcsT0FBTy9tQixPQUU5RCxNQUNGLElBQUssU0FFQyttQixPQUFTLEdBQUd3RyxPQUFPd1MsT0FBT2haLE1BQU8sR0FFekMsYUFBYW5kLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHNCQUF1QnlsQixRQUN6RCxFQzVOSyxNQUFNdWhGLDJCQUEyQnh2QyxXQUt0Qyx5QkFBV244QyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUFTLFdBQ3BDQyxTQUFVLG1EQUNWRSxNQUFPLElBQ1BDLE9BQVEsSUFDUndXLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFFBQVNDLGFBQWMsT0FDbERDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGFBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxXQUlqQixDQUVBLGFBQU1nQyxDQUFTcDJCLE9BQ2JBLE1BQU1FLGlCQUNORixNQUFNdS9ELGtCQUVOLE1BQU0vb0MsZUFBaUJuckIsY0FBY29yQixxQkFBcUJ6MkIsTUFBTyxRQUNqRSxJQUFLeUQsS0FBS1YsUUFBUTZ4RCxTQUNoQixPQUVGLE1BQU1qakQsTUFBUWxPLEtBQUs5RixNQUFNZ1UsTUFBTThsQyxZQUFjLEdBQzdDLElBQUssTUFBTS90QyxRQUFROHNCLFNBQ1o5c0IsTUFBU0EsS0FBS2xLLFFBR2QsQ0FBQyxPQUFRLE9BQVEsUUFBUyxVQUFVaUgsU0FBU2lELEtBQUs1SCxPQUd2RDZQLE1BQU05VyxLQUFLNk8sS0FBSyt0QyxrQkFFWmgwQyxLQUFLOUYsTUFBTWdFLE9BQU8sQ0FBRWdRLE9BQzVCLENBRUEsWUFBQXlxRCxHQUFpQixDQUVqQixpQkFBQWhELEdBQ0UsTUFBTXRDLGNBQWdCaDNELE1BQU1zNUQsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVyekQsTUFDbENxekQsYUFDVCxDQUVBLGFBQU16aUMsR0FDSixNQUFNQyxnQkFBa0J4MEIsTUFBTXUwQixVQU05QixHQUpBQyxVQUFVZ0csU0FBV3Y1QixLQUFLc0csS0FBSzJFLEtBQy9Cc29CLFVBQVVzZ0MsU0FBV254RCxLQUFLaWtCLFdBRTFCNE0sVUFBVWtsQyxZQUFjLENBQUMsRUFDckJsbEMsVUFBVTNpQixNQUFPLENBQ25CLElBQUssTUFBTWpJLFFBQVE0cUIsVUFBVTNpQixNQUV4QnRPLE9BQU9DLFVBQVVDLGVBQWVoSCxLQUMvQiszQixVQUFVa2xDLFlBQ1Y5dkQsS0FBSzVILFFBR1B3eUIsVUFBVWtsQyxZQUFZOXZELEtBQUs1SCxNQUFRLElBRXJDd3lCLFVBQVVrbEMsWUFBWTl2RCxLQUFLNUgsTUFBTWpILEtBQUs2TyxNQUV4QyxJQUFLLE1BQU13eEQsWUFBWTVtQyxVQUFVa2xDLFlBQy9CbGxDLFVBQVVrbEMsWUFBWTBCLFVBQVV2ckQsS0FBS3RFLGNBQWN1RSxjQUV2RCxDQThDQSxPQTVDQTBrQixVQUFVeWxDLFlBQytDLFdBQXZEaDVELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUMxQkksS0FBS3NHLEtBQUsyRSxLQUVac29CLFVBQVVzbkMsbUJBQ1J2NEQsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUsrM0IsVUFBVWtsQyxZQUFhLFVBQzNEbGxDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0IwbkIsVUFBVXVuQyxtQkFDUng0RCxPQUFPQyxVQUFVQyxlQUFlaEgsS0FBSyszQixVQUFVa2xDLFlBQWEsVUFDM0RsbEMsVUFBVXZyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQjBuQixVQUFVd25DLG9CQUNSejRELE9BQU9DLFVBQVVDLGVBQWVoSCxLQUFLKzNCLFVBQVVrbEMsWUFBYSxXQUMzRGxsQyxVQUFVdnJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BQy9CMG5CLFVBQVV5bkMscUJBQ1IxNEQsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUsrM0IsVUFBVWtsQyxZQUFhLFlBQzFEbGxDLFVBQVV2ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssUUFDNUI3TCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFDOUIyekIsVUFBVTJuQyxxQkFDUjU0RCxPQUFPQyxVQUFVQyxlQUFlaEgsS0FBSyszQixVQUFVa2xDLFlBQWEsWUFDM0RsbEMsVUFBVXZyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUUvQjBuQixVQUFVNHVDLGFBQ1I1dUMsVUFBVXNuQyxvQkFDVnRuQyxVQUFVdW5DLG9CQUNWdm5DLFVBQVV3bkMscUJBQ1Z4bkMsVUFBVXluQyxzQkFDVnpuQyxVQUFVMm5DLHFCQUVaM25DLFVBQVVrcUQsK0JBQWlDeHRFLFdBQVdDLFdBQ3BEcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZalgsTUFDbEMsQ0FDRWtNLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVTh1QyxnQ0FBa0NweUQsV0FBV0MsV0FDckRxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVl1eUQsT0FDbEMsQ0FDRXQ5RCxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSWhCdGdDLFNBQ1QsQ0FFQSxpQkFBQS9XLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BRXhCQSxLQUFLcmEsS0FBSyxjQUFjK3hCLE9BQU1ncUMsS0FDNUIsTUFBTTcrRCxHQUFLNHVCLEVBQUVpd0MsR0FBRzkrRCxlQUFlKytELFFBQVEsU0FDMUIxN0QsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSU4sR0FBRzBJLEtBQUssV0FDckN2SCxNQUFNQyxRQUFPLEVBQUksSUFHeEIrYixLQUFLcmEsS0FBSyxxQkFBcUIreEIsTUFBTXp4QixLQUFLODRELG1CQUFtQjUvRCxLQUFLOEcsT0FFbEUrWixLQUFLcmEsS0FBSyxlQUFlK3hCLE1BQU16eEIsS0FBSys3RCxhQUFhN2lFLEtBQUs4RyxPQUN0RCtaLEtBQUtyYSxLQUFLLGdCQUFnQit4QixNQUFNenhCLEtBQUtzN0QsZUFBZXBpRSxLQUFLOEcsT0FFekQrWixLQUFLcmEsS0FBSyxnQkFBZ0IreEIsT0FBTW52QixXQUM5QixNQUFNMUYsR0FBSzR1QixFQUFFaXdDLEdBQUc5K0QsZUFBZSsrRCxRQUFRLFNBQ2pDQyxhQUFlMzdELEtBQUs5RixNQUFNZ1UsTUFBTWhSLElBQUlOLEdBQUcwSSxLQUFLLFVBQVcsQ0FDM0RzMkQsUUFBUSxVQUVKRCxhQUFhMTlELFNBQ25CckIsR0FBR2kvRCxRQUFRLEtBQUssSUFBTTc3RCxLQUFLaEMsUUFBTyxJQUFNLElBRzFDK2IsS0FBS3JhLEtBQUssYUFBYSt4QixPQUFNZ3FDLEtBQzNCLE9BQVFBLEdBQUc5K0QsY0FBY0ksUUFBUXNCLE1BQy9CLElBQUssT0FDSDJCLEtBQUs5RixNQUFNZzdDLGdCQUFnQnVtQixJQUMzQixNQUNGLElBQUssT0FDSHo3RCxLQUFLOUYsTUFBTXU3QyxnQkFBZ0JnbUIsSUFDM0IsTUFDRixJQUFLLFFBQ0h6N0QsS0FBSzlGLE1BQU1zN0MsaUJBQWlCaW1CLElBQzVCLE1BQ0YsSUFBSyxRQUNIejdELEtBQUs5RixNQUFNbTdDLGlCQUFpQm9tQixJQUM1QixNQUNGLElBQUssU0FDSHo3RCxLQUFLOUYsTUFBTXc3QyxrQkFBa0IrbEIsSUFFakMsSUFHRjFoRCxLQUFLcmEsS0FBSyxTQUFTK3hCLE1BQU16eEIsS0FBS281RCxlQUFlbGdFLEtBQUs4RyxNQUNwRCxDQUVBLG9CQUFNbzVELENBQWdCNzhELE9BQ3BCQSxNQUFNRSxpQkFDTixNQUFNZ2hFLFNBQVd6OUQsS0FBSzlGLE1BQU1pUCxPQUM1Qm5KLEtBQUs5RixNQUFNaVAsUUFBVXMwRCxRQUN2QixDQUVBLGtCQUFNMUIsQ0FBY3gvRCxPQUNsQixNQUFNSyxHQUFLNHVCLEVBQUVqdkIsTUFBTUksZUFBZSsrRCxRQUFRLFNBQ3BDejFELEtBQU9qRyxLQUFLOUYsTUFBTWdVLE1BQU1oUixJQUFJTixHQUFHMEksS0FBSyxXQUMxQyxJQUFJa0wsUUFBVSxNQUFRbFQsS0FBS0MsS0FBS0MsU0FBUyxrQ0FDekMsTUFBTXFTLFFBQVUsQ0FDZG90RCxVQUFXajlELEtBQUs5RixNQUFNK1QsR0FDdEJyQixNQUFPLEtBQ1Bzd0QsUUFBU2w5RCxLQUFLOUYsTUFBTStULEdBQ3BCaEksS0FBTUEsS0FBS2dJLElBRVRqTyxLQUFLZ1IsT0FBTzlXLFFBQ2QyVixRQUFRb3RELFVBQVlqOUQsS0FBS2dSLE1BQU0vQyxHQUMvQjRCLFFBQVFqRCxNQUFRNU0sS0FBS2dSLE1BQU05RixPQUFPK0MsSUFFcEMsTUFBTXZCLE9BQVNwUCxLQUFLb1AsT0FBT25XLFFBQU9pSyxJQUNoQyxJQUFLLENBQUMsWUFBYSxNQUFPLFdBQVksYUFBYXdDLFNBQVN4QyxFQUFFbkMsTUFDNUQsT0FBTyxFQUVULEdBQUkyQixLQUFLOUYsTUFBTStULEtBQU96TixFQUFFeU4sR0FDdEIsT0FBTyxFQUVULElBQUlrdkQsU0FBVSxFQUNkLElBQUssTUFBT2x1RCxFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVE1SixFQUFFNGEsV0FDMUIsWUFBTm5NLEdBQW1CQSxJQUFNM1IsS0FBS3NHLEtBQUtxSyxLQUNyQ2t2RCxRQUNFQSxTQUNBeDlELElBQU11USxNQUFNb0wsMEJBQTBCOGhELE1BRzVDLE9BQU9ELFdBRVQzc0QsU0FBb0IsNkNBQ3BCLElBQUssTUFBTXRXLFNBQVN3UyxPQUNsQjhELFFBQ0VBLFFBQVUsa0JBQW9CdFcsTUFBTStULEdBQUssS0FBTy9ULE1BQU01RCxLQUFPLFlBRWpFa2EsU0FBb0IsNkJBQ2QwakIsT0FBTytQLE9BQU8sQ0FDbEJ4MUIsTUFBT25SLEtBQUtDLEtBQUtDLFNBQVMsdUNBQzFCZ1QsUUFDQTRqQixTQUFVcmEsT0FDUixNQUFNcVksU0FBVyxJQUFJaUMsU0FBU3RhLEtBQUssR0FBR3BHLGNBQWMsZ0JBQ3BELElBQUssTUFBT3JkLEtBQU1GLFNBQVVnOEIsU0FDYixTQUFUOTdCLE9BQ0Z1WixRQUFRcXRELFFBQVU5bUUsTUFFdEIsVUFHRWtILEtBQUsyekMsV0FBV0MsWUFBWSxnQkFBaUJyaEMsUUFDckQsQ0FFQSxvQkFBTXlyRCxDQUFnQi8rRCxPQUNwQkEsTUFBTUUsaUJBQ04sTUFBTUcsR0FBSzR1QixFQUFFanZCLE1BQU1JLGVBQWUrK0QsUUFBUSxTQUNwQ3oxRCxLQUFPakcsS0FBSzlGLE1BQU1nVSxNQUFNaFIsSUFBSU4sR0FBRzBJLEtBQUssWUFDcENqQyxlQUFpQjRDLEtBQUtpSCxZQUFZLENBQUUwd0QsUUFBUzU5RCxLQUFLOUYsTUFBTSsrQixVQUc5RCxHQUFJcjhCLEdBQUdpaEUsU0FBUyxZQUFhLENBQzNCLE1BQU1DLFFBQVVsaEUsR0FBRzRkLFNBQVMsaUJBQzVCc2pELFFBQVFqQyxRQUFRLEtBQUssSUFBTWlDLFFBQVFoN0MsVUFDckMsS0FBTyxDQUNMLE1BQU1pN0MsSUFBTXZ5QyxFQUFFLG9DQUVSbGUsT0FBU2tlLEVBQUUsbUNBQ2pCLElBQUssTUFBTTdkLEtBQUt0SyxTQUFTaUssT0FDdkJBLE9BQU9vakMsT0FDTCxvREFBb0QvaUMsRUFBRXJYLDBDQUEwQ3FYLEVBQUV2WCxzQkFRdEcsR0FMQTJuRSxJQUFJcnRCLE9BQU9wakMsUUFFWHl3RCxJQUFJcnRCLE9BQ0ZsbEIsRUFBRSxpQ0FBaUNub0IsU0FBU2dLLFlBQVlqWCxnQkFFdEQ2UCxLQUFLbEssT0FBTzhLLFlBQVlyTyxLQUFNLENBQ2hDLE1BQU13bEUsV0FBYXh5QyxFQUNqQiw2QkFBNkJub0IsU0FBU2dLLFlBQVluVyxpQkFFcEQ2bUUsSUFBSXJ0QixPQUFPc3RCLFdBQ2IsQ0FFQSxNQUFNdndELE1BQVErZCxFQUFFLHVDQUNoQixJQUFLLE1BQU03ZCxLQUFLdEssU0FBU3dELFdBQ3ZCNEcsTUFBTWlqQyxPQUNKLGtDQUFrQ3B6QyxLQUFLQyxLQUFLQyxTQUFTbVEsWUFHekRvd0QsSUFBSXJ0QixPQUFPampDLE9BRVg3USxHQUFHOHpDLE9BQU9xdEIsSUFBSUUsUUFDZEYsSUFBSUcsVUFBVSxJQUNoQixDQUNBdGhFLEdBQUdvakMsWUFBWSxXQUVqQixDQUVBLGtCQUFBODRCLENBQW9CdjhELE9BQ2xCQSxNQUFNRSxpQkFDTit1QixFQUFFanZCLE1BQU1JLGVBQWVvMkQsU0FBUyxNQUFNb3lDLFlBQVksSUFDcEQsRUNqUkssTUFBTUMscUNBQXFDOXJGLGdCQUNoRCx5QkFBV0MsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckQ5SyxNQUFPblIsS0FBS0MsS0FBS0MsU0FBUyx3QkFDMUJrYyxTQUFVLDhEQUNWRCxRQUFTLENBQUMsT0FBUSxTQUFVLDhCQUM1QjAzQyxVQUFVLEVBQ1Y4TyxXQUFXLEVBQ1hoUCxnQkFBZ0IsRUFDaEJ0M0MsZUFBZSxFQUNmQyxNQUFPLElBQ1BDLE9BQVEsUUFFWixDQUVBLGlCQUFBQyxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUVJLElBQUltZ0UsU0FBUyxDQUN2QzNwRCxhQUFjLGtCQUNkODBFLFlBQWEsQ0FBRWpyQixLQUFNOThFLEtBQUtzRyxLQUFLMkUsTUFDL0I0eEUsVUFBVyxDQUFFQyxLQUFNcDZFLEtBQUtzbEcsbUJBQW1CcHNHLEtBQUs4RyxTQUU5QjlHLEtBQUs2Z0IsS0FBSyxJQUVBLElBQUltZ0UsU0FBUyxDQUN6QzVwRCxhQUFjLGVBQ2QrMEUsWUFBYSxDQUNYRSxVQUFXam9HLEtBQUtzRyxLQUFLMkUsTUFFdkI0eEUsVUFBVyxDQUNUb3JCLFVBQVd2bEcsS0FBS3dsRywwQkFBMEJ0c0csS0FBSzhHLFNBRzdCOUcsS0FBSzZnQixLQUFLLElBRWhDQSxLQUFLcmEsS0FBSyxzQkFBc0IreEIsT0FBTW52QixVQUNwQ3RDLEtBQUtzUixPQUFTLENBQUMsRUFDZnRSLEtBQUsyckMsT0FBUyxXQUNSM3JDLEtBQUtoQyxRQUFPLEVBQUksSUFHeEIrYixLQUFLcmEsS0FBSyxlQUFlK3hCLE9BQU1udkIsVUFDN0J0QyxLQUFLc1IsT0FBTzI5RSxRQUFVanZGLEtBQUtzUixPQUFPMjlFLGFBQzVCanZGLEtBQUtoQyxRQUFPLEVBQUksSUFHeEIrYixLQUFLcmEsS0FBSyxpQkFBaUIreEIsTUFBTXp4QixLQUFLeWxHLFVBQVV2c0csS0FBSzhHLE1BR3ZELENBRUEsK0JBQU13bEcsQ0FBMkJqcEcsT0FDL0IsTUFBTStJLEtBQU8sQ0FDWGpILEtBQU0sV0FDTm9vRixNQUFPem1GLEtBQUt5bUYsTUFDWkMsU0FBVSxtQkFFWm5xRixNQUFNd3hCLGFBQWFDLFFBQVEsYUFBY3JmLEtBQUtDLFVBQVV0SixNQUMxRCxDQUVBLGFBQU1zckIsR0FDSixJQUFLNXdCLEtBQUtzUixPQUFPZzFELFdBQVksQ0FDM0IsTUFBTXY1QyxLQUFPNEMsU0FBU0MsOEJBQThCbHdCLE1BQ2xEbXdCLEdBQWUsUUFBVkEsRUFBRWgwQixNQUVUbUUsS0FBS3NSLE9BQU9nMUQsV0FBYXY1QyxLQUFLMXZCLEtBSWhDLENBQ0EsSUFBSzJDLEtBQUtzUixPQUFPKzlFLFdBQVksQ0FDM0IsTUFBTUEsV0FBYTEvRCxTQUFTQyw4QkFBOEJsd0IsTUFDeERtd0IsR0FBZSxRQUFWQSxFQUFFaDBCLE1BRVRtRSxLQUFLc1IsT0FBTys5RSxXQUFhLENBQ3ZCLzRGLEtBQU0rNEYsV0FBV2h5RixNQU9yQixDQUVBMkMsS0FBSzBsRyxzQkFPTCxNQUFNcGdHLFdBQWFqSixNQUFNdTBCLFVBR3pCLEdBREF0ckIsS0FBSzRzRixZQUFjLElBQUk1RSxhQUFhdHRGLEtBQUtzUixRQUNyQ2hNLEtBQUtnTSxPQUFPKzlFLFdBQVcvNEYsTUFBUTBKLEtBQUs5RixNQUFPLENBQzdDLE1BQU1tMUYsV0FBYXJ2RixLQUFLOUYsTUFBTXdGLEtBQUs0RixLQUFLZ00sT0FBTys5RSxXQUFXLzRGLE1BQ3REKzRGLFlBQ0YvcEYsS0FBS2dNLE9BQU8rOUUsV0FBV2p1QyxNQUFRaXVDLFdBQVdqNUYsTUFBTUEsTUFDaERrUCxLQUFLcWdHLG9CQUFxQixHQUUxQnJnRyxLQUFLNHNGLFlBQVk3QyxXQUFXanVDLFFBQzNCcGhELEtBQUtzUixPQUFPKzlFLFlBQVlqdUMsUUFFekI5N0MsS0FBS2dNLE9BQU8rOUUsV0FBV2p1QyxNQUFROTdDLEtBQUs0c0YsWUFBWTdDLFdBQVdqdUMsTUFFL0QsQ0FFQSxHQUFJOTdDLEtBQUtnTSxPQUFPZzFELFlBQWN0bUUsS0FBSzlGLE1BQU8sQ0FDeEMsTUFBTW9zRSxXQUFhdG1FLEtBQUs5RixNQUFNd0YsS0FBSzRGLEtBQUtnTSxPQUFPZzFELFlBQzNDQSxZQUNGaGhFLEtBQUtnTSxPQUFPM2EsSUFBTTJ2RSxXQUFXbHdFLE1BQU1BLE1BQ25Da1AsS0FBS3NnRyxjQUFlLEdBQ2Z0Z0csS0FBS2dNLE9BQU8zYSxJQUFNMk8sS0FBSzRzRixZQUFZNXJCLFVBQzVDLENBNEJBLE9BMUJBaGhFLEtBQUtwTCxNQUFROEYsS0FBSzlGLE1BQ2xCb0wsS0FBSzZzRixNQUFRbnlGLEtBQUtteUYsTUFDbEI3c0YsS0FBS0EsS0FBT3RGLEtBQUtzRixLQUVqQkEsS0FBS3VnRyxZQUFjLENBQUMsRUFDaEI3bEcsS0FBS215RixRQUNQN3NGLEtBQUt3Z0csNkJBQ0g5bEcsS0FBS215RixNQUFNMlAsa0NBR1g5aEcsS0FBSzlGLFFBQ1BvTCxLQUFLd2dHLDZCQUErQixHQUNwQ24yRSxTQUFTQyw4QkFBOEJqWSxTQUFRa1ksR0FDN0N2cUIsS0FBS3dnRyw2QkFBNkIxdUcsS0FBSyxHQUFHeTRCLEVBQUV4eUIsV0FFOUNpSSxLQUFLd2dHLDZCQUE2QjF1RyxLQUNoQyxHQUFHa0csS0FBS0MsS0FBS0MsU0FBUyxnQkFFeEI4SCxLQUFLd2dHLDZCQUE2QjF1RyxLQUNoQyxHQUFHa0csS0FBS0MsS0FBS0MsU0FBUyxlQUV4QndDLEtBQUs5RixNQUFNeXBCLE9BQU9oTSxTQUFReGhCLEdBQ3hCbVAsS0FBS3dnRyw2QkFBNkIxdUcsS0FBS2pCLEVBQUVHLFNBSXRDZ1AsSUFDVCxDQUVBLFNBQUk2c0YsR0FJRixPQUhLbnlGLEtBQUt5MUYsU0FDUnoxRixLQUFLeTFGLE9BQVM3dEYsY0FBY21KLFVBQVUvUSxLQUFLc1IsT0FBT2trRixZQUU3Q3gxRixLQUFLeTFGLE1BQ2QsQ0FFQSxTQUFJdjdGLEdBQ0YsT0FBSzhGLEtBQUtzUixPQUFPNCtDLFNBQ1psd0QsS0FBSzJyQyxTQUNSM3JDLEtBQUsyckMsT0FBUy9qQyxjQUFjZ0osZ0JBQWdCNVEsS0FBS3NSLE9BQU80K0MsVUFFbkRsd0QsS0FBSzJyQyxRQUpxQixJQUtuQyxDQUVBLG1CQUFNeFosQ0FBZTUxQixNQUFPNjFCLFVBQzFCeHpCLFFBQVFDLE1BQU0yYSxZQUFZeFosS0FBTW95QixnQkFDMUJweUIsS0FBS2hDLFFBQU8sRUFDcEIsQ0FFQSx3QkFBTXNuRyxDQUFvQi9vRyxPQUN4QixNQUFNd3BHLFdBQWF4cEcsTUFBTXd4QixhQUFhNkMsUUFBUSxjQUN4Q3EvQixTQUFXdGhELEtBQUt1ZCxNQUFNNjVFLFlBRXRCNzFDLFFBQVV0b0QsY0FBY29vRCw2QkFBNkJDLFVBRTNEandELEtBQUtzUixPQUFPNCtDLFFBQVVBLFFBR3RCbHdELEtBQUtzUixPQUFPMjlFLE9BQTZELElBQXBEanZGLEtBQUs5RixPQUFPaTFCLFFBQVE1NEIsUUFBT2d0QixJQUFNQSxFQUFFaGIsT0FBTTNILE9BQzFEWixLQUFLc1IsT0FBTys5RSxXQUFXQyx1QkFDbEJ0dkYsS0FBS3NSLE9BQU8rOUUsV0FBV0MscUJBRzFCdHZGLEtBQUtoQyxRQUFPLEVBQ3BCLENBRUEscUJBQU1nb0csQ0FBaUJyNUYsUUFDQyxJQUFsQkEsT0FBTy9MLFFBQ1RaLEtBQUtzUixPQUFPNCtDLFFBQVV2akQsT0FBTyxHQUFHa0MsVUFBVWxSLEtBRTFDcUMsS0FBS3NSLE9BQU8yOUUsT0FBNkQsSUFBcERqdkYsS0FBSzlGLE9BQU9pMUIsUUFBUTU0QixRQUFPZ3RCLElBQU1BLEVBQUVoYixPQUFNM0gsT0FDMURaLEtBQUtzUixPQUFPKzlFLFdBQVdDLHVCQUNsQnR2RixLQUFLc1IsT0FBTys5RSxXQUFXQyxxQkFFMUJ0dkYsS0FBS2hDLFFBQU8sSUFFbEIrSyxHQUFHQyxjQUFjc0ssS0FBS2hXLEtBQUtDLEtBQUtDLFNBQVMsNEJBRTdDLENBRUEsZUFBTWlvRyxDQUFXbHBHLE9BQ2ZBLE1BQU1FLGlCQUdOLE9BRGVGLE1BQU1JLGNBQWNJLFFBQVFJLFFBRXpDLElBQUssZUFDSDZDLEtBQUtpYixRQUNMLE1BQ0YsSUFBSyxZQUNILENBQ0UsTUFBTWkzRSxZQUFjLElBQUk1RSxhQUFhdHRGLEtBQUtzUixRQUUxQyxHQUFJdFIsS0FBS215RixNQUFNbE8sUUFBUyxDQUN0QixLQUNJaU8sWUFBWWhDLGdCQUFrQmdDLFlBQVloQyxlQUFpQixHQUs3RCxZQUhBbm5GLEdBQUdDLGNBQWNzSyxLQUNmaFcsS0FBS0MsS0FBS0MsU0FBUyx3Q0FJdkIsR0FBSXdDLEtBQUtzRixLQUFLMmdHLHVCQUF3QixDQUNwQyxNQUFNblcsUUFBVTl2RixLQUFLbXlGLE1BQU02SCxtQkFDdkJsK0YsTUFBTW8yRixZQUFZM0MsZUFDcEIyQyxZQUFZMW1ELElBQU1za0QsUUFBUVAsYUFLNUJ2dkYsS0FBS3NGLEtBQUs0Z0cscUJBQXNCLENBQ2xDLENBQ0YsT0FFTWxtRyxLQUFLbXlGLE1BQU1zTixlQUFldk4sWUFBYSxDQUMzQ3FELGFBQWN2MUYsS0FBS3NSLE9BQU9pa0YsYUFDMUJvSywyQkFBNEIzL0YsS0FBS3NGLEtBQUs0Z0csb0JBQ3RDaG9HLE9BQVE4QixLQUFLc1IsT0FBT3BULFNBRXRCOEIsS0FBS2liLE9BQ1AsQ0FDQSxNQUVGLElBQUssbUJBQ0gsQ0FDRSxNQUFNaTNFLFlBQWMsSUFBSTVFLGFBQWF0dEYsS0FBS3NSLFFBQzFDLEdBQUk0Z0YsWUFBWTdDLFdBQVcyQixPQUFRLENBQ2pDLE1BQU03dkYsS0FBTyxJQUFJMlMsVUFDakJvK0UsWUFBWTVzRixLQUFLdXZCLFFBQVMsRUFDMUIxekIsS0FBS2pILE1BQVFnNEYsWUFBWWg0RixNQUFNaVgsU0FDM0IrZ0YsWUFBWTdDLFdBQVc0Qix3QkFDbkI5dkYsS0FBS205QixtQkFBbUI0ekQsWUFBWTdDLFdBQVcwQixJQUFJbDFGLEtBQ3pEcTJGLFlBQVk1c0YsS0FBSytwRixXQUFXQyxlQUFpQm51RixLQUFLd25ELGdCQUN6Q3VwQyxZQUFZN0MsV0FBV3BuQyxTQUNoQzltRCxLQUFLOEcsTUFBUWlxRixZQUFZN0MsV0FBVzBCLFVBQzlCNXZGLEtBQUtBLE9BQ1grd0YsWUFBWTVzRixLQUFLK3BGLFdBQVdDLGVBQWlCbnVGLEtBQUt3bkQsZ0JBQ3pDdXBDLFlBQVk3QyxXQUFXbG5DLG9CQUMxQmhuRCxLQUFLazlCLGNBQWM2ekQsWUFBWTdDLFdBQVcwQixJQUFJbDFGLEtBQ3BEcTJGLFlBQVk1c0YsS0FBSytwRixXQUFXQyxlQUFpQm51RixLQUFLd25ELGVBRXRELE1BQU8sR0FBSXVwQyxZQUFZN0MsV0FBV2p1QyxNQUFPLENBQ3ZDLE1BQU1wakMsU0FBVyxDQUNmekgsU0FBVTI3RSxZQUFZN0MsV0FBV2p1QyxNQUNqQ3p6QixZQUFhdWtFLFlBQVk3QyxXQUFXLzRGLEtBQ3BDb3lDLFVBQVd3cEQsWUFBWTU3RixLQUFPNDdGLFlBQVk1N0YsVUFBT3VILEdBRS9DcTBGLFlBQVl4RSxXQUNkMXZFLFNBQVM5akIsTUFBUWc0RixZQUFZaDRGLE1BQU1pWCxVQUVyQyxNQUFNaFEsS0FBTzJTLFVBQVVyRCxPQUFPdU4sZ0JBQ3hCN2MsS0FBS0EsT0FDWCt3RixZQUFZNXNGLEtBQUsrcEYsV0FBV0MsZUFBaUJudUYsS0FBS3duRCxlQUNsRHVwQyxZQUFZNXNGLEtBQUt1dkIsUUFBUyxDQUM1QixDQUVBajJCLFFBQVFDLE1BQU0yYSxZQUFZeFosS0FBS3NSLE9BQVE0Z0YsWUFBWTVzRixNQUNuRHRGLEtBQUtoQyxRQUFPLEVBQ2QsRUFPTixDQUVBLG1CQUFBMG5HLEdBQ0UsTUFBTXhULFlBQWMsSUFBSTVFLGFBQWF0dEYsS0FBS3NSLFFBUTFDLEdBUEt0UixLQUFLc0YsT0FBTXRGLEtBQUtzRixLQUFPLENBQUMsR0FDN0J0RixLQUFLc1IsT0FBT3MrRSxVQUFXLEVBQ3ZCNXZGLEtBQUtzUixPQUFPczZDLFNBQVUsRUFDdEI1ckQsS0FBS3NGLEtBQUs0Z0cscUJBQXNCLEVBQ2hDbG1HLEtBQUtzRixLQUFLNmdHLHFCQUFzQixFQUNoQ25tRyxLQUFLc0YsS0FBSzhnRyxvQkFBc0IsR0FFM0JwbUcsS0FBS3NGLEtBQUsyZ0csdUJBQXdCLENBQ3JDLE1BQU1yTSxZQUFjNTVGLEtBQUtteUYsTUFBTXlILFlBQ3pCQyxjQUFnQjc1RixLQUFLbXlGLE1BQU0wSCxjQUMzQi9KLFFBQVU5dkYsS0FBS215RixNQUFNNkgsbUJBRXZCOUgsWUFBWTNDLFlBQWNPLFNBQVNQLGFBQ3JDdnZGLEtBQUtzRixLQUFLNGdHLHFCQUFzQixFQUNoQ2hVLFlBQVloQyxlQUFpQixJQUU3Qmx3RixLQUFLc0YsS0FBSzRnRyxxQkFBc0IsRUFDaENoVSxZQUFZbEMseUJBQXlCRixTQUFTUCxjQUU1QzJDLFlBQVlsRCxVQUVaNEssY0FDQzU1RixLQUFLbXlGLE1BQU1wMkYsT0FBT3NxRyxvQkFDbkJuVSxZQUFZM0MsWUFBY3FLLFlBQVlySyxjQUV0Q3Z2RixLQUFLc1IsT0FBT3MrRSxVQUFXLEVBQ3ZCNXZGLEtBQUtzRixLQUFLNmdHLHFCQUFzQixFQUNoQ25tRyxLQUFLc0YsS0FBS2doRyxnQkFBa0JocEcsS0FBS0MsS0FBS0MsU0FBUyxnQkFDL0N3QyxLQUFLc0YsS0FBSzRnRyxxQkFBc0IsR0FJaENoVSxZQUFZaEQsUUFFWjJLLGdCQUNDNzVGLEtBQUtteUYsTUFBTXAyRixPQUFPZytGLGdCQUNuQjdILFlBQVkzQyxZQUFjc0ssY0FBY3RLLGNBRXhDdnZGLEtBQUtzUixPQUFPczZDLFNBQVUsRUFDdEI1ckQsS0FBS3NGLEtBQUs2Z0cscUJBQXNCLEVBQ2hDbm1HLEtBQUtzRixLQUFLZ2hHLGdCQUFrQmhwRyxLQUFLQyxLQUFLQyxTQUFTLGdCQUMvQ3dDLEtBQUtzRixLQUFLNGdHLHFCQUFzQixFQUd0QyxDQUNGLENBRUEsbUJBQWF6MUYsQ0FBUW5MLE1BQ25CLEdBQUlBLEtBQUsycUQsU0FBVSxDQUNqQixNQUFNQyxRQUFVdG9ELGNBQWNvb0QsNkJBQTZCMXFELEtBQUsycUQsVUFDNURDLFVBQVM1cUQsS0FBSzRxRCxRQUFVQSxnQkFDckI1cUQsS0FBSzJxRCxRQUNkLENBQ0EsT0FBTyxJQUFJbTFDLDZCQUE2QjkvRixNQUFNdEgsUUFBTyxFQUN2RCxFQ2hWSyxNQUFNdW9HLHVCQUF1QnpzQixVQUtsQyx5QkFBV3ZnRSxHQWdCVCxPQWZnQjNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQzlERSxRQUFTLENBQUMsT0FBUSxVQUFXLE9BQVEsU0FDckNDLFNBQVUsMENBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxJQUNSb21ELFdBQVcsRUFDWHp2QyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxhQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsa0JBU2pCLENBSUEsZUFBV3R5QixHQUNULE1BQU8sZ0JBQ1QsQ0FFQSxpQkFBQXMzRCxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsQ0FFQSxhQUFNemlDLENBQVN0eEIsUUFBVSxDQUFDLEdBQ3hCLE1BQU11eEIsVUFBWXgwQixNQUFNdTBCLFFBQVF0eEIsU0E0RGhDLE9BMURBdXhCLFVBQVU2bkUsYUFBZTE0RixLQUFLaUcsS0FBSzh5RixtQkFDbkNsb0UsVUFBVXVvRSx5QkFBMkJwNUYsS0FBS2lHLEtBQUttekYseUJBQy9Ddm9FLFVBQVUrbkUsTUFBUTU0RixLQUFLaUcsS0FBSzJ5RixNQUM1Qi9uRSxVQUFVZ29FLFFBQVU3NEYsS0FBS2lHLEtBQUs0eUYsUUFFOUJob0UsVUFBVXlzRSxZQUFjenNFLFVBQVUrbkUsTUFBTWg0RixPQUFTaXdCLFVBQVUrbkUsTUFBTTVzRixRQUFPLENBQUNvMUYsS0FBTXB2RCxVQUFZb3ZELEtBQUs3UixZQUFjdjlDLFFBQVF1OUMsWUFBYzZSLEtBQU9wdkQsVUFBU3U5QyxhQUFlLEVBRW5LMStELFVBQVUwc0UsWUFBYzFzRSxVQUFVK25FLE1BQU1oNEYsT0FBU2l3QixVQUFVK25FLE1BQU01c0YsUUFBTyxDQUFDbzFGLEtBQU1wdkQsVUFBWW92RCxLQUFLN1IsWUFBY3Y5QyxRQUFRdTlDLFlBQWM2UixLQUFPcHZELFVBQVN1OUMsYUFBZSxFQUVuSzErRCxVQUFVcXNFLGNBQWdCcnNFLFVBQVVnb0UsUUFBUWo0RixPQUFTaXdCLFVBQVVnb0UsUUFBUTdzRixRQUFPLENBQUNvMUYsS0FBTXB2RCxVQUFZb3ZELEtBQUs3UixZQUFjdjlDLFFBQVF1OUMsWUFBYzZSLEtBQU9wdkQsVUFBU3U5QyxhQUFlLEVBRXpLMStELFVBQVV1c0UsY0FBZ0J2c0UsVUFBVWdvRSxRQUFRajRGLE9BQVNpd0IsVUFBVWdvRSxRQUFRN3NGLFFBQU8sQ0FBQ28xRixLQUFNcHZELFVBQVlvdkQsS0FBSzdSLFlBQWN2OUMsUUFBUXU5QyxZQUFjNlIsS0FBT3B2RCxVQUFTdTlDLGFBQWUsRUFFeksxK0QsVUFBVWdvRSxRQUFRbGhGLFNBQVFoSyxJQUNwQkEsRUFBRTRoRixZQUFjMStELFVBQVV5c0UsWUFDNUIzdkYsRUFBRWdpRixVQUVGaGlGLEVBQUVraUYsaUJBRUpsaUYsRUFBRW9pRixRQUFVcGlGLEVBQUU0aEYsY0FBZ0IxK0QsVUFBVXVzRSxjQUN4Q3p2RixFQUFFbWlGLFFBQVVuaUYsRUFBRTRoRixjQUFnQjErRCxVQUFVcXNFLGlCQUcxQ3JzRSxVQUFVK25FLE1BQU1qaEYsU0FBUWhLLElBQ2xCQSxFQUFFNGhGLFlBQWMxK0QsVUFBVXVzRSxjQUM1Qnp2RixFQUFFaStDLFVBRUZqK0MsRUFBRWtpRixpQkFFSmxpRixFQUFFb2lGLFFBQVVwaUYsRUFBRTRoRixjQUFnQjErRCxVQUFVMHNFLFlBQ3hDNXZGLEVBQUVtaUYsUUFBVW5pRixFQUFFNGhGLGNBQWdCMStELFVBQVV5c0UsZUFHMUN6c0UsVUFBVTJvRSxVQUFZeDVGLEtBQUtpRyxLQUFLdXpGLFVBQ2hDM29FLFVBQVV3b0UsZ0JBQWtCcjVGLEtBQUtxNUYsZ0JBQ2pDeG9FLFVBQVUycUUsZUFBaUJ4N0YsS0FBS2lHLEtBQUt1MUYsZUFDakMzcUUsVUFBVTJxRSxpQkFDWjNxRSxVQUFVMnFFLGVBQWUvc0YsTUFBUW9pQixVQUFVMnFFLGVBQWVxRCxZQUN0RHZoRyxLQUFLQyxLQUFLeVcsT0FBTywwQkFBMkIsQ0FDNUNwSSxFQUFHaWxCLFVBQVUycUUsZUFBZXFELFlBQVlqekYsRUFDeEN3L0MsRUFBR3Y2QixVQUFVMnFFLGVBQWVxRCxZQUFZenpDLElBRXhDOXRELEtBQUtDLEtBQUtDLFNBQVMsc0JBRXpCcXpCLFVBQVUydEUsaUJBQW1CeCtGLEtBQUtpRyxLQUFLdTRGLGlCQUN2QzN0RSxVQUFVNnRFLGFBQWUxK0YsS0FBS2lHLEtBQUt5NEYsYUFDbkM3dEUsVUFBVW96RCxRQUFVamtGLEtBQUtpRyxLQUFLZytFLFFBRTlCcHpELFVBQVVnRyxTQUFXdjVCLEtBQUtzRyxLQUFLMkUsS0FFL0Jzb0IsVUFBVTh1QyxnQ0FBa0NweUQsV0FBV0MsV0FDckRxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVl1eUQsT0FDbEMsQ0FDRXQ5RCxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSWhCdGdDLFNBQ1QsQ0FlQSxpQkFBQS9XLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BS3hCQSxLQUNHcmEsS0FBSyxxQkFDTHNhLEdBQUcsU0FBU3pkLE9BQVN5RCxLQUFLNnNDLDJCQUEyQnR3QyxTQUV4RHdkLEtBQUtyYSxLQUFLLFlBQVkreEIsT0FBTWwxQixRQUMxQkEsTUFBTUUsaUJBQ05GLE1BQU11L0Qsa0JBQ1N2L0QsTUFBTUksY0FDR0UsUUFBUSxhQUNDOFcsY0FBYyxxQkFDL0I1RSxVQUFVMEwsT0FBTyxPQUFNLElBRXpDVixLQUNHcmEsS0FBSyxhQUNMOHRDLFlBQVdqeEMsT0FDVkEsTUFBTUksY0FDSGdYLGNBQWMscUJBQ2Q1RSxVQUFVK1QsT0FBTyxVQUd4Qi9JLEtBQUtDLEdBQUcsV0FBWSxjQUFldXJCLFNBQVN5SCxhQUFhOXpDLEtBQUs4RyxPQUU5RCtaLEtBQ0dyYSxLQUFLLGlCQUNMczBELFlBQVloMEQsS0FBSzgrRiwrQkFBK0I1bEcsS0FBSzhHLE9BRXhEK1osS0FDR3JhLEtBQUssZ0JBQ0xzYSxHQUFHLGFBQWF6ZCxPQUFTeUQsS0FBS3dtRyx3QkFBd0JqcUcsU0FDekR3ZCxLQUNHcmEsS0FBSyxnQkFDTHNhLEdBQUcsWUFBWXpkLE9BQVN5RCxLQUFLd21HLHdCQUF3QmpxRyxTQUN4RHdkLEtBQ0dyYSxLQUFLLGdCQUNMc2EsR0FBRyxhQUFhemQsT0FBU3lELEtBQUt5bUcsd0JBQXdCbHFHLFNBQ3pEd2QsS0FDR3JhLEtBQUssZ0JBQ0xzYSxHQUFHLFFBQVF6ZCxPQUFTeUQsS0FBS3ltRyx3QkFBd0JscUcsU0FFcER3ZCxLQUFLcmEsS0FBSyxXQUFXK3hCLE1BQU16eEIsS0FBSzBtRyxjQUFjeHRHLEtBQUs4RyxPQUNuRCtaLEtBQUtyYSxLQUFLLHVCQUF1Qit4QixNQUFNenhCLEtBQUsybUcscUJBQXFCenRHLEtBQUs4RyxPQUN0RStaLEtBQUtyYSxLQUFLLGVBQWUreEIsTUFBTXp4QixLQUFLNG1HLGFBQWExdEcsS0FBSzhHLE9BQ3REK1osS0FBS3JhLEtBQUssa0JBQWtCK3hCLE1BQU16eEIsS0FBSzZtRyxnQkFBZ0IzdEcsS0FBSzhHLE9BRTVEK1osS0FDR3JhLEtBQUssb0JBQ0xzYSxHQUFHLGFBQWF6ZCxPQUFTeUQsS0FBS3dtRyx3QkFBd0JqcUcsU0FDekR3ZCxLQUNHcmEsS0FBSyxvQkFDTHNhLEdBQUcsWUFBWXpkLE9BQVN5RCxLQUFLd21HLHdCQUF3QmpxRyxTQUN4RHdkLEtBQ0dyYSxLQUFLLG9CQUNMc2EsR0FBRyxhQUFhemQsT0FBU3lELEtBQUt5bUcsd0JBQXdCbHFHLFNBQ3pEd2QsS0FDR3JhLEtBQUssb0JBQ0xzYSxHQUFHLFFBQVF6ZCxPQUFTeUQsS0FBS3ltRyx3QkFBd0JscUcsU0FFcER3ZCxLQUFLcmEsS0FBSyxhQUFhK3hCLE1BQU16eEIsS0FBSzhtRyxrQkFBa0I1dEcsS0FBSzhHLE9BRXpEK1osS0FBS3JhLEtBQUsscUJBQXFCK3hCLE1BQU16eEIsS0FBSyttRyxtQkFBbUI3dEcsS0FBSzhHLE9BRWxFK1osS0FBS3JhLEtBQUssV0FBVyt4QixNQUFNenhCLEtBQUt3Z0UsZUFBZXRuRSxLQUFLOEcsT0FFcEQrWixLQUFLcmEsS0FBSyxtQkFBbUIreEIsTUFBTXp4QixLQUFLZ25HLGlCQUFpQjl0RyxLQUFLOEcsT0FFOUQrWixLQUFLcmEsS0FBSyxrQkFBa0IreEIsTUFBTXp4QixLQUFLaW5HLHFCQUFxQi90RyxLQUFLOEcsT0FFakUrWixLQUFLcmEsS0FBSyxXQUFXK3hCLE1BQU16eEIsS0FBS3FpQixVQUFVbnBCLEtBQUs4RyxPQUMvQytaLEtBQ0dyYSxLQUFLLHdCQUNMK3hCLE1BQU16eEIsS0FBS2tuRyw2QkFBNkJodUcsS0FBSzhHLE9BRWhEK1osS0FBS3JhLEtBQUssa0JBQWtCK3hCLE1BQU16eEIsS0FBS21uRyx1QkFBdUJqdUcsS0FBSzhHLE9BRW5FK1osS0FDR3JhLEtBQUsscUJBQ0wreEIsTUFBTXp4QixLQUFLb25HLHdCQUF3Qmx1RyxLQUFLOEcsT0FZUCxJQUFJazZFLFNBQVMsQ0FDL0M1cEQsYUFBYyxnQkFDZCswRSxZQUFhLENBQ1hFLFVBQVd2bEcsS0FBS3FuRyx5QkFBeUJudUcsS0FBSzhHLE9BRWhEbTZFLFVBQVcsQ0FDVG9yQixVQUFXdmxHLEtBQUtzbkcsd0JBQXdCcHVHLEtBQUs4RyxTQUdyQjlHLEtBQUs2Z0IsS0FBSyxJQUVWLElBQUltZ0UsU0FBUyxDQUN2QzNwRCxhQUFjLGVBQ2Q0cEQsVUFBVyxDQUFFQyxLQUFNcDZFLEtBQUtzbEcsbUJBQW1CcHNHLEtBQUs4RyxTQUU5QjlHLEtBQUs2Z0IsS0FBSyxJQVE5QixHQU4rQixJQUFJbWdFLFNBQVMsQ0FDMUMzcEQsYUFBYyxtQkFDZDRwRCxVQUFXLENBQUVDLEtBQU1wNkUsS0FBSzhtRyxrQkFBa0I1dEcsS0FBSzhHLFNBRTFCOUcsS0FBSzZnQixLQUFLLElBRTdCL1osS0FBS2lHLEtBQUtnK0UsUUFBUyxDQUNyQmxxRSxLQUNHcmEsS0FBSyxzQ0FDTCt4QixNQUFNenhCLEtBQUt1bkcseUJBQXlCcnVHLEtBQUs4RyxPQUVWLElBQUlrNkUsU0FBUyxDQUM3QzVwRCxhQUFjLHFCQUNkQyxhQUFjLGtCQUNkODBFLFlBQWEsQ0FDWEUsVUFBV3ZsRyxLQUFLd25HLDhCQUE4QnR1RyxLQUFLOEcsTUFDbkRvNkUsS0FBTXA2RSxLQUFLeW5HLDZCQUE2QnZ1RyxLQUFLOEcsT0FFL0NtNkUsVUFBVyxDQUNUb3JCLFVBQVd2bEcsS0FBSzBuRyw2QkFBNkJ4dUcsS0FBSzhHLE1BQ2xEbzZFLEtBQU1wNkUsS0FBSzJuRyw0QkFBNEJ6dUcsS0FBSzhHLE1BQzVDNG5HLFNBQVU1bkcsS0FBSzZuRyxhQUFhM3VHLEtBQUs4RyxTQUdYOUcsS0FBSzZnQixLQUFLLElBRXBDQSxLQUNHcmEsS0FBSyxtQkFDTHNhLEdBQUcsYUFBYXpkLE9BQVN5RCxLQUFLOG5HLGFBQWF2ckcsUUFDaEQsQ0FDRixDQU9BLGNBQUF3ckcsQ0FBZ0IvMUUsV0FBYSxDQUFDLEdBRzVCLElBQUkxc0IsS0FETyxJQUFJd3pCLGlCQUFpQjk0QixLQUFLNjRCLEtBQU0sQ0FBRW12RSxRQUFTaG9HLEtBQUtnb0csVUFDN0MxMkYsT0FlZCxHQWJFaE0sS0FERTBzQixXQUNLcHpCLFFBQVFDLE1BQU0yYSxZQUFZbFUsS0FBTTBzQixZQUVoQ3B6QixRQUFRQyxNQUFNdWYsYUFBYTlZLE1BS2xDdEYsS0FBS2lHLEtBQUtsSyxPQUFPeTlGLFdBQVd4NEQsTUFBTXBnQyxRQUNsQzBFLEtBQUt2SixPQUFPOGdHLGNBQWdCNzhGLEtBQUtpRyxLQUFLbEssT0FBT3k5RixVQUFVeDRELEtBQUtwZ0MsU0FFNUQwRSxLQUFLdkosT0FBTzhnRyxjQUFnQjc4RixLQUFLaUcsS0FBS2xLLE9BQU95OUYsVUFBVXg0RCxLQUFLcGdDLFFBRzFEMEUsS0FBS3ZKLE9BQU8yOEYsYUFBYyxDQUM1QixNQUFNQSxhQUFlOTVGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPMjhGLGNBRTlELElBQUssTUFBT3pwRixFQUFHdFAsS0FBTUMsT0FBT3dLLFFBQVE5RSxLQUFLdkosT0FBTzI4RixjQUFlLENBQzdELE1BQU12N0UsTUFBUXU3RSxhQUFhdmhELFdBQVV4cEMsR0FBS0EsRUFBRWhRLE9BQVNzUixJQUNyRCxJQUFlLElBQVhrTyxNQUFjcFUsR0FBR0MsY0FBY3dVLE1BQU0sbUNBQ3BDLENBQ0gsTUFBTWt1RCxTQUFXZ3RCLGFBQWF2N0UsT0FDeEI4cUYsUUFBVUMsTUFBTXZvRyxHQUN0QmYsUUFBUUMsTUFBTTJhLFlBQVlreUQsU0FBVXU4QixTQUNwQ3ZQLGFBQWF2N0UsT0FBU3V1RCxRQUN4QixDQUNGLENBRUFwbUUsS0FBS3ZKLE9BQU8yOEYsYUFBZUEsWUFDN0IsQ0FFQSxHQUFJcHpGLEtBQUtrMEYsVUFBVyxDQUNsQixNQUFNQSxVQUFZNTZGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPeTlGLFVBQVV4NEQsTUFFckUsSUFBSyxNQUFPbmxDLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVE5RSxLQUFLazBGLFdBQVksQ0FDekQsTUFBTW9FLGNBQWdCcEUsVUFBVXJpRCxXQUFVNzhCLEdBQUtBLEVBQUUzYyxPQUFTOUIsTUFDMUQsSUFBdUIsSUFBbkIraEcsY0FDRjcwRixHQUFHQyxjQUFjd1UsTUFBTSxpQ0FDbEIsQ0FDTCxNQUFNMnFGLGlCQUFtQjNPLFVBQVVvRSxlQUM3QnFLLFFBQVVDLE1BQU05eEcsT0FDdEJ3SSxRQUFRQyxNQUFNMmEsWUFBWTJ1RixpQkFBa0JGLFNBQzVDek8sVUFBVW9FLGVBQWlCdUssZ0JBQzdCLENBQ0YsUUFFTzdpRyxLQUFLazBGLFVBQ1psMEYsS0FBS3ZKLE9BQU95OUYsVUFBWSxDQUFFeDRELEtBQU13NEQsVUFDbEMsQ0FLQSxPQUFPNTZGLFFBQVFDLE1BQU04eUQsY0FBY3JzRCxLQUNyQyxDQU9BLG1CQUFNNnNCLENBQWU1MUIsTUFBTzYxQixVQUMxQixNQUFNck4sT0FBU3hvQixNQUFNSSxjQUNmNEosU0FBeUMsU0FBOUJ3ZSxRQUFRaG9CLFNBQVN3SixTQUNsQyxHQUFJd2UsUUFBUXp1QixNQUFNME0sU0FBUyxPQUFRLENBQ2pDLE1BQU8sQ0FBRSxDQUFFckYsTUFBUW9uQixPQUFPenVCLEtBQUttVyxNQUFNLEtBQy9CeWxGLFlBQWNseUYsS0FBS2lHLEtBQUt5ekYsZUFBZS83RixNQUN6Q3UwRixhQUFlQSxZQUFZaDRGLFFBQ3hCNEIsTUFBTUksT0FBTzZvQixPQUFPM3VCLGVBQ2pCODdGLFlBQVloNEYsTUFBTW1xRCxNQUFNbm9ELE9BQU82b0IsT0FBTzN1QixRQUdsRCxDQUNBLEdBQUltUSxTQUFVLENBQ1osTUFBTyxDQUFFbEksS0FBTVYsS0FBTXlxRyxRQUFTOWlHLE1BQVF5ZixPQUFPenVCLEtBQUttVyxNQUFNLEtBQ2xEMFEsTUFBUW5kLEtBQUtxb0cscUJBQXFCMXFHLE1BQ3hDLEdBQ1csaUJBQVRVLE9BQ0N2QyxNQUFNcWhCLFFBQ0ssZ0JBQVppckYsU0FFYSxTQUFUOWlHLEtBQWlCLENBRW5CLE1BQU1vekYsYUFBZTE0RixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsYUFDbEM5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsY0FDekMsR0FPSixPQU5JQSxhQUFhdjdFLE9BQU9reUUsbUJBQ2ZxSixhQUFhdjdFLE9BQU9reUUsV0FBV3BoRixVQUMvQnlxRixhQUFhdjdFLE9BQU9reUUsV0FBV2h4RixNQUNqQ3E2RixhQUFhdjdFLE9BQU9reUUsV0FBYSxDQUFDLEVBQ3pDcUosYUFBYXY3RSxPQUFPa3lFLFdBQVcvNEYsS0FBT3l1QixPQUFPM3VCLGlCQUN2QzRKLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHNCQUF1Qnc2RixjQUVsRCxDQUVKLENBQ0FyOEYsTUFBTTgxQixjQUFjNTFCLE1BQU82MUIsU0FDN0IsQ0FFQSxzQkFBYWsyRSxDQUFXMXhHLElBQUttakIsS0FBTXpVLE1BQ2pDLElBQUtBLEtBQUs2ckQsU0FDUixPQUVGLE1BQU1vM0MsZUFBaUJ4dUYsS0FBSyxHQUFHaEwsVUFBVXdULFNBQVMsY0FDNUMwNkUsV0FBYWxqRixLQUFLLEdBQUdwRyxjQUFjLGdCQUN6QyxJQUFLc3BGLFdBQVksT0FFakIsSUFBSWdDLE1BQVEzNUYsS0FBS0EsS0FBS2tqRyxRQUFRdkwsV0FBV2orRSxLQUNyQ2crRSxJQUFNMTNGLEtBQUtBLEtBQUtrakcsUUFBUXZMLFdBQVc2RCxHQVF2QyxRQVBxQixJQUFWN0IsUUFDVEEsTUFBUSxRQUVTLElBQVJqQyxNQUNUQSxLQUFPLEdBR0x1TCxlQUFnQixDQUNsQixNQUFNbEgsVUFBWTcxRSxFQUFFLFNBQVMwbkMsSUFBSSxhQUMzQm91QyxRQUFVcGxHLE9BQU9tbEcsVUFBVTN4RixRQUFRLEtBQU0sS0FDL0MsR0FBSTlZLElBQUlxUCxLQUFLZytFLFFBQVMsQ0FDcEIsTUFBTXNkLE9BQVMzcUcsSUFBSXFQLEtBQUtrekYsb0JBQW9CdjRGLE9BQ3RDZ1osT0FBa0IsS0FBVDJuRixPQUFnQixHQUFLRCxRQUNwQzFxRyxJQUFJNnhHLFlBQVksU0FFaEI3eEcsSUFBSWc0RCxTQUFTaDFDLE1BQVF4WCxLQUFLYSxJQUFJMlcsTUFBTyxHQUFLMG5GLFFBRTVDLE1BQ0UxcUcsSUFBSWc0RCxTQUFTaDFDLE1BQVEsR0FBSzBuRixRQUU1QixhQUFhMXFHLElBQUlxUCxLQUFLd3hGLDRCQUE0QixDQUFFMTlFLE1BT3RELENBRUlrbEYsUUFBb0IsSUFBWEEsT0FDWGhDLFdBQVd5TCxTQUFTLENBQ2xCdjlDLElBQUssRUFDTDdQLEtBQU0yakQsTUFDTjBKLFNBQVUsYUFJRCxJQUFUM0wsS0FDRkMsV0FBV3lMLFNBQVMsQ0FDbEJ2OUMsSUFBSyxFQUNMN1AsS0FBTTBoRCxJQUNOMkwsU0FBVSxVQUtoQixDQUVBLGNBQU83dkYsQ0FBU2xpQixJQUFLbWpCLE1BQ25CbmpCLElBQUlxUCxLQUFLL0gsT0FBTyxDQUFFLDhCQUErQixHQUNuRCxDQWdDQSxvQkFBQW1xRyxDQUFzQjFxRyxNQUNwQixPQUFPcUMsS0FBS2lHLEtBQUtsSyxPQUFPMjhGLGFBQWF2aEQsV0FBVXhwQyxHQUFLQSxFQUFFaFEsT0FBU0EsTUFDakUsQ0FFQSxpQkFBQWlyRyxDQUFtQmpyRyxNQUNqQixPQUFPcUMsS0FBS2lHLEtBQUtsSyxPQUFPeTlGLFVBQVV4NEQsS0FBS21XLFdBQVV4cEMsR0FBS0EsRUFBRWhRLE9BQVNBLE1BQ25FLENBRUEsWUFBQWtyRyxDQUFjbHJHLE1BQ1osT0FBT3FDLEtBQUtpRyxLQUFLbEssT0FBT3k5RixVQUFVeDRELEtBQUt0aEMsTUFBS2lPLEdBQUtBLEVBQUVoUSxPQUFTQSxNQUM5RCxDQUVBLFNBQUF3NUMsQ0FBV25XLEtBQU1yakMsTUFDZixPQUFPcWpDLEtBQUttVyxXQUFVeHBDLEdBQUtBLEVBQUVoUSxPQUFTQSxNQUN4QyxDQUVBLGdDQUFNa3ZDLENBQTRCdHdDLE9BQ2hDQSxNQUFNRSxpQkFDTkYsTUFBTXUvRCxrQkFDTixNQUFNLzJDLE9BQVN4b0IsTUFBTUksY0FDckJvb0IsT0FBT2xvQixRQUFRLHNCQUFzQmtTLFVBQVUwTCxPQUFPLFFBQ3RELE1BQU0rL0UsY0FBZ0J6MUUsT0FBT2xvQixRQUFRLHNCQUFzQkUsU0FBU1ksS0FDOUQ4OEYsZ0JBQWtCMTFFLE9BQU9ob0IsUUFBUTA5RixzQkFDakN6NkYsS0FBS2lHLEtBQUtzMEYsa0JBQWtCQyxjQUFlQyxnQkFDbkQsQ0FFQSxlQUFNcDRFLENBQVc5bEIsT0FDZixNQUFNd29CLE9BQVN4b0IsTUFBTUksY0FLZjhkLE9BQVNzSyxPQUFPOG9CLGFBQWEsVUFDN0J2b0MsS0FBTzFHLFFBQVFDLE1BQU11ZixhQUFhLENBQ3RDLENBQUMzRCxTQUFVc0ssT0FBT2hXLFVBQVV3VCxTQUFTLGlCQUV2QyxHQUFJamQsS0FBS2swRixVQUFXLENBQ2xCLE1BQU1BLFVBQVk1NkYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU95OUYsVUFBVXg0RCxNQUNyRSxJQUFLLE1BQU9ubEMsSUFBS3pGLFNBQVV3SixPQUFPd0ssUUFBUTlFLEtBQUtrMEYsV0FBWSxDQUN6RCxNQUFNb0UsY0FBZ0JwRSxVQUFVcmlELFdBQVU3OEIsR0FBS0EsRUFBRTNjLE9BQVM5QixNQUMxRCxJQUF1QixJQUFuQitoRyxjQUNGNzBGLEdBQUdDLGNBQWN3VSxNQUFNLGlDQUNsQixDQUNMLE1BQU0ycUYsaUJBQW1CM08sVUFBVW9FLGVBQzdCcUssUUFBVUMsTUFBTTl4RyxPQUN0QndJLFFBQVFDLE1BQU0yYSxZQUFZMnVGLGlCQUFrQkYsU0FDNUN6TyxVQUFVb0UsZUFBaUJ1SyxnQkFDN0IsQ0FDRixPQUNNbm9HLEtBQUtpRyxLQUFLdzNGLG9CQUFvQmpFLFVBQ3RDLENBQ0YsQ0FpQkEsMEJBQU15TixDQUFzQjFxRyxPQUMxQixNQUFNd29CLE9BQVN4b0IsTUFBTUksY0FFZmdCLEtBRGtCb25CLE9BQU9sb0IsUUFBUSxhQUNWRSxRQUFRWSxLQUMvQjY3RixVQUFZNTZGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPeTlGLFVBQVV4NEQsTUFDL0Q0OEQsY0FBZ0I1OUYsS0FBS20zQyxVQUFVcWlELFVBQVc3N0YsTUFDM0M2N0YsVUFBVW9FLGVBQWV6SSxrQkFDNUJxRSxVQUFVb0UsZUFBZXpJLGdCQUFrQixDQUFDLEdBRTlDLE1BQU0zRCxTQUFXZ0ksVUFBVW9FLGVBQWV6SSxnQkFDcEM5MkYsS0FBTzBtQixPQUFPaFcsVUFBVXdULFNBQVMsV0FBYSxVQUFZLFNBQzFEeGhCLE9BQVN5d0YsU0FBU256RixNQUN4Qm16RixTQUFTQyxTQUFVLEVBQ25CRCxTQUFTTSxRQUFTLEVBQ2xCTixTQUFTbnpGLE9BQVMwQyxPQUNsQnk0RixVQUFVb0UsZUFBZXBNLFVBQVl6d0YsYUFnQi9CZixLQUFLaUcsS0FBS3czRixvQkFBb0JqRSxVQUN0QyxDQUVBLHNCQUFNd04sQ0FBa0J6cUcsT0FDdEIsTUFFTXVzRyxNQUZTdnNHLE1BQU1JLGNBQ1VFLFFBQVEsbUJBQ1RFLFFBQVFZLFdBQ2hDcUMsS0FBS2lHLEtBQUtxeEYsaUJBQWlCd1IsTUFDbkMsQ0FFQSw2QkFBTTFCLENBQXlCN3FHLE9BQzdCQSxNQUFNRSxpQkFDTixNQUFNc29CLE9BQVN4b0IsTUFBTUksY0FDckIsR0FBSW9vQixPQUFPaFcsVUFBVXdULFNBQVMsWUFBYSxPQUMzQyxNQUFNcGxCLE9BQVM0bkIsT0FBT2hvQixRQUFRSSxPQUV4QjJyRyxNQURrQi9qRixPQUFPbG9CLFFBQVEsbUJBQ1RFLFFBQVFZLEtBQ3RDLE9BQVFSLFFBQ04sSUFBSyxlQUNHNkMsS0FBS2lHLEtBQUtrNEYsZUFBZTJLLE9BQy9CLE1BQ0YsSUFBSyxrQkFDRzlvRyxLQUFLaUcsS0FBSzYzRixlQUFlZ0wsTUFBTyxDQUFFamhELE1BQU8sSUFDL0MsTUFFRixJQUFLLG1CQUNHN25ELEtBQUtpRyxLQUFLNjNGLGVBQWVnTCxNQUFPLENBQUVqaEQsTUFBTyxJQUMvQyxNQUVGLElBQUssa0JBQ0h1OUMsNkJBQTZCMzBGLE9BQU8sQ0FDbEMra0YsVUFBV3gxRixLQUFLaUcsS0FBS3RJLEtBQ3JCNDNGLGFBQWN1VCxNQUNkNzRDLFNBQVUsQ0FBQyxJQVFuQixDQUVBLDhCQUFNczNDLENBQTBCaHJHLE9BQzlCLE1BQU1rL0YsTUFBUWwvRixNQUFNSSxjQUFjSSxTQUFTWSxXQUNyQ3FDLEtBQUtpRyxLQUFLbzFGLG9CQUFvQkksTUFDdEMsQ0FFQSxrQ0FBTXlMLENBQThCM3FHLE9BQ2xDQSxNQUFNRSxpQkFDTixNQUFNc29CLE9BQVN4b0IsTUFBTUksY0FDckIsR0FBSW9vQixPQUFPaFcsVUFBVXdULFNBQVMsWUFBYSxPQUMzQyxHQUFJd0MsT0FBT2hXLFVBQVV3VCxTQUFTLFlBQWEsT0FDM0NobUIsTUFBTXUvRCxrQkFFTixNQUFNdTJCLGdCQUFrQnR0RSxPQUFPbG9CLFFBQVEsc0JBQXNCRSxTQUFTWSxLQUN0RSxHQUFLMDBGLGdCQUFMLENBQ0EsT0FBUXR0RSxPQUFPaG9CLFFBQVFJLFFBQ3JCLElBQUssZ0JBQ0c2QyxLQUFLK29HLHFCQUFxQjFXLGlCQUNoQyxNQUNGLElBQUssd0JBQ0dyeUYsS0FBS2dwRywwQkFBMEIsRUFBR3pzRyxPQUN4QyxNQUNGLElBQUssd0JBQ0d5RCxLQUFLZ3BHLHlCQUF5QixFQUFHenNHLE9BQ3ZDLE1BQ0YsSUFBSyxxQkFDR3lELEtBQUtpRyxLQUFLZzJGLGdCQUFnQjVKLGlCQUFrQixFQUFHLENBQUVyMEYsUUFBUSxJQUMvRCxNQUNGLElBQUssb0JBQ0dnQyxLQUFLaUcsS0FBS2cyRixnQkFBZ0I1SixnQkFBaUIsRUFBRyxDQUFFcjBGLFFBQVEsSUFDOUQsTUFDRixJQUFLLHNCQUNILGFBQWFnQyxLQUFLaUcsS0FBS28xRixvQkFBb0JoSixpQkFDN0MsSUFBSyxZQUNILENBQ0UsTUFBTTRJLFdBQWFsMkUsT0FBT2hvQixRQUFRK0QsWUFDNUJkLEtBQUtpRyxLQUFLKzBGLGdCQUFnQjNJLGdCQUFpQjRJLFlBQ2pEajdGLEtBQUtpRyxLQUFLd3hGLDZCQUNaLENBQ0EsTUFDRixJQUFLLHlCQUNHejNGLEtBQUtpRyxLQUFLaTFGLGlCQUFpQjdJLGlCQUNqQyxNQUNGLElBQUssa0JBQ0gsQ0FDRSxNQUFNSCxZQUFjbHlGLEtBQUtpRyxLQUFLeXpGLGVBQWVySCxpQkFDdkN4TCxTQUFXN21GLEtBQUtpRyxLQUFLK3lGLHVCQUF1QjNHLGlCQUNsREgsWUFBWTVzRixLQUFLa3dGLFVBQVl4MUYsS0FBS2lHLEtBQUt0SSxLQUN2Q3UwRixZQUFZNXNGLEtBQUtpd0YsYUFBZTFPLFNBQVNscEYsS0FDekN1MEYsWUFBWTVzRixLQUFLcEgsUUFBUyxFQUMxQmtuRyw2QkFBNkIzMEYsT0FBT3loRixZQUFZNXNGLEtBQ2xELENBQ0EsTUFDRixJQUFLLDBCQUNHdEYsS0FBS2lHLEtBQUtxNUYsa0JBQWtCak4saUJBR3RDcnlGLEtBQUtpRyxLQUFLd3hGLDZCQTNDWSxDQTRDeEIsQ0FFQSw0QkFBTTBQLENBQXdCNXFHLE9BQzVCQSxNQUFNRSxpQkFDTixNQUFNc29CLE9BQVN4b0IsTUFBTUksY0FDckJKLE1BQU11L0Qsa0JBRU4sTUFBTXk1QixhQUFleHdFLE9BQU9sb0IsUUFBUSxjQUFjRSxTQUFTWSxLQUMzRCxHQUFLNDNGLGFBQ0wsTUFDTyx5QkFEQ3h3RSxPQUFPaG9CLFFBQVFJLE9BRVo2QyxLQUFLaUcsS0FBSysxRiwrQkFBK0J6RyxtQkFGcEQsQ0FJRixDQUVBLDhCQUFNeVQsQ0FBMEJsb0csTUFBT3ZFLE9BQ3JDQSxNQUFNRSxpQkFDTkYsTUFBTXUvRCxrQkFDTixNQUFNLzJDLE9BQVN4b0IsTUFBTUksY0FDZjAxRixnQkFBa0J0dEUsT0FBT2xvQixRQUFRLHNCQUFzQkUsU0FBU1ksS0FDdEUsSUFBSzAwRixnQkFBaUIsT0FDdEIsTUFBTXFHLGFBQWUxNEYsS0FBS2lHLEtBQUt5eUYsYUFDekJ4RyxZQUFjd0csYUFBYWg1RixNQUFLaU8sR0FBSzBrRixrQkFBb0Ixa0YsRUFBRWhRLE9BQzdEdTBGLFlBQVk5QixrQkFBb0J0dkYsTUFBUSxJQUM1Q294RixZQUFZM0IscUJBQXFCenZGLGFBUTNCZCxLQUFLaUcsS0FBS2s1RixvQkFBb0IsQ0FBRW5oRyxRQUFRLFVBQ3hDZ0MsS0FBS2lHLEtBQUtnMEYsbUJBQW1CdkIsY0FDckMsQ0FFQSxvQkFBTWw0QixDQUFnQmprRSxPQUNwQixNQUFNd29CLE9BQVN4b0IsTUFBTUksY0FDZlEsT0FBUzRuQixPQUFPaG9CLFNBQVNJLE9BQy9CLEdBQUtBLE9BQ0wsT0FBUUEsUUFDTixJQUFLLE9BQ0gsSUFDR3JCLE1BQU1rRSxLQUFLaUcsS0FBS2xLLE9BQU95OUYsVUFBVS8yRixRQUNsQ3pDLEtBQUtpRyxLQUFLbEssT0FBT3k5RixVQUFVLzJGLE1BQVEsRUFDbkMsQ0FDQSxNQUFNKzJGLFVBQVl6NkUsTUFBTXBqQixNQUN0QixLQUNBb2pCLE1BQU0vZSxLQUFLaUcsS0FBS2xLLE9BQU95OUYsVUFBVS8yRixRQUNqQ3VCLEtBQUksV0FDSixNQUFPLENBQUVyRyxLQUFNaUIsUUFBUUMsTUFBTXFtRCxTQUFTLElBQ3hDLElBQ0FzMEMsVUFBVSxHQUFHbGpHLEtBQU8sUUFDaEJrakcsVUFBVTU0RixPQUFTLElBQUc0NEYsVUFBVUEsVUFBVTU0RixPQUFTLEdBQUd0SyxLQUFPLGFBQzNEMEosS0FBS2lHLEtBQUt3M0Ysb0JBQW9CakUsVUFDdEMsQ0FFQSxNQUNGLElBQUssUUFDSHRsRSxPQUFPMmtCLFFBQVEsQ0FDYnBxQyxNQUFPLEdBQUduUixLQUFLQyxLQUFLQyxTQUFTLDRCQUM3QmdULFFBQVMsTUFBTWxULEtBQUtDLEtBQUtDLFNBQVMsb0NBQ2xDczdDLElBQUt4MkMsZ0JBQ0d0QyxLQUFLaUcsS0FBS3czRixvQkFBb0IsVUFDOUJ6OUYsS0FBS2lHLEtBQUttNUYsTUFBSyxJQUd6QixNQUVGLElBQUssWUFDQ3AvRixLQUFLaUcsS0FBS3N6RixpQkFDWnJsRSxPQUFPMmtCLFFBQVEsQ0FDYnBxQyxNQUFPLEdBQUduUixLQUFLQyxLQUFLQyxTQUFTLDJCQUM3QmdULFFBQVMsTUFBTWxULEtBQUtDLEtBQUtDLFNBQ3ZCLG1DQUVGczdDLElBQUssSUFBTTk0QyxLQUFLaUcsS0FBSys0RixrQkFHdkJqMkYsR0FBR0MsY0FBY3NLLEtBQUtoVyxLQUFLQyxLQUFLQyxTQUFTLDZCQUUzQyxNQUVGLElBQUssVUFDSDAyQixPQUFPMmtCLFFBQVEsQ0FDYnBxQyxNQUFPLEdBQUduUixLQUFLQyxLQUFLQyxTQUFTLDhCQUM3QmdULFFBQVMsTUFBTWxULEtBQUtDLEtBQUtDLFNBQ3ZCLHNDQUVGczdDLElBQUssSUFBTTk0QyxLQUFLaUcsS0FBS2k1RixZQUV2QixNQUVGLElBQUssWUFDQ2wvRixLQUFLaUcsS0FBSzB6RixzQkFDWnpsRSxPQUFPMmtCLFFBQVEsQ0FDYnBxQyxNQUFPLEdBQUduUixLQUFLQyxLQUFLQyxTQUFTLGdDQUM3QmdULFFBQVMsTUFBTWxULEtBQUtDLEtBQUtDLFNBQ3ZCLHdDQUVGczdDLElBQUssSUFBTTk0QyxLQUFLaUcsS0FBS2kyRix3QkFFbEJsOEYsS0FBS2lHLEtBQUtpMkYsc0JBTXZCLENBRUEsd0JBQUFtTCxDQUEwQnZrQixVQUN4QixRQUFJeGxGLEtBQUtzRyxLQUFLMkUsSUFFaEIsQ0FFQSw2QkFBTSsrRixDQUF5Qi9xRyxPQUM3QixNQUFNRyxFQUFJSCxNQUFNSSxjQUNWMmpCLEVBQUk1akIsRUFBRWlYLGNBQWMsVUFDcEJzMUYsU0FBV3ZzRyxFQUFFaVgsY0FBYyxjQUVqQ3BYLE1BQU13eEIsYUFBYW03RSxhQUFhRCxTQUFVLEVBQUdBLFNBQVNwdkYsUUFFdEQsTUFBTXN2RixnQkFBa0J6c0csRUFBRUcsUUFBUSxtQkFDNUJ5SSxLQUFPLENBRWJBLEtBQVksVUFDWkEsU0FBZ0IsU0FDaEJBLEtBQUs3SCxLQUFPNmlCLEVBQUV2akIsUUFBUTJ3QixTQUN0QnBvQixLQUFLaXdGLGFBQWU0VCxnQkFBZ0Jwc0csUUFBUVksS0FDNUMySCxLQUFLNHFELFFBQVVsd0QsS0FBS2lHLEtBQUt0SSxLQUN6QjJILEtBQUtvaEYsU0FBVyxpQkFDaEJucUYsTUFBTXd4QixhQUFhQyxRQUFRLGFBQWNyZixLQUFLQyxVQUFVdEosTUFJMUQsQ0FFQSw2QkFBQWtpRyxDQUErQjFrQixVQUM3QixRQUFJeGxGLEtBQUtzRyxLQUFLMkUsSUFFaEIsQ0FFQSw0QkFBQWsvRixDQUE4QjNrQixVQUM1QixRQUFJeGxGLEtBQUtzRyxLQUFLMkUsSUFFaEIsQ0FFQSxrQ0FBTW0vRixDQUE4QjBCLFdBQ2xDLE1BQ005ckMsU0FBVyxDQUFFMy9ELEtBREp5ckcsVUFBVXpzRyxjQUNPSSxRQUFRWSxLQUFNVSxLQUFNLGVBQ3BEK3FHLFVBQVVyN0UsYUFBYUMsUUFBUSxhQUFjcmYsS0FBS0MsVUFBVTB1RCxVQUM5RCxDQUVBLGlDQUFNcXFDLENBQTZCeUIsV0FDakMsTUFBTXgyRSxXQUFhdzJFLFVBQVVyN0UsYUFBYTZDLFFBQVEsY0FDNUN0ckIsS0FBT3FKLEtBQUt1ZCxNQUFNMEcsWUFHeEI1eUIsS0FBSzhuRyxhQUFhc0IsV0FFbEIsTUFDTTdULGFBRFM2VCxVQUFVenNHLGNBQ0dJLFFBQVFZLEtBRXBDLEdBQWtCLGdCQUFkMkgsS0FBS2pILEtBQXdCLENBQy9CLE1BQU1nckcsWUFBY3JwRyxLQUFLNm9HLGFBQWF0VCxjQUN0QyxHQUFJOFQsYUFDRUEsWUFBWTNRLGNBQWMxMUYsU0FBU3NDLEtBQUszSCxNQUFPLGFBRS9DcUMsS0FBS2lHLEtBQUtrNUYsb0JBQW9CLENBQUVuaEcsUUFBUSxVQUN4Q2dDLEtBQUtpRyxLQUFLbXhGLDBCQUEwQjl4RixLQUFLM0gsS0FBTTQzRixhQUN2RCxNQUNFNlAsNkJBQTZCMzBGLE9BQU8sQ0FDbEMra0YsVUFBV3gxRixLQUFLaUcsS0FBS3RJLEtBQ3JCNDNGLGFBQ0F0bEMsU0FBVTNxRCxNQUdoQixDQUVBLFdBQUFna0csQ0FBYUYsV0FDWHBwRyxLQUFLNm5HLGFBQWF1QixVQUNwQixDQUVBLFlBQUF2QixDQUFjdUIsV0FDR0EsVUFBVXpzRyxjQUNsQm9TLFVBQVVDLElBQUksWUFDdkIsQ0FFQSxZQUFBODRGLENBQWNzQixXQUNaLE1BQU1ya0YsT0FBU3FrRixVQUFVenNHLGNBQ3pCb29CLE9BQU9oVyxXQUFXK1QsT0FBTyxZQUMzQixDQUVBLHdCQUFNd2lGLENBQW9CL29HLE9BQ3hCLE1BQU13b0IsT0FBU3hvQixNQUFNSSxjQUNmZ0IsS0FBT29uQixPQUFPaG9CLFNBQVNZLEtBQ3ZCaTFCLFdBQWFyMkIsTUFBTXd4QixhQUFhNkMsUUFBUSxjQUN4Q3RyQixLQUFPcUosS0FBS3VkLE1BQU0wRyxrQkFDbEI1eUIsS0FBS3VwRyxpQkFBaUJqa0csS0FBTTNILEtBQ3BDLENBRUEsdUJBQU1tcEcsQ0FBbUJ2cUcsT0FDdkJBLE1BQU1FLGlCQUNOLE1BQU02SSxLQUFPLENBQUVrd0YsVUFBV3gxRixLQUFLaUcsS0FBS3RJLE1BQ3BDLEdBQUlwQixNQUFNd3hCLGFBQWMsQ0FDdEIsTUFBTTZFLFdBQWFyMkIsTUFBTXd4QixhQUFhNkMsUUFBUSxjQUM5Q3RyQixLQUFLMnFELFNBQVd0aEQsS0FBS3VkLE1BQU0wRyxXQUM3QixDQUNBd3lFLDZCQUE2QjMwRixPQUFPbkwsS0FDdEMsQ0FFQSx3QkFBTXloRyxDQUFvQnhxRyxPQUN4QixNQUVNb0IsS0FGU3BCLE1BQU1JLGNBQ2FFLFFBQVEsZ0JBQ1ZFLFFBQVFZLEtBQ2xDd2YsTUFBUW5kLEtBQUtxb0cscUJBQXFCMXFHLE1BQ2xDKzZGLGFBQWUxNEYsS0FBS2lHLEtBQUtsSyxPQUFPMjhGLGFBQ2xDOTVGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPMjhGLGNBQ3pDLEdBRUV4RyxZQUFjLElBQUk1RSxhQUFhb0wsYUFBYXY3RSxRQUNsRCxHQUFJKzBFLFlBQVk3QyxXQUFXMkIsT0FBUSxDQUNqQyxNQUFNN3ZGLEtBQU8sSUFBSTJTLFVBQ2pCM1MsS0FBSytKLE9BQVNsTCxLQUFLaUcsS0FBS3RJLEtBQ3hCdTBGLFlBQVk1c0YsS0FBS3V2QixRQUFTLEVBQzFCcTlELFlBQVk1c0YsS0FBSzYyRixTQUFXaDdGLEtBQUt4RCxLQUNqQ3dELEtBQUtqSCxNQUFRZzRGLFlBQVloNEYsTUFBTWlYLFVBQzFCNVUsTUFBTXN5QixVQUFZcWpFLFlBQVloNEYsTUFBTWdxRCxTQUN2Qy9pRCxLQUFLaTlCLFNBQVUsRUFDZmo5QixLQUFLcW9HLFlBQWMsYUFDbkJyb0csS0FBS3NvRyxpQkFBbUIsK0NBR3RCdlgsWUFBWTdDLFdBQVc0Qix3QkFDbkI5dkYsS0FBS205QixtQkFBbUI0ekQsWUFBWTdDLFdBQVcwQixJQUFJbDFGLFdBQ25Ec0YsS0FBS3kwQixZQUNYczhELFlBQVk1c0YsS0FBSytwRixXQUFXQyxlQUFpQm51RixLQUFLd25ELGdCQUN6Q3VwQyxZQUFZN0MsV0FBV3BuQyxTQUNoQzltRCxLQUFLOEcsTUFBUWlxRixZQUFZN0MsV0FBVzBCLFVBQzlCNXZGLEtBQUtBLGFBQ0xBLEtBQUt5MEIsWUFDWHM4RCxZQUFZNXNGLEtBQUsrcEYsV0FBV0MsZUFBaUJudUYsS0FBS3duRCxnQkFDekN1cEMsWUFBWTdDLFdBQVdsbkMsb0JBQzFCaG5ELEtBQUtrOUIsY0FBYzZ6RCxZQUFZN0MsV0FBVzBCLElBQUlsMUYsV0FDOUNzRixLQUFLeTBCLFlBQ1hzOEQsWUFBWTVzRixLQUFLK3BGLFdBQVdDLGVBQWlCbnVGLEtBQUt3bkQsZUFFdEQsTUFBTyxHQUFJdXBDLFlBQVk3QyxXQUFXanVDLE1BQU8sQ0FDdkMsTUFBTXBqQyxTQUFXLENBQ2Z6SCxTQUFVMjdFLFlBQVk3QyxXQUFXanVDLE1BQ2pDenpCLFlBQWF1a0UsWUFBWTdDLFdBQVcvNEYsS0FDcENveUMsVUFBV3dwRCxZQUFZNTdGLEtBQU80N0YsWUFBWTU3RixVQUFPdUgsR0FFL0NxMEYsWUFBWXhFLFdBQVUxdkUsU0FBUzlqQixNQUFRZzRGLFlBQVloNEYsTUFBTWlYLFVBQzdELE1BQU1oUSxLQUFPMlMsVUFBVXJELE9BQU91TixVQUM5QjdjLEtBQUsrSixPQUFTbEwsS0FBS2lHLEtBQUt0SSxXQUNsQndELEtBQUtBLGFBQ0xBLEtBQUt5MEIsWUFDWHM4RCxZQUFZNXNGLEtBQUsrcEYsV0FBV0MsZUFBaUJudUYsS0FBS3duRCxlQUNsRHVwQyxZQUFZNXNGLEtBQUt1dkIsUUFBUyxFQUMxQnE5RCxZQUFZNXNGLEtBQUs2MkYsU0FBV2g3RixLQUFLeEQsSUFDbkMsT0FFTXFDLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLG9CQUFxQnc2RixjQUNoRCxDQUVBLHVCQUFBOE4sQ0FBeUJqcUcsT0FDUkEsTUFBTUksY0FDZG9TLFVBQVVDLElBQUksWUFDdkIsQ0FFQSx1QkFBQXkzRixDQUF5QmxxRyxPQUNSQSxNQUFNSSxjQUNkb1MsVUFBVStULE9BQU8sWUFDMUIsQ0FFQSxtQkFBTTRqRixDQUFlbnFHLE9BSW5CLE1BRU1vQixLQUZTcEIsTUFBTUksY0FDTUUsUUFBUSxnQkFDVkUsUUFBUVksS0FDM0J3ZixNQUFRbmQsS0FBS3FvRyxxQkFBcUIxcUcsTUFDbEMrNkYsYUFBZTE0RixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsYUFDbEM5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsY0FDekMsR0FDSkEsYUFBYXY3RSxPQUFPOHhFLFFBQVV5SixhQUFhdjdFLE9BQU84eEUsYUFDNUNqdkYsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsb0JBQXFCdzZGLGNBQ2hELENBRUEscUJBQU1tTyxDQUFpQnRxRyxPQUNyQixNQUVNb0IsS0FGU3BCLE1BQU1JLGNBQ0NFLFFBQVEsV0FDVkUsUUFBUVksS0FDdEJ3ZixNQUFRbmQsS0FBS3FvRyxxQkFBcUIxcUcsTUFDbEMrNkYsYUFBZTE0RixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsYUFDbEM5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsY0FDekMsVUFDZ0JBLGFBQWF2N0UsT0FDZCt5QyxjQUNibHdELEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLG9CQUFxQnc2RixjQUNoRCxDQUVBLDBCQUFNaU8sQ0FBc0JwcUcsT0FDMUIsTUFFTW9CLEtBRlNwQixNQUFNSSxjQUNNRSxRQUFRLGdCQUNWRSxRQUFRWSxLQUMzQndmLE1BQVFuZCxLQUFLcW9HLHFCQUFxQjFxRyxNQUNsQys2RixhQUFlMTRGLEtBQUtpRyxLQUFLbEssT0FBTzI4RixhQUNsQzk1RixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBTzI4RixjQUN6QyxHQUNKQSxhQUFhdmlFLE9BQU9oWixNQUFPLFNBQ3JCbmQsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsb0JBQXFCdzZGLGNBQ2hELENBRUEsa0JBQU1rTyxDQUFjcnFHLE9BQ2xCLE1BRU1vQixLQUZTcEIsTUFBTUksY0FDTUUsUUFBUSxnQkFDVkUsUUFBUVksS0FDM0J3ZixNQUFRbmQsS0FBS3FvRyxxQkFBcUIxcUcsTUFDbEMrNkYsYUFBZTE0RixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsYUFDbEM5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsY0FDekMsVUFDR0EsYUFBYXY3RSxPQUFPa3lFLFdBQVdDLHFCQUNoQ3R2RixLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxvQkFBcUJ3NkYsY0FDaEQsQ0FFQSxzQkFBTTZRLENBQWtCamtHLEtBQU0zSCxNQUM1QixJQUFJdXlELFFBQVNoMkQsTUFDT2cyRCxRQUFoQjVxRCxLQUFLMjZDLFVBQXFCMzZDLEtBQUsyNkMsVUFHL0IzNkMsS0FBS2tILFNBQVdsSCxLQUFLaUgsUUFDakIsU0FBU2pILEtBQUtrSCxpQkFBaUJsSCxLQUFLaUgsVUFDcENqSCxLQUFLMkgsU0FBVzNILEtBQUs2TCxVQUFZN0wsS0FBSzJJLEdBRzVCLFVBQWQzSSxLQUFLakgsS0FDUDZ4RCxRQUFVNXFELEtBQUszSCxLQUNOdXlELFVBQ1RoMkQsTUFBUXFWLFdBQVdxQixnQkFBZ0JzL0MsU0FDOUJoMkQsT0FBdUIsU0FBZG9MLEtBQUtqSCxPQUFpQjZ4RCxRQUFVLE9BRzVDaDJELE9BQVNnMkQsVUFBWWgyRCxNQUFNeUQsT0FDN0J1eUQsUUFBVWgyRCxNQUFNeUQsTUFHbEIsTUFBTXUwRixZQUFjLENBQUMsRUFHckIsT0FGSWhpQyxVQUFTZ2lDLFlBQVloaUMsUUFBVUEsU0FFM0I1cUQsS0FBS2pILE1BQU0ySixlQUNqQixJQUFLLFFBcUJMLFFBQ0UsTUFwQkYsSUFBSyxPQUNIa3FGLFlBQVk3QyxXQUFhLENBQ3ZCcGhGLEdBQUkzSSxLQUFLQSxNQUFNNnJDLEtBQU83ckMsS0FBSzJJLEdBQzNCNVAsS0FBTSxRQUVSLE1BQ0YsSUFBSyxpQkFDSDZ6RixZQUFZN0MsV0FBYSxDQUN2QnBoRixHQUFJM0ksS0FBS2hQLEtBQ1QrSCxLQUFNLGtCQUVSLE1BQ0YsSUFBSyxZQUNINnpGLFlBQVk3QyxXQUFhLENBQ3ZCcGhGLEdBQUkzSSxLQUFLaFAsS0FDVCtILEtBQU0sYUFhWixNQUFNcTZGLGFBQWUxNEYsS0FBS2lHLEtBQUtsSyxPQUFPMjhGLGFBQ2xDOTVGLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPMjhGLGNBQ3pDLEdBRUVnUixlQUFpQmhSLGFBRFQxNEYsS0FBS3FvRyxxQkFBcUIxcUcsT0FFcEMrckcsZUFBZWwrRCxZQUFZaytELGVBQWVsK0QsSUFDOUM1c0MsUUFBUUMsTUFBTTJhLFlBQVlrd0YsZUFBZ0J4WCxtQkFDcENseUYsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsb0JBQXFCdzZGLGNBQ2hELENBRUEsb0NBQU1vRyxTQUNFOStGLEtBQUtpRyxLQUFLNjRGLGdDQUNsQixDQUVBLG9CQUFNVyxDQUFnQm42RixNQWFwQixJQUFJNHFELFFBQVNoMkQsTUFDT2cyRCxRQUFoQjVxRCxLQUFLMjZDLFVBQXFCMzZDLEtBQUsyNkMsVUFHL0IzNkMsS0FBS2tILFNBQVdsSCxLQUFLaUgsUUFDakIsU0FBU2pILEtBQUtrSCxpQkFBaUJsSCxLQUFLaUgsVUFDcENqSCxLQUFLMkgsU0FBVzNILEtBQUs2TCxVQUFZN0wsS0FBSzJJLEdBRzVCLFVBQWQzSSxLQUFLakgsS0FDUDZ4RCxRQUFVNXFELEtBQUszSCxLQUNOdXlELFVBQ1RoMkQsTUFBUXFWLFdBQVdxQixnQkFBZ0JzL0MsU0FDOUJoMkQsT0FBdUIsU0FBZG9MLEtBQUtqSCxPQUFpQjZ4RCxRQUFVLE9BRzVDaDJELE9BQVNnMkQsVUFBWWgyRCxNQUFNeUQsT0FDN0J1eUQsUUFBVWgyRCxNQUFNeUQsTUFHbEIsTUFBTXUwRixZQUFjLENBQUMsRUFHckIsT0FGSWhpQyxVQUFTZ2lDLFlBQVloaUMsUUFBVUEsU0FFM0I1cUQsS0FBS2pILE1BQU0ySixlQUNqQixJQUFLLFFBMEJMLFFBQ0UsTUF6QkYsSUFBSyxPQUNILEdBQUkxQyxLQUFLMkksR0FBSSxDQUNYLE1BQU1oSSxLQUFPM0ksS0FBSzRRLE1BQU1oUixJQUFJb0ksS0FBSzJJLElBQ2pDLEdBQXlCLFVBQXJCaEksTUFBTVgsTUFBTWpILEtBQWtCLE1BQ3BDLENBRUE2ekYsWUFBWTdDLFdBQWEsQ0FDdkJwaEYsR0FBSTNJLEtBQUtBLE1BQU02ckMsS0FBTzdyQyxLQUFLMkksR0FDM0I1UCxLQUFNLFFBRVIsTUFDRixJQUFLLGlCQUNINnpGLFlBQVk3QyxXQUFhLENBQ3ZCcGhGLEdBQUkzSSxLQUFLaFAsS0FDVCtILEtBQU0sa0JBRVIsTUFDRixJQUFLLFlBQ0g2ekYsWUFBWTdDLFdBQWEsQ0FDdkJwaEYsR0FBSTNJLEtBQUtoUCxLQUNUK0gsS0FBTSxhQWNQNnpGLFlBQVk3QyxhQUNWcnZGLEtBQUtpRyxLQUFLbEssT0FBTzh4RixRQU9wQnFFLFlBQVk3QyxXQUFhLENBQ3ZCaHhGLEtBQU0sT0FDTi9ILEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTLDJDQVIzQjAwRixZQUFZN0MsV0FBYSxDQUN2QnBoRixHQUFJLE1BQ0o1UCxLQUFNLGlCQUNOL0gsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVMseUJBUy9CLE1BQU1rN0YsYUFBZTE0RixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsYUFDbEM5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsY0FDekMsR0FFSixJQUFJZ0gsUUFBUyxFQUNiLE1BQVFBLFFBQ054TixZQUFZdjBGLEtBQU9pQixRQUFRQyxNQUFNcW1ELFNBQVMsSUFDMUN3NkMsT0FDbUUsSUFBakVoSCxhQUFhbmlHLFFBQU9vWCxHQUFLQSxFQUFFaFEsT0FBU3UwRixZQUFZdjBGLE9BQU1pRCxPQUcxRDgzRixhQUFhdGhHLEtBQUs4NkYsbUJBQ1pseUYsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsb0JBQXFCdzZGLGNBQ2hELENBRUEsMEJBQU1xUSxDQUFzQjFXLGlCQUMxQixNQUFNcUcsYUFBZTE0RixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsYUFDbEM5NUYsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU8yOEYsY0FDekMsR0FDRXhHLFlBQWN3RyxhQUFhaDVGLE1BQUtpTyxHQUFLMGtGLGtCQUFvQjFrRixFQUFFaFEsT0FDNUR1MEYsY0FDTEEsWUFBWW5ELGNBQWdCbUQsWUFBWW5ELG1CQUNsQy91RixLQUFLaUcsS0FBS2s1RixvQkFBb0IsQ0FBRW5oRyxRQUFRLFVBQ3hDZ0MsS0FBS2lHLEtBQUtnMEYsbUJBQW1CdkIsY0FDckMsRUFHSyxTQUFTd1AsTUFBT3QyRixLQUNyQixJQUFLLE1BQU16SyxZQUFZeUssSUFBSyxDQUMxQixNQUFNKzNGLEdBQUsvcUcsUUFBUUMsTUFBTStxRyxRQUFRaDRGLElBQUl6SyxXQUMxQixXQUFQd2lHLEtBQ0YvM0YsSUFBSXpLLFVBQVkrZ0csTUFBTXQyRixJQUFJekssYUFHakIsV0FBUHdpRyxJQUFvQi9wRyxPQUFPd0ssUUFBUXdILElBQUl6SyxXQUFXdkcsVUFFcEMsV0FBUCtvRyxJQUFvQi8zRixJQUFJekssVUFBVXZHLFFBRTNCLFdBQVArb0csSUFBb0I3dEcsTUFBTUksT0FBTzBWLElBQUl6SyxjQUM5Q3lLLElBQUl6SyxVQUFZakwsT0FBTzBWLElBQUl6SyxZQUozQnlLLElBQUl6SyxVQUFZLElBTXBCLENBQ0EsT0FBT3lLLEdBQ1QsQ0NscUNPLE1BQU1pNEYsd0JBQXdCL3ZCLFVBS25DLHlCQUFXdmdFLEdBQ1QsT0FBTzNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxVQUFXLFFBQzdCQyxTQUFVLGlEQUNWRSxNQUFPLElBQ1BDLE9BQVEsSUFDUjZrRCxRQUFTLENBQUMsb0JBQ1ZsdUMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQWdsQyxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsQ0FNQSxhQUFNemlDLENBQVN0eEIsUUFBVSxDQUFDLEdBQ3hCLE1BQU11eEIsVUFBWXgwQixNQUFNdTBCLFFBQVF0eEIsU0FzQmhDLE9BcEJBdXhCLFVBQVU1ekIsUUFBVXhCLGlCQUFpQndFLDhCQUE4QkQsS0FBS2lHLEtBQUtoSixRQUFTLENBQUU3QyxRQUFRLElBRWhHeTJCLFVBQVVrcUQsK0JBQWlDeHRFLFdBQVdDLFdBQ3BEcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZalgsTUFDbEMsQ0FDRWtNLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVTh1QyxnQ0FBa0NweUQsV0FBV0MsV0FDckRxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVl1eUQsT0FDbEMsQ0FDRXQ5RCxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVVnRyxTQUFXdjVCLEtBQUtzRyxLQUFLMkUsS0FFeEJzb0IsU0FDVCxDQU1BLGlCQUFBL1csQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFFbkIvWixLQUFLVixRQUFRNnhELFVBRWxCcDNDLEtBQ0dyYSxLQUFLLG1CQUNMK3hCLE9BQU1ncUMsSUFBTWhnRSxpQkFBaUJhLHFCQUFxQm0vRCxHQUFJejdELEtBQUtpRyxPQUNoRSxFQ3RFSyxNQUFNNmpHLHNCQUFzQkQsZ0JBS2pDLHlCQUFXdHdGLEdBQ1QsT0FBTzNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQ3JESyxNQUFPLElBQ1BDLE9BQVEsS0FFWixFQ2RLLE1BQU1rd0YseUJBQXlCQyxhQUNwQyxpQkFBQXIwQyxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsRUNMSyxNQUFNNDJDLHdCQUF3QkMsWUFDbkMsaUJBQUF2MEMsR0FDRSxNQUFNdEMsY0FBZ0JoM0QsTUFBTXM1RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZXJ6RCxNQUNsQ3F6RCxhQUNULEVDTEssTUFBTTgyQywyQkFBMkJDLGVBQ3RDLGlCQUFBejBDLEdBQ0UsTUFBTXRDLGNBQWdCaDNELE1BQU1zNUQsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVyekQsTUFDbENxekQsYUFDVCxFQ0xLLE1BQU1nM0MsNEJBQTRCQyxnQkFDdkMsaUJBQUEzMEMsR0FDRSxNQUFNdEMsY0FBZ0JoM0QsTUFBTXM1RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZXJ6RCxNQUNsQ3F6RCxhQUNULEVDTEssTUFBTWszQyx3QkFBd0JDLFlBQ25DLGlCQUFBNzBDLEdBQ0UsTUFBTXRDLGNBQWdCaDNELE1BQU1zNUQsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVyekQsTUFDbENxekQsYUFDVCxFQ0dLLE1BQU1vM0MsdUJBQXVCM3dCLFVBS2xDLGlCQUFBaGdFLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BRW5CL1osS0FBS1YsUUFBUTZ4RCxXQUVsQnAzQyxLQUFLcmEsS0FBSyx1QkFBdUIreEIsT0FBTWwxQixPQUFTeUQsS0FBS3M3RCxlQUFlLytELE1BQU8sV0FDM0V3ZCxLQUFLcmEsS0FBSyxnQkFBZ0IreEIsT0FBTWwxQixPQUFTeUQsS0FBSys1RSxjQUFjeDlFLE1BQU8sV0FDbkV3ZCxLQUFLcmEsS0FBSyxZQUFZK3hCLE9BQU1udkIsZUFBa0J0QyxLQUFLMHFHLGNBQ25EM3dGLEtBQUtyYSxLQUFLLG1CQUFtQit4QixNQUFNenhCLEtBQUsycUcsaUJBQWlCenhHLEtBQUs4RyxPQUM5RCtaLEtBQUtyYSxLQUFLLGtCQUFrQit4QixNQUFNenhCLEtBQUtnekQsZUFBZTk1RCxLQUFLOEcsT0FDM0QrWixLQUFLcmEsS0FBSyxpQkFBaUIreEIsTUFBTXp4QixLQUFLb2tFLGVBQWVsckUsS0FBSzhHLE9BQzFEK1osS0FBS3JhLEtBQUssb0JBQW9CK3hCLE1BQU16eEIsS0FBS3FrRSxrQkFBa0JuckUsS0FBSzhHLE9BQ2xFLENBRUEsb0JBQU1nekQsQ0FBZ0J6MkQsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU02SixXQUFhL0osTUFBTUksY0FBY0ksUUFBUXd5QyxlQUN6Q3Z2QyxLQUFLaUcsS0FBS0ksZUFDZEMsV0FDQTZJLFVBQVU1UyxPQUVkLENBRUEsYUFBTW8yQixDQUFTcDJCLE1BQU84OUUsZUFBaUIsU0FDckM5OUUsTUFBTUUsaUJBQ05GLE1BQU11L0Qsa0JBRU4sTUFBTS9vQyxlQUFpQm5yQixjQUFjb3JCLHFCQUFxQnoyQixNQUFPLFFBRWpFLElBQUlnK0UsU0FBVyxFQUNmLE1BQU1qbEQsV0FBYXQxQixLQUFLaUcsS0FBS2xLLE9BQU9zK0UsZ0JBQWtCejdFLFFBQVFDLE1BQU11TyxVQUFVcE4sS0FBS2lHLEtBQUtsSyxPQUFPcytFLGlCQUFtQixHQUNsSCxJQUFLLE1BQU1wMEUsUUFBUThzQixTQUNaOXNCLE1BQVNBLEtBQUtsSyxRQUNkLENBQUMsT0FBUSxTQUFVLFFBQVMsT0FBUSxTQUFTaUgsU0FBU2lELEtBQUs1SCxTQUkzRDhHLFNBQVM0QyxVQUFVOUIsT0FDbEJxdkIsV0FBVzUxQixNQUFLdTNDLElBQU1BLEdBQUczZ0QsT0FBUzJQLEtBQUszUCxTQUs1QixJQUFiaWtGLFdBQ0ZBLGVBQWlCZixVQUFVL29FLFVBRTdCNmtCLFdBQVdsK0IsS0FBS29pRixVQUFVRyxZQUFZWSxTQUFVdDBFLGVBRzVDakcsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsQ0FBQyxVQUFVbThFLGtCQUFtQi9rRCxZQUN6RCxDQUVBLHNCQUFNcTFFLENBQWtCcHVHLE9BQ3RCLE1BQ013aEUsSUFESXhoRSxNQUFNSSxjQUNGRSxRQUFRLFNBQ2hCKzRDLElBQU1oM0MsUUFBUUMsTUFBTXVPLFVBQVVwTixLQUFLaUcsS0FBS2xLLE9BQU9zOEMsYUFDckR6QyxJQUFJemYsT0FBT2o2QixPQUFPNmhFLElBQUloaEUsUUFBUW9nQixPQUFRLFNBQ2hDbmQsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUscUJBQXNCMDNDLEtBQ2pELENBRUEsZUFBTTgwRCxHQUNKLE1BQU05MEQsSUFBTTUxQyxLQUFLaUcsS0FBS2xLLE9BQU9zOEMsWUFBY3o1QyxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3M4QyxhQUFlLEdBQ25HekMsSUFBSXgrQyxLQUFLLFlBQ0g0SSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxxQkFBc0IwM0MsS0FDakQsQ0FFQSxjQUFBd3VCLEdBQ0UsTUFBTTVrRSxPQUFTUSxLQUFLaUcsS0FBS2xLLE9BQU91OEMsU0FBUzk0QyxPQUFTWixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3U4QyxTQUFTOTRDLFFBQVUsR0FDOUdBLE9BQU9wSSxLQUFLLENBQ1ZkLEtBQU0sR0FDTjRNLElBQUssS0FDTEQsSUFBSyxLQUNMcWhFLFNBQVUsRUFDVkMsVUFBVyxHQUNYQyxXQUFZLEVBQ1pDLFlBQWEsR0FDYkMsYUFBYyxFQUNkQyxjQUFlLEtBRWpCM2tFLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHlCQUEwQnNCLFFBQy9DLENBRUEsaUJBQUE2a0UsQ0FBbUI5bkUsT0FDakIsTUFDTXdoRSxJQURJeGhFLE1BQU1JLGNBQ0ZFLFFBQVEsU0FDaEIyQyxPQUFTWixRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3U4QyxTQUFTOTRDLFFBQ2pFQSxPQUFPMjJCLE9BQU9qNkIsT0FBTzZoRSxJQUFJaGhFLFFBQVFvZ0IsT0FBUSxHQUN6Q25kLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHlCQUEwQnNCLFFBQy9DLENBRUEsb0JBQU04N0QsQ0FBZ0IvK0QsTUFBTzg5RSxlQUFpQixTQUM1Qzk5RSxNQUFNRSxpQkFDTixNQUFNRyxHQUFLNHVCLEVBQUVqdkIsTUFBTUksZUFBZSsrRCxRQUFRLFNBQ3BDejFELEtBQU9qRyxLQUFLaUcsS0FBS2xLLE9BQU9zK0UsZ0JBQWdCMzZFLE1BQUt2SixHQUMxQ0EsRUFBRWc3QyxNQUFRdjBDLEdBQUcwSSxLQUFLLGFBRTNCLElBQUtXLEtBQ0gsT0FFRixNQUFNNUMsZUFBaUJrSyxXQUFXQyxXQUNoQ3ZILEtBQUtsSyxPQUFPc1IsWUFBWWpYLE1BQ3hCLENBQ0VrTSxPQUFPLEVBQ1BzN0QsUUFBUzU5RCxLQUFLaUcsS0FBS2tyRCxXQUt2QixHQUFJdjBELEdBQUdpaEUsU0FBUyxZQUFhLENBQzNCLE1BQU1DLFFBQVVsaEUsR0FBRzRkLFNBQVMsaUJBQzVCc2pELFFBQVFqQyxRQUFRLEtBQUssSUFBTWlDLFFBQVFoN0MsVUFDckMsS0FBTyxDQUNMLE1BQU1pN0MsSUFBTXZ5QyxFQUFFLDZCQUE2Qm5vQixrQkFDckNvSyxNQUFRK2QsRUFBRSx1Q0FFaEJ1eUMsSUFBSXJ0QixPQUFPampDLE9BQ1g3USxHQUFHOHpDLE9BQU9xdEIsSUFBSUUsUUFDZEYsSUFBSUcsVUFBVSxJQUNoQixDQUNBdGhFLEdBQUdvakMsWUFBWSxXQUNqQixDQUVBLG1CQUFNKzVDLENBQWV4OUUsTUFBTzg5RSxlQUFpQixTQUMzQyxNQUFNcDBFLEtBQU91bEIsRUFBRWp2QixNQUFNSSxlQUFlRSxRQUFRLFNBQ3RDd1gsT0FBU3BPLEtBQUtYLEtBQUssV0FDbkJrMUUsTUFBUXYwRSxLQUFLWCxLQUFLLFNBQ2xCbTFFLFVBQVl6NkUsS0FBS2lHLEtBQUtsSyxPQUFPcytFLGdCQUFnQmxqQyxXQUFVNzJCLEdBQU1qTSxRQUFVaU0sRUFBRTZ3QixNQUFROThCLFFBQVltbUUsT0FBU2w2RCxJQUFNazZELFFBQ2xILEdBQUlDLFdBQWEsRUFBRyxDQUNsQixNQUFNbmxELFdBQWF0MUIsS0FBS2lHLEtBQUtsSyxPQUFPcytFLGdCQUFrQno3RSxRQUFRQyxNQUFNdU8sVUFBVXBOLEtBQUtpRyxLQUFLbEssT0FBT3MrRSxpQkFBbUIsR0FDbEgva0QsV0FBV2EsT0FBT3NrRCxVQUFXLFNBQ3ZCejZFLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLENBQUMsVUFBVW04RSxrQkFBbUIva0QsWUFDekQsQ0FDRixDQUVBLHlCQUFXL2IsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsU0FDM0JDLFNBQVUsMENBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxJQUNSd1csU0FBVSxDQUFDLENBQUVDLGFBQWMsVUFDM0JvdUMsUUFBUyxDQUFDLG9CQUNWbHVDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsaUJBSWpCLENBRUEsaUJBQUFnbEMsR0FDRSxNQUFNdEMsY0FBZ0JoM0QsTUFBTXM1RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZXJ6RCxNQUNsQ3F6RCxhQUNULENBRUEsYUFBTXppQyxHQUNKLE1BQU1DLFVBQVl4MEIsTUFBTXUwQixVQUV4QkMsVUFBVTZwRCxVQUFvQyxJQUF6QjE2RSxLQUFLaUcsS0FBSzAwRSxXQUUvQixNQUFNN2lDLElBQU1sNEMsT0FBT3dLLFFBQVFwSyxLQUFLaUcsS0FBSy9HLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsTUFBUSxDQUFDLEdBQUduUSxRQUFPaUssR0FBS0EsRUFBRSxLQUFJd0QsS0FBSXhELEdBQUtBLEVBQUUsS0FFaEcwTixZQUFjNVEsS0FBS3ZCLE9BQU9pbkIsSUFBSUMsTUFBTTgwQixnQkFBZ0IsQ0FBRWpZLFNBQVU5L0IsS0FBS2lHLEtBQUtsSyxPQUFPbVMsTUFBTzRwQyxTQUF3QixJQUFYQSxJQUFJLElBQXFCQSxJQUFJLEtBRXhJam5CLFVBQVVsTixPQUFTelYsTUFBTTNYLFFBQU95aEQsSUFBa0IsVUFBWkEsR0FBRzM1QyxPQUN6Q3d5QixVQUFVKzVFLFdBQWExOEYsTUFBTTNYLFFBQU95aEQsSUFBa0IsVUFBWkEsR0FBRzM1QyxPQUU3Q3d5QixVQUFVb3lDLGVBQTZDLElBQTVCcHlDLFVBQVVsTixPQUFPL2lCLE9BQzVDaXdCLFVBQVVnNkUsZUFBaUQsSUFBaENoNkUsVUFBVSs1RSxXQUFXaHFHLE9BRWhEaXdCLFVBQVVsTixPQUFPelgsS0FBS3RFLGNBQWN1RSxlQUVwQzBrQixVQUFVc3RELE1BQVEsR0FDbEIsSUFBSyxNQUFPdGlGLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVExVixLQUFLZ1MsTUFDN0NtcUIsVUFBVXN0RCxNQUFNL21GLEtBQUssQ0FDbkI2VyxHQUFJcFMsSUFDSnZGLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTcEgsT0FDekJxN0QsV0FBbUUsS0FBdkR6eEQsS0FBS2lHLEtBQUsvRyxPQUFPd0MsTUFBTWd3QyxXQUFXaHJDLE1BQVEsQ0FBQyxHQUFHN0ssT0FHOURnMUIsVUFBVXN0RCxNQUFNanlFLEtBQUt0RSxjQUFjdUUsZUFFbkMwa0IsVUFBVXV4QyxpQkFBbUIsR0FDN0IsSUFBSyxNQUFNdm1FLE9BQU9uSCxLQUFLMnRFLGdCQUNyQnh4QyxVQUFVdXhDLGlCQUFpQmhyRSxLQUFLLENBQUV5RSxJQUFLdWxDLElBQUs5akMsS0FBS0MsS0FBS0MsU0FBUzlJLEtBQUsydEUsZ0JBQWdCeG1FLFFBR3RGZzFCLFVBQVV5eEMsbUJBQXFCLENBQUMsY0FBZSxlQUFnQixjQUFlLGdCQUFnQnQvRCxTQUFTNnRCLFVBQVV2ckIsS0FBS3ZKLE9BQU91OEMsU0FBU3RrQyxRQUV0STZjLFVBQVUweEMsZUFBaUIsR0FDM0IsSUFBSyxNQUFNMW1FLE9BQU9uSCxLQUFLOHRFLGVBQ3lCLElBQTFDOXRFLEtBQUs4dEUsY0FBYzNtRSxLQUFLdEYsT0FBT3FLLFFBQWdCbE0sS0FBSzh0RSxjQUFjM21FLEtBQUt0RixPQUFPeU0sU0FBUzZ0QixVQUFVdnJCLEtBQUt2SixPQUFPdThDLFNBQVN0a0MsVUFDeEg2YyxVQUFVMHhDLGVBQWVuckUsS0FBSyxDQUFFeUUsSUFBS3VsQyxJQUFLOWpDLEtBQUtDLEtBQUtDLFNBQVM5SSxLQUFLOHRFLGNBQWMzbUUsS0FBS3ZGLFFBK0J6RixPQTNCQXU2QixVQUFVNHhDLGtCQUFvQm5sRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFFeEQyekIsVUFBVWtxRCwrQkFBaUN4dEUsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVlqWCxNQUNsQyxDQUNFa00sT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVOHVDLGdDQUFrQ3B5RCxXQUFXQyxXQUNyRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWXV5RCxPQUNsQyxDQUNFdDlELE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVXF5Qyx3QkFBMEIzMUQsV0FBV0MsV0FDN0NxakIsVUFBVXZyQixLQUFLdkosT0FBT284QyxVQUN0QixDQUNFNzFDLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVWdHLFNBQVd2NUIsS0FBS3NHLEtBQUsyRSxLQUN4QnNvQixTQUNULENBRUEsYUFBQXNCLENBQWU1MUIsTUFBTzYxQixVQUNwQixNQUFNcjJCLE9BQVM2QyxRQUFRQyxNQUFNdWYsYUFBYWdVLFdBQVdyMkIsT0FDakRBLE9BQU9zOEMsY0FDVGptQixTQUFTLHNCQUF3Qnh5QixPQUFPSixPQUN0Q3pELE9BQU9zOEMsYUFBZSxLQUd0QnQ4QyxPQUFPdThDLFNBQVM5NEMsU0FDbEI0eUIsU0FBUywwQkFBNEJ4eUIsT0FBT0osT0FBT3pELE9BQU91OEMsU0FBUzk0QyxRQUFVLEtBRzdDLDBDQUE5QmpELE1BQU1JLGVBQWVyRyxPQUN2Qjg3QixTQUFTLHlDQUEyQzcxQixNQUFNSSxjQUFjNndELFNBR3hDLHlDQUE5Qmp4RCxNQUFNSSxlQUFlckcsT0FDdkI4N0IsU0FBUywwQ0FBNEM3MUIsTUFBTUksY0FBYzZ3RCxTQUczRW54RCxNQUFNODFCLGNBQWM1MUIsTUFBTzYxQixTQUM3QixFQy9QSyxNQUFNMDRFLHVCQUF1Qmh4QixVQUNsQyxXQUFBejBFLElBQWdCNlQsTUFDZDdjLFNBQVM2YyxNQUNUbFosS0FBSytxRyxVQUFZLE9BQ25CLENBTUEseUJBQVd4eEYsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFDM0JHLE1BQU8sSUFDUEMsT0FBUSxJQUNSNmtELFFBQVMsQ0FBQyxvQkFDVmx1QyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGlCQUlqQixDQUdBLFlBQUlqWCxHQUNGLE1BQU8sZ0NBQWdDMVosS0FBS2lHLEtBQUs1SCxpQkFDbkQsQ0FFQSxpQkFBQXMzRCxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsQ0FNQSxhQUFNemlDLEdBRUosTUFBTUMsVUFBWXgwQixNQUFNdTBCLFVBRXhCQyxVQUFVNnBELFVBQW9DLElBQXpCMTZFLEtBQUtpRyxLQUFLMDBFLFdBQy9COXBELFVBQVVtNkUscUJBQXVCbjZFLFVBQVU2cEQsVUFBaUMsY0FBckIxNkUsS0FBSzlGLE9BQU9tRSxLQUVuRXd5QixVQUFVNXpCLFFBQVV4QixpQkFBaUJ3RSw4QkFDbkNELEtBQUtpRyxLQUFLaEosU0FHWjR6QixVQUFVa25DLFlBQWMsR0FDeEIsSUFBSyxNQUFPbDhELElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVExVixLQUFLeVYsaUJBQzdDMG1CLFVBQVVrbkMsWUFBWTNnRSxLQUFLLENBQ3pCNlcsR0FBSXBTLElBQ0p2RixLQUFNRixNQUNOcTdELFdBQWdELElBQXJDenhELEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVdoTCxPQUkzQ2cxQixVQUFVc3RELE1BQVEsR0FDbEIsSUFBSyxNQUFPdGlGLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVExVixLQUFLZ1MsTUFDN0NtcUIsVUFBVXN0RCxNQUFNL21GLEtBQUssQ0FDbkI2VyxHQUFJcFMsSUFDSnZGLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTcEgsT0FDekJxN0QsV0FBbUUsS0FBdkR6eEQsS0FBS2lHLEtBQUsvRyxPQUFPd0MsTUFBTWd3QyxXQUFXaHJDLE1BQVEsQ0FBQyxHQUFHN0ssT0EyQjlELE9BeEJBZzFCLFVBQVVzdEQsTUFBTWp5RSxLQUFLdEUsY0FBY3VFLGVBRW5DMGtCLFVBQVVvNkUsY0FBZ0JqckcsS0FBS2lHLEtBQUtsSyxPQUFPOEssV0FBVzNQLFFBQ3REMjVCLFVBQVVxNkUsZUFDUGxyRyxLQUFLaUcsS0FBS2xLLE9BQU84SyxXQUFXdFAsVUFDNUJ5SSxLQUFLaUcsS0FBS2xLLE9BQU84SyxXQUFXdlAsU0FFL0J1NUIsVUFBVWtxRCwrQkFBaUN4dEUsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVlqWCxNQUNsQyxDQUNFa00sT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVOHVDLGdDQUFrQ3B5RCxXQUFXQyxXQUNyRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWXV5RCxPQUNsQyxDQUNFdDlELE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVWdHLFNBQVd2NUIsS0FBS3NHLEtBQUsyRSxLQUN4QnNvQixTQUNULENBUUEsaUJBQUEvVyxDQUFtQkMsTUFDakIxZCxNQUFNeWQsa0JBQWtCQyxNQUVuQi9aLEtBQUtWLFFBQVE2eEQsVUFFbEJwM0MsS0FBS3JhLEtBQUssa0JBQWtCK3hCLE1BQU16eEIsS0FBS2d6RCxlQUFlOTVELEtBQUs4RyxNQUM3RCxDQUlBLG9CQUFNZ3pELENBQWdCejJELE9BQ3BCQSxNQUFNRSxpQkFDTixNQUFNNkosV0FBYS9KLE1BQU1JLGNBQWNFLFFBQVEsa0JBQWtCRSxRQUFRd3lDLGVBQ25FdnZDLEtBQUtpRyxLQUFLSSxlQUNkQyxXQUNBNkksVUFBVTVTLE9BRWQsQ0E2REEsbUJBQU00MUIsQ0FBZTUxQixNQUFPNjFCLFVBQzFCLE1BQU10ckIsVUFBWXNyQixTQUFTLHFCQUF1QnB5QixLQUFLaUcsS0FBS2xLLE9BQU8rSyxVQUNuRSxHQUFJOUcsS0FBS2lHLEtBQUtsSyxPQUFPOEssWUFBWTNQLFFBQVMsQ0FDeEMsTUFBTStQLGVBQWlCbXJCLFNBQVMsMEJBQTRCcHlCLEtBQUtpRyxLQUFLbEssT0FBT2tMLGVBQzdFbXJCLFNBQVM5N0IsS0FBTzJRLGVBQWlCLEtBQU9ILFVBQVksR0FDdEQsTUFDRXNyQixTQUFTOTdCLEtBQU93USxVQUVsQixPQUFPekssTUFBTTgxQixjQUFjNTFCLE1BQU82MUIsU0FDcEMsRUNwTUssTUFBTSs0RSx1QkFBdUJyeEIsVUFDbEMseUJBQVd2Z0UsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRHLFNBQVUsK0NBQ1ZELFFBQVMsQ0FBQyxPQUFRLE9BQVEsU0FDMUJHLE1BQU8sSUFDUEMsT0FBUSxPQUNSb21ELFdBQVcsRUFDWHZCLFFBQVMsQ0FBQyxTQUNWbHVDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGNBQ2JDLGdCQUFpQixRQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQWdsQyxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsQ0FFQSxhQUFNemlDLEdBQ0osTUFBTUMsVUFBWXgwQixNQUFNdTBCLFVBcUJ4QixPQXBCQUMsVUFBVTZwRCxVQUFvQyxJQUF6QjE2RSxLQUFLaUcsS0FBSzAwRSxXQUMvQjlwRCxVQUFVZ0csU0FBV3Y1QixLQUFLc0csS0FBSzJFLEtBQy9Cc29CLFVBQVVvSSxRQUFVajVCLEtBQUtpRyxLQUFLZ3pCLFFBRTlCcEksVUFBVWtxRCwrQkFBaUN4dEUsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVlqWCxNQUNsQyxDQUNFa00sT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVOHVDLGdDQUFrQ3B5RCxXQUFXQyxXQUNyRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWXV5RCxPQUNsQyxDQUNFdDlELE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJaEJ0Z0MsU0FDVCxDQUVBLGlCQUFBL1csQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFDeEJBLEtBQUtyYSxLQUFLLFdBQVcreEIsT0FBTWwxQixPQUFTeUQsS0FBS2lsRyxXQUFXMW9HLFNBQ3BEd2QsS0FBS3JhLEtBQUssZUFBZSt4QixPQUFNbDFCLFFBQzdCQSxNQUFNRSxpQkFDTnVELEtBQUtpRyxLQUFLdWhGLE1BQUssR0FFbkIsQ0FRQSxVQUFBeWQsQ0FBWTFvRyxPQUNWQSxNQUFNRSxpQkFFTkYsTUFBTXUvRCxrQkFFTixPQURxQnR3QyxFQUFFanZCLE1BQU1JLGVBQ1R5a0csT0FBTzNqRSxRQUFRLFFBQ3JDLEVDbEVLLE1BQU0ydEUsd0JBQXdCdHhCLFVBSW5DLHlCQUFXdmdFLEdBQ1QsT0FBTzNhLFFBQVFDLE1BQU0yYSxZQUFZbmQsTUFBTWtkLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxRQUFTLFVBQzNCQyxTQUFVLDJDQUNWRSxNQUFPLElBQ1BDLE9BQVEsSUFDUjZrRCxRQUFTLENBQUMsb0JBQ1ZsdUMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQTdXLENBQW1CQyxNQUNqQjFkLE1BQU15ZCxrQkFBa0JDLE1BRXhCQSxLQUNHcmEsS0FBSyxtQkFDTCt4QixPQUFNZ3FDLElBQU1oZ0UsaUJBQWlCYSxxQkFBcUJtL0QsR0FBSXo3RCxLQUFLaUcsT0FDaEUsQ0FFQSxpQkFBQTB2RCxHQUNFLE1BQU10QyxjQUFnQmgzRCxNQUFNczVELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlcnpELE1BQ2xDcXpELGFBQ1QsQ0FLQSxhQUFNemlDLEdBQ0osTUFBTUMsVUFBWXgwQixNQUFNdTBCLFVBQ3hCQyxVQUFVNXpCLFFBQVV4QixpQkFBaUJ3RSw4QkFBOEJELEtBQUtpRyxLQUFLaEosUUFBUyxDQUFFN0MsUUFBUSxJQUVoR3kyQixVQUFVZ3FELGVBQWlCLEdBRTNCLElBQUssTUFBT2gvRSxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRcEssS0FBS2lHLEtBQUtsSyxPQUFPc0MsTUFDckRqSSxPQUNGeTZCLFVBQVVncUQsZUFBZXpqRixLQUN2QjFDLEtBQUsyMkcsV0FBV3h2RyxLQUFPbkgsS0FBSzIyRyxXQUFXeHZHLEtBQU8sTUE4QnBELE9BekJBZzFCLFVBQVVrcUQsK0JBQWlDeHRFLFdBQVdDLFdBQ3BEcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZalgsTUFDbEMsQ0FDRWtNLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVXk2RSwrQkFBaUMvOUYsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVkrK0QsTUFDbEMsQ0FDRTlwRSxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVU4dUMsZ0NBQWtDcHlELFdBQVdDLFdBQ3JEcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZdXlELE9BQ2xDLENBQ0V0OUQsT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVZ0csU0FBV3Y1QixLQUFLc0csS0FBSzJFLEtBQ3hCc29CLFNBQ1QsRUMvRUssTUFBTTA2RSx3QkFBd0J6eEIsVUFJbkMseUJBQVd2Z0UsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsVUFDM0JDLFNBQVUsMkNBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxJQUNSNmtELFFBQVMsQ0FBQyxvQkFDVmx1QyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGlCQUlqQixDQUVBLGlCQUFBZ2xDLEdBQ0UsTUFBTXRDLGNBQWdCaDNELE1BQU1zNUQsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVyekQsTUFDbENxekQsYUFDVCxDQUtBLGFBQU16aUMsR0FDSixNQUFNQyxVQUFZeDBCLE1BQU11MEIsVUFFeEJDLFVBQVVncUQsZUFBaUIsR0FFM0IsSUFBSyxNQUFPaC9FLElBQUt6RixTQUFVd0osT0FBT3dLLFFBQVFwSyxLQUFLaUcsS0FBS2xLLE9BQU9zQyxNQUNyRGpJLE9BQ0Z5NkIsVUFBVWdxRCxlQUFlempGLEtBQ3ZCMUMsS0FBSzgyRyxXQUFXM3ZHLEtBQU9uSCxLQUFLODJHLFdBQVczdkcsS0FBTyxNQThCcEQsT0F6QkFnMUIsVUFBVWtxRCwrQkFBaUN4dEUsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVlqWCxNQUNsQyxDQUNFa00sT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVeTZFLCtCQUFpQy85RixXQUFXQyxXQUNwRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWSsrRCxNQUNsQyxDQUNFOXBFLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVTh1QyxnQ0FBa0NweUQsV0FBV0MsV0FDckRxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVl1eUQsT0FDbEMsQ0FDRXQ5RCxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVVnRyxTQUFXdjVCLEtBQUtzRyxLQUFLMkUsS0FDeEJzb0IsU0FDVCxFQ3pFSyxNQUFNNDZFLHlCQUF5QmgyQyxlQUNwQyx5QkFBV2w4QyxHQUNULE9BQU8zYSxRQUFRQyxNQUFNMmEsWUFBWW5kLE1BQU1rZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsVUFBVyxRQUFTLE9BQVEsV0FDOUNHLE1BQU8sSUFDUEMsT0FBUSxJQUNSb21ELFdBQVcsRUFDWHZtRCxTQUFVLDZDQUNWMlcsU0FBVSxDQUFDLENBQUVDLGFBQWMsU0FBVUMsYUFBYyxjQUNuREMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGlCQUlqQixDQUVBLGFBQU1DLEdBSUosTUFBTUMsZ0JBQWtCeDBCLE1BQU11MEIsVUFFOUJDLFVBQVVocUIsV0FBYSxHQUNuQjdHLEtBQUs5RixNQUFNNkIsT0FBTzhLLFdBQVc2a0csT0FDL0I3NkUsVUFBVWhxQixXQUFXelAsS0FBS2tHLEtBQUtDLEtBQUtDLFNBQVMsc0JBRy9DLE1BQU1tb0UsU0FBVzNsRSxLQUFLOUYsTUFBTXVGLFFBQVEsT0FBUSxZQTBCNUMsT0F6QnFDb3hCLFVBQVU4MEMsY0FBdkIsSUFBYkEsVUFDZUEsU0FDdEI5MEMsVUFBVTgwQyxTQUNaOTBDLFVBQVV2eEIsUUFBUXVhLE9BQVMsSUFDdEJnWCxVQUFVdnhCLFFBQVF1YSxPQUFTLE9BRWxDZ1gsVUFBVWtxRCwrQkFBaUN4dEUsV0FBV0MsV0FDcERxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVlqWCxNQUNsQyxDQUNFa00sT0FBTyxFQUNQczdELFFBQVMvc0MsVUFBVXNnQyxXQUl2QnRnQyxVQUFVeTZFLCtCQUFpQy85RixXQUFXQyxXQUNwRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWSsrRCxNQUNsQyxDQUNFOXBFLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FPaEJ0Z0MsU0FDVCxDQUVBLGlCQUFBL1csQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFDeEJBLEtBQUtyYSxLQUFLLGNBQWMreEIsT0FBTW52QixlQUFrQnRDLEtBQUsyckcsZ0JBQ3JENXhGLEtBQ0dyYSxLQUFLLGlCQUNMK3hCLE9BQU1udkIsbUJBQXFCdEMsS0FBSzRyRyxlQUFlcnZHLFNBQ2xEd2QsS0FBS3JhLEtBQUssa0JBQWtCK3hCLE1BQU16eEIsS0FBSzZyRyxnQkFBZ0IzeUcsS0FBSzhHLE1BTTlELENBRUEscUJBQU02ckcsR0FDSixNQUFNbG1DLFNBQVczbEUsS0FBSzlGLE1BQU11RixRQUFRLE9BQVEsWUFDeENrbUUsVUFDRjNsRSxLQUFLOHJHLFFBQVU5ckcsS0FBSzR1RCxTQUFTLzBDLE9BQzdCN1osS0FBSzR1RCxTQUFTLzBDLE9BQVMsUUFFdkI3WixLQUFLNHVELFNBQVMvMEMsT0FBUzdaLEtBQUs4ckcsU0FBVyxVQUVuQzlyRyxLQUFLOUYsTUFBTWk3QixRQUFRLE9BQVEsWUFBYXd3QyxTQUNoRCxDQUVBLGlCQUFNZ21DLEdBQ0osTUFBTW5TLFVBQVk1NkYsUUFBUUMsTUFBTXVPLFVBQzlCcE4sS0FBSzlGLE1BQU02QixPQUFPQyxRQUFRQyxNQUFNdTlGLFdBQWEsSUFFL0NBLFVBQVVwaUcsS0FBSyxDQUFFZCxLQUFNLEtBQU1GLE1BQU8sYUFDOUI0SixLQUFLOUYsTUFBTWdFLE9BQU8sQ0FBRSxpQ0FBa0NzN0YsV0FDOUQsQ0FFQSxvQkFBTW9TLENBQWdCcnZHLE9BQ3BCLE1BRU00Z0IsTUFGUzVnQixNQUFNSSxjQUNHRSxRQUFRLFVBQ1RFLFFBQVFvZ0IsTUFDekJxOEUsVUFBWTU2RixRQUFRQyxNQUFNdU8sVUFDOUJwTixLQUFLOUYsTUFBTTZCLE9BQU9DLFFBQVFDLE1BQU11OUYsV0FBYSxNQUUxQ0EsWUFDTEEsVUFBVXJqRSxPQUFPaFosTUFBTyxTQUNsQm5kLEtBQUs5RixNQUFNZ0UsT0FBTyxDQUFFLGlDQUFrQ3M3RixZQUM5RCxDQUVBLFlBQUE3Z0MsR0FDRXQ4RCxNQUFNczhELGNBRVIsQ0FLQSxhQUFBeG1DLENBQWU1MUIsTUFBTzYxQixVQUNwQixNQUFNcjJCLE9BQVM2QyxRQUFRQyxNQUFNdWYsYUFBYWdVLFdBQVdyMkIsT0FDakRBLE9BQU9DLFFBQVFDLE1BQU11OUYsWUFDdkJwbkUsU0FBUyxrQ0FBb0N4eUIsT0FBT0osT0FDbER6RCxPQUFPQyxRQUFRQyxNQUFNdTlGLFdBQWEsS0FJdENuOUYsTUFBTTgxQixjQUFjNTFCLE1BQU82MUIsU0FDN0IsRUNuSEssTUFBTTI1RSx3QkFBd0JqeUIsVUFJbkMseUJBQVd2Z0UsR0FDVCxPQUFPM2EsUUFBUUMsTUFBTTJhLFlBQVluZCxNQUFNa2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFDM0JHLE1BQU8sSUFDUEMsT0FBUSxJQUNSMlcsS0FBTSxDQUNKLENBQ0VDLFlBQWEsY0FDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLFlBSWpCLENBS0EsWUFBSWpYLEdBRUYsTUFBTyxnREFDVCxDQUVBLGlCQUFBaThDLEdBQ0UsTUFBTXRDLGNBQWdCaDNELE1BQU1zNUQsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVyekQsTUFDbENxekQsYUFDVCxDQU1BLGFBQU16aUMsR0FDSixNQUFNQyxVQUFZeDBCLE1BQU11MEIsVUFFeEJDLFVBQVVtN0UsWUFBYyxHQUV4Qm43RSxVQUFVNnBELFVBQW9DLElBQXpCMTZFLEtBQUtpRyxLQUFLMDBFLFdBQzNCOXBELFVBQVU2cEQsV0FDWjdwRCxVQUFVb3lCLGNBQWdCampELEtBQUs5RixNQUFNK29ELGNBQ3JDcHlCLFVBQVVpeUIsZUFBaUI5aUQsS0FBSzlGLE1BQU00b0QsZUFDdENqeUIsVUFBVW03RSxZQUFjaHNHLEtBQUtpRyxLQUFLL0wsTUFBTWdVLE1BQU0zWCxRQUFPMFAsUUFDakMsVUFBZEEsS0FBSzVILE9BQ0g0SCxLQUFLbEssT0FBTzhLLFdBQVd4UCxVQU8vQnc1QixVQUFVbTdFLFlBQVk5L0YsS0FBS3RFLGNBQWN1RSxnQkFHM0Mwa0IsVUFBVWtuQyxZQUFjLEdBQ3hCLElBQUssTUFBT2w4RCxJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRMVYsS0FBS21aLGtCQUM3Q2dqQixVQUFVa25DLFlBQVkzZ0UsS0FBSyxDQUN6QjZXLEdBQUlwUyxJQUNKdkYsS0FBTUYsTUFDTnE3RCxXQUFnRCxJQUFyQ3p4RCxLQUFLaUcsS0FBS2xLLE9BQU84SyxXQUFXaEwsT0FJM0NnMUIsVUFBVXN0RCxNQUFRLEdBQ2xCLElBQUssTUFBT3RpRixJQUFLekYsU0FBVXdKLE9BQU93SyxRQUFRMVYsS0FBS2dTLE1BQzdDbXFCLFVBQVVzdEQsTUFBTS9tRixLQUFLLENBQ25CNjBHLE1BQU9qc0csS0FBS2lHLEtBQUtsSyxPQUFPa3dHLE1BQU1wd0csTUFBUSxFQUN0Q29TLEdBQUlwUyxJQUNKdkYsS0FBTWdILEtBQUtDLEtBQUtDLFNBQVNwSCxPQUN6QnE3RCxXQUFtRSxLQUF2RHp4RCxLQUFLaUcsS0FBSy9HLE9BQU93QyxNQUFNZ3dDLFdBQVdockMsTUFBUSxDQUFDLEdBQUc3SyxPQW1DOUQsT0FoQ0FnMUIsVUFBVXN0RCxNQUFNanlFLEtBQUt0RSxjQUFjdUUsZUFFbkMwa0IsVUFBVWduQyxvQkFDNkIsSUFBckM3M0QsS0FBS2lHLEtBQUtsSyxPQUFPOEssV0FBV3pPLE9BQ1MsSUFBckM0SCxLQUFLaUcsS0FBS2xLLE9BQU84SyxXQUFXMU8sT0FDVyxJQUF2QzZILEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVc5TyxPQUU5Qjg0QixVQUFVa3FELCtCQUFpQ3h0RSxXQUFXQyxXQUNwRHFqQixVQUFVdnJCLEtBQUt2SixPQUFPc1IsWUFBWWpYLE1BQ2xDLENBQ0VrTSxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVVxN0UsaUNBQW1DMytGLFdBQVdDLFdBQ3REcWpCLFVBQVV2ckIsS0FBS3ZKLE9BQU9zUixZQUFZblcsUUFDbEMsQ0FDRW9MLE9BQU8sRUFDUHM3RCxRQUFTL3NDLFVBQVVzZ0MsV0FJdkJ0Z0MsVUFBVTh1QyxnQ0FBa0NweUQsV0FBV0MsV0FDckRxakIsVUFBVXZyQixLQUFLdkosT0FBT3NSLFlBQVl1eUQsT0FDbEMsQ0FDRXQ5RCxPQUFPLEVBQ1BzN0QsUUFBUy9zQyxVQUFVc2dDLFdBSXZCdGdDLFVBQVVnRyxTQUFXdjVCLEtBQUtzRyxLQUFLMkUsS0FDeEJzb0IsU0FDVCxDQVFBLGlCQUFBL1csQ0FBbUJDLE1BQ2pCMWQsTUFBTXlkLGtCQUFrQkMsTUFHbkIvWixLQUFLVixRQUFRNnhELFdBQ2xCcDNDLEtBQUtyYSxLQUFLLGtCQUFrQit4QixNQUFNenhCLEtBQUtnekQsZUFBZTk1RCxLQUFLOEcsT0FDM0QrWixLQUFLcmEsS0FBSyxvQkFBb0IreEIsTUFBTXp4QixLQUFLbXNHLGlCQUFpQmp6RyxLQUFLOEcsT0FDakUsQ0FNQSxvQkFBTWd6RCxDQUFnQnoyRCxPQUNwQkEsTUFBTUUsaUJBQ04sTUFBTTZKLFdBQWEvSixNQUFNSSxjQUFjRSxRQUFRLGtCQUFrQkUsUUFBUXd5QyxlQUNuRXZ2QyxLQUFLaUcsS0FBS0ksZUFDZEMsV0FDQTZJLFVBQVU1UyxPQUVkLENBRUEsc0JBQU00dkcsQ0FBa0I1dkcsT0FDdEJBLE1BQU1FLGlCQUNOLE1BQU02SixXQUFhL0osTUFBTUksY0FBY0UsUUFBUSxvQkFBb0JFLFFBQVF3eUMsZUFDckV2dkMsS0FBS2lHLEtBQUtJLGVBQWVDLFdBQ2pDLEVDcEpGaEUsZUFBZThwRyxjQUFlNXJHLEdBQzVCLE1BQU1pbUYsTUFBUWptRixFQUFFN0QsY0FBY3JHLEtBQUtvWixRQUFRLHFCQUFzQixNQUMzRDlZLElBQU00MEIsRUFBRSxzQkFBd0JpN0QsTUFBUSxLQUN4Q3BvRixLQUFPekgsSUFBSThJLEtBQUssdUJBQXlCK21GLE1BQVEsS0FBS3JsRCxNQUN0RDlxQyxLQUFPTSxJQUFJOEksS0FBSyxzQkFBc0IwaEMsTUFDdENpckUsV0FBYXoxRyxJQUFJOEksS0FBSyxzQkFBd0IrbUYsTUFBUSxLQUM1RCxJQUFJM3VDLElBQU0sR0FDVixPQUFRejVDLE1BQ04sSUFBSyxRQUNMLElBQUssUUFDTCxJQUFLLFNBQ0hndUcsV0FBV3h2RyxRQUFRLGtCQUFrQitYLE9BQ3JDa2pDLElBQU11MEQsV0FBV2pyRSxNQUNqQixNQUNGLFFBQ0VpckUsV0FBV3h2RyxRQUFRLGtCQUFrQm9oRSxPQUV6QyxNQUFNL3ZELFlBQWM1USxLQUFLb2hELE1BQU14aEQsSUFBSXRHLElBQUkwTyxLQUFLLFlBQVlzNUMsZ0JBQ3hELFFBQXFCLElBQVYxd0MsTUFDVCxPQUVGLE1BQU0wRyxLQUFPLEdBQ1AwM0YsV0FBYSxJQUFJM2tHLE9BQU9BLE9BQU8rRyxPQUFPcFksTUFBTyxLQUNuRCxJQUFLLE1BQU8sQ0FBRTJQLFFBQVNyRyxPQUFPd0ssUUFBUThELE9BQVEsQ0FDNUMsSUFBSTNYLFFBQVMsRUFPYixHQU5JQSxRQUFtQixLQUFURCxPQUNaQyxPQUFTMFAsS0FBSzNQLEtBQUt1UCxNQUFNeW1HLGFBRXZCLzFHLFFBQW1CLEtBQVQ4SCxPQUNaOUgsT0FBUzBQLEtBQUs1SCxPQUFTQSxNQUVyQjlILFFBQWtCLEtBQVJ1aEQsSUFBWSxDQUN4QixNQUFNcHhDLEtBQU9ULEtBQUsvRyxPQUFPd0MsTUFBTWd3QyxXQUFXaHJDLEtBQ3RDQSxNQUFROUcsT0FBT21FLEtBQUsyQyxNQUFNOUYsT0FBUyxJQUFPOEYsS0FBS294QyxPQUNqRHZoRCxRQUFTLEVBRWIsQ0FDSUEsUUFDRnFlLEtBQUt4ZCxLQUFLNk8sS0FBS2dJLEdBRW5CLENBQ0FyWCxJQUFJOEksS0FBSyx3QkFBd0I2MEQsTUFBSyxXQUNwQ3YwRCxLQUFLdS9CLE1BQU1DLFFBQVU1cUIsS0FBSzVSLFNBQVNoRCxLQUFLakQsUUFBUSsyQyxZQUM1QyxPQUNBLE1BQ04sR0FDRixDQzlDTyxNQUFNeTRELE1BQ1gsV0FBT3gvRSxHQUNMbnFCLE9BQU95dUMsTUFBTW03RCxzQkFBc0JwMUcsS0FBSyx3QkFFeEN3TCxPQUFPd0MsS0FBS29uRyxzQkFBc0JwMUcsS0FBSyx3QkFDdkN3TCxPQUFPd0MsS0FBS29uRyxzQkFBc0JwMUcsS0FBSyxlQUN2Q3dMLE9BQU93QyxLQUFLb25HLHNCQUFzQnAxRyxLQUFLLHFCQUN2Q3dMLE9BQU82cEcsYUFBYUQsc0JBQXNCcDFHLEtBQUssd0JBQy9Dd0wsT0FBT29xRCxNQUFNdy9DLHNCQUFzQnAxRyxLQUFLLHdCQUN4Q3dMLE9BQU84cEcsU0FBU0Ysc0JBQXNCcDFHLEtBQUssd0JBQzNDd0wsT0FBTytwRyxVQUFVSCxzQkFBc0JwMUcsS0FBSyx3QkFDNUN3TCxPQUFPZ3FHLE1BQU1KLHNCQUFzQnAxRyxLQUFLLHdCQUN4Q2tHLEtBQUt2QixPQUFPaW5CLElBQU0sQ0FDaEJDLE1BQU9zcEYsTUFFWCxDQU1BLGVBQU8zOEIsR0FDTCxPQUFPLElBQUlqb0UsT0FBTyxLQUFPL0gsT0FBT21FLEtBQUt3b0csTUFBTU0sb0JBQW9CeG9HLEtBQUssS0FBTyxvQkFDN0UsQ0FPQSxnQkFBT2t0RCxDQUFXMWlELFVBQ2hCLElBQUssTUFBTXhRLFFBQVFrdUcsTUFBTU8sbUJBQ3ZCLEdBQUlqK0Ysb0JBQW9CMDlGLE1BQU1PLG1CQUFtQnp1RyxNQUMvQyxPQUFPQSxLQUFPLEtBQU93USxTQUFTeFEsTUFBUSxJQUFNLElBR2hELE1BQU8sRUFDVCxDQU9BLGNBQU9nekQsQ0FBU3hpRCxVQUNkLE9BQU8wOUYsTUFBTWg3QyxVQUFVMWlELFVBQVlqSCxjQUFjaXBELFlBQVloaUQsU0FBU3ZZLEtBQ3hFLENBT0Esd0JBQU84c0YsQ0FBbUJuMUUsSUFDeEIsR0FBSUEsR0FBSSxDQUNOLE1BQU1wUyxJQUFNb1MsR0FBR3lCLFFBQVEsY0FBZSxJQUN0QyxHQUF1QixNQUFuQjdULElBQUlxakIsUUFBUSxHQUNkLE9BQU9yakIsR0FFWCxDQUNBLE1BQU8sRUFDVCxDQU9BLDZCQUFPZzdDLENBQXdCaG9DLFVBQzdCLE9BQU8wOUYsTUFBTW5wQixrQkFBa0J2MEUsU0FBUzNQLE9BQU93QyxNQUFNZ3dDLFdBQVd6akMsR0FDbEUsQ0FPQSxjQUFPOCtGLENBQVNqMUQsS0FDZCxPQUFZLElBQVJBLElBQ0t4NkMsS0FBS0MsS0FBS0MsU0FBUyxjQUNULElBQVJzNkMsTUFDVEEsSUFBTXg2QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUczQkksS0FBS0MsS0FBS3lXLE9BQU90ZixLQUFLZ1MsS0FBS294QyxNQUFRLG1DQUFvQyxDQUFFQSxNQUNsRixDQVlBLDRCQUFhQyxFQUFpQixTQUFVLEtBQVN6NkMsS0FBS0MsS0FBS2kwRCxLQUFJLEtBQVEsRUFBSSxjQUFpQixFQUFJLGFBQWdCLEdBQVUsQ0FBQyxHQUN6SCxJQUFJdGpELE1BQVEsR0FDWixNQUFNbXZFLE9BQVN2OUMsU0FBU3ZwQyxRQUFPeWhELElBQW9CLGlCQUFQQSxLQUc1QyxHQUZBOXBDLE1BQVE0eEIsU0FBU3ZwQyxRQUFPeWhELElBQW9CLGlCQUFQQSxLQUVqQ3FsQyxPQUFPejhFLE9BQVEsQ0FDakIsTUFBTW1OLFlBQWN3K0YsTUFBTXoxRCxtQkFBbUIsQ0FBRUMsWUFBYXcxRCxNQUFNUyxlQUFlM3ZCLFFBQVNoL0UsS0FBTSxJQUFLbXpELEtBQU0xWixJQUFLbTFELGFBQWMxdUQsY0FDeEhwbkIsSUFBTSxHQUNaLElBQUssTUFBTWxVLFNBQVNvNkQsT0FBUSxDQUMxQixNQUFNcDNFLEtBQU84SCxNQUFNck8sTUFBSzRnQixHQUFLQSxFQUFFcGhCLE1BQU13QyxLQUFLZ3dDLFVBQVV6akMsS0FBT2dWLFFBQ3ZEaGQsTUFDRmt4QixJQUFJLy9CLEtBQUs2TyxLQUViLENBQ0EsR0FBSWt4QixJQUFJdjJCLE9BQVN5OEUsT0FBT3o4RSxPQUFRLENBQzlCLE1BQU1zc0csV0FBYSxHQUNuQixJQUFLLE1BQU14OUMsT0FBT3Y0QixJQUNoQisxRSxXQUFXOTFHLEtBQUtzNEQsSUFBSXh3RCxNQUFNd0MsS0FBS2d3QyxVQUFVempDLEtBRS9CLElBQVI2cEMsTUFDRkEsSUFBTXg2QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUVsQzZMLEdBQUdDLGNBQWNzSyxLQUFLaFcsS0FBS0MsS0FBS3lXLE9BQU8sMkNBQTRDLENBQUVxcEUsT0FBUUEsT0FBTzltRixRQUFPcVYsSUFBTXNoRyxXQUFXbHFHLFNBQVM0SSxLQUFJdkgsS0FBSyxNQUFPbXRELEtBQU0xWixJQUFLeTBELE1BQU1RLFFBQVFqMUQsT0FDaEwsQ0FDQTVwQyxNQUFRQSxNQUFNbkMsT0FBT29yQixJQUN2QixDQUNBLE9BQU9qcEIsS0FDVCxDQVNBLHNCQUFPdXJDLENBQWlCeDJCLE1BQU8rZCxNQUM3QixJQUFJa08sU0FBVyxHQUNmLE1BQU13aUIsVUFBWTl5RCxRQUFRQyxNQUFNOHlELGNBQWNyMEQsS0FBS0MsS0FBS3EwRCxhQUFhbHdELEtBQUttd0QsVUFBVTl0RCxNQUlwRixZQUhnQyxJQUFyQjJ0RCxVQUFVenVDLFNBQ25CaXNCLFNBQVd3aUIsVUFBVXp1QyxjQUVRLElBQWhCK2QsS0FBS3pxQyxPQUF5QnFKLE9BQU9KLE9BQU93aEMsTUFBUUEsTUFBTXpxQyxRQUFPK3BCLEdBQUtBLEVBQUVwaEIsT0FBT3dDLE1BQU1nd0MsV0FBV3pqQyxLQUFPZ1YsT0FBdUIsS0FBYmlzQixVQUFtQkEsV0FBYTV1QixFQUFFaHFCLE1BQ3BLLENBUUEscUJBQU8wMkcsQ0FBZ0IzdkIsUUFDckIsR0FBc0IsaUJBQVhBLE9BQ1RBLE9BQVMsQ0FBQ0EsYUFDTCxRQUFzQixJQUFYQSxRQUFtRCxtQkFBbEJBLE9BQU85bUYsT0FDeEQsT0FFRixNQUFNNDJHLE9BQVMsQ0FBQyxFQUNWQyxJQUFNYixNQUFNMzhCLFdBQ2xCLElBQUssTUFBTXR2RCxLQUFLKzhELE9BQVEsQ0FDdEIsTUFBTXhoRixJQUFNeWtCLEVBQUV6YSxNQUFNdW5HLEtBQ2hCdnhHLFdBQzRCLElBQW5Cc3hHLE9BQU90eEcsSUFBSSxNQUNwQnN4RyxPQUFPdHhHLElBQUksSUFBTSxDQUFDLFFBRWtCLElBQTNCc3hHLE9BQU90eEcsSUFBSSxJQUFJQSxJQUFJLE1BQzVCc3hHLE9BQU90eEcsSUFBSSxJQUFJQSxJQUFJLElBQU0sSUFFM0JzeEcsT0FBT3R4RyxJQUFJLElBQUlBLElBQUksSUFBSXpFLEtBQUt5RSxJQUFJLElBSXBDLENBQ0EsTUFBTXd4RyxXQUFhLEdBQ25CLElBQUssTUFBTXRxRyxLQUFLb3FHLE9BQVEsQ0FDdEIsTUFBTXZwRCxJQUFNLEdBQ1osSUFBSyxNQUFNenRELEtBQUtnM0csT0FBT3BxRyxHQUNqQm9xRyxPQUFPcHFHLEdBQUc1TSxHQUFHeUssT0FBUyxFQUN4QmdqRCxJQUFJeHNELEtBQUtqQixTQUFrQmczRyxPQUFPcHFHLEdBQUc1TSxHQUFHa08sS0FBSyxLQUFPLEtBRXBEdS9DLElBQUl4c0QsS0FBS2pCLEVBQUksTUFBUWczRyxPQUFPcHFHLEdBQUc1TSxHQUFHa08sS0FBSyxLQUd2Q3UvQyxJQUFJaGpELE9BQVMsRUFDZnlzRyxXQUFXajJHLEtBQUsyTCxTQUFrQjZnRCxJQUFJdi9DLEtBQUssS0FBTyxLQUVsRGdwRyxXQUFXajJHLEtBQUsyTCxFQUFJLE1BQVE2Z0QsSUFBSXYvQyxLQUFLLElBRXpDLENBQ0EsT0FBSWdwRyxXQUFXenNHLE9BQVMsRUFDZixJQUFJK0csT0FBTyxLQUFPMGxHLFdBQVdocEcsS0FBSyxLQUFPLE1BRTNDLElBQUlzRCxPQUFPLElBQU0wbEcsV0FBV2hwRyxLQUFLLElBQU0sSUFDaEQsQ0FtQkEsOEJBQWFpcEcsRUFBbUIsWUFBYSxLQUFNLEtBQVNod0csS0FBS0MsS0FBS2kwRCxLQUFJLEtBQVEsRUFBSyxNQUFVLFFBQU8sY0FBaUIsRUFBSSxhQUFnQixHQUFVLENBQUMsR0FDdEosSUFBS3phLFlBQ0gsTUFBTyxHQUVULE1BQU14MEMsT0FBUyxHQUVmLElBQUl6QixNQUFRLEVBVVosR0FUSXk5QyxjQUNFLENBQUMsUUFBUyxNQUFPLFNBQVN2N0MsU0FBU292RCxRQUNyQ3R4RCxRQUVFLENBQUMsUUFBUyxNQUFPLGVBQWVrQyxTQUFTb3ZELFNBQzNDdHhELE9BQWdCeEQsS0FBS29oRCxNQUFNbi9DLE9BSTNCLENBQUMsUUFBUyxNQUFPLFNBQVN5RCxTQUFTb3ZELE9BQVEsQ0FDN0MsTUFBTUYscUJBQXVCcTZDLE1BQU1nQixtQkFBbUIsQ0FBRXgyRCxZQUFhMTRDLEtBQU1tekQsS0FBTTFaLElBQUttMUQsYUFBY08sWUFBYTFzRyxRQUNqSCxHQUFjLFVBQVZzeEQsT0FBcUJGLGVBQWV0eEQsT0FJdEMsT0FISTI5QyxhQUNGa3ZELGdCQUFnQkMsbUJBQW1CLENBQUVyd0csTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyx5QkFBMEJtd0csSUFBSyxNQUV6RjN0RyxLQUFLNHRHLGVBQWUxN0MsZUFBZ0IrNkMsY0FBeUIsT0FBVHo3QyxNQUU3RGp2RCxPQUFPNHpCLE9BQU8sRUFBRyxLQUFNKzdCLGVBQ3pCLENBRUEsR0FBSSxDQUFDLFFBQVMsTUFBTyxlQUFlbHZELFNBQVNvdkQsT0FBUSxDQUNuRCxNQUFNeTdDLHlCQUEyQnRCLE1BQU11Qix1QkFBdUIsQ0FBRS8yRCxZQUFhMTRDLEtBQU1tekQsS0FBTTFaLElBQUttMUQsYUFBY08sWUFBYTFzRyxRQUV6SHlCLE9BQU80ekIsT0FBTzV6QixPQUFPM0IsT0FBUSxLQUFNaXRHLG1CQUNyQyxDQU1BLE9BSkl0dkQsYUFDRmt2RCxnQkFBZ0JDLG1CQUFtQixDQUFFcndHLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMseUJBQTBCbXdHLElBQUssTUFHekYzdEcsS0FBSzR0RyxlQUFlcnJHLE9BQVEwcUcsY0FBeUIsT0FBVHo3QyxLQUNyRCxDQWlCQSx5QkFBYVcsRUFBYyxNQUFPLEtBQVM3MEQsS0FBS0MsS0FBS2kwRCxLQUFJLEtBQVEsRUFBSyxNQUFVLFFBQU8sY0FBaUIsRUFBSSxhQUFnQixHQUFVLENBQUMsR0FDckksSUFBS3Z1QyxPQUEwQixpQkFBVkEsTUFDbkIsTUFBTyxHQUVULE1BQU1sYyxNQUFRa2MsTUFBTXBkLE1BQU0wbUcsTUFBTTM4QixZQUNoQyxPQUFLN29FLE9BR1EsS0FBVHlxRCxPQUNGQSxLQUFPbDBELEtBQUtDLEtBQUtpMEQsTUFFWis2QyxNQUFNZSxrQkFBa0IsQ0FBRXYyRCxZQUFhLElBQUlwdkMsT0FBTyxJQUFNQyxjQUFjQyxZQUFZb2IsT0FBUyxLQUFNNWtCLEtBQU0wSSxNQUFNLEdBQUl5cUQsS0FBTTFaLElBQUtzYSxNQUFPNjZDLGFBQWMxdUQsZUFML0ksRUFNWCxDQWNBLCtCQUFhekgsRUFBb0IsWUFBYSxLQUFNLEtBQVN4NUMsS0FBS0MsS0FBS2kwRCxLQUFJLEtBQVEsRUFBSSxjQUFpQixFQUFJLGFBQWdCLEdBQVUsQ0FBQyxHQUNySSxJQUFZLElBQVIxWixJQUVGLE9BREEvdUMsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS3lXLE9BQU8sbUNBQW9DLENBQUU4akMsSUFBS3g2QyxLQUFLQyxLQUFLQyxTQUFTLGVBQy9GLEdBRVQsTUFBTXV3RyxtQkFBcUIvdEcsS0FBS3N0RyxrQkFBa0IsQ0FBRXYyRCxZQUFhMTRDLEtBQU1tekQsS0FBTTFaLElBQUtzYSxNQUFPLE1BQU82NkMsYUFBYzF1RCxjQUU5RyxPQURzQnYrQyxLQUFLZ3VHLGdCQUFnQkQsYUFFN0MsQ0FZQSxnQkFBTzdxRixDQUFXRCxNQUFPdXVDLEtBQU9sMEQsS0FBS0MsS0FBS2kwRCxLQUFNMVosS0FBTSxFQUFNbTFELGNBQWUsR0FDekUsT0FBWSxJQUFSbjFELEtBQ0YvdUMsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS3lXLE9BQU8sbUNBQW9DLENBQUU4akMsSUFBS3g2QyxLQUFLQyxLQUFLQyxTQUFTLGVBQy9GLElBRUYrdUcsTUFBTWp1RCxjQUFjLENBQUVyN0IsTUFBT3V1QyxLQUFNMVosSUFBS20xRCxjQUNqRCxDQWFBLG9CQUFPM3VELEVBQWUsTUFBTyxLQUFTaGhELEtBQUtDLEtBQUtpMEQsS0FBSSxLQUFRLEVBQUksY0FBaUIsRUFBSSxhQUFnQixHQUFVLENBQUMsR0FDOUcsSUFBS3Z1QyxPQUEwQixpQkFBVkEsTUFDbkIsTUFBTyxHQUVULElBQVksSUFBUjYwQixJQUVGLE9BREEvdUMsR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS3lXLE9BQU8sbUNBQW9DLENBQUU4akMsSUFBS3g2QyxLQUFLQyxLQUFLQyxTQUFTLGVBQy9GLEdBRVQsTUFBTWEsS0FBTzRrQixNQUFNeFcsTUFBTSxLQUFLLEdBQ3hCc3FDLFlBQWMsSUFBSXB2QyxPQUFPLElBQU1DLGNBQWNDLFlBQVlvYixPQUFTLEtBQ3hFLE9BQU9zcEYsTUFBTXoxRCxtQkFBbUIsQ0FBRUMsWUFBYTE0QyxLQUFNbXpELEtBQU0xWixJQUFLbTFELGFBQWMxdUQsYUFDaEYsQ0FPQSxzQkFBT3l2RCxDQUFpQnRqQyxXQUN0QixNQUFNdWpDLG1CQUFxQixJQUFJeGlDLElBQy9CLElBQUssTUFBTS9iLE9BQU9nYixVQUFXLENBQzNCLE1BQU13akMsU0FBV3grQyxJQUFJandELFFBQVEsT0FBUSxjQUFjd08sR0FDbkQsR0FBSWlnRyxTQUFVLENBQ1osTUFBTUMsV0FBYUYsbUJBQW1CL3dHLElBQUlneEcsVUFDMUMsUUFBMEIsSUFBZkMsV0FBNEIsQ0FDckNGLG1CQUFtQjdsRyxJQUFJOGxHLFNBQVV4K0MsS0FDakMsUUFDRixDQU1BLEtBRGdDLE1BRmZBLElBQUlqaEMsTUFBUSxLQUUwQixNQURqQzAvRSxZQUFZMS9FLE1BQVEsS0FHeEMsU0FJRixJQUFJMi9FLFlBQWNucUcsU0FBU3lyRCxJQUFJandELFFBQVEsT0FBUSxjQUFjZ3pDLFVBQVl2MkMsT0FBT215RyxpQkFBa0IsSUFDbEdELFlBQWN0eUcsTUFBTXN5RyxhQUFlbHlHLE9BQU9teUcsaUJBQW1CRCxZQUM3RCxJQUFJRSxpQkFBbUJycUcsU0FBU2txRyxXQUFXMXVHLFFBQVEsT0FBUSxjQUFjZ3pDLFVBQVl2MkMsT0FBT215RyxpQkFBa0IsSUFDOUdDLGlCQUFtQnh5RyxNQUFNd3lHLGtCQUFvQnB5RyxPQUFPbXlHLGlCQUFtQkMsaUJBRXZFLEtBRHVCRixhQUFlRSxrQkFFcEMsU0FHRkwsbUJBQW1CN2xHLElBQUk4bEcsU0FBVXgrQyxJQUNuQyxDQUNGLENBQ0EsTUFBTyxJQUFJdStDLG1CQUFtQnp1RyxTQUNoQyxDQVFBLHFCQUFPb3VHLENBQWdCbGpDLFVBQVd1aUMsY0FDaEMsSUFBS0EsYUFDSCxPQUFPdmlDLFVBRVQsTUFBTXVqQyxtQkFBcUIsSUFBSXhpQyxJQUMvQixJQUFLLE1BQU0vYixPQUFPZ2IsVUFBVyxDQUMzQixNQUFNd2pDLFNBQVd4K0MsSUFBSWp3RCxRQUFRLE9BQVEsY0FBY3dPLEdBQ25ELEdBQUlpZ0csU0FBVSxDQUNaLE1BQU1LLFFBQVUzdUcsT0FBT3dLLFFBQVFzbEQsSUFBSWp3RCxRQUFRLE9BQVEsY0FBY2lILE1BQVEsQ0FBQyxHQUFHblEsUUFBT2lLLEdBQUtBLEVBQUUsS0FBSXdELEtBQUl4RCxHQUFLQSxFQUFFLEtBQUkwTCxPQUFPN0gsS0FBSyxLQUMxSCxJQUFJK3BHLFlBQWNucUcsU0FBU3lyRCxJQUFJandELFFBQVEsT0FBUSxjQUFjZ3pDLFVBQVl2MkMsT0FBT215RyxpQkFBa0IsSUFDbEdELFlBQWN0eUcsTUFBTXN5RyxhQUFlbHlHLE9BQU9teUcsaUJBQW1CRCxZQUM3RCxNQUFNdnlHLElBQU1xeUcsU0FBVyxJQUFNSyxRQUFVLEtBQU96eUcsTUFBTXN5RyxhQUFlbHlHLE9BQU9teUcsaUJBQW1CRCxhQUV2RkQsV0FBYUYsbUJBQW1CL3dHLElBQUlyQixLQUMxQyxRQUEwQixJQUFmc3lHLFdBQTRCLENBQ3JDRixtQkFBbUI3bEcsSUFBSXZNLElBQUs2ekQsS0FDNUIsUUFDRixDQUVBLE1BQU04K0MsUUFBVTkrQyxJQUFJandELFFBQVEsT0FBUSxjQUFjK3hELE1BQVEsS0FDcERpOUMsYUFBZU4sWUFBWTF1RyxRQUFRLE9BQVEsY0FBYyt4RCxNQUFRLEtBQ2xELE9BQWpCaTlDLGNBQXlCQSxlQUFpQkQsU0FDNUNQLG1CQUFtQjdsRyxJQUFJdk0sSUFBSzZ6RCxJQUVoQyxDQUNGLENBQ0EsTUFBTyxJQUFJdStDLG1CQUFtQnp1RyxTQUNoQyxDQWFBLCtCQUFhK3RHLEVBQW9CLFlBQWEsS0FBTSxLQUFTandHLEtBQUtDLEtBQUtpMEQsS0FBSSxLQUFRLEVBQUssY0FBaUIsRUFBSSxZQUFnQixHQUFNLENBQUMsR0FDbEksSUFBS3phLFlBQ0gsTUFBTyxHQUVJLEtBQVR5YSxPQUNGQSxLQUFPbDBELEtBQUtDLEtBQUtpMEQsT0FFUCxJQUFSMVosTUFDRkEsSUFBTXg2QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUc5QnN3RyxZQUFjLEdBQ2hCQyxnQkFBZ0JDLG1CQUFtQixDQUFFcndHLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMseUJBQTBCbXdHLElBQUt2ckcsS0FBS3VJLE1BQU0sSUFBTTZpRyxlQUdqSCxNQUFNa0IsYUFBZW5DLE1BQU1vQyxnQkFBZ0IsR0FBR3R3RyxVQUV4Q3V3RyxtQkFBcUJ0eEcsS0FBS294RyxlQUFlbjRHLFFBQVFMLElBQ3JELE1BQU13N0MsVUFBWXg3QyxFQUFFdUosUUFBUSxPQUFRLGFBQ3BDLFFBQXlCLElBQWRpeUMsVUFDVCxPQUFPLEVBRVQsTUFBTWhyQyxLQUFRZ3JDLFVBQVVockMsTUFBUSxHQUMxQm1vRyxjQUF3QixJQUFSLzJELEtBQWlELElBQWhDbDRDLE9BQU93SyxRQUFRMUQsTUFBTTlGLFFBQWlCaEIsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUs0TixLQUFNb3hDLE1BQVFweEMsS0FBS294QyxLQUNySSxPQUFPZixZQUFZa1YsS0FBS3ZhLFVBQVV6akMsS0FBTyxDQUFDdWpELEtBQU95N0MsYUFBZSxLQUFPLEtBQU1qcUcsU0FBUzB1QyxVQUFVOGYsT0FBU3E5QyxnQkFHM0csWUFBMkJoeEcsSUFBdkIrd0csbUJBQ0ssR0FHRkEsbUJBQW1CMWlHLEtBQUtxZ0csTUFBTXVDLGlCQUN2QyxDQWFBLG1DQUFhaEIsRUFBd0IsWUFBYSxLQUFNLEtBQVN4d0csS0FBS0MsS0FBS2kwRCxLQUFJLEtBQVEsRUFBSyxjQUFpQixFQUFJLFlBQWdCLElBQy9ILElBQUt6YSxZQUNILE1BQU8sR0FFSSxLQUFUeWEsT0FDRkEsS0FBT2wwRCxLQUFLQyxLQUFLaTBELE9BRVAsSUFBUjFaLE1BQ0ZBLElBQU14NkMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFFbEMsTUFBTTZ2RyxRQUFVUixNQUFNUSxRQUFRajFELEtBRXhCd3lCLGFBQWVpaUMsTUFBTXdDLGdCQUFnQjF3RyxNQUFNMndHLE9BQU8xNEcsS0FDbERzNEcsbUJBQXFCLEdBRTNCLElBQUk5dEcsTUFBUSxFQUNaLElBQUssTUFBTTJ0QixRQUFRbnhCLEtBQUtvaEQsTUFLdEIsR0FKSTh1RCxZQUFjLElBQ2hCQyxnQkFBZ0JDLG1CQUFtQixDQUFFcndHLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMseUJBQTBCbXdHLElBQUt2ckcsS0FBS3VJLE1BQWMsSUFBUjdKLE1BQWMwc0csZUFDdkgxc0csU0FFRTJ0QixLQUFLcUUsZUFBaUJ3M0MsYUFBYyxDQUNqQzc3QyxLQUFLd2dGLGVBQ0Z4Z0YsS0FBS3lnRixXQUViLE1BQU1DLGVBQWlCMWdGLEtBQUt0UixNQUFNNW1CLFFBQVErcEIsSUFDeEMsTUFBTW94QixVQUFZcHhCLEVBQUVwaEIsT0FBT3dDLE1BQU1nd0MsVUFDakMsUUFBeUIsSUFBZEEsVUFDVCxPQUFPLEVBRVQsTUFBTWhyQyxLQUFRZ3JDLFVBQVVockMsTUFBUSxHQUMxQm1vRyxjQUF3QixJQUFSLzJELEtBQWlELElBQWhDbDRDLE9BQU93SyxRQUFRMUQsTUFBTTlGLFFBQWlCaEIsT0FBT0MsVUFBVUMsZUFBZWhILEtBQUs0TixLQUFNb3hDLE1BQVFweEMsS0FBS294QyxLQUNySSxPQUFPZixZQUFZa1YsS0FBS3ZhLFVBQVV6akMsS0FBTyxDQUFDdWpELEtBQU95N0MsYUFBZSxLQUFPLEtBQU1qcUcsU0FBUzB1QyxVQUFVOGYsT0FBU3E5QyxnQkFFM0csSUFBSyxNQUFNMXhGLFNBQVNneUYsZUFBZ0IsQ0FDbEMsTUFBTXRnRyxlQUFpQjRmLEtBQUtzd0IsWUFBWTVoQyxNQUFNZzBCLEtBQzlDLElBQUt0aUMsU0FBVSxDQUNiLE1BQU02QixJQUFNcFQsS0FBS0MsS0FBS3lXLE9BQU8sMENBQTJDLENBQ3RFaVAsTUFBTzh6QixZQUNQeWEsS0FDQTFaLElBQUtpMUQsVUFJUCxNQUZBaGtHLEdBQUdDLGNBQWN3VSxNQUFNOU0sS0FDdkJ6RixRQUFRbytELElBQUksU0FBVTM0RCxJQUFLeU0sT0FDckIsSUFBSXRGLEtBQ1osQ0FDRSsyRixtQkFBbUJ4M0csS0FBS3lYLFNBRTVCLENBQ0YsQ0FFRixPQUFPKy9GLG1CQUFtQjFpRyxLQUFLcWdHLE1BQU11QyxpQkFDdkMsQ0FPQSx1QkFBT0EsQ0FBa0JweUcsRUFBR3dqQixHQUMxQixPQUNFQSxFQUFFemdCLFFBQVEsT0FBUSxjQUFjZ3pDLFNBQ2hDLzFDLEVBQUUrQyxRQUFRLE9BQVEsY0FBY2d6QyxRQUVwQyxDQU1BLHNCQUFPazhELENBQWlCMXJGLE9BQ3RCLE1BQU01a0IsS0FBTzRrQixNQUFNeFcsTUFBTSxLQUFLLEdBQ3hCaWlHLGFBQWVuQyxNQUFNTSxtQkFBbUJ4dUcsTUFDOUMsSUFBS3F3RyxhQUdILE1BRkEzbEcsR0FBR0MsY0FBY3NLLEtBQUtoVyxLQUFLQyxLQUFLeVcsT0FBTyx3Q0FDdkMvSSxRQUFRbytELElBQUksVUFBV3BtRCxPQUNqQixJQUFJcEwsTUFFWixPQUFPNjJGLFlBQ1QsQ0FFQSw2QkFBVzdCLEdBQ1QsTUFBTyxDQUNMbndHLEVBQUcsU0FDSG16QixFQUFHLFFBQ0h2UCxFQUFHLFFBQ0g4dUYsR0FBSSxVQUNKanNGLEVBQUcsU0FDSHhWLEVBQUcsWUFDSDBoRyxHQUFJLFNBQ0psNUcsRUFBRyxTQUVQLENBTUEsc0JBQU80NEcsQ0FBaUI5ckYsT0FDdEIsTUFBTTVrQixLQUFPNGtCLE1BQU14VyxNQUFNLEtBQUssR0FDeEI2OUQsYUFBZWlpQyxNQUFNTyxtQkFBbUJ6dUcsTUFDOUMsSUFBS2lzRSxhQUdILE1BRkF2aEUsR0FBR0MsY0FBY3NLLEtBQUtoVyxLQUFLQyxLQUFLeVcsT0FBTyx3Q0FDdkMvSSxRQUFRbytELElBQUksVUFBV3BtRCxPQUNqQixJQUFJcEwsTUFFWixPQUFPeXlELFlBQ1QsQ0FFQSw2QkFBV3dpQyxHQUNULE1BQU8sQ0FDTHB3RyxFQUFHMjBDLE1BQ0h4aEIsRUFBR3kvRSxLQUNIaHZGLEVBQUdsYixLQUNIZ3FHLEdBQUkzQyxhQUNKdHBGLEVBQUc2cEMsTUFDSHIvQyxFQUFHKytGLFNBQ0gyQyxHQUFJMUMsVUFDSngyRyxFQUFHeTJHLE1BRVAsRUMxa0JLLFNBQVMsY0FDZGowRCxNQUFNNGdDLEtBQUssUUFBUWozRSxVQ0RuQk0sT0FBT2xILGFBQWFzSyxjQUFnQnZLLGlCQUNwQ21ILE9BQU95dUMsTUFBTXJyQyxjQUFnQjJwQixTQUM3Qi9zQixPQUFPeXVDLE1BQU03ckMsZ0JBQWtCLENBQzdCcW9GLFFBQVMwVSxhQUVYMy9GLE9BQU93QyxLQUFLWSxjQUFnQmIsU0FDNUJ2QyxPQUFPd0MsS0FBS0ksZ0JBQWtCLENBQzVCaWpGLEtBQU1DLFNBQ04zWCxNQUFPd1csVUFDUDRLLE1BQU9zRyxVQUNQeHdGLE1BQU84NUYsV0NkK0J6L0YsaUJBNENqQ2l0RyxjQTFDZSxDQUNwQixzREFDQSxzREFFQSwyREFDQSxpRUFDQSw0REFDQSxtREFDQSxpRUFDQSx3RUFDQSwyREFDQSxvRUFDQSxnRUFDQSxrREFDQSxrREFDQSx3REFDQSx1REFFQSxpREFDQSxrREFFQSxtRUFDQSxvRUFDQSxtRUFDQSx1RUFDQSx3RUFDQSwwRUFDQSxxRUFDQSxzRUFDQSx1RUFDQSw0RUFDQSxtRUFDQSwyRUFDQSxvRUFDQSxnRUFDQSw2REFFQSwwREFDQSxzREFLSixDRnRDSUMsR0dQRyxXQTZVTCxHQXpVQWx5RyxLQUFLbUUsU0FBU2d1RyxhQUFhLE9BQVEsWUFBYSxDQUM5Q241RyxLQUFNLDJCQUNOK0csTUFBTyw0QkFDUGlwRCxLQUFNLDJCQUNON29ELEtBQU0sY0FDTlksS0FBTW9sRyxxQkFDTmlNLFlBQVksSUFFZGpNLHFCQUFxQkssbUJBRXJCeG1HLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxrQkFBbUIsQ0FDaEQxMEYsS0FBTSwyQkFDTmd3RCxLQUFNLCtCQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFsQixLQUFNNm5CLFFBQ043SyxTQUFTLElBR1gvZCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsdUJBQXdCLENBQ3JEMTBGLEtBQU0sMkNBQ05nd0QsS0FBTSwyQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxbEIsS0FBTXcwRSxvQkFBb0JJLGlCQUMxQjUzRCxRQUFTLGlCQUFtQi9kLEtBQUtxeUcsTUFBTTFoRyxHQUFLLGtCQUc5QzNRLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxXQUFZLENBQ3pDMTBGLEtBQU0sOEJBQ05nd0QsS0FBTSw4QkFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLFdBQ1RoZCxLQUFNakMsT0FDTjJtRyxRQUFTcnVHLEtBQUtnUyxLQUNkczhGLFNBQVUsS0FDUmo2RixHQUFHb2pDLFFBQVFudUMsUUFBTyxFQUFJLElBSTFCVixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsWUFBYSxDQUMxQzEwRixLQUFNLCtCQUNOZ3dELEtBQU0sK0JBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxHQUNUaGQsS0FBTWpDLE9BQ04ybUcsUUFBUyxDQUNQLEdBQUksaUNBQ0o2TSxFQUFHLG1DQUNIQyxFQUFHLHlDQVFQdnlHLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxtQkFBb0IsQ0FDakQxMEYsS0FBTSw0QkFDTmd3RCxLQUFNLGdDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFHUjVvQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsb0JBQXFCLENBQ2xEMTBGLEtBQU0sNkJBQ05nd0QsS0FBTSxpQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBT1I1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLGdCQUFpQixDQUM5QzEwRixLQUFNLHlCQUNOZ3dELEtBQU0sNkJBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUdSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSx3QkFBeUIsQ0FDdEQxMEYsS0FBTSxpQ0FDTmd3RCxLQUFNLHFDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFHUjVvQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsNkJBQThCLENBQzNEMTBGLEtBQU0sc0NBQ05nd0QsS0FBTSwwQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBRVI1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHlCQUEwQixDQUN2RDEwRixLQUFNLDZCQUNOZ3dELEtBQU0saUNBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxVQUNUaGQsS0FBTWpDLE9BQ04ybUcsUUFBUyxDQUNQaHZGLFFBQVMsa0NBQ1RzUCxRQUFTLHFDQUdiL2xCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSx3QkFBeUIsQ0FDdEQxMEYsS0FBTSxpQ0FDTmd3RCxLQUFNLHFDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsV0FDVGhkLEtBQU1qQyxPQUNOMm1HLFFBQVMsQ0FDUCtNLE9BQVEsdUJBQ1IzZ0YsT0FBUSw0QkFDUjRnRixTQUFVLDhCQVFkenlHLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwwQkFBMkIsQ0FDeEQxMEYsS0FBTSxtQ0FDTmd3RCxLQUFNLHVDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFHUjVvQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsd0JBQXlCLENBQ3REMTBGLEtBQU0saUNBQ05nd0QsS0FBTSxxQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBR1I1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHFCQUFzQixDQUNuRDEwRixLQUFNLDhCQUNOZ3dELEtBQU0sa0NBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUVSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwyQkFBNEIsQ0FDekQxMEYsS0FBTSxvQ0FDTjg3RCxNQUFPLFNBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUVSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbEQxMEYsS0FBTSw2QkFDTjg3RCxNQUFPLFNBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUdSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxXQUFZLENBQ3pDMTBGLEtBQU0sb0JBQ05nd0QsS0FBTSx3QkFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBTVI1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLG9CQUFxQixDQUNsRDEwRixLQUFNLDZCQUNOZ3dELEtBQU0saUNBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMWxCLEtBQU02bkIsUUFDTjdLLFNBQVMsSUFFWC9kLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxhQUFjLENBQzNDMTBGLEtBQU0sOEJBQ05nd0QsS0FBTSxrQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBRVI1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLG9CQUFxQixDQUNsRDEwRixLQUFNLDBCQUNOZ3dELEtBQU0sOEJBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUVSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwyQkFBNEIsQ0FDekQxMEYsS0FBTSw2Q0FDTmd3RCxLQUFNLGlEQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFHUjVvQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsZ0JBQWlCLENBQzlDMTBGLEtBQU0seUJBQ05nd0QsS0FBTSw2QkFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLE1BQ1RoZCxLQUFNakMsT0FDTjJtRyxRQUFTLENBQ1BsM0MsSUFBSyw0QkFDTDFxRCxLQUFNLDZCQUNOby9DLFFBQVMsZ0NBQ1R5dkQsT0FBUSxrQ0FNWjF5RyxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsc0JBQXVCLENBQ3BEMTBGLEtBQU0sK0JBQ05nd0QsS0FBTSxtQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBRUo1b0IsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEseUJBQzVCSSxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsZ0JBQWlCLENBQzlDMTBGLEtBQU0seUJBQ05nd0QsS0FBTSw2QkFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLDBDQUNUaGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsZUFBZ0IsQ0FDN0MxMEYsS0FBTSx3QkFDTmd3RCxLQUFNLDRCQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMscUNBQ1RoZCxLQUFNakMsVUFPVmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwyQkFBNEIsQ0FDekQxMEYsS0FBTSxvQ0FDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUVSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxlQUFnQixDQUM3QzEwRixLQUFNLG9CQUNOODdELE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLElBQ1RoZCxLQUFNbkMsU0FFUm9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUMxMEYsS0FBTSx5QkFDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUdSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSx3QkFBeUIsQ0FDdEQxMEYsS0FBTSxpQ0FDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxTQUNUaGQsS0FBTWpDLE9BQ04ybUcsUUFBUyxDQUNQa04sT0FBUSwwQkFDUkMsU0FBVSw0QkFDVkMsTUFBTyw0QkFJWDd5RyxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsdUJBQXdCLENBQ3JEMTBGLEtBQU0sZ0NBQ05nd0QsS0FBTSxvQ0FDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBRVI1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLG9CQUFxQixDQUNsRDEwRixLQUFNLDZCQUNOZ3dELEtBQU0saUNBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksU0FBUyxFQUNUaGQsS0FBTTZuQixVQUVSNW9CLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSx1QkFBd0IsQ0FDckQxMEYsS0FBTSxnQ0FDTmd3RCxLQUFNLG9DQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFFSjVvQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx3QkFBeUIsQ0E2RnJELFNBQVNrekcsaUJBQWtCN3dHLE1BQ3pCaXNCLEVBQUUsU0FBUzBuQyxJQUFJLFlBQWEzekQsTUFDNUJ3SixHQUFHc25HLFFBQVFyeUcsUUFBTyxHQUNsQixJQUFLLE1BQU8sQ0FBRWk0RixLQUFNcjJGLE9BQU93SyxRQUFRckIsR0FBR28xQyxTQUNwQzgzQyxFQUFFajRGLFFBQU8sRUFFYixDQWxHQVYsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHlCQUEwQixDQUN2RDEwRixLQUFNLGtDQUNOZ3dELEtBQU0sc0NBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxrREFDVGhkLEtBQU1qQyxTQUVSa0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLDZCQUE4QixDQUMzRDEwRixLQUFNLHNDQUNOODdELE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLFFBQ1RoZCxLQUFNakMsT0FDTjJtRyxRQUFTLENBQ1B0a0csTUFBTywyQkFDUHJHLEtBQU0sMEJBQ05rNEcsUUFBUyw2QkFDVDdxRSxNQUFPLDhCQUdYbm9DLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSw4QkFBK0IsQ0FDNUQxMEYsS0FBTSx1Q0FDTmd3RCxLQUFNLDJDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsMENBQ1RoZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbEQxMEYsS0FBTSw2QkFDTmd3RCxLQUFNLGlDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsd0NBQ1RoZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbEQxMEYsS0FBTSw2QkFDTmd3RCxLQUFNLGlDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsbUJBQ1RoZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSx5QkFBMEIsQ0FDdkQxMEYsS0FBTSxrQ0FDTmd3RCxLQUFNLHNDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsb0JBQ1RoZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwwQkFBMkIsQ0FDeEQxMEYsS0FBTSxtQ0FDTmd3RCxLQUFNLHVDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsb0JBQ1RoZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwwQkFBMkIsQ0FDeEQxMEYsS0FBTSxtQ0FDTmd3RCxLQUFNLHVDQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFFUjVvQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsa0JBQW1CLENBQ2hEMTBGLEtBQU0sMkJBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsR0FDVGhkLEtBQU1qQyxTQUVSa0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHNCQUF1QixDQUNwRDEwRixLQUFNLCtCQUNOODdELE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLEdBQ1RoZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcEQxMEYsS0FBTSwrQkFDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxHQUNUaGQsS0FBTW5DLE9BQ044bUcsU0FBVXpqRyxNQUFRNndHLGlCQUFpQjd3RyxPQVV2QyxDQXNDQSxHQWpDQWpDLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSx1QkFBd0IsQ0FDckQxMEYsS0FBTSxnQ0FDTmd3RCxLQUFNLG9DQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFFUjVvQixLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsZ0JBQWlCLENBQzlDMTBGLEtBQU0seUJBQ05nd0QsS0FBTSw2QkFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBbUJKNW9CLEtBQUtrRSxRQUFRdEUsSUFBSSxpQkFBaUI2RCxPQUFRLENBQzVDekQsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLGFBQWMsQ0FDM0MxMEYsS0FBTSxzQkFDTmd3RCxLQUFNLDBCQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGhkLEtBQU02bkIsVUFFUixNQUFPbm5CLFNBQVd6QixLQUFLa0UsUUFBUXRFLElBQUksaUJBQWlCNkIsUUFBUTBOLE1BQU0sTUFDN0QzUSxNQUFNSSxPQUFPNkMsV0FBYTdDLE9BQU82QyxVQUFZLElBQ2hEekIsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLGNBQWUsQ0FDNUMxMEYsS0FBTSx1QkFDTmd3RCxLQUFNLDJCQUNOOEwsTUFBTyxTQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsU0FDVGhkLEtBQU1qQyxTQUVSa0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLGdCQUFpQixDQUM5QzEwRixLQUFNLHlCQUNOZ3dELEtBQU0sNkJBQ044TCxNQUFPLFNBQ1BydUMsUUFBUSxFQUNSMUksUUFBUyxZQUNUaGQsS0FBTWpDLFNBR1osQ0FLQWtCLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxZQUFhLENBQzFDMTBGLEtBQU0scUJBQ05nd0QsS0FBTSx5QkFDTjhMLE1BQU8sU0FDUHJ1QyxRQUFRLEVBQ1IxbEIsS0FBTTZuQixRQUNON0ssU0FBUyxJQUVYL2QsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHVCQUF3QixDQUNyRDEwRixLQUFNLG9DQUNOZ3dELEtBQU0sd0NBQ044TCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMWxCLEtBQU02bkIsUUFDTjdLLFNBQVMsSUFLWC9kLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUMxMEYsS0FBTSxrQkFDTmd3RCxLQUFNLHVCQUNOOEwsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFsQixLQUFNNm5CLFFBQ043SyxTQUFTLElBRVgvZCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEscUJBQXNCLENBQ25EMTBGLEtBQU0scUJBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFsQixLQUFNNm5CLFFBQ043SyxTQUFTLElBR1gvZCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEscUJBQXNCLENBQ25EMTBGLEtBQU0sOEJBQ05nd0QsS0FBTSw4QkFDTjhMLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RoZCxLQUFNNm5CLFVBRVI1b0IsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHNCQUF1QixDQUNwRDEwRixLQUFNLHdCQUNOODdELE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxbEIsS0FBTTZuQixRQUNON0ssU0FBUyxJQUVYL2QsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLHNCQUF1QixDQUNwRDEwRixLQUFNLHdCQUNOODdELE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxbEIsS0FBTWpDLE9BQ05pZixRQUFTLE1BRVgvZCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsNkJBQThCLENBQzNENTRCLE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxSSxRQUFTLENBQUMsSUFFWi9kLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSxZQUFhLENBQzFDMTBGLEtBQU0saUJBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFsQixLQUFNNm5CLFFBQ043SyxTQUFTLElBRVgvZCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsbUJBQW9CLENBQ2pEMTBGLEtBQU0sOEJBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFsQixLQUFNakMsT0FDTmlmLFFBQVMsTUFFWC9kLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSwwQkFBMkIsQ0FDeEQxMEYsS0FBTSxzREFDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMWxCLEtBQU1qQyxPQUNOaWYsUUFBUyxLQUVYL2QsS0FBS21FLFNBQVN1cEYsU0FBUyxPQUFRLDZCQUE4QixDQUMzRDEwRixLQUFNLDRFQUNOODdELE1BQU8sUUFDUHJ1QyxRQUFRLEVBQ1IxbEIsS0FBTW5DLE9BQ05tZixRQUFTLElBRVgvZCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsOEJBQStCLENBQzVEMTBGLEtBQU0sNENBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFsQixLQUFNbkMsT0FDTm1mLFFBQVNuTCxNQUFNb0wsMEJBQTBCOGhELE9BRTNDOS9ELEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSw0QkFBNkIsQ0FDMUQxMEYsS0FBTSwwQ0FDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMWxCLEtBQU02bkIsUUFDTjdLLFNBQVMsSUFFWC9kLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSw2QkFBOEIsQ0FDM0QxMEYsS0FBTSwwQ0FDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMWxCLEtBQU02bkIsUUFDTjdLLFNBQVMsSUFFWC9kLEtBQUttRSxTQUFTdXBGLFNBQVMsT0FBUSw4QkFBK0IsQ0FDNUQxMEYsS0FBTSwwQkFDTjg3RCxNQUFPLFFBQ1BydUMsUUFBUSxFQUNSMWxCLEtBQU0wZ0IsTUFDTjFELFFBQVMsS0FHWHpZLE9BQU80Z0csT0FBT2w5QixXQUFhLENBQ3pCcnNFLFFBQVMsNkJBQ1RzcEcsU0FBVSxHQUVaM2dHLE9BQU91K0MsTUFBTW92RCxRQUFVanpHLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ2pEMEYsT0FBT0MsS0FBS0MsTUFBTUMsRUFBSXkvRixlQUN0QjUvRixPQUFPQyxLQUFLQyxNQUFNMHNELEVBQUltekMsbUJBQ3hCLENIOW1CSW1CLEdJVUYwTSxPQUFPQyxnQkFBZ0IsT0FBUS82QyxZQUMvQjg2QyxPQUFPRSxjQUFjLE9BQVF4eEMsYUFBYyxDQUN6QzJyQixNQUFPLENBQUMsT0FDUjhsQixhQUFhLElBRWZILE9BQU9FLGNBQWMsT0FBUWpGLGlCQUFrQixDQUM3QzVnQixNQUFPLENBQUMsV0FDUjhsQixhQUFhLElBRWZILE9BQU9FLGNBQWMsT0FBUXJ3QyxrQkFBbUIsQ0FDOUN3cUIsTUFBTyxDQUFDLFlBQ1I4bEIsYUFBYSxJQUVmSCxPQUFPRSxjQUFjLE9BQVF4TCxtQkFBb0IsQ0FDL0NyYSxNQUFPLENBQUMsYUFDUjhsQixhQUFhLElBRWZILE9BQU9FLGNBQWMsT0FBUWp3QyxtQkFBb0IsQ0FDL0NvcUIsTUFBTyxDQUFDLGFBQ1I4bEIsYUFBYSxJQUdmQyxNQUFNSCxnQkFBZ0IsT0FBUTMyQixXQUM5QjgyQixNQUFNRixjQUFjLE9BQVE1RixlQUFnQixDQUMxQ2pnQixNQUFPLENBQUMsU0FDUjhsQixhQUFhLElBRWZDLE1BQU1GLGNBQWMsT0FBUTNFLGdCQUFpQixDQUMzQ2xoQixNQUFPLENBQUMsVUFDUjhsQixhQUFhLElBRWZDLE1BQU1GLGNBQWMsT0FBUWxNLGNBQWUsQ0FDekMzWixNQUFPLENBQUMsUUFDUjhsQixhQUFhLElBRWZDLE1BQU1GLGNBQWMsT0FBUXZGLGVBQWdCLENBQzFDdGdCLE1BQU8sQ0FBQyxTQUNSOGxCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRbkYsZ0JBQWlCLENBQzNDMWdCLE1BQU8sQ0FBQyxVQUNSOGxCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRdEYsZ0JBQWlCLENBQzNDdmdCLE1BQU8sQ0FBQyxVQUNSOGxCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRNzJCLG9CQUFxQixDQUMvQ2dSLE1BQU8sQ0FBQyxjQUNSOGxCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRdk0sbUJBQW9CLENBQzlDdFosTUFBTyxDQUFDLGFBQ1I4bEIsYUFBYSxJQUVmQyxNQUFNRixjQUFjLE9BQVFqRyxlQUFnQixDQUMxQzVmLE1BQU8sQ0FBQyxTQUNSOGxCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRbkssZUFBZ0IsQ0FDMUMxYixNQUFPLENBQUMsU0FDUjhsQixhQUFhLElBRWZDLE1BQU1GLGNBQWMsT0FBUTVHLGNBQWUsQ0FBRWpmLE1BQU8sQ0FBQyxVQUNyRCtsQixNQUFNRixjQUFjLE9BQVE3RyxnQkFBaUIsQ0FDM0NoZixNQUFPLENBQUMsUUFDUjhsQixhQUFhLElBR2ZFLE9BQU9KLGdCQUFnQixPQUFRakcsYUFDL0JxRyxPQUFPSCxjQUFjLE9BQVFuRyxnQkFBaUIsQ0FDNUNvRyxhQUFhLElBR2ZHLFFBQVFMLGdCQUFnQixPQUFRekcsY0FDaEM4RyxRQUFRSixjQUFjLE9BQVEzRyxpQkFBa0IsQ0FDOUM0RyxhQUFhLElBR2ZJLFdBQVdOLGdCQUFnQixPQUFRbkcsaUJBQ25DeUcsV0FBV0wsY0FBYyxPQUFRckcsb0JBQXFCLENBQ3BEc0csYUFBYSxJQUdmSyxPQUFPUCxnQkFBZ0IsT0FBUXZHLGFBQy9COEcsT0FBT04sY0FBYyxPQUFRekcsZ0JBQWlCLENBQzVDMEcsYUFBYSxJQUdmTSxVQUFVUixnQkFBZ0IsT0FBUXJHLGdCQUNsQzZHLFVBQVVQLGNBQWMsT0FBUXZHLG1CQUFvQixDQUNsRHdHLGFBQWEsSUMvR2ZPLFdBQVdDLGVBQWUsZ0JBQWdCLFNBQVVoZ0csVUFFbEQsT0FEWTVCLFdBQVc0QyxtQkFBbUJoQixXQUVuQyxvQ0FDVCxJQUNBKy9GLFdBQVdDLGVBQWUsb0JBQW9CLFNBQVU3eEcsU0FDdEQsTUFBTStXLFdBQWEvVyxRQUFROHhHLEtBQUsvNkYsYUFBZXZDLFVBQVVzUCxnQkFBZ0JyUCxTQUFrQkQsVUFBVXdhLGlCQUFpQmh2QixRQUFROHhHLEtBQUsvNkYsWUFDN0gzUixTQUFZcEYsUUFBUTh4RyxLQUFLMXNHLFNBQVcsRUFBSSxJQUFJcEYsUUFBUTh4RyxLQUFLMXNHLFdBQWFwRixRQUFROHhHLEtBQUsxc0csU0FBVyxHQUFJcEYsUUFBUTh4RyxLQUFLMXNHLFNBQVNxTixXQUM5SCxPQUFPelUsS0FBS0MsS0FBS3lXLE9BQU8sa0JBQXFCcUMsV0FBa0IsT0FBTCxLQUFpQjNSLFNBQWdCLFFBQUwsS0FBa0JwRixRQUFROHhHLEtBQUt0MEYsUUFBZSxVQUFMLElBQWlCLENBQUV6RyxXQUFZM1IsU0FBVXBPLEtBQU1nSixRQUFROHhHLEtBQUs5NkcsTUFDN0wsSVBzQ0ssV0FDTHFpRCxNQUFNMytCLEdBQUcsb0JBQW9CMVgsTUFBTzFMLElBQUttakIsS0FBTXpVLFFBQzdDLEdBQW9DLFNBQWhDMU8sSUFBSTArQixXQUFXeEMsYUFBeUIsT0FDcENsOEIsSUFBSTArQixXQUFXNDVFLFdBQ3JCLE1BQU1ya0IsTUFBUSxJQUFJLElBQUl3bUIsSUFBSS9yRyxLQUFLNlgsTUFBTTVtQixRQUFPK3BCLEdBQWdCLHFCQUFYQSxFQUFFaHFCLE9BQTZCME4sS0FBSWlDLE1BQVFBLEtBQUs1SCxTQUMzRnErQixPQUFTLEdBQ2ZBLE9BQU90bEMsS0FDTCxvQkFBc0JrRyxLQUFLQyxLQUFLQyxTQUFTLFlBQWMsYUFFckRxdEYsTUFBTTduRixTQUFTLGNBQ2pCMDVCLE9BQU90bEMsS0FDTCw2QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsMkJBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFNBQ2pCMDVCLE9BQU90bEMsS0FDTCx3QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsc0JBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFNBQ2pCMDVCLE9BQU90bEMsS0FDTCx3QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsc0JBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLGVBQ2pCMDVCLE9BQU90bEMsS0FDTCw4QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsNEJBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFVBQ2pCMDVCLE9BQU90bEMsS0FDTCx5QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFVBQ2pCMDVCLE9BQU90bEMsS0FDTCx5QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFVBQ2pCMDVCLE9BQU90bEMsS0FDTCx5QkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFdBQ2pCMDVCLE9BQU90bEMsS0FDTCwwQkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFdBQ2pCMDVCLE9BQU90bEMsS0FDTCwwQkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ25CLGFBR0ZxdEYsTUFBTTduRixTQUFTLFdBQ2pCMDVCLE9BQU90bEMsS0FDTCwwQkFDRWtHLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ25CLGFBR04sTUFBTWtKLEtBQU8sR0FDYkEsS0FBS3RQLEtBQ0gsb0JBQXNCa0csS0FBS0MsS0FBS0MsU0FBUyxZQUFjLGFBRXpELElBQUssTUFBTXM2QyxPQUFPbDRDLE9BQU93SyxRQUFRMVYsS0FBS2dTLE1BQU0xQyxLQUFJeEQsSUFBYyxDQUFFeU4sR0FBSXpOLEVBQUUsR0FBSWxLLEtBQU1nSCxLQUFLQyxLQUFLQyxTQUFTZ0QsRUFBRSxRQUFTMEwsS0FBS3RFLGNBQWN1RSxlQUMvSHpGLEtBQUt0UCxLQUNILGtCQUNFMGdELElBQUk3cEMsR0FDSixLQUNBNnBDLElBQUl4aEQsS0FDSixhQUdOeWpCLEtBQUt6VSxLQUFLLFNBQVUxTyxJQUFJK25ELFNBQVMxd0MsSUFDakMsSUFBSXFqRyxTQUFXaDBHLEtBQUtDLEtBQUtDLFNBQVMseUJBQ2pCLDBCQUFiOHpHLFdBQ0ZBLFNBQVcsTUFFYnYzRixLQUFLcmEsS0FBSyxxQkFBcUI2MEQsTUFBSyxXQUNsQyxNQUFNM1EsSUFBTXA0QixFQUFFeHJCLE1BQ2QsSUFBSWlHLEtBQU8sR0FHVEEsVUFGd0IsSUFBZlgsS0FBSzZYLE1BRVA3WCxLQUFLNlgsTUFBTXpkLE1BQUs0Z0IsR0FBS0EsRUFBRTZ3QixNQUFReVMsSUFBSXQrQyxLQUFLLGlCQUV4QzFPLElBQUkwK0IsV0FBV25ZLE1BQU1qZ0IsSUFBSTBtRCxJQUFJdCtDLEtBQUssZ0JBRXZDVyxNQUFzQixVQUFkQSxLQUFLNUgsTUFDZnVsRCxJQUFJbGtELEtBQUssS0FBS3FhLEtBQUs5VCxLQUFLM1AsS0FBTyxNQUFRMlAsS0FBS2xLLFFBQVF1TyxNQUFRLEtBQU8sS0FBUXJFLEtBQUtsSyxRQUFROEssWUFBWTFQLE9BQW1CLElBQU1tNkcsU0FBVyxJQUFNLElBRWxKLElBQ0F2M0YsS0FDR3JhLEtBQUssMkJBQ0x3bUYsTUFDQyw0SEFDZ0d0dkYsSUFBSTZ2RixNQUFRLGNBQWdCL3BELE9BQU9yNEIsS0FBSyxJQUR4SSw0SUFFK0h6TixJQUFJNnZGLE1BQVEsY0FBZ0IvL0UsS0FBS3JDLEtBQUssSUFGcksseUJBS0owVixLQUFLcmEsS0FBSyxVQUFVOUQsT0FBT3d3RyxjQUFjbHpHLEtBQUs4RyxPQUM5QytaLEtBQUtyYSxLQUFLLFNBQVNnb0UsTUFBTTBrQyxjQUFjbHpHLEtBQUs4RyxNQUM5QyxJQUVKLENFNUpJdXhHLEdBQ0FoRixNQUFNeC9FLE9BQ05WLFNBQVNVLE9NbEJYNHJCLE1BQU00Z0MsS0FBSyxtQkFBbUI3MUUsU0FDNUIsSUFBSyxNQUFNM0gsVUFBVTJILE9BQU84dEcsWUFBWUMsUUFBUyxDQUMvQyxNQUFNQyxLQUFPaHVHLE9BQU84dEcsWUFBWUMsUUFBUTExRyxRQUFRNkYsS0FBS2xDLE1BQUt4SixHQUFnQixTQUFYQSxFQUFFbUksT0FDakUsUUFBb0IsSUFBVHF6RyxLQUFzQixDQUMvQixRQUFrRixJQUF2RWh1RyxPQUFPOHRHLFlBQVlDLFFBQVExMUcsUUFBUTZGLEtBQUtsQyxNQUFLeEosR0FBZ0IsT0FBWEEsRUFBRW1JLE9BQWdDLENBQzdGLE1BQU1zekcsWUFBYy94RyxPQUFPdWUsT0FBT3ZlLE9BQU82USxPQUFPN1EsT0FBT2d5RyxlQUFlRixPQUFRQSxNQUM5RUMsWUFBWXR6RyxLQUFPLEtBQ25CcUYsT0FBTzh0RyxZQUFZQyxRQUFRMTFHLFFBQVE2RixLQUFLeEssS0FBS3U2RyxZQUMvQyxDQUNBLFFBQWtGLElBQXZFanVHLE9BQU84dEcsWUFBWUMsUUFBUTExRyxRQUFRNkYsS0FBS2xDLE1BQUt4SixHQUFnQixPQUFYQSxFQUFFbUksT0FBZ0MsQ0FDN0YsTUFBTXN6RyxZQUFjL3hHLE9BQU91ZSxPQUFPdmUsT0FBTzZRLE9BQU83USxPQUFPZ3lHLGVBQWVGLE9BQVFBLE1BQzlFQyxZQUFZdHpHLEtBQU8sS0FDbkJxRixPQUFPOHRHLFlBQVlDLFFBQVExMUcsUUFBUTZGLEtBQUt4SyxLQUFLdTZHLFlBQy9DLENBQ0YsQ0FDRixJTkkyQixHQUUvQixDT3RCTyxNQUFNNXpELGFBQ1gsV0FBQTE0QyxHQUNFckYsS0FBS2crQyxhQUFlLEtBQ3BCaCtDLEtBQUswOEQsYUFBZSxJQUN0QixDQUVBLGNBQUFDLENBQWdCdmUsU0FDZCxRQUFpQyxJQUF0QnArQyxLQUFLZytDLGFBQThCLENBQzVDLE1BQU0waUQsT0FBUzFnRyxLQUFLZytDLGFBQWErTSx3QkFDakMsSUFBS2p2RCxNQUFNNGtHLE9BQU9wbEQsTUFBUSxNQUFReC9DLE1BQU00a0csT0FBT3YxQyxLQUFPLElBQUssQ0FDekQsSUFBSTdQLEtBQU9vbEQsT0FBT3BsRCxLQUNkNlAsSUFBTXUxQyxPQUFPdjFDLElBQ2pCLE1BQU0wbUQsV0FBYXJtRixFQUFFeHJCLEtBQUtnK0MsY0FBY2dYLGNBQ3hDeHBDLEVBQUUsUUFBUWtsQixPQUFPLDBCQUE0QjBOLFFBQVUsVUFDdkQsTUFBTXdNLElBQU1wL0IsRUFBRSxpQkFDUnNtRixVQUFZbG5ELElBQUlvSyxjQUNoQis4QyxTQUFXbm5ELElBQUlzSyxhQUNqQmpLLE9BQU9JLFlBQTJCLElBQWJ3bUQsV0FBbUJDLFVBQVkzbUQsSUFDdERBLEtBQVkybUQsVUFFWjNtRCxLQUF5QixJQUFiMG1ELFdBRVY1bUQsT0FBT0MsV0FBYTZtRCxTQUFXejJELE9BQ2pDQSxLQUFPMlAsT0FBT0MsV0FBYTZtRCxVQUU3Qm5uRCxJQUFJc0ksSUFBSSxDQUNONVgsS0FBTUEsS0FBTyxLQUNiNlAsSUFBS0EsSUFBTSxNQUVmLENBQ0YsQ0FDRixDQUVBLFlBQUFpUixDQUFjNy9ELE9BQ1JlLEtBQUt5Z0QsYUFBYUMsZUFBaUJ6aEQsTUFBTUksZ0JBQzNDcTFHLGFBQWExMEcsS0FBS3lnRCxhQUFhMmUsY0FDL0JwL0QsS0FBS3lnRCxhQUFhQyxhQUFlLEtBQ2pDeHlCLEVBQUUsaUJBQWlCMUksU0FFdkIsRUN2Q0YsSUFBSW12RixTQUFXLFFBQ0ssb0JBQVRDLE9BQ1RELFNBQVcsY0FBK0JDLEtBQ3hDLG9CQUFNQyxDQUFnQnJ2QixVQUNwQixPQUFPLElBQUk5bUUsU0FBUSxDQUFDaEIsUUFBUzh6QyxVQUUzQixHQURnQmpnRCxTQUFTOEUsY0FBY212RSxVQUdyQyxZQURBOW5FLFVBSWUsSUFBSW8zRixrQkFBaUIsQ0FBQ0MsVUFBV0MsWUFDaER6akcsU0FBU3NHLGlCQUFpQjJ0RSxVQUFVbnJFLFNBQVNzL0IsS0FDM0NqOEIsVUFDQXMzRixTQUFTQyxZQUFXLEdBQ3JCLElBR01DLFFBQVEzakcsU0FBU21lLEtBQU0sQ0FDOUJ5bEYsV0FBVyxFQUNYQyxTQUFTLEdBQ1YsR0FFTCxDQUVBLGNBQU1DLEdBSUosU0FITXQyRyxNQUFNczJHLFdBR1csSUFBbkIzeUcsS0FBSzR5RyxVQUNQLElBQUssTUFBTWg4RyxPQUFPZ0osT0FBT0osT0FBT3VKLEdBQUdvMUMsU0FDakN2bkQsSUFBSXFrQixjQUlGamIsS0FBS215RyxlQUFlbnlHLEtBQUs2eUcsWUFBWS92QixlQUVBLElBQWhDOWlGLEtBQUs2eUcsWUFBWUMsWUFDMUIvcEcsR0FBR3NuRyxRQUFRNUgsWUFBWXpvRyxLQUFLNnlHLFlBQVlDLFdBRTVDLENBRUEsZUFBTUMsR0FFSixTQURNMTJHLE1BQU0wMkcsY0FDUi95RyxLQUFLNHlHLFVBQVksSUFBTTV5RyxLQUFLZ3pHLFNBSTNCaHpHLEtBQUs2eUcsWUFBWTExRyxPQUl0QixHQUFJNkMsS0FBS2l6RyxZQUNQanpHLEtBQUtpekcsYUFBYyxPQUlyQixHQUNPLFVBRENqekcsS0FBSzZ5RyxZQUFZMTFHLE9BRXJCMFIsU0FBUzhFLGNBQWMzVCxLQUFLNnlHLFlBQVkvdkIsVUFBVXJ4RCxPQUd4RCxDQUVBLFdBQU15aEYsR0FDZ0IsY0FBaEJsekcsS0FBSzVGLFNBQ1A0RixLQUFLaXpHLGFBQWMsU0FFZjUyRyxNQUFNNjJHLE9BQ2QsSUNuRUcsTUFBTUMsNkJBQTZCbEIsU0FDeEMsV0FBQTVzRyxDQUFhMGUsUUFDWDFuQixNQUFNdUMsUUFBUUMsTUFBTTJhLFlBQVksQ0FDOUIvSyxNQUFPLGlDQUNQcEIsWUFBYSxpRUFDYitsRyxjQUFjLEVBQ2Q1ekUsU0FBUyxFQUNUNnpFLE1BQU8sQ0FDTCxDQUNFcGxHLEdBQUksZ0JBQ0o2MEUsU0FBVSwrQkFDVnIwRSxNQUFPLDhCQUNQK0IsUUFBUyxnQ0FDVHNpRyxXQUFZLFlBRWQsQ0FDRTdrRyxHQUFJLGlCQUNKNjBFLFNBQVUsNEJBQ1ZyMEUsTUFBTywrQkFDUCtCLFFBQVMsaUNBQ1RyVCxPQUFRLFNBRVYsQ0FDRThRLEdBQUksdUJBQ0o2MEUsU0FBVSxzQkFDVnIwRSxNQUFPLG9DQUNQK0IsUUFBUyxzQ0FDVHJULE9BQVEsU0FFVixDQUNFOFEsR0FBSSxrQkFDSjYwRSxTQUFVLHVEQUNWcjBFLE1BQU8sK0JBQ1ArQixRQUFTLGlDQUNUclQsT0FBUSxTQUVWLENBQ0U4USxHQUFJLGtCQUNKNjBFLFNBQVUsZ0NBQ1ZyMEUsTUFBTywrQkFDUCtCLFFBQVMsbUNBR2I4aUcsYUFBYyxDQUNaLDhCQUErQixnQkFDL0IsZ0NBQWlDLDhCQUNqQywrQkFBZ0MscUJBQ2hDLGlDQUFrQyx5Q0FDbEMsb0NBQXFDLGtCQUNyQyxzQ0FBdUMsZ0NBQ3ZDLCtCQUFnQyxtQ0FDaEMsaUNBQWtDLHVEQUNsQywrQkFBZ0Msb0JBQ2hDLGlDQUFrQyxxRUFFbkN2dkYsUUFDTCxFQ3pESyxNQUFNd3ZGLDZCQUE2QkoscUJBQ3hDLFdBQUE5dEcsQ0FBYTBlLFFBQ1gxbkIsTUFBTSxDQUNKb1MsTUFBTyxtQ0FDUHBCLFlBQWEsaURBQ2JpbUcsYUFBYyxDQUNaLDhCQUErQixhQUMvQixnQ0FBaUMsZ0NBQ2pDLCtCQUFnQyw0QkFDaEMsaUNBQWtDLDBDQUNsQyxvQ0FBcUMsaUJBQ3JDLHNDQUF1QyxvQ0FDdkMsK0JBQWdDLCtDQUNoQyxpQ0FBa0Msd0VBQ2xDLCtCQUFnQyxnQ0FDaEMsaUNBQWtDLDBGQUd4QyxFQ2ZLLFNBQVMsZUFDZDM2RCxNQUFNNGdDLEtBQUssU0FBU2ozRSxVQUNsQjJJLFFBQVFvK0QsSUFBSSx1Q0FDUi9yRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFBeUJJLEtBQUtzRyxLQUFLMkUsS0FJakVqTCxLQUFLeWdELGFBQWUsSUFBSUEsYUFFeEIsTUFBTXkxRCxvQkFBc0JsMkcsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsb0JBQ3RELElBQUlzMEQsS0FBT2wwRCxLQUFLQyxLQUFLaTBELEtBQ3JCLE1BQU1paUQsT0FBUyxDQUNidm1DLEdBQUksbUJBQ0pzQixHQUFJLG1CQUNKRCxHQUFJLHlCQUVzQixJQUFqQmtsQyxPQUFPamlELFFBQ2hCQSxLQUFPLE1BRVQ1dUQsT0FBT2xCLEtBQU9rQixPQUFPbEIsTUFBUSxDQUFDLEVBQzlCa0IsT0FBT2xCLEtBQUtvbEYsT0FBUzJzQixPQUFPamlELE1BQ3hCNXlELFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLdkIsT0FBT2dELFFBQVN5MEcscUJBQXVCLGNBQ3BFbDJHLEtBQUtvaEQsTUFBTXhoRCxJQUFJLG1CQUFtQjZoRCxZQUFZbjhDLE9BQU9sQixLQUFLb2xGLFVBQVUvb0YsTUFBTUMsUUFBTyxHQUN4RlYsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsbUJBQW9COUssS0FBS3ZCLE9BQU9nRCxVQ3hCekR1RCxpQkFDTCxJQUNFLElBQUlrdkQsS0FBT2wwRCxLQUFLQyxLQUFLaTBELEtBQ3JCLE1BQU1raUQsTUFBUSxDQUNaeG1DLEdBQUksQ0FDRix1QkFBd0JpbUMsc0JBRTFCNWtDLEdBQUksQ0FDRix1QkFBd0JnbEMsNEJBR0QsSUFBaEJHLE1BQU1saUQsUUFDZkEsS0FBTyxNQUVULElBQUssTUFBTW1pRCxZQUFZRCxNQUFNbGlELE1BQzNCbDBELEtBQUtvMkcsTUFBTTFvQixTQUFTLE9BQVEyb0IsU0FBVSxJQUFJRCxNQUFNbGlELE1BQU1taUQsVUFFMUQsQ0FBRSxNQUFPN29HLEtBQ1BHLFFBQVF1UyxNQUFNLGFBQWMxUyxJQUM5QixDQUNGLENETUk4b0csRUFBYyxHQUVsQixDRW5CTyxNQUFNQyxVQUFZLENBQ3ZCLE1BQUFDLEdDWkFuN0QsTUFBTTMrQixHQUFHLGVBQWUxWCxNQUFPeXhHLGNBQWV6MEcsUUFBUzAwRyxhQUVyRCxHQUFJMTJHLEtBQUtzRyxLQUFLcUssS0FBTytsRyxZQUdXLDhCQUE5QkQsY0FBYzNoRyxRQUFRQyxLQUN0QjBoRyxjQUFjM2hHLFFBQVFDLE1BQVEwaEcsY0FBY0UsUUFBUS81RyxNQUFNd0wsTUFDMURxdUcsY0FBYzNoRyxRQUFRQyxJQUFNMGhHLGNBQWNFLFFBQVEvNUcsTUFBTXdMLEtBSWpCLGNBQXJDcXVHLGNBQWNFLFFBQVEvNUcsTUFBTW1FLE9BQXlCMDFHLGNBQWNFLFFBQVEvNUcsTUFBTWdtRCw0QkFBOEI2ekQsY0FBY0UsUUFBUS81RyxNQUFNaW1ELG9CQUM3SSxPQUFRN2lELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGtCQUNoQyxJQUFLLE1BQ0gsSUFBSWczQixPQUNGLENBQ0V6bEIsTUFBT25SLEtBQUtDLEtBQUtDLFNBQVMsZ0NBQzFCZ1QsUUFBU2xULEtBQUtDLEtBQUtDLFNBQVMsaUNBQzVCMjJCLFFBQVMsQ0FDUGh6QixLQUFNLENBQ0o5RCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHFDQUMxQjQyQixTQUFVOXhCLGdCQUNGeXhHLGNBQWNFLFFBQVEvNUcsTUFBTWttRCwyQkFDbENyM0MsR0FBR0MsY0FBY3pJLEtBQUtqRCxLQUFLQyxLQUFLeVcsT0FBTyxnQ0FBaUMsQ0FBRTFkLEtBQU15OUcsY0FBY3ppRyxPQUFPcFgsTUFBTTVELFFBQzNHeTlHLGNBQWNFLFFBQVEvNUcsTUFBTWlQLFFBQVMsSUFHekNvM0MsUUFBUyxDQUNQbGpELE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsd0NBQzFCNDJCLFNBQVU5eEIsZ0JBQ0Z5eEcsY0FBY0UsUUFBUS81RyxNQUFNb21ELDhCQUNsQ3YzQyxHQUFHQyxjQUFjekksS0FBS2pELEtBQUtDLEtBQUt5VyxPQUFPLGtDQUFtQyxDQUFFMWQsS0FBTXk5RyxjQUFjemlHLE9BQU9wWCxNQUFNNUQsUUFDN0d5OUcsY0FBY0UsUUFBUS81RyxNQUFNaVAsUUFBUyxJQUd6QzYvRCxLQUFNLENBQ0ozckUsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUywrQkFHN0JRLFFBQU8sR0FDWixNQUVGLElBQUssT0FDSCsxRyxjQUFjRSxRQUFRLzVHLE1BQU1rbUQsMkJBQzVCcjNDLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBS3lXLE9BQU8sZ0NBQWlDLENBQUUxZCxLQUFNeTlHLGNBQWN6aUcsT0FBT3BYLE1BQU01RCxRQUMzR3k5RyxjQUFjRSxRQUFRLzVHLE1BQU1pUCxRQUFTLEVBQ3JDLE1BRUYsSUFBSyxVQUNINHFHLGNBQWNFLFFBQVEvNUcsTUFBTW9tRCw4QkFDNUJ2M0MsR0FBR0MsY0FBY3pJLEtBQUtqRCxLQUFLQyxLQUFLeVcsT0FBTyxrQ0FBbUMsQ0FBRTFkLEtBQU15OUcsY0FBY3ppRyxPQUFPcFgsTUFBTTVELFFBQzdHeTlHLGNBQWNFLFFBQVEvNUcsTUFBTWlQLFFBQVMsRUFNM0MsSUN6REZ3dkMsTUFBTTRnQyxLQUFLLG1CQUFtQjcxRSxTQUM1QkEsT0FBT3d3RyxjQUFjLENBQ25CNzFHLEtBQU0sS0FDTmlQLE9BQVEsQ0FBQyxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxNQUMvRDZtRyxVQUFXLElBQ1hwNEcsT0FBUSxhQUVWMkgsT0FBT3d3RyxjQUFjLENBQ25CNzFHLEtBQU0sS0FDTmlQLE9BQVEsQ0FBQyxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxNQUMvRDZtRyxVQUFXLElBQ1hwNEcsT0FBUSxZQUNULElGR0QsY0FDQSxlR2hCRjQ4QyxNQUFNMytCLEdBQUcsb0JBQW9CMVgsTUFBT2dELEtBQU15VSxLQUFNemEsV0FBbkJnRCxJQ0c3QnEyQyxNQUFNMytCLEdBQUcscUJBQXFCLENBQUNwakIsSUFBS21qQixLQUFNelUsUUFDeENpZ0MsU0FBUytILGtCQUFrQjEyQyxJQUFLbWpCLEtBQU16VSxNQUN0Q2lnQyxTQUFTMEcsc0JBQXNCcjFDLElBQUttakIsS0FBTXpVLFdBQ1EsSUFBdkMxTyxJQUFJc0ksT0FBT3dDLE9BQU8sa0JBQzNCdWEsaUJBQWlCeUcsa0JBQWtCOXJCLElBQUttakIsS0FBTXpVLEtBQ2hELElDUkZxekMsTUFBTTMrQixHQUFHLGdCQUFnQixDQUFDcVosT0FBUXRaLFFBQ2hDLE1BQU04ZSxLQUFPOWUsS0FBS3JhLEtBQUssUUFDdkIsR0FBSW01QixLQUFLd2xDLEdBQUcscUJBQXNELElBQS9CeGxDLEtBQUtuNUIsS0FBSyxVQUFVa0IsT0FBYyxDQUNuRSxNQUFNd3pHLHNCQUF3QnY3RSxLQUFLbjVCLEtBQUssaUJBQ2xDMjBHLGlCQUFtQixHQUNuQkMsbUJBQXFCaDNHLEtBQUttRSxTQUFTdkUsSUFDdkMsT0FDQSx3QkFFRmszRyxzQkFBc0I1NUYsV0FBVys1QyxNQUFLLENBQUMvRSxFQUFHK2tELGdCQUN4QyxNQUFNMTRHLElBQU0wNEcsYUFBYXI3QixhQUFhczdCLGFBQ2xDbDNHLEtBQUtDLEtBQUswQixJQUFJLGlCQUFpQnBELFNBQ2pDMDRHLGFBQWFyN0IsWUFBYzU3RSxLQUFLQyxLQUFLQyxTQUFTLGlCQUFpQjNCLFNBRTdEeTRHLGtCQUFxQixDQUFDLFdBQVd0eEcsU0FBU3V4RyxhQUFhbitHLFFBQ3pEaStHLGlCQUFpQmo5RyxLQUFLbTlHLGFBQ3hCLElBRUZILHNCQUFzQkssUUFDdEJMLHNCQUFzQjFqRSxPQUNwQjJqRSxpQkFBaUJub0csTUFBSyxDQUFDaVYsTUFBT3V6RixTQUM1QnZ6RixNQUFNeU0sVUFBVTR0QixjQUFjazVELE9BQU85bUYsY0FHTCxVQUFoQ3dtRixzQkFBc0JoekUsTUFDeEJnekUsc0JBQXNCaHpFLElBQUksYUFDZSxTQUFoQ2d6RSxzQkFBc0JoekUsT0FDL0JnekUsc0JBQXNCaHpFLElBQUksT0FFOUIsS0M1QkZ1WCxNQUFNMytCLEdBQUcsbUJBQW1CMVgsTUFBT2dELEtBQU15VSxLQUFNemEsV0FBbkJnRCxJQ0E1QnEyQyxNQUFNMytCLEdBQUcsZUFBZTFYLE1BQU9nRCxLQUFNeVUsS0FBTXphLFdBQ3JDaEMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEseUJBQ3FDLFNBQTdESSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFBaUI4SyxlQUM3QytSLEtBQUtyYSxLQUFLLE9BQU9vakIsU0FFZ0MsS0FBL0N4bEIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzVCNmMsS0FBS3JhLEtBQUssT0FBT29nRCxLQUFLLE1BQU94aUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBR1AsS0FBOUNJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUM1QjZjLEtBQUtyYSxLQUFLLE1BQU1xYSxLQUFLemMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBRW5ELElDWEZ5N0MsTUFBTTMrQixHQUFHLG9CQUFvQixDQUFDMjZGLFdBQVk1NkYsS0FBTXpVLFFBQzlDa21CLEVBQUUsUUFBUWtsQixPQUFPLDhDQUFnRHB6QyxLQUFLQyxLQUFLeVcsT0FBT3RmLEtBQUtnUyxLQUFLcEosS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsY0FBZ0IsbUNBQW9DLENBQUU0NkMsSUFBS3g2QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxjQUFpQixVQUFVMDNHLFlBQVlwcEYsRUFBRSxLQUFNelIsTUFBSyxJQ0RqUTQrQixNQUFNMytCLEdBQUcsa0JBQWtCLENBQUNwakIsSUFBS21qQixLQUFNemEsV0FDckMsSUFBSyxNQUFNbVksUUFBUW5ZLFFBQVF1MUcsU0FDekIsSUFBSyxNQUFNOXpFLFNBQVN6aEMsUUFBUXUxRyxTQUFTcDlGLE1BQU0rNkQsT0FDekMsR0FBSWx6RSxRQUFRdTFHLFNBQVNwOUYsZ0JBQWlCK3FGLGVBQWdCLENBQ3BELE1BQU1zUyxJQUFNLzZGLEtBQUtyYSxLQUFLLFVBQVkrWCxLQUFPLElBQU1zcEIsTUFBUSxNQUNwQyxJQUFmK3pFLElBQUlsMEcsU0FDTmswRyxJQUFJLEdBQUczOEIsWUFBYzc2RSxLQUFLQyxLQUFLQyxTQUFTLHVDQUU1QyxDQUVKLElDVkZtN0MsTUFBTTMrQixHQUFHLHdCQUF3QixDQUFDcGpCLElBQUttakIsS0FBTW5XLFFBQzNDaXZFLG9CQUFvQk0sWUFBWXA1RCxLQUFJLEdWc0J0QyxHV2xCRnpYLGVBQWV5eUcsa0JBQW1CenZHLE1BQ2hDLE1BQU0wdkcsWUFBYyxJQUFJM3lFLGdCQUN0Qi84QixLQUFLZ2dCLFVBQ0xoZ0IsS0FBSzZXLFVBQ0w3VyxLQUFLaWYsYUFFUHl3RixZQUFZbHlFLGFBQWV4OUIsS0FBSzZMLFNBRWhDLGFBRHNCNmpHLFlBQVlqeEUsZ0JBRXBDLENBRUF6aEMsZUFBZTJ5RyxjQUFlM3ZHLE1BQzVCLElBQ0UsSUFBSXBMLE1BRUZBLE1BREVvTCxLQUFLc0gsTUFDQ3RQLEtBQUt1UCxPQUFPM1AsSUFBSW9JLEtBQUtzSCxPQUFPRCxPQUFPelAsSUFBSW9JLEtBQUsyM0QsV0FBVy9pRSxNQUV2RG9ELEtBQUtvUCxPQUFPeFAsSUFBSW9JLEtBQUsyM0QsV0FFL0IsTUFBTWgzRCxLQUFPL0wsTUFBTWdVLE1BQU1oUixJQUFJb0ksS0FBS1csWUFDWjNJLEtBQUtvUCxPQUN4QnhQLElBQUlvSSxLQUFLNDNELFNBQ1Q5L0Qsd0JBQXdCLE9BQVEsQ0FBQzZJLEtBQUttNUMsWUFFdkNsbEQsTUFBTXdvRCx3QkFBd0IsT0FBUSxDQUFDejhDLEtBQUtnSSxJQUVoRCxDQUFFLE1BQU96TixHQUVQLE9BREF1SSxHQUFHQyxjQUFjd1UsTUFBTWhkLElBQ2hCLENBQ1QsQ0FDQSxPQUFPLENBQ1QsQ0NqQ08sTUFBTTAwRyxpQkFPWCx1QkFBYUMsQ0FBWTd2RyxNQUN2QixRQUE2QixJQUFsQkEsS0FBS3VZLFVBQ2QsR0FBSXZnQixLQUFLc0csS0FBS3FLLEtBQU8zSSxLQUFLdVksU0FDeEIsT0FBUXZZLEtBQUtqSCxNQUNYLElBQUssbUJBQ0hnOUUsdUJBQXVCMkosd0JBQXdCMS9FLEtBQUtxL0UsU0FDcEQsTUFDRixJQUFLLGlCQUNIcm5GLEtBQUtvUCxPQUFPeFAsSUFBSW9JLEtBQUtxL0UsU0FBUzVtRixNQUFNQyxRQUFPLEdBQzNDLE1BQ0YsSUFBSyxvQkFDSGllLGlCQUFpQjBGLGdCQUFnQnJjLE1BQ2pDLE1BQ0YsSUFBSyxxQkFDSDJXLGlCQUFpQm9GLGVBQWUvYixNQUNoQyxNQUNGLElBQUssdUJBQ0gyVyxpQkFBaUJ3RSxpQkFBaUJuYixXQUluQyxDQUNMLEdBQUloSSxLQUFLc0csS0FBSzJFLEtBQ1osT0FBUWpELEtBQUtqSCxNQUNYLEtBQUt3OEIsaUJBQWlCdEYsY0FBY2wzQixLQUNsQ3c4QixpQkFBaUJ4RixTQUFTL3ZCLE1BQzFCLE1BQ0YsS0FBS3d4QixrQkFBa0J2QixjQUFjbDNCLEtBQ25DeTRCLGtCQUFrQnpCLFNBQVMvdkIsTUFDM0IsTUFDRixJQUFLLGdCQUVrQlksU0FBU1osS0FBS1csT0FDNUJYLEtBQUs4MkYsUUFBUTkyRixLQUFLQSxNQUsvQixHQUNPLGVBRENBLEtBQUtqSCxLQUVUdUosY0FBY3NsRCxrQkFHcEIsQ0FDRixDQU1BLDBCQUFPa29ELENBQXFCOXZHLE1BQzFCLEdBQUloSSxLQUFLc0csS0FBSzJFLEtBQ1pqRCxLQUFLdVksU0FBV3ZnQixLQUFLc0csS0FBS3FLLEdBQzFCaW5HLGlCQUFpQkMsV0FBVzd2RyxVQUN2QixDQUNMLE1BQU15ckQsUUFBVXp6RCxLQUFLOGtCLE1BQU03ckIsUUFBT2d0QixHQUFLQSxFQUFFeGlCLFFBQVV3aUIsRUFBRWhiLE9BQ2pEd29ELFFBQVFud0QsUUFDVjBFLEtBQUt1WSxTQUFXa3pDLFFBQVEsR0FBRzlpRCxHQUMzQjNRLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFldFksT0FFaEN5RCxHQUFHQyxjQUFjd1UsTUFDZmxnQixLQUFLQyxLQUFLQyxTQUFTLCtCQUd6QixDQUNGLENBVUEsd0JBQU82M0csQ0FDTC92RyxNQUNBLE9BQVcsS0FBSSxnQkFBbUIsRUFBSSxhQUFnQixHQUFTLENBQUMsR0FFaEUsR0FBSTRjLGFBQTRCLElBQVhBLE9BQ25CLEdBQUlBLFNBQVc1a0IsS0FBS3NHLEtBQUtxSyxHQUN2QjNJLEtBQUt1WSxTQUFXdmdCLEtBQUtzRyxLQUFLcUssR0FDMUJpbkcsaUJBQWlCQyxXQUFXN3ZHLFVBQ3ZCLENBQ0wsTUFBTTFCLEtBQU90RyxLQUFLOGtCLE1BQU1sbEIsSUFBSWdsQixhQUNMLElBQVp0ZSxLQUFLcUssSUFBc0JySyxLQUFLN0MsUUFDekN1RSxLQUFLdVksU0FBV2phLEtBQUtxSyxHQUNyQjNRLEtBQUtxZ0IsT0FBT0MsS0FBSyxjQUFldFksT0FDdkJnd0csZ0JBQ1R2c0csR0FBR0MsY0FBY3dVLE1BQU1sZ0IsS0FBS0MsS0FBS0MsU0FBUyx5QkFFOUMsTUFFSSszRyxhQUNGTCxpQkFBaUJDLFdBQVc3dkcsTUFFOUJoSSxLQUFLcWdCLE9BQU9DLEtBQUssY0FBZXRZLEtBRXBDLEVDdVhGLFNBQVNrd0csYUFBY2o1RyxPQUNyQixPQUFPQSxNQUFNc3lCLFFBQ2YsQ0EzY0E4cEIsTUFBTTMrQixHQUFHLHdCQUF3QixDQUFDcGpCLElBQUttakIsS0FBTXphLFdBQzNDLE1BQU1tMkcsVUFBWWpxRixFQUFFNTBCLElBQUlpaUMsTUFBTW41QixLQUFLLHlCQUNuQysxRyxVQUNHLzFHLEtBQUssdUNBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyw0QkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssb0NBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyxzQkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssOENBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUywyQkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssd0NBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyx1QkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssMENBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyw2QkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssK0NBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyx1QkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssMkNBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyx3QkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssaUNBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyw0QkFDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssZ0NBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUyxnQ0FDbkIsU0FFTmk0RyxVQUNHLzFHLEtBQUssaURBQ0w3QyxRQUFRLGtCQUNSNjRHLE9BQ0MsOEJBQ0VwNEcsS0FBS0MsS0FBS0MsU0FBUywyQkFDbkIsUUFDSixJQVlKbTdDLE1BQU00Z0MsS0FBSyxRQUFRajNFLGlCQUNqQmhGLEtBQUtvRSxLQUFPLENBQ1ZvckQsT0FBUSxDQUNOaCtCLFdBQVlsbkIsY0FBY3drRCxnQkFDMUJwOUIsWUFBYXBuQixjQUFjeWtELGlCQUMzQnIyQyxNQUFPcE8sY0FBYzRrRCxZQUV2QmgwQixNQUFPLENBQ0xVLFlBRUZ2M0IsSUFBSyxDQUNIQyxLQUFNLENBQ0pDLFlBQVksRUFDWkksY0FBYyxJQUdsQnlFLEtBQU0sQ0FBQ294QyxJQUFLeGhELFFBQ1Y1QixLQUFLZ1MsS0FBS294QyxLQUFPeGhELE9BR3JCa3RHLE9BQU8zakcsVUFBVXcvQyxlQUFpQkEsY0FDcEMsSXhEOUhPLFlBQXFCczJELFdBSTFCaDlELE1BQU0zK0IsR0FBRyxpQkFBaUIsQ0FBQ3BqQixJQUFLbWpCLEtBQU16VSxPQUNwQ3NsRixvQkFBb0JFLFVBQVVsMEYsSUFBS21qQixLQUFNelUsUUFHM0NxekMsTUFBTTRnQyxLQUFLLG1CQUFtQixXQUM1QnFSLG9CQUFvQkksU0FBUzJxQixXQUM3Qi9xQixvQkFBb0JqdEUsT0FBU2k0RixVQUFVQyxlQUFldjRHLEtBQUt2QixPQUFPa1MsSUFDbEUyOEUsb0JBQW9CanRFLE9BQU9xdEUsU0FBUyxnQkFBaUJwL0QsZUFDckRnL0Qsb0JBQW9CanRFLE9BQU9xdEUsU0FBUyxXQUFZUixVQUNoREksb0JBQW9CanRFLE9BQU9xdEUsU0FBUyxTQUFVTCxPQUVoRCxJQUVBaHlDLE1BQU0zK0IsR0FBRyxxQkFBcUIsQ0FBQ3BqQixJQUFLbWpCLEtBQU16VSxPQUN4Q29sRixpQkFBaUJweUQsY0FBY3ZlLE9BRW5DLEN3RDRHQSs3RixDQUFRMWtCLG1CQUVSejRDLE1BQU0zK0IsR0FBRyx1QkFBdUIsQ0FBQ3BqQixJQUFLbWpCLEtBQU16VSxPQUMxQ3NnRSxXQUFXQyxvQkFBb0JqdkUsSUFBS21qQixLQUFNelUsUUM1STFDcXpDLE1BQU0zK0IsR0FBRyxlQUFlLENBQUNELEtBQU12SixXQUU3QixHQUFJQSxRQUFRM0ssTUFBTSxnQkFBaUIsQ0FFakMsTUFBTWt3RyxTQUFXdmxHLFFBQVEzSyxNQUFNLFVBZ0MvQixPQS9CSWt3RyxTQUNGLElBQUlqMEcsS0FBSyxTQUFTWCxLQUFLLENBQUVtQixPQUFPLElBQVErRSxNQUFLK1AsSUFDM0MsTUFBTWpoQixFQUFJaWhCLEVBQUU3VSxPQUNOeXpHLElBQU1ELFNBQ1QveEcsS0FBSW1mLElBQ0gsSUFBSTZ5RixJQUFNLEdBY1YsT0FiWUEsSUFBUjcvRyxHQUFLLEVBQVNtSCxLQUFLQyxLQUFLQyxTQUFTLHdCQUM1QnJILEdBQUssSUFBV21ILEtBQUtDLEtBQUtDLFNBQVMsZUFDbkNySCxHQUFLZ3RCLEVBQUksRUFDVjdsQixLQUFLQyxLQUFLQyxTQUFTLHVCQUNoQnJILEdBQUtndEIsRUFBSSxFQUNaN2xCLEtBQUtDLEtBQUtDLFNBQVMsb0JBQ2hCckgsR0FBS2d0QixFQUFTN2xCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ25DckgsR0FBSyxJQUNSZ3RCLEVBQUksR0FBVTdsQixLQUFLQyxLQUFLQyxTQUFTLGVBRTFCRixLQUFLQyxLQUFLQyxTQUFTLGdCQUVoQ3c0RyxLQUFPLElBQU0xNEcsS0FBS0MsS0FBS0MsU0FBUyxjQUFnQixJQUFNMmxCLEVBQy9DNnlGLE9BRVIzeEcsS0FBSyxPQUNSK1MsRUFBRXdlLFVBQVUsQ0FDVjVsQixRQUFTeE0sWUFBWXlNLGFBQ3JCRixPQUFRaW1HLEtBQ1QsSUFHSGp0RyxHQUFHQyxjQUFjd1UsTUFBTSwrQkFHbEIsQ0FDVCxLRDJHSnEyRixVQUFVQyxTQUVWbjdELE1BQU00Z0MsS0FBSyxtQkZ4SkosV0FDTGo4RSxLQUFLMnpDLFdBQWEya0UsVUFBVUMsZUFBZSxRQUMzQ3Y0RyxLQUFLMnpDLFdBQVcrNUMsU0FBUyxvQkFBcUIrcEIsbUJBQzlDejNHLEtBQUsyekMsV0FBVys1QyxTQUFTLGdCQUFpQmlxQixjQUM1QyxJRXNKQXQ4RCxNQUFNNGdDLEtBQUssU0FBUyxXQUVsQixNQUFNMDhCLFdBQWEsQ0FDakIsa0JBQ0EsV0FDQSxhQUNBLHVCQUNBLGNBR0YsSUFBSyxNQUFNem1ELEtBQUt5bUQsV0FBWSxDQUMxQixNQUFNQyxVQUFZdDJHLE9BQU93SyxRQUFRMVYsS0FBSzg2RCxJQUFJeHJELEtBQUl4RCxHQUNyQyxDQUFDQSxFQUFFLEdBQUlsRCxLQUFLQyxLQUFLQyxTQUFTZ0QsRUFBRSxPQUVyQzlMLEtBQUs4NkQsR0FBSzBtRCxVQUFVbHFHLFFBQU8sQ0FBQzRGLElBQUtwUixLQUMvQm9SLElBQUlwUixFQUFFLElBQU1BLEVBQUUsR0FDUG9SLE1BQ04sQ0FBQyxFQUNOLENBRUEsSUFBSXVrRyxZQUFjdnpHLE9BQU95L0MsY0FBY2xMLFdBQ3JDcDBDLEdBQUtBLEVBQUVrTCxLQUFPdlosS0FBSzBGLE9BQU9PLFFBRVAsSUFBakJ3N0csY0FDRnZ6RyxPQUFPeS9DLGNBQWM4ekQsYUFBYTE0RyxLQUNoQywyQ0FFSjA0RyxZQUFjdnpHLE9BQU95L0MsY0FBY2xMLFdBQ2pDcDBDLEdBQUtBLEVBQUVrTCxLQUFPdlosS0FBSzBGLE9BQU9HLGVBRVAsSUFBakI0N0csY0FDRnZ6RyxPQUFPeS9DLGNBQWM4ekQsYUFBYTE0RyxLQUNoQyxtREFHSixNQUFNMjRHLGNBQWtCeDNHLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxNQUFrQixPQUFWLFFBQzNFNkQsT0FBT3kvQyxjQUFjOHpDLFFBQ25CLENBQ0Vsb0YsR0FBSXZaLEtBQUswRixPQUFPQyxZQUNoQixDQUFDKzdHLGVBQWdCLHlCQUNqQjM0RyxLQUFNLGdEQUVSLENBQ0V3USxHQUFJdlosS0FBSzBGLE9BQU9FLFlBQ2hCLENBQUM4N0csZUFBZ0Isb0JBQ2pCMzRHLEtBQU0saURBRVIsQ0FDRXdRLEdBQUl2WixLQUFLMEYsT0FBT0ksZUFDaEIsQ0FBQzQ3RyxlQUFnQixzQkFDakIzNEcsS0FBTSwyQ0FFUixDQUNFd1EsR0FBSXZaLEtBQUswRixPQUFPSyxNQUNoQixDQUFDMjdHLGVBQWdCLGFBQ2pCMzRHLEtBQU0sNkNBR1osSUFFQWs3QyxNQUFNMytCLEdBQUcsc0JBQXNCLENBQUMxVSxLQUFNaEcsUUFBUzRpQixVQUM3QyxHQUFJNWtCLEtBQUs0a0IsU0FBV0EsT0FBUSxDQUMxQixNQUFNbTBGLFVBQVk1NkcsaUJBQWlCNEQsYUFBYWlHLE1BQ2hELEdBQUkrd0csVUFDRixPQUFRQSxXQUNOLEtBQUszaEgsS0FBSzBGLE9BQU9FLFlBQ2pCLEtBQUs1RixLQUFLMEYsT0FBT0csWUFDakIsS0FBSzdGLEtBQUswRixPQUFPSSxlQUNqQixLQUFLOUYsS0FBSzBGLE9BQU9LLE1BQ2pCLEtBQUsvRixLQUFLMEYsT0FBT00sTUFDakIsS0FBS2hHLEtBQUswRixPQUFPTyxLQUNmMkssS0FBSzRGLE9BQU80ZixhQUFhdXJGLFVBQVcsQ0FDbENuMEQsWUFBWSxJQUVkLE1BQ0YsS0FBS3h0RCxLQUFLMEYsT0FBT0MsWUFDZixDQUNFLE1BQU1rNUMsU0FBV2p1QyxLQUFLcEcsTUFBTXdDLE1BQU02eEMsU0FDbEMsSUFBSW4xQyxTQUFXLE1BQ0UsSUFBYm0xQyxTQUNGbjFDLFNBQVdrSCxLQUFLbEgsVUFBVW0wQixRQUNKLElBQWJnaEIsV0FDVG4xQyxTQUFXa0gsS0FBS2xILFVBQVVFLFFBQ3JCeEMsTUFBTXNDLFlBQ1RBLFNBQVdnRSxLQUFLdUksTUFBTXZNLFNBQVcsUUFHckNrSCxLQUFLNEYsT0FBTzRmLGFBQWFwMkIsS0FBSzBGLE9BQU9DLFlBQWEsQ0FDaEQ2bkQsWUFBWSxFQUNaM08sU0FDQW4xQyxVQUVKLEVBSVIsS0FHRnU2QyxNQUFNMytCLEdBQUcsc0JBQXNCLENBQUMxVSxLQUFNaEcsUUFBUzRpQixVQUM3QyxHQUFJNWtCLEtBQUs0a0IsU0FBV0EsT0FBUSxDQUMxQixNQUFNbTBGLFVBQVk1NkcsaUJBQWlCNEQsYUFBYWlHLE1BQ2hELEdBQUkrd0csVUFDRixPQUFRQSxXQUNOLEtBQUszaEgsS0FBSzBGLE9BQU9DLFlBQ2pCLEtBQUszRixLQUFLMEYsT0FBT0UsWUFDakIsS0FBSzVGLEtBQUswRixPQUFPRyxZQUNqQixLQUFLN0YsS0FBSzBGLE9BQU9JLGVBQ2pCLEtBQUs5RixLQUFLMEYsT0FBT0ssTUFDakIsS0FBSy9GLEtBQUswRixPQUFPTSxNQUNqQixLQUFLaEcsS0FBSzBGLE9BQU9PLEtBQ2YySyxLQUFLNEYsT0FBT3FkLGVBQWU4dEYsVUFBVyxDQUNwQ24wRCxZQUFZLElBSXRCLEtBS0Z2SixNQUFNMytCLEdBQUcsb0JBQW9CczhGLFlBQzNCLEdBQUlBLHFCQUFxQkMsY0FBZSxDQUN0QyxNQUFNdHdHLEtBQU8zSSxLQUFLNFEsTUFBTXhPLE1BQUs0Z0IsR0FBZ0IseUJBQVhBLEVBQUVocUIsT0FDcEMsR0FBSTJQLEtBQU0sQ0FDUixNQUNNdXdHLFlBRE9GLFVBQVV4MUUsU0FDRXBoQyxLQUFLLHNCQUFzQnVHLEtBQUtnSSxRQUNyRHVvRyxjQUFhQSxZQUFZLEdBQUdqM0UsTUFBTUMsUUFBVSxPQUNsRCxDQUNGLEtBR0ZtWixNQUFNMytCLEdBQUcsY0FBYyxDQUFDMnlDLElBQUtybkQsS0FBTXNuRCxPQUMxQmhsRCxjQUFjOGtELFlBQVlDLElBQUtybkQsS0FBTXNuRCxRQUc5Q2pVLE1BQU0zK0IsR0FBRyxpQkFBaUIsQ0FBQ3BqQixJQUFLbWpCLEtBQU16VSxPQUNwQ2lnQyxTQUFTZ0gsY0FBYzMxQyxJQUFLbWpCLEtBQU16VSxRQUVwQ3F6QyxNQUFNMytCLEdBQUcscUJBQXFCLENBQUMwUixZQUFhcm9CLFNBQVV5ekYsS0FBTTltRixVQUMxRHUxQixTQUFTMkgsb0JBQW9CeGhCLFlBQWFyb0IsU0FBVXl6RixLQUFNOW1GLFdBRzVEMm9DLE1BQU0zK0IsR0FBRyxTQUFTMVgsVUFzQmhCLFNBQVNtMEcsc0JBQXVCanRDLE1BQU92N0QsSUFDbEIzUSxLQUFLb0UsS0FBS2d5QyxPQUFPODFCLE9BQXpCLFNBQVB2N0QsR0FBeUMsS0FDZDNRLEtBQUtvMkMsT0FBT3gyQyxJQUFJK1EsR0FDakQsT0F4Qk1xNkQsUUFBUUMsaUJBbUxoQixXQUNFLE1BQU12N0MsS0FBT3hCLEVBQUUsUUFDZjNjLFNBQVN1c0QsaUJBQWlCLFFBQVMxSCxnQkFBZ0JZLFVBQ25EdG5DLEtBQUtoVCxHQUFHLFFBQVMsc0JBQXVCbEcsVUFBVTYyQyxvQkFDbEQ5N0MsU0FBU3VzRCxpQkFBaUIsWUFBYW82QyxhQUN6QyxDQXBMRWtCLEdBSUFwNUcsS0FBS29FLEtBQUtvSyxnQkFBa0J4TyxLQUFLb2hELE1BQU14aEQsSUFBSSxnQkFBZ0IwaEQsZ0JBRTNEdGhELEtBQUtxZ0IsT0FBTzNELEdBQUcsZUFBZTFYLGFBQzVCNHlHLGlCQUFpQkMsV0FBVzd2RyxLQUFJLElBbUJsQyxNQUFNcXhHLFlBQWMsQ0FBRTlnSCxLQUFNLDRCQUM1QixJQUFLLE1BQU1rTixLQUFLekYsS0FBS28yQyxPQUNuQmlqRSxZQUFZNXpHLEVBQUVvdUMsS0FBT3B1QyxFQUFFek0sS0FHekJnSCxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsNEJBQTZCLENBQzFEMTBGLEtBQU0scUNBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsT0FDVGhkLEtBQU1qQyxPQUNOMm1HLFFBQVM0VCxZQUNUM1QsU0FBVS8wRixJQUFNd29HLHNCQUFzQix3QkFBeUJ4b0csTUFHakUzUSxLQUFLbUUsU0FBU3VwRixTQUFTLE9BQVEsNkJBQThCLENBQzNEMTBGLEtBQU0sc0NBQ044N0QsTUFBTyxRQUNQcnVDLFFBQVEsRUFDUjFJLFFBQVMsT0FDVGhkLEtBQU1qQyxPQUNOMm1HLFFBQVM0VCxZQUNUM1QsU0FBVS8wRixJQUFNd29HLHNCQUFzQix5QkFBMEJ4b0csTUEyQ2xFM1EsS0FBS29FLEtBQUtneUMsT0FBUyxDQUNqQmtqRSxzQkFDNkQsU0FBM0R0NUcsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNkJBQ3RCLEtBQ0FJLEtBQUtvMkMsT0FBT3gyQyxJQUNaSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFFaEMyNUcsdUJBQzhELFNBQTVEdjVHLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUN0QixLQUNBSSxLQUFLbzJDLE9BQU94MkMsSUFDWkksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsK0JBTWxDLElBS0Z5N0MsTUFBTTMrQixHQUNKLHdCQUNhLENBQUNwakIsSUFBS21qQixLQUFNelUsT0FDVmloRyxlQUFlK0IsVUFBVTF4RyxJQUFLbWpCLEtBQU16VSxRQUdyRHF6QyxNQUFNMytCLEdBQUcsdUJBQXVCLENBQUNwakIsSUFBS21qQixPQUNwQ3dzRixlQUFlenRGLFFBQVFsaUIsSUFBS21qQixRQUk5QjQrQixNQUFNMytCLEdBQUcsbUJBQW1CODhGLGdCQUFrQkEsZUFBZW4rQyxpQkFDN0RoZ0IsTUFBTTMrQixHQUFHLDJCQUEyQixDQUFDcGpCLElBQUttakIsS0FBTXpVLE9BQzlDKzZELGtCQUFrQkYsVUFBVXZwRSxJQUFLbWpCLEtBQU16VSxRQUV6Q3F6QyxNQUFNMytCLEdBQUcsc0JBQXNCLENBQUNwakIsSUFBS21qQixLQUFNelUsT0FDekM0NUQsYUFBYWlCLFVBQVV2cEUsSUFBS21qQixLQUFNelUsUUFLcENxekMsTUFBTTMrQixHQUFHLGNBQWVwUyxjQUFjOGpELGdCQUt0Qy9TLE1BQU0zK0IsR0FBRywwQkFBMEIsU0EwQm5DMitCLE1BQU0zK0IsR0FBRyxtQkFBb0J5bUQsbUJBQW1CbnNCLGFBQ2hEcUUsTUFBTTMrQixHQUFHLGtCQUFtQnltRCxtQkFBbUJuc0IsYUFFL0NxRSxNQUFNMytCLEdBQUcseUJBQTBCd3JFLFNBQVNDLFlBQzVDOXNDLE1BQU0zK0IsR0FBRyxzQkFBdUJ3ckUsU0FBU1EsZ0JBRXpDcnRDLE1BQU0zK0IsR0FBRyxpQkFBa0Jtc0UsV0FBV0UsaUJBRXRDMXRDLE1BQU0zK0IsR0FBRyxzQkU3ZEYsU0FBNkI5ZixNQUFPNkQsTUFBT3VILE1BQ2hELEdBQWtCLFNBQWRBLEtBQUtqSCxNQUFtQmlILEtBQUsySCxRQUFTLENBQ3hDLEdBQUkvUyxNQUFNb0wsS0FBSzZyQyxNQUFRN3JDLEtBQUsySCxRQUMxQixPQUVGLElBQUlnd0QsVUFBWSxLQU1oQixPQUpFQSxVQURFMzNELEtBQUtrSCxTQUFXbEgsS0FBS2lILFFBQ1hqUCxLQUFLdVAsT0FBTzNQLElBQUlvSSxLQUFLa0gsU0FBU0csT0FBT3pQLElBQUlvSSxLQUFLaUgsU0FBU3JTLE1BRXZEb0QsS0FBS29QLE9BQU94UCxJQUFJb0ksS0FBSzJILFNBRTNCL1MsTUFBTW9MLEtBQUtqSCxNQUNqQixJQUFLLFlBQ0wsSUFBSyxNQUNMLElBQUssV0FDSCxJQUFLLENBQUMsU0FBUzJFLFNBQVNzQyxLQUFLQSxLQUFLakgsTUFDaEMsT0FFRixNQUNGLElBQUssVUFDSCxPQUNGLElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVTJFLFNBQVNzQyxLQUFLQSxLQUFLakgsTUFDMUQsT0FHRjQrRCxXQUNGQSxVQUFVdmEsd0JBQXdCLE9BQVEsQ0FBQ3A5QyxLQUFLQSxLQUFLNnJDLEtBRXpELENBQ0YsSUY0Y0F2dUMsT0FBT21HLEdBQUd0SCxTQUFXa2xGLHNCQUNyQi9qRixPQUFPbUcsR0FBR293RCxXQUFhNHRCLHdCQUN2Qm5rRixPQUFPbUcsR0FBRzJELE9BQVN5NkUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RpdmUtZWZmZWN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2hlbHBlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hdmVyYWdlLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItcGlja2VyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWdyb3VwLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZC1hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9zYW4tY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1saW5rLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9yb2xsLWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvZGFtYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9zYW5kYXRhLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb25jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3BvaW50LXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXItcm9sbC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvcmFuZ2Vjb21iYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL2FjdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1lZGl0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29udGV4dC1tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYmF0Y2guanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kcm9wLWNvYy1pZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvbWVudS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jYW52YXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NldHRpbmdzLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tcGVuZGl1bS1kaXJlY3RvcnkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9yLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvYm9vay9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvY2hhc2UvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2tpbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3ZlaGljbGUvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS1vdGhlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9nYW1lLXJ1bGVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvYXJjaGV0eXBlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvY2hhc2Uvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0VjIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1qb3VybmFsLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctcm9sbC10YWJsZS1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NldHVwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2tpbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NwZWxsL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc3RhdHVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvdGFsZW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL3ZlaGljbGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbml0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2UtcmVhZHktbGFzdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy90b29sdGlwcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXRvdXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItdG91cnMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luZGV4LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9jcmVhdGUtdG9rZW4uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWFjdG9yLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXBhdXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGxheWVyLWxpc3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1yZWFsLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3NvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvYzcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2Vib3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOYW1lc3BhY2UgQ09DNyBDb25maWd1cmF0aW9uIFZhbHVlc1xuZXhwb3J0IGNvbnN0IENPQzcgPSB7fVxuXG4vLyBDdXN0b20gY2hhdE1lc3NhZ2Vcbi8vIENPTkZJRy5DaGF0TWVzc2FnZS50ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2hhdC1tZXNzYWdlLmh0bWwnO1xuXG4vKipcbiAqIFRoZSBzZXQgb2YgRXJhcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LmVyYXMgPSB7XG4gIHN0YW5kYXJkOiAnQ29DNy5FcmExOTIwJyxcbiAgbW9kZXJuOiAnQ29DNy5FcmFNb2Rlcm4nLFxuICBtb2Rlcm5QdWxwOiAnQ29DNy5FcmFNb2Rlcm5QdWxwJyxcbiAgcHVscDogJ0NvQzcuRXJhUHVscCcsXG4gIGRvd25EYXJrZXJUcmFpbHM6ICdDb0M3LkVyYURvd25EYXJrZXJUcmFpbHMnLFxuICBkb3duRGFya2VyVHJhaWxzUHVscDogJ0NvQzcuRXJhRG93bkRhcmtlclRyYWlsc1B1bHAnLFxuICBkYXJrQWdlczogJ0NvQzcuRXJhRGFya0FnZXMnLFxuICBkYXJrQWdlc1B1bHA6ICdDb0M3LkVyYURhcmtBZ2VzUHVscCcsXG4gIHJlZ2VuY3k6ICdDb0M3LkVyYVJlZ2VuY3knLFxuICByZWdlbmN5UHVscDogJ0NvQzcuRXJhUmVnZW5jeVB1bHAnLFxuICAvLyBSZWlnbiBvZiBUZXJyb3JcbiAgZ2FzTGlnaHQ6ICdDb0M3LkVyYUdhc0xpZ2h0JyxcbiAgaW52aWN0dXM6ICdDb0M3LkVyYUludmljdHVzJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cyA9IHtcbiAgZGVjaW1hbExlZnQ6ICdkZWNpbWFsTGVmdCcsXG4gIGRlY2ltYWxSaWdodDogJ2RlY2ltYWxSaWdodCcsXG4gIGludGVnZXJMZWZ0OiAnaW50ZWdlckxlZnQnLFxuICBpbnRlZ2VyUmlnaHQ6ICdpbnRlZ2VyUmlnaHQnLFxuICBsc2Q6ICdsc2QnLFxuICByb21hbjogJ3JvbWFuJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5Rm9ybWF0cyA9IHtcbiAgZGVjaW1hbExlZnQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0RGVjaW1hbExlZnQnLFxuICBkZWNpbWFsUmlnaHQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0RGVjaW1hbFJpZ2h0JyxcbiAgaW50ZWdlckxlZnQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0SW50ZWdlckxlZnQnLFxuICBpbnRlZ2VyUmlnaHQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0SW50ZWdlclJpZ2h0JyxcbiAgbHNkOiAnQ29DNy5Nb25ldGFyeUZvcm1hdExzZCcsXG4gIHJvbWFuOiAnQ29DNy5Nb25ldGFyeUZvcm1hdFJvbWFuJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5VHlwZUtleXMgPSB7XG4gIG5vbmU6ICdub25lJyxcbiAgYXNzZXM6ICdhc3NlcycsXG4gIHNlc3RlcnRpaTogJ3Nlc3RlcnRpaScsXG4gIHF1aW5hcmlpOiAncXVpbmFyaWknLFxuICBkZW5hcmlpOiAnZGVuYXJpaScsXG4gIGQ6ICdkJyxcbiAgczogJ3MnLFxuICB2YWx1ZTogJ3ZhbHVlJyxcbiAgbXVsdGlwbGllcjogJ211bHRpcGxpZXInXG59XG5cbkNPQzcubW9uZXRhcnlUeXBlcyA9IHtcbiAgbm9uZToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZU5vbmUnLFxuICAgIGZpbHRlcjogW11cbiAgfSxcbiAgYXNzZXM6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVBc3NlcycsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgc2VzdGVydGlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlU2VzdGVydGlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBxdWluYXJpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVF1aW5hcmlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBkZW5hcmlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlRGVuYXJpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgZDoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZURlbmllcnMnLFxuICAgIGZpbHRlcjogWydsc2QnXVxuICB9LFxuICBzOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlU291cycsXG4gICAgZmlsdGVyOiBbJ2xzZCddXG4gIH0sXG4gIHZhbHVlOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlT25lJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH0sXG4gIG11bHRpcGxpZXI6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVDcmVkaXRSYXRpbmcnLFxuICAgIGZpbHRlcjogW11cbiAgfVxufVxuXG5DT0M3LmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgc3RyOiAnQ29DNy5DaGFyYWNTdHInLFxuICBjb246ICdDb0M3LkNoYXJhY0NvbicsXG4gIHNpejogJ0NvQzcuQ2hhcmFjU2l6JyxcbiAgZGV4OiAnQ29DNy5DaGFyYWNEZXgnLFxuICBhcHA6ICdDb0M3LkNoYXJhY0FwcCcsXG4gIGludDogJ0NvQzcuQ2hhcmFjSW50JyxcbiAgcG93OiAnQ29DNy5DaGFyYWNQb3cnLFxuICBlZHU6ICdDb0M3LkNoYXJhY0VkdSdcbn1cblxuLyoqXG4gKiBUaGUgc2V0IG9mIFNraWxscyBhdHRyaWJ1dGVzIHVzZWQgd2l0aGluIHRoZSBzeXN0ZW1cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkNPQzcuc2tpbGxQcm9wZXJ0aWVzID0ge1xuICBub2FkanVzdG1lbnRzOiAnQ29DNy5Ta2lsbE5vQWRqdXN0bWVudHMnLFxuICBub3hwZ2FpbjogJ0NvQzcuU2tpbGxOb1hwR2FpbicsXG4gIHNwZWNpYWw6ICdDb0M3LlNraWxsU3BlY2lhbCcsXG4gIHJhcml0eTogJ0NvQzcuU2tpbGxSYXJpdHknLFxuICBwdXNoOiAnQ29DNy5Ta2lsbFB1c2gnLFxuICBjb21iYXQ6ICdDb0M3LlNraWxsQ29tYmF0JyxcbiAgZmlnaHRpbmc6ICdDb0M3LlNraWxsRmlnaHRpbmcnLFxuICBmaXJlYXJtOiAnQ29DNy5Ta2lsbEZpcmVhcm0nLFxuICByZXF1aXJlc25hbWU6ICdDb0M3LlNraWxsUmVxdWlyZXNOYW1lJyxcbiAga2VlcGJhc2V2YWx1ZTogJ0NvQzcuU2tpbGxLZWVwQmFzZVZhbHVlJyxcbiAgcGlja25hbWVvbmx5OiAnQ29DNy5Ta2lsbFBpY2tOYW1lT25seScsXG4gIG9ubHlvbmU6ICdDb0M3LlNraWxsU3BlY2lhbGl6YXRpb25Jc1VuaXF1ZSdcbn1cblxuQ09DNy53ZWFwb25Qcm9wZXJ0aWVzID0ge1xuICBtZWxlZTogJ0NvQzcuV2VhcG9uLlByb3BlcnR5Lk1lbGVlJyxcbiAgcm5nZDogJ0NvQzcuV2VhcG9uUm5nZCcsXG4gIG1udnI6ICdDb0M3LldlYXBvblByb3BlcnlNYW5ldXZlcicsXG4gIHRocm93bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlRocm93bicsXG4gIHNob3RndW46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5TaG90Z3VuJyxcbiAgZGJybDogJ0NvQzcuV2VhcG9uRGJybCcsXG4gIGltcGw6ICdDb0M3LldlYXBvbkltcGwnLFxuICBicnN0OiAnQ29DNy5XZWFwb25CcnN0JyxcbiAgYXV0bzogJ0NvQzcuV2VhcG9uQXV0bycsXG4gIGFoZGI6ICdDb0M3LldlYXBvbkFoZGInLFxuICBhZGRiOiAnQ29DNy5XZWFwb25BZGRiJyxcbiAgc2xudDogJ0NvQzcuV2VhcG9uU2xudCcsXG4gIHNwY2w6ICdDb0M3LldlYXBvblNwY2wnLFxuICBtb250OiAnQ29DNy5XZWFwb25Nb250JyxcbiAgYmxzdDogJ0NvQzcuV2VhcG9uQmxzdCcsXG4gIHN0dW46ICdDb0M3LldlYXBvblN0dW4nLFxuICByYXJlOiAnQ29DNy5XZWFwb25SYXJlJyxcbiAgYnVybjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LkJ1cm4nXG59XG5cbkNPQzcuc3BlbGxQcm9wZXJ0aWVzID0ge1xuICBjYWxsOiAnQ29DNy5DYWxsU3BlbGwnLFxuICBkaXNtaXNzOiAnQ29DNy5EaXNtaXNzU3BlbGwnLFxuICBjb250YWN0OiAnQ29DNy5Db250YWN0U3BlbGwnLFxuICBzdW1tb246ICdDb0M3LlN1bW1vblNwZWxsJyxcbiAgYmluZDogJ0NvQzcuQmluZFNwZWxsJyxcbiAgZW5jaGFudG1lbnQ6ICdDb0M3LkVuY2hhbnRtZW50U3BlbGwnLFxuICBnYXRlOiAnQ29DNy5HYXRlU3BlbGwnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFNwZWxsJ1xufVxuXG5DT0M3LmJvb2tUeXBlID0ge1xuICBteXRob3M6ICdDb0M3Lk15dGhvc0Jvb2snLFxuICBvY2N1bHQ6ICdDb0M3Lk9jY3VsdEJvb2snLFxuICBvdGhlcjogJ0NvQzcuT3RoZXInXG59XG5cbkNPQzcudGFsZW50VHlwZSA9IHtcbiAgcGh5c2ljYWw6ICdDb0M3LlBoeXNpY2FsVGFsZW50JyxcbiAgbWVudGFsOiAnQ29DNy5NZW50YWxUYWxlbnQnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFRhbGVudCcsXG4gIG1pc2NlbGxhbmVvdXM6ICdDb0M3Lk1pc2NlbGxhbmVvdXNUYWxlbnQnLFxuICBiYXNpYzogJ0NvQzcuQmFzaWNUYWxlbnQnLFxuICBpbnNhbmU6ICdDb0M3Lkluc2FuZVRhbGVudCcsXG4gIG90aGVyOiAnQ29DNy5PdGhlclRhbGVudCdcbn1cblxuQ09DNy5zdGF0dXNUeXBlID0ge1xuICBtYW5pYTogJ0NvQzcuTWFuaWEnLFxuICBwaG9iaWE6ICdDb0M3LlBob2JpYSdcbn1cblxuQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllcyA9IHtcbiAgY2xhc3NpYzogJ0NvQzcuQ2xhc3NpYycsXG4gIGxvdmVjcmFmdGlhbjogJ0NvQzcuTG92ZWNyYWZ0aWFuJyxcbiAgbW9kZXJuOiAnQ29DNy5Nb2Rlcm4nLFxuICBwdWxwOiAnQ29DNy5QdWxwJ1xufVxuXG5DT0M3LmZvcm11bGEgPSB7fVxuXG5DT0M3LmZvcm11bGEuYWN0b3IgPSB7XG4gICdAU1RSJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LmZvcm11bGEuYWN0b3JzaGVldCA9IHtcbiAgJ0BTVFInOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuc3RhdHVzID0ge1xuICB0ZW1wb0luc2FuZTogJ3RlbXBvSW5zYW5lJyxcbiAgaW5kZWZJbnNhbmU6ICdpbmRlZkluc2FuZScsXG4gIHVuY29uc2Npb3VzOiAndW5jb25zY2lvdXMnLFxuICBjcml0aWNhbFdvdW5kczogJ2NyaXRpY2FsV291bmRzJyxcbiAgZHlpbmc6ICdkeWluZycsXG4gIHByb25lOiAncHJvbmUnLFxuICBkZWFkOiAnZGVhZCdcbn1cblxuQ09DNy5uZXdCb29rTmFtZSA9ICdDb0M3Lk5ld0Jvb2tOYW1lJ1xuQ09DNy5uZXdTa2lsbE5hbWUgPSAnQ29DNy5OZXdTa2lsbE5hbWUnXG5DT0M3Lm5ld1NwZWxsTmFtZSA9ICdDb0M3Lk5ld1NwZWxsTmFtZSdcbkNPQzcubmV3SXRlbU5hbWUgPSAnQ29DNy5OZXdJdGVtTmFtZSdcbkNPQzcubmV3V2VhcG9uTmFtZSA9ICdDb0M3Lk5ld1dlYXBvbk5hbWUnXG5cbkNPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsID0gJ0NvQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsJ1xuXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuXG5DT0M3LmNvbWJhdENhcmRzID0ge1xuICBmaWdodEJhY2s6ICdDb0M3LkZpZ2h0QmFjaycsXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXG4gIG1hbmV1dmVyOiAnQ29DNy5NYW5ldXZlcicsXG4gIG5vUmVzcG9uc2U6ICdDb0M3Lk5vUmVzcG9uc2UnXG59XG4iLCIvKiBnbG9iYWwgQWN0aXZlRWZmZWN0LCBmb3VuZHJ5LCBnYW1lICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvQzdBY3RpdmVFZmZlY3QgZXh0ZW5kcyBBY3RpdmVFZmZlY3Qge1xuICBhcHBseSAoYWN0b3IsIGNoYW5nZSkge1xuICAgIGlmIChjaGFuZ2Uua2V5ID09PSAnc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUnKSB7XG4gICAgICAvLyBBcm1vciBjYW4gYmUgZnJlZSB0ZXh0IGlmIGJvdGggYXJlIG51bWJlcnMgYWxsb3cgY2FsY3VsYXRpb25cbiAgICAgIGlmICghaXNOYU4oY2hhbmdlLnZhbHVlKSAmJiAhaXNOYU4oYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUpKSB7XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlID0gTnVtYmVyKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hhbmdlLmtleSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJykge1xuICAgICAgLy8gSWYgZGIgaXMgY3VycmVudGx5IGEgbnVtYmVyIGFsbG93IHN0cmluZ3MgdG8gYmUgYXBwbGllZFxuICAgICAgaWYgKGlzTmFOKGNoYW5nZS52YWx1ZSkgJiYgIWlzTmFOKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlKSkge1xuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9IFN0cmluZyhhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IHN1cGVyLmFwcGx5KGFjdG9yLCBjaGFuZ2UpXG4gICAgcmV0dXJuIGNoYW5nZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW5hZ2UgQWN0aXZlIEVmZmVjdCBpbnN0YW5jZXMgdGhyb3VnaCB0aGUgQWN0b3IgU2hlZXQgdmlhIGVmZmVjdCBjb250cm9sIGJ1dHRvbnMuXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgICAgICBUaGUgbGVmdC1jbGljayBldmVudCBvbiB0aGUgZWZmZWN0IGNvbnRyb2xcbiAgICogQHBhcmFtIHtBY3RvcnxJdGVtfSBvd25lciAgICAgIFRoZSBvd25pbmcgZG9jdW1lbnQgd2hpY2ggbWFuYWdlcyB0aGlzIGVmZmVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXxudWxsfSAgICAgICAgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNoYW5nZXMgYXJlIGNvbXBsZXRlLlxuICAgKi9cbiAgc3RhdGljIG9uTWFuYWdlQWN0aXZlRWZmZWN0IChldmVudCwgb3duZXIpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGknKVxuICAgIGNvbnN0IGVmZmVjdCA9IGxpLmRhdGFzZXQuZWZmZWN0SWRcbiAgICAgID8gb3duZXIuZWZmZWN0cy5nZXQobGkuZGF0YXNldC5lZmZlY3RJZClcbiAgICAgIDogbnVsbFxuICAgIHN3aXRjaCAoYS5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnY3JlYXRlJzpcbiAgICAgICAgcmV0dXJuIG93bmVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgICAgICAgIGljb246ICdpY29ucy9zdmcvYXVyYS5zdmcnLFxuICAgICAgICAgICAgb3JpZ2luOiBvd25lci51dWlkLFxuICAgICAgICAgICAgJ2R1cmF0aW9uLnJvdW5kcyc6XG4gICAgICAgICAgICAgIGxpLmRhdGFzZXQuZWZmZWN0VHlwZSA9PT0gJ3RlbXBvcmFyeScgPyAxIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGxpLmRhdGFzZXQuZWZmZWN0VHlwZSA9PT0gJ2luYWN0aXZlJ1xuICAgICAgICAgIH1cbiAgICAgICAgXSlcbiAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICByZXR1cm4gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC5kZWxldGUoKVxuICAgICAgY2FzZSAndG9nZ2xlJzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC51cGRhdGUoeyBkaXNhYmxlZDogIWVmZmVjdC5kaXNhYmxlZCB9KVxuICAgIH1cbiAgfVxuXG4gIF9wcmVwYXJlRHVyYXRpb24gKCkge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gc3VwZXIuX3ByZXBhcmVEdXJhdGlvbigpXG4gICAgaWYgKGR1cmF0aW9uLnR5cGUgPT09ICdzZWNvbmRzJykge1xuICAgICAgaWYgKGR1cmF0aW9uLnNlY29uZHMgPiAzNjAwKSB7XG4gICAgICAgIGR1cmF0aW9uLmxhYmVsID0gbmV3IERhdGUoZHVyYXRpb24uc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE5KVxuICAgICAgfSBlbHNlIGlmIChkdXJhdGlvbi5zZWNvbmRzID4gMTAwKSB7XG4gICAgICAgIGR1cmF0aW9uLmxhYmVsID0gbmV3IERhdGUoZHVyYXRpb24uc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTQsIDE5KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHVyYXRpb25cbiAgfVxuXG4gIHN0YXRpYyBmaWx0ZXJBY3RpdmVFZmZlY3RzIChlZmZlY3QsIGNvbmRpdGlvbk5hbWUpIHtcbiAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTEnKSkge1xuICAgICAgLy8gRm91bmRyeVZUVCB2MTBcbiAgICAgIHJldHVybiBlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgPT09IGNvbmRpdGlvbk5hbWVcbiAgICB9XG4gICAgcmV0dXJuIGVmZmVjdC5zdGF0dXNlcy5oYXMoY29uZGl0aW9uTmFtZSlcbiAgfVxuXG4gIHN0YXRpYyBnZXRTdGF0dXNLZXkgKGVmZmVjdCkge1xuICAgIGxldCBvcHRpb25zID0gW11cbiAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTEnKSkge1xuICAgICAgLy8gRm91bmRyeVZUVCB2MTBcbiAgICAgIG9wdGlvbnMgPSBbZWZmZWN0LmdldEZsYWcoJ2NvcmUnLCAnc3RhdHVzSWQnKV1cbiAgICB9IGVsc2UgaWYgKGVmZmVjdC5zdGF0dXNlcy5zaXplID4gMCkge1xuICAgICAgb3B0aW9ucyA9IFsuLi5lZmZlY3Quc3RhdHVzZXMudmFsdWVzKCldXG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zLmZpbmQodiA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQ09DNy5zdGF0dXMsIHYpKVxuICB9XG5cbiAgZ2V0IGlzU3RhdHVzICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIENvQzdBY3RpdmVFZmZlY3QuZ2V0U3RhdHVzS2V5KHRoaXMpID09PSAnc3RyaW5nJ1xuICB9XG5cbiAgc3RhdGljIHByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIChlZmZlY3RzLCB7IHN0YXR1cyA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gRGVmaW5lIGVmZmVjdCBoZWFkZXIgY2F0ZWdvcmllc1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7XG4gICAgICB0ZW1wb3Jhcnk6IHtcbiAgICAgICAgdHlwZTogJ3RlbXBvcmFyeScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGVtcG9yYXJ5JyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgcGFzc2l2ZToge1xuICAgICAgICB0eXBlOiAncGFzc2l2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFzc2l2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdpbmFjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5hY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBzdXBwcmVzc2VkOiB7XG4gICAgICAgIHR5cGU6ICdzdXBwcmVzc2VkJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TdXBwcmVzc2VkJyksXG4gICAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgICBpbmZvOiBbZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXZhaWxhYmxlJyldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgY2F0ZWdvcmllcy5zdGF0dXMgPSB7XG4gICAgICAgIHR5cGU6ICdzdGF0dXMnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTdGF0dXMnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFjdGl2ZSBlZmZlY3RzLCBjbGFzc2lmeWluZyB0aGVtIGludG8gY2F0ZWdvcmllc1xuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XG4gICAgICBpZiAoZS5pc1N1cHByZXNzZWQpIGNhdGVnb3JpZXMuc3VwcHJlc3NlZC5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuaXNTdGF0dXMpIGNhdGVnb3JpZXMuc3RhdHVzLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5kaXNhYmxlZCkgY2F0ZWdvcmllcy5pbmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuaXNUZW1wb3JhcnkpIGNhdGVnb3JpZXMudGVtcG9yYXJ5LmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBjYXRlZ29yaWVzLnBhc3NpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgfVxuXG4gICAgY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmhpZGRlbiA9ICFjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5sZW5ndGhcbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG5cbiAgc3RhdGljIHByZXBhcmVOUENBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIChlZmZlY3RzKSB7XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgICAgYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdhY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdBY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBpbmFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnaW5hY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdJbmFjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJdGVyYXRlIG92ZXIgYWN0aXZlIGVmZmVjdHMsIGNsYXNzaWZ5aW5nIHRoZW0gaW50byBjYXRlZ29yaWVzXG4gICAgZm9yIChjb25zdCBlIG9mIGVmZmVjdHMpIHtcbiAgICAgIGNvdW50ICs9IDFcbiAgICAgIGUuX2dldFNvdXJjZU5hbWUoKSAvLyBUcmlnZ2VyIGEgbG9va3VwIGZvciB0aGUgc291cmNlIG5hbWVcbiAgICAgIGlmIChlLmlzU3VwcHJlc3NlZCB8fCBlLmRpc2FibGVkKSBjYXRlZ29yaWVzLmluYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBjYXRlZ29yaWVzLmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICB9XG5cbiAgICBpZiAoY291bnQgPiAwKSBjYXRlZ29yaWVzLmV4cGVuZGVkID0gdHJ1ZVxuICAgIHJldHVybiBjYXRlZ29yaWVzXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgQ09ORklHLCBnYW1lLCBSb2xsICovXG5cbmV4cG9ydCBjbGFzcyBDb0M3RGljZSB7XG4gIHN0YXRpYyBhc3luYyByb2xsIChtb2RpZiA9IDAsIHJvbGxNb2RlID0gbnVsbCwgaGlkZURpY2UgPSBmYWxzZSkge1xuICAgIGxldCBhbHRlcm5hdGl2ZURpY2UgPSAnJ1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknKVxuICAgICAgfSBlbHNlIGlmIChtb2RpZiA+IDApIHtcbiAgICAgICAgYWx0ZXJuYXRpdmVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllQm9udXMnKVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgcm9sbFxuICAgIGlmIChcbiAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0ICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcbiAgICApIHtcbiAgICAgIHJvbGwgPSBSb2xsLmZyb21EYXRhKENvQzdEaWNlLmNyaXQwMSlcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgKSB7XG4gICAgICByb2xsID0gUm9sbC5mcm9tRGF0YShDb0M3RGljZS5mdW1ibGU5OSlcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKFxuICAgICAgICAnMWR0JyArXG4gICAgICAgICAgKGFsdGVybmF0aXZlRGljZSAhPT0gJydcbiAgICAgICAgICAgID8gJysxZG9bJyArIGFsdGVybmF0aXZlRGljZSArICddJ1xuICAgICAgICAgICAgOiAnKzFkdCdcbiAgICAgICAgICApLnJlcGVhdChNYXRoLmFicyhtb2RpZikpICtcbiAgICAgICAgICAnKzFkMTAnXG4gICAgICApLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIHVuaXQ6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdGVuczoge1xuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgcmVzdWx0czogW11cbiAgICAgIH0sXG4gICAgICB0b3RhbDogMCxcbiAgICAgIHJvbGxcbiAgICB9XG5cbiAgICBpZiAocm9sbE1vZGUpIHJlc3VsdC5yb2xsTW9kZSA9IHJvbGxNb2RlXG4gICAgaWYgKGhpZGVEaWNlKSByZXN1bHQuaGlkZURpY2UgPSBoaWRlRGljZVxuICAgIGZvciAoY29uc3QgZCBvZiByb2xsLmRpY2UpIHtcbiAgICAgIGlmIChkIGluc3RhbmNlb2YgQ09ORklHLkRpY2UudGVybXMudCkge1xuICAgICAgICByZXN1bHQudGVucy5yZXN1bHRzLnB1c2goZC50b3RhbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC51bml0LnRvdGFsID0gZC50b3RhbCA9PT0gMTAgPyAwIDogZC50b3RhbFxuICAgICAgICByZXN1bHQudW5pdC5yZXN1bHRzLnB1c2gocmVzdWx0LnVuaXQudG90YWwpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID1cbiAgICAgICAgcmVzdWx0LnVuaXQudG90YWwgPT09IDAgJiYgcmVzdWx0LnRlbnMucmVzdWx0cy5pbmNsdWRlcygwKVxuICAgICAgICAgID8gMTAwXG4gICAgICAgICAgOiBNYXRoLm1heCguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxuICAgIH0gZWxzZSBpZiAocmVzdWx0LnVuaXQudG90YWwgPT09IDApIHtcbiAgICAgIGNvbnN0IGRpY2UgPSByZXN1bHQudGVucy5yZXN1bHRzLmZpbHRlcih0ID0+IHQgPiAwKVxuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBkaWNlLmxlbmd0aCA9PT0gMCA/IDEwMCA6IE1hdGgubWluKC4uLmRpY2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID0gTWF0aC5taW4oLi4ucmVzdWx0LnRlbnMucmVzdWx0cylcbiAgICB9XG4gICAgcmVzdWx0LnRvdGFsID0gcmVzdWx0LnVuaXQudG90YWwgKyByZXN1bHQudGVucy50b3RhbFxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzaG93Um9sbERpY2UzZCAocm9sbCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBzeW5jRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5bmNEaWNlM2QnKVxuXG4gICAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuXG4gICAgICBhd2FpdCBnYW1lLmRpY2UzZC5zaG93Rm9yUm9sbChcbiAgICAgICAgcm9sbCxcbiAgICAgICAgZ2FtZS51c2VyLFxuICAgICAgICBzeW5jRGljZSxcbiAgICAgICAgKGNoYXREYXRhLndoaXNwZXIubGVuZ3RoID09PSAwID8gbnVsbCA6IGNoYXREYXRhLndoaXNwZXIpLFxuICAgICAgICBjaGF0RGF0YS5ibGluZFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb21iaW5lZFJvbGwgKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLnBvb2wgPSBvcHRpb25zLnBvb2wgPz8ge31cbiAgICBvcHRpb25zLnBvb2xbJzAnXSA9IGZhbHNlXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMucG9vbCkubWFwKHYgPT4gcGFyc2VJbnQodiwgMTApKVxuICAgIGxldCBwZW5hbHR5RGljZSA9IE1hdGguYWJzKE1hdGgubWluKDAsIE1hdGgubWluKC4uLmtleXMpKSlcbiAgICBsZXQgYm9udXNEaWNlID0gTWF0aC5tYXgoMCwgTWF0aC5tYXgoLi4ua2V5cykpXG4gICAgY29uc3QgaGFzRFNOID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZVxuXG4gICAgY29uc3QgcG9vbCA9IFtdXG4gICAgcG9vbC5wdXNoKCcxZHQrMWQxMCcpXG5cbiAgICBpZiAocGVuYWx0eURpY2UgPiAwKSB7XG4gICAgICBwb29sLnB1c2goXG4gICAgICAgIChoYXNEU05cbiAgICAgICAgICA/ICcrMWRvWycgKyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JykgKyAnXSdcbiAgICAgICAgICA6ICcrMWR0J1xuICAgICAgICApLnJlcGVhdChNYXRoLmFicyhwZW5hbHR5RGljZSkpXG4gICAgICApXG4gICAgfVxuICAgIGlmIChib251c0RpY2UgPiAwKSB7XG4gICAgICBwb29sLnB1c2goXG4gICAgICAgIChoYXNEU05cbiAgICAgICAgICA/ICcrMWRvWycgKyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpICsgJ10nXG4gICAgICAgICAgOiAnKzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMoYm9udXNEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHBvb2wuam9pbignJykpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGdyb3Vwczoge1xuICAgICAgICBiYXNlRGllOiAwLFxuICAgICAgICBwZW5hbHR5RGljZTogW10sXG4gICAgICAgIGJvbnVzRGljZTogW11cbiAgICAgIH0sXG4gICAgICB1bml0OiAwLFxuICAgICAgcm9sbFxuICAgIH1cbiAgICBsZXQgYmFzZVNldCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIGlmICghYmFzZVNldCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYmFzZURpZSA9IGQudG90YWxcbiAgICAgICAgICBiYXNlU2V0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIHBlbmFsdHlEaWNlLS1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZS5wdXNoKGQudG90YWwpXG4gICAgICAgICAgYm9udXNEaWNlLS1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cblxuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMucG9vbCkge1xuICAgICAgb3V0cHV0W2tleV0gPSB7XG4gICAgICAgIHVuaXQ6IHtcbiAgICAgICAgICB0b3RhbDogcmVzdWx0LnVuaXQsXG4gICAgICAgICAgcmVzdWx0czogW3Jlc3VsdC51bml0XVxuICAgICAgICB9LFxuICAgICAgICB0ZW5zOiB7XG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVzdWx0czogW11cbiAgICAgICAgfSxcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJvbGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vZGlmID0gcGFyc2VJbnQoa2V5LCAxMClcbiAgICAgIGxldCBtb2RpZmllciA9IG1vZGlmXG4gICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChyZXN1bHQuZ3JvdXBzLmJhc2VEaWUpXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKG1vZGlmaWVyKTsgbW9kaWZpZXIgPCAwOyBtb2RpZmllcisrKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5wdXNoKFxuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2VbbW9kaWZpZXIgKyBvZmZzZXRdXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qgb2Zmc2V0ID0gbW9kaWZpZXI7IG1vZGlmaWVyID4gMDsgbW9kaWZpZXItLSkge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZVtNYXRoLmFicyhtb2RpZmllciAtIG9mZnNldCldXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9XG4gICAgICAgICAgb3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCAmJiBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICAgID8gMTAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgICBjb25zdCBkaWNlID0gb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmZpbHRlcih0ID0+IHQgPiAwKVxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IE1hdGgubWluKC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH1cbiAgICAgIG91dHB1dFtrZXldLnRvdGFsID0gb3V0cHV0W2tleV0udW5pdC50b3RhbCArIG91dHB1dFtrZXldLnRlbnMudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gUHJlZGV0ZXJtaW5lZCB2YWx1ZSBvZiBkaWNlLCB1c2VkIG9ubHkgZm9yIERFViBhbmQgdGVzdCBwdXJwb3Nlc1xuICBzdGF0aWMgZnVtYmxlOTkgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ09wZXJhdG9yVGVybScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG9wZXJhdG9yOiAnKydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnRGllJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiAxLFxuICAgICAgICBmYWNlczogMTAsXG4gICAgICAgIG1vZGlmaWVyczogW10sXG4gICAgICAgIHJlc3VsdHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXN1bHQ6IDksXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIHRvdGFsOiA5OSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxuXG4gIHN0YXRpYyBjcml0MDEgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxMCxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogMSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSXRlbSwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpLCBmcm9tVXVpZCAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0NJREVkaXRvciB9IGZyb20gJy4uL2FwcHMvY29jLWlkLWVkaXRvci5qcydcblxuLyoqXG4gKiBPdmVycmlkZSBhbmQgZXh0ZW5kIHRoZSBiYXNpYyA6Y2xhc3M6YEl0ZW1gIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbSBleHRlbmRzIEl0ZW0ge1xuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIC8qKiBAc2VlIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgJiYgIWNvbnRleHQ/LmV4dGVuZGVkKSB7XG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXG4gICAgICAgKiB0aGUgZXh0ZW5kZWQgZmxhZyB3aWxsIGJlIHRydWUsIHRodXMgYnlwYXNzaW5nIHRoaXMgd2hvbGUgcHJvY2Vzc1xuICAgICAgICogYW5kIHJlc3VtZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBuZXcgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xuICAgICAgICAuLi57IGV4dGVuZGVkOiB0cnVlIH0sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBhc3luYyBfY3JlYXRlRG9jdW1lbnRMaW5rIChldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiBldmVudERhdGEudHlwZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGV2ZW50RGF0YS51dWlkID09PSAnc3RyaW5nJyAmJiBldmVudERhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGV2ZW50RGF0YS51dWlkLm1hdGNoKC9eQWN0b3JcXC4vKSAmJiByZWxhdGl2ZVRvIGluc3RhbmNlb2YgQ09ORklHLkpvdXJuYWxFbnRyeVBhZ2UuZG9jdW1lbnRDbGFzcykge1xuICAgICAgLy8gSWYgZHJvcHBpbmcgYSBza2lsbC93ZWFwb24gZnJvbSBhbiBBY3RvciBvbnRvIGEgSm91cm5hbCBFbnRyeSBQYWdlIGNvbnZlcnQgdG8gYSBjaGVjayBsaW5rXG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZXZlbnREYXRhLnV1aWQpXG4gICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiAnQGNvYzcuY2hlY2tbdHlwZTonICsgaXRlbS50eXBlICsgJyxuYW1lOicgKyBpdGVtLm5hbWUgKyAnXSdcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9jcmVhdGVEb2N1bWVudExpbmsoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGljb25MYW5ndWFnZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy9sYW5ndWFnZS5zdmcnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWFsZnVuY3Rpb246ICdtYWxmYydcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIG9uIG9mIHRoZSBpdGVtIHByb3BlcnR5IGluIGRhdGEuZGF0YS5wcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIDogbmFtZSBmb3IgdGhlIHByb3BlcnR5IHRvIHRvZ2dsZVxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlUHJvcGVydHkgKHByb3BlcnR5SWQsIG92ZXJyaWRlID0gZmFsc2UpIHtcbiAgICBsZXQgY2hlY2tlZFByb3BzID0ge31cbiAgICBsZXQgZmlnaHRpbmdcbiAgICBsZXQgZmlyZWFybXNcbiAgICBpZiAodHlwZW9mIENPQzcuZXJhc1twcm9wZXJ0eUlkXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBDb0NJREVkaXRvci5lcmFUb2dnbGUodGhpcywgcHJvcGVydHlJZClcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiYgIW92ZXJyaWRlKSB7XG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FoZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5haGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnYWRkYicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdzaG90Z3VuJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5ybmdkJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUnOiBudWxsLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcudmFsdWUnOiBudWxsLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgfHwgcHJvcGVydHlJZCA9PT0gJ3JuZ2QnKSB7XG4gICAgICAgIGxldCBtZWxlZVdlYXBvblxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyAmJiAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAncm5nZCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lbGVlV2VhcG9uKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5ybmdkJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmJyc3QnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hdXRvJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZGJybCc6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgIW92ZXJyaWRlKSB7XG4gICAgICBsZXQgbW9kaWYgPSBmYWxzZVxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdjb21iYXQnKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgICAgICAvLyBDbG9zZSBjb21iYXQgYnkgZGVmYXVsdFxuICAgICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiAnJyxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdmaWdodGluZycpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcmVhcm1zID0gdHJ1ZVxuICAgICAgICAgIGZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdmaXJlYXJtJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgIGZpcmVhcm1zID0gdHJ1ZVxuICAgICAgICAgIGZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXG4gICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RpZikge1xuICAgICAgICAvLyBzZXQgc3BlY2lhbGlzYXRpb24gaWYgZmlnaHRpbmcgb3IgZmlyZWFybVxuICAgICAgICBpZiAoZmlnaHRpbmcpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICAgIClcbiAgICAgICAgICBjaGVja2VkUHJvcHMubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHMuc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVhcm1zKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbE5hbWUsXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICAgIClcbiAgICAgICAgICBjaGVja2VkUHJvcHMubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHMuc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3NwZWNpYWwnKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1twcm9wZXJ0eUlkXSkge1xuICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogJycsXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWUsXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvcE5hbWUgPSBgc3lzdGVtLnByb3BlcnRpZXMuJHtwcm9wZXJ0eUlkfWBcbiAgICAgIGNvbnN0IHByb3BWYWx1ZSA9ICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtwcm9wTmFtZV06IHByb3BWYWx1ZSB9KS50aGVuKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBoYXNQcm9wZXJ0eSAocHJvcGVydHlJZCkge1xuICAgIHJldHVybiB0aGlzLmlzSW5jbHVkZWRJblNldCgncHJvcGVydGllcycsIHByb3BlcnR5SWQpXG4gIH1cblxuICBnZXQgc2hvcnROYW1lICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm5hbWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGwpIHtcbiAgICBpZiAoJ3VwZGF0ZVJvbGwnIGluIHRoaXMuc2hlZXQpIHJldHVybiBhd2FpdCB0aGlzLnNoZWV0LnVwZGF0ZVJvbGwocm9sbClcbiAgICBlbHNlIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcykgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlUm9sbChyb2xsKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXROYW1lUGFydHNTcGVjIChza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKCFzcGVjaWFsaXphdGlvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogJycsXG4gICAgICAgIHNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICdeKCcgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNwZWNpYWxpemF0aW9uKSArICcpXFxcXHMqXFxcXCgoLispXFxcXCkkJyxcbiAgICAgICdpJ1xuICAgIClcbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaChzcGVjTmFtZVJlZ2V4KVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgc3BlY2lhbGl6YXRpb24gPSBtYXRjaFsxXVxuICAgICAgc2tpbGxOYW1lID0gbWF0Y2hbMl1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJyxcbiAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgc2tpbGxOYW1lXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVXaXRob3V0U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29DN0l0ZW0pIHtcbiAgICAgIGlmIChpdGVtLnN5c3RlbT8ucHJvcGVydGllcz8uc3BlY2lhbCAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgdHlwZW9mIGl0ZW0uc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaXRlbS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG5cbiAgc3RhdGljIGlzQW55U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcgfHwgIWl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpLnRvTG93ZXJDYXNlKCksXG4gICAgICAnYW55J1xuICAgIF0uaW5jbHVkZXMoQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzLnNraWxsLmd1ZXNzTmFtZVBhcnRzKGl0ZW0ubmFtZSkuc2tpbGxOYW1lLnRvTG93ZXJDYXNlKCkpXG4gIH1cblxuICBhc3luYyBjaGVja1NraWxsUHJvcGVydGllcyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuXG4gICAgY29uc3QgY2hlY2tlZFByb3BzID0ge31cbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgIC8vIGlmIHNraWxsIGlzIG5vdCBhIHNwZWNpYWxpc2F0aW9uIG1ha2UgaXQgYSBzcGVjaWFsaXNhdGlvblxuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnXSA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSWYgc2tpbGwgaXMgY29tYmF0IHNraWxsIGFuZCBubyBzcGVjaWFsaXNhdGlvbiBzZXQgdGhlbiBtYWtlIGl0IGEgZmlnaHRpbmcoIGNsb3NlY29tYmF0KSBza2lsbFxuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyBjbG9zZSBjb21iYXQgd2l0aG91dCBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAoIXRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8gaWYgc2tpbGwgaXMgcmFuZ2UgY29tYmF0IHdpdGhvdXQgYSBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gJiZcbiAgICAgICAgKCF0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiB8fCB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9PT0gJycpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyddID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJ10gPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoZWNrZWRQcm9wcylcbiAgICB9XG5cbiAgICByZXR1cm4gY2hlY2tlZFByb3BzXG4gIH1cblxuICBpc0luY2x1ZGVkSW5TZXQgKHNldCwgcHJvcGVydHlJZCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW1bc2V0XSkgdGhpcy5zeXN0ZW1bc2V0XSA9IFtdXG4gICAgY29uc3QgcHJvcGVydHlJbmRleCA9IHRoaXMuc3lzdGVtW3NldF0uaW5kZXhPZihwcm9wZXJ0eUlkKVxuICAgIGlmIChwcm9wZXJ0eUluZGV4ID4gLTEpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5kZXZlbG9wZW1lbnQnOiB0cnVlIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5mbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5kZXZlbG9wZW1lbnQnOiBmYWxzZSB9KVxuICAgIH1cbiAgfVxuXG4gIGdldCBkZXZlbG9wZW1lbnRGbGFnICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJdGVtRmxhZygnZGV2ZWxvcGVtZW50JylcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLmdldEl0ZW1GbGFnKGZsYWdOYW1lKVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGlmIChcbiAgICAgIChmbGFnTmFtZSA9PT0gJ29jY3VwYXRpb24nIHx8IGZsYWdOYW1lID09PSAnYXJjaGV0eXBlJykgJiZcbiAgICAgICFmbGFnVmFsdWUgJiZcbiAgICAgIGVyYXNlQWRqdXN0bWVudFxuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICBbYHN5c3RlbS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZsYWdWYWx1ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWdOYW1lID09PSAnZGV2ZWxvcGVtZW50Jykge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxYcEdhaW5EaXNhYmxlZCcpKVxuICAgICAgfVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0SXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdXG4gIH1cblxuICBnZXQgdXNlc0FsdGVybmF0aXZlU2tpbGwgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmXG4gICAgICAodGhpcy5zeXN0ZW0ucHJvcGVydGllcz8uYXV0byA9PT0gdHJ1ZSB8fFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy5icnN0ID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LnRocm93biA9PT0gdHJ1ZSlcbiAgICApXG4gIH1cblxuICBnZXQgbWF4VXNlc1BlclJvdW5kICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtdWx0aVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KVxuICAgIGlmIChpc05hTihtdWx0aVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBtdWx0aVNob3RcbiAgfVxuXG4gIGdldCB1c2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNpbmdsZVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKVxuICAgIGlmIChpc05hTihzaW5nbGVTaG90KSkgcmV0dXJuIDBcbiAgICByZXR1cm4gc2luZ2xlU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZFN0cmluZyAoKSB7XG4gICAgbGV0IHVzZXNQZXJSb3VuZFxuICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKSB7XG4gICAgICB1c2VzUGVyUm91bmQgPSB0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsXG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9ICcxJ1xuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4fSlgXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkF1dG8nKX1gXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkJyc3QnKX1gXG4gICAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KSB7XG4gICAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0fSlgXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXNQZXJSb3VuZFxuICB9XG5cbiAgZ2V0IG11bHRpcGxlU2hvdHMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLm1heFVzZXNQZXJSb3VuZCA8PSAxKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBzaW5nbGVTaG90ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMudXNlc1BlclJvdW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBiYXNlUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5ub3JtYWwudmFsdWUpXG4gIH1cblxuICBnZXQgbG9uZ1JhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0ucmFuZ2UubG9uZy52YWx1ZSlcbiAgfVxuXG4gIGdldCBleHRyZW1lUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5leHRyZW1lLnZhbHVlKVxuICB9XG5cbiAgZ2V0IHNraWxsUHJvcGVydGllcyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIFtdXG5cbiAgICBjb25zdCBza2lsbFByb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkge1xuICAgICAgICBza2lsbFByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2tpbGxQcm9wZXJ0aWVzXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2FsY3VsYXRlQmFzZSAoYWN0b3IsIGRhdGEpIHtcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmIChTdHJpbmcoZGF0YS5zeXN0ZW0uYmFzZSkuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLmFjdG9yLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZm91bmRyeS51dGlscy5nZXRQcm9wZXJ0eShhY3RvciwgdmFsdWUuc3Vic3RyaW5nKDExKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwoZGF0YS5zeXN0ZW0uYmFzZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICAgIH0pLnRvdGFsXG4gICAgICAgIClcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2YWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpKSA/IHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpIDogbnVsbFxuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW251bGwsIGZhbHNlXVxuICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYmFzZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbdGhpcy5zeXN0ZW0uYmFzZSwgZmFsc2VdXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZm91bmRyeS51dGlscy5nZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIG5ldyBSb2xsKHRoaXMuc3lzdGVtLmJhc2UsIHBhcnNlZCkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgICAgICB9KS50b3RhbFxuICAgICAgICApXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFsdWUgPSAwXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbdmFsdWUsIHRydWVdXG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAhaXNOYU4ocGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSkpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSlcbiAgICAgICAgOiBudWxsLFxuICAgICAgZmFsc2VcbiAgICBdXG4gIH1cblxuICBhc3luYyBhc3luY0Jhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgYFtDT0M3XSAoJHt0aGlzLnBhcmVudD8ubmFtZX0pIEV2YWx1YXRpbmcgc2tpbGwgJHt0aGlzLm5hbWV9OiR7dGhpcy5zeXN0ZW0uYmFzZX0gdG8gJHtlWzBdfWBcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0IGJhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0QnVsbGV0TGVmdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hbW1vKSB7XG4gICAgICB0aGlzLnNldEJ1bGxldHMoMClcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hbW1vXG4gIH1cblxuICBhc3luYyByZWxvYWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG1heEJ1bGxldCA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhtYXhCdWxsZXQpXG4gIH1cblxuICBhc3luYyBzZXRCdWxsZXRzIChidWxsZXRzKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmFtbW8nOiBidWxsZXRzIHx8IDAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEJ1bGxldCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgYnVsbGV0cyA9IGF3YWl0IHRoaXMuZ2V0QnVsbGV0TGVmdCgpXG4gICAgY29uc3QgbWF4QnVsbGV0cyA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGlmIChidWxsZXRzICsgMSA+PSBtYXhCdWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0cylcbiAgICBlbHNlIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhidWxsZXRzICsgMSlcbiAgfVxuXG4gIGFzeW5jIHNob290QnVsbGV0cyAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGlmICh4ID4gYnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyAtIHgpXG4gIH1cblxuICBzdGF0aWMgbWVyZ2VPcHRpb25hbFNraWxscyAoc2tpbGxMaXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgam9pbnRBcnJheSA9IHNraWxsTGlzdC5jb25jYXQob3B0aW9ucylcbiAgICByZXR1cm4gam9pbnRBcnJheVxuICAgICAgLnJlZHVjZSgobmV3QXJyYXksIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gSWYgc2tpbGwgaXMgbm90IGEgZ2VuZXJpYyBzcGVjIGFuZCBpcyBhbHJlYWR5IGluY2x1ZGVkIHdlIGRvbid0IGFkZCBpdGVtXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pICYmXG4gICAgICAgICAgbmV3QXJyYXkuZmluZChza2lsbCA9PiBza2lsbC5uYW1lID09PSBpdGVtLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBuZXdBcnJheVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgaXRlbSBpcyBhZGRlZFxuICAgICAgICByZXR1cm4gWy4uLm5ld0FycmF5LCBpdGVtXVxuICAgICAgfSwgW10pXG4gICAgICAuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gIH1cblxuICAvKiogVE9ETyA6IHJpZW4gYSBmYWlyZSBpY2kgISFcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB8fCBudWxsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdXNlZCB0byBkaXNwbGF5IGEgY2FyZCBmb3IgdGhlIEl0ZW0gaW4gdGhlIGNoYXQgbG9nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBodG1sT3B0aW9ucyAgICBPcHRpb25zIHVzZWQgYnkgdGhlIFRleHRFZGl0b3IuZW5yaWNoSFRNTCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcbiAgICovXG4gIGFzeW5jIGdldENoYXREYXRhIChodG1sT3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gRm91bmRyeVZUVCB2MTFcbiAgICBodG1sT3B0aW9ucy5hc3luYyA9IHRydWVcbiAgICBjb25zdCBkYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0pXG4gICAgLy8gRml4IDogZGF0YSBjYW4gaGF2ZSBkZXNjcmlwdGlvbiBkaXJlY3RseSBpbiBmaWVsZCwgbm90IHVuZGVyIHZhbHVlLlxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB7XG4gICAgICAgIHZhbHVlOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBzcGVjaWFsOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSAnJ1xuICAgIH1cbiAgICBjb25zdCBsYWJlbHMgPSBbXVxuXG4gICAgLy8gUmljaCB0ZXh0IGRlc2NyaXB0aW9uXG4gICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcblxuICAgIC8vIEl0ZW0gdHlwZSBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcHJvcHMgPSBbXVxuICAgIGNvbnN0IGZuID0gdGhpc1tgXyR7dGhpcy50eXBlfUNoYXREYXRhYF1cbiAgICBpZiAoZm4pIGZuLmJpbmQodGhpcykoZGF0YSwgbGFiZWxzLCBwcm9wcywgaHRtbE9wdGlvbnMpXG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKHAgPT4gISFwKVxuICAgIGRhdGEubGFiZWxzID0gbGFiZWxzXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgbGV0IHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbClcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbHMnKVxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke0NvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbCl9YFxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBza2lsbE5hbWUgPSB0aGlzLnN5c3RlbS5za2lsbC5tYWluLm5hbWVcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke3RoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZX1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNraWxsTmFtZSkge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBza2lsbExhYmVsLFxuICAgICAgICB2YWx1ZTogc2tpbGxOYW1lXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25Vc2VzUGVyUm91bmQnKSxcbiAgICAgIHZhbHVlOiB0aGlzLnVzZXNQZXJSb3VuZFN0cmluZ1xuICAgIH0pXG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcbiAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5tYWxmdW5jdGlvbiA/IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uIDogJy0nXG4gICAgfSlcblxuICAgIGlmICh0aGlzLnN5c3RlbS5idWxsZXRzKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuQmVQdXNoZWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5wdXNoKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuaW1wbFxuICB9XG5cbiAgZ2V0IGlzRG9kZ2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJykudG9Mb3dlckNhc2UoKVxuICAgIClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgUmF5LCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIFJldHVybiA8YT4gZWxlbWVudCBvZiBhIHJvbGwgaW5zdGFuY2UuIGZvdW5kcnkuanMgcmVmOlRleHRFZGl0b3IuX2NyZWF0ZUlubGluZVJvbGxcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5saW5lUm9sbCAocm9sbCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGNsczogWydpbmxpbmUtcm9sbCddLFxuICAgIGRhdGFzZXQ6IHt9XG4gIH1cblxuICB0cnkge1xuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxuICAgIGRhdGEucmVzdWx0ID0gcm9sbC50b3RhbFxuICAgIGRhdGEudGl0bGUgPSByb2xsLmZvcm11bGFcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIENvbnN0cnVjdCBhbmQgcmV0dXJuIHRoZSBmb3JtZWQgbGluayBlbGVtZW50XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICBhLnRpdGxlID0gZGF0YS50aXRsZVxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgYS5kYXRhc2V0W2tdID0gdlxuICB9XG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcbiAgcmV0dXJuIGFcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX19cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxuICogVXNlZCBmb3IgTUFDIGNvbXBhdC5cbiAqIEBwYXJhbSB7Uy5FdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0N0cmxLZXkgKGV2ZW50KSB7XG4gIGlmIChldmVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gKFxuICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgY2hhdEhlbHBlciB7XG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nWzFdLnRvVXBwZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHt9XG4gICAgbWVzc2FnZURhdGEuZmxhdm9yID0gdGl0bGVcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChvcHRpb25zLndoaXNwZXIpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgbWVzc2FnZURhdGEucm9sbE1vZGUgPSBDT05TVC5ESUNFX1JPTExfTU9ERVMuU0VMRlxuICAgIH1cbiAgICBtZXNzYWdlRGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgbWVzc2FnZURhdGEuY29udGVudCA9IG1lc3NhZ2VcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShtZXNzYWdlRGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gJy0nICsgc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXG4gICAgICByZXR1cm4gdG9rZW4/LmFjdG9yXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0U3BlYWtlckZyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGFjdG9yS2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBzcGVha2VyLnRva2VuID0gdG9rZW5JZFxuICAgICAgc3BlYWtlci5zY2VuZSA9IHNjZW5lSWRcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3Rvci5pZFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcbiAgICAgIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBzcGVha2VyXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICBpZiAoIXByb3Auc3RhcnRzV2l0aCgnXycpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KFxuICAgICAgICAgICAgb2JqZWN0W3Byb3BdLFxuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9OiR7cHJvcH06YFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGFzZXRbYCR7b2JqZWN0TmFtZX0ke3Byb3B9YF0gPSBvYmplY3RbcHJvcF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmplY3RGcm9tRWxlbWVudCAob2JqZWN0LCBlbGVtZW50KSB7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemUgKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgICAgY29uc3QgcyA9IGtleS5zbGljZSgxKVxuICAgICAgICBjb25zdCBvYmpQcm9wID0gcy5zbGljZShzLmluZGV4T2YoJzonKSArIDEpXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbb2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBvYmpbb2JqTmFtZV0gPSB7fVxuICAgICAgICBkZXNlcmlhbGl6ZShvYmpbb2JqTmFtZV0sIG9ialByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIG9ialtrZXldID0gdHJ1ZVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgb2JqW2tleV0gPSBmYWxzZVxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcbiAgICAgICAgZWxzZSBvYmpba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtZW50IHx8ICFvYmplY3QpIHJldHVyblxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbGVtZW50LmRhdGFzZXQpKSB7XG4gICAgICBpZiAocHJvcCA9PT0gJ3RlbXBsYXRlJykgcmV0dXJuXG4gICAgICBkZXNlcmlhbGl6ZShvYmplY3QsIHByb3AsIGVsZW1lbnQuZGF0YXNldFtwcm9wXSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzY2VuZS5kb2N1bWVudClcbiAgICAgICAgcmV0dXJuIHRva2VuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGtleSlcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yVG9rZW4oYWN0b3IpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yVG9rZW4gKGFjdG9yKSB7XG4gICAgaWYgKCFhY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gYWN0b3IudG9rZW4gfHwgYWN0b3IucHJvdG90eXBlVG9rZW5cbiAgICAvKioqKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvLyBDYXNlIDAgLSBBY3RvciBpcyBhIHRva2VuIChzeW50aGV0aWMgYWN0b3IpLCByZXR1cm4gdGhhdCB0b2tlbi5cbiAgICAvLyBpZihhY3Rvci5pc1Rva2VuKSByZXR1cm4gYWN0b3IudG9rZW47XG4gICAgLy8gZWxzZXtcbiAgICAvLyAgLy8gQ2FzZSAxIC0gQWN0b3IgaXMgbm90IGEgdG9rZW4sIGZpbmQgaWYgYSB0b2tlbiBleGlzdCBmb3IgdGhhdCBhY3Rvci5cbiAgICAvLyAgY29uc3QgYWN0b3JUb2tlbnMgPSBhY3Rvci5nZXRBY3RpdmVUb2tlbnMoKTtcbiAgICAvLyAgaWYoIGFjdG9yVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgLy8gQ2FzZSAxLjEgLSBJZiBoZSBoYXMgb25seSBvbmUgVG9rZW4gcmV0dXJuIGl0LlxuICAgIC8vICAgIGlmKCAxID09PSBhY3RvclRva2Vucy5sZW5ndGgpIHJldHVybiBhY3RvclRva2Vuc1swXTtcblxuICAgIC8vICAgIC8vIENhc2UgMS4yIC0gQWN0b3IgaGFzIG11bHRpcGxlIHRva2VucywgZmluZCBpZiBvbmUgb2YgdGhlbSBpcyB0aGUgY29udHJvbGxlZCB0b2tlbi5cbiAgICAvLyAgICBjb25zdCBjb250cm9sbGVkVG9rZW5zID0gYWN0b3JUb2tlbnMuZmlsdGVyKCB0ID0+IHQuX2NvbnRyb2xsZWQpO1xuICAgIC8vICAgIGlmKCBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgICAvLyBSZXR1cm4gdGhlIDFzdCBjb250cm9sbGVkIHRva2VuLCByaXNlIGEgd2FybmluZyBpZiBoZSBoYXMgbXVsdGlwbGUgY29udHJvbGxlZCB0b2tlbnMuXG4gICAgLy8gICAgICBpZiggdmVyYm9zZSAmJiBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCA+IDEpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gaGFzICR7Y29udHJvbGxlZFRva2Vucy5sZW5ndGh9IGNvbnRyb2xsZWQgdG9rZW5zLiBVc2luZyB0aGUgZmlyc3QgZm91bmRgKTtcbiAgICAvLyAgICAgIHJldHVybiBjb250cm9sbGVkVG9rZW5zWzBdO1xuICAgIC8vICAgIH1cblxuICAgIC8vICAgIC8vIENhc2UgMS4zIGFjdG9yIGRvZXNuJ3QgaGF2ZSBhbnkgYWN0aXZlIHRva2VuLiBSZXR1cm4gdGhlIGZpcnN0IHZhbGlkIHRva2VuIGZvciB0aGF0IGFjdG9yIGFuZCByYWlzZSBhIHdhcm5pbmcuXG4gICAgLy8gICAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gZG9lc24ndCBoYXZlIGFueSBjb250cm9sbGVkIHRva2VuLiBVc2luZyBmaXJzdCB0b2tlbiBmb3VuZC5gKTtcbiAgICAvLyAgICByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG4gICAgLy8gIH1cblxuICAgIC8vICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy5lcnJvciggYENvdWxkIG5vdCBmaW4gYW55IHRva2VuIGZvciAke2FjdG9yLm5hbWV9LmApO1xuICAgIC8vICByZXR1cm4gbnVsbDtcbiAgICAvLyB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JJbWdGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGlmICghYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIFRyeSB0byBmaW5kIGEgdG9rZW4uXG4gICAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KVxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjKSB7XG4gICAgICAgICAgaWYgKCh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmMuaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuICh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIGlmIG5vIHRva2VuIGZvdW5kIGZvciB0aGF0IGFjdG9yIHJldHVybiB0aGUgcHJvdG90eXBlIHRva2VuIGltYWdlLlxuICAgICAgaWYgKGFjdG9yLnByb3RvdHlwZVRva2VuKSB7XG4gICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYz8uaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdG9yLnByb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhY3Rvci5pbWdcbiAgfVxuXG4gIHN0YXRpYyBnZXREaXN0YW5jZSAoc3RhcnRUb2tlbiwgZW5kVG9rZW4pIHtcbiAgICAvLyBzdGFydFRva2VuLnVwZGF0ZVNvdXJjZSgpO1xuICAgIC8vIGNhbnZhcy5zaWdodC5pbml0aWFsaXplVG9rZW5zKCk7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5pZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGlmIChzdGFydFRva2VuLnNjZW5lPy5pZCB8fCBmYWxzZSkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzdGFydFRva2VuLnNjZW5lLmlkKVxuICAgICAgICBpZiAodHlwZW9mIHNjZW5lPy50b2tlbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5zID0gc2NlbmU/LnRva2Vuc1xuICAgICAgICAgICAgLmZpbHRlcih0b2tlbiA9PiB0b2tlbi5hY3Rvci5pZCA9PT0gZW5kVG9rZW4uZGF0YS5kb2N1bWVudC5pZClcbiAgICAgICAgICAgIC5tYXAodG9rZW4gPT4gdG9rZW4ub2JqZWN0KVxuICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBlbmRUb2tlbiA9IHRva2Vuc1swXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgZGlzdGFuY2UgPSB7XG4gICAgICBncmlkVW5pdDogMCxcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgdW5pdDogY2FudmFzLnNjZW5lLmdyaWQudW5pdHNcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShzdGFydFRva2VuLmNlbnRlciwgZW5kVG9rZW4uY2VudGVyKVxuICAgICAgY29uc3Qgc2VnbWVudCA9IFt7IHJheSB9XVxuICAgICAgZGlzdGFuY2UgPSB7XG4gICAgICAgIGdyaWRVbml0OiByYXkuZGlzdGFuY2UgLyBjYW52YXMuc2NlbmUuZ3JpZC5zaXplLFxuICAgICAgICAvLyB2YWx1ZTogKHJheS5kaXN0YW5jZS9jYW52YXMuc2NlbmUuZGF0YS5ncmlkKSpjYW52YXMuc2NlbmUuZGF0YS5ncmlkRGlzdGFuY2UsXG4gICAgICAgIHZhbHVlOiBjYW52YXMuZ3JpZC5tZWFzdXJlRGlzdGFuY2VzKHNlZ21lbnQsIHtcbiAgICAgICAgICBncmlkU3BhY2VzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdncmlkU3BhY2VzJylcbiAgICAgICAgfSlbMF0sXG4gICAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VFbGV2YXRpb24nKSkge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBNYXRoLmFicyhcbiAgICAgICAgICAoc3RhcnRUb2tlbi5kb2N1bWVudC5lbGV2YXRpb24gfHwgMCkgLSAoZW5kVG9rZW4uZG9jdW1lbnQuZWxldmF0aW9uIHx8IDApXG4gICAgICAgIClcbiAgICAgICAgZGlzdGFuY2UudmFsdWUgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgZGlzdGFuY2UudmFsdWUgKiBkaXN0YW5jZS52YWx1ZSArIGVsZXZhdGlvbiAqIGVsZXZhdGlvblxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VUaGVhdHJlT2ZUaGVNaW5kJykpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VEaXN0YW5jZUNhbGN1bGF0aW9uRmFpbHVyZScpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBkaXN0YW5jZVxuICB9XG5cbiAgc3RhdGljIHRvWWFyZHMgKGRpc3RhbmNlKSB7XG4gICAgc3dpdGNoIChkaXN0YW5jZS51bml0KSB7XG4gICAgICBjYXNlICdmdCc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZSAvIDNcblxuICAgICAgY2FzZSAneWQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSb2xsIHtcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgcm9sbERpdiA9IGNhcmQucXVlcnlTZWxlY3RvcignZGl2LmRpY2Utcm9sbCcpXG4gICAgaWYgKCFyb2xsRGl2KSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByb2xsRGl2KVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIGdldCByZXN1bHRUeXBlICgpIHtcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KHRoaXMuc3VjY2Vzc0xldmVsKVxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZ1bWJsZScpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICBpZiAodGhpcy5za2lsbElkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCByb2xsID0gb2JqZWN0IHx8IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCBlbGVtZW50KVxuICAgIHJvbGwuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHt9XG4gICAgfVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoXG4gICAgICByb2xsLmRpY2VzLFxuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yZXN1bHQnKVxuICAgIClcbiAgICByb2xsLmRpY2VzLmhhc0JvbnVzID0gcm9sbC5kaWNlTW9kaWZpZXIgIT09IDBcbiAgICByb2xsLmRpY2VzLmJvbnVzID0gTWF0aC5hYnMocm9sbC5kaWNlTW9kaWZpZXIpXG4gICAgcm9sbC5kaWNlcy5ib251c1R5cGUgPVxuICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJylcbiAgICBjb25zdCB0ZW5EaWNlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGVuLWRpY2UnKVxuICAgIGlmICh0ZW5EaWNlKSB7XG4gICAgICBmb3IgKGNvbnN0IGQgb2YgdGVuRGljZS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKSB7XG4gICAgICAgIGNvbnN0IGRpZSA9IHtcbiAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgaXNNYXg6IGZhbHNlLFxuICAgICAgICAgIGlzTWluOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogLTFcbiAgICAgICAgfVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRpZSwgZClcbiAgICAgICAgcm9sbC5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB1bml0RGllID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKVxuICAgICAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LWRpZScpLnF1ZXJ5U2VsZWN0b3IoJ2xpJylcbiAgICAgIDogbnVsbFxuICAgIHJvbGwuZGljZXMudW5pdC52YWx1ZSA9IHVuaXREaWUgPyBwYXJzZUludCh1bml0RGllLmRhdGFzZXQudmFsdWUpIDogbnVsbFxuXG4gICAgcm9sbC5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IGluY3JlYXNlU3VjY2VzcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmluY3JlYXNlLXN1Y2Nlc3MnKVxuICAgIGlmIChpbmNyZWFzZVN1Y2Nlc3MgJiYgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICBmb3IgKGNvbnN0IGlzbCBvZiBpbmNyZWFzZVN1Y2Nlc3MucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpIHtcbiAgICAgICAgY29uc3QgbmV3U3VjY2VzTGV2ZWwgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KG5ld1N1Y2Nlc0xldmVsLCBpc2wpXG4gICAgICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV3U3VjY2VzTGV2ZWwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJvbGwubHVja05lZWRlZCkge1xuICAgICAgcm9sbC5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XG4gICAgICAgIGx1Y2tOZWVkZWRWYWx1ZTogcm9sbC5sdWNrTmVlZGVkXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2hlY2sgKGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG5cbiAgICByb2xsLnJvbGxUeXBlID0gY2hlY2sucm9sbFR5cGVcbiAgICByb2xsLnNpZGUgPSBjaGVjay5zaWRlXG4gICAgcm9sbC5hY3Rpb24gPSBjaGVjay5hY3Rpb25cbiAgICByb2xsLnJlZk1lc3NhZ2VJZCA9IGNoZWNrLnJlZk1lc3NhZ2VJZFxuICAgIHJvbGwucmVmZXJlbmNlTWVzc2FnZUlkID0gY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkXG5cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IGNoZWNrLnN1Y2Nlc3NMZXZlbFxuICAgIHJvbGwuZGlmZmljdWx0eSA9IGNoZWNrLmRpZmZpY3VsdHlcbiAgICByb2xsLnNraWxsSWQgPSBjaGVjay5za2lsbCA/IGNoZWNrLnNraWxsLmlkIDogbnVsbFxuICAgIHJvbGwuaXRlbUlkID0gY2hlY2suaXRlbSA/IGNoZWNrLml0ZW0uaWQgOiBudWxsXG4gICAgcm9sbC5kaWNlTW9kID0gY2hlY2suZGljZU1vZGlmaWVyXG4gICAgcm9sbC52YWx1ZSA9IHBhcnNlSW50KGNoZWNrLnJhd1ZhbHVlKVxuICAgIHJvbGwuZnVtYmxlID0gY2hlY2suaXNGdW1ibGVcbiAgICByb2xsLmNyaXRpY2FsID0gY2hlY2suaXNDcml0aWNhbFxuICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA/IGNoZWNrLmNoYXJhY3RlcmlzdGljIDogbnVsbFxuICAgIHJvbGwucmVzdWx0ID0gY2hlY2suZGljZS50b3RhbFxuXG4gICAgcm9sbC5hY3RvcktleSA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgaWYgKGNoZWNrLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgIHJvbGwudG9rZW5JZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgcm9sbC5hY3RvcklkID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICByb2xsLnRva2VuS2V5ID0gbnVsbFxuICAgICAgcm9sbC5hY3RvcklkID0gY2hlY2suYWN0b3IudG9rZW5LZXkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhdHRhY2hDaGVja1RvRWxlbWVudCAoaHRtbEVsZW1lbnQsIGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayhjaGVjaylcbiAgICByb2xsLmF0dGFjaFRvRWxlbWVudChodG1sRWxlbWVudClcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGh0bWxFbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgaHRtbEVsZW1lbnQpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdEYW1hZ2Uge1xuICBzdGF0aWMgZ2V0TWFpbkRpZSAoZGFtYWdlU3RyaW5nKSB7XG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMjAnKSkgcmV0dXJuICdkMjAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTInKSkgcmV0dXJuICdkMTInXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTAnKSkgcmV0dXJuICdkMTAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkOCcpKSByZXR1cm4gJ2Q4J1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDQnKSkgcmV0dXJuICdkNCdcbiAgICByZXR1cm4gJ2Q2J1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCBkYW1hZ2UgPSBvYmplY3QgfHwge31cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRhbWFnZSwgZWxlbWVudClcbiAgICBjb25zdCByb2xscyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbHMnKS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXG4gICAgZGFtYWdlLnJvbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByKVxuICAgICAgZGFtYWdlLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG5cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIGRhbWFnZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgTWF0aFRlcm0sIE51bWVyaWNUZXJtLCBQYXJlbnRoZXRpY2FsVGVybSwgUm9sbCwgUm9sbFRlcm0gKi9cbmNsYXNzIEF2ZXJhZ2VQYXJlbnRoZXRpY2FsVGVybSBleHRlbmRzIFBhcmVudGhldGljYWxUZXJtIHtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIF9ldmFsdWF0ZVN5bmMgKHsgbWluaW1pemUgPSBmYWxzZSwgbWF4aW1pemUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAvLyBFdmFsdWF0ZSB0aGUgaW5uZXIgUm9sbFxuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGwgfHwgbmV3IEF2ZXJhZ2VSb2xsKHRoaXMudGVybSlcbiAgICB0aGlzLnJvbGwgPSByb2xsLmV2YWx1YXRlKHsgbWluaW1pemUsIG1heGltaXplLCBhc3luYzogZmFsc2UgfSlcblxuICAgIC8vIFByb3BhZ2F0ZSBmbGF2b3IgdGV4dCB0byBpbm5lciB0ZXJtc1xuICAgIGlmICh0aGlzLmZsYXZvcikgdGhpcy5yb2xsLnRlcm1zLmZvckVhY2godCA9PiB7IHQub3B0aW9ucy5mbGF2b3IgPSB0Lm9wdGlvbnMuZmxhdm9yID8/IHRoaXMuZmxhdm9yIH0pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXZlcmFnZVJvbGwgZXh0ZW5kcyBSb2xsIHtcbiAgLyoqXG4gICAqIEV2YWx1YXRlIHRoZSByb2xsIHN5bmNocm9ub3VzbHkuXG4gICAqIEEgdGVtcG9yYXJ5IGhlbHBlciBtZXRob2QgdXNlZCB0byBtaWdyYXRlIGJlaGF2aW9yIGZyb20gMC43LnggKHN5bmMgYnkgZGVmYXVsdCkgdG8gMC45LnggKGFzeW5jIGJ5IGRlZmF1bHQpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdICAgICAgT3B0aW9ucyB3aGljaCBpbmZvcm0gaG93IGV2YWx1YXRpb24gaXMgcGVyZm9ybWVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubWluaW1pemVdICAgIEZvcmNlIHRoZSByZXN1bHQgdG8gYmUgbWluaW1pemVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubWF4aW1pemVdICAgIEZvcmNlIHRoZSByZXN1bHQgdG8gYmUgbWF4aW1pemVkXG4gICAqIEByZXR1cm5zIHtSb2xsfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2V2YWx1YXRlU3luYyAoeyBtaW5pbWl6ZSA9IGZhbHNlLCBtYXhpbWl6ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIC8vIFN0ZXAgMSAtIFJlcGxhY2UgaW50ZXJtZWRpYXRlIHRlcm1zIHdpdGggZXZhbHVhdGVkIG51bWJlcnNcbiAgICB0aGlzLnRlcm1zID0gdGhpcy50ZXJtcy5tYXAodGVybSA9PiB7XG4gICAgICBpZiAoISh0ZXJtIGluc3RhbmNlb2YgUm9sbFRlcm0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUm9sbCBldmFsdWF0aW9uIGVuY291bnRlcmVkIGFuIGludmFsaWQgdGVybSB3aGljaCB3YXMgbm90IGEgUm9sbFRlcm0gaW5zdGFuY2UnKVxuICAgICAgfVxuICAgICAgaWYgKHRlcm0uaXNJbnRlcm1lZGlhdGUpIHtcbiAgICAgICAgdGVybS5ldmFsdWF0ZSh7IG1pbmltaXplLCBtYXhpbWl6ZSwgYXN5bmM6IGZhbHNlIH0pXG4gICAgICAgIHRoaXMuX2RpY2UgPSB0aGlzLl9kaWNlLmNvbmNhdCh0ZXJtLmRpY2UpXG5cbiAgICAgICAgLy8gVGhpcyBzZWN0aW9uIGlzIHJlcGxhY2VkIHRvIGNhbGN1bGF0ZSB0aGUgYXZlcmFnZVxuICAgICAgICBsZXQgdG90YWwgPSB0ZXJtLnRvdGFsXG4gICAgICAgIGlmIChtaW5pbWl6ZSAmJiBtYXhpbWl6ZSAmJiB0ZXJtLmRpY2UubGVuZ3RoKSB7XG4gICAgICAgICAgdG90YWwgPSBNYXRoLmZsb29yKCh0ZXJtLmRpY2VbMF0uZmFjZXMgKyAxKSAvIDIgKiB0ZXJtLnRvdGFsKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBOdW1lcmljVGVybSh7IG51bWJlcjogdG90YWwsIG9wdGlvbnM6IHRlcm0ub3B0aW9ucyB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRlcm1cbiAgICB9KVxuXG4gICAgLy8gU3RlcCAyIC0gU2ltcGxpZnkgcmVtYWluaW5nIHRlcm1zXG4gICAgdGhpcy50ZXJtcyA9IHRoaXMuY29uc3RydWN0b3Iuc2ltcGxpZnlUZXJtcyh0aGlzLnRlcm1zKVxuXG4gICAgLy8gU3RlcCAzIC0gRXZhbHVhdGUgcmVtYWluaW5nIHRlcm1zXG4gICAgdGhpcy50ZXJtcyA9IHRoaXMudGVybXMubWFwKHRlcm0gPT4ge1xuICAgICAgaWYgKCF0ZXJtLl9ldmFsdWF0ZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXJtLmZhY2VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiBuZXcgTnVtZXJpY1Rlcm0oeyBudW1iZXI6IE1hdGguZmxvb3IoKHRlcm0uZmFjZXMgKyAxKSAvIDIgKiB0ZXJtLm51bWJlciksIG9wdGlvbnM6IHRlcm0ub3B0aW9ucyB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlcm0uZXZhbHVhdGUoeyBtaW5pbWl6ZSwgbWF4aW1pemUsIGFzeW5jOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGVybVxuICAgIH0pXG5cbiAgICAvLyBTdGVwIDQgLSBFdmFsdWF0ZSB0aGUgZmluYWwgZXhwcmVzc2lvblxuICAgIHRoaXMuX3RvdGFsID0gdGhpcy5fZXZhbHVhdGVUb3RhbCgpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCBhIGZvcm11bGEgYnkgaWRlbnRpZnlpbmcgaXRzIG91dGVyLW1vc3QgcGFyZW50aGV0aWNhbCBhbmQgbWF0aCB0ZXJtc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gX2Zvcm11bGEgICAgICBUaGUgcmF3IGZvcm11bGEgdG8gc3BsaXRcbiAgICogQHJldHVybnMge3N0cmluZ1tdfSAgICAgICAgICBBbiBhcnJheSBvZiB0ZXJtcywgc3BsaXQgb24gcGFyZW50aGV0aWNhbCB0ZXJtc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9zcGxpdFBhcmVudGhlc2VzIChfZm9ybXVsYSkge1xuICAgIHJldHVybiB0aGlzLl9zcGxpdEdyb3VwKF9mb3JtdWxhLCB7XG4gICAgICBvcGVuUmVnZXhwOiBBdmVyYWdlUGFyZW50aGV0aWNhbFRlcm0uT1BFTl9SRUdFWFAsXG4gICAgICBjbG9zZVJlZ2V4cDogQXZlcmFnZVBhcmVudGhldGljYWxUZXJtLkNMT1NFX1JFR0VYUCxcbiAgICAgIG9wZW5TeW1ib2w6ICcoJyxcbiAgICAgIGNsb3NlU3ltYm9sOiAnKScsXG4gICAgICBvbkNsb3NlOiBncm91cCA9PiB7XG4gICAgICAgIC8vIEV4dHJhY3QgZ3JvdXAgYXJndW1lbnRzXG4gICAgICAgIGNvbnN0IGZuID0gZ3JvdXAub3Blbi5zbGljZSgwLCAtMSlcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGdyb3VwLnRlcm1zLmpvaW4oJycpXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGZsYXZvcjogZ3JvdXAuZmxhdm9yID8gZ3JvdXAuZmxhdm9yLnNsaWNlKDEsIC0xKSA6IHVuZGVmaW5lZCB9XG5cbiAgICAgICAgLy8gQ2xhc3NpZnkgdGhlIHJlc3VsdGluZyB0ZXJtc1xuICAgICAgICBjb25zdCB0ZXJtcyA9IFtdXG4gICAgICAgIGlmIChmbiBpbiBNYXRoKSB7XG4gICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuX3NwbGl0TWF0aEFyZ3MoZXhwcmVzc2lvbilcbiAgICAgICAgICB0ZXJtcy5wdXNoKG5ldyBNYXRoVGVybSh7IGZuLCB0ZXJtczogYXJncywgb3B0aW9ucyB9KSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZm4pIHRlcm1zLnB1c2goZm4pXG4gICAgICAgICAgdGVybXMucHVzaChuZXcgQXZlcmFnZVBhcmVudGhldGljYWxUZXJtKHsgdGVybTogZXhwcmVzc2lvbiwgb3B0aW9ucyB9KSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVybXNcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDT05TVCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgVG9rZW5Eb2N1bWVudCwgdWkgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBBY3RvclBpY2tlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2FjdG9yLXBpY2tlciddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrV2hpY2hBY3RvclRpdGxlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9tZXNzYWdlcy9hY3Rvci1waWNrZXIuaGJzJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDQxNSxcbiAgICAgIGhlaWdodDogMzc1XG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLm9uKCdjbGljaycsICcuZGlyZWN0b3J5LWl0ZW0nLCB0aGlzLl9vblBpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5jYW4tcGluZycpLmhvdmVyKHRoaXMuX29uSG92ZXJJbi5iaW5kKHRoaXMpLCB0aGlzLl9vbkhvdmVyT3V0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnN1Ym1pdC1idXR0b24nLCB0aGlzLl9vblN1Ym1pdEJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgX29uUGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBmb3IgKGNvbnN0IGwgb2YgbGkucGFyZW50RWxlbWVudC5jaGlsZHJlbikge1xuICAgICAgbC5jbGFzc0xpc3QudG9nZ2xlKCdwaWNrZWQnLCBsID09PSBsaSlcbiAgICB9XG4gICAgdGhpcy5vYmplY3Quc2VsZWN0ZWQgPSBsaS5kYXRhc2V0LmVudHJ5VXVpZFxuICB9XG5cbiAgYXN5bmMgX29uSG92ZXJJbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKCFjYW52YXMucmVhZHkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0b2tlbiA9IChhd2FpdCBmcm9tVXVpZChsaS5kYXRhc2V0LmVudHJ5VXVpZCkpPy5vYmplY3RcbiAgICBpZiAodG9rZW4/LmlzVmlzaWJsZSkge1xuICAgICAgaWYgKCF0b2tlbi5jb250cm9sbGVkKSB7XG4gICAgICAgIHRva2VuLl9vbkhvdmVySW4oZXZlbnQsIHsgaG92ZXJPdXRPdGhlcnM6IHRydWUgfSlcbiAgICAgICAgdGhpcy5faGlnaGxpZ2h0ZWQgPSB0b2tlblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkhvdmVyT3V0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5faGlnaGxpZ2h0ZWQpIHtcbiAgICAgIHRoaXMuX2hpZ2hsaWdodGVkLl9vbkhvdmVyT3V0KGV2ZW50KVxuICAgIH1cbiAgICB0aGlzLl9oaWdobGlnaHRlZCA9IG51bGxcbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdEJ1dHRvbiAoZXZlbnQpIHtcbiAgICB0aGlzLm9iamVjdC5yZXNvbHZlKGF3YWl0IGZyb21VdWlkKHRoaXMub2JqZWN0LnNlbGVjdGVkKSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKCkge1xuICAgIGNvbnN0IGFsbG93ZWRUeXBlcyA9IFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgbGV0IGZvdW5kID0gW11cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2FudmFzLnJlYWR5ICYmIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3VuZCA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodCA9PiB0LmRvY3VtZW50KVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2FudmFzLnJlYWR5KSB7XG4gICAgICAgIGZvdW5kID0gY2FudmFzLnRva2Vucy5wbGFjZWFibGVzLmZpbHRlcih0ID0+IGFsbG93ZWRUeXBlcy5pbmNsdWRlcyh0LmRvY3VtZW50LmFjdG9yLnR5cGUpICYmICh0LmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHQuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKS5tYXAodCA9PiB0LmRvY3VtZW50KVxuICAgICAgfVxuICAgICAgY29uc3QgZm91bmRJRHMgPSBmb3VuZC5tYXAodCA9PiB0LmFjdG9ySWQpXG4gICAgICBmb3VuZCA9IGZvdW5kLmNvbmNhdChnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiBhbGxvd2VkVHlwZXMuaW5jbHVkZXMoYS50eXBlKSAmJiAhZm91bmRJRHMuaW5jbHVkZXMoYS5pZCkgJiYgKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gYS5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVIpKVxuICAgIH1cbiAgICBpZiAoZm91bmQubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gZm91bmRbMF1cbiAgICB9XG4gICAgaWYgKGZvdW5kLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZm91bmQpIHtcbiAgICAgICAgY29uc3QgaXNUb2tlbkRvY3VtZW50ID0gKG9wdGlvbiBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQpXG4gICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgdXVpZDogb3B0aW9uLnV1aWQsXG4gICAgICAgICAgbmFtZTogb3B0aW9uLm5hbWUsXG4gICAgICAgICAgaW1nOiAoaXNUb2tlbkRvY3VtZW50ID8gb3B0aW9uLmFjdG9yLnBvcnRyYWl0IDogb3B0aW9uLnBvcnRyYWl0KSxcbiAgICAgICAgICBjYW5QaW5nOiBpc1Rva2VuRG9jdW1lbnRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICAgIGxldCBzZWxlY3RlZCA9IG9wdGlvbnNbMV0udXVpZFxuICAgICAgaWYgKGdhbWUudXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbiA9IGZvdW5kLmZpbmQob3B0aW9uID0+IChvcHRpb24uYWN0b3JJZCA/PyBvcHRpb24uaWQpID09PSBnYW1lLnVzZXIuY2hhcmFjdGVyLmlkKVxuICAgICAgICBpZiAoZGVmYXVsdE9wdGlvbikge1xuICAgICAgICAgIHNlbGVjdGVkID0gZGVmYXVsdE9wdGlvbi51dWlkXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBuZXcgQWN0b3JQaWNrZXJEaWFsb2coeyBvcHRpb25zLCBzZWxlY3RlZCwgcmVzb2x2ZSB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQ29udHJvbGxlZEFjdG9yJykpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFRva2VuRG9jdW1lbnQsIHVpICovXG5pbXBvcnQgeyBBY3RvclBpY2tlckRpYWxvZyB9IGZyb20gJy4vYWN0b3ItcGlja2VyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdHcm91cE1lc3NhZ2Uge1xuICAvLyBTdGVwIDZjOiBHTSAvIC0gPSBSZW1vdmUgYSByb2xsXG4gIHN0YXRpYyBhc3luYyByZW1vdmVSb2xsICh7IG1lc3NhZ2VJZCwgbXNnLCB3aGljaCB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgbXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgIFsnZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4tPScgKyB3aGljaF06IG51bGxcbiAgICAgIH1cbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCA2YjogR00gLyBOb24gR00gPSBQdXNoIFJvbGxcbiAgc3RhdGljIGFzeW5jIHB1c2hNeVJvbGwgKHsgbWVzc2FnZUlkLCBtc2csIHdoaWNoIH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgbGV0IGdtSWQgPSBmYWxzZVxuICAgIGlmICghbXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgIGdtSWQgPSBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgfVxuICAgIHN3aXRjaCAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlKSB7XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS53YXNQdXNoZWQnXSA9IHRydWVcbiAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtQ29tYmluZWRSb2xsKHsgbXNnLCBnbUlkLCB1cGRhdGVzLCBwdXNoaW5nOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHJvbGxzID0geyBbd2hpY2hdOiBtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbCB9XG4gICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtTm9ybWFsUm9sbCh7IG1zZywgcm9sbHMsIGdtSWQsIHVwZGF0ZXMsIHB1c2hpbmc6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgNmE6IEdNIC8gTm9uIEdNID0gU3BlbmQgbHVja1xuICBzdGF0aWMgYXN5bmMgc3BlbmRNeUx1Y2sgKHsgbWVzc2FnZUlkLCBtc2csIHdoaWNoLCBpbmRleCwgbHVja0Ftb3VudCB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgbXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10udHlwZSkge1xuICAgICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgICAgaWYgKCFsdWNrQW1vdW50KSB7XG4gICAgICAgICAgICBjb25zdCBjaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YShtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZClcbiAgICAgICAgICAgIGx1Y2tBbW91bnQgPSBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NbaW5kZXhdLmx1Y2tUb1NwZW5kID8/IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGx1Y2tBbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5nZXRBY3Rvcihtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLmFjdG9yVXVpZClcbiAgICAgICAgICAgIGlmICghKGFjdG9yIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCA/IGFjdG9yLmFjdG9yIDogYWN0b3IpLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21EYXRhKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQpXG4gICAgICAgICAgICAgIGNoZWNrLmluY3JlYXNlTHVja1NwZW5kKGx1Y2tBbW91bnQpXG4gICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5jb21wbGV0ZWQnXSA9IGNoZWNrLkpTT05Sb2xsRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICBpZiAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdtSWQgPSBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgICAgICAgICAgICAgaWYgKGdtSWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXI6IGdtSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdncm91cC1tZXNzYWdlLXVwZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJZDogbXNnLmlkLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVzXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YShtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZClcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGNoZWNrLnVwZ3JhZGVDaGVjayhpbmRleCwgZmFsc2UpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsdWNrQW1vdW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudCwgZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0ge1xuICAgICAgICAgICAgICBbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5jb21wbGV0ZWQnXTogY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGlmIChtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ21JZCA9IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKClcbiAgICAgICAgICAgICAgICBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JSb2xsQWxyZWFkeUNvbXBsZXRlZCcsIHsgbG9jYWxpemU6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDU6IEdNIC8gLSA9IFVwZGF0ZSB0aGUgbWVzc2FnZVxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVGhlR3JvdXBNZXNzYWdlICh7IG1zZywgdXBkYXRlcywgcm9sbERhdGEgfSA9IHt9KSB7XG4gICAgaWYgKG1zZz8uZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddKSB7XG4gICAgICBpZiAodHlwZW9mIHJvbGxEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByb2xsRGF0YSA9IHt9XG4gICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGw6IG1zZz8uZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbCwgcXVpY2s6IHRydWUgfSlcbiAgICAgICAgICByb2xsRGF0YVt3aGljaF0gPSByb2xsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgcm9sbERhdGEgfSwgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLCBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdCh1cGRhdGVzKT8uZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddID8/IHt9LCB7IHBlcmZvcm1EZWxldGlvbnM6IHRydWUgfSkpXG4gICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG9wdGlvbnMucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkKSB7XG4gICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZCA9IENvQzdDaGVjay5mcm9tRGF0YShvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvcHRpb25zLmFsbFJvbGxzQ29tcGxldGVkID0gdHJ1ZVxuICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBvcHRpb25zLnJvbGxTdGF0dXNlcykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucy5hbGxSb2xsc0NvbXBsZXRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5hbGxSb2xsc0NvbXBsZXRlZCddID0gb3B0aW9ucy5hbGxSb2xsc0NvbXBsZXRlZFxuICAgICAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICAgIG9wdGlvbnMuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICBvcHRpb25zLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgICAgICAgaWYgKG9wdGlvbnMuYWxsUm9sbHNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGxldCBzdWNjZXNzZXMgPSAwXG4gICAgICAgICAgICBsZXQgZmFpbHVyZXMgPSAwXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG9wdGlvbnMucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLmlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NlcysrXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlcysrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWNjZXNzZXMgPiAwICYmIChvcHRpb25zLmNvbWJpbmVkID09PSAnYW55JyB8fCAoZmFpbHVyZXMgPT09IDAgJiYgb3B0aW9ucy5jb21iaW5lZCA9PT0gJ2FsbCcpKSkge1xuICAgICAgICAgICAgICBvcHRpb25zLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuaXNGYWlsdXJlID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuaXNTdWNjZXNzJ10gPSBvcHRpb25zLmlzU3VjY2Vzc1xuICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5pc0ZhaWx1cmUnXSA9IG9wdGlvbnMuaXNGYWlsdXJlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgICAgaWYgKG9wdGlvbnMuYWxsUm9sbHNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaXNUaWUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXNDb21iYXQpIHtcbiAgICAgICAgICAgICAgLy8gU29ydCBjb21iYXQgcm9sbHMgYnkgaW5kZXguIGF0dGFja2VycyBmaXJzdFxuICAgICAgICAgICAgICBvcHRpb25zLnJvbGxPcmRlciA9IEFycmF5LmZyb20oKG5ldyBJbnQ4QXJyYXkob3B0aW9ucy5yb2xsT3JkZXIubWFwKHYgPT4gcGFyc2VJbnQodi5zdWJzdHIoMSksIDEwKSkpKS5zb3J0KCkpLm1hcCh2ID0+ICdyJyArIHYpXG4gICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NMZXZlbHMgPSB7fVxuICAgICAgICAgICAgICBvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBvcHRpb25zLnJvbGxTdGF0dXNlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLnBhc3NlZCkge1xuICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsc1tvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLnN1Y2Nlc3NMZXZlbF0gPSBwYXJzZUludChzdWNjZXNzTGV2ZWxzW29wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsXSA/PyAwLCAxMCkgKyAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNEb2RnaW5nICYmICFvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNBdHRhY2tlcikge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kZWZlbmRlcklzRG9kZ2luZyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmRlZmVuZGVySXNEb2RnaW5nJ10gPSBvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmFkdmFudGFnZUF0dGFja2VyID09PSBmYWxzZSAmJiBvcHRpb25zLmFkdmFudGFnZURlZmVuZGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLmFkdmFudGFnZURlZmVuZGVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmFkdmFudGFnZURlZmVuZGVyJ10gPSBvcHRpb25zLmFkdmFudGFnZURlZmVuZGVyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYWR2YW50YWdlQXR0YWNrZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlQXR0YWNrZXInXSA9IG9wdGlvbnMuYWR2YW50YWdlQXR0YWNrZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgYmVzdCA9IE1hdGgubWF4KC4uLk9iamVjdC5rZXlzKHN1Y2Nlc3NMZXZlbHMpKVxuICAgICAgICAgICAgICBvcHRpb25zLm5lZWRzVGllQnJlYWtlciA9IGZhbHNlXG4gICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0VGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICAgIGlmIChiZXN0ID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gb3B0aW9ucy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICAgICAgICAgIGxldCByb2xsSXNXaW5uZXIgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgbGV0IHJvbGxJc1RpZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPT09IGJlc3QgJiYgc3VjY2Vzc0xldmVsc1tiZXN0XSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByb2xsSXNXaW5uZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsID09PSBiZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFkdmFudGFnZUF0dGFja2VyICYmIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0F0dGFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcm9sbElzV2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYWR2YW50YWdlRGVmZW5kZXIgJiYgIW9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0F0dGFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcm9sbElzV2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIHJvbGxJc1dpbm5lciA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICByb2xsSXNUaWUgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5uZWVkc1RpZUJyZWFrZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5pc1RpZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzV2lubmVyID0gcm9sbElzV2lubmVyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNUaWUgPSByb2xsSXNUaWVcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5pc1dpbm5lciddID0gcm9sbElzV2lubmVyXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNUaWUnXSA9IHJvbGxJc1RpZVxuICAgICAgICAgICAgICAgICAgaWYgKHJvbGxJc1dpbm5lciAmJiAhcm9sbElzVGllKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNBdHRhY2tlcikge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNNYW5ldXZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvbGxEYXRhW3doaWNoXS5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdFRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvbGxEYXRhW3doaWNoXS5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNNYW5ldXZlcikge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNEb2RnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdFRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9sbERhdGFbd2hpY2hdLmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0VGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByb2xsRGF0YVt3aGljaF0uYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9sbERhdGFbd2hpY2hdLmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5uZWVkc1RpZUJyZWFrZXInXSA9IG9wdGlvbnMubmVlZHNUaWVCcmVha2VyXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBTb3J0IGJ5IHN1Y2Nlc3Nlc1xuICAgICAgICAgICAgICBjb25zdCBvcHBvc2VkUm9sbFRpZUJyZWFrZXIgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxuICAgICAgICAgICAgICBvcHRpb25zLnJvbGxPcmRlci5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPiBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPCBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3Bwb3NlZFJvbGxUaWVCcmVha2VyKSB7XG4gICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbYV0uY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0ID4gb3B0aW9ucy5yb2xsU3RhdHVzZXNbYl0uY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1thXS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQgPCBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5yYXdWYWx1ZSA+IG9wdGlvbnMucm9sbFN0YXR1c2VzW2JdLmNvbXBsZXRlZC5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1thXS5jb21wbGV0ZWQucmF3VmFsdWUgPCBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQucmF3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGNvbnN0IG9mZnNldE1heCA9IG9wdGlvbnMucm9sbE9yZGVyLmxlbmd0aFxuICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMFxuICAgICAgICAgICAgICBjb25zdCBhID0gb3B0aW9ucy5yb2xsU3RhdHVzZXNbb3B0aW9ucy5yb2xsT3JkZXJbMF1dXG4gICAgICAgICAgICAgIGlmICghYS5mYWlsZWQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgb2Zmc2V0IDwgb2Zmc2V0TWF4OyBvZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IG9wdGlvbnMucm9sbFN0YXR1c2VzW29wdGlvbnMucm9sbE9yZGVyW29mZnNldF1dXG4gICAgICAgICAgICAgICAgICBpZiAoYS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsICE9PSBiLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgfHwgKG9wcG9zZWRSb2xsVGllQnJlYWtlciA/IGEuY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0ICE9PSBiLmNvbXBsZXRlZC5tb2RpZmllZFJlc3VsdCA6IGEuY29tcGxldGVkLnJhd1ZhbHVlICE9PSBiLmNvbXBsZXRlZC5yYXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LS1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gLTFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvcHRpb25zLmlzVGllID0gb2Zmc2V0ID4gMFxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9mZnNldE1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlzV2lubmVyID0gZmFsc2VcbiAgICAgICAgICAgICAgICBsZXQgaXNUaWUgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGlmIChpIDw9IG9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgaXNXaW5uZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICBpc1RpZSA9IG9wdGlvbnMuaXNUaWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgd2hpY2ggPSBvcHRpb25zLnJvbGxPcmRlcltpXVxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc1dpbm5lciA9IGlzV2lubmVyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzVGllID0gaXNUaWVcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNXaW5uZXInXSA9IGlzV2lubmVyXG4gICAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzVGllJ10gPSBpc1RpZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9wdGlvbnMubmVlZHNUaWVCcmVha2VyID0gZmFsc2VcbiAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLm5lZWRzVGllQnJlYWtlciddID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5pc1RpZSddID0gb3B0aW9ucy5pc1RpZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKENvQzdHcm91cE1lc3NhZ2UuZ2V0VGVtcGxhdGVQYXRoKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10udHlwZSksIG9wdGlvbnMpXG4gICAgICB1cGRhdGVzLmNvbnRlbnQgPSBodG1sXG4gICAgICBhd2FpdCBtc2cudXBkYXRlKHVwZGF0ZXMpXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCA0OiBHTSAvIC0gPSBQcmVwYXJlIG1lc3NhZ2UgZGF0YVxuICBzdGF0aWMgYXN5bmMgdXBkYXRlVGhlTWVzc2FnZSAoeyBtZXNzYWdlSWQsIHVwZGF0ZXMgfSkge1xuICAgIGNvbnN0IG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAobXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10gPz8gZmFsc2UpIHtcbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldENoZWNrICh7IG1zZywgdGhlUm9sbCB9KSB7XG4gICAgY29uc3QgY2hlY2tEYXRhID0ge1xuICAgICAgZGlmZmljdWx0eTogdGhlUm9sbC5kaWZmaWN1bHR5LFxuICAgICAgZGljZU1vZGlmaWVyOiB0aGVSb2xsLmJvbnVzLFxuICAgICAgYWN0b3JLZXk6ICh0aGVSb2xsLmFjdG9yLmFjdG9yS2V5ID8/IHRoZVJvbGwuYWN0b3IuYWN0b3IuYWN0b3JLZXkpLFxuICAgICAgZGVueVB1c2g6IGZhbHNlLFxuICAgICAgY29tYmF0OiAobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5pc0NvbWJhdCA/PyBmYWxzZSlcbiAgICB9XG4gICAgc3dpdGNoICh0aGVSb2xsLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgY2hlY2tEYXRhLmNoYXJhY3RlcmlzdGljID0gdGhlUm9sbC5rZXlcbiAgICAgICAgY2hlY2tEYXRhLmRlbnlQdXNoID0gKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBjaGVja0RhdGEuYXR0cmlidXRlID0gdGhlUm9sbC5rZXlcbiAgICAgICAgY2hlY2tEYXRhLmRlbnlQdXNoID0gKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIGNoZWNrRGF0YS5za2lsbCA9IHRoZVJvbGwuc2tpbGxcbiAgICAgICAgY2hlY2tEYXRhLmRlbnlQdXNoID0gKChtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLmRlbnlQdXNoID8/IGZhbHNlKSB8fCAhdGhlUm9sbC5wdXNoYWJsZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBjaGVja0RhdGEuaXRlbSA9IHRoZVJvbGwuaXRlbVxuICAgICAgICBjaGVja0RhdGEuZGVueVB1c2ggPSAoKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpIHx8ICF0aGVSb2xsLnB1c2hhYmxlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmNyZWF0ZShjaGVja0RhdGEpXG4gIH1cblxuICAvLyBTdGVwIDM6IEdNIC8gTm9uIEdNID0gUGVyZm9ybSBhIHJvbGxcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1Sb2xsICh7IG1zZywgd2hpY2gsIHJvbGwsIHB1c2hpbmcgfSA9IHt9KSB7XG4gICAgY29uc3QgdGhlUm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGwsIHF1aWNrOiBmYWxzZSB9KVxuICAgIGlmICghdGhlUm9sbCkge1xuICAgICAgcmV0dXJuIHt9XG4gICAgfVxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5nZXRDaGVjayh7IG1zZywgdGhlUm9sbCB9KVxuICAgIGlmIChwdXNoaW5nKSB7XG4gICAgICBjaGVjay5wdXNoaW5nID0gcHVzaGluZ1xuICAgIH1cbiAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICBmb3JjZURTTjogdHJ1ZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmNvbXBsZXRlZCddID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgcmV0dXJuIHVwZGF0ZXNcbiAgfVxuXG4gIC8vIFN0ZXAgMmI6IEdNIC8gTm9uIEdNID0gcGVyZm9ybSByb2xsIGRhdGFcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1Db21iaW5lZFJvbGwgKHsgbWVzc2FnZUlkLCBtc2csIGdtSWQsIHVwZGF0ZXMsIHB1c2hpbmcgPSBmYWxzZSB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbERhdGEgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzKSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wYXJzZVJvbGxzKHsgcm9sbDogbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLCBxdWljazogZmFsc2UgfSlcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIHJvbGxEYXRhW3doaWNoXSA9IHJvbGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwb29sID0ge31cbiAgICBmb3IgKGNvbnN0IHdoaWNoIGluIHJvbGxEYXRhKSB7XG4gICAgICBwb29sW3BhcnNlSW50KHJvbGxEYXRhW3doaWNoXS5ib251cyA/PyAwLCAxMCldID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0RpY2UuY29tYmluZWRSb2xsKHsgcG9vbCB9KVxuXG4gICAgbGV0IGZpcnN0ID0gdHJ1ZVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbERhdGEpIHtcbiAgICAgIGNvbnN0IGJvbnVzID0gcGFyc2VJbnQocm9sbERhdGFbd2hpY2hdLmJvbnVzID8/IDAsIDEwKVxuICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLmdldENoZWNrKHsgbXNnLCB0aGVSb2xsOiByb2xsRGF0YVt3aGljaF0gfSlcbiAgICAgIGlmIChwdXNoaW5nKSB7XG4gICAgICAgIGNoZWNrLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgICB9XG4gICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICAgIHJvbGw6IHJvbGxbYm9udXNdLFxuICAgICAgICBzaWxlbnQ6IChmaXJzdCA9PT0gZmFsc2UgPyB0cnVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgZm9yY2VEU046IGZpcnN0XG4gICAgICB9KVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmNvbXBsZXRlZCddID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICBmaXJzdCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBnbUlkID0gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgaWYgKGdtSWQgIT09IGZhbHNlKSB7XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICAgIHR5cGU6ICdncm91cC1tZXNzYWdlLXVwZGF0ZScsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgdXBkYXRlc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgMmE6IEdNIC8gTm9uIEdNID0gcGVyZm9ybSByb2xsIGRhdGFcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1Ob3JtYWxSb2xsICh7IG1lc3NhZ2VJZCwgbXNnLCByb2xscywgZ21JZCwgdXBkYXRlcywgcHVzaGluZyA9IGZhbHNlIH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHdoaWNoIGluIHJvbGxzKSB7XG4gICAgICBpZiAodHlwZW9mIG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkID09PSAndW5kZWZpbmVkJyB8fCBwdXNoaW5nKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odXBkYXRlcywgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtUm9sbCh7IG1zZywgd2hpY2gsIHJvbGw6IHJvbGxzW3doaWNoXSwgcHVzaGluZyB9KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JSb2xsQWxyZWFkeUNvbXBsZXRlZCcsIHsgbG9jYWxpemU6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgIH0gZWxzZSBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgIHVwZGF0ZXNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAyOiBHTSAvIE5vbiBHTSA9IFByZXBhcmUgcm9sbCBkYXRhXG4gIHN0YXRpYyBhc3luYyBwZXJmb3JtTXlSb2xscyAoeyBtZXNzYWdlSWQsIG1zZywgcm9sbHMgfSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICBmb3IgKGNvbnN0IHdoaWNoIGluIHJvbGxzKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLm5hbWVSb2xsKHsgd2hpY2gsIHJvbGw6IHJvbGxzW3doaWNoXSwgdXBkYXRlcyB9KVxuICAgIH1cblxuICAgIGNvbnN0IGdtSWQgPSAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykgPyBmYWxzZSA6IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKCkpXG5cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICB9IGVsc2UgaWYgKGdtSWQgIT09IGZhbHNlKSB7XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICAgIHR5cGU6ICdncm91cC1tZXNzYWdlLXVwZGF0ZScsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgdXBkYXRlc1xuICAgICAgICB9KVxuICAgICAgICAvLyBXYWl0IGZvciBhIGJpdCB0byByZWR1Y2UgcmFjZSBjb25kaXRpb25zXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlKSB7XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIENvQzdHcm91cE1lc3NhZ2UucGVyZm9ybUNvbWJpbmVkUm9sbCh7IG1zZywgZ21JZCwgdXBkYXRlcyB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIENvQzdHcm91cE1lc3NhZ2UucGVyZm9ybU5vcm1hbFJvbGwoeyBtc2csIHJvbGxzLCBnbUlkLCB1cGRhdGVzIH0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAyOiBHTSAvIE5vbiBHTSA9IE5hbWUgcm9sbHNcbiAgc3RhdGljIGFzeW5jIG5hbWVSb2xsICh7IHdoaWNoLCByb2xsLCB1cGRhdGVzIH0pIHtcbiAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnBhcnNlUm9sbHMoeyByb2xsLCBxdWljazogZmFsc2UgfSlcbiAgICBpZiAocGFyc2VkKSB7XG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuc2hvcnROYW1lJ10gPSBwYXJzZWQuc2hvcnROYW1lXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuZnVsbE5hbWUnXSA9IHBhcnNlZC5mdWxsTmFtZVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLnRhZ3MnXSA9IHBhcnNlZC50YWdzID8/IFtdXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcucGVyY2VudCddID0gcGFyc2VkLnBlcmNlbnQgPz8gMVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzTWFuZXV2ZXInXSA9IHBhcnNlZC5pc01hbmV1dmVyID8/IGZhbHNlXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNEb2RnaW5nJ10gPSBwYXJzZWQuaXNEb2RnZSA/PyBmYWxzZVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzV2VhcG9uJ10gPSBwYXJzZWQuaXNEb2RnZSA/PyBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgMTogR00gLyAtID0gQ3JlYXRlIG1lc3NhZ2VcbiAgc3RhdGljIGFzeW5jIG5ld0dyb3VwTWVzc2FnZSAoeyByb2xsRGF0YSA9IHVuZGVmaW5lZCwgb3B0aW9ucyB9KSB7XG4gICAgaWYgKHR5cGVvZiByb2xsRGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJvbGxEYXRhID0ge31cbiAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gb3B0aW9ucy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGw6IG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLCBxdWljazogdHJ1ZSB9KVxuICAgICAgICByb2xsRGF0YVt3aGljaF0gPSByb2xsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbHNCeVVzZXIgPSB7fVxuICAgIGNvbnN0IHJvbGxSZXF1aXJlc05hbWUgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbERhdGEpIHtcbiAgICAgIGxldCBhc1VzZXJJZCA9ICcnXG4gICAgICBzd2l0Y2ggKHJvbGxEYXRhW3doaWNoXS5hdXRvUm9sbC5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChyb2xsRGF0YVt3aGljaF0uYXV0b1JvbGxbMF0gIT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgICAgYXNVc2VySWQgPSByb2xsRGF0YVt3aGljaF0uYXV0b1JvbGxbMF1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBhc1VzZXJJZCA9IGdhbWUudXNlci5pZFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxpbmcgPSBmYWxzZVxuICAgICAgICAgIGlmIChyb2xsRGF0YVt3aGljaF0uc2hvcnROYW1lID09PSAnLScpIHtcbiAgICAgICAgICAgIHJvbGxSZXF1aXJlc05hbWVbd2hpY2hdID0gcm9sbERhdGFbd2hpY2hdLnJvbGxcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChhc1VzZXJJZCAhPT0gJycpIHtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocm9sbHNCeVVzZXIsIGFzVXNlcklkKSkge1xuICAgICAgICAgIHJvbGxzQnlVc2VyW2FzVXNlcklkXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgcm9sbHNCeVVzZXJbYXNVc2VySWRdW3doaWNoXSA9IG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsXG4gICAgICAgIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsaW5nID0gYXNVc2VySWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSBPYmplY3QuYXNzaWduKHsgcm9sbERhdGEgfSwgb3B0aW9ucylcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoQ29DN0dyb3VwTWVzc2FnZS5nZXRUZW1wbGF0ZVBhdGgob3B0aW9ucy50eXBlKSwgdGVtcGxhdGVEYXRhKVxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgICdncm91cC1tZXNzYWdlJzogb3B0aW9uc1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cbiAgICBzd2l0Y2ggKGNoYXREYXRhLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8udHlwZSkge1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIGNoYXREYXRhLnNwZWFrZXIgPSBPYmplY3QuYXNzaWduKGNoYXREYXRhLnNwZWFrZXIgPz8ge30sIHsgYWxpYXM6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcHBvc2VkUm9sbENhcmQnKSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICBjaGF0RGF0YS5zcGVha2VyID0gT2JqZWN0LmFzc2lnbihjaGF0RGF0YS5zcGVha2VyID8/IHt9LCB7IGFsaWFzOiBPYmplY3QudmFsdWVzKHJvbGxEYXRhKVswXS5hY3Rvci5uYW1lIH0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbFJlcXVpcmVzTmFtZSkge1xuICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5uYW1lUm9sbCh7IHdoaWNoLCByb2xsOiByb2xsUmVxdWlyZXNOYW1lW3doaWNoXSwgdXBkYXRlcyB9KVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMsIHJvbGxEYXRhIH0pXG4gICAgfVxuICAgIGZvciAoY29uc3QgdXNlcklkIGluIHJvbGxzQnlVc2VyKSB7XG4gICAgICBpZiAodXNlcklkICE9PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2Utcm9sbCcsXG4gICAgICAgICAgbGlzdGVuZXI6IHVzZXJJZCxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgICByb2xsczogcm9sbHNCeVVzZXJbdXNlcklkXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJvbGxzQnlVc2VyLCBnYW1lLnVzZXIuaWQpKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1NeVJvbGxzKHtcbiAgICAgICAgbXNnLFxuICAgICAgICByb2xsczogcm9sbHNCeVVzZXJbZ2FtZS51c2VyLmlkXVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGlzVXNlckFjdGl2ZSAoeyB3aGljaCwgbXNnIH0pIHtcbiAgICBpZiAobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsaW5nID8/IGZhbHNlKSB7XG4gICAgICBjb25zdCB1c2VyID0gZ2FtZS51c2Vycy5nZXQobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxpbmcpXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgIXVzZXIgfHwgIXVzZXIuYWN0aXZlKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgICAgWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcucm9sbGluZyddOiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZ21JZCA9IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKClcbiAgICAgICAgICBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGJ1dHRvbi5jbG9zZXN0KCdsaS5jaGF0LW1lc3NhZ2UnKT8uZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCBrZXkgPSBidXR0b24uZGF0YXNldC5rZXlcbiAgICBsZXQgdmFsdWUgPSBidXR0b24uZGF0YXNldC52YWx1ZVxuICAgIGlmIChtZXNzYWdlSWQgJiYga2V5KSB7XG4gICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0LW9ubHktZ20nKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICBpZiAodHlwZW9mIG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LltrZXldICE9PSAndW5kZWZpbmVkJyAmJiBtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhbHVlID0gIW1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ11ba2V5XVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgICAgWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuJyArIGtleV06IHZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlICdhZHZhbnRhZ2VEZWZlbmRlcic6XG4gICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlQXR0YWNrZXInXSA9ICF2YWx1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdhZHZhbnRhZ2VBdHRhY2tlcic6XG4gICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlRGVmZW5kZXInXSA9ICF2YWx1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGJ1dHRvbi5jbG9zZXN0KCdsaS5jaGF0LW1lc3NhZ2UnKT8uZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCB3aGljaCA9IGJ1dHRvbi5kYXRhc2V0LndoaWNoXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgaWYgKHR5cGVvZiBtc2cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2hpY2ggIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwuc3BsaXQoJyMnKVswXSlcbiAgICAgICAgICBpZiAoIWFjdG9yIHx8ICFhY3Rvci5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdDb0M3LkVycm9yTm9BY3RvclBlcm1pc3Npb24nLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2ltcGF0aWVudC1yb2xsJzpcbiAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5pc1VzZXJBY3RpdmUoe1xuICAgICAgICAgICAgICAgIHdoaWNoLFxuICAgICAgICAgICAgICAgIG1zZ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbm9ybWFsLXJvbGwnOlxuICAgICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1NeVJvbGxzKHtcbiAgICAgICAgICAgICAgICBtc2csXG4gICAgICAgICAgICAgICAgcm9sbHM6IHsgW3doaWNoXTogbXNnLmZsYWdzLkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbCB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICd1c2UtbHVjayc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2Uuc3BlbmRNeUx1Y2soe1xuICAgICAgICAgICAgICAgIHdoaWNoLFxuICAgICAgICAgICAgICAgIGluZGV4OiBidXR0b24uZGF0YXNldC5pbmRleCxcbiAgICAgICAgICAgICAgICBsdWNrQW1vdW50OiBidXR0b24uZGF0YXNldC5sdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgIG1zZ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOlxuICAgICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnJlbW92ZVJvbGwoe1xuICAgICAgICAgICAgICAgIHdoaWNoLFxuICAgICAgICAgICAgICAgIG1zZ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UucHVzaE15Um9sbCh7XG4gICAgICAgICAgICAgICAgd2hpY2gsXG4gICAgICAgICAgICAgICAgbXNnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbGV0IG9rYXkgPSBmYWxzZVxuICAgICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwuc3BsaXQoJyMnKVswXSlcbiAgICAgICAgICAgIGlmIChhY3Rvci5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgICAgICAgIG9rYXkgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghb2theSkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQ29DNy5FcnJvck5vQWN0b3JQZXJtaXNzaW9uJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICdyb2xsLW9uY2UnOlxuICAgICAgICAgICAgICBpZiAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlID09PSAnY29tYmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtQ29tYmluZWRSb2xsKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3RvZ2dsZSc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UuX29uVG9nZ2xlKGV2ZW50KVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZW5kZXJDaGF0TWVzc2FnZSAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgY2FuTW9kaWZ5ID0ge1xuICAgICAgZ206IGdhbWUudXNlci5pc0dNXG4gICAgfVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gYXBwLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKGFwcC5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLnNwbGl0KCcjJylbMF0pXG4gICAgICBjYW5Nb2RpZnlbd2hpY2hdID0gYWN0b3I/LmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykgPz8gZmFsc2VcbiAgICB9XG4gICAgY2FuTW9kaWZ5LmFueSA9IE9iamVjdC52YWx1ZXMoY2FuTW9kaWZ5KS5maWx0ZXIoYiA9PiBiKS5sZW5ndGggPiAwXG4gICAgZm9yIChjb25zdCBrZXkgaW4gY2FuTW9kaWZ5KSB7XG4gICAgICBpZiAoIWNhbk1vZGlmeVtrZXldKSB7XG4gICAgICAgIGh0bWwuZmluZCgnLnZpc2libGUtb25seS0nICsga2V5KS5yZW1vdmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaHRtbC5maW5kKCcuaGlkZGVuLW9ubHktJyArIGtleSkucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgaHRtbC5vbignY2xpY2snLCAnLnJvbGwtY2FyZC12MiBidXR0b246bm90KC50b2dnbGUtc3dpdGNoKScsIENvQzdHcm91cE1lc3NhZ2UuX29uQ2xpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcucm9sbC1jYXJkLXYyIGE6bm90KC50b2dnbGUtbGluayknLCBDb0M3R3JvdXBNZXNzYWdlLl9vbkNsaWNrLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnJvbGwtY2FyZC12MiBidXR0b24udG9nZ2xlLXN3aXRjaCcsIENvQzdHcm91cE1lc3NhZ2UuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnJvbGwtY2FyZC12MiBhLnRvZ2dsZS1saW5rJywgQ29DN0dyb3VwTWVzc2FnZS5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRBY3RvciAoaWRlbnRpZmllcikge1xuICAgIGlmIChpZGVudGlmaWVyLm1hdGNoKC9eYVxcLi8pKSB7XG4gICAgICByZXR1cm4gKChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGlkZW50aWZpZXIpKT8uWzBdKSA/PyBudWxsXG4gICAgfVxuICAgIGlmIChpZGVudGlmaWVyLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICByZXR1cm4gYXdhaXQgZnJvbVV1aWQoaWRlbnRpZmllcilcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChpZGVudGlmaWVyKSA/PyBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcGFyc2VSb2xscyAoeyByb2xsLCBxdWljayA9IHRydWUsIGRlZmF1bHRVdWlkID0gJycgfSkge1xuICAgIGNvbnN0IG1hdGNoID0gcm9sbC5tYXRjaCgvXig/PGE+W14jXSsjKT8oPzx0PmF0dHJpYnV0ZXxjaGFyYWN0ZXJpc3RpY3xpdGVtfHNraWxsKSMoPzxrPlteI10rKSgjKD88bT4uKikpPyQvKVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3QgbW9kaWZpZXJzID0gKG1hdGNoLmdyb3Vwcy5tID8/ICcnKS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcjJylcbiAgICAgIGNvbnN0IGJvbnVzID0gcGFyc2VJbnQobW9kaWZpZXJzLmZpbmQobSA9PiBtLm1hdGNoKC9eWystXVxcZCskLykpID8/IDAsIDEwKVxuICAgICAgY29uc3QgZGlmZmljdWx0eSA9IG1vZGlmaWVycy5maW5kKG0gPT4gbS5tYXRjaCgvXlxcZCskLykpXG4gICAgICBjb25zdCBwdXNoaW5nID0gbW9kaWZpZXJzLmZpbHRlcihtID0+IG0gPT09ICdwJykubGVuZ3RoID4gMFxuICAgICAgLy8gY29uc3QgYXR0YWNrZXIgPSBtb2RpZmllcnMuZmlsdGVyKG0gPT4gbSA9PT0gJ3gnKS5sZW5ndGggPiAwIC8vIE5ZSVxuICAgICAgLy8gY29uc3QgZGVmZW5kZXIgPSBtb2RpZmllcnMuZmlsdGVyKG0gPT4gbSA9PT0gJ28nKS5sZW5ndGggPiAwIC8vIE5ZSVxuICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XG4gICAgICAgIHR5cGU6IG1hdGNoLmdyb3Vwcy50LFxuICAgICAgICBrZXk6IG1hdGNoLmdyb3Vwcy5rLFxuICAgICAgICBib251cyxcbiAgICAgICAgZGlmZmljdWx0eTogKChkaWZmaWN1bHR5ID8/ICcnKS50b1N0cmluZygpID09PSAnMCcgPyBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gOiAoZGlmZmljdWx0eSA/IHBhcnNlSW50KGRpZmZpY3VsdHksIDEwKSA6IChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJyA/IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikpKSxcbiAgICAgICAgcHVzaGluZ1xuICAgICAgfVxuICAgICAgaWYgKCFtYXRjaC5ncm91cHMuYSAmJiBkZWZhdWx0VXVpZCAmJiBkZWZhdWx0VXVpZCAhPT0gJycpIHtcbiAgICAgICAgbWF0Y2guZ3JvdXBzLmEgPSBkZWZhdWx0VXVpZCArICcjJ1xuICAgICAgfVxuICAgICAgaWYgKG1hdGNoLmdyb3Vwcy5hKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5nZXRBY3RvcihtYXRjaC5ncm91cHMuYS5zdWJzdHIoMCwgbWF0Y2guZ3JvdXBzLmEubGVuZ3RoIC0gMSkpXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICAgIHJvbGxEYXRhLmFjdG9yID0gYWN0b3JcbiAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+ICF1LmlzR00gJiYgcm9sbERhdGEuYWN0b3IuY2FuVXNlck1vZGlmeSh1LCAndXBkYXRlJykpLm1hcCh1ID0+IHsgcmV0dXJuIHsgaWQ6IHUuaWQsIGFjdGl2ZTogdS5hY3RpdmUgfSB9KVxuICAgICAgICBpZiAocm9sbERhdGEuYXV0b1JvbGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJvbGxEYXRhLmF1dG9Sb2xsID0gcm9sbERhdGEuYXV0b1JvbGwuZmlsdGVyKGQgPT4gZC5hY3RpdmUpLm1hcChkID0+IGQuaWQpXG4gICAgICAgICAgaWYgKHJvbGxEYXRhLmF1dG9Sb2xsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBbJ3ByZXZlbnQnLCAncm9sbCddXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yUGlja2VyRGlhbG9nLmNyZWF0ZSgpXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ0NvQzcuV2Fybk5vQ29udHJvbGxlZEFjdG9yJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgICAgcm9sbERhdGEuYWN0b3IgPSBhY3RvclxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBbZ2FtZS51c2VyLmlkXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvbGxEYXRhLmF1dG9Sb2xsID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiAhdS5pc0dNICYmIHJvbGxEYXRhLmFjdG9yLmNhblVzZXJNb2RpZnkodSwgJ3VwZGF0ZScpKS5tYXAodSA9PiB7IHJldHVybiB7IGlkOiB1LmlkLCBhY3RpdmU6IHUuYWN0aXZlIH0gfSlcbiAgICAgICAgICBpZiAocm9sbERhdGEuYXV0b1JvbGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSByb2xsRGF0YS5hdXRvUm9sbC5maWx0ZXIoZCA9PiBkLmFjdGl2ZSkubWFwKGQgPT4gZC5pZClcbiAgICAgICAgICAgIGlmIChyb2xsRGF0YS5hdXRvUm9sbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBbJ3ByZXZlbnQnLCAncm9sbCddXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByb2xsRGF0YS5yb2xsID0gcm9sbERhdGEuYWN0b3IudXVpZCArICcjJyArIHJvbGxEYXRhLnR5cGUgKyAnIycgKyByb2xsRGF0YS5rZXkgKyAocm9sbERhdGEuYm9udXMgPCAwID8gJyMnICsgcm9sbERhdGEuYm9udXMgOiAocm9sbERhdGEuYm9udXMgPiAwID8gJyMrJyArIHJvbGxEYXRhLmJvbnVzIDogJycpKSArIChkaWZmaWN1bHR5ID09PSAwID8gJyMwJyA6IChkaWZmaWN1bHR5ID8gJyMnICsgcGFyc2VJbnQoZGlmZmljdWx0eSwgMTApIDogJycpKVxuICAgICAgcm9sbERhdGEucG9ydHJhaXQgPSAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IudGV4dHVyZS5zcmMgOiByb2xsRGF0YS5hY3Rvci5wb3J0cmFpdClcbiAgICAgIHJvbGxEYXRhLnNob3J0TmFtZSA9ICctJ1xuICAgICAgcm9sbERhdGEuZnVsbE5hbWUgPSAnLSdcbiAgICAgIHN3aXRjaCAocm9sbERhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHJvbGxEYXRhLmtleSk/LnNob3J0ID8/ICctJ1xuICAgICAgICAgIHJvbGxEYXRhLmZ1bGxOYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHJvbGxEYXRhLmtleSk/LmxhYmVsID8/ICctJ1xuICAgICAgICAgIHJvbGxEYXRhLnBlcmNlbnQgPSAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IuYWN0b3IgOiByb2xsRGF0YS5hY3Rvcikuc3lzdGVtPy5jaGFyYWN0ZXJpc3RpY3Nbcm9sbERhdGEua2V5XT8udmFsdWUgPz8gMVxuICAgICAgICAgIGlmIChyb2xsRGF0YS5zaG9ydE5hbWUgPT09ICctJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgICBzd2l0Y2ggKHJvbGxEYXRhLmtleSkge1xuICAgICAgICAgICAgY2FzZSAnbGNrJzpcbiAgICAgICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICAgICAgICByb2xsRGF0YS5mdWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgIHJvbGxEYXRhLnNob3J0TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxuICAgICAgICAgICAgICByb2xsRGF0YS5mdWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci5hY3RvciA6IHJvbGxEYXRhLmFjdG9yKS5zeXN0ZW0/LmF0dHJpYnNbcm9sbERhdGEua2V5XT8udmFsdWUgPz8gMVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICBpZiAoIXF1aWNrKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbHMgPSBhd2FpdCAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IuYWN0b3IgOiByb2xsRGF0YS5hY3RvcikuZ2V0SXRlbU9yQWRkKHJvbGxEYXRhLmtleSwgJ3NraWxsJylcbiAgICAgICAgICAgIGlmIChza2lsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJvbGxEYXRhLnNraWxsID0gc2tpbGxzWzBdXG4gICAgICAgICAgICAgIHJvbGxEYXRhLnNob3J0TmFtZSA9IHNraWxsc1swXS5zaG9ydE5hbWVcbiAgICAgICAgICAgICAgcm9sbERhdGEuZnVsbE5hbWUgPSBza2lsbHNbMF0uc2hvcnROYW1lXG4gICAgICAgICAgICAgIHJvbGxEYXRhLnB1c2hhYmxlID0gKHNraWxsc1swXS5zeXN0ZW0ucHJvcGVydGllcz8ucHVzaCA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IHNraWxsc1swXS52YWx1ZVxuICAgICAgICAgICAgICByb2xsRGF0YS5pc01hbmV1dmVyID0gc2tpbGxzWzBdLmlzRG9kZ2VcbiAgICAgICAgICAgICAgcm9sbERhdGEuaXNEb2RnZSA9IHNraWxsc1swXS5pc0RvZGdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIGlmICghcXVpY2spIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgKHJvbGxEYXRhLmFjdG9yIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCA/IHJvbGxEYXRhLmFjdG9yLmFjdG9yIDogcm9sbERhdGEuYWN0b3IpLmdldEl0ZW1PckFkZChyb2xsRGF0YS5rZXksICd3ZWFwb24nKVxuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICByb2xsRGF0YS5pdGVtID0gaXRlbXNbMF1cbiAgICAgICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gaXRlbXNbMF0uc2hvcnROYW1lXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmZ1bGxOYW1lID0gaXRlbXNbMF0uc2hvcnROYW1lXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmlzTWFuZXV2ZXIgPSBpdGVtc1swXS5zeXN0ZW0ucHJvcGVydGllcz8ubW52ciA/PyBmYWxzZVxuICAgICAgICAgICAgICByb2xsRGF0YS5pc1dlYXBvbiA9IHRydWVcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW1zWzBdLnN5c3RlbS5za2lsbFtpdGVtc1swXS51c2VzQWx0ZXJuYXRpdmVTa2lsbCA/ICdhbHRlcm5hdGl2JyA6ICdtYWluJ10uaWRcbiAgICAgICAgICAgICAgaWYgKHNraWxsSWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci5hY3RvciA6IHJvbGxEYXRhLmFjdG9yKS5pdGVtcy5maW5kKGQgPT4gZC5pZCA9PT0gc2tpbGxJZClcbiAgICAgICAgICAgICAgICByb2xsRGF0YS50YWdzID0gW3NraWxsLm5hbWVdXG4gICAgICAgICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICAgICAgcm9sbERhdGEucHVzaGFibGUgPSAoc2tpbGwuc3lzdGVtLnByb3BlcnRpZXM/LnB1c2ggPz8gZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIHJldHVybiByb2xsRGF0YVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFRlbXBsYXRlUGF0aCAodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L21lc3NhZ2VzL29wcG9zZWQuaGJzJ1xuICAgICAgY2FzZSAnY29tYmluZWRhbGwnOlxuICAgICAgY2FzZSAnY29tYmluZWRhbnknOlxuICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9tZXNzYWdlcy9jb21iaW5lZC5oYnMnXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlR3JvdXBNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgLy8gVE9ETzogQWRkIGFkZGl0aW9uYWwgcm9sbHNcbiAgICAvLyBUT0RPOiBQaHlzaWNhbCBIdW1hbiBMaW1pdHNcbiAgICBpZiAoIUNvQzdHcm91cE1lc3NhZ2UuZ2V0VGVtcGxhdGVQYXRoKG9wdGlvbnMudHlwZSkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgdHlwZTogJycsXG4gICAgICBkZW55UHVzaDogZmFsc2UsXG4gICAgICBzaG93Q29tcGxldGVkUm9sbHM6IHRydWUsXG4gICAgICBhbGxSb2xsc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICBpc0NvbWJhdDogZmFsc2UsXG4gICAgICBpc0VkaXRhYmxlOiB0cnVlLFxuICAgICAgcm9sbFN0YXR1c2VzOiB7fSxcbiAgICAgIHJvbGxPcmRlcjogW11cbiAgICB9LCBvcHRpb25zKVxuXG4gICAgc3dpdGNoIChjb25maWcudHlwZSkge1xuICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgIGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGRlbnlQdXNoOiB0cnVlLFxuICAgICAgICAgIGlzVGllOiBmYWxzZSxcbiAgICAgICAgICBuZWVkc1RpZUJyZWFrZXI6IGZhbHNlLFxuICAgICAgICAgIGFkdmFudGFnZUF0dGFja2VyOiBmYWxzZSxcbiAgICAgICAgICBhZHZhbnRhZ2VEZWZlbmRlcjogZmFsc2UsXG4gICAgICAgICAgZGVmZW5kZXJJc0RvZGdpbmc6IGZhbHNlLFxuICAgICAgICAgIHdpbm5lclJvbGxzRGFtYWdlOiBmYWxzZVxuICAgICAgICB9LCBjb25maWcpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjb21iaW5lZGFsbCc6XG4gICAgICBjYXNlICdjb21iaW5lZGFueSc6XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGNvbWJpbmVkOiAoY29uZmlnLnR5cGUgPT09ICdjb21iaW5lZGFsbCcgPyAnYWxsJyA6IChjb25maWcudHlwZSA9PT0gJ2NvbWJpbmVkYW55JyA/ICdhbnknIDogJycpKSxcbiAgICAgICAgICBhY3RvclV1aWQ6ICcnLFxuICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICB3YXNQdXNoZWQ6IGZhbHNlXG4gICAgICAgIH0sIGNvbmZpZylcbiAgICAgICAgY29uZmlnLnR5cGUgPSAnY29tYmluZWQnXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbERhdGEgPSB7fVxuICAgIGxldCBjb3VudCA9IDBcbiAgICBmb3IgKGNvbnN0IG9mZnNldCBpbiBvcHRpb25zLnJvbGxSZXF1aXNpdGVzKSB7XG4gICAgICBjb25zdCB3aGljaCA9ICdyJyArIG9mZnNldFxuICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGw6IG9wdGlvbnMucm9sbFJlcXVpc2l0ZXNbb2Zmc2V0XSwgcXVpY2s6IHRydWUsIGRlZmF1bHRVdWlkOiBjb25maWcuYWN0b3JVdWlkID8/ICcnIH0pXG4gICAgICBpZiAoIXJvbGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ2NvbWJpbmVkJykge1xuICAgICAgICBpZiAoY29uZmlnLmFjdG9yVXVpZCA9PT0gJycgfHwgY29uZmlnLmFjdG9yVXVpZCA9PT0gcm9sbC5hY3Rvci51dWlkKSB7XG4gICAgICAgICAgY29uZmlnLmFjdG9yVXVpZCA9IHJvbGwuYWN0b3IudXVpZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JDb21iaW5lZFJvbGxzUmVxdWlyZVNpbmdsZUFjdG9yJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhW3doaWNoXSA9IHJvbGxcbiAgICAgIGNvbmZpZy5yb2xsU3RhdHVzZXNbd2hpY2hdID0ge1xuICAgICAgICByb2xsOiByb2xsLnJvbGwsXG4gICAgICAgIHJvbGxhYmxlOiAoY29uZmlnLnR5cGUgIT09ICdjb21iaW5lZCcpLFxuICAgICAgICByb2xsaW5nOiBmYWxzZSxcbiAgICAgICAgc2hvcnROYW1lOiByb2xsLnNob3J0TmFtZSxcbiAgICAgICAgZnVsbE5hbWU6IHJvbGwuZnVsbE5hbWUsXG4gICAgICAgIHBlcmNlbnQ6IHJvbGwucGVyY2VudCxcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIGlzTWFuZXV2ZXI6IGZhbHNlLFxuICAgICAgICBpc0RvZGdpbmc6IGZhbHNlLFxuICAgICAgICBpc1dlYXBvbjogZmFsc2VcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoY29uZmlnLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnb3Bwb3NlZCc6XG4gICAgICAgICAgY29uZmlnLnJvbGxTdGF0dXNlc1t3aGljaF0gPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGlzQXR0YWNrZXI6IGNvdW50ID09PSAwLCAvLyBDdXJyZW50bHkgb25seSAxdjEgYXR0YWNrZXIgZmlyc3RcbiAgICAgICAgICAgIGlzV2lubmVyOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVGllOiBmYWxzZVxuICAgICAgICAgIH0sIGNvbmZpZy5yb2xsU3RhdHVzZXNbd2hpY2hdKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NvbWJpbmVkJzpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY29uZmlnLnJvbGxPcmRlci5wdXNoKHdoaWNoKVxuICAgICAgY291bnQrK1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdvcHBvc2VkJyAmJiBPYmplY3Qua2V5cyhyb2xsRGF0YSkubGVuZ3RoICE9PSAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdDb0M3LkVycm9yT3Bwb3NlZFJvbGxzTGltaXRlZFRvVHdvQWN0b3JzJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgZGVsZXRlIGNvbmZpZy5yb2xsUmVxdWlzaXRlc1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuIENvQzdHcm91cE1lc3NhZ2UubmV3R3JvdXBNZXNzYWdlKHsgcm9sbERhdGEsIG9wdGlvbnM6IGNvbmZpZyB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBnbUlkID0gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgaWYgKGdtSWQgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIEVycm9yIG1lc3NhZ2Ugc2hvd24gaW4gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7IHR5cGU6ICdncm91cC1tZXNzYWdlLW5ldycsIGxpc3RlbmVyOiBnbUlkLCBvcHRpb25zOiBjb25maWcgfSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHRoaXMuX3RhcmdldEFjdG9yID0gdGhpcy50YXJnZXRUb2tlbi5hY3RvclxuICAgICAgZWxzZSB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgYXN5bmMgc2F5IChtZXNzYWdlLCBmbGF2b3IgPSBudWxsKSB7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3IsXG4gICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvciddXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBjaGVja3MgPSBbJ3NhbkNoZWNrJywgJ2ludENoZWNrJ11cbiAgaWYgKGNoZWNrcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG5leHBvcnQgY2xhc3MgU2FuQ2hlY2tDYXJkIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIHNhbkRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoXG4gICAgICBhY3RvcktleSxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmZhc3RGb3J3YXJkICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IEJvb2xlYW4ob3B0aW9ucy5mYXN0Rm9yd2FyZClcbiAgICAgICAgOiBmYWxzZVxuICAgIClcbiAgICBzYW5EYXRhLnNhblJlYXNvbiA9IHNhbkRhdGEuc2FuUmVhc29uID8/ICcnXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBpZiAoc2FuRGF0YS5tb2RpZmllciAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChzYW5EYXRhLmRpZmZpY3VsdHkgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5pc0JsaW5kICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyBCb29sZWFuKHRoaXMub3B0aW9ucy5pc0JsaW5kKVxuICAgICAgOiBzdXBlci5pc0JsaW5kXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMubW9kaWZpZXJcbiAgICAgIDogMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NTb3VyY2UgKCkge1xuICAgIGlmICghdGhpcy5zYW5EYXRhLnRva2VuS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLnNhbkRhdGEudG9rZW5LZXkpXG4gIH1cblxuICBnZXQgaW52b2x1bnRhcnlBY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXG4gICAgICAodGhpcy5zYW5DaGVjay5pc0ZhaWx1cmUgfHwgdGhpcy5zYW5DaGVjay5pc0Z1bWJsZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHNhbkxvc3NGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWF4ICYmIHRoaXMuc2FuQ2hlY2suZmFpbGVkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxuICAgICAgfVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzYW5Mb3N0VG9SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3RUb1JlYXNvbih0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IG1heFBvc3NpYmxlU2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICApXG4gIH1cblxuICBnZXQgbWF4U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuRGF0YS5zYW5NYXgudG9TdHJpbmcoKSkuZXZhbHVhdGUoe1xuICAgICAgbWF4aW1pemU6IHRydWVcbiAgICB9KS50b3RhbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3Iuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pXG4gIH1cblxuICBnZXQgZmlyc3RFbmNvdW50ZXIgKCkge1xuICAgIHJldHVybiAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gIH1cblxuICBnZXQgaXNBY3Rvckxvb3NpbmdTYW4gKCkge1xuICAgIC8vIE5vIHNhbiBsb3NzIGR1cmluZyBib3V0IG9mIG1hZC5cbiAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gVGhlIHNhbiBsb3NzIGlzIGEgMFxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcblxuICAgIGlmIChcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24gJiZcbiAgICAgIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApID09PSAwXG4gICAgKSB7XG4gICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJvdXREdXJhdGlvblRleHQgKCkge1xuICAgIGlmICh0aGlzLmJvdXREdXJhdGlvbikge1xuICAgICAgaWYgKHRoaXMuYm91dFJlYWxUaW1lKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMubXl0aG9zR2Fpbikge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMubXl0aG9zR2FpblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGFkdmFuY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZV0gPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVNhbkxvc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzUmVhbFRpbWUnOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NTdW1tYXJ5Jzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSlcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnNhbkxvc3MgPSAwXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgICAgdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGlmICh0aGlzLnNhbkxvc3MgPCB0aGlzLnNhbkxvc3NGb3JtdWxhKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1pbmltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIClcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zYW5Mb3NzID0gbWF4XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuXG4gICAgYXdhaXQgdGhpcy5zYW5Mb3NzUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcblxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuc2FuTG9zc1JvbGwpXG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiBtYXgpIHtcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIG1heClcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgdGhpcy5zYW5Mb3NzKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA+IDApIHRoaXMuc3RhdGUuYWN0b3JMb3N0U2FuID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA8IDUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci5kYWlseVNhbkxvc3MgPj0gdGhpcy5hY3Rvci5kYWlseVNhbkxpbWl0KSB7XG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEludCAoKSB7XG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuaW50Q2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5pbnRDaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdpbnQnXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5pbnREaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuaW50Q2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmludE1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pbnRDaGVjay5wYXNzZWQgfHwgdGhpcy5zdGF0ZS5hbHJlYWR5SW5zYW5lKSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmlnZ2VySW5zYW5pdHkgKCkge1xuICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gIH1cblxuICBhc3luYyBjbGVhclNhbkxvc3NSZWFzb24gKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0UmVhc29uU2FuTG9zcyh0aGlzLnNhbkRhdGEuc2FuUmVhc29uLCAwKVxuICAgIGlmICghdGhpcy5zYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgLy8gQXR0YWNoZSB0aGUgc2FuQ2hlY2sgcmVzdWx0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgdGhpcy5fX2lubGluZVNhbkNoZWNrID0gdGhpcy5zYW5DaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbCkge1xuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5zYW5Mb3NzUm9sbClcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcbiAgICAgIHRoaXMuX19pbmxpbmVJbnRDaGVjayA9IHRoaXMuaW50Q2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeSh0aGlzLCByZXBsYWNlcikpXG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKHNhbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMpIHtcbiAgICAgICAgaWYgKHQuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci50b2tlbktleSwgc2FuRGF0YSwge1xuICAgICAgICAgICAgZmFzdEZvcndhcmRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vVGFyZ2V0c1NhbkNoZWNrJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoLi4uYXJncykge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxuICAgIGlmIChjaGF0Q2FyZC5hY3Rvci5oYXNJbmRlZkluc2FuZSkge1xuICAgICAgY2hhdENhcmQuc3RhdGUuYWxyZWFkeUluc2FuZSA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoY2hhdENhcmQuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxuICAgIGF3YWl0IGNoYXRDYXJkLnNheShodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBodG1sQ2FyZCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuXG4gICAgcmV0dXJuIFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sQ2FyZClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuXG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCgpXG4gICAgT2JqZWN0LmFzc2lnbihzYW5DaGVja0NhcmQsIHNhbkNoZWNrQ2FyZERhdGEpXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XG4gICAgICBzYW5DaGVja0NhcmQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5DaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuaW50Q2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbCA9IFJvbGwuZnJvbURhdGEoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3R3JvdXBNZXNzYWdlIH0gZnJvbSAnLi9jb2M3LWdyb3VwLW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBBbGxvdyBmb3IgcGFyc2luZyBvZiBDb0M3IGVsZW1lbnRzIGluIGNoYXQgbWVzc2FnZSBhbmQgc2hlZXRzLlxuICogRm9ybWF0IGlzIDpcbiAqIEBjb2M3LlRZUEVfT0ZfUkVRVUVTVFtPUFRJT05TXXtESVNQTEFZRURfTkFNRX1cbiAqIFRZUEVfT0ZfUkVRVUVTVCA6XG4gKiAtIHNhbmxvc3M6IHRyaWdnZXIgYSBzYW4gY2hlY2ssIHVwb24gZmFpbHVyZSB3aWxsIHByb3Bvc2UgdG8gZGVkdWN0IHRoZSBjb3JyZXNwb25kaW5nIFNBTi5cbiAqIC0gY2hlY2s6IHRyaWdnZXIgYSBjaGVjayBkZXBlbmRpbmcgb24gdGhlIG9wdGlvbnMuXG4gKiAtIGl0ZW06IFRyaWdnZXIgYSB3ZWFwb24gY2hlY2tcbiAqIC0gZWZmZWN0OiBBZGQgYW4gZWZmZWN0XG4gKlxuICogT1BUSU9OUzogW10gPSBvcHRpb25hbFxuICogc2FubG9zczpcbiAqICAgc2FuTWF4OiBtYXggU0FOIGxvc3NcbiAqICAgc2FuTWluOiBtaW4gU0FOIGxvc3NcbiAqICAgc2FuUmVhc29uOiBSZWFzb25cbiAqIGNoZWNrOlxuICogICB0eXBlOiB0eXBlIG9mIGNoZWNrIChjaGFyYWN0ZXJpc3RpYywgc2tpbGwsIGF0dHJpYikuXG4gKiAgIG5hbWU6IG5hbWUgb2YgdGhlIHNraWxsL2NoYXJhY3RlcmlzdGljLlxuICogICBbZGlmZmljdWx0eV06ID8gKGJsaW5kKSwgMCAocmVndWxhciksICsgKGhhcmQpLCArKyAoZXh0cmVtZSksICsrKyAoY3JpdGljYWwpLlxuICogICBbbW9kaWZpZXJdOiAteCAoeCBwZW5hbHR5IGRpY2UpLCAreCAoeCBib251cyBkaWNlKSwgMCAobm8gbW9kaWZpZXIpLlxuICogICBbaWNvbl06IGljb24gdG8gdXNlIChmb250IGF3c29tZSkuXG4gKiAgIFtibGluZF06IHdpbGwgdHJpZ2dlciBhIGJsaW5kIHJvbGwuXG4gKiAgIFtwdXNoaW5nXTogd2lsbCB0cmlnZ2VyIGEgcHVzaGVkIHJvbGxcbiAqXG4gKiBbRElTUExBWUVEX05BTUU6IG5hbWUgdG8gZGlzcGxheS5dXG4gKlxuICogVG8gYWRkL2VkaXQgYSBuZXcgbGluayB1cGRhdGUgdGhlc2Ugc2VjdGlvbnNcbiAqICAgZnJvbURyb3BEYXRhID0+IEFkZCBhbGwgZGVmYXVsdHMgaGVyZVxuICogICBfY3JlYXRlTGluayA9PiBDcmVhdGUgSFRNTCBmcm9tIGRvY3VtZW50IGRhdGFcbiAqICAgX2NyZWF0ZURvY3VtZW50TGluayA9PiBDcmVhdGUgQGxpbmsgZnJvbSBkb2N1bWVudCBkYXRhXG4gKiAgIF9vbkxpbmtBY3RvckNsaWNrID0+IFByb2Nlc3MgbGlua1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0xpbmsge1xuICBzdGF0aWMgZ2V0IENIRUNLX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEVDSzogJ2NoZWNrJyxcbiAgICAgIFNBTkxPU1M6ICdzYW5sb3NzJyxcbiAgICAgIElURU06ICdpdGVtJyxcbiAgICAgIEVGRkVDVDogJ2VmZmVjdCdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IExJTktfVFlQRSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIENIQVJBQ1RFUklTVElDOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgQVRUUklCVVRFOiAnYXR0cmlidXRlJyxcbiAgICAgIFNLSUxMOiAnc2tpbGwnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGluaXQgKCkge1xuICAgIENPTkZJRy5Db0M3TGluayA9IHtcbiAgICAgIGRvY3VtZW50Q2xhc3M6IENvQzdMaW5rXG4gICAgfVxuICAgIGNvbnN0IGJvZHkgPSAkKCdib2R5JylcbiAgICBib2R5Lm9uKCdjbGljaycsICdhLmNvYzctbGluaycsIENvQzdMaW5rLl9vbkxpbmtDbGljaylcbiAgICBib2R5Lm9uKCdkcmFnc3RhcnQnLCAnYS5jb2M3LWxpbmsnLCBldmVudCA9PiBDb0M3TGluay5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuXG4gICAgQ09ORklHLlRleHRFZGl0b3IuZW5yaWNoZXJzLnB1c2goe1xuICAgICAgcGF0dGVybjogbmV3IFJlZ0V4cCgnQChjb2M3KVxcXFwuJyArICcoY2hlY2t8ZWZmZWN0fGl0ZW18c2FubG9zcyknICsgJ1xcXFxbKFteXFxcXFtcXFxcXV0qKD86XFxcXFtbXlxcXFxbXFxcXF1dKig/OlxcXFxbW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSopXFxcXF0nICsgJyg/OnsoW159XSspfSk/JywgJ2dpJyksXG4gICAgICBlbnJpY2hlcjogQ29DN0xpbmsuX2NyZWF0ZUxpbmtcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIF9saW5rRnJvbUV2ZW50IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgaSA9IGEucXVlcnlTZWxlY3RvcignW2RhdGEtbGluay1pY29uXScpXG4gICAgY29uc3QgZGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGEuZGF0YXNldClcblxuICAgIGNvbnN0IG9sZFR5cGUgPSBkYXRhLnR5cGVcblxuICAgIGRhdGEudHlwZSA9ICdDb0M3TGluaydcbiAgICBkYXRhLmljb24gPSBudWxsXG5cbiAgICBpZiAob2xkVHlwZSkge1xuICAgICAgZGF0YS5saW5rVHlwZSA9IG9sZFR5cGVcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLm9iamVjdCAmJlxuICAgICAgKHR5cGVvZiBkYXRhLm9iamVjdCA9PT0gJ3N0cmluZycgfHwgZGF0YS5vYmplY3QgaW5zdGFuY2VvZiBTdHJpbmcpXG4gICAgKSB7XG4gICAgICBkYXRhLm9iamVjdCA9IEpTT04ucGFyc2UoZGF0YS5vYmplY3QpXG4gICAgICAvLyBkYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkVGRkVDVFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGkuZGF0YXNldCAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gIT09ICdmYXMgZmEtZGljZSdcbiAgICApIHtcbiAgICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIH1cbiAgICBkYXRhLmRpc3BsYXlOYW1lID0gYS5kYXRhc2V0LmRpc3BsYXlOYW1lID8gYS5pbm5lclRleHQgOiBudWxsXG4gICAgaWYgKGRhdGEuZGlmZmljdWx0eSkge1xuICAgICAgZGF0YS5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkYXRhLmRpZmZpY3VsdHkpXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgX29uRHJhZ0NvQzdMaW5rIChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0M3TGluay5fbGlua0Zyb21FdmVudChldmVudClcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIG9idGFpbmluZyB0aGUgcmVsZXZhbnQgRG9jdW1lbnQgZnJvbSBkcm9wcGVkIGRhdGEgcHJvdmlkZWQgdmlhIGEgRGF0YVRyYW5zZmVyIGV2ZW50LlxuICAgKiBUaGUgZHJvcHBlZCBkYXRhIGNvdWxkIGhhdmU6XG4gICAqIDEuIEEgZGF0YSBvYmplY3QgZXhwbGljaXRseSBwcm92aWRlZFxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpblxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgVGhlIGRhdGEgb2JqZWN0IGV4dHJhY3RlZCBmcm9tIGEgRGF0YVRyYW5zZmVyIGV2ZW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2hpY2ggYWZmZWN0IGRyb3AgZGF0YSBiZWhhdmlvclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59ICAgVGhlIHJlc29sdmVkIERvY3VtZW50XG4gICAqIEB0aHJvd3MgSWYgYSBEb2N1bWVudCBjb3VsZCBub3QgYmUgcmV0cmlldmVkIGZyb20gdGhlIHByb3ZpZGVkIGRhdGEuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbURyb3BEYXRhIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjbHMgPSBuZXcgQ29DN0xpbmsoKVxuICAgIGNscy5vYmplY3QgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHtcbiAgICAgIHR5cGU6ICdDb0M3TGluaycsXG4gICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSyxcbiAgICAgIGxpbmtUeXBlOiBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwsXG4gICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIsXG4gICAgICBtb2RpZmllcjogMCxcbiAgICAgIG9iamVjdDoge1xuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVmZmVjdE5ldycpLFxuICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgICAgY2hhbmdlczogW11cbiAgICAgIH1cbiAgICB9LCBkYXRhKVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnbmFtZScsICdkaXNwbGF5TmFtZScsICdpY29uJywgJ2lkJywgJ3BhY2snLCAnc2FuTWluJywgJ3Nhbk1heCcsICdzYW5SZWFzb24nXSkge1xuICAgICAgY2xzLm9iamVjdFtrZXldID0gY2xzLm9iamVjdFtrZXldID8/ICcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2xzLm9iamVjdC5vYmplY3QuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNscy5vYmplY3Qub2JqZWN0LmV4dGVybmFsICE9PSAndW5kZWZpbmVkJyAmJiBbJ2h0dHAnLCAnaHR0cHMnXS5pbmNsdWRlcyhjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCkpIHtcbiAgICAgIGNscy5vYmplY3Qub2JqZWN0Lmljb24gPSBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCArICc6Ly8nICsgY2xzLm9iamVjdC5vYmplY3QuaWNvblxuICAgIH1cbiAgICBjbHMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICByZXR1cm4gY2xzXG4gIH1cblxuICBzdGF0aWMgX2NyZWF0ZUxpbmsgKG1hdGNoKSB7XG4gICAgY29uc3QgbmFtZSA9IG1hdGNoWzRdID8/IHVuZGVmaW5lZFxuICAgIGNvbnN0IG9wdGlvbnMgPSBtYXRjaFszXSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCB0eXBlID0gbWF0Y2hbMl0gPz8gdW5kZWZpbmVkXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluayddLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogdHlwZSB9LFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGJsaW5kOiBmYWxzZSxcbiAgICAgIG5hbWVcbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgIGRhdGEuZWZmZWN0ID0gSlNPTi5wYXJzZShvcHRpb25zKVxuICAgICAgZGF0YS5kYXRhc2V0Lm9iamVjdCA9IG9wdGlvbnNcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5lZmZlY3QuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuZWZmZWN0LmV4dGVybmFsICE9PSAndW5kZWZpbmVkJyAmJiBbJ2h0dHAnLCAnaHR0cHMnXS5pbmNsdWRlcyhkYXRhLmVmZmVjdC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5lZmZlY3QuaWNvbiA9IGRhdGEuZWZmZWN0LmV4dGVybmFsICsgJzovLycgKyBkYXRhLmVmZmVjdC5pY29uXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25zLm1hdGNoQWxsKC9bXixdKy9naSlcbiAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgQXJyYXkuZnJvbShtYXRjaGVzKSkge1xuICAgICAgICBsZXQgW2tleSwgdmFsdWVdID0gbWF0Y2hbMF0uc3BsaXQoJzonKVxuICAgICAgICBpZiAoa2V5ID09PSAnaWNvbicpIHtcbiAgICAgICAgICBkYXRhLmljb24gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2JsaW5kJykge1xuICAgICAgICAgICAgdmFsdWUgPSB0cnVlXG4gICAgICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncHVzaGluZycpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICAgICAgZGF0YS5wdXNoaW5nID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnY29tYmF0Jykge1xuICAgICAgICAgICAgdmFsdWUgPSB0cnVlXG4gICAgICAgICAgICBkYXRhLmNvbWJhdCA9IHRydWUgJiYgW0NvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tdLmluY2x1ZGVzKHR5cGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5kYXRhc2V0W2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkYXRhLmRhdGFzZXQuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuZGF0YXNldC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5kYXRhc2V0LmV4dGVybmFsKSkge1xuICAgICAgICBkYXRhLmRhdGFzZXQuaWNvbiA9IGRhdGEuZGF0YXNldC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5kYXRhc2V0Lmljb25cbiAgICAgICAgZGF0YS5pY29uID0gZGF0YS5kYXRhc2V0Lmljb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGl0bGVcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcoZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOiB7XG4gICAgICAgIGxldCBodW1hbk5hbWUgPSBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICBpZiAoWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ2xjaycpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YXNldC5uYW1lID09PSAnc2FuJykge1xuICAgICAgICAgICAgaHVtYW5OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2NoYXJhYycsICdjaGFyJywgJ2NoYXJhY3RlcmlzdGljJywgJ2NoYXJhY3RlcmlzdGljcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIGh1bWFuTmFtZSA9IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhkYXRhLmRhdGFzZXQubmFtZSk/LmxhYmVsXG4gICAgICAgIH1cbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfSR7ZGF0YS5wdXNoaW5nID8gJ1B1c2hpbmcnIDogJyd9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGh1bWFuTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUzpcbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtTYW5Mb3NzJHshZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30keyFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIHNhbk1pbjogZGF0YS5kYXRhc2V0LnNhbk1pbixcbiAgICAgICAgICAgIHNhbk1heDogZGF0YS5kYXRhc2V0LnNhbk1heFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtJdGVtJHshZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30keyFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEuZGF0YXNldC5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6XG4gICAgICAgIHRpdGxlID0gZGF0YS5lZmZlY3QubGFiZWxcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIGRhdGEubmFtZSA9IHRpdGxlXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEuZGF0YXNldC5kaXNwbGF5TmFtZSA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS50aXRsZSA9IGdhbWUudXNlci5pc0dNID8gZGF0YS5uYW1lIDogdGl0bGVcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhc2V0KSkge1xuICAgICAgYS5kYXRhc2V0W2tdID0gdlxuICAgIH1cbiAgICBhLmRyYWdnYWJsZSA9IHRydWVcbiAgICBkYXRhLmljb24gPSBkYXRhLmljb24gPz8gZGF0YS5lZmZlY3Q/Lmljb24gPz8gJ2ZhcyBmYS1kaWNlJ1xuICAgIC8vIGNoZWNrIGlmIGl0J3MgYW4gaW1hZ2Ugb3IgYW4gaWNvblxuICAgIGlmIChkYXRhLmljb24uaW5jbHVkZXMoJ1xcXFwnKSB8fCBkYXRhLmljb24uaW5jbHVkZXMoJy4nKSkge1xuICAgICAgZGF0YS5pbWcgPSBkYXRhLmljb25cbiAgICB9XG4gICAgaWYgKGRhdGEuYmxpbmQpIHtcbiAgICAgIGEuaW5uZXJIVE1MICs9ICc8aSBjbGFzcz1cImZhcyBmYS1leWUtc2xhc2hcIj48L2k+J1xuICAgIH1cbiAgICBpZiAoZGF0YS5pbWcpIHtcbiAgICAgIGEuaW5uZXJIVE1MICs9IGA8aW1nIGRhdGEtbGluay1pY29uPVwiJHtkYXRhLmljb259XCIgc3JjPVwiJHtkYXRhLmltZ31cIj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIGEuaW5uZXJIVE1MICs9IGA8aSBkYXRhLWxpbmstaWNvbj1cIiR7ZGF0YS5pY29ufVwiIGNsYXNzPVwibGluay1pY29uICR7ZGF0YS5pY29ufVwiPjwvaT5gXG4gICAgfVxuICAgIGEuaW5uZXJIVE1MICs9IGA8c3Bhbj4ke2RhdGEubmFtZX08L3NwYW4+YFxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb250ZW50IGxpbmsgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudERhdGEgICAgICAgICAgICAgICAgICAgICBUaGUgcGFyc2VkIG9iamVjdCBvZiBkYXRhIHByb3ZpZGVkIGJ5IHRoZSBkcm9wIHRyYW5zZmVyIGV2ZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdICAgICAgICAgICAgICAgICAgICAgQWRkaXRpb25hbCBvcHRpb25zIHRvIGNvbmZpZ3VyZSBsaW5rIGdlbmVyYXRpb24uXG4gICAqIEBwYXJhbSB7Q2xpZW50RG9jdW1lbnR9IFtvcHRpb25zLnJlbGF0aXZlVG9dICBBIGRvY3VtZW50IHRvIGdlbmVyYXRlIGEgbGluayByZWxhdGl2ZSB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsXSAgICAgICAgICAgICAgIEEgY3VzdG9tIGxhYmVsIHRvIHVzZSBpbnN0ZWFkIG9mIHRoZSBkb2N1bWVudCdzIG5hbWUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2NyZWF0ZURvY3VtZW50TGluayAoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0gPSB7fSkge1xuICAgIGlmICghZXZlbnREYXRhLmNoZWNrKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgc3dpdGNoIChldmVudERhdGEuY2hlY2sudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOiB7XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6Y2hhcmFjLG5hbWU6U1RSLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTVFIgY2hlY2soLTEpfVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOmNoYXJhY3RlcmlzdGljLG5hbWU6c3RyLGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117U3RyZW5ndGh9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6YXR0cmlidXRlLG5hbWU6bGNrLGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117THVja31cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTpza2lsbCxuYW1lOkxhdyxkaWZmaWN1bHR5OjEsbW9kaWZpZXI6MCxpY29uOmZhIGZhLWxpbmtde0xhd31cbiAgICAgICAgaWYgKCFldmVudERhdGEubGlua1R5cGUgfHwgKCFldmVudERhdGEubmFtZSAmJiAhZXZlbnREYXRhLnJvbGxzKSkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZXZlbnREYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ30ke2V2ZW50RGF0YS5wdXNoaW5nID8gJ3B1c2hpbmcsJyA6ICcnfXR5cGU6JHtldmVudERhdGEubGlua1R5cGV9YFxuICAgICAgICBpZiAoZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgfSBlbHNlIGlmIChldmVudERhdGEucm9sbHMpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscm9sbHM6JHtldmVudERhdGEucm9sbHN9YFxuICAgICAgICAgIGlmIChldmVudERhdGEuY29tYmF0KSB7XG4gICAgICAgICAgICBvcHRpb25zICs9ICcsY29tYmF0J1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGV2ZW50RGF0YS5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtldmVudERhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnICYmIGV2ZW50RGF0YS5tb2RpZmllciAhPT0gMCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke2V2ZW50RGF0YS5tb2RpZmllcn1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZXZlbnREYXRhLmRpc3BsYXlOYW1lID8/IChsYWJlbCA/PyAnJylcbiAgICAgICAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7ZGlzcGxheU5hbWV9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUzoge1xuICAgICAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsZGlmZmljdWx0eTorKyxtb2RpZmllcjotMV17SGFyZCBTYW4gTG9zcyAoLTEpIDEvMUQ2fVxuICAgICAgICBpZiAoIWV2ZW50RGF0YS5zYW5NYXggfHwgIWV2ZW50RGF0YS5zYW5NaW4pIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9c2FuTWF4OiR7ZXZlbnREYXRhLnNhbk1heH0sc2FuTWluOiR7ZXZlbnREYXRhLnNhbk1pbn1gXG4gICAgICAgIGlmIChldmVudERhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHNhblJlYXNvbjoke2V2ZW50RGF0YS5zYW5SZWFzb259YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuZGlmZmljdWx0eSAmJiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtldmVudERhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5tb2RpZmllciAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LnNhbmxvc3NbJHtvcHRpb25zfV1gXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZXZlbnREYXRhLmRpc3BsYXlOYW1lID8/IChsYWJlbCA/PyAnJylcbiAgICAgICAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7ZGlzcGxheU5hbWV9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTToge1xuICAgICAgICAvLyBAY29jNy5pdGVtW3R5cGU6b3B0aW9uYWwsbmFtZTpTaG90Z3VuLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTaGl0Z3VuIGNoZWNrKC0xKX1cbiAgICAgICAgaWYgKCFldmVudERhdGEubmFtZSkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZXZlbnREYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ31uYW1lOiR7ZXZlbnREYXRhLm5hbWV9YFxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLnBhY2spIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscGFjazoke2V2ZW50RGF0YS5wYWNrfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmlkKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGlkOiR7ZXZlbnREYXRhLmlkfWBcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDoge1xuICAgICAgICAvLyBAY29jNy5lZmZlY3Rbe1wibGFiZWxcIjpcIkthcG93XCIsXCJpY29uXCI6XCJpY29ucy9zdmcvYXVyYS5zdmdcIixcImNoYW5nZXNcIjpbe1wia2V5XCI6XCJzeXN0ZW0udW5rbm93bi50ZXN0XCIsXCJtb2RlXCI6MixcInZhbHVlXCI6XCI1XCJ9XSxcInRpbnRcIjpcIiNlOTE2MTZcIixcImR1cmF0aW9uXCI6e1wic2Vjb25kc1wiOm51bGwsXCJyb3VuZHNcIjo2LFwidHVybnNcIjpudWxsfX1de0thcG93aW5nfVxuICAgICAgICAvLyBjb25zdCBlZmZlY3REYXRhID0gZm91bmRyeS51dGlscy5kZWVwQ2xvbmUoZXZlbnREYXRhKVxuICAgICAgICAvLyBpZiAoIXRoaXMuZWZmZWN0SXNUZW1wKSBkZWxldGUgZWZmZWN0RGF0YS5kdXJhdGlvblxuICAgICAgICAvLyBpZiAoZWZmZWN0RGF0YS5jaGFuZ2VzPy5sZW5ndGggPT09IDApIGRlbGV0ZSBlZmZlY3REYXRhLmNoYW5nZXNcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLmRpc2FibGVkKSBkZWxldGUgZWZmZWN0RGF0YS5kaXNhYmxlZFxuICAgICAgICAvLyBpZiAoIWVmZmVjdERhdGEudGludCkgZGVsZXRlIGVmZmVjdERhdGEudGludFxuICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5vYmplY3QuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgZXZlbnREYXRhLm9iamVjdC5leHRlcm5hbCA9IHBhcnRzWzFdXG4gICAgICAgICAgZXZlbnREYXRhLm9iamVjdC5pY29uID0gcGFydHNbMl1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5lZmZlY3RbJHtKU09OLnN0cmluZ2lmeShldmVudERhdGEub2JqZWN0KX1dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICc/J1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtBY3RvckNsaWNrIChhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOlxuICAgICAgICBpZiAoWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLmNoYXJhY3RlcmlzdGljQ2hlY2soXG4gICAgICAgICAgICBvcHRpb25zLm5hbWUsXG4gICAgICAgICAgICBzaGlmdEtleSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnc2tpbGwnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLnNraWxsQ2hlY2sob3B0aW9ucywgc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLmF0dHJpYnV0ZUNoZWNrKG9wdGlvbnMubmFtZSwgc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnY29tYmluZWRhbGwnLCAnY29tYmluZWRhbnknLCAnb3Bwb3NlZCddLmluY2x1ZGVzKG9wdGlvbnMubGlua1R5cGUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICByZXR1cm4gQ29DN0dyb3VwTWVzc2FnZS5jcmVhdGVHcm91cE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogb3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcm9sbFJlcXVpc2l0ZXM6IG9wdGlvbnMucm9sbHMuc3BsaXQoJyYmJyksXG4gICAgICAgICAgICBpc0NvbWJhdDogQm9vbGVhbihvcHRpb25zLmNvbWJhdCA/PyBmYWxzZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKGFjdG9yLmFjdG9yS2V5LCBvcHRpb25zLCB7XG4gICAgICAgICAgZmFzdEZvcndhcmQ6IHNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5KVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW3tcbiAgICAgICAgICBsYWJlbDogb3B0aW9ucy5vYmplY3QubGFiZWwsXG4gICAgICAgICAgaWNvbjogb3B0aW9ucy5vYmplY3QuaWNvbixcbiAgICAgICAgICBjaGFuZ2VzOiBvcHRpb25zLm9iamVjdC5jaGFuZ2VzXG4gICAgICAgIH1dKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0NoYXRNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgc3BlYWtlcjoge1xuICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG1lc3NhZ2VcbiAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKG9wdGlvbnMpXG4gICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBtZXNzYWdlID0gYDxkaXYgY2xhc3M9XCJlZmZlY3QtbWVzc2FnZVwiPiR7bGlua308L2Rpdj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICB9KVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICB9XG5cbiAgc3RhdGljIHRvV2hpc3Blck1lc3NhZ2UgKG9wdGlvbnMsIGFjdG9ycykge1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgd2hpc3BlcjogYWN0b3Iub3duZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICB9XG4gICAgICBsZXQgbWVzc2FnZVxuICAgICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhvcHRpb25zKVxuICAgICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHtsaW5rfTwvZGl2PmBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGEgY2hlY2sgd2hlbiBhIGxpbmsgaXMgY2xpY2tlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgY29uc3QgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayhhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXkgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKG9wdGlvbnMpXG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgbGV0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IGEub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKVxuICAgICAgICBpZiAoYWN0b3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGFjdG9yID0gYWN0b3JzWzBdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGEgPT4gKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gYS5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpXG4gICAgICAgICAgaWYgKGFjdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGFjdG9yID0gYWN0b3JzWzBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2soYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5IH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0NvbnRyb2xsZWRBY3RvcicpKVxuICB9XG5cbiAgc2V0VmFsdWUgKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLm9iamVjdFtrZXldID0gdmFsdWVcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRG9jdW1lbnRMaW5rKHRoaXMub2JqZWN0KVxuICB9XG5cbiAgZ2V0IGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuaWRcbiAgfVxuXG4gIGdldCBwYWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QucGFja1xuICB9XG5cbiAgZ2V0IGNoZWNrVHlwZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmNoZWNrXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuaWNvblxuICB9XG5cbiAgZ2V0IGRpc3BsYXlOYW1lICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuZGlzcGxheU5hbWVcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm1vZGlmaWVyXG4gIH1cblxuICBnZXQgbGlua1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5saW5rVHlwZVxuICB9XG5cbiAgZ2V0IHNhbk1pbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhbk1pblxuICB9XG5cbiAgZ2V0IHNhbk1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhbk1heFxuICB9XG5cbiAgZ2V0IHNhblJlYXNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhblJlYXNvblxuICB9XG5cbiAgZ2V0IGVmZmVjdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm9iamVjdFxuICB9XG5cbiAgZ2V0IGNoZWNrTmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaXNDaGFyYWN0ZXJpc3RpY0NoZWNrKSB7XG4gICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVxuICAgICAgcmV0dXJuIGNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IHRoaXMub2JqZWN0Lm5hbWUgfHwgYy5zaG9ydE5hbWUgPT09IHRoaXMub2JqZWN0Lm5hbWUgfHwgYy5sYWJlbCA9PT0gdGhpcy5vYmplY3QubmFtZSk/LmtleSA/PyAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vYmplY3QubmFtZVxuICB9XG5cbiAgZ2V0IGlzQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICB9XG5cbiAgZ2V0IGlzQ2hhcmFjdGVyaXN0aWNDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDXG4gIH1cblxuICBnZXQgaXNBdHRyaWJ1dGVDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURVxuICB9XG5cbiAgZ2V0IGlzU2tpbGxDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMXG4gIH1cblxuICBnZXQgaXNJdGVtQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNXG4gIH1cblxuICBnZXQgaXNTYW5Mb3NzQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTXG4gIH1cblxuICBnZXQgaXNFZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1RcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NoZWNrICYmIHRoaXMub2JqZWN0LmJsaW5kXG4gIH1cblxuICBnZXQgaXNQdXNoaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NoZWNrICYmIHRoaXMub2JqZWN0LnB1c2hpbmdcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09OU1QsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb250ZW50TGlua0RpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2xpbmstY3JlYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdGl2ZS1lZmZlY3Qtc2hlZXQnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogbnVsbCwgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcicgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9saW5rLWNyZWF0aW9uLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNTYwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy50YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuZWZmZWN0LW9wdGlvbnMnLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXRhaWxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gUHJlcGFyZSBjaGVjayB0eXBlXG4gICAgc2hlZXREYXRhLmNoZWNrVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUNoZWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkl0ZW1XZWFwb24nKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnRUZGRUNULlRhYkVmZmVjdHMnKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyBsaW5rIHR5cGVcbiAgICBzaGVldERhdGEubGlua1R5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyAnYXR0cmlidXRlJyB0eXBlc1xuICAgIHNoZWV0RGF0YS5hdHRyaWJ1dGVUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6ICdsY2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnc2FuJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgZWZmZWN0IG1vZGUgdHlwZXNcbiAgICBzaGVldERhdGEuZWZmZWN0TW9kZXMgPSBPYmplY3QuZW50cmllcyhDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTKS5yZWR1Y2UoXG4gICAgICAob2JqLCBlKSA9PiB7XG4gICAgICAgIG9ialtlWzFdXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnRUZGRUNULk1PREVfJyArIGVbMF0pXG4gICAgICAgIHJldHVybiBvYmpcbiAgICAgIH0sXG4gICAgICB7fVxuICAgIClcblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyAnY2hhcmFjdGVyaXN0aWMnIHR5cGVzXG4gICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljVHlwZSA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpXG5cbiAgICBzaGVldERhdGEubGluayA9IHNoZWV0RGF0YS5vYmplY3QubGlua1xuXG4gICAgc2hlZXREYXRhLmZyb21HYW1lID0gc2hlZXREYXRhLmxpbmsuaXNJdGVtQ2hlY2sgfHwgc2hlZXREYXRhLmxpbmsuaXNTa2lsbENoZWNrXG5cbiAgICBzaGVldERhdGEuZnJvbURpcmVjdG9yeSA9IChzaGVldERhdGEub2JqZWN0Lmhhc0lEID09PSAnZnJvbURpcmVjdG9yeScpXG4gICAgc2hlZXREYXRhLmZyb21Db21wZW5kaXVtID0gKHNoZWV0RGF0YS5vYmplY3QuaGFzSUQgPT09ICdmcm9tQ29tcGVuZGl1bScpXG5cbiAgICBzaGVldERhdGEuaXNTZXRGcm9tR2FtZSA9IChzaGVldERhdGEubGluay5pZCAmJiAoc2hlZXREYXRhLmZyb21EaXJlY3RvcnkgfHwgc2hlZXREYXRhLmZyb21Db21wZW5kaXVtKSlcblxuICAgIHNoZWV0RGF0YS5kaWZmaWN1bHR5TGV2ZWwgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsXG5cbiAgICBzaGVldERhdGEuYWN0b3JOYW1lcyA9IHNoZWV0RGF0YS5vYmplY3QuYWN0b3JzLm1hcChhID0+IGEubmFtZSkuam9pbignLCAnKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ3NlbGVjdFtuYW1lPXR5cGVdLHNlbGVjdFtuYW1lPWNoZWNrXSxzZWxlY3RbbmFtZT1hdHRyaWJ1dGVLZXldLHNlbGVjdFtuYW1lPWNoYXJhY3RlcmlzdGljS2V5XSxpbnB1dFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG5cbiAgICAvLyBIYW5kbGluZyBlZmZlY3RzXG4gICAgaHRtbC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkVmZmVjdENvbnRyb2wuYmluZCh0aGlzKSlcbiAgfVxuXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnZnJvbUNvbXBlbmRpdW0nOlxuICAgICAgY2FzZSAnZnJvbURpcmVjdG9yeSc6XG4gICAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gdGhpcy5vYmplY3QuaGFzSUQgPyAnJyA6IGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBfb25FZmZlY3RDb250cm9sIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgc3dpdGNoIChidXR0b24uZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRFZmZlY3RDaGFuZ2UoKVxuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgYnV0dG9uLmNsb3Nlc3QoJy5lZmZlY3QtY2hhbmdlJykucmVtb3ZlKClcbiAgICAgICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2FkZEVmZmVjdENoYW5nZSAoKSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5vYmplY3QubGluay5lZmZlY3QuY2hhbmdlcy5sZW5ndGhcbiAgICByZXR1cm4gdGhpcy5zdWJtaXQoe1xuICAgICAgcHJldmVudENsb3NlOiB0cnVlLFxuICAgICAgdXBkYXRlRGF0YToge1xuICAgICAgICBbYGVmZmVjdC5jaGFuZ2VzLiR7aWR4fWBdOiB7XG4gICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICBtb2RlOiBDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTLkFERCxcbiAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBsZXQgaGFzRWZmZWN0ID0gZmFsc2VcbiAgICBjb25zdCBlZmZlY3QgPSB7XG4gICAgICBkdXJhdGlvbjoge30sXG4gICAgICBjaGFuZ2VzOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmb3JtRGF0YSkge1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSAnY2hlY2tOYW1lJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZm9ybURhdGEuY2hlY2tOYW1lKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2JsaW5kJzpcbiAgICAgICAgY2FzZSAncHVzaGluZyc6XG4gICAgICAgIGNhc2UgJ2RpZmZpY3VsdHknOlxuICAgICAgICBjYXNlICdkaXNwbGF5TmFtZSc6XG4gICAgICAgIGNhc2UgJ2ljb24nOlxuICAgICAgICBjYXNlICdpZCc6XG4gICAgICAgIGNhc2UgJ21vZGlmaWVyJzpcbiAgICAgICAgY2FzZSAncGFjayc6XG4gICAgICAgIGNhc2UgJ3Nhbk1pbic6XG4gICAgICAgIGNhc2UgJ3Nhbk1heCc6XG4gICAgICAgIGNhc2UgJ3NhblJlYXNvbic6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZShrZXksIGZvcm1EYXRhW2tleV0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaGFzTW9kaWZpZXJzJzpcbiAgICAgICAgY2FzZSAnaGFzTGFiZWwnOlxuICAgICAgICBjYXNlICdoYXNJY29uJzpcbiAgICAgICAgICB0aGlzLm9iamVjdFtrZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5sYWJlbCc6XG4gICAgICAgICAgZWZmZWN0LmxhYmVsID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuaWNvbic6XG4gICAgICAgICAgZWZmZWN0Lmljb24gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC50aW50JzpcbiAgICAgICAgICBlZmZlY3QudGludCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmRpc2FibGVkJzpcbiAgICAgICAgICBlZmZlY3QuZGlzYWJsZWQgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi5zZWNvbmRzJzpcbiAgICAgICAgICBlZmZlY3QuZHVyYXRpb24uc2Vjb25kcyA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmR1cmF0aW9uLnJvdW5kcyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnJvdW5kcyA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmR1cmF0aW9uLnR1cm5zJzpcbiAgICAgICAgICBlZmZlY3QuZHVyYXRpb24udHVybnMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IGtleS5tYXRjaCgvXmVmZmVjdFxcLmNoYW5nZXNcXC4oXFxkKylcXC5rZXkkLylcbiAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGVmZmVjdC5jaGFuZ2VzLnB1c2goe1xuICAgICAgICAgICAgICBrZXk6IGZvcm1EYXRhW2tleV0sXG4gICAgICAgICAgICAgIG1vZGU6IGZvcm1EYXRhWydlZmZlY3QuY2hhbmdlcy4nICsgbWF0Y2hbMV0gKyAnLm1vZGUnXSxcbiAgICAgICAgICAgICAgdmFsdWU6IGZvcm1EYXRhWydlZmZlY3QuY2hhbmdlcy4nICsgbWF0Y2hbMV0gKyAnLnZhbHVlJ11cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNFZmZlY3QpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ29iamVjdCcsIGVmZmVjdClcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHN3aXRjaCAodGFyZ2V0Lm5hbWUpIHtcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnY2hlY2snLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbGlua1R5cGUnLCBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NoZWNrJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdsaW5rVHlwZScsIHRhcmdldC52YWx1ZSlcbiAgICAgICAgICBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUMpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVswXS5rZXkpXG4gICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnbGNrJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhdHRyaWJ1dGVLZXknOlxuICAgICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpY0tleSc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsIHRhcmdldC52YWx1ZSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzdWJtaXQnKSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuc3VibWl0dGVyLmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICAgICAgY2FzZSAnY2xpcGJvYXJkJzpcbiAgICAgICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKHRoaXMub2JqZWN0LmxpbmsubGluaylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnY2hhdCc6XG4gICAgICAgICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICd3aGlzcGVyLW93bmVyJzpcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QsIHRoaXMub2JqZWN0LmFjdG9ycylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnd2hpc3Blci1zZWxlY3RlZCc6XG4gICAgICAgICAgICBpZiAoIWNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vVG9rZW5zU2VsZWN0ZWQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ29DN0xpbmsudG9XaGlzcGVyTWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdCwgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmZpbHRlcih0ID0+IHQuYWN0b3Iub3duZXJzLmxlbmd0aCkubWFwKHQgPT4gdC5hY3RvcikpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ0NvQzdMaW5rJykge1xuICAgICAgdGhpcy5zZXRMaW5rKGF3YWl0IENvQzdMaW5rLmZyb21Ecm9wRGF0YShkYXRhKSlcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgoZGF0YS50eXBlID09PSAnRm9sZGVyJyAmJiBkYXRhLmRvY3VtZW50TmFtZSA9PT0gJ0FjdG9yJykgfHwgWydJdGVtJywgJ0FjdG9yJ10uaW5jbHVkZXMoZGF0YS50eXBlKSkge1xuICAgICAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsIGRhdGEuZG9jdW1lbnROYW1lID8/IGRhdGEudHlwZSlcbiAgICAgICAgaWYgKGRhdGEuZG9jdW1lbnROYW1lID8/IGRhdGEudHlwZSA9PT0gJ0FjdG9yJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmFjdG9ycyA9IGRhdGFMaXN0LmZpbHRlcihhID0+IGEub3duZXJzLmxlbmd0aClcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFMaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGlmIChbJ3NraWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGRhdGFMaXN0WzBdLnR5cGUpKSB7XG4gICAgICAgICAgICBpZiAoZGF0YUxpc3RbMF0ucGFjaykge1xuICAgICAgICAgICAgICB0aGlzLm9iamVjdC5oYXNJRCA9ICdmcm9tQ29tcGVuZGl1bSdcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgncGFjaycsIGRhdGFMaXN0WzBdLnBhY2spXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLm9iamVjdC5oYXNJRCA9ICdmcm9tRGlyZWN0b3J5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnaWQnLCBkYXRhTGlzdFswXS5pZClcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBkYXRhTGlzdFswXS5uYW1lKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRMaW5rIChsaW5rKSB7XG4gICAgdGhpcy5vYmplY3QubGluayA9IGxpbmtcbiAgICBpZiAobGluay5wYWNrICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbUNvbXBlbmRpdW0nXG4gICAgfSBlbHNlIGlmIChsaW5rLmlkICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbURpcmVjdG9yeSdcbiAgICB9XG4gICAgaWYgKGxpbmsuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyIHx8IHBhcnNlSW50KGxpbmsubW9kaWZpZXIsIDEwKSAhPT0gMCB8fCBsaW5rLmlzUHVzaGluZykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzTW9kaWZpZXJzID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNNb2RpZmllcnMgPSBmYWxzZVxuICAgIH1cbiAgICBpZiAobGluay5kaXNwbGF5TmFtZSAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0xhYmVsID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAobGluay5pY29uICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzSWNvbiA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChsaW5rRGF0YSA9IHt9LCBvcHRpb24gPSB7fSkge1xuICAgIGNvbnN0IG9iamVjdCA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoe1xuICAgICAgbGluazogbnVsbCxcbiAgICAgIGhhc0lEOiAnJyxcbiAgICAgIGhhc01vZGlmaWVyczogZmFsc2UsXG4gICAgICBoYXNMYWJlbDogZmFsc2UsXG4gICAgICBoYXNJY29uOiBmYWxzZSxcbiAgICAgIGFjdG9yczogW11cbiAgICB9LCBvcHRpb24pXG4gICAgY29uc3QgZGlhbG9nID0gbmV3IENvQzdDb250ZW50TGlua0RpYWxvZyhvYmplY3QsIHt9KVxuICAgIGRpYWxvZy5zZXRMaW5rKGF3YWl0IENvQzdMaW5rLmZyb21Ecm9wRGF0YShsaW5rRGF0YSkpXG4gICAgZGlhbG9nLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi9jb2M3LWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsID0ge31cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiggdW5kZWZpbmVkID09IG9wdGlvbnMuYXNrVmFsdWUpIG9wdGlvbnMuYXNrVmFsdWUgPSB0cnVlO1xuICAgIGlmIChvcHRpb25zLm5hbWUgJiYgIW9wdGlvbnMuZGlzcGxheU5hbWUpIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICBjb25zdCB1bmtub3duRGlmZmljdWx0eURlZmF1bHQgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpID09PSAndW5rbm93bidcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgYWxsb3dGbGF0RGljZU1vZGlmaWVyOlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXREaWNlTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdERpY2VNb2RpZmllcixcbiAgICAgIGFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyOlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpICYmXG4gICAgICAgICFvcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIsXG4gICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLFxuICAgICAgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0LFxuICAgICAgaGlkZURpZmZpY3VsdHk6IG9wdGlvbnMuaGlkZURpZmZpY3VsdHkgPz8gZmFsc2UsXG4gICAgICBvcHRpb25zXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKCFvcHRpb25zLmZvcmNlZENhcmRUeXBlID8/IHRydWUpXG4gICAgKSB7XG4gICAgICBkYXRhLmNhcmRUeXBlcyA9IENvQzdDaGF0TWVzc2FnZS5jYXJkVHlwZXMob3B0aW9ucylcbiAgICB9XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9ib251cy5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvbnVzU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNib251cy1yb2xsLWZvcm0nKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAncm9sbCcsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBSb2xsQ2FyZCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICB0aGlzLmluaXRpYXRvciA9IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cbiAgICBpZiAoIWNhcmRFbGVtZW50KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tSFRNTENhcmRFbGVtZW50IChjYXJkKSB7XG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2FyZC5yb2xscy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmIChjYXJkLnJvbGxzW2luZGV4XT8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgIGNhcmQucm9sbHNbaW5kZXhdID0gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGNhcmQucm9sbHNbaW5kZXhdKVxuICAgICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0ucm9sbGVkKSB7XG4gICAgICAgICAgY2FyZC5yb2xsc1tpbmRleF0uX2h0bWxSb2xsID0gYXdhaXQgY2FyZC5yb2xsc1tpbmRleF0uZ2V0SHRtbFJvbGwoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHNwYW4gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHNwYW4gJiYgc3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiYgIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IHNwYW4uY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2VJZChtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgZmxhZyA9IHNwYW4uZGF0YXNldC5mbGFnXG4gICAgaWYgKCFmbGFnKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSBzcGFuLmNsb3Nlc3QoJy50b2dnbGUnKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICBjYXJkLnRvZ2dsZUZsYWcoZmxhZylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICBjYXJkLnVuc2V0RmxhZyhiLmRhdGFzZXQuZmxhZylcbiAgICAgIH1cbiAgICAgIGNhcmQuc2V0RmxhZyhmbGFnKVxuICAgIH1cbiAgICBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkaXNwYXRjaCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgbGV0IG1lc3NhZ2VzID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuZGVmYXVsdENvbmZpZy50eXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpICYmXG4gICAgICAgICAgbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3N0YXRlJykgIT09ICdyZXNvbHZlZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFsnY29tYmluZWRDYXJkJ10uaW5jbHVkZXModGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2luaXRpYXRvcicpID09PSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuXG4gICAgICBpZiAobWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIE9sZCBtZXNzYWdlcyBjYW4ndCBiZSB1c2VkIGlmIG1lc3NhZ2UgaXMgbW9yZSB0aGFuIGEgZGF5IG9sZCBtYXJrIGl0IGFzIHJlc29sdmVkXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKG1lc3NhZ2VzWzBdLnRpbWVzdGFtcClcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgICAgICBjb25zdCB0aW1lRGlmZlNlYyA9IChub3cgLSB0aW1lc3RhbXApIC8gMTAwMFxuICAgICAgICBpZiAoMjQgKiA2MCAqIDYwIDwgdGltZURpZmZTZWMpIHtcbiAgICAgICAgICBhd2FpdCBtZXNzYWdlc1swXS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcbiAgICAgICAgICBtZXNzYWdlcyA9IFtdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNhcmRcbiAgICAgIGlmICghbWVzc2FnZXMubGVuZ3RoKSBjYXJkID0gbmV3IHRoaXMoKVxuICAgICAgZWxzZSBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlc1swXSlcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5fcm9sbE1vZGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNhcmQuX3JvbGxNb2RlID0gZGF0YS5fcm9sbE1vZGVcbiAgICAgIH1cbiAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgIH0gZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVzb2x2ZU9sZCAodXNlcklkKSB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpICYmIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdzdGF0ZScpICE9PSAncmVzb2x2ZWQnKSB7XG4gICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xuICAgICAgICAgIHJldHVybiBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnaW5pdGlhdG9yJykgPT09IHVzZXJJZFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIGlmIChtZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IG1lc3NhZ2VzWzBdLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuICAgICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpXG4gICAgaHRtbENhcmRFbGVtZW50WzBdLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5jb25maWcudGl0bGUpLFxuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50WzBdLm91dGVySFRNTCxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgICAgIHN0YXRlOiAnaW5pdGlhdGVkJyxcbiAgICAgICAgICBpbml0aWF0b3I6IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBhd2FpdCB0aGlzLmNvbXB1dGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIGF3YWl0IHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMuY29uZmlnLnRlbXBsYXRlLCB0aGlzKVxuICAgICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG5cbiAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0pXG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICB1cGRhdGVSb2xsIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmZyb21HTSkge1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnJvbGxzW2RhdGEucmFua10sIGRhdGEucm9sbClcbiAgICB9XG4gIH1cblxuICBhZGRSb2xsRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGRhdGEucm9sbClcbiAgICB0aGlzLnJvbGxzLnB1c2goY2hlY2spXG4gICAgaWYgKHRoaXMuY29uZmlnLnR5cGUgPT09ICdjb21iaW5lZENhcmQnKSB7XG4gICAgICB0aGlzLmluaXRpYXRvciA9IGRhdGEucm9sbC5pbml0aWF0b3JcbiAgICB9XG4gIH1cblxuICBhZGRSb2xsIChkYXRhKSB7XG4gICAgdGhpcy5yb2xscy5wdXNoKGRhdGEpXG4gIH1cblxuICByZW1vdmVSb2xsIChyYW5rKSB7XG4gICAgdGhpcy5yb2xscy5zcGxpY2UocmFuaywgMSlcbiAgfVxuXG4gIHNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSB0cnVlXG4gIH1cblxuICB1bnNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSBmYWxzZVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICB0aGlzW2ZsYWdOYW1lXSA9ICF0aGlzW2ZsYWdOYW1lXVxuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4Y2x1ZGU6IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbScsICdfbWVzc2FnZScsICdfaHRtbFJvbGwnXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfXydcbiAgICB9XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IHdpbm5lcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIud2lubmVyKVxuICB9XG5cbiAgZ2V0IHdpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGgpIHJldHVybiB0aGlzLndpbm5lcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbG9vc2VycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gIXIud2lubmVyKVxuICB9XG5cbiAgZ2V0IGxvb3NlciAoKSB7XG4gICAgaWYgKHRoaXMubG9vc2Vycy5sZW5ndGgpIHJldHVybiB0aGlzLmxvb3NlcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgaGFzV2lubmVyICgpIHtcbiAgICBpZiAodGhpcy53aW5uZXJzLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNLZWVwZXIgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgZGF0YSAoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5kYXRhU3RyaW5nKVxuICB9XG5cbiAgZ2V0IGRhdGFTdHJpbmcgKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5jb25maWcuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMuY29uZmlnLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQXVkaW9IZWxwZXIsIENPTkZJRywgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29tYmluZWRDaGVja0NhcmQgZXh0ZW5kcyBSb2xsQ2FyZCB7XG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVybmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLmZpbmQoJy5yb2xsLWNhcmQgYScpLmNsaWNrKGFzeW5jIChldmVudCkgPT4gQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2soIGV2ZW50KSk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBhJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBidXR0b24nLFxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdjb21iaW5lZENhcmQnLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvbWJpbmVkUm9sbENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgc3VjY2Vzc0NvdW50ICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGxldCBjb3VudCA9IDBcbiAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgIGlmIChyLnBhc3NlZCkgY291bnQgKz0gMVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvdW50XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYWluQWN0b3JLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzWzBdPy5hY3Rvcj8uYWN0b3JLZXkgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgc3VjY2VzcyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5hbnkpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA+IDApIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsKSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPT09IHRoaXMucm9sbHMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmYWlsdXJlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMuc3VjY2Vzc1xuICB9XG5cbiAgZ2V0IGNoZWNrR01Jbml0aWF0b3IgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmdldCh0aGlzLmluaXRpYXRvcik/LmlzR01cbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICByb2xsOiB0aGlzLl9yb2xsW2NoZWNrLmRpY2VNb2RpZmllciB8fCAwXSxcbiAgICAgIHNpbGVudDogdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrLmdldEh0bWxSb2xsKHsgaGlkZVN1Y2Nlc3M6IHRydWUgfSlcbiAgfVxuXG4gIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOiB7XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhc3NpZ25Sb2xsJzoge1xuICAgICAgICB0aGlzLmFzc2lnblJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgYXNzaWduUm9sbCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5fcm9sbCA9IGRhdGEucm9sbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBDb21iaW5lZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jYXJkJzoge1xuICAgICAgICBjb25zdCBwb29sID0ge31cbiAgICAgICAgZm9yIChjb25zdCBkaWNlIG9mIGNhcmQucm9sbHMpIHtcbiAgICAgICAgICBjb25zdCBkaWNlTW9kaWZpZXIgPSBwYXJzZUludChkaWNlLmRpY2VNb2RpZmllciwgMTApXG4gICAgICAgICAgaWYgKCFpc05hTihkaWNlTW9kaWZpZXIpKSB7XG4gICAgICAgICAgICBwb29sW2RpY2VNb2RpZmllcl0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBDb0M3RGljZS5jb21iaW5lZFJvbGwoeyBwb29sIH0pXG4gICAgICAgIHJvbGwuaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICdhc3NpZ25Sb2xsJyxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxuICAgICAgICAgIHJvbGxcbiAgICAgICAgfVxuICAgICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICBpbml0aWF0b3I6IGdhbWUudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGwpIHJldHVyblxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgLy8gcmVtb3ZlIGFueSBhY3RvcnMgdGhhdCBubyBsb25nZXIgZXhpc3RcbiAgICB9KVxuXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGlmICghci5yb2xsZWQpIHtcbiAgICAgICAgci5tb2RpZmllciA9IHIuZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5kaWZmaWN1bHR5ID0gci5kaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICByLmZsYXREaWNlTW9kaWZpZXIgPSByLmZsYXREaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgICByLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHIuZmxhdFRocmVzaG9sZE1vZGlmaWVyIHx8IDBcbiAgICAgICAgYXdhaXQgci5fcGVyZm9ybSh7IHJvbGw6IHRoaXMuX3JvbGxbci5tb2RpZmllcl0sIHNpbGVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLmdldEh0bWxSb2xsKClcbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXG4gIH1cblxuICBnZXQgb3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlc1xuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChvcHRpb25uYWxDaGF0RGF0YSA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVswXVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmNvbXB1dGUpIHRoaXMuY29tcHV0ZSgpXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgdGhpcy50b01lc3NhZ2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG5cbiAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0pXG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1yYWRpby1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtc3dpdGNoJywgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuc3VibWl0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdmb2N1c291dCcsICdpbnB1dCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgJ2Zvcm0nLCB0aGlzLl9vbktleS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcykgcmV0dXJuXG4gICAgaWYgKFxuICAgICAgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdhbWUuQ29DNy5jYXJkcykuaW5jbHVkZXMoXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc1xuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBJbnRlcmFjdGl2ZUNoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGNvbnN0IHR5cGVkQ2FyZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgZ2FtZS5Db0M3LmNhcmRzW2h0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc10oKSxcbiAgICAgIGNhcmRcbiAgICApXG4gICAgdHlwZWRDYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgdHlwZWRDYXJkLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IHR5cGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzc2lnbk9iamVjdCAoKSB7fVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJyAvL0F2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cbiAgICBpZiAodGhpc1thY3Rpb25dKSB0aGlzW2FjdGlvbl0oeyBldmVudCwgdXBkYXRlOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgbGV0IGRhdGEgPSBmZC5vYmplY3RcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QodGhpcywgZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZGF0YSkpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZVxuICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBpZiAoIWNhcmREYXRhLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgICAgY2FyZERhdGEubWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5pYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgdGhpcy51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICB0aGlzLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgaXNUYXJnZXRPd25lciAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0LmlzT3duZXJcbiAgfVxuXG4gIGdldCBpc0tlZXBlciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPVxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuZG9jdW1lbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZUNoYXRDYXJkIH0gZnJvbSAnLi4vaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIERhbWFnZUNhcmQgZXh0ZW5kcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgJ190YXJnZXRUb2tlbicsXG4gICAgICAgICdfdGFyZ2V0QWN0b3InLFxuICAgICAgICAnX2h0bWxSb2xsJyxcbiAgICAgICAgJ19odG1sSW5saW5lUm9sbCdcbiAgICAgIF0uY29uY2F0KHN1cGVyLmRlZmF1bHRPcHRpb25zLmV4Y2x1ZGUpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvZGFtYWdlLmh0bWwnXG4gICAgfSlcbiAgfVxuXG4gIC8vIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gIC8vICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgLy8gfVxuXG4gIGFzeW5jIGFzc2lnbk9iamVjdCAoKSB7XG4gICAgaWYgKHRoaXMuZGFtYWdlUm9sbCAmJiB0aGlzLmRhbWFnZVJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHRoaXMuZGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEodGhpcy5kYW1hZ2VSb2xsKVxuICAgIH1cbiAgfVxuXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBzdXBlci5fb25CdXR0b24oZXZlbnQpXG4gIH1cblxuICBnZXQgY3JpdGljYWwgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY3JpdGljYWxcbiAgfVxuXG4gIHNldCBjcml0aWNhbCAoeCkge1xuICAgIHRoaXMuX29wdGlvbnMuY3JpdGljYWwgPSB4XG4gIH1cblxuICBnZXQgaW1wYWxlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2ltcGFsZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICByZXR1cm4gdGhpcy5faW1wYWxlXG4gIH1cblxuICBzZXQgaW1wYWxlICh4KSB7XG4gICAgdGhpcy5faW1wYWxlID0geFxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhbWFnZUZvcm11bGEgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5kYW1hZ2VGb3JtdWxhKVxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlTnVtYmVyICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKVxuICB9XG5cbiAgZ2V0IGlzQXJtb3JGb3J1bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5hcm1vciAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5hcm1vcilcbiAgfVxuXG4gIGdldCB0b3RhbERhbWFnZVN0cmluZyAoKSB7XG4gICAgbGV0IGRhbWFnZSA9IE51bWJlcihcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICApXG4gICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSB8fCBOdW1iZXIodGhpcy5hcm1vcikgPiAwKSB7XG4gICAgICAgIGRhbWFnZSA9IGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgIGlmIChkYW1hZ2UgPD0gMCkge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtb3JBYnNvcmJzRGFtYWdlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGFtYWdlXG4gIH1cblxuICBnZXQgbm9EYW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgY29uc3QgZGFtYWdlID0gdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICAgIHJldHVybiAhIShkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcikgPD0gMClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhIShkYW1hZ2UgPD0gMClcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5yb2xsICYmICF0aGlzLmlzRGFtYWdlTnVtYmVyKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgfHxcbiAgICAgICh0aGlzLnJvbGwgJiYgdGhpcy5yb2xsLnRvdGFsICE9IG51bGwpIHx8XG4gICAgICB0aGlzLmhhcmRyb2xsZWRcbiAgICApIHtcbiAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMuZGFtYWdlSW5mbGljdGVkICYmICF0aGlzLm5vRGFtYWdlKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucm9sbGVkICYmIHRoaXMucm9sbCkge1xuICAgICAgaWYgKHRoaXMucm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICB0aGlzLnJvbGwgPSBSb2xsLmZyb21EYXRhKHRoaXMucm9sbClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMucm9sbClcbiAgICAgIHRoaXMuX2h0bWxJbmxpbmVSb2xsID0gYS5vdXRlckhUTUxcbiAgICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsLnJlbmRlcigpXG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgdGhpcy5yb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5kYW1hZ2VGb3JtdWxhIHx8ICcwJykuZXZhbHVhdGUoe1xuICAgICAgYXN5bmM6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMucm9sbClcbiAgICB0aGlzLmhhcmRyb2xsZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsQXJtb3IgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuYXJtb3IpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB0aGlzLmFybW9yID0gcm9sbC50b3RhbFxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGlmIChpc05hTihOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZykpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckV2YWx1YXRpbmdEYW1hZ2UnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICBjb25zdCB0YXJnZXROYW1lID0gW11cbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcnMgPSBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubWFwKHRva2VuID0+IHtcbiAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgIH0pXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdGVkUGxheWVycy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBzZWxlY3RlZFBsYXllcnNbaW5kZXhdLmlkKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICB0YXJnZXROYW1lLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XS5uYW1lKVxuICAgICAgdGFyZ2V0cy5wdXNoKHNlbGVjdGVkUGxheWVyc1tpbmRleF0pXG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0aXRsZTogJyAnLFxuICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZWFsRGFtYWdlJywge1xuICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmcsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0TmFtZVxuICAgICAgfSksXG4gICAgICBidXR0b25zOiB7XG4gICAgICAgIG9uZToge1xuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EYW1hZ2UodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHR3bzoge1xuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0OiAndHdvJ1xuICAgIH1cbiAgICBpZiAodGFyZ2V0TmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbmZpcm1EYW1hZ2UgKHRhcmdldHMpIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGF3YWl0IHRhcmdldHNbaW5kZXhdLmRlYWxEYW1hZ2UoTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpLCB7XG4gICAgICAgIGlnbm9yZUFybW9yOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbFRvJywge1xuICAgICAgICAgIG5hbWU6IHRhcmdldHNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgZGFtYWdlOiB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGxldCBkYW1hZ2UgPSB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nXG4gICAgaWYgKGlzTmFOKE51bWJlcihkYW1hZ2UpKSkge1xuICAgICAgaWYgKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKSA9PT0gZGFtYWdlKSB7XG4gICAgICAgIGRhbWFnZSA9IDBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0Vycm9yIGV2YWx1YXRpbmcgZGFtYWdlJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRhcmdldEFjdG9yKSB7XG4gICAgICBhd2FpdCB0aGlzLnRhcmdldEFjdG9yLmRlYWxEYW1hZ2UoTnVtYmVyKGRhbWFnZSksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuZGFtYWdlSW5mbGljdGVkID0gdHJ1ZVxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZ2V0IHJhbmdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJhbmdlIHx8ICdub3JtYWwnXG4gIH1cblxuICBzZXQgcmFuZ2UgKHgpIHtcbiAgICBjb25zdCByYW5nZXMgPSBbJ25vcm1hbCcsICdsb25nJywgJ2V4dHJlbWUnXVxuICAgIGlmICghcmFuZ2VzLmluY2x1ZXMoeC50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuXG4gICAgdGhpcy5fb3B0aW9ucy5yYW5nZSA9IHhcbiAgfVxuXG4gIGdldCBkYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMucmFuZ2VcbiAgICBsZXQgZm9ybXVsYSA9IHRoaXMud2VhcG9uPy5zeXN0ZW0/LnJhbmdlW3JhbmdlXT8uZGFtYWdlXG4gICAgbGV0IGRiID0gdGhpcy5hY3Rvci5kYlxuICAgIGRiID0gKChkYiA/PyAnJykudG9TdHJpbmcoKS50cmltKCkgPT09ICcnID8gMCA6IGRiKS50b1N0cmluZygpLnRyaW0oKVxuXG4gICAgaWYgKCFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYWRkYikgZm9ybXVsYSA9IGZvcm11bGEgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5haGRiKSBmb3JtdWxhID0gZm9ybXVsYSArICcrIGZsb29yKCcgKyBkYiArICcvMiknXG5cbiAgICBpZiAoZm9ybXVsYSkge1xuICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgbGV0IHJvbGxTdHJpbmdcbiAgICAgIGlmICh0aGlzLmNyaXRpY2FsKSB7XG4gICAgICAgIGlmICh0aGlzLmltcGFsZSkge1xuICAgICAgICAgIHJvbGxTdHJpbmcgPSBmb3JtdWxhICsgJysnICsgbWF4RGFtYWdlXG4gICAgICAgICAgcmV0dXJuIHJvbGxTdHJpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4RGFtYWdlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmb3JtdWxhXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhcm1vciAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5fYXJtb3IgJiYgdGhpcy5fYXJtb3IgIT09ICcnKSByZXR1cm4gdGhpcy5fYXJtb3JcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzZXQgYXJtb3IgKHgpIHtcbiAgICB0aGlzLl9hcm1vciA9IHhcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBnYW1lICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2RhbWFnZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBPcHBvc2VkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBzdXBlci5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGEnLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBidXR0b24nLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0Q29uZmlnLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuaHRtbCcsXG4gICAgICB0eXBlOiAnb3Bwb3NlZENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWdcbiAgfVxuXG4gIGdldCBhdHRhY2tlclJvbGwgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgaWYgKHRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBhdHRhY2tlciA9IHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci5pbmRleCA9PT0gMCB8fCByLmF0dGFja2VyKVxuICAgICAgICBpZiAoYXR0YWNrZXIubGVuZ3RoKSByZXR1cm4gYXR0YWNrZXJbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRlZmVuZGVyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRlZmVuZGVyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ICE9PSAwIHx8ICFyLmF0dGFja2VyKVxuICAgICAgICBpZiAoZGVmZW5kZXIubGVuZ3RoKSByZXR1cm4gZGVmZW5kZXJbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRlZmVuZGVySXNEb2RnaW5nICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbD8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5za2lsbD8ubmFtZVxuICAgICkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgIHRoaXMuZGVmZW5kZXJSb2xsLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBhZHZhbnRhZ2VBdHRhY2tlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9hYSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWFcbiAgfVxuXG4gIGdldCB3aW5uZXJSb2xsc0RhbWFnZSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgIHRoaXMucm9sbHMubGVuZ3RoID49IDIgJiZcbiAgICAgIHRoaXMuaGFzV2lubmVyICYmXG4gICAgICB0aGlzLndpbm5lcj8uaXRlbT8udHlwZSA9PT0gJ3dlYXBvbidcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc2V0IGFkdmFudGFnZUF0dGFja2VyICh4KSB7XG4gICAgdGhpcy5fYWEgPSB0cnVlXG4gICAgdGhpcy5fYWQgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZURlZmVuZGVyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FkID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICByZXR1cm4gdGhpcy5fYWRcbiAgfVxuXG4gIHNldCBhZHZhbnRhZ2VEZWZlbmRlciAoeCkge1xuICAgIHRoaXMuX2FkID0gdHJ1ZVxuICAgIHRoaXMuX2FhID0gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1RpZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMud2lubmVyQ291bnQgPiAxXG4gIH1cblxuICBnZXQgbmVlZHNUaWVCcmVha2VyICgpIHtcbiAgICBpZiAoIXRoaXMuY29tYmF0KSByZXR1cm4gZmFsc2VcbiAgICBpZiAoXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbCAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGwgJiZcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5kZWZlbmRlclJvbGwuc3VjY2Vzc0xldmVsXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB3aW5uZXJDb3VudCAoKSB7XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBpZiAoci53aW5uZXIpIGNvdW50ICs9IDFcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50XG4gIH1cblxuICBnZXQgaXNBdHRhY2tNYW5ldXZlciAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICAoIXRoaXMuYXR0YWNrZXJSb2xsPy5pdGVtIHx8XG4gICAgICAgIHRoaXMuYXR0YWNrZXJSb2xsPy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5tbnZyKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmVzdWx0VGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0ICYmIHRoaXMuYXR0YWNrZXJSb2xsICYmIHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICBpZiAoIXRoaXMuYXR0YWNrZXJSb2xsLndpbm5lciAmJiAhdGhpcy5kZWZlbmRlclJvbGwud2lubmVyKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0YWNrZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmF0dGFja2VyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLm1hbmV1dmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJJc0RvZGdpbmcpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgcHJvY2VzcyAoZGF0YSkge1xuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ25ldyc6XG4gICAgICAgIGlmICghdGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5jb21iYXQgPSBkYXRhLmNvbWJhdCB8fCB1bmRlZmluZWRcbiAgICAgICAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgICAgICAgIGRhdGEucm9sbC5hdHRhY2tlciA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5yb2xsLmluZGV4ID0gdGhpcy5yb2xscy5sZW5ndGhcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzpcbiAgICAgICAgdGhpcy51cGRhdGVSb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIHJvbGwgKHJhbmspIHtcbiAgICBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLl9wZXJmb3JtKClcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgcmFuayxcbiAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICB9XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gdGhpcy5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaS5hY3Rvci1yb2xsJylcbiAgICBjb25zdCBtZXNzYWdlID0gYS5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGEuY2xvc2VzdCgnZGl2LnJvbGwtY2FyZCcpXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IE9wcG9zZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3RvZ2dsZS1jb21iYXQnOiB7XG4gICAgICAgIGNhcmQuY29tYmF0ID0gIWNhcmQuY29tYmF0XG4gICAgICAgIC8vIGlmKCAhY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciAmJiAhY2FyZC5hZHZhbnRhZ2VEZWZlbmRlcikgY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciA9IHRydWU7XG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZW1vdmUtcm9sbCc6IHtcbiAgICAgICAgY2FyZC5yZW1vdmVSb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdjbG9zZS1jYXJkJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgICAgIGlmICghY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSkge1xuICAgICAgICAgIGNhcmQucm9sbHNbcmFua10uYWN0b3JLZXkgPSBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhcmQucm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1kYW1hZ2UnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBjYXJkLndpbm5lci5pc0V4dHJlbWVTdWNjZXNzLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGNhcmQud2lubmVyLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGNhcmQubG9vc2VyLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGNhcmQud2lubmVyLml0ZW1JZFxuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlIChyYW5rID0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmFjdG9yS2V5ICE9PSAndW5kZWZpbmVkJyAvLyByZW1vdmUgYW55IGFjdG9ycyB0aGF0IG5vIGxvbmdlciBleGlzdFxuICAgIH0pXG5cbiAgICBpZiAoIXJhbmspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkZWxldGUgdGhpcy5yb2xsc1tpXS5tYW5ldXZlclxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgICAgICAoIXRoaXMucm9sbHNbaV0uaXRlbSB8fFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5tbnZyKSAmJlxuICAgICAgICAgICgodGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0/LnNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgICAgICAgICF0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5tYW5ldXZlciA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW3JhbmtdLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW3JhbmtdLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbcmFua10uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICAvLyBTb3J0IGNvbWJhdCByb2xscyBieSBpbmRleC5cbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5pbmRleCA+IGIuaW5kZXgpIHJldHVybiAxXG4gICAgICAgIGlmIChhLmluZGV4IDwgYi5pbmRleCkgcmV0dXJuIC0xXG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICAvLyBDb21iYXQgcm9sbCBpbmNsdWRlcyBvbmx5IDIgcGVyc29ucywgcmVtb3ZlIHRoZSByZXN0LlxuICAgICAgaWYgKHRoaXMucm9sbHMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aGlzLnJvbGxzID0gW3RoaXMucm9sbHNbMF0sIHRoaXMucm9sbHNbMV1dXG4gICAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgICAgZGVsZXRlIHIud2lubmVyXG4gICAgICAgICAgZGVsZXRlIHIudGllXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmlyc3QgcGVyc29uIGFkZGVkIGlzIHRoZSBhdHRhY2tlci5cbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdKSB0aGlzLnJvbGxzWzBdLmF0dGFja2VyID0gdHJ1ZVxuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXT8ucm9sbGVkICYmIHRoaXMucm9sbHNbMV0/LnJvbGxlZCkge1xuICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5wYXNzZWQgfHwgdGhpcy5yb2xsc1sxXS5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCA+IHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWR2YW50YWdlQXR0YWNrZXIpIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgZWxzZSB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAtMVxuICAgICAgICBpZiAoIWEucm9sbGVkICYmIGIucm9sbGVkKSByZXR1cm4gMVxuICAgICAgICBpZiAoIWEucm9sbGVkICYmICFiLnJvbGxlZCkgcmV0dXJuIDBcbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsID4gYi5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA8IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gMVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKSkge1xuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0ID4gYi5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA8IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA+IGIucmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPCBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMud2luQ291bnQgPSAwXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSAmJiB0aGlzLnJvbGxzWzBdLnJvbGxlZCAmJiAhdGhpcy5yb2xsc1swXS5mYWlsZWQpIHtcbiAgICAgICAgdGhpcy53aW5Db3VudCA9IDFcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5yb2xsZWQgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID09PSB0aGlzLnJvbGxzW2ldLnN1Y2Nlc3NMZXZlbCAmJlxuICAgICAgICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpXG4gICAgICAgICAgICAgID8gdGhpcy5yb2xsc1swXS5tb2RpZmllZFJlc3VsdCA9PT0gdGhpcy5yb2xsc1tpXS5tb2RpZmllZFJlc3VsdFxuICAgICAgICAgICAgICA6IHRoaXMucm9sbHNbMF0ucmF3VmFsdWUgPT09IHRoaXMucm9sbHNbaV0ucmF3VmFsdWUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLndpbkNvdW50ID0gdGhpcy53aW5Db3VudCArIDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucm9sbHNbaV0ud2lubmVyID0gaSA8IHRoaXMud2luQ291bnRcbiAgICAgICAgdGhpcy5yb2xsc1tpXS50aWUgPSB0aGlzLnJvbGxzW2ldLndpbm5lciAmJiB0aGlzLndpbkNvdW50ID4gMVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgU2FuRGF0YURpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJzpjaGVja2JveCcpLmNsaWNrKCgpID0+IHRoaXMuX3RvZ2dsZUlucHV0KGh0bWwpKVxuICB9XG5cbiAgX3RvZ2dsZUlucHV0IChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcqW25hbWU9XCJjdXN0b21uYW1lXCJdJykudG9nZ2xlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2FuZGF0YS5odG1sJyxcbiAgICAgIG9wdGlvbnNcbiAgICApXG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgU2FuRGF0YURpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3cnKSwgLy8gVE9ETzogUmVtb3ZlIFNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgVmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2FuLWRhdGEtZm9ybScpKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICdWYWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IFNhbkRhdGFEaWFsb2cgfSBmcm9tICcuL3NhbmRhdGEtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdE1lc3NhZ2Uge1xuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9BVFRSSUJVVEUgKCkge1xuICAgIHJldHVybiAnUi9BVCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDICgpIHtcbiAgICByZXR1cm4gJ1IvQ0gnXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9DT01CQVQgKCkge1xuICAgIHJldHVybiAnUi9DTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX1NLSUxMICgpIHtcbiAgICByZXR1cm4gJ1IvU0snXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9FTkNPVU5URVIgKCkge1xuICAgIHJldHVybiAnUi9FQydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0NPTUJJTkVEICgpIHtcbiAgICByZXR1cm4gJ0MvQ08nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9HUk9VUCAoKSB7XG4gICAgcmV0dXJuICdDL0dSJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9STUFMICgpIHtcbiAgICByZXR1cm4gJ0MvTk8nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9PUFBPU0VEICgpIHtcbiAgICByZXR1cm4gJ0MvT1AnXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9TQU5fQ0hFQ0sgKCkge1xuICAgIHJldHVybiAnQy9TQydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX05PTkUgKCkge1xuICAgIHJldHVybiAnQy9OTydcbiAgfVxuXG4gIC8vIHN0YXRpYyBnZXQgUk9MTF9UT19DSEFUICgpIHtcbiAgLy8gICByZXR1cm4gJ1IvQ0gnXG4gIC8vIH1cblxuICAvLyBzdGF0aWMgZ2V0IFJPTExfVE9fQ0xJUEJPQVJEICgpIHtcbiAgLy8gICByZXR1cm4gJ1IvQ0wnXG4gIC8vIH1cblxuICBzdGF0aWMgY2FyZFR5cGVzIChjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0ID0ge1xuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXTogJ0NvQzcuUmVndWxhclJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXTogJ0NvQzcuQ29tYmluZWRSb2xsQ2FyZCcsXG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXTogJ0NvQzcuT3Bwb3NlZFJvbGxDYXJkJ1xuICAgICAgLy8gW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfR1JPVVBdOiAnQ29DNy5Hcm91cFJvbGxDYXJkJyAtIE5ZSVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFICYmXG4gICAgICBjb25maWcuYXR0cmlidXRlID09PSAnc2FuJ1xuICAgICkge1xuICAgICAgc2VsZWN0W0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXSA9ICdDb0M3LlNhbml0eUxvc3NFbmNvdW50ZXInXG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RcbiAgfVxuXG4gIHN0YXRpYyBub3JtYWxpemVSZXF1ZXN0IChvcHRpb25zKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZXZlbnQgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKHR5cGVvZiBvcHRpb25zLnNraWxsSWQgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KG9wdGlvbnMuc2tpbGxJZCkpIHtcbiAgICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgc2tpbGxJZHMgPSBvcHRpb25zLmFjdG9yLmdldFNraWxsc0J5TmFtZShvcHRpb25zLnNraWxsTmFtZSlcbiAgICAgICAgaWYgKHNraWxsSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBvcHRpb25zLnNraWxsSWQgPSBza2lsbElkc1swXS5pZFxuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgWydsY2snLCAnc2FuJ10uaW5jbHVkZXMob3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgIF0gIT09ICd1bmRlZmluZWQnXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZXZlbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLnJvbGxUeXBlID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbCcpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIVtcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMob3B0aW9ucy5jYXJkVHlwZSlcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9ySW52YWxpZENhcmRUeXBlJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVJcbiAgICAgIF0uaW5jbHVkZXMob3B0aW9ucy5yb2xsVHlwZSlcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9ySW52YWxpZFJvbGxUeXBlJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxuICAgICAgICBzaGlmdEtleTogb3B0aW9ucy5mYXN0Rm9yd2FyZCA/PyBvcHRpb25zLmV2ZW50Py5zaGlmdEtleSA/PyBvcHRpb25zLmZhc3RGb3J3YXJkID8/IGZhbHNlLFxuICAgICAgICBhbHRLZXk6IG9wdGlvbnMuZXZlbnQ/LmFsdEtleSA/PyBmYWxzZSxcbiAgICAgICAgaXNDdHJsS2V5OiBpc0N0cmxLZXkob3B0aW9ucy5ldmVudCA/PyBmYWxzZSksXG4gICAgICAgIGNyZWF0ZUVuY291bnRlcjogb3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPz8gZmFsc2UsXG4gICAgICAgIG9wZW5MaW5rVG9vbDogb3B0aW9ucy5vcGVuTGlua1Rvb2wgPz8gZmFsc2UsXG4gICAgICAgIHNlbmRUb0NoYXQ6IG9wdGlvbnMuc2VuZFRvQ2hhdCA/PyBmYWxzZSxcbiAgICAgICAgc2VuZFRvQ2xpcGJvYXJkOiBvcHRpb25zLnNlbmRUb0NsaXBib2FyZCA/PyBmYWxzZSxcbiAgICAgICAgaXNDb21iYXQ6XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdjb21iYXQnKSA/PyBmYWxzZSxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IG9wdGlvbnMucHJldmVudFN0YW5kYnkgPz8gZmFsc2UsXG4gICAgICAgIGJvbnVzRGljZTogMFxuICAgICAgfSxcbiAgICAgIGRpYWxvZ09wdGlvbnM6IHtcbiAgICAgICAgcm9sbFR5cGU6IG9wdGlvbnMucm9sbFR5cGUsXG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxuICAgICAgICBhdHRyaWJ1dGU6ICcnLFxuICAgICAgICBjaGF0TWVzc2FnZTogb3B0aW9ucy5jaGF0TWVzc2FnZSA/PyB0cnVlLFxuICAgICAgICBmb3JjZWRDYXJkVHlwZTogb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyBmYWxzZSxcbiAgICAgICAgaGlkZURpZmZpY3VsdHk6IG9wdGlvbnMuaGlkZURpZmZpY3VsdHkgPz8gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPVxuICAgICAgICAgIG9wdGlvbnMuc2tpbGxJZCA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9XG4gICAgICAgICAgb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9XG4gICAgICAgICAgb3B0aW9ucy5hdHRyaWJ1dGUgPz9cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9ySWQgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZCA/P1xuICAgICAgICAgIG9wdGlvbnMuYWN0b3IuaWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZCA/P1xuICAgICAgICAgIG9wdGlvbnMuYWN0b3IudG9rZW5LZXlcbiAgICAgICAgY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGwgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbHRlcm5hdGl2LXNraWxsJylcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IgPSBvcHRpb25zLmFjdG9yXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ29tYmF0XG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBjb25maWcub3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQoY29uZmlnLm9wdGlvbnMuaXRlbUlkKVxuICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25OYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAodHlwZW9mIGNvbmZpZy5vcHRpb25zLnRva2VuS2V5ID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9yID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckFjdG9yJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5za2lsbElkID09PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PVxuICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAhZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICAgICFjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgICAgXT8udmFsdWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5hdHRyaWJzW2NvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZV1cbiAgICAgICAgICAgICAgPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVFxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLldlYXBvbicpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5vcHRpb25zLmFsdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyID1cbiAgICAgICAgICBjb25maWcub3B0aW9ucy5hY3Rvci5oYXNQbGF5ZXJPd25lciA/PyBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IDBcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9XG4gICAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5ID8/XG4gICAgICAgICAgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbFtcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKVxuICAgICAgICAgIF1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllciA9IDBcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMFxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdHJpZ2dlciAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY29uZmlnID0gQ29DN0NoYXRNZXNzYWdlLm5vcm1hbGl6ZVJlcXVlc3Qob3B0aW9ucylcbiAgICBpZiAoY29uZmlnID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChcbiAgICAgIChjb25maWcub3B0aW9ucy5pc0N0cmxLZXkpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpXG4gICAgKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlTGluayhjb25maWcpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIChjb25maWcub3B0aW9ucy5zZW5kVG9DaGF0IHx8IGNvbmZpZy5vcHRpb25zLnNlbmRUb0NsaXBib2FyZCB8fCBjb25maWcub3B0aW9ucy5vcGVuTGlua1Rvb2wgfHwgY29uZmlnLm9wdGlvbnMuY3JlYXRlRW5jb3VudGVyKSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORSA9PT0gY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGVcbiAgICApIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNEaWNlID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5bY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXT8uYm9udXNEaWNlXG4gICAgICAgICAgaWYgKGJvbnVzRGljZSkge1xuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGJvbnVzRGljZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbT8uY2hhcmFjdGVyaXN0aWNzPy5bY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNdPy5ib251c0RpY2VcbiAgICAgICAgICBpZiAoYm9udXNEaWNlKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGl0ZW1Nb2RpZmllcnMgPSBPYmplY3QudmFsdWVzKGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5za2lsbHMpLmZpbmQoayA9PiBrLmZvdW5kcnlJRCA9PT0gY29uZmlnLm9wdGlvbnMuaXRlbUlkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbU1vZGlmaWVycz8uYm9udXNEaWNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBpdGVtTW9kaWZpZXJzLmJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IE1hdGgubWluKE1hdGgubWF4KGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyLCAtMiksIDIpXG4gICAgICB9XG4gICAgICBpZiAoIWNvbmZpZy5vcHRpb25zLnNoaWZ0S2V5KSB7XG4gICAgICAgIGF3YWl0IENvQzdDaGF0TWVzc2FnZS5jcmVhdGVSb2xsKGNvbmZpZylcbiAgICAgIH1cbiAgICAgIHJldHVybiBDb0M3Q2hhdE1lc3NhZ2UucnVuUm9sbChjb25maWcpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUxpbmsgKGNvbmZpZykge1xuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEU6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUM6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUjpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICAgICAgdHlwZTogJ0NvQzdMaW5rJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgbGlua0RhdGEubGlua1R5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuU0tJTExcbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQoY29uZmlnLm9wdGlvbnMuc2tpbGxJZCk/LnNob3J0TmFtZVxuICAgICAgICAgICAgaWYgKCFsaW5rRGF0YS5uYW1lKSByZXR1cm5cbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSkge1xuICAgICAgICAgICAgaWYgKChjb25maWcub3B0aW9ucy5hbHRLZXkgfHwgY29uZmlnLm9wdGlvbnMuY3JlYXRlRW5jb3VudGVyKSAmJiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPT09ICdzYW4nKSB7XG4gICAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgICAgICAgICAgICAgbGlua0RhdGEubGlua1R5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFXG4gICAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVCkge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLklURU1cbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy53ZWFwb25OYW1lXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTXG4gICAgICAgICAgICBsaW5rRGF0YS5zYW5NaW4gPSBjb25maWcub3B0aW9ucy5hY3Rvcj8uc3lzdGVtPy5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja1Bhc3NlZFxuICAgICAgICAgICAgbGlua0RhdGEuc2FuTWF4ID0gY29uZmlnLm9wdGlvbnMuYWN0b3I/LnN5c3RlbT8uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXG4gICAgICAgICAgICBsaW5rRGF0YS5zYW5SZWFzb24gPSBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZT8ubGVuZ3RoXG4gICAgICAgICAgICAgID8gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGVcbiAgICAgICAgICAgICAgOiBjb25maWcub3B0aW9ucy5hY3Rvci5uYW1lXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2hhdCkge1xuICAgICAgICAgICAgQ29DN0xpbmsudG9DaGF0TWVzc2FnZShsaW5rRGF0YSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NsaXBib2FyZCkge1xuICAgICAgICAgICAgQ29DN0xpbmsuZnJvbURyb3BEYXRhKGxpbmtEYXRhKS50aGVuKGxpbmsgPT4ge1xuICAgICAgICAgICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZChsaW5rLmxpbmspXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKGxpbmtEYXRhLCB7IGFjdG9yczogW2NvbmZpZy5vcHRpb25zLmFjdG9yXS5maWx0ZXIoYSA9PiBhLm93bmVycy5sZW5ndGgpLCBoYXNNb2RpZmllcnM6IGNvbmZpZy5vcHRpb25zLnNoaWZ0S2V5IH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZVJvbGwgKGNvbmZpZykge1xuICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoY29uZmlnLmRpYWxvZ09wdGlvbnMpXG4gICAgaWYgKHVzYWdlKSB7XG4gICAgICBjb25zdCBjYXJkVHlwZSA9IHVzYWdlLmdldCgnY2FyZFR5cGUnKVxuICAgICAgaWYgKGNhcmRUeXBlKSB7XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlID0gY2FyZFR5cGVcbiAgICAgIH1cbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJylcbiAgICAgIClcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBydW5Sb2xsIChjb25maWcpIHtcbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3Qgc2FuRGF0YSA9IGF3YWl0IFNhbkRhdGFEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICAgIHByb21wdExhYmVsOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAoc2FuRGF0YSkge1xuICAgICAgICAgICAgbGV0IHNhbk1pbiA9IHNhbkRhdGEuZ2V0KCdzYW5NaW4nKSB8fCAwXG4gICAgICAgICAgICBsZXQgc2FuTWF4ID0gc2FuRGF0YS5nZXQoJ3Nhbk1heCcpIHx8IDBcbiAgICAgICAgICAgIGNvbnN0IHNhblJlYXNvbiA9IHNhbkRhdGEuZ2V0KCdzYW5SZWFzb24nKVxuXG4gICAgICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NaW4pKSkgc2FuTWluID0gTnVtYmVyKHNhbk1pbilcbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1heCkpKSBzYW5NYXggPSBOdW1iZXIoc2FuTWF4KVxuXG4gICAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKFxuICAgICAgICAgICAgICBjb25maWcub3B0aW9ucy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgICAgICAgeyBzYW5NaW4sIHNhbk1heCwgc2FuUmVhc29uIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzYW5Nb2RpZmllcjogY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIsXG4gICAgICAgICAgICAgICAgc2FuRGlmZmljdWx0eTogY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSxcbiAgICAgICAgICAgICAgICBmYXN0Rm9yd2FyZDogY29uZmlnLm9wdGlvbnMuc2hpZnRLZXlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTDoge1xuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllclxuICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eVxuICAgICAgICBjaGVjay5hY3RvciA9ICFjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICAgID8gY29uZmlnLm9wdGlvbnMuYWN0b3JJZFxuICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXREaWNlTW9kaWZpZXJcbiAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICAgIGNoZWNrLnN0YW5kYnkgPVxuICAgICAgICAgICFjb25maWcub3B0aW9ucy5wcmV2ZW50U3RhbmRieSAmJlxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgIGdhbWUudXNlci5pc0dNICYmXG4gICAgICAgICAgY29uZmlnLm9wdGlvbnMuaGFzUGxheWVyT3duZXJcbiAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMKSB7XG4gICAgICAgICAgY2hlY2suc2tpbGwgPSBjb25maWcub3B0aW9ucy5za2lsbElkXG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgICkge1xuICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGxBdHRyaWJ1dGUoY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGxDaGFyYWN0ZXJpc3RpYyhjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYylcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2hhdE1lc3NhZ2UpIHtcbiAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzdWx0OiBjaGVjay5tb2RpZmllZFJlc3VsdCxcbiAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGNoZWNrLnJvbGxlZFN1Y2Nlc3NMZXZlbCxcbiAgICAgICAgICBpc0Z1bWJsZTogY2hlY2suaXNGdW1ibGUsXG4gICAgICAgICAgaXNDcml0aWNhbDogY2hlY2suaXNDcml0aWNhbCxcbiAgICAgICAgICBzdWNjZXNzTGV2ZWxzOiB7XG4gICAgICAgICAgICAxOiBjaGVjay5yZWd1bGFyVGhyZXNob2xkLFxuICAgICAgICAgICAgMjogY2hlY2suaGFyZFRocmVzaG9sZCxcbiAgICAgICAgICAgIDM6IGNoZWNrLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBhc3NlZDogY2hlY2sucGFzc2VkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICBjaGVjay5hY3RvciA9ICFjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3RvcklkXG4gICAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgY2hlY2suY2hhcmFjdGVyaXN0aWMgPSBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgIGNoZWNrLmF0dHJpYnV0ZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICAgIGNoZWNrLnNraWxsSWQgPSBjb25maWcub3B0aW9ucy5za2lsbElkXG4gICAgICAgICAgY2hlY2sucm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICAgICAgY2hlY2suaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXG4gICAgICAgICAgbGV0IGRhdGEgPSB7fVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgICAgICBjb21iYXQ6IGNvbmZpZy5vcHRpb25zLmlzQ29tYmF0LFxuICAgICAgICAgICAgICBhY3Rpb246ICduZXcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5pdGVtID0gY29uZmlnLm9wdGlvbnMuaXRlbUlkXG4gICAgICAgICAgICBjaGVjay53ZWFwb25BbHRTa2lsbCA9IGNvbmZpZy5vcHRpb25zLndlYXBvbkFsdFNraWxsXG4gICAgICAgICAgICBjaGVjay5kZW55UHVzaCA9IHRydWUgLy8gT3Bwb3NlZCByb2xsZWQgY2FuJ3QgYmUgcHVzaGVkLlxuICAgICAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICB0eXBlOiBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEucm9sbCA9IGNoZWNrLkpTT05Sb2xsRGF0YVxuICAgICAgICAgIGRhdGEuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIE9wcG9zZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbkNoZWNrIHtcbiAgY29uc3RydWN0b3IgKGFjdG9ySWQgPSBudWxsLCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgdGhpcy5jaGVjayA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZClcbiAgICB0aGlzLmNoZWNrLmNoYXJhY3RlcmlzdGljID0gJ2NvbidcbiAgICB0aGlzLmNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGVjay5kZW55UHVzaCA9IHRydWVcbiAgICB0aGlzLmFjdG9ySWQgPSBhY3RvcklkXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JJZCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNldCBhY3RvcklkICh4KSB7XG4gICAgdGhpcy5fYWN0b3JJZCA9IHhcbiAgICB0aGlzLmNoZWNrLmFjdG9yID0geFxuICB9XG5cbiAgZ2V0IGFjdG9ySWQgKCkge1xuICAgIGlmICh0aGlzLl9hY3RvcklkKSByZXR1cm4gdGhpcy5fYWN0b3JJZFxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHJldHVybiB0aGlzLmFjdG9yLnRva2VuS2V5XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpc1N1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLmNoZWNrKSByZXR1cm4gdGhpcy5jaGVjay5pc1N1Y2Nlc3NcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzUm9sbGVkICgpIHtcbiAgICBpZiAodGhpcy5jaGVjayAmJiB0aGlzLmNoZWNrLmRpY2VzICYmIHRoaXMuY2hlY2suZGljZXMudG90YWwpIHJldHVybiB0cnVlXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjaygpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChjb25DaGVjaywgY2FyZClcbiAgICBjb25zdCBodG1sQ2hlY2sgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQoaHRtbENoZWNrLCBjb25DaGVjay5jaGVjaylcbiAgICBjb25DaGVjay5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICByZXR1cm4gY29uQ2hlY2tcbiAgfVxuXG4gIGFzeW5jIGdldENoZWNrRWxlbWVudCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzLmNoZWNrKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICBpZiAoaHRtbEVsZW1lbnQpIHtcbiAgICAgIGh0bWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NoYXQtY2FyZCcsICdpdGVtLWNhcmQnLCAncm9sbC1jYXJkJylcbiAgICAgIHJldHVybiBodG1sRWxlbWVudFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxDb24oKVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBpZiAoZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXG4gICAgfVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW5cbiAgICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3I6IHRoaXMuZmxhdm9yLFxuICAgICAgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByb2xsQ29uICgpIHtcbiAgICB0aGlzLmNoZWNrLmhpZGVEaWNlUmVzdWx0ID0gdHJ1ZVxuICAgIGF3YWl0IHRoaXMuY2hlY2suX3BlcmZvcm0oKVxuICAgIGlmICghdGhpcy5pc0JsaW5kICYmICF0aGlzLmlzUm9sbGVkICYmICF0aGlzLmlzU3VjY2Vzcykge1xuICAgICAgaWYgKHRoaXMuc3RheUFsaXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5hcHBsaWVkID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcblxuICAgIGlmICghdGhpcy5pc0JsaW5kICYmIHRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHJldHVyblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sRWxlbWVudC5vdXRlckhUTUwgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnNlbGVjdC1za2lsbCcpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RTa2lsbENsaWNrZWQoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0U2tpbGxDbGlja2VkIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XG4gICAgdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0uc2VsZWN0ZWQgPSB0cnVlXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hZGRlZCkgdGhpcy5kYXRhLmRhdGEuYWRkZWQgPSAwXG4gICAgdGhpcy5kYXRhLmRhdGEuYWRkZWQrK1xuICAgIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5za2lsbC1zZWxlY3RvcicpXG4gICAgY29uc3QgZGl2Q291bnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpXG4gICAgZGl2Q291bnQuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuYWRkZWRcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKSAvLyBSZW5kZXIgdGVtcGxhdGUgYnVnIGF2ZWMgY2VydGFpbmVzIGRhdGFcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgU2tpbGxTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghZGF0YS5hZGRlZCA+PSBkYXRhLm9wdGlvbnNDb3VudCkgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGRhdGEuc2tpbGxzLmZpbHRlcihza2lsbCA9PiBza2lsbC5zZWxlY3RlZClcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHNlbGVjdGVkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ3NraWxsLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgUG9pbnRTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tbmFtZScpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gICAgaHRtbC5maW5kKCdidXR0b24nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkJ1dHRvbkNsaWNrZWQoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtTGlzdCA9IGxpLmNsb3Nlc3QoJy5pdGVtLWxpc3QnKVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0YWJsZScpKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJylcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tpdGVtLmRhdGFzZXQua2V5XS5zZWxlY3RlZCA9IGZhbHNlXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaXRlbS5kYXRhc2V0LmtleV0ub3B0aW9uYWwgPSBmYWxzZVxuICAgIH1cbiAgICAkKGxpKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKVxuICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0uc2VsZWN0ZWQgPSB0cnVlXG4gICAgY29uc3QgdG90YWxQb2ludHMgPSBsaVxuICAgICAgLmNsb3Nlc3QoJyNza2lsbC1zZWxlY3Rpb24tZm9ybScpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnBvaW50cycpXG4gICAgdG90YWxQb2ludHMuaW5uZXJUZXh0ID1cbiAgICAgIHRoaXMuZGF0YS5kYXRhLnRvdGFsICtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0ubXVsdGlwbGllciAqXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0udmFsdWVcbiAgICBjb25zdCBidXR0b24gPSBsaVxuICAgICAgLmNsb3Nlc3QoJyNza2lsbC1zZWxlY3Rpb24tZm9ybScpXG4gICAgICAucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKVxuICAgIHRoaXMuZGF0YS5kYXRhLnJlc29sdmVkID0gdHJ1ZVxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcbiAgICAvLyBhd2FpdCBhY3Rvci5hZGRTa2lsbCggdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0sIHRoaXMuZGF0YS5kYXRhLnR5cGUpO1xuICAgIC8vIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAvLyBpZiggIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDA7XG4gICAgLy8gdGhpcy5kYXRhLmRhdGEuYWRkZWQrKztcbiAgICAvLyBjb25zdCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcucG9pbnQtc2VsZWN0b3InKTtcbiAgICAvLyBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50Jyk7XG4gICAgLy8gZGl2Q291bnQuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuYWRkZWQ7XG4gICAgLy8gaWYoIHRoaXMuZGF0YS5kYXRhLmFkZGVkID49IHRoaXMuZGF0YS5kYXRhLm9wdGlvbnMpIHRoaXMuY2xvc2UoKTtcbiAgICAvLyByZXR1cm4gZXZlbnQ7XG4gIH1cblxuICBhc3luYyBfb25CdXR0b25DbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIHN1cGVyLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3BvaW50LXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IFBvaW50U2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNvbHZlZCkgcmV0dXJuIHJlc29sdmUoZGF0YSlcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBDaGFyYWNTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tbmFtZScpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIHRoaXMuZGF0YS5kYXRhLnNlbGVjdGVkID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ2hhcmFjU2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zZWxlY3RlZCkgcmV0dXJuIHJlc29sdmUoZGF0YS5zZWxlY3RlZClcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwgKi9cbmV4cG9ydCBjbGFzcyBDaGFyYWNSb2xsRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIG9wdGlvbnMpIHtcbiAgICBzdXBlcihkYXRhLCBvcHRpb25zKVxuXG4gICAgdGhpcy5yb2xsZWQgPSBkYXRhLnJvbGxlZCB8fCB7fVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwub24oJ2NoYW5nZScsICdpbnB1dCcsIHRoaXMuX29uQ2hhbmdlSW5wdXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdzdWJtaXQnLCAnZm9ybScsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRlY3JlYXNlLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yZXNldC1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vblJlc2V0Q2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICdidXR0b24nLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5kZWNyZWFzZUNoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLnJlc2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBpZiAoYWN0aW9uID09PSAncm9sbCcpIHtcbiAgICAgIGZvciAoY29uc3QgY2hhciBvZiBbXG4gICAgICAgICdzdHInLFxuICAgICAgICAnY29uJyxcbiAgICAgICAgJ3NpeicsXG4gICAgICAgICdkZXgnLFxuICAgICAgICAnYXBwJyxcbiAgICAgICAgJ2ludCcsXG4gICAgICAgICdwb3cnLFxuICAgICAgICAnZWR1JyxcbiAgICAgICAgJ2x1Y2snXG4gICAgICBdKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXIpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3ZhbGlkYXRlJyAmJiB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSkge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgY29uc3QgZm9ybXVsYSA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xsc1trZXldXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIoZm9ybXVsYSkpKSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChmb3JtdWxhKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgcm9sbC50b01lc3NhZ2Uoe1xuICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlUm9sbGluZ0NoYXJhY3RlcmlzdGljJywge1xuICAgICAgICAgICAgbGFiZWw6IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0W2tleV0ubGFiZWwsXG4gICAgICAgICAgICBmb3JtdWxhXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgaW5wdXQudmFsdWUgPSByb2xsLnRvdGFsXG4gICAgICB9IGVsc2UgaW5wdXQudmFsdWUgPSBOdW1iZXIoZm9ybXVsYSlcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICAgIGlmICghdGhpcy5yb2xsZWQpIHRoaXMucm9sbGVkID0ge31cbiAgICAgIHRoaXMucm9sbGVkW2tleV0gPSB0cnVlXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUNoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyAxXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBkZWNyZWFzZUNoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0ICYmIE51bWJlcihpbnB1dC52YWx1ZSkgPiAwKSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgLSAxXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyByZXNldENoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IG51bGxcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IDBcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZUlucHV0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1tpbnB1dC5uYW1lXSA9IHZhbHVlXG4gICAgfVxuXG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGNoZWNrVG90YWwgKCkge1xuICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzXG4gICAgKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgKz0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsKSAhPT1cbiAgICAgICAgTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgdmFsaWRhdGlvbi5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJylcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPSBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsaWRhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJylcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPSB0cnVlXG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnZhbHVlJylcbiAgICAgIHZhbHVlLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWVcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbCA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnRvdGFsJylcbiAgICB0b3RhbC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsXG5cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID0gT2JqZWN0LnZhbHVlcyh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKS5maWx0ZXIodmFsID0+IGlzTmFOKHBhcnNlSW50KHZhbCkpKS5sZW5ndGggPT09IDBcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IHJvbGxlZCA9IHt9XG4gICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcykpIHtcbiAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgKz0gdmFsdWUgfHwgMFxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTih2YWx1ZSkgJiYgdmFsdWUgPiAwKSB7XG4gICAgICAgIHJvbGxlZFtrZXldID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsKSAhPT1cbiAgICAgICAgTnVtYmVyKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICBkYXRhLnBvaW50c1dhcm5pbmcgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXJvbGwuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNSb2xsRGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIHJvbGxlZCxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEudmFsaWRhdGUpIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIFNraWxsU3BlY1NlbGVjdERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKFxuICAgIHNraWxscyxcbiAgICBzcGVjaWFsaXphdGlvbk5hbWUsXG4gICAgYmFzZVZhbHVlID0gbnVsbCxcbiAgICBuYW1lID0gbnVsbFxuICApIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWMtc2VsZWN0Lmh0bWwnLFxuICAgICAge1xuICAgICAgICBoYXNTa2lsbHM6IHNraWxscy5sZW5ndGggPiAwLFxuICAgICAgICBza2lsbHMsXG4gICAgICAgIGJhc2U6IGJhc2VWYWx1ZSxcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTZWxlY3RCYXNlJywgeyBuYW1lIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsU3BlY1NlbGVjdFRpdGxlJywge1xuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICAgIH0pLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2tpbGwtc2VsZWN0LWZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lICovXG5cbmV4cG9ydCBjbGFzcyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdza2lsbC1uYW1lLWRpYWxvZyddLFxuICAgICAgdGl0bGU6ICcnLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LmhicycsXG4gICAgICB3aWR0aDogNDAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBnZXQgdGl0bGUgKCkge1xuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsU3BlY1NlbGVjdFRpdGxlJywge1xuICAgICAgc3BlY2lhbGl6YXRpb246IHRoaXMub2JqZWN0LnNwZWNpYWxpemF0aW9uTmFtZVxuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJy5zdWJtaXQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25DbGlja1N1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnW25hbWU9ZXhpc3Rpbmctc2tpbGxdJykuY2hhbmdlKHRoaXMuX29uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFuZ2UgKGV2ZW50KSB7XG4gICAgdGhpcy5vYmplY3Quc2VsZWN0ZWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrU3VibWl0IChldmVudCkge1xuICAgIGlmICh0aGlzLm9iamVjdC5zZWxlY3RlZCA9PT0gJycpIHtcbiAgICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnZm9ybScpXG4gICAgICB0aGlzLm9iamVjdC5uYW1lID0gKG9iai5maW5kKCdpbnB1dFtuYW1lPW5ldy1za2lsbC1uYW1lXScpLnZhbCgpID8/ICcnKVxuICAgICAgdGhpcy5vYmplY3QuYmFzZVZhbHVlID0gKG9iai5maW5kKCdpbnB1dFtuYW1lPWJhc2UtdmFsdWVdJykudmFsKCkgPz8gJycpXG4gICAgfVxuICAgIGlmICh0aGlzLm9iamVjdC5zZWxlY3RlZCA9PT0gJycgJiYgdGhpcy5vYmplY3QubmFtZSA9PT0gJycpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICB0aGlzLm9iamVjdC5yZXNvbHZlKHtcbiAgICAgIHNlbGVjdGVkOiB0aGlzLm9iamVjdC5zZWxlY3RlZCxcbiAgICAgIG5hbWU6IHRoaXMub2JqZWN0Lm5hbWUsXG4gICAgICBiYXNlVmFsdWU6IHRoaXMub2JqZWN0LmJhc2VWYWx1ZVxuICAgIH0pXG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKHsgc2tpbGxzID0gW10sIGFsbG93Q3VzdG9tID0gZmFsc2UsIGZpeGVkQmFzZVZhbHVlID0gZmFsc2UsIHNwZWNpYWxpemF0aW9uTmFtZSA9ICcnLCBsYWJlbCA9ICcnLCBiYXNlVmFsdWUgPSBudWxsIH0gPSB7fSkge1xuICAgIGNvbnN0IHNlbGVjdCA9IFtdXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBza2lsbHMpIHtcbiAgICAgIHNlbGVjdC5wdXNoKHtcbiAgICAgICAgaWQ6IHNraWxsLmlkLFxuICAgICAgICBuYW1lOiBza2lsbC5uYW1lLFxuICAgICAgICBiYXNlOiBza2lsbC5zeXN0ZW0uYmFzZVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbmV3IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2coe1xuICAgICAgICBzcGVjaWFsaXphdGlvbk5hbWUsXG4gICAgICAgIGFsbG93Q3VzdG9tLFxuICAgICAgICBmaXhlZEJhc2VWYWx1ZSxcbiAgICAgICAgYWxsb3dTZWxlY3Q6IHNraWxscy5sZW5ndGggPiAwLFxuICAgICAgICBza2lsbHM6IHNlbGVjdCxcbiAgICAgICAgc2VsZWN0ZWQ6ICcnLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIGJhc2VWYWx1ZSxcbiAgICAgICAgcmVzb2x2ZVxuICAgICAgfSwge30pLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIFNraWxsVmFsdWVEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChuYW1lID0gbnVsbCwgYmFzZVZhbHVlID0gbnVsbCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtdmFsdWUuaHRtbCcsXG4gICAgICB7IGJhc2U6IGJhc2VWYWx1ZSwgbmFtZSB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFZhbHVlJywgeyBuYW1lIH0pLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2tpbGwtc2VsZWN0LWZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVUYXJnZXQgfSBmcm9tICcuL21lbGVlLXRhcmdldC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZVJlc29sdGlvbiB7XG4gIGNvbnN0cnVjdG9yIChcbiAgICBpbml0aWF0b3JNZXNzYWdlID0gbnVsbCxcbiAgICB0YXJnZXRNZXNzYWdlID0gbnVsbCxcbiAgICBtZXNzYWdlSWQgPSBudWxsXG4gICkge1xuICAgIHRoaXMuaW5pdGlhdG9yTWVzc2FnZSA9IGluaXRpYXRvck1lc3NhZ2VcbiAgICB0aGlzLnRhcmdldE1lc3NhZ2UgPSB0YXJnZXRNZXNzYWdlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgfVxuXG4gIGFzeW5jIHByZUNyZWF0ZU1lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgLy8gY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoe2FjdG9yOiB0aGlzLmFjdG9yfSk7XG4gICAgLy8gaWYoIHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZTtcblxuICAgIC8vIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXI7XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICAvLyBBZGQgaW1hZ2UgdG8gY2FyZC5cbiAgICAvLyBkYXRhLmZsYWdzID0ge1xuICAgIC8vICAgaW1nOiB0aGlzLmFjdG9yLmlzVG9rZW4gPyB0aGlzLmFjdG9yLnRva2VuLmRhdGEuaW1nOiB0aGlzLmFjdG9yLmltZ1xuICAgIC8vIH07XG5cbiAgICBjb25zdCByb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMocm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCByb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBjaGF0TWVzc2FnZS5pZFxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQodGhpcy50YXJnZXRNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXQpIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLnRhcmdldC5hY3RvcktleSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvciAoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhdG9yTWVzc2FnZSkge1xuICAgICAgcmV0dXJuIENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKHRoaXMuaW5pdGlhdG9yTWVzc2FnZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpbml0aWF0b3JUb2tlbiAoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhdG9yKSB7XG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5pbml0aWF0b3IuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyByZXNvbHZlICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHN3aXRjaCAodGhpcy50YXJnZXQuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxuICAgICAgICAgIGlmICh0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAncm9sbC1tZWxlZS1kYW1hZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWF0b3JNaXNzZWQnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAncm9sbC1tZWxlZS1kYW1hZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhcmdldC5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC5za2lsbC5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC5za2lsbC5uYW1lXG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdkb2RnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIFRPRE8gdmVyaWZpZXIgbGEgY29uZGl0aW9uIDw9IHZzIDxcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhcmdldC5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID49IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhcmdldC5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC5za2lsbC5kYXRhLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IDApIHtcbiAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICB9KVxuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhdG9yTWlzc2VkJywge1xuICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICB9KVxuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy53aW5uZXIpIHtcbiAgICAgIGlmICh0aGlzLndpbm5lci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2lubmVyLnJvbGwuY3JpdGljYWxEYW1hZ2UgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgaWYgKHRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgICBpZiAodGhpcy53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMud2lubmVyLnRva2VuLmRvY3VtbWVudFxuICAgICAgICBpZiAodGhpcy53aW5uZXIuYWN0b3IpIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy53aW5uZXIuYWN0b3JcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB0aGlzLndpbm5lciA/IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpIDogbnVsbFxuICAgICAgY29uc3QgdXNlciA9XG4gICAgICAgIHRoaXMud2lubmVyICYmIHRoaXMud2lubmVyLmFjdG9yLnVzZXJcbiAgICAgICAgICA/IHRoaXMud2lubmVyLmFjdG9yLnVzZXJcbiAgICAgICAgICA6IGdhbWUudXNlclxuXG4gICAgICBsZXQgbXNnXG4gICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgLy8gVE9ETzogSWYgY2FyZCBpc24ndCBmb3VuZCAoY2FyZCB3YXMgZGVsZXRlZCBiZWZvcmUgY29tcGxldGlvbikgP1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ1Jlc29saXRpb24gY2FyZCBtaXNzaW5nLCB3YXMgZGVsZXRlZCA/JylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoc3BlYWtlcikge1xuICAgICAgICBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgICAgLy8gVE9ETzogSWYgY2FyZCBpc24ndCBmb3VuZCAoY2FyZCB3YXMgZGVsZXRlZCBiZWZvcmUgY29tcGxldGlvbikgP1xuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgICAgc3BlYWtlcixcbiAgICAgICAgICBjb250ZW50OiBodG1sXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgICBjb250ZW50OiBodG1sXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmh0bWwnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9tZWxlZS1pbml0aWF0b3IuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVUYXJnZXQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gbnVsbFxuICAgIHRoaXMucGFyZW50TWVzc2FnZUlkID0gcGFyZW50TWVzc2FnZUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG5cbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMuZGlzYWR2YW50YWdlID0gZmFsc2VcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMuc2tpbGxJZCA9IG51bGxcbiAgICB0aGlzLml0ZW1JZCA9IG51bGxcbiAgICB0aGlzLmRvZGdpbmcgPSBmYWxzZVxuICAgIHRoaXMubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgdGhpcy5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgIHRoaXMubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGFjdGlvblNlbGVjdGVkICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5kb2RnaW5nIHx8XG4gICAgICB0aGlzLm5vdFJlc3BvbmRpbmcgfHxcbiAgICAgIHRoaXMuZmlnaHRpbmdCYWNrIHx8XG4gICAgICB0aGlzLm1hbmV1dmVyaW5nXG4gICAgKVxuICB9XG5cbiAgZ2V0IGFjdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZG9kZ2luZykgcmV0dXJuICdkb2RnZSdcbiAgICBpZiAodGhpcy5ub3RSZXNwb25kaW5nKSByZXR1cm4gJ25vUmVzcG9uc2UnXG4gICAgaWYgKHRoaXMuZmlnaHRpbmdCYWNrKSByZXR1cm4gJ2ZpZ2h0QmFjaydcbiAgICBpZiAodGhpcy5tYW5ldXZlcmluZykgcmV0dXJuICdtYW5ldXZlcidcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICB9XG5cbiAgc2V0IGluaXRpYXRvcktleSAoeCkge1xuICAgIHRoaXMuX2luaXRpYXRvcktleSA9IHhcbiAgICB0aGlzLnRhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBpbml0aWF0b3JLZXkgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAoIXRoaXMuX2luaXRpYXRvciAmJiB0aGlzLnBhcmVudE1lc3NhZ2VJZCkge1xuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5faW5pdGlhdG9yKSB0aGlzLl9pbml0aWF0b3JLZXkgPSB0aGlzLl9pbml0aWF0b3IuYWN0b3JLZXlcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGBObyBpbml0aWF0b3IgZm91bmQgZm9yIHRhcmdldCA6ICR7dGhpcy5hY3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pbml0aWF0b3JLZXlcbiAgfVxuXG4gIGdldCBpbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5pbml0aWF0b3JLZXkpIHtcbiAgICAgIGlmICh0aGlzLnBhcmVudE1lc3NhZ2VJZCkge1xuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgICApXG4gICAgICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgICB9IGVsc2UgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuaW5pdGlhdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCBtZWxlZUluaXRpYXRvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3IpIHtcbiAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIHRhcmdldC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUudGFyZ2V0JylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgdGFyZ2V0LnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZVxuXG4gICAgbGV0IHVzZXIgPSBnYW1lLnVzZXJcbiAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxldCBvd25lcnMgPSBbXVxuICAgICAgY29uc3QgZ21zID0gZ2FtZS51c2Vycy5maWx0ZXIoYSA9PiBhLmlzR00pLm1hcChhID0+IGEuaWQpXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFjdG9yLm93bmVyc2hpcCkpIHtcbiAgICAgICAgaWYgKHYgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVIpIHtcbiAgICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBvd25lcnMgPSBnYW1lLnVzZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWdtcy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgb3duZXJzLnB1c2goaylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBjb250ZW50ID0gJydcbiAgICAgIHN3aXRjaCAob3duZXJzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgLy8gR01cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKHR5cGVvZiBnYW1lLnVzZXJzLmdldChvd25lcnNbMF0pICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0JylcbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgICAgICAgIGZvciAoY29uc3QgayBvZiBvd25lcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBnYW1lLnVzZXJzLmdldChrKVxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgICAgY29udGVudCArXG4gICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICtcbiAgICAgICAgICAgICAgICBrICtcbiAgICAgICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICAgICAgdXNlci5uYW1lICtcbiAgICAgICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICAgICAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXNlciA9IHRoaXMuYWN0b3IudXNlclxuICAgIH1cblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZS5pZFxuICAgIHJldHVybiBtZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00gJiYgbWVzc2FnZS51c2VyLmlkICE9PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvSW50ZXJhY3RXaXRoQ2hhdENhcmQnKVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgYXN5bmMgZ2V0VXBkYXRlZENoYXRDYXJkICgpIHtcbiAgICByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKS50aGVuKGh0bWwgPT4ge1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNlbGVjdGVkIChjYXJkLCBldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBudWxsXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICBjaGVjay5hY3Rpb24gPSB0aGlzLmFjdGlvblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciAtPSAxXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaE5vUmVwb25zZVJlc3VsdCAoKSB7XG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSB0cnVlXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcblxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGFjdG9yS2V5ID0gY2FyZC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgY29uc3QgcGFyZW50TWVzc2FnZUlkID0gY2FyZC5kYXRhc2V0LnBhcmVudE1lc3NhZ2VJZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gY2FyZC5kYXRhc2V0LmZhc3RGb3J3YXJkID09PSAndHJ1ZSdcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQsIGZhc3RGb3J3YXJkKVxuXG4gICAgdGFyZ2V0LnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBjYXJkKVxuXG4gICAgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH0gZWxzZSB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkaWRuJ3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCwgQ29DN0RhbWFnZSB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlSW5pdGlhdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgdGhpcy5idXJzdCA9IGZhbHNlXG4gICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXG4gICAgdGhpcy50b2tlbktleSA9IG51bGxcbiAgICB0aGlzLmFpbWVkID0gZmFsc2VcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxuICAgIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIGZvciAoY29uc3QgdCBvZiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xuICAgICAgdGFyZ2V0LnRva2VuID0gdFxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgICAgdGFyZ2V0LmFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMudG9rZW4pIHRoaXMudG9rZW5LZXkgPSBhY3Rvci50b2tlbktleVxuICAgICAgaWYgKGl0ZW1JZCkge1xuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnNpbmdsZVNob3QpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuS2V5KSB7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5fdGFyZ2V0cykge1xuICAgICAgICBpZiAodC50b2tlbiAmJiB0aGlzLnRva2VuKSB7XG4gICAgICAgICAgdC5kaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UodC50b2tlbiwgdGhpcy50b2tlbilcbiAgICAgICAgICB0LnJvdW5kZWREaXN0YW5jZSA9IE1hdGgucm91bmQodC5kaXN0YW5jZS52YWx1ZSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICB0LmRpc3RhbmNlVW5pdCA9IHQuZGlzdGFuY2UudW5pdFxuICAgICAgICAgIGNvbnN0IGRpc3RJbllkID1cbiAgICAgICAgICAgIE1hdGgucm91bmQoY2hhdEhlbHBlci50b1lhcmRzKHQuZGlzdGFuY2UpICogMTAwKSAvIDEwMFxuICAgICAgICAgIC8vIGlmKCBkaXN0SW5ZZCl7XG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgICAgICAgIHQucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IHBiUmFuZ2VJbllkID1cbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDE1XG4gICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gcGJSYW5nZUluWWQpIHQucG9pbnRCbGFua1JhbmdlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy53ZWFwb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24ubG9uZ1JhbmdlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5sb25nUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2UgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xuICAgIH1cbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGFyZ2V0cykge1xuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcbiAgICB9XG4gIH1cblxuICBzaG90RGlmZmljdWx0eSAodCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0IHx8IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgIGlmICh0LmxvbmdSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZVxuICAgIH1cbiAgICBsZXQgbW9kaWZpZXIgPSB0YXJnZXQubW9kaWZpZXJcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfVxuXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gZGlmZmljdWx0eSkgZGlmZmljdWx0eU5hbWUgPSAnSGFyZCdcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdFeHRyZW1lJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnQ3JpdGljYWwnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0ltcG9zc2libGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBkaWZmaWN1bHR5LFxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXG4gICAgICBtb2RpZmllcixcbiAgICAgIGRhbWFnZSxcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9vdCBhdCB0aGUgYWN0aXZlIHRhcmdldC4gQWRkIGl0IHRvIHRoZSBsaXN0IG9mIHNob3RzLlxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxuICAgKi9cbiAgYWRkU2hvdEF0Q3VycmVudFRhcmdldCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXG4gICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgIGJ1bGxldHNTaG90VHJhbnNpdDogMSxcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcblxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2hvdCA9IHRoaXMuc2hvdHNbdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAyXVxuICAgICAgICBpZiAocHJldmlvdXNTaG90LmFjdG9yS2V5ICE9PSB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcbiAgICAgICAgICAgIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHByZXZpb3VzU2hvdC5hY3RvcktleSksXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSlcbiAgICAgICAgICApXG4gICAgICAgICAgc2hvdC50cmFuc2l0QnVsbGV0cyA9IE1hdGguZmxvb3IoY2hhdEhlbHBlci50b1lhcmRzKGRpc3RhbmNlKSlcbiAgICAgICAgICBpZiAoc2hvdC50cmFuc2l0QnVsbGV0cyA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XG4gICAgICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgICAgICAgIHNob3QudHJhbnNpdCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHRoaXMudm9sbGV5U2l6ZVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90ID49IGJ1bGxldExlZnQgJiYgIXRoaXMuaWdub3JlQW1tbykge1xuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgfVxuICAgICAgLy8gYnVsbGV0c1Nob3RUcmFuc2l0IGlzIGZvciBsb2NhbGl6aW5nIENvQzcuU2hvdEJ1bGxldHMgdXNpbmcgcGFyYW1ldGVycywgbG9jYWxpemUgZG9lcyBub3QgYWNjZXB0IGFkZGluZyBhIHBhcmFtZXRlciBhcyBhIHN1bSBvZiBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0cywgc28gSSBjcmVhdGUgYSBuZXcgdmFsdWUgaW4gYWR2YW5jZSB0byB1c2UgaW5zdGVhZFxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgIH1cbiAgICBpZiAodGhpcy5idXJzdCkge1xuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XG5cbiAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9yYW5nZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcbiAgICAvLyBjb25zdCB0YXJnZXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFyZ2V0VGVzdCcpO1xuICAgIC8vIHRoaXMudGFyZ2V0LmF0dGFjaFRvRWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdzaW5nbGVTaG90JyB8fFxuICAgICAgZmxhZyA9PT0gJ211bHRpcGxlU2hvdHMnIHx8XG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXG4gICAgKSB7XG4gICAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKGZsYWcgPT09ICdmdWxsQXV0bycpIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdidXJzdCcpIHtcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgdGhpcy5idXJzdCA9ICF0aGlzLmJ1cnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVDYXJkICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgbGV0IHdlYXBvbk1hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KHRoaXMuc2hvdHNbaW5kZXhdKVxuICAgICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKFxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS50cmFuc2l0QnVsbGV0cylcbiAgICAgICAgKVxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICB3ZWFwb25NYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpbmRleCsrXG4gICAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KClcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cbiAgICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICAgIHRhcmdldDogdGhpcy5hY3RpdmVUYXJnZXQsXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICAgIGFjdG9yTmFtZTogdGhpcy5hY3RpdmVUYXJnZXQubmFtZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgICAgZGFtYWdlOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5kYW1hZ2UsXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcbiAgICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoYnVsbGV0RmlyZWQpXG5cbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2hvdFxuICAgICAgPyB0aGlzLmdldFRhcmdldEZyb21LZXkoc2hvdC5hY3RvcktleSlcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmFjdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBpZiAodGhpcy5hdXRvRmlyZSkgY2hlY2suc2tpbGwgPSB0aGlzLmF1dG9XZWFwb25Ta2lsbFxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gc2hvdC5kaWZmaWN1bHR5XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcbiAgICAgIGlmICh0aGlzLmFpbWluZykge1xuICAgICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWxcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXG4gICAgfVxuXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxuICAgIGNoZWNrLnRhcmdldEtleSA9IHRhcmdldC5hY3RvcktleVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBjaGFuZ2VWb2xsZXlTaXplICh4KSB7XG4gICAgdGhpcy52b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplICsgeFxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5yYW5nZS5pbml0aWF0b3InKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1mbGFnJykpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0JylcbiAgICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQudGFyZ2V0S2V5KVxuICAgICAgICBpbml0aWF0b3IudGFyZ2V0c1trZXldLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgfSBlbHNlIGluaXRpYXRvci50b2dnbGVGbGFnKGNhbWVsRmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgcGFzc1JvbGwgKHJvbGxJbmRleCkge1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQocm9sbC5sdWNrTmVlZGVkKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZG9lcyBub3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IHJvbGwuZGlmZmljdWx0eVxuICAgIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKHJvbGxJbmRleCwgdXBncmFkZWluZGV4KSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBjb25zdCByb2xsID0gdGhpcy5yb2xsc1tyb2xsSW5kZXhdXG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHJvbGwuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZG9lcyBub3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLm5ld1N1Y2Nlc3NMZXZlbClcbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmIChyb2xsLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSByb2xsLmlzU3VjY2VzcyA9IHRydWVcbiAgICByb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcigpXG4gICAgcmFuZ2VJbml0aWF0b3IuX3RhcmdldHMgPSBbXVxuICAgIGlmIChtZXNzYWdlSWQpIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGVsc2UgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyYW5nZUluaXRpYXRvciwgY2FyZClcbiAgICBjb25zdCBjYXJkVGFyZ2V0cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXG4gICAgZm9yIChjb25zdCB0IG9mIGNhcmRUYXJnZXRzKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBDb0M3UmFuZ2VUYXJnZXQuZ2V0RnJvbUVsZW1lbnQodClcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnRhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuXG4gICAgY29uc3QgY2FyZFNob3RzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvdCcpXG4gICAgaWYgKGNhcmRTaG90cykge1xuICAgICAgZm9yIChjb25zdCBzIG9mIGNhcmRTaG90cykge1xuICAgICAgICBjb25zdCBzaG90ID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChzaG90LCBzKVxuICAgICAgICByYW5nZUluaXRpYXRvci5zaG90cy5wdXNoKHNob3QpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIGVsc2Uge1xuICAgIC8vICBjb25zdCBzaG90ID0ge1xuICAgIC8vICAgICAgc2hvdE9yZGVyOiAwLFxuICAgIC8vICAgICAgYWN0b3JLZXk6IG51bGwsXG4gICAgLy8gICAgICBhY3Rvck5hbWU6ICdkdW1teSdcbiAgICAvLyAgfVxuICAgIC8vIH1cblxuICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzID0gW11cbiAgICBjb25zdCByb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnJvbGwtcmVzdWx0JylcbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyKVxuICAgICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMucHVzaChyb2xsKVxuICAgIH1cblxuICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgZGFtYWdlUm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW1hZ2UtcmVzdWx0cycpXG4gICAgZm9yIChjb25zdCBkciBvZiBkYW1hZ2VSb2xscykge1xuICAgICAgY29uc3QgZGFtYWdlUm9sbCA9IENvQzdEYW1hZ2UuZ2V0RnJvbUVsZW1lbnQoZHIpXG4gICAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UucHVzaChkYW1hZ2VSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZUluaXRpYXRvclxuICB9XG5cbiAgYXN5bmMgcm9sbERhbWFnZSAoKSB7XG4gICAgdGhpcy5kYW1hZ2UgPSBbXVxuICAgIGNvbnN0IGhpdHMgPSB0aGlzLnN1Y2Nlc3NmdWxIaXRzXG5cbiAgICAvLyBsZXQgdm9sbGV5U2l6ZSA9IDE7XG4gICAgLy8gaWYoIHRoaXMuZnVsbEF1dG8pIHtcbiAgICAvLyAgdm9sbGV5U2l6ZSA9IHRoaXMudm9sbGV5U2l6ZTtcbiAgICAvLyAgaWYodm9sbGV5U2l6ZSA8IDMpIHZvbGxleVNpemUgPSAzO1xuICAgIC8vIH1cbiAgICAvLyBpZiggdGhpcy5idXJzdCkgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaCA9IGhpdHNbaV1cbiAgICAgIGNvbnN0IHZvbGxleVNpemUgPSBwYXJzZUludChoLnNob3QuYnVsbGV0c1Nob3QpXG4gICAgICBjb25zdCBkYW1hZ2VSb2xscyA9IFtdXG5cbiAgICAgIGlmICh2b2xsZXlTaXplID4gMCkge1xuICAgICAgICBsZXQgZGFtYWdlRm9ybXVsYSA9IFN0cmluZyhoLnNob3QuZGFtYWdlKVxuICAgICAgICBpZiAoIWRhbWFnZUZvcm11bGEgfHwgZGFtYWdlRm9ybXVsYSA9PT0gJycpIGRhbWFnZUZvcm11bGEgPSAnMCdcbiAgICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXG4gICAgICAgIGNvbnN0IG1heERhbWFnZSA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpLmV2YWx1YXRlKHtcbiAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICB9KS50b3RhbFxuICAgICAgICBjb25zdCBjcml0aWNhbERhbWFnZUZvcm11bGEgPSB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICAgICAgICA/IGAke2RhbWFnZUZvcm11bGF9ICsgJHttYXhEYW1hZ2V9YFxuICAgICAgICAgIDogYCR7bWF4RGFtYWdlfWBcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VEaWUgPSBDb0M3RGFtYWdlLmdldE1haW5EaWUoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuXG4gICAgICAgIGxldCBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICBsZXQgc3VjY2Vzc2Z1bFNob3RzID0gMFxuICAgICAgICBsZXQgY3JpdGljYWwgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5mdWxsQXV0byB8fCB0aGlzLmJ1cnN0KSB7XG4gICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gTWF0aC5mbG9vcih2b2xsZXlTaXplIC8gMilcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VjY2Vzc2Z1bFNob3RzID09PSAwKSBzdWNjZXNzZnVsU2hvdHMgPSAxXG4gICAgICAgIGlmIChoLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSBzdWNjZXNzZnVsU2hvdHNcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplIC0gaW1wYWxpbmdTaG90c1xuICAgICAgICAgIGNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgIT09IGgucm9sbC5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPD0gaC5yb2xsLmRpZmZpY3VsdHkgfHxcbiAgICAgICAgICAgICAgaC5zaG90LmV4dHJlbWVSYW5nZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemVcbiAgICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICAgICAgICBjcml0aWNhbCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3VjY2Vzc2Z1bFNob3RzOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogZGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBkYW1hZ2VEaWUsXG4gICAgICAgICAgICBjcml0aWNhbDogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW1wYWxpbmdTaG90czsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChjcml0aWNhbERhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogY3JpdGljYWxEYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXG4gICAgICAgICAgICBkaWU6IGNyaXRpY2FsRGFtYWdlRGllLFxuICAgICAgICAgICAgY3JpdGljYWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YXJnZXROYW1lID0gJ2R1bW15J1xuICAgICAgICBsZXQgdGFyZ2V0ID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoaC5yb2xsLnRhcmdldEtleSlcbiAgICAgICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICBpZiAodGFyZ2V0KSB0YXJnZXROYW1lID0gdGFyZ2V0Lm5hbWVcblxuICAgICAgICB0aGlzLmRhbWFnZS5wdXNoKHtcbiAgICAgICAgICB0YXJnZXRLZXk6IGgucm9sbC50YXJnZXRLZXksXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICByb2xsczogZGFtYWdlUm9sbHMsXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgY3JpdGljYWwsXG4gICAgICAgICAgZGVhbHQ6IGZhbHNlLFxuICAgICAgICAgIHJlc3VsdFN0cmluZzogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5yYW5nZUNvbWJhdERhbWFnZScsIHtcbiAgICAgICAgICAgIG5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYW1hZ2VSb2xsZWQgPSB0aGlzLmRhbWFnZS5sZW5ndGggIT09IDBcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKCkge1xuICAgIGZvciAobGV0IGRJbmRleCA9IDA7IGRJbmRleCA8IHRoaXMuZGFtYWdlLmxlbmd0aDsgZEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKGFjdG9yID09PSBudWxsKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVGFyZ2V0VG9EYW1hZ2UnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbiA9IDBcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkID0gMFxuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBySW5kZXggPSAwO1xuICAgICAgICAgIHJJbmRleCA8IHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHMubGVuZ3RoO1xuICAgICAgICAgIHJJbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGRlYWx0QW1vdW50ID0gYXdhaXQgYWN0b3IuZGVhbERhbWFnZShcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gKz0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udGFrZW4gPSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS5hYnNvcmJlZCA9XG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWwgLSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCArPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLmRlYWx0ID0gdHJ1ZVxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcucmFuZ2VDb21iYXREYW1hZ2VBcm1vcicsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXROYW1lLFxuICAgICAgICAgICAgdG90YWw6IHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbixcbiAgICAgICAgICAgIGFybW9yOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWRcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VEZWFsdCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlVGFyZ2V0IHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuY292ZXIgPSBmYWxzZVxuICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICB0aGlzLmJhc2VSYW5nZSA9IHRydWVcbiAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuaW5NZWxlZSA9IGZhbHNlXG4gIH1cblxuICBnZXQgYmlnICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9iaWcpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX2JpZyA9IHRoaXMuYWN0b3IuYnVpbGQgPj0gNFxuICAgICAgZWxzZSB0aGlzLl9iaWcgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYmlnXG4gIH1cblxuICBzZXQgYmlnIChiKSB7XG4gICAgdGhpcy5fYmlnID0gYlxuICB9XG5cbiAgZ2V0IHNtYWxsICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zbWFsbCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5idWlsZCkgdGhpcy5fc21hbGwgPSB0aGlzLmFjdG9yLmJ1aWxkIDw9IC0yXG4gICAgICBlbHNlIHRoaXMuX3NtYWxsID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NtYWxsXG4gIH1cblxuICBzZXQgc21hbGwgKGIpIHtcbiAgICB0aGlzLl9zbWFsbCA9IGJcbiAgfVxuXG4gIGdldCBub3JtYWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5iaWcgJiYgIXRoaXMuc21hbGxcbiAgfVxuXG4gIHNldCBub3JtYWwgKGIpIHtcbiAgICB0aGlzLl9iaWcgPSBmYWxzZVxuICAgIHRoaXMuX3NtYWxsID0gZmFsc2VcbiAgfVxuXG4gIGdldCBpc0Zhc3QgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IubW92KSByZXR1cm4gdGhpcy5hY3Rvci5tb3YgPj0gOFxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGZhc3QgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2Zhc3QpIHtcbiAgICAgIC8vIGlmKCB0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IubW92KSB0aGlzLl9mYXN0ID0gdGhpcy5hY3Rvci5tb3YgPj0gODtcbiAgICAgIC8vIGVsc2UgdGhpcy5fZmFzdCA9IGZhbHNlO1xuICAgICAgdGhpcy5fZmFzdCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9mYXN0XG4gIH1cblxuICBzZXQgZmFzdCAoYikge1xuICAgIHRoaXMuX2Zhc3QgPSBiXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yS2V5ICYmICF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiAnRHVtbXknXG4gIH1cblxuICBnZXQgaW1nICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgaWYgKHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuLmRvY3VtZW50Py50ZXh0dXJlLnNyY1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuZGF0YS5pbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5fdG9rZW4gJiYgdGhpcy5hY3RvcktleSkge1xuICAgICAgdGhpcy5fdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdG9rZW5cbiAgfVxuXG4gIGdldCBzaXplVGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuYmlnKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5CaWdUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIGlmICh0aGlzLnNtYWxsKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5TbWFsbFRhcmdldFRpdGxlJylcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0VGl0bGUnKVxuICB9XG5cbiAgZ2V0IHNpemVMYWJlbCAoKSB7XG4gICAgaWYgKHRoaXMuYmlnKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5CaWdUYXJnZXQnKVxuICAgIGlmICh0aGlzLnNtYWxsKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmNvbWJhdENhcmQuU21hbGxUYXJnZXQnKVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldCcpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgaWYgKHRoaXMuYmFzZVJhbmdlIHx8IHRoaXMucG9pbnRCbGFua1JhbmdlKSB7XG4gICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmxvbmdSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmV4dHJlbWVSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgbGV0IG1vZGlmaWVyID0gMFxuICAgIGlmICh0aGlzLmNvdmVyKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucG9pbnRCbGFua1JhbmdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZmFzdCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnNtYWxsKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuYmlnKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuaW5NZWxlZSkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgbW9kaWZpZXIrK1xuICAgIHJldHVybiBtb2RpZmllclxuICB9XG5cbiAgc2V0IHRva2VuICh0KSB7XG4gICAgdGhpcy5fdG9rZW4gPSB0XG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgZWxlbWVudClcbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBzdGF0aWMgY2hhbmdlRGlzcGxheWVkVGFyZ2V0IChldmVudCkge1xuICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1zZWxlY3RvcicpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHRhcmdldHMgPSB0YXJnZXRTZWxlY3Rvci5jbG9zZXN0KCcudGFyZ2V0cycpXG4gICAgY29uc3QgdGFyZ2V0TGlzdCA9IHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXG4gICAgcmV0dXJuIHRhcmdldExpc3RcbiAgfVxuXG4gIGF0dGFjaFRvRWxlbWVudCAoZWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGVsZW1lbnQpXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnKSB7XG4gICAgaWYgKFxuICAgICAgZmxhZyA9PT0gJ2Jhc2VSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdsb25nUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnZXh0cmVtZVJhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ3BvaW50QmxhbmtSYW5nZSdcbiAgICApIHtcbiAgICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMuYmFzZVJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMubG9uZ1JhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMub3V0T2ZSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzW2ZsYWddID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJ3NpemUnKSB7XG4gICAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYmlnKSB7XG4gICAgICAgIHRoaXMuc21hbGwgPSBmYWxzZVxuICAgICAgICB0aGlzLmJpZyA9IGZhbHNlXG4gICAgICB9IGVsc2UgdGhpcy5zbWFsbCA9IHRydWVcbiAgICB9IGVsc2UgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gICAgaWYgKGZsYWcgPT09ICdmYXN0JyAmJiB0aGlzLmZhc3QgJiYgIXRoaXMuaXNGYXN0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2FybkZhc3RUYXJnZXRXaXRoV3JvbmdNT1YnLCB7XG4gICAgICAgICAgbW92OiB0aGlzLmFjdG9yLm1vdlxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgZ2FtZSwgVG9rZW4sIHRva2VuRGF0YSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ29DN1JvbGwsIGNoYXRIZWxwZXIsIGlzQ3RybEtleSB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4vY2hhdC9kYW1hZ2VjYXJkcy5qcyc7XG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuXG5jb25zdCBDSEFUX0NPQzdfTUVTU0FHRSA9IHtcbiAgRkFLRVJPTEw6XG4gICAgJzxkaXYgY2xhc3M9XCJkaWNlLXJvbGxcIj48ZGl2IGNsYXNzPVwiZGljZS1yZXN1bHRcIj48ZGl2IGNsYXNzPVwiZGljZS1mb3JtdWxhXCI+Pz8/PC9kaXY+PGg0IGNsYXNzPVwiZGljZS10b3RhbFwiPj88L2g0PjwvZGl2PjwvZGl2Pidcbn1cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdCB7XG4gIHN0YXRpYyByZW5kZXJDaGF0TWVzc2FnZUhvb2sgKGNoYXRNZXNzYWdlLCBodG1sKSB7XG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnR01TZWxmUm9sbCcpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuZmxhdm9yLXRleHQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwiZmxhdm9yLXRleHRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlJvbGxTZWNyZXREaWNlJ1xuICAgICAgICAgICl9PC9zcGFuPmBcbiAgICAgICAgKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGVudFwiPiR7Q0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTEx9PC9kaXY+YFxuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAncmVtb3ZlV2lzcGVyVGFyZ2V0cycpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnZmFrZVJvbGwnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5LZWVwZXJTZW50RGVjb3knKSlcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZha2VSb2xsTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsU2VjcmV0RGljZScpLFxuICAgICAgd2hpc3BlcjogZ2FtZS51c2Vycy5wbGF5ZXJzLFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVIsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgR01TZWxmUm9sbDogZmFsc2UsXG4gICAgICAgICAgcmVtb3ZlV2lzcGVyVGFyZ2V0czogdHJ1ZSxcbiAgICAgICAgICBmYWtlUm9sbDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogQ0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTExcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICAvLyBUT0RPIHJlbXBsYWNlciBsZXMgZ2V0RWxlbWVudHNCeXh4eHggcGFyIHF1ZXJ5U2VsZWN0b3JcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBJbml0IHNvY2tldHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIHJlYWR5ICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQucmVhZHknKTtcbiAgICBnYW1lLkNvQzcgPSAnaW5pdCdcbiAgfVxuXG4gIC8vIHN0YXRpYyBvbk1lc3NhZ2UoIGRhdGEpIHtcbiAgLy8gIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5vbk1lc3NhZ2UnKTtcbiAgLy8gIGNvbnNvbGUubG9nKGBtZXNzYWdlIHJlY2VpdmVkIHNlbmQmZXIgOiR7ZGF0YS51c2VyfSBtZXNzYWdlIHR5cGUgOiAke2RhdGEuYWN0aW9ufSBmb3IgbWVzc2FnZSA6JHtkYXRhLm1lc3NhZ2VJZH1gKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAgICogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBhc3luYyBjaGF0TGlzdGVuZXJzIChhcHAsIGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC1idXR0b25zIGJ1dHRvbicsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbi5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJywgQ29DN0NoYXQuX29uQ2hhdENhcmRUZXN0LmJpbmQodGhpcykpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5jYXJkLXRpdGxlJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yYWRpby1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5wYW5lbC1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5zaW1wbGUtZmxhZycsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy52b2xsZXktc2l6ZScsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVm9sbGV5U2l6ZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRyb3Bkb3duLWVsZW1lbnQnLFxuICAgICAgQ29DN0NoYXQuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuc2ltcGxlLXRvZ2dsZScsIENvQzdDaGF0Ll9vblRvZ2dsZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmlzLW91dG51bWJlcmVkJywgQ29DN0NoYXQuX29uT3V0bnVtYmVyZWRTZWxlY3RlZC5iaW5kKHRoaXMpKTtcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy50YXJnZXQtc2VsZWN0b3InLCBDb0M3Q2hhdC5fb25UYXJnZXRTZWxlY3QuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdjbGljaycsICdjb2M3LWlubGluZS1yZXN1bHQnLCBDb0M3Q2hhdC5fb25JbmxpbmUuYmluZCh0aGlzKSlcblxuICAgIC8vIFJvbGxDYXJkLmJpbmRMaXN0ZXJuZXJzKCBodG1sKTtcbiAgICBPcHBvc2VkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gICAgQ29tYmluZWRDaGVja0NhcmQuYmluZExpc3Rlcm5lcnMoaHRtbClcbiAgfVxuXG4gIHN0YXRpYyBfb25PcGVuQWN0b3IgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGFjdG9yS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgaWYgKGFjdG9yS2V5KSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3Rvci5pc093bmVyKSBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25VcGRhdGVDaGF0TWVzc2FnZSAoY2hhdE1lc3NhZ2UpIHtcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXG5cbiAgICAvLyBpZiggY2hhdE1lc3NhZ2UuZ2V0RmxhZyggJ0NvQzcnLCAncmV2ZWxlZCcpKXtcbiAgICAvLyB9XG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNoYXRNZXNzYWdlLnR5cGUgPT09IDApIHtcbiAgICAgIGNvbnN0IGNhcmQgPSAkKGNoYXRNZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5yZXNvbHZlZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC50YXJnZXRDYXJkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgaW5pdGlhdG9yLnRhcmdldENhcmRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAodGFyZ2V0LnJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQubWVzc2FnZUlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0LnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIGF3YWl0IGluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKGluaXRpYXRvci5yZXNvbHV0aW9uQ2FyZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYXRvci5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKGNoYXRNZXNzYWdlLmlkKVxuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICB0YXJnZXQucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgdGFyZ2V0LnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgIGlmICghdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVuZGVyTWVzc2FnZUhvb2sgKG1lc3NhZ2UsIGh0bWwpIHtcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXG5cbiAgICBJbnRlcmFjdGl2ZUNoYXRDYXJkLmJpbmRMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmIChtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcpKSB7XG4gICAgICBodG1sLmZpbmQoJy5kaWNlLXJvbGwnKS5yZW1vdmVDbGFzcygnZ20tdmlzaWJsZS1vbmx5JylcbiAgICAgIGh0bWxbMF0uZGF0YXNldC5jaGVja1JldmVhbGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzaG93aW5nIGRyb3Bkb3duIHNlbGVjdGlvblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGJ0bicpXG4gICAgICAuY2xpY2soZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5jbG9zZXN0KCcuZHJvcGRvd24nKVxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgICAgKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgLy8gY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi0tPkNvQzdDaGF0Lm1lc3NhZ2VMaXN0ZW5lcnMgbWVzc2FnZSA6JyArIG1lc3NhZ2UuaWQpO1xuICAgIC8vIG1lc3NhZ2UuZGF0YS5jb250ZW50ID0gXCJcIjtcbiAgICAvLyBkYXRhLm1lc3NhZ2UuY29udGVudCA9IFwiXCI7XG5cbiAgICAvLyBXaGVuIGEgbmV3IGNhcmQgaXMgcHVibGlzaGVkLCBjaGVjayB3ZXRoZXIgaXQncyBhIHJvbGwgdGhhdCBtb2RpZmllcyBhbiBvdGhlciBjYXJkLlxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgY2FyZCA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNvYzcuY2hhdC1jYXJkJylcbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgJiZcbiAgICAgICAgICAhKGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPT09ICd0cnVlJykgJiZcbiAgICAgICAgICBjYXJkLmRhdGFzZXQucmVmTWVzc2FnZUlkXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChjYXJkKVxuXG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAndGFyZ2V0Jykge1xuICAgICAgICAgICAgcm9sbC5kZWZlbmRhbnRJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICdpbml0aWF0b3InKSB7XG4gICAgICAgICAgICByb2xsLmluaXRpYXRvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAndHJ1ZSdcblxuICAgICAgICAgIENvQzdDaGF0LnVwZGF0ZUNvbWJhdENhcmRUYXJnZXQocm9sbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJPbmx5ID0gaHRtbC5maW5kKCcudGFyZ2V0LW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB1c2VyT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgY29uc3QgYWN0b3JJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdG9yLWlkJylcbiAgICAgICAgaWYgKGFjdG9ySWQpIHtcbiAgICAgICAgICBpZiAoZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpLmlzT3duZXIpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnbU9ubHkgPSBodG1sLmZpbmQoJy5nbS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2YgZ21Pbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLnVzZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgdXNlclZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IGdtVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5nbS12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiBnbVZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoIShnYW1lLnVzZXIuaXNHTSB8fCAoZ2FtZS51c2VyLmlzVHJ1c3RlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0cnVzdGVkQ2FuU2VlQ2hhdENhcmQnKSkpKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBvd25lclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcub3duZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJWaXNpYmxlT25seSkge1xuICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5kYXRhc2V0Py5hY3RvcktleSkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgIH1cblxuICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxuICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICB9XG5cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvLyBHTSBjYW4gc2VlIGV2ZXJ5dGhpbmdcbiAgICAgIGNvbnN0IG93bmVyT25seSA9IGh0bWwuZmluZCgnLm93bmVyLW9ubHknKVxuICAgICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyT25seSkge1xuICAgICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuZGF0YXNldD8uYWN0b3JLZXkgfHwgem9uZS5kYXRhc2V0Py5hY3RvcklkXG4gICAgICAgICkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLWFjdG9yLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLWFjdG9yLWtleVxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLXRva2VuLWtleVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgICBpZiAoKGFjdG9yICYmICFhY3Rvci5pc093bmVyKSB8fCAoIWFjdG9yICYmICFnYW1lLnVzZXIuaXNHTSkpIHtcbiAgICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcbiAgICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICAgIH1cblxuICAgICAgY29uc3QgZ21TZWxlY3RPbmx5ID0gaHRtbC5maW5kKCcuZ20tc2VsZWN0LW9ubHknKVxuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzVHJ1c3RlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcpKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdCBvZiBnbVNlbGVjdE9ubHkpIHtcbiAgICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKVxuICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdzaW1wbGUtZmxhZycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGFjdGlvblR5cGVTdHJpbmcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmaWdodEJhY2s6ICdDb0M3LmZpZ2h0QmFjaycsXG4gICAgICBtYW5ldXZlcjogJ0NvQzcubWFuZXV2ZXInLFxuICAgICAgZG9kZ2luZzogJ0NvQzcuZG9kZ2UnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9vblRhcmdldFNlbGVjdCAoZXZlbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXkpXG4gICAgY29uc3QgdGFyZ2V0c1NlbGVjdG9yID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0cy1zZWxlY3RvcicpXG4gICAgZm9yIChjb25zdCBpIG9mIHRhcmdldHNTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSkge1xuICAgICAgaS5zdHlsZS5ib3JkZXIgPSAnbm9uZSdcbiAgICB9XG4gICAgdGFyZ2V0c1NlbGVjdG9yXG4gICAgICAucXVlcnlTZWxlY3RvcihgW2RhdGEta2V5PVwiJHtpbmRleH1cIl1gKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgIzAwMCdcbiAgICBjb25zdCB0YXJnZXRzID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0cycpXG4gICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpKSB7XG4gICAgICB0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIHQuZGF0YXNldC5hY3RpdmUgPSAnZmFsc2UnXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldFRvRGlzcGxheSA9IHRhcmdldHMucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS10YXJnZXQta2V5PVwiJHtpbmRleH1cIl1gXG4gICAgKVxuICAgIHRhcmdldFRvRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIHRhcmdldFRvRGlzcGxheS5kYXRhc2V0LmFjdGl2ZSA9ICd0cnVlJ1xuICAgIC8vIGNvbnN0IGNoYXRDYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkLnJhbmdlJyk7XG4gICAgLy8gY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoIGNoYXRDYXJkKTtcbiAgfVxuXG4gIHN0YXRpYyBfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjbGVhciBhbGwgZHJvcCBkb3duIGFuZCBoaWdobGlnaHQgdGhpcyBwYXJ0aWN1bGFyIG9uZVxuICAgIGNvbnN0IGRyb3BEb3duQm94ZXMgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLnJlc3BvbnNlLXNlbGVjdGlvbicpXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgIGZvciAoY29uc3QgZHBkbkJveCBvZiBkcm9wRG93bkJveGVzKSB7XG4gICAgICBkcGRuQm94LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJylcblxuICAgIC8vIGNsb3NlIGRyb3Bkb3duXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuXG4gICAgLy8gRGlzcGxheSB0aGUgcm9sbCBidXR0b25cbiAgICBjb25zdCBzZWxlY3RlZEJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWFjdGlvbicpXG4gICAgc2VsZWN0ZWRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICBjb25zdCBidXR0b24gPSBzZWxlY3RlZEJveC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIElkIC0gQnVpbGQgY2FuIGJlIHJldHJpZXZlZCBmcm9tIHRoYXRcblxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBpdGVtXG5cbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgSWRcblxuICAgIC8vIFBhc3MgdGhlIGRlZmVuZGFudCBhY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuZGVmZW5kZXJDaG9pY2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxWYWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZVxuICAgIGJ1dHRvbi5kYXRhc2V0Lml0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25JZFxuICAgIGJ1dHRvbi5kYXRhc2V0Lml0ZW1OYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbk5hbWVcblxuICAgIC8vIFB1dCBzb21lIHRleHQgaW4gdGhlIGJ1dHRvblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICAgICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWV9ICgke1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgICAgIH0lKWBcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbk5hbWV9ICgke1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgICAgIH0lKWBcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgLy8gU2F2ZSBhY3Rpb24gZm9yIHRoZSByb2xsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uSW5saW5lIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmxpbmUtcmVzdWx0JykpIHtcbiAgICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9jb2xsYXBzZUlubGluZVJlc3VsdChhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fZXhwYW5kSW5saW5lUmVzdWx0KGEpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9vblRvZ2dsZVNlbGVjdGVkIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVTZWxlY3RlZChjYXJkLCBldmVudClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZCA9PT0gJycpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTm9Eb2RnZVNraWxsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjbGVhciBhbGwgZHJvcCBkb3duIGFuZCBoaWdobGlnaHQgdGhpcyBwYXJ0aWN1bGFyIG9uZVxuICAgIGNvbnN0IGRyb3BEb3duQm94ZXMgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLnJlc3BvbnNlLXNlbGVjdGlvbicpXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgIGZvciAoY29uc3QgZHBkbkJveCBvZiBkcm9wRG93bkJveGVzKSB7XG4gICAgICBkcGRuQm94LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpIC8vIE5lZWQgdG8gdGVzdCBpZiBpdCdzIHJlYWxseSBhIGRvZGdlICEhIVxuXG4gICAgLy8gU2F2ZSBhY3Rpb24gZm9yIHRoZSByb2xsXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9ICdkb2RnaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcblxuICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWV9ICgke1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICB9JSlgXG4gIH1cblxuICBzdGF0aWMgX29uQ2hhdENhcmRSYWRpb1N3aXRjaCAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaCcpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvcHRpb25MaXN0ID1cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyYWRpby1zd2l0Y2gnKVxuICAgIGxldCBpbmRleFxuICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gb3B0aW9uTGlzdFtpbmRleF1cbiAgICAgIGlmIChlbGVtZW50LmRhdGFzZXQucHJvcGVydHkgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5zZWxlY3RlZCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFZvbGxleVNpemUgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgY29uc3QgcmFuZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5jcmVhc2UnKSkge1xuICAgICAgICAgIHJhbmdlQ2FyZC5jaGFuZ2VWb2xsZXlTaXplKDEpXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgtMSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgQ29DN01lbGVlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdSYW5nZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlJykpIHtcbiAgICAgIC8vIENvQzdJdGVtLnVwZGF0ZUNhcmRTd2l0Y2goIGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpKSB7XG4gICAgICBDb0M3Q2hlY2sudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBpZiBkYXRhc2V0Lm9iamVjdCBpcyB0aGVyZSA9PiBuZWVkIHRvIHVuZXNjYXBlIHRoaW5ncyAhIVxuICAgIC8vIGlmIG5vdCB1c2UgdGhlIGRhdGFzZXQgZGlyZWN0bHkuXG4gICAgY29uc3QgY2FyZERhdGEgPSBjYXJkLmRhdGFzZXQub2JqZWN0XG4gICAgICA/IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgICA6IGNhcmQuZGF0YXNldFxuXG4gICAgaWYgKGNhcmREYXRhLmFjdG9yS2V5KSByZXR1cm4gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShjYXJkRGF0YS5hY3RvcktleSlcblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGNvbnN0IHRva2VuS2V5ID0gY2FyZERhdGEudG9rZW5JZFxuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IgfHwgbmV3IFRva2VuKHRva2VuRGF0YSkuYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmREYXRhLmFjdG9ySWRcbiAgICBpZiAoYWN0b3JJZCkgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgaWYgKGNoYXRNZXNzYWdlLnVzZXIpIHJldHVybiBjaGF0TWVzc2FnZS51c2VyLmNoYXJhY3RlclxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgaXNDYXJkT3duZXIgKGNhcmQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICByZXR1cm4gY2hhdE1lc3NhZ2Uub3dubmVyIHx8IGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgX2dldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tVG9rZW4gKHRva2VuS2V5KSB7XG4gICAgY29uc3QgdG9rZW4gPSBDb0M3Q2hhdC5nZXRUb2tlbih0b2tlbktleSlcbiAgICByZXR1cm4gdG9rZW4gPyB0b2tlbi5hY3RvciA6IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRUb2tlbiAodG9rZW5LZXkpIHtcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIGNvbnN0IHRva2VuRG9jID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdPy50b2tlblxuICAgICAgICByZXR1cm4gdG9rZW5Eb2Mub2JqZWN0IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIHVwZGF0ZSBhIGNoYXQgbWVzc2FnZSB3aXRoIGEgbmV3IEhUTUwgY29udGVudCBhbmQgcG9wdWxhdGUgaXQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoY2FyZCwgbWVzc0lkID0gbnVsbCkge1xuICAgIGNvbnN0IG1lc3NhZ2VJZCA9XG4gICAgICBtZXNzSWQgPT0gbnVsbCA/IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG1lc3NJZFxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGNhcmQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkQWN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbicpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gYnV0dG9uLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3Qgb3JpZ2luTWVzc2FnZSA9IGJ1dHRvbi5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgLy8gY29uc3QgbWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cblxuICAgIGlmICghQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZCkpIHJldHVyblxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3VzZUx1Y2snOiB7XG4gICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPSBwYXJzZUludChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubmV3U3VjY2Vzc0xldmVsXG4gICAgICAgIClcblxuICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgICAgICBsZXQgbWVsZWVDYXJkXG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICAgICAgbWVsZWVDYXJkID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBtZWxlZUNhcmQudXBncmFkZVJvbGwobHVja0Ftb3VudCwgbmV3U3VjY2Vzc0xldmVsLCBjYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICAgICAgY29uc3QgcmFuZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgY29uc3Qgcm9sbFJlc3VsdCA9IGJ1dHRvbi5jbG9zZXN0KCcucm9sbC1yZXN1bHQnKVxuICAgICAgICAgIGNvbnN0IHJvbGxJbmRleCA9IHJvbGxSZXN1bHRcbiAgICAgICAgICAgID8gcGFyc2VJbnQocm9sbFJlc3VsdC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgICAgcmFuZ2VDYXJkLnBhc3NSb2xsKHJvbGxJbmRleClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICByYW5nZUNhcmQudXBncmFkZVJvbGwocm9sbEluZGV4LCB1cGdyYWRlSW5kZXgpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSB8fFxuICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JykgIT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgICAgY2hlY2suZm9yY2VQYXNzKGx1Y2tBbW91bnQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgYXdhaXQgY2hlY2sudXBncmFkZUNoZWNrKHVwZ3JhZGVJbmRleClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxuICAgICAgICAgIGNvbnN0IGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIgPVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuXG4gICAgICAgICAgaWYgKGFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gJ2ZhbHNlJyAvLyB0cmlnZ2VyIDMgdXBkYXRlcyBkZSBjYXJkXG4gICAgICAgICAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bWJsZScpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmNsb25lTm9kZSh0cnVlKSAvLyBUT0RPIG5vdCBuZWNlc3NhcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgIHJlc3VsdC5pbm5lclRleHQgPVxuICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVzaGluZ1NraWxsJylcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhaWx1cmUnKVxuICAgICAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgICAgICBuZXdDYXJkLmRhdGFzZXQucHVzaGVkUm9sbCA9IHRydWVcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQobmV3Q2FyZCwgb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLnB1c2goY2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlZmVuZGluZyc6IHtcbiAgICAgICAgbGV0IGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAgICAgLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICBsZXQgZGVmZW5kZXJcbiAgICAgICAgaWYgKCFkZWZlbmRlcktleSkge1xuICAgICAgICAgIGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAgICAgICAuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgZGVmZW5kZXIgPSBnYW1lLmFjdG9ycy5nZXQoZGVmZW5kZXJLZXkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZW5kZXIgPSB0aGlzLmdldEFjdG9yRnJvbVRva2VuKGRlZmVuZGVyS2V5KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VUeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblR5cGVcbiAgICAgICAgY29uc3Qgb3V0bnVtYmVyZWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub3V0bnVtYmVyZWQgPT09ICd0cnVlJ1xuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgICAgIGNoZWNrLnNpZGUgPSAndGFyZ2V0J1xuICAgICAgICBjaGVjay5hY3Rpb24gPSByZXNwb25zZVR5cGVcbiAgICAgICAgc3dpdGNoIChyZXNwb25zZVR5cGUpIHtcbiAgICAgICAgICBjYXNlICdkb2RnaW5nJzpcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgY2hlY2suaXRlbSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdtYW5ldXZlcic6IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICAgIGlmIChkZWZlbmRlci5idWlsZCA8PSBhY3Rvci5idWlsZCAtIDMpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNYW5ldXZlck5vdFBvc3NpYmxlJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcbiAgICAgICAgICAgIGlmIChkZWZlbmRlci5idWlsZCA8IGFjdG9yLmJ1aWxkKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9XG4gICAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyIC0gKGFjdG9yLmJ1aWxkIC0gZGVmZW5kZXIuYnVpbGQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaGVjay5kaWNlTW9kaWZpZXIgPCAtMikge1xuICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ICsgTWF0aC5hYnMoY2hlY2suZGljZU1vZGlmaWVyKSAtIDJcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gLTJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtaW5pdGlhdG9yLXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IGluaXRpYXRvci5wZXJmb3JtU2tpbGxDaGVjayhcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcbiAgICAgICAgKVxuICAgICAgICAkKGJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXG4gICAgICAgIGF3YWl0IGluaXRpYXRvci5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS10YXJnZXQtbm8tcmVzcG9uc2UnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCB0YXJnZXQucHVibGlzaE5vUmVwb25zZVJlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1yb2xsJzoge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCB0YXJnZXQucGVyZm9ybVNraWxsQ2hlY2soXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsXG4gICAgICAgIClcbiAgICAgICAgJChidXR0b24pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoY2hlY2suZGljZS5yb2xsKVxuICAgICAgICBhd2FpdCB0YXJnZXQucHVibGlzaENoZWNrUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JvbGwtbWVsZWUtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgICAgICBjcml0aWNhbDogYnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPT09ICd0cnVlJyxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgfSlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSBidXR0b24uZGF0YXNldC5kZWFsZXJcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudGFyZ2V0S2V5ID0gYnV0dG9uLmRhdGFzZXQudGFyZ2V0XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGJ1dHRvbi5kYXRhc2V0LndlYXBvblxuICAgICAgICBpZiAob3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkge1xuICAgICAgICAgIGRhbWFnZUNoYXRDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICAgICAgfVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICAgICAgLy8gY29uc3QgZGFtYWdlQ2FyZCA9IG5ldyBDb0M3RGFtYWdlUm9sbChcbiAgICAgICAgLy8gIGJ1dHRvbi5kYXRhc2V0LndlYXBvbixcbiAgICAgICAgLy8gIGJ1dHRvbi5kYXRhc2V0LmRlYWxlcixcbiAgICAgICAgLy8gIHtcbiAgICAgICAgLy8gICAgdGFyZ2V0S2V5OiBidXR0b24uZGF0YXNldC50YXJnZXQsXG4gICAgICAgIC8vICAgIGNyaXRpY2FsOiAndHJ1ZScgPT0gYnV0dG9uLmRhdGFzZXQuY3JpdGljYWwsXG4gICAgICAgIC8vICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICAvLyAgfSk7XG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSBkYW1hZ2VDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgICAgIC8vIGRhbWFnZUNhcmQucm9sbERhbWFnZSgpO1xuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkge1xuICAgICAgICAvLyAgZm9yIChjb25zdCBiIG9mIGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtYnV0dG9ucycpKSB7IGIucmVtb3ZlKCkgfVxuICAgICAgICAvLyAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoIGNhcmQpO1xuICAgICAgICAvLyB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyYW5nZS1pbml0aWF0b3Itc2hvb3QnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLmFkZFNob3RBdEN1cnJlbnRUYXJnZXQoKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyYW5nZS1pbml0aWF0b3Itcm9sbCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IucmVzb2x2ZUNhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncm9sbC1yYW5nZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnJvbGxEYW1hZ2UoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVhbC1tZWxlZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldEtleSA9IGNhcmQuZGF0YXNldC50YXJnZXRLZXlcbiAgICAgICAgY29uc3QgYW1vdW50ID0gY2FyZC5kYXRhc2V0LnJlc3VsdFxuICAgICAgICBjb25zdCB0YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgIGF3YWl0IHRhcmdldEFjdG9yLmRlYWxEYW1hZ2UoYW1vdW50KVxuICAgICAgICBjb25zdCBidXR0b25zID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJylcbiAgICAgICAgY29uc3QgZGljZVRvdGFsID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgICQoZGljZVRvdGFsKS5hcHBlbmQoJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicpXG4gICAgICAgIGlmIChidXR0b25zKSBidXR0b25zLnJlbW92ZSgpXG4gICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKGNhcmQpXG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVhbC1yYW5nZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLmRlYWxEYW1hZ2UoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0ZXN0Y2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcygpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcygpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLWZhaWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmZvcmNlRmFpbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmluY3JlYXNlU3VjY2Vzc0xldmVsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IG1ha2VQdWJsaWM6IHRydWUgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IG1ha2VQdWJsaWM6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrLWNhcmQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLnN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgZm9yY2VSb2xsOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXNldC1jcmVhdHVyZS1zYW4tZGF0YSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suY2xlYXJTYW5Mb3NzUmVhc29uKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWR2YW5jZS1zdGF0ZSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suYWR2YW5jZVN0YXRlKFxuICAgICAgICAgIGJ1dHRvbi5kYXRhc2V0LnN0YXRlIC8qLCBidXR0b24uZGF0YXNldC5wYXJhbSAqL1xuICAgICAgICApXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tbG9zcyc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtaW50LWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsSW50KClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICAvLyBjYXNlICdhcHBseS1zYW4tbG9zcyc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBhd2FpdCBzYW5DaGVjay5hcHBseVNhbkxvc3MoKTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICAvLyBjYXNlICdyZXZlYWwtc2FuLWNoZWNrJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIHNhbkNoZWNrLmlzQmxpbmQgPSBmYWxzZTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICBjYXNlICdyb2xsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY29uQ2hlY2sucm9sbENvbigpXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uQ2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRvZ2dsaW5nIHRoZSB2aXNpYmlsaXR5IG9mIGNoYXQgY2FyZCBjb250ZW50IHdoZW4gdGhlIG5hbWUgaXMgY2xpY2tlZFxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaGVhZGVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBoZWFkZXIuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY29udGVudCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGlmICghY29udGVudC5zdHlsZS5kaXNwbGF5KSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuXG4vLyBUT0RPIDogcsOpY3Vww6lyZXIgbGUgamV0IGVuIHRhbnQgcXUnb2JqZXQgISEhXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlSW5pdGlhdG9yIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGl0ZW1JZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBzdXBlcihhY3RvcktleSwgZmFzdEZvcndhcmQpXG4gICAgdGhpcy5pdGVtSWQgPSBpdGVtSWRcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMuZGlzYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnRhcmdldENhcmQgPSBudWxsXG4gICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmh0bWwnXG4gIH1cblxuICBhc3luYyByZXZlYWxDaGVjayAoKSB7XG4gICAgLy8gVE9ETyA6IG9uIHV0aWxpc2UgbCd1cGRhdGUgZHUgbWVzc2FnZSBhdSBsaWV1IGRlIHJlY29uc3RydWlyZSBsJ29iamV0LiBDaGFuZ2VyIGNlIGNvbXBvcnRlbWVudC5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdjaGVja1JldmVhbGVkJywgdHJ1ZSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UoY2hhdE1lc3NhZ2UsIGZhbHNlKVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xuICAgIGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgaWYgKHRoaXMudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpc1xuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWwgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXG4gICAgICA/IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZ05hbWUpXG4gICAgICA6IGZsYWdOYW1lXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ2luaXRpYXRvcidcbiAgICBjaGVjay5hY3Rpb24gPSAnYXR0YWNrJ1xuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuY2hlY2tSZXZlYWxlZCA9IGZhbHNlXG4gICAgZWxzZSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSB0cnVlXG5cbiAgICBpZiAodGhpcy5vdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcbiAgICBpZiAodGhpcy5zdXJwcmlzZWQpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgLT0gMVxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICB0aGlzLmNyaXRpY2FsRGFtYWdlID1cbiAgICAgIGNoZWNrLnN1Y2Nlc3NMZXZlbCA9PT0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICBpZiAodGhpcy5oYXNUYXJnZXQgJiYgIXRoaXMuYXV0b1N1Y2Nlc3MpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtY3JlYXRlbWVzc2FnZWFzJywge1xuICAgICAgICB0YXJnZXRLZXk6IHRoaXMudGFyZ2V0S2V5LFxuICAgICAgICBtZXNzYWdlSWQ6IHRoaXMubWVzc2FnZUlkLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdGhpcy5mYXN0Rm9yd2FyZCxcbiAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3JLZXlcbiAgICAgIH0pXG4gICAgICB0aGlzLnRhcmdldENhcmQgPSBtZXNzYWdlLmlkIHx8IG1lc3NhZ2UuX2lkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0b1N1Y2Nlc3MgJiYgIXRoaXMuY2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuY2hlY2suZm9yY2VQYXNzKClcbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBhc3luYyBwdWJsaXNoQ2hlY2tSZXN1bHQgKGNoZWNrID0gbnVsbCkge1xuICAgIGlmICghY2hlY2sgJiYgIXRoaXMuY2hlY2spIHJldHVybiBudWxsXG5cbiAgICBpZiAoY2hlY2spIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayh0aGlzLmNoZWNrKVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgdGhpcy5yb2xsLnJvbGxJY29ucyA9IFtdXG4gICAgaWYgKHRoaXMucm9sbC5jcml0aWNhbCkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ21lZGFsJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5mdW1ibGUpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZGFya3JlZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3BpZGVyJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5zdWNjZXNzKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3RhcicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnYmxhY2snXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdza3VsbCcpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRhcmdldENhcmQgJiYgIXRoaXMuYXV0b1N1Y2Nlc3MgJiYgdGhpcy5oYXNUYXJnZXQpIHtcbiAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgICApXG4gICAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuICAgICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgaW5pdGlhdG9yID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcigpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChpbml0aWF0b3IsIGNhcmQpXG4gICAgaW5pdGlhdG9yLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxuXG4gICAgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH0gZWxzZSBpbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGluaXRpYXRvclxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNhcmQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cblxuICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIGluaXRpYXRvclxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5tZWxlZS5pbml0aWF0b3InKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICBpbml0aWF0b3IudG9nZ2xlRmxhZyhmbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICB1cGdyYWRlUm9sbCAobHVja0Ftb3VudCwgbmV3U3VjY2Vzc0xldmVsLCBvbGRDYXJkKSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkx1Y2tOb3RFbm91Z2gnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMucm9sbC52YWx1ZSA9IG51bGxcbiAgICB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgdGhpcy5yb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICBvbGRDYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gZmFsc2VcblxuICAgIGNvbnN0IGRpY2VSb2xscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbCcpXG4gICAgZGljZVJvbGxzLmRhdGFzZXQudmFsdWUgPSBudWxsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQubHVja1NwZW50ID0gdHJ1ZVxuXG4gICAgY29uc3QgcmVzdWxEZXRhaWxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuICAgIGNvbnN0IGRpY2VUb3RhbCA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgIGNvbnN0IHJvbGxEYW1hZ2VCdXR0b24gPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnYnV0dG9uW2RhdGEtYWN0aW9uPVwicm9sbC1tZWxlZS1kYW1hZ2VcIl0nXG4gICAgKVxuICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmlzaWJsZScpXG5cbiAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgZGljZVRvdGFsLmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG9sZENhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQXBwbGljYXRpb24sIENPTkZJRywgQ09OU1QsIERpYWxvZywgRGllLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZnJvbVV1aWRTeW5jLCBnYW1lLCBIb29rcywgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBBdmVyYWdlUm9sbCB9IGZyb20gJy4uL2FwcHMvYXZlcmFnZS1yb2xsLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IFBvaW50U2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxWYWx1ZURpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNlIEFjdG9yIGNsYXNzIHRvIGltcGxlbWVudCBhZGRpdGlvbmFsIGxvZ2ljIHNwZWNpYWxpemVkIGZvciBDb0MgN3RoLlxuICovXG5leHBvcnQgY2xhc3MgQ29DQWN0b3IgZXh0ZW5kcyBBY3RvciB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzICYmICFjb250ZXh0Py5leHRlbmRlZCkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5ldyBjbGFzcyB3aWxsIGNhbGwgaXQncyBzdXBlcigpLFxuICAgICAgICogdGhlIGV4dGVuZGVkIGZsYWcgd2lsbCBiZSB0cnVlLCB0aHVzIGJ5cGFzc2luZyB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICovXG4gICAgICByZXR1cm4gbmV3IENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgLy8gaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xuICAgIC8vICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKVxuICAgIGF3YWl0IHRoaXMuY3JlYXR1cmVJbml0KCkgLy8gVE9ETyA6IG1vdmUgdGhpcyBpbiBDb0NBY3Rvci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKiogVGVzdGluZ1xuICAvLyBhc3luYyB1cGRhdGUoZGF0YSwgb3B0aW9ucz17fSkge1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygncmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTsnKTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHRoaXMuY2hhcmFjdGVyaXN0aWNzLmludCA9IDE1O1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgbW9kaWZpZWQgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIC8vIGdldCBjaGFyYWN0ZXJpc3RpY3MoKXtcbiAgLy8gICBjb25zdCBhY3RvciA9IHRoaXM7XG4gIC8vICAgICByZXR1cm4ge1xuICAvLyAgICAgICBnZXQgaW50KCl7XG4gIC8vICAgICAgICAgcmV0dXJuIGFjdG9yLmdldFByb3AoJ19pbnQnKTtcbiAgLy8gICAgICAgfSxcblxuICAvLyAgICAgICBzZXQgaW50KHgpe1xuICAvLyAgICAgICAgIGFjdG9yLnNldFByb3AoJ19pbnQnLCB4KTtcbiAgLy8gICAgICAgfVxuICAvLyAgICB9O1xuICAvLyB9XG5cbiAgLy8gc2V0UHJvcChrZXksIHgpe1xuICAvLyAgIHRoaXNba2V5XSA9IHg7XG4gIC8vIH1cblxuICAvLyBnZXRQcm9wKGtleSl7XG4gIC8vICAgcmV0dXJuIHRoaXNba2V5XXx8MDtcbiAgLy8gfVxuICAvL1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogUHJlcGFyZSBkYXRhIHJlbGF0ZWQgdG8gdGhpcyBEb2N1bWVudCBpdHNlbGYsIGJlZm9yZSBhbnkgZW1iZWRkZWQgRG9jdW1lbnRzIG9yIGRlcml2ZWQgZGF0YSBpcyBjb21wdXRlZC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlQmFzZURhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICB0aGlzLnN5c3RlbS5za2lsbHMgPSB7fVxuICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgaWYgKGkudHlwZSAhPT0gJ3NraWxsJykgY29udGludWVcbiAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxzW2Ake2kuaXRlbUlkZW50aWZpZXJ9YF0gPSB7IGZvdW5kcnlJRDogaS5pZCwgY29jaWQ6IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQsIHZhbHVlOiBpLnJhd1ZhbHVlLCBib251c0RpY2U6IGkuc3lzdGVtLmJvbnVzRGljZSB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAqIFJlbW92YWwgb2YgMS81IHNhbml0eVxuICAgICAqIHRoaXMgaXMgdG8gcmVtb3ZlIHRoZVxuICAgICAqIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgdG8gYmUgcmVtb3ZlZCBmcm9tIHRlbXBsYXRlXG4gICAgICogYW5kIGluZGVmaW5pdGVJbnNhbml0eUxldmVsIHRvIGJlIHJlbW92ZWQgZnJvbSB0ZW1wbGF0ZVxuICAgICAqL1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkpIHtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkuc3BsaXQoJy8nKVxuICAgICAgICAgIGlmIChzWzFdICYmICFpc05hTihOdW1iZXIoc1sxXSkpKSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gTnVtYmVyKHNbMV0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIGNvbXB1dGVkIHZhbHVlcyBvciBmaXhlZCB2YWx1ZXMgaWYgbm90IGF1dG8uXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgLy8gRm9yIHZlaGljbGUgb25seSA6XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPSB0aGlzLmhwXG5cbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggfHxcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ID09IG51bGxcbiAgICAgIC8vICkge1xuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgLy8gfVxuICAgICAgLy8gaWYgKFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA+IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCB8fFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPT0gbnVsbFxuICAgICAgLy8gKSB7XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgICAvLyB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9PSBudWxsICYmXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggIT0gbnVsbFxuICAgIC8vICkge1xuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICAvLyB9XG4gICAgLy8gaWYgKFxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT0gbnVsbCAmJlxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ICE9IG51bGxcbiAgICAvLyApIHtcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgLy8gfVxuICAgIH1cbiAgICBzdXBlci5wcmVwYXJlQmFzZURhdGEoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBQcmVwYXJlIGFsbCBlbWJlZGRlZCBEb2N1bWVudCBpbnN0YW5jZXMgd2hpY2ggZXhpc3Qgd2l0aGluIHRoaXMgcHJpbWFyeSBEb2N1bWVudC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqIGFjdGl2ZSBlZmZlY3RzIGFyZSBhcHBsaWVkXG4gICAqL1xuICBwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMgKCkge1xuICAgIHN1cGVyLnByZXBhcmVFbWJlZGRlZERvY3VtZW50cygpXG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEFwcGx5IHRyYW5zZm9ybWF0aW9ucyBvciBkZXJpdmF0aW9ucyB0byB0aGUgdmFsdWVzIG9mIHRoZSBzb3VyY2UgZGF0YSBvYmplY3QuXG4gICAqIENvbXB1dGUgZGF0YSBmaWVsZHMgd2hvc2UgdmFsdWVzIGFyZSBub3Qgc3RvcmVkIHRvIHRoZSBkYXRhYmFzZS5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlRGVyaXZlZERhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICBzdXBlci5wcmVwYXJlRGVyaXZlZERhdGEoKVxuICAgICAgLy8gU2V0IGhwTWF4LCBtcE1heCwgc2FuTWF4LCBtb3YsIGRiLCBidWlsZC4gVGhpcyBpcyB0byBhbGxvdyBjYWxjdWxhdGlvbiBvZiBkZXJpdmVkIHZhbHVlIHdpdGggbW9kaWZlZCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggPSB0aGlzLnJhd0hwTWF4XG4gICAgICBpZiAodGhpcy5ocCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSA9IHRoaXMucmF3SHBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPSB0aGlzLnJhd01wTWF4XG4gICAgICBpZiAodGhpcy5tcCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IHRoaXMucmF3TXBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4ID0gdGhpcy5yYXdTYW5NYXhcbiAgICAgIGlmICh0aGlzLnNhbiA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnJhd1Nhbk1heFxuXG4gICAgICAvLyBBcHBseSBlZmZlY3RzIHRvIGF1dG9tYXRpY2FseSBjYWxjdWxhdGVkIHZhbHVlcy5cbiAgICAgIGNvbnN0IGZpbHRlck1hdHJpeCA9IFtdXG5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCcpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLnNhbi5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZScpXG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XG4gICAgICAgIGlmIChlLmRpc2FibGVkIHx8IGUuaXNTdXBwcmVzc2VkKSByZXR1cm4gY2hhbmdlc1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXG4gICAgICAgICAgZS5jaGFuZ2VzLm1hcChjID0+IHtcbiAgICAgICAgICAgIGMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjKVxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXG4gICAgICAgICAgICBjLnByaW9yaXR5ID0gYy5wcmlvcml0eSA/PyBjLm1vZGUgKiAxMFxuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9LCBbXSlcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG5cbiAgICAgIGNvbnN0IHNlbGVjdENoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihlID0+IGZpbHRlck1hdHJpeC5pbmNsdWRlcyhlLmtleSkpXG5cbiAgICAgIC8vIEFwcGx5IGFsbCBjaGFuZ2VzXG4gICAgICBmb3IgKGNvbnN0IGNoYW5nZSBvZiBzZWxlY3RDaGFuZ2VzKSB7XG4gICAgICAgIGNoYW5nZS5lZmZlY3QuYXBwbHkodGhpcywgY2hhbmdlKVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ocE1heCAmJiB0aGlzLmhwTWF4IDwgdGhpcy5ocCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5ocE1heCB9XG4gICAgICBpZiAodGhpcy5tcE1heCAmJiB0aGlzLm1wTWF4IDwgdGhpcy5tcCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gdGhpcy5tcE1heCB9XG4gICAgICBpZiAodGhpcy5zYW5NYXggJiYgdGhpcy5zYW5NYXggPCB0aGlzLnNhbikgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IHRoaXMuc2FuTWF4IH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChkYXRhLnByb3RvdHlwZVRva2VuIHx8IHt9LCB7XG4gICAgICAgIGFjdG9yTGluazogdHJ1ZSxcbiAgICAgICAgZGlzcG9zaXRpb246IDEsXG4gICAgICAgIHNpZ2h0OiB7XG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnbnBjJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2N1bHRpc3Quc3ZnJ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY3JlYXR1cmUnKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvZmxvYXRpbmctdGVudGFjbGVzLnN2ZydcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2NoZXN0LnN2ZydcbiAgICAgIH1cbiAgICAgIGRhdGEucHJvdG90eXBlVG9rZW4gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGRhdGEucHJvdG90eXBlVG9rZW4gfHwge30sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xuICAgKiBKdXN0IGNoZWNrIGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0IHdpbGwgYmUgc2V0IHRvIHRydWVcbiAgICovXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XG4gICAgY29uc3QgcmV0dXJuRGF0YSA9IHtcbiAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgaHA6IHt9LFxuICAgICAgICBtcDoge30sXG4gICAgICAgIHNhbjoge30sXG4gICAgICAgIG1vdjoge30sXG4gICAgICAgIGRiOiB7fSxcbiAgICAgICAgYnVpbGQ6IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5ocD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1vdj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5kYj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmJ1aWxkPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5EYXRhXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICBzdHI6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TVFInLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBjb246IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5DT04nLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgc2l6OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBkZXg6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5ERVgnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBpbnQ6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5JTlQnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgcG93OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZWR1OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyAyKSB8fCBudWxsLFxuICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyA1KSB8fCBudWxsLFxuICAgICAgICAgIGZvcm11bGE6IHZhbHVlLmZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24gZnJvbSBwcmVDcmVhdGVBY3RvciBob29rXG4gICAqIEBwYXJhbSB7Kn0gY3JlYXRlRGF0YVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGluaXRUb2tlbiAoY3JlYXRlRGF0YSkge1xuICAgIC8vIGNhbGxlZCB1cG9uIHRva2VuIGNyZWF0aW9uLmFjdGl2ZVxuICAgIGlmIChjcmVhdGVEYXRhKSB7XG4gICAgICAvL1xuICAgIH1cbiAgfVxuXG4gIGdldCBoYXNUZW1wb0luc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICB9XG5cbiAgZ2V0IGdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwgJ2R1cmF0aW9uVGV4dCcpXG4gIH1cblxuICBnZXQgaGFzSW5kZWZJbnNhbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgfVxuXG4gIGdldCBwb3J0cmFpdCAoKSB7XG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSByZXR1cm4gdGhpcy5pbWdcbiAgICByZXR1cm4gdGhpcy50b2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMucHJvdG90eXBlVG9rZW4/LnRleHR1cmU/LnNyYyB8fCB0aGlzLmltZ1xuICB9XG5cbiAgYXN5bmMgZW50ZXJCb3V0T2ZNYWRuZXNzIChyZWFsVGltZSA9IHRydWUsIGR1cmF0aW9uID0gMSkge1xuICAgIC8vIGNvbnN0IGR1cmF0aW9uID0ge3JvdW5kczogMSxcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxuICAgIC8vICAgc3RhcnRSb3VuZDogMyxcbiAgICAvLyAgIHN0YXJ0VGltZTogNTgsXG4gICAgLy8gICBzdGFydFR1cm46IDQsXG4gICAgLy8gICB0dXJuczogMn07XG4gICAgLy8gYXdhaXQgdGhpcy5ib3V0T2ZNYWRuZXNzPy5zZXRGbGFnKCAnQ29DNycsICdtYWRuZXNzJywgdHJ1ZSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbFxuICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZUlkID0gcmVhbFRpbWVcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICBpZiAoYm91dE9mTWFkbmVzc1RhYmxlSWQgIT09ICdub25lJykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwaG9iaWE6IGZhbHNlLFxuICAgICAgICBtYW5pYTogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGUgPSBnYW1lLnRhYmxlcy5nZXQoYm91dE9mTWFkbmVzc1RhYmxlSWQpXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRE9DVU1FTlQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kb2N1bWVudElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbT8udHlwZT8ucGhvYmlhKSByZXN1bHQucGhvYmlhID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5tYW5pYSkgcmVzdWx0Lm1hbmlhID0gdHJ1ZVxuICAgICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYCR7aXRlbS5uYW1lfTpgICsgYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgeyBhc3luYzogdHJ1ZSB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtLnRvT2JqZWN0KClcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtRGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbURhdGFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NJdGVtTm90Rm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnRleHQsXG4gICAgICAgICAgICB7IGFzeW5jOiB0cnVlIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzVGFibGVOb3RGb3VuZCcpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBpdCdzIG5vdCBhIHJlYWwgdGltZSBubyBuZWVkIHRvIGFjdGl2YXRlIHRoZSBib3V0XG4gICAgaWYgKCFyZWFsVGltZSkgcmV0dXJuIHJlc3VsdFxuXG4gICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgIHJlYWxUaW1lLFxuICAgICAgZHVyYXRpb25cbiAgICB9KVxuXG4gICAgLy8gY29uc3QgZWZmZWN0ID0gdGhpcy5lZmZlY3RzLmdldCggZWZmZWN0RGF0YS5faWQpO1xuICAgIC8vIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSk7XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gbmV3IGFjdG9yIGNyZWF0aW9uLlxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICAvLyBzdGF0aWMgYXN5bmMgY3JlYXRlKGRhdGEsIG9wdGlvbnMpIHtcbiAgLy8gIC8vIElmIHRoZSBjcmVhdGVkIGFjdG9yIGhhcyBpdGVtcyAob25seSBhcHBsaWNhYmxlIHRvIGR1cGxpY2F0ZWQgYWN0b3JzKSBieXBhc3MgdGhlIG5ldyBhY3RvciBjcmVhdGlvbiBsb2dpY1xuICAvLyAgaWYgKGRhdGEuaXRlbXMpIHtcbiAgLy8gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gIH1cbiAgLy8gIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICBzdGF0aWMgZW1wdHlTa2lsbCAoXG4gICAgc2tpbGxOYW1lLFxuICAgIHZhbHVlLFxuICAgIHtcbiAgICAgIHJhcml0eSA9IGZhbHNlLFxuICAgICAgcHVzaCA9IHRydWUsXG4gICAgICBjb21iYXQgPSBmYWxzZSxcbiAgICAgIGltZyA9IGZhbHNlLFxuICAgICAgc3BlY2lhbGl6YXRpb24gPSBmYWxzZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogJycsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgICAgICByYXJpdHksXG4gICAgICAgICAgcHVzaCxcbiAgICAgICAgICBjb21iYXRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW1nICE9PSBmYWxzZSkge1xuICAgICAgZGF0YS5pbWcgPSBpbWdcbiAgICB9XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uICE9PSBmYWxzZSkge1xuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pXG4gICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICBkYXRhLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiBsaXN0IG9mIHNraWxscyBieSByZW1vdmluZyBzcGVjaWFsaXphdGlvbiBmcm9tIG5hbWVcbiAgICovXG4gIC8vIGFzeW5jIGNsZWFuU2tpbGxzICgpIHtcbiAgLy8gICBEaWFsb2cuY29uZmlybSh7XG4gIC8vICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNsZWFuU2tpbGxMaXN0Jyl9YCxcbiAgLy8gICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DbGVhblNraWxsTGlzdEhpbnQnKX08L3A+YCxcbiAgLy8gICAgIHllczogKCkgPT4gY2xlYW4odGhpcylcbiAgLy8gICB9KVxuICAvLyAgIGFzeW5jIGZ1bmN0aW9uIGNsZWFuIChhY3Rvcikge1xuICAvLyAgICAgY29uc3QgdXBkYXRlID0gW11cbiAgLy8gICAgIGFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAvLyAgICAgICBpZiAocy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gIC8vICAgICAgICAgY29uc3QgY2xlYW4gPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMocyk/LnRyaW0oKVxuICAvLyAgICAgICAgIGlmIChjbGVhbi50b0xvd2VyQ2FzZSgpICE9IHMubmFtZS50b0xvd2VyQ2FzZSgpIHx8IGNsZWFuLnRvTG93ZXJDYXNlKCkgIT0gcy5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAvLyAgICAgICAgICAgdXBkYXRlLnB1c2goe1xuICAvLyAgICAgICAgICAgICBfaWQ6IHMuaWQsXG4gIC8vICAgICAgICAgICAgIG5hbWU6IGNsZWFuXG4gIC8vICAgICAgICAgICB9KVxuICAvLyAgICAgICAgIH1cbiAgLy8gICAgICAgfVxuICAvLyAgICAgfSlcbiAgLy8gICAgIGlmICh1cGRhdGUubGVuZ3RoICE9IDApe1xuICAvLyAgICAgICBhd2FpdCBhY3Rvci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZSlcbiAgLy8gICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgU2tpbGxzIDogJHtBcnJheS5mcm9tKCB1cGRhdGUsIGUgPT4gZS5uYW1lKS5qb2luKCcsICcpfSB1cGRhdGVkLmApXG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oICdTa2lsbCBsaXN0IHdhcyBjbGVhbiBhbHJlYWR5ICEnKVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgY3JlYXRlU2tpbGwgKHNraWxsTmFtZSwgdmFsdWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGxOYW1lLCB2YWx1ZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVdlYXBvblNraWxsIChuYW1lLCBmaXJlYXJtcyA9IGZhbHNlLCBiYXNlID0gbnVsbCkge1xuICAgIC8vIFRPRE8gOiBBc2sgZm9yIGJhc2UgdmFsdWUgaWYgbnVsbFxuXG4gICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcbiAgICAgIFtdLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKSxcbiAgICAgIDAsXG4gICAgICBuYW1lXG4gICAgKVxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsRGF0YS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICBuYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgYmFzZTogaXNOYU4odmFsdWUpID8gMCA6IHZhbHVlLFxuICAgICAgICBhZGp1c3RtZW50czoge1xuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxuICAgICAgICAgIG9jY3VwYXRpb246IG51bGwsXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsLFxuICAgICAgICAgIGV4cGVyaWVuY2U6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiBwYXJ0cy5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IHRydWUsXG4gICAgICAgICAgZmlnaHRpbmc6ICFmaXJlYXJtcyxcbiAgICAgICAgICBmaXJlYXJtOiBmaXJlYXJtcyxcbiAgICAgICAgICBjb21iYXQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogIWJhc2VcbiAgICB9KVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUobmFtZSlcbiAgICByZXR1cm4gc2tpbGxbMF1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGEgY3JlYXR1cmUgd2l0aCBtaW5pbXVtcyBza2lsbHNcbiAgICovXG4gIGFzeW5jIGNyZWF0dXJlSW5pdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NyZWF0dXJlJykgcmV0dXJuXG4gICAgaWYgKHRoaXMuZ2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpKSByZXR1cm4gLy8gQ2hhbmdlIHRvIHJldHVybiBza2lsbCA/XG5cbiAgICAvLyBDaGVjayBpZiBmaWdodGluZyBza2lsbHMgZXhpc3RzLCBpZiBub3QgY3JlYXRlIGl0IGFuZCB0aGUgYXNzb2NpYXRlZCBhdHRhY2suXG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpXG4gICAgKVxuICAgIGlmIChza2lsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGluZyBuYXR1cmFsIGF0dGFjayBza2lsbFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCksXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICBiYXNlOiAwLFxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBwYXJ0cy5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgICAgICBmaWdodGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgc3BlY2lhbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZsYWdzOiB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBhdHRhY2sgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICdJdGVtJyxcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdJbm5hdGUgYXR0YWNrJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCIsXG4gICAgICAgICAgICAgICAgICBjaGF0OiBcIkNyZWF0dXJlJ3MgbmF0dXJhbCBhdHRhY2tcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd3BuVHlwZTogJ2lubmF0ZScsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgYWRkYjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNsbnQ6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH1cbiAgICAgICAgKVxuICAgICAgICBpZiAoc2tpbGwubGVuZ3RoID4gMCAmJiBhdHRhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGNyZWF0ZWRBdHRhY2sgPSB0aGlzLml0ZW1zLmdldChhdHRhY2tbMF0uaWQpXG4gICAgICAgICAgYXdhaXQgY3JlYXRlZEF0dGFjay51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLmlkJzogc2tpbGxbMF0uaWQsXG4gICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IHNraWxsWzBdLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXR1cmUgaW5pdDogJyArIGVyci5tZXNzYWdlKVxuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coICdTa2lsbCBjcmVhdGVkJyk7XG4gICAgICBhd2FpdCB0aGlzLnNldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKVxuICAgICAgLy8gQ3JlYXRpbmcgY29ycmVzcG9uZGluZyB3ZWFwb24uXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlSXRlbSAoaXRlbU5hbWUsIHF1YW50aXR5ID0gMSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnaXRlbScsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgcXVhbnRpdHlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUJvb2sgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQm9vayhnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVCb29rIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnYm9vaycsXG4gICAgICBzeXN0ZW06IHt9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTcGVsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoaXRlbU5hbWUsIHNob3dTaGVldClcbiAgfVxuXG4gIHN0YXRpYyBlbXB0eVNwZWxsIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdzcGVsbCcsXG4gICAgICBzeXN0ZW06IHt9XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhc3luYyBjcmVhdGVTcGVsbCAoaXRlbU5hbWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U3BlbGwoaXRlbU5hbWUpXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVNraWxsIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSxcbiAgICAgICAgKHRoaXMudHlwZSAhPT0gJ2NoYXJhY3RlcicgPyAxIDogbnVsbCksXG4gICAgICAgIHNob3dTaGVldFxuICAgICAgKVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbE5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChza2lsbE5hbWUsIG51bGwsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5SXRlbSAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSwgMSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUl0ZW0oaXRlbU5hbWUsIDEsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5V2VhcG9uIChldmVudCA9IG51bGwsIHByb3BlcnRpZXMgPSB7fSkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGxldCB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSlcbiAgICBpZiAodGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkpKSB7XG4gICAgICBsZXQgaW5kZXggPSAwXG4gICAgICB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkgKyAnICcgKyBpbmRleFxuICAgICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHdlYXBvbk5hbWUpKSB7XG4gICAgICAgIGluZGV4KytcbiAgICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogd2VhcG9uTmFtZSxcbiAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSA/PyBmYWxzZVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQmlvU2VjdGlvbiAodGl0bGUgPSBudWxsKSB7XG4gICAgY29uc3QgYmlvID0gdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICAgIDogW11cbiAgICBiaW8ucHVzaCh7XG4gICAgICB0aXRsZSxcbiAgICAgIHZhbHVlOiBudWxsXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVCaW9WYWx1ZSAoaW5kZXgsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS52YWx1ZSA9IGNvbnRlbnRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVGl0bGUgKGluZGV4LCB0aXRsZSkge1xuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBiaW9baW5kZXhdLnRpdGxlID0gdGl0bGVcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBkZWxldGVCaW9TZWN0aW9uIChpbmRleCkge1xuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBiaW8uc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uVXAgKGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSAwKSByZXR1cm5cbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxuICAgIGJpby5zcGxpY2UoaW5kZXggLSAxLCAwLCBlbGVtKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uRG93biAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGggLSAxKSByZXR1cm5cbiAgICBjb25zdCBlbGVtID0gYmlvLnNwbGljZShpbmRleCwgMSlbMF1cbiAgICBiaW8uc3BsaWNlKGluZGV4ICsgMSwgMCwgZWxlbSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVUZXh0QXJlYSAodGV4dEFyZWEpIHtcbiAgICBjb25zdCBuYW1lID0gJ3N5c3RlbS4nICsgdGV4dEFyZWEuZGF0YXNldC5hcmVhTmFtZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiB0ZXh0QXJlYS52YWx1ZSB9KVxuICB9XG5cbiAgLy8gYXN5bmMgX3VwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzIChkb2N1bWVudENsYXNzLCBwYXJlbnQsIHsgdXBkYXRlcywgb3B0aW9ucywgcGFjayB9LCB1c2VyKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHByZVVwZGF0ZUFjdGl2ZUVmZmVjdCAoYSxiLGMsZCkge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvLyBhc3luYyB1cGRhdGVBY3RpdmVFZmZlY3QgKGEsYixjLGQpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpdGVtIGZvciB0aGF0IGFjdG9yLlxuICAgKiBJZiBpdCdzIGEgc2tpbGwgZmlyc3QgY2hlY2sgaWYgdGhlIHNraWxsIGlzIGFscmVhZHkgb3duZWQuIElmIGl0IGlzIGRvbid0IGNyZWF0ZSBhIHNlY29uZCB0aW1lLlxuICAgKiBGaWxsIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgd2l0aCBiYXNlIG9yIHRyeSB0byBldmFsdWF0ZSB0aGUgZm9ybXVsYS5cbiAgICogQHBhcmFtIHsqfSBlbWJlZGRlZE5hbWVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW1iZWRkZWREb2N1bWVudHMgKGVtYmVkZGVkTmFtZSwgZGF0YUFycmF5LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YUFycmF5ID0gW11cbiAgICBsZXQgYmFzZVZhbHVlID0gMFxuICAgIGxldCBiYXNlQ2FsY3VsYXRlZCA9IDBcbiAgICBsZXQgYXJjaGV0eXBlID0gZmFsc2VcbiAgICBsZXQgb2NjdXBhdGlvbiA9IGZhbHNlXG4gICAgZm9yIChsZXQgZGF0YSBvZiBkYXRhQXJyYXkpIHtcbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3NraWxsJzoge1xuICAgICAgICAgIGJhc2VWYWx1ZSA9IGRhdGEuc3lzdGVtLmJhc2VcbiAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IGF3YWl0IENvQzdJdGVtLmNhbGN1bGF0ZUJhc2UodGhpcywgZGF0YSlcbiAgICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gSWYgbm90IGEgUEMgc2V0IHNraWxsIHZhbHVlIHRvIGJhc2VcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShkYXRhLm5hbWUpKSByZXR1cm4gLy8gSWYgc2tpbGwgd2l0aCB0aGlzIG5hbWUgZXhpc3QgcmV0dXJuXG5cbiAgICAgICAgICAgIGlmIChiYXNlVmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKFN0cmluZyhiYXNlVmFsdWUpICE9PSBTdHJpbmcoZGF0YS5zeXN0ZW0udmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoZGF0YS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWVcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXG4gICAgICAgICAgICAgICAgICApLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICApLnRvdGFsXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkgZGF0YS5zeXN0ZW0udmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSA9IG51bGxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgYWRkVGhpcyA9IHRydWVcblxuICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzQW55QnV0Tm90RmxhZ2dlZCA9ICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSkgPz8gZmFsc2UpICYmICEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5ID8/IGZhbHNlKVxuICAgICAgICAgICAgbGV0IHNraWxsTGlzdCA9IFtdXG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5ndWVzc0dyb3VwRnJvbURvY3VtZW50KGRhdGEpXG4gICAgICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gKGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKGdyb3VwKSArICcuKyQnKSwgdHlwZTogJ2knIH0pKS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsID8/IGZhbHNlKSAmJiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSkgJiYgIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkgPz8gZmFsc2UpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0/LmZsYWdzPy5vY2N1cGF0aW9uIHx8IGRhdGEuc3lzdGVtPy5mbGFncz8uYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGxzID0gdGhpcy5za2lsbHMuZmlsdGVyKGVsID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsLnN5c3RlbS5zcGVjaWFsaXphdGlvbikgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0/LmZsYWdzPy5vY2N1cGF0aW9uICYmXG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uZmxhZ3M/Lm9jY3VwYXRpb25cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbT8uZmxhZ3M/LmFyY2hldHlwZSAmJlxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLmZsYWdzPy5hcmNoZXR5cGVcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5zcGVjaWFsaXphdGlvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4aXN0aW5nU2tpbGxzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gc2tpbGxMaXN0LmZpbmRJbmRleChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSBleGlzdGluZ1NraWxsc1tpXS5uYW1lIHx8IGl0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGV4aXN0aW5nU2tpbGxzW2ldLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxMaXN0LnNwbGljZShmb3VuZCwgMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gc2tpbGxMaXN0LmNvbmNhdChleGlzdGluZ1NraWxscylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gZXhpc3RpbmdTa2lsbHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBza2lsbERhdGEgPSBhd2FpdCBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIHNraWxsczogc2tpbGxMaXN0LFxuICAgICAgICAgICAgICBhbGxvd0N1c3RvbTogKGlzQW55QnV0Tm90RmxhZ2dlZCB8fCAoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSksXG4gICAgICAgICAgICAgIGZpeGVkQmFzZVZhbHVlOiAoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSksXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZTogZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIGxhYmVsOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGJhc2VWYWx1ZTogZGF0YS5zeXN0ZW0uYmFzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2tpbGxEYXRhLCAnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gdGhpcy5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEuc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nSXRlbSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlcyA9IHt9XG4gICAgICAgICAgICAgICAgICBpZiAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzWydzeXN0ZW0udmFsdWUnXSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLmZsYWdzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzW2BzeXN0ZW0uZmxhZ3MuJHtrZXl9YF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhjaGFuZ2VzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuX2lkID0gZXhpc3RpbmdJdGVtLmlkXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbY2hhbmdlc10pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoZXhpc3RpbmdJdGVtKVxuICAgICAgICAgICAgICAgICAgYWRkVGhpcyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxhZ3MgPSBkYXRhLnN5c3RlbT8uZmxhZ3NcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2VlcEJhc2UgPSAoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmZsYWdzW2tleV0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZWVwQmFzZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lsbERhdGEuYmFzZVZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgYmFzZVZhbHVlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gYXdhaXQgQ29DN0l0ZW0uY2FsY3VsYXRlQmFzZSh0aGlzLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgICAgIHNraWxsRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChza2lsbERhdGEuYmFzZVZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5iYXNlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYmFzZVZhbHVlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhZGRUaGlzKSB7XG4gICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhiYXNlQ2FsY3VsYXRlZCkpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGRhdGEpKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnd2VhcG9uJzoge1xuICAgICAgICAgIGlmICh0aGlzLnR5cGUgIT09ICdjb250YWluZXInKSB7XG4gICAgICAgICAgICBjb25zdCBtYWluU2tpbGwgPSBkYXRhLnN5c3RlbT8uc2tpbGw/Lm1haW4/Lm5hbWVcbiAgICAgICAgICAgIGlmIChtYWluU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUobWFpblNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICAgICAgICAgICAgICA/IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICAgICAgICAgICAgICA6IG1haW5Ta2lsbFxuICAgICAgICAgICAgICAgIC8vIHRyeSB0byB1c2UgYW4gYWxyZWFkeSBkZWZpbmVkIHNraWxsXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc2VhcmNoIG9uIHRoZSBjb21wZW5kaXVtc1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgfHwgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFtleGlzdGluZ10pXG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgICAgIC8vIHNraWxsID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuc3lzdGVtLnNraWxsLm1haW4uaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfSAvLyBUT0RPIDogRWxzZSA6IHNlbGVjdGlvbm5lciBsZSBza2lsbCBkYW5zIGxhIGxpc3RlIG91IGVuIGNyw6llciB1biBub3V2ZWF1LlxuXG4gICAgICAgICAgICBjb25zdCBzZWNvbmRTa2lsbCA9IGRhdGEuc3lzdGVtPy5za2lsbD8uYWx0ZXJuYXRpdj8ubmFtZVxuICAgICAgICAgICAgaWYgKHNlY29uZFNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNlY29uZFNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gc2Vjb25kU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBzZWNvbmRTa2lsbFxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgfHwgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFtleGlzdGluZ10pXG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICAgICAgLy8gc2tpbGwgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgISFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9IC8vIFRPRE8gOiBFbHNlIDogc2VsZWN0aW9ubmVyIGxlIHNraWxsIGRhbnMgbGEgbGlzdGUgb3UgZW4gY3LDqWVyIHVuIG5vdXZlYXUuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NldHVwJzoge1xuICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5lbmFibGVDaGFyYWN0ZXJpc2l0aWNzKSB7XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdCA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzdHInKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnY29uJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpeiA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3NpeicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXggPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdkZXgnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnYXBwJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdwb3cnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnZWR1JylcblxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjayA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlID0gaXNOYU4odGhpcy5sdWNrKVxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiB0aGlzLmx1Y2tcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2subGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnNob3J0TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgaWYgKCFkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpei52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXgudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2sgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNwZW5kUG9pbnRzJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxDaGFyYWMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0ucG9pbnRzV2FybmluZyA9ICEoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ICE9PSBudWxsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb25zdCByb2xsZWQgPSBhd2FpdCBDaGFyYWNSb2xsRGlhbG9nLmNyZWF0ZShkYXRhLnN5c3RlbSlcbiAgICAgICAgICAgIGlmIChyb2xsZWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICAgICAgICAgICAnc3RyJyxcbiAgICAgICAgICAgICAgICAnY29uJyxcbiAgICAgICAgICAgICAgICAnc2l6JyxcbiAgICAgICAgICAgICAgICAnZGV4JyxcbiAgICAgICAgICAgICAgICAnYXBwJyxcbiAgICAgICAgICAgICAgICAnaW50JyxcbiAgICAgICAgICAgICAgICAncG93JyxcbiAgICAgICAgICAgICAgICAnZWR1J1xuICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XVxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0uZm9ybXVsYWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjaykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVja1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAubWF4J10gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEsIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB0aGlzLnJhd0hwTWF4LFxuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnOiB0aGlzLnJhd0hwTWF4XG4gICAgICAgICAgICAgIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXMoZGF0YS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKVxuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhza2lsbHMpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhvdGhlcnNJdGVtcylcbiAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJhY2tzdG9yeSc6IGRhdGEuc3lzdGVtLmJhY2tzdG9yeSB9LCB7IHJlbmRlclNoZWV0OiBmYWxzZSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5Py5maW5kKFxuICAgICAgICAgICAgICAgICAgZWwgPT4gc2VjdGlvbk5hbWUgPT09IGVsLnRpdGxlXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQmlvU2VjdGlvbihzZWN0aW9uTmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByZWZhY3RvciB0aGlzXG4gICAgICAgICAgY29uc3QgbW9uZXRhcnkgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuc3lzdGVtLm1vbmV0YXJ5LCBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhLnN5c3RlbS5tb25ldGFyeSkpXG4gICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0XG4gICAgICAgICAgbGV0IHN0YXRlID0gZmFsc2VcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICBzdGF0ZSA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUoc2hlZXQuX3N0YXRlKVxuICAgICAgICAgICAgfSwgMTAwKSlcbiAgICAgICAgICB9IHdoaWxlIChzdGF0ZSA9PT0gQXBwbGljYXRpb24uUkVOREVSX1NUQVRFUy5SRU5ERVJJTkcpXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5tb25ldGFyeSc6IG1vbmV0YXJ5XG4gICAgICAgICAgfSlcbiAgICAgICAgICBIb29rcy5jYWxsKCdzZXR1cEZpbmlzaGVkQ29DNycpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdhcmNoZXR5cGUnOlxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBBcmNoZXR5cHJlIG9ubHkgZm9yIFBDc1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldEFyY2hldHlwZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0QXJjaGV0eXBlJyksXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldEFyY2hldHlwZUhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0QXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0QXJjaGV0eXBlKSBhd2FpdCB0aGlzLnJlc2V0QXJjaGV0eXBlKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29yZUNoYXJhYyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IGZhbHNlXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgICBjaGFyLmtleSA9IGtleVxuICAgICAgICAgICAgICAgIGNvcmVDaGFyYWMucHVzaChjaGFyKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjaGFyYWNcblxuICAgICAgICAgICAgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBjb25zdCBjaGFyRGlhbG9nRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGNoYXJEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljcyA9IGNvcmVDaGFyYWNcbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2VsZWN0Q29yZUNoYXJhYycpXG4gICAgICAgICAgICAgIGNoYXJhYyA9IGF3YWl0IENoYXJhY1NlbGVjdERpYWxvZy5jcmVhdGUoY2hhckRpYWxvZ0RhdGEpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXJhYyA9IGNvcmVDaGFyYWNbMF0ua2V5XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY2hhcmFjKSByZXR1cm5cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY2hhcmFjXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IE51bWJlcihkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZSlcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhYylcbiAgICAgICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY2hhci5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhOiBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNoYXIudmFsdWUgPCByb2xsLnRvdGFsID8gcm9sbC50b3RhbCA6IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7Y2hhcmFjfS52YWx1ZWBdOiB2YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5za2lsbHMgfSlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoZGF0YS5zeXN0ZW0uc2tpbGxzLCAnYXJjaGV0eXBlJylcblxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgICBhcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldE9jY3VwYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldE9jY3VwYXRpb24nKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0T2NjdXBhdGlvbkhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldE9jY3VwYXRpb24pIGF3YWl0IHRoaXMucmVzZXRPY2N1cGF0aW9uKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29udmVydCBDb0NJRHMgdG8gaXRlbXNcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heCkgPiAwKSB7XG4gICAgICAgICAgICAgIC8vIE9jY3VwYXRpb25zIHdpdGggYSBjcmVkaXQgcmF0aW5nIHJlcXVpcmUgYSBjcmVkaXQgcmF0aW5nIHNraWxsXG4gICAgICAgICAgICAgIGNvbnN0IGFjdG9yQ3JlZGl0UmF0aW5nID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgZGF0YS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBpZiAoYWN0b3JDcmVkaXRSYXRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5maW5kQ29jSWRJbkxpc3QoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycsIHRoaXMuaXRlbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLnB1c2goJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaChhY3RvckNyZWRpdFJhdGluZ1swXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VsZWN0IGNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICBsZXQgdG90YWwgPSAwXG4gICAgICAgICAgICBsZXQgb3B0aW9uYWxDaGFyID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS52YWx1ZSA9IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbCA9XG4gICAgICAgICAgICAgICAgICBjaGFyLnZhbHVlICpcbiAgICAgICAgICAgICAgICAgIE51bWJlcihwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLm11bHRpcGxpZXIpXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgdG90YWwgKz0gcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25hbENoYXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLnRvdGFsID0gdG90YWxcbiAgICAgICAgICAgIGlmIChvcHRpb25hbENoYXIpIHtcbiAgICAgICAgICAgICAgLy8gSXMgdGhlcmUgYW55IG9wdGlvbmFsIGNoYXIgdG8gY2hvb3NlIGZvciBwb2ludHMgY2FsYyA/XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvaW50U2VsZWN0RGlhbG9nLmNyZWF0ZShwb2ludHNEaWFsb2dEYXRhKVxuICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIC8vIFBvaW50IG5vdCBzZWxlY3RlZCA9PiBleGl0LlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgb3B0aW9uYWwgc2tpbGxzXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lkcyB0byBpdGVtc1xuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgfSlcblxuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMpXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxTZWxlY3Rpb25XaW5kb3cnKVxuXG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBvbmx5IHNraWxscyB0aGF0IGFyZSBub3QgcHJlc2VudCBvciBhcmUgbm90IGZsYWdnZWQgYXMgb2NjdXBhdGlvbi5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscykge1xuICAgICAgICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWModmFsdWUpKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBnZW5lcmljIHNwZWMgd2UgYWx3YXlzIGFkZCBpdFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWUgJiYgaXRlbS50eXBlID09PSAnc2tpbGwnXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgaWYgKCFza2lsbCB8fCAhc2tpbGwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIHdhcyBhZGRlZCB0byBza2lsbCBsaXN0IHByZXZpb3VzbHksIHJlbW92ZSBpdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKVxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgZXh0cmEgc2tpbGxzXG4gICAgICAgICAgICBpZiAoTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKSkge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpXG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsIHNraWxscyB0aGF0IGFyZSBub3QgYWxyZWFkeSBmbGFnZ2VkIGFzIG9jY3VwYXRpb24sIGNhbiBoYXZlIGFkanVzdG1lbnRzIGFuZCBYUC5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm9hZGp1c3RtZW50cyAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIGFscmVhZHkgc2VsZWN0ZWQgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSBzLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBub25lLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCA8PSBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9MZXNzU2tpbGxUaGFuT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3Igc2tpbGwgc2VsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBhd2FpdCBTa2lsbFNlbGVjdERpYWxvZy5jcmVhdGUoZGlhbG9nRGF0YSkgLy8gRGlhbG9nIGRhdGEgYnVnID8/P1xuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdvY2N1cGF0aW9uJylcbiAgICAgICAgICAgIC8vIENyZWRpdCByYXRpbmcgaXMgYWx3YXlzIHBhcnQgb2Ygb2NjdXBhdGlvblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8uc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBpdCB0byBtaW4gY3JlZGl0IHJhdGluZ1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uJzogTnVtYmVyKGRhdGEuc3lzdGVtLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIG9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZERhdGFBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwcm9jZXNzZWQgPSBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgIGVtYmVkZGVkTmFtZSxcbiAgICAgIHByb2Nlc3NlZERhdGFBcnJheSxcbiAgICAgIG9wdGlvbnNcbiAgICApXG5cbiAgICBpZiAoYXJjaGV0eXBlKSB7XG4gICAgICAvLyBzZXR0aW5nIHBvaW50c1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMuYXJjaGV0eXBlUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnYXJjaGV0eXBlRmluaXNoZWRDb0M3JylcbiAgICB9XG4gICAgaWYgKG9jY3VwYXRpb24pIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50cyxcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICAgIH0pXG4gICAgICBIb29rcy5jYWxsKCdvY2N1cGF0aW9uRmluaXNoZWRDb0M3JylcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvY2Vzc2VkXG4gIH1cblxuICAvLyBnZXRTa2lsbElkQnlOYW1lKCBza2lsbE5hbWUpe1xuICAvLyAgIGxldCBpZCA9IG51bGw7XG4gIC8vICAgIGZvciAoY29uc3QgW21hcCwga2V5LCB2YWx1ZV0gb2YgdGhpcy5pdGVtcykge1xuICAvLyAgICAgaWYoIHZhbHVlLm5hbWUgPT0gc2tpbGxOYW1lKSBpZCA9IHZhbHVlLmlkO1xuICAvLyAgIH07XG5cbiAgLy8gICByZXR1cm4gaWQ7XG4gIC8vIH1cblxuICBnZXRJdGVtSWRCeU5hbWUgKGl0ZW1OYW1lKSB7XG4gICAgbGV0IGlkID0gbnVsbFxuICAgIGNvbnN0IG5hbWUgPSBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICA/IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogaXRlbU5hbWVcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICkge1xuICAgICAgICBpZCA9IHZhbHVlLmlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBnZXRJdGVtc0J5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBpdGVtTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUubmFtZSA9PT0gaXRlbU5hbWUpIGl0ZW1MaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW1MaXN0XG4gIH1cblxuICAvKipcbiAgICpcbiAgICpcbiAgICovXG4gIGdldFNraWxsc0J5TmFtZSAoc2tpbGxOYW1lKSB7XG4gICAgLy8gVE9ETyA6IG1vcmUgYWdncmVzc2l2ZSBmaW5kaW5nIGluY2x1ZGluZyBzcGVjc1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgY29uc3QgbmFtZSA9IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICA/IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICA6IHNraWxsTmFtZVxuXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChcbiAgICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIHZhbHVlLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBza2lsbE5hbWVcbiAgICAgICAgKSAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnc2tpbGwnXG4gICAgICApIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldEZpcnN0SXRlbUJ5Q29DSUQgKGNvY2lkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZmluZChpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkKVxuICB9XG5cbiAgLy8gcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gIC8vICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gIC8vICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAvLyAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAvLyAgIH1cbiAgLy8gICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICAvLyB9XG5cbiAgcGFyc2VDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy4nKSkge1xuICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbiAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLnRlbXBsYXRlcy5jaGFyYWN0ZXJpc3RpY3MuY2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgY2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICBrZXksXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIGdldENoYXJhY3RlcmlzdGljIChjaGFyTmFtZSkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIGNoYXJOYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAga2V5ID09PSBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XG4gICAgaWYgKFxuICAgICAgWydsY2snLCAnbHVjaycsIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJykudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgc2hvcnROYW1lOiAnbHVjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnc2FuJyxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKS50b0xvd2VyQ2FzZSgpXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJ1blJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJldmVudFN0YW5kYnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID0gdHJ1ZVxuICAgIH1cbiAgICBvcHRpb25zLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihvcHRpb25zKVxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvbiAoKSB7XG4gICAgY29uc3Qgb2NjdXBhdGlvbiA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpXG4gICAgcmV0dXJuIG9jY3VwYXRpb25bMF1cbiAgfVxuXG4gIGdldCBhcmNoZXR5cGUgKCkge1xuICAgIGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJylcbiAgICByZXR1cm4gYXJjaGV0eXBlWzBdXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb24gKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvblNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IG9jY3VwYXRpb25Ta2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIGF3YWl0IHRoaXMub2NjdXBhdGlvbi5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogbnVsbCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGUgKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3QgYXJjaGV0eXBlU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJjaGV0eXBlU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IGFyY2hldHlwZVNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hcmNoZXR5cGUpIGF3YWl0IHRoaXMuYXJjaGV0eXBlLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IG51bGwgfSlcbiAgfVxuXG4gIGdldCBsdWNrICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicz8ubGNrPy52YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIHNldEx1Y2sgKHZhbHVlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzcGVuZEx1Y2sgKGFtb3VudCkge1xuICAgIGFtb3VudCA9IHBhcnNlSW50KGFtb3VudClcbiAgICBpZiAoISh0aGlzLmx1Y2sgPj0gYW1vdW50KSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc2V0THVjayh0aGlzLmx1Y2sgLSBhbW91bnQpXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlKVxuICB9XG5cbiAgZ2V0IHJhd0hwTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlICE9IG51bGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gQ29DQWN0b3IuaHBGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcywgdGhpcy50eXBlKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICB9XG5cbiAgYXN5bmMgX3NldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbXMgKHNraWxsTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAobGV0IHNraWxsIG9mIHNraWxsTGlzdCkge1xuICAgICAgc2tpbGwgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbClcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNraWxsLnN5c3RlbSwgJ2ZsYWdzJykpIHtcbiAgICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICB9XG4gICAgICAgIHNraWxsLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoc2tpbGwpKSB7XG4gICAgICAgIHByb2Nlc3NlZC5wdXNoKHNraWxsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbUlkID0gdGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGwubmFtZSlcbiAgICAgICAgaWYgKCFpdGVtSWQpIHtcbiAgICAgICAgICBwcm9jZXNzZWQucHVzaChza2lsbClcbiAgICAgICAgfSBlbHNlIGlmIChmbGFnKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgcHJvY2Vzc2VkLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkSXRlbXMgKGl0ZW1MaXN0LCBmbGFnID0gbnVsbCkge1xuICAgIGNvbnN0IHByb2Nlc3NlZCA9IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0KSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIWl0ZW0uc3lzdGVtLmZsYWdzKSBpdGVtLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICAgIGl0ZW0uc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgcHJvY2Vzc2VkLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSkpXG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRVbmlxdWVJdGVtIChza2lsbCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgIGlmICghaXRlbUlkKSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIXNraWxsLnN5c3RlbS5mbGFncykgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtza2lsbF0sIHtcbiAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICB9XG4gIH1cblxuICBnZXQgcmF3TXBNYXggKCkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8pIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIENvQ0FjdG9yLm1wRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgICB9IGVsc2UgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KVxuICB9XG5cbiAgZ2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHR5cGVvZiBzYW5SZWFzb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzLmZpbHRlcihcbiAgICAgICAgICByID0+IHIudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzYW5SZWFzb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICApWzBdID8/IHsgdHlwZTogJycsIHRvdGFsTG9zczogMCwgaW1tdW5pdHk6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJycsIHRvdGFsTG9zczogMCwgaW1tdW5pdHk6IGZhbHNlIH1cbiAgfVxuXG4gIHNhbkxvc3RUb1JlYXNvbiAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHNhblJlYXNvbikge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICAgIHJldHVybiBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQgKHNhblJlYXNvbikge1xuICAgIGlmIChzYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnR5cGUgIT09ICcnXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XG4gICAgaWYgKHR5cGVvZiBzYW5SZWFzb24gPT09ICdzdHJpbmcnICYmIHNhblJlYXNvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKVxuICAgICAgY29uc3QgaW5kZXggPSBzYW5pdHlMb3NzRXZlbnRzLmZpbmRJbmRleChcbiAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICAgIGlmIChzYW5Mb3NzID4gMCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IHNhblJlYXNvbixcbiAgICAgICAgICAgIHRvdGFsTG9zczogc2FuTG9zcyxcbiAgICAgICAgICAgIGltbXVuaXR5OiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50c1tpbmRleF0udG90YWxMb3NzICs9IHNhbkxvc3NcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG1heExvc3NUb1NhblJlYXNvbiAoc2FuUmVhc29uLCBzYW5NYXhGb3JtdWxhKSB7XG4gICAgY29uc3Qgc2FuTWF4ID0gbmV3IFJvbGwoc2FuTWF4Rm9ybXVsYS50b1N0cmluZygpKS5ldmFsdWF0ZSh7XG4gICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgIH0pLnRvdGFsXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2FuTWF4IC0gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcylcbiAgfVxuXG4gIGFzeW5jIGxvb3NlU2FuIChzYW5SZWFzb24sIHNhbkxvc3MpIHtcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgIGlmICghc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiAtIHNhbkxvc3MpXG4gICAgICB0aGlzLnNldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uLCBzYW5Mb3NzKVxuICAgICAgcmV0dXJuIHNhbkxvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3MgKGNoZWNrUGFzc2VkKSB7XG4gICAgaWYgKGNoZWNrUGFzc2VkKSByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWRcbiAgICByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrUGFzc2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzQ2hlY2tGYWlsbGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc01heCAoKSB7XG4gICAgaWYgKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNaW4gKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuPy5kYWlseUxvc3MgfHwgMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTGltaXQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMaW1pdCB8fCAwXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdGh1bGh1TXl0aG9zKSByZXR1cm4gTWF0aC5tYXgoOTkgLSB0aGlzLmN0aHVsaHVNeXRob3MsIDApXG4gICAgICByZXR1cm4gOTlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heClcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgbXAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlKVxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICAvLyBUT0RPIGlmIGFueSBpcyBudWxsIHNldCBtYXggYmFjayB0byBudWxsLlxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgICAgIH1cbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGFzeW5jIHNldE1wICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSkgeyB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCBzYW4gKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSlcbiAgfVxuXG4gIGdldCBpbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbikge1xuICAgICAgICBvY2N1cGF0aW9uUG9pbnRzICs9IHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgaWYgKCF0aGlzLm9jY3VwYXRpb24pIHJldHVybiAwXG4gICAgbGV0IHBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5vY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICApKSB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgIHBvaW50cyArPSBjaGFyLnZhbHVlICogTnVtYmVyKHZhbHVlLm11bHRpcGxpZXIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludHNcbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldFBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgIH0pXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBhcmNoZXR5cGVQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKSB7XG4gICAgICAgIGFyY2hldHlwZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuYXJjaGV0eXBlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmNoZXR5cGVQb2ludHNcbiAgfVxuXG4gIGdldCBhcmNoZXR5cGVQb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5hcmNoZXR5cGUpIHJldHVybiAwXG4gICAgcmV0dXJuIHRoaXMuYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICB9XG5cbiAgZ2V0IGV4cGVyaWVuY2VQb2ludHMgKCkge1xuICAgIGxldCBleHBlcmllbmNlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpIHtcbiAgICAgICAgZXhwZXJpZW5jZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXhwZXJpZW5jZVBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBwZXJzb25hbFBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbCkge1xuICAgICAgICBwZXJzb25hbFBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMucGVyc29uYWxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBlcnNvbmFsUG9pbnRzXG4gIH1cblxuICBnZXQgcGVyc29uYWxQb2ludHMgKCkge1xuICAgIHJldHVybiAyICogTnVtYmVyKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUpXG4gIH1cblxuICBnZXQgaGFzRGV2ZWxvcG1lbnRQaGFzZSAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRTYW4gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KSB7IHZhbHVlID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4IH1cbiAgICBjb25zdCBsb3NzID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpIC0gdmFsdWVcblxuICAgIGlmIChsb3NzID4gMCkge1xuICAgICAgbGV0IHRvdGFsTG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcylcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgIDogMFxuICAgICAgdG90YWxMb3NzID0gdG90YWxMb3NzICsgbG9zc1xuICAgICAgaWYgKGxvc3MgPj0gNSkgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICBpZiAodG90YWxMb3NzID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSxcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiB0b3RhbExvc3NcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSc6IHZhbHVlIH0pXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBhc3luYyBzZXRBdHRyaWJBdXRvICh2YWx1ZSwgYXR0cmliKSB7XG4gICAgY29uc3QgdXBkYXRlZEtleSA9IGBzeXN0ZW0uYXR0cmlicy4ke2F0dHJpYn0uYXV0b2BcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyBbdXBkYXRlZEtleV06IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBdHRyaWJBdXRvIChhdHRyaWIpIHtcbiAgICB0aGlzLnNldEF0dHJpYkF1dG8oIXRoaXMuc3lzdGVtLmF0dHJpYnNbYXR0cmliXS5hdXRvLCBhdHRyaWIpXG4gIH1cblxuICBzdGF0aWMgZGJGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuICcxRDQnXG4gICAgcmV0dXJuIGAke01hdGguZmxvb3IoKHN1bSAtIDQ1KSAvIDgwKX1ENmBcbiAgfVxuXG4gIHN0YXRpYyBidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MgKGNoYXJhY3RlcmlzdGljcykge1xuICAgIGNvbnN0IHN1bSA9IChjaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID8/IDApICsgKGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgPz8gMClcbiAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxuICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgaWYgKHN1bSA8IDEyNSkgcmV0dXJuIDBcbiAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxuICAgIHJldHVybiBNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCkgKyAxXG4gIH1cblxuICBzdGF0aWMgaHBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUpIHtcbiAgICBjb25zdCBzdW0gPSBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDAsIDEwKSArIHBhcnNlSW50KGNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgPz8gMCwgMTApXG4gICAgY29uc3QgZGl2aXNvciA9IChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcpICYmIHR5cGUgPT09ICdjaGFyYWN0ZXInID8gNSA6IDEwKVxuICAgIHJldHVybiBNYXRoLmZsb29yKHN1bSAvIGRpdmlzb3IpXG4gIH1cblxuICBzdGF0aWMgbXBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgfVxuXG4gIHN0YXRpYyBtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUsIGFnZSkge1xuICAgIGxldCBNT1ZcbiAgICBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUpIHtcbiAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgfSBlbHNlIGlmIChjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgfHwgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA4XG4gICAgfSBlbHNlIHtcbiAgICAgIE1PViA9IDdcbiAgICB9XG4gICAgaWYgKHR5cGUgIT09ICdjcmVhdHVyZScgJiYgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQoYWdlKSkpIHtcbiAgICAgICAgTU9WID0gcGFyc2VJbnQoYWdlKSA+PSA0MCA/IE1PViAtIE1hdGguZmxvb3IocGFyc2VJbnQoYWdlKSAvIDEwKSArIDMgOiBNT1ZcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1PVilcbiAgfVxuXG4gIGdldCByYXdCdWlsZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIHtcbiAgICAgIHJldHVybiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3RGIgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuZGIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCByYXdNb3YgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMubW92KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0bykge1xuICAgICAgY29uc3QgTU9WID0gQ29DQWN0b3IubW92RnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMuc3lzdGVtLnR5cGUsIHRoaXMuc3lzdGVtLmluZm9zLmFnZSlcbiAgICAgIGlmIChNT1YgPiAwKSByZXR1cm4gTU9WXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlXG4gIH1cblxuICBnZXQgdG9rZW5JZCAoKSB7XG4gICAgLy8gVE9ETyBjbGFyaWZpZXIgY2EgZXQgdG9rZW5rZXlcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbG9ja2VkICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICB9XG5cbiAgZ2V0SXRlbXNGcm9tTmFtZSAobmFtZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkubmFtZSA9PT0gbmFtZSlcbiAgfVxuXG4gIHNldCBsb2NrZWQgKHZhbHVlKSB7XG4gICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGF0dHJpYnV0ZU5hbWUga2V5IG9mIGF0dHJpYnV0ZSB0byBjaGVjayBpbiBbJ2xjayddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgYXR0cmlidXRlQ2hlY2sgKGF0dHJpYnV0ZU5hbWUsIGZhc3RGb3J3YXJkID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGF0dHJpYiA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICBpZiAoIWF0dHJpYikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIG1pc3Npbmc6IGF0dHJpYnV0ZU5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmIChvcHRpb25zLm1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGxBdHRyaWJ1dGUoYXR0cmliLmtleSlcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gY2hhcmFjdGVyaXN0aWNOYW1lIGtleSBvZiBjaGFyYWN0ZXJpc3RpYyB0byBjaGVjayBpbiBbJ3N0cicsJ2NvbicsJ3NpeicsJ2RleCcsJ2FwcCcsJ2ludCcsJ3BvdycsJ2VkdSddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgY2hhcmFjdGVyaXN0aWNDaGVjayAoXG4gICAgY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgIGZhc3RGb3J3YXJkID0gZmFsc2UsXG4gICAgb3B0aW9ucyA9IHt9XG4gICkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhY3RlcmlzdGljTmFtZSlcblxuICAgIGlmICghY2hhcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgbWlzc2luZzogY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhci5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIHN0YXRpYyB0b29sVGlwU2tpbGxUZXh0ICgpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgKSB7XG4gICAgICBjb25zdCBpc0NvbWJhdCA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbGFzc0xpc3Q/LmNvbnRhaW5zKFxuICAgICAgICAnY29tYmF0J1xuICAgICAgKVxuICAgICAgY29uc3Qgc2tpbGxJZCA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgIGNvbnN0IGFjdG9yQXBwSWQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLndpbmRvdy1hcHAnKT8uZGF0YXNldD8uYXBwaWRcbiAgICAgIGlmICh0eXBlb2Ygc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGFjdG9yQXBwSWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB1aS53aW5kb3dzW2FjdG9yQXBwSWRdPy5hY3Rvcj8uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ySWQgPSB1aS53aW5kb3dzW2FjdG9yQXBwSWRdLmFjdG9yLmlkXG4gICAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gYWN0b3IuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGlzQ29tYmF0ID8gJ0NvQzcuVG9vbFRpcENvbWJhdCcgOiAnQ29DNy5Ub29sVGlwU2tpbGwnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2tpbGw6IHNraWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgcmVndWxhcjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICAgICAgaGFyZDogTWF0aC5mbG9vcihza2lsbC52YWx1ZSAvIDIpLFxuICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyA1KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgIGFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b29sVGlwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZ2V0SXRlbU9yQWRkIChpdGVtSWRlbnRpZmllciwgdHlwZSA9ICdza2lsbCcpIHtcbiAgICBjb25zdCB0eXBlQ29DSUQgPSBpdGVtSWRlbnRpZmllci5tYXRjaCgvXmlcXC4oW15cXFxcLl0rKVxcLi4vKVxuICAgIGlmICh0eXBlQ29DSUQpIHtcbiAgICAgIC8vIEF0dGVtcHQgdG8gbG9hZCBmcm9tIGFjdG9yIGJ5IENvQyBJRFxuICAgICAgbGV0IGl0ZW0gPSB0aGlzLmdldEZpcnN0SXRlbUJ5Q29DSUQoaXRlbUlkZW50aWZpZXIpXG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgY29uc3QgbmV3SXRlbXMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQmVzdCh7IGNvY2lkOiBpdGVtSWRlbnRpZmllciwgc2hvd0xvYWRpbmc6IHRydWUgfSlcbiAgICAgICAgaWYgKG5ld0l0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBuZXdJdGVtcylcbiAgICAgICAgICBpdGVtID0gdGhpcy5nZXRGaXJzdEl0ZW1CeUNvQ0lEKGl0ZW1JZGVudGlmaWVyKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9Ta2lsbEFkZGVkQXRCYXNlJywge1xuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBwZXJjZW50OiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0ucmVsb2FkKClcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID09PSAnJyAmJiBpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmdldEl0ZW1PckFkZChpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWUsICdza2lsbCcpXG4gICAgICAgICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLm1haW4uaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJ10gPSBza2lsbFswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID09PSAnJyAmJiBpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmdldEl0ZW1PckFkZChpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUsICdza2lsbCcpXG4gICAgICAgICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lJ10gPSBza2lsbFswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh1cGRhdGVzKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gW2l0ZW1dXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gbG9hZCBmb3IgYWN0b3IgYnkgbmFtZVxuICAgIGxldCBteUl0ZW1zID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoaXRlbUlkZW50aWZpZXIpXG4gICAgaWYgKCFteUl0ZW1zLmxlbmd0aCkge1xuICAgICAgY29uc3QgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgICAgLy8gQXR0ZW1wdCB0byBsb2FkIGl0ZW0gZnJvbSB3b3JsZFxuICAgICAgY29uc3QgbmV3SXRlbSA9IGdhbWUuaXRlbXMuZmluZCgoZCkgPT4ge1xuICAgICAgICBpZiAoZC50eXBlID09PSB0eXBlICYmIGQubmFtZSA9PT0gaXRlbUlkZW50aWZpZXIpIHtcbiAgICAgICAgICBjb25zdCBlcmFzID0gbmV3SXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzXG4gICAgICAgICAgaWYgKGVyYXMgJiYgT2JqZWN0LmtleXMoZXJhcykubGVuZ3RoID4gMCAmJiAhKGVyYXNbZXJhXSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG4gICAgICBpZiAobmV3SXRlbSkge1xuICAgICAgICBteUl0ZW1zLnB1c2gobmV3SXRlbSlcbiAgICAgIH1cbiAgICAgIGlmIChteUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBBdHRlbXB0IHRvIGxvYWQgaXRlbSBmcm9tIGNvbXBlbmRpdW1zXG4gICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICAgICAgaWYgKHBhY2subWV0YWRhdGE/LnR5cGUgPT09ICdJdGVtJykge1xuICAgICAgICAgICAgYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxuICAgICAgICAgICAgY29uc3QgbmV3SXRlbSA9IGdhbWUuaXRlbXMuZmluZCgoZCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZC50eXBlID09PSB0eXBlICYmIGQubmFtZSA9PT0gaXRlbUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcmFzID0gbmV3SXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzXG4gICAgICAgICAgICAgICAgaWYgKGVyYXMgJiYgT2JqZWN0LmtleXMoZXJhcykubGVuZ3RoID4gMCAmJiAhKGVyYXNbZXJhXSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAobmV3SXRlbSkge1xuICAgICAgICAgICAgICBteUl0ZW1zLnB1c2gobmV3SXRlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChteUl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgbXlJdGVtcylcbiAgICAgICAgbXlJdGVtcyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW1JZGVudGlmaWVyKVxuICAgICAgICBpZiAobXlJdGVtcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAobXlJdGVtc1swXS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvU2tpbGxBZGRlZEF0QmFzZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogbXlJdGVtc1swXS5uYW1lLFxuICAgICAgICAgICAgICBwZXJjZW50OiBteUl0ZW1zWzBdLnZhbHVlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9IGVsc2UgaWYgKG15SXRlbXNbMF0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IG15SXRlbXNbMF0ucmVsb2FkKClcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7fVxuICAgICAgICAgICAgaWYgKG15SXRlbXNbMF0uc3lzdGVtLnNraWxsLm1haW4uaWQgPT09ICcnICYmIG15SXRlbXNbMF0uc3lzdGVtLnNraWxsLm1haW4ubmFtZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmdldEl0ZW1PckFkZChteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5tYWluLm5hbWUsICdza2lsbCcpXG4gICAgICAgICAgICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwubWFpbi5pZCddID0gc2tpbGxbMF0uaWRcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJ10gPSBza2lsbFswXS5uYW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID09PSAnJyAmJiBteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQobXlJdGVtc1swXS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lLCAnc2tpbGwnKVxuICAgICAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSddID0gc2tpbGxbMF0ubmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGF3YWl0IG15SXRlbXNbMF0udXBkYXRlKHVwZGF0ZXMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBteUl0ZW1zXG4gIH1cblxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBza2lsbElkZW50aWZpZXIgPSBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhXG4gICAgbGV0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQoc2tpbGxJZGVudGlmaWVyLCAnc2tpbGwnKVxuICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgIG9wdGlvbnMubmFtZSA9IHNraWxsWzBdLm5hbWVcbiAgICB9XG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChza2lsbERhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5pZCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoc2tpbGxEYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICAvLyBObyBza2lsbCBmb3VuZCwgdHJ5IHRvIGdldCBnZXQgaXQgZnJvbSBjb21wZW5kaXVtICFcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgcmV0cmlldmFsIG9mIHNraWxsIGZyb20gY29tcGVuZGl1bSAhIVxuICAgICAgICAvLyBnYW1lLnNldHRpbmdzLmdldCggJ0NvQzcnLCAnRGVmYXVsdENvbXBlbmRpdW0nKTtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gJz8nXG4gICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgfVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1NraWxsJykgKyAnICcgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgICAgIG1pc3Npbmc6IHNraWxsSWRlbnRpZmllcixcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgY3JlYXRlID0gZmFsc2VcbiAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFkZFdlYXBvbnRIaW50Jywge1xuICAgICAgICAgIHdlYXBvbjogc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSldKVxuICAgICAgfSBlbHNlIHJldHVyblxuXG4gICAgICBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW0ubmFtZSlcblxuICAgICAgaWYgKCFza2lsbC5sZW5ndGgpIHJldHVyblxuXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGF3YWl0IFNraWxsVmFsdWVEaWFsb2cuY3JlYXRlKFxuICAgICAgICAgIHNraWxsWzBdLm5hbWUsXG4gICAgICAgICAgc2tpbGxbMF0uYmFzZVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsVmFsdWUuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZVZhbHVlKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmRpZmZpY3VsdHkgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBvcHRpb25zLm1vZGlmaWVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBpZiAob3B0aW9ucy5wdXNoaW5nID09PSAnZmFsc2UnKSBjaGVjay5wdXNoaW5nID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLnB1c2hpbmcgPSAhIW9wdGlvbnMucHVzaGluZ1xuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZShjaGVjay5wdXNoaW5nKVxuICB9XG5cbiAgYXN5bmMgd2VhcG9uQ2hlY2sgKHdlYXBvbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBsZXQgd2VhcG9uXG4gICAgaWYgKHR5cGVvZiB3ZWFwb25EYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSBhd2FpdCBmcm9tVXVpZCh3ZWFwb25EYXRhLnV1aWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2VhcG9uRGF0YS5pZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXG4gICAgfVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICBsZXQgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZSh3ZWFwb25EYXRhLm5hbWUpXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXG4gICAgICAgICAgaWYgKHBhY2spIHtcbiAgICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGFjdG9yID1cbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBhcmVudD8uYWN0b3IgIT09ICd1bmRlZmluZWQnID8gdGhpcy5wYXJlbnQuYWN0b3IgOiB0aGlzXG5cbiAgICAgICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IGFjdG9yLmdldEl0ZW1zRnJvbU5hbWUoaXRlbS5uYW1lKVxuICAgICAgICAgIGlmICghd2VhcG9ucy5sZW5ndGgpIHJldHVyblxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNOb1dlYXBvbk5hbWVkJywge1xuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgd2VhcG9uTmFtZTogd2VhcG9uRGF0YS5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh3ZWFwb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JBY3Rvckhhc1Rvb01hbnlXZWFwb25zTmFtZWQnLCB7XG4gICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHdlYXBvbiA9IHdlYXBvbnNbMF1cbiAgICB9XG5cbiAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCAod2VhcG9uRGF0YS51dWlkIHx8IHdlYXBvbi5pZCksIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbml0aWF0aXZlIChoYXNHdW4gPSBmYWxzZSkge1xuICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSkge1xuICAgICAgY2FzZSAnb3B0aW9uYWwnOiB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKHRoaXMuYWN0b3JLZXkpXG4gICAgICAgIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUx1Y2sgPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUJsaW5kVGFtcGVyaW5nID0gdHJ1ZVxuICAgICAgICByb2xsLmhpZGVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycpID09PSBmYWxzZVxuICAgICAgICByb2xsLmZsYXZvciA9ICdJbml0aWF0aXZlIHJvbGwnXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKCdkZXgnLCBoYXNHdW4gPyAxIDogMClcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHJvbGwuc3VjY2Vzc0xldmVsICsgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDEwMFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBoYXNHdW5cbiAgICAgICAgICA/IHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgKyA1MFxuICAgICAgICAgIDogdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGdldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIHNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldFdlYXBvblNraWxscyAoaXRlbUlkKSB7XG4gICAgbGV0IHdlYXBvbiA9IGZyb21VdWlkU3luYyhpdGVtSWQpXG4gICAgaWYgKCF3ZWFwb24pIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWFwb24uc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gZ2FtZS5wYWNrcy5nZXQod2VhcG9uLnBhY2spLmdldCh3ZWFwb24uX2lkKVxuICAgIH1cbiAgICBpZiAod2VhcG9uLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKSlcbiAgICB9XG5cbiAgICBpZiAod2VhcG9uLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSlcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgLyoqIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSBvciBza2lsbCB0aGF0IG1hdGNoZXMgdGhlIG5hbWUgKi9cbiAgZmluZCAobmFtZSkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIFRyeSBJRFxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChuYW1lKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVnRXhwID0gL1xcKChbXildKylcXCkvXG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlZ0V4cC5leGVjKG5hbWUpXG4gICAgbGV0IHNob3J0TmFtZSA9IG51bGxcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkgc2hvcnROYW1lID0gbWF0Y2hlc1sxXVxuICAgIC8vIFRyeSB0byBmaW5kIGEgc2tpbGwgd2l0aCBleGFjdCBuYW1lLlxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFzLm5hbWUgJiZcbiAgICAgICAgKHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoc2tpbGwubGVuZ3RoKSByZXR1cm4geyB0eXBlOiAnaXRlbScsIHZhbHVlOiBza2lsbFswXSB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBhIGNoYXJhY3RlcmlzdGljLlxuICAgIGNvbnN0IGNoYXJLZXkgPSBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcktleVtpXSlcbiAgICAgIGlmIChjaGFyKSB7XG4gICAgICAgIGNoYXIubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBhdHRyaWJ1dGUuXG4gICAgY29uc3QgYXR0cmliS2V5ID0gWydsY2snLCAnc2FuJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYktleVtpXSlcbiAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgIGF0dHIubmFtZSA9IGF0dHIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHdpdGggcGFydGlhbCA/P1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwaWxvdFNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuUGlsb3RTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkcml2ZVNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuRHJpdmVTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0b2tlblV1aWQgKCkge1xuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gdGhpcy5zaGVldC50b2tlbi51dWlkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIC8vIENsYXJpZmllciBjYSBldCB0b2tlbmlkXG4gICAgLyoqICogTU9ESUYgMC44LnggKi9cbiAgICAvLyBpZiB0aGlzLnNoZWV0LnRva2VuID0+IHdhcyBvcGVuZWQgZnJvbSB0b2tlblxuICAgIC8vIGlmIHRoaXMudG9rZW4gPT4gc3ludGhldGljIGFjdG9yID09IHRoaXMuaXNUb2tlblxuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9XG4gICAgLyoqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vQ2FzZSAxOiB0aGUgYWN0b3IgaXMgYSBzeW50aGV0aWMgYWN0b3IgYW5kIGhhcyBhIHRva2VuLCByZXR1cm4gdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLmlzVG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmlkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuXG4gICAgLy8gLy9DYXNlIDI6IHRoZSBhY3RvciBpcyBub3QgYSB0b2tlbiAobGlua2VkIGFjdG9yKS4gSWYgdGhlIHNoZWV0IGhhdmUgYW4gYXNzb2NpYXRlZCB0b2tlbiByZXR1cm4gdGhlIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5zaGVldC50b2tlbikgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4uc2NlbmU/LmlkP3RoaXMuc2hlZXQudG9rZW4uc2NlbmUuaWQ6J1RPS0VOJ30uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWA7XG5cbiAgICAvLyAvL0Nhc2UgMzogQWN0b3IgaGFzIG5vIHRva2VuIHJldHVybiBoaXMgSUQ7XG4gICAgLy8gcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXQgYWN0b3JLZXkgKCkge1xuICAgIGlmICh0aGlzLnByb3RvdHlwZVRva2VuLmFjdG9yTGluaykgcmV0dXJuIHRoaXMuaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIHRoaXMudG9rZW5LZXlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBnZXQgaGFzUm9sbGFibGVDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIodmFsdWUuZm9ybXVsYSkpKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBob3NSb2xsYWJsZVNraWxscyAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKGlzTmFOKHNraWxsLnN5c3RlbT8udmFsdWUpKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgdGhlIGZvcm11bGEgaWYgYXZhaWxhYmxlIHRvIHJvbGwgc29tZSBjaGFyYWN0ZXJpdGljcy5cbiAgICovXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmIChyLnRvdGFsKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgIHIudG90YWxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlcmUgaXMgYSBmb3JtdWxhLCB3aWxsIHNldCB0aGUgY2hhcmFjdGVyaXN0aWMgdG8gdGhlIGF2ZXJhZ2UgdmFsdWUgLGlmIGRpdmlzaWJsZSBieSA1LCBvciB0aGUgY2xvc2VzdCAxMC5cbiAgICovXG4gIGFzeW5jIGF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgYXZlcmFnZSA9IG5ldyBBdmVyYWdlUm9sbCgnKCcgKyB2YWx1ZS5mb3JtdWxhICsgJyknKS5ldmFsdWF0ZSh7IG1pbmltaXplOiB0cnVlLCBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBhdmVyYWdlXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgYSBjaGFyYWN0ZXJpc2l0YyBmb3JtdWxhIGlzIGEgcmVmZXJlbmNlIHRvIGFuIG90aGVyIGNoYXJhY3RlcmlzdGljIGFuZCBzZXQgaXQgYWNjb3JkaW5nbHkuXG4gICAqL1xuICBhc3luYyByZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiB2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBsZXQgY2hhclZhbHVlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2hhclZhbHVlID0gbmV3IFJvbGwoXG4gICAgICAgICAgICB2YWx1ZS5mb3JtdWxhLFxuICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXG4gICAgICAgICAgKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhclZhbHVlKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gIH1cblxuICBhc3luYyBzZXRDaGFyYWN0ZXJpc3RpYyAobmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHt9XG4gICAgY29uc3QgY2hhclZhbHVlID0gaXNOYU4ocGFyc2VJbnQodmFsdWUpKSA/IG51bGwgOiBwYXJzZUludCh2YWx1ZSlcbiAgICBjaGFyYWN0ZXJpc3RpY1tuYW1lXSA9IGNoYXJWYWx1ZVxuICAgIGlmICghY2hhclZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IGZvcm11bGEgPSBuYW1lLnJlcGxhY2UoJy52YWx1ZScsICcuZm9ybXVsYScpXG4gICAgICAgIGNoYXJhY3RlcmlzdGljW2Zvcm11bGFdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpYylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BlbWVudFBoYXNlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZmFpbHVyZSA9IFtdXG4gICAgY29uc3Qgc3VjY2VzcyA9IFtdXG4gICAgY29uc3Qgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgPSA5MFxuICAgIGNvbnN0IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQgPSA5NVxuXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEFsbDREZXYnKVxuICAgIGxldCBza2lsbHNSb2xsZWQgPSAwXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgaWYgKGl0ZW0uZGV2ZWxvcGVtZW50RmxhZykge1xuICAgICAgICAgIHNraWxsc1JvbGxlZCsrXG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMDAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxsVmFsdWUgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgbGV0IGF1Z21lbnQgPSBudWxsXG4gICAgICAgICAgbGV0IHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IG51bGxcbiAgICAgICAgICBpZiAoZGllLnRvdGFsID4gc2tpbGxWYWx1ZSB8fCBkaWUudG90YWwgPj0gYWx3YXlzU3VjY2Vzc1RocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAgfSkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgICBhc3luYzogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHN1Y2Nlc3MucHVzaChpdGVtLmlkKVxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFNBTiBhdWdtZW50IHdoZW4gdGhlIHNraWxsIGdvZXMgYmV5b25kIHRoZSBza2lsbCBtYXN0ZXJpbmcgdGhyZXNob2xkLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBza2lsbFZhbHVlIDwgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgJiZcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWwgPj0gc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBhdWdtZW50U0FORGllID0gYXdhaXQgbmV3IERpZSh7XG4gICAgICAgICAgICAgICAgZmFjZXM6IDYsXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAyXG4gICAgICAgICAgICAgIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkID0gYXVnbWVudFNBTkRpZS50b3RhbFxuICAgICAgICAgICAgICBjb25zdCBzYW5HYWluZWRNZXNzYWdlID0gYEdhaW5lZCAyZDYgKCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX0gPSAke3NhbkdhaW5lZH0pIFNBTmBcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhzYW5HYWluZWRNZXNzYWdlKVxuICAgICAgICAgICAgICBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuU2FuR2FpbmVkJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXN1bHRzOiBgJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfWAsXG4gICAgICAgICAgICAgICAgICBzYW5HYWluZWQsXG4gICAgICAgICAgICAgICAgICBza2lsbDogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgc2tpbGxWYWx1ZTogc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICAgIC8vIFNldCBzYW4gY29udHJvbHMgdGhhdCBpdCBkb2Vzbid0IGF1Z21lbnQgYmV5b25kIHNhbk1heFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiArIHNhbkdhaW5lZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1Z21lbnQgKz0gYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldlN1Y2Nlc3MnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgIGlmIChza2lsbE1hc3RlcmluZ01lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBza2lsbE1hc3RlcmluZ01lc3NhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0uaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldkZhaWx1cmUnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBmYWlsdXJlLnB1c2goaXRlbS5pZClcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgaXRlbS51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXG4gICAgICB9IGVsc2UgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAxKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MtLVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxuICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIGlmIChza2lsbHNSb2xsZWQpIHtcbiAgICAgICAgbWVzc2FnZSArPSAnPGJyPidcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWR1Y2VTYW5pdHlMaW1pdHMnKX08L3NwYW4+YFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMgfVxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHNraWxsc1JvbGxlZCA/IHRpdGxlIDogJycsIG1lc3NhZ2UsIHtcbiAgICAgICAgc3BlYWtlclxuICAgICAgfSlcbiAgICAgIHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4geyBmYWlsdXJlLCBzdWNjZXNzIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BMdWNrIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VycmVudEx1Y2sgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZVxuICAgIGlmICghY3VycmVudEx1Y2spIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IDAgfSlcbiAgICBjb25zdCBwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snXG4gICAgKVxuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICBjb25zdCBoaWdoZXJUaGFuQ3VycmVudEx1Y2sgPSB1cGdyYWRlUm9sbCA+IGN1cnJlbnRMdWNrXG4gICAgbGV0IGF1Z21lbnRSb2xsXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaykge1xuICAgICAgaGlnaGVyVGhhbkN1cnJlbnRMdWNrXG4gICAgICAgID8gKGF1Z21lbnRSb2xsID0gJzJEMTArMTAnKVxuICAgICAgICA6IChhdWdtZW50Um9sbCA9ICcxRDEwKzUnKVxuICAgIH0gZWxzZSBpZiAoaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XG4gICAgICBhdWdtZW50Um9sbCA9ICcxRDEwJ1xuICAgIH1cbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsTHVjazREZXYnKVxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGlmIChwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgfHwgaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XG4gICAgICBjb25zdCBhdWdtZW50VmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXVnbWVudFJvbGwpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSlcbiAgICAgICAgLnRvdGFsXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlICsgYXVnbWVudFZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tJbmNyZWFzZWQnLFxuICAgICAgICB7XG4gICAgICAgICAgZGllOiB1cGdyYWRlUm9sbCxcbiAgICAgICAgICBzY29yZTogY3VycmVudEx1Y2ssXG4gICAgICAgICAgYXVnbWVudDogYXVnbWVudFZhbHVlXG4gICAgICAgIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgJ0NvQzcuTHVja05vdEluY3JlYXNlZCcsXG4gICAgICAgIHsgZGllOiB1cGdyYWRlUm9sbCwgc2NvcmU6IGN1cnJlbnRMdWNrIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcFNraWxsIChza2lsbElkLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldChza2lsbElkKVxuICAgIGlmICghc2tpbGwpIHJldHVyblxuICAgIGxldCB0aXRsZSA9ICcnXG4gICAgbGV0IG1lc3NhZ2UgPSAnJ1xuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gbmV3IFJvbGwoJzFEMTAwJylcbiAgICBhd2FpdCB1cGdyYWRlUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh1cGdyYWRlUm9sbClcbiAgICBpZiAodXBncmFkZVJvbGwudG90YWwgPiBza2lsbC52YWx1ZSB8fCB1cGdyYWRlUm9sbC50b3RhbCA+PSA5NSkge1xuICAgICAgY29uc3QgYXVnbWVudFJvbGwgPSBuZXcgUm9sbCgnMUQxMCcpXG4gICAgICBhd2FpdCBhdWdtZW50Um9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGF1Z21lbnRSb2xsKVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2U3VjY2Vzc0RldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRSb2xsLnRvdGFsXG4gICAgICB9KVxuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnRSb2xsLnRvdGFsKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcbiAgICAgIH0pXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZGYWlsdXJlRGV0YWlscycsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMuX2lkIH1cbiAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlciB9KVxuICAgIGF3YWl0IHNraWxsLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBoYXNDb25kaXRpb25TdGF0dXMgKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8udmFsdWVcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvblZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBmYWxzZSAvLyBOZWNlc3NhcnksIGluY29ycmVjdCB0ZW1wbGF0ZSBpbml0aWFsaXphdGlvblxuICAgIH1cbiAgICByZXR1cm4gY29uZGl0aW9uVmFsdWVcbiAgfVxuXG4gIGhhc0NvbmRpdGlvblZhbHVlIChjb25kaXRpb25OYW1lLCBmaWVsZCkge1xuICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoY29uZGl0aW9uTmFtZSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKGNvbmRpdGlvbk5hbWUgPT09IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lICYmIGZpZWxkID09PSAnZHVyYXRpb25UZXh0Jykge1xuICAgICAgY29uc3QgcmVhbFRpbWUgPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdyZWFsVGltZScpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuaGFzQ29uZGl0aW9uVmFsdWUoY29uZGl0aW9uTmFtZSwgJ2R1cmF0aW9uJylcbiAgICAgIGlmICh0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yb3VuZHMnKVxuICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uY29uZGl0aW9ucz8uW2NvbmRpdGlvbk5hbWVdPy5bZmllbGRdXG4gIH1cblxuICBhc3luYyB0b2dnbGVDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpXG4gICAgaWYgKCFjb25kaXRpb25WYWx1ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oY29uZGl0aW9uTmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihjb25kaXRpb25OYW1lKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldENvbmRpdGlvbiAoXG4gICAgY29uZGl0aW9uTmFtZSxcbiAgICB7XG4gICAgICBmb3JjZVZhbHVlID0gZmFsc2UsXG4gICAgICBqdXN0VGhpcyA9IGZhbHNlLFxuICAgICAgcmVhbFRpbWUgPSBudWxsLFxuICAgICAgZHVyYXRpb24gPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IENvQzdBY3RpdmVFZmZlY3QuZmlsdGVyQWN0aXZlRWZmZWN0cyhlZmZlY3QsIGNvbmRpdGlvbk5hbWUpKVxuICAgICAgICAubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBjb25zdCBjdXN0b20gPSB7fVxuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICBjb3JlOiB7XG4gICAgICAgICAgICAgIG92ZXJsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgIHJlYWxUaW1lOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY3VzdG9tLmR1cmF0aW9uID0ge1xuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlIHx8IHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY3VzdG9tLmZsYWdzLkNvQzcucmVhbFRpbWUgPSByZWFsVGltZVxuICAgICAgICAgICAgY3VzdG9tLmZsYWdzID0ge1xuICAgICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgICAgcmVhbFRpbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgaWYgKHJlYWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tLmR1cmF0aW9uLnJvdW5kcyA9IGR1cmF0aW9uXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tLmR1cmF0aW9uLnNlY29uZHMgPSBkdXJhdGlvbiAqIDM2MDBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbHRlcihcbiAgICAgICAgICBlZmZlY3QgPT4gZWZmZWN0LmlkID09PSBjb25kaXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKGVmZmVjdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgICBpY29uOiBlZmZlY3RbMF0uaWNvbixcbiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTEnKSkge1xuICAgICAgICAgICAgLy8gRm91bmRyeVZUVCB2MTBcbiAgICAgICAgICAgIHNvdXJjZS5sYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShlZmZlY3RbMF0ubGFiZWwpXG4gICAgICAgICAgICBzb3VyY2UuZmxhZ3MgPSB7XG4gICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICBzdGF0dXNJZDogZWZmZWN0WzBdLmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291cmNlLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoZWZmZWN0WzBdLm5hbWUpXG4gICAgICAgICAgICBzb3VyY2Uuc3RhdHVzZXMgPSBbZWZmZWN0WzBdLmlkXVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlZmZlY3REYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzb3VyY2UsIGN1c3RvbSlcbiAgICAgICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2VmZmVjdERhdGFdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoaXMgZG9lc24ndCBleGlzdCBpbiBGb3VuZHJ5VlRUIEFjdGl2ZUVmZmVjdHM/XG4gICAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tLl9pZCA9IGVmZmVjdHNbMF1cbiAgICAgICAgYXdhaXQgc3VwZXIudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtjdXN0b21dKVxuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSB7fVxuICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF0gPSB0cnVlXG4gICAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBdID0gcmVhbFRpbWVcbiAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXSA9IGR1cmF0aW9uXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0ucmVhbFRpbWVgXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1yZWFsVGltZWBdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5kdXJhdGlvbmBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS4tPWR1cmF0aW9uYF0gPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZShmaWVsZHMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoIWp1c3RUaGlzKSB7XG4gICAgICAgIC8vIERvZXMgc2V0dGluZyB0aGUgY29uZGl0aW9uIGFsc28gdHJpZ2dlciBvdGhlciBhY3Rpb25zP1xuICAgICAgICAvLyAtIElmIEFjdGl2ZUVmZmVjdHMgYXJlIGFkZGVkIGhhc0NvbmRpdGlvblN0YXR1cyBmb3IgcmVjZW50bHkgYWRkZWQgY29uZGl0aW9ucyBtYXkgcmV0dXJuIGluY29ycmVjdGx5XG4gICAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5wcm9uZSlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBjb25DaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5zZXRDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUsIHsgZm9yY2VWYWx1ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IENvQzdBY3RpdmVFZmZlY3QuZmlsdGVyQWN0aXZlRWZmZWN0cyhlZmZlY3QsIGNvbmRpdGlvbk5hbWUpKVxuICAgICAgICAubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZvcmNlVmFsdWUgfHwgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09dmFsdWVgXTogbnVsbFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE8gOiBjaGVjayBpZiBldmVyIHVzZWRcbiAgYXN5bmMgcmVzZXRDb3VudGVyIChjb3VudGVyKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbY291bnRlcl06IDAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0RGFpbHlTYW5pdHkgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCc6IE1hdGguZmxvb3IoXG4gICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNVxuICAgICAgKSxcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogMFxuICAgIH0pXG4gIH1cblxuICBnZXQgZmlnaHRpbmdTa2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgY2xvc2VDb21iYXRXZWFwb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25MaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnd2VhcG9uJyAmJiAhdmFsdWUuc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZ2V0KHZhbHVlLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICB2YWx1ZS5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsID8gc2tpbGwudmFsdWUgOiAwXG4gICAgICAgIHdlYXBvbkxpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3ZWFwb25MaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHdlYXBvbkxpc3RcbiAgfVxuXG4gIGdldCBmaXJlYXJtU2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICdza2lsbCcgJiYgdmFsdWUuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgdXNlciAoKSB7XG4gICAgLy8gaXMgdGhhdCBhY3RvciBpbXBlcnNvbmFudGVkIGJ5IGEgdXNlciA/XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmluZCh1c2VyID0+IHtcbiAgICAgIGlmICh1c2VyLmNoYXJhY3Rlcikge1xuICAgICAgICBpZiAodXNlci5jaGFyYWN0ZXIuaWQgPT09IHRoaXMuaWQpIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGRvZGdlU2tpbGwgKCkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5nZXRGaXJzdEl0ZW1CeUNvQ0lEKCdpLnNraWxsLmRvZGdlJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZ1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RJdGVtQnlDb0NJRCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmNyZWRpdC1yYXRpbmcnKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvc1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RJdGVtQnlDb0NJRCgnaS5za2lsbC5jdGh1bGh1LW15dGhvcycpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jdGh1bGh1LW15dGhvcycpXG4gICAgKVxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBjdGh1bGh1TXl0aG9zICgpIHtcbiAgICBjb25zdCBDTSA9IHRoaXMuY3RodWxodU15dGhvc1NraWxsXG4gICAgaWYgKENNKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENNLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENNLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBteXRob3NIYXJkZW5lZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdteXRob3NIYXJkZW5lZCcpIHx8IGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRNeXRob3NIYXJkZW5lZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJywgdHJ1ZSlcbiAgfVxuXG4gIGdldCBteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnKSB8fCBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkgKCkge1xuICAgIGF3YWl0IHRoaXMuc2V0RmxhZygnQ29DNycsICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJywgdHJ1ZSlcbiAgfVxuXG4gIGdldCBjcmVkaXRSYXRpbmcgKCkge1xuICAgIGNvbnN0IENSID0gdGhpcy5jcmVkaXRSYXRpbmdTa2lsbFxuICAgIGlmIChDUikge1xuICAgICAgY29uc3QgdmFsdWUgPSBDUi52YWx1ZVxuICAgICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWVcbiAgICAgIHJldHVybiBwYXJzZUludChDUi5zeXN0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzdGF0aWMgbW9uZXRhcnlGb3JtYXQgKGZvcm1hdCwgc3ltYm9sLCB2YWx1ZSkge1xuICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmxzZDpcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodmFsdWUgLyAyNDApICsgJy8nICsgKE1hdGguZmxvb3IodmFsdWUgLyAxMikgJSAyMCkgKyAnLycgKyAodmFsdWUgJSAxMilcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMucm9tYW46XG4gICAgICAgIHJldHVybiAoTWF0aC5mbG9vcih2YWx1ZSAvIDQwMCkpICsgJy8nICsgKE1hdGguZmxvb3IodmFsdWUgLyAxNikgJSAyNSkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDgpICUgMikgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDQpICUgMikgKyAnLycgKyAodmFsdWUgJSA0KVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5kZWNpbWFsTGVmdDpcbiAgICAgICAgcmV0dXJuIHN5bWJvbCArIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiB9KS5yZXBsYWNlKC9cXC4wMCQvLCAnJylcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuZGVjaW1hbFJpZ2h0OlxuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLnJlcGxhY2UoL1xcLjAwJC8sICcnKSArICcgJyArIHN5bWJvbFxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5pbnRlZ2VyTGVmdDpcbiAgICAgICAgcmV0dXJuIHN5bWJvbCArIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcoKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5pbnRlZ2VyUmlnaHQ6XG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKCkgKyAnICcgKyBzeW1ib2xcbiAgICB9XG4gICAgcmV0dXJuICcwJ1xuICB9XG5cbiAgc3RhdGljIG1vbmV0YXJ5VmFsdWUgKGZvcm1hdCwgdmFsdWVzLCBDUiwgdHlwZSwgdmFsdWUpIHtcbiAgICBDUiA9IENSIHx8IDBcbiAgICBjb25zdCByb3cgPSB2YWx1ZXMuZmluZChyID0+ICh0eXBlb2Ygci5taW4gPT09ICdvYmplY3QnIHx8IHIubWluIDw9IENSKSAmJiAodHlwZW9mIHIubWF4ID09PSAnb2JqZWN0JyB8fCByLm1heCA+PSBDUikpXG4gICAgaWYgKHR5cGVvZiByb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiByb3dbdHlwZV0gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiByb3dbdmFsdWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5sc2Q6XG4gICAgICAgICAgc3dpdGNoIChyb3dbdHlwZV0pIHtcbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLm11bHRpcGxpZXI6XG4gICAgICAgICAgICAgIHJldHVybiAyNDAgKiBDUiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnZhbHVlOlxuICAgICAgICAgICAgICByZXR1cm4gMjQwICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuczpcbiAgICAgICAgICAgICAgcmV0dXJuIDEyICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuZDpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMucm9tYW46XG4gICAgICAgICAgc3dpdGNoIChyb3dbdHlwZV0pIHtcbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLm11bHRpcGxpZXI6XG4gICAgICAgICAgICAgIHJldHVybiA0MDAgKiBDUiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnZhbHVlOlxuICAgICAgICAgICAgICByZXR1cm4gNDAwICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuZGVuYXJpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDE2ICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMucXVpbmFyaWk6XG4gICAgICAgICAgICAgIHJldHVybiA4ICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuc2VzdGVydGlpOlxuICAgICAgICAgICAgICByZXR1cm4gNCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLmFzc2VzOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNwZW5kaW5nTGV2ZWwgKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ3NwZW5kaW5nVHlwZScsICdzcGVuZGluZ1ZhbHVlJylcbiAgfVxuXG4gIGdldCBjYXNoICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdjYXNoVHlwZScsICdjYXNoVmFsdWUnKVxuICB9XG5cbiAgZ2V0IGFzc2V0cyAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnYXNzZXRzVHlwZScsICdhc3NldHNWYWx1ZScpXG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICdza2lsbCcpIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBvd25lcnMgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmZpbHRlcihcbiAgICAgIHUgPT4gdGhpcy50ZXN0VXNlclBlcm1pc3Npb24odSwgJ09XTkVSJykgJiYgIXUuaXNHTVxuICAgIClcbiAgfVxuXG4gIGdldCBwbGF5ZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm93bmVycy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyVXNlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGdhbWUudXNlcnMuY29udGVudHMuZmlsdGVyKHUgPT4gdS5jaGFyYWN0ZXI/LmlkID09PSB0aGlzLmlkKVswXSB8fCBudWxsXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgc2V0SHAgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXhcbiAgICB9XG4gICAgY29uc3QgaGVhbHRoQmVmb3JlID0gdGhpcy5ocFxuICAgIGxldCBkYW1hZ2VUYWtlblxuICAgIC8vIGlzIGhlYWxpbmdcbiAgICBpZiAoaXNOYU4oaGVhbHRoQmVmb3JlKSB8fCB2YWx1ZSA+PSBoZWFsdGhCZWZvcmUpIHtcbiAgICAgIGF3YWl0IHRoaXMuX3NldEhwKHZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBkYW1hZ2VUYWtlbiA9IGhlYWx0aEJlZm9yZSAtIHZhbHVlXG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoZGFtYWdlVGFrZW4sIHsgaWdub3JlQXJtb3I6IHRydWUgfSlcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlIChhbW91bnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIC8vIFRPRE86IENoYW5nZSBvcHRpb25zIHRvIGxpc3Qgb2YgdmFsdWVzXG4gICAgY29uc3QgYXJtb3JEYXRhID0gb3B0aW9ucy5hcm1vclxuICAgICAgPyBvcHRpb25zLmFybW9yXG4gICAgICA6IHRoaXMuc3lzdGVtLmF0dHJpYnMuYXJtb3IgLy8gaWYgdGhlcmUgYXJtb3IgdmFsdWUgcGFzc2VkIHdlIHVzZSBpdFxuICAgIGNvbnN0IGdyb3NzRGFtYWdlID0gcGFyc2VJbnQoYW1vdW50KVxuICAgIGxldCBhcm1vclZhbHVlID0gMFxuICAgIGlmICghb3B0aW9ucy5pZ25vcmVBcm1vcikge1xuICAgICAgaWYgKGFybW9yRGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBub3BcbiAgICAgIH0gZWxzZSBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JEYXRhKSkge1xuICAgICAgICBhcm1vclZhbHVlID0gKGF3YWl0IG5ldyBSb2xsKGFybW9yRGF0YSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgfSBlbHNlIGlmICghaXNOYU4oTnVtYmVyKGFybW9yRGF0YSkpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSBOdW1iZXIoYXJtb3JEYXRhKVxuICAgICAgfSBlbHNlIGlmICghaXNOYU4oTnVtYmVyKGFybW9yRGF0YT8udmFsdWUpKSkge1xuICAgICAgICBhcm1vclZhbHVlID0gTnVtYmVyKGFybW9yRGF0YS52YWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZUFybW9yRm9ybXVsYScsIHtcbiAgICAgICAgICAgIHZhbHVlOiBhcm1vckRhdGFcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ldERhbWFnZSA9IGdyb3NzRGFtYWdlIC0gYXJtb3JWYWx1ZVxuICAgIGlmIChuZXREYW1hZ2UgPD0gMCkgcmV0dXJuIDBcbiAgICBhd2FpdCB0aGlzLl9zZXRIcCh0aGlzLmhwIC0gbmV0RGFtYWdlKVxuICAgIGlmIChuZXREYW1hZ2UgPj0gdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzJykpIHtcbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgICBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG5ldERhbWFnZSA+PSBNYXRoLmNlaWwodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggLyAyKSkge1xuICAgICAgICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgICAgICAgIHRoaXMuaXNUb2tlbiA/IHRoaXMudG9rZW5LZXkgOiB0aGlzLmlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbkNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBoYXNNYWpvcldvdW5kID0gZmFsc2VcbiAgICAgICAgaWYgKG5ldERhbWFnZSA+PSBNYXRoLmNlaWwodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggLyAyKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICAgIGhhc01ham9yV291bmQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhwID09PSAwKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICAgICAgaWYgKGhhc01ham9yV291bmQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV0RGFtYWdlXG4gIH1cblxuICBnZXQgbWFqb3JXb3VuZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICB9XG5cbiAgZ2V0IGR5aW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuZHlpbmcpXG4gIH1cblxuICBnZXQgdW5jb25zY2lvdXMgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgfVxuXG4gIGdldCBkZWFkICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGdldCBwcm9uZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnByb25lKVxuICB9XG5cbiAgLy8gc3RhdGljIHVwZGF0ZUFjdG9yKCBhY3RvciwgZGF0YVVwZGF0ZSl7XG4gIC8vICAgaWYoIGdhbWUudXNlci5pc0dNKXtcbiAgLy8gICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYHVwZGF0aW5nIGFjdG9yICR7YWN0b3IubmFtZX1gKTtcbiAgLy8gICAgIGNvbnN0IHByb25lID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMucHJvbmVdO1xuICAvLyAgICAgY29uc3QgdW5jb25zY2lvdXMgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy51bmNvbnNjaW91c107XG4gIC8vICAgICBjb25zdCBjcml0aWNhbFdvdW5kcyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzXTtcbiAgLy8gICAgIGNvbnN0IGR5aW5nID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuZHlpbmddO1xuICAvLyAgICAgaWYoIHByb25lKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yUHJvbmUnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgICBpZiggdW5jb25zY2lvdXMpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JVbmNvbnNjaW91cycsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCBjcml0aWNhbFdvdW5kcykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3Rvck1ham9yV291bmQnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgICBpZiggZHlpbmcpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JEeWluZycsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICB9XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG5cbiAgLy8gXCJDb0M3LkluZm9BY3RvclByb25lXCI6IFwie2FjdG9yfSBmYWxsIHByb25lXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JVbmNvbnNjaW91c1wiOiBcInthY3Rvcn0gZmFsbCB1bmNvbnNjaW91c1wiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yTWFqb3JXb3VuZFwiOiBcInthY3Rvcn0gZ2V0IGEgbWFqb3Igd291bmRcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvckR5aW5nXCI6IFwie2Fjb3J9IGlzIGR5aW5nXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JJbmp1cmllZFwiOiBcInthY3Rvcn0gaXMgaW5qdXJpZWRcIixcblxuICAvLyBzdGF0aWMgdXBkYXRlVG9rZW4oIHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSl7XG4gIC8vICAgY29uc3QgaW5qdXJpZWQgPSBkYXRhVXBkYXRlPy5hY3RvckRhdGE/LmZsYWdzPy5Db0M3Py5pbmp1cmllZDtcbiAgLy8gICBpZiggaW5qdXJpZWQpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JJbmp1cmllZCcsIHthY3RvcjogdG9rZW4ubmFtZX0pKTtcbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBhc3luYyB1cGRhdGUgKGRhdGEgPSB7fSwgY29udGV4dCA9IHt9KSB7XG4gIC8vICAgY29uc29sZS5sb2coJz4+Pj4nLCBkYXRhLCBjb250ZXh0KVxuICAvLyAgIHN1cGVyLnVwZGF0ZShkYXRhLCBjb250ZXh0KVxuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIEF1ZGlvSGVscGVyLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIGdldENvbXB1dGVkU3R5bGUsIEl0ZW0sIHJlbmRlclRlbXBsYXRlLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoZWNrIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGFjdG9yID0gbnVsbCxcbiAgICBza2lsbCA9IG51bGwsXG4gICAgaXRlbSA9IG51bGwsXG4gICAgZGljZU1vZCA9IDAsXG4gICAgZGlmZmljdWx0eSA9IG51bGwsXG4gICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMCxcbiAgICBmbGF0RGljZU1vZGlmaWVyID0gMFxuICApIHtcbiAgICB0aGlzLmFjdG9yID0gYWN0b3JcbiAgICB0aGlzLnNraWxsID0gc2tpbGxcbiAgICB0aGlzLml0ZW0gPSBpdGVtXG4gICAgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIHRoaXMucmF3VmFsdWUgPSAwIC8vIHZhbHVlIG5lZWRlZCBiZWZvcmUgZGlmZmljdWx0eVxuICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gbnVsbFxuICAgIHRoaXMucmVmZXJlbmNlTWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMucHVzaGluZyA9IGZhbHNlXG4gICAgdGhpcy5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG5cbiAgICBpZiAoZGlmZmljdWx0eSA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgaXNVbmtub3duID1cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpID09PSAndW5rbm93bidcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IGlzVW5rbm93blxuICAgICAgICA/IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93blxuICAgICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgY2FyZFR5cGUgKCkge1xuICAgIHJldHVybiAncm9sbENhcmQnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRpZmZpY3VsdHlMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVua25vd246IC0xLFxuICAgICAgcmVndWxhcjogMSxcbiAgICAgIGhhcmQ6IDIsXG4gICAgICBleHRyZW1lOiAzLFxuICAgICAgY3JpdGljYWw6IDQsXG4gICAgICBpbXBvc3NpYmxlOiA5XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBzdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmdW1ibGU6IC05OSxcbiAgICAgIGZhaWx1cmU6IDAsXG4gICAgICByZWd1bGFyOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGV4dHJlbWU6IDMsXG4gICAgICBjcml0aWNhbDogNFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYXJhY3RlcmlzdGljOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgYXR0cmlidXRlOiAnYXR0cmlidXRlJyxcbiAgICAgIHNraWxsOiAnaXRlbScsXG4gICAgICBpdGVtOiAnaXRlbScsXG4gICAgICB2YWx1ZTogJ3ZhbHVlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkaWZmaWN1bHR5U3RyaW5nIChkaWZmaWN1bHR5TGV2ZWwpIHtcbiAgICBzd2l0Y2ggKFxuICAgICAgIWlzTmFOKE51bWJlcihkaWZmaWN1bHR5TGV2ZWwpKVxuICAgICAgICA/IE51bWJlcihkaWZmaWN1bHR5TGV2ZWwpXG4gICAgICAgIDogZGlmZmljdWx0eUxldmVsXG4gICAgKSB7XG4gICAgICBjYXNlICc/JzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKysrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBnZXQgcmF3VmFsdWUgKCkge1xuICAgIC8vIGlmICghdGhpcy5hY3RvciB8fCAhdGhpcy5hY3Rvci5pZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPVxuICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNraWxsLnZhbHVlXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAxKSByZXR1cm4gMVxuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCByYXdWYWx1ZSAoeCkge1xuICAgIHRoaXMuX3Jhd1ZhbHVlID0geFxuICB9XG5cbiAgc2V0IHV1aWQgKHgpIHtcbiAgICB0aGlzLl91dWlkID0geFxuICB9XG5cbiAgZ2V0IHV1aWQgKCkge1xuICAgIGlmICghdGhpcy5fdXVpZCkgdGhpcy5fdXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgcmV0dXJuIHRoaXMuX3V1aWRcbiAgfVxuXG4gIGdldCBoYXNDYXJkICgpIHtcbiAgICBjb25zdCBjaGF0Q2FyZCA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnV1aWQgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd1dWlkJykgJiZcbiAgICAgICAgQ29DN0NoZWNrLmNhcmRUeXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoY2hhdENhcmQubGVuZ3RoID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByYXdWYWx1ZVN0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMuX3Jhd1ZhbHVlID09PSAwKSB7XG4gICAgICByZXR1cm4gJzAnXG4gICAgfVxuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoXG4gICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICkge1xuICAgICAgaWYgKHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyAnKycgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXG4gICAgICApXG4gICAgfSBlbHNlIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpXG4gIH1cblxuICBnZXQgY3JpdGljYWxUaHJlc2hvbGQgKCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBnZXQgcmVndWxhclRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlID49IDEwMCkgcmV0dXJuIDk5XG4gICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5yYXdWYWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBoYXJkVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBleHRyZW1lVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDUpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdW1ibGVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmVtZVRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWUgPCA1MCA/IDk2IDogMTAwXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc3VjY2VzVGhyZXNob2xkICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHlTdHJpbmcgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBnZXQgbW9kaWZpZWRSZXN1bHQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodHlwZW9mIHRoaXMuX21vZGlmaWVkUmVzdWx0ICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuX21vZGlmaWVkUmVzdWx0XG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgY29uc3QgbW9kaWZpZWQgPSB0aGlzLmRpY2VzLnRvdGFsICsgdGhpcy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICBpZiAobW9kaWZpZWQgPCAxKSByZXR1cm4gMVxuICAgICAgaWYgKG1vZGlmaWVkID4gMTAwKSByZXR1cm4gMTAwXG4gICAgICByZXR1cm4gbW9kaWZpZWRcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGljZXMudG90YWxcbiAgfVxuXG4gIHNldCBtb2RpZmllZFJlc3VsdCAoeCkge1xuICAgIHRoaXMuX21vZGlmaWVkUmVzdWx0ID0geFxuICB9XG5cbiAgZ2V0IGZsYXREaWNlTW9kaWZpZXJTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5mbGF0RGljZU1vZGlmaWVyKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gYCske3RoaXMuZmxhdERpY2VNb2RpZmllcn1gXG4gICAgcmV0dXJuIHRoaXMuZmxhdERpY2VNb2RpZmllci50b1N0cmluZygpXG4gIH1cblxuICBnZXQgaXNGdW1ibGUgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA+PSB0aGlzLmZ1bWJsZVRocmVzaG9sZFxuICB9XG5cbiAgZ2V0IGlzQ3JpdGljYWwgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMVxuICB9XG5cbiAgZ2V0IGlzRXh0cmVtZVN1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gIH1cblxuICBnZXQgcGFzc2VkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMubHVja1NwZW50KSByZXR1cm4gdGhpcy5kaWZmaWN1bHR5IDw9IHRoaXMuc3VjY2Vzc0xldmVsXG4gICAgcmV0dXJuIHRoaXMuc3VjY2VzVGhyZXNob2xkID49IHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgdGhpcy5pc0NyaXRpY2FsXG4gIH1cblxuICBnZXQgZmFpbGVkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnBhc3NlZFxuICB9XG5cbiAgZ2V0IGlzU2ltcGxlUm9sbCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLnJhd1ZhbHVlID09PSAndW5kZWZpbmVkJ1xuICB9XG5cbiAgZ2V0IGhhc0JvbnVzICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc1BlbmFsdHkgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciAhPT0gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBkaWNlTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLl9kaWNlTW9kaWZpZXIpIHJldHVybiB0aGlzLl9kaWNlTW9kaWZpZXJcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGRpY2VNb2RpZmllciAoeCkge1xuICAgIHRoaXMuX2RpY2VNb2RpZmllciA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zaG9ydE5hbWVcbiAgICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0ubmFtZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyh0aGlzLmNoYXJhY3RlcmlzdGljKT8ubGFiZWxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdsY2snKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdzYW4nKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2hvcnROYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5zaG9ydFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdWxsTmFtZSAoKSB7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLl9kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKHRoaXMuX2RpZmZpY3VsdHkpXG4gICAgY29uc3QgbW9kaWZpZXIgPVxuICAgICAgdGhpcy5fZGljZU1vZGlmaWVyID4gMFxuICAgICAgICA/IGArJHt0aGlzLl9kaWNlTW9kaWZpZXJ9YFxuICAgICAgICA6IHRoaXMuX2RpY2VNb2RpZmllci50b1N0cmluZygpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7IGRpZmZpY3VsdHksIG1vZGlmaWVyLCBuYW1lOiB0aGlzLm5hbWUgfVxuICAgIClcbiAgfVxuXG4gIGdldCByb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmRpY2UpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hlY2sgZnJvbSBhbiBIVE1MRWxlbWVudCBvciBhIGNoYXQgY2FyZC5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgVGhlIEhUTUxFbGVtZW50IHRoYXQgaXMgYSByb2xsLXJlc3VsdCBvciBhIGNoYXQgY2FyZCBjb250YWluaW5nIGEgc2luZ2xlIHJvbGwtcmVzdWx0LlxuICAgKiBAcmV0dXJuIHtDb0M3Q2hlY2t9ICAgICAgQSBDb0M3Q2hlY2suXG4gICAqL1xuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCByb2xsUmVzdWx0ID0gY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JylcbiAgICAgID8gY2FyZFxuICAgICAgOiBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyb2xsUmVzdWx0LCBjaGVjaylcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY2hlY2subWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHVzaCAoY2FyZCwgcHVibGlzaCA9IHRydWUpIHtcbiAgICBjb25zdCBvbGRDaGVjayA9IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKSAvLyBUT0RPOiBSZWZhY3RvcmluZ1xuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHNraWxsSWQgPSBjYXJkLmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGNoYXJhYyA9IGNhcmQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgIGNvbnN0IGl0ZW1JZCA9IGNhcmQuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBkaWNlTW9kID0gY2FyZC5kYXRhc2V0LmRpY2VNb2RcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gY2FyZC5kYXRhc2V0LmRpZmZpY3VsdHlcblxuICAgIGxldCBwdXNoZWRSb2xsXG4gICAgaWYgKHNraWxsSWQpIHtcbiAgICAgIHB1c2hlZFJvbGwgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQsIHNraWxsSWQsIGl0ZW1JZCwgZGljZU1vZCwgZGlmZmljdWx0eSlcbiAgICB9IGVsc2UgaWYgKGNoYXJhYykge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcHVzaGVkUm9sbC5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgICBwdXNoZWRSb2xsLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBwdXNoZWRSb2xsLmFjdG9yID0gYWN0b3JJZFxuICAgICAgcHVzaGVkUm9sbC5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY1xuICAgIH0gZWxzZSByZXR1cm5cbiAgICBpZiAob2xkQ2hlY2sudXVpZCkge1xuICAgICAgcHVzaGVkUm9sbC5jb250ZXh0ID0gb2xkQ2hlY2suY29udGV4dFxuICAgICAgcHVzaGVkUm9sbC51dWlkID0gb2xkQ2hlY2sudXVpZFxuICAgIH1cbiAgICBpZiAob2xkQ2hlY2sucGFyZW50KSBwdXNoZWRSb2xsLnBhcmVudCA9IG9sZENoZWNrLnBhcmVudFxuICAgIHB1c2hlZFJvbGwucHVzaGluZyA9IHRydWVcbiAgICBhd2FpdCBwdXNoZWRSb2xsLnJvbGwoKVxuICAgIGlmIChwdWJsaXNoKSBwdXNoZWRSb2xsLnRvTWVzc2FnZSh0cnVlLCBjYXJkKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBzZXQgYWN0b3IgKHgpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0geFxuICAgIGlmICh4ID09IG51bGwpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHggaW5zdGFuY2VvZiBBY3Rvcikge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLl9hY3RvciA9IHhcbiAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXG4gICAgICBpZiAoeC50b2tlbiAmJiB4LnRva2VuLnNjZW5lICYmIHgudG9rZW4uc2NlbmUuaWQpIHtcbiAgICAgICAgdGhpcy5hY3RvcktleSA9IGAke3gudG9rZW4uc2NlbmUuaWR9LiR7eC50b2tlbi5pZH1gXG4gICAgICB9IGVsc2UgdGhpcy5hY3RvcktleSA9IHguaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeC5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB4LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLl9hY3Rvci5uYW1lIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVyblxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHRoaXMuX2FjdG9yID0gdG9rZW4uYWN0b3JcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0b2tlbi5uYW1lXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLmdldCh4KVxuICAgIHRoaXMuYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgfVxuXG4gIGdldCBzdWNjZXNzTGV2ZWxJY29ucyAoKSB7XG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsICYmIHRoaXMuX3Jhd1ZhbHVlICE9PSAwKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNvbnN0IGljb25zID0gW11cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGluZGV4IDwgdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxO1xuICAgICAgICBpbmRleCsrXG4gICAgICApIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzQ3JpdGljYWwgPyAnbWVkYWwnIDogJ3N0YXInKVxuICAgICAgfVxuICAgICAgY29uc3Qgc3VjY2Vzc0hpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc0xldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNzc0NsYXNzOiB0aGlzLmlzQ3JpdGljYWwgPyAnY3JpdGljYWwnIDogJ3N1Y2Nlc3MnLFxuICAgICAgICBoaW50OiBzdWNjZXNzSGludCxcbiAgICAgICAgaWNvbnNcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgY29uc3Qgc3VjY2Vzc0xldmVsID0gdGhpcy5pc0Z1bWJsZSA/IC0xIDogdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzRnVtYmxlID8gJ3NrdWxsJyA6ICdzcGlkZXInKVxuICAgICAgfVxuICAgICAgY29uc3QgZmFpbHVyZUhpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmVMZXZlbEhpbnQnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWxcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNGdW1ibGUgPyAnZnVtYmxlJyA6ICdmYWlsdXJlJyxcbiAgICAgICAgaGludDogZmFpbHVyZUhpbnQsXG4gICAgICAgIGljb25zXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHVua25vd25EaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5SGFyZCB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gdGhpcy5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHNldCBza2lsbCAoeCkge1xuICAgIHRoaXMuX3NraWxsID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIHRoaXMuc2tpbGxJZCA9IHhcbiAgfVxuXG4gIHNldCBpdGVtICh4KSB7XG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldEl0ZW1Gcm9tSWQoeClcbiAgICBpZiAodGhpcy5faXRlbT8udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIHRoaXMuaXRlbUlkID0geFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pdGVtID0gdW5kZWZpbmVkXG4gICAgICB0aGlzLml0ZW1JZCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIF9nZXRJdGVtRnJvbUlkICh4KSB7XG4gICAgaWYgKHggPT0gbnVsbCkgcmV0dXJuIG51bGxcbiAgICBpZiAoeCBpbnN0YW5jZW9mIEl0ZW0pIHJldHVybiB4XG4gICAgaWYgKHRoaXMuX2FjdG9yKSByZXR1cm4gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KHgpXG4gICAgcmV0dXJuIGdhbWUuaXRlbXMuZ2V0KHgpXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fYWN0b3IgfHwgIXRoaXMuX2FjdG9yPy5pZCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3JLZXkpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAodGhpcy5hY3RvcklkKSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNEdW1teTogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLmFjdG9yTmFtZSA/IHRoaXMuYWN0b3JOYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgaW1nOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnLFxuICAgICAgICAgIHBvcnRyYWl0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdG9yLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBjb25zdCBhY3RvciA9IG5ldyBDb0NBY3Rvcih0aGlzLl9hY3RvcilcbiAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5za2lsbElkKSB7XG4gICAgICB0aGlzLl9za2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgfVxuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5pdGVtKSB7XG4gICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5za2lsbCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkICYmICF0aGlzLndlYXBvbkFsdFNraWxsKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAmJlxuICAgICAgICAgIHRoaXMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NraWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLl9pdGVtICYmIHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1cbiAgfVxuXG4gIGdldCBkaXNwbGF5UmVzdWx0VHlwZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJylcbiAgfVxuXG4gIGdldCBkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlCb3RoU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiB0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgZ2V0IGRvbnREaXNwbGF5U3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuZGlzcGxheVJlc3VsdFR5cGUgJiYgIXRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgaW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5pbWdcbiAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLmltZ1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRMaW5rRWxlbWVudCgpLm91dGVySFRNTFxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXRMaW5rRWxlbWVudCAoY2xhc3NlcyA9IG51bGwpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluaycsICdjb2M3LXJvbGwnXS5jb25jYXQoY2xhc3NlcyksXG4gICAgICBkYXRhc2V0OiB7IGNoZWNrOiAnY2hlY2snIH0sXG4gICAgICBpY29uOiB0aGlzLmltYWdlXG4gICAgICAgID8gYDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHt0aGlzLmltYWdlfSlcIj48L2Rpdj5gXG4gICAgICAgIDogJzxpIGNsYXNzPVwiZmFzIGZhLWRpY2VcIj48L2k+JyxcbiAgICAgIGJsaW5kOiB0aGlzLmlzQmxpbmRcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyF0aGlzLl9kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7XG4gICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLl9kaWNlTW9kaWZpZXIsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgfVxuICAgIClcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gdGl0bGVcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gICAgYS5pbm5lckhUTUwgPSBgJHtkYXRhLmJsaW5kID8gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nIDogJyd9JHtcbiAgICAgIGRhdGEuaWNvblxuICAgIH0ke3RoaXMubmFtZX1gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgYXN5bmMgcm9sbCAoZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybShvcHRpb25zKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNoZWNrIHdpdGggdGhlIHByb3ZpZGVkIGRhdGFcbiAgICogUHJvY2VzcyByb2xsIGRhdGEgdG8gYSBmb3JtYXQgdGhhdCBjYW4gYmUgZmVkIHRvIGNyZWF0ZSgpXG4gICAqIEBwYXJhbSB7Kn0gcm9sbERhdGEgQSByb2xsIGRhdGEgc3RydWN0dXJlIGFzIHJldHVybmVkIGJ5IGFjdG9yLmZpbmRcbiAgICogQHJldHVybnMgQSBjaGVjayB3aXRoIHRoZSByb2xsIGRhdGEgcHJvdmlkZWRcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVGcm9tQWN0b3JSb2xsRGF0YSAocm9sbERhdGEpIHtcbiAgICBjb25zdCByb2xsID0ge31cbiAgICAvLyBjaGVjayBNb2RpZmllclxuICAgIGlmIChyb2xsRGF0YS5kaWZmaWN1bHR5KSByb2xsLmRpZmZpY3VsdHkgPSByb2xsRGF0YS5kaWZmaWN1bHR5XG4gICAgaWYgKHJvbGxEYXRhLmRpY2VNb2RpZmllcikgcm9sbC5kaWNlTW9kaWZpZXIgPSByb2xsRGF0YS5kaWNlTW9kaWZpZXJcbiAgICBpZiAocm9sbERhdGEuZGVueVB1c2ggPT09IHRydWUpIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgaWYgKHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXIpIHtcbiAgICAgIHJvbGwuZmxhdERpY2VNb2RpZmllciA9IHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhLmZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgcm9sbC5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByb2xsRGF0YS5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgLy8gQWN0b3JcbiAgICBpZiAocm9sbERhdGEuYWN0b3I/LmFjdG9yS2V5KSByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEuYWN0b3IuYWN0b3JLZXlcbiAgICBlbHNlIGlmIChyb2xsRGF0YS5hY3Rvcj8ubmFtZSkgcm9sbC5hY3Rvck5hbWUgPSByb2xsRGF0YS5hY3Rvci5uYW1lXG4gICAgLy8gQ2hlY2sgdHlwZVxuICAgIHN3aXRjaCAocm9sbERhdGEudHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5jaGFyYWN0ZXJpc3RpYzpcbiAgICAgICAgcm9sbC5jaGFyYWN0ZXJpc3RpYyA9IHJvbGxEYXRhLnZhbHVlPy5rZXlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuYXR0cmlidXRlOlxuICAgICAgICByb2xsLmF0dHJpYnV0ZSA9IHJvbGxEYXRhLnZhbHVlPy5rZXlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuaXRlbTpcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGlmIChyb2xsRGF0YS52YWx1ZT8udHlwZSA9PT0gJ3NraWxsJykgcm9sbC5za2lsbCA9IHJvbGxEYXRhLnZhbHVlLmlkXG4gICAgICAgIGVsc2Ugcm9sbC5pdGVtID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuc2tpbGw6XG4gICAgICAgIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS52YWx1ZS5hY3Rvci5hY3RvcktleVxuICAgICAgICByb2xsLnNraWxsID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUudmFsdWU6XG4gICAgICAgIHJvbGwuZGlzcGxheU5hbWUgPSByb2xsRGF0YS52YWx1ZS5uYW1lXG4gICAgICAgIHJvbGwucmF3VmFsdWUgPSByb2xsRGF0YS52YWx1ZS50aHJlc2hvbGRcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suY3JlYXRlKHJvbGwpXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlICh7XG4gICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICBkaWNlTW9kaWZpZXIgPSBudWxsLFxuICAgIGFjdG9yS2V5ID0gbnVsbCxcbiAgICBjaGFyYWN0ZXJpc3RpYyA9IG51bGwsXG4gICAgYXR0cmlidXRlID0gbnVsbCxcbiAgICByYXdWYWx1ZSA9IDAsXG4gICAgaXRlbSA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZGlzcGxheU5hbWUgPSBudWxsLFxuICAgIGFjdG9yTmFtZSA9IG51bGwsXG4gICAgZGVueVB1c2ggPSB1bmRlZmluZWRcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmIChkZW55UHVzaCA9PT0gdHJ1ZSkgY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgaWYgKGRpY2VNb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXREaWNlTW9kaWZpZXIpIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgfVxuICAgIGlmIChkaXNwbGF5TmFtZSkgY2hlY2suZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZVxuICAgIGlmIChhY3RvcktleSkgY2hlY2suYWN0b3IgPSBhY3RvcktleVxuICAgIGlmIChhY3Rvck5hbWUpIGNoZWNrLmFjdG9yTmFtZSA9IGFjdG9yTmFtZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHJhd1ZhbHVlKSkpIGNoZWNrLnJhd1ZhbHVlID0gTnVtYmVyKHJhd1ZhbHVlKVxuICAgIGlmIChjaGVjay5hY3RvciAmJiAhY2hlY2suYWN0b3IuaXNEdW1teSkge1xuICAgICAgLy8gVE9ETyA6IEFkZCBjaGVjayBmb3IgdmFsaWRpdHkgb2YgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSwgc2tpbGxJZFxuICAgICAgaWYgKHNraWxsKSBjaGVjay5za2lsbCA9IHNraWxsXG4gICAgICAvLyBUT0RPIDogdHJ5IHJldHJpZXZlIHNraWxsIGJ5IG5hbWVcbiAgICAgIGVsc2UgaWYgKGNoYXJhY3RlcmlzdGljKSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljXG4gICAgICBlbHNlIGlmIChhdHRyaWJ1dGUpIGNoZWNrLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZVxuICAgICAgZWxzZSBpZiAoaXRlbSkgY2hlY2suaXRlbSA9IGl0ZW1cbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGNoYXIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hhcmFjdGVyaXN0aWMgPSBjaGFyXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbEF0dHJpYnV0ZSAoYXR0cmliLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYlxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxWYWx1ZSAodmFsLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgZ2V0IHJvbGxlZFN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsXG4gIH1cblxuICBhc3luYyBfcGVyZm9ybSAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5kaWNlID1cbiAgICAgIG9wdGlvbnMucm9sbCB8fFxuICAgICAgKGF3YWl0IENvQzdEaWNlLnJvbGwodGhpcy5kaWNlTW9kaWZpZXIsIHRoaXMucm9sbE1vZGUsIHRoaXMuaXNCbGluZCkpXG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiAhZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuZm9yY2VEU04pIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIHRoaXMuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGljZS51bml0LnRvdGFsXG4gICAgICB9LFxuICAgICAgdG90YWw6IHRoaXMuZGljZS50b3RhbCxcbiAgICAgIHRlblJlc3VsdDogdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWwsXG4gICAgICBoYXNCb251czogISF0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgIGJvbnVzOiBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllciksXG4gICAgICBib251c1R5cGU6XG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyQm9udXMnKSxcbiAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVxuICAgIH1cblxuICAgIGNvbnN0IG1heCA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB0aGlzLmRpY2UudW5pdC50b3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGljZS50ZW5zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmRpY2VzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUx1Y2tTcGVuZCAobHVja0Ftb3VudCkge1xuICAgIGNvbnN0IHNwZW5kaW5nQW1vdW50ID0gcGFyc2VJbnQobHVja0Ftb3VudCwgMTApXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQgPz8gMCwgMTApICsgc3BlbmRpbmdBbW91bnRcbiAgICBjb25zdCBtb2RpZmllZFJlc3VsdCA9IE1hdGgubWF4KDEsIHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgIGlmIChtb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgfSBlbHNlIGlmIChtb2RpZmllZFJlc3VsdCA8PSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgfSBlbHNlIGlmIChtb2RpZmllZFJlc3VsdCA8PSB0aGlzLmhhcmRUaHJlc2hvbGQpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkXG4gICAgfSBlbHNlIGlmIChtb2RpZmllZFJlc3VsdCA8PSB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhclxuICAgIH0gZWxzZSBpZiAodGhpcy5mdW1ibGVUaHJlc2hvbGQgPD0gbW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcbiAgICB9IGVsc2UgaWYgKG1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yYXdWYWx1ZSkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlmZmljdWx0eSA8PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgfVxuICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgIGxldCByZW1vdmUgPSAwXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBtYXhJbmRleCA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzLmxlbmd0aDsgaW5kZXggPCBtYXhJbmRleDsgaW5kZXgrKykge1xuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbaW5kZXhdLmx1Y2tUb1NwZW5kID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbaW5kZXhdLmx1Y2tUb1NwZW5kIC0gc3BlbmRpbmdBbW91bnRcbiAgICAgIGlmICh0aGlzLmluY3JlYXNlU3VjY2Vzc1tpbmRleF0ubHVja1RvU3BlbmQgPCAxKSB7XG4gICAgICAgIHJlbW92ZSsrXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByZW1vdmU7IGluZGV4KyspIHtcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcbiAgICB9XG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZUNoZWNrICgpIHtcbiAgICB0aGlzLmlzVW5rbm93biA9IHRoaXMudW5rbm93bkRpZmZpY3VsdHlcblxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXIpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlIYXJkKSB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlFeHRyZW1lKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5Q3JpdGljYWwpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcbiAgICB9XG5cbiAgICB0aGlzLnRlbk9ubHlPbmVEaWUgPSB0aGlzLmRpY2VzLnRlbnMubGVuZ3RoID09PSAxXG5cbiAgICB0aGlzLmlzVmFsdWUgPSBmYWxzZVxuICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IGZhbHNlXG4gICAgdGhpcy5pc1NraWxsID0gZmFsc2VcbiAgICB0aGlzLmlzSXRlbSA9IGZhbHNlXG4gICAgdGhpcy5pc0F0dHJpYnV0ZSA9IGZhbHNlXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLmRlbnlQdXNoID0gdHJ1ZVxuICAgICAgdGhpcy5kZW55THVjayA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IgPT0gbnVsbCkge1xuICAgICAgdGhpcy5pc1ZhbHVlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICB0aGlzLmlzQ2hhcmFjdGlyaXN0aWMgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPVxuICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5za2lsbCkge1xuICAgICAgICB0aGlzLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNraWxsLnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhclxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5oYXJkVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5mdW1ibGVUaHJlc2hvbGQgPD0gdGhpcy5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZ1bWJsZScpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51bmtub3duRGlmZmljdWx0eSkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSAnJ1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3VjY2Vzc1JlcXVpcmVkJywge1xuICAgICAgICBzdWNjZXNzUmVxdWlyZWQ6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgfVxuICAgIGlmICghdGhpcy5sdWNrU3BlbnQgJiYgIXRoaXMuaXNVbmtub3duICYmICF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSB0aGlzLmZhaWxlZFxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0aGlzLnBhc3NlZFxuICAgIH1cblxuICAgIHRoaXMuaGFzTWFsZnVuY3Rpb24gPSBmYWxzZVxuICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlXG5cbiAgICBpZiAodGhpcy5pdGVtKSB7XG4gICAgICB0aGlzLmlzSXRlbSA9IHRydWVcbiAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLm1hbGZ1bmN0aW9uKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBOdW1iZXIodGhpcy5tb2RpZmllZFJlc3VsdCkgPj0gTnVtYmVyKHRoaXMuaXRlbS5zeXN0ZW0ubWFsZnVuY3Rpb24pXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuaGFzTWFsZnVuY3Rpb24gPSB0cnVlXG4gICAgICAgICAgdGhpcy5tYWxmdW5jdGlvblR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFsZnVuY3Rpb24nLCB7XG4gICAgICAgICAgICBpdGVtTmFtZTogdGhpcy5pdGVtLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVJdGVtRmxhZyhDb0M3SXRlbS5mbGFncy5tYWxmdW5jdGlvbilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5jYW5CZVB1c2hlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuY2FuQmVQdXNoZWQgPSB0aGlzLnNraWxsID8gdGhpcy5za2lsbC5jYW5CZVB1c2hlZCgpIDogZmFsc2VcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljICE9IG51bGwpIHRoaXMuY2FuQmVQdXNoZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgICBpZiAodGhpcy5kZW55UHVzaCkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRlbnlMdWNrICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAgICF0aGlzLnBhc3NlZCAmJlxuICAgICAgICAhdGhpcy5pc0Z1bWJsZSAmJlxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgJiZcbiAgICAgICAgIXRoaXMudW5rbm93bkRpZmZpY3VsdHlcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5za2lsbCB8fCB0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgY29uc3QgbHVja05lZWRlZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnN1Y2Nlc1RocmVzaG9sZFxuICAgICAgICAgIGlmICh0aGlzLmFjdG9yLmx1Y2sgPiBsdWNrTmVlZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0Vub3VnaEx1Y2sgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWQgPSBsdWNrTmVlZGVkXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZW5kTHVjaycsIHtcbiAgICAgICAgICAgICAgbHVja05lZWRlZFZhbHVlOiBsdWNrTmVlZGVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMubHVja1NwZW50KSB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cblxuICAgICAgICAvLyBDYW4ndCBzcGVuZCBsdWNrIG9uIHB1c2hlZCByb2xscy5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0aGlzLnB1c2hpbmcgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ2xjaycgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ3NhbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy51bmtub3duRGlmZmljdWx0eSAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5oYXJkVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5FeHRyZW1lRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5leHRyZW1lVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoID4gMFxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLmNhbkF3YXJkRXhwZXJpZW5jZSA9XG4gICAgICB0aGlzLnNraWxsICYmICF0aGlzLnNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLm5veHBnYWluXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnBhc3NlZCAmJlxuICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPD0gMCAmJlxuICAgICAgdGhpcy5za2lsbCAmJlxuICAgICAgIXRoaXMuc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW4gJiZcbiAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxuICAgICAgIXRoaXMuZm9yY2VkICYmXG4gICAgICAhdGhpcy5pc0JsaW5kICYmXG4gICAgICAhdGhpcy5pc1Vua25vd25cbiAgICApIHtcbiAgICAgIHRoaXMuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLnBhcmVudClcbiAgICAgIGlmIChwYXJlbnQgJiYgJ3VwZGF0ZVJvbGwnIGluIHBhcmVudCkge1xuICAgICAgICBhd2FpdCBwYXJlbnQudXBkYXRlUm9sbCh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBSb2xsICR7dGhpcy51dWlkfSBkZXBlbmRzIG9mICR7dGhpcy5wYXJlbnR9YClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgbGV0IGNzc0NsYXNzID0gJydcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdmYWlsdXJlJ1xuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdzdWNjZXNzIGNyaXRpY2FsJ1xuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnZmFpbHVyZSBmdW1ibGUnXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgcmVndWxhci1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBoYXJkLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGV4dHJlbWUtc3VjY2VzcydcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBjc3NDbGFzc0xpc3QgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzID0gW11cbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnKVxuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScpXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnLCAnY3JpdGljYWwnKVxuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScsICdmdW1ibGUnKVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdyZWd1bGFyLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnaGFyZC1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgcGxheWVyQ3NzQ2xhc3MgKCkge1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcyB8fCB0aGlzLmZvcmNlZFN1Y2Nlc3MpIHJldHVybiAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUgfHwgdGhpcy5mb3JjZWRGYWlsdXJlKSByZXR1cm4gJ2ZhaWx1cmUnXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHVwZ3JhZGVDaGVjayAodXBncmFkZWluZGV4LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja0Ftb3VudCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja1RvU3BlbmQpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICA/IDBcbiAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5kaWZmaWN1bHR5KSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICB9XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHVwZ3JhZGVpbmRleCArIDE7IGluZGV4KyspIHtcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcbiAgICB9XG4gICAgZm9yIChjb25zdCBzIG9mIHRoaXMuaW5jcmVhc2VTdWNjZXNzKSB7XG4gICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcbiAgICB9XG4gICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHJlbW92ZVVwZ3JhZGVzICgpIHtcbiAgICB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIHRoaXMubHVja05lZWRlZCA9IDBcbiAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBudWxsXG4gICAgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gIH1cblxuICBmb3JjZVBhc3MgKGx1Y2tBbW91bnQgPSBudWxsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgaWYgKGx1Y2tBbW91bnQpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHRoaXMuZGlmZmljdWx0eVxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuaW5jcmVhc2VTdWNjZXNzKSB7XG4gICAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgICAgfVxuICAgICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgICAgPyAwXG4gICAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICAgIHRoaXMuZm9yY2VkU3VjY2VzcyA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciwgdXBkYXRlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHksIHVwZGF0ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3JjZUZhaWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICB0aGlzLmZvcmNlZEZhaWx1cmUgPSB0cnVlXG4gICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSwgdXBkYXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSAtIDEsIHVwZGF0ZSlcbiAgICB9XG4gIH1cblxuICBfZm9yY2VDaGVjayAoaGlnaCwgbG93LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IHRvdGFsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGhpZ2ggLSBsb3cpKSArIGxvdyArIDFcbiAgICBjb25zdCB1bml0VG90YWwgPSB0b3RhbCAlIDEwXG4gICAgbGV0IHRlblRvdGFsID0gTWF0aC5mbG9vcih0b3RhbCAvIDEwKVxuICAgIGNvbnN0IHRlbnMgPSBbXVxuXG4gICAgbGV0IGhhc0Vub3VnaCA9IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSA9PT0gdGVucy5sZW5ndGhcbiAgICB3aGlsZSAoIWhhc0Vub3VnaCkge1xuICAgICAgbGV0IHRlbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgbGV0IHJvbGwgPSB0ZW4gKiAxMCArIHVuaXRUb3RhbFxuICAgICAgaWYgKHJvbGwgPT09IDApIHtcbiAgICAgICAgcm9sbCA9IDEwMFxuICAgICAgICB0ZW4gPSAxMDBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc1BlbmFsdHkgJiYgcm9sbCA8PSBoaWdoKSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsID4gdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQm9udXMgJiYgcm9sbCA+IGxvdykge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA8IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGhhc0Vub3VnaCA9IHRlbnMubGVuZ3RoID09PSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcilcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgcmVzdWx0IGF0IHJhbmRvbSBwb3NpdGlvbi5cbiAgICBpZiAodGVuVG90YWwgPT09IDEwICYmIHVuaXRUb3RhbCA9PT0gMCkge1xuICAgICAgdGVuVG90YWwgPSAxMDBcbiAgICB9XG4gICAgdGVucy5zcGxpY2UoXG4gICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZW5zLmxlbmd0aCArIDEpLFxuICAgICAgMCxcbiAgICAgIHRlblRvdGFsID09PSAxMCA/IDAgOiB0ZW5Ub3RhbFxuICAgIClcblxuICAgIHRoaXMuZGljZXMudGVucyA9IFtdXG4gICAgdGhpcy5kaWNlcy51bml0LnZhbHVlID0gdW5pdFRvdGFsXG4gICAgdGhpcy5tb2RpZmllZFJlc3VsdCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50b3RhbCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50ZW5SZXN1bHQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgY29uc3QgbWF4ID0gdW5pdFRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB1bml0VG90YWwgPT09IDAgPyAxMCA6IDBcbiAgICBsZXQgc2VsZWN0ZWQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkaWUgPSB7fVxuICAgICAgZGllLnZhbHVlID0gdGVuc1tpXVxuICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAxMDFcbiAgICAgICAgZGllLnNlbGVjdGVkID0gdHJ1ZVxuICAgICAgICBpZiAodGhpcy5oYXNCb251cykge1xuICAgICAgICAgIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtYXgpIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtaW4pIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgfVxuICAgICAgLy8gaWYoIGRpZS52YWx1ZSA9PSAxMDApIGRpZS52YWx1ZSA9IFwiMDBcIjtcbiAgICAgIHRoaXMuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICB9XG5cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBmb3JjZVN1Y2Nlc3NMZXZlbCAoc3VjY2Vzc0xldmVsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgaGlnaCA9IDEwMFxuICAgICAgfSBlbHNlIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDFcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBpbmNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBkZWNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICB0aGlzLmZsYWdnZWRGb3JEZXZlbG9wbWVudCA9IHRydWVcbiAgICBpZiAodGhpcy5za2lsbCkgYXdhaXQgdGhpcy5za2lsbC5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgfVxuXG4gIHNldCBkaWZmaWN1bHR5ICh4KSB7XG4gICAgdGhpcy5fZGlmZmljdWx0eSA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpZmZpY3VsdHlcbiAgfVxuXG4gIHNldCBmbGF2b3IgKHgpIHtcbiAgICB0aGlzLl9mbGF2b3IgPSB4XG4gIH1cblxuICBzZXQgY29udGV4dCAoeCkge1xuICAgIHRoaXMuX2NvbnRleHQgPSB4XG4gIH1cblxuICBnZXQgY29udGV4dCAoKSB7XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHRcbiAgfVxuXG4gIHNldCBwYXJlbnQgKHgpIHtcbiAgICBpZiAoIXRoaXMudXVpZCkgdGhpcy51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICB0aGlzLnBhcmVudFV1aWQgPSB4XG4gIH1cblxuICBnZXQgcGFyZW50ICgpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50VXVpZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnBhcmVudFV1aWRcbiAgfVxuXG4gIGdldCBmbGF2b3IgKCkge1xuICAgIGlmICh0aGlzLl9mbGF2b3IpIHJldHVybiB0aGlzLl9mbGF2b3JcbiAgICBsZXQgZmxhdm9yID0gJydcbiAgICBpZiAodGhpcy5hY3Rvcj8uc3lzdGVtKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuc2tpbGwubmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pdGVtKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSXRlbUNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIGl0ZW06IHRoaXMuaXRlbS5uYW1lLFxuICAgICAgICAgIHNraWxsOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLmxhYmVsXG4gICAgICAgICAgKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgYENvQzcuJHt0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS5sYWJlbH1gXG4gICAgICAgICAgKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmbGF2b3IpIHtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jhd1ZhbHVlJywge1xuICAgICAgICAgICAgcmF3dmFsdWU6IHRoaXMucmF3VmFsdWUsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHVzaGluZykge1xuICAgICAgZmxhdm9yID0gYCR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QdXNoaW5nJyl9ICR7Zmxhdm9yfWBcbiAgICB9XG5cbiAgICByZXR1cm4gZmxhdm9yXG4gIH1cblxuICBnZXQgdG9vbHRpcEhlYWRlciAoKSB7XG4gICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgYENvQzcuJHt0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS5sYWJlbH1gXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArXG4gICAgICAgIGAgKCR7dGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5za2lsbCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuc2tpbGwubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5za2lsbC52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLnJhd1ZhbHVlU3RyaW5nfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGxFbGVtZW50IChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5vcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGlmIChodG1sKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9pbi1jYXJkLXJvbGwuaHRtbCdcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgcmV0dXJuIGh0bWwgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKHB1c2hpbmcgPSBmYWxzZSkge1xuICAgIC8vIElmIGNhcmQgaXMgcHJvdmlkZWQgYXR0dGFjaGVkIHRoZSByb2xsIHRvIHRoZSBjYXJkLiBJZiBVUklEIHByb3ZpZGVkIGF0dGFjaCBhdCB0aGlzIHBvc2l0aW9uLj9cbiAgICB0aGlzLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW4uZG9jdW1lbnRcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAgIGlmICh0aGlzLmFjdG9yLm5hbWUpIHNwZWFrZXIgPSB7IGFsaWFzOiB0aGlzLmFjdG9yLm5hbWUgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yPy51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogQ29DN0NoZWNrLmNhcmRUeXBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy51dWlkKSBjaGF0RGF0YS5mbGFncy5Db0M3LnV1aWQgPSB0aGlzLnV1aWRcbiAgICBpZiAodGhpcy5jb250ZXh0KSBjaGF0RGF0YS5mbGFncy5Db0M3LmNvbnRleHQgPSB0aGlzLmNvbnRleHRcblxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY2hhdERhdGEudXNlciA9IGdhbWUudXNlci5pZFxuICAgICAgICBjaGF0RGF0YS5mbGF2b3IgPSBgWyR7dGhpcy5hY3Rvci5uYW1lfV0gJHtjaGF0RGF0YS5mbGF2b3J9YFxuICAgICAgICBjaGF0RGF0YS5mbGFncyA9IHtcbiAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICBHTVNlbGZSb2xsOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2hhdERhdGEuc3BlYWtlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjaGF0RGF0YS5mbGFncy5Db0M3Lm9yaWdpbmFsU3BlYWtlciA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGNoYXREYXRhLnNwZWFrZXIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnKSkge1xuICAgICAgICAgICAgY2FzZSAnb3duZXJzJzpcbiAgICAgICAgICAgICAgZGVsZXRlIGNoYXREYXRhLnNwZWFrZXJcbiAgICAgICAgICAgICAgY2hhdERhdGEud2hpc3BlciA9IHRoaXMuYWN0b3Iub3duZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBjYXNlICdldmVyeW9uZSc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBnYW1lLnVzZXJzLnBsYXllcnNcbiAgICAgICAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSlcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgLy8gQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZSggY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpO1xuICAgIGlmICh0aGlzLmRpY2U/LnJvbGwgJiYgIXRoaXMuZGljZT8uaGlkZURpY2UpIHtcbiAgICAgIGNoYXREYXRhLnJvbGwgPSB0aGlzLmRpY2Uucm9sbFxuICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMXG4gICAgICBjaGF0RGF0YS5yb2xsTW9kZSA9IHRoaXMuaXNCbGluZCA/ICdibGluZHJvbGwnIDogdGhpcy5yb2xsTW9kZVxuICAgIH1cblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBtYWtlUHVibGljICBXaWxsIGNoYW5nZSB0aGUgcm9sbCBtb2RlIHRvIHB1YmxpY1xuICAgKi9cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgbWFrZVB1YmxpYyA9IGZhbHNlLCBmb3JjZVJvbGwgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAobWFrZVB1YmxpYykgdGhpcy5yb2xsTW9kZSA9IGZhbHNlIC8vIHJlc2V0IHJvbGwgbW9kZVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7IGZsYXZvcjogdGhpcy5mbGF2b3IgfVxuXG4gICAgaWYgKG1ha2VQdWJsaWMpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBbXVxuICAgICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSlcbiAgICB9IC8vIGVsc2Uge1xuICAgIC8vIGNoYXREYXRhLndoaXNwZXIgPSBbXVxuICAgIC8vIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICAvLyBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgIC8vIH1cblxuICAgIGlmIChjaGF0RGF0YS5ibGluZCkge1xuICAgICAgdGhpcy5pc0JsaW5kID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBsZXQgbmV3Q29udGVudCA9IGh0bWxcblxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXSAvLyBJZiBubyBtZXNzYWdlSWQgcmV0dXJuIHRoZSBIVE1MRWxlbWVudCBjb250YWluaW5nIHRoZSByb2xsLlxuICAgIC8vIElmIG5vIG1lc3NhZ2VJZFxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGNvbnN0IGh0bWxNZXNzYWdlID0gJC5wYXJzZUhUTUwobWVzc2FnZS5jb250ZW50KVswXVxuICAgIGlmICghaHRtbE1lc3NhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpKSB7XG4gICAgICBjb25zdCBodG1sQ2hlY2sgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgICAgY29uc3Qgcm9sbFJlc3VsdEVsZW1lbnQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgaWYgKHJvbGxSZXN1bHRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJvbGxSZXN1bHRFbGVtZW50LnJlcGxhY2VXaXRoKGh0bWxDaGVjaylcbiAgICAgIH1cbiAgICAgIG5ld0NvbnRlbnQgPSBodG1sTWVzc2FnZS5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBjaGF0RGF0YS5jb250ZW50ID0gbmV3Q29udGVudFxuXG4gICAgaWYgKENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMID09PSBtZXNzYWdlLnR5cGUpIHtcbiAgICAgIGlmIChtZXNzYWdlLndoaXNwZXI/Lmxlbmd0aCkge1xuICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgIH0gZWxzZSBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSXG4gICAgfVxuXG4gICAgaWYgKGZvcmNlUm9sbCAmJiB0aGlzLmRpY2U/LnJvbGwgJiYgKGdhbWUudXNlci5pc0dNIHx8ICF0aGlzLmlzQmxpbmQpKSB7XG4gICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRpY2Uucm9sbClcbiAgICB9XG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZShjaGF0RGF0YSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eVJlZ3VsYXIgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUNyaXRpY2FsID0gZmFsc2VcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlSZWd1bGFyJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5SGFyZCcpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUV4dHJlbWUnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlFeHRyZW1lID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlDcml0aWNhbCcpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUNyaXRpY2FsID0gdHJ1ZVxuICAgIH1cbiAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGdldCB0b29sdGlwICgpIHtcbiAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL3JvbGwtdG9vbHRpcC5odG1sJyxcbiAgICAgIHRoaXNcbiAgICApXG4gIH1cblxuICBnZXQgaW5saW5lQ2hlY2sgKCkge1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctaW5saW5lLWNoZWNrJylcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctY2hlY2stcmVzdWx0JylcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctaW5saW5lJylcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc0xpc3QpXG4gICAgYS50aXRsZSA9IHRoaXMudG9vbHRpcEhlYWRlclxuICAgIGEuZGF0YXNldC5yb2xsID0gZXNjYXBlKHRoaXMuSlNPTlJvbGxTdHJpbmcpIC8vIFRPRE8hSU1QT1JUQU5UISEhXG4gICAgYS5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT4gJHtcbiAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgJz8/J1xuICAgIH1gXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGdldCByb2xsVG9vbFRpcCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IHBhcnRzID0gW11cbiAgICBjb25zdCB0ZW5zID0gdGhpcy5kaWNlcy50ZW5zLm1hcChyID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdDogci52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHIuc2VsZWN0ZWQsXG4gICAgICAgIGNsYXNzZXM6IFtcbiAgICAgICAgICAnZGllJyxcbiAgICAgICAgICAnZDEwJyxcbiAgICAgICAgICAhci5zZWxlY3RlZCA/ICdkaXNjYXJkZWQnIDogbnVsbCxcbiAgICAgICAgICByLmlzTWluID8gJ21pbicgOiBudWxsLFxuICAgICAgICAgIHIuaXNNYXggPyAnbWF4JyA6IG51bGxcbiAgICAgICAgXVxuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjKVxuICAgICAgICAgIC5qb2luKCcgJylcbiAgICAgIH1cbiAgICB9KVxuICAgIGNvbnN0IHVuaXQgPSBbXG4gICAgICB7XG4gICAgICAgIHJlc3VsdDogdGhpcy5kaWNlcy51bml0LnZhbHVlLFxuICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgY2xhc3NlczogJ2RpZSBkMTAnXG4gICAgICB9XG4gICAgXVxuXG4gICAgcGFydHMucHVzaCh7XG4gICAgICBmb3JtdWxhOiB0aGlzLnRvb2x0aXBIZWFkZXIsXG4gICAgICB0b3RhbDogdGhpcy5tb2RpZmllZFJlc3VsdCxcbiAgICAgIGljb25zOiB0aGlzLnN1Y2Nlc3NMZXZlbEljb25zLFxuICAgICAgY2xhc3M6IHRoaXMuY3NzQ2xhc3MsXG4gICAgICBzdWNjZXNzUmVxdWlyZWQ6IHRoaXMuc3VjY2Vzc1JlcXVpcmVkLFxuICAgICAgcmVzdWx0VHlwZTogdGhpcy5yZXN1bHRUeXBlLFxuICAgICAgZmFjZTogMTAsXG4gICAgICByb2xsczogWy4uLnRlbnMsIC4uLnVuaXRdXG4gICAgfSlcbiAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL3JvbGwtdG9vbHRpcC5odG1sJyxcbiAgICAgIHsgcGFydHMgfVxuICAgIClcbiAgfVxuXG4gIGdldCBKU09OUm9sbERhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuSlNPTlJvbGxTdHJpbmcpXG4gIH1cblxuICBnZXQgSlNPTlJvbGxTdHJpbmcgKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBjb25zdCBleGNsdWRlID0gWydfYWN0b3InLCAnX3NraWxsJywgJ19pdGVtJ11cbiAgICAgIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGRhdGEpXG4gIH1cblxuICBzdGF0aWMgZnJvbVJvbGxTdHJpbmcgKGRhdGFTdHJpbmcpIHtcbiAgICBsZXQgZGF0YVxuICAgIHRyeSB7XG4gICAgICBkYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShkYXRhU3RyaW5nKSlcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmZyb21EYXRhKGRhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYWx0ZXIgKGNoZWNrLCBjb21tYW5kLCBvcHRpb25zID0ge30pIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgIGNhc2UgJ3VzZUx1Y2snOiB7XG4gICAgICAgIGlmIChvcHRpb25zLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgICAgY2hlY2suZm9yY2VQYXNzKGx1Y2tBbW91bnQsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMudGFyZ2V0LmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgYXdhaXQgY2hlY2sudXBncmFkZUNoZWNrKHVwZ3JhZGVJbmRleCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKG51bGwsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1mYWlsJzoge1xuICAgICAgICBjaGVjay5mb3JjZUZhaWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNoZWNrLmluY3JlYXNlU3VjY2Vzc0xldmVsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNoZWNrJzoge1xuICAgICAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY2hlY2sucm9sbE1vZGUgPSBmYWxzZVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZmxhZy1mb3ItZGV2ZWxvcG1lbnQnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncHVzaCc6IHtcbiAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxuICAgICAgICBjaGVjay5wdXNoaW5nID0gdHJ1ZVxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2tJbmxpbmVSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWNoZWNrLXJlc3VsdCcpKSB7XG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfY29sbGFwc2VJbmxpbmVSZXN1bHQgKGEpIHtcbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWlubGluZS1jaGVjaycpKSByZXR1cm5cbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSByZXR1cm5cbiAgICBjb25zdCB0b29sdGlwID0gYS5xdWVyeVNlbGVjdG9yKCcuY29jNy1jaGVjay10b29sdGlwJylcbiAgICBpZiAodG9vbHRpcCkgdG9vbHRpcC5yZW1vdmUoKVxuICAgIHJldHVybiBhLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfZXhwYW5kSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSByZXR1cm5cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0b29sdGlwXG4gICAgY29uc3QgY2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgSlNPTi5wYXJzZSh1bmVzY2FwZShhLmRhdGFzZXQucm9sbCkpXG4gICAgKSAvLyBUT0RPIDogZmluZCBzdHJpbmdpZnkgdW5lc2NhcGUgISEgMjAyMTAyMDVcbiAgICBpZiAoY2hlY2suc3RhbmRieSkgcmV0dXJuXG5cbiAgICBjb25zdCB0aXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRpcC5pbm5lckhUTUwgPSBhd2FpdCBjaGVjay5yb2xsVG9vbFRpcFxuXG4gICAgLy8gQWRkIHRoZSB0b29sdGlwXG4gICAgY29uc3QgdG9vbHRpcCA9IHRpcC5jaGlsZHJlblswXVxuICAgIGEuYXBwZW5kQ2hpbGQodG9vbHRpcClcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJylcblxuICAgIC8vIFNldCB0aGUgcG9zaXRpb25cbiAgICBjb25zdCBwYSA9IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBwdCA9IHRvb2x0aXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB0b29sdGlwLnN0eWxlLmxlZnQgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLngsXG4gICAgICB3aW5kb3cuaW5uZXJXaWR0aCAtIChwdC53aWR0aCArIDMpXG4gICAgKX1weGBcbiAgICB0b29sdGlwLnN0eWxlLnRvcCA9IGAke01hdGgubWluKFxuICAgICAgcGEueSArIHBhLmhlaWdodCArIDMsXG4gICAgICB3aW5kb3cuaW5uZXJIZWlnaHQgLSAocHQuaGVpZ2h0ICsgMylcbiAgICApfXB4YFxuICAgIGNvbnN0IHppID0gZ2V0Q29tcHV0ZWRTdHlsZShhKS56SW5kZXhcbiAgICB0b29sdGlwLnN0eWxlLnpJbmRleCA9IE51bWJlci5pc051bWVyaWMoemkpID8gemkgKyAxIDogMTAwXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBEaWFsb2csIEZvbGRlciwgZm91bmRyeSwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgZ2V0RG9jdW1lbnRDbGFzcywgSG9va3MsIE1hY3JvLCBSb2xsLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdVdGlsaXRpZXMge1xuICAvLyBzdGF0aWMgdGVzdChldmVudCl7XG4gIC8vICAgaWYoIGV2ZW50LnNoaWZ0S2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gU0hJRlQgdXRpbGl0aWVzJyk7XG4gIC8vICAgZWxzZSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gdXRpbGl0aWVzJyk7XG4gIC8vICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKTtcbiAgLy8gICBsZXQgYWN0b3I7XG4gIC8vICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dO1xuICAvLyAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpO1xuXG4gIC8vICBhY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGlzRm9ybXVsYSAoeCkge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHgpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUoeClcbiAgfVxuXG4gIHN0YXRpYyBQYXJzZUNoYXRFbnRyeSAoaHRtbCwgY29udGVudCkge1xuICAgIGNvbnN0IHJlZ1ggPSAvKFxcUyspL2dcbiAgICBjb25zdCB0ZXJtcyA9IGNvbnRlbnQubWF0Y2gocmVnWClcbiAgICBpZiAoXG4gICAgICB0ZXJtc1swXT8udG9Mb3dlckNhc2UoKS5tYXRjaCgvXlxcL3Iob2xsKT8kLykgJiZcbiAgICAgIHRlcm1zWzFdPy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJzFkJScpXG4gICAgKSB7XG4gICAgICAvLyBEZWxheSBjYWxsaW5nIGZ1bmN0aW9uIHRvIHByZXZlbnQgY2hhdG1lc3NhZ2Uga2V5IGRvd24gdHJpZ2dlcmluZyBkZWZhdWx0XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ29DN1V0aWxpdGllcy5fRXhlY0NvbW1hbmQoY29udGVudClcbiAgICAgIH0sIDIwMClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfRXhlY0NvbW1hbmQgKGNvbnRlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gY29udGVudFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5zcGxpdCgnICcpXG4gICAgICA/LmpvaW4oJycpXG4gICAgICA/LnJlcGxhY2UoL1xcL3Iob2xsKT8xZCUvLCAnJylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgbGV0IGVzY2FwZWQgPSBvcHRpb25zXG4gICAgICBsZXQgdGhyZXNob2xkXG4gICAgICBsZXQgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgbGV0IGRpY2VNb2RpZmllciA9IDBcbiAgICAgIGxldCBhc2sgPSBmYWxzZVxuICAgICAgbGV0IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGxldCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNvbnN0IHRocmVzaG9sZFN0ciA9IGVzY2FwZWQubWF0Y2goL1teKF0rKD89XFwpKS8pXG4gICAgICBpZiAodGhyZXNob2xkU3RyICYmIHRocmVzaG9sZFN0ci5sZW5ndGgpIHtcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHRocmVzaG9sZFN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiB0aHJlc2hvbGRTdHIpIHtcbiAgICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKGAoJHttYXRjaH0pYCwgJycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpZmZpY3VsdHlTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXltdKyg/PVxcXSkvKVxuICAgICAgaWYgKGRpZmZpY3VsdHlTdHIgJiYgZGlmZmljdWx0eVN0ci5sZW5ndGgpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkoZGlmZmljdWx0eVN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBkaWZmaWN1bHR5U3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgWyR7bWF0Y2h9XWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZXNjYXBlZC5pbmNsdWRlcygnPycpKSB7XG4gICAgICAgIGFzayA9IHRydWVcbiAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZSgnPycsICcnKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIoZXNjYXBlZCkpKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIoZXNjYXBlZClcblxuICAgICAgaWYgKGFzaykge1xuICAgICAgICBjb25zdCBkaWFsb2dPcHRpb25zID0ge1xuICAgICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgICBtb2RpZmllcjogZGljZU1vZGlmaWVyLFxuICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgYXNrVmFsdWU6IHRydWVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKGRpYWxvZ09wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpIHx8IHRocmVzaG9sZFxuICAgICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGlmICh0aHJlc2hvbGQpIGNoZWNrLnJhd1ZhbHVlID0gIWlzTmFOKHRocmVzaG9sZCkgPyB0aHJlc2hvbGQgOiB1bmRlZmluZWRcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChzcGVha2VyLnRva2VuICYmIHNwZWFrZXIuc2NlbmUpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgICAgIGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICApIC8vIFJFRkFDVE9SSU5HICgyKSArKysgd2h5IHNwZWFrZXIuc2NlbmUuXG4gICAgICBpZiAoYWN0b3IpIGNoZWNrLmFjdG9yID0gYWN0b3JcbiAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICBpZiAoYWN0b3IpIGNoZWNrLmFjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0ZXN0ICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm9zKCdEbyBzb21lIHN0dWZmJylcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21TdHJpbmcgKGFjdG9yU3RyaW5nKSB7XG4gICAgbGV0IGFjdG9yXG5cbiAgICAvLyBUb2tlbiBpcyBiZXR0ZXIgdGhhbiBhY3Rvci5cbiAgICAvLyBDYXNlIDEgOiB0cnlpbmcgd2l0aCBJRC5cbiAgICAvLyBDYXNlIDEuMSA6IHRva2VuIGZvdW5kLlxuICAgIGlmIChnYW1lLmFjdG9ycy50b2tlbnNbYWN0b3JTdHJpbmddKSByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXVxuICAgIC8vIENhc2UgMS4yIDogYWN0b3IgZm91bmQuXG4gICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoYWN0b3JTdHJpbmcpXG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIENhc2UgMiA6IHRyeWluZyB3aXRoIG5hbWVcbiAgICAvLyBDYXNlIDIuMSA6IHRva2VuIGZvdW5kLlxuICAgIGFjdG9yID0gT2JqZWN0LnZhbHVlcyhnYW1lLmFjdG9ycy50b2tlbnMpLmZpbmQodCA9PiB7XG4gICAgICBpZiAodC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIC8vIENhc2UgMi4yIDogYWN0b3IgZm91bmQuXG4gICAgICBhY3RvciA9IGdhbWUuYWN0b3JzLmZpbmQoYSA9PiB7XG4gICAgICAgIGlmIChhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYWN0b3JTdHJpbmcudG9Mb3dlckNhc2UoKSkgcmV0dXJuIHRydWVcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoYWN0b3IpIHJldHVybiBhY3RvclxuXG4gICAgLy8gLy8gQ2FzZSAzIHN0cmluZyBtYXliZSBhbiBhY3RvcktleVxuICAgIC8vIGlmIChjcmVhdHVyZS5pbmNsdWRlcygnLicpKSB7XG4gICAgLy8gICBjb25zdCBbLCBhY3RvcklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgLy8gICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21TdHJpbmcoYWN0b3JJZClcbiAgICAvLyB9XG5cbiAgICAvLyBObyBqb3lcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljTmFtZXMgKGNoYXIpIHtcbiAgICBjb25zdCBjaGFyS2V5ID0gY2hhci50b0xvd2VyQ2FzZSgpXG5cbiAgICBzd2l0Y2ggKGNoYXJLZXkpIHtcbiAgICAgIGNhc2UgJ3N0cic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNUUicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TdHJlbmd0aCcpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2Nvbic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNPTicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICBjYXNlICdzaXonOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TSVonKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU2l6ZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2RleCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkRFWCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5EZXh0ZXJpdHknKVxuICAgICAgICB9XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5BUFAnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQXBwZWFyYW5jZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLklOVCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdwb3cnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5QT1cnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB9XG4gICAgICBjYXNlICdlZHUnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FRFUnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnbHVjayc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljc1xuICAgICAgICApKSB7XG4gICAgICAgICAgaWYgKGNoYXJLZXkgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNvbnZlcnREaWZmaWN1bHR5IChkaWZmaWN1bHR5KSB7XG4gICAgaWYgKFN0cmluZyhkaWZmaWN1bHR5KSA9PT0gJzAnKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgaWYgKHR5cGVvZiBkaWZmaWN1bHR5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGRpZmZpY3VsdHlcbiAgICBpZiAoIWlzTmFOKE51bWJlcihkaWZmaWN1bHR5KSkpIHJldHVybiBOdW1iZXIoZGlmZmljdWx0eSlcblxuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjYXNlICcrKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNraWxsQ2hlY2tNYWNybyAoc2tpbGwsIGV2ZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpIC8vIE5vIG5lZWQgdG8gZmlsbCBhY3RvciB0b2tlblxuXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWN0b3Iuc2tpbGxDaGVjayhza2lsbCwgZXZlbnQuc2hpZnRLZXksIG9wdGlvbnMpXG4gIH1cblxuICBzdGF0aWMgd2VhcG9uQ2hlY2tNYWNybyAod2VhcG9uLCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgaWYgKHNwZWFrZXIuc2NlbmUgJiYgc3BlYWtlci50b2tlbikge1xuICAgICAgICAvLyBDcmVhdGUgYSBzeW50aGV0aWMgYWN0b3IgbGlua2VkIHdpdGggdGhlIGFjdGl2ZSB0b2tlbi5cbiAgICAgICAgY29uc3QgYmFzZUFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNwZWFrZXIuc2NlbmUpXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUudG9rZW5zLmdldChzcGVha2VyLnRva2VuKVxuXG4gICAgICAgIGNvbnN0IEFjdG9yQ2xhc3MgPSBnZXREb2N1bWVudENsYXNzKCdBY3RvcicpXG4gICAgICAgIGNvbnN0IHRva2VuQWN0b3IgPSBuZXcgQWN0b3JDbGFzcyhiYXNlQWN0b3IudG9KU09OKCksIHtcbiAgICAgICAgICBwYXJlbnQ6IHRva2VuXG4gICAgICAgIH0pXG4gICAgICAgIGFjdG9yID0gdG9rZW5BY3RvclxuICAgICAgfSBlbHNlIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgfVxuXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWN0b3Iud2VhcG9uQ2hlY2sod2VhcG9uLCBldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjaGVja01hY3JvICh0aHJlc2hvbGQgPSB1bmRlZmluZWQsIGV2ZW50ID0gbnVsbCkge1xuICAgIGF3YWl0IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQsIHsgdGhyZXNob2xkIH0pXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTWFjcm8gKGJhciwgZGF0YSwgc2xvdCkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykgcmV0dXJuXG5cbiAgICBjb25zdCBpdGVtID0gZnJvbVV1aWRTeW5jKGRhdGEudXVpZCwgYmFyKVxuXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvTm9JdGVtRm91bmQnKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIShpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSAmJiAhKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykpIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9JbmNvcnJlY3RUeXBlJylcbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgY29tbWFuZCA9ICcnXG5cbiAgICBpZiAoaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgY29tbWFuZCA9IGBnYW1lLkNvQzcubWFjcm9zLndlYXBvbkNoZWNrKHtuYW1lOicke2l0ZW0ubmFtZX0nLCB1dWlkOicke2RhdGEudXVpZH0nfSwgZXZlbnQpO2BcbiAgICB9XG5cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0dsb2JhbFNwZWMnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Muc2tpbGxDaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgdXVpZDonJHtkYXRhLnV1aWR9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmQgIT09ICcnKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIG1hY3JvIGNvbW1hbmRcbiAgICAgIGNvbnN0IG1hY3JvID0gZ2FtZS5tYWNyb3MuY29udGVudHMuZmluZChcbiAgICAgICAgbSA9PiBtLm5hbWUgPT09IGl0ZW0ubmFtZSAmJiBtLmNvbW1hbmQgPT09IGNvbW1hbmRcbiAgICAgIClcbiAgICAgIGlmICghbWFjcm8pIHtcbiAgICAgICAgTWFjcm8uY3JlYXRlKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHtcbiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgaW1nOiBpdGVtLmltZyxcbiAgICAgICAgICBjb21tYW5kXG4gICAgICAgIH0pKS50aGVuKG1hY3JvID0+IHtcbiAgICAgICAgICBnYW1lLnVzZXIuYXNzaWduSG90YmFyTWFjcm8obWFjcm8sIHNsb3QpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgZ2FtZS51c2VyLmFzc2lnbkhvdGJhck1hY3JvKG1hY3JvLCBzbG90KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlRGV2UGhhc2UgKHRvZ2dsZSkge1xuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcsIHRvZ2dsZSlcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICB0b2dnbGVcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGV2UGhhc2VFbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpXG4gICAgKVxuICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgdHlwZTogJ3VwZGF0ZUNoYXInXG4gICAgfSlcbiAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZUNoYXJDcmVhdGlvbiAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcsIHRvZ2dsZSlcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICB0b2dnbGVcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJylcbiAgICApXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gICAgSG9va3MuY2FsbCgndG9nZ2xlQ2hhckNyZWF0aW9uJywgdG9nZ2xlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFRhcmdldCAoKSB7XG4gICAgY29uc3QgdXNlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1c2VyID0+IHVzZXIuYWN0aXZlKVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzXG4gICAgbGV0IGNoZWNrT3B0aW9ucyA9IGA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIkNPQ0NoZWNrQWxsUENcIiBpZD1cIkNPQ0NoZWNrQWxsUENcIj5cXG5cbiAgICA8bGFiZWwgZm9yPVwiQ09DQ2hlY2tBbGxQQ1wiPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmFsbEFjdG9ycycpfTwvbGFiZWw+YFxuICAgIGNvbnN0IHBsYXllclRva2VuSWRzID0gdXNlcnNcbiAgICAgIC5tYXAodSA9PiB1LmNoYXJhY3Rlcj8uaWQpXG4gICAgICAuZmlsdGVyKGlkID0+IGlkICE9PSB1bmRlZmluZWQpXG4gICAgY29uc3Qgc2VsZWN0ZWRQbGF5ZXJJZHMgPSBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubWFwKHRva2VuID0+IHtcbiAgICAgIHJldHVybiB0b2tlbi5hY3Rvci5pZFxuICAgIH0pXG5cbiAgICAvLyBCdWlsZCBjaGVja2JveCBsaXN0IGZvciBhbGwgYWN0aXZlIHBsYXllcnNcbiAgICBhY3RvcnMuZm9yRWFjaChhY3RvciA9PiB7XG4gICAgICBjb25zdCBjaGVja2VkID1cbiAgICAgICAgKHNlbGVjdGVkUGxheWVySWRzLmluY2x1ZGVzKGFjdG9yLmlkKSB8fFxuICAgICAgICAgIHBsYXllclRva2VuSWRzLmluY2x1ZGVzKGFjdG9yLmlkKSkgJiZcbiAgICAgICAgJ2NoZWNrZWQnXG4gICAgICBjaGVja09wdGlvbnMgKz0gYFxuICAgICA8YnI+XG4gICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiJHthY3Rvci5pZH1cIiBpZD1cIiR7YWN0b3IuaWR9XCIgdmFsdWU9XCIke2FjdG9yLm5hbWV9XCIgJHtjaGVja2VkfT5cXG5cbiAgICAgPGxhYmVsIGZvcj1cIiR7YWN0b3IuaWR9XCI+JHthY3Rvci5uYW1lfTwvbGFiZWw+XG4gICAgICAgYFxuICAgIH0pXG5cbiAgICBuZXcgRGlhbG9nKHtcbiAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuZHJlYW1pbmcnKX1gLFxuICAgICAgY29udGVudDogYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5yZXN0VGFyZ2V0cydcbiAgICAgICl9OiAke2NoZWNrT3B0aW9uc30gPGJyPmAsXG4gICAgICBidXR0b25zOiB7XG4gICAgICAgIHdoaXNwZXI6IHtcbiAgICAgICAgICBsYWJlbDogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnN0YXJ0UmVzdCcpfWAsXG4gICAgICAgICAgY2FsbGJhY2s6IGFzeW5jIGh0bWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IFtdXG4gICAgICAgICAgICBsZXQgYWxsID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IHVzZXJzID0gaHRtbC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJylcbiAgICAgICAgICAgIGZvciAoY29uc3QgdXNlciBvZiB1c2Vycykge1xuICAgICAgICAgICAgICBpZiAodXNlci5uYW1lID09PSAnQ09DQ2hlY2tBbGxQQycgJiYgdXNlci5jaGVja2VkKSBhbGwgPSB0cnVlXG4gICAgICAgICAgICAgIGlmICh1c2VyLmNoZWNrZWQgfHwgYWxsKSB0YXJnZXRzLnB1c2godXNlci5pZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMuc3RhcnRSZXN0KHRhcmdldHMpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc3RhcnRSZXN0ICh0YXJnZXRzKSB7XG4gICAgaWYgKCF0YXJnZXRzLmxlbmd0aCkgcmV0dXJuXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGFjdG9yID0+IHRhcmdldHMuaW5jbHVkZXMoYWN0b3IuaWQpKVxuICAgIGxldCBjaGF0Q29udGVudCA9IGA8aT4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5kcmVhbWluZycpfS4uLjwvaT48YnI+YFxuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcbiAgICAgICAgbGV0IHF1aWNrSGVhbGVyID0gZmFsc2VcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFjdG9yLml0ZW1zKSB7XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RhbGVudCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLm5hbWUgPT09IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5xdWlja0hlYWxlcicpfWApIHtcbiAgICAgICAgICAgICAgcXVpY2tIZWFsZXIgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzQ3JpdGljYWxXb3VuZHMgPVxuICAgICAgICAgICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzJykgJiZcbiAgICAgICAgICBhY3Rvci5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgIGNvbnN0IGRhaWx5U2FuaXR5TG9zcyA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3NcbiAgICAgICAgY29uc3QgaHBWYWx1ZSA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlXG4gICAgICAgIGNvbnN0IGhwTWF4ID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAubWF4XG4gICAgICAgIGNvbnN0IG1wVmFsdWUgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICAgICBjb25zdCBtcE1heCA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLm1heFxuICAgICAgICBjb25zdCBwb3cgPSBhY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZVxuICAgICAgICBjaGF0Q29udGVudCA9IGNoYXRDb250ZW50ICsgYDxicj48Yj4ke2FjdG9yLm5hbWV9LiA8L2I+YFxuICAgICAgICBpZiAoaHBWYWx1ZSA8IGhwTWF4KSB7XG4gICAgICAgICAgaWYgKGlzQ3JpdGljYWxXb3VuZHMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrcmVkXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuaGFzQ3JpdGljYWxXb3VuZHMnXG4gICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaGVhbEFtb3VudCA9IDFcbiAgICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUZhc3RlclJlY292ZXJ5JykpIHtcbiAgICAgICAgICAgICAgaGVhbEFtb3VudCA9IDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChxdWlja0hlYWxlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBoZWFsQW1vdW50KytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlYWxBbW91bnQgPSBNYXRoLm1pbihoZWFsQW1vdW50LCBocE1heCAtIGhwVmFsdWUpXG4gICAgICAgICAgICBpZiAoaGVhbEFtb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5oZWFsdGhSZWNvdmVyZWQnXG4gICAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcucHVscEhlYWx0aFJlY292ZXJlZCcsXG4gICAgICAgICAgICAgICAgICB7IG51bWJlcjogaGVhbEFtb3VudCB9XG4gICAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOlxuICAgICAgICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlICsgaGVhbEFtb3VudFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhaWx5U2FuaXR5TG9zcyA+IDApIHtcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5kYWlseVNhbkxvc3NSZXN0YXJ0ZWQnXG4gICAgICAgICAgICApfS48L2I+YFxuICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyc6IDAsXG4gICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnOiBNYXRoLmZsb29yKGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3VycyA9IDdcbiAgICAgICAgaWYgKGhvdXJzID4gMCAmJiBtcFZhbHVlIDwgbXBNYXgpIHtcbiAgICAgICAgICBsZXQgbWFnaWNBbW91bnQgPSBob3VycyAqIE1hdGguY2VpbChwb3cgLyAxMDApXG4gICAgICAgICAgbWFnaWNBbW91bnQgPSBNYXRoLm1pbihtYWdpY0Ftb3VudCwgbXBNYXggLSBtcFZhbHVlKVxuICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5tYWdpY1BvaW50c1JlY292ZXJlZCdcbiAgICAgICAgICAgICl9OiAke21hZ2ljQW1vdW50fS48L2I+YFxuICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOlxuICAgICAgICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSArIG1hZ2ljQW1vdW50XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgIGNvbnRlbnQ6IGNoYXRDb250ZW50LFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSXG4gICAgfVxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVYUEdhaW4gKHRvZ2dsZSkge1xuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcsIHRvZ2dsZSlcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICB0b2dnbGVcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkRpc2FibGVkJylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcm9sbERpY2UgKGV2ZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBvcHRpb25zLmFza1ZhbHVlID0gIW9wdGlvbnMudGhyZXNob2xkXG4gICAgbGV0IGRpY2VNb2RpZmllciwgZGlmZmljdWx0eSwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgbGV0IHRocmVzaG9sZCA9IG9wdGlvbnMudGhyZXNob2xkXG5cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLm1vZGlmaWVyKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWV2ZW50Py5zaGlmdEtleSAmJiAhb3B0aW9ucy5mYXN0Rm9yd2FyZCkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIGRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICB0aHJlc2hvbGQgPSBOdW1iZXIodXNhZ2UuZ2V0KCd0aHJlc2hvbGQnKSlcbiAgICAgICAgZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWN0b3JzID0gW11cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICBhY3RvcnMucHVzaCh0b2tlbi5hY3Rvci50b2tlbktleSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGdhbWUudXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgIGFjdG9ycy5wdXNoKGdhbWUudXNlci5jaGFyYWN0ZXIudG9rZW5LZXkpXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB0ayBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgY2hlY2suYWN0b3IgPSB0a1xuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cblxuICAgIGlmICghYWN0b3JzLmxlbmd0aCkge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNoYXJTaGVldHMgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgZm9yIChjb25zdCBhIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChhPy50eXBlID09PSAnY2hhcmFjdGVyJyAmJiBhPy5zaGVldCAmJiBhPy5zaGVldD8ucmVuZGVyZWQpIHtcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgYSBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgICBpZiAoYS5pc093bmVyKSB7XG4gICAgICAgICAgYS51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHRydWUgfSlcbiAgICAgICAgICBhLnJlbmRlcihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgZnJvbSBfb25Ecm9wIHRvIGdldCB0aGUgZHJvcHBlZCBlbnRpdHlUeXBlIG9yIGVudGl0eVR5cGUgZnJvbSBhIGZvbGRlclxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyBbaXRlbXNdIGFycmF5IG9mIGl0ZW1zXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0RGF0YUZyb21Ecm9wRXZlbnQgKGV2ZW50LCBlbnRpdHlUeXBlID0gJ0l0ZW0nKSB7XG4gICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQpIHJldHVybiBbXVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhTGlzdCA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSlcbiAgICAgIGlmIChkYXRhTGlzdC50eXBlID09PSAnRm9sZGVyJyAmJiBkYXRhTGlzdC5kb2N1bWVudE5hbWUgPT09IGVudGl0eVR5cGUpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXdhaXQgZnJvbVV1aWQoZGF0YUxpc3QudXVpZClcbiAgICAgICAgaWYgKCFmb2xkZXIpIHJldHVybiBbXVxuICAgICAgICByZXR1cm4gZm9sZGVyLmNvbnRlbnRzXG4gICAgICB9IGVsc2UgaWYgKGRhdGFMaXN0LnR5cGUgPT09IGVudGl0eVR5cGUpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGRhdGFMaXN0LnV1aWQpXG4gICAgICAgIGlmICghaXRlbSkgcmV0dXJuIFtdXG4gICAgICAgIHJldHVybiBbaXRlbV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvcHlUb0NsaXBib2FyZCAodGV4dCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiB3aW5kb3cuaXNTZWN1cmVDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dFxuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCdcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUubGVmdCA9ICctOTk5cHgnXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnRvcCA9ICctOTk5cHgnXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dEFyZWEpXG4gICAgICAgIHRleHRBcmVhLmZvY3VzKClcbiAgICAgICAgdGV4dEFyZWEuc2VsZWN0KClcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpXG4gICAgICAgICAgICA/IHJlc29sdmUoKVxuICAgICAgICAgICAgOiByZWplY3QoXG4gICAgICAgICAgICAgIG5ldyBFcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hYmxlVG9Db3B5VG9DbGlwYm9hcmQnKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB0ZXh0QXJlYS5yZW1vdmUoKVxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIpKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hYmxlVG9Db3B5VG9DbGlwYm9hcmQnKSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcXVvdGVSZWdFeHAgKHN0cmluZykge1xuICAgIC8vIGh0dHBzOi8vYml0YnVja2V0Lm9yZy9jZ2dhZXJ0bmVyL2pzLWhhY2tzL3Jhdy9tYXN0ZXIvcXVvdGUuanNcbiAgICBjb25zdCBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gICAgbGV0IHFTdHJpbmcgPSAnJ1xuXG4gICAgZm9yIChsZXQgY3VycmVudCwgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgY3VycmVudCA9IHN0cmluZy5jaGFyQXQoaSlcblxuICAgICAgaWYgKGN1cnJlbnQgPj0gJyAnICYmIGN1cnJlbnQgPD0gJ34nKSB7XG4gICAgICAgIGlmIChjdXJyZW50ID09PSAnXFxcXCcgfHwgY3VycmVudCA9PT0gXCInXCIpIHtcbiAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcJ1xuICAgICAgICB9XG5cbiAgICAgICAgcVN0cmluZyArPSBjdXJyZW50LnJlcGxhY2UoL1stW1xcXS97fSgpKis/LlxcXFxeJHxdL2csICdcXFxcJCYnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChjdXJyZW50KSB7XG4gICAgICAgICAgY2FzZSAnXFxiJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxiJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcZic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcZidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXG4nOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXG4nXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxyJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxyJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcdCc6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdCdcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHYnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHYnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx1J1xuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcbiAgICAgICAgICAgIGZvciAobGV0IGogPSA0OyAtLWogPj0gY3VycmVudC5sZW5ndGg7IHFTdHJpbmcgKz0gJzAnKTtcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gY3VycmVudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHFTdHJpbmdcbiAgfVxuXG4gIHN0YXRpYyBzZXRCeVBhdGggKG9iaiwgcGF0aCwgdmFsdWUpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICAgIGxldCBvID0gb2JqXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmICghb1twYXJ0c1tpXV0pIG9bcGFydHNbaV1dID0ge31cbiAgICAgICAgbyA9IG9bcGFydHNbaV1dXG4gICAgICB9XG4gICAgfVxuXG4gICAgb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV0gPSB2YWx1ZVxuICB9XG5cbiAgc3RhdGljIGdldEJ5UGF0aCAob2JqLCBwYXRoKSB7XG4gICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcbiAgICBsZXQgbyA9IG9ialxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBpZiAoIW9bcGFydHNbaV1dKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgRG9jdW1lbnQgYnkgaXRzIFVuaXZlcnNhbGx5IFVuaXF1ZSBJZGVudGlmaWVyICh1dWlkKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHV1aWQgICBUaGUgdXVpZCBvZiB0aGUgRG9jdW1lbnQgdG8gcmV0cmlldmVcbiAgICogQHJldHVybiB7UHJvbWlzZTxEb2N1bWVudHxudWxsPn1cbiAgICovXG4gIHN0YXRpYyBTZnJvbVV1aWQgKHV1aWQpIHtcbiAgICBsZXQgcGFydHMgPSB1dWlkLnNwbGl0KCcuJylcbiAgICBsZXQgZG9jXG5cbiAgICAvLyBDb21wZW5kaXVtIERvY3VtZW50c1xuICAgIGlmIChwYXJ0c1swXSA9PT0gJ0NvbXBlbmRpdW0nKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgICAgLy8gcmV0dXJuIGZyb21VdWlkKHV1aWQpIC8vIFJldHVybiBQcm9taXNlXG4gICAgICAvLyBwYXJ0cy5zaGlmdCgpO1xuICAgICAgLy8gY29uc3QgW3Njb3BlLCBwYWNrTmFtZSwgaWRdID0gcGFydHMuc2xpY2UoMCwgMyk7XG4gICAgICAvLyBwYXJ0cyA9IHBhcnRzLnNsaWNlKDMpO1xuICAgICAgLy8gY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KGAke3Njb3BlfS4ke3BhY2tOYW1lfWApO1xuICAgICAgLy8gcmV0dXJuIGF3YWl0IHBhY2s/LmdldERvY3VtZW50KGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV29ybGQgRG9jdW1lbnRzXG4gICAgICBjb25zdCBbZG9jTmFtZSwgZG9jSWRdID0gcGFydHMuc2xpY2UoMCwgMilcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMilcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBDT05GSUdbZG9jTmFtZV0uY29sbGVjdGlvbi5pbnN0YW5jZVxuICAgICAgZG9jID0gY29sbGVjdGlvbi5nZXQoZG9jSWQpXG4gICAgfVxuXG4gICAgLy8gRW1iZWRkZWQgRG9jdW1lbnRzXG4gICAgd2hpbGUgKGRvYyAmJiBwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBbZW1iZWRkZWROYW1lLCBlbWJlZGRlZElkXSA9IHBhcnRzLnNsaWNlKDAsIDIpXG4gICAgICBkb2MgPSBkb2MuZ2V0RW1iZWRkZWREb2N1bWVudChlbWJlZGRlZE5hbWUsIGVtYmVkZGVkSWQpXG4gICAgICBwYXJ0cyA9IHBhcnRzLnNsaWNlKDIpXG4gICAgfVxuICAgIHJldHVybiBkb2MgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGlzRG9jdW1lbnRVdWlkUGFjayAodXVpZCkge1xuICAgIGlmICh1dWlkLmluY2x1ZGVzKCdDb21wZW5kaXVtJykpIHJldHVybiB0cnVlXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBpc0RvY3VtZW50VXVpZCAodXVpZCkge1xuICAgIGNvbnN0IGlkZW50aWZpZXJzID0gWydBY3RvcicsICdTY2VuZScsICdUb2tlbicsICdJdGVtJywgJ0NvbXBlbmRpdW0nXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh1dWlkLmluY2x1ZGVzKGlkZW50aWZpZXJzW2ldKSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YSAoZHJvcERhdGEpIHtcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZHJvcERhdGEudG9rZW5VdWlkKSB7XG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudG9rZW5VdWlkXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZHJvcERhdGEudXVpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS51dWlkXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY1V1aWQgPVxuICAgICAgICBkcm9wRGF0YS5zY2VuZUlkICYmIGRyb3BEYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2Ryb3BEYXRhLnNjZW5lSWR9LlRva2VuLiR7ZHJvcERhdGEudG9rZW5JZH1gXG4gICAgICAgICAgOiBkcm9wRGF0YS5hY3RvcklkIHx8IGRyb3BEYXRhLmFjdG9yS2V5IHx8IGRyb3BEYXRhLmlkXG4gICAgfVxuICAgIGlmIChkcm9wRGF0YS50eXBlID09PSAnVG9rZW4nKSB7XG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudXVpZFxuICAgIH0gZWxzZSBpZiAoZG9jVXVpZCkge1xuICAgICAgYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxuICAgICAgaWYgKCFhY3RvciAmJiBkcm9wRGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuICAgIHJldHVybiBkb2NVdWlkXG4gIH1cblxuICBzdGF0aWMgZ2V0RG9jdW1lbnRGcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICAvLyBDYXNlIDAgLSBhIGRvY3VtZW50IFV1aWRcbiAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0RvY3VtZW50VXVpZChrZXkpKSB7XG4gICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0RvY3VtZW50VXVpZFBhY2soa2V5KSkgcmV0dXJuIGZyb21VdWlkKGtleSkgLy8gVE9ETyBDaGVjayB3ZSBjYW4gZG8gdGhhdFxuICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKGtleSlcbiAgICB9XG5cbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9XG4gICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzY2VuZSlcbiAgICAgIHJldHVybiB0b2tlblxuICAgIH1cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGNvbnN0IGRvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KGtleSlcbiAgICBpZiAoIWRvYykgcmV0dXJuIG51bGxcbiAgICBpZiAoZG9jLmFjdG9yKSByZXR1cm4gZG9jLmFjdG9yXG4gICAgaWYgKGRvYy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ0NvQ0FjdG9yJykgcmV0dXJuIGRvY1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZvbGRlciBvbiB0aGUgYWN0b3JzIHRhYiBjYWxsZWQgXCJJbXBvcnRlZCBDaGFyYWN0ZXJzXCIgaWYgdGhlIGZvbGRlciBkb2Vzbid0IGV4aXN0LlxuICAgKiBAcmV0dXJucyB7Rm9sZGVyfSB0aGUgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzICgpIHtcbiAgICBsZXQgZm9sZGVyTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgIGlmIChmb2xkZXJOYW1lID09PSAnQ29DNy5JbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKSB7XG4gICAgICBmb2xkZXJOYW1lID0gJ0ltcG9ydGVkIGNoYXJhY3RlcnMnXG4gICAgfVxuICAgIGxldCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBnYW1lLmZvbGRlcnMuZmluZChcbiAgICAgIGVudHJ5ID0+IGVudHJ5Lm5hbWUgPT09IGZvbGRlck5hbWUgJiYgZW50cnkudHlwZSA9PT0gJ0FjdG9yJ1xuICAgIClcbiAgICBpZiAoXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09IG51bGwgfHxcbiAgICAgIHR5cGVvZiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIGZvbGRlclxuICAgICAgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gYXdhaXQgRm9sZGVyLmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6IGZvbGRlck5hbWUsXG4gICAgICAgIHR5cGU6ICdBY3RvcicsXG4gICAgICAgIHBhcmVudDogbnVsbFxuICAgICAgfSlcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZWRJbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gIH1cblxuICAvKipcbiAgICogZ3Vlc3NJdGVtLCB0cnkgYW5kIGZpbmQgdGhlIGl0ZW0gaW4gdGhlIGxvY2F0aW9ucyBkZWZpbmVkIGluICR7c291cmNlfSBpID0gSXRlbSBEaXJlY3RvcnksIHcgPSBXb3JsZCBDb21wZW5kaXVtcywgbSA9IE1vZHVsZSBDb21wZW5kaXVtcywgcyA9IFN5c3RlbSBDb21wZW5kaXVtc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBJdGVtIHR5cGUgdG8gZmluZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIGl0ZW0gdG8gZmluZFxuICAgKiBAcGFyYW0ge09iamVjdH0gY29tYmF0IG51bGwgKGRlZmF1bHQpLiBJZiBib29sZWFuIGNvbWJhdCBwcm9wZXJ0eSBvZiBza2lsbCBtdXN0IG1hdGNoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgJycgKGRlZmF1bHQpLiBDaGVjayBvcmRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmFsbGJhY2tBbnkgZmFsc2UgKGRlZmF1bHQpLiBTaG91bGQgYW55IHNwZWNpYWxpemF0aW9uIHRoYXQgaXNuJ3QgZm91bmQgdHJ5IHVzaW5nIChBbnkpIGl0ZW1zXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhIEl0ZW0gb3IgbnVsbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGd1ZXNzSXRlbSAoXG4gICAgdHlwZSxcbiAgICBuYW1lLFxuICAgIHsgY29tYmF0ID0gbnVsbCwgc291cmNlID0gJycsIGZhbGxiYWNrQW55ID0gZmFsc2UgfSA9IHt9XG4gICkge1xuICAgIGxldCBleGlzdGluZyA9IG51bGxcbiAgICBuYW1lID0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgZm9yIChsZXQgbyA9IDAsIG9NID0gc291cmNlLmxlbmd0aDsgbyA8IG9NOyBvKyspIHtcbiAgICAgIHN3aXRjaCAoc291cmNlLnN1YnN0cmluZyhvLCBvICsgMSkpIHtcbiAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3cnOlxuICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgcGFjay5tZXRhZGF0YS50eXBlID09PSAnSXRlbScgJiZcbiAgICAgICAgICAgICAgKChzb3VyY2Vbb10gPT09ICd3JyAmJiBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgPT09ICd3b3JsZCcpIHx8XG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ1MnICYmIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ0NvQzcnKSB8fFxuICAgICAgICAgICAgICAgIChzb3VyY2Vbb10gPT09ICdzJyAmJlxuICAgICAgICAgICAgICAgICAgIVsnd29ybGQnLCAnQ29DNyddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZSkpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcbiAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkb2N1bWVudHMuZmluZChcbiAgICAgICAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lICYmXG4gICAgICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZhbGxiYWNrQW55ICYmIHR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gbmFtZS5tYXRjaCgvXiguKyBcXCgpKD8hYW55KS4rKFxcKSkkLylcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBtYXRjaFsxXSArICdhbnknICsgbWF0Y2hbMl0sXG4gICAgICAgICAgeyBjb21iYXQsIHNvdXJjZSB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdG9LZWJhYkNhc2UgKHMpIHtcbiAgICBpZiAoIXMpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBjb25zdCBtYXRjaCA9IHMubWF0Y2goL1tBLVpdezIsfSg/PVtBLVpdW2Etel0rWzAtOV0qfFxcYil8W0EtWl0/W2Etel0rWzAtOV0qfFtBLVpdfFswLTldKy9nKVxuXG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGNoLmpvaW4oJy0nKS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBzdGF0aWMgc29ydEJ5TmFtZUtleSAoYSwgYikge1xuICAgIHJldHVybiBhLm5hbWVcbiAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgLmxvY2FsZUNvbXBhcmUoXG4gICAgICAgIGIubmFtZVxuICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0QW5JZEZvckdtICgpIHtcbiAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00gJiYgdS5pZCAhPT0gZ2FtZS51c2VyLmlkKVxuICAgIHN3aXRjaCAoa2VlcGVycy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQ29DNy5FcnJvck1pc3NpbmdLZWVwZXJVc2VyJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGtlZXBlcnNbMF0uaWRcbiAgICB9XG4gICAgcmV0dXJuIGtlZXBlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICoga2VlcGVycy5sZW5ndGgpXS5pZFxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURFZGl0b3IgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtZWRpdG9yLmhicycsXG4gICAgICB3aWR0aDogOTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29DSURGbGFnLnRpdGxlJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnN1cHBvcnRlZExhbmd1YWdlcyA9IENPTkZJRy5zdXBwb3J0ZWRMYW5ndWFnZXNcblxuICAgIHRoaXMub3B0aW9ucy5lZGl0YWJsZSA9IHRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGVcblxuICAgIHNoZWV0RGF0YS5ndWVzc0NvZGUgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZCh0aGlzLm9iamVjdClcbiAgICBzaGVldERhdGEuaWRQcmVmaXggPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ2V0UHJlZml4KHRoaXMub2JqZWN0KVxuXG4gICAgc2hlZXREYXRhLmNvY2lkRmxhZyA9IHRoaXMub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcblxuICAgIHNoZWV0RGF0YS5pZCA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LmlkIHx8ICcnXG4gICAgc2hlZXREYXRhLmxhbmcgPSBzaGVldERhdGEuY29jaWRGbGFnPy5sYW5nIHx8IGdhbWUuaTE4bi5sYW5nXG4gICAgc2hlZXREYXRhLnByaW9yaXR5ID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ucHJpb3JpdHkgfHwgMFxuXG4gICAgc2hlZXREYXRhLmVyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6IChzaGVldERhdGEuY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGNvbnN0IENvQ0lES2V5cyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMgPz8ge30pXG4gICAgY29uc3QgcHJlZml4ID0gbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNoZWV0RGF0YS5pZFByZWZpeCkpXG4gICAgc2hlZXREYXRhLmV4aXN0aW5nS2V5cyA9IE9iamVjdC5rZXlzKENvQ0lES2V5cykucmVkdWNlKChvYmosIGspID0+IHtcbiAgICAgIGlmIChrLm1hdGNoKHByZWZpeCkpIHtcbiAgICAgICAgb2JqLnB1c2goeyBrLCBuYW1lOiBDb0NJREtleXNba10gfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuaXNTeXN0ZW1JRCA9ICh0eXBlb2YgQ29DSURLZXlzW3NoZWV0RGF0YS5pZF0gIT09ICd1bmRlZmluZWQnKVxuICAgIGNvbnN0IG1hdGNoID0gc2hlZXREYXRhLmlkLm1hdGNoKC9eKFteXFxcXC5dKylcXC4oW15cXFxcLl0qKVxcLiguKykvKVxuICAgIHNoZWV0RGF0YS5fZXhpc3RpbmcgPSAobWF0Y2ggJiYgdHlwZW9mIG1hdGNoWzNdICE9PSAndW5kZWZpbmVkJyA/IG1hdGNoWzNdIDogJycpXG5cbiAgICBpZiAoc2hlZXREYXRhLmlkICYmIHNoZWV0RGF0YS5sYW5nKSB7XG4gICAgICAvLyBGaW5kIG91dCBpZiB0aGVyZSBleGlzdHMgYSBkdXBsaWNhdGUgQ29DSURcbiAgICAgIGNvbnN0IHdvcmxkRG9jdW1lbnRzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREFsbCh7XG4gICAgICAgIGNvY2lkOiBzaGVldERhdGEuaWQsXG4gICAgICAgIGxhbmc6IHNoZWV0RGF0YS5sYW5nLFxuICAgICAgICBzY29wZTogJ3dvcmxkJ1xuICAgICAgfSlcbiAgICAgIGNvbnN0IHVzZWRFcmFzID0ge31cbiAgICAgIGNvbnN0IHVuaXF1ZVdvcmxkUHJpb3JpdHkgPSB7fVxuICAgICAgc2hlZXREYXRhLndvcmxkRG9jdW1lbnRJbmZvID0gYXdhaXQgUHJvbWlzZS5hbGwod29ybGREb2N1bWVudHMubWFwKGFzeW5jIChkKSA9PiB7XG4gICAgICAgIGlmIChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHVuaXF1ZVdvcmxkUHJpb3JpdHksIGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdKSkge1xuICAgICAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dKytcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8qJ10gPSAxXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXJhcyA9IChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPyBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLnNvcnQoKSA6IFtdKVxuICAgICAgICBmb3IgKGNvbnN0IGVyYSBvZiBlcmFzKSB7XG4gICAgICAgICAgdXNlZEVyYXNbZXJhXSA9IENPQzcuZXJhc1tlcmFdID8/ICc/J1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZXJhczogZXJhcy5yZWR1Y2UoZnVuY3Rpb24gKGFsbCwgY3VycmVudCkge1xuICAgICAgICAgICAgYWxsW2N1cnJlbnRdID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGFsbFxuICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICBwcmlvcml0eTogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSxcbiAgICAgICAgICBsYW5nOiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcgPz8gJ2VuJyxcbiAgICAgICAgICBsaW5rOiBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoZC5saW5rLCB7IGFzeW5jOiB0cnVlIH0pLFxuICAgICAgICAgIGZvbGRlcjogZD8uZm9sZGVyPy5uYW1lXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgICAgaWYgKE9iamVjdC5lbnRyaWVzKHVuaXF1ZVdvcmxkUHJpb3JpdHkpLmZpbHRlcihjID0+IGNbMV0gPiAxKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS53b3JsZER1cGxpY2F0ZXMgPSB3b3JsZERvY3VtZW50cy5sZW5ndGggPz8gMFxuXG4gICAgICBjb25zdCBjb21wZW5kaXVtRG9jdW1lbnRzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREFsbCh7XG4gICAgICAgIGNvY2lkOiBzaGVldERhdGEuaWQsXG4gICAgICAgIGxhbmc6IHNoZWV0RGF0YS5sYW5nLFxuICAgICAgICBzY29wZTogJ2NvbXBlbmRpdW1zJ1xuICAgICAgfSlcbiAgICAgIGNvbnN0IHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IHt9XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bURvY3VtZW50SW5mbyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbXBlbmRpdW1Eb2N1bWVudHMubWFwKGFzeW5jIChkKSA9PiB7XG4gICAgICAgIGlmIChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSwgZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF0pKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0gPSAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dKytcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLyonXSA9IDFcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlcmFzID0gKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/IE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpIDogW10pXG4gICAgICAgIGZvciAoY29uc3QgZXJhIG9mIGVyYXMpIHtcbiAgICAgICAgICB1c2VkRXJhc1tlcmFdID0gQ09DNy5lcmFzW2VyYV0gPz8gJz8nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcmFzOiBlcmFzLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBjdXJyZW50KSB7XG4gICAgICAgICAgICBhbGxbY3VycmVudF0gPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gYWxsXG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHByaW9yaXR5OiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5LFxuICAgICAgICAgIGxhbmc6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyA/PyAnZW4nLFxuICAgICAgICAgIGxpbms6IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkLmxpbmssIHsgYXN5bmM6IHRydWUgfSksXG4gICAgICAgICAgZm9sZGVyOiBkPy5mb2xkZXI/Lm5hbWUgPz8gJydcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgICBpZiAoT2JqZWN0LmVudHJpZXModW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5KS5maWx0ZXIoYyA9PiBjWzFdID4gMSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRHVwbGljYXRlcyA9IGNvbXBlbmRpdW1Eb2N1bWVudHMubGVuZ3RoID8/IDBcbiAgICAgIHNoZWV0RGF0YS51c2VkRXJhcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh1c2VkRXJhcykpIHtcbiAgICAgICAgc2hlZXREYXRhLnVzZWRFcmFzLnB1c2goe1xuICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLnVzZWRFcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bURvY3VtZW50SW5mbyA9IFtdXG4gICAgICBzaGVldERhdGEud29ybGREb2N1bWVudEluZm8gPSBbXVxuICAgICAgc2hlZXREYXRhLndvcmxkRHVwbGljYXRlcyA9IDBcbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRHVwbGljYXRlcyA9IDBcbiAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSA9IGZhbHNlXG4gICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnYS5jb3B5LXRvLWNsaXBib2FyZCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCgkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCgpKVxuICAgIH0pXG5cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1fZXhpc3RpbmcnKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGNvbnN0IHByZWZpeCA9IG9iai5kYXRhKCdwcmVmaXgnKVxuICAgICAgbGV0IHZhbHVlID0gb2JqLnZhbCgpXG4gICAgICBpZiAodmFsdWUgIT09ICcnKSB7XG4gICAgICAgIHZhbHVlID0gcHJlZml4ICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZSh2YWx1ZSlcbiAgICAgIH1cbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwodmFsdWUpLnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnc2VsZWN0W25hbWU9a25vd25dJykuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKG9iai52YWwoKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdhW2RhdGEtZ3Vlc3NdJykuY2xpY2soYXN5bmMgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgY29uc3QgZ3Vlc3MgPSBvYmouZGF0YSgnZ3Vlc3MnKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbChndWVzcykudHJpZ2dlcignY2hhbmdlJylcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGVyYVRvZ2dsZSAoZG9jdW1lbnQsIHByb3BlcnR5SWQpIHtcbiAgICBpZiAoZG9jdW1lbnQudHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgLy8gU2V0dXBzIGNhbiBvbmx5IGhhdmUgb25lIGVyYSB0byBtYWtlIHN1cmUgdGhlIGNvcnJlY3Qgc2tpbGxzIGFyZSBwb3B1bGF0ZWQgdmlhIENvQyBJRFxuICAgICAgY29uc3QgdXBkYXRlID0ge1xuICAgICAgICBbcHJvcGVydHlJZF06IHRydWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhkb2N1bWVudC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKSkge1xuICAgICAgICAgIGlmIChrZXkgIT09IHByb3BlcnR5SWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZVsnLT0nICsga2V5XSA9IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzogdXBkYXRlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXM/Lltwcm9wZXJ0eUlkXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6IHtcbiAgICAgICAgICAgIFtwcm9wZXJ0eUlkXTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICAgW2BmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzLiR7cHJvcGVydHlJZH1gXTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICBbYGZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMuLT0ke3Byb3BlcnR5SWR9YF06IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCBDb0NJREVkaXRvci5lcmFUb2dnbGUodGhpcy5vYmplY3QsIHByb3BlcnR5SWQpXG4gICAgdGhpcy5yZW5kZXIoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgaWQgPSBmb3JtRGF0YS5pZCB8fCAnJ1xuICAgIGF3YWl0IHRoaXMub2JqZWN0LnVwZGF0ZSh7XG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQnOiBpZCxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nJzogZm9ybURhdGEubGFuZyB8fCBnYW1lLmkxOG4ubGFuZyxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSc6IGZvcm1EYXRhLnByaW9yaXR5IHx8IDAsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6ICh0aGlzLm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVxuICAgIH0pXG4gICAgY29uc3QgaHRtbCA9ICQodGhpcy5vYmplY3Quc2hlZXQuZWxlbWVudCkuZmluZCgnaGVhZGVyLndpbmRvdy1oZWFkZXIgYS5oZWFkZXItYnV0dG9uLmVkaXQtY29jLWlkLXdhcm5pbmcsaGVhZGVyLndpbmRvdy1oZWFkZXIgYS5oZWFkZXItYnV0dG9uLmVkaXQtY29jLWlkLWV4aXNpdGluZycpXG4gICAgaWYgKGh0bWwubGVuZ3RoKSB7XG4gICAgICBodG1sLmNzcyh7XG4gICAgICAgIGNvbG9yOiAoaWQgPyAndmFyKC0tY29sb3ItdGV4dC1saWdodC1oaWdobGlnaHQpJyA6ICdyZWQnKVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DSURFZGl0b3IgfSBmcm9tICcuLi9hcHBzL2NvYy1pZC1lZGl0b3IuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIChoZWFkZXJCdXR0b25zLCBzaGVldCkge1xuICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICBjb25zdCBzaGVldENvQ0lEID0gc2hlZXQub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcbiAgICBjb25zdCBub0lkID0gKHR5cGVvZiBzaGVldENvQ0lEID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygc2hlZXRDb0NJRC5pZCA9PT0gJ3VuZGVmaW5lZCcgfHwgc2hlZXRDb0NJRC5pZCA9PT0gJycpXG4gICAgY29uc3QgQ29DSURFZGl0b3JCdXR0b24gPSB7XG4gICAgICBjbGFzczogKG5vSWQgPyAnZWRpdC1jb2MtaWQtd2FybmluZycgOiAnZWRpdC1jb2MtaWQtZXhpc2l0aW5nJyksXG4gICAgICBsYWJlbDogJ0NvQzcuQ29DSURGbGFnLmlkJyxcbiAgICAgIGljb246ICdmYXMgZmEtZmluZ2VycHJpbnQnLFxuICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICBuZXcgQ29DSURFZGl0b3Ioc2hlZXQub2JqZWN0LCB7fSkucmVuZGVyKHRydWUsIHsgZm9jdXM6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbnVtYmVyT2ZCdXR0b25zID0gaGVhZGVyQnV0dG9ucy5sZW5ndGhcbiAgICBoZWFkZXJCdXR0b25zLnNwbGljZShudW1iZXJPZkJ1dHRvbnMgLSAxLCAwLCBDb0NJREVkaXRvckJ1dHRvbilcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb250ZXh0TWVudSB7XG4gIGJpbmQgKG1lbnUsIGh0bWwsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFja1xuICAgIHRoaXMuX2h0bWwgPSBodG1sXG4gICAgdGhpcy5fbWVudSA9IG1lbnVcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVudVRyaWdnZXIgPSBodG1sLmZpbmQoYFtkYXRhLWNvbnRleHQtbWVudT0ke21lbnUuaWR9XWApIC8vIEZpbmQgYWxsIG1lbnUgdHJpZ2dlcnMuXG4gICAgICBpZiAobWVudVRyaWdnZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLy8gSWYgdGhlcmUgaXMgbm8gdHJpZ2dlciwgZG8gbm90IGNvbnRpbnVlLlxuICAgICAgbWVudVRyaWdnZXIuY29udGV4dG1lbnUodGhpcy5fb25Db250ZXh0TWVudS5iaW5kKHRoaXMpKSAvLyBBdHRhY2ggdGhlIGhhbmRsZXIuXG4gICAgICBjb25zdCBtZW51RWxlbWVudCA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVNZW51KG1lbnUpIC8vIEJ1aWxkIHRoZSBtZW51XG4gICAgICBtZW51RWxlbWVudC5vbignY2xpY2snLFxuICAgICAgICAnLm1lbnUtYWN0aW9uJyxcbiAgICAgICAgdGhpcy5fb25NZW51QWN0aW9uLmJpbmQodGhpcykpXG4gICAgICAvLyBjb25zdCBkb2N1bWVudE1lbnUgPSB0aGlzLm1lbnVDb250YWluZXIuZmluZChgLmNvbnRleHQtbWVudS13cmFwcGVyLiR7bWVudS5pZH1gKVxuICAgICAgaWYgKHRoaXMubWVudS5sZW5ndGggIT09IDApIHRoaXMubWVudS5yZXBsYWNlV2l0aChtZW51RWxlbWVudClcbiAgICAgIGVsc2UgdGhpcy5tZW51Q29udGFpbmVyLmFwcGVuZChtZW51RWxlbWVudClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9XG4gIH1cblxuICBnZXQgbWVudUNvbnRhaW5lciAoKSB7XG4gICAgbGV0IG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgaWYgKG1lbnVDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9odG1sLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1lbnUtY29udGFpbmVyXCI+PC9kaXY+JylcbiAgICAgIG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgfVxuICAgIHJldHVybiBtZW51Q29udGFpbmVyXG4gIH1cblxuICBnZXQgbWVudSAoKSB7XG4gICAgLy8gY29uc3QgbWVudUNvbnRhaW5lciA9IHRoaXMubWVudUNvbnRhaW5lclxuICAgIC8vIGlmICghbWVudUNvbnRhaW5lciB8fCBtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke3RoaXMuX21lbnUuaWR9YClcbiAgfVxuXG4gIF9vbk1lbnVBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdicmFuY2gnKSkgcmV0dXJuXG4gICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrKGV2ZW50LCB0aGlzLnRhcmdldClcbiAgfVxuXG4gIHN0YXRpYyBjbG9zZUFsbCAoKSB7XG4gICAgY29uc3QgbWVudUNvbnRhaW5lcnMgPSAkKCdib2R5JykuZmluZCgnLm1lbnUtY29udGFpbmVyJylcbiAgICBjb25zdCBtZW51cyA9IG1lbnVDb250YWluZXJzLmZpbmQoJy5jb250ZXh0LW1lbnUtd3JhcHBlcicpXG4gICAgbWVudXMuZWFjaChmdW5jdGlvbiAoaSwgbSkgeyBtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJyB9KVxuICAgIC8vIGJvZHkuZmluZCgnLm1lbnUtd3JhcHBlcicpLmhpZGUoKVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQodHJ1ZSlcbiAgICBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwoKSAvLyBPbmx5IDEgbWVudSBjYW4gYmUgb3Blbi5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudD8uY3VycmVudFRhcmdldFxuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0XG4gICAgaWYgKCF0YXJnZXQpIHJldHVyblxuICAgIGNvbnN0IG1lbnVOYW1lID0gdGFyZ2V0LmRhdGFzZXQ/LmNvbnRleHRNZW51XG4gICAgaWYgKG1lbnVOYW1lID09PSB0aGlzLl9tZW51LmlkKSB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5tZW51XG4gICAgICBpZiAod3JhcHBlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHN1Yk1lbnUgPSB3cmFwcGVyLmZpbmQoJy5zdWItbWVudScpXG4gICAgICAgIGxldCBsZWZ0ID0gZXZlbnQuY2xpZW50WFxuICAgICAgICBsZXQgdG9wID0gZXZlbnQuY2xpZW50WVxuICAgICAgICBjb25zdCBtZW51SGVpZ2h0ID0gd3JhcHBlci5vdXRlckhlaWdodCgpXG4gICAgICAgIGNvbnN0IG1lbnVXaWR0aCA9IHdyYXBwZXIub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBtZW51SGVpZ2h0ICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gbWVudUhlaWdodFxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQpIHtcbiAgICAgICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSBtZW51V2lkdGhcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3ViTWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgbWVudVdpZHRoICsgbGVmdCArIHN1Yk1lbnUub3V0ZXJXaWR0aCgpKSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIHJpZ2h0OiBgJHttZW51V2lkdGggLSA1fXB4YCxcbiAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Yk1lbnUuY3NzKHtcbiAgICAgICAgICAgICAgbGVmdDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIHJpZ2h0OiAnJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlci5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGAke2xlZnR9cHhgLFxuICAgICAgICAgIHRvcDogYCR7dG9wfXB4YCxcbiAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY2FuU2VlICh2aXNpYmlsaXR5KSB7XG4gICAgc3dpdGNoICh2aXNpYmlsaXR5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2dtJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gICAgICBjYXNlICd0cnVzdGVkJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc1RydXN0ZWRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIENyZWF0ZU1lbnUgKG1lbnUpIHtcbiAgICBjb25zdCBjbGFzc2VzID0gdHlwZW9mIG1lbnUuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbbWVudS5jbGFzc2VzXSA6IG1lbnUuY2xhc3Nlc1xuICAgIGNsYXNzZXMucHVzaCgnY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCc8ZGl2PjwvZGl2PicpXG4gICAgd3JhcHBlci5hZGRDbGFzcyhtZW51LmlkKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHdyYXBwZXIuYWRkQ2xhc3MoYykpXG4gICAgaWYgKG1lbnUuc2VjdGlvbikge1xuICAgICAgbWVudS5zZWN0aW9uLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihzLCB7IG11bHRpOiB0cnVlIH0pXG4gICAgICAgIGlmIChzZWN0aW9uKSB3cmFwcGVyLmFwcGVuZChzZWN0aW9uKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVTZWN0aW9uKG1lbnUpXG4gICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICB9XG4gICAgcmV0dXJuIHdyYXBwZXJcbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVTZWN0aW9uIChzLCB7IG11bHRpID0gZmFsc2UsIHN1Yk1lbnUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIXMuaXRlbXMpIHJldHVybiBudWxsXG4gICAgaWYgKHMudmlzaWJpbGl0eSAmJiAhQ29DN0NvbnRleHRNZW51LmNhblNlZShzLnZpc2liaWxpdHkpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNsYXNzZXMgPSBzLmNsYXNzZXMgPyB0eXBlb2Ygcy5jbGFzc2VzID09PSAnc3RyaW5nJyA/IFtzLmNsYXNzZXNdIDogcy5jbGFzc2VzIDogW11cbiAgICBpZiAobXVsdGkpIGNsYXNzZXMucHVzaCgnbWVudS1zZWN0aW9uJylcbiAgICBpZiAoc3ViTWVudSkgY2xhc3Nlcy5wdXNoKCdzdWItbWVudScpXG4gICAgY29uc3Qgc2VjdGlvbiA9ICQoJzx1bD48L3VsPicpXG4gICAgY2xhc3Nlcy5mb3JFYWNoKGMgPT4gc2VjdGlvbi5hZGRDbGFzcyhjKSlcbiAgICBzLml0ZW1zLmZvckVhY2goaSA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoJzxsaT48L2xpPicpXG4gICAgICBsaS5hZGRDbGFzcygnbWVudS1pdGVtJylcbiAgICAgIGlmIChpLmFjdGlvbikge1xuICAgICAgICBsaS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICBsaS5hdHRyKCdkYXRhLWFjdGlvbicsIGkuYWN0aW9uKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpLmxhYmVsID09PSAnc3RyaW5nJykgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWx9PC9zcGFuPmApXG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGkubGFiZWwuaWNvbikgbGkuYXBwZW5kKGA8aSBjbGFzcz1cIiR7aS5sYWJlbC5pY29ufVwiPjwvaT5gKVxuICAgICAgICBpZiAoaS5sYWJlbC50ZXh0KSBsaS5hcHBlbmQoYDxzcGFuPiR7aS5sYWJlbC50ZXh0fTwvc3Bhbj5gKVxuICAgICAgfVxuICAgICAgaWYgKGkuc3ViTWVudSkge1xuICAgICAgICBsaS5hZGRDbGFzcygnc3ViLW1lbnUtYnV0dG9uJylcbiAgICAgICAgbGkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jYXJldC1yaWdodFwiPjwvaT4nKVxuICAgICAgICBjb25zdCBzdWIgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihpLnN1Yk1lbnUsIHsgc3ViTWVudTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc3ViKSBsaS5hcHBlbmQoc3ViKVxuICAgICAgfVxuICAgICAgc2VjdGlvbi5hcHBlbmQobGkpXG4gICAgfSlcbiAgICByZXR1cm4gc2VjdGlvblxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi8uLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG5cbiAgICBzaGVldERhdGEuY2FuRHJhZ1Rva2VuID0gISF0aGlzLnRva2VuICYmIGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmxpbmtlZEFjdG9yID0gdGhpcy5hY3Rvci5wcm90b3R5cGVUb2tlbj8uYWN0b3JMaW5rID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzVG9rZW4gPSB0aGlzLmFjdG9yLmlzVG9rZW5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIHNoZWV0RGF0YS5za2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS53ZWFwb25zID0ge31cbiAgICBzaGVldERhdGEucmFuZ2VXcG4gPSBbXVxuICAgIHNoZWV0RGF0YS5tZWxlZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPVxuICAgICAgdGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJ1xuICAgICAgICA/IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuICAgICAgICA6IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuXG4gICAgc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkID0gIWdhbWUudXNlci5pc0dNICYmICh0aGlzLmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHRoaXMuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ3ZlaGljbGUnKSB7XG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuU1RSJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5DT04nLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TSVonLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuREVYJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLklOVCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG93OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlBPVycsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMgPSB7XG4gICAgICAgICAgaHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ0hpdCBwb2ludHMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbXA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ01hZ2ljIHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHsgdmFsdWU6IG51bGwsIHNob3J0OiAnTENLJywgbGFiZWw6ICdMdWNrJyB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IDk5LFxuICAgICAgICAgICAgc2hvcnQ6ICdTQU4nLFxuICAgICAgICAgICAgbGFiZWw6ICdTYW5pdHknLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnTU9WJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTW92ZW1lbnQgcmF0ZScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0RCJyxcbiAgICAgICAgICAgIGxhYmVsOiAnRGFtYWdlIGJvbnVzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQkxEJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQnVpbGQnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJtb3I6IHsgdmFsdWU6IG51bGwsIGF1dG86IGZhbHNlIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IHtcbiAgICAgICAgICBwZXJzb25hbERlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCB2YWx1ZTogJycgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcyA9IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgICAgICBhZ2U6ICcnLFxuICAgICAgICAgIHNleDogJycsXG4gICAgICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGU6ICcnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbjogJycsXG4gICAgICAgICAgcGxheWVybmFtZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MgPSB7IGxvY2tlZDogdHJ1ZSwgbWFudWFsQ3JlZGl0OiBmYWxzZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0ID0ge1xuICAgICAgICAgIG1vbmV0YXJ5U3ltYm9sOiBudWxsLFxuICAgICAgICAgIG11bHRpcGxpZXI6IG51bGwsXG4gICAgICAgICAgc3BlbnQ6IG51bGwsXG4gICAgICAgICAgYXNzZXRzRGV0YWlsczogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCA9IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IFtdXG5cbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUFyY2hldHlwZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJylcbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZU9yZ2FuaXphdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcbiAgICAgIClcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgc2hlZXREYXRhLmlzRHlpbmcgPSB0aGlzLmFjdG9yLmR5aW5nXG5cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoaXRlbS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHJpbmcoNSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGl0ZW0uc3lzdGVtLnZhbHVlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZVNraWxsRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uc3lzdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGBbQ09DN10gKEFjdG9yOiR7dGhpcy5uYW1lfSkgRXZhbHVhdGluZyBza2lsbCAke2l0ZW0ubmFtZX06JHtpdGVtLnN5c3RlbS52YWx1ZX0gdG8gJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgY29uc3QgeyBiYXNlLCByYXdWYWx1ZSwgdmFsdWUgfSA9IHNraWxsLnN5c3RlbVxuXG4gICAgICAgICAgICAvLyBBc3N1bWUgZmFsbGJhY2sgdmFsdWVzLCB1c2VmdWwgZm9yIGluaXRpYWwgc2V0dXAgb2Ygc2tpbGxzXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHJhd1ZhbHVlIHx8IHZhbHVlIHx8IGJhc2VcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gdmFsdWUgfHwgYmFzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYmFzZSA9IGF3YWl0IHNraWxsLmFzeW5jQmFzZSgpXG5cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBwYXJ0IG9mIG1pZ3JhdGlvbiBvciBkb25lIGF0IGluaXQgIVxuICAgICAgICAgICAgICAvLyBXYXMgZG9uZSB3aGVuIHNraWxsIHZhbHVlIHdhcyBjaGFuZ2VkIHRvIGJhc2UgKyBhZGp1c3RlbWVudFxuICAgICAgICAgICAgICBjb25zdCBleHAgPSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRFeHAgPSBleHAgKyBwYXJzZUludChpdGVtLnN5c3RlbS52YWx1ZSkgLSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxuICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgICAgICAgYFtDT0M3XSBVcGRhdGluZyBza2lsbCAke3NraWxsLm5hbWV9IGV4cGVyaWVuY2UuIEV4cGVyaWVuY2UgbWlzc2luZzogJHt1cGRhdGVkRXhwfWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiB1cGRhdGVkRXhwLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgIGlmICghaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMpIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0ge31cbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHVwZGF0ZWRFeHBcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHNraWxsLnZhbHVlIC8vIEFDVElWRV9FRkZFQ1QgbmVjZXNzYXJ5IHRvIGFwcGx5IGVmZmVjdHNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gc2tpbGwudmFsdWUgLy8gQUNUSVZFX0VGRkVDVCBuZWNlc3NhcnkgdG8gYXBwbHkgZWZmZWN0c1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHNraWxsLnJhd1ZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpc3QgPSBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXVxuICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICBsaXN0ID0gW11cbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IGxpc3RcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnB1c2goaXRlbSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cblxuICAgICAgLy8gcmVkb25kYW50IGF2ZWMgbWF0cmljZSBpdGVtYnl0eXBlXG4gICAgICBzaGVldERhdGEuc2tpbGxzID0gc2hlZXREYXRhLml0ZW1zXG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgIC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgICAgc2hlZXREYXRhLm1lbGVlU2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPT09IHRydWVcbiAgICAgIClcbiAgICAgIHNoZWV0RGF0YS5yYW5nZVNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPT09IHRydWVcbiAgICAgIClcblxuICAgICAgY29uc3QgY2J0U2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+IHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgaWYgKGNidFNraWxscykge1xuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGNidFNraWxscykge1xuICAgICAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbc2tpbGwuX2lkXSA9IHNraWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2VhcG9ucyA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS53ZWFwb25cblxuICAgICAgaWYgKHdlYXBvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB3ZWFwb24gb2Ygd2VhcG9ucykge1xuICAgICAgICAgIHdlYXBvbi51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlXG4gICAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLmFtbW8pIHdlYXBvbi5zeXN0ZW0uYW1tbyA9IDBcblxuICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IHRydWVcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IDA7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSAwO1xuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogc2kgbCdJRCBuJ2VzdHMgcGFzIGTDqWZpbmllIG1haXMgcXUndW4gbm9tIGEgw6l0w6kgZG9ubsOpLCB1dGlsaXNlciBjZSBub20gZXQgdGFudGVyIGRlIHJldHJvdXZlciBsZSBza2lsbFxuICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyA6IGF2YW50IGQnYXNzaWdlciBsZSBza2lsbCB2w6lyaWZpZXIgcXUnaWwgZXhpc3RlIHRvdWpvdXJzLlxuICAgICAgICAgICAgLy8gc2kgaWwgbidleGlzdGUgcGx1cyBpbCBmYXV0IGxlIHJldHJvdXZlciBvdSBwYXNzZXIgc2tpbGxzZXQgYSBmYWxzZS5cbiAgICAgICAgICAgIGlmIChzaGVldERhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZF0pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSBza2lsbC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzaGVldERhdGEud2VhcG9uc1t3ZWFwb24uX2lkXSA9IHdlYXBvblxuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkgc2hlZXREYXRhLnJhbmdlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICAgIGVsc2Ugc2hlZXREYXRhLm1lbGVlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy50b2tlblxuICAgICAgc2hlZXREYXRhLnRva2VuSWQgPSB0b2tlblxuICAgICAgICA/IGAke3Rva2VuLnBhcmVudD8uaWQgPyB0b2tlbi5wYXJlbnQuaWQgOiAnVE9LRU4nfS4ke3Rva2VuLmlkfWBcbiAgICAgICAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gZmFsc2VcbiAgICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hhcmFjdGVyaXN0aWMgb2YgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUpIGNoYXJhY3RlcmlzdGljLmVkaXRhYmxlID0gdHJ1ZVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhcmQgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gMilcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDUpXG5cbiAgICAgICAgICAvLyBJZiBubyB2YWx1ZSAmJiBubyBmb3JtdWxhIGRvbid0IGRpc3BsYXkgY2hhcmFjLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgIWNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIGFueSBjaGFyYWN0ZXJpc3RpYyBoYXMgbm8gdmFsdWUgYnV0IGhhcyBhIGZvcm11bGEuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiBjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9XG4gICAgICAgICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIHx8XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvciBjb21wYXQgd2l0aCBwcmV2aW91cyBjaGFyYWN0ZXJzIHRlc3QgaWYgYXV0byBpcyBkZWZpbmllZCwgaWYgbm90IHdlIGRlZmluZSBpdFxuICAgIGlmICghWyd2ZWhpY2xlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKHRoaXMuYWN0b3IudHlwZSkpIHtcbiAgICAgIGNvbnN0IGF1dG8gPSB0aGlzLmFjdG9yLmNoZWNrVW5kZWZpbmVkQXV0bygpXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbSwgYXV0bylcbiAgICB9IGVsc2Uge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuaHAuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmRiLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuYnVpbGQuYXV0byA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSBudWxsXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA8IDApIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IG51bGxcblxuICAgIGlmICghWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5hY3Rvci50eXBlKSkge1xuICAgICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkgaW5zdGFuY2VvZiBBcnJheSAmJiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5Lmxlbmd0aCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5WzBdLmlzRmlyc3QgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9IGZhbHNlXG5cbiAgICBzaGVldERhdGEuaGFzQ29uZGl0aW9ucyA9XG4gICAgICB0aGlzLmFjdG9yLmVmZmVjdHMuc2l6ZSA+IDAgfHxcbiAgICAgICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucykuZmlsdGVyKFxuICAgICAgICAgIGNvbmRpdGlvbiA9PiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWVcbiAgICAgICAgKS5sZW5ndGggPiAwKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLy8gc3RhdGljIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xuICAvLyAgIGxldCBwYXJzZWRGb3JtdWxhID0gZm9ybXVsYVxuICAvLyAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAvLyAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAvLyAgIH1cbiAgLy8gICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICAvLyB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdiYXNlLmpzIGdldCB0b2tlbktleSgpOiBERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXG4gICAgLy8gaWYoIHRoaXMudG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmRhdGEuX2lkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8vIHJldHVybiB0aGlzLmFjdG9yLmlkO1xuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICAvLyB0aGlzLmFjdG9yLmxvY2tlZCA9IHRydWU7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuc2VjdGlvbi1oZWFkZXInKS5jbGljayh0aGlzLl9vblNlY3Rpb25IZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtcy1oZWFkZXInKS5jbGljayh0aGlzLl9vbkl0ZW1IZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZWFkLW9ubHknKS5kYmxjbGljayh0aGlzLl90b2dnbGVSZWFkT25seS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmFkZC1hbW1vJykuY2xpY2sodGhpcy5fb25BZGRBbW8uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZWxvYWQtd2VhcG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5vbignY29udGV4dG1lbnUnLCBldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG5cbiAgICAvLyBPd25lciBPbmx5IExpc3RlbmVyc1xuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIgJiYgISh0aGlzLmFjdG9yLmNvbXBlbmRpdW0/LmxvY2tlZCA/PyBmYWxzZSkpIHtcbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mbGFnJykuY2xpY2sodGhpcy5fb25GbGFnQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZm9ybXVsYScpLmNsaWNrKHRoaXMuX29uRm9ybXVsYUNsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmF1dG8tdG9nZ2xlJykuY2xpY2sodGhpcy5fb25BdXRvVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgLy8gT3duZXIgT25seSwgbm90IGF2YWlsYWJsZSBmcm9tIGNvbXBlbmRpdW1cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyICYmIHR5cGVvZiB0aGlzLmFjdG9yLmNvbXBlbmRpdW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1lbnVzKSB0aGlzLm1lbnVzID0gW11cblxuICAgICAgICBjb25zdCByb2xsTWVudSA9IHtcbiAgICAgICAgICBpZDogJ3NraWxsLXJvbGwnLFxuICAgICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICAgIHNlY3Rpb246IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2dtJyxcbiAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogeyBpY29uOiAnZmFzIGZhLWxpbmsnLCB0ZXh0OiAnTGluaycgfSxcbiAgICAgICAgICAgICAgICAgIHN1Yk1lbnU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstdG9vbCcsIGxhYmVsOiAnT3BlbiBpbiBsaW5rIHRvb2wnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2FuTWVudSA9IHtcbiAgICAgICAgICBpZDogJ3Nhbi1yb2xsJyxcbiAgICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2VuY291bnRlcicsIGxhYmVsOiAnRW5jb3VudGVyJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3RydXN0ZWQnLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncmVxdWVzdC1yb2xsJywgbGFiZWw6ICdSZXF1ZXN0IHJvbGwnIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6IHsgaWNvbjogJ2ZhcyBmYS1saW5rJywgdGV4dDogJ0xpbmsnIH0sXG4gICAgICAgICAgICAgICAgICBzdWJNZW51OiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2VuZC1jaGF0JywgbGFiZWw6ICdTZW5kIHRvIGNoYXQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay1lbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm9sbENvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICAgIHJvbGxDb250ZXh0TWVudS5iaW5kKHJvbGxNZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgICAgdGhpcy5tZW51cy5wdXNoKHJvbGxDb250ZXh0TWVudSlcblxuICAgICAgICBjb25zdCBzYW5Db250ZXh0TWVudSA9IG5ldyBDb0M3Q29udGV4dE1lbnUoKVxuICAgICAgICBzYW5Db250ZXh0TWVudS5iaW5kKHNhbk1lbnUsIGh0bWwsIHRoaXMuX29uQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgICB0aGlzLm1lbnVzLnB1c2goc2FuQ29udGV4dE1lbnUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZScpXG4gICAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgfVxuXG4gICAgICAvLyBjb250ZXh0IG1lbnUgYmluZFxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1pbWFnZScpLmNsaWNrKHRoaXMuX29uUm9sbFNraWxsVGVzdC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxBdHRyaWJUZXN0LmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy50b2tlbi1kcmFnLWhhbmRsZScpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25EcmFnVG9rZW5TdGFydC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0NoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0F0dHJpYnV0ZShldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2FuLWNoZWNrJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdTYW5DaGVjayhldmVudCkpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yb2xsLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdmVyYWdlLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuXG4gICAgICAvLyBTdGF0dXMgbW9uaXRvclxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNIHx8IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJykpIHtcbiAgICAgICAgaHRtbC5maW5kKCcucmVzZXQtY291bnRlcicpLmNsaWNrKHRoaXMuX29uUmVzZXRDb3VudGVyLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLmNvbmRpdGlvbi1tb25pdG9yJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Db25kaXRpb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZHlpbmcnKS5jbGljayh0aGlzLmhlYWwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZGVhZCcpLmNsaWNrKHRoaXMucmV2aXZlLmJpbmQodGhpcykpXG4gICAgICB9XG5cbiAgICAgIGh0bWwuZmluZCgnLmR5aW5nLWNoZWNrJykuY2xpY2sodGhpcy5jaGVja0ZvckRlYXRoLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0taW1hZ2UnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1Sb2xsKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbldlYXBvblJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkVmZmVjdChldmVudCkpXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgIC8vICAgLmtleWRvd24oKGV2ZW50KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIC8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgncG9pbnRlcicpXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9KVxuICAgICAgLy8gaHRtbFxuICAgICAgLy8gICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAvLyAgIC5rZXlkb3duKChldmVudCkgPT4ge1xuICAgICAgLy8gICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAvLyAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BvaW50ZXInKVxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tc2tpbGwucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Ta2lsbFJvbGwoZXZlbnQpKVxuICAgICAgaHRtbC5vbignY2xpY2snLCAnLndlYXBvbi1kYW1hZ2UnLCB0aGlzLl9vbldlYXBvbkRhbWFnZS5iaW5kKHRoaXMpKVxuXG4gICAgICBjb25zdCB3aGVlbElucHV0cyA9IGh0bWwuZmluZCgnLmF0dHJpYnV0ZS12YWx1ZScpXG4gICAgICBmb3IgKGNvbnN0IHdoZWVsSW5wdXQgb2Ygd2hlZWxJbnB1dHMpIHtcbiAgICAgICAgd2hlZWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGV2ZW50ID0+IHRoaXMuX29uV2hlZWwoZXZlbnQpLCB7XG4gICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tcG9wdXAnKS5jbGljayh0aGlzLl9vbkl0ZW1Qb3B1cC5iaW5kKHRoaXMpKVxuXG4gICAgLy8gVXBkYXRlIEludmVudG9yeSBJdGVtXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5kYmxjbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxuXG4gICAgLy8gRGVsZXRlIEludmVudG9yeSBJdGVtXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fVxuICAgICAgICAgICAgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5tZWxlZSkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1lbGVlID0gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucm5nZCkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnJuZ2QgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2LCBwcm9wZXJ0aWVzKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBodG1sLmZpbmQoJy5jbGVhbi1za2lsbC1saXN0JykuY2xpY2soKCkgPT4ge1xuICAgIC8vICAgdGhpcy5hY3Rvci5jbGVhblNraWxscygpXG4gICAgLy8gfSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLW5ldy1zZWN0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5jcmVhdGVCaW9TZWN0aW9uKClcbiAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNlY3Rpb24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IuZGVsZXRlQmlvU2VjdGlvbihpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLXVwJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uVXAoaW5kZXgpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm1vdmUtc2VjdGlvbi1kb3duJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uRG93bihpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZGV2ZWxvcG1lbnQtZmxhZycpLmRibGNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5vY2N1cGF0aW9uLXNraWxsLWZsYWcuY2xpY2thYmxlJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hcmNoZXR5cGUtc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtZGV2ZWxvcGVtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5kZXZlbG9wZW1lbnRQaGFzZShldmVudC5zaGlmdEtleSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubHVjay1kZXZlbG9wbWVudCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGlmICghZXZlbnQuZGV0YWlsIHx8IGV2ZW50LmRldGFpbCA9PT0gMSkge1xuICAgICAgICB0aGlzLmFjdG9yLmRldmVsb3BMdWNrKGV2ZW50LnNoaWZ0S2V5KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5jbGVhcl9jb25kaXRpb25zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBkaXNhYmxlID0ge31cbiAgICAgICAgZm9yIChjb25zdCBjb25kaXRpb24gaW4gdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgIT09XG4gICAgICAgICAgICAgICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgPT09IHRydWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRpc2FibGVbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9ufS52YWx1ZWBdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRpc2FibGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZShkaXNhYmxlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5hY3Rvci5lZmZlY3RzLm1hcChlZmZlY3QgPT4gZWZmZWN0LmlkKVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgZm9yIGRldiBwdXJwb3NlcyBvbmx5ICFcbiAgICAgKi9cbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKSkgcmV0dXJuIG51bGxcbiAgICAgIC8vIGF3YWl0IEl0ZW0uY3JlYXRlKHtcbiAgICAgIC8vICAgbmFtZTogJ19fQ29DN0ludGVybmFsSXRlbV9fJyxcbiAgICAgIC8vICAgdHlwZTogJ2l0ZW0nXG4gICAgICAvLyB9KVxuICAgICAgLy8gY29uc3QgZWZmZWN0cyA9IGF3YWl0IGl0ZW0uY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAvLyAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAvLyAgICAgb3JpZ2luOiBudWxsLFxuICAgICAgLy8gICAgICdkdXJhdGlvbi5yb3VuZHMnOiB1bmRlZmluZWQsXG4gICAgICAvLyAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gXSlcbiAgICAgIC8vIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbMF1cbiAgICAgIC8vIGF3YWl0IGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdlZmZlY3QgY3JlYXRlZCAhJylcbiAgICB9KVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcFNraWxsRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXR0cmlidXRlRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXV0by10b2dnbGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXV0b0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tY29udHJvbC5kZXZlbG9wbWVudC1mbGFnJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG5cbiAgICAvLyBBY3RpdmUgRWZmZWN0c1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuYWN0b3IpKVxuICB9XG5cbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuYWN0b3JzLmRvY3VtZW50Q2xhc3MudG9vbFRpcFNraWxsVGV4dCgpXG4gICAgICAgIGlmICh0b29sVGlwICE9PSBmYWxzZSkge1xuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoYXIgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLmNoYXItYm94JylcbiAgICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICd1bmRlZmluZWQnICYmICEhY2hhcikge1xuICAgICAgICAgICAgY29uc3QgY2hhcklkID0gY2hhci5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHNoZWV0LmFjdG9yLmNoYXJhY3RlcmlzdGljc1tjaGFySWRdXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICBza2lsbDogY2hhcmFjdGVyaXN0aWMubGFiZWwsXG4gICAgICAgICAgICAgIHJlZ3VsYXI6IGNoYXJhY3RlcmlzdGljLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgIGhhcmQ6IGNoYXJhY3RlcmlzdGljLmhhcmQgPz8gMCxcbiAgICAgICAgICAgICAgZXh0cmVtZTogY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA/PyAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF0dHJpYnV0ZUVudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuYXR0cmlidXRlJylcbiAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUlkID0gYXR0cmliLmRhdGFzZXQuYXR0cmliXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9ICcnXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2hlZXQuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbYXR0cmlidXRlSWRdXG4gICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZUlkKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2xjayc6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6IGF0dHJpYnV0ZXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gMiksXG4gICAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gNSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnZGInOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcERCJylcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNhbml0eScsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBLZWVwZXJTYW5pdHknKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBBdXRvRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEF1dG9Ub2dnbGUnKVxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ1RvZ2dsZScsIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudFxuICAgICAgICAgICAgICAgICAgPyAnQ29DNy5Ub29sVGlwU2tpbGxGbGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgOiAnQ29DNy5Ub29sVGlwU2tpbGxVbmZsYWdnZWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnVDbGljayAoZXZlbnQsIHRhcmdldCkge1xuICAgIGNvbnN0IHRhcmdldFR5cGUgPSB0YXJnZXQuZGF0YXNldD8udGFyZ2V0VHlwZVxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xuICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBzd2l0Y2ggKHRhcmdldFR5cGUpIHtcbiAgICAgIGNhc2UgKCdza2lsbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgcm9sbE9wdGlvbnMuc2tpbGxJZCA9IHRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NoYXJhY3RlcmlzdGljJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICByb2xsT3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9IHRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgKCdhdHRyaWJ1dGUnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICByb2xsT3B0aW9ucy5hdHRyaWJ1dGUgPSB0YXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAoJ3JvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ29wcG9zZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NvbWJpbmVkLXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgncmVxdWVzdC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICAgICAgcm9sbE9wdGlvbnMucHJldmVudFN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstdG9vbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29weS10by1jbGlwYm9hcmQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstZW5jb3VudGVyJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdlbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmZhc3RGb3J3YXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgX29uUmVuZGVySXRlbVNoZWV0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBjb25maXJtOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ2NvbmZpcm0nLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIHN1cGVyLl9vbkRyYWdTdGFydChldmVudClcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBkcmFnRGF0YS50b2tlblV1aWQgPSB0aGlzLnRva2VuLnV1aWRcbiAgICAgIGRyYWdEYXRhLnRva2VuSWQgPSB0aGlzLnRva2VuLmlkXG4gICAgICBkcmFnRGF0YS5zY2VuZUlkID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ0F0dHJpYnV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnYXR0cmlidXRlJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ0NvQzdMaW5rJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5hdHRyaWIsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2FuTWluID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLnBhc3MnKVxuICAgIGNvbnN0IHNhbk1heCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5mYWlsZWQnKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBzYW5NaW46IHNhbk1pbi5pbm5lclRleHQsXG4gICAgICBzYW5NYXg6IHNhbk1heC5pbm5lclRleHQsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgaWYgKGRhdGFTdHJpbmcgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS50eXBlID09PSAnQ29DN0xpbmsnKSB7XG4gICAgICBpZiAoZGF0YS5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodGhpcy5hY3RvciwgZGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNvbmRpdGlvblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlQ29uZGl0aW9uKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2aXZlICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGFzeW5jIGhlYWwgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbktleSA6IHRoaXMuYWN0b3IuaWRcbiAgICApXG4gICAgY29uQ2hlY2suc3RheUFsaXZlID0gdHJ1ZVxuICAgIGNvbkNoZWNrLnRvTWVzc2FnZShldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyYWdUb2tlblN0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiAnVG9rZW4nLFxuICAgICAgdXVpZDogdGhpcy50b2tlbi51dWlkXG4gICAgfVxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q291bnRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgfVxuXG4gIGFzeW5jIF9vbkF1dG9Ub2dnbGUgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpKSB7XG4gICAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYlxuICAgICAgdGhpcy5hY3Rvci50b2dnbGVBdHRyaWJBdXRvKGF0dHJpYilcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICApXG4gICAgaWYgKHdlYXBvbikge1xuICAgICAgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHksXG4gICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvLyByb2xsIHRoZSBhY3RvciBjaGFyYWN0ZXJpc3RpYyBmcm9tIGZvcm11bGEgd2hlbiBwb3NzaWJsZS5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcbiAgICB0aGlzLmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gICAgSG9va3MuY2FsbCgnYWN0b3JMb2NrQ2xpY2tlZENvQzcnLCBbIWlzTG9ja2VkXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZsYWdDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmbGFnTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoZmxhZ05hbWUpXG4gIH1cblxuICBhc3luYyBfb25Gb3JtdWxhQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgfVxuXG4gIGFzeW5jIF9vbldoZWVsIChldmVudCkge1xuICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHx8IG51bGxcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSAtIDFcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArIDFcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4odmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEx1Y2sodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlUmVhZE9ubHkgKGV2ZW50KSB7XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5yZWFkT25seSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdyZWFkLW9ubHknKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4ge1xuICAgICAgICBzdW1tYXJ5LnJlbW92ZSgpXG4gICAgICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwLCAoKSA9PiBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIGFzeW5jIF9vblNlY3Rpb25IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGxldCBzZWN0aW9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdzZWN0aW9uJyksXG4gICAgLy8gIHBhbm5lbENsYXNzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCdwYW5uZWwnKSxcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3NlY3Rpb24nKVxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxuICAgIGlmICh0eXBlb2YgcGFubmVsQ2xhc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cbiAgICBjb25zdCBwYW5uZWwgPSAkKHNlY3Rpb24pLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuXG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGlmIChwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIC8vIENvdWxkIHJlbW92ZSBleHBhbmRlZCBjbGFzcyBhbmQgdXNlIChwYW5uZWwuaXMoJzp2aXNpYmxlJykpXG4gICAgICBwYW5uZWwuc2xpZGVVcCgyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG5cbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGBkYXRhLnBhbm5lbC4ke3Bhbm5lbENsYXNzfS5leHBhbmRlZGApXG5cbiAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgIHsgW2NhbWVsRmxhZ106ICFwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykgfSxcbiAgICAgIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJylcbiAgICBpZiAobGkuaXMoJzp2aXNpYmxlJykpIGxpLnNsaWRlVXAoMjAwKVxuICAgIGVsc2UgbGkuc2xpZGVEb3duKDIwMClcbiAgfVxuXG4gIF9vbkl0ZW1IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5uZXh0KCdvbCcpXG4gICAgaWYgKG9sLmlzKCc6dmlzaWJsZScpKSBvbC5zbGlkZVVwKDIwMClcbiAgICBlbHNlIG9sLnNsaWRlRG93bigyMDApXG4gIH1cblxuICBhc3luYyBfb25JdGVtUG9wdXAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcblxuICAgIENvQzdBY3RvclNoZWV0LnBvcHVwU2tpbGwoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1cFNraWxsIChza2lsbCkge1xuICAgIHNraWxsLnN5c3RlbS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2tpbGwuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgeyBhc3luYzogdHJ1ZSB9XG4gICAgKVxuICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxEZXRhaWxzV2luZG93JyksXG4gICAgICAgIGNvbnRlbnQ6IHNraWxsLFxuICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2tpbGwnXSxcbiAgICAgICAgd2lkdGg6IDUyMCxcbiAgICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICAgIHNjcm9sbFk6IFsnLml0ZW0tZGVzY3JpcHRpb24nXSxcbiAgICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtZGV0YWlscy5odG1sJ1xuICAgICAgfVxuICAgIClcbiAgICBkbGcucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgb2YgYW4gaXRlbSBmcm9tIHRoZSBBY3RvciBzaGVldCwgb2J0YWluaW5nIHRoZSBJdGVtIGluc3RhbmNlIGFuZCBkaXNwYXRjaGluZyB0byBpdCdzIHJvbGwgbWV0aG9kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25JdGVtUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkO1xuICAgIC8vIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQ7XG4gICAgLy8gY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQ7XG4gICAgLy8gbGV0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpO1xuXG4gICAgLy8gY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXk7XG4gICAgLy8gY2hlY2suaXRlbSA9IGl0ZW1JZDtcbiAgICAvLyBjaGVjay5yb2xsKCk7XG4gICAgLy8gY2hlY2sudG9NZXNzYWdlKCk7XG4gIH1cblxuICBhc3luYyBfb25FZmZlY3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVmZmVjdElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuZWZmZWN0SWRcbiAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmFjdG9yLmVmZmVjdHMuZ2V0KGVmZmVjdElkKVxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKHsgdHlwZTogJ0NvQzdMaW5rJywgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULCBvYmplY3Q6IGVmZmVjdCB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvblJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gZXZlbnQuc2hpZnRLZXlcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgLy8gY29uc3QgYWN0b3JLZXkgPSAhdGhpcy50b2tlbj8gdGhpcy5hY3Rvci5hY3RvcktleSA6IGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgLy9SRUZBQ1RPUklORyAoMilcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqKiovXG4gICAgbGV0IGFjdG9yS2V5XG4gICAgaWYgKCF0aGlzLnRva2VuKSBhY3RvcktleSA9IHRoaXMuYWN0b3IuaWRcbiAgICAvLyBTaGVldCB3YXMgb3BlbmVkIGZyb20gYWN0b3IgZGlyZWN0b3J5XG4gICAgZWxzZSB7XG4gICAgICAvLyBPcGVuZWQgZnJvbSB0b2tlblxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbiAmJiBnYW1lLmFjdG9ycy50b2tlbnNbdGhpcy50b2tlbi5pZF0pIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgVE9LRU4uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdG9yS2V5ID0gYCR7dGhpcy50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy50b2tlbi5pZH1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBuYW1lOiB3ZWFwb24ubmFtZVxuICAgICAgfVxuICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFt0aGlzLmFjdG9yXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcHJvY2VlZFdpdGhvdXRUYXJnZXRcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplIDw9IDApIHtcbiAgICAgICAgcHJvY2VlZFdpdGhvdXRUYXJnZXQgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm9UYXJnZXRTZWxlY3RlZCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb24ubmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICAgIGNhbmNlbDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgICAgfVxuICAgICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDAgfHwgcHJvY2VlZFdpdGhvdXRUYXJnZXQpIHtcbiAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUmVsb2FkV2VhcG9uIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24ucmVsb2FkKClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gICAgfSBlbHNlIGlmIChldmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnNldEJ1bGxldHMoMClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLnNob290QnVsbGV0cygxKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEFtbyAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGF3YWl0IHdlYXBvbi5hZGRCdWxsZXQoKVxuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uU2tpbGxSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKClcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLml0ZW0gPSBpdGVtSWRcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgLy8gSEFDSzoganVzdCB0byBwb3AgdGhlIGFkdmFuY2VkIHJvbGwgd2luZG93XG4gICAgLy8gY2hlY2suaXRlbS5yb2xsKCk7XG4gIH1cblxuICBhc3luYyBfb25XZWFwb25EYW1hZ2UgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgcmFuZ2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tZGFtYWdlJykuZGF0YXNldC5yYW5nZVxuICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgcmFuZ2VcbiAgICB9KVxuICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGl0ZW1JZFxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAvLyBjb25zb2xlLmxvZyggJ1dlYXBvbiBkYW1hZ2UgQ2xpY2tlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uT3Bwb3NlZFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJykgcmV0dXJuXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgZXZlbnQsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgIH1cblxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgIGRhdGEuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBhIFNraWxsIGNoZWNrXG4gICAqIEAgIHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBjaGFyYWN0ZXJpc3RpYzogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEF0dHJpYlRlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGSUVSXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgIGlmIChhdHRyaWIgPT09ICdkYicpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIS9eLXswLDF9XFxkKyQvLnRlc3QoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmICghaXNOYU4oci50b3RhbCkgJiYgIShyLnRvdGFsID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNEYW1hZ2VSb2xsJylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXG4gICAgICAgIGNhcmRUeXBlOlxuICAgICAgICBldmVudC5hbHRLZXkgJiYgYXR0cmliID09PSAnc2FuJ1xuICAgICAgICAgID8gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgICAgICA6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJvbGxTa2lsbFRlc3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgc2tpbGxJZDogZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XG5cbiAgLy8gIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gIC8vICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwge2VkaXRvcnM6IHRoaXMuZWRpdG9yc30pO1xuICAvLyAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpO1xuICAvLyAgaWYgKCB1cGRhdGVEYXRhICkgZGF0YSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICBlbHNlIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKTtcblxuICAvLyAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxuICAvLyAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XG4gIC8vICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcblxuICAvLyAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gIC8vICByZXR1cm4gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGRhdGEpO1xuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdfdXBkYXRlT2JqZWN0Jyk7XG4gICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoICAgX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkgQ2YuIHNoZWV0LmpzKDI0MylcbiAgICBjb25zdCBvdmVycmlkZXMgPSBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QodGhpcy5hY3Rvci5vdmVycmlkZXMpXG4gICAgY29uc3QgbmFtZSA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5uYW1lXG4gICAgaWYgKG5hbWUgJiYgb3ZlcnJpZGVzICYmIG92ZXJyaWRlc1tuYW1lXSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVmZmVjdEFwcGxpZWRDYW50T3ZlcnJpZGUnLCB7IG5hbWUgfSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtYWRqdXN0bWVudCcpKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgPyBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogbnVsbFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3JlZGl0LXJhdGluZycpID09PSBpdGVtLm5hbWUgJiYgdHlwZW9mIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtPy5jcmVkaXRSYXRpbmc/Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxuICAgICAgICAgICAgICAgIChpdGVtLnZhbHVlIHx8IDApIC1cbiAgICAgICAgICAgICAgICAoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgfHwgMClcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlID5cbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXgpIHx8XG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DcmVkaXRPdXRPZlJhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBtaW46IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIFRPRE8gOiBjaGVjayB3aHkgU0FOIG9ubHkgP1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFNhbihcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVUZXh0QXJlYShldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi12YWx1ZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZUJpb1RpdGxlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCducGMtc2tpbGwtc2NvcmUnKSkge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLW5hbWUnKSB8fFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge31cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1mb3JtdWxhJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlIHNraWxsIGFzc29jacOpIGEgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tc2tpbGwnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uICYmIHNraWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xuICAgICAgICAgICAgICBjYXNlICdtYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdhbHRlcm5hdGl2JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlIG5vbSBkZSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnJhbmdlLm5vcm1hbCAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIC8vIHRlc3RlIGxhIHZhbGlkaXTDqSBkZSBsYSBmb3JtdWxlLlxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TlBDU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgc2hlZXREYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcbiAgICBzaGVldERhdGEuZGlzcGxheUZvcm11bGEgPSAodGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJykgfHwgZmFsc2UpXG5cbiAgICBzaGVldERhdGEuaGFzU2FuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXG4gICAgc2hlZXREYXRhLmhhc01wID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgIT09IG51bGxcbiAgICBzaGVldERhdGEuaGFzTHVjayA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkucGVyc29uYWxEZXNjcmlwdGlvbj8udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHNhbmxvc3NNZW51ID0ge1xuICAgICAgICBpZDogJ3Nhbi1sb3NzLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuXG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FubG9zc0NvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICBzYW5sb3NzQ29udGV4dE1lbnUuYmluZChzYW5sb3NzTWVudSwgaHRtbCwgdGhpcy5fb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgdGhpcy5tZW51cy5wdXNoKHNhbmxvc3NDb250ZXh0TWVudSlcbiAgICB9XG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXNhbicpLmNsaWNrKHRoaXMuX29uU2FuQ2hlY2suYmluZCh0aGlzKSlcbiAgICAvLyBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgLy8gICBodG1sXG4gICAgLy8gICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgLy8gICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgLy8gfVxuICB9XG5cbiAgYXN5bmMgX29uU2FuTG9zc0NvbnRleHRNZW51Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIsXG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGV2ZW50LFxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NsaXBib2FyZCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllclxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLm1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbkRhdGEgPSB7XG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL25wYy1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgbWluaW1pemFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1zY29yZScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSxcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGZvcmNlQXV0byAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5oZWlnaHQoJ2F1dG8nKVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnkgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vbnBjLXNoZWV0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0NyZWF0dXJlU2hlZXQgZXh0ZW5kcyBDb0M3TlBDU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IHRydWVcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUxvc3NUeXBlRGlhbG9nVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3Nhbml0eS1sb3NzLXR5cGUuaGJzJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBkYXRhLmlzSW1tdW5pdHkgPSBkYXRhLm9iamVjdC50eXBlID09PSAnaW1tdW5pdHknXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRpYWxvZy1idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uID09PSAnYWRkJykge1xuICAgICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICAgIGNvbnN0IHR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICAgIGNvbnN0IG5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaHRtbC5maW5kKCcuZmllbGRfdmFsdWUnKS52YWwoKSlcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPVxuICAgICAgICB0aGlzLm9iamVjdC5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgdG90YWxMb3NzOiB2YWx1ZSxcbiAgICAgICAgaW1tdW5pdHk6IHR5cGUgPT09ICdpbW11bml0eSdcbiAgICAgIH0pXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgfSlcbiAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnVwZGF0ZSh7ICdkYXRhLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzIH0pXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xuICAgIGNvbnN0IGh0bWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy53aW5kb3ctY29udGVudCcpXG4gICAgdGhpcy5vYmplY3QubmFtZSA9IGh0bWwuZmluZCgnLmZpZWxkX25hbWUnKS52YWwoKVxuICAgIHRoaXMub2JqZWN0LnR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7fVxufVxuIiwiLyogZ2xvYmFsICQsIEZvbnRGYWNlLCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcbmltcG9ydCB7IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFyYWN0ZXJTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdDb0M3Q2hhcmFjdGVyU2hlZXQnKSB7XG4gICAgICBpZiAoIXRoaXMuc3VtbWFyaXplZCkgdGhpcy5zdW1tYXJpemVkID0gZmFsc2VcbiAgICAgIGxldCBidXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgICAgYnV0dG9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiB0aGlzLnN1bW1hcml6ZWRcbiAgICAgICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1heGltaXplJylcbiAgICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1bW1hcml6ZScpLFxuICAgICAgICAgIGNsYXNzOiAndGVzdC1leHRyYS1pY29uJyxcbiAgICAgICAgICBpY29uOiB0aGlzLnN1bW1hcml6ZWRcbiAgICAgICAgICAgID8gJ2ZhcyBmYS13aW5kb3ctbWF4aW1pemUnXG4gICAgICAgICAgICA6ICdmYXMgZmEtd2luZG93LW1pbmltaXplJyxcbiAgICAgICAgICBvbmNsaWNrOiBldmVudCA9PiB0aGlzLnRvZ2dsZVNoZWV0TW9kZShldmVudClcbiAgICAgICAgfS8qICxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnJyxcbiAgICAgICAgICBjbGFzczogJ2RyYWctdGVzdC10aGluZ3knLFxuICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWQxMCcsXG4gICAgICAgICAgb25kcmFnc3RhcnQ6ICgpID0+IHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnZHJhZyBzdGFydGVkJylcbiAgICAgICAgfSAqL1xuICAgICAgXS5jb25jYXQoYnV0dG9ucylcbiAgICAgIHJldHVybiBidXR0b25zXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gIH1cblxuICBhc3luYyB0b2dnbGVTaGVldE1vZGUgKGV2ZW50KSB7XG4gICAgdGhpcy5zdW1tYXJpemVkID0gIXRoaXMuc3VtbWFyaXplZFxuICAgIGxldCBvcHRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoQ29DN0NoYXJhY3RlclNoZWV0LmRlZmF1bHRPcHRpb25zKVxuICAgIGlmICh0aGlzLnN1bW1hcml6ZWQpIHtcbiAgICAgIG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9wdGlvbnMsIHtcbiAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdG9yJywgJ2NoYXJhY3RlcicsICdzdW1tYXJpemVkJ10sXG4gICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICB3aWR0aDogNzAwXG4gICAgICB9KVxuICAgIH1cbiAgICBvcHRpb25zLnRva2VuID0gdGhpcy5vcHRpb25zLnRva2VuXG4gICAgYXdhaXQgdGhpcy5jbG9zZSgpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSwgb3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJykgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScsIGZhbHNlKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmlzRWRpdGFibGUgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicsIHRydWUpXG4gICAgfVxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RNb2RlVmFsdWUgPVxuICAgICAgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA/PyBmYWxzZVxuICAgIHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiA9XG4gICAgICB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKSA/PyB0cnVlXG4gICAgc2hlZXREYXRhLnNob3dJY29uc09ubHkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93SWNvbnNPbmx5JylcblxuICAgIGlmICh0aGlzLmFjdG9yLm9jY3VwYXRpb24pIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uLm5hbWVcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3Mub2NjdXBhdGlvblNldCA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy5hY3Rvci5hcmNoZXR5cGUpIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGUgPSB0aGlzLmFjdG9yLmFyY2hldHlwZS5uYW1lXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MuYXJjaGV0eXBlU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MuYXJjaGV0eXBlU2V0ID0gZmFsc2VcblxuICAgIHNoZWV0RGF0YS50b3RhbEV4cGVyaWVuY2UgPSB0aGlzLmFjdG9yLmV4cGVyaWVuY2VQb2ludHNcbiAgICBzaGVldERhdGEudG90YWxPY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZE9jY3VwYXRpb25Qb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvblBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnN5c3RlbS5kZXZlbG9wbWVudD8ub2NjdXBhdGlvbilcbiAgICBzaGVldERhdGEudG90YWxBcmNoZXR5cGUgPSB0aGlzLmFjdG9yLmFyY2hldHlwZVBvaW50c1NwZW50XG4gICAgc2hlZXREYXRhLmludmFsaWRBcmNoZXR5cGVQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5hcmNoZXR5cGUpXG4gICAgc2hlZXREYXRhLnRvdGFsUGVyc29uYWwgPSB0aGlzLmFjdG9yLnBlcnNvbmFsUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZFBlcnNvbmFsUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnBlcnNvbmFsUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5wZXJzb25hbClcbiAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4ID0gTnVtYmVyKFxuICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heFxuICAgIClcbiAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWluID0gTnVtYmVyKFxuICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pblxuICAgIClcbiAgICBzaGVldERhdGEuaW52YWxpZENyZWRpdFJhdGluZyA9XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPlxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01heCB8fFxuICAgICAgdGhpcy5hY3Rvci5jcmVkaXRSYXRpbmdTa2lsbD8uc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uIDxcbiAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNaW5cbiAgICBzaGVldERhdGEucHVscFRhbGVudENvdW50ID0gc2hlZXREYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA/IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxuICAgICAgOiAwXG4gICAgc2hlZXREYXRhLm1pblB1bHBUYWxlbnRzID0gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LnN5c3RlbS50YWxlbnRzXG4gICAgICA/IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5zeXN0ZW0udGFsZW50c1xuICAgICAgOiAwXG4gICAgc2hlZXREYXRhLmludmFsaWRQdWxwVGFsZW50cyA9IHNoZWV0RGF0YS5wdWxwVGFsZW50Q291bnQgPCBzaGVldERhdGEubWluUHVscFRhbGVudHNcblxuICAgIHNoZWV0RGF0YS5oYXNEZXZlbG9wbWVudFBoYXNlID0gdGhpcy5hY3Rvci5oYXNEZXZlbG9wbWVudFBoYXNlXG5cbiAgICBzaGVldERhdGEuYWxsb3dEZXZlbG9wbWVudCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpXG4gICAgc2hlZXREYXRhLmFsbG93Q2hhckNyZWF0aW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgc2hlZXREYXRhLmRldmVsb3BtZW50Um9sbEZvckx1Y2sgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdkZXZlbG9wbWVudFJvbGxGb3JMdWNrJ1xuICAgIClcbiAgICBzaGVldERhdGEuc2hvd0RldlBhbm5lbCA9IHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50IHx8IHNoZWV0RGF0YS5hbGxvd0NoYXJDcmVhdGlvblxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlGb3JtYXRzKSB7XG4gICAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5Rm9ybWF0c1trZXldKSB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5zaG93Q3VycmVuY3lTeW1ib2wgPSBbJ2RlY2ltYWxMZWZ0JywgJ2RlY2ltYWxSaWdodCcsICdpbnRlZ2VyTGVmdCcsICdpbnRlZ2VyUmlnaHQnXS5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5VHlwZXMpIHtcbiAgICAgIGlmIChDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIubGVuZ3RoID09PSAwIHx8IENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KSkge1xuICAgICAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0ubmFtZSkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEubWFudWFsQ3JlZGl0ID0gdGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ21hbnVhbENyZWRpdCcpXG4gICAgaWYgKCFzaGVldERhdGEubWFudWFsQ3JlZGl0KSB7XG4gICAgICBzaGVldERhdGEubW9uZXRhcnkgPSB7XG4gICAgICAgIHNwZW5kaW5nTGV2ZWw6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3Iuc3BlbmRpbmdMZXZlbCksXG4gICAgICAgIGFzc2V0czogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5hc3NldHMpLFxuICAgICAgICBjYXNoOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLmNhc2gpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxuXG4gICAgc2hlZXREYXRhLnN1bW1hcml6ZWQgPSB0aGlzLnN1bW1hcml6ZWQgJiYgIXNoZWV0RGF0YS5wZXJtaXNzaW9uTGltaXRlZFxuICAgIHNoZWV0RGF0YS5za2lsbExpc3QgPSBbXVxuICAgIGxldCBwcmV2aW91c1NwZWMgPSAnJ1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2hlZXREYXRhLnNraWxscykge1xuICAgICAgaWYgKHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5KSB7XG4gICAgICAgIGlmIChza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgaWYgKHByZXZpb3VzU3BlYyAhPT0gc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBwcmV2aW91c1NwZWMgPSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbExpc3QucHVzaCh7XG4gICAgICAgICAgICAgIGlzU3BlY2lhbGl6YXRpb246IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHNraWxsKVxuICAgICAgfVxuICAgIH1cbiAgICBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZSA9IFsuLi5zaGVldERhdGEuc2tpbGxzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYi5zeXN0ZW0udmFsdWUgLSBhLnN5c3RlbS52YWx1ZVxuICAgIH0pXG4gICAgc2hlZXREYXRhLnRvcFNraWxscyA9IFsuLi5zaGVldERhdGEuc2tpbGxzQnlWYWx1ZV0uc2xpY2UoMCwgMTQpXG4gICAgc2hlZXREYXRhLnNraWxsc0J5VmFsdWUgPSBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZS5maWx0ZXIoXG4gICAgICBza2lsbCA9PiBzaGVldERhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnJhcml0eVxuICAgIClcbiAgICBzaGVldERhdGEudG9wV2VhcG9ucyA9IFsuLi5zaGVldERhdGEubWVsZWVXcG4sIC4uLnNoZWV0RGF0YS5yYW5nZVdwbl1cbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLnN5c3RlbS5za2lsbC5tYWluPy52YWx1ZSAtIGIuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlXG4gICAgICB9KVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0J1xuICAgIClcbiAgICBpZiAoc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lICYmICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSkge1xuICAgICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyVXNlclxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLnBsYXllcm5hbWUgPSB1c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG5cbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZEJhY2tzdG9yeSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iYWNrc3RvcnksXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBfc2F2ZVNjcm9sbFBvc2l0aW9ucyAoaHRtbCkge1xuICAgIHN1cGVyLl9zYXZlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXG4gICAgY29uc3Qgc2VsZWN0b3JzID0gWycucmlnaHQtcGFuZWwgLnRhYi5kZXZlbG9wbWVudCBvbCddXG4gICAgdGhpcy5fc2Nyb2xsUG9zaXRpb25zWCA9IHNlbGVjdG9ycy5yZWR1Y2UoKHBvcywgc2VsKSA9PiB7XG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXG4gICAgICBwb3Nbc2VsXSA9IEFycmF5LmZyb20oZWwpLm1hcChlbCA9PiBlbC5zY3JvbGxMZWZ0KVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH0sIHt9KVxuICB9XG5cbiAgX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcbiAgICBzdXBlci5fcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyhodG1sKVxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsnLnJpZ2h0LXBhbmVsIC50YWIuZGV2ZWxvcG1lbnQgb2wnXVxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggfHwge31cbiAgICBmb3IgKGNvbnN0IHNlbCBvZiBzZWxlY3RvcnMpIHtcbiAgICAgIGNvbnN0IGVsID0gaHRtbC5maW5kKHNlbClcbiAgICAgIGVsLmVhY2goKGksIGVsKSA9PiB7IGVsLnNjcm9sbExlZnQgPSBwb3NpdGlvbnNbc2VsXT8uW2ldIHx8IDAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnY2hhcmFjdGVyJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9pbmRleC5odG1sJyxcbiAgICAgIHdpZHRoOiA2ODcsXG4gICAgICBoZWlnaHQ6IDYyMyxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnJpZ2h0LXBhbmVsIC50YWInXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lcikge1xuICAgICAgLy8gTU9ESUY6IDAuOC54IG93bmVyIGRlcHJlY2F0ZWQgID0+IGlzT3duZXJcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlLmZsYWdnZWQ0ZGV2JylcbiAgICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2tpbGxEZXYoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LW9jY3VwYXRpb24nKVxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldE9jY3VwYXRpb24oKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZXNldC1hcmNoZXR5cGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldEFyY2hldHlwZSgpKVxuICAgICAgaHRtbC5maW5kKCcub3Blbi1pdGVtJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGV0YWlscyhldmVudCkpXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgICAvLyAgIC5jaGFuZ2UoYXN5bmMgZXZlbnQgPT57XG4gICAgICAvLyAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgLy8gICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAvLyAgICAgbGV0IHZhbHVlID0gTnVtYmVyKCBldmVudC5jdXJyZW50VGFyZ2V0Py52YWx1ZSlcbiAgICAgIC8vICAgICBpZiggIWlzTmFOKHZhbHVlKSkgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChldmVudClcbiAgICAgIC8vICAgICBlbHNlIHVpLm5vdGlmaWNhdGlvbnMud2FybignRXJyb3IgcGFyc2luZyBIUCB2YWx1ZScpXG4gICAgICAvLyAgIH0pXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtbGlzdC1tb2RlJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZVNraWxsTGlzdE1vZGUoZXZlbnQpXG4gICAgICB9KVxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLXVuY29tbW9uLW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUoZXZlbnQpXG4gICAgICB9KVxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnNhbml0eS1sb3NzLXR5cGUtYWRkJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25BZGRTYW5pdHlMb3NzUmVhc29uLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnNhbml0eS1sb3NzLXR5cGUtZGVsZXRlJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25EZWxldGVTYW5pdHlMb3NzUmVhc29uLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLm15dGhvc0VuY291bnRlcnNUb3RhbExvc3MnKVxuICAgICAgICAgIC5ibHVyKHRoaXMuX29uRWRpdFNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcudG9nZ2xlLWtlZXBlci1mbGFncycpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uVG9nZ2xlS2VlcGVyRmxhZ3MuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5yZW1vdmUtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vblJlbW92ZU1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQWRkTW9uZXRhcnkgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcykgOiBbXVxuICAgIHZhbHVlcy5wdXNoKHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgbWluOiBudWxsLFxuICAgICAgbWF4OiBudWxsLFxuICAgICAgY2FzaFR5cGU6IDAsXG4gICAgICBjYXNoVmFsdWU6ICcnLFxuICAgICAgYXNzZXRzVHlwZTogMCxcbiAgICAgIGFzc2V0c1ZhbHVlOiAnJyxcbiAgICAgIHNwZW5kaW5nVHlwZTogMCxcbiAgICAgIHNwZW5kaW5nVmFsdWU6ICcnXG4gICAgfSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25SZW1vdmVNb25ldGFyeSAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHZhbHVlcyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICB2YWx1ZXMuc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uVG9nZ2xlS2VlcGVyRmxhZ3MgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcpIHtcbiAgICAgIGNhc2UgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAgICAgJ0NvQzcnLFxuICAgICAgICAgICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJyxcbiAgICAgICAgICAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ215dGhvc0hhcmRlbmVkJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJywgIXRoaXMuYWN0b3IubXl0aG9zSGFyZGVuZWQpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkU2FuaXR5TG9zc1JlYXNvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbmV3IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIoXG4gICAgICB7XG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLFxuICAgICAgICB0eXBlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkVkaXRTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGNvbnN0IGlucHV0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG9mZnNldCA9IGlucHV0LmNsb3Nlc3QoJy5mbGV4cm93JykuZGF0YSgnb2Zmc2V0JylcbiAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLnNhbml0eUxvc3NFdmVudHM/LltvZmZzZXRdPy50b3RhbExvc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cylcbiAgICAgIHNhbml0eUxvc3NFdmVudHNbb2Zmc2V0XS50b3RhbExvc3MgPSBwYXJzZUludChpbnB1dC52YWwoKSwgMTApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgICB9XG4gIH1cblxuICBfb25EZWxldGVTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvZmZzZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAuY2xvc2VzdCgnLmZsZXhyb3cnKVxuICAgICAgLmRhdGEoJ29mZnNldCcpXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IHRoaXMuYWN0b3Iuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMgPz8gW11cbiAgICBzYW5pdHlMb3NzRXZlbnRzLnNwbGljZShvZmZzZXQsIDEpXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgfSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNraWxsTGlzdE1vZGUgKGV2ZW50KSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3NraWxsTGlzdE1vZGUnLFxuICAgICAgIXRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJylcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyB0b2dnbGVTa2lsbFVuY29tbW9uTW9kZSAoZXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAnQ29DNycsXG4gICAgICAnc2tpbGxTaG93VW5jb21tb24nLFxuICAgICAgIXRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpXG4gICAgKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uU2tpbGxEZXYgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmRldmVsb3BTa2lsbChza2lsbElkLCBldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIF9vbkl0ZW1EZXRhaWxzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0eXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGVcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvclt0eXBlXVxuICAgIGlmIChpdGVtKSBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLm1vbmV0YXJ5Py52YWx1ZXMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10gPSBPYmplY3QudmFsdWVzKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMgfHwgW10pXG4gICAgfVxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIHJlbmRlclNoZWV0IChzaGVldCwgaHRtbCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycpKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAnbnVsbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIClcbiAgICAgICAgICAvLyBjb25zdCBib3JkZXJJbWFnZSA9IHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJyk7XG4gICAgICAgICAgLy8gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnLCAnJyk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSAhPT0gJ3NsaWNlJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgbGV0IHN0eWxlU2hlZXQsIGNzc1J1bGVJbmRleFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uaHJlZj8uZW5kc1dpdGgoJ2NvYzdnLmNzcycpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3R5bGVTaGVldCkge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlU2hlZXQucnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LnJ1bGVzW2ldLnNlbGVjdG9yVGV4dCA9PT0gJy5zaGVldFYyLmNoYXJhY3RlciBmb3JtJ1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgY3NzUnVsZUluZGV4ID0gaVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjc3NSdWxlSW5kZXgpIHtcbiAgICAgICAgICAgICAgY29uc3QgQ1NTU3R5bGUgPSBzdHlsZVNoZWV0LnJ1bGVzW2Nzc1J1bGVJbmRleF0uc3R5bGVcbiAgICAgICAgICAgICAgQ1NTU3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JvcmRlci1pbWFnZScpXG4gICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJykpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvJzpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW4nOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdjb250YWluJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnY292ZXInOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdjb3ZlcicpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2F1dG8nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3NcbiAgICAgICAgICAgIC5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tb3RoZXItc2hlZXQtYmcnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAnbnVsbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWltYWdlJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWltYWdlJyxcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1mcm9udC1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtYmFjay1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtaW50ZXJhY3RpdmUtY29sb3InLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKCctLXNraWxsLWxlbmd0aCcsICdhdXRvJylcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtc3BlY2lhbGl6YXRpb24tbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JykpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tU2hlZXRGb250ID0gbmV3IEZvbnRGYWNlKFxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcpXG4gICAgICAgIClcbiAgICAgICAgY3VzdG9tU2hlZXRGb250XG4gICAgICAgICAgLmxvYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEN1cnNpdmVGb250ID0gbmV3IEZvbnRGYWNlKFxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnKSxcbiAgICAgICAgICB7IHdlaWdodDogJ2JvbGQnIH1cbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEN1cnNpdmVGb250XG4gICAgICAgICAgLmxvYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnKSkge1xuICAgICAgICBjb25zdCBzaXplID0gYCR7Z2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpfXB4YFxuICAgICAgICBpZiAoc2l6ZSAhPT0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpKSB7XG4gICAgICAgICAgJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScsIHNpemUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNoZWV0LmFjdG9yPy5zeXN0ZW0ucGFubmVsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2hlZXQuYWN0b3Iuc3lzdGVtLnBhbm5lbCkpIHtcbiAgICAgICAgY29uc3QgcGFubmVsQ2xhc3MgPSBjaGF0SGVscGVyLmNhbWVsQ2FzZVRvSHlwaGVuKGtleSlcbiAgICAgICAgY29uc3QgcGFubmVsID0gaHRtbC5maW5kKGAucGFubmVsLiR7cGFubmVsQ2xhc3N9YClcbiAgICAgICAgaWYgKHZhbHVlLmV4cGFuZGVkKSBwYW5uZWwuYWRkQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAgICAgZWxzZSBwYW5uZWwucmVtb3ZlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbWJhdCB7XG4gIHN0YXRpYyByZW5kZXJDb21iYXRUcmFja2VyIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBjdXJyZW50Q29tYmF0ID0gZGF0YS5jb21iYXRzW2RhdGEuY3VycmVudEluZGV4IC0gMV1cbiAgICBpZiAoIWN1cnJlbnRDb21iYXQpIHJldHVyblxuXG4gICAgLy8gVE9ETyA6IFNpIGxlIGNvbWJhdCBlc3QgZGVqYSBkZWJ1dMOpIGF2YW50IGNoYXJnZW1lbnQgbGEgZm9uY3Rpb24gZCdpbml0aWF0aXZlIHBvaW50ZSB2ZXJzIGwnYW5jaWVubmUuXG4gICAgLy8gbGEgZm9uY3Rpb24gYXR0cmlidcOpZSBlc3QgZGF0YS5jb21iYXQucm9sbEluaXRpYXRpdmVcbiAgICBodG1sLmZpbmQoJy5jb21iYXRhbnQnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgLy8gaWYoIGdhbWUuY29tYmF0LnN0YXJ0ZWQpe1xuXG4gICAgICBjb25zdCBjb21iSWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tYmF0YW50LWlkJylcbiAgICAgIGNvbnN0IGNvbWJhdGFudENvbnRyb2xzRGl2ID0gZWwucXVlcnlTZWxlY3RvcignLmNvbWJhdGFudC1jb250cm9scycpXG4gICAgICAvLyBjb25zdCBjb21iYXRhbnQgPSBnYW1lLmNvbWJhdC5nZXRDb21iYXRhbnQoY29tYklkKTtcbiAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGN1cnJlbnRDb21iYXQuY29tYmF0YW50cy5nZXQoY29tYklkKVxuXG4gICAgICBpZiAoY29tYmF0YW50LmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcbiAgICAgICAgICBgPGEgY2xhc3M9XCJjb21iYXRhbnQtY29udHJvbCBhY3RpdmUgYWRkLWluaXRcIiB0aXRsZT1cIiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuUHV0R3VuQXdheSdcbiAgICAgICAgICApfVwiIGRhdGEtY29udHJvbD1cImRyYXdHdW5cIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tcmV2b2x2ZXJcIj48L2k+PC9hPmBcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcbiAgICAgICAgICBgPGEgY2xhc3M9XCJjb21iYXRhbnQtY29udHJvbCBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5EcmF3R3VuJ1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykgPT09ICdvcHRpb25hbCcgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXRBc1RleHQnKVxuICAgICAgKSB7XG4gICAgICAgIGlmIChjb21iYXRhbnQuaW5pdGlhdGl2ZSkge1xuICAgICAgICAgIGNvbnN0IHRva2VuSW5pdGlhdGl2ZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCBpbml0aWF0aXZlVGVzdCA9IHRva2VuSW5pdGlhdGl2ZS5xdWVyeVNlbGVjdG9yKCcuaW5pdGlhdGl2ZScpXG4gICAgICAgICAgY29uc3Qgcm9sbCA9XG4gICAgICAgICAgICAxMDAgKiBjb21iYXRhbnQuaW5pdGlhdGl2ZSAtIDEwMCAqIE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpXG4gICAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKSkge1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2Z1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZmFpbHVyZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ3JlZ3VsYXItc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eVJlZ3VsYXInXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2hhcmQtc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUhhcmQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUV4dHJlbWUnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdjcml0aWNhbCcpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUNyaXRpY2FsJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb21iYXRhbnQuaW5pdGlhdGl2ZSA8IDApIHtcbiAgICAgICAgY29uc3QgaDQgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4tbmFtZScpLnF1ZXJ5U2VsZWN0b3IoJ2g0JylcbiAgICAgICAgY29uc3Qgc3BhbiA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4uaW5pdGlhdGl2ZScpXG4gICAgICAgIGg0LnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgICBoNC5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIHNwYW4uc3R5bGUudGV4dFNoYWRvdyA9ICcxcHggMXB4IDRweCBkYXJrcmVkJ1xuXG4gICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJ2RhcmtyZWQnXG4gICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSAnYmxhY2snXG4gICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgfVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLWluaXQnKS5jbGljayhldmVudCA9PiBDb0M3Q29tYmF0Ll9vblRvZ2dsZUd1bihldmVudCkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlR3VuIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsaSA9IGJ0bi5jbG9zZXN0KCcuY29tYmF0YW50JylcbiAgICBjb25zdCBjID0gYXdhaXQgZ2FtZS5jb21iYXQuY29tYmF0YW50cy5nZXQobGkuZGF0YXNldC5jb21iYXRhbnRJZClcbiAgICBpZiAoYy5hY3Rvci5pc093bmVyKSB7XG4gICAgICBpZiAoYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICAgIGF3YWl0IGMuc2V0RmxhZygnQ29DNycsICdoYXNHdW4nLCBmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGMuc2V0RmxhZygnQ29DNycsICdoYXNHdW4nLCB0cnVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5ld0luaXQgPSBhd2FpdCBjLmFjdG9yLnJvbGxJbml0aWF0aXZlKCEhYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKVxuICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgIGlmIChjLmluaXRpYXRpdmUgPCBuZXdJbml0KSBnYW1lLmNvbWJhdC5zZXRJbml0aWF0aXZlKGMuaWQsIG5ld0luaXQpXG4gICAgfSBlbHNlIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgfVxufVxuXG4vKipcbiAqIFJvbGwgaW5pdGlhdGl2ZSBmb3Igb25lIG9yIG11bHRpcGxlIENvbWJhdGFudHMgd2l0aGluIHRoZSBDb21iYXQgZW50aXR5XG4gKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gaWRzICAgICBBIENvbWJhdGFudCBpZCBvciBBcnJheSBvZiBpZHMgZm9yIHdoaWNoIHRvIHJvbGxcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aGljaCBtb2RpZnkgaG93IGluaXRpYXRpdmUgcm9sbHMgYXJlIGNyZWF0ZWQgb3IgcHJlc2VudGVkLlxuICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gW29wdGlvbnMuZm9ybXVsYV0gICAgICAgICBBIG5vbi1kZWZhdWx0IGluaXRpYXRpdmUgZm9ybXVsYSB0byByb2xsLiBPdGhlcndpc2UgdGhlIHN5c3RlbSBkZWZhdWx0IGlzIHVzZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnVwZGF0ZVR1cm49dHJ1ZV0gICAgIFVwZGF0ZSB0aGUgQ29tYmF0IHR1cm4gYWZ0ZXIgYWRkaW5nIG5ldyBpbml0aWF0aXZlIHNjb3JlcyB0byBrZWVwIHRoZSB0dXJuIG9uIHRoZSBzYW1lIENvbWJhdGFudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5tZXNzYWdlT3B0aW9ucz17fV0gICAgQWRkaXRpb25hbCBvcHRpb25zIHdpdGggd2hpY2ggdG8gY3VzdG9taXplIGNyZWF0ZWQgQ2hhdCBNZXNzYWdlc1xuICogQHJldHVybiB7UHJvbWlzZTxDb21iYXQ+fSAgICAgICAgQSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHRoZSB1cGRhdGVkIENvbWJhdCBlbnRpdHkgb25jZSB1cGRhdGVzIGFyZSBjb21wbGV0ZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJvbGxJbml0aWF0aXZlIChcbiAgaWRzLFxuICB7IGZvcm11bGEgPSBudWxsLCB1cGRhdGVUdXJuID0gdHJ1ZSwgbWVzc2FnZU9wdGlvbnMgPSB7fSB9ID0ge31cbikge1xuICAvLyBJdGVyYXRlIG92ZXIgQ29tYmF0YW50cywgcGVyZm9ybWluZyBhbiBpbml0aWF0aXZlIHJvbGwgZm9yIGVhY2hcbiAgY29uc3QgdXBkYXRlcyA9IFtdXG4gIGZvciAoY29uc3QgWywgaWRdIG9mIGlkcy5lbnRyaWVzKCkpIHtcbiAgICAvLyBHZXQgQ29tYmF0YW50IGRhdGEgKG5vbi1zdHJpY3RseSlcbiAgICBjb25zdCBjb21iYXRhbnQgPSB0aGlzLmNvbWJhdGFudHMuZ2V0KGlkKVxuXG4gICAgLy8gUHJvZHVjZSBhbiBpbml0aWF0aXZlIHJvbGwgZm9yIHRoZSBDb21iYXRhbnRcbiAgICBjb25zdCByb2xsID0gYXdhaXQgY29tYmF0YW50LmFjdG9yLnJvbGxJbml0aWF0aXZlKFxuICAgICAgISFjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKVxuICAgIClcbiAgICB1cGRhdGVzLnB1c2goeyBfaWQ6IGlkLCBpbml0aWF0aXZlOiByb2xsIH0pXG4gIH1cbiAgaWYgKCF1cGRhdGVzLmxlbmd0aCkgcmV0dXJuIHRoaXNcblxuICAvLyBVcGRhdGUgbXVsdGlwbGUgY29tYmF0YW50c1xuICBhd2FpdCB0aGlzLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdDb21iYXRhbnQnLCB1cGRhdGVzKVxuXG4gIHJldHVybiB0aGlzXG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIEl0ZW0gKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJREJhdGNoIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY29jLWlkLWVkaXRvciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY29jLWlkLWJhdGNoLmhicycsXG4gICAgICB3aWR0aDogNzAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29DSURGbGFnLnRpdGxlJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmZvdW5kS2V5cyA9IE9iamVjdC5rZXlzKHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzKS5yZWR1Y2UoKG91dCwga2V5KSA9PiB7XG4gICAgICBvdXQucHVzaCh7IG5hbWU6IGtleSwga2V5OiBzaGVldERhdGEub2JqZWN0LmZvdW5kS2V5c1trZXldIH0pXG4gICAgICByZXR1cm4gb3V0XG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIHNoZWV0RGF0YS5taXNzaW5nTmFtZXMgPSBPYmplY3Qua2V5cyhzaGVldERhdGEub2JqZWN0Lm1pc3NpbmdOYW1lcykucmVkdWNlKChvdXQsIGtleSkgPT4ge1xuICAgICAgb3V0LnB1c2goeyBrZXk6IHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzW2tleV0gPz8gJycsIG5hbWU6IGtleSwgY3VzdG9tOiBzaGVldERhdGEub2JqZWN0Lm1pc3NpbmdOYW1lc1trZXldLCBzdWZmaXg6IHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzW2tleV0ucmVwbGFjZSh0aGlzLm9iamVjdC5zdWZmaXhSZWdFeHAsICcnKSB9KVxuICAgICAgcmV0dXJuIG91dFxuICAgIH0sIFtdKS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuZXhpc3RpbmcnKS5jaGFuZ2UodGhpcy5vblNldE5hbWUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5mYS13YW5kLW1hZ2ljJykuY2xpY2sodGhpcy5vbkNsaWNrR3Vlc3MuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2lucHV0Jykua2V5dXAodGhpcy5vbktleXVwLmJpbmQodGhpcykpXG4gIH1cblxuICBvblNldE5hbWUgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lc1tvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJyldID0gb2JqLnZhbCgpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIG9uQ2xpY2tHdWVzcyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKVxuICAgIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lc1tuYW1lXSA9IHRoaXMub2JqZWN0LmlkUHJlZml4ICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZShuYW1lKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBvbktleXVwIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBuYW1lID0gb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW25hbWVdID0gdGhpcy5vYmplY3QuaWRQcmVmaXggKyBvYmoudmFsKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5zdWJtaXR0ZXIpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC50eXBlTmFtZSA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIGF3YWl0IENvQ0lEQmF0Y2gucHJvY2Vzc1NraWxsS2V5cyh0aGlzLm9iamVjdC51cGRhdGVMaXN0LCB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXNvbHZlKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHByb2Nlc3NTa2lsbEtleXMgKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBjb25zdCBhY3RvcnMgPSB7fVxuICAgIGNvbnN0IHNjZW5lcyA9IHt9XG4gICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlTGlzdCkge1xuICAgICAgdXBkYXRlLmNvY2lkRmxhZy5pZCA9IG1pc3NpbmdOYW1lc1t1cGRhdGUubmFtZV1cbiAgICAgIGlmICh0eXBlb2YgdXBkYXRlLmNvY2lkRmxhZy5sYW5nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGUuY29jaWRGbGFnLmxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLnByaW9yaXR5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGUuY29jaWRGbGFnLnByaW9yaXR5ID0gMFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLmVyYXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcuZXJhcyA9IHt9XG4gICAgICB9XG4gICAgICBjb25zdCBmbGFncyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdCh7IGZsYWdzOiB7IENvQzc6IHsgY29jaWRGbGFnOiB1cGRhdGUuY29jaWRGbGFnIH0gfSB9KVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuc2NlbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQodXBkYXRlLnNjZW5lKVxuICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zLmZpbmRJbmRleCh0ID0+IHQuX2lkID09PSB1cGRhdGUudG9rZW4pXG4gICAgICAgIGlmICh0b2tlbk9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU9mZnNldCA9IHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zLmZpbmRJbmRleChpID0+IGkuX2lkID09PSB1cGRhdGUuaXRlbSlcbiAgICAgICAgICBpZiAoaXRlbU9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBleHBhbmRlZEZsYWdzID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoT2JqZWN0LmVudHJpZXMoZmxhZ3MpLnJlZHVjZSgob3V0LCBlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZW50cnlbMF0ubWF0Y2goL15mbGFnc1xcLkNvQzdcXC5jb2NpZEZsYWcvKSkge1xuICAgICAgICAgICAgICAgIG91dFtlbnRyeVswXV0gPSBlbnRyeVsxXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBvdXRcbiAgICAgICAgICAgIH0sIHt9KSlcbiAgICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnNbdG9rZW5PZmZzZXRdLmFjdG9yRGF0YS5pdGVtc1tpdGVtT2Zmc2V0XSwgZXhwYW5kZWRGbGFncylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVwZGF0ZS5hY3RvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhY3RvcnNbdXBkYXRlLmFjdG9yXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBhY3RvcnNbdXBkYXRlLmFjdG9yXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBfaWQ6IHVwZGF0ZS5pdGVtXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZmxhZ3MpKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICBpdGVtW2tleV0gPSBmbGFnc1trZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFjdG9yc1t1cGRhdGUuYWN0b3JdLnB1c2goaXRlbSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgICAgX2lkOiB1cGRhdGUuaXRlbVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGZsYWdzKSkge1xuICAgICAgICAgIGlmIChrZXkubWF0Y2goL15mbGFnc1xcLkNvQzdcXC5jb2NpZEZsYWcvKSkge1xuICAgICAgICAgICAgaXRlbVtrZXldID0gZmxhZ3Nba2V5XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IEl0ZW0udXBkYXRlRG9jdW1lbnRzKGl0ZW1zKVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoYWN0b3JzKS5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgYWN0b3JJZCBvZiBPYmplY3Qua2V5cyhhY3RvcnMpKSB7XG4gICAgICAgIGF3YWl0IEl0ZW0udXBkYXRlRG9jdW1lbnRzKGFjdG9yc1thY3RvcklkXSwgeyBwYXJlbnQ6IGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoc2NlbmVzKS5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3Qgc2NlbmVJZCBvZiBPYmplY3Qua2V5cyhzY2VuZXMpKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIHNjZW5lLnVwZGF0ZShzY2VuZXNbc2NlbmVJZF0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcG9wdWxhdGVTa2lsbEtleXMgKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzKSB7XG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgY29uc3QgYWN0b3JEYXRhID0gYWN0b3IudG9PYmplY3QoKVxuICAgICAgaWYgKGFjdG9yRGF0YS5pdGVtcykge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3JEYXRhLml0ZW1zKSB7XG4gICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgaWYgKCFpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkPy5tYXRjaCgvXmkuc2tpbGwvKSkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLl9pZCxcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBjb2NpZEZsYWc6IGl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZyA/PyB7fVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm91bmRLZXlzW2l0ZW1EYXRhLm5hbWVdID0gaXRlbURhdGEuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2NlbmUgb2YgZ2FtZS5zY2VuZXMpIHtcbiAgICAgIGNvbnN0IHNjZW5lRGF0YSA9IHNjZW5lLnRvT2JqZWN0KClcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2Ygc2NlbmVEYXRhLnRva2VucyA/PyBbXSkge1xuICAgICAgICBpZiAodG9rZW4uYWN0b3JJZCAmJiAhdG9rZW4uYWN0b3JMaW5rKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodG9rZW4uYWN0b3JEYXRhKVxuICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMgPz8gW10pIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICAgICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgc2NlbmU6IHNjZW5lRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4uX2lkLFxuICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhtaXNzaW5nTmFtZXMpLmZpbHRlcihrZXkgPT4gbWlzc2luZ05hbWVzW2tleV0gPT09ICcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15pXFwuc2tpbGxcXC4vLCB0eXBlOiAnaScsIGVyYTogZmFsc2UgfSlcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBmb3VuZEtleXNbaXRlbS5uYW1lXSA9IGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMgPz8ge30pKSB7XG4gICAgICAgIGZvdW5kS2V5c1tnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyBrZXkpXSA9IGtleVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIG1pc3NpbmdOYW1lcykge1xuICAgICAgICBpZiAodHlwZW9mIGZvdW5kS2V5c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBtaXNzaW5nTmFtZXNbbmFtZV0gPSBmb3VuZEtleXNbbmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKHR5cGUpIHtcbiAgICBjb25zdCB1cGRhdGVMaXN0ID0gW11cbiAgICBjb25zdCBtaXNzaW5nTmFtZXMgPSB7fVxuICAgIGNvbnN0IGZvdW5kS2V5cyA9IHt9XG4gICAgbGV0IHR5cGVOYW1lID0gJydcbiAgICBsZXQgaWRQcmVmaXggPSAnJ1xuICAgIGxldCBzdWZmaXhSZWdFeHAgPSBudWxsXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIHR5cGVOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgaWRQcmVmaXggPSAnaS5za2lsbC4nXG4gICAgICAgIHN1ZmZpeFJlZ0V4cCA9IC9eaVxcLnNraWxsXFwuL1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGF3YWl0IENvQ0lEQmF0Y2gucG9wdWxhdGVTa2lsbEtleXModXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpXG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDb0NJREJhdGNoKHsgdHlwZU5hbWUsIGlkUHJlZml4LCBzdWZmaXhSZWdFeHAsIHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzLCByZXNvbHZlIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0NJREJhdGNoIH0gZnJvbSAnLi9hcHBzL2NvYy1pZC1iYXRjaC5qcydcblxuZXhwb3J0IGNsYXNzIFVwZGF0ZXIge1xuICBzdGF0aWMgYXN5bmMgY2hlY2tGb3JVcGRhdGUgKCkge1xuICAgIGxldCBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicpXG4gICAgaWYgKGdhbWUuYWN0b3JzLnNpemUgKyBnYW1lLnNjZW5lcy5zaXplICsgZ2FtZS5pdGVtcy5zaXplICsgZ2FtZS5qb3VybmFsLnNpemUgKyBnYW1lLnRhYmxlcy5zaXplID09PSAwKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYWN0b3JzLCBpdGVtcywgam91cm5hbHMsIHJvbGwgdGFibGVzLCBvciBzY2VuZXMgc2tpcCB3b3JsZCB1cGRhdGVcbiAgICAgIHN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgc3lzdGVtVXBkYXRlVmVyc2lvbilcbiAgICB9XG4gICAgY29uc3QgcnVuTWlncmF0ZSA9IGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgc3lzdGVtVXBkYXRlVmVyc2lvbiA/PyAnMCcpXG4gICAgdGhpcy51cGRhdGVkTW9kdWxlcyA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJykgfHwge31cbiAgICB0aGlzLmN1cnJlbnRNb2R1bGVzID0ge31cbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKCFbJ0NvQzcnLCAnd29ybGQnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSAmJiBbJ0FjdG9yJywgJ0l0ZW0nLCAnU2NlbmUnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnR5cGUpKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY3VycmVudE1vZHVsZXMsIHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpKSB7XG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIGNoZWNrIGVhY2ggbW9kdWxlIG9uY2VcbiAgICAgICAgICBjb25zdCBtb2R1bGUgPSBnYW1lLm1vZHVsZXMuZ2V0KHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpXG4gICAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgaWYgKHJ1bk1pZ3JhdGUgfHwgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnVwZGF0ZWRNb2R1bGVzLCBtb2R1bGUuaWQpIHx8IFN0cmluZyh0aGlzLnVwZGF0ZWRNb2R1bGVzW21vZHVsZS5pZF0pICE9PSBTdHJpbmcobW9kdWxlLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgIC8vIEEgbWlncmF0aW9uIGlzIHJlcXVpcmVkLCBtb2R1bGUgaGFzIG5vdCBiZWVuIHVwZGF0ZWQgYmVmb3JlLCBvciB0aGUgdmVyc2lvbiBudW1iZXIgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kdWxlc1ttb2R1bGUuaWRdID0gbW9kdWxlLnZlcnNpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJ1bk1pZ3JhdGUgfHwgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcykubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIG5ldyBEaWFsb2coe1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgPyAnQ29DNy5NaWdyYXRlLk1lc3NhZ2UnXG4gICAgICAgICAgICAgIDogJ0NvQzcuTWlncmF0ZS5XaXRoTW9kdWxlc01lc3NhZ2UnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS52ZXJzaW9uLFxuICAgICAgICAgICAgICBtb2R1bGVzOlxuICAgICAgICAgICAgICAgICc8dWw+PGxpPicgK1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpXG4gICAgICAgICAgICAgICAgICAubWFwKG1vZCA9PiBnYW1lLm1vZHVsZXMuZ2V0KG1vZCkudGl0bGUpXG4gICAgICAgICAgICAgICAgICAuam9pbignPC9saT48bGk+JykgK1xuICAgICAgICAgICAgICAgICc8L2xpPjwvdWw+J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25VcGRhdGUnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IFVwZGF0ZXIudXBkYXRlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBza2lwOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkdNUmVxdWlyZWQnLCB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgT0s6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvbk9rYXknKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGVEb2N1bWVudHMoKVxuXG4gICAgLy8gLy8gSWYgd2UgcHV0IHVwIGEgdGVtcG9yYXJ5IHNjZW5lIHJldHVybiB0aGUgdXNlciBhbmQgcmVtb3ZlIGl0XG4gICAgLy8gaWYgKFxuICAgIC8vICAgdHlwZW9mIHRoaXMudGVtcG9yYXJ5U2NlbmUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gICB0eXBlb2YgdGhpcy5vcmlnaW5hbFNjZW5lICE9PSAndW5kZWZpbmVkJ1xuICAgIC8vICkge1xuICAgIC8vICAgYXdhaXQgdGhpcy5vcmlnaW5hbFNjZW5lLnZpZXcoKVxuICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgIC8vICAgYXdhaXQgdGhpcy50ZW1wb3JhcnlTY2VuZS5kZWxldGUoKVxuICAgIC8vIH1cblxuICAgIC8vIE1pZ3JhdGUgU2V0dGluZ3MgaWYgUHVscCBSdWxlcyBpcyBlbmFibGVkIHR1cm4gb24gYWxsIHJ1bGVzXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVPcmdhbml6YXRpb24nLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycsIHRydWUpXG4gICAgfVxuXG4gICAgYXdhaXQgQ29DSURCYXRjaC5jcmVhdGUoJ3NraWxsJylcblxuICAgIGNvbnN0IHNldHRpbmdzID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG5cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkNvbXBsZXRlJyksIHtcbiAgICAgIHBlcm1hbmVudDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdW1lbnRzICgpIHtcbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3IudG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEFjdG9yIGRvY3VtZW50ICR7YWN0b3IubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckFjdG9yJywge1xuICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEl0ZW1zXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBJdGVtIGRvY3VtZW50ICR7aXRlbS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JJdGVtJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgVGFibGVzXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YSh0YWJsZS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgVGFibGUgZG9jdW1lbnQgJHt0YWJsZS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgdGFibGUudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yVGFibGUnLCB7XG4gICAgICAgICAgbmFtZTogdGFibGUubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgTWFjcm9zXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShtYWNyby50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgTWFjcm8gZG9jdW1lbnQgJHttYWNyby5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgbWFjcm8udXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yTWFjcm8nLCB7XG4gICAgICAgICAgbmFtZTogbWFjcm8ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgU2NlbmVzIFtUb2tlbl0gQWN0b3JzXG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShzY2VuZSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIFNjZW5lIGRvY3VtZW50ICR7c2NlbmUubmFtZX1gKVxuICAgICAgICAgIC8vIGlmIChcbiAgICAgICAgICAvLyAgIHNjZW5lLmlkID09PSBnYW1lLnNjZW5lcy5jdXJyZW50LmlkICYmXG4gICAgICAgICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgLy8gKSB7XG4gICAgICAgICAgLy8gICB0aGlzLnRlbXBvcmFyeVNjZW5lID0gYXdhaXQgU2NlbmUuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwMDAwJ1xuICAgICAgICAgIC8vICAgfSlcbiAgICAgICAgICAvLyAgIHRoaXMub3JpZ2luYWxTY2VuZSA9IHNjZW5lXG4gICAgICAgICAgLy8gICBhd2FpdCBEcmF3aW5nRG9jdW1lbnQuY3JlYXRlKFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgYXV0aG9yOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgLy8gICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdyJyxcbiAgICAgICAgICAvLyAgICAgICAgIHdpZHRoOiAxNjAwLFxuICAgICAgICAgIC8vICAgICAgICAgaGVpZ2h0OiAyMDBcbiAgICAgICAgICAvLyAgICAgICB9LFxuICAgICAgICAgIC8vICAgICAgIHg6IDIyMDAsXG4gICAgICAgICAgLy8gICAgICAgeTogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB6OiAwLFxuICAgICAgICAgIC8vICAgICAgIHN0cm9rZVdpZHRoOiAwLFxuICAgICAgICAgIC8vICAgICAgIHRleHQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcbiAgICAgICAgICAvLyAgICAgICBmb250RmFtaWx5OiAnU2lnbmlrYScsXG4gICAgICAgICAgLy8gICAgICAgZm9udFNpemU6IDEyOCxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0Q29sb3I6ICcjRkZGRkZGJyxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0QWxwaGE6IDEsXG4gICAgICAgICAgLy8gICAgICAgaGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAvLyAgICAgICBsb2NrZWQ6IHRydWVcbiAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgIC8vICAgICAgIHBhcmVudDogdGhpcy50ZW1wb3JhcnlTY2VuZVxuICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgLy8gICApXG4gICAgICAgICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLnZpZXcoKVxuICAgICAgICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudG9rZW5zLmZvckVhY2godCA9PiAodC5fYWN0b3IgPSBudWxsKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JTY2VuZScsIHtcbiAgICAgICAgICBuYW1lOiBzY2VuZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSAhPT0gJ0NvQzcnICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yTW9uZXRhcnkoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoaXRlbVVwZGF0ZSkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyclxuICAgICAgfSwgW10pXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cGRhdGVEYXRhLml0ZW1zID0gaXRlbXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1pZ3JhdGVDb21wZW5kaXVtRGF0YSAocGFjaykge1xuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHBhY2subWV0YWRhdGEudHlwZVxuICAgIGlmIChcbiAgICAgICFbJ0FjdG9yJywgJ0l0ZW0nLCAnTWFjcm8nLCAnUm9sbFRhYmxlJywgJ1NjZW5lJ10uaW5jbHVkZXMoZG9jdW1lbnRUeXBlKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVW5sb2NrIHRoZSBwYWNrIGZvciBlZGl0aW5nXG4gICAgY29uc3Qgd2FzTG9ja2VkID0gcGFjay5sb2NrZWRcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogZmFsc2UgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYWNrLm1pZ3JhdGUoKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ3BhY2sgbWlncmF0ZSBmYWlsZWQnLCBwYWNrLCBlcnIpXG4gICAgfVxuICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBjb21wZW5kaXVtIGVudHJpZXMgLSBhcHBseWluZyBmaW5lLXR1bmVkIG1pZ3JhdGlvbiBmdW5jdGlvbnNcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudHMpIHtcbiAgICAgIGxldCB1cGRhdGVEYXRhID0ge31cbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAoZG9jdW1lbnRUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnQWN0b3InOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnSXRlbSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ01hY3JvJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ1JvbGxUYWJsZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdTY2VuZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKGRvYylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2RvY3VtZW50VHlwZX0gZG9jdW1lbnQgJHtkb2MubmFtZX0gaW4gQ29tcGVuZGl1bSAke3BhY2suY29sbGVjdGlvbn1gXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGRvYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckRvY3VtZW50UGFjaycsIHtcbiAgICAgICAgICBuYW1lOiBkb2MubmFtZSxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBwYWNrLmNvbGxlY3Rpb24sXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBcHBseSB0aGUgb3JpZ2luYWwgbG9ja2VkIHN0YXR1cyBmb3IgdGhlIHBhY2tcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogd2FzTG9ja2VkIH0pXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUl0ZW1EYXRhIChpdGVtKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgSXRlbVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRW1iZWRkZWR2MTAoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUFydHdvcmsoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRXJhcyhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rVW5pdHMoaXRlbSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZU1hY3JvRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVNYWNyb0FydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVUYWJsZURhdGEgKHRhYmxlKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlVGFibGVBcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlU2NlbmVEYXRhIChzY2VuZSkge1xuICAgIGNvbnN0IHJldHVybnMgPSB7XG4gICAgICB0b2tlbnM6IFtdXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NlbmUudG9rZW5zICE9PSAndW5kZWZpbmVkJyAmJiBzY2VuZS50b2tlbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5zLnRva2VucyA9IHNjZW5lLnRva2Vucy5tYXAodG9rZW4gPT4ge1xuICAgICAgICBjb25zdCB0ID0gdG9rZW4udG9PYmplY3QoKVxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgVXBkYXRlci5fbWlncmF0ZVRva2VuQXJ0d29yayh0LCB1cGRhdGVEYXRhKVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoKSB7XG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0LCB1cGRhdGVEYXRhKVxuICAgICAgICB9XG4gICAgICAgIGlmICghdC5hY3RvcklkIHx8IHQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgICB9IGVsc2UgaWYgKCFnYW1lLmFjdG9ycy5oYXModC5hY3RvcklkKSkge1xuICAgICAgICAgIHQuYWN0b3JJZCA9IG51bGxcbiAgICAgICAgICB0LmFjdG9yRGF0YSA9IHt9XG4gICAgICAgIH0gZWxzZSBpZiAoIXQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodC5hY3RvckRhdGEpXG4gICAgICAgICAgYWN0b3JEYXRhLnR5cGUgPSB0b2tlbi5hY3Rvcj8udHlwZVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShhY3RvckRhdGEpXG4gICAgICAgICAgO1snaXRlbXMnLCAnZWZmZWN0cyddLmZvckVhY2goZW1iZWRkZWROYW1lID0+IHtcbiAgICAgICAgICAgIGlmICghdXBkYXRlW2VtYmVkZGVkTmFtZV0/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXcgTWFwKHVwZGF0ZVtlbWJlZGRlZE5hbWVdLm1hcCh1ID0+IFt1Ll9pZCwgdV0pKVxuICAgICAgICAgICAgdC5hY3RvckRhdGFbZW1iZWRkZWROYW1lXS5mb3JFYWNoKG9yaWdpbmFsID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlID0gdXBkYXRlcy5nZXQob3JpZ2luYWwuX2lkKVxuICAgICAgICAgICAgICBpZiAodXBkYXRlKSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsLCB1cGRhdGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgZGVsZXRlIHVwZGF0ZVtlbWJlZGRlZE5hbWVdXG4gICAgICAgICAgfSlcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHQuYWN0b3JEYXRhLCB1cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXR1cm5zXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdhcmNoZXR5cGUnLFxuICAgICAgICAnY2hhc2UnLFxuICAgICAgICAnaXRlbScsXG4gICAgICAgICdvY2N1cGF0aW9uJyxcbiAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgJ3NraWxsJyxcbiAgICAgICAgJ3NwZWxsJyxcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICd0YWxlbnQnLFxuICAgICAgICAnd2VhcG9uJ1xuICAgICAgXS5pbmNsdWRlcyhpdGVtLnR5cGUpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XG4gICAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc3BlbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9IGl0ZW0uc3lzdGVtLnNraWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uY29zdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jYXN0aW5nVGltZSddID0gaXRlbS5zeXN0ZW0uY2FzdGluZ1RpbWUgfHwgJydcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5oaXRQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QuaHAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm1hZ2ljUG9pbnRzJ10gPSBpdGVtLnN5c3RlbS5jb3N0Lm1wIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uc3lzdGVtLmNvc3Quc2FuIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5wb3dlciddID0gaXRlbS5zeXN0ZW0uY29zdC5wb3cgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm90aGVycyddID0gJydcblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y29zdCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb29rIGF1dG9tYXRpb24gd2FzIGluY3JlYXNlZCBpbiAwLjYuNVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSBEb2N1bWVudCBkYXRhIGV4cHJlc3NlZCBhcyBhIHBsYWluIG9iamVjdFxuICAgKiBAcGFyYW0ge2pzb259IHVwZGF0ZURhdGEgRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqIEByZXR1cm5zIHtqc29ufSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICovXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICAvKiogSWYgYm9vayBzdGlsbCBoYXMgdGhlIHN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQga2V5IHRoZW4gcnVuIG1pZ3JhdGUgb24gaXQgKi9cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdXRob3InXSA9IGl0ZW0uc3lzdGVtLmF1dGhvciB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGF0ZSddID0gaXRlbS5zeXN0ZW0uZGF0ZSB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubGFuZ3VhZ2UnXSA9IGl0ZW0uc3lzdGVtLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zcyddID0gaXRlbS5zeXN0ZW0uc2FuTG9zcyB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5teXRob3NSYXRpbmcpIHx8IDBcbiAgICAgICAgLyoqIFJlbmFtZWQvbW92ZWQgZmllbGRzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb250ZW50J10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXNcbiAgICAgICAgLyoqIE5ldyBmaWVsZHMgc2V0IGRlZmF1bHQgdmFsdWVzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kaWZmaWN1bHR5TGV2ZWwnXSA9ICdyZWd1bGFyJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluaXRpYWxSZWFkaW5nJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ua2VlcGVyTm90ZXMnXSA9ICcnXG4gICAgICAgIC8qKiBNb3ZlIGFuZCByZW5hbWUgZ2FpbiBmaWVsZHMgdG8gZ2FpbnMsIGRlZmF1bHQgTmFOIHZhbHVlcyB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUkpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm9jY3VsdCddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4ub2NjdWx0KSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnN0dWR5J10gPSB7XG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5zeXN0ZW0ud2Vla3NTdHVkeVRpbWUpIHx8IDAsXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgdW5pdHM6ICdDb0M3LndlZWtzJ1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c2FuTG9zcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1wcm9wZXJ0aWVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWZsYWdzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS51bml0cyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5ub3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciArIGl0ZW0uc3lzdGVtLm5vdGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1ub3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5rZWVwZXJOb3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICsgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1rZWVwZXJOb3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5ncm91cHNbb10uc2tpbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ3NldHVwJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uaXRlbXNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoWydhcmNoZXR5cGUnLCAnb2NjdXBhdGlvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2Jvb2snXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW12MTAgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICh0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICcnKVxuICAgICkge1xuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAvLyBVcGRhdGUgUG9saXNoIGRvZGdlIHRyYW5zbGF0aW9uIGZyb20gVW5pa2kgdG8gVW5payB0byBtYXRjaCB1cGRhdGUgdG8gbGFuZy9wbC5qc29uXG4gICAgICBpZiAodXBkYXRlRGF0YS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgIDogaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIClcbiAgICAgIHVwZGF0ZURhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5za2lsbE5hbWUgPVxuICAgICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIDE5MjAgPT4gc3RhbmRhcmRcbiAgICAgIC8vIG1kcm4gPT4gbW9kZXJuIC8gbW9kZXJuUHVscFxuICAgICAgLy8gcHVscCA9PiBwdWxwXG4gICAgICAvLyBkZHRzID0+IGRvd25EYXJrZXJUcmFpbHMgLyBkb3duRGFya2VyVHJhaWxzUHVscFxuICAgICAgLy8gZHJrYSA9PiBkYXJrQWdlcyAvIGRhcmtBZ2VzUHVscFxuICAgICAgLy8gZ2xpdCA9PiBnYXNMaWdodFxuICAgICAgLy8gbnZjdCA9PiBpbnZpY3R1c1xuICAgICAgbGV0IGVyYXMgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZXJhcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8ICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZS5zZWxlY3RlZCAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJzE5MjAnOlxuICAgICAgICAgICAgICBlcmFzLnN0YW5kYXJkID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbWRybic6XG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLm1vZGVyblB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdwdWxwJzpcbiAgICAgICAgICAgICAgZXJhcy5wdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZGR0cyc6XG4gICAgICAgICAgICAgIGVyYXMuZG93bkRhcmtlclRyYWlscyA9IHRydWVcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2Rya2EnOlxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2dsaXQnOlxuICAgICAgICAgICAgICBlcmFzLmdhc0xpZ2h0ID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbnZjdCc6XG4gICAgICAgICAgICAgIGVyYXMuaW52aWN0dXMgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZXJhIHRha2UgdGhlIGZpcnN0IG9uZSBvbmx5XG4gICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKGVyYXMpWzBdXG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBlcmFzID0geyBba2V5XTogdHJ1ZSB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgbm8gZXJhcyBkZWZhdWx0IHRvIHN0YW5kYXJkXG4gICAgICAgICAgZXJhcyA9IHsgc3RhbmRhcmQ6IHRydWUgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBDb0M3ID0ge1xuICAgICAgICBjb2NpZEZsYWc6IHtcbiAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgbGFuZzogZ2FtZS5pMThuLmxhbmcsXG4gICAgICAgICAgcHJpb3JpdHk6IDAsXG4gICAgICAgICAgZXJhc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3M/LkNvQzcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNyA9IENvQzdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNyddID0gQ29DN1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnXSA9IENvQzcuY29jaWRGbGFnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPSBDb0M3LmNvY2lkRmxhZy5lcmFzXG4gICAgICAgIHVwZGF0ZURhdGFbJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnXSA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVyYXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZT8uc3JjICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpLm1hdGNoKFxuICAgICAgICAvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispL1xuICAgICAgKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3Byb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjJ10gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0b3IuZWZmZWN0cykpIHtcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLmVmZmVjdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0c1trXS5pY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTW9uZXRhcnkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdD8ubW9uZXRhcnlTeW1ib2wgPyBhY3Rvci5zeXN0ZW0uY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sIDogJyQnXG4gICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddLnRvU3RyaW5nKCkudHJpbSgpID09PSAnJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSAnJCdcbiAgICAgIH1cbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpID8gcGFyc2VJbnQoYWN0b3Iuc3lzdGVtLmNyZWRpdC5tdWx0aXBsaWVyKSA6IDFcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zcGVudCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVudFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0c0RldGFpbHMnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuYXNzZXRzRGV0YWlsc1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW5kaW5nTGV2ZWwnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuc3BlbmRpbmdMZXZlbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmNhc2gnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuY2FzaFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0cyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpXG4gICAgICBpZiAobXVsdGlwbGllciAhPT0gMSkge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSkge1xuICAgICAgICAgIHZhbHVlLmNhc2hWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5jYXNoVmFsdWVcbiAgICAgICAgICB2YWx1ZS5hc3NldHNWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5hc3NldHNWYWx1ZVxuICAgICAgICAgIHZhbHVlLnNwZW5kaW5nVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuc3BlbmRpbmdWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jcmVkaXQnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5lbmNvdW50ZXJlZENyZWF0dXJlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiBhY3Rvci5zeXN0ZW0uZW5jb3VudGVyZWRDcmVhdHVyZXMpIHtcbiAgICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAwKSB7XG4gICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA/PyAwLFxuICAgICAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZ3JvdXBzKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgICB0b3RhbExvc3M6IGdyb3Vwc1tuYW1lXSxcbiAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJ10gPSBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1lbmNvdW50ZXJlZENyZWF0dXJlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAodHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXMgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5jb25kaXRpb25zID09PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudW5jb25zY2lvdXMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5kZWFkLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmluZGVmSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmNyaXRpY2FsV291bmRzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udW5jb25zY2lvdXM/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnVuY29uc2Npb3VzLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5keWluZz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmcudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZHlpbmcudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQ/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8ucHJvbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy50ZW1wb0luc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmluZGVmSW5zYW5lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYWN0b3IuZWZmZWN0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBlZmZlY3RzID0gYWN0b3IuZWZmZWN0c1xuICAgICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBlZmZlY3RzLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbaV1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZWZmZWN0Lmljb24ubWF0Y2goXG4gICAgICAgICAgICAgIC9cXC8oaGFuZ2luZy1zcGlkZXJ8dGVudGFjbGVzLXNrdWxsfGFybS1zbGluZ3xoZWFydC1iZWF0c3x0b21ic3RvbmV8a25vY2tlZC1vdXQtc3RhcnN8ZmFsbGluZ3xza3VsbHx1bmNvbnNjaW91cylcXC4vXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbGV0IHN0YXR1c0lkID0gJydcbiAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmdpbmctc3BpZGVyJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3RlbXBvSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0ZW50YWNsZXMtc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnaW5kZWZJbnNhbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FybS1zbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdjcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhcnQtYmVhdHMnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZHlpbmcnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbWJzdG9uZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZGVhZCdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAna25vY2tlZC1vdXQtc3RhcnMnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuY29uc2Npb3VzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3VuY29uc2Npb3VzJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWxsaW5nJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3Byb25lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc3RhdHVzSWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCAhPT0gc3RhdHVzSWQpIHtcbiAgICAgICAgICAgICAgICAgIGVmZmVjdHNbaV0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGVmZmVjdCwge1xuICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0lkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGVmZmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c3RhdHVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ25wYyddLmluY2x1ZGVzKGFjdG9yLnR5cGUpICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbCddID0ge1xuICAgICAgICAgIGNoZWNrUGFzc2VkOiBudWxsLFxuICAgICAgICAgIGNoZWNrRmFpbGxlZDogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRhY2tzUGVyUm91bmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRhY2tzUGVyUm91bmQnXSA9IDFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5zYW4gIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvbmVGaWZ0aFNhbml0eSA9IE1hdGguY2VpbChhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5J10gPSAnIC8gJyArIG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJ10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLm1heCA9PT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5ub3RlcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm5vdGVzJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlTWFjcm9BcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVGFibGVBcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGxldCBpbWFnZSA9IFN0cmluZyh0YWJsZS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGFibGUucmVzdWx0cykpIHtcbiAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEucmVzdWx0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHMgPSB0YWJsZS5yZXN1bHRzXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YS5yZXN1bHRzW2tdLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVG9rZW5BcnR3b3JrICh0b2tlbiwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRva2VuLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbi8qKlxuICogbmFtZUNoYXJhY3RlcnMgbGlzdCBvZiBjaGFyYWN0ZXJzIHRoYXQgY2FuIGJlIHBhcnQgb2YgYSBbXSBmb3IgY2hhcmFjdGVyLCBza2lsbCwgb3Igd2VhcG9uIG5hbWVzIHVzZWQgaW4gYnJhY2tldCBleHByZXNzaW9uLlxuICpcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRlc2NyaXB0aW9uXCIgbGFuZyBrZXkgdG8gc2hvdyBpbiB0aGUgbGFuZ3VhZ2Ugc2VsZWN0aW9uIGRpYWxvZyBib3guXG4gKiBcImtleXMuPGxhbmd1YWdlPi5kYk5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gRGFtYWdlIEJvbnVzIGUuZy4gREI6IFwiZGJOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hcm1vck5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gQXJtb3VyIEJvbnVzIGUuZy4gQXJtb3I6IFwiYXJtb3JOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIGF0dGFja3MgZS5nLiBBdHRhY2tzIFBlciBSb3VuZDogXCJhdHRhY2tzUGVyUm91bmROb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zYW5Mb3NzTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBzYW5pdHkgbG9zcyBlLmcuIFNBTiBsb3NzOiBcInNhbkxvc3NOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgZGFtYWdlIGJvbnVzIGluIGF0dHJpYnV0ZXMgYW5kIHdlYXBvbiBkYW1hZ2UgZS5nLiBEQjogXCJmdWxsZGJcIiAvIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiZnVsbGRiXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5oYWxmZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgaGFsZiBkYW1hZ2UgYm9udXMgaW4gd2VhcG9uIGRhbWFnZSBlLmcuIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiaGFsZmRiXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5uZXdDb21iYXRIZWFkZXJcIiBJZiB0aGVyZSBpcyBubyBjb21iYXQgLyB3ZWFwb24gc2VjdGlvbiwgYWRkIHRoaXMgc2VjdGlvbiB3ZXJlIGl0IHByb2JhYmx5IGlzLCB0aGlzIG5lZWRzIHRvIG1hdGNoZWQgYnkgXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkNvbWJhdHNcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Ta2lsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBza2lsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkxhbmdhdWdlc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIGxhbmd1YWdlcyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uU3BlbGxzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgc3BlbGxzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbmRndW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgaGFuZGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ucmlmbGVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgcmlmbGUgdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNtYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBzdWJtYWNoaW5lIGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubWFjaGluZUd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBtYWNoaW5lIGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubGF1bmNoZWRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgbGF1bmNoZWQgdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmV4YW1wbGVcIiBTdHJpbmcgdGhhdCBzaG91bGQgc2hvdyBhcyBhIHBsYWNlaG9sZGVyIGV4YW1wbGUuXG4gKlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hZ2VcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGFnZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5vY2N1cGF0aW9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBvY2N1cGF0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG9jY3VwYXRpb24+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zdHJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHN0cmVuZ3RoIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHN0cj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmNvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29uc3RpdHV0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGNvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNpelwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2l6ZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzaXo+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5pbnRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGludGVsbGlnZW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxpbnQ+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5wb3dcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHBvd2VyIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHBvdz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmRleFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGV4dGVyaXR5IGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRleD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFwcFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXBwZWFyYW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhcHA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5lZHVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGVkdWNhdGlvbiBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxlZHU+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNhbml0eSBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmhwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBoaXQgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxocD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm1wXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtYWdpYyBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG1wPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYnVpbGRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGJ1aWxkIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxidWlsZD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFybW9yXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkYW1hZ2UgYm9udXMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRiPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hcm1vck5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm1vdlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbW92ZW1lbnQgcmF0ZSBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bW92Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubGNrXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBsdWNrIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxsY2s+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGF0dGFja3MgcGVyIHJvdW5kLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGF0dGFja3NQZXJSb3VuZD4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2FuTG9zc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuIGxvc3MgbWluL21heCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzYW5Mb3NzPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5zYW5Mb3NzTm9uZVwiIHRoZW4gbm9uZS5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ud2VhcG9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIHdlYXBvbiA8bmFtZT4sIG9wdGlvbmFsIDxwZXJjZW50YWdlPiwgYW5kIDxkYW1hZ2U+LiBEYW1hZ2UgY2FuIGNvbnRhaW4gXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgYW5kIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25Eb2RnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gZG9kZ2Ugc2tpbGwsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4gYW5kIDxwZXJjZW50YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2tpbGxcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNraWxsIHNlY3Rpb24gc2tpbGwgbmFtZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5ndWVzc1N0YXJ0Q29tYmF0XCIgUmVndWxhciBleHByZXNzaW9uIGlmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGZpbmQgdGhlc2UgYXJlIGxpa2VseSB0byBiZSB0aGUgZmlyc3Qgd2VhcG9uIG5hbWUsIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIGlzIHRoZW4gYWRkZWQgYmVmb3JlIGl0IHRvIGdldCB0aGUgZ3JvdXBzXG4gKlxuICogVGhlc2Ugc2hvdWxkIG5vdCBiZSBlZGl0ZWQgYXMgdGhleSBzaG91bGQgd29yayBhcyBpc1xuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5uYW1lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zZWN0aW9uc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzcGxpdCB0ZXh0IGludG8gY29tYmF0LCBza2lsbCwgbGFuZ3VhZ2UsIGFuZCBzcGVsbHMgc2VjdGlvblxuICpcbiAqIElmIHRoZXJlIGlzIG5ldyBmdW5jdGlvbmFsaXR5IGNoZWNrIGZvciB0aGlzIHN0cmluZyBpbiB0aGUgdHJhbnNsYXRpb25zIC8ga2V5cyBmb3IgeW91ciBsYW5ndWFnZSBcIk5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRFwiXG4gKi9cbmNvbnN0IG5hbWVDaGFyYWN0ZXJzID1cbiAgJ1xcXFx1MzAwMFxcXFx1MzQwMC1cXFxcdTREQkZcXFxcdTRFMDAtXFxcXHU5RkZGXFxcXHdcXFxcKFxcXFwpXFxcXC1cXFxcLyZcIlxcJycgK1xuICBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKFxuICAgICdhzIFlzIFpzIFvzIHDoMOow6zDssO5w4DDiMOMw5LDmcOhw6nDrcOzw7rDvcOBw4nDjcOTw5rDncOiw6rDrsO0w7vDgsOKw47DlMObw6PDscO1w4PEgMORw5XDpMOrw6/DtsO8w7/DhMOLw4/DlsOcxbjDoMOow6fDh8Ofw5jDuMOFw6XDhsOmxZPigJzigJ3Cq8K7xIXEh8SZxYLFhMOzxZvFusW8xITEhsSYxYHFg8OTxZrFucW7J1xuICApXG5cbmNvbnN0IGtleXMgPSB7XG4gIGVuOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkVuZ2xpc2gnLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQicgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18aGFsZicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdza2lsbHMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ2xhbmd1YWdlcycgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgKyAnUmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCcgKyAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgYWdlIDI3XFxuU1RSIDc1IENPTiA2MCBTSVogODAgREVYIDcwIEFQUCA2MCBJTlQgODBcXG5QT1cgNTAgRURVIDg1IFNBTiA1NSBIUCAxNCBEQjogMUQ0XFxuQnVpbGQ6IDEgTW92ZTogNyBNUDogMTAgTHVjazogNDAgQXJtb3I6IDFcXG5BdHRhY2tzIHBlciByb3VuZDogMyBTQU4gbG9zczogMWQ0LzFkOFxcbkNvbWJhdFxcbkJpdGUgNTAlICgyNS8xMCksIGRhbWFnZSAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYW1hZ2UgMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRhbWFnZSAxRDgrMVxcbkRvZGdlIDUwJSAoMjUvMTApXFxuU2tpbGxzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWFnZXM6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNwZWxsczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gIGRlOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3Lkdlcm1hbicsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZGljZVNob3J0OiAnd3xkJyxcbiAgICBmdWxsZGI6ICcoJyArICdTY2hhZGVuc2JvbnVzfFNiJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgU2NoYWRlbnNib251c3xTYi8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnS2FtcGZ8QW5ncmlmZjp8QU5HUklGRkUnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnS2FtcGYnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnRmVydGlna2VpdGVuJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdTcHJhY2hlbicgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnWmF1YmVyJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIEd1bnxSZXZvbHZlcnxQaXN0b2xlfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdHZXdlaHJ8U2Nocm90ZmxpbnRlfENhcmFiaW5lcnxLYXJhYmluZXJ8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZWZhbnRlbicgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyYW5hdGV8RHluYW1pdCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdWb3JuYW1lIE5hY2huYW1lXFxuQWx0ZXI6IDI5XFxuQmVydWY6IEVpbiBCZXJ1ZlxcblNUIDUwXFxuTUEgNjBcXG5LTyA2MFxcbkdFIDYwXFxuR1IgNTVcXG5FUiA2NVxcbklOIDgwXFxuQkkgODVcXG5UcmVmZmVycHVua3RlOiAxMVxcbkdlaXN0aWdlIFN0YWJpbGl0w6R0OiA2MFxcblNjaGFkZW5zYm9udXM6IDBcXG5TdGF0dXI6IDBcXG5NYWdpZXB1bmt0ZTogMTJcXG5CZXdlZ3VuZ3N3ZWl0ZTogOFxcblxcbkthbXBmXFxuQW5ncmlmZmU6IDFcXG5IYW5kZ2VtZW5nZSAzMCUgKDE1LzYpLCBTY2hhZGVuIDFEM1xcbk1lc3NlciAzMCUgKDE1LzYpLCBTY2hhZGVuIDFENFxcbkF1c3dlaWNoZW4gMzAlICgxNS82KVxcblxcbkZlcnRpZ2tlaXRlbjogQW50aHJvcG9sb2dpZSA3MCUgKDM1LzE0KSwgQXJjaMOkb2xvZ2llIDMwJSAoMTUvNiksIEJpYmxpb3RoZWtzbnV0enVuZyA1MCUgKDI1LzEwKSwgRXJzdGUgSGlsZmUgNTAlICgyNS8xMCksIEZpbmFuemtyYWZ0IDQwJSAoMjAvOCksIEdlc2NoaWNodGUgNjAlICgzMC8xMiksIEtsZXR0ZXJuIDUwJSAoMjUvMTApXFxuXFxuU3ByYWNoZW46IEVuZ2xpc2NoIDg1JSAoNDIvMTcpOyBEZXV0c2NoIDQ1JSAoMjIvOSksIExhdGVpbiA0NSUgKDIyLzkpJ1xuICB9LFxuICBwbDoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5Qb2xpc2gnLFxuICAgIGRiTm9uZTogJ2JyYWsnLFxuICAgIGFybW9yTm9uZTogJ2JyYWsnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdicmFrJyxcbiAgICBzYW5Mb3NzTm9uZTogJ2JyYWsnLFxuICAgIGRpY2VTaG9ydDogJ2t8ZCcsXG4gICAgZnVsbGRiOiAnKCcgKyAnTW9keWZpa2F0b3IgT2JyYcW8ZcWEfE1PJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgTU98TU8vMicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ1dhbGthfEF0YWtpJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ1dhbGthJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ1VtaWVqxJl0bm/Fm2NpJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdKxJl6eWtpJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYWtsxJljaWEnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgUGlzdG9sZXR8UmV3b2x3ZXJ8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdLYXJhYmlufFN0cnplbGJhfFdpYXRyw7N3a2F8R2FyYW5kfEdhdWdlIHxMZWUtRW5maWVsZHxTdHJ6ZWxiYSBuYSBzxYJvbmllJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1Bpc3RvbGV0IG1hc3p5bm93eXxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb8WCb3Rvd2F8R3JhbmF0fExhc2thIGR5bmFtaXR1fER5bmFtaXQnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnUHJ6eWvFgmFkb3dhIHBvc3RhxIcsIDI3IGxhdFxcbkJpYmxpb3Rla2FyelxcblMgNzUgS09OIDYwIEJDIDgwIFpSIDcwIFdZRyA2MCBJTlQgODBcXG5NT0MgNTAgV1lLIDg1IFAgNTUgUFcgMTQgTU86IDFENFxcbktyemVwYTogMSBSdWNoOiA3IFBNOiAxMCBTemN6xJnFm2NpZTogNDAgUGFuY2VyejogMVxcbkF0YWtpIHcgcnVuZHppZTogMyBVdHJhdGEgUG9jenl0YWxub8WbY2k6IDFLNC8xSzhcXG5XYWxrYVxcblVncnl6aWVuaWUgNTAlICgyNS8xMCksIG9icmHFvGVuaWEgMUs2XFxuV2Fsa2EgMzAlICgxNS82KSwgb2JyYcW8ZW5pYSAxSzNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgb2JyYcW8ZW5pYSAxSzgrMVxcblVuaWsgNTAlICgyNS8xMClcXG5VbWllasSZdG5vxZtjaVxcblRyZXN1cmEgWndpZXJ6xIV0IDU1JSwgVXJvayBPc29iaXN0eSAzMCUsIFBpZXJ3c3phIFBvbW9jIDI1JSwgVWtyeXdhbmllIDIwJSxcXG5OYXPFgnVjaGl3YW5pZSA1MCUsIE1lZHljeW5hIDQ1JSwgUHJ6ZWtvbnl3YW5pZSAyNSUsIFBzeWNob2xvZ2lhIDc1JSxcXG5OYXVrYSAoQXN0cm9ub21pYSkgOTAlLCBOYXVrYSAoQm90YW5pa2EpIDM1JSwgTmF1a2EgKFpvb2xvZ2lhKSAxMCUsXFxuU3Bvc3RyemVnYXdjem/Fm8SHIDM1JSwgVWtyeXdhbmllIDEwJVxcbkrEmXp5a2k6IEFuZ2llbHNraSA4MCUsIEVrbG8gNSUuXFxuWmFrbMSZY2lhOiBQcnp5endhbmllIE5QQywgT2Rlc8WCYW5pZSBOUEMuJ1xuICB9LFxuICBmcjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5GcmVuY2gnLFxuICAgIGRiTm9uZTogJ0FjdW5lJyxcbiAgICBhcm1vck5vbmU6ICcoPzpBY3VuZXxhdWN1bmUpJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnQWN1bmUnLFxuICAgIHNhbkxvc3NOb25lOiAnQWN1bmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfEJvbnVzIGF1eCBkb21tYWdlc3xJbXBhY3R8SW1wJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgSW1wfEltcC8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnQ29tYmF0fEFybWVzfEF0dGFxdWVzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdDb21ww6l0ZW5jZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1ZXM/JyArICcpXFxcXHMqWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdTb3J0aWzDqGdlc1xcXFxzKnxTb3J0cycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGV0fERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOiAnKD88dHlwZT4nICsgJ0NhcmFiaW5lfExlZS1FbmZpZWxkfEZ1c2lsJyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU01HfFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN8TWl0cmFpbGxldXNlJyArICcpJyxcbiAgICBsYXVuY2hlZDpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0Jvb21lcmFuZyBkZSBndWVycmV8SmF2ZWxpbmV8UGllcnJlfFNodXJpa2VufELDonRvbiBkZSBkeW5hbWl0ZXxDb2NrdGFpbCBNb2xvdG92fEdyZW5hZGUgw6AgbWFpbnxNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICtcbiAgICAgICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCAyNyBhbnNcXG5GT1IgNzUgQ09OIDYwIFRBSSA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVSA1MCDDiURVIDg1IFNBTiA1NSBQViAxNCBCRDogMUQ0XFxuQ2FycnVyZTogMSBNdnQ6IDcgUE06IDEwIENoYW5jZTogNDAgQXJtdXJlOiAxXFxuQXR0YXF1ZXMgcGFyIHJvdW5kIDMgUGVydGUgZGUgU0FOOiAxZDQvMWQ4XFxuQXR0YXF1ZXNcXG5CaXRlIDUwJSAoMjUvMTApLCBkb21tYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRvbW1hZ2UgMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRvbW1hZ2UgMUQ4KzFcXG5Fc3F1aXZlciA1MCUgKDI1LzEwKVxcbkNvbXDDqXRlbmNlc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VlOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Tb3J0aWzDqGdlczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gIGVzOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlNwYW5pc2gnLFxuICAgIGRiTm9uZTogJ25pbmd1bmEnLFxuICAgIGFybW9yTm9uZTogJ25pbmd1bmEnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICduaW5ndW5vJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vJyxcbiAgICBmdWxsZGI6ICcoJyArICdCRHxiZHxib25pZmljYWNpw7NuIGRlIGRhw7FvJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXxtZWRpbyBkYcOxb3xtaXRhZHxkYcOxbyBhIGxhIG1pdGFkJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnQ29tYmF0ZXxBcm1hcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXRlJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0hhYmlsaWRhZGVzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdJZGlvbWFzfExlbmd1YWplc3xMZW5ndWFzJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdDb25qdXJvc3xIZWNoaXpvcycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGF8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSaWZsZXxDYXJhYmluYXxMZWUtRW5maWVsZHxDYXphIEVsZWZhbnRlc3xGdXNpbHxFc2NvcGV0YXxHYWxnYXxSZWNvcnRhZGEnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3ViZnVzaWx8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xBbWV0cmFsbGFkb3JhJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyYW5hZGF8RGluYW1pdGEnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGHDsW9zXFxuRlVFIDc1IENPTiA2MCBUQU0gODAgREVTIDcwIEFQQSA2MCBJTlQgODBcXG5QT0QgNTAgRURVIDg1IENPUiA1NSBQViAxNCBCRDogMUQ0XFxuQ29ycHVsZW5jaWE6IDEgTW92aW1pZW50bzogNyBQTTogMTAgU3VlcnRlOiA0MCBBcm1hZHVyYTogMVxcbk7Dum1lcm8gZGUgQXRhcXVlcyAzIFDDqXJkaWRhIGRlIGNvcmR1cmE6IDFkNC8xZDhcXG5Db21iYXRlXFxuQml0ZSA1MCUgKDI1LzEwKSwgZGHDsW8gMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGHDsW8gMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRhw7FvIDFEOCsxXFxuRXNxdWl2YXIgNTAlICgyNS8xMClcXG5IYWJpbGlkYWRlc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuSWRpb21hczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuQ29uanVyb3M6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICAnemgtVFcnOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlRyYWRpdGlvbmFsQ2hpbmVzZScsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCfOWCt+Wus+WKoOWAvCcgKyAnKScsXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18aGFsZicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6XG4gICAgICAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrc3zmiLDprKXmioDog7185oiw6ayl5YiX6KGofOatpuWZqCcgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczpcbiAgICAgICdcXG4oPzonICsgJyg/OlNraWxsc3zmioDog73liJfooagpJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWFnZXN86Kqe6KiAJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHN85ZKS5paH5YiX6KGofOWSkuaWhycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyDpgYLnmbzmp418XFxcXC4yMuefreWPo+iHquWLleaJi+anjXxcXFxcLjI155+t5Y+j5omL5qeNKOWWrueuoSl8XFxcXC4zMuaIljdcXFxcLjY1bW3lt6bovKrmiYvmp418XFxcXC4zMuaIljdcXFxcLjY1bW3oh6rli5XmiYvmp418XFxcXC4zNTcgTWFnbnVt5bem6Lyq5omL5qeNfFxcXFwuMzjmiJY5bW3lt6bovKrmiYvmp418XFxcXC4zOOiHquWLleaJi+anjXzosp3pm7floZRNOXzmoLzmtJvlhYsxN3w5bW3oh6rli5XmiYvmp4186a2v5qC8UDA4fFxcXFwuNDHlt6bovKrmiYvmp418XFxcXC40NOmmrOagvOWNl+W3pui8quaJi+anjXxcXFxcLjQ15bem6Lyq5omL5qeNfFxcXFwuNDXoh6rli5XmiYvmp4185rKZ5ryg5LmL6be5fEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ+atpeanjXzljaHos5Pmp4185Y2K6Ieq5YuV5q2l5qeNfOeNteixoeanjXxSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29ufOihnemLkuanjScgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfOapn+anjScgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRl54iG54K454mpfOaJi+amtOW9iHzph43mrablmagnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAn56S656+E6KeS6ImyLCDlubTpvaEgMjdcXG7lipvph48gNzUg6auU6LOqIDYwIOmrlOWeiyA4MCDmlY/mjbcgNzAg5aSW6LKOIDYwIOaZuuWKmyA4MFxcbuaEj+W/lyA1MCDmlZnogrIgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG7pq5TmoLw6IDEgTW92ZTogNyBNUDogMTAg5bm46YGLOiA0MCDorbfnlLI6IDFcXG7mlLvmk4rmrKHmlbg6IDMg55CG5pm65Zaq5aSxOiAxZDQvMWQ4XFxu5oiw6ayl5YiX6KGoXFxu5ZKsIDUwJSAoMjUvMTApLCDlgrflrrMgMUQ2XFxu56m65omLIDMwJSAoMTUvNiksIOWCt+WusyAxRDNcXG7miYvmp40gNDAlICgyMC84KSwg5YK35a6zIDFEOCsxXFxu6ZaD6YG/IDUwJSAoMjUvMTApXFxu5oqA6IO95YiX6KGoXFxu5YuV54mp6aa06aSKIDU1JSwg5Y+W5oKFIDMwJSwg5oCl5pWRIDI1JSwg5r2b6KGMIDIwJSxcXG7ogYbogb0gNTAlLCDol6XlrbggNDUlLCDnsr7npZ7liIbmnpAgMjUlLCDlv4PnkIblrbggNzUlLFxcbuenkeWtuCAo5Y+45rOV56eR5a24KSA5MCUsIOenkeWtuCAo5a+G56K85a24KSAzNSUsIFxcbuWBteafpSAzNSUsIOWWrOijnSAxMCVcXG7oqp7oqIA6IOeyteiqniA4MCUsIOiugOWUhyA1JS5cXG7lkpLmloc6IOWPrOWWmiBOUEMsIOaMh+aPriBOUEMuJ1xuICB9XG59XG5cbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcbiAgZW46IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2UnICsgJyhcXFxccyo6KT9cXFxccysoPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0laJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ1NBTnxTYW5pdHknICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnSFB8SGl0IHBvaW50cycgKyAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5lbi5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZW4uZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDogJyg/PCFbYS16XSknICsgJ0J1aWxkJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtb3InICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmVuLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVjaycgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmVuLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1Nhbml0eSBsb3NzfFNBTiBsb3NzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5lbi5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnZGFtYWdlJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5lbi5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdEb2RnZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ0ZpZ2h0aW5nfEZpcmVhcm1zfEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGRlOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnQWx0ZXInICsgJyhcXFxccyo6KT9cXFxccysoPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjogJ1ssXFxcXHNdKicgKyAnQmVydWYnICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1QnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdLTycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ0dSJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU4nICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNQScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0dFJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnRVInICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdCSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnZ1N8U1RBfEdlaXN0aWdlIFN0YWJpbGl0w6R0JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnVFB8VHJlZmZlcnB1bmt0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWVwdW5rdGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5kZS5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfER8V1xcXFxkKyk/fCcgK1xuICAgICAga2V5cy5kZS5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTdGF0dXJ8U3RhdC4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ1BhbnplcnVuZycgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZGUuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdCV3xCZXdlZ3VuZ3N3ZWl0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0dsw7xjaycgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQW5ncmlmZmUgcHJvIFJ1bmRlfEFuZ3JpZmZlfFBybyBSdW5kZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5kZS5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTdGFiaWxpdMOkdHN2ZXJsdXN0JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5kZS5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkW0RXXT9bK1xcXFxkXSpcXFxcL1xcXFxkW0RXXT9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnU2NoYWRlbicgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK3d8ZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5kZS5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkfHcpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0F1c3dlaWNoZW4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLiw7XT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICtcbiAgICAgICdBbmdyaWZmZXxIYW5kZ2VtZW5nZXxOYWhrYW1wZnxGYXVzdGZldWVyd2FmZmV8QmVpw59lbicgK1xuICAgICAgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIHBsOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKyknICsgJ1xcXFxzKyg/OicgKyAnbGF0YXxsYXR8cm9rJyArICcpWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOiAnWyxcXFxcc10qJyArICdaYXfDs2QnICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnUycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ0JDJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnTU9DJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnWlInICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdXWUcnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdXWUsnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1B8UG9jenl0YWxub8WbxIcnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQV3xQdW5rdHkgV3l0cnp5bWHFgm/Fm2NpJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQdW5rdHkgTWFnaWknICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5wbC5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfER8S1xcXFxkKyk/fCcgK1xuICAgICAga2V5cy5wbC5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOiAnKD88IVthLXpdKScgKyAnS3J6ZXBhJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnUGFuY2VyeicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMucGwuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnUnVjaCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdTemN6xJnFm2NpZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXRha2kgdyBydW5kemllfCMgQXRha2knICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMucGwuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnVXRyYXRhIFBvY3p5dGFsbm/Fm2NpfHV0cmF0YSBQJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5wbC5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkW0RLXT9bK1xcXFxkXSpcXFxcL1xcXFxkW0RLXT9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnb2JyYcW8ZW5pYScgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2t8ZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5wbC5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdVbmlrJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ1dhbGthfEJyb8WEIFBhbG5hfEJpamF0eWthfFVncnl6aWVuaWUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMucGwuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGZyOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2FucycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGT1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdUQUknICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1UnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICfDiURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCEoW2Etel18ZGVcXFxccykpKD86JyArXG4gICAgICAnU0FOfFNhbnTDqSBNZW50YWxlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFZ8UG9pbnRzIGRlIHZpZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UG9pbnRzIGRlIG1hZ2llJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZnIuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmZyLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQ2FycnVyZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0FybXVyZXxQcm90ZWN0aW9uJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZnIuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNdnR8TW91dmVtZW50fETDqXBsYWNlbWVudCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0NoYW5jZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YXF1ZXMgcGFyIHJvdW5kJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmZyLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BlcnRlIGRlIFNhbnTDqSBtZW50YWxlfFBlcnRlIGRlIFNBTicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZnIuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RvbW1hZ2V8ZMOpZ8OidHMnICtcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdFc3F1aXZlcj8nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdBdSBjb250YWN0fMOAIGRpc3RhbmNlfENvbWJhdCByYXBwcm9jaMOpfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGVzOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2Fbw7HDkV1vcycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2N1cGFjacOzbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGVUUnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdUQU0nICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT0QnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVMnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUEEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnQ09SfENvcmR1cmEnICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BWfFB1bnRvcyBkZSB2aWRhfFBcXFxcLiA/VlxcXFwuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQdW50b3MgTcOhZ2ljb3N8UHVudG9zIGRlIE1hZ2lhJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZXMuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmVzLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQ29ycHVsZW5jaWEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1hZHVyYScgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZXMuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92aW1pZW50bycgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdTdWVydGUnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ07Dum1lcm8gZGUgQXRhcXVlcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5lcy5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQw6lyZGlkYSBkZSBjb3JkdXJhfFDDqXJkaWRhIGRlIENPUicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZXMuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ2Rhw7FvJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5lcy5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdFc3F1aXZhcicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0NvbWJhdGlyfEFybWFzIGRlIGZ1ZWdvfFBlbGVhfE1vcmRpc2NvJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICAnemgtVFcnOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnYWdlfOW5tOm9oScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFJ85Yqb6YePJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OfOmrlOizqicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1NJWnzpq5TlnosnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlR85pm65YqbJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XfOaEj+W/lycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWHzmlY/mjbcnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFB85aSW6LKOJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVfOaVmeiCsicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU0FOfFNhbml0eXznkIbmmbonICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdIUHxIaXQgcG9pbnRzfOeUn+WRvScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWMgcG9pbnRzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQnVpbGR86auU5qC8JyArICcoXFxcXHMqOik/XFxcXHMqKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtb3J86K2355SyJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKig/PGFybW9yPicgK1xuICAgICAga2V5c1snemgtVFcnXS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZlJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0x1Y2t85bm46YGLJyArICcoXFxcXHMqOik/XFxcXHMqKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3N85pS75pOK5qyh5pW4fCMg5pS75pOKJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1Nhbml0eSBsb3NzfFNBTiBsb3NzfOeQhuaZuuWWquWksXxTQU7lgLzmkI3lpLF8U0FO5YC85Zaq5aSxfOaJo1NBTicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RhbWFnZXzlgrflrrMnICtcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5c1snemgtVFcnXS5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdEb2RnZXzploPpgb986ZaD6LqyJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAn6L+R5oiw5oqA6IO9fOWwhOaTiuaKgOiDvXxCcmF3bHxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB7XG4gIHN0YXRpYyBjaGVja0xhbmd1YWdlIChsYW5nID0gbnVsbCkge1xuICAgIGlmICghbGFuZykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmICh0eXBlb2YgdHJhbnNsYXRpb25zW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFuZyA9ICdlbidcbiAgICB9XG4gICAgcmV0dXJuIGxhbmdcbiAgfVxuXG4gIHN0YXRpYyBnZXRFeGFtcGxlVGV4dCAobGFuZykge1xuICAgIGxldCBleGFtcGxlID0ga2V5cy5lbi5leGFtcGxlXG4gICAgaWYgKHR5cGVvZiBrZXlzW2xhbmddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZXhhbXBsZSA9IGtleXNbbGFuZ10uZXhhbXBsZVxuICAgIH1cbiAgICByZXR1cm4gZXhhbXBsZVxuICB9XG5cbiAgc3RhdGljIGdldFRyYW5zbGF0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0ge31cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBrZXlzKSB7XG4gICAgICBvdXRwdXRba2V5XSA9IGtleXNba2V5XS5kZXNjcmlwdGlvblxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBzdGF0aWMgZ2V0S2V5cyAobGFuZykge1xuICAgIHJldHVybiBrZXlzW2xhbmddIHx8IGtleXMuZW5cbiAgfVxuXG4gIHN0YXRpYyBnZXRSZWd1bGFyRXhwcmVzc2lvbnMgKGxhbmcpIHtcbiAgICByZXR1cm4gdHJhbnNsYXRpb25zW2xhbmddIHx8IHRyYW5zbGF0aW9ucy5lblxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucGFyc2VkID0ge31cbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSAnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc051bWJlciAoKSB7XG4gICAgcmV0dXJuICduJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc1N0cmluZyAoKSB7XG4gICAgcmV0dXJuICdzJ1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFJlZ0V4LCBnZXQgUmVnRXhwIG9iamVjdCBpZiBub3QgY3VycmVudGx5IGEgUmVnRXhwIG9iamVjdFxuICAgKiBAcGFyYW0ge01peGVkfSByZWdleCBSZWdFeHAgb3Igc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgaWYgc3RyaW5nIHdhcyBzdXBwbGllZCBpbiByZWdleCBsaXN0IG9mIG1vZGlmaWVycyB0byBhZGQgdG8gdGhlIFJlZ0V4cFxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZ2V0UmVnRXggKHJlZ2V4LCBtb2RpZmllcnMgPSAnaXUnKSB7XG4gICAgaWYgKHJlZ2V4LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnUmVnRXhwJykge1xuICAgICAgcmV0dXJuIHJlZ2V4XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBtb2RpZmllcnMpXG4gIH1cblxuICAvKipcbiAgICogY2xlYW5TdHJpbmcsIHJlbW92ZXMgbmV3IGxpbmUgYW5kIGNhcnJpZXIgcmV0dXJuIGNoYXJhY3RlciBhbmQgbGF0ZXJhbCBzcGFjZXMgZnJvbSBhIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBjbGVhbmVkIHN0cmluZ1xuICAgKi9cbiAgY2xlYW5TdHJpbmcgKHMpIHtcbiAgICByZXR1cm4gc1xuICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMqXFwuP1xccypcXC4/JC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIHRyYW5zbGF0ZVJvbGwsIHRyYW5zbGF0ZXMgbGFuZ3VhZ2Ugc3BlY2lmaWMgc2hvcnRmb3JtIG9mIGRpY2UgKEQpIGluIHJvbGxzXG4gICAqIEV4YW1wbGUgZm9yIEdlcm1hbiByb2xsczogMVc0ID0+IDFENC5cbiAgICogRGljZSBzaG9ydGZvcm0gaXMgY29uZmlndXJlZCB1c2luZyBrZXlzLmRpY2VTaG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgcm9sbCB0byBiZSB0cmFuc2xhdGVkXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSB0cmFuc2xhdGVkIHJvbGxcbiAgICovXG4gIHRyYW5zbGF0ZVJvbGwgKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gc1xuICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzLmRpY2VTaG9ydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgJyg/PG4xPlxcXFxkKyknICsgdGhpcy5rZXlzLmRpY2VTaG9ydCArICcoPzxuMj5cXFxcZCspJyxcbiAgICAgICAgJ2l1ZydcbiAgICAgIClcbiAgICAgIHJldHVybiBzLnJlcGxhY2UocmVnRXgsICckPG4xPkQkPG4yPicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHRvSFRNTCwgY29udmVydHMgYSBzdHJpbmcgdG8gSFRNTCBzdHJpcGluZyBvdXQgZW1wdHkgbGluZXMgb3IgbGluZXMgdGhhdCBjb250YWluIGp1c3QgLCBvciAuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICovXG4gIHRvSFRNTCAocykge1xuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzID0gc1xuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHNdKyQvLCAnJykpXG4gICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dClcbiAgICAgIC5qb2luKCc8L3A+PHA+JylcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZXhwZWN0cyBhIGtleSBmcm9tIHRoaXMucmVnRXggd2lsbCBhdHRlbXB0IHRvIG1hdGNoIHRoZSB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWdFeEtleSBrZXkgaW4gdGhpcy5yZWdFeFxuICAgKiBAcGFyYW0ge0pTT059XG4gICAqIC0gcmVtb3ZlRnJvbVRleHQgcmVtb3ZlIGZyb20gdGhpcy50ZXh0XG4gICAqIC0gc2F2ZUtleXMgYWRkIGdyb3VwIGtleXMgdG8gdGhpcy5wYXJzZWRcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxuICAgKiAtIHRleHQgSWYgc2V0IHVzZSB0aGlzIGluc3RlYWQgb2YgdGhpcy50ZXh0XG4gICAqIC0gcmVxdWlyZWRHcm91cCBJZiBub3QgZmFsc2UgcmVxdWlyZSBzcGVjaWZpZWQga2V5IGluIFJlZ0V4cCBncm91cHNcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XG4gICAqL1xuICBjaGVjayAoXG4gICAgcmVnRXhLZXksXG4gICAge1xuICAgICAgcmVtb3ZlRnJvbVRleHQgPSB0cnVlLFxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxuICAgICAgdHlwZSA9IENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nLFxuICAgICAgdGV4dCA9IGZhbHNlLFxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxuICAgIGxldCByZWdFeHAgPSBmYWxzZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdFeFtyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMua2V5c1tyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMua2V5c1tyZWdFeEtleV0pXG4gICAgfVxuICAgIGlmIChyZWdFeHAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAodGV4dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgY2hlY2sgPSByZWdFeHAuZXhlYyh0ZXh0KVxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxuICAgICAgaWYgKFxuICAgICAgICBjaGVjayAhPT0gbnVsbCAmJlxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICB0eXBlb2YgKGNoZWNrLmdyb3VwcyB8fCB7fSlbcmVxdWlyZWRHcm91cF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxuICAgICAgICBpZiAocmVtb3ZlRnJvbVRleHQpIHtcbiAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShjaGVja1swXS50cmltKCksICdcXG4nKS50cmltKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUtleXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGVjay5ncm91cHMpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gU3RyaW5nKGNoZWNrLmdyb3Vwc1trZXldKS5yZXBsYWNlKCdcXG4nLCAnICcpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcjpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Wyctc291cmNlJ10gPSBjaGVja1swXVxuICAgICAgICBvdXRwdXRbJy1pbmRleCddID0gY2hlY2suaW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NDb21iYXQgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXG4gICAgfVxuICAgIGxldCB3ZWFwb25cbiAgICBsZXQgZG9kZ2VcbiAgICBsZXQgbmV3bGluZVxuICAgIGxldCBsYXN0UGVyY2VudCA9IGZhbHNlXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIGlmIChcbiAgICAgICAgKGRvZGdlID0gdGhpcy5jaGVjaygnd2VhcG9uRG9kZ2UnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dCB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRvZGdlWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNraWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLnNraWxscy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZG9kZ2UucGVyY2VudGFnZSksXG4gICAgICAgICAgcHVzaDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh3ZWFwb24gPSB0aGlzLmNoZWNrKCd3ZWFwb24nLCB7XG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgcmVxdWlyZWRHcm91cDogbGFzdFBlcmNlbnQgPT09IGZhbHNlID8gJ3BlcmNlbnRhZ2UnIDogZmFsc2VcbiAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSh3ZWFwb25bJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxuICAgICAgICBsZXQgZGFtYWdlID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLmRhbWFnZSB8fCAnJykpXG4gICAgICAgIGNvbnN0IGlzUmFuZ2VkID0gISEoXG4gICAgICAgICAgdGhpcy5jaGVjaygnaGFuZGd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3JpZmxlJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnc21iJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbWFjaGluZUd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2xhdW5jaGVkJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdlYXBvbi5wZXJjZW50YWdlICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHdlYXBvbi5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IE51bWJlcih3ZWFwb24ucGVyY2VudGFnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm91bmRcbiAgICAgICAgbGV0IGFoZGIgPSBmYWxzZVxuICAgICAgICBsZXQgYWRkYiA9IGZhbHNlXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5oYWxmZGIgK1xuICAgICAgICAgICAgICAnKVxcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICcpP1stK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICcpPydcbiAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgYWhkYiA9IHRydWVcbiAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICAgJylcXFxccypbLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICBhZGRiID0gdHJ1ZVxuICAgICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChmb3VuZClcbiAgICAgICAgY29uc3QgZGFtYWdlcyA9IGRhbWFnZS5zcGxpdCgnLycpXG4gICAgICAgIGNvbnN0IGlzU2hvdGd1biA9IGRhbWFnZXMubGVuZ3RoID09PSAzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIHNraWxsOiB7XG4gICAgICAgICAgICAgIGlkOiBsYXN0UGVyY2VudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDEwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGRhbWFnZXNbMF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9uZzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAyMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXh0cmVtZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzJdIDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4gPSBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID0gaXNSYW5nZWQgfHwgaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWhkYiA9IGFoZGJcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXiguKylcXG4vKSkpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXdsaW5lWzBdLCAnXFxuJylcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcbiAgICAgICAgdGV4dCA9ICcnXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRXZWFwb25UZXh0JylcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgd2VhcG9uczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3RzIHNraWxscyAvIGxhbmd1YWdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgLyBsYW5ndWFnZSBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHRleHQsIGtleSA9ICdza2lsbHMnKSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBsZXQgc2tpbGxcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShza2lsbFsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhza2lsbC5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNraWxsLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmIHNraWxsKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JVbmV4cGVjdGVkU2tpbGxzVGV4dCcpXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHNraWxsczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBzcGVsbCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTcGVsbHMgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKSwvKVxuICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKHRleHQudHJpbSgpLCAnXFxuJylcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxsc0Fycikge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5zcGVsbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLnNwZWxscyA9IFtdXG4gICAgICB9XG4gICAgICB0aGlzLnBhcnNlZC5zcGVsbHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHNwZWxsKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcGFyc2VDaGFyYWN0ZXIgZXh0cmFjdHMgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24gb2YgYW4gZW50aXR5IChOUEMgb3IgQ3JlYXR1cmUpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgZW50aXR5XG4gICAqIEByZXR1cm5zIGV4dHJhY3RlZERhdGEgb2JqZWN0IHdpdGggdGhlIGVudGl0eSBkYXRhXG4gICAqL1xuICBhc3luYyBwYXJzZUNoYXJhY3RlciAodGV4dCkge1xuICAgIC8vIFJlcGxhY2UgXCJFbiBEYXNoXCIgYW5kIFwiRW0gRGFzaFwiIGRhc2hlcyB3aXRoIC0gYW5kIFwiUmlnaHQgU2luZ2xlIFF1b3RhdGlvbiBNYXJrXCIgd2l0aCAnXG4gICAgdGhpcy50ZXh0ID0gU3RyaW5nKHRleHQpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFx1MjAxM3xcXHUyMDE0fFxcdTIyMTIvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTkvZywgXCInXCIpXG4gICAgICAucmVwbGFjZSgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS9nLCAnJylcbiAgICAvLyBFYXJsaWVzdCBjaGFyYWN0ZXIgdGhhdCBoYXMgYmVlbiB1c2VkLCB0byB3b3JrIG91dCB0aGUgaGVhZGVyXG4gICAgbGV0IG1pbiA9IHRoaXMudGV4dC5sZW5ndGhcbiAgICAvLyBTVFIsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgbGV0IGNoZWNrID0gdGhpcy5jaGVjaygnc3RyJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVtcbiAgICAgICctaW5kZXgnXG4gICAgXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBDT04sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdjb24nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTSVosIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzaXonLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBJTlQsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdpbnQnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBQT1csIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdwb3cnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBERVgsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdkZXgnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBBUFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhcHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBFRFUsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdlZHUnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTQU4sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzYW4nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBIUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2hwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gTVAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdtcCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFdvcmsgb3V0IHRoZSBoZWFkZXIgYmFzZWQgb24gcHJldmlvdXMgbWluaW11bSBtYXRjaGVkIGNoYXJhY3RlclxuICAgIGxldCBoZWFkZXJcbiAgICBpZiAobWluID4gMCkge1xuICAgICAgaGVhZGVyID0gdGhpcy50ZXh0LnN1YnN0cigwLCBtaW4pXG4gICAgICAvLyBHZXQgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCduYW1lJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIHVzZSBkZWZhdWx0IE5QQyBuYW1lXG4gICAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSBuYW1lIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IGFnZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhZ2UnLCB7IHRleHQ6IGhlYWRlciB9KVxuICAgICAgaWYgKGNoZWNrICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBmb3VuZCByZW1vdmUgYWdlIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IG9jY3VwYXRpb24gZnJvbSBoZWFkZXJcbiAgICAgIGlmICghdGhpcy5jaGVjaygnb2NjdXBhdGlvbicsIHsgdGV4dDogaGVhZGVyIH0pICYmIGhlYWRlci50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIC8vIElmIG9jY3VwYXRpb24gaXMgbm90IGZvdW5kIGJ1dCB0aGVyZSBpcyBhIGhlYWRlciBzZXQgdGhlIG9jY3VwYXRpb24gdG8gdGhlIHJlbWFpbmluZyBoZWFkZXJcbiAgICAgICAgbGV0IG9jY3VwYXRpb24gPSBoZWFkZXJcbiAgICAgICAgaWYgKGhlYWRlci5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZnVsbCBzdG9wIGp1c3QgdXNlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBoZWFkZXIgYXMgdGhlIG9jY3VwYXRpb25cbiAgICAgICAgICBvY2N1cGF0aW9uID0gaGVhZGVyLnN1YnN0cigwLCBoZWFkZXIuaW5kZXhPZignLicpICsgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC8oW1xcblxccl0rKS9nLCAnICcpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC8sJC8sICcnKVxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShvY2N1cGF0aW9uLnRyaW0oKSwgJ1xcbicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIGhlYWRlciBzZXQgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgdGhpcy5wYXJzZWQubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZFVubmFtZWRDaGFyYWN0ZXInKVxuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBvY2N1cGF0aW9uIGJ1dCBubyBhZ2UgY2hlY2sgaWYgdGhlIG9jY3VwYXRpb24gc3RhcnRzIG51bWJlciBzcGxpdCBhZ2UgYW5kIG9jY3VwYXRpb25cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLnBhcnNlZC5hZ2UgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uQWdlID0gdGhpcy5wYXJzZWQub2NjdXBhdGlvbi5tYXRjaChcbiAgICAgICAgL14oPzxhZ2U+XFxkKyksKD88b2NjdXBhdGlvbj4uKykkL1xuICAgICAgKVxuICAgICAgaWYgKG9jY3VwYXRpb25BZ2UpIHtcbiAgICAgICAgdGhpcy5wYXJzZWQuYWdlID0gb2NjdXBhdGlvbkFnZS5ncm91cHMuYWdlXG4gICAgICAgIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5vY2N1cGF0aW9uLnRyaW0oKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBHZXQgZGFtYWdlIGJvbnVzLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdkYicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdkYk5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5kYlxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmRiID0gJzAnXG4gICAgfVxuICAgIHRoaXMucGFyc2VkLmRiID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLmRiKVxuICAgIC8vIEdldCBidWlsZFxuICAgIHRoaXMuY2hlY2soJ2J1aWxkJylcbiAgICAvLyBHZXQgYXJtb3IsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgIXRoaXMuY2hlY2soJ2FybW9yJykgfHxcbiAgICAgIHRoaXMuY2hlY2soJ2FybW9yTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmFybW9yXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXJtb3IgPSAnMCdcbiAgICB9XG4gICAgLy8gR2V0IG1vdmVtZW50XG4gICAgdGhpcy5jaGVjaygnbW92JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBsdWNrXG4gICAgdGhpcy5jaGVjaygnbGNrJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBzYW5pdHkgbG9zc1xuICAgIHRoaXMuY2hlY2soJ3Nhbkxvc3MnKVxuICAgIHRoaXMucGFyc2VkLnNhbkxvc3MgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuc2FuTG9zcylcbiAgICAvLyBHZXQgYXR0YWNrcyBwZXIgcm91bmQsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kJykgJiZcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZE5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmRcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmQgPSAnMCdcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBjb21iYXQgc2VjdGlvblxuICAgIHRoaXMudGV4dCA9ICdcXG4nICsgdGhpcy50ZXh0XG4gICAgbGV0IHNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICBpZiAodGhpcy50ZXh0Lm1hdGNoKHNlY3Rpb25zKSA9PT0gbnVsbCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZ3Vlc3Mgd2hlcmUgaXQgc3RhcnRzXG4gICAgICBzZWN0aW9ucyA9IHRoaXMuY2hlY2soJ2d1ZXNzU3RhcnRDb21iYXQnLCB7XG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlXG4gICAgICB9KVxuICAgICAgaWYgKHNlY3Rpb25zKSB7XG4gICAgICAgIC8vIEFkZCBhIGhlYWRlciB0byB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAgICAgIHRoaXMudGV4dCA9IFtcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2UoMCwgc2VjdGlvbnNbJy1pbmRleCddKSxcbiAgICAgICAgICB0aGlzLmtleXMubmV3Q29tYmF0SGVhZGVyLFxuICAgICAgICAgIHRoaXMudGV4dC5zbGljZShzZWN0aW9uc1snLWluZGV4J10pXG4gICAgICAgIF0uam9pbignJylcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BsaXQgdGhlIHNlY3Rpb25zIENvbWJhdCwgU2tpbGxzLCBMYW5ndWFnZXMsIGFuZCBTcGVsbHNcbiAgICBjb25zdCByZWdFeHBTZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgodGhpcy5yZWdFeC5zZWN0aW9ucywgJ2knKVxuICAgIHNlY3Rpb25zID0gdGhpcy50ZXh0LnNwbGl0KHJlZ0V4cFNlY3Rpb25zKVxuICAgIGlmIChzZWN0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gc2VjdGlvbnMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uQ29tYmF0cyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIGNvbWJhdFxuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc0NvbWJhdChzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU2tpbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc2tpbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25MYW5nYXVnZXMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBsYW5ndWFnZXNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdLCAnbGFuZ3VhZ2VzJylcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25TcGVsbHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBzcGVsbHNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVsbHMoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFueSByZW1haW5pbmcgdGV4dCBhZGQgdG8gR00gbm90ZXMgc28geW91IGNhbiBlYXNpbHkgc2VlIGlmIHRoZXJlIGFyZSBhbnkgb2J2aW91cyBpc3N1ZSBvciBqdXN0IGdlbmVyYWwgbm90ZXNcbiAgICB0aGlzLnBhcnNlZC5nbW5vdGVzID0gdGhpcy50b0hUTUwodGhpcy50ZXh0KVxuICAgIHJldHVybiB0aGlzLnBhcnNlZFxuICB9XG5cbiAgZGlzYWJsZUF0dHJpYkF1dG8gKGtleSwgYXR0cmliVmFsdWUsIGNoZWNrLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBOdW1iZXIoYXR0cmliVmFsdWUpKVxuICAgIGlmICh2YWx1ZSAhPT0gTnVtYmVyKGNoZWNrKSkge1xuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LmF1dG9gXSA9IGZhbHNlXG4gICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0udmFsdWVgXSA9IHZhbHVlXG4gICAgICBpZiAoa2V5ID09PSAnYnVpbGQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5jdXJyZW50YF0gPSB2YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9Lm1heGBdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gZW50aXR5IChgbnBjYCBvciBgY3JlYXR1cmVgKSBmcm9tIHRoZSBvYmplY3Qgd2l0aCB0aGUgYWxyZWFkeSBwYXJzZWQgZW50aXR5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYXJhY3RlckRhdGEgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0XG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGNyZWF0ZWQgZm91bmRyeSBgQWN0b3JgXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbnRpdHkgKGNoYXJhY3RlckRhdGEsIGVudGl0eVR5cGUpIHtcbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmIChlbnRpdHlUeXBlICE9PSAnbnBjJykge1xuICAgICAgZW50aXR5VHlwZSA9ICdjcmVhdHVyZSdcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyRGF0YS5uYW1lLFxuICAgICAgdHlwZTogZW50aXR5VHlwZSxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuaXRlbXMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdocCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocC52YWx1ZSxcbiAgICAgICAgbnBjLmhwTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtcCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgbnBjLm1wTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbW92JyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdi52YWx1ZSxcbiAgICAgICAgbnBjLm1vdixcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnYnVpbGQnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQudmFsdWUsXG4gICAgICAgIG5wYy5idWlsZCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyhjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGIudmFsdWUpLnJlcGxhY2UoL15cXCtcXHMqLywgJycpXG4gICAgICBpZiAodmFsdWUgIT09IFN0cmluZyhucGMuZGIpKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJ10gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlRGF0YTonLCB1cGRhdGVEYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVJdGVtRGF0YSA9IFtdXG4gICAgbGV0IGxhc3RXZWFwb25Ta2lsbCA9IG51bGxcbiAgICBmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy53ZWFwb25Ta2lsbHMpIHtcbiAgICAgIGlmIChwYWlyWzBdICE9PSBmYWxzZSkge1xuICAgICAgICBsYXN0V2VhcG9uU2tpbGwgPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICAgIGkgPT4gaS5uYW1lID09PSBwYWlyWzBdLm5hbWUgJiZcbiAgICAgICAgICAgIGkudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgTnVtYmVyKGkuc3lzdGVtLnZhbHVlKSA9PT0gTnVtYmVyKHBhaXJbMF0uc3lzdGVtLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclsxXS5uYW1lICYmXG4gICAgICAgICAgaS50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgICAgIGkuc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UgPT09IHBhaXJbMV0uc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IGxhc3RXZWFwb25Ta2lsbFswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IGxhc3RXZWFwb25Ta2lsbFswXS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1cGRhdGVJdGVtRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCd1cGRhdGVJdGVtRGF0YTonLCB1cGRhdGVJdGVtRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgIH1cbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogYWN0b3JEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YVxuICAgKi9cbiAgYWN0b3JEYXRhIChwYykge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IHt9LFxuICAgICAgYXR0cmliczoge30sXG4gICAgICBpbmZvczoge30sXG4gICAgICBzcGVjaWFsOiB7fSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIGtlZXBlcjogJydcbiAgICAgIH0sXG4gICAgICBmbGFnczoge1xuICAgICAgICBsb2NrZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwbGF5Rm9ybXVsYTogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzYW4nLCAnbW92JywgJ2J1aWxkJywgJ2FybW9yJywgJ2xjaycsICdocCcsICdtcCddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuYXR0cmlic1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5hdHRyaWJzLmRiID0ge1xuICAgICAgICB2YWx1ZTogcGMuZGJcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydhZ2UnLCAnb2NjdXBhdGlvbiddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuaW5mb3Nba2V5XSA9IHBjW2tleV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5zYW5Mb3NzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgW3Bhc3NlZCwgZmFpbGVkXSA9IHBjLnNhbkxvc3Muc3BsaXQoJy8nKVxuICAgICAgZGF0YS5zcGVjaWFsLnNhbkxvc3MgPSB7XG4gICAgICAgIGNoZWNrUGFzc2VkOiBwYXNzZWQsXG4gICAgICAgIGNoZWNrRmFpbGxlZDogZmFpbGVkXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuYXR0YWNrc1BlclJvdW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5zcGVjaWFsLmF0dGFja3NQZXJSb3VuZCA9IE51bWJlcihwYy5hdHRhY2tzUGVyUm91bmQpXG4gICAgfVxuICAgIGRhdGEuZGVzY3JpcHRpb24ua2VlcGVyID0gcGMuZ21ub3Rlc1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdhY3RvckRhdGE6JywgZGF0YSlcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFzeW5jIGl0ZW1zRGF0YSAocGMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxuICAgIC8vIFdlYXBvbiBza2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XG4gICAgICAgIGxldCBza2lsbCA9IGZhbHNlXG4gICAgICAgIGlmIChhdHRhY2suc3lzdGVtPy5za2lsbD8uaWQgIT09IHRydWUpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMud2VhcG9uU2tpbGwoYXR0YWNrKVxuICAgICAgICAgIGl0ZW1zLnB1c2goc2tpbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXR0YWNrLnN5c3RlbS5za2lsbC5pZCA9IG51bGxcbiAgICAgICAgaXRlbXMucHVzaChhdHRhY2spXG4gICAgICAgIHRoaXMud2VhcG9uU2tpbGxzLnB1c2goW3NraWxsLCBhdHRhY2tdKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLnNraWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMuc2tpbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0ge31cbiAgICAgICAgICBpZiAodHlwZW9mIHNraWxsLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwgb3B0aW9ucykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgaWYgKHR5cGVvZiBwYy5sYW5ndWFnZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHBjLmxhbmd1YWdlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIHNraWxsLm5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLmJhc2UgPSBza2lsbC52YWx1ZVxuICAgICAgICAgIGl0ZW1zLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKFxuICAgICAgICAgICAgQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwge1xuICAgICAgICAgICAgICBpbWc6IENvQzdJdGVtLmljb25MYW5ndWFnZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246ICdMYW5ndWFnZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwZWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc3BlbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHBjLnNwZWxscykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdzcGVsbCcsIG5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBpdGVtcy5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNwZWxsKG5hbWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqIHdlYXBvblNraWxsIHRyaWVzIHRvIGd1ZXNzIHdoYXQga2luZCBvZiB3ZWFwb24gc2tpbGwgdG8gdXNlIGZvciB3ZWFwb24gZnJvbSBpdCdzIG5hbWVcbiAgICogQHBhcmFtIHdlYXBvbjogSlNPTiwgd2VhcG9uIGRhdGFcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb24pIHtcbiAgICBsZXQgc2tpbGwgPSBudWxsXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgoJ2hhbmRndW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnSGFuZGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgSGFuZGd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgncmlmbGUnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUvU2hvdGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUnLCB7XG4gICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdTaG90Z3VuJywge1xuICAgICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFJpZmxlIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdzbWInKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnU3VibWFjaGluZSBHdW4nLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFN1Ym1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdtYWNoaW5lR3VuJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ01hY2hpbmUgR3VuJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbGF1bmNoZWQnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTGF1bmNoJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBMYXVuY2ggc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNraWxsICE9PSBudWxsICYmIHR5cGVvZiBza2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsQ2xvbmUgPSBza2lsbC5jbG9uZSh7XG4gICAgICAgIHN5c3RlbToge1xuICAgICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBza2lsbENsb25lXG4gICAgfVxuICAgIGNvbnN0IGZpcmVhcm1zID0gd2VhcG9uLnN5c3RlbT8ucHJvcGVydGllcz8ucm5nZFxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIHdlYXBvbi5uYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBuZXdTa2lsbCA9IHtcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGJhc2U6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZCxcbiAgICAgICAgdmFsdWU6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFdlYXBvbiBza2lsbCBub3QgZm91bmQgZm9yICR7d2VhcG9uLm5hbWV9LCBjcmVhdGluZyBhIG5ldyBvbmVgLFxuICAgICAgICBuZXdTa2lsbFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbmV3U2tpbGxcbiAgfVxuXG4gIC8qKlxuICAgKiBuZWVkc0NvbnZlcnNpb24gZG9lcyBhbiBldmFsdWF0aW9uIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gbnBjIG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byA3dGggRWRpdGlvblxuICAgKiBSZXR1cm5zIGBmYWxzZWAgd2hlbiBhbnkgb2YgdGhlIENoYXJhY3RlcmlzdGljcyB2YWx1ZSBpdCdzIGFib3ZlIDI5XG4gICAqL1xuICBuZWVkc0NvbnZlcnNpb24gKG5wYykge1xuICAgIGxldCBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSB0cnVlXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgbnBjW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG5wY1trZXldID4gMzApIHtcbiAgICAgICAgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ25lZWRzQ29udmVyc2lvbjonLCBuZWVkc0NvbnZlcnNpb25SZXN1bHQpXG4gICAgfVxuICAgIHJldHVybiBuZWVkc0NvbnZlcnNpb25SZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGVBY3RvciBtYWluIG1ldGhvZCB0byBjcmVhdGUgYW4gYEFjdG9yYCBmcm9tIGEgZ2l2ZSB1c2VyIGlucHV0LCB0YWtlcyBvbiBhY2NvdW50IHRoZSBsYW5nLCBlbnRpdHkgdHlwZSxcbiAgICogdGhlIGNvbnZlcnQgdG8gNyBFZGl0aW9uIGZsYWcsIGFuZCB0aGUgcmF3IGVudGl0eSBkYXRhLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRzIGlucHV0cyBmcm9tIHRoZSBmb3JtIHRvIGNyZWF0ZSBhbiBBY3RvclxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBmb3VuZHJ5IGBBY3RvcmAgZnJvbSB0aGUgZ2l2ZW4gYGlucHV0YCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZUFjdG9yOicsIGlucHV0cylcbiAgICB9XG4gICAgY29uc3QgbGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoaW5wdXRzLmxhbmcpXG4gICAgdGhpcy5rZXlzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0S2V5cyhsYW5nKVxuICAgIHRoaXMucmVnRXggPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRSZWd1bGFyRXhwcmVzc2lvbnMobGFuZylcbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSBpbnB1dHMuc291cmNlXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1JlZ3VsYXIgRXhwcmVzc2lvbnM6JywgbGFuZywgdGhpcy5rZXlzLCB0aGlzLnJlZ0V4KVxuICAgIH1cbiAgICBsZXQgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5wYXJzZUNoYXJhY3RlcihpbnB1dHMudGV4dClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncGFyc2VDaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtZ3Vlc3MnICYmXG4gICAgICAgIHRoaXMubmVlZHNDb252ZXJzaW9uKGNoYXJhY3RlcikpIHx8XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1jb252ZXJ0J1xuICAgICkge1xuICAgICAgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5jb252ZXJ0N0UoY2hhcmFjdGVyKVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyLm5hbWUsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvckRhdGEoY2hhcmFjdGVyKSxcbiAgICAgIGl0ZW1zOiBhd2FpdCB0aGlzLml0ZW1zRGF0YShjaGFyYWN0ZXIpXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpbnB1dHMudGVzdE1vZGUgIT09ICd1bmRlZmluZWQnICYmIGlucHV0cy50ZXN0TW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGNoYXJhY3RlckRhdGFcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoY2hhcmFjdGVyRGF0YSwgaW5wdXRzLmVudGl0eSlcbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogY29udmVydDdFIENvbnZlcnRzIHRoZSBnaXZlbiBlbnRpdHkgZnJvbSA2IGVkaXRpb24gdG8gNyBlZGl0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgZW50aXR5IG9iamVjdCBhcyBvYnRhaW5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxuICAgKi9cbiAgYXN5bmMgY29udmVydDdFIChjcmVhdHVyZSkge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdDb252ZXJ0aW5nIG5wYycsIGNyZWF0dXJlKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdyddKSB7XG4gICAgICBpZiAodHlwZW9mIGNyZWF0dXJlW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0dXJlW2tleV0gKj0gNVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmVkdSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcbiAgICAgICAgY3JlYXR1cmUuZWR1ICo9IDVcbiAgICAgIH0gZWxzZSBpZiAoY3JlYXR1cmUuZWR1IDw9IDI2KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0dXJlLmVkdSA+PTI4XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZGIgPT09ICctMWQ0Jykge1xuICAgICAgICBjcmVhdHVyZS5kYiA9IC0xXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNicpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMlxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY29udmVydDdFOiAnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0dXJlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGaWxlLCBGaWxlUGlja2VyLCBnYW1lLCB1aSAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaXJlY3RvcnlQaWNrZXIgZXh0ZW5kcyBGaWxlUGlja2VyIHtcbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwYXRoID0gZXZlbnQudGFyZ2V0LnRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGFjdGl2ZVNvdXJjZSA9IHRoaXMuYWN0aXZlU291cmNlXG4gICAgY29uc3QgYnVja2V0ID0gZXZlbnQudGFyZ2V0LmJ1Y2tldCA/IGV2ZW50LnRhcmdldC5idWNrZXQudmFsdWUgOiBudWxsXG4gICAgdGhpcy5maWVsZC52YWx1ZSA9IENvQzdEaXJlY3RvcnlQaWNrZXIuZm9ybWF0KHtcbiAgICAgIGFjdGl2ZVNvdXJjZSxcbiAgICAgIGJ1Y2tldCxcbiAgICAgIHBhdGhcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIERlZmF1bHREaXJlY3RvcnkgKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnJyA6IFN0cmluZyh2YWwpXG4gIH1cblxuICBzdGF0aWMgZm9ybWF0ICh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5idWNrZXQgIT09IG51bGxcbiAgICAgID8gYFske3ZhbHVlLmFjdGl2ZVNvdXJjZX06JHt2YWx1ZS5idWNrZXR9XSAke3ZhbHVlLnBhdGh9YFxuICAgICAgOiBgWyR7dmFsdWUuYWN0aXZlU291cmNlfV0gJHt2YWx1ZS5wYXRofWBcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZSAocmF3KSB7XG4gICAgY29uc3Qgc3RyID0gcmF3ID8/ICcnXG4gICAgY29uc3QgbWF0Y2hlcyA9IHN0ci5tYXRjaCgvXlxcWyhbXjpdKykoOiguKykpP1xcXVxccyooLispPyQvdSlcblxuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3RpdmVTb3VyY2U6IG1hdGNoZXNbMV0sXG4gICAgICAgIGJ1Y2tldDogbWF0Y2hlc1szXSA/PyAnJyxcbiAgICAgICAgY3VycmVudDogbWF0Y2hlc1s0XVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlU291cmNlOiAnZGF0YScsXG4gICAgICBidWNrZXQ6IG51bGwsXG4gICAgICBjdXJyZW50OiBzdHJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcHJvY2Vzc0h0bWwgKGh0bWwpIHtcbiAgICAkKGh0bWwpXG4gICAgICAuZmluZCgnaW5wdXRbZGF0YS1kdHlwZT1cIkRlZmF1bHREaXJlY3RvcnlcIl0nKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gJChlbClcbiAgICAgICAgaW5wdXQucHJvcCgncmVhZG9ubHknLCB0cnVlKVxuICAgICAgICBpZiAoIWlucHV0Lm5leHQoKS5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgQ29DN0RpcmVjdG9yeVBpY2tlcih7XG4gICAgICAgICAgICBmaWVsZDogaW5wdXRbMF0sXG4gICAgICAgICAgICAuLi5Db0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKGlucHV0LnZhbCgpKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc3QgcGlja2VyQnV0dG9uID0gJChcbiAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtcGlja2VyXCIgdGl0bGU9XCInICtcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKSArXG4gICAgICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1maWxlLWltcG9ydCBmYS1md1wiPjwvaT48L2J1dHRvbj4nXG4gICAgICAgICAgKVxuICAgICAgICAgIENvQzdEaXJlY3RvcnlQaWNrZXIuY3JlYXRlRGVmYXVsdERpcmVjdG9yeSgpXG4gICAgICAgICAgcGlja2VyQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHBpY2tlci5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlucHV0LnBhcmVudCgpLmFwcGVuZChwaWNrZXJCdXR0b24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAkKGh0bWwpLmZpbmQoJ29sLmZpbGVzLWxpc3QnKS5yZW1vdmUoKVxuICAgICQoaHRtbCkuZmluZCgnZm9vdGVyIGRpdicpLnJlbW92ZSgpXG4gICAgJChodG1sKS5maW5kKCdmb290ZXIgYnV0dG9uJykudGV4dChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZURlZmF1bHREaXJlY3RvcnkgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScpXG4gICAgKVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURpcmVjdG9yeShcbiAgICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgICAgcGFyc2VkLmN1cnJlbnQsXG4gICAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cbiAgICAgIClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLm1lc3NhZ2Uuc3RhcnRzV2l0aCgnRUVYSVNUJykpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBsb2FkVG9EZWZhdWx0RGlyZWN0b3J5IChmaWxlLCBmaWxlbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScpXG4gICAgKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgRmlsZVBpY2tlci51cGxvYWQoXG4gICAgICBwYXJzZWQuYWN0aXZlU291cmNlLFxuICAgICAgcGFyc2VkLmN1cnJlbnQsXG4gICAgICBuZXcgRmlsZShbZmlsZV0sIGZpbGVuYW1lLCB7XG4gICAgICAgIHR5cGU6ICdpbWFnZS9wbmcnXG4gICAgICB9KSxcbiAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cbiAgICApXG4gICAgaWYgKCFyZXNwb25zZS5wYXRoKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWxlVXBsb2FkRXJyb3InKSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkLmN1cnJlbnQgKyAnLycgKyBmaWxlbmFtZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgdWksIGZldGNoICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB7XG4gIC8qKlxuICAgKiBDb21wb3NlIHRoZSBCYWNrc3RvcnkgZnJvbSB0aGUgZGlmZmVyZW50IGJsb2Nrcy5cbiAgICogQHBhcmFtIHt9IGJhY2tzdG9yeUpTT04gRGhvbGVIb3VzZSBiYWNrc3RvcnkgSlNPTlxuICAgKiBAcmV0dXJucyBIVE1MIHdpdGggdGhlIGZvcm1hdHRlZCBiYWNrc3RvcnlcbiAgICovXG4gIHN0YXRpYyBnZXRCYWNrc3RvcnkgKGJhY2tzdG9yeUpTT04pIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIFsnZGVzY3JpcHRpb24nLCAnRGVzY3JpcHRpb24nXSxcbiAgICAgIFsndHJhaXRzJywgJ1RyYWl0cyddLFxuICAgICAgWydpZGVvbG9neScsICdJZGVvbG9neSddLFxuICAgICAgWydpbmp1cnVlcycsICdJbmp1cmllcycsICdpbmp1cmllcyddLFxuICAgICAgWydwZW9wbGUnLCAnUGVvcGxlJ10sXG4gICAgICBbJ3Bob2JpYXMnLCAnUGhvYmlhcyddLFxuICAgICAgWydsb2NhdGlvbnMnLCAnTG9jYXRpb25zJ10sXG4gICAgICBbJ3RvbWVzJywgJ1RvbWVzJ10sXG4gICAgICBbJ3Bvc3Nlc3Npb25zJywgJ1Bvc3Nlc3Npb25zJ10sXG4gICAgICBbJ2VuY291bnRlcnMnLCAnRW5jb3VudGVycyddXG4gICAgXVxuICAgIGNvbnN0IGJhY2tzdG9yeSA9IHtcbiAgICAgIGJsb2NrOiBbXSxcbiAgICAgIHNlY3Rpb25zOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgIGlmIChiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VjdGlvblsyXSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VjdGlvblsyXSA9PT0gJycpIHtcbiAgICAgICAgICBzZWN0aW9uWzJdID0gc2VjdGlvblswXVxuICAgICAgICB9XG4gICAgICAgIGJhY2tzdG9yeS5ibG9jay5wdXNoKFxuICAgICAgICAgIGA8aDM+JHtzZWN0aW9uWzFdfTwvaDM+XFxuPGRpdiBjbGFzcz1cIiR7c2VjdGlvblsyXX1cIj5cXG4ke1xuICAgICAgICAgICAgYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxuICAgICAgICAgIH1cXG48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgYmFja3N0b3J5LnNlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBzZWN0aW9uWzFdLFxuICAgICAgICAgIHZhbHVlOiBiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGJhY2tzdG9yeS5ibG9jayA9XG4gICAgICAnPGgyPkJhY2tzdG9yeTwvaDI+XFxuJyArIGJhY2tzdG9yeS5ibG9jay5qb2luKCdcXG4nLCBiYWNrc3RvcnkuYmxvY2spXG4gICAgcmV0dXJuIGJhY2tzdG9yeVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SlNPTn0gZGhvbGVIb3VzZURhdGEgRGhvbGVIb3VzZUpTT05cbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEgKGRob2xlSG91c2VEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2U6JywgZGhvbGVIb3VzZURhdGEpXG4gICAgfVxuICAgIGRob2xlSG91c2VEYXRhID0gZGhvbGVIb3VzZURhdGEuSW52ZXN0aWdhdG9yXG4gICAgY29uc3QgYmFja3N0b3JpZXMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZ2V0QmFja3N0b3J5KFxuICAgICAgZGhvbGVIb3VzZURhdGEuQmFja3N0b3J5XG4gICAgKVxuICAgIGNvbnN0IGNEYXRhID0ge1xuICAgICAgbmFtZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk5hbWUsXG4gICAgICBhY3Rvcjoge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TVFIsIDEwKSB9LFxuICAgICAgICAgIGNvbjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkNPTiwgMTApIH0sXG4gICAgICAgICAgc2l6OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU0laLCAxMCkgfSxcbiAgICAgICAgICBkZXg6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5ERVgsIDEwKSB9LFxuICAgICAgICAgIGFwcDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkFQUCwgMTApIH0sXG4gICAgICAgICAgaW50OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSU5ULCAxMCkgfSxcbiAgICAgICAgICBwb3c6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5QT1csIDEwKSB9LFxuICAgICAgICAgIGVkdTogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkVEVSwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHksIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eU1heCwgMTApLFxuICAgICAgICAgICAgZGFpbHlMaW1pdDogTWF0aC5mbG9vcihkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5IC8gNSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkhpdFB0cywgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzTWF4LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1wOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5NYWdpY1B0c01heCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTHVjaywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjogeyB2YWx1ZTogZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRhbWFnZUJvbnVzIH0sXG4gICAgICAgICAgYnVpbGQ6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5CdWlsZCwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuT2NjdXBhdGlvbixcbiAgICAgICAgICBhZ2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5BZ2UsXG4gICAgICAgICAgc2V4OiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuR2VuZGVyLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLlJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQmlydGhwbGFjZVxuICAgICAgICB9LFxuICAgICAgICBiYWNrc3Rvcnk6IGJhY2tzdG9yaWVzLmJsb2NrLFxuICAgICAgICBiaW9ncmFwaHk6IGJhY2tzdG9yaWVzLnNlY3Rpb25zLFxuICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgIGtlZXBlcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VBY3RvckltcG9ydGVyU291cmNlJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraWxsczogYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RTa2lsbHMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlNraWxscy5Ta2lsbCA/PyBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKSxcbiAgICAgIHBvc3Nlc2lvbnM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0UG9zc2Vzc2lvbnMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlBvc3Nlc3Npb25zPy5pdGVtID8/IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBjRGF0YVxuICB9XG5cbiAgc3RhdGljIG1ha2VTa2lsbE5hbWUgKG5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uID09PSAnTm9uZScpIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ0FueSdcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdMYW5ndWFnZSAoT3RoZXIpJyB8fCBuYW1lID09PSAnTGFuZ3VhZ2UgKE93biknKSB7XG4gICAgICBuYW1lID0gJ0xhbmd1YWdlJ1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ09wZXJhdGUgSGVhdnkgTWFjaGluZScpIHtcbiAgICAgIG5hbWUgPSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lcnknXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnVGhyb3cnICYmIHNwZWNpYWxpemF0aW9uID09PSAnJykge1xuICAgICAgbmFtZSA9ICdGaWdodGluZydcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ1Rocm93J1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc2tpbGxOYW1lOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyBuYW1lIDogc3BlY2lhbGl6YXRpb24sXG4gICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiBuYW1lLFxuICAgICAgbmFtZTogbmFtZSArIChzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6ICcgKCcgKyBzcGVjaWFsaXphdGlvbiArICcpJylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFNraWxscyAoZGhvbGVIb3VzZXNraWxscywgb3B0aW9ucykge1xuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBkaG9sZUhvdXNlc2tpbGxzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLnN1YnNraWxsID09PSAnTm9uZScgJiZcbiAgICAgICAgc2tpbGwudmFsdWUgPT09ICcxJyAmJlxuICAgICAgICBza2lsbC5oYWxmID09PSAnMCcgJiZcbiAgICAgICAgc2tpbGwuZmlmdGggPT09ICcwJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5tYWtlU2tpbGxOYW1lKFxuICAgICAgICBza2lsbC5uYW1lLFxuICAgICAgICBza2lsbC5zdWJza2lsbCA/PyAnJ1xuICAgICAgKVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsXG4gICAgICAgIGZhbGxiYWNrQW55OiB0cnVlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICAgIGNsb25lZC5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lZCA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoXG4gICAgICAgICAgcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICAgIHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjpcbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICcnID8gZmFsc2UgOiBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cbiAgICAgICAgaWYgKHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnRmlnaHRpbmcnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnRmlyZWFybXMnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAocGFydHMuc2tpbGxOYW1lID09PSAnRG9kZ2UnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPT09ICdBbnknKSB7XG4gICAgICAgIGNsb25lZC5uYW1lID0gY2xvbmVkLm5hbWUucmVwbGFjZSgnIChBbnkpJywgJyAoTm9uZSknKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9ICdOb25lJ1xuICAgICAgfVxuICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXG4gICAgICBjbG9uZWQuc3lzdGVtLnZhbHVlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXG4gICAgICBjbG9uZWQuc3lzdGVtLmZsYWdzID0gY2xvbmVkLnN5c3RlbS5mbGFncyA/PyB7fVxuICAgICAgY2xvbmVkLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID1cbiAgICAgICAgc2tpbGwub2NjdXBhdGlvbiA9PT0gdHJ1ZSB8fCBza2lsbC5vY2N1cGF0aW9uID09PSAndHJ1ZSdcbiAgICAgIHNraWxscy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgc3RhdGljIGZpbmRXZWFwb25Ta2lsbElkIChza2lsbE5hbWUsIGNoYXJhY3Rlcikge1xuICAgIGNvbnN0IHNraWxscyA9IGNoYXJhY3Rlci5nZXRFbWJlZGRlZENvbGxlY3Rpb24oJ0l0ZW0nKVxuICAgIGNvbnN0IGNoZWNrTmFtZSA9IHNraWxsTmFtZS5yZXBsYWNlKC9eXFwoKC4rKVxcKSQvLCAnJDEnKVxuICAgIGNvbnN0IGNoYXJhY3RlclNraWxsID0gc2tpbGxzLmZpbmQoaSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBpLnN5c3RlbT8uc2tpbGxOYW1lID09PSBjaGVja05hbWUgfHxcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZT8uaW5kZXhPZihjaGVja05hbWUpID4gLTFcbiAgICAgIClcbiAgICB9KVxuICAgIHJldHVybiBjaGFyYWN0ZXJTa2lsbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RQb3NzZXNzaW9ucyAoZGhvbGVob3VzZVBvc3Nlc3Npb25zLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGlmICghQXJyYXkuaXNBcnJheShkaG9sZWhvdXNlUG9zc2Vzc2lvbnMpICYmIGRob2xlaG91c2VQb3NzZXNzaW9ucyAhPSBudWxsKSB7XG4gICAgICBkaG9sZWhvdXNlUG9zc2Vzc2lvbnMgPSBbZGhvbGVob3VzZVBvc3Nlc3Npb25zXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGhvbGVob3VzZVBvc3Nlc3Npb25zKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdpdGVtJywgaXRlbS5kZXNjcmlwdGlvbiwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSB7XG4gICAgICAgICAgbmFtZTogaXRlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RXZWFwb25zIChkaG9sZWhvdXNlV2VhcG9ucywgY2hhcmFjdGVyLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgd2VhcG9ucyA9IFtdXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRob2xlaG91c2VXZWFwb25zKSkge1xuICAgICAgZGhvbGVob3VzZVdlYXBvbnMgPSBbZGhvbGVob3VzZVdlYXBvbnNdXG4gICAgfVxuICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIGRob2xlaG91c2VXZWFwb25zKSB7XG4gICAgICBjb25zdCBza2lsbCA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5maW5kV2VhcG9uU2tpbGxJZChcbiAgICAgICAgd2VhcG9uLnNraWxsbmFtZSxcbiAgICAgICAgY2hhcmFjdGVyXG4gICAgICApXG4gICAgICBjb25zdCBkYW1hZ2UgPSB3ZWFwb24uZGFtYWdlLnJlcGxhY2UoL1xcK0RCL2ksICcnKVxuICAgICAgY29uc3QgYWRkYiA9IGRhbWFnZSAhPT0gd2VhcG9uLmRhbWFnZVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnd2VhcG9uJywgd2VhcG9uLm5hbWUsIHtcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZVxuICAgICAgfSlcbiAgICAgIGxldCBjbG9uZWQgPSBudWxsXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjbG9uZWQgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9IHNraWxsPy5uYW1lID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlID0gY2xvbmVkLnN5c3RlbS5yYW5nZSA/PyB7fVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlLm5vcm1hbCA9IGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSA9IGRhbWFnZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLmFtbW8gPSB3ZWFwb24uYW1tb1xuICAgICAgICBjbG9uZWQuc3lzdGVtLm1hbGZ1bmN0aW9uID0gd2VhcG9uLm1hbGZcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maWdodGluZyA/PyBmYWxzZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucm5nZCA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0ge1xuICAgICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgc2tpbGw6IHtcbiAgICAgICAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNraWxsPy5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIGlkOiBza2lsbD8uaWQgPz8gJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgIG5vcm1hbDoge1xuICAgICAgICAgICAgICAgIGRhbWFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW1tbzogd2VhcG9uLmFtbW8sXG4gICAgICAgICAgICBtYWxmdW5jdGlvbjogd2VhcG9uLm1hbGYsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIG1lbGVlOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlLFxuICAgICAgICAgICAgICBybmdkOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2UsXG4gICAgICAgICAgICAgIGFkZGJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdlYXBvbnMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiB3ZWFwb25zXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2F2ZVBvcnRyYWl0IChiYXNlNjRQb3J0cmFpdCwgZmlsZU5hbWUpIHtcbiAgICBjb25zdCBiYXNlNjRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0UG9ydHJhaXRcbiAgICApXG4gICAgY29uc3QgaW1hZ2VCbG9iID0gYXdhaXQgYmFzZTY0UmVzcG9uc2UuYmxvYigpXG4gICAgY29uc3QgZmlsZVBhdGggPSBDb0M3RGlyZWN0b3J5UGlja2VyLnVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeShcbiAgICAgIGltYWdlQmxvYixcbiAgICAgIGZpbGVOYW1lXG4gICAgKVxuICAgIHJldHVybiBmaWxlUGF0aFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIChkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSwgb3B0aW9ucykge1xuICAgIGlmICghZ2FtZS51c2VyPy5jYW4oJ0ZJTEVTX1VQTE9BRCcpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID1cbiAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEoXG4gICAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGFyYWN0ZXIgRGF0YTonLCBjaGFyYWN0ZXJEYXRhKVxuICAgIH1cbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmICghQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEZWZhdWx0RGlyZWN0b3J5KCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiAnY2hhcmFjdGVyJyxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIC8vIElmIHBvc3NpYmxlIHVwbG9hZCB0aGUgaW1hZ2UgcG9ydHJhaXRcbiAgICBpZiAoXG4gICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuUGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0Py5sZW5ndGggPiAxMFxuICAgICkge1xuICAgICAgY29uc3QgZmlsZU5hbWUgPSAnYXZhdGFyLScgKyBucGMuaWQgKyAnLnBuZydcbiAgICAgIGNvbnN0IHBvcnRyYWl0ID0gYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLnNhdmVQb3J0cmFpdChcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLlBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdCxcbiAgICAgICAgZmlsZU5hbWVcbiAgICAgIClcbiAgICAgIGlmIChwb3J0cmFpdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgbnBjLnVwZGF0ZSh7XG4gICAgICAgICAgaW1nOiBwb3J0cmFpdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ0l0ZW1zOiAnLCBjaGFyYWN0ZXJEYXRhLml0ZW1zKVxuICAgIH1cbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnNraWxscywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnBvc3Nlc2lvbnMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3Qgd2VhcG9ucyA9IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0V2VhcG9ucyhcbiAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5XZWFwb25zPy53ZWFwb24gPz8gW10sXG4gICAgICBucGMsXG4gICAgICBvcHRpb25zXG4gICAgKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnV2VhcG9uczogJywgd2VhcG9ucylcbiAgICB9XG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgd2VhcG9ucywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcblxuICAgIHJldHVybiBucGNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgdWksIEZpbGVSZWFkZXIgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyIH0gZnJvbSAnLi9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItaW1wb3J0ZXInXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlcicpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYWN0b3ItaW1wb3J0ZXIuaHRtbCcsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiA2MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuaW1wb3J0VHlwZSA9IGRhdGEub2JqZWN0LmltcG9ydFR5cGVcbiAgICBkYXRhLmNvbnZlcnQ2RSA9IGRhdGEub2JqZWN0LmNvbnZlcnQ2RVxuICAgIGRhdGEuc291cmNlID0gZGF0YS5vYmplY3Quc291cmNlXG4gICAgZGF0YS5jaGFyYWN0ZXJEYXRhID0gZGF0YS5vYmplY3QuY2hhcmFjdGVyRGF0YVxuICAgIGRhdGEuY2FuVXBsb2FkID0gZ2FtZS51c2VyPy5jYW4oJ0ZJTEVTX1VQTE9BRCcpXG4gICAgaWYgKFsnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoZGF0YS5pbXBvcnRUeXBlKSkge1xuICAgICAgZGF0YS5sYW5ndWFnZXMgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRUcmFuc2xhdGlvbnMoKVxuICAgICAgZGF0YS5sYW5ndWFnZSA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoXG4gICAgICAgIGRhdGEub2JqZWN0Lmxhbmd1YWdlXG4gICAgICApXG4gICAgICBkYXRhLnBsYWNlaG9sZGVyID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0RXhhbXBsZVRleHQoZGF0YS5sYW5ndWFnZSlcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcjZGhvbGVob3VzZS1jaGFyYWN0ZXItcHJldmlldycpLmhpZGUoKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjY29jLWVudGl0eS10eXBlLCNjb2MtZW50aXR5LWxhbmcnKVxuICAgICAgLmNoYW5nZSh0aGlzLl9vbkNoYW5nZVN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjZGhvbGVob3VzZS1qc29uLWZpbGUtcGlja2VyJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25KU09ORmlsZVNlbGVjdGVkLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKVxuICAgICAgLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcnNUb29FeHRlbmRlZCA9ICQodGhpcylcbiAgICAgICAgICAudmFsKClcbiAgICAgICAgICAubWF0Y2goL1tcXHVkYmMwLVxcdWRiZmVdW1xcdWRjMDAtXFx1ZGZmZl0vKVxuICAgICAgICBjb25zdCBwcm9tcHQgPSAkKCcjY29jLXByb21wdCcpXG4gICAgICAgIGlmIChwcm9tcHQuZGF0YSgnZXh0ZW5kZWQnKSAmJiBjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQpIHtcbiAgICAgICAgICBwcm9tcHRcbiAgICAgICAgICAgIC5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZXh0RmllbGRJbnZhbGlkQ2hhcmFjdGVycycpKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdlcnJvcicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvbXB0Lmh0bWwocHJvbXB0LmRhdGEoJ3RleHQnKSkucmVtb3ZlQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50cmlnZ2VyKCdrZXl1cCcpXG5cbiAgICBodG1sLmZpbmQoJy5zdWJtaXQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25DbGlja1N1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnZm9ybScpLnN1Ym1pdChlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMgZ2V0SW5wdXRzIGV4dHJhY3RzIHRoZSBkYXRhIGZyb20gdGhlIGlucHV0IGZpZWxkcyBhbmRcbiAgICogYWRkcyBhIGAuYCBhdCB0aGUgZW5kIGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUuXG4gICAqL1xuICBzdGF0aWMgZ2V0SW5wdXRzIChmb3JtKSB7XG4gICAgY29uc3QgaW5wdXRzID0ge31cbiAgICBpbnB1dHMuZW50aXR5ID0gZm9ybS5maW5kKCcjY29jLWVudGl0eS10eXBlJykudmFsKCkudHJpbSgpXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2VudGl0eSB0eXBlOicsIGlucHV0cy5lbnRpdHkpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtY29udmVydC02RScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID0gZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS52YWwoKS50cmltKClcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1lbnRpdHktbGFuZycpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy5sYW5nID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShcbiAgICAgICAgZm9ybS5maW5kKCcjY29jLWVudGl0eS1sYW5nJykudmFsKCkudHJpbSgpXG4gICAgICApXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNzb3VyY2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMuc291cmNlID0gZm9ybS5maW5kKCcjc291cmNlJykudmFsKCkudHJpbSgpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLnRleHQgPSBmb3JtLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykudmFsKCkudHJpbSgpXG4gICAgfVxuXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3JlY2VpdmVkIHRleHQnLCAnIyMnICsgaW5wdXRzLnRleHQgKyAnIyMnKVxuICAgIH1cbiAgICByZXR1cm4gaW5wdXRzXG4gIH1cblxuICBfb25KU09ORmlsZVNlbGVjdGVkIChldmVudCkge1xuICAgIGNvbnN0IGpzb25GaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1qc29uLWZpbGUtcGlja2VyJylcbiAgICBjb25zdCBwb3J0cmFpdEltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAnZGhvbGVob3VzZS1jaGFyYWN0ZXItcG9ydHJhaXQnXG4gICAgKVxuICAgIGNvbnN0IGNoYXJhY3Rlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1jaGFyYWN0ZXItbmFtZScpXG4gICAgY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWNoYXJhY3Rlci1wcmV2aWV3JylcbiAgICBjb25zdCBmaWxlID0ganNvbkZpbGVJbnB1dC5maWxlc1swXVxuICAgIGNvbnN0IGRpYWxvZyA9IHRoaXNcbiAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRpYWxvZy5jaGFyYWN0ZXJKU09OID0gSlNPTi5wYXJzZShmaWxlUmVhZGVyLnJlc3VsdClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgJCgnI2NvYy1wcm9tcHQnKVxuICAgICAgICAgIC5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZXh0RmllbGRJbnZhbGlkSlNPTicpKVxuICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgcGVyc29uYWxEZXRhaWxzID1cbiAgICAgICAgZGlhbG9nLmNoYXJhY3RlckpTT04/LkludmVzdGlnYXRvcj8uUGVyc29uYWxEZXRhaWxzXG4gICAgICBpZiAoIXBlcnNvbmFsRGV0YWlscykge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EaG9sZUhvdXNlSW52YWxpZEFjdG9yJylcbiAgICAgICAgKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNoYXJhY3Rlck5hbWUudGV4dENvbnRlbnQgPSBwZXJzb25hbERldGFpbHMuTmFtZVxuICAgICAgcG9ydHJhaXRJbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBwZXJzb25hbERldGFpbHMuUG9ydHJhaXRcbiAgICAgIHByZXZpZXcuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICQoJy5kaWFsb2cuYWN0b3ItaW1wb3J0ZXInKS5oZWlnaHQoJ2F1dG8nKVxuICAgIH1cbiAgICBmaWxlUmVhZGVyLnJlYWRBc1RleHQoZmlsZSlcbiAgfVxuXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrU3VibWl0IChldmVudCkge1xuICAgIGNvbnN0IGlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmJ1dHRvblxuICAgIGlmIChpZCA9PT0gJ25vJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfSBlbHNlIGlmIChpZCA9PT0gJ2dldEV4YW1wbGVOb3cnKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0RXhhbXBsZVRleHQoXG4gICAgICAgIHRoaXMub2JqZWN0Lmxhbmd1YWdlXG4gICAgICApXG4gICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZChjb250ZW50KS50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29waWVkJykpXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoaWQgPT09ICdpbXBvcnQnKSB7XG4gICAgICBjb25zdCBhcHAgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Rpdi5kaWFsb2cuYWN0b3ItaW1wb3J0ZXInKVxuICAgICAgYXBwLmhpZGUoKVxuICAgICAgY29uc3QgZm9ybSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnZm9ybScpXG4gICAgICBjb25zdCBpbnB1dHMgPSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5nZXRJbnB1dHMoZm9ybSlcbiAgICAgIGlmIChpbnB1dHMuZW50aXR5ID09PSAnZGhvbGVob3VzZScgJiYgdGhpcy5jaGFyYWN0ZXJKU09OKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9XG4gICAgICAgICAgYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlKFxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJKU09OLFxuICAgICAgICAgICAgeyBzb3VyY2U6IGlucHV0cy5zb3VyY2UgfVxuICAgICAgICAgIClcbiAgICAgICAgaWYgKGNoYXJhY3RlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnY2hhcmFjdGVyOicsIGNoYXJhY3RlcilcbiAgICAgICAgICB9XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BY3RvckltcG9ydGVkJywge1xuICAgICAgICAgICAgICBhY3RvclR5cGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5DaGFyYWN0ZXInKSxcbiAgICAgICAgICAgICAgYWN0b3JOYW1lOiBjaGFyYWN0ZXIubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgY2hhcmFjdGVyLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwcC5zaG93KClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbnB1dHMudGV4dCAmJiBpbnB1dHMudGV4dCAhPT0gJycpIHtcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuaW1wb3J0QWN0b3IoaW5wdXRzKVxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcC5zaG93KClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QuXG4gICAqL1xuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICB0aGlzLm9iamVjdC5pbXBvcnRUeXBlID0gZm9ybURhdGFbJ2NvYy1lbnRpdHktdHlwZSddXG4gICAgdGhpcy5vYmplY3QuY2hhcmFjdGVyRGF0YSA9IGZvcm1EYXRhWydjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJ10/LnRyaW0oKVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1jb252ZXJ0LTZFJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5jb252ZXJ0NkUgPSBmb3JtRGF0YVsnY29jLWNvbnZlcnQtNkUnXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtZW50aXR5LWxhbmcnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmxhbmd1YWdlID0gZm9ybURhdGFbJ2NvYy1lbnRpdHktbGFuZyddXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGEuc291cmNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc291cmNlID0gZm9ybURhdGEuc291cmNlXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogaW1wb3J0QWN0b3IgaW1wb3J0cyBhbiBBY3RvciB1c2luZyB0aGUgZGlhbG9nIGRhdGFcbiAgICogQHBhcmFtIHtodG1sfSBodG1sXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW1wb3J0QWN0b3IgKGlucHV0cykge1xuICAgIGlmIChpbnB1dHMudGV4dFtpbnB1dHMudGV4dC5sZW5ndGhdICE9PSAnLicpIHtcbiAgICAgIGlucHV0cy50ZXh0ICs9ICcuJyAvLyBBZGQgYSBkb3QgYSB0aGUgZW5kIHRvIGhlbHAgdGhlIHJlZ2V4IGZpbmQgdGhlIGVuZFxuICAgIH1cbiAgICBjb25zdCBhY3RvciA9IG5ldyBDb0M3QWN0b3JJbXBvcnRlcigpXG4gICAgY29uc3QgY3JlYXRlZEFjdG9yID0gYXdhaXQgYWN0b3IuY3JlYXRlQWN0b3IoaW5wdXRzKVxuICAgIC8vIEFjdG9yIGNyZWF0ZWQsIE5vdGlmeSB0aGUgdXNlciBhbmQgc2hvdyB0aGUgc2hlZXQuXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZWRBY3RvcjonLCBjcmVhdGVkQWN0b3IpXG4gICAgfVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWN0b3JJbXBvcnRlZCcsIHtcbiAgICAgICAgYWN0b3JUeXBlOiBjcmVhdGVkQWN0b3IudHlwZT8udG9VcHBlckNhc2UoKSxcbiAgICAgICAgYWN0b3JOYW1lOiBjcmVhdGVkQWN0b3IubmFtZVxuICAgICAgfSlcbiAgICApXG4gICAgYXdhaXQgY3JlYXRlZEFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIC8vIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBVcGRhdGVyLnVwZGF0ZUFjdG9yKG5wYylcbiAgICAvLyBjb25zb2xlLmRlYnVnKCd1cGRhdGVkOicsIHVwZGF0ZWQpXG4gIH1cblxuICAvLyAvKipcbiAgLy8gICogY3JlYXRlIGl0J3MgdGhlIGRlZmF1bHQgd2ViIHRvIGNyYXRlIHRoZSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZ1xuICAvLyAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5pbXBvcnRUeXBlID0gb3B0aW9ucy5pbXBvcnRUeXBlID8/ICducGMnXG4gICAgb3B0aW9ucy5sYW5ndWFnZSA9XG4gICAgICBvcHRpb25zLmxhbmd1YWdlID8/IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UobnVsbClcbiAgICBvcHRpb25zLmNvbnZlcnQ2RSA9IG9wdGlvbnMubGFuZ3VhZ2UgPz8gJ2NvYy1ndWVzcydcbiAgICBvcHRpb25zLnNvdXJjZSA9IG9wdGlvbnMuc291cmNlID8/ICdpd21zJ1xuICAgIG9wdGlvbnMuY2hhcmFjdGVyRGF0YSA9IG9wdGlvbnMuY2hhcmFjdGVyRGF0YSA/PyAnJ1xuXG4gICAgbmV3IENvQzdBY3RvckltcG9ydGVyRGlhbG9nKG9wdGlvbnMpLnJlbmRlcih0cnVlKVxuICB9XG59XG5cbkhvb2tzLm9uY2UoJ3JlYWR5JywgKCkgPT4ge1xuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnQ29DNy1JbXBvcnRlci1UZXN0cycpPy5hY3RpdmUpIHtcbiAgICB3aW5kb3cuQ29DN0FjdG9ySW1wb3J0ZXIgPSBDb0M3QWN0b3JJbXBvcnRlclxuICB9XG59KVxuIiwiLyogZ2xvYmFsIERpYWxvZywgZm91bmRyeSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIERyb3BDb0NJRCBleHRlbmRzIERpYWxvZyB7XG4gIHN0YXRpYyBwcm9jZXNzRm9ybSAocmVzcG9uc2UsIGVsZW1lbnQsIHJlc29sdmUpIHtcbiAgICBpZiAoZWxlbWVudC5maW5kKCdpbnB1dCcpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkcm9wQ29DSUQnLCAocmVzcG9uc2UgPyAnWScgOiAnTicpKVxuICAgIH1cbiAgICByZXNvbHZlKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NJdGVtIChyZXNwb25zZSwgaXRlbSkge1xuICAgIGlmIChyZXNwb25zZSAmJiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkKSB7XG4gICAgICByZXR1cm4gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgIH1cbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKCkge1xuICAgIGNvbnN0IGRyb3BDb0NJRCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Ryb3BDb0NJRCcpXG4gICAgc3dpdGNoIChkcm9wQ29DSUQpIHtcbiAgICAgIGNhc2UgJyc6XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICBjb25zdCBkbGcgPSBuZXcgRHJvcENvQ0lEKHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5OYW1lJyksXG4gICAgICAgICAgICBjb250ZW50OiAnPHA+JyArIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELkRpYWxvZycpICsgJzwvcD48cD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJyZW1lbWJlcnRoaXNcIiBzdHlsZT1cInZlcnRpY2FsLWFsaWduOiBzdWI7XCI+PGxhYmVsIGZvcj1cInJlbWVtYmVydGhpc1wiPicgKyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5SZW1lbWJlcicpICsgJzwvbGFiZWw+PC9wPicsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYXBwJywgJ2RpYWxvZyddLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICB5ZXM6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdZZXMnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKGVsZW1lbnQpID0+IHsgRHJvcENvQ0lELnByb2Nlc3NGb3JtKHRydWUsIGVsZW1lbnQsIHJlc29sdmUpIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbm86IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdObycpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZWxlbWVudCkgPT4geyBEcm9wQ29DSUQucHJvY2Vzc0Zvcm0oZmFsc2UsIGVsZW1lbnQsIHJlc29sdmUpIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgICAgICB9KVxuICAgICAgY2FzZSAnWSc6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBjYXNlICdOJzpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRHJhZ0Ryb3AsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN09jY3VwYXRpb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vbkdyb3VwSXRlbURlbGV0ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkdyb3VwQ29udHJvbC5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmRyb3BwYWJsZScsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgZHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBvcHRpb25hbFNraWxsID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsYXNzTGlzdD8uY29udGFpbnMoJ29wdGlvbmFsLXNraWxscycpXG4gICAgY29uc3Qgb2wgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xvc2VzdCgnb2wnKVxuICAgIGNvbnN0IGluZGV4ID0gb2w/LmRhdGFzZXQ/Lmdyb3VwXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpIDogW11cblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsU2tpbGwpIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZSAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIG1haW4gZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChncm91cHNbaW5kZXhdLnNraWxscy5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gZ3JvdXAgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgICAgfVxuICAgICAgICBncm91cHNbaW5kZXhdLnNraWxscyA9IGdyb3Vwc1tpbmRleF0uc2tpbGxzLmNvbmNhdChbRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcbiAgICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBzYW1lIHNraWxsIGlzIGluIG9uZSBvZiB0aGUgZ3JvdXAgcmVtb3ZlIGl0IGZyb20gdGhlIGdyb3Vwc1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBncm91cHNbaV0uc2tpbGxzLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGdyb3Vwc1tpXS5za2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3Rpb24ucHVzaChEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pKVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uR3JvdXBDb250cm9sIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgLy8gQWRkIG5ldyBkYW1hZ2UgY29tcG9uZW50XG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtZ3JvdXAnKSkge1xuICAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpIC8vIFN1Ym1pdCBhbnkgdW5zYXZlZCBjaGFuZ2VzXG4gICAgICBjb25zdCBncm91cHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwc1xuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzLmNvbmNhdChbeyBvcHRpb25zOiAwLCBza2lsbHM6IFtdIH1dKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ3JlbW92ZS1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgICAgY29uc3Qgb2wgPSBhLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgICAgZ3JvdXBzLnNwbGljZShOdW1iZXIob2wuZGF0YXNldC5ncm91cCksIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbGkgPSBvYmoucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gb2JqLmNsb3Nlc3QoJy5ncm91cCcpXG4gICAgbGV0IGl0ZW1cbiAgICBpZiAoZ3JvdXAubGVuZ3RoKSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbZ3JvdXAuZGF0YSgnZ3JvdXAnKV1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiB0aGlzLml0ZW0uZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Hcm91cEl0ZW1EZWxldGUgKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gTnVtYmVyKGl0ZW0uY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpLmRhdGEoJ2dyb3VwJykpXG4gICAgY29uc3QgZ3JvdXBzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpXG4gICAgaWYgKHR5cGVvZiBncm91cHNbZ3JvdXBdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIGNvbnN0IENvQ0lkID0gaXRlbS5kYXRhKCdjb2NpZCcpXG4gICAgICBjb25zdCBpdGVtSW5kZXggPSBncm91cHNbZ3JvdXBdLnNraWxscy5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgICAgZ3JvdXBzW2dyb3VwXS5za2lsbHMuc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvb2NjdXBhdGlvbi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGZvciAobGV0IGluZGV4ID0gMCwgbGVuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4IDwgbGVuOyBpbmRleCsrKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyB9KVxuXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5pc0VtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSBDb0M3T2NjdXBhdGlvblNoZWV0Lm9jY3VwYXRpb25Qb2ludHNTdHJpbmcoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cylcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0udHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gPyBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gOiBudWxsKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIHN0YXRpYyBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nIChvY2N1cGF0aW9uU2tpbGxQb2ludHMpIHtcbiAgICBjb25zdCBvcHRpb25uYWwgPSBbXVxuICAgIGNvbnN0IG1hbmRhdG9yeSA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgaWYgKGNhcmFjLm11bHRpcGxpZXIpIHtcbiAgICAgICAgY29uc3QgY2FyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICBvcHRpb25uYWwucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCAmJiAhY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICBtYW5kYXRvcnkucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChtYW5kYXRvcnkubGVuZ3RoKSBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG1hbmRhdG9yeS5qb2luKCcgKyAnKVxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmIG1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gYCArICgke29wdGlvbm5hbC5qb2luKG9yU3RyaW5nKX0pYFxuICAgIH1cbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiAhbWFuZGF0b3J5Lmxlbmd0aCkge1xuICAgICAgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBvcHRpb25uYWwuam9pbihvclN0cmluZylcbiAgICB9XG4gICAgcmV0dXJuIG9jY3VwYXRpb25Qb2ludHNTdHJpbmdcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5ncm91cHMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uZ3JvdXBzIHx8IFtdXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGZvcm1EYXRhW2BzeXN0ZW0uZ3JvdXBzLiR7aW5kZXh9LnNraWxsc2BdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxsc1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQ2hhdE1lc3NhZ2UsIENPTlNULCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIEhvb2tzLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0ludmVzdGlnYXRvcldpemFyZCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdpbnZlc3RpZ2F0b3Itd2l6YXJkJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5oYnMnLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNjAwLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzY3JvbGxZOiBbJy5zY3JvbGxzZWN0aW9uJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLmRyYWdnYWJsZScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XVxuICAgIH0pXG4gIH1cblxuICBnZXQgcGFnZUxpc3QgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBQQUdFX05PTkU6IC0xLFxuICAgICAgUEFHRV9JTlRST0RVQ1RJT046IDAsXG4gICAgICBQQUdFX0NPTkZJR1VSQVRJT046IDEsXG4gICAgICBQQUdFX1NFVFVQUzogMixcbiAgICAgIFBBR0VfQVJDSEVUWVBFUzogMyxcbiAgICAgIFBBR0VfQ0hBUkFDVElTVElDUzogNCxcbiAgICAgIFBBR0VfQVRUUklCVVRFUzogNSxcbiAgICAgIFBBR0VfVklFV19BVFRSSUJVVEVTOiA2LFxuICAgICAgUEFHRV9PQ0NVUEFUSU9OUzogNyxcbiAgICAgIFBBR0VfT0NDVVBBVElPTl9TS0lMTFM6IDgsXG4gICAgICBQQUdFX0FSQ0hFVFlQRV9TS0lMTFM6IDksXG4gICAgICBQQUdFX1BPSU5UU19TS0lMTFM6IDEwLFxuICAgICAgUEFHRV9JTlZFU1RJR0FUT1I6IDExLFxuICAgICAgUEFHRV9CQUNLU1RPUlk6IDEyLFxuICAgICAgUEFHRV9DUkVBVEU6IDEzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlcmlzdGljc01ldGhvZHMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBNRVRIT0RfREVGQVVMVDogMSxcbiAgICAgIE1FVEhPRF9ST0xMOiAxLFxuICAgICAgTUVUSE9EX1BPSU5UUzogMixcbiAgICAgIE1FVEhPRF9WQUxVRVM6IDNcbiAgICB9XG4gIH1cblxuICBnZXQgY29jaWRDcmVkaXRSYXRpbmcgKCkge1xuICAgIHJldHVybiAnaS5za2lsbC5jcmVkaXQtcmF0aW5nJ1xuICB9XG5cbiAgZ2V0IGNvY2lkTGFuZ3VhZ2VPd24gKCkge1xuICAgIHJldHVybiAnaS5za2lsbC5sYW5ndWFnZS1vd24nXG4gIH1cblxuICBnZXQgcGFnZU9yZGVyICgpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMucGFnZUxpc3RcbiAgICBsZXQgcGFnZU9yZGVyID0gW1xuICAgICAgcGFnZXMuUEFHRV9JTlRST0RVQ1RJT05cbiAgICBdXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0NPTkZJR1VSQVRJT04pXG4gICAgfVxuICAgIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXAgPT09ICcnKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX1NFVFVQUylcbiAgICB9XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVJDSEVUWVBFUylcbiAgICB9XG4gICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9DSEFSQUNUSVNUSUNTKVxuICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BVFRSSUJVVEVTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIgPSBwYWdlT3JkZXIuY29uY2F0KFtcbiAgICAgIHBhZ2VzLlBBR0VfVklFV19BVFRSSUJVVEVTLFxuICAgICAgcGFnZXMuUEFHRV9PQ0NVUEFUSU9OUyxcbiAgICAgIHBhZ2VzLlBBR0VfT0NDVVBBVElPTl9TS0lMTFNcbiAgICBdKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FSQ0hFVFlQRV9TS0lMTFMpXG4gICAgfVxuICAgIHBhZ2VPcmRlciA9IHBhZ2VPcmRlci5jb25jYXQoW1xuICAgICAgcGFnZXMuUEFHRV9QT0lOVFNfU0tJTExTLFxuICAgICAgcGFnZXMuUEFHRV9JTlZFU1RJR0FUT1IsXG4gICAgICBwYWdlcy5QQUdFX0JBQ0tTVE9SWSxcbiAgICAgIHBhZ2VzLlBBR0VfQ1JFQVRFXG4gICAgXSlcbiAgICByZXR1cm4gcGFnZU9yZGVyXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9hZENhY2hlSXRlbUJ5Q29DSUQgKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IC9eaVxcLi8sIHR5cGU6ICdpJywgc2hvd0xvYWRpbmc6IHRydWUgfSkudGhlbigoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdCA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgIGxpc3RbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gPSBpdGVtXG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShsaXN0KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCAocmVnZXhwKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSUQpLmZpbHRlcihlbnRyeSA9PiBlbnRyeVswXS5tYXRjaChyZWdleHApKS5tYXAoZW50cnkgPT4gZW50cnlbMV0pXG4gIH1cblxuICBhc3luYyBnZXRDYWNoZUl0ZW1CeUNvQ0lEIChpZCkge1xuICAgIHJldHVybiAoYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRClbaWRdID8/IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBhbmRJdGVtQXJyYXkgKGl0ZW1MaXN0KSB7XG4gICAgY29uc3QgaXRlbXMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ICE9PSAnc3RyaW5nJylcbiAgICBjb25zdCBjb2NpZHMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ID09PSAnc3RyaW5nJylcbiAgICBpZiAoY29jaWRzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRFxuICAgICAgY29uc3QgbWlzc2luZyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGNvY2lkIG9mIGNvY2lkcykge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbXMucHVzaChzb3VyY2VbY29jaWRdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NpbmcucHVzaChjb2NpZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVyYSA9IGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW3RoaXMub2JqZWN0LmRlZmF1bHRFcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiB0aGlzLm9iamVjdC5kZWZhdWx0RXJhIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5kb2N1bWVudHMtbm90LWZvdW5kJywgeyBjb2NpZHM6IG1pc3Npbmcuam9pbignLCAnKSwgbGFuZzogZ2FtZS5pMThuLmxhbmcsIGVyYSB9KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICBnZXRBZ2VBZGp1c3RtZW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0gPSAwXG4gICAgfVxuICAgIC8vIGVkdTogb3B0aW9uYWwgLSBudW1iZXIgb2YgZWR1IGltcHJvdmVtZW50IGNoZWNrc1xuICAgIC8vIGRlZHVjdDogb3B0aW9uYWwgLSBkZWR1Y3QgW3RvdGFsXSBiZXR3ZWVuIFtmcm9tXVxuICAgIC8vIHJlZHVjZTogb3B0aW9uYWwgLSBkZWR1Y3QgW3RvdGxhXSBmcm9tIFtmcm9tXVxuICAgIC8vIGx1Y2s6IG9wdGlvbmFsIC0gcmVyb2xsIGx1Y2sgYW5kIHRha2UgaGlnaGVyXG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuYWdlID49IDQwKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IE1hdGguZmxvb3IodGhpcy5vYmplY3QuYWdlIC8gMTApXG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSAtIDIgPiA0ID8gNCA6IGtleSAtIDIpLFxuICAgICAgICAgICAgcm9sbGVkOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVkdWN0OiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSA+IDEgPyA1ICogTWF0aC5wb3coMiwga2V5IC0gNCkgOiAwKSxcbiAgICAgICAgICAgIGZyb206IFsnc3RyJywgJ2NvbicsICdkZXgnXSxcbiAgICAgICAgICAgIHZhbHVlczoge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlZHVjZToge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgLSAzKSAqIDUsXG4gICAgICAgICAgICBmcm9tOiAnYXBwJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gMjApIHtcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgICAgcm9sbGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gMTUpIHtcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBkZWR1Y3Q6IHtcbiAgICAgICAgICAgIHRvdGFsOiA1LFxuICAgICAgICAgICAgZnJvbTogWydzdHInLCAnc2l6J10sXG4gICAgICAgICAgICB2YWx1ZXM6IHt9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWR1Y2U6IHtcbiAgICAgICAgICAgIHRvdGFsOiA1LFxuICAgICAgICAgICAgZnJvbTogJ2VkdSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGx1Y2s6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNbdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbV0gPSAtdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UudG90YWxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEucGFnZXMgPSB0aGlzLnBhZ2VMaXN0XG5cbiAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGZhbHNlXG5cbiAgICBsZXQgc2V0dXBcbiAgICBsZXQgYXJjaGV0eXBlXG4gICAgbGV0IG9jY3VwYXRpb25cblxuICAgIGxldCBzaG93TW9uZXRhcnkgPSBmYWxzZVxuXG4gICAgc3dpdGNoIChzaGVldERhdGEub2JqZWN0LnN0ZXApIHtcbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfSU5UUk9EVUNUSU9OOlxuICAgICAgICBzaGVldERhdGEuZXJhID0gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0RXJhIH0pXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0NPTkZJR1VSQVRJT046XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cHMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuc2V0dXBcXC4vKVxuICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5vY2N1cGF0aW9uXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5hcmNoZXR5cGVcXC4vKVxuICAgICAgICAgIHNldHVwID0gc2hlZXREYXRhLnNldHVwcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdFNldHVwID0gJydcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgPSAnJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICAgIHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLm93bmVyc2hpcCA9IHtcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVdOiAnT1dORVJTSElQLk5PTkUnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRF06ICdPV05FUlNISVAuTElNSVRFRCcsXG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUl06ICdPV05FUlNISVAuT0JTRVJWRVInLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJdOiAnT1dORVJTSElQLk9XTkVSJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFRcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0FyY2hldHlwZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpXG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9TRVRVUFM6XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9PT0gJycpIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgICAgc2V0dXAgPSBzaGVldERhdGEuc2V0dXBzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LnNldHVwKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRVM6XG4gICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLmFyY2hldHlwZVxcLi8pXG4gICAgICAgIGlmIChzaGVldERhdGEuYXJjaGV0eXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICBhcmNoZXR5cGUgPSBzaGVldERhdGEuYXJjaGV0eXBlcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuYm9udXNQb2ludHMgPSBhcmNoZXR5cGUuc3lzdGVtLmJvbnVzUG9pbnRzXG4gICAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpYyBpbiBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NvcmVDaGFyYWN0ZXJpc3RpY10pIHtcbiAgICAgICAgICAgICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjb3JlQ2hhcmFjdGVyaXN0aWMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9ICcnXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSBjb3JlQ2hhcmFjdGVyaXN0aWNzWzBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGNvcmVDaGFyYWN0ZXJpc3RpY3MubWFwKGMgPT4gYy50b0xvY2FsZVVwcGVyQ2FzZSgpKS5qb2luKCcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpICsgJyAnKVxuICAgICAgICAgICAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgICAgICAgICAgICBhcmNoZXR5cGUuc3lzdGVtLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgc2tpbGxzLnB1c2goc2tpbGwubmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gc2tpbGxzLmpvaW4oJywgJylcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnN1Z2dlc3RlZE9jY3VwYXRpb25zID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkT2NjdXBhdGlvbnMsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuc3VnZ2VzdGVkVHJhaXRzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUzpcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgIHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCB8fCB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwID0ge1xuICAgICAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICAgICAgcG9pbnRzOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSxcbiAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnc3RyJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuc3RyLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdjb24nLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5jb24sXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdzaXonLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5zaXosXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnZGV4JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZGV4LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnYXBwJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuYXBwLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2ludCcsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmludCxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3BvdycsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnBvdyxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnZWR1JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZWR1LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgbHVjazoge1xuICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjayxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NvQzcuTHVjaydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgICAgICBhcmNoZXR5cGUgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpYyBpbiBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY29yZUNoYXJhY3RlcmlzdGljXSkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGNvcmVDaGFyYWN0ZXJpc3RpYyxcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KHNoZWV0RGF0YS5zZXR1cC5jaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSBjb3JlQ2hhcmFjdGVyaXN0aWMpPy5sYWJlbCA/PyAnVW5rbm93bicpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cC5jaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMpLnJvbGwgPSBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZW1wdGllcyA9IGZhbHNlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuc2V0dXAudG90YWwgKz0gcGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdGllcyA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljID0gdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljLnRvTG9jYWxlVXBwZXJDYXNlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZW1wdGllcyAmJiB0aGlzLm9iamVjdC5hZ2UgPj0gMTUpIHtcbiAgICAgICAgICAgICAgaWYgKFtzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUk9MTCwgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU10uaW5jbHVkZXMoc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCkpIHtcbiAgICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEuc2V0dXAudG90YWwudG9TdHJpbmcoKSA9PT0gc2hlZXREYXRhLnNldHVwLnBvaW50cy50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgbWluOiAtcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgMSxcbiAgICAgICAgICAgIGxhYmVsOiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoa2V5KS5sYWJlbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJyAmJiAhdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmRlZHVjdFRvdGFsID0gMFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20pIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCA9IHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCAtIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuZGVkdWN0RnJvbSA9IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20ubWFwKG4gPT4gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuJyArIG4udG9VcHBlckNhc2UoKSkpLmpvaW4oJywgJykucmVwbGFjZSgvKCwgKShbXixdKykkLywgJyQxJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpICsgJyAkMicpLnJlcGxhY2UoL14oW14sXSspLChbXixdKykkLywgJyQxJDInKVxuICAgICAgICAgIGlmIChzaGVldERhdGEuZGVkdWN0VG90YWwgIT09IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LnRvdGFsKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnJlZHVjZUZyb20gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy4nICsgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbS50b1VwcGVyQ2FzZSgpKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5sdWNrICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5sdWNrVmFsdWUgPSBNYXRoLm1heCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5sdWNrLCB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrKVxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID09PSAwKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfVklFV19BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICAgIHN1ZmZpeDogJyUnLFxuICAgICAgICAgICAgbGFiZWw6IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhrZXkpLmxhYmVsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuZGIgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmRiRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3LkJvbnVzRGFtYWdlJ1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihzaGVldERhdGEucG9pbnRzLmRiLnZhbHVlKSB8fCBOdW1iZXIoc2hlZXREYXRhLnBvaW50cy5kYi52YWx1ZSkgPj0gMCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMuZGIucHJlZml4ID0gJysnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5idWlsZCA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuQnVpbGQnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihzaGVldERhdGEucG9pbnRzLmJ1aWxkLnZhbHVlKSA+PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50cy5idWlsZC5wcmVmaXggPSAnKydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmhwID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5ocEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cywgJ2NoYXJhY3RlcicpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuSGl0UG9pbnRzJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuaHAucHJlZml4ID0gc2hlZXREYXRhLnBvaW50cy5ocC52YWx1ZSArICcvJ1xuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1wID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5tcEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5NYWdpY1BvaW50cydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1wLnByZWZpeCA9IHNoZWV0RGF0YS5wb2ludHMubXAudmFsdWUgKyAnLydcbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5zYW4gPSB7XG4gICAgICAgICAgdmFsdWU6IHNoZWV0RGF0YS5wb2ludHMucG93LnZhbHVlLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnLzk5JyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuU2FuaXR5J1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubW92ID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5tb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMsICdjaGFyYWN0ZXInLCB0aGlzLm9iamVjdC5hZ2UpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuTW92ZW1lbnQnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfT0NDVVBBVElPTlM6XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5vY2N1cGF0aW9uXFwuLylcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgICAgIG9jY3VwYXRpb24gPSBzaGVldERhdGEub2NjdXBhdGlvbnMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbilcbiAgICAgICAgICBpZiAodHlwZW9mIG9jY3VwYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICAgIG9jY3VwYXRpb24uc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSBDb0M3T2NjdXBhdGlvblNoZWV0Lm9jY3VwYXRpb25Qb2ludHNTdHJpbmcob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKVxuICAgICAgICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZyA9IG9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZ1xuICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxcbiAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbFRleHQgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFRleHRcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5za2lsbHMpXG4gICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzID0ge31cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tpbmRleF0ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBza2lsbHM6IFtdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEucG9pbnRzID0gMFxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyArPSBjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfSU5WRVNUSUdBVE9SOlxuICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2UgPSAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZExhbmd1YWdlT3duXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgIGlmIChzaGVldERhdGEubGFuZ3VhZ2UpIHtcbiAgICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2VOYW1lID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkTGFuZ3VhZ2VPd25dLml0ZW0ubmFtZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0RGF0YS5sYW5ndWFnZU5hbWUgPSAnJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX09DQ1VQQVRJT05fU0tJTExTOlxuICAgICAgICBzaGVldERhdGEuZGVmYXVsdCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkID0gMFxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcyA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNraWxsSXRlbXMpIHtcbiAgICAgICAgICBsZXQgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgY29uc3Qgcm93cyA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MubGVuZ3RoXG4gICAgICAgICAgY29uc3QgaXNNdWx0aXBsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLmZsYWdzLmlzTXVsdGlwbGVcbiAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXg6IC0xLFxuICAgICAgICAgICAgICBuYW1lOiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwLFxuICAgICAgICAgICAgICB0b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgIGlzUGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcm93czsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGlzUGlja2FibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmlzT2NjdXBhdGlvbkRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnZGVmYXVsdCdcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5kZWZhdWx0KytcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaW5PY2N1cGF0aW9uR3JvdXAgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaW5PY2N1cGF0aW9uR3JvdXBcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b2dnbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5vY2N1cGF0aW9uVG9nZ2xlXG4gICAgICAgICAgICBpZiAoaXNQaWNrYWJsZSkge1xuICAgICAgICAgICAgICB0b2dnbGUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGxldCBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIGxldCBwaWNrZWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IGRlbGV0ZWFibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZFxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9nZ2xlIHx8IChpc1BpY2thYmxlICYmIHBpY2tlZCkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lXG4gICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBkZWxldGVhYmxlID0gIXNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmFyY2hldHlwZVRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwOiBncm91cC50b1N0cmluZygpLFxuICAgICAgICAgICAgICB0b2dnbGUsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc0NyZWRpdFJhdGluZyxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzUGlja2FibGUsXG4gICAgICAgICAgICAgIHBpY2tlZCxcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIHNraWxsTmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLm1heCA9IChwYXJzZUludChzaGVldERhdGEuZGVmYXVsdCwgMTApIHx8IDApICsgKHBhcnNlSW50KHNoZWV0RGF0YS5vYmplY3QucGVyc29uYWwsIDEwKSB8fCAwKSArIE9iamVjdC52YWx1ZXMoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uR3JvdXBzKS5yZWR1Y2UoKHMsIHYpID0+IHMgKyAocGFyc2VJbnQodiwgMTApIHx8IDApLCAwKVxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5zZWxlY3RlZCA9PT0gc2hlZXREYXRhLm1heCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQVJDSEVUWVBFX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLm1heCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkID0gMFxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcyA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNraWxsSXRlbXMpIHtcbiAgICAgICAgICBsZXQgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgY29uc3Qgcm93cyA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MubGVuZ3RoXG4gICAgICAgICAgY29uc3QgaXNNdWx0aXBsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLmZsYWdzLmlzTXVsdGlwbGVcbiAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXg6IC0xLFxuICAgICAgICAgICAgICBuYW1lOiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwLFxuICAgICAgICAgICAgICB0b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgIGlzUGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcm93czsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGlzUGlja2FibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmlzQXJjaGV0eXBlRGVmYXVsdCkge1xuICAgICAgICAgICAgICBncm91cCA9ICdkZWZhdWx0J1xuICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGlzUGlja2FibGUgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLm1heCsrXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b2dnbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5hcmNoZXR5cGVUb2dnbGVcbiAgICAgICAgICAgIGlmIChpc1BpY2thYmxlKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgbGV0IHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgbGV0IHBpY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgZGVsZXRlYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b2dnbGUgfHwgKGlzUGlja2FibGUgJiYgcGlja2VkKSkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWVcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUgPSAhc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0ub2NjdXBhdGlvblRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwOiBncm91cC50b1N0cmluZygpLFxuICAgICAgICAgICAgICB0b2dnbGUsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzUGlja2FibGUsXG4gICAgICAgICAgICAgIHBpY2tlZCxcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIHNraWxsTmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEuc2VsZWN0ZWQgPT09IHNoZWV0RGF0YS5tYXgpIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX1BPSU5UU19TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5za2lsbHMgPSBbXVxuICAgICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nT2theSA9ICEodGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCA+IDApXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbCA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMiAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5pbnQsIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbiA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlbWFpbmluZzogMFxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgIHNob3dNb25ldGFyeSA9IChhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQoc2hlZXREYXRhLm9iamVjdC5zZXR1cCkpLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMubGVuZ3RoID4gMFxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb24gIT09ICcnKSB7XG4gICAgICAgICAgb2NjdXBhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgICAgICAgIGlmIChvY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbi50b3RhbCArPSBjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgKz0gTWF0aC5tYXgoLi4ub3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgICAgICBjb25zdCBhcmNoZXR5cGUgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKHRoaXMub2JqZWN0LmFyY2hldHlwZSlcbiAgICAgICAgICBpZiAoYXJjaGV0eXBlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZS50b3RhbCA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMub2JqZWN0LnNraWxsSXRlbXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XVxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IHNraWxsLnJvd3MubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHNraWxsLnJvd3NbaW5kZXhdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwuZmxhZ3MuaXNNdWx0aXBsZSB8fCByb3cuc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbC5pdGVtKVxuICAgICAgICAgICAgICAgIGlmIChyb3cuc2VsZWN0ZWQgIT09IGZhbHNlICYmIHR5cGVvZiByb3cuc2VsZWN0ZWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgnQCcgKyBrZXksICdpJylcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZShyZWdFeCwgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdG90YWxQb2ludHMgPSBwYXJzZUludChiYXNlLCAxMClcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5vY2N1cGF0aW9uUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cylcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraWxsLmZsYWdzLmlzQ3JlZGl0UmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSArICcgWycgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluICsgJyAtICcgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ICsgJ10nXG4gICAgICAgICAgICAgICAgICBpZiAodG90YWxQb2ludHMgPj0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiAmJiB0b3RhbFBvaW50cyA8PSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvdy5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyByb3cuc2VsZWN0ZWQgKyAnKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGlzT2NjdXBhdGlvbjogcm93Lm9jY3VwYXRpb25Ub2dnbGUsXG4gICAgICAgICAgICAgICAgICBpc0FyY2hldHlwZTogcm93LmFyY2hldHlwZVRvZ2dsZSxcbiAgICAgICAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICAgICAgICBwZXJzb25hbFBvaW50czogcm93LnBlcnNvbmFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgb2NjdXBhdGlvblBvaW50czogcm93Lm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6IHJvdy5hcmNoZXR5cGVQb2ludHMsXG4gICAgICAgICAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiByb3cuZXhwZXJpZW5jZVBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgc2hvd0NyZWRpdFJhdGluZzogc2hvd01vbmV0YXJ5ICYmIGtleSA9PT0gdGhpcy5jb2NpZENyZWRpdFJhdGluZ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5yZW1haW5pbmcgPSBzaGVldERhdGEucGVyc29uYWwudG90YWwgLSBzaGVldERhdGEucGVyc29uYWwuY291bnRcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24ucmVtYWluaW5nID0gc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgLSBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudFxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgLSBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQkFDS1NUT1JZOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgYWxsQmFja3N0b3JpZXMgPSBhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUJhY2tzdG9yaWVzXG4gICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzID0ge31cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYmFja3N0b3JpZXNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgICAgIHJvbGxzOiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCh0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0ua2V5LCBhbGxCYWNrc3RvcmllcykubGVuZ3RoID8gdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSA6ICcnKSxcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ1JFQVRFOlxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5rZXlwcmVzcyhlID0+IC90ZXh0YXJlYS9pLnRlc3QoKGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCkudGFnTmFtZSkgfHwgKGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGUgfHwgMCkgIT09IDEzKVxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdF9vbl9jaGFuZ2UnKS5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yb2xsLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbmNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlY3JlYXNlLTEwLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2FsbCcpLmNsaWNrKHRoaXMuX29uUm9sbEFsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfZWR1JykuY2xpY2sodGhpcy5fb25Sb2xsRWR1LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9sdWNrJykuY2xpY2sodGhpcy5fb25Sb2xsTHVjay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc3VibWl0X29uX2JsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5zYXZlLWNoYXJhY3RlcmlzdGljLW9uLWJsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2F2ZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS50b2dnbGVhYmxlJykuY2xpY2sodGhpcy5fb25Ub2dnbGVTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0uY2xpY2thYmxlJykuY2xpY2sodGhpcy5fb25DbGlja1BpY2tTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IGlucHV0JykuY2xpY2sodGhpcy5fb25DbGlja1NraWxsU3BlY2lhbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IC5yZW1vdmUtc2tpbGwnKS5jbGljayh0aGlzLl9vbkNsaWNrUmVtb3ZlU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnNraWxsLWFkanVzdG1lbnQnKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2tpbGxQb2ludHMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ3RleHRhcmVhLmJhY2tzdG9yeS10ZXh0Jykua2V5dXAodGhpcy5fb25DaGFuZ2VCYWNrc3RvcnlUZXh0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24uYmFja3N0b3J5LXJvbGwnKS5jbGljayh0aGlzLl9vblJvbGxCYWNrc3RvcnkuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5iYWNrc3RvcnktcmVzZXQnKS5jbGljayh0aGlzLl9vblJlc2V0QmFja3N0b3J5LmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyByb2xsTWVzc2FnZSAocm9sbHMpIHtcbiAgICBpZiAocm9sbHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBodG1sID0gW11cbiAgICAgIGZvciAoY29uc3Qgcm9sbCBvZiByb2xscykge1xuICAgICAgICBodG1sLnB1c2goYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgICAgZm9ybXVsYTogKENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhyb2xsWzBdKT8ubGFiZWwgPz8gcm9sbFswXSkgKyAnOiAnICsgcm9sbFsxXSxcbiAgICAgICAgICB0b29sdGlwOiBhd2FpdCByb2xsWzJdLmdldFRvb2x0aXAoKSxcbiAgICAgICAgICB0b3RhbDogcm9sbFsyXS50b3RhbFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBodG1sLmpvaW4oJzxkaXY+Jm5ic3A7PC9kaXY+JyksXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFkZEl0ZW1Ub0xpc3QgKGl0ZW0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdCA9IGZhbHNlLCBpbk9jY3VwYXRpb25Hcm91cCA9IGZhbHNlLCBvY2N1cGF0aW9uVG9nZ2xlID0gZmFsc2UsIGlzQXJjaGV0eXBlRGVmYXVsdCA9IGZhbHNlLCBhcmNoZXR5cGVUb2dnbGUgPSBmYWxzZSwgaXNDcmVkaXRSYXRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBrZXkgPSAoaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkID8/IGl0ZW0ubmFtZSlcbiAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnKSB7XG4gICAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcy5wdXNoKGl0ZW0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXNNdWx0aXBsZSA9ICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCAmJiAoKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucmVxdWlyZXNuYW1lICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5vbmx5b25lID8/IGZhbHNlKSkgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5waWNrbmFtZW9ubHkgfHwgaXRlbS5uYW1lID09PSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFueVNwZWNOYW1lJykpKVxuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdCxcbiAgICAgIGluT2NjdXBhdGlvbkdyb3VwLFxuICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0LFxuICAgICAgaXNDcmVkaXRSYXRpbmcsXG4gICAgICBvY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgYXJjaGV0eXBlVG9nZ2xlXG4gICAgfVxuICAgIGNvbnN0IHJvd3MgPSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgIGFyY2hldHlwZVBvaW50czogJycsXG4gICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9IHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgZmxhZ3M6IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZmxhZ3MsIHsgaXNNdWx0aXBsZSB9LCB7IGlucGxhY2U6IGZhbHNlIH0pLFxuICAgICAgICByb3dzOiBbXVxuICAgICAgfVxuICAgICAgaWYgKCFpc011bHRpcGxlIHx8ICEoaXNPY2N1cGF0aW9uRGVmYXVsdCA9PT0gZmFsc2UgJiYgaW5PY2N1cGF0aW9uR3JvdXAgPT09IGZhbHNlICYmIGlzQXJjaGV0eXBlRGVmYXVsdCA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLnB1c2goZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChmbGFncywgcm93cywgeyBpbnBsYWNlOiBmYWxzZSB9KSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc011bHRpcGxlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBpbiBmbGFncykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdW2ZsYWddID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gfHwgZmxhZ3NbZmxhZ11cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaChmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZmxhZ3MuaXNDcmVkaXRSYXRpbmcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdLm9jY3VwYXRpb25Qb2ludHMgPSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluXG4gICAgfVxuICB9XG5cbiAgY2xlYXJTZXR1cFBvaW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSAnJ1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFNraWxsTGlzdHMgKCkge1xuICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXMgPSB7fVxuICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMgPSB7fVxuICAgIHRoaXMub2JqZWN0LmludmVzdGlnYXRvckl0ZW1zID0gW11cbiAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgY29uc3Qgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgY29uc3Qgb2NjdXBhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgIGxldCBhcmNoZXR5cGUgPSBmYWxzZVxuICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICBhcmNoZXR5cGUgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgIH1cbiAgICBpZiAoc2V0dXAgJiYgb2NjdXBhdGlvbiAmJiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykgfHwgYXJjaGV0eXBlKSkge1xuICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMgPSBbXVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNldHVwLnN5c3RlbS5iaW9TZWN0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMucHVzaCh7XG4gICAgICAgICAgbmFtZTogc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zW2luZGV4XSxcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAga2V5OiAncnQuLmJhY2tzdG9yeS0nICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZShzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnNbaW5kZXhdKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucGVyc29uYWwgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFxuICAgICAgdGhpcy5vYmplY3QucGVyc29uYWxUZXh0ID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxUZXh0XG4gICAgICB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcgPSBvY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmdcbiAgICAgIGxldCBpdGVtcyA9IFtdXG4gICAgICBpdGVtcyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KHNldHVwLnN5c3RlbS5pdGVtcylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW1zW2luZGV4XSlcbiAgICAgIH1cbiAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uc2tpbGxzKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdLCB7IGlzT2NjdXBhdGlvbkRlZmF1bHQ6IHRydWUsIG9jY3VwYXRpb25Ub2dnbGU6IHRydWUgfSlcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGdyb3VwID0gMCwgZ20gPSBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBncm91cCA8IGdtOyBncm91cCsrKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHNbZ3JvdXBdID0gb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2dyb3VwXS5vcHRpb25zXG4gICAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2dyb3VwXS5za2lsbHMpXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdLCB7IGluT2NjdXBhdGlvbkdyb3VwOiBncm91cCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYXJjaGV0eXBlKSB7XG4gICAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMpXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdLCB7IGlzQXJjaGV0eXBlRGVmYXVsdDogdHJ1ZSwgYXJjaGV0eXBlVG9nZ2xlOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChOdW1iZXIodGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG5hbWVDcmVkaXRSYXRpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyB0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nKVxuICAgICAgICBjb25zdCBmbGFncyA9IHsgaXNPY2N1cGF0aW9uRGVmYXVsdDogdHJ1ZSwgb2NjdXBhdGlvblRvZ2dsZTogdHJ1ZSwgaXNDcmVkaXRSYXRpbmc6IHRydWUgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZENyZWRpdFJhdGluZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZENyZWRpdFJhdGluZ10uaXRlbSwgZmxhZ3MpXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNbbmFtZUNyZWRpdFJhdGluZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KHRoaXMub2JqZWN0LnNraWxsSXRlbXNbbmFtZUNyZWRpdFJhdGluZ10uaXRlbSwgZmxhZ3MpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKHRoaXMuY29jaWRDcmVkaXRSYXRpbmcpXG4gICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KHNraWxsWzBdLCBmbGFncylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY0tleSkge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSB7IHR5cGU6ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycsIGtleTogZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5LCB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnZhbHVlIH1cbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9jYW5EcmFnU3RhcnQgKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIF9jYW5EcmFnRHJvcCAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAodHlwZW9mIGRhdGFMaXN0LnR5cGUgIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LnR5cGUgPT09ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGRhdGFMaXN0Lm9rYXkgPSBmYWxzZVxuICAgICAgICBpZiAoZGF0YUxpc3Qua2V5ID09PSAnLScgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub2JqZWN0LnBsYWNlYWJsZS5pbmRleE9mKHBhcnNlSW50KGRhdGFMaXN0LnZhbHVlLCAxMCkpXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5wdXNoKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSwgMTApKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSBwYXJzZUludChkYXRhTGlzdC52YWx1ZSwgMTApXG4gICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUucHVzaChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gJydcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zb3J0KCkucmV2ZXJzZSgpXG4gICAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wID0gKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0sIDEwKSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSB0ZW1wXG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YUxpc3Qub2theSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG4gICAgaWYgKFt0aGlzLnBhZ2VMaXN0LlBBR0VfQVJDSEVUWVBFX1NLSUxMUywgdGhpcy5wYWdlTGlzdC5QQUdFX09DQ1VQQVRJT05fU0tJTExTXS5pbmNsdWRlcyh0aGlzLm9iamVjdC5zdGVwKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbSlcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQ2xpY2tTa2lsbFNwZWNpYWwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIF9vbkNsaWNrUmVtb3ZlU2tpbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5wYXJlbnROb2RlPy5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnBhcmVudE5vZGU/LmRhdGFzZXQ/LmluZGV4XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3Muc3BsaWNlKGluZGV4LCBpbmRleClcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlU2tpbGwgKGV2ZW50KSB7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5pbmRleFxuICAgIGNvbnN0IHRvZ2dsZUtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LnRvZ2dsZUtleVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gIXRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrUGlja1NraWxsIChldmVudCkge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8uaW5kZXhcbiAgICBjb25zdCB0b2dnbGVLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py50b2dnbGVLZXlcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gZmFsc2VcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21LZXkoa2V5KVxuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgIHJldHVybiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgISEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkpXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgYWxsb3dDdXN0b206ICh0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWU6IHRydWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZTogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBsYWJlbDogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgfSlcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCAhPT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5uYW1lICE9PSAnJykge1xuICAgICAgICAgIHNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKHtcbiAgICAgICAgICBpc09jY3VwYXRpb25EZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpbk9jY3VwYXRpb25Hcm91cDogZmFsc2UsXG4gICAgICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgb2NjdXBhdGlvblRvZ2dsZTogKHRvZ2dsZUtleSA9PT0gJ29jY3VwYXRpb25Ub2dnbGUnKSxcbiAgICAgICAgICBhcmNoZXR5cGVUb2dnbGU6ICh0b2dnbGVLZXkgPT09ICdhcmNoZXR5cGVUb2dnbGUnKSxcbiAgICAgICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6ICcnLFxuICAgICAgICAgIGV4cGVyaWVuY2VQb2ludHM6ICcnLFxuICAgICAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTa2lsbFBvaW50cyAoZXZlbnQpIHtcbiAgICBjb25zdCBpbnB1dCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBhZGp1c3RtZW50ID0gaW5wdXQuZGF0YSgnYWRqdXN0bWVudCcpXG4gICAgY29uc3QgbGkgPSBpbnB1dC5jbG9zZXN0KCdsaScpXG4gICAgY29uc3Qga2V5ID0gbGkuZGF0YSgna2V5JylcbiAgICBjb25zdCBpbmRleCA9IGxpLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gPSBpbnB1dC52YWwoKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlQmFja3N0b3J5VGV4dCAoZXZlbnQpIHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IHRleHRhcmVhLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9IHRleHRhcmVhLnZhbCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEJhY2tzdG9yeSAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgaW5kZXggPSBidXR0b24uZGF0YSgnaW5kZXgnKVxuICAgIGNvbnN0IGtleSA9IGJ1dHRvbi5kYXRhKCdrZXknKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgcm9sbHRhYmxlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChrZXkpXG4gICAgICBpZiAocm9sbHRhYmxlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YWJsZVJlc3VsdCA9IGF3YWl0IHJvbGx0YWJsZVswXS5yb2xsKClcbiAgICAgICAgaWYgKHRhYmxlUmVzdWx0LnJlc3VsdHNbMF0udHlwZSA9PT0gQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSAodGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlICsgJ1xcbicgKyB0YWJsZVJlc3VsdC5yZXN1bHRzWzBdLnRleHQudHJpbSgpKS50cmltKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9ICcnXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsTHVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID0gW2RpZS50b3RhbF1cbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShSb2xsLkNIQVRfVEVNUExBVEUsIHtcbiAgICAgICAgZm9ybXVsYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5Sb2xsVHdpY2VGb3JMdWNrJykgKyAnOiAnICsgc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLnRvU3RyaW5nKCksXG4gICAgICAgIHRvb2x0aXA6IGF3YWl0IGRpZS5nZXRUb29sdGlwKCksXG4gICAgICAgIHRvdGFsOiBkaWUudG90YWxcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxFZHUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoIXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1LnJvbGxlZCAmJiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gW11cbiAgICAgICAgZm9yIChsZXQgcm9sbHMgPSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbDsgcm9sbHMgPiAwOyByb2xscy0tKSB7XG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IFJvbGwoJzFkMTAwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBwYXJzZUludChhdWdtZW50RGllLnRvdGFsLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiB2YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpLFxuICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2Uuam9pbignJyksXG4gICAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuZWR1ID0gdmFsdWUgLSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEFsbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgcm9sbHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdScsICdsdWNrJ10pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgIHJvbGxzLnB1c2gocmVzdWx0KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvbGxNZXNzYWdlKHJvbGxzKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMTAsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIDEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAxLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAtMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAtMTApXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBtb2RpZnlPZmZzZXQgKGtleSwgdmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSA9IE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSArIHZhbHVlLCBwYXJzZUludChtYXgsIDEwKSksIHBhcnNlSW50KG1pbiwgMTApKVxuICB9XG5cbiAgbW9kaWZ5Q2hhcmFjdGVyaXN0aWMgKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyB2YWx1ZVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucm9sbE1lc3NhZ2UoW3Jlc3VsdF0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gJChgI2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24gbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpLmZpbmQoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gbGkuZGF0YSgncm9sbCcpXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCB8fCB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID09PSAnJykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYS50b1N0cmluZygpKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaW5wdXQudmFsKHJvbGwudG90YWwpXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIocm9sbC50b3RhbClcbiAgICAgICAgcmV0dXJuIFtrZXksIGZvcm11bGEudG9TdHJpbmcoKSwgcm9sbF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX29uQ2hhbmdlU3VibWl0IG1ldGhvZC5cbiAgICovXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5wcm9wKCduYW1lJylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbbmFtZV0gPSBvYmoudmFsKClcbiAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldICE9PSAnJykge1xuICAgICAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtcHRpZXMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ialRvdGFsID0gb2JqLmNsb3Nlc3QoJ29sLml0ZW0tbGlzdCcpLmZpbmQoJ3NwYW4udG90YWwnKVxuICAgICAgY29uc3QgbWF4ID0gcGFyc2VJbnQob2JqVG90YWwuc2libGluZ3MoJ3NwYW4udmFsdWUnKS50ZXh0KCksIDEwKVxuICAgICAgb2JqVG90YWwudGV4dCh0b3RhbClcbiAgICAgIGlmICh0b3RhbCA9PT0gbWF4ICYmICFlbXB0aWVzKSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9iai5jbG9zZXN0KCdmb3JtJykuZmluZCgnYnV0dG9uLnN1Ym1pdC1idXR0b25bZGF0YS1idXR0b249bmV4dF0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFBhZ2VOdW1iZXIgKGRpcmVjdGlvbikge1xuICAgIGNvbnN0IHBhZ2VPcmRlciA9IHRoaXMucGFnZU9yZGVyXG4gICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoT2JqZWN0LmtleXMocGFnZU9yZGVyKS5maW5kKGtleSA9PiBwYWdlT3JkZXJba2V5XSA9PT0gdGhpcy5vYmplY3Quc3RlcCksIDEwKSArIGRpcmVjdGlvblxuICAgIHJldHVybiBwYWdlT3JkZXJba2V5XVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKFsnYmFjaycsICduZXh0J10uaW5jbHVkZXMoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbikpIHtcbiAgICAgIGlmIChldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lLmluZGV4T2YoJ2N1cnJlbnRseS1zdWJtaXR0aW5nJykgPiAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGV2ZW50LnN1Ym1pdHRlci5jbGFzc05hbWUgPSBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lICsgJyBjdXJyZW50bHktc3VibWl0dGluZydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ3dvcmxkLWVyYSddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwICE9PSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCA9IGZvcm1EYXRhWydkZWZhdWx0LXNldHVwJ11cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCA9IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdEVyYSAhPT0gZm9ybURhdGFbJ3dvcmxkLWVyYSddKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICQodGhpcy5lbGVtZW50LmZpbmQoJ2Zvcm0nKSlcbiAgICAgICAgY29uc3Qgc3RhcnRlZCA9IERhdGUubm93KClcbiAgICAgICAgb2JqLmZpbmQoJy5kaWFsb2ctYnV0dG9uczpmaXJzdCcpLmhpZGUoKVxuICAgICAgICBvYmouZmluZCgnLnNjcm9sbHNlY3Rpb246Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5lcmFjaGFuZ2U6Zmlyc3QnKS5zaG93KClcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdEVyYSA9IGZvcm1EYXRhWyd3b3JsZC1lcmEnXVxuICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd3b3JsZEVyYScsIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEpXG4gICAgICAgIHRoaXMub2JqZWN0LmNhY2hlQ29DSUQgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKClcbiAgICAgICAgLy8gVG8gcHJldmVudCBmbGFzaGluZyBzaG93IG1lc3NhZ2UgZm9yIGF0IGxlYXN0IDUwMCBtc1xuICAgICAgICBjb25zdCBidWZmZXIgPSA1MDAgLSAoRGF0ZS5ub3coKSAtIHN0YXJ0ZWQpXG4gICAgICAgIC8vIERvbid0IGJvdGhlciBpZiBsZXNzIHRoYW4gMTBtcyByZW1haW5pbmdcbiAgICAgICAgaWYgKGJ1ZmZlciA+IDEwKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJ1ZmZlcikpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodHlwZW9mIGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICBjb25zdCB0eXBlID0gTnVtYmVyKGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10pXG4gICAgICAgIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzID0gW11cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFUykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSA9IGZhbHNlXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs5MCwgODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs4MCwgNzAsIDYwLCA2MCwgNTAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5JywgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5KVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnLCB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCA9ICh0eXBlb2YgZm9ybURhdGFbJ3Jlcm9sbHMtZW5hYmxlZCddID09PSAnc3RyaW5nJylcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZClcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihmb3JtRGF0YVsncXVpY2stZmlyZS12YWx1ZXMtJyArIGldKVxuICAgICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlc1tpXSA9IG51bVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMuc29ydCgpLnJldmVyc2UoKVxuICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1lbmFibGVkJ10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkudG9TdHJpbmcoKSA9PT0gJzAnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5ID0gMVxuICAgICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IGZvcm1EYXRhWydkZWZhdWx0LXF1YW50aXR5J11cbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkudG9TdHJpbmcoKSAhPT0gJzAnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDBcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1zZXR1cCddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwICE9PSBmb3JtRGF0YVsnY29jLXNldHVwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXAgPSBmb3JtRGF0YVsnY29jLXNldHVwJ11cbiAgICAgICAgdGhpcy5jbGVhclNldHVwUG9pbnRzKClcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTa2lsbExpc3RzKClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWFyY2hldHlwZSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSkge1xuICAgICAgICB0aGlzLm9iamVjdC5hcmNoZXR5cGUgPSBmb3JtRGF0YVsnY29jLWFyY2hldHlwZSddXG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9ICcnXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1vY2N1cGF0aW9uJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3Qub2NjdXBhdGlvbiAhPT0gZm9ybURhdGFbJ2NvYy1vY2N1cGF0aW9uJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbiA9IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFba2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gZm9ybURhdGFba2V5XSkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1jb3JlLWNoYXJhY3RlcmlzdGljJ10gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyAhPT0gZm9ybURhdGFbJ2NvYy1jb3JlLWNoYXJhY3RlcmlzdGljJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljID0gZm9ybURhdGFbJ2NvYy1jb3JlLWNoYXJhY3RlcmlzdGljJ11cbiAgICAgICAgdGhpcy5jbGVhclNldHVwUG9pbnRzKClcbiAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmbGF0S2V5cyA9IFsnbmFtZScsICdhZ2UnLCAncmVzaWRlbmNlJywgJ2JpcnRocGxhY2UnLCAnbGFuZ3VhZ2UnLCAnYXZhdGFyJywgJ3Rva2VuJ11cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBmbGF0S2V5cykge1xuICAgICAgaWYgKHR5cGVvZiBmb3JtRGF0YVtrZXldICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdFtrZXldICE9PSBmb3JtRGF0YVtrZXldKSB7XG4gICAgICAgIHRoaXMub2JqZWN0W2tleV0gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgIGlmIChrZXkgPT09ICdhZ2UnKSB7XG4gICAgICAgICAgdGhpcy5nZXRBZ2VBZGp1c3RtZW50cygpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICdiYWNrJykge1xuICAgICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMuZ2V0UGFnZU51bWJlcigtMSlcbiAgICAgIGlmICh0eXBlb2YgcGFnZU51bWJlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc3RlcCA9IHBhZ2VOdW1iZXJcbiAgICAgICAgLy8gV2hlbiBtb3Zpbmcgc3RlcCByZXNldCBzY3JvbGwgaGVpZ2h0XG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuZWxlbWVudC5maW5kKCcuc2Nyb2xsc2VjdGlvbicpXG4gICAgICAgIGlmIChvYmoubGVuZ3RoICYmIG9ialswXS5zY3JvbGxUb3ApIHtcbiAgICAgICAgICBvYmpbMF0uc2Nyb2xsVG9wID0gMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChldmVudC5zdWJtaXR0ZXI/LmRhdGFzZXQuYnV0dG9uID09PSAnbmV4dCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zdGVwID09PSB0aGlzLnBhZ2VMaXN0LlBBR0VfQ1JFQVRFIHx8ICh0aGlzLm9iamVjdC5zdGVwID09PSB0aGlzLnBhZ2VMaXN0LlBBR0VfQkFDS1NUT1JZICYmIGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlKSkge1xuICAgICAgICB0aGlzLmF0dGVtcHRUb0NyZWF0ZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMuZ2V0UGFnZU51bWJlcigxKVxuICAgICAgICBpZiAodHlwZW9mIHBhZ2VOdW1iZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc3RlcCA9IHBhZ2VOdW1iZXJcbiAgICAgICAgICAvLyBXaGVuIG1vdmluZyBzdGVwIHJlc2V0IHNjcm9sbCBoZWlnaHRcbiAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLmVsZW1lbnQuZmluZCgnLnNjcm9sbHNlY3Rpb24nKVxuICAgICAgICAgIGlmIChvYmoubGVuZ3RoICYmIG9ialswXS5zY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIG9ialswXS5zY3JvbGxUb3AgPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBhdHRlbXB0VG9DcmVhdGUgKCkge1xuICAgIGNvbnN0IGFjdG9yRGF0YSA9IGF3YWl0IHRoaXMubm9ybWFsaXplQ2hhcmFjdGVyRGF0YSh0aGlzLm9iamVjdClcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qga2VlcGVycyA9IGdhbWUudXNlcnMuZmlsdGVyKHUgPT4gdS5hY3RpdmUgJiYgdS5pc0dNKVxuICAgICAgaWYgKGtlZXBlcnMubGVuZ3RoKSB7XG4gICAgICAgIGFjdG9yRGF0YS5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA9IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyLXdpemFyZCcsXG4gICAgICAgICAgbGlzdGVuZXI6IGtlZXBlcnNbMF0uaWQsXG4gICAgICAgICAgcGF5bG9hZDogYWN0b3JEYXRhXG4gICAgICAgIH1cbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5DcmVhdGluZ0ludmVzdGlnYXRvcicpXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdLZWVwZXJVc2VyJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG5vcm1hbGl6ZUNoYXJhY3RlckRhdGEgKGRhdGEpIHtcbiAgICBjb25zdCB3ZWFwb25Ta2lsbHMgPSB7XG4gICAgICBtZWxlZToge30sXG4gICAgICBybmdkOiB7fVxuICAgIH1cbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5za2lsbEl0ZW1zKSB7XG4gICAgICBjb25zdCBza2lsbCA9IGRhdGEuc2tpbGxJdGVtc1trZXldXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gc2tpbGwucm93cy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgY29uc3Qgcm93ID0gc2tpbGwucm93c1tpbmRleF1cbiAgICAgICAgaWYgKCFza2lsbC5mbGFncy5pc011bHRpcGxlIHx8IHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBsZXQgaXRlbSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShyb3cuc2VsZWN0ZWQpXG4gICAgICAgICAgICByb3cuc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93Lm9jY3VwYXRpb25Ub2dnbGUpIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmZsYWdzLm9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyb3cuYXJjaGV0eXBlVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5hcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBiYXNlID0gaXRlbS5zeXN0ZW0uYmFzZVxuICAgICAgICAgIGlmICghTnVtYmVyLmlzTnVtZXJpYyhiYXNlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5zZXR1cFBvaW50cykge1xuICAgICAgICAgICAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoJ0AnICsga2V5LCAnaScpXG4gICAgICAgICAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UocmVnRXgsIHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghTnVtYmVyLmlzTnVtZXJpYyhiYXNlKSkge1xuICAgICAgICAgICAgYmFzZSA9IE1hdGguZmxvb3IobmV3IFJvbGwoYmFzZSkuZXZhbHVhdGUoeyBhc3luYzogZmFsc2UgfSkudG90YWwpXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW0uc3lzdGVtLmJhc2UgPSBiYXNlXG4gICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cyA/PyB7fVxuICAgICAgICAgIGlmIChOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLnBlcnNvbmFsID0gcGFyc2VJbnQocm93LnBlcnNvbmFsUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uID0gcGFyc2VJbnQocm93Lm9jY3VwYXRpb25Qb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuYXJjaGV0eXBlID0gcGFyc2VJbnQocm93LmFyY2hldHlwZVBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93LmV4cGVyaWVuY2VQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHBhcnNlSW50KHJvdy5leHBlcmllbmNlUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPSBkYXRhLmxhbmd1YWdlXG4gICAgICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByb3cuc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPSByb3cuc2VsZWN0ZWRcbiAgICAgICAgICAgIGl0ZW0uX2lkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgpXG4gICAgICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzSWQoaXRlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5uYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtKSB7XG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLm5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsTmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzb3VyY2VJdGVtIG9mIGRhdGEuaW52ZXN0aWdhdG9ySXRlbXMpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzb3VyY2VJdGVtKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgIH1cbiAgICBsZXQgbW9uZXRhcnkgPSB7fVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGlmIChzZXR1cCkge1xuICAgICAgbW9uZXRhcnkgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzZXR1cC5zeXN0ZW0ubW9uZXRhcnkpXG4gICAgfVxuICAgIGNvbnN0IGRldmVsb3BtZW50ID0ge1xuICAgICAgcGVyc29uYWw6IDIgKiAocGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5pbnQsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuaW50LCAxMCkpLFxuICAgICAgb2NjdXBhdGlvbjogMCxcbiAgICAgIGFyY2hldHlwZTogMFxuICAgIH1cbiAgICBpZiAoZGF0YS5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICBjb25zdCBhcmNoZXR5cGUgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEuYXJjaGV0eXBlKVxuICAgICAgaWYgKGFyY2hldHlwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaXRlbXMucHVzaChhcmNoZXR5cGVbMF0udG9PYmplY3QoKSlcbiAgICAgICAgZGV2ZWxvcG1lbnQuYXJjaGV0eXBlID0gYXJjaGV0eXBlWzBdLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGF0YS5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvbiA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQoZGF0YS5vY2N1cGF0aW9uKVxuICAgICAgaWYgKG9jY3VwYXRpb24ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2gob2NjdXBhdGlvblswXS50b09iamVjdCgpKVxuICAgICAgICBjb25zdCBvcHRpb25zID0gW11cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvblswXS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkZXZlbG9wbWVudC5vY2N1cGF0aW9uICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYmlvZ3JhcGh5ID0gW11cbiAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gZGF0YS5iaW9TZWN0aW9ucy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgIGJpb2dyYXBoeS5wdXNoKHtcbiAgICAgICAgdGl0bGU6IGRhdGEuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgIHZhbHVlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xuICAgICAgdHlwZTogJ2NoYXJhY3RlcicsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBpbWc6IGRhdGEuYXZhdGFyLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljczoge1xuICAgICAgICAgIHN0cjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc3RyLCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnN0ciwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb246IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmNvbiwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5jb24sIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5zaXosIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuc2l6LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRleDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuZGV4LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmRleCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmFwcCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5hcHAsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5pbnQsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuaW50LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMucG93LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnBvdywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmVkdSwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5lZHUsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIGxjazoge1xuICAgICAgICAgICAgdmFsdWU6IE1hdGgubWF4KHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMubHVjaywgMTApLCBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmx1Y2ssIDEwKSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMucG93LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnBvdywgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbmZvczoge1xuICAgICAgICAgIGFnZTogZGF0YS5hZ2UsXG4gICAgICAgICAgcmVzaWRlbmNlOiBkYXRhLnJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkYXRhLmJpcnRocGxhY2VcbiAgICAgICAgfSxcbiAgICAgICAgZGV2ZWxvcG1lbnQsXG4gICAgICAgIGJpb2dyYXBoeSxcbiAgICAgICAgbW9uZXRhcnlcbiAgICAgIH0sXG4gICAgICBwcm90b3R5cGVUb2tlbjoge1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGFjdG9yTGluazogdHJ1ZSxcbiAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgIHNyYzogZGF0YS50b2tlblxuICAgICAgICB9LFxuICAgICAgICBkaXNwb3NpdGlvbjogQ09OU1QuVE9LRU5fRElTUE9TSVRJT05TLkZSSUVORExZLFxuICAgICAgICBzaWdodDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGl0ZW1zLFxuICAgICAgb3duZXJzaGlwOiB7XG4gICAgICAgIGRlZmF1bHQ6IHBhcnNlSW50KGRhdGEuZGVmYXVsdE93bmVyc2hpcCwgMTApXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhY3RvckRhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YSAoYWN0b3JEYXRhKSB7XG4gICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlcihhY3RvckRhdGEpXG4gICAgY29uc3QgZnVuY3Rpb25JZCA9IEhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGFwcC5vYmplY3QuaWQgPT09IGFjdG9yLmlkKSB7XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgIHR5cGU6ICdvcGVuLWNoYXJhY3RlcicsXG4gICAgICAgICAgbGlzdGVuZXI6IE9iamVjdC5rZXlzKGFjdG9yRGF0YS5vd25lcnNoaXApLmZpbmQoayA9PiBrICE9PSAnZGVmYXVsdCcpLFxuICAgICAgICAgIHBheWxvYWQ6IGFjdG9yLmlkXG4gICAgICAgIH0pXG4gICAgICAgIEhvb2tzLm9mZigncmVuZGVyQWN0b3JTaGVldCcsIGZ1bmN0aW9uSWQpXG4gICAgICB9XG4gICAgfSlcbiAgICBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVDaGFyYWN0ZXIgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQWN0b3IuY3JlYXRlKGFjdG9yRGF0YSlcbiAgICBhd2FpdCBhY3Rvci51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzogYWN0b3IucmF3SHBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOiBhY3Rvci5yYXdNcE1heCxcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4ubWF4JzogYWN0b3IucmF3TXBNYXhcbiAgICB9KVxuICAgIGF3YWl0IGFjdG9yLnJlc2V0RGFpbHlTYW5pdHkoKVxuICAgIHJldHVybiBhY3RvclxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdheSB0byBjcmVhdGUgdGhlIENvQzdDaGFyYWN0ZXJXaXphcmRcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIC8vIFRyeSBhbmQgcHJlcmVxdXN0IGFzIG1hbnkgQ29DSURzIGR1ZSB0byB0aGUgd2F5IHRoZXkgaGF2ZSB0byBiZSBsb2FkZWRcbiAgICBvcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICBzdGVwOiAwLFxuICAgICAgZGVmYXVsdFNldHVwOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRTZXR1cCcpLFxuICAgICAgZGVmYXVsdFF1YW50aXR5OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScpLFxuICAgICAgZGVmYXVsdE93bmVyc2hpcDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkT3duZXJzaGlwJyksXG4gICAgICBkZWZhdWx0RXJhOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpLFxuICAgICAgcmVyb2xsc0VuYWJsZWQ6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnKSxcbiAgICAgIGVuZm9yY2VQb2ludEJ1eTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUG9pbnRCdXknKSxcbiAgICAgIHF1aWNrRmlyZVZhbHVlczogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJyksXG4gICAgICBwbGFjZWFibGU6IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScpKSxcbiAgICAgIGNhY2hlQ29DSUQ6IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQubG9hZENhY2hlSXRlbUJ5Q29DSUQoKSxcbiAgICAgIGNhY2hlQmFja3N0b3JpZXM6IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15ydFxcLlxcLmJhY2tzdG9yeS0vLCB0eXBlOiAncnQnIH0pLFxuICAgICAgY2FjaGVJdGVtczoge30sXG4gICAgICBzZXR1cDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnKSxcbiAgICAgIHNraWxsSXRlbXM6IHt9LFxuICAgICAgb2NjdXBhdGlvbkdyb3Vwczoge30sXG4gICAgICBpbnZlc3RpZ2F0b3JJdGVtczogW10sXG4gICAgICBzZXR1cFBvaW50czoge1xuICAgICAgICBzdHI6ICcnLFxuICAgICAgICBjb246ICcnLFxuICAgICAgICBzaXo6ICcnLFxuICAgICAgICBkZXg6ICcnLFxuICAgICAgICBhcHA6ICcnLFxuICAgICAgICBpbnQ6ICcnLFxuICAgICAgICBwb3c6ICcnLFxuICAgICAgICBlZHU6ICcnLFxuICAgICAgICBsdWNrOiAnJ1xuICAgICAgfSxcbiAgICAgIHNldHVwTW9kaWZpZXJzOiB7XG4gICAgICAgIHN0cjogMCxcbiAgICAgICAgY29uOiAwLFxuICAgICAgICBzaXo6IDAsXG4gICAgICAgIGRleDogMCxcbiAgICAgICAgYXBwOiAwLFxuICAgICAgICBpbnQ6IDAsXG4gICAgICAgIHBvdzogMCxcbiAgICAgICAgZWR1OiAwLFxuICAgICAgICBsdWNrOiAwXG4gICAgICB9LFxuICAgICAgYXJjaGV0eXBlOiAnJyxcbiAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpYzogJycsXG4gICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgIGJpb1NlY3Rpb25zOiBbXSxcbiAgICAgIHBlcnNvbmFsOiAwLFxuICAgICAgcGVyc29uYWxUZXh0OiAnJyxcbiAgICAgIGNyZWRpdFJhdGluZzoge1xuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMFxuICAgICAgfSxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgYWdlOiAnJyxcbiAgICAgIHJlcXVpcmVzQWdlQWRqdXN0bWVudHM6IGZhbHNlLFxuICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgbGFuZ3VhZ2U6ICcnLFxuICAgICAgYXZhdGFyOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycsXG4gICAgICB0b2tlbjogJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnXG4gICAgfSwgb3B0aW9ucylcbiAgICBuZXcgQ29DN0ludmVzdGlnYXRvcldpemFyZChvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZm91bmRyeSwgZ2FtZSwgUGxhY2VhYmxlc0xheWVyICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5cbmNsYXNzIENvQzdNZW51TGF5ZXIgZXh0ZW5kcyBQbGFjZWFibGVzTGF5ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMub2JqZWN0cyA9IHt9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGxheWVyT3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIubGF5ZXJPcHRpb25zLCB7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgekluZGV4OiA2MFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRvY3VtZW50TmFtZSAoKSB7XG4gICAgcmV0dXJuICdUb2tlbidcbiAgfVxuXG4gIGdldCBwbGFjZWFibGVzICgpIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN01lbnUge1xuICBzdGF0aWMgZ2V0QnV0dG9ucyAoY29udHJvbHMpIHtcbiAgICBjYW52YXMuY29jN2dtdG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgY29uc3QgaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGNvbnN0IHNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgY29udHJvbHMucHVzaCh7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgdGl0bGU6ICdDb0M3LkdtVG9vbHMnLFxuICAgICAgbGF5ZXI6ICdjb2M3Z210b29scycsXG4gICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnLFxuICAgICAgdmlzaWJsZTogaXNLZWVwZXIsXG4gICAgICB0b29sczogW1xuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgICAgICAgICBuYW1lOiAnZGV2cGhhc2UnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkRldlBoYXNlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSh0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLWVkaXQnLFxuICAgICAgICAgIG5hbWU6ICdjaGFyY3JlYXRlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQ2hhckNyZWF0aW9uTW9kZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+XG4gICAgICAgICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbih0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLXBsdXMnLFxuICAgICAgICAgIG5hbWU6ICdhY3Rvci1pbXBvcnQnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5BY3RvckltcG9ydGVyJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1jaGVjaycsXG4gICAgICAgICAgbmFtZTogJ2ludmVzdGlnYXRvci13aXphcmQnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuVGl0bGUnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQuY3JlYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWNlcnRpZmljYXRlJyxcbiAgICAgICAgICBjbGFzczogJ3hwX3RvZ2dsZScsXG4gICAgICAgICAgbmFtZTogJ3hwdG9nZ2xlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy50b2dnbGVYUCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlWFBHYWluKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1jYXJkLWpva2VyJyxcbiAgICAgICAgICBuYW1lOiAnZmFrZXJvbGwnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5GYWtlUm9sbCcsXG4gICAgICAgICAgb25DbGljazogQ29DN0NoYXQuZmFrZVJvbGxNZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1tb29uJyxcbiAgICAgICAgICBuYW1lOiAnc3RhcnRyZXN0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuc3RhcnRSZXN0JyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldFRhcmdldCgpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICAgIGlmIChzaG93SGlkZGVuRGV2TWVudSkge1xuICAgICAgY2FudmFzLmNvYzdEZXZUb29scyA9IG5ldyBDb0M3TWVudUxheWVyKClcbiAgICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgICBuYW1lOiAnY29jN0Rldk1lbnUnLFxuICAgICAgICB0aXRsZTpcbiAgICAgICAgICBcIkRldiB0b29scy4gSWYgeW91IGRvbid0IGtub3cgd2hhdCBpdCBpcywgeW91IGRvbid0IG5lZWQgaXQgYW5kIHlvdSBzaG91bGRuJ3QgdXNlIGl0ICEhXCIsXG4gICAgICAgIGxheWVyOiAnY29jN0RldlRvb2xzJyxcbiAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tcG9saWNlLWJhZGdlJyxcbiAgICAgICAgdmlzaWJsZTogaXNLZWVwZXIsXG4gICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZGljZS1maXJlJyxcbiAgICAgICAgICAgIG5hbWU6ICdhbHdheXNDcml0JyxcbiAgICAgICAgICAgIGFjdGl2ZTogZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQsXG4gICAgICAgICAgICB0aXRsZTogJ0FsbCByb2xscyB3aWxsIGNyaXQnLFxuICAgICAgICAgICAgb25DbGljazogdG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0ID0gdG9nZ2xlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1maXJlLWV4dGluZ3Vpc2hlcicsXG4gICAgICAgICAgICBuYW1lOiAnYWx3YXlzRnVtYmxlJyxcbiAgICAgICAgICAgIGFjdGl2ZTogZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSxcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIHJvbGxzIHdpbGwgZnVtYmxlJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgPSB0b2dnbGVcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcmVuZGVyQ29udHJvbHMgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBrZWVwZXJNZW51ID0gaHRtbC5maW5kKCcuZ2FtZS1pY29uLXRlbnRhY2xlLXN0cmlrZScpLnBhcmVudCgpXG4gICAga2VlcGVyTWVudS5hZGRDbGFzcygnY29jNy1tZW51JylcbiAgICBpZiAoaXNLZWVwZXIpIHtcbiAgICAgIGtlZXBlck1lbnUuYWZ0ZXIoXG4gICAgICAgICc8bGkgY2xhc3M9XCJzY2VuZS1jb250cm9sIGNvYzctbWVudSBjb2M3LWNyZWF0ZS1saW5rXCIgdGl0bGU9XCInICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpICtcbiAgICAgICAgICAnXCI+PGkgY2xhc3M9XCJmYXMgZmEtbGlua1wiPjwvaT48L2xpPidcbiAgICAgIClcbiAgICB9XG4gICAga2VlcGVyTWVudS5hZnRlcihcbiAgICAgICc8bGkgY2xhc3M9XCJzY2VuZS1jb250cm9sIGNvYzctbWVudSBjb2M3LWRpY2Utcm9sbFwiIHRpdGxlPVwiJyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpICtcbiAgICAgICAgJ1wiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+PC9saT4nXG4gICAgKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctZGljZS1yb2xsJylcbiAgICAgIC5jbGljayhldmVudCA9PiBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNvYzctbWVudS5jb2M3LWNyZWF0ZS1saW5rJylcbiAgICAgIC5jbGljayhldmVudCA9PiBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKGV2ZW50KSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDYW52YXMge1xuICBzdGF0aWMgZ2V0IENPQzdfVFlQRVNfU1VQUE9SVEVEICgpIHtcbiAgICByZXR1cm4gWydDb0M3TGluaycsICdsb2NhdG9yJywgJ2dldFRva2VuJ11cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBvbkRyb3BTb21ldGhpbmcgKGNhbnZhcywgZGF0YSkge1xuICAgIGlmIChcbiAgICAgIGRhdGEudHlwZSAmJlxuICAgICAgQ29DN0NhbnZhcy5DT0M3X1RZUEVTX1NVUFBPUlRFRC5pbmNsdWRlcyhkYXRhLnR5cGUpXG4gICAgKSB7XG4gICAgICBjb25zdCBncmlkU2l6ZSA9IGNhbnZhcy5zY2VuZS5ncmlkLnNpemVcbiAgICAgIGNvbnN0IHggPSBkYXRhLnggLSBncmlkU2l6ZSAvIDJcbiAgICAgIGNvbnN0IHkgPSBkYXRhLnkgLSBncmlkU2l6ZSAvIDJcbiAgICAgIGNvbnN0IGhlaWdodCA9IGdyaWRTaXplXG4gICAgICBjb25zdCB3aWR0aCA9IGdyaWRTaXplXG4gICAgICBsZXQgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMucGxhY2VhYmxlcy5maWx0ZXIob2JqID0+IHtcbiAgICAgICAgY29uc3QgYyA9IG9iai5jZW50ZXJcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLngsIHgsIHggKyB3aWR0aCkgJiZcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLnksIHksIHkgKyBoZWlnaHQpXG4gICAgICAgIClcbiAgICAgIH0pIC8vIEZpbmQgZHJvcCB0YXJnZXQuXG4gICAgICBpZiAoIWRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSBkcm9wVGFyZ2V0VG9rZW5zID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkIC8vIElmIG5vIHRhcmdldCB3aGlzcGVyIHRvIHNlbGVjdGVkIHRva2VuXG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdDb0M3TGluayc6XG4gICAgICAgICAgaWYgKGRhdGEuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgICAgICBpZiAoZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBkcm9wVGFyZ2V0VG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodG9rZW4uYWN0b3IsIGRhdGEpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIEFwcGx5IHRvIGV2ZXJ5b25lID8gb3Igb25seSBwbGF5ZXJzID8gb3Igbm9ib2R5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgQ29DN0xpbmsudG9XaGlzcGVyTWVzc2FnZShkYXRhLCBkcm9wVGFyZ2V0VG9rZW5zLmZpbHRlcih0ID0+IHQuYWN0b3Iub3duZXJzLmxlbmd0aCkubWFwKHQgPT4gdC5hY3RvcikpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UoZGF0YSwgZ2FtZS51c2Vycy5wbGF5ZXJzLmZpbHRlcih1ID0+ICEhdS5jaGFyYWN0ZXIpLm1hcCh1ID0+IHUuY2hhcmFjdGVyKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZ2V0VG9rZW4nOlxuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS5hcHBJZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuY2FsbEJhY2sgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB1aS53aW5kb3dzW2RhdGEuYXBwSWRdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdWkud2luZG93c1tkYXRhLmFwcElkXVtkYXRhLmNhbGxCYWNrXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdWkud2luZG93c1tkYXRhLmFwcElkXVtkYXRhLmNhbGxCYWNrXShkcm9wVGFyZ2V0VG9rZW5zKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIC8vIEhhbmRsZXMgZ2VuZXJpYyBjYW52YSBkcm9wLlxuICAgICAgICAvLyBkYXRhVHJhbnNmZXIgbXVzdCBpbmNsdWRlIDpcbiAgICAgICAgLy8gLSBkb2NVdWlkIDogdGhlIFV1aWQgb2YgdGhlIGRvY3VtZW50IHRvIGNhbGxcbiAgICAgICAgLy8gLSBjYWxsQmFjayA6IHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsIGluIHRoZSBkb2N1bWVudC5cbiAgICAgICAgLy8gVXNlZCB0byBzZWxlY3QgbG9jYXRpb24gZm9yIGNoYXNlXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKGRhdGEuZG9jVXVpZCAmJiBkYXRhLmNhbGxCYWNrKSB7XG4gICAgICAgICAgICBjb25zdCBkb2MgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChkYXRhLmRvY1V1aWQpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGRvY1tkYXRhLmNhbGxCYWNrXSAmJlxuICAgICAgICAgICAgICB0eXBlb2YgZG9jW2RhdGEuY2FsbEJhY2tdID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkYXRhLnNjZW5lID0gY2FudmFzLnNjZW5lLnV1aWRcbiAgICAgICAgICAgICAgICBkb2NbZGF0YS5jYWxsQmFja10oZGF0YSlcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IubWVzc2FnZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBnYW1lLCBTZXR0aW5ncyAqL1xuZXhwb3J0IGNsYXNzIENvQzdTZXR0aW5nc0RpcmVjdG9yeSBleHRlbmRzIFNldHRpbmdzIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnI3NldHRpbmdzLWdhbWUnKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1kYXRhLW1pZ3JhdGlvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXdyZW5jaFwiPjwvaT4gJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQnV0dG9uJykgK1xuICAgICAgICAgICAgJzwvYnV0dG9uPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcjc2V0dGluZ3MtZG9jdW1lbnRhdGlvbicpXG4gICAgICAgIC5hcHBlbmQoJzxidXR0b24gY2xhc3M9XCJ0cmlnZ2VyLXN5c3RlbS1tYW51YWxcIj48aSBjbGFzcz1cImZhcyBmYS1ib29rc1wiPjwvaT4gJyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TeXN0ZW0uRG9jdW1lbnRhdGlvbicpICtcbiAgICAgICAgJzwvYnV0dG9uPicpXG4gICAgICBodG1sLmZpbmQoJy50cmlnZ2VyLWRhdGEtbWlncmF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyVGl0bGUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJDb250ZW50cycpLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICBtaWdyYXRlOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJSZXN0YXJ0JyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nLCAwKVxuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjbG9zZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1iYW5cIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjbG9zZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHt9XG4gICAgICAgICkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1zeXN0ZW0tbWFudWFsJykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAoYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc3lzdGVtLWRvYycpLmdldERvY3VtZW50KENPTkZJRy5Db0M3Lk1hbnVhbCkpPy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ29tcGVuZGl1bURpcmVjdG9yeSwgRGlhbG9nLCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgZXh0ZW5kcyBDb21wZW5kaXVtRGlyZWN0b3J5IHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGxldCB0cmFuc2xhdGVkID0gZmFsc2VcbiAgICBpZiAoZ2FtZS5pMThuLmxhbmcgPT09ICdlbicpIHtcbiAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ2FtZS5iYWJlbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgT2JqZWN0LnZhbHVlcyhnYW1lLmJhYmVsZS5tb2R1bGVzKSkge1xuICAgICAgICBpZiAodi5sYW5nID09PSBnYW1lLmkxOG4ubGFuZykge1xuICAgICAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cmFuc2xhdGVkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgJzxhIGNsYXNzPVwiY29tcGVuZGl1bS10cmFuc2xhdGlvblwiIHRpdGxlPVwiJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICdcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmNvbXBlbmRpdW0tdHJhbnNsYXRpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVXYXJuaW5nJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxCYWJlbGUnKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlSW5zdGFsbFRyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUVuYWJsZVRyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZU5vVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nXG4gICAgICAgIG5ldyBEaWFsb2coXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLFxuICAgICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvckRpcmVjdG9yeSwgQ09OU1QsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckRpcmVjdG9yeSBleHRlbmRzIEFjdG9yRGlyZWN0b3J5IHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gQWxsb3cgSW52ZXN0aWdhdG9yIFdpemFyZFxuICAgIC8vICAqIElmIHRoZSB1c2VyIHJvbGUgaXMgYWxsb3dlZCB0byBjcmVhdGUgYWN0b3JzXG4gICAgLy8gICogSWYgdGhlIHVzZXIgaGFzIGxlc3Mgb3duZWQgYWN0b3JzIHRoYW4gYWxsb3dlZCBpbiBzZXR0aW5nc1xuICAgIGxldCBhbGxvd1dpemFyZCA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgaWYgKCFhbGxvd1dpemFyZCkge1xuICAgICAgY29uc3QgYWxsb3dlZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JylcbiAgICAgIGlmIChhbGxvd2VkID4gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IFthLm93bmVyc2hpcC5kZWZhdWx0LCAoYS5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA/PyBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkUpXS5pbmNsdWRlcyhDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSkubGVuZ3RoXG4gICAgICAgIGFsbG93V2l6YXJkID0gZXhpc3RpbmcgPCBhbGxvd2VkXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFsbG93V2l6YXJkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAgIC5hcHBlbmQoJzxhIGNsYXNzPVwiaW52ZXN0aWdhdG9yLXdpemFyZFwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJykgKyAnPC9hPicpXG4gICAgICBodG1sLmZpbmQoJy5pbnZlc3RpZ2F0b3Itd2l6YXJkJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZSgpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImFjdG9yLWltcG9ydFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKSArXG4gICAgICAgICAgICAnPC9hPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcuYWN0b3ItaW1wb3J0JykuY2xpY2soKCkgPT4ge1xuICAgICAgICBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCBSb2xsLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTcGVsbCBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9wZW50YWdyYW0tcm9zZS5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dFxuICB9XG5cbiAgYXN5bmMgY2FzdCAoKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBjb25zdCBjb3N0cyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmNvc3RzKVxuICAgIGNvbnN0IGxvc3NlcyA9IFtdXG4gICAgbGV0IGNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50c1xuICAgIGNvc3RzLm1hZ2ljUG9pbnRzID0gQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoY29zdHMubWFnaWNQb2ludHMpXG4gICAgICA/IChhd2FpdCBuZXcgUm9sbChjb3N0cy5tYWdpY1BvaW50cykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgOiBwYXJzZUludChjb3N0cy5tYWdpY1BvaW50cylcbiAgICBpZiAoXG4gICAgICBjb3N0cy5tYWdpY1BvaW50cyAmJlxuICAgICAgY29zdHMubWFnaWNQb2ludHMgPiB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgKSB7XG4gICAgICBjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHMgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY29uc3QgY29udmVydGVkSGl0UG9pbnRzID1cbiAgICAgICAgICBjb3N0cy5tYWdpY1BvaW50cyAtIHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICAgICAgY29uc3QgY29udmVydGVkTWFnaWNQb2ludHMgPSBjb3N0cy5tYWdpY1BvaW50cyAtIGNvbnZlcnRlZEhpdFBvaW50c1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHRpdGxlOiAnICcsXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob3RFbm91Z2hNYWdpY1BvaW50cycsIHtcbiAgICAgICAgICAgIGFjdG9yTWFnaWNQb2ludHM6IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUsXG4gICAgICAgICAgICBjb252ZXJ0ZWRIaXRQb2ludHMsXG4gICAgICAgICAgICBjb252ZXJ0ZWRNYWdpY1BvaW50cyxcbiAgICAgICAgICAgIG9yaWdpbmFsTWFnaWNQb2ludHM6IGNvc3RzLm1hZ2ljUG9pbnRzLFxuICAgICAgICAgICAgc3BlbGw6IHRoaXMubmFtZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIGNhbmNlbDoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2NlZWQ6IHtcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvc3RzLmhpdFBvaW50cyA9IGNvbnZlcnRlZEhpdFBvaW50c1xuICAgICAgICAgICAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzID0gY29udmVydGVkTWFnaWNQb2ludHNcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWZhdWx0OiAnY2FuY2VsJyxcbiAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJ11cbiAgICAgICAgfVxuICAgICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICAgIGlmICghY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzKSByZXR1cm5cbiAgICB9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29zdHMpKSB7XG4gICAgICBpZiAoIXZhbHVlIHx8IE51bWJlcih2YWx1ZSkgPT09IDApIGNvbnRpbnVlXG4gICAgICBsb3NzZXMucHVzaChhd2FpdCB0aGlzLnJlc29sdmVMb3NzZXMoa2V5LCB2YWx1ZSkpXG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvY2hhdC5odG1sJ1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGVzY3JpcHRpb24sIGxvc3NlcyB9KVxuICAgIHJldHVybiBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiB0aGlzLm5hbWUsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVMb3NzZXMgKGNoYXJhY3RlcmlzdGljLCB2YWx1ZSkge1xuICAgIGxldCBjaGFyYWN0ZXJpc3RpY05hbWVcbiAgICBsZXQgbG9zc1xuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYSh2YWx1ZSkpIHtcbiAgICAgIGxvc3MgPSAoYXdhaXQgbmV3IFJvbGwodmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICB9IGVsc2Uge1xuICAgICAgbG9zcyA9IHBhcnNlSW50KHZhbHVlKVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB0aGlzLmFjdG9yLnN5c3RlbVxuICAgIHN3aXRjaCAoY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgIGNhc2UgJ2hpdFBvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IaXRQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLmRlYWxEYW1hZ2UobG9zcywgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc2FuaXR5JzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eVBvaW50cycpXG4gICAgICAgIHRoaXMuZ3JhbnRTYW5pdHlMb3NzKGxvc3MpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtYWdpY1BvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYWdpY1BvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAoYWN0b3JEYXRhLmF0dHJpYnMubXAudmFsdWUgLSBsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG93ZXInOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXG4gICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnOlxuICAgICAgICAgICAgYWN0b3JEYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLSBsb3NzXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiB7IGNoYXJhY3RlcmlzdGljTmFtZSwgbG9zcyB9XG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIGdyYW50U2FuaXR5TG9zcyAodmFsdWUpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZVxuICAgIGxldCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHt9KVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNhc3RpbmdTcGVsbCcsIHtcbiAgICAgICAgc3BlbGw6IHRoaXMubmFtZVxuICAgICAgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgbWVzc2FnZS5nZXRIVE1MKClcbiAgICBpZiAodHlwZW9mIGNhcmQubGVuZ3RoICE9PSAndW5kZWZpbmVkJyAmJiBjYXJkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zcyA9IHZhbHVlXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZSAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQucGFyZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIHRoaXMuY29udGV4dC5ib29rSWQgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBsZXQgaXRlbVxuICAgICAgbGV0IGJvb2tcbiAgICAgIC8vIGxldCBzcGVsbERhdGFcbiAgICAgIGlmICh0aGlzLmNvbnRleHQucGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmNvbnRleHQuYm9va0lkKVxuICAgICAgICBib29rID0gaXRlbS50b09iamVjdCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib29rID0gdGhpcy5jb250ZXh0LnBhcmVudC5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZCkudG9PYmplY3QoKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gYm9vay5zeXN0ZW0uc3BlbGxzLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgaWYgKGJvb2suc3lzdGVtLnNwZWxsc1tpXS5faWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgICBib29rLnN5c3RlbS5zcGVsbHNbaV0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGJvb2suc3lzdGVtLnNwZWxsc1tpXSwgZGF0YSlcbiAgICAgICAgICAvLyBzcGVsbERhdGEgPSBib29rLnN5c3RlbS5zcGVsbHNbaV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29udGV4dC5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICdzeXN0ZW0uc3BlbGxzJzogYm9vay5zeXN0ZW0uc3BlbGxzXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuc2hlZXQub2JqZWN0ID0gbmV3IENvQzdTcGVsbChcbiAgICAgICAgICBib29rLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiBzcGVsbC5faWQgPT09IHRoaXMuaWQpLFxuICAgICAgICAgIHRoaXMuY29udGV4dFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHQucGFyZW50LnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2Jvb2tdKVxuICAgICAgICB0aGlzLnNoZWV0Lm9iamVjdCA9IG5ldyBDb0M3U3BlbGwoXG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcbiAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgdGhpcy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGZvdW5kcnksIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL3NwZWxsL2RhdGEuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Qm9vayBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9zZWNyZXQtYm9vay5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICAvKiogQ29udmVydCB0aGUgZGlmZmljdWx0eSBvbiB0aGUgc2VsZWN0IGVsZW1lbnQgdG8gYSBmb3JtYXQgYWNjZXB0ZWQgKi9cbiAgc3RhdGljIGNvbnZlcnREaWZmaWN1bHR5IChkaWZmaWN1bHR5KSB7XG4gICAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XG4gICAgICBjYXNlICdoYXJkJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnZXh0cmVtZSc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgIGNhc2UgJ2NyaXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcbiAgICAgIGNhc2UgJ3VucmVhZGFibGUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvciB0aGUgZnV0dXJlOiBhZGQgYWR2YW5jZWQgcnVsZXMgZm9yIGxlYXJuaW5nIHNwZWxscywgcGcuIDE3NlxuICAgKiBAcGFyYW0gW3tEb2N1bWVudH1dIHNwZWxsc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBhZGRTcGVsbHMgKHNwZWxscykge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLnN5c3RlbS5zcGVsbHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2goc3BlbGwpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgc3BlbGxEZXRhaWwgKGluZGV4KSB7XG4gICAgY29uc3QgaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnN5c3RlbS5zcGVsbHNbaW5kZXhdXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5hY3RvciA/IHRoaXMuYWN0b3IgOiBudWxsXG4gICAgY29uc3Qgc3BlbGwgPSBuZXcgQ29DN1NwZWxsKGRhdGEsIHsgcGFyZW50LCBib29rSWQ6IHRoaXMuaWQgfSlcbiAgICBpZiAoaXNLZWVwZXIgfHwgc3BlbGwuc3lzdGVtLmxlYXJuZWQpIHtcbiAgICAgIHJldHVybiBhd2FpdCBzcGVsbC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhbGwgdGhlIGxvZ2ljIGludm9sdmluZyB0aGUgYXR0ZW1wdCBvZiBpbml0aWFsIHJlYWRpbmdcbiAgICogQHJldHVybnMge1Byb21pc2V9IEBzZWUgbGlzdGVuIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKi9cbiAgYXN5bmMgYXR0ZW1wdEluaXRpYWxSZWFkaW5nICgpIHtcbiAgICAvKiogQ29udmVydHMgdGhlIGRpZmZpY3VsdHkgdmFsdWUgdG8gc29tZXRoaW5nIGFjY2VwdGVkIGJ5IENvQzdDaGVjayAqL1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Qm9vay5jb252ZXJ0RGlmZmljdWx0eShcbiAgICAgIHRoaXMuc3lzdGVtLmRpZmZpY3VsdHlMZXZlbFxuICAgIClcbiAgICBjb25zdCBsYW5ndWFnZSA9IHRoaXMuc3lzdGVtLmxhbmd1YWdlXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5nZXRTa2lsbHNCeU5hbWUobGFuZ3VhZ2UpXG4gICAgaWYgKCFza2lsbCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfSBlbHNlIGlmIChza2lsbC5sZW5ndGggPT09IDApIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFjdG9yIHdobyBvd25zIHRoaXMgZG9lcyBub3QgaGF2ZSB0aGUgc2tpbGwgb2ZcbiAgICAgICAqIHRoZSBsYW5ndWFnZSBpbiB3aGljaCBpdCB3YXMgd3JpdHRlblxuICAgICAgICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Vbmtub3duTGFuZ3VhZ2UnLCB7IGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUgfSlcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIGNoZWNrLnBhcmVudCA9IHRoaXMudXVpZFxuICAgICAgY2hlY2suY29udGV4dCA9ICdJTklUSUFMX1JFQURJTkcnXG4gICAgICBjaGVjay5mbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlYWRBdHRlbXB0Jywge1xuICAgICAgICBib29rOiB0aGlzLm5hbWUsXG4gICAgICAgIGxhbmd1YWdlLFxuICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLnN5c3RlbS5kaWZmaWN1bHR5TGV2ZWxcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIHJldHVybiBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdHMgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgaW50ZXJhY3RzIGluIHNvbWUgd2F5IHdpdGggcHJvZ3Jlc3MgYmFyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdyZXNldCcgfHwgJ2luY3JlYXNlJyB8fCAnZGVjcmVhc2UnXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBqdXN0IHNvIHRoYXQgcHJvZ3Jlc3MgaXMgbm90IGdyZWF0ZXIgdGhhbiBuZWNlc3NhcnlcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgY2hhbmdlUHJvZ3Jlc3MgKG1vZGUsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS50eXBlLm15dGhvcyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90TXl0aG9zVG9tZScpKVxuICAgIH1cbiAgICBjb25zdCBuZWNlc3NhcnkgPSB0aGlzLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcbiAgICBsZXQgZnVsbFN0dWR5ID0gdGhpcy5zeXN0ZW0uZnVsbFN0dWR5XG4gICAgbGV0IHByb2dyZXNzID0gdGhpcy5zeXN0ZW0uc3R1ZHkucHJvZ3Jlc3NcbiAgICBpZiAoaXNOYU4ocHJvZ3Jlc3MpKSB7XG4gICAgICAvKiogSXQgc2VlbXMgYSBsaXR0bGUgaW1wb3NzaWJsZSwgYnV0IHlvdSBuZXZlciBrbm93ICovXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogMFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHZhbHVlICYmIHByb2dyZXNzID4gdmFsdWUpIHtcbiAgICAgIC8qKlxuICAgICAgICogUHJvZ3Jlc3MgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHZhbHVlIGVudGVyZWQgYnkgdXNlciBhcyBuZWNlc3NhcnksXG4gICAgICAgKiByZXNldCBwcm9ncmVzcyB0byBiZSBlcXVhbCBuZWNlc3NhcnkgYW5kIGNvbXBsZXRlIGZ1bGwgc3R1ZHlcbiAgICAgICAqL1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5LFxuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogdmFsdWVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb21wbGV0ZUZ1bGxTdHVkeSgpXG4gICAgfVxuICAgIGlmIChtb2RlID09PSAnaW5jcmVhc2UnICYmIHByb2dyZXNzIDwgbmVjZXNzYXJ5KSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIHBsdXMgaWNvbiB0byBpbmNyZWFzZSBwcm9ncmVzcyAqL1xuICAgICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogKytwcm9ncmVzc1xuICAgICAgfSlcbiAgICAgIGlmIChwcm9ncmVzcyA9PT0gbmVjZXNzYXJ5KSB7XG4gICAgICAgIC8qKiBDb21wbGV0ZSBmdWxsIHN0dWR5IGlmIHByb2dyZXNzIGlzIGVxdWFsIG5lY2Vzc2FyeSAqL1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZnVsbFN0dWR5JzogKytmdWxsU3R1ZHkgfSlcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ3JhbnRGdWxsU3R1ZHkoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2RlY3JlYXNlJyAmJiBwcm9ncmVzcyA+IDApIHtcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byBkZWNyZWFzZSBwcm9ncmVzcyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IC0tcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tFeGhhdXN0aW9uICgpIHtcbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvcj8uY3RodWxodU15dGhvc1xuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuc3lzdGVtLm15dGhvc1JhdGluZ1xuICAgIGlmICh0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgPj0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb29rSGFzTm90aGluZ01vcmVUb1RlYWNoJywge1xuICAgICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBhc3luYyBncmFudEZ1bGxTdHVkeSAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS50eXBlLm15dGhvcykgcmV0dXJuXG4gICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxuICAgIGNvbnN0IGFjdG9yTXl0aG9zVmFsdWUgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuc3lzdGVtLm15dGhvc1JhdGluZ1xuICAgIGxldCBteXRob3NGaW5hbCA9IHRoaXMuc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWxcbiAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsID4gbXl0aG9zUmF0aW5nKSB7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IG15dGhvc0ZpbmFsOyBpbmRleCsrKSB7XG4gICAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlICsgbXl0aG9zRmluYWwgLSBpbmRleCA8PSBteXRob3NSYXRpbmcpIHtcbiAgICAgICAgICBteXRob3NGaW5hbCAtPSBpbmRleFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFkZXIgYXV0b21hdGljYWxseSBnYWlucyBhIHNraWxsIHRpY2sgZm9yIHRoZVxuICAgICAqIGxhbmd1YWdlIGluIHdoaWNoIHRoZSBib29rIGlzIHdyaXR0ZW5cbiAgICAgKi9cbiAgICBkZXZlbG9wbWVudHMucHVzaChcbiAgICAgIHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3RodWxodS1teXRob3MnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zRmluYWwpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5sYW5ndWFnZSxcbiAgICAgICAgZ2FpbjogJ2RldmVsb3BtZW50J1xuICAgICAgfVxuICAgIClcbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXG4gICAgYXdhaXQgdGhpcy5yb2xsU2FuaXR5TG9zcygpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uZnVsbFN0dWRpZXMnOiArK3RoaXMuc3lzdGVtLmZ1bGxTdHVkaWVzXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudEluaXRpYWxSZWFkaW5nICgpIHtcbiAgICAvKiogSWYgaW5pdGlhbCByZWFkaW5nIGhhcyBhbHJlYWR5IGJlZW4gZG9uZSB0aGVyZSBpcyBub3RoaW5nIHRvIGRvIGhlcmUgKi9cbiAgICBpZiAodGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcpIHJldHVyblxuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXG4gICAgY29uc3QgbXl0aG9zID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCxcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUubXl0aG9zXG4gICAgfVxuICAgIGNvbnN0IG9jY3VsdCA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5vY2N1bHQsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm9jY3VsdFxuICAgIH1cbiAgICBjb25zdCBvdGhlciA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5vdGhlcnMsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm90aGVyXG4gICAgfVxuICAgIGlmIChteXRob3MudHlwZSAmJiBteXRob3MuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3RodWxodS1teXRob3MnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zLmdhaW5zKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKG9jY3VsdC50eXBlICYmIG9jY3VsdC5nYWlucykge1xuICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2NjdWx0JyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG9jY3VsdC5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvdGhlci50eXBlKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIG90aGVyLmdhaW5zKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBza2lsbC5uYW1lLm1hdGNoKC9eKC4rKSBcXCgoLispXFwpJC8pXG4gICAgICAgIC8qKiBTYW5pdGl6YXRpb24gdG8gZGVhbCB3aXRoIHNwZWNpYWxpemF0aW9ucyAqL1xuICAgICAgICBpZiAocGF0dGVybikge1xuICAgICAgICAgIHNraWxsLnNwZWNpYWxpemF0aW9uID0gcGF0dGVyblsxXVxuICAgICAgICAgIHNraWxsLm5hbWUgPSBwYXR0ZXJuWzJdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgc2tpbGwudmFsdWUgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChza2lsbC52YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgKS50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSkge1xuICAgICAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXG4gICAgICAgICAgICBnYWluOiBza2lsbC52YWx1ZSxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBza2lsbC5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGlmICgobXl0aG9zLnR5cGUgfHwgb2NjdWx0LnR5cGUpICYmIHRoaXMuc3lzdGVtLnNhbml0eUxvc3MpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIH1cbiAgICAvKiogTWFyayBpbml0aWFsIHJlYWRpbmcgYXMgY29tcGxldGUgKi9cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmluaXRpYWxSZWFkaW5nJzogdHJ1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SXRlbX0gc3BlbGxsZWFybmVkIFRoZSBzcGVsbCB0aGF0IHdhcyBsZWFybmVkIHN1Y2Nlc3NmdWxseSBmcm9tIGJvb2tcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGdyYW50U3BlbGxMZWFybmluZyAoc3BlbGxsZWFybmVkKSB7XG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiB0aGlzLnN5c3RlbS5zcGVsbHMpIHtcbiAgICAgIGlmIChzcGVsbC5faWQgPT09IHNwZWxsbGVhcm5lZC5faWQpIHtcbiAgICAgICAgc3BlbGwuc3lzdGVtLmxlYXJuZWQgPSB0cnVlXG4gICAgICAgIC8vIERvZXMgdGhlIGFjdG9yIGFscmVhZHkgaGFzIGEgc3BlbGwgb2YgdGhhdCBuYW1lPyBUaGVuIGRvIG5vdCBhZGQgdGhlIHNwZWxsXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3BlbGwgPSBhd2FpdCB0aGlzLmFjdG9yLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc3BlbGwnICYmIGl0ZW0ubmFtZSA9PT0gc3BlbGxsZWFybmVkLm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoIWV4aXN0aW5nU3BlbGwpIHtcbiAgICAgICAgICBzcGVsbGxlYXJuZWQuc3lzdGVtLmxlYXJuZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVsbEFscmVhZHlMZWFybmVkJywge1xuICAgICAgICAgICAgICBzcGVsbDogc3BlbGxsZWFybmVkLm5hbWUsXG4gICAgICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2F2ZSBzcGVsbCBsaXN0IG9mIGJvb2tcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogdGhpcy5zeXN0ZW0uc3BlbGxzIH0pXG4gICAgLy8gQWRkIGxlYXJuZWQgc3BlbGwgdG8gYWN0b3JcbiAgICBpZiAoc3BlbGxsZWFybmVkLnN5c3RlbS5sZWFybmVkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxTdWNjZXNzZnVsbHlMZWFybmVkJywge1xuICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXG4gICAgICAgIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHNwZWxsbGVhcm5lZClcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGFuIEFycmF5IG9mIHNraWxscyBhbmQgaGFuZGxlcyBhbGwgdGhlIGxvZ2ljIHRvIGRldmVsb3AgdGhlbVxuICAgKiBAcGFyYW0ge0FycmF5fSBkZXZlbG9wbWVudHMgQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50U2tpbGxEZXZlbG9wbWVudCAoZGV2ZWxvcG1lbnRzKSB7XG4gICAgaWYgKGRldmVsb3BtZW50cy5sZW5ndGggPT09IDApIHJldHVyblxuICAgIGZvciAoY29uc3QgZGV2ZWxvcG1lbnQgb2YgZGV2ZWxvcG1lbnRzKSB7XG4gICAgICAvKiogVGVzdCBpZiB0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHplcm8gKi9cbiAgICAgIGlmICghZGV2ZWxvcG1lbnQuZ2FpbikgY29udGludWVcbiAgICAgIGxldCBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKGRldmVsb3BtZW50Lm5hbWUpXG4gICAgICAvKiogVGhlIEFjdG9yIGRvZXMgbm90IG93biB0aGlzIHNraWxsLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgKiBGaXJzdCwgY2hlY2sgaWYgdGhlcmUgaXMgYW55IHNraWxsIGluIHRoZSBnYW1lIHdpdGggdGhlIHNhbWUgbmFtZVxuICAgICAgICogSW4gdGhlIGxhc3QgYWx0ZXJuYXRpdmUganVzdCBjcmVhdGUgYSBuZXcgZ2VuZXJpYyBza2lsbFxuICAgICAgICovXG4gICAgICBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc2tpbGwnICYmIGl0ZW0ubmFtZSA9PT0gZGV2ZWxvcG1lbnQubmFtZVxuICAgICAgICApXG4gICAgICAgIGlmIChleGlzdGluZ1NraWxsKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZXhpc3RpbmdTa2lsbClcbiAgICAgICAgICBdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVTa2lsbChkZXZlbG9wbWVudC5uYW1lLCAwKVxuICAgICAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGxbMF0udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxuICAgICAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBza2lsbCA9IHNraWxsWzBdXG4gICAgICBpZiAoZGV2ZWxvcG1lbnQuZ2FpbiA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAvKiogU2ltcGx5IG1hcmsgdGhlIHNraWxsIGZvciBkZXZlbG9wbWVudCAqL1xuICAgICAgICBhd2FpdCBza2lsbC5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUgcmVjZWl2ZWQgdmFsdWUgZ2FpbmVkIGlzIG51bWVyaWMsIGVuc3VyZSB0aGF0IHRoZSBhbW91bnRcbiAgICAgICAgICogd2lsbCBub3QgZXhjZWVkIHRoZSBtYXhpbXVtIHZhbHVlIG9mIDk5XG4gICAgICAgICAqL1xuICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluID4gOTkpIHtcbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IGRldmVsb3BtZW50LmdhaW47IGluZGV4KyspIHtcbiAgICAgICAgICAgIGlmIChza2lsbC52YWx1ZSArIGRldmVsb3BtZW50LmdhaW4gLSBpbmRleCA8PSA5OSkge1xuICAgICAgICAgICAgICBkZXZlbG9wbWVudC5nYWluIC09IGluZGV4XG4gICAgICAgICAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShkZXZlbG9wbWVudC5nYWluKVxuICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2hvd0RldmVsb3BtZW50c1RhYmxlKGRldmVsb3BtZW50cylcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzZXF1ZW50IHBlcmlvZHMgb2YgZnVsbCBzdHVkeSBtYXkgYmUgdW5kZXJ0YWtlbiwgdGhlIGRpZmZlcmVuY2UgYmVpbmdcbiAgICogdGhhdCBlYWNoIHN0dWR5IHdpbGwgdGFrZSB0d2ljZSBhcyBsb25nIGFzIHRoZSBwcmV2aW91cyBvbmVcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIHJlZG9GdWxsU3R1ZHkgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IDAgfSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5zdHVkeS5uZWNlc3NhcnknOiB0aGlzLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgKiAyXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBCeXBhc3MgdGhlIFNhbml0eSBjaGVjayBhbmQganVzdCByb2xsIHRoZSBkYW1hZ2UgKi9cbiAgYXN5bmMgcm9sbFNhbml0eUxvc3MgKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc1xuICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICcnKSByZXR1cm5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZVxuICAgIGxldCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHt9KVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlYWRpbmdNeXRob3NUb21lJywge1xuICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSAoYXdhaXQgbmV3IFJvbGwodmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIGh0bWwgPSBjYXJkLmZpbmQoJy5jaGF0LWNhcmQnKVswXVxuICAgICAgaHRtbC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmlkLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgICAgICBzYW5EYXRhOiB7XG4gICAgICAgICAgICBzYW5NaW46IHNhbml0eUxvc3MsXG4gICAgICAgICAgICBzYW5NYXg6IHNhbml0eUxvc3NcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBjb25zdCBzYW5pdHlDaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2suYnlwYXNzUm9sbFNhbigpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5yb2xsU2FuTG9zcygpXG4gICAgICBzYW5pdHlDaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSB0YWJsZSBpbiB0aGUgY2hhdCB3aXRoIGFsbCBza2lsbCBkZXZlbG9wbWVudHMgb2J0YWluZWRcbiAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBkZXZlbG9wbWVudHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSBjcmVhdGUgQ2hhdE1lc3NhZ2VcbiAgICovXG4gIGFzeW5jIHNob3dEZXZlbG9wbWVudHNUYWJsZSAoZGV2ZWxvcG1lbnRzKSB7XG4gICAgLyoqIFByZXBhcmUgdGhlIEFycmF5IGRhdGEgdG8gYmUgc2hvd24gdG8gdGhlIGVuZCB1c2VyIGluIGNoYXQgKi9cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgaWYgKGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgIGRldmVsb3BtZW50Lm5hbWUgPSBgJHtkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbn0gKCR7ZGV2ZWxvcG1lbnQubmFtZX0pYFxuICAgICAgfVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYXJrZWRGb3JEZXZlbG9wbWVudCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXZlbG9wbWVudC5nYWluID0gYCske2RldmVsb3BtZW50LmdhaW59ICR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICdDb0M3LlBvaW50cydcbiAgICAgICAgKX1gXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXZlbG9wbWVudC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXZlbG9wbWVudHMgfSlcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5HYWluc0ZvclJlYWRpbmcnLCB7IGJvb2s6IHRoaXMubmFtZSB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYXR0ZW1wdFNwZWxsTGVhcm5pbmcgKGlkKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSB7XG4gICAgICAvKiogQWN0b3IgZGlkIG5vdCBwZXJmb3JtZWQgYW4gaW5pdGlhbCByZWFkaW5nIGZpcnN0ICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICBjb25zdCBzcGVsbCA9IHRoaXMuc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHtcbiAgICAgIHJldHVybiBzcGVsbC5faWQgPT09IGlkXG4gICAgfSlcbiAgICBpZiAoc3BlbGwpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNoZWNrLnBhcmVudCA9IHRoaXMudXVpZFxuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MZWFyblNwZWxsQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBzcGVsbDogc3BlbGwubmFtZVxuICAgICAgfSlcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnU1BFTExfTEVBUk5JTkcnXG4gICAgICBjaGVjay5zcGVsbCA9IHNwZWxsXG4gICAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKiBMaXN0ZW4gdG8gY2hhbmdlcyBvbiB0aGUgY2hlY2sgY2FyZCAqL1xuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsKSB7XG4gICAgY29uc3QgY2hlY2sgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbClcblxuICAgIC8qKiBXaWxsIGtub3cgaWYgdXNlciBwdXNoIHRoZSByb2xsIG9yIHNwZW5kIEx1Y2sgKi9cbiAgICBpZiAoY2hlY2sucGFzc2VkKSB7XG4gICAgICBpZiAoY2hlY2suY29udGV4dCA9PT0gJ0lOSVRJQUxfUkVBRElORycpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ3JhbnRJbml0aWFsUmVhZGluZygpXG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdTUEVMTF9MRUFSTklORycpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ3JhbnRTcGVsbExlYXJuaW5nKGNoZWNrLnNwZWxsKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBGb3JtRGF0YUV4dGVuZGVkLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgSG9va3MsIHJlbmRlclRlbXBsYXRlLCBzb2NrZXRsaWIsIHVpICovXG5cbmNvbnN0IEVDQ19DTEFTUyA9ICdlbmhhbmNlZC1jaGF0LWNhcmQnXG5cbmNvbnN0IFBFUk1JU1NJT05fVFlQRSA9IHtcbiAgR006ICdnbScsIC8vIHVzZXIgaXMgR01cbiAgTk9UX0dNOiAnIWdtJywgLy8gdXNlciBpcyBOT1QgZ20gKGhpZGUgdG8gR00gaW4gY2FzZSBvZiB2aXNpYmlsaXR5KVxuICBTUEVBS0VSOiAnc3BlYWtlcicsIC8vIHRoZSBzcGVha2VyIGlzIGFuIGFjdG9yIGNvbnRyb2xlZC9vd25lZCBieSB0aGUgdXNlclxuICBVU0VSOiAndXNlcicsIC8vIHRoZSB1c2VyIGlzIHRoZSBtZXNzYWdlJ3MgYXV0aG9yXG4gIEVWRVJZT05FOiAnYWxsJywgLy8gZXF1aXZhbGVudCB0byBlbXB0eSBzdHJpbmdcbiAgQkxBQ0tMSVNUOiAnYmxhY2tsaXN0JyAvLyBpbnZlcnQgdGhlIGxvZ2ljXG59XG5cbmNvbnN0IFNUQVRFID0ge1xuICBPTjogJ3N3aXRjaGVkLW9uJyxcbiAgT0ZGOiAnc3dpdGNoZWQtb2ZmJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdEVDQyAoLi4uY2FyZGNsYXNzKSB7XG4gIC8vIEhvb2tzLm9uY2UoJ2luaXQnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIH0pXG5cbiAgSG9va3Mub24oJ3JlbmRlckNoYXRMb2cnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuaW5qZWN0Q1NTKGFwcCwgaHRtbCwgZGF0YSlcbiAgKVxuXG4gIEhvb2tzLm9uY2UoJ3NvY2tldGxpYi5yZWFkeScsIGZ1bmN0aW9uICgpIHtcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnJlZ2lzdGVyKGNhcmRjbGFzcylcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbShnYW1lLnN5c3RlbS5pZCkgLy8gU29ja2V0IGlzIGF0dGFjaGVkIHRvIGN1cnJlbnQgc3lzdGVtXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ3VwZGF0ZU1lc3NhZ2UnLCB1cGRhdGVNZXNzYWdlKVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdHTVVwZGF0ZScsIEdNVXBkYXRlKVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdhZHZpc2UnLCBhZHZpc2UpXG4gICAgLy8gRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ2dtdHJhZGVpdGVtdG8nLCBnbXRyYWRlaXRlbXRvKVxuICB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gICAgRW5oYW5jZWRDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXG4gIClcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZSAobWVzc2FnZUlkLCBuZXdDb250ZW50KSB7XG4gIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gIGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgY29udGVudDogbmV3Q29udGVudFxuICB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBHTVVwZGF0ZSAoZGF0YSwgb3B0aW9ucywgY2FyZENsYXNzTmFtZSwgbWVzc2FnZUlkID0gdW5kZWZpbmVkKSB7XG4gIGNvbnN0IGNhcmQgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkLmZyb21EYXRhKFxuICAgIGRhdGEsXG4gICAgb3B0aW9ucyxcbiAgICBjYXJkQ2xhc3NOYW1lLFxuICAgIG1lc3NhZ2VJZFxuICApXG4gIGF3YWl0IGNhcmQuR01VcGRhdGUoKVxuICAvLyBjb25zdCBkaWZmID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KCBkYXRhLCBjYXJkLnRvT2JqZWN0KCkpXG4gIHJldHVybiBjYXJkLnRvT2JqZWN0KClcbn1cblxuYXN5bmMgZnVuY3Rpb24gYWR2aXNlICgpIHt9XG5cbmNsYXNzIEVuaGFuY2VkQ2hhdENhcmRMaWIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy50eXBlcyA9IG5ldyBNYXAoKVxuICAgIHRoaXMuc29ja2V0ID0gbnVsbFxuICAgIC8vIHRoaXMuZW5oYW5jZWRDaGF0Q2FyZENsYXNzID0gRW5oYW5jZWRDaGF0Q2FyZFxuICB9XG5cbiAgc3RhdGljIGluamVjdENTUyAoKSB7XG4gICAgbGV0IHN0eWxlID0gJCgnaGVhZCcpLmZpbmQoJ3N0eWxlJylcbiAgICBpZiAoIXN0eWxlPy5sZW5ndGgpIHtcbiAgICAgICQoJ2hlYWQnKS5hcHBlbmQoJCgnPHN0eWxlICB0eXBlPVwidGV4dC9jc3NcIj48L3N0eWxlPicpKVxuICAgICAgc3R5bGUgPSAkKCdoZWFkJykuZmluZCgnc3R5bGUnKVxuICAgIH1cbiAgICBzdHlsZS5hcHBlbmQoXG4gICAgICBgLmVjYy1yZXN0cmljdGVkIHtjb2xvcjogcmVkfVxuICAgIC5lY2MtcmVzdHJpY3RlZDpob3ZlciB7Y3Vyc29yOiBub3QtYWxsb3dlZH1gXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIHNldCBzb2NrZXQgKHgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIgPSBuZXcgRW5oYW5jZWRDaGF0Q2FyZExpYigpXG4gICAgfVxuICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0ID0geFxuICB9XG5cbiAgc3RhdGljIGdldCBzb2NrZXQgKCkge1xuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRUNDIG5vdCBJbml0aWFsaXplZCcpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0VDQyBubyBzb2NrZXQnKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXRcbiAgfVxuXG4gIHN0YXRpYyBnZXQgdHlwZXMgKCkge1xuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYikge1xuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYiA9IG5ldyBFbmhhbmNlZENoYXRDYXJkTGliKClcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIudHlwZXNcbiAgfVxuXG4gIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9ycykge1xuICAgIGNhcmRDb25zdHJ1Y3RvcnMuZm9yRWFjaChjYXJkQ29uc3RydWN0b3IgPT4ge1xuICAgICAgaWYgKCFFbmhhbmNlZENoYXRDYXJkTGliLnR5cGVzLmdldChjYXJkQ29uc3RydWN0b3IubmFtZSkpIHtcbiAgICAgICAgRW5oYW5jZWRDaGF0Q2FyZExpYi50eXBlcy5zZXQoY2FyZENvbnN0cnVjdG9yLm5hbWUsIGNhcmRDb25zdHJ1Y3RvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gc3RhdGljIGdtX29uVG9nZ2xlIChkYXRhKXtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oICdnbV9vblRvZ2dsZScpXG4gIC8vIH1cbn1cblxuZnVuY3Rpb24gc2V0QnlQYXRoIChvYmosIHBhdGgsIHZhbHVlKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBvID0gb2JqXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICghb1twYXJ0c1tpXV0pIG9bcGFydHNbaV1dID0ge31cbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgIH1cbiAgfVxuXG4gIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dID0gdmFsdWVcbn1cblxuZnVuY3Rpb24gZ2V0QnlQYXRoIChvYmosIHBhdGgpIHtcbiAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcbiAgbGV0IG8gPSBvYmpcbiAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgbyA9IG9bcGFydHNbaV1dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dXG59XG5cbmV4cG9ydCBjbGFzcyBFbmhhbmNlZENoYXRDYXJkIHtcbiAgLy8gc3RhdGljIHJlZ2lzdGVyIChjYXJkQ29uc3RydWN0b3IpIHtcbiAgLy8gICBFbmhhbmNlZENoYXRDYXJkTGliLnJlZ2lzdGVyKGNhcmRDb25zdHJ1Y3RvcilcbiAgLy8gfVxuXG4gIGNvbnN0cnVjdG9yIChkYXRhID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncykgdGhpcy5kYXRhLmZsYWdzID0ge31cbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uc1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBvbmx5IG9uY2UgYmVmb3JlIHNlbmRpbmcgbWVzc2FnZSB0byBjaGF0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge31cblxuICBnZXQgb3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIHNldCBvcHRpb25zICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IHhcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlcz8uam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlYWtlciAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5vb2MpIHJldHVybiBnYW1lLnVzZXJcbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMuc3BlYWtlciAmJlxuICAgICAgQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgICkge1xuICAgICAgcmV0dXJuIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUudXNlclxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgLy8gYXdhaXQgdGhpcy5hc3NpZ25PYmplY3RzKClcbiAgICByZXR1cm4ge1xuICAgICAgY2FyZDogdGhpcyxcbiAgICAgIGZsYWdzOiB0aGlzLmZsYWdzLFxuICAgICAgZGF0YTogdGhpcy50b09iamVjdCgpLFxuICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgY3NzOiB0aGlzLmNzc0NsYXNzZXMsXG4gICAgICB1c2VyOiBnYW1lLnVzZXIsXG4gICAgICBzcGVha2VyOiB0aGlzLnNwZWFrZXJcbiAgICB9XG4gIH1cblxuICB0b09iamVjdCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEpIHJldHVyblxuICAgIGNvbnN0IGRhdGEgPSB7fVxuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyh0aGlzLmRhdGEpKSB7XG4gICAgICBjb25zdCB2ID0gdGhpcy5kYXRhW2tdXG4gICAgICBpZiAodiBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICBkYXRhW2tdID0gdi50b09iamVjdCA/IHYudG9PYmplY3QoKSA6IGZvdW5kcnkudXRpbHMuZGVlcENsb25lKHYpXG4gICAgICB9IGVsc2UgZGF0YVtrXSA9IHZcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xuICAgIC8vIE1hcCBlY2MgY2FyZCB0eXBlIGlmIG5vdCByZWdpc3RlcmVkIGFscmVhZHlcbiAgICAvLyB0aGlzLnJlZ2lzdGVyRUNDQ2xhc3MoKVxuXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKClcblxuICAgIC8vIFB1Ymxpc2ggYnkgY3VycmVudCB1c2VyIGJ5IGRlZmF1bHQgdW5sZXNzIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCBkYXRhKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cbiAgICBpZiAodGhpcy5vcHRpb25zLmF0dGFjaE9iamVjdCkge1xuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMub2JqZWN0RGF0YVN0cmluZylcbiAgICB9XG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuZWNjQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLm9wdGlvbnMuY2xhc3NlcylcblxuICAgIGNvbnN0IHNwZWFrZXIgPVxuICAgICAgdGhpcy5vcHRpb25zLnNwZWFrZXIgJiYgIXRoaXMub3B0aW9ucy5vb2NcbiAgICAgICAgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgICAgICA6IHt9XG5cbiAgICAvLyBjb25zdCB1c2VySWQgPSB0aGlzLm9wdGlvbnMudXNlcklkID8gdGhpcy5vcHRpb25zLnVzZXJJZCA6IGdhbWUudXNlci5pZFxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICAvLyB1c2VyOiB1c2VySWQsXG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcixcbiAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5vcHRpb25zLnRpdGxlKSxcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSxcbiAgICAgIG9wdGlvbm5hbENoYXREYXRhXG4gICAgKVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdzZWxmcm9sbCcpIGNoYXREYXRhLndoaXNwZXIgPSBbZ2FtZS51c2VyLmlkXVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgYXR0YWNoT2JqZWN0ID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBUT0RPIHRoZSB3aG9sZSBmdW5jdGlvbiBoYXMgdG8gYmUgZXhlY3V0ZWQgYnkgR00gaWYgb3B0aW9ucy5HTWNoYXRDYXJkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wdXRlKSBhd2FpdCB0aGlzLmxvY2FsQ29tcHV0ZSgpXG4gICAgaWYgKHRoaXMub3B0aW9ucy5HTVVwZGF0ZSkgYXdhaXQgdGhpcy5FeGVjdXRlR01VcGRhdGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0RGF0YSgpXG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaWYgKGF0dGFjaE9iamVjdCAmJiAhdGhpcy5kYXRhLkVFQ19BQ1RJT04/LmRldGFjaERhdGEpIHtcbiAgICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMub2JqZWN0RGF0YVN0cmluZylcbiAgICAgIH1cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLm9wdGlvbnMuY2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAgICd1cGRhdGVNZXNzYWdlJyxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWQsXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIClcbiAgICAgIC8vIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICAgIC8vIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUwgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgICAgLy8gfSkgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgICAgLy8gYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIHJldHVybiBtc2cgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgLy8gaHRtbC5vbihcbiAgICAvLyAgICdjbGljaycsXG4gICAgLy8gICBgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGAsXG4gICAgLy8gICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgLy8gKVxuICAgIGh0bWwub24oJ2NoYW5nZScsICdpbnB1dCxzZWxlY3QsdGV4dGFyZWEnLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLmVjYy1zd2l0Y2hgLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLnN1Ym1pdGAsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZm9jdXNvdXQnLCBgLiR7RUNDX0NMQVNTfSBpbnB1dGAsIHRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCBgLiR7RUNDX0NMQVNTfSBidXR0b25gLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2tleWRvd24nLCBgLiR7RUNDX0NMQVNTfSBmb3JtYCwgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcblxuICAgIC8vIGNvbnN0IHZpc2kgPSBodG1sLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gICBjb25zdCBlbCA9IHZpc2lbaV07XG4gICAgLy8gICBhd2FpdCB0aGlzLnNldFZpc2liaWxpdHkoZWwpXG5cbiAgICAvLyB9XG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnW2RhdGEtZWNjLXZpc2liaWxpdHldJylcbiAgICAgIC5lYWNoKGFzeW5jIChpLCBlbCkgPT4gYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnW2RhdGEtZWNjLXBlcm1pc3Npb25zXScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0UGVybWlzc2lvbihlbCkpXG4gICAgaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCkuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0U3RhdGUoZWwpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKGAuJHtFQ0NfQ0xBU1N9IGlucHV0W3R5cGU9XCJyYWRpb1wiXWApXG4gICAgICAuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0UmFkaW9TdGF0ZShlbCkpXG4gICAgLy8gaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2MtcmFkaW8tc3dpdGNoYCkuZWFjaCggKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgfVxuXG4gIHNldFN0YXRlIChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0LmZsYWcpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgICAgdGhpcy5mbGFnc1tlbGVtZW50LmRhdGFzZXQuZmxhZ10gPyBTVEFURS5PTiA6IFNUQVRFLk9GRlxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0Lm5hbWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIGVsZW1lbnQuZGF0YXNldC5uYW1lKVxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHZhbHVlID8gU1RBVEUuT04gOiBTVEFURS5PRkYpXG4gICAgfVxuICB9XG5cbiAgc2V0UmFkaW9TdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5uYW1lKSByZXR1cm5cbiAgICBjb25zdCBzcGxpdGVkID0gZWxlbWVudC5uYW1lLnNwbGl0KCcuJylcbiAgICBpZiAoc3BsaXRlZFswXS50b0xvd2VyQ2FzZSgpICE9PSAnZGF0YScpIHJldHVyblxuICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YVtzcGxpdGVkWzFdXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmRhdGFbc3BsaXRlZFsxXV0gPT09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFZpc2liaWxpdHkgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5KSByZXR1cm5cbiAgICBjb25zdCBjYW5Zb3VTZWUgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Zpc2liaWxpdHksIHRydWUpXG4gICAgaWYgKCFjYW5Zb3VTZWUpIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICB9XG5cbiAgYXN5bmMgc2V0UGVybWlzc2lvbiAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKSByZXR1cm5cbiAgICBjb25zdCBjYW5Zb3VNb2QgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKVxuICAgIGlmICghY2FuWW91TW9kKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VjYy1yZXN0cmljdGVkJylcbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdpbnB1dCcpKSB7XG4gICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdyYW5nZScpICQoZWxlbWVudCkuYXR0cignZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBlbHNlICQoZWxlbWVudCkuYXR0cigncmVhZG9ubHknLCB0cnVlKVxuICAgICAgfVxuICAgICAgaWYgKCQoZWxlbWVudCkuaXMoJ3NlbGVjdCcpKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBhcyBwZXJtaXNzaW9uIGFnYWluc3QgYSBzdHJpbmcgb2YgYWxsb3dlZCBwZXJzb25zLlxuICAgKiBJZiB0aGUgc3RyaW5nIGlzIGVtcHR5IHBlcm1pc3Npb24gYXJlIGFsbCBncmFudGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXN0cmljdGVkVG8gICBBIHN0cmluZyBjb250YWluaW5nIHRoZSBzZXQgb2YgcGxheWVyIGFsbG93ZWQuIFZhbHVlIGNhbiBiZSBvd25lciwgZ20sIHBsYXllcnMsIHV1aWQgc2VwYXJhdGVkIGJ5IHNwYWNlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaW9uICAgICAgICBpZiB0cnVlIGdtIHdpbGwgYmUgY29uc2lkZXJlZCBmb3IgcGVybWlzc2lvbnMuIGZhbHNlID0gZ20gaGFzIGFsd2F5cyByaWdodC4gdHJ1ZSBHTSBwZXJtaXNzaW9uIHdpbGwgYmUgY2hlY2tlZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgaGFzUGVybSAocmVzdHJpY3RlZFRvLCB2aXNpb24gPSBmYWxzZSkge1xuICAgIGlmICghcmVzdHJpY3RlZFRvLmxlbmd0aCkgcmV0dXJuIHRydWVcbiAgICBsZXQgcGVybWlzc2lvbnNBcnJheSA9IHJlc3RyaWN0ZWRUby5zcGxpdCgnICcpXG4gICAgY29uc3Qgd2hpdGVMaXN0ID0gIXBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkJMQUNLTElTVClcbiAgICBpZiAoIXdoaXRlTGlzdCkge1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1RcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXZpc2lvbikgcmV0dXJuIHRydWUgLy8gR00gY2FuIGFsd2F5cyBtb2RpZnkgZXZlcnl0aGluZyAhIE5haFxuICAgICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkdNKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcbiAgICAgIH1cbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5OT1RfR00pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLkdNKVxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLk5PVF9HTVxuICAgIClcblxuICAgIC8vICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy9JZiBwYXNzIHRoZSBmaWx0ZXIgcmV0dXJuIGZhbHNlIHVubGVzcyBpdCdzIGEgYmxhY2tsaXN0XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT0gUEVSTUlTU0lPTl9UWVBFLkdNKVxuICAgIC8vIH1cblxuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5VU0VSKSkge1xuICAgICAgaWYgKHRoaXMubWVzc2FnZS5pc0F1dGhvcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0IC8vIGlzQXV0aG9yIHZzIHVzZXIuaXNPd25lciA/XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLlVTRVJcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuU1BFQUtFUikpIHtcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB0aGlzLm1lc3NhZ2UuZGF0YS5zcGVha2VyXG4gICAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQoXG4gICAgICAgICAgYFNjZW5lLiR7c3BlYWtlci5zY2VuZX0uVG9rZW4uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICAgKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3BlYWtlci5hY3Rvcikge1xuICAgICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGVsc2UgaWYgKHNwZWFrZXIudXNlcikge1xuICAgICAgLy8gICBpZiAoZ2FtZS51c2VyLmlkID09IHNwZWFrZXIudXNlcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAvLyB9XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVJcbiAgICAgIClcbiAgICB9XG4gICAgLy8gQWxsIGZpbHRlciBwYXNzZWQsIGFycmF5IHNob3VsZCBjb250YWlucyBvbmx5IHV1aWRzIG9yIGFjdG9yL3Rva2VuIGlkc1xuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSBwZXJtaXNzaW9uc0FycmF5W2ldXG4gICAgICAgIGxldCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKHV1aWQpXG4gICAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHV1aWQpXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5pc093bmVyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVW5hYmxlIHRvIGZpbmQgYWN0b3IgJHt1dWlkfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy8gSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cblxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZsYWdzXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IGZyb20gdGhlIGRhdGEgc3RydWN0dXJlLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgYXNzaWduT2JqZWN0cyAoKSB7fVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0byB1cGRhdGUgb2JqZWN0IGFmdGVyIGRhdGEgY2hhbmdlLlxuICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgbG9jYWwgY2xpZW50XG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgb25lIG9mIHRoZSBHTSBjbGllbnRzLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge31cblxuICBhc3luYyBFeGVjdXRlR01VcGRhdGUgKCkge1xuICAgIGNvbnN0IG5ld0RhdGEgPSBhd2FpdCBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldC5leGVjdXRlQXNHTShcbiAgICAgICdHTVVwZGF0ZScsXG4gICAgICB0aGlzLnRvT2JqZWN0KCksXG4gICAgICB0aGlzLl9vcHRpb25zLFxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICB0aGlzLmRhdGEgPSBuZXdEYXRhXG4gICAgYXdhaXQgdGhpcy5hc3NpZ25PYmplY3RzKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgYXN5bmMgX29uQnV0dG9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIC8vIEF2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldC5hY3Rpb25cblxuICAgIGxldCBmb3JtVXBkYXRlXG4gICAgbGV0IGFjdGlvblVwZGF0ZSA9IGZhbHNlXG5cbiAgICAvLyBpZiAoJ3N1Ym1pdCcgPT0gdGFyZ2V0LnR5cGUpIHtcbiAgICAvLyAgIGNvbnNvbGUud2FybignQnV0dG9uIGlzIGFsc28gYSBzdWJtaXQnKVxuICAgIC8vIH1cblxuICAgIC8vIFBlcmZvcm0gY2FyZCB1cGRhdGUgZmlyc3RcbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmIChjYXJkKSBmb3JtVXBkYXRlID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgQ291bGQgbm90IGZpbmQgYSBFRUMgY2xhc3MgZm9yIHRoaXMgY2FyZDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG9yaWdpbmFsRGlzcGxheVN0eWxlID0gdGFyZ2V0LnN0eWxlLmRpc3BsYXlcblxuICAgIGlmICghYWN0aW9uKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ25vIGFjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBidXR0b24nKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICghdGhpc1thY3Rpb25dKSB7XG4gICAgICBjb25zb2xlLndhcm4oYG5vICR7YWN0aW9ufSBhY3Rpb24gZm91bmQgZm9yIHRoaXMgY2FyZGApXG4gICAgICBpZiAoIWZvcm1VcGRhdGUpIHJldHVybiAvLyBJZiB0aGUgZm9ybSB3YXMgdXBkYXRlZCB3ZSBzdGlsbCB1cGRhdGUgdGhlIGNhcmRcbiAgICB9XG4gICAgaWYgKHRoaXNbYWN0aW9uXSkge1xuICAgICAgYWN0aW9uVXBkYXRlID0gYXdhaXQgdGhpc1thY3Rpb25dKHsgZXZlbnQsIHVwZGF0ZUNhcmQ6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKGZvcm1VcGRhdGUgfHwgYWN0aW9uVXBkYXRlKSBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5U3R5bGVcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqIEByZXR1cm5zIGZhbHNlIGlmIGtleSBpcyBlbnRlciB0byBhdm9pZCBnbG9iYWwgc3VibWlzc2lvblxuICAgKi9cbiAgX29uS2V5IChldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIHJldHVybiBldmVudC5rZXkgIT09ICdFbnRlcidcbiAgfVxuXG4gIF9vbkNoYW5nZSAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWVcbiAgICBpZiAodGFnTmFtZSA9PT0gJ0JVVFRPTicgJiYgJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiAvL1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBmb3JtIGZyb20gdGhlIGNhcmQgYW5kIHVwZGF0ZSB0aGUgZGF0YSBzdHJ1Y3R1cmVcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgX3VwZGF0ZSAoY2FyZCkge1xuICAgIGNvbnN0IGZvcm1zID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcbiAgICBsZXQgdXBkYXRlcyA9IGZhbHNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZm9ybSA9IGZvcm1zW2ldXG4gICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKGZvcm0pXG4gICAgICBjb25zdCBkYXRhID0gZmQub2JqZWN0XG4gICAgICAvLyBkYXRhID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxuICAgICAgLy8gICB0aGlzLmRhdGEsXG4gICAgICAvLyAgIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpXG4gICAgICAvLyApXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBrZXkpXG4gICAgICAgIGlmICghKG9sZFZhbHVlID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICBzZXRCeVBhdGgodGhpcywga2V5LCB2YWx1ZSlcbiAgICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVzXG4gIH1cblxuICBnZXQgbWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZSAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2UgPSB4XG4gIH1cblxuICBnZXQgbWVzc2FnZUlkICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlLmlkXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2VJZCAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRhY2hPYmplY3Q6IHRydWUsXG4gICAgICBjbGFzc2VzOiBbRUNDX0NMQVNTXSxcbiAgICAgIGV4Y2x1ZGU6IFtdLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBvb2M6IGZhbHNlLCAvLyAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm9vYz1mYWxzZV0gIFVzZSB0aGUgc3BlYWtlci9nZXRzcGVha2VyLiBpZiB0cnVlIHVzZSB0aGUgdXNlciBpbnN0ZWFkXG4gICAgICBjb21wdXRlOiB0cnVlLCAvLyAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY29tcHV0ZS5sb2NhbD10cnVlXSBpbnZvcXVlIHRoZSBjb21wdXRlIG1ldGhvZCBhcyBsb2NhbCB1c2VyID0+IG5lZWQgdG8gb3ZlcnJpZGUgbG9jYWxDb21wdXRlXG4gICAgICBHTVVwZGF0ZTogZmFsc2UgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUuR009ZmFsc2VdIGludm9xdWUgdGhlIEdNVXBkYXRlIG1ldGhvZCBhcyBHTSA9PiBuZWVkIHRvIG92ZXJyaWRlIEdNVXBkYXRlXG4gICAgfVxuICB9XG5cbiAgZ2V0IG9iamVjdERhdGFTdHJpbmcgKCkge1xuICAgIGNvbnN0IHNhdmVEYXRhID0ge1xuICAgICAgZGF0YTogdGhpcy5kYXRhLFxuICAgICAgb3B0aW9uczogdGhpcy5fb3B0aW9uc1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc2F2ZURhdGEsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoaHRtbWxDYXJkKSB7XG4gICAgaWYgKCFodG1tbENhcmQpIHJldHVyblxuICAgIGlmICghaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MpIHJldHVyblxuICAgIGlmICghaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSByZXR1cm5cbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBjb25zdCBtZXNzYWdlID0gaHRtbWxDYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKFxuICAgICAgY2FyZERhdGEuZGF0YSxcbiAgICAgIGNhcmREYXRhLm9wdGlvbnMsXG4gICAgICBodG1tbENhcmQuZGF0YXNldC5lY2NDbGFzcyxcbiAgICAgIG1lc3NhZ2VJZFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSwgb3B0aW9ucywgY2FyZENsYXNzTmFtZSwgbWVzc2FnZUlkID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgQ2FyZENsYXNzID0gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi50eXBlcy5nZXQoY2FyZENsYXNzTmFtZSlcblxuICAgIGlmICghQ2FyZENsYXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmtub3duIGNoYXQgY2FyZCB0eXBlOiAke2NhcmRDbGFzc05hbWV9YClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmRDbGFzcyhkYXRhLCBvcHRpb25zKVxuICAgIGlmIChtZXNzYWdlSWQpIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3RzKClcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc2V0RGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgdHJ1ZSlcbiAgfVxuXG4gIHVuc2V0RGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgZmFsc2UpXG4gIH1cblxuICB0b2dnbGVEYXRhIChuYW1lKSB7XG4gICAgaWYgKCFuYW1lICYmICEoJC50eXBlKG5hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIG5hbWUpXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsICF2YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICAvLyBjb25zdCBhbnN3ZXIgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5leGVjdXRlQXNHTSgnZ21fb25Ub2dnbGUnLCB7XG4gICAgLy8gICBldmVudDogZXZlbnQsXG4gICAgLy8gICBjYXJkOiB0aGlzXG4gICAgLy8gfSlcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgICAgPyBgZGF0YS5mbGFncy4ke3RhcmdldC5kYXRhc2V0LmZsYWd9YFxuICAgICAgOiB0YXJnZXQuZGF0YXNldC5uYW1lXG4gICAgaWYgKCFuYW1lKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuY2xvc2VzdCgnLmVjYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRGF0YShuYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lY2Mtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIGNvbnN0IGJOYW1lID0gYi5kYXRhc2V0LmZsYWdcbiAgICAgICAgICA/IGBkYXRhLmZsYWdzLiR7Yi5kYXRhc2V0LmZsYWd9YFxuICAgICAgICAgIDogYi5kYXRhc2V0Lm5hbWVcbiAgICAgICAgdGhpcy51bnNldERhdGEoYk5hbWUpXG4gICAgICB9XG4gICAgICB0aGlzLnNldERhdGEobmFtZSlcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XG4gICAgICBpZiAoY2FyZCkgdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBTdWJtaXQgb24gY2hhbmdlID9cbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBfcGFydGljaXBhbnQge1xuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YVxuICB9XG5cbiAgX2ZldGNoICgpIHtcbiAgICBpZiAoIXRoaXMuX2RvYyAmJiB0aGlzLmRhdGEuZG9jVXVpZCkge1xuICAgICAgdGhpcy5fZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuX2RvYykge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX2RvYy5jb25zdHJ1Y3Rvcj8ubmFtZSkge1xuICAgICAgICAgIGNhc2UgJ1Rva2VuRG9jdW1lbnQnOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2MuYWN0b3JcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdDb0NBY3Rvcic6XG4gICAgICAgICAgICB0aGlzLl9hY3RvciA9IHRoaXMuX2RvY1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHRoaXMuX2FjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICB0aGlzLl9mZXRjaCgpXG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgaXNBY3RvciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQWN0b3IgfHwgdGhpcy5oYXNWZWhpY2xlXG4gIH1cblxuICBnZXQgaXNBY3RpdmUgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuYWN0aXZlIHx8IGZhbHNlXG4gIH1cblxuICBnZXQga2V5ICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLmFjdG9yS2V5XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGljb24gKCkge1xuICAgIGlmICghdGhpcy5pc0FjdG9yKSB7XG4gICAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLmltZ1xuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pbWdcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZHJpdmVyICgpIHtcbiAgICBpZiAoIXRoaXMuX2RyaXZlcikge1xuICAgICAgdGhpcy5fZHJpdmVyID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kcml2ZXJcbiAgfVxuXG4gIGdldCB2ZWhpY2xlICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnZlaGljbGVLZXkpIHtcbiAgICAgIHRoaXMuX3ZlaGljbGUgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEudmVoaWNsZUtleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZlaGljbGVcbiAgfVxuXG4gIGdldCBoYXNBY3RvciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5hY3RvclxuICB9XG5cbiAgZ2V0IGhhc1ZlaGljbGUgKCkge1xuICAgIHJldHVybiAhIXRoaXMudmVoaWNsZVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUubmFtZVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5uYW1lIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSB0aGlzLmRhdGEubW92ID0gdGhpcy52ZWhpY2xlLm1vdlxuICAgICAgZWxzZSBpZiAodGhpcy5oYXNBY3RvcikgdGhpcy5kYXRhLm1vdiA9IHRoaXMuYWN0b3IubW92XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5tb3YpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKSkgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gdHJ1ZVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YS5tb3YgPSB1bmRlZmluZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdlxuICB9XG5cbiAgZ2V0IHV1aWQgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEudXVpZFxuICB9XG5cbiAgZ2V0IGhhc01heEJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDJcbiAgfVxuXG4gIGdldCBib251c0RpY2UgKCkge1xuICAgIGlmIChcbiAgICAgIGlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpIHx8XG4gICAgICB0aGlzLmRhdGEuYm9udXNEaWNlIDwgMCB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA+IDJcbiAgICApIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuYm9udXNEaWNlXG4gIH1cblxuICBzZXQgYm9udXNEaWNlICh4KSB7XG4gICAgaWYgKGlzTmFOKHgpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdCb251cyBkaWNlIGNhbiBPbmx5IGJlIGEgbnVtYmVyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA+IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ01heCAyIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh4IDwgMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTm8gbmVnYXRpdiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlID0geFxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5ocCkge1xuICAgICAgdGhpcy5kYXRhLmhwID0gMFxuICAgIH1cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5kYXRhLmhwID0gdGhpcy5hY3Rvci5ocFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuaHBcbiAgfVxuXG4gIHNldCBocCAoeCkge1xuICAgIHRoaXMuZGF0YS5ocCA9IHhcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5hY3Rvci5zZXRIcCh4KVxuICAgIH1cbiAgfVxuXG4gIGFkZEJvbnVzRGljZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPj0gMikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIG1heCBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlICs9IDFcbiAgfVxuXG4gIHJlbW92ZUJvbnVzRGljZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPD0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIDAgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSAtPSAxXG4gIH1cblxuICByZXNldEJvbnVzRGljZSAoKSB7XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IDBcbiAgfVxuXG4gIGdldCBoYXNCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc09uZUJvbnVzRGljZSB8fCB0aGlzLmhhc1R3b0JvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGhhc09uZUJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDFcbiAgfVxuXG4gIGdldCBoYXNUd29Cb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgY2FuQXNzaXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5hc3Npc3Q/Lmxlbmd0aCA+IDBcbiAgfVxuXG4gIGdldCBjYW5CZUNhdXRpb3VzICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaGFzTWF4Qm9udXNEaWNlXG4gIH1cblxuICBnZXQgYXNzaXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFzc2lzdCB8fCBbXVxuICB9XG5cbiAgZ2V0IGRleCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlICYmIHRoaXMuaGFzRHJpdmVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmRyaXZlci5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEuZGV4KSkpIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuZGV4XG4gIH1cblxuICBnZXQgaGFzQUd1blJlYWR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmhhc0FHdW5SZWFkeSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGluaXRpYXRpdmUgKCkge1xuICAgIGxldCBpbml0ID0gdGhpcy5kZXhcbiAgICBpZiAodGhpcy5oYXNBR3VuUmVhZHkpIHtcbiAgICAgIGluaXQgKz0gNTBcbiAgICB9XG4gICAgLy8gaWYoIHRoaXMuc3BlZWRDaGVjayl7XG4gICAgLy8gICBpZih0aGlzLnNwZWVkQ2hlY2suc2NvcmUpIGluaXQgKz0gdGhpcy5zcGVlZENoZWNrLnNjb3JlLzEwMFxuICAgIC8vIH1cblxuICAgIHJldHVybiBpbml0XG4gIH1cblxuICBnZXQgaXNDaGFzZXIgKCkge1xuICAgIHJldHVybiAhIXRoaXMuZGF0YS5jaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ByZXkgKCkge1xuICAgIHJldHVybiAhdGhpcy5pc0NoYXNlclxuICB9XG5cbiAgZ2V0IGlzVmFsaWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZhbGlkRGV4ICYmIHRoaXMuaGFzVmFsaWRNb3ZcbiAgfVxuXG4gIGdldCBoYXNWYWxpZERleCAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpXG4gIH1cblxuICBnZXQgaGFzVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKVxuICB9XG5cbiAgZ2V0IGhhc0RyaXZlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0FjdG9yXG4gIH1cblxuICBnZXQgbW92QWRqdXN0bWVudCAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIGlmICghcm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcbiAgICAgICAgICBlbHNlIGlmIChyb2xsLmZhaWxlZCkgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBhZGp1c3RlZE1vdiAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMubW92KSkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubW92KSArIHRoaXMubW92QWRqdXN0bWVudFxuICB9XG5cbiAgZ2V0IGhhc01vdkFkanVzdG1lbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcbiAgfVxuXG4gIGdldCBoYXNCb251c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNYWx1c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIGdldCBvcHRpb25zKCl7XG4gIC8vICByZXR1cm4ge1xuICAvLyAgICBleGNsdWRlOiBbXSxcbiAgLy8gICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nXG4gIC8vICB9O1xuICAvLyB9XG5cbiAgLy8gZ2V0IGRhdGFTdHJpbmcoKXtcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xuICAvLyAgICBpZiggbnVsbCA9PT0gdmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCB0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgcmV0dXJuIHZhbHVlO1xuICAvLyAgfSk7XG4gIC8vIH1cblxuICB0b29TbG93ICgpIHtcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSB0cnVlXG4gIH1cblxuICBpbmNsdWRlSW5DaGFzZSAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IGZhbHNlXG4gIH1cblxuICBlc2NhcGVkICgpIHtcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IHRydWVcbiAgfVxuXG4gIHNldCBzbG93ZXN0ICh4KSB7XG4gICAgdGhpcy5kYXRhLnNsb3dlc3QgPSB4XG4gIH1cblxuICBnZXQgc2xvd2VzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbG93ZXN0XG4gIH1cblxuICBzZXQgZmFzdGVzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5mYXN0ZXN0ID0geFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZmFzdGVzdFxuICB9XG5cbiAgY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIChtaW5Nb3YpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5tb3ZlbWVudEFjdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiB0aGlzLmFkanVzdGVkTW92ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgaXNOYU4obWluTW92KVxuICAgICkge1xuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDEgKyAodGhpcy5hZGp1c3RlZE1vdiAtIG1pbk1vdilcbiAgICB9XG4gICAgLy8gaWYoIHRoaXMubW92ZW1lbnRBY3Rpb24gPCAwKSB0aGlzLm1vdmVtZW50QWN0aW9uID0gMFxuICB9XG5cbiAgc2V0IG1vdmVtZW50QWN0aW9uICh4KSB7XG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0geFxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBzZXQgY3VycmVudE1vdmVtZW50QWN0aW9ucyAoeCkge1xuICAgIHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0geFxuICB9XG5cbiAgZ2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyB8fCAwXG4gIH1cblxuICBnZXQgaGFzTWF4TXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+PSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBnZXQgaGFzTm9NdnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDBcbiAgfVxuXG4gIGFkZE1vdmVtZW50QWN0aW9ucyAoeCA9IDEpIHtcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiB0aGlzLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gICAgfVxuICB9XG5cbiAgYWx0ZXJNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiB0aGlzLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uQXJyYXkgKCkge1xuICAgIGNvbnN0IGJhc2VBcnJheSA9IEFycmF5KHRoaXMubW92ZW1lbnRBY3Rpb24pLmZpbGwoJ2Jhc2UnKVxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnM7IGkrKykge1xuICAgICAgICBiYXNlQXJyYXlbaV0gPSAnYmFzZSBhdmFpbGFibGUnXG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUFycmF5XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDApIHtcbiAgICAgIGNvbnN0IGRlZmljaXRBcnJheSA9IEFycmF5KE1hdGguYWJzKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucykpLmZpbGwoXG4gICAgICAgICdkZWZpY2l0J1xuICAgICAgKVxuICAgICAgcmV0dXJuIGRlZmljaXRBcnJheS5jb25jYXQoYmFzZUFycmF5KVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgY29uc3QgY3NzQ2xhc3NlcyA9IFtdXG4gICAgaWYgKHRoaXMuaXNDaGFzZXIpIGNzc0NsYXNzZXMucHVzaCgnY2hhc2VyJylcbiAgICBlbHNlIGNzc0NsYXNzZXMucHVzaCgncHJleScpXG4gICAgaWYgKHRoaXMuZGF0YS5leGNsdWRlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdleGNsdWRlZCcsICd0b29fc2xvdycpXG4gICAgaWYgKHRoaXMuZGF0YS5lc2NhcGVkKSBjc3NDbGFzc2VzLnB1c2goJ2VzY2FwZWQnKVxuICAgIGlmICh0aGlzLmRhdGEuZmFzdGVzdCkgY3NzQ2xhc3Nlcy5wdXNoKCdmYXN0ZXN0JylcbiAgICBpZiAodGhpcy5kYXRhLnNsb3dlc3QpIGNzc0NsYXNzZXMucHVzaCgnc2xvd2VzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5hY3RpdmUpIGNzc0NsYXNzZXMucHVzaCgnYWN0aXZlJylcbiAgICBpZiAodGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPD0gMCkgY3NzQ2xhc3Nlcy5wdXNoKCduby1hY3Rpb25zJylcbiAgICByZXR1cm4gY3NzQ2xhc3Nlcy5qb2luKCcgJylcbiAgfVxuXG4gIGdldCBzcGVlZENoZWNrICgpIHtcbiAgICBjb25zdCBjaGVjayA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uc2NvcmUpIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICBjaGVjay5jc3NDbGFzc2VzID0gJydcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICBjaGVjay5yb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHRoaXMuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKVxuICAgICAgaWYgKGNoZWNrLnJvbGwpIHtcbiAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkgfHwgY2hlY2sucm9sbC5oYXNDYXJkKSB7XG4gICAgICAgICAgY2hlY2sucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLmlubGluZVJvbGwgPSBjaGVjay5yb2xsLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgICAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJ3JvbGxlZCdcbiAgICAgICAgICBpZiAoIWNoZWNrLnJvbGwuc3RhbmRieSkge1xuICAgICAgICAgICAgaWYgKGNoZWNrLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgICAgICBjaGVjay5tb2RpZmllckNzcyA9ICd1cGdyYWRlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGVjay5yb2xsLmZhaWxlZCkgY2hlY2subW9kaWZpZXJDc3MgPSAnZG93bmdyYWRlJ1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5mYWlsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjaGVjay5oYXNNb2RpZmllciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgIGNoZWNrLm9wdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBjIG9mIFsnY29uJ10pIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB0aGlzLmFjdG9yLmdldENoYXJhY3RlcmlzdGljKGMpXG4gICAgICAgIGlmIChjaGFyYWN0ZXJpc3RpYz8udmFsdWUpIGNoZWNrLm9wdGlvbnMucHVzaChjaGFyYWN0ZXJpc3RpYy5sYWJlbClcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IuZHJpdmVTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IucGlsb3RTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICAgIGNoZWNrLmhhc09wdGlvbnMgPSAhIWNoZWNrLm9wdGlvbnMubGVuZ3RoXG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgIGNvbnN0IGdhbWVJdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgICAgaWYgKGdhbWVJdGVtKSBpdGVtID0gdGhpcy5hY3Rvci5maW5kKGdhbWVJdGVtLm5hbWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZmluZCh0aGlzLmRhdGEuc3BlZWRDaGVjay5uYW1lKVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xuICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW1cbiAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLmJhc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUgJiYgdGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSB7XG4gICAgICBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgICAgY2hlY2suc2NvcmUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5zY29yZVxuICAgICAgY2hlY2sucmVmU2V0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBjaGVjay5jYW5CZVJvbGxlZCA9IHRydWVcblxuICAgIGlmICghY2hlY2sucm9sbGVkICYmICFjaGVjay5zY29yZSkge1xuICAgICAgY2hlY2suY3NzQ2xhc3NlcyArPSAnIGludmFsaWQnXG4gICAgICBjaGVjay5jYW5CZVJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGNoZWNrLmlzVmFsaWQgPSBjaGVjay5yb2xsZWQgJiYgIWlzTmFOKGNoZWNrLnNjb3JlKVxuXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeVJvbGVBbmREZXggKGEsIGIpIHtcbiAgaWYgKCFhICYmIGIpIHJldHVybiAxXG4gIGlmICghYiAmJiBhKSByZXR1cm4gLTFcbiAgaWYgKCFhICYmICFiKSByZXR1cm4gMFxuICAvLyBQdXQgY2hhc2VycyBmaXJzdFxuICBpZiAoYi5jaGFzZXIgJiYgIWEuY2hhc2VyKSByZXR1cm4gMVxuICBpZiAoYS5jaGFzZXIgJiYgIWIuY2hhc2VyKSByZXR1cm4gLTFcbiAgLy8gSWYgc2FtZXR5cGUgc29ydCBieSBkZXhcbiAgcmV0dXJuIGEuZGV4IC0gYi5kZXhcbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBFbmhhbmNlZENoYXRDYXJkIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4uLy4uL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDaGFzZU9ic3RhY2xlQ2FyZCBleHRlbmRzIEVuaGFuY2VkQ2hhdENhcmQge1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5odG1sJyxcbiAgICAgIEdNVXBkYXRlOiB0cnVlXG4gICAgfSlcbiAgICBvcHRpb25zLmNsYXNzZXMucHVzaCgnb2JzdGFjbGUtY2FyZCcpXG4gICAgcmV0dXJuIG9wdGlvbnNcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5zdGF0dXMgPSBbXVxuICAgIGRhdGEuc3RyaW5ncyA9IHt9XG4gICAgZGF0YS5kaXNwbGF5QWN0b3JPbkNhcmQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICAgIC8vIGRhdGEucGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKVxuXG4gICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICBuYW1lOlxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpICsgYCA6JHt0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0fWBcbiAgICB9KVxuXG4gICAgZGF0YS5jYXJkLmJyZWFrYWJsZU9ic3RhY2xlID1cbiAgICAgIGRhdGEuZGF0YS5vYnN0YWNsZT8uYmFycmllciAmJiBkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzIC8vIFRPRE86IENoZWNrIGlmIHVzZWZ1bGxcbiAgICBkYXRhLmNhcmQudmFsaWRDaGVjayA9IGZhbHNlXG5cbiAgICBpZiAoXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzPy5vYnN0YWNsZURlZmluZWQgJiZcbiAgICAgIChkYXRhLmRhdGEub2JzdGFjbGUuaGF6YXJkIHx8XG4gICAgICAgIChkYXRhLmRhdGEub2JzdGFjbGUuYmFycmllciAmJiAhZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cykpXG4gICAgKSB7XG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gdHJ1ZVxuICAgICAgZGF0YS5kYXRhLnN0YXRlcy50cnlUb0JyZWFrID0gZmFsc2VcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQ/LmFjdG9yKSB7XG4gICAgICBkYXRhLnNraWxsID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5maW5kKGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpXG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MoXG4gICAgICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWRcbiAgICAgIClcbiAgICAgIGlmIChkYXRhLnNraWxsKSB7XG4gICAgICAgIGRhdGEudmFsaWRDaGVjayA9IHRydWVcbiAgICAgICAgZGF0YS52YWxpZFNraWxsID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lICYmIGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEuY2hlY2tPcHRpb25zID0gdGhpcy5jaGFzZS5hbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NcbiAgICAgIGRhdGEuZHVtbXlBY3RvciA9IHRydWVcbiAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lICYmIGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhLmRhdGEuYm9udXNEaWNlKSBkYXRhLmRhdGEuYm9udXNEaWNlID0gMFxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLmJvbnVzRGljZSA8IDIgJiZcbiAgICAgIGRhdGEuZGF0YS50b3RhbEFjdGlvbkNvc3QgPCBkYXRhLmRhdGEubW92ZW1lbnRBY3Rpb25cbiAgICApIHtcbiAgICAgIGRhdGEuY2FuVGFrZUNhdXRpb3VzQXBwcm9hY2ggPSB0cnVlXG4gICAgfVxuXG4gICAgZGF0YS5jdXN0b21XZWFwb24gPSBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEud2VhcG9uQ2hvaWNlID09PSAnMCcpIHtcbiAgICAgIGRhdGEuY3VzdG9tV2VhcG9uID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChkYXRhLnZhbGlkQ2hlY2spIHtcbiAgICAgIGxldCBjaGVja05hbWUsIHZhbHVlXG4gICAgICBpZiAoZGF0YS5za2lsbCkge1xuICAgICAgICBjaGVja05hbWUgPSBkYXRhLnNraWxsLnZhbHVlLm5hbWVcbiAgICAgICAgdmFsdWUgPSBkYXRhLnNraWxsLnZhbHVlLnZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja05hbWUgPSBkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lXG4gICAgICAgIHZhbHVlID0gZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkXG4gICAgICB9XG4gICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXNrUm9sbCcsIHtcbiAgICAgICAgbmFtZTogY2hlY2tOYW1lLFxuICAgICAgICB2YWx1ZVxuICAgICAgfSlcbiAgICAgIGlmIChkYXRhLmRhdGEuYm9udXNEaWNlICE9PSAwKSB7XG4gICAgICAgIGlmIChkYXRhLmRhdGEuYm9udXNEaWNlID4gMCkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja1JvbGxSZXF1ZXN0ICs9IGAgKCske2RhdGEuZGF0YS5ib251c0RpY2V9KWBcbiAgICAgICAgfSBlbHNlIGRhdGEuc3RyaW5ncy5jaGVja1JvbGxSZXF1ZXN0ICs9IGAgKCR7ZGF0YS5kYXRhLmJvbnVzRGljZX0pYFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLmRhdGEuc3RhdGVzPy5vYnN0YWNsZURlZmluZWQpIHtcbiAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhY2luZ09ic3RhY2xlJywge1xuICAgICAgICB0eXBlOiBkYXRhLmRhdGEub2JzdGFjbGUuYmFycmllclxuICAgICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFCYXJyaWVyJylcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BSGF6YXJkJylcbiAgICAgIH0pXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLm5hbWUpIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlRGVmaW5lZCArPSBgICgke2RhdGEuZGF0YS5vYnN0YWNsZS5uYW1lfSlgXG4gICAgICB9XG5cbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMuY2FuQXNrUm9sbCA9IHRydWVcbiAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IGZhbHNlXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXIpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CYXJyaWVyJykgfSlcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHtcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHsgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrYWJsZScpIH0pXG4gICAgICAgICAgLy8gZGF0YS5kYXRhLnN0YXRlcy5vYnN0YWNsZUNhbkJlQnJva2VuID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHsgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhemFyZCcpIH0pXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgIGlmICghZGF0YS52YWxpZENoZWNrKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZENoZWNrJyksXG4gICAgICAgICAgICBjc3M6ICdlcnJvcidcbiAgICAgICAgICB9KVxuICAgICAgICAgIGRhdGEuc3RyaW5ncy5FbnRlclZhbHVlVGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgJ0NvQzcuU2tpbGxTZWxlY3RCYXNlJyxcbiAgICAgICAgICAgIHsgbmFtZTogZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSB9XG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICghZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkKSBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKCFkYXRhLnZhbGlkU2tpbGwpIHtcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1ZhbGlkU2tpbGwnKSxcbiAgICAgICAgICAgIGNzczogJ3dhcm5pbmcnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrKSB7XG4gICAgICAgIGxldCBkYW1hZ2VTdGF0dXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQnJlYWtEb3duJylcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsKSB7XG4gICAgICAgICAgZGFtYWdlU3RhdHVzICs9IGAgOiAke3RoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbH1gXG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgbmFtZTogZGFtYWdlU3RhdHVzXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEYW1hZ2VSb2xsZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWwgPD0gMCkge1xuICAgICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlRGFtYWdlID1cbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vRGFtYWdlRGVhbHQnKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhLmlubGluZURhbWFnZVJvbGwgPSBjcmVhdGVJbmxpbmVSb2xsKFxuICAgICAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGxcbiAgICAgICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlRGFtYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EYW1hZ2VEZWFsdCcsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGRhdGEuaW5saW5lRGFtYWdlUm9sbFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZWdvdGlhdGUnKSB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCkge1xuICAgICAgICBjb25zdCBjYXV0aW91c1N0YXR1cyA9IHtcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2F1dGlvdXMnKSxcbiAgICAgICAgICBjc3M6ICcnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2ggPiAxKSB7XG4gICAgICAgICAgY2F1dGlvdXNTdGF0dXMuY3NzID0gJ3N0cm9uZydcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2F1dGlvdXNBcHByb2FjaFR5cGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5CZWluZ1ZlcnlDYXV0aW91cydcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNhdXRpb3VzQXBwcm9hY2hUeXBlID1cbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CZWluZ0NhdXRpb3VzJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkgY2F1dGlvdXNTdGF0dXMuY3NzICs9ICcgY29uc3VtZSdcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaChjYXV0aW91c1N0YXR1cylcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaykge1xuICAgICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlIC8vIE9uIGhhemFyZCwgeW91IHBhc3MgZXZlbiBpZiB5b3UgZmFpbCB5b3VyIHJvbGxcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLnBhc3NlZCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVQYXNzZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5PYnN0YWNsZVBhc3NlZCdcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmx1Y2tTcGVudCkge1xuICAgICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlUGFzc2VkICs9IGAgKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5Hb3RMdWNreSdcbiAgICAgICAgICAgICl9KWBcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VjY2VzcycpLFxuICAgICAgICAgICAgY3NzOiAnc3VjY2VzcydcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrRmFpbGVkID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9ic3RhY2xlRnVtYmxlJylcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKSxcbiAgICAgICAgICAgIGNzczogJ2Z1bWJsZSdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZhaWwnKVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKSxcbiAgICAgICAgICAgIGNzczogJ2ZhaWx1cmUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnBsYXllckFjdGlvbkRlZmluZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICdDb0M3LlRyeVRvTmVnb3RpYXRlSGF6YXJkJ1xuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLnBsYXllckludGVudGlvbnMgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5UcnlUb0dldFBhc3RCYXJyaWVycydcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrKSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLnBsYXllckludGVudGlvbnMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVHJ5VG9CcmVhaycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jaGVja1JvbGxlZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICAgIC8vIElmIHRoZSBjYXJkIGlzIHJlc29sdmVkIHRoZSBjaGVjayBpcyBmcm96ZW5cbiAgICAgICAgZGF0YS5odG1sQ2hlY2sgPSBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pbmxpbmVDaGVjaz8ub3V0ZXJIVE1MXG4gICAgICB9IGVsc2UgZGF0YS5odG1sQ2hlY2sgPSBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5nZXRIdG1sUm9sbCgpXG4gICAgfVxuXG4gICAgLy8gaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWREYW1hZ2VSb2xsKSB7XG4gICAgLy8gICBpZiAoIWRhdGEuZGF0YS5hcm1vcikge1xuICAgIC8vICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3RvcilcbiAgICAvLyAgICAgICBkYXRhLmRhdGEuYXJtb3IgPVxuICAgIC8vICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZSB8fCAwXG4gICAgLy8gICB9XG4gICAgLy8gICBpZiAoZGF0YS5kYXRhLmFybW9yKSB7XG4gICAgLy8gICAgIGlmIChpc05hTihOdW1iZXIoZGF0YS5kYXRhLmFybW9yKSkpIGRhdGEuZGF0YS5hcm1vciA9IG51bGxcbiAgICAvLyAgIH1cbiAgICAvLyB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgIGRhdGEucGxheWVyRGFtYWdlVGFrZW4gPSBmYWxzZVxuICAgICAgZGF0YS5vYnN0YWxjZURlZmluaXRpb25DaGFuZ2VkID0gZmFsc2VcblxuICAgICAgLy8gSGFzIHRoZSBvYnN0YWNsZSBjaGFuZ2VkID9cbiAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmxpc3RDaGFuZ2VzKClcbiAgICAgIGlmIChkaWZmLmNoYW5nZXMpIHtcbiAgICAgICAgZGF0YS5vYnN0YWxjZURlZmluaXRpb25DaGFuZ2VkID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJcyBwbGF5ZXIgdGFraW5nIGRhbWFnZVxuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UgJiYgdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmUpIHtcbiAgICAgICAgZGF0YS5wbGF5ZXJEYW1hZ2VUYWtlbiA9IHRydWVcbiAgICAgICAgZGF0YS5pbmxpbmVEYW1hZ2VUYWtlblJvbGwgPSBjcmVhdGVJbmxpbmVSb2xsKFxuICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGxcbiAgICAgICAgKT8ub3V0ZXJIVE1MXG4gICAgICAgIC8vIGlmIChkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA8IDApXG4gICAgICAgIC8vICAgZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSAwXG5cbiAgICAgICAgaWYgKGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID09PSAwKSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmRhbWFnZVRha2VuID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LllvdVRha2VOb0RhbWFnZScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmRhbWFnZVRha2VuID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICdDb0M3LllvdVRha2VTb21lRGFtYWdlJyxcbiAgICAgICAgICAgIHsgYW1vdW50OiBkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6XG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG90YWxEYW1hZ2UnKSArXG4gICAgICAgICAgICBgIDoke2RhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VufWBcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGFzQWN0aW9uQ29zdCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5hY3Rpb25Mb3N0ID0gdHJ1ZVxuICAgICAgICBkYXRhLnN0cmluZ3MuYWN0aW9uTG9zdCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VMb3N0VGltZScpXG4gICAgICAgIGRhdGEuaW5saW5lQWN0aW9uTG9zdFJvbGwgPSBjcmVhdGVJbmxpbmVSb2xsKFxuICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGxcbiAgICAgICAgKT8ub3V0ZXJIVE1MXG4gICAgICB9XG5cbiAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FyZFJlc29sdmVkJylcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2xvc2VkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLm1vdmVQbGF5ZXIpIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLmZpbmFsT3V0Y29tZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Nb3ZlVG9Mb2NhdGlvbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLnN0cmluZ3MuZmluYWxPdXRjb21lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICdDb0M3LkRvbnRNb3ZlVG9Mb2NhdGlvbidcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBHTVVwZGF0ZSAoKSB7XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc29sZS5lcnJvcignQ29DNzogR01VcGRhdGUgY2FsbGVkIGZyb20gbm9uIEdNIHVzZXInKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgLy8gQ2FyZCBpcyByZXNvbHZlZCwgY29tcHV0ZSBhbGwgZm9ybXVsYXMgYW5kIGRhbWFnZS5cbiAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbD8udG90YWwpIHtcbiAgICAgICAgY29uc3QgdG90YWxEYW1hZ2UgPSB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsLnRvdGFsXG4gICAgICAgIGNvbnN0IGFybW9yVmFsdWUgPSB0aGlzLmRhdGEuZmxhZ3MuaWdub3JlQXJtb3IgPyAwIDogdGhpcy5kYXRhLmFybW9yXG4gICAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vclZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuZGF0YS5hcm1vciA9IChcbiAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGFybW9yVmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICkudG90YWxcbiAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oTnVtYmVyKGFybW9yVmFsdWUpKSkge1xuICAgICAgICAgIHRoaXMuZGF0YS5hcm1vciA9IE51bWJlcihhcm1vclZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9IHRvdGFsRGFtYWdlIC0gdGhpcy5kYXRhLmFybW9yXG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMpIHtcbiAgICAgICAgdGhpcy5kYXRhLnJlZmxlY3RPYnN0YWxlQ2hhbmdlcyA9IHRydWUgLy8gQnkgZGVmYXVsdCByZWZsZWN0IGNoYW5nZXNcbiAgICAgIH1cblxuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5kYXRhLm1vdmVQbGF5ZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPVxuICAgICAgICAgICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlIHx8IHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpICYmXG4gICAgICAgICAgIXRoaXMuZGF0YS5zdGF0ZXMuZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbFxuICAgICAgKSB7XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPVxuICAgICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsLnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuZmxhZ3Mub2JzdGFjbGVEZXN0b3llZCA9XG4gICAgICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzIC0gdGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPD0gMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2xvc2VkKSB7XG4gICAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25BcnJheSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcbiAgICAgIClcbiAgICAgIHRoaXMuZGF0YS5FRUNfQUNUSU9OID0geyBkZXRhY2hEYXRhOiB0cnVlIH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGxvY2FsQ29tcHV0ZSAoKSB7fVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgYXNzaWduT2JqZWN0cyAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YSh0aGlzLmRhdGEub2JqZWN0cy5jaGVjaylcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICApXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWREYW1hZ2VSb2xsICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICApXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWRBY3Rpb25Sb2xsICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwgPSBSb2xsLmZyb21EYXRhKFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHtcbiAgICAvLyBjb25zdCBjaGFzZSA9IGF3YWl0IGZyb21VdWlkKHRoaXMuZGF0YS5jaGFzZVV1aWQpXG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm5cbiAgICBpZiAodHlwZW9mIHRoaXMuY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhPy51dWlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEgPSB7fVxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnN0YXRlcyA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5zdGF0ZXMgPSB7fVxuXG4gICAgLy8gY29uc3QgbG9jYXRpb24gPSBjaGFzZS5nZXRMb2NhdGlvbkRhdGEodGhpcy5kYXRhLmxvY2F0aW9uVXVpZClcbiAgICB0aGlzLmRhdGEub2JzdGFjbGUgPSB0aGlzLmxvY2F0aW9uPy5vYnN0YWNsZURldGFpbHMgLy8gRmVlZCB0aGUgb2JzdGFjbGUgZGVmaW5pdGlvblxuICAgIC8vIHRoaXMuZGF0YS5wYXJ0aWNpcGFudERhdGEgPSBjaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkID0gdGhpcy5jaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGEudXVpZFxuXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnREYXRhPy5ib251c0RpY2UgPiAwKSB7XG4gICAgICB0aGlzLmRhdGEuYm9udXNEaWNlID0gdGhpcy5wYXJ0aWNpcGFudERhdGEuYm9udXNEaWNlXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5oYXNCb251c0RpY2UgPSB0aGlzLnBhcnRpY2lwYW50Lmhhc0JvbnVzRGljZVxuICAgIH1cblxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkFycmF5ID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcbiAgICApXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0gdGhpcy5wYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCA9IDBcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudCAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcnRpY2lwYW50RGF0YSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIGlmICghdGhpcy5fcGFydGljaXBhbnQpXG4gICAgLy8gICB0aGlzLl9wYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpXG4gICAgLy8gcmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50XG4gICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpIC8vIFRPIFJFU0VUXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnREYXRhICgpIHtcbiAgICBpZiAoIXRoaXMuY2hhc2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5jaGFzZS5nZXRQYXJ0aWNpcGFudERhdGEodGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZClcbiAgfVxuXG4gIGdldCBsb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25EYXRhKHRoaXMuZGF0YS5sb2NhdGlvblV1aWQpXG4gIH1cblxuICBnZXQgb2JzdGFjbGUgKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLm9ic3RhY2xlRGV0YWlsc1xuICB9XG5cbiAgZ2V0IGNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5jaGFzZVV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX2NoYXNlKSB0aGlzLl9jaGFzZSA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKHRoaXMuZGF0YS5jaGFzZVV1aWQpXG4gICAgcmV0dXJuIHRoaXMuX2NoYXNlXG4gIH1cblxuICBnZXQgcm9sbCAoKSB7XG4gICAgbGV0IHJvbGxEYXRhXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSkge1xuICAgICAgY29uc3QgYWN0b3JTa2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgKVxuICAgICAgaWYgKHR5cGVvZiBhY3RvclNraWxsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByb2xsRGF0YSA9IGFjdG9yU2tpbGxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvbGxEYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcm9sbERhdGEuYWN0b3IgPSB7IGFjdG9yS2V5OiB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmlkIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgdGhpcy5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XG4gICAgICAgIHJvbGxEYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0b3I6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMucGFydGljaXBhbnQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocm9sbERhdGEpIHtcbiAgICAgIHJvbGxEYXRhLmRpY2VNb2RpZmllciA9IHRoaXMuZGF0YT8uYm9udXNEaWNlIHx8IDBcbiAgICAgIHJvbGxEYXRhLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIHJvbGxEYXRhLmRlbnlQdXNoID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gcm9sbERhdGEgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgdmFsaWRGYWlsZWRSb2xscyAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9XG4gICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2V9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlXG4gICAgICBpZiAoIXRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSAmJlxuICAgICAgICAhUm9sbC52YWxpZGF0ZShkYW1hZ2UpIC8vIFZhbGlkYXRlIG9ubHkgdGFrZSBhIHN0cmluZywgaWYgZGFtYWdlIGlzIGEgbnVtYmVyIGNvbnZlcnQgdG8gYSBzdHJpbmdcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QpIHtcbiAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdH1gXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgJiYgIVJvbGwudmFsaWRhdGUoYWN0aW9uQ29zdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgd2VhcG9uc09wdGlvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbnMgPSBbXVxuICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3I/Lml0ZW1UeXBlcz8ud2VhcG9uPy5mb3JFYWNoKHcgPT4ge1xuICAgICAgbGV0IGZvcm11bGEgPSB3LmRhdGEuZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgICBsZXQgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXG4gICAgICBpZiAoZGIgPT09IG51bGwgfHwgTnVtYmVyKGRiKSA9PT0gMCkge1xuICAgICAgICBkYiA9ICcnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYiA9IGAke2RifWBcbiAgICAgIH1cblxuICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFkZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoYmQpIGZvcm11bGEgPSBmb3JtdWxhICsgZGIgKyAnLzInXG4gICAgICB3ZWFwb25zLnB1c2goe1xuICAgICAgICBuYW1lOiBgJHt3LmRhdGEubmFtZX0gKCR7Zm9ybXVsYX0pYCxcbiAgICAgICAgZGFtYWdlOiBmb3JtdWxhLFxuICAgICAgICB1dWlkOiB3LnV1aWRcbiAgICAgIH0pXG4gICAgfSlcbiAgICB3ZWFwb25zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgaWYgKFxuICAgICAgIXdlYXBvbnMuZmluZCh3ID0+XG4gICAgICAgIHcubmFtZVxuICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgLnN0YXJ0c1dpdGgoXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hcm1lZFdlYXBvbk5hbWUnKT8udG9VcHBlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGxldCBkYiA9ICcnXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBkYiA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGJcbiAgICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIGRiID0gJydcbiAgICAgIH1cblxuICAgICAgd2VhcG9ucy51bnNoaWZ0KHtcbiAgICAgICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyl9ICgxRDMke2RifSlgLFxuICAgICAgICBkYW1hZ2U6IGAxRDMke2RifWAsXG4gICAgICAgIHV1aWQ6ICd1bmFybWVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICB3ZWFwb25zLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk90aGVyJyksXG4gICAgICBkYW1hZ2U6IHRoaXMuZGF0YT8uY3VzdG9tV2VhcG9uRGFtYWdlIHx8IG51bGwsXG4gICAgICB1dWlkOiAwXG4gICAgfSlcbiAgICByZXR1cm4gd2VhcG9uc1xuICB9XG5cbiAgZ2V0IHVzZWRXZWFwb24gKCkge1xuICAgIGlmICghdGhpcy5kYXRhPy53ZWFwb25DaG9pY2UpIHtcbiAgICAgIGlmICghdGhpcy53ZWFwb25zT3B0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKCF0aGlzLmRhdGEpIHRoaXMuZGF0YSA9IHt9IC8vIHVzZWxlc3MgISEhXG4gICAgICB0aGlzLmRhdGEud2VhcG9uQ2hvaWNlID0gdGhpcy53ZWFwb25zT3B0aW9uc1swXS51dWlkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS53ZWFwb25DaG9pY2UpIHtcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMud2VhcG9uc09wdGlvbnMuZmluZChcbiAgICAgICAgZSA9PiBlLnV1aWQgPT09IHRoaXMuZGF0YS53ZWFwb25DaG9pY2VcbiAgICAgIClcbiAgICAgIGlmICh3ZWFwb24pIHJldHVybiB3ZWFwb25cbiAgICB9XG4gIH1cblxuICBnZXQgaW5mbGljdGVkRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHRoaXMudXNlZFdlYXBvbikge1xuICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy51c2VkV2VhcG9uXG4gICAgICBpZiAod2VhcG9uICYmIHdlYXBvbi5kYW1hZ2UgJiYgUm9sbC52YWxpZGF0ZSh3ZWFwb24uZGFtYWdlKSkge1xuICAgICAgICByZXR1cm4gd2VhcG9uLmRhbWFnZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgdmFsaWRPYnN0YWNsZURhbWFnZSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAmJlxuICAgICAgIWlzTmFOKE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSkgJiZcbiAgICAgIE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSA+IDAgJiZcbiAgICAgIHRoaXMuaW5mbGljdGVkRGFtYWdlRm9ybXVsYVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgc3RyaW5ncyAoKSB7XG4gICAgY29uc3Qgc3RyaW5ncyA9IHt9XG4gICAgc3RyaW5ncy5kYW1hZ2VSb2xsUmVxdWVzdCA9IHRoaXMudXNlZFdlYXBvbi5uYW1lXG5cbiAgICByZXR1cm4gc3RyaW5nc1xuICB9XG5cbiAgLy8gQWN0aW9ucyA6XG4gIGFzeW5jIHZhbGlkYXRlQ2FyZCAob3B0aW9ucykge1xuICAgIGxldCBsb2FjdGlvbkNoYW5nZWRcbiAgICBsZXQgcGFydGljaXBhbnRDaGFnZWQgPSBmYWxzZVxuICAgIGNvbnN0IG9ic3RhY2xlVXBkYXRlID0ge31cbiAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMgPSB7fVxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXBkYXRlID0ge31cbiAgICBpZiAodGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQpIHtcbiAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlID0gZmFsc2VcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSBmYWxzZVxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmxpc3RDaGFuZ2VzKClcbiAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLnJlZmxlY3RPYnN0YWxlQ2hhbmdlcykge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkaWZmLm9ic3RhY2xlKSkge1xuICAgICAgICAgIGlmIChrZXkgIT09ICd0eXBlJykge1xuICAgICAgICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzW3ZhbHVlLmtleV0gPSB2YWx1ZS5uZXdcbiAgICAgICAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPiAwICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHtcbiAgICAgIGxldCByZW1haW5pbmdIcCA9IHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHNcbiAgICAgIHJlbWFpbmluZ0hwIC09IHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlXG4gICAgICBpZiAocmVtYWluaW5nSHAgPCAwKSByZW1haW5pbmdIcCA9IDBcbiAgICAgIGlmICh0aGlzLm9ic3RhY2xlLkhpdFBvaW50cyAhPT0gcmVtYWluaW5nSHApIHtcbiAgICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLkhpdFBvaW50cyA9IHJlbWFpbmluZ0hwXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxuICAgICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID4gMCkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBhd2FpdCB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4sXG4gICAgICAgICAgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwID0gdGhpcy5wYXJ0aWNpcGFudERhdGEuaHBcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuaHAgLT0gdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW5cbiAgICAgICAgaWYgKHBhcnRpY2lwYW50VXBkYXRlLmhwIDwgMCkgcGFydGljaXBhbnRVcGRhdGUuaHAgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPiAwKSB7XG4gICAgICBwYXJ0aWNpcGFudENoYWdlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPVxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIC09IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3RcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlIC8vIEJvbnVzIGRpY2UgYXdhcmRlZCBkdXJpbmcgZmxvdyBhcmUgYmVpbmcgY29uc3VtZWRcblxuICAgIGlmICh0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ib251c0RpY2UgPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpICYmXG4gICAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgIT09IHRoaXMucGFydGljaXBhbnQuYm9udXNEaWNlXG4gICAgICApIHtcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gdGhpcy5kYXRhLmJvbnVzRGljZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92ZVBsYXllcikge1xuICAgICAgbGV0IHRhcmdldExvY2F0aW9uXG4gICAgICBpZiAodGhpcy5kYXRhLmZvcndhcmQpIHtcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25TaGlmdCh0aGlzLmxvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgICBza2lwOiAtMVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGFyZ2V0TG9jYXRpb24udXVpZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEudXVpZCxcbiAgICAgICAgICB0YXJnZXRMb2NhdGlvbi51dWlkLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNjcm9sbFRvTG9jYXRpb246IHRydWUsXG4gICAgICAgICAgICBhY3RpdmF0ZUxvY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobG9hY3Rpb25DaGFuZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZUxvY2F0aW9uKHRoaXMubG9jYXRpb24udXVpZCwgb2JzdGFjbGVVcGRhdGUsIHtcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHBhcnRpY2lwYW50Q2hhZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZVBhcnRpY2lwYW50KFxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS51dWlkLFxuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jbG9zZWQgPSB0cnVlXG4gICAgYXdhaXQgdGhpcy5jaGFzZS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKSAvLyBSZW5kZXIgd2lsbCBiZSBkb25lIHRoZXJlICFcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgZGVmaW5lT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5zdGF0ZXMpIHRoaXMuZGF0YS5zdGF0ZXMgPSB7fVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0cnlUb05lZ290aWF0ZU9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHRyeVRvQnJlYWtEb3duT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbEJyZWFrT3JQYXNzQ2hvaWNlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSByZXR1cm4gdGhpcy5jYW5jZWxPYnN0YWNsZURlZmluaXRpb24oKVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RSb2xsIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0YWtlQ2F1dGlvdXNBcHByb2FjaCAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCkgdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCA9IDBcbiAgICB0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoICs9IDFcbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlICs9IDFcbiAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSB7XG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlKSB7XG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uIDw9IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QpIHsgLy8gQWxsIG1vdiBhY3Rpb24gaGF2ZSBiZWVuIHVzZWQgdG8gdGFrZSBjdWF0aW91cyBhcHByb2FjaC5cbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gZmFsc2UgLy8gRG8gbm90IGNvbnN1bWUgdGhlIGJvbnVzIGRpY2UuXG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxTa2lsbENoZWNrIChvcHRpb25zKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHJldHVyblxuICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpXG4gICAgaWYgKCF0aGlzLnJvbGwpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdGhpbmdUb1JvbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2sgPSBDb0M3Q2hlY2suY3JlYXRlRnJvbUFjdG9yUm9sbERhdGEodGhpcy5yb2xsKVxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMuY2hlY2spIHJldHVybiBmYWxzZVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPYnN0YWNsZSBjaGVjayBjYW4ndCBiZSBwdXNoZWRcbiAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jaGVja1JvbGxlZCA9IHRydWVcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxuICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmFybW9yID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5hcm1vciA9XG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHVzZUx1Y2sgKG9wdGlvbnMpIHtcbiAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIodGhpcy5kYXRhLm9iamVjdHMuY2hlY2ssICd1c2VMdWNrJywge1xuICAgICAgdGFyZ2V0OiBvcHRpb25zLmV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICB1cGRhdGU6IGZhbHNlXG4gICAgfSlcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsRmFpbENvbnNlcXVlbmNlcyAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhc0RhbWFnZSAmJiB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbCA9IG5ldyBSb2xsKGRhbWFnZSlcbiAgICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGFzQWN0aW9uQ29zdCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgYWN0aW9uQ29zdCA9XG4gICAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdH1gXG4gICAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0XG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwgPSBuZXcgUm9sbChhY3Rpb25Db3N0KVxuICAgICAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAodGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbC50b3RhbCAtIDEpIC8vIDEgYWN0aW9uIGFscmVhZHkgc3BlbmQgZm9yIHNraWxsIGNoZWNrXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5mYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGFza1JvbGxPYnN0YWNsZURhbWFnZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbE9ic3RhY2xlRGFtYWdlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IG5ldyBSb2xsKHRoaXMudXNlZFdlYXBvbj8uZGFtYWdlKVxuICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsKVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEYW1hZ2VSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIExpc3QgYWxsIGNoYW5nZXNcbiAgbGlzdENoYW5nZXMgKHZhbGlkYXRlID0gZmFsc2UpIHtcbiAgICBjb25zdCBkaWZmID0ge1xuICAgICAgb2JzdGFjbGU6IHt9LFxuICAgICAgcGxheWVyOiB7fSxcbiAgICAgIGNoYW5nZXM6IGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IG5hbWVzID0ge1xuICAgICAgYmFycmllcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcbiAgICAgIGhhemFyZDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcbiAgICAgIGhhc0hpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrYWJsZScpLFxuICAgICAgSGl0UG9pbnRzOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGl0UG9pbnRzJyksXG4gICAgICBoYXNBY3Rpb25Db3N0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpLFxuICAgICAgZmFpbGVkQWN0aW9uQ29zdDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSxcbiAgICAgIGhhc0RhbWFnZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0QmFjaycpLFxuICAgICAgZmFpbGVkQ2hlY2tEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25EYW1hZ2UnKSxcbiAgICAgIGNoZWNrTmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJyksXG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmFtZScpXG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRlICYmICF0aGlzLmRhdGEudmFsaWRhdGlvbikge1xuICAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24gPSB7fVxuICAgIH1cblxuICAgIGNvbnN0IG5ld09ic3RhY2xlID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxuICAgICAgdGhpcy5vYnN0YWNsZSxcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZVxuICAgIClcbiAgICAvLyBjb25zdCBvbGRPYnN0YWNsZSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCh0aGlzLmRhdGEub2JzdGFjbGUsIHRoaXMub2JzdGFjbGUpXG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKG5ld09ic3RhY2xlKSkge1xuICAgICAgLy8gaWYgKCdiYXJyaWVyJyA9PSBrZXkgfHwgJ2hhemFyZCcgPT0ga2V5KVxuICAgICAgLy8ge1xuICAgICAgLy8gICBkaWZmLmNoYW5nZXMgPSB0cnVlXG4gICAgICAvLyAgIGRpZmYub2JzdGFjbGUudHlwZSA9IHtcbiAgICAgIC8vICAgICBvbGQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIC8vICAgICAgIHRoaXMub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xuICAgICAgLy8gICAgICksXG4gICAgICAvLyAgICAgbmV3OiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xuICAgICAgLy8gICAgICksXG4gICAgICAvLyAgICAga2V5OiAndHlwZScsXG4gICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKVxuICAgICAgLy8gICB9XG4gICAgICAvLyAgIGlmICh2YWxpZGF0ZSkge1xuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uW2tleV0gPSB0cnVlXG4gICAgICAvLyAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24udHlwZSA9IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuICAgICAgLy8gZWxzZVxuICAgICAgLy8ge1xuICAgICAgaWYgKFxuICAgICAgICAhKFxuICAgICAgICAgIChuZXdPYnN0YWNsZVtrZXldID09PSAnJyAmJiB0aGlzLm9ic3RhY2xlW2tleV0gPT09IG51bGwpIHx8XG4gICAgICAgICAgKCFpc05hTihOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkpICYmXG4gICAgICAgICAgICBOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkgPT09IHRoaXMub2JzdGFjbGVba2V5XSlcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGRpZmYuY2hhbmdlcyA9IHRydWVcblxuICAgICAgICBkaWZmLm9ic3RhY2xlW2tleV0gPSB7XG4gICAgICAgICAgb2xkOiB0aGlzLm9ic3RhY2xlW2tleV0sXG4gICAgICAgICAgbmV3OiBuZXdPYnN0YWNsZVtrZXldLFxuICAgICAgICAgIG5hbWU6IG5hbWVzW2tleV0sXG4gICAgICAgICAga2V5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbGlkYXRlKSB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxuICAgICAgfVxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIHJldHVybiBkaWZmXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBjYW52YXMsIERpYWxvZywgZm91bmRyeSwgZ2FtZSwgUElYSSwgVG9rZW4sIFRva2VuRG9jdW1lbnQsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENoYXNlT2JzdGFjbGVDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCwgc29ydEJ5Um9sZUFuZERleCB9IGZyb20gJy4vcGFydGljaXBhbnQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhc2UgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dFxuICB9XG5cbiAgLy8gSGFuZGxlIHBhcnRpY2lwYW50c1xuICBnZXQgcGFydGljaXBhbnRzICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IFtdXG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgIC5maWx0ZXIocCA9PiAhcC5jaGFzZXIpXG4gICAgICAubWFwKHAgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwKVxuICAgICAgfSlcbiAgICBjb25zdCBjaGFzZXJzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAuZmlsdGVyKHAgPT4gcC5jaGFzZXIpXG4gICAgICAubWFwKHAgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwKVxuICAgICAgfSlcbiAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIC8vIHAuaW5kZXggPSBwTGlzdC5sZW5ndGggLSAxXG4gICAgICBwLmFzc2lzdCA9IFtdXG4gICAgICBpZiAocC5jaGFzZXIpIHtcbiAgICAgICAgcC5hc3Npc3QgPSBjaGFzZXJzXG4gICAgICAgICAgLmZpbHRlcihjID0+IGMudXVpZCAhPT0gcC51dWlkICYmICFjLmhhc01heEJvbnVzRGljZSlcbiAgICAgICAgICAubWFwKGMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXVpZDogYy51dWlkLCBuYW1lOiBjLm5hbWUgfVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwLmFzc2lzdCA9IHByZXlzXG4gICAgICAgICAgLmZpbHRlcihjID0+IGMudXVpZCAhPT0gcC51dWlkICYmICFjLmhhc01heEJvbnVzRGljZSlcbiAgICAgICAgICAubWFwKGMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXVpZDogYy51dWlkLCBuYW1lOiBjLm5hbWUgfVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0aWNwYW50ID0gbmV3IF9wYXJ0aWNpcGFudChwKVxuICAgICAgLy8gcGFydGljcGFudC5sb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbiggcGFydGljcGFudC51dWlkKSAvLyBSZWN1cnNpdml0eVxuICAgICAgcExpc3QucHVzaChwYXJ0aWNwYW50KVxuICAgIH0pXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzT2JqZWN0ICgpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgcC5sb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwLnV1aWQpXG4gICAgfSlcbiAgICByZXR1cm4gcGFydGljaXBhbnRzXG4gIH1cblxuICBnZXQgYWN0aXZlUGFydGljaXBhbnREYXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcbiAgfVxuXG4gIGdldCBhY3RpdmVBY3RvciAoKSB7XG4gICAgY29uc3QgcCA9IHRoaXMuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgaWYgKCFwKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHAuZG9jVXVpZCkge1xuICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHAuZG9jVXVpZClcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c0J5QWRqdXN0ZWRNb3YgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMuc29ydChcbiAgICAgIChhLCBiKSA9PiBhLmFkanVzdGVkTW92IC0gYi5hZGp1c3RlZE1vdlxuICAgIClcbiAgICBwTGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgcC5sb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwLnV1aWQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMuc29ydChcbiAgICAgIChhLCBiKSA9PiBiLmluaXRpYXRpdmUgLSBhLmluaXRpYXRpdmVcbiAgICApXG4gICAgcExpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgcHJleXMgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiAhcC5pc0NoYXNlciAmJiBwLmlzVmFsaWQpIHx8IFtdXG4gIH1cblxuICBnZXQgY2hhc2VycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbHRlcihwID0+IHAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKSB8fCBbXVxuICB9XG5cbiAgZ2V0IGFsbEhhdmVWYWxpZE1vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmV2ZXJ5KGUgPT4gZS5oYXNWYWxpZE1vdilcbiAgfVxuXG4gIGdldCBhbGxIYXZlU3BlZWRSb2xsICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZXZlcnkocCA9PiBwLnNwZWVkQ2hlY2s/LnJvbGxlZClcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50TG9jYXRpb24gKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0ubG9jYXRpb25zPy5saXN0Py5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9uc1xuXG4gICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnMuZmluZChsID0+IHtcbiAgICAgIGNvbnN0IGxwID0gbC5wYXJ0aWNpcGFudHM/LmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcbiAgICAgIHJldHVybiAhIWxwXG4gICAgfSlcbiAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBsb2NhdGlvblxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXRQYXJ0aWNpcGFudERhdGEgKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGlmIChwYXJ0aWNpcGFudCkgcmV0dXJuIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHBhcnRpY2lwYW50KSAvLyBUT0RPIDogY2hlY2sgaWYgd2UgbmVlZCB0byBkdXBsaWNhdGVcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXRQYXJ0aWNpcGFudCAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnREYXRhID0gdGhpcy5nZXRQYXJ0aWNpcGFudERhdGEocGFydGljaXBhbnRVdWlkKVxuICAgIGlmIChwYXJ0aWNpcGFudERhdGEpIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50RGF0YSlcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbmV4dEFjdGl2ZVBhcnRpY2lwYW50ICgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZS5maW5kKFxuICAgICAgcCA9PiBwLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IDBcbiAgICApXG4gIH1cblxuICBnZXQgc2xvd2VzdFByZXkgKCkge1xuICAgIGNvbnN0IHByZXlzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmFkanVzdGVkTW92IC0gYi5hZGp1c3RlZE1vdilcbiAgICAgID8uZmlsdGVyKHAgPT4gcC5pc1ByZXkpXG4gICAgaWYgKHByZXlzLmxlbmd0aCA+IDApIHJldHVybiBwcmV5c1swXVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmYXN0ZXN0Q2hhc2VyICgpIHtcbiAgICBjb25zdCBjaGFzZXJzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmFkanVzdGVkTW92IC0gYi5hZGp1c3RlZE1vdilcbiAgICAgID8uZmlsdGVyKHAgPT4gcC5pc0NoYXNlcilcbiAgICBpZiAoY2hhc2Vycy5sZW5ndGggPiAwKSByZXR1cm4gY2hhc2Vycy5zbGljZSgtMSkucG9wKClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgYWN0dWFsUGFydGljaXBhbnRzICgpIHtcbiAgICBjb25zdCBzbG93ZXN0UHJleSA9IHRoaXMuc2xvd2VzdFByZXlcbiAgICBjb25zdCBmYXN0ZXN0Q2hhc2VyID0gdGhpcy5mYXN0ZXN0Q2hhc2VyXG4gICAgbGV0IHBMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluY2x1ZGVMYXRlY29tZXJzICYmIHNsb3dlc3RQcmV5KSB7XG4gICAgICBwTGlzdCA9IHBMaXN0LmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwLmlzUHJleSB8fCAocC5pc0NoYXNlciAmJiBwLmFkanVzdGVkTW92ID49IHNsb3dlc3RQcmV5LmFkanVzdGVkTW92KVxuICAgICAgICApXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5jbHVkZUVzY2FwZWQgJiYgZmFzdGVzdENoYXNlcikge1xuICAgICAgcExpc3QgPSBwTGlzdC5maWx0ZXIocCA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcC5pc0NoYXNlciB8fCAocC5pc1ByZXkgJiYgcC5hZGp1c3RlZE1vdiA8PSBmYXN0ZXN0Q2hhc2VyLmFkanVzdGVkTW92KVxuICAgICAgICApXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHNsb3dlc3RQYXJ0aWNpcGFudCAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLnBhcnRpY2lwYW50c0J5QWRqdXN0ZWRNb3ZcbiAgICBpZiAocExpc3QubGVuZ3RoID4gMCkgcmV0dXJuIHBMaXN0WzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUGFydGljaXBhbnRzIChsaXN0LCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IHRoaXMuY2xlYW5QYXJ0aWNpcGFudExpc3QobGlzdClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBhcnRpY2lwYW50IChwYXJ0aWNpYW50VXVpZCwgdXBkYXRlRGF0YSwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICBjb25zdCB1cGRhdGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh1cGRhdGVEYXRhKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGlmIChwYXJ0aWNpcGFudEluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh1cGRhdGUudXVpZCkgZGVsZXRlIHVwZGF0ZS51dWlkXG4gICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChwYXJ0aWNpcGFudHNbcGFydGljaXBhbnRJbmRleF0sIHVwZGF0ZSwge1xuICAgICAgb3ZlcndyaXRlOiB0cnVlXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBjbGVhblBhcnRpY2lwYW50TGlzdCAobGlzdCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBsaXN0IHx8IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICBsaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBsZXQgZGF0YVxuICAgICAgaWYgKHAuY29uc3RydWN0b3IubmFtZSA9PT0gJ19wYXJ0aWNpcGFudCcpIHtcbiAgICAgICAgZGF0YSA9IHAuZGF0YVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IHBcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgocGFydGljaXBhbnRzRGF0YSwgZGF0YS51dWlkKVxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICBwYXJ0aWNpcGFudHNEYXRhLnB1c2goZGF0YSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudERhdGFNaXNzaW5nJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudHNEYXRhW2luZGV4XSA9IGRhdGFcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBwYXJ0aWNpcGFudHNEYXRhXG4gIH1cblxuICBhc3luYyBhc3Npc3RQYXJ0aWNpcGFudCAoXG4gICAgYXNzaXN0YW50VXVpZCxcbiAgICBiZW5lZmljaWFyeVV1aWQsXG4gICAgeyB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBhc3Npc3RhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KGFzc2lzdGFudFV1aWQpXG4gICAgY29uc3QgYmVuZWZpY2lhcnkgPSB0aGlzLmdldFBhcnRpY2lwYW50KGJlbmVmaWNpYXJ5VXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgYXNzaXN0YW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gYXNzaXN0YW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gYmVuZWZpY2lhcnlVdWlkID09PSBwLnV1aWRcbiAgICApXG5cbiAgICBpZiAoIWFzc2lzdGFudCB8fCAhYmVuZWZpY2lhcnkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50Tm90Rm91bmQnKSlcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBpZiAoYmVuZWZpY2lhcnkuaGFzTWF4Qm9udXNEaWNlKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQmVuZWZpY2lhcnlBdE1heEJvbnVzJywge1xuICAgICAgICAgIG5hbWU6IGJlbmVmaWNpYXJ5Lm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBpZiAodXNlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBpZiAoYXNzaXN0YW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudE5vdEVub3VnaE1vdmVtZW50Jywge1xuICAgICAgICAgICAgYXNzaXN0YW50VXVpZCxcbiAgICAgICAgICAgIGFjdGlvbnM6IGFzc2lzdGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBhc3Npc3RhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoLTEpXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW2Fzc2lzdGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGFzc2lzdGFudC5kYXRhKVxuICAgIH1cblxuICAgIGJlbmVmaWNpYXJ5LmFkZEJvbnVzRGljZSgpXG4gICAgcGFydGljaXBhbnRzRGF0YVtiZW5lZmljaWFyeUluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgYmVuZWZpY2lhcnkuZGF0YVxuICAgIClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQm9udXNEaWNlIChwYXJ0aWNpcGFudFV1aWQsIGRpY2VOdW1iZXIsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQuYm9udXNEaWNlID49IGRpY2VOdW1iZXIpIHBhcnRpY2lwYW50LnJlbW92ZUJvbnVzRGljZSgpXG4gICAgZWxzZSBwYXJ0aWNpcGFudC5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGNhdXRpb3VzQXBwcm9hY2ggKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7IHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGlmIChwYXJ0aWNpcGFudC5oYXNNYXhCb251c0RpY2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JQYXJ0aWNpcGFudEF0TWF4Qm9udXMnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudE5vdEVub3VnaE1vdmVtZW50Jywge1xuICAgICAgICAgICAgYXNzaXN0YW50VXVpZDogcGFydGljaXBhbnRVdWlkLFxuICAgICAgICAgICAgYWN0aW9uczogcGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoLTEpXG4gICAgfVxuICAgIHBhcnRpY2lwYW50LmFkZEJvbnVzRGljZSgpXG4gICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgIClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgYWx0ZXJQYXJ0aWNpcGFudE1vdmVtZW50QWN0aW9uIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgY291bnQsXG4gICAgeyByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcblxuICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKGNvdW50KVxuXG4gICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgIClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuICh7XG4gICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgcmVuZGVyID0gdHJ1ZSxcbiAgICBodG1sID0gbnVsbFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBhY3RpdmVQYXJ0aWNpcGFudCA9IHRoaXMubmV4dEFjdGl2ZVBhcnRpY2lwYW50XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24sXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgcmVuZGVyLFxuICAgICAgaHRtbFxuICAgIH1cbiAgICBpZiAoIWFjdGl2ZVBhcnRpY2lwYW50KSByZXR1cm4gdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KHVuZGVmaW5lZCwgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KGFjdGl2ZVBhcnRpY2lwYW50LnV1aWQsIG9wdGlvbnMpXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWUsXG4gICAgICBodG1sID0gbnVsbFxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBkYXRhVXBkYXRlID0gdGhpcy5nZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YShwYXJ0aWNpcGFudFV1aWQsIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24sXG4gICAgICBhY3RpdmVMb2NhdGlvbjogYWN0aXZhdGVMb2NhdGlvbixcbiAgICAgIGh0bWxcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGRhdGFVcGRhdGUsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLCBodG1sID0gbnVsbCB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcFV1aWQgPSBwYXJ0aWNpcGFudFV1aWRcbiAgICAvLyAgID8gcGFydGljaXBhbnRVdWlkXG4gICAgLy8gICA6IHRoaXMucGFydGljaXBhbnRzQnlJbml0aWF0aXZlWzBdPy51dWlkXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YVVwZGF0ZSA9IHt9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGRlbGV0ZSBwLmFjdGl2ZVxuICAgICAgaWYgKHBVdWlkICYmIHBVdWlkID09PSBwLnV1aWQpIHAuYWN0aXZlID0gdHJ1ZVxuICAgIH0pXG4gICAgcGFydGljaXBhbnRzRGF0YVVwZGF0ZVsnc3lzdGVtLnBhcnRpY2lwYW50cyddID0gcGFydGljaXBhbnRzXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudExvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHBVdWlkKVxuICAgIGxldCBsb2NhdGlvbnNEYXRhVXBkYXRlID0gbnVsbFxuICAgIGlmIChwYXJ0aWNpcGFudExvY2F0aW9uKSB7XG4gICAgICBpZiAoYWN0aXZhdGVMb2NhdGlvbikge1xuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YShcbiAgICAgICAgICBwYXJ0aWNpcGFudExvY2F0aW9uLnV1aWQsXG4gICAgICAgICAgeyBzY3JvbGxUb0xvY2F0aW9uLCBodG1sIH1cbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmIChzY3JvbGxUb0xvY2F0aW9uKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB7fVxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID1cbiAgICAgICAgICB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb25cbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJ10gPVxuICAgICAgICAgIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24ocGFydGljaXBhbnRMb2NhdGlvbi51dWlkLCB7XG4gICAgICAgICAgICBodG1sXG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEodW5kZWZpbmVkLCB7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb25cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9uc0RhdGFVcGRhdGUpIHtcbiAgICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KFxuICAgICAgICBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlLFxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlXG4gICAgICApXG4gICAgfSBlbHNlIHJldHVybiBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlXG4gIH1cblxuICBhY3RpdmVQYXJ0aWNpcGFudE9ic3RhY2xlQ2hlY2sgKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7IG1vdmVQYXJ0aWNpcGFudCA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2hhc2VPYnN0YWNsZUNhcmQoe1xuICAgICAgY2hhc2VVdWlkOiB0aGlzLnV1aWQsXG4gICAgICBsb2NhdGlvblV1aWQsXG4gICAgICBtb3ZlUGFydGljaXBhbnQsXG4gICAgICBmb3J3YXJkOiBsb2NhdGlvblV1aWQgIT09IHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZFxuICAgIH0pXG4gICAgY2FyZC50b01lc3NhZ2UoKVxuXG4gICAgLy8gY29uc3QgdGVzdCA9IG5ldyB0ZXN0Q2FyZCgpXG4gICAgLy8gdGVzdC5pbml0aWFsaXplKHt9KVxuICAgIC8vIHRlc3QudG9NZXNzYWdlKClcbiAgfVxuXG4gIC8vIEhhbmRsZSByb3VuZHNcblxuICBhc3luYyBwcm9ncmVzc1RvTmV4dFJvdW5kICh7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCBwLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICAgIHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyArPSBwLm1vdmVtZW50QWN0aW9uXG4gICAgICAgIGlmIChwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiBwLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIHRoaXMuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKHsgcmVuZGVyIH0pXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGxTdHJpbmcpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbFN0cmluZylcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgICAgOiBbXVxuICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC5yb2xsVXVpZCA9PT0gcm9sbC51dWlkKVxuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGRhdGE6IHJvbGxTdHJpbmcsXG4gICAgICAgIHR5cGU6ICdpbnZva2UnLFxuICAgICAgICBtZXRob2Q6ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgaXRlbTogdGhpcy51dWlkXG4gICAgICB9XG4gICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgfVxuICB9XG5cbiAgLy8gaGFuZGxlIGxvY2F0aW9uc1xuICBnZXQgbG9jYXRpb25zICgpIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN0YXJ0ZWRcbiAgICAgID8gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgICAgOiBbXVxuICAgICAgOiB0aGlzLmluaXRUcmFja1xuICAgIHRoaXMucHJvY2Vzc0xvY2F0aW9ucyhsb2NhdGlvbnMpXG4gICAgcmV0dXJuIGxvY2F0aW9uc1xuICB9XG5cbiAgZ2V0TG9jYXRpb25EYXRhIChsb2NhdGlvblV1aWQsIHsgZHVwbGljYXRlRGF0YSA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlRGF0YVxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLmxvY2F0aW9ucylcbiAgICAgIDogdGhpcy5sb2NhdGlvbnNcbiAgICByZXR1cm4gbG9jYXRpb25zLmZpbmQobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgfVxuXG4gIHByb2Nlc3NMb2NhdGlvbnMgKGxvY2F0aW9ucykge1xuICAgIGlmICghbG9jYXRpb25zPy5sZW5ndGgpIHJldHVyblxuICAgIGxvY2F0aW9uc1swXS5maXJzdCA9IHRydWVcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2NhdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBjbGFzc2VzID0gW11cbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25zW2luZGV4XVxuICAgICAgaWYgKCFsb2NhdGlvbi5uYW1lKSBjbGFzc2VzLnB1c2goJ2VtcHR5JylcbiAgICAgIGlmIChsb2NhdGlvbi5hY3RpdmUpIGNsYXNzZXMucHVzaCgnYWN0aXZlJylcbiAgICAgIGlmIChsb2NhdGlvbi5pbml0ICYmICF0aGlzLnN0YXJ0ZWQpIGNsYXNzZXMucHVzaCgnaW5pdCcpXG4gICAgICBsb2NhdGlvbi5jc3NDbGFzc2VzID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubGFzdCA9IHRydWVcblxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICEocCA9PT0gbnVsbCkpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBlbGVtID0gbC5wYXJ0aWNpcGFudHNbaV0gLy8gSW5pdCB0cmFjayA9IG9ubHkgdXVpZCwgdXBkYXRlIGxvY2F0aW9uIGxpc3QgY2hhbmdlIGZvciB1dWlkXG5cbiAgICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmVycm9yKGBUeXBlIDogJHt0eXBlb2YgZWxlbX1gKVxuICAgICAgICAgIGxldCBwXG4gICAgICAgICAgaWYgKHR5cGVvZiBlbGVtID09PSAnc3RyaW5nJyB8fCBlbGVtIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICBwID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBlbGVtID09PSBwLnV1aWQpIC8vIFJldHJpZXZlIHBhcnRpY2lwYW50IGRhdGEgZnJvbSBsaXN0LlxuICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbT8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdfcGFydGljaXBhbnQnKSB7XG4gICAgICAgICAgICBwID0gdW5kZWZpbmVkIC8vIHBhcnRpY2lwYW50IGlzIGFscmVhZHkgcHJvY2Vzc2VkLlxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnRBbHJlYWR5UHJvY2Vzc2VkJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9IGVsc2UgcCA9IHVuZGVmaW5lZFxuXG4gICAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBuZXcgX3BhcnRpY2lwYW50KHApIC8vIHJlcGxhY2UgdXVpZCB3aXRoIF9wYXJ0aWNpcGFudFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBwYXJ0aWNpcGFudHMucHVzaCggbnVsbClcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICdVbmRlZmluZWQgcGF0aWNpcGFudCB3aGlsZSBwcm9jZXNzaW5nIHBhcnRpY2lwYW50cyBhcnJheSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbC5wYXJ0aWNpcGFudHMuc29ydChzb3J0QnlSb2xlQW5kRGV4KSAvLyBUT0RPIDogdGVzdCBpZiBzb3J0aW5nIHdvcmtzXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGdldCBpbml0VHJhY2sgKCkge1xuICAgIGlmIChcbiAgICAgICF0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdCB8fFxuICAgICAgdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoID09PSAwXG4gICAgKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgbG9jYXRpb25zID0gW10gLy8gISEhISEhISBsb2NhdGlvbnMgdnMgaW5pdCBsb2NhdGlvbnMgISEhXG5cbiAgICBjb25zdCBpbml0ID0gdGhpcy5zdGFydGluZ0xpbmVcbiAgICBsZXQgbG9jYXRpb25zSW5kZXhTdGFydCwgaW5pdEluZGV4U3RhcnQsIGxvY2F0aW9uc0xlbmd0aFxuICAgIGlmIChpbml0Lmxlbmd0aCA8PSAwKSBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPj0gaW5pdC5sZW5ndGgpIHtcbiAgICAgIGxvY2F0aW9uc0luZGV4U3RhcnQgPSAwXG4gICAgfSBlbHNlIGxvY2F0aW9uc0luZGV4U3RhcnQgPSBpbml0Lmxlbmd0aCAtIHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXhcblxuICAgIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDw9IDApIGluaXRJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPD0gaW5pdC5sZW5ndGgpIGluaXRJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgaW5pdEluZGV4U3RhcnQgPSB0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IC0gaW5pdC5sZW5ndGhcblxuICAgIGlmIChsb2NhdGlvbnNJbmRleFN0YXJ0ID09PSAwKSB7XG4gICAgICBsb2NhdGlvbnNMZW5ndGggPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb25zTGVuZ3RoID1cbiAgICAgICAgdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoICsgbG9jYXRpb25zSW5kZXhTdGFydFxuICAgIH1cblxuICAgIGlmIChpbml0Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPCAwKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICBpbmRleCA8IE1hdGguYWJzKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXgpO1xuICAgICAgICAgIGluZGV4KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgaW5pdC5wdXNoKHtcbiAgICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjaGFzZUxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucylcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbG9jYXRpb25zTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBsZXQgbG9jYXRpb24gPSB7fVxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gW11cbiAgICAgIGlmIChcbiAgICAgICAgaW5kZXggPj0gbG9jYXRpb25zSW5kZXhTdGFydCAmJlxuICAgICAgICBpbmRleCAtIGxvY2F0aW9uc0luZGV4U3RhcnQgPCBjaGFzZUxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgICAgKSB7XG4gICAgICAgIGxvY2F0aW9uID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgY2hhc2VMb2NhdGlvbnMubGlzdFtpbmRleCAtIGxvY2F0aW9uc0luZGV4U3RhcnRdXG4gICAgICAgIClcbiAgICAgICAgbG9jYXRpb24uaW5pdCA9IGZhbHNlXG4gICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cz8uZm9yRWFjaChwID0+IHtcbiAgICAgICAgICBpZiAocCAhPSBudWxsKSBwYXJ0aWNpcGFudHMucHVzaChwKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKGluZGV4ID49IGluaXRJbmRleFN0YXJ0ICYmIGluZGV4IC0gaW5pdEluZGV4U3RhcnQgPCBpbml0Lmxlbmd0aCkge1xuICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGxvY2F0aW9uLCBpbml0W2luZGV4IC0gaW5pdEluZGV4U3RhcnRdLCB7XG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwICE9IG51bGwpIHBhcnRpY2lwYW50cy5wdXNoKHApXG4gICAgICAgIH0pXG5cbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzXG4gICAgICB9XG4gICAgICBsb2NhdGlvbi5maXJzdCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbi5lbmQgPSBmYWxzZVxuICAgICAgbG9jYXRpb25zLnB1c2gobG9jYXRpb24pXG4gICAgfVxuXG4gICAgcmV0dXJuIGxvY2F0aW9uc1xuICB9XG5cbiAgZ2V0IHN0YXJ0aW5nTGluZSAoKSB7XG4gICAgLy8gR2V0IHByZXlzIGFuZCBjaGVjayBmb3IgZXNjYXBlZFxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0uaW5jbHVkZUVzY2FwZWRcbiAgICAgID8gdGhpcy5wcmV5c1xuICAgICAgOiB0aGlzLnByZXlzPy5maWx0ZXIocCA9PiAhcC5kYXRhLmVzY2FwZWQpXG4gICAgLy8gR2V0IGNoYXNlcnNcbiAgICBjb25zdCBjaGFzZXJzID0gdGhpcy5zeXN0ZW0uaW5jbHVkZUxhdGVjb21lcnNcbiAgICAgID8gdGhpcy5jaGFzZXJzXG4gICAgICA6IHRoaXMuY2hhc2Vycz8uZmlsdGVyKGMgPT4gIWMuZGF0YS5leGNsdWRlZClcblxuICAgIC8vIFJlY3Vyc2l2aXR5ICEhIHdpdGggZ2V0UGFydGljaXBhbnRMb2NhdGlvbiBhbmQgZ2V0IHBhcnRpY2lwYW50c1xuXG4gICAgLy8gSWYgbm8gcHJleSBvciBubyBjaGFzc2VyXG4gICAgLy8gaWYgKDAgPT0gY2hhc2Vycy5sZW5ndGgpIHtcbiAgICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gY2hhc2VycycpXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gfVxuICAgIC8vIGlmICgwID09IHByZXlzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBwcmV5cycpXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gfVxuXG4gICAgLy8gQnVpbGQgc3RhcnRpbmcgdHJhY2tcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gW11cblxuICAgIGNvbnN0IGNoYXNlcnNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YoY2hhc2VycylcbiAgICBjb25zdCBjaGFzZXJzTWF4TW92ID0gdGhpcy5maW5kTWF4TW92KGNoYXNlcnMpXG4gICAgY29uc3QgcHJleXNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YocHJleXMpXG4gICAgY29uc3QgcHJleXNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YocHJleXMpXG5cbiAgICBpZiAoY2hhc2Vyc01pbk1vdiAhPT0gLTEgJiYgY2hhc2Vyc01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBjaGFzZXJzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IGNoYXNlcnNNaW5Nb3Y7IG1vdiA8PSBjaGFzZXJzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc3BhY2UgYmV0d2VlbiBjaGFzZXJzIGFuZCBwcmV5cy5cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN5c3RlbS5zdGFydGluZ1JhbmdlOyBpbmRleCsrKSB7XG4gICAgICAgIGNoYXNlVHJhY2sucHVzaCh7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJleXNNaW5Nb3YgIT09IC0xICYmIHByZXlzTWF4TW92ICE9PSAtMSkge1xuICAgICAgLy8gQWRkIHByZXlzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IHByZXlzTWluTW92OyBtb3YgPD0gcHJleXNNYXhNb3Y7IG1vdisrKSB7XG4gICAgICAgIC8vIEZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBwcmV5c1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGFzZVRyYWNrXG4gIH1cblxuICBhc3luYyB1cGRhdGVMb2NhdGlvbnNMaXN0IChsaXN0LCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gUmVtb3ZlIGFsbCB1bm5lY2Vzc2FyeSBpdGVtcyAoY3NzQ2xhc3MsIClcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxpc3QpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ubG9jYXRpb25zLmxpc3QnOiB1cGRhdGVkTGlzdCB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uIChsb2NhdGlvblV1aWQsIHVwZGF0ZURhdGEsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCB1cGRhdGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh1cGRhdGVEYXRhKVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSwgdXBkYXRlLCB7XG4gICAgICBvdmVyd3JpdGU6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBjbGVhbkxvY2F0aW9uc0xpc3QgKGxpc3QpIHtcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGxpc3QpXG4gICAgY29uc3QgcGFydGlwYW50c1V1aWRBcnJheSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5tYXAocCA9PiBwLnV1aWQpXG5cbiAgICB1cGRhdGVkTGlzdC5mb3JFYWNoKGwgPT4ge1xuICAgICAgLy8gZGVsZXRlIGwuYWN0aXZlXG4gICAgICBkZWxldGUgbC5jc3NDbGFzc2VzXG4gICAgICBkZWxldGUgbC5maXJzdFxuICAgICAgZGVsZXRlIGwubGFzdFxuICAgICAgZGVsZXRlIGwuZW5kXG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICEocCA9PT0gbnVsbCkpIC8vIFJlbW92ZSBudWxsIGVsZW1lbnRzXG4gICAgICAgICAgLy8gUmVwbGFjZSBfUGFydGljaXBhbnRzIGJ5IHV1aWRcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHNbaV0uZGF0YT8udXVpZCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBsLnBhcnRpY2lwYW50c1tpXS5kYXRhLnV1aWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdW5rb3duIHBhcnRpY2ljcGFudHNcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxuICAgICAgICAgIHBhcnRpcGFudHNVdWlkQXJyYXkuaW5jbHVkZXModXVpZClcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gdXBkYXRlZExpc3RcbiAgfVxuXG4gIGFzeW5jIGluc2VydExvY2F0aW9uIChcbiAgICBpbnNlcnRBdFV1aWQsXG4gICAgeyBzaGlmdCA9IDAsIGxvY0RhdGEgPSB7fSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gaW5zZXJ0QXRVdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgbmV3TG9jYXRpb25JbmRleCA9IGxvY2F0aW9uSW5kZXggKyBzaGlmdFxuICAgIGlmIChuZXdMb2NhdGlvbkluZGV4ID4gbG9jYXRpb25zLmxlbmd0aCkgcmV0dXJuIGZhbHNlXG4gICAgY29uc3QgbmV3TG9jYXRpb24gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShsb2NEYXRhKVxuICAgIG5ld0xvY2F0aW9uLnV1aWQgPSB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpXG4gICAgbmV3TG9jYXRpb24uaW5pdCA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5pbml0XG4gICAgbmV3TG9jYXRpb24uYWN0aXZlID0gdHJ1ZVxuICAgIGxvY2F0aW9ucy5zcGxpY2UobmV3TG9jYXRpb25JbmRleCwgMCwgbmV3TG9jYXRpb24pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyByZW1vdmVMb2NhdGlvbiAodXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gdXVpZCA9PT0gbC51dWlkKVxuICAgIGxvY2F0aW9ucy5zcGxpY2UobG9jYXRpb25JbmRleCwgMSlcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgaW5kZXggPSBsb2NhdGlvbkluZGV4IC0gMVxuICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSAwXG4gICAgICBsb2NhdGlvbnNbaW5kZXhdLmFjdGl2ZSA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxvY2F0aW9uIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEobG9jYXRpb25VdWlkLCB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEgKHtcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICBodG1sID0gbnVsbFxuICB9ID0ge30pIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIDogW11cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG5cbiAgICBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID0gLTFcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIGdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIGlmICghbG9jYXRpb25VdWlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSh7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb25cbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgOiBbXVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgICBpZiAobG9jYXRpb25VdWlkID09PSBsLnV1aWQpIGwuYWN0aXZlID0gdHJ1ZVxuICAgIH0pXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgLy8gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxuICAgICAgICB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb25cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cbiAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihsb2NhdGlvblV1aWQsIHsgaHRtbCB9KVxuICAgICAgLy8gYXdhaXQgdGhpcy5zZXRjaGFzZVRyYWNrU2Nyb2xsKHtcbiAgICAgIC8vICAgZnJvbTogdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uLFxuICAgICAgLy8gICB0bzogdGhpcy5jaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvblxuICAgICAgLy8gfSlcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8vIExvY2F0aW9ucyBuYXZpZ2F0aW9uXG4gIGdldCBhY3RpdmVMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnMuZmluZChsID0+IGwuYWN0aXZlKVxuICAgIGlmICghbG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAobG9jYXRpb24ucGFydGljaXBhbnRzPy5sZW5ndGgpIGxvY2F0aW9uLmhhc1BhcnRpY2lwYW50ID0gdHJ1ZVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgZ2V0IHByZXZpb3VzTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IDApIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4IC0gMV1cbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGdldCBuZXh0TG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IHRoaXMubG9jYXRpb25zLmxlbmd0aCAtIDEpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4ICsgMV1cbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGFzeW5jIGxvY2F0b3JEcm9wcGVkIChkYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRMb2NhdGlvbkNvb3JkaW5hdGVzKFxuICAgICAgZGF0YS5sb2NhdGlvblV1aWQsXG4gICAgICBkYXRhLngsXG4gICAgICBkYXRhLnksXG4gICAgICBkYXRhLnNjZW5lXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgc2V0TG9jYXRpb25Db29yZGluYXRlcyAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHgsXG4gICAgeSxcbiAgICBzY2VuZUlkLFxuICAgIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXMgPSB7IHgsIHksIHNjZW5lOiBzY2VuZUlkIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzICh7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlTG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNsZWFyTG9jYXRpb25Db29yZGluYXRlcyh0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgcmVuZGVyXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNsZWFyTG9jYXRpb25Db29yZGluYXRlcyAobG9jYXRpb25VdWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBkZWxldGUgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmNvb3JkaW5hdGVzXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudEhhdmVBY3RpdmVMb2NhdGlvblNraWxsICgpe1xuICAvLyAgIGlmKCAhdGhpcy5hY3RpdmVBY3RvcikgcmV0dXJuIGZhbHNlXG4gIC8vICAgaWYoIHRoaXMuYWN0aXZlQWN0b3IuZmluZCggdGhpcy5hY3RpdmVMb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSkpIHJldHVybiB0cnVlXG4gIC8vICAgcmV0dXJuIGZhbHNlXG4gIC8vIH1cblxuICAvLyBIYW5kbGUgbWVjaGFuaWNzXG4gIGFzeW5jIGN1dFRvVGhlQ2hhc2UgKCkge1xuICAgIGlmICghdGhpcy5hbGxIYXZlU3BlZWRSb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEFsbEhhdmVTcGVlZFJvbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aCA8IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVlZE1pbjJQYXJ0aWNpcGFudHMnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5hbGxIYXZlVmFsaWRNb3YpIHtcbiAgICAgIC8vIFRPRE8gOiBDaGVjayBmb3Igc3BlZWQgcm9sbCA/P1xuXG4gICAgICAvLyBDYWxjdWxhdGUgbW92ZW1lbnQgYWN0aW9uc1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIGNvbnN0IG1pbk1vdiA9IHRoaXMuZmluZE1pbk1vdih0aGlzLmFjdHVhbFBhcnRpY2lwYW50cylcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAvLyBwLmRhdGEubW92ZW1lbnRBY3Rpb24gPSAxICsgKHAuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgICAgIHAuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKG1pbk1vdilcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICBwLmJvbnVzRGljZSA9IDBcbiAgICAgIH0pXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KHRoaXMubG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc3RhcnQgKCkge1xuICAgIC8vIGF3YWl0IHRoaXMuY2xlYW5Mb2NhdGlvbnMoKSAvL1RyYW5zZmVycmVkIGluIHVwZGF0ZUxvY2F0aW9uTGlzdFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zLmZpbHRlcihsID0+ICFsLmluaXQpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsb2NhdGlvbnNbaV0ucGFydGljaXBhbnRzKSBsb2NhdGlvbnNbaV0ucGFydGljaXBhbnRzID0gW11cbiAgICAgIGlmIChsb2NhdGlvbnNbaV0uYWN0aXZlKSBkZWxldGUgbG9jYXRpb25zW2ldLmFjdGl2ZVxuICAgIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRpY2lwYW50c0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudHNEYXRhW2ldLmFjdGl2ZSkgZGVsZXRlIHBhcnRpY2lwYW50c0RhdGFbaV0uYWN0aXZlXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2V0Y2hhc2VUcmFja1Njcm9sbCgwLCAwLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnN0b3AoKVxuICB9XG5cbiAgZ2V0TG9jYXRpb25TaGlmdCAobG9jYXRpb25VdWlkLCB7IHNraXAgPSAxIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uSW5kZXggPSBvcmlnaW5JbmRleCArIHNraXBcbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA+PSBsb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXVxuICAgIH1cbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IDApIHJldHVybiBsb2NhdGlvbnNbMF1cbiAgICByZXR1cm4gbG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdIC8vIEVSUk9SIE1PVkUgMiBGT1IgU0tJUCArMVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlUGFydGljaXBhbnQgKHBhcnRpY2lwYW50VXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50JyksXG4gICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50SGludCcsIHtcbiAgICAgICAgbmFtZTogcC5uYW1lXG4gICAgICB9KX08L3A+YCxcbiAgICAgIHllczogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgbmV3UGFydGljaXBhbnRzRGF0YSA9IHBhcnRpY2lwYW50c0RhdGEuZmlsdGVyKFxuICAgICAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwLnV1aWRcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBsb2NhdGlvbnNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgKVxuICAgICAgICBsb2NhdGlvbnNEYXRhLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgIHV1aWQgPT4gcGFydGljaXBhbnRVdWlkICE9PSB1dWlkXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhuZXdQYXJ0aWNpcGFudHNEYXRhLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudCxcbiAgICB7XG4gICAgICByZW5kZXIgPSB0cnVlLFxuICAgICAgbG9jYXRpb25VdWlkID0gbnVsbCxcbiAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHVwZGF0ZSA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWRcbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWQpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZFxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZSkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEudXBkYXRlXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnV1aWQpIHtcbiAgICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICAgICAgdW5pcXVlID1cbiAgICAgICAgICBwYXJ0aWNpcGFudHNEYXRhLmZpbHRlcihwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZCkubGVuZ3RoID09PSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgaWYgKHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb25cbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW2luZGV4XSA9IHBhcnRpY2lwYW50LmRhdGFcbiAgICB9IGVsc2UgcGFydGljaXBhbnRzRGF0YS5wdXNoKHBhcnRpY2lwYW50LmRhdGEpXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7XG4gICAgICByZW5kZXI6IHJlbmRlciAmJiAhdGhpcy5zdGFydGVkICYmICF0aGlzLnJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zXG4gICAgfSlcblxuICAgIGlmIChyZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuc2xvd2VzdFBhcnRpY2lwYW50Py5hZGp1c3RlZE1vdlxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4gcC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMoc2xvd2VzdCkpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHtcbiAgICAgICAgcmVuZGVyOiByZW5kZXIgJiYgIXRoaXMuc3RhcnRlZFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXJ0ZWQgJiZcbiAgICAgICEocGFydGljaXBhbnQuZGF0YS5lc2NhcGVkIHx8IHBhcnRpY2lwYW50LmRhdGEuZXhjbHVkZWQpXG4gICAgKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnNEYXRhID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgICAgOiBbXVxuXG4gICAgICBpZiAobG9jYXRpb25zRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JFbXB0eUxvY2F0aW9uc0xpc3QnKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGxldCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zRGF0YS5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkgbG9jYXRpb25JbmRleCA9IDBcbiAgICAgIGlmICghbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5maW5kSW5kZXgoXG4gICAgICAgICAgcCA9PiBwID09PSBwYXJ0aWNpcGFudC51dWlkXG4gICAgICAgICkgPT09IC0xXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudC51dWlkKVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZWRpdFBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAge1xuICAgICAgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZVBhcnRpY2lwYW50ID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgcGFydGljaXBhbnQgZm9yIGEgbnVtYmVyIG9mIGxvY2F0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gcGFydGljaXBhbnRVdWlkICAgICBVdWlkIG9mIHBhcnRpY2lwYW50XG4gICAqIEBwYXJhbSB7Kn0gbG9jYXRpb25Nb3ZlZCAgICAgICAgICAgICAgICAgTnVtYmVyIG9mIGxvY2F0aW9ucyBtb3ZyZWRcbiAgICogQHJldHVybnMge251bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICBUb3RhbCBudW1iZXIgb2YgbG9jYXRpb25zIGNyb3NzZWRcbiAgICovXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGxvY2F0aW9uTW92ZWQsXG4gICAge1xuICAgICAgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZVBhcnRpY2lwYW50ID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgLy8gY29uc3Qgc2VsZWN0b3IgPSBgI2l0ZW0tJHt0aGlzLmlkfSAuY2hhc2UtdHJhY2tgXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgbW92ZVBhcnRpY2lwYW50IDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcbiAgICBsZXQgbW9kaWZpZWQgPSBmYWxzZVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcbiAgICBsZXQgZGVzdGluYXRpb25JbmRleCA9IG9yaWdpbkluZGV4ICsgbG9jYXRpb25Nb3ZlZFxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4ID4gbG9jYXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgIGRlc3RpbmF0aW9uSW5kZXggPSBsb2NhdGlvbnMubGVuZ3RoIC0gMVxuICAgIH1cblxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4IDwgMCkge1xuICAgICAgZGVzdGluYXRpb25JbmRleCA9IDBcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbE1vdmUgPSBkZXN0aW5hdGlvbkluZGV4IC0gb3JpZ2luSW5kZXhcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudFV1aWQ6IHRoaXMucGFydGljaXBhbnRVdWlkXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IE1hdGguYWJzKHRvdGFsTW92ZSkpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygwIC0gTWF0aC5hYnModG90YWxNb3ZlKSlcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgICAgKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAodG90YWxNb3ZlICE9PSAwKSB7XG4gICAgICBhd2FpdCB0aGlzLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXG4gICAgICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgbG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdLnV1aWQsXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZhdGVQYXJ0aWNpcGFudCkge1xuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgICBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGFjdGl2YXRlTG9jYXRpb24gJiYgIWFjdGl2YXRlUGFydGljaXBhbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVMb2NhdGlvbihsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0udXVpZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKG1vZGlmaWVkICYmIHJlbmRlcikgYXdhaXQgdGhpcy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICByZXR1cm4gdG90YWxNb3ZlXG4gIH1cblxuICBhc3luYyBtb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhbmltYXRlID0gbnVsbCxcbiAgICAgIG1vdmVUb2tlbiA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuXG4gICAgLy8gRmluZCBkZXN0aW5hdGlvbiBsb2NhdGlvbi5cbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKCFkZXN0aW5hdGlvbikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEZhaWxlZCB0byBtb3ZlICR7cGFydGljaXBhbnRVdWlkfS4gTG9jYXRpb24gJHtsb2NhdGlvblV1aWR9IHVua25vd25gXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBGaW5kIG9yaWdpbiBsb2NhdGlvblxuICAgIGNvbnN0IG9yaWdpbiA9IGxvY2F0aW9ucy5maW5kKGwgPT5cbiAgICAgIGwucGFydGljaXBhbnRzPy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpXG4gICAgKVxuXG4gICAgaWYgKCFvcmlnaW4pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmaW5kICR7cGFydGljaXBhbnRVdWlkfSBpbiBsb2NhdGlvbnNgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCFkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMpIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgaWYgKGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpKSByZXR1cm4gLy8gbW92aW5nIHBhcnRpY3BhbnQgdG8gYSBsb2NhdGlvbiBoZSBhbHJlYWR5IG9jY3VwaWVzXG4gICAgZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnRVdWlkKVxuICAgIC8vIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5zb3J0KHNvcnRCeVJvbGVBbmREZXgpXG5cbiAgICBjb25zdCBvbGRQYXJ0aWNpcGFudHNMaXN0ID0gb3JpZ2luLnBhcnRpY2lwYW50cy5maWx0ZXIoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gcFxuICAgIClcbiAgICBvcmlnaW4ucGFydGljaXBhbnRzID0gb2xkUGFydGljaXBhbnRzTGlzdFxuXG4gICAgaWYgKG1vdmVUb2tlbiAmJiBkZXN0aW5hdGlvbi5jb29yZGluYXRlcykge1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgIGxldCBwYXJ0aWNwYW50RG9jdW1lbnQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleShcbiAgICAgICAgcGFydGljaXBhbnQ/LmRhdGE/LmRvY1V1aWRcbiAgICAgIClcbiAgICAgIC8vIEZpbmQgdG9rZW5cbiAgICAgIGlmIChwYXJ0aWNwYW50RG9jdW1lbnQgJiYgIShwYXJ0aWNwYW50RG9jdW1lbnQgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50IHx8IHBhcnRpY3BhbnREb2N1bWVudD8ub2JqZWN0IGluc3RhbmNlb2YgVG9rZW4pKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kVG9rZW5zID0gY2FudmFzLnNjZW5lLnRva2Vucy5maWx0ZXIoZCA9PiBkLmFjdG9yTGluayAmJiBkLmFjdG9yPy5pZCA9PT0gcGFydGljcGFudERvY3VtZW50LmlkKVxuICAgICAgICBpZiAoZm91bmRUb2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgcGFydGljcGFudERvY3VtZW50ID0gZm91bmRUb2tlbnNbMF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgJiZcbiAgICAgICAgIShcbiAgICAgICAgICAvKiBwYXJ0aWNwYW50RG9jdW1lbnQuaXNUb2tlbiB8fCAqLyAoXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50IHx8XG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQ/Lm9iamVjdCBpbnN0YW5jZW9mIFRva2VuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdObyB0b2tlbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBhY3RvcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmUgIT09IGdhbWUuc2NlbmVzLnZpZXdlZC51dWlkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdDYXV0aW9uIHRoZSBzY2VuZSBpcyBub3QgdGhlIGFjdGl2ZSBzY2VuZScpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpY3BhbnREb2N1bWVudC5wYXJlbnQ/LnV1aWQgIT09IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclRva2VuTm90T25TY2VuZScpXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNjZW5lID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZVxuICAgICAgICAgIClcbiAgICAgICAgICBsZXQgeCA9IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnhcbiAgICAgICAgICBjb25zdCB5ID0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMueVxuICAgICAgICAgIGxldCB0YXJnZXRSZWN0ID0gbmV3IFBJWEkuUmVjdGFuZ2xlKFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHksXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LndpZHRoLFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC5oZWlnaHRcbiAgICAgICAgICApLm5vcm1hbGl6ZSgpXG4gICAgICAgICAgY29uc3QgdXBkYXRlID0gW11cbiAgICAgICAgICBsZXQgZm91bmRGcmVlU3BhY2UgPSBmYWxzZVxuICAgICAgICAgIHdoaWxlICghZm91bmRGcmVlU3BhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXBpbmdUb2tlbiA9IHNjZW5lLnRva2Vucy5maW5kKHQgPT4ge1xuICAgICAgICAgICAgICBpZiAodC5pZCA9PT0gcGFydGljcGFudERvY3VtZW50LmlkKSByZXR1cm4gZmFsc2UgLy8gWW91IGNhbid0IG92ZXJsYXAgd2l0aCB5b3Vyc2VsZlxuICAgICAgICAgICAgICByZXR1cm4gdC5vYmplY3QuYm91bmRzLmludGVyc2VjdHModGFyZ2V0UmVjdClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAob3ZlcmxhcGluZ1Rva2VuKSB7XG4gICAgICAgICAgICAgIHggPSBvdmVybGFwaW5nVG9rZW4ub2JqZWN0LmJvdW5kcy5yaWdodCArIDFcbiAgICAgICAgICAgICAgdGFyZ2V0UmVjdCA9IG5ldyBQSVhJLlJlY3RhbmdsZShcbiAgICAgICAgICAgICAgICB4LFxuICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LmhlaWdodFxuICAgICAgICAgICAgICApLm5vcm1hbGl6ZSgpXG4gICAgICAgICAgICB9IGVsc2UgZm91bmRGcmVlU3BhY2UgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlLnB1c2goe1xuICAgICAgICAgICAgX2lkOiBwYXJ0aWNwYW50RG9jdW1lbnQuaWQsXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvLyBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2goIHBVdWlkID0+e1xuICAgICAgICAgIC8vICAgY29uc3QgcCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocFV1aWQpXG4gICAgICAgICAgLy8gICBjb25zdCBwRG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIHA/LmRhdGE/LmRvY1V1aWQpXG4gICAgICAgICAgLy8gICBpZiggcERvYyBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgJiYgcERvYy5vYmplY3QgaW5zdGFuY2VvZiBUb2tlbil7XG4gICAgICAgICAgLy8gICAgIHVwZGF0ZXMgPSB0cnVlXG4gICAgICAgICAgLy8gICAgIHVwZGF0ZS5wdXNoKHtcbiAgICAgICAgICAvLyAgICAgICBfaWQ6IHBEb2MuaWQsXG4gICAgICAgICAgLy8gICAgICAgeDp4LFxuICAgICAgICAgIC8vICAgICAgIHk6eVxuICAgICAgICAgIC8vICAgICB9KVxuICAgICAgICAgIC8vICAgICBpZiggcERvYy5vYmplY3Qud2lkdGgpIHggKz0gcERvYy5vYmplY3Qud2lkdGhcbiAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAvLyB9KVxuICAgICAgICAgIGNvbnN0IHNob3dUb2tlbk1vdmVtZW50ID1cbiAgICAgICAgICAgIHR5cGVvZiBhbmltYXRlID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgICAgPyBhbmltYXRlXG4gICAgICAgICAgICAgIDogdGhpcy5zeXN0ZW0uc2hvd1Rva2VuTW92ZW1lbnRcbiAgICAgICAgICBhd2FpdCBwYXJ0aWNwYW50RG9jdW1lbnQucGFyZW50LnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICAgJ1Rva2VuJyxcbiAgICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICAgIHsgYW5pbWF0ZTogc2hvd1Rva2VuTW92ZW1lbnQgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICAvLyBIYW5kbGUgc2Nyb2xsaW5nXG4gIGFzeW5jIHNldGNoYXNlVHJhY2tTY3JvbGwgKHtcbiAgICBmcm9tID0gdW5kZWZpbmVkLFxuICAgIHRvID0gLTEsXG4gICAgcmVuZGVyID0gdHJ1ZVxuICB9ID0ge30pIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHtcbiAgICAgICAgJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJzpcbiAgICAgICAgICB1bmRlZmluZWQgPT09IGZyb20gPyB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gOiBmcm9tLFxuICAgICAgICAnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJzpcbiAgICAgICAgICB1bmRlZmluZWQgPT09IHRvID8gdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIDogdG9cbiAgICAgIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IGNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gKCkge1xuICAgIGNvbnN0IGh0bWwgPSB0aGlzLnNoZWV0Py5fZWxlbWVudFxuICAgIGlmICghaHRtbCkgcmV0dXJuIC0xXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVybiAtMVxuICAgIC8vIGNvbnN0IHNlbGVjdG9yID0gYCNpdGVtLSR7dGhpcy5pZH0gLmNoYXNlLXRyYWNrYFxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYERBVEEgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoc2VsZWN0b3IpLnNjcm9sbExlZnQoKX1gKVxuICAgIC8vIHJldHVybiAkKCc6cm9vdCcpLmZpbmQoc2VsZWN0b3IpLnNjcm9sbExlZnQoKVxuXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgREFUQSA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZCgnI2l0ZW0tVk5odHF4QTJ3SkpuV1N0VCAuY2hhc2UtdHJhY2snKS5zY3JvbGxMZWZ0KCl9LkNoYXNlIHRyYWNrIG9mZnNldDogJHtjaGFzZVRyYWNrLnNjcm9sbExlZnR9LCBEb2N1bWVudCBvZmZzZXQ6JHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaXRlbS1WTmh0cXhBMndKSm5XU3RUJykucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJykuc2Nyb2xsTGVmdH1gKVxuICAgIHJldHVybiBjaGFzZVRyYWNrLnNjcm9sbExlZnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9mZnNldCBwb3NpdGlvbiBvZiB0aGUgYWN0aXZlIGxvY2F0aW9uXG4gICAqIHRoZSBjZW50ZXIgb2YgdGhlIGFjdGl2ZSBsb2NhdGlvbiB3aWxsIGJlIGNlbnRlcmVkXG4gICAqIGluIHRoZSBwYXJlbnQuXG4gICAqL1xuICBnZXQgY2hhc2VUcmFja0FjdGl2ZUxvY2F0aW9uU2Nyb2xsUG9zaXRpb24gKCkge1xuICAgIGlmICghdGhpcy5hY3RpdmVMb2NhdGlvbikgcmV0dXJuIC0xXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24odGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkKVxuICB9XG5cbiAgZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24gKGxvY2F0aW9uVXVpZCwgeyBodG1sID0gbnVsbCB9KSB7XG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSBodG1sIHx8IHRoaXMuc2hlZXQ/Ll9lbGVtZW50XG4gICAgaWYgKCFodG1sRWxlbWVudCB8fCAhaHRtbEVsZW1lbnRbMF0pIHJldHVybiAtMVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sRWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIGlmICghY2hhc2VUcmFjaykgcmV0dXJuIC0xXG4gICAgY29uc3QgYWN0aXZlTG9jYXRpb25FbGVtZW50ID0gY2hhc2VUcmFjay5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC5jaGFzZS1sb2NhdGlvbltkYXRhLXV1aWQ9XCIke2xvY2F0aW9uVXVpZH1cIl1gXG4gICAgKVxuICAgIGlmICghYWN0aXZlTG9jYXRpb25FbGVtZW50KSByZXR1cm4gLTFcbiAgICBjb25zdCBsZWZ0U2Nyb2xsID1cbiAgICAgIGFjdGl2ZUxvY2F0aW9uRWxlbWVudC5vZmZzZXRMZWZ0ICtcbiAgICAgIGFjdGl2ZUxvY2F0aW9uRWxlbWVudC5jbGllbnRXaWR0aCAvIDIgLVxuICAgICAgY2hhc2VUcmFjay5jbGllbnRXaWR0aCAvIDJcbiAgICByZXR1cm4gbGVmdFNjcm9sbCA8IDAgPyAwIDogTWF0aC5mbG9vcihsZWZ0U2Nyb2xsKVxuICB9XG5cbiAgLy8gU2hvdWxkIGJlIHJlbW92ZWRcbiAgZmluZE1pbk1vdiAobGlzdCkge1xuICAgIGlmICghbGlzdD8ubGVuZ3RoKSByZXR1cm4gLTFcbiAgICByZXR1cm4gbGlzdC5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+XG4gICAgICBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgKS5hZGp1c3RlZE1vdlxuICB9XG5cbiAgZmluZE1heE1vdiAobGlzdCkge1xuICAgIGlmICghbGlzdD8ubGVuZ3RoKSByZXR1cm4gLTFcbiAgICByZXR1cm4gbGlzdC5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+XG4gICAgICBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgKS5hZGp1c3RlZE1vdlxuICB9XG5cbiAgLy8gVXRpbGl0aWVzXG4gIGZpbmRJbmRleCAobGlzdCwgdXVpZCkge1xuICAgIHJldHVybiBsaXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGdldCBzdGFydGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnKVxuICB9XG5cbiAgYXN5bmMgc3RhcnQgKCkge1xuICAgIGNvbnN0IHJlbVN0cmluZyA9ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKVxuICAgIGNvbnN0IHJlbVNpemUgPSBOdW1iZXIocmVtU3RyaW5nLnJlcGxhY2UoJ3B4JywgJycpKVxuICAgIGNvbnN0IHBDb3VudCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLmxlbmd0aFxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoKHBDb3VudCAqIDExLjIgKyAzKSAqIHJlbVNpemUsIDQwICogcmVtU2l6ZSlcbiAgICB0aGlzLnNoZWV0Ll90YWJzWzBdLmFjdGl2ZSA9ICdzZXR1cCdcbiAgICB0aGlzLnNoZWV0LnBvc2l0aW9uLndpZHRoID0gd2lkdGhcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcsIHRydWUpXG4gICAgYXdhaXQgdGhpcy5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxuICB9XG5cbiAgYXN5bmMgc3RvcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudW5zZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnKVxuICB9XG5cbiAgZ2VuZXJhdGVOZXdVdWlkICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgfVxuXG4gIGdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGlmICghcGFydGljaXBhbnQuYWN0b3IpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cbiAgICAgIGxpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtjLnNob3J0TmFtZX0pYFxuICAgICAgKVxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICl9KWBcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LlNBTidcbiAgICAgICl9KWBcbiAgICApXG4gICAgcGFydGljaXBhbnQuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiBsaXN0LnB1c2gocy5uYW1lKSlcbiAgICByZXR1cm4gbGlzdFxuICB9XG5cbiAgZ2V0IGFjdGl2ZUFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBwYXJ0aWNpY3BhbnREYXRhID0gdGhpcy5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICBpZiAoIXBhcnRpY2ljcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5nZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyhwYXJ0aWNpY3BhbnREYXRhLnV1aWQpXG4gIH1cblxuICBnZXQgYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cbiAgICAgIGxpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtjLnNob3J0TmFtZX0pYFxuICAgICAgKVxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICl9KWBcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LlNBTidcbiAgICAgICl9KWBcbiAgICApXG5cbiAgICBnYW1lLkNvQzcuc2tpbGxMaXN0Py5mb3JFYWNoKHMgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbGlzdC5pbmNsdWRlcyhzLm5hbWUpICYmXG4gICAgICAgICFzLm5hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhgKCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJyl9KWAudG9Mb3dlckNhc2UoKSlcbiAgICAgICkge1xuICAgICAgICBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgfVxuICAgIH0pIC8vIFRPRE86IFJlbW92ZSA/P1xuICAgIHRoaXMucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hY3Rvcikge1xuICAgICAgICBwLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGlmICghbGlzdC5pbmNsdWRlcyhzLm5hbWUpKSBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGxpc3Quc29ydChJbnRsLkNvbGxhdG9yKCkuY29tcGFyZSlcbiAgfVxuXG4gIGdldCBhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NTaG9ydCAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+IGxpc3QucHVzaChgJHtjLmxhYmVsfWApKVxuICAgIGxpc3QucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpfWApXG4gICAgbGlzdC5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKX1gKVxuXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWxpc3QuaW5jbHVkZXMocy5uYW1lKSAmJlxuICAgICAgICAhcy5uYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAuaW5jbHVkZXMoYCgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpfSlgLnRvTG93ZXJDYXNlKCkpXG4gICAgICApIHtcbiAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICB9KSAvLyBUT0RPOiBSZW1vdmUgPz9cbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWN0b3IpIHtcbiAgICAgICAgcC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXMocy5uYW1lKSkgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBsaXN0LnNvcnQoSW50bC5Db2xsYXRvcigpLmNvbXBhcmUpXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdGhlIGRhdGEgb2YgYWxsIHBhcmFzaXRlIHBhcnRpY2lwYW50cyBpbiBsb2NhdGlvbnMuXG4gICAqIFNob3VsZCBuZXZlciBoYXBwZW5cbiAgICovXG4gIC8vIGFzeW5jIGNsZWFuTG9jYXRpb25zICgpIHtcbiAgLy8gICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgLy8gICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgLy8gICAgIGNvbnN0IHBhcnRpcGFudHNVdWlkQXJyYXkgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMubWFwKHAgPT4gcC51dWlkKVxuICAvLyAgICAgaWYgKGwucGFydGljaXBhbnRzKSB7XG4gIC8vICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHV1aWQgPT5cbiAgLy8gICAgICAgICBwYXJ0aXBhbnRzVXVpZEFycmF5LmluY2x1ZGVzKHV1aWQpXG4gIC8vICAgICAgIClcbiAgLy8gICAgIH1cbiAgLy8gICB9KVxuICAvLyAgIHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lICovXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLnN5c3RlbT8uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgc2tpbGwgPSBDb0M3U2tpbGwuZ3Vlc3NOYW1lUGFydHMoZGF0YS5uYW1lKVxuICAgICAgY29uc3QgeyBuYW1lLCBza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uLCAuLi5uZXdQcm9wZXJ0aWVzIH0gPSBza2lsbFxuICAgICAgZGF0YS5uYW1lID0gbmFtZVxuICAgICAgZGF0YS5zeXN0ZW0gfHw9IHt9XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0geyAuLi5kYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLCAuLi5uZXdQcm9wZXJ0aWVzIH1cbiAgICAgIGRhdGEuc3lzdGVtID0geyAuLi5kYXRhLnN5c3RlbSwgc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbiwgcHJvcGVydGllcyB9XG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBzdGF0aWMgZ3Vlc3NOYW1lUGFydHMgKHNraWxsTmFtZSkge1xuICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgIGNvbWJhdDogZmFsc2UsXG4gICAgICBmaWdodGluZzogZmFsc2UsXG4gICAgICBmaXJlYXJtOiBmYWxzZSxcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgIHNraWxsTmFtZSxcbiAgICAgIHNwZWNpYWw6IGZhbHNlLFxuICAgICAgc3BlY2lhbGl6YXRpb246ICcnXG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2ggPSBza2lsbE5hbWUubWF0Y2goL14oLispXFxzKlxcKChbXildKylcXCkkLylcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIG91dHB1dC5za2lsbE5hbWUgPSBtYXRjaFsyXS50cmltKClcbiAgICAgIG91dHB1dC5zcGVjaWFsID0gdHJ1ZVxuXG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IG1hdGNoWzFdLnRyaW0oKVxuICAgICAgb3V0cHV0LnNwZWNpYWxpemF0aW9uID0gc3BlY2lhbGl6YXRpb25cbiAgICAgIG91dHB1dC5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgb3V0cHV0LnNraWxsTmFtZSArICcpJ1xuICAgICAgb3V0cHV0LmZpZ2h0aW5nID0gc3BlY2lhbGl6YXRpb24gPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICBvdXRwdXQuZmlyZWFybSA9IHNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICBvdXRwdXQuY29tYmF0ID0gb3V0cHV0LmZpZ2h0aW5nIHx8IG91dHB1dC5maXJlYXJtXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIGdldCBoYXNBY3RpdmVFZmZlY3RzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVFZmZlY3RzLmxlbmd0aCA+IDBcbiAgfVxuXG4gIGdldCBhY3RpdmVFZmZlY3RzICgpIHtcbiAgICBpZiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuZWZmZWN0cykge1xuICAgICAgY29uc3QgZWZmZWN0S2V5RnVsbCA9IGBza2lsbC4ke3RoaXMubmFtZX1gLnRvTG93ZXJDYXNlKClcbiAgICAgIGNvbnN0IGVmZmVjdEtleVNob3J0ID0gYHNraWxsLiR7dGhpcy5zeXN0ZW0uc2tpbGxOYW1lfWAudG9Mb3dlckNhc2UoKVxuICAgICAgbGV0IGNoYW5nZXMgPSB0aGlzLnBhcmVudC5lZmZlY3RzLnJlZHVjZSgoY2hhbmdlcywgZSkgPT4ge1xuICAgICAgICBpZiAoZS5kaXNhYmxlZCB8fCBlLmlzU3VwcHJlc3NlZCkgcmV0dXJuIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMuY29uY2F0KFxuICAgICAgICAgIGUuZGF0YS5jaGFuZ2VzLm1hcChjID0+IHtcbiAgICAgICAgICAgIGMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjKVxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXG4gICAgICAgICAgICBjLnByaW9yaXR5ID0gYy5wcmlvcml0eSA/PyBjLm1vZGUgKiAxMFxuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9LCBbXSlcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG4gICAgICBjaGFuZ2VzID0gY2hhbmdlcy5maWx0ZXIoXG4gICAgICAgIGUgPT5cbiAgICAgICAgICBlLmtleS50b0xvd2VyQ2FzZSgpID09PSBlZmZlY3RLZXlTaG9ydCB8fFxuICAgICAgICAgIGUua2V5LnRvTG93ZXJDYXNlKCkgPT09IGVmZmVjdEtleUZ1bGxcbiAgICAgIClcbiAgICAgIHJldHVybiBjaGFuZ2VzXG4gICAgfVxuICAgIHJldHVybiBbXVxuICB9XG5cbiAgLyoqXG4gICogVW5pcXVlIGlkZW50aWZpZXIgc2hvdWxkIGJlIHVzZWQgdG8gc3RvcmUgYW5kIG9idGFpbiBpdGVtIHRvIGFzc2VzcyBpdGVtIHVuaXF1ZW5lc3MuXG4gICogRm9yIG9sZCBpdGVtcyB3aXRob3V0IGlkLCBmYWxsYmFjayBvZiBza2lsbE5hbWUgbWF5IHN0aWxsIGJlIHVzZWRcbiAgKiBidXQgaWYgc2tpbGwgbmFtZSBpcyBub3QgdW5pcXVlIGl0IHdpbGwgY2F1c2UgcHJvYmxlbXMuXG4gICovXG4gIGdldCBpdGVtSWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHZhbHVlIG9mIHRoZSBza2lsbCBzY29yZSB1bmFmZmVjdGVkIGJ5IGFjdGl2ZSBlZmZlY3RzXG4gICAqL1xuICBnZXQgcmF3VmFsdWUgKCkge1xuICAgIGxldCB2YWx1ZSA9IDBcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgLy8gRm9yIGFuIGFjdG9yIHdpdGggZXhwZXJpZW5jZSB3ZSBuZWVkIHRvIGNhbGN1bGF0ZSBza2lsbCB2YWx1ZVxuICAgICAgdmFsdWUgPSB0aGlzLmJhc2VcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbFxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbClcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvblxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uKVxuICAgICAgICA6IDBcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpXG4gICAgICAgIDogMFxuICAgICAgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpICYmXG4gICAgICAgIHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5hcmNoZXR5cGVcbiAgICAgICkge1xuICAgICAgICB2YWx1ZSArPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgYWxsIG90aGVycyBhY3RvciB3ZSBzdG9yZSB0aGUgdmFsdWUgZGlyZWN0bHlcbiAgICAgIHZhbHVlID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4odmFsdWUpID8gdmFsdWUgOiBudWxsXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgc2tpbGwncyB2YWx1ZSBhZnRlciBhY3RpdmUgZWZmZWN0cyBoYXZlIGJlZW4gYXBwbGllZFxuICAgKi9cbiAgZ2V0IHZhbHVlICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyZW50Py5zeXN0ZW0uc2tpbGxzPy5bYCR7dGhpcy5pdGVtSWRlbnRpZmllcn1gXT8udmFsdWVcbiAgICByZXR1cm4gdmFsdWUgfHwgdGhpcy5yYXdWYWx1ZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVmFsdWUgKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gcGFyc2VJbnQodmFsdWUpIC0gdGhpcy5yYXdWYWx1ZVxuICAgICAgY29uc3QgZXhwID1cbiAgICAgICAgKHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgIDogMCkgKyBkZWx0YVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxuICAgICAgfSlcbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlRXhwZXJpZW5jZSAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgcGFyc2VJbnQoeClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gZ2V0IHZhbHVlICgpIHtcbiAgLy8gICBsZXQgcFZhbHVlXG4gIC8vICAgaWYoIHRoaXMucGFyZW50KXtcblxuICAvLyAgIH1cbiAgLy8gICBjb25zdCB2YWx1ZSA9IHN1cGVyLnZhbHVlXG4gIC8vICAgbGV0IHVwZGF0ZWQgPSB2YWx1ZVxuICAvLyAgIGZvciAoY29uc3QgY2hhbmdlIG9mIHRoaXMuYWN0aXZlRWZmZWN0cykge1xuICAvLyAgICAgY29uc3QgbW9kaWZpZXIgPSBOdW1iZXIuZnJvbVN0cmluZyhjaGFuZ2UudmFsdWUpXG4gIC8vICAgICBpZiAoIWlzTmFOKG1vZGlmaWVyKSkge1xuICAvLyAgICAgICBjb25zdCBtb2RlcyA9IENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVNcbiAgLy8gICAgICAgc3dpdGNoIChjaGFuZ2UubW9kZSkge1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuQUREOlxuICAvLyAgICAgICAgICAgdXBkYXRlZCArPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLk1VTFRJUExZOlxuICAvLyAgICAgICAgICAgdXBkYXRlZCA9IE1hdGgucm91bmQodXBkYXRlZCAqIG1vZGlmaWVyKVxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLk9WRVJSSURFOlxuICAvLyAgICAgICAgICAgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuVVBHUkFERTpcbiAgLy8gICAgICAgICAgIGlmIChtb2RpZmVyID4gdXBkYXRlZCkgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuRE9XTkdSQURFOlxuICAvLyAgICAgICAgICAgaWYgKG1vZGlmZXIgPCB1cGRhdGVkKSB1cGRhdGVkID0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgaWYgKCFpc05hTih1cGRhdGVkKSAmJiB1cGRhdGVkICE9IHZhbHVlKSB7XG4gIC8vICAgICBpZiAodXBkYXRlZCA8IDApIHVwZGF0ZWQgPSAwXG4gIC8vICAgICByZXR1cm4gdXBkYXRlZFxuICAvLyAgIH0gcmV0dXJuIHZhbHVlXG4gIC8vIH1cbn1cbiIsImltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3IuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VmVoaWNsZSBleHRlbmRzIENvQ0FjdG9yIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9qZWVwLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGdldCByYXdCdWlsZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGdldCBidWlsZCAoKSB7XG4gICAgY29uc3QgYnVpbGQgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlKVxuICAgIHJldHVybiBpc05hTihidWlsZCkgPyBudWxsIDogYnVpbGRcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSBudWxsIHx8XG4gICAgICB1bmRlZmluZWQgPT09IHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCB8fFxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSAnJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICAgICkge1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICB9XG4gICAgY29uc3QgaHAgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQpXG4gICAgcmV0dXJuIGlzTmFOKGhwKSA/IG51bGwgOiBocFxuICB9XG5cbiAgZ2V0IGhwTWF4ICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZFxuICB9XG5cbiAgZ2V0IHJhd0hwTWF4ICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZFxuICB9XG5cbiAgYXN5bmMgc2V0SHAgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID4gdGhpcy5idWlsZCkgdmFsdWUgPSB0aGlzLmJ1aWxkXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOiB2YWx1ZSB9KVxuICB9XG5cbiAgZ2V0IHJhd0RiICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYlxuICB9XG5cbiAgZ2V0IGRiICgpIHtcbiAgICBjb25zdCBkYiA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuZGI/LnZhbHVlKVxuICAgIHJldHVybiBpc05hTihkYikgPyBudWxsIDogZGJcbiAgfVxuXG4gIGdldCByYXdNb3YgKCkge1xuICAgIHJldHVybiB0aGlzLm1vdlxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgY29uc3QgbW92ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3Y/LnZhbHVlKVxuICAgIHJldHVybiBpc05hTihtb3YpID8gbnVsbCA6IG1vdlxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicz8ubXA/Lm1heCkgfHwgMFxuICB9XG5cbiAgZ2V0IHJhd01wTWF4ICgpIHtcbiAgICByZXR1cm4gdGhpcy5tcE1heFxuICB9XG5cbiAgZ2V0IHNhbk1heCAoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCByYXdTYW5NYXggKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWUgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllIGV4dGVuZHMgRGllIHtcbiAgY29uc3RydWN0b3IgKHRlcm1EYXRhKSB7XG4gICAgdGVybURhdGEuZmFjZXMgPSAxMFxuICAgIHN1cGVyKHRlcm1EYXRhKVxuICB9XG5cbiAgZ2V0IHRvdGFsICgpIHtcbiAgICBjb25zdCB0b3RhbCA9IHN1cGVyLnRvdGFsXG4gICAgcmV0dXJuIHRvdGFsID09PSAxMCA/IDAgOiB0b3RhbCAqIDEwXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcbiAgICByZXR1cm4gJ3QnXG4gIH1cbn1cbiIsImltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi9kZWNhZGVyLWRpZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllT3RoZXIgZXh0ZW5kcyBDb0M3RGVjYWRlckRpZSB7XG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcbiAgICByZXR1cm4gJ28nXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSAqL1xuY29uc3QgU0VUVElOR1MgPSB7XG4gIHB1bHBSdWxlczoge1xuICAgIG5hbWU6ICcnLFxuICAgIGhpbnQ6ICcnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBpbml0aWF0aXZlUnVsZToge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiAnYmFzaWMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBiYXNpYzogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlQmFzaWMnLFxuICAgICAgb3B0aW9uYWw6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZU9wdGlvbmFsJ1xuICAgIH0sXG4gICAgb25DaGFuZ2U6IHJ1bGUgPT4gX3NldEluaXRpYXRpdmVPcHRpb25zKHJ1bGUpXG4gIH0sXG4gIGRldmVsb3BtZW50Um9sbEZvckx1Y2s6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaycsXG4gICAgaGludDogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2tIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVEb3VibGVNYXhIZWFsdGg6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRG91YmxlTWF4SGVhbHRoLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Eb3VibGVNYXhIZWFsdGguSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjazoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5EZXZlbG9wbWVudFJvbGxMdWNrLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5EZXZlbG9wbWVudFJvbGxMdWNrLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUFyY2hldHlwZToge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkFyY2hldHlwZS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVPcmdhbml6YXRpb246IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuT3JnYW5pemF0aW9uLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Pcmdhbml6YXRpb24uSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlVGFsZW50czoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5UYWxlbnRzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5UYWxlbnRzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUZhc3RlclJlY292ZXJ5OiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5Lk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5GYXN0ZXJSZWNvdmVyeS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kczoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVNYWpvcldvdW5kcy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZUFnZVBlbmFsdGllcy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlQWdlUGVuYWx0aWVzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBvcHBvc2VkUm9sbFRpZUJyZWFrZXI6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH1cbn1cblxuZnVuY3Rpb24gX3NldEluaXRpYXRpdmVPcHRpb25zIChydWxlKSB7XG4gIGxldCBkZWNpbWFscyA9IDBcbiAgc3dpdGNoIChydWxlKSB7XG4gICAgY2FzZSAnb3B0aW9uYWwnOlxuICAgICAgZGVjaW1hbHMgPSAyXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgIGRlY2ltYWxzID0gMFxuICAgICAgYnJlYWtcbiAgfVxuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogbnVsbCxcbiAgICBkZWNpbWFsc1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0aXRsZTogJ1NFVFRJTkdTLlRpdGxlUnVsZXMnLFxuICAgICAgaWQ6ICdydWxlcy1zZXR0aW5ncycsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvc3lzdGVtL3J1bGUtc2V0dGluZ3MuaHRtbCcsXG4gICAgICB3aWR0aDogNTUwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICBjbG9zZU9uU3VibWl0OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fVxuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgb3B0aW9uc1trXSA9IHtcbiAgICAgICAgdmFsdWU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgayksXG4gICAgICAgIHNldHRpbmc6IHZcbiAgICAgIH1cbiAgICAgIGlmIChrLm1hdGNoKC9ecHVscFJ1bGUuezIsfSQvKSkge1xuICAgICAgICBwdWxwUnVsZXNbb3B0aW9uc1trXS52YWx1ZV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIG9wdGlvbnMucHVscFNlbGVjdGlvbiA9IHB1bHBSdWxlcy50cnVlXG4gICAgICA/IHB1bHBSdWxlcy5mYWxzZVxuICAgICAgICA/ICdzb21lJ1xuICAgICAgICA6ICdhbGwnXG4gICAgICA6ICdub25lJ1xuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXJTZXR0aW5ncyAoKSB7XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgaywgdilcbiAgICB9XG4gICAgX3NldEluaXRpYXRpdmVPcHRpb25zKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykpXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNwdWxwUnVsZXNTZWxlY3QnKVxuICAgICAgLm9uKCdjaGFuZ2UnLCBldmVudCA9PiB0aGlzLm9uQ2hhbmdlUHVscFNlbGVjdChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbkNsaWNrUHVscChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2J1dHRvbltuYW1lPXJlc2V0XScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vblJlc2V0RGVmYXVsdHMoZXZlbnQpKVxuICB9XG5cbiAgb25DaGFuZ2VQdWxwU2VsZWN0IChldmVudCkge1xuICAgIGNvbnN0IHZhbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkudmFsKClcbiAgICBpZiAodmFsID09PSAnbm9uZScgfHwgdmFsID09PSAnYWxsJykge1xuICAgICAgJCgnI3J1bGVzLXNldHRpbmdzJylcbiAgICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcbiAgICAgICAgICBpZiAodmFsID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xpY2tQdWxwIChldmVudCkge1xuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgICQoJyNydWxlcy1zZXR0aW5ncycpXG4gICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpXG4gICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgICAgICBwdWxwUnVsZXMudHJ1ZSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwdWxwUnVsZXMuZmFsc2UgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgJCgnI3B1bHBSdWxlc1NlbGVjdCcpLnZhbChcbiAgICAgIHB1bHBSdWxlcy50cnVlID8gKHB1bHBSdWxlcy5mYWxzZSA/ICdzb21lJyA6ICdhbGwnKSA6ICdub25lJ1xuICAgIClcbiAgfVxuXG4gIGFzeW5jIG9uUmVzZXREZWZhdWx0cyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZm9yIGF3YWl0IChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGssIHY/LmRlZmF1bHQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZGF0YSkge1xuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgIGZvciBhd2FpdCAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKFNFVFRJTkdTKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCBrZXksIGRhdGFba2V5XSlcbiAgICAgIGlmIChrZXkubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XG4gICAgICAgIHB1bHBSdWxlc1tkYXRhW2tleV1dID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZXMnLCBwdWxwUnVsZXMudHJ1ZSAmJiAhcHVscFJ1bGVzLmZhbHNlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBcmNoZXR5cGVTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICB9XG4gICAgICBjb2xsZWN0aW9uLnB1c2goRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIH0pXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHRoaXMuaXRlbS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGF9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2FyY2hldHlwZS5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHNlbGVjdGVkXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjaGFyYWNOYW1lKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRTdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5zdWdnZXN0ZWRUcmFpdHMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGgpIHtcbiAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nICs9IGNvcmVDaGFyYWN0ZXJpc3RpY3Muam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVscFRhbGVudHMnKX06ICR7c2hlZXREYXRhLmRhdGEuc3lzdGVtLnRhbGVudHN9YFxuICAgIClcbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1BvaW50cycpfTogJHtzaGVldERhdGEuZGF0YS5zeXN0ZW0uYm9udXNQb2ludHN9YFxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdCb29rU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svbWFpbi5odG1sJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdpdGVtJywgJ2Jvb2snXSxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLnNwZWxscycsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLmJvZHknXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLm5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaW5pdGlhbFJlYWRpbmcgPSB0aGlzLml0ZW0uc3lzdGVtLmluaXRpYWxSZWFkaW5nXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuaXNPd25lciA9IHRoaXMuaXRlbS5pc093bmVyXG4gICAgc2hlZXREYXRhLnNwZWxsc0xlYXJuZWQgPSB0aGlzLnNwZWxsc0xlYXJuZWRcbiAgICBzaGVldERhdGEuZXhoYXVzdGVkID0gKGF3YWl0IHRoaXMuaXRlbS5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlXG4gICAgc2hlZXREYXRhLnN0dWR5Q29tcGxldGVkID0gdGhpcy5pdGVtLnN5c3RlbS5zdHVkeS5wcm9ncmVzcyA9PT0gdGhpcy5pdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5zcGVsbExpc3RFbXB0eSA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZENvbnRlbnQgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY29udGVudCxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGdldCBzcGVsbHNMZWFybmVkICgpIHtcbiAgICBsZXQgYW1vdW50ID0gMFxuICAgIGNvbnN0IHNwZWxscyA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHMpIHtcbiAgICAgIGlmIChzcGVsbC5zeXN0ZW0ubGVhcm5lZCkgYW1vdW50KytcbiAgICB9XG4gICAgcmV0dXJuIGAke2Ftb3VudH0gLyAke3NwZWxscy5sZW5ndGh9YFxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnI2F0dGVtcHQtaW5pdGlhbC1yZWFkaW5nJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRJbml0aWFsUmVhZGluZygpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc3BlbGwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkRlbGV0ZShldmVudCkpXG4gICAgaHRtbC5maW5kKCcuZWRpdC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnNwZWxsLW5hbWUnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsRGV0YWlsKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy50ZWFjaC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGlkID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdsaScpLmRhdGEoJ2lkJylcbiAgICAgIHRoaXMuaXRlbS5hdHRlbXB0U3BlbGxMZWFybmluZyhpZClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnW25hbWU9XCJzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XCJdJykuY2hhbmdlKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygncmVzZXQnLCB2YWx1ZSlcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2luY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdpbmNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNkZWNyZWFzZS1wcm9ncmVzcycpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnZGVjcmVhc2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLW90aGVyLWdhaW5zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2FkZCcpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5jaGFuZ2Utb3RoZXItZ2FpbnMnKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2NoYW5nZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNyZWRvLWZ1bGwtc3R1ZHknKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0ucmVkb0Z1bGxTdHVkeSgpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAncmVtb3ZlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TcGVsbERldGFpbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0uc3BlbGxEZXRhaWwoaW5kZXgpXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZGVsZXRlIGEgc3BlbGwgb24gdGhlIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBfb25EZWxldGUgKGV2ZW50KSB7XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgcmV0dXJuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcbiAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5zcGVsbHMpXG4gICAgICA6IFtdXG4gICAgaWYgKGluZGV4ID49IDApIHNwZWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IHNwZWxscyB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEl0IGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGRyYWdzIGFuIGl0ZW0gdG8gdGhlIHNoZWV0XG4gICAqIEZpbHRlcnMgb25seSAnc3BlbGwnIGl0ZW1zIGFuZCBpbnNlcnRzIHRoZW0gaW4gYSBAdHlwZSB7QXJyYXl9XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdzcGVsbCcpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgY29uc3Qgc3BlbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhWydza2lsbCcsICdzcGVsbCddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIGNvbnRpbnVlXG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnKSB7XG4gICAgICAgIHNwZWxscy5wdXNoKGl0ZW0pXG4gICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiB0aGlzLml0ZW0uc3lzdGVtLnR5cGUub3RoZXIpIHtcbiAgICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhudWxsLCAnYWRkJywgeyBuYW1lOiBpdGVtLm5hbWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLmFkZFNwZWxscyhzcGVsbHMpXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjaGVja2JveGVzIGZvciB0eXBlIHdoZW4gdXNlciBjbGlja3Mgb24gdGhlIGNvcnJlc3BvbmRpbmdcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtqUXVlcnkuRXZlbnR9IGNsaWNrXG4gICAqL1xuICBtb2RpZnlUeXBlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRvZ2dsZVN3aXRjaCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IEl0ZW0gZGF0YSBiYXNlZCBvbiB1c2VyIGludGVyYWN0aW9ucyB3aXRoIHRoZSBvdGhlciBza2lsbFxuICAgKiBnYWlucyB0YWJsZSBvbiBkZXRhaWxzIHRhYiBvbiB0aGlzIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdhZGQnIHx8ICdjaGFuZ2UnIHx8ICdyZW1vdmUnXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIG1vZGlmeU90aGVyc0dhaW5zIChldmVudCwgbW9kZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLyoqIE5vIG5lZWQgdG8gY2hlY2sgaWYgdXNlciBpcyBHTSBiZWNhdXNlIG9ubHkgdGhleSBjYW4gc2VlIGRldGFpbHMgdGFiICovXG4gICAgbGV0IGluZGV4ID0gbnVsbFxuICAgIGxldCBlbGVtZW50ID0gbnVsbFxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICAgIGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCd0cicpLmRhdGEoJ2luZGV4JylcbiAgICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICB9XG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5nYWlucy5vdGhlcnNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5nYWlucy5vdGhlcnMpXG4gICAgICA6IFtdXG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdhZGQnOlxuICAgICAgICAvKiogVXNlciBjbGlja2VkIG9uIHBsdXMgaWNvbiB0byBhZGQgYSBuZXcgc2tpbGwgb24gb3RoZXIgZ2FpbnMgdGFibGUgKi9cbiAgICAgICAgc2tpbGxzLnB1c2goe1xuICAgICAgICAgIC8qKiBuZXcgc2tpbGwgKi9cbiAgICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgfHwgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5ld1NraWxsTmFtZScpLFxuICAgICAgICAgIC8qKiBkZXZlbG9wbWVudCBieSBkZWZhdWx0LCB2YWx1ZSBjYW4gYWxzbyBiZSAxZDYgb3IgMWQxMCAqL1xuICAgICAgICAgIHZhbHVlOiAnZGV2ZWxvcG1lbnQnXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFuZ2UnOlxuICAgICAgICAvKiogVXNlciBjaGFuZ2VkIG5hbWUgKGlucHV0KSBvciB2YWx1ZSAoc2VsZWN0KSBvZiBhIHNraWxsIG9uIHRhYmxlICovXG4gICAgICAgIHNraWxsc1tpbmRleF0gPSB7XG4gICAgICAgICAgbmFtZTogZWxlbWVudC5pcygnaW5wdXQnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IGVsZW1lbnQuaXMoJ3NlbGVjdCcpID8gZWxlbWVudC52YWwoKSA6IHNraWxsc1tpbmRleF0udmFsdWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVtb3ZlJzpcbiAgICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBtaW51cyBpY29uIHRvIHJlbW92ZSBhIHNraWxsIG9uIG90aGVyIGdhaW5zIHRhYmxlICovXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSBza2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ2FpbnMub3RoZXJzJzogc2tpbGxzIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZm91bmRyeSwgZ2FtZSwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGFpbmVyU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICdzdG9yYWdlJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3N0b3JhZ2Utc2hlZXQuaHRtbCcsXG4gICAgICB3aWR0aDogNjcyLFxuICAgICAgaGVpZ2h0OiA3NjUsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnaXRlbXMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmFjdG9yLml0ZW1zLnRvT2JqZWN0KCkgfHwgW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtLnRvT2JqZWN0KCkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgaXRlbXMgfSlcbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7fVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5lZGl0YWJsZSA9IHRoaXMuaXNFZGl0YWJsZVxuXG4gICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlID0ge31cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlLFxuICAgICAgICAgICAgaXRlbS50eXBlXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0ucHVzaChpdGVtKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuYWxsb3dVbmxvY2sgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdhbHdheXMnIHx8XG4gICAgICBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd3ZWFwb24nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcblxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmludmVudG9yeS1oZWFkZXInKS5jbGljayh0aGlzLl9vbkludmVudG9yeUhlYWRlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5jbGljayh0aGlzLl9vbkl0ZW1TdW1tYXJ5LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xuICAgICAgICBjYXNlICdib29rJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5Qm9vayhldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5SXRlbShldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NwZWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U3BlbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPVxuICAgICAgICAgICAgdmlzaWJsZSB8fFxuICAgICAgICAgICAgdiAhPT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2aXNpYmxlXG4gICAgfSlcbiAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb250ZW50ID1cbiAgICAgICAgY29udGVudCArICc8b3B0aW9uIHZhbHVlPVwiJyArIGFjdG9yLmlkICsgJ1wiPicgKyBhY3Rvci5uYW1lICsgJzwvb3B0aW9uPidcbiAgICB9XG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFVzZXJUb0dpdmVUbycpLFxuICAgICAgY29udGVudCxcbiAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpKVxuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgZm9ybURhdGEpIHtcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmFjdG9yVG8gPSB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbXRyYWRlaXRlbXRvJywgbWVzc2FnZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG4gICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCBpdGVtLmdldENoYXREYXRhKHsgc2VjcmV0czogdGhpcy5hY3Rvci5pc093bmVyIH0pXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxuXG4gICAgICBjb25zdCBsYWJlbHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbHNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLmxhYmVscykge1xuICAgICAgICBsYWJlbHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbFwiPjxzcGFuIGNsYXNzPVwibGFiZWwtbmFtZVwiPiR7cC5uYW1lfSA6PC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwtdmFsdWVcIj4ke3AudmFsdWV9PC9zcGFuPjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChsYWJlbHMpXG5cbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgICQoYDxkaXYgY2xhc3M9XCJpdGVtLWRlc2NyaXB0aW9uXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi52YWx1ZX08L2Rpdj5gKVxuICAgICAgKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICAgIC8vICQoZXZlbnQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJyk7XG4gIH1cblxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJykuc2xpZGVUb2dnbGUoMjAwKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRHJhZ0Ryb3AsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkQWN0b3JUb0NoYXNlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5odG1sJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXInXSxcbiAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogMzAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcuZm9ybS1jb250YWluZXInLFxuICAgICAgcGVybWlzc2lvbnM6IHsgZHJvcDogZ2FtZS51c2VyLmlzR00gfSxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3BQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIHBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgY29uc3QgdG9rZW5TZWxlY3RvckRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyYWdTZWxlY3RvcjogJy5jaGFzZS10b2tlbicsXG4gICAgICBwZXJtaXNzaW9uczoge1xuICAgICAgICBkcmFnc3RhcnQ6IGdhbWUudXNlci5pc0dNXG4gICAgICB9LFxuICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fb25Ub2tlblNlbGVjdG9yRHJhZ1N0YXJ0LmJpbmQodGhpcylcbiAgICAgIH1cbiAgICB9KVxuICAgIHRva2VuU2VsZWN0b3JEcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBodG1sLmZpbmQoJy5yZXNldC1wYXJ0aWNpcGFudCcpLmNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMub2JqZWN0ID0ge31cbiAgICAgIHRoaXMuX2FjdG9yID0gbnVsbFxuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZm9vZC1jaGFpbicpLmNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMub2JqZWN0LmNoYXNlciA9ICF0aGlzLm9iamVjdC5jaGFzZXJcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnW2RhdGEtYWN0aW9uXScpLmNsaWNrKHRoaXMuX29uQWN0aW9uLmJpbmQodGhpcykpXG5cbiAgICAvLyBodG1sLmZpbmQoJ2J1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Ub2tlblNlbGVjdG9yRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiAnZ2V0VG9rZW4nLFxuICAgICAgYXBwSWQ6IHRoaXMuYXBwSWQsXG4gICAgICBjYWxsQmFjazogJ2FkZFRva2VuVG9DaGFzZSdcbiAgICB9XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGlmICghdGhpcy5vYmplY3QuaW5pdGlhdGl2ZSkge1xuICAgICAgY29uc3QgaW5pdCA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZpbmQoXG4gICAgICAgIGMgPT4gYy5rZXkgPT09ICdkZXgnXG4gICAgICApXG4gICAgICB0aGlzLm9iamVjdC5pbml0aWF0aXZlID0gaW5pdC5sYWJlbFxuICAgICAgLy8gdGhpcy5vYmplY3QuaW5pdGlhdGl2ZSA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIC8vICAgJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJ1xuICAgICAgLy8gKX0gKCR7aW5pdC5zaG9ydE5hbWV9KWBcbiAgICB9XG4gICAgaWYgKCF0aGlzLm9iamVjdC5zcGVlZENoZWNrKSB7XG4gICAgICBjb25zdCBzcGVlZENoZWNrID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZmluZChcbiAgICAgICAgYyA9PiBjLmtleSA9PT0gJ2NvbidcbiAgICAgIClcbiAgICAgIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgIG5hbWU6IHNwZWVkQ2hlY2subGFiZWxcbiAgICAgIH1cbiAgICAgIC8vIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAvLyAgIG5hbWU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7XG4gICAgICAvLyAgICAgc3BlZWRDaGVjay5zaG9ydE5hbWVcbiAgICAgIC8vICAgfSlgXG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZVBhcnRpY2lwYW50KClcblxuICAgIC8vIGNvbnN0IHNwZWVkQ2hlY2sgPSB0aGlzLmFjdG9yPy5maW5kKCB0aGlzLm9iamVjdC5zcGVlZENoZWNrPy5uYW1lKVxuICAgIC8vIGlmKCBzcGVlZENoZWNrKXtcbiAgICAvLyAgIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sgPSBzcGVlZENoZWNrXG4gICAgLy8gfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5wYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG4gICAgaWYgKGRhdGEub2JqZWN0LnNwZWVkQ2hlY2submFtZSAmJiB0aGlzLmFjdG9yKSB7XG4gICAgICBjb25zdCBzcGVlZENoZWNrID0gdGhpcy5hY3Rvci5maW5kKGRhdGEub2JqZWN0LnNwZWVkQ2hlY2submFtZSlcbiAgICAgIGlmIChzcGVlZENoZWNrKSB7XG4gICAgICAgIGRhdGEub2JqZWN0LnNwZWVkQ2hlY2suc2NvcmUgPSBzcGVlZENoZWNrLnZhbHVlLnZhbHVlXG4gICAgICAgIGRhdGEuc3BlZWRDaGVja1JlYWRPbmx5ID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZGF0YS5wYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlICYmXG4gICAgICAgICF0aGlzLm9iamVjdC5zcGVlZENoZWNrPy5zY29yZVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEub2JqZWN0LnNwZWVkQ2hlY2suc2NvcmUgPSBkYXRhLnBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5vYmplY3QuaW5pdGlhdGl2ZSAmJiB0aGlzLmFjdG9yKSB7XG4gICAgICBjb25zdCBpbml0aWF0aXZlID0gdGhpcy5hY3Rvci5maW5kKGRhdGEub2JqZWN0LmluaXRpYXRpdmUpXG4gICAgICBpZiAoaW5pdGlhdGl2ZSkge1xuICAgICAgICBkYXRhLm9iamVjdC5kZXggPSBpbml0aWF0aXZlLnZhbHVlLnZhbHVlXG4gICAgICAgIGRhdGEuaW5pdFJlYWRPbmx5ID0gdHJ1ZVxuICAgICAgfSBlbHNlIGRhdGEub2JqZWN0LmRleCA9IGRhdGEucGFydGljaXBhbnQuaW5pdGlhdGl2ZVxuICAgIH1cblxuICAgIGRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgZGF0YS5jaGFzZSA9IHRoaXMuY2hhc2VcbiAgICBkYXRhLmRhdGEgPSB0aGlzLmRhdGFcblxuICAgIGRhdGEub3B0aW9uc0xpc3QgPSB7fVxuICAgIGlmICh0aGlzLmNoYXNlKSB7XG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QgPVxuICAgICAgICB0aGlzLmNoYXNlLmFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCA9IFtdXG4gICAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cbiAgICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0LnB1c2goYCR7Yy5sYWJlbH1gKVxuICAgICAgKVxuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyl9YFxuICAgICAgKVxuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKX1gXG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT5cbiAgICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0LnB1c2gocy5uYW1lKVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBnZXQgY2hhc2UgKCkge1xuICAgIGlmICghdGhpcy5fY2hhc2UpIHtcbiAgICAgIHRoaXMuX2NoYXNlID0gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQodGhpcy5vYmplY3QuY2hhc2VVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2hhc2VcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLm9iamVjdC5kb2NVdWlkKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5vYmplY3QuZG9jVXVpZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMsIGZvcm1EYXRhKVxuICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZHJvcFN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkcm9wRGF0YSA9IEpTT04ucGFyc2UoZHJvcFN0cmluZylcblxuICAgIGNvbnN0IGRvY1V1aWQgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEoZHJvcERhdGEpXG5cbiAgICB0aGlzLm9iamVjdC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgLy8gSWYgYWN0b3IgaXMgY29udHJvbGxlZCBieSBHTSBvbmx5IHdlIGFzc3VtZSBoZSBpcyBhIGNoYXNlclxuICAgIHRoaXMub2JqZWN0LmNoYXNlciA9IHRoaXMuYWN0b3I/Lm93bmVycz8uZmlsdGVyKHUgPT4gIXUuaXNHTSkubGVuZ3RoID09PSAwXG4gICAgaWYgKHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIGFkZFRva2VuVG9DaGFzZSAodG9rZW5zKSB7XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMub2JqZWN0LmRvY1V1aWQgPSB0b2tlbnNbMF0uZG9jdW1lbnQ/LnV1aWRcbiAgICAgIC8vIElmIGFjdG9yIGlzIGNvbnRyb2xsZWQgYnkgR00gb25seSB3ZSBhc3N1bWUgaGUgaXMgYSBjaGFzZXJcbiAgICAgIHRoaXMub2JqZWN0LmNoYXNlciA9IHRoaXMuYWN0b3I/Lm93bmVycz8uZmlsdGVyKHUgPT4gIXUuaXNHTSkubGVuZ3RoID09PSAwXG4gICAgICBpZiAodGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZykge1xuICAgICAgICBkZWxldGUgdGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZ1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclRva2VuSW5jb3JyZWN0JykpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGFjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnY2hhc2UtY2FuY2VsJzpcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFzZS1hZGQnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuXG4gICAgICAgICAgaWYgKHRoaXMuY2hhc2Uuc3RhcnRlZCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhKHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uICYmIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uID4gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRvZXNOb3RNZWV0TWluaW11bVJlcVRvQmVBZGRlZCcpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XG4gICAgICAgICAgICAgIGlmIChpc05hTihwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdikpIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5tb3YgPSBzbG93ZXN0LmFkanVzdGVkTW92XG4gICAgICAgICAgICAgIH0gLyoqIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEubW92ID1cbiAgICAgICAgICAgICAgICAgIHNsb3dlc3QuYWRqdXN0ZWRNb3YgKyBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiAtIDFcbiAgICAgICAgICAgICAgfSAqL1xuICAgICAgICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXdhaXQgdGhpcy5jaGFzZS5hZGRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCwge1xuICAgICAgICAgICAgbG9jYXRpb25VdWlkOiB0aGlzLm9iamVjdC5sb2NhdGlvblV1aWQsXG4gICAgICAgICAgICByZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9uczogdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQsXG4gICAgICAgICAgICB1cGRhdGU6IHRoaXMub2JqZWN0LnVwZGF0ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbC1zcGVlZC1jaGVjayc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG4gICAgICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmU2V0KSB7XG4gICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICAgIHJvbGwuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYyhwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsQXR0cmlidXRlKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSkge1xuICAgICAgICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XG4gICAgICAgICAgICAgIHJhd1ZhbHVlOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5uYW1lLFxuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHBhcnRpY2lwYW50Lm5hbWUgPyBwYXJ0aWNpcGFudC5uYW1lIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuaGFzQWN0b3IpIHtcbiAgICAgICAgICAgICAgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5jcmVhdGUocm9sbERhdGEpXG4gICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLm9iamVjdCwgcGFydGljaXBhbnQuZGF0YSlcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICB2YWxpZGF0ZVBhcnRpY2lwYW50ICgpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG4gICAgaWYgKCF0aGlzLmRhdGEpIHRoaXMuZGF0YSA9IHt9XG4gICAgdGhpcy5vYmplY3QuZXhjbHVkZWQgPSBmYWxzZVxuICAgIHRoaXMub2JqZWN0LmVzY2FwZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uRGVsdGEgPSAwXG5cbiAgICBpZiAoIXRoaXMuZGF0YS5vdmVycmlkZU1vdmVtZW50QWN0aW9uKSB7XG4gICAgICBjb25zdCBzbG93ZXN0UHJleSA9IHRoaXMuY2hhc2Uuc2xvd2VzdFByZXlcbiAgICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmNoYXNlLmZhc3Rlc3RDaGFzZXJcbiAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLmNoYXNlLnNsb3dlc3RQYXJ0aWNpcGFudFxuXG4gICAgICBpZiAocGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPCBzbG93ZXN0Py5hZGp1c3RlZE1vdikge1xuICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IHRydWVcbiAgICAgICAgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gPSAxXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgIHBhcnRpY2lwYW50LmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhzbG93ZXN0Py5hZGp1c3RlZE1vdilcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5pc0NoYXNlcikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2xvd2VzdFByZXkgJiZcbiAgICAgICAgICAhdGhpcy5jaGFzZS5zeXN0ZW0uaW5jbHVkZUxhc3RDb21tZXJzICYmXG4gICAgICAgICAgcGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPCBzbG93ZXN0UHJleS5hZGp1c3RlZE1vdlxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5leGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb1Nsb3cnKVxuICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGFydGljaXBhbnQuaXNQcmV5KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBmYXN0ZXN0Q2hhc2VyICYmXG4gICAgICAgICAgIXRoaXMuY2hhc2Uuc3lzdGVtLmluY2x1ZGVFc2NhcGVkICYmXG4gICAgICAgICAgcGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPiBmYXN0ZXN0Q2hhc2VyLmFkanVzdGVkTW92XG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVzY2FwZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLmV4Y2x1ZGVkQmVjYXVzZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29GYXN0JylcbiAgICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgaWYgKGRhdGEuZHJvcERhdGEpIHtcbiAgICAgIGNvbnN0IGRvY1V1aWQgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEoZGF0YS5kcm9wRGF0YSlcbiAgICAgIGlmIChkb2NVdWlkKSBkYXRhLmRvY1V1aWQgPSBkb2NVdWlkXG4gICAgICBkZWxldGUgZGF0YS5kcm9wRGF0YVxuICAgIH1cbiAgICByZXR1cm4gbmV3IENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIoZGF0YSkucmVuZGVyKHRydWUpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIERyYWdEcm9wLCBGb3JtRGF0YUV4dGVuZGVkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciB9IGZyb20gJy4uLy4uL2FwcHMvY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4vcGFydGljaXBhbnQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhc2VTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJywgJ2NoYXNlJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvY2hhc2UuaHRtbCcsXG4gICAgICB3aWR0aDogNTUwLFxuICAgICAgaGVpZ2h0OiA1MDAsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAncGFydGljaXBhbnRzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcblxuICAgIHJldHVybiBvcHRpb25zXG5cbiAgICAvLyBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAvLyBzdWJtaXRPbkNsb3NlOiB0cnVlLFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiAnY29jN0NoYXNlU2hlZXQnXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucylcblxuICAgIHNoZWV0RGF0YS5wYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0ucGFydGljaXBhbnRzT2JqZWN0XG4gICAgc2hlZXREYXRhLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmVcbiAgICBzaGVldERhdGEucHJleXMgPSB0aGlzLml0ZW0ucHJleXNcbiAgICBzaGVldERhdGEuY2hhc2VycyA9IHRoaXMuaXRlbS5jaGFzZXJzXG5cbiAgICBzaGVldERhdGEucHJleXNNaW5Nb3YgPSBzaGVldERhdGEucHJleXMubGVuZ3RoID8gc2hlZXREYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLnByZXlzTWF4TW92ID0gc2hlZXREYXRhLnByZXlzLmxlbmd0aCA/IHNoZWV0RGF0YS5wcmV5cy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzTWluTW92ID0gc2hlZXREYXRhLmNoYXNlcnMubGVuZ3RoID8gc2hlZXREYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vyc01heE1vdiA9IHNoZWV0RGF0YS5jaGFzZXJzLmxlbmd0aCA/IHNoZWV0RGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFkanVzdGVkTW92IDwgc2hlZXREYXRhLnByZXlzTWluTW92KSB7XG4gICAgICAgIHAudG9vU2xvdygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwLmluY2x1ZGVJbkNoYXNlKClcbiAgICAgIH1cbiAgICAgIHAuZmFzdGVzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92XG4gICAgICBwLnNsb3dlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEuY2hhc2Vyc01pbk1vdlxuICAgIH0pXG5cbiAgICBzaGVldERhdGEucHJleXMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFkanVzdGVkTW92ID4gc2hlZXREYXRhLmNoYXNlcnNNYXhNb3YpIHtcbiAgICAgICAgcC5lc2NhcGVkKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuaW5jbHVkZUluQ2hhc2UoKVxuICAgICAgfVxuICAgICAgcC5mYXN0ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLnByZXlzTWF4TW92XG4gICAgICBwLnNsb3dlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEucHJleXNNaW5Nb3ZcbiAgICB9KVxuXG4gICAgc2hlZXREYXRhLmxvY2F0aW9ucyA9IHRoaXMuaXRlbS5sb2NhdGlvbnNcbiAgICBzaGVldERhdGEuYWxsSGF2ZVZhbGlkTW92ID0gdGhpcy5hbGxIYXZlVmFsaWRNb3ZcbiAgICBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24gPSB0aGlzLml0ZW0uYWN0aXZlTG9jYXRpb25cbiAgICBpZiAoc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uKSB7XG4gICAgICBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24udGl0bGUgPSBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXNcbiAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkxvY2F0aW9uQ29vcmRpbmF0ZScsIHtcbiAgICAgICAgICB4OiBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXMueCxcbiAgICAgICAgICB5OiBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXMueVxuICAgICAgICB9KVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EcmFnT25DYW52YXMnKVxuICAgIH1cbiAgICBzaGVldERhdGEucHJldmlvdXNMb2NhdGlvbiA9IHRoaXMuaXRlbS5wcmV2aW91c0xvY2F0aW9uXG4gICAgc2hlZXREYXRhLm5leHRMb2NhdGlvbiA9IHRoaXMuaXRlbS5uZXh0TG9jYXRpb25cbiAgICBzaGVldERhdGEuc3RhcnRlZCA9IHRoaXMuaXRlbS5zdGFydGVkXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50ICgpIHtcbiAgLy8gICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIC8vICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50KVxuICAvLyB9XG5cbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50TG9jYXRpb24gKCkge1xuICAvLyAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcbiAgLy8gfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gaHRtbC5maW5kKCcuY2hhc2UtdHJhY2snKS5yZWFkeShhc3luYyBodG1sID0+IGF3YWl0IHRoaXMuX29uU2hlZXRSZWFkeShodG1sKSlcblxuICAgIC8vIEhhbmRsZSBEcm9wcm93blxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24tZWxlbWVudCcpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5fb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5kcm9wYnRuJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGNvbnN0IGRyb3Bkb3duID0gdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bicpXG4gICAgICBjb25zdCBkcm9wZG93bkNvbnRlbnQgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICBkcm9wZG93bkNvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgfSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duJylcbiAgICAgIC5tb3VzZWxlYXZlKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICAgIClcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBpbi1sb2NhdGlvbicpXG4gICAgICAuY29udGV4dG1lbnUodGhpcy5jbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ292ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLnAtc2lkZScpLmNsaWNrKHRoaXMuX29uQ2hhbmdlU2lkZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1wYXJ0aWNpcGFudCcpLmNsaWNrKHRoaXMuX29uRGVsZXRlUGFydGljaXBhbnQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZXNldC1yb2xsJykuY2xpY2sodGhpcy5fb25SZXNldFJvbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtZHJpdmVyJykuY2xpY2sodGhpcy5fb25EZWxldGVEcml2ZXIuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2VudGVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcm9wJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtc2lnbicpLmNsaWNrKHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLnJvbGwtcGFydGljaXBhbnQnKS5jbGljayh0aGlzLl9vblJvbGxQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b25DbGljay5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcubmFtZS1jb250YWluZXInKS5jbGljayh0aGlzLl9vbkxvY2F0aW9uQ2xpY2suYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLm9ic3RhY2xlLXR5cGUnKS5jbGljayh0aGlzLl9vbk9ic3RhY2xlVHlwZUNsaWNrLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5maW5kKCcub2JzdGFjbGUtdG9nZ2xlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVRvZ2dsZUNsaWNrLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlJykuY2xpY2sodGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKHRoaXMuX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuY2hhc2UtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uQ2hhc2VDb250cm9sQ2xpY2tlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5sb2NhdGlvbi1jb250cm9sJylcbiAgICAgIC5jbGljayh0aGlzLl9vbkxvY2F0aW9uQ29udHJvbENsaWNrLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbFxuICAgIC8vICAgLmZpbmQoJy5tb3ZlbWVudC1hY3Rpb24gLmRlY3JlYXNlJylcbiAgICAvLyAgIC5jbGljayh0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucy5iaW5kKHRoaXMsIC0xKSlcbiAgICAvLyBodG1sXG4gICAgLy8gICAuZmluZCgnLm1vdmVtZW50LWFjdGlvbiAuaW5jcmVhc2UnKVxuICAgIC8vICAgLmNsaWNrKHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zLmJpbmQodGhpcywgMSkpXG5cbiAgICAvLyBodG1sXG4gICAgLy8gLmZpbmQoJy5waW4tbG9jYXRpb24nKVxuICAgIC8vIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25QaW5Mb2NhdGlvbkRyYWdTdGFydChldmVudCkpXG5cbiAgICBjb25zdCBwaW5Mb2NhdGlvblNlbGVjdG9yRHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJhZ1NlbGVjdG9yOiAnLnBpbi1sb2NhdGlvbicsXG4gICAgICBwZXJtaXNzaW9uczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0LmJpbmQodGhpcylcbiAgICAgIH0sXG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0LmJpbmQodGhpcylcbiAgICAgIH1cbiAgICB9KVxuICAgIHBpbkxvY2F0aW9uU2VsZWN0b3JEcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLm5ldy1wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaWYgKHRoaXMuaXRlbS5zdGFydGVkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhc2UtbG9jYXRpb24gLmNoYXNlLXBhcnRpY2lwYW50JylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrLmJpbmQodGhpcykpXG5cbiAgICAgIGNvbnN0IGNoYXNlUGFydGljaXBhbnREcmFncERyb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgICBkcmFnU2VsZWN0b3I6ICcuY2hhc2UtcGFydGljaXBhbnQnLFxuICAgICAgICBkcm9wU2VsZWN0b3I6ICcuY2hhc2UtbG9jYXRpb24nLFxuICAgICAgICBwZXJtaXNzaW9uczoge1xuICAgICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyb3A6IHRoaXMuX2NhbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgIGRyYWdzdGFydDogdGhpcy5fb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fb25DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcmFnb3ZlcjogdGhpcy5fb25EcmFnRW50ZXIuYmluZCh0aGlzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgICAgIC5vbignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmUoZXZlbnQpKVxuICAgIH1cbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfZ2V0U3VibWl0RGF0YSAodXBkYXRlRGF0YSA9IHt9KSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcbiAgICBsZXQgZGF0YSA9IGZkLm9iamVjdFxuICAgIGlmICh1cGRhdGVEYXRhKSB7XG4gICAgICBkYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZGF0YSlcbiAgICB9XG5cbiAgICAvLyBDaGVjayB0aGF0IHN0YXJ0aW5nIHBvc2l0aW9uIGlzIG5vdCBvdXRzaWRlIG9mIGNoYXNlIHJhbmdlLlxuICAgIGlmIChcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zPy5saXN0Py5sZW5ndGggJiZcbiAgICAgIGRhdGEuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgICkge1xuICAgICAgZGF0YS5zeXN0ZW0uc3RhcnRpbmdJbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cykge1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAvLyBIYW5kbGUgcGFydGljaXBhbnRzIGFycmF5XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gaylcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgdWkubm90aWZpY2F0aW9ucy5lcnJvcignUGFydGljaXBhbnQgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHYpXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChvcmlnaW5hbCwgY2xlYW5lZClcbiAgICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdID0gb3JpZ2luYWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAvLyBIYW5kbGUgbG9jYXRpb25zIGxpc3RcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubG9jYXRpb25zKSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwudXVpZCA9PT0ga2V5KVxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdMb2NhdGlvbnMgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHZhbHVlKVxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3JpZ2luYWxMb2NhdGlvbiwgY2xlYW5lZClcbiAgICAgICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0gPSBvcmlnaW5hbExvY2F0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGVsZXRlIGRhdGEubG9jYXRpb25zXG4gICAgICBkYXRhLnN5c3RlbS5sb2NhdGlvbnMgPSB7IGxpc3Q6IGxvY2F0aW9ucyB9XG4gICAgfVxuICAgIC8vIGNvbnN0IHBhcnRpY2lwYW50cyA9IGRhdGEuc3lzdGVtPy5wYXJ0aWNpcGFudHM7XG4gICAgLy8gaWYoIHBhcnRpY2lwYW50cykgZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzID0gT2JqZWN0LnZhbHVlcyggcGFydGljaXBhbnRzKS5tYXAoIHAgPT4gY2xlYW4ocCkpO1xuXG4gICAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChkYXRhKVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBhc3luYyBfb25TdWJtaXQoLi4uYXJncykge1xuICAvLyAgYXdhaXQgc3VwZXIuX29uU3VibWl0KC4uLmFyZ3MpO1xuICAvLyB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IG92ZXJyaWRlID0gdGFyZ2V0Py5kYXRhc2V0Py5vdmVycmlkZSA9PT0gJ3RydWUnXG4gICAgaWYgKHRhcmdldD8ubmFtZT8uaW5jbHVkZXMoJy5ocCcpKSB7XG4gICAgICBjb25zdCBbLCAsIHV1aWRdID0gdGFyZ2V0Lm5hbWUuc3BsaXQoJy4nKVxuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnQodXVpZClcbiAgICAgIGlmIChwYXJ0aWNpcGFudCAmJiBwYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcih0YXJnZXQudmFsdWUpKSkge1xuICAgICAgICAgIGF3YWl0IHBhcnRpY2lwYW50LmFjdG9yLnNldEhwKE51bWJlcih0YXJnZXQudmFsdWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvdmVycmlkZSkge1xuICAgICAgY29uc3QgWywgdHlwZSwgdXVpZCwgc3ViVHlwZSwgZGF0YV0gPSB0YXJnZXQubmFtZS5zcGxpdCgnLicpXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZSA9PT0gJ3BhcnRpY2lwYW50cycgJiZcbiAgICAgICAgIWlzTmFOKGluZGV4KSAmJlxuICAgICAgICBzdWJUeXBlID09PSAnc3BlZWQtY2hlY2snXG4gICAgICApIHtcbiAgICAgICAgaWYgKGRhdGEgPT09ICduYW1lJykge1xuICAgICAgICAgIC8vIENoYW5naW5nIG5hbWUgd2lsbCByZW1vdmUgYWxsIG90aGVyIHJlZiAhXG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAgICAgICA6IFtdXG4gICAgICAgICAgaWYgKHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjaykge1xuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5pZFxuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay50eXBlXG4gICAgICAgICAgfSBlbHNlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjayA9IHt9XG4gICAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLm5hbWUgPSB0YXJnZXQudmFsdWVcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzZXRTY3JvbGwgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGlmICghZGF0YS5lZGl0YWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGluaXRpYWxPcGVuaW5nID0gaHRtbFswXS5jbGFzc0xpc3QuY29udGFpbnMoJ3dpbmRvdy1hcHAnKVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm5cblxuICAgIGxldCBzdGFydCA9IGRhdGEuZGF0YS5zY3JvbGw/LmNoYXNlVHJhY2suZnJvbVxuICAgIGxldCBlbmQgPSBkYXRhLmRhdGEuc2Nyb2xsPy5jaGFzZVRyYWNrLnRvXG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN0YXJ0ID0gMFxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVuZCA9IC0xXG4gICAgfVxuXG4gICAgaWYgKGluaXRpYWxPcGVuaW5nKSB7XG4gICAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcbiAgICAgIGNvbnN0IHJlbVNpemUgPSBOdW1iZXIocmVtU3RyaW5nLnJlcGxhY2UoJ3B4JywgJycpKVxuICAgICAgaWYgKGFwcC5pdGVtLnN0YXJ0ZWQpIHtcbiAgICAgICAgY29uc3QgcENvdW50ID0gYXBwLml0ZW0uYWN0dWFsUGFydGljaXBhbnRzPy5sZW5ndGhcbiAgICAgICAgY29uc3Qgd2lkdGggPSAocENvdW50ICogMTEuMiArIDMpICogcmVtU2l6ZVxuICAgICAgICBhcHAuYWN0aXZhdGVUYWIoJ3NldHVwJylcbiAgICAgICAgLy8gYXBwLl90YWJzWzBdLmFjdGl2ZSA9ICdzZXR1cCdcbiAgICAgICAgYXBwLnBvc2l0aW9uLndpZHRoID0gTWF0aC5tYXgod2lkdGgsIDQwICogcmVtU2l6ZSlcbiAgICAgICAgLy8gaHRtbC5jc3MoJ3dpZHRoJywgYCR7d2lkdGh9cHhgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwLnBvc2l0aW9uLndpZHRoID0gNDUgKiByZW1TaXplXG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgYXBwLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKHsgaHRtbCB9KSAvLyBodG1sIGlzIG5vdCByZW5kZXJlZCwgZWxlbWVudCBoYXZlIHNpemUgPSAwXG4gICAgICAvLyBpZiAoZW5kID4gMCkge1xuICAgICAgLy8gICBzdGFydCA9IDBcbiAgICAgIC8vIH0gZWxzZSBpZiAoc3RhcnQgPiAwKSB7XG4gICAgICAvLyAgIGVuZCA9IHN0YXJ0XG4gICAgICAvLyAgIHN0YXJ0ID0gMFxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIGlmIChzdGFydCAmJiBzdGFydCAhPT0gLTEpIHtcbiAgICAgIGNoYXNlVHJhY2suc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IHN0YXJ0LFxuICAgICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChlbmQgIT09IC0xKSB7XG4gICAgICBjaGFzZVRyYWNrLnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiBlbmQsXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBhd2FpdCBhcHAuaXRlbS51cGRhdGUoeyAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCB9KVxuICB9XG5cbiAgc3RhdGljIG9uQ2xvc2UgKGFwcCwgaHRtbCkge1xuICAgIGFwcC5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0udHJhY2tTY3JvbGxQb3NpdGlvbic6IC0xIH0pXG4gIH1cblxuICAvLyBhc3luYyBfb25TaGVldFJlYWR5IChodG1sKSB7XG4gIC8vICAgY29uc3QgdHJhY2sgPSBodG1sLmZpbmQoJy5jaGFzZS10cmFjaycpXG4gIC8vICAgY29uc3QgZWxlbWVudCA9ICQodHJhY2spLmZpbmQoJy5hY3RpdmUnKVxuXG4gIC8vICAgY29uc3QgZWxlbWVudGxlZnQgPSBlbGVtZW50WzBdLm9mZnNldExlZnRcbiAgLy8gICBjb25zdCBkaXZXaWR0aCA9IHRyYWNrWzBdLmNsaWVudFdpZHRoXG4gIC8vICAgbGV0IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSBlbGVtZW50bGVmdCAtIGRpdldpZHRoIC8gMlxuICAvLyAgIGlmIChlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IDwgMCkgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IDBcblxuICAvLyAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gdGhpcy5pdGVtLnN5c3RlbS50cmFja1Njcm9sbFBvc2l0aW9uXG4gIC8vICAgaWYgKCF0cmFjay5sZW5ndGgpIHJldHVyblxuICAvLyAgIGlmICghc2Nyb2xsUG9zaXRpb24pIHJldHVyblxuICAvLyAgIGNvbnN0IHRyYWNrRWxlbWVudCA9IHRyYWNrWzBdXG4gIC8vICAgdHJhY2tFbGVtZW50LnNjcm9sbFRvKHtcbiAgLy8gICAgIHRvcDogMCxcbiAgLy8gICAgIGxlZnQ6IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQsXG4gIC8vICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXG4gIC8vICAgfSlcblxuICAvLyAgIC8vVE9ETyA6IGNvdWxkZCB1c2UgcGFyZW50Lm9mZnNldFRvcCBldCBjaGlsZC5vZmZzZXRUb3AgdG8gY2VudGVyIHRoZSBhY3RpdmUgZWxlbWVudFxuXG4gIC8vICAgLy8gY29uc3QgYWN0aXZlID0gaHRtbC5maW5kKCcubmFtZS1jb250YWluZXIuYWN0aXZlJylcbiAgLy8gICAvLyBpZiggYWN0aXZlKXtcbiAgLy8gICAvLyAgIGNvbnN0IGVsZW1lbnQgPSBhY3RpdmVbMF1cbiAgLy8gICAvLyAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoe2JlaGF2aW9yOiBcInNtb290aFwiLCBibG9jazogXCJlbmRcIiwgaW5saW5lOiBcImNlbnRlclwifSlcbiAgLy8gICAvLyBlbGVtZW50LnNjcm9sbEludG9WaWV3KGZhbHNlKVxuICAvLyAgIC8vIH1cbiAgLy8gICAvLyB9KVxuICAvLyB9XG5cbiAgZmluZFBhcnRpY2lwYW50SW5kZXggKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZExvY2F0aW9uSW5kZXggKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kTG9jYXRpb24gKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5maW5kKHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZEluZGV4IChsaXN0LCB1dWlkKSB7XG4gICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpPy5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICBjb25zdCBhc3Npc3RhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBiZW5lZmljaWFyeVV1aWQgPSB0YXJnZXQuZGF0YXNldC5iZW5lZmljaWFyeVV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYXNzaXN0UGFydGljaXBhbnQoYXNzaXN0YW50VXVpZCwgYmVuZWZpY2lhcnlVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmxvY2F0aW9uLm9ic3RhY2xlJylcbiAgICAvLyBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIC8vIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgLy8gY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCd0b2dnbGUnKVxuICAgIGNvbnN0IGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdCh7XG4gICAgICBbdG9nZ2xlXTogIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXRjaGVkLW9uJylcbiAgICB9KVxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xuICAgICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubG9jYXRpb25zKSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwudXVpZCA9PT0ga2V5KVxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdMb2NhdGlvbnMgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHZhbHVlKVxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3JpZ2luYWxMb2NhdGlvbiwgY2xlYW5lZClcbiAgICAgICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0gPSBvcmlnaW5hbExvY2F0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICB9XG4gIH1cblxuICAvLyBhc3luYyBfb25PYnN0YWNsZVRvZ2dsZUNsaWNrIChldmVudCkge1xuICAvLyAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgLy8gICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLm9ic3RhY2xlJylcbiAgLy8gICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAvLyAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gIC8vICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlXG4gIC8vICAgaWYgKCFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzKSB7XG4gIC8vICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge1xuICAvLyAgICAgICBiYXJyaWVyOiB0cnVlXG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgLy8gfVxuXG4gIGFzeW5jIF9vbk9ic3RhY2xlVHlwZUNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLm9ic3RhY2xlJylcbiAgICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgICBpZiAoIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMpIHtcbiAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMgPSB7fVxuICAgIH1cbiAgICBjb25zdCBvYnN0YWNsZSA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHNcbiAgICBjb25zdCB0eXBlID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmFycmllcicpID8gJ2JhcnJpZXInIDogJ2hhemFyZCdcbiAgICBjb25zdCBhY3RpdmUgPSBvYnN0YWNsZVt0eXBlXVxuICAgIG9ic3RhY2xlLmJhcnJpZXIgPSBmYWxzZVxuICAgIG9ic3RhY2xlLmhhemFyZCA9IGZhbHNlXG4gICAgb2JzdGFjbGVbdHlwZV0gPSAhYWN0aXZlXG4gICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlID0gIWFjdGl2ZVxuICAgIC8vIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXJyaWVyJykpIHtcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuYmFycmllclxuICAgIC8vIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGF6YXJkJykpIHtcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcbiAgICAvLyB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uTG9jYXRpb25DbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgbFV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlTG9jYXRpb24obFV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Mb2NhdGlvbkNvbnRyb2xDbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBsVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbW92ZUxvY2F0aW9uKGxVdWlkKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYWRkLWFmdGVyJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmluc2VydExvY2F0aW9uKGxVdWlkLCB7IHNoaWZ0OiAxIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2FkZC1iZWZvcmUnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uaW5zZXJ0TG9jYXRpb24obFV1aWQsIHsgc2hpZnQ6IDAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnYWRkLXBhcnRpY2lwYW50JzpcbiAgICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoe1xuICAgICAgICAgIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQsXG4gICAgICAgICAgbG9jYXRpb25VdWlkOiBsVXVpZCxcbiAgICAgICAgICBkcm9wRGF0YToge31cbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKGBMb2NhdGlvbiAke2xVdWlkfSBDbGlja2VkLiBBY3Rpb246ICR7YWN0aW9ufWApXG4gIH1cblxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgcFV1aWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVQYXJ0aWNpcGFudChwVXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vblBhcnRpY2lwYW50Q29udHJvbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duJykpIHJldHVyblxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghcGFydGljaXBhbnRVdWlkKSByZXR1cm5cbiAgICBzd2l0Y2ggKHRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZHJhd0d1bic6XG4gICAgICAgIGF3YWl0IHRoaXMudG9nZ2xlUGFydGljaXBhbnRHdW4ocGFydGljaXBhbnRVdWlkKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZGVjcmVhc2VBY3Rpb25zJzpcbiAgICAgICAgYXdhaXQgdGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMoLTEsIGV2ZW50KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaW5jcmVhc2VBY3Rpb25zJzpcbiAgICAgICAgYXdhaXQgdGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMoMSwgZXZlbnQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtb3ZlQmFja3dhcmQnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwgLTEsIHsgcmVuZGVyOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtb3ZlRm9yd2FyZCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCAxLCB7IHJlbmRlcjogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYWN0aXZhdGVQYXJ0aWNpcGFudCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICBjYXNlICdib251c0RpY2UnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgZGljZU51bWJlciA9IHRhcmdldC5kYXRhc2V0LmNvdW50XG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZUJvbnVzRGljZShwYXJ0aWNpcGFudFV1aWQsIGRpY2VOdW1iZXIpXG4gICAgICAgICAgdGhpcy5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NhdXRpb3VzQXBwcm9hY2gnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uY2F1dGlvdXNBcHByb2FjaChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdlZGl0UGFydGljaXBhbnQnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocGFydGljaXBhbnRVdWlkKVxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZCA9IGxvY2F0aW9uLnV1aWRcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZSA9IHRydWVcbiAgICAgICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZShwYXJ0aWNpcGFudC5kYXRhKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZW1vdmVQYXJ0aWNpcGFudCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5yZW1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHRoaXMuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VDb250cm9sQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBsb2NhdGlvblV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLm9ic3RhY2xlJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIWxvY2F0aW9uVXVpZCkgcmV0dXJuXG4gICAgc3dpdGNoICh0YXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ29ic3RhY2xlLXNraWxsLWNoZWNrJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbS5hY3RpdmVQYXJ0aWNpcGFudE9ic3RhY2xlQ2hlY2sobG9jYXRpb25VdWlkKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucyAoY291bnQsIGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFwYXJ0aWNpcGFudFV1aWQpIHJldHVyblxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgaWYgKHBhcnRpY2lwYW50Lmhhc01heE12dEFjdGlvbnMgJiYgY291bnQgPiAwKSByZXR1cm5cbiAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucyhjb3VudClcblxuICAgIC8vIGNvbnN0IHNoZWV0ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jb2M3Lml0ZW0uY2hhc2UnKVxuICAgIC8vIGNvbnN0IGNoYXNlVHJhY2sgPSBzaGVldC5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIC8vIGlmIChjaGFzZVRyYWNrKVxuICAgIC8vICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7XG4gICAgLy8gICAgICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBjaGFzZVRyYWNrLnNjcm9sbExlZnRcbiAgICAvLyAgIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXG4gIH1cblxuICBhc3luYyBfb25CdXR0b25DbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQ/LmFjdGlvblxuICAgIGlmICghYWN0aW9uKSByZXR1cm5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnaW5pdCc6XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhaXNOYU4odGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwpICYmXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwgPiAwXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IEFycmF5LmFwcGx5KFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIEFycmF5KHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsKVxuICAgICAgICAgICkubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGxvY2F0aW9uc1swXS5uYW1lID0gJ1N0YXJ0J1xuICAgICAgICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMSkgbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXS5uYW1lID0gJ0VuZCdcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVzZXQnOlxuICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzZXRDaGFzZScpfWAsXG4gICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlSGludCcpfTwvcD5gLFxuICAgICAgICAgIHllczogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QoW10pXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0uc3RvcCgpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdjdXQyY2hhc2UnOlxuICAgICAgICBpZiAodGhpcy5pdGVtLmFsbEhhdmVTcGVlZFJvbGwpIHtcbiAgICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1DdXQyQ2hhc2UnKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5Db25maXJtQ3V0MkNoYXNlSGludCdcbiAgICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5jdXRUb1RoZUNoYXNlKClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90QWxsSGF2ZVNwZWVkUm9sbCcpKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3Jlc3RhcnQnOlxuICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzdGFydENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5Db25maXJtUmVzdGFydENoYXNlSGludCdcbiAgICAgICAgICApfTwvcD5gLFxuICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLnJlc3RhcnQoKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICduZXh0Um91bmQnOlxuICAgICAgICBpZiAodGhpcy5pdGVtLm5leHRBY3RpdmVQYXJ0aWNpcGFudCkge1xuICAgICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybU5leHRDaGFzZVJvdW5kJyl9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuQ29uZmlybU5leHRDaGFzZVJvdW5kSGludCdcbiAgICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5wcm9ncmVzc1RvTmV4dFJvdW5kKClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIF9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBfb25QaW5Mb2NhdGlvbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ2kuaWNvbicpXG4gICAgY29uc3QgZHJhZ0ljb24gPSBhLnF1ZXJ5U2VsZWN0b3IoJy5waW4taW1hZ2UnKVxuXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShkcmFnSWNvbiwgMCwgZHJhZ0ljb24uaGVpZ2h0KVxuXG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gYS5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGRhdGEgPSB7fVxuXG4gICAgZGF0YS50eXBlID0gJ2xvY2F0b3InXG4gICAgZGF0YS5Db0M3VHlwZSA9ICdjaGFzZSdcbiAgICBkYXRhLmljb24gPSBpLmRhdGFzZXQubGlua0ljb25cbiAgICBkYXRhLmxvY2F0aW9uVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBkYXRhLmRvY1V1aWQgPSB0aGlzLml0ZW0udXVpZFxuICAgIGRhdGEuY2FsbEJhY2sgPSAnbG9jYXRvckRyb3BwZWQnXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcblxuICAgIC8vIGNvbnN0IGRyYWdEYXRhID0geyB1dWlkOiBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkLCBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkIH1cbiAgICAvLyBkcmFnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IHRhcmdldC5kYXRhc2V0LnV1aWQsIHR5cGU6ICdwYXJ0aWNpcGFudCcgfVxuICAgIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcblxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnRHJvcHBlZCcpXG4gICAgdGhpcy5fb25EcmFnTGVhdmUoZHJhZ0V2ZW50KVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvblV1aWQgPSB0YXJnZXQuZGF0YXNldC51dWlkXG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAncGFydGljaXBhbnQnKSB7XG4gICAgICBjb25zdCBvbGRMb2NhdGlvbiA9IHRoaXMuZmluZExvY2F0aW9uKGxvY2F0aW9uVXVpZClcbiAgICAgIGlmIChvbGRMb2NhdGlvbikge1xuICAgICAgICBpZiAob2xkTG9jYXRpb24ucGFydGljaXBhbnRzPy5pbmNsdWRlcyhkYXRhLnV1aWQpKSByZXR1cm5cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oZGF0YS51dWlkLCBsb2NhdGlvblV1aWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHtcbiAgICAgICAgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCxcbiAgICAgICAgbG9jYXRpb25VdWlkLFxuICAgICAgICBkcm9wRGF0YTogZGF0YVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBfb25EcmFnT3ZlciAoZHJhZ0V2ZW50KSB7XG4gICAgdGhpcy5fb25EcmFnRW50ZXIoZHJhZ0V2ZW50KVxuICB9XG5cbiAgX29uRHJhZ0VudGVyIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgX29uRHJhZ0xlYXZlIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3Q/LnJlbW92ZSgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdXVpZCA9IHRhcmdldC5kYXRhc2V0Py51dWlkXG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGF3YWl0IHRoaXMuYWx0ZXJQYXJ0aWNpcGFudChkYXRhLCB1dWlkKVxuICB9XG5cbiAgYXN5bmMgX29uQWRkUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGRhdGEgPSB7IGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQgfVxuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHtcbiAgICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgICBkYXRhLmRyb3BEYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIH1cbiAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZShkYXRhKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudEVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnRFbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50c1tpbmRleF0pXG4gICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmU2V0KSB7XG4gICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICAgIHJvbGwuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSAmJiBwYXJ0aWNpcGFudC5hY3Rvci5wbGF5ZXIpIHtcbiAgICAgICAgcm9sbC5zdGFuZGJ5ID0gdHJ1ZVxuICAgICAgICByb2xsLnN0YW5kYnlUZXh0ID0gJ0NvQzcuQ2hhc2UnXG4gICAgICAgIHJvbGwuc3RhbmRieVJpZ2h0SWNvbiA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xuICAgICAgfVxuXG4gICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0NoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNTa2lsbCkge1xuICAgICAgICByb2xsLnNraWxsID0gcGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNBdHRyaWJ1dGUpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQXR0cmlidXRlKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XG4gICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXG4gICAgICAgIGFjdG9yTmFtZTogcGFydGljaXBhbnQubmFtZSA/IHBhcnRpY2lwYW50Lm5hbWUgOiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5jcmVhdGUocm9sbERhdGEpXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxVdWlkID0gcm9sbC51dWlkXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgX29uRHJhZ0VudGVyUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgX29uRHJhZ0xlYXZlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlU2lkZSAoZXZlbnQpIHtcbiAgICAvLyBjb25zdCB0ZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLm5DZG9DeW9pdWR0anJOa3UnKTtcbiAgICAvLyBjb25zdCBpdGVtVGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnSXRlbS5wbElFbU5SUDZPN1B2ZU52LnJvbGwucTJzQXpzSHQ0RnNxc2RmRCcpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyID0gIXBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgdXVpZCA9IGRyaXZlci5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBkZWxldGUgcGFydGljaXBhbnQuZG9jVXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlbGV0ZVBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Um9sbCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZ1xuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnQgKGRhdGEsIHV1aWQpIHtcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZGF0YS50b2tlblV1aWQpIGRvY1V1aWQgPSBkYXRhLnRva2VuVXVpZFxuICAgIGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmRhdGE/Ll9pZCB8fCBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2tcbiAgICAvLyBzcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdzdHInXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGlmIChvbGRQYXJ0aWNpcGFudC5tb3YpIGRlbGV0ZSBvbGRQYXJ0aWNpcGFudC5tb3ZcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9sZFBhcnRpY2lwYW50LCBwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBjbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMgKCkge1xuICAgIGF3YWl0IHRoaXMuaXRlbS5jbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMoKVxuICB9XG5cbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKGRhdGEpIHtcbiAgICAvLyBsZXQgcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcbiAgICAvLyAgICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLlF5RlRpaUVaaVg5dlRmaUMnXG4gICAgLy8gKVxuICAgIC8vIHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgLy8gICAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi51Ykx6aGU1N0pPVEhNSXI5J1xuICAgIC8vIClcbiAgICAvLyBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KCdBY3Rvci51aVkzY2FwU1VlTEx2U0xpJylcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ReUZUaWlFWmlYOXZUZmlDLkl0ZW0uR3JPSGVMWGZlRXBoc1JNWicpXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggXCJTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLllxc05RUERoRkNQbFNScUpcIilcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBcIlNjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uWXFzTlFQRGhGQ1BsU1JxSi5JdGVtLjhKRW5UakpPR0ZYbWw0d2tcIilcblxuICAgIC8vIHRyeSB0byBmaW5kIGEgdmFsaWQgZG9jdW1lbnRcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZGF0YS50b2tlblV1aWQpIGRvY1V1aWQgPSBkYXRhLnRva2VuVXVpZFxuICAgIGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBpZiAoZGF0YS5pZCkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxuICAgICAgICAgIGlmIChpdGVtPy5kYXRhPy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBUT0RPOkNoZWNrIGZvciBzcGVlZCBjaGVjaywgaWYgbm9uZSBhZGQgc3BlZWRjaGVjayBjb24gbm9uIHZlaGljbGUsIGRyaXZlIGF1dG8gZm9yIHZlaGljbGVcbiAgICAvLyBzcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdjb24nXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5zcGVlZENoZWNrKSB7XG4gICAgICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0udmVoaWNsZSkge1xuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiAnY29uJyxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNvbnN0aXR1dGlvbicpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRyaXZlLWF1dG8nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgbGV0IHVuaXF1ZSA9IGZhbHNlXG4gICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgIHBhcnRpY2lwYW50LnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgICAgdW5pcXVlID1cbiAgICAgICAgcGFydGljaXBhbnRzLmZpbHRlcihwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZCkubGVuZ3RoID09PSAwXG4gICAgfVxuXG4gICAgcGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnQpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlUGFydGljaXBhbnRHdW4gKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcbiAgICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm5cbiAgICBwYXJ0aWNpcGFudC5oYXNBR3VuUmVhZHkgPSAhcGFydGljaXBhbnQuaGFzQUd1blJlYWR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuIChvYmopIHtcbiAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBvYmopIHtcbiAgICBjb25zdCB0cCA9IGZvdW5kcnkudXRpbHMuZ2V0VHlwZShvYmpbcHJvcE5hbWVdKVxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBjbGVhbihvYmpbcHJvcE5hbWVdKVxuICAgIH1cblxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcgJiYgIU9iamVjdC5lbnRyaWVzKG9ialtwcm9wTmFtZV0pLmxlbmd0aCkge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IG51bGxcbiAgICB9IGVsc2UgaWYgKHRwID09PSAnc3RyaW5nJyAmJiAhb2JqW3Byb3BOYW1lXS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIWlzTmFOKE51bWJlcihvYmpbcHJvcE5hbWVdKSkpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBOdW1iZXIob2JqW3Byb3BOYW1lXSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9ialxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtU2hlZXRWMiBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvaXRlbS1zaGVldFYyLmh0bWwnLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogNDUwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKG9wdGlvbnMpXG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5pdGVtLmVmZmVjdHMsIHsgc3RhdHVzOiBmYWxzZSB9KVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5pdGVtKSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnkgKi9cblxuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi9pdGVtLXNoZWV0VjIuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtU2hlZXQgZXh0ZW5kcyBDb0M3SXRlbVNoZWV0VjIge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNTA2XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEpvdXJuYWxTaGVldCAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdKb3VybmFsU2hlZXQgZXh0ZW5kcyBKb3VybmFsU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIE1hY3JvQ29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01hY3JvQ29uZmlnIGV4dGVuZHMgTWFjcm9Db25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIFBsYXlsaXN0Q29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1BsYXlsaXN0Q29uZmlnIGV4dGVuZHMgUGxheWxpc3RDb25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIFJvbGxUYWJsZUNvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdSb2xsVGFibGVDb25maWcgZXh0ZW5kcyBSb2xsVGFibGVDb25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIFNjZW5lQ29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NjZW5lQ29uZmlnIGV4dGVuZHMgU2NlbmVDb25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dXBTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ2l0ZW1zJykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLmFkZC1iaW8nKS5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9vbkFkZEJpbygpKVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1zZWN0aW9uJykuY2xpY2sodGhpcy5fb25SZW1vdmVTZWN0aW9uLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vbkFkZE1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucmVtb3ZlLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25SZW1vdmVNb25ldGFyeS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgbGV0IHVzZUNvQ0lEID0gMFxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbJ2l0ZW0nLCAnd2VhcG9uJywgJ3NraWxsJywgJ2Jvb2snLCAnc3BlbGwnXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICB9XG4gICAgICBjb2xsZWN0aW9uLnB1c2goRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKSlcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVtb3ZlU2VjdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMpXG4gICAgYmlvLnNwbGljZShOdW1iZXIoZGl2LmRhdGFzZXQuaW5kZXgpLCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmJpb1NlY3Rpb25zJzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBfb25BZGRCaW8gKCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zKSA6IFtdXG4gICAgYmlvLnB1c2gobnVsbClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgX29uQWRkTW9uZXRhcnkgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIDogW11cbiAgICB2YWx1ZXMucHVzaCh7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIG1pbjogbnVsbCxcbiAgICAgIG1heDogbnVsbCxcbiAgICAgIGNhc2hUeXBlOiAwLFxuICAgICAgY2FzaFZhbHVlOiAnJyxcbiAgICAgIGFzc2V0c1R5cGU6IDAsXG4gICAgICBhc3NldHNWYWx1ZTogJycsXG4gICAgICBzcGVuZGluZ1R5cGU6IDAsXG4gICAgICBzcGVuZGluZ1ZhbHVlOiAnJ1xuICAgIH0pXG4gICAgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25SZW1vdmVNb25ldGFyeSAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHZhbHVlcyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgIHZhbHVlcy5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnOiB2YWx1ZXMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIH0pXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHRoaXMuaXRlbS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGF9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2V0dXAnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zZXR1cC5odG1sJyxcbiAgICAgIHdpZHRoOiA1NjUsXG4gICAgICBoZWlnaHQ6IDUzMCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBjb25zdCBlcmEgPSBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSkuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSlcblxuICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiB0aGlzLml0ZW0uc3lzdGVtLml0ZW1zLCBlcmE6ICh0eXBlb2YgZXJhWzBdICE9PSAndW5kZWZpbmVkJyA/IGVyYVswXSA6IHRydWUpIH0pXG5cbiAgICBzaGVldERhdGEuc2tpbGxzID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXG4gICAgc2hlZXREYXRhLm90aGVySXRlbXMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG4gICAgc2hlZXREYXRhLml0ZW1zTGlzdEVtcHR5ID0gc2hlZXREYXRhLm90aGVySXRlbXMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSksXG4gICAgICAgIGlzRW5hYmxlZDogKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeUZvcm1hdHMpIHtcbiAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlGb3JtYXRzW2tleV0pIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dDdXJyZW5jeVN5bWJvbCA9IFsnZGVjaW1hbExlZnQnLCAnZGVjaW1hbFJpZ2h0JywgJ2ludGVnZXJMZWZ0JywgJ2ludGVnZXJSaWdodCddLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlUeXBlcykge1xuICAgICAgaWYgKENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5sZW5ndGggPT09IDAgfHwgQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpKSB7XG4gICAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5uYW1lKSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5vbmVCbG9ja0JhY2tTdG9yeSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JylcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRCYWNrc3RvcnkgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmFja3N0b3J5LFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0uYmlvU2VjdGlvbnMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uYmlvU2VjdGlvbnMnXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIHN5c3RlbS5iaW9TZWN0aW9ucyB8fCBbXVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IE9iamVjdC52YWx1ZXMoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyB8fCBbXSlcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldD8ubmFtZSA9PT0gJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJ10gPSAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQnKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCddID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZFxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTa2lsbFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKVxuICAgIHRoaXMuX3NoZWV0VGFiID0gJ2l0ZW1zJ1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiBgc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy8ke3RoaXMuaXRlbS50eXBlfS1zaGVldC5odG1sYFxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIHRoaXMuaXRlbS5jaGVja1NraWxsUHJvcGVydGllcygpO1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBzaGVldERhdGEuaGFkTm9uQ2hhcmFjdGVyT3duZXIgPSBzaGVldERhdGEuaGFzT3duZXIgJiYgdGhpcy5hY3Rvcj8udHlwZSAhPT0gJ2NoYXJhY3RlcidcblxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyhcbiAgICAgIHRoaXMuaXRlbS5lZmZlY3RzXG4gICAgKVxuXG4gICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSksXG4gICAgICAgIGlzRW5hYmxlZDogKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuaXNTcGVjaWFsaXplZCA9IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsXG4gICAgc2hlZXREYXRhLmNhbk1vZGlmeVNwZWMgPVxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAhdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICAvLyBhc3luYyBfb25DbGlja0F0dHJpYnV0ZUNvbnRyb2woZXZlbnQpIHtcbiAgLy8gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAvLyAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb247XG4gIC8vICAgY29uc3QgYXR0cnMgPSB0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcztcbiAgLy8gICBjb25zdCBmb3JtID0gdGhpcy5mb3JtO1xuXG4gIC8vICAgLy8gQWRkIG5ldyBhdHRyaWJ1dGVcbiAgLy8gICBpZiAoYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG4gIC8vICAgICBjb25zdCBuayA9IE9iamVjdC5rZXlzKGF0dHJzKS5sZW5ndGggKyAxO1xuICAvLyAgICAgbGV0IG5ld0tleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIC8vICAgICBuZXdLZXkuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJkYXRhLmF0dHJpYnV0ZXMuYXR0ciR7bmt9LmtleVwiIHZhbHVlPVwiYXR0ciR7bmt9XCIvPmA7XG4gIC8vICAgICBuZXdLZXkgPSBuZXdLZXkuY2hpbGRyZW5bMF07XG4gIC8vICAgICBmb3JtLmFwcGVuZENoaWxkKG5ld0tleSk7XG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGF0dHJpYnV0ZVxuICAvLyAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJkZWxldGVcIikge1xuICAvLyAgICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoXCIuYXR0cmlidXRlXCIpO1xuICAvLyAgICAgbGkucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsaSk7XG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8vIF91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKSB7XG4gIC8vICAgLy8gSGFuZGxlIHRoZSBmcmVlLWZvcm0gYXR0cmlidXRlcyBsaXN0XG4gIC8vICAgY29uc3QgZm9yZCA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGZvcm1EYXRhKTtcbiAgLy8gICBjb25zdCBmb3JtQXR0cnMgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSkuZGF0YS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAvLyAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QudmFsdWVzKGZvcm1BdHRycykucmVkdWNlKChvYmosIHYpID0+IHtcbiAgLy8gICAgIGxldCBrID0gdltcImtleVwiXS50cmltKCk7XG4gIC8vICAgICBpZiAoL1tcXHNcXC5dLy50ZXN0KGspKSByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcIkF0dHJpYnV0ZSBrZXlzIG1heSBub3QgY29udGFpbiBzcGFjZXMgb3IgcGVyaW9kc1wiKTtcbiAgLy8gICAgIGRlbGV0ZSB2W1wia2V5XCJdO1xuICAvLyAgICAgb2JqW2tdID0gdjtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwge30pO1xuXG4gIC8vICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZXMgd2hpY2ggYXJlIG5vIGxvbmdlciB1c2VkXG4gIC8vICAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcykpIHtcbiAgLy8gICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgYXR0cmlidXRlc1tgLT0ke2t9YF0gPSBudWxsO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlLWNvbWJpbmUgZm9ybURhdGFcbiAgLy8gICBmb3JtRGF0YSA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5maWx0ZXIoZSA9PiAhZVswXS5zdGFydHNXaXRoKFwiZGF0YS5hdHRyaWJ1dGVzXCIpKS5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAvLyAgICAgb2JqW2VbMF1dID0gZVsxXTtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwgeyBfaWQ6IHRoaXMub2JqZWN0Ll9pZCwgXCJkYXRhLmF0dHJpYnV0ZXNcIjogYXR0cmlidXRlcyB9KTtcblxuICAvLyAgIC8vIFVwZGF0ZSB0aGUgSXRlbVxuICAvLyAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpO1xuICAvLyB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc2tpbGxOYW1lID0gZm9ybURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSB8fCB0aGlzLml0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID0gZm9ybURhdGFbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddIHx8IHRoaXMuaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybURhdGEubmFtZSA9IHNraWxsTmFtZVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvbWFpbi5odG1sJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdpdGVtJywgJ3NwZWxsJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgc2Nyb2xsWTogWycuYm9keSddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcubmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuaXNPd25lciA9IHRoaXMuaXRlbS5pc093bmVyXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gICAgaHRtbC5maW5kKCcjY2FzdC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuaXRlbS5jYXN0KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTdGF0dXNTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzdGF0dXMnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zdGF0dXMuaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5pdGVtKSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLml0ZW0uZWZmZWN0cywgeyBzdGF0dXM6IGZhbHNlIH0pXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcuc3RhdHVzVHlwZVtrZXldID8gQ09DNy5zdGF0dXNUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1RhbGVudFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3RhbGVudCddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3RhbGVudC5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uc3lzdGVtLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy50YWxlbnRUeXBlW2tleV0gPyBDT0M3LnRhbGVudFR5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdpdGVtJywgJ3ZlaGljbGUnXSxcbiAgICAgIHdpZHRoOiA1NTUsXG4gICAgICBoZWlnaHQ6IDQyMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvdmVoaWNsZS5odG1sJyxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuYWN0b3InLCBkcm9wU2VsZWN0b3I6ICcuZHJvcFpvbmUnIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAvLyAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHBlcmltZW50YWxGZWF0dXJlc1dhcm5pbmcnKVxuICAgIC8vIClcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5wcm9wZXJ0aWVzID0gW11cbiAgICBpZiAodGhpcy5hY3Rvci5zeXN0ZW0ucHJvcGVydGllcy5hcm1lZCkge1xuICAgICAgc2hlZXREYXRhLnByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtZWRWZWhpY2xlJykpXG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmICh0eXBlb2YgZXhwYW5kZWQgPT09ICd1bmRlZmluZWQnKSBzaGVldERhdGEuZXhwYW5kZWQgPSB0cnVlXG4gICAgZWxzZSBzaGVldERhdGEuZXhwYW5kZWQgPSBleHBhbmRlZFxuICAgIGlmIChzaGVldERhdGEuZXhwYW5kZWQpIHtcbiAgICAgIHNoZWV0RGF0YS5vcHRpb25zLmhlaWdodCA9IDQyMFxuICAgIH0gZWxzZSBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSAnYXV0bydcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgLy8gICBpZiggdmFsdWUpIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3LmJvb2tUeXBlW2tleV0/Q09DNy5ib29rVHlwZVtrZXldOm51bGwpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucmVtb3ZlLWFybW9yJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5leHBhbmQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25Ub2dnbGVFeHBhbmQuYmluZCh0aGlzKSlcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcbiAgICAvLyBodG1sLm9uKCdkcm9wJywgKGV2ZW50KSA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5zcGVsbCAuc3BlbGwtbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxTdW1tYXJ5KGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSAnYXV0bycgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnLCAhZXhwYW5kZWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRBcm1vciAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxuICAgIClcbiAgICBsb2NhdGlvbnMucHVzaCh7IG5hbWU6IG51bGwsIHZhbHVlOiBudWxsIH0pXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVBcm1vciAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb24gPSBidXR0b24uY2xvc2VzdCgnLmFybW9yJylcbiAgICBjb25zdCBpbmRleCA9IGxvY2F0aW9uLmRhdGFzZXQuaW5kZXhcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IG51bGxcbiAgICApXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxuICAgIGxvY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdXZWFwb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTQ1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC10YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgcGF0aCA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zJ1xuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbCA9IFtdXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIGlmIChzaGVldERhdGEuaGFzT3duZXIpIHtcbiAgICAgIHNoZWV0RGF0YS5maXJlYXJtU2tpbGxzID0gdGhpcy5hY3Rvci5maXJlYXJtU2tpbGxzXG4gICAgICBzaGVldERhdGEuZmlnaHRpbmdTa2lsbHMgPSB0aGlzLmFjdG9yLmZpZ2h0aW5nU2tpbGxzXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIHByaWNlOiB0aGlzLml0ZW0uc3lzdGVtLnByaWNlW2tleV0gPz8gMCxcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAodGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHNoZWV0RGF0YS5fZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMudGhyb3duID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25TcGVjaWFsID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcud2VhcG9uLXByb3BlcnR5JykuY2xpY2sodGhpcy5fb25Qcm9wZXJ0eUNsaWNrLmJpbmQodGhpcykpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKi9cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgX29uUHJvcGVydHlDbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkocHJvcGVydHlJZClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUsIEhvb2tzICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybUZpbHRlciAoZSkge1xuICBjb25zdCBhcHBJZCA9IGUuY3VycmVudFRhcmdldC5uYW1lLnJlcGxhY2UoL15jb2M3W14wLTldKyhcXGQrKSQvLCAnJDEnKVxuICBjb25zdCBhcHAgPSAkKCdkaXYuYXBwW2RhdGEtYXBwaWQ9JyArIGFwcElkICsgJ10nKVxuICBjb25zdCB0eXBlID0gYXBwLmZpbmQoJ3NlbGVjdFtuYW1lPWNvYzd0eXBlJyArIGFwcElkICsgJ10nKS52YWwoKVxuICBjb25zdCBuYW1lID0gYXBwLmZpbmQoJ2lucHV0W25hbWU9c2VhcmNoXScpLnZhbCgpXG4gIGNvbnN0IGVyYUVsZW1lbnQgPSBhcHAuZmluZCgnc2VsZWN0W25hbWU9Y29jN2VyYScgKyBhcHBJZCArICddJylcbiAgbGV0IGVyYSA9ICcnXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3NldHVwJzpcbiAgICBjYXNlICdza2lsbCc6XG4gICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgIGVyYUVsZW1lbnQuY2xvc2VzdCgnZGl2LmVyYV9zZWxlY3QnKS5zaG93KClcbiAgICAgIGVyYSA9IGVyYUVsZW1lbnQudmFsKClcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIGVyYUVsZW1lbnQuY2xvc2VzdCgnZGl2LmVyYV9zZWxlY3QnKS5oaWRlKClcbiAgfVxuICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUucGFja3MuZ2V0KGFwcC5kYXRhKCdwYWNrSWQnKSk/LmdldERvY3VtZW50cygpXG4gIGlmICh0eXBlb2YgaXRlbXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3Qgc2hvdyA9IFtdXG4gIGNvbnN0IG5hbWVGaWx0ZXIgPSBuZXcgUmVnRXhwKFJlZ0V4cC5lc2NhcGUobmFtZSksICdpJylcbiAgZm9yIChjb25zdCBbLCBpdGVtXSBvZiBPYmplY3QuZW50cmllcyhpdGVtcykpIHtcbiAgICBsZXQgZmlsdGVyID0gdHJ1ZVxuICAgIGlmIChmaWx0ZXIgJiYgbmFtZSAhPT0gJycpIHtcbiAgICAgIGZpbHRlciA9IGl0ZW0ubmFtZS5tYXRjaChuYW1lRmlsdGVyKVxuICAgIH1cbiAgICBpZiAoZmlsdGVyICYmIHR5cGUgIT09ICcnKSB7XG4gICAgICBmaWx0ZXIgPSBpdGVtLnR5cGUgPT09IHR5cGVcbiAgICB9XG4gICAgaWYgKGZpbHRlciAmJiBlcmEgIT09ICcnKSB7XG4gICAgICBjb25zdCBlcmFzID0gaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzXG4gICAgICBpZiAoZXJhcyAmJiBPYmplY3Qua2V5cyhlcmFzKS5sZW5ndGggPiAwICYmICEoZXJhc1tlcmFdID8/IGZhbHNlKSkge1xuICAgICAgICBmaWx0ZXIgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlsdGVyKSB7XG4gICAgICBzaG93LnB1c2goaXRlbS5pZClcbiAgICB9XG4gIH1cbiAgYXBwLmZpbmQoJ29sLmRpcmVjdG9yeS1saXN0IGxpJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gc2hvdy5pbmNsdWRlcyh0aGlzLmRhdGFzZXQuZG9jdW1lbnRJZClcbiAgICAgID8gJ2ZsZXgnXG4gICAgICA6ICdub25lJ1xuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGVuZGl1bUZpbHRlciAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJDb21wZW5kaXVtJywgYXN5bmMgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgIGlmIChhcHAuY29sbGVjdGlvbi5kb2N1bWVudE5hbWUgPT09ICdJdGVtJykge1xuICAgICAgYXdhaXQgYXBwLmNvbGxlY3Rpb24uZ2V0SW5kZXgoKVxuICAgICAgY29uc3QgdHlwZXMgPSBbLi4ubmV3IFNldChkYXRhLmluZGV4LmZpbHRlcihpID0+IGkubmFtZSAhPT0gJyNbQ0ZfdGVtcEVudGl0eV0nKS5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpKV1cbiAgICAgIGNvbnN0IHNlbGVjdCA9IFtdXG4gICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnYXJjaGV0eXBlJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJhcmNoZXR5cGVcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5BcmNoZXR5cGUnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2Jvb2snKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cImJvb2tcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Cb29rJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdpdGVtJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJpdGVtXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuSXRlbScpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnb2NjdXBhdGlvbicpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwib2NjdXBhdGlvblwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLk9jY3VwYXRpb24nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3NldHVwJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzZXR1cFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNldHVwJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdza2lsbCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic2tpbGxcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc3BlbGwnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNwZWxsXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU3BlbGwnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3N0YXR1cycpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic3RhdHVzXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU3RhdHVzJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCd0YWxlbnQnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInRhbGVudFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlRhbGVudCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnd2VhcG9uJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ3ZWFwb25cIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5XZWFwb24nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gW11cbiAgICAgIGVyYXMucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGZvciAoY29uc3QgZXJhIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykubWFwKGUgPT4geyByZXR1cm4geyBpZDogZVswXSwgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pIH0gfSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpKSB7XG4gICAgICAgIGVyYXMucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgZXJhLmlkICtcbiAgICAgICAgICAgICdcIj4nICtcbiAgICAgICAgICAgIGVyYS5uYW1lICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGh0bWwuZGF0YSgncGFja0lkJywgYXBwLm1ldGFkYXRhLmlkKVxuICAgICAgbGV0IHVuY29tbW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsUmFyaXR5U2hvcnQnKVxuICAgICAgaWYgKHVuY29tbW9uID09PSAnQ29DNy5Ta2lsbFJhcml0eVNob3J0Jykge1xuICAgICAgICB1bmNvbW1vbiA9ICc/PydcbiAgICAgIH1cbiAgICAgIGh0bWwuZmluZCgnbGkuZGlyZWN0b3J5LWl0ZW0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gJCh0aGlzKVxuICAgICAgICBsZXQgaXRlbSA9IFtdXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5pbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAvLyBERVBSRUNJQVRFRCBJTiB2MTFcbiAgICAgICAgICBpdGVtID0gZGF0YS5pbmRleC5maW5kKGkgPT4gaS5faWQgPT09IHJvdy5kYXRhKCdkb2N1bWVudC1pZCcpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW0gPSBhcHAuY29sbGVjdGlvbi5pbmRleC5nZXQocm93LmRhdGEoJ2RvY3VtZW50LWlkJykpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgcm93LmZpbmQoJ2EnKS5odG1sKGl0ZW0ubmFtZSArICcgKCcgKyAoaXRlbS5zeXN0ZW0/LmJhc2UgPz8gJz8nKSArICclJyArICgoaXRlbS5zeXN0ZW0/LnByb3BlcnRpZXM/LnJhcml0eSA/PyBmYWxzZSkgPyAnICcgKyB1bmNvbW1vbiA6ICcnKSArICcpJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2hlYWRlci5kaXJlY3RvcnktaGVhZGVyJylcbiAgICAgICAgLmFmdGVyKFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29tcGVuZGl1bWZpbHRlclwiPicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaGVhZGVyLXNlYXJjaCBmbGV4cm93XCI+PGkgY2xhc3M9XCJmYXMgZmEtbGF5ZXItZ3JvdXBcIj48L2k+PHNlbGVjdCBuYW1lPVwiY29jN3R5cGUnICsgYXBwLmFwcElkICsgJ1wiIHN0eWxlPVwiXCI+JyArIHNlbGVjdC5qb2luKCcnKSArICc8L3NlbGVjdD48L2Rpdj4nICtcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRlci1zZWFyY2ggZmxleHJvdyBlcmFfc2VsZWN0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3ZXJhJyArIGFwcC5hcHBJZCArICdcIiBzdHlsZT1cIlwiPicgKyBlcmFzLmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2PicgK1xuICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnc2VsZWN0JykuY2hhbmdlKHBlcmZvcm1GaWx0ZXIuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnaW5wdXQnKS5rZXl1cChwZXJmb3JtRmlsdGVyLmJpbmQodGhpcykpXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDYXJkLCBDT05GSUcsIGZvdW5kcnksIGdhbWUsIEl0ZW0sIEpvdXJuYWxFbnRyeSwgTWFjcm8sIFBsYXlsaXN0LCBSb2xsVGFibGUsIFNjZW5lLCBTY2VuZU5hdmlnYXRpb24sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQ0lEIHtcbiAgc3RhdGljIGluaXQgKCkge1xuICAgIENPTkZJRy5BY3Rvci5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIC8vIENPTkZJRy5DYXJkcy5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ3N5c3RlbS5iYXNlJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnc3lzdGVtLnByb3BlcnRpZXMnKVxuICAgIENPTkZJRy5Kb3VybmFsRW50cnkuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuTWFjcm8uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuUGxheWxpc3QuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuUm9sbFRhYmxlLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlNjZW5lLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgZ2FtZS5zeXN0ZW0uYXBpID0ge1xuICAgICAgY29jaWQ6IENvQ0lEXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgUmVnRXhwIGZvciB2YWxpZCB0eXBlIGFuZCBmb3JtYXRcbiAgICogQHJldHVybnMgUmVnRXhwXG4gICAqL1xuICBzdGF0aWMgcmVnRXhLZXkgKCkge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeKCcgKyBPYmplY3Qua2V5cyhDb0NJRC5nYW1lUHJvcGVydHlMb29rdXApLmpvaW4oJ3wnKSArICcpXFxcXC4oLio/KVxcXFwuKC4rKSQnKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUuIGJhc2VkIG9uIGRvY3VtZW50XG4gICAqIEBwYXJhbSBkb2N1bWVudFxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBnZXRQcmVmaXggKGRvY3VtZW50KSB7XG4gICAgZm9yIChjb25zdCB0eXBlIGluIENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cCkge1xuICAgICAgaWYgKGRvY3VtZW50IGluc3RhbmNlb2YgQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwW3R5cGVdKSB7XG4gICAgICAgIHJldHVybiB0eXBlICsgJy4nICsgKGRvY3VtZW50LnR5cGUgPz8gJycpICsgJy4nXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUubmFtZSBiYXNlZCBvbiBkb2N1bWVudFxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NJZCAoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gQ29DSUQuZ2V0UHJlZml4KGRvY3VtZW50KSArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2UoZG9jdW1lbnQubmFtZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLnBhcnRpYWwtbmFtZSgtcmVtb3ZlZClcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBndWVzc0dyb3VwRnJvbUtleSAoaWQpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IGtleSA9IGlkLnJlcGxhY2UoLyhbXlxcXFwuLV0rKSQvLCAnJylcbiAgICAgIGlmIChrZXkuc3Vic3RyKC0xKSA9PT0gJy0nKSB7XG4gICAgICAgIHJldHVybiBrZXlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5wYXJ0aWFsLW5hbWUoLXJlbW92ZWQpXG4gICAqIEBwYXJhbSBkb2N1bWVudFxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBndWVzc0dyb3VwRnJvbURvY3VtZW50IChkb2N1bWVudCkge1xuICAgIHJldHVybiBDb0NJRC5ndWVzc0dyb3VwRnJvbUtleShkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRyYW5zbGF0aW9uIG9mIGVyYSBrZXlcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBlcmFUZXh0IChlcmEpIHtcbiAgICBpZiAoZXJhID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnknKVxuICAgIH0gZWxzZSBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW2VyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmEgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBpdGVtcyB3aXRoIG1hdGNoaW5nIENvQ0lEcywgbGFuZ3VhZ2UsIGFuZCBlcmFzXG4gICAqIHVpLm5vdGlmaWNhdGlvbnMud2FybiBmb3IgbWlzc2luZyBrZXlzXG4gICAqIEBwYXJhbSBpdGVtTGlzdCBhcnJheSBvZiBDb0NJRHNcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBleHBhbmRJdGVtQXJyYXkgKHsgaXRlbUxpc3QsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gdHJ1ZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBsZXQgaXRlbXMgPSBbXVxuICAgIGNvbnN0IGNvY2lkcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgPT09ICdzdHJpbmcnKVxuICAgIGl0ZW1zID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCAhPT0gJ3N0cmluZycpXG5cbiAgICBpZiAoY29jaWRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZm91bmQgPSBhd2FpdCBDb0NJRC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogQ29DSUQubWFrZUdyb3VwUmVnRXgoY29jaWRzKSwgdHlwZTogJ2knLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgICAgIGNvbnN0IGFsbCA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGNvY2lkIG9mIGNvY2lkcykge1xuICAgICAgICBjb25zdCBpdGVtID0gZm91bmQuZmluZChpID0+IGkuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IGNvY2lkKVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGFsbC5wdXNoKGl0ZW0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhbGwubGVuZ3RoIDwgY29jaWRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBub3RtaXNzaW5nID0gW11cbiAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgYWxsKSB7XG4gICAgICAgICAgbm90bWlzc2luZy5wdXNoKGRvYy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZClcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgICAgICB9XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5kb2N1bWVudHMtbm90LWZvdW5kJywgeyBjb2NpZHM6IGNvY2lkcy5maWx0ZXIoeCA9PiAhbm90bWlzc2luZy5pbmNsdWRlcyh4KSkuam9pbignLCAnKSwgbGFuZywgZXJhOiBDb0NJRC5lcmFUZXh0KGVyYSkgfSkpXG4gICAgICB9XG4gICAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChhbGwpXG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaXRlbSB3aXRoIG1hdGNoaW5nIENvQ0lEcyBmcm9tIGxpc3RcbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBtaXNzaW5nIGtleXNcbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgZmluZENvY0lkSW5MaXN0IChjb2NpZCwgbGlzdCkge1xuICAgIGxldCBpdGVtTmFtZSA9ICcnXG4gICAgY29uc3QgQ29DSURLZXlzID0gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNy5Db0NJREZsYWcua2V5cylcbiAgICBpZiAodHlwZW9mIENvQ0lES2V5c1tjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpdGVtTmFtZSA9IENvQ0lES2V5c1tjb2NpZF1cbiAgICB9XG4gICAgcmV0dXJuICh0eXBlb2YgbGlzdC5maWx0ZXIgPT09ICd1bmRlZmluZWQnID8gT2JqZWN0LnZhbHVlcyhsaXN0KSA6IGxpc3QpLmZpbHRlcihpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkIHx8IChpdGVtTmFtZSAhPT0gJycgJiYgaXRlbU5hbWUgPT09IGkubmFtZSkpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBSZWdFeHAgbWF0Y2hpbmcgYWxsIHN0cmluZ3MgaW4gYXJyYXlcbiAgICogQHBhcmFtIGNvY2lkcyBhbiBhcnJheSBvZiBDb0NJRCBzdHJpbmdzXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIG1ha2VHcm91cFJlZ0V4IChjb2NpZHMpIHtcbiAgICBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvY2lkcyA9IFtjb2NpZHNdXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29jaWRzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgY29jaWRzLmZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBzcGxpdHMgPSB7fVxuICAgIGNvbnN0IHJneCA9IENvQ0lELnJlZ0V4S2V5KClcbiAgICBmb3IgKGNvbnN0IGkgb2YgY29jaWRzKSB7XG4gICAgICBjb25zdCBrZXkgPSBpLm1hdGNoKHJneClcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0ucHVzaChrZXlbM10pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbGllbnRseSBlcnJvclxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZWdFeFBhcnRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgaW4gc3BsaXRzKSB7XG4gICAgICBjb25zdCByb3cgPSBbXVxuICAgICAgZm9yIChjb25zdCBzIGluIHNwbGl0c1t0XSkge1xuICAgICAgICBpZiAoc3BsaXRzW3RdW3NdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByb3cucHVzaChzICsgJ1xcXFwuJyArICcoJyArIHNwbGl0c1t0XVtzXS5qb2luKCd8JykgKyAnKScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyBzcGxpdHNbdF1bc10uam9pbignJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyb3cubGVuZ3RoID4gMSkge1xuICAgICAgICByZWdFeFBhcnRzLnB1c2godCArICdcXFxcLicgKyAnKCcgKyByb3cuam9pbignfCcpICsgJyknKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgcm93LmpvaW4oJycpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVnRXhQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgcmVnRXhQYXJ0cy5qb2luKCd8JykgKyAnKSQnKVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByZWdFeFBhcnRzLmpvaW4oJycpICsgJyQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGRvY3VtZW50cyB3aXRoIGFuIENvQ0lEIG1hdGNoaW5nIHRoZSByZWdleCBhbmQgbWF0Y2hpbmcgdGhlIGRvY3VtZW50IHR5cGVcbiAgICogYW5kIGxhbmd1YWdlLCBmcm9tIHRoZSBzcGVjaWZpZWQgc2NvcGUuXG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3Igbm8gbWF0Y2hlc1xuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gc2NvcGUgZGVmaW5lcyB3aGVyZSBpdCB3aWxsIGxvb2s6XG4gICAqICoqbWF0Y2gqKiBzYW1lIGxvZ2ljIGFzIGZyb21Db0NJRCBmdW5jdGlvbixcbiAgICogKiphbGwqKjogZmluZCBpbiBib3RoIHdvcmxkICYgY29tcGVuZGlhLFxuICAgKiAqKndvcmxkKio6IG9ubHkgc2VhcmNoIGluIHdvcmxkLFxuICAgKiAqKmNvbXBlbmRpdW1zKio6IG9ubHkgc2VhcmNoIGluIGNvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJRFJlZ2V4QWxsICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBzY29wZSA9ICdtYXRjaCcsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAwXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBpZiAoWydtYXRjaCcsICdhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50ID0gY291bnQgKyBnYW1lLnBhY2tzLnNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydtYXRjaCcsICdhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgIGNvbnN0IHdvcmxkRG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jdW1lbnRzRnJvbVdvcmxkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSlcbiAgICAgIGlmIChzY29wZSA9PT0gJ21hdGNoJyAmJiB3b3JsZERvY3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFsbENvQ0lEKHdvcmxkRG9jdW1lbnRzLCBsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJylcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5zcGxpY2UoMCwgMCwgLi4ud29ybGREb2N1bWVudHMpXG4gICAgfVxuXG4gICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICBjb25zdCBjb21wZW5kaWFEb2N1bWVudHMgPSBhd2FpdCBDb0NJRC5kb2N1bWVudHNGcm9tQ29tcGVuZGlhKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSlcblxuICAgICAgcmVzdWx0LnNwbGljZShyZXN1bHQubGVuZ3RoLCAwLCAuLi5jb21wZW5kaWFEb2N1bWVudHMpXG4gICAgfVxuXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogMTAwIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyQWxsQ29DSUQocmVzdWx0LCBsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBkb2N1bWVudHMgd2l0aCBhbiBDb0NJRCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKm1hdGNoKiogc2FtZSBsb2dpYyBhcyBmcm9tQ29DSUQgZnVuY3Rpb24sXG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURBbGwgKHsgY29jaWQsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIHNjb3BlID0gJ21hdGNoJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IGNvY2lkLm1hdGNoKENvQ0lELnJlZ0V4S2V5KCkpXG4gICAgaWYgKCFwYXJ0cykge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEFsbCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKSwgdHlwZTogcGFydHNbMV0sIGxhbmcsIGVyYSwgc2NvcGUsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGZvciBlYWNoIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZFxuICAgKiBsYW5ndWFnZSwgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50cyBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEUmVnZXhCZXN0ICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IGFsbERvY3VtZW50cyA9IGF3YWl0IHRoaXMuZnJvbUNvQ0lEUmVnZXhBbGwoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBzY29wZTogJ2FsbCcsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgICBjb25zdCBiZXN0RG9jdW1lbnRzID0gdGhpcy5maWx0ZXJCZXN0Q29DSUQoYWxsRG9jdW1lbnRzKVxuICAgIHJldHVybiBiZXN0RG9jdW1lbnRzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdFxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICovXG4gIHN0YXRpYyBmcm9tQ29DSUQgKGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUpIHtcbiAgICBpZiAoZXJhID09PSBmYWxzZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JykgfSkpXG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgcmV0dXJuIENvQ0lELmZyb21Db0NJREJlc3QoeyBjb2NpZCwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2sgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnQgZm9yIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgbGFuZ3VhZ2UsXG4gICAqIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGluIHRoZSBXb3JsZCB0YWtpbmcgcHJlY2VkZW5jZSBvdmVyXG4gICAqIGFueSBkb2N1bWVudHNcbiAgICogaW4gY29tcGVuZGl1bSBwYWNrcy5cbiAgICogQHBhcmFtIGNvY2lkIHN0cmluZyBDb0NJRFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoXCJlblwiLCBcImVzXCIsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0XG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKi9cbiAgc3RhdGljIGZyb21Db0NJREJlc3QgKHsgY29jaWQsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gdHJ1ZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAoZXJhID09PSBmYWxzZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JykgfSkpXG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBjb2NpZFJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChjb2NpZCkgKyAnJCcpXG4gICAgcmV0dXJuIENvQ0lELmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYW4gYXJyYXkgb2YgZG9jdW1lbnRzIGFscmVhZHkgcHJvY2Vzc2VkIGJ5IGZpbHRlckFsbENvQ0lELCByZXR1cm5zIG9ubHkgdGhvc2UgdGhhdCBhcmUgdGhlIFwiYmVzdFwiIHZlcnNpb24gb2YgdGhlaXIgQ29DSURcbiAgICogQHBhcmFtIGRvY3VtZW50c1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckJlc3RDb0NJRCAoZG9jdW1lbnRzKSB7XG4gICAgY29uc3QgYmVzdE1hdGNoRG9jdW1lbnRzID0gbmV3IE1hcCgpXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBjb25zdCBkb2NDb0NJRCA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5pZFxuICAgICAgaWYgKGRvY0NvQ0lEKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREb2MgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKVxuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnREb2MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChkb2NDb0NJRCwgZG9jKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmVmZXIgcGFjayA9PT0gJycgaWYgcG9zc2libGVcbiAgICAgICAgY29uc3QgZG9jUGFjayA9IChkb2MucGFjayA/PyAnJylcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQYWNrID0gKGN1cnJlbnREb2M/LnBhY2sgPz8gJycpXG4gICAgICAgIGNvbnN0IHByZWZlcldvcmxkID0gZG9jUGFjayA9PT0gJycgfHwgZXhpc3RpbmdQYWNrICE9PSAnJ1xuICAgICAgICBpZiAoIXByZWZlcldvcmxkKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZWZlciBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgIGxldCBkb2NQcmlvcml0eSA9IHBhcnNlSW50KGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eSA/PyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgMTApXG4gICAgICAgIGRvY1ByaW9yaXR5ID0gaXNOYU4oZG9jUHJpb3JpdHkpID8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIgOiBkb2NQcmlvcml0eVxuICAgICAgICBsZXQgZXhpc3RpbmdQcmlvcml0eSA9IHBhcnNlSW50KGN1cnJlbnREb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIDEwKVxuICAgICAgICBleGlzdGluZ1ByaW9yaXR5ID0gaXNOYU4oZXhpc3RpbmdQcmlvcml0eSkgPyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiA6IGV4aXN0aW5nUHJpb3JpdHlcbiAgICAgICAgY29uc3QgcHJlZmVyUHJpb3JpdHkgPSBkb2NQcmlvcml0eSA+PSBleGlzdGluZ1ByaW9yaXR5XG4gICAgICAgIGlmICghcHJlZmVyUHJpb3JpdHkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChkb2NDb0NJRCwgZG9jKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWy4uLmJlc3RNYXRjaERvY3VtZW50cy52YWx1ZXMoKV1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYW4gYXJyYXkgb2YgZG9jdW1lbnRzLCByZXR1cm5zIGZpbHRlciBvdXQgZW4gZG9jdW1lbnRzIGlmIGEgdHJhbnNsYXRlZCBvbmUgZXhpc3RzIG1hdGNoaW5nIHRoZSBzYW1lIGVyYXNcbiAgICogQHBhcmFtIGRvY3VtZW50c1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbiBjYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBzdGF0aWMgZmlsdGVyQWxsQ29DSUQgKGRvY3VtZW50cywgbGFuZ0ZhbGxiYWNrKSB7XG4gICAgaWYgKCFsYW5nRmFsbGJhY2spIHtcbiAgICAgIHJldHVybiBkb2N1bWVudHNcbiAgICB9XG4gICAgY29uc3QgYmVzdE1hdGNoRG9jdW1lbnRzID0gbmV3IE1hcCgpXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBjb25zdCBkb2NDb0NJRCA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5pZFxuICAgICAgaWYgKGRvY0NvQ0lEKSB7XG4gICAgICAgIGNvbnN0IGRvY0VyYXMgPSBPYmplY3QuZW50cmllcyhkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8uZXJhcyA/PyB7fSkuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpLmpvaW4oJy8nKVxuICAgICAgICBsZXQgZG9jUHJpb3JpdHkgPSBwYXJzZUludChkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIDEwKVxuICAgICAgICBkb2NQcmlvcml0eSA9IGlzTmFOKGRvY1ByaW9yaXR5KSA/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSIDogZG9jUHJpb3JpdHlcbiAgICAgICAgY29uc3Qga2V5ID0gZG9jQ29DSUQgKyAnLycgKyBkb2NFcmFzICsgJy8nICsgKGlzTmFOKGRvY1ByaW9yaXR5KSA/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSIDogZG9jUHJpb3JpdHkpXG5cbiAgICAgICAgY29uc3QgY3VycmVudERvYyA9IGJlc3RNYXRjaERvY3VtZW50cy5nZXQoa2V5KVxuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnREb2MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChrZXksIGRvYylcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZG9jTGFuZyA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5sYW5nID8/ICdlbidcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMYW5nID0gY3VycmVudERvYz8uZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ubGFuZyA/PyAnZW4nXG4gICAgICAgIGlmIChleGlzdGluZ0xhbmcgPT09ICdlbicgJiYgZXhpc3RpbmdMYW5nICE9PSBkb2NMYW5nKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChrZXksIGRvYylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWy4uLmJlc3RNYXRjaERvY3VtZW50cy52YWx1ZXMoKV1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSB3b3JsZC5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jdW1lbnRzRnJvbVdvcmxkICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBwcm9ncmVzc0JhciA9IDAgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG5cbiAgICBpZiAocHJvZ3Jlc3NCYXIgPiAwKSB7XG4gICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogTWF0aC5mbG9vcigxMDAgLyBwcm9ncmVzc0JhcikgfSlcbiAgICB9XG5cbiAgICBjb25zdCBnYW1lUHJvcGVydHkgPSBDb0NJRC5nZXRHYW1lUHJvcGVydHkoYCR7dHlwZX0uLmApXG5cbiAgICBjb25zdCBjYW5kaWRhdGVEb2N1bWVudHMgPSBnYW1lW2dhbWVQcm9wZXJ0eV0/LmZpbHRlcigoZCkgPT4ge1xuICAgICAgY29uc3QgY29jaWRGbGFnID0gZC5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpXG4gICAgICBpZiAodHlwZW9mIGNvY2lkRmxhZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gKGNvY2lkRmxhZy5lcmFzID8/IFtdKVxuICAgICAgY29uc3QgbWF0Y2hpbmdFcmFzID0gKGVyYSA9PT0gZmFsc2UgfHwgT2JqZWN0LmVudHJpZXMoZXJhcykubGVuZ3RoID09PSAwIHx8IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXJhcywgZXJhKSAmJiBlcmFzW2VyYV0pKVxuICAgICAgcmV0dXJuIGNvY2lkUmVnRXhwLnRlc3QoY29jaWRGbGFnLmlkKSAmJiBbbGFuZywgKGxhbmdGYWxsYmFjayA/ICdlbicgOiAnLScpXS5pbmNsdWRlcyhjb2NpZEZsYWcubGFuZykgJiYgbWF0Y2hpbmdFcmFzXG4gICAgfSlcblxuICAgIGlmIChjYW5kaWRhdGVEb2N1bWVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbmRpZGF0ZURvY3VtZW50cy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhbGwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBDb0NJRCByZWdleCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgY29tcGVuZGl1bXMuXG4gICAqIFRoZSBkb2N1bWVudCBsaXN0IGlzIHNvcnRlZCB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGZpcnN0LlxuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHByb2dyZXNzQmFyIElmIGdyZWF0ZXIgdGhhbiB6ZXJvIHNob3cgcGVyY2VudGFnZVxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRvY3VtZW50c0Zyb21Db21wZW5kaWEgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG4gICAgY29uc3QgZXJhVGV4dCA9IENvQ0lELmVyYVRleHQoZXJhKVxuXG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gQ29DSUQuZ2V0RG9jdW1lbnRUeXBlKHR5cGUpLnNjaGVtYS5uYW1lXG4gICAgY29uc3QgY2FuZGlkYXRlRG9jdW1lbnRzID0gW11cblxuICAgIGxldCBjb3VudCA9IDFcbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKHByb2dyZXNzQmFyID4gMCkge1xuICAgICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogTWF0aC5mbG9vcihjb3VudCAqIDEwMCAvIHByb2dyZXNzQmFyKSB9KVxuICAgICAgICBjb3VudCsrXG4gICAgICB9XG4gICAgICBpZiAocGFjay5kb2N1bWVudE5hbWUgPT09IGRvY3VtZW50VHlwZSkge1xuICAgICAgICBpZiAoIXBhY2suaW5kZXhlZCkge1xuICAgICAgICAgIGF3YWl0IHBhY2suZ2V0SW5kZXgoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4SW5zdGFuY2VzID0gcGFjay5pbmRleC5maWx0ZXIoKGkpID0+IHtcbiAgICAgICAgICBjb25zdCBjb2NpZEZsYWcgPSBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcbiAgICAgICAgICBpZiAodHlwZW9mIGNvY2lkRmxhZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmFzID0gKGNvY2lkRmxhZy5lcmFzID8/IFtdKVxuICAgICAgICAgIGNvbnN0IG1hdGNoaW5nRXJhcyA9IChlcmEgPT09IGZhbHNlIHx8IE9iamVjdC5lbnRyaWVzKGVyYXMpLmxlbmd0aCA9PT0gMCB8fCAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVyYXMsIGVyYSkgJiYgZXJhc1tlcmFdKSlcbiAgICAgICAgICByZXR1cm4gY29jaWRSZWdFeHAudGVzdChjb2NpZEZsYWcuaWQpICYmIFtsYW5nLCAobGFuZ0ZhbGxiYWNrID8gJ2VuJyA6ICctJyldLmluY2x1ZGVzKGNvY2lkRmxhZy5sYW5nKSAmJiBtYXRjaGluZ0VyYXNcbiAgICAgICAgfSlcbiAgICAgICAgZm9yIChjb25zdCBpbmRleCBvZiBpbmRleEluc3RhbmNlcykge1xuICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChpbmRleC5faWQpXG4gICAgICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbXNnID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnQtbm90LWZvdW5kJywge1xuICAgICAgICAgICAgICBjb2NpZDogY29jaWRSZWdFeHAsXG4gICAgICAgICAgICAgIGxhbmcsXG4gICAgICAgICAgICAgIGVyYTogZXJhVGV4dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IobXNnKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCcsIG1zZywgaW5kZXgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVEb2N1bWVudHMucHVzaChkb2N1bWVudClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbmRpZGF0ZURvY3VtZW50cy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gIH1cblxuICAvKipcbiAgICogU29ydCBhIGxpc3Qgb2YgZG9jdW1lbnQgb24gQ29DSUQgcHJpb3JpdHkgLSB0aGUgaGlnaGVzdCBmaXJzdC5cbiAgICogQGV4YW1wbGVcbiAgICogYUxpc3RPZkRvY3VtZW50cy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gICAqL1xuICBzdGF0aWMgY29tcGFyZUNvQ0lEUHJpbyAoYSwgYikge1xuICAgIHJldHVybiAoXG4gICAgICBiLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5IC1cbiAgICAgIGEuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHlcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyB0aGUgZmlyc3QgcGFydCBvZiBhIENvQ0lEIHRvIHdoYXQgdGhvc2UgZG9jdW1lbnRzIGFyZSBjYWxsZWQgaW4gdGhlIGBnYW1lYCBvYmplY3QuXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKi9cbiAgc3RhdGljIGdldEdhbWVQcm9wZXJ0eSAoY29jaWQpIHtcbiAgICBjb25zdCB0eXBlID0gY29jaWQuc3BsaXQoJy4nKVswXVxuICAgIGNvbnN0IGdhbWVQcm9wZXJ0eSA9IENvQ0lELmdhbWVQcm9wZXJ0eUxvb2t1cFt0eXBlXVxuICAgIGlmICghZ2FtZVByb3BlcnR5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuaW5jb3JyZWN0LnR5cGUnKSlcbiAgICAgIGNvbnNvbGUubG9nKCdDb0M3IHwgJywgY29jaWQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZVByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgZ2V0IGdhbWVQcm9wZXJ0eUxvb2t1cCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGE6ICdhY3RvcnMnLFxuICAgICAgYzogJ2NhcmRzJyxcbiAgICAgIGk6ICdpdGVtcycsXG4gICAgICBqZTogJ2pvdXJuYWwnLFxuICAgICAgbTogJ21hY3JvcycsXG4gICAgICBwOiAncGxheWxpc3RzJyxcbiAgICAgIHJ0OiAndGFibGVzJyxcbiAgICAgIHM6ICdzY2VuZXMnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGZpcnN0IHBhcnQgb2YgYSBDb0NJRCB0byB3aGF0IHRob3NlIGRvY3VtZW50cyBhcmUgY2FsbGVkIGluIHRoZSBgZ2FtZWAgb2JqZWN0LlxuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICovXG4gIHN0YXRpYyBnZXREb2N1bWVudFR5cGUgKGNvY2lkKSB7XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXBbdHlwZV1cbiAgICBpZiAoIWRvY3VtZW50VHlwZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmluY29ycmVjdC50eXBlJykpXG4gICAgICBjb25zb2xlLmxvZygnQ29DNyB8ICcsIGNvY2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICB9XG4gICAgcmV0dXJuIGRvY3VtZW50VHlwZVxuICB9XG5cbiAgc3RhdGljIGdldCBkb2N1bWVudE5hbWVMb29rdXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhOiBBY3RvcixcbiAgICAgIGM6IENhcmQsXG4gICAgICBpOiBJdGVtLFxuICAgICAgamU6IEpvdXJuYWxFbnRyeSxcbiAgICAgIG06IE1hY3JvLFxuICAgICAgcDogUGxheWxpc3QsXG4gICAgICBydDogUm9sbFRhYmxlLFxuICAgICAgczogU2NlbmVcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuaW1wb3J0IHsgY29uZmlndXJlRG9jdW1lbnRzIH0gZnJvbSAnLi4vc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzLmpzJ1xuaW1wb3J0IHsgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMgfSBmcm9tICcuLi9zY3JpcHRzL2xvYWQtdGVtcGxhdGVzLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJTZXR0aW5ncyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMnXG5pbXBvcnQgeyByZWdpc3RlclNoZWV0cyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzJ1xuaW1wb3J0IHsgaGFuZGxlYmFyc0hlbHBlciB9IGZyb20gJy4uL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMnXG5pbXBvcnQgeyBjb21wZW5kaXVtRmlsdGVyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcydcbmltcG9ydCB7IENvQ0lEIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0ICogYXMgRGljZVNvTmljZVJlYWR5TGFzdCBmcm9tICcuL2RpY2Utc28tbmljZS1yZWFkeS1sYXN0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25maWd1cmVEb2N1bWVudHMoKVxuICAgIHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzKClcbiAgICByZWdpc3RlclNldHRpbmdzKClcbiAgICByZWdpc3RlclNoZWV0cygpXG4gICAgaGFuZGxlYmFyc0hlbHBlcigpXG4gICAgY29tcGVuZGl1bUZpbHRlcigpXG4gICAgQ29DSUQuaW5pdCgpXG4gICAgQ29DN0xpbmsuaW5pdCgpXG4gICAgRGljZVNvTmljZVJlYWR5TGFzdC5saXN0ZW4oKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRyAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Qm9vayB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svZGF0YS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2UgfSBmcm9tICcuLi9pdGVtcy9jaGFzZS9kYXRhLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdTa2lsbCB9IGZyb20gJy4uL2l0ZW1zL3NraWxsL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZSB9IGZyb20gJy4uL2FjdG9ycy92ZWhpY2xlL2RhdGEuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVEb2N1bWVudHMgKCkge1xuICBDT05GSUcuQWN0aXZlRWZmZWN0LmRvY3VtZW50Q2xhc3MgPSBDb0M3QWN0aXZlRWZmZWN0XG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzID0gQ29DQWN0b3JcbiAgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyA9IHtcbiAgICB2ZWhpY2xlOiBDb0M3VmVoaWNsZVxuICB9XG4gIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPSBDb0M3SXRlbVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgYm9vazogQ29DN0Jvb2ssXG4gICAgc3BlbGw6IENvQzdTcGVsbCxcbiAgICBjaGFzZTogQ29DN0NoYXNlLFxuICAgIHNraWxsOiBDb0M3U2tpbGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAvKiogRGVmaW5lIHRlbXBsYXRlIHBhdGhzIHRvIGxvYWQgKi9cbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLXNraWxscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLWNvbWJhdC5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnkuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWludmVudG9yeS1pdGVtcy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYmFja2dyb3VuZC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jb21tb24vYWN0aXZlLWVmZmVjdHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1rZWVwZXItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1za2lsbHMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NoYXJhY3Rlci1kZXZlbG9wbWVudC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvZGV2ZWxvcG1lbnQtY29udHJvbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL3ZpdGFscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY29tYmF0Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXItc2hlZXQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9zdW1tYXJ5Lmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXRhaWxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2RldGFpbHMuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvaW50cm9kdWN0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2NvbmZpZ3VyYXRpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LXNldHVwLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1hcmNoZXR5cGUuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LW9jY3VwYXRpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWNoYXJhY3RlcmlzdGljcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtYXR0cmlidXRlcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC92aWV3LWF0dHJpYnV0ZXMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWludmVzdGlnYXRvci5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtb2NjdXBhdGlvbi1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvdG9nZ2xlLXNraWxsLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1hcmNoZXR5cGUtc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3BvaW50cy1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvYmFja3N0b3J5LmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2NyZWF0ZS5oYnMnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9tZXNzYWdlcy9yb2xsLWNvbnRhaW5lci5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvbWVzc2FnZXMvcm9sbC1kaWNlLmhicydcbiAgXVxuXG4gIC8qKiBMb2FkIHRoZSB0ZW1wbGF0ZSBwYXJ0cyAqL1xuICByZXR1cm4gbG9hZFRlbXBsYXRlcyh0ZW1wbGF0ZVBhdGhzKVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgQ09OU1QsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLmpzJ1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWVPdGhlciB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUtb3RoZXIuanMnXG5pbXBvcnQgeyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyB9IGZyb20gJy4vZ2FtZS1ydWxlcy5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2V0dGluZ3MgKCkge1xuICAvKipcbiAgICogUnVsZXNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXJNZW51KCdDb0M3JywgJ2dhbWVSdWxlcycsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5OYW1lJyxcbiAgICBsYWJlbDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTGFiZWwnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLkhpbnQnLFxuICAgIGljb246ICdmYXMgZmEtYm9vaycsXG4gICAgdHlwZTogQ29DN0dhbWVSdWxlU2V0dGluZ3MsXG4gICAgcmVzdHJpY3RlZDogdHJ1ZVxuICB9KVxuICBDb0M3R2FtZVJ1bGVTZXR0aW5ncy5yZWdpc3RlclNldHRpbmdzKClcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVXNlQ29udGV4dE1lbnVzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVXNlQ29udGV4dE1lbnVzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rob2xlVXBsb2FkRGlyZWN0b3J5Jywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRob2xlVXBsb2FkLkRpcmVjdG9yeS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5EaG9sZVVwbG9hZC5EaXJlY3RvcnkuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IENvQzdEaXJlY3RvcnlQaWNrZXIuRGVmYXVsdERpcmVjdG9yeSxcbiAgICBkZWZhdWx0OiAnW2RhdGFdIHdvcmxkcy8nICsgZ2FtZS53b3JsZC5pZCArICcvZGhvbGUtaW1hZ2VzJ1xuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnd29ybGRFcmEnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuV29ybGRFcmEuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuV29ybGRFcmEuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdzdGFuZGFyZCcsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IENPQzcuZXJhcyxcbiAgICBvbkNoYW5nZTogKCkgPT4ge1xuICAgICAgdWkucGxheWVycy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkcm9wQ29DSUQnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgICcnOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuUHJvbXB0JyxcbiAgICAgIFk6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5Vc2VDb0NJRCcsXG4gICAgICBOOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuSWdub3JlQ29DSUQnXG4gICAgfVxuICB9KVxuXG4gIC8qKlxuICAgKiBJbml0aWF0aXZlXG4gICAqL1xuICAvKiogU2V0IGRpc3BsYXlpbmcgZGljZXMgZm9yIGluaXQgcm9sbCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0RGljZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlJbml0RGljZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogU2V0IGRpc3BsYXlpbmcgZGljZXMgZm9yIGluaXQgcm9sbCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dCcsXG4gICAgaGludDogJ1NFVFRJTkdTLmRpc3BsYXlJbml0QXNUZXh0SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBSb2xsIGN1c3RvbWlzYWlvbnNcbiAgICovXG4gIC8qKiBTdGFuZGJ5IHJvbGxzIG1hZGUgYnkgR00gZnJvbSBwbGF5ZXIgc2hlZXQgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzdGFuYnlHTVJvbGxzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGFuYnlHTVJvbGxzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xsc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCBkaWNlIG1vZGlmaWVyICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgdXNhZ2Ugb2YgYSBmbGF0IHRocmVzaG9sZCBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsXG4gICAgaGludDogJ1NFVFRJTkdTLkFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlZmF1bHREaWZmaWN1bHR5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdyZWd1bGFyJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgcmVndWxhcjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVJlZ3VsYXInLFxuICAgICAgdW5rbm93bjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVVua25vd24nXG4gICAgfVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU2VsZlJvbGxXaGlzcGVyVGFyZ2V0JyxcbiAgICBoaW50OiAnU0VUVElOR1MuU2VsZlJvbGxXaGlzcGVyVGFyZ2V0SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdldmVyeW9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIG5vYm9keTogJ1NFVFRJTkdTLkRvTm90QWR2aXNlJyxcbiAgICAgIG93bmVyczogJ1NFVFRJTkdTLkFkdmlzZU93bmVyc09ubHknLFxuICAgICAgZXZlcnlvbmU6ICdTRVRUSU5HUy5BZHZpc2VBbGxQbGF5ZXInXG4gICAgfVxuICB9KVxuXG4gIC8qKlxuICAgKiBDaGF0IENhcmRzXG4gICAqL1xuICAvKiogVHJ1c3RlZCBwbGF5ZXJzIHdpbGwgYmUgYWxsb3dlZCB0byBtb2RpZnkgY2hhdCBjYXJkcyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gc2VlIGNoYXQgY2FyZHMgcHJpdmF0ZSBzZWN0aW9ucyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVHJ1c3RlZENhblNlZUNoYXRDYXJkJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVHJ1c3RlZENhblNlZUNoYXRDYXJkSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCB0aGUgbmVlZCB0byBkaXNwbGF5IGFjdG9yIGltYWdlIG9uIGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlBY3Rvck9uQ2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3BsYXlBY3Rvck9uQ2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlSZXN1bHRUeXBlJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCB0aGUgdXNlIG9mIHRva2VuIGluc3RlYWQgb2YgcG9ydHJhaXRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndXNlVG9rZW4nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZVRva2VuJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVXNlVG9rZW5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBTY2VuZSBTZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5FbmFibGVTdGF0dXNJY29uc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdncmlkU3BhY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbicsXG4gICAgaGludDogJ1NFVFRJTkdTLkNoZWNrRWxldmF0aW9uSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3RhbmNlVGhlYXRyZU9mVGhlTWluZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU2NlbmVEaXN0YW5jZU5vdENhbGN1YWx0ZWROb0Vycm9yJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU2NlbmVEaXN0YW5jZU5vdENhbGN1YWx0ZWROb0Vycm9ySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIERlZmF1bHQgYmVoYXZpb3Igd2hlbiBOUEMgaXMgY3JlYXRlZCBvbiBhIHNjZW5lICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndG9rZW5Ecm9wTW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVG9rZW5Ecm9wTW9kZScsXG4gICAgaGludDogJ1NFVFRJTkdTLlRva2VuRHJvcE1vZGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ2FzaycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIGFzazogJ1NFVFRJTkdTLlRva2VuRHJvcE1vZGVBc2snLFxuICAgICAgcm9sbDogJ1NFVFRJTkdTLlRva2VuRHJvcE1vZGVSb2xsJyxcbiAgICAgIGF2ZXJhZ2U6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlQXZlcmFnZScsXG4gICAgICBpZ25vcmU6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlSWdub3JlJ1xuICAgIH1cbiAgfSlcbiAgLyoqXG4gICAqIEdhbWUgQXJ0d29yayBTZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3ZlcnJpZGVHYW1lQXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZUhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90aW1lLXRyYXAuc3ZnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZVRleHQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VUZXh0JyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ1RoZSBCbGluZCBJZGlvdCBHb2QgaXMgZHJlYW1pbmcuLi4nLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTaGVldCBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0b29sVGlwRGVsYXknLCB7XG4gICAgbmFtZTogJ0NvQzcudG9vbFRpcERlbGF5JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogMjAwMCxcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93SWNvbnNPbmx5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93SWNvbnNPbmx5JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgcGxheWVyIHRvIHVubG9jayB0aGUgc2hlZXQgb3V0c2lkZSBvZiBjcmVhdGlvbiBtb2RlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5QbGF5ZXJVbmxvY2tTaGVldE1vZGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnYWx3YXlzJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYWx3YXlzOiAnU0VUVElOR1MuQWx3YXlzRWRpdGFibGUnLFxuICAgICAgY3JlYXRpb246ICdTRVRUSU5HUy5DcmVhdGlvbk1vZGVPbmx5JyxcbiAgICAgIG5ldmVyOiAnU0VUVElOR1MuTmV2ZXJFZGl0YWJsZSdcbiAgICB9XG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gbW9kaWZ5IHN0YXR1cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGF0dXNQbGF5ZXJFZGl0YWJsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeScsXG4gICAgaGludDogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kLndlYnAnKSA0IHJlcGVhdFwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3NsaWNlJyxcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGNob2ljZXM6IHtcbiAgICAgICAgc2xpY2U6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kU2xpY2UnLFxuICAgICAgICBhdXRvOiAnU0VUVElOR1MuQmFja2dyb3VuZEF1dG8nLFxuICAgICAgICBjb250YWluOiAnU0VUVElOR1MuQmFja2dyb3VuZENvbnRhaW4nLFxuICAgICAgICBjb3ZlcjogJ1NFVFRJTkdTLkJhY2tncm91bmRDb3ZlcidcbiAgICAgIH1cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvdGVudGFjbGVzLndlYnAnKVwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRnJvbnRDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSg0Myw1NSw4MywxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGaXhlZFNraWxsTGVuZ3RoSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udEJvbGQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udFNpemUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAxNixcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIG9uQ2hhbmdlOiBzaXplID0+IF9zZXRSb290Rm9udFNpemUoc2l6ZSlcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gX3NldFJvb3RGb250U2l6ZSAoc2l6ZSkge1xuICAgICAgJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScsIHNpemUpXG4gICAgICB1aS5zaWRlYmFyLnJlbmRlcih0cnVlKVxuICAgICAgZm9yIChjb25zdCBbLCB3XSBvZiBPYmplY3QuZW50cmllcyh1aS53aW5kb3dzKSkge1xuICAgICAgICB3LnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXZWFwb25zXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZFVzZVBlclJvdW5kJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRVc2VQZXJSb3VuZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRBbW1vJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkQW1tb0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIENoYXNlc1xuICAgKi9cbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXNlU2hvd1Rva2VuTW92ZW1lbnQnLCB7XG4gIC8vICAgbmFtZTogJ1NFVFRJTkdTLkNoYXNlU2hvd1Rva2VuTW92ZW1lbnQnLFxuICAvLyAgIGhpbnQ6ICdTRVRUSU5HUy5DaGFzZVNob3dUb2tlbk1vdmVtZW50SGludCcsXG4gIC8vICAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICAgY29uZmlnOiB0cnVlLFxuICAvLyAgIGRlZmF1bHQ6IHRydWUsXG4gIC8vICAgdHlwZTogQm9vbGVhblxuICAvLyB9KVxuXG4gIC8qKlxuICAgKiBEaWNlIFNvIE5pY2VcbiAgICovXG4gIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeW5jRGljZTNkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLlN5bmNEaWNlM0QnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLlN5bmNEaWNlM0RIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGNvbnN0IFt2ZXJzaW9uXSA9IGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy52ZXJzaW9uLnNwbGl0KCcuJylcbiAgICBpZiAoIWlzTmFOKE51bWJlcih2ZXJzaW9uKSkgJiYgTnVtYmVyKHZlcnNpb24pID49IDMpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllQm9udXMnLCB7XG4gICAgICAgIG5hbWU6ICdTRVRUSU5HUy5UZW5EaWVCb251cycsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVCb251c0hpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jyb256ZScsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHknLFxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eUhpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jsb29kbW9vbicsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV2ZWxvcGVyIGFuZCBkZWJ1ZyBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWJ1Z21vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlYnVnTW9kZScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlYnVnTW9kZUhpbnQnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKipcbiAgICogT3RoZXIgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScsIHtcbiAgICBuYW1lOiAnSGlkZGVuIGRldiBtZW51JyxcbiAgICBoaW50OiAnVXNlIGF0IHlvdXIgb3duIHJpc2snLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnRGV2IHBoYXNlZCBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgLyoqIEZlYXQ6IHdlbGNvbWUgbWVzc2FnZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1Muc2hvd1dlbGNvbWVNZXNzYWdlJyxcbiAgICBoaW50OiAnU0VUVElOR1Muc2hvd1dlbGNvbWVNZXNzYWdlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0NoYXIgY3JlYXRpb24gYWxsb3dlZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHtcbiAgICBuYW1lOiAnU3lzdGVtIHVwZGF0ZSB2ZXJzaW9uJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnMCdcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVkTW9kdWxlVmVyc2lvbicsIHtcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IHt9XG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAneHBFbmFibGVkJywge1xuICAgIG5hbWU6ICdFbmFibGUgWFAgZ2FpbicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJywge1xuICAgIG5hbWU6ICdTaG93IGNoYW5nZWxvZy9pbnN0cnVjdGlvbnMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcwJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJywge1xuICAgIG5hbWU6ICdGb3JjZSBzcGVjaWZpYyBzZXR1cCBDb0MgSUQgZm9yIEludmVzdGlnYXRvciBXaXphcmQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB7XG4gICAgbmFtZTogJ051bWJlciBvZiBpbnZlc3RpZ2F0b3JzIGEgc2luZ2xlIHVzZXIgd2l0aG91dCBjcmVhdGUgYWN0b3IgcmlnaHRzIGNhbiBvd24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDBcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnLCB7XG4gICAgbmFtZTogJ0RlZmF1bHQgcGVybWlzc2lvbnMgZm9yIG5vbiBvd25lciBwbGF5ZXJzJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJywge1xuICAgIG5hbWU6ICdBbGxvdyBwbGF5ZXJzIHRvIHJlcm9sbCBjaGFyYWN0ZXJpc3RpY3MnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5Jywge1xuICAgIG5hbWU6ICdGb3JjZSBwb2ludCBidXkgaW5zdGVhZCBvZiBzZXR1cCBjaG9pY2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScsIHtcbiAgICBuYW1lOiAnUXVpY2sgZmlyZSBzZXR1cCB2YWx1ZXMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSlcbiAgLyoqIFNldCBhbiBpbml0aWF0aXZlIGZvcm11bGEgZm9yIHRoZSBzeXN0ZW0gKi9cbiAgQ09ORklHLkNvbWJhdC5pbml0aWF0aXZlID0ge1xuICAgIGZvcm11bGE6ICdAY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICAgZGVjaW1hbHM6IDRcbiAgfVxuICBDT05GSUcuZGVidWcuaG9va3MgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlYnVnbW9kZScpXG4gIENPTkZJRy5EaWNlLnRlcm1zLnQgPSBDb0M3RGVjYWRlckRpZVxuICBDT05GSUcuRGljZS50ZXJtcy5vID0gQ29DN0RlY2FkZXJEaWVPdGhlclxufVxuIiwiLyogZ2xvYmFsIEFjdG9ycywgQWN0b3JTaGVldCwgSXRlbXMsIEl0ZW1TaGVldCwgSm91cm5hbCwgSm91cm5hbFNoZWV0LCBNYWNyb0NvbmZpZywgTWFjcm9zLCBQbGF5bGlzdENvbmZpZywgUGxheWxpc3RzLCBSb2xsVGFibGVzLCBSb2xsVGFibGVDb25maWcsIFNjZW5lcywgU2NlbmVDb25maWcgKi9cbmltcG9ydCB7IENvQzdBcmNoZXR5cGVTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMnXG5pbXBvcnQgeyBDb0M3Qm9va1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvYm9vay9zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRhaW5lclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jb250YWluZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2VTaGVldCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcydcbmltcG9ydCB7IENvQzdKb3VybmFsU2hlZXQgfSBmcm9tICcuLi9zaGVldHMvY29jNy1qb3VybmFsLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN01hY3JvQ29uZmlnIH0gZnJvbSAnLi4vc2hlZXRzL2NvYzctbWFjcm8tY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3T2NjdXBhdGlvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMnXG5pbXBvcnQgeyBDb0M3UGxheWxpc3RDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1wbGF5bGlzdC1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Um9sbFRhYmxlQ29uZmlnIH0gZnJvbSAnLi4vc2hlZXRzL2NvYzctcm9sbC10YWJsZS1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3U2NlbmVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1zY2VuZS1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3U2V0dXBTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcydcbmltcG9ydCB7IENvQzdTa2lsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NraWxsLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9zaGVldC5qcydcbmltcG9ydCB7IENvQzdTdGF0dXNTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMnXG5pbXBvcnQgeyBDb0M3VGFsZW50U2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvdGFsZW50LmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcydcbmltcG9ydCB7IENvQzdXZWFwb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNoZWV0cyAoKSB7XG4gIEFjdG9ycy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBBY3RvclNoZWV0KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdOUENTaGVldCwge1xuICAgIHR5cGVzOiBbJ25wYyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1ZlaGljbGVTaGVldCwge1xuICAgIHR5cGVzOiBbJ3ZlaGljbGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDcmVhdHVyZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY3JlYXR1cmUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDb250YWluZXJTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NvbnRhaW5lciddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXJhY3RlclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY2hhcmFjdGVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBJdGVtcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBJdGVtU2hlZXQpXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U2tpbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NraWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdXZWFwb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ3dlYXBvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Qm9va1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnYm9vayddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3BlbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NwZWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdUYWxlbnRTaGVldCwge1xuICAgIHR5cGVzOiBbJ3RhbGVudCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3RhdHVzU2hlZXQsIHtcbiAgICB0eXBlczogWydzdGF0dXMnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN09jY3VwYXRpb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ29jY3VwYXRpb24nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0FyY2hldHlwZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnYXJjaGV0eXBlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTZXR1cFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2V0dXAnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXNlU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFzZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0LCB7IHR5cGVzOiBbJ2l0ZW0nXSB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0l0ZW1TaGVldFYyLCB7XG4gICAgdHlwZXM6IFsnaXRlbSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgU2NlbmVzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIFNjZW5lQ29uZmlnKVxuICBTY2VuZXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTY2VuZUNvbmZpZywge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgSm91cm5hbC51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBKb3VybmFsU2hlZXQpXG4gIEpvdXJuYWwucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdKb3VybmFsU2hlZXQsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFJvbGxUYWJsZXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgUm9sbFRhYmxlQ29uZmlnKVxuICBSb2xsVGFibGVzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Um9sbFRhYmxlQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBNYWNyb3MudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgTWFjcm9Db25maWcpXG4gIE1hY3Jvcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN01hY3JvQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBQbGF5bGlzdHMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgUGxheWxpc3RDb25maWcpXG4gIFBsYXlsaXN0cy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1BsYXlsaXN0Q29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIYW5kbGViYXJzICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuZXhwb3J0IGNvbnN0IGhhbmRsZWJhcnNIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3JvbGxBY3RvckltZycsIGZ1bmN0aW9uIChhY3RvcktleSkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KGFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH0pXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2xvY2FsaXplUm9sbE5hbWUnLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBvcHRpb25zLmhhc2guZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gZmFsc2UgOiBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyhvcHRpb25zLmhhc2guZGlmZmljdWx0eSlcbiAgICBjb25zdCBtb2RpZmllciA9IChvcHRpb25zLmhhc2gubW9kaWZpZXIgPiAwID8gYCske29wdGlvbnMuaGFzaC5tb2RpZmllcn1gIDogb3B0aW9ucy5oYXNoLm1vZGlmaWVyIDwgMCA/IG9wdGlvbnMuaGFzaC5tb2RpZmllci50b1N0cmluZygpIDogZmFsc2UpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGlua0NoZWNrJyArICghZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnKSArICghbW9kaWZpZXIgPyAnJyA6ICdNb2RpZicpICsgKCFvcHRpb25zLmhhc2gucHVzaGluZyA/ICcnIDogJ1B1c2hpbmcnKSwgeyBkaWZmaWN1bHR5LCBtb2RpZmllciwgbmFtZTogb3B0aW9ucy5oYXNoLm5hbWUgfSlcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2RpY2VTb05pY2VSZWFkeScsIGRpY2UzZCA9PiB7XG4gICAgZm9yIChjb25zdCBzeXN0ZW0gaW4gZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMpIHtcbiAgICAgIGNvbnN0IGQxMDAgPSBkaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzeXN0ZW1dLmRpY2UuZmluZChkID0+IGQudHlwZSA9PT0gJ2QxMDAnKVxuICAgICAgaWYgKHR5cGVvZiBkMTAwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zW3N5c3RlbV0uZGljZS5maW5kKGQgPT4gZC50eXBlID09PSAnZHQnKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBkaWNlRGVjYWRlciA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoZDEwMCkpLCBkMTAwKVxuICAgICAgICAgIGRpY2VEZWNhZGVyLnR5cGUgPSAnZHQnXG4gICAgICAgICAgZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc3lzdGVtXS5kaWNlLnB1c2goZGljZURlY2FkZXIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzeXN0ZW1dLmRpY2UuZmluZChkID0+IGQudHlwZSA9PT0gJ2RvJykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgZGljZURlY2FkZXIgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGQxMDApKSwgZDEwMClcbiAgICAgICAgICBkaWNlRGVjYWRlci50eXBlID0gJ2RvJ1xuICAgICAgICAgIGRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zW3N5c3RlbV0uZGljZS5wdXNoKGRpY2VEZWNhZGVyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3VG9vbHRpcHMge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgdGhpcy50b29sVGlwVGltZXIgPSBudWxsXG4gIH1cblxuICBkaXNwbGF5VG9vbFRpcCAodG9vbFRpcCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLlRvb2xUaXBIb3Zlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgaWYgKCFpc05hTihib3VuZHMubGVmdCB8fCAnJykgJiYgIWlzTmFOKGJvdW5kcy50b3AgfHwgJycpKSB7XG4gICAgICAgIGxldCBsZWZ0ID0gYm91bmRzLmxlZnRcbiAgICAgICAgbGV0IHRvcCA9IGJvdW5kcy50b3BcbiAgICAgICAgY29uc3QgaGVpZ2h0VGV4dCA9ICQodGhpcy5Ub29sVGlwSG92ZXIpLm91dGVySGVpZ2h0KClcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImhlbHAtdG9vbHRpcFwiPicgKyB0b29sVGlwICsgJzwvZGl2PicpXG4gICAgICAgIGNvbnN0IHRpcCA9ICQoJyNoZWxwLXRvb2x0aXAnKVxuICAgICAgICBjb25zdCBoZWlnaHRUaXAgPSB0aXAub3V0ZXJIZWlnaHQoKVxuICAgICAgICBjb25zdCB3aWR0aFRpcCA9IHRpcC5vdXRlcldpZHRoKClcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IGhlaWdodFRleHQgKiAxLjUgKyBoZWlnaHRUaXAgKyB0b3ApIHtcbiAgICAgICAgICB0b3AgPSB0b3AgLSBoZWlnaHRUaXBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3AgPSB0b3AgKyBoZWlnaHRUZXh0ICogMS41XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgd2lkdGhUaXAgKyBsZWZ0KSB7XG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gd2lkdGhUaXBcbiAgICAgICAgfVxuICAgICAgICB0aXAuY3NzKHtcbiAgICAgICAgICBsZWZ0OiBsZWZ0ICsgJ3B4JyxcbiAgICAgICAgICB0b3A6IHRvcCArICdweCdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b29sVGlwTGVhdmUgKGV2ZW50KSB7XG4gICAgaWYgKGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lcilcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IG51bGxcbiAgICAgICQoJyNoZWxwLXRvb2x0aXAnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIE11dGF0aW9uT2JzZXJ2ZXIsIFRvdXIsIHVpICovXG5sZXQgQ29DN1RvdXIgPSBjbGFzcyBpbnRlcm5hbENvQzdUb3VyIHt9XG5pZiAodHlwZW9mIFRvdXIgIT09ICd1bmRlZmluZWQnKSB7XG4gIENvQzdUb3VyID0gY2xhc3MgaW50ZXJuYWxDb0M3VG91ciBleHRlbmRzIFRvdXIge1xuICAgIGFzeW5jIHdhaXRGb3JFbGVtZW50IChzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBhc3luYyBfcHJlU3RlcCAoKSB7XG4gICAgICBhd2FpdCBzdXBlci5fcHJlU3RlcCgpXG5cbiAgICAgIC8vIENsb3NlIGN1cnJlbnRseSBvcGVuIGFwcGxpY2F0aW9uc1xuICAgICAgaWYgKHRoaXMuc3RlcEluZGV4ID09PSAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgYXBwIG9mIE9iamVjdC52YWx1ZXModWkud2luZG93cykpIHtcbiAgICAgICAgICBhcHAuY2xvc2UoKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcilcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmN1cnJlbnRTdGVwLnNpZGViYXJUYWIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVpLnNpZGViYXIuYWN0aXZhdGVUYWIodGhpcy5jdXJyZW50U3RlcC5zaWRlYmFyVGFiKVxuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIF9wb3N0U3RlcCAoKSB7XG4gICAgICBhd2FpdCBzdXBlci5fcG9zdFN0ZXAoKVxuICAgICAgaWYgKHRoaXMuc3RlcEluZGV4IDwgMCB8fCAhdGhpcy5oYXNOZXh0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuY3VycmVudFN0ZXAuYWN0aW9uKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc1Jlc2V0dGluZykge1xuICAgICAgICB0aGlzLmlzUmVzZXR0aW5nID0gZmFsc2VcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50U3RlcC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcikuY2xpY2soKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVzZXQgKCkge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSAnY29tcGxldGVkJykge1xuICAgICAgICB0aGlzLmlzUmVzZXR0aW5nID0gdHJ1ZVxuICAgICAgfVxuICAgICAgYXdhaXQgc3VwZXIucmVzZXQoKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBDb0M3VG91ciB9XG4iLCIvKiBnbG9iYWwgZm91bmRyeSAqL1xuaW1wb3J0IHsgQ29DN1RvdXIgfSBmcm9tICcuLi9hcHBzL2NvYzctdG91ci5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIGV4dGVuZHMgQ29DN1RvdXIge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICB0aXRsZTogJ0VuYWJsZSBvcHRpb25hbC92YXJpYW50IHJ1bGVzLicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIGhvdyB0byBlbmFibGUgUHVscCBDdGh1bGh1IHJ1bGVzLCBvciBvdGhlciB2YXJpYW50IHJ1bGVzJyxcbiAgICAgIGNhbkJlUmVzdW1lZDogZmFsc2UsXG4gICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgc3RlcHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1zZXR0aW5ncycsXG4gICAgICAgICAgc2VsZWN0b3I6ICcudGFicz5hW2RhdGEtdGFiPVwic2V0dGluZ3NcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnLFxuICAgICAgICAgIHNpZGViYXJUYWI6ICdzZXR0aW5ncydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1jb25maWd1cmUnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtYWN0aW9uPVwiY29uZmlndXJlXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZUNvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLXN5c3RlbS1zZXR0aW5ncycsXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS10YWI9XCJzeXN0ZW1cIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLWdhbWUtcnVsZXMnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtY2F0ZWdvcnk9XCJzeXN0ZW1cIl0gW2RhdGEta2V5PVwiQ29DNy5nYW1lUnVsZXNcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3NhdmUtZ2FtZS1ydWxlcycsXG4gICAgICAgICAgc2VsZWN0b3I6ICcjcnVsZXMtc2V0dGluZ3MgW25hbWU9c3VibWl0XScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50J1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgbG9jYWxpemF0aW9uOiB7XG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnOiAnR2FtZSBTZXR0aW5ncycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCc6ICdHbyB0byB0aGUgR2FtZSBTZXR0aW5ncyB0YWInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmUgU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgU2V0dGluZ3MgYnV0dG9uJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZSc6ICdTeXN0ZW0gU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIFN5c3RlbSBTZXR0aW5ncyB0YWInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnOiAnQ2xpY2sgb24gdGhlIENvbmZpZ3VyZSBWYXJpYW50L09wdGlvbmFsIFJ1bGVzIGJ1dHRvbicsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdmUgcnVsZSBjaGFuZ2VzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdPbmNlIHlvdSBoYXZlIG1hZGUgeW91ciBjaGFuZ2VzIGNsaWNrIG9uIHRoZSBTYXZlIENoYW5nZXMgYnV0dG9uJ1xuICAgICAgfVxuICAgIH0sIGNvbmZpZykpXG4gIH1cbn1cbiIsImltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0VuIH0gZnJvbSAnLi9lbmFibGUtdmFyaWFudC1ydWxlcy1lbi5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0ZyIGV4dGVuZHMgRW5hYmxlVmFyaWFudFJ1bGVzRW4ge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdGl0bGU6ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbm5lbGxlcy4nLFxuICAgICAgZGVzY3JpcHRpb246ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbmVsbGVzIGV0IFB1bHAgQ3RodWxodScsXG4gICAgICBsb2NhbGl6YXRpb246IHtcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZSc6ICdQYXJhbcOodHJlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCc6ICdPdXZyaXIgbFxcJ29uZ2xldCBcIlBhcmFtw6h0cmVzXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmF0aW9uIGRlcyBvcHRpb25zJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGlxdWV6IHN1ciBcIkNvbmZpZ3VyYXRpb24gZGVzIG9wdGlvbnNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdMOobWUgZGUgamV1JyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JzogJ091dnJleiBsXFwnb25nbGV0IFwiU3lzdMOobWUgZGUgamV1XCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrZXogc3VyIGxlIGJvdXR0b24gXCJDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdBcHJlcyBhdm9pciBjaG9pc2lzIGxlcyBvcHRpb25zIGNsaXF1ZXogc3VyIGxlIGJvdXRvbiBcIlNhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zXCInXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdUb29sdGlwcyB9IGZyb20gJy4uL2FwcHMvdG9vbHRpcHMuanMnXG4vLyBpbXBvcnQgeyBDb0M3V2VsY29tZU1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL3dlbGNvbWUtbWVzc2FnZS5qcydcbmltcG9ydCB7IHJlZ2lzdGVyVG91cnMgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXRvdXJzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgncmVhZHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NhbGwgb2YgQ3RodWxodSA3dGggRWRpdGlvbiB8IFJlYWR5JylcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIC8qKiBUaGlzIHdpbGwgcHJvbXB0IHRoZSB3ZWxjb21lIG1lc3NhZ2Ugd2hlbiBpdCBpcyAgZmluaXNoZWQgKi9cbiAgICAgIC8vIGF3YWl0IENvQzdXZWxjb21lTWVzc2FnZS5jcmVhdGUoKVxuICAgIH1cbiAgICBnYW1lLkNvQzdUb29sdGlwcyA9IG5ldyBDb0M3VG9vbHRpcHMoKVxuXG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zVmVyc2lvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnKVxuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICBjb25zdCByZWFkTWUgPSB7XG4gICAgICBlbjogJ3N4QjJPWGJmd1Y2TTBueVEnLFxuICAgICAgZXM6ICczNUZNN1pPZHpDNkwyeGxqJyxcbiAgICAgIGZyOiAndGRha3l6VFZPUXNBTWRTbSdcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZWFkTWVbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICBDT05GSUcuQ29DNyA9IENPTkZJRy5Db0M3ID8/IHt9XG4gICAgQ09ORklHLkNvQzcuTWFudWFsID0gcmVhZE1lW2xhbmddXG4gICAgaWYgKGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgaW5zdHJ1Y3Rpb25zVmVyc2lvbiA/PyAnMCcpKSB7XG4gICAgICAoYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc3lzdGVtLWRvYycpLmdldERvY3VtZW50KENPTkZJRy5Db0M3Lk1hbnVhbCkpPy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCBnYW1lLnN5c3RlbS52ZXJzaW9uKVxuICAgIH1cbiAgICByZWdpc3RlclRvdXJzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNFbiB9IGZyb20gJy4uL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xuaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRnIgfSBmcm9tICcuLi90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyVG91cnMgKCkge1xuICB0cnkge1xuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICBjb25zdCB0b3VycyA9IHtcbiAgICAgIGVuOiB7XG4gICAgICAgICdlbmFibGUtdmFyaWFudC1ydWxlcyc6IEVuYWJsZVZhcmlhbnRSdWxlc0VuXG4gICAgICB9LFxuICAgICAgZnI6IHtcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRnJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b3Vyc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIGZvciAoY29uc3QgdG91ck5hbWUgaW4gdG91cnNbbGFuZ10pIHtcbiAgICAgIGdhbWUudG91cnMucmVnaXN0ZXIoJ0NvQzcnLCB0b3VyTmFtZSwgbmV3IHRvdXJzW2xhbmddW3RvdXJOYW1lXSgpKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignVE9VUiBFUlJPUicsIGVycilcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgQ3JlYXRlVG9rZW4gZnJvbSAnLi9jcmVhdGUtdG9rZW4uanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUmVhZHkgZnJvbSAnLi9kaWNlLXNvLW5pY2UtcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBJbml0IGZyb20gJy4vaW5pdC5qcydcbmltcG9ydCAqIGFzIFJlYWR5IGZyb20gJy4vcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJBY3RvclNoZWV0IGZyb20gJy4vcmVuZGVyLWFjdG9yLXNoZWV0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyQ2hhdE1lc3NhZ2UgZnJvbSAnLi9yZW5kZXItY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyRGlhbG9nIGZyb20gJy4vcmVuZGVyLWRpYWxvZy5qcydcbmltcG9ydCAqIGFzIFJlbmRlckl0ZW1TaGVldCBmcm9tICcuL3JlbmRlci1pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyUGF1c2UgZnJvbSAnLi9yZW5kZXItcGF1c2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQbGF5ZXJMaXN0IGZyb20gJy4vcmVuZGVyLXBsYXllci1saXN0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyUmVhbFJvbGwgZnJvbSAnLi9yZW5kZXItcmVhbC1yb2xsLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyU2V0dGluZ3NDb25maWcgZnJvbSAnLi9yZW5kZXItc2V0dGluZ3MtY29uZmlnLmpzJ1xuXG5leHBvcnQgY29uc3QgQ29DN0hvb2tzID0ge1xuICBsaXN0ZW4gKCkge1xuICAgIENyZWF0ZVRva2VuLmxpc3RlbigpXG4gICAgRGljZVNvTmljZVJlYWR5Lmxpc3RlbigpXG4gICAgSW5pdC5saXN0ZW4oKVxuICAgIFJlYWR5Lmxpc3RlbigpXG4gICAgUmVuZGVyQWN0b3JTaGVldC5saXN0ZW4oKVxuICAgIFJlbmRlckNoYXRNZXNzYWdlLmxpc3RlbigpXG4gICAgUmVuZGVyRGlhbG9nLmxpc3RlbigpXG4gICAgUmVuZGVySXRlbVNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyUGF1c2UubGlzdGVuKClcbiAgICBSZW5kZXJQbGF5ZXJMaXN0Lmxpc3RlbigpXG4gICAgUmVuZGVyUmVhbFJvbGwubGlzdGVuKClcbiAgICBSZW5kZXJTZXR0aW5nc0NvbmZpZy5saXN0ZW4oKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSG9va3MsIERpYWxvZywgZ2FtZSwgdWkgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignY3JlYXRlVG9rZW4nLCBhc3luYyAodG9rZW5Eb2N1bWVudCwgb3B0aW9ucywgY3JhZXRvcklkKSA9PiB7XG4gICAgLy8gT25seSB0b2tlbiBjcmVhdG9yIGNhbiByb2xsXG4gICAgaWYgKGdhbWUudXNlci5pZCAhPT0gY3JhZXRvcklkKSByZXR1cm5cbiAgICAvLyBTZXQgdG9rZW4gaWNvbiBjb3JyZWN0bHlcbiAgICBpZiAoXG4gICAgICB0b2tlbkRvY3VtZW50LnRleHR1cmUuc3JjID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycgJiZcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgIT09IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5pbWcpIHtcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgPSB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuaW1nXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgc29tZXRoaW5nIHRvIHJvbGwgYXNrIGlmIHdlIHNob3VsZCByb2xsIGl0XG4gICAgaWYgKHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci50eXBlICE9PSAnY2hhcmFjdGVyJyAmJiAodG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzIHx8IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5ob3NSb2xsYWJsZVNraWxscykpIHtcbiAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9rZW5Ecm9wTW9kZScpKSB7XG4gICAgICAgIGNhc2UgJ2Fzayc6XG4gICAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5UaXRsZScpLFxuICAgICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuUHJvbXB0JyksXG4gICAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkJ1dHRvblJvbGwnKSxcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5Sb2xsZWQnLCB7IG5hbWU6IHRva2VuRG9jdW1lbnQub2JqZWN0LmFjdG9yLm5hbWUgfSkpXG4gICAgICAgICAgICAgICAgICAgIHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5sb2NrZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdmVyYWdlOiB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkJ1dHRvbkF2ZXJhZ2UnKSxcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5hdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5BdmVyYWdlZCcsIHsgbmFtZTogdG9rZW5Eb2N1bWVudC5vYmplY3QuYWN0b3IubmFtZSB9KSlcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmxvY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNraXA6IHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgICAgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLnJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuUm9sbGVkJywgeyBuYW1lOiB0b2tlbkRvY3VtZW50Lm9iamVjdC5hY3Rvci5uYW1lIH0pKVxuICAgICAgICAgIHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5sb2NrZWQgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdhdmVyYWdlJzpcbiAgICAgICAgICB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5BdmVyYWdlZCcsIHsgbmFtZTogdG9rZW5Eb2N1bWVudC5vYmplY3QuYWN0b3IubmFtZSB9KSlcbiAgICAgICAgICB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IubG9ja2VkID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnaWdub3JlJzpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2RpY2VTb05pY2VSZWFkeScsIGRpY2UzZCA9PiB7XG4gICAgZGljZTNkLmFkZERpY2VQcmVzZXQoe1xuICAgICAgdHlwZTogJ2R0JyxcbiAgICAgIGxhYmVsczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCcsICc2MCcsICc3MCcsICc4MCcsICc5MCcsICcwMCddLFxuICAgICAgZm9udFNjYWxlOiAwLjc1LFxuICAgICAgc3lzdGVtOiAnc3RhbmRhcmQnXG4gICAgfSlcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XG4gICAgICB0eXBlOiAnZG8nLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9KVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdHcm91cE1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL2NvYzctZ3JvdXAtbWVzc2FnZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICBDb0M3Q2hhdC5yZW5kZXJNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXG4gICAgQ29DN0NoYXQucmVuZGVyQ2hhdE1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbiAgICBpZiAodHlwZW9mIGFwcC5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBDb0M3R3JvdXBNZXNzYWdlLnJlbmRlckNoYXRNZXNzYWdlKGFwcCwgaHRtbCwgZGF0YSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyRGlhbG9nJywgKGRpYWxvZywgaHRtbCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBodG1sLmZpbmQoJ2Zvcm0nKVxuICAgIGlmIChmb3JtLmlzKCcjZG9jdW1lbnQtY3JlYXRlJykgJiYgZm9ybS5maW5kKCdzZWxlY3QnKS5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IGVudGl0eUNyZWF0ZVNlbGVjdFRhZyA9IGZvcm0uZmluZChcIltuYW1lPSd0eXBlJ11cIilcbiAgICAgIGNvbnN0IGVudGl0eVNvcnRlZExpc3QgPSBbXVxuICAgICAgY29uc3Qgc2hvd0V4cGVyaW1lbnRhbCA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAgICdDb0M3JyxcbiAgICAgICAgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJ1xuICAgICAgKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmNoaWxkcmVuKCkuZWFjaCgobywgZW50aXR5T3B0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGVudGl0eU9wdGlvbi50ZXh0Q29udGVudD8uY2FwaXRhbGl6ZSgpXG4gICAgICAgIGlmIChnYW1lLmkxOG4uaGFzKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApKSB7XG4gICAgICAgICAgZW50aXR5T3B0aW9uLnRleHRDb250ZW50ID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3dFeHBlcmltZW50YWwgfHwgIVsndmVoaWNsZSddLmluY2x1ZGVzKGVudGl0eU9wdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnB1c2goZW50aXR5T3B0aW9uKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmVtcHR5KClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5hcHBlbmQoXG4gICAgICAgIGVudGl0eVNvcnRlZExpc3Quc29ydCgoZmlyc3QsIHNlY29uZCkgPT5cbiAgICAgICAgICBmaXJzdC5pbm5lclRleHQubG9jYWxlQ29tcGFyZShzZWNvbmQuaW5uZXJUZXh0KVxuICAgICAgICApXG4gICAgICApXG4gICAgICBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYWN0b3InKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2NoYXJhY3RlcicpXG4gICAgICB9IGVsc2UgaWYgKGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoKSA9PT0gJ2Jvb2snKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2l0ZW0nKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclBhdXNlJywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLnJlbW92ZSgpXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlVGV4dCcpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2gzJykuaHRtbChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGxheWVyTGlzdCcsIChwbGF5ZXJMaXN0LCBodG1sLCBkYXRhKSA9PiB7XG4gICAgJCgnPGg0PicpLmFwcGVuZCgnPGRpdj48aSBjbGFzcz1cImZhLXJlZ3VsYXIgZmEtY2FsZW5kYXJcIj48L2k+JyArIGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW2dhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJyldID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpIH0pICsgJzwvZGl2PicpLmluc2VydEFmdGVyKCQoJ2gzJywgaHRtbCkpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJSZWFsUm9sbCcsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgICBmb3IgKGNvbnN0IHRlcm0gaW4gb3B0aW9ucy5kaWVUZXJtcykge1xuICAgICAgZm9yIChjb25zdCBpbnB1dCBpbiBvcHRpb25zLmRpZVRlcm1zW3Rlcm1dLmlucHV0cykge1xuICAgICAgICBpZiAob3B0aW9ucy5kaWVUZXJtc1t0ZXJtXSBpbnN0YW5jZW9mIENvQzdEZWNhZGVyRGllKSB7XG4gICAgICAgICAgY29uc3QgdGFnID0gaHRtbC5maW5kKCdbbmFtZT1cIicgKyB0ZXJtICsgJy4nICsgaW5wdXQgKyAnXCJdJylcbiAgICAgICAgICBpZiAodGFnLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGFnWzBdLnBsYWNlaG9sZGVyID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlYWxSb2xsRGVjYWRlclBsYWNlaG9sZGVyTmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyU2V0dGluZ3NDb25maWcnLCAoYXBwLCBodG1sLCB1c2VyKSA9PiB7XG4gICAgQ29DN0RpcmVjdG9yeVBpY2tlci5wcm9jZXNzSHRtbChodG1sKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHNvY2tldGxpYiwgdWkgKi9cbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIENvQzdTb2NrZXQgKCkge1xuICBnYW1lLkNvQzdzb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oJ0NvQzcnKVxuICBnYW1lLkNvQzdzb2NrZXQucmVnaXN0ZXIoJ2dtY3JlYXRlbWVzc2FnZWFzJywgZ21jcmVhdGVtZXNzYWdlYXMpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ210cmFkZWl0ZW10bycsIGdtdHJhZGVpdGVtdG8pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtY3JlYXRlbWVzc2FnZWFzIChkYXRhKSB7XG4gIGNvbnN0IG1lbGVlVGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChcbiAgICBkYXRhLnRhcmdldEtleSxcbiAgICBkYXRhLm1lc3NhZ2VJZCxcbiAgICBkYXRhLmZhc3RGb3J3YXJkXG4gIClcbiAgbWVsZWVUYXJnZXQuaW5pdGlhdG9yS2V5ID0gZGF0YS5hY3RvcktleVxuICBjb25zdCBtZXNzYWdlID0gYXdhaXQgbWVsZWVUYXJnZXQuY3JlYXRlQ2hhdENhcmQoKVxuICByZXR1cm4gbWVzc2FnZVxufVxuXG5hc3luYyBmdW5jdGlvbiBnbXRyYWRlaXRlbXRvIChkYXRhKSB7XG4gIHRyeSB7XG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKGRhdGEuc2NlbmUpIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmUpLnRva2Vucy5nZXQoZGF0YS5hY3RvckZyb20pLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JGcm9tKVxuICAgIH1cbiAgICBjb25zdCBpdGVtID0gYWN0b3IuaXRlbXMuZ2V0KGRhdGEuaXRlbSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgZ2FtZS5hY3RvcnNcbiAgICAgIC5nZXQoZGF0YS5hY3RvclRvKVxuICAgICAgLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0udG9KU09OKCldKVxuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICBhY3Rvci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLmlkXSlcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cbiIsIi8qIGdsb2JhbCBmcm9tVXVpZCwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdHcm91cE1lc3NhZ2UgfSBmcm9tICcuL2NvYzctZ3JvdXAtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3lzdGVtU29ja2V0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2RhdGEudHlwZV0gICAgICAgICAgICAgICAgQWN0aW9uIHRvIHJ1blxuICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IFtkYXRhLmxpc3RlbmVyXSAgb25seSB0aGlzIHNwZWNmaWMgdXNlciBzaG91bGQgcnVuIHRoZSBhY3Rpb25cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyBhc3luYyBjYWxsU29ja2V0IChkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmxpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pZCA9PT0gZGF0YS5saXN0ZW5lcikge1xuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2NoYXJhY3Rlci13aXphcmQnOlxuICAgICAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YShkYXRhLnBheWxvYWQpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ29wZW4tY2hhcmFjdGVyJzpcbiAgICAgICAgICAgIGdhbWUuYWN0b3JzLmdldChkYXRhLnBheWxvYWQpLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdncm91cC1tZXNzYWdlLW5ldyc6XG4gICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLm5ld0dyb3VwTWVzc2FnZShkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdncm91cC1tZXNzYWdlLXJvbGwnOlxuICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtTXlSb2xscyhkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdncm91cC1tZXNzYWdlLXVwZGF0ZSc6XG4gICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZU1lc3NhZ2UoZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZTpcbiAgICAgICAgICAgIE9wcG9zZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGU6XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdpbnZva2UnOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YS5pdGVtKVxuICAgICAgICAgICAgICBpdGVtW2RhdGEubWV0aG9kXShkYXRhLmRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICd1cGRhdGVDaGFyJzpcbiAgICAgICAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgS2VlcGVyIGFjdGlvbiwgaWYgeW91IGFyZSBhIGtlZXBlciBydW4geW91cnNlbGYsIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBHTSBzaG93IGVycm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqL1xuICBzdGF0aWMgcmVxdWVzdEtlZXBlckFjdGlvbiAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgZGF0YS5saXN0ZW5lciA9IGdhbWUudXNlci5pZFxuICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGtlZXBlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+IHUuYWN0aXZlICYmIHUuaXNHTSlcbiAgICAgIGlmIChrZWVwZXJzLmxlbmd0aCkge1xuICAgICAgICBkYXRhLmxpc3RlbmVyID0ga2VlcGVyc1swXS5pZFxuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdLZWVwZXJVc2VyJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHVzZXIgYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHVzZXJJZCAgICAgIE9ubHkgdGhpcyB1c2VyIGlkIHNob3VsZCBydW4gdGhlIGFjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBlcnJvcklmTWlzc2luZyAgSWYgcmVxdWVzdGluZyBhIHNwZWNpZmljIHVzZXIgc2hvdWxkIHJ1biB0aGUgYWN0aW9uIGVycm9yIGlmIHVzZXIgbm90IGZvdW5kIC8gbG9nZ2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVTZWxmICAgICBJZiBydW5uaW5nIGFzIGFsbCB1c2VycyBzaG91bGQgdGhlIGN1cnJlbnQgdXNlciBhbHNvIHJ1biB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RVc2VyQWN0aW9uIChcbiAgICBkYXRhLFxuICAgIHsgdXNlcklkID0gbnVsbCwgZXJyb3JJZk1pc3NpbmcgPSB0cnVlLCBpbmNsdWRlU2VsZiA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGlmICh1c2VySWQgJiYgdHlwZW9mIHVzZXJJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh1c2VySWQgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICBkYXRhLmxpc3RlbmVyID0gZ2FtZS51c2VyLmlkXG4gICAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHVzZXJJZClcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyLmlkICE9PSAndW5kZWZpbmVkJyAmJiB1c2VyLmFjdGl2ZSkge1xuICAgICAgICAgIGRhdGEubGlzdGVuZXIgPSB1c2VyLmlkXG4gICAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgICB9IGVsc2UgaWYgKGVycm9ySWZNaXNzaW5nKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nVXNlcicpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbmNsdWRlU2VsZikge1xuICAgICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDb21iYXQsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSG9va3MsIEl0ZW1EaXJlY3RvcnkgKi9cbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdDb21iYXQsIHJvbGxJbml0aWF0aXZlIH0gZnJvbSAnLi9jb21iYXQuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBVcGRhdGVyIH0gZnJvbSAnLi91cGRhdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdNZW51IH0gZnJvbSAnLi9tZW51LmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2FudmFzIH0gZnJvbSAnLi9hcHBzL2NhbnZhcy5qcydcbmltcG9ydCB7IENvQzdTZXR0aW5nc0RpcmVjdG9yeSB9IGZyb20gJy4vc2V0dGluZ3MtZGlyZWN0b3J5LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgfSBmcm9tICcuL2NvbXBlbmRpdW0tZGlyZWN0b3J5LmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9yRGlyZWN0b3J5IH0gZnJvbSAnLi9hY3Rvci1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3SG9va3MgfSBmcm9tICcuL2hvb2tzL2luZGV4LmpzJ1xuaW1wb3J0ICogYXMgRGljZUJvdCBmcm9tICcuL2RpY2Vib3QuanMnXG5pbXBvcnQgJy4uL3N0eWxlcy9zeXN0ZW0vaW5kZXgubGVzcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi9pdGVtcy9jaGFzZS9zaGVldC5qcydcbmltcG9ydCB7IENvQzdTb2NrZXQgfSBmcm9tICcuL2hvb2tzL3NvY2tldC5qcydcbmltcG9ydCB7IENvQzdTeXN0ZW1Tb2NrZXQgfSBmcm9tICcuL2FwcHMvY29jNy1zeXN0ZW0tc29ja2V0LmpzJ1xuaW1wb3J0IHsgRHJvcEFjdG9yU2hlZXREYXRhIH0gZnJvbSAnLi9ob29rcy9kcm9wLWFjdG9yLXNoZWV0LWRhdGEuanMnXG5cbi8vIENhcmQgaW5pdFxuaW1wb3J0IHsgaW5pdEVDQyB9IGZyb20gJy4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcbmltcG9ydCB7IENoYXNlT2JzdGFjbGVDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRleHRNZW51IH0gZnJvbSAnLi9jb250ZXh0LW1lbnUuanMnXG5cbkhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgY29uc3Qgc3lzdGVtVGFiID0gJChhcHAuZm9ybSkuZmluZCgnLnRhYltkYXRhLXRhYj1zeXN0ZW1dJylcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUluaXREaWNlc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlSW5pdGlhdGl2ZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3RhbmJ5R01Sb2xsc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwudHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXRDYXJkcycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZW5hYmxlU3RhdHVzSWNvbnNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVNjZW5lJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5vdmVycmlkZUdhbWVBcnR3b3JrXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVHYW1lQXJ0d29yaycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheVBsYXllck5hbWVPblNoZWV0XScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVTaGVldCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcmVnYXJkVXNlUGVyUm91bmRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVdlYXBvbicpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3luY0RpY2UzZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGljZVNvTmljZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGVidWdtb2RlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVEZXZlbG9wZXJEZWJ1ZycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ3NlbGVjdFtuYW1lPUNvQzdcXFxcLmJvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVJvbGxUYWJsZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xuICAvLyBzeXN0ZW1UYWJcbiAgLy8gICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5jaGFzZVNob3dUb2tlbk1vdmVtZW50XScpXG4gIC8vICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgLy8gICAuYmVmb3JlKFxuICAvLyAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gIC8vICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGFzZVNldHRpbmdzJykgK1xuICAvLyAgICAgICAnPC9oMj4nXG4gIC8vICAgKVxufSlcblxuSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgZ2FtZS5Db0M3ID0ge1xuICAgIG1hY3Jvczoge1xuICAgICAgc2tpbGxDaGVjazogQ29DN1V0aWxpdGllcy5za2lsbENoZWNrTWFjcm8sXG4gICAgICB3ZWFwb25DaGVjazogQ29DN1V0aWxpdGllcy53ZWFwb25DaGVja01hY3JvLFxuICAgICAgY2hlY2s6IENvQzdVdGlsaXRpZXMuY2hlY2tNYWNyb1xuICAgIH0sXG4gICAgY2FyZHM6IHtcbiAgICAgIERhbWFnZUNhcmRcbiAgICB9LFxuICAgIGRldjoge1xuICAgICAgZGljZToge1xuICAgICAgICBhbHdheXNDcml0OiBmYWxzZSxcbiAgICAgICAgYWx3YXlzRnVtYmxlOiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgZXJhczogKGVyYSwgbmFtZSkgPT4ge1xuICAgICAgQ09DNy5lcmFzW2VyYV0gPSBuYW1lXG4gICAgfVxuICB9XG4gIENvbWJhdC5wcm90b3R5cGUucm9sbEluaXRpYXRpdmUgPSByb2xsSW5pdGlhdGl2ZVxufSlcblxuaW5pdEVDQyhDaGFzZU9ic3RhY2xlQ2FyZClcblxuSG9va3Mub24oJ3JlbmRlckNvbWJhdFRyYWNrZXInLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q29tYmF0LnJlbmRlckNvbWJhdFRyYWNrZXIoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5EaWNlQm90Lmxpc3RlbigpXG5Db0M3SG9va3MubGlzdGVuKClcblxuSG9va3Mub25jZSgnc29ja2V0bGliLnJlYWR5JywgQ29DN1NvY2tldClcblxuSG9va3Mub25jZSgnc2V0dXAnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIExvY2FsaXplIENPTkZJRyBvYmplY3RzIG9uY2UgdXAtZnJvbnRcbiAgY29uc3QgdG9Mb2NhbGl6ZSA9IFtcbiAgICAnc3BlbGxQcm9wZXJ0aWVzJyxcbiAgICAnYm9va1R5cGUnLFxuICAgICd0YWxlbnRUeXBlJyxcbiAgICAnb2NjdXBhdGlvblByb3BlcnRpZXMnLFxuICAgICdzdGF0dXNUeXBlJ1xuICBdXG5cbiAgZm9yIChjb25zdCBvIG9mIHRvTG9jYWxpemUpIHtcbiAgICBjb25zdCBsb2NhbGl6ZWQgPSBPYmplY3QuZW50cmllcyhDT0M3W29dKS5tYXAoZSA9PiB7XG4gICAgICByZXR1cm4gW2VbMF0sIGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKV1cbiAgICB9KVxuICAgIENPQzdbb10gPSBsb2NhbGl6ZWQucmVkdWNlKChvYmosIGUpID0+IHtcbiAgICAgIG9ialtlWzBdXSA9IGVbMV1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCB7fSlcbiAgfVxuXG4gIGxldCBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLmRlYWRcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgfVxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLnVuY29uc2Npb3VzXG4gIClcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xuICAgIENPTkZJRy5zdGF0dXNFZmZlY3RzW2VmZmVjdEluZGV4XS5pY29uID1cbiAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2tub2NrZWQtb3V0LXN0YXJzLnN2ZydcbiAgfVxuICAvLyBGb3VuZHJ5VlRUIHYxMFxuICBjb25zdCBlZmZlY3ROYW1lS2V5ID0gKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzExJykgPyAnbGFiZWwnIDogJ25hbWUnKVxuICBDT05GSUcuc3RhdHVzRWZmZWN0cy51bnNoaWZ0KFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmluZGVmSW5zYW5lLFxuICAgICAgW2VmZmVjdE5hbWVLZXldOiAnQ29DNy5JbnNhbml0eU5hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuQ3JpdGljYWxXb3VuZHMnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvYXJtLXNsaW5nLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5keWluZyxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuRHlpbmcnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgIH1cbiAgKVxufSlcblxuSG9va3Mub24oJ2NyZWF0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKGdhbWUudXNlcklkID09PSB1c2VySWQpIHtcbiAgICBjb25zdCBzdGF0dXNLZXkgPSBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleShkYXRhKVxuICAgIGlmIChzdGF0dXNLZXkpIHtcbiAgICAgIHN3aXRjaCAoc3RhdHVzS2V5KSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oc3RhdHVzS2V5LCB7XG4gICAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWxUaW1lID0gZGF0YS5mbGFncy5Db0M3Py5yZWFsVGltZVxuICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gbnVsbFxuICAgICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbj8ucm91bmRzXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24/LnNlY29uZHNcbiAgICAgICAgICAgICAgaWYgKCFpc05hTihkdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVhbFRpbWUsXG4gICAgICAgICAgICAgIGR1cmF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2RlbGV0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKGdhbWUudXNlcklkID09PSB1c2VySWQpIHtcbiAgICBjb25zdCBzdGF0dXNLZXkgPSBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleShkYXRhKVxuICAgIGlmIChzdGF0dXNLZXkpIHtcbiAgICAgIHN3aXRjaCAoc3RhdHVzS2V5KSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBkYXRhLnBhcmVudC51bnNldENvbmRpdGlvbihzdGF0dXNLZXksIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGl0ZW0gY2FsbGVkICdfX0NvQzdJbnRlcm5hbEl0ZW1fXydcbi8vIFRoaXMgaXRlbSBpcyB1c2VkIGZvciBpbnRlcm5hbCBwdXJwb3NlcyBhbmQgc2hvdWxkIG5vdCBiZSBzZWVuIGJ5IGFueW9uZVxuSG9va3Mub24oJ2NoYW5nZVNpZGViYXJUYWInLCBkaXJlY3RvcnkgPT4ge1xuICBpZiAoZGlyZWN0b3J5IGluc3RhbmNlb2YgSXRlbURpcmVjdG9yeSkge1xuICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmZpbmQoaSA9PiBpLm5hbWUgPT09ICdfX0NvQzdJbnRlcm5hbEl0ZW1fXycpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBkaXJlY3RvcnkuX2VsZW1lbnRcbiAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gaHRtbC5maW5kKGBbZGF0YS1kb2N1bWVudC1pZD0nJHtpdGVtLmlkfSddYClcbiAgICAgIGlmIChpdGVtRWxlbWVudCkgaXRlbUVsZW1lbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2hvdGJhckRyb3AnLCAoYmFyLCBkYXRhLCBzbG90KSA9PiB7XG4gIHJldHVybiBDb0M3VXRpbGl0aWVzLmNyZWF0ZU1hY3JvKGJhciwgZGF0YSwgc2xvdClcbn0pXG5cbkhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NoYXQuY2hhdExpc3RlbmVycyhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigndXBkYXRlQ2hhdE1lc3NhZ2UnLCAoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKSA9PlxuICBDb0M3Q2hhdC5vblVwZGF0ZUNoYXRNZXNzYWdlKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcilcbilcblxuSG9va3Mub24oJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBVcGRhdGVyLmNoZWNrRm9yVXBkYXRlKClcblxuICAvLyBnYW1lLkNvQzcubWVudXMgPSBuZXcgQ29DN01lbnUoKTtcblxuICBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyKClcblxuICAvLyBzZXRHbG9iYWxDc3NWYXIoKVxuXG4gIGdhbWUuQ29DNy5za2lsbExpc3QgPSBhd2FpdCBnYW1lLnBhY2tzLmdldCgnQ29DNy5za2lsbHMnKT8uZ2V0RG9jdW1lbnRzKClcblxuICBnYW1lLnNvY2tldC5vbignc3lzdGVtLkNvQzcnLCBhc3luYyBkYXRhID0+IHtcbiAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgfSlcblxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhcIjogXCJQaG9iaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhcIjogXCJNYW5pYXMgaW5kZXhcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBtYW5pYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGVcIjogXCJTYW1wbGUgcGhvYmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlXCI6IFwiU2FtcGxlIE1hbmlhcyB0YWJsZVwiLFxuXG4gIGZ1bmN0aW9uIF90YWJsZVNldHRpbmdzQ2hhbmdlZCAodGFibGUsIGlkKSB7XG4gICAgaWYgKGlkID09PSAnbm9uZScpIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gbnVsbFxuICAgIGVsc2UgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBnYW1lLnRhYmxlcy5nZXQoaWQpXG4gIH1cblxuICAvLyBmdW5jdGlvbiBfdGFibGVJbmRleENoYW5nZWQoIHRhYmxlLCBpbmRleCl7XG4gIC8vICBnYW1lLkNvQzcudGFibGVzW3RhYmxlXT1pbmRleDtcbiAgLy8gfVxuXG4gIGNvbnN0IHRhYmxlQ2hvaWNlID0geyBub25lOiAnU0VUVElOR1MuTGV0S2VlcGVyRGVjaWRlJyB9XG4gIGZvciAoY29uc3QgdCBvZiBnYW1lLnRhYmxlcykge1xuICAgIHRhYmxlQ2hvaWNlW3QuX2lkXSA9IHQubmFtZVxuICB9XG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ25vbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcbiAgICBvbkNoYW5nZTogaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCdib3V0T2ZNYWRuZXNzX1N1bW1hcnknLCBpZClcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19SZWFsVGltZScsIGlkKVxuICB9KVxuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLFxuICAvLyAgaGludDogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50JyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogOSxcbiAgLy8gIHR5cGU6IE51bWJlcixcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlSW5kZXhDaGFuZ2VkKCAncGhvYmlhc0luZGV4JywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc01hbmlhc0luZGV4Jyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50JyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogMTAsXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ21hbmlhc0luZGV4JywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlJyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogJ25vbmUnLFxuICAvLyAgdHlwZTogU3RyaW5nLFxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCggJ3Bob2JpYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzYW1wbGVNYW5pYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlJyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogJ25vbmUnLFxuICAvLyAgdHlwZTogU3RyaW5nLFxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCggJ21hbmlhcycsIGlkKVxuICAvLyB9KTtcblxuICBnYW1lLkNvQzcudGFibGVzID0ge1xuICAgIGJvdXRPZk1hZG5lc3NfU3VtbWFyeTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKSA9PT0gJ25vbmUnXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICAgICAgKSxcbiAgICBib3V0T2ZNYWRuZXNzX1JlYWxUaW1lOlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKSA9PT0gJ25vbmUnXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpXG4gICAgICAgIClcbiAgICAvLyBtYW5pYXNJbmRleDogZ2Uuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzSW5kZXg6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcpLFxuICAgIC8vIHBob2JpYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKSxcbiAgICAvLyBtYW5pYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSksXG4gIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVBY3RvcicsIChjcmVhdGVEYXRhKSA9PiBDb0NBY3Rvci5pbml0VG9rZW4oIGNyZWF0ZURhdGEpKTtcblxuSG9va3Mub24oXG4gICdyZW5kZXJDb0M3Q2hhc2VTaGVldCcsXG4gIC8qKiBhc3luYyAqLyAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIC8qKiBhd2FpdCAqLyBDb0M3Q2hhc2VTaGVldC5zZXRTY3JvbGwoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5Ib29rcy5vbignY2xvc2VDb0M3Q2hhc2VTaGVldCcsIChhcHAsIGh0bWwpID0+XG4gIENvQzdDaGFzZVNoZWV0Lm9uQ2xvc2UoYXBwLCBodG1sKVxuKVxuXG4vLyBDYWxsZWQgb24gY2xvc2luZyBhIGNoYXJhY3RlciBzaGVldCB0byBsb2NrIGl0IG9uIGdldHRpbmcgaXQgdG8gZGlzcGxheSB2YWx1ZXNcbkhvb2tzLm9uKCdjbG9zZUFjdG9yU2hlZXQnLCBjaGFyYWN0ZXJTaGVldCA9PiBjaGFyYWN0ZXJTaGVldC5vbkNsb3NlU2hlZXQoKSlcbkhvb2tzLm9uKCdyZW5kZXJDb0M3Q3JlYXR1cmVTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDcmVhdHVyZVNoZWV0LmZvcmNlQXV0byhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigncmVuZGVyQ29DN05QQ1NoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN05QQ1NoZWV0LmZvcmNlQXV0byhhcHAsIGh0bWwsIGRhdGEpXG4pXG4vLyBIb29rcy5vbigndXBkYXRlQWN0b3InLCAoYWN0b3IsIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZUFjdG9yKCBhY3RvciwgZGF0YVVwZGF0ZSkpO1xuLy8gSG9va3Mub24oJ3VwZGF0ZVRva2VuJywgKHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSkgPT4gQ29DQWN0b3IudXBkYXRlVG9rZW4oIHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSkpO1xuXG5Ib29rcy5vbignY2hhdE1lc3NhZ2UnLCBDb0M3VXRpbGl0aWVzLlBhcnNlQ2hhdEVudHJ5KVxuLy8gSG9va3Mub24oJ3ByZUNyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbignY3JlYXRlVG9rZW4nLCAoIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpID0+IENvQ0FjdG9yLnByZUNyZWF0ZVRva2VuKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSlcbi8vIEhvb2tzLm9uKFwicmVuZGVyQ2hhdExvZ1wiLCAoYXBwLCBodG1sLCBkYXRhKSA9PiBDb0M3SXRlbS5jaGF0TGlzdGVuZXJzKGh0bWwpKTtcblxuSG9va3Mub24oJ2dldFNjZW5lQ29udHJvbEJ1dHRvbnMnLCAoLyogY29udHJvbHMgKi8pID0+IHtcbiAgLy8gaWYoIGdhbWUudXNlci5pc0dNKXtcbiAgLy8gIGxldCBncm91cCA9IGNvbnRyb2xzLmZpbmQoYiA9PiBiLm5hbWUgPT0gJ3Rva2VuJyk7XG4gIC8vICBncm91cC50b29scy5wdXNoKHtcbiAgLy8gICAgdG9nZ2xlOiB0cnVlLFxuICAvLyAgICBpY29uIDogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAvLyAgICBuYW1lOiAnZGV2cGhhc2UnLFxuICAvLyAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuRGV2UGhhc2VFbmFibGVkJyk6IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKClcbiAgLy8gIH0pO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmFzIGZhLXVzZXItZWRpdCcsXG4gIC8vICAgIG5hbWU6ICdjaGFyY3JlYXRlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJyksXG4gIC8vICAgIG9uQ2xpY2sgOmFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKClcbiAgLy8gIH0pO1xuICAvLyB9XG59KVxuXG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVDb250cm9scycsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcbi8vIEhvb2tzLm9uKCdyZW5kZXJTY2VuZU5hdmlnYXRpb24nLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG4vLyBTaGVldCBjc3Mgb3B0aW9uc1xuLy8gSG9va3Mub24oJ3JlbmRlckNvQzdDaGFyYWN0ZXJTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldCk7XG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldClcbkhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpXG5cbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgQ29DN01lbnUuZ2V0QnV0dG9ucylcbkhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgQ29DN01lbnUucmVuZGVyQ29udHJvbHMpXG5cbkhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdDYW52YXMub25Ecm9wU29tZXRoaW5nKVxuXG5Ib29rcy5vbignZHJvcEFjdG9yU2hlZXREYXRhJywgRHJvcEFjdG9yU2hlZXREYXRhKVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyICgpIHtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENvQzdDb250ZXh0TWVudS5jbG9zZUFsbClcbiAgYm9keS5vbignY2xpY2snLCAnYS5jb2M3LWlubGluZS1jaGVjaycsIENvQzdDaGVjay5fb25DbGlja0lubGluZVJvbGwpXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF9vbkxlZnRDbGljaylcbn1cblxuZnVuY3Rpb24gX29uTGVmdENsaWNrIChldmVudCkge1xuICByZXR1cm4gZXZlbnQuc2hpZnRLZXlcbn1cblxuQ09ORklHLnVpLnNldHRpbmdzID0gQ29DN1NldHRpbmdzRGlyZWN0b3J5XG5DT05GSUcudWkuY29tcGVuZGl1bSA9IENvQzdDb21wZW5kaXVtRGlyZWN0b3J5XG5DT05GSUcudWkuYWN0b3JzID0gQ29DN0FjdG9yRGlyZWN0b3J5XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIEhvb2tzLCBSb2xsLCB1aSAqL1xuXG4vKipcbiAqQ2FsbG9mQ3RodWxodSg3dGhFZC4pIERlZmluZSB5b3VyIG93biBjb21tYW5kc1xuICpIZXJlLCB3ZSByZWNlaXZlIHRoZSBjaGF0IE1lc3NhZ2VzIGFuZCBkZXRlcm1pbmUgZWFjaCBjb21tYW5kLlxuICpbL0NDXURlZmluZSBhIGNvbW1hbmQgdG8ganVkZ2UgYSBub3JtYWwgZGljZS5cbiAqWy9DQlJdIENvbW1hbmQgdG8gZGVmaW5lIHRoZSBkZWNpc2lvbiBvbiBjb21iaW5hdGlvbiByb2xscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdjaGF0TWVzc2FnZScsIChodG1sLCBjb250ZW50KSA9PiB7XG4gICAgLy8gSSdtIGN1cnJlbnRseSB1c2luZyBpdCBmb3IgdGVzdGluZyBib251cyBkaWNlLlxuICAgIGlmIChjb250ZW50Lm1hdGNoKC9eXFwvKGNicnxjYykvaSkpIHtcbiAgICAgIC8vIEV4dHJhY3RpbmcgbnVtYmVycyBmcm9tIGNvbWJpbmF0aW9uIHJvbGxzXG4gICAgICBjb25zdCBjb21tYW5kcyA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKS9nKVxuICAgICAgaWYgKGNvbW1hbmRzKSB7XG4gICAgICAgIG5ldyBSb2xsKCcxZDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KS50aGVuKHIgPT4ge1xuICAgICAgICAgIGNvbnN0IHMgPSByLnJlc3VsdFxuICAgICAgICAgIGNvbnN0IHJlcyA9IGNvbW1hbmRzXG4gICAgICAgICAgICAubWFwKG0gPT4ge1xuICAgICAgICAgICAgICBsZXQgcmVzID0gJydcbiAgICAgICAgICAgICAgaWYgKHMgPD0gMSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gMTAwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA8PSBtIC8gNSkge1xuICAgICAgICAgICAgICAgIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtIC8gMikge1xuICAgICAgICAgICAgICAgIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDk2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG0gPCA1MCkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgICAgZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIH0gZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgZmlyc3QgcmVzdWx0cy5cbiAgICAgICAgICAgICAgcmVzICs9ICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWx1ZScpICsgJyAnICsgbVxuICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oJyAvICcpXG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiByZXNcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIGNvbW1hbmQnKVxuICAgICAgfVxuICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIGVycm9ycyBpbiB0aGUgY29tbWFuZC5cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5leHBvcnQgZnVuY3Rpb24gRHJvcEFjdG9yU2hlZXREYXRhIChhY3Rvciwgc2hlZXQsIGRhdGEpIHtcbiAgaWYgKGRhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGRhdGEuYWN0b3JJZCkge1xuICAgIGlmIChhY3Rvci5kYXRhLl9pZCA9PT0gZGF0YS5hY3RvcklkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgbGV0IGFjdG9yRnJvbSA9IG51bGxcbiAgICBpZiAoZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZCkge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmVJZCkudG9rZW5zLmdldChkYXRhLnRva2VuSWQpLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yRnJvbSA9IGdhbWUuYWN0b3JzLmdldChkYXRhLmFjdG9ySWQpXG4gICAgfVxuICAgIHN3aXRjaCAoYWN0b3IuZGF0YS50eXBlKSB7XG4gICAgICBjYXNlICdjaGFyYWN0ZXInOlxuICAgICAgY2FzZSAnbnBjJzpcbiAgICAgIGNhc2UgJ2NyZWF0dXJlJzpcbiAgICAgICAgaWYgKCFbJ2NoYXNlJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ZlaGljbGUnOlxuICAgICAgICByZXR1cm5cbiAgICAgIGNhc2UgJ2NvbnRhaW5lcic6XG4gICAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFjdG9yRnJvbSkge1xuICAgICAgYWN0b3JGcm9tLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGEuZGF0YS5faWRdKVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNPQzciLCJzdGFuZGFyZCIsIm1vZGVybiIsIm1vZGVyblB1bHAiLCJwdWxwIiwiZG93bkRhcmtlclRyYWlscyIsImRvd25EYXJrZXJUcmFpbHNQdWxwIiwiZGFya0FnZXMiLCJkYXJrQWdlc1B1bHAiLCJyZWdlbmN5IiwicmVnZW5jeVB1bHAiLCJnYXNMaWdodCIsImludmljdHVzIiwiZGVjaW1hbExlZnQiLCJkZWNpbWFsUmlnaHQiLCJpbnRlZ2VyTGVmdCIsImludGVnZXJSaWdodCIsImxzZCIsInJvbWFuIiwibm9uZSIsImFzc2VzIiwic2VzdGVydGlpIiwicXVpbmFyaWkiLCJkZW5hcmlpIiwiZCIsInMiLCJ2YWx1ZSIsIm11bHRpcGxpZXIiLCJuYW1lIiwiZmlsdGVyIiwic3RyIiwiY29uIiwic2l6IiwiZGV4IiwiYXBwIiwiaW50IiwicG93IiwiZWR1Iiwibm9hZGp1c3RtZW50cyIsIm5veHBnYWluIiwic3BlY2lhbCIsInJhcml0eSIsInB1c2giLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJyZXF1aXJlc25hbWUiLCJrZWVwYmFzZXZhbHVlIiwicGlja25hbWVvbmx5Iiwib25seW9uZSIsIm1lbGVlIiwicm5nZCIsIm1udnIiLCJ0aHJvd24iLCJzaG90Z3VuIiwiZGJybCIsImltcGwiLCJicnN0IiwiYXV0byIsImFoZGIiLCJhZGRiIiwic2xudCIsInNwY2wiLCJtb250IiwiYmxzdCIsInN0dW4iLCJyYXJlIiwiYnVybiIsImNhbGwiLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwiZm9ybXVsYSIsImFjdG9yIiwiYWN0b3JzaGVldCIsInN0YXR1cyIsInRlbXBvSW5zYW5lIiwiaW5kZWZJbnNhbmUiLCJ1bmNvbnNjaW91cyIsImNyaXRpY2FsV291bmRzIiwiZHlpbmciLCJwcm9uZSIsImRlYWQiLCJuZXdCb29rTmFtZSIsIm5ld1NraWxsTmFtZSIsIm5ld1NwZWxsTmFtZSIsIm5ld0l0ZW1OYW1lIiwibmV3V2VhcG9uTmFtZSIsImNyZWF0dXJlRmlnaHRpbmdTa2lsbCIsImZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIiwiZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSIsImNvbWJhdENhcmRzIiwiZmlnaHRCYWNrIiwiZG9kZ2UiLCJtYW5ldXZlciIsIm5vUmVzcG9uc2UiLCJDb0M3QWN0aXZlRWZmZWN0IiwiQWN0aXZlRWZmZWN0IiwiYXBwbHkiLCJjaGFuZ2UiLCJrZXkiLCJpc05hTiIsInN5c3RlbSIsImF0dHJpYnMiLCJhcm1vciIsIk51bWJlciIsImRiIiwiU3RyaW5nIiwic3VwZXIiLCJvbk1hbmFnZUFjdGl2ZUVmZmVjdCIsImV2ZW50Iiwib3duZXIiLCJwcmV2ZW50RGVmYXVsdCIsImEiLCJjdXJyZW50VGFyZ2V0IiwibGkiLCJjbG9zZXN0IiwiZWZmZWN0IiwiZGF0YXNldCIsImVmZmVjdElkIiwiZWZmZWN0cyIsImdldCIsImFjdGlvbiIsImNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwibGFiZWwiLCJnYW1lIiwiaTE4biIsImxvY2FsaXplIiwiaWNvbiIsIm9yaWdpbiIsInV1aWQiLCJlZmZlY3RUeXBlIiwidW5kZWZpbmVkIiwiZGlzYWJsZWQiLCJzaGVldCIsInJlbmRlciIsImRlbGV0ZSIsInVwZGF0ZSIsIl9wcmVwYXJlRHVyYXRpb24iLCJkdXJhdGlvbiIsInR5cGUiLCJzZWNvbmRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJmaWx0ZXJBY3RpdmVFZmZlY3RzIiwiY29uZGl0aW9uTmFtZSIsImZvdW5kcnkiLCJ1dGlscyIsImlzTmV3ZXJWZXJzaW9uIiwidmVyc2lvbiIsInN0YXR1c2VzIiwiaGFzIiwiZmxhZ3MiLCJjb3JlIiwic3RhdHVzSWQiLCJnZXRTdGF0dXNLZXkiLCJvcHRpb25zIiwic2l6ZSIsInZhbHVlcyIsImdldEZsYWciLCJmaW5kIiwidiIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiaXNTdGF0dXMiLCJ0aGlzIiwicHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwidGVtcG9yYXJ5IiwicGFzc2l2ZSIsImluYWN0aXZlIiwic3VwcHJlc3NlZCIsImluZm8iLCJlIiwiaXNTdXBwcmVzc2VkIiwiaXNUZW1wb3JhcnkiLCJoaWRkZW4iLCJsZW5ndGgiLCJwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsImNvdW50IiwiYWN0aXZlIiwiX2dldFNvdXJjZU5hbWUiLCJleHBlbmRlZCIsIkNvQzdEaWNlIiwicm9sbCIsIm1vZGlmIiwicm9sbE1vZGUiLCJoaWRlRGljZSIsImFsdGVybmF0aXZlRGljZSIsIm1vZHVsZXMiLCJzZXR0aW5ncyIsIkNvQzciLCJkZXYiLCJkaWNlIiwiYWx3YXlzQ3JpdCIsIlJvbGwiLCJmcm9tRGF0YSIsImNyaXQwMSIsImFsd2F5c0Z1bWJsZSIsImZ1bWJsZTk5IiwicmVwZWF0IiwiTWF0aCIsImFicyIsImFzeW5jIiwicmVzdWx0IiwidW5pdCIsInRvdGFsIiwicmVzdWx0cyIsInRlbnMiLCJDT05GSUciLCJEaWNlIiwidGVybXMiLCJ0IiwiaW5jbHVkZXMiLCJtYXgiLCJtaW4iLCJzaG93Um9sbERpY2UzZCIsInN5bmNEaWNlIiwiY2hhdERhdGEiLCJ3aGlzcGVyIiwiYmxpbmQiLCJDaGF0TWVzc2FnZSIsImFwcGx5Um9sbE1vZGUiLCJkaWNlM2QiLCJzaG93Rm9yUm9sbCIsInVzZXIiLCJjb21iaW5lZFJvbGwiLCJwb29sIiwia2V5cyIsIm1hcCIsInBhcnNlSW50IiwicGVuYWx0eURpY2UiLCJib251c0RpY2UiLCJoYXNEU04iLCJqb2luIiwiZ3JvdXBzIiwiYmFzZURpZSIsImJhc2VTZXQiLCJvdXRwdXQiLCJtb2RpZmllciIsIm9mZnNldCIsInN0YXRpYyIsImNsYXNzIiwiZXZhbHVhdGVkIiwibnVtYmVyIiwiZmFjZXMiLCJtb2RpZmllcnMiLCJvcGVyYXRvciIsIkNvQzdJdGVtIiwiSXRlbSIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNvbnRleHQiLCJkb2N1bWVudENsYXNzZXMiLCJleHRlbmRlZCIsImltZyIsIl9jcmVhdGVEb2N1bWVudExpbmsiLCJldmVudERhdGEiLCJtYXRjaCIsInJlbGF0aXZlVG8iLCJKb3VybmFsRW50cnlQYWdlIiwiZG9jdW1lbnRDbGFzcyIsIml0ZW0iLCJmcm9tVXVpZCIsImljb25MYW5ndWFnZSIsIm1hbGZ1bmN0aW9uIiwidG9nZ2xlUHJvcGVydHkiLCJwcm9wZXJ0eUlkIiwib3ZlcnJpZGUiLCJmaXJlYXJtcyIsImNoZWNrZWRQcm9wcyIsImVyYXMiLCJDb0NJREVkaXRvciIsImVyYVRvZ2dsZSIsInByb3BlcnRpZXMiLCJza2lsbE5hbWUiLCJwYXJ0cyIsImdldE5hbWVQYXJ0c1NwZWMiLCJzcGVjaWFsaXphdGlvbiIsIm1lbGVlV2VhcG9uIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJ0aGVuIiwiaGFzUHJvcGVydHkiLCJpc0luY2x1ZGVkSW5TZXQiLCJzaG9ydE5hbWUiLCJ1cGRhdGVSb2xsIiwic3BlY05hbWVSZWdleCIsIlJlZ0V4cCIsIkNvQzdVdGlsaXRpZXMiLCJxdW90ZVJlZ0V4cCIsImdldE5hbWVXaXRob3V0U3BlYyIsImlzQW55U3BlYyIsInRvTG93ZXJDYXNlIiwic2tpbGwiLCJndWVzc05hbWVQYXJ0cyIsImNoZWNrU2tpbGxQcm9wZXJ0aWVzIiwic2V0IiwiaW5kZXhPZiIsImZsYWdGb3JEZXZlbG9wZW1lbnQiLCJpc0dNIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiZGV2ZWxvcGVtZW50RmxhZyIsImdldEl0ZW1GbGFnIiwidG9nZ2xlSXRlbUZsYWciLCJmbGFnTmFtZSIsImVyYXNlQWRqdXN0bWVudCIsImZsYWdWYWx1ZSIsInVpIiwibm90aWZpY2F0aW9ucyIsInNldEl0ZW1GbGFnIiwidW5zZXRJdGVtRmxhZyIsImxvY2tlZCIsInVzZXNBbHRlcm5hdGl2ZVNraWxsIiwibWF4VXNlc1BlclJvdW5kIiwibXVsdGlTaG90IiwidXNlc1BlclJvdW5kIiwic2luZ2xlU2hvdCIsIm5vcm1hbCIsInVzZXNQZXJSb3VuZFN0cmluZyIsImJ1cnN0IiwibXVsdGlwbGVTaG90cyIsImJhc2VSYW5nZSIsInJhbmdlIiwibG9uZ1JhbmdlIiwibG9uZyIsImV4dHJlbWVSYW5nZSIsImV4dHJlbWUiLCJza2lsbFByb3BlcnRpZXMiLCJlbnRyaWVzIiwiY2FsY3VsYXRlQmFzZSIsImJhc2UiLCJwYXJzZWQiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwiZ2V0UHJvcGVydHkiLCJmbG9vciIsImV2YWx1YXRlIiwibWF4aW1pemUiLCJlcnIiLCJfYmFzZSIsImFzeW5jQmFzZSIsImNvbnNvbGUiLCJwYXJlbnQiLCJnZXRCdWxsZXRMZWZ0IiwiYW1tbyIsInNldEJ1bGxldHMiLCJyZWxvYWQiLCJtYXhCdWxsZXQiLCJidWxsZXRzIiwiYWRkQnVsbGV0IiwibWF4QnVsbGV0cyIsInNob290QnVsbGV0cyIsIngiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwic2tpbGxMaXN0IiwiY29uY2F0IiwicmVkdWNlIiwibmV3QXJyYXkiLCJzb3J0Iiwic29ydEJ5TmFtZUtleSIsIl9nZXRDaGF0Q2FyZEFjdG9yIiwiY2FyZCIsInRva2VuS2V5IiwidG9rZW5JZCIsInNjZW5lSWQiLCJzcGxpdCIsImFjdG9ycyIsInRva2VucyIsInNjZW5lIiwic2NlbmVzIiwidG9rZW5EYXRhIiwiZ2V0RW1iZWRkZWREb2N1bWVudCIsIlRva2VuIiwiYWN0b3JJZCIsImdldENoYXREYXRhIiwiaHRtbE9wdGlvbnMiLCJkdXBsaWNhdGUiLCJkZXNjcmlwdGlvbiIsImxhYmVscyIsIlRleHRFZGl0b3IiLCJlbnJpY2hIVE1MIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwic2tpbGxMYWJlbCIsImZvdW5kIiwibWFpbiIsImlkIiwiaXRlbXMiLCJhbHRlcm5hdGl2IiwiY2FuQmVQdXNoZWQiLCJpbXBhbGUiLCJpc0RvZGdlIiwiY3JlYXRlSW5saW5lUm9sbCIsImNscyIsInRpdGxlIiwiZXNjYXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImsiLCJpbm5lckhUTUwiLCJpc0N0cmxLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImtleUNvZGUiLCJjaGF0SGVscGVyIiwiaHlwaGVuVG9DYW1lbENhc2UiLCJzdHJpbmciLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJjcmVhdGVNZXNzYWdlIiwibWVzc2FnZSIsIm1lc3NhZ2VEYXRhIiwiZmxhdm9yIiwic3BlYWtlciIsImdldFNwZWFrZXIiLCJDT05TVCIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImNvbnRlbnQiLCJjcmVhdGUiLCJtc2ciLCJjYW1lbENhc2VUb0h5cGhlbiIsImdldEFjdG9yRnJvbUtleSIsImlzRG9jdW1lbnRVdWlkIiwiaXNEb2N1bWVudFV1aWRQYWNrIiwiU2Zyb21VdWlkIiwidG9rZW4iLCJnZXRUb2tlbkZyb21LZXkiLCJnZXRTcGVha2VyRnJvbUtleSIsImFjdG9yS2V5IiwiYWxpYXMiLCJhdHRhY2hPYmplY3RUb0VsZW1lbnQiLCJvYmplY3QiLCJlbGVtZW50Iiwib2JqZWN0TmFtZSIsInByb3AiLCJnZXRPYmplY3RGcm9tRWxlbWVudCIsImRlc2VyaWFsaXplIiwib2JqIiwib2JqUHJvcCIsIm9iak5hbWUiLCJ0b1N0cmluZyIsInRva2VuRG9jIiwiZ2V0QWN0b3JUb2tlbiIsInByb3RvdHlwZVRva2VuIiwiZ2V0QWN0b3JJbWdGcm9tS2V5IiwidGV4dHVyZSIsInNyYyIsImdldERpc3RhbmNlIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImNhbnZhcyIsImdyaWQiLCJ1bml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJtZWFzdXJlRGlzdGFuY2VzIiwiZ3JpZFNwYWNlcyIsImVsZXZhdGlvbiIsInNxcnQiLCJ3YXJuIiwidG9ZYXJkcyIsIkNvQzdSb2xsIiwiZ2V0RnJvbUNhcmQiLCJyb2xsRGl2IiwicXVlcnlTZWxlY3RvciIsInJlc3VsdFR5cGUiLCJzdWNjZXNzTGV2ZWwiLCJDb0M3Q2hlY2siLCJyZWd1bGFyIiwiZm9ybWF0IiwiaGFyZCIsImNyaXRpY2FsIiwiZnVtYmxlIiwiZmFpbHVyZSIsIml0ZW1JZCIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiZ2V0RnJvbUVsZW1lbnQiLCJoYXNCb251cyIsImRpY2VNb2RpZmllciIsImJvbnVzIiwiYm9udXNUeXBlIiwidGVuRGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaWUiLCJzZWxlY3RlZCIsImlzTWF4IiwiaXNNaW4iLCJ1bml0RGllIiwiaW5jcmVhc2VTdWNjZXNzIiwiaXNsIiwibmV3U3VjY2VzTGV2ZWwiLCJsdWNrTmVlZGVkIiwibHVja05lZWRlZFR4dCIsImx1Y2tOZWVkZWRWYWx1ZSIsImdldEZyb21DaGVjayIsImNoZWNrIiwicm9sbFR5cGUiLCJzaWRlIiwicmVmTWVzc2FnZUlkIiwicmVmZXJlbmNlTWVzc2FnZUlkIiwiZGlmZmljdWx0eSIsImRpY2VNb2QiLCJyYXdWYWx1ZSIsImlzRnVtYmxlIiwiaXNDcml0aWNhbCIsImNoYXJhY3RlcmlzdGljIiwiaXNUb2tlbiIsImF0dGFjaENoZWNrVG9FbGVtZW50IiwiaHRtbEVsZW1lbnQiLCJhdHRhY2hUb0VsZW1lbnQiLCJDb0M3RGFtYWdlIiwiZ2V0TWFpbkRpZSIsImRhbWFnZVN0cmluZyIsImRhbWFnZSIsInJvbGxzIiwiciIsIkF2ZXJhZ2VQYXJlbnRoZXRpY2FsVGVybSIsIlBhcmVudGhldGljYWxUZXJtIiwiX2V2YWx1YXRlU3luYyIsIkF2ZXJhZ2VSb2xsIiwidGVybSIsIm1pbmltaXplIiwiZm9yRWFjaCIsIlJvbGxUZXJtIiwiRXJyb3IiLCJpc0ludGVybWVkaWF0ZSIsIl9kaWNlIiwiTnVtZXJpY1Rlcm0iLCJzaW1wbGlmeVRlcm1zIiwiX2V2YWx1YXRlZCIsIl90b3RhbCIsIl9ldmFsdWF0ZVRvdGFsIiwiX3NwbGl0UGFyZW50aGVzZXMiLCJfZm9ybXVsYSIsIl9zcGxpdEdyb3VwIiwib3BlblJlZ2V4cCIsIk9QRU5fUkVHRVhQIiwiY2xvc2VSZWdleHAiLCJDTE9TRV9SRUdFWFAiLCJvcGVuU3ltYm9sIiwiY2xvc2VTeW1ib2wiLCJvbkNsb3NlIiwiZ3JvdXAiLCJvcGVuIiwiZXhwcmVzc2lvbiIsImFyZ3MiLCJfc3BsaXRNYXRoQXJncyIsIk1hdGhUZXJtIiwiQWN0b3JQaWNrZXJEaWFsb2ciLCJGb3JtQXBwbGljYXRpb24iLCJkZWZhdWx0T3B0aW9ucyIsIm1lcmdlT2JqZWN0IiwiY2xhc3NlcyIsInRlbXBsYXRlIiwiY2xvc2VPblN1Ym1pdCIsIndpZHRoIiwiaGVpZ2h0IiwiYWN0aXZhdGVMaXN0ZW5lcnMiLCJodG1sIiwib24iLCJfb25QaWNrIiwiaG92ZXIiLCJfb25Ib3ZlckluIiwiX29uSG92ZXJPdXQiLCJfb25TdWJtaXRCdXR0b24iLCJsIiwicGFyZW50RWxlbWVudCIsImNoaWxkcmVuIiwidG9nZ2xlIiwiZW50cnlVdWlkIiwicmVhZHkiLCJpc1Zpc2libGUiLCJjb250cm9sbGVkIiwiaG92ZXJPdXRPdGhlcnMiLCJfaGlnaGxpZ2h0ZWQiLCJyZXNvbHZlIiwiY2xvc2UiLCJhbGxvd2VkVHlwZXMiLCJwbGFjZWFibGVzIiwib3duZXJzaGlwIiwiZGVmYXVsdCIsIkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMiLCJPV05FUiIsImZvdW5kSURzIiwib3B0aW9uIiwiaXNUb2tlbkRvY3VtZW50IiwiVG9rZW5Eb2N1bWVudCIsInBvcnRyYWl0IiwiY2FuUGluZyIsImNoYXJhY3RlciIsImRlZmF1bHRPcHRpb24iLCJQcm9taXNlIiwiQ29DN0dyb3VwTWVzc2FnZSIsInJlbW92ZVJvbGwiLCJtZXNzYWdlSWQiLCJtZXNzYWdlcyIsInJvbGxTdGF0dXNlcyIsIndoaWNoIiwidXBkYXRlcyIsInVwZGF0ZVRoZUdyb3VwTWVzc2FnZSIsInB1c2hNeVJvbGwiLCJnbUlkIiwiY2FuVXNlck1vZGlmeSIsImdldEFuSWRGb3JHbSIsInBlcmZvcm1Db21iaW5lZFJvbGwiLCJwdXNoaW5nIiwicGVyZm9ybU5vcm1hbFJvbGwiLCJzcGVuZE15THVjayIsImNvbXBsZXRlZCIsImx1Y2tBbW91bnQiLCJpbmRleCIsImx1Y2tUb1NwZW5kIiwiZ2V0QWN0b3IiLCJhY3RvclV1aWQiLCJzcGVuZEx1Y2siLCJlcnJvciIsImluY3JlYXNlTHVja1NwZW5kIiwiSlNPTlJvbGxEYXRhIiwic29ja2V0IiwiZW1pdCIsImxpc3RlbmVyIiwidXBncmFkZUNoZWNrIiwiZm9yY2VQYXNzIiwicm9sbERhdGEiLCJwYXJzZVJvbGxzIiwicXVpY2siLCJhc3NpZ24iLCJleHBhbmRPYmplY3QiLCJwZXJmb3JtRGVsZXRpb25zIiwiYWxsUm9sbHNDb21wbGV0ZWQiLCJpc1N1Y2Nlc3MiLCJpc0ZhaWx1cmUiLCJzdWNjZXNzZXMiLCJmYWlsdXJlcyIsImNvbWJpbmVkIiwiaXNUaWUiLCJpc0NvbWJhdCIsInJvbGxPcmRlciIsIkFycmF5IiwiZnJvbSIsIkludDhBcnJheSIsInN1YnN0ciIsInN1Y2Nlc3NMZXZlbHMiLCJkZWZlbmRlcklzRG9kZ2luZyIsInBhc3NlZCIsImlzRG9kZ2luZyIsImlzQXR0YWNrZXIiLCJhZHZhbnRhZ2VBdHRhY2tlciIsImFkdmFudGFnZURlZmVuZGVyIiwiYmVzdCIsIm5lZWRzVGllQnJlYWtlciIsInJlc3VsdFRleHQiLCJyb2xsSXNXaW5uZXIiLCJyb2xsSXNUaWUiLCJpc1dpbm5lciIsImlzTWFuZXV2ZXIiLCJvcHBvc2VkUm9sbFRpZUJyZWFrZXIiLCJiIiwibW9kaWZpZWRSZXN1bHQiLCJvZmZzZXRNYXgiLCJmYWlsZWQiLCJpIiwicmVuZGVyVGVtcGxhdGUiLCJnZXRUZW1wbGF0ZVBhdGgiLCJ1cGRhdGVUaGVNZXNzYWdlIiwiZ2V0Q2hlY2siLCJjaGVja0RhdGEiLCJ0aGVSb2xsIiwiZGVueVB1c2giLCJhdHRyaWJ1dGUiLCJwdXNoYWJsZSIsInBlcmZvcm1Sb2xsIiwiX3BlcmZvcm0iLCJmb3JjZURTTiIsImZpcnN0Iiwic2lsZW50IiwicGVyZm9ybU15Um9sbHMiLCJuYW1lUm9sbCIsInNldFRpbWVvdXQiLCJmdWxsTmFtZSIsInRhZ3MiLCJwZXJjZW50IiwibmV3R3JvdXBNZXNzYWdlIiwicm9sbHNCeVVzZXIiLCJyb2xsUmVxdWlyZXNOYW1lIiwiYXNVc2VySWQiLCJhdXRvUm9sbCIsInJvbGxpbmciLCJ0ZW1wbGF0ZURhdGEiLCJ1c2VySWQiLCJpc1VzZXJBY3RpdmUiLCJ1c2VycyIsIl9vblRvZ2dsZSIsImJ1dHRvbiIsImNvbnRhaW5zIiwiX29uQ2xpY2siLCJva2F5IiwicmVuZGVyQ2hhdE1lc3NhZ2UiLCJjYW5Nb2RpZnkiLCJnbSIsImFueSIsInJlbW92ZSIsImlkZW50aWZpZXIiLCJhcGkiLCJjb2NpZCIsImZyb21Db0NJRCIsIm0iLCJkaWZmaWN1bHR5TGV2ZWwiLCJ1bmtub3duIiwiZGVmYXVsdFV1aWQiLCJ1IiwiZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyIsInNob3J0IiwiY2hhcmFjdGVyaXN0aWNzIiwic2tpbGxzIiwiZ2V0SXRlbU9yQWRkIiwiaXNXZWFwb24iLCJjcmVhdGVHcm91cE1lc3NhZ2UiLCJjb25maWciLCJzaG93Q29tcGxldGVkUm9sbHMiLCJpc0VkaXRhYmxlIiwid2lubmVyUm9sbHNEYW1hZ2UiLCJ3YXNQdXNoZWQiLCJyb2xsUmVxdWlzaXRlcyIsInJvbGxhYmxlIiwiQ2hhdENhcmRBY3RvciIsImZhc3RGb3J3YXJkIiwiZGlzcGxheUFjdG9yT25DYXJkIiwiaXNCbGluZCIsIl9pc0JsaW5kIiwiX3JvbGxNb2RlIiwid2VhcG9uIiwidGFyZ2V0ZWRUb2tlbnMiLCJ0YXJnZXRzIiwidGFyZ2V0IiwidGFyZ2V0VG9rZW4iLCJ0YXJnZXRBY3RvciIsIl90YXJnZXRUb2tlbiIsIl90YXJnZXRLZXkiLCJwb3AiLCJfdGFyZ2V0QWN0b3IiLCJ0YXJnZXRLZXkiLCJoYXNUYXJnZXQiLCJnZXRXZWFwb25Ta2lsbHMiLCJ0YXJnZXRJbWciLCJ0YXJnZXROYW1lIiwiYWN0b3JJbWciLCJzYXkiLCJzcGVha2VyRGF0YSIsImdldFdoaXNwZXJSZWNpcGllbnRzIiwicmVwbGFjZXIiLCJTYW5DaGVja0NhcmQiLCJzYW5EYXRhIiwiQm9vbGVhbiIsInNhblJlYXNvbiIsInNhbk1vZGlmaWVyIiwic2FuRGlmZmljdWx0eSIsInN0YXRlIiwic2FuTG9zc1NvdXJjZSIsImludm9sdW50YXJ5QWN0aW9uIiwic2FuUm9sbGVkIiwic2FuQ2hlY2siLCJzYW5Mb3NzRm9ybXVsYSIsInNhbk1heCIsInNhbk1pbiIsInNhbkxvc3RUb1JlYXNvbiIsIm1heFBvc3NpYmxlU2FuTG9zcyIsIm1heExvc3NUb1NhblJlYXNvbiIsIm1heFNhbkxvc3MiLCJzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQiLCJmaXJzdEVuY291bnRlciIsIm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQiLCJpc0FjdG9yTG9vc2luZ1NhbiIsImhhc1RlbXBvSW5zYW5lIiwiaW1tdW5lVG9DcmVhdHVyZSIsImJvdXREdXJhdGlvblRleHQiLCJib3V0RHVyYXRpb24iLCJib3V0UmVhbFRpbWUiLCJib3V0U3VtbWFyeSIsInlvdUdhaW5DdGh1bGh1TXl0aG9zU3RyaW5nIiwibXl0aG9zR2FpbiIsImFkdmFuY2VTdGF0ZSIsImtlZXBDcmVhdHVyZVNhbkRhdGEiLCJmaW5pc2giLCJhcHBseVNhbkxvc3MiLCJib3V0UmVzdWx0IiwiZW50ZXJCb3V0T2ZNYWRuZXNzIiwiYm91dE9mTWFkbmVzc1Jlc29sdmVkIiwiYm91dE9mTWFkbmVzc092ZXIiLCJ0cmlnZ2VySW5zYW5pdHkiLCJ1bnNldENvbmRpdGlvbiIsImN0aHVsaHVNeXRob3NBd2FyZGVkIiwiYW1vdW50R2FpbmVkIiwiZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkiLCJjdGh1bGh1TXl0aG9zU2tpbGwiLCJvbGRWYWx1ZSIsImFkanVzdG1lbnRzIiwiZXhwZXJpZW5jZSIsImJ5cGFzc1JvbGxTYW4iLCJpc0J5cGFzc2VkIiwiaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQiLCJzYW5Mb3NzUm9sbGVkIiwiaWdub3JlU2FuQ2hlY2siLCJzYW5Mb3NzIiwicm9sbFNhbiIsImxpbWl0ZWRMb3NzVG9DcmVhdHVyZSIsImltbXVuZUFscmVhZHlJbkJvdXQiLCJzYW5Mb3NzQXBwbGllZCIsImludFJvbGxlZCIsImluc2FuaXR5Iiwicm9sbFNhbkxvc3MiLCJzYW5Mb3NzUm9sbCIsImxvb3NlU2FuIiwiYWN0b3JMb3N0U2FuIiwic2FuIiwicGVybWFuZW50bHlJbnNhbmUiLCJoYXNJbmRlZkluc2FuZSIsInNoYWtlbiIsImluc2FuaXR5VGFibGVSb2xsZWQiLCJkYWlseVNhbkxvc3MiLCJkYWlseVNhbkxpbWl0IiwidGVtcG9yYXJ5SW5zYW5lIiwiaW5kZWZpbml0ZWx5SW5zYW5lIiwibWVtb3J5UmVwcmVzc2VkIiwicm9sbEludCIsImludENoZWNrIiwiaW50RGlmZmljdWx0eSIsImludE1vZGlmaWVyIiwiYWxyZWFkeUluc2FuZSIsInNldENvbmRpdGlvbiIsImNsZWFyU2FuTG9zc1JlYXNvbiIsInNldFJlYXNvblNhbkxvc3MiLCJ1cGRhdGVDaGF0Q2FyZCIsIl9faW5saW5lU2FuQ2hlY2siLCJpbmxpbmVDaGVjayIsIm91dGVySFRNTCIsIl9faW5saW5lU2FuTG9zc1JvbGwiLCJfX2lubGluZUludENoZWNrIiwiaHRtbENhcmRFbGVtZW50IiwiJCIsInBhcnNlSFRNTCIsImNoYXRNZXNzYWdlIiwiY2hhdCIsInVwZGF0ZU1lc3NhZ2UiLCJjaGVja1RhcmdldHMiLCJjaGF0Q2FyZCIsImdldEZyb21NZXNzYWdlSWQiLCJodG1sQ2FyZCIsInNhbkNoZWNrQ2FyZERhdGEiLCJwYXJzZSIsInVuZXNjYXBlIiwic2FuQ2hlY2tDYXJkIiwiQ29DN0xpbmsiLCJDSEVDS19UWVBFIiwiQ0hFQ0siLCJTQU5MT1NTIiwiSVRFTSIsIkVGRkVDVCIsIkxJTktfVFlQRSIsIkNIQVJBQ1RFUklTVElDIiwiQVRUUklCVVRFIiwiU0tJTEwiLCJpbml0IiwiYm9keSIsIl9vbkxpbmtDbGljayIsIl9vbkRyYWdDb0M3TGluayIsImVucmljaGVycyIsInBhdHRlcm4iLCJlbnJpY2hlciIsIl9jcmVhdGVMaW5rIiwiX2xpbmtGcm9tRXZlbnQiLCJvbGRUeXBlIiwibGlua1R5cGUiLCJsaW5rSWNvbiIsImRpc3BsYXlOYW1lIiwiaW5uZXJUZXh0IiwiY29udmVydERpZmZpY3VsdHkiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImZyb21Ecm9wRGF0YSIsImNoYW5nZXMiLCJleHRlcm5hbCIsIm1hdGNoZXMiLCJtYXRjaEFsbCIsImRpZmZpY3VsdHlTdHJpbmciLCJodW1hbk5hbWUiLCJkcmFnZ2FibGUiLCJwYWNrIiwibGluayIsIl9vbkxpbmtBY3RvckNsaWNrIiwiY2hhcmFjdGVyaXN0aWNDaGVjayIsInNoaWZ0S2V5Iiwic2tpbGxDaGVjayIsImF0dHJpYnV0ZUNoZWNrIiwid2VhcG9uQ2hlY2siLCJ0b0NoYXRNZXNzYWdlIiwidG9XaGlzcGVyTWVzc2FnZSIsIm93bmVycyIsIkNvQzdDb250ZW50TGlua0RpYWxvZyIsImdldFNwZWFrZXJBY3RvciIsIk9CU0VSVkVSIiwic2V0VmFsdWUiLCJjaGVja1R5cGUiLCJjaGVja05hbWUiLCJpc0NoYXJhY3RlcmlzdGljQ2hlY2siLCJDb0NBY3RvciIsImdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbiIsImMiLCJpc0NoZWNrIiwiaXNBdHRyaWJ1dGVDaGVjayIsImlzU2tpbGxDaGVjayIsImlzSXRlbUNoZWNrIiwiaXNTYW5Mb3NzQ2hlY2siLCJpc0VmZmVjdCIsImlzUHVzaGluZyIsImRyYWdEcm9wIiwiZHJhZ1NlbGVjdG9yIiwiZHJvcFNlbGVjdG9yIiwidGFicyIsIm5hdlNlbGVjdG9yIiwiY29udGVudFNlbGVjdG9yIiwiaW5pdGlhbCIsImdldERhdGEiLCJzaGVldERhdGEiLCJhdHRyaWJ1dGVUeXBlIiwiZWZmZWN0TW9kZXMiLCJBQ1RJVkVfRUZGRUNUX01PREVTIiwiY2hhcmFjdGVyaXN0aWNUeXBlIiwiZnJvbUdhbWUiLCJmcm9tRGlyZWN0b3J5IiwiaGFzSUQiLCJmcm9tQ29tcGVuZGl1bSIsImlzU2V0RnJvbUdhbWUiLCJhY3Rvck5hbWVzIiwiX29uQ2hhbmdlU3VibWl0IiwiY2xpY2siLCJfb25FZmZlY3RDb250cm9sIiwiX29uU3VibWl0IiwiX2FkZEVmZmVjdENoYW5nZSIsImlkeCIsInN1Ym1pdCIsInByZXZlbnRDbG9zZSIsInVwZGF0ZURhdGEiLCJtb2RlIiwiQUREIiwiX3VwZGF0ZU9iamVjdCIsImZvcm1EYXRhIiwiaGFzRWZmZWN0IiwidGludCIsInJvdW5kcyIsInR1cm5zIiwic3VibWl0dGVyIiwiY29weVRvQ2xpcGJvYXJkIiwiX29uRHJvcCIsImRhdGFTdHJpbmciLCJzZXRMaW5rIiwiZG9jdW1lbnROYW1lIiwiZGF0YUxpc3QiLCJnZXREYXRhRnJvbURyb3BFdmVudCIsImhhc01vZGlmaWVycyIsImhhc0xhYmVsIiwiaGFzSWNvbiIsImxpbmtEYXRhIiwiZGlhbG9nIiwiUm9sbERpYWxvZyIsInVua25vd25EaWZmaWN1bHR5RGVmYXVsdCIsImFsbG93RmxhdERpY2VNb2RpZmllciIsImRpc2FibGVGbGF0RGljZU1vZGlmaWVyIiwiYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJkaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiaGlkZURpZmZpY3VsdHkiLCJjYXJkVHlwZSIsImZvcmNlZENhcmRUeXBlIiwiY2FyZFR5cGVzIiwiQ29DN0NoYXRNZXNzYWdlIiwiZGxnIiwiRGlhbG9nIiwiYnV0dG9ucyIsImNhbGxiYWNrIiwiRm9ybURhdGEiLCJSb2xsQ2FyZCIsImluaXRpYXRvciIsImZyb21NZXNzYWdlSWQiLCJmcm9tTWVzc2FnZSIsImNhcmRFbGVtZW50IiwiZnJvbUhUTUxDYXJkRWxlbWVudCIsImNhcmREYXRhIiwicm9sbGVkIiwiX2h0bWxSb2xsIiwiZ2V0SHRtbFJvbGwiLCJzcGFuIiwiZmxhZyIsInVuc2V0RmxhZyIsInNldEZsYWciLCJ0b2dnbGVGbGFnIiwiZGlzcGF0Y2giLCJjb2xsZWN0aW9uIiwiZGVmYXVsdENvbmZpZyIsInRpbWVzdGFtcCIsInByb2Nlc3MiLCJyZXNvbHZlT2xkIiwiY2xvc2VDYXJkIiwidG9NZXNzYWdlIiwiY29tcHV0ZSIsImNsb3NlZCIsImZyb21HTSIsInJhbmsiLCJhZGRSb2xsRGF0YSIsImFkZFJvbGwiLCJzcGxpY2UiLCJfbWVzc2FnZSIsIl9tZXNzYWdlSWQiLCJleGNsdWRlIiwiZXhjbHVkZVN0YXJ0V2l0aCIsIndpbm5lcnMiLCJ3aW5uZXIiLCJsb29zZXJzIiwibG9vc2VyIiwiaGFzV2lubmVyIiwiaXNLZWVwZXIiLCJDb21iaW5lZENoZWNrQ2FyZCIsImJpbmRMaXN0ZXJuZXJzIiwic3VjY2Vzc0NvdW50IiwibWFpbkFjdG9yS2V5Iiwic3VjY2VzcyIsImFsbCIsImNoZWNrR01Jbml0aWF0b3IiLCJfcm9sbCIsImhpZGVTdWNjZXNzIiwiYXNzaWduUm9sbCIsIkF1ZGlvSGVscGVyIiwicGxheSIsInNvdW5kcyIsImFsdGVyIiwiZmxhdERpY2VNb2RpZmllciIsImZsYXRUaHJlc2hvbGRNb2RpZmllciIsImhpZGVEaWNlUmVzdWx0IiwiSW50ZXJhY3RpdmVDaGF0Q2FyZCIsIl9vcHRpb25zIiwiY3NzQ2xhc3NlcyIsIm9wdGlvbm5hbENoYXREYXRhIiwiY2FyZENsYXNzIiwiX29uQnV0dG9uIiwiX29uS2V5IiwiYmluZExpc3RlbmVycyIsImdldE93blByb3BlcnR5TmFtZXMiLCJjYXJkcyIsInR5cGVkQ2FyZCIsImFzc2lnbk9iamVjdCIsIl91cGRhdGUiLCJmb3JtcyIsImZvcm0iLCJGb3JtRGF0YUV4dGVuZGVkIiwiZGlmZk9iamVjdCIsImlzVGFyZ2V0T3duZXIiLCJpc093bmVyIiwiRGFtYWdlQ2FyZCIsImRhbWFnZVJvbGwiLCJfaW1wYWxlIiwiaXNEYW1hZ2VGb3JtdWxhIiwiZGFtYWdlRm9ybXVsYSIsInZhbGlkYXRlIiwiaXNEYW1hZ2VOdW1iZXIiLCJpc0FybW9yRm9ydWxhIiwidG90YWxEYW1hZ2VTdHJpbmciLCJpZ25vcmVBcm1vciIsIm5vRGFtYWdlIiwicm9sbERhbWFnZSIsImhhcmRyb2xsZWQiLCJkYW1hZ2VJbmZsaWN0ZWQiLCJkZWFsRGFtYWdlIiwiX2h0bWxJbmxpbmVSb2xsIiwicm9sbEFybW9yIiwiZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQiLCJzZWxlY3RlZFBsYXllcnMiLCJvbmUiLCJjb25maXJtRGFtYWdlIiwidHdvIiwiaW5jbHVlcyIsInRyaW0iLCJtYXhEYW1hZ2UiLCJyb2xsU3RyaW5nIiwiX2FybW9yIiwiT3Bwb3NlZENoZWNrQ2FyZCIsImF0dGFja2VyUm9sbCIsImF0dGFja2VyIiwiZGVmZW5kZXJSb2xsIiwiZGVmZW5kZXIiLCJkb2RnZVNraWxsIiwiX2FhIiwiX2FkIiwid2lubmVyQ291bnQiLCJpc0F0dGFja01hbmV1dmVyIiwiZGFtYWdlQ2hhdENhcmQiLCJpc0V4dHJlbWVTdWNjZXNzIiwidGllIiwicmVzb2x2ZWQiLCJ3aW5Db3VudCIsIlNhbkRhdGFEaWFsb2ciLCJfdG9nZ2xlSW5wdXQiLCJWYWxpZGF0ZSIsIlJPTExfVFlQRV9BVFRSSUJVVEUiLCJST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMiLCJST0xMX1RZUEVfQ09NQkFUIiwiUk9MTF9UWVBFX1NLSUxMIiwiUk9MTF9UWVBFX0VOQ09VTlRFUiIsIkNBUkRfVFlQRV9DT01CSU5FRCIsIkNBUkRfVFlQRV9HUk9VUCIsIkNBUkRfVFlQRV9OT1JNQUwiLCJDQVJEX1RZUEVfT1BQT1NFRCIsIkNBUkRfVFlQRV9TQU5fQ0hFQ0siLCJDQVJEX1RZUEVfTk9ORSIsInNlbGVjdCIsIm5vcm1hbGl6ZVJlcXVlc3QiLCJza2lsbElkcyIsImdldFNraWxsc0J5TmFtZSIsImFsdEtleSIsImNyZWF0ZUVuY291bnRlciIsIm9wZW5MaW5rVG9vbCIsInNlbmRUb0NoYXQiLCJzZW5kVG9DbGlwYm9hcmQiLCJwcmV2ZW50U3RhbmRieSIsImRpYWxvZ09wdGlvbnMiLCJhdHRyaWIiLCJ3ZWFwb25BbHRTa2lsbCIsIndlYXBvbk5hbWUiLCJoYXNQbGF5ZXJPd25lciIsInRyaWdnZXIiLCJjcmVhdGVMaW5rIiwiaXRlbU1vZGlmaWVycyIsImZvdW5kcnlJRCIsImNyZWF0ZVJvbGwiLCJydW5Sb2xsIiwiY2hlY2tQYXNzZWQiLCJjaGVja0ZhaWxsZWQiLCJpbmZvcyIsInVzYWdlIiwicHJvbXB0TGFiZWwiLCJzdGFuZGJ5Iiwicm9sbEF0dHJpYnV0ZSIsInJvbGxDaGFyYWN0ZXJpc3RpYyIsInJvbGxlZFN1Y2Nlc3NMZXZlbCIsInJlZ3VsYXJUaHJlc2hvbGQiLCJoYXJkVGhyZXNob2xkIiwiZXh0cmVtZVRocmVzaG9sZCIsIkNvQzdDb25DaGVjayIsIl9hY3RvcklkIiwiaXNSb2xsZWQiLCJjb25DaGVjayIsImh0bWxDaGVjayIsImdldENoZWNrRWxlbWVudCIsInJvbGxDb24iLCJyZXBsYWNlV2l0aCIsInN0YXlBbGl2ZSIsImFwcGxpZWQiLCJTa2lsbFNlbGVjdERpYWxvZyIsIl9vblNlbGVjdFNraWxsQ2xpY2tlZCIsInN0eWxlIiwiZGlzcGxheSIsImFkZGVkIiwib3B0aW9uc0NvdW50IiwiUG9pbnRTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbkNsaWNrZWQiLCJpdGVtTGlzdCIsIm9wdGlvbmFsIiwidG9nZ2xlQ2xhc3MiLCJDaGFyYWNTZWxlY3REaWFsb2ciLCJDaGFyYWNSb2xsRGlhbG9nIiwiX29uQ2hhbmdlSW5wdXQiLCJfb25Sb2xsQ2hhcmFjdGVyaXN0aWMiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vblJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGFyYWNLZXkiLCJpbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsInJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGFyIiwiY2hlY2tUb3RhbCIsIl9lbGVtZW50IiwiaW5wdXQiLCJsaXN0IiwicG9pbnRzIiwidmFsaWRhdGlvbiIsImVuYWJsZWQiLCJ2YWwiLCJwb2ludHNXYXJuaW5nIiwiU2tpbGxTcGVjU2VsZWN0RGlhbG9nIiwic3BlY2lhbGl6YXRpb25OYW1lIiwiYmFzZVZhbHVlIiwiaGFzU2tpbGxzIiwiU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyIsIl9vbkNsaWNrU3VibWl0IiwiX29uU2VsZWN0Q2hhbmdlIiwiYWxsb3dDdXN0b20iLCJmaXhlZEJhc2VWYWx1ZSIsImFsbG93U2VsZWN0IiwiU2tpbGxWYWx1ZURpYWxvZyIsIkNvQzdNZWxlZVJlc29sdGlvbiIsImluaXRpYXRvck1lc3NhZ2UiLCJ0YXJnZXRNZXNzYWdlIiwicHJlQ3JlYXRlTWVzc2FnZSIsIkNvQzdNZWxlZVRhcmdldCIsIkNvQzdNZWxlZUluaXRpYXRvciIsImluaXRpYXRvclRva2VuIiwicmVzdWx0U3RyaW5nIiwid2lubmVySW1nIiwid2lubmVyVGl0bGUiLCJjcml0aWNhbERhbWFnZSIsImRvY3VtbWVudCIsInBhcmVudE1lc3NhZ2VJZCIsImluaXRpYXRvcktleSIsIm91dG51bWJlcmVkIiwic3VycHJpc2VkIiwiYXV0b1N1Y2Nlc3MiLCJhZHZhbnRhZ2UiLCJkaXNhZHZhbnRhZ2UiLCJkb2RnaW5nIiwibm90UmVzcG9uZGluZyIsImZpZ2h0aW5nQmFjayIsIm1hbmV1dmVyaW5nIiwiYWN0aW9uU2VsZWN0ZWQiLCJfaW5pdGlhdG9yS2V5IiwiX2luaXRpYXRvciIsIm1lbGVlSW5pdGlhdG9yIiwidXBkYXRlQ2FyZFN3aXRjaCIsInB1Ymxpc2hVcGRhdGUiLCJjYW1lbEZsYWciLCJjcmVhdGVDaGF0Q2FyZCIsImdtcyIsInByb21wdCIsImdldFVwZGF0ZWRDaGF0Q2FyZCIsInVwZGF0ZVNlbGVjdGVkIiwid2VhcG9uSWQiLCJwZXJmb3JtU2tpbGxDaGVjayIsInB1Ymxpc2giLCJpc1Vua29ud24iLCJwdWJsaXNoTm9SZXBvbnNlUmVzdWx0IiwicmVzb2x1dGlvbkNhcmQiLCJyZXNvbHV0aW9uTWVzc2FnZSIsInB1Ymxpc2hDaGVja1Jlc3VsdCIsInJvbGxJY29ucyIsInJvbGxDb2xvciIsInJvbGxUaXRsZSIsInVwZ3JhZGVSb2xsIiwibmV3U3VjY2Vzc0xldmVsIiwib2xkQ2FyZCIsImx1Y2tTcGVudCIsInByb2Nlc3NlZCIsImRpY2VSb2xscyIsInJlc3VsRGV0YWlscyIsImRpY2VUb3RhbCIsIkNvQzdDaGF0IiwiQ29DN1JhbmdlSW5pdGlhdG9yIiwiY292ZXIiLCJ0YXJnZXRDYXJkIiwiZnVsbEF1dG8iLCJhaW1lZCIsInRvdGFsQnVsbGV0c0ZpcmVkIiwiX3RhcmdldHMiLCJDb0M3UmFuZ2VUYXJnZXQiLCJyb3VuZGVkRGlzdGFuY2UiLCJyb3VuZCIsImRpc3RhbmNlVW5pdCIsImRpc3RJbllkIiwicG9pbnRCbGFua1JhbmdlIiwib3V0T2ZSYW5nZSIsIm1haW5XZWFwb25Ta2lsbCIsImF1dG9XZWFwb25Ta2lsbCIsImF1dG9GaXJlIiwibXVsdGlUYXJnZXQiLCJhaW1pbmciLCJfYWltaW5nIiwiZ2V0QWN0b3JGbGFnIiwiYWN0aXZlVGFyZ2V0Iiwic2hvdHMiLCJfc2hvdHMiLCJjdXJyZW50U2hvdFJhbmsiLCJhY3RpdmVUYXJnZXRTaG90RGlmZmljdWx0eSIsInNob3REaWZmaWN1bHR5IiwiZGlkQW55U2hvdEhpdCIsImFueUhpdCIsInN1Y2Nlc3NmdWxIaXRzIiwiaGl0cyIsImhpdCIsInNob3QiLCJzaG90RmlyZWQiLCJ0b3RhbEFtbW8iLCJtYXhTaG90cyIsImlnbm9yZUFtbW8iLCJpZ25vcmVVc2VzUGVyUm91bmQiLCJvdXRPZkFtbW8iLCJvdXRPZlNob3RzIiwidm9sbGV5U2l6ZSIsIl92b2xsZXlTaXplIiwiaXNWb2xsZXlNaW5TaXplIiwiaXNWb2xsZXlNYXhTaXplIiwiZ2V0VGFyZ2V0RnJvbUtleSIsImNhbGNUYXJnZXRzRGlmZmljdWx0eSIsImRpZmZpY3VsdHlOYW1lIiwiaW1wb3NzaWJsZSIsImxldmVsIiwiYWRkU2hvdEF0Q3VycmVudFRhcmdldCIsImFjdG9yTmFtZSIsImJ1bGxldHNTaG90IiwidHJhbnNpdEJ1bGxldHMiLCJidWxsZXRzU2hvdFRyYW5zaXQiLCJ0cmFuc2l0IiwiYnVsbGV0TGVmdCIsInByZXZpb3VzU2hvdCIsInJlc29sdmVDYXJkIiwid2VhcG9uTWFsZnVuY3Rpb24iLCJzaG9vdEF0VGFyZ2V0IiwiaGFzTWFsZnVuY3Rpb24iLCJidWxsZXRGaXJlZCIsImRldGFpbHMiLCJjaGFuZ2VWb2xsZXlTaXplIiwicGFzc1JvbGwiLCJyb2xsSW5kZXgiLCJ1cGdyYWRlaW5kZXgiLCJpbmNyZWFzZWRTdWNjZXNzIiwicmFuZ2VJbml0aWF0b3IiLCJjYXJkVGFyZ2V0cyIsImNhcmRTaG90cyIsImRhbWFnZVJvbGxzIiwiZHIiLCJoIiwiZGFtYWdlRGllIiwiY3JpdGljYWxEYW1hZ2VGb3JtdWxhIiwiY3JpdGljYWxEYW1hZ2VEaWUiLCJpbXBhbGluZ1Nob3RzIiwic3VjY2Vzc2Z1bFNob3RzIiwiZGVhbHQiLCJkYW1hZ2VSb2xsZWQiLCJkSW5kZXgiLCJ0b3RhbFRha2VuIiwidG90YWxBYnNvcmJlZCIsInJJbmRleCIsImRlYWx0QW1vdW50IiwidGFrZW4iLCJhYnNvcmJlZCIsImRhbWFnZURlYWx0IiwiaW5NZWxlZSIsImJpZyIsIl9iaWciLCJidWlsZCIsInNtYWxsIiwiX3NtYWxsIiwiaXNGYXN0IiwibW92IiwiZmFzdCIsIl9mYXN0IiwiX2FjdG9yIiwiX3Rva2VuIiwic2l6ZVRleHQiLCJzaXplTGFiZWwiLCJjaGFuZ2VEaXNwbGF5ZWRUYXJnZXQiLCJDSEFUX0NPQzdfTUVTU0FHRSIsInJlbmRlckNoYXRNZXNzYWdlSG9vayIsImZha2VSb2xsTWVzc2FnZSIsInBsYXllcnMiLCJHTVNlbGZSb2xsIiwicmVtb3ZlV2lzcGVyVGFyZ2V0cyIsImZha2VSb2xsIiwiY2hhdExpc3RlbmVycyIsIl9vbkNoYXRDYXJkQWN0aW9uIiwiX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IiwiX29uQ2hhdENhcmRSYWRpb1N3aXRjaCIsIl9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIiwiX29uQ2hhdENhcmRWb2xsZXlTaXplIiwiX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQiLCJfb25Ub2dnbGVTZWxlY3RlZCIsIl9vblRhcmdldFNlbGVjdCIsIl9vbk9wZW5BY3RvciIsIl9vbklubGluZSIsIm9uVXBkYXRlQ2hhdE1lc3NhZ2UiLCJzY3JvbGxCb3R0b20iLCJjaGVja1JldmVhbGVkIiwicmV2ZWFsQ2hlY2siLCJyZW5kZXJNZXNzYWdlSG9vayIsInJlbW92ZUNsYXNzIiwibW91c2VsZWF2ZSIsImRlZmVuZGFudElkIiwiaW5pdGlhdG9ySWQiLCJ1cGRhdGVDb21iYXRDYXJkVGFyZ2V0IiwidXNlck9ubHkiLCJnZXRBdHRyaWJ1dGUiLCJnbU9ubHkiLCJ6b25lIiwidXNlclZpc2libGVPbmx5IiwiZWxlbSIsImdtVmlzaWJsZU9ubHkiLCJpc1RydXN0ZWQiLCJvd25lclZpc2libGVPbmx5IiwiX2dldEFjdG9yRnJvbUtleSIsIm93bmVyT25seSIsImdtU2VsZWN0T25seSIsImFjdGlvblR5cGVTdHJpbmciLCJ0YXJnZXRzU2VsZWN0b3IiLCJib3JkZXIiLCJ0YXJnZXRUb0Rpc3BsYXkiLCJkcm9wRG93bkJveGVzIiwiZHBkbkJveCIsInNlbGVjdGVkQm94IiwiYWN0aW9uVHlwZSIsImRlZmVuZGVyQ2hvaWNlIiwic2tpbGxWYWx1ZSIsIml0ZW1OYW1lIiwiX2NvbGxhcHNlSW5saW5lUmVzdWx0IiwiX2V4cGFuZElubGluZVJlc3VsdCIsIm9wdGlvbkxpc3QiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicHJvcGVydHkiLCJyYW5nZUNhcmQiLCJpc0NhcmRPd25lciIsIm93bm5lciIsImdldEFjdG9yRnJvbVRva2VuIiwiZ2V0VG9rZW4iLCJtZXNzSWQiLCJvcmlnaW5NZXNzYWdlIiwibWVsZWVDYXJkIiwicm9sbFJlc3VsdCIsInVwZ3JhZGVJbmRleCIsImRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIiLCJuZXdDYXJkIiwiY2xvbmVOb2RlIiwicHVzaGVkUm9sbCIsImRlZmVuZGVyS2V5IiwicmVzcG9uc2VUeXBlIiwiZGVhbGVyIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJmb3JjZVJvbGwiLCJDb0M3c29ja2V0IiwiZXhlY3V0ZUFzR00iLCJfaWQiLCJyb2xsRGFtYWdlQnV0dG9uIiwiQWN0b3IiLCJpbml0aWFsaXplIiwiY3JlYXR1cmVJbml0IiwicHJlcGFyZUJhc2VEYXRhIiwiaXRlbUlkZW50aWZpZXIiLCJjb2NpZEZsYWciLCJkYWlseUxpbWl0Iiwib25lRmlmdGhTYW5pdHkiLCJyYXdNb3YiLCJyYXdEYiIsInJhd0J1aWxkIiwiY3VycmVudCIsImhwIiwicHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzIiwicHJlcGFyZURlcml2ZWREYXRhIiwicmF3SHBNYXgiLCJtcCIsInJhd01wTWF4IiwicmF3U2FuTWF4IiwiZmlsdGVyTWF0cml4IiwicHJpb3JpdHkiLCJzZWxlY3RDaGFuZ2VzIiwiaHBNYXgiLCJtcE1heCIsImFjdG9yTGluayIsImRpc3Bvc2l0aW9uIiwic2lnaHQiLCJjaGVja1VuZGVmaW5lZEF1dG8iLCJyZXR1cm5EYXRhIiwiaW5pdFRva2VuIiwiY3JlYXRlRGF0YSIsImhhc0NvbmRpdGlvblN0YXR1cyIsImdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0IiwiaGFzQ29uZGl0aW9uVmFsdWUiLCJyZWFsVGltZSIsImJvdXRPZk1hZG5lc3NUYWJsZUlkIiwiYm91dE9mTWFkbmVzc1RhYmxlIiwidGFibGVzIiwidGFibGVSb2xsIiwiVEFCTEVfUkVTVUxUX1RZUEVTIiwiRE9DVU1FTlQiLCJkb2N1bWVudElkIiwiaXRlbURhdGEiLCJ0b09iamVjdCIsIlRFWFQiLCJ0ZXh0IiwiZW1wdHlTa2lsbCIsImNyZWF0ZVNraWxsIiwic2hvd1NoZWV0IiwicmVuZGVyU2hlZXQiLCJjcmVhdGVXZWFwb25Ta2lsbCIsInNraWxsRGF0YSIsInBlcnNvbmFsIiwib2NjdXBhdGlvbiIsImFyY2hldHlwZSIsImF0dGFjayIsIndwblR5cGUiLCJjcmVhdGVkQXR0YWNrIiwic2V0QWN0b3JGbGFnIiwiY3JlYXRlSXRlbSIsInF1YW50aXR5IiwiY3JlYXRlRW1wdHlCb29rIiwiZ2V0SXRlbUlkQnlOYW1lIiwiY3JlYXRlQm9vayIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVTcGVsbCIsImVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVNraWxsIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlXZWFwb24iLCJjcmVhdGVCaW9TZWN0aW9uIiwiYmlvIiwiYmlvZ3JhcGh5IiwidXBkYXRlQmlvVmFsdWUiLCJ1cGRhdGVCaW9UaXRsZSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwidXBkYXRlVGV4dEFyZWEiLCJ0ZXh0QXJlYSIsImFyZWFOYW1lIiwiZW1iZWRkZWROYW1lIiwiZGF0YUFycmF5IiwicHJvY2Vzc2VkRGF0YUFycmF5IiwiYmFzZUNhbGN1bGF0ZWQiLCJwYXJzZUNoYXJhY3RlcmlzdGljcyIsImFkZFRoaXMiLCJpc0FueUJ1dE5vdEZsYWdnZWQiLCJndWVzc0dyb3VwRnJvbURvY3VtZW50IiwiZnJvbUNvQ0lEUmVnZXhCZXN0IiwiY29jaWRSZWdFeHAiLCJleGlzdGluZ1NraWxscyIsImVsIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJmaW5kSW5kZXgiLCJleGlzdGluZ0l0ZW0iLCJ1cGRhdGVFbWJlZGRlZERvY3VtZW50cyIsImV4aXN0aW5nIiwia2VlcEJhc2UiLCJtYWluU2tpbGwiLCJhZGRJdGVtcyIsInNlY29uZFNraWxsIiwiZW5hYmxlQ2hhcmFjdGVyaXNpdGljcyIsImdldENoYXJhY3RlcmlzdGljIiwibHVjayIsImVyYSIsImV4cGFuZEl0ZW1BcnJheSIsIml0Iiwib3RoZXJzSXRlbXMiLCJhZGRVbmlxdWVJdGVtcyIsImJhY2tzdG9yeSIsInNlY3Rpb25OYW1lIiwiYmlvU2VjdGlvbnMiLCJtb25ldGFyeSIsIl9zdGF0ZSIsIkFwcGxpY2F0aW9uIiwiUkVOREVSX1NUQVRFUyIsIlJFTkRFUklORyIsIkhvb2tzIiwicmVzZXRBcmNoZXR5cGUiLCJjb25maXJtIiwieWVzIiwiZGVmYXVsdFllcyIsImNvcmVDaGFyYWMiLCJlbnRyeSIsImNvcmVDaGFyYWN0ZXJpc3RpY3MiLCJjaGFyYWMiLCJjaGFyRGlhbG9nRGF0YSIsImNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhIiwicmVzZXRPY2N1cGF0aW9uIiwiY3JlZGl0UmF0aW5nIiwiYWN0b3JDcmVkaXRSYXRpbmciLCJmaW5kQ29jSWRJbkxpc3QiLCJwb2ludHNEaWFsb2dEYXRhIiwib2NjdXBhdGlvblNraWxsUG9pbnRzIiwib3B0aW9uYWxDaGFyIiwiZGlhbG9nRGF0YSIsInNraWxsQ291bnQiLCJtZXJnZWQiLCJjcmVkaXRSYXRpbmdTa2lsbCIsImFyY2hldHlwZVBvaW50cyIsIm9jY3VwYXRpb25Qb2ludHMiLCJwZXJzb25hbFBvaW50cyIsImdldEl0ZW1zQnlOYW1lIiwiZ2V0Rmlyc3RJdGVtQnlDb0NJRCIsInRlbXBsYXRlcyIsImNoYXJOYW1lIiwiYXR0cmliTmFtZSIsImxjayIsImVyYXNlT2xkIiwib2NjdXBhdGlvblNraWxsIiwiYXJjaGV0eXBlU2tpbGwiLCJzZXRMdWNrIiwiaHBGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiX3NldEhwIiwiYWRkVW5pcXVlSXRlbSIsIm1wRnJvbUNoYXJhY3RlcmlzdGljcyIsImdldFJlYXNvblNhbkxvc3MiLCJzYW5pdHlMb3NzRXZlbnRzIiwidG90YWxMb3NzIiwiaW1tdW5pdHkiLCJsZWZ0IiwicmlnaHQiLCJsb2NhbGVDb21wYXJlIiwic2FuTWF4Rm9ybXVsYSIsInNhbml0eUxvc3NFdmVudCIsInNldFNhbiIsInNhbkxvc3NDaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja0ZhaWxsZWQiLCJzYW5Mb3NzTWF4Iiwic2FuTG9zc01pbiIsImRhaWx5TG9zcyIsImN0aHVsaHVNeXRob3MiLCJzZXRNcCIsIm9jY3VwYXRpb25Qb2ludHNTcGVudCIsInJlc2V0T2NjdXBhdGlvblBvaW50cyIsInJlc2V0QXJjaGV0eXBlUG9pbnRzIiwicmVzZXRQZXJzb25hbFBvaW50cyIsImFyY2hldHlwZVBvaW50c1NwZW50IiwiYm9udXNQb2ludHMiLCJleHBlcmllbmNlUG9pbnRzIiwicGVyc29uYWxQb2ludHNTcGVudCIsImhhc0RldmVsb3BtZW50UGhhc2UiLCJkZXZlbG9wZW1lbnQiLCJvbmx5UnVuT25jZVBlclNlc3Npb24iLCJsb3NzIiwic2V0QXR0cmliQXV0byIsInVwZGF0ZWRLZXkiLCJ0b2dnbGVBdHRyaWJBdXRvIiwiZGJGcm9tQ2hhcmFjdGVyaXN0aWNzIiwic3VtIiwiYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiZGl2aXNvciIsIm1vdkZyb21DaGFyYWN0ZXJpc3RpY3MiLCJhZ2UiLCJNT1YiLCJnZXRJdGVtc0Zyb21OYW1lIiwidG9nZ2xlQWN0b3JGbGFnIiwiYXR0cmlidXRlTmFtZSIsIm1pc3NpbmciLCJjaGFyYWN0ZXJpc3RpY05hbWUiLCJ0b29sVGlwU2tpbGxUZXh0IiwiQ29DN1Rvb2x0aXBzIiwiVG9vbFRpcEhvdmVyIiwiYWN0b3JBcHBJZCIsImFwcGlkIiwid2luZG93cyIsInRvb2xUaXAiLCJuZXdJdGVtcyIsImZyb21Db0NJREJlc3QiLCJzaG93TG9hZGluZyIsIm15SXRlbXMiLCJuZXdJdGVtIiwicGFja3MiLCJtZXRhZGF0YSIsImdldERvY3VtZW50cyIsInNraWxsSWRlbnRpZmllciIsImVudGl0eSIsImdldERvY3VtZW50IiwiX3Jhd1ZhbHVlIiwidXBkYXRlVmFsdWUiLCJ3ZWFwb25EYXRhIiwid2VhcG9ucyIsInRvSlNPTiIsInJvbGxJbml0aWF0aXZlIiwiaGFzR3VuIiwiZGVueUx1Y2siLCJkZW55QmxpbmRUYW1wZXJpbmciLCJ1bnNldEFjdG9yRmxhZyIsImZyb21VdWlkU3luYyIsImV4ZWMiLCJjaGFyS2V5IiwiYXR0cmliS2V5IiwiYXR0ciIsInBpbG90U2tpbGxzIiwiZHJpdmVTa2lsbHMiLCJ0b2tlblV1aWQiLCJoYXNSb2xsYWJsZUNoYXJhY3RlcmlzdGljcyIsImhvc1JvbGxhYmxlU2tpbGxzIiwicm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlIiwicmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUiLCJhdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUiLCJhdmVyYWdlIiwiY2hhclZhbHVlIiwic2V0Q2hhcmFjdGVyaXN0aWMiLCJkZXZlbG9wZW1lbnRQaGFzZSIsInNraWxsc1JvbGxlZCIsIkRpZSIsImF1Z21lbnQiLCJza2lsbE1hc3RlcmluZ01lc3NhZ2UiLCJhdWdtZW50RGllIiwiYXVnbWVudFNBTkRpZSIsInNhbkdhaW5lZCIsInNhbkdhaW5lZE1lc3NhZ2UiLCJkZWJ1ZyIsInNjb3JlIiwiaW5jcmVhc2VFeHBlcmllbmNlIiwiY2hhbmdlZCIsImRldmVsb3BMdWNrIiwiY3VycmVudEx1Y2siLCJwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2siLCJoaWdoZXJUaGFuQ3VycmVudEx1Y2siLCJhdWdtZW50Um9sbCIsImF1Z21lbnRWYWx1ZSIsImRldmVsb3BTa2lsbCIsImNvbmRpdGlvblZhbHVlIiwiY29uZGl0aW9ucyIsImZpZWxkIiwidG9nZ2xlQ29uZGl0aW9uIiwiZm9yY2VWYWx1ZSIsImN1c3RvbSIsIm92ZXJsYXkiLCJzdGF0dXNFZmZlY3RzIiwic291cmNlIiwiZWZmZWN0RGF0YSIsImZpZWxkcyIsImp1c3RUaGlzIiwiZGVsZXRlRW1iZWRkZWREb2N1bWVudHMiLCJyZXNldENvdW50ZXIiLCJjb3VudGVyIiwicmVzZXREYWlseVNhbml0eSIsImZpZ2h0aW5nU2tpbGxzIiwiY2xvc2VDb21iYXRXZWFwb25zIiwid2VhcG9uTGlzdCIsImZpcmVhcm1Ta2lsbHMiLCJDTSIsIm15dGhvc0hhcmRlbmVkIiwic2V0TXl0aG9zSGFyZGVuZWQiLCJDUiIsIm1vbmV0YXJ5Rm9ybWF0Iiwic3ltYm9sIiwibW9uZXRhcnlGb3JtYXRLZXlzIiwidG9Mb2NhbGVTdHJpbmciLCJtaW5pbXVtRnJhY3Rpb25EaWdpdHMiLCJtb25ldGFyeVZhbHVlIiwicm93IiwibW9uZXRhcnlUeXBlS2V5cyIsInNwZW5kaW5nTGV2ZWwiLCJjYXNoIiwiYXNzZXRzIiwidGVzdFVzZXJQZXJtaXNzaW9uIiwicGxheWVyIiwiY2hhcmFjdGVyVXNlciIsImNvbnRlbnRzIiwic2V0SHAiLCJoZWFsdGhCZWZvcmUiLCJkYW1hZ2VUYWtlbiIsImFybW9yRGF0YSIsImdyb3NzRGFtYWdlIiwiYXJtb3JWYWx1ZSIsImlzRm9ybXVsYSIsIm5ldERhbWFnZSIsImNlaWwiLCJoYXNNYWpvcldvdW5kIiwibWFqb3JXb3VuZCIsImlzVW5rbm93biIsIl91dWlkIiwicmFuZG9tSUQiLCJoYXNDYXJkIiwicmF3VmFsdWVTdHJpbmciLCJjcml0aWNhbFRocmVzaG9sZCIsImZ1bWJsZVRocmVzaG9sZCIsInN1Y2Nlc1RocmVzaG9sZCIsIl9tb2RpZmllZFJlc3VsdCIsIm1vZGlmaWVkIiwiZmxhdERpY2VNb2RpZmllclN0cmluZyIsImlzU2ltcGxlUm9sbCIsImhhc1BlbmFsdHkiLCJoYXNNb2RpZmllciIsIl9kaWNlTW9kaWZpZXIiLCJfZGlmZmljdWx0eSIsIm9sZENoZWNrIiwic3VjY2Vzc0xldmVsSWNvbnMiLCJ1bmtub3duRGlmZmljdWx0eSIsImljb25zIiwic3VjY2Vzc0hpbnQiLCJjc3NDbGFzcyIsImhpbnQiLCJmYWlsdXJlSGludCIsImdtRGlmZmljdWx0eUNyaXRpY2FsIiwiZ21EaWZmaWN1bHR5RXh0cmVtZSIsImdtRGlmZmljdWx0eUhhcmQiLCJnbURpZmZpY3VsdHlSZWd1bGFyIiwiX3NraWxsIiwiX2dldEl0ZW1Gcm9tSWQiLCJfaXRlbSIsImlzRHVtbXkiLCJkaXNwbGF5UmVzdWx0VHlwZSIsImRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCIsImRpc3BsYXlCb3RoU3VjY2Vzc0xldmVsIiwiZG9udERpc3BsYXlTdWNjZXNzTGV2ZWwiLCJpbWFnZSIsImdldExpbmtFbGVtZW50IiwiY3JlYXRlRnJvbUFjdG9yUm9sbERhdGEiLCJ0aHJlc2hvbGQiLCJyb2xsVmFsdWUiLCJ0ZW5SZXN1bHQiLCJzcGVuZGluZ0Ftb3VudCIsInRvdGFsTHVja1NwZW50IiwibWF4SW5kZXgiLCJzaGlmdCIsInRlbk9ubHlPbmVEaWUiLCJpc1ZhbHVlIiwiaXNDaGFyYWN0aXJpc3RpYyIsImlzU2tpbGwiLCJpc0l0ZW0iLCJpc0F0dHJpYnV0ZSIsInN1Y2Nlc3NSZXF1aXJlZCIsIm1hbGZ1bmN0aW9uVHh0IiwiaGFzRW5vdWdoTHVjayIsIm5leHRMZXZlbCIsImNhbkluY3JlYXNlU3VjY2VzcyIsImNhbkF3YXJkRXhwZXJpZW5jZSIsImZvcmNlZCIsIkpTT05Sb2xsU3RyaW5nIiwiY3NzQ2xhc3NMaXN0IiwicGxheWVyQ3NzQ2xhc3MiLCJmb3JjZWRTdWNjZXNzIiwiZm9yY2VkRmFpbHVyZSIsInJlbW92ZVVwZ3JhZGVzIiwiZm9yY2VTdWNjZXNzTGV2ZWwiLCJfZm9yY2VDaGVjayIsImhpZ2giLCJsb3ciLCJyYW5kb20iLCJ1bml0VG90YWwiLCJ0ZW5Ub3RhbCIsImhhc0Vub3VnaCIsInRlbiIsImZsYWdnZWRGb3JEZXZlbG9wbWVudCIsIl9mbGF2b3IiLCJfY29udGV4dCIsInBhcmVudFV1aWQiLCJyYXd2YWx1ZSIsInRvb2x0aXBIZWFkZXIiLCJnZXRIdG1sUm9sbEVsZW1lbnQiLCJvcmlnaW5hbFNwZWFrZXIiLCJuZXdDb250ZW50IiwiaHRtbE1lc3NhZ2UiLCJyb2xsUmVzdWx0RWxlbWVudCIsIk9USEVSIiwidG9vbHRpcCIsInJvbGxUb29sVGlwIiwiZmFjZSIsImZyb21Sb2xsU3RyaW5nIiwiY29tbWFuZCIsIl9vbkNsaWNrSW5saW5lUm9sbCIsInRpcCIsImFwcGVuZENoaWxkIiwicGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwdCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ0b3AiLCJ5IiwiaW5uZXJIZWlnaHQiLCJ6aSIsImdldENvbXB1dGVkU3R5bGUiLCJ6SW5kZXgiLCJpc051bWVyaWMiLCJQYXJzZUNoYXRFbnRyeSIsIl9FeGVjQ29tbWFuZCIsImVzY2FwZWQiLCJhc2siLCJ0aHJlc2hvbGRTdHIiLCJkaWZmaWN1bHR5U3RyIiwiYXNrVmFsdWUiLCJ0ZXN0IiwiZ2V0QWN0b3JGcm9tU3RyaW5nIiwiYWN0b3JTdHJpbmciLCJza2lsbENoZWNrTWFjcm8iLCJ3ZWFwb25DaGVja01hY3JvIiwiYmFzZUFjdG9yIiwiZ2V0RG9jdW1lbnRDbGFzcyIsImNoZWNrTWFjcm8iLCJyb2xsRGljZSIsImNyZWF0ZU1hY3JvIiwiYmFyIiwic2xvdCIsIm1hY3JvIiwibWFjcm9zIiwiYXNzaWduSG90YmFyTWFjcm8iLCJNYWNybyIsInRvZ2dsZURldlBoYXNlIiwidXBkYXRlQ2hhclNoZWV0cyIsInRvZ2dsZUNoYXJDcmVhdGlvbiIsImdldFRhcmdldCIsImNoZWNrT3B0aW9ucyIsInBsYXllclRva2VuSWRzIiwic2VsZWN0ZWRQbGF5ZXJJZHMiLCJjaGVja2VkIiwic3RhcnRSZXN0IiwiY2hhdENvbnRlbnQiLCJxdWlja0hlYWxlciIsImlzQ3JpdGljYWxXb3VuZHMiLCJkYWlseVNhbml0eUxvc3MiLCJocFZhbHVlIiwibXBWYWx1ZSIsImhlYWxBbW91bnQiLCJob3VycyIsIm1hZ2ljQW1vdW50IiwidG9nZ2xlWFBHYWluIiwidGsiLCJyZW5kZXJlZCIsImVudGl0eVR5cGUiLCJmb2xkZXIiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJwb3NpdGlvbiIsImZvY3VzIiwicmVqZWN0IiwiZXhlY0NvbW1hbmQiLCJjYXRjaCIsImxlbiIsInFTdHJpbmciLCJjaGFyQXQiLCJjaGFyQ29kZUF0IiwiaiIsInNldEJ5UGF0aCIsInBhdGgiLCJvIiwiZ2V0QnlQYXRoIiwiZG9jIiwiZG9jTmFtZSIsImRvY0lkIiwiaW5zdGFuY2UiLCJlbWJlZGRlZElkIiwiaWRlbnRpZmllcnMiLCJnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIiwiZHJvcERhdGEiLCJkb2NVdWlkIiwiZ2V0RG9jdW1lbnRGcm9tS2V5IiwiY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzIiwiZm9sZGVyTmFtZSIsImltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciIsImZvbGRlcnMiLCJGb2xkZXIiLCJndWVzc0l0ZW0iLCJvTSIsInBhY2thZ2UiLCJmYWxsYmFja0FueSIsInRvS2ViYWJDYXNlIiwibm9ybWFsaXplIiwia2VlcGVycyIsInN1Ym1pdE9uQ2xvc2UiLCJzdWJtaXRPbkNoYW5nZSIsInN1cHBvcnRlZExhbmd1YWdlcyIsImVkaXRhYmxlIiwiZ3Vlc3NDb2RlIiwiZ3Vlc3NJZCIsImlkUHJlZml4IiwiZ2V0UHJlZml4IiwibGFuZyIsImlzRW5hYmxlZCIsIkNvQ0lES2V5cyIsImZsYXR0ZW5PYmplY3QiLCJ0cmFuc2xhdGlvbnMiLCJDb0NJREZsYWciLCJwcmVmaXgiLCJleGlzdGluZ0tleXMiLCJpc1N5c3RlbUlEIiwiX2V4aXN0aW5nIiwid29ybGREb2N1bWVudHMiLCJmcm9tQ29DSURBbGwiLCJzY29wZSIsInVzZWRFcmFzIiwidW5pcXVlV29ybGRQcmlvcml0eSIsIndvcmxkRG9jdW1lbnRJbmZvIiwid2FybkR1cGxpY2F0ZVdvcmxkUHJpb3JpdHkiLCJ3b3JsZER1cGxpY2F0ZXMiLCJjb21wZW5kaXVtRG9jdW1lbnRzIiwidW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5IiwiY29tcGVuZGl1bURvY3VtZW50SW5mbyIsIndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRHVwbGljYXRlcyIsInNpYmxpbmdzIiwiX29uQ2xpY2tUb2dnbGUiLCJndWVzcyIsImNzcyIsImNvbG9yIiwiYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiIsImhlYWRlckJ1dHRvbnMiLCJzaGVldENvQ0lEIiwiQ29DSURFZGl0b3JCdXR0b24iLCJvbmNsaWNrIiwibnVtYmVyT2ZCdXR0b25zIiwiQ29DN0NvbnRleHRNZW51IiwibWVudSIsIl9jYWxsYmFjayIsIl9odG1sIiwiX21lbnUiLCJtZW51VHJpZ2dlciIsImNvbnRleHRtZW51IiwiX29uQ29udGV4dE1lbnUiLCJtZW51RWxlbWVudCIsIkNyZWF0ZU1lbnUiLCJfb25NZW51QWN0aW9uIiwibWVudUNvbnRhaW5lciIsImNsb3NlQWxsIiwiZWFjaCIsInZpc2liaWxpdHkiLCJtZW51TmFtZSIsImNvbnRleHRNZW51Iiwid3JhcHBlciIsInN1Yk1lbnUiLCJjbGllbnRYIiwiY2xpZW50WSIsIm1lbnVIZWlnaHQiLCJvdXRlckhlaWdodCIsIm1lbnVXaWR0aCIsIm91dGVyV2lkdGgiLCJjYW5TZWUiLCJhZGRDbGFzcyIsInNlY3Rpb24iLCJDcmVhdGVTZWN0aW9uIiwibXVsdGkiLCJzdWIiLCJDb0M3QWN0b3JTaGVldCIsIkFjdG9yU2hlZXQiLCJfZ2V0SGVhZGVyQnV0dG9ucyIsInNob3dIaWRkZW5EZXZNZW51IiwiY2FuRHJhZ1Rva2VuIiwibGlua2VkQWN0b3IiLCJpdGVtc0J5VHlwZSIsImNvbWJhdFNraWxscyIsInJhbmdlV3BuIiwibWVsZWVXcG4iLCJhY3RvckZsYWdzIiwicGVybWlzc2lvbkxpbWl0ZWQiLCJMSU1JVEVEIiwiYWxsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscFJ1bGVBcmNoZXR5cGUiLCJwdWxwUnVsZU9yZ2FuaXphdGlvbiIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJ1cGRhdGVkRXhwIiwiaXRlbVR5cGUiLCJtZWxlZVNraWxscyIsInJhbmdlU2tpbGxzIiwiY2J0U2tpbGxzIiwidXNlc0FsdGVybmF0ZVNraWxsIiwic2tpbGxTZXQiLCJfcHJvcGVydGllcyIsImhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSIsImlzRmlyc3QiLCJpc0xhc3QiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJfb25TZWN0aW9uSGVhZGVyIiwiX29uSXRlbUhlYWRlciIsIl9vbkludmVudG9yeUhlYWRlciIsImRibGNsaWNrIiwiX3RvZ2dsZVJlYWRPbmx5IiwiX29uQWRkQW1vIiwiX29uUmVsb2FkV2VhcG9uIiwiY29tcGVuZGl1bSIsIl9vbkxvY2tDbGlja2VkIiwiX29uRmxhZ0NsaWNrZWQiLCJfb25Gb3JtdWxhQ2xpY2tlZCIsIl9vbkF1dG9Ub2dnbGUiLCJtZW51cyIsInJvbGxNZW51Iiwic2FuTWVudSIsInJvbGxDb250ZXh0TWVudSIsIl9vbkNvbnRleHRNZW51Q2xpY2siLCJzYW5Db250ZXh0TWVudSIsIl9vbk9wcG9zZWRSb2xsIiwiX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0IiwiX29uUm9sbFNraWxsVGVzdCIsIl9vblJvbGxBdHRyaWJUZXN0IiwiX29uRHJhZ1Rva2VuU3RhcnQiLCJfb25EcmFnQ2hhcmFjdGVyaXN0aWMiLCJfb25EcmFnQXR0cmlidXRlIiwiX29uRHJhZ1NhbkNoZWNrIiwiX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUiLCJfb25BdmVyYWdlQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vblJlc2V0Q291bnRlciIsIl9vbkNvbmRpdGlvblRvZ2dsZSIsImhlYWwiLCJyZXZpdmUiLCJjaGVja0ZvckRlYXRoIiwiX29uSXRlbVJvbGwiLCJfb25XZWFwb25Sb2xsIiwiX29uRWZmZWN0IiwiX29uV2VhcG9uU2tpbGxSb2xsIiwiX29uV2VhcG9uRGFtYWdlIiwid2hlZWxJbnB1dHMiLCJ3aGVlbElucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbldoZWVsIiwiX29uSXRlbVN1bW1hcnkiLCJfb25JdGVtUG9wdXAiLCJfb25SZW5kZXJJdGVtU2hlZXQiLCJldiIsInBhcmVudHMiLCJpdGVtVG9EZWxldGUiLCJzdHJpY3QiLCJzbGlkZVVwIiwic3RvcFByb3BhZ2F0aW9uIiwiX29uVHJhZGVJdGVtIiwiZGV0YWlsIiwiZGlzYWJsZSIsIm1vdXNlZW50ZXIiLCJ0b29sVGlwU2tpbGxFbnRlciIsInRvb2xUaXBMZWF2ZSIsInRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIiwidG9vbFRpcEF0dHJpYnV0ZUVudGVyIiwidG9vbFRpcEF1dG9FbnRlciIsInRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQiLCJkZWxheSIsInRvb2xUaXBUaW1lciIsImRpc3BsYXlUb29sVGlwIiwiY2hhcklkIiwiYXR0cmlidXRlSWQiLCJhdHRyaWJ1dGVzIiwidGFyZ2V0VHlwZSIsInJvbGxPcHRpb25zIiwiYWN0b3JGcm9tIiwiYWN0b3JUbyIsInZpc2libGUiLCJOT05FIiwiX29uRHJhZ1N0YXJ0IiwiZHJhZ0RhdGEiLCJib3giLCJDb0M3VHlwZSIsImlzTG9ja2VkIiwiZGVsdGFZIiwicmVhZE9ubHkiLCJzZWNyZXRzIiwiaGFzQ2xhc3MiLCJzdW1tYXJ5IiwiZGl2Iiwic3BlY2lhbERpdiIsImhpZGUiLCJzbGlkZURvd24iLCJwYW5uZWxDbGFzcyIsInBhbm5lbCIsImlzIiwib2wiLCJuZXh0IiwicG9wdXBTa2lsbCIsImVucmljaGVkVmFsdWUiLCJzY3JvbGxZIiwicHJvY2VlZFdpdGhvdXRUYXJnZXQiLCJjYW5jZWwiLCJwcm9jZWVkIiwicm9sbEZvcm11bGEiLCJvdmVycmlkZXMiLCJjcmVkaXRWYWx1ZSIsInNlbGVjdGVkSW5kZXgiLCJDb0M3TlBDU2hlZXQiLCJhbGxvd0Zvcm11bGEiLCJkaXNwbGF5Rm9ybXVsYSIsImhhc1NhbiIsImhhc01wIiwiaGFzTHVjayIsImlzQ3JlYXR1cmUiLCJoYXNJbnZlbnRvcnkiLCJlbnJpY2hlZEJpb2dyYXBoeVBlcnNvbmFsRGVzY3JpcHRpb24iLCJlbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyIiwia2VlcGVyIiwic2FubG9zc01lbnUiLCJzYW5sb3NzQ29udGV4dE1lbnUiLCJfb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljayIsIl9vblNhbkNoZWNrIiwicmVzaXphYmxlIiwibWluaW1pemFibGUiLCJmb3JjZUF1dG8iLCJzZXRQb3NpdGlvbiIsIkNvQzdDcmVhdHVyZVNoZWV0IiwiQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlciIsImlzSW1tdW5pdHkiLCJfb25CdXR0b25DbGljayIsIkNvQzdDaGFyYWN0ZXJTaGVldCIsInN1bW1hcml6ZWQiLCJ0b2dnbGVTaGVldE1vZGUiLCJza2lsbExpc3RNb2RlVmFsdWUiLCJza2lsbFNob3dVbmNvbW1vbiIsInNob3dJY29uc09ubHkiLCJvY2N1cGF0aW9uU2V0IiwiYXJjaGV0eXBlU2V0IiwidG90YWxFeHBlcmllbmNlIiwidG90YWxPY2N1cGF0aW9uIiwiaW52YWxpZE9jY3VwYXRpb25Qb2ludHMiLCJ0b3RhbEFyY2hldHlwZSIsImludmFsaWRBcmNoZXR5cGVQb2ludHMiLCJ0b3RhbFBlcnNvbmFsIiwiaW52YWxpZFBlcnNvbmFsUG9pbnRzIiwiY3JlZGl0UmF0aW5nTWF4IiwiY3JlZGl0UmF0aW5nTWluIiwiaW52YWxpZENyZWRpdFJhdGluZyIsInB1bHBUYWxlbnRDb3VudCIsInRhbGVudCIsIm1pblB1bHBUYWxlbnRzIiwidGFsZW50cyIsImludmFsaWRQdWxwVGFsZW50cyIsImFsbG93RGV2ZWxvcG1lbnQiLCJhbGxvd0NoYXJDcmVhdGlvbiIsImRldmVsb3BtZW50Um9sbEZvckx1Y2siLCJzaG93RGV2UGFubmVsIiwiX21vbmV0YXJ5Rm9ybWF0cyIsIm1vbmV0YXJ5Rm9ybWF0cyIsInNob3dDdXJyZW5jeVN5bWJvbCIsIl9tb25ldGFyeVR5cGVzIiwibW9uZXRhcnlUeXBlcyIsIm9uZUJsb2NrQmFja1N0b3J5IiwicHJldmlvdXNTcGVjIiwiaXNTcGVjaWFsaXphdGlvbiIsInNraWxsc0J5VmFsdWUiLCJ0b3BTa2lsbHMiLCJ0b3BXZWFwb25zIiwicmV2ZXJzZSIsImRpc3BsYXlQbGF5ZXJOYW1lIiwic2tpbGxMaXN0RW1wdHkiLCJlbnJpY2hlZEJhY2tzdG9yeSIsIl9zYXZlU2Nyb2xsUG9zaXRpb25zIiwiX3Njcm9sbFBvc2l0aW9uc1giLCJwb3MiLCJzZWwiLCJzY3JvbGxMZWZ0IiwiX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMiLCJzZWxlY3RvcnMiLCJwb3NpdGlvbnMiLCJfb25Ta2lsbERldiIsIl9vbkl0ZW1EZXRhaWxzIiwidG9nZ2xlU2tpbGxMaXN0TW9kZSIsInRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIiwiX29uQWRkU2FuaXR5TG9zc1JlYXNvbiIsIl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24iLCJibHVyIiwiX29uRWRpdFNhbml0eUxvc3NSZWFzb24iLCJfb25Ub2dnbGVLZWVwZXJGbGFncyIsIl9vbkFkZE1vbmV0YXJ5IiwiX29uUmVtb3ZlTW9uZXRhcnkiLCJjYXNoVHlwZSIsImNhc2hWYWx1ZSIsImFzc2V0c1R5cGUiLCJhc3NldHNWYWx1ZSIsInNwZW5kaW5nVHlwZSIsInNwZW5kaW5nVmFsdWUiLCJzdHlsZVNoZWV0IiwiY3NzUnVsZUluZGV4Iiwic3R5bGVTaGVldHMiLCJocmVmIiwiZW5kc1dpdGgiLCJydWxlcyIsInNlbGVjdG9yVGV4dCIsIkNTU1N0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsIkZvbnRGYWNlIiwibG9hZCIsImxvYWRlZEZhY2UiLCJmb250cyIsIndlaWdodCIsImV4cGFuZGVkIiwiQ29DN0NvbWJhdCIsInJlbmRlckNvbWJhdFRyYWNrZXIiLCJjdXJyZW50Q29tYmF0IiwiY29tYmF0cyIsImN1cnJlbnRJbmRleCIsImNvbWJJZCIsImNvbWJhdGFudENvbnRyb2xzRGl2IiwiY29tYmF0YW50IiwiY29tYmF0YW50cyIsInByZXBlbmQiLCJpbml0aWF0aXZlIiwidG9rZW5Jbml0aWF0aXZlIiwiaW5pdGlhdGl2ZVRlc3QiLCJoNCIsImZvbnRXZWlnaHQiLCJ0ZXh0U2hhZG93IiwiYmFja2dyb3VuZCIsIl9vblRvZ2dsZUd1biIsImNvbWJhdGFudElkIiwibmV3SW5pdCIsInNldEluaXRpYXRpdmUiLCJpZHMiLCJDb0NJREJhdGNoIiwiZm91bmRLZXlzIiwib3V0IiwibWlzc2luZ05hbWVzIiwic3VmZml4Iiwic3VmZml4UmVnRXhwIiwib25TZXROYW1lIiwib25DbGlja0d1ZXNzIiwia2V5dXAiLCJvbktleXVwIiwidHlwZU5hbWUiLCJwcm9jZXNzU2tpbGxLZXlzIiwidXBkYXRlTGlzdCIsInRva2VuT2Zmc2V0IiwiaXRlbU9mZnNldCIsImFjdG9yRGF0YSIsImV4cGFuZGVkRmxhZ3MiLCJ1cGRhdGVEb2N1bWVudHMiLCJwb3B1bGF0ZVNraWxsS2V5cyIsInNjZW5lRGF0YSIsIlVwZGF0ZXIiLCJjaGVja0ZvclVwZGF0ZSIsInN5c3RlbVVwZGF0ZVZlcnNpb24iLCJqb3VybmFsIiwicnVuTWlncmF0ZSIsInVwZGF0ZWRNb2R1bGVzIiwiY3VycmVudE1vZHVsZXMiLCJwYWNrYWdlTmFtZSIsIm1vZHVsZSIsIm1vZCIsInNraXAiLCJPSyIsInBlcm1hbmVudCIsIm1pZ3JhdGVBY3RvckRhdGEiLCJpc0VtcHR5IiwibG9nIiwiZW5mb3JjZVR5cGVzIiwibWlncmF0ZUl0ZW1EYXRhIiwidGFibGUiLCJtaWdyYXRlVGFibGVEYXRhIiwibWlncmF0ZU1hY3JvRGF0YSIsIm1pZ3JhdGVTY2VuZURhdGEiLCJtaWdyYXRlQ29tcGVuZGl1bURhdGEiLCJfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IiwiX21pZ3JhdGVBY3RvckFydHdvcmsiLCJfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUiLCJfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIiwiX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIiwiX21pZ3JhdGVBY3Rvck1vbmV0YXJ5IiwiYXJyIiwiaXRlbVVwZGF0ZSIsImRvY3VtZW50VHlwZSIsIndhc0xvY2tlZCIsImNvbmZpZ3VyZSIsIm1pZ3JhdGUiLCJkb2N1bWVudHMiLCJfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCIsIl9taWdyYXRlSXRlbUV4cGVyaWVuY2UiLCJfbWlncmF0ZUl0ZW1BcnR3b3JrIiwiX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzIiwiX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIiwiX21pZ3JhdGVJdGVtRXJhcyIsIl9taWdyYXRlSXRlbXYxMCIsIl9taWdyYXRlSXRlbUJvb2tVbml0cyIsIl9taWdyYXRlTWFjcm9BcnR3b3JrIiwiX21pZ3JhdGVUYWJsZUFydHdvcmsiLCJyZXR1cm5zIiwiX21pZ3JhdGVUb2tlbkFydHdvcmsiLCJNYXAiLCJvcmlnaW5hbCIsImciLCJzcGVsbHMiLCJjb3N0IiwiY2FzdGluZ1RpbWUiLCJ1bmlkZW50aWZpZWQiLCJhdXRob3IiLCJkYXRlIiwibGFuZ3VhZ2UiLCJteXRob3NSYXRpbmciLCJub3RlcyIsImdhaW4iLCJDTUkiLCJDTUYiLCJuZWNlc3NhcnkiLCJ3ZWVrc1N0dWR5VGltZSIsInByb2dyZXNzIiwic3R1ZHkiLCJrZWVwZXJOb3RlcyIsImVuY291bnRlcmVkQ3JlYXR1cmVzIiwiaW0iLCJhdHRhY2tzUGVyUm91bmQiLCJpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCIsIm5hbWVDaGFyYWN0ZXJzIiwiZW4iLCJkYk5vbmUiLCJhcm1vck5vbmUiLCJhdHRhY2tzUGVyUm91bmROb25lIiwic2FuTG9zc05vbmUiLCJmdWxsZGIiLCJoYWxmZGIiLCJzZWN0aW9uQ29tYmF0cyIsIm5ld0NvbWJhdEhlYWRlciIsInNlY3Rpb25Ta2lsbHMiLCJzZWN0aW9uTGFuZ2F1Z2VzIiwic2VjdGlvblNwZWxscyIsImhhbmRndW4iLCJyaWZsZSIsInNtYiIsIm1hY2hpbmVHdW4iLCJsYXVuY2hlZCIsImV4YW1wbGUiLCJkZSIsImRpY2VTaG9ydCIsInBsIiwiZnIiLCJlcyIsIndlYXBvbkRvZGdlIiwiZ3Vlc3NTdGFydENvbWJhdCIsInNlY3Rpb25zIiwiQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAiLCJjaGVja0xhbmd1YWdlIiwiZ2V0RXhhbXBsZVRleHQiLCJnZXRUcmFuc2xhdGlvbnMiLCJnZXRLZXlzIiwiZ2V0UmVndWxhckV4cHJlc3Npb25zIiwiQ29DN0FjdG9ySW1wb3J0ZXIiLCJpdGVtTG9jYXRpb25zIiwiYXNOdW1iZXIiLCJhc1N0cmluZyIsImdldFJlZ0V4IiwicmVnZXgiLCJjbGVhblN0cmluZyIsInRyYW5zbGF0ZVJvbGwiLCJyZWdFeCIsInRvSFRNTCIsInJlZ0V4S2V5IiwicmVnRXhwIiwicmVxdWlyZWRHcm91cCIsInJlbW92ZUZyb21UZXh0Iiwic2F2ZUtleXMiLCJwcm9jZXNzQ29tYmF0IiwibmV3bGluZSIsIkNvQzdJbXBvcnRlciIsImxhc3RQZXJjZW50IiwibWF4TG9vcHMiLCJwZXJjZW50YWdlIiwiaXNSYW5nZWQiLCJkYW1hZ2VzIiwiaXNTaG90Z3VuIiwiYXR0YWNrcyIsInByb2Nlc3NTa2lsbHMiLCJicmVha3MiLCJwcm9jZXNzU3BlbGxzIiwic3BlbGxzQXJyIiwic3BlbGwiLCJwYXJzZUNoYXJhY3RlciIsImhlYWRlciIsIm9jY3VwYXRpb25BZ2UiLCJyZWdFeHBTZWN0aW9ucyIsImdtbm90ZXMiLCJkaXNhYmxlQXR0cmliQXV0byIsImF0dHJpYlZhbHVlIiwiY3JlYXRlRW50aXR5IiwiY2hhcmFjdGVyRGF0YSIsIm5wYyIsInVwZGF0ZUl0ZW1EYXRhIiwibGFzdFdlYXBvblNraWxsIiwicGFpciIsIndlYXBvblNraWxscyIsInBjIiwiaXRlbXNEYXRhIiwid2VhcG9uU2tpbGwiLCJjbG9uZWQiLCJsYW5ndWFnZXMiLCJjbG9uZSIsIm5ld1NraWxsIiwibmVlZHNDb252ZXJzaW9uIiwibmVlZHNDb252ZXJzaW9uUmVzdWx0IiwiY3JlYXRlQWN0b3IiLCJpbnB1dHMiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwidGVzdE1vZGUiLCJjcmVhdHVyZSIsIkNvQzdEaXJlY3RvcnlQaWNrZXIiLCJGaWxlUGlja2VyIiwiYWN0aXZlU291cmNlIiwiYnVja2V0IiwiRGVmYXVsdERpcmVjdG9yeSIsInJhdyIsInByb2Nlc3NIdG1sIiwicGlja2VyIiwicGlja2VyQnV0dG9uIiwiY3JlYXRlRGVmYXVsdERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsInVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSIsImZpbGUiLCJmaWxlbmFtZSIsInVwbG9hZCIsIkZpbGUiLCJDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIiLCJnZXRCYWNrc3RvcnkiLCJiYWNrc3RvcnlKU09OIiwiYmxvY2siLCJjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJkaG9sZUhvdXNlRGF0YSIsIkludmVzdGlnYXRvciIsImJhY2tzdG9yaWVzIiwiQmFja3N0b3J5IiwiUGVyc29uYWxEZXRhaWxzIiwiTmFtZSIsIkNoYXJhY3RlcmlzdGljcyIsIlNUUiIsIkNPTiIsIlNJWiIsIkRFWCIsIkFQUCIsIklOVCIsIlBPVyIsIkVEVSIsIlNhbml0eSIsIlNhbml0eU1heCIsIkhpdFB0cyIsIkhpdFB0c01heCIsIk1hZ2ljUHRzIiwiTWFnaWNQdHNNYXgiLCJMdWNrIiwiTW92ZSIsIkRhbWFnZUJvbnVzIiwiQnVpbGQiLCJPY2N1cGF0aW9uIiwiQWdlIiwiR2VuZGVyIiwiUmVzaWRlbmNlIiwiQmlydGhwbGFjZSIsImV4dHJhY3RTa2lsbHMiLCJTa2lsbHMiLCJTa2lsbCIsInBvc3Nlc2lvbnMiLCJleHRyYWN0UG9zc2Vzc2lvbnMiLCJQb3NzZXNzaW9ucyIsIm1ha2VTa2lsbE5hbWUiLCJkaG9sZUhvdXNlc2tpbGxzIiwic3Vic2tpbGwiLCJoYWxmIiwiZmlmdGgiLCJmaW5kV2VhcG9uU2tpbGxJZCIsImdldEVtYmVkZGVkQ29sbGVjdGlvbiIsImRob2xlaG91c2VQb3NzZXNzaW9ucyIsImlzQXJyYXkiLCJleHRyYWN0V2VhcG9ucyIsImRob2xlaG91c2VXZWFwb25zIiwic2tpbGxuYW1lIiwibWFsZiIsInNhdmVQb3J0cmFpdCIsImJhc2U2NFBvcnRyYWl0IiwiZmlsZU5hbWUiLCJiYXNlNjRSZXNwb25zZSIsImZldGNoIiwiaW1hZ2VCbG9iIiwiYmxvYiIsImNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIiwiZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJjYW4iLCJQb3J0cmFpdCIsIldlYXBvbnMiLCJDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyIsImltcG9ydFR5cGUiLCJjb252ZXJ0NkUiLCJjYW5VcGxvYWQiLCJwbGFjZWhvbGRlciIsIl9vbkpTT05GaWxlU2VsZWN0ZWQiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJnZXRJbnB1dHMiLCJqc29uRmlsZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3J0cmFpdEltYWdlIiwiY2hhcmFjdGVyTmFtZSIsInByZXZpZXciLCJmaWxlcyIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY2hhcmFjdGVySlNPTiIsInBlcnNvbmFsRGV0YWlscyIsInRleHRDb250ZW50IiwicmVhZEFzVGV4dCIsImFjdG9yVHlwZSIsImltcG9ydEFjdG9yIiwiY3JlYXRlZEFjdG9yIiwib25jZSIsIkRyb3BDb0NJRCIsInByb2Nlc3NGb3JtIiwicmVzcG9uc2UiLCJwcm9jZXNzSXRlbSIsIm5vIiwiQ29DN09jY3VwYXRpb25TaGVldCIsIkl0ZW1TaGVldCIsIl9vbkl0ZW1EZWxldGUiLCJfb25Hcm91cEl0ZW1EZWxldGUiLCJfb25Hcm91cENvbnRyb2wiLCJEcmFnRHJvcCIsImNhbGxiYWNrcyIsImRyb3AiLCJjb2xsZWN0aW9uTmFtZSIsIm9wdGlvbmFsU2tpbGwiLCJ1c2VDb0NJRCIsIkNvQ0lkIiwiaXRlbUluZGV4IiwiaGFzT3duZXIiLCJpc0VtYmVkZGVkIiwib2NjdXBhdGlvblBvaW50c1N0cmluZyIsIml0ZW1Qcm9wZXJ0aWVzIiwib2NjdXBhdGlvblByb3BlcnRpZXMiLCJlbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUiLCJvcHRpb25uYWwiLCJtYW5kYXRvcnkiLCJjYXJhYyIsImNhcmFjTmFtZSIsIm9yU3RyaW5nIiwiQ29DN0ludmVzdGlnYXRvcldpemFyZCIsInBhZ2VMaXN0IiwiUEFHRV9OT05FIiwiUEFHRV9JTlRST0RVQ1RJT04iLCJQQUdFX0NPTkZJR1VSQVRJT04iLCJQQUdFX1NFVFVQUyIsIlBBR0VfQVJDSEVUWVBFUyIsIlBBR0VfQ0hBUkFDVElTVElDUyIsIlBBR0VfQVRUUklCVVRFUyIsIlBBR0VfVklFV19BVFRSSUJVVEVTIiwiUEFHRV9PQ0NVUEFUSU9OUyIsIlBBR0VfT0NDVVBBVElPTl9TS0lMTFMiLCJQQUdFX0FSQ0hFVFlQRV9TS0lMTFMiLCJQQUdFX1BPSU5UU19TS0lMTFMiLCJQQUdFX0lOVkVTVElHQVRPUiIsIlBBR0VfQkFDS1NUT1JZIiwiUEFHRV9DUkVBVEUiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2RzIiwiTUVUSE9EX0RFRkFVTFQiLCJNRVRIT0RfUk9MTCIsIk1FVEhPRF9QT0lOVFMiLCJNRVRIT0RfVkFMVUVTIiwiY29jaWRDcmVkaXRSYXRpbmciLCJjb2NpZExhbmd1YWdlT3duIiwicGFnZU9yZGVyIiwicGFnZXMiLCJkZWZhdWx0U2V0dXAiLCJsb2FkQ2FjaGVJdGVtQnlDb0NJRCIsImZpbHRlckNhY2hlSXRlbUJ5Q29DSUQiLCJyZWdleHAiLCJjYWNoZUNvQ0lEIiwiZ2V0Q2FjaGVJdGVtQnlDb0NJRCIsImNvY2lkcyIsImRlZmF1bHRFcmEiLCJnZXRBZ2VBZGp1c3RtZW50cyIsInNldHVwTW9kaWZpZXJzIiwicmVxdWlyZXNBZ2VBZGp1c3RtZW50cyIsImRlZHVjdCIsInNldHVwIiwiY2FuTmV4dCIsImNyZWF0ZUJ1dHRvbiIsInNob3dNb25ldGFyeSIsInN0ZXAiLCJzZXR1cHMiLCJvY2N1cGF0aW9ucyIsImFyY2hldHlwZXMiLCJfZXJhcyIsImNoYXJhY3RlcmlzdGljc01ldGhvZCIsImVuZm9yY2VQb2ludEJ1eSIsInF1aWNrRmlyZVZhbHVlcyIsImhhc0FyY2hldHlwZXMiLCJjb3JlQ2hhcmFjdGVyaXN0aWMiLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsInN1Z2dlc3RlZE9jY3VwYXRpb25zIiwic3VnZ2VzdGVkVHJhaXRzIiwiZW1wdGllcyIsInNldHVwUG9pbnRzIiwicHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMiLCJkZWR1Y3RUb3RhbCIsImRlZHVjdEZyb20iLCJuIiwicmVkdWNlRnJvbSIsImx1Y2tWYWx1ZSIsInBlcnNvbmFsVGV4dCIsInNraWxsSXRlbXMiLCJsYW5ndWFnZU5hbWUiLCJyb3dzIiwiaXNNdWx0aXBsZSIsImlzQ3JlZGl0UmF0aW5nIiwiaXNQaWNrYWJsZSIsImlzT2NjdXBhdGlvbkRlZmF1bHQiLCJpbk9jY3VwYXRpb25Hcm91cCIsIm9jY3VwYXRpb25Ub2dnbGUiLCJwaWNrZWQiLCJkZWxldGVhYmxlIiwiYXJjaGV0eXBlVG9nZ2xlIiwib2NjdXBhdGlvbkdyb3VwcyIsImlzQXJjaGV0eXBlRGVmYXVsdCIsImNyZWRpdFJhdGluZ09rYXkiLCJyZW1haW5pbmciLCJ0b3RhbFBvaW50cyIsIm51bSIsImlzT2NjdXBhdGlvbiIsImlzQXJjaGV0eXBlIiwic2hvd0NyZWRpdFJhdGluZyIsImFsbEJhY2tzdG9yaWVzIiwiY2FjaGVCYWNrc3RvcmllcyIsInJvbGUiLCJVU0VSX1BFUk1JU1NJT05TIiwiQUNUT1JfQ1JFQVRFIiwiZGVmYXVsdFJvbGUiLCJrZXlwcmVzcyIsInNyY0VsZW1lbnQiLCJ0YWdOYW1lIiwiY2hhckNvZGUiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25Sb2xsQWxsIiwiX29uUm9sbEVkdSIsIl9vblJvbGxMdWNrIiwiX29uQ2hhbmdlU2F2ZUNoYXJhY3RlcmlzdGljIiwiX29uVG9nZ2xlU2tpbGwiLCJfb25DbGlja1BpY2tTa2lsbCIsIl9vbkNsaWNrU2tpbGxTcGVjaWFsIiwiX29uQ2xpY2tSZW1vdmVTa2lsbCIsIl9vbkNoYW5nZVNraWxsUG9pbnRzIiwiX29uQ2hhbmdlQmFja3N0b3J5VGV4dCIsIl9vblJvbGxCYWNrc3RvcnkiLCJfb25SZXNldEJhY2tzdG9yeSIsInJvbGxNZXNzYWdlIiwiQ0hBVF9URU1QTEFURSIsImdldFRvb2x0aXAiLCJhZGRJdGVtVG9MaXN0IiwiaW52ZXN0aWdhdG9ySXRlbXMiLCJpbnBsYWNlIiwiY2xlYXJTZXR1cFBvaW50cyIsInNldFNraWxsTGlzdHMiLCJwbGFjZWFibGUiLCJuYW1lQ3JlZGl0UmF0aW5nIiwiY2hhcmFjdGVyaXN0aWNLZXkiLCJfY2FuRHJhZ1N0YXJ0Iiwic2VsZWN0b3IiLCJfY2FuRHJhZ0Ryb3AiLCJkZXN0aW5hdGlvbiIsInRlbXAiLCJwYXJlbnROb2RlIiwidG9nZ2xlS2V5IiwiZ3Vlc3NHcm91cEZyb21LZXkiLCJhZGp1c3RtZW50IiwidGV4dGFyZWEiLCJyb2xsdGFibGUiLCJ0YWJsZVJlc3VsdCIsIm1vZGlmeU9mZnNldCIsIm1vZGlmeUNoYXJhY3RlcmlzdGljIiwicmVyb2xsc0VuYWJsZWQiLCJvYmpUb3RhbCIsImdldFBhZ2VOdW1iZXIiLCJkaXJlY3Rpb24iLCJjbGFzc05hbWUiLCJkZWZhdWx0T3duZXJzaGlwIiwic3RhcnRlZCIsIm5vdyIsImJ1ZmZlciIsImRlZmF1bHRRdWFudGl0eSIsImZsYXRLZXlzIiwicGFnZU51bWJlciIsInNjcm9sbFRvcCIsImF0dGVtcHRUb0NyZWF0ZSIsIm5vcm1hbGl6ZUNoYXJhY3RlckRhdGEiLCJjcmVhdGVDaGFyYWN0ZXIiLCJwYXlsb2FkIiwic291cmNlSXRlbSIsImF2YXRhciIsIlRPS0VOX0RJU1BPU0lUSU9OUyIsIkZSSUVORExZIiwiY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEiLCJmdW5jdGlvbklkIiwib2ZmIiwiY2FjaGVJdGVtcyIsIkNvQzdNZW51TGF5ZXIiLCJQbGFjZWFibGVzTGF5ZXIiLCJvYmplY3RzIiwibGF5ZXJPcHRpb25zIiwiQ29DN01lbnUiLCJnZXRCdXR0b25zIiwiY29udHJvbHMiLCJjb2M3Z210b29scyIsImxheWVyIiwidG9vbHMiLCJvbkNsaWNrIiwiY29jN0RldlRvb2xzIiwicmVuZGVyQ29udHJvbHMiLCJrZWVwZXJNZW51IiwiYWZ0ZXIiLCJDb0M3Q2FudmFzIiwiQ09DN19UWVBFU19TVVBQT1JURUQiLCJvbkRyb3BTb21ldGhpbmciLCJncmlkU2l6ZSIsImRyb3BUYXJnZXRUb2tlbnMiLCJiZXR3ZWVuIiwiYXBwSWQiLCJjYWxsQmFjayIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJNYW51YWwiLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJhbGxvd1dpemFyZCIsImFsbG93ZWQiLCJDb0M3U3BlbGwiLCJjYXN0IiwiaXNPd25lZCIsImNvc3RzIiwibG9zc2VzIiwiY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzIiwibWFnaWNQb2ludHMiLCJjb252ZXJ0ZWRIaXRQb2ludHMiLCJjb252ZXJ0ZWRNYWdpY1BvaW50cyIsImFjdG9yTWFnaWNQb2ludHMiLCJvcmlnaW5hbE1hZ2ljUG9pbnRzIiwiaGl0UG9pbnRzIiwicmVzb2x2ZUxvc3NlcyIsImdyYW50U2FuaXR5TG9zcyIsImdldEhUTUwiLCJzYW5pdHlMb3NzIiwic2FuaXR5Q2hlY2siLCJib29rSWQiLCJib29rIiwiQ29DN0Jvb2siLCJhZGRTcGVsbHMiLCJzcGVsbERldGFpbCIsImxlYXJuZWQiLCJhdHRlbXB0SW5pdGlhbFJlYWRpbmciLCJjaGFuZ2VQcm9ncmVzcyIsImluaXRpYWxSZWFkaW5nIiwiZnVsbFN0dWR5IiwiY29tcGxldGVGdWxsU3R1ZHkiLCJjaGVja0V4aGF1c3Rpb24iLCJncmFudEZ1bGxTdHVkeSIsImFjdG9yTXl0aG9zVmFsdWUiLCJkZXZlbG9wbWVudHMiLCJteXRob3NGaW5hbCIsImdhaW5zIiwiZmluYWwiLCJncmFudFNraWxsRGV2ZWxvcG1lbnQiLCJyb2xsU2FuaXR5TG9zcyIsImZ1bGxTdHVkaWVzIiwiZ3JhbnRJbml0aWFsUmVhZGluZyIsIm90aGVycyIsImdyYW50U3BlbGxMZWFybmluZyIsInNwZWxsbGVhcm5lZCIsImV4aXN0aW5nU2tpbGwiLCJzaG93RGV2ZWxvcG1lbnRzVGFibGUiLCJyZWRvRnVsbFN0dWR5IiwiYXR0ZW1wdFNwZWxsTGVhcm5pbmciLCJFQ0NfQ0xBU1MiLCJQRVJNSVNTSU9OX1RZUEUiLCJTVEFURSIsIkdNVXBkYXRlIiwiY2FyZENsYXNzTmFtZSIsIkVuaGFuY2VkQ2hhdENhcmQiLCJhZHZpc2UiLCJFbmhhbmNlZENoYXRDYXJkTGliIiwidHlwZXMiLCJpbmplY3RDU1MiLCJlbmhhbmNlZENoYXRDYXJkc0xpYiIsInJlZ2lzdGVyIiwiY2FyZENvbnN0cnVjdG9ycyIsImNhcmRDb25zdHJ1Y3RvciIsIm9vYyIsImRlZXBDbG9uZSIsImF0dGFjaE9iamVjdCIsIm9iamVjdERhdGFTdHJpbmciLCJlY2NDbGFzcyIsImxvY2FsQ29tcHV0ZSIsIkV4ZWN1dGVHTVVwZGF0ZSIsIkVFQ19BQ1RJT04iLCJkZXRhY2hEYXRhIiwiX29uQ2hhbmdlIiwic2V0VmlzaWJpbGl0eSIsInNldFBlcm1pc3Npb24iLCJzZXRTdGF0ZSIsInNldFJhZGlvU3RhdGUiLCJzcGxpdGVkIiwiZWNjVmlzaWJpbGl0eSIsImhhc1Blcm0iLCJlY2NQZXJtaXNzaW9ucyIsInJlc3RyaWN0ZWRUbyIsInZpc2lvbiIsInBlcm1pc3Npb25zQXJyYXkiLCJ3aGl0ZUxpc3QiLCJpc0F1dGhvciIsImFzc2lnbk9iamVjdHMiLCJuZXdEYXRhIiwiZm9ybVVwZGF0ZSIsImFjdGlvblVwZGF0ZSIsIm9yaWdpbmFsRGlzcGxheVN0eWxlIiwidXBkYXRlQ2FyZCIsInNhdmVEYXRhIiwiaHRtbWxDYXJkIiwiQ2FyZENsYXNzIiwidW5zZXREYXRhIiwidG9nZ2xlRGF0YSIsImJOYW1lIiwiX3BhcnRpY2lwYW50IiwiX2ZldGNoIiwiX2RvYyIsImlzQWN0b3IiLCJoYXNBY3RvciIsImhhc1ZlaGljbGUiLCJpc0FjdGl2ZSIsInZlaGljbGUiLCJkcml2ZXIiLCJfZHJpdmVyIiwidmVoaWNsZUtleSIsIl92ZWhpY2xlIiwiaGFzVmFsaWRNb3YiLCJoYXNNYXhCb251c0RpY2UiLCJhZGRCb251c0RpY2UiLCJyZW1vdmVCb251c0RpY2UiLCJyZXNldEJvbnVzRGljZSIsImhhc0JvbnVzRGljZSIsImhhc09uZUJvbnVzRGljZSIsImhhc1R3b0JvbnVzRGljZSIsImNhbkFzc2lzdCIsImFzc2lzdCIsImNhbkJlQ2F1dGlvdXMiLCJoYXNEcml2ZXIiLCJoYXNWYWxpZERleCIsImhhc0FHdW5SZWFkeSIsImlzQ2hhc2VyIiwiY2hhc2VyIiwiaXNQcmV5IiwiaXNWYWxpZCIsIm1vdkFkanVzdG1lbnQiLCJzcGVlZENoZWNrIiwicm9sbERhdGFTdHJpbmciLCJhZGp1c3RlZE1vdiIsImhhc01vdkFkanVzdG1lbnQiLCJoYXNCb251c01vdiIsImhhc01hbHVzTW92IiwidG9vU2xvdyIsImV4Y2x1ZGVkIiwiaW5jbHVkZUluQ2hhc2UiLCJzbG93ZXN0IiwiZmFzdGVzdCIsImNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyIsIm1pbk1vdiIsIm1vdmVtZW50QWN0aW9uIiwiY3VycmVudE1vdmVtZW50QWN0aW9ucyIsImhhc01heE12dEFjdGlvbnMiLCJoYXNOb012dEFjdGlvbnMiLCJhZGRNb3ZlbWVudEFjdGlvbnMiLCJhbHRlck1vdmVtZW50QWN0aW9ucyIsIm1vdmVtZW50QWN0aW9uQXJyYXkiLCJiYXNlQXJyYXkiLCJmaWxsIiwiaW5saW5lUm9sbCIsIm1vZGlmaWVyQ3NzIiwiaGFzT3B0aW9ucyIsImdhbWVJdGVtIiwicmVmIiwicmVmU2V0IiwiaXNDaGFyYWN0ZXJpc3RpYyIsImNhbkJlUm9sbGVkIiwic29ydEJ5Um9sZUFuZERleCIsIkNoYXNlT2JzdGFjbGVDYXJkIiwic3RyaW5ncyIsInRvdGFsQWN0aW9uQ29zdCIsImJyZWFrYWJsZU9ic3RhY2xlIiwib2JzdGFjbGUiLCJiYXJyaWVyIiwiaGFzSGl0UG9pbnRzIiwidmFsaWRDaGVjayIsInN0YXRlcyIsIm9ic3RhY2xlRGVmaW5lZCIsImhhemFyZCIsInRyeVRvTmVnb3RpYXRlIiwidHJ5VG9CcmVhayIsImJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkIiwicGFydGljaXBhbnQiLCJjaGFzZSIsImdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwicGFydGljaXBhbnRVdWlkIiwidmFsaWRTa2lsbCIsImNoZWNrVGhyZXNob2xkIiwiYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwiZHVtbXlBY3RvciIsImNhblRha2VDYXV0aW91c0FwcHJvYWNoIiwiY3VzdG9tV2VhcG9uIiwid2VhcG9uQ2hvaWNlIiwiY2hlY2tSb2xsUmVxdWVzdCIsImNhbkFza1JvbGwiLCJFbnRlclZhbHVlVGl0bGUiLCJkYW1hZ2VTdGF0dXMiLCJvYnN0YWNsZURhbWFnZVJvbGwiLCJvYnN0YWNsZURhbWFnZVJvbGxlZCIsIm9ic3RhY2xlRGFtYWdlIiwiaW5saW5lRGFtYWdlUm9sbCIsInRvdGFsQ2F1dGlvdXNBcHByb2FjaCIsImNhdXRpb3VzU3RhdHVzIiwiY2F1dGlvdXNBcHByb2FjaFR5cGUiLCJjb25zdW1lQm9udXNEaWNlIiwibW92ZVBsYXllciIsIm9ic3RhY2xlUGFzc2VkIiwiY2hlY2tGYWlsZWQiLCJwbGF5ZXJBY3Rpb25EZWZpbmVkIiwicGxheWVySW50ZW50aW9ucyIsImNoZWNrUm9sbGVkIiwiY2FyZFJlc29sdmVkIiwicGxheWVyRGFtYWdlVGFrZW4iLCJvYnN0YWxjZURlZmluaXRpb25DaGFuZ2VkIiwibGlzdENoYW5nZXMiLCJoYXNEYW1hZ2UiLCJpbmxpbmVEYW1hZ2VUYWtlblJvbGwiLCJmYWlsZWREYW1hZ2VSb2xsIiwidG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiIsImhhc0FjdGlvbkNvc3QiLCJhY3Rpb25Mb3N0IiwiaW5saW5lQWN0aW9uTG9zdFJvbGwiLCJmYWlsZWRBY3Rpb25Sb2xsIiwiZmluYWxPdXRjb21lIiwidG90YWxEYW1hZ2UiLCJyZWZsZWN0T2JzdGFsZUNoYW5nZXMiLCJmYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQiLCJ0b3RhbE9ic3RhY2xlRGFtYWdlIiwib2JzdGFjbGVEZXN0b3llZCIsIkhpdFBvaW50cyIsImFjdGl2ZVBhcnRpY2lwYW50RGF0YSIsIm9ic3RhY2xlRGV0YWlscyIsInBhcnRpY2lwYW50RGF0YSIsImdldFBhcnRpY2lwYW50RGF0YSIsImdldExvY2F0aW9uRGF0YSIsImxvY2F0aW9uVXVpZCIsImNoYXNlVXVpZCIsIl9jaGFzZSIsImFjdG9yU2tpbGwiLCJ2YWxpZEZhaWxlZFJvbGxzIiwiZmFpbGVkQ2hlY2tEYW1hZ2UiLCJhY3Rpb25Db3N0IiwiZmFpbGVkQWN0aW9uQ29zdCIsIndlYXBvbnNPcHRpb25zIiwiaXRlbVR5cGVzIiwidyIsImFoYmQiLCJ1bnNoaWZ0IiwiY3VzdG9tV2VhcG9uRGFtYWdlIiwidXNlZFdlYXBvbiIsImluZmxpY3RlZERhbWFnZUZvcm11bGEiLCJ2YWxpZE9ic3RhY2xlRGFtYWdlIiwiZGFtYWdlUm9sbFJlcXVlc3QiLCJ2YWxpZGF0ZUNhcmQiLCJsb2FjdGlvbkNoYW5nZWQiLCJwYXJ0aWNpcGFudENoYWdlZCIsIm9ic3RhY2xlVXBkYXRlIiwicGFydGljaXBhbnRVcGRhdGUiLCJkaWZmIiwibmV3IiwicmVtYWluaW5nSHAiLCJ0YXJnZXRMb2NhdGlvbiIsImZvcndhcmQiLCJnZXRMb2NhdGlvblNoaWZ0IiwibW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiIsInNjcm9sbFRvTG9jYXRpb24iLCJhY3RpdmF0ZUxvY2F0aW9uIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVQYXJ0aWNpcGFudCIsImFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiIsImRlZmluZU9ic3RhY2xlIiwidHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSIsInRyeVRvQnJlYWtEb3duT2JzdGFjbGUiLCJjYW5jZWxPYnN0YWNsZURlZmluaXRpb24iLCJjYW5jZWxCcmVha09yUGFzc0Nob2ljZSIsInJlcXVlc3RSb2xsIiwidGFrZUNhdXRpb3VzQXBwcm9hY2giLCJyb2xsU2tpbGxDaGVjayIsInVzZUx1Y2siLCJyb2xsRmFpbENvbnNlcXVlbmNlcyIsImFza1JvbGxPYnN0YWNsZURhbWFnZSIsInJvbGxPYnN0YWNsZURhbWFnZSIsIm5hbWVzIiwibmV3T2JzdGFjbGUiLCJvbGQiLCJDb0M3Q2hhc2UiLCJwYXJ0aWNpcGFudHMiLCJwTGlzdCIsInByZXlzIiwiY2hhc2VycyIsInBhcnRpY3BhbnQiLCJwYXJ0aWNpcGFudHNPYmplY3QiLCJnZXRQYXJ0aWNpcGFudExvY2F0aW9uIiwiYWN0aXZlQWN0b3IiLCJwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92IiwiYWN0dWFsUGFydGljaXBhbnRzIiwicGFydGljaXBhbnRzQnlJbml0aWF0aXZlIiwiYWxsSGF2ZVZhbGlkTW92IiwiZXZlcnkiLCJhbGxIYXZlU3BlZWRSb2xsIiwibG9jYXRpb25zIiwibHAiLCJnZXRQYXJ0aWNpcGFudCIsIm5leHRBY3RpdmVQYXJ0aWNpcGFudCIsInNsb3dlc3RQcmV5IiwiZmFzdGVzdENoYXNlciIsImluY2x1ZGVMYXRlY29tZXJzIiwiaW5jbHVkZUVzY2FwZWQiLCJzbG93ZXN0UGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNEYXRhIiwiY2xlYW5QYXJ0aWNpcGFudExpc3QiLCJwYXJ0aWNpYW50VXVpZCIsInBhcnRpY2lwYW50SW5kZXgiLCJvdmVyd3JpdGUiLCJhc3Npc3RQYXJ0aWNpcGFudCIsImFzc2lzdGFudFV1aWQiLCJiZW5lZmljaWFyeVV1aWQiLCJhc3Npc3RhbnQiLCJiZW5lZmljaWFyeSIsImFzc2lzdGFudEluZGV4IiwiYmVuZWZpY2lhcnlJbmRleCIsInVzZU1vdmVtZW50QWN0aW9ucyIsImFjdGlvbnMiLCJ0b2dnbGVCb251c0RpY2UiLCJkaWNlTnVtYmVyIiwiY2F1dGlvdXNBcHByb2FjaCIsImFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50IiwiYWN0aXZhdGVQYXJ0aWNpcGFudCIsImRhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSIsImFjdGl2ZUxvY2F0aW9uIiwicFV1aWQiLCJwYXJ0aWNpcGFudHNEYXRhVXBkYXRlIiwicGFydGljaXBhbnRMb2NhdGlvbiIsImxvY2F0aW9uc0RhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSIsImNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayIsIm1vdmVQYXJ0aWNpcGFudCIsInByb2dyZXNzVG9OZXh0Um91bmQiLCJyb2xsVXVpZCIsIm1ldGhvZCIsImluaXRUcmFjayIsInByb2Nlc3NMb2NhdGlvbnMiLCJkdXBsaWNhdGVEYXRhIiwibGFzdCIsInN0YXJ0aW5nTGluZSIsImxvY2F0aW9uc0luZGV4U3RhcnQiLCJpbml0SW5kZXhTdGFydCIsImxvY2F0aW9uc0xlbmd0aCIsInN0YXJ0aW5nSW5kZXgiLCJnZW5lcmF0ZU5ld1V1aWQiLCJjaGFzZUxvY2F0aW9ucyIsImVuZCIsImNoYXNlVHJhY2siLCJjaGFzZXJzTWluTW92IiwiZmluZE1pbk1vdiIsImNoYXNlcnNNYXhNb3YiLCJmaW5kTWF4TW92IiwicHJleXNNaW5Nb3YiLCJwcmV5c01heE1vdiIsInN0YXJ0aW5nUmFuZ2UiLCJ1cGRhdGVMb2NhdGlvbnNMaXN0IiwidXBkYXRlZExpc3QiLCJjbGVhbkxvY2F0aW9uc0xpc3QiLCJsb2NhdGlvbkluZGV4IiwicGFydGlwYW50c1V1aWRBcnJheSIsImluc2VydExvY2F0aW9uIiwiaW5zZXJ0QXRVdWlkIiwibmV3TG9jYXRpb25JbmRleCIsIm5ld0xvY2F0aW9uIiwibG9jRGF0YSIsInJlbW92ZUxvY2F0aW9uIiwiZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEiLCJoYXNQYXJ0aWNpcGFudCIsImFjdGl2ZUFjdG9ySGFzU2tpbGwiLCJhY3RpdmVBY3RvclRlc3QiLCJwcmV2aW91c0xvY2F0aW9uIiwiYWN0aXZlSW5kZXgiLCJuZXh0TG9jYXRpb24iLCJsb2NhdG9yRHJvcHBlZCIsInNldExvY2F0aW9uQ29vcmRpbmF0ZXMiLCJjb29yZGluYXRlcyIsImNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyIsImNsZWFyTG9jYXRpb25Db29yZGluYXRlcyIsImN1dFRvVGhlQ2hhc2UiLCJzdGFydCIsInJlc3RhcnQiLCJzZXRjaGFzZVRyYWNrU2Nyb2xsIiwic3RvcCIsImRlc3RpbmF0aW9uSW5kZXgiLCJyZW1vdmVQYXJ0aWNpcGFudCIsIm5ld1BhcnRpY2lwYW50c0RhdGEiLCJsb2NhdGlvbnNEYXRhIiwiYWRkUGFydGljaXBhbnQiLCJ1bmlxdWUiLCJyZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyIsImVkaXRQYXJ0aWNpcGFudCIsImxvY2F0aW9uTW92ZWQiLCJvcmlnaW5JbmRleCIsInRvdGFsTW92ZSIsIm9sZFBhcnRpY2lwYW50c0xpc3QiLCJtb3ZlVG9rZW4iLCJwYXJ0aWNwYW50RG9jdW1lbnQiLCJmb3VuZFRva2VucyIsInZpZXdlZCIsInRhcmdldFJlY3QiLCJQSVhJIiwiUmVjdGFuZ2xlIiwiZm91bmRGcmVlU3BhY2UiLCJvdmVybGFwaW5nVG9rZW4iLCJib3VuZHMiLCJpbnRlcnNlY3RzIiwic2hvd1Rva2VuTW92ZW1lbnQiLCJhbmltYXRlIiwidG8iLCJjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZUxvY2F0aW9uRWxlbWVudCIsImxlZnRTY3JvbGwiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJwcmV2IiwicmVtU3RyaW5nIiwicmVtU2l6ZSIsInBDb3VudCIsIl90YWJzIiwiYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwYXJ0aWNpY3BhbnREYXRhIiwiSW50bCIsIkNvbGxhdG9yIiwiY29tcGFyZSIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0IiwiQ29DN1NraWxsIiwibmV3UHJvcGVydGllcyIsImhhc0FjdGl2ZUVmZmVjdHMiLCJhY3RpdmVFZmZlY3RzIiwiZWZmZWN0S2V5RnVsbCIsImVmZmVjdEtleVNob3J0IiwiZGVsdGEiLCJleHAiLCJDb0M3VmVoaWNsZSIsIkNvQzdEZWNhZGVyRGllIiwidGVybURhdGEiLCJERU5PTUlOQVRJT04iLCJDb0M3RGVjYWRlckRpZU90aGVyIiwiU0VUVElOR1MiLCJwdWxwUnVsZXMiLCJpbml0aWF0aXZlUnVsZSIsImNob2ljZXMiLCJvbkNoYW5nZSIsInJ1bGUiLCJfc2V0SW5pdGlhdGl2ZU9wdGlvbnMiLCJwdWxwUnVsZURvdWJsZU1heEhlYWx0aCIsInB1bHBSdWxlVGFsZW50cyIsInB1bHBSdWxlRmFzdGVyUmVjb3ZlcnkiLCJwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzIiwiZGVjaW1hbHMiLCJDb21iYXQiLCJDb0M3R2FtZVJ1bGVTZXR0aW5ncyIsInRydWUiLCJmYWxzZSIsInNldHRpbmciLCJwdWxwU2VsZWN0aW9uIiwicmVnaXN0ZXJTZXR0aW5ncyIsIm9uQ2hhbmdlUHVscFNlbGVjdCIsIm9uQ2xpY2tQdWxwIiwib25SZXNldERlZmF1bHRzIiwiY2hlY2tib3giLCJDb0M3QXJjaGV0eXBlU2hlZXQiLCJjaGFyYWNOYW1lIiwiZW5yaWNoZWRTdWdnZXN0ZWRPY2N1cGF0aW9ucyIsImVucmljaGVkU3VnZ2VzdGVkVHJhaXRzIiwiY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyIsIkNvQzdCb29rU2hlZXQiLCJzcGVsbHNMZWFybmVkIiwiZXhoYXVzdGVkIiwic3R1ZHlDb21wbGV0ZWQiLCJzcGVsbExpc3RFbXB0eSIsImVucmljaGVkQ29udGVudCIsIl9vbkRlbGV0ZSIsIl9vblNwZWxsRGV0YWlsIiwibW9kaWZ5T3RoZXJzR2FpbnMiLCJtb2RpZnlUeXBlIiwiQ29DN0NvbnRhaW5lclNoZWV0Iiwic2xpZGVUb2dnbGUiLCJDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIiwicGVybWlzc2lvbnMiLCJfb25Ecm9wUGFydGljaXBhbnQiLCJkcmFnc3RhcnQiLCJfb25Ub2tlblNlbGVjdG9yRHJhZ1N0YXJ0IiwiX29uQWN0aW9uIiwidmFsaWRhdGVQYXJ0aWNpcGFudCIsInNwZWVkQ2hlY2tSZWFkT25seSIsImluaXRSZWFkT25seSIsIm9wdGlvbnNMaXN0Iiwic2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCIsImRyb3BTdHJpbmciLCJhZGRUb2tlblRvQ2hhc2UiLCJvdmVycmlkZU1vdmVtZW50QWN0aW9uIiwicmVjYWxjdWxhdGlvbk5lZWRlZCIsInBhcnRpY2lwYW50RXhjbHVkZWQiLCJtb3ZlbWVudEFjdGlvbkRlbHRhIiwiaW5jbHVkZUxhc3RDb21tZXJzIiwiZXhjbHVkZWRCZWNhdXNlIiwiQ29DN0NoYXNlU2hlZXQiLCJfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCIsIl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IiwiX29uQ2hhbmdlU2lkZSIsIl9vbkRlbGV0ZVBhcnRpY2lwYW50IiwiX29uUmVzZXRSb2xsIiwiX29uRGVsZXRlRHJpdmVyIiwiX29uQWRkUGFydGljaXBhbnQiLCJfb25Sb2xsUGFydGljaXBhbnQiLCJfb25Mb2NhdGlvbkNsaWNrIiwiX29uT2JzdGFjbGVUeXBlQ2xpY2siLCJfb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkIiwiX29uQ2hhc2VDb250cm9sQ2xpY2tlZCIsIl9vbkxvY2F0aW9uQ29udHJvbENsaWNrIiwiX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IiwiX29uUGluTG9jYXRpb25EcmFnU3RhcnQiLCJfb25DaGFzZVBhcnRpY2lwYW50Q2xpY2siLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AiLCJfb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiZHJhZ292ZXIiLCJfb25EcmFnRW50ZXIiLCJfb25EcmFnTGVhdmUiLCJfZ2V0U3VibWl0RGF0YSIsImVkaXRvcnMiLCJjbGVhbmVkIiwiY2xlYW4iLCJvcmlnaW5hbExvY2F0aW9uIiwic3ViVHlwZSIsImZpbmRQYXJ0aWNpcGFudEluZGV4Iiwic2V0U2Nyb2xsIiwiaW5pdGlhbE9wZW5pbmciLCJzY3JvbGwiLCJhY3RpdmF0ZVRhYiIsInNjcm9sbFRvIiwiYmVoYXZpb3IiLCJmaW5kTG9jYXRpb25JbmRleCIsImZpbmRMb2NhdGlvbiIsImxVdWlkIiwidG9nZ2xlUGFydGljaXBhbnRHdW4iLCJfb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMiLCJkcmFnSWNvbiIsInNldERyYWdJbWFnZSIsImxvY2F0aW9uRWxlbWVudCIsImRyYWdFdmVudCIsIm9sZExvY2F0aW9uIiwiX29uRHJhZ092ZXIiLCJhbHRlclBhcnRpY2lwYW50Iiwic3RhbmRieVRleHQiLCJzdGFuZGJ5UmlnaHRJY29uIiwib2xkUGFydGljaXBhbnQiLCJ0cCIsImdldFR5cGUiLCJDb0M3SXRlbVNoZWV0VjIiLCJDb0M3SXRlbVNoZWV0IiwiQ29DN0pvdXJuYWxTaGVldCIsIkpvdXJuYWxTaGVldCIsIkNvQzdNYWNyb0NvbmZpZyIsIk1hY3JvQ29uZmlnIiwiQ29DN1BsYXlsaXN0Q29uZmlnIiwiUGxheWxpc3RDb25maWciLCJDb0M3Um9sbFRhYmxlQ29uZmlnIiwiUm9sbFRhYmxlQ29uZmlnIiwiQ29DN1NjZW5lQ29uZmlnIiwiU2NlbmVDb25maWciLCJDb0M3U2V0dXBTaGVldCIsIl9vbkFkZEJpbyIsIl9vblJlbW92ZVNlY3Rpb24iLCJvdGhlckl0ZW1zIiwiaXRlbXNMaXN0RW1wdHkiLCJDb0M3U2tpbGxTaGVldCIsIl9zaGVldFRhYiIsImhhZE5vbkNoYXJhY3Rlck93bmVyIiwiaXNTcGVjaWFsaXplZCIsImNhbk1vZGlmeVNwZWMiLCJDb0M3U3BlbGxTaGVldCIsIkNvQzdTdGF0dXNTaGVldCIsInN0YXR1c1R5cGUiLCJlbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMiLCJDb0M3VGFsZW50U2hlZXQiLCJ0YWxlbnRUeXBlIiwiQ29DN1ZlaGljbGVTaGVldCIsImFybWVkIiwiX29uQWRkQXJtb3IiLCJfb25SZW1vdmVBcm1vciIsIl9vblRvZ2dsZUV4cGFuZCIsIm9sZFNpemUiLCJDb0M3V2VhcG9uU2hlZXQiLCJjb21iYXRTa2lsbCIsInByaWNlIiwiZW5yaWNoZWREZXNjcmlwdGlvblNwZWNpYWwiLCJfb25Qcm9wZXJ0eUNsaWNrIiwicGVyZm9ybUZpbHRlciIsImVyYUVsZW1lbnQiLCJuYW1lRmlsdGVyIiwiQ29DSUQiLCJjb21wZW5kaXVtSW5kZXhGaWVsZHMiLCJKb3VybmFsRW50cnkiLCJQbGF5bGlzdCIsIlJvbGxUYWJsZSIsIlNjZW5lIiwiZ2FtZVByb3BlcnR5TG9va3VwIiwiZG9jdW1lbnROYW1lTG9va3VwIiwiZXJhVGV4dCIsIm1ha2VHcm91cFJlZ0V4IiwibGFuZ0ZhbGxiYWNrIiwibm90bWlzc2luZyIsInNwbGl0cyIsInJneCIsInJlZ0V4UGFydHMiLCJmcm9tQ29DSURSZWdleEFsbCIsImRvY3VtZW50c0Zyb21Xb3JsZCIsInByb2dyZXNzQmFyIiwiU2NlbmVOYXZpZ2F0aW9uIiwiZGlzcGxheVByb2dyZXNzQmFyIiwicGN0IiwiZmlsdGVyQWxsQ29DSUQiLCJjb21wZW5kaWFEb2N1bWVudHMiLCJkb2N1bWVudHNGcm9tQ29tcGVuZGlhIiwiYWxsRG9jdW1lbnRzIiwiZmlsdGVyQmVzdENvQ0lEIiwiYmVzdE1hdGNoRG9jdW1lbnRzIiwiZG9jQ29DSUQiLCJjdXJyZW50RG9jIiwiZG9jUHJpb3JpdHkiLCJNSU5fU0FGRV9JTlRFR0VSIiwiZXhpc3RpbmdQcmlvcml0eSIsImRvY0VyYXMiLCJkb2NMYW5nIiwiZXhpc3RpbmdMYW5nIiwiZ2FtZVByb3BlcnR5IiwiZ2V0R2FtZVByb3BlcnR5IiwiY2FuZGlkYXRlRG9jdW1lbnRzIiwibWF0Y2hpbmdFcmFzIiwiY29tcGFyZUNvQ0lEUHJpbyIsImdldERvY3VtZW50VHlwZSIsInNjaGVtYSIsImluZGV4ZWQiLCJnZXRJbmRleCIsImluZGV4SW5zdGFuY2VzIiwiamUiLCJydCIsIkNhcmQiLCJsb2FkVGVtcGxhdGVzIiwicHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMiLCJyZWdpc3Rlck1lbnUiLCJyZXN0cmljdGVkIiwid29ybGQiLCJZIiwiTiIsIm5vYm9keSIsImV2ZXJ5b25lIiwiaWdub3JlIiwiYWx3YXlzIiwiY3JlYXRpb24iLCJuZXZlciIsIl9zZXRSb290Rm9udFNpemUiLCJzaWRlYmFyIiwiY29udGFpbiIsImhvb2tzIiwiQWN0b3JzIiwidW5yZWdpc3RlclNoZWV0IiwicmVnaXN0ZXJTaGVldCIsIm1ha2VEZWZhdWx0IiwiSXRlbXMiLCJTY2VuZXMiLCJKb3VybmFsIiwiUm9sbFRhYmxlcyIsIk1hY3JvcyIsIlBsYXlsaXN0cyIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImhhc2giLCJTZXQiLCJ1bmNvbW1vbiIsImNvbXBlbmRpdW1GaWx0ZXIiLCJEaWNlRmFjdG9yeSIsInN5c3RlbXMiLCJkMTAwIiwiZGljZURlY2FkZXIiLCJnZXRQcm90b3R5cGVPZiIsImhlaWdodFRleHQiLCJoZWlnaHRUaXAiLCJ3aWR0aFRpcCIsImNsZWFyVGltZW91dCIsIkNvQzdUb3VyIiwiVG91ciIsIndhaXRGb3JFbGVtZW50IiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyIiwiZGlzY29ubmVjdCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiX3ByZVN0ZXAiLCJzdGVwSW5kZXgiLCJjdXJyZW50U3RlcCIsInNpZGViYXJUYWIiLCJfcG9zdFN0ZXAiLCJoYXNOZXh0IiwiaXNSZXNldHRpbmciLCJyZXNldCIsIkVuYWJsZVZhcmlhbnRSdWxlc0VuIiwiY2FuQmVSZXN1bWVkIiwic3RlcHMiLCJsb2NhbGl6YXRpb24iLCJFbmFibGVWYXJpYW50UnVsZXNGciIsImluc3RydWN0aW9uc1ZlcnNpb24iLCJyZWFkTWUiLCJ0b3VycyIsInRvdXJOYW1lIiwicmVnaXN0ZXJUb3VycyIsIkNvQzdIb29rcyIsImxpc3RlbiIsInRva2VuRG9jdW1lbnQiLCJjcmFldG9ySWQiLCJfb2JqZWN0IiwiYWRkRGljZVByZXNldCIsImZvbnRTY2FsZSIsImVudGl0eUNyZWF0ZVNlbGVjdFRhZyIsImVudGl0eVNvcnRlZExpc3QiLCJzaG93RXhwZXJpbWVudGFsIiwiZW50aXR5T3B0aW9uIiwiY2FwaXRhbGl6ZSIsImVtcHR5Iiwic2Vjb25kIiwicGxheWVyTGlzdCIsImluc2VydEFmdGVyIiwiZGllVGVybXMiLCJ0YWciLCJnbWNyZWF0ZW1lc3NhZ2VhcyIsIm1lbGVlVGFyZ2V0IiwiZ210cmFkZWl0ZW10byIsIkNvQzdTeXN0ZW1Tb2NrZXQiLCJjYWxsU29ja2V0IiwicmVxdWVzdEtlZXBlckFjdGlvbiIsInJlcXVlc3RVc2VyQWN0aW9uIiwiZXJyb3JJZk1pc3NpbmciLCJpbmNsdWRlU2VsZiIsIl9vbkxlZnRDbGljayIsInN5c3RlbVRhYiIsImJlZm9yZSIsImNhcmRjbGFzcyIsInNvY2tldGxpYiIsInJlZ2lzdGVyU3lzdGVtIiwiaW5pdEVDQyIsImNvbW1hbmRzIiwicmVzIiwidG9Mb2NhbGl6ZSIsImxvY2FsaXplZCIsImVmZmVjdEluZGV4IiwiZWZmZWN0TmFtZUtleSIsInN0YXR1c0tleSIsImRpcmVjdG9yeSIsIkl0ZW1EaXJlY3RvcnkiLCJpdGVtRWxlbWVudCIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImFjdGl2YXRlR2xvYmFsTGlzdGVuZXIiLCJ0YWJsZUNob2ljZSIsImJvdXRPZk1hZG5lc3NfU3VtbWFyeSIsImJvdXRPZk1hZG5lc3NfUmVhbFRpbWUiLCJjaGFyYWN0ZXJTaGVldCJdLCJzb3VyY2VSb290IjoiIn0=