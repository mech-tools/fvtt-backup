(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",reignOfTerror:"CoC7.EraReignOfTerror",gasLight:"CoC7.EraGasLight",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",ranged:"CoC7.SkillRanged",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.rangedSpecializationName="CoC7.RangedSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}static filterActiveEffects(effect,conditionName){return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.has(conditionName):effect.flags.core?.statusId===conditionName}static getStatusKey(effect){let options=[];return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.size>0&&(options=[...effect.statuses.values()]):options=[effect.getFlag("core","statusId")],options.find((v=>Object.prototype.hasOwnProperty.call(COC7.status,v)))}get isStatus(){return"string"==typeof CoC7ActiveEffect.getStatusKey(this)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("CoC7.Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("CoC7.Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("CoC7.Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("CoC7.Suppressed"),effects:[],info:[game.i18n.localize("CoC7.Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"),"bronze"===alternativeDice&&foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.0")&&!foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.5")&&(alternativeDice="bronze01"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,0===chatData.whisper.length?null:chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"+1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+("bronze"===game.settings.get("CoC7","tenDieBonus")&&foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.0")&&!foundry.utils.isNewerVersion(game.modules.get("dice-so-nice").version,"5.0.5")?"bronze01":game.settings.get("CoC7","tenDieBonus"))+"]":"+1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,ranged,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;switch(propertyId){case"combat":this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.ranged":!1,"system.specialization":"",name:this.system.skillName}:fighting=!0,modif=!0;break;case"fighting":this.system.properties.fighting||(modif=!0,firearms=!1,ranged=!1,fighting=!0);break;case"firearm":this.system.properties.firearm||(modif=!0,firearms=!0,ranged=!1,fighting=!1),modif=!0;break;case"ranged":this.system.properties.ranged||(modif=!0,firearms=!1,ranged=!0,fighting=!1),modif=!0}if(modif)if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.ranged":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}else if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.ranged":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}else if(ranged){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.ranged":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.rangedSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.ranged":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){const result=parseInt(this.system.range.normal.value);return isNaN(result)?new Roll(this.system.range.normal.value,this.parent?.parseCharacteristics()??{}).evaluateSync().total:result}get longRange(){const result=parseInt(this.system.range.long.value);return isNaN(result)?new Roll(this.system.range.long.value,this.parent?.parseCharacteristics()??{}).evaluateSync().total:result}get extremeRange(){const result=parseInt(this.system.range.extreme.value);return isNaN(result)?new Roll(this.system.range.extreme.value,this.parent?.parseCharacteristics()??{}).evaluateSync().total:result}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}async getChatData(htmlOptions={}){htmlOptions.async=!0;const data=foundry.utils.duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=await TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.special=await TextEditor.enrichHTML(data.description.special,htmlOptions);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else game.settings.get("CoC7","distanceTheatreOfTheMind")||ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r);const group=roll.group,dice={faces:roll.faces,result:roll.result};delete roll.group,delete roll.faces,delete roll.result,void 0===damage.rolls[group]&&(roll.dice=[],damage.rolls.push(roll)),damage.rolls[group].dice.push(dice)}return object?void 0:damage}}class AverageParentheticalTerm extends ParentheticalTerm{_evaluateSync({minimize=!1,maximize=!1}={}){const roll=this.roll||new AverageRoll(this.term);return this.roll=roll.evaluate({minimize,maximize,async:!1}),this.flavor&&this.roll.terms.forEach((t=>{t.options.flavor=t.options.flavor??this.flavor})),this}}class AverageRoll extends Roll{_evaluateSync({minimize=!1,maximize=!1}={}){return this.terms=this.terms.map((term=>{if(!(term instanceof RollTerm))throw new Error("Roll evaluation encountered an invalid term which was not a RollTerm instance");if(term.isIntermediate){term.evaluate({minimize,maximize,async:!1}),this._dice=this._dice.concat(term.dice);let total=term.total;return minimize&&maximize&&term.dice.length&&(total=Math.floor((term.dice[0].faces+1)/2*term.total)),new NumericTerm({number:total,options:term.options})}return term})),this.terms=this.constructor.simplifyTerms(this.terms),this.terms=this.terms.map((term=>{if(!term._evaluated){if(void 0!==term.faces)return new NumericTerm({number:Math.floor((term.faces+1)/2*term.number),options:term.options});term.evaluate({minimize,maximize,async:!1})}return term})),this._total=this._evaluateTotal(),this}static _splitParentheses(_formula){return this._splitGroup(_formula,{openRegexp:AverageParentheticalTerm.OPEN_REGEXP,closeRegexp:AverageParentheticalTerm.CLOSE_REGEXP,openSymbol:"(",closeSymbol:")",onClose:group=>{const fn=group.open.slice(0,-1),expression=group.terms.join(""),options={flavor:group.flavor?group.flavor.slice(1,-1):void 0},terms=[];if(fn in Math){const args=this._splitMathArgs(expression);terms.push(new MathTerm({fn,terms:args,options}))}else fn&&terms.push(fn),terms.push(new AverageParentheticalTerm({term:expression,options}));return terms}})}}class ActorPickerDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-picker"],title:game.i18n.localize("CoC7.PickWhichActorTitle"),template:"systems/CoC7/templates/chat/messages/actor-picker.hbs",closeOnSubmit:!1,width:415,height:375})}activateListeners(html){super.activateListeners(html),html.on("click",".directory-item",this._onPick.bind(this)),html.find(".can-ping").hover(this._onHoverIn.bind(this),this._onHoverOut.bind(this)),html.on("click",".submit-button",this._onSubmitButton.bind(this))}_onPick(event){const li=event.currentTarget;for(const l of li.parentElement.children)l.classList.toggle("picked",l===li);this.object.selected=li.dataset.entryUuid}async _onHoverIn(event){if(event.preventDefault(),!canvas.ready)return;const li=event.currentTarget,token=(await fromUuid(li.dataset.entryUuid))?.object;token?.isVisible&&(token.controlled||(token._onHoverIn(event,{hoverOutOthers:!0}),this._highlighted=token))}_onHoverOut(event){event.preventDefault(),this._highlighted&&this._highlighted._onHoverOut(event),this._highlighted=null}async _onSubmitButton(event){this.object.resolve(await fromUuid(this.object.selected)),this.close()}static async create(){const allowedTypes=["character","npc","creature"];let found=[];if(game.user.isGM&&canvas.ready&&canvas.tokens.controlled.length>0)found=canvas.tokens.controlled.map((t=>t.document));else{canvas.ready&&(found=canvas.tokens.placeables.filter((t=>allowedTypes.includes(t.document.actor.type)&&(t.actor.ownership[game.user.id]??t.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER)).map((t=>t.document)));const foundIDs=found.map((t=>t.actorId));found=found.concat(game.actors.filter((a=>allowedTypes.includes(a.type)&&!foundIDs.includes(a.id)&&(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER)))}if(1===found.length)return found[0];if(found.length>1){const options=[];for(const option of found){const isTokenDocument=option instanceof TokenDocument;options.push({uuid:option.uuid,name:option.name,img:isTokenDocument?option.actor.portrait:option.portrait,canPing:isTokenDocument})}options.sort(CoC7Utilities.sortByNameKey);let selected=options[1].uuid;if(game.user.character){const defaultOption=found.find((option=>(option.actorId??option.id)===game.user.character.id));defaultOption&&(selected=defaultOption.uuid)}return new Promise((resolve=>{new ActorPickerDialog({options,selected,resolve}).render(!0)}))}return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor")),null}}class CoC7GroupMessage{static async removeRoll({messageId,msg,which}){if(void 0!==messageId&&(msg=game.messages.get(messageId)),void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which]){const updates={["flags.CoC7.group-message.rollStatuses.-="+which]:null};await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}}static async pushMyRoll({messageId,msg,which}){void 0!==messageId&&(msg=game.messages.get(messageId));const updates={};let gmId=!1;switch(msg.canUserModify(game.user,"update")||(gmId=CoC7Utilities.getAnIdForGm()),msg.flags.CoC7["group-message"].type){case"combined":updates["flags.CoC7.group-message.wasPushed"]=!0,CoC7GroupMessage.performCombinedRoll({msg,gmId,updates,pushing:!0});break;case"opposed":{const rolls={[which]:msg.flags.CoC7["group-message"].rollStatuses[which].roll};CoC7GroupMessage.performNormalRoll({msg,rolls,gmId,updates,pushing:!0})}}}static async spendMyLuck({messageId,msg,which,index,luckAmount}){if(void 0!==messageId&&(msg=game.messages.get(messageId)),void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed)switch(msg.flags.CoC7["group-message"].type){case"combined":if(!luckAmount){luckAmount=CoC7Check.fromData(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed).increaseSuccess[index].luckToSpend??null}if(luckAmount){const actor=await CoC7GroupMessage.getActor(msg.flags.CoC7["group-message"].actorUuid);if(!(actor instanceof TokenDocument?actor.actor:actor).spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}));const updates={};for(const which in msg.flags.CoC7["group-message"].rollStatuses){const check=CoC7Check.fromData(msg.flags.CoC7["group-message"].rollStatuses[which].completed);check.increaseLuckSpend(luckAmount),updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData}if(Object.keys(updates).length)if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}break;case"opposed":{const check=CoC7Check.fromData(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed);void 0!==index?check.upgradeCheck(index,!1):void 0!==luckAmount&&check.forcePass(luckAmount,!1);const updates={["flags.CoC7.group-message.rollStatuses."+which+".completed"]:check.JSONRollData};if(Object.keys(updates).length)if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}}else ui.notifications.error("CoC7.ErrorRollAlreadyCompleted",{localize:!0})}static async updateTheGroupMessage({msg,updates,rollData}={}){if(msg?.flags?.CoC7?.["group-message"]){if(void 0===rollData){rollData={};for(const which in msg?.flags?.CoC7?.["group-message"].rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:msg?.flags?.CoC7?.["group-message"].rollStatuses[which].roll,quick:!0});rollData[which]=roll}}const options=Object.assign({rollData},foundry.utils.mergeObject(msg.flags.CoC7["group-message"],foundry.utils.expandObject(updates)?.flags?.CoC7?.["group-message"]??{},{performDeletions:!0}));for(const which in options.rollStatuses)options.rollStatuses[which].completed&&(options.rollStatuses[which].completed=CoC7Check.fromData(options.rollStatuses[which].completed));options.allRollsCompleted=!0;for(const which in options.rollStatuses)void 0===options.rollStatuses[which].completed&&(options.allRollsCompleted=!1);switch(updates["flags.CoC7.group-message.allRollsCompleted"]=options.allRollsCompleted,options.type){case"combined":if(options.isSuccess=!1,options.isFailure=!1,options.allRollsCompleted){let successes=0,failures=0;for(const which in options.rollStatuses)options.rollStatuses[which].completed.isSuccess?successes++:options.rollStatuses[which].completed.isFailure&&failures++;successes>0&&("any"===options.combined||0===failures&&"all"===options.combined)?options.isSuccess=!0:options.isFailure=!0}updates["flags.CoC7.group-message.isSuccess"]=options.isSuccess,updates["flags.CoC7.group-message.isFailure"]=options.isFailure;break;case"opposed":if(options.allRollsCompleted){if(options.isTie=!1,options.isCombat){options.rollOrder=Array.from(new Int8Array(options.rollOrder.map((v=>parseInt(v.substr(1),10)))).sort()).map((v=>"r"+v));const successLevels={};options.defenderIsDodging=!1;for(const which in options.rollStatuses)options.rollStatuses[which].completed.passed&&(successLevels[options.rollStatuses[which].completed.successLevel]=parseInt(successLevels[options.rollStatuses[which].completed.successLevel]??0,10)+1),options.rollStatuses[which].isDodging&&!options.rollStatuses[which].isAttacker&&(options.defenderIsDodging=!0);updates["flags.CoC7.group-message.defenderIsDodging"]=options.defenderIsDodging,!1===options.advantageAttacker&&!1===options.advantageDefender&&(options.defenderIsDodging?(options.advantageDefender=!0,updates["flags.CoC7.group-message.advantageDefender"]=options.advantageDefender):(options.advantageAttacker=!0,updates["flags.CoC7.group-message.advantageAttacker"]=options.advantageAttacker));const best=Math.max(...Object.keys(successLevels));if(options.needsTieBreaker=!1,options.resultText=game.i18n.localize("CoC7.NoWinner"),best>0)for(const which in options.rollStatuses){let rollIsWinner=!1,rollIsTie=!1;options.rollStatuses[which].completed.successLevel===best&&1===successLevels[best]?rollIsWinner=!0:options.rollStatuses[which].completed.successLevel===best&&(options.advantageAttacker&&options.rollStatuses[which].isAttacker||options.advantageDefender&&!options.rollStatuses[which].isAttacker?rollIsWinner=!0:(rollIsTie=!0,options.needsTieBreaker=!0,options.isTie=!0)),options.rollStatuses[which].isWinner=rollIsWinner,options.rollStatuses[which].isTie=rollIsTie,updates["flags.CoC7.group-message.rollStatuses."+which+".isWinner"]=rollIsWinner,updates["flags.CoC7.group-message.rollStatuses."+which+".isTie"]=rollIsTie,rollIsWinner&&!rollIsTie&&(options.rollStatuses[which].isAttacker?options.rollStatuses[which].isManeuver?options.resultText=game.i18n.format("CoC7.ManeuverSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.AttackSuccess",{name:rollData[which].actor.name}):options.rollStatuses[which].isManeuver?options.rollStatuses[which].isDodging?options.resultText=game.i18n.format("CoC7.DodgeSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.ManeuverSuccess",{name:rollData[which].actor.name}):options.resultText=game.i18n.format("CoC7.AttackSuccess",{name:rollData[which].actor.name}))}updates["flags.CoC7.group-message.needsTieBreaker"]=options.needsTieBreaker}else{const opposedRollTieBreaker=game.settings.get("CoC7","opposedRollTieBreaker");options.rollOrder.sort(((a,b)=>{if(options.rollStatuses[a].completed.successLevel>options.rollStatuses[b].completed.successLevel)return-1;if(options.rollStatuses[a].completed.successLevel<options.rollStatuses[b].completed.successLevel)return 1;if(opposedRollTieBreaker){if(options.rollStatuses[a].completed.modifiedResult>options.rollStatuses[b].completed.modifiedResult)return-1;if(options.rollStatuses[a].completed.modifiedResult<options.rollStatuses[b].completed.modifiedResult)return 1}else{if(options.rollStatuses[a].completed.rawValue>options.rollStatuses[b].completed.rawValue)return-1;if(options.rollStatuses[a].completed.rawValue<options.rollStatuses[b].completed.rawValue)return 1}return 0}));const offsetMax=options.rollOrder.length;let offset=0;const a=options.rollStatuses[options.rollOrder[0]];if(a.failed)offset=-1;else for(;offset<offsetMax;offset++){const b=options.rollStatuses[options.rollOrder[offset]];if(a.completed.successLevel!==b.completed.successLevel||(opposedRollTieBreaker?a.completed.modifiedResult!==b.completed.modifiedResult:a.completed.rawValue!==b.completed.rawValue)){offset--;break}}options.isTie=offset>0;for(let i=0;i<offsetMax;i++){let isWinner=!1,isTie=!1;i<=offset&&(isWinner=!0,isTie=options.isTie);const which=options.rollOrder[i];options.rollStatuses[which].isWinner=isWinner,options.rollStatuses[which].isTie=isTie,updates["flags.CoC7.group-message.rollStatuses."+which+".isWinner"]=isWinner,updates["flags.CoC7.group-message.rollStatuses."+which+".isTie"]=isTie}options.needsTieBreaker=!1,updates["flags.CoC7.group-message.needsTieBreaker"]=!1}updates["flags.CoC7.group-message.isTie"]=options.isTie}}const html=await renderTemplate(CoC7GroupMessage.getTemplatePath(msg.flags.CoC7["group-message"].type),options);updates.content=html,await msg.update(updates)}}static async updateTheMessage({messageId,updates}){const msg=game.messages.get(messageId);msg?.flags?.CoC7?.["group-message"]&&await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}static async getCheck({msg,theRoll}){const checkData={difficulty:theRoll.difficulty,diceModifier:theRoll.bonus,actorKey:theRoll.actor.actorKey??theRoll.actor.actor.actorKey,denyPush:!1,combat:msg.flags?.CoC7?.["group-message"].isCombat??!1};switch(theRoll.type){case"characteristic":checkData.characteristic=theRoll.key,checkData.denyPush=msg.flags?.CoC7?.["group-message"].denyPush??!1;break;case"attribute":checkData.attribute=theRoll.key,checkData.denyPush=msg.flags?.CoC7?.["group-message"].denyPush??!1;break;case"skill":checkData.skill=theRoll.skill,checkData.denyPush=(msg.flags?.CoC7?.["group-message"].denyPush??!1)||!theRoll.pushable;break;case"item":checkData.item=theRoll.item,checkData.denyPush=(msg.flags?.CoC7?.["group-message"].denyPush??!1)||!theRoll.pushable}return CoC7Check.create(checkData)}static async performRoll({msg,which,roll,pushing}={}){const theRoll=await CoC7GroupMessage.parseRolls({roll,quick:!1});if(!theRoll)return{};const check=await CoC7GroupMessage.getCheck({msg,theRoll});pushing&&(check.pushing=pushing),await check._perform({forceDSN:!0});const updates={};return updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData,updates}static async performCombinedRoll({messageId,msg,gmId,updates,pushing=!1}){void 0!==messageId&&(msg=game.messages.get(messageId));const rollData={};for(const which in msg?.flags?.CoC7?.["group-message"].rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:msg?.flags?.CoC7?.["group-message"].rollStatuses[which].roll,quick:!1});roll&&(rollData[which]=roll)}const pool={};for(const which in rollData)pool[parseInt(rollData[which].bonus??0,10)]=!1;const roll=await CoC7Dice.combinedRoll({pool});let first=!0;for(const which in rollData){const bonus=parseInt(rollData[which].bonus??0,10),check=await CoC7GroupMessage.getCheck({msg,theRoll:rollData[which]});pushing&&(check.pushing=pushing),await check._perform({roll:roll[bonus],silent:!1===first||void 0,forceDSN:first}),updates["flags.CoC7.group-message.rollStatuses."+which+".completed"]=check.JSONRollData,first=!1}if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}static async performNormalRoll({messageId,msg,rolls,gmId,updates,pushing=!1}){void 0!==messageId&&(msg=game.messages.get(messageId));for(const which in rolls)void 0===msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].completed||pushing?Object.assign(updates,await CoC7GroupMessage.performRoll({msg,which,roll:rolls[which],pushing})):ui.notifications.error("CoC7.ErrorRollAlreadyCompleted",{localize:!0});msg.canUserModify(game.user,"update")?await CoC7GroupMessage.updateTheGroupMessage({msg,updates}):!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}static async performMyRolls({messageId,msg,rolls}){void 0!==messageId&&(msg=game.messages.get(messageId));const updates={};for(const which in rolls)await CoC7GroupMessage.nameRoll({which,roll:rolls[which],updates});const gmId=!msg.canUserModify(game.user,"update")&&CoC7Utilities.getAnIdForGm();switch(Object.keys(updates).length>0&&(msg.canUserModify(game.user,"update")?await CoC7GroupMessage.updateTheGroupMessage({msg,updates}):!1!==gmId&&(game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates}),await new Promise((resolve=>setTimeout(resolve,200))))),msg.flags.CoC7["group-message"].type){case"combined":CoC7GroupMessage.performCombinedRoll({msg,gmId,updates});break;case"opposed":CoC7GroupMessage.performNormalRoll({msg,rolls,gmId,updates})}}static async nameRoll({which,roll,updates}){const parsed=await CoC7GroupMessage.parseRolls({roll,quick:!1});parsed&&(updates["flags.CoC7.group-message.rollStatuses."+which+".shortName"]=parsed.shortName,updates["flags.CoC7.group-message.rollStatuses."+which+".fullName"]=parsed.fullName,updates["flags.CoC7.group-message.rollStatuses."+which+".tags"]=parsed.tags??[],updates["flags.CoC7.group-message.rollStatuses."+which+".percent"]=parsed.percent??1,updates["flags.CoC7.group-message.rollStatuses."+which+".isManeuver"]=parsed.isManeuver??!1,updates["flags.CoC7.group-message.rollStatuses."+which+".isDodging"]=parsed.isDodge??!1,updates["flags.CoC7.group-message.rollStatuses."+which+".isWeapon"]=parsed.isDodge??!1)}static async newGroupMessage({rollData,options}){if(void 0===rollData){rollData={};for(const which in options.rollStatuses){const roll=await CoC7GroupMessage.parseRolls({roll:options.rollStatuses[which].roll,quick:!0});rollData[which]=roll}}const rollsByUser={},rollRequiresName={};for(const which in rollData){let asUserId="";switch(rollData[which].autoRoll.length){case 1:if(rollData[which].autoRoll[0]!==game.user.id){asUserId=rollData[which].autoRoll[0];break}case 0:asUserId=game.user.id;break;default:options.rollStatuses[which].rolling=!1,"-"===rollData[which].shortName&&(rollRequiresName[which]=rollData[which].roll)}""!==asUserId&&(Object.prototype.hasOwnProperty.call(rollsByUser,asUserId)||(rollsByUser[asUserId]={}),rollsByUser[asUserId][which]=options.rollStatuses[which].roll,options.rollStatuses[which].rolling=asUserId)}const templateData=Object.assign({rollData},options),chatData={flags:{CoC7:{"group-message":options}},content:await renderTemplate(CoC7GroupMessage.getTemplatePath(options.type),templateData)};switch(chatData.flags?.CoC7?.["group-message"]?.type){case"opposed":chatData.speaker=Object.assign(chatData.speaker??{},{alias:game.i18n.localize("CoC7.OpposedRollCard")});break;case"combined":chatData.speaker=Object.assign(chatData.speaker??{},{alias:Object.values(rollData)[0].actor.name})}const msg=await ChatMessage.create(chatData),updates={};for(const which in rollRequiresName)await CoC7GroupMessage.nameRoll({which,roll:rollRequiresName[which],updates});Object.keys(updates).length>0&&await CoC7GroupMessage.updateTheGroupMessage({msg,updates,rollData});for(const userId in rollsByUser)userId!==game.user.id&&game.socket.emit("system.CoC7",{type:"group-message-roll",listener:userId,messageId:msg.id,rolls:rollsByUser[userId]});return Object.prototype.hasOwnProperty.call(rollsByUser,game.user.id)&&await CoC7GroupMessage.performMyRolls({msg,rolls:rollsByUser[game.user.id]}),msg}static async isUserActive({which,msg}){if(msg.flags?.CoC7?.["group-message"]?.rollStatuses[which].rolling){const user=game.users.get(msg.flags.CoC7["group-message"].rollStatuses[which].rolling);if(game.user.isGM||!user||!user.active){const updates={["flags.CoC7.group-message.rollStatuses."+which+".rolling"]:!1};if(msg.canUserModify(game.user,"update"))await CoC7GroupMessage.updateTheGroupMessage({msg,updates});else{const gmId=CoC7Utilities.getAnIdForGm();!1!==gmId&&game.socket.emit("system.CoC7",{listener:gmId,type:"group-message-update",messageId:msg.id,updates})}}}}static async _onToggle(event){event.preventDefault();const button=event.currentTarget,messageId=button.closest("li.chat-message")?.dataset.messageId,key=button.dataset.key;let value=button.dataset.value;if(messageId&&key){if(button.classList.contains("select-only-gm")&&!game.user.isGM)return;const msg=game.messages.get(messageId);if(void 0!==msg.flags?.CoC7?.["group-message"]?.[key]&&msg.canUserModify(game.user,"update")){void 0===value&&(value=!msg.flags.CoC7["group-message"][key]);const updates={["flags.CoC7.group-message."+key]:value};switch(key){case"advantageDefender":updates["flags.CoC7.group-message.advantageAttacker"]=!value;break;case"advantageAttacker":updates["flags.CoC7.group-message.advantageDefender"]=!value}await CoC7GroupMessage.updateTheGroupMessage({msg,updates})}}}static async _onClick(event){event.preventDefault();const button=event.currentTarget,action=button.dataset.action,messageId=button.closest("li.chat-message")?.dataset.messageId,which=button.dataset.which;if(messageId){const msg=game.messages.get(messageId);if(void 0!==msg)if(void 0!==which&&void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses[which]){const actor=await fromUuid(msg.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0]);if(!actor||!actor.canUserModify(game.user,"update"))return void ui.notifications.error("CoC7.ErrorNoActorPermission",{localize:!0});switch(action){case"impatient-roll":CoC7GroupMessage.isUserActive({which,msg});break;case"normal-roll":CoC7GroupMessage.performMyRolls({msg,rolls:{[which]:msg.flags.CoC7?.["group-message"].rollStatuses[which].roll}});break;case"use-luck":CoC7GroupMessage.spendMyLuck({which,index:button.dataset.index,luckAmount:button.dataset.luckAmount,msg});break;case"remove-roll":CoC7GroupMessage.removeRoll({which,msg});break;case"push":CoC7GroupMessage.pushMyRoll({which,msg})}}else if(void 0!==msg.flags?.CoC7?.["group-message"]?.rollStatuses){let okay=!1;for(const which in msg.flags.CoC7["group-message"].rollStatuses){if((await fromUuid(msg.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0])).canUserModify(game.user,"update")){okay=!0;break}}if(!okay)return void ui.notifications.error("CoC7.ErrorNoActorPermission",{localize:!0});switch(action){case"roll-once":if("combined"===msg.flags.CoC7["group-message"].type){const updates={};CoC7GroupMessage.performCombinedRoll({msg,updates})}break;case"toggle":CoC7GroupMessage._onToggle(event)}}}}static async renderChatMessage(app,html,data){const canModify={gm:game.user.isGM};for(const which in app.flags?.CoC7?.["group-message"]?.rollStatuses){const actor=await fromUuid(app.flags.CoC7["group-message"].rollStatuses[which].roll.split("#")[0]);canModify[which]=actor?.canUserModify(game.user,"update")??!1}canModify.any=Object.values(canModify).filter((b=>b)).length>0;for(const key in canModify)canModify[key]?html.find(".hidden-only-"+key).remove():html.find(".visible-only-"+key).remove();html.on("click",".roll-card-v2 button:not(.toggle-switch)",CoC7GroupMessage._onClick.bind(this)),html.on("click",".roll-card-v2 a:not(.toggle-link)",CoC7GroupMessage._onClick.bind(this)),html.on("click",".roll-card-v2 button.toggle-switch",CoC7GroupMessage._onToggle.bind(this)),html.on("click",".roll-card-v2 a.toggle-link",CoC7GroupMessage._onToggle.bind(this))}static async getActor(identifier){return identifier.match(/^a\./)?(await game.system.api.cocid.fromCoCID(identifier))?.[0]??null:identifier.indexOf(".")>-1?await fromUuid(identifier):game.actors.get(identifier)??null}static async parseRolls({roll,quick=!0,defaultUuid=""}){const match=roll.match(/^(?<a>[^#]+#)?(?<t>attribute|characteristic|item|skill)#(?<k>[^#]+)(#(?<m>.*))?$/);if(match){const modifiers=(match.groups.m??"").toLowerCase().split("#"),bonus=parseInt(modifiers.find((m=>m.match(/^[+-]\d+$/)))??0,10),difficulty=modifiers.find((m=>m.match(/^\d+$/))),pushing=modifiers.filter((m=>"p"===m)).length>0,rollData={type:match.groups.t,key:match.groups.k,bonus,difficulty:"0"===(difficulty??"").toString()?CoC7Check.difficultyLevel.unknown:difficulty?parseInt(difficulty,10):"unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular,pushing};if(!match.groups.a&&defaultUuid&&""!==defaultUuid&&(match.groups.a=defaultUuid+"#"),match.groups.a){const actor=await CoC7GroupMessage.getActor(match.groups.a.substr(0,match.groups.a.length-1));if(!actor)return null;rollData.actor=actor,rollData.autoRoll=game.users.filter((u=>!u.isGM&&rollData.actor.canUserModify(u,"update"))).map((u=>({id:u.id,active:u.active}))),rollData.autoRoll.length>0&&(rollData.autoRoll=rollData.autoRoll.filter((d=>d.active)).map((d=>d.id)),0===rollData.autoRoll.length&&(rollData.autoRoll=["prevent","roll"]))}else{const actor=await ActorPickerDialog.create();if(!actor)return ui.notifications.warn("CoC7.WarnNoControlledActor",{localize:!0}),null;rollData.actor=actor,game.user.isGM?(rollData.autoRoll=game.users.filter((u=>!u.isGM&&rollData.actor.canUserModify(u,"update"))).map((u=>({id:u.id,active:u.active}))),rollData.autoRoll.length>0&&(rollData.autoRoll=rollData.autoRoll.filter((d=>d.active)).map((d=>d.id)),0===rollData.autoRoll.length&&(rollData.autoRoll=["prevent","roll"]))):rollData.autoRoll=[game.user.id]}switch(rollData.roll=rollData.actor.uuid+"#"+rollData.type+"#"+rollData.key+(rollData.bonus<0?"#"+rollData.bonus:rollData.bonus>0?"#+"+rollData.bonus:"")+(0===difficulty?"#0":difficulty?"#"+parseInt(difficulty,10):""),rollData.portrait=rollData.actor instanceof TokenDocument?rollData.actor.texture.src:rollData.actor.portrait,rollData.shortName="-",rollData.fullName="-",rollData.type){case"characteristic":if(rollData.shortName=CoC7Utilities.getCharacteristicNames(rollData.key)?.short??"-",rollData.fullName=CoC7Utilities.getCharacteristicNames(rollData.key)?.label??"-",rollData.percent=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).system?.characteristics[rollData.key]?.value??1,"-"===rollData.shortName)return null;break;case"attribute":switch(rollData.key){case"lck":rollData.shortName=game.i18n.localize("CoC7.Luck"),rollData.fullName=game.i18n.localize("CoC7.Luck");break;case"san":rollData.shortName=game.i18n.localize("CoC7.SAN"),rollData.fullName=game.i18n.localize("CoC7.Sanity");break;default:return null}rollData.percent=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).system?.attribs[rollData.key]?.value??1;break;case"skill":if(!quick){const skills=await(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).getItemOrAdd(rollData.key,"skill");skills.length&&(rollData.skill=skills[0],rollData.shortName=skills[0].shortName,rollData.fullName=skills[0].shortName,rollData.pushable=skills[0].system.properties?.push??!1,rollData.percent=skills[0].value,rollData.isManeuver=skills[0].isDodge,rollData.isDodge=skills[0].isDodge)}break;case"item":if(!quick){const items=await(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).getItemOrAdd(rollData.key,"weapon");if(items.length){rollData.item=items[0],rollData.shortName=items[0].shortName,rollData.fullName=items[0].shortName,rollData.isManeuver=items[0].system.properties?.mnvr??!1,rollData.isWeapon=!0;const skillId=items[0].system.skill[items[0].usesAlternativeSkill?"alternativ":"main"].id;if(skillId){const skill=(rollData.actor instanceof TokenDocument?rollData.actor.actor:rollData.actor).items.find((d=>d.id===skillId));rollData.tags=[skill.name],rollData.percent=skill.value,rollData.pushable=skill.system.properties?.push??!1}}}}return rollData}return null}static getTemplatePath(type){switch(type){case"opposed":return"systems/CoC7/templates/chat/messages/opposed.hbs";case"combinedall":case"combinedany":case"combined":return"systems/CoC7/templates/chat/messages/combined.hbs"}return null}static async createGroupMessage(options){if(!CoC7GroupMessage.getTemplatePath(options.type))return null;let config=Object.assign({type:"",denyPush:!1,showCompletedRolls:!0,allRollsCompleted:!1,isCombat:!1,isEditable:!0,rollStatuses:{},rollOrder:[]},options);switch(config.type){case"opposed":config=Object.assign({denyPush:!0,isTie:!1,needsTieBreaker:!1,advantageAttacker:!1,advantageDefender:!1,defenderIsDodging:!1,winnerRollsDamage:!1},config);break;case"combinedall":case"combinedany":case"combined":config=Object.assign({combined:"combinedall"===config.type?"all":"combinedany"===config.type?"any":"",actorUuid:"",isSuccess:!1,isFailure:!1,wasPushed:!1},config),config.type="combined"}const rollData={};let count=0;for(const offset in options.rollRequisites){const which="r"+offset,roll=await CoC7GroupMessage.parseRolls({roll:options.rollRequisites[offset],quick:!0,defaultUuid:config.actorUuid??""});if(!roll)return null;if("combined"===config.type){if(""!==config.actorUuid&&config.actorUuid!==roll.actor.uuid)return ui.notifications.error("CoC7.ErrorCombinedRollsRequireSingleActor",{localize:!0}),null;config.actorUuid=roll.actor.uuid}if(rollData[which]=roll,config.rollStatuses[which]={roll:roll.roll,rollable:"combined"!==config.type,rolling:!1,shortName:roll.shortName,fullName:roll.fullName,percent:roll.percent,tags:[],isManeuver:!1,isDodging:!1,isWeapon:!1},"opposed"===config.type)config.rollStatuses[which]=Object.assign({isAttacker:0===count,isWinner:!1,isTie:!1},config.rollStatuses[which]);config.rollOrder.push(which),count++}if("opposed"===config.type&&2!==Object.keys(rollData).length)return ui.notifications.error("CoC7.ErrorOpposedRollsLimitedToTwoActors",{localize:!0}),null;if(delete config.rollRequisites,game.user.isGM)return CoC7GroupMessage.newGroupMessage({rollData,options:config});{const gmId=CoC7Utilities.getAnIdForGm();return!1===gmId?null:(game.socket.emit("system.CoC7",{type:"group-message-new",listener:gmId,options:config}),!0)}}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString())[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.system.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"system.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.preHardenedSanLoss=this.originalSanLoss=this.sanLossFormula,this.sanLoss=this.applyMythosHardened(this.preHardenedSanLoss)}applyMythosHardened(sanLoss){return this.actor.useMythosHardened?Math.floor(sanLoss/2):sanLoss}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)if(this.state.sanLossRolled=!0,this.originalSanLoss=this.sanLossFormula,this.sanData.sanReason){const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.preHardenedSanLoss=this.originalSanLoss,this.preHardenedSanLoss>max&&(this.preHardenedSanLoss=max,this.state.limitedLossToCreature=!0)}else this.preHardenedSanLoss=this.originalSanLoss;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.originalSanLoss=new Roll(this.sanData.sanMax)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total,this.preHardenedSanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.originalSanLoss);else if(this.sanData.sanReason){new Roll(this.sanLossFormula)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0}).total>=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)&&(this.state.sanLossRolled=!0,this.preHardenedSanLoss=this.originalSanLoss=this.max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.preHardenedSanLoss=0,this.originalSanLoss=0;this.sanLoss=this.applyMythosHardened(this.preHardenedSanLoss)}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.originalSanLoss=this.sanLossRoll.total,this.preHardenedSanLoss=Math.min(this.originalSanLoss,max),this.sanLoss=this.applyMythosHardened(this.preHardenedSanLoss),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link};const body=$("body");body.on("click","a.coc7-link",CoC7Link._onLinkClick),body.on("dragstart","a.coc7-link",(event=>CoC7Link._onDragCoC7Link(event))),CONFIG.TextEditor.enrichers.push({pattern:new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi"),enricher:CoC7Link._createLink})}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=foundry.utils.duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=foundry.utils.mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static async _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),void 0===value&&("blind"===key?(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())):"pushing"===key?(value=!0,data.pushing=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())):"combat"===key&&(value=!0,data.combat=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase()))),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;if(["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase()))"lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"));else if(["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase()))humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label;else if(!name&&data.dataset.name.match(/^.\.[^\\.]*\..+$/)){const cocIdName=(await game.system.api.cocid.fromCoCID(data.dataset.name))?.[0]?.name;cocIdName&&(humanName=cocIdName)}title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}${data.pushing?"Pushing":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name&&!eventData.rolls)return"";let options=`${eventData.blind?"blind,":""}${eventData.pushing?"pushing,":""}type:${eventData.linkType}`;if(eventData.name?options+=`,name:${eventData.name}`:eventData.rolls&&(options+=`,rolls:${eventData.rolls}`,eventData.combat&&(options+=",combat")),void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);if(["combinedall","combinedany","opposed"].includes(options.linkType.toLowerCase()))return CoC7GroupMessage.createGroupMessage({type:options.linkType.toLowerCase(),rollRequisites:options.rolls.split("&&"),isCombat:Boolean(options.combat??!1)});break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER));if(1===actors.length)actor=actors[0];else{const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}get isPushing(){return this.isCheck&&this.object.pushing}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"pushing":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty!==CoC7Check.difficultyLevel.regular||0!==parseInt(link.modifier,10)||link.isPushing?this.object.hasModifiers=!0:this.object.hasModifiers=!1,""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=foundry.utils.mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}static async resolveOld(userId){const messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===userId)));if(messages.length){await messages[0].setFlag("CoC7","state","resolved");const card=await this.fromMessage(messages[0]);card.closeCard(),await card.updateChatCard()}}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.system));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=foundry.utils.mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).object;data=foundry.utils.diffObject(this,foundry.utils.expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula+=CoC7Utilities.halfDB(this.actor.db)),formula){const maxDamage=new Roll(formula)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers?.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);this.checkTotal(),"validate"===action&&this.data.data.validate&&this.close()}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value)?(validation.classList.add("warning"),this.data.data.validate=!1):(validation.classList.remove("warning"),this.data.data.validate=!0);validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&(this.data.data.validate=0===Object.values(this.data.data.characteristics.values).filter((val=>isNaN(parseInt(val)))).length)}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.diceModifier=0,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;switch(this[flag]=!this[flag],flag){case"outnumbered":case"surprised":this.diceModifier=Math.max(-2,Math.min(2,parseInt(this.diceModifier,10)+(this[flag]?1:-1)))}}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners){const user=game.users.get(k);user&&(content=content+'<option value="'+k+'">'+user.name+"</option>")}content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.diceModifier&&(check.diceModifier=this.diceModifier),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.bonusDieA=!1,this.bonusDieB=!1,this.penaltyDieA=!1,this.penaltyDieB=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets=[this._targets[0]],this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&t.toggleFlag("pointBlankRange")}!0!==t.pointBlankRange&&this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?distInYd<=this.weapon.baseRange?t.baseRange=!0:distInYd<=this.weapon.longRange?t.longRange=!0:distInYd<=this.weapon.extremeRange?t.extremeRange=!0:t.outOfRange=!0:(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}get calculatedBonusDice(){return this._calculatedModifier>2?this._calculatedModifier:0}get calculatedPenaltyDice(){return this._calculatedModifier<-2?-this._calculatedModifier:0}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=parseInt(target.modifier,10);difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),this.bonusDieA&&modifier++,this.bonusDieB&&modifier++,this.penaltyDieA&&modifier--,this.penaltyDieB&&modifier--,this._calculatedModifier=modifier,modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}else modifier>2&&(modifier=2);return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):(this[flag]=!this[flag],console.log(flag,this[flag]))}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0"),this.item.system.properties.addb&&(damageFormula=damageFormula+"+"+this.actor.db),this.item.system.properties.ahdb&&(damageFormula+=CoC7Utilities.halfDB(this.actor.db));const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll);const dice=[];for(const die of roll.dice)for(const result of die.results)dice.push({faces:die.faces,result:result.result});damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,dice,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate(),await CoC7Dice.showRollDice3d(roll);const dice=[];for(const die of roll.dice)for(const result of die.results)dice.push({faces:die.faces,result:result.result});damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,dice,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],this.actor&&"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("change","input[type=range].slider",CoC7Chat._onChatCardRange.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&(0===chatMessage.type||0===chatMessage.style)){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag");const gmRangeOnly=html.find(".gm-range-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const range of gmRangeOnly)range.disabled=!0}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardRange(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;if(!CoC7Chat._getChatCardActor(card))return;const messageId=card.closest(".message").dataset.messageId;let messageCard;card.classList.contains("range")?messageCard=CoC7RangeInitiator.getFromCard(card):card.classList.contains("target")?messageCard=CoC7MeleeTarget.getFromCard(card):card.classList.contains("initiator")&&(messageCard=CoC7MeleeInitiator.getFromCard(card)),messageCard.diceModifier=event.currentTarget.value,await messageCard.updateChatCard(),document.querySelector('[data-message-id="'+messageId+'"]').querySelector('input[type=range][name="'+button.name+'"]').focus()}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.diceModifier=0,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;switch(this[flag]=!this[flag],flag){case"outnumbered":case"surprised":this.diceModifier=Math.max(-2,Math.min(2,parseInt(this.diceModifier,10)+(this[flag]?1:-1)))}}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.diceModifier&&(check.diceModifier=this.diceModifier),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static defaultImg(type){switch(type){case"container":return"icons/svg/chest.svg";case"creature":return"systems/CoC7/assets/icons/floating-tentacles.svg";case"npc":return"systems/CoC7/assets/icons/cultist.svg"}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0}}):"npc"===data.type||"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img=CoCActor.defaultImg(data.type)):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img=CoCActor.defaultImg(data.type)),data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:`+await TextEditor.enrichHTML(item.system.description.value,{async:!0}),result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=await TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!0}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name);if(!1===skillData)return;const value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?foundry.utils.duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=foundry.utils.duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=foundry.utils.duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=foundry.utils.duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags,keepBase=data.system.properties?.keepbasevalue??!1;data=foundry.utils.duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);keepBase&&(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data))}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data)),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(foundry.utils.duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;if(name.match(/i\.skill\./)){const availableSkills=await game.system.api.cocid.fromCoCIDBest({cocid:name,showLoading:!0});availableSkills.length&&(await this.addItems([availableSkills[0]]),skill=await this.getSkillsByName(mainSkill)[0])}if(!skill){const existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(mainSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=secondSkill.match(/\(([^)]+)\)/)?secondSkill.match(/\(([^)]+)\)/)[1]:secondSkill;if(name.match(/i\.skill\./)){const availableSkills=await game.system.api.cocid.fromCoCIDBest({cocid:name,showLoading:!0});availableSkills.length&&(await this.addItems([availableSkills[0]]),skill=await this.getSkillsByName(secondSkill)[0])}if(!skill){const existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(secondSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(foundry.utils.duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=foundry.utils.mergeObject(this.system.monetary,foundry.utils.duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(foundry.utils.duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(foundry.utils.duplicate(data)),occupation=!0}break;default:processedDataArray.push(foundry.utils.duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstItemByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[],characteristicList=foundry.utils.isNewerVersion(game.version,"12")?game.system.template.Actor.character.characteristics:game.system.template.Actor.templates.characteristics.characteristics;for(const[key,value]of Object.entries(characteristicList))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=foundry.utils.duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(foundry.utils.duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=foundry.utils.duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString())[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),sanLoss>0&&this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed)[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}static toolTipSkillText(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),skillId=game.CoC7Tooltips.ToolTipHover.closest(".item")?.dataset.skillId,actorAppId=game.CoC7Tooltips.ToolTipHover.closest(".window-app")?.dataset?.appid;if(void 0!==skillId&&void 0!==actorAppId&&void 0!==ui.windows[actorAppId]?.actor?.id){const actorId=ui.windows[actorAppId].actor.id,actor=game.actors.get(actorId);if(actor){const skill=actor.items.get(skillId);if(skill){let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});return game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:actor.name}):""})),toolTip}}}}return!1}async getItemOrAdd(itemIdentifier,type="skill"){if(itemIdentifier.match(/^i\.([^\\.]+)\../)){let item=this.getFirstItemByCoCID(itemIdentifier);if(!item){const newItems=await game.system.api.cocid.fromCoCIDBest({cocid:itemIdentifier,showLoading:!0});if(1===newItems.length&&(await this.createEmbeddedDocuments("Item",newItems),item=this.getFirstItemByCoCID(itemIdentifier),item))if("skill"===item.type)ui.notifications.info(game.i18n.format("CoC7.InfoSkillAddedAtBase",{name:item.name,percent:item.value}));else if("weapon"===item.type){await item.reload();const updates={};if(""===item.system.skill.main.id&&""!==item.system.skill.main.name){const skill=await this.getItemOrAdd(item.system.skill.main.name,"skill");skill.length&&(updates["system.skill.main.id"]=skill[0].id,updates["system.skill.main.name"]=skill[0].name)}if(""===item.system.skill.alternativ.id&&""!==item.system.skill.alternativ.name){const skill=await this.getItemOrAdd(item.system.skill.alternativ.name,"skill");skill.length&&(updates["system.skill.alternativ.id"]=skill[0].id,updates["system.skill.alternativ.name"]=skill[0].name)}Object.keys(updates).length&&await item.update(updates)}}if(item)return[item]}let myItems=this.getSkillsByName(itemIdentifier);if(!myItems.length){const era=game.settings.get("CoC7","worldEra"),newItem=game.items.find((d=>{if(d.type===type&&d.name===itemIdentifier){const eras=newItem.flags?.CoC7?.cocidFlag?.eras;return!(eras&&Object.keys(eras).length>0&&!eras[era])}return!1}));if(newItem&&myItems.push(newItem),0===myItems.length)for(const pack of game.packs)if("Item"===pack.metadata?.type){await pack.getDocuments();const newItem=game.items.find((d=>{if(d.type===type&&d.name===itemIdentifier){const eras=newItem.flags?.CoC7?.cocidFlag?.eras;return!(eras&&Object.keys(eras).length>0&&!eras[era])}return!1}));newItem&&myItems.push(newItem)}if(1===myItems.length&&(await this.createEmbeddedDocuments("Item",myItems),myItems=this.getSkillsByName(itemIdentifier),1===myItems.length))if("skill"===myItems[0].type)ui.notifications.info(game.i18n.format("CoC7.InfoSkillAddedAtBase",{name:myItems[0].name,percent:myItems[0].value}));else if("weapon"===myItems[0].type){await myItems[0].reload();const updates={};if(""===myItems[0].system.skill.main.id&&""!==myItems[0].system.skill.main.name){const skill=await this.getItemOrAdd(myItems[0].system.skill.main.name,"skill");skill.length&&(updates["system.skill.main.id"]=skill[0].id,updates["system.skill.main.name"]=skill[0].name)}if(""===myItems[0].system.skill.alternativ.id&&""!==myItems[0].system.skill.alternativ.name){const skill=await this.getItemOrAdd(myItems[0].system.skill.alternativ.name,"skill");skill.length&&(updates["system.skill.alternativ.id"]=skill[0].id,updates["system.skill.alternativ.name"]=skill[0].name)}Object.keys(updates).length&&await myItems[0].update(updates)}}return myItems}async skillCheck(skillData,fastForward,options={}){const skillIdentifier=skillData.name?skillData.name:skillData;let skill=await this.getItemOrAdd(skillIdentifier,"skill");if(skill.length&&(options.name=skill[0].name),!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+" "+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillIdentifier,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[foundry.utils.duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,"false"===options.pushing?check.pushing=!1:check.pushing=!!options.pushing,await check.roll(),check.toMessage(check.pushing)}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}get hasRollableCharacteristics(){for(const[,value]of Object.entries(this.system.characteristics))if(isNaN(Number(value.formula)))return!0;return!1}get hosRollableSkills(){for(const skill of this.skills)if(isNaN(skill.system?.value))return!0;return!1}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const average=new AverageRoll("("+value.formula+")")[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0,maximize:!0}).total;characteristics[`system.characteristics.${key}.value`]=average}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics())[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const source={icon:effect[0].icon,disabled:!1};foundry.utils.isNewerVersion(game.version,"11")?(source.name=game.i18n.localize(effect[0].name),source.statuses=[effect[0].id]):(source.label=game.i18n.localize(effect[0].label),source.flags={core:{statusId:effect[0].id}});const effectData=foundry.utils.mergeObject(source,custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&(value.system.properties.firearm||value.system.properties.ranged||"i.skill.fighting-throw"===value.flags.CoC7?.cocidFlag?.id)&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstItemByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstItemByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstItemByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}get useMythosHardened(){return this.mythosHardened&&game.settings.get("CoC7","allowMythosHardened")}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){return 0===this._rawValue?"0":this._rawValue?this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString():void 0}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}if(oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),oldCheck.messageId){const o=await game.messages.get(oldCheck.messageId);void 0!==o.rolls?.[0]?.options?.coc7Result&&(o.rolls[0].options.coc7Result.pushing=!0,await o.update({rolls:o.rolls}))}publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll&&0!==this._rawValue)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total,firstValue=0===selected?10:Math.floor(selected/10);for(const d of this.dice.roll.dice)d instanceof CONFIG.Dice.terms.t&&(d.results[0].result===firstValue?(firstValue=-1,d.results[0].active=!0):d.results[0].active=!1);this.dice.roll._total=this.dice.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async increaseLuckSpend(luckAmount){const spendingAmount=parseInt(luckAmount,10);this.totalLuckSpent=parseInt(this.totalLuckSpent??0,10)+spendingAmount;const modifiedResult=Math.max(1,this.modifiedResult-this.totalLuckSpent);1===modifiedResult?this.successLevel=CoC7Check.successLevel.critical:modifiedResult<=this.extremeThreshold?this.successLevel=CoC7Check.successLevel.extreme:modifiedResult<=this.hardThreshold?this.successLevel=CoC7Check.successLevel.hard:modifiedResult<=this.rawValue?this.successLevel=CoC7Check.successLevel.regular:this.fumbleThreshold<=modifiedResult?this.successLevel=CoC7Check.successLevel.fumble:modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),this.difficulty<=this.successLevel&&(this.isSuccess=!0,this.isFailure=!1),this.luckSpent=!0;let remove=0;for(let index=0,maxIndex=this.increaseSuccess.length;index<maxIndex;index++)this.increaseSuccess[index].luckToSpend=this.increaseSuccess[index].luckToSpend-spendingAmount,this.increaseSuccess[index].luckToSpend<1&&remove++;for(let index=0;index<remove;index++)this.increaseSuccess.shift();this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.dice)this.dice.roll.options.coc7Result={successLevel:Object.keys(CoC7Check.successLevel).find((key=>CoC7Check.successLevel[key]===this.successLevel))??"unknown",difficultySet:!this.isUnknown,passed:this.passed,pushing:!1,pushed:this.pushing,luckSpent:this.totalLuckSpent??0};else if("string"==typeof this.messageId){const o=await game.messages.get(this.messageId);void 0!==o.rolls?.[0]?.options?.coc7Result&&(o.rolls[0].options.coc7Result.luckSpent=this.totalLuckSpent??0,await o.update({rolls:o.rolls}))}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=foundry.utils.duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(foundry.utils.isNewerVersion(game.version,"11")?chatData.rolls=[this.dice.roll]:chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:{const characteristicList=foundry.utils.isNewerVersion(game.version,"12")?game.system.template.Actor.character.characteristics:game.system.template.Actor.templates.characteristics.characteristics;for(const[,value]of Object.entries(characteristicList))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(foundry.utils.duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLocaleLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}static getAnIdForGm(){const keepers=game.users.filter((u=>u.active&&u.isGM&&u.id!==game.user.id));switch(keepers.length){case 0:return ui.notifications.error("CoC7.ErrorMissingKeeperUser",{localize:!0}),!1;case 1:return keepers[0].id}return keepers[Math.floor(Math.random()*keepers.length)].id}static halfDB(db){db=(""===(db??"").toString().trim()?0:db).toString().trim();const roll=new Roll(db);for(const term of roll.terms)foundry.utils.isNewerVersion(game.version,"12")&&term instanceof foundry.dice.terms.Die?term._faces=Math.floor(term._faces/2):term instanceof Die?term.faces=Math.floor(term.faces/2):term instanceof NumericTerm&&(term.number=term.number<0?Math.ceil(term.number/2):Math.floor(term.number/2));let formula=roll.formula.toString().trim();return formula.startsWith("-")||(formula="+"+formula),formula}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=Object.assign(foundry.utils.flattenObject(game.i18n._fallback.CoC7?.CoCIDFlag?.keys??{}),foundry.utils.flattenObject(game.i18n.translations.CoC7?.CoCIDFlag?.keys??{})),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=await Promise.all(worldDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";const folders=[];let e=d?.folder;for(;e?.name;)folders.unshift(e?.name),e=e.folder;return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:folders.map((n=>n.indexOf(" ")>-1?'"'+n+'"':n)).join(" &gt; ")}}))),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=await Promise.all(compendiumDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";const folders=[];let e=d?.folder;for(;e?.name;)folders.unshift(e?.name),e=e.folder;for(folders.unshift(d.compendium.metadata.label),e=d?.compendium.folder;e?.name;)folders.unshift(e?.name),e=e.folder;return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:folders.map((n=>n.indexOf(" ")>-1?'"'+n+'"':n)).join(" &gt; ")}}))),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId);const options=foundry.utils.duplicate(this.options);await this.close(),await this.render(!0,options)}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName")),item.system.properties.ranged&&(item.system.specialization=game.i18n.localize("CoC7.RangedSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&(!0===skill.system.properties.firearm||!0===skill.system.properties.ranged)));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=foundry.utils.mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),html.find(".section-header").click(this._onSectionHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),this.actor.isOwner&&!this.actor.compendium?.locked&&(html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this))),this.actor.isOwner&&void 0===this.actor.compendium){if(game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((()=>{const toolTip=game.actors.documentClass.toolTipSkillText();!1!==toolTip&&game.CoC7Tooltips.displayToolTip(toolTip)}),delay))}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"characteristic",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"attribute",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=await TextEditor.enrichHTML(skill.system.description.value,{async:!0});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),this.object.img!==formData.img&&(this.object.token??this.object.prototypeToken).texture.src===CoCActor.defaultImg(this.object.type)&&(this.object.token?this.object.token.update({"texture.src":formData.img}):this.object.prototypeToken.update({"texture.src":formData.img})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=await TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"system.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized;let options=foundry.utils.duplicate(CoC7CharacterSheet.defaultOptions);this.summarized&&(options=foundry.utils.mergeObject(options,{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700})),options.token=this.options.token,await this.close(),await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".mythosEncountersTotalLoss").blur(this._onEditSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?foundry.utils.duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}async _onEditSanityLossReason(event){const input=$(event.currentTarget),offset=input.closest(".flexrow").data("offset");if(void 0!==this.actor.system.sanityLossEvents?.[offset]?.totalLoss){const sanityLossEvents=foundry.utils.duplicate(this.actor.system.sanityLossEvents);sanityLossEvents[offset].totalLoss=parseInt(input.val(),10),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=foundry.utils.flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=foundry.utils.expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=foundry.utils.mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=foundry.utils.duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;const CoCIDKeys=Object.assign(foundry.utils.flattenObject(game.i18n._fallback.CoC7?.CoCIDFlag?.keys??{}),foundry.utils.flattenObject(game.i18n.translations.CoC7?.CoCIDFlag?.keys??{}));for(const key in CoCIDKeys)foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=foundry.utils.isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);if(module&&(runMigrate||!Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)||String(this.updatedModules[module.id])!==String(module.version))){const knownModuleVersions={"call-of-cthulhu-foundryvtt-investigator-wizard":"1.0.3","cha-coc-fvtt-en-quickstart":"7.0","cha-coc-fvtt-en-starterset":"7.0"};"string"==typeof knownModuleVersions[module.id]?foundry.utils.isNewerVersion(module.version,knownModuleVersions[module.id])&&(this.currentModules[module.id]=module.version):this.currentModules[module.id]=module.version}}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=foundry.utils.mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(foundry.utils.expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&foundry.utils.mergeObject(original,update)})),delete update[embeddedName]})),foundry.utils.mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=foundry.utils.duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=foundry.utils.mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u3040-\\u30FF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("aeio"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle|(^| )\\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilitt: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrae|MO)",halfdb:"(|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejtnoci(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Jzyki)[:\n]",sectionSpells:"\n(?:Zaklcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrwka|Garand|Gauge |Lee-Enfield|Strzelba na sonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mootowa|Granat|Laska dynamitu|Dynamit)",example:"Przykadowa posta, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczcie: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalnoci: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obraenia 1K6\nWalka 30% (15/6), obraenia 1K3\nDerringer 40% (20/8), obraenia 1K8+1\nUnik 50% (25/10)\nUmiejtnoci\nTresura Zwierzt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczo 35%, Ukrywanie 10%\nJzyki: Angielski 80%, Eklo 5%.\nZaklcia: Przyzwanie NPC, Odesanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Comptences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bton de dynamite|Cocktail Molotov|Grenade  main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 DU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nComptences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificacin de dao)",halfdb:"(|medio dao|mitad|dao a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 aos\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNmero de Ataques 3 Prdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), dao 1D6\nBrawl 30% (15/6), dao 1D3\nDerringer 40% (20/8), dao 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks|||)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|)[:\n]",sectionSpells:"\n(?:spells||)[:\n]",handgun:"(?<type> |\\.22|\\.25()|\\.327\\.65mm|\\.327\\.65mm|\\.357 Magnum|\\.389mm|\\.38|M9|17|9mm|P08|\\.41|\\.44|\\.45|\\.45||Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>||||Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|)",machineGun:"(?<type>Browning|Vickers|)",launched:"(?<type>Molotov|Grenade|Dynamite||)",example:",  27\n 75  60  80  70  60  80\n 50  85 SAN 55 HP 14 DB: 1D4\n: 1 Move: 7 MP: 10 : 40 : 1\n: 3 : 1d4/1d8\n\n 50% (25/10),  1D6\n 30% (15/6),  1D3\n 40% (20/8),  1D8+1\n 50% (25/10)\n\n 55%,  30%,  25%,  20%,\n 50%,  45%,  25%,  75%,\n () 90%,  () 35%, \n 35%,  10%\n:  80%,  5%.\n:  NPC,  NPC."},ja:{description:"CoC7.Japanese",dbNone:"",armorNone:"",attacksPerRoundNone:"",sanLossNone:"",fulldb:"(Damage Bonus|DB|db|(|)?)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks||)[:\n]",newCombatHeader:"\n\n",sectionSkills:"\n(?:(?:Skills|)\\s*(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|)\\s*[:\n]",sectionSpells:"\n(?:spells|)\\s*[:\n]",handgun:"(?<type>||||||(|)?|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>|||||(|)?|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>||Submachine Gun|Thompson)",machineGun:"(?<type>|||Browning|Vickers)",launched:"(?<type>|||Molotov|Grenade|Dynamite)",example:" 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85  55  14 1D4\n1 7 10 40 1\n13 1D4/1D8\n\n 50% (25/10) 1D6\n 30% (15/6) 1D3+DB\n 40% (20/8) 1D8+1\n 50% (25/10)\n\n 25% 45% 10%\n 50% 25% 75%\n () 90% () 35% () 10%\n 55% 20% 35% 30%\n 80% 5%\nNPCNPC"}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilitt)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilittsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beien)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawd(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalno)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymaoci)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczcie(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalnoci|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obraenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Bro Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])DU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Sant Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Dplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Sant mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dgts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact| distance|Combat rapproch|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupacin(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mgicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Nmero de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Prdida de cordura|Prdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*dao)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Pelea|Mordisco)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks||# )(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss||SAN|SAN|SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge||)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(||Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"},ja:{age:"[(]?(?<age>\\d+)(\\s+)*(?:|)[)]?[,\\s]*",occupation:"[,\\s]*()?(\\s*[:])?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*[:])?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*[:])?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*[:])?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*[:])?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*[:])?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*[:])?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*[:])?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*[:])?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:(SAN|Sanity|))(\\s*[:])?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:(HP|Hit points||(|)?))(\\s*[:])?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:(MP|Magic points|(|)?))(\\s*[:])?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.ja.fulldb+")(\\s*[:])?\\s*(?<db>[+-]?\\s*\\d+(?:d\\d+|D\\d+)?|"+keys.ja.dbNone+")[,\\s\n]*",build:"(?<![a-z])(Build|)(\\s*[:])?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(Armor|)(\\s*[:])?\\s*(?<armor>"+keys.ja.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(Move|MOV|?)(\\s*[:])?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])(Luck|)(\\s*[:])?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:(Attacks per round|# Attacks|((1|1 |))?))(\\s*[:])?\\s*(?<attacksPerRound>"+keys.ja.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:(Sanity loss|SAN loss|))(\\s*[:]\\D*)?\\s*(?<sanLoss>"+keys.ja.sanLossNone+"|\\dD?[+\\d]*[\\/]\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t\\w "+nameCharacters+"]+)(\\**[,]?\\s+|\\*)(?:\\(|(?<percentage>\\d+)[%][,]?(?:\\s*[\\(]\\d+[\\/]\\d+[\\)]\\s*[,]?)?)?(\\s*(?:damage|))?\\s*(?<damage>(:?\\d+[dD])?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.ja.fulldb+"|"+keys.ja.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+[dD])?\\d+)*)\\)?",weaponDodge:"(?<name>(Dodge|))(\\s*[:])?\\s*\\(?(?<percentage>\\d+)\\)?\\s*[%]?(?:\\s*[\\(]\\d+[\\/]\\d+[\\)])?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate|\\d))[\\s:]*\\(?(?<percentage>\\d+)[^d][%]?\\)?(\\s*[\\(]\\d+[\\/]\\d+[\\)])?\\s?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)((|)||||||Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.ja.sectionCombats+"|"+keys.ja.sectionSkills+"|"+keys.ja.sectionLangauges+"|"+keys.ja.sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return"CoC7.Japanese"===this.keys.description?s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*[(]\s*/g," (").replace(/\s*[)]\s*/g,")").replace(/\s*[.]?\s*[.]?$/,"").replace(/^[]/,"").replace(/[]$/,""):s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+)[,]/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,system:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const system={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(system.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(system.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(system.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(system.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split(/[/]/);system.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(system.special.attacksPerRound=Number(pc.attacksPerRound)),system.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",system),system}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([foundry.utils.duplicate(skill),attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(foundry.utils.duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:game.i18n.localize("CoC7.LanguageSpecializationName")}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;const localizedFirearm=game.i18n.localize("CoC7.FirearmSpecializationName");if(this.getRegEx(this.keys.handgun).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameHandgun")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: `,skill)):this.getRegEx(this.keys.rifle).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameRifleShotgun")+")",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameRifle")+")",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameShotgun")+")",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx(this.keys.smb).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillNameSmb")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx(this.keys.machineGun).exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillnameMachineGun")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx(this.keys.launched).exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill",localizedFirearm+" ("+game.i18n.localize("CoC7.SkillnameLaunch")+")",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.message.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory??{});return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization,cloned.system.properties?.requiresname&&(cloned.system.properties.requiresname=!1),cloned.system.properties?.picknameonly&&(cloned.system.properties.picknameonly=!1)):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];Array.isArray(dholehousePossessions)||null==dholehousePossessions||(dholehousePossessions=[dholehousePossessions]);for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?foundry.utils.duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,system:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:foundry.utils.duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?foundry.utils.duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=foundry.utils.duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}async _onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=foundry.utils.duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=foundry.utils.duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3,METHOD_CHOOSE:4}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.chooseRolledValues?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_CHOOSE:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=await TextEditor.enrichHTML(archetype.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=await TextEditor.enrichHTML(archetype.system.suggestedOccupations,{async:!0,secrets:game.user.isGM}),sheetData.suggestedTraits=await TextEditor.enrichHTML(archetype.system.suggestedTraits,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.chooseRolledValues?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_CHOOSE:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES,sheetData.characteristicsMethods.METHOD_CHOOSE].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points.toString())&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>game.i18n.localize("CHARAC."+n.toUpperCase()))).join(", ").replace(/(, )([^,]+)$/,"$1"+game.i18n.localize("CoC7.Or")+" $2").replace(/^([^,]+),([^,]+)$/,"$1$2"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=game.i18n.localize("CHARAC."+this.object.requiresAgeAdjustments.reduce.from.toUpperCase())),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=await TextEditor.enrichHTML(occupation.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.personalText=occupation.system.personalText,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=(parseInt(sheetData.default,10)||0)+(parseInt(sheetData.object.personal,10)||0)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+(parseInt(v,10)||0)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new AverageRoll("("+base+")")[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0,maximize:!0}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_choose").click(this._onRollChoose.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:foundry.utils.mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]="";this.object.rolledValues=[]}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.personalText=occupation.system.personalText,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}else if(event.currentTarget.dataset.offset){const dragData={type:"investigatorValue",offset:event.currentTarget.dataset.offset};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_canDragStart(selector){return!0}_canDragDrop(selector){return!0}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,void 0===dataList.destination&&(dataList.destination=event.target.closest("li").dataset.empty),dataList.okay=!1,"x"===dataList.destination){const offset=this.object.rolledValues.findIndex((i=>!0===i.assigned));offset>-1&&(this.object.rolledValues[offset]={value:this.object.setupPoints[dataList.key],assigned:!1},this.object.setupPoints[dataList.key]=""),dataList.okay=!0}else if("-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}else if(void 0!==dataList.type&&"investigatorValue"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,!1===this.object.rolledValues[dataList.offset].assigned){let old;""!==this.object.setupPoints[dataList.destination]&&(old=this.object.setupPoints[dataList.destination]),this.object.setupPoints[dataList.destination]=this.object.rolledValues[dataList.offset].value,void 0!==old?this.object.rolledValues[dataList.offset].value=old:this.object.rolledValues[dataList.offset].assigned=!0,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResult=await rolltable[0].roll();tableResult.results[0].type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.results[0].text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onRollChoose(event){if(event.preventDefault(),""!==this.object.setup){const setup=await this.getCacheItemByCoCID(this.object.setup);if(void 0!==setup){const rollFormulas={};for(const key of["str","con","siz","dex","app","int","pow","edu"])rollFormulas[key]=setup.system.characteristics.rolls[key];if(""!==this.object.archetype){const archetype=await this.getCacheItemByCoCID(this.object.archetype);void 0!==archetype&&""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(rollFormulas[this.object.coreCharacteristic]=archetype.system.coreCharacteristicsFormula.value)}this.object.rolledValues=[];const html=[];for(const key in rollFormulas){const roll=new Roll(rollFormulas[key].toString());await roll.evaluate({async:!0}),this.object.rolledValues.push({value:roll.total,assigned:!1}),html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:rollFormulas[key].toString(),tooltip:await roll.getTooltip(),total:roll.total}))}ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.chooseRolledValues=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.chooseRolledValues=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES?(this.object.enforcePointBuy=!1,this.object.chooseRolledValues=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]):type===this.characteristicsMethods.METHOD_CHOOSE&&(this.object.enforcePointBuy=!1,this.object.chooseRolledValues=!0,this.object.quickFireValues=[]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues),game.settings.set("CoC7","InvestigatorWizardChooseValues",this.object.chooseRolledValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new AverageRoll("("+base+")")[foundry.utils.isNewerVersion(game.version,"12")?"evaluateSync":"evaluate"]({minimize:!0,maximize:!0}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=foundry.utils.randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):(item.system.properties?.firearm||item.system.properties?.ranged)&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=foundry.utils.duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=foundry.utils.duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0}},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){options=foundry.utils.mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),chooseRolledValues:game.settings.get("CoC7","InvestigatorWizardChooseValues"),placeable:foundry.utils.duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},rolledValues:[],archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,personalText:"",creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoCIDActorUpdateItems extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"coc-id-actor-update-items",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.ActorCoCIDItemsBest"),template:"systems/CoC7/templates/apps/coc-id-actor-update-items.hbs",width:520,height:410,closeOnSubmit:!1})}async getData(){const sheetData=await super.getData();sheetData.lang=CONFIG.supportedLanguages[game.i18n.lang]??"?";const defaultEra=game.settings.get("CoC7","worldEra");return sheetData.isEn="en"===game.i18n.lang,sheetData.era=game.i18n.format(COC7.eras[defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:defaultEra}),sheetData}getUpdateData(item){const output={flags:{CoC7:{cocidFlag:item.flags.CoC7.cocidFlag}},name:item.name,system:{}};for(const key of["chat","keeper","notes","opposingDifficulty","pushedFaillureConsequences","special","value"])"string"==typeof item.system.description?.[key]&&item.system.description[key].length&&(Object.prototype.hasOwnProperty.call(output.system,"description")||(output.system.description={}),output.system.description[key]=item.system.description[key]);switch(item.type){case"archetype":output.system.suggestedOccupations=item.system.suggestedOccupations,output.system.suggestedTraits=item.system.suggestedTraits;break;case"book":case"spell":case"status":case"weapon":break;case"occupation":output.system.suggestedContacts=item.system.suggestedContacts;break;case"skill":output.system.skillName=item.system.skillName,output.system.specialization=item.system.specialization}return output}async updateActors(actorList,parent){if(parent){const unlinkedActors=await actorList.filter((a=>!1===a.token?.actorLink)).map((a=>a.id)).filter(((a,o,v)=>v.indexOf(a)===o)).reduce((async(c,i)=>(c.push(await fromUuid("Actor."+i)),c)),[]);actorList=unlinkedActors.concat(actorList)}const ids={},anys={};for(const actor of actorList)for(const item of actor.items.contents)"string"==typeof item.flags?.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id.match(/-any$/)?(Object.prototype.hasOwnProperty.call(anys,item.flags.CoC7.cocidFlag.id)||(anys[item.flags.CoC7.cocidFlag.id]=[]),anys[item.flags.CoC7.cocidFlag.id].push(actor.name)):ids[item.flags.CoC7.cocidFlag.id]={});const found=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:game.system.api.cocid.makeGroupRegEx(Object.keys(ids)),type:"i",showLoading:!0});for(const item of found)ids[item.flags.CoC7.cocidFlag.id]=this.getUpdateData(item.toObject());Object.keys(anys).length&&console.log("Invalid any keys on Actors",anys);const allUpdates=[];for(const actor of actorList){const updates=[];for(const item of actor.items.contents)Object.prototype.hasOwnProperty.call(ids,item.flags?.CoC7?.cocidFlag?.id)&&updates.push(foundry.utils.mergeObject({_id:item.id},ids[item.flags.CoC7.cocidFlag.id]));updates.length&&allUpdates.push({_id:actor.id,items:updates})}allUpdates.length&&Actor.updateDocuments(allUpdates)}async _updateObject(event,formData){if("update"===event.submitter?.dataset.button){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting";const parent="string"==typeof formData["coc-id-actor-update-items-parent"];switch((formData["coc-id-actor-update-items-which"]??"").toString()){case"1":await this.updateActors(canvas.scene.tokens.contents.map((d=>d.object.actor)),parent);break;case"2":await this.updateActors(Object.values(ui.windows).filter((s=>s instanceof ActorSheet)).map((s=>s.object)),parent);break;case"3":await this.updateActors(game.actors.contents,!1)}}this.close()}static async create(options={}){new CoCIDActorUpdateItems(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-fingerprint",name:"actor-coc-id-best",title:"CoC7.ActorCoCIDItemsBest",onClick:async()=>await CoCIDActorUpdateItems.create()},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link","locator","getToken"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),data.type){case"CoC7Link":if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)));break;case"getToken":void 0!==data.appId&&"string"==typeof data.callBack&&void 0!==ui.windows[data.appId]&&"function"==typeof ui.windows[data.appId][data.callBack]&&ui.windows[data.appId][data.callBack](dropTargetTokens);break;default:if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find("#settings-documentation").append('<button class="trigger-system-manual"><i class="fas fa-books"></i> '+game.i18n.localize("CoC7.System.Documentation")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})),html.find(".trigger-system-manual").click((async()=>{(await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(priv){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=foundry.utils.duplicate(this.system.costs),losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value,priv));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});let chatData={user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html};return priv&&(chatData=ChatMessage.applyRollMode(chatData,"gmroll")),await ChatMessage.create(chatData)}async resolveLosses(characteristic,value,priv){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),loss=await this.grantSanityLoss(loss,priv);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value,priv){const template=SanCheckCard.template;let html=await renderTemplate(template,{}),chatData={user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html};priv&&(chatData=ChatMessage.applyRollMode(chatData,"gmroll"));const message=await ChatMessage.create(chatData),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);return await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),await sanityCheck.updateChatCard(),sanityCheck.sanLoss}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=foundry.utils.mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else await super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?foundry.utils.duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():foundry.utils.deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(foundry.utils.mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid);let particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token)){const foundTokens=canvas.scene.tokens.filter((d=>d.actorLink&&d.actor?.id===particpantDocument.id));1===foundTokens.length&&(particpantDocument=foundTokens[0])}if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize();const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize()):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.ranged=specialization===game.i18n.localize("CoC7.RangedSpecializationName"),output.combat=output.fighting||output.firearm||output.ranged}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends Die{constructor(termData){termData.faces=10,super(termData)}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},allowMythosHardened:{name:"SETTINGS.allowMythosHardenedTitle",hint:"SETTINGS.allowMythosHardenedHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=await TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=await TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!0,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedContent=await TextEditor.enrichHTML(sheetData.data.system.content,{async:!0,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?foundry.utils.duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?foundry.utils.duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dragSelector:".chase-token",permissions:{dragstart:game.user.isGM},callbacks:{dragstart:this._onTokenSelectorDragStart.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async _onTokenSelectorDragStart(event){const data={type:"getToken",appId:this.appId,callBack:"addTokenToChase"};event.dataTransfer.setData("text/plain",JSON.stringify(data))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async addTokenToChase(tokens){1===tokens.length?(this.object.docUuid=tokens[0].document?.uuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)):ui.notifications.warn(game.i18n.localize("CoC7.ErrorTokenIncorrect"))}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.system.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.system.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?foundry.utils.mergeObject(data,updateData):foundry.utils.expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=foundry.utils.duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);foundry.utils.mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return foundry.utils.flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=foundry.utils.expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=foundry.utils.duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"system.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"system.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"system.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"system.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"system.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,foundry.utils.mergeObject(oldParticipant,participant),await this.item.update({"system.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"system.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=foundry.utils.getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=foundry.utils.duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?foundry.utils.duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?foundry.utils.duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast(!1)})),html.find("#cast-spell-hidden").click((event=>{event.preventDefault(),this.item.cast(!0)}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=await TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}function compendiumFilter(){const oldSearchFilter=Compendium.prototype._onSearchFilter;Compendium.prototype._onSearchFilter=function(event,query,rgx,html){if("Item"===this.collection.documentName){void 0===html&&(query=this.element[0].querySelector(this.options.filters[0].inputSelector).value,rgx=new RegExp(RegExp.escape(query),"i"),html=this.element[0].querySelector(this.options.filters[0].contentSelector));const typeSelect=this.element[0].querySelector("select[name=coc7type"+this.appId+"]"),eraSelect=this.element[0].querySelector("select[name=coc7era"+this.appId+"]"),type=typeSelect.value;let era="";switch(type){case"occupation":case"setup":case"skill":case"weapon":eraSelect.parentElement.style.display="",era=eraSelect.value;break;default:eraSelect.parentElement.style.display="hide"}const isNameSearch=!!query,isSearch=isNameSearch||""!==type||""!==era,entryIds=new Set,folderIds=new Set,autoExpandFolderIds=new Set;if(isSearch){const includeFolder=(folder,autoExpand=!0)=>{if(!folder)return;if("string"==typeof folder&&(folder=this.collection.folders.get(folder)),!folder)return;const folderId=folder._id;folderIds.has(folderId)?autoExpand&&!autoExpandFolderIds.has(folderId)&&autoExpandFolderIds.add(folderId):(folderIds.add(folderId),autoExpand&&autoExpandFolderIds.add(folderId),folder.folder&&includeFolder(folder.folder))};isNameSearch&&this._matchSearchFolders(rgx,includeFolder),function(app,isNameSearch,query,type,era,entryIds,folderIds,includeFolder){const entries=app.collection.index??app.collection.contents,matchedFolderIds=new Set(folderIds);for(const entry of entries){const entryId=app._getEntryId(entry);if(matchedFolderIds.has(entry.folder?._id??entry.folder))entryIds.add(entryId);else{const matchName=!isNameSearch||query.test(SearchFilter.cleanQuery(app._getEntryName(entry))),matchType=""===type||type===entry.type,eras=Object.keys(entry.flags?.CoC7?.cocidFlag?.eras??{}),matchEras=""===era||0===eras.length||eras.includes(era);matchName&&matchType&&matchEras&&(entryIds.add(entryId),includeFolder(entry.folder))}}}(this,isNameSearch,rgx,type,era,entryIds,folderIds,includeFolder)}for(const el of html.querySelectorAll(".directory-item"))if(!el.classList.contains("hidden"))if(el.classList.contains("folder")){const match=isSearch&&folderIds.has(el.dataset.folderId);el.style.display=!isSearch||match?"flex":"none",autoExpandFolderIds.has(el.dataset.folderId)?isSearch&&match&&el.classList.remove("collapsed"):el.classList.toggle("collapsed",!game.folders._expanded[el.dataset.uuid])}else el.style.display=!isSearch||entryIds.has(el.dataset.entryId)?"flex":"none"}else oldSearchFilter.call(this,event,query,rgx,html)},Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){app.collection.indexed||await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[],selectedType=app.options.filterCoC7?.type??"",selectedEra=app.options.filterCoC7?.era??"";select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");const groupTypes=[{key:"archetype",name:"CoC7.Entities.Archetype"},{key:"book",name:"CoC7.Entities.Book"},{key:"item",name:"CoC7.Entities.Item"},{key:"occupation",name:"CoC7.Entities.Occupation"},{key:"setup",name:"CoC7.Entities.Setup"},{key:"skill",name:"CoC7.Entities.Skill"},{key:"spell",name:"CoC7.Entities.Spell"},{key:"status",name:"CoC7.Entities.Status"},{key:"talent",name:"CoC7.Entities.Talent"},{key:"weapon",name:"CoC7.Entities.Weapon"}];for(const groupType of groupTypes)types.includes(groupType.key)&&select.push('<option value="'+groupType.key+'"'+(selectedType===groupType.key?' selected="selected"':"")+">"+game.i18n.localize(groupType.name)+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'"'+(selectedEra===era.id?' selected="selected"':"")+">"+era.name+"</option>");let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(app.options.filters[0].callback.bind(app))}}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):(!0===era&&(era=game.settings.get("CoC7","worldEra")),game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era}))}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=Object.assign(foundry.utils.flattenObject(game.i18n._fallback.CoC7?.CoCIDFlag?.keys??{}),foundry.utils.flattenObject(game.i18n.translations.CoC7?.CoCIDFlag?.keys??{}));return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="all",langFallback=!0,showLoading=!1}={}){let candidates=await CoCID.fromCoCIDRegexAllMixed({cocidRegExp,type,lang,era,scope,langFallback,showLoading});return langFallback&&"en"!==lang&&(candidates=CoCID.filterByLanguage(candidates,lang)),candidates.sort(CoCID.compareCoCIDPrio),await CoCID.onlyDocuments(candidates,showLoading)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="all",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];let candidates=await this.fromCoCIDRegexAllMixed({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});langFallback&&"en"!==lang&&(candidates=CoCID.filterByLanguage(candidates,lang)),candidates.sort(CoCID.compareCoCIDPrio);const ids={};for(const candidate of candidates)Object.prototype.hasOwnProperty.call(ids,candidate.flags.CoC7.cocidFlag.id)||(ids[candidate.flags.CoC7.cocidFlag.id]=candidate);return await CoCID.onlyDocuments(Object.values(ids),showLoading)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return!1===era?(ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[]):CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static async fromCoCIDRegexAllMixed({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="all",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];let results=[],count=0;return showLoading&&(["all","world"].includes(scope)&&count++,["all","compendiums"].includes(scope)&&(count+=game.packs.size)),["all","world"].includes(scope)&&(results=results.concat(await CoCID.docsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count}))),["all","compendiums"].includes(scope)&&(results=results.concat(await CoCID.indexesFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count}))),showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),results}static async docsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments}static async indexesFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const documentType=CoCID.getDocumentType(type).name;let indexDocuments=[],count=1;for(const pack of game.packs)progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType&&(pack.indexed||await pack.getIndex(),indexDocuments=indexDocuments.concat(pack.index.filter((i=>{if("string"!=typeof i.flags?.CoC7?.cocidFlag?.id)return!1;const eras=i.flags.CoC7.cocidFlag.eras??{},matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(i.flags.CoC7.cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(i.flags.CoC7.cocidFlag.lang)&&matchingEras}))));return indexDocuments}static compareCoCIDPrio(a,b){const ap=parseInt(a.flags.CoC7.cocidFlag.priority,10),bp=parseInt(b.flags.CoC7.cocidFlag.priority,10);if(ap===bp){const ao=a instanceof foundry.abstract.DataModel;return ao===b instanceof foundry.abstract.DataModel?0:ao?-1:1}return bp-ap}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}static async onlyDocuments(candidates,showLoading){const len=candidates.length;let count=0;for(const offset in candidates)showLoading&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(count/len)}),count+=100),candidates[offset]instanceof foundry.abstract.DataModel||(candidates[offset]=await fromUuid(candidates[offset].uuid));return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),candidates}static filterByLanguage(indexes,lang){const ids=indexes.reduce(((c,i)=>(c[i.flags.CoC7.cocidFlag.id]=c[i.flags.CoC7.cocidFlag.id]||i.flags.CoC7.cocidFlag.lang===lang,c)),{});return indexes.filter((i=>"en"!==i.flags.CoC7.cocidFlag.lang||!ids[i.flags.CoC7.cocidFlag.id]))}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){console.warn("Calling documentsFromWorld directly is depreciated");let documents=await CoCID.docsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar});return langFallback&&"en"!==lang&&(documents=CoCID.filterByLanguage(documents,lang)),documents.sort(CoCID.compareCoCIDPrio),documents}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){console.warn("Calling documentsFromCompendia directly is depreciated");let indexes=await CoCID.indexesFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar});return langFallback&&"en"!==lang&&(indexes=CoCID.filterByLanguage(indexes,lang)),indexes.sort(CoCID.compareCoCIDPrio),await CoCID.onlyDocuments(indexes,progressBar>0)}}const{RegionBehaviorType}=foundry.data.regionBehaviors??{},RegionBehaviorTypeClass=void 0===RegionBehaviorType?class{}:RegionBehaviorType;class CoC7ClickableEvents extends RegionBehaviorTypeClass{static initSelf(){if(!foundry.utils.isNewerVersion(game.version,"12"))return;Object.assign(CONFIG.RegionBehavior.dataModels,{coc7ClickableEvents:CoC7ClickableEvents}),Object.assign(CONFIG.RegionBehavior.typeIcons,{coc7ClickableEvents:"fa-solid fa-computer-mouse"}),DocumentSheetConfig.registerSheet(RegionBehavior,"CoC7",foundry.applications.sheets.RegionBehaviorConfig,{types:["coc7ClickableEvents"],makeDefault:!0});const oldOnClickLeft=TokenLayer.prototype._onClickLeft;TokenLayer.prototype._onClickLeft=function(event){if(oldOnClickLeft.call(this,event),canvas.activeLayer instanceof TokenLayer){const destination=canvas.activeLayer.toLocal(event);for(const region of canvas.scene.regions.contents)region.behaviors.filter((b=>!b.disabled)).find((b=>b.system instanceof CoC7ClickableEvents))&&region.object.polygonTree.testPoint(destination)&&region.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleLeftClickEvent()}))}};const oldOnClickRight=TokenLayer.prototype._onClickRight;TokenLayer.prototype._onClickRight=function(event){if(oldOnClickRight.call(this,event),canvas.activeLayer instanceof TokenLayer){const destination=canvas.activeLayer.toLocal(event);for(const region of canvas.scene.regions.contents)region.behaviors.filter((b=>!b.disabled)).find((b=>b.system instanceof CoC7ClickableEvents))&&region.object.polygonTree.testPoint(destination)&&region.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleRightClickEvent()}))}},document.body.addEventListener("mousemove",(async function(event){if(canvas.activeLayer instanceof TokenLayer){const pointer=canvas?.app?.renderer?.events?.pointer;if(!pointer)return;const destination=canvas.activeLayer.toLocal(event);let setPointer=!1;for(const region of canvas.scene.regions.contents)region.behaviors.filter((b=>!b.disabled)).find((b=>b.system instanceof CoC7ClickableEvents))&&region.object.polygonTree.testPoint(destination)&&(setPointer=await region.behaviors.filter((b=>!b.disabled)).reduce((async(c,b)=>{const r=await b.system._handleMouseOverEvent();return!1!==r&&!0!==r&&console.error(b.uuid+" did not return a boolean"),c=c||r}),!1));document.getElementById("board").style.cursor=setPointer?"pointer":""}}))}static defineSchema(){return{mouseOver:new foundry.data.fields.JavaScriptField({async:!0,gmOnly:!0,initial:"return false",label:"CoC7.ClickableEvents.MouseOver.Title",hint:"CoC7.ClickableEvents.MouseOver.Hint"}),leftClick:new foundry.data.fields.JavaScriptField({async:!0,gmOnly:!0,label:"CoC7.ClickableEvents.LeftClick.Title"}),rightClick:new foundry.data.fields.JavaScriptField({async:!0,gmOnly:!0,label:"CoC7.ClickableEvents.RightClick.Title"})}}async _handleMouseOverEvent(){try{const fn=new foundry.utils.AsyncFunction("scene","region","behavior",`{${this.mouseOver}\n}`);return await fn.call(globalThis,this.scene,this.region,this.behavior)}catch(err){console.error(err)}}async _handleLeftClickEvent(){try{const fn=new foundry.utils.AsyncFunction("scene","region","behavior",`{${this.leftClick}\n}`);return await fn.call(globalThis,this.scene,this.region,this.behavior)}catch(err){console.error(err)}}async _handleRightClickEvent(){try{const fn=new foundry.utils.AsyncFunction("scene","region","behavior",`{${this.rightClick}\n}`);return await fn.call(globalThis,this.scene,this.region,this.behavior)}catch(err){console.error(err)}}static async ClickRegionLeftUuid(docUuid){const doc=await fromUuid(docUuid);doc?doc.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleLeftClickEvent()})):console.error("journalPageUuids "+docUuid+" not loaded")}static async ClickRegionRightUuid(docUuid){const doc=await fromUuid(docUuid);doc?doc.behaviors.filter((b=>!b.disabled)).map((async b=>{!0===await b.system._handleMouseOverEvent()&&await b.system._handleRightClickEvent()})):console.error("journalPageUuids "+docUuid+" not loaded")}static async hasPermissionDocument(documentUuid){const doc=await fromUuid(documentUuid);return doc?.testUserPermission(game.user,CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER)??!1}static async InSceneRelativeTeleport(event,destinationRegion){if("tokenMoveIn"===event.name){const sourceTL=event.region.shapes.reduce(((c,p)=>{if(p instanceof foundry.data.PolygonShapeData)for(let i=0,im=p.points.length;i<im;i+=2)(!1===c[0]||p.points[i]<c[0])&&(c[0]=p.points[i]),(!1===c[1]||p.points[i+1]<c[1])&&(c[1]=p.points[i+1]);else if(p instanceof foundry.data.RectangleShapeData){const x=Math.min(p.x+p.width,p.x),y=Math.min(p.y+p.height,p.y);(!1===c[0]||x<c[0])&&(c[0]=x),(!1===c[1]||y<c[1])&&(c[1]=y)}return c}),[!1,!1]),destinationTL=(await fromUuid(destinationRegion)).shapes.reduce(((c,p)=>{if(p instanceof foundry.data.PolygonShapeData)for(let i=0,im=p.points.length;i<im;i+=2)(!1===c[0]||p.points[i]<c[0])&&(c[0]=p.points[i]),(!1===c[1]||p.points[i+1]<c[1])&&(c[1]=p.points[i+1]);else if(p instanceof foundry.data.RectangleShapeData){const x=Math.min(p.x+p.width,p.x),y=Math.min(p.y+p.height,p.y);(!1===c[0]||x<c[0])&&(c[0]=x),(!1===c[1]||y<c[1])&&(c[1]=y)}return c}),[!1,!1]),destinationX=event.data.destination.x-sourceTL[0]+destinationTL[0],destinationY=event.data.destination.y-sourceTL[1]+destinationTL[1];await event.data.token.object.stopAnimation(),event.data.token.update({x:destinationX,y:destinationY},{animate:!1})}}static async MapPinToggle(toggle,{journalPageUuids=[],noteUuids=[],permissionFalse=CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE,permissionTrue=CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER}={}){game.socket.emit("system.CoC7",{type:"toggleMapNotes",toggle:!0}),game.settings.set("core",NotesLayer.TOGGLE_SETTING,!0);for(const docUuid of journalPageUuids){const doc=await fromUuid(docUuid);if(doc){let permission=permissionTrue;toggle||(permission=permissionFalse),await doc.update({"ownership.default":permission})}else console.error("journalPageUuids "+docUuid+" not loaded")}for(const docUuid of noteUuids){const doc=await fromUuid(docUuid);if(doc){let texture="systems/CoC7/assets/art/map-pin.svg";toggle||(texture="systems/CoC7/assets/art/map-pin-dark.svg"),await doc.update({"texture.src":texture})}else console.error("noteUuids "+docUuid+" not loaded")}}static async openDocument(documentUuid,pageId=null,anchor=null){const doc=await fromUuid(documentUuid);doc?.testUserPermission(game.user,CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER)&&(pageId?doc.pages.get(pageId)?.testUserPermission(game.user,CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER)&&doc.sheet.render(!0,{pageId,anchor}):doc.sheet.render(!0))}static async toggleTileJournalPages(active,tileUuids,journalUuids,pageUuids,{pagePermission=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER}={}){for(const docUuid of tileUuids){const doc=await fromUuid(docUuid);doc?await doc.update({hidden:!active}):console.error("Tile "+docUuid+" not loaded")}const permission=active?pagePermission:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE;for(const docUuid of pageUuids){const doc=await fromUuid(docUuid);doc?await doc.update({"ownership.default":permission}):console.error("Journal Page "+docUuid+" not loaded")}for(const docUuid of journalUuids){const doc=await fromUuid(docUuid);doc?0!==pageUuids.length&&permission!==pagePermission&&0!==doc.pages.contents.filter((d=>d.ownership.default===pagePermission)).length||await doc.update({"ownership.default":active?CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}):console.error("Journal "+docUuid+" not loaded")}}static async toScene(sceneUuid){const doc=await fromUuid(sceneUuid);doc?setTimeout((()=>{doc.view()}),100):console.error("Scene "+sceneUuid+" not loaded")}}function init_listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs","systems/CoC7/templates/chat/messages/roll-container.hbs","systems/CoC7/templates/chat/messages/roll-dice.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","distanceTheatreOfTheMind",{name:"SETTINGS.SceneDistanceNotCalcualtedNoError",hint:"SETTINGS.SceneDistanceNotCalcualtedNoErrorHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","tokenDropMode",{name:"SETTINGS.TokenDropMode",hint:"SETTINGS.TokenDropModeHint",scope:"world",config:!0,default:"ask",type:String,choices:{ask:"SETTINGS.TokenDropModeAsk",roll:"SETTINGS.TokenDropModeRoll",average:"SETTINGS.TokenDropModeAverage",ignore:"SETTINGS.TokenDropModeIgnore"}}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),game.settings.register("CoC7","InvestigatorWizardChooseValues",{name:"Choose where to place rolled characteristics",scope:"world",config:!1,type:Array,default:[]}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),Handlebars.registerHelper("localizeRollName",(function(options){const difficulty=options.hash.difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(options.hash.difficulty),modifier=options.hash.modifier>0?`+${options.hash.modifier}`:options.hash.modifier<0&&options.hash.modifier.toString();return game.i18n.format("CoC7.LinkCheck"+(difficulty?"Diff":"")+(modifier?"Modif":"")+(options.hash.pushing?"Pushing":""),{difficulty,modifier,name:options.hash.name})})),compendiumFilter(),CoCID.init(),CoC7Link.init(),Hooks.once("diceSoNiceReady",(dice3d=>{for(const system in dice3d.DiceFactory.systems){const d100=dice3d.DiceFactory.systems[system].dice.find((d=>"d100"===d.type));if(void 0!==d100){if(void 0===dice3d.DiceFactory.systems[system].dice.find((d=>"dt"===d.type))){const diceDecader=Object.assign(Object.create(Object.getPrototypeOf(d100)),d100);diceDecader.type="dt",dice3d.DiceFactory.systems[system].dice.push(diceDecader)}if(void 0===dice3d.DiceFactory.systems[system].dice.find((d=>"do"===d.type))){const diceDecader=Object.assign(Object.create(Object.getPrototypeOf(d100)),d100);diceDecader.type="do",dice3d.DiceFactory.systems[system].dice.push(diceDecader)}}}})),CoC7ClickableEvents.initSelf(),CONFIG.TextEditor.enrichers.push({pattern:/@chaosiumUUID\[([^#\]]+)(?:#([^\]]+))?](?:{([^}]+)})?/gi,enricher:async(match,{relativeTo}={})=>{const[selectors,hash,name]=match.slice(1,4);let data={name,classes:["content-link","broken"],icon:"fas fa-unlink"};const parts=selectors?.split(/\s*,\s*/);if(parts){const keys=parts.reduce(((c,i)=>{const keyval=i.match(/^(([^:]+):)(.+)?$/);return keyval?c[keyval[2]]=keyval[3]:c.uuid=i,c}),{});if(keys.uuid){const doc=await fromUuid(keys.uuid,{relative:relativeTo});if(doc&&(data={name:name||doc.name||keys.uuid,classes:["content-link"],dataset:{link:"",uuid:doc.uuid,id:doc.id,type:doc.documentName},icon:keys.icon??CONFIG[doc.documentName].sidebarIcon},hash&&(data.dataset.hash=hash),keys.img)){const a=document.createElement("a");a.classList.add(data.classes);for(const[k,v]of Object.entries(data.dataset))null!=v&&(a.dataset[k]=v);return a.innerHTML=`<img src="${keys.img}" height="16px" style="vertical-align:bottom;border:0;">${data.name}`,a}}}return TextEditor.createAnchor(data)}})}))}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector),void 0!==this.currentStep.sidebarTab&&ui.sidebar.activateTab(this.currentStep.sidebarTab)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(foundry.utils.mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'.tabs>a[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",sidebarTab:"settings"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-tab="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les rgles optionnelles.",description:"Activez les rgles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramtres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramtres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Systme de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Systme de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/rgles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/rgles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ",es:"35FM7ZOdzC6L2xlj",fr:"tdakyzTVOQsAMdSm"};void 0===readMe[lang]&&(lang="en"),CONFIG.CoC7=CONFIG.CoC7??{},CONFIG.CoC7.Manual=readMe[lang],foundry.utils.isNewerVersion(game.system.version,instructionsVersion??"0")&&((await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)),async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){Hooks.on("createToken",(async(tokenDocument,options,craetorId)=>{if(game.user.id===craetorId&&("icons/svg/mystery-man.svg"===tokenDocument.texture.src&&tokenDocument.texture.src!==tokenDocument._object.actor.img&&(tokenDocument.texture.src=tokenDocument._object.actor.img),"character"!==tokenDocument._object.actor.type&&(tokenDocument._object.actor.hasRollableCharacteristics||tokenDocument._object.actor.hosRollableSkills)))switch(game.settings.get("CoC7","tokenDropMode")){case"ask":new Dialog({title:game.i18n.localize("CoC7.TokenCreationRoll.Title"),content:game.i18n.localize("CoC7.TokenCreationRoll.Prompt"),buttons:{roll:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonRoll"),callback:async()=>{await tokenDocument._object.actor.rollCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Rolled",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}},average:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonAverage"),callback:async()=>{await tokenDocument._object.actor.averageCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Averaged",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0);break;case"roll":tokenDocument._object.actor.rollCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Rolled",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0;break;case"average":tokenDocument._object.actor.averageCharacteristicsValue(),ui.notifications.info(game.i18n.format("CoC7.TokenCreationRoll.Averaged",{name:tokenDocument.object.actor.name})),tokenDocument._object.actor.locked=!0}})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"})})),init_listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data),void 0!==app.flags?.CoC7?.["group-message"]&&CoC7GroupMessage.renderChatMessage(app,html,data)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{let imageReplaced=!1,textReplaced=!1;game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&(html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),imageReplaced=!0),""!==game.settings.get("CoC7","artPauseText")&&(html.find("h3").html(game.settings.get("CoC7","artPauseText")),textReplaced=!0)),imageReplaced||html.find("img").attr("src","systems/CoC7/assets/images/timetrap2.webp"),textReplaced||html.find("figcaption").html(game.i18n.localize("CoC7.PauseName"))})),Hooks.on("renderPlayerList",((playerList,html,data)=>{$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderRealRoll",((app,html,options)=>{for(const term in options.dieTerms)for(const input in options.dieTerms[term].inputs)if(options.dieTerms[term]instanceof CoC7DecaderDie){const tag=html.find('[name="'+term+"."+input+'"]');1===tag.length&&(tag[0].placeholder=game.i18n.localize("CoC7.RealRollDecaderPlaceholderName"))}})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0);break;case"group-message-new":CoC7GroupMessage.newGroupMessage(data);break;case"group-message-roll":CoC7GroupMessage.performMyRolls(data);break;case"group-message-update":CoC7GroupMessage.updateTheMessage(data)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}switch(data.type){case"updateChar":CoC7Utilities.updateCharSheets();break;case"toggleMapNotes":game.settings.set("core",NotesLayer.TOGGLE_SETTING,!0===data.toggle)}}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name},ClickRegionLeftUuid:CoC7ClickableEvents.ClickRegionLeftUuid,ClickRegionRightUuid:CoC7ClickableEvents.ClickRegionRightUuid,hasPermissionDocument:CoC7ClickableEvents.hasPermissionDocument,InSceneRelativeTeleport:CoC7ClickableEvents.InSceneRelativeTeleport,MapPinToggle:CoC7ClickableEvents.MapPinToggle,openDocument:CoC7ClickableEvents.openDocument,toggleTileJournalPages:CoC7ClickableEvents.toggleTileJournalPages,toScene:CoC7ClickableEvents.toScene},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg");const effectNameKey=foundry.utils.isNewerVersion(game.version,"11")?"name":"label";CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,[effectNameKey]:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,[effectNameKey]:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,[effectNameKey]:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,[effectNameKey]:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(statusKey,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(statusKey,{forceValue:!0})}}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory,Hooks.on("drawNote",(function(note){note.document.getFlag("CoC7","hide-background")&&note.controlIcon.bg.clear()})),Hooks.on("renderCoC7JournalSheet",(function(application,html,data){if(application.object.getFlag("CoC7","css-adventure-entry")&&(html.hasClass("coc7-adventure-entry")||html.addClass("coc7-adventure-entry"),application.object.getFlag("CoC7","fixed-adventure-heading")&&!html.hasClass("fixed-adventure-heading"))){const obj=$(html);obj.addClass("fixed-adventure-heading");const subheading=data.pages?.[0]?.flags?.CoC7?.["fixed-adventure-subheading"]??"";if(""===subheading)obj.find("article.journal-entry-page.text.level1")?.before('<div style="padding: 0.5em;"></div>');else{const short=0===subheading.trim().length;obj.find("article.journal-entry-page.text.level1")?.before('<div class="adventure-heading-section flexrow"><div class="bookmark'+(short?" short":"")+'"><img src="systems/CoC7/assets/art/'+(short?"bookmarks.webp":"bookmark.webp")+'"></div><div class="adventure-heading"><div class="heading">'+data.title+"</div>"+(short?"":'<div class="subheading">'+subheading+"</div>")+"</div></div>")}}})),Hooks.on("renderJournalTextPageSheet",(function(application,html,data){application.object.parent.getFlag("CoC7","css-adventure-entry")&&(html.hasClass("coc7-adventure-entry")||(html.addClass("coc7-adventure-entry"),html.find("section.tmi-toggleable p.toggle").click((event=>{const obj=$(event.currentTarget),section=obj.closest("section.tmi-toggleable").find("div.toggle:first");section.is(":visible")?(obj.text("Reveal"),section.slideUp()):(obj.text("Hide"),section.slideDown())}))))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDTyxNQUFNQSxLQUFPLENBU3BCQSxLQUFZLENBQ1ZDLFNBQVUsZUFDVkMsT0FBUSxpQkFDUkMsV0FBWSxxQkFDWkMsS0FBTSxlQUNOQyxpQkFBa0IsMkJBQ2xCQyxxQkFBc0IsK0JBQ3RCQyxTQUFVLG1CQUNWQyxhQUFjLHVCQUNkQyxRQUFTLGtCQUNUQyxZQUFhLHNCQUNiQyxjQUFlLHdCQUNmQyxTQUFVLG1CQUNWQyxTQUFVLG9CQUdaYixtQkFBMEIsQ0FDeEJjLFlBQWEsY0FDYkMsYUFBYyxlQUNkQyxZQUFhLGNBQ2JDLGFBQWMsZUFDZEMsSUFBSyxNQUNMQyxNQUFPLFNBR1RuQixnQkFBdUIsQ0FDckJjLFlBQWEsaUNBQ2JDLGFBQWMsa0NBQ2RDLFlBQWEsaUNBQ2JDLGFBQWMsa0NBQ2RDLElBQUsseUJBQ0xDLE1BQU8sNEJBR1RuQixpQkFBd0IsQ0FDdEJvQixLQUFNLE9BQ05DLE1BQU8sUUFDUEMsVUFBVyxZQUNYQyxTQUFVLFdBQ1ZDLFFBQVMsVUFDVEMsRUFBRyxJQUNIQyxFQUFHLElBQ0hDLE1BQU8sUUFDUEMsV0FBWSxjQUdkNUIsY0FBcUIsQ0FDbkJvQixLQUFNLENBQ0pTLEtBQU0sd0JBQ05DLE9BQVEsSUFFVlQsTUFBTyxDQUNMUSxLQUFNLHlCQUNOQyxPQUFRLENBQUMsVUFFWFIsVUFBVyxDQUNUTyxLQUFNLDZCQUNOQyxPQUFRLENBQUMsVUFFWFAsU0FBVSxDQUNSTSxLQUFNLDRCQUNOQyxPQUFRLENBQUMsVUFFWE4sUUFBUyxDQUNQSyxLQUFNLDJCQUNOQyxPQUFRLENBQUMsVUFFWEwsRUFBRyxDQUNESSxLQUFNLDJCQUNOQyxPQUFRLENBQUMsUUFFWEosRUFBRyxDQUNERyxLQUFNLHdCQUNOQyxPQUFRLENBQUMsUUFFWEgsTUFBTyxDQUNMRSxLQUFNLHVCQUNOQyxPQUFRLElBRVZGLFdBQVksQ0FDVkMsS0FBTSxnQ0FDTkMsT0FBUSxLQUlaOUIsZ0JBQXVCLENBQ3JCK0IsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxpQkFDTEMsSUFBSyxrQkFPUHRDLGdCQUF1QixDQUNyQnVDLGNBQWUsMEJBQ2ZDLFNBQVUscUJBQ1ZDLFFBQVMsb0JBQ1RDLE9BQVEsbUJBQ1JDLEtBQU0saUJBQ05DLE9BQVEsbUJBQ1JDLFNBQVUscUJBQ1ZDLFFBQVMsb0JBQ1RDLE9BQVEsbUJBQ1JDLGFBQWMseUJBQ2RDLGNBQWUsMEJBQ2ZDLGFBQWMseUJBQ2RDLFFBQVMsb0NBR1huRCxpQkFBd0IsQ0FDdEJvRCxNQUFPLDZCQUNQQyxLQUFNLGtCQUNOQyxLQUFNLDZCQUNOQyxPQUFRLDhCQUNSQyxRQUFTLCtCQUNUQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLDZCQUdSckUsZ0JBQXVCLENBQ3JCc0UsS0FBTSxpQkFDTkMsUUFBUyxvQkFDVEMsUUFBUyxvQkFDVEMsT0FBUSxtQkFDUkMsS0FBTSxpQkFDTkMsWUFBYSx3QkFDYkMsS0FBTSxpQkFDTmhDLE9BQVEsb0JBR1Y1QyxTQUFnQixDQUNkNkUsT0FBUSxrQkFDUkMsT0FBUSxrQkFDUkMsTUFBTyxjQUdUL0UsV0FBa0IsQ0FDaEJnRixTQUFVLHNCQUNWQyxPQUFRLG9CQUNSckMsT0FBUSxvQkFDUnNDLGNBQWUsMkJBQ2ZDLE1BQU8sbUJBQ1BDLE9BQVEsb0JBQ1JMLE1BQU8sb0JBR1QvRSxXQUFrQixDQUNoQnFGLE1BQU8sYUFDUEMsT0FBUSxlQUdWdEYscUJBQTRCLENBQzFCdUYsUUFBUyxlQUNUQyxhQUFjLG9CQUNkdEYsT0FBUSxjQUNSRSxLQUFNLGFBR1JKLFFBQWUsQ0FBQyxHQUVoQkEsS0FBS3lGLFFBQVFDLE1BQVEsQ0FDbkIsT0FBUSx3Q0FDUixPQUFRLHdDQUNSLE9BQVEsd0NBQ1IsT0FBUSx3Q0FDUixPQUFRLHdDQUNSLE9BQVEsd0NBQ1IsT0FBUSx3Q0FDUixPQUFRLHlDQUdWMUYsS0FBS3lGLFFBQVFFLFdBQWEsQ0FDeEIsT0FBUSw4Q0FDUixPQUFRLDhDQUNSLE9BQVEsOENBQ1IsT0FBUSw4Q0FDUixPQUFRLDhDQUNSLE9BQVEsOENBQ1IsT0FBUSw4Q0FDUixPQUFRLCtDQUdWM0YsS0FBSzRGLE9BQVMsQ0FDWkMsWUFBYSxjQUNiQyxZQUFhLGNBQ2JDLFlBQWEsY0FDYkMsZUFBZ0IsaUJBQ2hCQyxNQUFPLFFBQ1BDLE1BQU8sUUFDUEMsS0FBTSxRQUdSbkcsS0FBS29HLFlBQWMsbUJBQ25CcEcsS0FBS3FHLGFBQWUsb0JBQ3BCckcsS0FBS3NHLGFBQWUsb0JBQ3BCdEcsS0FBS3VHLFlBQWMsbUJBQ25CdkcsS0FBS3dHLGNBQWdCLHFCQUVyQnhHLEtBQUt5RyxzQkFBd0IsNkJBRTdCekcsS0FBSzBHLDJCQUE2QixrQ0FDbEMxRyxLQUFLMkcsMEJBQTRCLGlDQUNqQzNHLEtBQUs0Ryx5QkFBMkIsZ0NBRWhDNUcsS0FBSzZHLFlBQWMsQ0FDakJDLFVBQVcsaUJBQ1hDLE1BQU8sYUFDUEMsU0FBVSxnQkFDVkMsV0FBWSxtQkN6T0MsTUFBTUMseUJBQXlCQyxhQUM1QyxLQUFBQyxDQUFPMUIsTUFBTzJCLFFBQ08sK0JBQWZBLE9BQU9DLElBRUpDLE1BQU1GLE9BQU8xRixRQUFXNEYsTUFBTTdCLE1BQU04QixPQUFPQyxRQUFRQyxNQUFNL0YsU0FDNUQrRCxNQUFNOEIsT0FBT0MsUUFBUUMsTUFBTS9GLE1BQVFnRyxPQUFPakMsTUFBTThCLE9BQU9DLFFBQVFDLE1BQU0vRixRQUUvQyw0QkFBZjBGLE9BQU9DLEtBRVpDLE1BQU1GLE9BQU8xRixTQUFXNEYsTUFBTTdCLE1BQU04QixPQUFPQyxRQUFRRyxHQUFHakcsU0FDeEQrRCxNQUFNOEIsT0FBT0MsUUFBUUcsR0FBR2pHLE1BQVFrRyxPQUFPbkMsTUFBTThCLE9BQU9DLFFBQVFHLEdBQUdqRyxRQUluRSxPQURnQm1HLE1BQU1WLE1BQU0xQixNQUFPMkIsT0FFckMsQ0FRQSwyQkFBT1UsQ0FBc0JDLE1BQU9DLE9BQ2xDRCxNQUFNRSxpQkFDTixNQUFNQyxFQUFJSCxNQUFNSSxjQUNWQyxHQUFLRixFQUFFRyxRQUFRLE1BQ2ZDLE9BQVNGLEdBQUdHLFFBQVFDLFNBQ3RCUixNQUFNUyxRQUFRQyxJQUFJTixHQUFHRyxRQUFRQyxVQUM3QixLQUNKLE9BQVFOLEVBQUVLLFFBQVFJLFFBQ2hCLElBQUssU0FDSCxPQUFPWCxNQUFNWSx3QkFBd0IsZUFBZ0IsQ0FDbkQsQ0FDRUMsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxrQkFDMUJDLEtBQU0scUJBQ05DLE9BQVFsQixNQUFNbUIsS0FDZCxrQkFDNEIsY0FBMUJmLEdBQUdHLFFBQVFhLFdBQTZCLE9BQUlDLEVBQzlDQyxTQUFvQyxhQUExQmxCLEdBQUdHLFFBQVFhLGNBRzNCLElBQUssT0FDSCxPQUFPZCxPQUFPaUIsTUFBTUMsUUFBTyxHQUM3QixJQUFLLFNBQ0gsT0FBT2xCLE9BQU9tQixTQUNoQixJQUFLLFNBQ0gsT0FBT25CLE9BQU9vQixPQUFPLENBQUVKLFVBQVdoQixPQUFPZ0IsV0FFL0MsQ0FFQSxnQkFBQUssR0FDRSxNQUFNQyxTQUFXL0IsTUFBTThCLG1CQVF2QixNQVBzQixZQUFsQkMsU0FBU0MsT0FDUEQsU0FBU0UsUUFBVSxLQUNyQkYsU0FBU2YsTUFBUSxJQUFJa0IsS0FBd0IsSUFBbkJILFNBQVNFLFNBQWdCRSxjQUFjQyxNQUFNLEdBQUksSUFDbEVMLFNBQVNFLFFBQVUsTUFDNUJGLFNBQVNmLE1BQVEsSUFBSWtCLEtBQXdCLElBQW5CSCxTQUFTRSxTQUFnQkUsY0FBY0MsTUFBTSxHQUFJLE1BR3hFTCxRQUNULENBRUEsMEJBQU9NLENBQXFCNUIsT0FBUTZCLGVBQ2xDLE9BQUtDLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxNQUl6Q2pDLE9BQU9rQyxTQUFTQyxJQUFJTixlQUZsQjdCLE9BQU9vQyxNQUFNQyxNQUFNQyxXQUFhVCxhQUczQyxDQUVBLG1CQUFPVSxDQUFjdkMsUUFDbkIsSUFBSXdDLFFBQVUsR0FPZCxPQU5LVixRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFHckNqQyxPQUFPa0MsU0FBU08sS0FBTyxJQUNoQ0QsUUFBVSxJQUFJeEMsT0FBT2tDLFNBQVNRLFdBRjlCRixRQUFVLENBQUN4QyxPQUFPMkMsUUFBUSxPQUFRLGFBSTdCSCxRQUFRSSxNQUFLQyxHQUFLQyxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS3RFLEtBQUs0RixPQUFRd0YsSUFDN0UsQ0FFQSxZQUFJSSxHQUNGLE1BQXNELGlCQUF4Q3RFLGlCQUFpQjRELGFBQWFXLEtBQzlDLENBRUEsb0NBQU9DLENBQStCaEQsU0FBUyxRQUFXLEdBQVMsQ0FBQyxHQUVsRSxNQUFNaUQsV0FBYSxDQUNqQkMsVUFBVyxDQUNUOUIsS0FBTSxZQUNOaEIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxrQkFDMUJQLFFBQVMsSUFFWG1ELFFBQVMsQ0FDUC9CLEtBQU0sVUFDTmhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsZ0JBQzFCUCxRQUFTLElBRVhvRCxTQUFVLENBQ1JoQyxLQUFNLFdBQ05oQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUMxQlAsUUFBUyxJQUVYcUQsV0FBWSxDQUNWakMsS0FBTSxhQUNOaEIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxtQkFDMUJQLFFBQVMsR0FDVHNELEtBQU0sQ0FBQ2pELEtBQUtDLEtBQUtDLFNBQVMsdUJBSTFCckQsU0FDRitGLFdBQVcvRixPQUFTLENBQ2xCa0UsS0FBTSxTQUNOaEIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxVQUMxQlAsUUFBUyxLQUliLElBQUssTUFBTXVELEtBQUt2RCxRQUNWdUQsRUFBRUMsYUFBY1AsV0FBV0ksV0FBV3JELFFBQVEvRixLQUFLc0osR0FDOUNBLEVBQUVULFNBQVVHLFdBQVcvRixPQUFPOEMsUUFBUS9GLEtBQUtzSixHQUMzQ0EsRUFBRTFDLFNBQVVvQyxXQUFXRyxTQUFTcEQsUUFBUS9GLEtBQUtzSixHQUM3Q0EsRUFBRUUsWUFBYVIsV0FBV0MsVUFBVWxELFFBQVEvRixLQUFLc0osR0FDckROLFdBQVdFLFFBQVFuRCxRQUFRL0YsS0FBS3NKLEdBSXZDLE9BREFOLFdBQVdJLFdBQVdLLFFBQVVULFdBQVdJLFdBQVdyRCxRQUFRMkQsT0FDdkRWLFVBQ1QsQ0FFQSx1Q0FBT1csQ0FBa0M1RCxTQUN2QyxJQUFJNkQsTUFBUSxFQUVaLE1BQU1aLFdBQWEsQ0FDakJhLE9BQVEsQ0FDTjFDLEtBQU0sU0FDTmhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsVUFDMUJQLFFBQVMsSUFFWG9ELFNBQVUsQ0FDUmhDLEtBQU0sV0FDTmhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsWUFDMUJQLFFBQVMsS0FJYixJQUFLLE1BQU11RCxLQUFLdkQsUUFDZDZELE9BQVMsRUFDVE4sRUFBRVEsaUJBQ0VSLEVBQUVDLGNBQWdCRCxFQUFFMUMsU0FBVW9DLFdBQVdHLFNBQVNwRCxRQUFRL0YsS0FBS3NKLEdBQzlETixXQUFXYSxPQUFPOUQsUUFBUS9GLEtBQUtzSixHQUl0QyxPQURJTSxNQUFRLElBQUdaLFdBQVdlLFVBQVcsR0FDOUJmLFVBQ1QsRUM5SkssTUFBTWdCLFNBQ1gsaUJBQWFDLENBQU1DLE1BQVEsRUFBR0MsU0FBVyxLQUFNQyxVQUFXLEdBQ3hELElBYUlILEtBYkFJLGdCQUFrQixHQUNsQmpFLEtBQUtrRSxRQUFRdEUsSUFBSSxpQkFBaUI2RCxTQUNoQ0ssTUFBUSxFQUNWRyxnQkFBa0JqRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDbkNrRSxNQUFRLElBQ2pCRyxnQkFBa0JqRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxlQUdwQixXQUFwQnFFLGlCQUFnQzNDLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLa0UsUUFBUXRFLElBQUksZ0JBQWdCNkIsUUFBUyxXQUFhSCxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS2tFLFFBQVF0RSxJQUFJLGdCQUFnQjZCLFFBQVMsV0FDN0x3QyxnQkFBa0IsY0FTdEJKLEtBSEE3RCxLQUFLb0UsS0FBS0MsSUFBSUMsS0FBS0MsWUFDbkJ2RSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFFbkI0RSxLQUFLQyxTQUFTYixTQUFTYyxRQUU5QjFFLEtBQUtvRSxLQUFLQyxJQUFJQyxLQUFLSyxjQUNuQjNFLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUVuQjRFLEtBQUtDLFNBQVNiLFNBQVNnQixnQkFFakIsSUFBSUosS0FDZixPQUN1QixLQUFwQlAsZ0JBQ0csUUFBVUEsZ0JBQWtCLElBQzVCLFFBQ0ZZLE9BQU9DLEtBQUtDLElBQUlqQixRQUNsQixTQUNGRCxLQUFLLENBQUVtQixPQUFPLElBR2xCLE1BQU1DLE9BQVMsQ0FDYkMsS0FBTSxDQUNKQyxNQUFPLEVBQ1BDLFFBQVMsSUFFWEMsS0FBTSxDQUNKRixNQUFPLEVBQ1BDLFFBQVMsSUFFWEQsTUFBTyxFQUNQdEIsTUFHRUUsV0FBVWtCLE9BQU9sQixTQUFXQSxVQUM1QkMsV0FBVWlCLE9BQU9qQixTQUFXQSxVQUNoQyxJQUFLLE1BQU10TCxLQUFLbUwsS0FBS1MsS0FDZjVMLGFBQWE0TSxPQUFPQyxLQUFLQyxNQUFNQyxFQUNqQ1IsT0FBT0ksS0FBS0QsUUFBUXhMLEtBQUtsQixFQUFFeU0sUUFFM0JGLE9BQU9DLEtBQUtDLE1BQW9CLEtBQVp6TSxFQUFFeU0sTUFBZSxFQUFJek0sRUFBRXlNLE1BQzNDRixPQUFPQyxLQUFLRSxRQUFReEwsS0FBS3FMLE9BQU9DLEtBQUtDLFFBR3pDLEdBQUlyQixNQUFRLEVBQ1ZtQixPQUFPSSxLQUFLRixNQUNZLElBQXRCRixPQUFPQyxLQUFLQyxPQUFlRixPQUFPSSxLQUFLRCxRQUFRTSxTQUFTLEdBQ3BELElBQ0FaLEtBQUthLE9BQU9WLE9BQU9JLEtBQUtELGNBQ3pCLEdBQTBCLElBQXRCSCxPQUFPQyxLQUFLQyxNQUFhLENBQ2xDLE1BQU1iLEtBQU9XLE9BQU9JLEtBQUtELFFBQVFyTSxRQUFPME0sR0FBS0EsRUFBSSxJQUNqRFIsT0FBT0ksS0FBS0YsTUFBd0IsSUFBaEJiLEtBQUtoQixPQUFlLElBQU13QixLQUFLYyxPQUFPdEIsS0FDNUQsTUFDRVcsT0FBT0ksS0FBS0YsTUFBUUwsS0FBS2MsT0FBT1gsT0FBT0ksS0FBS0QsU0FHOUMsT0FEQUgsT0FBT0UsTUFBUUYsT0FBT0MsS0FBS0MsTUFBUUYsT0FBT0ksS0FBS0YsTUFDeENGLE1BQ1QsQ0FFQSwyQkFBYVksQ0FBZ0JoQyxNQUMzQixHQUFJN0QsS0FBS2tFLFFBQVF0RSxJQUFJLGlCQUFpQjZELE9BQVEsQ0FDNUMsTUFBTXFDLFNBQVc5RixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxjQUVyQ21HLFNBQVcsQ0FDZkMsUUFBUyxLQUNUQyxPQUFPLEdBRVRDLFlBQVlDLGNBQWNKLFNBQVUvRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFFeERJLEtBQUtvRyxPQUFPQyxZQUNoQnhDLEtBQ0E3RCxLQUFLc0csS0FDTFIsU0FDNkIsSUFBNUJDLFNBQVNDLFFBQVExQyxPQUFlLEtBQU95QyxTQUFTQyxRQUNqREQsU0FBU0UsTUFFYixDQUNGLENBRUEseUJBQWFNLENBQWN2RSxTQUN6QkEsUUFBUXdFLEtBQU94RSxRQUFRd0UsTUFBUSxDQUFDLEVBQ2hDeEUsUUFBUXdFLEtBQUssSUFBTyxFQUNwQixNQUFNQyxLQUFPbkUsT0FBT21FLEtBQUt6RSxRQUFRd0UsTUFBTUUsS0FBSXJFLEdBQUtzRSxTQUFTdEUsRUFBRyxNQUM1RCxJQUFJdUUsWUFBYzlCLEtBQUtDLElBQUlELEtBQUtjLElBQUksRUFBR2QsS0FBS2MsT0FBT2EsUUFDL0NJLFVBQVkvQixLQUFLYSxJQUFJLEVBQUdiLEtBQUthLE9BQU9jLE9BQ3hDLE1BQU1LLE9BQVM5RyxLQUFLa0UsUUFBUXRFLElBQUksaUJBQWlCNkQsT0FFM0MrQyxLQUFPLEdBQ2JBLEtBQUs1TSxLQUFLLFlBRU5nTixZQUFjLEdBQ2hCSixLQUFLNU0sTUFDRmtOLE9BQ0csUUFBVTlHLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUFtQixJQUN2RCxRQUNGaUYsT0FBT0MsS0FBS0MsSUFBSTZCLGVBR2xCQyxVQUFZLEdBQ2RMLEtBQUs1TSxNQUdGa04sT0FDRyxTQUF3RCxXQUE3QzlHLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGdCQUErQjBCLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLa0UsUUFBUXRFLElBQUksZ0JBQWdCNkIsUUFBUyxXQUFhSCxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS2tFLFFBQVF0RSxJQUFJLGdCQUFnQjZCLFFBQVMsU0FBVyxXQUFhekIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsZ0JBQWtCLElBQ25TLFFBQ0ZpRixPQUFPQyxLQUFLQyxJQUFJOEIsYUFHdEIsTUFBTWhELFdBQWEsSUFBSVcsS0FBS2dDLEtBQUtPLEtBQUssS0FBS2xELEtBQUssQ0FBRW1CLE9BQU8sSUFDbkRDLE9BQVMsQ0FDYitCLE9BQVEsQ0FDTkMsUUFBUyxFQUNUTCxZQUFhLEdBQ2JDLFVBQVcsSUFFYjNCLEtBQU0sRUFDTnJCLE1BRUYsSUFBSXFELFNBQVUsRUFDZCxJQUFLLE1BQU14TyxLQUFLbUwsS0FBS1MsS0FDZjVMLGFBQWE0TSxPQUFPQyxLQUFLQyxNQUFNQyxFQUM1QnlCLFFBR01OLFlBQWMsR0FDdkIzQixPQUFPK0IsT0FBT0osWUFBWWhOLEtBQUtsQixFQUFFeU0sT0FDakN5QixnQkFFQTNCLE9BQU8rQixPQUFPSCxVQUFVak4sS0FBS2xCLEVBQUV5TSxPQUMvQjBCLGNBUEE1QixPQUFPK0IsT0FBT0MsUUFBVXZPLEVBQUV5TSxNQUMxQitCLFNBQVUsR0FTWmpDLE9BQU9DLEtBQW1CLEtBQVp4TSxFQUFFeU0sTUFBZSxFQUFJek0sRUFBRXlNLE1BSXpDLE1BQU1nQyxPQUFTLENBQUMsRUFFaEIsSUFBSyxNQUFNNUksT0FBT3lELFFBQVF3RSxLQUFNLENBQzlCVyxPQUFPNUksS0FBTyxDQUNaMkcsS0FBTSxDQUNKQyxNQUFPRixPQUFPQyxLQUNkRSxRQUFTLENBQUNILE9BQU9DLE9BRW5CRyxLQUFNLENBQ0pGLE1BQU8sRUFDUEMsUUFBUyxJQUVYRCxNQUFPLEVBQ1B0QixNQUVGLE1BQU1DLE1BQVE2QyxTQUFTcEksSUFBSyxJQUM1QixJQUFJNkksU0FBV3RELE1BQ2ZxRCxPQUFPNUksS0FBSzhHLEtBQUtELFFBQVF4TCxLQUFLcUwsT0FBTytCLE9BQU9DLFNBQzVDLElBQUssTUFBTUksT0FBU3ZDLEtBQUtDLElBQUlxQyxVQUFXQSxTQUFXLEVBQUdBLFdBQ3BERCxPQUFPNUksS0FBSzhHLEtBQUtELFFBQVF4TCxLQUN2QnFMLE9BQU8rQixPQUFPSixZQUFZUSxTQUFXQyxTQUd6QyxJQUFLLE1BQU1BLE9BQVNELFNBQVVBLFNBQVcsRUFBR0EsV0FDMUNELE9BQU81SSxLQUFLOEcsS0FBS0QsUUFBUXhMLEtBQ3ZCcUwsT0FBTytCLE9BQU9ILFVBQVUvQixLQUFLQyxJQUFJcUMsU0FBV0MsVUFHaEQsR0FBSXZELE1BQVEsRUFDVnFELE9BQU81SSxLQUFLOEcsS0FBS0YsTUFDWSxJQUEzQmdDLE9BQU81SSxLQUFLMkcsS0FBS0MsT0FBZWdDLE9BQU81SSxLQUFLOEcsS0FBS0QsUUFBUU0sU0FBUyxHQUM5RCxJQUNBWixLQUFLYSxPQUFPd0IsT0FBTzVJLEtBQUs4RyxLQUFLRCxjQUM5QixHQUErQixJQUEzQitCLE9BQU81SSxLQUFLMkcsS0FBS0MsTUFBYSxDQUN2QyxNQUFNYixLQUFPNkMsT0FBTzVJLEtBQUs4RyxLQUFLRCxRQUFRck0sUUFBTzBNLEdBQUtBLEVBQUksSUFDdEQwQixPQUFPNUksS0FBSzhHLEtBQUtGLE1BQXdCLElBQWhCYixLQUFLaEIsT0FBZSxJQUFNd0IsS0FBS2MsT0FBT3RCLEtBQ2pFLE1BQ0U2QyxPQUFPNUksS0FBSzhHLEtBQUtGLE1BQVFMLEtBQUtjLE9BQU91QixPQUFPNUksS0FBSzhHLEtBQUtELFNBRXhEK0IsT0FBTzVJLEtBQUs0RyxNQUFRZ0MsT0FBTzVJLEtBQUsyRyxLQUFLQyxNQUFRZ0MsT0FBTzVJLEtBQUs4RyxLQUFLRixLQUNoRSxDQUNBLE9BQU9nQyxNQUNULENBR0FHLGdCQUFrQixDQUNoQkMsTUFBTyxPQUNQdkYsUUFBUyxDQUFDLEVBQ1ZzQyxLQUFNLEdBQ041SCxRQUFTLGFBQ1Q4SSxNQUFPLENBQ0wsQ0FDRStCLE1BQU8saUJBQ1B2RixRQUFTLENBQUMsRUFDVndGLFdBQVcsRUFDWEMsT0FBUSxFQUNSQyxNQUFPLEdBQ1BDLFVBQVcsR0FDWHZDLFFBQVMsQ0FDUCxDQUNFSCxPQUFRLEVBQ1J4QixRQUFRLEtBSWQsQ0FDRThELE1BQU8sZUFDUHZGLFFBQVMsQ0FBQyxFQUNWd0YsV0FBVyxFQUNYSSxTQUFVLEtBRVosQ0FDRUwsTUFBTyxNQUNQdkYsUUFBUyxDQUFDLEVBQ1Z3RixXQUFXLEVBQ1hDLE9BQVEsRUFDUkMsTUFBTyxHQUNQQyxVQUFXLEdBQ1h2QyxRQUFTLENBQ1AsQ0FDRUgsT0FBUSxFQUNSeEIsUUFBUSxNQUtoQjBCLE1BQU8sR0FDUHFDLFdBQVcsR0FHYkYsY0FBZ0IsQ0FDZEMsTUFBTyxPQUNQdkYsUUFBUyxDQUFDLEVBQ1ZzQyxLQUFNLEdBQ041SCxRQUFTLGFBQ1Q4SSxNQUFPLENBQ0wsQ0FDRStCLE1BQU8saUJBQ1B2RixRQUFTLENBQUMsRUFDVndGLFdBQVcsRUFDWEMsT0FBUSxFQUNSQyxNQUFPLEdBQ1BDLFVBQVcsR0FDWHZDLFFBQVMsQ0FDUCxDQUNFSCxPQUFRLEdBQ1J4QixRQUFRLEtBSWQsQ0FDRThELE1BQU8sZUFDUHZGLFFBQVMsQ0FBQyxFQUNWd0YsV0FBVyxFQUNYSSxTQUFVLEtBRVosQ0FDRUwsTUFBTyxNQUNQdkYsUUFBUyxDQUFDLEVBQ1Z3RixXQUFXLEVBQ1hDLE9BQVEsRUFDUkMsTUFBTyxHQUNQQyxVQUFXLEdBQ1h2QyxRQUFTLENBQ1AsQ0FDRUgsT0FBUSxFQUNSeEIsUUFBUSxNQUtoQjBCLE1BQU8sRUFDUHFDLFdBQVcsR0N0UlIsTUFBTUssaUJBQWlCQyxLQUU1QixXQUFBQyxDQUFhQyxLQUFNQyxTQUVqQixHQUFJRCxLQUFLakgsUUFBUXVFLE9BQU93QyxLQUFLSSxrQkFBb0JELFNBQVNFLFNBTXhELE9BQU8sSUFBSTdDLE9BQU93QyxLQUFLSSxnQkFBZ0JGLEtBQUtqSCxNQUFNaUgsS0FBTSxDQUNqREcsVUFBVSxLQUNaRixlQUdpQixJQUFiRCxLQUFLSSxNQUNJLFVBQWRKLEtBQUtqSCxLQUNQaUgsS0FBS0ksSUFBTSx1Q0FDWSxXQUFkSixLQUFLakgsS0FDZGlILEtBQUtJLElBQU0scUJBQ1ksV0FBZEosS0FBS2pILE9BQ2RpSCxLQUFLSSxJQUFNLHdCQUlmckosTUFBTWlKLEtBQU1DLFFBQ2QsQ0FFQSx5QkFBTUksQ0FBcUJDLFdBQVcsV0FBWSxPQUFZLENBQUMsR0FDN0QsR0FBOEIsaUJBQW5CQSxVQUFVdkgsTUFBK0MsaUJBQW5CdUgsVUFBVWpJLE1BQXdDLFNBQW5CaUksVUFBVXZILE1BQW1CdUgsVUFBVWpJLEtBQUtrSSxNQUFNLGFBQWVDLHNCQUFzQmxELE9BQU9tRCxpQkFBaUJDLGNBQWUsQ0FFNU0sTUFBTUMsV0FBYUMsU0FBU04sVUFBVWpJLE1BQ3RDLEdBQUksQ0FBQyxRQUFTLFVBQVVxRixTQUFTaUQsS0FBSzVILE1BQ3BDLE1BQU8sb0JBQXNCNEgsS0FBSzVILEtBQU8sU0FBVzRILEtBQUs3UCxLQUFPLEdBRXBFLENBQ0EsT0FBT2lHLE1BQU1zSixvQkFBb0JDLFVBQVcsQ0FBRUUsV0FBWXpJLE9BQzVELENBRUEsdUJBQVc4SSxHQUNULE1BQU8sK0NBQ1QsQ0FFQSxnQkFBV2pILEdBQ1QsTUFBTyxDQUNMa0gsWUFBYSxRQUVqQixDQU1BLG9CQUFNQyxDQUFnQkMsV0FBWUMsVUFBVyxHQUMzQyxJQUNJblAsU0FDQW9QLFNBQ0FsUCxPQUhBbVAsYUFBZSxDQUFDLEVBSXBCLFFBQXFDLElBQTFCbFMsS0FBS21TLEtBQUtKLFlBQ25CLE9BQU9LLFlBQVlDLFVBQVU1RyxLQUFNc0csWUFDOUIsR0FBa0IsV0FBZHRHLEtBQUszQixNQUFzQmtJLFVBMkUvQixHQUFrQixVQUFkdkcsS0FBSzNCLE9BQXFCa0ksU0FBVSxDQUM3QyxJQUFJbkYsT0FBUSxFQUNaLE9BQVFrRixZQUNOLElBQUssU0FDRXRHLEtBQUtqRSxPQUFPOEssV0FBVzFQLE9BSTFCc1AsYUFBZSxDQUNiLDRCQUE0QixFQUM1Qiw2QkFBNkIsRUFDN0IsOEJBQThCLEVBQzlCLDZCQUE2QixFQUM3Qiw0QkFBNEIsRUFDNUIsd0JBQXlCLEdBQ3pCclEsS0FBTTRKLEtBQUtqRSxPQUFPK0ssV0FUcEIxUCxVQUFXLEVBWWJnSyxPQUFRLEVBQ1IsTUFDRixJQUFLLFdBQ0VwQixLQUFLakUsT0FBTzhLLFdBQVd6UCxXQUMxQmdLLE9BQVEsRUFDUm9GLFVBQVcsRUFDWGxQLFFBQVMsRUFDVEYsVUFBVyxHQUViLE1BQ0YsSUFBSyxVQUNFNEksS0FBS2pFLE9BQU84SyxXQUFXeFAsVUFDMUIrSixPQUFRLEVBQ1JvRixVQUFXLEVBQ1hsUCxRQUFTLEVBQ1RGLFVBQVcsR0FFYmdLLE9BQVEsRUFDUixNQUNGLElBQUssU0FDRXBCLEtBQUtqRSxPQUFPOEssV0FBV3ZQLFNBQzFCOEosT0FBUSxFQUNSb0YsVUFBVyxFQUNYbFAsUUFBUyxFQUNURixVQUFXLEdBRWJnSyxPQUFRLEVBSVosR0FBSUEsTUFFRixHQUFJaEssU0FBVSxDQUNacVAsYUFBZSxDQUNiLDhCQUE4QixFQUM5Qiw2QkFBNkIsRUFDN0IsNEJBQTRCLEVBQzVCLDRCQUE0QixFQUM1Qiw2QkFBNkIsR0FFL0IsTUFBTU0sTUFBUTVCLFNBQVM2QixpQkFDckJoSCxLQUFLakUsT0FBTytLLFVBQ1p4SixLQUFLQyxLQUFLQyxTQUFTakosS0FBSzBHLDZCQUUxQndMLGFBQWFyUSxLQUFPMlEsTUFBTTNRLEtBQzFCcVEsYUFBYUssVUFBWUMsTUFBTUQsVUFDL0JMLGFBQWEseUJBQTJCTSxNQUFNRSxjQUNoRCxNQUFPLEdBQUlULFNBQVUsQ0FDbkJDLGFBQWUsQ0FDYiw4QkFBOEIsRUFDOUIsNkJBQTZCLEVBQzdCLDRCQUE0QixFQUM1Qiw0QkFBNEIsRUFDNUIsNkJBQTZCLEdBRS9CLE1BQU1NLE1BQVE1QixTQUFTNkIsaUJBQ3JCaEgsS0FBS2pFLE9BQU8rSyxVQUNaeEosS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUsyRyw0QkFFMUJ1TCxhQUFhclEsS0FBTzJRLE1BQU0zUSxLQUMxQnFRLGFBQWFLLFVBQVlDLE1BQU1ELFVBQy9CTCxhQUFhLHlCQUEyQk0sTUFBTUUsY0FDaEQsTUFBTyxHQUFJM1AsT0FBUSxDQUNqQm1QLGFBQWUsQ0FDYiw4QkFBOEIsRUFDOUIsNkJBQTZCLEVBQzdCLDRCQUE0QixFQUM1Qiw0QkFBNEIsRUFDNUIsNkJBQTZCLEdBRS9CLE1BQU1NLE1BQVE1QixTQUFTNkIsaUJBQ3JCaEgsS0FBS2pFLE9BQU8rSyxVQUNaeEosS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUs0RywyQkFFMUJzTCxhQUFhclEsS0FBTzJRLE1BQU0zUSxLQUMxQnFRLGFBQWFLLFVBQVlDLE1BQU1ELFVBQy9CTCxhQUFhLHlCQUEyQk0sTUFBTUUsY0FDaEQsQ0FFSixPQS9IRSxHQTVDbUIsU0FBZlgsYUFPQUcsYUFOR3pHLEtBQUtqRSxPQUFPOEssV0FBV3pPLEtBTVgsQ0FDYiwwQkFBMEIsR0FOYixDQUNiLDBCQUEwQixFQUMxQiwwQkFBMEIsSUFTYixTQUFma08sYUFPQUcsYUFOR3pHLEtBQUtqRSxPQUFPOEssV0FBV3hPLEtBTVgsQ0FDYiwwQkFBMEIsR0FOYixDQUNiLDBCQUEwQixFQUMxQiwwQkFBMEIsSUFTYixZQUFmaU8sYUFRQUcsYUFQR3pHLEtBQUtqRSxPQUFPOEssV0FBVzlPLFFBT1gsQ0FDYiw2QkFBNkIsRUFDN0IsNkJBQThCLEtBQzlCLDhCQUErQixLQUMvQiwwQkFBMkIsS0FDM0IsMkJBQTRCLE1BWGYsQ0FDYiwwQkFBMEIsRUFDMUIsMkJBQTJCLEVBQzNCLDZCQUE2QixJQWFoQixVQUFmdU8sWUFBeUMsU0FBZkEsV0FBdUIsQ0FDbkQsSUFBSVksWUFDZSxVQUFmWixZQUEyQnRHLEtBQUtqRSxPQUFPOEssV0FBV2xQLFFBQ3BEdVAsYUFBYyxHQUVHLFVBQWZaLFlBQTBCdEcsS0FBS2pFLE9BQU84SyxXQUFXbFAsUUFDbkR1UCxhQUFjLEdBRUcsU0FBZlosWUFBMEJ0RyxLQUFLakUsT0FBTzhLLFdBQVdqUCxPQUNuRHNQLGFBQWMsR0FFRyxTQUFmWixZQUF5QnRHLEtBQUtqRSxPQUFPOEssV0FBV2pQLE9BQ2xEc1AsYUFBYyxHQUdkVCxhQURFUyxZQUNhLENBQ2IsMkJBQTJCLEVBQzNCLDBCQUEwQixFQUMxQiw2QkFBNkIsRUFDN0IsMEJBQTBCLEVBQzFCLDBCQUEwQixFQUMxQiwwQkFBMEIsR0FHYixDQUNiLDJCQUEyQixFQUMzQiwwQkFBMEIsRUFHaEMsQ0F1SEYsR0FuQm1CLFlBQWZaLGFBRUFHLGFBREV6RyxLQUFLakUsT0FBTzhLLFdBQVdQLFlBQ1YsQ0FDYiw2QkFBNkIsRUFDN0IsOEJBQThCLEVBQzlCLDZCQUE2QixFQUM3Qiw0QkFBNEIsRUFDNUIsNEJBQTRCLEVBQzVCLHdCQUF5QixHQUN6QmxRLEtBQU00SixLQUFLakUsT0FBTytLLFdBR0wsQ0FDYiw2QkFBNkIsRUFDN0IxUSxLQUFNNEosS0FBS2pFLE9BQU9rTCxlQUFpQixLQUFPakgsS0FBS2pFLE9BQU8rSyxVQUFZLE1BS3BFbEgsT0FBT21FLEtBQUswQyxjQUFjN0YsT0FBUyxFQUFHLENBRXhDLGFBRG1CWixLQUFLOUIsT0FBT3VJLGFBRWpDLENBQU8sQ0FDTCxNQUFNVSxTQUFXLHFCQUFxQmIsYUFDaENjLFdBQWFwSCxLQUFLakUsT0FBTzhLLFdBQVdQLGtCQUNwQ3RHLEtBQUs5QixPQUFPLENBQUUsQ0FBQ2lKLFVBQVdDLFlBQWFDLE1BQUtwQixNQUN6Q0EsTUFFWCxDQUNGLENBRUEsV0FBQXFCLENBQWFoQixZQUNYLE9BQU90RyxLQUFLdUgsZ0JBQWdCLGFBQWNqQixXQUM1QyxDQUVBLGFBQUlrQixHQUNGLE9BQUl4SCxLQUFLakUsT0FBTzhLLFdBQVc3UCxRQUNsQmdKLEtBQUtqRSxPQUFPK0ssVUFFZDlHLEtBQUs1SixJQUNkLENBRUEsZ0JBQU1xUixDQUFZdEcsTUFDaEIsTUFBSSxlQUFnQm5CLEtBQUtqQyxZQUFvQmlDLEtBQUtqQyxNQUFNMEosV0FBV3RHLE1BQzFELGVBQWdCbkIsV0FBbUJBLEtBQUt5SCxXQUFXdEcsV0FBdkQsQ0FFUCxDQUVBLHVCQUFPNkYsQ0FBa0JGLFVBQVdHLGdCQUNsQyxJQUFLQSxlQUNILE1BQU8sQ0FDTDdRLEtBQU0wUSxVQUNORyxlQUFnQixHQUNoQkgsV0FHSixNQUFNWSxjQUFnQixJQUFJQyxPQUN4QixLQUFPQyxjQUFjQyxZQUFZWixnQkFBa0IsbUJBQ25ELEtBRUlwQixNQUFRaUIsVUFBVWpCLE1BQU02QixlQUs5QixPQUpJN0IsUUFDRm9CLGVBQWlCcEIsTUFBTSxHQUN2QmlCLFVBQVlqQixNQUFNLElBRWIsQ0FDTHpQLEtBQU02USxlQUFpQixLQUFPSCxVQUFZLElBQzFDRyxlQUNBSCxVQUVKLENBRUEseUJBQU9nQixDQUFvQjdCLE1BQ3pCLEdBQUlBLGdCQUFnQmQsVUFDbEIsR0FBSWMsS0FBS2xLLFFBQVE4SyxZQUFZN1AsY0FBNEMsSUFBMUJpUCxLQUFLbEssT0FBTytLLFVBQ3pELE9BQU9iLEtBQUtsSyxPQUFPK0ssZUFHckIsR0FBSWIsS0FBS1ksWUFBWTdQLGNBQXFDLElBQW5CaVAsS0FBS2EsVUFDMUMsT0FBT2IsS0FBS2EsVUFHaEIsT0FBT2IsS0FBSzdQLElBQ2QsQ0FFQSxnQkFBTzJSLENBQVc5QixNQUNoQixRQUFrQixVQUFkQSxLQUFLNUgsT0FBcUI0SCxLQUFLbEssT0FBTzhLLFlBQVk3UCxjQUdsRGlQLEtBQUtsSyxPQUFPOEssWUFBWXRQLGVBQWdCME8sS0FBS2xLLE9BQU84SyxZQUFZcFAsZUFHN0QsQ0FDTDZGLEtBQUtDLEtBQUtDLFNBQVMsb0JBQW9Cd0ssY0FDdkMsT0FDQWhGLFNBQVNKLE9BQU93QyxLQUFLSSxnQkFBZ0J5QyxNQUFNQyxlQUFlakMsS0FBSzdQLE1BQU0wUSxVQUFVa0IsZUFDbkYsQ0FFQSwwQkFBTUcsR0FDSixHQUFrQixVQUFkbkksS0FBSzNCLEtBQWtCLE9BQzNCLE1BQU1vSSxhQUFlLENBQUMsRUF5RHRCLE9BeERJekcsS0FBS2pFLE9BQU84SyxXQUFXMVAsUUFFcEI2SSxLQUFLakUsT0FBTzhLLFdBQVc3UCxVQUMxQmdKLEtBQUtqRSxPQUFPOEssV0FBVzdQLFNBQVUsRUFDakN5UCxhQUFhLDhCQUErQixHQUszQ3pHLEtBQUtqRSxPQUFPOEssV0FBV3pQLFVBQ3ZCNEksS0FBS2pFLE9BQU84SyxXQUFXeFAsVUFFeEIySSxLQUFLakUsT0FBTzhLLFdBQVd6UCxVQUFXLEVBQ2xDcVAsYUFBYSwrQkFBZ0MsSUFLN0N6RyxLQUFLakUsT0FBTzhLLFdBQVd6UCxVQUNyQjRJLEtBQUtqRSxPQUFPa0wsZ0JBQWlELEtBQS9CakgsS0FBS2pFLE9BQU9rTCxpQkFFNUNqSCxLQUFLakUsT0FBT2tMLGVBQWlCM0osS0FBS0MsS0FBS0MsU0FDckNqSixLQUFLMEcsNEJBRVB3TCxhQUFhLHlCQUEyQm5KLEtBQUtDLEtBQUtDLFNBQ2hEakosS0FBSzBHLDhCQU1QK0UsS0FBS2pFLE9BQU84SyxXQUFXeFAsU0FDckIySSxLQUFLakUsT0FBT2tMLGdCQUFpRCxLQUEvQmpILEtBQUtqRSxPQUFPa0wsaUJBRTVDakgsS0FBS2pFLE9BQU9rTCxlQUFpQjNKLEtBQUtDLEtBQUtDLFNBQ3JDakosS0FBSzJHLDJCQUVQdUwsYUFBYSx5QkFBMkJuSixLQUFLQyxLQUFLQyxTQUNoRGpKLEtBQUsyRyw4QkFJTDhFLEtBQUtqRSxPQUFPOEssV0FBV3pQLFdBQ3pCNEksS0FBS2pFLE9BQU84SyxXQUFXelAsVUFBVyxFQUNsQ3FQLGFBQWEsK0JBQWdDLEdBRTNDekcsS0FBS2pFLE9BQU84SyxXQUFXeFAsVUFDekIySSxLQUFLakUsT0FBTzhLLFdBQVd4UCxTQUFVLEVBQ2pDb1AsYUFBYSw4QkFBK0IsSUFJNUM3RyxPQUFPbUUsS0FBSzBDLGNBQWM3RixPQUFTLFNBQy9CWixLQUFLOUIsT0FBT3VJLGNBR2JBLFlBQ1QsQ0FFQSxlQUFBYyxDQUFpQmEsSUFBSzlCLFlBQ2Z0RyxLQUFLakUsT0FBT3FNLE9BQU1wSSxLQUFLakUsT0FBT3FNLEtBQU8sSUFFMUMsT0FEc0JwSSxLQUFLakUsT0FBT3FNLEtBQUtDLFFBQVEvQixhQUMxQixDQUV2QixDQUVBLHlCQUFNZ0MsSUFDQWhMLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQWdCSSxLQUFLc0csS0FBSzJFLFFBQ2pEdkksS0FBS2pFLE9BQU9tRCxhQUNUYyxLQUFLOUIsT0FBTyxDQUFFLGVBQWdCLENBQUMsVUFFakM4QixLQUFLOUIsT0FBTyxDQUFFLDZCQUE2QixJQUVyRCxDQUVBLDJCQUFNc0ssSUFDQWxMLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQWdCSSxLQUFLc0csS0FBSzJFLFFBQ2pEdkksS0FBS2pFLE9BQU9tRCxhQUNUYyxLQUFLOUIsT0FBTyxDQUFFLGVBQWdCLENBQUMsVUFFakM4QixLQUFLOUIsT0FBTyxDQUFFLDZCQUE2QixJQUVyRCxDQUVBLG9CQUFJdUssR0FDRixPQUFPekksS0FBSzBJLFlBQVksZUFDMUIsQ0FFQSxvQkFBTUMsQ0FBZ0JDLFNBQVVDLGlCQUFrQixHQUNoRCxNQUFNQyxXQUFhOUksS0FBSzBJLFlBQVlFLFVBQzlCeFMsS0FBTyxnQkFBZ0J3UyxXQUViLGVBQWJBLFVBQTBDLGNBQWJBLFVBQzdCRSxZQUNERCxnQkFNc0IsaUJBQWJELFNBQ0x0TCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxjQUFnQkksS0FBS3NHLEtBQUsyRSxXQUNoRHZJLEtBQUs5QixPQUFPLENBQUUsQ0FBQzlILE1BQU8wUyxZQUU1QkMsR0FBR0MsY0FBY3pJLEtBQUtqRCxLQUFLQyxLQUFLQyxTQUFTLG1DQUVoQ3dDLEtBQUs5QixPQUFPLENBQUUsQ0FBQzlILE1BQU8wUyxrQkFWM0I5SSxLQUFLOUIsT0FBTyxDQUNoQixDQUFDLHNCQUFzQjBLLFlBQWEsS0FDcEMsQ0FBQ3hTLE1BQU8wUyxXQVNkLENBRUEsaUJBQU1HLENBQWFMLGdCQUNYNUksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDLGdCQUFnQjBLLGFBQWEsR0FDcEQsQ0FFQSxtQkFBTU0sQ0FBZU4sU0FBVUMsaUJBQWtCLEdBQy9DLE1BQU16UyxLQUFPLGdCQUFnQndTLFdBRWIsZUFBYkEsVUFBMEMsY0FBYkEsV0FDOUJDLHNCQU1XN0ksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDOUgsT0FBTyxVQUozQjRKLEtBQUs5QixPQUFPLENBQ2hCLENBQUMsc0JBQXNCMEssWUFBYSxLQUNwQyxDQUFDeFMsT0FBTyxHQUdkLENBRUEsV0FBQXNTLENBQWFFLFVBQ1gsT0FBSzVJLEtBQUtqRSxPQUFPbUQsUUFPWmMsS0FBS2pFLE9BQU9tRCxNQUFNMEosV0FDaEI1SSxLQUFLakUsT0FBT21ELE1BQU0wSixXQVB2QjVJLEtBQUtqRSxPQUFPbUQsTUFBUSxDQUFDLEVBQ3JCYyxLQUFLakUsT0FBT21ELE1BQU1pSyxRQUFTLEVBQzNCbkosS0FBSzlCLE9BQU8sQ0FBRSxlQUFnQixDQUFDLEtBQ3hCLEVBS1gsQ0FFQSx3QkFBSWtMLEdBQ0YsTUFDZ0IsV0FBZHBKLEtBQUszQixRQUM2QixJQUFqQzJCLEtBQUtqRSxPQUFPOEssWUFBWTFPLE9BQ1UsSUFBakM2SCxLQUFLakUsT0FBTzhLLFlBQVkzTyxPQUNXLElBQW5DOEgsS0FBS2pFLE9BQU84SyxZQUFZL08sT0FFOUIsQ0FFQSxtQkFBSXVSLEdBQ0YsR0FBa0IsV0FBZHJKLEtBQUszQixLQUFtQixPQUFPLEtBQ25DLE1BQU1pTCxVQUFZckYsU0FBU2pFLEtBQUtqRSxPQUFPd04sYUFBYXRHLEtBQ3BELE9BQUluSCxNQUFNd04sV0FBbUIsRUFDdEJBLFNBQ1QsQ0FFQSxnQkFBSUMsR0FDRixHQUFrQixXQUFkdkosS0FBSzNCLEtBQW1CLE9BQU8sS0FDbkMsTUFBTW1MLFdBQWF2RixTQUFTakUsS0FBS2pFLE9BQU93TixhQUFhRSxRQUNyRCxPQUFJM04sTUFBTTBOLFlBQW9CLEVBQ3ZCQSxVQUNULENBRUEsc0JBQUlFLEdBQ0YsSUFBSUgsYUFtQkosT0FqQkVBLGFBREV2SixLQUFLakUsT0FBT3dOLGFBQWFFLE9BQ1p6SixLQUFLakUsT0FBT3dOLGFBQWFFLE9BRXpCLElBRWJ6SixLQUFLakUsT0FBT3dOLGFBQWF0RyxNQUMzQnNHLGNBQWdCLElBQUl2SixLQUFLakUsT0FBT3dOLGFBQWF0RyxRQUUzQ2pELEtBQUtqRSxPQUFPOEssV0FBVzFPLE9BQ3pCb1IsY0FBZ0IsSUFBSWpNLEtBQUtDLEtBQUtDLFNBQVMsc0JBRXJDd0MsS0FBS2pFLE9BQU84SyxXQUFXM08sT0FDekJxUixjQUFnQixJQUFJak0sS0FBS0MsS0FBS0MsU0FBUyxxQkFDbkN3QyxLQUFLakUsT0FBT3dOLGFBQWFJLFFBQzNCSixjQUFnQixJQUFJdkosS0FBS2pFLE9BQU93TixhQUFhSSxXQUkxQ0osWUFDVCxDQUVBLGlCQUFJSyxHQUNGLE1BQWtCLFdBQWQ1SixLQUFLM0IsS0FBMEIsT0FDL0IyQixLQUFLcUosaUJBQW1CLEVBSTlCLENBRUEsY0FBSUcsR0FDRixNQUFrQixXQUFkeEosS0FBSzNCLEtBQTBCLE9BQzlCMkIsS0FBS3VKLFlBSVosQ0FFQSxhQUFJTSxHQUNGLE1BQU10SCxPQUFTMEIsU0FBU2pFLEtBQUtqRSxPQUFPK04sTUFBTUwsT0FBT3ZULE9BQ2pELE9BQUs0RixNQUFNeUcsUUFHSixJQUFJVCxLQUNUOUIsS0FBS2pFLE9BQU8rTixNQUFNTCxPQUFPdlQsTUFDekI4SixLQUFLK0osUUFBUUMsd0JBQTBCLENBQUMsR0FDeENDLGVBQWV4SCxNQUxSRixNQU1YLENBRUEsYUFBSTJILEdBQ0YsTUFBTTNILE9BQVMwQixTQUFTakUsS0FBS2pFLE9BQU8rTixNQUFNSyxLQUFLalUsT0FDL0MsT0FBSzRGLE1BQU15RyxRQUdKLElBQUlULEtBQ1Q5QixLQUFLakUsT0FBTytOLE1BQU1LLEtBQUtqVSxNQUN2QjhKLEtBQUsrSixRQUFRQyx3QkFBMEIsQ0FBQyxHQUN4Q0MsZUFBZXhILE1BTFJGLE1BTVgsQ0FFQSxnQkFBSTZILEdBQ0YsTUFBTTdILE9BQVMwQixTQUFTakUsS0FBS2pFLE9BQU8rTixNQUFNTyxRQUFRblUsT0FDbEQsT0FBSzRGLE1BQU15RyxRQUdKLElBQUlULEtBQ1Q5QixLQUFLakUsT0FBTytOLE1BQU1PLFFBQVFuVSxNQUMxQjhKLEtBQUsrSixRQUFRQyx3QkFBMEIsQ0FBQyxHQUN4Q0MsZUFBZXhILE1BTFJGLE1BTVgsQ0FFQSxtQkFBSStILEdBQ0YsR0FBa0IsVUFBZHRLLEtBQUszQixLQUFrQixNQUFPLEdBRWxDLE1BQU1pTSxnQkFBa0IsR0FDeEIsSUFBSyxNQUFPek8sSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUsrVixrQkFDVCxJQUFoQ3RLLEtBQUtqRSxPQUFPOEssV0FBV2hMLE1BQ3pCeU8sZ0JBQWdCcFQsS0FBS29HLEtBQUtDLEtBQUtDLFNBQVN0SCxRQUc1QyxPQUFPb1UsZUFDVCxDQUVBLDBCQUFhRSxDQUFldlEsTUFBT3FMLE1BQ2pDLEdBQWtCLFVBQWRBLEtBQUtqSCxLQUFrQixPQUFPLEtBQ2xDLEdBQUlqQyxPQUFPa0osS0FBS3ZKLE9BQU8wTyxNQUFNekgsU0FBUyxLQUFNLENBQzFDLE1BQU0wSCxPQUFTLENBQUMsRUFDaEIsSUFBSyxNQUFPN08sSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUt5RixRQUFRRSxZQUNqRDJCLElBQUk4TyxXQUFXLE1BQVF6VSxNQUFNeVUsV0FBVyxpQkFDMUNELE9BQU83TyxJQUFJK08sVUFBVSxJQUFNaE0sUUFBUUMsTUFBTWdNLFlBQVk1USxNQUFPL0QsTUFBTTBVLFVBQVUsTUFHaEYsSUFBSTFVLE1BQ0osSUFDRUEsTUFBUWtNLEtBQUswSSxNQUNYLElBQUloSixLQUFLd0QsS0FBS3ZKLE9BQU8wTyxLQUFNQyxRQUFVOUwsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQXFCLGVBQWIsWUFBcUQsQ0FBRWdNLFVBQVUsSUFBUXRJLE1BRXJLLENBQUUsTUFBT3VJLEtBQ1A5VSxNQUFRLENBQ1YsQ0FDQSxPQUFPQSxLQUNULENBQ0EsT0FBUTRGLE1BQU1tSSxTQUFTcUIsS0FBS3ZKLE9BQU8wTyxPQUFzQyxLQUE3QnhHLFNBQVNxQixLQUFLdkosT0FBTzBPLEtBQ25FLENBRUEsU0FBSVEsR0FDRixHQUFrQixVQUFkakwsS0FBSzNCLEtBQWtCLE1BQU8sQ0FBQyxNQUFNLEdBQ3pDLEdBQWdDLGlCQUFyQjJCLEtBQUtqRSxPQUFPME8sS0FDckIsTUFBTyxDQUFDekssS0FBS2pFLE9BQU8wTyxNQUFNLEdBRzVCLEdBQUl6SyxLQUFLakUsT0FBTzBPLEtBQUt6SCxTQUFTLEtBQU0sQ0FDbEMsTUFBTTBILE9BQVMsQ0FBQyxFQUNoQixJQUFLLE1BQU83TyxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFRaFcsS0FBS3lGLFFBQVFFLFlBQ2pEMkIsSUFBSThPLFdBQVcsTUFBUXpVLE1BQU15VSxXQUFXLFdBQzFDRCxPQUFPN08sSUFBSStPLFVBQVUsSUFBTWhNLFFBQVFDLE1BQU1nTSxZQUFZN0ssS0FBTTlKLE1BQU0wVSxVQUFVLEtBRy9FLElBQUkxVSxNQUNKLElBQ0VBLE1BQVFrTSxLQUFLMEksTUFDWCxJQUFJaEosS0FBSzlCLEtBQUtqRSxPQUFPME8sS0FBTUMsUUFBVTlMLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxNQUFxQixlQUFiLFlBQXFELENBQUVnTSxVQUFVLElBQVF0SSxNQUVySyxDQUFFLE1BQU91SSxLQUNQOVUsTUFBUSxDQUNWLENBRUEsTUFBTyxDQUFDQSxPQUFPLEVBQ2pCLENBQ0EsTUFBTyxDQUNKNEYsTUFBTW1JLFNBQVNqRSxLQUFLakUsT0FBTzBPLE9BRXhCLEtBREF4RyxTQUFTakUsS0FBS2pFLE9BQU8wTyxPQUV6QixFQUVKLENBRUEsZUFBTVMsR0FDSixNQUFNMUssRUFBSVIsS0FBS2lMLE1BT2YsT0FOSXpLLEVBQUUsS0FDSjJLLFFBQVE1SyxLQUNOLFdBQVdQLEtBQUsrSixRQUFRM1QsMEJBQTBCNEosS0FBSzVKLFFBQVE0SixLQUFLakUsT0FBTzBPLFdBQVdqSyxFQUFFLFlBRXBGUixLQUFLOUIsT0FBTyxDQUFFLGNBQWVzQyxFQUFFLE1BRWhDQSxFQUFFLEVBQ1gsQ0FFQSxRQUFJaUssR0FDRixNQUFNakssRUFBSVIsS0FBS2lMLE1BSWYsT0FISXpLLEVBQUUsSUFDSlIsS0FBSzlCLE9BQU8sQ0FBRSxjQUFlc0MsRUFBRSxLQUUxQkEsRUFBRSxFQUNYLENBRUEsYUFBQTRLLEdBQ0UsTUFBa0IsV0FBZHBMLEtBQUszQixLQUEwQixLQUM5QjJCLEtBQUtqRSxPQUFPc1AsS0FJVnJMLEtBQUtqRSxPQUFPc1AsTUFIakJyTCxLQUFLc0wsV0FBVyxHQUNULEVBR1gsQ0FFQSxZQUFNQyxHQUNKLEdBQWtCLFdBQWR2TCxLQUFLM0IsS0FBbUIsT0FBTyxLQUNuQyxNQUFNbU4sVUFBWXhMLEtBQUtqRSxPQUFPMFAsUUFDMUJ4SCxTQUFTakUsS0FBS2pFLE9BQU8wUCxTQUNyQixRQUNFekwsS0FBS3NMLFdBQVdFLFVBQ3hCLENBRUEsZ0JBQU1GLENBQVlHLFNBQ2hCLEdBQWtCLFdBQWR6TCxLQUFLM0IsS0FBbUIsT0FBTyxXQUM3QjJCLEtBQUs5QixPQUFPLENBQUUsY0FBZXVOLFNBQVcsR0FDaEQsQ0FFQSxlQUFNQyxHQUNKLEdBQWtCLFdBQWQxTCxLQUFLM0IsS0FBbUIsT0FBTyxLQUNuQyxNQUFNb04sY0FBZ0J6TCxLQUFLb0wsZ0JBQ3JCTyxXQUFhM0wsS0FBS2pFLE9BQU8wUCxRQUMzQnhILFNBQVNqRSxLQUFLakUsT0FBTzBQLFNBQ3JCLEVBQ0FBLFFBQVUsR0FBS0UsaUJBQWtCM0wsS0FBS3NMLFdBQVdLLGtCQUMxQzNMLEtBQUtzTCxXQUFXRyxRQUFVLEVBQ3ZDLENBRUEsa0JBQU1HLENBQWNDLEdBQ2xCLEdBQWtCLFdBQWQ3TCxLQUFLM0IsS0FBbUIsT0FBTyxLQUNuQyxNQUFNb04sY0FBZ0J6TCxLQUFLb0wsZ0JBQ3ZCUyxFQUFJSixjQUFlekwsS0FBS3NMLFdBQVcsU0FDNUJ0TCxLQUFLc0wsV0FBV0csUUFBVUksRUFDdkMsQ0FFQSwwQkFBT0MsQ0FBcUJDLFVBQVd6TSxTQUVyQyxPQURtQnlNLFVBQVVDLE9BQU8xTSxTQUVqQzJNLFFBQU8sQ0FBQ0MsU0FBVWpHLFFBR2RkLFNBQVM0QyxVQUFVOUIsT0FDcEJpRyxTQUFTeE0sTUFBS3VJLE9BQVNBLE1BQU03UixPQUFTNlAsS0FBSzdQLE9BRXBDOFYsU0FHRixJQUFJQSxTQUFVakcsT0FDcEIsSUFDRmtHLEtBQUt2RSxjQUFjd0UsY0FDeEIsQ0FRQSx3QkFBT0MsQ0FBbUJDLE1BRXhCLE1BQU1DLFNBQVdELEtBQUt2UCxRQUFReVAsUUFDOUIsR0FBSUQsU0FBVSxDQUNaLE1BQU9FLFFBQVNELFNBQVdELFNBQVNHLE1BQU0sS0FDMUMsR0FBZ0IsVUFBWkQsUUFDRixPQUFPblAsS0FBS3FQLE9BQU9DLE9BQU9KLFNBQ3JCLENBQ0wsTUFBTUssTUFBUXZQLEtBQUt3UCxPQUFPNVAsSUFBSXVQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUFPLEtBRXZCLE9BRGMsSUFBSUUsTUFBTUYsV0FDWDlTLEtBQ2YsQ0FDRixDQUdBLE1BQU1pVCxRQUFVWixLQUFLdlAsUUFBUW1RLFFBQzdCLE9BQU81UCxLQUFLcVAsT0FBT3pQLElBQUlnUSxVQUFZLElBQ3JDLENBV0EsaUJBQU1DLENBQWFDLFlBQWMsQ0FBQyxHQUVoQ0EsWUFBWTlLLE9BQVEsRUFDcEIsTUFBTWdELEtBQU8xRyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxRQUVWLGlCQUFyQnVKLEtBQUtnSSxjQUNkaEksS0FBS2dJLFlBQWMsQ0FDakJwWCxNQUFPb1AsS0FBS2dJLFlBQ1p0VyxRQUFTLFVBR3lCLElBQTNCc08sS0FBS2dJLFlBQVlwWCxRQUMxQm9QLEtBQUtnSSxZQUFZcFgsTUFBUSxTQUVhLElBQTdCb1AsS0FBS2dJLFlBQVl0VyxVQUMxQnNPLEtBQUtnSSxZQUFZdFcsUUFBVSxJQUU3QixNQUFNdVcsT0FBUyxHQUdmakksS0FBS2dJLFlBQVlwWCxZQUFjc1gsV0FBV0MsV0FDeENuSSxLQUFLZ0ksWUFBWXBYLE1BQ2pCa1gsYUFFRjlILEtBQUtnSSxZQUFZdFcsY0FBZ0J3VyxXQUFXQyxXQUMxQ25JLEtBQUtnSSxZQUFZdFcsUUFDakJvVyxhQUlGLE1BQU1NLE1BQVEsR0FDUkMsR0FBSzNOLEtBQUssSUFBSUEsS0FBSzNCLGdCQUd6QixHQUZJc1AsSUFBSUEsR0FBRzFVLEtBQUsrRyxLQUFSMk4sQ0FBY3JJLEtBQU1pSSxPQUFRRyxNQUFPTixhQUV6QixVQUFkcE4sS0FBSzNCLEtBQ1AsSUFBSyxNQUFPeEMsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUsrVixrQkFDVCxJQUFoQ3RLLEtBQUtqRSxPQUFPOEssV0FBV2hMLE1BQWU2UixNQUFNeFcsS0FBS2hCLE9BT3pELE9BRkFvUCxLQUFLdUIsV0FBYTZHLE1BQU1yWCxRQUFPdVgsS0FBT0EsSUFDdEN0SSxLQUFLaUksT0FBU0EsT0FDUGpJLElBQ1QsQ0FFQSxlQUFBdUksQ0FBaUJ2SSxLQUFNaUksT0FBUUcsT0FDN0IsSUFBSyxNQUFPN1IsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUt1WixtQkFDVCxJQUFoQzlOLEtBQUtqRSxPQUFPOEssV0FBV2hMLE1BQWU2UixNQUFNeFcsS0FBS2hCLE9BR3ZELElBQUk2WCxXQUFhelEsS0FBS0MsS0FBS0MsU0FBUyxjQUNoQ3NKLFVBQVksR0FDWmtILE9BQVEsRUFDWixHQUFJaE8sS0FBS2pFLE9BQU9rTSxNQUFNZ0csS0FBS0MsR0FBSSxDQUM3QixNQUFNakcsTUFBUWpJLEtBQUsvRixPQUFPa1UsTUFBTWpSLElBQUk4QyxLQUFLakUsT0FBT2tNLE1BQU1nRyxLQUFLQyxJQUN2RGpHLFFBQ0ZuQixXQUFhM0IsU0FBUzJDLG1CQUFtQkcsT0FDekMrRixPQUFRLEVBRVosQ0FFQSxHQUFJaE8sS0FBS29KLHNCQUF3QnBKLEtBQUtqRSxPQUFPa00sTUFBTW1HLFdBQVdGLEdBQUksQ0FDaEVILFdBQWF6USxLQUFLQyxLQUFLQyxTQUFTLGVBQ2hDLE1BQU15SyxNQUFRakksS0FBSy9GLE9BQU9rVSxNQUFNalIsSUFBSThDLEtBQUtqRSxPQUFPa00sTUFBTW1HLFdBQVdGLElBQzdEakcsUUFDRm5CLFdBQWEsSUFBSTNCLFNBQVMyQyxtQkFBbUJHLFNBQzdDK0YsT0FBUSxFQUVaLENBRUtBLFFBQ0hsSCxVQUFZOUcsS0FBS2pFLE9BQU9rTSxNQUFNZ0csS0FBSzdYLEtBQy9CNEosS0FBS29KLHNCQUF3QnBKLEtBQUtqRSxPQUFPa00sTUFBTW1HLFdBQVdoWSxPQUM1RDBRLFdBQWEsSUFBSTlHLEtBQUtqRSxPQUFPa00sTUFBTW1HLFdBQVdoWSxTQUk5QzBRLFdBQ0Z5RyxPQUFPclcsS0FBSyxDQUNWZCxLQUFNMlgsV0FDTjdYLE1BQU80USxZQUlYeUcsT0FBT3JXLEtBQUssQ0FDVmQsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVMsMkJBQ3pCdEgsTUFBTzhKLEtBQUswSixxQkFHZDZELE9BQU9yVyxLQUFLLENBQ1ZkLEtBQU1rSCxLQUFLQyxLQUFLQyxTQUFTLDBCQUN6QnRILE1BQU84SixLQUFLakUsT0FBT3FLLFlBQWNwRyxLQUFLakUsT0FBT3FLLFlBQWMsTUFHekRwRyxLQUFLakUsT0FBTzBQLFNBQ2Q4QixPQUFPclcsS0FBSyxDQUNWZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUywyQkFDekJ0SCxNQUFPOEosS0FBS2pFLE9BQU8wUCxTQUd6QixDQUVBLFdBQUE0QyxHQUNFLFFBQWtCLFVBQWRyTyxLQUFLM0IsT0FBb0IyQixLQUFLakUsT0FBTzhLLFdBQVczUCxLQUV0RCxDQUVBLFVBQUlvWCxHQUNGLE9BQU90TyxLQUFLakUsT0FBTzhLLFdBQVc1TyxJQUNoQyxDQUVBLFdBQUlzVyxHQUNGLE1BQWtCLFVBQWR2TyxLQUFLM0IsTUFFUDJCLEtBQUs1SixLQUFLNFIsZ0JBQ1YxSyxLQUFLQyxLQUFLQyxTQUFTLHFDQUFxQ3dLLGFBRTVELEVDLzFCSyxTQUFTd0csaUJBQWtCck4sTUFDaEMsTUFBTW1FLEtBQU8sQ0FDWG1KLElBQUssQ0FBQyxlQUNOMVIsUUFBUyxDQUFDLEdBR1osSUFDRXVJLEtBQUttSixJQUFJdlgsS0FBSyxpQkFDZG9PLEtBQUsvQyxPQUFTcEIsS0FBS3NCLE1BQ25CNkMsS0FBS29KLE1BQVF2TixLQUFLbkgsUUFDbEJzTCxLQUFLdkksUUFBUW9FLEtBQU93TixPQUFPQyxLQUFLQyxVQUFVMU4sTUFDNUMsQ0FBRSxNQUFPNkosS0FDUCxPQUFPLElBQ1QsQ0FHQSxNQUFNdE8sRUFBSW9TLFNBQVNDLGNBQWMsS0FDakNyUyxFQUFFc1MsVUFBVUMsT0FBTzNKLEtBQUttSixLQUN4Qi9SLEVBQUVnUyxNQUFRcEosS0FBS29KLE1BQ2YsSUFBSyxNQUFPUSxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVFqRixLQUFLdkksU0FDdkNMLEVBQUVLLFFBQVFtUyxHQUFLdlAsRUFHakIsT0FEQWpELEVBQUV5UyxVQUFZLG1DQUFtQzdKLEtBQUsvQyxTQUMvQzdGLENBQ1QsQ0FvQ08sU0FBUzBTLFVBQVc3UyxPQUN6QixPQUFjLElBQVZBLFFBSUZBLE1BQU04UyxTQUNOOVMsTUFBTStTLFNBQ1ksS0FBbEIvUyxNQUFNZ1QsU0FDWSxNQUFsQmhULE1BQU1nVCxRQUVWLENBRU8sTUFBTUMsV0FDWCx3QkFBT0MsQ0FBbUJDLFFBQ3hCLE9BQU9BLE9BQU9DLFFBQVEsYUFBYSxTQUFVRCxRQUMzQyxPQUFPQSxPQUFPLEdBQUdFLGFBQ25CLEdBQ0YsQ0FFQSwwQkFBYUMsQ0FBZW5CLE1BQU9vQixRQUFTeFEsUUFBVSxDQUFDLEdBQ3JELE1BQU15USxZQUFjLENBQUMsRUFDckJBLFlBQVlDLE9BQVN0QixNQUNyQnFCLFlBQVlFLFFBQVUzUSxRQUFRMlEsU0FBV3pNLFlBQVkwTSxhQUNqRDVRLFFBQVFnRSxVQUNWeU0sWUFBWTFSLEtBQU84UixNQUFNQyxtQkFBbUJDLFFBQzVDTixZQUFZek0sUUFBVWhFLFFBQVFnRSxjQUVKLElBQWpCaEUsUUFBUTZCLE9BQ2pCNE8sWUFBWTVPLEtBQU83QixRQUFRNkIsS0FDM0I0TyxZQUFZMVIsS0FBTzhSLE1BQU1DLG1CQUFtQkUsS0FDNUNQLFlBQVkxTyxTQUFXOE8sTUFBTUksZ0JBQWdCQyxNQUUvQ1QsWUFBWW5NLEtBQU90RyxLQUFLc0csS0FBS3NLLEdBQzdCNkIsWUFBWVUsUUFBVVgsUUFFdEJ0TSxZQUFZa04sT0FBT1gsYUFBYTFJLE1BQUtzSixLQUM1QkEsS0FFWCxDQUVBLHdCQUFPQyxDQUFtQmxCLFFBQ3hCLE9BQU9BLE9BQU9DLFFBQVEsWUFBWSxTQUFVRCxRQUMxQyxNQUFPLElBQU1BLE9BQU8xSCxhQUN0QixHQUNGLENBRUEsc0JBQU82SSxDQUFpQmhWLEtBQ3RCLElBQUtBLElBQUssT0FBTyxLQUVqQixHQUFJK0wsY0FBY2tKLGVBQWVqVixLQUMvQixPQUFJK0wsY0FBY21KLG1CQUFtQmxWLEtBQWFxSyxTQUFTckssS0FDcEQrTCxjQUFjb0osVUFBVW5WLEtBSWpDLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FFckIsTUFBT3lKLFFBQVNELFNBQVczUSxJQUFJNlEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUNGLE9BQU9uUCxLQUFLcVAsT0FBT0MsT0FBT0osU0FFNUIsTUFBTXlFLE1BQVF6QixXQUFXMEIsZ0JBQWdCclYsS0FDekMsT0FBT29WLE9BQU9oWCxLQUNoQixDQUdBLE9BQU9xRCxLQUFLcVAsT0FBT3pQLElBQUlyQixNQUFRLElBQ2pDLENBRUEsd0JBQU9zVixDQUFtQkMsVUFDeEIsTUFBTW5CLFFBQVUsQ0FBQyxFQUNYaFcsTUFBUXVWLFdBQVdxQixnQkFBZ0JPLFVBQ3pDLEdBQUlBLFNBQVNwTyxTQUFTLEtBQU0sQ0FDMUIsTUFBT3lKLFFBQVNELFNBQVc0RSxTQUFTMUUsTUFBTSxLQUMxQ3VELFFBQVFnQixNQUFRekUsUUFDaEJ5RCxRQUFRcEQsTUFBUUosUUFDWnhTLE1BQU1nWCxPQUFPN2EsT0FBTTZaLFFBQVFvQixNQUFRcFgsTUFBTWdYLE1BQU03YSxNQUNuRDZaLFFBQVFoVyxNQUFRQSxNQUFNaVUsRUFDeEIsTUFDRStCLFFBQVFoVyxNQUFRbVgsU0FDaEJuQixRQUFRb0IsTUFBUXBYLE1BQU03RCxLQUV4QixPQUFPNlosT0FDVCxDQUVBLDRCQUFPcUIsQ0FBdUJDLE9BQVFDLFFBQVNDLFdBQWEsSUFDMUQsSUFBSyxNQUFNQyxRQUFROVIsT0FBT21FLEtBQUt3TixRQUN4QkcsS0FBSy9HLFdBQVcsT0FDUyxpQkFBakI0RyxPQUFPRyxNQUNoQmxDLFdBQVc4QixzQkFDVEMsT0FBT0csTUFDUEYsUUFDQSxHQUFHQyxjQUFjQyxTQUduQkYsUUFBUXpVLFFBQVEsR0FBRzBVLGFBQWFDLFFBQVVILE9BQU9HLE1BSXpELENBRUEsMkJBQU9DLENBQXNCSixPQUFRQyxTQUNuQyxTQUFTSSxZQUFhQyxJQUFLaFcsSUFBSzNGLE9BQzlCLEdBQUkyRixJQUFJOE8sV0FBVyxLQUFNLENBQ3ZCLE1BQU0xVSxFQUFJNEYsSUFBSTRDLE1BQU0sR0FDZHFULFFBQVU3YixFQUFFd0ksTUFBTXhJLEVBQUVvUyxRQUFRLEtBQU8sR0FDbkMwSixRQUFVOWIsRUFBRTJVLFVBQVUsRUFBRzNVLEVBQUVvUyxRQUFRLFdBQ2IsSUFBakJ3SixJQUFJRSxXQUEwQkYsSUFBSUUsU0FBVyxDQUFDLEdBQ3pESCxZQUFZQyxJQUFJRSxTQUFVRCxRQUFTNWIsTUFDckMsS0FDZ0IsU0FBVkEsTUFBa0IyYixJQUFJaFcsTUFBTyxFQUNkLFVBQVYzRixNQUFtQjJiLElBQUloVyxNQUFPLEVBQzlCSyxPQUFPaEcsT0FBTzhiLGFBQWU5YixNQUFPMmIsSUFBSWhXLEtBQU9LLE9BQU9oRyxPQUMxRDJiLElBQUloVyxLQUFPM0YsS0FFcEIsQ0FFQSxHQUFLc2IsU0FBWUQsT0FDakIsSUFBSyxNQUFNRyxRQUFROVIsT0FBT21FLEtBQUt5TixRQUFRelUsU0FBVSxDQUMvQyxHQUFhLGFBQVQyVSxLQUFxQixPQUN6QkUsWUFBWUwsT0FBUUcsS0FBTUYsUUFBUXpVLFFBQVEyVSxNQUM1QyxDQUNGLENBRUEsc0JBQU9SLENBQWlCclYsS0FDdEIsSUFBS0EsSUFBSyxPQUFPLEtBQ2pCLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FDckIsTUFBT3lKLFFBQVNELFNBQVczUSxJQUFJNlEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUFxQixDQUN2QixNQUFNd0YsU0FBVzNVLEtBQUtxUCxPQUFPQyxPQUFPSixVQUFVeUUsTUFDOUMsT0FBT2dCLFNBQVNWLE1BQ2xCLENBQU8sQ0FDTCxNQUFNMUUsTUFBUXZQLEtBQUt3UCxPQUFPNVAsSUFBSXVQLFNBQzlCLElBQUtJLE1BQU8sT0FBTyxLQUNuQixNQUFNRSxVQUFZRixNQUFNRyxvQkFBb0IsUUFBU1IsU0FDckQsSUFBS08sVUFBVyxPQUFPLEtBQ3ZCLE1BQU1rRSxNQUFRLElBQUloRSxNQUFNRixXQUV4QixPQURLa0UsTUFBTXBFLFFBQU9vRSxNQUFNcEUsTUFBUWpPLFFBQVFDLE1BQU13TyxVQUFVUixNQUFNaUMsV0FDdkRtQyxLQUNULENBQ0YsQ0FBTyxDQUNMLE1BQU1oWCxNQUFRcUQsS0FBS3FQLE9BQU96UCxJQUFJckIsS0FDOUIsT0FBTzJULFdBQVcwQyxjQUFjalksTUFDbEMsQ0FDRixDQUVBLG9CQUFPaVksQ0FBZWpZLE9BQ3BCLE9BQUtBLE1BQ0VBLE1BQU1nWCxPQUFTaFgsTUFBTWtZLGVBRFQsSUE0QnJCLENBRUEseUJBQU9DLENBQW9CaEIsVUFDekIsSUFBS0EsU0FBVSxPQUFPLEtBQ3RCLEdBQUk5VCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxZQUFhLENBRXpDLE1BQU0rVCxNQUFRekIsV0FBVzBCLGdCQUFnQkUsVUFDekMsR0FBSUgsUUFDR0EsTUFBTW5DLFVBQVltQyxPQUFPb0IsUUFBUUMsTUFDd0IsS0FBdkRyQixNQUFNbkMsVUFBWW1DLE9BQU9vQixRQUFRQyxJQUFJakssUUFBUSxLQUNoRCxPQUFRNEksTUFBTW5DLFVBQVltQyxPQUFPb0IsUUFBUUMsR0FJakQsQ0FDQSxNQUFNclksTUFBUXVWLFdBQVdxQixnQkFBZ0JPLFVBQ3pDLE9BQUk5VCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUV4QmpELE1BQU1rWSxnQkFDSmxZLE1BQU1rWSxlQUFlRSxRQUFRQyxNQUN5QixJQUFwRHJZLE1BQU1rWSxlQUFlRSxRQUFRQyxLQUFLakssUUFBUSxLQUNyQ3BPLE1BQU1rWSxlQUFlRSxRQUFRQyxJQUtyQ3JZLE1BQU15TCxHQUNmLENBRUEsa0JBQU82TSxDQUFhQyxXQUFZQyxVQUc5QixRQUM2QixJQUFwQkEsU0FBU0MsYUFDTyxJQUFoQkQsU0FBU3ZFLElBRVpzRSxXQUFXM0YsT0FBT3FCLEdBQWEsQ0FDakMsTUFBTXJCLE1BQVF2UCxLQUFLd1AsT0FBTzVQLElBQUlzVixXQUFXM0YsTUFBTXFCLElBQy9DLFFBQTZCLElBQWxCckIsT0FBT0QsT0FBd0IsQ0FDeEMsTUFBTUEsT0FBU0MsT0FBT0QsT0FDbkJ2VyxRQUFPNGEsT0FBU0EsTUFBTWhYLE1BQU1pVSxLQUFPdUUsU0FBU25OLEtBQUt3SixTQUFTWixLQUMxRGxLLEtBQUlpTixPQUFTQSxNQUFNTSxTQUNBLElBQWxCM0UsT0FBT2hNLFNBQ1Q2UixTQUFXN0YsT0FBTyxHQUV0QixDQUNGLENBRUYsSUFBSStGLFNBQVcsQ0FDYkMsU0FBVSxFQUNWMWMsTUFBTyxFQUNQc00sS0FBTXFRLE9BQU9oRyxNQUFNaUcsS0FBS0MsT0FFMUIsUUFDd0IsSUFBZlAsaUJBQ3NCLElBQXRCQSxXQUFXRSxhQUNFLElBQWJELGVBQ29CLElBQXBCQSxTQUFTQyxPQUNoQixDQUNBLE1BQU1NLElBQU0sSUFBSUMsSUFBSVQsV0FBV0UsT0FBUUQsU0FBU0MsUUFDMUNRLFFBQVUsQ0FBQyxDQUFFRixNQVNuQixHQVJBTCxTQUFXLENBQ1RDLFNBQVVJLElBQUlMLFNBQVdFLE9BQU9oRyxNQUFNaUcsS0FBS3ZULEtBRTNDckosTUFBTzJjLE9BQU9DLEtBQUtLLGlCQUFpQkQsUUFBUyxDQUMzQ0UsV0FBWTlWLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGdCQUNyQyxHQUNIc0YsS0FBTXFRLE9BQU9oRyxNQUFNaUcsS0FBS0MsT0FFdEJ6VixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFBc0IsQ0FDbEQsTUFBTW1XLFVBQVlqUixLQUFLQyxLQUNwQm1RLFdBQVcxRCxTQUFTdUUsV0FBYSxJQUFNWixTQUFTM0QsU0FBU3VFLFdBQWEsSUFFekVWLFNBQVN6YyxNQUFRa00sS0FBS2tSLEtBQ3BCWCxTQUFTemMsTUFBUXljLFNBQVN6YyxNQUFRbWQsVUFBWUEsVUFFbEQsQ0FDRixNQUFZL1YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNkJBQ3BDNkwsR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLQyxTQUFTLDJDQUd2QixPQUFPbVYsUUFDVCxDQUVBLGNBQU9hLENBQVNiLFVBQ2QsTUFDTyxPQURDQSxTQUFTblEsS0FFTm1RLFNBQVN6YyxNQUFRLEVBU2pCeWMsU0FBU3pjLEtBRXRCLEVBR0ssTUFBTXVkLFNBQ1gsa0JBQU9DLENBQWFwSCxNQUNsQixNQUFNcUgsUUFBVXJILEtBQUtzSCxjQUFjLGlCQUNuQyxJQUFLRCxRQUFTLE9BQU8sS0FFckIsTUFBTXhTLEtBQU8sSUFBSXNTLFNBR2pCLE9BRkFqRSxXQUFXbUMscUJBQXFCeFEsS0FBTXdTLFNBRS9CeFMsSUFDVCxDQUVBLGNBQUkwUyxHQUVGLE9BREE3VCxLQUFLOFQsYUFBZTdQLFNBQVNqRSxLQUFLOFQsY0FDMUI5VCxLQUFLOFQsY0FDWCxLQUFLQyxVQUFVRCxhQUFhRSxRQUMxQixPQUFPMVcsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQzFCLEtBQUtGLFVBQVVELGFBQWFJLEtBQzFCLE9BQU81VyxLQUFLQyxLQUFLMFcsT0FBTyxvQkFDMUIsS0FBS0YsVUFBVUQsYUFBYXpKLFFBQzFCLE9BQU8vTSxLQUFLQyxLQUFLMFcsT0FBTyx1QkFDMUIsS0FBS0YsVUFBVUQsYUFBYUssU0FDMUIsT0FBTzdXLEtBQUtDLEtBQUswVyxPQUFPLHdCQUMxQixLQUFLRixVQUFVRCxhQUFhTSxPQUMxQixPQUFPOVcsS0FBS0MsS0FBSzBXLE9BQU8sZUFDMUIsS0FBS0YsVUFBVUQsYUFBYU8sUUFDMUIsT0FBTy9XLEtBQUtDLEtBQUswVyxPQUFPLGdCQUUxQixRQUNFLE9BQU8sS0FFYixDQUVBLFNBQUloYSxHQUNGLE9BQUkrRixLQUFLb1IsU0FBaUI1QixXQUFXcUIsZ0JBQWdCN1EsS0FBS29SLFVBQ25ELElBQ1QsQ0FFQSxRQUFJbkwsR0FDRixPQUFJakcsS0FBS3NVLFFBQVV0VSxLQUFLL0YsTUFBYytGLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUk4QyxLQUFLc1UsUUFDekQsSUFDVCxDQUVBLFNBQUlyTSxHQUNGLE9BQUlqSSxLQUFLdVUsU0FBV3ZVLEtBQUsvRixNQUFjK0YsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSThDLEtBQUt1VSxTQUMxRCxJQUNULENBRUEsWUFBQUMsR0FDRSxHQUFJbFgsS0FBS2tFLFFBQVF0RSxJQUFJLGlCQUFpQjZELE9BQVEsQ0FDNUMsTUFBTTBULFlBQWMsR0FDcEIsSUFBSyxNQUFNQyxhQUFhMVUsS0FBSzJVLE1BQU1oUyxLQUNqQzhSLFlBQVl2ZCxLQUF5QixNQUFwQndkLFVBQVV4ZSxNQUFnQixFQUFJd2UsVUFBVXhlLE1BQVEsSUFFbkV1ZSxZQUFZdmQsS0FBSzhJLEtBQUsyVSxNQUFNblMsS0FBS3RNLE9BRWpDLE1BQU0wZSxTQUFXLENBQ2Y1YSxRQUFTLEdBQUdnRyxLQUFLMlUsTUFBTWhTLEtBQUsvQixrQkFDNUI4QixRQUFTK1IsWUFDVG5SLFFBQVMsS0FDVEMsT0FBTyxHQUVUakcsS0FBS29HLE9BQU9tUixLQUFLRCxTQUNuQixDQUNGLENBRUEscUJBQU9FLENBQWdCdEQsUUFBU0QsT0FBUyxNQUN2QyxJQUFLQyxRQUFTLE9BQ2QsTUFBTXJRLEtBQU9vUSxRQUFVLElBQUlrQyxTQUMzQmpFLFdBQVdtQyxxQkFBcUJ4USxLQUFNcVEsU0FDdENyUSxLQUFLd1QsTUFBUSxDQUNYaFMsS0FBTSxHQUNOSCxLQUFNLENBQUMsR0FFVGdOLFdBQVdtQyxxQkFDVHhRLEtBQUt3VCxNQUNMbkQsUUFBUW9DLGNBQWMsaUJBRXhCelMsS0FBS3dULE1BQU1JLFNBQWlDLElBQXRCNVQsS0FBSzZULGFBQzNCN1QsS0FBS3dULE1BQU1NLE1BQVE3UyxLQUFLQyxJQUFJbEIsS0FBSzZULGNBQ2pDN1QsS0FBS3dULE1BQU1PLFVBQ1QvVCxLQUFLNlQsYUFBZSxFQUNoQjFYLEtBQUtDLEtBQUswVyxPQUFPLDRCQUNqQjNXLEtBQUtDLEtBQUswVyxPQUFPLDBCQUN2QixNQUFNa0IsUUFBVTNELFFBQVFvQyxjQUFjLGFBQ3RDLEdBQUl1QixRQUNGLElBQUssTUFBTW5mLEtBQUttZixRQUFRQyxpQkFBaUIsTUFBTyxDQUM5QyxNQUFNQyxJQUFNLENBQ1ZDLFVBQVUsRUFDVkMsT0FBTyxFQUNQQyxPQUFPLEVBQ1B0ZixPQUFRLEdBRVZzWixXQUFXbUMscUJBQXFCMEQsSUFBS3JmLEdBQ3JDbUwsS0FBS3dULE1BQU1oUyxLQUFLekwsS0FBS21lLElBQ3ZCLENBRUYsTUFBTUksUUFBVWpFLFFBQVFvQyxjQUFjLGFBQ2xDcEMsUUFBUW9DLGNBQWMsYUFBYUEsY0FBYyxNQUNqRCxLQUNKelMsS0FBS3dULE1BQU1uUyxLQUFLdE0sTUFBUXVmLFFBQVV4UixTQUFTd1IsUUFBUTFZLFFBQVE3RyxPQUFTLEtBRXBFaUwsS0FBS3VVLGdCQUFrQixHQUN2QixNQUFNQSxnQkFBa0JsRSxRQUFRb0MsY0FBYyxxQkFDOUMsR0FBSThCLGlCQUFtQkEsZ0JBQWdCTixpQkFBaUIsVUFDdEQsSUFBSyxNQUFNTyxPQUFPRCxnQkFBZ0JOLGlCQUFpQixVQUFXLENBQzVELE1BQU1RLGVBQWlCLENBQUMsRUFDeEJwRyxXQUFXbUMscUJBQXFCaUUsZUFBZ0JELEtBQ2hEeFUsS0FBS3VVLGdCQUFnQnhlLEtBQUswZSxlQUM1QixDQVFGLE9BTEl6VSxLQUFLMFUsYUFDUDFVLEtBQUsyVSxjQUFnQnhZLEtBQUtDLEtBQUswVyxPQUFPLGlCQUFrQixDQUN0RDhCLGdCQUFpQjVVLEtBQUswVSxjQUdyQnRFLFlBQUwsRUFBb0JwUSxJQUN0QixDQUVBLG1CQUFPNlUsQ0FBY0MsT0FDbkIsTUFBTTlVLEtBQU8sSUFBSXNTLFNBNkJqQixPQTNCQXRTLEtBQUsrVSxTQUFXRCxNQUFNQyxTQUN0Qi9VLEtBQUtnVixLQUFPRixNQUFNRSxLQUNsQmhWLEtBQUtoRSxPQUFTOFksTUFBTTlZLE9BQ3BCZ0UsS0FBS2lWLGFBQWVILE1BQU1HLGFBQzFCalYsS0FBS2tWLG1CQUFxQkosTUFBTUksbUJBRWhDbFYsS0FBSzJTLGFBQWVtQyxNQUFNbkMsYUFDMUIzUyxLQUFLbVYsV0FBYUwsTUFBTUssV0FDeEJuVixLQUFLb1QsUUFBVTBCLE1BQU1oTyxNQUFRZ08sTUFBTWhPLE1BQU1pRyxHQUFLLEtBQzlDL00sS0FBS21ULE9BQVMyQixNQUFNaFEsS0FBT2dRLE1BQU1oUSxLQUFLaUksR0FBSyxLQUMzQy9NLEtBQUtvVixRQUFVTixNQUFNakIsYUFDckI3VCxLQUFLakwsTUFBUStOLFNBQVNnUyxNQUFNTyxVQUM1QnJWLEtBQUtpVCxPQUFTNkIsTUFBTVEsU0FDcEJ0VixLQUFLZ1QsU0FBVzhCLE1BQU1TLFdBQ3RCdlYsS0FBS3dWLGVBQWlCVixNQUFNVSxlQUFpQlYsTUFBTVUsZUFBaUIsS0FDcEV4VixLQUFLb0IsT0FBUzBULE1BQU1yVSxLQUFLYSxNQUV6QnRCLEtBQUtpUSxTQUFXNkUsTUFBTWhjLE1BQU1zUyxTQUV4QjBKLE1BQU1oYyxNQUFNMmMsU0FDZHpWLEtBQUtxTCxRQUFVeUosTUFBTWhjLE1BQU1zUyxTQUMzQnBMLEtBQUsrTCxRQUFVLE9BRWYvTCxLQUFLb0wsU0FBVyxLQUNoQnBMLEtBQUsrTCxRQUFVK0ksTUFBTWhjLE1BQU1zUyxVQUd0QnBMLElBQ1QsQ0FFQSwyQkFBTzBWLENBQXNCQyxZQUFhYixPQUN4QyxNQUFNOVUsS0FBT3NTLFNBQVN1QyxhQUFhQyxPQUduQyxPQUZBOVUsS0FBSzRWLGdCQUFnQkQsYUFFZDNWLElBQ1QsQ0FFQSxlQUFBNFYsQ0FBaUJELGFBQ2Z0SCxXQUFXOEIsc0JBQXNCdFIsS0FBTThXLFlBQ3pDLEVBR0ssTUFBTUUsV0FDWCxpQkFBT0MsQ0FBWUMsY0FDakIsT0FBSUEsYUFBYWxQLGNBQWNoRixTQUFTLE9BQWUsTUFDbkRrVSxhQUFhbFAsY0FBY2hGLFNBQVMsT0FBZSxNQUNuRGtVLGFBQWFsUCxjQUFjaEYsU0FBUyxPQUFlLE1BQ25Ea1UsYUFBYWxQLGNBQWNoRixTQUFTLE1BQWMsS0FDbERrVSxhQUFhbFAsY0FBY2hGLFNBQVMsTUFBYyxLQUMvQyxJQUNULENBRUEscUJBQU84UixDQUFnQnRELFFBQVNELE9BQVMsTUFDdkMsSUFBS0MsUUFBUyxPQUNkLE1BQU0yRixPQUFTNUYsUUFBVSxDQUFDLEVBQzFCL0IsV0FBV21DLHFCQUFxQndGLE9BQVEzRixTQUN4QyxNQUFNNEYsTUFBUTVGLFFBQVFvQyxjQUFjLGVBQWV3QixpQkFBaUIsTUFDcEUrQixPQUFPQyxNQUFRLEdBQ2YsSUFBSyxNQUFNQyxLQUFLRCxNQUFPLENBQ3JCLE1BQU1qVyxLQUFPLENBQUMsRUFDZHFPLFdBQVdtQyxxQkFBcUJ4USxLQUFNa1csR0FDdEMsTUFBTUMsTUFBUW5XLEtBQUttVyxNQUNiMVYsS0FBTyxDQUNYb0QsTUFBTzdELEtBQUs2RCxNQUNaekMsT0FBUXBCLEtBQUtvQixlQUVScEIsS0FBS21XLGFBQ0xuVyxLQUFLNkQsYUFDTDdELEtBQUtvQixZQUN1QixJQUF4QjRVLE9BQU9DLE1BQU1FLFNBQ3RCblcsS0FBS1MsS0FBTyxHQUNadVYsT0FBT0MsTUFBTWxnQixLQUFLaUssT0FFcEJnVyxPQUFPQyxNQUFNRSxPQUFPMVYsS0FBSzFLLEtBQUswSyxLQUNoQyxDQUNBLE9BQUsyUCxZQUFMLEVBQW9CNEYsTUFDdEIsRUMvaEJGLE1BQU1JLGlDQUFpQ0Msa0JBRXJDLGFBQUFDLEVBQWUsVUFBYSxFQUFLLFVBQWEsR0FBVSxDQUFDLEdBRXZELE1BQU10VyxLQUFPbkIsS0FBS21CLE1BQVEsSUFBSXVXLFlBQVkxWCxLQUFLMlgsTUFLL0MsT0FKQTNYLEtBQUttQixLQUFPQSxLQUFLeVcsU0FBUyxDQUFFQyxTQUFVOU0sU0FBVXpJLE9BQU8sSUFHbkR0QyxLQUFLZ1EsUUFBUWhRLEtBQUttQixLQUFLMkIsTUFBTWdWLFNBQVEvVSxJQUFPQSxFQUFFekQsUUFBUTBRLE9BQVNqTixFQUFFekQsUUFBUTBRLFFBQVVoUSxLQUFLZ1EsVUFDckZoUSxJQUNULEVBR0ssTUFBTTBYLG9CQUFvQjVWLEtBVS9CLGFBQUEyVixFQUFlLFVBQWEsRUFBSyxVQUFhLEdBQVUsQ0FBQyxHQXNDdkQsT0FwQ0F6WCxLQUFLOEMsTUFBUTlDLEtBQUs4QyxNQUFNa0IsS0FBSTJULE9BQzFCLEtBQU1BLGdCQUFnQkksVUFDcEIsTUFBTSxJQUFJQyxNQUFNLGlGQUVsQixHQUFJTCxLQUFLTSxlQUFnQixDQUN2Qk4sS0FBS0MsU0FBUyxDQUFFQyxTQUFVOU0sU0FBVXpJLE9BQU8sSUFDM0N0QyxLQUFLa1ksTUFBUWxZLEtBQUtrWSxNQUFNbE0sT0FBTzJMLEtBQUsvVixNQUdwQyxJQUFJYSxNQUFRa1YsS0FBS2xWLE1BS2pCLE9BSklvVixVQUFZOU0sVUFBWTRNLEtBQUsvVixLQUFLaEIsU0FDcEM2QixNQUFRTCxLQUFLMEksT0FBTzZNLEtBQUsvVixLQUFLLEdBQUdvRCxNQUFRLEdBQUssRUFBSTJTLEtBQUtsVixRQUdsRCxJQUFJMFYsWUFBWSxDQUFFcFQsT0FBUXRDLE1BQU9uRCxRQUFTcVksS0FBS3JZLFNBQ3hELENBQ0EsT0FBT3FZLFFBSVQzWCxLQUFLOEMsTUFBUTlDLEtBQUtxRixZQUFZK1MsY0FBY3BZLEtBQUs4QyxPQUdqRDlDLEtBQUs4QyxNQUFROUMsS0FBSzhDLE1BQU1rQixLQUFJMlQsT0FDMUIsSUFBS0EsS0FBS1UsV0FBWSxDQUNwQixRQUEwQixJQUFmVixLQUFLM1MsTUFDZCxPQUFPLElBQUltVCxZQUFZLENBQUVwVCxPQUFRM0MsS0FBSzBJLE9BQU82TSxLQUFLM1MsTUFBUSxHQUFLLEVBQUkyUyxLQUFLNVMsUUFBU3pGLFFBQVNxWSxLQUFLclksVUFFL0ZxWSxLQUFLQyxTQUFTLENBQUVDLFNBQVU5TSxTQUFVekksT0FBTyxHQUUvQyxDQUNBLE9BQU9xVixRQUlUM1gsS0FBS3NZLE9BQVN0WSxLQUFLdVksaUJBQ1p2WSxJQUNULENBUUEsd0JBQU93WSxDQUFtQkMsVUFDeEIsT0FBT3pZLEtBQUswWSxZQUFZRCxTQUFVLENBQ2hDRSxXQUFZcEIseUJBQXlCcUIsWUFDckNDLFlBQWF0Qix5QkFBeUJ1QixhQUN0Q0MsV0FBWSxJQUNaQyxZQUFhLElBQ2JDLFFBQVMzQixRQUVQLE1BQU0zSixHQUFLMkosTUFBTTRCLEtBQUt6YSxNQUFNLEdBQUksR0FDMUIwYSxXQUFhN0IsTUFBTXhVLE1BQU11QixLQUFLLElBQzlCL0UsUUFBVSxDQUFFMFEsT0FBUXNILE1BQU10SCxPQUFTc0gsTUFBTXRILE9BQU92UixNQUFNLEdBQUksUUFBS1osR0FHL0RpRixNQUFRLEdBQ2QsR0FBSTZLLE1BQU12TCxLQUFNLENBQ2QsTUFBTWdYLEtBQU9wWixLQUFLcVosZUFBZUYsWUFDakNyVyxNQUFNNUwsS0FBSyxJQUFJb2lCLFNBQVMsQ0FBRTNMLEdBQUk3SyxNQUFPc1csS0FBTTlaLFVBQzdDLE1BQ01xTyxJQUFJN0ssTUFBTTVMLEtBQUt5VyxJQUNuQjdLLE1BQU01TCxLQUFLLElBQUlxZ0IseUJBQXlCLENBQUVJLEtBQU13QixXQUFZN1osV0FFOUQsT0FBT3dELFFBR2IsRUM1RkssTUFBTXlXLDBCQUEwQkMsZ0JBQ3JDLHlCQUFXQyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsU0FBVSxnQkFDNUJqTCxNQUFPcFIsS0FBS0MsS0FBS0MsU0FBUyw0QkFDMUJvYyxTQUFVLHdEQUNWQyxlQUFlLEVBQ2ZDLE1BQU8sSUFDUEMsT0FBUSxLQUVaLENBR0EsaUJBQUFDLENBQW1CQyxNQUNqQjVkLE1BQU0yZCxrQkFBa0JDLE1BRXhCQSxLQUFLQyxHQUFHLFFBQVMsa0JBQW1CbGEsS0FBS21hLFFBQVFsaEIsS0FBSytHLE9BQ3REaWEsS0FBS3ZhLEtBQUssYUFBYTBhLE1BQU1wYSxLQUFLcWEsV0FBV3BoQixLQUFLK0csTUFBT0EsS0FBS3NhLFlBQVlyaEIsS0FBSytHLE9BQy9FaWEsS0FBS0MsR0FBRyxRQUFTLGlCQUFrQmxhLEtBQUt1YSxnQkFBZ0J0aEIsS0FBSytHLE1BQy9ELENBRUEsT0FBQW1hLENBQVM1ZCxPQUNQLE1BQU1LLEdBQUtMLE1BQU1JLGNBQ2pCLElBQUssTUFBTTZkLEtBQUs1ZCxHQUFHNmQsY0FBY0MsU0FDL0JGLEVBQUV4TCxVQUFVMkwsT0FBTyxTQUFVSCxJQUFNNWQsSUFFckNvRCxLQUFLdVIsT0FBTytELFNBQVcxWSxHQUFHRyxRQUFRNmQsU0FDcEMsQ0FFQSxnQkFBTVAsQ0FBWTlkLE9BRWhCLEdBREFBLE1BQU1FLGtCQUNEb1csT0FBT2dJLE1BQ1YsT0FFRixNQUFNamUsR0FBS0wsTUFBTUksY0FDWHNVLGFBQWUvSyxTQUFTdEosR0FBR0csUUFBUTZkLGFBQWFySixPQUNsRE4sT0FBTzZKLFlBQ0o3SixNQUFNOEosYUFDVDlKLE1BQU1vSixXQUFXOWQsTUFBTyxDQUFFeWUsZ0JBQWdCLElBQzFDaGIsS0FBS2liLGFBQWVoSyxPQUcxQixDQUVBLFdBQUFxSixDQUFhL2QsT0FDWEEsTUFBTUUsaUJBQ0Z1RCxLQUFLaWIsY0FDUGpiLEtBQUtpYixhQUFhWCxZQUFZL2QsT0FFaEN5RCxLQUFLaWIsYUFBZSxJQUN0QixDQUVBLHFCQUFNVixDQUFpQmhlLE9BQ3JCeUQsS0FBS3VSLE9BQU8ySixjQUFjaFYsU0FBU2xHLEtBQUt1UixPQUFPK0QsV0FDL0N0VixLQUFLbWIsT0FDUCxDQUVBLG1CQUFhekssR0FDWCxNQUFNMEssYUFBZSxDQUFDLFlBQWEsTUFBTyxZQUMxQyxJQUFJcE4sTUFBUSxHQUNaLEdBQUkxUSxLQUFLc0csS0FBSzJFLE1BQVFzSyxPQUFPZ0ksT0FBU2hJLE9BQU9qRyxPQUFPbU8sV0FBV25hLE9BQVMsRUFDdEVvTixNQUFRNkUsT0FBT2pHLE9BQU9tTyxXQUFXL1csS0FBSWpCLEdBQUtBLEVBQUUrTCxlQUN2QyxDQUNEK0QsT0FBT2dJLFFBQ1Q3TSxNQUFRNkUsT0FBT2pHLE9BQU95TyxXQUFXaGxCLFFBQU8wTSxHQUFLcVksYUFBYXBZLFNBQVNELEVBQUUrTCxTQUFTN1UsTUFBTW9FLFFBQVUwRSxFQUFFOUksTUFBTXFoQixVQUFVaGUsS0FBS3NHLEtBQUtzSyxLQUFPbkwsRUFBRTlJLE1BQU1xaEIsVUFBVUMsV0FBYXBMLE1BQU1xTCwwQkFBMEJDLFFBQU96WCxLQUFJakIsR0FBS0EsRUFBRStMLFlBRXBOLE1BQU00TSxTQUFXMU4sTUFBTWhLLEtBQUlqQixHQUFLQSxFQUFFbUssVUFDbENjLE1BQVFBLE1BQU1oQyxPQUFPMU8sS0FBS3FQLE9BQU90VyxRQUFPcUcsR0FBSzBlLGFBQWFwWSxTQUFTdEcsRUFBRTJCLFFBQVVxZCxTQUFTMVksU0FBU3RHLEVBQUV3UixNQUFReFIsRUFBRTRlLFVBQVVoZSxLQUFLc0csS0FBS3NLLEtBQU94UixFQUFFNGUsVUFBVUMsV0FBYXBMLE1BQU1xTCwwQkFBMEJDLFFBQ25NLENBQ0EsR0FBcUIsSUFBakJ6TixNQUFNcE4sT0FDUixPQUFPb04sTUFBTSxHQUVmLEdBQUlBLE1BQU1wTixPQUFTLEVBQUcsQ0FDcEIsTUFBTXRCLFFBQVUsR0FDaEIsSUFBSyxNQUFNcWMsVUFBVTNOLE1BQU8sQ0FDMUIsTUFBTTROLGdCQUFtQkQsa0JBQWtCRSxjQUMzQ3ZjLFFBQVFwSSxLQUFLLENBQ1h5RyxLQUFNZ2UsT0FBT2hlLEtBQ2J2SCxLQUFNdWxCLE9BQU92bEIsS0FDYnNQLElBQU1rVyxnQkFBa0JELE9BQU8xaEIsTUFBTTZoQixTQUFXSCxPQUFPRyxTQUN2REMsUUFBU0gsaUJBRWIsQ0FDQXRjLFFBQVE2TSxLQUFLdkUsY0FBY3dFLGVBRTNCLElBQUlrSixTQUFXaFcsUUFBUSxHQUFHM0IsS0FDMUIsR0FBSUwsS0FBS3NHLEtBQUtvWSxVQUFXLENBQ3ZCLE1BQU1DLGNBQWdCak8sTUFBTXRPLE1BQUtpYyxTQUFXQSxPQUFPek8sU0FBV3lPLE9BQU96TixNQUFRNVEsS0FBS3NHLEtBQUtvWSxVQUFVOU4sS0FDN0YrTixnQkFDRjNHLFNBQVcyRyxjQUFjdGUsS0FFN0IsQ0FFQSxPQUFPLElBQUl1ZSxTQUFRaEIsVUFDakIsSUFBSTNCLGtCQUFrQixDQUFFamEsUUFBU2dXLFNBQVU0RixVQUFXbGQsUUFBTyxFQUFJLEdBRXJFLENBRUEsT0FEQStLLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBS0MsU0FBUywrQkFDbEMsSUFDVCxFQ2hHSyxNQUFNMmUsaUJBRVgsdUJBQWFDLEVBQVksVUFBVyxJQUFLLFFBSXZDLFFBSHlCLElBQWRDLFlBQ1QxTCxJQUFNclQsS0FBS2dmLFNBQVNwZixJQUFJbWYsaUJBRTZDLElBQTVEMUwsSUFBSXpSLE9BQU93QyxPQUFPLGtCQUFrQjZhLGFBQWFDLE9BQXdCLENBQ2xGLE1BQU1DLFFBQVUsQ0FDZCxDQUFDLDJDQUE2Q0QsT0FBUSxZQUVsREwsaUJBQWlCTyxzQkFBc0IsQ0FBRS9MLElBQUs4TCxTQUN0RCxDQUNGLENBR0EsdUJBQWFFLEVBQVksVUFBVyxJQUFLLGFBQ2QsSUFBZE4sWUFDVDFMLElBQU1yVCxLQUFLZ2YsU0FBU3BmLElBQUltZixZQUUxQixNQUFNSSxRQUFVLENBQUMsRUFDakIsSUFBSUcsTUFBTyxFQUlYLE9BSEtqTSxJQUFJa00sY0FBY3ZmLEtBQUtzRyxLQUFNLFlBQ2hDZ1osS0FBT2hWLGNBQWNrVixnQkFFZm5NLElBQUl6UixNQUFNd0MsS0FBSyxpQkFBaUJyRCxNQUN0QyxJQUFLLFdBQ0hvZSxRQUFRLHVDQUF3QyxFQUNoRE4saUJBQWlCWSxvQkFBb0IsQ0FBRXBNLElBQUtpTSxLQUFNSCxRQUFTTyxTQUFTLElBQ3BFLE1BQ0YsSUFBSyxVQUNILENBQ0UsTUFBTTVGLE1BQVEsQ0FBRSxDQUFDb0YsT0FBUTdMLElBQUl6UixNQUFNd0MsS0FBSyxpQkFBaUI2YSxhQUFhQyxPQUFPcmIsTUFDN0VnYixpQkFBaUJjLGtCQUFrQixDQUFFdE0sSUFBS3lHLE1BQU93RixLQUFNSCxRQUFTTyxTQUFTLEdBQzNFLEVBR04sQ0FHQSx3QkFBYUUsRUFBYSxVQUFXLElBQUssTUFBTyxNQUFPLGFBSXRELFFBSHlCLElBQWRiLFlBQ1QxTCxJQUFNclQsS0FBS2dmLFNBQVNwZixJQUFJbWYsaUJBRXVELElBQXRFMUwsSUFBSXpSLE9BQU93QyxPQUFPLGtCQUFrQjZhLGFBQWFDLE9BQU9XLFVBQ2pFLE9BQVF4TSxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCckQsTUFDdEMsSUFBSyxXQUNILElBQUsrZSxXQUFZLENBRWZBLFdBRGNySixVQUFVaFMsU0FBUzRPLElBQUl6UixPQUFPd0MsT0FBTyxrQkFBa0I2YSxhQUFhQyxPQUFPVyxXQUN0RXpILGdCQUFnQjJILE9BQU9DLGFBQWUsSUFDM0QsQ0FDQSxHQUFJRixXQUFZLENBQ2QsTUFBTW5qQixZQUFja2lCLGlCQUFpQm9CLFNBQVM1TSxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCOGIsV0FDOUUsS0FBTXZqQixpQkFBaUI0aEIsY0FBZ0I1aEIsTUFBTUEsTUFBUUEsT0FBT3dqQixVQUFVTCxZQU1wRSxZQUxBclUsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBSzBXLE9BQU8sMEJBQTJCLENBQzFDaGEsTUFBT0EsTUFBTTdELFFBS25CLE1BQU1xbUIsUUFBVSxDQUFDLEVBQ2pCLElBQUssTUFBTUQsU0FBUzdMLElBQUl6UixNQUFNd0MsS0FBSyxpQkFBaUI2YSxhQUFjLENBQ2hFLE1BQU10RyxNQUFRbEMsVUFBVWhTLFNBQVM0TyxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCNmEsYUFBYUMsT0FBT1csV0FDckZsSCxNQUFNMEgsa0JBQWtCUCxZQUN4QlgsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0J2RyxNQUFNMkgsWUFDbkYsQ0FDQSxHQUFJaGUsT0FBT21FLEtBQUswWSxTQUFTN2IsT0FDdkIsR0FBSStQLElBQUlrTSxjQUFjdmYsS0FBS3NHLEtBQU0sZ0JBQ3pCdVksaUJBQWlCTyxzQkFBc0IsQ0FBRS9MLElBQUs4TCxjQUMvQyxDQUNMLE1BQU1HLEtBQU9oVixjQUFja1YsZ0JBQ2QsSUFBVEYsTUFDRnRmLEtBQUt1Z0IsT0FBT0MsS0FBSyxjQUFlLENBQzlCQyxTQUFVbkIsS0FDVnZlLEtBQU0sdUJBQ05nZSxVQUFXMUwsSUFBSXpDLEdBQ2Z1TyxTQUdOLENBRUosQ0FDQSxNQUNGLElBQUssVUFDSCxDQUNFLE1BQU14RyxNQUFRbEMsVUFBVWhTLFNBQVM0TyxJQUFJelIsT0FBT3dDLE9BQU8sa0JBQWtCNmEsYUFBYUMsT0FBT1csZ0JBQ3BFLElBQVZFLE1BQ1RwSCxNQUFNK0gsYUFBYVgsT0FBTyxRQUNLLElBQWZELFlBQ2hCbkgsTUFBTWdJLFVBQVViLFlBQVksR0FFOUIsTUFBTVgsUUFBVSxDQUNkLENBQUMseUNBQTJDRCxNQUFRLGNBQWV2RyxNQUFNMkgsY0FFM0UsR0FBSWhlLE9BQU9tRSxLQUFLMFksU0FBUzdiLE9BQ3ZCLEdBQUkrUCxJQUFJa00sY0FBY3ZmLEtBQUtzRyxLQUFNLGdCQUN6QnVZLGlCQUFpQk8sc0JBQXNCLENBQUUvTCxJQUFLOEwsY0FDL0MsQ0FDTCxNQUFNRyxLQUFPaFYsY0FBY2tWLGdCQUNkLElBQVRGLE1BQ0Z0ZixLQUFLdWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QkMsU0FBVW5CLEtBQ1Z2ZSxLQUFNLHVCQUNOZ2UsVUFBVzFMLElBQUl6QyxHQUNmdU8sU0FHTixDQUVKLE9BSUoxVCxHQUFHQyxjQUFjMFUsTUFBTSxpQ0FBa0MsQ0FBRWxnQixVQUFVLEdBRXpFLENBR0Esa0NBQWFrZixFQUF1QixJQUFLLFFBQVMsVUFBZSxDQUFDLEdBQ2hFLEdBQUkvTCxLQUFLelIsT0FBT3dDLE9BQU8saUJBQWtCLENBQ3ZDLFFBQXdCLElBQWJ3YyxTQUEwQixDQUNuQ0EsU0FBVyxDQUFDLEVBQ1osSUFBSyxNQUFNMUIsU0FBUzdMLEtBQUt6UixPQUFPd0MsT0FBTyxpQkFBaUI2YSxhQUFjLENBQ3BFLE1BQU1wYixXQUFhZ2IsaUJBQWlCZ0MsV0FBVyxDQUFFaGQsS0FBTXdQLEtBQUt6UixPQUFPd0MsT0FBTyxpQkFBaUI2YSxhQUFhQyxPQUFPcmIsS0FBTWlkLE9BQU8sSUFDNUhGLFNBQVMxQixPQUFTcmIsSUFDcEIsQ0FDRixDQUNBLE1BQU03QixRQUFVTSxPQUFPeWUsT0FBTyxDQUFFSCxVQUFZdGYsUUFBUUMsTUFBTTZhLFlBQVkvSSxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWtCOUMsUUFBUUMsTUFBTXlmLGFBQWE3QixVQUFVdmQsT0FBT3dDLE9BQU8sa0JBQW9CLENBQUMsRUFBRyxDQUFFNmMsa0JBQWtCLEtBQ3RNLElBQUssTUFBTS9CLFNBQVNsZCxRQUFRaWQsYUFDdEJqZCxRQUFRaWQsYUFBYUMsT0FBT1csWUFDOUI3ZCxRQUFRaWQsYUFBYUMsT0FBT1csVUFBWXBKLFVBQVVoUyxTQUFTekMsUUFBUWlkLGFBQWFDLE9BQU9XLFlBRzNGN2QsUUFBUWtmLG1CQUFvQixFQUM1QixJQUFLLE1BQU1oQyxTQUFTbGQsUUFBUWlkLGtCQUMyQixJQUExQ2pkLFFBQVFpZCxhQUFhQyxPQUFPVyxZQUNyQzdkLFFBQVFrZixtQkFBb0IsR0FJaEMsT0FEQS9CLFFBQVEsOENBQWdEbmQsUUFBUWtmLGtCQUN4RGxmLFFBQVFqQixNQUNkLElBQUssV0FHSCxHQUZBaUIsUUFBUW1mLFdBQVksRUFDcEJuZixRQUFRb2YsV0FBWSxFQUNoQnBmLFFBQVFrZixrQkFBbUIsQ0FDN0IsSUFBSUcsVUFBWSxFQUNaQyxTQUFXLEVBQ2YsSUFBSyxNQUFNcEMsU0FBU2xkLFFBQVFpZCxhQUN0QmpkLFFBQVFpZCxhQUFhQyxPQUFPVyxVQUFVc0IsVUFDeENFLFlBQ1NyZixRQUFRaWQsYUFBYUMsT0FBT1csVUFBVXVCLFdBQy9DRSxXQUdBRCxVQUFZLElBQTJCLFFBQXJCcmYsUUFBUXVmLFVBQW9DLElBQWJELFVBQXVDLFFBQXJCdGYsUUFBUXVmLFVBQzdFdmYsUUFBUW1mLFdBQVksRUFFcEJuZixRQUFRb2YsV0FBWSxDQUV4QixDQUNBakMsUUFBUSxzQ0FBd0NuZCxRQUFRbWYsVUFDeERoQyxRQUFRLHNDQUF3Q25kLFFBQVFvZixVQUN4RCxNQUNGLElBQUssVUFDSCxHQUFJcGYsUUFBUWtmLGtCQUFtQixDQUU3QixHQURBbGYsUUFBUXdmLE9BQVEsRUFDWnhmLFFBQVF5ZixTQUFVLENBRXBCemYsUUFBUTBmLFVBQVlDLE1BQU1DLEtBQUssSUFBS0MsVUFBVTdmLFFBQVEwZixVQUFVaGIsS0FBSXJFLEdBQUtzRSxTQUFTdEUsRUFBRXlmLE9BQU8sR0FBSSxPQUFPalQsUUFBUW5JLEtBQUlyRSxHQUFLLElBQU1BLElBQzdILE1BQU0wZixjQUFnQixDQUFDLEVBQ3ZCL2YsUUFBUWdnQixtQkFBb0IsRUFDNUIsSUFBSyxNQUFNOUMsU0FBU2xkLFFBQVFpZCxhQUN0QmpkLFFBQVFpZCxhQUFhQyxPQUFPVyxVQUFVb0MsU0FDeENGLGNBQWMvZixRQUFRaWQsYUFBYUMsT0FBT1csVUFBVXJKLGNBQWdCN1AsU0FBU29iLGNBQWMvZixRQUFRaWQsYUFBYUMsT0FBT1csVUFBVXJKLGVBQWlCLEVBQUcsSUFBTSxHQUV6SnhVLFFBQVFpZCxhQUFhQyxPQUFPZ0QsWUFBY2xnQixRQUFRaWQsYUFBYUMsT0FBT2lELGFBQ3hFbmdCLFFBQVFnZ0IsbUJBQW9CLEdBR2hDN0MsUUFBUSw4Q0FBZ0RuZCxRQUFRZ2dCLG1CQUM5QixJQUE5QmhnQixRQUFRb2dCLG9CQUE2RCxJQUE5QnBnQixRQUFRcWdCLG9CQUM3Q3JnQixRQUFRZ2dCLG1CQUNWaGdCLFFBQVFxZ0IsbUJBQW9CLEVBQzVCbEQsUUFBUSw4Q0FBZ0RuZCxRQUFRcWdCLG9CQUVoRXJnQixRQUFRb2dCLG1CQUFvQixFQUM1QmpELFFBQVEsOENBQWdEbmQsUUFBUW9nQixvQkFHcEUsTUFBTUUsS0FBT3hkLEtBQUthLE9BQU9yRCxPQUFPbUUsS0FBS3NiLGdCQUdyQyxHQUZBL2YsUUFBUXVnQixpQkFBa0IsRUFDMUJ2Z0IsUUFBUXdnQixXQUFheGlCLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ3BDb2lCLEtBQU8sRUFDVCxJQUFLLE1BQU1wRCxTQUFTbGQsUUFBUWlkLGFBQWMsQ0FDeEMsSUFBSXdELGNBQWUsRUFDZkMsV0FBWSxFQUNaMWdCLFFBQVFpZCxhQUFhQyxPQUFPVyxVQUFVckosZUFBaUI4TCxNQUFnQyxJQUF4QlAsY0FBY08sTUFDL0VHLGNBQWUsRUFDTnpnQixRQUFRaWQsYUFBYUMsT0FBT1csVUFBVXJKLGVBQWlCOEwsT0FDNUR0Z0IsUUFBUW9nQixtQkFBcUJwZ0IsUUFBUWlkLGFBQWFDLE9BQU9pRCxZQUVsRG5nQixRQUFRcWdCLG9CQUFzQnJnQixRQUFRaWQsYUFBYUMsT0FBT2lELFdBRG5FTSxjQUFlLEdBS2ZDLFdBQVksRUFDWjFnQixRQUFRdWdCLGlCQUFrQixFQUMxQnZnQixRQUFRd2YsT0FBUSxJQUdwQnhmLFFBQVFpZCxhQUFhQyxPQUFPeUQsU0FBV0YsYUFDdkN6Z0IsUUFBUWlkLGFBQWFDLE9BQU9zQyxNQUFRa0IsVUFDcEN2RCxRQUFRLHlDQUEyQ0QsTUFBUSxhQUFldUQsYUFDMUV0RCxRQUFRLHlDQUEyQ0QsTUFBUSxVQUFZd0QsVUFDbkVELGVBQWlCQyxZQUNmMWdCLFFBQVFpZCxhQUFhQyxPQUFPaUQsV0FDMUJuZ0IsUUFBUWlkLGFBQWFDLE9BQU8wRCxXQUM5QjVnQixRQUFRd2dCLFdBQWF4aUIsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXdCLENBQzVEN2QsS0FBTThuQixTQUFTMUIsT0FBT3ZpQixNQUFNN0QsT0FHOUJrSixRQUFRd2dCLFdBQWF4aUIsS0FBS0MsS0FBSzBXLE9BQU8scUJBQXNCLENBQzFEN2QsS0FBTThuQixTQUFTMUIsT0FBT3ZpQixNQUFNN0QsT0FHdkJrSixRQUFRaWQsYUFBYUMsT0FBTzBELFdBQ2pDNWdCLFFBQVFpZCxhQUFhQyxPQUFPZ0QsVUFDOUJsZ0IsUUFBUXdnQixXQUFheGlCLEtBQUtDLEtBQUswVyxPQUFPLG9CQUFxQixDQUN6RDdkLEtBQU04bkIsU0FBUzFCLE9BQU92aUIsTUFBTTdELE9BRzlCa0osUUFBUXdnQixXQUFheGlCLEtBQUtDLEtBQUswVyxPQUFPLHVCQUF3QixDQUM1RDdkLEtBQU04bkIsU0FBUzFCLE9BQU92aUIsTUFBTTdELE9BSWhDa0osUUFBUXdnQixXQUFheGlCLEtBQUtDLEtBQUswVyxPQUFPLHFCQUFzQixDQUMxRDdkLEtBQU04bkIsU0FBUzFCLE9BQU92aUIsTUFBTTdELE9BSXBDLENBRUZxbUIsUUFBUSw0Q0FBOENuZCxRQUFRdWdCLGVBQ2hFLEtBQU8sQ0FFTCxNQUFNTSxzQkFBd0I3aUIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEseUJBQ3hEb0MsUUFBUTBmLFVBQVU3UyxNQUFLLENBQUN6UCxFQUFHMGpCLEtBQ3pCLEdBQUk5Z0IsUUFBUWlkLGFBQWE3ZixHQUFHeWdCLFVBQVVySixhQUFleFUsUUFBUWlkLGFBQWE2RCxHQUFHakQsVUFBVXJKLGFBQ3JGLE9BQVEsRUFDSCxHQUFJeFUsUUFBUWlkLGFBQWE3ZixHQUFHeWdCLFVBQVVySixhQUFleFUsUUFBUWlkLGFBQWE2RCxHQUFHakQsVUFBVXJKLGFBQzVGLE9BQU8sRUFDRixHQUFJcU0sc0JBQXVCLENBQ2hDLEdBQUk3Z0IsUUFBUWlkLGFBQWE3ZixHQUFHeWdCLFVBQVVrRCxlQUFpQi9nQixRQUFRaWQsYUFBYTZELEdBQUdqRCxVQUFVa0QsZUFDdkYsT0FBUSxFQUNILEdBQUkvZ0IsUUFBUWlkLGFBQWE3ZixHQUFHeWdCLFVBQVVrRCxlQUFpQi9nQixRQUFRaWQsYUFBYTZELEdBQUdqRCxVQUFVa0QsZUFDOUYsT0FBTyxDQUVYLEtBQU8sSUFBSS9nQixRQUFRaWQsYUFBYTdmLEdBQUd5Z0IsVUFBVTNHLFNBQVdsWCxRQUFRaWQsYUFBYTZELEdBQUdqRCxVQUFVM0csU0FDeEYsT0FBUSxFQUNILEdBQUlsWCxRQUFRaWQsYUFBYTdmLEdBQUd5Z0IsVUFBVTNHLFNBQVdsWCxRQUFRaWQsYUFBYTZELEdBQUdqRCxVQUFVM0csU0FDeEYsT0FBTyxDQUNULENBQ0EsT0FBTyxLQUVULE1BQU04SixVQUFZaGhCLFFBQVEwZixVQUFVcGUsT0FDcEMsSUFBSStELE9BQVMsRUFDYixNQUFNakksRUFBSTRDLFFBQVFpZCxhQUFhamQsUUFBUTBmLFVBQVUsSUFDakQsR0FBS3RpQixFQUFFNmpCLE9BU0w1YixRQUFVLE9BUlYsS0FBT0EsT0FBUzJiLFVBQVczYixTQUFVLENBQ25DLE1BQU15YixFQUFJOWdCLFFBQVFpZCxhQUFhamQsUUFBUTBmLFVBQVVyYSxTQUNqRCxHQUFJakksRUFBRXlnQixVQUFVckosZUFBaUJzTSxFQUFFakQsVUFBVXJKLGVBQWlCcU0sc0JBQXdCempCLEVBQUV5Z0IsVUFBVWtELGlCQUFtQkQsRUFBRWpELFVBQVVrRCxlQUFpQjNqQixFQUFFeWdCLFVBQVUzRyxXQUFhNEosRUFBRWpELFVBQVUzRyxVQUFXLENBQ2hNN1IsU0FDQSxLQUNGLENBQ0YsQ0FJRnJGLFFBQVF3ZixNQUFRbmEsT0FBUyxFQUN6QixJQUFLLElBQUk2YixFQUFJLEVBQUdBLEVBQUlGLFVBQVdFLElBQUssQ0FDbEMsSUFBSVAsVUFBVyxFQUNYbkIsT0FBUSxFQUNSMEIsR0FBSzdiLFNBQ1BzYixVQUFXLEVBQ1huQixNQUFReGYsUUFBUXdmLE9BRWxCLE1BQU10QyxNQUFRbGQsUUFBUTBmLFVBQVV3QixHQUNoQ2xoQixRQUFRaWQsYUFBYUMsT0FBT3lELFNBQVdBLFNBQ3ZDM2dCLFFBQVFpZCxhQUFhQyxPQUFPc0MsTUFBUUEsTUFDcENyQyxRQUFRLHlDQUEyQ0QsTUFBUSxhQUFleUQsU0FDMUV4RCxRQUFRLHlDQUEyQ0QsTUFBUSxVQUFZc0MsS0FDekUsQ0FDQXhmLFFBQVF1Z0IsaUJBQWtCLEVBQzFCcEQsUUFBUSw2Q0FBOEMsQ0FDeEQsQ0FDQUEsUUFBUSxrQ0FBb0NuZCxRQUFRd2YsS0FDdEQsRUFHSixNQUFNN0UsV0FBYXdHLGVBQWV0RSxpQkFBaUJ1RSxnQkFBZ0IvUCxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCckQsTUFBT2lCLFNBQzFHbWQsUUFBUWhNLFFBQVV3SixXQUNadEosSUFBSXpTLE9BQU91ZSxRQUNuQixDQUNGLENBR0EsNkJBQWFrRSxFQUFrQixVQUFXLFVBQ3hDLE1BQU1oUSxJQUFNclQsS0FBS2dmLFNBQVNwZixJQUFJbWYsV0FDMUIxTCxLQUFLelIsT0FBT3dDLE9BQU8sd0JBQ2Z5YSxpQkFBaUJPLHNCQUFzQixDQUFFL0wsSUFBSzhMLFNBRXhELENBRUEscUJBQWFtRSxFQUFVLElBQUssVUFDMUIsTUFBTUMsVUFBWSxDQUNoQnZLLFdBQVl3SyxRQUFReEssV0FDcEJ0QixhQUFjOEwsUUFBUTdMLE1BQ3RCN0QsU0FBVzBQLFFBQVE3bUIsTUFBTW1YLFVBQVkwUCxRQUFRN21CLE1BQU1BLE1BQU1tWCxTQUN6RDJQLFVBQVUsRUFDVjVwQixPQUFTd1osSUFBSXpSLE9BQU93QyxPQUFPLGlCQUFpQnFkLFdBQVksR0FFMUQsT0FBUStCLFFBQVF6aUIsTUFDZCxJQUFLLGlCQUNId2lCLFVBQVVsSyxlQUFpQm1LLFFBQVFqbEIsSUFDbkNnbEIsVUFBVUUsU0FBWXBRLElBQUl6UixPQUFPd0MsT0FBTyxpQkFBaUJxZixXQUFZLEVBQ3JFLE1BQ0YsSUFBSyxZQUNIRixVQUFVRyxVQUFZRixRQUFRamxCLElBQzlCZ2xCLFVBQVVFLFNBQVlwUSxJQUFJelIsT0FBT3dDLE9BQU8saUJBQWlCcWYsV0FBWSxFQUNyRSxNQUNGLElBQUssUUFDSEYsVUFBVTVZLE1BQVE2WSxRQUFRN1ksTUFDMUI0WSxVQUFVRSxVQUFhcFEsSUFBSXpSLE9BQU93QyxPQUFPLGlCQUFpQnFmLFdBQVksS0FBV0QsUUFBUUcsU0FDekYsTUFDRixJQUFLLE9BQ0hKLFVBQVU1YSxLQUFPNmEsUUFBUTdhLEtBQ3pCNGEsVUFBVUUsVUFBYXBRLElBQUl6UixPQUFPd0MsT0FBTyxpQkFBaUJxZixXQUFZLEtBQVdELFFBQVFHLFNBRzdGLE9BQU9sTixVQUFVckQsT0FBT21RLFVBQzFCLENBR0Esd0JBQWFLLEVBQWEsSUFBSyxNQUFPLEtBQU0sU0FBYyxDQUFDLEdBQ3pELE1BQU1KLGNBQWdCM0UsaUJBQWlCZ0MsV0FBVyxDQUFFaGQsS0FBTWlkLE9BQU8sSUFDakUsSUFBSzBDLFFBQ0gsTUFBTyxDQUFDLEVBRVYsTUFBTTdLLFlBQWNrRyxpQkFBaUJ5RSxTQUFTLENBQUVqUSxJQUFLbVEsVUFDakQ5RCxVQUNGL0csTUFBTStHLFFBQVVBLGVBRVovRyxNQUFNa0wsU0FBUyxDQUNuQkMsVUFBVSxJQUVaLE1BQU0zRSxRQUFVLENBQUMsRUFFakIsT0FEQUEsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0J2RyxNQUFNMkgsYUFDMUVuQixPQUNULENBR0EsZ0NBQWFNLEVBQXFCLFVBQVcsSUFBSyxLQUFNLFFBQVMsU0FBWSxTQUNsRCxJQUFkVixZQUNUMUwsSUFBTXJULEtBQUtnZixTQUFTcGYsSUFBSW1mLFlBRzFCLE1BQU02QixTQUFXLENBQUMsRUFDbEIsSUFBSyxNQUFNMUIsU0FBUzdMLEtBQUt6UixPQUFPd0MsT0FBTyxpQkFBaUI2YSxhQUFjLENBQ3BFLE1BQU1wYixXQUFhZ2IsaUJBQWlCZ0MsV0FBVyxDQUFFaGQsS0FBTXdQLEtBQUt6UixPQUFPd0MsT0FBTyxpQkFBaUI2YSxhQUFhQyxPQUFPcmIsS0FBTWlkLE9BQU8sSUFDeEhqZCxPQUNGK2MsU0FBUzFCLE9BQVNyYixLQUV0QixDQUVBLE1BQU0yQyxLQUFPLENBQUMsRUFDZCxJQUFLLE1BQU0wWSxTQUFTMEIsU0FDbEJwYSxLQUFLRyxTQUFTaWEsU0FBUzFCLE9BQU92SCxPQUFTLEVBQUcsTUFBTyxFQUduRCxNQUFNOVQsV0FBYUQsU0FBUzJDLGFBQWEsQ0FBRUMsT0FFM0MsSUFBSXVkLE9BQVEsRUFDWixJQUFLLE1BQU03RSxTQUFTMEIsU0FBVSxDQUM1QixNQUFNakosTUFBUWhSLFNBQVNpYSxTQUFTMUIsT0FBT3ZILE9BQVMsRUFBRyxJQUM3Q2dCLFlBQWNrRyxpQkFBaUJ5RSxTQUFTLENBQUVqUSxJQUFLbVEsUUFBUzVDLFNBQVMxQixTQUNuRVEsVUFDRi9HLE1BQU0rRyxRQUFVQSxlQUVaL0csTUFBTWtMLFNBQVMsQ0FDbkJoZ0IsS0FBTUEsS0FBSzhULE9BQ1hxTSxRQUFtQixJQUFWRCxZQUF5QnhqQixFQUNsQ3VqQixTQUFVQyxRQUVaNUUsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0J2RyxNQUFNMkgsYUFDakZ5RCxPQUFRLENBQ1YsQ0FFQSxHQUFJMVEsSUFBSWtNLGNBQWN2ZixLQUFLc0csS0FBTSxnQkFDekJ1WSxpQkFBaUJPLHNCQUFzQixDQUFFL0wsSUFBSzhMLGNBQy9DLENBQ0wsTUFBTUcsS0FBT2hWLGNBQWNrVixnQkFDZCxJQUFURixNQUNGdGYsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJDLFNBQVVuQixLQUNWdmUsS0FBTSx1QkFDTmdlLFVBQVcxTCxJQUFJekMsR0FDZnVPLFNBR04sQ0FDRixDQUdBLDhCQUFhUSxFQUFtQixVQUFXLElBQUssTUFBTyxLQUFNLFFBQVMsU0FBWSxTQUN2RCxJQUFkWixZQUNUMUwsSUFBTXJULEtBQUtnZixTQUFTcGYsSUFBSW1mLFlBRzFCLElBQUssTUFBTUcsU0FBU3BGLFdBQytELElBQXRFekcsSUFBSXpSLE9BQU93QyxPQUFPLGtCQUFrQjZhLGFBQWFDLE9BQU9XLFdBQTZCSCxRQUM5RnBkLE9BQU95ZSxPQUFPNUIsY0FBZU4saUJBQWlCK0UsWUFBWSxDQUFFdlEsSUFBSzZMLE1BQU9yYixLQUFNaVcsTUFBTW9GLE9BQVFRLFdBRTVGalUsR0FBR0MsY0FBYzBVLE1BQU0saUNBQWtDLENBQUVsZ0IsVUFBVSxJQUdyRW1ULElBQUlrTSxjQUFjdmYsS0FBS3NHLEtBQU0sZ0JBQ3pCdVksaUJBQWlCTyxzQkFBc0IsQ0FBRS9MLElBQUs4TCxXQUNsQyxJQUFURyxNQUNUdGYsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJDLFNBQVVuQixLQUNWdmUsS0FBTSx1QkFDTmdlLFVBQVcxTCxJQUFJekMsR0FDZnVPLFNBR04sQ0FHQSwyQkFBYThFLEVBQWdCLFVBQVcsSUFBSyxhQUNsQixJQUFkbEYsWUFDVDFMLElBQU1yVCxLQUFLZ2YsU0FBU3BmLElBQUltZixZQUUxQixNQUFNSSxRQUFVLENBQUMsRUFDakIsSUFBSyxNQUFNRCxTQUFTcEYsWUFDWitFLGlCQUFpQnFGLFNBQVMsQ0FBRWhGLE1BQU9yYixLQUFNaVcsTUFBTW9GLE9BQVFDLFVBRy9ELE1BQU1HLE1BQVFqTSxJQUFJa00sY0FBY3ZmLEtBQUtzRyxLQUFNLFdBQW9CZ0UsY0FBY2tWLGVBaUI3RSxPQWZJbGQsT0FBT21FLEtBQUswWSxTQUFTN2IsT0FBUyxJQUM1QitQLElBQUlrTSxjQUFjdmYsS0FBS3NHLEtBQU0sZ0JBQ3pCdVksaUJBQWlCTyxzQkFBc0IsQ0FBRS9MLElBQUs4TCxXQUNsQyxJQUFURyxPQUNUdGYsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJDLFNBQVVuQixLQUNWdmUsS0FBTSx1QkFDTmdlLFVBQVcxTCxJQUFJekMsR0FDZnVPLGdCQUdJLElBQUlQLFNBQVFoQixTQUFXdUcsV0FBV3ZHLFFBQVMsU0FJN0N2SyxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCckQsTUFDdEMsSUFBSyxXQUNIOGQsaUJBQWlCWSxvQkFBb0IsQ0FBRXBNLElBQUtpTSxLQUFNSCxVQUNsRCxNQUNGLElBQUssVUFDSE4saUJBQWlCYyxrQkFBa0IsQ0FBRXRNLElBQUt5RyxNQUFPd0YsS0FBTUgsVUFHN0QsQ0FHQSxxQkFBYStFLEVBQVUsTUFBTyxLQUFNLFVBQ2xDLE1BQU05VyxhQUFleVIsaUJBQWlCZ0MsV0FBVyxDQUFFaGQsS0FBTWlkLE9BQU8sSUFDNUQxVCxTQUNGK1IsUUFBUSx5Q0FBMkNELE1BQVEsY0FBZ0I5UixPQUFPbEQsVUFDbEZpVixRQUFRLHlDQUEyQ0QsTUFBUSxhQUFlOVIsT0FBT2dYLFNBQ2pGakYsUUFBUSx5Q0FBMkNELE1BQVEsU0FBVzlSLE9BQU9pWCxNQUFRLEdBQ3JGbEYsUUFBUSx5Q0FBMkNELE1BQVEsWUFBYzlSLE9BQU9rWCxTQUFXLEVBQzNGbkYsUUFBUSx5Q0FBMkNELE1BQVEsZUFBaUI5UixPQUFPd1YsYUFBYyxFQUNqR3pELFFBQVEseUNBQTJDRCxNQUFRLGNBQWdCOVIsT0FBTzZELFVBQVcsRUFDN0ZrTyxRQUFRLHlDQUEyQ0QsTUFBUSxhQUFlOVIsT0FBTzZELFVBQVcsRUFFaEcsQ0FHQSw0QkFBYXNULEVBQWlCLFNBQXNCLFVBQ2xELFFBQXdCLElBQWIzRCxTQUEwQixDQUNuQ0EsU0FBVyxDQUFDLEVBQ1osSUFBSyxNQUFNMUIsU0FBU2xkLFFBQVFpZCxhQUFjLENBQ3hDLE1BQU1wYixXQUFhZ2IsaUJBQWlCZ0MsV0FBVyxDQUFFaGQsS0FBTTdCLFFBQVFpZCxhQUFhQyxPQUFPcmIsS0FBTWlkLE9BQU8sSUFDaEdGLFNBQVMxQixPQUFTcmIsSUFDcEIsQ0FDRixDQUVBLE1BQU0yZ0IsWUFBYyxDQUFDLEVBQ2ZDLGlCQUFtQixDQUFDLEVBQzFCLElBQUssTUFBTXZGLFNBQVMwQixTQUFVLENBQzVCLElBQUk4RCxTQUFXLEdBQ2YsT0FBUTlELFNBQVMxQixPQUFPeUYsU0FBU3JoQixRQUMvQixLQUFLLEVBQ0gsR0FBSXNkLFNBQVMxQixPQUFPeUYsU0FBUyxLQUFPM2tCLEtBQUtzRyxLQUFLc0ssR0FBSSxDQUNoRDhULFNBQVc5RCxTQUFTMUIsT0FBT3lGLFNBQVMsR0FDcEMsS0FDRixDQUVGLEtBQUssRUFDSEQsU0FBVzFrQixLQUFLc0csS0FBS3NLLEdBQ3JCLE1BQ0YsUUFDRTVPLFFBQVFpZCxhQUFhQyxPQUFPMEYsU0FBVSxFQUNKLE1BQTlCaEUsU0FBUzFCLE9BQU9oVixZQUNsQnVhLGlCQUFpQnZGLE9BQVMwQixTQUFTMUIsT0FBT3JiLE1BSS9CLEtBQWI2Z0IsV0FDR3BpQixPQUFPQyxVQUFVQyxlQUFlakgsS0FBS2lwQixZQUFhRSxZQUNyREYsWUFBWUUsVUFBWSxDQUFDLEdBRTNCRixZQUFZRSxVQUFVeEYsT0FBU2xkLFFBQVFpZCxhQUFhQyxPQUFPcmIsS0FDM0Q3QixRQUFRaWQsYUFBYUMsT0FBTzBGLFFBQVVGLFNBRTFDLENBRUEsTUFBTUcsYUFBZXZpQixPQUFPeWUsT0FBTyxDQUFFSCxVQUFZNWUsU0FFM0MrRCxTQUFXLENBQ2ZuRSxNQUFPLENBQ0x3QyxLQUFNLENBQ0osZ0JBQWlCcEMsVUFHckJtUixjQVBpQmdRLGVBQWV0RSxpQkFBaUJ1RSxnQkFBZ0JwaEIsUUFBUWpCLE1BQU84akIsZUFTbEYsT0FBUTllLFNBQVNuRSxPQUFPd0MsT0FBTyxrQkFBa0JyRCxNQUMvQyxJQUFLLFVBQ0hnRixTQUFTNE0sUUFBVXJRLE9BQU95ZSxPQUFPaGIsU0FBUzRNLFNBQVcsQ0FBQyxFQUFHLENBQUVvQixNQUFPL1QsS0FBS0MsS0FBS0MsU0FBUywwQkFDckYsTUFDRixJQUFLLFdBQ0g2RixTQUFTNE0sUUFBVXJRLE9BQU95ZSxPQUFPaGIsU0FBUzRNLFNBQVcsQ0FBQyxFQUFHLENBQUVvQixNQUFPelIsT0FBT0osT0FBTzBlLFVBQVUsR0FBR2prQixNQUFNN0QsT0FHdkcsTUFBTXVhLFVBQVluTixZQUFZa04sT0FBT3JOLFVBRS9Cb1osUUFBVSxDQUFDLEVBQ2pCLElBQUssTUFBTUQsU0FBU3VGLHVCQUNaNUYsaUJBQWlCcUYsU0FBUyxDQUFFaEYsTUFBT3JiLEtBQU00Z0IsaUJBQWlCdkYsT0FBUUMsVUFFdEU3YyxPQUFPbUUsS0FBSzBZLFNBQVM3YixPQUFTLFNBQzFCdWIsaUJBQWlCTyxzQkFBc0IsQ0FBRS9MLElBQUs4TCxRQUFTeUIsV0FFL0QsSUFBSyxNQUFNa0UsVUFBVU4sWUFDZk0sU0FBVzlrQixLQUFLc0csS0FBS3NLLElBQ3ZCNVEsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJ6ZixLQUFNLHFCQUNOMGYsU0FBVXFFLE9BQ1YvRixVQUFXMUwsSUFBSXpDLEdBQ2ZrSixNQUFPMEssWUFBWU0sVUFVekIsT0FOSXhpQixPQUFPQyxVQUFVQyxlQUFlakgsS0FBS2lwQixZQUFheGtCLEtBQUtzRyxLQUFLc0ssV0FDeERpTyxpQkFBaUJvRixlQUFlLENBQ3BDNVEsSUFDQXlHLE1BQU8wSyxZQUFZeGtCLEtBQUtzRyxLQUFLc0ssTUFHMUJ5QyxHQUNULENBRUEseUJBQWEwUixFQUFjLE1BQU8sTUFDaEMsR0FBSTFSLElBQUl6UixPQUFPd0MsT0FBTyxrQkFBa0I2YSxhQUFhQyxPQUFPMEYsUUFBa0IsQ0FDNUUsTUFBTXRlLEtBQU90RyxLQUFLZ2xCLE1BQU1wbEIsSUFBSXlULElBQUl6UixNQUFNd0MsS0FBSyxpQkFBaUI2YSxhQUFhQyxPQUFPMEYsU0FDaEYsR0FBSTVrQixLQUFLc0csS0FBSzJFLE9BQVMzRSxPQUFTQSxLQUFLN0MsT0FBUSxDQUMzQyxNQUFNMGIsUUFBVSxDQUNkLENBQUMseUNBQTJDRCxNQUFRLGFBQWEsR0FFbkUsR0FBSTdMLElBQUlrTSxjQUFjdmYsS0FBS3NHLEtBQU0sZ0JBQ3pCdVksaUJBQWlCTyxzQkFBc0IsQ0FBRS9MLElBQUs4TCxjQUMvQyxDQUNMLE1BQU1HLEtBQU9oVixjQUFja1YsZ0JBQ2QsSUFBVEYsTUFDRnRmLEtBQUt1Z0IsT0FBT0MsS0FBSyxjQUFlLENBQzlCQyxTQUFVbkIsS0FDVnZlLEtBQU0sdUJBQ05nZSxVQUFXMUwsSUFBSXpDLEdBQ2Z1TyxTQUdOLENBQ0YsQ0FDRixDQUNGLENBRUEsc0JBQWE4RixDQUFXaG1CLE9BQ3RCQSxNQUFNRSxpQkFDTixNQUFNK2xCLE9BQVNqbUIsTUFBTUksY0FDZjBmLFVBQVltRyxPQUFPM2xCLFFBQVEsb0JBQW9CRSxRQUFRc2YsVUFDdkR4Z0IsSUFBTTJtQixPQUFPemxCLFFBQVFsQixJQUMzQixJQUFJM0YsTUFBUXNzQixPQUFPemxCLFFBQVE3RyxNQUMzQixHQUFJbW1CLFdBQWF4Z0IsSUFBSyxDQUNwQixHQUFJMm1CLE9BQU94VCxVQUFVeVQsU0FBUyxvQkFBc0JubEIsS0FBS3NHLEtBQUsyRSxLQUM1RCxPQUVGLE1BQU1vSSxJQUFNclQsS0FBS2dmLFNBQVNwZixJQUFJbWYsV0FDOUIsUUFBeUQsSUFBOUMxTCxJQUFJelIsT0FBT3dDLE9BQU8sbUJBQW1CN0YsTUFBd0I4VSxJQUFJa00sY0FBY3ZmLEtBQUtzRyxLQUFNLFVBQVcsTUFDekYsSUFBVjFOLFFBQ1RBLE9BQVN5YSxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCN0YsTUFFM0MsTUFBTTRnQixRQUFVLENBQ2QsQ0FBQyw0QkFBOEI1Z0IsS0FBTTNGLE9BRXZDLE9BQVEyRixLQUNOLElBQUssb0JBQ0g0Z0IsUUFBUSwrQ0FBaUR2bUIsTUFDekQsTUFDRixJQUFLLG9CQUNIdW1CLFFBQVEsK0NBQWlEdm1CLFlBR3ZEaW1CLGlCQUFpQk8sc0JBQXNCLENBQUUvTCxJQUFLOEwsU0FDdEQsQ0FDRixDQUNGLENBRUEscUJBQWFpRyxDQUFVbm1CLE9BQ3JCQSxNQUFNRSxpQkFDTixNQUFNK2xCLE9BQVNqbUIsTUFBTUksY0FDZlEsT0FBU3FsQixPQUFPemxCLFFBQVFJLE9BQ3hCa2YsVUFBWW1HLE9BQU8zbEIsUUFBUSxvQkFBb0JFLFFBQVFzZixVQUN2REcsTUFBUWdHLE9BQU96bEIsUUFBUXlmLE1BQzdCLEdBQUlILFVBQVcsQ0FDYixNQUFNMUwsSUFBTXJULEtBQUtnZixTQUFTcGYsSUFBSW1mLFdBQzlCLFFBQW1CLElBQVIxTCxJQUNULFFBQXFCLElBQVY2TCxZQUE0RixJQUE1RDdMLElBQUl6UixPQUFPd0MsT0FBTyxrQkFBa0I2YSxhQUFhQyxPQUF3QixDQUNsSCxNQUFNdmlCLFlBQWNpTSxTQUFTeUssSUFBSXpSLE1BQU13QyxLQUFLLGlCQUFpQjZhLGFBQWFDLE9BQU9yYixLQUFLdUwsTUFBTSxLQUFLLElBQ2pHLElBQUt6UyxRQUFVQSxNQUFNNGlCLGNBQWN2ZixLQUFLc0csS0FBTSxVQUU1QyxZQURBbUYsR0FBR0MsY0FBYzBVLE1BQU0sOEJBQStCLENBQUVsZ0IsVUFBVSxJQUdwRSxPQUFRTCxRQUNOLElBQUssaUJBQ0hnZixpQkFBaUJrRyxhQUFhLENBQzVCN0YsTUFDQTdMLE1BRUYsTUFDRixJQUFLLGNBQ0h3TCxpQkFBaUJvRixlQUFlLENBQzlCNVEsSUFDQXlHLE1BQU8sQ0FBRSxDQUFDb0YsT0FBUTdMLElBQUl6UixNQUFNd0MsT0FBTyxpQkFBaUI2YSxhQUFhQyxPQUFPcmIsUUFFMUUsTUFDRixJQUFLLFdBQ0hnYixpQkFBaUJlLFlBQVksQ0FDM0JWLE1BQ0FhLE1BQU9tRixPQUFPemxCLFFBQVFzZ0IsTUFDdEJELFdBQVlvRixPQUFPemxCLFFBQVFxZ0IsV0FDM0J6TSxNQUVGLE1BQ0YsSUFBSyxjQUNId0wsaUJBQWlCQyxXQUFXLENBQzFCSSxNQUNBN0wsTUFFRixNQUNGLElBQUssT0FDSHdMLGlCQUFpQlEsV0FBVyxDQUMxQkgsTUFDQTdMLE1BSVIsTUFBTyxRQUFnRSxJQUFyREEsSUFBSXpSLE9BQU93QyxPQUFPLGtCQUFrQjZhLGFBQThCLENBQ2xGLElBQUlvRyxNQUFPLEVBQ1gsSUFBSyxNQUFNbkcsU0FBUzdMLElBQUl6UixNQUFNd0MsS0FBSyxpQkFBaUI2YSxhQUFjLENBRWhFLFVBRG9CclcsU0FBU3lLLElBQUl6UixNQUFNd0MsS0FBSyxpQkFBaUI2YSxhQUFhQyxPQUFPcmIsS0FBS3VMLE1BQU0sS0FBSyxLQUN2Rm1RLGNBQWN2ZixLQUFLc0csS0FBTSxVQUFXLENBQzVDK2UsTUFBTyxFQUNQLEtBQ0YsQ0FDRixDQUNBLElBQUtBLEtBRUgsWUFEQTVaLEdBQUdDLGNBQWMwVSxNQUFNLDhCQUErQixDQUFFbGdCLFVBQVUsSUFHcEUsT0FBUUwsUUFDTixJQUFLLFlBQ0gsR0FBNkMsYUFBekN3VCxJQUFJelIsTUFBTXdDLEtBQUssaUJBQWlCckQsS0FBcUIsQ0FDdkQsTUFBTW9lLFFBQVUsQ0FBQyxFQUNqQk4saUJBQWlCWSxvQkFBb0IsQ0FBRXBNLElBQUs4TCxTQUM5QyxDQUNBLE1BQ0YsSUFBSyxTQUNITixpQkFBaUJvRyxVQUFVaG1CLE9BR2pDLENBRUosQ0FDRixDQUVBLDhCQUFhcW1CLENBQW1CbHNCLElBQUt1akIsS0FBTTNVLE1BQ3pDLE1BQU11ZCxVQUFZLENBQ2hCQyxHQUFJeGxCLEtBQUtzRyxLQUFLMkUsTUFFaEIsSUFBSyxNQUFNaVUsU0FBUzlsQixJQUFJd0ksT0FBT3dDLE9BQU8sa0JBQWtCNmEsYUFBYyxDQUNwRSxNQUFNdGlCLFlBQWNpTSxTQUFTeFAsSUFBSXdJLE1BQU13QyxLQUFLLGlCQUFpQjZhLGFBQWFDLE9BQU9yYixLQUFLdUwsTUFBTSxLQUFLLElBQ2pHbVcsVUFBVXJHLE9BQVN2aUIsT0FBTzRpQixjQUFjdmYsS0FBS3NHLEtBQU0sWUFBYSxDQUNsRSxDQUNBaWYsVUFBVUUsSUFBTW5qQixPQUFPSixPQUFPcWpCLFdBQVd4c0IsUUFBTytwQixHQUFLQSxJQUFHeGYsT0FBUyxFQUNqRSxJQUFLLE1BQU0vRSxPQUFPZ25CLFVBQ1hBLFVBQVVobkIsS0FHYm9lLEtBQUt2YSxLQUFLLGdCQUFrQjdELEtBQUttbkIsU0FGakMvSSxLQUFLdmEsS0FBSyxpQkFBbUI3RCxLQUFLbW5CLFNBS3RDL0ksS0FBS0MsR0FBRyxRQUFTLDJDQUE0Q2lDLGlCQUFpQnVHLFNBQVN6cEIsS0FBSytHLE9BQzVGaWEsS0FBS0MsR0FBRyxRQUFTLG9DQUFxQ2lDLGlCQUFpQnVHLFNBQVN6cEIsS0FBSytHLE9BQ3JGaWEsS0FBS0MsR0FBRyxRQUFTLHFDQUFzQ2lDLGlCQUFpQm9HLFVBQVV0cEIsS0FBSytHLE9BQ3ZGaWEsS0FBS0MsR0FBRyxRQUFTLDhCQUErQmlDLGlCQUFpQm9HLFVBQVV0cEIsS0FBSytHLE1BQ2xGLENBRUEscUJBQWF1ZCxDQUFVMEYsWUFDckIsT0FBSUEsV0FBV3BkLE1BQU0sZUFDSnZJLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU1DLFVBQVVILGVBQWUsSUFBTyxLQUVuRUEsV0FBVzVhLFFBQVEsTUFBUSxRQUNoQm5DLFNBQVMrYyxZQUVqQjNsQixLQUFLcVAsT0FBT3pQLElBQUkrbEIsYUFBZSxJQUN4QyxDQUVBLHVCQUFhOUUsRUFBWSxLQUFNLE9BQVUsRUFBSSxZQUFnQixLQUMzRCxNQUFNdFksTUFBUTFFLEtBQUswRSxNQUFNLG9GQUN6QixHQUFJQSxNQUFPLENBQ1QsTUFBTVosV0FBYVksTUFBTXZCLE9BQU8rZSxHQUFLLElBQUlyYixjQUFjMEUsTUFBTSxLQUN2RHVJLE1BQVFoUixTQUFTZ0IsVUFBVXZGLE1BQUsyakIsR0FBS0EsRUFBRXhkLE1BQU0sZ0JBQWlCLEVBQUcsSUFDakV5USxXQUFhclIsVUFBVXZGLE1BQUsyakIsR0FBS0EsRUFBRXhkLE1BQU0sV0FDekNtWCxRQUFVL1gsVUFBVTVPLFFBQU9ndEIsR0FBVyxNQUFOQSxJQUFXemlCLE9BQVMsRUFHcERzZCxTQUFXLENBQ2Y3ZixLQUFNd0gsTUFBTXZCLE9BQU92QixFQUNuQmxILElBQUtnSyxNQUFNdkIsT0FBTzRLLEVBQ2xCK0YsTUFDQXFCLFdBQStDLE9BQWpDQSxZQUFjLElBQUl0RSxXQUFxQitCLFVBQVV1UCxnQkFBZ0JDLFFBQVdqTixXQUFhclMsU0FBU3FTLFdBQVksSUFBK0QsWUFBeERoWixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwwQkFBMEM2VyxVQUFVdVAsZ0JBQWdCQyxRQUFVeFAsVUFBVXVQLGdCQUFnQnRQLFFBQ3JRZ0osU0FLRixJQUhLblgsTUFBTXZCLE9BQU81SCxHQUFLOG1CLGFBQStCLEtBQWhCQSxjQUNwQzNkLE1BQU12QixPQUFPNUgsRUFBSThtQixZQUFjLEtBRTdCM2QsTUFBTXZCLE9BQU81SCxFQUFHLENBQ2xCLE1BQU16QyxZQUFja2lCLGlCQUFpQm9CLFNBQVMxWCxNQUFNdkIsT0FBTzVILEVBQUUwaUIsT0FBTyxFQUFHdlosTUFBTXZCLE9BQU81SCxFQUFFa0UsT0FBUyxJQUMvRixJQUFLM0csTUFDSCxPQUFPLEtBRVRpa0IsU0FBU2prQixNQUFRQSxNQUNqQmlrQixTQUFTK0QsU0FBVzNrQixLQUFLZ2xCLE1BQU1qc0IsUUFBT290QixJQUFNQSxFQUFFbGIsTUFBUTJWLFNBQVNqa0IsTUFBTTRpQixjQUFjNEcsRUFBRyxZQUFXemYsS0FBSXlmLElBQWMsQ0FBRXZWLEdBQUl1VixFQUFFdlYsR0FBSW5OLE9BQVEwaUIsRUFBRTFpQixXQUNySW1kLFNBQVMrRCxTQUFTcmhCLE9BQVMsSUFDN0JzZCxTQUFTK0QsU0FBVy9ELFNBQVMrRCxTQUFTNXJCLFFBQU9MLEdBQUtBLEVBQUUrSyxTQUFRaUQsS0FBSWhPLEdBQUtBLEVBQUVrWSxLQUN0QyxJQUE3QmdRLFNBQVMrRCxTQUFTcmhCLFNBQ3BCc2QsU0FBUytELFNBQVcsQ0FBQyxVQUFXLFNBR3RDLEtBQU8sQ0FDTCxNQUFNaG9CLFlBQWNzZixrQkFBa0I3SSxTQUN0QyxJQUFLelcsTUFFSCxPQURBOE8sR0FBR0MsY0FBY3VLLEtBQUssNkJBQThCLENBQUUvVixVQUFVLElBQ3pELEtBRVQwZ0IsU0FBU2prQixNQUFRQSxNQUNacUQsS0FBS3NHLEtBQUsyRSxNQUdiMlYsU0FBUytELFNBQVcza0IsS0FBS2dsQixNQUFNanNCLFFBQU9vdEIsSUFBTUEsRUFBRWxiLE1BQVEyVixTQUFTamtCLE1BQU00aUIsY0FBYzRHLEVBQUcsWUFBV3pmLEtBQUl5ZixJQUFjLENBQUV2VixHQUFJdVYsRUFBRXZWLEdBQUluTixPQUFRMGlCLEVBQUUxaUIsV0FDckltZCxTQUFTK0QsU0FBU3JoQixPQUFTLElBQzdCc2QsU0FBUytELFNBQVcvRCxTQUFTK0QsU0FBUzVyQixRQUFPTCxHQUFLQSxFQUFFK0ssU0FBUWlELEtBQUloTyxHQUFLQSxFQUFFa1ksS0FDdEMsSUFBN0JnUSxTQUFTK0QsU0FBU3JoQixTQUNwQnNkLFNBQVMrRCxTQUFXLENBQUMsVUFBVyxXQU5wQy9ELFNBQVMrRCxTQUFXLENBQUMza0IsS0FBS3NHLEtBQUtzSyxHQVVuQyxDQUtBLE9BSkFnUSxTQUFTL2MsS0FBTytjLFNBQVNqa0IsTUFBTTBELEtBQU8sSUFBTXVnQixTQUFTN2YsS0FBTyxJQUFNNmYsU0FBU3JpQixLQUFPcWlCLFNBQVNqSixNQUFRLEVBQUksSUFBTWlKLFNBQVNqSixNQUFTaUosU0FBU2pKLE1BQVEsRUFBSSxLQUFPaUosU0FBU2pKLE1BQVEsS0FBdUIsSUFBZnFCLFdBQW1CLEtBQVFBLFdBQWEsSUFBTXJTLFNBQVNxUyxXQUFZLElBQU0sSUFDN1A0SCxTQUFTcEMsU0FBWW9DLFNBQVNqa0IsaUJBQWlCNGhCLGNBQWdCcUMsU0FBU2prQixNQUFNb1ksUUFBUUMsSUFBTTRMLFNBQVNqa0IsTUFBTTZoQixTQUMzR29DLFNBQVMxVyxVQUFZLElBQ3JCMFcsU0FBU3dELFNBQVcsSUFDWnhELFNBQVM3ZixNQUNmLElBQUssaUJBSUgsR0FIQTZmLFNBQVMxVyxVQUFZSSxjQUFjOGIsdUJBQXVCeEYsU0FBU3JpQixNQUFNOG5CLE9BQVMsSUFDbEZ6RixTQUFTd0QsU0FBVzlaLGNBQWM4Yix1QkFBdUJ4RixTQUFTcmlCLE1BQU13QixPQUFTLElBQ2pGNmdCLFNBQVMwRCxTQUFXMUQsU0FBU2prQixpQkFBaUI0aEIsY0FBZ0JxQyxTQUFTamtCLE1BQU1BLE1BQVFpa0IsU0FBU2prQixPQUFPOEIsUUFBUTZuQixnQkFBZ0IxRixTQUFTcmlCLE1BQU0zRixPQUFTLEVBQzFILE1BQXZCZ29CLFNBQVMxVyxVQUNYLE9BQU8sS0FFVCxNQUNGLElBQUssWUFDSCxPQUFRMFcsU0FBU3JpQixLQUNmLElBQUssTUFDSHFpQixTQUFTMVcsVUFBWWxLLEtBQUtDLEtBQUtDLFNBQVMsYUFDeEMwZ0IsU0FBU3dELFNBQVdwa0IsS0FBS0MsS0FBS0MsU0FBUyxhQUN2QyxNQUNGLElBQUssTUFDSDBnQixTQUFTMVcsVUFBWWxLLEtBQUtDLEtBQUtDLFNBQVMsWUFDeEMwZ0IsU0FBU3dELFNBQVdwa0IsS0FBS0MsS0FBS0MsU0FBUyxlQUN2QyxNQUNGLFFBQ0UsT0FBTyxLQUVYMGdCLFNBQVMwRCxTQUFXMUQsU0FBU2prQixpQkFBaUI0aEIsY0FBZ0JxQyxTQUFTamtCLE1BQU1BLE1BQVFpa0IsU0FBU2prQixPQUFPOEIsUUFBUUMsUUFBUWtpQixTQUFTcmlCLE1BQU0zRixPQUFTLEVBQzdJLE1BQ0YsSUFBSyxRQUNILElBQUtrb0IsTUFBTyxDQUNWLE1BQU15RixhQUFnQjNGLFNBQVNqa0IsaUJBQWlCNGhCLGNBQWdCcUMsU0FBU2prQixNQUFNQSxNQUFRaWtCLFNBQVNqa0IsT0FBTzZwQixhQUFhNUYsU0FBU3JpQixJQUFLLFNBQzlIZ29CLE9BQU9qakIsU0FDVHNkLFNBQVNqVyxNQUFRNGIsT0FBTyxHQUN4QjNGLFNBQVMxVyxVQUFZcWMsT0FBTyxHQUFHcmMsVUFDL0IwVyxTQUFTd0QsU0FBV21DLE9BQU8sR0FBR3JjLFVBQzlCMFcsU0FBUytDLFNBQVk0QyxPQUFPLEdBQUc5bkIsT0FBTzhLLFlBQVkzUCxPQUFRLEVBQzFEZ25CLFNBQVMwRCxRQUFVaUMsT0FBTyxHQUFHM3RCLE1BQzdCZ29CLFNBQVNnQyxXQUFhMkQsT0FBTyxHQUFHdFYsUUFDaEMyUCxTQUFTM1AsUUFBVXNWLE9BQU8sR0FBR3RWLFFBRWpDLENBQ0EsTUFDRixJQUFLLE9BQ0gsSUFBSzZQLE1BQU8sQ0FDVixNQUFNalEsWUFBZStQLFNBQVNqa0IsaUJBQWlCNGhCLGNBQWdCcUMsU0FBU2prQixNQUFNQSxNQUFRaWtCLFNBQVNqa0IsT0FBTzZwQixhQUFhNUYsU0FBU3JpQixJQUFLLFVBQ2pJLEdBQUlzUyxNQUFNdk4sT0FBUSxDQUNoQnNkLFNBQVNqWSxLQUFPa0ksTUFBTSxHQUN0QitQLFNBQVMxVyxVQUFZMkcsTUFBTSxHQUFHM0csVUFDOUIwVyxTQUFTd0QsU0FBV3ZULE1BQU0sR0FBRzNHLFVBQzdCMFcsU0FBU2dDLFdBQWEvUixNQUFNLEdBQUdwUyxPQUFPOEssWUFBWWhQLE9BQVEsRUFDMURxbUIsU0FBUzZGLFVBQVcsRUFDcEIsTUFBTXhQLFFBQVVwRyxNQUFNLEdBQUdwUyxPQUFPa00sTUFBTWtHLE1BQU0sR0FBRy9FLHFCQUF1QixhQUFlLFFBQVE4RSxHQUM3RixHQUFJcUcsUUFBUyxDQUNYLE1BQU10TSxPQUFTaVcsU0FBU2prQixpQkFBaUI0aEIsY0FBZ0JxQyxTQUFTamtCLE1BQU1BLE1BQVFpa0IsU0FBU2prQixPQUFPa1UsTUFBTXpPLE1BQUsxSixHQUFLQSxFQUFFa1ksS0FBT3FHLFVBQ3pIMkosU0FBU3lELEtBQU8sQ0FBQzFaLE1BQU03UixNQUN2QjhuQixTQUFTMEQsUUFBVTNaLE1BQU0vUixNQUN6QmdvQixTQUFTK0MsU0FBWWhaLE1BQU1sTSxPQUFPOEssWUFBWTNQLE9BQVEsQ0FDeEQsQ0FDRixDQUNGLEVBR0osT0FBT2duQixRQUNULENBQ0EsT0FBTyxJQUNULENBRUEsc0JBQU93QyxDQUFpQnJpQixNQUN0QixPQUFRQSxNQUNOLElBQUssVUFDSCxNQUFPLG1EQUNULElBQUssY0FDTCxJQUFLLGNBQ0wsSUFBSyxXQUNILE1BQU8sb0RBRVgsT0FBTyxJQUNULENBRUEsK0JBQWEybEIsQ0FBb0Ixa0IsU0FHL0IsSUFBSzZjLGlCQUFpQnVFLGdCQUFnQnBoQixRQUFRakIsTUFDNUMsT0FBTyxLQUdULElBQUk0bEIsT0FBU3JrQixPQUFPeWUsT0FBTyxDQUN6QmhnQixLQUFNLEdBQ04waUIsVUFBVSxFQUNWbUQsb0JBQW9CLEVBQ3BCMUYsbUJBQW1CLEVBQ25CTyxVQUFVLEVBQ1ZvRixZQUFZLEVBQ1o1SCxhQUFjLENBQUMsRUFDZnlDLFVBQVcsSUFDVjFmLFNBRUgsT0FBUTJrQixPQUFPNWxCLE1BQ2IsSUFBSyxVQUNINGxCLE9BQVNya0IsT0FBT3llLE9BQU8sQ0FDckIwQyxVQUFVLEVBQ1ZqQyxPQUFPLEVBQ1BlLGlCQUFpQixFQUNqQkgsbUJBQW1CLEVBQ25CQyxtQkFBbUIsRUFDbkJMLG1CQUFtQixFQUNuQjhFLG1CQUFtQixHQUNsQkgsUUFDSCxNQUNGLElBQUssY0FDTCxJQUFLLGNBQ0wsSUFBSyxXQUNIQSxPQUFTcmtCLE9BQU95ZSxPQUFPLENBQ3JCUSxTQUEyQixnQkFBaEJvRixPQUFPNWxCLEtBQXlCLE1BQXlCLGdCQUFoQjRsQixPQUFPNWxCLEtBQXlCLE1BQVEsR0FDNUZtZixVQUFXLEdBQ1hpQixXQUFXLEVBQ1hDLFdBQVcsRUFDWDJGLFdBQVcsR0FDVkosUUFDSEEsT0FBTzVsQixLQUFPLFdBSWxCLE1BQU02ZixTQUFXLENBQUMsRUFDbEIsSUFBSXBkLE1BQVEsRUFDWixJQUFLLE1BQU02RCxVQUFVckYsUUFBUWdsQixlQUFnQixDQUMzQyxNQUFNOUgsTUFBUSxJQUFNN1gsT0FDZHhELFdBQWFnYixpQkFBaUJnQyxXQUFXLENBQUVoZCxLQUFNN0IsUUFBUWdsQixlQUFlM2YsUUFBU3laLE9BQU8sRUFBTW9GLFlBQWFTLE9BQU96RyxXQUFhLEtBQ3JJLElBQUtyYyxLQUNILE9BQU8sS0FFVCxHQUFvQixhQUFoQjhpQixPQUFPNWxCLEtBQXFCLENBQzlCLEdBQXlCLEtBQXJCNGxCLE9BQU96RyxXQUFvQnlHLE9BQU96RyxZQUFjcmMsS0FBS2xILE1BQU0wRCxLQUk3RCxPQURBb0wsR0FBR0MsY0FBYzBVLE1BQU0sNENBQTZDLENBQUVsZ0IsVUFBVSxJQUN6RSxLQUhQeW1CLE9BQU96RyxVQUFZcmMsS0FBS2xILE1BQU0wRCxJQUtsQyxDQWNBLEdBYkF1Z0IsU0FBUzFCLE9BQVNyYixLQUNsQjhpQixPQUFPMUgsYUFBYUMsT0FBUyxDQUMzQnJiLEtBQU1BLEtBQUtBLEtBQ1hvakIsU0FBMkIsYUFBaEJOLE9BQU81bEIsS0FDbEI2akIsU0FBUyxFQUNUMWEsVUFBV3JHLEtBQUtxRyxVQUNoQmthLFNBQVV2Z0IsS0FBS3VnQixTQUNmRSxRQUFTemdCLEtBQUt5Z0IsUUFDZEQsS0FBTSxHQUNOekIsWUFBWSxFQUNaVixXQUFXLEVBQ1h1RSxVQUFVLEdBR0wsWUFEQ0UsT0FBTzVsQixLQUVYNGxCLE9BQU8xSCxhQUFhQyxPQUFTNWMsT0FBT3llLE9BQU8sQ0FDekNvQixXQUFzQixJQUFWM2UsTUFDWm1mLFVBQVUsRUFDVm5CLE9BQU8sR0FDTm1GLE9BQU8xSCxhQUFhQyxRQUszQnlILE9BQU9qRixVQUFVOW5CLEtBQUtzbEIsT0FDdEIxYixPQUNGLENBQ0EsR0FBb0IsWUFBaEJtakIsT0FBTzVsQixNQUF1RCxJQUFqQ3VCLE9BQU9tRSxLQUFLbWEsVUFBVXRkLE9BRXJELE9BREFtSSxHQUFHQyxjQUFjMFUsTUFBTSwyQ0FBNEMsQ0FBRWxnQixVQUFVLElBQ3hFLEtBR1QsVUFET3ltQixPQUFPSyxlQUNWaG5CLEtBQUtzRyxLQUFLMkUsS0FDWixPQUFPNFQsaUJBQWlCMEYsZ0JBQWdCLENBQUUzRCxTQUFVNWUsUUFBUzJrQixTQUN4RCxDQUNMLE1BQU1ySCxLQUFPaFYsY0FBY2tWLGVBQzNCLE9BQWEsSUFBVEYsS0FFSyxNQUVUdGYsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWUsQ0FBRXpmLEtBQU0sb0JBQXFCMGYsU0FBVW5CLEtBQU10ZCxRQUFTMmtCLFVBQy9FLEVBQ1QsQ0FDRixFQ2g5QkssTUFBTU8sY0FDWCxXQUFBbmYsQ0FBYStMLFNBQVcsS0FBTXFULGFBQWMsR0FDMUN6a0IsS0FBS29SLFNBQVdBLFNBQ2hCcFIsS0FBS3lrQixZQUFjQSxXQUNyQixDQUVBLHNCQUFJQyxHQUNGLE9BQU9wbkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQ25DLENBRUEsV0FBSXluQixHQUNGLE9BQUsza0IsS0FBS3FCLGVBQ054RCxJQUFjbUMsS0FBSzRrQixXQUNyQjVrQixLQUFLNGtCLFNBQTZCLGNBQWxCNWtCLEtBQUtxQixVQUVoQnJCLEtBQUs0a0IsVUFKZSxJQUs3QixDQUVBLFdBQUlELENBQVM5WSxHQUNYN0wsS0FBSzRrQixTQUFXL1ksQ0FDbEIsQ0FFQSxZQUFJeEssR0FFRixPQURLckIsS0FBSzZrQixZQUFXN2tCLEtBQUs2a0IsVUFBWXZuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUN6RDhDLEtBQUs2a0IsU0FDZCxDQUVBLFlBQUl4akIsQ0FBVXdLLEdBQ1o3TCxLQUFLNmtCLFVBQVloWixDQUNuQixDQUVBLFNBQUk1UixHQUNGLE9BQUsrRixLQUFLb1IsU0FDSDVCLFdBQVdxQixnQkFBZ0I3USxLQUFLb1IsVUFEWixJQUU3QixDQUVBLFNBQUlILEdBQ0YsT0FBS2pSLEtBQUsvRixNQUNIdVYsV0FBVzBCLGdCQUFnQmxSLEtBQUtvUixVQURmLElBRTFCLENBRUEsUUFBSW5MLEdBQ0YsT0FBS2pHLEtBQUtzVSxPQUNIdFUsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSThDLEtBQUtzVSxRQURSLElBRTNCLENBRUEsVUFBSXdRLEdBQ0YsT0FBTzlrQixLQUFLaUcsSUFDZCxDQUVBLGtCQUFJOGUsR0FDRixNQUFPLElBQUl6bkIsS0FBS3NHLEtBQUtvaEIsUUFDdkIsQ0FFQSxVQUFJQyxHQUNGLE9BQUlqbEIsS0FBS2tsQixZQUFvQmxsQixLQUFLa2xCLFlBQzNCbGxCLEtBQUttbEIsV0FDZCxDQU1BLGVBQUlELEdBY0YsT0FiS2xsQixLQUFLb2xCLGVBQ0pwbEIsS0FBS3FsQixXQUNQcmxCLEtBQUtvbEIsYUFBZTVWLFdBQVcwQixnQkFBZ0JsUixLQUFLcWxCLGFBRXBEcmxCLEtBQUtvbEIsYUFBZXBsQixLQUFLK2tCLGVBQWVPLE1BQ3BDdGxCLEtBQUtvbEIsYUFDUHBsQixLQUFLcWxCLFdBQWEsR0FBR3JsQixLQUFLb2xCLGFBQWF2WSxNQUFNcUIsTUFBTWxPLEtBQUtvbEIsYUFBYWxYLEtBR3JFbE8sS0FBS29sQixhQUFlLE9BSW5CcGxCLEtBQUtvbEIsWUFDZCxDQUVBLGVBQUlELEdBS0YsT0FKS25sQixLQUFLdWxCLGVBQ0p2bEIsS0FBS2tsQixZQUFhbGxCLEtBQUt1bEIsYUFBZXZsQixLQUFLa2xCLFlBQVlqckIsTUFDdEQrRixLQUFLdWxCLGFBQWUvVixXQUFXcUIsZ0JBQWdCN1EsS0FBS3FsQixhQUVwRHJsQixLQUFLdWxCLFlBQ2QsQ0FFQSxhQUFJQyxHQUNGLE9BQUt4bEIsS0FBS2tsQixhQUFnQmxsQixLQUFLbWxCLFlBQ3hCbmxCLEtBQUtxbEIsV0FEdUMsSUFFckQsQ0FFQSxhQUFJSSxHQUNGLFNBQUt6bEIsS0FBS2tsQixjQUFnQmxsQixLQUFLbWxCLFlBRWpDLENBRUEsYUFBSUssQ0FBVzNaLEdBQ2I3TCxLQUFLcWxCLFdBQWF4WixDQUNwQixDQUVBLFVBQUlnWSxHQUNGLE9BQU83akIsS0FBSy9GLE1BQU15ckIsZ0JBQWdCMWxCLEtBQUtzVSxPQUN6QyxDQUVBLGFBQUlxUixHQUNGLE1BQU1qZ0IsSUFBTThKLFdBQVc0QyxtQkFBbUJwUyxLQUFLd2xCLFdBQy9DLE9BQUk5ZixLQUNHLG9DQUNULENBRUEsUUFBSXRQLEdBQ0YsT0FBSTRKLEtBQUtpUixNQUFjalIsS0FBS2lSLE1BQU03YSxLQUMzQjRKLEtBQUsvRixNQUFNN0QsSUFDcEIsQ0FFQSxjQUFJd3ZCLEdBQ0YsT0FBSzVsQixLQUFLaWxCLE9BQ0hqbEIsS0FBS2lsQixPQUFPN3VCLEtBRE0sT0FFM0IsQ0FFQSxZQUFJeXZCLEdBQ0YsTUFBTW5nQixJQUFNOEosV0FBVzRDLG1CQUFtQnBTLEtBQUtvUixVQUMvQyxPQUFJMUwsS0FDRyxvQ0FDVCxDQUVBLFNBQU1vZ0IsQ0FBS2hXLFFBQVNFLE9BQVMsTUFDM0IsTUFBTStWLFlBQWMsQ0FBQyxFQUNyQixJQUFJOVYsUUFDQWpRLEtBQUsvRixPQUNQOHJCLFlBQVk5ckIsTUFBUStGLEtBQUsvRixNQUNyQitGLEtBQUtpUixRQUNQOFUsWUFBWTlVLE1BQVFqUixLQUFLaVIsTUFBTW5DLFVBRWpDbUIsUUFBVXpNLFlBQVkwTSxXQUFXNlYsY0FFakM5VixRQUFVek0sWUFBWTBNLGFBR3hCLE1BRU03TSxTQUFXLENBQ2ZPLE1BSFc1RCxLQUFLL0YsTUFBTTJKLEtBQU81RCxLQUFLL0YsTUFBTTJKLEtBQU90RyxLQUFLc0csTUFHekNzSyxHQUNYK0IsUUFDQUQsT0FDQVMsUUFBU1gsU0FJVCxDQUFDLFNBQVUsYUFBYTlNLFNBQVMxRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxlQUUzRG1HLFNBQVNDLFFBQVVFLFlBQVl3aUIscUJBQXFCLE9BRWhDLGNBQWxCaG1CLEtBQUtxQixXQUEwQmdDLFNBQVNFLE9BQVEsR0FFcERDLFlBQVlrTixPQUFPck4sVUFBVWdFLE1BQUtzSixLQUN6QkEsS0FFWCxFQzVKRixTQUFTc1YsU0FBVXBxQixJQUFLM0YsT0FDdEIsR0FBSTJGLElBQUk4TyxXQUFXLE1BQ2pCLE9BSUYsR0FEZ0IsQ0FBQyxVQUNMM0gsU0FBU25ILEtBQ25CLE9BSUYsTUFEZSxDQUFDLFdBQVksWUFDakJtSCxTQUFTbkgsS0FDWDNGLE1BQU0wbkIsYUFHUjFuQixLQUNULENBRU8sTUFBTWd3QixxQkFBcUIxQixjQUNoQyxXQUFBbmYsQ0FBYStMLFNBQVcsS0FBTStVLFFBQVUsQ0FBQyxFQUFHN21CLFFBQVUsQ0FBQyxHQUNyRGpELE1BQ0UrVSxjQUMrQixJQUF4QjlSLFFBQVFtbEIsYUFDWDJCLFFBQVE5bUIsUUFBUW1sQixjQUd0QjBCLFFBQVFFLFVBQVlGLFFBQVFFLFdBQWEsR0FDekNybUIsS0FBS21tQixRQUFVQSxRQUNmbm1CLEtBQUtWLFFBQVVBLFFBQ1g2bUIsUUFBUXpoQixXQUFhNUksTUFBTUksT0FBT2lxQixRQUFRemhCLGFBQzVDMUUsS0FBS1YsUUFBUWduQixZQUFjcHFCLE9BQU9pcUIsUUFBUXpoQixXQUV4Q3loQixRQUFRN1AsYUFBZXhhLE1BQU1JLE9BQU9pcUIsUUFBUTdQLGVBQzlDdFcsS0FBS1YsUUFBUWluQixjQUFnQnJxQixPQUFPaXFCLFFBQVE3UCxhQUU5Q3RXLEtBQUt3bUIsTUFBUSxDQUFDLENBQ2hCLENBRUEsV0FBSTdCLEdBQ0YsWUFBdUMsSUFBekIza0IsS0FBS1YsUUFBUXFsQixRQUN2QnlCLFFBQVFwbUIsS0FBS1YsUUFBUXFsQixTQUNyQnRvQixNQUFNc29CLE9BQ1osQ0FFQSxjQUFJck8sR0FDRixZQUEwQyxJQUE1QnRXLEtBQUtWLFFBQVFnWCxXQUN2QnRXLEtBQUtWLFFBQVFnWCxXQUNidkMsVUFBVXVQLGdCQUFnQnRQLE9BQ2hDLENBRUEsWUFBSXRQLEdBQ0YsWUFBd0MsSUFBMUIxRSxLQUFLVixRQUFRb0YsU0FDdkIxRSxLQUFLVixRQUFRb0YsU0FDYixDQUNOLENBRUEsaUJBQUkraEIsR0FDRixPQUFLem1CLEtBQUttbUIsUUFBUTVaLFNBQ1hpRCxXQUFXcUIsZ0JBQWdCN1EsS0FBS21tQixRQUFRNVosVUFEWixJQUVyQyxDQUVBLHFCQUFJbWEsR0FDRixTQUNFMW1CLEtBQUt3bUIsTUFBTUcsWUFDVjNtQixLQUFLNG1CLFNBQVNsSSxZQUFhMWUsS0FBSzRtQixTQUFTblEsU0FLOUMsQ0FFQSxrQkFBSW9RLEdBQ0YsT0FBSTdtQixLQUFLd21CLE1BQU1HLFVBQ1QzbUIsS0FBS21tQixRQUFRVyxRQUFVOW1CLEtBQUs0bUIsU0FBU3JHLE9BQy9CemtCLE1BQU1JLE9BQU84RCxLQUFLbW1CLFFBQVFXLFNBRTlCOW1CLEtBQUttbUIsUUFBUVcsT0FEYjVxQixPQUFPOEQsS0FBS21tQixRQUFRVyxRQUd0QjltQixLQUFLbW1CLFFBQVFZLFFBQVUvbUIsS0FBSzRtQixTQUFTckgsT0FDL0J6akIsTUFBTUksT0FBTzhELEtBQUttbUIsUUFBUVksU0FFOUIvbUIsS0FBS21tQixRQUFRWSxPQURiN3FCLE9BQU84RCxLQUFLbW1CLFFBQVFZLFFBR25CLEVBRUYsSUFDVCxDQUVBLG1CQUFJQyxHQUNGLE9BQU9obkIsS0FBSy9GLE1BQU0rc0IsZ0JBQWdCaG5CLEtBQUttbUIsUUFBUUUsVUFDakQsQ0FFQSxzQkFBSVksR0FDRixPQUFPam5CLEtBQUsvRixNQUFNaXRCLG1CQUNoQmxuQixLQUFLbW1CLFFBQVFFLFVBQ2JybUIsS0FBS21tQixRQUFRVyxPQUVqQixDQUVBLGNBQUlLLEdBQ0YsT0FBTyxJQUFJcmxCLEtBQUs5QixLQUFLbW1CLFFBQVFXLE9BQU85VSxZQUFjcFQsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQXFCLGVBQWIsWUFBcUQsQ0FBRWdNLFVBQVUsSUFBUXRJLEtBQ2hMLENBRUEsNEJBQUkya0IsR0FDRixPQUFPcG5CLEtBQUsvRixNQUFNbXRCLHlCQUF5QnBuQixLQUFLbW1CLFFBQVFFLFVBQzFELENBRUEsa0JBQUlnQixHQUNGLE9BQVFybkIsS0FBSy9GLE1BQU1xdEIseUJBQ3JCLENBRUEscUJBQUlDLEdBRUYsT0FBSXZuQixLQUFLL0YsTUFBTXV0QixpQkFLYSxJQUF4QnhuQixLQUFLNm1CLGtCQUdQN21CLEtBQUttbUIsUUFBUUUsV0FJUCxJQUhOcm1CLEtBQUsvRixNQUFNaXRCLG1CQUNUbG5CLEtBQUttbUIsUUFBUUUsVUFDYnJtQixLQUFLbW1CLFFBQVFXLFVBR2Y5bUIsS0FBS3dtQixNQUFNaUIsa0JBQW1CLEdBQ3ZCLElBSVgsQ0FFQSxvQkFBSUMsR0FDRixHQUFJMW5CLEtBQUsybkIsYUFBYyxDQUNyQixHQUFJM25CLEtBQUs0bkIsYUFDUCxNQUFPLEdBQUc1bkIsS0FBSzJuQixnQkFBZ0JycUIsS0FBS0MsS0FBS0MsU0FBUyxpQkFFcEQsR0FBSXdDLEtBQUs2bkIsWUFDUCxNQUFPLEdBQUc3bkIsS0FBSzJuQixnQkFBZ0JycUIsS0FBS0MsS0FBS0MsU0FBUyxlQUV0RCxDQUNBLE9BQU8sSUFDVCxDQUVBLDhCQUFJc3FCLEdBQ0YsT0FBSTluQixLQUFLK25CLFdBQ0F6cUIsS0FBS0MsS0FBSzBXLE9BQU8sOEJBQStCLENBQ3JEL2QsTUFBTzhKLEtBQUsrbkIsYUFHVCxJQUNULENBRUEsa0JBQU1DLENBQWN4QixPQUNsQixPQUFRQSxPQUNOLElBQUssc0JBQ0h4bUIsS0FBS3dtQixNQUFNeUIscUJBQXNCLEVBQ2pDLE1BRUYsSUFBSyw2QkFDSGpvQixLQUFLd21CLE1BQU1BLFFBQVMsRUFDZnhtQixLQUFLdW5CLG9CQUFtQnZuQixLQUFLd21CLE1BQU0wQixRQUFTLEdBQ2pELE1BRUYsSUFBSyx1QkFDR2xvQixLQUFLbW9CLGVBQ1gsTUFFRixJQUFLLDZCQUNIbm9CLEtBQUsybkIsb0JBQXNCLElBQUk3bEIsS0FBSyxRQUFRWCxLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BQ25FekMsS0FBSzRuQixjQUFlLEVBQ3BCNW5CLEtBQUs2bkIsYUFBYyxFQUNuQjduQixLQUFLb29CLGlCQUFtQnBvQixLQUFLL0YsTUFBTW91QixvQkFDakMsRUFDQXJvQixLQUFLMm5CLGNBRVAzbkIsS0FBS3dtQixNQUFNOEIsdUJBQXdCLEVBQ25DdG9CLEtBQUt3bUIsTUFBTStCLG1CQUFvQixFQUMvQixNQUVGLElBQUssNEJBQ0h2b0IsS0FBSzJuQixvQkFBc0IsSUFBSTdsQixLQUFLLFFBQVFYLEtBQUssQ0FBRW1CLE9BQU8sS0FBU0csTUFDbkV6QyxLQUFLNG5CLGNBQWUsRUFDcEI1bkIsS0FBSzZuQixhQUFjLEVBQ25CN25CLEtBQUtvb0IsaUJBQW1CcG9CLEtBQUsvRixNQUFNb3VCLG9CQUNqQyxFQUNBcm9CLEtBQUsybkIsY0FFUDNuQixLQUFLd21CLE1BQU04Qix1QkFBd0IsUUFDN0J0b0IsS0FBS3dvQixrQkFDWCxNQUVGLElBQUssMEJBQ0d4b0IsS0FBSy9GLE1BQU13dUIsZUFBZWwwQixLQUFLNEYsT0FBT0MsbUJBQ3RDNEYsS0FBS3dvQixrQkFDWCxNQUVGLElBQUssaUJBQ0h4b0IsS0FBS3dtQixNQUFNa0Msc0JBQXVCLEVBQ2xDMW9CLEtBQUsrbkIsV0FBYSxFQUNsQixNQUVGLElBQUssdUJBQXdCLENBQzNCLElBQUlZLGFBQWUsRUFDZDNvQixLQUFLL0YsTUFBTXF0Qiw0QkFDZHFCLGFBQWUsUUFDVDNvQixLQUFLL0YsTUFBTTJ1QixpQ0FFbkI1b0IsS0FBS3dtQixNQUFNa0Msc0JBQXVCLEVBQ2xDLE1BQU1HLG1CQUFxQjdvQixLQUFLL0YsTUFBTTR1QixtQkFDaENDLFNBQ0pELG1CQUFtQjlzQixPQUFPZ3RCLFlBQVlDLFlBQWMsRUFDbERILDBCQUNJQSxtQkFBbUIzcUIsT0FBTyxDQUM5QixnQ0FBaUM0cUIsU0FBV0gsZUFHaEQzb0IsS0FBSytuQixXQUFhWSxhQUNsQixLQUNGLEVBRUosQ0FFQSxtQkFBTU0sR0FDSmpwQixLQUFLa3BCLFlBQWEsRUFDbEJscEIsS0FBSzRtQixTQUFXLElBQUk3UyxVQUNwQi9ULEtBQUs0bUIsU0FBUzNzQixNQUFRK0YsS0FBS29SLFNBQzNCcFIsS0FBSzRtQixTQUFTNUYsVUFBWSxNQUMxQmhoQixLQUFLNG1CLFNBQVN0USxXQUNadFcsS0FBS1YsUUFBUWluQixlQUFpQnhTLFVBQVV1UCxnQkFBZ0J0UCxRQUMxRGhVLEtBQUs0bUIsU0FBUzVSLGFBQWVoVixLQUFLVixRQUFRZ25CLGFBQWUsUUFDbkR0bUIsS0FBSzRtQixTQUFTekYsU0FBUyxDQUFFQyxVQUFVLElBQ3pDcGhCLEtBQUt3bUIsTUFBTUcsV0FBWSxFQUN2QjNtQixLQUFLd21CLE1BQU0yQywyQkFBNkJucEIsS0FBSzRtQixTQUFTckgsT0FDdER2ZixLQUFLd21CLE1BQU00QyxlQUFnQixFQUMzQnBwQixLQUFLd21CLE1BQU02QyxnQkFBaUIsRUFDNUJycEIsS0FBS3NwQixtQkFBcUJ0cEIsS0FBS3VwQixnQkFBa0J2cEIsS0FBSzZtQixlQUN0RDdtQixLQUFLd3BCLFFBQVV4cEIsS0FBS3lwQixvQkFBb0J6cEIsS0FBS3NwQixtQkFDL0MsQ0FFQSxtQkFBQUcsQ0FBcUJELFNBQ25CLE9BQU94cEIsS0FBSy9GLE1BQU15dkIsa0JBQW9CdG5CLEtBQUswSSxNQUFNMGUsUUFBVSxHQUFLQSxPQUNsRSxDQUVBLGFBQU1HLEdBVUosR0FUQTNwQixLQUFLNG1CLFNBQVcsSUFBSTdTLFVBQ3BCL1QsS0FBSzRtQixTQUFTM3NCLE1BQVErRixLQUFLb1IsU0FDM0JwUixLQUFLNG1CLFNBQVM1RixVQUFZLE1BQzFCaGhCLEtBQUs0bUIsU0FBU3RRLFdBQ1p0VyxLQUFLVixRQUFRaW5CLGVBQWlCeFMsVUFBVXVQLGdCQUFnQnRQLFFBQzFEaFUsS0FBSzRtQixTQUFTNVIsYUFBZWhWLEtBQUtWLFFBQVFnbkIsYUFBZSxRQUNuRHRtQixLQUFLNG1CLFNBQVN6RixTQUFTLENBQUVDLFVBQVUsSUFDekNwaEIsS0FBS3dtQixNQUFNRyxXQUFZLEVBQ3ZCM21CLEtBQUt3bUIsTUFBTTJDLDJCQUE2Qm5wQixLQUFLNG1CLFNBQVNySCxPQUNqRHZmLEtBQUt1bkIsbUJBWUgsR0FBbUMsaUJBQXhCdm5CLEtBQUs2bUIsZUFHckIsR0FGQTdtQixLQUFLd21CLE1BQU00QyxlQUFnQixFQUMzQnBwQixLQUFLdXBCLGdCQUFrQnZwQixLQUFLNm1CLGVBQ3hCN21CLEtBQUttbUIsUUFBUUUsVUFBVyxDQUMxQixNQUFNcGpCLElBQU1qRCxLQUFLL0YsTUFBTWl0QixtQkFDckJsbkIsS0FBS21tQixRQUFRRSxVQUNicm1CLEtBQUttbUIsUUFBUVcsUUFFZjltQixLQUFLc3BCLG1CQUFxQnRwQixLQUFLdXBCLGdCQUMzQnZwQixLQUFLc3BCLG1CQUFxQnJtQixNQUM1QmpELEtBQUtzcEIsbUJBQXFCcm1CLElBQzFCakQsS0FBS3dtQixNQUFNb0QsdUJBQXdCLEVBRXZDLE1BQ0U1cEIsS0FBS3NwQixtQkFBcUJ0cEIsS0FBS3VwQixxQkFFNUIsR0FBSXZwQixLQUFLNG1CLFNBQVNuUSxTQUN2QnpXLEtBQUt3bUIsTUFBTTRDLGVBQWdCLEVBQzNCcHBCLEtBQUt1cEIsZ0JBQWtCLElBQUl6bkIsS0FBSzlCLEtBQUttbUIsUUFBUVcsUUFBVWxvQixRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBcUIsZUFBYixZQUFxRCxDQUFFZ00sVUFBVSxJQUFRdEksTUFDbkx6QyxLQUFLc3BCLG1CQUFxQnRwQixLQUFLL0YsTUFBTWl0QixtQkFDbkNsbkIsS0FBS21tQixRQUFRRSxVQUNicm1CLEtBQUt1cEIsc0JBRUYsR0FBSXZwQixLQUFLbW1CLFFBQVFFLFVBQVcsQ0FDckIsSUFBSXZrQixLQUFLOUIsS0FBSzZtQixnQkFBa0Jqb0IsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQXFCLGVBQWIsWUFBcUQsQ0FBRThZLFVBQVUsSUFBUXBWLE9BQzVKekMsS0FBSy9GLE1BQU1pdEIsbUJBQ3JCbG5CLEtBQUttbUIsUUFBUUUsVUFDYnJtQixLQUFLbW1CLFFBQVFXLFVBR2I5bUIsS0FBS3dtQixNQUFNNEMsZUFBZ0IsRUFDM0JwcEIsS0FBS3NwQixtQkFBcUJ0cEIsS0FBS3VwQixnQkFBa0J2cEIsS0FBS2lELElBQ3REakQsS0FBS3dtQixNQUFNb0QsdUJBQXdCLEVBRXZDLE9BN0NFNXBCLEtBQUt3bUIsTUFBTTBCLFFBQVMsRUFDaEJsb0IsS0FBSy9GLE1BQU11dEIsaUJBQ2J4bkIsS0FBS3dtQixNQUFNcUQscUJBQXNCLEVBQzVCN3BCLEtBQUs0bUIsU0FBU3JILFNBQVF2ZixLQUFLd21CLE1BQU0wQixRQUFTLElBRWpEbG9CLEtBQUt3bUIsTUFBTTRDLGVBQWdCLEVBQzNCcHBCLEtBQUt3bUIsTUFBTXNELGdCQUFpQixFQUM1QjlwQixLQUFLd21CLE1BQU11RCxXQUFZLEVBQ3ZCL3BCLEtBQUt3bUIsTUFBTXdELFVBQVcsRUFDdEJocUIsS0FBS3NwQixtQkFBcUIsRUFDMUJ0cEIsS0FBS3VwQixnQkFBa0IsRUFxQ3pCdnBCLEtBQUt3cEIsUUFBVXhwQixLQUFLeXBCLG9CQUFvQnpwQixLQUFLc3BCLG1CQUMvQyxDQUVBLGlCQUFNVyxHQUNKanFCLEtBQUtrcUIsWUFBYyxJQUFJcG9CLEtBQUssR0FBRzlCLEtBQUs2bUIsd0JBRTlCN21CLEtBQUtrcUIsWUFBWS9vQixLQUFLLENBQUVtQixPQUFPLFVBRS9CcEIsU0FBU2lDLGVBQWVuRCxLQUFLa3FCLGFBRW5DLE1BQU1qbkIsSUFBTWpELEtBQUsvRixNQUFNaXRCLG1CQUNyQmxuQixLQUFLbW1CLFFBQVFFLFVBQ2JybUIsS0FBS21tQixRQUFRVyxRQUdYOW1CLEtBQUtrcUIsWUFBWXpuQixNQUFRUSxNQUMzQmpELEtBQUt3bUIsTUFBTW9ELHVCQUF3QixHQUdyQzVwQixLQUFLdXBCLGdCQUFrQnZwQixLQUFLa3FCLFlBQVl6bkIsTUFDeEN6QyxLQUFLc3BCLG1CQUFxQmxuQixLQUFLYyxJQUFJbEQsS0FBS3VwQixnQkFBaUJ0bUIsS0FDekRqRCxLQUFLd3BCLFFBQVV4cEIsS0FBS3lwQixvQkFBb0J6cEIsS0FBS3NwQixvQkFDN0N0cEIsS0FBS3dtQixNQUFNNEMsZUFBZ0IsQ0FDN0IsQ0FFQSxrQkFBTWpCLEdBS0osU0FKTW5vQixLQUFLL0YsTUFBTWt3QixTQUFTbnFCLEtBQUttbUIsUUFBUUUsVUFBV3JtQixLQUFLd3BCLFNBRW5EeHBCLEtBQUt3cEIsUUFBVSxJQUFHeHBCLEtBQUt3bUIsTUFBTTRELGNBQWUsR0FDaERwcUIsS0FBS3dtQixNQUFNc0QsZ0JBQWlCLEVBQ3hCOXBCLEtBQUsvRixNQUFNb3dCLEtBQU8sRUFRcEIsT0FQQXJxQixLQUFLd21CLE1BQU11RCxXQUFZLEVBQ3ZCL3BCLEtBQUt3bUIsTUFBTStCLG1CQUFvQixFQUUvQnZvQixLQUFLd21CLE1BQU13RCxVQUFXLEVBQ3RCaHFCLEtBQUt3bUIsTUFBTThELG1CQUFvQixPQUUvQnRxQixLQUFLd21CLE1BQU0wQixRQUFTLEdBSWxCbG9CLEtBQUt3cEIsUUFBVSxHQUNqQnhwQixLQUFLd21CLE1BQU11RCxXQUFZLEVBQ25CL3BCLEtBQUsvRixNQUFNc3dCLGdCQUNidnFCLEtBQUt3bUIsTUFBTXdELFVBQVcsRUFDdEJocUIsS0FBS3dtQixNQUFNZ0UsUUFBUyxFQUNwQnhxQixLQUFLd21CLE1BQU1pRSxxQkFBc0IsRUFDakN6cUIsS0FBS3dtQixNQUFNMEIsUUFBUyxFQUNwQmxvQixLQUFLd21CLE1BQU11RCxXQUFZLElBRXZCL3BCLEtBQUt3bUIsTUFBTXdELFVBQVcsRUFDdEJocUIsS0FBS3dtQixNQUFNZ0UsUUFBUyxFQUNwQnhxQixLQUFLd21CLE1BQU1pRSxxQkFBc0IsRUFDakN6cUIsS0FBS3dtQixNQUFNMEIsUUFBUyxJQUd0QmxvQixLQUFLd21CLE1BQU11RCxXQUFZLEVBR3JCL3BCLEtBQUsvRixNQUFNeXdCLGNBQWdCMXFCLEtBQUsvRixNQUFNMHdCLGdCQUV4QzNxQixLQUFLd21CLE1BQU13RCxVQUFXLEVBQ3RCaHFCLEtBQUt3bUIsTUFBTXVELFdBQVksRUFDdkIvcEIsS0FBS3dtQixNQUFNb0UsaUJBQWtCLEVBQzdCNXFCLEtBQUt3bUIsTUFBTXFFLG9CQUFxQixFQUNoQzdxQixLQUFLd21CLE1BQU1pRSxxQkFBc0IsRUFDakN6cUIsS0FBS3dtQixNQUFNc0UsaUJBQWtCLEVBQzdCOXFCLEtBQUt3bUIsTUFBTTBCLFFBQVMsRUFFeEIsQ0FFQSxhQUFNNkMsR0FDSi9xQixLQUFLZ3JCLFNBQVcsSUFBSWpYLFVBQ3BCL1QsS0FBS2dyQixTQUFTL3dCLE1BQVErRixLQUFLb1IsU0FDM0JwUixLQUFLZ3JCLFNBQVNyVSxlQUFpQixNQUMvQjNXLEtBQUtnckIsU0FBUzFVLFdBQ1p0VyxLQUFLVixRQUFRMnJCLGVBQWlCbFgsVUFBVXVQLGdCQUFnQnRQLFFBQzFEaFUsS0FBS2dyQixTQUFTaFcsYUFBZWhWLEtBQUtWLFFBQVE0ckIsYUFBZSxRQUNuRGxyQixLQUFLZ3JCLFNBQVM3SixTQUFTLENBQUVDLFVBQVUsSUFDekNwaEIsS0FBS3dtQixNQUFNdUQsV0FBWSxFQUNuQi9wQixLQUFLZ3JCLFNBQVN6TCxRQUFVdmYsS0FBS3dtQixNQUFNMkUsZUFDckNuckIsS0FBS3dtQixNQUFNd0QsVUFBVyxFQUN0QmhxQixLQUFLd21CLE1BQU1vRSxpQkFBa0IsRUFDN0I1cUIsS0FBS3dtQixNQUFNcUUsb0JBQXFCLEVBQ2hDN3FCLEtBQUt3bUIsTUFBTXNFLGlCQUFrQixJQUU3QjlxQixLQUFLd21CLE1BQU13RCxVQUFXLEVBQ3RCaHFCLEtBQUt3bUIsTUFBTW9FLGlCQUFrQixFQUM3QjVxQixLQUFLd21CLE1BQU1xRSxvQkFBcUIsRUFDaEM3cUIsS0FBS3dtQixNQUFNc0UsaUJBQWtCLEVBQzdCOXFCLEtBQUt3bUIsTUFBTTBCLFFBQVMsRUFFeEIsQ0FFQSxxQkFBTU0sR0FDSnhvQixLQUFLd21CLE1BQU0rQixtQkFBb0IsRUFDM0J2b0IsS0FBS3dtQixNQUFNcUUsMEJBQ1A3cUIsS0FBSy9GLE1BQU1teEIsYUFBYTcyQixLQUFLNEYsT0FBT0UsYUFFNUMyRixLQUFLd21CLE1BQU0wQixRQUFTLENBQ3RCLENBRUEsd0JBQU1tRCxTQUNFcnJCLEtBQUsvRixNQUFNcXhCLGlCQUFpQnRyQixLQUFLbW1CLFFBQVFFLFVBQVcsR0FDckRybUIsS0FBS29uQiwyQkFDUnBuQixLQUFLd21CLE1BQU15QixxQkFBc0IsRUFFckMsQ0FFQSxvQkFBTXNELEdBTUosR0FKSXZyQixLQUFLd21CLE1BQU1HLFlBQ2IzbUIsS0FBS3dyQixpQkFBbUJ4ckIsS0FBSzRtQixTQUFTNkUsWUFBWUMsV0FHaEQxckIsS0FBS2txQixZQUFhLENBQ3BCLE1BQU14dEIsRUFBSThSLGlCQUFpQnhPLEtBQUtrcUIsYUFDaENscUIsS0FBSzJyQixvQkFBc0JqdkIsRUFBRWd2QixTQUMvQixDQUVJMXJCLEtBQUt3bUIsTUFBTXVELFdBQWEvcEIsS0FBS2dyQixXQUMvQmhyQixLQUFLNHJCLGlCQUFtQjVyQixLQUFLZ3JCLFNBQVNTLFlBQVlDLFdBR3BELE1BQU16UixXQUFhd0csZUFBZXlGLGFBQWF0TSxTQUFVNVosTUFDbkQ2ckIsZ0JBQWtCQyxFQUFFQyxVQUFVOVIsTUFBTSxHQUcxQzRSLGdCQUFnQjl1QixRQUFRd1UsT0FBUzVDLE9BQU9DLEtBQUtDLFVBQVU3TyxLQUFNaW1CLFdBRzdELE1BQU0rRixZQUFjMXVCLEtBQUtnZixTQUFTcGYsSUFBSThDLEtBQUtxYyxXQUVyQzFMLFVBQVlxYixZQUFZOXRCLE9BQU8sQ0FDbkN1UyxRQUFTb2IsZ0JBQWdCSCxZQUczQixhQURNM2lCLEdBQUdrakIsS0FBS0MsY0FBY3ZiLEtBQUssR0FDMUJBLEdBQ1QsQ0FFQSxtQkFBV2lKLEdBQ1QsTUFBTyxrREFDVCxDQUVBLG1CQUFPdVMsQ0FBY2hHLFFBQVMxQixhQUFjLEdBQzFDLE1BQU1PLFFBQVUsSUFBSTFuQixLQUFLc0csS0FBS29oQixTQUM5QixHQUFJQSxRQUFRcGtCLE9BQ1YsSUFBSyxNQUFNbUMsS0FBS2lpQixRQUNWamlCLEVBQUU5SSxNQUFNMmMsUUFDVnNQLGFBQWF4VixPQUFPM04sRUFBRTlJLE1BQU1zUyxTQUFVNFosUUFBUyxDQUM3QzFCLGNBR0Z5QixhQUFheFYsT0FBTzNOLEVBQUU5SSxNQUFNaVUsR0FBSWlZLFFBQVMsQ0FBRTFCLG1CQUkvQzFiLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBS0MsU0FBUyw4QkFFN0MsQ0FFQSxtQkFBYWtULElBQVcwSSxNQUN0QixNQUFNZ1QsU0FBVyxJQUFJbEcsZ0JBQWdCOU0sTUFDakNnVCxTQUFTbnlCLE1BQU1zd0IsaUJBQ2pCNkIsU0FBUzVGLE1BQU0yRSxlQUFnQixHQUc3QmlCLFNBQVNueUIsTUFBTW93QixLQUFPLElBQ3hCK0IsU0FBUzVGLE1BQU11RCxXQUFZLEVBQzNCcUMsU0FBUzVGLE1BQU0rQixtQkFBb0IsRUFFbkM2RCxTQUFTNUYsTUFBTXdELFVBQVcsRUFDMUJvQyxTQUFTNUYsTUFBTThELG1CQUFvQixFQUVuQzhCLFNBQVM1RixNQUFNMEIsUUFBUyxHQUcxQixNQUFNak8sV0FBYXdHLGVBQWV5RixhQUFhdE0sU0FBVXdTLFVBQ25EUCxnQkFBa0JDLEVBQUVDLFVBQVU5UixNQUFNLEdBRTFDNFIsZ0JBQWdCOXVCLFFBQVF3VSxPQUFTNUMsT0FBT0MsS0FBS0MsVUFBVXVkLFNBQVVuRyxpQkFDM0RtRyxTQUFTdEcsSUFBSStGLGdCQUFnQkgsVUFDckMsQ0FFQSx1QkFBT1csQ0FBa0JoUSxXQUN2QixNQUFNdk0sUUFBVXhTLEtBQUtnZixTQUFTcGYsSUFBSW1mLFdBRzVCaVEsU0FGY1IsRUFBRUMsVUFBVWpjLFFBQVFXLFNBQVMsR0FFcEJtRCxjQUFjLGNBRTNDLE9BQU9zUyxhQUFheFMsWUFBWTRZLFNBQ2xDLENBRUEsa0JBQU81WSxDQUFhcEgsTUFDbEIsTUFBTWlnQixpQkFBbUIzZCxLQUFLNGQsTUFBTUMsU0FBU25nQixLQUFLdlAsUUFBUXdVLFNBRXBEbWIsYUFBZSxJQUFJeEcsYUF3QnpCLE9BdkJBdG1CLE9BQU95ZSxPQUFPcU8sYUFBY0gsa0JBQ3ZCRyxhQUFhclEsWUFDaEJxUSxhQUFhclEsVUFBWS9QLEtBQUt6UCxRQUFRLFlBQVlFLFFBQVFzZixXQUdYLFdBQTdDcVEsYUFBYTlGLFVBQVV2aEIsYUFBYWpQLE9BQ3RDczJCLGFBQWE5RixTQUFXaG5CLE9BQU95ZSxPQUM3QixJQUFJdEssVUFDSjJZLGFBQWE5RixXQUlnQyxXQUE3QzhGLGFBQWExQixVQUFVM2xCLGFBQWFqUCxPQUN0Q3MyQixhQUFhMUIsU0FBV3ByQixPQUFPeWUsT0FDN0IsSUFBSXRLLFVBQ0oyWSxhQUFhMUIsV0FJbUMsV0FBaEQwQixhQUFheEMsYUFBYTdrQixhQUFhalAsT0FDekNzMkIsYUFBYXhDLFlBQWNwb0IsS0FBS0MsU0FBUzJxQixhQUFheEMsY0FHakR3QyxZQUNULEVDM2VLLE1BQU1DLFNBQ1gscUJBQVdDLEdBQ1QsTUFBTyxDQUNMQyxNQUFPLFFBQ1BDLFFBQVMsVUFDVEMsS0FBTSxPQUNOQyxPQUFRLFNBRVosQ0FFQSxvQkFBV0MsR0FDVCxNQUFPLENBQ0xDLGVBQWdCLGlCQUNoQkMsVUFBVyxZQUNYQyxNQUFPLFFBRVgsQ0FFQSxXQUFPQyxHQUNMenFCLE9BQU8rcEIsU0FBVyxDQUNoQjNtQixjQUFlMm1CLFVBRWpCLE1BQU1XLEtBQU94QixFQUFFLFFBQ2Z3QixLQUFLcFQsR0FBRyxRQUFTLGNBQWV5UyxTQUFTWSxjQUN6Q0QsS0FBS3BULEdBQUcsWUFBYSxlQUFlM2QsT0FBU293QixTQUFTYSxnQkFBZ0JqeEIsU0FFdEVxRyxPQUFPNEssV0FBV2lnQixVQUFVdjJCLEtBQUssQ0FDL0J3MkIsUUFBUyxJQUFJL2xCLE9BQU8sc0lBQXNKLE1BQzFLZ21CLFNBQVVoQixTQUFTaUIsYUFFdkIsQ0FFQSxxQkFBT0MsQ0FBZ0J0eEIsT0FDckIsTUFBTUcsRUFBSUgsTUFBTUksY0FDVjZqQixFQUFJOWpCLEVBQUVrWCxjQUFjLG9CQUNwQnRPLEtBQU8xRyxRQUFRQyxNQUFNd08sVUFBVTNRLEVBQUVLLFNBRWpDK3dCLFFBQVV4b0IsS0FBS2pILEtBNEJyQixPQTFCQWlILEtBQUtqSCxLQUFPLFdBQ1ppSCxLQUFLN0gsS0FBTyxLQUVScXdCLFVBQ0Z4b0IsS0FBS3lvQixTQUFXRCxTQUloQnhvQixLQUFLaU0sU0FDbUIsaUJBQWhCak0sS0FBS2lNLFFBQXVCak0sS0FBS2lNLGtCQUFrQm5WLFVBRTNEa0osS0FBS2lNLE9BQVMzQyxLQUFLNGQsTUFBTWxuQixLQUFLaU0sU0FLOUJpUCxFQUFFempCLFNBQ0Z5akIsRUFBRXpqQixRQUFRaXhCLFVBQ2EsZ0JBQXZCeE4sRUFBRXpqQixRQUFRaXhCLFdBRVYxb0IsS0FBSzdILEtBQU8raUIsRUFBRXpqQixRQUFRaXhCLFVBRXhCMW9CLEtBQUsyb0IsWUFBY3Z4QixFQUFFSyxRQUFRa3hCLFlBQWN2eEIsRUFBRXd4QixVQUFZLEtBQ3JENW9CLEtBQUtnUixhQUNQaFIsS0FBS2dSLFdBQWExTyxjQUFjdW1CLGtCQUFrQjdvQixLQUFLZ1IsYUFFbERoUixJQUNULENBRUEsc0JBQU9rb0IsQ0FBaUJqeEIsT0FDdEIsTUFBTStJLEtBQU9xbkIsU0FBU2tCLGVBQWV0eEIsT0FDckNBLE1BQU02eEIsY0FBY0MsYUFBYUMsUUFBUSxhQUFjMWYsS0FBS0MsVUFBVXZKLE1BQ3hFLENBYUEseUJBQWFpcEIsQ0FBY2pwQixLQUFNaEcsUUFBVSxDQUFDLEdBQzFDLE1BQU1tUCxJQUFNLElBQUlrZSxTQUNoQmxlLElBQUk4QyxPQUFTM1MsUUFBUUMsTUFBTTZhLFlBQVksQ0FDckNyYixLQUFNLFdBQ040WCxNQUFPMFcsU0FBU0MsV0FBV0MsTUFDM0JrQixTQUFVcEIsU0FBU00sVUFBVUcsTUFDN0I5VyxXQUFZdkMsVUFBVXVQLGdCQUFnQnRQLFFBQ3RDdFAsU0FBVSxFQUNWNk0sT0FBUSxDQUNObFUsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxrQkFDMUJDLEtBQU0scUJBQ04rd0IsUUFBUyxLQUVWbHBCLE1BQ0gsSUFBSyxNQUFNekosTUFBTyxDQUFDLE9BQVEsY0FBZSxPQUFRLEtBQU0sT0FBUSxTQUFVLFNBQVUsYUFDbEY0UyxJQUFJOEMsT0FBTzFWLEtBQU80UyxJQUFJOEMsT0FBTzFWLE1BQVEsR0FNdkMsWUFKc0MsSUFBM0I0UyxJQUFJOEMsT0FBT0EsT0FBTzlULFdBQThELElBQS9CZ1IsSUFBSThDLE9BQU9BLE9BQU9rZCxVQUE0QixDQUFDLE9BQVEsU0FBU3pyQixTQUFTeUwsSUFBSThDLE9BQU9BLE9BQU9rZCxZQUNySmhnQixJQUFJOEMsT0FBT0EsT0FBTzlULEtBQU9nUixJQUFJOEMsT0FBT0EsT0FBT2tkLFNBQVcsTUFBUWhnQixJQUFJOEMsT0FBT0EsT0FBTzlULE1BRWxGZ1IsSUFBSW5QLFFBQVVBLFFBQ1BtUCxHQUNULENBRUEsd0JBQWFtZixDQUFhL25CLE9BQ3hCLE1BQU16UCxLQUFPeVAsTUFBTSxTQUFNaEksRUFDbkJ5QixRQUFVdUcsTUFBTSxTQUFNaEksRUFDdEJRLEtBQU93SCxNQUFNLFNBQU1oSSxFQUVuQnlILEtBQU8sQ0FDWG1KLElBQUssQ0FBQyxhQUNOMVIsUUFBUyxDQUFFa1osTUFBTzVYLE1BQ2xCWixLQUFNLEtBQ044RixPQUFPLEVBQ1BuTixNQUdGLEdBQUlpSSxPQUFTc3VCLFNBQVNDLFdBQVdJLE9BQy9CMW5CLEtBQUt4SSxPQUFTOFIsS0FBSzRkLE1BQU1sdEIsU0FDekJnRyxLQUFLdkksUUFBUXdVLE9BQVNqUyxhQUNVLElBQXJCZ0csS0FBS3hJLE9BQU9XLFdBQXdELElBQXpCNkgsS0FBS3hJLE9BQU8yeEIsVUFBNEIsQ0FBQyxPQUFRLFNBQVN6ckIsU0FBU3NDLEtBQUt4SSxPQUFPMnhCLFlBQ25JbnBCLEtBQUt4SSxPQUFPVyxLQUFPNkgsS0FBS3hJLE9BQU8yeEIsU0FBVyxNQUFRbnBCLEtBQUt4SSxPQUFPVyxVQUUzRCxDQUNMLE1BQU1peEIsUUFBVXB2QixRQUFRcXZCLFNBQVMsV0FDakMsSUFBSyxNQUFNOW9CLFNBQVNvWixNQUFNQyxLQUFLd1AsU0FBVSxDQUN2QyxJQUFLN3lCLElBQUszRixPQUFTMlAsTUFBTSxHQUFHNkcsTUFBTSxLQUN0QixTQUFSN1EsTUFDRnlKLEtBQUs3SCxLQUFPdkgsWUFFTyxJQUFWQSxRQUNHLFVBQVIyRixLQUNGM0YsT0FBUSxFQUNSb1AsS0FBSy9CLE1BQWdCLENBQUNvcEIsU0FBU0MsV0FBV0MsT0FBTzdwQixTQUFTM0UsS0FBSzJKLGdCQUM5QyxZQUFSbk0sS0FDVDNGLE9BQVEsRUFDUm9QLEtBQUswWCxRQUFrQixDQUFDMlAsU0FBU0MsV0FBV0MsT0FBTzdwQixTQUFTM0UsS0FBSzJKLGdCQUNoRCxXQUFSbk0sTUFDVDNGLE9BQVEsRUFDUm9QLEtBQUtuTyxPQUFpQixDQUFDdzFCLFNBQVNDLFdBQVdDLE9BQU83cEIsU0FBUzNFLEtBQUsySixpQkFHcEUxQyxLQUFLdkksUUFBUWxCLEtBQU8zRixLQUN0QixNQUNpQyxJQUF0Qm9QLEtBQUt2SSxRQUFRVSxXQUF5RCxJQUExQjZILEtBQUt2SSxRQUFRMHhCLFVBQTRCLENBQUMsT0FBUSxTQUFTenJCLFNBQVNzQyxLQUFLdkksUUFBUTB4QixZQUN0SW5wQixLQUFLdkksUUFBUVUsS0FBTzZILEtBQUt2SSxRQUFRMHhCLFNBQVcsTUFBUW5wQixLQUFLdkksUUFBUVUsS0FDakU2SCxLQUFLN0gsS0FBTzZILEtBQUt2SSxRQUFRVSxLQUU3QixDQUVBLElBQUlpUixNQUNKLE1BQU00SCxXQUFhdkMsVUFBVTZhLGlCQUFpQnRwQixLQUFLdkksUUFBUXVaLFlBRTNELE9BQVFqWSxLQUFLMkosZUFDWCxLQUFLMmtCLFNBQVNDLFdBQVdDLE1BQU8sQ0FDOUIsSUFBSWdDLFVBQVl2cEIsS0FBS3ZJLFFBQVEzRyxLQUM3QixHQUFJLENBQUMsYUFBYyxZQUFhLFNBQVUsV0FBVzRNLFNBQVNzQyxLQUFLdkksUUFBUXNCLE1BQU0ySixlQUNyRCxRQUF0QjFDLEtBQUt2SSxRQUFRM0csT0FDZnk0QixVQUFZdnhCLEtBQUtDLEtBQUtDLFNBQVMsY0FFUCxRQUF0QjhILEtBQUt2SSxRQUFRM0csT0FDZnk0QixVQUFZdnhCLEtBQUtDLEtBQUtDLFNBQVMscUJBRTVCLEdBQUksQ0FBQyxTQUFVLE9BQVEsaUJBQWtCLG1CQUFtQndGLFNBQVNzQyxLQUFLdkksUUFBUXNCLE1BQU0ySixlQUM3RjZtQixVQUFZam5CLGNBQWM4Yix1QkFBdUJwZSxLQUFLdkksUUFBUTNHLE9BQU9pSCxXQUVyRSxJQUFLakgsTUFBUWtQLEtBQUt2SSxRQUFRM0csS0FBS3lQLE1BQU0sb0JBQXFCLENBQ3hELE1BQU1pcEIsaUJBQW1CeHhCLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU1DLFVBQVU5ZCxLQUFLdkksUUFBUTNHLFNBQVMsSUFBSUEsS0FDL0UwNEIsWUFDRkQsVUFBWUMsVUFFaEIsQ0FFRnBnQixNQUFRcFIsS0FBS0MsS0FBSzBXLE9BQ2hCLGlCQUFrQjNPLEtBQUt2SSxRQUFRdVosV0FBa0IsT0FBTCxLQUFlaFIsS0FBS3ZJLFFBQVEySCxTQUFnQixRQUFMLEtBQWVZLEtBQUswWCxRQUFVLFVBQVksS0FDN0gsQ0FDRTFHLFdBQ0E1UixTQUFVWSxLQUFLdkksUUFBUTJILFNBQ3ZCdE8sS0FBTXk0QixZQUdWLEtBQ0YsQ0FFQSxLQUFLbEMsU0FBU0MsV0FBV0UsUUFDdkJwZSxNQUFRcFIsS0FBS0MsS0FBSzBXLE9BQ2hCLG1CQUFvQjNPLEtBQUt2SSxRQUFRdVosV0FBa0IsT0FBTCxLQUFlaFIsS0FBS3ZJLFFBQVEySCxTQUFnQixRQUFMLEtBQ3JGLENBQ0U0UixXQUNBNVIsU0FBVVksS0FBS3ZJLFFBQVEySCxTQUN2QnFpQixPQUFRemhCLEtBQUt2SSxRQUFRZ3FCLE9BQ3JCRCxPQUFReGhCLEtBQUt2SSxRQUFRK3BCLFNBR3pCLE1BRUYsS0FBSzZGLFNBQVNDLFdBQVdHLEtBQ3ZCcmUsTUFBUXBSLEtBQUtDLEtBQUswVyxPQUNoQixnQkFBaUIzTyxLQUFLdkksUUFBUXVaLFdBQWtCLE9BQUwsS0FBZWhSLEtBQUt2SSxRQUFRMkgsU0FBZ0IsUUFBTCxLQUNsRixDQUNFNFIsV0FDQTVSLFNBQVVZLEtBQUt2SSxRQUFRMkgsU0FDdkJ0TyxLQUFNa1AsS0FBS3ZJLFFBQVEzRyxPQUd2QixNQUVGLEtBQUt1MkIsU0FBU0MsV0FBV0ksT0FDdkJ0ZSxNQUFRcEosS0FBS3hJLE9BQU9PLE1BSW5CakgsS0FHSGtQLEtBQUt2SSxRQUFRa3hCLGFBQWMsRUFGM0Izb0IsS0FBS2xQLEtBQU9zWSxNQUtkLE1BQU1oUyxFQUFJb1MsU0FBU0MsY0FBYyxLQUNqQ3JTLEVBQUVnUyxNQUFRcFIsS0FBS3NHLEtBQUsyRSxLQUFPakQsS0FBS2xQLEtBQU9zWSxNQUN2Q2hTLEVBQUVzUyxVQUFVQyxPQUFPM0osS0FBS21KLEtBQ3hCLElBQUssTUFBT1MsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRakYsS0FBS3ZJLFNBQ3ZDTCxFQUFFSyxRQUFRbVMsR0FBS3ZQLEVBa0JqQixPQWhCQWpELEVBQUVxeUIsV0FBWSxFQUNkenBCLEtBQUs3SCxLQUFPNkgsS0FBSzdILE1BQVE2SCxLQUFLeEksUUFBUVcsTUFBUSxlQUUxQzZILEtBQUs3SCxLQUFLdUYsU0FBUyxPQUFTc0MsS0FBSzdILEtBQUt1RixTQUFTLFFBQ2pEc0MsS0FBS0ksSUFBTUosS0FBSzdILE1BRWQ2SCxLQUFLL0IsUUFDUDdHLEVBQUV5UyxXQUFhLG9DQUViN0osS0FBS0ksSUFDUGhKLEVBQUV5UyxXQUFhLHdCQUF3QjdKLEtBQUs3SCxjQUFjNkgsS0FBS0ksUUFFL0RoSixFQUFFeVMsV0FBYSxzQkFBc0I3SixLQUFLN0gsMEJBQTBCNkgsS0FBSzdILGFBRTNFZixFQUFFeVMsV0FBYSxTQUFTN0osS0FBS2xQLGNBRXRCc0csQ0FDVCxDQVdBLG1CQUFBaUosQ0FBcUJDLFdBQVcsV0FBWSxPQUFZLENBQUMsR0FDdkQsSUFBS0EsVUFBVXFRLE1BQ2IsTUFBTyxHQUVULE9BQVFyUSxVQUFVcVEsTUFBTWpPLGVBQ3RCLEtBQUsya0IsU0FBU0MsV0FBV0MsTUFBTyxDQUs5QixJQUFLam5CLFVBQVVtb0IsV0FBY25vQixVQUFVeFAsT0FBU3dQLFVBQVV3UixNQUN4RCxNQUFPLEdBRVQsSUFBSTlYLFFBQVUsR0FBR3NHLFVBQVVyQyxNQUFRLFNBQVcsS0FBS3FDLFVBQVVvWCxRQUFVLFdBQWEsVUFBVXBYLFVBQVVtb0IsV0FleEcsR0FkSW5vQixVQUFVeFAsS0FDWmtKLFNBQVcsU0FBU3NHLFVBQVV4UCxPQUNyQndQLFVBQVV3UixRQUNuQjlYLFNBQVcsVUFBVXNHLFVBQVV3UixRQUMzQnhSLFVBQVV6TyxTQUNabUksU0FBVyxpQkFHcUIsSUFBekJzRyxVQUFVMFEsWUFBOEIxUSxVQUFVMFEsYUFBZXZDLFVBQVV1UCxnQkFBZ0J0UCxVQUNwRzFVLFNBQVcsZUFBZXNHLFVBQVUwUSxtQkFFSixJQUF2QjFRLFVBQVVsQixVQUFtRCxJQUF2QmtCLFVBQVVsQixXQUN6RHBGLFNBQVcsYUFBYXNHLFVBQVVsQixZQUVoQ2tCLFVBQVVuSSxLQUFNLENBQ2xCLE1BQU1zSixNQUFRbkIsVUFBVW5JLEtBQUtvSSxNQUFNLHVCQUVqQ3ZHLFNBREV5SCxNQUNTLGFBQWFBLE1BQU0sV0FBV0EsTUFBTSxLQUVwQyxTQUFTbkIsVUFBVW5JLE1BRWxDLENBQ0ltSSxVQUFVb3BCLE9BQ1oxdkIsU0FBVyxTQUFTc0csVUFBVW9wQixRQUU1QnBwQixVQUFVc0ksS0FDWjVPLFNBQVcsT0FBT3NHLFVBQVVzSSxNQUU5QixJQUFJK2dCLEtBQU8sZUFBZTN2QixXQUMxQixNQUFNMnVCLFlBQWNyb0IsVUFBVXFvQixhQUFnQjV3QixPQUFTLEdBSXZELE9BSEk0d0IsY0FDRmdCLE1BQVEsSUFBSWhCLGdCQUVQZ0IsSUFDVCxDQUVBLEtBQUt0QyxTQUFTQyxXQUFXRSxRQUFTLENBRWhDLElBQUtsbkIsVUFBVWtoQixTQUFXbGhCLFVBQVVtaEIsT0FDbEMsTUFBTyxHQUVULElBQUl6bkIsUUFBVSxHQUFHc0csVUFBVXJDLE1BQVEsU0FBVyxZQUFZcUMsVUFBVWtoQixpQkFBaUJsaEIsVUFBVW1oQixTQVUvRixHQVRJbmhCLFVBQVV5Z0IsWUFDWi9tQixTQUFXLGNBQWNzRyxVQUFVeWdCLGFBRWpDemdCLFVBQVUwUSxZQUFjMVEsVUFBVTBRLGFBQWV2QyxVQUFVdVAsZ0JBQWdCdFAsVUFDN0UxVSxTQUFXLGVBQWVzRyxVQUFVMFEsY0FFbEMxUSxVQUFVbEIsVUFBbUMsSUFBdkJrQixVQUFVbEIsV0FDbENwRixTQUFXLGFBQWFzRyxVQUFVbEIsWUFFaENrQixVQUFVbkksS0FBTSxDQUNsQixNQUFNc0osTUFBUW5CLFVBQVVuSSxLQUFLb0ksTUFBTSx1QkFFakN2RyxTQURFeUgsTUFDUyxhQUFhQSxNQUFNLFdBQVdBLE1BQU0sS0FFcEMsU0FBU25CLFVBQVVuSSxNQUVsQyxDQUNBLElBQUl3eEIsS0FBTyxpQkFBaUIzdkIsV0FDNUIsTUFBTTJ1QixZQUFjcm9CLFVBQVVxb0IsYUFBZ0I1d0IsT0FBUyxHQUl2RCxPQUhJNHdCLGNBQ0ZnQixNQUFRLElBQUloQixnQkFFUGdCLElBQ1QsQ0FFQSxLQUFLdEMsU0FBU0MsV0FBV0csS0FBTSxDQUU3QixJQUFLbm5CLFVBQVV4UCxLQUNiLE1BQU8sR0FFVCxJQUFJa0osUUFBVSxHQUFHc0csVUFBVXJDLE1BQVEsU0FBVyxVQUFVcUMsVUFBVXhQLE9BQ2xFLEdBQUl3UCxVQUFVbkksS0FBTSxDQUNsQixNQUFNc0osTUFBUW5CLFVBQVVuSSxLQUFLb0ksTUFBTSx1QkFFakN2RyxTQURFeUgsTUFDUyxhQUFhQSxNQUFNLFdBQVdBLE1BQU0sS0FFcEMsU0FBU25CLFVBQVVuSSxNQUVsQyxDQUNJbUksVUFBVW9wQixPQUNaMXZCLFNBQVcsU0FBU3NHLFVBQVVvcEIsUUFFNUJwcEIsVUFBVXNJLEtBQ1o1TyxTQUFXLE9BQU9zRyxVQUFVc0ksTUFFOUIsSUFBSStnQixLQUFPLGNBQWMzdkIsV0FDekIsTUFBTTJ1QixZQUFjcm9CLFVBQVVxb0IsYUFBZ0I1d0IsT0FBUyxHQUl2RCxPQUhJNHdCLGNBQ0ZnQixNQUFRLElBQUloQixnQkFFUGdCLElBQ1QsQ0FFQSxLQUFLdEMsU0FBU0MsV0FBV0ksT0FBUSxDQU8vQixNQUFNam1CLE1BQVFuQixVQUFVMkwsT0FBTzlULEtBQUtvSSxNQUFNLHVCQUN0Q2tCLFFBQ0ZuQixVQUFVMkwsT0FBT2tkLFNBQVcxbkIsTUFBTSxHQUNsQ25CLFVBQVUyTCxPQUFPOVQsS0FBT3NKLE1BQU0sSUFFaEMsSUFBSWtvQixLQUFPLGdCQUFnQnJnQixLQUFLQyxVQUFVakosVUFBVTJMLFdBQ3BELE1BQU0wYyxZQUFjcm9CLFVBQVVxb0IsYUFBZ0I1d0IsT0FBUyxHQUl2RCxPQUhJNHdCLGNBQ0ZnQixNQUFRLElBQUloQixnQkFFUGdCLElBQ1QsRUFFRixNQUFPLEdBQ1QsQ0FFQSw4QkFBYUMsQ0FBbUJqMUIsTUFBT3FGLFNBQVMsVUFBYSxHQUFVLENBQUMsR0FDdEUsT0FBUUEsUUFBUTJXLE9BQ2QsS0FBSzBXLFNBQVNDLFdBQVdDLE1BQ3ZCLEdBQUksQ0FBQyxTQUFVLE9BQVEsaUJBQWtCLG1CQUFtQjdwQixTQUFTMUQsUUFBUXl1QixTQUFTL2xCLGVBQ3BGLE9BQU8vTixNQUFNazFCLG9CQUNYN3ZCLFFBQVFsSixLQUNSZzVCLFNBQ0E5dkIsU0FHSixHQUFJLENBQUMsU0FBUzBELFNBQVMxRCxRQUFReXVCLFNBQVMvbEIsZUFDdEMsT0FBTy9OLE1BQU1vMUIsV0FBVy92QixRQUFTOHZCLFNBQVU5dkIsU0FFN0MsR0FBSSxDQUFDLGFBQWMsWUFBYSxTQUFVLFdBQVcwRCxTQUFTMUQsUUFBUXl1QixTQUFTL2xCLGVBQzdFLE9BQU8vTixNQUFNcTFCLGVBQWVod0IsUUFBUWxKLEtBQU1nNUIsU0FBVTl2QixTQUV0RCxHQUFJLENBQUMsY0FBZSxjQUFlLFdBQVcwRCxTQUFTMUQsUUFBUXl1QixTQUFTL2xCLGVBQ3RFLE9BQU9tVSxpQkFBaUI2SCxtQkFBbUIsQ0FDekMzbEIsS0FBTWlCLFFBQVF5dUIsU0FBUy9sQixjQUN2QnNjLGVBQWdCaGxCLFFBQVE4WCxNQUFNMUssTUFBTSxNQUNwQ3FTLFNBQVVxSCxRQUFROW1CLFFBQVFuSSxTQUFVLEtBR3hDLE1BRUYsS0FBS3cxQixTQUFTQyxXQUFXRSxRQUl2QixZQUhBNUcsYUFBYXhWLE9BQU96VyxNQUFNbVgsU0FBVTlSLFFBQVMsQ0FDM0NtbEIsWUFBYTJLLFdBSWpCLEtBQUt6QyxTQUFTQyxXQUFXRyxLQUN2QixPQUFPOXlCLE1BQU1zMUIsWUFBWWp3QixRQUFTOHZCLFVBRXBDLEtBQUt6QyxTQUFTQyxXQUFXSSxhQUNqQi95QixNQUFNbUQsd0JBQXdCLGVBQWdCLENBQUMsQ0FDbkRDLE1BQU9pQyxRQUFRaVMsT0FBT2xVLE1BQ3RCSSxLQUFNNkIsUUFBUWlTLE9BQU85VCxLQUNyQit3QixRQUFTbHZCLFFBQVFpUyxPQUFPaWQsV0FJaEMsQ0FFQSxvQkFBT2dCLENBQWVsd0IsU0FDcEIsTUFBTXFjLE9BQVMsQ0FDYjFMLFFBQVMsQ0FDUG9CLE1BQU8vVCxLQUFLc0csS0FBS3hOLE9BR3JCLElBQUkwWixRQUNKLE1BQU1tZixNQUFPLElBQUt0QyxVQUFZaG5CLG9CQUFvQnJHLFNBRWhEd1EsUUFERXhRLFFBQVEyVyxRQUFVMFcsU0FBU0MsV0FBV0ksT0FDOUIsK0JBQStCaUMsYUFFL0IzeEIsS0FBS0MsS0FBSzBXLE9BQU8saUNBQWtDLENBQzNEZ0MsTUFBT2daLE9BR1h6ZixXQUFXSyxjQUFjLEtBQU1DLFFBQVM2TCxPQUMxQyxDQUVBLHVCQUFPOFQsQ0FBa0Jud0IsUUFBU3FOLFFBQ2hDLElBQUssTUFBTTFTLFNBQVMwUyxPQUFRLENBQzFCLE1BQU1nUCxPQUFTLENBQ2IxTCxRQUFTLENBQ1BvQixNQUFPL1QsS0FBS3NHLEtBQUt4TixNQUVuQmtOLFFBQVNySixNQUFNeTFCLE9BQU8xckIsS0FBSXRILEdBQUtBLEVBQUV3UixNQUVuQyxJQUFJNEIsUUFDSixNQUFNbWYsTUFBTyxJQUFLdEMsVUFBWWhuQixvQkFBb0JyRyxTQUVoRHdRLFFBREV4USxRQUFRMlcsUUFBVTBXLFNBQVNDLFdBQVdJLE9BQzlCLCtCQUErQmlDLGFBRS9CM3hCLEtBQUtDLEtBQUswVyxPQUFPLG1DQUFvQyxDQUM3RDdkLEtBQU02RCxNQUFNN0QsS0FDWjZmLE1BQU9nWixPQUdYemYsV0FBV0ssY0FBYyxLQUFNQyxRQUFTNkwsT0FDMUMsQ0FDRixDQVFBLHlCQUFhNFIsQ0FBY2h4QixPQUN6QixNQUFNK0MsUUFBVXF0QixTQUFTa0IsZUFBZXR4QixPQUV4QyxHQUFJZSxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsR0FBSTZHLFVBQVU3UyxPQUVaLFlBREFvekIsc0JBQXNCamYsT0FBT3BSLFNBRy9CLEdBQUl1VCxPQUFPakcsT0FBT21PLFdBQVduYSxPQUFRLENBQ25DLElBQUssTUFBTXFRLFNBQVM0QixPQUFPakcsT0FBT21PLFdBQ2hDNFIsU0FBU3VDLGtCQUFrQmplLE1BQU1oWCxNQUFPcUYsUUFBUyxDQUFFOHZCLFNBQVU3eUIsTUFBTTZ5QixXQUVyRSxNQUNGLENBQ0EsTUFBTW5mLFFBQVV6TSxZQUFZME0sYUFDdEJqVyxNQUFRdUosWUFBWW9zQixnQkFBZ0IzZixTQUMxQyxPQUFJaFcsV0FDRjB5QixTQUFTdUMsa0JBQWtCajFCLE1BQU9xRixRQUFTLENBQUU4dkIsU0FBVTd5QixNQUFNNnlCLGdCQUcvRHpDLFNBQVM2QyxjQUFjbHdCLFFBRXpCLENBQU8sQ0FDTCxNQUFNMlEsUUFBVXpNLFlBQVkwTSxhQUM1QixJQUFJalcsTUFBUXVKLFlBQVlvc0IsZ0JBQWdCM2YsU0FDeEMsSUFBS2hXLE1BQU8sQ0FDVixNQUFNMFMsT0FBU3JQLEtBQUtxUCxPQUFPdFcsUUFBT3FHLElBQU1BLEVBQUU0ZSxVQUFVaGUsS0FBS3NHLEtBQUtzSyxLQUFPeFIsRUFBRTRlLFVBQVVDLFdBQWFwTCxNQUFNcUwsMEJBQTBCQyxRQUM5SCxHQUFzQixJQUFsQjlPLE9BQU8vTCxPQUNUM0csTUFBUTBTLE9BQU8sT0FDVixDQUNMLE1BQU1BLE9BQVNyUCxLQUFLcVAsT0FBT3RXLFFBQU9xRyxJQUFNQSxFQUFFNGUsVUFBVWhlLEtBQUtzRyxLQUFLc0ssS0FBT3hSLEVBQUU0ZSxVQUFVQyxXQUFhcEwsTUFBTXFMLDBCQUEwQnFVLFdBQ3hHLElBQWxCbGpCLE9BQU8vTCxTQUNUM0csTUFBUTBTLE9BQU8sR0FFbkIsQ0FDRixDQUNBLEdBQUkxUyxNQUVGLFlBREEweUIsU0FBU3VDLGtCQUFrQmoxQixNQUFPcUYsUUFBUyxDQUFFOHZCLFNBQVU3eUIsTUFBTTZ5QixVQUdqRSxDQUNBcm1CLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBS0MsU0FBUyw4QkFDM0MsQ0FFQSxRQUFBc3lCLENBQVVqMEIsSUFBSzNGLE9BQ2I4SixLQUFLdVIsT0FBTzFWLEtBQU8zRixLQUNyQixDQUVBLFFBQUkrNEIsR0FDRixPQUFPanZCLEtBQUsyRixvQkFBb0IzRixLQUFLdVIsT0FDdkMsQ0FFQSxNQUFJckQsR0FDRixPQUFPbE8sS0FBS3VSLE9BQU9yRCxFQUNyQixDQUVBLFFBQUk4Z0IsR0FDRixPQUFPaHZCLEtBQUt1UixPQUFPeWQsSUFDckIsQ0FFQSxhQUFJZSxHQUNGLE9BQU8vdkIsS0FBS3VSLE9BQU8wRSxLQUNyQixDQUVBLGNBQUlLLEdBQ0YsT0FBT3RXLEtBQUt1UixPQUFPK0UsVUFDckIsQ0FFQSxRQUFJN1ksR0FDRixPQUFPdUMsS0FBS3VSLE9BQU85VCxJQUNyQixDQUVBLGVBQUl3d0IsR0FDRixPQUFPanVCLEtBQUt1UixPQUFPMGMsV0FDckIsQ0FFQSxZQUFJdnBCLEdBQ0YsT0FBTzFFLEtBQUt1UixPQUFPN00sUUFDckIsQ0FFQSxZQUFJcXBCLEdBQ0YsT0FBTy90QixLQUFLdVIsT0FBT3djLFFBQ3JCLENBRUEsVUFBSWhILEdBQ0YsT0FBTy9tQixLQUFLdVIsT0FBT3dWLE1BQ3JCLENBRUEsVUFBSUQsR0FDRixPQUFPOW1CLEtBQUt1UixPQUFPdVYsTUFDckIsQ0FFQSxhQUFJVCxHQUNGLE9BQU9ybUIsS0FBS3VSLE9BQU84VSxTQUNyQixDQUVBLFVBQUl2cEIsR0FDRixPQUFPa0QsS0FBS3VSLE9BQU9BLE1BQ3JCLENBRUEsYUFBSXllLEdBQ0YsR0FBSWh3QixLQUFLaXdCLHNCQUF1QixDQUM5QixNQUFNck0sZ0JBQWtCc00sU0FBU0MsOEJBQ2pDLE9BQU92TSxnQkFBZ0Jsa0IsTUFBSzB3QixHQUFLQSxFQUFFdjBCLE1BQVFtRSxLQUFLdVIsT0FBT25iLE1BQVFnNkIsRUFBRTVvQixZQUFjeEgsS0FBS3VSLE9BQU9uYixNQUFRZzZCLEVBQUUveUIsUUFBVTJDLEtBQUt1UixPQUFPbmIsUUFBT3lGLEtBQU8sRUFDM0ksQ0FDQSxPQUFPbUUsS0FBS3VSLE9BQU9uYixJQUNyQixDQUVBLFdBQUlpNkIsR0FDRixPQUFPcndCLEtBQUt1UixPQUFPMEUsUUFBVTBXLFNBQVNDLFdBQVdDLEtBQ25ELENBRUEseUJBQUlvRCxHQUNGLE9BQU9qd0IsS0FBS3F3QixTQUFXcndCLEtBQUt1UixPQUFPd2MsV0FBYXBCLFNBQVNNLFVBQVVDLGNBQ3JFLENBRUEsb0JBQUlvRCxHQUNGLE9BQU90d0IsS0FBS3F3QixTQUFXcndCLEtBQUt1UixPQUFPd2MsV0FBYXBCLFNBQVNNLFVBQVVFLFNBQ3JFLENBRUEsZ0JBQUlvRCxHQUNGLE9BQU92d0IsS0FBS3F3QixTQUFXcndCLEtBQUt1UixPQUFPd2MsV0FBYXBCLFNBQVNNLFVBQVVHLEtBQ3JFLENBRUEsZUFBSW9ELEdBQ0YsT0FBT3h3QixLQUFLdVIsT0FBTzBFLFFBQVUwVyxTQUFTQyxXQUFXRyxJQUNuRCxDQUVBLGtCQUFJMEQsR0FDRixPQUFPendCLEtBQUt1UixPQUFPMEUsUUFBVTBXLFNBQVNDLFdBQVdFLE9BQ25ELENBRUEsWUFBSTRELEdBQ0YsT0FBTzF3QixLQUFLdVIsT0FBTzBFLFFBQVUwVyxTQUFTQyxXQUFXSSxNQUNuRCxDQUVBLFdBQUlySSxHQUNGLE9BQU8za0IsS0FBS3F3QixTQUFXcndCLEtBQUt1UixPQUFPaE8sS0FDckMsQ0FFQSxhQUFJb3RCLEdBQ0YsT0FBTzN3QixLQUFLcXdCLFNBQVdyd0IsS0FBS3VSLE9BQU95TCxPQUNyQyxFQy9vQkssTUFBTTJTLDhCQUE4Qm5XLGdCQUN6Qyx5QkFBV0MsR0FDVCxPQUFPN2EsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNb2QsZUFBZ0IsQ0FDckR2TCxHQUFJLGdCQUNKeUwsUUFBUyxDQUFDLE9BQVEsdUJBQ2xCakwsTUFBT3BSLEtBQUtDLEtBQUtDLFNBQVMsbUJBQzFCb3pCLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLEtBQU1DLGFBQWMsZUFDL0NsWCxTQUFVLGlEQUNWQyxlQUFlLEVBQ2ZDLE1BQU8sSUFDUEMsT0FBUSxPQUNSZ1gsS0FBTSxDQUNKLENBQ0VDLFlBQWEsUUFDYkMsZ0JBQWlCLGtCQUNqQkMsUUFBUyxhQUlqQixDQUVBLGFBQU1DLEdBQ0osTUFBTUMsZ0JBQWtCLzBCLE1BQU04MEIsVUEyRTlCLE9BeEVBQyxVQUFVckIsVUFBWSxDQUNwQixDQUNFbDBCLElBQUs4d0IsU0FBU0MsV0FBV0MsTUFDekJ4dkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxlQUU1QixDQUNFM0IsSUFBSzh3QixTQUFTQyxXQUFXRSxRQUN6Qnp2QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHFCQUU1QixDQUNFM0IsSUFBSzh3QixTQUFTQyxXQUFXRyxLQUN6QjF2QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLG9CQUU1QixDQUNFM0IsSUFBSzh3QixTQUFTQyxXQUFXSSxPQUN6QjN2QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHVCQUs5QjR6QixVQUFVckQsU0FBVyxDQUNuQixDQUNFbHlCLElBQUs4d0IsU0FBU00sVUFBVUMsZUFDeEI3dkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyx3QkFFNUIsQ0FDRTNCLElBQUs4d0IsU0FBU00sVUFBVUUsVUFDeEI5dkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxtQkFFNUIsQ0FDRTNCLElBQUs4d0IsU0FBU00sVUFBVUcsTUFDeEIvdkIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxnQkFLOUI0ekIsVUFBVUMsY0FBZ0IsQ0FDeEIsQ0FDRXgxQixJQUFLLE1BQ0x3QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGNBRTVCLENBQ0UzQixJQUFLLE1BQ0x3QixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUs5QjR6QixVQUFVRSxZQUFjMXhCLE9BQU8ySyxRQUFRNEYsTUFBTW9oQixxQkFBcUJ0bEIsUUFDaEUsQ0FBQzRGLElBQUtyUixLQUNKcVIsSUFBSXJSLEVBQUUsSUFBTWxELEtBQUtDLEtBQUtDLFNBQVMsZUFBaUJnRCxFQUFFLElBQzNDcVIsTUFFVCxDQUFDLEdBSUh1ZixVQUFVSSxtQkFBcUJ0QixTQUFTQyw4QkFFeENpQixVQUFVbkMsS0FBT21DLFVBQVU3ZixPQUFPMGQsS0FFbENtQyxVQUFVSyxTQUFXTCxVQUFVbkMsS0FBS3VCLGFBQWVZLFVBQVVuQyxLQUFLc0IsYUFFbEVhLFVBQVVNLGNBQTRDLGtCQUEzQk4sVUFBVTdmLE9BQU9vZ0IsTUFDNUNQLFVBQVVRLGVBQTZDLG1CQUEzQlIsVUFBVTdmLE9BQU9vZ0IsTUFFN0NQLFVBQVVTLGNBQWlCVCxVQUFVbkMsS0FBSy9nQixLQUFPa2pCLFVBQVVNLGVBQWlCTixVQUFVUSxnQkFFdEZSLFVBQVU5TixnQkFBa0J2UCxVQUFVdVAsZ0JBRXRDOE4sVUFBVVUsV0FBYVYsVUFBVTdmLE9BQU81RSxPQUFPM0ksS0FBSXRILEdBQUtBLEVBQUV0RyxPQUFNaU8sS0FBSyxNQUU5RCtzQixTQUNULENBRUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUV4QkEsS0FDR3ZhLEtBQUssc0hBQ0w5RCxPQUFPb0UsS0FBSyt4QixnQkFBZ0I5NEIsS0FBSytHLE9BR3BDaWEsS0FBS3ZhLEtBQUssbUJBQW1Cc3lCLE1BQU1oeUIsS0FBS2l5QixpQkFBaUJoNUIsS0FBSytHLE1BQ2hFLENBRUEsZUFBQSt4QixDQUFpQngxQixPQUNmLE9BQVFBLE1BQU1JLGNBQWN2RyxNQUMxQixJQUFLLGlCQUNMLElBQUssZ0JBQ0g0SixLQUFLdVIsT0FBT29nQixNQUFTcDFCLE1BQU1JLGNBQWN2RyxPQUFTNEosS0FBS3VSLE9BQU9vZ0IsTUFBUSxHQUFLcDFCLE1BQU1JLGNBQWN2RyxLQUduRzRKLEtBQUtreUIsVUFBVTMxQixNQUNqQixDQUVBLGdCQUFBMDFCLENBQWtCMTFCLE9BQ2hCQSxNQUFNRSxpQkFDTixNQUFNK2xCLE9BQVNqbUIsTUFBTUksY0FDckIsT0FBUTZsQixPQUFPemxCLFFBQVFJLFFBQ3JCLElBQUssTUFDSCxPQUFPNkMsS0FBS215QixtQkFDZCxJQUFLLFNBQ0gzUCxPQUFPM2xCLFFBQVEsa0JBQWtCbW1CLFNBQ2pDaGpCLEtBQUtreUIsVUFBVTMxQixPQUVyQixDQUVBLHNCQUFNNDFCLEdBQ0osTUFBTUMsSUFBTXB5QixLQUFLdVIsT0FBTzBkLEtBQUtueUIsT0FBTzB4QixRQUFRNXRCLE9BQzVDLE9BQU9aLEtBQUtxeUIsT0FBTyxDQUNqQkMsY0FBYyxFQUNkQyxXQUFZLENBQ1YsQ0FBQyxrQkFBa0JILE9BQVEsQ0FDekJ2MkIsSUFBSyxHQUNMMjJCLEtBQU1yaUIsTUFBTW9oQixvQkFBb0JrQixJQUNoQ3Y4QixNQUFPLE1BSWYsQ0FFQSxtQkFBTXc4QixDQUFlbjJCLE1BQU9vMkIsVUFDMUIsSUFBSUMsV0FBWSxFQUNoQixNQUFNOTFCLE9BQVMsQ0FDYnNCLFNBQVUsQ0FBQyxFQUNYb3dCLFFBQVMsSUFFWCxJQUFLLE1BQU0zeUIsT0FBTzgyQixTQUNoQixPQUFROTJCLEtBQ04sSUFBSyxZQUNIbUUsS0FBS3VSLE9BQU8wZCxLQUFLYSxTQUFTLE9BQVE2QyxTQUFTM0MsV0FDM0MsTUFDRixJQUFLLFFBQ0wsSUFBSyxVQUNMLElBQUssYUFDTCxJQUFLLGNBQ0wsSUFBSyxPQUNMLElBQUssS0FDTCxJQUFLLFdBQ0wsSUFBSyxPQUNMLElBQUssU0FDTCxJQUFLLFNBQ0wsSUFBSyxZQUNIaHdCLEtBQUt1UixPQUFPMGQsS0FBS2EsU0FBU2owQixJQUFLODJCLFNBQVM5MkIsTUFDeEMsTUFDRixJQUFLLGVBQ0wsSUFBSyxXQUNMLElBQUssVUFDSG1FLEtBQUt1UixPQUFPMVYsS0FBTzgyQixTQUFTOTJCLEtBQzVCLE1BQ0YsSUFBSyxlQUNIaUIsT0FBT08sTUFBUXMxQixTQUFTOTJCLEtBQ3hCKzJCLFdBQVksRUFDWixNQUNGLElBQUssY0FDSDkxQixPQUFPVyxLQUFPazFCLFNBQVM5MkIsS0FDdkIrMkIsV0FBWSxFQUNaLE1BQ0YsSUFBSyxjQUNIOTFCLE9BQU8rMUIsS0FBT0YsU0FBUzkyQixLQUN2QisyQixXQUFZLEVBQ1osTUFDRixJQUFLLGtCQUNIOTFCLE9BQU9nQixTQUFXNjBCLFNBQVM5MkIsS0FDM0IrMkIsV0FBWSxFQUNaLE1BQ0YsSUFBSywwQkFDSDkxQixPQUFPc0IsU0FBU0UsUUFBVXEwQixTQUFTOTJCLEtBQ25DKzJCLFdBQVksRUFDWixNQUNGLElBQUsseUJBQ0g5MUIsT0FBT3NCLFNBQVMwMEIsT0FBU0gsU0FBUzkyQixLQUNsQysyQixXQUFZLEVBQ1osTUFDRixJQUFLLHdCQUNIOTFCLE9BQU9zQixTQUFTMjBCLE1BQVFKLFNBQVM5MkIsS0FDakMrMkIsV0FBWSxFQUNaLE1BQ0YsUUFBUyxDQUNQLE1BQU0vc0IsTUFBUWhLLElBQUlnSyxNQUFNLGlDQUNwQkEsUUFDRi9JLE9BQU8weEIsUUFBUXQzQixLQUFLLENBQ2xCMkUsSUFBSzgyQixTQUFTOTJCLEtBQ2QyMkIsS0FBTUcsU0FBUyxrQkFBb0I5c0IsTUFBTSxHQUFLLFNBQzlDM1AsTUFBT3k4QixTQUFTLGtCQUFvQjlzQixNQUFNLEdBQUssWUFFakQrc0IsV0FBWSxFQUVoQixFQUdBQSxXQUNGNXlCLEtBQUt1UixPQUFPMGQsS0FBS2EsU0FBUyxTQUFVaHpCLFFBRXRDLE1BQU1tb0IsT0FBUzFvQixNQUFNSSxjQUNyQixHQUFJc29CLE9BQVEsQ0FDVixPQUFRQSxPQUFPN3VCLE1BQ2IsSUFBSyxPQUNINEosS0FBS3VSLE9BQU8wZCxLQUFLYSxTQUFTLFFBQVM3SyxPQUFPL3VCLE9BQ3RDK3VCLE9BQU8vdUIsUUFBVXkyQixTQUFTQyxXQUFXQyxRQUN2QzdzQixLQUFLdVIsT0FBTzBkLEtBQUthLFNBQVMsV0FBWW5ELFNBQVNNLFVBQVVHLE9BQ3pEcHRCLEtBQUt1UixPQUFPMGQsS0FBS2EsU0FBUyxPQUFRLEtBRXBDLE1BQ0YsSUFBSyxRQUNIOXZCLEtBQUt1UixPQUFPMGQsS0FBS2EsU0FBUyxXQUFZN0ssT0FBTy91QixPQUN6Qyt1QixPQUFPL3VCLFFBQVV5MkIsU0FBU00sVUFBVUMsZUFDdENsdEIsS0FBS3VSLE9BQU8wZCxLQUFLYSxTQUFTLE9BQVFJLFNBQVNDLDhCQUE4QixHQUFHdDBCLEtBQ25Fb3BCLE9BQU8vdUIsUUFBVXkyQixTQUFTTSxVQUFVRSxVQUM3Q250QixLQUFLdVIsT0FBTzBkLEtBQUthLFNBQVMsT0FBUSxPQUVsQzl2QixLQUFLdVIsT0FBTzBkLEtBQUthLFNBQVMsT0FBUSxJQUVwQyxNQUNGLElBQUssZUFDTCxJQUFLLG9CQUNIOXZCLEtBQUt1UixPQUFPMGQsS0FBS2EsU0FBUyxPQUFRN0ssT0FBTy91QixPQUc3QyxHQUFtQixXQUFmcUcsTUFBTThCLEtBQW1CLENBQzNCLE9BQVE5QixNQUFNeTJCLFVBQVVqMkIsUUFBUUksUUFDOUIsSUFBSyxZQUNIeUssY0FBY3FyQixnQkFBZ0JqekIsS0FBS3VSLE9BQU8wZCxLQUFLQSxNQUMvQyxNQUNGLElBQUssT0FDSHRDLFNBQVM2QyxjQUFjeHZCLEtBQUt1UixPQUFPMGQsS0FBSzFkLFFBQ3hDLE1BQ0YsSUFBSyxnQkFDSG9iLFNBQVM4QyxpQkFBaUJ6dkIsS0FBS3VSLE9BQU8wZCxLQUFLMWQsT0FBUXZSLEtBQUt1UixPQUFPNUUsUUFDL0QsTUFDRixJQUFLLG1CQUNILElBQUtrRyxPQUFPakcsT0FBT21PLFdBQVduYSxPQUk1QixZQUhBbUksR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLQyxTQUFTLCtCQUl2Qm12QixTQUFTOEMsaUJBQWlCenZCLEtBQUt1UixPQUFPMGQsS0FBSzFkLE9BQVFzQixPQUFPakcsT0FBT21PLFdBQVcxa0IsUUFBTzBNLEdBQUtBLEVBQUU5SSxNQUFNeTFCLE9BQU85dUIsU0FBUW9ELEtBQUlqQixHQUFLQSxFQUFFOUksU0FHOUgsTUFDRixDQUNGLENBQ0ErRixLQUFLaEMsUUFBTyxFQUNkLENBRUEsYUFBTWsxQixDQUFTMzJCLE9BQ2IsTUFBTTQyQixXQUFhNTJCLE1BQU04eEIsYUFBYThDLFFBQVEsY0FDeEM3ckIsS0FBT3NKLEtBQUs0ZCxNQUFNMkcsWUFDeEIsR0FBa0IsYUFBZDd0QixLQUFLakgsS0FDUDJCLEtBQUtvekIsY0FBY3pHLFNBQVM0QixhQUFhanBCLE9BQ3pDdEYsS0FBS2hDLFFBQU8sUUFFWixHQUFtQixXQUFkc0gsS0FBS2pILE1BQTJDLFVBQXRCaUgsS0FBSyt0QixjQUE2QixDQUFDLE9BQVEsU0FBU3J3QixTQUFTc0MsS0FBS2pILE1BQU8sQ0FDdEcsTUFBTWkxQixlQUFpQjFyQixjQUFjMnJCLHFCQUFxQmgzQixNQUFPK0ksS0FBSyt0QixjQUFnQi90QixLQUFLakgsTUFDdkZpSCxLQUFLK3RCLGNBQThCLFVBQWQvdEIsS0FBS2pILE1BQzVCMkIsS0FBS3VSLE9BQU81RSxPQUFTMm1CLFNBQVNqOUIsUUFBT3FHLEdBQUtBLEVBQUVnekIsT0FBTzl1QixTQUNuRFosS0FBS2hDLFFBQU8sSUFDaUIsSUFBcEJzMUIsU0FBUzF5QixRQUNkLENBQUMsUUFBUyxVQUFVb0MsU0FBU3N3QixTQUFTLEdBQUdqMUIsUUFDdkNpMUIsU0FBUyxHQUFHdEUsTUFDZGh2QixLQUFLdVIsT0FBT29nQixNQUFRLGlCQUNwQjN4QixLQUFLdVIsT0FBTzBkLEtBQUthLFNBQVMsT0FBUXdELFNBQVMsR0FBR3RFLE9BRTlDaHZCLEtBQUt1UixPQUFPb2dCLE1BQVEsZ0JBRXRCM3hCLEtBQUt1UixPQUFPMGQsS0FBS2EsU0FBUyxLQUFNd0QsU0FBUyxHQUFHcGxCLElBQzVDbE8sS0FBS3VSLE9BQU8wZCxLQUFLYSxTQUFTLE9BQVF3RCxTQUFTLEdBQUdsOUIsTUFDOUM0SixLQUFLaEMsUUFBTyxHQUdsQixDQUVKLENBRUEsT0FBQW8xQixDQUFTbkUsTUFrQlAsT0FqQkFqdkIsS0FBS3VSLE9BQU8wZCxLQUFPQSxLQUNELEtBQWRBLEtBQUtELEtBQ1BodkIsS0FBS3VSLE9BQU9vZ0IsTUFBUSxpQkFDQyxLQUFaMUMsS0FBSy9nQixLQUNkbE8sS0FBS3VSLE9BQU9vZ0IsTUFBUSxpQkFFbEIxQyxLQUFLM1ksYUFBZXZDLFVBQVV1UCxnQkFBZ0J0UCxTQUEyQyxJQUFoQy9QLFNBQVNnckIsS0FBS3ZxQixTQUFVLEtBQWF1cUIsS0FBSzBCLFVBQ3JHM3dCLEtBQUt1UixPQUFPaWlCLGNBQWUsRUFFM0J4ekIsS0FBS3VSLE9BQU9paUIsY0FBZSxFQUVKLEtBQXJCdkUsS0FBS2hCLGNBQ1BqdUIsS0FBS3VSLE9BQU9raUIsVUFBVyxHQUVQLEtBQWR4RSxLQUFLeHhCLE9BQ1B1QyxLQUFLdVIsT0FBT21pQixTQUFVLEdBRWpCLEVBQ1QsQ0FFQSxtQkFBYWhqQixDQUFRaWpCLFNBQVcsQ0FBQyxFQUFHaFksT0FBUyxDQUFDLEdBQzVDLE1BQU1wSyxPQUFTM1MsUUFBUUMsTUFBTTZhLFlBQVksQ0FDdkN1VixLQUFNLEtBQ04wQyxNQUFPLEdBQ1A2QixjQUFjLEVBQ2RDLFVBQVUsRUFDVkMsU0FBUyxFQUNUL21CLE9BQVEsSUFDUGdQLFFBQ0dpWSxPQUFTLElBQUlqRSxzQkFBc0JwZSxPQUFRLENBQUMsR0FDbERxaUIsT0FBT1IsY0FBY3pHLFNBQVM0QixhQUFhb0YsV0FDM0NDLE9BQU81MUIsUUFBTyxFQUNoQixFQy9VSyxNQUFNNjFCLFdBQ1gsbUJBQWFuakIsQ0FBUXBSLFFBQVUsQ0FBQyxHQUMxQkEsUUFBUWdYLGFBQ1ZoWCxRQUFRZ2tCLGdCQUFrQixDQUFDLEVBQ3ZCdlAsVUFBVXVQLGdCQUFnQkMsVUFBWWprQixRQUFRZ1gsYUFDaERoWCxRQUFRZ2tCLGdCQUFnQkMsU0FBVSxHQUVoQ3hQLFVBQVV1UCxnQkFBZ0J0UCxVQUFZMVUsUUFBUWdYLGFBQ2hEaFgsUUFBUWdrQixnQkFBZ0J0UCxTQUFVLEdBRWhDRCxVQUFVdVAsZ0JBQWdCcFAsT0FBUzVVLFFBQVFnWCxhQUM3Q2hYLFFBQVFna0IsZ0JBQWdCcFAsTUFBTyxHQUU3QkgsVUFBVXVQLGdCQUFnQmpaLFVBQVkvSyxRQUFRZ1gsYUFDaERoWCxRQUFRZ2tCLGdCQUFnQmpaLFNBQVUsSUFJbEMvSyxRQUFRbEosT0FBU2tKLFFBQVEydUIsY0FBYTN1QixRQUFRMnVCLFlBQWMzdUIsUUFBUWxKLE1BQ3hFLE1BQU0wOUIseUJBQ29ELFlBQXhEeDJCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUN0Qm9JLEtBQU8sQ0FDWHl1QixzQkFDRXoyQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDekJvQyxRQUFRMDBCLHdCQUNYQywyQkFDRTMyQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxnQ0FDekJvQyxRQUFRNDBCLDZCQUNYNWQsV0FBWXZDLFVBQVV1UCxnQkFDdEJ3USx5QkFDQUssZUFBZ0I3MEIsUUFBUTYwQixpQkFBa0IsRUFDMUM3MEIsY0FHNEIsSUFBckJBLFFBQVE4MEIsWUFDYjkwQixRQUFRKzBCLGdCQUFrQixLQUU1Qi91QixLQUFLZ3ZCLFVBQVlDLGdCQUFnQkQsVUFBVWgxQixVQUU3QyxNQUFNMmEsV0FBYXdHLGVBQ2pCLHlDQUNBbmIsTUFFRixPQUFPLElBQUk0VyxTQUFRaEIsVUFDakIsSUFBSXlYLFNBQVcsS0FDZixNQUFNNkIsSUFBTSxJQUFJQyxPQUFPLENBQ3JCL2xCLE1BQU9wUCxRQUFRMnVCLFlBQ1gzd0IsS0FBS0MsS0FBSzBXLE9BQU8saUNBQWtDLENBQ25EN2QsS0FBTWtKLFFBQVEydUIsY0FFZDN3QixLQUFLQyxLQUFLQyxTQUFTLDZCQUN2QmlULFFBQVN3SixLQUNUeWEsUUFBUyxDQUNQdnpCLEtBQU0sQ0FDSjlELE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsaUJBQzFCbTNCLFNBQVUxYSxPQUNSMFksU0FBVyxJQUFJaUMsU0FBUzNhLEtBQUssR0FBR3JHLGNBQWMscUJBQ3ZDc0gsUUFBUXlYLGFBSXJCcFgsUUFBUyxPQUNUSixNQUFPLFNBRVRxWixJQUFJeDJCLFFBQU8sRUFBSSxHQUVuQixFQ25FSyxNQUFNNjJCLFNBQ1gsV0FBQXh2QixHQUNFckYsS0FBS29YLE1BQVEsR0FDYnBYLEtBQUs4MEIsVUFBWSxJQUNuQixDQUVBLDBCQUFhQyxDQUFlMVksV0FDMUIsTUFBTXZNLFFBQVV4UyxLQUFLZ2YsU0FBU3BmLElBQUltZixXQUNsQyxJQUFLdk0sUUFBUyxPQUNkLE1BQU14RCxXQUFhdE0sS0FBS2cxQixZQUFZbGxCLFNBRXBDLE9BREF4RCxLQUFLK1AsVUFBWUEsVUFDVi9QLElBQ1QsQ0FFQSx3QkFBYTBvQixDQUFhbGxCLFNBQ3hCLE1BQU1tbEIsWUFBY25KLEVBQUVoYyxRQUFRVyxTQUFTLEdBQ3ZDLElBQUt3a0IsWUFBYSxPQUNsQixNQUFNM29CLFdBQWF0TSxLQUFLazFCLG9CQUFvQkQsYUFFNUMsT0FEQTNvQixLQUFLd0QsUUFBVUEsUUFDUnhELElBQ1QsQ0FFQSxnQ0FBYTRvQixDQUFxQjVvQixNQUNoQyxNQUFNNm9CLFNBQVd2bUIsS0FBSzRkLE1BQU1DLFNBQVNuZ0IsS0FBS3ZQLFFBQVF3VSxTQUNsRCxhQUFhdlIsS0FBSytCLFNBQVNvekIsU0FDN0IsQ0FFQSxxQkFBYXB6QixDQUFVdUQsTUFDckIsTUFBTWdILEtBQU8xTSxPQUFPeWUsT0FBTyxJQUFJcmUsS0FBUXNGLE1BQ3ZDLElBQUssSUFBSStYLE1BQVEsRUFBR0EsTUFBUS9RLEtBQUs4SyxNQUFNeFcsT0FBUXljLFFBQ0EsV0FBekMvUSxLQUFLOEssTUFBTWlHLFFBQVFoWSxhQUFhalAsT0FDbENrVyxLQUFLOEssTUFBTWlHLE9BQVN6ZCxPQUFPeWUsT0FBTyxJQUFJdEssVUFBYXpILEtBQUs4SyxNQUFNaUcsUUFDMUQvUSxLQUFLOEssTUFBTWlHLE9BQU8rWCxTQUNwQjlvQixLQUFLOEssTUFBTWlHLE9BQU9nWSxnQkFBa0Ivb0IsS0FBSzhLLE1BQU1pRyxPQUFPaVksZ0JBSTVELE9BQU9ocEIsSUFDVCxDQUVBLHNCQUFhaVcsQ0FBV2htQixPQUN0QkEsTUFBTUUsaUJBRU4sTUFBTTg0QixLQUFPaDVCLE1BQU1JLGNBQ25CLEdBQUk0NEIsTUFBUUEsS0FBS3ZtQixVQUFVeVQsU0FBUyxvQkFBc0JubEIsS0FBS3NHLEtBQUsyRSxLQUNsRSxPQUVGLE1BQU11SCxRQUFVeWxCLEtBQUsxNEIsUUFBUSxpQkFDdkJ5UCxXQUFhdE0sS0FBSyswQixjQUFjamxCLFFBQVEvUyxRQUFRc2YsV0FDdEQsSUFBSy9QLEtBQU0sT0FDWCxNQUFNa3BCLEtBQU9ELEtBQUt4NEIsUUFBUXk0QixLQUMxQixJQUFLQSxLQUFNLE9BQ1gsTUFBTTdhLE9BQVM0YSxLQUFLMTRCLFFBQVEsV0FDNUIsR0FBSzhkLE9BRUUsQ0FDTCxNQUFNK1osUUFBVS9aLE9BQU92RixpQkFBaUIsa0JBQ3hDLElBQUssTUFBTWdMLEtBQUtzVSxRQUNkcG9CLEtBQUttcEIsVUFBVXJWLEVBQUVyakIsUUFBUXk0QixNQUUzQmxwQixLQUFLb3BCLFFBQVFGLEtBQ2YsTUFQRWxwQixLQUFLcXBCLFdBQVdILE1BUWxCbHBCLEtBQUtpZixnQkFDUCxDQUVBLHFCQUFhcUssQ0FBVXR3QixNQUNyQixHQUFJaEksS0FBS3NHLEtBQUsyRSxLQUFNLENBQ2xCLElBd0JJK0QsS0F4QkFnUSxTQUFXdlQsR0FBR2tqQixLQUFLNEosV0FBV3gvQixRQUFPeVosU0FFckM5UCxLQUFLODFCLGNBQWN6M0IsT0FBU3lSLFFBQVFyUSxRQUFRLE9BQVEsU0FDZixhQUFyQ3FRLFFBQVFyUSxRQUFRLE9BQVEsWUFFcEIsQ0FBQyxnQkFBZ0J1RCxTQUFTaEQsS0FBSzgxQixjQUFjejNCLE9BQ3hDeVIsUUFBUXJRLFFBQVEsT0FBUSxlQUFpQjZGLEtBQUtuRSxLQUFLMnpCLGFBT2hFLEdBQUl4WSxTQUFTMWIsT0FBUSxDQUVuQixNQUFNbTFCLFVBQVksSUFBSXgzQixLQUFLK2QsU0FBUyxHQUFHeVosV0FHbkMsT0FGUSxJQUFJeDNCLEtBQ1d3M0IsV0FBYSxZQUVoQ3paLFNBQVMsR0FBR29aLFFBQVEsT0FBUSxRQUFTLFlBQzNDcFosU0FBVyxHQUVmLENBSUtoUSxLQURBZ1EsU0FBUzFiLGFBQ0laLEtBQUtnMUIsWUFBWTFZLFNBQVMsSUFEZixJQUFJdGMsVUFFSCxJQUFuQnNGLEtBQUt1ZixZQUNkdlksS0FBS3VZLFVBQVl2ZixLQUFLdWYsaUJBRWxCdlksS0FBSzBwQixRQUFRMXdCLEtBQ3JCLE1BQU9oSSxLQUFLdWdCLE9BQU9DLEtBQUssY0FBZXhZLEtBQ3pDLENBRUEsdUJBQWEyd0IsQ0FBWTdULFFBQ3ZCLE1BQU05RixTQUFXdlQsR0FBR2tqQixLQUFLNEosV0FBV3gvQixRQUFPeVosU0FDckM5UCxLQUFLODFCLGNBQWN6M0IsT0FBU3lSLFFBQVFyUSxRQUFRLE9BQVEsU0FBZ0QsYUFBckNxUSxRQUFRclEsUUFBUSxPQUFRLFlBQ3JGLENBQUMsZ0JBQWdCdUQsU0FBU2hELEtBQUs4MUIsY0FBY3ozQixPQUN4Q3lSLFFBQVFyUSxRQUFRLE9BQVEsZUFBaUIyaUIsVUFNdEQsR0FBSTlGLFNBQVMxYixPQUFRLE9BQ2IwYixTQUFTLEdBQUdvWixRQUFRLE9BQVEsUUFBUyxZQUMzQyxNQUFNcHBCLFdBQWF0TSxLQUFLZzFCLFlBQVkxWSxTQUFTLElBQzdDaFEsS0FBSzRwQixrQkFDQzVwQixLQUFLaWYsZ0JBQ2IsQ0FDRixDQUVBLGVBQU00SyxHQUNKLE1BQU1sYyxXQUFhd0csZUFBZXpnQixLQUFLaWtCLE9BQU9ySyxTQUFVNVosTUFDbEQ2ckIsZ0JBQWtCQyxFQUFFN1IsTUFDMUI0UixnQkFBZ0IsR0FBRzl1QixRQUFRd1UsT0FBUzVDLE9BQU8zTyxLQUFLbXpCLFlBRWhELE1BQU05dkIsU0FBVyxDQUNmTyxLQUFNdEcsS0FBS3NHLEtBQUtzSyxHQUNoQjhCLE9BQVExUyxLQUFLQyxLQUFLQyxTQUFTd0MsS0FBS2lrQixPQUFPdlYsT0FDdkMrQixRQUFTb2IsZ0JBQWdCLEdBQUdILFVBQzVCeHNCLE1BQU8sQ0FDTHdDLEtBQU0sQ0FDSnJELEtBQU0yQixLQUFLaWtCLE9BQU81bEIsS0FDbEJtb0IsTUFBTyxZQUNQc08sVUFBVzkwQixLQUFLODBCLGFBS2xCLENBQUMsU0FBVSxhQUFhOXhCLFNBQVNoRCxLQUFLcUIsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZd2lCLHFCQUFxQixPQUVoQyxjQUFsQmhtQixLQUFLcUIsV0FBMEJnQyxTQUFTRSxPQUFRLEdBR3BELGFBRGtCQyxZQUFZa04sT0FBT3JOLFNBRXZDLENBRUEsb0JBQU1rb0IsR0FFSixTQURNdnJCLEtBQUtvMkIsVUFDTnAyQixLQUFLcWMsVUFFSCxDQUNMLE1BQU1wQyxXQUFhd0csZUFBZXpnQixLQUFLaWtCLE9BQU9ySyxTQUFVNVosTUFDbEQ2ckIsZ0JBQWtCQyxFQUFFQyxVQUFVOVIsTUFBTSxHQUcxQzRSLGdCQUFnQjl1QixRQUFRd1UsT0FBUzVDLE9BQU8zTyxLQUFLbXpCLFlBRzdDLE1BQU1uSCxZQUFjMXVCLEtBQUtnZixTQUFTcGYsSUFBSThDLEtBQUtxYyxXQUN2Q3JjLEtBQUtxMkIsY0FBY3JLLFlBQVkwSixRQUFRLE9BQVEsUUFBUyxZQUU1RCxNQUFNL2tCLFVBQVlxYixZQUFZOXRCLE9BQU8sQ0FDbkN1UyxRQUFTb2IsZ0JBQWdCSCxZQUczQixhQURNM2lCLEdBQUdrakIsS0FBS0MsY0FBY3ZiLEtBQUssR0FDMUJBLEdBQ1QsT0FqQlEzUSxLQUFLbTJCLFdBa0JmLENBRUEsVUFBQTF1QixDQUFZbkMsTUFDTEEsS0FBS2d4QixRQUNSMTJCLE9BQU95ZSxPQUFPcmUsS0FBS29YLE1BQU05UixLQUFLaXhCLE1BQU9qeEIsS0FBS25FLEtBRTlDLENBRUEsV0FBQXExQixDQUFhbHhCLE1BQ1gsTUFBTTJRLE1BQVFyVyxPQUFPeWUsT0FBTyxJQUFJdEssVUFBYXpPLEtBQUtuRSxNQUNsRG5CLEtBQUtvWCxNQUFNbGdCLEtBQUsrZSxPQUNTLGlCQUFyQmpXLEtBQUtpa0IsT0FBTzVsQixPQUNkMkIsS0FBSzgwQixVQUFZeHZCLEtBQUtuRSxLQUFLMnpCLFVBRS9CLENBRUEsT0FBQTJCLENBQVNueEIsTUFDUHRGLEtBQUtvWCxNQUFNbGdCLEtBQUtvTyxLQUNsQixDQUVBLFVBQUE4VyxDQUFZbWEsTUFDVnYyQixLQUFLb1gsTUFBTXNmLE9BQU9ILEtBQU0sRUFDMUIsQ0FFQSxPQUFBYixDQUFTOXNCLFdBQ0ZBLFVBQW1DLFdBQXJCa2pCLEVBQUV6dEIsS0FBS3VLLGFBQzFCNUksS0FBSzRJLFdBQVksRUFDbkIsQ0FFQSxTQUFBNnNCLENBQVc3c0IsV0FDSkEsVUFBbUMsV0FBckJrakIsRUFBRXp0QixLQUFLdUssYUFDMUI1SSxLQUFLNEksV0FBWSxFQUNuQixDQUVBLFVBQUErc0IsQ0FBWS9zQixVQUNWNUksS0FBSzRJLFdBQWE1SSxLQUFLNEksU0FDekIsQ0FFQSxXQUFJa0gsR0FDRixPQUFJOVAsS0FBSzIyQixTQUFpQjMyQixLQUFLMjJCLFNBQzNCMzJCLEtBQUs0MkIsV0FBbUJ0NUIsS0FBS2dmLFNBQVNwZixJQUFJOEMsS0FBSzQyQixpQkFBbkQsQ0FFRixDQUVBLFdBQUk5bUIsQ0FBU2pFLEdBQ1g3TCxLQUFLMjJCLFNBQVc5cUIsQ0FDbEIsQ0FFQSxhQUFJd1EsR0FDRixPQUFJcmMsS0FBSzQyQixXQUFtQjUyQixLQUFLNDJCLFdBQzdCNTJCLEtBQUsyMkIsU0FBaUIzMkIsS0FBSzIyQixTQUFTem9CLFFBQXhDLENBRUYsQ0FFQSxhQUFJbU8sQ0FBV3hRLEdBQ2I3TCxLQUFLNDJCLFdBQWEvcUIsQ0FDcEIsQ0FJQSx3QkFBV2lxQixHQUNULE1BQU8sQ0FDTGUsUUFBUyxDQUFDLFNBQVUsU0FBVSxRQUFTLFdBQVksYUFDbkRDLGlCQUFrQixLQUV0QixDQUlBLFdBQUlDLEdBQ0YsT0FBTy8yQixLQUFLb1gsTUFBTS9nQixRQUFPZ2hCLEdBQUtBLEVBQUUyZixRQUNsQyxDQUVBLFVBQUlBLEdBQ0YsR0FBSWgzQixLQUFLKzJCLFFBQVFuMkIsT0FBUSxPQUFPWixLQUFLKzJCLFFBQVEsRUFFL0MsQ0FFQSxXQUFJRSxHQUNGLE9BQU9qM0IsS0FBS29YLE1BQU0vZ0IsUUFBT2doQixJQUFNQSxFQUFFMmYsUUFDbkMsQ0FFQSxVQUFJRSxHQUNGLEdBQUlsM0IsS0FBS2kzQixRQUFRcjJCLE9BQVEsT0FBT1osS0FBS2kzQixRQUFRLEVBRS9DLENBRUEsYUFBSUUsR0FDRixPQUFJbjNCLEtBQUsrMkIsUUFBUW4yQixPQUFTLENBRTVCLENBRUEsWUFBSXcyQixHQUNGLE9BQU85NUIsS0FBS3NHLEtBQUsyRSxJQUNuQixDQUVBLFlBQUlsSCxHQUVGLE9BREtyQixLQUFLNmtCLFlBQVc3a0IsS0FBSzZrQixVQUFZdm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ3pEOEMsS0FBSzZrQixTQUNkLENBRUEsWUFBSXhqQixDQUFVd0ssSUFDRixJQUFOQSxJQUFhN0wsS0FBSzZrQixVQUFZdm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQzVEOEMsS0FBSzZrQixVQUFZaFosQ0FDbkIsQ0FFQSxRQUFJdkcsR0FDRixPQUFPc0osS0FBSzRkLE1BQU14c0IsS0FBS216QixXQUN6QixDQUVBLGNBQUlBLEdBQ0YsT0FBT3ZrQixLQUFLQyxVQUFVN08sTUFBTSxDQUFDbkUsSUFBSzNGLFNBQ2hDLEdBQWMsT0FBVkEsUUFDQThKLEtBQUtpa0IsT0FBTzRTLFNBQVM3ekIsU0FBU25ILE9BQzlCQSxJQUFJOE8sV0FBVzNLLEtBQUtpa0IsT0FBTzZTLGtCQUMvQixPQUFPNWdDLFFBRVgsRUMzUkssTUFBTW1oQywwQkFBMEJ4QyxTQUNyQywyQkFBYXlDLENBQWdCcmQsTUFDM0JBLEtBQUtDLEdBQ0gsUUFDQSxxQ0FDQWxhLEtBQUt1aUIsVUFBVXRwQixLQUFLK0csT0FHdEJpYSxLQUFLQyxHQUNILFFBQ0Esd0JBQ0FtZCxrQkFBa0IzVSxTQUFTenBCLEtBQUsrRyxPQUVsQ2lhLEtBQUtDLEdBQ0gsUUFDQSw2QkFDQW1kLGtCQUFrQjNVLFNBQVN6cEIsS0FBSytHLE1BRXBDLENBRUEsd0JBQVc4MUIsR0FDVCxPQUFPbDNCLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTXk1QixjQUFlLENBQ3BEbGMsU0FBVSx1REFDVnZiLEtBQU0sZUFDTnFRLE1BQU8seUJBRVgsQ0FFQSxVQUFJdVYsR0FDRixPQUFPb1Qsa0JBQWtCdkIsYUFDM0IsQ0FFQSxnQkFBSXlCLEdBQ0YsR0FBSXYzQixLQUFLbzFCLE9BQVEsQ0FDZixJQUFJdDBCLE1BQVEsRUFDWixJQUFLLE1BQU11VyxLQUFLclgsS0FBS29YLE1BQ2ZDLEVBQUVrSSxTQUFRemUsT0FBUyxHQUV6QixPQUFPQSxLQUNULENBRUYsQ0FFQSxnQkFBSTAyQixHQUNGLE9BQU94M0IsS0FBS29YLE1BQU0sSUFBSW5kLE9BQU9tWCxlQUFZdlQsQ0FDM0MsQ0FFQSxXQUFJNDVCLEdBQ0YsUUFBaUMsSUFBdEJ6M0IsS0FBS3UzQixhQUNoQixPQUFJdjNCLEtBQUsraUIsSUFDSC9pQixLQUFLdTNCLGFBQWUsRUFHdEJ2M0IsS0FBSzAzQixJQUNIMTNCLEtBQUt1M0IsZUFBaUJ2M0IsS0FBS29YLE1BQU14VyxZQUR2QyxDQUtGLENBRUEsV0FBSXlULEdBQ0YsUUFBNEIsSUFBakJyVSxLQUFLeTNCLFFBQ2hCLE9BQVF6M0IsS0FBS3kzQixPQUNmLENBRUEsb0JBQUlFLEdBQ0YsT0FBT3I2QixLQUFLZ2xCLE1BQU1wbEIsSUFBSThDLEtBQUs4MEIsWUFBWXZzQixJQUN6QyxDQUVBLGlCQUFNK3NCLEdBQ0osSUFBS3QxQixLQUFLbzFCLE9BQVEsT0FDbEIsTUFBTW5mLE1BQVEsSUFBSWxDLFVBS2xCLGFBSk1rQyxNQUFNa0wsU0FBUyxDQUNuQmhnQixLQUFNbkIsS0FBSzQzQixNQUFNM2hCLE1BQU1qQixjQUFnQixHQUN2Q3NNLFFBQVEsVUFFR3JMLE1BQU1xZixZQUFZLENBQUV1QyxhQUFhLEdBQ2hELENBRUEsT0FBQTdCLENBQVMxd0IsTUFDUCxPQUFRQSxLQUFLbkksUUFDWCxJQUFLLE1BSUwsSUFBSyxPQUNINkMsS0FBS3cyQixZQUFZbHhCLE1BQ2pCLE1BRUYsSUFBSyxhQUNIdEYsS0FBS3lILFdBQVduQyxNQUNoQixNQUdGLElBQUssYUFDSHRGLEtBQUs4M0IsV0FBV3h5QixNQUtoQmhJLEtBQUtzRyxLQUFLMkUsS0FBTXZJLEtBQUt1ckIsaUJBQ3BCanVCLEtBQUt1Z0IsT0FBT0MsS0FBSyxjQUFleFksS0FDdkMsQ0FFQSxnQkFBTXd5QixDQUFZeHlCLE1BQ1poSSxLQUFLc0csS0FBSzJFLE9BQ1B2SSxLQUFLbzFCLFNBQ1JwMUIsS0FBS28xQixRQUFTLEVBQ2RwMUIsS0FBSzQzQixNQUFRdHlCLEtBQUtuRSxNQUd4QixDQUVBLHFCQUFhdWhCLENBQVVubUIsT0FDckJBLE1BQU1FLGlCQUVOLE1BQU1DLEVBQUlILE1BQU1JLGNBQ1ZRLE9BQVNULEVBQUVLLFFBQVFJLE9BQ25CUCxHQUFLRixFQUFFRyxRQUFRLGlCQUNmaVQsUUFBVXBULEVBQUVHLFFBQVEsaUJBQ3BCbzRCLFlBQWN2NEIsRUFBRUcsUUFBUSxpQkFDeEJ5UCxXQUFhK3FCLGtCQUFrQm5DLG9CQUFvQkQsYUFDekQzb0IsS0FBSytQLFVBQVl2TSxRQUFRL1MsUUFBUXNmLFVBQ2pDLE1BQU1rYSxLQUFPcjZCLE9BQU9VLElBQUlHLFNBQVN3NUIsTUFFakMsT0FBUXA1QixRQUNOLElBQUssY0FDSG1QLEtBQUs4UCxXQUFXbWEsWUFDVmpxQixLQUFLaWYsaUJBQ1gsTUFHRixJQUFLLGFBQ0hqZixLQUFLNHBCLGtCQUNDNXBCLEtBQUtpZixpQkFDWCxNQUdGLElBQUssWUFBYSxDQUNoQixNQUFNem5CLEtBQU8sQ0FBQyxFQUNkLElBQUssTUFBTWxDLFFBQVEwSyxLQUFLOEssTUFBTyxDQUM3QixNQUFNcEMsYUFBZS9RLFNBQVNyQyxLQUFLb1QsYUFBYyxJQUM1Q2xaLE1BQU1rWixnQkFDVGxSLEtBQUtrUixlQUFnQixFQUV6QixDQUVBLE1BQU03VCxXQUFhRCxTQUFTMkMsYUFBYSxDQUFFQyxPQUMzQzNDLEtBQUsyekIsVUFBWXgzQixLQUFLc0csS0FBS3NLLEdBRTNCLE1BQU01SSxLQUFPLENBQ1hqSCxLQUFNMkIsS0FBSzgxQixjQUFjejNCLEtBQ3pCbEIsT0FBUSxhQUNSbTVCLE9BQVFoNUIsS0FBS3NHLEtBQUsyRSxLQUNsQnBILE1BRUY0MkIsWUFBWUMsS0FBSyxDQUFFMWxCLElBQUsxUCxPQUFPcTFCLE9BQU9yMkIsT0FBUSxHQUM5QzBLLEtBQUswcEIsUUFBUTF3QixNQUNiLEtBQ0YsQ0FFQSxRQUFTLENBQ1AsTUFBTWhHLFFBQVUsQ0FDZHBCLFFBQVEsRUFDUm9ILEtBQU01SSxFQUFFSyxRQUNSNGMsUUFBU2pkLEVBQUVzUyxVQUNYaVcsT0FBUXZvQixTQUVKcVgsVUFBVW1rQixNQUFNNXJCLEtBQUs4SyxNQUFNbWYsTUFBT3A1QixPQUFRbUMsU0FDaEQsTUFBTWdHLEtBQU8sQ0FDWGpILEtBQU0yQixLQUFLODFCLGNBQWN6M0IsS0FDekJsQixPQUFRLGFBQ1JvNUIsS0FDQUQsT0FBUWg1QixLQUFLc0csS0FBSzJFLEtBQ2xCcEgsS0FBTSxDQUNKMnpCLFVBQVd4M0IsS0FBS3NHLEtBQUtzSyxLQUdwQjVRLEtBQUtzRyxLQUFLMkUsT0FBTWpELEtBQUtuRSxLQUFPbUwsS0FBSzhLLE1BQU1tZixNQUFNM1ksY0FDbER0UixLQUFLMHBCLFFBQVExd0IsTUFDYixLQUNGLEVBRUosQ0FFQSxhQUFNOHdCLEdBQ0osR0FBS3AyQixLQUFLNDNCLE1BQVYsQ0FFQTUzQixLQUFLb1gsTUFBUXBYLEtBQUtvWCxNQUFNL2dCLFFBQU84SyxXQUNPLElBQXRCQSxLQUFLbEgsTUFBTThCLFNBRzNCLElBQUssTUFBTXNiLEtBQUtyWCxLQUFLb1gsTUFDZEMsRUFBRStkLFNBQ0wvZCxFQUFFM1MsU0FBVzJTLEVBQUVyQyxjQUFnQixFQUMvQnFDLEVBQUVmLFdBQWFlLEVBQUVmLFlBQWN2QyxVQUFVdVAsZ0JBQWdCdFAsUUFDekRxRCxFQUFFOGdCLGlCQUFtQjlnQixFQUFFOGdCLGtCQUFvQixFQUMzQzlnQixFQUFFK2dCLHNCQUF3Qi9nQixFQUFFK2dCLHVCQUF5QixRQUMvQy9nQixFQUFFOEosU0FBUyxDQUFFaGdCLEtBQU1uQixLQUFLNDNCLE1BQU12Z0IsRUFBRTNTLFVBQVc0YyxRQUFRLEtBRzdELElBQUssSUFBSWQsRUFBSSxFQUFHQSxFQUFJeGdCLEtBQUtvWCxNQUFNeFcsT0FBUTRmLElBQ2pDeGdCLEtBQUtvWCxNQUFNb0osR0FBRzRVLFNBQ2hCcDFCLEtBQUtvWCxNQUFNb0osR0FBRzZVLGdCQUFrQnIxQixLQUFLb1gsTUFBTW9KLEdBQUc4VSxZQUFZLENBQ3hEK0MsZ0JBQWdCLEtBS3RCcjRCLEtBQUtxMUIsZ0JBQWtCcjFCLEtBQUtzMUIsYUF2QlgsQ0F3Qm5CLENBRUEsU0FBQVksR0FDRWwyQixLQUFLcTJCLFFBQVMsQ0FDaEIsRUN4TkssTUFBTWlDLG9CQUNYLFdBQUFqekIsQ0FBYS9GLFFBQVUsQ0FBQyxHQUN0QlUsS0FBS3U0QixTQUFXajVCLE9BQ2xCLENBRUEsV0FBSUEsR0FDRixPQUFPVixRQUFRQyxNQUFNNmEsWUFBWTFaLEtBQUtxRixZQUFZb1UsZUFBZ0J6WixLQUFLdTRCLFNBQ3pFLENBRUEsWUFBSTNlLEdBQ0YsT0FBTzVaLEtBQUtWLFFBQVFzYSxRQUN0QixDQUVBLGNBQUk0ZSxHQUNGLE9BQU94NEIsS0FBS1YsUUFBUXFhLE9BQ3RCLENBRUEsZUFBTXdjLENBQVdzQyxrQkFBb0IsQ0FBQyxHQUNwQyxNQUFNeGUsV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUMzQzZyQixnQkFBa0JDLEVBQUU3UixNQUFNLEdBQ2hDNFIsZ0JBQWdCOXVCLFFBQVF3VSxPQUFTNUMsT0FBTzNPLEtBQUttekIsWUFDN0N0SCxnQkFBZ0I5dUIsUUFBUTI3QixVQUFZMTRCLEtBQUtxRixZQUFZalAsS0FDckR5MUIsZ0JBQWdCN2MsVUFBVUMsT0FBT2pQLEtBQUt3NEIsWUFFdEMsTUFBTW4xQixTQUFXekUsUUFBUUMsTUFBTTZhLFlBQzdCLENBQ0U5VixLQUFNdEcsS0FBS3NHLEtBQUtzSyxHQUNoQjhCLE9BQVExUyxLQUFLQyxLQUFLQyxTQUFTd0MsS0FBS1YsUUFBUW9QLE9BQ3hDK0IsUUFBU29iLGdCQUFnQkgsV0FFM0IrTSxtQkFHRSxDQUFDLFNBQVUsYUFBYXoxQixTQUFTaEQsS0FBS3FCLFlBQ3hDZ0MsU0FBU0MsUUFBVUUsWUFBWXdpQixxQkFBcUIsT0FFaEMsY0FBbEJobUIsS0FBS3FCLFdBQTBCZ0MsU0FBU0UsT0FBUSxHQUVwREMsWUFBWWtOLE9BQU9yTixVQUFVZ0UsTUFBS3NKLEtBQ3pCQSxLQUVYLENBRUEsb0JBQU00YSxDQUFnQmpzQixRQUFVLENBQUMsR0FFL0IsR0FESUEsUUFBUTgyQixTQUFTcDJCLEtBQUtvMkIsVUFDckJwMkIsS0FBS3FjLFVBRUgsQ0FDTCxNQUFNcEMsV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUMzQzZyQixnQkFBa0JDLEVBQUVDLFVBQVU5UixNQUFNLEdBRzFDNFIsZ0JBQWdCOXVCLFFBQVF3VSxPQUFTNUMsT0FBTzNPLEtBQUttekIsWUFDN0N0SCxnQkFBZ0I5dUIsUUFBUTI3QixVQUFZMTRCLEtBQUtxRixZQUFZalAsS0FDckR5MUIsZ0JBQWdCN2MsVUFBVUMsT0FBT2pQLEtBQUt3NEIsWUFHdEMsTUFBTXhNLFlBQWMxdUIsS0FBS2dmLFNBQVNwZixJQUFJOEMsS0FBS3FjLFdBQ3ZDcmMsS0FBS3EyQixjQUFjckssWUFBWTBKLFFBQVEsT0FBUSxRQUFTLFlBRTVELE1BQU0va0IsVUFBWXFiLFlBQVk5dEIsT0FBTyxDQUNuQ3VTLFFBQVNvYixnQkFBZ0JILFlBRzNCLGFBRE0zaUIsR0FBR2tqQixLQUFLQyxjQUFjdmIsS0FBSyxHQUMxQkEsR0FDVCxDQW5CRTNRLEtBQUttMkIsV0FvQlQsQ0FFQSxpQkFBQW5jLENBQW1CQyxNQUNqQkEsS0FBS0MsR0FDSCxRQUNBLHFDQUNBbGEsS0FBS3VpQixVQUFVdHBCLEtBQUsrRyxPQUV0QmlhLEtBQUtDLEdBQUcsUUFBUywrQkFBZ0NsYSxLQUFLdWlCLFVBQVV0cEIsS0FBSytHLE9BQ3JFaWEsS0FBS0MsR0FBRyxRQUFTLDRCQUE2QmxhLEtBQUtreUIsVUFBVWo1QixLQUFLK0csT0FDbEVpYSxLQUFLQyxHQUFHLFdBQVksUUFBU2xhLEtBQUtreUIsVUFBVWo1QixLQUFLK0csT0FDakRpYSxLQUFLQyxHQUFHLFFBQVMsMkJBQTRCbGEsS0FBSzI0QixVQUFVMS9CLEtBQUsrRyxPQUNqRWlhLEtBQUtDLEdBQUcsVUFBVyxPQUFRbGEsS0FBSzQ0QixPQUFPMy9CLEtBQUsrRyxNQUM5QyxDQUVBLDBCQUFhNjRCLENBQWU1ZSxNQUMxQixNQUNNNFIsZ0JBRHFCNVIsS0FBSyxHQUNXckcsY0FBYyxjQUN6RCxJQUFLaVksZ0JBQWlCLE9BQ3RCLElBQUtBLGdCQUFnQjl1QixRQUFRMjdCLFVBQVcsT0FDeEMsSUFDRzk0QixPQUFPazVCLG9CQUFvQng3QixLQUFLb0UsS0FBS3EzQixPQUFPLzFCLFNBQzNDNm9CLGdCQUFnQjl1QixRQUFRMjdCLFdBRzFCLE9BRUYsTUFBTXBzQixXQUFhZ3NCLG9CQUFvQnBELG9CQUFvQnJKLGlCQUNyRG1OLFVBQVlwNUIsT0FBT3llLE9BQ3ZCLElBQUkvZ0IsS0FBS29FLEtBQUtxM0IsTUFBTWxOLGdCQUFnQjl1QixRQUFRMjdCLFdBQzVDcHNCLE1BRUYwc0IsVUFBVUMsZUFDVkQsVUFBVWhmLGtCQUFrQkMsS0FDOUIsQ0FNQSxZQUFBZ2YsR0FBaUIsQ0FPakIsU0FBQU4sQ0FBV3A4QixPQUNULE1BRU1ZLE9BRlNaLE1BQU1JLGNBRUNJLFFBQVFJLE9BQzFCNkMsS0FBSzdDLFNBQVM2QyxLQUFLN0MsUUFBUSxDQUFFWixNQUFPMkIsUUFBUSxHQUNsRCxDQU9BLE1BQUEwNkIsQ0FBUXI4QixPQUVOLE1BRGtCLFVBQWRBLE1BQU1WLEtBQWlCbUUsS0FBS2t5QixVQUFVMzFCLE9BQ3JCLFVBQWRBLE1BQU1WLEdBQ2YsQ0FFQSxTQUFBcTJCLENBQVczMUIsT0FDVEEsTUFBTUUsaUJBRU4sTUFDTTZQLEtBRFMvUCxNQUFNSSxjQUNERSxRQUFRLHFCQUM1QixJQUFLeVAsS0FBTSxPQUNLdE0sS0FBS2s1QixRQUFRNXNCLE9BQ2hCdE0sS0FBS3VyQixnQkFDcEIsQ0FFQSxPQUFBMk4sQ0FBUzVzQixNQUNQLE1BQU02c0IsTUFBUTdzQixLQUFLOEksaUJBQWlCLFFBQ3BDLElBQUlxSCxTQUFVLEVBQ2QsSUFBSyxJQUFJK0QsRUFBSSxFQUFHQSxFQUFJMlksTUFBTXY0QixPQUFRNGYsSUFBSyxDQUNyQyxNQUFNNFksS0FBT0QsTUFBTTNZLEdBRW5CLElBQUlsYixLQURPLElBQUkrekIsaUJBQWlCRCxNQUNsQjduQixPQUNkak0sS0FBTzFHLFFBQVFDLE1BQU15NkIsV0FBV3Q1QixLQUFNcEIsUUFBUUMsTUFBTXlmLGFBQWFoWixPQUNqRSxJQUFLLE1BQU96SixJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFRakYsTUFDeEN0RixLQUFLbkUsS0FBTzNGLE1BQ1p1bUIsU0FBVSxDQUVkLENBQ0EsT0FBT0EsT0FDVCxDQUVBLFdBQUkzTSxHQUNGLE9BQUk5UCxLQUFLMjJCLFNBQWlCMzJCLEtBQUsyMkIsU0FDM0IzMkIsS0FBSzQyQixXQUFtQnQ1QixLQUFLZ2YsU0FBU3BmLElBQUk4QyxLQUFLNDJCLGlCQUFuRCxDQUVGLENBRUEsV0FBSTltQixDQUFTakUsR0FDWDdMLEtBQUsyMkIsU0FBVzlxQixDQUNsQixDQUVBLGFBQUl3USxHQUNGLE9BQUlyYyxLQUFLNDJCLFdBQW1CNTJCLEtBQUs0MkIsV0FDN0I1MkIsS0FBSzIyQixTQUFpQjMyQixLQUFLMjJCLFNBQVN6b0IsUUFBeEMsQ0FFRixDQUVBLGFBQUltTyxDQUFXeFEsR0FDYjdMLEtBQUs0MkIsV0FBYS9xQixDQUNwQixDQUVBLHlCQUFXNE4sR0FDVCxNQUFPLENBQ0xFLFFBQVMsQ0FBQyxvQkFDVmtkLFFBQVMsQ0FBQyxTQUFVLFNBQVUsUUFBUyxXQUFZLGFBQ25EQyxpQkFBa0IsS0FFdEIsQ0FFQSxRQUFJeHhCLEdBQ0YsT0FBT3NKLEtBQUs0ZCxNQUFNeHNCLEtBQUttekIsV0FDekIsQ0FFQSxjQUFJQSxHQUNGLE9BQU92a0IsS0FBS0MsVUFBVTdPLE1BQU0sQ0FBQ25FLElBQUszRixTQUNoQyxHQUFjLE9BQVZBLFFBQ0E4SixLQUFLVixRQUFRdTNCLFNBQVM3ekIsU0FBU25ILE9BQy9CQSxJQUFJOE8sV0FBVzNLLEtBQUtWLFFBQVF3M0Isa0JBQ2hDLE9BQU81Z0MsUUFFWCxDQUVBLFlBQUltTCxHQUVGLE9BREtyQixLQUFLNmtCLFlBQVc3a0IsS0FBSzZrQixVQUFZdm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ3pEOEMsS0FBSzZrQixTQUNkLENBRUEsWUFBSXhqQixDQUFVd0ssSUFDRixJQUFOQSxJQUFhN0wsS0FBSzZrQixVQUFZdm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQzVEOEMsS0FBSzZrQixVQUFZaFosQ0FDbkIsQ0FFQSwwQkFBYWtwQixDQUFlMVksV0FDMUIsTUFBTXZNLFFBQVV4UyxLQUFLZ2YsU0FBU3BmLElBQUltZixXQUNsQyxJQUFLdk0sUUFBUyxPQUNkLE1BQU14RCxXQUFhdE0sS0FBS2cxQixZQUFZbGxCLFNBRXBDLE9BREF4RCxLQUFLK1AsVUFBWUEsVUFDVi9QLElBQ1QsQ0FFQSx3QkFBYTBvQixDQUFhbGxCLFNBQ3hCLE1BQU1tbEIsWUFBY25KLEVBQUVoYyxRQUFRVyxTQUFTLEdBQ3ZDLElBQUt3a0IsWUFBYSxPQUNsQixNQUFNM29CLFdBQWF0TSxLQUFLazFCLG9CQUFvQkQsYUFFNUMsT0FEQTNvQixLQUFLd0QsUUFBVUEsUUFDUnhELElBQ1QsQ0FFQSxnQ0FBYTRvQixDQUFxQjVvQixNQUNoQyxNQUFNNm9CLFNBQVd2bUIsS0FBSzRkLE1BQU1DLFNBQVNuZ0IsS0FBS3ZQLFFBQVF3VSxTQUNsRCxJQUFLNGpCLFNBQVM5WSxVQUFXLENBQ3ZCLE1BQU12TSxRQUFVeEQsS0FBS3pQLFFBQVEsWUFDN0JzNEIsU0FBUzlZLFVBQVl2TSxTQUFTL1MsU0FBU3NmLFNBQ3pDLENBQ0EsYUFBYXJjLEtBQUsrQixTQUFTb3pCLFNBQzdCLENBRUEscUJBQWFwekIsQ0FBVXVELE1BQ3JCLE1BQU1nSCxLQUFPMU0sT0FBT3llLE9BQU8sSUFBSXJlLEtBQVFzRixNQUV2QyxhQURNZ0gsS0FBSzJzQixlQUNKM3NCLElBQ1QsQ0FHQSxPQUFBb3BCLENBQVM5c0IsV0FDRkEsVUFBbUMsV0FBckJrakIsRUFBRXp0QixLQUFLdUssYUFDMUI1SSxLQUFLNEksV0FBWSxFQUNuQixDQUVBLFNBQUE2c0IsQ0FBVzdzQixXQUNKQSxVQUFtQyxXQUFyQmtqQixFQUFFenRCLEtBQUt1SyxhQUMxQjVJLEtBQUs0SSxXQUFZLEVBQ25CLENBRUEsVUFBQStzQixDQUFZL3NCLFVBQ1Y1SSxLQUFLNEksV0FBYTVJLEtBQUs0SSxTQUN6QixDQUVBLGVBQU0yWixDQUFXaG1CLE9BQ2ZBLE1BQU1FLGlCQUVOLE1BQU13b0IsT0FBUzFvQixNQUFNSSxjQUNyQixHQUFJLFdBQVlzb0IsT0FBT2xvQixRQUFTLE9BQU9pRCxLQUFLMjRCLFVBQVVwOEIsT0FDdEQsR0FDRTBvQixRQUNBQSxPQUFPalcsVUFBVXlULFNBQVMsb0JBQ3pCbmxCLEtBQUtzRyxLQUFLMkUsS0FFWCxPQUVGLE1BQU1pdEIsS0FBT3ZRLE9BQU9sb0IsUUFBUXk0QixLQUM1QixJQUFLQSxLQUFNLE9BQ1gsTUFBTTdhLE9BQVNzSyxPQUFPcG9CLFFBQVEsYUFDOUIsR0FBSzhkLE9BRUUsQ0FDTCxNQUFNK1osUUFBVS9aLE9BQU92RixpQkFBaUIsb0JBQ3hDLElBQUssTUFBTWdMLEtBQUtzVSxRQUNkMTBCLEtBQUt5MUIsVUFBVXJWLEVBQUVyakIsUUFBUXk0QixNQUUzQngxQixLQUFLMDFCLFFBQVFGLEtBQ2YsTUFQRXgxQixLQUFLMjFCLFdBQVdILE1BUWxCLE1BQU1scEIsS0FBTzJZLE9BQU9wb0IsUUFBUSxxQkFDeEJ5UCxNQUFNdE0sS0FBS2s1QixRQUFRNXNCLE1BQ3ZCdE0sS0FBS3VyQixnQkFDUCxDQUlBLHNCQUFJN0csR0FDRixPQUFPcG5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUNuQyxDQUVBLFdBQUl5bkIsR0FDRixPQUFLM2tCLEtBQUtxQixlQUNOeEQsSUFBY21DLEtBQUs0a0IsV0FDckI1a0IsS0FBSzRrQixTQUE2QixjQUFsQjVrQixLQUFLcUIsVUFFaEJyQixLQUFLNGtCLFVBSmUsSUFLN0IsQ0FFQSxXQUFJRCxDQUFTOVksR0FDWDdMLEtBQUs0a0IsU0FBVy9ZLENBQ2xCLENBRUEsU0FBSTVSLEdBQ0YsT0FBSytGLEtBQUtvUixTQUNINUIsV0FBV3FCLGdCQUFnQjdRLEtBQUtvUixVQURaLElBRTdCLENBRUEsU0FBSUgsR0FDRixPQUFLalIsS0FBSy9GLE1BQ0h1VixXQUFXMEIsZ0JBQWdCbFIsS0FBS29SLFVBRGYsSUFFMUIsQ0FFQSxRQUFJbkwsR0FDRixPQUFLakcsS0FBS3NVLE9BQ0h0VSxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUFJOEMsS0FBS3NVLFFBRFIsSUFFM0IsQ0FFQSxVQUFJd1EsR0FDRixPQUFPOWtCLEtBQUtpRyxJQUNkLENBRUEsa0JBQUk4ZSxHQUNGLE1BQU8sSUFBSXpuQixLQUFLc0csS0FBS29oQixRQUN2QixDQUVBLFVBQUlDLEdBQ0YsT0FBSWpsQixLQUFLa2xCLFlBQW9CbGxCLEtBQUtrbEIsWUFDM0JsbEIsS0FBS21sQixXQUNkLENBRUEsaUJBQUlvVSxHQUNGLE9BQU92NUIsS0FBS2lsQixPQUFPdVUsT0FDckIsQ0FFQSxZQUFJcEMsR0FDRixPQUFPOTVCLEtBQUtzRyxLQUFLMkUsSUFDbkIsQ0FNQSxlQUFJMmMsR0FjRixPQWJLbGxCLEtBQUtvbEIsZUFDSnBsQixLQUFLcWxCLFdBQ1BybEIsS0FBS29sQixhQUFlNVYsV0FBVzBCLGdCQUFnQmxSLEtBQUtxbEIsYUFFcERybEIsS0FBS29sQixhQUFlcGxCLEtBQUsra0IsZUFBZU8sTUFDcEN0bEIsS0FBS29sQixhQUNQcGxCLEtBQUtxbEIsV0FBYSxHQUFHcmxCLEtBQUtvbEIsYUFBYXZZLE1BQU1xQixNQUFNbE8sS0FBS29sQixhQUFhbFgsS0FHckVsTyxLQUFLb2xCLGFBQWUsT0FJbkJwbEIsS0FBS29sQixZQUNkLENBRUEsZUFBSUQsR0FXRixPQVZLbmxCLEtBQUt1bEIsZUFDSnZsQixLQUFLa2xCLFlBQ1BsbEIsS0FBS3VsQixhQUNIdmxCLEtBQUtrbEIsWUFBWWpyQixPQUNqQitGLEtBQUtrbEIsWUFBWTVmLEtBQUtyTCxPQUN0QitGLEtBQUtrbEIsWUFBWTVmLEtBQUt3SixTQUV4QjlPLEtBQUt1bEIsYUFBZS9WLFdBQVdxQixnQkFBZ0I3USxLQUFLcWxCLGFBR2pEcmxCLEtBQUt1bEIsWUFDZCxDQUVBLGFBQUlDLEdBQ0YsT0FBS3hsQixLQUFLa2xCLGFBQWdCbGxCLEtBQUttbEIsWUFDeEJubEIsS0FBS3FsQixXQUR1QyxJQUVyRCxDQUVBLGFBQUlJLEdBQ0YsU0FBS3psQixLQUFLa2xCLGNBQWdCbGxCLEtBQUttbEIsWUFFakMsQ0FFQSxhQUFJSyxDQUFXM1osR0FDYjdMLEtBQUtxbEIsV0FBYXhaLENBQ3BCLENBRUEsVUFBSWdZLEdBQ0YsT0FBTzdqQixLQUFLL0YsTUFBTXlyQixnQkFBZ0IxbEIsS0FBS3NVLE9BQ3pDLENBRUEsYUFBSXFSLEdBQ0YsTUFBTWpnQixJQUFNOEosV0FBVzRDLG1CQUFtQnBTLEtBQUt3bEIsV0FDL0MsT0FBSTlmLEtBQ0csb0NBQ1QsQ0FFQSxRQUFJdFAsR0FDRixPQUFJNEosS0FBS2lSLE1BQWNqUixLQUFLaVIsTUFBTTdhLEtBQzNCNEosS0FBSy9GLE1BQU03RCxJQUNwQixDQUVBLGNBQUl3dkIsR0FDRixPQUFLNWxCLEtBQUtpbEIsT0FDSGpsQixLQUFLaWxCLE9BQU83dUIsS0FETSxPQUUzQixDQUVBLFlBQUl5dkIsR0FDRixNQUFNbmdCLElBQU04SixXQUFXNEMsbUJBQW1CcFMsS0FBS29SLFVBQy9DLE9BQUkxTCxLQUNHLG9DQUNULEVDdFpLLE1BQU0rekIsbUJBQW1CbkIsb0JBSzlCLHlCQUFXN2UsR0FDVCxPQUFPN2EsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNb2QsZUFBZ0IsQ0FDckRvZCxRQUFTLENBQ1AsZUFDQSxlQUNBLFlBQ0EsbUJBQ0E3cUIsT0FBTzNQLE1BQU1vZCxlQUFlb2QsU0FDOUJqZCxTQUFVLGlEQUVkLENBTUEsa0JBQU1xZixHQUNBajVCLEtBQUswNUIsWUFBbUQsV0FBckMxNUIsS0FBSzA1QixXQUFXcjBCLFlBQVlqUCxPQUNqRDRKLEtBQUswNUIsV0FBYTUzQixLQUFLQyxTQUFTL0IsS0FBSzA1QixZQUV6QyxDQUVBLFNBQUFmLENBQVdwOEIsT0FDVEYsTUFBTXM4QixVQUFVcDhCLE1BQ2xCLENBRUEsWUFBSTRYLEdBQ0YsT0FBT25VLEtBQUtWLFFBQVE2VSxRQUN0QixDQUVBLFlBQUlBLENBQVV0SSxHQUNaN0wsS0FBS3U0QixTQUFTcGtCLFNBQVd0SSxDQUMzQixDQUVBLFVBQUl5QyxHQUNGLFlBQTRCLElBQWpCdE8sS0FBSzI1QixRQUFnQzM1QixLQUFLOGtCLE9BQU94VyxPQUNyRHRPLEtBQUsyNUIsT0FDZCxDQUVBLFVBQUlyckIsQ0FBUXpDLEdBQ1Y3TCxLQUFLMjVCLFFBQVU5dEIsQ0FDakIsQ0FFQSxtQkFBSSt0QixHQUNGLE1BQWtDLGlCQUF2QjU1QixLQUFLNjVCLGtCQUNYLzlCLE1BQU1JLE9BQU84RCxLQUFLNjVCLGlCQUNoQi8zQixLQUFLZzRCLFNBQVM5NUIsS0FBSzY1QixlQUM1QixDQUVBLGtCQUFJRSxHQUNGLE9BQVFqK0IsTUFBTUksT0FBTzhELEtBQUs2NUIsZUFDNUIsQ0FFQSxpQkFBSUcsR0FDRixNQUEwQixpQkFBZmg2QixLQUFLL0QsVUFDWEgsTUFBTUksT0FBTzhELEtBQUsvRCxTQUNoQjZGLEtBQUtnNEIsU0FBUzk1QixLQUFLL0QsT0FDNUIsQ0FFQSxxQkFBSWcrQixHQUNGLElBQUk5aUIsT0FBU2piLE9BQ1g4RCxLQUFLKzVCLGVBQWlCLzVCLEtBQUs2NUIsY0FBZ0I3NUIsS0FBS21CLEtBQUtzQixPQUV2RCxPQUFLekMsS0FBS2s2QixlQUNKcCtCLE1BQU1JLE9BQU84RCxLQUFLL0QsU0FBV0MsT0FBTzhELEtBQUsvRCxPQUFTLEtBQ3BEa2IsUUFBa0JqYixPQUFPOEQsS0FBSy9ELFNBRTNCSCxNQUFNSSxPQUFPOEQsS0FBSy9ELFNBQ2pCa2IsUUFBVSxHQUNMN1osS0FBS0MsS0FBS0MsU0FBUywyQkFJekIyWixNQUNULENBRUEsWUFBSWdqQixHQUNGLEdBQUluNkIsS0FBS28xQixPQUFRLENBQ2YsTUFBTWplLE9BQVNuWCxLQUFLKzVCLGVBQWlCLzVCLEtBQUs2NUIsY0FBZ0I3NUIsS0FBS21CLEtBQUtzQixNQUNwRSxPQUFLekMsS0FBS2s2QixlQU1FL2lCLFFBQVUsSUFMZnJiLE1BQU1JLE9BQU84RCxLQUFLL0QsWUFDWGtiLE9BQVNqYixPQUFPOEQsS0FBSy9ELFFBQVUsRUFNL0MsQ0FBTyxPQUFPLENBQ2hCLENBRUEsb0JBQU1zdkIsR0FpQkosSUFoQkl2ckIsS0FBS1YsUUFBUW1sQixhQUFnQnprQixLQUFLbUIsTUFBU25CLEtBQUsrNUIsc0JBQzVDLzVCLEtBQUtvNkIsV0FBVyxDQUFFbDhCLFFBQVEsSUFHaEM4QixLQUFLKzVCLGdCQUNKLzVCLEtBQUttQixNQUEyQixNQUFuQm5CLEtBQUttQixLQUFLc0IsT0FDeEJ6QyxLQUFLcTZCLFdBRUxyNkIsS0FBS28xQixRQUFTLEVBRWRwMUIsS0FBS28xQixRQUFTLEdBRVpwMUIsS0FBS1YsUUFBUW1sQixhQUFnQnprQixLQUFLczZCLGlCQUFvQnQ2QixLQUFLbTZCLGdCQUN2RG42QixLQUFLdTZCLFdBQVcsQ0FBRXI4QixRQUFRLElBRzlCOEIsS0FBS28xQixRQUFVcDFCLEtBQUttQixLQUFNLENBQ08sV0FBL0JuQixLQUFLbUIsS0FBS2tFLFlBQVlqUCxPQUN4QjRKLEtBQUttQixLQUFPVyxLQUFLQyxTQUFTL0IsS0FBS21CLE9BRWpDLE1BQU16RSxFQUFJOFIsaUJBQWlCeE8sS0FBS21CLE1BQ2hDbkIsS0FBS3c2QixnQkFBa0I5OUIsRUFBRWd2QixVQUN6QjFyQixLQUFLcTFCLGdCQUFrQnIxQixLQUFLbUIsS0FBS25ELFFBQ25DLE9BQ00zQixNQUFNa3ZCLGdCQUNkLENBRUEsZ0JBQU02TyxDQUFZOTZCLFFBQVUsQ0FBRXBCLFFBQVEsSUFDcEM4QixLQUFLbUIsV0FBYSxJQUFJVyxLQUFLOUIsS0FBSzY1QixlQUFpQixLQUFLamlCLFNBQVMsQ0FDN0R0VixPQUFPLFVBRUhwQixTQUFTaUMsZUFBZW5ELEtBQUttQixNQUNuQ25CLEtBQUtxNkIsWUFBYSxFQUNsQi82QixRQUFRcEIsWUFDb0IsSUFBbkJvQixRQUFRcEIsUUFBZ0NvQixRQUFRcEIsT0FDckRvQixRQUFRcEIsUUFBUThCLEtBQUt1ckIsZ0JBQzNCLENBRUEsZUFBTWtQLENBQVduN0IsUUFBVSxDQUFFcEIsUUFBUSxJQUNuQyxNQUFNaUQsV0FBYSxJQUFJVyxLQUFLOUIsS0FBSy9ELE9BQU8yYixTQUFTLENBQUV0VixPQUFPLElBQzFEdEMsS0FBSy9ELE1BQVFrRixLQUFLc0IsTUFDbEJuRCxRQUFRcEIsWUFDb0IsSUFBbkJvQixRQUFRcEIsUUFBZ0NvQixRQUFRcEIsT0FDckRvQixRQUFRcEIsUUFBUThCLEtBQUt1ckIsZ0JBQzNCLENBRUEsZ0NBQU1tUCxDQUE0QnA3QixRQUFVLENBQUVwQixRQUFRLElBRXBELEdBREk4QixLQUFLZzZCLHFCQUFxQmg2QixLQUFLeTZCLFlBQy9CMytCLE1BQU1JLE9BQU84RCxLQUFLaTZCLG9CQUVwQixZQURBbHhCLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUtDLFNBQVMsK0JBRzVDLE1BQU13bkIsUUFBVSxHQUNWWSxXQUFhLEdBQ2IrVSxnQkFBa0I5bkIsT0FBT2pHLE9BQU9tTyxXQUFXL1csS0FBSWlOLE9BQzVDQSxNQUFNaFgsUUFFZixJQUFLLElBQUlvakIsTUFBUSxFQUFHQSxNQUFRc2QsZ0JBQWdCLzVCLE9BQVF5YyxRQUM5Q3JkLEtBQUsvRixNQUFNaVUsS0FBT3lzQixnQkFBZ0J0ZCxPQUFPblAsS0FHN0MwWCxXQUFXMXVCLEtBQUt5akMsZ0JBQWdCdGQsT0FBT2puQixNQUN2QzR1QixRQUFROXRCLEtBQUt5akMsZ0JBQWdCdGQsU0FFL0IsTUFBTS9YLEtBQU8sQ0FDWG9KLE1BQU8sSUFDUCtCLFFBQVNuVCxLQUFLQyxLQUFLMFcsT0FBTyxrQkFBbUIsQ0FDM0NrRCxPQUFRblgsS0FBS2k2QixrQkFDYmhWLE9BQVFXLGFBRVY4TyxRQUFTLENBQ1BrRyxJQUFLLENBQ0huOUIsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxnQkFDMUJtM0IsU0FBVSxLQUNSMzBCLEtBQUs2NkIsY0FBYzdWLFFBQU8sR0FHOUI4VixJQUFLLENBQ0hyOUIsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxlQUMxQm0zQixTQUFVLFNBR2RwWixRQUFTLE9BRVBxSyxXQUFXaGxCLE9BQVMsR0FDdEIsSUFBSTZ6QixPQUFPbnZCLE1BQU10SCxRQUFPLEVBRTVCLENBRUEsbUJBQU02OEIsQ0FBZTdWLFNBQ25CLElBQUssSUFBSTNILE1BQVEsRUFBR0EsTUFBUTJILFFBQVFwa0IsT0FBUXljLGNBQ3BDMkgsUUFBUTNILE9BQU9rZCxXQUFXcitCLE9BQU84RCxLQUFLaTZCLG1CQUFvQixDQUM5REMsYUFBYSxJQUVmMTJCLFlBQVlrTixPQUFPLENBQ2pCRCxRQUFTblQsS0FBS0MsS0FBSzBXLE9BQU8sb0JBQXFCLENBQzdDN2QsS0FBTTR1QixRQUFRM0gsT0FBT2puQixLQUNyQitnQixPQUFRblgsS0FBS2k2QixxQkFJckIsQ0FFQSxnQkFBTU0sQ0FBWWo3QixRQUFVLENBQUVwQixRQUFRLElBQ2hDOEIsS0FBS2c2QixxQkFBcUJoNkIsS0FBS3k2QixZQUNuQyxJQUFJdGpCLE9BQVNuWCxLQUFLaTZCLGtCQUNsQixHQUFJbitCLE1BQU1JLE9BQU9pYixTQUFVLENBQ3pCLEdBQUk3WixLQUFLQyxLQUFLQyxTQUFTLDZCQUErQjJaLE9BSXBELFlBREFwTyxHQUFHQyxjQUFjMFUsTUFBTSwyQkFGdkJ2RyxPQUFTLENBS2IsQ0FDSW5YLEtBQUttbEIsbUJBQ0RubEIsS0FBS21sQixZQUFZb1YsV0FBV3IrQixPQUFPaWIsUUFBUyxDQUNoRCtpQixhQUFhLElBR2pCbDZCLEtBQUtzNkIsaUJBQWtCLEVBQ3ZCaDdCLFFBQVFwQixZQUNvQixJQUFuQm9CLFFBQVFwQixRQUFnQ29CLFFBQVFwQixPQUNyRG9CLFFBQVFwQixRQUFROEIsS0FBS3VyQixnQkFDM0IsQ0FFQSxTQUFJemhCLEdBQ0YsT0FBTzlKLEtBQUtWLFFBQVF3SyxPQUFTLFFBQy9CLENBRUEsU0FBSUEsQ0FBTytCLEdBQ00sQ0FBQyxTQUFVLE9BQVEsV0FDdEJrdkIsUUFBUWx2QixFQUFFN0QsaUJBQ3RCaEksS0FBS3U0QixTQUFTenVCLE1BQVErQixFQUN4QixDQUVBLGlCQUFJZ3VCLEdBQ0YsTUFBTS92QixNQUFROUosS0FBSzhKLE1BQ25CLElBQUk5UCxRQUFVZ0csS0FBSzhrQixRQUFRL29CLFFBQVErTixNQUFNQSxRQUFRcU4sT0FDN0NoYixHQUFLNkQsS0FBSy9GLE1BQU1rQyxHQU9wQixHQU5BQSxJQUF1QyxNQUFoQ0EsSUFBTSxJQUFJNlYsV0FBV2dwQixPQUFnQixFQUFJNytCLElBQUk2VixXQUFXZ3BCLE9BRTFENytCLEdBQUd3TyxXQUFXLE9BQU14TyxHQUFLLElBQU1BLElBQ2hDNkQsS0FBSzhrQixPQUFPL29CLE9BQU84SyxXQUFXeE8sT0FBTTJCLFNBQW9CbUMsSUFDeEQ2RCxLQUFLOGtCLE9BQU8vb0IsT0FBTzhLLFdBQVd6TyxPQUFNNEIsU0FBb0I0TixjQUFjcXpCLE9BQU9qN0IsS0FBSy9GLE1BQU1rQyxLQUV4Rm5DLFFBQVMsQ0FDWCxNQUFNa2hDLFVBQVksSUFBSXA1QixLQUFLOUgsU0FBVzRFLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxNQUFxQixlQUFiLFlBQXFELENBQUVnTSxVQUFVLElBQVF0SSxNQUNsSyxJQUFJMDRCLFdBQ0osT0FBSW43QixLQUFLbVUsU0FDSG5VLEtBQUtzTyxRQUNQNnNCLFdBQWFuaEMsUUFBVSxJQUFNa2hDLFVBQ3RCQyxZQUVBRCxVQUdGbGhDLE9BRVgsQ0FDRixDQUVBLFNBQUlpQyxHQUNGLFlBQUk0QixJQUFjbUMsS0FBS283QixRQUEwQixLQUFoQnA3QixLQUFLbzdCLE9BQXNCcDdCLEtBQUtvN0IsT0FDN0RwN0IsS0FBS2lsQixPQUNBamxCLEtBQUttbEIsWUFBWXBwQixPQUFPQyxRQUFRQyxNQUFNL0YsTUFFeEMsQ0FDVCxDQUVBLFNBQUkrRixDQUFPNFAsR0FDVDdMLEtBQUtvN0IsT0FBU3Z2QixDQUNoQixFQzlRSyxNQUFNd3ZCLHlCQUF5QnhHLFNBQ3BDLDJCQUFheUMsQ0FBZ0JyZCxNQUMzQkEsS0FBS0MsR0FDSCxRQUNBLG9DQUNBbGEsS0FBS3VpQixVQUFVdHBCLEtBQUsrRyxPQUd0QmlhLEtBQUtDLEdBQ0gsUUFDQSx1QkFDQW1oQixpQkFBaUIzWSxTQUFTenBCLEtBQUsrRyxPQUVqQ2lhLEtBQUtDLEdBQ0gsUUFDQSw0QkFDQW1oQixpQkFBaUIzWSxTQUFTenBCLEtBQUsrRyxNQUVuQyxDQUVBLHdCQUFXODFCLEdBQ1QsT0FBT2wzQixRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU15NUIsY0FBZSxDQUNwRGxjLFNBQVUsc0RBQ1Z2YixLQUFNLGVBRVYsQ0FFQSxVQUFJNGxCLEdBQ0YsT0FBT29YLGlCQUFpQnZGLGFBQzFCLENBRUEsZ0JBQUl3RixHQUNGLEdBQUl0N0IsS0FBSzdJLFFBQ1AsR0FBSTZJLEtBQUtvWCxPQUFPeFcsT0FBUSxDQUN0QixNQUFNMjZCLFNBQVd2N0IsS0FBS29YLE1BQU0vZ0IsUUFBT2doQixHQUFpQixJQUFaQSxFQUFFZ0csT0FBZWhHLEVBQUVra0IsV0FDM0QsR0FBSUEsU0FBUzM2QixPQUFRLE9BQU8yNkIsU0FBUyxFQUN2QyxPQUlKLENBRUEsZ0JBQUlDLEdBQ0YsR0FBSXg3QixLQUFLN0ksUUFDUCxHQUFJNkksS0FBS29YLE9BQU94VyxPQUFRLENBQ3RCLE1BQU02NkIsU0FBV3o3QixLQUFLb1gsTUFBTS9nQixRQUFPZ2hCLEdBQWlCLElBQVpBLEVBQUVnRyxRQUFnQmhHLEVBQUVra0IsV0FDNUQsR0FBSUUsU0FBUzc2QixPQUFRLE9BQU82NkIsU0FBUyxFQUN2QyxPQUlKLENBRUEscUJBQUluYyxHQUNGLFNBQ0V0ZixLQUFLdzdCLGNBQWN2aEMsT0FBT3loQyxZQUFZdGxDLE9BQ3RDNEosS0FBS3c3QixjQUFjdnpCLE9BQU83UixPQUd4QjRKLEtBQUt3N0IsYUFBYXZoQyxNQUFNeWhDLFdBQVd0bEMsS0FBSzRSLGdCQUN4Q2hJLEtBQUt3N0IsYUFBYXZ6QixNQUFNN1IsS0FBSzRSLGFBSW5DLENBRUEscUJBQUkwWCxHQUNGLFlBQXdCLElBQWIxZixLQUFLMjdCLE1BQ1YzN0IsS0FBS3c3QixlQUNDeDdCLEtBQUtzZixrQkFLVnRmLEtBQUsyN0IsR0FDZCxDQUVBLHFCQUFJdlgsR0FDRixTQUNFcGtCLEtBQUs3SSxRQUNMNkksS0FBS29YLE1BQU14VyxRQUFVLEdBQ3JCWixLQUFLbTNCLFdBQ3VCLFdBQTVCbjNCLEtBQUtnM0IsUUFBUS93QixNQUFNNUgsS0FLdkIsQ0FFQSxxQkFBSXFoQixDQUFtQjdULEdBQ3JCN0wsS0FBSzI3QixLQUFNLEVBQ1gzN0IsS0FBSzQ3QixLQUFNLENBQ2IsQ0FFQSxxQkFBSWpjLEdBQ0YsWUFBd0IsSUFBYjNmLEtBQUs0N0IsSUFBNEI1N0IsS0FBS3NmLGtCQUMxQ3RmLEtBQUs0N0IsR0FDZCxDQUVBLHFCQUFJamMsQ0FBbUI5VCxHQUNyQjdMLEtBQUs0N0IsS0FBTSxFQUNYNTdCLEtBQUsyN0IsS0FBTSxDQUNiLENBRUEsU0FBSTdjLEdBQ0YsT0FBTzllLEtBQUs2N0IsWUFBYyxDQUM1QixDQUVBLG1CQUFJaGMsR0FDRixRQUFLN2YsS0FBSzdJLFdBRVI2SSxLQUFLczdCLGVBQ0x0N0IsS0FBS3c3QixjQUNMeDdCLEtBQUtzN0IsYUFBYXhuQixlQUFpQjlULEtBQUt3N0IsYUFBYTFuQixhQUt6RCxDQUVBLGVBQUkrbkIsR0FDRixJQUFJLzZCLE1BQVEsRUFDWixJQUFLLE1BQU11VyxLQUFLclgsS0FBS29YLE1BQ2ZDLEVBQUUyZixTQUFRbDJCLE9BQVMsR0FFekIsT0FBT0EsS0FDVCxDQUVBLG9CQUFJZzdCLEdBQ0YsU0FDRTk3QixLQUFLN0ksU0FDTDZJLEtBQUtzN0IsY0FDSHQ3QixLQUFLczdCLGNBQWNyMUIsT0FDbkJqRyxLQUFLczdCLGNBQWNyMUIsS0FBS2xLLE9BQU84SyxZQUFZaFAsS0FLakQsQ0FFQSxjQUFJaW9CLEdBQ0YsR0FBSTlmLEtBQUs3SSxRQUFVNkksS0FBS3M3QixjQUFnQnQ3QixLQUFLdzdCLGFBQWMsQ0FDekQsSUFBS3g3QixLQUFLczdCLGFBQWF0RSxTQUFXaDNCLEtBQUt3N0IsYUFBYXhFLE9BQ2xELE9BQU8xNUIsS0FBS0MsS0FBS0MsU0FBUyxpQkFFNUIsR0FBSXdDLEtBQUtzN0IsYUFBYXRFLE9BQ3BCLE9BQUloM0IsS0FBS3M3QixhQUFhLy9CLFNBQ2IrQixLQUFLQyxLQUFLMFcsT0FBTyx1QkFBd0IsQ0FDOUM3ZCxLQUFNNEosS0FBS3M3QixhQUFhcmhDLE1BQU03RCxPQUczQmtILEtBQUtDLEtBQUswVyxPQUFPLHFCQUFzQixDQUM1QzdkLEtBQU00SixLQUFLczdCLGFBQWFyaEMsTUFBTTdELE9BR2xDLEdBQUk0SixLQUFLdzdCLGFBQWF4RSxPQUNwQixPQUFJaDNCLEtBQUt3N0IsYUFBYWpnQyxTQUNiK0IsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXdCLENBQzlDN2QsS0FBTTRKLEtBQUt3N0IsYUFBYXZoQyxNQUFNN0QsT0FHOUI0SixLQUFLc2Ysa0JBQ0FoaUIsS0FBS0MsS0FBSzBXLE9BQU8sb0JBQXFCLENBQzNDN2QsS0FBTTRKLEtBQUt3N0IsYUFBYXZoQyxNQUFNN0QsT0FHM0JrSCxLQUFLQyxLQUFLMFcsT0FBTyxxQkFBc0IsQ0FDNUM3ZCxLQUFNNEosS0FBS3c3QixhQUFhdmhDLE1BQU03RCxNQUdwQyxDQUVGLENBRUEsYUFBTTQvQixDQUFTMXdCLE1BQ2IsT0FBUUEsS0FBS25JLFFBQ1gsSUFBSyxNQUNFNkMsS0FBS29YLE9BQU94VyxTQUNmWixLQUFLN0ksT0FBU21PLEtBQUtuTyxhQUFVMEcsRUFDekJtQyxLQUFLN0ksU0FDUG1PLEtBQUtuRSxLQUFLbzZCLFVBQVcsSUFHekJqMkIsS0FBS25FLEtBQUtrYyxNQUFRcmQsS0FBS29YLE1BQU14VyxPQUM3QlosS0FBS3cyQixZQUFZbHhCLE1BQ2pCLE1BRUYsSUFBSyxPQUNIdEYsS0FBS3cyQixZQUFZbHhCLE1BQ2pCLE1BRUYsSUFBSyxhQUNIdEYsS0FBS3lILFdBQVduQyxNQUloQmhJLEtBQUtzRyxLQUFLMkUsV0FBWXZJLEtBQUt1ckIsaUJBQzFCanVCLEtBQUt1Z0IsT0FBT0MsS0FBSyxjQUFleFksS0FDdkMsQ0FFQSxVQUFNbkUsQ0FBTW8xQixZQUNKdjJCLEtBQUtvWCxNQUFNbWYsTUFBTXBWLFdBQ3ZCLE1BQU03YixLQUFPLENBQ1hqSCxLQUFNMkIsS0FBS2lrQixPQUFPNWxCLEtBQ2xCbEIsT0FBUSxhQUNSbzVCLEtBQ0FELE9BQVFoNUIsS0FBS3NHLEtBQUsyRSxNQUdwQixPQURLakwsS0FBS3NHLEtBQUsyRSxPQUFNakQsS0FBS25FLEtBQU9uQixLQUFLb1gsTUFBTW1mLE1BQU0zWSxjQUMzQ3RZLElBQ1QsQ0FFQSxxQkFBYW9kLENBQVVubUIsT0FDckJBLE1BQU1FLGlCQUVOLE1BQU1DLEVBQUlILE1BQU1JLGNBQ1ZRLE9BQVNULEVBQUVLLFFBQVFJLE9BQ25CUCxHQUFLRixFQUFFRyxRQUFRLGlCQUNmaVQsUUFBVXBULEVBQUVHLFFBQVEsaUJBQ3BCbzRCLFlBQWN2NEIsRUFBRUcsUUFBUSxpQkFDeEJ5UCxXQUFhK3VCLGlCQUFpQm5HLG9CQUFvQkQsYUFDeEQzb0IsS0FBSytQLFVBQVl2TSxRQUFRL1MsUUFBUXNmLFVBQ2pDLE1BQU1rYSxLQUFPcjZCLE9BQU9VLElBQUlHLFNBQVN3NUIsTUFFakMsT0FBUXA1QixRQUNOLElBQUssZ0JBQ0htUCxLQUFLblYsUUFBVW1WLEtBQUtuVixhQUVkbVYsS0FBS2lmLGlCQUNYLE1BR0YsSUFBSyxjQUNIamYsS0FBSzhQLFdBQVdtYSxZQUNWanFCLEtBQUtpZixpQkFDWCxNQUdGLElBQUssYUFDSGpmLEtBQUs0cEIsa0JBQ0M1cEIsS0FBS2lmLGlCQUNYLE1BR0YsSUFBSyxhQUFjLENBQ2pCLE1BQU10YixRQUFVek0sWUFBWTBNLGFBQ3ZCNUQsS0FBSzhLLE1BQU1tZixNQUFNbmxCLFdBQ3BCOUUsS0FBSzhLLE1BQU1tZixNQUFNbmxCLFNBQVcsR0FBR25CLFFBQVFwRCxTQUFTb0QsUUFBUWdCLFNBRzFELE1BQU0zTCxXQUFhZ0gsS0FBS25MLEtBQUtvMUIsWUFDdkJqcUIsS0FBSzBwQixRQUFRMXdCLE1BQ25CLEtBQ0YsQ0FFQSxJQUFLLGNBQWUsQ0FDbEJnSCxLQUFLNHBCLGtCQUNDNXBCLEtBQUtpZixpQkFDWCxNQUFNd1EsZUFBaUIsSUFBSXRDLFdBQVcsQ0FDcEN0bEIsU0FBVTdILEtBQUswcUIsT0FBT2dGLGlCQUN0QnZYLFlBQWFsb0IsTUFBTTZ5QixXQUVyQjJNLGVBQWUzcUIsU0FBVzlFLEtBQUswcUIsT0FBTy84QixNQUFNbVgsU0FDNUMycUIsZUFBZXZXLFVBQVlsWixLQUFLNHFCLE9BQU9qOUIsTUFBTW1YLFNBQzdDMnFCLGVBQWV6bkIsT0FBU2hJLEtBQUswcUIsT0FBTzFpQixPQUVwQ3luQixlQUFleFEsaUJBQ2YsS0FDRixDQUVBLFFBQVMsQ0FDUCxNQUFNanNCLFFBQVUsQ0FDZHBCLFFBQVEsRUFDUm9ILEtBQU01SSxFQUFFSyxRQUNSNGMsUUFBU2pkLEVBQUVzUyxVQUNYaVcsT0FBUXZvQixTQUVKcVgsVUFBVW1rQixNQUFNNXJCLEtBQUs4SyxNQUFNbWYsTUFBT3A1QixPQUFRbUMsU0FDaEQsTUFBTWdHLEtBQU8sQ0FDWGpILEtBQU0yQixLQUFLODFCLGNBQWN6M0IsS0FDekJsQixPQUFRLGFBQ1JvNUIsS0FDQUQsT0FBUWg1QixLQUFLc0csS0FBSzJFLE1BRWZqTCxLQUFLc0csS0FBSzJFLE9BQU1qRCxLQUFLbkUsS0FBT21MLEtBQUs4SyxNQUFNbWYsTUFBTTNZLGNBQ2xEdFIsS0FBSzBwQixRQUFRMXdCLE1BQ2IsS0FDRixFQUVKLENBRUEsYUFBTTh3QixDQUFTRyxVQUFPMTRCLEdBS3BCLEdBSkFtQyxLQUFLb1gsTUFBUXBYLEtBQUtvWCxNQUFNL2dCLFFBQU84SyxXQUNTLElBQXhCQSxLQUFLbEgsTUFBTW1YLFdBR3RCbWxCLEtBc0JDdjJCLEtBQUtvWCxNQUFNbWYsTUFBTW5CLFNBQ25CcDFCLEtBQUtvWCxNQUFNbWYsTUFBTWxCLGdCQUFrQnIxQixLQUFLb1gsTUFBTW1mLE1BQU1qQixZQUFZLENBQzlEK0MsZ0JBQWdCLFVBdkJwQixJQUFLLElBQUk3WCxFQUFJLEVBQUdBLEVBQUl4Z0IsS0FBS29YLE1BQU14VyxPQUFRNGYsV0FDOUJ4Z0IsS0FBS29YLE1BQU1vSixHQUFHamxCLFNBRW5CeUUsS0FBSzdJLFVBQ0g2SSxLQUFLb1gsTUFBTW9KLEdBQUd2YSxNQUNkakcsS0FBS29YLE1BQU1vSixHQUFHdmEsS0FBS2xLLE9BQU84SyxZQUFZaFAsUUFDdENtSSxLQUFLb1gsTUFBTW9KLElBQUl2bUIsT0FBT3loQyxZQUFZdGxDLE1BQ2xDNEosS0FBS29YLE1BQU1vSixJQUFJdlksT0FBTzdSLE1BQ3RCNEosS0FBS29YLE1BQU1vSixHQUFHdm1CLE1BQU15aEMsV0FBV3RsQyxLQUFLNFIsZ0JBQ2xDaEksS0FBS29YLE1BQU1vSixHQUFHdlksTUFBTTdSLEtBQUs0UixnQkFDMUJoSSxLQUFLb1gsTUFBTW9KLElBQUl2bUIsT0FBT3loQyxZQUFZdGxDLFFBRXJDNEosS0FBS29YLE1BQU1vSixHQUFHamxCLFVBQVcsR0FFdkJ5RSxLQUFLb1gsTUFBTW9KLEdBQUc0VSxTQUNoQnAxQixLQUFLb1gsTUFBTW9KLEdBQUc2VSxnQkFBa0JyMUIsS0FBS29YLE1BQU1vSixHQUFHOFUsWUFBWSxDQUN4RCtDLGdCQUFnQixLQVl4QixHQUFJcjRCLEtBQUs3SSxPQUFRLENBU2YsR0FQQTZJLEtBQUtvWCxNQUFNakwsTUFBSyxDQUFDelAsRUFBRzBqQixJQUNkMWpCLEVBQUUyZ0IsTUFBUStDLEVBQUUvQyxNQUFjLEVBQzFCM2dCLEVBQUUyZ0IsTUFBUStDLEVBQUUvQyxPQUFlLEVBQ3hCLElBSUxyZCxLQUFLb1gsTUFBTXhXLE9BQVMsRUFBRyxDQUN6QlosS0FBS29YLE1BQVEsQ0FBQ3BYLEtBQUtvWCxNQUFNLEdBQUlwWCxLQUFLb1gsTUFBTSxJQUN4QyxJQUFLLE1BQU1DLEtBQUtyWCxLQUFLb1gsYUFDWkMsRUFBRTJmLGNBQ0YzZixFQUFFNGtCLEdBRWIsQ0FHSWo4QixLQUFLb1gsTUFBTSxLQUFJcFgsS0FBS29YLE1BQU0sR0FBR21rQixVQUFXLEdBRXhDdjdCLEtBQUtvWCxNQUFNLElBQUlnZSxRQUFVcDFCLEtBQUtvWCxNQUFNLElBQUlnZSxTQUN0Q3AxQixLQUFLb1gsTUFBTSxHQUFHbUksUUFBVXZmLEtBQUtvWCxNQUFNLEdBQUdtSSxVQUNwQ3ZmLEtBQUtvWCxNQUFNLEdBQUd0RCxhQUFlOVQsS0FBS29YLE1BQU0sR0FBR3RELGFBQzdDOVQsS0FBS29YLE1BQU0sR0FBRzRmLFFBQVMsRUFDZGgzQixLQUFLb1gsTUFBTSxHQUFHdEQsYUFBZTlULEtBQUtvWCxNQUFNLEdBQUd0RCxhQUNwRDlULEtBQUtvWCxNQUFNLEdBQUc0ZixRQUFTLEVBRW5CaDNCLEtBQUswZixrQkFBbUIxZixLQUFLb1gsTUFBTSxHQUFHNGYsUUFBUyxFQUM5Q2gzQixLQUFLb1gsTUFBTSxHQUFHNGYsUUFBUyxFQUlwQyxLQUFPLENBb0NMLEdBbkNBaDNCLEtBQUtvWCxNQUFNakwsTUFBSyxDQUFDelAsRUFBRzBqQixLQUNsQixHQUFJMWpCLEVBQUUwNEIsU0FBV2hWLEVBQUVnVixPQUFRLE9BQVEsRUFDbkMsSUFBSzE0QixFQUFFMDRCLFFBQVVoVixFQUFFZ1YsT0FBUSxPQUFPLEVBQ2xDLElBQUsxNEIsRUFBRTA0QixTQUFXaFYsRUFBRWdWLE9BQVEsT0FBTyxFQUNuQyxHQUFJMTRCLEVBQUVvWCxhQUFlc00sRUFBRXRNLGFBRXJCLE9BREE5VCxLQUFLazhCLFVBQVcsR0FDUixFQUVWLEdBQUl4L0IsRUFBRW9YLGFBQWVzTSxFQUFFdE0sYUFFckIsT0FEQTlULEtBQUtrOEIsVUFBVyxFQUNULEVBRVQsR0FBSTUrQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx5QkFBMEIsQ0FDdEQsR0FBSVIsRUFBRTJqQixlQUFpQkQsRUFBRUMsZUFFdkIsT0FEQXJnQixLQUFLazhCLFVBQVcsR0FDUixFQUVWLEdBQUl4L0IsRUFBRTJqQixlQUFpQkQsRUFBRUMsZUFFdkIsT0FEQXJnQixLQUFLazhCLFVBQVcsRUFDVCxDQUVYLEtBQU8sQ0FDTCxHQUFJeC9CLEVBQUU4WixTQUFXNEosRUFBRTVKLFNBRWpCLE9BREF4VyxLQUFLazhCLFVBQVcsR0FDUixFQUVWLEdBQUl4L0IsRUFBRThaLFNBQVc0SixFQUFFNUosU0FFakIsT0FEQXhXLEtBQUtrOEIsVUFBVyxFQUNULENBRVgsQ0FDQSxPQUFPLEtBR1RsOEIsS0FBS204QixTQUFXLEVBQ1puOEIsS0FBS29YLE1BQU0sSUFBTXBYLEtBQUtvWCxNQUFNLEdBQUdnZSxTQUFXcDFCLEtBQUtvWCxNQUFNLEdBQUdtSixPQUFRLENBQ2xFdmdCLEtBQUttOEIsU0FBVyxFQUNoQixJQUFLLElBQUkzYixFQUFJLEVBQUdBLEVBQUl4Z0IsS0FBS29YLE1BQU14VyxPQUFRNGYsSUFFbkN4Z0IsS0FBS29YLE1BQU1vSixJQUNYeGdCLEtBQUtvWCxNQUFNb0osR0FBRzRVLFFBQ2RwMUIsS0FBS29YLE1BQU0sR0FBR3RELGVBQWlCOVQsS0FBS29YLE1BQU1vSixHQUFHMU0sZUFDNUN4VyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx5QkFDdkI4QyxLQUFLb1gsTUFBTSxHQUFHaUosaUJBQW1CcmdCLEtBQUtvWCxNQUFNb0osR0FBR0gsZUFDL0NyZ0IsS0FBS29YLE1BQU0sR0FBR1osV0FBYXhXLEtBQUtvWCxNQUFNb0osR0FBR2hLLFlBRTdDeFcsS0FBS204QixTQUFXbjhCLEtBQUttOEIsU0FBVyxFQUd0QyxDQUVBLElBQUssSUFBSTNiLEVBQUksRUFBR0EsRUFBSXhnQixLQUFLb1gsTUFBTXhXLE9BQVE0ZixJQUNyQ3hnQixLQUFLb1gsTUFBTW9KLEdBQUd3VyxPQUFTeFcsRUFBSXhnQixLQUFLbThCLFNBQ2hDbjhCLEtBQUtvWCxNQUFNb0osR0FBR3liLElBQU1qOEIsS0FBS29YLE1BQU1vSixHQUFHd1csUUFBVWgzQixLQUFLbThCLFNBQVcsQ0FFaEUsQ0FDRixDQUVBLFNBQUFqRyxHQUNFbDJCLEtBQUtxMkIsUUFBUyxDQUNoQixFQ3JhSyxNQUFNK0Ysc0JBQXNCM0gsT0FDakMsaUJBQUF6YSxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUN4QkEsS0FBS3ZhLEtBQUssYUFBYXN5QixPQUFNLElBQU1oeUIsS0FBS3E4QixhQUFhcGlCLE9BQ3ZELENBRUEsWUFBQW9pQixDQUFjcGlCLE1BQ1pBLEtBQUt2YSxLQUFLLHdCQUF3QmliLFFBQ3BDLENBRUEsbUJBQWFqSyxDQUFRcFIsUUFBVSxDQUFDLEdBQzlCLE1BQU0yYSxXQUFhd0csZUFDakIsMkNBQ0FuaEIsU0FHRixPQUFPLElBQUk0YyxTQUFRaEIsVUFDakIsSUFBSXlYLFNBQVcsS0FDZixNQUFNNkIsSUFBTSxJQUFJNEgsY0FBYyxDQUM1QjF0QixNQUFPcFAsUUFBUTJ1QixZQUNYM3dCLEtBQUtDLEtBQUswVyxPQUFPLG1DQUFvQyxDQUNyRDdkLEtBQU1rSixRQUFRMnVCLGNBRWQzd0IsS0FBS0MsS0FBS0MsU0FBUywrQkFDdkJpVCxRQUFTd0osS0FDVHlhLFFBQVMsQ0FDUDRILFNBQVUsQ0FDUmovQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUMxQm0zQixTQUFVMWEsT0FDUjBZLFNBQVcsSUFBSWlDLFNBQVMzYSxLQUFLLEdBQUdyRyxjQUFjLG1CQUN2Q3NILFFBQVF5WCxhQUlyQnBYLFFBQVMsV0FDVEosTUFBTyxTQUVUcVosSUFBSXgyQixRQUFPLEVBQUksR0FFbkIsRUM3QkssTUFBTXUyQixnQkFDWCw4QkFBV2dJLEdBQ1QsTUFBTyxNQUNULENBRUEsbUNBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMkJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsOEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsNkJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsMkJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsNEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEsOEJBQVdDLEdBQ1QsTUFBTyxNQUNULENBRUEseUJBQVdDLEdBQ1QsTUFBTyxNQUNULENBVUEsZ0JBQU8zSSxDQUFXclEsUUFDaEIsR0FBSUEsT0FBTy9OLFdBQWFxZSxnQkFBZ0JrSSxpQkFDdEMsT0FBTyxLQUVULE1BQU1TLE9BQVMsQ0FDYixDQUFDM0ksZ0JBQWdCdUksa0JBQW1CLHVCQUNwQyxDQUFDdkksZ0JBQWdCcUksb0JBQXFCLHdCQUN0QyxDQUFDckksZ0JBQWdCd0ksbUJBQW9CLHdCQVN2QyxPQUxFOVksT0FBTy9OLFdBQWFxZSxnQkFBZ0JnSSxxQkFDZixRQUFyQnRZLE9BQU9qRCxZQUVQa2MsT0FBTzNJLGdCQUFnQnlJLHFCQUF1Qiw0QkFFekNFLE1BQ1QsQ0FFQSx1QkFBT0MsQ0FBa0I3OUIsU0FDdkIsUUFDMkIsSUFBbEJBLFFBQVEvQyxZQUNhLElBQXJCK0MsUUFBUTgwQixlQUNVLElBQWxCOTBCLFFBQVFyRixZQUNhLElBQXBCcUYsUUFBUWlWLGNBQ2UsSUFBdEJqVixRQUFRd0gsZ0JBQ2MsSUFBdEJ4SCxRQUFRMGhCLGdCQUNtQixJQUEzQjFoQixRQUFRcVgsZ0JBQ2ZyWCxRQUFRNFcsV0FBYXFlLGdCQUFnQm9JLHFCQXlCbEMsUUFDb0IsSUFBbEJyOUIsUUFBUS9DLFlBQ2EsSUFBckIrQyxRQUFRODBCLGVBQ2EsSUFBckI5MEIsUUFBUTRXLFNBT2YsT0FMQW5OLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLHFCQUFzQixDQUNyQy9kLE1BQU9vSCxLQUFLQyxLQUFLQyxTQUFTLGlCQUd2QixPQWpDUCxRQUErQixJQUFwQjhCLFFBQVFpVixRQUNialYsUUFBUXJGLE1BQU1rVSxNQUFNalIsSUFBSW9DLFFBQVFpVixXQUNsQ2pWLFFBQVE0VyxTQUFXcWUsZ0JBQWdCbUksc0JBRWhDLFFBQWlDLElBQXRCcDlCLFFBQVF3SCxVQUEyQixDQUNuRCxNQUFNczJCLFNBQVc5OUIsUUFBUXJGLE1BQU1vakMsZ0JBQWdCLzlCLFFBQVF3SCxXQUNuRHMyQixTQUFTeDhCLE9BQVMsSUFDcEJ0QixRQUFRaVYsUUFBVTZvQixTQUFTLEdBQUdsdkIsR0FDOUI1TyxRQUFRNFcsU0FBV3FlLGdCQUFnQm1JLGdCQUV2QyxXQUMrQixJQUF0QnA5QixRQUFRMGhCLFdBQ2YsQ0FBQyxNQUFPLE9BQU9oZSxTQUFTMUQsUUFBUTBoQixXQUVoQzFoQixRQUFRNFcsU0FBV3FlLGdCQUFnQmdJLHlCQUVELElBQTNCajlCLFFBQVFxWCxxQkFHVCxJQUZDclgsUUFBUXJGLE1BQU04QixPQUFPNm5CLGdCQUMxQnRrQixRQUFRcVgsa0JBR1ZyWCxRQUFRNFcsU0FBV3FlLGdCQUFnQmlJLDBCQWN2QyxJQUNHLENBQ0NqSSxnQkFBZ0JxSSxtQkFDaEJySSxnQkFBZ0JzSSxnQkFDaEJ0SSxnQkFBZ0J1SSxpQkFDaEJ2SSxnQkFBZ0J3SSxrQkFDaEJ4SSxnQkFBZ0J5SSxxQkFDaEJoNkIsU0FBUzFELFFBQVE4MEIsVUFPbkIsT0FMQXJyQixHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTywyQkFBNEIsQ0FDM0MvZCxNQUFPb0gsS0FBS0MsS0FBS0MsU0FBUyxpQ0FHdkIsRUFFVCxJQUNHLENBQ0MrMkIsZ0JBQWdCbUksZ0JBQ2hCbkksZ0JBQWdCaUkseUJBQ2hCakksZ0JBQWdCZ0ksb0JBQ2hCaEksZ0JBQWdCb0kscUJBQ2hCMzVCLFNBQVMxRCxRQUFRNFcsVUFPbkIsT0FMQW5OLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLDJCQUE0QixDQUMzQy9kLE1BQU9vSCxLQUFLQyxLQUFLQyxTQUFTLGlDQUd2QixFQUVULE1BQU15bUIsT0FBUyxDQUNiM2tCLFFBQVMsQ0FDUDgwQixTQUFVOTBCLFFBQVE4MEIsU0FDbEJoRixTQUFVOXZCLFFBQVFtbEIsYUFBZW5sQixRQUFRL0MsT0FBTzZ5QixVQUFZOXZCLFFBQVFtbEIsY0FBZSxFQUNuRjZZLE9BQVFoK0IsUUFBUS9DLE9BQU8rZ0MsU0FBVSxFQUNqQ2x1QixVQUFXQSxVQUFVOVAsUUFBUS9DLFFBQVMsR0FDdENnaEMsZ0JBQWlCaitCLFFBQVFpK0Isa0JBQW1CLEVBQzVDQyxhQUFjbCtCLFFBQVFrK0IsZUFBZ0IsRUFDdENDLFdBQVluK0IsUUFBUW0rQixhQUFjLEVBQ2xDQyxnQkFBaUJwK0IsUUFBUW8rQixrQkFBbUIsRUFDNUMzZSxTQUNFemYsUUFBUS9DLE9BQU9JLGNBQWNxUyxXQUFXeVQsU0FBUyxZQUFhLEVBQ2hFa2IsZUFBZ0JyK0IsUUFBUXErQixpQkFBa0IsRUFDMUN4NUIsVUFBVyxHQUVieTVCLGNBQWUsQ0FDYjFuQixTQUFVNVcsUUFBUTRXLFNBQ2xCa2UsU0FBVTkwQixRQUFRODBCLFNBQ2xCcFQsVUFBVyxHQUNYZ0wsWUFBYTFzQixRQUFRMHNCLGNBQWUsRUFDcENxSSxlQUFnQi8wQixRQUFRKzBCLGlCQUFrQixFQUMxQ0YsZUFBZ0I3MEIsUUFBUTYwQixpQkFBa0IsSUFHOUMsT0FBUWxRLE9BQU8yWixjQUFjMW5CLFVBQzNCLEtBQUtxZSxnQkFBZ0JtSSxnQkFDckIsS0FBS25JLGdCQUFnQmlJLHlCQUNyQixLQUFLakksZ0JBQWdCZ0ksb0JBQ3JCLEtBQUtoSSxnQkFBZ0JvSSxvQkFzQm5CLEdBckJBMVksT0FBTzNrQixRQUFRaVYsUUFDYmpWLFFBQVFpVixTQUNSalYsUUFBUS9DLE9BQU9JLGNBQWNFLFFBQVEsVUFBVUUsUUFBUXdYLFFBQ3pEMFAsT0FBTzNrQixRQUFRZ1YsT0FDYmhWLFFBQVEvQyxPQUFPSSxjQUFjRSxRQUFRLFVBQVVFLFFBQVF1WCxPQUN6RDJQLE9BQU8za0IsUUFBUXFYLGVBQ2JyWCxRQUFRcVgsZ0JBQ1JyWCxRQUFRL0MsT0FBT0ksY0FBYzhkLGNBQWMxZCxRQUFRNFosZUFDckRzTixPQUFPM2tCLFFBQVEwaEIsVUFDYjFoQixRQUFRMGhCLFdBQ1IxaEIsUUFBUS9DLE9BQU9JLGNBQWM4ZCxjQUFjMWQsUUFBUThnQyxPQUNyRDVaLE9BQU8yWixjQUFjNWMsVUFBWWlELE9BQU8za0IsUUFBUTBoQixVQUNoRGlELE9BQU8za0IsUUFBUTROLFFBQ2I1TixRQUFRL0MsT0FBT0ksY0FBY0UsUUFBUSxRQUFRRSxRQUFRbVEsU0FDckQ1TixRQUFRckYsTUFBTWlVLEdBQ2hCK1YsT0FBTzNrQixRQUFRaU4sU0FDYmpOLFFBQVEvQyxPQUFPSSxjQUFjRSxRQUFRLFFBQVFFLFFBQVF5UCxTQUNyRGxOLFFBQVFyRixNQUFNc1MsU0FDaEIwWCxPQUFPM2tCLFFBQVF3K0IsZUFDYngrQixRQUFRL0MsT0FBT0ksY0FBY3FTLFVBQVV5VCxTQUFTLG9CQUNsRHdCLE9BQU8za0IsUUFBUXJGLE1BQVFxRixRQUFRckYsTUFFN0JncUIsT0FBTzJaLGNBQWMxbkIsV0FBYXFlLGdCQUFnQm1JLGlCQUNsRHpZLE9BQU8za0IsUUFBUXlmLFNBQ2YsQ0FDQSxNQUFNOVksS0FBT2dlLE9BQU8za0IsUUFBUXJGLE1BQU1rVSxNQUFNalIsSUFBSSttQixPQUFPM2tCLFFBQVFnVixRQUMzRCxJQUFLck8sS0FDSCxPQUFPLEVBRVMsV0FBZEEsS0FBSzVILE9BQ1A0bEIsT0FBTzNrQixRQUFReStCLFdBQWE5M0IsS0FBSzdQLEtBQ2pDNnRCLE9BQU8yWixjQUFjMW5CLFNBQVdxZSxnQkFBZ0JrSSxpQkFFcEQsQ0FDQSxRQUNvQyxJQUEzQnhZLE9BQU8za0IsUUFBUTROLGNBQ2MsSUFBNUIrVyxPQUFPM2tCLFFBQVFpTixlQUNXLElBQXpCMFgsT0FBTzNrQixRQUFRckYsTUFPeEIsT0FMQThPLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLDJCQUE0QixDQUMzQy9kLE1BQU9vSCxLQUFLQyxLQUFLQyxTQUFTLHVCQUd2QixFQUVULEdBQ0V5bUIsT0FBTzJaLGNBQWMxbkIsV0FBYXFlLGdCQUFnQm1JLHNCQUNoQixJQUEzQnpZLE9BQU8za0IsUUFBUWlWLFFBT3RCLE9BTEF4TCxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTywyQkFBNEIsQ0FDM0MvZCxNQUFPb0gsS0FBS0MsS0FBS0MsU0FBUywyQkFHdkIsRUFDRixHQUNMeW1CLE9BQU8yWixjQUFjMW5CLFdBQ3JCcWUsZ0JBQWdCaUkseUJBQ2hCLENBQ0EsUUFBNkMsSUFBbEN2WSxPQUFPM2tCLFFBQVFxWCxlQU14QixPQUxBNU4sR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBSzBXLE9BQU8sMkJBQTRCLENBQzNDL2QsTUFBT29ILEtBQUtDLEtBQUtDLFNBQVMsMkJBR3ZCLEVBQ0YsSUFDSkYsS0FBS3NHLEtBQUsyRSxPQUNWMGIsT0FBTzNrQixRQUFRckYsTUFBTThCLE9BQU82bkIsZ0JBQzNCSyxPQUFPM2tCLFFBQVFxWCxpQkFDZHpnQixNQUVILE9BQU8sQ0FFWCxNQUFPLEdBQ0wrdEIsT0FBTzJaLGNBQWMxbkIsV0FBYXFlLGdCQUFnQmdJLG9CQUNsRCxDQUNBLFFBQXdDLElBQTdCdFksT0FBTzNrQixRQUFRMGhCLFVBTXhCLE9BTEFqWSxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTywyQkFBNEIsQ0FDM0MvZCxNQUFPb0gsS0FBS0MsS0FBS0MsU0FBUyxzQkFHdkIsRUFDRixJQUNKRixLQUFLc0csS0FBSzJFLE9BQ1YwYixPQUFPM2tCLFFBQVFyRixNQUFNOEIsT0FBT0MsUUFBUWlvQixPQUFPM2tCLFFBQVEwaEIsWUFDaEQ5cUIsTUFFSixPQUFPLENBRVgsTUFBTyxHQUNMK3RCLE9BQU8yWixjQUFjMW5CLFdBQWFxZSxnQkFBZ0JrSSxpQkFDbEQsQ0FDQSxRQUFxQyxJQUExQnhZLE9BQU8za0IsUUFBUWdWLE9BTXhCLE9BTEF2TCxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTywyQkFBNEIsQ0FDM0MvZCxNQUFPb0gsS0FBS0MsS0FBS0MsU0FBUyw0QkFHdkIsRUFDRixHQUFJeW1CLE9BQU8za0IsUUFBUWcrQixPQUN4QixPQUFPLENBRVgsQ0FDQXJaLE9BQU8za0IsUUFBUTArQixlQUNiL1osT0FBTzNrQixRQUFRckYsTUFBTStqQyxpQkFBa0IsRUFFdkMvWixPQUFPMlosY0FBYzFuQixXQUNyQnFlLGdCQUFnQmlJLDBCQUVoQnZZLE9BQU8yWixjQUFjMUosNkJBQ25CalEsT0FBTzNrQixRQUFROFAsVUFDakI2VSxPQUFPMlosY0FBYzVKLHdCQUNuQi9QLE9BQU8za0IsUUFBUThQLFlBRWpCNlUsT0FBTzJaLGNBQWMxSiw4QkFBK0IsRUFDcERqUSxPQUFPMlosY0FBYzVKLHlCQUEwQixHQUVqRC9QLE9BQU8yWixjQUFjbDVCLFNBQVcsRUFDaEN1ZixPQUFPMlosY0FBY3RuQixXQUNuQmhYLFFBQVFnWCxZQUNSdkMsVUFBVXVQLGdCQUNSaG1CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUU5QittQixPQUFPMlosY0FBY3pGLGlCQUFtQixFQUN4Q2xVLE9BQU8yWixjQUFjeEYsc0JBQXdCLEVBR2pELE9BQU9uVSxNQUNULENBRUEsb0JBQWFnYSxDQUFTMytCLFFBQVUsQ0FBQyxHQUMvQixNQUFNMmtCLE9BQVNzUSxnQkFBZ0I0SSxpQkFBaUI3OUIsU0FDaEQsSUFBZSxJQUFYMmtCLE9BR0osR0FDR0EsT0FBTzNrQixRQUFpQixXQUN6QmhDLEtBQUtzRyxLQUFLMkUsTUFDVixDQUNFZ3NCLGdCQUFnQnVJLGlCQUNoQnZJLGdCQUFnQnlJLHFCQUNoQmg2QixTQUFTaWhCLE9BQU8yWixjQUFjeEosVUFFaENHLGdCQUFnQjJKLFdBQVdqYSxZQUN0QixNQUNKQSxPQUFPM2tCLFFBQVFtK0IsWUFBY3haLE9BQU8za0IsUUFBUW8rQixpQkFBbUJ6WixPQUFPM2tCLFFBQVFrK0IsY0FBZ0J2WixPQUFPM2tCLFFBQVFpK0IsbUJBQzlHamdDLEtBQUtzRyxLQUFLMkUsTUFDVmdzQixnQkFBZ0IwSSxpQkFBbUJoWixPQUFPMlosY0FBY3hKLFNBR25ELENBQ0wsUUFBb0MsSUFBekJuUSxPQUFPM2tCLFFBQVFyRixNQUF1QixDQUMvQyxRQUF3QyxJQUE3QmdxQixPQUFPM2tCLFFBQVEwaEIsVUFBMkIsQ0FDbkQsTUFBTTdjLFVBQVk4ZixPQUFPM2tCLFFBQVFyRixNQUFNOEIsUUFBUUMsVUFBVWlvQixPQUFPM2tCLFFBQVEwaEIsWUFBWTdjLFVBQ2hGQSxZQUNGOGYsT0FBTzJaLGNBQWNsNUIsU0FBV1AsVUFFcEMsTUFBTyxRQUE2QyxJQUFsQzhmLE9BQU8za0IsUUFBUXFYLGVBQWdDLENBQy9ELE1BQU14UyxVQUFZOGYsT0FBTzNrQixRQUFRckYsTUFBTThCLFFBQVE2bkIsa0JBQWtCSyxPQUFPM2tCLFFBQVFxWCxpQkFBaUJ4UyxVQUM3RkEsWUFDRjhmLE9BQU8yWixjQUFjbDVCLFNBQVdQLFVBRXBDLE1BQU8sUUFBcUMsSUFBMUI4ZixPQUFPM2tCLFFBQVFnVixPQUF3QixDQUN2RCxNQUFNNnBCLGNBQWdCditCLE9BQU9KLE9BQU95a0IsT0FBTzNrQixRQUFRckYsTUFBTThCLE9BQU84bkIsUUFBUW5rQixNQUFLd1AsR0FBS0EsRUFBRWt2QixZQUFjbmEsT0FBTzNrQixRQUFRZ1YsY0FDekUsSUFBN0I2cEIsZUFBZWg2QixZQUN4QjhmLE9BQU8yWixjQUFjbDVCLFNBQVd5NUIsY0FBY2g2QixVQUVsRCxDQUNBOGYsT0FBTzJaLGNBQWNsNUIsU0FBV3RDLEtBQUtjLElBQUlkLEtBQUthLElBQUlnaEIsT0FBTzJaLGNBQWNsNUIsVUFBVyxHQUFJLEVBQ3hGLENBSUEsT0FIS3VmLE9BQU8za0IsUUFBUTh2QixnQkFDWm1GLGdCQUFnQjhKLFdBQVdwYSxRQUU1QnNRLGdCQUFnQitKLFFBQVFyYSxPQUNqQyxDQXpCRXNRLGdCQUFnQjJKLFdBQVdqYSxPQXlCN0IsQ0FDRixDQUVBLGlCQUFPaWEsQ0FBWWphLFFBQ2pCLE9BQVFBLE9BQU8yWixjQUFjMW5CLFVBQzNCLEtBQUtxZSxnQkFBZ0JnSSxvQkFDckIsS0FBS2hJLGdCQUFnQmlJLHlCQUNyQixLQUFLakksZ0JBQWdCa0ksaUJBQ3JCLEtBQUtsSSxnQkFBZ0JtSSxnQkFDckIsS0FBS25JLGdCQUFnQm9JLG9CQUNuQixDQUNFLE1BQU1oSixTQUFXLENBQ2Z0MUIsS0FBTSxZQUVSLEdBQUk0bEIsT0FBTzJaLGNBQWMxbkIsV0FBYXFlLGdCQUFnQm1JLGlCQUlwRCxHQUhBL0ksU0FBUzFkLE1BQVEwVyxTQUFTQyxXQUFXQyxNQUNyQzhHLFNBQVM1RixTQUFXcEIsU0FBU00sVUFBVUcsTUFDdkN1RyxTQUFTdjlCLEtBQU82dEIsT0FBTzNrQixRQUFRckYsTUFBTWtVLE1BQU1qUixJQUFJK21CLE9BQU8za0IsUUFBUWlWLFVBQVUvTSxXQUNuRW1zQixTQUFTdjlCLEtBQU0sWUFDZixHQUFJNnRCLE9BQU8yWixjQUFjMW5CLFdBQWFxZSxnQkFBZ0JpSSx5QkFDM0Q3SSxTQUFTMWQsTUFBUTBXLFNBQVNDLFdBQVdDLE1BQ3JDOEcsU0FBUzVGLFNBQVdwQixTQUFTTSxVQUFVQyxlQUN2Q3lHLFNBQVN2OUIsS0FBTzZ0QixPQUFPM2tCLFFBQVFxWCxvQkFDMUIsR0FBSXNOLE9BQU8yWixjQUFjMW5CLFdBQWFxZSxnQkFBZ0JnSSxxQkFDdER0WSxPQUFPM2tCLFFBQVFnK0IsUUFBVXJaLE9BQU8za0IsUUFBUWkrQixrQkFBaUQsUUFBN0J0WixPQUFPM2tCLFFBQVEwaEIsVUFDOUUyUyxTQUFTMWQsTUFBUTBXLFNBQVNDLFdBQVdFLFNBRXJDNkcsU0FBUzFkLE1BQVEwVyxTQUFTQyxXQUFXQyxNQUNyQzhHLFNBQVM1RixTQUFXcEIsU0FBU00sVUFBVUUsVUFDdkN3RyxTQUFTdjlCLEtBQU82dEIsT0FBTzNrQixRQUFRMGhCLGdCQUU1QixHQUFJaUQsT0FBTzJaLGNBQWMxbkIsV0FBYXFlLGdCQUFnQmtJLGlCQUMzRDlJLFNBQVMxZCxNQUFRMFcsU0FBU0MsV0FBV0csS0FDckM0RyxTQUFTdjlCLEtBQU82dEIsT0FBTzNrQixRQUFReStCLGVBQzFCLElBQUk5WixPQUFPMlosY0FBYzFuQixXQUFhcWUsZ0JBQWdCb0ksb0JBUTNELE9BUEFoSixTQUFTMWQsTUFBUTBXLFNBQVNDLFdBQVdFLFFBQ3JDNkcsU0FBUzVNLE9BQVM5QyxPQUFPM2tCLFFBQVFyRixPQUFPOEIsUUFBUS9FLFNBQVN3eUIsU0FBUytVLFlBQ2xFNUssU0FBUzdNLE9BQVM3QyxPQUFPM2tCLFFBQVFyRixPQUFPOEIsUUFBUS9FLFNBQVN3eUIsU0FBU2dWLGFBQ2xFN0ssU0FBU3ROLFVBQVlwQyxPQUFPM2tCLFFBQVFyRixNQUFNOEIsT0FBTzBpQyxNQUFNcGdDLE1BQU11QyxPQUN6RHFqQixPQUFPM2tCLFFBQVFyRixNQUFNOEIsT0FBTzBpQyxNQUFNcGdDLEtBQ2xDNGxCLE9BQU8za0IsUUFBUXJGLE1BQU03RCxJQUczQixDQUM4QyxjQUExQ2tILEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQzVCeTJCLFNBQVNwd0IsT0FBUSxHQUVmMGdCLE9BQU8za0IsUUFBUW0rQixXQUNqQjlRLFNBQVM2QyxjQUFjbUUsVUFDZDFQLE9BQU8za0IsUUFBUW8rQixnQkFDeEIvUSxTQUFTNEIsYUFBYW9GLFVBQVV0c0IsTUFBSzRuQixPQUNuQ3JuQixjQUFjcXJCLGdCQUFnQmhFLEtBQUtBLEtBQUksSUFHekNVLHNCQUFzQmpmLE9BQU9pakIsU0FBVSxDQUFFaG5CLE9BQVEsQ0FBQ3NYLE9BQU8za0IsUUFBUXJGLE9BQU81RCxRQUFPcUcsR0FBS0EsRUFBRWd6QixPQUFPOXVCLFNBQVM0eUIsYUFBY3ZQLE9BQU8za0IsUUFBUTh2QixVQUV2SSxFQUdOLENBRUEsdUJBQWFpUCxDQUFZcGEsUUFDdkIsTUFBTXlhLFlBQWM3SyxXQUFXbmpCLE9BQU91VCxPQUFPMlosZUFDN0MsR0FBSWMsTUFBTyxDQUNULE1BQU10SyxTQUFXc0ssTUFBTXhoQyxJQUFJLFlBQ3ZCazNCLFdBQ0ZuUSxPQUFPMlosY0FBY3hKLFNBQVdBLFVBRWxDblEsT0FBTzJaLGNBQWNsNUIsU0FBV3hJLE9BQU93aUMsTUFBTXhoQyxJQUFJLGNBQ2pEK21CLE9BQU8yWixjQUFjdG5CLFdBQWFwYSxPQUFPd2lDLE1BQU14aEMsSUFBSSxlQUNuRCttQixPQUFPMlosY0FBY3pGLGlCQUFtQmo4QixPQUN0Q3dpQyxNQUFNeGhDLElBQUkscUJBRVorbUIsT0FBTzJaLGNBQWN4RixzQkFBd0JsOEIsT0FDM0N3aUMsTUFBTXhoQyxJQUFJLHlCQUVkLENBQ0YsQ0FFQSxvQkFBYW9oQyxDQUFTcmEsUUFDcEIsT0FBUUEsT0FBTzJaLGNBQWN4SixVQUMzQixLQUFLRyxnQkFBZ0J5SSxvQkFDbkIsQ0FDRSxNQUFNN1csY0FBZ0JpVyxjQUFjMXJCLE9BQU8sQ0FDekNpdUIsYUFBYSxJQUVmLEdBQUl4WSxRQUFTLENBQ1gsSUFBSVksT0FBU1osUUFBUWpwQixJQUFJLFdBQWEsRUFDbEM0cEIsT0FBU1gsUUFBUWpwQixJQUFJLFdBQWEsRUFDdEMsTUFBTW1wQixVQUFZRixRQUFRanBCLElBQUksYUFFekJwQixNQUFNSSxPQUFPNnFCLFdBQVVBLE9BQVM3cUIsT0FBTzZxQixTQUN2Q2pyQixNQUFNSSxPQUFPNHFCLFdBQVVBLE9BQVM1cUIsT0FBTzRxQixTQUU1Q1osYUFBYXhWLE9BQ1h1VCxPQUFPM2tCLFFBQVFyRixNQUFNbVgsU0FDckIsQ0FBRTJWLE9BQVFELE9BQVFULFdBQ2xCLENBQ0VDLFlBQWFyQyxPQUFPMlosY0FBY2w1QixTQUNsQzZoQixjQUFldEMsT0FBTzJaLGNBQWN0bkIsV0FDcENtTyxZQUFhUixPQUFPM2tCLFFBQVE4dkIsVUFHbEMsQ0FDRixDQUNBLE1BQ0YsS0FBS21GLGdCQUFnQnVJLGlCQUFrQixDQUNyQyxNQUFNN21CLE1BQVEsSUFBSWxDLFVBMEJsQixPQXpCQWtDLE1BQU1qQixhQUFlaVAsT0FBTzJaLGNBQWNsNUIsU0FDMUN1UixNQUFNSyxXQUFhMk4sT0FBTzJaLGNBQWN0bkIsV0FDeENMLE1BQU1oYyxNQUFTZ3FCLE9BQU8za0IsUUFBUWlOLFNBRTFCMFgsT0FBTzNrQixRQUFRaU4sU0FEZjBYLE9BQU8za0IsUUFBUTROLFFBRW5CK0ksTUFBTWtpQixpQkFBbUJsVSxPQUFPMlosY0FBY3pGLGlCQUM5Q2xpQixNQUFNbWlCLHNCQUF3Qm5VLE9BQU8yWixjQUFjeEYsc0JBQ25EbmlCLE1BQU0yb0IsU0FDSDNhLE9BQU8za0IsUUFBUXErQixnQkFDaEJyZ0MsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCSSxLQUFLc0csS0FBSzJFLE1BQ1YwYixPQUFPM2tCLFFBQVEwK0IsZUFDYi9aLE9BQU8yWixjQUFjMW5CLFdBQWFxZSxnQkFBZ0JtSSxpQkFDcER6bUIsTUFBTWhPLE1BQVFnYyxPQUFPM2tCLFFBQVFpVixjQUN2QjBCLE1BQU05VSxRQUVaOGlCLE9BQU8yWixjQUFjMW5CLFdBQWFxZSxnQkFBZ0JnSSwwQkFFNUN0bUIsTUFBTTRvQixjQUFjNWEsT0FBTzNrQixRQUFRMGhCLGlCQUVuQy9LLE1BQU02b0IsbUJBQW1CN2EsT0FBTzNrQixRQUFRcVgsZ0JBRTVDc04sT0FBTzJaLGNBQWM1UixhQUN2Qi9WLE1BQU1rZ0IsWUFFRCxDQUNMNXpCLE9BQVEwVCxNQUFNb0ssZUFDZHZNLGFBQWNtQyxNQUFNOG9CLG1CQUNwQnRvQixTQUFVUixNQUFNUSxTQUNoQkMsV0FBWVQsTUFBTVMsV0FDbEIySSxjQUFlLENBQ2IsRUFBR3BKLE1BQU0rb0IsaUJBQ1QsRUFBRy9vQixNQUFNZ3BCLGNBQ1QsRUFBR2hwQixNQUFNaXBCLGtCQUVYM2YsT0FBUXRKLE1BQU1zSixPQUVsQixDQUNBLEtBQUtnVixnQkFBZ0J3SSxrQkFDckIsS0FBS3hJLGdCQUFnQnFJLG1CQUNuQixDQUNFLE1BQU0zbUIsTUFBUSxJQUFJbEMsVUFDbEJrQyxNQUFNaGMsTUFBU2dxQixPQUFPM2tCLFFBQVFpTixTQUUxQjBYLE9BQU8za0IsUUFBUWlOLFNBRGYwWCxPQUFPM2tCLFFBQVE0TixRQUVuQitJLE1BQU1VLGVBQWlCc04sT0FBTzNrQixRQUFRcVgsZUFDdENWLE1BQU0rSyxVQUFZaUQsT0FBTzNrQixRQUFRMGhCLFVBQ2pDL0ssTUFBTTFCLFFBQVUwUCxPQUFPM2tCLFFBQVFpVixRQUMvQjBCLE1BQU01VSxTQUFXL0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsWUFDM0MrWSxNQUFNNmUsVUFBWXgzQixLQUFLc0csS0FBS3NLLEdBQzVCLElBQUk1SSxLQUFPLENBQUMsRUFFVjJlLE9BQU8yWixjQUFjeEosV0FBYUcsZ0JBQWdCd0ksbUJBRWxEejNCLEtBQU8sQ0FDTGpILEtBQU1nOUIsaUJBQWlCdkYsY0FBY3ozQixLQUNyQ2xILE9BQVE4c0IsT0FBTzNrQixRQUFReWYsU0FDdkI1aEIsT0FBUSxPQUVWOFksTUFBTWhRLEtBQU9nZSxPQUFPM2tCLFFBQVFnVixPQUM1QjJCLE1BQU02bkIsZUFBaUI3WixPQUFPM2tCLFFBQVF3K0IsZUFDdEM3bkIsTUFBTThLLFVBQVcsUUFDWDlLLE1BQU1rTCxhQUVaN2IsS0FBTyxDQUNMakgsS0FBTWc1QixrQkFBa0J2QixjQUFjejNCLEtBQ3RDbEIsT0FBUSxPQUVWOFksTUFBTUssV0FBYTJOLE9BQU8yWixjQUFjdG5CLFlBRTFDaFIsS0FBS25FLEtBQU84VSxNQUFNMkgsYUFDbEJ0WSxLQUFLdWYsVUFBWXZuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxZQUV6QyttQixPQUFPMlosY0FBY3hKLFdBQWFHLGdCQUFnQndJLGtCQUVsRDFCLGlCQUFpQnpGLFNBQVN0d0IsTUFFMUIreEIsa0JBQWtCekIsU0FBU3R3QixLQUUvQixFQUdOLEVDeGlCSyxNQUFNNjVCLGFBQ1gsV0FBQTk1QixDQUFhNkgsUUFBVSxLQUFNb0osV0FBYXZDLFVBQVV1UCxnQkFBZ0J0UCxTQUNsRWhVLEtBQUtpVyxNQUFRLElBQUlsQyxVQUFVN0csU0FDM0JsTixLQUFLaVcsTUFBTVUsZUFBaUIsTUFDNUIzVyxLQUFLaVcsTUFBTUssV0FBYUEsV0FDeEJ0VyxLQUFLaVcsTUFBTThLLFVBQVcsRUFDdEIvZ0IsS0FBS2tOLFFBQVVBLE9BQ2pCLENBRUEsV0FBSXlYLEdBSUYsWUFISTltQixJQUFjbUMsS0FBSzRrQixXQUNyQjVrQixLQUFLNGtCLFNBQTZCLGNBQWxCNWtCLEtBQUtxQixVQUVoQnJCLEtBQUs0a0IsUUFDZCxDQUVBLFdBQUlELENBQVM5WSxHQUNYN0wsS0FBSzRrQixTQUFXL1ksQ0FDbEIsQ0FFQSxZQUFJeEssR0FFRixPQURLckIsS0FBSzZrQixZQUFXN2tCLEtBQUs2a0IsVUFBWXZuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUN6RDhDLEtBQUs2a0IsU0FDZCxDQUVBLFlBQUl4akIsQ0FBVXdLLElBQ0YsSUFBTkEsSUFBYTdMLEtBQUs2a0IsVUFBWXZuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUM1RDhDLEtBQUs2a0IsVUFBWWhaLENBQ25CLENBRUEsU0FBSTVSLEdBQ0YsT0FBSStGLEtBQUtrTixRQUFnQnNDLFdBQVdxQixnQkFBZ0I3USxLQUFLa04sU0FDbEQsSUFDVCxDQUVBLFdBQUlBLENBQVNyQixHQUNYN0wsS0FBS28vQixTQUFXdnpCLEVBQ2hCN0wsS0FBS2lXLE1BQU1oYyxNQUFRNFIsQ0FDckIsQ0FFQSxXQUFJcUIsR0FDRixPQUFJbE4sS0FBS28vQixTQUFpQnAvQixLQUFLby9CLFNBQ3hCLElBQ1QsQ0FFQSxZQUFJN3lCLEdBQ0YsT0FBSXZNLEtBQUsvRixNQUFNMmMsUUFBZ0I1VyxLQUFLL0YsTUFBTXNTLFNBQ25DLElBQ1QsQ0FFQSxhQUFJa1MsR0FDRixRQUFJemUsS0FBS2lXLE9BQWNqVyxLQUFLaVcsTUFBTXdJLFNBRXBDLENBRUEsWUFBSTRnQixHQUNGLFNBQUlyL0IsS0FBS2lXLE9BQVNqVyxLQUFLaVcsTUFBTXRCLE9BQVMzVSxLQUFLaVcsTUFBTXRCLE1BQU1sUyxNQUV6RCxDQUVBLGtCQUFPaVIsQ0FBYXBILE1BQ2xCLE1BQU1nekIsU0FBVyxJQUFJSCxhQUNyQjN2QixXQUFXbUMscUJBQXFCMnRCLFNBQVVoekIsTUFDMUMsTUFBTWl6QixVQUFZanpCLEtBQUtzSCxjQUFjLGdCQUdyQyxPQUZBSCxTQUFTcUIsZUFBZXlxQixVQUFXRCxTQUFTcnBCLE9BQzVDcXBCLFNBQVNqakIsVUFBWS9QLEtBQUt6UCxRQUFRLFlBQVlFLFFBQVFzZixVQUMvQ2lqQixRQUNULENBRUEscUJBQU1FLEdBQ0osTUFDTXZsQixXQUFhd0csZUFERiwrQ0FDMkJ6Z0IsS0FBS2lXLE9BQzNDYSxZQUFjZ1YsRUFBRUMsVUFBVTlSLE1BQU0sR0FDdEMsT0FBSW5ELGFBQ0ZBLFlBQVk5SCxVQUFVZ1UsT0FBTyxZQUFhLFlBQWEsYUFDaERsTSxhQUVGLElBQ1QsQ0FFQSxlQUFNcWYsQ0FBVzFSLGFBQWMsR0FHekJBLG1CQUNJemtCLEtBQUt5L0IsVUFHYixNQUFNeGxCLFdBQWF3RyxlQU5GLDZDQU0yQnpnQixNQUN0QzhXLFlBQWNnVixFQUFFQyxVQUFVOVIsTUFBTSxHQUV0QyxHQUFJd0ssWUFBYSxDQUNEM04sWUFBWWxELGNBQWMsZ0JBQ2xDOHJCLGtCQUFrQjEvQixLQUFLdy9CLGtCQUMvQixDQUVBLE1BQU16WixZQUFjLENBQUMsRUFDckIsSUFBSTlWLFFBQ0FqUSxLQUFLL0YsT0FDSCtGLEtBQUtpUixNQUFPOFUsWUFBWTlVLE1BQVFqUixLQUFLaVIsTUFDcEM4VSxZQUFZOXJCLE1BQVErRixLQUFLL0YsTUFDOUJnVyxRQUFVek0sWUFBWTBNLFdBQVc2VixjQUVqQzlWLFFBQVV6TSxZQUFZME0sYUFHeEIsTUFFTTdNLFNBQVcsQ0FDZk8sTUFIVzVELEtBQUsvRixNQUFNMkosS0FBTzVELEtBQUsvRixNQUFNMkosS0FBT3RHLEtBQUtzRyxNQUd6Q3NLLEdBQ1grQixRQUNBRCxPQUFRaFEsS0FBS2dRLE9BQ2JTLFFBQVNxRyxZQUFZNFUsV0FJckIsQ0FBQyxTQUFVLGFBQWExb0IsU0FBUzFGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGVBRTNEbUcsU0FBU0MsUUFBVUUsWUFBWXdpQixxQkFBcUIsT0FFaEMsY0FBbEJobUIsS0FBS3FCLFdBQTBCZ0MsU0FBU0UsT0FBUSxHQUVwREMsWUFBWWtOLE9BQU9yTixVQUFVZ0UsTUFBS3NKLEtBQ3pCQSxLQUVYLENBRUEsYUFBTTh1QixHQUNKei9CLEtBQUtpVyxNQUFNb2lCLGdCQUFpQixRQUN0QnI0QixLQUFLaVcsTUFBTWtMLFdBQ1puaEIsS0FBSzJrQixTQUFZM2tCLEtBQUtxL0IsVUFBYXIvQixLQUFLeWUsWUFDdkN6ZSxLQUFLMi9CLGdCQUNEMy9CLEtBQUsvRixNQUFNbXhCLGFBQWE3MkIsS0FBSzRGLE9BQU9PLFlBRXBDc0YsS0FBSy9GLE1BQU1teEIsYUFBYTcyQixLQUFLNEYsT0FBT0csY0FHOUMwRixLQUFLNC9CLFNBQVUsQ0FDakIsQ0FFQSxvQkFBTXJVLEdBQ0osTUFFTXRSLFdBQWF3RyxlQUZGLDZDQUUyQnpnQixNQUN0QzhXLFlBQWNnVixFQUFFQyxVQUFVOVIsTUFBTSxHQWF0QyxHQVhjbkQsWUFBWWxELGNBQWMsZ0JBQ2xDOHJCLGtCQUFrQjEvQixLQUFLdy9CLG1CQUV4QngvQixLQUFLMmtCLFVBQVcza0IsS0FBS3EvQixVQUFhci9CLEtBQUt5ZSxZQUN0Q3plLEtBQUsyL0IsZ0JBQ0QzL0IsS0FBSy9GLE1BQU1teEIsYUFBYTcyQixLQUFLNEYsT0FBT08sWUFFcENzRixLQUFLL0YsTUFBTW14QixhQUFhNzJCLEtBQUs0RixPQUFPRyxlQUl6QzBGLEtBQUtxYyxVQUFXLE9BQ3JCLE1BQU0yUCxZQUFjMXVCLEtBQUtnZixTQUFTcGYsSUFBSThDLEtBQUtxYyxXQUVyQzFMLFVBQVlxYixZQUFZOXRCLE9BQU8sQ0FBRXVTLFFBQVNxRyxZQUFZNFUsWUFFNUQsYUFETTNpQixHQUFHa2pCLEtBQUtDLGNBQWN2YixLQUFLLEdBQzFCQSxHQUNULEVDdEtLLE1BQU1rdkIsMEJBQTBCcEwsT0FDckMsaUJBQUF6YSxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUV4QkEsS0FDR3ZhLEtBQUssaUJBQ0xzeUIsT0FBTTF2QixhQUFldEMsS0FBSzgvQixzQkFBc0J2akMsUUFDckQsQ0FFQSwyQkFBTXVqQyxDQUF1QnZqQyxPQUMzQixNQUFNSyxHQUFLTCxNQUFNSSxjQUFjRSxRQUFRLFNBR3ZDbUQsS0FBS3NGLEtBQUtBLEtBQUt1ZSxPQUFPM25CLE9BQU9VLEdBQUdHLFFBQVFzZ0IsUUFBUS9ILFVBQVcsRUFDM0QvWSxNQUFNSSxjQUFjb2pDLE1BQU1DLFFBQVUsT0FDL0JoZ0MsS0FBS3NGLEtBQUtBLEtBQUsyNkIsUUFBT2pnQyxLQUFLc0YsS0FBS0EsS0FBSzI2QixNQUFRLEdBQ2xEamdDLEtBQUtzRixLQUFLQSxLQUFLMjZCLFFBQ0YxakMsTUFBTUksY0FBY0UsUUFBUSxtQkFDbkIrVyxjQUFjLFVBQzNCc2EsVUFBWWx1QixLQUFLc0YsS0FBS0EsS0FBSzI2QixNQUNoQ2pnQyxLQUFLc0YsS0FBS0EsS0FBSzI2QixPQUFTamdDLEtBQUtzRixLQUFLQSxLQUFLNDZCLGNBQ3pDbGdDLEtBQUttYixPQUVULENBRUEsbUJBQWF6SyxDQUFRcEwsTUFDbkIsTUFBTTJVLFdBQWF3RyxlQUNqQixnREFDQW5iLE1BRUYsT0FBTyxJQUFJNFcsU0FBUWhCLFVBQ0wsSUFBSTJrQixrQkFDZCxDQUNFbnhCLE1BQU9wSixLQUFLb0osTUFDWitCLFFBQVN3SixLQUNUM1UsS0FDQW92QixRQUFTLENBQUMsRUFDVnZaLE1BQU8sS0FDTCxJQUFLN1YsS0FBSzI2QixPQUFTMzZCLEtBQUs0NkIsYUFBYyxPQUFPaGxCLFNBQVEsR0FDckQsTUFBTTVGLFNBQVdoUSxLQUFLdWUsT0FBT3h0QixRQUFPNFIsT0FBU0EsTUFBTXFOLFdBQ25ELE9BQU80RixRQUFRNUYsU0FBUSxHQUczQixDQUFFcUUsUUFBUyxDQUFDLE9BQVEsU0FBVSxrQkFFNUIzYixRQUFPLEVBQUksR0FFbkIsRUM5Q0ssTUFBTW1pQywwQkFBMEIxTCxPQUNyQyxpQkFBQXphLENBQW1CQyxNQUNqQjVkLE1BQU0yZCxrQkFBa0JDLE1BRXhCQSxLQUNHdmEsS0FBSyxjQUNMc3lCLE9BQU0xdkIsYUFBZXRDLEtBQUtvZ0Msd0JBQXdCN2pDLFNBQ3JEMGQsS0FBS3ZhLEtBQUssVUFBVXN5QixPQUFNejFCLE9BQVN5RCxLQUFLcWdDLGlCQUFpQjlqQyxRQUMzRCxDQUVBLDZCQUFNNmpDLENBQXlCN2pDLE9BQzdCLE1BQU1LLEdBQUtMLE1BQU1JLGNBQWNFLFFBQVEsU0FDakN5akMsU0FBVzFqQyxHQUFHQyxRQUFRLGNBQzVCLElBQUssTUFBTW9KLFFBQVFxNkIsU0FBU2xyQixpQkFBaUIsZUFDM0NuUCxLQUFLK0ksVUFBVWdVLE9BQU8sWUFDdEJoakIsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0IzZCxLQUFLbEosUUFBUWxCLEtBQUt5WixVQUFXLEVBQzVEdFYsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0IzZCxLQUFLbEosUUFBUWxCLEtBQUswa0MsVUFBVyxFQUU5RHpVLEVBQUVsdkIsSUFBSTRqQyxZQUFZLFlBQ2xCeGdDLEtBQUtzRixLQUFLQSxLQUFLc2UsZ0JBQWdCaG5CLEdBQUdHLFFBQVFsQixLQUFLeVosVUFBVyxFQUN0QzFZLEdBQ2pCQyxRQUFRLHlCQUNSK1csY0FBYyxXQUNMc2EsVUFDVmx1QixLQUFLc0YsS0FBS0EsS0FBSzdDLE1BQ2Z6QyxLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQmhuQixHQUFHRyxRQUFRbEIsS0FBSzFGLFdBQzdDNkosS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0JobkIsR0FBR0csUUFBUWxCLEtBQUszRixNQUNwQzBHLEdBQ1pDLFFBQVEseUJBQ1IrVyxjQUFjLG1CQUNWNUUsVUFBVWdVLE9BQU8sWUFDeEJoakIsS0FBS3NGLEtBQUtBLEtBQUs0MkIsVUFBVyxDQVc1QixDQUVBLHNCQUFNbUUsQ0FBa0I5akMsT0FDdEJBLE1BQU1FLGlCQUNGRixNQUFNSSxjQUFjcVMsVUFBVXlULFNBQVMsYUFDM0NwbUIsTUFBTThlLE9BQ1IsQ0FFQSxtQkFBYXpLLENBQVFwTCxNQUNuQixNQUFNMlUsV0FBYXdHLGVBQ2pCLGdEQUNBbmIsTUFFRixPQUFPLElBQUk0VyxTQUFRaEIsVUFDTCxJQUFJaWxCLGtCQUNkLENBQ0V6eEIsTUFBT3BKLEtBQUtvSixNQUNaK0IsUUFBU3dKLEtBQ1QzVSxLQUNBb3ZCLFFBQVMsQ0FBQyxFQUNWdlosTUFBTyxJQUNEN1YsS0FBSzQyQixTQUFpQmhoQixRQUFRNVYsTUFDdEI0VixTQUFRLElBR3hCLENBQUV2QixRQUFTLENBQUMsT0FBUSxTQUFVLGlCQUU1QjNiLFFBQU8sRUFBSSxHQUVuQixFQ3hFSyxNQUFNeWlDLDJCQUEyQmhNLE9BQ3RDLGlCQUFBemEsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFFeEJBLEtBQ0d2YSxLQUFLLGNBQ0xzeUIsT0FBTTF2QixhQUFldEMsS0FBS29nQyx3QkFBd0I3akMsUUFDdkQsQ0FFQSw2QkFBTTZqQyxDQUF5QjdqQyxPQUM3QixNQUFNSyxHQUFLTCxNQUFNSSxjQUFjRSxRQUFRLFNBQ3ZDbUQsS0FBS3NGLEtBQUtBLEtBQUtnUSxTQUFXMVksR0FBR0csUUFBUWxCLElBQ3JDbUUsS0FBS21iLE9BQ1AsQ0FFQSxtQkFBYXpLLENBQVFwTCxNQUNuQixNQUFNMlUsV0FBYXdHLGVBQ2pCLCtDQUNBbmIsTUFFRixPQUFPLElBQUk0VyxTQUFRaEIsVUFDTCxJQUFJdWxCLG1CQUNkLENBQ0UveEIsTUFBT3BKLEtBQUtvSixNQUNaK0IsUUFBU3dKLEtBQ1QzVSxLQUNBb3ZCLFFBQVMsQ0FBQyxFQUNWdlosTUFBTyxJQUNEN1YsS0FBS2dRLFNBQWlCNEYsUUFBUTVWLEtBQUtnUSxVQUMzQjRGLFNBQVEsSUFHeEIsQ0FBRXZCLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCM2IsUUFBTyxFQUFJLEdBRW5CLEVDcENLLE1BQU0waUMseUJBQXlCak0sT0FDcEMsV0FBQXB2QixDQUFhQyxLQUFNaEcsU0FDakJqRCxNQUFNaUosS0FBTWhHLFNBRVpVLEtBQUtvMUIsT0FBUzl2QixLQUFLOHZCLFFBQVUsQ0FBQyxDQUNoQyxDQUVBLGlCQUFBcGIsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFDeEJBLEtBQUtDLEdBQUcsU0FBVSxRQUFTbGEsS0FBSzJnQyxlQUFlMW5DLEtBQUsrRyxPQUNwRGlhLEtBQUtDLEdBQUcsU0FBVSxPQUFRbGEsS0FBS2t5QixVQUFVajVCLEtBQUsrRyxPQUM5Q2lhLEtBQUtDLEdBQ0gsUUFDQSx1QkFDQWxhLEtBQUs0Z0Msc0JBQXNCM25DLEtBQUsrRyxPQUVsQ2lhLEtBQUtDLEdBQ0gsUUFDQSwyQkFDQWxhLEtBQUs2Z0MsMEJBQTBCNW5DLEtBQUsrRyxPQUV0Q2lhLEtBQUtDLEdBQ0gsUUFDQSwyQkFDQWxhLEtBQUs4Z0MsMEJBQTBCN25DLEtBQUsrRyxPQUV0Q2lhLEtBQUtDLEdBQ0gsUUFDQSx3QkFDQWxhLEtBQUsrZ0MsdUJBQXVCOW5DLEtBQUsrRyxPQUVuQ2lhLEtBQUtDLEdBQUcsUUFBUyxTQUFVbGEsS0FBSzI0QixVQUFVMS9CLEtBQUsrRyxNQUNqRCxDQUVBLDJCQUFNNGdDLENBQXVCcmtDLE9BQzNCQSxNQUFNRSxpQkFDTixNQUNNdWtDLFVBREt6a0MsTUFBTUksY0FBY0UsUUFBUSxTQUNsQkUsUUFBUWxCLFVBQ3ZCbUUsS0FBSzgrQixtQkFBbUJrQyxVQUNoQyxDQUVBLCtCQUFNSCxDQUEyQnRrQyxPQUMvQkEsTUFBTUUsaUJBQ04sTUFDTXVrQyxVQURLemtDLE1BQU1JLGNBQWNFLFFBQVEsU0FDbEJFLFFBQVFsQixJQUM3Qm1FLEtBQUtpaEMsdUJBQXVCRCxVQUM5QixDQUVBLCtCQUFNRixDQUEyQnZrQyxPQUMvQkEsTUFBTUUsaUJBQ04sTUFDTXVrQyxVQURLemtDLE1BQU1JLGNBQWNFLFFBQVEsU0FDbEJFLFFBQVFsQixJQUM3Qm1FLEtBQUtraEMsdUJBQXVCRixVQUM5QixDQUVBLDRCQUFNRCxDQUF3QnhrQyxPQUM1QkEsTUFBTUUsaUJBQ04sTUFDTXVrQyxVQURLemtDLE1BQU1JLGNBQWNFLFFBQVEsU0FDbEJFLFFBQVFsQixJQUM3Qm1FLEtBQUttaEMsb0JBQW9CSCxVQUMzQixDQUVBLGVBQU1ySSxDQUFXcDhCLE9BQ2YsTUFBTVksT0FBU1osTUFBTUksY0FBY0ksUUFBUUksT0FDM0MsR0FBZSxTQUFYQSxPQUNGLElBQUssTUFBTWlrQyxPQUFRLENBQ2pCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxjQUVNcGhDLEtBQUs4K0IsbUJBQW1Cc0MsTUFHbENwaEMsS0FBS3FoQyxhQUNVLGFBQVhsa0MsUUFBeUI2QyxLQUFLc0YsS0FBS0EsS0FBS3cwQixVQUMxQzk1QixLQUFLbWIsT0FFVCxDQUVBLHdCQUFNMmpCLENBQW9CampDLEtBQ3hCLE1BQU1lLEdBQUtvRCxLQUFLc2hDLFNBQVMsR0FBRzF0QixjQUFjLG9CQUFvQi9YLFFBQ3hEMGxDLE1BQVEza0MsSUFBSWdYLGNBQWMsU0FDMUI1WixRQUFVZ0csS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0J4TSxNQUFNdmIsS0FDckQsR0FBSTBsQyxPQUFTdm5DLFFBQVMsQ0FDcEIsR0FBSThCLE1BQU1JLE9BQU9sQyxVQUFXLENBQzFCLE1BQU1tSCxLQUFPLElBQUlXLEtBQUs5SCxlQUNoQm1ILEtBQUt5VyxTQUFTLENBQUV0VixPQUFPLElBQzdCbkIsS0FBS2cxQixVQUFVLENBQ2JubUIsT0FBUTFTLEtBQUtDLEtBQUswVyxPQUFPLG9DQUFxQyxDQUM1RDVXLE1BQU8yQyxLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQjRkLEtBQUszbEMsS0FBS3dCLE1BQ2hEckQsWUFHSnVuQyxNQUFNcnJDLE1BQVFpTCxLQUFLc0IsS0FDckIsTUFBTzgrQixNQUFNcnJDLE1BQVFnRyxPQUFPbEMsU0FDNUJnRyxLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQnBrQixPQUFPM0QsS0FBT0ssT0FBT3FsQyxNQUFNcnJDLE9BQ3JEOEosS0FBS28xQixTQUFRcDFCLEtBQUtvMUIsT0FBUyxDQUFDLEdBQ2pDcDFCLEtBQUtvMUIsT0FBT3Y1QixNQUFPLENBQ3JCLENBQ0FtRSxLQUFLcWhDLFlBQ1AsQ0FFQSw0QkFBTUosQ0FBd0JwbEMsS0FDNUIsTUFBTWUsR0FBS29ELEtBQUtzaEMsU0FBUyxHQUFHMXRCLGNBQWMsb0JBQW9CL1gsUUFDeEQwbEMsTUFBUTNrQyxJQUFJZ1gsY0FBYyxTQUM1QjJ0QixRQUNGQSxNQUFNcnJDLE1BQVFnRyxPQUFPcWxDLE1BQU1yckMsT0FBUyxFQUNwQzhKLEtBQUtzRixLQUFLQSxLQUFLc2UsZ0JBQWdCcGtCLE9BQU8zRCxLQUFPSyxPQUFPcWxDLE1BQU1yckMsUUFFNUQ4SixLQUFLcWhDLFlBQ1AsQ0FFQSw0QkFBTUgsQ0FBd0JybEMsS0FDNUIsTUFBTWUsR0FBS29ELEtBQUtzaEMsU0FBUyxHQUFHMXRCLGNBQWMsb0JBQW9CL1gsUUFDeEQwbEMsTUFBUTNrQyxJQUFJZ1gsY0FBYyxTQUM1QjJ0QixPQUFTcmxDLE9BQU9xbEMsTUFBTXJyQyxPQUFTLElBQ2pDcXJDLE1BQU1yckMsTUFBUWdHLE9BQU9xbEMsTUFBTXJyQyxPQUFTLEVBQ3BDOEosS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0Jwa0IsT0FBTzNELEtBQU9LLE9BQU9xbEMsTUFBTXJyQyxRQUU1RDhKLEtBQUtxaEMsWUFDUCxDQUVBLHlCQUFNRixDQUFxQnRsQyxLQUN6QixNQUFNZSxHQUFLb0QsS0FBS3NoQyxTQUFTLEdBQUcxdEIsY0FBYyxvQkFBb0IvWCxRQUN4RDBsQyxNQUFRM2tDLElBQUlnWCxjQUFjLFNBQzVCMnRCLFFBQ0ZBLE1BQU1yckMsTUFBUSxLQUNkOEosS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0Jwa0IsT0FBTzNELEtBQU8sR0FFL0NtRSxLQUFLcWhDLFlBQ1AsQ0FFQSxvQkFBTVYsQ0FBZ0Jwa0MsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU04a0MsTUFBUWhsQyxNQUFNSSxjQUNkekcsTUFBUWdHLE9BQU9xbEMsTUFBTXJyQyxPQUN0QjRGLE1BQU01RixTQUNUOEosS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0Jwa0IsT0FBTytoQyxNQUFNbnJDLE1BQVFGLE9BR3REOEosS0FBS3FoQyxZQUNQLENBRUEsVUFBQUEsR0FDRXJoQyxLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQjZkLE9BQU9oL0IsTUFBUSxFQUM5QyxJQUFLLE1BQU81RyxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUNoQ3ZLLEtBQUtzRixLQUFLQSxLQUFLc2UsZ0JBQWdCcGtCLFFBRW5CLFNBQVIzRCxNQUNGbUUsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPaC9CLE9BQVN2TSxPQUluRCxNQUFNd3JDLFdBQWExaEMsS0FBS3NoQyxTQUFTLEdBQUcxdEIsY0FBYyxXQUNsRCxHQUFJNVQsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPRSxRQUFTLENBRS9DemxDLE9BQU84RCxLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQjZkLE9BQU9oL0IsU0FDN0N2RyxPQUFPOEQsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPdnJDLFFBRTdDd3JDLFdBQVcxeUIsVUFBVUMsSUFBSSxXQUN6QmpQLEtBQUtzRixLQUFLQSxLQUFLdzBCLFVBQVcsSUFFMUI0SCxXQUFXMXlCLFVBQVVnVSxPQUFPLFdBQzVCaGpCLEtBQUtzRixLQUFLQSxLQUFLdzBCLFVBQVcsR0FFZDRILFdBQVc5dEIsY0FBYyxVQUNqQ3NhLFVBQVlsdUIsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPdnJDLEtBQzFELENBRWN3ckMsV0FBVzl0QixjQUFjLFVBQ2pDc2EsVUFBWWx1QixLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQjZkLE9BQU9oL0IsTUFFcER6QyxLQUFLc0YsS0FBS0EsS0FBS3NlLGdCQUFnQnhNLE1BQU11cUIsVUFDdkMzaEMsS0FBS3NGLEtBQUtBLEtBQUt3MEIsU0FBK0csSUFBcEdsNkIsT0FBT0osT0FBT1EsS0FBS3NGLEtBQUtBLEtBQUtzZSxnQkFBZ0Jwa0IsUUFBUW5KLFFBQU91ckMsS0FBTzlsQyxNQUFNbUksU0FBUzI5QixRQUFPaGhDLE9BRXZILENBRUEsZUFBTXN4QixDQUFXMzFCLE9BQ2ZBLE1BQU1FLGdCQUNSLENBRUEsbUJBQWFpVSxDQUFRcEwsTUFDbkIsTUFBTTh2QixPQUFTLENBQUMsRUFDaEI5dkIsS0FBS3NlLGdCQUFnQjZkLE9BQU9oL0IsTUFBUSxFQUNwQyxJQUFLLE1BQU81RyxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFRakYsS0FBS3NlLGdCQUFnQnBrQixRQUNqRCxTQUFSM0QsTUFDRnlKLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPaC9CLE9BQVN2TSxPQUFTLElBRTNDNEYsTUFBTTVGLFFBQVVBLE1BQVEsSUFDM0JrL0IsT0FBT3Y1QixNQUFPLEdBSWR5SixLQUFLc2UsZ0JBQWdCNmQsT0FBT0UsU0FFNUJ6bEMsT0FBT29KLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPaC9CLFNBQ25DdkcsT0FBT29KLEtBQUtzZSxnQkFBZ0I2ZCxPQUFPdnJDLFNBRW5Db1AsS0FBS3U4QixlQUFnQixHQUl6QixNQUFNNW5CLFdBQWF3RyxlQUNqQiw2Q0FDQW5iLE1BRUYsT0FBTyxJQUFJNFcsU0FBUWhCLFVBQ0wsSUFBSXdsQixpQkFDZCxDQUNFaHlCLE1BQU9wSixLQUFLb0osTUFDWitCLFFBQVN3SixLQUNUM1UsS0FDQTh2QixPQUNBVixRQUFTLENBQUMsRUFDVnZaLE1BQU8sSUFDRDdWLEtBQUt3MEIsU0FBaUI1ZSxTQUFRLEdBQ3RCQSxTQUFRLElBR3hCLENBQUV2QixRQUFTLENBQUMsT0FBUSxTQUFVLGlCQUU1QjNiLFFBQU8sRUFBSSxHQUVuQixFQ3JPSyxNQUFNOGpDLHNCQUNYLG1CQUFhcHhCLENBQ1htVCxPQUNBa2UsbUJBQ0FDLFVBQVksS0FDWjVyQyxLQUFPLE1BRVAsTUFBTTZqQixXQUFhd0csZUFDakIscURBQ0EsQ0FDRXdoQixVQUFXcGUsT0FBT2pqQixPQUFTLEVBQzNCaWpCLE9BQ0FwWixLQUFNdTNCLFVBQ041ckMsT0FHSixPQUFPLElBQUk4bEIsU0FBUWhCLFVBQ2pCLElBQUl5WCxTQUFXLEtBQ2YsTUFBTTZCLElBQU0sSUFBSUMsT0FBTyxDQUNyQi9sQixNQUFPdFksS0FDSGtILEtBQUtDLEtBQUswVyxPQUFPLHVCQUF3QixDQUFFN2QsT0FDM0NrSCxLQUFLQyxLQUFLMFcsT0FBTyw0QkFBNkIsQ0FDOUNoTixlQUFnQjg2QixxQkFFcEJ0eEIsUUFBU3dKLEtBQ1R5YSxRQUFTLENBQ1BvRixTQUFVLENBQ1J6OEIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxpQkFDMUJtM0IsU0FBVTFhLE9BQ1IwWSxTQUFXLElBQUlpQyxTQUNiM2EsS0FBSyxHQUFHckcsY0FBYyx1QkFFakJzSCxRQUFReVgsYUFJckJwWCxRQUFTLFdBQ1RKLE1BQU8sSUFDRUQsU0FBUSxLQUduQnNaLElBQUl4MkIsUUFBTyxFQUFJLEdBRW5CLEVDMUNLLE1BQU1ra0Msd0NBQXdDMW9CLGdCQUNuRCx5QkFBV0MsR0FDVCxPQUFPN2EsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNb2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLHFCQUNsQmpMLE1BQU8sR0FDUGtMLFNBQVUsOERBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxPQUNSRixlQUFlLEdBRW5CLENBRUEsU0FBSW5MLEdBQ0YsT0FBT3BSLEtBQUtDLEtBQUswVyxPQUFPLDRCQUE2QixDQUNuRGhOLGVBQWdCakgsS0FBS3VSLE9BQU93d0Isb0JBRWhDLENBRUEsaUJBQUEvbkIsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFFeEJBLEtBQUt2YSxLQUFLLGtCQUFrQnN5QixNQUFNaHlCLEtBQUttaUMsZUFBZWxwQyxLQUFLK0csT0FDM0RpYSxLQUFLdmEsS0FBSyx5QkFBeUI5RCxPQUFPb0UsS0FBS29pQyxnQkFBZ0JucEMsS0FBSytHLE1BQ3RFLENBRUEscUJBQU1vaUMsQ0FBaUI3bEMsT0FDckJ5RCxLQUFLdVIsT0FBTytELFNBQVcvWSxNQUFNSSxjQUFjekcsTUFDM0M4SixLQUFLaEMsUUFBTyxFQUNkLENBRUEsb0JBQU1ta0MsQ0FBZ0I1bEMsT0FDcEIsR0FBNkIsS0FBekJ5RCxLQUFLdVIsT0FBTytELFNBQWlCLENBQy9CLE1BQU16RCxJQUFNaWEsRUFBRXZ2QixNQUFNSSxlQUFlRSxRQUFRLFFBQzNDbUQsS0FBS3VSLE9BQU9uYixLQUFReWIsSUFBSW5TLEtBQUssOEJBQThCa2lDLE9BQVMsR0FDcEU1aEMsS0FBS3VSLE9BQU95d0IsVUFBYW53QixJQUFJblMsS0FBSywwQkFBMEJraUMsT0FBUyxFQUN2RSxDQUNBLEdBQTZCLEtBQXpCNWhDLEtBQUt1UixPQUFPK0QsVUFBd0MsS0FBckJ0VixLQUFLdVIsT0FBT25iLEtBQzdDLE9BQU8sRUFFVDRKLEtBQUt1UixPQUFPMkosUUFBUSxDQUNsQjVGLFNBQVV0VixLQUFLdVIsT0FBTytELFNBQ3RCbGYsS0FBTTRKLEtBQUt1UixPQUFPbmIsS0FDbEI0ckMsVUFBV2hpQyxLQUFLdVIsT0FBT3l3QixZQUV6QmhpQyxLQUFLbWIsT0FDUCxDQUVBLG1CQUFNdVgsQ0FBZW4yQixNQUFPbzJCLFVBQzVCLENBRUEsbUJBQWFqaUIsRUFBUSxPQUFXLEdBQUUsYUFBZ0IsRUFBSyxnQkFBbUIsRUFBSyxtQkFBdUIsR0FBRSxNQUFVLEdBQUUsVUFBYyxNQUFTLENBQUMsR0FDMUksTUFBTXdzQixPQUFTLEdBQ2YsSUFBSyxNQUFNajFCLFNBQVM0YixPQUNsQnFaLE9BQU9obUMsS0FBSyxDQUNWZ1gsR0FBSWpHLE1BQU1pRyxHQUNWOVgsS0FBTTZSLE1BQU03UixLQUNacVUsS0FBTXhDLE1BQU1sTSxPQUFPME8sT0FHdkIsYUFBYSxJQUFJeVIsU0FBUWhCLFVBQ3ZCLElBQUlnbkIsZ0NBQWdDLENBQ2xDSCxtQkFDQU0sWUFDQUMsZUFDQUMsWUFBYTFlLE9BQU9qakIsT0FBUyxFQUM3QmlqQixPQUFRcVosT0FDUjVuQixTQUFVLEdBQ1ZsZixLQUFNLEdBQ05pSCxNQUNBMmtDLFVBQ0E5bUIsU0FDQyxDQUFDLEdBQUdsZCxRQUFPLEVBQUksR0FFdEIsRUMxRUssTUFBTXdrQyxpQkFDWCxtQkFBYTl4QixDQUFRdGEsS0FBTyxLQUFNNHJDLFVBQVksTUFDNUMsTUFBTS9uQixXQUFhd0csZUFDakIsK0NBQ0EsQ0FBRWhXLEtBQU11M0IsVUFBVzVyQyxPQUVyQixPQUFPLElBQUk4bEIsU0FBUWhCLFVBQ2pCLElBQUl5WCxTQUFXLEtBQ2YsTUFBTTZCLElBQU0sSUFBSUMsT0FBTyxDQUNyQi9sQixNQUFPcFIsS0FBS0MsS0FBSzBXLE9BQU8sa0JBQW1CLENBQUU3ZCxPQUM3Q3FhLFFBQVN3SixLQUNUeWEsUUFBUyxDQUNQb0YsU0FBVSxDQUNSejhCLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsaUJBQzFCbTNCLFNBQVUxYSxPQUNSMFksU0FBVyxJQUFJaUMsU0FDYjNhLEtBQUssR0FBR3JHLGNBQWMsdUJBRWpCc0gsUUFBUXlYLGFBSXJCcFgsUUFBUyxXQUNUSixNQUFPLElBQ0VELFNBQVEsS0FHbkJzWixJQUFJeDJCLFFBQU8sRUFBSSxHQUVuQixFQ3hCSyxNQUFNeWtDLG1CQUNYLFdBQUFwOUIsQ0FDRXE5QixpQkFBbUIsS0FDbkJDLGNBQWdCLEtBQ2hCdG1CLFVBQVksTUFFWnJjLEtBQUswaUMsaUJBQW1CQSxpQkFDeEIxaUMsS0FBSzJpQyxjQUFnQkEsY0FDckIzaUMsS0FBS3FjLFVBQVlBLFNBQ25CLENBRUEsc0JBQU11bUIsR0FDSixNQUFNM29CLFdBQWF3RyxlQUFlemdCLEtBQUs0WixTQUFVNVosTUFPM0NxRCxTQUFXLENBQ2ZPLEtBQU10RyxLQUFLc0csS0FBS3NLLEdBQ2hCdUMsUUFBU3dKLE1BUUw1WSxTQUFXL0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsWUFDdkMsQ0FBQyxTQUFVLGFBQWE4RixTQUFTM0IsWUFDbkNnQyxTQUFTQyxRQUFVRSxZQUFZd2lCLHFCQUFxQixPQUd0RDNpQixTQUFTRSxPQUFRLEVBRWpCLE1BQU15b0Isa0JBQW9CeG9CLFlBQVlrTixPQUFPck4sVUFFN0MsT0FEQXJELEtBQUtxYyxVQUFZMlAsWUFBWTlkLEdBQ3RCOGQsV0FDVCxDQUVBLHNCQUFJdEgsR0FDRixPQUFPcG5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUNuQyxDQUVBLFVBQUkrbkIsR0FDRixPQUFJamxCLEtBQUsyaUMsY0FDQUUsZ0JBQWdCeFcsaUJBQWlCcnNCLEtBQUsyaUMsZUFFeEMsSUFDVCxDQUVBLGVBQUl6ZCxHQUNGLE9BQUlsbEIsS0FBS2lsQixPQUFlelYsV0FBVzBCLGdCQUFnQmxSLEtBQUtpbEIsT0FBTzdULFVBQ3hELElBQ1QsQ0FFQSxhQUFJMGpCLEdBQ0YsT0FBSTkwQixLQUFLMGlDLGlCQUNBSSxtQkFBbUJ6VyxpQkFBaUJyc0IsS0FBSzBpQyxrQkFFM0MsSUFDVCxDQUVBLGtCQUFJSyxHQUNGLE9BQUkvaUMsS0FBSzgwQixVQUNBdGxCLFdBQVcwQixnQkFBZ0JsUixLQUFLODBCLFVBQVUxakIsVUFFNUMsSUFDVCxDQUVBLGFBQU04SixHQUNKLEdBQUlsYixLQUFLaWxCLE9BQ1AsT0FBUWpsQixLQUFLaWxCLE9BQU85bkIsUUFDbEIsSUFBSyxhQUNDNkMsS0FBSzgwQixVQUFVM3pCLEtBQUsyUyxhQUFlLEdBQ3JDOVQsS0FBS2dqQyxhQUFlMWxDLEtBQUtDLEtBQUswVyxPQUFPLHdCQUF5QixDQUM1RDdkLEtBQU00SixLQUFLODBCLFVBQVUxK0IsT0FFdkI0SixLQUFLN0MsT0FBUyxvQkFDZDZDLEtBQUtvNkIsWUFBYSxJQUVsQnA2QixLQUFLZ2pDLGFBQWUxbEMsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXdCLENBQzNEN2QsS0FBTTRKLEtBQUs4MEIsVUFBVTErQixPQUV2QjRKLEtBQUtnM0IsT0FBU2gzQixLQUFLODBCLFVBQ25COTBCLEtBQUtvNkIsWUFBYSxHQUVwQnA2QixLQUFLZzNCLE9BQVNoM0IsS0FBSzgwQixVQUNuQjkwQixLQUFLaWpDLFVBQVlqakMsS0FBSzgwQixVQUFVaFEsT0FBT3BmLElBQ3ZDMUYsS0FBS2tqQyxZQUFjbGpDLEtBQUs4MEIsVUFBVWhRLE9BQU8xdUIsS0FDekM0SixLQUFLazNCLE9BQVNsM0IsS0FBS2lsQixPQUNuQixNQUVGLElBQUssUUFFRGpsQixLQUFLODBCLFVBQVUzekIsS0FBSzJTLGNBQWdCLEdBQ3BDOVQsS0FBS2lsQixPQUFPOWpCLEtBQUsyUyxjQUFnQixHQUVqQzlULEtBQUtnakMsYUFBZTFsQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUN2Q3dDLEtBQUtnM0IsT0FBUyxLQUNkaDNCLEtBQUtvNkIsWUFBYSxHQUVsQnA2QixLQUFLODBCLFVBQVUzekIsS0FBSzJTLGFBQWU5VCxLQUFLaWxCLE9BQU85akIsS0FBSzJTLGNBRXBEOVQsS0FBS2dqQyxhQUFlMWxDLEtBQUtDLEtBQUswVyxPQUFPLHdCQUF5QixDQUM1RDdkLEtBQU00SixLQUFLODBCLFVBQVUxK0IsT0FFdkI0SixLQUFLZzNCLE9BQVNoM0IsS0FBSzgwQixVQUNuQjkwQixLQUFLaWpDLFVBQVlqakMsS0FBSzgwQixVQUFVaFEsT0FBT3BmLElBQ3ZDMUYsS0FBS2tqQyxZQUFjbGpDLEtBQUs4MEIsVUFBVWhRLE9BQU8xdUIsS0FDekM0SixLQUFLazNCLE9BQVNsM0IsS0FBS2lsQixPQUNuQmpsQixLQUFLN0MsT0FBUyxvQkFDZDZDLEtBQUtvNkIsWUFBYSxHQUVsQnA2QixLQUFLODBCLFVBQVUzekIsS0FBSzJTLGNBQWdCOVQsS0FBS2lsQixPQUFPOWpCLEtBQUsyUyxlQUVyRDlULEtBQUtnakMsYUFBZTFsQyxLQUFLQyxLQUFLMFcsT0FBTyxvQkFBcUIsQ0FDeEQ3ZCxLQUFNNEosS0FBS2lsQixPQUFPN3VCLE9BRXBCNEosS0FBS2czQixPQUFTaDNCLEtBQUtpbEIsT0FDbkJqbEIsS0FBS2szQixPQUFTbDNCLEtBQUs4MEIsVUFDbkI5MEIsS0FBS2lqQyxVQUFZampDLEtBQUtpbEIsT0FBT2hkLE1BQU12QyxJQUNuQzFGLEtBQUtrakMsWUFBY2xqQyxLQUFLaWxCLE9BQU9oZCxNQUFNN1IsS0FDckM0SixLQUFLN0MsT0FBUyxRQUNkNkMsS0FBS282QixZQUFhLEdBR3BCLE1BRUYsSUFBSyxZQUVEcDZCLEtBQUs4MEIsVUFBVTN6QixLQUFLMlMsY0FBZ0IsR0FDcEM5VCxLQUFLaWxCLE9BQU85akIsS0FBSzJTLGNBQWdCLEdBRWpDOVQsS0FBS2dqQyxhQUFlMWxDLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ3ZDd0MsS0FBS2czQixPQUFTLEtBQ2RoM0IsS0FBS282QixZQUFhLEdBRWxCcDZCLEtBQUs4MEIsVUFBVTN6QixLQUFLMlMsY0FBZ0I5VCxLQUFLaWxCLE9BQU85akIsS0FBSzJTLGNBRXJEOVQsS0FBS2dqQyxhQUFlMWxDLEtBQUtDLEtBQUswVyxPQUFPLHdCQUF5QixDQUM1RDdkLEtBQU00SixLQUFLODBCLFVBQVUxK0IsT0FFdkI0SixLQUFLZzNCLE9BQVNoM0IsS0FBSzgwQixVQUNuQjkwQixLQUFLaWpDLFVBQVlqakMsS0FBSzgwQixVQUFVaFEsT0FBT3BmLElBQ3ZDMUYsS0FBS2tqQyxZQUFjbGpDLEtBQUs4MEIsVUFBVWhRLE9BQU8xdUIsS0FDekM0SixLQUFLazNCLE9BQVNsM0IsS0FBS2lsQixPQUNuQmpsQixLQUFLbzZCLFlBQWEsR0FFbEJwNkIsS0FBSzgwQixVQUFVM3pCLEtBQUsyUyxjQUFnQjlULEtBQUtpbEIsT0FBTzlqQixLQUFLMlMsZUFHckQ5VCxLQUFLZ2pDLGFBQWUxbEMsS0FBS0MsS0FBSzBXLE9BQU8sd0JBQXlCLENBQzVEN2QsS0FBTTRKLEtBQUtpbEIsT0FBTzd1QixPQUVwQjRKLEtBQUtnM0IsT0FBU2gzQixLQUFLaWxCLE9BQ25CamxCLEtBQUtpakMsVUFBWWpqQyxLQUFLaWxCLE9BQU9ILE9BQU9wZixJQUNwQzFGLEtBQUtrakMsWUFBY2xqQyxLQUFLaWxCLE9BQU9ILE9BQU8xdUIsS0FDdEM0SixLQUFLazNCLE9BQVNsM0IsS0FBSzgwQixVQUNuQjkwQixLQUFLbzZCLFlBQWEsR0FHcEIsTUFFRixJQUFLLFdBRURwNkIsS0FBSzgwQixVQUFVM3pCLEtBQUsyUyxjQUFnQixHQUNwQzlULEtBQUtpbEIsT0FBTzlqQixLQUFLMlMsY0FBZ0IsR0FFakM5VCxLQUFLZ2pDLGFBQWUxbEMsS0FBS0MsS0FBS0MsU0FBUyxpQkFDdkN3QyxLQUFLZzNCLE9BQVMsS0FDZGgzQixLQUFLbzZCLFlBQWEsR0FFbEJwNkIsS0FBSzgwQixVQUFVM3pCLEtBQUsyUyxjQUFnQjlULEtBQUtpbEIsT0FBTzlqQixLQUFLMlMsY0FFckQ5VCxLQUFLZ2pDLGFBQWUxbEMsS0FBS0MsS0FBSzBXLE9BQU8sd0JBQXlCLENBQzVEN2QsS0FBTTRKLEtBQUs4MEIsVUFBVTErQixPQUV2QjRKLEtBQUtnM0IsT0FBU2gzQixLQUFLODBCLFVBQ25COTBCLEtBQUtpakMsVUFBWWpqQyxLQUFLODBCLFVBQVVoUSxPQUFPcGYsSUFDdkMxRixLQUFLa2pDLFlBQWNsakMsS0FBSzgwQixVQUFVaFEsT0FBTzF1QixLQUN6QzRKLEtBQUtrM0IsT0FBU2wzQixLQUFLaWxCLE9BQ25CamxCLEtBQUtvNkIsWUFBYSxHQUVsQnA2QixLQUFLODBCLFVBQVUzekIsS0FBSzJTLGNBQWdCOVQsS0FBS2lsQixPQUFPOWpCLEtBQUsyUyxlQUVyRDlULEtBQUtnakMsYUFBZTFsQyxLQUFLQyxLQUFLMFcsT0FBTyx1QkFBd0IsQ0FDM0Q3ZCxLQUFNNEosS0FBS2lsQixPQUFPN3VCLE9BRXBCNEosS0FBS2czQixPQUFTaDNCLEtBQUtpbEIsT0FDbkJqbEIsS0FBS2lqQyxVQUFZampDLEtBQUtpbEIsT0FBT2hkLE1BQU0zQyxLQUFLSSxJQUN4QzFGLEtBQUtrakMsWUFBY2xqQyxLQUFLaWxCLE9BQU9oZCxNQUFNN1IsS0FDckM0SixLQUFLazNCLE9BQVNsM0IsS0FBSzgwQixVQUNuQjkwQixLQUFLbzZCLFlBQWEsUUFRZnA2QixLQUFLODBCLFVBQVUzekIsS0FBSzJTLGFBQWUsR0FDNUM5VCxLQUFLZ2pDLGFBQWUxbEMsS0FBS0MsS0FBSzBXLE9BQU8sd0JBQXlCLENBQzVEN2QsS0FBTTRKLEtBQUs4MEIsVUFBVTErQixPQUV2QjRKLEtBQUtnM0IsT0FBU2gzQixLQUFLODBCLFVBQ25COTBCLEtBQUtvNkIsWUFBYSxJQUVsQnA2QixLQUFLZ2pDLGFBQWUxbEMsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXdCLENBQzNEN2QsS0FBTTRKLEtBQUs4MEIsVUFBVTErQixPQUV2QjRKLEtBQUtnM0IsT0FBU2gzQixLQUFLODBCLFVBQ25COTBCLEtBQUtvNkIsWUFBYSxHQUdoQnA2QixLQUFLZzNCLFNBQ0hoM0IsS0FBS2czQixPQUFPNzFCLEtBQUsyUyxjQUFnQkMsVUFBVUQsYUFBYXpKLFFBQzFEckssS0FBS2czQixPQUFPNzFCLEtBQUtnaUMsZ0JBQWlCLEVBRWxDbmpDLEtBQUtnM0IsT0FBTzcxQixLQUFLZ2lDLGdCQUFpQixHQUl0Q25qQyxLQUFLazhCLFVBQVcsRUFDaEIsTUFBTWppQixXQUFhd0csZUFBZXpnQixLQUFLNFosU0FBVTVaLE1BQ2pELEdBQUlBLEtBQUtxYyxVQUFXLENBQ2xCLE1BQU12TSxRQUFVeFMsS0FBS2dmLFNBQVNwZixJQUFJOEMsS0FBS3FjLFdBQ2pDMEosWUFBYyxDQUFDLEVBQ2pCL2xCLEtBQUtnM0IsU0FDSGgzQixLQUFLZzNCLE9BQU8vbEIsUUFBTzhVLFlBQVk5VSxNQUFRalIsS0FBS2czQixPQUFPL2xCLE1BQU1teUIsV0FDekRwakMsS0FBS2czQixPQUFPLzhCLFFBQU84ckIsWUFBWTlyQixNQUFRK0YsS0FBS2czQixPQUFPLzhCLFFBRXpELE1BQU1nVyxRQUFValEsS0FBS2czQixPQUFTeHpCLFlBQVkwTSxXQUFXNlYsYUFBZSxLQUM5RG5pQixLQUNKNUQsS0FBS2czQixRQUFVaDNCLEtBQUtnM0IsT0FBTy84QixNQUFNMkosS0FDN0I1RCxLQUFLZzNCLE9BQU8vOEIsTUFBTTJKLEtBQ2xCdEcsS0FBS3NHLEtBRVgsSUFBSStNLElBQ0osT0FBS2IsU0FNSGEsSUFERVYsY0FDVUgsUUFBUTVSLE9BQU8sQ0FFekIwRixLQUFNQSxLQUFLc0ssR0FDWCtCLFFBQ0FRLFFBQVN3SixhQUdDbkssUUFBUTVSLE9BQU8sQ0FDekIwRixLQUFNQSxLQUFLc0ssR0FDWHVDLFFBQVN3SixhQUdQbFIsR0FBR2tqQixLQUFLQyxjQUFjdmIsS0FBSyxHQUMxQkEsVUFqQkw1SCxHQUFHQyxjQUFjdUssS0FBSyx5Q0FrQjFCLENBQ0YsQ0FFQSxZQUFJcUcsR0FDRixNQUFPLDBEQUNULEVDdlFLLE1BQU1pcEIsd0JBQXdCcmUsY0FDbkMsV0FBQW5mLENBQWErTCxTQUFVaXlCLGdCQUFrQixLQUFNNWUsYUFBYyxHQUMzRHBvQixNQUFNK1UsU0FBVXFULGFBQ2hCemtCLEtBQUtvUixTQUFXQSxTQUNoQnBSLEtBQUtzakMsYUFBZSxLQUNwQnRqQyxLQUFLcWpDLGdCQUFrQkEsZ0JBQ3ZCcmpDLEtBQUt5a0IsWUFBY0EsWUFDbkJ6a0IsS0FBS2s4QixVQUFXLEVBRWhCbDhCLEtBQUt1akMsYUFBYyxFQUNuQnZqQyxLQUFLd2pDLFdBQVksRUFDakJ4akMsS0FBS3lqQyxhQUFjLEVBQ25CempDLEtBQUtnVixhQUFlLEVBRXBCaFYsS0FBS3FjLFVBQVksS0FDakJyYyxLQUFLdVUsUUFBVSxLQUNmdlUsS0FBS3NVLE9BQVMsS0FDZHRVLEtBQUswakMsU0FBVSxFQUNmMWpDLEtBQUsyakMsZUFBZ0IsRUFDckIzakMsS0FBSzRqQyxjQUFlLEVBQ3BCNWpDLEtBQUs2akMsYUFBYyxDQUNyQixDQUVBLGtCQUFJQyxHQUNGLE9BQ0U5akMsS0FBSzBqQyxTQUNMMWpDLEtBQUsyakMsZUFDTDNqQyxLQUFLNGpDLGNBQ0w1akMsS0FBSzZqQyxXQUVULENBRUEsVUFBSTFtQyxHQUNGLE9BQUk2QyxLQUFLMGpDLFFBQWdCLFFBQ3JCMWpDLEtBQUsyakMsY0FBc0IsYUFDM0IzakMsS0FBSzRqQyxhQUFxQixZQUMxQjVqQyxLQUFLNmpDLFlBQW9CLFdBQ3RCLElBQ1QsQ0FFQSxVQUFJL2UsR0FDRixPQUFPOWtCLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUk4QyxLQUFLc1UsT0FDbkMsQ0FFQSxTQUFJck0sR0FDRixPQUFPakksS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSThDLEtBQUt1VSxRQUNuQyxDQUVBLGdCQUFJK3VCLENBQWN6M0IsR0FDaEI3TCxLQUFLK2pDLGNBQWdCbDRCLEVBQ3JCN0wsS0FBS3dsQixVQUFZM1osQ0FDbkIsQ0FFQSxnQkFBSXkzQixHQVNGLE9BUkt0akMsS0FBSytqQyxpQkFDSC9qQyxLQUFLZ2tDLFlBQWNoa0MsS0FBS3FqQyxrQkFDM0JyakMsS0FBS2drQyxXQUFhbEIsbUJBQW1CelcsaUJBQ25DcnNCLEtBQUtxakMsa0JBR0xyakMsS0FBS2drQyxhQUFZaGtDLEtBQUsrakMsY0FBZ0IvakMsS0FBS2drQyxXQUFXNXlCLFdBRXZEcFIsS0FBSytqQyxjQU1IL2pDLEtBQUsrakMsZUFMVmg3QixHQUFHQyxjQUFjMFUsTUFDZixtQ0FBbUMxZCxLQUFLL0YsTUFBTTdELFFBRXpDLEtBR1gsQ0FFQSxhQUFJMCtCLEdBQ0YsSUFBSzkwQixLQUFLc2pDLGFBQWMsQ0FDdEIsSUFBSXRqQyxLQUFLcWpDLGdCQUtGLE9BQU8sS0FKWnJqQyxLQUFLZ2tDLFdBQWFsQixtQkFBbUJ6VyxpQkFDbkNyc0IsS0FBS3FqQyxpQkFFUHJqQyxLQUFLc2pDLGFBQWV0akMsS0FBS2drQyxXQUFXNXlCLFFBRXhDLENBQ0EsT0FBTzVCLFdBQVdxQixnQkFBZ0I3USxLQUFLc2pDLGFBQ3pDLENBRUEsa0JBQUlXLEdBTUYsT0FMS2prQyxLQUFLZ2tDLGFBQ1Joa0MsS0FBS2drQyxXQUFhbEIsbUJBQW1CelcsaUJBQ25DcnNCLEtBQUtxakMsa0JBR0ZyakMsS0FBS2drQyxVQUNkLENBRUEsWUFBSXBxQixHQUNGLE1BQU8sc0RBQ1QsQ0FFQSx1QkFBT3lTLENBQWtCaFEsV0FDdkIsTUFBTXZNLFFBQVV4UyxLQUFLZ2YsU0FBU3BmLElBQUltZixXQUNsQyxJQUFLdk0sUUFBUyxPQUFPLEtBQ3JCLE1BQU14RCxLQUFPd2YsRUFBRWhjLFFBQVFXLFNBQVMsR0FFMUJ3VSxPQUFTNGQsZ0JBQWdCbnZCLFlBQVlwSCxLQUFNK1AsV0FHakQsT0FGQTRJLE9BQU81SSxVQUFZQSxVQUVaNEksTUFDVCxDQUVBLHVCQUFPaWYsQ0FBa0IzbkMsTUFBTzRuQyxlQUFnQixHQUM5QyxNQUFNNzNCLEtBQU8vUCxNQUFNSSxjQUFjRSxRQUFRLGlCQUNuQzI0QixLQUFPajVCLE1BQU1JLGNBQWNJLFFBQVF5NEIsS0FDbkM0TyxVQUFZNTBCLFdBQVdDLGtCQUFrQitsQixNQUcvQyxHQUFLMk8sY0FJRSxDQUVMLE1BQU1sZixPQUFTNGQsZ0JBQWdCbnZCLFlBQVlwSCxNQUMzQzJZLE9BQU8wUSxXQUFXSCxNQUNsQnZRLE9BQU9zRyxnQkFDVCxNQVJFamYsS0FBS3ZQLFFBQVFxbkMsV0FBeUMsU0FBNUI5M0IsS0FBS3ZQLFFBQVFxbkMsV0FDdkM3bkMsTUFBTUksY0FBY3FTLFVBQVUyTCxPQUFPLGVBQ3JDcGUsTUFBTUksY0FBY0ksUUFBUXVZLFNBQVdoSixLQUFLdlAsUUFBUXFuQyxVQU94RCxDQUVBLFVBQUF6TyxDQUFZL3NCLFVBQ1YsTUFBTTRzQixLQUFPNXNCLFNBQVM1RixTQUFTLEtBQzNCd00sV0FBV0Msa0JBQWtCN0csVUFDN0JBLFNBRUosT0FEQTVJLEtBQUt3MUIsT0FBU3gxQixLQUFLdzFCLE1BQ1hBLE1BQ04sSUFBSyxjQUNMLElBQUssWUFDSHgxQixLQUFLZ1YsYUFBZTVTLEtBQUthLEtBQUssRUFBR2IsS0FBS2MsSUFBSSxFQUFHZSxTQUFTakUsS0FBS2dWLGFBQWMsS0FBT2hWLEtBQUt3MUIsTUFBUSxHQUFLLEtBR3hHLENBRUEsb0JBQU02TyxHQUNKLE1BQU1wcUIsV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUUzQytsQixZQUFjLENBQUMsRUFDZjlVLE1BQVF6QixXQUFXMEIsZ0JBQWdCbFIsS0FBS29SLFVBQzFDSCxNQUFPOFUsWUFBWTlVLE1BQVFBLE1BQU1uQyxTQUNoQ2lYLFlBQVk5ckIsTUFBUStGLEtBQUsvRixNQUU5QixNQUFNZ1csUUFBVXpNLFlBQVkwTSxXQUFXNlYsYUFDbkMvbEIsS0FBSy9GLE1BQU0yYyxVQUFTM0csUUFBUW9CLE1BQVFyUixLQUFLL0YsTUFBTWdYLE1BQU03YSxNQUV6RCxJQUFJd04sS0FBT3RHLEtBQUtzRyxLQUNoQixRQUErQixJQUFwQjVELEtBQUsvRixNQUFNMkosS0FBc0IsQ0FDMUMsSUFBSThyQixPQUFTLEdBQ2IsTUFBTTRVLElBQU1obkMsS0FBS2dsQixNQUFNanNCLFFBQU9xRyxHQUFLQSxFQUFFNkwsT0FBTXZFLEtBQUl0SCxHQUFLQSxFQUFFd1IsS0FDdEQsSUFBSyxNQUFPZ0IsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRdkssS0FBSy9GLE1BQU1xaEIsV0FDN0MsR0FBSTNiLElBQU13USxNQUFNcUwsMEJBQTBCQyxNQUFPLENBQy9DLEdBQVUsWUFBTnZNLEVBQWlCLENBQ25Cd2dCLE9BQVNweUIsS0FBS2dsQixNQUFNdGUsS0FBSXRILEdBQUtBLEVBQUV3UixLQUMvQixLQUNGLENBQVlvMkIsSUFBSXRoQyxTQUFTa00sSUFDdkJ3Z0IsT0FBT3g0QixLQUFLZ1ksRUFFaEIsQ0FFRixJQUFJdUIsUUFBVSxHQUNkLE9BQVFpZixPQUFPOXVCLFFBQ2IsS0FBSyxFQUVILE1BQ0YsS0FBSyxPQUNzQyxJQUE5QnRELEtBQUtnbEIsTUFBTXBsQixJQUFJd3lCLE9BQU8sTUFDL0I5ckIsS0FBT3RHLEtBQUtnbEIsTUFBTXBsQixJQUFJd3lCLE9BQU8sS0FFL0IsTUFDRixRQUNFamYsUUFDRSxNQUFRblQsS0FBS0MsS0FBS0MsU0FBUyx5Q0FDN0JpVCxTQUFvQiw2Q0FDcEIsSUFBSyxNQUFNdkIsS0FBS3dnQixPQUFRLENBQ3RCLE1BQU05ckIsS0FBT3RHLEtBQUtnbEIsTUFBTXBsQixJQUFJZ1MsR0FDeEJ0TCxPQUNGNk0sUUFDRUEsUUFDQSxrQkFDQXZCLEVBQ0EsS0FDQXRMLEtBQUt4TixLQUNMLFlBRU4sQ0FDQXFhLFNBQW9CLDZCQUNkZ2tCLE9BQU84UCxPQUFPLENBQ2xCNzFCLE1BQU9wUixLQUFLQyxLQUFLQyxTQUNmLDhDQUVGaVQsUUFDQWtrQixTQUFVMWEsT0FDUixNQUFNMFksU0FBVyxJQUFJaUMsU0FDbkIzYSxLQUFLLEdBQUdyRyxjQUFjLGdCQUV4QixJQUFLLE1BQU94ZCxLQUFNRixTQUFVeThCLFNBQ2IsU0FBVHY4QixPQUNGd04sS0FBT3RHLEtBQUtnbEIsTUFBTXBsQixJQUFJaEgsT0FFMUIsSUFJVixXQUFzQyxJQUFwQjhKLEtBQUsvRixNQUFNMkosT0FDM0JBLEtBQU81RCxLQUFLL0YsTUFBTTJKLE1BR3BCLE1BQU1QLFNBQVcsQ0FDZk8sS0FBTUEsS0FBS3NLLEdBQ1grQixRQUNBUSxRQUFTd0osTUFHUCxDQUFDLFNBQVUsYUFBYWpYLFNBQVNoRCxLQUFLcUIsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZd2lCLHFCQUFxQixPQUd0RDNpQixTQUFTRSxPQUFRLEVBRWpCLE1BQU11TSxjQUFnQnRNLFlBQVlrTixPQUFPck4sVUFHekMsT0FEQXJELEtBQUtxYyxVQUFZdk0sUUFBUTVCLEdBQ2xCNEIsT0FDVCxDQUVBLG9CQUFNeWIsR0FDSixNQUFNemIsUUFBVXhTLEtBQUtnZixTQUFTcGYsSUFBSThDLEtBQUtxYyxXQUN2QyxJQUFLL2UsS0FBS3NHLEtBQUsyRSxNQUFRdUgsUUFBUWxNLEtBQUtzSyxLQUFPNVEsS0FBS3NHLEtBQUtzSyxHQUluRCxZQUhBbkYsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLQyxTQUFTLHNDQUl2QixNQUFNeWMsV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUUzQzJRLFVBQVliLFFBQVE1UixPQUFPLENBQUV1UyxRQUFTd0osT0FFNUMsYUFETWxSLEdBQUdrakIsS0FBS0MsY0FBY3ZiLEtBQUssR0FDMUJBLEdBQ1QsQ0FFQSx3QkFBTTZ6QixHQUNKL2pCLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUFNcUgsTUFBSzRTLE1BQ2hDQSxNQUVYLENBRUEsMkJBQWF3cUIsQ0FBZ0JuNEIsS0FBTS9QLE9BQ2pDLE1BQU0wb0IsT0FBUzRkLGdCQUFnQm52QixZQUFZcEgsTUFFM0MsT0FBUS9QLE1BQU1JLGNBQWNJLFFBQVFJLFFBQ2xDLElBQUssUUFDSDhuQixPQUFPeWUsU0FBVSxFQUNqQnplLE9BQU8wZSxlQUFnQixFQUN2QjFlLE9BQU8yZSxjQUFlLEVBQ3RCM2UsT0FBTzRlLGFBQWMsRUFDckI1ZSxPQUFPMVEsUUFBVWhZLE1BQU1JLGNBQWNJLFFBQVF3WCxRQUM3QzBRLE9BQU8zUSxPQUFTLEtBQ2hCLE1BRUYsSUFBSyxhQUNIMlEsT0FBT3llLFNBQVUsRUFDakJ6ZSxPQUFPMGUsZUFBZ0IsRUFDdkIxZSxPQUFPMmUsY0FBZSxFQUN0QjNlLE9BQU80ZSxhQUFjLEVBQ3JCNWUsT0FBTzFRLFFBQVUsS0FDakIwUSxPQUFPM1EsT0FBUyxLQUNoQixNQUVGLElBQUssWUFDSDJRLE9BQU95ZSxTQUFVLEVBQ2pCemUsT0FBTzBlLGVBQWdCLEVBQ3ZCMWUsT0FBTzJlLGNBQWUsRUFDdEIzZSxPQUFPNGUsYUFBYyxFQUNyQjVlLE9BQU8xUSxRQUFVaFksTUFBTUksY0FBY0ksUUFBUXdYLFFBQzdDMFEsT0FBTzNRLE9BQVMvWCxNQUFNSSxjQUFjSSxRQUFRMm5DLFNBQzVDLE1BRUYsSUFBSyxXQUNIemYsT0FBT3llLFNBQVUsRUFDakJ6ZSxPQUFPMGUsZUFBZ0IsRUFDdkIxZSxPQUFPMmUsY0FBZSxFQUN0QjNlLE9BQU80ZSxhQUFjLEVBQ3JCNWUsT0FBTzFRLFFBQVVoWSxNQUFNSSxjQUFjSSxRQUFRd1gsUUFDN0MwUSxPQUFPM1EsT0FBUyxLQVNwQixPQUZBMlEsT0FBT3NHLGlCQUVBdEcsTUFDVCxDQUVBLHVCQUFNMGYsQ0FBbUJwd0IsUUFBVSxLQUFNcXdCLFNBQVUsR0FDakQsTUFBTTN1QixNQUFRLElBQUlsQyxVQXNCbEIsT0FwQkFrQyxNQUFNME8sU0FBVSxFQUNoQjFPLE1BQU00dUIsV0FBWSxFQUNsQjV1QixNQUFNSSxtQkFBcUJyVyxLQUFLcWMsVUFDaENwRyxNQUFNQyxTQUFXLFVBQ2pCRCxNQUFNRSxLQUFPLFNBQ2JGLE1BQU05WSxPQUFTNkMsS0FBSzdDLE9BQ3BCOFksTUFBTWhjLE1BQVErRixLQUFLL0YsTUFDbkJnYyxNQUFNaFEsS0FBT2pHLEtBQUtzVSxPQUNsQjJCLE1BQU1oTyxNQUFRc00sUUFDZDBCLE1BQU1LLFdBQWF2QyxVQUFVdVAsZ0JBQWdCdFAsUUFDN0NpQyxNQUFNakIsYUFBZSxFQUVqQmhWLEtBQUtnVixlQUFjaUIsTUFBTWpCLGFBQWVoVixLQUFLZ1Ysb0JBRTNDaUIsTUFBTTlVLE9BQ1puQixLQUFLaVcsTUFBUUEsTUFDYmpXLEtBQUtvMUIsUUFBUyxFQUNkcDFCLEtBQUtrOEIsVUFBVyxFQUNaMEksU0FBUzN1QixNQUFNa2dCLFlBRVpsZ0IsS0FDVCxDQUVBLDRCQUFNNnVCLEdBQ0o5a0MsS0FBS28xQixRQUFTLEVBQ2RwMUIsS0FBS2s4QixVQUFXLEVBQ2hCbDhCLEtBQUsyakMsZUFBZ0IsRUFDckIsTUFBTW9CLGVBQWlCLElBQUl0QyxtQkFDekJ6aUMsS0FBS3FqQyxnQkFDTHJqQyxLQUFLcWMsV0FHRDJvQix3QkFBMEJELGVBQWVuQyxtQkFFL0M1aUMsS0FBSytrQyxlQUFpQkMsa0JBQWtCOTJCLFNBQ2xDbE8sS0FBS3VyQixnQkFDYixDQUVBLHdCQUFNMFosQ0FBb0JodkIsTUFBUSxNQUNoQyxJQUFLQSxRQUFValcsS0FBS2lXLE1BQU8sT0FBTyxLQU9sQyxHQUxJQSxRQUFPalcsS0FBS2lXLE1BQVFBLE9BQ3hCalcsS0FBS21CLEtBQU9zUyxTQUFTdUMsYUFBYWhXLEtBQUtpVyxPQUN2Q2pXLEtBQUtvMUIsUUFBUyxFQUVkcDFCLEtBQUttQixLQUFLK2pDLFVBQVksR0FDbEJsbEMsS0FBS21CLEtBQUtnVCxTQUFVLENBQ3RCblUsS0FBS21CLEtBQUtna0MsVUFBWSxZQUN0Qm5sQyxLQUFLbUIsS0FBS2lrQyxVQUFZOW5DLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ3pDLElBQUssSUFBSTZmLE1BQVEsRUFBR0EsTUFBUSxFQUFHQSxRQUM3QnJkLEtBQUttQixLQUFLK2pDLFVBQVVodUMsS0FBSyxRQUU3QixNQUFPLEdBQUk4SSxLQUFLbUIsS0FBS2lULE9BQVEsQ0FDM0JwVSxLQUFLbUIsS0FBS2drQyxVQUFZLFVBQ3RCbmxDLEtBQUttQixLQUFLaWtDLFVBQVk5bkMsS0FBS0MsS0FBS0MsU0FBUyxlQUN6QyxJQUFLLElBQUk2ZixNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0JyZCxLQUFLbUIsS0FBSytqQyxVQUFVaHVDLEtBQUssU0FFN0IsTUFBTyxHQUFJOEksS0FBS21CLEtBQUtzMkIsUUFBUyxDQUM1QnozQixLQUFLbUIsS0FBS2drQyxVQUFZLFlBQ2xCcHhCLFVBQVVELGFBQWFFLFVBQVloVSxLQUFLbUIsS0FBSzJTLGVBQy9DOVQsS0FBS21CLEtBQUtpa0MsVUFBWTluQyxLQUFLQyxLQUFLQyxTQUFTLHdCQUV2Q3VXLFVBQVVELGFBQWFJLE9BQVNsVSxLQUFLbUIsS0FBSzJTLGVBQzVDOVQsS0FBS21CLEtBQUtpa0MsVUFBWTluQyxLQUFLQyxLQUFLQyxTQUFTLHFCQUV2Q3VXLFVBQVVELGFBQWF6SixVQUFZckssS0FBS21CLEtBQUsyUyxlQUMvQzlULEtBQUttQixLQUFLaWtDLFVBQVk5bkMsS0FBS0MsS0FBS0MsU0FBUyx3QkFFM0MsSUFBSyxJQUFJNmYsTUFBUSxFQUFHQSxNQUFRcmQsS0FBS21CLEtBQUsyUyxhQUFjdUosUUFDbERyZCxLQUFLbUIsS0FBSytqQyxVQUFVaHVDLEtBQUssT0FFN0IsTUFDRThJLEtBQUttQixLQUFLZ2tDLFVBQVksUUFDdEJubEMsS0FBS21CLEtBQUtpa0MsVUFBWTluQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUN6Q3dDLEtBQUttQixLQUFLK2pDLFVBQVVodUMsS0FBSyxTQUczQixNQUFNNnRDLGVBQWlCLElBQUl0QyxtQkFDekJ6aUMsS0FBS3FqQyxnQkFDTHJqQyxLQUFLcWMsV0FFRDJvQix3QkFBMEJELGVBQWVuQyxtQkFFL0M1aUMsS0FBSytrQyxlQUFpQkMsa0JBQWtCOTJCLFNBQ2xDbE8sS0FBS3VyQixnQkFDYixDQUVBLGtCQUFPN1gsQ0FBYXBILEtBQU0rUCxVQUFZLE1BQ3BDLE1BQU1qTCxTQUFXOUUsS0FBS3ZQLFFBQVFxVSxTQUN4Qml5QixnQkFBa0IvMkIsS0FBS3ZQLFFBQVFzbUMsZ0JBQy9CNWUsWUFBMkMsU0FBN0JuWSxLQUFLdlAsUUFBUTBuQixZQUMzQlEsT0FBUyxJQUFJNGQsZ0JBQWdCenhCLFNBQVVpeUIsZ0JBQWlCNWUsYUFROUQsT0FOQVEsT0FBTzlqQixLQUFPc1MsU0FBU0MsWUFBWXBILE1BQ25Da0QsV0FBV21DLHFCQUFxQnNULE9BQVEzWSxNQUVwQ0EsS0FBS3pQLFFBQVEsWUFDZm9vQixPQUFPNUksVUFBWS9QLEtBQUt6UCxRQUFRLFlBQVlFLFFBQVFzZixVQUMvQzRJLE9BQU81SSxVQUFZQSxVQUNuQjRJLE1BQ1QsQ0FFQSxXQUFBb2dCLENBQWFqb0IsV0FBWWtvQixnQkFBaUJDLFNBRW5DdmxDLEtBQUsvRixNQUFNd2pCLFVBQVVMLGFBQ3hCclUsR0FBR0MsY0FBYzBVLE1BQ2YsR0FBRzFkLEtBQUsvRixNQUFNN0Qsa0RBR2xCNEosS0FBS21CLEtBQUtqTCxNQUFRLEtBQ2xCOEosS0FBS21CLEtBQUsyUyxhQUFld3hCLGdCQUN6QnRsQyxLQUFLbUIsS0FBS3FrQyxXQUFZLEVBQ3RCRCxRQUFReG9DLFFBQVEwb0MsV0FBWSxFQUU1QixNQUFNQyxVQUFZSCxRQUFRM3hCLGNBQWMsY0FDeEM4eEIsVUFBVTNvQyxRQUFRN0csTUFBUSxLQUMxQnd2QyxVQUFVM29DLFFBQVErVyxhQUFld3hCLGdCQUNqQ0ksVUFBVTNvQyxRQUFReW9DLFdBQVksRUFFOUIsTUFBTUcsYUFBZUosUUFBUTN4QixjQUFjLG1CQUNyQ2d5QixVQUFZTCxRQUFRM3hCLGNBQWMsZUFDeEMsT0FBUTB4QixpQkFDTixLQUFLdnhCLFVBQVVELGFBQWFFLFFBQzFCNHhCLFVBQVUxWCxVQUFZNXdCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ3pDbW9DLGFBQWF6WCxVQUFZNXdCLEtBQUtDLEtBQUswVyxPQUNqQyxnQ0FDQSxDQUNFbUosV0FDQXRKLGFBQWN4VyxLQUFLQyxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUt1VyxVQUFVRCxhQUFhSSxLQUMxQjB4QixVQUFVMVgsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUFTLG9CQUN6Q21vQyxhQUFhelgsVUFBWTV3QixLQUFLQyxLQUFLMFcsT0FDakMsZ0NBQ0EsQ0FDRW1KLFdBQ0F0SixhQUFjeFcsS0FBS0MsS0FBS0MsU0FBUyx5QkFHckMsTUFFRixLQUFLdVcsVUFBVUQsYUFBYXpKLFFBQzFCdTdCLFVBQVUxWCxVQUFZNXdCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ3pDbW9DLGFBQWF6WCxVQUFZNXdCLEtBQUtDLEtBQUswVyxPQUNqQyxnQ0FDQSxDQUNFbUosV0FDQXRKLGFBQWN4VyxLQUFLQyxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUt1VyxVQUFVRCxhQUFhSyxTQUMxQnl4QixVQUFVMVgsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUFTLHdCQUN6Q21vQyxhQUFhelgsVUFBWTV3QixLQUFLQyxLQUFLMFcsT0FDakMsZ0NBQ0EsQ0FDRW1KLFdBQ0F0SixhQUFjeFcsS0FBS0MsS0FBS0MsU0FBUyw2QkFTekNvb0MsVUFBVTUyQixVQUFVVyxRQUFRLFVBQVcsV0FDdkM0MUIsUUFBUTN4QixjQUFjLGlCQUFpQm9QLFNBQ3ZDdWlCLFFBQVEzeEIsY0FBYyxpQkFBaUJtc0IsTUFBTUMsUUFBVSxPQUN2RDZGLFNBQVN0YSxlQUFlZ2EsUUFDMUIsRUMvZEssTUFBTU8sbUJBQ1gsV0FBQXpnQyxDQUFhK0wsU0FBVyxLQUFNa0QsT0FBUyxLQUFNbVEsYUFBYyxHQUN6RHprQixLQUFLb1IsU0FBV0EsU0FDaEJwUixLQUFLc1UsT0FBU0EsT0FDZHRVLEtBQUt5a0IsWUFBY0EsWUFDbkJ6a0IsS0FBS2s4QixVQUFXLEVBQ2hCbDhCLEtBQUsrbEMsT0FBUSxFQUNiL2xDLEtBQUt3akMsV0FBWSxFQUNqQnhqQyxLQUFLeWpDLGFBQWMsRUFDbkJ6akMsS0FBS3FjLFVBQVksS0FDakJyYyxLQUFLZ21DLFdBQWEsS0FDbEJobUMsS0FBS28xQixRQUFTLEVBQ2RwMUIsS0FBS3dKLFlBQWEsRUFDbEJ4SixLQUFLNEosZUFBZ0IsRUFDckI1SixLQUFLMkosT0FBUSxFQUNiM0osS0FBS2ltQyxVQUFXLEVBQ2hCam1DLEtBQUt1TSxTQUFXLEtBQ2hCdk0sS0FBS2ttQyxPQUFRLEVBQ2JsbUMsS0FBS21tQyxXQUFZLEVBQ2pCbm1DLEtBQUtvbUMsV0FBWSxFQUNqQnBtQyxLQUFLcW1DLGFBQWMsRUFDbkJybUMsS0FBS3NtQyxhQUFjLEVBQ25CdG1DLEtBQUt1bUMsa0JBQW9CLEVBQ3pCdm1DLEtBQUt3bUMsU0FBVyxHQUNoQixJQUFLLE1BQU16akMsSUFBSyxJQUFJekYsS0FBS3NHLEtBQUtvaEIsU0FBVSxDQUN0QyxNQUFNQyxPQUFTLElBQUl3aEIsZ0JBQWdCLEdBQUcxakMsRUFBRThKLE1BQU1xQixNQUFNbkwsRUFBRW1MLE1BQ3REK1csT0FBT2hVLE1BQVFsTyxFQUNmL0MsS0FBS3dtQyxTQUFTdHZDLEtBQUsrdEIsT0FDckIsQ0FDQSxHQUFJamxCLEtBQUt3bUMsU0FBUzVsQyxPQUNoQlosS0FBS3dtQyxTQUFXLENBQUN4bUMsS0FBS3dtQyxTQUFTLElBRS9CeG1DLEtBQUt3bUMsU0FBUyxHQUFHemxDLFFBQVMsTUFDckIsQ0FDTCxNQUFNa2tCLE9BQVMsSUFBSXdoQixnQkFDbkJ4aEIsT0FBT2xrQixRQUFTLEVBQ2hCZixLQUFLd21DLFNBQVN0dkMsS0FBSyt0QixPQUNyQixDQUNBLEdBQUk3VCxTQUFVLENBQ1osTUFBTW5YLE1BQVF1VixXQUFXcUIsZ0JBQWdCTyxVQUd6QyxHQUZBcFIsS0FBS2lSLE1BQVF6QixXQUFXMEIsZ0JBQWdCRSxVQUNwQ3BSLEtBQUtpUixRQUFPalIsS0FBS3VNLFNBQVd0UyxNQUFNc1MsVUFDbEMrSCxPQUFRLENBQ0tyYSxNQUFNa1UsTUFBTWpSLElBQUlvWCxVQUV6QnRVLEtBQUs4a0IsT0FBT3RiLFdBQ2R4SixLQUFLd0osWUFBYSxFQUNUeEosS0FBSzhrQixPQUFPL29CLE9BQU84SyxXQUFXMU8sT0FDdkM2SCxLQUFLaW1DLFVBQVcsR0FHdEIsQ0FDRixDQUNBLEdBQUlqbUMsS0FBS3VNLFNBQ1AsSUFBSyxNQUFNeEosS0FBSy9DLEtBQUt3bUMsU0FDbkIsR0FBSXpqQyxFQUFFa08sT0FBU2pSLEtBQUtpUixNQUFPLENBQ3pCbE8sRUFBRTRQLFNBQVduRCxXQUFXK0MsWUFBWXhQLEVBQUVrTyxNQUFPalIsS0FBS2lSLE9BQ2xEbE8sRUFBRTJqQyxnQkFBa0J0a0MsS0FBS3VrQyxNQUF5QixJQUFuQjVqQyxFQUFFNFAsU0FBU3pjLE9BQWUsSUFDekQ2TSxFQUFFNmpDLGFBQWU3akMsRUFBRTRQLFNBQVNuUSxLQUM1QixNQUFNcWtDLFNBQ0p6a0MsS0FBS3VrQyxNQUF1QyxJQUFqQ24zQixXQUFXZ0UsUUFBUXpRLEVBQUU0UCxXQUFtQixJQUVyRCxHQUFJM1MsS0FBSy9GLE1BQU8sQ0FDZDhJLEVBQUUrakMsaUJBQWtCLEVBR2hCRCxVQURGN21DLEtBQUsvRixNQUFNOEIsT0FBTzZuQixnQkFBZ0JudEIsSUFBSVAsTUFBUSxJQUNuQjZNLEVBQUU0eUIsV0FBVyxrQkFDNUMsRUFDMEIsSUFBdEI1eUIsRUFBRStqQyxpQkFBNEI5bUMsS0FBSzhrQixRQUNqQzlrQixLQUFLOGtCLE9BQU9qYixZQUNkOUcsRUFBRThHLFdBQVksRUFDZDlHLEVBQUVtSCxXQUFZLEVBQ2RuSCxFQUFFcUgsY0FBZSxFQUNqQnJILEVBQUVna0MsWUFBYSxFQUNYL21DLEtBQUs4a0IsT0FBTy9vQixPQUFPOEssV0FBVzlPLFFBQzVCOHVDLFVBQVk3bUMsS0FBSzhrQixPQUFPamIsVUFDMUI5RyxFQUFFOEcsV0FBWSxFQUNMZzlCLFVBQVk3bUMsS0FBSzhrQixPQUFPNWEsVUFDakNuSCxFQUFFbUgsV0FBWSxFQUNMMjhCLFVBQVk3bUMsS0FBSzhrQixPQUFPMWEsYUFDakNySCxFQUFFcUgsY0FBZSxFQUVqQnJILEVBQUVna0MsWUFBYSxHQUdiRixVQUFZN21DLEtBQUs4a0IsT0FBT2piLFlBQVc5RyxFQUFFOEcsV0FBWSxHQUVuRGc5QixTQUFXN21DLEtBQUs4a0IsT0FBT2piLFdBQ3ZCZzlCLFVBQW9DLEVBQXhCN21DLEtBQUs4a0IsT0FBT2piLFlBRXhCOUcsRUFBRW1ILFdBQVksR0FHZDI4QixTQUFtQyxFQUF4QjdtQyxLQUFLOGtCLE9BQU9qYixXQUN2Qmc5QixVQUFvQyxFQUF4QjdtQyxLQUFLOGtCLE9BQU9qYixZQUV4QjlHLEVBQUVxSCxjQUFlLEdBRWZ5OEIsU0FBbUMsRUFBeEI3bUMsS0FBSzhrQixPQUFPamIsWUFBZTlHLEVBQUVna0MsWUFBYSxJQUd2RGhrQyxFQUFFOEcsV0FBYTlHLEVBQUVtSCxXQUFhbkgsRUFBRXFILGNBQWdCckgsRUFBRWdrQyxhQUVwRGhrQyxFQUFFOEcsV0FBWSxHQUt0QixNQUFPOUcsRUFBRThHLFdBQVksQ0FHM0IsQ0FFQSxzQkFBSTZhLEdBQ0YsT0FBT3BuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFDbkMsQ0FFQSxZQUFJMm9CLEdBQ0YsTUFBTW5nQixJQUFNOEosV0FBVzRDLG1CQUFtQnBTLEtBQUtvUixVQUMvQyxPQUFJMUwsS0FDRyxvQ0FDVCxDQUVBLFNBQUl6TCxHQUNGLE9BQU91VixXQUFXcUIsZ0JBQWdCN1EsS0FBS29SLFNBQ3pDLENBRUEsUUFBSW5MLEdBQ0YsT0FBT2pHLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUk4QyxLQUFLc1UsT0FDbkMsQ0FFQSxVQUFJd1EsR0FDRixPQUFPOWtCLEtBQUtpRyxJQUNkLENBRUEsV0FBSStlLEdBRUYsT0FES2hsQixLQUFLd21DLFdBQVV4bUMsS0FBS3dtQyxTQUFXLElBQzdCeG1DLEtBQUt3bUMsUUFDZCxDQUVBLFVBQUl2aEIsR0FDRixPQUFJamxCLEtBQUtnbEIsU0FBV2hsQixLQUFLZ2xCLFFBQVFwa0IsT0FBZVosS0FBS2dsQixRQUFRTSxNQUN0RCxJQUNULENBRUEsVUFBSXpCLEdBQ0YsT0FBTzdqQixLQUFLL0YsTUFBTXlyQixnQkFBZ0IxbEIsS0FBS3NVLE9BQ3pDLENBRUEsbUJBQUkweUIsR0FDRixPQUFPaG5DLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUk4QyxLQUFLOGtCLE9BQU8vb0IsT0FBT2tNLE1BQU1nRyxLQUFLQyxHQUM1RCxDQUVBLG1CQUFJKzRCLEdBQ0YsT0FBSWpuQyxLQUFLOGtCLE9BQU8vb0IsT0FBT2tNLE1BQU1tRyxXQUFXRixHQUMvQmxPLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUk4QyxLQUFLOGtCLE9BQU8vb0IsT0FBT2tNLE1BQU1tRyxXQUFXRixJQUUzRGxPLEtBQUtnbkMsZUFDZCxDQUVBLFlBQUlFLEdBQ0YsT0FBT2xuQyxLQUFLMkosT0FBUzNKLEtBQUtpbUMsUUFDNUIsQ0FFQSxlQUFJa0IsR0FDRixPQUFPbm5DLEtBQUtpbUMsVUFBWWptQyxLQUFLNEosYUFDL0IsQ0FFQSxVQUFJdzlCLEdBSUYsWUFISXZwQyxJQUFjbUMsS0FBS3FuQyxVQUNyQnJuQyxLQUFLcW5DLFFBQVVybkMsS0FBSy9GLE1BQU1xdEMsYUFBYSxXQUVsQ3RuQyxLQUFLcW5DLE9BQ2QsQ0FFQSxnQkFBSUUsR0FDRixPQUFLdm5DLEtBQUt3bUMsU0FBUzVsQyxPQUNaWixLQUFLd21DLFNBQVM5bUMsTUFBS3FELEdBQUtBLEVBQUVoQyxTQURDLElBRXBDLENBRUEsU0FBSXltQyxHQUVGLFlBREkzcEMsSUFBY21DLEtBQUt5bkMsU0FBUXpuQyxLQUFLeW5DLE9BQVMsSUFDdEN6bkMsS0FBS3luQyxNQUNkLENBRUEsbUJBQUlDLEdBQ0YsT0FBTzFuQyxLQUFLd25DLE1BQU01bUMsT0FBUyxDQUM3QixDQUVBLDhCQUFJK21DLEdBQ0YsT0FBTzNuQyxLQUFLNG5DLGdCQUNkLENBRUEsVUFBSVIsQ0FBUWhuQixHQUNWcGdCLEtBQUtxbkMsUUFBVWpuQixDQUNqQixDQUVBLGlCQUFJeW5CLEdBQ0YsSUFBSUMsUUFBUyxFQUNiLElBQUssTUFBTXp3QixLQUFLclgsS0FBS29YLE1BQ25CMHdCLE9BQVNBLFFBQVV6d0IsRUFBRW9ILFVBRXZCLE9BQU9xcEIsTUFDVCxDQUVBLGtCQUFJQyxHQUNGLE1BQU1DLEtBQU8sR0FDYixJQUFLLElBQUkzcUIsTUFBUSxFQUFHQSxNQUFRcmQsS0FBS29YLE1BQU14VyxPQUFReWMsUUFDN0MsR0FBSXJkLEtBQUtvWCxNQUFNaUcsT0FBT29CLFVBQVcsQ0FDL0IsTUFBTXdwQixJQUFNLENBQ1Y5bUMsS0FBTW5CLEtBQUtvWCxNQUFNaUcsT0FDakI2cUIsS0FBTWxvQyxLQUFLd25DLE1BQU1ucUIsUUFFbkIycUIsS0FBSzl3QyxLQUFLK3dDLElBQ1osQ0FFRixPQUFvQixJQUFoQkQsS0FBS3BuQyxPQUFxQm9uQyxLQUNsQixJQUNkLENBRUEsYUFBSUcsR0FDRixPQUFPbm9DLEtBQUt3bkMsTUFBUXhuQyxLQUFLd25DLE1BQU01bUMsT0FBUyxDQUMxQyxDQUVBLGFBQUl3bkMsR0FDRixPQUFPcG9DLEtBQUs4a0IsT0FBTzFaLGVBQ3JCLENBRUEsWUFBSWk5QixHQUNGLE9BQUlyb0MsS0FBS2ltQyxTQUFpQixJQUduQmptQyxLQUFLOGtCLE9BQU8vb0IsT0FBT3dOLGFBQWF0RyxJQUNuQ2dCLFNBQVNqRSxLQUFLOGtCLE9BQU8vb0IsT0FBT3dOLGFBQWF0RyxLQUN6QyxDQUNOLENBRUEsY0FBSXFsQyxHQUNGLE9BQU9ockMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsZ0JBQ25DLENBRUEsc0JBQUlxckMsR0FDRixPQUFPanJDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHVCQUNuQyxDQUVBLGFBQUlzckMsR0FDRixPQUFJeG9DLEtBQUtzb0MsWUFDTHRvQyxLQUFLdW1DLG1CQUFxQnZtQyxLQUFLOGtCLE9BQU8xWixlQUU1QyxDQUVBLGNBQUlxOUIsR0FDRixPQUFJem9DLEtBQUt1b0MsdUJBQ0x2b0MsS0FBS3duQyxPQUFjeG5DLEtBQUt3bkMsTUFBTTVtQyxRQUFVWixLQUFLcW9DLFNBRW5ELENBRUEsY0FBSUssR0FDRixJQUFLMW9DLEtBQUs4a0IsT0FBTy9vQixPQUFPOEssV0FBVzFPLEtBQU0sT0FBTyxFQUNoRCxHQUFJNkgsS0FBSzJvQyxZQUFhLE9BQU8zb0MsS0FBSzJvQyxZQUNsQyxNQUFNcHBDLEtBQU82QyxLQUFLMEksTUFBTTlLLEtBQUtpbkMsZ0JBQWdCL3dDLE1BQVEsSUFDckQsT0FBT3FKLEtBQU8sRUFBSSxFQUFJQSxJQUN4QixDQUVBLGNBQUltcEMsQ0FBWTc4QixHQUNWQSxHQUFLekosS0FBSzBJLE1BQU05SyxLQUFLaW5DLGdCQUFnQi93QyxNQUFRLElBQy9DOEosS0FBSzJvQyxZQUFjdm1DLEtBQUswSSxNQUFNOUssS0FBS2luQyxnQkFBZ0Ivd0MsTUFBUSxJQUNsRDJWLEdBQUssSUFDZDdMLEtBQUsyb0MsWUFBYyxHQUVyQjNvQyxLQUFLMm9DLFlBQWMxa0MsU0FBUzRILEVBQzlCLENBRUEsbUJBQUkrOEIsR0FDRixPQUF3QixJQUFwQjVvQyxLQUFLMG9DLFVBRVgsQ0FFQSxtQkFBSUcsR0FLRixPQUhFem1DLEtBQUswSSxNQUFNOUssS0FBS2luQyxnQkFBZ0Ivd0MsTUFBUSxJQUFNLEVBQzFDLEVBQ0FrTSxLQUFLMEksTUFBTTlLLEtBQUtpbkMsZ0JBQWdCL3dDLE1BQVEsT0FDOUI4SixLQUFLMG9DLFVBRXZCLENBRUEsZ0JBQUFJLENBQWtCanRDLEtBQ2hCLE9BQU9tRSxLQUFLd21DLFNBQVM5bUMsTUFBS3FELEdBQUtsSCxNQUFRa0gsRUFBRXFPLFVBQzNDLENBRUEscUJBQUEyM0IsR0FDRSxJQUFLLE1BQU1obUMsS0FBSy9DLEtBQUtnbEIsUUFDbkJqaUIsRUFBRTZrQyxlQUFpQjVuQyxLQUFLNG5DLGVBQWU3a0MsRUFFM0MsQ0FFQSx1QkFBSWltQyxHQUNGLE9BQVFocEMsS0FBS2lwQyxvQkFBc0IsRUFBSWpwQyxLQUFLaXBDLG9CQUFzQixDQUNwRSxDQUVBLHlCQUFJQyxHQUNGLE9BQVFscEMsS0FBS2lwQyxxQkFBdUIsR0FBS2pwQyxLQUFLaXBDLG9CQUFzQixDQUN0RSxDQUVBLGNBQUFyQixDQUFnQjdrQyxFQUFJLE1BQ2xCLE1BQU1raUIsT0FBU2xpQixHQUFLL0MsS0FBS3VuQyxhQUN6QixJQUFJcHdCLE9BQVNuWCxLQUFLOGtCLE9BQU8vb0IsT0FBTytOLE1BQU1MLE9BQU8wTixPQUN6Q25YLEtBQUs4a0IsT0FBTy9vQixPQUFPOEssV0FBVzlPLFVBQzVCZ0wsRUFBRW1ILFlBQVdpTixPQUFTblgsS0FBSzhrQixPQUFPL29CLE9BQU8rTixNQUFNSyxLQUFLZ04sUUFDcERwVSxFQUFFcUgsZUFBYytNLE9BQVNuWCxLQUFLOGtCLE9BQU8vb0IsT0FBTytOLE1BQU1PLFFBQVE4TSxTQUVoRSxJQUNJYixXQURBNVIsU0FBV1QsU0FBU2doQixPQUFPdmdCLFNBQVUsSUFHcEM0UixXQURMdFcsS0FBSzhrQixPQUFPL29CLE9BQU84SyxXQUFXOU8sUUFDWixFQUNBa3RCLE9BQU8zTyxXQUN6QixJQUFJNnlCLGVBQWlCLEdBVXJCLEdBVElucEMsS0FBS29uQyxRQUFtQyxJQUF6QnBuQyxLQUFLMG5DLGlCQUF1QmhqQyxXQUMzQzFFLEtBQUt1TCxRQUFRN0csV0FDYjFFLEtBQUs0SixnQkFBa0I1SixLQUFLaW1DLFVBQVV2aEMsV0FDdEMxRSxLQUFLaW1DLFdBQVV2aEMsVUFBWTFFLEtBQUswbkMsZ0JBQWtCLEdBQ2xEMW5DLEtBQUttbUMsV0FBV3poQyxXQUNoQjFFLEtBQUtvbUMsV0FBVzFoQyxXQUNoQjFFLEtBQUtxbUMsYUFBYTNoQyxXQUNsQjFFLEtBQUtzbUMsYUFBYTVoQyxXQUN0QjFFLEtBQUtpcEMsb0JBQXNCdmtDLFNBQ3ZCQSxVQUFZLEVBQUcsQ0FFakI0UixZQURlbFUsS0FBS0MsSUFBSXFDLFNBQVcsR0FFL0I0UixXQUFhdkMsVUFBVXVQLGdCQUFnQm5QLFdBQ3pDbUMsV0FBYXZDLFVBQVV1UCxnQkFBZ0I4bEIsWUFFekMxa0MsVUFBWSxDQUNkLE1BQVdBLFNBQVcsSUFDcEJBLFNBQVcsR0FpQmIsT0FkSXFQLFVBQVV1UCxnQkFBZ0J0UCxVQUFZc0MsYUFDeEM2eUIsZUFBaUIsV0FFZnAxQixVQUFVdVAsZ0JBQWdCcFAsT0FBU29DLGFBQVk2eUIsZUFBaUIsUUFDaEVwMUIsVUFBVXVQLGdCQUFnQmpaLFVBQVlpTSxhQUN4QzZ5QixlQUFpQixXQUVmcDFCLFVBQVV1UCxnQkFBZ0JuUCxXQUFhbUMsYUFDekM2eUIsZUFBaUIsWUFFZnAxQixVQUFVdVAsZ0JBQWdCOGxCLGFBQWU5eUIsYUFDM0M2eUIsZUFBaUIsY0FHWixDQUNMRSxNQUFPL3lCLFdBQ1BsZ0IsS0FBTSt5QyxlQUNOemtDLFNBQ0F5UyxPQUNBaXlCLFdBQVk5eUIsYUFBZXZDLFVBQVV1UCxnQkFBZ0I4bEIsV0FFekQsQ0FNQSxzQkFBQUUsR0FDRXRwQyxLQUFLK29DLHdCQUNMLE1BQU1iLEtBQU8sQ0FDWGpqQixPQUFRamxCLEtBQUt1bkMsYUFDYm45QixhQUFjcEssS0FBS3VuQyxhQUFhbjlCLGFBQ2hDZ0gsU0FBVXBSLEtBQUt1bkMsYUFBYW4yQixTQUM1Qm00QixVQUFXdnBDLEtBQUt1bkMsYUFBYW54QyxLQUM3QmtnQixXQUFZdFcsS0FBS3VuQyxhQUFhSyxlQUFleUIsTUFDN0Mza0MsU0FBVTFFLEtBQUt1bkMsYUFBYUssZUFBZWxqQyxTQUMzQ3lTLE9BQVFuWCxLQUFLdW5DLGFBQWFLLGVBQWV6d0IsT0FDekNxeUIsWUFBYSxFQUNiQyxlQUFnQixFQUNoQkMsbUJBQW9CLEVBQ3BCQyxTQUFTLEdBR1gsSUFBSUMsV0FBYTVwQyxLQUFLb29DLFVBQVlwb0MsS0FBS3VtQyxrQkFFdkMsR0FBSXZtQyxLQUFLaW1DLFNBQVUsQ0FDakIsR0FBSWptQyxLQUFLMG5DLGdCQUFrQixFQUFHLENBQzVCLE1BQU1tQyxhQUFlN3BDLEtBQUt3bkMsTUFBTXhuQyxLQUFLMG5DLGdCQUFrQixHQUN2RCxHQUFJbUMsYUFBYXo0QixXQUFhcFIsS0FBS3VuQyxhQUFhbjJCLFNBQVUsQ0FDeEQsTUFBTXVCLFNBQVduRCxXQUFXK0MsWUFDMUIvQyxXQUFXMEIsZ0JBQWdCMjRCLGFBQWF6NEIsVUFDeEM1QixXQUFXMEIsZ0JBQWdCbFIsS0FBS3VuQyxhQUFhbjJCLFdBRS9DODJCLEtBQUt1QixlQUFpQnJuQyxLQUFLMEksTUFBTTBFLFdBQVdnRSxRQUFRYixXQUNoRHUxQixLQUFLdUIsZ0JBQWtCRyxhQUFlNXBDLEtBQUtzb0MsYUFDN0NKLEtBQUt1QixlQUFpQkcsV0FDdEJBLFdBQWEsR0FFZjVwQyxLQUFLdW1DLGtCQUNIdGlDLFNBQVNqRSxLQUFLdW1DLG1CQUFxQjJCLEtBQUt1QixlQUMxQ3ZCLEtBQUt5QixTQUFVLENBQ2pCLENBQ0YsQ0FDQXpCLEtBQUtzQixZQUFjeHBDLEtBQUswb0MsV0FDcEJSLEtBQUtzQixhQUFlLElBQUd0QixLQUFLc0IsWUFBYyxHQUMxQ3RCLEtBQUtzQixhQUFlSSxhQUFlNXBDLEtBQUtzb0MsYUFDMUNKLEtBQUtzQixZQUFjSSxXQUNuQkEsV0FBYSxHQUdmMUIsS0FBS3dCLG1CQUFxQnhCLEtBQUtzQixZQUFjdEIsS0FBS3VCLGNBQ3BELENBQ0l6cEMsS0FBSzJKLFFBQ1B1K0IsS0FBS3NCLFlBQWN2bEMsU0FBU2pFLEtBQUs4a0IsT0FBTy9vQixPQUFPd04sYUFBYUksT0FDeEQxRixTQUFTakUsS0FBSzhrQixPQUFPL29CLE9BQU93TixhQUFhSSxPQUN6QyxFQUNBdStCLEtBQUtzQixhQUFlSSxhQUFlNXBDLEtBQUtzb0MsYUFDMUNKLEtBQUtzQixZQUFjSSxXQUNuQkEsV0FBYSxJQUlqQjVwQyxLQUFLdW1DLGtCQUFvQnRpQyxTQUFTakUsS0FBS3VtQyxtQkFBcUIyQixLQUFLc0IsWUFFN0R4cEMsS0FBS29uQyxTQUNQcG5DLEtBQUtvbkMsUUFBUyxFQUNkcG5DLEtBQUtrbUMsT0FBUSxHQUdmbG1DLEtBQUt3bkMsTUFBTXR3QyxLQUFLZ3hDLEtBQ2xCLENBRUEsWUFBSXR1QixHQUNGLE1BQU8seURBQ1QsQ0FFQSxvQkFBTXlxQixHQUNKcmtDLEtBQUsrb0Msd0JBQ0wsTUFBTTl1QixXQUFhd0csZUFBZXpnQixLQUFLNFosU0FBVTVaLE1BSzNDK2xCLFlBQWMsQ0FBQyxFQUNmOVUsTUFBUXpCLFdBQVcwQixnQkFBZ0JsUixLQUFLb1IsVUFDMUNILE1BQU84VSxZQUFZOVUsTUFBUUEsTUFBTW5DLFNBQ2hDaVgsWUFBWTlyQixNQUFRK0YsS0FBSy9GLE1BRTlCLE1BQU1nVyxRQUFVek0sWUFBWTBNLFdBQVc2VixhQUlqQzFpQixTQUFXLENBQ2ZPLE1BRlc1RCxLQUFLL0YsTUFBTTJKLEtBQU81RCxLQUFLL0YsTUFBTTJKLEtBQU90RyxLQUFLc0csTUFFekNzSyxHQUNYK0IsUUFDQVEsUUFBU3dKLE1BR0w1WSxTQUFXL0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsWUFDdkMsQ0FBQyxTQUFVLGFBQWE4RixTQUFTM0IsWUFDbkNnQyxTQUFTQyxRQUFVRSxZQUFZd2lCLHFCQUFxQixPQUd0RDNpQixTQUFTRSxPQUFRLEVBSWpCLGFBRjBCQyxZQUFZa04sT0FBT3JOLFNBRy9DLENBRUEsb0JBQU1rb0IsR0FDSnZyQixLQUFLK29DLHdCQUNMLE1BQU05dUIsV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUUzQzhQLFFBQVV4UyxLQUFLZ2YsU0FBU3BmLElBQUk4QyxLQUFLcWMsV0FFakMxTCxVQUFZYixRQUFRNVIsT0FBTyxDQUFFdVMsUUFBU3dKLE9BRTVDLGFBRE1sUixHQUFHa2pCLEtBQUtDLGNBQWN2YixLQUFLLEdBQzFCQSxHQUNULENBRUEsVUFBQWdsQixDQUFZL3NCLFVBQ1YsTUFBTTRzQixLQUFPNXNCLFNBQVM1RixTQUFTLEtBQzNCd00sV0FBV0Msa0JBQWtCN0csVUFDN0JBLFNBRU8sZUFBVDRzQixNQUNTLGtCQUFUQSxNQUNTLGFBQVRBLE1BRUF4MUIsS0FBS3dKLFlBQWEsRUFDbEJ4SixLQUFLNEosZUFBZ0IsRUFDckI1SixLQUFLaW1DLFVBQVcsRUFDSCxhQUFUelEsT0FBcUJ4MUIsS0FBSzJKLE9BQVEsR0FDdEMzSixLQUFLdzFCLE9BQVEsR0FDSyxVQUFUQSxNQUNUeDFCLEtBQUtpbUMsVUFBVyxFQUNYam1DLEtBQUt3SixZQUFleEosS0FBSzRKLGdCQUFlNUosS0FBS3dKLFlBQWEsR0FDL0R4SixLQUFLMkosT0FBUzNKLEtBQUsySixRQUVuQjNKLEtBQUt3MUIsT0FBU3gxQixLQUFLdzFCLE1BQ25CcnFCLFFBQVEyK0IsSUFBSXRVLEtBQU14MUIsS0FBS3cxQixPQUUzQixDQUVBLGlCQUFNdVUsR0FFSixHQURBL3BDLEtBQUtvWCxNQUFRLEdBQ1RwWCxLQUFLbW5DLFlBQWEsQ0FDcEIsSUFBSTZDLG1CQUFvQixFQUNwQjNzQixNQUFRLEVBQ1osTUFBUTJzQixtQkFBcUJocUMsS0FBS3duQyxNQUFNNW1DLE9BQVN5YyxPQUFPLENBQ3RELE1BQU1sYyxXQUFhbkIsS0FBS2lxQyxjQUFjanFDLEtBQUt3bkMsTUFBTW5xQixRQUM3Q2xjLEtBQUtTLE1BQU1ULFlBQ1BELFNBQVNpQyxlQUFlaEMsS0FBS1MsS0FBS1QsWUFFcENuQixLQUFLOGtCLE9BQU9sWixhQUNoQjNILFNBQVNqRSxLQUFLd25DLE1BQU1ucUIsT0FBT21zQixhQUN6QnZsQyxTQUFTakUsS0FBS3duQyxNQUFNbnFCLE9BQU9vc0IsaUJBRTNCdG9DLEtBQUsrb0MsaUJBQ1Avb0MsS0FBS3NkLFdBQVksRUFDakJ1ckIsbUJBQW9CLEdBRXRCM3NCLFFBQ0FyZCxLQUFLb1gsTUFBTWxnQixLQUFLaUssS0FDbEIsQ0FDRixLQUFPLENBQ0wsTUFBTUEsV0FBYW5CLEtBQUtpcUMsZ0JBQ3BCOW9DLEtBQUtTLE1BQU1ULFlBQ1BELFNBQVNpQyxlQUFlaEMsS0FBS1MsS0FBS1QsTUFFMUMsSUFBSWdwQyxZQUFjbnFDLEtBQUsySixNQUNuQjFGLFNBQVNqRSxLQUFLOGtCLE9BQU8vb0IsT0FBT3dOLGFBQWFJLE9BQ3pDLEVBQ0F3Z0MsYUFBZW5xQyxLQUFLb29DLFlBQVcrQixZQUFjbnFDLEtBQUtvb0MsV0FDdEQsTUFBTUYsS0FBTyxDQUNYampCLE9BQVFqbEIsS0FBS3VuQyxhQUNibjlCLGFBQWNwSyxLQUFLdW5DLGFBQWFuOUIsYUFDaENnSCxTQUFVcFIsS0FBS3VuQyxhQUFhbjJCLFNBQzVCbTRCLFVBQVd2cEMsS0FBS3VuQyxhQUFhbnhDLEtBQzdCa2dCLFdBQVl0VyxLQUFLdW5DLGFBQWFLLGVBQWV5QixNQUM3QzNrQyxTQUFVMUUsS0FBS3VuQyxhQUFhSyxlQUFlbGpDLFNBQzNDeVMsT0FBUW5YLEtBQUt1bkMsYUFBYUssZUFBZXp3QixPQUN6Q3F5QixZQUFhVyxZQUNiVixlQUFnQixFQUNoQkUsU0FBUyxTQUVMM3BDLEtBQUs4a0IsT0FBT2xaLGFBQWF1K0IsYUFFM0JocEMsS0FBSytvQyxpQkFDUC9vQyxLQUFLc2QsV0FBWSxHQUVuQnplLEtBQUt3bkMsTUFBTXR3QyxLQUFLZ3hDLE1BQ2hCbG9DLEtBQUtvWCxNQUFNbGdCLEtBQUtpSyxLQUNsQixDQUNBbkIsS0FBS2s4QixVQUFXLEVBQ2hCbDhCLEtBQUtvMUIsUUFBUyxRQUVScDFCLEtBQUt1ckIsZ0JBQ2IsQ0FFQSxtQkFBTTBlLENBQWUvQixLQUFPLE1BQzFCLE1BQU1qakIsT0FBU2lqQixLQUNYbG9DLEtBQUs4b0MsaUJBQWlCWixLQUFLOTJCLFVBQzNCcFIsS0FBS3VuQyxhQUNIdHhCLE1BQVEsSUFBSWxDLFVBMkJsQixPQTFCQWtDLE1BQU03RSxTQUFXcFIsS0FBS29SLFNBQ3RCNkUsTUFBTWhjLE1BQVErRixLQUFLb1IsU0FDbkI2RSxNQUFNaFEsS0FBT2pHLEtBQUtzVSxPQUVsQjJCLE1BQU0wTyxTQUFVLEVBQ2hCMU8sTUFBTTR1QixXQUFZLEVBQ2Q3a0MsS0FBS2tuQyxTQUFVanhCLE1BQU1oTyxNQUFRakksS0FBS2luQyxnQkFDakNoeEIsTUFBTWhPLE1BQVFqSSxLQUFLZ25DLGdCQUNwQmhuQyxLQUFLbW5DLGFBQ1BseEIsTUFBTUssV0FBYTR4QixLQUFLNXhCLFdBQ3hCTCxNQUFNakIsYUFBZWt6QixLQUFLeGpDLFdBRTFCMUUsS0FBSytvQyx3QkFDTC9vQyxLQUFLdW1DLGtCQUFvQnRpQyxTQUFTakUsS0FBS3VtQyxtQkFBcUIsRUFDeER2bUMsS0FBS29uQyxTQUNQcG5DLEtBQUtvbkMsUUFBUyxFQUNkcG5DLEtBQUtrbUMsT0FBUSxHQUVmandCLE1BQU1LLFdBQWF0VyxLQUFLdW5DLGFBQWFLLGVBQWV5QixNQUNwRHB6QixNQUFNakIsYUFBZWhWLEtBQUt1bkMsYUFBYUssZUFBZWxqQyxVQUd4RHVSLE1BQU1tMEIsUUFBVSxHQUFHOXNDLEtBQUtDLEtBQUtDLFNBQVMsbUJBQW1CeW5CLE9BQU83dUIsT0FDaEU2ZixNQUFNdVAsVUFBWVAsT0FBTzdULGVBRW5CNkUsTUFBTTlVLE9BQ0w4VSxLQUNULENBRUEsdUJBQU9vVyxDQUFrQmhRLFdBQ3ZCLE1BQU12TSxRQUFVeFMsS0FBS2dmLFNBQVNwZixJQUFJbWYsV0FDbEMsSUFBS3ZNLFFBQVMsT0FBTyxLQUNyQixNQUFNeEQsS0FBT3dmLEVBQUVoYyxRQUFRVyxTQUFTLEdBRTFCcWtCLFVBQVlnUixtQkFBbUJweUIsWUFBWXBILEtBQU0rUCxXQUd2RCxPQUZBeVksVUFBVXpZLFVBQVlBLFVBRWZ5WSxTQUNULENBRUEsZ0JBQUF1VixDQUFrQngrQixHQUNoQjdMLEtBQUswb0MsV0FBYTFvQyxLQUFLMG9DLFdBQWE3OEIsRUFDcEM3TCxLQUFLdXJCLGdCQUNQLENBRUEsdUJBQU8yWSxDQUFrQjNuQyxNQUFPNG5DLGVBQWdCLEdBQzlDLE1BQU03M0IsS0FBTy9QLE1BQU1JLGNBQWNFLFFBQVEsb0JBQ25DMjRCLEtBQU9qNUIsTUFBTUksY0FBY0ksUUFBUXk0QixLQUNuQzRPLFVBQVk1MEIsV0FBV0Msa0JBQWtCK2xCLE1BRy9DLEdBQUsyTyxjQUlFLENBRUwsTUFBTXJQLFVBQVlnUixtQkFBbUJweUIsWUFBWXBILE1BQ2pELEdBQUkvUCxNQUFNSSxjQUFjcVMsVUFBVXlULFNBQVMsZUFBZ0IsQ0FDekQsTUFBTXdDLE9BQVMxb0IsTUFBTUksY0FBY0UsUUFBUSxXQUNyQ2hCLElBQU1vSSxTQUFTZ2hCLE9BQU9sb0IsUUFBUXlvQixXQUNwQ3NQLFVBQVU5UCxRQUFRbnBCLEtBQUs4NUIsV0FBV3lPLFVBQ3BDLE1BQU90UCxVQUFVYSxXQUFXeU8sV0FDNUJ0UCxVQUFVdkosZ0JBQ1osTUFaRWpmLEtBQUt2UCxRQUFRcW5DLFdBQXlDLFNBQTVCOTNCLEtBQUt2UCxRQUFRcW5DLFdBQ3ZDN25DLE1BQU1JLGNBQWNxUyxVQUFVMkwsT0FBTyxlQUNyQ3BlLE1BQU1JLGNBQWNJLFFBQVF1WSxTQUFXaEosS0FBS3ZQLFFBQVFxbkMsVUFXeEQsQ0FFQSxRQUFBa0csQ0FBVUMsV0FDUixNQUFNcHBDLEtBQU9uQixLQUFLb1gsTUFBTW16QixXQUNsQm50QixXQUFhblosU0FBUzlDLEtBQUswVSxZQUM1QjdWLEtBQUsvRixNQUFNd2pCLFVBQVVMLGFBTTFCamMsS0FBSzJTLGFBQWUzUyxLQUFLbVYsV0FDekJuVixLQUFLc2QsV0FBWSxFQUNqQnRkLEtBQUtxa0MsV0FBWSxFQUNqQnhsQyxLQUFLdXJCLGtCQVJIeGlCLEdBQUdDLGNBQWMwVSxNQUNmLEdBQUcxZCxLQUFLL0YsTUFBTTdELG1EQVFwQixDQUVBLFdBQUFpdkMsQ0FBYWtGLFVBQVdDLGNBRXRCLE1BQU1ycEMsS0FBT25CLEtBQUtvWCxNQUFNbXpCLFdBQ2xCRSxpQkFBbUJ0cEMsS0FBS3VVLGdCQUFnQjgwQixjQUN4Q3B0QixXQUFhblosU0FBU3dtQyxpQkFBaUJydEIsWUFDN0MsSUFBS3BkLEtBQUsvRixNQUFNd2pCLFVBQVVMLFlBSXhCLFlBSEFyVSxHQUFHQyxjQUFjMFUsTUFDZixHQUFHMWQsS0FBSy9GLE1BQU03RCxvREFJbEIsTUFBTWt2QyxnQkFBa0JyaEMsU0FBU3dtQyxpQkFBaUJuRixpQkFDbERua0MsS0FBSzJTLGFBQWV3eEIsZ0JBQ2hCbmtDLEtBQUttVixZQUFjZ3ZCLGtCQUFpQm5rQyxLQUFLc2QsV0FBWSxHQUN6RHRkLEtBQUtxa0MsV0FBWSxFQUNqQnhsQyxLQUFLdXJCLGdCQUNQLENBRUEsa0JBQU83WCxDQUFhcEgsS0FBTStQLFVBQVksTUFDcEMsTUFBTXF1QixlQUFpQixJQUFJNUUsbUJBQzNCNEUsZUFBZWxFLFNBQVcsR0FDdEJucUIsVUFBV3F1QixlQUFlcnVCLFVBQVlBLFVBQ2pDL1AsS0FBS3pQLFFBQVEsY0FDcEI2dEMsZUFBZXJ1QixVQUFZL1AsS0FBS3pQLFFBQVEsWUFBWUUsUUFBUXNmLFdBRzlEN00sV0FBV21DLHFCQUFxQis0QixlQUFnQnArQixNQUNoRCxNQUFNcStCLFlBQWNyK0IsS0FBSzhJLGlCQUFpQixXQUMxQyxJQUFLLE1BQU1yUyxLQUFLNG5DLFlBQWEsQ0FDM0IsTUFBTTFsQixPQUFTd2hCLGdCQUFnQjN4QixlQUFlL1IsR0FDOUMybkMsZUFBZTFsQixRQUFROXRCLEtBQUsrdEIsT0FDOUIsQ0FFQSxNQUFNMmxCLFVBQVl0K0IsS0FBSzhJLGlCQUFpQixTQUN4QyxHQUFJdzFCLFVBQ0YsSUFBSyxNQUFNMzBDLEtBQUsyMEMsVUFBVyxDQUN6QixNQUFNMUMsS0FBTyxDQUFDLEVBQ2QxNEIsV0FBV21DLHFCQUFxQnUyQixLQUFNanlDLEdBQ3RDeTBDLGVBQWVsRCxNQUFNdHdDLEtBQUtneEMsS0FDNUIsQ0FVRndDLGVBQWV0ekIsTUFBUSxHQUN2QixNQUFNQSxNQUFROUssS0FBSzhJLGlCQUFpQixnQkFDcEMsSUFBSyxNQUFNaUMsS0FBS0QsTUFBTyxDQUNyQixNQUFNalcsS0FBT3NTLFNBQVNxQixlQUFldUMsR0FDckNxekIsZUFBZXR6QixNQUFNbGdCLEtBQUtpSyxLQUM1QixDQUVBdXBDLGVBQWV2ekIsT0FBUyxHQUN4QixNQUFNMHpCLFlBQWN2K0IsS0FBSzhJLGlCQUFpQixtQkFDMUMsSUFBSyxNQUFNMDFCLE1BQU1ELFlBQWEsQ0FDNUIsTUFBTW5SLFdBQWExaUIsV0FBV2xDLGVBQWVnMkIsSUFDN0NKLGVBQWV2ekIsT0FBT2pnQixLQUFLd2lDLFdBQzdCLENBRUEsT0FBT2dSLGNBQ1QsQ0FFQSxnQkFBTXRRLEdBQ0pwNkIsS0FBS21YLE9BQVMsR0FDZCxNQUFNNndCLEtBQU9ob0MsS0FBSytuQyxlQVFsQixJQUFLLElBQUl2bkIsRUFBSSxFQUFHQSxFQUFJd25CLEtBQUtwbkMsT0FBUTRmLElBQUssQ0FDcEMsTUFBTXVxQixFQUFJL0MsS0FBS3huQixHQUNUa29CLFdBQWF6a0MsU0FBUzhtQyxFQUFFN0MsS0FBS3NCLGFBQzdCcUIsWUFBYyxHQUVwQixHQUFJbkMsV0FBYSxFQUFHLENBQ2xCLElBQUk3TyxjQUFnQno5QixPQUFPMnVDLEVBQUU3QyxLQUFLL3dCLFFBQzdCMGlCLGVBQW1DLEtBQWxCQSxnQkFBc0JBLGNBQWdCLEtBQ3hENzVCLEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVd4TyxPQUM5QndoQyxjQUFnQkEsY0FBZ0IsSUFBTTc1QixLQUFLL0YsTUFBTWtDLElBRS9DNkQsS0FBS2lHLEtBQUtsSyxPQUFPOEssV0FBV3pPLE9BQzlCeWhDLGVBQWdDanlCLGNBQWNxekIsT0FBT2o3QixLQUFLL0YsTUFBTWtDLEtBRWxFLE1BQU02dUMsVUFBWWgwQixXQUFXQyxXQUFXNGlCLGVBQ2xDcUIsVUFBWSxJQUFJcDVCLEtBQUsrM0IsZUFBaUJqN0IsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQXFCLGVBQWIsWUFBcUQsQ0FBRWdNLFVBQVUsSUFBUXRJLE1BQ2xLd29DLHNCQUF3QmpyQyxLQUFLOGtCLE9BQU94VyxPQUN0QyxHQUFHdXJCLG1CQUFtQnFCLFlBQ3RCLEdBQUdBLFlBQ0RnUSxrQkFBb0JsMEIsV0FBV0MsV0FBV2cwQix1QkFFaEQsSUFBSUUsY0FBZ0IsRUFDaEJDLGdCQUFrQixFQUNsQmozQixVQUFXLEdBQ1huVSxLQUFLaW1DLFVBQVlqbUMsS0FBSzJKLFNBQ3hCeWhDLGdCQUFrQmhwQyxLQUFLMEksTUFBTTQ5QixXQUFhLElBRXBCLElBQXBCMEMsa0JBQXVCQSxnQkFBa0IsR0FDekNMLEVBQUU1cEMsS0FBSzJTLGNBQWdCQyxVQUFVdVAsZ0JBQWdCalosVUFDbkQ4Z0MsY0FBZ0JDLGdCQUNoQkEsZ0JBQWtCMUMsV0FBYXlDLGNBQy9CaDNCLFVBQVcsRUFFVEosVUFBVXVQLGdCQUFnQm5QLFdBQWE0MkIsRUFBRTVwQyxLQUFLMlMsZUFDN0NDLFVBQVV1UCxnQkFBZ0JqWixTQUFXMGdDLEVBQUU1cEMsS0FBS21WLFlBQzNDeTBCLEVBQUU3QyxLQUFLOTlCLGdCQUVUZ2hDLGdCQUFrQjFDLFdBQ2xCeUMsY0FBZ0IsRUFDaEJoM0IsVUFBVyxJQUlmLElBQUkxUixNQUFRLEVBQ1osSUFBSyxJQUFJNGEsTUFBUSxFQUFHQSxNQUFRK3RCLGdCQUFpQi90QixRQUFTLENBQ3BELE1BQU1sYyxLQUFPLElBQUlXLEtBQUsrM0IscUJBRWhCMTRCLEtBQUt5VyxTQUFTLENBQUV0VixPQUFPLFVBQ3ZCcEIsU0FBU2lDLGVBQWVoQyxNQUU5QixNQUFNUyxLQUFPLEdBQ2IsSUFBSyxNQUFNeVQsT0FBT2xVLEtBQUtTLEtBQ3JCLElBQUssTUFBTVcsVUFBVThTLElBQUkzUyxRQUN2QmQsS0FBSzFLLEtBQUssQ0FDUjhOLE1BQU9xUSxJQUFJclEsTUFDWHpDLE9BQVFBLE9BQU9BLFNBSXJCc29DLFlBQVkzekMsS0FBSyxDQUNmOEMsUUFBUzYvQixjQUNUcDNCLE1BQU90QixLQUFLc0IsTUFDWjRTLElBQUsyMUIsVUFDTHBwQyxLQUNBdVMsVUFBVSxJQUVaMVIsT0FBU3RCLEtBQUtzQixLQUNoQixDQUNBLElBQUssSUFBSTRhLE1BQVEsRUFBR0EsTUFBUTh0QixjQUFlOXRCLFFBQVMsQ0FDbEQsTUFBTWxjLEtBQU8sSUFBSVcsS0FBS21wQyw2QkFDaEI5cEMsS0FBS3lXLGlCQUNMMVcsU0FBU2lDLGVBQWVoQyxNQUM5QixNQUFNUyxLQUFPLEdBQ2IsSUFBSyxNQUFNeVQsT0FBT2xVLEtBQUtTLEtBQ3JCLElBQUssTUFBTVcsVUFBVThTLElBQUkzUyxRQUN2QmQsS0FBSzFLLEtBQUssQ0FDUjhOLE1BQU9xUSxJQUFJclEsTUFDWHpDLE9BQVFBLE9BQU9BLFNBSXJCc29DLFlBQVkzekMsS0FBSyxDQUNmOEMsUUFBU2l4QyxzQkFDVHhvQyxNQUFPdEIsS0FBS3NCLE1BQ1o0UyxJQUFLNjFCLGtCQUNMdHBDLEtBQ0F1UyxVQUFVLElBRVoxUixPQUFTdEIsS0FBS3NCLEtBQ2hCLENBRUEsSUFBSW1qQixXQUFhLFFBQ2JYLE9BQVN6VixXQUFXMEIsZ0JBQWdCNjVCLEVBQUU1cEMsS0FBS3FrQixXQUMxQ1AsU0FBUUEsT0FBU3pWLFdBQVdxQixnQkFBZ0JrNkIsRUFBRTVwQyxLQUFLcWtCLFlBQ3BEUCxTQUFRVyxXQUFhWCxPQUFPN3VCLE1BRWhDNEosS0FBS21YLE9BQU9qZ0IsS0FBSyxDQUNmc3VCLFVBQVd1bEIsRUFBRTVwQyxLQUFLcWtCLFVBQ2xCSSxXQUNBeE8sTUFBT3l6QixZQUNQcG9DLE1BQ0EwUixTQUNBazNCLE9BQU8sRUFDUHJJLGFBQWMxbEMsS0FBS0MsS0FBSzBXLE9BQU8seUJBQTBCLENBQ3ZEN2QsS0FBTXd2QixXQUNObmpCLFNBR04sQ0FDRixDQUVBekMsS0FBS3NyQyxhQUFzQyxJQUF2QnRyQyxLQUFLbVgsT0FBT3ZXLE9BQ2hDWixLQUFLdXJCLGdCQUNQLENBRUEsZ0JBQU1nUCxHQUNKLElBQUssSUFBSWdSLE9BQVMsRUFBR0EsT0FBU3ZyQyxLQUFLbVgsT0FBT3ZXLE9BQVEycUMsU0FBVSxDQUMxRCxNQUFNdHhDLE1BQVF1VixXQUFXcUIsZ0JBQWdCN1EsS0FBS21YLE9BQU9vMEIsUUFBUS9sQixXQUM3RCxHQUFjLE9BQVZ2ckIsTUFDRjhPLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUtDLFNBQVMsOEJBQ3JDLENBQ0x3QyxLQUFLbVgsT0FBT28wQixRQUFRQyxXQUFhLEVBQ2pDeHJDLEtBQUttWCxPQUFPbzBCLFFBQVFFLGNBQWdCLEVBQ3BDLElBQ0UsSUFBSUMsT0FBUyxFQUNiQSxPQUFTMXJDLEtBQUttWCxPQUFPbzBCLFFBQVFuMEIsTUFBTXhXLE9BQ25DOHFDLFNBQ0EsQ0FDQSxNQUFNQyxrQkFBb0IxeEMsTUFBTXNnQyxXQUM5QnY2QixLQUFLbVgsT0FBT28wQixRQUFRbjBCLE1BQU1zMEIsUUFBUWpwQyxPQUVwQ3pDLEtBQUttWCxPQUFPbzBCLFFBQVFDLFlBQWNHLFlBQ2xDM3JDLEtBQUttWCxPQUFPbzBCLFFBQVFuMEIsTUFBTXMwQixRQUFRRSxNQUFRRCxZQUMxQzNyQyxLQUFLbVgsT0FBT28wQixRQUFRbjBCLE1BQU1zMEIsUUFBUUcsU0FDaEM3ckMsS0FBS21YLE9BQU9vMEIsUUFBUW4wQixNQUFNczBCLFFBQVFqcEMsTUFBUWtwQyxZQUM1QzNyQyxLQUFLbVgsT0FBT28wQixRQUFRRSxlQUNsQnpyQyxLQUFLbVgsT0FBT28wQixRQUFRbjBCLE1BQU1zMEIsUUFBUWpwQyxNQUFRa3BDLFdBQzlDLENBQ0EzckMsS0FBS21YLE9BQU9vMEIsUUFBUUYsT0FBUSxFQUM1QnJyQyxLQUFLbVgsT0FBT28wQixRQUFRdkksYUFBZTFsQyxLQUFLQyxLQUFLMFcsT0FDM0MsOEJBQ0EsQ0FDRTdkLEtBQU00SixLQUFLbVgsT0FBT28wQixRQUFRM2xCLFdBQzFCbmpCLE1BQU96QyxLQUFLbVgsT0FBT28wQixRQUFRQyxXQUMzQnZ2QyxNQUFPK0QsS0FBS21YLE9BQU9vMEIsUUFBUUUsZUFHakMsQ0FDRixDQUNBenJDLEtBQUs4ckMsYUFBYyxFQUNuQjlyQyxLQUFLdXJCLGdCQUNQLEVBR0ssTUFBTWtiLGdCQUNYLFdBQUFwaEMsQ0FBYStMLFNBQVcsTUFDdEJwUixLQUFLb1IsU0FBV0EsU0FDaEJwUixLQUFLK2xDLE9BQVEsRUFDYi9sQyxLQUFLOG1DLGlCQUFrQixFQUN2QjltQyxLQUFLNkosV0FBWSxFQUNqQjdKLEtBQUtrSyxXQUFZLEVBQ2pCbEssS0FBS29LLGNBQWUsRUFDcEJwSyxLQUFLK3JDLFNBQVUsQ0FDakIsQ0FFQSxPQUFJQyxHQUtGLFlBSkludUMsSUFBY21DLEtBQUtpc0MsT0FDakJqc0MsS0FBSy9GLE9BQVMrRixLQUFLL0YsTUFBTWl5QyxNQUFPbHNDLEtBQUtpc0MsS0FBT2pzQyxLQUFLL0YsTUFBTWl5QyxPQUFTLEVBQy9EbHNDLEtBQUtpc0MsTUFBTyxHQUVaanNDLEtBQUtpc0MsSUFDZCxDQUVBLE9BQUlELENBQUs1ckIsR0FDUHBnQixLQUFLaXNDLEtBQU83ckIsQ0FDZCxDQUVBLFNBQUkrckIsR0FLRixZQUpJdHVDLElBQWNtQyxLQUFLb3NDLFNBQ2pCcHNDLEtBQUsvRixPQUFTK0YsS0FBSy9GLE1BQU1peUMsTUFBT2xzQyxLQUFLb3NDLE9BQVNwc0MsS0FBSy9GLE1BQU1peUMsUUFBVSxFQUNsRWxzQyxLQUFLb3NDLFFBQVMsR0FFZHBzQyxLQUFLb3NDLE1BQ2QsQ0FFQSxTQUFJRCxDQUFPL3JCLEdBQ1RwZ0IsS0FBS29zQyxPQUFTaHNCLENBQ2hCLENBRUEsVUFBSTNXLEdBQ0YsT0FBUXpKLEtBQUtnc0MsTUFBUWhzQyxLQUFLbXNDLEtBQzVCLENBRUEsVUFBSTFpQyxDQUFRMlcsR0FDVnBnQixLQUFLaXNDLE1BQU8sRUFDWmpzQyxLQUFLb3NDLFFBQVMsQ0FDaEIsQ0FFQSxVQUFJQyxHQUNGLFNBQUlyc0MsS0FBSy9GLFFBQVMrRixLQUFLL0YsTUFBTXF5QyxNQUFZdHNDLEtBQUsvRixNQUFNcXlDLEtBQU8sQ0FFN0QsQ0FFQSxRQUFJQyxHQU1GLFlBTEkxdUMsSUFBY21DLEtBQUt3c0MsUUFHckJ4c0MsS0FBS3dzQyxPQUFRLEdBRVJ4c0MsS0FBS3dzQyxLQUNkLENBRUEsUUFBSUQsQ0FBTW5zQixHQUNScGdCLEtBQUt3c0MsTUFBUXBzQixDQUNmLENBRUEsU0FBSW5tQixHQUlGLE9BSEkrRixLQUFLb1IsV0FBYXBSLEtBQUt5c0MsU0FDekJ6c0MsS0FBS3lzQyxPQUFTajlCLFdBQVdxQixnQkFBZ0I3USxLQUFLb1IsV0FFekNwUixLQUFLeXNDLE1BQ2QsQ0FFQSxRQUFJcjJDLEdBQ0YsT0FBSTRKLEtBQUtpUixNQUFjalIsS0FBS2lSLE1BQU03YSxLQUM5QjRKLEtBQUsvRixNQUFjK0YsS0FBSy9GLE1BQU03RCxLQUMzQixPQUNULENBRUEsT0FBSXNQLEdBQ0YsT0FBSTFGLEtBQUtpUixPQUNIalIsS0FBS2lSLE1BQU1uQyxVQUFVdUQsUUFBUUMsSUFDeEJ0UyxLQUFLaVIsTUFBTW5DLFVBQVV1RCxRQUFRQyxJQUdwQ3RTLEtBQUsvRixNQUFjK0YsS0FBSy9GLE1BQU1xTCxLQUFLSSxJQUNoQyxvQ0FDVCxDQUVBLFNBQUl1TCxHQUlGLE9BSEtqUixLQUFLMHNDLFFBQVUxc0MsS0FBS29SLFdBQ3ZCcFIsS0FBSzBzQyxPQUFTbDlCLFdBQVcwQixnQkFBZ0JsUixLQUFLb1IsV0FFekNwUixLQUFLMHNDLE1BQ2QsQ0FFQSxZQUFJQyxHQUNGLE9BQUkzc0MsS0FBS2dzQyxJQUNBMXVDLEtBQUtDLEtBQUtDLFNBQVMsdUNBRXhCd0MsS0FBS21zQyxNQUNBN3VDLEtBQUtDLEtBQUtDLFNBQVMseUNBRXJCRixLQUFLQyxLQUFLQyxTQUFTLHlDQUM1QixDQUVBLGFBQUlvdkMsR0FDRixPQUFJNXNDLEtBQUtnc0MsSUFBWTF1QyxLQUFLQyxLQUFLQyxTQUFTLGtDQUNwQ3dDLEtBQUttc0MsTUFBYzd1QyxLQUFLQyxLQUFLQyxTQUFTLCtCQUNuQ0YsS0FBS0MsS0FBS0MsU0FBUyxvQ0FDNUIsQ0FFQSxjQUFJOFksR0FDRixPQUFJdFcsS0FBSzZKLFdBQWE3SixLQUFLOG1DLGdCQUNsQi95QixVQUFVdVAsZ0JBQWdCdFAsUUFFL0JoVSxLQUFLa0ssVUFBa0I2SixVQUFVdVAsZ0JBQWdCcFAsS0FDakRsVSxLQUFLb0ssYUFBcUIySixVQUFVdVAsZ0JBQWdCalosUUFDakQwSixVQUFVdVAsZ0JBQWdCOGxCLFVBQ25DLENBRUEsWUFBSTFrQyxHQUNGLElBQUlBLFNBQVcsRUFRZixPQVBJMUUsS0FBSytsQyxPQUFPcmhDLFdBQ1oxRSxLQUFLOG1DLGlCQUFpQnBpQyxXQUN0QjFFLEtBQUt1c0MsTUFBTTduQyxXQUNYMUUsS0FBS21zQyxPQUFPem5DLFdBQ1oxRSxLQUFLZ3NDLEtBQUt0bkMsV0FDVjFFLEtBQUsrckMsU0FBU3JuQyxXQUNkMUUsS0FBS3dqQyxXQUFXOStCLFdBQ2JBLFFBQ1QsQ0FFQSxTQUFJdU0sQ0FBT2xPLEdBQ1QvQyxLQUFLMHNDLE9BQVMzcEMsQ0FDaEIsQ0FFQSxxQkFBTytSLENBQWdCdEQsU0FDckIsTUFBTXlULE9BQVMsSUFBSXdoQixnQkFFbkIsT0FEQWozQixXQUFXbUMscUJBQXFCc1QsT0FBUXpULFNBQ2pDeVQsTUFDVCxDQUVBLDRCQUFPNG5CLENBQXVCdHdDLE9BQzVCLElBQUtBLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxtQkFBb0IsT0FBTyxLQUl2RSxPQUh1QmxtQixNQUFNSSxjQUNFRSxRQUFRLFlBQ1p1WSxpQkFBaUIsVUFFOUMsQ0FFQSxlQUFBMkIsQ0FBaUJ2RixTQUNmaEMsV0FBVzhCLHNCQUFzQnRSLEtBQU13UixRQUN6QyxDQUVBLFVBQUFta0IsQ0FBWUgsTUFFQyxjQUFUQSxNQUNTLGNBQVRBLE1BQ1MsaUJBQVRBLE1BQ1Msb0JBQVRBLE1BRUF4MUIsS0FBSzhtQyxpQkFBa0IsRUFDdkI5bUMsS0FBSzZKLFdBQVksRUFDakI3SixLQUFLa0ssV0FBWSxFQUNqQmxLLEtBQUtvSyxjQUFlLEVBQ3BCcEssS0FBSyttQyxZQUFhLEVBQ2xCL21DLEtBQUt3MUIsT0FBUSxHQUNLLFNBQVRBLEtBQ0x4MUIsS0FBS21zQyxPQUNQbnNDLEtBQUttc0MsT0FBUSxFQUNibnNDLEtBQUtnc0MsS0FBTSxHQUNGaHNDLEtBQUtnc0MsS0FDZGhzQyxLQUFLbXNDLE9BQVEsRUFDYm5zQyxLQUFLZ3NDLEtBQU0sR0FDTmhzQyxLQUFLbXNDLE9BQVEsRUFDZm5zQyxLQUFLdzFCLE9BQVN4MUIsS0FBS3cxQixNQUN0QngxQixLQUFLL0YsT0FBa0IsU0FBVHU3QixNQUFtQngxQixLQUFLdXNDLE9BQVN2c0MsS0FBS3FzQyxRQUN0RHRqQyxHQUFHQyxjQUFjdUssS0FDZmpXLEtBQUtDLEtBQUswVyxPQUFPLGtDQUFtQyxDQUNsRHE0QixJQUFLdHNDLEtBQUsvRixNQUFNcXlDLE1BSXhCLEVDcmhDRixNQUFNUSwyQkFFRiwrSEFFRyxNQUFNakgsU0FDWCw0QkFBT2tILENBQXVCL2dCLFlBQWEvUixNQUNyQytSLFlBQVl2c0IsUUFBUSxPQUFRLGdCQUFrQm5DLEtBQUtzRyxLQUFLMkUsT0FDMUQwUixLQUFLdmEsS0FBSyxlQUFlc2pCLFNBQ3pCL0ksS0FDR3ZhLEtBQUssZ0JBQ0xnZ0MsWUFDQyw2QkFBNkJwaUMsS0FBS0MsS0FBS0MsU0FDckMsaUNBR055YyxLQUNHdmEsS0FBSyxvQkFDTGdnQyxZQUNDLGdDQUFnQ29OLHFDQUlsQzlnQixZQUFZdnNCLFFBQVEsT0FBUSx5QkFBMkJuQyxLQUFLc0csS0FBSzJFLE1BQ25FMFIsS0FBS3ZhLEtBQUssZUFBZXNqQixTQUd2QmdKLFlBQVl2c0IsUUFBUSxPQUFRLGFBQWVuQyxLQUFLc0csS0FBSzJFLE9BQ3ZEMFIsS0FDR3ZhLEtBQUssZ0JBQ0xnZ0MsWUFBWXBpQyxLQUFLQyxLQUFLQyxTQUFTLHlCQUNsQ3ljLEtBQUt2YSxLQUFLLG9CQUFvQnNqQixTQUVsQyxDQUVBLHNCQUFPZ3FCLEdBQ0wsTUFBTTNwQyxTQUFXLENBQ2ZPLEtBQU10RyxLQUFLc0csS0FBS3NLLEdBQ2hCOEIsT0FBUTFTLEtBQUtDLEtBQUtDLFNBQVMsdUJBQzNCOEYsUUFBU2hHLEtBQUtnbEIsTUFBTTJxQixRQUNwQjV1QyxLQUFNOFIsTUFBTUMsbUJBQW1CQyxRQUMvQm5SLE1BQU8sQ0FDTHdDLEtBQU0sQ0FDSndyQyxZQUFZLEVBQ1pDLHFCQUFxQixFQUNyQkMsVUFBVSxJQUdkMzhCLFFBQVNxOEIsNEJBR1h0cEMsWUFBWWtOLE9BQU9yTixTQUNyQixDQVFBLFlBQU93WCxHQUVMdmQsS0FBS29FLEtBQU8sTUFDZCxDQVdBLDBCQUFhMnJDLENBQWUzMkMsSUFBS3VqQixNQUMvQkEsS0FBS0MsR0FDSCxRQUNBLHVCQUNBMnJCLFNBQVN5SCxrQkFBa0JyMEMsS0FBSytHLE9BRWxDaWEsS0FBS0MsR0FDSCxTQUNBLDJCQUNBMnJCLFNBQVMwSCxpQkFBaUJ0MEMsS0FBSytHLE9BR2pDaWEsS0FBS0MsR0FDSCxRQUNBLGNBQ0EyckIsU0FBUzJILHlCQUF5QnYwQyxLQUFLK0csT0FFekNpYSxLQUFLQyxHQUNILFFBQ0EsZ0JBQ0EyckIsU0FBUzRILHVCQUF1QngwQyxLQUFLK0csT0FFdkNpYSxLQUFLQyxHQUNILFFBQ0EsZ0JBQ0EyckIsU0FBUzZILHdCQUF3QnowQyxLQUFLK0csT0FHeENpYSxLQUFLQyxHQUNILFFBQ0EsZUFDQTJyQixTQUFTNkgsd0JBQXdCejBDLEtBQUsrRyxPQUV4Q2lhLEtBQUtDLEdBQUcsUUFBUyxlQUFnQjJyQixTQUFTOEgsc0JBQXNCMTBDLEtBQUsrRyxPQUVyRWlhLEtBQUtDLEdBQ0gsUUFDQSxvQkFDQTJyQixTQUFTK0gsMkJBQTJCMzBDLEtBQUsrRyxPQUUzQ2lhLEtBQUtDLEdBQUcsUUFBUyxpQkFBa0IyckIsU0FBU2dJLGtCQUFrQjUwQyxLQUFLK0csT0FHbkVpYSxLQUFLQyxHQUFHLFFBQVMsbUJBQW9CMnJCLFNBQVNpSSxnQkFBZ0I3MEMsS0FBSytHLE9BRW5FaWEsS0FBS0MsR0FBRyxXQUFZLGNBQWUyckIsU0FBU2tJLGFBQWE5MEMsS0FBSytHLE9BRTlEaWEsS0FBS0MsR0FBRyxRQUFTLHFCQUFzQjJyQixTQUFTbUksVUFBVS8wQyxLQUFLK0csT0FHL0RxN0IsaUJBQWlCL0QsZUFBZXJkLE1BQ2hDb2Qsa0JBQWtCQyxlQUFlcmQsS0FDbkMsQ0FFQSxtQkFBTzh6QixDQUFjeHhDLE9BQ25CQSxNQUFNRSxpQkFDTixNQUFNMlUsU0FBVzdVLE1BQU1JLGNBQWNJLFFBQVFxVSxTQUM3QyxHQUFJQSxTQUFVLENBQ1osTUFBTW5YLE1BQVF1VixXQUFXcUIsZ0JBQWdCTyxVQUNyQ25YLE1BQU11L0IsU0FBU3YvQixNQUFNOEQsTUFBTUMsUUFBTyxFQUN4QyxDQUNGLENBRUEsZ0NBQWFpd0MsQ0FBcUJqaUIsYUFLaEMsR0FKQWpqQixHQUFHa2pCLEtBQUtpaUIsZUFJSjV3QyxLQUFLc0csS0FBSzJFLE9BQThCLElBQXJCeWpCLFlBQVkzdEIsTUFBNEQsSUFBdEIydEIsWUFBWStULE9BQXNDLENBQ3pILE1BQU16ekIsS0FBT3dmLEVBQUVFLFlBQVl2YixTQUFTLEdBQ3BDLEdBQUluRSxLQUFLMEMsVUFBVXlULFNBQVMsVUFDSSxTQUExQm5XLEtBQUt2UCxRQUFRbS9CLFNBQXFCLENBQ3BDLEdBQUk1dkIsS0FBSzBDLFVBQVV5VCxTQUFTLGFBQzFCLEdBQUluVyxLQUFLdlAsUUFBUWlwQyxXQUFZLENBQzNCLE1BQU1sUixVQUFZZ08sbUJBQW1CelcsaUJBQ25DTCxZQUFZOWQsSUFFUitXLE9BQVM0ZCxnQkFBZ0J4VyxpQkFDN0J5SSxVQUFVa1IsWUFFWixHQUFJL2dCLE9BQU9pWCxTQUFVLENBQ25CLE1BQU02SSxlQUFpQixJQUFJdEMsbUJBQ3pCelcsWUFBWTlkLEdBQ1orVyxPQUFPNUksVUFDUDRJLE9BQU84ZixzQkFFSEEsZUFBZTdwQixVQUNoQjRaLFVBQVVxWixxQkFBcUJyWixVQUFVc1osYUFDaEQsQ0FDRixLQUFPLENBQ0wsTUFBTXRaLFVBQVlnTyxtQkFBbUJ6VyxpQkFDbkNMLFlBQVk5ZCxJQUVkLEdBQUk0bUIsVUFBVWlRLGVBQWdCLENBQzVCLE1BQU1BLGVBQWlCLElBQUl0QyxtQkFDekJ6VyxZQUFZOWQsR0FDWixLQUNBNG1CLFVBQVVpUSxzQkFFTkEsZUFBZTdwQixVQUNoQjRaLFVBQVVxWixxQkFBcUJyWixVQUFVc1osYUFDaEQsQ0FDRixDQUVGLEdBQUk5aEMsS0FBSzBDLFVBQVV5VCxTQUFTLFVBQVcsQ0FDckMsTUFBTXdDLE9BQVM0ZCxnQkFBZ0J4VyxpQkFBaUJMLFlBQVk5ZCxJQUN0RDYyQixlQUFpQixJQUFJdEMsbUJBQ3pCeGQsT0FBT29lLGdCQUNQclgsWUFBWTlkLEdBQ1orVyxPQUFPOGYsc0JBRUhBLGVBQWU3cEIsVUFDaEIrSixPQUFPZ2YsZUFBZWtLLHFCQUNuQmxwQixPQUFPZ2YsZUFBZW1LLGFBRWhDLENBQ0YsQ0FFSixDQUNGLENBRUEsOEJBQWFDLENBQW1CditCLFFBQVNtSyxNQWdDdkMsR0EvQkFsUixHQUFHa2pCLEtBQUtpaUIsZUFFUjVWLG9CQUFvQk8sY0FBYzVlLE1BRTlCbkssUUFBUXJRLFFBQVEsT0FBUSxtQkFDMUJ3YSxLQUFLdmEsS0FBSyxjQUFjNHVDLFlBQVksbUJBQ3BDcjBCLEtBQUssR0FBR2xkLFFBQVFveEMsZUFBZ0IsR0FJbENsMEIsS0FDR3ZhLEtBQUssWUFDTHN5QixPQUFNejFCLE9BQ0xBLE1BQU1JLGNBQ0hFLFFBQVEsYUFDUitXLGNBQWMscUJBQ2Q1RSxVQUFVMkwsT0FBTyxVQUV4QlYsS0FDR3ZhLEtBQUssYUFDTDZ1QyxZQUFXaHlDLE9BQ1ZBLE1BQU1JLGNBQ0hpWCxjQUFjLHFCQUNkNUUsVUFBVWdVLE9BQU8sVUFRcEIxbEIsS0FBS3NHLEtBQUsyRSxLQUFNLENBQ2xCLE1BQU0rRCxLQUFPMk4sS0FBSyxHQUFHckcsY0FBYyxtQkFDbkMsR0FBSXRILE1BRUFBLEtBQUswQyxVQUFVeVQsU0FBUyxjQUNLLFNBQTNCblcsS0FBS3ZQLFFBQVEwb0MsV0FDZm41QixLQUFLdlAsUUFBUXFaLGFBQ2IsQ0FDQSxNQUFNalYsS0FBT3NTLFNBQVNxQixlQUFleEksTUFFWCxXQUF0QkEsS0FBS3ZQLFFBQVFvWixPQUNmaFYsS0FBS3F0QyxZQUFjbGlDLEtBQUt2UCxRQUFReVAsUUFDNUJGLEtBQUt2UCxRQUFReVAsUUFDYkYsS0FBS3ZQLFFBQVFtUSxTQUVPLGNBQXRCWixLQUFLdlAsUUFBUW9aLE9BQ2ZoVixLQUFLc3RDLFlBQWNuaUMsS0FBS3ZQLFFBQVF5UCxRQUM1QkYsS0FBS3ZQLFFBQVF5UCxRQUNiRixLQUFLdlAsUUFBUW1RLFNBRW5CWixLQUFLdlAsUUFBUTBvQyxVQUFZLE9BRXpCSSxTQUFTNkksdUJBQXVCdnRDLEtBQ2xDLENBRUosQ0FFQSxNQUFNd3RDLFNBQVcxMEIsS0FBS3ZhLEtBQUssZ0JBQzNCLElBQUssTUFBTThSLFdBQVdtOUIsU0FDcEIsSUFBS3J4QyxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbkJpSixRQUFRdXVCLE1BQU1DLFFBQVUsT0FDeEIsTUFBTTl5QixRQUFVc0UsUUFBUW85QixhQUFhLGlCQUNqQzFoQyxTQUNFNVAsS0FBS3FQLE9BQU96UCxJQUFJZ1EsU0FBU3NzQixVQUMzQmhvQixRQUFRdXVCLE1BQU1DLFFBQVUsUUFHOUIsQ0FHRixNQUFNNk8sT0FBUzUwQixLQUFLdmEsS0FBSyxZQUN6QixJQUFLLE1BQU1vdkMsUUFBUUQsT0FDWnZ4QyxLQUFLc0csS0FBSzJFLE9BQ2J1bUMsS0FBSy9PLE1BQU1DLFFBQVUsUUFJekIsTUFBTStPLGdCQUFrQjkwQixLQUFLdmEsS0FBSyxzQkFDbEMsSUFBSyxNQUFNc3ZDLFFBQVFELGdCQUNienhDLEtBQUtzRyxLQUFLMkUsT0FBTXltQyxLQUFLalAsTUFBTUMsUUFBVSxRQUczQyxNQUFNaVAsY0FBZ0JoMUIsS0FBS3ZhLEtBQUssb0JBQ2hDLElBQUssTUFBTXN2QyxRQUFRQyxjQUNYM3hDLEtBQUtzRyxLQUFLMkUsTUFBU2pMLEtBQUtzRyxLQUFLc3JDLFdBQWE1eEMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBQTRCOHhDLEtBQUtqUCxNQUFNQyxRQUFVLFFBRzdILE1BQU1tUCxpQkFBbUJsMUIsS0FBS3ZhLEtBQUssdUJBQ25DLElBQUssTUFBTW92QyxRQUFRSyxpQkFBa0IsQ0FFbkMsSUFBSWwxQyxNQUFRNHJDLFNBQVN1SixpQkFBaUJOLEtBQUsveEMsU0FBU3FVLFVBQy9DblgsUUFBT0EsTUFBUTRyQyxTQUFTeDVCLGtCQUFrQnlpQyxLQUFLanlDLFFBQVEsZ0JBQ3ZENUMsUUFDSEEsTUFBUTRyQyxTQUFTdUosaUJBQWlCTixLQUFLcjBCLGNBQWMxZCxRQUFRcVUsV0FFMURuWCxRQUNIQSxNQUFRNHJDLFNBQVN1SixpQkFDZk4sS0FBS2p5QyxRQUFRLHFCQUFxQkUsUUFBUXFVLFdBR3pDblgsUUFDSEEsTUFBUTRyQyxTQUFTdUosaUJBQ2ZOLEtBQUtqeUMsUUFBUSxxQkFBcUJFLFFBQVFxVSxZQUt6Q25YLFFBQVVBLE1BQU11L0IsU0FBWWw4QixLQUFLc0csS0FBSzJFLFFBQ3pDdW1DLEtBQUsvTyxNQUFNQyxRQUFVLE9BR3pCLENBRUEsSUFBSzFpQyxLQUFLc0csS0FBSzJFLEtBQU0sQ0FFbkIsTUFBTThtQyxVQUFZcDFCLEtBQUt2YSxLQUFLLGVBQzVCLElBQUssTUFBTW92QyxRQUFRTyxVQUFXLENBRTVCLElBQUlwMUMsTUFBUTRyQyxTQUFTdUosaUJBQ25CTixLQUFLL3hDLFNBQVNxVSxVQUFZMDlCLEtBQUsveEMsU0FBU21RLFNBRXJDalQsUUFDSEEsTUFBUTRyQyxTQUFTeDVCLGtCQUFrQnlpQyxLQUFLanlDLFFBQVEsZ0JBRTdDNUMsUUFDSEEsTUFBUTRyQyxTQUFTdUosaUJBQWlCTixLQUFLcjBCLGNBQWMxZCxRQUFRcVUsV0FFMURuWCxRQUNIQSxNQUFRNHJDLFNBQVN1SixpQkFDZk4sS0FBS2p5QyxRQUFRLHFCQUFxQkUsUUFBUXFVLFdBR3pDblgsUUFDSEEsTUFBUTRyQyxTQUFTdUosaUJBQ2ZOLEtBQUtqeUMsUUFBUSxxQkFBcUJFLFFBQVFxVSxZQUt6Q25YLFFBQVVBLE1BQU11L0IsVUFBY3YvQixRQUFVcUQsS0FBS3NHLEtBQUsyRSxRQUNyRHVtQyxLQUFLL08sTUFBTUMsUUFBVSxPQUd6QixDQUVBLE1BQU1zUCxhQUFlcjFCLEtBQUt2YSxLQUFLLG1CQUMvQixJQUFNcEMsS0FBS3NHLEtBQUtzckMsWUFBYTV4QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDckQsSUFBSyxNQUFNZ2dDLFVBQVVvUyxhQUNuQnBTLE9BQU9sdUIsVUFBVUMsSUFBSSxZQUNyQml1QixPQUFPbHVCLFVBQVVnVSxPQUFPLGVBSTVCLE1BQU11c0IsWUFBY3QxQixLQUFLdmEsS0FBSyxrQkFDOUIsSUFBTXBDLEtBQUtzRyxLQUFLc3JDLFlBQWE1eEMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBQ3JELElBQUssTUFBTTRNLFNBQVN5bEMsWUFDbEJ6bEMsTUFBTWhNLFVBQVcsQ0FHdkIsQ0FDRixDQUVBLDJCQUFXMHhDLEdBQ1QsTUFBTyxDQUNMbjBDLFVBQVcsaUJBQ1hFLFNBQVUsZ0JBQ1Ztb0MsUUFBUyxhQUViLENBRUEsc0JBQU9vSyxDQUFpQnZ4QyxPQUN0QixNQUFNOGdCLE1BQVFwWixTQUFTMUgsTUFBTUksY0FBY0ksUUFBUWxCLEtBQzdDNHpDLGdCQUFrQmx6QyxNQUFNSSxjQUFjRSxRQUFRLHFCQUNwRCxJQUFLLE1BQU0yakIsS0FBS2l2QixnQkFBZ0JyNkIsaUJBQWlCLE9BQy9Db0wsRUFBRXVmLE1BQU0yUCxPQUFTLE9BRW5CRCxnQkFDRzc3QixjQUFjLGNBQWN5SixXQUM1QnpKLGNBQWMsT0FBT21zQixNQUFNMlAsT0FBUyxpQkFDdkMsTUFBTTFxQixRQUFVem9CLE1BQU1JLGNBQWNFLFFBQVEsWUFDNUMsSUFBSyxNQUFNa0csS0FBS2lpQixRQUFRNVAsaUJBQWlCLFdBQ3ZDclMsRUFBRWc5QixNQUFNQyxRQUFVLE9BQ2xCajlCLEVBQUVoRyxRQUFRZ0UsT0FBUyxRQUVyQixNQUFNNHVDLGdCQUFrQjNxQixRQUFRcFIsY0FDOUIscUJBQXFCeUosV0FFdkJzeUIsZ0JBQWdCNVAsTUFBTUMsUUFBVSxRQUNoQzJQLGdCQUFnQjV5QyxRQUFRZ0UsT0FBUyxNQUduQyxDQUVBLGlDQUFPNnNDLENBQTRCcnhDLE9BQ2pDQSxNQUFNRSxpQkFFTixNQUFNNlAsS0FBTy9QLE1BQU1JLGNBQWNFLFFBQVEsY0FDekMsR0FBSXlQLEtBQUswQyxVQUFVeVQsU0FBUyxVQUUxQixZQURBb2dCLGdCQUFnQjRCLGVBQWVuNEIsS0FBTS9QLE9BS3ZDLE1BQU1xekMsY0FBZ0JyekMsTUFBTUksY0FDekJFLFFBQVEsdUJBQ1J1WSxpQkFBaUIsa0JBQ3BCLElBQUssTUFBTXk2QixXQUFXRCxjQUNwQkMsUUFBUTdnQyxVQUFVZ1UsT0FBTyxlQUUzQnptQixNQUFNSSxjQUFjRSxRQUFRLGtCQUFrQm1TLFVBQVVDLElBQUksZUFHNUQxUyxNQUFNSSxjQUFjRSxRQUFRLHFCQUFxQm1TLFVBQVUyTCxPQUFPLFFBR2xFLE1BQU1tMUIsWUFBY3Z6QyxNQUFNSSxjQUN2QkUsUUFBUSwyQkFDUitXLGNBQWMsb0JBQ2pCazhCLFlBQVkvUCxNQUFNQyxRQUFVLFFBQzVCLE1BQU14ZCxPQUFTc3RCLFlBQVlsOEIsY0FBYyxVQW1CekMsT0FWQTRPLE9BQU96bEIsUUFBUUksT0FBUyxZQUN4QnFsQixPQUFPemxCLFFBQVFnekMsV0FBYXh6QyxNQUFNSSxjQUFjSSxRQUFRSSxPQUN4RHFsQixPQUFPemxCLFFBQVFpekMsZUFBaUJ6ekMsTUFBTUksY0FBY0ksUUFBUUksT0FDNURxbEIsT0FBT3psQixRQUFRd1gsUUFBVWhZLE1BQU1JLGNBQWNJLFFBQVF3WCxRQUNyRGlPLE9BQU96bEIsUUFBUWt6QyxXQUFhMXpDLE1BQU1JLGNBQWNJLFFBQVFrekMsV0FDeER6dEIsT0FBT3psQixRQUFRK0osVUFBWXZLLE1BQU1JLGNBQWNJLFFBQVErSixVQUN2RDBiLE9BQU96bEIsUUFBUXVYLE9BQVMvWCxNQUFNSSxjQUFjSSxRQUFRMm5DLFNBQ3BEbGlCLE9BQU96bEIsUUFBUW16QyxTQUFXM3pDLE1BQU1JLGNBQWNJLFFBQVFnaEMsV0FHOUN4aEMsTUFBTUksY0FBY0ksUUFBUUksUUFDbEMsSUFBSyxXQUNIcWxCLE9BQU8wTCxVQUFZLEdBQUc1d0IsS0FBS0MsS0FBS0MsU0FDOUJqSixLQUFLNkcsWUFBWW1CLE1BQU1JLGNBQWNJLFFBQVFJLGNBQ3hDWixNQUFNSSxjQUFjSSxRQUFRK0osY0FDakN2SyxNQUFNSSxjQUFjSSxRQUFRa3pDLGVBRTlCLE1BQ0YsSUFBSyxZQUNIenRCLE9BQU8wTCxVQUFZLEdBQUc1d0IsS0FBS0MsS0FBS0MsU0FDOUJqSixLQUFLNkcsWUFBWW1CLE1BQU1JLGNBQWNJLFFBQVFJLGNBQ3hDWixNQUFNSSxjQUFjSSxRQUFRZ2hDLGVBQ2pDeGhDLE1BQU1JLGNBQWNJLFFBQVFrekMsZUFRcEMsQ0FFQSxzQkFBYWpDLENBQVd6eEMsT0FDdEJBLE1BQU1FLGlCQUNOLE1BQU1DLEVBQUlILE1BQU1JLGNBRWhCLEdBQUlELEVBQUVzUyxVQUFVeVQsU0FBUyxpQkFDdkIsT0FBSS9sQixFQUFFc1MsVUFBVXlULFNBQVMsWUFDaEIxTyxVQUFVbzhCLHNCQUFzQnp6QyxHQUVoQ3FYLFVBQVVxOEIsb0JBQW9CMXpDLEVBRzNDLENBRUEsd0JBQU9teEMsQ0FBbUJ0eEMsT0FDeEIsTUFBTStQLEtBQU8vUCxNQUFNSSxjQUFjRSxRQUFRLGNBQ3pDLEdBQUl5UCxLQUFLMEMsVUFBVXlULFNBQVMsVUFFMUIsWUFEQW9nQixnQkFBZ0I0QixlQUFlbjRCLEtBQU0vUCxPQUl2QyxHQUE0QyxLQUF4Q0EsTUFBTUksY0FBY0ksUUFBUXdYLFFBRTlCLFlBREF4TCxHQUFHQyxjQUFjMFUsTUFBTXBnQixLQUFLQyxLQUFLQyxTQUFTLDJCQUs1QyxNQUFNb3lDLGNBQWdCcnpDLE1BQU1JLGNBQ3pCRSxRQUFRLHVCQUNSdVksaUJBQWlCLGtCQUNwQixJQUFLLE1BQU15NkIsV0FBV0QsY0FDcEJDLFFBQVE3Z0MsVUFBVWdVLE9BQU8sZUFFM0J6bUIsTUFBTUksY0FBY3FTLFVBQVVDLElBQUksZUFHbEMsTUFBTTZnQyxZQUFjdnpDLE1BQU1JLGNBQ3ZCRSxRQUFRLDJCQUNSK1csY0FBYyxvQkFDakJrOEIsWUFBWS9QLE1BQU1DLFFBQVUsUUFDNUIsTUFBTXhkLE9BQVNzdEIsWUFBWWw4QixjQUFjLFVBRXpDNE8sT0FBT3psQixRQUFRSSxPQUFTLFlBQ3hCcWxCLE9BQU96bEIsUUFBUWd6QyxXQUFhLFVBQzVCdnRCLE9BQU96bEIsUUFBUWl6QyxlQUFpQnp6QyxNQUFNSSxjQUFjSSxRQUFRSSxPQUM1RHFsQixPQUFPemxCLFFBQVF3WCxRQUFVaFksTUFBTUksY0FBY0ksUUFBUXdYLFFBQ3JEaU8sT0FBT3psQixRQUFRa3pDLFdBQWExekMsTUFBTUksY0FBY0ksUUFBUWt6QyxXQUN4RHp0QixPQUFPemxCLFFBQVErSixVQUFZdkssTUFBTUksY0FBY0ksUUFBUStKLFVBRXZEMGIsT0FBTzBMLFVBQVksR0FBRzV3QixLQUFLQyxLQUFLQyxTQUM5QmpKLEtBQUs2RyxZQUFZbUIsTUFBTUksY0FBY0ksUUFBUUksY0FDeENaLE1BQU1JLGNBQWNJLFFBQVErSixjQUNqQ3ZLLE1BQU1JLGNBQWNJLFFBQVFrekMsY0FFaEMsQ0FFQSw2QkFBT3hDLENBQXdCbHhDLE9BRTdCQSxNQUFNRSxpQkFDTixNQUFNNHpDLFdBQ0o5ekMsTUFBTUksY0FBYzhkLGNBQWM2MUIsdUJBQXVCLGdCQUMzRCxJQUFJanpCLE1BQ0osSUFBS0EsTUFBUSxFQUFHQSxNQUFRZ3pCLFdBQVd6dkMsT0FBUXljLFFBQVMsQ0FDbEQsTUFBTTdMLFFBQVU2K0IsV0FBV2h6QixPQUN2QjdMLFFBQVF6VSxRQUFRd3pDLFdBQWFoMEMsTUFBTUksY0FBY0ksUUFBUXd6QyxTQUMzRC8rQixRQUFReEMsVUFBVUMsSUFBSSxlQUV0QnVDLFFBQVF4QyxVQUFVZ1UsT0FBTyxjQUU3QixDQUNBem1CLE1BQU1JLGNBQWM4ZCxjQUFjMWQsUUFBUXVZLFNBQ3hDL1ksTUFBTUksY0FBY0ksUUFBUXd6QyxRQUNoQyxDQUVBLGtDQUFhNUMsQ0FBdUJweEMsT0FDbEMsTUFBTStQLEtBQU8vUCxNQUFNSSxjQUFjRSxRQUFRLGNBRXpDLEdBQUl5UCxLQUFLMEMsVUFBVXlULFNBQVMsVUFDdEJuVyxLQUFLMEMsVUFBVXlULFNBQVMsYUFBYyxDQUN4QyxNQUFNK3RCLFVBQVkxSyxtQkFBbUJweUIsWUFBWXBILE1BQzdDL1AsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLFlBQ3pDK3RCLFVBQVVuRyxpQkFBaUIsR0FDbEI5dEMsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLGFBQ2hEK3RCLFVBQVVuRyxrQkFBa0IsRUFFaEMsQ0FFSixDQUVBLG9DQUFhcUQsQ0FBeUJueEMsT0FDcENBLE1BQU1FLGlCQUVOLE1BQU02UCxLQUFPL1AsTUFBTUksY0FBY0UsUUFBUSxjQUNyQ3lQLEtBQUswQyxVQUFVeVQsU0FBUyxXQUN0Qm5XLEtBQUswQyxVQUFVeVQsU0FBUyxjQUMxQnFnQixtQkFBbUJvQixpQkFBaUIzbkMsT0FHbEMrUCxLQUFLMEMsVUFBVXlULFNBQVMsV0FDMUJvZ0IsZ0JBQWdCcUIsaUJBQWlCM25DLFFBSWpDK1AsS0FBSzBDLFVBQVV5VCxTQUFTLFVBQ3RCblcsS0FBSzBDLFVBQVV5VCxTQUFTLGNBQzFCcWpCLG1CQUFtQjVCLGlCQUFpQjNuQyxPQUlwQytQLEtBQUswQyxVQUFVeVQsU0FBUyxVQUl4Qm5XLEtBQUswQyxVQUFVeVQsU0FBUyxjQUMxQjFPLFVBQVVtd0IsaUJBQWlCM25DLE1BRS9CLENBUUEsd0JBQU84UCxDQUFtQkMsTUFHeEIsTUFBTTZvQixTQUFXN29CLEtBQUt2UCxRQUFRd1UsT0FDMUIzQyxLQUFLNGQsTUFBTUMsU0FBU25nQixLQUFLdlAsUUFBUXdVLFNBQ2pDakYsS0FBS3ZQLFFBRVQsR0FBSW80QixTQUFTL2pCLFNBQVUsT0FBT3kwQixTQUFTdUosaUJBQWlCamEsU0FBUy9qQixVQUdqRSxNQUFNN0UsU0FBVzRvQixTQUFTM29CLFFBQzFCLEdBQUlELFNBQVUsQ0FDWixNQUFPRSxRQUFTRCxTQUFXRCxTQUFTRyxNQUFNLEtBQzFDLEdBQWdCLFVBQVpELFFBQ0YsT0FBT25QLEtBQUtxUCxPQUFPQyxPQUFPSixTQUNyQixDQUNMLE1BQU1LLE1BQVF2UCxLQUFLd1AsT0FBTzVQLElBQUl1UCxTQUM5QixJQUFLSSxNQUFPLE9BQU8sS0FDbkIsTUFBTW9FLE1BQVFwRSxNQUFNRyxvQkFBb0IsUUFBU1IsU0FDakQsT0FBS3lFLE1BQ0VBLE1BQU1oWCxPQUFTLElBQUlnVCxNQUFNRixXQUFXOVMsTUFEeEIsSUFFckIsQ0FDRixDQUdBLE1BQU1pVCxRQUFVaW9CLFNBQVNqb0IsUUFDekIsR0FBSUEsUUFBUyxPQUFPNVAsS0FBS3FQLE9BQU96UCxJQUFJZ1EsU0FFcEMsTUFBTTRDLFFBQVV4RCxLQUFLelAsUUFBUSxZQUN2QndmLFVBQVl2TSxRQUFVQSxRQUFRL1MsUUFBUXNmLFVBQVksS0FDeEQsR0FBSUEsVUFBVyxDQUNiLE1BQU0yUCxZQUFjMXVCLEtBQUtnZixTQUFTcGYsSUFBSW1mLFdBQ3RDLEdBQUkyUCxZQUFZcG9CLEtBQU0sT0FBT29vQixZQUFZcG9CLEtBQUtvWSxTQUNoRCxDQUVBLE9BQU8sSUFDVCxDQUVBLGtCQUFPeTBCLENBQWFua0MsTUFDbEIsTUFBTXdELFFBQVV4RCxLQUFLelAsUUFBUSxZQUN2QndmLFVBQVl2TSxRQUFVQSxRQUFRL1MsUUFBUXNmLFVBQVksS0FDeEQsR0FBSUEsVUFBVyxDQUViLE9BRG9CL2UsS0FBS2dmLFNBQVNwZixJQUFJbWYsV0FDbkJxMEIsU0FBVSxDQUMvQixDQUVBLE9BQU8sQ0FDVCxDQUVBLHVCQUFPdEIsQ0FBa0J2ekMsS0FDdkIsR0FBS0EsSUFBTCxDQUVBLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FFckIsTUFBT3lKLFFBQVNELFNBQVczUSxJQUFJNlEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUNGLE9BQU9uUCxLQUFLcVAsT0FBT0MsT0FBT0osU0FDckIsQ0FDTCxNQUFNSyxNQUFRdlAsS0FBS3dQLE9BQU81UCxJQUFJdVAsU0FDOUIsSUFBS0ksTUFBTyxPQUFPLEtBQ25CLE1BQU1vRSxNQUFRcEUsTUFBTUcsb0JBQW9CLFFBQVNSLFNBQ2pELE9BQUt5RSxNQUNFQSxNQUFNaFgsT0FBUyxJQUFJZ1QsTUFBTUYsV0FBVzlTLE1BRHhCLElBRXJCLENBQ0YsQ0FHQSxPQUFPcUQsS0FBS3FQLE9BQU96UCxJQUFJckIsTUFBUSxJQWpCZGdDLENBa0JuQixDQUVBLHdCQUFPOHlDLENBQW1CcGtDLFVBQ3hCLE1BQU0wRSxNQUFRNDBCLFNBQVMrSyxTQUFTcmtDLFVBQ2hDLE9BQU8wRSxNQUFRQSxNQUFNaFgsTUFBUSxJQUMvQixDQUVBLGVBQU8yMkMsQ0FBVXJrQyxVQUNmLEdBQUlBLFNBQVUsQ0FDWixNQUFPRSxRQUFTRCxTQUFXRCxTQUFTRyxNQUFNLEtBQzFDLEdBQWdCLFVBQVpELFFBQXFCLENBQ3ZCLE1BQU13RixTQUFXM1UsS0FBS3FQLE9BQU9DLE9BQU9KLFVBQVV5RSxNQUM5QyxPQUFPZ0IsU0FBU1YsTUFDbEIsQ0FBTyxDQUNMLE1BQU0xRSxNQUFRdlAsS0FBS3dQLE9BQU81UCxJQUFJdVAsU0FDOUIsSUFBS0ksTUFBTyxPQUFPLEtBQ25CLE1BQU1vRSxNQUFRcEUsTUFBTUcsb0JBQW9CLFFBQVNSLFNBQ2pELE9BQUt5RSxNQUNFQSxPQUFTLElBQUloRSxNQUFNRixXQURQLElBRXJCLENBQ0YsQ0FDQSxPQUFPLElBQ1QsQ0FNQSwyQkFBYXdlLENBQWdCamYsS0FBTXVrQyxPQUFTLE1BQzFDLE1BQU14MEIsVUFDTSxNQUFWdzBCLE9BQWlCdmtDLEtBQUt6UCxRQUFRLFlBQVlFLFFBQVFzZixVQUFZdzBCLE9BQzFEL2dDLFFBQVV4UyxLQUFLZ2YsU0FBU3BmLElBQUltZixXQUU1QjFMLFVBQVliLFFBQVE1UixPQUFPLENBQUV1UyxRQUFTbkUsS0FBS29mLFlBRWpELGFBRE0zaUIsR0FBR2tqQixLQUFLQyxjQUFjdmIsS0FBSyxHQUMxQkEsR0FDVCxDQUVBLDZCQUFhNDhCLENBQWtCaHhDLE9BQzdCQSxNQUFNRSxpQkFFTixNQUFNK2xCLE9BQVNqbUIsTUFBTUksY0FDZjJQLEtBQU9rVyxPQUFPM2xCLFFBQVEsY0FDNUIsSUFBS3lQLEtBQU0sT0FFWCxJQUFLdTVCLFNBQVN4NUIsa0JBQWtCQyxNQUFPLE9BRXZDLE1BQU0rUCxVQUFZL1AsS0FBS3pQLFFBQVEsWUFBWUUsUUFBUXNmLFVBRW5ELElBQUl5MEIsWUFDQXhrQyxLQUFLMEMsVUFBVXlULFNBQVMsU0FDMUJxdUIsWUFBY2hMLG1CQUFtQnB5QixZQUFZcEgsTUFDcENBLEtBQUswQyxVQUFVeVQsU0FBUyxVQUNqQ3F1QixZQUFjak8sZ0JBQWdCbnZCLFlBQVlwSCxNQUNqQ0EsS0FBSzBDLFVBQVV5VCxTQUFTLGVBQ2pDcXVCLFlBQWNoTyxtQkFBbUJwdkIsWUFBWXBILE9BRS9Dd2tDLFlBQVk5N0IsYUFBZXpZLE1BQU1JLGNBQWN6RyxZQUN6QzQ2QyxZQUFZdmxCLGlCQUNsQnpjLFNBQVM4RSxjQUFjLHFCQUF1QnlJLFVBQVksTUFBTXpJLGNBQWMsMkJBQTZCNE8sT0FBT3BzQixLQUFPLE1BQU0yNkMsT0FDakksQ0FFQSw4QkFBYXpELENBQW1CL3dDLE9BRTlCQSxNQUFNRSxpQkFFTixNQUFNK2xCLE9BQVNqbUIsTUFBTUksY0FDZjJQLEtBQU9rVyxPQUFPM2xCLFFBQVEsY0FDNUIsSUFBS3lQLEtBQU0sT0FDWCxNQUFNMGtDLGNBQWdCeHVCLE9BQU8zbEIsUUFBUSxZQUUvQk0sT0FBU3FsQixPQUFPemxCLFFBQVFJLE9BRTlCLEdBQUswb0MsU0FBU3g1QixrQkFBa0JDLE1BRWhDLE9BQVFuUCxRQUNOLElBQUssVUFBVyxDQUNkLE1BQU1pZ0IsV0FBYW5aLFNBQVN1ZSxPQUFPemxCLFFBQVFxZ0IsWUFDckNrb0IsZ0JBQWtCcmhDLFNBQ3RCMUgsTUFBTUksY0FBY0ksUUFBUXVvQyxpQkFHOUIsR0FBSWg1QixLQUFLMEMsVUFBVXlULFNBQVMsU0FBVSxDQUNwQyxJQUFJd3VCLFVBQ0Eza0MsS0FBSzBDLFVBQVV5VCxTQUFTLFlBQzFCd3VCLFVBQVlwTyxnQkFBZ0JudkIsWUFBWXBILE9BRXRDQSxLQUFLMEMsVUFBVXlULFNBQVMsZUFDMUJ3dUIsVUFBWW5PLG1CQUFtQnB2QixZQUFZcEgsT0FFN0Mya0MsVUFBVTVMLFlBQVlqb0IsV0FBWWtvQixnQkFBaUJoNUIsS0FDckQsTUFBTyxHQUFJQSxLQUFLMEMsVUFBVXlULFNBQVMsU0FBVSxDQUMzQyxNQUFNK3RCLFVBQVkxSyxtQkFBbUJweUIsWUFBWXBILE1BQzNDNGtDLFdBQWExdUIsT0FBTzNsQixRQUFRLGdCQUM1QjB0QyxVQUFZMkcsV0FDZGp0QyxTQUFTaXRDLFdBQVduMEMsUUFBUXNnQixPQUM1QixLQUNKLEdBQUltRixPQUFPeFQsVUFBVXlULFNBQVMsY0FDNUIrdEIsVUFBVWxHLFNBQVNDLGVBQ2QsQ0FDTCxNQUFNNEcsYUFBZWx0QyxTQUFTdWUsT0FBT3psQixRQUFRc2dCLE9BQzdDbXpCLFVBQVVuTCxZQUFZa0YsVUFBVzRHLGFBQ25DLENBQ0YsTUFBTyxHQUNMN2tDLEtBQUswQyxVQUFVeVQsU0FBUyxjQUNjLE1BQXRDblcsS0FBS3NILGNBQWMsZ0JBQ25CLENBQ0EsTUFBTXFDLFlBQWNsQyxVQUFVTCxZQUFZcEgsTUFDMUMsR0FBSWtXLE9BQU94VCxVQUFVeVQsU0FBUyxjQUFlLENBQzNDLE1BQU1yRixXQUFhblosU0FBU3VlLE9BQU96bEIsUUFBUXFnQixZQUMzQ25ILE1BQU1nSSxVQUFVYixXQUNsQixLQUFPLENBQ0wsTUFBTSt6QixhQUFlbHRDLFNBQVN1ZSxPQUFPemxCLFFBQVFzZ0IsYUFDdkNwSCxNQUFNK0gsYUFBYW16QixhQUMzQixDQUNGLEtBQU8sQ0FDTCxNQUFNbDNDLE1BQVE0ckMsU0FBU3g1QixrQkFBa0JDLE1BQ25DOGtDLDBCQUNKOWtDLEtBQUtzSCxjQUFjLG1CQUVyQixHQUFJM1osTUFBTXdqQixVQUFVTCxZQUFhLENBQy9CLE1BQU03YSxPQUFTK0osS0FBS3NILGNBQWMsZUFHbEMsT0FGQXRILEtBQUt2UCxRQUFRK1csYUFBZXd4QixnQkFDNUJoNUIsS0FBS3ZQLFFBQVEwb0MsVUFBWSxRQUNqQkgsaUJBQ04sS0FBS3Z4QixVQUFVRCxhQUFhRSxRQUMxQnpSLE9BQU8yckIsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUFTLHVCQUN0QzR6QywwQkFBMEJsakIsVUFBWTV3QixLQUFLQyxLQUFLMFcsT0FDOUMsZ0NBQ0EsQ0FDRW1KLFdBQ0F0SixhQUFjeFcsS0FBS0MsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLdVcsVUFBVUQsYUFBYUksS0FDMUIzUixPQUFPMnJCLFVBQVk1d0IsS0FBS0MsS0FBS0MsU0FBUyxvQkFDdEM0ekMsMEJBQTBCbGpCLFVBQVk1d0IsS0FBS0MsS0FBSzBXLE9BQzlDLGdDQUNBLENBQ0VtSixXQUNBdEosYUFBY3hXLEtBQUtDLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS3VXLFVBQVVELGFBQWF6SixRQUMxQjlILE9BQU8yckIsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUFTLHVCQUN0QzR6QywwQkFBMEJsakIsVUFBWTV3QixLQUFLQyxLQUFLMFcsT0FDOUMsZ0NBQ0EsQ0FDRW1KLFdBQ0F0SixhQUFjeFcsS0FBS0MsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLdVcsVUFBVUQsYUFBYUssU0FDMUI1UixPQUFPMnJCLFVBQVk1d0IsS0FBS0MsS0FBS0MsU0FBUyx3QkFDdEM0ekMsMEJBQTBCbGpCLFVBQVk1d0IsS0FBS0MsS0FBSzBXLE9BQzlDLGdDQUNBLENBQ0VtSixXQUNBdEosYUFBY3hXLEtBQUtDLEtBQUtDLFNBQVMsNkJBUXpDK0UsT0FBT3lNLFVBQVVXLFFBQVEsVUFBVyxXQUNwQ3BOLE9BQU95TSxVQUFVZ1UsT0FBTyxVQUN4QjFXLEtBQUtzSCxjQUFjLGlCQUFpQm9QLFNBQ3BDMVcsS0FBS3NILGNBQWMsaUJBQWlCbXNCLE1BQU1DLFFBQVUsYUFDOUM2RixTQUFTdGEsZUFBZWpmLEtBQ2hDLE1BQ0V2RCxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTywwQkFBMkIsQ0FDMUNoYSxNQUFPQSxNQUFNN0QsT0FJckIsQ0FDQSxLQUNGLENBQ0EsSUFBSyxPQUFRLENBQ1gsTUFBTWk3QyxRQUFVL2tDLEtBQUtnbEMsV0FBVSxHQUN6Qi91QyxPQUFTOHVDLFFBQVF6OUIsY0FBYyxlQUNyQ3JSLE9BQU8yckIsVUFDTDNyQixPQUFPMnJCLFVBQVk1d0IsS0FBS0MsS0FBS0MsU0FBUyxxQkFDeEMrRSxPQUFPeU0sVUFBVWdVLE9BQU8sV0FDeEJxdUIsUUFBUXo5QixjQUFjLGlCQUFpQm9QLFNBQ3ZDcXVCLFFBQVF0MEMsUUFBUXcwQyxZQUFhLFFBQ3ZCMUwsU0FBU3RhLGVBQWU4bEIsUUFBU0wsY0FBY2owQyxRQUFRc2YsaUJBQ3ZEdEksVUFBVTdjLEtBQUtvVixNQUNyQixLQUNGLENBQ0EsSUFBSyxZQUFhLENBQ2hCLElBRUltdkIsU0FGQStWLFlBQWNqMUMsTUFBTUksY0FBY0UsUUFBUSwyQkFDM0NFLFFBQVF5UCxRQUVOZ2xDLFlBS0gvVixTQUFXejdCLEtBQUsyd0Msa0JBQWtCYSxjQUpsQ0EsWUFBY2oxQyxNQUFNSSxjQUFjRSxRQUFRLDJCQUN2Q0UsUUFBUW1RLFFBQ1h1dUIsU0FBV24rQixLQUFLcVAsT0FBT3pQLElBQUlzMEMsY0FLN0IsTUFBTUMsYUFBZWwxQyxNQUFNSSxjQUFjSSxRQUFRZ3pDLFdBQzNDeE0sWUFBMEQsU0FBNUNobkMsTUFBTUksY0FBY0ksUUFBUXdtQyxZQUMxQ3R0QixNQUFRLElBQUlsQyxVQUtsQixPQUpBa0MsTUFBTUksbUJBQXFCMjZCLGNBQWNqMEMsUUFBUXNmLFVBQ2pEcEcsTUFBTUMsU0FBVyxVQUNqQkQsTUFBTUUsS0FBTyxTQUNiRixNQUFNOVksT0FBU3MwQyxhQUNQQSxjQUNOLElBQUssVUFDSHg3QixNQUFNaGMsTUFBUXdoQyxTQUNkeGxCLE1BQU1oTyxNQUFRMUwsTUFBTUksY0FBY0ksUUFBUXdYLFFBQzFDMEIsTUFBTUssV0FBYXZDLFVBQVV1UCxnQkFBZ0J0UCxRQUN6Q3V2QixjQUFhdHRCLE1BQU1qQixjQUFnQixTQUVqQ2lCLE1BQU05VSxPQUNaOFUsTUFBTWtnQixZQUNOLE1BQ0YsSUFBSyxZQUNIbGdCLE1BQU1oYyxNQUFRd2hDLFNBQ2R4bEIsTUFBTWhPLE1BQVExTCxNQUFNSSxjQUFjSSxRQUFRd1gsUUFDMUMwQixNQUFNSyxXQUFhdkMsVUFBVXVQLGdCQUFnQnRQLFFBQzdDaUMsTUFBTWhRLEtBQU8xSixNQUFNSSxjQUFjSSxRQUFRdVgsT0FDckNpdkIsY0FBYXR0QixNQUFNakIsY0FBZ0IsU0FFakNpQixNQUFNOVUsT0FDWjhVLE1BQU1rZ0IsWUFDTixNQUNGLElBQUssV0FBWSxDQUNmLE1BQU1sOEIsTUFBUTRyQyxTQUFTeDVCLGtCQUFrQkMsTUFDekMsR0FBSW12QixTQUFTeVEsT0FBU2p5QyxNQUFNaXlDLE1BQVEsRUFJbEMsWUFIQW5qQyxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLQyxTQUFTLGtDQUl2QnlZLE1BQU1oYyxNQUFRd2hDLFNBQ2R4bEIsTUFBTWhPLE1BQVExTCxNQUFNSSxjQUFjSSxRQUFRd1gsUUFDMUMwQixNQUFNSyxXQUFhdkMsVUFBVXVQLGdCQUFnQnRQLFFBQ3pDdXZCLGNBQWF0dEIsTUFBTWpCLGNBQWdCLEdBQ25DeW1CLFNBQVN5USxNQUFRanlDLE1BQU1peUMsUUFDekJqMkIsTUFBTWpCLGFBQ0ppQixNQUFNakIsY0FBZ0IvYSxNQUFNaXlDLE1BQVF6USxTQUFTeVEsUUFHN0NqMkIsTUFBTWpCLGNBQWdCLElBQ3hCaUIsTUFBTUssV0FDSkwsTUFBTUssV0FBYWxVLEtBQUtDLElBQUk0VCxNQUFNakIsY0FBZ0IsRUFDcERpQixNQUFNakIsY0FBZ0IsU0FHbEJpQixNQUFNOVUsT0FDWjhVLE1BQU1rZ0IsWUFDTixLQUNGLEVBSUYsS0FDRixDQUVBLElBQUssdUJBQXdCLENBQzNCLE1BQU1yQixVQUFZZ08sbUJBQW1CcHZCLFlBQVlwSCxNQUMzQzJKLFlBQWM2ZSxVQUFVNlAsa0JBQzVCcG9DLE1BQU1JLGNBQWNJLFFBQVFrTCxPQUU5QjZqQixFQUFFdEosUUFBUTlRLEtBQUssWUFBWSxTQUNyQnhRLFNBQVNpQyxlQUFlOFMsTUFBTXJVLEtBQUtULFlBQ25DMnpCLFVBQVVtUSxxQkFDaEIsS0FDRixDQUVBLElBQUssMkJBQTRCLENBQy9CLE1BQU1oZ0IsT0FBUzRkLGdCQUFnQm52QixZQUFZcEgsWUFDckMyWSxPQUFPNmYseUJBQ2IsS0FDRixDQUVBLElBQUssb0JBQXFCLENBQ3hCLE1BQU03ZixPQUFTNGQsZ0JBQWdCbnZCLFlBQVlwSCxNQUNyQzJKLFlBQWNnUCxPQUFPMGYsa0JBQ3pCcG9DLE1BQU1JLGNBQWNJLFFBQVFrTCxPQUU5QjZqQixFQUFFdEosUUFBUTlRLEtBQUssWUFBWSxTQUNyQnhRLFNBQVNpQyxlQUFlOFMsTUFBTXJVLEtBQUtULFlBQ25DOGpCLE9BQU9nZ0IscUJBQ2IsS0FDRixDQUNBLElBQUssb0JBQXFCLENBQ3hCLE1BQU1sSixlQUFpQixJQUFJdEMsV0FBVyxDQUNwQ3RsQixTQUFzQyxTQUE1QnFPLE9BQU96bEIsUUFBUW9YLFNBQ3pCc1EsWUFBYWxvQixNQUFNNnlCLFdBRXJCMk0sZUFBZTNxQixTQUFXb1IsT0FBT3psQixRQUFRMjBDLE9BQ3pDM1YsZUFBZXZXLFVBQVloRCxPQUFPemxCLFFBQVFrb0IsT0FDMUM4VyxlQUFlem5CLE9BQVNrTyxPQUFPemxCLFFBQVErbkIsT0FDbkNrc0IsY0FBY2owQyxRQUFRc2YsWUFDeEIwZixlQUFlMWYsVUFBWTIwQixjQUFjajBDLFFBQVFzZixXQUVuRDBmLGVBQWV4USxpQkFnQmYsS0FDRixDQUNBLElBQUssd0JBQXlCLENBQzVCLE1BQU1tZixlQUFpQjVFLG1CQUFtQnB5QixZQUFZcEgsTUFDdERvK0IsZUFBZXBCLCtCQUNUb0IsZUFBZW5mLGlCQUNyQixLQUNGLENBQ0EsSUFBSyx1QkFBd0IsQ0FDM0IsTUFBTW1mLGVBQWlCNUUsbUJBQW1CcHlCLFlBQVlwSCxZQUNoRG8rQixlQUFlWCxjQUNyQixLQUNGLENBQ0EsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTVcsZUFBaUI1RSxtQkFBbUJweUIsWUFBWXBILFlBQ2hEbytCLGVBQWV0USxhQUNyQixLQUNGLENBQ0EsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTTVVLFVBQVlsWixLQUFLdlAsUUFBUXlvQixVQUN6Qm1zQixPQUFTcmxDLEtBQUt2UCxRQUFRd0YsT0FDdEI0aUIsWUFBYzNWLFdBQVdxQixnQkFBZ0IyVSxpQkFDekNMLFlBQVlvVixXQUFXb1gsUUFDN0IsTUFBTWpkLFFBQVVwb0IsS0FBS3NILGNBQWMsaUJBQzdCZ3lCLFVBQVl0NUIsS0FBS3NILGNBQWMsZUFDckNrWSxFQUFFOFosV0FBV2dNLE9BQU8sZ0NBQ2hCbGQsU0FBU0EsUUFBUTFSLGVBQ2Y2aUIsU0FBU3RhLGVBQWVqZixNQUU5QixLQUNGLENBRUEsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTW8rQixlQUFpQjVFLG1CQUFtQnB5QixZQUFZcEgsWUFDaERvK0IsZUFBZW5RLGFBQ3JCLEtBQ0YsQ0FFQSxJQUFLLG1CQUNpQnhtQixVQUFVTCxZQUFZcEgsT0FDcEMyUixZQUNOLE1BR0YsSUFBSyxvQkFDaUJsSyxVQUFVTCxZQUFZcEgsT0FDcEMyUixZQUNOLE1BR0YsSUFBSyxvQkFDaUJsSyxVQUFVTCxZQUFZcEgsT0FDcEN1bEMsWUFDTixNQUdGLElBQUssZ0NBQ2lCOTlCLFVBQVVMLFlBQVlwSCxPQUNwQ3dsQyx1QkFDTixNQUdGLElBQUssZ0NBQ2lCLzlCLFVBQVVMLFlBQVlwSCxPQUNwQ3lsQyx1QkFDTixNQUdGLElBQUssZUFBZ0IsQ0FDbkIsTUFBTTk3QixZQUFjbEMsVUFBVUwsWUFBWXBILE1BQzFDMkosTUFBTTBPLFNBQVUsRUFDaEIxTyxNQUFNKzdCLGVBRUo1aUMsVUFBVTdTLE9BRVYwWixNQUFNc1YsZUFBZSxDQUFFMG1CLFlBQVksSUFJckMsS0FDRixDQUVBLElBQUssa0JBQW1CLENBQ3RCLE1BQU1oOEIsWUFBY2xDLFVBQVVMLFlBQVlwSCxNQUMxQzJKLE1BQU0yb0IsU0FBVSxRQUNWM29CLE1BQU1rTCxXQUNabEwsTUFBTXNWLGVBQWUsQ0FBRTJtQixXQUFXLElBQ2xDLEtBQ0YsQ0FFQSxJQUFLLHVCQUF3QixDQUMzQixNQUFNajhCLFlBQWNsQyxVQUFVTCxZQUFZcEgsWUFDcEMySixNQUFNM04sc0JBQ1oyTixNQUFNKzdCLGVBQ04vN0IsTUFBTXNWLGlCQUNOLEtBQ0YsQ0FFQSxJQUFLLDBCQUEyQixDQUM5QixNQUFNM0UsU0FBV1YsYUFBYXhTLFlBQVlwSCxZQUNwQ3NhLFNBQVN5RSwyQkFDVHpFLFNBQVMyRSxpQkFDZixLQUNGLENBRUEsSUFBSyxpQkFBa0IsQ0FDckIsTUFBTTNFLFNBQVdWLGFBQWF4UyxZQUFZcEgsWUFDcENzYSxTQUFTK0MsZ0JBQ1QvQyxTQUFTMkUsaUJBQ2YsS0FDRixDQUVBLElBQUssZ0JBQWlCLENBQ3BCLE1BQU0zRSxTQUFXVixhQUFheFMsWUFBWXBILFlBQ3BDc2EsU0FBU29CLGFBQ2J4RixPQUFPemxCLFFBQVF5cEIsYUFFWEksU0FBUzJFLGlCQUNmLEtBQ0YsQ0FFQSxJQUFLLGdCQUFpQixDQUNwQixNQUFNM0UsU0FBV1YsYUFBYXhTLFlBQVlwSCxZQUNwQ3NhLFNBQVNxRCxjQUNmckQsU0FBUzJFLGlCQUNULEtBQ0YsQ0FFQSxJQUFLLGlCQUFrQixDQUNyQixNQUFNM0UsU0FBV1YsYUFBYXhTLFlBQVlwSCxZQUNwQ3NhLFNBQVNtRSxVQUNmbkUsU0FBUzJFLGlCQUNULEtBQ0YsQ0FnQkEsSUFBSyxpQkFBa0IsQ0FDckIsTUFBTStULFNBQVdILGFBQWF6ckIsWUFBWXBILFlBQ3BDZ3pCLFNBQVNHLFVBQ2ZILFNBQVMvVCxpQkFDVCxLQUNGLENBRUEsSUFBSyxtQkFBb0IsQ0FDdkIsTUFBTStULFNBQVdILGFBQWF6ckIsWUFBWXBILE1BQzFDZ3pCLFNBQVMzYSxTQUFVLEVBQ25CMmEsU0FBUy9ULGlCQUNULEtBQ0YsRUFLSixDQU9BLCtCQUFPaWlCLENBQTBCanhDLE9BQy9CQSxNQUFNRSxpQkFDTixNQUVNZ1UsUUFGU2xVLE1BQU1JLGNBQ0RFLFFBQVEsY0FDUCtXLGNBQWMsaUJBQy9CbkQsVUFDR0EsUUFBUXN2QixNQUFNQyxRQUdqQnZ2QixRQUFRc3ZCLE1BQU1DLFFBQ2MsU0FBMUJ2dkIsUUFBUXN2QixNQUFNQyxRQUFxQixRQUFVLE9BSC9DdnZCLFFBQVFzdkIsTUFBTUMsUUFBVSxRQU05QixFQy9vQ0ssTUFBTThDLDJCQUEyQnRlLGNBQ3RDLFdBQUFuZixDQUFhK0wsU0FBVyxLQUFNa0QsT0FBUyxLQUFNbVEsYUFBYyxHQUN6RHBvQixNQUFNK1UsU0FBVXFULGFBQ2hCemtCLEtBQUtzVSxPQUFTQSxPQUNkdFUsS0FBS2s4QixVQUFXLEVBQ2hCbDhCLEtBQUt1akMsYUFBYyxFQUNuQnZqQyxLQUFLd2pDLFdBQVksRUFDakJ4akMsS0FBS3lqQyxhQUFjLEVBQ25CempDLEtBQUtnVixhQUFlLEVBQ3BCaFYsS0FBS3FjLFVBQVksS0FDakJyYyxLQUFLZ21DLFdBQWEsS0FDbEJobUMsS0FBS28xQixRQUFTLENBQ2hCLENBRUEsWUFBSXhiLEdBQ0YsTUFBTyx5REFDVCxDQUVBLGlCQUFNdzBCLEdBRUosTUFBTXBpQixZQUFjMXVCLEtBQUtnZixTQUFTcGYsSUFBSThDLEtBQUtxYyxpQkFFckMyUCxZQUFZMEosUUFBUSxPQUFRLGlCQUFpQixTQUM3QzNzQixHQUFHa2pCLEtBQUtDLGNBQWNGLGFBQWEsRUFDM0MsQ0FFQSxvQkFBTXFZLEdBQ0o3MEIsV0FBVzRDLG1CQUFtQnBTLEtBQUtvUixVQUNuQyxNQUFNNkksV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVU1WixNQUUzQytsQixZQUFjLENBQUMsRUFDakIvbEIsS0FBS2lSLE1BQU84VSxZQUFZOVUsTUFBUWpSLEtBQy9CK2xCLFlBQVk5ckIsTUFBUStGLEtBQ3pCLE1BQU1pUSxRQUFVek0sWUFBWTBNLFdBQVc2VixhQUlqQzFpQixTQUFXLENBQ2ZPLE1BSFc1RCxLQUFLL0YsTUFBTTJKLEtBQU81RCxLQUFLL0YsTUFBTTJKLEtBQU90RyxLQUFLc0csTUFHekNzSyxHQUNYK0IsUUFDQVEsUUFBU3dKLE1BR1AsQ0FBQyxTQUFVLGFBQWFqWCxTQUFTaEQsS0FBS3FCLFlBQ3hDZ0MsU0FBU0MsUUFBVUUsWUFBWXdpQixxQkFBcUIsT0FHdEQzaUIsU0FBU0UsT0FBUSxFQUlqQixhQUYwQkMsWUFBWWtOLE9BQU9yTixTQUcvQyxDQUVBLG9CQUFNa29CLEdBQ0osTUFBTXRSLFdBQWF3RyxlQUFlemdCLEtBQUs0WixTQUFVNVosTUFFM0M4UCxRQUFVeFMsS0FBS2dmLFNBQVNwZixJQUFJOEMsS0FBS3FjLFdBRWpDMUwsVUFBWWIsUUFBUTVSLE9BQU8sQ0FBRXVTLFFBQVN3SixPQUU1QyxhQURNbFIsR0FBR2tqQixLQUFLQyxjQUFjdmIsS0FBSyxHQUMxQkEsR0FDVCxDQUVBLFVBQUFnbEIsQ0FBWS9zQixVQUNWLE1BQU00c0IsS0FBTzVzQixTQUFTNUYsU0FBUyxLQUMzQndNLFdBQVdDLGtCQUFrQjdHLFVBQzdCQSxTQUVKLE9BREE1SSxLQUFLdzFCLE9BQVN4MUIsS0FBS3cxQixNQUNYQSxNQUNOLElBQUssY0FDTCxJQUFLLFlBQ0h4MUIsS0FBS2dWLGFBQWU1UyxLQUFLYSxLQUFLLEVBQUdiLEtBQUtjLElBQUksRUFBR2UsU0FBU2pFLEtBQUtnVixhQUFjLEtBQU9oVixLQUFLdzFCLE1BQVEsR0FBSyxLQUd4RyxDQUVBLHVCQUFNbVAsQ0FBbUJwd0IsUUFBVSxLQUFNcXdCLFNBQVUsR0FDakQsTUFBTTN1QixNQUFRLElBQUlsQyxVQTRCbEIsR0ExQkFrQyxNQUFNME8sU0FBVSxFQUNoQjFPLE1BQU00dUIsV0FBWSxFQUNsQjV1QixNQUFNSSxtQkFBcUJyVyxLQUFLcWMsVUFDaENwRyxNQUFNQyxTQUFXLFVBQ2pCRCxNQUFNRSxLQUFPLFlBQ2JGLE1BQU05WSxPQUFTLFNBQ2Y4WSxNQUFNaGMsTUFBUStGLEtBQUtvUixTQUNuQjZFLE1BQU1oUSxLQUFPakcsS0FBS3NVLE9BQ2xCMkIsTUFBTWhPLE1BQVFzTSxRQUNkMEIsTUFBTUssV0FBYXZDLFVBQVV1UCxnQkFBZ0J0UCxRQUM3Q2lDLE1BQU1qQixhQUFlLEVBRWpCMVgsS0FBS3NHLEtBQUsyRSxLQUFNdkksS0FBS211QyxlQUFnQixFQUNwQ251QyxLQUFLbXVDLGVBQWdCLEVBRXRCbnVDLEtBQUtnVixlQUFjaUIsTUFBTWpCLGFBQWVoVixLQUFLZ1Ysb0JBRTNDaUIsTUFBTTlVLE9BQ1puQixLQUFLaVcsTUFBUUEsTUFDYmpXLEtBQUtvMUIsUUFBUyxFQUNkcDFCLEtBQUtrOEIsVUFBVyxFQUNaMEksU0FBUzN1QixNQUFNa2dCLFlBRW5CbjJCLEtBQUttakMsZUFDSGx0QixNQUFNbkMsZUFBaUJDLFVBQVVELGFBQWF6SixTQUM5QzRMLE1BQU1uQyxlQUFpQkMsVUFBVUQsYUFBYUssU0FDNUNuVSxLQUFLeWxCLFlBQWN6bEIsS0FBS3lqQyxZQUFhLENBQ3ZDLE1BQU0zekIsY0FBZ0J4UyxLQUFLNjBDLFdBQVdDLFlBQVksb0JBQXFCLENBQ3JFNXNCLFVBQVd4bEIsS0FBS3dsQixVQUNoQm5KLFVBQVdyYyxLQUFLcWMsVUFDaEJvSSxZQUFhemtCLEtBQUt5a0IsWUFDbEJyVCxTQUFVcFIsS0FBS29SLFdBRWpCcFIsS0FBS2dtQyxXQUFhbDJCLFFBQVE1QixJQUFNNEIsUUFBUXVpQyxHQUMxQyxDQUtBLE9BSElyeUMsS0FBS3lqQyxjQUFnQnpqQyxLQUFLaVcsTUFBTVEsVUFDbEN6VyxLQUFLaVcsTUFBTWdJLFlBRU5oSSxLQUNULENBRUEsd0JBQU1ndkIsQ0FBb0JodkIsTUFBUSxNQUNoQyxJQUFLQSxRQUFValcsS0FBS2lXLE1BQU8sT0FBTyxLQU9sQyxHQUxJQSxRQUFPalcsS0FBS2lXLE1BQVFBLE9BQ3hCalcsS0FBS21CLEtBQU9zUyxTQUFTdUMsYUFBYWhXLEtBQUtpVyxPQUN2Q2pXLEtBQUtvMUIsUUFBUyxFQUVkcDFCLEtBQUttQixLQUFLK2pDLFVBQVksR0FDbEJsbEMsS0FBS21CLEtBQUtnVCxTQUFVLENBQ3RCblUsS0FBS21CLEtBQUtna0MsVUFBWSxZQUN0Qm5sQyxLQUFLbUIsS0FBS2lrQyxVQUFZOW5DLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ3pDLElBQUssSUFBSTZmLE1BQVEsRUFBR0EsTUFBUSxFQUFHQSxRQUM3QnJkLEtBQUttQixLQUFLK2pDLFVBQVVodUMsS0FBSyxRQUU3QixNQUFPLEdBQUk4SSxLQUFLbUIsS0FBS2lULE9BQVEsQ0FDM0JwVSxLQUFLbUIsS0FBS2drQyxVQUFZLFVBQ3RCbmxDLEtBQUttQixLQUFLaWtDLFVBQVk5bkMsS0FBS0MsS0FBS0MsU0FBUyxlQUN6QyxJQUFLLElBQUk2ZixNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0JyZCxLQUFLbUIsS0FBSytqQyxVQUFVaHVDLEtBQUssU0FFN0IsTUFBTyxHQUFJOEksS0FBS21CLEtBQUtzMkIsUUFBUyxDQUM1QnozQixLQUFLbUIsS0FBS2drQyxVQUFZLFlBQ2xCcHhCLFVBQVVELGFBQWFFLFVBQVloVSxLQUFLbUIsS0FBSzJTLGVBQy9DOVQsS0FBS21CLEtBQUtpa0MsVUFBWTluQyxLQUFLQyxLQUFLQyxTQUFTLHdCQUV2Q3VXLFVBQVVELGFBQWFJLE9BQVNsVSxLQUFLbUIsS0FBSzJTLGVBQzVDOVQsS0FBS21CLEtBQUtpa0MsVUFBWTluQyxLQUFLQyxLQUFLQyxTQUFTLHFCQUV2Q3VXLFVBQVVELGFBQWF6SixVQUFZckssS0FBS21CLEtBQUsyUyxlQUMvQzlULEtBQUttQixLQUFLaWtDLFVBQVk5bkMsS0FBS0MsS0FBS0MsU0FBUyx3QkFFM0MsSUFBSyxJQUFJNmYsTUFBUSxFQUFHQSxNQUFRcmQsS0FBS21CLEtBQUsyUyxhQUFjdUosUUFDbERyZCxLQUFLbUIsS0FBSytqQyxVQUFVaHVDLEtBQUssT0FFN0IsTUFDRThJLEtBQUttQixLQUFLZ2tDLFVBQVksUUFDdEJubEMsS0FBS21CLEtBQUtpa0MsVUFBWTluQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUN6Q3dDLEtBQUttQixLQUFLK2pDLFVBQVVodUMsS0FBSyxTQUczQixJQUFLOEksS0FBS2dtQyxhQUFlaG1DLEtBQUt5akMsYUFBZXpqQyxLQUFLeWxCLFVBQVcsQ0FDM0QsTUFBTXNmLGVBQWlCLElBQUl0QyxtQkFDekJ6aUMsS0FBS3FqQyxnQkFDTHJqQyxLQUFLcWMsV0FFRDJvQix3QkFBMEJELGVBQWVuQyxtQkFDL0M1aUMsS0FBSytrQyxlQUFpQkMsa0JBQWtCOTJCLEVBQzFDLE9BQ01sTyxLQUFLdXJCLGdCQUNiLENBRUEsa0JBQU83WCxDQUFhcEgsS0FBTStQLFVBQVksTUFDcEMsTUFBTXlZLFVBQVksSUFBSWdPLG1CQU90QixPQU5BdHpCLFdBQVdtQyxxQkFBcUJtakIsVUFBV3hvQixNQUMzQ3dvQixVQUFVM3pCLEtBQU9zUyxTQUFTQyxZQUFZcEgsTUFFbENBLEtBQUt6UCxRQUFRLFlBQ2ZpNEIsVUFBVXpZLFVBQVkvUCxLQUFLelAsUUFBUSxZQUFZRSxRQUFRc2YsVUFDbER5WSxVQUFVelksVUFBWUEsVUFDdEJ5WSxTQUNULENBRUEsdUJBQU96SSxDQUFrQmhRLFdBQ3ZCLE1BQU12TSxRQUFVeFMsS0FBS2dmLFNBQVNwZixJQUFJbWYsV0FDbEMsSUFBS3ZNLFFBQVMsT0FBTyxLQUNyQixNQUFNeEQsS0FBT3dmLEVBQUVoYyxRQUFRVyxTQUFTLEdBRTFCcWtCLFVBQVlnTyxtQkFBbUJwdkIsWUFBWXBILEtBQU0rUCxXQUd2RCxPQUZBeVksVUFBVXpZLFVBQVlBLFVBRWZ5WSxTQUNULENBRUEsdUJBQU9vUCxDQUFrQjNuQyxNQUFPNG5DLGVBQWdCLEdBQzlDLE1BQU03M0IsS0FBTy9QLE1BQU1JLGNBQWNFLFFBQVEsb0JBQ25DMjRCLEtBQU9qNUIsTUFBTUksY0FBY0ksUUFBUXk0QixLQUNuQzRPLFVBQVk1MEIsV0FBV0Msa0JBQWtCK2xCLE1BRy9DLEdBQUsyTyxjQUlFLENBRUwsTUFBTXJQLFVBQVlnTyxtQkFBbUJwdkIsWUFBWXBILE1BQ2pEd29CLFVBQVVhLFdBQVdILE1BQ3JCVixVQUFVdkosZ0JBQ1osTUFSRWpmLEtBQUt2UCxRQUFRcW5DLFdBQXlDLFNBQTVCOTNCLEtBQUt2UCxRQUFRcW5DLFdBQ3ZDN25DLE1BQU1JLGNBQWNxUyxVQUFVMkwsT0FBTyxlQUNyQ3BlLE1BQU1JLGNBQWNJLFFBQVF1WSxTQUFXaEosS0FBS3ZQLFFBQVFxbkMsVUFPeEQsQ0FFQSxXQUFBaUIsQ0FBYWpvQixXQUFZa29CLGdCQUFpQkMsU0FFbkN2bEMsS0FBSy9GLE1BQU13akIsVUFBVUwsYUFDeEJyVSxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTyxxQkFBc0IsQ0FDckM3ZCxLQUFNNEosS0FBSy9GLE1BQU03RCxRQUl2QjRKLEtBQUttQixLQUFLakwsTUFBUSxLQUNsQjhKLEtBQUttQixLQUFLMlMsYUFBZXd4QixnQkFDekJ0bEMsS0FBS21CLEtBQUtxa0MsV0FBWSxFQUN0QkQsUUFBUXhvQyxRQUFRMG9DLFdBQVksRUFFNUIsTUFBTUMsVUFBWUgsUUFBUTN4QixjQUFjLGNBQ3hDOHhCLFVBQVUzb0MsUUFBUTdHLE1BQVEsS0FDMUJ3dkMsVUFBVTNvQyxRQUFRK1csYUFBZXd4QixnQkFDakNJLFVBQVUzb0MsUUFBUXlvQyxXQUFZLEVBRTlCLE1BQU1HLGFBQWVKLFFBQVEzeEIsY0FBYyxtQkFDckNneUIsVUFBWUwsUUFBUTN4QixjQUFjLGVBQ2xDMCtCLGlCQUFtQi9NLFFBQVEzeEIsY0FDL0IsMkNBSUYsT0FGSTArQixrQkFBa0JBLGlCQUFpQnRqQyxVQUFVZ1UsT0FBTyxhQUVoRHNpQixpQkFDTixLQUFLdnhCLFVBQVVELGFBQWFFLFFBQzFCNHhCLFVBQVUxWCxVQUFZNXdCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ3pDbW9DLGFBQWF6WCxVQUFZNXdCLEtBQUtDLEtBQUswVyxPQUNqQyxnQ0FDQSxDQUNFbUosV0FDQXRKLGFBQWN4VyxLQUFLQyxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUt1VyxVQUFVRCxhQUFhSSxLQUMxQjB4QixVQUFVMVgsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUFTLG9CQUN6Q21vQyxhQUFhelgsVUFBWTV3QixLQUFLQyxLQUFLMFcsT0FDakMsZ0NBQ0EsQ0FDRW1KLFdBQ0F0SixhQUFjeFcsS0FBS0MsS0FBS0MsU0FBUyx5QkFHckMsTUFFRixLQUFLdVcsVUFBVUQsYUFBYXpKLFFBQ3RCaW9DLG1CQUFrQkEsaUJBQWlCdjFDLFFBQVFvWCxVQUFXLEdBQzFEeXhCLFVBQVUxWCxVQUFZNXdCLEtBQUtDLEtBQUtDLFNBQVMsdUJBQ3pDbW9DLGFBQWF6WCxVQUFZNXdCLEtBQUtDLEtBQUswVyxPQUNqQyxnQ0FDQSxDQUNFbUosV0FDQXRKLGFBQWN4VyxLQUFLQyxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUt1VyxVQUFVRCxhQUFhSyxTQUN0Qm0rQixtQkFBa0JBLGlCQUFpQnYxQyxRQUFRb1gsVUFBVyxHQUMxRHl4QixVQUFVMVgsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUFTLHdCQUN6Q21vQyxhQUFhelgsVUFBWTV3QixLQUFLQyxLQUFLMFcsT0FDakMsZ0NBQ0EsQ0FDRW1KLFdBQ0F0SixhQUFjeFcsS0FBS0MsS0FBS0MsU0FBUyw2QkFTekNvb0MsVUFBVTUyQixVQUFVVyxRQUFRLFVBQVcsV0FDdkM0MUIsUUFBUTN4QixjQUFjLGlCQUFpQm9QLFNBQ3ZDdWlCLFFBQVEzeEIsY0FBYyxpQkFBaUJtc0IsTUFBTUMsUUFBVSxPQUN2RDZGLFNBQVN0YSxlQUFlZ2EsUUFDMUIsRUNyUkssTUFBTXJWLGlCQUFpQnFpQixNQUU1QixXQUFBbHRDLENBQWFDLEtBQU1DLFNBRWpCLEdBQUlELEtBQUtqSCxRQUFRdUUsT0FBTzJ2QyxNQUFNL3NDLGtCQUFvQkQsU0FBU0UsU0FNekQsT0FBTyxJQUFJN0MsT0FBTzJ2QyxNQUFNL3NDLGdCQUFnQkYsS0FBS2pILE1BQU1pSCxLQUFNLENBQ2xERyxVQUFVLEtBQ1pGLFVBYVBsSixNQUFNaUosS0FBTUMsUUFDZCxDQUVBLGdCQUFNaXRDLEdBQ0puMkMsTUFBTW0yQyxtQkFDQXh5QyxLQUFLeXlDLGNBQ2IsQ0FzQ0EsZUFBQUMsR0FDRSxHQUFJLENBQUMsWUFBYSxNQUFPLFlBQVkxdkMsU0FBU2hELEtBQUszQixNQUFPLENBQ3hEMkIsS0FBS2pFLE9BQU84bkIsT0FBUyxDQUFDLEVBQ3RCLElBQUssTUFBTXJELEtBQUt4Z0IsS0FBS21PLE1BQ0osVUFBWHFTLEVBQUVuaUIsT0FDTjJCLEtBQUtqRSxPQUFPOG5CLE9BQU8sR0FBR3JELEVBQUVteUIsa0JBQW9CLENBQUV2VSxVQUFXNWQsRUFBRXRTLEdBQUlpVixNQUFPM0MsRUFBRXRoQixPQUFPd0MsTUFBTWt4QyxXQUFXMWtDLEdBQUloWSxNQUFPc3FCLEVBQUVoSyxTQUFVclMsVUFBV3FjLEVBQUV6a0IsT0FBT29JLFlBUzdJLFFBQWtELElBQXZDbkUsS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSXdvQixXQUNqQyxHQUFJN3lDLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUl5b0IsZUFBZ0IsQ0FDMUMsTUFBTTc4QyxFQUFJK0osS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSXlvQixlQUFlcG1DLE1BQU0sS0FDbkR6VyxFQUFFLEtBQU82RixNQUFNSSxPQUFPakcsRUFBRSxLQUMxQitKLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUl3b0IsV0FBYTMyQyxPQUFPakcsRUFBRSxJQUU5QytKLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUl3b0IsV0FBYSxDQUV6QyxNQUNFN3lDLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUl3b0IsV0FBYSxFQUt6Qzd5QyxLQUFLakUsT0FBT0MsUUFBUXN3QyxJQUFJcDJDLE1BQVE4SixLQUFLK3lDLE9BQ3JDL3lDLEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHakcsTUFBUThKLEtBQUtnekMsTUFDcENoekMsS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTWgyQyxNQUFROEosS0FBS2l6QyxTQUd2Q2p6QyxLQUFLakUsT0FBT0MsUUFBUWt3QyxNQUFNZ0gsUUFBVWx6QyxLQUFLbXpDLEVBMkIzQyxDQUNBOTJDLE1BQU1xMkMsaUJBQ1IsQ0FRQSx3QkFBQVUsR0FDRS8yQyxNQUFNKzJDLDBCQUNSLENBUUEsa0JBQUFDLEdBQ0UsR0FBSSxDQUFDLFlBQWEsTUFBTyxZQUFZcndDLFNBQVNoRCxLQUFLM0IsTUFBTyxDQUN4RGhDLE1BQU1nM0MscUJBRU5yekMsS0FBS2pFLE9BQU9DLFFBQVFzd0MsSUFBSXAyQyxNQUFROEosS0FBSyt5QyxPQUNyQy95QyxLQUFLakUsT0FBT0MsUUFBUUcsR0FBR2pHLE1BQVE4SixLQUFLZ3pDLE1BQ3BDaHpDLEtBQUtqRSxPQUFPQyxRQUFRa3dDLE1BQU1oMkMsTUFBUThKLEtBQUtpekMsU0FFdkNqekMsS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2x3QyxJQUFNakQsS0FBS3N6QyxTQUNsQixPQUFadHpDLEtBQUttekMsS0FBYW56QyxLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHajlDLE1BQVE4SixLQUFLc3pDLFVBRTFEdHpDLEtBQUtqRSxPQUFPQyxRQUFRdTNDLEdBQUd0d0MsSUFBTWpELEtBQUt3ekMsU0FDbEIsT0FBWnh6QyxLQUFLdXpDLEtBQWF2ekMsS0FBS2pFLE9BQU9DLFFBQVF1M0MsR0FBR3I5QyxNQUFROEosS0FBS3d6QyxVQUUxRHh6QyxLQUFLakUsT0FBT0MsUUFBUXF1QixJQUFJcG5CLElBQU1qRCxLQUFLeXpDLFVBQ2xCLE9BQWJ6ekMsS0FBS3FxQixNQUFjcnFCLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUluMEIsTUFBUThKLEtBQUt5ekMsV0FHNUQsTUFBTUMsYUFBZSxHQUVqQjF6QyxLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHaDdDLE1BQU11N0MsYUFBYXg4QyxLQUFLLHlCQUMvQzhJLEtBQUtqRSxPQUFPQyxRQUFRdTNDLEdBQUdwN0MsTUFBTXU3QyxhQUFheDhDLEtBQUsseUJBQy9DOEksS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSWx5QixNQUFNdTdDLGFBQWF4OEMsS0FBSywwQkFDaEQ4SSxLQUFLakUsT0FBT0MsUUFBUXN3QyxJQUFJbjBDLE1BQU11N0MsYUFBYXg4QyxLQUFLLDRCQUNoRDhJLEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHaEUsTUFBTXU3QyxhQUFheDhDLEtBQUssMkJBQy9DOEksS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTS96QyxNQUFNdTdDLGFBQWF4OEMsS0FBSyw4QkFFdEQsTUFBTXMzQixRQUFVeHVCLEtBQUsvQyxRQUFRZ1AsUUFBTyxDQUFDdWlCLFFBQVNodUIsSUFDeENBLEVBQUUxQyxVQUFZMEMsRUFBRUMsYUFBcUIrdEIsUUFDbENBLFFBQVF4aUIsT0FDYnhMLEVBQUVndUIsUUFBUXhxQixLQUFJb3NCLEtBQ1pBLEVBQUl4eEIsUUFBUUMsTUFBTXdPLFVBQVUraUIsSUFDMUJ0ekIsT0FBUzBELEVBQ1g0dkIsRUFBRXVqQixTQUFXdmpCLEVBQUV1akIsVUFBcUIsR0FBVHZqQixFQUFFb0MsS0FDdEJwQyxPQUdWLElBQ0g1QixRQUFRcmlCLE1BQUssQ0FBQ3pQLEVBQUcwakIsSUFBTTFqQixFQUFFaTNDLFNBQVd2ekIsRUFBRXV6QixXQUV0QyxNQUFNQyxjQUFnQnBsQixRQUFRbjRCLFFBQU9tSyxHQUFLa3pDLGFBQWExd0MsU0FBU3hDLEVBQUUzRSxPQUdsRSxJQUFLLE1BQU1ELFVBQVVnNEMsY0FDbkJoNEMsT0FBT2tCLE9BQU9uQixNQUFNcUUsS0FBTXBFLFFBR3hCb0UsS0FBSzZ6QyxPQUFTN3pDLEtBQUs2ekMsTUFBUTd6QyxLQUFLbXpDLEtBQU1uekMsS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2o5QyxNQUFROEosS0FBSzZ6QyxPQUMxRTd6QyxLQUFLOHpDLE9BQVM5ekMsS0FBSzh6QyxNQUFROXpDLEtBQUt1ekMsS0FBTXZ6QyxLQUFLakUsT0FBT0MsUUFBUXUzQyxHQUFHcjlDLE1BQVE4SixLQUFLOHpDLE9BQzFFOXpDLEtBQUs4bUIsUUFBVTltQixLQUFLOG1CLE9BQVM5bUIsS0FBS3FxQixNQUFPcnFCLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUluMEIsTUFBUThKLEtBQUs4bUIsT0FDcEYsQ0FDRixDQUVBLGlCQUFPaXRCLENBQVkxMUMsTUFDakIsT0FBUUEsTUFDTixJQUFLLFlBQ0gsTUFBTyxzQkFDVCxJQUFLLFdBQ0gsTUFBTyxtREFDVCxJQUFLLE1BQ0gsTUFBTyx3Q0FFYixDQUdBLG1CQUFhcVMsQ0FBUXBMLEtBQU1oRyxRQUFVLENBQUMsR0F5QnBDLE1BeEJrQixjQUFkZ0csS0FBS2pILEtBQ1BpSCxLQUFLNk0sZUFBaUJ2VCxRQUFRQyxNQUFNNmEsWUFBWXBVLEtBQUs2TSxnQkFBa0IsQ0FBQyxFQUFHLENBQ3pFNmhDLFdBQVcsRUFDWEMsWUFBYSxFQUNiQyxNQUFPLENBQ0x2UyxTQUFTLEtBR1UsUUFBZHI4QixLQUFLakgsTUFJUyxhQUFkaUgsS0FBS2pILFVBSFUsSUFBYmlILEtBQUtJLEtBQW9DLDhCQUFiSixLQUFLSSxNQUMxQ0osS0FBS0ksSUFBTXdxQixTQUFTNmpCLFdBQVd6dUMsS0FBS2pILE9BTWYsY0FBZGlILEtBQUtqSCxZQUNVLElBQWJpSCxLQUFLSSxLQUFvQyw4QkFBYkosS0FBS0ksTUFDMUNKLEtBQUtJLElBQU13cUIsU0FBUzZqQixXQUFXenVDLEtBQUtqSCxPQUV0Q2lILEtBQUs2TSxlQUFpQnZULFFBQVFDLE1BQU02YSxZQUFZcFUsS0FBSzZNLGdCQUFrQixDQUFDLEVBQUcsQ0FDekU2aEMsV0FBVyxLQUdSMzNDLE1BQU1xVSxPQUFPcEwsS0FBTWhHLFFBQzVCLENBTUEsa0JBQUE2MEMsR0FDRSxNQUFNQyxXQUFhLENBQ2pCcDRDLFFBQVMsQ0FDUG0zQyxHQUFJLENBQUMsRUFDTEksR0FBSSxDQUFDLEVBQ0xscEIsSUFBSyxDQUFDLEVBQ05paUIsSUFBSyxDQUFDLEVBQ05ud0MsR0FBSSxDQUFDLEVBQ0wrdkMsTUFBTyxDQUFDLElBc0JaLFlBbkJzQ3J1QyxJQUFsQ21DLEtBQUtqRSxPQUFPQyxTQUFTbTNDLElBQUloN0MsT0FDM0JpOEMsV0FBV3A0QyxRQUFRbTNDLEdBQUdoN0MsTUFBTyxRQUVPMEYsSUFBbENtQyxLQUFLakUsT0FBT0MsU0FBU3UzQyxJQUFJcDdDLE9BQzNCaThDLFdBQVdwNEMsUUFBUXUzQyxHQUFHcDdDLE1BQU8sUUFFUTBGLElBQW5DbUMsS0FBS2pFLE9BQU9DLFNBQVNxdUIsS0FBS2x5QixPQUM1Qmk4QyxXQUFXcDRDLFFBQVFxdUIsSUFBSWx5QixNQUFPLFFBRU8wRixJQUFuQ21DLEtBQUtqRSxPQUFPQyxTQUFTc3dDLEtBQUtuMEMsT0FDNUJpOEMsV0FBV3A0QyxRQUFRc3dDLElBQUluMEMsTUFBTyxRQUVNMEYsSUFBbENtQyxLQUFLakUsT0FBT0MsU0FBU0csSUFBSWhFLE9BQzNCaThDLFdBQVdwNEMsUUFBUUcsR0FBR2hFLE1BQU8sUUFFVTBGLElBQXJDbUMsS0FBS2pFLE9BQU9DLFNBQVNrd0MsT0FBTy96QyxPQUM5Qmk4QyxXQUFXcDRDLFFBQVFrd0MsTUFBTS96QyxNQUFPLEdBRzNCaThDLFVBQ1QsQ0FFQSxtQkFBSXh3QixHQUNGLE1BQU1BLGdCQUFrQixDQUN0QnR0QixJQUFLLENBQ0hKLE1BQU8sS0FDUHNSLFVBQVcsYUFDWG5LLE1BQU8sa0JBQ1ByRCxRQUFTLE1BRVh6RCxJQUFLLENBQ0hMLE1BQU8sS0FDUHNSLFVBQVcsYUFDWG5LLE1BQU8sc0JBQ1ByRCxRQUFTLE1BRVh4RCxJQUFLLENBQ0hOLE1BQU8sS0FDUHNSLFVBQVcsYUFDWG5LLE1BQU8sY0FDUHJELFFBQVMsTUFFWHZELElBQUssQ0FDSFAsTUFBTyxLQUNQc1IsVUFBVyxhQUNYbkssTUFBTyxtQkFDUHJELFFBQVMsTUFFWHRELElBQUssQ0FDSFIsTUFBTyxLQUNQc1IsVUFBVyxhQUNYbkssTUFBTyxvQkFDUHJELFFBQVMsTUFFWHJELElBQUssQ0FDSFQsTUFBTyxLQUNQc1IsVUFBVyxhQUNYbkssTUFBTyxzQkFDUHJELFFBQVMsTUFFWHBELElBQUssQ0FDSFYsTUFBTyxLQUNQc1IsVUFBVyxhQUNYbkssTUFBTyxlQUNQckQsUUFBUyxNQUVYbkQsSUFBSyxDQUNIWCxNQUFPLEtBQ1BzUixVQUFXLGFBQ1huSyxNQUFPLG1CQUNQckQsUUFBUyxPQUdiLEdBQUlnRyxLQUFLakUsT0FBTzZuQixnQkFDZCxJQUFLLE1BQU8vbkIsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFDaEN2SyxLQUFLakUsT0FBTzZuQixpQkFFWkEsZ0JBQWdCL25CLEtBQU8sQ0FDckJBLElBQ0EyTCxVQUFXbEssS0FBS0MsS0FBS0MsU0FBU3RILE1BQU15dEIsT0FDcEN0bUIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBU3RILE1BQU1tSCxPQUNoQ25ILE1BQU9BLE1BQU1BLE1BQ2JnZSxLQUFNOVIsS0FBSzBJLE1BQU01VSxNQUFNQSxNQUFRLElBQU0sS0FDckNtVSxRQUFTakksS0FBSzBJLE1BQU01VSxNQUFNQSxNQUFRLElBQU0sS0FDeEM4RCxRQUFTOUQsTUFBTThELFNBSXJCLE9BQU80cEIsZUFDVCxDQU1BLHNCQUFheXdCLENBQVdDLFlBS3hCLENBRUEsa0JBQUk5c0IsR0FDRixPQUFPeG5CLEtBQUt1MEMsbUJBQW1CaGdELEtBQUs0RixPQUFPQyxZQUM3QyxDQUVBLDhCQUFJbzZDLEdBQ0YsT0FBT3gwQyxLQUFLeTBDLGtCQUFrQmxnRCxLQUFLNEYsT0FBT0MsWUFBYSxlQUN6RCxDQUVBLGtCQUFJbXdCLEdBQ0YsT0FBT3ZxQixLQUFLdTBDLG1CQUFtQmhnRCxLQUFLNEYsT0FBT0UsWUFDN0MsQ0FFQSxZQUFJeWhCLEdBQ0YsT0FBS3hlLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQ3hCOEMsS0FBS2lSLE9BQU9vQixTQUFTQyxLQUFPdFMsS0FBS21TLGdCQUFnQkUsU0FBU0MsTUFEZHRTLEtBQUswRixHQUUxRCxDQUVBLHdCQUFNMmlCLENBQW9CcXNCLFVBQVcsRUFBTXQyQyxTQUFXLEdBU3BELElBQUltRSxPQUFTLEtBQ2IsTUFBTW95QyxxQkFBdUJELFNBQ3pCcDNDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUMxQkksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNkJBQzlCLEdBQTZCLFNBQXpCeTNDLHFCQUFpQyxDQUNuQ3B5QyxPQUFTLENBQ1AxSSxRQUFRLEVBQ1JELE9BQU8sRUFDUDBULFlBQWEsTUFFZixNQUFNc25DLG1CQUFxQnQzQyxLQUFLdTNDLE9BQU8zM0MsSUFBSXkzQyxzQkFFM0MsR0FEQXB5QyxPQUFPdXlDLGdCQUFrQkYsbUJBQW1CenpDLFlBQ0QsSUFBaENvQixPQUFPdXlDLFVBQVVweUMsUUFBUSxHQUFvQixDQUN0RCxHQUNFeU4sTUFBTTRrQyxtQkFBbUJDLFdBQ3pCenlDLE9BQU91eUMsVUFBVXB5QyxRQUFRLEdBQUdyRSxLQUM1QixDQUNBLE1BQU00SCxLQUFPM0ksS0FBSzZRLE1BQU1qUixJQUFJcUYsT0FBT3V5QyxVQUFVcHlDLFFBQVEsR0FBR3V5QyxZQUN4RCxRQUFvQixJQUFUaHZDLEtBQXNCLENBQzNCQSxLQUFLbEssUUFBUXNDLE1BQU14RSxTQUFRMEksT0FBTzFJLFFBQVMsR0FDM0NvTSxLQUFLbEssUUFBUXNDLE1BQU16RSxRQUFPMkksT0FBTzNJLE9BQVEsR0FDN0MySSxPQUFPK0ssWUFBYyxHQUFHckgsS0FBSzdQLGNBQWdCb1gsV0FBV0MsV0FDdER4SCxLQUFLbEssT0FBT3VSLFlBQVlwWCxNQUN4QixDQUFFb00sT0FBTyxJQUVYQyxPQUFPbk0sS0FBTzZQLEtBQUs3UCxLQUNuQixNQUFNOCtDLFNBQVdqdkMsS0FBS2t2QyxrQkFDZkQsU0FBUzdDLFVBQ1ZyeUMsS0FBSzVDLHdCQUF3QixPQUFRLENBQUM4M0MsVUFDOUMsTUFDRW5zQyxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLQyxTQUFTLHlDQUd6QixDQUVFMlMsTUFBTTRrQyxtQkFBbUJLLE9BQ3pCN3lDLE9BQU91eUMsVUFBVXB5QyxRQUFRLEdBQUdyRSxPQUU1QmtFLE9BQU8rSyxrQkFBb0JFLFdBQVdDLFdBQ3BDbEwsT0FBT3V5QyxVQUFVcHlDLFFBQVEsR0FBRzJ5QyxLQUM1QixDQUFFL3lDLE9BQU8sSUFHZixNQUNFeUcsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBS0MsU0FBUywwQ0FHekIsQ0FHQSxPQUFLazNDLFVBRUwxMEMsS0FBS29yQixhQUFhNzJCLEtBQUs0RixPQUFPQyxZQUFhLENBQ3pDczZDLFNBQ0F0MkMsV0FNS21FLFFBVmVBLE1BV3hCLENBZUEsaUJBQU8reUMsQ0FDTHh1QyxVQUNBNVEsT0FDQSxRQUNXLEVBQUssTUFDUCxFQUFJLFFBQ0YsRUFBSyxLQUNSLEVBQUssZ0JBQ00sR0FDZixDQUFDLEdBRUwsTUFBTW9QLEtBQU8sQ0FDWGxQLEtBQU0wUSxVQUNOekksS0FBTSxRQUNOdEMsT0FBUSxDQUNON0YsTUFDQTRRLFVBQ0FHLGVBQWdCLEdBQ2hCSixXQUFZLENBQ1Y3UCxTQUFTLEVBQ1RDLE9BQ0FDLEtBQ0FDLFVBT04sSUFIWSxJQUFSdU8sTUFDRkosS0FBS0ksSUFBTUEsTUFFVSxJQUFuQnVCLGVBQTBCLENBQzVCLE1BQU1GLE1BQVE1QixTQUFTNkIsaUJBQWlCRixVQUFXRyxnQkFDbkQzQixLQUFLdkosT0FBT2tMLGVBQWlCRixNQUFNRSxlQUNuQzNCLEtBQUt2SixPQUFPK0ssVUFBWUMsTUFBTUQsVUFDOUJ4QixLQUFLbFAsS0FBTzJRLE1BQU0zUSxLQUNsQmtQLEtBQUt2SixPQUFPOEssV0FBVzdQLFNBQVUsQ0FDbkMsQ0FDQSxPQUFPc08sSUFDVCxDQWtDQSxpQkFBTWl3QyxDQUFhenVDLFVBQVc1USxNQUFPcy9DLFdBQVksR0FDL0MsTUFBTWx3QyxLQUFPNHFCLFNBQVNvbEIsV0FBV3h1QyxVQUFXNVEsT0FJNUMsYUFIc0I4SixLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ2tJLE1BQU8sQ0FDakVtd0MsWUFBYUQsV0FHakIsQ0FFQSx1QkFBTUUsQ0FBbUJ0L0MsS0FBTW9RLFVBQVcsRUFBT2lFLEtBQU8sTUFHdEQsTUFBTWtyQyxnQkFBa0I3VCxzQkFBc0JweEIsT0FDNUMsR0FDQXBULEtBQUtDLEtBQUtDLFNBQ1JnSixTQUNJLGlDQUNBLG1DQUVOLEVBQ0FwUSxNQUVGLElBQWtCLElBQWR1L0MsVUFDRixPQUVGLE1BQU16L0MsTUFBUWdHLE9BQU95NUMsVUFBVXo0QyxJQUFJLGVBQzdCNkosTUFBUTVCLFNBQVM2QixpQkFDckI1USxLQUNBa0gsS0FBS0MsS0FBS0MsU0FDUmdKLFNBQ0ksaUNBQ0Esb0NBR0ZsQixLQUFPLENBQ1hsUCxLQUFNMlEsTUFBTTNRLEtBQ1ppSSxLQUFNLFFBQ050QyxPQUFRLENBQ04wTyxLQUFNM08sTUFBTTVGLE9BQVMsRUFBSUEsTUFDekI2eUIsWUFBYSxDQUNYNnNCLFNBQVUsS0FDVkMsV0FBWSxLQUNaQyxVQUFXLEtBQ1g5c0IsV0FBWSxNQUVkbGlCLFVBQVdDLE1BQU1ELFVBQ2pCRyxlQUFnQkYsTUFBTUUsZUFDdEJKLFdBQVksQ0FDVjdQLFNBQVMsRUFDVEksVUFBV29QLFNBQ1huUCxRQUFTbVAsU0FDVHJQLFFBQVEsV0FJUjZJLEtBQUs1Qyx3QkFBd0IsT0FBUSxDQUFDa0ksTUFBTyxDQUNqRG13QyxhQUFjaHJDLE9BR2hCLE9BRGN6SyxLQUFLcTlCLGdCQUFnQmpuQyxNQUN0QixFQUNmLENBS0Esa0JBQU1xOEMsR0FDSixHQUFrQixhQUFkenlDLEtBQUszQixLQUFxQixPQUM5QixHQUFJMkIsS0FBS3NuQyxhQUFhLGVBQWdCLE9BTXRDLEdBQXNCLElBSFB0bkMsS0FBS3E5QixnQkFDbEIvL0IsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUt5Ryx3QkFFZjRGLE9BQWMsQ0FFdkIsSUFDRSxNQUFNbUcsTUFBUTVCLFNBQVM2QixpQkFDckIxSixLQUFLQyxLQUFLQyxTQUFTakosS0FBS3lHLHVCQUN4QnNDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLMEcsNkJBRXBCcUssS0FBTyxDQUNYakgsS0FBTSxRQUNOakksS0FBTTJRLE1BQU0zUSxLQUNaMkYsT0FBUSxDQUNOME8sS0FBTSxFQUNOdlUsTUFBTyxLQUNQNFEsVUFBV0MsTUFBTUQsVUFDakJHLGVBQWdCRixNQUFNRSxlQUN0QkosV0FBWSxDQUNWMVAsUUFBUSxFQUNSQyxVQUFVLEVBQ1ZKLFNBQVMsR0FFWGtJLE1BQU8sQ0FBQyxJQUdOK0ksWUFBY2pJLEtBQUs1Qyx3QkFBd0IsT0FBUSxDQUFDa0ksTUFBTyxDQUMvRG13QyxhQUFhLElBR1RNLGFBQWUvMUMsS0FBSzVDLHdCQUN4QixPQUNBLENBQ0UsQ0FDRWhILEtBQU0sZ0JBQ05pSSxLQUFNLFNBQ050QyxPQUFRLENBQ051UixZQUFhLENBQ1hwWCxNQUFPLDRCQUNQKzFCLEtBQU0sNkJBRVIrcEIsUUFBUyxTQUNUbnZDLFdBQVksQ0FDVnhPLE1BQU0sRUFDTkMsTUFBTSxNQUtkLENBQUVtOUMsYUFBYSxJQUVqQixHQUFJeHRDLE1BQU1ySCxPQUFTLEdBQUttMUMsT0FBT24xQyxPQUFTLEVBQUcsQ0FDekMsTUFBTXExQyxjQUFnQmoyQyxLQUFLbU8sTUFBTWpSLElBQUk2NEMsT0FBTyxHQUFHN25DLFVBQ3pDK25DLGNBQWMvM0MsT0FBTyxDQUN6Qix1QkFBd0IrSixNQUFNLEdBQUdpRyxHQUNqQyx5QkFBMEJqRyxNQUFNLEdBQUc3UixNQUV2QyxDQUNGLENBQUUsTUFBTzRVLEtBQ1BHLFFBQVF1UyxNQUFNLGtCQUFvQjFTLElBQUk4RSxRQUN4QyxPQUVNOVAsS0FBS2syQyxhQUFhLGNBRTFCLENBQ0YsQ0FFQSxnQkFBTUMsQ0FBWWpHLFNBQVVrRyxTQUFXLEVBQUdaLFdBQVksR0FDcEQsTUFBTWx3QyxLQUFPLENBQ1hsUCxLQUFNODVDLFNBQ043eEMsS0FBTSxPQUNOdEMsT0FBUSxDQUNOcTZDLFdBTUosYUFIc0JwMkMsS0FBSzVDLHdCQUF3QixPQUFRLENBQUNrSSxNQUFPLENBQ2pFbXdDLFlBQWFELFdBR2pCLENBRUEscUJBQU1hLENBQWlCOTVDLE1BQVEsTUFDN0IsTUFBTWk1QyxXQUFZajVDLFFBQVNBLE1BQU02eUIsU0FDakMsSUFBS3B2QixLQUFLczJDLGdCQUFnQmg1QyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS29HLGNBQ2hELE9BQU9xRixLQUFLdTJDLFdBQVdqNUMsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUtvRyxhQUFjNjZDLFdBRS9ELElBQUluNEIsTUFBUSxFQUNSNnlCLFNBQVc1eUMsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUtvRyxhQUFlLElBQU0waUIsTUFDNUQsS0FBT3JkLEtBQUtzMkMsZ0JBQWdCcEcsV0FDMUI3eUIsUUFDQTZ5QixTQUFXNXlDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLb0csYUFBZSxJQUFNMGlCLE1BRTFELE9BQU9yZCxLQUFLdTJDLFdBQVdyRyxTQUFVc0YsVUFDbkMsQ0FFQSxnQkFBTWUsQ0FBWXJHLFNBQVVzRixXQUFZLEdBQ3RDLE1BQU1sd0MsS0FBTyxDQUNYbFAsS0FBTTg1QyxTQUNON3hDLEtBQU0sT0FDTnRDLE9BQVEsQ0FBQyxHQUtYLGFBSHNCaUUsS0FBSzVDLHdCQUF3QixPQUFRLENBQUNrSSxNQUFPLENBQ2pFbXdDLFlBQWFELFdBR2pCLENBRUEsc0JBQU1nQixDQUFrQmo2QyxNQUFRLE1BQzlCLE1BQU1pNUMsV0FBWWo1QyxRQUFTQSxNQUFNNnlCLFNBQ2pDLElBQUtwdkIsS0FBS3MyQyxnQkFBZ0JoNUMsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUtzRyxlQUNoRCxPQUFPbUYsS0FBS3kyQyxZQUFZbjVDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLc0csY0FBZTI2QyxXQUVqRSxJQUFJbjRCLE1BQVEsRUFDUjZ5QixTQUFXNXlDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLc0csY0FBZ0IsSUFBTXdpQixNQUM3RCxLQUFPcmQsS0FBS3MyQyxnQkFBZ0JwRyxXQUMxQjd5QixRQUNBNnlCLFNBQVc1eUMsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUtzRyxjQUFnQixJQUFNd2lCLE1BRTNELE9BQU9yZCxLQUFLeTJDLFlBQVl2RyxTQUFVc0YsVUFDcEMsQ0FFQSxpQkFBT2tCLENBQVl4RyxVQU1qQixNQUxhLENBQ1g5NUMsS0FBTTg1QyxTQUNON3hDLEtBQU0sUUFDTnRDLE9BQVEsQ0FBQyxFQUdiLENBRUEsaUJBQU0wNkMsQ0FBYXZHLFNBQVVzRixXQUFZLEdBQ3ZDLE1BQU1sd0MsS0FBTzRxQixTQUFTd21CLFdBQVd4RyxVQUlqQyxhQUhzQmx3QyxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ2tJLE1BQU8sQ0FDakVtd0MsWUFBYUQsV0FHakIsQ0FFQSxzQkFBTW1CLENBQWtCcDZDLE1BQVEsTUFDOUIsTUFBTWk1QyxXQUFZajVDLFFBQVNBLE1BQU02eUIsU0FDakMsSUFBS3B2QixLQUFLczJDLGdCQUFnQmg1QyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS3FHLGVBQ2hELE9BQU9vRixLQUFLdTFDLFlBQ1ZqNEMsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUtxRyxjQUNULGNBQWRvRixLQUFLM0IsS0FBdUIsRUFBSSxLQUNqQ20zQyxXQUdKLElBQUluNEIsTUFBUSxFQUNSdlcsVUFBWXhKLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLcUcsY0FBZ0IsSUFBTXlpQixNQUM5RCxLQUFPcmQsS0FBS3MyQyxnQkFBZ0J4dkMsWUFDMUJ1VyxRQUNBdlcsVUFBWXhKLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLcUcsY0FBZ0IsSUFBTXlpQixNQUc1RCxPQUFPcmQsS0FBS3UxQyxZQUFZenVDLFVBQVcsS0FBTTB1QyxVQUMzQyxDQUVBLHFCQUFNb0IsQ0FBaUJyNkMsTUFBUSxNQUM3QixNQUFNaTVDLFdBQVlqNUMsUUFBU0EsTUFBTTZ5QixTQUNqQyxJQUFLcHZCLEtBQUtzMkMsZ0JBQWdCaDVDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLdUcsY0FDaEQsT0FBT2tGLEtBQUttMkMsV0FBVzc0QyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS3VHLGFBQWMsRUFBRzA2QyxXQUVsRSxJQUFJbjRCLE1BQVEsRUFDUjZ5QixTQUFXNXlDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLdUcsYUFBZSxJQUFNdWlCLE1BQzVELEtBQU9yZCxLQUFLczJDLGdCQUFnQnBHLFdBQzFCN3lCLFFBQ0E2eUIsU0FBVzV5QyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS3VHLGFBQWUsSUFBTXVpQixNQUUxRCxPQUFPcmQsS0FBS20yQyxXQUFXakcsU0FBVSxFQUFHc0YsVUFDdEMsQ0FFQSx1QkFBTXFCLENBQW1CdDZDLE1BQVEsS0FBTXNLLFdBQWEsQ0FBQyxHQUNuRCxNQUFNMnVDLFdBQVlqNUMsUUFBU0EsTUFBTTZ5QixTQUNqQyxJQUFJMk8sV0FBYXpnQyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS3dHLGVBQ3pDLEdBQUlpRixLQUFLczJDLGdCQUFnQmg1QyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS3dHLGdCQUFpQixDQUNoRSxJQUFJc2lCLE1BQVEsRUFFWixJQURBMGdCLFdBQWF6Z0MsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUt3RyxlQUFpQixJQUFNc2lCLE1BQ3JEcmQsS0FBS3MyQyxnQkFBZ0J2WSxhQUMxQjFnQixRQUNBMGdCLFdBQWF6Z0MsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUt3RyxlQUFpQixJQUFNc2lCLEtBRWhFLENBRUEsTUFBTS9YLEtBQU8sQ0FDWGxQLEtBQU0ybkMsV0FDTjEvQixLQUFNLFNBQ050QyxPQUFRLENBQ044SyxXQUFZLENBQUMsSUFJakIsSUFBSyxNQUFPaEwsT0FBUStELE9BQU8ySyxRQUFRaFcsS0FBS3VaLGtCQUN0Q3hJLEtBQUt2SixPQUFPOEssV0FBV2hMLEtBQ3JCK0QsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUtnTyxXQUFZaEwsT0FBUSxRQUd2RG1FLEtBQUs1Qyx3QkFBd0IsT0FBUSxDQUFDa0ksTUFBTyxDQUNqRG13QyxZQUFhRCxXQUVqQixDQUVBLHNCQUFNc0IsQ0FBa0Jwb0MsTUFBUSxNQUM5QixNQUFNcW9DLElBQU0vMkMsS0FBS2pFLE9BQU9pN0MsVUFDcEJwNEMsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT2k3QyxXQUNwQyxHQUNKRCxJQUFJNy9DLEtBQUssQ0FDUHdYLE1BQ0F4WSxNQUFPLGFBRUg4SixLQUFLOUIsT0FBTyxDQUFFLG1CQUFvQjY0QyxLQUFPLENBQUV0QixhQUFhLEdBQ2hFLENBRUEsb0JBQU13QixDQUFnQjU1QixNQUFPNU0sU0FDM0IsTUFBTXNtQyxJQUFNbjRDLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9pN0MsV0FDaERELElBQUkxNUIsT0FBT25uQixNQUFRdWEsY0FDYnpRLEtBQUs5QixPQUFPLENBQUUsbUJBQW9CNjRDLEtBQU8sQ0FBRS80QyxRQUFRLEdBQzNELENBRUEsb0JBQU1rNUMsQ0FBZ0I3NUIsTUFBTzNPLE9BQzNCLE1BQU1xb0MsSUFBTW40QyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPaTdDLFdBQ2hERCxJQUFJMTVCLE9BQU8zTyxNQUFRQSxZQUNiMU8sS0FBSzlCLE9BQU8sQ0FBRSxtQkFBb0I2NEMsS0FDMUMsQ0FFQSxzQkFBTUksQ0FBa0I5NUIsT0FDdEIsTUFBTTA1QixJQUFNbjRDLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9pN0MsV0FDaERELElBQUlyZ0IsT0FBT3JaLE1BQU8sU0FDWnJkLEtBQUs5QixPQUFPLENBQUUsbUJBQW9CNjRDLEtBQzFDLENBRUEsc0JBQU1LLENBQWtCLzVCLE9BQ3RCLEdBQWMsSUFBVkEsTUFBYSxPQUNqQixNQUFNMDVCLElBQU1uNEMsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT2k3QyxXQUNoRCxHQUFJMzVCLE9BQVMwNUIsSUFBSW4yQyxPQUFRLE9BQ3pCLE1BQU1vdUMsS0FBTytILElBQUlyZ0IsT0FBT3JaLE1BQU8sR0FBRyxHQUNsQzA1QixJQUFJcmdCLE9BQU9yWixNQUFRLEVBQUcsRUFBRzJ4QixZQUNuQmh2QyxLQUFLOUIsT0FBTyxDQUFFLG1CQUFvQjY0QyxLQUMxQyxDQUVBLHdCQUFNTSxDQUFvQmg2QixPQUN4QixNQUFNMDVCLElBQU1uNEMsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT2k3QyxXQUNoRCxHQUFJMzVCLE9BQVMwNUIsSUFBSW4yQyxPQUFTLEVBQUcsT0FDN0IsTUFBTW91QyxLQUFPK0gsSUFBSXJnQixPQUFPclosTUFBTyxHQUFHLEdBQ2xDMDVCLElBQUlyZ0IsT0FBT3JaLE1BQVEsRUFBRyxFQUFHMnhCLFlBQ25CaHZDLEtBQUs5QixPQUFPLENBQUUsbUJBQW9CNjRDLEtBQzFDLENBRUEsb0JBQU1PLENBQWdCQyxVQUNwQixNQUFNbmhELEtBQU8sVUFBWW1oRCxTQUFTeDZDLFFBQVF5NkMsZUFDcEN4M0MsS0FBSzlCLE9BQU8sQ0FBRSxDQUFDOUgsTUFBT21oRCxTQUFTcmhELE9BQ3ZDLENBc0JBLDZCQUFNa0gsQ0FBeUJxNkMsYUFBY0MsVUFBV3A0QyxTQUN0RCxNQUFNcTRDLG1CQUFxQixHQUMzQixJQUFJM1YsVUFBWSxFQUNaNFYsZUFBaUIsRUFDakI5QixXQUFZLEVBQ1pELFlBQWEsRUFDakIsSUFBSyxJQUFJdndDLFFBQVFveUMsVUFDZixPQUFRcHlDLEtBQUtqSCxNQUNYLElBQUssUUFBUyxDQUdaLEdBRkEyakMsVUFBWTE4QixLQUFLdkosT0FBTzBPLEtBQ3hCbXRDLHFCQUF1Qnp5QyxTQUFTcUYsY0FBY3hLLEtBQU1zRixNQUNsQyxjQUFkdEYsS0FBSzNCLEtBQXNCLENBRTdCLEdBQUkyQixLQUFLczJDLGdCQUFnQmh4QyxLQUFLbFAsTUFBTyxPQVFyQyxHQU5JNHJDLFdBQ0U1bEMsT0FBTzRsQyxhQUFlNWxDLE9BQU9rSixLQUFLdkosT0FBTzdGLFNBQzNDb1AsS0FBS3ZKLE9BQU83RixNQUFRMGhELGdCQUlwQjk3QyxNQUFNSSxPQUFPb0osS0FBS3ZKLE9BQU83RixRQUFTLENBQ3BDLElBQUlBLE1BQ0osSUFDRUEsYUFDUSxJQUFJNEwsS0FDUndELEtBQUt2SixPQUFPN0YsTUFDWjhKLEtBQUtnSyx3QkFDTDROLFNBQVMsQ0FBRXRWLE9BQU8sS0FDcEJHLEtBQ0osQ0FBRSxNQUFPdUksS0FDUDlVLE1BQVEsSUFDVixDQUNJQSxRQUFPb1AsS0FBS3ZKLE9BQU83RixNQUFRa00sS0FBSzBJLE1BQU01VSxPQUM1QyxDQUNGLE1BQ0VvUCxLQUFLdkosT0FBTzdGLE1BQVEsS0FHdEIsSUFBSTJoRCxTQUFVLEVBRWQsR0FBSTF5QyxTQUFTNEMsVUFBVXpDLE1BQU8sQ0FDNUIsTUFBTXd5QyxxQkFBd0J4eUMsS0FBS3ZKLE9BQU84SyxZQUFZdFAsZUFBaUIsS0FBWStOLEtBQUt2SixPQUFPOEssWUFBWXBQLGFBQzNHLElBQUlzVSxVQUFZLEdBQ2hCLE1BQU11TCxNQUFRaGEsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTTQwQix1QkFBdUJ6eUMsTUFNM0QsR0FMSWdTLFFBQ0Z2TCxpQkFBbUJ6TyxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNNjBCLG1CQUFtQixDQUFFQyxZQUFhLElBQUl0d0MsT0FBTyxJQUFNQyxjQUFjQyxZQUFZeVAsT0FBUyxPQUFRalosS0FBTSxPQUFRaEksUUFBTzRQLE9BQ2xKQSxLQUFLbEssT0FBTzhLLFlBQVk3UCxVQUFXLEtBQVlpUCxLQUFLbEssT0FBTzhLLFlBQVl0UCxlQUE0QjBPLEtBQUtsSyxPQUFPOEssWUFBWXBQLGdCQUduSTZOLEtBQUt2SixRQUFRbUQsT0FBTzIyQyxZQUFjdndDLEtBQUt2SixRQUFRbUQsT0FBTzQyQyxVQUFXLENBQ25FLE1BQU1vQyxlQUFpQmw0QyxLQUFLNmpCLE9BQU94dEIsUUFBTzhoRCxNQUNuQ0EsR0FBR3A4QyxPQUFPa0wsbUJBRWIzQixLQUFLdkosUUFBUW1ELE9BQU8yMkMsYUFDcEJzQyxHQUFHcDhDLE9BQU9tRCxPQUFPMjJDLGdCQUtqQnZ3QyxLQUFLdkosUUFBUW1ELE9BQU80MkMsWUFDcEJxQyxHQUFHcDhDLE9BQU9tRCxPQUFPNDJDLFlBS2pCeHdDLEtBQUt2SixPQUFPa0wsZUFBZW14QyxzQkFDM0JELEdBQUdwOEMsT0FBT2tMLGVBQWVteEMsd0JBRzdCLEdBQUlGLGVBQWV0M0MsT0FBUyxFQUMxQixHQUFJbUwsVUFBVW5MLE9BQVMsRUFBRyxDQUN4QixJQUFLLElBQUk0ZixFQUFJMDNCLGVBQWV0M0MsT0FBUyxFQUFHNGYsR0FBSyxFQUFHQSxJQUFLLENBQ25ELE1BQU14UyxNQUFRakMsVUFBVXNzQyxXQUFVcHlDLE1BQ3pCQSxLQUFLN1AsT0FBUzhoRCxlQUFlMTNCLEdBQUdwcUIsTUFBUTZQLEtBQUsvRyxPQUFPd0MsTUFBTWt4QyxXQUFXMWtDLEtBQU9ncUMsZUFBZTEzQixHQUFHdGhCLE9BQU93QyxNQUFNa3hDLFdBQVcxa0MsS0FFM0hGLE9BQVMsR0FDWGpDLFVBQVUycUIsT0FBTzFvQixNQUFPLEVBRTVCLENBQ0FqQyxVQUFZQSxVQUFVQyxPQUFPa3NDLGVBQy9CLE1BQ0Vuc0MsVUFBWW1zQyxjQUdsQixDQUNJbnNDLFVBQVVuTCxPQUFTLEdBQ3JCbUwsVUFBVUksS0FBS3ZFLGNBQWN3RSxlQUUvQixNQUFNdXBDLGdCQUFrQnpULGdDQUFnQ3h4QixPQUFPLENBQzdEbVQsT0FBUTlYLFVBQ1JzMkIsWUFBY3lWLHFCQUF1Qnh5QyxLQUFLdkosT0FBTzhLLFlBQVl0UCxlQUFnQixHQUM3RStxQyxlQUFpQmg5QixLQUFLdkosT0FBTzhLLFlBQVlyUCxnQkFBaUIsRUFDMUR1cUMsbUJBQW9CejhCLEtBQUt2SixPQUFPa0wsZUFDaEM1SixNQUFPaUksS0FBS2xQLEtBQ1o0ckMsVUFBVzE4QixLQUFLdkosT0FBTzBPLE9BRXpCLEdBQUk3SyxPQUFPQyxVQUFVQyxlQUFlakgsS0FBSzg4QyxVQUFXLFlBQ2xELEdBQUlBLFVBQVVyZ0MsU0FBVSxDQUN0QixNQUFNZ2pDLGFBQWV0NEMsS0FBS21PLE1BQU1qUixJQUM5Qnk0QyxVQUFVcmdDLFVBRVosR0FBSWdqQyxhQUFjLENBQ2hCLE1BQU05cEIsUUFBVSxDQUFDLEVBQ1hscEIsS0FBS3ZKLE9BQU84SyxZQUFZclAsZUFDQSxLQUF4Qm0rQyxVQUFVM1QsWUFDWjRWLGVBQWlCakMsVUFBVTNULFVBQzNCeFQsUUFBUSxnQkFBa0JvcEIsZ0JBRzlCLElBQUssTUFBTy83QyxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFRakYsS0FBS3ZKLE9BQU9tRCxPQUNoRGhKLFFBQ0ZzNEIsUUFBUSxnQkFBZ0IzeUIsUUFBUyxHQUdqQytELE9BQU9tRSxLQUFLeXFCLFNBQVM1dEIsT0FBUyxJQUNoQzR0QixRQUFRNmpCLElBQU1pRyxhQUFhcHFDLFNBQ3JCbE8sS0FBS3U0Qyx3QkFBd0IsT0FBUSxDQUFDL3BCLFdBRTlDbHBCLEtBQUtsUCxLQUFPK08sU0FBUzJDLG1CQUFtQnd3QyxjQUN4Q1QsU0FBVSxDQUNaLEtBQU8sQ0FDTCxNQUFNVyxTQUFXenNDLFVBQVVyTSxNQUFLOGdCLEdBQUtBLEVBQUV0UyxLQUFPeW5DLFVBQVVyZ0MsV0FDeEQsR0FBSWtqQyxTQUFVLENBQ1osTUFBTXQ1QyxNQUFRb0csS0FBS3ZKLFFBQVFtRCxNQUNyQnU1QyxTQUFZbnpDLEtBQUt2SixPQUFPOEssWUFBWXJQLGdCQUFpQixFQUMzRDhOLEtBQU8xRyxRQUFRQyxNQUFNd08sVUFBVW1yQyxVQUMvQixJQUFLLE1BQU8zOEMsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUXJMLE9BQ3BDaEosUUFDRm9QLEtBQUt2SixPQUFPbUQsTUFBTXJELE1BQU8sR0FHekI0OEMsV0FDMEIsS0FBeEI5QyxVQUFVM1QsWUFDWjE4QixLQUFLdkosT0FBTzBPLEtBQU9rckMsVUFBVTNULFdBRS9CQSxVQUFZMlQsVUFBVTNULFVBQ3RCNFYscUJBQXVCenlDLFNBQVNxRixjQUFjeEssS0FBTXNGLE1BRXhELENBQ0YsQ0FDRixLQUFPLENBQ0wsTUFBTXlCLE1BQVE1QixTQUFTNkIsaUJBQ3JCMnVDLFVBQVV2L0MsS0FDVmtQLEtBQUt2SixPQUFPa0wsZ0JBRVIzQixLQUFLdkosT0FBTzhLLFlBQVlyUCxnQkFDQSxLQUF4Qm0rQyxVQUFVM1QsWUFDWjE4QixLQUFLdkosT0FBTzBPLEtBQU9rckMsVUFBVTNULFdBRS9CQSxVQUFZMlQsVUFBVTNULFVBQ3RCNFYscUJBQXVCenlDLFNBQVNxRixjQUFjeEssS0FBTXNGLE9BRXREQSxLQUFLdkosT0FBTytLLFVBQVlDLE1BQU1ELFVBQzlCeEIsS0FBS2xQLEtBQU8yUSxNQUFNM1EsSUFDcEIsQ0FFSixDQUVJeWhELFVBQ0V6N0MsT0FBTzRsQyxhQUFlNWxDLE9BQU93N0Msa0JBQy9CdHlDLEtBQUt2SixPQUFPME8sS0FBT210QyxnQkFHckJELG1CQUFtQnpnRCxLQUFLMEgsUUFBUUMsTUFBTXdPLFVBQVUvSCxRQUVsRCxLQUNGLENBRUEsSUFBSyxTQUNILEdBQWtCLGNBQWR0RixLQUFLM0IsS0FBc0IsQ0FDN0IsTUFBTXE2QyxVQUFZcHpDLEtBQUt2SixRQUFRa00sT0FBT2dHLE1BQU03WCxLQUM1QyxHQUFJc2lELFVBQVcsQ0FDYixJQUFJendDLE1BQVFqSSxLQUFLcTlCLGdCQUFnQnFiLFdBQVcsR0FDNUMsSUFBS3p3QyxNQUFPLENBQ1YsTUFBTTdSLEtBQU9zaUQsVUFBVTd5QyxNQUFNLGVBQ3pCNnlDLFVBQVU3eUMsTUFBTSxlQUFlLEdBQy9CNnlDLFVBQ0osR0FBSXRpRCxLQUFLeVAsTUFBTSxjQUFlLENBQzVCLE1BQU04eUMsc0JBQXdCcjdDLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU15MUIsY0FBYyxDQUFFejFCLE1BQU8vc0IsS0FBTXlpRCxhQUFhLElBQzFGRixnQkFBZ0IvM0MsZUFDWlosS0FBSzg0QyxTQUFTLENBQUNILGdCQUFnQixLQUNyQzF3QyxZQUFjakksS0FBS3E5QixnQkFBZ0JxYixXQUFXLEdBRWxELENBQ0EsSUFBS3p3QyxNQUFPLENBQ1YsTUFBTXV3QyxTQUFXbDdDLEtBQUs2USxNQUFNek8sTUFDMUJ1RyxNQUFzQixVQUFkQSxLQUFLNUgsT0FDVjRILEtBQUs3UCxLQUFLZ2lELHNCQUF3QmhpRCxLQUFLZ2lELHFCQUF1Qm55QyxLQUFLbEssT0FBTytLLFdBQVdzeEMsc0JBQXdCaGlELEtBQUtnaUQsNEJBRS9GLElBQWJJLGdCQUNIeDRDLEtBQUs4NEMsU0FBUyxDQUFDTixXQUNyQnZ3QyxZQUFjakksS0FBS3E5QixnQkFBZ0JxYixXQUFXLElBRzlDendDLFlBQWNqSSxLQUFLMDFDLGtCQUNqQnQvQyxPQUNFa1AsS0FBS3ZKLE9BQU84SyxZQUFZalAsS0FHaEMsQ0FDRixDQUNJcVEsUUFBTzNDLEtBQUt2SixPQUFPa00sTUFBTWdHLEtBQUtDLEdBQUtqRyxNQUFNaUcsR0FDL0MsQ0FFQSxNQUFNNnFDLFlBQWN6ekMsS0FBS3ZKLFFBQVFrTSxPQUFPbUcsWUFBWWhZLEtBQ3BELEdBQUkyaUQsWUFBYSxDQUNmLElBQUk5d0MsTUFBUWpJLEtBQUtxOUIsZ0JBQWdCMGIsYUFBYSxHQUM5QyxJQUFLOXdDLE1BQU8sQ0FDVixNQUFNN1IsS0FBTzJpRCxZQUFZbHpDLE1BQU0sZUFDM0JrekMsWUFBWWx6QyxNQUFNLGVBQWUsR0FDakNrekMsWUFDSixHQUFJM2lELEtBQUt5UCxNQUFNLGNBQWUsQ0FDNUIsTUFBTTh5QyxzQkFBd0JyN0MsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTXkxQixjQUFjLENBQUV6MUIsTUFBTy9zQixLQUFNeWlELGFBQWEsSUFDMUZGLGdCQUFnQi8zQyxlQUNaWixLQUFLODRDLFNBQVMsQ0FBQ0gsZ0JBQWdCLEtBQ3JDMXdDLFlBQWNqSSxLQUFLcTlCLGdCQUFnQjBiLGFBQWEsR0FFcEQsQ0FDQSxJQUFLOXdDLE1BQU8sQ0FDVixNQUFNdXdDLFNBQVdsN0MsS0FBSzZRLE1BQU16TyxNQUMxQnVHLE1BQXNCLFVBQWRBLEtBQUs1SCxPQUNWNEgsS0FBSzdQLEtBQUtnaUQsc0JBQXdCaGlELEtBQUtnaUQscUJBQXVCbnlDLEtBQUtsSyxPQUFPK0ssV0FBV3N4QyxzQkFBd0JoaUQsS0FBS2dpRCw0QkFFL0YsSUFBYkksZ0JBQ0h4NEMsS0FBSzg0QyxTQUFTLENBQUNOLFdBQ3JCdndDLFlBQWNqSSxLQUFLcTlCLGdCQUFnQjBiLGFBQWEsSUFHaEQ5d0MsWUFBY2pJLEtBQUswMUMsa0JBQ2pCdC9DLE9BQ0VrUCxLQUFLdkosT0FBTzhLLFlBQVlqUCxLQUdoQyxDQUNGLENBQ0lxUSxRQUFPM0MsS0FBS3ZKLE9BQU9rTSxNQUFNbUcsV0FBV0YsR0FBS2pHLE1BQU1pRyxHQUNyRCxDQUNGLENBRUF5cEMsbUJBQW1CemdELEtBQUswSCxRQUFRQyxNQUFNd08sVUFBVS9ILE9BQ2hELE1BR0YsSUFBSyxRQUFTLENBQ1osR0FBSUEsS0FBS3ZKLE9BQU9pOUMsdUJBQXdCLENBQ3RDMXpDLEtBQUt2SixPQUFPNm5CLGdCQUFnQjRkLEtBQU8sQ0FBQyxFQUNwQ2w4QixLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLbHJDLElBQU0wSixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLanJDLElBQU15SixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLaHJDLElBQU13SixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLL3FDLElBQU11SixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLOXFDLElBQU1zSixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLN3FDLElBQU1xSixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLNXFDLElBQU1vSixLQUFLaTVDLGtCQUFrQixPQUM5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLM3FDLElBQU1tSixLQUFLaTVDLGtCQUFrQixPQUU5RDN6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLMFgsS0FBTyxDQUFDLEVBQ3pDNXpDLEtBQUt2SixPQUFPNm5CLGdCQUFnQjRkLEtBQUswWCxLQUFLaGpELE1BQVE0RixNQUFNa0UsS0FBS2s1QyxNQUNyRCxLQUNBbDVDLEtBQUtrNUMsS0FDVDV6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLMFgsS0FBSzc3QyxNQUFRQyxLQUFLQyxLQUFLQyxTQUN0RCxhQUVGOEgsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCNGQsS0FBSzBYLEtBQUsxeEMsVUFBWWxLLEtBQUtDLEtBQUtDLFNBQzFELGFBR0c4SCxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsU0FDL0I4RixLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBUyxDQUFDLEdBRXhDOEYsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCcGtCLE9BQU9sSixJQUNqQ2dQLEtBQUt2SixPQUFPNm5CLGdCQUFnQjRkLEtBQUtsckMsSUFBSUosTUFDdkNvUCxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBT2pKLElBQ2pDK08sS0FBS3ZKLE9BQU82bkIsZ0JBQWdCNGQsS0FBS2pyQyxJQUFJTCxNQUN2Q29QLEtBQUt2SixPQUFPNm5CLGdCQUFnQnBrQixPQUFPaEosSUFDakM4TyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLaHJDLElBQUlOLE1BQ3ZDb1AsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCcGtCLE9BQU8vSSxJQUNqQzZPLEtBQUt2SixPQUFPNm5CLGdCQUFnQjRkLEtBQUsvcUMsSUFBSVAsTUFDdkNvUCxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzlJLElBQ2pDNE8sS0FBS3ZKLE9BQU82bkIsZ0JBQWdCNGQsS0FBSzlxQyxJQUFJUixNQUN2Q29QLEtBQUt2SixPQUFPNm5CLGdCQUFnQnBrQixPQUFPN0ksSUFDakMyTyxLQUFLdkosT0FBTzZuQixnQkFBZ0I0ZCxLQUFLN3FDLElBQUlULE1BQ3ZDb1AsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCcGtCLE9BQU81SSxJQUNqQzBPLEtBQUt2SixPQUFPNm5CLGdCQUFnQjRkLEtBQUs1cUMsSUFBSVYsTUFDdkNvUCxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzNJLElBQ2pDeU8sS0FBS3ZKLE9BQU82bkIsZ0JBQWdCNGQsS0FBSzNxQyxJQUFJWCxNQUN2Q29QLEtBQUt2SixPQUFPNm5CLGdCQUFnQnBrQixPQUFPMDVDLEtBQ2pDNXpDLEtBQUt2SixPQUFPNm5CLGdCQUFnQjRkLEtBQUswWCxLQUFLaGpELE1BQ3BDb1AsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCNmQsT0FBT0UsUUFDckNyOEIsS0FBS3ZKLE9BQU8yUyxNQUFRcFIsS0FBS0MsS0FBS0MsU0FBUyxvQkFFdkM4SCxLQUFLdkosT0FBTzJTLE1BQVFwUixLQUFLQyxLQUFLQyxTQUFTLG1CQUV6QzhILEtBQUt2SixPQUFPOGxDLGdCQUNpQyxPQUEzQ3Y4QixLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBT2xKLEtBQ1EsT0FBM0NnUCxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBT2pKLEtBQ1EsT0FBM0MrTyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBT2hKLEtBQ1EsT0FBM0M4TyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTy9JLEtBQ1EsT0FBM0M2TyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzlJLEtBQ1EsT0FBM0M0TyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzdJLEtBQ1EsT0FBM0MyTyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzVJLEtBQ1EsT0FBM0MwTyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzNJLEtBR3JDLFVBRHFCNnBDLGlCQUFpQmh3QixPQUFPcEwsS0FBS3ZKLFFBd0NoRCxPQXZDVSxDQUNWLE1BQU13MkIsV0FBYSxDQUFDLEVBQ3BCLElBQUssTUFBTTEyQixNQUFPLENBQ2hCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsT0FFSXlKLEtBQUt2SixPQUFPNm5CLGdCQUFnQnBrQixPQUFPM0QsT0FDckMwMkIsV0FBVywwQkFBMEIxMkIsYUFDbkN5SixLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzNELEtBQ3JDMDJCLFdBQVcsMEJBQTBCMTJCLGVBQ25DeUosS0FBS3ZKLE9BQU82bkIsZ0JBQWdCeE0sTUFBTXZiLE1BR3BDeUosS0FBS3ZKLE9BQU82bkIsZ0JBQWdCcGtCLE9BQU8wNUMsT0FDckMzbUIsV0FBVyw0QkFDVGp0QixLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzA1QyxNQUVuQzV6QyxLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzVJLE1BQ3JDMjdCLFdBQVcsNEJBQ1RqdEIsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCcGtCLE9BQU81SSxJQUNyQzI3QixXQUFXLGlDQUFtQ253QixLQUFLMEksTUFDakR4RixLQUFLdkosT0FBTzZuQixnQkFBZ0Jwa0IsT0FBTzVJLElBQU0sR0FFM0MyN0IsV0FBVyx5QkFBMkJud0IsS0FBSzBJLE1BQ3pDeEYsS0FBS3ZKLE9BQU82bkIsZ0JBQWdCcGtCLE9BQU81SSxJQUFNLFVBR3ZDb0osS0FBSzlCLE9BQU9xMEIsV0FBWSxDQUFFa2pCLGFBQWEsVUFDdkN6MUMsS0FBSzlCLE9BQU8sQ0FDaEIsMEJBQTJCOEIsS0FBS3N6QyxTQUNoQyx3QkFBeUJ0ekMsS0FBS3N6QyxVQUM3QixDQUFFbUMsYUFBYSxHQUNwQixDQUdGLENBQ0EsTUFBTTBELElBQU12NUMsT0FBTzJLLFFBQVFqRixLQUFLcEcsT0FBT3dDLE1BQU1reEMsV0FBV2xzQyxNQUFNclEsUUFBT21LLEdBQUtBLEVBQUUsS0FBSXdELEtBQUl4RCxHQUFLQSxFQUFFLEtBQ3JGMk4sWUFBYzdRLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU1pMkIsZ0JBQWdCLENBQUU5WSxTQUFVaDdCLEtBQUt2SixPQUFPb1MsTUFBT2dyQyxTQUF3QixJQUFYQSxJQUFJLElBQXFCQSxJQUFJLEtBQzdIdDFCLE9BQVMxVixNQUFNOVgsUUFBT2dqRCxJQUFrQixVQUFaQSxHQUFHaDdDLE9BQy9CaTdDLFlBQWNuckMsTUFBTTlYLFFBQU9nakQsSUFBa0IsVUFBWkEsR0FBR2g3QyxPQUcxQyxTQUZNMkIsS0FBS3U1QyxlQUFlMTFCLGNBQ3BCN2pCLEtBQUs4NEMsU0FBU1EsYUFDaEJoOEMsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMkJBQ3RCOEMsS0FBSzlCLE9BQU8sQ0FBRSxtQkFBb0JvSCxLQUFLdkosT0FBT3k5QyxXQUFhLENBQUUvRCxhQUFhLFNBRWhGLElBQUssTUFBTWdFLGVBQWVuMEMsS0FBS3ZKLE9BQU8yOUMsYUFFakMxNUMsS0FBS2pFLE9BQU9pN0MsV0FBV3QzQyxNQUN0Qnk0QyxJQUFNc0IsY0FBZ0J0QixHQUFHenBDLFNBRTNCK3FDLG1CQUVNejVDLEtBQUs4MkMsaUJBQWlCMkMsYUFLbEMsTUFBTUUsU0FBVy82QyxRQUFRQyxNQUFNNmEsWUFBWTFaLEtBQUtqRSxPQUFPNDlDLFNBQVUvNkMsUUFBUUMsTUFBTXdPLFVBQVUvSCxLQUFLdkosT0FBTzQ5QyxXQUMvRjU3QyxNQUFRaUMsS0FBS2pDLE1BQ25CLElBQUl5b0IsT0FBUSxFQUNaLEdBQ0VBLFlBQWMsSUFBSXRLLFNBQVFoQixTQUFXdUcsWUFBVyxLQUM5Q3ZHLFFBQVFuZCxNQUFNNjdDLE9BQU0sR0FDbkIsYUFDSXB6QixRQUFVcXpCLFlBQVlDLGNBQWNDLGlCQUN2Qy81QyxLQUFLOUIsT0FBTyxDQUNoQixrQkFBbUJ5N0MsV0FFckJLLE1BQU1uaEQsS0FBSyxxQkFDWCxLQUNGLENBQ0EsSUFBSyxZQUNILEdBQWtCLGNBQWRtSCxLQUFLM0IsS0FBc0IsQ0FFN0IsR0FBSTJCLEtBQUs4MUMsVUFBVyxDQUNsQixJQUFJbUUsZ0JBQWlCLEVBV3JCLFNBVk14bEIsT0FBT3lsQixRQUFRLENBQ25CeHJDLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLHVCQUMxQmlULFFBQVMsTUFBTW5ULEtBQUtDLEtBQUswVyxPQUFPLDBCQUEyQixDQUN6RDdkLEtBQU00SixLQUFLNUosYUFFYitqRCxJQUFLLEtBQ0hGLGdCQUFpQixHQUVuQkcsWUFBWSxLQUVWSCxlQUNDLGFBRHFCajZDLEtBQUtpNkMsZ0JBRWpDLENBRUEsTUFBTUksV0FBYSxHQUNuQixJQUFLLE1BQU1DLFNBQVMxNkMsT0FBTzJLLFFBQVFqRixLQUFLdkosT0FBT3crQyxxQkFBc0IsQ0FDbkUsTUFBTzErQyxJQUFLM0YsT0FBU29rRCxNQUVyQixHQURBaDFDLEtBQUt2SixPQUFPdytDLG9CQUFvQjErQyxNQUFPLEVBQ25DM0YsTUFBTyxDQUNULE1BQU1rckMsS0FBT3BoQyxLQUFLaTVDLGtCQUFrQnA5QyxLQUNwQ3VsQyxLQUFLdmxDLElBQU1BLElBQ1h3K0MsV0FBV25qRCxLQUFLa3FDLEtBQ2xCLENBQ0YsQ0FFQSxJQUFJb1osT0FFSixHQUFJSCxXQUFXejVDLE9BQVMsRUFBRyxDQUN6QixNQUFNNjVDLGVBQWlCLENBQUMsRUFDeEJBLGVBQWU3MkIsZ0JBQWtCeTJCLFdBQ2pDSSxlQUFlL3JDLE1BQVFwUixLQUFLQyxLQUFLQyxTQUFTLHlCQUMxQ2c5QyxhQUFlL1osbUJBQW1CL3ZCLE9BQU8rcEMsZUFDM0MsTUFBaUMsSUFBdEJKLFdBQVd6NUMsU0FDcEI0NUMsT0FBU0gsV0FBVyxHQUFHeCtDLEtBR3pCLElBQUsyK0MsT0FBUSxPQUViLEdBREFsMUMsS0FBS3ZKLE9BQU93K0Msb0JBQW9CQyxTQUFVLEVBQ3RDbDFDLEtBQUt2SixPQUFPMitDLDJCQUEyQi9ZLFFBQVMsQ0FDbEQsSUFBSXpyQyxNQUFRZ0csT0FBT29KLEtBQUt2SixPQUFPMitDLDJCQUEyQnhrRCxPQUMxRCxHQUFJNEYsTUFBTTVGLE9BQVEsQ0FDaEIsTUFBTWtyQyxLQUFPcGhDLEtBQUtpNUMsa0JBQWtCdUIsUUFDOUJyNUMsS0FBTyxJQUFJVyxLQUNmd0QsS0FBS3ZKLE9BQU8yK0MsMkJBQTJCeGtELGFBRW5DaUwsS0FBS0EsS0FBSyxDQUFFbUIsT0FBTyxJQUN6Qm5CLEtBQUtnMUIsVUFBVSxDQUNibm1CLE9BQVExUyxLQUFLQyxLQUFLMFcsT0FDaEIsb0NBQ0EsQ0FDRTVXLE1BQU8rakMsS0FBSy9qQyxNQUNackQsUUFBU3NMLEtBQUt2SixPQUFPMitDLDJCQUEyQnhrRCxVQUl0REEsTUFBUWtyQyxLQUFLbHJDLE1BQVFpTCxLQUFLc0IsTUFBUXRCLEtBQUtzQixNQUFRMitCLEtBQUtsckMsS0FDdEQsT0FDTThKLEtBQUs5QixPQUFPLENBQ2hCLENBQUMsMEJBQTBCczhDLGdCQUFpQnRrRCxPQUVoRCxDQUdBb1AsS0FBS3ZKLE9BQU84bkIsYUFBZXZtQixLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNaTJCLGdCQUFnQixDQUFFOVksU0FBVWg3QixLQUFLdkosT0FBTzhuQixlQUNuRjdqQixLQUFLdTVDLGVBQWVqMEMsS0FBS3ZKLE9BQU84bkIsT0FBUSxhQUU5Qzh6QixtQkFBbUJ6Z0QsS0FBSzBILFFBQVFDLE1BQU13TyxVQUFVL0gsT0FDaER3d0MsV0FBWSxDQUNkLENBRUEsTUFDRixJQUFLLGFBQ0gsR0FBa0IsY0FBZDkxQyxLQUFLM0IsS0FBc0IsQ0FFN0IsR0FBSTJCLEtBQUs2MUMsV0FBWSxDQUNuQixJQUFJOEUsaUJBQWtCLEVBV3RCLFNBVk1sbUIsT0FBT3lsQixRQUFRLENBQ25CeHJDLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLHdCQUMxQmlULFFBQVMsTUFBTW5ULEtBQUtDLEtBQUswVyxPQUFPLDJCQUE0QixDQUMxRDdkLEtBQU00SixLQUFLNUosYUFFYitqRCxJQUFLLEtBQ0hRLGlCQUFrQixHQUVwQlAsWUFBWSxLQUVWTyxnQkFDQyxhQURzQjM2QyxLQUFLMjZDLGlCQUVsQyxDQUtBLEdBRkFyMUMsS0FBS3ZKLE9BQU84bkIsYUFBZXZtQixLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNaTJCLGdCQUFnQixDQUFFOVksU0FBVWg3QixLQUFLdkosT0FBTzhuQixTQUVyRjNuQixPQUFPb0osS0FBS3ZKLE9BQU82K0MsYUFBYTMzQyxLQUFPLEVBQUcsQ0FFNUMsTUFBTTQzQyxrQkFBb0J2OUMsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTTIzQixnQkFBZ0Isd0JBQXlCeDFDLEtBQUt2SixPQUFPOG5CLFFBQ3BFLElBQTdCZzNCLGtCQUFrQmo2QyxPQUNzRSxJQUF0RnRELEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU0yM0IsZ0JBQWdCLHdCQUF5Qjk2QyxLQUFLbU8sT0FBT3ZOLFNBQzdFMEUsS0FBS3ZKLE9BQU84bkIsT0FBTzNzQixLQUFLLHlCQUN4Qm9PLEtBQUt2SixPQUFPOG5CLGFBQWV2bUIsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTWkyQixnQkFBZ0IsQ0FBRTlZLFNBQVVoN0IsS0FBS3ZKLE9BQU84bkIsVUFHRCxJQUF0RnZtQixLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNMjNCLGdCQUFnQix3QkFBeUI5NkMsS0FBS21PLE9BQU92TixRQUM3RTBFLEtBQUt2SixPQUFPOG5CLE9BQU8zc0IsS0FBSzJqRCxrQkFBa0IsR0FHaEQsQ0FHQSxNQUFNRSxpQkFBbUIsQ0FBQyxFQUMxQkEsaUJBQWlCbjNCLGdCQUFrQnRlLEtBQUt2SixPQUFPaS9DLHNCQUMvQyxJQUFJdjRDLE1BQVEsRUFDUnc0QyxjQUFlLEVBQ25CLElBQUssTUFBTVgsU0FBUzE2QyxPQUFPMkssUUFDekJqRixLQUFLdkosT0FBT2kvQyx1QkFDWCxDQUNELE1BQU9uL0MsSUFBSzNGLE9BQVNva0QsTUFDZmxaLEtBQU9waEMsS0FBS2k1QyxrQkFBa0JwOUMsS0FDcENrL0MsaUJBQWlCbjNCLGdCQUFnQi9uQixLQUFLekYsS0FBT2dyQyxLQUFLL2pDLE1BQ2xEMDlDLGlCQUFpQm4zQixnQkFBZ0IvbkIsS0FBSzNGLE1BQVFrckMsS0FBS2xyQyxNQUMvQ0EsTUFBTW9mLFdBQ1J5bEMsaUJBQWlCbjNCLGdCQUFnQi9uQixLQUFLNEcsTUFDcEMyK0IsS0FBS2xyQyxNQUNMZ0csT0FBTzYrQyxpQkFBaUJuM0IsZ0JBQWdCL25CLEtBQUsxRixZQUMxQ0QsTUFBTXFxQyxTQUdUMGEsY0FBZSxFQUZmeDRDLE9BQVNzNEMsaUJBQWlCbjNCLGdCQUFnQi9uQixLQUFLNEcsTUFLckQsQ0FFQSxHQURBczRDLGlCQUFpQnQ0QyxNQUFRQSxNQUNyQnc0QyxhQUFjLENBR2hCLFVBRHFCOWEsa0JBQWtCenZCLE9BQU9xcUMsa0JBQ2pDLE1BQ2YsQ0FHQSxJQUFLLElBQUkxOUIsTUFBUSxFQUFHQSxNQUFRL1gsS0FBS3ZKLE9BQU91SSxPQUFPMUQsT0FBUXljLFFBQVMsQ0FFOUQvWCxLQUFLdkosT0FBT3VJLE9BQU8rWSxPQUFPd0csYUFBZXZtQixLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNaTJCLGdCQUFnQixDQUFFOVksU0FBVWg3QixLQUFLdkosT0FBT3VJLE9BQU8rWSxPQUFPd0csU0FFckgsTUFBTXEzQixXQUFhLENBQ25CQSxPQUFvQixHQUNwQkEsS0FBa0IsY0FDbEJBLFdBQVdodUMsUUFBVWxOLEtBQUtrTyxHQUMxQmd0QyxXQUFXaGIsYUFBZWhrQyxPQUFPb0osS0FBS3ZKLE9BQU91SSxPQUFPK1ksT0FBTy9kLFNBQzNENDdDLFdBQVd4c0MsTUFBUXBSLEtBQUtDLEtBQUtDLFNBQVMsNkJBR3RDLElBQUssTUFBTXRILFNBQVNvUCxLQUFLdkosT0FBT3VJLE9BQU8rWSxPQUFPd0csT0FDNUMsR0FBSTFlLFNBQVM0QyxVQUFVN1IsT0FBUWdsRCxXQUFXcjNCLE9BQU8zc0IsS0FBS2hCLFdBRWpELENBQ0gsTUFBTStSLE1BQVFqSSxLQUFLbU8sTUFBTXpPLE1BQUt1RyxNQUNyQkEsS0FBSzdQLE9BQVNGLE1BQU1FLE1BQXNCLFVBQWQ2UCxLQUFLNUgsT0FFMUMsSUFBSzRKLFFBQVVBLE1BQU1sTSxPQUFPbUQsT0FBTzIyQyxXQUFZLENBRWhCdndDLEtBQUt2SixPQUFPOG5CLE9BQU9ua0IsTUFBS3VHLE1BQzVDQSxLQUFLN1AsT0FBU0YsTUFBTUUsUUFFRjhrRCxXQUFXcjNCLE9BQU8zc0IsS0FBS2hCLE1BQ3BELENBQ0YsQ0FJRixHQUFpQyxJQUE3QmdsRCxXQUFXcjNCLE9BQU9qakIsT0FDcEIsR0FBSXM2QyxXQUFXcjNCLE9BQU9qakIsUUFBVXM2QyxXQUFXaGIsYUFBYyxDQUV2RG4zQixHQUFHQyxjQUFjekksS0FDZmpELEtBQUtDLEtBQUswVyxPQUFPLGdDQUFpQyxDQUNoRGtuQyxXQUFZRCxXQUFXcjNCLE9BQU9qakIsT0FDOUJzL0IsYUFBY2diLFdBQVdoYixnQkFJN0IsTUFBTWtiLE9BQVNqMkMsU0FBUzJHLG9CQUN0QnhHLEtBQUt2SixPQUFPOG5CLE9BQ1pxM0IsV0FBV3IzQixRQUVidmUsS0FBS3ZKLE9BQU84bkIsT0FBU3UzQixNQUN2QixLQUFPLENBRUwsTUFBTTlsQyxlQUFpQnVxQixrQkFBa0JudkIsT0FBT3dxQyxZQUNoRCxJQUFLNWxDLFNBQVUsT0FDZixNQUFNOGxDLE9BQVNqMkMsU0FBUzJHLG9CQUN0QnhHLEtBQUt2SixPQUFPOG5CLE9BQ1p2TyxVQUVGaFEsS0FBS3ZKLE9BQU84bkIsT0FBU3UzQixNQUN2QixNQUVBcnlDLEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBS0MsU0FBUyxxQ0FHekIsQ0FHQSxHQUFJdEIsT0FBT29KLEtBQUt2SixPQUFPNjVDLFVBQVcsQ0FDaEMsTUFBTXNGLFdBQWEsQ0FDbkJBLE9BQW9CLEdBQ3BCQSxLQUFrQixjQUNsQkEsV0FBV2h1QyxRQUFVbE4sS0FBS2tPLEdBQzFCZ3RDLFdBQVdoYixhQUFlaGtDLE9BQU9vSixLQUFLdkosT0FBTzY1QyxVQUM3Q3NGLFdBQVd4c0MsTUFBUXBSLEtBQUtDLEtBQUswVyxPQUFPLDRCQUE2QixDQUMvRGxQLE9BQVE3SSxPQUFPb0osS0FBS3ZKLE9BQU82NUMsWUFJN0IsSUFBSyxNQUFNMy9DLEtBQUsrSixLQUFLNmpCLE9BRW5CLElBQ0c1dEIsRUFBRThGLE9BQU9tRCxNQUFNMjJDLGFBQ2Y1L0MsRUFBRThGLE9BQU84SyxXQUFXL1AsZ0JBQ3BCYixFQUFFOEYsT0FBTzhLLFdBQVc5UCxTQUNyQixDQUU2QnVPLEtBQUt2SixPQUFPOG5CLE9BQU9ua0IsTUFBS3VHLE1BQzVDQSxLQUFLN1AsT0FBU0gsRUFBRUcsUUFFRThrRCxXQUFXcjNCLE9BQU8zc0IsS0FBS2pCLEVBQ3BELENBSUYsR0FBaUMsSUFBN0JpbEQsV0FBV3IzQixPQUFPampCLE9BQ3BCLEdBQUlzNkMsV0FBV3IzQixPQUFPampCLFFBQVVzNkMsV0FBV2hiLGFBQWMsQ0FFdkRuM0IsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLMFcsT0FBTyxnQ0FBaUMsQ0FDaERrbkMsV0FBWUQsV0FBV3IzQixPQUFPampCLE9BQzlCcy9CLGFBQWNnYixXQUFXaGIsZ0JBSTdCLE1BQU1rYixPQUFTajJDLFNBQVMyRyxvQkFDdEJ4RyxLQUFLdkosT0FBTzhuQixPQUNacTNCLFdBQVdyM0IsUUFFYnZlLEtBQUt2SixPQUFPOG5CLE9BQVN1M0IsTUFDdkIsS0FBTyxDQUVMLE1BQU05bEMsZUFBaUJ1cUIsa0JBQWtCbnZCLE9BQU93cUMsWUFDaEQsSUFBSzVsQyxTQUFVLE9BQ2YsTUFBTThsQyxPQUFTajJDLFNBQVMyRyxvQkFDdEJ4RyxLQUFLdkosT0FBTzhuQixPQUNadk8sVUFFRmhRLEtBQUt2SixPQUFPOG5CLE9BQVN1M0IsTUFDdkIsTUFFQXJ5QyxHQUFHQyxjQUFjekksS0FDZmpELEtBQUtDLEtBQUtDLFNBQVMscUNBR3pCLE9BR013QyxLQUFLdTVDLGVBQWVqMEMsS0FBS3ZKLE9BQU84bkIsT0FBUSxvQkFFeEM3akIsS0FBS3E3QyxtQkFBbUJweUMsWUFBWSxxQkFFcENqSixLQUFLcTdDLG1CQUFtQm45QyxPQUFPLENBQ25DLGdDQUFpQ2hDLE9BQU9vSixLQUFLdkosT0FBTzYrQyxhQUFhMTNDLFFBR25FeTBDLG1CQUFtQnpnRCxLQUFLMEgsUUFBUUMsTUFBTXdPLFVBQVUvSCxPQUNoRHV3QyxZQUFhLENBQ2YsQ0FDQSxNQUVGLFFBQ0U4QixtQkFBbUJ6Z0QsS0FBSzBILFFBQVFDLE1BQU13TyxVQUFVL0gsT0FHdEQsR0FBa0MsSUFBOUJxeUMsbUJBQW1CLzJDLE9BQ3JCLE1BQU8sR0FFVCxNQUFNNmtDLGdCQUFrQnBwQyxNQUFNZSx3QkFDNUJxNkMsYUFDQUUsbUJBQ0FyNEMsU0FtQkYsT0FoQkl3MkMsa0JBRUk5MUMsS0FBSzlCLE9BQU8sQ0FDaEIsK0JBQWdDOEIsS0FBS3M3QyxrQkFFdkN0QixNQUFNbmhELEtBQUssMEJBRVRnOUMsbUJBRUk3MUMsS0FBSzlCLE9BQU8sQ0FDaEIsZ0NBQWlDOEIsS0FBS3U3QyxpQkFDdEMsOEJBQStCdjdDLEtBQUt3N0MsaUJBRXRDeEIsTUFBTW5oRCxLQUFLLDJCQUdONHNDLFNBQ1QsQ0FXQSxlQUFBNlEsQ0FBaUJwRyxVQUNmLElBQUloaUMsR0FBSyxLQUNULE1BQU05WCxLQUFPODVDLFNBQVNycUMsTUFBTSxlQUN4QnFxQyxTQUFTcnFDLE1BQU0sZUFBZSxHQUM5QnFxQyxTQUNKLElBQUssTUFBTWg2QyxTQUFTOEosS0FBS21PLE1BRXJCaEosU0FBUzJDLG1CQUFtQjVSLE9BQU84UixnQkFBa0I1UixLQUFLNFIsZ0JBRTFEa0csR0FBS2hZLE1BQU1nWSxJQUlmLE9BQU9BLEVBQ1QsQ0FFQSxjQUFBdXRDLENBQWdCdkwsVUFDZCxNQUFNNVAsU0FBVyxHQUNqQixJQUFLLE1BQU1wcUMsU0FBUzhKLEtBQUttTyxNQUNuQmpZLE1BQU1FLE9BQVM4NUMsVUFBVTVQLFNBQVNwcEMsS0FBS2hCLE9BRzdDLE9BQU9vcUMsUUFDVCxDQU1BLGVBQUFqRCxDQUFpQnYyQixXQUVmLE1BQU1pRixVQUFZLEdBQ1ozVixLQUFPMFEsVUFBVWpCLE1BQU0sZUFDekJpQixVQUFVakIsTUFBTSxlQUFlLEdBQy9CaUIsVUFFSixJQUFLLE1BQU01USxTQUFTOEosS0FBS21PLE1BR25CaEosU0FBUzJDLG1CQUFtQjVSLE9BQU84UixnQkFBa0I1UixLQUFLNFIsZUFDMUQ5UixNQUFNZ0osT0FBT3dDLE1BQU1reEMsV0FBVzFrQyxLQUFPcEgsV0FFeEIsVUFBZjVRLE1BQU1tSSxNQUVOME4sVUFBVTdVLEtBQUtoQixPQUduQixPQUFPNlYsU0FDVCxDQUVBLG1CQUFBMnZDLENBQXFCdjRCLE9BQ25CLE9BQU9uakIsS0FBS21PLE1BQU16TyxNQUFLOGdCLEdBQUtBLEVBQUV0aEIsT0FBT3dDLE1BQU1reEMsV0FBVzFrQyxLQUFPaVYsT0FDL0QsQ0FVQSxvQkFBQW5aLEdBQ0UsTUFBTVUsT0FBUyxDQUFDLEVBQ2hCLElBQUssTUFBTzdPLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFoVyxLQUFLeUYsUUFBUUMsT0FDakQ0QixJQUFJOE8sV0FBVyxNQUFRelUsTUFBTXlVLFdBQVcsV0FDMUNELE9BQU83TyxJQUFJK08sVUFBVSxJQUFNaE0sUUFBUUMsTUFBTWdNLFlBQVk3SyxLQUFNOUosTUFBTTBVLFVBQVUsS0FHL0UsT0FBT0YsTUFDVCxDQUVBLGtDQUFPeWxCLEdBQ0wsTUFBTXZNLGdCQUFrQixHQUVsQiszQixtQkFBdUIvOEMsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQStFekIsS0FBS3ZCLE9BQU82ZCxTQUFTMjRCLE1BQU12MkIsVUFBVTRILGdCQUE1R3RtQixLQUFLdkIsT0FBTzZkLFNBQVMyNEIsTUFBTXFKLFVBQVVoNEIsZ0JBQWdCQSxnQkFDckksSUFBSyxNQUFPL25CLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFveEMsb0JBQ3hDLzNCLGdCQUFnQjFzQixLQUFLLENBQ25CMkUsSUFDQTJMLFVBQVdsSyxLQUFLQyxLQUFLQyxTQUFTdEgsTUFBTXl0QixPQUNwQ3RtQixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTdEgsTUFBTW1ILFNBR3BDLE9BQU91bUIsZUFDVCxDQUVBLGlCQUFBcTFCLENBQW1CNEMsVUFDakIsR0FBSTc3QyxLQUFLakUsT0FBTzZuQixnQkFDZCxJQUFLLE1BQU8vbkIsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFDaEN2SyxLQUFLakUsT0FBTzZuQixpQkFFWixHQUNFdG1CLEtBQUtDLEtBQUtDLFNBQVN0SCxNQUFNeXRCLE9BQU8zYixnQkFDOUI2ekMsU0FBUzd6QyxlQUNYMUssS0FBS0MsS0FBS0MsU0FBU3RILE1BQU1tSCxPQUFPMkssZ0JBQzlCNnpDLFNBQVM3ekMsZUFDWG5NLE1BQVFnZ0QsU0FBUzd6QyxjQUVqQixNQUFPLENBQ0xuTSxJQUNBMkwsVUFBV2xLLEtBQUtDLEtBQUtDLFNBQVN0SCxNQUFNeXRCLE9BQ3BDdG1CLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVN0SCxNQUFNbUgsT0FDaENuSCxNQUFPQSxNQUFNQSxPQUtyQixPQUFPLElBQ1QsQ0FFQSxZQUFBMDRDLENBQWNrTixZQUNaLE1BQ0UsQ0FBQyxNQUFPLE9BQVF4K0MsS0FBS0MsS0FBS0MsU0FBUyxhQUFhd0ssZUFBZWhGLFNBQzdEODRDLFdBQVc5ekMsZUFHTixDQUNMbk0sSUFBSyxNQUNMMkwsVUFBVyxPQUNYbkssTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxhQUMxQnRILE1BQU84SixLQUFLakUsT0FBT0MsUUFBUSsvQyxJQUFJN2xELE9BSWpDLENBQ0UsTUFDQW9ILEtBQUtDLEtBQUtDLFNBQVMsWUFBWXdLLGNBQy9CMUssS0FBS0MsS0FBS0MsU0FBUyxlQUFld0ssZUFDbENoRixTQUFTODRDLFdBQVc5ekMsZUFFZixDQUNMbk0sSUFBSyxNQUNMMkwsVUFBV2xLLEtBQUtDLEtBQUtDLFNBQVMsWUFDOUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsZUFDMUJ0SCxNQUFPOEosS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSW4wQixPQUc1QixJQUNULENBRUEsYUFBTW9vQyxDQUFTaC9CLFFBQVUsQ0FBQyxRQUNRLElBQXJCQSxRQUFRODBCLFdBQ2pCOTBCLFFBQVE4MEIsU0FBV0csZ0JBQWdCdUksdUJBRUMsSUFBM0J4OUIsUUFBUXErQixpQkFDakJyK0IsUUFBUXErQixnQkFBaUIsR0FFM0JyK0IsUUFBUXJGLE1BQVErRixLQUVoQixhQURzQnUwQixnQkFBZ0IwSixRQUFRMytCLFFBRWhELENBRUEsY0FBSXUyQyxHQUVGLE9BRG1CNzFDLEtBQUttTyxNQUFNOVgsUUFBTzRQLE1BQXNCLGVBQWRBLEtBQUs1SCxPQUNoQyxFQUNwQixDQUVBLGFBQUl5M0MsR0FFRixPQURrQjkxQyxLQUFLbU8sTUFBTTlYLFFBQU80UCxNQUFzQixjQUFkQSxLQUFLNUgsT0FDaEMsRUFDbkIsQ0FFQSxxQkFBTXM4QyxDQUFpQnFCLFVBQVcsR0FDaEMsR0FBSUEsU0FBVSxDQUNaLE1BQU1DLGdCQUFrQmo4QyxLQUFLbU8sTUFBTTlYLFFBQU80UCxNQUN4Q0EsS0FBS3lDLFlBQVksZ0JBRW5CLElBQUssSUFBSTJVLE1BQVEsRUFBR0EsTUFBUTQrQixnQkFBZ0JyN0MsT0FBUXljLGNBQzVDNCtCLGdCQUFnQjUrQixPQUFPblUsY0FBYyxhQUUvQyxDQUNJbEosS0FBSzYxQyxrQkFBa0I3MUMsS0FBSzYxQyxXQUFXNTNDLGVBQ3JDK0IsS0FBSzlCLE9BQU8sQ0FBRSxnQ0FBaUMsTUFDdkQsQ0FFQSxvQkFBTSs3QyxDQUFnQitCLFVBQVcsR0FDL0IsR0FBSUEsU0FBVSxDQUNaLE1BQU1FLGVBQWlCbDhDLEtBQUttTyxNQUFNOVgsUUFBTzRQLE1BQ3ZDQSxLQUFLeUMsWUFBWSxlQUVuQixJQUFLLElBQUkyVSxNQUFRLEVBQUdBLE1BQVE2K0IsZUFBZXQ3QyxPQUFReWMsY0FDM0M2K0IsZUFBZTcrQixPQUFPblUsY0FBYyxZQUU5QyxDQUNJbEosS0FBSzgxQyxpQkFBaUI5MUMsS0FBSzgxQyxVQUFVNzNDLGVBQ25DK0IsS0FBSzlCLE9BQU8sQ0FBRSwrQkFBZ0MsTUFDdEQsQ0FFQSxRQUFJZzdDLEdBQ0YsT0FBT2oxQyxTQUFTakUsS0FBS2pFLE9BQU9DLFNBQVMrL0MsS0FBSzdsRCxNQUM1QyxDQUVBLGFBQU1pbUQsQ0FBU2ptRCxPQUNiLGFBQWE4SixLQUFLOUIsT0FBTyxDQUFFLDJCQUE0QmhJLE9BQ3pELENBRUEsZUFBTXVuQixDQUFXazBCLFFBRWYsT0FEQUEsT0FBUzF0QyxTQUFTMHRDLFFBQ1ozeEMsS0FBS2s1QyxNQUFRdkgsUUFDWjN4QyxLQUFLbThDLFFBQVFuOEMsS0FBS2s1QyxLQUFPdkgsT0FDbEMsQ0FFQSxNQUFJd0IsR0FDRixPQUFPbHZDLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHajlDLE1BQ3pDLENBRUEsWUFBSW85QyxHQUNGLE9BQUl0ekMsS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2g3QyxLQUVrQixNQUF6QzZILEtBQUtqRSxPQUFPNm5CLGdCQUFnQnB0QixJQUFJTixPQUNTLE1BQXpDOEosS0FBS2pFLE9BQU82bkIsZ0JBQWdCcnRCLElBQUlMLE1BRXpCZzZCLFNBQVNrc0Isc0JBQXNCcDhDLEtBQUtqRSxPQUFPNm5CLGdCQUFpQjVqQixLQUFLM0IsTUFFdEUyQixLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHbHdDLElBQ2xCZ0IsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRbTNDLEdBQUdsd0MsS0FFbEMsS0FFRmdCLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHbHdDLElBQ3pDLENBRUEsU0FBSTR3QyxHQUNGLE9BQU81dkMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRbTNDLEdBQUdsd0MsSUFDekMsQ0FFQSxZQUFNbzVDLENBQVFubUQsT0FLWixPQUpJQSxNQUFRLElBQUdBLE1BQVEsR0FDbkJBLE1BQVE4SixLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHbHdDLE1BQ2pDL00sTUFBUStOLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHbHdDLFlBRTdCakQsS0FBSzlCLE9BQU8sQ0FBRSwwQkFBMkJoSSxPQUN4RCxDQUVBLG9CQUFNcWpELENBQWdCeHRDLFVBQVd5cEIsS0FBTyxNQUN0QyxNQUFNaVEsVUFBWSxHQUNsQixJQUFLLElBQUl4OUIsU0FBUzhELFVBUWhCLEdBUEE5RCxNQUFRckosUUFBUUMsTUFBTXdPLFVBQVVwRixPQUM1QnV0QixPQUNHNTFCLE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLb1AsTUFBTWxNLE9BQVEsV0FDdERrTSxNQUFNbE0sT0FBT21ELE1BQVEsQ0FBQyxHQUV4QitJLE1BQU1sTSxPQUFPbUQsTUFBTXMyQixPQUFRLEdBRXpCcndCLFNBQVM0QyxVQUFVRSxPQUNyQnc5QixVQUFVdnVDLEtBQUsrUSxXQUNWLENBQ0wsTUFBTXFNLE9BQVN0VSxLQUFLczJDLGdCQUFnQnJ1QyxNQUFNN1IsTUFDMUMsR0FBS2tlLFFBRUUsR0FBSWtoQixLQUFNLENBQ2YsTUFBTXZ2QixLQUFPakcsS0FBS21PLE1BQU1qUixJQUFJb1gsY0FDdEJyTyxLQUFLZ0QsWUFBWXVzQixLQUN6QixPQUpFaVEsVUFBVXZ1QyxLQUFLK1EsTUFLbkIsQ0FFdUIsSUFBckJ3OUIsVUFBVTdrQyxjQUdSWixLQUFLNUMsd0JBQXdCLE9BQVFxb0MsVUFBVyxDQUNwRGdRLGFBQWEsR0FFakIsQ0FFQSxjQUFNcUQsQ0FBVXhZLFNBQVU5SyxLQUFPLE1BQy9CLE1BQU1pUSxVQUFZLEdBQ2xCLElBQUssTUFBTXgvQixRQUFRcTZCLFNBQ2I5SyxPQUNHdnZCLEtBQUtsSyxPQUFPbUQsUUFBTytHLEtBQUtsSyxPQUFPbUQsTUFBUSxDQUFDLEdBQzdDK0csS0FBS2xLLE9BQU9tRCxNQUFNczJCLE9BQVEsR0FFNUJpUSxVQUFVdnVDLEtBQUswSCxRQUFRQyxNQUFNd08sVUFBVXBILE9BRXpDLEdBQXlCLElBQXJCdy9CLFVBQVU3a0MsT0FHZCxhQUFhWixLQUFLNUMsd0JBQXdCLE9BQVFxb0MsVUFBVyxDQUMzRGdRLGFBQWEsR0FFakIsQ0FFQSxtQkFBTTZHLENBQWVyMEMsTUFBT3V0QixLQUFPLE1BQ2pDLE1BQU1saEIsT0FBU3RVLEtBQUtzMkMsZ0JBQWdCcnVDLE1BQU03UixNQUMxQyxHQUFLa2UsUUFRRSxHQUFJa2hCLEtBQU0sQ0FDZixNQUFNdnZCLEtBQU9qRyxLQUFLbU8sTUFBTWpSLElBQUlvWCxjQUN0QnJPLEtBQUtnRCxZQUFZdXNCLEtBQ3pCLE9BVk1BLE9BQ0d2dEIsTUFBTWxNLE9BQU9tRCxRQUFPK0ksTUFBTWxNLE9BQU9tRCxNQUFRLENBQUMsR0FDL0MrSSxNQUFNbE0sT0FBT21ELE1BQU1zMkIsT0FBUSxTQUV2QngxQixLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQzZLLE9BQVEsQ0FDbER3dEMsYUFBYSxHQU1uQixDQUVBLFlBQUlqQyxHQUNGLE9BQUl4ekMsS0FBS2pFLE9BQU9DLFFBQVF1M0MsR0FBR3A3QyxLQUNvQixNQUF6QzZILEtBQUtqRSxPQUFPNm5CLGdCQUFnQmh0QixJQUFJVixNQUMzQmc2QixTQUFTcXNCLHNCQUFzQnY4QyxLQUFLakUsT0FBTzZuQixpQkFDdEMsRUFFVDNmLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUXUzQyxHQUFHdHdDLElBQ3pDLENBRUEsZ0JBQUF1NUMsQ0FBa0JuMkIsV0FDaEIsTUFBeUIsaUJBQWRBLFVBRVBybUIsS0FBS2pFLE9BQU8wZ0QsaUJBQWlCcG1ELFFBQzNCZ2hCLEdBQUtBLEVBQUVoWixLQUFLKzVDLHNCQUF3Qi94QixVQUFVK3hCLHNCQUM5QyxJQUFNLENBQUUvNUMsS0FBTSxHQUFJcStDLFVBQVcsRUFBR0MsVUFBVSxHQUd6QyxDQUFFdCtDLEtBQU0sR0FBSXErQyxVQUFXLEVBQUdDLFVBQVUsRUFDN0MsQ0FFQSxlQUFBMzFCLENBQWlCWCxXQUNmLEdBQUlBLFVBQVcsQ0FFYixPQUR3QnJtQixLQUFLdzhDLGlCQUFpQm4yQixXQUN2QnEyQixTQUN6QixDQUNBLE9BQU8sQ0FDVCxDQUVBLHdCQUFBdDFCLENBQTBCZixXQUN4QixHQUFJQSxVQUFXLENBRWIsTUFBZ0MsS0FEUnJtQixLQUFLdzhDLGlCQUFpQm4yQixXQUN2QmhvQixJQUN6QixDQUNBLE9BQU8sQ0FDVCxDQUVBLGdCQUFBaXRCLENBQWtCakYsVUFBV21ELFNBQzNCLEdBQXlCLGlCQUFkbkQsV0FBd0MsS0FBZEEsVUFBa0IsQ0FDckQsTUFBTW8yQixpQkFBbUI3OUMsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBTzBnRCxrQkFDdkRwL0IsTUFBUW8vQixpQkFBaUJwRSxXQUM3QmhoQyxHQUFLQSxFQUFFaFosS0FBSys1QyxzQkFBd0IveEIsVUFBVSt4QixzQkFrQmhELE9BaEJJNXVCLFFBQVUsR0FDRyxJQUFYbk0sTUFDRm8vQixpQkFBaUJ2bEQsS0FBSyxDQUNwQm1ILEtBQU1nb0IsVUFDTnEyQixVQUFXbHpCLFFBQ1htekIsVUFBVSxJQUdaRixpQkFBaUJwL0IsT0FBT3EvQixXQUFhbHpCLFFBRTlCbk0sT0FBUyxJQUNsQm8vQixpQkFBaUIvbEIsT0FBT3JaLE1BQU8sR0FDL0JvL0IsaUJBQWlCdHdDLE1BQUssU0FBVXl3QyxLQUFNQyxPQUNwQyxPQUFPRCxLQUFLditDLEtBQUt5K0MsY0FBY0QsTUFBTXgrQyxLQUN2QyxLQUVLMkIsS0FBSzlCLE9BQU8sQ0FDakIsMEJBQTJCdStDLGtCQUUvQixDQUNGLENBRUEsa0JBQUF2MUIsQ0FBb0JiLFVBQVcwMkIsZUFDN0IsTUFBTWoyQixPQUFTLElBQUlobEIsS0FBS2k3QyxjQUFjL3FDLFlBQWNwVCxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBcUIsZUFBYixZQUFxRCxDQUFFZ00sVUFBVSxJQUFRdEksTUFDMUt1NkMsZ0JBQWtCaDlDLEtBQUt3OEMsaUJBQWlCbjJCLFdBQzlDLE9BQUkyMkIsZ0JBQWdCTCxTQUNYLEVBRUZ2NkMsS0FBS2EsSUFBSSxFQUFHNmpCLE9BQVNrMkIsZ0JBQWdCTixVQUM5QyxDQUVBLGNBQU12eUIsQ0FBVTlELFVBQVdtRCxTQUV6QixPQUR3QnhwQixLQUFLdzhDLGlCQUFpQm4yQixXQUN6QnMyQixTQUtkLFNBSkMzOEMsS0FBS2k5QyxPQUFPajlDLEtBQUtxcUIsSUFBTWIsU0FDekJBLFFBQVUsR0FBR3hwQixLQUFLc3JCLGlCQUFpQmpGLFVBQVdtRCxTQUMzQ0EsUUFHWCxDQUVBLE9BQUFBLENBQVMrVSxhQUNQLE9BQUlBLFlBQW9CditCLEtBQUtrOUMsbUJBQ3RCbDlDLEtBQUttOUMsbUJBQ2QsQ0FFQSxzQkFBSUQsR0FDRixPQUFPbDlDLEtBQUtqRSxPQUFPL0UsU0FBU3d5QixTQUFTK1UsV0FDdkMsQ0FFQSx1QkFBSTRlLEdBQ0YsT0FBT245QyxLQUFLakUsT0FBTy9FLFNBQVN3eUIsU0FBU2dWLFlBQ3ZDLENBRUEsY0FBSTRlLEdBQ0YsT0FBSXA5QyxLQUFLbTlDLG9CQUNGcmhELE1BQU1JLE9BQU84RCxLQUFLbTlDLHNCQUdoQixJQUFJcjdDLEtBQUs5QixLQUFLbTlDLHFCQUF1QnYrQyxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBcUIsZUFBYixZQUFxRCxDQUFFZ00sVUFBVSxJQUFRdEksTUFGL0p2RyxPQUFPOEQsS0FBS205QyxxQkFJaEIsQ0FDVCxDQUVBLGNBQUlFLEdBQ0YsT0FBSXI5QyxLQUFLazlDLG1CQUNGcGhELE1BQU1JLE9BQU84RCxLQUFLazlDLHFCQUdoQixJQUFJcDdDLEtBQUs5QixLQUFLazlDLG9CQUFzQnQrQyxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBcUIsZUFBYixZQUFxRCxDQUFFZ00sVUFBVSxJQUFRdEksTUFGOUp2RyxPQUFPOEQsS0FBS2s5QyxvQkFJaEIsQ0FDVCxDQUVBLGdCQUFJeHlCLEdBQ0YsT0FBTzFxQixLQUFLakUsT0FBT0MsUUFBUXF1QixLQUFLaXpCLFdBQWEsQ0FDL0MsQ0FFQSxpQkFBSTN5QixHQUNGLE9BQU8zcUIsS0FBS2pFLE9BQU9DLFFBQVFxdUIsS0FBS3dvQixZQUFjLENBQ2hELENBRUEsYUFBSVksR0FDRixHQUFLenpDLEtBQUtqRSxPQUFPQyxRQUNqQixPQUFJZ0UsS0FBS2pFLE9BQU9DLFNBQVNxdUIsS0FBS2x5QixLQUN4QjZILEtBQUt1OUMsY0FBc0JuN0MsS0FBS2EsSUFBSSxHQUFLakQsS0FBS3U5QyxjQUFlLEdBQzFELEdBRUZ0NUMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUlwbkIsSUFDMUMsQ0FFQSxVQUFJNmpCLEdBQ0YsT0FBTzdpQixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSXBuQixJQUMxQyxDQUVBLE1BQUlzd0MsR0FDRixPQUFPdHZDLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUXUzQyxHQUFHcjlDLE1BQ3pDLENBRUEsU0FBSTQ5QyxHQUNGLE9BQUk5ekMsS0FBS2pFLE9BQU9DLFFBQVF1M0MsR0FBR3A3QyxLQUVvQixNQUF6QzZILEtBQUtqRSxPQUFPNm5CLGdCQUFnQmh0QixJQUFJVixNQUMzQmtNLEtBQUswSSxNQUFNOUssS0FBS2pFLE9BQU82bkIsZ0JBQWdCaHRCLElBQUlWLE1BQVEsR0FFckQsRUFFRitOLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUXUzQyxHQUFHdHdDLElBQ3pDLENBRUEsV0FBTXU2QyxDQUFPdG5ELE9BR1gsT0FGSUEsTUFBUSxJQUFHQSxNQUFRLEdBQ25CQSxNQUFRK04sU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRdTNDLEdBQUd0d0MsT0FBUS9NLE1BQVErTixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVF1M0MsR0FBR3R3QyxZQUMvRWpELEtBQUs5QixPQUFPLENBQUUsMEJBQTJCaEksT0FDeEQsQ0FFQSxPQUFJbTBCLEdBQ0YsT0FBT3BtQixTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSW4wQixNQUMxQyxDQUVBLE9BQUlTLEdBQ0YsT0FBT3FKLEtBQUtpNUMsa0JBQWtCLE1BQ2hDLENBRUEseUJBQUl3RSxHQUNGLElBQUlsQyxpQkFBbUIsRUFDdkIsSUFBSyxNQUFNdHpDLFNBQVNqSSxLQUFLNmpCLE9BQ25CNWIsTUFBTWxNLE9BQU9ndEIsYUFBYThzQixhQUM1QjBGLGtCQUFvQnR6QyxNQUFNbE0sT0FBT2d0QixZQUFZOHNCLFlBR2pELE9BQU8wRixnQkFDVCxDQUVBLG9CQUFJQSxHQUNGLElBQUt2N0MsS0FBSzYxQyxXQUFZLE9BQU8sRUFDN0IsSUFBSXBVLE9BQVMsRUFDYixJQUFLLE1BQU02WSxTQUFTMTZDLE9BQU8ySyxRQUN6QnZLLEtBQUs2MUMsV0FBVzk1QyxPQUFPaS9DLHVCQUN0QixDQUNELE1BQU9uL0MsSUFBSzNGLE9BQVNva0QsTUFDZmxaLEtBQU9waEMsS0FBS2k1QyxrQkFBa0JwOUMsS0FDaEMzRixNQUFNb2YsV0FDUm1zQixRQUFVTCxLQUFLbHJDLE1BQVFnRyxPQUFPaEcsTUFBTUMsWUFFeEMsQ0FDQSxPQUFPc3JDLE1BQ1QsQ0FFQSwyQkFBTWljLFNBQ0UxOUMsS0FBSzlCLE9BQU8sQ0FDaEIsZ0NBQWlDOEIsS0FBS3U3QyxrQkFFMUMsQ0FFQSwwQkFBTW9DLFNBQ0UzOUMsS0FBSzlCLE9BQU8sQ0FDaEIsK0JBQWdDOEIsS0FBS3U3QyxrQkFFekMsQ0FFQSx5QkFBTXFDLFNBQ0U1OUMsS0FBSzlCLE9BQU8sQ0FDaEIsOEJBQStCOEIsS0FBS3c3QyxnQkFFeEMsQ0FFQSx3QkFBSXFDLEdBQ0YsSUFBSXZDLGdCQUFrQixFQUN0QixJQUFLLE1BQU1yekMsU0FBU2pJLEtBQUs2akIsT0FDbkI1YixNQUFNbE0sT0FBT2d0QixhQUFhK3NCLFlBQzVCd0YsaUJBQW1CcnpDLE1BQU1sTSxPQUFPZ3RCLFlBQVkrc0IsV0FHaEQsT0FBT3dGLGVBQ1QsQ0FFQSxtQkFBSUEsR0FDRixPQUFLdDdDLEtBQUs4MUMsVUFDSDkxQyxLQUFLODFDLFVBQVUvNUMsT0FBTytoRCxZQURELENBRTlCLENBRUEsb0JBQUlDLEdBQ0YsSUFBSUEsaUJBQW1CLEVBQ3ZCLElBQUssTUFBTTkxQyxTQUFTakksS0FBSzZqQixPQUNuQjViLE1BQU1sTSxPQUFPZ3RCLGFBQWFDLGFBQzVCKzBCLGtCQUFvQjkxQyxNQUFNbE0sT0FBT2d0QixZQUFZQyxZQUdqRCxPQUFPKzBCLGdCQUNULENBRUEsdUJBQUlDLEdBQ0YsSUFBSXhDLGVBQWlCLEVBQ3JCLElBQUssTUFBTXZ6QyxTQUFTakksS0FBSzZqQixPQUNuQjViLE1BQU1sTSxPQUFPZ3RCLGFBQWE2c0IsV0FDNUI0RixnQkFBa0J2ekMsTUFBTWxNLE9BQU9ndEIsWUFBWTZzQixVQUcvQyxPQUFPNEYsY0FDVCxDQUVBLGtCQUFJQSxHQUNGLE9BQU8sRUFBSXQvQyxPQUFPOEQsS0FBS2pFLE9BQU82bkIsZ0JBQWdCanRCLElBQUlULE1BQ3BELENBRUEsdUJBQUkrbkQsR0FDRixJQUFLLE1BQU1oMkMsU0FBU2pJLEtBQUs2akIsT0FDdkIsR0FBSTViLE1BQU1sTSxPQUFPbUQsT0FBT2cvQyxhQUFjLE9BQU8sRUFFL0MsR0FBSWwrQyxLQUFLbStDLHNCQUNQLE9BQU8sRUFFVCxJQUFLLE1BQU1uQixtQkFBbUJoOUMsS0FBS2pFLE9BQU8wZ0QsaUJBQ3hDLElBQUtPLGdCQUFnQkwsU0FBVSxPQUFPLEVBRXhDLE9BQU8sQ0FDVCxDQUVBLFlBQU1NLENBQVEvbUQsT0FDUkEsTUFBUSxJQUFHQSxNQUFRLEdBQ25CQSxNQUFROEosS0FBS2pFLE9BQU9DLFFBQVFxdUIsSUFBSXBuQixNQUFPL00sTUFBUThKLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUlwbkIsS0FDM0UsTUFBTW03QyxLQUFPbjZDLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUXF1QixJQUFJbjBCLE9BQVNBLE1BRXZELEdBQUlrb0QsS0FBTyxFQUFHLENBQ1osSUFBSTFCLFVBQVl6NEMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUlpekIsV0FDN0NyNUMsU0FBU2pFLEtBQUtqRSxPQUFPQyxRQUFRcXVCLElBQUlpekIsV0FDakMsRUFDSlosV0FBd0IwQixLQUNwQkEsTUFBUSxTQUFTcCtDLEtBQUtvckIsYUFBYTcyQixLQUFLNEYsT0FBT0MsYUFDL0NzaUQsV0FBYTE4QyxLQUFLakUsT0FBT0MsUUFBUXF1QixJQUFJd29CLGtCQUNqQzd5QyxLQUFLb3JCLGFBQWE3MkIsS0FBSzRGLE9BQU9FLG1CQUVoQzJGLEtBQUs5QixPQUFPLENBQ2hCLDJCQUE0QmhJLE1BQzVCLCtCQUFnQ3dtRCxXQUVwQyxZQUFhMThDLEtBQUs5QixPQUFPLENBQUUsMkJBQTRCaEksUUFDdkQsT0FBT0EsS0FDVCxDQUVBLG1CQUFNbW9ELENBQWVub0QsTUFBTzJuQyxRQUMxQixNQUFNeWdCLFdBQWEsa0JBQWtCemdCLGNBQ3JDLGFBQWE3OUIsS0FBSzlCLE9BQU8sQ0FBRSxDQUFDb2dELFlBQWFwb0QsT0FDM0MsQ0FFQSxzQkFBTXFvRCxDQUFrQjFnQixRQUN0Qjc5QixLQUFLcStDLGVBQWVyK0MsS0FBS2pFLE9BQU9DLFFBQVE2aEMsUUFBUTFsQyxLQUFNMGxDLE9BQ3hELENBRUEsNEJBQU8yZ0IsQ0FBdUI1NkIsaUJBQzVCLE1BQU02NkIsS0FBTzc2QixnQkFBZ0J0dEIsSUFBSUosT0FBUyxJQUFNMHRCLGdCQUFnQnB0QixJQUFJTixPQUFTLEdBQzdFLE9BQUl1b0QsSUFBTSxJQUFZLEVBQ2xCQSxJQUFNLElBQVksRUFDbEJBLElBQU0sSUFBWSxFQUNsQkEsSUFBTSxJQUFZLE1BQ2YsR0FBR3I4QyxLQUFLMEksT0FBTzJ6QyxJQUFNLElBQU0sT0FDcEMsQ0FFQSwrQkFBT0MsQ0FBMEI5NkIsaUJBQy9CLE1BQU02NkIsS0FBTzc2QixnQkFBZ0J0dEIsSUFBSUosT0FBUyxJQUFNMHRCLGdCQUFnQnB0QixJQUFJTixPQUFTLEdBQzdFLE9BQUl1b0QsSUFBTSxJQUFZLEVBQ2xCQSxJQUFNLElBQVksRUFDbEJBLElBQU0sSUFBWSxFQUNsQkEsSUFBTSxJQUFZLEVBQ2ZyOEMsS0FBSzBJLE9BQU8yekMsSUFBTSxJQUFNLElBQU0sQ0FDdkMsQ0FFQSw0QkFBT3JDLENBQXVCeDRCLGdCQUFpQnZsQixNQUM3QyxNQUFNb2dELElBQU14NkMsU0FBUzJmLGdCQUFnQnB0QixJQUFJTixPQUFTLEVBQUcsSUFBTStOLFNBQVMyZixnQkFBZ0JydEIsSUFBSUwsT0FBUyxFQUFHLElBQzlGeW9ELFFBQVdyaEQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNEJBQXVDLGNBQVRtQixLQUF1QixFQUFJLEdBQ3BHLE9BQU8rRCxLQUFLMEksTUFBTTJ6QyxJQUFNRSxRQUMxQixDQUVBLDRCQUFPcEMsQ0FBdUIzNEIsaUJBQzVCLE9BQU94aEIsS0FBSzBJLE1BQU04WSxnQkFBZ0JodEIsSUFBSVYsTUFBUSxFQUNoRCxDQUVBLDZCQUFPMG9ELENBQXdCaDdCLGdCQUFpQnZsQixLQUFNd2dELEtBQ3BELElBQUlDLElBYUosT0FYRUEsSUFERWw3QixnQkFBZ0JudEIsSUFBSVAsTUFBUTB0QixnQkFBZ0JwdEIsSUFBSU4sT0FBUzB0QixnQkFBZ0J0dEIsSUFBSUosTUFBUTB0QixnQkFBZ0JwdEIsSUFBSU4sTUFDckcsRUFDRzB0QixnQkFBZ0JudEIsSUFBSVAsT0FBUzB0QixnQkFBZ0JwdEIsSUFBSU4sT0FBUzB0QixnQkFBZ0J0dEIsSUFBSUosT0FBUzB0QixnQkFBZ0JwdEIsSUFBSU4sTUFDOUcsRUFFQSxFQUVLLGFBQVRtSSxNQUF3QmYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsK0JBQy9DcEIsTUFBTW1JLFNBQVM0NkMsUUFDbEJDLElBQU03NkMsU0FBUzQ2QyxNQUFRLEdBQUtDLElBQU0xOEMsS0FBSzBJLE1BQU03RyxTQUFTNDZDLEtBQU8sSUFBTSxFQUFJQyxLQUdwRTE4QyxLQUFLYSxJQUFJLEVBQUc2N0MsSUFDckIsQ0FFQSxZQUFJN0wsR0FDRixPQUFLanpDLEtBQUtqRSxPQUFPQyxTQUNaZ0UsS0FBS2pFLE9BQU9DLFFBQVFrd0MsT0FDZSxTQUFwQ2xzQyxLQUFLakUsT0FBT0MsUUFBUWt3QyxNQUFNaDJDLFFBQzVCOEosS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTS96QyxNQUFPLEdBRS9CNkgsS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTS96QyxLQUNyQiszQixTQUFTd3VCLHlCQUF5QjErQyxLQUFLakUsT0FBTzZuQixpQkFHaEQ1akIsS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTWgyQyxPQVRBLElBVW5DLENBRUEsU0FBSWcyQyxHQUNGLE9BQU9sc0MsS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTWgyQyxLQUNuQyxDQUVBLFNBQUk4OEMsR0FDRixPQUFLaHpDLEtBQUtqRSxPQUFPQyxTQUNaZ0UsS0FBS2pFLE9BQU9DLFFBQVFHLElBQ1ksU0FBakM2RCxLQUFLakUsT0FBT0MsUUFBUUcsR0FBR2pHLFFBQ3pCOEosS0FBS2pFLE9BQU9DLFFBQVFHLEdBQUdoRSxNQUFPLEdBRTVCNkgsS0FBS2pFLE9BQU9DLFFBQVFHLEdBQUdoRSxLQUNsQiszQixTQUFTc3VCLHNCQUFzQngrQyxLQUFLakUsT0FBTzZuQixpQkFFN0M1akIsS0FBS2pFLE9BQU9DLFFBQVFHLEdBQUdqRyxPQVJHLElBU25DLENBRUEsTUFBSWlHLEdBQ0YsT0FBTzZELEtBQUtqRSxPQUFPQyxRQUFRRyxHQUFHakcsS0FDaEMsQ0FFQSxVQUFJNjhDLEdBQ0YsSUFBSy95QyxLQUFLakUsT0FBT0MsUUFBUyxPQUFPLEtBQ2pDLElBQUtnRSxLQUFLakUsT0FBT0MsUUFBUXN3QyxJQUFLLE9BQU8sS0FJckMsR0FIc0MsU0FBbEN0c0MsS0FBS2pFLE9BQU9DLFFBQVFzd0MsSUFBSXAyQyxRQUMxQjhKLEtBQUtqRSxPQUFPQyxRQUFRc3dDLElBQUluMEMsTUFBTyxHQUU3QjZILEtBQUtqRSxPQUFPQyxRQUFRc3dDLElBQUluMEMsS0FBTSxDQUNoQyxNQUFNMm1ELElBQU01dUIsU0FBUzB1Qix1QkFBdUI1K0MsS0FBS2pFLE9BQU82bkIsZ0JBQWlCNWpCLEtBQUtqRSxPQUFPc0MsS0FBTTJCLEtBQUtqRSxPQUFPMGlDLE1BQU1vZ0IsS0FDN0csR0FBSUMsSUFBTSxFQUFHLE9BQU9BLEdBQ3RCLENBQ0EsT0FBTzkrQyxLQUFLakUsT0FBT0MsUUFBUXN3QyxJQUFJcDJDLEtBQ2pDLENBRUEsT0FBSW8yQyxHQUNGLE9BQU90c0MsS0FBS2pFLE9BQU9DLFFBQVFzd0MsSUFBSXAyQyxLQUNqQyxDQUVBLFdBQUlzVyxHQUVGLE9BQU94TSxLQUFLaVIsTUFBUSxHQUFHalIsS0FBS2lSLE1BQU1wRSxNQUFNd2xDLE9BQU9yeUMsS0FBS2lSLE1BQU0vQyxLQUFPLElBQ25FLENBRUEsVUFBSS9FLEdBUUYsT0FQS25KLEtBQUtqRSxPQUFPbUQsUUFDZmMsS0FBS2pFLE9BQU9tRCxNQUFRLENBQUMsRUFDckJjLEtBQUtqRSxPQUFPbUQsTUFBTWlLLFFBQVMsRUFDM0JuSixLQUFLOUIsT0FBTyxDQUFFLGVBQWdCLENBQUMsSUFDL0I4QixLQUFLOUIsT0FBTyxDQUFFLHVCQUF1QixLQUdoQzhCLEtBQUtqRSxPQUFPbUQsTUFBTWlLLE1BQzNCLENBRUEsZ0JBQUE0MUMsQ0FBa0Izb0QsTUFDaEIsT0FBTzRKLEtBQUttTyxNQUFNOVgsUUFBT21xQixHQUFLQSxFQUFFcHFCLE9BQVNBLE1BQzNDLENBRUEsVUFBSStTLENBQVFqVCxPQUNWOEosS0FBSzlCLE9BQU8sQ0FBRSxzQkFBdUJoSSxPQUN2QyxDQUVBLHFCQUFNOG9ELENBQWlCcDJDLFVBQ3JCLE1BQU1FLFdBQWE5SSxLQUFLakUsT0FBT21ELE1BQU0wSixVQUMvQnhTLEtBQU8sZ0JBQWdCd1MsaUJBQ3ZCNUksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDOUgsTUFBTzBTLFdBQzlCLENBUUEsb0JBQU13bUIsQ0FBZ0IydkIsY0FBZXg2QixhQUFjLEVBQU9ubEIsUUFBVSxDQUFDLEdBQ25FLE1BQU11K0IsT0FBUzc5QixLQUFLNHVDLGFBQWFxUSxjQUFjajNDLGVBQy9DLElBQUs2MUIsT0FNSCxPQUxBOTBCLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLHFCQUFzQixDQUNyQ2lyQyxRQUFTRCxpQkFHTixLQUdULE1BQU1ocEMsTUFBUSxJQUFJbEMsVUFPbEIsR0FMSXpVLFFBQVFvRixXQUFVdVIsTUFBTWpCLGFBQWU5WSxPQUFPb0QsUUFBUW9GLFdBQ3REcEYsUUFBUWdYLGFBQ1ZMLE1BQU1LLFdBQWExTyxjQUFjdW1CLGtCQUFrQjd1QixRQUFRZ1gsY0FHeERtTyxtQkFDQzVtQixJQUFjeUIsUUFBUWdYLGlCQUFjelksSUFBY3lCLFFBQVFvRixVQUFVLENBQ3RFLE1BQU1nNkIsWUFBYzdLLFdBQVduakIsT0FBT3BSLFNBQ2xDby9CLFFBQ0Z6b0IsTUFBTWpCLGFBQWU5WSxPQUFPd2lDLE1BQU14aEMsSUFBSSxjQUN0QytZLE1BQU1LLFdBQWFwYSxPQUFPd2lDLE1BQU14aEMsSUFBSSxlQUNwQytZLE1BQU1raUIsaUJBQW1CajhCLE9BQU93aUMsTUFBTXhoQyxJQUFJLHFCQUMxQytZLE1BQU1taUIsc0JBQXdCbDhCLE9BQzVCd2lDLE1BQU14aEMsSUFBSSwwQkFHaEIsQ0FHRitZLE1BQU1oYyxNQUFRK0YsS0FBS3VNLFNBQ0csVUFBbEJqTixRQUFRaUUsTUFBbUIwUyxNQUFNME8sU0FBVSxFQUMxQzFPLE1BQU0wTyxVQUFZcmxCLFFBQVFpRSxZQUN6QjBTLE1BQU00b0IsY0FBY2hCLE9BQU9oaUMsS0FDakNvYSxNQUFNa2dCLFdBQ1IsQ0FRQSx5QkFBTWhILENBQ0pnd0IsbUJBQ0ExNkIsYUFBYyxFQUNkbmxCLFFBQVUsQ0FBQyxHQUVYLE1BQU04aEMsS0FBT3BoQyxLQUFLaTVDLGtCQUFrQmtHLG9CQUVwQyxJQUFLL2QsS0FPSCxZQU5BcjRCLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLDZCQUE4QixDQUM3Q2lyQyxRQUFTQyxtQkFDVGxsRCxNQUFPK0YsS0FBSzVKLFFBTWxCLE1BQU02ZixNQUFRLElBQUlsQyxVQU9sQixHQUxJelUsUUFBUW9GLFdBQVV1UixNQUFNakIsYUFBZTlZLE9BQU9vRCxRQUFRb0YsV0FDdERwRixRQUFRZ1gsYUFDVkwsTUFBTUssV0FBYTFPLGNBQWN1bUIsa0JBQWtCN3VCLFFBQVFnWCxjQUd4RG1PLG1CQUNDNW1CLElBQWN5QixRQUFRZ1gsaUJBQWN6WSxJQUFjeUIsUUFBUW9GLFVBQVUsQ0FDdEVwRixRQUFRMnVCLFlBQWNtVCxLQUFLL2pDLE1BQzNCLE1BQU1xaEMsWUFBYzdLLFdBQVduakIsT0FBT3BSLFNBQ2xDby9CLFFBQ0Z6b0IsTUFBTWpCLGFBQWU5WSxPQUFPd2lDLE1BQU14aEMsSUFBSSxjQUN0QytZLE1BQU1LLFdBQWFwYSxPQUFPd2lDLE1BQU14aEMsSUFBSSxlQUNwQytZLE1BQU1raUIsaUJBQW1CajhCLE9BQU93aUMsTUFBTXhoQyxJQUFJLHFCQUMxQytZLE1BQU1taUIsc0JBQXdCbDhCLE9BQzVCd2lDLE1BQU14aEMsSUFBSSwwQkFHaEIsQ0FHRitZLE1BQU1oYyxNQUFRK0YsS0FBS3VNLFNBQ0csVUFBbEJqTixRQUFRaUUsTUFBbUIwUyxNQUFNME8sU0FBVSxFQUMxQzFPLE1BQU0wTyxVQUFZcmxCLFFBQVFpRSxZQUN6QjBTLE1BQU02b0IsbUJBQW1Cc0MsS0FBS3ZsQyxLQUNwQ29hLE1BQU1rZ0IsV0FDUixDQUVBLHVCQUFPaXBCLEdBQ0wsUUFDNEMsSUFBbkM5aEQsS0FBSytoRCxhQUFhQyxjQUNVLE9BQW5DaGlELEtBQUsraEQsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNdmdDLFNBQVd6aEIsS0FBSytoRCxhQUFhQyxhQUFhdHdDLFdBQVd5VCxTQUN6RCxVQUVJbE8sUUFBVWpYLEtBQUsraEQsYUFBYUMsYUFBYXppRCxRQUFRLFVBQVVFLFFBQVF3WCxRQUNuRWdyQyxXQUFhamlELEtBQUsraEQsYUFBYUMsYUFBYXppRCxRQUFRLGdCQUFnQkUsU0FBU3lpRCxNQUNuRixRQUF1QixJQUFaanJDLGNBQWlELElBQWZnckMsaUJBQTJFLElBQXRDeDJDLEdBQUcwMkMsUUFBUUYsYUFBYXRsRCxPQUFPaVUsR0FBb0IsQ0FDbkksTUFBTWhCLFFBQVVuRSxHQUFHMDJDLFFBQVFGLFlBQVl0bEQsTUFBTWlVLEdBQ3ZDalUsTUFBUXFELEtBQUtxUCxPQUFPelAsSUFBSWdRLFNBQzlCLEdBQUlqVCxNQUFPLENBQ1QsTUFBTWdPLE1BQVFoTyxNQUFNa1UsTUFBTWpSLElBQUlxWCxTQUM5QixHQUFJdE0sTUFBTyxDQUNULElBQUl5M0MsUUFBVXBpRCxLQUFLQyxLQUFLMFcsT0FDdEI4SyxTQUFXLHFCQUF1QixvQkFDbEMsQ0FDRTlXLE1BQU9BLE1BQU03UixLQUNiNGQsUUFBUy9MLE1BQU0vUixNQUNmZ2UsS0FBTTlSLEtBQUswSSxNQUFNN0MsTUFBTS9SLE1BQVEsR0FDL0JtVSxRQUFTakksS0FBSzBJLE1BQU03QyxNQUFNL1IsTUFBUSxLQWdCdEMsT0FiSW9ILEtBQUtzRyxLQUFLMkUsT0FDWm0zQyxTQUVFcGlELEtBQUtDLEtBQUswVyxPQUFPLDBCQUEyQixDQUMxQzNhLE1BQ0VnRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxrQkFDMUJqRCxNQUFNK2pDLGVBQ0YxZ0MsS0FBS0MsS0FBSzBXLE9BQU8saUNBQWtDLENBQ25EN2QsS0FBTTZELE1BQU03RCxPQUVaLE1BR0xzcEQsT0FDVCxDQUNGLENBQ0YsQ0FDRixDQUNBLE9BQU8sQ0FDVCxDQUVBLGtCQUFNNTdCLENBQWM2dUIsZUFBZ0J0MEMsS0FBTyxTQUV6QyxHQURrQnMwQyxlQUFlOXNDLE1BQU0sb0JBQ3hCLENBRWIsSUFBSUksS0FBT2pHLEtBQUswN0Msb0JBQW9CL0ksZ0JBQ3BDLElBQUsxc0MsS0FBTSxDQUNULE1BQU0wNUMsZUFBaUJyaUQsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTXkxQixjQUFjLENBQUV6MUIsTUFBT3d2QixlQUFnQmtHLGFBQWEsSUFDakcsR0FBd0IsSUFBcEI4RyxTQUFTLytDLGVBQ0xaLEtBQUs1Qyx3QkFBd0IsT0FBUXVpRCxVQUMzQzE1QyxLQUFPakcsS0FBSzA3QyxvQkFBb0IvSSxnQkFDNUIxc0MsTUFDRixHQUFrQixVQUFkQSxLQUFLNUgsS0FDUDBLLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBSzBXLE9BQU8sNEJBQTZCLENBQ2xFN2QsS0FBTTZQLEtBQUs3UCxLQUNYd3JCLFFBQVMzYixLQUFLL1AsY0FFWCxHQUFrQixXQUFkK1AsS0FBSzVILEtBQW1CLE9BQzNCNEgsS0FBS3NGLFNBQ1gsTUFBTWtSLFFBQVUsQ0FBQyxFQUNqQixHQUFrQyxLQUE5QnhXLEtBQUtsSyxPQUFPa00sTUFBTWdHLEtBQUtDLElBQTZDLEtBQWhDakksS0FBS2xLLE9BQU9rTSxNQUFNZ0csS0FBSzdYLEtBQWEsQ0FDMUUsTUFBTTZSLFlBQWNqSSxLQUFLOGpCLGFBQWE3ZCxLQUFLbEssT0FBT2tNLE1BQU1nRyxLQUFLN1gsS0FBTSxTQUMvRDZSLE1BQU1ySCxTQUNSNmIsUUFBUSx3QkFBMEJ4VSxNQUFNLEdBQUdpRyxHQUMzQ3VPLFFBQVEsMEJBQTRCeFUsTUFBTSxHQUFHN1IsS0FFakQsQ0FDQSxHQUF3QyxLQUFwQzZQLEtBQUtsSyxPQUFPa00sTUFBTW1HLFdBQVdGLElBQW1ELEtBQXRDakksS0FBS2xLLE9BQU9rTSxNQUFNbUcsV0FBV2hZLEtBQWEsQ0FDdEYsTUFBTTZSLFlBQWNqSSxLQUFLOGpCLGFBQWE3ZCxLQUFLbEssT0FBT2tNLE1BQU1tRyxXQUFXaFksS0FBTSxTQUNyRTZSLE1BQU1ySCxTQUNSNmIsUUFBUSw4QkFBZ0N4VSxNQUFNLEdBQUdpRyxHQUNqRHVPLFFBQVEsZ0NBQWtDeFUsTUFBTSxHQUFHN1IsS0FFdkQsQ0FDSXdKLE9BQU9tRSxLQUFLMFksU0FBUzdiLGNBQ2pCcUYsS0FBSy9ILE9BQU91ZSxRQUV0QixDQUdOLENBQ0EsR0FBSXhXLEtBQ0YsTUFBTyxDQUFDQSxLQUVaLENBRUEsSUFBSTI1QyxRQUFVNS9DLEtBQUtxOUIsZ0JBQWdCc1YsZ0JBQ25DLElBQUtpTixRQUFRaC9DLE9BQVEsQ0FDbkIsTUFBTXU0QyxJQUFNNzdDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLFlBRWhDMmlELFFBQVV2aUQsS0FBSzZRLE1BQU16TyxNQUFNMUosSUFDL0IsR0FBSUEsRUFBRXFJLE9BQVNBLE1BQVFySSxFQUFFSSxPQUFTdThDLGVBQWdCLENBQ2hELE1BQU1qc0MsS0FBT201QyxRQUFRM2dELE9BQU93QyxNQUFNa3hDLFdBQVdsc0MsS0FDN0MsUUFBSUEsTUFBUTlHLE9BQU9tRSxLQUFLMkMsTUFBTTlGLE9BQVMsSUFBTzhGLEtBQUt5eUMsS0FLckQsQ0FDQSxPQUFPLEtBS1QsR0FISTBHLFNBQ0ZELFFBQVExb0QsS0FBSzJvRCxTQUVRLElBQW5CRCxRQUFRaC9DLE9BRVYsSUFBSyxNQUFNb3VCLFFBQVExeEIsS0FBS3dpRCxNQUN0QixHQUE0QixTQUF4Qjl3QixLQUFLK3dCLFVBQVUxaEQsS0FBaUIsT0FDNUIyd0IsS0FBS2d4QixlQUNYLE1BQU1ILFFBQVV2aUQsS0FBSzZRLE1BQU16TyxNQUFNMUosSUFDL0IsR0FBSUEsRUFBRXFJLE9BQVNBLE1BQVFySSxFQUFFSSxPQUFTdThDLGVBQWdCLENBQ2hELE1BQU1qc0MsS0FBT201QyxRQUFRM2dELE9BQU93QyxNQUFNa3hDLFdBQVdsc0MsS0FDN0MsUUFBSUEsTUFBUTlHLE9BQU9tRSxLQUFLMkMsTUFBTTlGLE9BQVMsSUFBTzhGLEtBQUt5eUMsS0FLckQsQ0FDQSxPQUFPLEtBRUwwRyxTQUNGRCxRQUFRMW9ELEtBQUsyb0QsUUFFakIsQ0FHSixHQUF1QixJQUFuQkQsUUFBUWgvQyxlQUNKWixLQUFLNUMsd0JBQXdCLE9BQVF3aUQsU0FDM0NBLFFBQVU1L0MsS0FBS3E5QixnQkFBZ0JzVixnQkFDUixJQUFuQmlOLFFBQVFoL0MsUUFDVixHQUF3QixVQUFwQmcvQyxRQUFRLEdBQUd2aEQsS0FDYjBLLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBSzBXLE9BQU8sNEJBQTZCLENBQ2xFN2QsS0FBTXdwRCxRQUFRLEdBQUd4cEQsS0FDakJ3ckIsUUFBU2crQixRQUFRLEdBQUcxcEQsY0FFakIsR0FBd0IsV0FBcEIwcEQsUUFBUSxHQUFHdmhELEtBQW1CLE9BQ2pDdWhELFFBQVEsR0FBR3IwQyxTQUNqQixNQUFNa1IsUUFBVSxDQUFDLEVBQ2pCLEdBQXdDLEtBQXBDbWpDLFFBQVEsR0FBRzdqRCxPQUFPa00sTUFBTWdHLEtBQUtDLElBQW1ELEtBQXRDMHhDLFFBQVEsR0FBRzdqRCxPQUFPa00sTUFBTWdHLEtBQUs3WCxLQUFhLENBQ3RGLE1BQU02UixZQUFjakksS0FBSzhqQixhQUFhODdCLFFBQVEsR0FBRzdqRCxPQUFPa00sTUFBTWdHLEtBQUs3WCxLQUFNLFNBQ3JFNlIsTUFBTXJILFNBQ1I2YixRQUFRLHdCQUEwQnhVLE1BQU0sR0FBR2lHLEdBQzNDdU8sUUFBUSwwQkFBNEJ4VSxNQUFNLEdBQUc3UixLQUVqRCxDQUNBLEdBQThDLEtBQTFDd3BELFFBQVEsR0FBRzdqRCxPQUFPa00sTUFBTW1HLFdBQVdGLElBQXlELEtBQTVDMHhDLFFBQVEsR0FBRzdqRCxPQUFPa00sTUFBTW1HLFdBQVdoWSxLQUFhLENBQ2xHLE1BQU02UixZQUFjakksS0FBSzhqQixhQUFhODdCLFFBQVEsR0FBRzdqRCxPQUFPa00sTUFBTW1HLFdBQVdoWSxLQUFNLFNBQzNFNlIsTUFBTXJILFNBQ1I2YixRQUFRLDhCQUFnQ3hVLE1BQU0sR0FBR2lHLEdBQ2pEdU8sUUFBUSxnQ0FBa0N4VSxNQUFNLEdBQUc3UixLQUV2RCxDQUNJd0osT0FBT21FLEtBQUswWSxTQUFTN2IsY0FDakJnL0MsUUFBUSxHQUFHMWhELE9BQU91ZSxRQUU1QixDQUdOLENBQ0EsT0FBT21qQyxPQUNULENBRUEsZ0JBQU12d0IsQ0FBWXNtQixVQUFXbHhCLFlBQWFubEIsUUFBVSxDQUFDLEdBQ25ELE1BQU0yZ0QsZ0JBQWtCdEssVUFBVXYvQyxLQUFPdS9DLFVBQVV2L0MsS0FBT3UvQyxVQUMxRCxJQUFJMXRDLFlBQWNqSSxLQUFLOGpCLGFBQWFtOEIsZ0JBQWlCLFNBSXJELEdBSEloNEMsTUFBTXJILFNBQ1J0QixRQUFRbEosS0FBTzZSLE1BQU0sR0FBRzdSLE9BRXJCNlIsTUFBTXJILE9BQVEsQ0FDakIsSUFBSXFGLEtBQU8sS0FDWCxHQUFJMHZDLFVBQVUzbUIsS0FBTSxDQUNsQixNQUFNQSxLQUFPMXhCLEtBQUt3aUQsTUFBTTVpRCxJQUFJeTRDLFVBQVUzbUIsTUFDdEMsR0FBNkIsU0FBekJBLEtBQUsrd0IsU0FBU0csT0FBbUIsT0FDckNqNkMsV0FBYStvQixLQUFLbXhCLFlBQVl4SyxVQUFVem5DLEdBQzFDLE1BQVd5bkMsVUFBVXpuQyxLQUNuQmpJLEtBQU8zSSxLQUFLNlEsTUFBTWpSLElBQUl5NEMsVUFBVXpuQyxLQUlsQyxJQUFLakksS0FBTSxDQUdULE1BQU1nUSxNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU1tcUMsVUFBWSxVQUNabnFDLE1BQU05VSxPQUNaOFUsTUFBTWtnQixXQUNSLENBQ0EsSUFBS2x3QixLQUNILE9BQU84QyxHQUFHQyxjQUFjdUssS0FDdEJqVyxLQUFLQyxLQUFLMFcsT0FBTyxnQkFBa0IsSUFDakMzVyxLQUFLQyxLQUFLMFcsT0FBTyw2QkFBOEIsQ0FDN0NpckMsUUFBU2UsZ0JBQ1RobUQsTUFBTytGLEtBQUs1SixRQUtwQixJQUFJc2EsUUFBUyxFQVliLFNBWE0rakIsT0FBT3lsQixRQUFRLENBQ25CeHJDLE1BQU8sR0FBR3BSLEtBQUtDLEtBQUtDLFNBQVMsb0JBQzdCaVQsUUFBUyxNQUFNblQsS0FBS0MsS0FBSzBXLE9BQU8sc0JBQXVCLENBQ3JENlEsT0FBUTZ3QixVQUFVdi9DLEtBQ2xCNkQsTUFBTytGLEtBQUs1SixhQUVkK2pELElBQUssS0FDSHpwQyxRQUFTLE1BSUUsSUFBWEEsT0FFRyxPQUlQLFNBTFExUSxLQUFLNUMsd0JBQXdCLE9BQVEsQ0FBQ3dCLFFBQVFDLE1BQU13TyxVQUFVcEgsUUFHdEVnQyxNQUFRakksS0FBS3E5QixnQkFBZ0JwM0IsS0FBSzdQLE9BRTdCNlIsTUFBTXJILE9BQVEsT0FFbkIsR0FBSXRELEtBQUtzRyxLQUFLMkUsS0FBTSxDQUNsQixNQUFNMG5DLGlCQUFtQnpOLGlCQUFpQjl4QixPQUN4Q3pJLE1BQU0sR0FBRzdSLEtBQ1Q2UixNQUFNLEdBQUd3QyxNQUVMdlUsTUFBUWdHLE9BQU8rekMsV0FBVy95QyxJQUFJLHFCQUM5QitLLE1BQU0sR0FBR280QyxZQUFZbnFELE1BQzdCLENBQ0YsQ0FFQSxNQUFNK2YsTUFBUSxJQUFJbEMsVUFTbEIsUUFQZ0MsSUFBckJ6VSxRQUFRb0YsV0FDakJ1UixNQUFNakIsYUFBZTlZLE9BQU9vRCxRQUFRb0YsZ0JBRUosSUFBdkJwRixRQUFRZ1gsYUFDakJMLE1BQU1LLFdBQWExTyxjQUFjdW1CLGtCQUFrQjd1QixRQUFRZ1gsY0FHeERtTyxtQkFDK0IsSUFBdkJubEIsUUFBUWdYLGlCQUEwRCxJQUFyQmhYLFFBQVFvRixVQUEwQixDQUN4RixNQUFNZzZCLFlBQWM3SyxXQUFXbmpCLE9BQU9wUixTQUNsQ28vQixRQUNGem9CLE1BQU1qQixhQUFlOVksT0FBT3dpQyxNQUFNeGhDLElBQUksY0FDdEMrWSxNQUFNSyxXQUFhcGEsT0FBT3dpQyxNQUFNeGhDLElBQUksZUFDcEMrWSxNQUFNa2lCLGlCQUFtQmo4QixPQUFPd2lDLE1BQU14aEMsSUFBSSxxQkFDMUMrWSxNQUFNbWlCLHNCQUF3Qmw4QixPQUM1QndpQyxNQUFNeGhDLElBQUksMEJBR2hCLENBR0YrWSxNQUFNaGMsTUFBUStGLEtBQUt1TSxTQUNuQjBKLE1BQU1oTyxNQUFRQSxNQUFNLEdBQUdpRyxHQUNELFVBQWxCNU8sUUFBUWlFLE1BQW1CMFMsTUFBTTBPLFNBQVUsRUFDMUMxTyxNQUFNME8sVUFBWXJsQixRQUFRaUUsTUFDUCxVQUFwQmpFLFFBQVEwZCxRQUFxQi9HLE1BQU0rRyxTQUFVLEVBQzVDL0csTUFBTStHLFVBQVkxZCxRQUFRMGQsY0FDekIvRyxNQUFNOVUsT0FDWjhVLE1BQU1rZ0IsVUFBVWxnQixNQUFNK0csUUFDeEIsQ0FFQSxpQkFBTXVTLENBQWErd0IsV0FBWTc3QixhQUFjLEdBQzNDLElBQUlLLE9BT0osUUFOK0IsSUFBcEJ3N0IsV0FBVzNpRCxPQUNwQm1uQixhQUFlNWUsU0FBU282QyxXQUFXM2lELFlBRVIsSUFBbEIyaUQsV0FBV3B5QyxLQUNwQjRXLE9BQVM5a0IsS0FBS21PLE1BQU1qUixJQUFJb2pELFdBQVdweUMsTUFFaEM0VyxPQUFRLENBQ1gsSUFBSXk3QixRQUFVdmdELEtBQUsrK0MsaUJBQWlCdUIsV0FBV2xxRCxNQUMvQyxHQUF1QixJQUFuQm1xRCxRQUFRMy9DLE9BQWMsQ0FDeEIsSUFBSXRELEtBQUtzRyxLQUFLMkUsS0EyQ1osWUFOQVEsR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLMFcsT0FBTyxrQ0FBbUMsQ0FDbERzMUIsVUFBV3ZwQyxLQUFLNUosS0FDaEIybkMsV0FBWXVpQixXQUFXbHFELFFBeENULENBQ2xCLElBQUk2UCxLQUFPLEtBQ1gsTUFBTStvQixLQUFPc3hCLFdBQVd0eEIsS0FBTzF4QixLQUFLd2lELE1BQU01aUQsSUFBSW9qRCxXQUFXdHhCLE1BQVEsS0FDakUsR0FBSUEsS0FBTSxDQUNSLEdBQTZCLFNBQXpCQSxLQUFLK3dCLFNBQVNHLE9BQW1CLE9BQ3JDajZDLFdBQWErb0IsS0FBS214QixZQUFZRyxXQUFXcHlDLEdBQzNDLE1BQVdveUMsV0FBV3B5QyxLQUNwQmpJLEtBQU8zSSxLQUFLNlEsTUFBTWpSLElBQUlvakQsV0FBV3B5QyxLQUduQyxJQUFLakksS0FDSCxPQUFPOEMsR0FBR0MsY0FBY3VLLEtBQ3RCalcsS0FBS0MsS0FBS0MsU0FBUyw4QkFJdkIsSUFBSWtULFFBQVMsUUFDUCtqQixPQUFPeWxCLFFBQVEsQ0FDbkJ4ckMsTUFBTyxHQUFHcFIsS0FBS0MsS0FBS0MsU0FBUyxvQkFDN0JpVCxRQUFTLE1BQU1uVCxLQUFLQyxLQUFLMFcsT0FBTyxzQkFBdUIsQ0FDckQ2USxPQUFRdzdCLFdBQVdscUQsS0FDbkI2RCxNQUFPK0YsS0FBSzVKLGFBRWQrakQsSUFBSyxLQUNIenBDLFFBQVMsS0FHYixNQUFNelcsV0FDMEIsSUFBdkIrRixLQUFLK0osUUFBUTlQLE1BQXdCK0YsS0FBSytKLE9BQU85UCxNQUFRK0YsS0FFbEUsSUFBZSxJQUFYMFEsT0FFRyxPQUVQLFNBSFF6VyxNQUFNbUQsd0JBQXdCLE9BQVEsQ0FBQzZJLEtBQUt1NkMsV0FFcERELFFBQVV0bUQsTUFBTThrRCxpQkFBaUI5NEMsS0FBSzdQLE9BQ2pDbXFELFFBQVEzL0MsT0FBUSxhQUNmMi9DLFFBQVEsR0FBR2gxQyxRQUNuQixDQVNGLE1BQVdnMUMsUUFBUTMvQyxPQUFTLEdBQzFCbUksR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLMFcsT0FBTyx3Q0FBeUMsQ0FDeERzMUIsVUFBV3ZwQyxLQUFLNUosS0FDaEIybkMsV0FBWXVpQixXQUFXbHFELFFBSTdCMHVCLE9BQVN5N0IsUUFBUSxFQUNuQixDQUVBLElBQUt6N0IsT0FBTy9vQixPQUFPOEssV0FBV2pQLEtBQU0sQ0FDOUIwRixLQUFLc0csS0FBS29oQixRQUFRemxCLEtBQU8sR0FDM0J3SixHQUFHQyxjQUFjdUssS0FBS2pXLEtBQUtDLEtBQUtDLFNBQVMsMkJBRzlCLElBQUlzbEMsbUJBQW1COWlDLEtBQUt1TSxTQUFXK3pDLFdBQVczaUQsTUFBUW1uQixPQUFPNVcsR0FBS3VXLGFBQzlFNGYsZ0JBQ1AsQ0FDQSxHQUFJdmYsT0FBTy9vQixPQUFPOEssV0FBV2pQLEtBQU0sQ0FDcEIsSUFBSWt1QyxtQkFBbUI5bEMsS0FBS3VNLFNBQVcrekMsV0FBVzNpRCxNQUFRbW5CLE9BQU81VyxHQUFLdVcsYUFDOUU0ZixnQkFDUCxDQUNGLENBRUEsb0JBQU1vYyxDQUFnQkMsUUFBUyxHQUM3QixHQUNPLGFBRENwakQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQ2YsQ0FDZixNQUFNaUUsS0FBTyxJQUFJNFMsVUFBVS9ULEtBQUtvUixVQVFoQyxPQVBBalEsS0FBSzRmLFVBQVcsRUFDaEI1ZixLQUFLdy9DLFVBQVcsRUFDaEJ4L0MsS0FBS3kvQyxvQkFBcUIsRUFDMUJ6L0MsS0FBS0csVUFBNkQsSUFBbERoRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxvQkFDMUNpRSxLQUFLNk8sT0FBUyx3QkFDUjdPLEtBQUsyOUIsbUJBQW1CLE1BQU80aEIsT0FBUyxFQUFJLEdBQ2xEdi9DLEtBQUtnMUIsWUFFSGgxQixLQUFLMlMsYUFBZTlULEtBQUtqRSxPQUFPNm5CLGdCQUFnQm50QixJQUFJUCxNQUFRLEdBRWhFLENBR0UsT0FBT3dxRCxPQUNIMWdELEtBQUtqRSxPQUFPNm5CLGdCQUFnQm50QixJQUFJUCxNQUFRLEdBQ3hDOEosS0FBS2pFLE9BQU82bkIsZ0JBQWdCbnRCLElBQUlQLEtBRTFDLENBRUEsWUFBQW94QyxDQUFjMStCLFVBQ1osT0FBSzVJLEtBQUtqRSxPQUFPbUQsUUFPWmMsS0FBS2pFLE9BQU9tRCxNQUFNMEosV0FDaEI1SSxLQUFLakUsT0FBT21ELE1BQU0wSixXQVB2QjVJLEtBQUtqRSxPQUFPbUQsTUFBUSxDQUFDLEVBQ3JCYyxLQUFLakUsT0FBT21ELE1BQU1pSyxRQUFTLEVBQzNCbkosS0FBSzlCLE9BQU8sQ0FBRSxlQUFnQixDQUFDLEtBQ3hCLEVBS1gsQ0FFQSxrQkFBTWc0QyxDQUFjdHRDLGdCQUNaNUksS0FBSzlCLE9BQU8sQ0FBRSxDQUFDLGdCQUFnQjBLLGFBQWEsR0FDcEQsQ0FFQSxvQkFBTWk0QyxDQUFnQmo0QyxnQkFDZDVJLEtBQUs5QixPQUFPLENBQUUsQ0FBQyxnQkFBZ0IwSyxhQUFhLEdBQ3BELENBRUEsZUFBQThjLENBQWlCcFIsUUFDZixJQUFJd1EsT0FBU2c4QixhQUFheHNDLFFBTTFCLEdBTEt3USxZQUUrQixJQUFsQkEsT0FBTy9vQixTQUN2QitvQixPQUFTeG5CLEtBQUt3aUQsTUFBTTVpRCxJQUFJNG5CLE9BQU9rSyxNQUFNOXhCLElBQUk0bkIsT0FBT3V0QixNQUZoRHZ0QixPQUFTOWtCLEtBQUttTyxNQUFNalIsSUFBSW9YLFFBSU4sV0FBaEJ3USxPQUFPem1CLEtBQW1CLE9BQU8sS0FDckMsTUFBTXdsQixPQUFTLEdBUWYsT0FQSWlCLE9BQU8vb0IsT0FBT2tNLE1BQU1nRyxLQUFLQyxJQUMzQjJWLE9BQU8zc0IsS0FBSzhJLEtBQUttTyxNQUFNalIsSUFBSTRuQixPQUFPL29CLE9BQU9rTSxNQUFNZ0csS0FBS0MsS0FHbEQ0VyxPQUFPMWIsc0JBQXdCMGIsT0FBTy9vQixPQUFPa00sTUFBTW1HLFdBQVdGLElBQ2hFMlYsT0FBTzNzQixLQUFLOEksS0FBS21PLE1BQU1qUixJQUFJNG5CLE9BQU8vb0IsT0FBT2tNLE1BQU1tRyxXQUFXRixLQUVyRDJWLE1BQ1QsQ0FHQSxJQUFBbmtCLENBQU10SixNQUNKLElBQUtBLEtBQU0sT0FFWCxNQUFNNlAsS0FBT2pHLEtBQUttTyxNQUFNalIsSUFBSTlHLE1BQzVCLEdBQUk2UCxLQUNGLE1BQU8sQ0FDTDVILEtBQU0sT0FDTm5JLE1BQU8rUCxNQUlYLE1BQ015b0IsUUFEUyxjQUNRcXlCLEtBQUszcUQsTUFDNUIsSUFBSW9SLFVBQVksS0FDWmtuQixTQUFXQSxRQUFROXRCLFNBQVE0RyxVQUFZa25CLFFBQVEsSUFFbkQsTUFBTXptQixNQUFRakksS0FBSzZqQixPQUFPeHRCLFFBQU9KLEtBRTNCQSxFQUFFRyxPQUNISCxFQUFFRyxLQUFLZ2lELG9CQUFvQnpvQyxRQUFRLE1BQU8sTUFDekN2WixLQUFLZ2lELG9CQUFvQnpvQyxRQUFRLE1BQU8sS0FDeEMxWixFQUFFRyxLQUFLZ2lELG9CQUFvQnpvQyxRQUFRLE1BQU8sTUFDeEN2WixLQUFLZ2lELG9CQUFvQnpvQyxRQUFRLE1BQU8sS0FDMUMxWixFQUFFRyxLQUFLZ2lELG9CQUFvQnpvQyxRQUFRLE1BQU8sTUFDeENuSSxXQUFXNHdDLG9CQUFvQnpvQyxRQUFRLE1BQU8sT0FHdEQsR0FBSTFILE1BQU1ySCxPQUFRLE1BQU8sQ0FBRXZDLEtBQU0sT0FBUW5JLE1BQU8rUixNQUFNLElBR3RELE1BQU0rNEMsUUFBVSxDQUFDLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sT0FDbEUsSUFBSyxJQUFJeGdDLEVBQUksRUFBR0EsRUFBSXdnQyxRQUFRcGdELE9BQVE0ZixJQUFLLENBQ3ZDLE1BQU00Z0IsS0FBT3BoQyxLQUFLaTVDLGtCQUFrQitILFFBQVF4Z0MsSUFDNUMsR0FBSTRnQixLQUFNLENBRVIsR0FEQUEsS0FBS2hyQyxLQUFPZ3JDLEtBQUsvakMsTUFFZitqQyxLQUFLdmxDLEtBQUt1OEMsc0JBQXdCaGlELEtBQUs0UixlQUN2Q281QixLQUFLdmxDLEtBQUt1OEMsc0JBQXdCNXdDLFdBQVdRLGNBRTdDLE1BQU8sQ0FBRTNKLEtBQU0saUJBQWtCbkksTUFBT2tyQyxNQUUxQyxHQUNFQSxLQUFLNTVCLFdBQVc0d0Msc0JBQXdCaGlELEtBQUs0UixlQUM3Q281QixLQUFLNTVCLFdBQVc0d0Msc0JBQXdCNXdDLFdBQVdRLGNBRW5ELE1BQU8sQ0FBRTNKLEtBQU0saUJBQWtCbkksTUFBT2tyQyxNQUUxQyxHQUNFQSxLQUFLL2pDLE9BQU8rNkMsc0JBQXdCaGlELEtBQUs0UixlQUN6Q281QixLQUFLL2pDLE9BQU8rNkMsc0JBQXdCNXdDLFdBQVdRLGNBRS9DLE1BQU8sQ0FBRTNKLEtBQU0saUJBQWtCbkksTUFBT2tyQyxLQUU1QyxDQUNGLENBR0EsTUFBTTZmLFVBQVksQ0FBQyxNQUFPLE9BQzFCLElBQUssSUFBSXpnQyxFQUFJLEVBQUdBLEVBQUl5Z0MsVUFBVXJnRCxPQUFRNGYsSUFBSyxDQUN6QyxNQUFNMGdDLEtBQU9saEQsS0FBSzR1QyxhQUFhcVMsVUFBVXpnQyxJQUN6QyxHQUFJMGdDLEtBQU0sQ0FFUixHQURBQSxLQUFLOXFELEtBQU84cUQsS0FBSzdqRCxNQUVmNmpELEtBQUtybEQsS0FBS3U4QyxzQkFBd0JoaUQsS0FBSzRSLGVBQ3ZDazVDLEtBQUtybEQsS0FBS3U4QyxzQkFBd0I1d0MsV0FBV1EsY0FFN0MsTUFBTyxDQUFFM0osS0FBTSxZQUFhbkksTUFBT2dyRCxNQUVyQyxHQUNFQSxLQUFLMTVDLFdBQVc0d0Msc0JBQXdCaGlELEtBQUs0UixlQUM3Q2s1QyxLQUFLMTVDLFdBQVc0d0Msc0JBQXdCNXdDLFdBQVdRLGNBRW5ELE1BQU8sQ0FBRTNKLEtBQU0sWUFBYW5JLE1BQU9nckQsTUFFckMsR0FDRUEsS0FBSzdqRCxPQUFPKzZDLHNCQUF3QmhpRCxLQUFLNFIsZUFDekNrNUMsS0FBSzdqRCxPQUFPKzZDLHNCQUF3QjV3QyxXQUFXUSxjQUUvQyxNQUFPLENBQUUzSixLQUFNLFlBQWFuSSxNQUFPZ3JELEtBRXZDLENBQ0YsQ0FJRixDQUVBLGVBQUlDLEdBQ0YsT0FBT25oRCxLQUFLNmpCLE9BQU94dEIsUUFBT0osR0FFdEJBLEVBQUU4RixPQUFPOEssWUFBWTdQLFNBQ3JCZixFQUFFOEYsT0FBT2tMLGdCQUFnQm14QyxzQkFDdkI5NkMsS0FBS0MsS0FDRkMsU0FBUyxpQ0FDUjQ2QyxxQkFHWixDQUVBLGVBQUlnSixHQUNGLE9BQU9waEQsS0FBSzZqQixPQUFPeHRCLFFBQU9KLEdBRXRCQSxFQUFFOEYsT0FBTzhLLFlBQVk3UCxTQUNyQmYsRUFBRThGLE9BQU9rTCxnQkFBZ0JteEMsc0JBQ3ZCOTZDLEtBQUtDLEtBQ0ZDLFNBQVMsaUNBQ1I0NkMscUJBR1osQ0FFQSxhQUFJaUosR0FDRixPQUFJcmhELEtBQUtqQyxNQUFNa1QsTUFDTmpSLEtBQUtqQyxNQUFNa1QsTUFBTXRULEtBRW5CLElBQ1QsQ0FFQSxZQUFJNE8sR0FLRixPQUFJdk0sS0FBS2pDLE1BQU1rVCxNQUNOLEdBQUdqUixLQUFLakMsTUFBTWtULE1BQU1sSCxPQUFPbUUsTUFBTWxPLEtBQUtqQyxNQUFNa1QsTUFBTS9DLEtBR2xEbE8sS0FBS2tPLEVBV2hCLENBRUEsWUFBSWtELEdBQ0YsT0FBSXBSLEtBQUttUyxlQUFlNmhDLFVBQWtCaDBDLEtBQUtrTyxHQUN4Q2xPLEtBQUt1TSxRQUNkLENBRUEsc0JBQU9zRSxDQUFpQmhWLEtBRXRCLEdBQUlBLElBQUltSCxTQUFTLEtBQU0sQ0FFckIsTUFBT3lKLFFBQVNELFNBQVczUSxJQUFJNlEsTUFBTSxLQUNyQyxHQUFnQixVQUFaRCxRQUNGLE9BQU9uUCxLQUFLcVAsT0FBT0MsT0FBT0osU0FDckIsQ0FDTCxNQUFNSyxNQUFRdlAsS0FBS3dQLE9BQU81UCxJQUFJdVAsU0FDOUIsSUFBS0ksTUFBTyxPQUFPLEtBQ25CLE1BQU1FLFVBQVlGLE1BQU1HLG9CQUFvQixRQUFTUixTQUNyRCxJQUFLTyxVQUFXLE9BQU8sS0FFdkIsT0FEYyxJQUFJRSxNQUFNRixXQUNYOVMsS0FDZixDQUNGLENBR0EsT0FBT3FELEtBQUtxUCxPQUFPelAsSUFBSXJCLE1BQVEsSUFDakMsQ0FFQSw4QkFBSXlsRCxHQUNGLElBQUssTUFBTyxDQUFFcHJELFNBQVUwSixPQUFPMkssUUFBUXZLLEtBQUtqRSxPQUFPNm5CLGlCQUNqRCxHQUFJOW5CLE1BQU1JLE9BQU9oRyxNQUFNOEQsVUFBVyxPQUFPLEVBRTNDLE9BQU8sQ0FDVCxDQUVBLHFCQUFJdW5ELEdBQ0YsSUFBSyxNQUFNdDVDLFNBQVNqSSxLQUFLNmpCLE9BQ3ZCLEdBQUkvbkIsTUFBTW1NLE1BQU1sTSxRQUFRN0YsT0FBUSxPQUFPLEVBRXpDLE9BQU8sQ0FDVCxDQUtBLDhCQUFNc3JELEdBQ0osTUFBTTU5QixnQkFBa0IsQ0FBQyxFQUN6QixJQUFLLE1BQU8vbkIsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUXZLLEtBQUtqRSxPQUFPNm5CLGlCQUNwRCxHQUFJMXRCLE1BQU04RCxVQUFZOUQsTUFBTThELFFBQVEyUSxXQUFXLEtBQU0sQ0FDbkQsTUFBTTBNLEVBQUksSUFBSXZWLEtBQUs1TCxNQUFNOEQsZUFDbkJxZCxFQUFFbFcsS0FBSyxDQUFFbUIsT0FBTyxJQUNsQitVLEVBQUU1VSxRQUNKbWhCLGdCQUFnQiwwQkFBMEIvbkIsYUFBZXVHLEtBQUswSSxNQUM1RHVNLEVBQUU1VSxPQUdSLE9BR0l6QyxLQUFLOUIsT0FBTzBsQix1QkFDWjVqQixLQUFLeWhELDRCQUNiLENBS0EsaUNBQU1DLEdBQ0osTUFBTTk5QixnQkFBa0IsQ0FBQyxFQUN6QixJQUFLLE1BQU8vbkIsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUXZLLEtBQUtqRSxPQUFPNm5CLGlCQUNwRCxHQUFJMXRCLE1BQU04RCxVQUFZOUQsTUFBTThELFFBQVEyUSxXQUFXLEtBQU0sQ0FDbkQsTUFBTWczQyxRQUFVLElBQUlqcUMsWUFBWSxJQUFNeGhCLE1BQU04RCxRQUFVLEtBQU80RSxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBcUIsZUFBYixZQUFxRCxDQUFFOFksVUFBVSxFQUFNOU0sVUFBVSxJQUFRdEksTUFDek1taEIsZ0JBQWdCLDBCQUEwQi9uQixhQUFlOGxELE9BQzNELE9BR0kzaEQsS0FBSzlCLE9BQU8wbEIsdUJBQ1o1akIsS0FBS3loRCw0QkFDYixDQUtBLGdDQUFNQSxHQUNKLE1BQU03OUIsZ0JBQWtCLENBQUMsRUFDekIsSUFBSyxNQUFPL25CLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVF2SyxLQUFLakUsT0FBTzZuQixpQkFDcEQsR0FBSTF0QixNQUFNOEQsU0FBVzlELE1BQU04RCxRQUFRMlEsV0FBVyxLQUFNLENBQ2xELElBQUlpM0MsVUFDSixJQUNFQSxVQUFZLElBQUk5L0MsS0FDZDVMLE1BQU04RCxRQUNOZ0csS0FBS2dLLHdCQUNIcEwsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQXFCLGVBQWIsWUFBcUQsQ0FBRWdNLFVBQVUsSUFBUXRJLEtBQ2xJLENBQUUsTUFBT3VJLEtBQ1A0MkMsVUFBWSxJQUNkLENBQ0lBLFlBQ0ZoK0IsZ0JBQWdCLDBCQUEwQi9uQixhQUFlK2xELFVBRTdELE9BR0k1aEQsS0FBSzlCLE9BQU8wbEIsZ0JBQ3BCLENBRUEsdUJBQU1pK0IsQ0FBbUJ6ckQsS0FBTUYsT0FDN0IsTUFBTXlnQixlQUFpQixDQUFDLEVBQ2xCaXJDLFVBQVk5bEQsTUFBTW1JLFNBQVMvTixRQUFVLEtBQU8rTixTQUFTL04sT0FFM0QsR0FEQXlnQixlQUFldmdCLE1BQVF3ckQsV0FDbEJBLFdBQ0MxckQsTUFBTXlVLFdBQVcsS0FBTSxDQUV6QmdNLGVBRGdCdmdCLEtBQUt1WixRQUFRLFNBQVUsYUFDYnpaLEtBQzVCLE9BR0k4SixLQUFLOUIsT0FBT3lZLHNCQUNaM1csS0FBS3loRCw0QkFDYixDQUVBLHVCQUFNSyxDQUFtQnI5QixhQUFjLEdBQ3JDLE1BQU1wUSxRQUFVLEdBQ1ZvakIsUUFBVSxHQUlWL29CLE1BQVFwUixLQUFLQyxLQUFLQyxTQUFTLG9CQUNqQyxJQUFJdWtELGFBQWUsRUFDZmp5QyxRQUFVLHdCQUNkLElBQUssTUFBTTdKLFFBQVFqRyxLQUFLbU8sTUFDdEIsR0FBa0IsVUFBZGxJLEtBQUs1SCxNQUNINEgsS0FBS3dDLGlCQUFrQixDQUN6QnM1QyxlQUNBLE1BQU0xc0MsVUFBWSxJQUFJMnNDLElBQUksQ0FBRWg5QyxNQUFPLE1BQU80UyxTQUFTLENBQUV0VixPQUFPLElBQ3REMnRDLFdBQWFocUMsS0FBSy9QLE1BQ3hCLElBQUkrckQsUUFBVSxLQUNWQyxzQkFBd0IsS0FDNUIsR0FBSTdzQyxJQUFJNVMsTUFBUXd0QyxZQUFjNTZCLElBQUk1UyxPQWJULEdBYTBDLENBQ2pFLE1BQU0wL0MsaUJBQW1CLElBQUlILElBQUksQ0FBRWg5QyxNQUFPLEtBQU00UyxTQUFTLENBQ3ZEdFYsT0FBTyxJQUlULEdBRkFtMUIsUUFBUXZnQyxLQUFLK08sS0FBS2lJLElBR2hCK2hDLFdBckJzQixJQXNCdEJBLFdBQWFrUyxXQUFXMS9DLE9BdEJGLEdBdUJ0QixDQUNBLE1BQU0yL0Msb0JBQXNCLElBQUlKLElBQUksQ0FDbENoOUMsTUFBTyxFQUNQRCxPQUFRLElBQ1A2UyxTQUFTLENBQUV0VixPQUFPLElBQ2YrL0MsVUFBWUQsY0FBYzMvQyxNQUMxQjYvQyxpQkFBbUIsZUFBZUYsY0FBYzVpRCxPQUFPLFFBQVE0aUQsY0FBYzVpRCxPQUFPLFFBQVE2aUQsaUJBQ2xHbDNDLFFBQVFvM0MsTUFBTUQsa0JBQ2RKLHNCQUF3QixpQ0FBaUM1a0QsS0FBS0MsS0FBSzBXLE9BQ2pFLGlCQUNBLENBQ0V2UixRQUFTLEdBQUcwL0MsY0FBYzVpRCxPQUFPLFFBQVE0aUQsY0FBYzVpRCxPQUFPLEtBQzlENmlELFVBQ0FwNkMsTUFBT2hDLEtBQUs3UCxLQUNaNjVDLFdBQVlBLFdBQWFrUyxXQUFXMS9DLDJCQUlsQ3pDLEtBQUtpOUMsT0FBT2o5QyxLQUFLcXFCLElBQU1nNEIsVUFDL0IsQ0FDQUosU0FBV0UsV0FBVzEvQyxNQUN0QnFOLFNBQVcsaUNBQWlDeFMsS0FBS0MsS0FBSzBXLE9BQ3BELGtCQUNBLENBQ0VoTyxLQUFNQSxLQUFLN1AsS0FDWGlmLElBQUtBLElBQUk1UyxNQUNUKy9DLE1BQU92OEMsS0FBSy9QLE1BQ1orckQsUUFBU0UsV0FBVzEvQyxxQkFHTSxPQUExQnkvQyx3QkFDRnB5QyxTQUFXb3lDLDZCQUVQajhDLEtBQUt3OEMsbUJBQW1CUixRQUNoQyxNQUNFbnlDLFNBQVcsZ0NBQWdDeFMsS0FBS0MsS0FBSzBXLE9BQ25ELGtCQUNBLENBQ0VoTyxLQUFNQSxLQUFLN1AsS0FDWGlmLElBQUtBLElBQUk1UyxNQUNUKy9DLE1BQU92OEMsS0FBSy9QLHFCQUdoQm1lLFFBQVFuZCxLQUFLK08sS0FBS2lJLFVBRWRqSSxLQUFLdUMsdUJBQ2IsQ0FHSixNQUFNaTBDLGlCQUFtQixHQUN6QixJQUFJaUcsU0FBVSxFQUNkLElBQUssTUFBTTFGLG1CQUFtQmg5QyxLQUFLakUsT0FBTzBnRCxpQkFDcENPLGdCQUFnQkwsU0FDbEJGLGlCQUFpQnZsRCxLQUFLOGxELGlCQUNiQSxnQkFBZ0JOLFVBQVksR0FDckNNLGdCQUFnQk4sWUFDaEJELGlCQUFpQnZsRCxLQUFLOGxELGlCQUN0QjBGLFNBQVUsR0FFVkEsU0FBVSxFQVlkLEdBVElBLFVBQ0VYLGVBQ0ZqeUMsU0FBVyxRQUViQSxTQUFXLFNBQVN4UyxLQUFLQyxLQUFLMFcsT0FBTywwQ0FDL0JqVSxLQUFLOUIsT0FBTyxDQUNoQiwwQkFBMkJ1K0MscUJBRzFCaDRCLFlBQWEsQ0FDaEIzVSxTQUFXLE9BQ1gsTUFBTUcsUUFBVSxDQUFFaFcsTUFBTytGLFlBQ25Cd1AsV0FBV0ssY0FBY2t5QyxhQUFlcnpDLE1BQVEsR0FBSW9CLFFBQVMsQ0FDakVHLFVBRUZqUSxLQUFLbStDLHVCQUF3QixDQUMvQixDQUNBLE1BQU8sQ0FBRTlwQyxRQUFTb2pCLFFBQ3BCLENBRUEsaUJBQU1rckIsQ0FBYWwrQixhQUFjLEdBQy9CLE1BQU1tK0IsWUFBYzVpRCxLQUFLakUsT0FBT0MsUUFBUSsvQyxJQUFJN2xELE1BQ3ZDMHNELG1CQUFtQjVpRCxLQUFLOUIsT0FBTyxDQUFFLDJCQUE0QixJQUNsRSxNQUFNMmtELDRCQUE4QnZsRCxLQUFLbUUsU0FBU3ZFLElBQ2hELE9BQ0EsK0JBRUltb0MsbUJBQXFCLElBQUl2akMsS0FBSyxTQUFTWCxLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BQzlEcWdELHNCQUF3QnpkLFlBQWN1ZCxZQUM1QyxJQUFJRyxZQUNBRiw0QkFFR0UsWUFETEQsc0JBQ21CLFVBQ0EsU0FDVkEsd0JBQ1RDLFlBQWMsUUFFaEIsTUFBTXIwQyxNQUFRcFIsS0FBS0MsS0FBS0MsU0FBUyxxQkFDakMsSUFBSXNTLFFBQVUsd0JBQ2QsR0FBSSt5Qyw2QkFBK0JDLHNCQUF1QixDQUN4RCxNQUFNRSxvQkFBc0IsSUFBSWxoRCxLQUFLaWhELGFBQWE1aEQsS0FBSyxDQUFFbUIsT0FBTyxLQUM3REcsWUFDR3pDLEtBQUs5QixPQUFPLENBQ2hCLDJCQUNFOEIsS0FBS2pFLE9BQU9DLFFBQVErL0MsSUFBSTdsRCxNQUFROHNELGVBRXBDbHpDLFNBQVcsaUNBQWlDeFMsS0FBS0MsS0FBSzBXLE9BQ3BELHFCQUNBLENBQ0VvQixJQUFLZ3dCLFlBQ0xtZCxNQUFPSSxZQUNQWCxRQUFTZSx1QkFHZixNQUNFbHpDLFNBQVcsZ0NBQWdDeFMsS0FBS0MsS0FBSzBXLE9BQ25ELHdCQUNBLENBQUVvQixJQUFLZ3dCLFlBQWFtZCxNQUFPSSx1QkFHL0IsSUFBS24rQixZQUFhLENBQ2hCM1UsU0FBVyxPQUNYLE1BQU1HLFFBQVUsQ0FBRWhXLE1BQU8rRixZQUNuQndQLFdBQVdLLGNBQWNuQixNQUFPb0IsUUFBUyxDQUFFRyxTQUNuRCxDQUNGLENBRUEsa0JBQU1nekMsQ0FBYzF1QyxRQUFTa1EsYUFBYyxHQUN6QyxNQUFNeGMsTUFBUWpJLEtBQUttTyxNQUFNalIsSUFBSXFYLFNBQzdCLElBQUt0TSxNQUFPLE9BQ1osSUFBSXlHLE1BQVEsR0FDUm9CLFFBQVUsR0FDZCxNQUFNdTFCLFlBQWMsSUFBSXZqQyxLQUFLLFNBRzdCLFNBRk11akMsWUFBWWxrQyxLQUFLLENBQUVtQixPQUFPLElBQzNCbWlCLG1CQUFtQnZqQixTQUFTaUMsZUFBZWtpQyxhQUM1Q0EsWUFBWTVpQyxNQUFRd0YsTUFBTS9SLE9BQVNtdkMsWUFBWTVpQyxPQUFTLEdBQUksQ0FDOUQsTUFBTXNnRCxZQUFjLElBQUlqaEQsS0FBSyxjQUN2QmloRCxZQUFZNWhELEtBQUssQ0FBRW1CLE9BQU8sSUFDM0JtaUIsbUJBQW1CdmpCLFNBQVNpQyxlQUFlNC9DLGFBQ2hEanpDLFFBQVV4UyxLQUFLQyxLQUFLMFcsT0FBTyx5QkFBMEIsQ0FDbkRoTyxLQUFNZ0MsTUFBTTdSLEtBQ1o2ckQsUUFBU2MsWUFBWXRnRCxRQUV2QmlNLE1BQVFwUixLQUFLQyxLQUFLMFcsT0FBTyxvQkFBcUIsQ0FDNUNoTyxLQUFNZ0MsTUFBTTdSLEtBQ1ppZixJQUFLZ3dCLFlBQVk1aUMsTUFDakIrL0MsTUFBT3Y2QyxNQUFNL1IsY0FFVCtSLE1BQU13NkMsbUJBQW1CTSxZQUFZdGdELE1BQzdDLE1BQ0VpTSxNQUFRcFIsS0FBS0MsS0FBSzBXLE9BQU8sb0JBQXFCLENBQzVDaE8sS0FBTWdDLE1BQU03UixLQUNaaWYsSUFBS2d3QixZQUFZNWlDLE1BQ2pCKy9DLE1BQU92NkMsTUFBTS9SLFFBRWY0WixRQUFVeFMsS0FBS0MsS0FBSzBXLE9BQU8seUJBQTBCLENBQ25EaE8sS0FBTWdDLE1BQU03UixPQUdoQixNQUFNNlosUUFBVSxDQUFFaFcsTUFBTytGLEtBQUtxeUMsV0FDeEI3aUMsV0FBV0ssY0FBY25CLE1BQU9vQixRQUFTLENBQUVHLGdCQUMzQ2hJLE1BQU1PLHVCQUNkLENBRUEsa0JBQUErckMsQ0FBb0I1MUMsZUFDbEIsTUFBTXVrRCxlQUFpQmxqRCxLQUFLakUsT0FBT29uRCxhQUFheGtELGdCQUFnQnpJLE1BQ2hFLE1BQThCLGtCQUFuQmd0RCxnQkFHSkEsY0FDVCxDQUVBLGlCQUFBek8sQ0FBbUI5MUMsY0FBZXlrRCxPQUNoQyxHQUFLcGpELEtBQUt1MEMsbUJBQW1CNTFDLGVBQTdCLENBR0EsR0FBSUEsZ0JBQWtCcEssS0FBSzRGLE9BQU9DLGFBQXlCLGlCQUFWZ3BELE1BQTBCLENBQ3pFLE1BQU0xTyxTQUFXMTBDLEtBQUt5MEMsa0JBQWtCOTFDLGNBQWUsWUFDakRQLFNBQVc0QixLQUFLeTBDLGtCQUFrQjkxQyxjQUFlLFlBQ3ZELFFBQXdCLElBQWJQLFNBQTBCLENBQ25DLElBQWlCLElBQWJzMkMsU0FDRixPQUFPdDJDLFNBQVcsSUFBTWQsS0FBS0MsS0FBS0MsU0FBUyxlQUN0QyxJQUFpQixJQUFiazNDLFNBQ1QsT0FBT3QyQyxTQUFXLElBQU1kLEtBQUtDLEtBQUtDLFNBQVMsYUFFL0MsQ0FDQSxNQUFPLEVBQ1QsQ0FDQSxPQUFPd0MsS0FBS2pFLE9BQU9vbkQsYUFBYXhrRCxpQkFBaUJ5a0QsTUFiakQsQ0FjRixDQUVBLHFCQUFNQyxDQUFpQjFrRCxlQUNFcUIsS0FBS3UwQyxtQkFBbUI1MUMscUJBSXZDcUIsS0FBS3lvQixlQUFlOXBCLHFCQUZwQnFCLEtBQUtvckIsYUFBYXpzQixjQUk1QixDQUVBLGtCQUFNeXNCLENBQ0p6c0IsZUFDQSxZQUNlLEVBQUssVUFDUCxFQUFLLFNBQ0wsS0FBSSxTQUNKLE1BQ1QsQ0FBQyxHQUVMLElBQUsya0QsWUFBY2htRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFBc0IsQ0FDakUsTUFBTUQsUUFBVStDLEtBQUsvQyxRQUNsQjVHLFFBQU95RyxRQUFVckIsaUJBQWlCaUQsb0JBQW9CNUIsT0FBUTZCLGlCQUM5RHFGLEtBQUlsSCxRQUFVQSxPQUFPb1IsS0FDbEJxMUMsT0FBUyxDQUFDLEVBQ2hCLE9BQVE1a0QsZUFDTixLQUFLcEssS0FBSzRGLE9BQU9PLEtBQ2Y2b0QsT0FBT3JrRCxNQUFRLENBQ2JDLEtBQU0sQ0FDSnFrRCxTQUFTLElBR2IsTUFDRixLQUFLanZELEtBQUs0RixPQUFPQyxZQUNmbXBELE9BQU9ya0QsTUFBUSxDQUNid0MsS0FBTSxDQUNKZ3pDLGNBQVU3MkMsSUFHZDBsRCxPQUFPbmxELFNBQVcsQ0FDaEIwMEIsWUFBUWoxQixFQUNSUyxhQUFTVCxJQUVNLElBQWI2MkMsV0FBa0MsSUFBYkEsV0FDdkI2TyxPQUFPcmtELE1BQU13QyxLQUFLZ3pDLFNBQVdBLFNBQzdCNk8sT0FBT3JrRCxNQUFRLENBQ2J3QyxLQUFNLENBQ0pnekMsV0FHQXQyQyxpQkFDRXMyQyxTQUNGNk8sT0FBT25sRCxTQUFTMDBCLE9BQVMxMEIsU0FFekJtbEQsT0FBT25sRCxTQUFTRSxRQUFxQixLQUFYRixXQU1wQyxHQUF1QixJQUFuQm5CLFFBQVEyRCxPQUFjLENBQ3hCLE1BQU05RCxPQUFTOEYsT0FBTzZnRCxjQUFjcHRELFFBQ2xDeUcsUUFBVUEsT0FBT29SLEtBQU92UCxnQkFFMUIsR0FBc0IsSUFBbEI3QixPQUFPOEQsT0FBYyxDQUN2QixNQUFNOGlELE9BQVMsQ0FDYmptRCxLQUFNWCxPQUFPLEdBQUdXLEtBQ2hCSyxVQUFVLEdBRVBjLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxPQVM5QzJrRCxPQUFPdHRELEtBQU9rSCxLQUFLQyxLQUFLQyxTQUFTVixPQUFPLEdBQUcxRyxNQUMzQ3N0RCxPQUFPMWtELFNBQVcsQ0FBQ2xDLE9BQU8sR0FBR29SLE1BUjdCdzFDLE9BQU9ybUQsTUFBUUMsS0FBS0MsS0FBS0MsU0FBU1YsT0FBTyxHQUFHTyxPQUM1Q3FtRCxPQUFPeGtELE1BQVEsQ0FDYkMsS0FBTSxDQUNKQyxTQUFVdEMsT0FBTyxHQUFHb1IsTUFPMUIsTUFBTXkxQyxXQUFhL2tELFFBQVFDLE1BQU02YSxZQUFZZ3FDLE9BQVFILGNBQy9DbG5ELE1BQU1lLHdCQUF3QixlQUFnQixDQUFDdW1ELFlBQ3ZELE1BRUVMLFlBQWEsQ0FFakIsTUFDRUMsT0FBT2xSLElBQU1wMUMsUUFBUSxTQUNmWixNQUFNazhDLHdCQUF3QixlQUFnQixDQUFDZ0wsU0FDckRELFlBQWEsQ0FFakIsQ0FDQSxHQUFJQSxhQUFlaG1ELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUFzQixDQUNqRSxPQUFReUIsZUFDTixLQUFLcEssS0FBSzRGLE9BQU9FLFlBQ2pCLEtBQUs5RixLQUFLNEYsT0FBT0csWUFDakIsS0FBSy9GLEtBQUs0RixPQUFPSSxlQUNqQixLQUFLaEcsS0FBSzRGLE9BQU9LLE1BQ2pCLEtBQUtqRyxLQUFLNEYsT0FBT00sTUFDakIsS0FBS2xHLEtBQUs0RixPQUFPTyxXQUNUc0YsS0FBSzlCLE9BQU8sQ0FDaEIsQ0FBQyxxQkFBcUJTLHdCQUF3QixJQUVoRCxNQUNGLEtBQUtwSyxLQUFLNEYsT0FBT0MsWUFDZixDQUNFLE1BQU13cEQsT0FBUyxDQUFDLEVBQ2hCQSxPQUFPLHFCQUFxQmpsRCx3QkFBeUIsR0FDcEMsSUFBYisxQyxXQUFrQyxJQUFiQSxXQUN2QmtQLE9BQU8scUJBQXFCamxELDBCQUE0QisxQyxTQUNwRHQyQyxpQkFDRndsRCxPQUFPLHFCQUFxQmpsRCwwQkFBNEJQLFdBSXpEd0IsT0FBT0MsVUFBVUMsZUFBZWpILEtBQy9CK3FELE9BQ0EscUJBQXFCamxELDRCQUd2QmlsRCxPQUFPLHFCQUFxQmpsRCw0QkFBOEIsTUFHekRpQixPQUFPQyxVQUFVQyxlQUFlakgsS0FDL0IrcUQsT0FDQSxxQkFBcUJqbEQsNEJBR3ZCaWxELE9BQU8scUJBQXFCamxELDRCQUE4QixZQUV0RHFCLEtBQUs5QixPQUFPMGxELE9BQ3BCLEVBR0osSUFBS0MsU0FHSCxPQUFRbGxELGVBQ04sS0FBS3BLLEtBQUs0RixPQUFPSSxlQUVmLFNBRE15RixLQUFLb3JCLGFBQWE3MkIsS0FBSzRGLE9BQU9NLFFBRWpDdUYsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9HLGVBQ3BDMEYsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9PLE1BQ3JDLENBQ2lCLElBQUl5a0MsYUFDbkJuL0IsS0FBSzRXLFFBQVU1VyxLQUFLdU0sU0FBV3ZNLEtBQUtrTyxJQUU3QmlvQixXQUNYLENBQ0EsTUFDRixLQUFLNWhDLEtBQUs0RixPQUFPTyxXQUNUc0YsS0FBS3lvQixlQUFlbDBCLEtBQUs0RixPQUFPSSxzQkFDaEN5RixLQUFLeW9CLGVBQWVsMEIsS0FBSzRGLE9BQU9LLGFBQ2hDd0YsS0FBS3lvQixlQUFlbDBCLEtBQUs0RixPQUFPRyxhQUk5QyxDQUNGLENBRUEsb0JBQU1tdUIsQ0FBZ0I5cEIsZUFBZSxZQUFlLEdBQVUsQ0FBQyxHQUM3RCxJQUFLMmtELFlBQWNobUQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEscUJBQXNCLENBQ2pFLE1BQU1ELFFBQVUrQyxLQUFLL0MsUUFDbEI1RyxRQUFPeUcsUUFBVXJCLGlCQUFpQmlELG9CQUFvQjVCLE9BQVE2QixpQkFDOURxRixLQUFJbEgsUUFBVUEsT0FBT29SLEtBQ3BCalIsUUFBUTJELE9BQVMsUUFDYnZFLE1BQU15bkQsd0JBQXdCLGVBQWdCN21ELFNBRXBEcW1ELFlBQWEsQ0FFakIsQ0FDQSxHQUFJQSxhQUFlaG1ELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUMzQyxPQUFReUIsZUFDTixLQUFLcEssS0FBSzRGLE9BQU9DLFlBQ2pCLEtBQUs3RixLQUFLNEYsT0FBT0UsWUFDakIsS0FBSzlGLEtBQUs0RixPQUFPRyxZQUNqQixLQUFLL0YsS0FBSzRGLE9BQU9JLGVBQ2pCLEtBQUtoRyxLQUFLNEYsT0FBT0ssTUFDakIsS0FBS2pHLEtBQUs0RixPQUFPTSxNQUNqQixLQUFLbEcsS0FBSzRGLE9BQU9PLFdBQ1RzRixLQUFLOUIsT0FBTyxDQUNoQixDQUFDLHFCQUFxQlMseUJBQTBCLGFBRTVDcUIsS0FBSzlCLE9BQU8sQ0FDaEIsQ0FBQyxxQkFBcUJTLHdCQUF3QixJQUt4RCxDQUdBLGtCQUFNb2xELENBQWNDLGVBQ1poa0QsS0FBSzlCLE9BQU8sQ0FBRSxDQUFDOGxELFNBQVUsR0FDakMsQ0FFQSxzQkFBTUMsU0FDRWprRCxLQUFLOUIsT0FBTyxDQUNoQixnQ0FBaUNrRSxLQUFLMEksTUFDcEM5SyxLQUFLakUsT0FBT0MsUUFBUXF1QixJQUFJbjBCLE1BQVEsR0FFbEMsK0JBQWdDLEdBRXBDLENBRUEsa0JBQUlndUQsR0FDRixNQUFNbjRDLFVBQVksR0FDbEIsSUFBSyxNQUFNN1YsU0FBUzhKLEtBQUttTyxNQUNKLFVBQWZqWSxNQUFNbUksTUFBb0JuSSxNQUFNNkYsT0FBTzhLLFdBQVd6UCxVQUNwRDJVLFVBQVU3VSxLQUFLaEIsT0FNbkIsT0FGQTZWLFVBQVVJLEtBQUt2RSxjQUFjd0UsZUFFdEJMLFNBQ1QsQ0FFQSxzQkFBSW80QyxHQUNGLE1BQU1DLFdBQWEsR0FDbkIsSUFBSyxNQUFNbHVELFNBQVM4SixLQUFLbU8sTUFDdkIsR0FBbUIsV0FBZmpZLE1BQU1tSSxPQUFzQm5JLE1BQU02RixPQUFPOEssV0FBV2pQLEtBQU0sQ0FDNUQsTUFBTXFRLE1BQVFqSSxLQUFLbU8sTUFBTWpSLElBQUloSCxNQUFNNkYsT0FBT2tNLE1BQU1nRyxLQUFLQyxJQUNyRGhZLE1BQU02RixPQUFPa00sTUFBTWdHLEtBQUsvWCxNQUFRK1IsTUFBUUEsTUFBTS9SLE1BQVEsRUFDdERrdUQsV0FBV2x0RCxLQUFLaEIsTUFDbEIsQ0FLRixPQUZBa3VELFdBQVdqNEMsS0FBS3ZFLGNBQWN3RSxlQUV2Qmc0QyxVQUNULENBRUEsaUJBQUlDLEdBQ0YsTUFBTXQ0QyxVQUFZLEdBQ2xCLElBQUssTUFBTTdWLFNBQVM4SixLQUFLbU8sTUFDSixVQUFmalksTUFBTW1JLE9BQXFCbkksTUFBTTZGLE9BQU84SyxXQUFXeFAsU0FBV25CLE1BQU02RixPQUFPOEssV0FBV3ZQLFFBQThDLDJCQUFwQ3BCLE1BQU1nSixNQUFNd0MsTUFBTWt4QyxXQUFXMWtDLEtBQy9IbkMsVUFBVTdVLEtBQUtoQixPQU1uQixPQUZBNlYsVUFBVUksS0FBS3ZFLGNBQWN3RSxlQUV0QkwsU0FDVCxDQUVBLFFBQUluSSxHQUVGLE9BQU90RyxLQUFLZ2xCLE1BQU01aUIsTUFBS2tFLFNBQ2pCQSxLQUFLb1ksV0FDSHBZLEtBQUtvWSxVQUFVOU4sS0FBT2xPLEtBQUtrTyxLQUlyQyxDQUVBLGNBQUl3dEIsR0FDRixNQUFNenpCLE1BQVFqSSxLQUFLMDdDLG9CQUFvQixpQkFDdkMsR0FBSXp6QyxNQUNGLE9BQU9BLE1BRVQsTUFBTThELFVBQVkvTCxLQUFLcTlCLGdCQUNyQi8vQixLQUFLQyxLQUFLQyxTQUFTLHNDQUVyQixPQUF5QixJQUFyQnVPLFVBQVVuTCxPQUFxQm1MLFVBQVUsR0FDdEMsSUFDVCxDQUVBLHFCQUFJc3ZDLEdBQ0YsTUFBTXB6QyxNQUFRakksS0FBSzA3QyxvQkFBb0IseUJBQ3ZDLEdBQUl6ekMsTUFDRixPQUFPQSxNQUVULE1BQU04RCxVQUFZL0wsS0FBS3E5QixnQkFDckIvL0IsS0FBS0MsS0FBS0MsU0FBUyw4Q0FFckIsT0FBeUIsSUFBckJ1TyxVQUFVbkwsT0FBcUJtTCxVQUFVLEdBQ3RDLElBQ1QsQ0FFQSxzQkFBSThjLEdBQ0YsTUFBTTVnQixNQUFRakksS0FBSzA3QyxvQkFBb0IsMEJBQ3ZDLEdBQUl6ekMsTUFDRixPQUFPQSxNQUVULE1BQU04RCxVQUFZL0wsS0FBS3E5QixnQkFDckIvL0IsS0FBS0MsS0FBS0MsU0FBUywrQ0FFckIsT0FBeUIsSUFBckJ1TyxVQUFVbkwsT0FBcUJtTCxVQUFVLEdBQ3RDLElBQ1QsQ0FFQSxpQkFBSXd4QyxHQUNGLE1BQU0rRyxHQUFLdGtELEtBQUs2b0IsbUJBQ2hCLEdBQUl5N0IsR0FBSSxDQUNOLE1BQU1wdUQsTUFBUW91RCxHQUFHcHVELE1BQ2pCLE9BQUlBLE9BQ0crTixTQUFTcWdELEdBQUd2b0QsT0FBTzdGLE1BQzVCLENBQ0EsT0FBTyxDQUNULENBRUEsa0JBQUlxdUQsR0FDRixPQUFPdmtELEtBQUtQLFFBQVEsT0FBUSxvQkFBcUIsQ0FDbkQsQ0FFQSxxQkFBSWlxQixHQUNGLE9BQU8xcEIsS0FBS3VrRCxnQkFBa0JqbkQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBQzFELENBRUEsdUJBQU1zbkQsU0FDRXhrRCxLQUFLMDFCLFFBQVEsT0FBUSxrQkFBa0IsRUFDL0MsQ0FFQSw2QkFBSXBPLEdBQ0YsT0FBT3RuQixLQUFLUCxRQUFRLE9BQVEsK0JBQWdDLENBQzlELENBRUEsbUNBQU1tcEIsU0FDRTVvQixLQUFLMDFCLFFBQVEsT0FBUSw2QkFBNkIsRUFDMUQsQ0FFQSxnQkFBSWtsQixHQUNGLE1BQU02SixHQUFLemtELEtBQUtxN0Msa0JBQ2hCLEdBQUlvSixHQUFJLENBQ04sTUFBTXZ1RCxNQUFRdXVELEdBQUd2dUQsTUFDakIsT0FBSUEsT0FDRytOLFNBQVN3Z0QsR0FBRzFvRCxPQUFPN0YsTUFDNUIsQ0FDQSxPQUFPLENBQ1QsQ0FFQSxxQkFBT3d1RCxDQUFnQnp3QyxPQUFRMHdDLE9BQVF6dUQsT0FDckMsT0FBUStkLFFBQ04sS0FBSzFmLEtBQUtxd0QsbUJBQW1CbnZELElBQzNCLE9BQU8yTSxLQUFLMEksTUFBTTVVLE1BQVEsS0FBTyxJQUFPa00sS0FBSzBJLE1BQU01VSxNQUFRLElBQU0sR0FBTSxJQUFPQSxNQUFRLEdBQ3hGLEtBQUszQixLQUFLcXdELG1CQUFtQmx2RCxNQUMzQixPQUFRME0sS0FBSzBJLE1BQU01VSxNQUFRLEtBQVEsSUFBT2tNLEtBQUswSSxNQUFNNVUsTUFBUSxJQUFNLEdBQU0sSUFBT2tNLEtBQUswSSxNQUFNNVUsTUFBUSxHQUFLLEVBQUssSUFBT2tNLEtBQUswSSxNQUFNNVUsTUFBUSxHQUFLLEVBQUssSUFBT0EsTUFBUSxFQUNsSyxLQUFLM0IsS0FBS3F3RCxtQkFBbUJ2dkQsWUFDM0IsT0FBT3N2RCxPQUFTem9ELE9BQU9oRyxPQUFPMnVELG9CQUFlaG5ELEVBQVcsQ0FBRWluRCxzQkFBdUIsSUFBS24xQyxRQUFRLFFBQVMsSUFDekcsS0FBS3BiLEtBQUtxd0QsbUJBQW1CdHZELGFBQzNCLE9BQU80RyxPQUFPaEcsT0FBTzJ1RCxvQkFBZWhuRCxFQUFXLENBQUVpbkQsc0JBQXVCLElBQUtuMUMsUUFBUSxRQUFTLElBQU0sSUFBTWcxQyxPQUM1RyxLQUFLcHdELEtBQUtxd0QsbUJBQW1CcnZELFlBQzNCLE9BQU9vdkQsT0FBU3pvRCxPQUFPaEcsT0FBTzJ1RCxpQkFDaEMsS0FBS3R3RCxLQUFLcXdELG1CQUFtQnB2RCxhQUMzQixPQUFPMEcsT0FBT2hHLE9BQU8ydUQsaUJBQW1CLElBQU1GLE9BRWxELE1BQU8sR0FDVCxDQUVBLG9CQUFPSSxDQUFlOXdDLE9BQVF6VSxPQUFRaWxELEdBQUlwbUQsS0FBTW5JLE9BQzlDdXVELEdBQUtBLElBQU0sRUFDWCxNQUFNTyxJQUFNeGxELE9BQU9FLE1BQUsyWCxJQUF1QixpQkFBVkEsRUFBRW5VLEtBQW9CbVUsRUFBRW5VLEtBQU91aEQsTUFBeUIsaUJBQVZwdEMsRUFBRXBVLEtBQW9Cb1UsRUFBRXBVLEtBQU93aEQsTUFDbEgsUUFBbUIsSUFBUk8sVUFBNEMsSUFBZEEsSUFBSTNtRCxZQUErQyxJQUFmMm1ELElBQUk5dUQsT0FDL0UsT0FBUStkLFFBQ04sS0FBSzFmLEtBQUtxd0QsbUJBQW1CbnZELElBQzNCLE9BQVF1dkQsSUFBSTNtRCxPQUNWLEtBQUs5SixLQUFLMHdELGlCQUFpQjl1RCxXQUN6QixPQUFPLElBQU1zdUQsR0FBS08sSUFBSTl1RCxPQUN4QixLQUFLM0IsS0FBSzB3RCxpQkFBaUIvdUQsTUFDekIsT0FBTyxJQUFNOHVELElBQUk5dUQsT0FDbkIsS0FBSzNCLEtBQUswd0QsaUJBQWlCaHZELEVBQ3pCLE9BQU8sR0FBSyt1RCxJQUFJOXVELE9BQ2xCLEtBQUszQixLQUFLMHdELGlCQUFpQmp2RCxFQUN6QixPQUFPLEVBQUlndkQsSUFBSTl1RCxPQUVuQixNQUNGLEtBQUszQixLQUFLcXdELG1CQUFtQmx2RCxNQUMzQixPQUFRc3ZELElBQUkzbUQsT0FDVixLQUFLOUosS0FBSzB3RCxpQkFBaUI5dUQsV0FDekIsT0FBTyxJQUFNc3VELEdBQUtPLElBQUk5dUQsT0FDeEIsS0FBSzNCLEtBQUswd0QsaUJBQWlCL3VELE1BQ3pCLE9BQU8sSUFBTTh1RCxJQUFJOXVELE9BQ25CLEtBQUszQixLQUFLMHdELGlCQUFpQmx2RCxRQUN6QixPQUFPLEdBQUtpdkQsSUFBSTl1RCxPQUNsQixLQUFLM0IsS0FBSzB3RCxpQkFBaUJudkQsU0FDekIsT0FBTyxFQUFJa3ZELElBQUk5dUQsT0FDakIsS0FBSzNCLEtBQUswd0QsaUJBQWlCcHZELFVBQ3pCLE9BQU8sRUFBSW12RCxJQUFJOXVELE9BQ2pCLEtBQUszQixLQUFLMHdELGlCQUFpQnJ2RCxNQUN6QixPQUFPLEVBQUlvdkQsSUFBSTl1RCxPQUVuQixNQUNGLFFBQ0UsT0FBUTh1RCxJQUFJM21ELE9BQ1YsS0FBSzlKLEtBQUswd0QsaUJBQWlCOXVELFdBQ3pCLE9BQU9zdUQsR0FBS08sSUFBSTl1RCxPQUNsQixLQUFLM0IsS0FBSzB3RCxpQkFBaUIvdUQsTUFDekIsT0FBTyxFQUFJOHVELElBQUk5dUQsUUFLekIsT0FBTyxDQUNULENBRUEsaUJBQUlndkQsR0FDRixPQUFPaDFCLFNBQVM2MEIsY0FBYy9rRCxLQUFLakUsT0FBTzQ5QyxTQUFTMWxDLE9BQVFqVSxLQUFLakUsT0FBTzQ5QyxTQUFTbjZDLE9BQVFRLEtBQUs0NkMsYUFBYyxlQUFnQixnQkFDN0gsQ0FFQSxRQUFJdUssR0FDRixPQUFPajFCLFNBQVM2MEIsY0FBYy9rRCxLQUFLakUsT0FBTzQ5QyxTQUFTMWxDLE9BQVFqVSxLQUFLakUsT0FBTzQ5QyxTQUFTbjZDLE9BQVFRLEtBQUs0NkMsYUFBYyxXQUFZLFlBQ3pILENBRUEsVUFBSXdLLEdBQ0YsT0FBT2wxQixTQUFTNjBCLGNBQWMva0QsS0FBS2pFLE9BQU80OUMsU0FBUzFsQyxPQUFRalUsS0FBS2pFLE9BQU80OUMsU0FBU242QyxPQUFRUSxLQUFLNDZDLGFBQWMsYUFBYyxjQUMzSCxDQUVBLFVBQUkvMkIsR0FDRixNQUFNOVgsVUFBWSxHQUNsQixJQUFLLE1BQU03VixTQUFTOEosS0FBS21PLE1BQ0osVUFBZmpZLE1BQU1tSSxNQUFrQjBOLFVBQVU3VSxLQUFLaEIsT0FLN0MsT0FGQTZWLFVBQVVJLEtBQUt2RSxjQUFjd0UsZUFFdEJMLFNBQ1QsQ0FFQSxVQUFJMmpCLEdBQ0YsT0FBT3B5QixLQUFLZ2xCLE1BQU1qc0IsUUFDaEJvdEIsR0FBS3pqQixLQUFLcWxELG1CQUFtQjVoQyxFQUFHLFdBQWFBLEVBQUVsYixNQUVuRCxDQUVBLFVBQUkrOEMsR0FDRixPQUFPdGxELEtBQUswdkIsT0FBT3I1QixRQUFPb3RCLEdBQUtBLEVBQUV6SCxXQUFXOU4sS0FBT2xPLEtBQUtrTyxJQUMxRCxDQUVBLGlCQUFJcTNDLEdBQ0YsT0FDRWpvRCxLQUFLZ2xCLE1BQU1rakMsU0FBU252RCxRQUFPb3RCLEdBQUtBLEVBQUV6SCxXQUFXOU4sS0FBT2xPLEtBQUtrTyxLQUFJLElBQU0sSUFFdkUsQ0FFQSxXQUFNdTNDLENBQU92dkQsT0FDUEEsTUFBUSxJQUFHQSxNQUFRLEdBQ25CQSxNQUFROEosS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2x3QyxNQUNqQy9NLE1BQVE4SixLQUFLakUsT0FBT0MsUUFBUW0zQyxHQUFHbHdDLEtBRWpDLE1BQU15aUQsYUFBZTFsRCxLQUFLbXpDLEdBQzFCLElBQUl3UyxZQVFKLE9BTkk3cEQsTUFBTTRwRCxlQUFpQnh2RCxPQUFTd3ZELG1CQUM1QjFsRCxLQUFLcThDLE9BQU9ubUQsUUFFbEJ5dkQsWUFBY0QsYUFBZXh2RCxZQUN2QjhKLEtBQUt1NkIsV0FBV29yQixZQUFhLENBQUV6ckIsYUFBYSxLQUU3Q2hrQyxLQUNULENBRUEsZ0JBQU1xa0MsQ0FBWW9YLE9BQVFyeUMsUUFBVSxDQUFDLEdBRW5DLE1BQU1zbUQsVUFBWXRtRCxRQUFRckQsTUFDdEJxRCxRQUFRckQsTUFDUitELEtBQUtqRSxPQUFPQyxRQUFRQyxNQUNsQjRwRCxZQUFjNWhELFNBQVMwdEMsUUFDN0IsSUFBSW1VLFdBQWEsRUFDWnhtRCxRQUFRNDZCLGFBQ08sT0FBZDByQixZQUVPaCtDLGNBQWNtK0MsVUFBVUgsV0FDakNFLGtCQUFvQixJQUFJaGtELEtBQUs4akQsV0FBV3prRCxLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BQ3JEM0csTUFBTUksT0FBTzBwRCxZQUViOXBELE1BQU1JLE9BQU8wcEQsV0FBVzF2RCxRQUdsQzZTLEdBQUdDLGNBQWN1SyxLQUNmalcsS0FBS0MsS0FBSzBXLE9BQU8sc0NBQXVDLENBQ3REL2QsTUFBTzB2RCxhQUpYRSxXQUFhNXBELE9BQU8wcEQsVUFBVTF2RCxPQUY5QjR2RCxXQUFhNXBELE9BQU8wcEQsWUFXeEIsTUFBTUksVUFBWUgsWUFBY0MsV0FDaEMsR0FBSUUsV0FBYSxFQUFHLE9BQU8sRUFFM0IsU0FETWhtRCxLQUFLcThDLE9BQU9yOEMsS0FBS216QyxHQUFLNlMsV0FDeEJBLFdBQWFobUQsS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2x3QyxVQUNoQ2pELEtBQUtvckIsYUFBYTcyQixLQUFLNEYsT0FBT08sV0FFcEMsR0FBSTRDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUM1QixHQUFnQixJQUFaOEMsS0FBS216QyxHQUNINlMsV0FBYTVqRCxLQUFLNmpELEtBQUtqbUQsS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2x3QyxJQUFNLEdBQ3REakQsS0FBS29yQixhQUFhNzJCLEtBQUs0RixPQUFPSyxPQUU5QndGLEtBQUtvckIsYUFBYTcyQixLQUFLNEYsT0FBT0csa0JBRTNCLEdBQUkwckQsV0FBYTVqRCxLQUFLNmpELEtBQUtqbUQsS0FBS2pFLE9BQU9DLFFBQVFtM0MsR0FBR2x3QyxJQUFNLEdBQUksQ0FDaEQsSUFBSWs4QixhQUNuQm4vQixLQUFLNFcsUUFBVTVXLEtBQUt1TSxTQUFXdk0sS0FBS2tPLElBRTdCaW9CLFdBQ1gsTUFDSyxDQUNMLElBQUkrdkIsZUFBZ0IsRUFDaEJGLFdBQWE1akQsS0FBSzZqRCxLQUFLam1ELEtBQUtqRSxPQUFPQyxRQUFRbTNDLEdBQUdsd0MsSUFBTSxVQUNoRGpELEtBQUtvckIsYUFBYTcyQixLQUFLNEYsT0FBT0ksZ0JBQ3BDMnJELGVBQWdCLEdBRWhCQSxjQUFnQmxtRCxLQUFLdTBDLG1CQUFtQmhnRCxLQUFLNEYsT0FBT0ksZ0JBRXRDLElBQVp5RixLQUFLbXpDLFdBQ0RuekMsS0FBS29yQixhQUFhNzJCLEtBQUs0RixPQUFPRyxhQUNoQzRyRCxlQUNGbG1ELEtBQUtvckIsYUFBYTcyQixLQUFLNEYsT0FBT0ssT0FHcEMsQ0FFRixPQUFPd3JELFNBQ1QsQ0FFQSxjQUFJRyxHQUNGLE9BQU9ubUQsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9JLGVBQzdDLENBRUEsU0FBSUMsR0FDRixPQUFPd0YsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9LLE1BQzdDLENBRUEsZUFBSUYsR0FDRixPQUFPMEYsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9HLFlBQzdDLENBRUEsUUFBSUksR0FDRixPQUFPc0YsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9PLEtBQzdDLENBRUEsU0FBSUQsR0FDRixPQUFPdUYsS0FBS3UwQyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9NLE1BQzdDLEVDOXVISyxNQUFNc1osVUFDWCxXQUFBMU8sQ0FDRXBMLE1BQVEsS0FDUmdPLE1BQVEsS0FDUmhDLEtBQU8sS0FDUHNRLFFBQVUsRUFDVkQsV0FBYSxLQUNiOGhCLHNCQUF3QixFQUN4QkQsaUJBQW1CLEdBY25CLEdBWkFuNEIsS0FBSy9GLE1BQVFBLE1BQ2IrRixLQUFLaUksTUFBUUEsTUFDYmpJLEtBQUtpRyxLQUFPQSxLQUNaakcsS0FBS3NXLFdBQWFBLFdBQ2xCdFcsS0FBS2dWLGFBQWV1QixRQUNwQnZXLEtBQUt3VyxTQUFXLEVBQ2hCeFcsS0FBSzhULGFBQWUsS0FDcEI5VCxLQUFLcVcsbUJBQXFCLEtBQzFCclcsS0FBS2dkLFNBQVUsRUFDZmhkLEtBQUttNEIsaUJBQW1CQSxpQkFDeEJuNEIsS0FBS280QixzQkFBd0JBLHNCQUVWLE9BQWY5aEIsV0FBcUIsQ0FDdkIsTUFBTTh2QyxVQUNvRCxZQUF4RDlvRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwwQkFDNUI4QyxLQUFLc1csV0FBYTh2QyxVQUNkcnlDLFVBQVV1UCxnQkFBZ0JDLFFBQzFCeFAsVUFBVXVQLGdCQUFnQnRQLE9BQ2hDLENBQ0YsQ0FFQSxtQkFBV29nQixHQUNULE1BQU8sVUFDVCxDQUVBLDBCQUFXOVEsR0FDVCxNQUFPLENBQ0xDLFNBQVUsRUFDVnZQLFFBQVMsRUFDVEUsS0FBTSxFQUNON0osUUFBUyxFQUNUOEosU0FBVSxFQUNWaTFCLFdBQVksRUFFaEIsQ0FFQSx1QkFBV3QxQixHQUNULE1BQU8sQ0FDTE0sUUFBUyxHQUNUQyxRQUFTLEVBQ1RMLFFBQVMsRUFDVEUsS0FBTSxFQUNON0osUUFBUyxFQUNUOEosU0FBVSxFQUVkLENBRUEsZUFBVzlWLEdBQ1QsTUFBTyxDQUNMc1ksZUFBZ0IsaUJBQ2hCcUssVUFBVyxZQUNYL1ksTUFBTyxPQUNQaEMsS0FBTSxPQUNOL1AsTUFBTyxRQUVYLENBRUEsdUJBQU8wNEIsQ0FBa0J0TCxpQkFDdkIsT0FDR3huQixNQUFNSSxPQUFPb25CLGtCQUVWQSxnQkFEQXBuQixPQUFPb25CLGtCQUdYLElBQUssSUFDSCxPQUFPaG1CLEtBQUtDLEtBQUtDLFNBQVMsMEJBQzVCLElBQUssSUFDSCxPQUFPRixLQUFLQyxLQUFLQyxTQUFTLHVCQUM1QixJQUFLLEtBQ0gsT0FBT0YsS0FBS0MsS0FBS0MsU0FBUywwQkFDNUIsSUFBSyxNQUNILE9BQU9GLEtBQUtDLEtBQUtDLFNBQVMsMkJBQzVCLEtBQUssRUFDSCxPQUFPRixLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLdVcsVUFBVXVQLGdCQUFnQkMsUUFDN0IsT0FBT2ptQixLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLdVcsVUFBVXVQLGdCQUFnQnRQLFFBQzdCLE9BQU8xVyxLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLdVcsVUFBVXVQLGdCQUFnQnBQLEtBQzdCLE9BQU81VyxLQUFLQyxLQUFLQyxTQUFTLHVCQUM1QixLQUFLdVcsVUFBVXVQLGdCQUFnQmpaLFFBQzdCLE9BQU8vTSxLQUFLQyxLQUFLQyxTQUFTLDBCQUM1QixLQUFLdVcsVUFBVXVQLGdCQUFnQm5QLFNBQzdCLE9BQU83VyxLQUFLQyxLQUFLQyxTQUFTLDJCQUM1QixRQUNFLE9BQU8sS0FFYixDQUVBLFlBQUlnWixHQVlGLEdBVkt4VyxLQUFLb2dELFlBQ0pwZ0QsS0FBSzJXLGlCQUNQM1csS0FBS3dXLFNBQ0h4VyxLQUFLL0YsTUFBTThCLE9BQU82bkIsZ0JBQWdCNWpCLEtBQUsyVyxnQkFBZ0J6Z0IsT0FFdkQ4SixLQUFLaUksUUFBT2pJLEtBQUt3VyxTQUFXeFcsS0FBS2lJLE1BQU0vUixPQUN2QzhKLEtBQUtnaEIsWUFDUGhoQixLQUFLd1csU0FBV3hXLEtBQUsvRixNQUFNOEIsT0FBT0MsUUFBUWdFLEtBQUtnaEIsV0FBVzlxQixRQUcxRDhKLEtBQUtvZ0QsVUFDUCxPQUNFcGdELEtBQUtvNEIsdUJBQ0w5NkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBRXRCOEMsS0FBS29nRCxVQUFZcGdELEtBQUtvNEIsc0JBQXdCLEVBQVUsRUFDckRwNEIsS0FBS29nRCxVQUFZcGdELEtBQUtvNEIsc0JBRXhCcDRCLEtBQUtvZ0QsU0FHaEIsQ0FFQSxZQUFJNXBDLENBQVUzSyxHQUNaN0wsS0FBS29nRCxVQUFZdjBDLENBQ25CLENBRUEsUUFBSWxPLENBQU1rTyxHQUNSN0wsS0FBS3FtRCxNQUFReDZDLENBQ2YsQ0FFQSxRQUFJbE8sR0FFRixPQURLcUMsS0FBS3FtRCxRQUFPcm1ELEtBQUtxbUQsTUFBUXpuRCxRQUFRQyxNQUFNeW5ELFNBQVMsS0FDOUN0bUQsS0FBS3FtRCxLQUNkLENBRUEsV0FBSUUsR0FPRixPQU5pQng5QyxHQUFHa2pCLEtBQUs0SixXQUFXeC9CLFFBQU95WixTQUV2QzlQLEtBQUtyQyxPQUFTbVMsUUFBUXJRLFFBQVEsT0FBUSxTQUN0Q3NVLFVBQVVxZ0IsV0FBYXRrQixRQUFRclEsUUFBUSxPQUFRLFVBR3RDbUIsT0FBUyxDQUV4QixDQUVBLGtCQUFJNGxELEdBQ0YsT0FBdUIsSUFBbkJ4bUQsS0FBS29nRCxVQUNBLElBRUpwZ0QsS0FBS29nRCxVQUVScGdELEtBQUtvNEIsdUJBQ0w5NkIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBRXRCOEMsS0FBS280QixzQkFBd0IsRUFDeEJwNEIsS0FBS29nRCxVQUFVcHVDLFdBQWFoUyxLQUFLbzRCLHNCQUFzQnBtQixXQUc5RGhTLEtBQUtvZ0QsVUFBVXB1QyxXQUFhLElBQU1oUyxLQUFLbzRCLHNCQUFzQnBtQixXQUVuRGhTLEtBQUtvZ0QsVUFBVXB1QyxnQkFYN0IsQ0FZRixDQUVBLHFCQUFJeTBDLEdBQ0YsT0FBTyxDQUNULENBRUEsb0JBQUl6bkIsR0FDRixPQUFJaC9CLEtBQUt3VyxTQUNIeFcsS0FBS3dXLFVBQVksSUFBWSxHQUMxQnZTLFNBQVNqRSxLQUFLd1csVUFFaEIsSUFDVCxDQUVBLGlCQUFJeW9CLEdBQ0YsT0FBSWovQixLQUFLd1csU0FBaUJwVSxLQUFLMEksTUFBTTlLLEtBQUt3VyxTQUFXLEdBQzlDLElBQ1QsQ0FFQSxvQkFBSTBvQixHQUNGLE9BQUlsL0IsS0FBS3dXLFNBQWlCcFUsS0FBSzBJLE1BQU05SyxLQUFLd1csU0FBVyxHQUM5QyxJQUNULENBRUEsbUJBQUlrd0MsR0FDRixHQUFJMW1ELEtBQUt3VyxTQUFVLENBQ2pCLEdBQUl4VyxLQUFLc1csV0FBWSxDQUNuQixHQUFJdFcsS0FBS3NXLFlBQWN2QyxVQUFVdVAsZ0JBQWdCalosUUFDL0MsT0FBT3JLLEtBQUtrL0IsaUJBQW1CLEdBQUssR0FBSyxJQUNwQyxHQUFJbC9CLEtBQUtzVyxZQUFjdkMsVUFBVXVQLGdCQUFnQnBQLEtBQ3RELE9BQU9sVSxLQUFLaS9CLGNBQWdCLEdBQUssR0FBSyxHQUUxQyxDQUNBLE9BQU9qL0IsS0FBS3dXLFNBQVcsR0FBSyxHQUFLLEdBQ25DLENBQ0EsT0FBTyxJQUNULENBRUEsbUJBQUltd0MsR0FDRixRQUErQixJQUFwQjNtRCxLQUFLc1csV0FDZCxPQUFRdFcsS0FBS3NXLFlBQ1gsS0FBS3ZDLFVBQVV1UCxnQkFBZ0JqWixRQUM3QixPQUFPckssS0FBS2svQixpQkFDZCxLQUFLbnJCLFVBQVV1UCxnQkFBZ0JwUCxLQUM3QixPQUFPbFUsS0FBS2kvQixjQUNkLEtBQUtsckIsVUFBVXVQLGdCQUFnQnRQLFFBQzdCLE9BQU9oVSxLQUFLZy9CLGlCQUNkLEtBQUtqckIsVUFBVXVQLGdCQUFnQm5QLFNBQzdCLE9BQU9uVSxLQUFLeW1ELGtCQUNkLEtBQUsxeUMsVUFBVXVQLGdCQUFnQkMsUUFDN0IsT0FBUSxFQUNWLFFBQ0UsT0FBT3ZqQixLQUFLd1csU0FHbEIsT0FBTyxJQUNULENBRUEsb0JBQUlvWSxHQUNGLFFBQStCLElBQXBCNXVCLEtBQUtzVyxXQUNkLE9BQVF0VyxLQUFLc1csWUFDWCxLQUFLdkMsVUFBVXVQLGdCQUFnQmpaLFFBQzdCLE9BQU8vTSxLQUFLQyxLQUFLMFcsT0FBTywwQkFDMUIsS0FBS0YsVUFBVXVQLGdCQUFnQnBQLEtBQzdCLE9BQU81VyxLQUFLQyxLQUFLMFcsT0FBTyx1QkFDMUIsS0FBS0YsVUFBVXVQLGdCQUFnQnRQLFFBQzdCLE9BQU8xVyxLQUFLQyxLQUFLMFcsT0FBTywwQkFDMUIsS0FBS0YsVUFBVXVQLGdCQUFnQm5QLFNBQzdCLE9BQU83VyxLQUFLQyxLQUFLMFcsT0FBTywyQkFDMUIsS0FBS0YsVUFBVXVQLGdCQUFnQkMsUUFDN0IsT0FBT2ptQixLQUFLQyxLQUFLMFcsT0FBTywwQkFDMUIsUUFDRSxNQUFPLEdBR2IsTUFBTyxFQUNULENBRUEsa0JBQUlvTSxHQUNGLElBQUlyZ0IsS0FBSzQrQixRQUFULENBQ0EsUUFBb0MsSUFBekI1K0IsS0FBSzRtRCxnQkFBaUMsT0FBTzVtRCxLQUFLNG1ELGdCQUM3RCxHQUFJNW1ELEtBQUttNEIsaUJBQWtCLENBQ3pCLE1BQU0wdUIsU0FBVzdtRCxLQUFLMlUsTUFBTWxTLE1BQVF6QyxLQUFLbTRCLGlCQUN6QyxPQUFJMHVCLFNBQVcsRUFBVSxFQUNyQkEsU0FBVyxJQUFZLElBQ3BCQSxRQUNULENBQ0EsT0FBTzdtRCxLQUFLMlUsTUFBTWxTLEtBUk81RSxDQVMzQixDQUVBLGtCQUFJd2lCLENBQWdCeFUsR0FDbEI3TCxLQUFLNG1ELGdCQUFrQi82QyxDQUN6QixDQUVBLDBCQUFJaTdDLEdBQ0YsT0FBSzltRCxLQUFLbTRCLGlCQUNObjRCLEtBQUttNEIsaUJBQW1CLEVBQVUsSUFBSW40QixLQUFLbTRCLG1CQUN4Q240QixLQUFLbTRCLGlCQUFpQm5tQixXQUZNLElBR3JDLENBRUEsWUFBSXlFLEdBQ0YsSUFBSXpXLEtBQUs0K0IsVUFDTDUrQixLQUFLK21ELGFBQ1QsT0FBTy9tRCxLQUFLcWdCLGdCQUFrQnJnQixLQUFLMG1ELGVBQ3JDLENBRUEsY0FBSWh3QyxHQUNGLElBQUkxVyxLQUFLNCtCLFFBQ1QsT0FBK0IsSUFBeEI1K0IsS0FBS3FnQixjQUNkLENBRUEsb0JBQUkyYixHQUNGLElBQUloOEIsS0FBSzQrQixRQUNULE9BQU81K0IsS0FBSzhULGNBQWdCQyxVQUFVRCxhQUFhekosT0FDckQsQ0FFQSxVQUFJa1YsR0FDRixJQUFJdmYsS0FBSzQrQixVQUNMNStCLEtBQUsrbUQsYUFDVCxPQUFJL21ELEtBQUt3bEMsVUFBa0J4bEMsS0FBS3NXLFlBQWN0VyxLQUFLOFQsYUFDNUM5VCxLQUFLMm1ELGlCQUFtQjNtRCxLQUFLcWdCLGdCQUFrQnJnQixLQUFLMFcsVUFDN0QsQ0FFQSxVQUFJNkosR0FDRixJQUFJdmdCLEtBQUs0K0IsVUFDTDUrQixLQUFLK21ELGFBQ1QsT0FBUS9tRCxLQUFLdWYsTUFDZixDQUVBLGdCQUFJd25DLEdBQ0YsWUFBZ0MsSUFBbEIvbUQsS0FBS3dXLFFBQ3JCLENBRUEsWUFBSXpCLEdBQ0YsU0FBSS9VLEtBQUtnVixjQUFnQmhWLEtBQUtnVixhQUFlLEVBRS9DLENBRUEsY0FBSWd5QyxHQUNGLFNBQUlobkQsS0FBS2dWLGNBQWdCaFYsS0FBS2dWLGFBQWUsRUFFL0MsQ0FFQSxlQUFJaXlDLEdBQ0YsU0FBSWpuRCxLQUFLZ1YsY0FBc0MsSUFBdEJoVixLQUFLZ1YsYUFFaEMsQ0FFQSxnQkFBSUEsR0FDRixPQUFJaFYsS0FBS2tuRCxjQUFzQmxuRCxLQUFLa25ELGNBQzdCLElBQ1QsQ0FFQSxnQkFBSWx5QyxDQUFjbkosR0FDaEI3TCxLQUFLa25ELGNBQWdCampELFNBQVM0SCxFQUNoQyxDQUVBLFFBQUl6VixHQUNGLEdBQUk0SixLQUFLL0YsTUFBTyxDQUNkLEdBQUkrRixLQUFLaUksTUFBTyxPQUFPakksS0FBS2lJLE1BQU1ULFVBQ2xDLEdBQUl4SCxLQUFLaUcsS0FBTSxPQUFPakcsS0FBS2lHLEtBQUs3UCxLQUNoQyxHQUFJNEosS0FBSzJXLGVBQ1AsT0FBTy9PLGNBQWM4Yix1QkFBdUIxakIsS0FBSzJXLGlCQUFpQnRaLE1BRXBFLEdBQUkyQyxLQUFLZ2hCLFVBQVcsQ0FDbEIsR0FBdUIsUUFBbkJoaEIsS0FBS2doQixVQUFxQixPQUFPMWpCLEtBQUtDLEtBQUtDLFNBQVMsYUFDeEQsR0FBdUIsUUFBbkJ3QyxLQUFLZ2hCLFVBQXFCLE9BQU8xakIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxRCxDQUNGLENBQ0EsT0FBTyxJQUNULENBRUEsYUFBSWdLLEdBQ0YsR0FBSXhILEtBQUsvRixNQUFPLENBQ2QsR0FBSStGLEtBQUtpSSxNQUFPLE9BQU9qSSxLQUFLaUksTUFBTVQsVUFDbEMsR0FBSXhILEtBQUtpRyxLQUFNLE9BQU9qRyxLQUFLaUcsS0FBSzdQLEtBQ2hDLEdBQUk0SixLQUFLMlcsZUFDUCxPQUFPL08sY0FBYzhiLHVCQUF1QjFqQixLQUFLMlcsaUJBQWlCZ04sTUFFcEUsR0FBSTNqQixLQUFLZ2hCLFVBQVcsQ0FDbEIsR0FBdUIsUUFBbkJoaEIsS0FBS2doQixVQUFxQixPQUFPMWpCLEtBQUtDLEtBQUtDLFNBQVMsYUFDeEQsR0FBdUIsUUFBbkJ3QyxLQUFLZ2hCLFVBQXFCLE9BQU8xakIsS0FBS0MsS0FBS0MsU0FBUyxXQUMxRCxDQUNGLENBQ0EsT0FBTyxJQUNULENBRUEsWUFBSWtrQixHQUNGLE1BQU1wTCxXQUNKdFcsS0FBS21uRCxjQUFnQnB6QyxVQUFVdVAsZ0JBQWdCdFAsU0FFM0NELFVBQVU2YSxpQkFBaUI1dUIsS0FBS21uRCxhQUNoQ3ppRCxTQUNKMUUsS0FBS2tuRCxjQUFnQixFQUNqQixJQUFJbG5ELEtBQUtrbkQsZ0JBQ1RsbkQsS0FBS2tuRCxjQUFjbDFDLFdBQ3pCLE9BQU8xVSxLQUFLQyxLQUFLMFcsT0FDZixpQkFBa0JxQyxXQUFrQixPQUFMLEtBQzVCdFcsS0FBS2tuRCxjQUFxQixRQUFMLEtBRXhCLENBQUU1d0MsV0FBWTVSLFNBQVV0TyxLQUFNNEosS0FBSzVKLE1BRXZDLENBRUEsVUFBSWcvQixHQUNGLFFBQUlwMUIsS0FBSzRCLElBRVgsQ0FPQSxrQkFBTzhSLENBQWFwSCxNQUNsQixNQUFNNGtDLFdBQWE1a0MsS0FBSzBDLFVBQVV5VCxTQUFTLGVBQ3ZDblcsS0FDQUEsS0FBS3NILGNBQWMsZ0JBQ2pCcUMsTUFBUSxJQUFJbEMsVUFDbEJOLFNBQVNxQixlQUFlbzhCLFdBQVlqN0IsT0FDcEMsTUFBTW5HLFFBQVV4RCxLQUFLelAsUUFBUSxZQUU3QixPQURBb1osTUFBTW9HLFVBQVl2TSxRQUFVQSxRQUFRL1MsUUFBUXNmLFVBQVksS0FDakRwRyxLQUNULENBRUEsaUJBQWEvZSxDQUFNb1YsS0FBTXM0QixTQUFVLEdBQ2pDLE1BQU13aUIsU0FBV3J6QyxVQUFVTCxZQUFZcEgsTUFDakNZLFFBQVVaLEtBQUt2UCxRQUFReVAsUUFDekJGLEtBQUt2UCxRQUFReVAsUUFDYkYsS0FBS3ZQLFFBQVFtUSxRQUNYcUgsUUFBVWpJLEtBQUt2UCxRQUFRd1gsUUFDdkJpbUMsT0FBU2x1QyxLQUFLdlAsUUFBUTRaLGVBQ3RCckMsT0FBU2hJLEtBQUt2UCxRQUFRdVgsT0FDdEJpQyxRQUFVakssS0FBS3ZQLFFBQVF3WixRQUN2QkQsV0FBYWhLLEtBQUt2UCxRQUFRdVosV0FFaEMsSUFBSWk3QixXQUNKLEdBQUloOUIsUUFDRmc5QixXQUFhLElBQUl4OUIsVUFBVTdHLFFBQVNxSCxRQUFTRCxPQUFRaUMsUUFBU0QsZ0JBQ3pELEtBQUlra0MsT0FNSixPQUxMakosV0FBYSxJQUFJeDlCLFVBQ2pCdzlCLFdBQVd2OEIsYUFBZXVCLFFBQzFCZzdCLFdBQVdqN0IsV0FBYUEsV0FDeEJpN0IsV0FBV3QzQyxNQUFRaVQsUUFDbkJxa0MsV0FBVzU2QixlQUFpQjZqQyxNQUN2QixDQVFQLEdBUEk0TSxTQUFTenBELE9BQ1g0ekMsV0FBV2hzQyxRQUFVNmhELFNBQVM3aEQsUUFDOUJnc0MsV0FBVzV6QyxLQUFPeXBELFNBQVN6cEQsTUFFekJ5cEQsU0FBU3I5QyxTQUFRd25DLFdBQVd4bkMsT0FBU3E5QyxTQUFTcjlDLFFBQ2xEd25DLFdBQVd2MEIsU0FBVSxRQUNmdTBCLFdBQVdwd0MsT0FDYmltRCxTQUFTL3FDLFVBQVcsQ0FDdEIsTUFBTWdyQyxRQUFVL3BELEtBQUtnZixTQUFTcGYsSUFBSWtxRCxTQUFTL3FDLGdCQUNNLElBQXRDZ3JDLEVBQUVqd0MsUUFBUSxJQUFJOVgsU0FBU2dvRCxhQUNoQ0QsRUFBRWp3QyxNQUFNLEdBQUc5WCxRQUFRZ29ELFdBQVd0cUMsU0FBVSxRQUNsQ3FxQyxFQUFFbnBELE9BQU8sQ0FDYmtaLE1BQU9pd0MsRUFBRWp3QyxRQUdmLENBQ0l3dEIsU0FBUzJNLFdBQVdwYixXQUFVLEVBQU03cEIsS0FDMUMsQ0FFQSxTQUFJMkUsR0FDRixPQUFLalIsS0FBSy9GLE1BQ0h1VixXQUFXMEIsZ0JBQWdCbFIsS0FBS29SLFVBRGYsSUFFMUIsQ0FFQSxTQUFJblgsQ0FBTzRSLEdBRVQsR0FEQTdMLEtBQUtvUixTQUFXdkYsRUFDUCxNQUFMQSxFQUFKLENBS0EsR0FBSUEsYUFBYTBtQyxNQU9mLE9BTEF2eUMsS0FBS3lzQyxPQUFTNWdDLEVBQ2Q3TCxLQUFLeXNDLE9BQU9wN0IsTUFBUXJSLEtBQUsvRixNQUFNN0QsVUFDM0J5VixFQUFFb0YsT0FBU3BGLEVBQUVvRixNQUFNcEUsT0FBU2hCLEVBQUVvRixNQUFNcEUsTUFBTXFCLEdBQzVDbE8sS0FBS29SLFNBQVcsR0FBR3ZGLEVBQUVvRixNQUFNcEUsTUFBTXFCLE1BQU1yQyxFQUFFb0YsTUFBTS9DLEtBQzFDbE8sS0FBS29SLFNBQVd2RixFQUFFcUMsSUFJM0IsR0FBSXJDLEVBQUU3SSxTQUFTLEtBQWYsQ0FDRSxNQUFPeUosUUFBU0QsU0FBV1gsRUFBRWEsTUFBTSxLQUNuQyxHQUFnQixVQUFaRCxRQUNGek0sS0FBS3lzQyxPQUFTbnZDLEtBQUtxUCxPQUFPQyxPQUFPSixTQUNqQ3hNLEtBQUt5c0MsT0FBT3A3QixNQUFRclIsS0FBS3lzQyxPQUFPcjJDLFNBQzNCLENBQ0wsTUFBTXlXLE1BQVF2UCxLQUFLd1AsT0FBTzVQLElBQUl1UCxTQUM5QixJQUFLSSxNQUFPLE9BQ1osTUFBTUUsVUFBWUYsTUFBTUcsb0JBQW9CLFFBQVNSLFNBQ3JELElBQUtPLFVBQVcsT0FDaEIsTUFBTWtFLE1BQVEsSUFBSWhFLE1BQU1GLFdBQ3hCL00sS0FBS3lzQyxPQUFTeDdCLE1BQU1oWCxNQUNwQitGLEtBQUt5c0MsT0FBT3A3QixNQUFRSixNQUFNN2EsSUFDNUIsQ0FFRixNQUVBNEosS0FBS3lzQyxPQUFTbnZDLEtBQUtxUCxPQUFPelAsSUFBSTJPLEdBQzlCN0wsS0FBSy9GLE1BQU1vWCxNQUFRclIsS0FBSy9GLE1BQU03RCxJQTlCOUIsTUFGRTRKLEtBQUt5c0MsT0FBUzVnQyxDQWlDbEIsQ0FFQSxxQkFBSTA3QyxHQUNGLEdBQUl2bkQsS0FBS3duRCxrQkFBbUIsT0FBTyxLQUNuQyxHQUFJeG5ELEtBQUsrbUQsY0FBbUMsSUFBbkIvbUQsS0FBS29nRCxVQUFpQixPQUFPLEtBQ3RELEdBQUlwZ0QsS0FBSzhULGNBQWdCOVQsS0FBS3NXLFdBQVksQ0FDeEMsTUFBTW14QyxNQUFRLEdBQ2QsSUFDRSxJQUFJcHFDLE1BQVEsRUFDWkEsTUFBUXJkLEtBQUs4VCxhQUFlOVQsS0FBS3NXLFdBQWEsRUFDOUMrRyxRQUVBb3FDLE1BQU12d0QsS0FBSzhJLEtBQUswVyxXQUFhLFFBQVUsUUFFekMsTUFBTWd4QyxZQUFjcHFELEtBQUtDLEtBQUswVyxPQUFPLHVCQUF3QixDQUMzRC9kLE1BQU84SixLQUFLOFQsYUFBZTlULEtBQUtzVyxXQUFhLElBRS9DLE1BQU8sQ0FDTG1oQixTQUFTLEVBQ1Rrd0IsU0FBVTNuRCxLQUFLMFcsV0FBYSxXQUFhLFVBQ3pDa3hDLEtBQU1GLFlBQ05ELE1BRUosQ0FBTyxDQUNMLE1BQU1BLE1BQVEsR0FDUjN6QyxhQUFlOVQsS0FBS3lXLFVBQVksRUFBSXpXLEtBQUs4VCxhQUMvQyxJQUFLLElBQUl1SixNQUFRLEVBQUdBLE1BQVFyZCxLQUFLc1csV0FBYXhDLGFBQWN1SixRQUMxRG9xQyxNQUFNdndELEtBQUs4SSxLQUFLeVcsU0FBVyxRQUFVLFVBRXZDLE1BQU1veEMsWUFBY3ZxRCxLQUFLQyxLQUFLMFcsT0FBTyx3QkFBeUIsQ0FDNUQvZCxNQUFPOEosS0FBS3NXLFdBQWF4QyxlQUUzQixNQUFPLENBQ0wyakIsU0FBUyxFQUNUa3dCLFNBQVUzbkQsS0FBS3lXLFNBQVcsU0FBVyxVQUNyQ214QyxLQUFNQyxZQUNOSixNQUVKLENBQ0YsQ0FFQSxXQUFJOWlDLEdBSUYsWUFISTltQixJQUFjbUMsS0FBSzRrQixXQUNyQjVrQixLQUFLNGtCLFNBQTZCLGNBQWxCNWtCLEtBQUtxQixVQUVoQnJCLEtBQUs0a0IsUUFDZCxDQUVBLFdBQUlELENBQVM5WSxHQUNYN0wsS0FBSzRrQixTQUFXL1ksQ0FDbEIsQ0FFQSxxQkFBSTI3QyxHQUNGLFFBQ0V4bkQsS0FBSzhuRCxzQkFDTDluRCxLQUFLK25ELHFCQUNML25ELEtBQUtnb0Qsa0JBQ0xob0QsS0FBS2lvRCxzQkFJQWwwQyxVQUFVdVAsZ0JBQWdCQyxVQUFZdmpCLEtBQUtzVyxVQUNwRCxDQUVBLFlBQUlqVixHQUVGLE9BREtyQixLQUFLNmtCLFlBQVc3a0IsS0FBSzZrQixVQUFZdm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ3pEOEMsS0FBSzZrQixTQUNkLENBRUEsWUFBSXhqQixDQUFVd0ssSUFDRixJQUFOQSxJQUFhN0wsS0FBSzZrQixVQUFZdm5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQzVEOEMsS0FBSzZrQixVQUFZaFosQ0FDbkIsQ0FFQSxTQUFJNUQsQ0FBTzRELEdBQ1Q3TCxLQUFLa29ELE9BQVNsb0QsS0FBS21vRCxlQUFldDhDLEdBQ2xDN0wsS0FBS3VVLFFBQVUxSSxDQUNqQixDQUVBLFFBQUk1RixDQUFNNEYsR0FDUjdMLEtBQUtvb0QsTUFBUXBvRCxLQUFLbW9ELGVBQWV0OEMsR0FDUixXQUFyQjdMLEtBQUtvb0QsT0FBTy9wRCxLQUNkMkIsS0FBS3NVLE9BQVN6SSxHQUVkN0wsS0FBS29vRCxXQUFRdnFELEVBQ2JtQyxLQUFLc1UsWUFBU3pXLEVBRWxCLENBRUEsY0FBQXNxRCxDQUFnQnQ4QyxHQUNkLE9BQVMsTUFBTEEsRUFBa0IsS0FDbEJBLGFBQWF6RyxLQUFheUcsRUFDMUI3TCxLQUFLeXNDLE9BQWV6c0MsS0FBS3lzQyxPQUFPdCtCLE1BQU1qUixJQUFJMk8sR0FDdkN2TyxLQUFLNlEsTUFBTWpSLElBQUkyTyxFQUN4QixDQUVBLFNBQUk1UixHQUNGLEdBQUsrRixLQUFLeXNDLFFBQVd6c0MsS0FBS3lzQyxRQUFRditCLElBWTNCLEdBQXFDLFdBQWpDbE8sS0FBS3lzQyxPQUFPcG5DLFlBQVlqUCxLQUFtQixDQUNwRCxNQUFNNkQsTUFBUSxJQUFJaTJCLFNBQVNsd0IsS0FBS3lzQyxRQUNoQ3pzQyxLQUFLeXNDLE9BQVN4eUMsS0FDaEIsT0FaRSxHQUZJK0YsS0FBS29SLFdBQVVwUixLQUFLeXNDLE9BQVNqOUIsV0FBV3FCLGdCQUFnQjdRLEtBQUtvUixXQUM3RHBSLEtBQUtrTixVQUFTbE4sS0FBS3lzQyxPQUFTajlCLFdBQVdxQixnQkFBZ0I3USxLQUFLa04sV0FDM0RsTixLQUFLeXNDLE9BQ1IsTUFBTyxDQUNMNGIsU0FBUyxFQUNUanlELEtBQU00SixLQUFLdXBDLFVBQVl2cEMsS0FBS3VwQyxlQUFZMXJDLEVBQ3hDcVEsUUFBSXJRLEVBQ0o2SCxJQUFLLHdEQUNMb1csU0FBVSx5REFPaEIsT0FBTzliLEtBQUt5c0MsTUFDZCxDQUVBLFNBQUl4a0MsR0FrQkYsT0FqQktqSSxLQUFLa29ELFFBQVVsb0QsS0FBS3VVLFVBQ3ZCdlUsS0FBS2tvRCxPQUFTbG9ELEtBQUsvRixPQUFPa1UsTUFBTWpSLElBQUk4QyxLQUFLdVUsV0FFdEN2VSxLQUFLa29ELFFBQVVsb0QsS0FBS2lHLE1BQ25CakcsS0FBS2lHLEtBQUtsSyxPQUFPa00sUUFDZmpJLEtBQUtpRyxLQUFLbEssT0FBT2tNLE1BQU1nRyxLQUFLQyxLQUFPbE8sS0FBSzg5QixlQUMxQzk5QixLQUFLa29ELE9BQVNsb0QsS0FBS3lzQyxPQUFPdCtCLE1BQU1qUixJQUFJOEMsS0FBS2lHLEtBQUtsSyxPQUFPa00sTUFBTWdHLEtBQUtDLElBRWhFbE8sS0FBS2lHLEtBQUtsSyxPQUFPa00sTUFBTW1HLFdBQVdGLElBQ2xDbE8sS0FBSzg5QixpQkFFTDk5QixLQUFLa29ELE9BQVNsb0QsS0FBS3lzQyxPQUFPdCtCLE1BQU1qUixJQUM5QjhDLEtBQUtpRyxLQUFLbEssT0FBT2tNLE1BQU1tRyxXQUFXRixNQUtuQ2xPLEtBQUtrb0QsTUFDZCxDQUVBLFFBQUlqaUQsR0FJRixPQUhLakcsS0FBS29vRCxPQUFTcG9ELEtBQUtzVSxRQUFVdFUsS0FBSy9GLFFBQ3JDK0YsS0FBS29vRCxNQUFRcG9ELEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUk4QyxLQUFLc1UsU0FFbEN0VSxLQUFLb29ELEtBQ2QsQ0FFQSxxQkFBSUUsR0FDRixPQUFPaHJELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG9CQUNuQyxDQUVBLDRCQUFJcXJELEdBQ0YsT0FBT2pyRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDbkMsQ0FFQSwyQkFBSXNyRCxHQUNGLE9BQU94b0QsS0FBS3NvRCxtQkFBcUJ0b0QsS0FBS3VvRCx3QkFDeEMsQ0FFQSwyQkFBSUUsR0FDRixPQUFRem9ELEtBQUtzb0Qsb0JBQXNCdG9ELEtBQUt1b0Qsd0JBQzFDLENBRUEsU0FBSUcsR0FDRixPQUFJMW9ELEtBQUtpSSxNQUFjakksS0FBS2lJLE1BQU12QyxJQUM5QjFGLEtBQUtpRyxLQUFhakcsS0FBS2lHLEtBQUtQLFNBQWhDLENBRUYsQ0FFQSxRQUFJdXBCLEdBQ0YsT0FBT2p2QixLQUFLMm9ELGlCQUFpQmo5QixTQUMvQixDQUVBLHNCQUFJaEgsR0FDRixPQUFPcG5CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUNuQyxDQUVBLGNBQUF5ckQsQ0FBZ0JodkMsUUFBVSxNQUN4QixNQUFNclUsS0FBTyxDQUNYbUosSUFBSyxDQUFDLFlBQWEsYUFBYXpDLE9BQU8yTixTQUN2QzVjLFFBQVMsQ0FBRWtaLE1BQU8sU0FDbEJ4WSxLQUFNdUMsS0FBSzBvRCxNQUNQLHFDQUFxQzFvRCxLQUFLMG9ELGlCQUMxQyw4QkFDSm5sRCxNQUFPdkQsS0FBSzJrQixTQUdSck8sV0FBYXZDLFVBQVU2YSxpQkFBaUI1dUIsS0FBS21uRCxhQUM3Q3o0QyxNQUFRcFIsS0FBS0MsS0FBSzBXLE9BQ3RCLGlCQUFrQmpVLEtBQUttbkQsWUFBbUIsT0FBTCxLQUNsQ25uRCxLQUFLa25ELGNBQXFCLFFBQUwsS0FFeEIsQ0FDRTV3QyxXQUNBNVIsU0FBVTFFLEtBQUtrbkQsY0FDZjl3RCxLQUFNNEosS0FBSzVKLE9BSVRzRyxFQUFJb1MsU0FBU0MsY0FBYyxLQU9qQyxPQU5BclMsRUFBRWdTLE1BQVFBLE1BQ1ZoUyxFQUFFc1MsVUFBVUMsT0FBTzNKLEtBQUttSixLQUN4Qi9SLEVBQUV5UyxVQUFZLEdBQUc3SixLQUFLL0IsTUFBUSxtQ0FBcUMsS0FDakUrQixLQUFLN0gsT0FDSnVDLEtBQUs1SixPQUVEc0csQ0FDVCxDQUVBLFVBQU15RSxDQUFNb1YsUUFBVSxLQUFNRCxXQUFhLEtBQU1oWCxRQUFVLENBQUMsR0FDcERpWCxVQUFTdlcsS0FBS2dWLGFBQWV1QixTQUM3QkQsYUFBWXRXLEtBQUtzVyxXQUFhQSxZQUM3QnRXLEtBQUs0K0IsZUFBZTUrQixLQUFLbWhCLFNBQVM3aEIsUUFDekMsQ0FRQSw4QkFBT3NwRCxDQUF5QjFxQyxVQUM5QixNQUFNL2MsS0FBTyxDQUFDLEVBZWQsT0FiSStjLFNBQVM1SCxhQUFZblYsS0FBS21WLFdBQWE0SCxTQUFTNUgsWUFDaEQ0SCxTQUFTbEosZUFBYzdULEtBQUs2VCxhQUFla0osU0FBU2xKLGVBQzlCLElBQXRCa0osU0FBUzZDLFdBQW1CNWYsS0FBSzRmLFVBQVcsR0FDNUM3QyxTQUFTaWEsbUJBQ1hoM0IsS0FBS2czQixpQkFBbUJqYSxTQUFTaWEsa0JBRS9CamEsU0FBU2thLHdCQUNYajNCLEtBQUtpM0Isc0JBQXdCbGEsU0FBU2thLHVCQUdwQ2xhLFNBQVNqa0IsT0FBT21YLFNBQVVqUSxLQUFLaVEsU0FBVzhNLFNBQVNqa0IsTUFBTW1YLFNBQ3BEOE0sU0FBU2prQixPQUFPN0QsT0FBTStLLEtBQUtvb0MsVUFBWXJyQixTQUFTamtCLE1BQU03RCxNQUV2RDhuQixTQUFTN2YsTUFDZixLQUFLMFYsVUFBVTFWLEtBQUtzWSxlQUNsQnhWLEtBQUt3VixlQUFpQnVILFNBQVNob0IsT0FBTzJGLElBQ3RDLE1BQ0YsS0FBS2tZLFVBQVUxVixLQUFLMmlCLFVBQ2xCN2YsS0FBSzZmLFVBQVk5QyxTQUFTaG9CLE9BQU8yRixJQUNqQyxNQUNGLEtBQUtrWSxVQUFVMVYsS0FBSzRILEtBQ2xCOUUsS0FBS2lRLFNBQVc4TSxTQUFTaG9CLE1BQU0rRCxNQUFNbVgsU0FDUixVQUF6QjhNLFNBQVNob0IsT0FBT21JLEtBQWtCOEMsS0FBSzhHLE1BQVFpVyxTQUFTaG9CLE1BQU1nWSxHQUM3RC9NLEtBQUs4RSxLQUFPaVksU0FBU2hvQixNQUFNZ1ksR0FDaEMsTUFDRixLQUFLNkYsVUFBVTFWLEtBQUs0SixNQUNsQjlHLEtBQUtpUSxTQUFXOE0sU0FBU2hvQixNQUFNK0QsTUFBTW1YLFNBQ3JDalEsS0FBSzhHLE1BQVFpVyxTQUFTaG9CLE1BQU1nWSxHQUM1QixNQUNGLEtBQUs2RixVQUFVMVYsS0FBS25JLE1BQ2xCaUwsS0FBSzhzQixZQUFjL1AsU0FBU2hvQixNQUFNRSxLQUNsQytLLEtBQUtxVixTQUFXMEgsU0FBU2hvQixNQUFNMnlELFVBS25DLE9BQU85MEMsVUFBVXJELE9BQU92UCxLQUMxQixDQUVBLGFBQU91UCxFQUFRLFdBQ0FxRCxVQUFVdVAsZ0JBQWdCdFAsUUFBTyxhQUMvQixLQUFJLFNBQ1IsS0FBSSxlQUNFLEtBQUksVUFDVCxLQUFJLFNBQ0wsRUFBQyxLQUNMLEtBQUksTUFDSCxLQUFJLGlCQUNPLEVBQUMsc0JBQ0ksRUFBQyxZQUNYLEtBQUksVUFDTixLQUFJLFVBRWQsQ0FBQyxHQUNILE1BQU1pQyxNQUFRLElBQUlsQyxVQW9CbEIsT0FuQkFrQyxNQUFNSyxXQUFhQSxZQUNGLElBQWJ5SyxXQUFtQjlLLE1BQU04SyxVQUFXLEdBQ3BDL0wsZUFBY2lCLE1BQU1qQixhQUFlQSxjQUNuQ21qQixtQkFBa0JsaUIsTUFBTWtpQixpQkFBbUJBLGtCQUMzQ0Msd0JBQ0ZuaUIsTUFBTW1pQixzQkFBd0JBLHVCQUU1Qm5LLGNBQWFoWSxNQUFNZ1ksWUFBY0EsYUFDakM3YyxXQUFVNkUsTUFBTWhjLE1BQVFtWCxVQUN4Qm00QixZQUFXdHpCLE1BQU1zekIsVUFBWUEsV0FDNUJ6dEMsTUFBTUksT0FBT3NhLGFBQVlQLE1BQU1PLFNBQVd0YSxPQUFPc2EsV0FDbERQLE1BQU1oYyxRQUFVZ2MsTUFBTWhjLE1BQU1vdUQsVUFFMUJwZ0QsTUFBT2dPLE1BQU1oTyxNQUFRQSxNQUVoQjBPLGVBQWdCVixNQUFNVSxlQUFpQkEsZUFDdkNxSyxVQUFXL0ssTUFBTStLLFVBQVlBLFVBQzdCL2EsT0FBTWdRLE1BQU1oUSxLQUFPQSxPQUV2QmdRLEtBQ1QsQ0FFQSx3QkFBTTZvQixDQUFvQnNDLEtBQU03cUIsUUFBVSxLQUFNRCxXQUFhLE1BQ3ZEQyxVQUFTdlcsS0FBS2dWLGFBQWV1QixTQUM3QkQsYUFBWXRXLEtBQUtzVyxXQUFhQSxZQUNsQ3RXLEtBQUsyVyxlQUFpQnlxQixLQUNqQnBoQyxLQUFLNCtCLGVBQWU1K0IsS0FBS21oQixVQUNoQyxDQUVBLG1CQUFNMGQsQ0FBZWhCLE9BQVF0bkIsUUFBVSxLQUFNRCxXQUFhLE1BQ3BEQyxVQUFTdlcsS0FBS2dWLGFBQWV1QixTQUM3QkQsYUFBWXRXLEtBQUtzVyxXQUFhQSxZQUNsQ3RXLEtBQUtnaEIsVUFBWTZjLE9BQ1o3OUIsS0FBSzQrQixlQUFlNStCLEtBQUttaEIsVUFDaEMsQ0FFQSxlQUFNMm5DLENBQVdsbkIsSUFBS3JyQixRQUFVLEtBQU1ELFdBQWEsTUFDN0NDLFVBQVN2VyxLQUFLZ1YsYUFBZXVCLFNBQzdCRCxhQUFZdFcsS0FBS3NXLFdBQWFBLFlBQ2xDdFcsS0FBS3dXLFNBQVdvckIsSUFDWDVoQyxLQUFLNCtCLGVBQWU1K0IsS0FBS21oQixVQUNoQyxDQUVBLHNCQUFJNGQsR0FDRixPQUFPLytCLEtBQUs4VCxZQUNkLENBRUEsY0FBTXFOLENBQVU3aEIsUUFBVSxDQUFDLEdBQ3pCVSxLQUFLNEIsS0FDSHRDLFFBQVE2QixZQUNERCxTQUFTQyxLQUFLbkIsS0FBS2dWLGFBQWNoVixLQUFLcUIsU0FBVXJCLEtBQUsya0IsU0FDekRybEIsUUFBUWdpQixRQUFXaGtCLEtBQUtrRSxRQUFRdEUsSUFBSSxpQkFBaUI2RCxRQUN4RGczQixZQUFZQyxLQUFLLENBQUUxbEIsSUFBSzFQLE9BQU9xMUIsT0FBT3IyQixPQUFRLEdBRzVDdEMsUUFBUThoQixnQkFDSmxnQixTQUFTaUMsZUFBZW5ELEtBQUs0QixLQUFLVCxNQUcxQ25CLEtBQUsyVSxNQUFRLENBQ1hoUyxLQUFNLEdBQ05ILEtBQU0sQ0FDSnRNLE1BQU84SixLQUFLNEIsS0FBS1ksS0FBS0MsT0FFeEJBLE1BQU96QyxLQUFLNEIsS0FBS2EsTUFDakJzbUQsVUFBVy9vRCxLQUFLNEIsS0FBS2EsTUFBUXpDLEtBQUs0QixLQUFLWSxLQUFLQyxNQUM1Q3NTLFdBQVkvVSxLQUFLZ1YsYUFDakJDLE1BQU83UyxLQUFLQyxJQUFJckMsS0FBS2dWLGNBQ3JCRSxVQUNFbFYsS0FBS2dWLGFBQWUsRUFDaEIxWCxLQUFLQyxLQUFLMFcsT0FBTyw0QkFDakIzVyxLQUFLQyxLQUFLMFcsT0FBTywwQkFDdkJxQyxXQUFZdFcsS0FBS3NXLFlBR25CLE1BQU1yVCxJQUErQixJQUF6QmpELEtBQUs0QixLQUFLWSxLQUFLQyxNQUFjLElBQU0sR0FDekNTLElBQStCLElBQXpCbEQsS0FBSzRCLEtBQUtZLEtBQUtDLE1BQWMsR0FBSyxFQUM5QyxJQUFJNlMsU0FBV3RWLEtBQUs0QixLQUFLYSxNQUFRekMsS0FBSzRCLEtBQUtZLEtBQUtDLE1BQzVDdW1ELFdBQTJCLElBQWIxekMsU0FBaUIsR0FBS2xULEtBQUswSSxNQUFNd0ssU0FBVyxJQUM5RCxJQUFLLE1BQU10ZixLQUFLZ0ssS0FBSzRCLEtBQUtULEtBQUtTLEtBQ3pCNUwsYUFBYTRNLE9BQU9DLEtBQUtDLE1BQU1DLElBQzdCL00sRUFBRTBNLFFBQVEsR0FBR0gsU0FBV3ltRCxZQUMxQkEsWUFBYyxFQUNkaHpELEVBQUUwTSxRQUFRLEdBQUczQixRQUFTLEdBRXRCL0ssRUFBRTBNLFFBQVEsR0FBRzNCLFFBQVMsR0FJNUJmLEtBQUs0QixLQUFLVCxLQUFLbVgsT0FBU3RZLEtBQUs0QixLQUFLYSxNQUNsQyxJQUFLLElBQUkrZCxFQUFJLEVBQUdBLEVBQUl4Z0IsS0FBSzRCLEtBQUtlLEtBQUtELFFBQVE5QixPQUFRNGYsSUFBSyxDQUN0RCxNQUFNbkwsSUFBTSxDQUFDLEVBQ2JBLElBQUluZixNQUFROEosS0FBSzRCLEtBQUtlLEtBQUtELFFBQVE4ZCxHQUMvQm5MLElBQUluZixRQUFVb2YsVUFDaEJBLFNBQVcsSUFDWEQsSUFBSUMsVUFBVyxFQUNYdFYsS0FBSzJVLE1BQU1JLFVBQ2JNLElBQUlFLE9BQVEsRUFDWkYsSUFBSUcsT0FBUSxJQUVaSCxJQUFJRyxPQUFRLEVBQ1pILElBQUlFLE9BQVEsS0FHVkYsSUFBSW5mLFFBQVUrTSxJQUFLb1MsSUFBSUUsT0FBUSxFQUM5QkYsSUFBSUUsT0FBUSxFQUNiRixJQUFJbmYsUUFBVWdOLElBQUttUyxJQUFJRyxPQUFRLEVBQzlCSCxJQUFJRyxPQUFRLEdBR25CeFYsS0FBSzJVLE1BQU1oUyxLQUFLekwsS0FBS21lLElBQ3ZCLENBQ0FyVixLQUFLZ3lDLGNBQ1AsQ0FFQSx1QkFBTXIwQixDQUFtQlAsWUFDdkIsTUFBTTZyQyxlQUFpQmhsRCxTQUFTbVosV0FBWSxJQUM1Q3BkLEtBQUtrcEQsZUFBaUJqbEQsU0FBU2pFLEtBQUtrcEQsZ0JBQWtCLEVBQUcsSUFBTUQsZUFDL0QsTUFBTTVvQyxlQUFpQmplLEtBQUthLElBQUksRUFBR2pELEtBQUtxZ0IsZUFBaUJyZ0IsS0FBS2twRCxnQkFDdkMsSUFBbkI3b0MsZUFDRnJnQixLQUFLOFQsYUFBZUMsVUFBVUQsYUFBYUssU0FDbENrTSxnQkFBa0JyZ0IsS0FBS2svQixpQkFDaENsL0IsS0FBSzhULGFBQWVDLFVBQVVELGFBQWF6SixRQUNsQ2dXLGdCQUFrQnJnQixLQUFLaS9CLGNBQ2hDai9CLEtBQUs4VCxhQUFlQyxVQUFVRCxhQUFhSSxLQUNsQ21NLGdCQUFrQnJnQixLQUFLd1csU0FDaEN4VyxLQUFLOFQsYUFBZUMsVUFBVUQsYUFBYUUsUUFDbENoVSxLQUFLMG1ELGlCQUFtQnJtQyxlQUNqQ3JnQixLQUFLOFQsYUFBZUMsVUFBVUQsYUFBYU0sT0FDbENpTSxlQUFpQnJnQixLQUFLd1csV0FDL0J4VyxLQUFLOFQsYUFBZUMsVUFBVUQsYUFBYU8sU0FFekNyVSxLQUFLc1csWUFBY3RXLEtBQUs4VCxlQUMxQjlULEtBQUt5ZSxXQUFZLEVBQ2pCemUsS0FBSzBlLFdBQVksR0FFbkIxZSxLQUFLd2xDLFdBQVksRUFDakIsSUFBSXhpQixPQUFTLEVBQ2IsSUFBSyxJQUFJM0YsTUFBUSxFQUFHOHJDLFNBQVducEQsS0FBSzBWLGdCQUFnQjlVLE9BQVF5YyxNQUFROHJDLFNBQVU5ckMsUUFDNUVyZCxLQUFLMFYsZ0JBQWdCMkgsT0FBT0MsWUFBY3RkLEtBQUswVixnQkFBZ0IySCxPQUFPQyxZQUFjMnJDLGVBQ2hGanBELEtBQUswVixnQkFBZ0IySCxPQUFPQyxZQUFjLEdBQzVDMEYsU0FHSixJQUFLLElBQUkzRixNQUFRLEVBQUdBLE1BQVEyRixPQUFRM0YsUUFDbENyZCxLQUFLMFYsZ0JBQWdCMHpDLFFBRXZCcHBELEtBQUtneUMsY0FDUCxDQUVBLGtCQUFNQSxHQWlFSixPQWhFQWh5QyxLQUFLb21ELFVBQVlwbUQsS0FBS3duRCxrQkFFbEJ4bkQsS0FBS2lvRCxzQkFDUGpvRCxLQUFLc1csV0FBYXZDLFVBQVV1UCxnQkFBZ0J0UCxTQUUxQ2hVLEtBQUtnb0QsbUJBQWtCaG9ELEtBQUtzVyxXQUFhdkMsVUFBVXVQLGdCQUFnQnBQLE1BQ25FbFUsS0FBSytuRCxzQkFDUC9uRCxLQUFLc1csV0FBYXZDLFVBQVV1UCxnQkFBZ0JqWixTQUUxQ3JLLEtBQUs4bkQsdUJBQ1A5bkQsS0FBS3NXLFdBQWF2QyxVQUFVdVAsZ0JBQWdCblAsVUFHOUNuVSxLQUFLcXBELGNBQTJDLElBQTNCcnBELEtBQUsyVSxNQUFNaFMsS0FBSy9CLE9BRXJDWixLQUFLc3BELFNBQVUsRUFDZnRwRCxLQUFLdXBELGtCQUFtQixFQUN4QnZwRCxLQUFLd3BELFNBQVUsRUFDZnhwRCxLQUFLeXBELFFBQVMsRUFDZHpwRCxLQUFLMHBELGFBQWMsRUFDZjFwRCxLQUFLK21ELGNBQ1AvbUQsS0FBSytnQixVQUFXLEVBQ2hCL2dCLEtBQUsyZ0QsVUFBVyxHQUNPLE1BQWQzZ0QsS0FBSy9GLE1BQ2QrRixLQUFLc3BELFNBQVUsR0FFWHRwRCxLQUFLMlcsaUJBQ1AzVyxLQUFLdXBELGtCQUFtQixFQUN4QnZwRCxLQUFLd1csU0FDSHhXLEtBQUsvRixNQUFNOEIsT0FBTzZuQixnQkFBZ0I1akIsS0FBSzJXLGdCQUFnQnpnQixPQUd2RDhKLEtBQUtpSSxRQUNQakksS0FBS3dwRCxTQUFVLEVBQ2Z4cEQsS0FBS3dXLFNBQVd4VyxLQUFLaUksTUFBTS9SLE9BR3pCOEosS0FBS2doQixZQUNQaGhCLEtBQUswcEQsYUFBYyxFQUNuQjFwRCxLQUFLd1csU0FBV3hXLEtBQUsvRixNQUFNOEIsT0FBT0MsUUFBUWdFLEtBQUtnaEIsV0FBVzlxQixRQUl6RDhKLEtBQUt3bEMsV0FBY3hsQyxLQUFLK21ELGVBQ3ZCL21ELEtBQUtxZ0IsZ0JBQWtCcmdCLEtBQUt3VyxXQUM5QnhXLEtBQUs4VCxhQUFlQyxVQUFVRCxhQUFhRSxTQUV6Q2hVLEtBQUtxZ0IsZ0JBQWtCcmdCLEtBQUtpL0IsZ0JBQzlCai9CLEtBQUs4VCxhQUFlQyxVQUFVRCxhQUFhSSxNQUV6Q2xVLEtBQUtxZ0IsZ0JBQWtCcmdCLEtBQUtrL0IsbUJBQzlCbC9CLEtBQUs4VCxhQUFlQyxVQUFVRCxhQUFhekosU0FFekNySyxLQUFLcWdCLGVBQWlCcmdCLEtBQUt3VyxXQUM3QnhXLEtBQUs4VCxhQUFlQyxVQUFVRCxhQUFhTyxTQUVqQixJQUF4QnJVLEtBQUtxZ0IsaUJBQ1ByZ0IsS0FBSzhULGFBQWVDLFVBQVVELGFBQWFLLFVBRXpDblUsS0FBSzBtRCxpQkFBbUIxbUQsS0FBS3FnQixpQkFDL0JyZ0IsS0FBSzhULGFBQWVDLFVBQVVELGFBQWFNLFNBSXZDcFUsS0FBSzhULGNBQ1gsS0FBS0MsVUFBVUQsYUFBYUUsUUFDMUJoVSxLQUFLNlQsV0FBYXZXLEtBQUtDLEtBQUswVyxPQUFPLHVCQUNuQyxNQUNGLEtBQUtGLFVBQVVELGFBQWFJLEtBQzFCbFUsS0FBSzZULFdBQWF2VyxLQUFLQyxLQUFLMFcsT0FBTyxvQkFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhekosUUFDMUJySyxLQUFLNlQsV0FBYXZXLEtBQUtDLEtBQUswVyxPQUFPLHVCQUNuQyxNQUNGLEtBQUtGLFVBQVVELGFBQWFLLFNBQzFCblUsS0FBSzZULFdBQWF2VyxLQUFLQyxLQUFLMFcsT0FBTyx3QkFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhTSxPQUMxQnBVLEtBQUs2VCxXQUFhdlcsS0FBS0MsS0FBSzBXLE9BQU8sZUFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhTyxRQUMxQnJVLEtBQUs2VCxXQUFhdlcsS0FBS0MsS0FBSzBXLE9BQU8sZ0JBZ0R2QyxHQXpDSWpVLEtBQUt3bkQsa0JBQ1B4bkQsS0FBSzJwRCxnQkFBa0IsR0FDYjNwRCxLQUFLK21ELGVBQ2YvbUQsS0FBSzJwRCxnQkFBa0Jyc0QsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXdCLENBQzlEMDFDLGdCQUFpQjNwRCxLQUFLNHVCLG9CQUlFLElBQXhCNXVCLEtBQUtxZ0IsaUJBQ1ByZ0IsS0FBSzhULGFBQWVDLFVBQVVELGFBQWFLLFVBRXhDblUsS0FBS3dsQyxXQUFjeGxDLEtBQUtvbUQsV0FBY3BtRCxLQUFLK21ELGVBQzlDL21ELEtBQUswZSxVQUFZMWUsS0FBS3VnQixPQUN0QnZnQixLQUFLeWUsVUFBWXplLEtBQUt1ZixRQUd4QnZmLEtBQUtrcUMsZ0JBQWlCLEVBQ2xCbHFDLEtBQUt5VyxXQUFVelcsS0FBSzhULGFBQWVDLFVBQVVELGFBQWFNLFFBRTFEcFUsS0FBS2lHLE9BQ1BqRyxLQUFLeXBELFFBQVMsRUFDVnpwRCxLQUFLaUcsS0FBS2xLLE9BQU9xSyxhQUVqQmxLLE9BQU84RCxLQUFLcWdCLGlCQUFtQm5rQixPQUFPOEQsS0FBS2lHLEtBQUtsSyxPQUFPcUssZUFFdkRwRyxLQUFLa3FDLGdCQUFpQixFQUN0QmxxQyxLQUFLNHBELGVBQWlCdHNELEtBQUtDLEtBQUswVyxPQUFPLG1CQUFvQixDQUN6RGk4QixTQUFVbHdDLEtBQUtpRyxLQUFLN1AsYUFFaEI0SixLQUFLaUcsS0FBSzBDLGVBQWV4RCxTQUFTakcsTUFBTWtILG9CQUtwQixJQUFyQnBHLEtBQUtxTyxjQUNkck8sS0FBS3FPLGNBQWNyTyxLQUFLaUksT0FBUWpJLEtBQUtpSSxNQUFNb0csY0FDaEIsTUFBdkJyTyxLQUFLMlcsaUJBQXdCM1csS0FBS3FPLGFBQWMsR0FDaERyTyxLQUFLeVcsV0FBVXpXLEtBQUtxTyxhQUFjLEdBQ2xDck8sS0FBSytnQixXQUFVL2dCLEtBQUtxTyxhQUFjLEtBR25Dck8sS0FBSzJnRCxVQUFZM2dELEtBQUsvRixNQUFPLENBQ2hDLEtBQ0crRixLQUFLd2xDLFdBQ0x4bEMsS0FBS3VmLFFBQ0x2ZixLQUFLeVcsVUFDTnpXLEtBQUtzVyxhQUFldkMsVUFBVXVQLGdCQUFnQm5QLFVBQzdDblUsS0FBS3duRCxxQkFFRnhuRCxLQUFLaUksT0FBU2pJLEtBQUsyVyxnQkFBZ0IsQ0FDckMsTUFBTWQsV0FBYTdWLEtBQUtxZ0IsZUFBaUJyZ0IsS0FBSzJtRCxnQkFDMUMzbUQsS0FBSy9GLE1BQU1pL0MsS0FBT3JqQyxhQUNwQjdWLEtBQUs2cEQsZUFBZ0IsRUFDckI3cEQsS0FBSzZWLFdBQWFBLFdBQ2xCN1YsS0FBSzhWLGNBQWdCeFksS0FBS0MsS0FBSzBXLE9BQU8saUJBQWtCLENBQ3REOEIsZ0JBQWlCRixhQUd2QixDQUdGLElBQUs3VixLQUFLd2xDLFlBQ1J4bEMsS0FBSzBWLGdCQUFrQixJQUlwQjFWLEtBQUtnZCxTQUNhLFFBQW5CaGQsS0FBS2doQixXQUNjLFFBQW5CaGhCLEtBQUtnaEIsV0FDTCxDQUNBLEdBQ0VoaEIsS0FBS3duRCxtQkFDTHhuRCxLQUFLcWdCLGVBQWlCcmdCLEtBQUtnL0IsaUJBQzNCLENBQ0EsTUFBTThxQixVQUFZLENBQUMsRUFDbkJBLFVBQVUzZ0IsZUFBaUI3ckMsS0FBS0MsS0FBS0MsU0FDbkMsMEJBRUZzc0QsVUFBVXh6QyxXQUFhdkMsVUFBVXVQLGdCQUFnQnRQLFFBQ2pEODFDLFVBQVV4c0MsWUFBY3RkLEtBQUtxZ0IsZUFBaUJyZ0IsS0FBS2cvQixpQkFDbkQ4cUIsVUFBVUQsY0FBZ0JDLFVBQVV4c0MsYUFBZXRkLEtBQUsvRixNQUFNaS9DLEtBQzFENFEsVUFBVXhzQyxhQUFldGQsS0FBSy9GLE1BQU1pL0MsTUFDdENsNUMsS0FBSzBWLGdCQUFnQnhlLEtBQUs0eUQsVUFFOUIsQ0FFQSxHQUNFOXBELEtBQUtzVyxZQUFjdkMsVUFBVXVQLGdCQUFnQnRQLFNBQzdDaFUsS0FBS3FnQixlQUFpQnJnQixLQUFLaS9CLGNBQzNCLENBQ0EsTUFBTTZxQixVQUFZLENBQUMsRUFDbkJBLFVBQVUzZ0IsZUFBaUI3ckMsS0FBS0MsS0FBS0MsU0FBUyx1QkFDOUNzc0QsVUFBVXh6QyxXQUFhdkMsVUFBVXVQLGdCQUFnQnBQLEtBQ2pENDFDLFVBQVV4c0MsWUFBY3RkLEtBQUtxZ0IsZUFBaUJyZ0IsS0FBS2kvQixjQUNuRDZxQixVQUFVRCxjQUFnQkMsVUFBVXhzQyxhQUFldGQsS0FBSy9GLE1BQU1pL0MsS0FDMUQ0USxVQUFVeHNDLGFBQWV0ZCxLQUFLL0YsTUFBTWkvQyxNQUN0Q2w1QyxLQUFLMFYsZ0JBQWdCeGUsS0FBSzR5RCxVQUU5QixDQUVBLEdBQ0U5cEQsS0FBS3NXLFlBQWN2QyxVQUFVdVAsZ0JBQWdCcFAsTUFDN0NsVSxLQUFLcWdCLGVBQWlCcmdCLEtBQUtrL0IsaUJBQzNCLENBQ0EsTUFBTTRxQixVQUFZLENBQUMsRUFDbkJBLFVBQVUzZ0IsZUFBaUI3ckMsS0FBS0MsS0FBS0MsU0FDbkMsMEJBRUZzc0QsVUFBVXh6QyxXQUFhdkMsVUFBVXVQLGdCQUFnQmpaLFFBQ2pEeS9DLFVBQVV4c0MsWUFBY3RkLEtBQUtxZ0IsZUFBaUJyZ0IsS0FBS2svQixpQkFDbkQ0cUIsVUFBVUQsY0FBZ0JDLFVBQVV4c0MsYUFBZXRkLEtBQUsvRixNQUFNaS9DLEtBQzFENFEsVUFBVXhzQyxhQUFldGQsS0FBSy9GLE1BQU1pL0MsTUFDdENsNUMsS0FBSzBWLGdCQUFnQnhlLEtBQUs0eUQsVUFFOUIsQ0FDRixDQUdGOXBELEtBQUsrcEQsbUJBQXFCL3BELEtBQUswVixnQkFBZ0I5VSxPQUFTLEVBQ3BEWixLQUFLeVcsV0FBVXpXLEtBQUsrcEQsb0JBQXFCLEVBQy9DLENBQ0EsR0FBSS9wRCxLQUFLNEIsS0FDUDVCLEtBQUs0QixLQUFLVCxLQUFLN0IsUUFBUWdvRCxXQUFhLENBQ2xDeHpDLGFBQWNsVSxPQUFPbUUsS0FBS2dRLFVBQVVELGNBQWNwVSxNQUFLN0QsS0FBT2tZLFVBQVVELGFBQWFqWSxPQUFTbUUsS0FBSzhULGdCQUFpQixVQUNwSGsyQyxlQUFnQmhxRCxLQUFLb21ELFVBQ3JCN21DLE9BQVF2ZixLQUFLdWYsT0FDYnZDLFNBQVMsRUFDVGl0QyxPQUFRanFELEtBQUtnZCxRQUNid29CLFVBQVd4bEMsS0FBS2twRCxnQkFBa0IsUUFFL0IsR0FBOEIsaUJBQW5CbHBELEtBQUtxYyxVQUF3QixDQUM3QyxNQUFNZ3JDLFFBQVUvcEQsS0FBS2dmLFNBQVNwZixJQUFJOEMsS0FBS3FjLGdCQUNVLElBQXRDZ3JDLEVBQUVqd0MsUUFBUSxJQUFJOVgsU0FBU2dvRCxhQUNoQ0QsRUFBRWp3QyxNQUFNLEdBQUc5WCxRQUFRZ29ELFdBQVc5aEIsVUFBWXhsQyxLQUFLa3BELGdCQUFrQixRQUMzRDdCLEVBQUVucEQsT0FBTyxDQUNia1osTUFBT2l3QyxFQUFFandDLFFBR2YsQ0FrQkEsR0FoQkFwWCxLQUFLa3FELG1CQUNIbHFELEtBQUtpSSxRQUFVakksS0FBS2lJLE1BQU1sTSxPQUFPOEssV0FBVzlQLFdBRzVDaUosS0FBS3VmLFFBQ0x2ZixLQUFLZ1YsY0FBZ0IsR0FDckJoVixLQUFLaUksUUFDSmpJLEtBQUtpSSxNQUFNbE0sT0FBTzhLLFdBQVc5UCxVQUM3QmlKLEtBQUt3bEMsV0FDTHhsQyxLQUFLbXFELFFBQ0xucUQsS0FBSzJrQixTQUNMM2tCLEtBQUtvbUQsV0FFTnBtRCxLQUFLc0ksc0JBR0h0SSxLQUFLK0osT0FBUSxDQUNmLE1BQU1BLGFBQWU3RCxTQUFTbEcsS0FBSytKLFFBQy9CQSxRQUFVLGVBQWdCQSxjQUN0QkEsT0FBT3RDLFdBQVd6SCxLQUFLb3FELGVBR2pDLENBQ0YsQ0FFQSxZQUFBNTFDLEdBQ0UsR0FBSWxYLEtBQUtrRSxRQUFRdEUsSUFBSSxpQkFBaUI2RCxPQUFRLENBQzVDLE1BQU0wVCxZQUFjLEdBQ3BCLElBQUssTUFBTUMsYUFBYTFVLEtBQUsyVSxNQUFNaFMsS0FDakM4UixZQUFZdmQsS0FBeUIsTUFBcEJ3ZCxVQUFVeGUsTUFBZ0IsRUFBSXdlLFVBQVV4ZSxNQUFRLElBRW5FdWUsWUFBWXZkLEtBQUs4SSxLQUFLMlUsTUFBTW5TLEtBQUt0TSxPQUVqQyxNQUFNMGUsU0FBVyxDQUNmNWEsUUFBUyxHQUFHZ0csS0FBSzJVLE1BQU1oUyxLQUFLL0Isa0JBQzVCOEIsUUFBUytSLFlBQ1RuUixRQUFTLEtBQ1RDLE9BQU8sR0FFVGpHLEtBQUtvRyxPQUFPbVIsS0FBS0QsU0FDbkIsQ0FDRixDQUVBLFlBQUkreUMsR0FDRixJQUFJQSxTQUFXLEdBZWYsT0FkSTNuRCxLQUFLeWUsWUFBV2twQyxTQUFXLFdBQzNCM25ELEtBQUswZSxZQUFXaXBDLFNBQVcsV0FDM0IzbkQsS0FBSzBXLGFBQWUxVyxLQUFLMGUsWUFBV2lwQyxTQUFXLG9CQUMvQzNuRCxLQUFLeVcsV0FBYXpXLEtBQUt5ZSxZQUFXa3BDLFNBQVcsa0JBQzdDNXpDLFVBQVVELGFBQWFFLFVBQVloVSxLQUFLOFQsZUFDMUM2ekMsVUFBWSxvQkFFVjV6QyxVQUFVRCxhQUFhSSxPQUFTbFUsS0FBSzhULGVBQ3ZDNnpDLFVBQVksaUJBRVY1ekMsVUFBVUQsYUFBYXpKLFVBQVlySyxLQUFLOFQsZUFDMUM2ekMsVUFBWSxvQkFHUEEsUUFDVCxDQUVBLGdCQUFJMEMsR0FDRixNQUFNMUMsU0FBVyxHQWVqQixPQWRJM25ELEtBQUt5ZSxXQUFXa3BDLFNBQVN6d0QsS0FBSyxXQUM5QjhJLEtBQUswZSxXQUFXaXBDLFNBQVN6d0QsS0FBSyxXQUM5QjhJLEtBQUswVyxhQUFlMVcsS0FBSzBlLFdBQVdpcEMsU0FBU3p3RCxLQUFLLFVBQVcsWUFDN0Q4SSxLQUFLeVcsV0FBYXpXLEtBQUt5ZSxXQUFXa3BDLFNBQVN6d0QsS0FBSyxVQUFXLFVBQzNENmMsVUFBVUQsYUFBYUUsVUFBWWhVLEtBQUs4VCxjQUMxQzZ6QyxTQUFTendELEtBQUssbUJBRVo2YyxVQUFVRCxhQUFhSSxPQUFTbFUsS0FBSzhULGNBQ3ZDNnpDLFNBQVN6d0QsS0FBSyxnQkFFWjZjLFVBQVVELGFBQWF6SixVQUFZckssS0FBSzhULGNBQzFDNnpDLFNBQVN6d0QsS0FBSyxtQkFHVHl3RCxRQUNULENBRUEsa0JBQUkyQyxHQUNGLE9BQUl0cUQsS0FBS3llLFdBQWF6ZSxLQUFLdXFELGNBQXNCLFVBQzdDdnFELEtBQUswZSxXQUFhMWUsS0FBS3dxRCxjQUFzQixVQUMxQyxJQUNULENBRUEsa0JBQU14c0MsQ0FBY3dzQixhQUFjdHNDLFFBQVMsR0FDekMsTUFBTXVzQyxpQkFBbUJ6cUMsS0FBSzBWLGdCQUFnQjgwQixjQUN4Q3B0QixXQUNKblosU0FBU3dtQyxpQkFBaUJydEIsYUFDMUJuWixTQUFTd21DLGlCQUFpQm50QixhQUM1QixJQUFLdGQsS0FBSy9GLE1BQU13akIsVUFBVUwsWUFNeEIsWUFMQXJVLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLDBCQUEyQixDQUMxQ2hhLE1BQU8rRixLQUFLL0YsTUFBTTdELFFBS3hCNEosS0FBS2twRCxlQUFrQmpsRCxTQUFTakUsS0FBS2twRCxnQkFFakNqbEQsU0FBU2pFLEtBQUtrcEQsZ0JBRGQsRUFFSmxwRCxLQUFLa3BELGdCQUFrQmpsRCxTQUFTbVosWUFDaEMsTUFBTWtvQixnQkFDSnJoQyxTQUFTd21DLGlCQUFpQm5GLGtCQUMxQnJoQyxTQUFTd21DLGlCQUFpQm4wQixZQUM1QnRXLEtBQUs4VCxhQUFld3hCLGdCQUNoQnRsQyxLQUFLc1csWUFBY2d2QixrQkFDckJ0bEMsS0FBS3llLFdBQVksRUFDakJ6ZSxLQUFLMGUsV0FBWSxHQUVuQixJQUFLLElBQUlyQixNQUFRLEVBQUdBLE1BQVFtdEIsYUFBZSxFQUFHbnRCLFFBQzVDcmQsS0FBSzBWLGdCQUFnQjB6QyxRQUV2QixJQUFLLE1BQU1uekQsS0FBSytKLEtBQUswVixnQkFDbkJ6ZixFQUFFcW5CLFlBQWNybkIsRUFBRXFuQixZQUFjRixXQUlsQyxPQUZBcGQsS0FBS3dsQyxXQUFZLEVBQ2pCeGxDLEtBQUtneUMsZUFDRDl6QyxhQUFxQjhCLEtBQUt1ckIsc0JBQTlCLENBQ0YsQ0FFQSxjQUFBay9CLEdBQ0V6cUQsS0FBSytwRCxvQkFBcUIsRUFDMUIvcEQsS0FBSzBWLGdCQUFrQixHQUN2QjFWLEtBQUs2VixXQUFhLEVBQ2xCN1YsS0FBSzhWLGNBQWdCLEtBQ3JCOVYsS0FBS3FPLGFBQWMsQ0FDckIsQ0FFQSxTQUFBNFAsQ0FBV2IsV0FBYSxLQUFNbGYsUUFBUyxHQUNyQyxHQUFJa2YsV0FBWSxDQUNkcGQsS0FBSy9GLE1BQU13akIsVUFBVUwsWUFDckJwZCxLQUFLOFQsYUFBZTlULEtBQUtzVyxXQUN6QixJQUFLLE1BQU1yZ0IsS0FBSytKLEtBQUswVixnQkFDbkJ6ZixFQUFFcW5CLFlBQWNybkIsRUFBRXFuQixZQUFjRixXQUVsQ3BkLEtBQUt3bEMsV0FBWSxFQUNqQnhsQyxLQUFLeWUsV0FBWSxFQUNqQnplLEtBQUswZSxXQUFZLEVBQ2pCMWUsS0FBS2twRCxlQUFrQmpsRCxTQUFTakUsS0FBS2twRCxnQkFFakNqbEQsU0FBU2pFLEtBQUtrcEQsZ0JBRGQsRUFFSmxwRCxLQUFLa3BELGdCQUFrQmpsRCxTQUFTbVosWUFDaENwZCxLQUFLZ3lDLGVBQ0Q5ekMsUUFBUThCLEtBQUt1ckIsZ0JBQ25CLE1BQ0V2ckIsS0FBS21xRCxRQUFTLEVBQ2RucUQsS0FBS3VxRCxlQUFnQixFQUNqQnZxRCxLQUFLb21ELFVBQ1BwbUQsS0FBSzBxRCxrQkFBa0IzMkMsVUFBVUQsYUFBYUUsUUFBUzlWLFFBRXZEOEIsS0FBSzBxRCxrQkFBa0IxcUQsS0FBS3NXLFdBQVlwWSxPQUc5QyxDQUVBLFNBQUEyekMsQ0FBVzN6QyxRQUFTLEdBQ2xCOEIsS0FBS21xRCxRQUFTLEVBQ2RucUQsS0FBS3dxRCxlQUFnQixFQUNqQnhxRCxLQUFLb21ELFVBQ1BwbUQsS0FBSzBxRCxrQkFBa0IzMkMsVUFBVUQsYUFBYU8sUUFBU25XLFFBRXZEOEIsS0FBSzBxRCxrQkFBa0IxcUQsS0FBS3NXLFdBQWEsRUFBR3BZLE9BRWhELENBRUEsV0FBQXlzRCxDQUFhQyxLQUFNQyxJQUFLM3NELFFBQVMsR0FDL0IsSUFBSXVFLE1BQVFMLEtBQUswSSxNQUFNMUksS0FBSzBvRCxVQUFZRixLQUFPQyxNQUFRQSxJQUFNLEVBQzdELE1BQU1FLFVBQVl0b0QsTUFBUSxHQUMxQixJQUFJdW9ELFNBQVc1b0QsS0FBSzBJLE1BQU1ySSxNQUFRLElBQ2xDLE1BQU1FLEtBQU8sR0FFYixJQUFJc29ELFVBQVk3b0QsS0FBS0MsSUFBSXJDLEtBQUtnVixnQkFBa0JyUyxLQUFLL0IsT0FDckQsTUFBUXFxRCxXQUFXLENBQ2pCLElBQUlDLElBQU05b0QsS0FBSzBJLE1BQXNCLEdBQWhCMUksS0FBSzBvRCxVQUN0QjNwRCxLQUFhLEdBQU4rcEQsSUFBV0gsVUFDVCxJQUFUNXBELE9BQ0ZBLEtBQU8sSUFDUCtwRCxJQUFNLEtBRUpsckQsS0FBS2duRCxZQUFjN2xELE1BQVF5cEQsT0FDN0Jqb0QsS0FBS3pMLEtBQUtnMEQsS0FDTi9wRCxLQUFPc0IsUUFBT0EsTUFBUXRCLE9BRXhCbkIsS0FBSytVLFVBQVk1VCxLQUFPMHBELE1BQzFCbG9ELEtBQUt6TCxLQUFLZzBELEtBQ04vcEQsS0FBT3NCLFFBQU9BLE1BQVF0QixPQUU1QjhwRCxVQUFZdG9ELEtBQUsvQixTQUFXd0IsS0FBS0MsSUFBSXJDLEtBQUtnVixhQUM1QyxDQUdpQixLQUFiZzJDLFVBQWlDLElBQWRELFlBQ3JCQyxTQUFXLEtBRWJyb0QsS0FBSyt6QixPQUNIdDBCLEtBQUswSSxNQUFNMUksS0FBSzBvRCxTQUFXbm9ELEtBQUsvQixPQUFTLEdBQ3pDLEVBQ2EsS0FBYm9xRCxTQUFrQixFQUFJQSxVQUd4QmhyRCxLQUFLMlUsTUFBTWhTLEtBQU8sR0FDbEIzQyxLQUFLMlUsTUFBTW5TLEtBQUt0TSxNQUFRNjBELFVBQ3hCL3FELEtBQUtxZ0IsZUFBaUI1ZCxNQUN0QnpDLEtBQUsyVSxNQUFNbFMsTUFBUUEsTUFDbkJ6QyxLQUFLMlUsTUFBTW8wQyxVQUFZdG1ELE1BQVFzb0QsVUFFL0IsTUFBTTluRCxJQUFvQixJQUFkOG5ELFVBQWtCLElBQU0sR0FDOUI3bkQsSUFBb0IsSUFBZDZuRCxVQUFrQixHQUFLLEVBQ25DLElBQUl6MUMsU0FBVzdTLE1BQVFzb0QsVUFFdkIsSUFBSyxJQUFJdnFDLEVBQUksRUFBR0EsRUFBSTdkLEtBQUsvQixPQUFRNGYsSUFBSyxDQUNwQyxNQUFNbkwsSUFBTSxDQUFDLEVBQ2JBLElBQUluZixNQUFReU0sS0FBSzZkLEdBQ2JuTCxJQUFJbmYsUUFBVW9mLFVBQ2hCQSxTQUFXLElBQ1hELElBQUlDLFVBQVcsRUFDWHRWLEtBQUsrVSxVQUNQTSxJQUFJRSxPQUFRLEVBQ1pGLElBQUlHLE9BQVEsSUFFWkgsSUFBSUcsT0FBUSxFQUNaSCxJQUFJRSxPQUFRLEtBR1ZGLElBQUluZixRQUFVK00sSUFBS29TLElBQUlFLE9BQVEsRUFDOUJGLElBQUlFLE9BQVEsRUFDYkYsSUFBSW5mLFFBQVVnTixJQUFLbVMsSUFBSUcsT0FBUSxFQUM5QkgsSUFBSUcsT0FBUSxHQUduQnhWLEtBQUsyVSxNQUFNaFMsS0FBS3pMLEtBQUttZSxJQUN2QixDQUVBclYsS0FBS2d5QyxlQUNEOXpDLFFBQVE4QixLQUFLdXJCLGdCQUNuQixDQUVBLGlCQUFBbS9CLENBQW1CNTJDLGFBQWM1VixRQUFTLEdBQ3hDLElBQUkwc0QsS0FBTUMsSUFDTjkyQyxVQUFVRCxhQUFhTSxTQUFXTixlQUNwQzgyQyxLQUFPLElBQ1BDLElBQU03cUQsS0FBSzBtRCxnQkFBa0IsR0FFM0IzeUMsVUFBVUQsYUFBYU8sVUFBWVAsZUFFbkM4MkMsS0FERTVxRCxLQUFLZy9CLG1CQUFxQmgvQixLQUFLMG1ELGdCQUFrQixFQUM1QyxJQUNLMW1ELEtBQUswbUQsZ0JBQWtCLEVBQ3JDbUUsSUFBTTdxRCxLQUFLZy9CLGtCQUVUanJCLFVBQVVELGFBQWFFLFVBQVlGLGVBQ3JDODJDLEtBQU81cUQsS0FBS2cvQixpQkFDWjZyQixJQUFNN3FELEtBQUtpL0IsZUFFVGxyQixVQUFVRCxhQUFhSSxPQUFTSixlQUNsQzgyQyxLQUFPNXFELEtBQUtpL0IsY0FDWjRyQixJQUFNN3FELEtBQUtrL0Isa0JBRVRuckIsVUFBVUQsYUFBYXpKLFVBQVl5SixlQUNyQzgyQyxLQUFPNXFELEtBQUtrL0IsaUJBQ1oyckIsSUFBTSxHQUVKOTJDLFVBQVVELGFBQWFLLFdBQWFMLGVBQ3RDODJDLEtBQU8sRUFDUEMsSUFBTSxHQUVKRCxPQUFTQyxLQUFLQSxNQUNMLElBQVRELE9BQVlBLEtBQU81cUQsS0FBSzBtRCxnQkFBa0IsR0FDOUMxbUQsS0FBSzJxRCxZQUFZQyxLQUFNQyxJQUFLM3NELE9BQzlCLENBRUEsb0JBQUE0ekMsQ0FBc0I1ekMsUUFBUyxHQUM3QixJQUFJMHNELEtBQU1DLElBQ045MkMsVUFBVUQsYUFBYU0sU0FBV3BVLEtBQUs4VCxlQUN6QzgyQyxLQUFPNXFELEtBQUswbUQsZ0JBQWtCLEVBRTVCbUUsSUFERTdxRCxLQUFLZy9CLG1CQUFxQmgvQixLQUFLMG1ELGdCQUFrQixFQUM3QzFtRCxLQUFLaS9CLGNBRUxqL0IsS0FBS2cvQixrQkFHWGpyQixVQUFVRCxhQUFhTyxVQUFZclUsS0FBSzhULGVBQzFDODJDLEtBQU81cUQsS0FBS2cvQixpQkFDWjZyQixJQUFNN3FELEtBQUtpL0IsZUFFVGxyQixVQUFVRCxhQUFhRSxVQUFZaFUsS0FBSzhULGVBQzFDODJDLEtBQU81cUQsS0FBS2kvQixjQUNaNHJCLElBQU03cUQsS0FBS2svQixrQkFFVG5yQixVQUFVRCxhQUFhSSxPQUFTbFUsS0FBSzhULGVBQ3ZDODJDLEtBQU81cUQsS0FBS2svQixpQkFDWjJyQixJQUFNN3FELEtBQUt5bUQsbUJBRVQxeUMsVUFBVUQsYUFBYXpKLFVBQVlySyxLQUFLOFQsZUFDMUM4MkMsS0FBTzVxRCxLQUFLeW1ELGtCQUNab0UsSUFBTSxHQUVKRCxPQUFTQyxLQUFLQSxNQUNsQjdxRCxLQUFLMnFELFlBQVlDLEtBQU1DLElBQUszc0QsT0FDOUIsQ0FFQSxvQkFBQTZ6QyxDQUFzQjd6QyxRQUFTLEdBQzdCLElBQUkwc0QsS0FBTUMsSUFDTjkyQyxVQUFVRCxhQUFhTyxVQUFZclUsS0FBSzhULGVBQzFDODJDLEtBQU8sSUFDUEMsSUFBTTdxRCxLQUFLMG1ELGdCQUFrQixHQUUzQjN5QyxVQUFVRCxhQUFhRSxVQUFZaFUsS0FBSzhULGVBQzFDODJDLEtBQU81cUQsS0FBSzBtRCxnQkFBa0IsRUFDOUJtRSxJQUFNN3FELEtBQUtnL0Isa0JBRVRqckIsVUFBVUQsYUFBYUksT0FBU2xVLEtBQUs4VCxlQUN2QzgyQyxLQUFPNXFELEtBQUtnL0IsaUJBQ1o2ckIsSUFBTTdxRCxLQUFLaS9CLGVBRVRsckIsVUFBVUQsYUFBYXpKLFVBQVlySyxLQUFLOFQsZUFDMUM4MkMsS0FBTzVxRCxLQUFLaS9CLGNBQ1o0ckIsSUFBTTdxRCxLQUFLay9CLGtCQUVUbnJCLFVBQVVELGFBQWFLLFdBQWFuVSxLQUFLOFQsZUFDM0M4MkMsS0FBTzVxRCxLQUFLay9CLGlCQUNaMnJCLElBQU0sR0FFSyxJQUFURCxPQUFZQSxLQUFPNXFELEtBQUswbUQsZ0JBQWtCLEdBQzlDMW1ELEtBQUsycUQsWUFBWUMsS0FBTUMsSUFBSzNzRCxPQUM5QixDQUVBLHlCQUFNb0ssR0FDSnRJLEtBQUttckQsdUJBQXdCLEVBQ3pCbnJELEtBQUtpSSxhQUFhakksS0FBS2lJLE1BQU1LLHFCQUNuQyxDQUVBLGNBQUlnTyxDQUFZekssR0FDZDdMLEtBQUttbkQsWUFBY2xqRCxTQUFTNEgsRUFDOUIsQ0FFQSxjQUFJeUssR0FDRixPQUFPdFcsS0FBS21uRCxXQUNkLENBRUEsVUFBSW4zQyxDQUFRbkUsR0FDVjdMLEtBQUtvckQsUUFBVXYvQyxDQUNqQixDQUVBLFdBQUl0RyxDQUFTc0csR0FDWDdMLEtBQUtxckQsU0FBV3gvQyxDQUNsQixDQUVBLFdBQUl0RyxHQUNGLEdBQUt2RixLQUFLcXJELFNBQ1YsT0FBT3JyRCxLQUFLcXJELFFBQ2QsQ0FFQSxVQUFJdGhELENBQVE4QixHQUNMN0wsS0FBS3JDLE9BQU1xQyxLQUFLckMsS0FBT2lCLFFBQVFDLE1BQU15bkQsU0FBUyxLQUNuRHRtRCxLQUFLc3JELFdBQWF6L0MsQ0FDcEIsQ0FFQSxVQUFJOUIsR0FDRixHQUFLL0osS0FBS3NyRCxXQUNWLE9BQU90ckQsS0FBS3NyRCxVQUNkLENBRUEsVUFBSXQ3QyxHQUNGLEdBQUloUSxLQUFLb3JELFFBQVMsT0FBT3ByRCxLQUFLb3JELFFBQzlCLElBQUlwN0MsT0FBUyxHQTZEYixPQTVESWhRLEtBQUsvRixPQUFPOEIsU0FDVmlFLEtBQUtpSSxNQUNQK0gsT0FBUzFTLEtBQUtDLEtBQUswVyxPQUFPLG1CQUFvQixDQUM1QzdkLEtBQU00SixLQUFLaUksTUFBTTdSLEtBQ2pCRixNQUFPOEosS0FBS3dtRCxlQUNabHdDLFdBQVl0VyxLQUFLNHVCLG1CQUVWNXVCLEtBQUtpRyxLQUNkK0osT0FBUzFTLEtBQUtDLEtBQUswVyxPQUFPLHVCQUF3QixDQUNoRGhPLEtBQU1qRyxLQUFLaUcsS0FBSzdQLEtBQ2hCNlIsTUFBT2pJLEtBQUtpSSxNQUFNN1IsS0FDbEJGLE1BQU84SixLQUFLd21ELGVBQ1psd0MsV0FBWXRXLEtBQUs0dUIsbUJBRVY1dUIsS0FBSzJXLGVBQ2QzRyxPQUFTMVMsS0FBS0MsS0FBSzBXLE9BQU8sbUJBQW9CLENBQzVDN2QsS0FBTWtILEtBQUtDLEtBQUswVyxPQUNkalUsS0FBSy9GLE1BQU04QixPQUFPNm5CLGdCQUFnQjVqQixLQUFLMlcsZ0JBQWdCdFosT0FFekRuSCxNQUFPOEosS0FBS3dtRCxlQUNabHdDLFdBQVl0VyxLQUFLNHVCLG1CQUVWNXVCLEtBQUtnaEIsVUFDZGhSLE9BQVMxUyxLQUFLQyxLQUFLMFcsT0FBTyxtQkFBb0IsQ0FDNUM3ZCxLQUFNa0gsS0FBS0MsS0FBSzBXLE9BQ2QsUUFBUWpVLEtBQUsvRixNQUFNOEIsT0FBT0MsUUFBUWdFLEtBQUtnaEIsV0FBVzNqQixTQUVwRG5ILE1BQU84SixLQUFLd21ELGVBQ1psd0MsV0FBWXRXLEtBQUs0dUIsbUJBRVY1dUIsS0FBS2l1QixjQUNkamUsT0FBUzFTLEtBQUtDLEtBQUswVyxPQUFPLG1CQUFvQixDQUM1QzdkLEtBQU00SixLQUFLaXVCLFlBQ1gvM0IsTUFBTzhKLEtBQUt3bUQsZUFDWmx3QyxXQUFZdFcsS0FBSzR1QixxQkFLbEI1ZSxRQUNDaFEsS0FBS3dXLFdBRUx4RyxPQURFaFEsS0FBS2l1QixZQUNFM3dCLEtBQUtDLEtBQUswVyxPQUFPLG1CQUFvQixDQUM1QzdkLEtBQU00SixLQUFLaXVCLFlBQ1gvM0IsTUFBTzhKLEtBQUt3bUQsZUFDWmx3QyxXQUFZdFcsS0FBSzR1QixtQkFHVnR4QixLQUFLQyxLQUFLMFcsT0FBTyxxQkFBc0IsQ0FDOUNzM0MsU0FBVXZyRCxLQUFLd1csU0FDZkYsV0FBWXRXLEtBQUs0dUIsb0JBTXJCNXVCLEtBQUtnZCxVQUNQaE4sT0FBUyxHQUFHMVMsS0FBS0MsS0FBSzBXLE9BQU8sbUJBQW1CakUsVUFHM0NBLE1BQ1QsQ0FFQSxpQkFBSXc3QyxHQUNGLE9BQUl4ckQsS0FBS2doQixVQUVMMWpCLEtBQUtDLEtBQUswVyxPQUNSLGlCQUNFalUsS0FBS3NXLGFBQWV2QyxVQUFVdVAsZ0JBQWdCdFAsUUFBVSxHQUFLLFNBQzNEaFUsS0FBS2dWLGFBQW9CLFFBQUwsS0FDeEIsQ0FDRXNCLFdBQVl0VyxLQUFLNHVCLGlCQUNqQmxxQixTQUFVMUUsS0FBS2dWLGFBQ2Y1ZSxLQUFNa0gsS0FBS0MsS0FBSzBXLE9BQ2QsUUFBUWpVLEtBQUsvRixNQUFNOEIsT0FBT0MsUUFBUWdFLEtBQUtnaEIsV0FBVzNqQixXQUdwRCxLQUFLMkMsS0FBSy9GLE1BQU04QixPQUFPQyxRQUFRZ0UsS0FBS2doQixXQUFXOXFCLFVBR25EOEosS0FBSzJXLGVBRUxyWixLQUFLQyxLQUFLMFcsT0FDUixpQkFDRWpVLEtBQUtzVyxhQUFldkMsVUFBVXVQLGdCQUFnQnRQLFFBQVUsR0FBSyxTQUMzRGhVLEtBQUtnVixhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZdFcsS0FBSzR1QixpQkFDakJscUIsU0FBVTFFLEtBQUtnVixhQUNmNWUsS0FBTWtILEtBQUtDLEtBQUtDLFNBQ2R3QyxLQUFLL0YsTUFBTThCLE9BQU82bkIsZ0JBQWdCNWpCLEtBQUsyVyxnQkFBZ0J0WixTQUk3RCxLQUFLMkMsS0FBSy9GLE1BQU04QixPQUFPNm5CLGdCQUFnQjVqQixLQUFLMlcsZ0JBQWdCemdCLFVBRzVEOEosS0FBS2lJLE1BRUwzSyxLQUFLQyxLQUFLMFcsT0FDUixpQkFDRWpVLEtBQUtzVyxhQUFldkMsVUFBVXVQLGdCQUFnQnRQLFFBQVUsR0FBSyxTQUMzRGhVLEtBQUtnVixhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZdFcsS0FBSzR1QixpQkFDakJscUIsU0FBVTFFLEtBQUtnVixhQUNmNWUsS0FBTTRKLEtBQUtpSSxNQUFNN1IsT0FFakIsS0FBSzRKLEtBQUtpSSxNQUFNL1IsVUFHcEI4SixLQUFLaXVCLFlBRUwzd0IsS0FBS0MsS0FBSzBXLE9BQ1IsaUJBQ0VqVSxLQUFLc1csYUFBZXZDLFVBQVV1UCxnQkFBZ0J0UCxRQUFVLEdBQUssU0FDM0RoVSxLQUFLZ1YsYUFBb0IsUUFBTCxLQUN4QixDQUNFc0IsV0FBWXRXLEtBQUs0dUIsaUJBQ2pCbHFCLFNBQVUxRSxLQUFLZ1YsYUFDZjVlLEtBQU00SixLQUFLaXVCLGNBRVgsS0FBS2p1QixLQUFLd21ELG1CQUdYLElBQ1QsQ0FFQSx3QkFBTWlGLENBQW9CbnNELFFBQVUsQ0FBQyxHQUUvQlUsS0FBS1YsUUFBU1UsS0FBS1YsUUFBVVYsUUFBUUMsTUFBTTZhLFlBQVkxWixLQUFLVixRQUFTQSxTQUNwRVUsS0FBS1YsUUFBVUEsUUFDcEIsTUFBTTJhLFdBQWF3RyxlQUhGLHNEQUcyQnpnQixNQUM1QyxPQUFJaWEsS0FBYTZSLEVBQUVDLFVBQVU5UixNQUFNLEdBQzVCLElBQ1QsQ0FFQSxpQkFBTXFiLENBQWFoMkIsUUFBVSxDQUFDLEdBRXhCVSxLQUFLVixRQUFTVSxLQUFLVixRQUFVVixRQUFRQyxNQUFNNmEsWUFBWTFaLEtBQUtWLFFBQVNBLFNBQ3BFVSxLQUFLVixRQUFVQSxRQUVwQixhQURtQm1oQixlQUhGLHNEQUcyQnpnQixZQUM3Qm5DLENBQ2pCLENBRUEsZUFBTXM0QixDQUFXblosU0FBVSxHQUV6QmhkLEtBQUtnZCxRQUFVQSxRQUNmLE1BRU0vQyxXQUFhd0csZUFGRiwrQ0FFMkJ6Z0IsTUFFdEMrbEIsWUFBYyxDQUFDLEVBQ3JCLElBQUk5VixRQUNBalEsS0FBSy9GLE9BQ0grRixLQUFLL0YsTUFBTTJjLFFBQ2JtUCxZQUFZOVUsTUFBUWpSLEtBQUtpUixNQUFNbkMsU0FDdEI5TyxLQUFLL0YsTUFBTW91RCxRQUNoQnJvRCxLQUFLL0YsTUFBTTdELE9BQU02WixRQUFVLENBQUVvQixNQUFPclIsS0FBSy9GLE1BQU03RCxPQUVuRDJ2QixZQUFZOXJCLE1BQVErRixLQUFLL0YsTUFFM0JnVyxRQUFVek0sWUFBWTBNLFdBQVc2VixjQUVqQzlWLFFBQVV6TSxZQUFZME0sYUFHeEIsTUFFTTdNLFNBQVcsQ0FDZk8sTUFIVzVELEtBQUsvRixPQUFPMkosS0FBTzVELEtBQUsvRixNQUFNMkosS0FBT3RHLEtBQUtzRyxNQUcxQ3NLLEdBQ1grQixRQUNBRCxPQUFRaFEsS0FBS2dRLE9BQ2JTLFFBQVN3SixLQUNUL2EsTUFBTyxDQUNMd0MsS0FBTSxDQUNKckQsS0FBTTBWLFVBQVVxZ0IsWUFRdEIsR0FISXAwQixLQUFLckMsT0FBTTBGLFNBQVNuRSxNQUFNd0MsS0FBSy9ELEtBQU9xQyxLQUFLckMsTUFDM0NxQyxLQUFLdUYsVUFBU2xDLFNBQVNuRSxNQUFNd0MsS0FBSzZELFFBQVV2RixLQUFLdUYsU0FFL0IsYUFBbEJ2RixLQUFLcUIsU0FDUCxHQUFJL0QsS0FBS3NHLEtBQUsyRSxNQVdaLEdBVkFsRixTQUFTTyxLQUFPdEcsS0FBS3NHLEtBQUtzSyxHQUMxQjdLLFNBQVMyTSxPQUFTLElBQUloUSxLQUFLL0YsTUFBTTdELFNBQVNpTixTQUFTMk0sU0FDbkQzTSxTQUFTbkUsTUFBUSxDQUNmd0MsS0FBTSxDQUNKd3JDLFlBQVksU0FHZ0IsSUFBckI3cEMsU0FBUzRNLFVBQ2xCNU0sU0FBU25FLE1BQU13QyxLQUFLZ3FELGdCQUFrQjlzRCxRQUFRQyxNQUFNd08sVUFBVWhLLFNBQVM0TSxVQUVyRTNTLEtBQUtzRyxLQUFLMkUsS0FDWixPQUFRakwsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsMEJBQ2hDLElBQUssZ0JBQ0ltRyxTQUFTNE0sUUFDaEI1TSxTQUFTQyxRQUFVdEQsS0FBSy9GLE1BQU15MUIsT0FDOUJyc0IsU0FBU2hGLEtBQU84UixNQUFNQyxtQkFBbUJDLFFBQ3pDLE1BRUYsSUFBSyxrQkFDSWhOLFNBQVM0TSxRQUNoQjVNLFNBQVNDLFFBQVVoRyxLQUFLZ2xCLE1BQU0ycUIsUUFDOUI1cEMsU0FBU2hGLEtBQU84UixNQUFNQyxtQkFBbUJDLFFBQ3pDLE1BRUYsUUFDRTdNLFlBQVlDLGNBQWNKLFNBQVVyRCxLQUFLcUIsZ0JBSTFDbUMsWUFBWUMsY0FBY0osU0FBVXJELEtBQUtxQixVQUc5QyxDQUFDLFNBQVUsYUFBYTJCLFNBQVNoRCxLQUFLcUIsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZd2lCLHFCQUFxQixPQUVoQyxjQUFsQmhtQixLQUFLcUIsV0FBMEJnQyxTQUFTRSxPQUFRLEdBR2hEdkQsS0FBSzRCLE1BQU1ULE9BQVNuQixLQUFLNEIsTUFBTU4sV0FFN0IxQyxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFDN0NzRSxTQUFTK1QsTUFBUSxDQUFDcFgsS0FBSzRCLEtBQUtULE1BRTVCa0MsU0FBU2xDLEtBQU9uQixLQUFLNEIsS0FBS1QsS0FFNUJrQyxTQUFTaEYsS0FBTzhSLE1BQU1DLG1CQUFtQkUsS0FDekNqTixTQUFTaEMsU0FBV3JCLEtBQUsya0IsUUFBVSxZQUFjM2tCLEtBQUtxQixVQUd4RG1DLFlBQVlrTixPQUFPck4sVUFBVWdFLE1BQUtzSixLQUN6QkEsS0FFWCxDQU1BLG9CQUFNNGEsRUFBZ0IsWUFBZSxFQUFLLFdBQWMsR0FBVSxDQUFDLEdBQzdEMG1CLGFBQVlqeUMsS0FBS3FCLFVBQVcsR0FFaEMsTUFBTWdDLFNBQVcsQ0FBRTJNLE9BQVFoUSxLQUFLZ1EsUUFFNUJpaUMsYUFDRjV1QyxTQUFTQyxRQUFVLEdBQ25CRCxTQUFTRSxPQUFRLEVBQ2pCQyxZQUFZQyxjQUFjSixXQU94QkEsU0FBU0UsUUFDWHZELEtBQUsya0IsU0FBVSxHQUdqQixNQUNNMUssV0FBYXdHLGVBREYsK0NBQzJCemdCLE1BQzVDLElBQUkyckQsV0FBYTF4QyxLQUVqQixJQUFLamEsS0FBS3FjLFVBQVcsT0FBT3lQLEVBQUVDLFVBQVU5UixNQUFNLEdBRzlDLE1BQU1uSyxRQUFVeFMsS0FBS2dmLFNBQVNwZixJQUFJOEMsS0FBS3FjLFdBQ2pDdXZDLFlBQWM5L0IsRUFBRUMsVUFBVWpjLFFBQVFXLFNBQVMsR0FDakQsSUFBS203QyxZQUFZNThDLFVBQVV5VCxTQUFTLGVBQWdCLENBQ2xELE1BQU04YyxVQUFZelQsRUFBRUMsVUFBVTlSLE1BQU0sR0FDOUI0eEMsa0JBQW9CRCxZQUFZaDRDLGNBQWMsZ0JBQzFCLE9BQXRCaTRDLG1CQUNGQSxrQkFBa0Juc0IsWUFBWUgsV0FFaENvc0IsV0FBYUMsWUFBWWxnQyxTQUMzQixDQUVBcm9CLFNBQVNvTixRQUFVazdDLFdBRWZ4N0MsTUFBTUMsbUJBQW1CRSxPQUFTUixRQUFRelIsT0FDeEN5UixRQUFReE0sU0FBUzFDLE9BQ25CeUMsU0FBU2hGLEtBQU84UixNQUFNQyxtQkFBbUJDLFFBQ3BDaE4sU0FBU2hGLEtBQU84UixNQUFNQyxtQkFBbUIwN0MsT0FHOUM1WixXQUFhbHlDLEtBQUs0QixNQUFNVCxPQUFTN0QsS0FBS3NHLEtBQUsyRSxPQUFTdkksS0FBSzJrQixnQkFDckR6akIsU0FBU2lDLGVBQWVuRCxLQUFLNEIsS0FBS1QsTUFHMUMsTUFBTXdQLFVBQVliLFFBQVE1UixPQUFPbUYsVUFFakMsYUFETTBGLEdBQUdrakIsS0FBS0MsY0FBY3ZiLEtBQUssR0FDMUJBLEdBQ1QsQ0FFQSw2QkFBYXV6QixDQUFrQjNuQyxPQUM3QixNQUFNK1AsS0FBTy9QLE1BQU1JLGNBQWNFLFFBQVEsY0FDbkNvWixZQUFjbEMsVUFBVUwsWUFBWXBILE1BQzFDMkosTUFBTWd5QyxxQkFBc0IsRUFDNUJoeUMsTUFBTSt4QyxrQkFBbUIsRUFDekIveEMsTUFBTTh4QyxxQkFBc0IsRUFDNUI5eEMsTUFBTTZ4QyxzQkFBdUIsRUFDWSx3QkFBckN2ckQsTUFBTUksY0FBY0ksUUFBUXk0QixPQUM5QnZmLE1BQU1neUMscUJBQXNCLEdBRVcscUJBQXJDMXJELE1BQU1JLGNBQWNJLFFBQVF5NEIsT0FDOUJ2ZixNQUFNK3hDLGtCQUFtQixHQUVjLHdCQUFyQ3pyRCxNQUFNSSxjQUFjSSxRQUFReTRCLE9BQzlCdmYsTUFBTTh4QyxxQkFBc0IsR0FFVyx5QkFBckN4ckQsTUFBTUksY0FBY0ksUUFBUXk0QixPQUM5QnZmLE1BQU02eEMsc0JBQXVCLEdBRS9CN3hDLE1BQU0rN0IsZUFDTi83QixNQUFNc1YsZ0JBQ1IsQ0FFQSxXQUFJd2dDLEdBQ0YsT0FBT3RyQyxlQUNMLHNEQUNBemdCLEtBRUosQ0FFQSxlQUFJeXJCLEdBQ0YsTUFBTS91QixFQUFJb1MsU0FBU0MsY0FBYyxLQVVqQyxPQVRBclMsRUFBRXNTLFVBQVVDLElBQUkscUJBQ2hCdlMsRUFBRXNTLFVBQVVDLElBQUkscUJBQ2hCdlMsRUFBRXNTLFVBQVVDLElBQUksZUFDaEJ2UyxFQUFFc1MsVUFBVUMsT0FBT2pQLEtBQUtxcUQsY0FDeEIzdEQsRUFBRWdTLE1BQVExTyxLQUFLd3JELGNBQ2Y5dUQsRUFBRUssUUFBUW9FLEtBQU93TixPQUFPM08sS0FBS29xRCxnQkFDN0IxdEQsRUFBRXlTLFVBQVksMkNBQ1puUCxLQUFLcWdCLGdCQUFrQixPQUVsQjNqQixDQUNULENBRUEsZUFBSXN2RCxHQUNGLEdBQUloc0QsS0FBSzQrQixRQUFTLE9BQ2xCLE1BQU03M0IsTUFBUSxHQUNScEUsS0FBTzNDLEtBQUsyVSxNQUFNaFMsS0FBS3FCLEtBQUlxVCxJQUN4QixDQUNMOVUsT0FBUThVLEVBQUVuaEIsTUFDVm9mLFNBQVUrQixFQUFFL0IsU0FDWnFFLFFBQVMsQ0FDUCxNQUNBLE1BQ0N0QyxFQUFFL0IsU0FBeUIsS0FBZCxZQUNkK0IsRUFBRTdCLE1BQVEsTUFBUSxLQUNsQjZCLEVBQUU5QixNQUFRLE1BQVEsTUFFakJsZixRQUFPKzVCLEdBQUtBLElBQ1ovckIsS0FBSyxTQUdON0IsS0FBTyxDQUNYLENBQ0VELE9BQVF2QyxLQUFLMlUsTUFBTW5TLEtBQUt0TSxNQUN4Qm9mLFVBQVUsRUFDVnFFLFFBQVMsWUFjYixPQVZBNVMsTUFBTTdQLEtBQUssQ0FDVDhDLFFBQVNnRyxLQUFLd3JELGNBQ2Qvb0QsTUFBT3pDLEtBQUtxZ0IsZUFDWm9uQyxNQUFPem5ELEtBQUt1bkQsa0JBQ1oxaUQsTUFBTzdFLEtBQUsybkQsU0FDWmdDLGdCQUFpQjNwRCxLQUFLMnBELGdCQUN0QjkxQyxXQUFZN1QsS0FBSzZULFdBQ2pCbzRDLEtBQU0sR0FDTjcwQyxNQUFPLElBQUl6VSxRQUFTSCxRQUVmaWUsZUFDTCxzREFDQSxDQUFFMVosT0FFTixDQUVBLGdCQUFJNlcsR0FDRixPQUFPaFAsS0FBSzRkLE1BQU14c0IsS0FBS29xRCxlQUN6QixDQUVBLGtCQUFJQSxHQUNGLE9BQU94N0MsS0FBS0MsVUFBVTdPLE1BQU0sQ0FBQ25FLElBQUszRixTQUNoQyxHQUFjLE9BQVZBLE1BQWdCLE9BRXBCLE1BRGdCLENBQUMsU0FBVSxTQUFVLFNBQ3pCOE0sU0FBU25ILFVBQXJCLEVBQ08zRixRQUVYLENBRUEsZUFBTzZMLENBQVV1RCxNQUNmLE9BQU8xRixPQUFPeWUsT0FBTyxJQUFJdEssVUFBYXpPLEtBQ3hDLENBRUEscUJBQU80bUQsQ0FBZ0IvNEIsWUFDckIsSUFBSTd0QixLQUNKLElBQ0VBLEtBQU9zSixLQUFLNGQsTUFBTUMsU0FBUzBHLFlBQzdCLENBQUUsTUFBT25vQixLQUVQLE9BREFqQyxHQUFHQyxjQUFjMFUsTUFBTTFTLElBQUk4RSxTQUNwQixJQUNULENBQ0EsT0FBT2lFLFVBQVVoUyxTQUFTdUQsS0FDNUIsQ0FFQSxrQkFBYTR5QixDQUFPamlCLE1BQU9rMkMsUUFBUzdzRCxRQUFVLENBQUMsR0FDN0MsT0FBUTZzRCxTQUNOLElBQUssVUFDSCxHQUFJN3NELFFBQVEybEIsT0FBT2pXLFVBQVV5VCxTQUFTLGNBQWUsQ0FDbkQsTUFBTXJGLFdBQWFuWixTQUFTM0UsUUFBUTJsQixPQUFPbG9CLFFBQVFxZ0IsWUFDbkRuSCxNQUFNZ0ksVUFBVWIsV0FBWTlkLFFBQVFwQixPQUN0QyxLQUFPLENBQ0wsTUFBTWl6QyxhQUFlbHRDLFNBQVMzRSxRQUFRMmxCLE9BQU9sb0IsUUFBUXNnQixhQUMvQ3BILE1BQU0rSCxhQUFhbXpCLGFBQWM3eEMsUUFBUXBCLE9BQ2pELENBQ0EsTUFHRixJQUFLLGFBQ0grWCxNQUFNZ0ksVUFBVSxLQUFNM2UsUUFBUXBCLFFBQzlCLE1BR0YsSUFBSyxhQUNIK1gsTUFBTTQ3QixVQUFVdnlDLFFBQVFwQixRQUN4QixNQUdGLElBQUsseUJBQ0grWCxNQUFNNjdCLHFCQUFxQnh5QyxRQUFRcEIsUUFDbkMsTUFHRixJQUFLLHlCQUNIK1gsTUFBTTg3QixxQkFBcUJ6eUMsUUFBUXBCLFFBQ25DLE1BR0YsSUFBSyxlQUNIK1gsTUFBTTBPLFNBQVUsRUFDaEIxTyxNQUFNNVUsVUFBVyxFQUNqQjRVLE1BQU0rN0IsZUFDRjF5QyxRQUFRcEIsUUFBUStYLE1BQU1zVixpQkFDMUIsTUFHRixJQUFLLDZCQUNHdFYsTUFBTTNOLHNCQUNaMk4sTUFBTSs3QixlQUNGMXlDLFFBQVFwQixRQUFRK1gsTUFBTXNWLGlCQUMxQixNQUdGLElBQUssYUFDR3RWLE1BQU1rTCxXQUNabEwsTUFBTStHLFNBQVUsRUFDWjFkLFFBQVFwQixRQUFRK1gsTUFBTXNWLGlCQUdoQyxDQUVBLCtCQUFhNmdDLENBQW9CN3ZELE9BQy9CQSxNQUFNRSxpQkFDTixNQUFNQyxFQUFJSCxNQUFNSSxjQUVoQixHQUFJRCxFQUFFc1MsVUFBVXlULFNBQVMscUJBQ3ZCLE9BQUkvbEIsRUFBRXNTLFVBQVV5VCxTQUFTLFlBQ2hCMU8sVUFBVW84QixzQkFBc0J6ekMsR0FFaENxWCxVQUFVcThCLG9CQUFvQjF6QyxFQUczQyxDQUVBLDRCQUFPeXpDLENBQXVCenpDLEdBQzVCLElBQUtBLEVBQUVzUyxVQUFVeVQsU0FBUyxxQkFBc0IsT0FDaEQsSUFBSy9sQixFQUFFc1MsVUFBVXlULFNBQVMsWUFBYSxPQUN2QyxNQUFNc3BDLFFBQVVydkQsRUFBRWtYLGNBQWMsdUJBRWhDLE9BREltNEMsU0FBU0EsUUFBUS9vQyxTQUNkdG1CLEVBQUVzUyxVQUFVZ1UsT0FBTyxXQUM1QixDQUVBLGdDQUFhb3RCLENBQXFCMXpDLEdBQ2hDLElBQUtBLEVBQUVzUyxVQUFVeVQsU0FBUyxxQkFBc0IsT0FDaEQsR0FBSS9sQixFQUFFc1MsVUFBVXlULFNBQVMsWUFBYSxPQUd0QyxNQUFNeE0sTUFBUXJXLE9BQU95ZSxPQUNuQixJQUFJdEssVUFDSm5GLEtBQUs0ZCxNQUFNQyxTQUFTL3ZCLEVBQUVLLFFBQVFvRSxRQUVoQyxHQUFJOFUsTUFBTTJvQixRQUFTLE9BRW5CLE1BQU15dEIsSUFBTXY5QyxTQUFTQyxjQUFjLE9BQ25DczlDLElBQUlsOUMsZ0JBQWtCOEcsTUFBTSsxQyxZQUc1QixNQUFNRCxRQUFVTSxJQUFJM3hDLFNBQVMsR0FDN0JoZSxFQUFFNHZELFlBQVlQLFNBQ2RydkQsRUFBRXNTLFVBQVVDLElBQUksWUFHaEIsTUFBTXM5QyxHQUFLN3ZELEVBQUU4dkQsd0JBQ1BDLEdBQUtWLFFBQVFTLHdCQUNuQlQsUUFBUWhzQixNQUFNNmMsS0FBTyxHQUFHeDZDLEtBQUtjLElBQzNCcXBELEdBQUcxZ0QsRUFDSDZnRCxPQUFPQyxZQUFjRixHQUFHM3lDLE1BQVEsUUFFbENpeUMsUUFBUWhzQixNQUFNNnNCLElBQU0sR0FBR3hxRCxLQUFLYyxJQUMxQnFwRCxHQUFHTSxFQUFJTixHQUFHeHlDLE9BQVMsRUFDbkIyeUMsT0FBT0ksYUFBZUwsR0FBRzF5QyxPQUFTLFFBRXBDLE1BQU1nekMsR0FBS0MsaUJBQWlCdHdELEdBQUd1d0QsT0FDL0JsQixRQUFRaHNCLE1BQU1rdEIsT0FBUy93RCxPQUFPZ3hELFVBQVVILElBQU1BLEdBQUssRUFBSSxHQUN6RCxFQzc5REssTUFBTW5sRCxjQVlYLGdCQUFPbStDLENBQVdsNkMsR0FDaEIsTUFBaUIsaUJBQU5BLE1BQ04vUCxNQUFNSSxPQUFPMlAsS0FDWC9KLEtBQUtnNEIsU0FBU2p1QixHQUN2QixDQUVBLHFCQUFPc2hELENBQWdCbHpDLEtBQU14SixTQUMzQixNQUNNM04sTUFBUTJOLFFBQVE1SyxNQURULFVBRWIsR0FDRS9DLE1BQU0sSUFBSWtGLGNBQWNuQyxNQUFNLGdCQUM5Qi9DLE1BQU0sSUFBSWtGLGNBQWMyQyxXQUFXLE9BTW5DLE9BSEE4VyxZQUFXLFdBQ1Q3WixjQUFjd2xELGFBQWEzOEMsUUFDN0IsR0FBRyxNQUNJLENBRVgsQ0FFQSx5QkFBYTI4QyxDQUFjMzhDLFNBQ3pCLE1BQU1uUixRQUFVbVIsUUFDYnpJLGNBQ0EwRSxNQUFNLE1BQ0xySSxLQUFLLEtBQ0xzTCxRQUFRLGVBQWdCLElBQ3RCc0csTUFBUSxJQUFJbEMsVUFDbEIsR0FBSXpVLFFBQVFzQixPQUFRLENBQ2xCLElBQ0lpb0QsVUFJQTF3QixpQkFDQUMsc0JBTkFpMUIsUUFBVS90RCxRQUVWZ1gsV0FBYXZDLFVBQVV1UCxnQkFBZ0J0UCxRQUN2Q2dCLGFBQWUsRUFDZnM0QyxLQUFNLEVBR1YsTUFBTUMsYUFBZUYsUUFBUXhuRCxNQUFNLGVBQ25DLEdBQUkwbkQsY0FBZ0JBLGFBQWEzc0QsT0FBUSxDQUN2Q2lvRCxVQUFZM3NELE9BQU9xeEQsYUFBYSxJQUNoQyxJQUFLLE1BQU0xbkQsU0FBUzBuRCxhQUNsQkYsUUFBVUEsUUFBUTE5QyxRQUFRLElBQUk5SixTQUFVLEdBRTVDLENBQ0EsTUFBTTJuRCxjQUFnQkgsUUFBUXhuRCxNQUFNLGVBQ3BDLEdBQUkybkQsZUFBaUJBLGNBQWM1c0QsT0FBUSxDQUN6QzBWLFdBQWExTyxjQUFjdW1CLGtCQUFrQnEvQixjQUFjLElBQzNELElBQUssTUFBTTNuRCxTQUFTMm5ELGNBQ2xCSCxRQUFVQSxRQUFRMTlDLFFBQVEsSUFBSTlKLFNBQVUsR0FFNUMsQ0FPQSxHQU5Jd25ELFFBQVFycUQsU0FBUyxPQUNuQnNxRCxLQUFNLEVBQ05ELFFBQVVBLFFBQVExOUMsUUFBUSxJQUFLLEtBRTVCN1QsTUFBTUksT0FBT214RCxZQUFXcjRDLGFBQWU5WSxPQUFPbXhELFVBRS9DQyxJQUFLLENBQ1AsTUFBTTF2QixjQUFnQixDQUNwQmlyQixVQUNBbmtELFNBQVVzUSxhQUNWc0IsV0FDQW0zQyxVQUFVLEdBRU4vdUIsWUFBYzdLLFdBQVduakIsT0FBT2t0QixlQUNsQ2MsUUFDRjFwQixhQUFlOVksT0FBT3dpQyxNQUFNeGhDLElBQUksY0FDaENvWixXQUFhcGEsT0FBT3dpQyxNQUFNeGhDLElBQUksZUFDOUIyckQsVUFBWTNzRCxPQUFPd2lDLE1BQU14aEMsSUFBSSxlQUFpQjJyRCxVQUM5QzF3QixpQkFBbUJqOEIsT0FBT3dpQyxNQUFNeGhDLElBQUkscUJBQ3BDazdCLHNCQUF3Qmw4QixPQUFPd2lDLE1BQU14aEMsSUFBSSwwQkFFN0MsQ0FFQStZLE1BQU1qQixhQUFlQSxjQUFnQixFQUNyQ2lCLE1BQU1LLFdBQWFBLFlBQWN2QyxVQUFVdVAsZ0JBQWdCdFAsUUFDM0RpQyxNQUFNTyxTQUFXcXlDLFVBQ2pCNXlDLE1BQU1raUIsaUJBQW1CQSxpQkFDekJsaUIsTUFBTW1pQixzQkFBd0JBLHNCQUMxQnl3QixZQUFXNXlDLE1BQU1PLFNBQVkxYSxNQUFNK3NELGdCQUF5QmhyRCxFQUFaZ3JELFVBQ3RELENBQ0EsTUFBTTU0QyxRQUFVek0sWUFBWTBNLGFBQzVCLEdBQUlELFFBQVFnQixPQUFTaEIsUUFBUXBELE1BQU8sQ0FDbEMsTUFBTTVTLE1BQVF1VixXQUFXcUIsZ0JBQ3ZCLEdBQUdaLFFBQVFwRCxTQUFTb0QsUUFBUWdCLFNBRTFCaFgsUUFBT2djLE1BQU1oYyxNQUFRQSxNQUMzQixNQUFPLEdBQUlnVyxRQUFRaFcsTUFBTyxDQUN4QixNQUFNQSxNQUFRcUQsS0FBS3FQLE9BQU96UCxJQUFJK1MsUUFBUWhXLE9BQ2xDQSxRQUFPZ2MsTUFBTWhjLE1BQVFBLE1BQzNCLE9BQ01nYyxNQUFNOVUsT0FDWjhVLE1BQU1rZ0IsV0FDUixDQUVBLGlCQUFhdTNCLEdBQ1gza0QsR0FBR0MsY0FBY3kxQixNQUFNLGdCQUN6QixDQUVBLHlCQUFPa3ZCLENBQW9CQyxhQUN6QixJQUFJM3pELE1BS0osT0FBSXFELEtBQUtxUCxPQUFPQyxPQUFPZ2hELGFBQXFCdHdELEtBQUtxUCxPQUFPQyxPQUFPZ2hELGNBRS9EM3pELE1BQVFxRCxLQUFLcVAsT0FBT3pQLElBQUkwd0QsYUFDcEIzekQsUUFJSkEsTUFBUTJGLE9BQU9KLE9BQU9sQyxLQUFLcVAsT0FBT0MsUUFBUWxOLE1BQUtxRCxHQUN6Q0EsRUFBRTNNLEtBQUs0UixnQkFBa0I0bEQsWUFBWTVsRCxnQkFHdEMvTixRQUVIQSxNQUFRcUQsS0FBS3FQLE9BQU9qTixNQUFLaEQsR0FDbkJBLEVBQUV0RyxLQUFLNFIsZ0JBQWtCNGxELFlBQVk1bEQsaUJBSXpDL04sT0FTRyxNQUNULENBRUEsNkJBQU95cEIsQ0FBd0IwZCxNQUM3QixNQUFNNGYsUUFBVTVmLEtBQUtwNUIsY0FFckIsT0FBUWc1QyxTQUNOLElBQUssTUFDSCxNQUFPLENBQ0xyOUIsTUFBT3JtQixLQUFLQyxLQUFLQyxTQUFTLGNBQzFCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLG9CQUU5QixJQUFLLE1BQ0gsTUFBTyxDQUNMbW1CLE1BQU9ybUIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxQkgsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyx3QkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTG1tQixNQUFPcm1CLEtBQUtDLEtBQUtDLFNBQVMsY0FDMUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsZ0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xtbUIsTUFBT3JtQixLQUFLQyxLQUFLQyxTQUFTLGNBQzFCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHFCQUU5QixJQUFLLE1BQ0gsTUFBTyxDQUNMbW1CLE1BQU9ybUIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxQkgsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxzQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTG1tQixNQUFPcm1CLEtBQUtDLEtBQUtDLFNBQVMsY0FDMUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsd0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xtbUIsTUFBT3JtQixLQUFLQyxLQUFLQyxTQUFTLGNBQzFCSCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGlCQUU5QixJQUFLLE1BQ0gsTUFBTyxDQUNMbW1CLE1BQU9ybUIsS0FBS0MsS0FBS0MsU0FBUyxjQUMxQkgsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxxQkFFOUIsSUFBSyxPQUNILE1BQU8sQ0FDTG1tQixNQUFPcm1CLEtBQUtDLEtBQUtDLFNBQVMsYUFDMUJILE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsY0FFOUIsUUFBUyxDQUNQLE1BQU1tK0MsbUJBQXVCLzhDLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxNQUErRXpCLEtBQUt2QixPQUFPNmQsU0FBUzI0QixNQUFNdjJCLFVBQVU0SCxnQkFBNUd0bUIsS0FBS3ZCLE9BQU82ZCxTQUFTMjRCLE1BQU1xSixVQUFVaDRCLGdCQUFnQkEsZ0JBQ3JJLElBQUssTUFBTyxDQUFFMXRCLFNBQVUwSixPQUFPMkssUUFBUW94QyxvQkFDckMsR0FBSXFGLFVBQVkxakQsS0FBS0MsS0FBS0MsU0FBU3RILE1BQU15dEIsT0FBTzNiLGNBQzlDLE1BQU8sQ0FDTDJiLE1BQU9ybUIsS0FBS0MsS0FBS0MsU0FBU3RILE1BQU15dEIsT0FDaEN0bUIsTUFBT0MsS0FBS0MsS0FBS0MsU0FBU3RILE1BQU1tSCxRQUl0QyxPQUFPLElBQ1QsRUFFSixDQUVBLHdCQUFPOHdCLENBQW1CN1gsWUFDeEIsR0FBMkIsTUFBdkJsYSxPQUFPa2EsWUFBcUIsT0FBT3ZDLFVBQVV1UCxnQkFBZ0J0UCxRQUNqRSxHQUEwQixpQkFBZnNDLFdBQXlCLE9BQU9BLFdBQzNDLElBQUt4YSxNQUFNSSxPQUFPb2EsYUFBYyxPQUFPcGEsT0FBT29hLFlBRTlDLE9BQVFBLFlBQ04sSUFBSyxJQUNILE9BQU92QyxVQUFVdVAsZ0JBQWdCQyxRQUNuQyxJQUFLLElBQ0gsT0FBT3hQLFVBQVV1UCxnQkFBZ0JwUCxLQUNuQyxJQUFLLEtBQ0gsT0FBT0gsVUFBVXVQLGdCQUFnQmpaLFFBQ25DLElBQUssTUFDSCxPQUFPMEosVUFBVXVQLGdCQUFnQm5QLFNBQ25DLFFBQ0UsT0FBT0osVUFBVXVQLGdCQUFnQnRQLFFBRXZDLENBRUEsc0JBQU82NUMsQ0FBaUI1bEQsTUFBTzFMLE1BQU8rQyxRQUFVLENBQUMsR0FDL0MvQyxNQUFNRSxpQkFDTixNQUFNd1QsUUFBVXpNLFlBQVkwTSxhQUM1QixJQUFJalcsTUFDQWdXLFFBQVFnQixRQUFPaFgsTUFBUXFELEtBQUtxUCxPQUFPQyxPQUFPcUQsUUFBUWdCLFFBQ2pEaFgsUUFBT0EsTUFBUXFELEtBQUtxUCxPQUFPelAsSUFBSStTLFFBQVFoVyxRQUV2Q0EsTUFLTEEsTUFBTW8xQixXQUFXcG5CLE1BQU8xTCxNQUFNNnlCLFNBQVU5dkIsU0FKdEN5SixHQUFHQyxjQUFjdUssS0FBS2pXLEtBQUtDLEtBQUtDLFNBQVMsNkJBSzdDLENBRUEsdUJBQU9zd0QsQ0FBa0JocEMsT0FBUXZvQixPQUMvQkEsTUFBTUUsaUJBQ04sTUFBTXdULFFBQVV6TSxZQUFZME0sYUFDNUIsSUFBSWpXLE1BRUosR0FESWdXLFFBQVFnQixRQUFPaFgsTUFBUXFELEtBQUtxUCxPQUFPQyxPQUFPcUQsUUFBUWdCLFNBQ2pEaFgsTUFDSCxHQUFJZ1csUUFBUXBELE9BQVNvRCxRQUFRZ0IsTUFBTyxDQUVsQyxNQUFNODhDLFVBQVl6d0QsS0FBS3FQLE9BQU96UCxJQUFJK1MsUUFBUWhXLE9BRXBDZ1gsTUFEUTNULEtBQUt3UCxPQUFPNVAsSUFBSStTLFFBQVFwRCxPQUNsQkQsT0FBTzFQLElBQUkrUyxRQUFRZ0IsT0FNdkNoWCxNQUhtQixJQURBK3pELGlCQUFpQixTQUNqQixDQUFlRCxVQUFVdk4sU0FBVSxDQUNwRHoyQyxPQUFRa0gsT0FHWixNQUFPaFgsTUFBUXFELEtBQUtxUCxPQUFPelAsSUFBSStTLFFBQVFoVyxPQUdwQ0EsTUFLTEEsTUFBTXMxQixZQUFZekssT0FBUXZvQixNQUFNNnlCLFVBSjlCcm1CLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBS0MsU0FBUyw2QkFLN0MsQ0FFQSx1QkFBYXl3RCxDQUFZcEYsZUFBWWhyRCxFQUFXdEIsTUFBUSxZQUNoRHFMLGNBQWNzbUQsU0FBUzN4RCxNQUFPLENBQUVzc0QsV0FDeEMsQ0FFQSxrQkFBT3NGLENBQWFDLElBQUs5b0QsS0FBTStvRCxNQUM3QixHQUFrQixTQUFkL29ELEtBQUtqSCxLQUFpQixPQUUxQixNQUFNNEgsS0FBTzY2QyxhQUFheDdDLEtBQUszSCxLQUFNeXdELEtBRXJDLElBQUtub0QsS0FDSCxPQUFPOEMsR0FBR0MsY0FBY3VLLEtBQ3RCalcsS0FBS0MsS0FBS0MsU0FBUyw4QkFHdkIsR0FBb0IsV0FBZHlJLEtBQUs1SCxNQUFzQyxVQUFkNEgsS0FBSzVILEtBQ3RDLE9BQU8wSyxHQUFHQyxjQUFjdUssS0FDdEJqVyxLQUFLQyxLQUFLQyxTQUFTLGdDQUl2QixJQUFJMnVELFFBQVUsR0FNZCxHQUprQixXQUFkbG1ELEtBQUs1SCxPQUNQOHRELFFBQVUsdUNBQXVDbG1ELEtBQUs3UCxnQkFBZ0JrUCxLQUFLM0gsbUJBRzNELFVBQWRzSSxLQUFLNUgsS0FBa0IsQ0FDekIsR0FBSThHLFNBQVM0QyxVQUFVOUIsTUFDckIsT0FBTzhDLEdBQUdDLGNBQWN1SyxLQUN0QmpXLEtBQUtDLEtBQUtDLFNBQVMsMEJBR3ZCMnVELFFBQVUsc0NBQXNDbG1ELEtBQUs3UCxnQkFBZ0JrUCxLQUFLM0gsaUJBQzVFLENBRUEsR0FBZ0IsS0FBWnd1RCxRQUFnQixDQUVsQixNQUFNbUMsTUFBUWh4RCxLQUFLaXhELE9BQU8vSSxTQUFTOWxELE1BQ2pDMmpCLEdBQUtBLEVBQUVqdEIsT0FBUzZQLEtBQUs3UCxNQUFRaXRCLEVBQUU4b0MsVUFBWUEsVUFFN0MsT0FBS21DLE9BV0xoeEQsS0FBS3NHLEtBQUs0cUQsa0JBQWtCRixNQUFPRCxPQUM1QixJQVhMSSxNQUFNLzlDLE9BQU85UixRQUFRQyxNQUFNd08sVUFBVSxDQUNuQ2pYLEtBQU02UCxLQUFLN1AsS0FDWGlJLEtBQU0sU0FDTnFILElBQUtPLEtBQUtQLElBQ1Z5bUQsV0FDRTlrRCxNQUFLaW5ELFFBQ1BoeEQsS0FBS3NHLEtBQUs0cUQsa0JBQWtCRixNQUFPRCxLQUFJLEtBRWxDLEVBSVgsQ0FDQSxPQUFPLENBQ1QsQ0FFQSwyQkFBYUssQ0FBZ0IvekMsY0FDckJyZCxLQUFLbUUsU0FBUzJHLElBQUksT0FBUSxxQkFBc0J1UyxRQUN0RDVSLEdBQUdDLGNBQWN6SSxLQUNmb2EsT0FDSXJkLEtBQUtDLEtBQUtDLFNBQVMsd0JBQ25CRixLQUFLQyxLQUFLQyxTQUFTLDBCQUV6QkYsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWUsQ0FDOUJ6ZixLQUFNLGVBRVJ1SixjQUFjK21ELGtCQUNoQixDQUVBLCtCQUFhQyxDQUFvQmowQyxjQUN6QnJkLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLHNCQUF1QnVTLFFBQ3ZENVIsR0FBR0MsY0FBY3pJLEtBQ2ZvYSxPQUNJcmQsS0FBS0MsS0FBS0MsU0FBUyw0QkFDbkJGLEtBQUtDLEtBQUtDLFNBQVMsOEJBRXpCRixLQUFLdWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QnpmLEtBQU0sZUFFUnVKLGNBQWMrbUQsbUJBQ2QzVSxNQUFNbmhELEtBQUsscUJBQXNCOGhCLE9BQ25DLENBRUEsc0JBQWFrMEMsR0FDWCxNQUFNdnNDLE1BQVFobEIsS0FBS2dsQixNQUFNanNCLFFBQU91TixNQUFRQSxLQUFLN0MsU0FDdkM0TCxPQUFTclAsS0FBS3FQLE9BQ3BCLElBQUltaUQsYUFBZSxxR0FDVXh4RCxLQUFLQyxLQUFLQyxTQUFTLDRCQUNoRCxNQUFNdXhELGVBQWlCenNDLE1BQ3BCdGUsS0FBSXlmLEdBQUtBLEVBQUV6SCxXQUFXOU4sS0FDdEI3WCxRQUFPNlgsU0FBYXJRLElBQVBxUSxLQUNWOGdELGtCQUFvQm44QyxPQUFPakcsT0FBT21PLFdBQVcvVyxLQUFJaU4sT0FDOUNBLE1BQU1oWCxNQUFNaVUsS0FJckJ2QixPQUFPbUwsU0FBUTdkLFFBQ2IsTUFBTWcxRCxTQUNIRCxrQkFBa0Joc0QsU0FBUy9JLE1BQU1pVSxLQUNoQzZnRCxlQUFlL3JELFNBQVMvSSxNQUFNaVUsTUFDaEMsVUFDRjRnRCxjQUFnQixrREFFYzcwRCxNQUFNaVUsV0FBV2pVLE1BQU1pVSxjQUFjalUsTUFBTTdELFNBQVM2NEQsZ0NBQ3JFaDFELE1BQU1pVSxPQUFPalUsTUFBTTdELHVCQUFJLElBSXRDLElBQUlxK0IsT0FBTyxDQUNUL2xCLE1BQU8sR0FBR3BSLEtBQUtDLEtBQUtDLFNBQVMsbUJBQzdCaVQsUUFBUyxHQUFHblQsS0FBS0MsS0FBS0MsU0FDcEIsd0JBQ0lzeEQsb0JBQ05wNkIsUUFBUyxDQUNQcHhCLFFBQVMsQ0FDUGpHLE1BQU8sR0FBR0MsS0FBS0MsS0FBS0MsU0FBUyxvQkFDN0JtM0IsU0FBVXJ5QixhQUNSLE1BQU0waUIsUUFBVSxHQUNoQixJQUFJMFMsS0FBTSxFQUNWLE1BQU1wVixNQUFRckksS0FBS3ZhLEtBQUsscUJBQ3hCLElBQUssTUFBTWtFLFFBQVEwZSxNQUNDLGtCQUFkMWUsS0FBS3hOLE1BQTRCd04sS0FBS3FyRCxVQUFTdjNCLEtBQU0sSUFDckQ5ekIsS0FBS3FyRCxTQUFXdjNCLE1BQUsxUyxRQUFROXRCLEtBQUswTSxLQUFLc0ssVUFFdkN0RyxjQUFjc25ELFVBQVVscUMsUUFBTyxNQUkxQ2huQixRQUFPLEVBQ1osQ0FFQSxzQkFBYWt4RCxDQUFXbHFDLFNBQ3RCLElBQUtBLFFBQVFwa0IsT0FBUSxPQUNyQixNQUFNK0wsT0FBU3JQLEtBQUtxUCxPQUFPdFcsUUFBTzRELE9BQVMrcUIsUUFBUWhpQixTQUFTL0ksTUFBTWlVLE1BQ2xFLElBQUlpaEQsWUFBYyxNQUFNN3hELEtBQUtDLEtBQUtDLFNBQVMsOEJBQzNDLElBQUssTUFBTXZELFNBQVMwUyxPQUNsQixHQUFJLENBQUMsWUFBYSxNQUFPLFlBQVkzSixTQUFTL0ksTUFBTW9FLE1BQU8sQ0FDekQsSUFBSSt3RCxhQUFjLEVBQ2xCLElBQUssTUFBTW5wRCxRQUFRaE0sTUFBTWtVLE1BQ0wsV0FBZGxJLEtBQUs1SCxNQUNINEgsS0FBSzdQLE9BQVMsR0FBR2tILEtBQUtDLEtBQUtDLFNBQVMsd0JBQ3RDNHhELGFBQWMsR0FJcEIsTUFBTUMsa0JBQ0gveEQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQzNCakQsTUFBTXM2QyxtQkFBbUJoZ0QsS0FBSzRGLE9BQU9JLGdCQUNqQyswRCxnQkFBa0JyMUQsTUFBTThCLE9BQU9DLFFBQVFxdUIsSUFBSWl6QixVQUMzQ2lTLFFBQVV0MUQsTUFBTThCLE9BQU9DLFFBQVFtM0MsR0FBR2o5QyxNQUNsQzI5QyxNQUFRNTVDLE1BQU04QixPQUFPQyxRQUFRbTNDLEdBQUdsd0MsSUFDaEN1c0QsUUFBVXYxRCxNQUFNOEIsT0FBT0MsUUFBUXUzQyxHQUFHcjlDLE1BQ2xDNDlDLE1BQVE3NUMsTUFBTThCLE9BQU9DLFFBQVF1M0MsR0FBR3R3QyxJQUNoQ3JNLElBQU1xRCxNQUFNOEIsT0FBTzZuQixnQkFBZ0JodEIsSUFBSVYsTUFFN0MsR0FEQWk1RCxhQUE0QixVQUFVbDFELE1BQU03RCxhQUN4Q201RCxRQUFVMWIsTUFDWixJQUF5QixJQUFyQndiLGlCQUNGRixhQUVFLDRCQUE0Qjd4RCxLQUFLQyxLQUFLQyxTQUNwQyxzQ0FFQyxDQUNMLElBQUlpeUQsV0FBYSxFQUNibnlELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDRCQUM1QnV5RCxXQUFhLElBRUssSUFBaEJMLGFBQ0ZLLGFBRUZBLFdBQWFydEQsS0FBS2MsSUFBSXVzRCxXQUFZNWIsTUFBUTBiLFNBRXhDSixhQURpQixJQUFmTSxXQUdBLG1DQUFtQ255RCxLQUFLQyxLQUFLQyxTQUMzQyxnQ0FLRixtQ0FBbUNGLEtBQUtDLEtBQUswVyxPQUMzQywyQkFDQSxDQUFFbFAsT0FBUTBxRCxxQkFHaEJ4MUQsTUFBTWlFLE9BQU8sQ0FDWCwwQkFDRWpFLE1BQU04QixPQUFPQyxRQUFRbTNDLEdBQUdqOUMsTUFBUXU1RCxZQUV0QyxDQUVFSCxnQkFBa0IsSUFDcEJILGFBRUUsbUNBQW1DN3hELEtBQUtDLEtBQUtDLFNBQzNDLHFDQUVKdkQsTUFBTWlFLE9BQU8sQ0FDWCwrQkFBZ0MsRUFDaEMsZ0NBQWlDa0UsS0FBSzBJLE1BQU03USxNQUFNOEIsT0FBT0MsUUFBUXF1QixJQUFJbjBCLE1BQVEsTUFHakYsTUFBTXc1RCxNQUFRLEVBQ2QsR0FBSUEsTUFBUSxHQUFLRixRQUFVMWIsTUFBTyxDQUNoQyxJQUFJNmIsWUFBY0QsTUFBUXR0RCxLQUFLNmpELEtBQUtydkQsSUFBTSxLQUMxQys0RCxZQUFjdnRELEtBQUtjLElBQUl5c0QsWUFBYTdiLE1BQVEwYixTQUM1Q0wsYUFFRSxtQ0FBbUM3eEQsS0FBS0MsS0FBSzBXLE9BQzNDLGlDQUNJMDdDLG1CQUNSMTFELE1BQU1pRSxPQUFPLENBQ1gsMEJBQ0VqRSxNQUFNOEIsT0FBT0MsUUFBUXUzQyxHQUFHcjlDLE1BQVF5NUQsYUFFdEMsQ0FDRixDQUVGLE1BQU10c0QsU0FBVyxDQUNmTyxLQUFNdEcsS0FBS3NHLEtBQUtzSyxHQUNoQitCLFFBQVN6TSxZQUFZME0sYUFDckJPLFFBQVMwK0MsWUFDVDl3RCxLQUFNOFIsTUFBTUMsbUJBQW1CMDdDLE9BRWpDdG9ELFlBQVlrTixPQUFPck4sU0FDckIsQ0FFQSx5QkFBYXVzRCxDQUFjajFDLGNBQ25CcmQsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsWUFBYXVTLFFBQzdDNVIsR0FBR0MsY0FBY3pJLEtBQ2ZvYSxPQUNJcmQsS0FBS0MsS0FBS0MsU0FBUyxzQkFDbkJGLEtBQUtDLEtBQUtDLFNBQVMsdUJBRTNCLENBRUEscUJBQWEwd0QsQ0FBVTN4RCxNQUFPK0MsUUFBVSxDQUFDLEdBRXZDLElBQUkwVixhQUFjc0IsV0FBWTZoQixpQkFBa0JDLHNCQURoRDk0QixRQUFRbXVELFVBQVludUQsUUFBUXVwRCxVQUU1QixJQUFJQSxVQUFZdnBELFFBQVF1cEQsVUFPeEIsUUFMSWhyRCxJQUFjeUIsUUFBUW9GLFdBQVVzUSxhQUFlOVksT0FBT29ELFFBQVFvRixnQkFDOUQ3RyxJQUFjeUIsUUFBUWdYLGFBQ3hCQSxXQUFhMU8sY0FBY3VtQixrQkFBa0I3dUIsUUFBUWdYLGNBR2xEL1osT0FBTzZ5QixXQUFhOXZCLFFBQVFtbEIsWUFBYSxDQUM1QyxNQUFNaWEsWUFBYzdLLFdBQVduakIsT0FBT3BSLFNBQ2xDby9CLFFBQ0YxcEIsYUFBZTlZLE9BQU93aUMsTUFBTXhoQyxJQUFJLGNBQ2hDb1osV0FBYXBhLE9BQU93aUMsTUFBTXhoQyxJQUFJLGVBQzlCMnJELFVBQVkzc0QsT0FBT3dpQyxNQUFNeGhDLElBQUksY0FDN0JpN0IsaUJBQW1CajhCLE9BQU93aUMsTUFBTXhoQyxJQUFJLHFCQUNwQ2s3QixzQkFBd0JsOEIsT0FBT3dpQyxNQUFNeGhDLElBQUksMEJBRTdDLENBRUEsTUFBTXlQLE9BQVMsR0FFZixHQUFJclAsS0FBS3NHLEtBQUsyRSxNQUFRc0ssT0FBT2pHLE9BQU9tTyxXQUFXbmEsT0FDN0MsSUFBSyxNQUFNcVEsU0FBUzRCLE9BQU9qRyxPQUFPbU8sV0FDaENwTyxPQUFPelYsS0FBSytaLE1BQU1oWCxNQUFNc1MsZUFFakJqUCxLQUFLc0csS0FBS29ZLFdBQ25CclAsT0FBT3pWLEtBQUtvRyxLQUFLc0csS0FBS29ZLFVBQVV6UCxVQUdsQyxJQUFLLE1BQU1zakQsTUFBTWxqRCxPQUFRLENBQ3ZCLE1BQU1zSixNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU1qQixhQUFlQSxjQUFnQixFQUNyQ2lCLE1BQU1LLFdBQWFBLFlBQWN2QyxVQUFVdVAsZ0JBQWdCdFAsUUFDM0RpQyxNQUFNTyxTQUFXcXlDLFVBQ2pCNXlDLE1BQU1raUIsaUJBQW1CQSxpQkFDekJsaUIsTUFBTW1pQixzQkFBd0JBLHNCQUM5Qm5pQixNQUFNaGMsTUFBUTQxRCxTQUNSNTVDLE1BQU05VSxPQUNaOFUsTUFBTWtnQixXQUNSLENBRUEsSUFBS3hwQixPQUFPL0wsT0FBUSxDQUNsQixNQUFNcVYsTUFBUSxJQUFJbEMsVUFDbEJrQyxNQUFNakIsYUFBZUEsY0FBZ0IsRUFDckNpQixNQUFNSyxXQUFhQSxZQUFjdkMsVUFBVXVQLGdCQUFnQnRQLFFBQzNEaUMsTUFBTU8sU0FBV3F5QyxVQUNqQjV5QyxNQUFNa2lCLGlCQUFtQkEsaUJBQ3pCbGlCLE1BQU1taUIsc0JBQXdCQSw0QkFDeEJuaUIsTUFBTTlVLE9BQ1o4VSxNQUFNa2dCLFdBQ1IsQ0FDRixDQUVBLHVCQUFPdzRCLEdBQ0wsR0FBSXJ4RCxLQUFLc0csS0FBSzJFLEtBQ1osSUFBSyxNQUFNN0wsS0FBS1ksS0FBS3FQLE9BQU82NEMsU0FDVixjQUFaOW9ELEdBQUcyQixNQUF3QjNCLEdBQUdxQixPQUFTckIsR0FBR3FCLE9BQU8reEQsV0FDbkRwekQsRUFBRXdCLE9BQU8sQ0FBRSx1QkFBdUIsSUFDbEN4QixFQUFFc0IsUUFBTyxTQUliLElBQUssTUFBTXRCLEtBQUtZLEtBQUtxUCxPQUFPNjRDLFNBQ3RCOW9ELEVBQUU4OEIsVUFDSjk4QixFQUFFd0IsT0FBTyxDQUFFLHVCQUF1QixJQUNsQ3hCLEVBQUVzQixRQUFPLEdBSWpCLENBT0EsaUNBQWF1MUIsQ0FBc0JoM0IsTUFBT3d6RCxXQUFhLFFBQ3JELEdBQUl4ekQsTUFBTTZ4QixjQUFlLE1BQU8sR0FDaEMsSUFDRSxNQUFNa0YsU0FBVzFrQixLQUFLNGQsTUFBTWp3QixNQUFNOHhCLGFBQWE4QyxRQUFRLGVBQ3ZELEdBQXNCLFdBQWxCbUMsU0FBU2oxQixNQUFxQmkxQixTQUFTRCxlQUFpQjA4QixXQUFZLENBQ3RFLE1BQU1DLGFBQWU5cEQsU0FBU290QixTQUFTMzFCLE1BQ3ZDLE9BQUtxeUQsT0FDRUEsT0FBT3hLLFNBRE0sRUFFdEIsQ0FBTyxHQUFJbHlCLFNBQVNqMUIsT0FBUzB4RCxXQUFZLENBQ3ZDLE1BQU05cEQsV0FBYUMsU0FBU290QixTQUFTMzFCLE1BQ3JDLE9BQUtzSSxLQUNFLENBQUNBLE1BRFUsRUFFcEIsQ0FDRSxNQUFPLEVBRVgsQ0FBRSxNQUFPK0UsS0FDUCxNQUFPLEVBQ1QsQ0FDRixDQUVBLDRCQUFhaW9CLENBQWlCb2lCLE1BQzVCLElBQ0UsR0FBSTRhLFVBQVVDLFdBQWF4RCxPQUFPeUQsZ0JBQ2hDLE9BQU9GLFVBQVVDLFVBQVVFLFVBQVUvYSxNQUNoQyxDQUNMLE1BQU1rQyxTQUFXem9DLFNBQVNDLGNBQWMsWUFReEMsT0FQQXdvQyxTQUFTcmhELE1BQVFtL0MsS0FDakJrQyxTQUFTeFgsTUFBTXN3QixTQUFXLFFBQzFCOVksU0FBU3hYLE1BQU02YyxLQUFPLFNBQ3RCckYsU0FBU3hYLE1BQU02c0IsSUFBTSxTQUNyQjk5QyxTQUFTd2UsS0FBS2cvQixZQUFZL1UsVUFDMUJBLFNBQVN4RyxRQUNUd0csU0FBU3JhLFNBQ0YsSUFBSWhoQixTQUFRLENBQUNoQixRQUFTbzFDLFVBQzNCeGhELFNBQVN5aEQsWUFBWSxRQUNqQnIxQyxVQUNBbzFDLE9BQ0EsSUFBSXQ0QyxNQUFNMWEsS0FBS0MsS0FBS0MsU0FBUyxrQ0FFakMrNUMsU0FBU3YwQixRQUFPLElBQ2Z3dEMsT0FBTXhsRCxLQUFPakMsR0FBR0MsY0FBYzBVLE1BQU0xUyxNQUN6QyxDQUNGLENBQUUsTUFBT0EsS0FDUGpDLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUtDLFNBQVMsZ0NBQzVDLENBQ0YsQ0FFQSxrQkFBT3FLLENBQWE2SCxRQUVsQixNQUFNK2dELElBQU0vZ0QsT0FBTzlPLE9BQ25CLElBQUk4dkQsUUFBVSxHQUVkLElBQUssSUFBSXhkLFFBQVMxeUIsRUFBSSxFQUFHQSxFQUFJaXdDLE1BQU9qd0MsRUFHbEMsR0FGQTB5QixRQUFVeGpDLE9BQU9paEQsT0FBT253QyxHQUVwQjB5QixTQUFXLEtBQU9BLFNBQVcsSUFDZixPQUFaQSxTQUFnQyxNQUFaQSxVQUN0QndkLFNBQVcsTUFHYkEsU0FBV3hkLFFBQVF2akMsUUFBUSx3QkFBeUIsYUFFcEQsT0FBUXVqQyxTQUNOLElBQUssS0FDSHdkLFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixJQUFLLEtBQ0hBLFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixRQUNFQSxTQUFXLE1BQ1h4ZCxRQUFVQSxRQUFRMGQsV0FBVyxHQUFHNStDLFNBQVMsSUFDekMsSUFBSyxJQUFJNitDLEVBQUksSUFBS0EsR0FBSzNkLFFBQVF0eUMsT0FBUTh2RCxTQUFXLEtBQ2xEQSxTQUFXeGQsUUFLbkIsT0FBT3dkLE9BQ1QsQ0FFQSxnQkFBT0ksQ0FBV2ovQyxJQUFLay9DLEtBQU03NkQsT0FDM0IsTUFBTTZRLE1BQVFncUQsS0FBS3JrRCxNQUFNLEtBQ3pCLElBQUkyNkMsRUFBSXgxQyxJQUNSLEdBQUk5SyxNQUFNbkcsT0FBUyxFQUNqQixJQUFLLElBQUk0ZixFQUFJLEVBQUdBLEVBQUl6WixNQUFNbkcsT0FBUyxFQUFHNGYsSUFDL0I2bUMsRUFBRXRnRCxNQUFNeVosTUFBSzZtQyxFQUFFdGdELE1BQU15WixJQUFNLENBQUMsR0FDakM2bUMsRUFBSUEsRUFBRXRnRCxNQUFNeVosSUFJaEI2bUMsRUFBRXRnRCxNQUFNQSxNQUFNbkcsT0FBUyxJQUFNMUssS0FDL0IsQ0FFQSxnQkFBTzg2RCxDQUFXbi9DLElBQUtrL0MsTUFDckIsTUFBTWhxRCxNQUFRZ3FELEtBQUtya0QsTUFBTSxLQUN6QixJQUFJMjZDLEVBQUl4MUMsSUFDUixHQUFJOUssTUFBTW5HLE9BQVMsRUFDakIsSUFBSyxJQUFJNGYsRUFBSSxFQUFHQSxFQUFJelosTUFBTW5HLE9BQVMsRUFBRzRmLElBQUssQ0FDekMsSUFBSzZtQyxFQUFFdGdELE1BQU15WixJQUFLLE9BQ2xCNm1DLEVBQUlBLEVBQUV0Z0QsTUFBTXlaLEdBQ2QsQ0FHRixPQUFPNm1DLEVBQUV0Z0QsTUFBTUEsTUFBTW5HLE9BQVMsR0FDaEMsQ0FPQSxnQkFBT29RLENBQVdyVCxNQUNoQixJQUNJc3pELElBREFscUQsTUFBUXBKLEtBQUsrTyxNQUFNLEtBSXZCLEdBQWlCLGVBQWIzRixNQUFNLEdBQ1IsT0FBTyxLQU9GLENBRUwsTUFBT21xRCxRQUFTQyxPQUFTcHFELE1BQU10SSxNQUFNLEVBQUcsR0FDeENzSSxNQUFRQSxNQUFNdEksTUFBTSxHQUVwQnd5RCxJQURtQnJ1RCxPQUFPc3VELFNBQVNyN0IsV0FBV3U3QixTQUM3QmwwRCxJQUFJaTBELE1BQ3ZCLENBR0EsS0FBT0YsS0FBT2xxRCxNQUFNbkcsT0FBUyxHQUFHLENBQzlCLE1BQU82MkMsYUFBYzRaLFlBQWN0cUQsTUFBTXRJLE1BQU0sRUFBRyxHQUNsRHd5RCxJQUFNQSxJQUFJamtELG9CQUFvQnlxQyxhQUFjNFosWUFDNUN0cUQsTUFBUUEsTUFBTXRJLE1BQU0sRUFDdEIsQ0FDQSxPQUFPd3lELEtBQU8sSUFDaEIsQ0FFQSx5QkFBT2xnRCxDQUFvQnBULE1BQ3pCLFFBQUlBLEtBQUtxRixTQUFTLGFBRXBCLENBRUEscUJBQU84TixDQUFnQm5ULE1BQ3JCLE1BQU0yekQsWUFBYyxDQUFDLFFBQVMsUUFBUyxRQUFTLE9BQVEsY0FDeEQsSUFBSyxJQUFJOXdDLEVBQUksRUFBR0EsRUFBSTh3QyxZQUFZMXdELE9BQVE0ZixJQUN0QyxHQUFJN2lCLEtBQUtxRixTQUFTc3VELFlBQVk5d0MsSUFBSyxPQUFPLEVBRTVDLE9BQU8sQ0FDVCxDQUVBLG1DQUFPK3dDLENBQThCQyxVQUNuQyxJQUFJQyxRQUFTeDNELE1BcUJiLE9BbkJFdzNELFFBREVELFNBQVNuUSxVQUNEbVEsU0FBU25RLGVBQ2UsSUFBbEJtUSxTQUFTN3pELEtBQ2Y2ekQsU0FBUzd6RCxLQUdqQjZ6RCxTQUFTL2tELFNBQVcra0QsU0FBU2hsRCxRQUN6QixTQUFTZ2xELFNBQVMva0QsaUJBQWlCK2tELFNBQVNobEQsVUFDNUNnbEQsU0FBU3RrRCxTQUFXc2tELFNBQVNwZ0QsVUFBWW9nRCxTQUFTdGpELEdBRXBDLFVBQWxCc2pELFNBQVNuekQsS0FDWG96RCxRQUFVRCxTQUFTN3pELEtBQ1Y4ekQsVUFDVHgzRCxNQUFRMk4sY0FBY2lKLGdCQUFnQjRnRCxTQUNqQ3gzRCxPQUEyQixTQUFsQnUzRCxTQUFTbnpELE9BQWlCb3pELFFBQVUsT0FHaER4M0QsT0FBU3czRCxVQUFZeDNELE1BQU0wRCxPQUM3Qjh6RCxRQUFVeDNELE1BQU0wRCxNQUVYOHpELE9BQ1QsQ0FFQSx5QkFBT0MsQ0FBb0I3MUQsS0FDekIsSUFBS0EsSUFBSyxPQUFPLEtBRWpCLEdBQUkrTCxjQUFja0osZUFBZWpWLEtBQy9CLE9BQUkrTCxjQUFjbUosbUJBQW1CbFYsS0FBYXFLLFNBQVNySyxLQUNwRCtMLGNBQWNvSixVQUFVblYsS0FJakMsR0FBSUEsSUFBSW1ILFNBQVMsS0FBTSxDQUVyQixNQUFPeUosUUFBU0QsU0FBVzNRLElBQUk2USxNQUFNLEtBQ3JDLEdBQWdCLFVBQVpELFFBQ0YsT0FBT25QLEtBQUtxUCxPQUFPQyxPQUFPSixTQUU1QixNQUFNSyxNQUFRdlAsS0FBS3dQLE9BQU81UCxJQUFJdVAsU0FDOUIsSUFBS0ksTUFBTyxPQUFPLEtBQ25CLE1BQU1FLFVBQVlGLE1BQU1HLG9CQUFvQixRQUFTUixTQUNyRCxJQUFLTyxVQUFXLE9BQU8sS0FDdkIsTUFBTWtFLE1BQVEsSUFBSWhFLE1BQU1GLFdBRXhCLE9BREtrRSxNQUFNcEUsUUFBT29FLE1BQU1wRSxNQUFRak8sUUFBUUMsTUFBTXdPLFVBQVVSLFFBQ2pEb0UsS0FDVCxDQUVBLE9BQU8zVCxLQUFLcVAsT0FBT3pQLElBQUlyQixNQUFRLElBQ2pDLENBRUEsc0JBQU9nVixDQUFpQmhWLEtBQ3RCLE1BQU1vMUQsSUFBTXJwRCxjQUFjOHBELG1CQUFtQjcxRCxLQUM3QyxPQUFLbzFELElBQ0RBLElBQUloM0QsTUFBY2czRCxJQUFJaDNELE1BQ0ksYUFBMUJnM0QsSUFBSTVyRCxhQUFhalAsS0FBNEI2NkQsSUFDMUMsS0FIVSxJQUluQixDQU1BLG9EQUFhVSxHQUNYLElBQUlDLFdBQWF0MEQsS0FBS0MsS0FBS0MsU0FBUyxpQ0FDakIsa0NBQWZvMEQsYUFDRkEsV0FBYSx1QkFFZixJQUFJQyx5QkFBMkJ2MEQsS0FBS3cwRCxRQUFRcHlELE1BQzFDNDZDLE9BQVNBLE1BQU1sa0QsT0FBU3c3RCxZQUE2QixVQUFmdFgsTUFBTWo4QyxPQWdCOUMsT0FiRXd6RCxpQ0FJQUEsK0JBQWlDRSxPQUFPcmhELE9BQU8sQ0FDN0N0YSxLQUFNdzdELFdBQ052ekQsS0FBTSxRQUNOMEwsT0FBUSxPQUVWaEIsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLQyxTQUFTLDBDQUdoQnEwRCx3QkFDVCxDQVdBLHNCQUFhRyxDQUNYM3pELEtBQ0FqSSxNQUNBLE9BQVcsS0FBSSxPQUFXLEdBQUUsYUFBZ0IsR0FBVSxDQUFDLEdBRXZELElBQUlvaUQsU0FBVyxLQUNmcGlELEtBQU9BLEtBQUtnaUQsb0JBQ1osSUFBSyxJQUFJaVAsRUFBSSxFQUFHNEssR0FBS3ZPLE9BQU85aUQsT0FBUXltRCxFQUFJNEssR0FBSTVLLElBQzFDLE9BQVEzRCxPQUFPOTRDLFVBQVV5OEMsRUFBR0EsRUFBSSxJQUM5QixJQUFLLElBTUgsR0FMQTdPLFNBQVdsN0MsS0FBSzZRLE1BQU16TyxNQUNwQnVHLE1BQVFBLEtBQUs1SCxPQUFTQSxNQUNwQjRILEtBQUs3UCxLQUFLNFIsZ0JBQWtCNVIsT0FDaEIsT0FBWGUsUUFBbUI4TyxLQUFLbEssT0FBTzhLLFdBQVcxUCxTQUFXQSxVQUV0RHFoRCxTQUNGLE9BQU9BLFNBRVQsTUFDRixJQUFLLElBQ0wsSUFBSyxJQUNMLElBQUssSUFDSCxJQUFLLE1BQU14cEIsUUFBUTF4QixLQUFLd2lELE1BQ3RCLEdBQ3lCLFNBQXZCOXdCLEtBQUsrd0IsU0FBUzFoRCxPQUNFLE1BQWRxbEQsT0FBTzJELElBQXdDLFVBQTFCcjRCLEtBQUsrd0IsU0FBU21TLFNBQ3BCLE1BQWR4TyxPQUFPMkQsSUFBd0MsU0FBMUJyNEIsS0FBSyt3QixTQUFTbVMsU0FDckIsTUFBZHhPLE9BQU8yRCxLQUNMLENBQUMsUUFBUyxRQUFRcmtELFNBQVNnc0IsS0FBSyt3QixTQUFTbVMsVUFDOUMsQ0FRQSxHQU5BMVosZ0JBRHdCeHBCLEtBQUtneEIsZ0JBQ1J0Z0QsTUFDbkJ1RyxNQUNFQSxLQUFLNUgsT0FBU0EsTUFDZDRILEtBQUs3UCxLQUFLNFIsZ0JBQWtCNVIsT0FDaEIsT0FBWGUsUUFBbUI4TyxLQUFLbEssT0FBTzhLLFdBQVcxUCxTQUFXQSxVQUV0RHFoRCxTQUNGLE9BQU9BLFFBRVgsRUFLUixHQUFJMlosYUFBd0IsVUFBVDl6RCxLQUFrQixDQUNuQyxNQUFNd0gsTUFBUXpQLEtBQUt5UCxNQUFNLDBCQUN6QixHQUFJQSxNQUNGLGFBQWErQixjQUFjb3FELFVBQ3pCM3pELEtBQ0F3SCxNQUFNLEdBQUssTUFBUUEsTUFBTSxHQUN6QixDQUFFMU8sT0FBUXVzRCxRQUdoQixDQUNGLENBRUEsa0JBQU8wTyxDQUFhbjhELEdBQ2xCLElBQUtBLEVBQ0gsTUFBTyxHQUVULE1BQU00UCxNQUFRNVAsRUFBRTRQLE1BQU0sc0VBRXRCLE9BQUtBLE1BSUVBLE1BQU14QixLQUFLLEtBQUsyRCxjQUhkLEVBSVgsQ0FFQSxvQkFBT29FLENBQWUxUCxFQUFHMGpCLEdBQ3ZCLE9BQU8xakIsRUFBRXRHLEtBQ05pOEQsVUFBVSxPQUNWMWlELFFBQVEsbUJBQW9CLElBQzVCeW9DLG9CQUNBMEUsY0FDQzE4QixFQUFFaHFCLEtBQ0NpOEQsVUFBVSxPQUNWMWlELFFBQVEsbUJBQW9CLElBQzVCeW9DLG9CQUVULENBRUEsbUJBQU90N0IsR0FDTCxNQUFNdzFDLFFBQVVoMUQsS0FBS2dsQixNQUFNanNCLFFBQU9vdEIsR0FBS0EsRUFBRTFpQixRQUFVMGlCLEVBQUVsYixNQUFRa2IsRUFBRXZWLEtBQU81USxLQUFLc0csS0FBS3NLLEtBQ2hGLE9BQVFva0QsUUFBUTF4RCxRQUNkLEtBQUssRUFFSCxPQURBbUksR0FBR0MsY0FBYzBVLE1BQU0sOEJBQStCLENBQUVsZ0IsVUFBVSxLQUMzRCxFQUNULEtBQUssRUFDSCxPQUFPODBELFFBQVEsR0FBR3BrRCxHQUV0QixPQUFPb2tELFFBQVFsd0QsS0FBSzBJLE1BQU0xSSxLQUFLMG9ELFNBQVd3SCxRQUFRMXhELFNBQVNzTixFQUM3RCxDQUVBLGFBQU8rc0IsQ0FBUTkrQixJQUNiQSxJQUF1QyxNQUFoQ0EsSUFBTSxJQUFJNlYsV0FBV2dwQixPQUFnQixFQUFJNytCLElBQUk2VixXQUFXZ3BCLE9BQy9ELE1BQU03NUIsS0FBTyxJQUFJVyxLQUFLM0YsSUFDdEIsSUFBSyxNQUFNd2IsUUFBUXhXLEtBQUsyQixNQUNsQmxFLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLeUIsUUFBUyxPQUFTNFksZ0JBQWdCL1ksUUFBUWdELEtBQUtrQixNQUFNay9DLElBQ3pGcnFDLEtBQUs0NkMsT0FBU253RCxLQUFLMEksTUFBTTZNLEtBQUs0NkMsT0FBUyxHQUM5QjU2QyxnQkFBZ0JxcUMsSUFFekJycUMsS0FBSzNTLE1BQVE1QyxLQUFLMEksTUFBTTZNLEtBQUszUyxNQUFRLEdBQzVCMlMsZ0JBQWdCUSxjQUN6QlIsS0FBSzVTLE9BQVU0UyxLQUFLNVMsT0FBUyxFQUFJM0MsS0FBSzZqRCxLQUFLdHVDLEtBQUs1UyxPQUFTLEdBQUszQyxLQUFLMEksTUFBTTZNLEtBQUs1UyxPQUFTLElBRzNGLElBQUkvSyxRQUFVbUgsS0FBS25ILFFBQVFnWSxXQUFXZ3BCLE9BSXRDLE9BSEtoaEMsUUFBUTJRLFdBQVcsT0FDdEIzUSxRQUFVLElBQU1BLFNBRVhBLE9BQ1QsRUM5OEJLLE1BQU0yTSxvQkFBb0I2UyxnQkFDL0IseUJBQVdDLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxTQUFVLGlCQUM1QkMsU0FBVSxnREFDVkUsTUFBTyxJQUNQQyxPQUFRLE9BQ1JyTCxNQUFPLHVCQUNQbUwsZUFBZSxFQUNmMjRDLGVBQWUsRUFDZkMsZ0JBQWdCLEdBRXBCLENBRUEsYUFBTXRoQyxHQUNKLE1BQU1DLFVBQVkvMEIsTUFBTTgwQixVQUV4QkMsVUFBVXNoQyxtQkFBcUI5dkQsT0FBTzh2RCxtQkFFdEMxeUQsS0FBS1YsUUFBUXF6RCxTQUFXM3lELEtBQUt1UixPQUFPeFQsTUFBTW9tQixXQUUxQ2lOLFVBQVV3aEMsVUFBWXQxRCxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNMHZDLFFBQVE3eUQsS0FBS3VSLFFBQ3pENmYsVUFBVTBoQyxTQUFXeDFELEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU00dkMsVUFBVS95RCxLQUFLdVIsUUFFMUQ2ZixVQUFVd2hCLFVBQVk1eUMsS0FBS3VSLE9BQU9yUyxPQUFPd0MsTUFBTWt4QyxVQUUvQ3hoQixVQUFVbGpCLEdBQUtrakIsVUFBVXdoQixXQUFXMWtDLElBQU0sR0FDMUNrakIsVUFBVTRoQyxLQUFPNWhDLFVBQVV3aEIsV0FBV29nQixNQUFRMTFELEtBQUtDLEtBQUt5MUQsS0FDeEQ1aEMsVUFBVXVpQixTQUFXdmlCLFVBQVV3aEIsV0FBV2UsVUFBWSxFQUV0RHZpQixVQUFVMXFCLEtBQU8sR0FDakIsSUFBSyxNQUFPN0ssSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUttUyxNQUM3QzBxQixVQUFVMXFCLEtBQUt4UCxLQUFLLENBQ2xCZ1gsR0FBSXJTLElBQ0p6RixLQUFNa0gsS0FBS0MsS0FBS0MsU0FBU3RILE9BQ3pCKzhELFdBQXNELEtBQTFDN2hDLFVBQVV3aEIsV0FBV2xzQyxNQUFRLENBQUMsR0FBRzdLLE9BR2pEdTFCLFVBQVUxcUIsS0FBS3lGLEtBQUt2RSxjQUFjd0UsZUFFbEMsTUFBTThtRCxVQUFZdHpELE9BQU95ZSxPQUFPemYsUUFBUUMsTUFBTXMwRCxjQUFjNzFELEtBQUtDLEtBQUs2MUQsVUFBVTF4RCxNQUFNMnhELFdBQVd0dkQsTUFBUSxDQUFDLEdBQUluRixRQUFRQyxNQUFNczBELGNBQWM3MUQsS0FBS0MsS0FBSysxRCxhQUFhNXhELE1BQU0yeEQsV0FBV3R2RCxNQUFRLENBQUMsSUFDckx3dkQsT0FBUyxJQUFJNXJELE9BQU8sSUFBTUMsY0FBY0MsWUFBWXVwQixVQUFVMGhDLFdBQ3BFMWhDLFVBQVVvaUMsYUFBZTV6RCxPQUFPbUUsS0FBS212RCxXQUFXam5ELFFBQU8sQ0FBQzRGLElBQUszQyxLQUN2REEsRUFBRXJKLE1BQU0wdEQsU0FDVjFoRCxJQUFJM2EsS0FBSyxDQUFFZ1ksRUFBRzlZLEtBQU04OEQsVUFBVWhrRCxLQUV6QjJDLE1BQ04sSUFBSTFGLEtBQUt2RSxjQUFjd0UsZUFFMUJnbEIsVUFBVXFpQyxnQkFBaUQsSUFBNUJQLFVBQVU5aEMsVUFBVWxqQixJQUNuRCxNQUFNckksTUFBUXVyQixVQUFVbGpCLEdBQUdySSxNQUFNLCtCQUdqQyxHQUZBdXJCLFVBQVVzaUMsVUFBYTd0RCxZQUE2QixJQUFiQSxNQUFNLEdBQXFCQSxNQUFNLEdBQUssR0FFekV1ckIsVUFBVWxqQixJQUFNa2pCLFVBQVU0aEMsS0FBTSxDQUVsQyxNQUFNVyxxQkFBdUJyMkQsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTXl3QyxhQUFhLENBQzlEendDLE1BQU9pTyxVQUFVbGpCLEdBQ2pCOGtELEtBQU01aEMsVUFBVTRoQyxLQUNoQmEsTUFBTyxVQUVIQyxTQUFXLENBQUMsRUFDWkMsb0JBQXNCLENBQUMsRUFDN0IzaUMsVUFBVTRpQyx3QkFBMEI5M0MsUUFBUXdiLElBQUlpOEIsZUFBZTN2RCxLQUFJMUIsTUFBT3RNLElBQ3BFQSxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWxzQyxLQUN6QjlHLE9BQU8ySyxRQUFRdlUsRUFBRWtKLE1BQU13QyxLQUFLa3hDLFVBQVVsc0MsTUFBTXJRLFFBQU9tSyxHQUFLQSxFQUFFLEtBQUl3RCxLQUFJeEQsSUFDM0RaLE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLazdELG9CQUFxQi85RCxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWUsU0FBVyxJQUFNbnpDLEVBQUUsTUFDdkd1ekQsb0JBQW9CLzlELEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVZSxTQUFXLElBQU1uekMsRUFBRSxJQUFNLEdBRXRFdXpELG9CQUFvQi85RCxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWUsU0FBVyxJQUFNbnpDLEVBQUUsT0FDdkQsS0FHVHV6RCxvQkFBb0IvOUQsRUFBRWtKLE1BQU13QyxLQUFLa3hDLFVBQVVlLFNBQVcsTUFBUSxFQUVoRSxNQUFNanRDLEtBQVExUSxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWxzQyxLQUFPOUcsT0FBTzJLLFFBQVF2VSxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWxzQyxNQUFNclEsUUFBT21LLEdBQUtBLEVBQUUsS0FBSXdELEtBQUl4RCxHQUFLQSxFQUFFLEtBQUkyTCxPQUFTLEdBQ2xJLElBQUssTUFBTWd0QyxPQUFPenlDLEtBQ2hCb3RELFNBQVMzYSxLQUFPNWtELEtBQUttUyxLQUFLeXlDLE1BQVEsSUFFcEMsTUFBTTJZLFFBQVUsR0FDaEIsSUFBSXR4RCxFQUFJeEssR0FBR2c2RCxPQUNYLEtBQU94dkQsR0FBR3BLLE1BQ1IwN0QsUUFBUW1DLFFBQVF6ekQsR0FBR3BLLE1BQ25Cb0ssRUFBSUEsRUFBRXd2RCxPQUVSLE1BQU8sQ0FDTHRwRCxLQUFNQSxLQUFLdUYsUUFBTyxTQUFVeXJCLElBQUt3YixTQUUvQixPQURBeGIsSUFBSXdiLFVBQVcsRUFDUnhiLEdBQ1QsR0FBRyxDQUFDLEdBQ0ppYyxTQUFVMzlDLEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVZSxTQUNqQ3FmLEtBQU1oOUQsRUFBRWtKLE1BQU13QyxLQUFLa3hDLFVBQVVvZ0IsTUFBUSxLQUNyQy9qQyxXQUFZemhCLFdBQVdDLFdBQVd6WCxFQUFFaTVCLEtBQU0sQ0FBRTNzQixPQUFPLElBQ25EMHRELE9BQVE4QixRQUFROXRELEtBQUlrd0QsR0FBS0EsRUFBRTdyRCxRQUFRLE1BQVEsRUFBSSxJQUFNNnJELEVBQUksSUFBTUEsSUFBRzd2RCxLQUFLLFVBQ3pFLEtBRUV6RSxPQUFPMkssUUFBUXdwRCxxQkFBcUIxOUQsUUFBTys1QixHQUFLQSxFQUFFLEdBQUssSUFBR3h2QixPQUFTLElBQ3JFd3dCLFVBQVUraUMsNEJBQTZCLEdBRXpDL2lDLFVBQVVnakMsZ0JBQWtCVCxlQUFlL3lELFFBQVUsRUFFckQsTUFBTXl6RCwwQkFBNEIvMkQsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTXl3QyxhQUFhLENBQ25FendDLE1BQU9pTyxVQUFVbGpCLEdBQ2pCOGtELEtBQU01aEMsVUFBVTRoQyxLQUNoQmEsTUFBTyxnQkFFSFMseUJBQTJCLENBQUMsRUFDbENsakMsVUFBVW1qQyw2QkFBK0JyNEMsUUFBUXdiLElBQUkyOEIsb0JBQW9CcndELEtBQUkxQixNQUFPdE0sSUFDOUVBLEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVbHNDLEtBQ3pCOUcsT0FBTzJLLFFBQVF2VSxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWxzQyxNQUFNclEsUUFBT21LLEdBQUtBLEVBQUUsS0FBSXdELEtBQUl4RCxJQUMzRFosT0FBT0MsVUFBVUMsZUFBZWpILEtBQUt5N0QseUJBQTBCdCtELEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVZSxTQUFXLElBQU1uekMsRUFBRSxNQUM1Rzh6RCx5QkFBeUJ0K0QsRUFBRWtKLE1BQU13QyxLQUFLa3hDLFVBQVVlLFNBQVcsSUFBTW56QyxFQUFFLElBQU0sR0FFM0U4ekQseUJBQXlCdCtELEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVZSxTQUFXLElBQU1uekMsRUFBRSxPQUM1RCxLQUdUOHpELHlCQUF5QnQrRCxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVWUsU0FBVyxNQUFRLEVBRXJFLE1BQU1qdEMsS0FBUTFRLEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVbHNDLEtBQU85RyxPQUFPMkssUUFBUXZVLEVBQUVrSixNQUFNd0MsS0FBS2t4QyxVQUFVbHNDLE1BQU1yUSxRQUFPbUssR0FBS0EsRUFBRSxLQUFJd0QsS0FBSXhELEdBQUtBLEVBQUUsS0FBSTJMLE9BQVMsR0FDbEksSUFBSyxNQUFNZ3RDLE9BQU96eUMsS0FDaEJvdEQsU0FBUzNhLEtBQU81a0QsS0FBS21TLEtBQUt5eUMsTUFBUSxJQUVwQyxNQUFNMlksUUFBVSxHQUNoQixJQUFJdHhELEVBQUl4SyxHQUFHZzZELE9BQ1gsS0FBT3h2RCxHQUFHcEssTUFDUjA3RCxRQUFRbUMsUUFBUXp6RCxHQUFHcEssTUFDbkJvSyxFQUFJQSxFQUFFd3ZELE9BSVIsSUFGQThCLFFBQVFtQyxRQUFRaitELEVBQUV3K0QsV0FBV3pVLFNBQVMxaUQsT0FDdENtRCxFQUFJeEssR0FBR3crRCxXQUFXeEUsT0FDWHh2RCxHQUFHcEssTUFDUjA3RCxRQUFRbUMsUUFBUXp6RCxHQUFHcEssTUFDbkJvSyxFQUFJQSxFQUFFd3ZELE9BRVIsTUFBTyxDQUNMdHBELEtBQU1BLEtBQUt1RixRQUFPLFNBQVV5ckIsSUFBS3diLFNBRS9CLE9BREF4YixJQUFJd2IsVUFBVyxFQUNSeGIsR0FDVCxHQUFHLENBQUMsR0FDSmljLFNBQVUzOUMsRUFBRWtKLE1BQU13QyxLQUFLa3hDLFVBQVVlLFNBQ2pDcWYsS0FBTWg5RCxFQUFFa0osTUFBTXdDLEtBQUtreEMsVUFBVW9nQixNQUFRLEtBQ3JDL2pDLFdBQVl6aEIsV0FBV0MsV0FBV3pYLEVBQUVpNUIsS0FBTSxDQUFFM3NCLE9BQU8sSUFDbkQwdEQsT0FBUThCLFFBQVE5dEQsS0FBSWt3RCxHQUFLQSxFQUFFN3JELFFBQVEsTUFBUSxFQUFJLElBQU02ckQsRUFBSSxJQUFNQSxJQUFHN3ZELEtBQUssVUFDekUsS0FFRXpFLE9BQU8ySyxRQUFRK3BELDBCQUEwQmorRCxRQUFPKzVCLEdBQUtBLEVBQUUsR0FBSyxJQUFHeHZCLE9BQVMsSUFDMUV3d0IsVUFBVXFqQyxpQ0FBa0MsR0FFOUNyakMsVUFBVXNqQyxxQkFBdUJMLG9CQUFvQnp6RCxRQUFVLEVBQy9Ed3dCLFVBQVUwaUMsU0FBVyxHQUNyQixJQUFLLE1BQU9qNEQsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUXVwRCxVQUN4QzFpQyxVQUFVMGlDLFNBQVM1OEQsS0FBSyxDQUN0QmdYLEdBQUlyUyxJQUNKekYsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVN0SCxTQUc3Qms3QixVQUFVMGlDLFNBQVMzbkQsS0FBS3ZFLGNBQWN3RSxjQUN4QyxNQUNFZ2xCLFVBQVVtakMsdUJBQXlCLEdBQ25DbmpDLFVBQVU0aUMsa0JBQW9CLEdBQzlCNWlDLFVBQVVnakMsZ0JBQWtCLEVBQzVCaGpDLFVBQVVzakMscUJBQXVCLEVBQ2pDdGpDLFVBQVUraUMsNEJBQTZCLEVBQ3ZDL2lDLFVBQVVxakMsaUNBQWtDLEVBRTlDLE9BQU9yakMsU0FDVCxDQUVBLGlCQUFBcFgsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFFeEJBLEtBQUt2YSxLQUFLLHVCQUF1QnN5QixPQUFNLFNBQVV4eEIsR0FDL0NvSCxjQUFjcXJCLGdCQUFnQm5ILEVBQUU5ckIsTUFBTTIwRCxTQUFTLFNBQVMveUIsTUFDMUQsSUFFSzVoQyxLQUFLdVIsT0FBT3hULE1BQU1vbUIsYUFFdkJsSyxLQUFLdmEsS0FBSyxrQkFBa0JzeUIsTUFBTWh5QixLQUFLNDBELGVBQWUzN0QsS0FBSytHLE9BRTNEaWEsS0FBS3ZhLEtBQUssd0JBQXdCOUQsUUFBTyxTQUFVNEUsR0FDakQsTUFBTXFSLElBQU1pYSxFQUFFOXJCLE1BQ1J1ekQsT0FBUzFoRCxJQUFJdk0sS0FBSyxVQUN4QixJQUFJcFAsTUFBUTJiLElBQUkrdkIsTUFDRixLQUFWMXJDLFFBQ0ZBLE1BQVFxOUQsT0FBUzNyRCxjQUFjd3FELFlBQVlsOEQsUUFFN0MrakIsS0FBS3ZhLEtBQUssa0JBQWtCa2lDLElBQUkxckMsT0FBTytuQyxRQUFRLFNBQ2pELElBRUFoa0IsS0FBS3ZhLEtBQUssc0JBQXNCOUQsUUFBTyxTQUFVNEUsR0FDL0MsTUFBTXFSLElBQU1pYSxFQUFFOXJCLE1BQ2RpYSxLQUFLdmEsS0FBSyxrQkFBa0JraUMsSUFBSS92QixJQUFJK3ZCLE1BQ3RDLElBRUEzbkIsS0FBS3ZhLEtBQUssaUJBQWlCc3lCLE9BQU0xdkIsZUFBZ0I5QixHQUMvQ0EsRUFBRS9ELGlCQUNGLE1BQ01vNEQsTUFETS9vQyxFQUFFOXJCLE1BQ0lzRixLQUFLLFNBQ3ZCMlUsS0FBS3ZhLEtBQUssa0JBQWtCa2lDLElBQUlpekIsT0FBTzUyQixRQUFRLFNBQ2pELElBQ0YsQ0FFQSxzQkFBYXIzQixDQUFXa0ksU0FBVXhJLFlBQ2hDLEdBQXNCLFVBQWxCd0ksU0FBU3pRLEtBQWtCLENBRTdCLE1BQU1ILE9BQVMsQ0FDYixDQUFDb0ksYUFBYSxHQUVoQixRQUFxRCxJQUExQ3dJLFNBQVM1UCxPQUFPd0MsTUFBTWt4QyxXQUFXbHNDLEtBQzFDLElBQUssTUFBTzdLLE9BQVErRCxPQUFPMkssUUFBUXVFLFNBQVM1UCxNQUFNd0MsS0FBS2t4QyxVQUFVbHNDLE1BQzNEN0ssTUFBUXlLLGFBQ1ZwSSxPQUFPLEtBQU9yQyxLQUFPLFlBSXJCaVQsU0FBUzVRLE9BQU8sQ0FDcEIsNEJBQTZCQSxRQUVqQyxXQUEwRSxJQUF4RDRRLFNBQVM1UCxPQUFPd0MsTUFBTWt4QyxXQUFXbHNDLE9BQU9KLGlCQUNILElBQTFDd0ksU0FBUzVQLE9BQU93QyxNQUFNa3hDLFdBQVdsc0MsV0FDcENvSSxTQUFTNVEsT0FBTyxDQUNwQiw0QkFBNkIsQ0FDM0IsQ0FBQ29JLGFBQWEsV0FJWndJLFNBQVM1USxPQUFPLENBQ3BCLENBQUMsNkJBQTZCb0ksZUFBZSxVQUkzQ3dJLFNBQVM1USxPQUFPLENBQ3BCLENBQUMsK0JBQStCb0ksY0FBZSxNQUdyRCxDQUVBLG9CQUFNc3VELENBQWdCcjRELE9BQ3BCQSxNQUFNRSxpQkFDTixNQUFNNkosV0FBYS9KLE1BQU1JLGNBQWNJLFFBQVF3ekMsZUFDekM1cEMsWUFBWUMsVUFBVTVHLEtBQUt1UixPQUFRakwsWUFDekMsTUFBTWhILFFBQVVWLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS1YsZUFDdkNVLEtBQUttYixjQUNMbmIsS0FBS2hDLFFBQU8sRUFBTXNCLFFBQzFCLENBRUEsbUJBQU1vekIsQ0FBZW4yQixNQUFPbzJCLFVBQzFCLE1BQU16a0IsR0FBS3lrQixTQUFTemtCLElBQU0sU0FDcEJsTyxLQUFLdVIsT0FBT3JULE9BQU8sQ0FDdkIsMEJBQTJCZ1EsR0FDM0IsNEJBQTZCeWtCLFNBQVNxZ0MsTUFBUTExRCxLQUFLQyxLQUFLeTFELEtBQ3hELGdDQUFpQ3JnQyxTQUFTZ2hCLFVBQVksRUFDdEQsNEJBQThCM3pDLEtBQUt1UixPQUFPclMsT0FBT3dDLE1BQU1reEMsV0FBV2xzQyxNQUFRLENBQUMsSUFFN0UsTUFBTXVULEtBQU82UixFQUFFOXJCLEtBQUt1UixPQUFPeFQsTUFBTXlULFNBQVM5UixLQUFLLHVIQUMzQ3VhLEtBQUtyWixRQUNQcVosS0FBSzY2QyxJQUFJLENBQ1BDLE1BQVE3bUQsR0FBSyxvQ0FBc0MsUUFHdkRsTyxLQUFLaEMsUUFDUCxFQ3RRSyxTQUFTZzNELDBCQUEyQkMsY0FBZWwzRCxPQUN4RCxHQUFJVCxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsTUFBTTJzRCxXQUFhbjNELE1BQU13VCxPQUFPclMsT0FBT3dDLE1BQU1reEMsVUFFdkN1aUIsa0JBQW9CLENBQ3hCdHdELFdBRmtDLElBQWZxd0QsaUJBQXVELElBQWxCQSxXQUFXaG5ELElBQXdDLEtBQWxCZ25ELFdBQVdobkQsR0FFckYsc0JBQXdCLHdCQUN2QzdRLE1BQU8sb0JBQ1BJLEtBQU0scUJBQ04yM0QsUUFBUyxLQUNQLElBQUl6dUQsWUFBWTVJLE1BQU13VCxPQUFRLENBQUMsR0FBR3ZULFFBQU8sRUFBTSxDQUFFK3lDLE9BQU8sR0FBTSxHQUc1RHNrQixnQkFBa0JKLGNBQWNyMEQsT0FDdENxMEQsY0FBY3YrQixPQUFPMitCLGdCQUFrQixFQUFHLEVBQUdGLGtCQUMvQyxDQUNGLENDakJPLE1BQU1HLGdCQUNYLElBQUFyOEQsQ0FBTXM4RCxLQUFNdDdDLEtBQU0wYSxVQUNoQjMwQixLQUFLdzFELFVBQVk3Z0MsU0FDakIzMEIsS0FBS3kxRCxNQUFReDdDLEtBQ2JqYSxLQUFLMDFELE1BQVFILEtBQ2IsSUFDRSxNQUFNSSxZQUFjMTdDLEtBQUt2YSxLQUFLLHNCQUFzQjYxRCxLQUFLcm5ELE9BQ3pELEdBQTJCLElBQXZCeW5ELFlBQVkvMEQsT0FBYyxPQUM5QiswRCxZQUFZQyxZQUFZNTFELEtBQUs2MUQsZUFBZTU4RCxLQUFLK0csT0FDakQsTUFBTTgxRCxZQUFjUixnQkFBZ0JTLFdBQVdSLE1BQy9DTyxZQUFZNTdDLEdBQUcsUUFDYixlQUNBbGEsS0FBS2cyRCxjQUFjLzhELEtBQUsrRyxPQUVELElBQXJCQSxLQUFLdTFELEtBQUszMEQsT0FBY1osS0FBS3UxRCxLQUFLNzFCLFlBQVlvMkIsYUFDN0M5MUQsS0FBS2kyRCxjQUFjcmtCLE9BQU9ra0IsWUFDakMsQ0FBRSxNQUFPcDRDLE9BQ1B2UyxRQUFRdVMsTUFBTUEsTUFDaEIsQ0FDRixDQUVBLGlCQUFJdTRDLEdBQ0YsSUFBSUEsY0FBZ0JqMkQsS0FBS3kxRCxNQUFNLzFELEtBQUssbUJBS3BDLE9BSjZCLElBQXpCdTJELGNBQWNyMUQsU0FDaEJaLEtBQUt5MUQsTUFBTTdqQixPQUFPLHNDQUNsQnFrQixjQUFnQmoyRCxLQUFLeTFELE1BQU0vMUQsS0FBSyxvQkFFM0J1MkQsYUFDVCxDQUVBLFFBQUlWLEdBR0YsT0FBT3YxRCxLQUFLaTJELGNBQWN2MkQsS0FBSyx5QkFBeUJNLEtBQUswMUQsTUFBTXhuRCxLQUNyRSxDQUVBLGFBQUE4bkQsQ0FBZXo1RCxPQUdiLE9BQU95RCxLQUFLdzFELFVBQVVqNUQsTUFBT3lELEtBQUtpbEIsT0FDcEMsQ0FFQSxlQUFPaXhDLEdBQ2tCcHFDLEVBQUUsUUFBUXBzQixLQUFLLG1CQUNUQSxLQUFLLHlCQUM1QnkyRCxNQUFLLFNBQVUzMUMsRUFBRzZDLEdBQUtBLEVBQUUwYyxNQUFNcTJCLFdBQWEsUUFBUyxHQUU3RCxDQUVBLGNBQUFQLENBQWdCdDVELE9BQ2RBLE1BQU1FLGdCQUFlLEdBQ3JCNjRELGdCQUFnQlksV0FDaEIsTUFBTWp4QyxPQUFTMW9CLE9BQU9JLGNBRXRCLEdBREFxRCxLQUFLaWxCLE9BQVNBLFFBQ1RBLE9BQVEsT0FDYixNQUFNb3hDLFNBQVdweEMsT0FBT2xvQixTQUFTdTVELFlBQ2pDLEdBQUlELFdBQWFyMkQsS0FBSzAxRCxNQUFNeG5ELEdBQUksQ0FDOUIsTUFBTXFvRCxRQUFVdjJELEtBQUt1MUQsS0FDckIsR0FBSWdCLFFBQVEzMUQsT0FBUyxFQUFHLENBQ3RCLE1BQU00MUQsUUFBVUQsUUFBUTcyRCxLQUFLLGFBQzdCLElBQUlrOUMsS0FBT3JnRCxNQUFNazZELFFBQ2I3SixJQUFNcndELE1BQU1tNkQsUUFDaEIsTUFBTUMsV0FBYUosUUFBUUssY0FDckJDLFVBQVlOLFFBQVFPLGFBQ3RCcEssT0FBT0ksWUFBYzZKLFdBQWEvSixNQUNwQ0EsS0FBWStKLFlBRVZqSyxPQUFPQyxXQUFha0ssVUFBWWphLE9BQ2xDQSxLQUFPOFAsT0FBT0MsV0FBYWtLLFdBRXpCTCxRQUFRNTFELE9BQVMsSUFDZjhyRCxPQUFPQyxXQUFha0ssVUFBWWphLEtBQU80WixRQUFRTSxhQUNqRE4sUUFBUTFCLElBQUksQ0FDVmpZLE1BQVVnYSxVQUFZLEVBQWYsS0FDUGphLEtBQU0sS0FHUjRaLFFBQVExQixJQUFJLENBQ1ZsWSxLQUFTaWEsVUFBWSxFQUFmLEtBQ05oYSxNQUFPLE1BSWIwWixRQUFRekIsSUFBSSxDQUNWbFksS0FBTSxHQUFHQSxTQUNUZ1EsSUFBSyxHQUFHQSxRQUNSd0osV0FBWSxXQUVoQixDQUNGLENBQ0YsQ0FFQSxhQUFPVyxDQUFRWCxZQUNiLE9BQVFBLFdBQVdwdUQsZUFDakIsSUFBSyxLQUNILE9BQU8xSyxLQUFLc0csS0FBSzJFLEtBQ25CLElBQUssVUFDSCxPQUFPakwsS0FBS3NHLEtBQUtzckMsVUFDbkIsUUFDRSxPQUFPLEVBRWIsQ0FFQSxpQkFBTzZtQixDQUFZUixNQUNqQixNQUFNNTdDLFFBQWtDLGlCQUFqQjQ3QyxLQUFLNTdDLFFBQXVCLENBQUM0N0MsS0FBSzU3QyxTQUFXNDdDLEtBQUs1N0MsUUFDekVBLFFBQVF6aUIsS0FBSyx3QkFDYixNQUFNcS9ELFFBQVV6cUMsRUFBRSxlQUdsQixHQUZBeXFDLFFBQVFTLFNBQVN6QixLQUFLcm5ELElBQ3RCeUwsUUFBUTdCLFNBQVFzWSxHQUFLbW1DLFFBQVFTLFNBQVM1bUMsS0FDbENtbEMsS0FBSzBCLFFBQ1AxQixLQUFLMEIsUUFBUW4vQyxTQUFRN2hCLElBQ25CLE1BQU1naEUsUUFBVTNCLGdCQUFnQjRCLGNBQWNqaEUsRUFBRyxDQUFFa2hFLE9BQU8sSUFDdERGLFNBQVNWLFFBQVEza0IsT0FBT3FsQixRQUFPLFFBRWhDLENBQ0wsTUFBTUEsUUFBVTNCLGdCQUFnQjRCLGNBQWMzQixNQUMxQzBCLFNBQVNWLFFBQVEza0IsT0FBT3FsQixRQUM5QixDQUNBLE9BQU9WLE9BQ1QsQ0FFQSxvQkFBT1csQ0FBZWpoRSxHQUFHLE9BQVUsRUFBSyxTQUFZLEdBQVUsQ0FBQyxHQUM3RCxJQUFLQSxFQUFFa1ksTUFBTyxPQUFPLEtBQ3JCLEdBQUlsWSxFQUFFbWdFLGFBQWVkLGdCQUFnQnlCLE9BQU85Z0UsRUFBRW1nRSxZQUFhLE9BQU8sS0FDbEUsTUFBTXo4QyxRQUFVMWpCLEVBQUUwakIsUUFBK0IsaUJBQWQxakIsRUFBRTBqQixRQUF1QixDQUFDMWpCLEVBQUUwakIsU0FBVzFqQixFQUFFMGpCLFFBQVUsR0FDbEZ3OUMsT0FBT3g5QyxRQUFRemlCLEtBQUssZ0JBQ3BCcy9ELFNBQVM3OEMsUUFBUXppQixLQUFLLFlBQzFCLE1BQU0rL0QsUUFBVW5yQyxFQUFFLGFBc0JsQixPQXJCQW5TLFFBQVE3QixTQUFRc1ksR0FBSzZtQyxRQUFRRCxTQUFTNW1DLEtBQ3RDbjZCLEVBQUVrWSxNQUFNMkosU0FBUTBJLElBQ2QsTUFBTTVqQixHQUFLa3ZCLEVBQUUsYUFXYixHQVZBbHZCLEdBQUdvNkQsU0FBUyxhQUNSeDJDLEVBQUVyakIsU0FDSlAsR0FBR282RCxTQUFTLGVBQ1pwNkQsR0FBR3NrRCxLQUFLLGNBQWUxZ0MsRUFBRXJqQixTQUVKLGlCQUFacWpCLEVBQUVuakIsTUFBb0JULEdBQUdnMUMsT0FBTyxTQUFTcHhCLEVBQUVuakIsaUJBRWhEbWpCLEVBQUVuakIsTUFBTUksTUFBTWIsR0FBR2cxQyxPQUFPLGFBQWFweEIsRUFBRW5qQixNQUFNSSxjQUM3QytpQixFQUFFbmpCLE1BQU1nNEMsTUFBTXo0QyxHQUFHZzFDLE9BQU8sU0FBU3B4QixFQUFFbmpCLE1BQU1nNEMsZ0JBRTNDNzBCLEVBQUVnMkMsUUFBUyxDQUNiNTVELEdBQUdvNkQsU0FBUyxtQkFDWnA2RCxHQUFHZzFDLE9BQU8sc0NBQ1YsTUFBTXdsQixJQUFNOUIsZ0JBQWdCNEIsY0FBYzEyQyxFQUFFZzJDLFFBQVMsQ0FBRUEsU0FBUyxJQUM1RFksS0FBS3g2RCxHQUFHZzFDLE9BQU93bEIsSUFDckIsQ0FDQUgsUUFBUXJsQixPQUFPaDFDLEdBQUUsSUFFWnE2RCxPQUNULEVDaklLLE1BQU1JLHVCQUF1QkMsV0FDbEMsaUJBQUFDLEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxDQUVBLGFBQU05akMsR0FDSixNQUFNQyxnQkFBa0IvMEIsTUFBTTgwQixVQTJMOUIsR0F6TEFDLFVBQVVvbUMsa0JBQW9CbDZELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUV4RGswQixVQUFVcW1DLGVBQWlCejNELEtBQUtpUixPQUFTM1QsS0FBS3NHLEtBQUsyRSxLQUNuRDZvQixVQUFVc21DLGFBQXVELElBQXpDMTNELEtBQUsvRixNQUFNa1ksZ0JBQWdCNmhDLFVBQ25ENWlCLFVBQVV4YSxRQUFVNVcsS0FBSy9GLE1BQU0yYyxRQUMvQndhLFVBQVV1bUMsWUFBYyxDQUFDLEVBQ3pCdm1DLFVBQVV2TixPQUFTLENBQUMsRUFDcEJ1TixVQUFVd21DLGFBQWUsQ0FBQyxFQUMxQnhtQyxVQUFVbXZCLFFBQVUsQ0FBQyxFQUNyQm52QixVQUFVeW1DLFNBQVcsR0FDckJ6bUMsVUFBVTBtQyxTQUFXLEdBQ3JCMW1DLFVBQVUybUMsV0FBYSxDQUFDLEVBRXhCM21DLFVBQVVuMEIsUUFDWSxjQUFwQitDLEtBQUsvRixNQUFNb0UsS0FDUDVDLGlCQUFpQndFLDhCQUE4QkQsS0FBSy9GLE1BQU1nRCxTQUMxRHhCLGlCQUFpQm9GLGlDQUFpQ2IsS0FBSy9GLE1BQU1nRCxTQUVuRW0wQixVQUFVNG1DLG1CQUFxQjE2RCxLQUFLc0csS0FBSzJFLE9BQVN2SSxLQUFLL0YsTUFBTXFoQixVQUFVaGUsS0FBS3NHLEtBQUtzSyxLQUFPbE8sS0FBSy9GLE1BQU1xaEIsVUFBVUMsV0FBYXBMLE1BQU1xTCwwQkFBMEJ5OEMsUUFFMUo3bUMsVUFBVWdHLFNBQVc5NUIsS0FBS3NHLEtBQUsyRSxLQUMvQjZvQixVQUFVOG1DLFlBQytDLFdBQXZENTZELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUMxQkksS0FBS3NHLEtBQUsyRSxNQUM4QyxhQUF2RGpMLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDBCQUN6QkksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBRTJCLGFBQXZESSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwwQkFDMUJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHlCQUUxQmswQixVQUFVOXJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLFFBQVMsR0FHZixZQUFwQm5KLEtBQUsvRixNQUFNb0UsT0FDUit5QixVQUFVOXJCLEtBQUt2SixPQUFPNm5CLGtCQUN6QndOLFVBQVU5ckIsS0FBS3ZKLE9BQU82bkIsZ0JBQWtCLENBQ3RDdHRCLElBQUssQ0FDSEosTUFBTyxLQUNQeXRCLE1BQU8sYUFDUHRtQixNQUFPLGtCQUNQckQsUUFBUyxNQUVYekQsSUFBSyxDQUNITCxNQUFPLEtBQ1B5dEIsTUFBTyxhQUNQdG1CLE1BQU8sc0JBQ1ByRCxRQUFTLE1BRVh4RCxJQUFLLENBQ0hOLE1BQU8sS0FDUHl0QixNQUFPLGFBQ1B0bUIsTUFBTyxjQUNQckQsUUFBUyxNQUVYdkQsSUFBSyxDQUNIUCxNQUFPLEtBQ1B5dEIsTUFBTyxhQUNQdG1CLE1BQU8sbUJBQ1ByRCxRQUFTLE1BRVh0RCxJQUFLLENBQ0hSLE1BQU8sS0FDUHl0QixNQUFPLGFBQ1B0bUIsTUFBTyxvQkFDUHJELFFBQVMsTUFFWHJELElBQUssQ0FDSFQsTUFBTyxLQUNQeXRCLE1BQU8sYUFDUHRtQixNQUFPLHNCQUNQckQsUUFBUyxNQUVYcEQsSUFBSyxDQUNIVixNQUFPLEtBQ1B5dEIsTUFBTyxhQUNQdG1CLE1BQU8sZUFDUHJELFFBQVMsTUFFWG5ELElBQUssQ0FDSFgsTUFBTyxLQUNQeXRCLE1BQU8sYUFDUHRtQixNQUFPLG1CQUNQckQsUUFBUyxRQUtWbzNCLFVBQVU5ckIsS0FBS3ZKLE9BQU9DLFVBQ3pCbzFCLFVBQVU5ckIsS0FBS3ZKLE9BQU9DLFFBQVUsQ0FDOUJtM0MsR0FBSSxDQUNGajlDLE1BQU8sS0FDUCtNLElBQUssS0FDTDBnQixNQUFPLEtBQ1B0bUIsTUFBTyxhQUNQbEYsTUFBTSxHQUVSbzdDLEdBQUksQ0FDRnI5QyxNQUFPLEtBQ1ArTSxJQUFLLEtBQ0wwZ0IsTUFBTyxLQUNQdG1CLE1BQU8sZUFDUGxGLE1BQU0sR0FFUjRqRCxJQUFLLENBQUU3bEQsTUFBTyxLQUFNeXRCLE1BQU8sTUFBT3RtQixNQUFPLFFBQ3pDZ3RCLElBQUssQ0FDSG4wQixNQUFPLEtBQ1ArTSxJQUFLLEdBQ0wwZ0IsTUFBTyxNQUNQdG1CLE1BQU8sU0FDUGxGLE1BQU0sR0FFUm0wQyxJQUFLLENBQ0hwMkMsTUFBTyxLQUNQeXRCLE1BQU8sTUFDUHRtQixNQUFPLGdCQUNQbEYsTUFBTSxHQUVSZ0UsR0FBSSxDQUNGakcsTUFBTyxLQUNQeXRCLE1BQU8sS0FDUHRtQixNQUFPLGVBQ1BsRixNQUFNLEdBRVIrekMsTUFBTyxDQUNMaDJDLE1BQU8sS0FDUHl0QixNQUFPLE1BQ1B0bUIsTUFBTyxRQUNQbEYsTUFBTSxHQUVSOEQsTUFBTyxDQUFFL0YsTUFBTyxLQUFNaUMsTUFBTSxLQUkzQmk1QixVQUFVOXJCLEtBQUt2SixPQUFPaTdDLFlBQ3pCNWxCLFVBQVU5ckIsS0FBS3ZKLE9BQU9pN0MsVUFBWSxDQUNoQ21oQixvQkFBcUIsQ0FBRTk1RCxLQUFNLFNBQVVuSSxNQUFPLE1BSTdDazdCLFVBQVU5ckIsS0FBS3ZKLE9BQU8waUMsUUFDekJyTixVQUFVOXJCLEtBQUt2SixPQUFPMGlDLE1BQVEsQ0FDNUJvWCxXQUFZLEdBQ1pnSixJQUFLLEdBQ0x1WixJQUFLLEdBQ0xDLFVBQVcsR0FDWEMsV0FBWSxHQUNaeGlCLFVBQVcsR0FDWHlpQixhQUFjLEdBQ2RDLFdBQVksS0FJWHBuQyxVQUFVOXJCLEtBQUt2SixPQUFPbUQsUUFDekJreUIsVUFBVTlyQixLQUFLdkosT0FBT21ELE1BQVEsQ0FBRWlLLFFBQVEsRUFBTXN2RCxjQUFjLElBR3pEcm5DLFVBQVU5ckIsS0FBS3ZKLE9BQU8yOEQsU0FDekJ0bkMsVUFBVTlyQixLQUFLdkosT0FBTzI4RCxPQUFTLENBQzdCQyxlQUFnQixLQUNoQnhpRSxXQUFZLEtBQ1p5aUUsTUFBTyxLQUNQQyxjQUFlLE9BSWR6bkMsVUFBVTlyQixLQUFLdkosT0FBTys4RCxjQUN6QjFuQyxVQUFVOXJCLEtBQUt2SixPQUFPKzhELFlBQWMsQ0FDbENsakIsU0FBVSxLQUNWQyxXQUFZLEtBQ1pDLFVBQVcsT0FJVjFrQixVQUFVOXJCLEtBQUt2SixPQUFPaTdDLFlBQVc1bEIsVUFBVTlyQixLQUFLdkosT0FBT2k3QyxVQUFZLElBRXhFNWxCLFVBQVUybkMsa0JBQW9CejdELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUN4RGswQixVQUFVNG5DLHFCQUF1QjE3RCxLQUFLbUUsU0FBU3ZFLElBQzdDLE9BQ0EseUJBSUprMEIsVUFBVTZuQyxPQUFTajVELEtBQUsvRixNQUFNUyxLQUM5QjAyQixVQUFVOG5DLFFBQVVsNUQsS0FBSy9GLE1BQU1PLE1BRTNCNDJCLFVBQVVqakIsTUFBTyxDQUNuQixJQUFLLE1BQU1sSSxRQUFRbXJCLFVBQVVqakIsTUFBTyxDQUdsQyxHQUFrQixVQUFkbEksS0FBSzVILEtBbUJQLEdBbEJJNEgsS0FBS2xLLE9BQU84SyxXQUFXN1AsVUFDckJpUCxLQUFLbEssT0FBTzhLLFdBQVd6UCxXQUN6QjZPLEtBQUtsSyxPQUFPa0wsZUFBaUIzSixLQUFLQyxLQUFLQyxTQUNyQyxvQ0FHQXlJLEtBQUtsSyxPQUFPOEssV0FBV3hQLFVBQ3pCNE8sS0FBS2xLLE9BQU9rTCxlQUFpQjNKLEtBQUtDLEtBQUtDLFNBQ3JDLG1DQUdBeUksS0FBS2xLLE9BQU84SyxXQUFXdlAsU0FDekIyTyxLQUFLbEssT0FBT2tMLGVBQWlCM0osS0FBS0MsS0FBS0MsU0FDckMsbUNBS2tCLGNBQXBCd0MsS0FBSy9GLE1BQU1vRSxLQUFzQixDQUNuQyxHQUFJdkMsTUFBTUksT0FBTytKLEtBQUtsSyxPQUFPN0YsUUFBUyxDQUNwQyxJQUFJQSxNQUFRLEtBQ1osTUFBTXdVLE9BQVMsQ0FBQyxFQUNoQixJQUFLLE1BQU83TyxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUNoQ2hXLEtBQUt5RixRQUFRRSxZQUVUMkIsSUFBSThPLFdBQVcsTUFBUXpVLE1BQU15VSxXQUFXLFdBQzFDRCxPQUFPN08sSUFBSStPLFVBQVUsSUFBTWhNLFFBQVFDLE1BQU1nTSxZQUN2QzdLLEtBQ0E5SixNQUFNMFUsVUFBVSxLQUl0QixJQUNFMVUsYUFDUSxJQUFJNEwsS0FBS21FLEtBQUtsSyxPQUFPN0YsTUFBT3dVLFFBQVFrTixTQUFTLENBQ2pEdFYsT0FBTyxLQUVURyxLQUNKLENBQUUsTUFBT3VJLEtBQ1BHLFFBQVFvSSxLQUNOalcsS0FBS0MsS0FBSzBXLE9BQU8sc0NBQXVDLENBQ3REL2QsTUFBTytQLEtBQUtsSyxPQUFPN0YsTUFDbkJFLEtBQU02UCxLQUFLN1AsUUFHZkYsTUFBUSxJQUNWLENBRUEsR0FBSUEsTUFBTyxDQUNUK1AsS0FBS2xLLE9BQU83RixNQUFRQSxNQUNwQixNQUFNaWpFLGFBQWVuNUQsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSStJLEtBQUtvc0MsS0FDL0NsbkMsUUFBUTVLLEtBQ04saUJBQWlCUCxLQUFLNUosMEJBQTBCNlAsS0FBSzdQLFFBQVE2UCxLQUFLbEssT0FBTzdGLFlBQVlBLGVBRWpGaWpFLGFBQWFqN0QsT0FBTyxDQUN4QixlQUFnQmhJLE9BRXBCLENBQ0YsQ0FFQSxNQUFNK1IsTUFBUWpJLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUkrSSxLQUFLb3NDLE1BQ2xDLEtBQU0sU0FBVSxPQUFZcHFDLE1BQU1sTSxPQUd4Q2tLLEtBQUtsSyxPQUFPeWEsU0FBV0EsVUFBWXRnQixPQUFTdVUsS0FDNUN4RSxLQUFLbEssT0FBTzdGLE1BQVFBLE9BQVN1VSxJQUMvQixLQUFPLENBQ0wsTUFBTXhDLE1BQVFqSSxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUFJK0ksS0FBS29zQyxLQUd4QyxHQUZBcHNDLEtBQUtsSyxPQUFPME8sV0FBYXhDLE1BQU1pRCxZQUUzQmpGLEtBQUtsSyxPQUFPN0YsTUFBTyxDQU1yQixJQUFJa2pFLFlBSFFuekQsS0FBS2xLLE9BQU9ndEIsYUFBYUMsV0FDakMva0IsU0FBU2dDLEtBQUtsSyxPQUFPZ3RCLFlBQVlDLFlBQ2pDLEdBQ21CL2tCLFNBQVNnQyxLQUFLbEssT0FBTzdGLE9BQVMrUixNQUFNL1IsTUFDdkRrakUsWUFBYyxJQUFHQSxXQUFhLE1BQ2xDanVELFFBQVE1SyxLQUNOLHlCQUF5QjBILE1BQU03Uix3Q0FBd0NnakUsb0JBRW5FcDVELEtBQUsvRixNQUFNcytDLHdCQUF3QixPQUFRLENBQy9DLENBQ0VsRyxJQUFLcHNDLEtBQUtvc0MsSUFDVixnQ0FBaUMrbUIsV0FDakMsZUFBZ0IsUUFHZm56RCxLQUFLbEssT0FBT2d0QixjQUFhOWlCLEtBQUtsSyxPQUFPZ3RCLFlBQWMsQ0FBQyxHQUN6RDlpQixLQUFLbEssT0FBT2d0QixZQUFZQyxXQUFhb3dDLFdBQ3JDbnpELEtBQUtsSyxPQUFPeWEsU0FBV3ZPLE1BQU11TyxTQUM3QnZRLEtBQUtsSyxPQUFPN0YsTUFBUStSLE1BQU0vUixLQUM1QixNQUNFK1AsS0FBS2xLLE9BQU83RixNQUFRK1IsTUFBTS9SLE1BQzFCK1AsS0FBS2xLLE9BQU95YSxTQUFXdk8sTUFBTXVPLFFBRWpDLENBR0YsSUFBSWdyQixLQUFPcFEsVUFBVXVtQyxZQUFZMXhELEtBQUs1SCxNQUNqQ21qQyxPQUNIQSxLQUFPLEdBQ1BwUSxVQUFVdW1DLFlBQVkxeEQsS0FBSzVILE1BQVFtakMsTUFFckNBLEtBQUt0cUMsS0FBSytPLEtBQ1osQ0FFQSxJQUFLLE1BQU1vekQsWUFBWWpvQyxVQUFVdW1DLFlBQy9Cdm1DLFVBQVV1bUMsWUFBWTBCLFVBQVVsdEQsS0FBS3ZFLGNBQWN3RSxlQUlyRGdsQixVQUFVdk4sT0FBU3VOLFVBQVVqakIsTUFDMUI5WCxRQUFPNFAsTUFBc0IsVUFBZEEsS0FBSzVILE9BQ3BCOE4sS0FBS3ZFLGNBQWN3RSxlQUV0QmdsQixVQUFVa29DLFlBQWNsb0MsVUFBVXZOLE9BQU94dEIsUUFDdkM0UixRQUNxQyxJQUFuQ0EsTUFBTWxNLE9BQU84SyxXQUFXMVAsU0FDYSxJQUFyQzhRLE1BQU1sTSxPQUFPOEssV0FBV3pQLFdBRTVCZzZCLFVBQVVtb0MsWUFBY25vQyxVQUFVdk4sT0FBT3h0QixRQUN2QzRSLFFBQ3FDLElBQW5DQSxNQUFNbE0sT0FBTzhLLFdBQVcxUCxVQUNhLElBQXBDOFEsTUFBTWxNLE9BQU84SyxXQUFXeFAsVUFBdUQsSUFBbkM0USxNQUFNbE0sT0FBTzhLLFdBQVd2UCxVQUd6RSxNQUFNa2lFLFVBQVlwb0MsVUFBVXZOLE9BQU94dEIsUUFDakM0UixRQUE0QyxJQUFuQ0EsTUFBTWxNLE9BQU84SyxXQUFXMVAsU0FFbkMsR0FBSXFpRSxVQUNGLElBQUssTUFBTXZ4RCxTQUFTdXhELFVBQ2xCcG9DLFVBQVV3bUMsYUFBYTN2RCxNQUFNb3FDLEtBQU9wcUMsTUFJeEMsTUFBTXM0QyxRQUFVbnZCLFVBQVV1bUMsWUFBWTd5QyxPQUV0QyxHQUFJeTdCLFFBQ0YsSUFBSyxNQUFNejdCLFVBQVV5N0IsUUFBUyxDQVc1QixHQVZBejdCLE9BQU8yMEMsb0JBQzZCLElBQWxDMzBDLE9BQU8vb0IsT0FBTzhLLFdBQVcxTyxPQUNTLElBQWxDMnNCLE9BQU8vb0IsT0FBTzhLLFdBQVczTyxLQUN0QjRzQixPQUFPL29CLE9BQU9zUCxPQUFNeVosT0FBTy9vQixPQUFPc1AsS0FBTyxHQUU5Q3laLE9BQU80MEMsVUFBVyxFQUtrQixLQUFoQzUwQyxPQUFPL29CLE9BQU9rTSxNQUFNZ0csS0FBS0MsR0FFM0I0VyxPQUFPNDBDLFVBQVcsTUFDYixDQUdMLEdBQUl0b0MsVUFBVXdtQyxhQUFhOXlDLE9BQU8vb0IsT0FBT2tNLE1BQU1nRyxLQUFLQyxJQUFLLENBQ3ZELE1BQU1qRyxNQUFRakksS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSTRuQixPQUFPL29CLE9BQU9rTSxNQUFNZ0csS0FBS0MsSUFDNUQ0VyxPQUFPL29CLE9BQU9rTSxNQUFNZ0csS0FBSzdYLEtBQU82UixNQUFNbE0sT0FBTytLLFVBQzdDZ2UsT0FBTy9vQixPQUFPa00sTUFBTWdHLEtBQUsvWCxNQUFRK1IsTUFBTS9SLEtBQ3pDLE1BQ0U0dUIsT0FBTzQwQyxVQUFXLEVBR3BCLEdBQTBDLEtBQXRDNTBDLE9BQU8vb0IsT0FBT2tNLE1BQU1tRyxXQUFXRixJQUM3QmtqQixVQUFVd21DLGFBQWE5eUMsT0FBTy9vQixPQUFPa00sTUFBTW1HLFdBQVdGLElBQUssQ0FDN0QsTUFBTWpHLE1BQVFqSSxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUM3QjRuQixPQUFPL29CLE9BQU9rTSxNQUFNbUcsV0FBV0YsSUFFakM0VyxPQUFPL29CLE9BQU9rTSxNQUFNbUcsV0FBV2hZLEtBQU82UixNQUFNbE0sT0FBTytLLFVBQ25EZ2UsT0FBTy9vQixPQUFPa00sTUFBTW1HLFdBQVdsWSxNQUFRK1IsTUFBTS9SLEtBQy9DLENBRUosQ0FFQTR1QixPQUFPL29CLE9BQU80OUQsWUFBYyxHQUM1QixJQUFLLE1BQU85OUQsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUt1WixrQkFBbUIsQ0FDaEUsTUFBTXlpQyxTQUFXLENBQUMsRUFDbEJBLFNBQVNyaUMsR0FBS3JTLElBQ2QwMEMsU0FBU242QyxLQUFPRixNQUNoQnE2QyxTQUFTcjZDLE9BQTBDLElBQWxDNHVCLE9BQU8vb0IsT0FBTzhLLFdBQVdoTCxLQUMxQ2lwQixPQUFPL29CLE9BQU80OUQsWUFBWXppRSxLQUFLcTVDLFNBQ2pDLENBRUFuZixVQUFVbXZCLFFBQVF6N0IsT0FBT3V0QixLQUFPdnRCLE9BQzVCQSxPQUFPL29CLE9BQU84SyxXQUFXalAsS0FBTXc1QixVQUFVeW1DLFNBQVMzZ0UsS0FBSzR0QixRQUN0RHNNLFVBQVUwbUMsU0FBUzVnRSxLQUFLNHRCLE9BQy9CLENBR0YsTUFBTTdULE1BQVFqUixLQUFLaVIsTUFNbkIsR0FMQW1nQixVQUFVNWtCLFFBQVV5RSxNQUNoQixHQUFHQSxNQUFNbEgsUUFBUW1FLEdBQUsrQyxNQUFNbEgsT0FBT21FLEdBQUssV0FBVytDLE1BQU0vQyxLQUN6RCxLQUVKa2pCLFVBQVV3b0MsMEJBQTJCLEVBQ2pDeG9DLFVBQVU5ckIsS0FBS3ZKLE9BQU82bkIsZ0JBQ3hCLElBQUssTUFBTWpOLGtCQUFrQi9XLE9BQU9KLE9BQU80eEIsVUFBVTlyQixLQUFLdkosT0FBTzZuQixpQkFDMURqTixlQUFlemdCLFFBQU95Z0IsZUFBZWc4QyxVQUFXLEdBQ3JEaDhDLGVBQWV6QyxLQUFPOVIsS0FBSzBJLE1BQU02TCxlQUFlemdCLE1BQVEsR0FDeER5Z0IsZUFBZXRNLFFBQVVqSSxLQUFLMEksTUFBTTZMLGVBQWV6Z0IsTUFBUSxHQUd0RHlnQixlQUFlemdCLE9BQVV5Z0IsZUFBZTNjLFFBRzNDMmMsZUFBZXFwQixTQUFVLEVBRnpCcnBCLGVBQWVxcEIsU0FBVSxHQU10QnJwQixlQUFlemdCLE9BQVN5Z0IsZUFBZTNjLFVBQzFDMmMsZUFBZWlqRCwwQkFBMkIsR0FHNUN4b0MsVUFBVXdvQyx5QkFDUnhvQyxVQUFVd29DLDBCQUNWampELGVBQWVpakQsd0JBR3ZCLENBR0EsR0FBSyxDQUFDLFVBQVcsYUFBYTUyRCxTQUFTaEQsS0FBSy9GLE1BQU1vRSxNQUloRCt5QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRbTNDLEdBQUdoN0MsTUFBTyxFQUN4Q2k1QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRdTNDLEdBQUdwN0MsTUFBTyxFQUN4Q2k1QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRcXVCLElBQUlseUIsTUFBTyxFQUN6Q2k1QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRc3dDLElBQUluMEMsTUFBTyxFQUN6Q2k1QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRRyxHQUFHaEUsTUFBTyxFQUN4Q2k1QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRa3dDLE1BQU0vekMsTUFBTyxNQVRZLENBQ3ZELE1BQU1BLEtBQU82SCxLQUFLL0YsTUFBTWs2QyxxQkFDeEIvaUIsVUFBVTlyQixLQUFLdkosT0FBUzZDLFFBQVFDLE1BQU02YSxZQUFZMFgsVUFBVTlyQixLQUFLdkosT0FBUTVELEtBQzNFLENBZ0NBLE9BdkJJaTVCLFVBQVU5ckIsS0FBS3ZKLE9BQU9DLFFBQVF1M0MsR0FBR3I5QyxNQUFRLElBQUdrN0IsVUFBVTlyQixLQUFLdkosT0FBT0MsUUFBUXUzQyxHQUFHcjlDLE1BQVEsTUFDckZrN0IsVUFBVTlyQixLQUFLdkosT0FBT0MsUUFBUXF1QixJQUFJbjBCLE1BQVEsSUFBR2s3QixVQUFVOXJCLEtBQUt2SixPQUFPQyxRQUFRcXVCLElBQUluMEIsTUFBUSxNQUV0RixDQUFDLFdBQVc4TSxTQUFTaEQsS0FBSy9GLE1BQU1vRSxPQUMvQit5QixVQUFVOXJCLEtBQUt2SixPQUFPaTdDLHFCQUFxQi8zQixPQUFTbVMsVUFBVTlyQixLQUFLdkosT0FBT2k3QyxVQUFVcDJDLFNBQ3RGd3dCLFVBQVU5ckIsS0FBS3ZKLE9BQU9pN0MsVUFBVSxHQUFHNmlCLFNBQVUsRUFDN0N6b0MsVUFBVTlyQixLQUFLdkosT0FBT2k3QyxVQUFVNWxCLFVBQVU5ckIsS0FBS3ZKLE9BQU9pN0MsVUFBVXAyQyxPQUFTLEdBQUdrNUQsUUFBUyxHQUd6RjFvQyxVQUFVMm9DLG9CQUFxQixFQUMvQjNvQyxVQUFVNG9DLG9CQUFxQixFQUMvQjVvQyxVQUFVNm9DLHFCQUFzQixFQUNoQzdvQyxVQUFVOG9DLHNCQUF1QixFQUNqQzlvQyxVQUFVK29DLHVCQUF3QixFQUNsQy9vQyxVQUFVZ3BDLHNCQUF1QixFQUVqQ2hwQyxVQUFVaXBDLGNBQ1JyNkQsS0FBSy9GLE1BQU1nRCxRQUFRc0MsS0FBTyxRQUNlLElBQWpDUyxLQUFLL0YsTUFBTThCLE9BQU9vbkQsWUFDeEJ2akQsT0FBT21FLEtBQUsvRCxLQUFLL0YsTUFBTThCLE9BQU9vbkQsWUFBWTlzRCxRQUN4Q2lrRSxXQUFhdDZELEtBQUsvRixNQUFNOEIsT0FBT29uRCxXQUFXbVgsV0FBV3BrRSxRQUNyRDBLLE9BQVMsRUFFUnd3QixTQUNULENBV0EsWUFBSTdrQixHQUVGLE1BREF4RCxHQUFHQyxjQUFjMFUsTUFBTSxpQ0FDakIsSUFBSTFGLE1BQU0sd0RBR2xCLENBRUEsWUFBQXVpRCxHQUVBLENBUUEsaUJBQUF2Z0QsQ0FBbUJDLE1Bb0JqQixHQW5CQTVkLE1BQU0yZCxrQkFBa0JDLE1BRXhCQSxLQUFLdmEsS0FBSyxtQkFBbUJzeUIsTUFBTWh5QixLQUFLdzZELGlCQUFpQnZoRSxLQUFLK0csT0FDOURpYSxLQUFLdmEsS0FBSyxpQkFBaUJzeUIsTUFBTWh5QixLQUFLeTZELGNBQWN4aEUsS0FBSytHLE9BQ3pEaWEsS0FBS3ZhLEtBQUsscUJBQXFCc3lCLE1BQU1oeUIsS0FBSzA2RCxtQkFBbUJ6aEUsS0FBSytHLE9BQ2xFaWEsS0FBS3ZhLEtBQUssY0FBY2k3RCxTQUFTMzZELEtBQUs0NkQsZ0JBQWdCM2hFLEtBQUsrRyxPQUMzRGlhLEtBQUt2YSxLQUFLLGFBQWFzeUIsTUFBTWh5QixLQUFLNjZELFVBQVU1aEUsS0FBSytHLE9BQ2pEaWEsS0FBS3ZhLEtBQUssa0JBQWtCc3lCLE9BQU16MUIsT0FBU3lELEtBQUs4NkQsZ0JBQWdCditELFNBQ2hFMGQsS0FBS3ZhLEtBQUssa0JBQWtCd2EsR0FBRyxlQUFlM2QsT0FBU3lELEtBQUs4NkQsZ0JBQWdCditELFNBR3hFeUQsS0FBSy9GLE1BQU11L0IsVUFBYXg1QixLQUFLL0YsTUFBTXU2RCxZQUFZcnJELFNBQ2pEOFEsS0FBS3ZhLEtBQUssU0FBU3N5QixNQUFNaHlCLEtBQUsrNkQsZUFBZTloRSxLQUFLK0csT0FDbERpYSxLQUFLdmEsS0FBSyxTQUFTc3lCLE1BQU1oeUIsS0FBS2c3RCxlQUFlL2hFLEtBQUsrRyxPQUNsRGlhLEtBQUt2YSxLQUFLLFlBQVlzeUIsTUFBTWh5QixLQUFLaTdELGtCQUFrQmhpRSxLQUFLK0csT0FDeERpYSxLQUFLdmEsS0FBSyxnQkFBZ0JzeUIsTUFBTWh5QixLQUFLazdELGNBQWNqaUUsS0FBSytHLFFBSXREQSxLQUFLL0YsTUFBTXUvQixjQUE0QyxJQUExQng1QixLQUFLL0YsTUFBTXU2RCxXQUE0QixDQUN0RSxHQUFJbDNELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUFvQixDQUMzQzhDLEtBQUttN0QsUUFBT243RCxLQUFLbTdELE1BQVEsSUFFOUIsTUFBTUMsU0FBVyxDQUNmbHRELEdBQUksYUFDSnlMLFFBQVMsWUFDVHM5QyxRQUFTLENBQ1AsQ0FDRXQ5QyxRQUFTLE9BQ1R4TCxNQUFPLENBQ0wsQ0FBRWhSLE9BQVEsT0FBUUUsTUFBTyxRQUN6QixDQUFFRixPQUFRLGVBQWdCRSxNQUFPLGdCQUNqQyxDQUFFRixPQUFRLGdCQUFpQkUsTUFBTyxtQkFHdEMsQ0FDRXNjLFFBQVMsU0FDVHk4QyxXQUFZLEtBQ1pqb0QsTUFBTyxDQUNMLENBQ0U5USxNQUFPLENBQUVJLEtBQU0sY0FBZTQzQyxLQUFNLFFBQ3BDbWhCLFFBQVMsQ0FDUHJvRCxNQUFPLENBQ0wsQ0FBRWhSLE9BQVEsWUFBYUUsTUFBTyxxQkFDOUIsQ0FBRUYsT0FBUSxZQUFhRSxNQUFPLGdCQUM5QixDQUFFRixPQUFRLG9CQUFxQkUsTUFBTyx5QkFJNUMsQ0FBRUYsT0FBUSxlQUFnQkUsTUFBTyxvQkFNbkNnK0QsUUFBVSxDQUNkbnRELEdBQUksV0FDSnlMLFFBQVMsWUFDVHM5QyxRQUFTLENBQ1AsQ0FDRXQ5QyxRQUFTLE9BQ1R4TCxNQUFPLENBQ0wsQ0FBRWhSLE9BQVEsWUFBYUUsTUFBTyxhQUM5QixDQUFFRixPQUFRLE9BQVFFLE1BQU8sUUFDekIsQ0FBRUYsT0FBUSxlQUFnQkUsTUFBTyxnQkFDakMsQ0FBRUYsT0FBUSxnQkFBaUJFLE1BQU8sbUJBR3RDLENBQ0VzYyxRQUFTLFNBQ1R5OEMsV0FBWSxVQUNaam9ELE1BQU8sQ0FDTCxDQUFFaFIsT0FBUSxlQUFnQkUsTUFBTyxnQkFDakMsQ0FDRUEsTUFBTyxDQUFFSSxLQUFNLGNBQWU0M0MsS0FBTSxRQUNwQ21oQixRQUFTLENBQ1Byb0QsTUFBTyxDQUNMLENBQUVoUixPQUFRLFlBQWFFLE1BQU8scUJBQzlCLENBQUVGLE9BQVEsWUFBYUUsTUFBTyxnQkFDOUIsQ0FBRUYsT0FBUSxvQkFBcUJFLE1BQU8sc0JBQ3RDLENBQUVGLE9BQVEsaUJBQWtCRSxNQUFPLG9CQVMzQ2krRCxnQkFBa0IsSUFBSWhHLGdCQUM1QmdHLGdCQUFnQnJpRSxLQUFLbWlFLFNBQVVuaEQsS0FBTWphLEtBQUt1N0Qsb0JBQW9CdGlFLEtBQUsrRyxPQUNuRUEsS0FBS203RCxNQUFNamtFLEtBQUtva0UsaUJBRWhCLE1BQU1FLGVBQWlCLElBQUlsRyxnQkFDM0JrRyxlQUFldmlFLEtBQUtvaUUsUUFBU3BoRCxLQUFNamEsS0FBS3U3RCxvQkFBb0J0aUUsS0FBSytHLE9BQ2pFQSxLQUFLbTdELE1BQU1qa0UsS0FBS3NrRSxlQUNsQixNQUNFdmhELEtBQ0d2YSxLQUFLLHlCQUNMazJELFlBQVk1MUQsS0FBS3k3RCxlQUFleGlFLEtBQUsrRyxPQUN4Q2lhLEtBQ0d2YSxLQUFLLHdCQUNMazJELFlBQVk1MUQsS0FBS3k3RCxlQUFleGlFLEtBQUsrRyxPQUN4Q2lhLEtBQ0d2YSxLQUFLLDZCQUNMazJELFlBQVk1MUQsS0FBS3k3RCxlQUFleGlFLEtBQUsrRyxPQUkxQ2lhLEtBQ0d2YSxLQUFLLHlCQUNMc3lCLE1BQU1oeUIsS0FBSzA3RCx5QkFBeUJ6aUUsS0FBSytHLE9BQzVDaWEsS0FBS3ZhLEtBQUssd0JBQXdCc3lCLE1BQU1oeUIsS0FBSzI3RCxpQkFBaUIxaUUsS0FBSytHLE9BQ25FaWEsS0FBS3ZhLEtBQUssZ0JBQWdCc3lCLE1BQU1oeUIsS0FBSzI3RCxpQkFBaUIxaUUsS0FBSytHLE9BQzNEaWEsS0FDR3ZhLEtBQUssNkJBQ0xzeUIsTUFBTWh5QixLQUFLNDdELGtCQUFrQjNpRSxLQUFLK0csT0FFckNpYSxLQUNHdmEsS0FBSyxzQkFDTHdhLEdBQUcsWUFBYWxhLEtBQUs2N0Qsa0JBQWtCNWlFLEtBQUsrRyxPQUUvQ2lhLEtBQ0d2YSxLQUFLLHlCQUNMd2EsR0FBRyxhQUFhM2QsT0FBU3lELEtBQUs4N0Qsc0JBQXNCdi9ELFNBQ3ZEMGQsS0FDR3ZhLEtBQUssb0JBQ0x3YSxHQUFHLGFBQWEzZCxPQUFTeUQsS0FBSys3RCxpQkFBaUJ4L0QsU0FDbEQwZCxLQUNHdmEsS0FBSyxjQUNMd2EsR0FBRyxhQUFhM2QsT0FBU3lELEtBQUtnOEQsZ0JBQWdCei9ELFNBRWpEMGQsS0FDR3ZhLEtBQUsseUJBQ0xrMkQsWUFBWTUxRCxLQUFLeTdELGVBQWV4aUUsS0FBSytHLE9BRXhDaWEsS0FDR3ZhLEtBQUssd0JBQ0xzeUIsTUFBTWh5QixLQUFLaThELDJCQUEyQmhqRSxLQUFLK0csT0FDOUNpYSxLQUNHdmEsS0FBSywyQkFDTHN5QixNQUFNaHlCLEtBQUtrOEQsOEJBQThCampFLEtBQUsrRyxPQUNqRGlhLEtBQUt2YSxLQUFLLGtCQUFrQnN5QixNQUFNaHlCLEtBQUt1aUIsVUFBVXRwQixLQUFLK0csUUFHbEQxQyxLQUFLc0csS0FBSzJFLE1BQVFqTCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDOUMrYyxLQUFLdmEsS0FBSyxrQkFBa0JzeUIsTUFBTWh5QixLQUFLbThELGdCQUFnQmxqRSxLQUFLK0csT0FDNURpYSxLQUNHdmEsS0FBSyxzQkFDTHN5QixNQUFNaHlCLEtBQUtvOEQsbUJBQW1CbmpFLEtBQUsrRyxPQUN0Q2lhLEtBQUt2YSxLQUFLLGFBQWFzeUIsTUFBTWh5QixLQUFLcThELEtBQUtwakUsS0FBSytHLE9BQzVDaWEsS0FBS3ZhLEtBQUssWUFBWXN5QixNQUFNaHlCLEtBQUtzOEQsT0FBT3JqRSxLQUFLK0csUUFHL0NpYSxLQUFLdmEsS0FBSyxnQkFBZ0JzeUIsTUFBTWh5QixLQUFLdThELGNBQWN0akUsS0FBSytHLE9BRXhEaWEsS0FBS3ZhLEtBQUsscUJBQXFCc3lCLE9BQU16MUIsT0FBU3lELEtBQUt3OEQsWUFBWWpnRSxTQUMvRDBkLEtBQ0d2YSxLQUFLLHlCQUNMc3lCLE9BQU16MUIsT0FBU3lELEtBQUt5OEQsY0FBY2xnRSxTQUNyQzBkLEtBQ0d2YSxLQUFLLDBCQUNMc3lCLE9BQU16MUIsT0FBU3lELEtBQUswOEQsVUFBVW5nRSxTQWVqQzBkLEtBQ0d2YSxLQUFLLDBCQUNMc3lCLE9BQU0xdkIsYUFBZXRDLEtBQUsyOEQsbUJBQW1CcGdFLFNBQ2hEMGQsS0FBS0MsR0FBRyxRQUFTLGlCQUFrQmxhLEtBQUs0OEQsZ0JBQWdCM2pFLEtBQUsrRyxPQUU3RCxNQUFNNjhELFlBQWM1aUQsS0FBS3ZhLEtBQUssb0JBQzlCLElBQUssTUFBTW85RCxjQUFjRCxZQUN2QkMsV0FBV0MsaUJBQWlCLFNBQVN4Z0UsT0FBU3lELEtBQUtnOUQsU0FBU3pnRSxRQUFRLENBQ2xFNkQsU0FBUyxHQUdmLENBR0tKLEtBQUtWLFFBQVFxekQsV0FFbEIxNEMsS0FBS3ZhLEtBQUssZ0JBQWdCc3lCLE9BQU16MUIsT0FBU3lELEtBQUtpOUQsZUFBZTFnRSxTQUM3RDBkLEtBQUt2YSxLQUFLLGVBQWVzeUIsTUFBTWh5QixLQUFLazlELGFBQWFqa0UsS0FBSytHLE9BR3REaWEsS0FBS3ZhLEtBQUssZ0JBQWdCaTdELFVBQVNwK0QsT0FBU3lELEtBQUttOUQsbUJBQW1CNWdFLFNBQ3BFMGQsS0FBS3ZhLEtBQUssY0FBY3N5QixPQUFNejFCLE9BQVN5RCxLQUFLbTlELG1CQUFtQjVnRSxTQUcvRDBkLEtBQUt2YSxLQUFLLGdCQUFnQnN5QixPQUFNMXZCLFdBQzlCLE1BQU0xRixHQUFLa3ZCLEVBQUVzeEMsR0FBR3pnRSxlQUFlMGdFLFFBQVEsU0FDakNDLGFBQWV0OUQsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSU4sR0FBRzBJLEtBQUssVUFBVyxDQUMzRGk0RCxRQUFRLFVBRUpELGFBQWFyL0QsU0FDbkJyQixHQUFHNGdFLFFBQVEsS0FBSyxJQUFNeDlELEtBQUtoQyxRQUFPLElBQU0sSUFHMUNpYyxLQUFLdmEsS0FBSyxhQUFhc3lCLE9BQU1vckMsS0FFM0IsT0FEQUEsR0FBR0ssa0JBQ0tMLEdBQUd6Z0UsY0FBY0ksUUFBUXNCLE1BQy9CLElBQUssT0FDSDJCLEtBQUsvRixNQUFNbzhDLGdCQUFnQittQixJQUMzQixNQUNGLElBQUssT0FDSHA5RCxLQUFLL0YsTUFBTTI4QyxnQkFBZ0J3bUIsSUFDM0IsTUFDRixJQUFLLFFBQ0hwOUQsS0FBSy9GLE1BQU0wOEMsaUJBQWlCeW1CLElBQzVCLE1BQ0YsSUFBSyxRQUNIcDlELEtBQUsvRixNQUFNdThDLGlCQUFpQjRtQixJQUM1QixNQUNGLElBQUssU0FDSCxDQUNFLE1BQU12MkQsV0FBYSxDQUFDLEVBQ2hCdTJELEdBQUd6Z0UsY0FBY0ksUUFBUXBGLE1BQzNCa1AsV0FBV2xQLE9BQVEsRUFDVnlsRSxHQUFHemdFLGNBQWNJLFFBQVFuRixPQUNsQ2lQLFdBQVdqUCxNQUFPLEdBRXBCb0ksS0FBSy9GLE1BQU00OEMsa0JBQWtCdW1CLEdBQUl2MkQsV0FDbkMsRUFFSixJQU9Gb1QsS0FBS3ZhLEtBQUssZUFBZXN5QixNQUFNaHlCLEtBQUswOUQsYUFBYXprRSxLQUFLK0csT0FFdERpYSxLQUFLdmEsS0FBSyxvQkFBb0JzeUIsT0FBTSxLQUNsQ2h5QixLQUFLL0YsTUFBTTY4QyxtQkFDWDkyQyxLQUFLaEMsUUFBTyxJQUdkaWMsS0FBS3ZhLEtBQUssbUJBQW1Cc3lCLE9BQU1vckMsS0FDakMsTUFBTS8vQyxNQUFRcFosU0FDWm01RCxHQUFHemdFLGNBQWNFLFFBQVEsZ0JBQWdCRSxRQUFRc2dCLE9BRW5EcmQsS0FBSy9GLE1BQU1rOUMsaUJBQWlCOTVCLE1BQUssSUFHbkNwRCxLQUFLdmEsS0FBSyxvQkFBb0JzeUIsT0FBTW9yQyxLQUNsQyxNQUFNLy9DLE1BQVFwWixTQUNabTVELEdBQUd6Z0UsY0FBY0UsUUFBUSxnQkFBZ0JFLFFBQVFzZ0IsT0FFbkRyZCxLQUFLL0YsTUFBTW05QyxpQkFBaUIvNUIsTUFBSyxJQUduQ3BELEtBQUt2YSxLQUFLLHNCQUFzQnN5QixPQUFNb3JDLEtBQ3BDLE1BQU0vL0MsTUFBUXBaLFNBQ1ptNUQsR0FBR3pnRSxjQUFjRSxRQUFRLGdCQUFnQkUsUUFBUXNnQixPQUVuRHJkLEtBQUsvRixNQUFNbzlDLG1CQUFtQmg2QixNQUFLLElBR3JDcEQsS0FBS3ZhLEtBQUsscUJBQXFCaTdELFVBQVN5QyxLQUN6QnA5RCxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUM1QmtnRSxHQUFHemdFLGNBQWNFLFFBQVEsU0FBU0UsUUFBUXVYLFFBRXZDM0wsZUFBZSxlQUFjLElBR3BDc1IsS0FBS3ZhLEtBQUssb0NBQW9Dc3lCLE9BQU1vckMsS0FDckNwOUQsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFDNUJrZ0UsR0FBR3pnRSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF1WCxRQUV2QzNMLGVBQWUsYUFBWSxJQUdsQ3NSLEtBQUt2YSxLQUFLLG1DQUFtQ3N5QixPQUFNb3JDLEtBQ3BDcDlELEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQzVCa2dFLEdBQUd6Z0UsY0FBY0UsUUFBUSxTQUFTRSxRQUFRdVgsUUFFdkMzTCxlQUFlLFlBQVcsSUFHakNzUixLQUFLdmEsS0FBSyx1QkFBdUJzeUIsT0FBTXoxQixRQUNyQ3lELEtBQUsvRixNQUFNNm5ELGtCQUFrQnZsRCxNQUFNNnlCLFNBQVEsSUFHN0NuVixLQUFLdmEsS0FBSyxxQkFBcUJzeUIsT0FBTXoxQixRQUM5QkEsTUFBTW9oRSxRQUEyQixJQUFqQnBoRSxNQUFNb2hFLFFBQ3pCMzlELEtBQUsvRixNQUFNMG9ELFlBQVlwbUQsTUFBTTZ5QixTQUMvQixJQUdGblYsS0FBS3ZhLEtBQUsscUJBQXFCc3lCLE9BQU16MUIsUUFDbkMsUUFBNEMsSUFBakN5RCxLQUFLL0YsTUFBTThCLE9BQU9vbkQsV0FBNEIsQ0FDdkQsTUFBTXlhLFFBQVUsQ0FBQyxFQUNqQixJQUFLLE1BQU10RCxhQUFhdDZELEtBQUsvRixNQUFNOEIsT0FBT29uRCxnQkFHcEMsSUFES25qRCxLQUFLL0YsTUFBTThCLE9BQU9vbkQsV0FBV21YLFdBQVdwa0UsUUFFRyxJQUFsRDhKLEtBQUsvRixNQUFNOEIsT0FBT29uRCxXQUFXbVgsV0FBV3BrRSxRQUV4QzBuRSxRQUFRLHFCQUFxQnRELG9CQUFxQixHQUdsRDE2RCxPQUFPbUUsS0FBSzY1RCxTQUFTaDlELE9BQVMsR0FDaENaLEtBQUsvRixNQUFNaUUsT0FBTzAvRCxRQUV0QixDQUNBLE1BQU0zZ0UsUUFBVStDLEtBQUsvRixNQUFNZ0QsUUFBUStHLEtBQUlsSCxRQUFVQSxPQUFPb1IsS0FDcERqUixRQUFRMkQsT0FBUyxHQUNuQlosS0FBSy9GLE1BQU02cEQsd0JBQXdCLGVBQWdCN21ELFFBQ3JELElBTUZnZCxLQUFLdmEsS0FBSyxpQkFBaUJzeUIsT0FBTTF2QixjQUMvQixJQUFLaEYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBQWtCLE9BQU8sUUFvQjFEK2MsS0FDR3ZhLEtBQUssd0JBQ0xtK0QsV0FBVzc5RCxLQUFLODlELGtCQUFrQjdrRSxLQUFLK0csT0FDdkN1dUMsV0FBV2p4QyxLQUFLK2hELGFBQWEwZSxhQUFhOWtFLEtBQUsrRyxPQUNsRGlhLEtBQ0d2YSxLQUFLLHlCQUNMbStELFdBQVc3OUQsS0FBS2crRCwyQkFBMkIva0UsS0FBSytHLE9BQ2hEdXVDLFdBQVdqeEMsS0FBSytoRCxhQUFhMGUsYUFBYTlrRSxLQUFLK0csT0FDbERpYSxLQUNHdmEsS0FBSyw2QkFDTG0rRCxXQUFXNzlELEtBQUtpK0Qsc0JBQXNCaGxFLEtBQUsrRyxPQUMzQ3V1QyxXQUFXanhDLEtBQUsraEQsYUFBYTBlLGFBQWE5a0UsS0FBSytHLE9BQ2xEaWEsS0FDR3ZhLEtBQUssZ0JBQ0xtK0QsV0FBVzc5RCxLQUFLaytELGlCQUFpQmpsRSxLQUFLK0csT0FDdEN1dUMsV0FBV2p4QyxLQUFLK2hELGFBQWEwZSxhQUFhOWtFLEtBQUsrRyxPQUNsRGlhLEtBQ0d2YSxLQUFLLGtDQUNMbStELFdBQVc3OUQsS0FBS20rRCwwQkFBMEJsbEUsS0FBSytHLE9BQy9DdXVDLFdBQVdqeEMsS0FBSytoRCxhQUFhMGUsYUFBYTlrRSxLQUFLK0csT0FHbERpYSxLQUNHdmEsS0FBSyxtQkFDTHN5QixPQUFNb3JDLElBQU0zaEUsaUJBQWlCYSxxQkFBcUI4Z0UsR0FBSXA5RCxLQUFLL0YsU0FDaEUsQ0FFQSxpQkFBQTZqRSxDQUFtQnZoRSxPQUNqQixNQUFNNmhFLE1BQVFuNkQsU0FBUzNHLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUM3Q2toRSxNQUFRLElBQ1Y5Z0UsS0FBSytoRCxhQUFhQyxhQUFlL2lELE1BQU1JLGNBQ3ZDVyxLQUFLK2hELGFBQWFnZixhQUFlNThDLFlBQVcsS0FDMUMsTUFBTWkrQixRQUFVcGlELEtBQUtxUCxPQUFPM0csY0FBY281QyxvQkFDMUIsSUFBWk0sU0FDRnBpRCxLQUFLK2hELGFBQWFpZixlQUFlNWUsUUFDbkMsR0FDQzBlLE9BRVAsQ0FFQSwwQkFBQUosQ0FBNEJ6aEUsT0FDMUIsTUFBTTZoRSxNQUFRbjZELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDakQsR0FBSWtoRSxNQUFRLEVBQUcsQ0FDYixNQUFNcmdFLE1BQVFpQyxLQUNkMUMsS0FBSytoRCxhQUFhQyxhQUFlL2lELE1BQU1JLGNBQ3ZDVyxLQUFLK2hELGFBQWFnZixhQUFlNThDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkNua0IsS0FBSytoRCxhQUFhQyxjQUNVLE9BQW5DaGlELEtBQUsraEQsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNbGUsS0FBTzlqQyxLQUFLK2hELGFBQWFDLGFBQWF6aUQsUUFBUSxhQUNwRCxRQUFvQixJQUFUdWtDLE1BQTBCQSxLQUFNLENBQ3pDLE1BQU1tOUIsT0FBU245QixLQUFLcmtDLFFBQVE0WixlQUN0QkEsZUFBaUI1WSxNQUFNOUQsTUFBTTJwQixnQkFBZ0IyNkMsUUFDbkQsSUFBSTdlLFFBQVVwaUQsS0FBS0MsS0FBSzBXLE9BQU8sb0JBQXFCLENBQ2xEaE0sTUFBTzBPLGVBQWV0WixNQUN0QjJXLFFBQVMyQyxlQUFlemdCLE9BQVMsRUFDakNnZSxLQUFNeUMsZUFBZXpDLE1BQVEsRUFDN0I3SixRQUFTc00sZUFBZXRNLFNBQVcsSUFFakMvTSxLQUFLc0csS0FBSzJFLE9BQ1ptM0MsU0FFRXBpRCxLQUFLQyxLQUFLMFcsT0FBTywwQkFBMkIsQ0FDMUMzYSxNQUNFZ0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCYSxNQUFNOUQsTUFBTStqQyxlQUNSMWdDLEtBQUtDLEtBQUswVyxPQUFPLGlDQUFrQyxDQUNuRDdkLEtBQU0ySCxNQUFNOUQsTUFBTTdELE9BRWxCLE1BR1prSCxLQUFLK2hELGFBQWFpZixlQUFlNWUsUUFDbkMsQ0FDRixDQUNGLEdBQUcwZSxNQUNMLENBQ0YsQ0FFQSxxQkFBQUgsQ0FBdUIxaEUsT0FDckIsTUFBTTZoRSxNQUFRbjZELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDakQsR0FBSWtoRSxNQUFRLEVBQUcsQ0FDYixNQUFNcmdFLE1BQVFpQyxLQUNkMUMsS0FBSytoRCxhQUFhQyxhQUFlL2lELE1BQU1JLGNBQ3ZDVyxLQUFLK2hELGFBQWFnZixhQUFlNThDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkNua0IsS0FBSytoRCxhQUFhQyxjQUNVLE9BQW5DaGlELEtBQUsraEQsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNemhCLE9BQVN2Z0MsS0FBSytoRCxhQUFhQyxhQUFhemlELFFBQVEsY0FDdEQsUUFBc0IsSUFBWGdoQyxPQUF3QixDQUNqQyxNQUFNMmdDLFlBQWMzZ0MsT0FBTzlnQyxRQUFROGdDLE9BQ25DLElBQUk2aEIsUUFBVSxHQUNkLE1BQU0rZSxXQUFhMWdFLE1BQU05RCxNQUFNOEIsT0FBT0MsUUFBUXdpRSxhQUM5QyxPQUFRQSxhQUNOLElBQUssTUFDSDllLFFBQVVwaUQsS0FBS0MsS0FBSzBXLE9BQU8sb0JBQXFCLENBQzlDaE0sTUFBT3cyRCxXQUFXcGhFLE1BQ2xCMlcsUUFBU3lxRCxXQUFXdm9FLE9BQVMsRUFDN0JnZSxLQUFNOVIsS0FBSzBJLE9BQU8yekQsV0FBV3ZvRSxPQUFTLEdBQUssR0FDM0NtVSxRQUFTakksS0FBSzBJLE9BQU8yekQsV0FBV3ZvRSxPQUFTLEdBQUssS0FFNUNvSCxLQUFLc0csS0FBSzJFLE9BQ1ptM0MsU0FFRXBpRCxLQUFLQyxLQUFLMFcsT0FBTywwQkFBMkIsQ0FDMUMzYSxNQUNFZ0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzFCYSxNQUFNOUQsTUFBTStqQyxlQUNSMWdDLEtBQUtDLEtBQUswVyxPQUFPLGlDQUFrQyxDQUNuRDdkLEtBQU0ySCxNQUFNOUQsTUFBTTdELE9BRWxCLE1BR1prSCxLQUFLK2hELGFBQWFpZixlQUFlNWUsU0FDakMsTUFDRixJQUFLLEtBQ0hBLFFBQVVwaUQsS0FBS0MsS0FBS0MsU0FBUyxrQkFDN0JGLEtBQUsraEQsYUFBYWlmLGVBQWU1ZSxTQUNqQyxNQUNGLElBQUssTUFDSEEsUUFBVXBpRCxLQUFLQyxLQUFLMFcsT0FBTyxxQkFBc0IsQ0FDL0NoTSxNQUFPLFNBQ1ArTCxRQUFTeXFELFdBQVd2b0UsT0FBUyxFQUM3QmdlLEtBQU05UixLQUFLMEksT0FBTzJ6RCxXQUFXdm9FLE9BQVMsR0FBSyxHQUMzQ21VLFFBQVNqSSxLQUFLMEksT0FBTzJ6RCxXQUFXdm9FLE9BQVMsR0FBSyxLQUU1Q29ILEtBQUtzRyxLQUFLMkUsT0FDWm0zQyxTQUVFcGlELEtBQUtDLEtBQUswVyxPQUFPLDBCQUEyQixDQUMxQzNhLE1BQ0VnRSxLQUFLQyxLQUFLQyxTQUFTLDZCQUNsQkYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQzNCYSxNQUFNOUQsTUFBTStqQyxlQUNSMWdDLEtBQUtDLEtBQUswVyxPQUFPLGlDQUFrQyxDQUNuRDdkLEtBQU0ySCxNQUFNOUQsTUFBTTdELE9BRWxCLE9BR1prSCxLQUFLK2hELGFBQWFpZixlQUFlNWUsU0FHdkMsQ0FDRixDQUNGLEdBQUcwZSxNQUNMLENBQ0YsQ0FFQSxnQkFBQUYsQ0FBa0IzaEUsT0FDaEIsTUFBTTZoRSxNQUFRbjZELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDN0NraEUsTUFBUSxJQUNWOWdFLEtBQUsraEQsYUFBYUMsYUFBZS9pRCxNQUFNSSxjQUN2Q1csS0FBSytoRCxhQUFhZ2YsYUFBZTU4QyxZQUFXLFdBQzFDLFFBQzRDLElBQW5DbmtCLEtBQUsraEQsYUFBYUMsY0FDVSxPQUFuQ2hpRCxLQUFLK2hELGFBQWFDLGFBQ2xCLENBQ0EsTUFBTUksUUFBVXBpRCxLQUFLQyxLQUFLQyxTQUFTLDBCQUNuQ0YsS0FBSytoRCxhQUFhaWYsZUFBZTVlLFFBQ25DLENBQ0YsR0FBRzBlLE9BRVAsQ0FFQSx5QkFBQUQsQ0FBMkI1aEUsT0FDekIsTUFBTTZoRSxNQUFRbjZELFNBQVMzRyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFDakQsR0FBSWtoRSxNQUFRLEVBQUcsQ0FDYixNQUFNcmdFLE1BQVFpQyxLQUNkMUMsS0FBSytoRCxhQUFhQyxhQUFlL2lELE1BQU1JLGNBQ3ZDVyxLQUFLK2hELGFBQWFnZixhQUFlNThDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkNua0IsS0FBSytoRCxhQUFhQyxjQUNVLE9BQW5DaGlELEtBQUsraEQsYUFBYUMsYUFDbEIsQ0FDQSxNQUFNcjVDLEtBQU8zSSxLQUFLK2hELGFBQWFDLGFBQWF6aUQsUUFBUSxTQUNwRCxRQUFvQixJQUFUb0osS0FBc0IsQ0FDL0IsTUFBTXNPLFFBQVV0TyxLQUFLbEosUUFBUXdYLFFBQ3ZCdE0sTUFBUWxLLE1BQU05RCxNQUFNa1UsTUFBTWpSLElBQUlxWCxTQUM5Qm1yQyxRQUFVcGlELEtBQUtDLEtBQUswVyxPQUFPLDhCQUErQixDQUM5RDlaLE9BQVFtRCxLQUFLQyxLQUFLQyxTQUNoQnlLLE1BQU1sTSxPQUFPbUQsTUFBTWcvQyxhQUNmLDJCQUNBLGdDQUdSNWdELEtBQUsraEQsYUFBYWlmLGVBQWU1ZSxRQUNuQyxDQUNGLENBQ0YsR0FBRzBlLE1BQ0wsQ0FDRixDQUVBLG1CQUFBN0MsQ0FBcUJoL0QsTUFBTzBvQixRQUMxQixNQUFNeTVDLFdBQWF6NUMsT0FBT2xvQixTQUFTMmhFLFdBQzdCQyxZQUFjLENBQ2xCaGhDLGdCQUFnQixFQUNoQmxaLGFBQWEsRUFDYnhxQixNQUFPK0YsS0FBSy9GLE9BRWQsT0FBUXlrRSxZQUNOLElBQUssUUFDSEMsWUFBWXpvRCxTQUFXcWUsZ0JBQWdCbUksZ0JBQ3ZDaWlDLFlBQVlwcUQsUUFBVTBRLE9BQU9wb0IsUUFBUSxVQUFVRSxRQUFRd1gsUUFFdkQsTUFDRixJQUFLLGlCQUNIb3FELFlBQVl6b0QsU0FBV3FlLGdCQUFnQmlJLHlCQUN2Q21pQyxZQUFZaG9ELGVBQWlCc08sT0FBT3BvQixRQUFRLGFBQWFFLFFBQVE0WixlQUNqRSxNQUVGLElBQUssWUFDSGdvRCxZQUFZem9ELFNBQVdxZSxnQkFBZ0JnSSxvQkFDdkNvaUMsWUFBWTM5QyxVQUFZaUUsT0FBT3BvQixRQUFRLGNBQWNFLFFBQVE4Z0MsT0FHakUsT0FBUXRoQyxNQUFNSSxjQUFjSSxRQUFRSSxRQUNsQyxJQUFLLE9BQ0h3aEUsWUFBWXZxQyxTQUFXRyxnQkFBZ0J1SSxpQkFDdkMsTUFDRixJQUFLLGVBQ0g2aEMsWUFBWXZxQyxTQUFXRyxnQkFBZ0J3SSxrQkFDdkMsTUFDRixJQUFLLGdCQUNINGhDLFlBQVl2cUMsU0FBV0csZ0JBQWdCcUksbUJBQ3ZDLE1BQ0YsSUFBSyxlQUNIK2hDLFlBQVl2cUMsU0FBV0csZ0JBQWdCdUksaUJBQ3ZDNmhDLFlBQVloaEMsZ0JBQWlCLEVBQzdCLE1BQ0YsSUFBSyxZQUNIZ2hDLFlBQVl2cUMsU0FBV0csZ0JBQWdCMEksZUFDdkMwaEMsWUFBWW5oQyxjQUFlLEVBQzNCLE1BQ0YsSUFBSyxZQUNIbWhDLFlBQVl2cUMsU0FBV0csZ0JBQWdCMEksZUFDdkMwaEMsWUFBWWxoQyxZQUFhLEVBQ3pCLE1BQ0YsSUFBSyxvQkFDSGtoQyxZQUFZdnFDLFNBQVdHLGdCQUFnQjBJLGVBQ3ZDMGhDLFlBQVlqaEMsaUJBQWtCLEVBQzlCLE1BQ0YsSUFBSyxpQkFDSGloQyxZQUFZdnFDLFNBQVdHLGdCQUFnQjBJLGVBQ3ZDMGhDLFlBQVlwaEMsaUJBQWtCLEVBQzlCLE1BQ0YsSUFBSyxZQUNIb2hDLFlBQVl2cUMsU0FBV0csZ0JBQWdCeUksb0JBQ3ZDMmhDLFlBQVl6b0QsU0FBV3FlLGdCQUFnQmdJLG9CQUN2Q29pQyxZQUFZbDZDLGFBQWMsRUFPOUI4UCxnQkFBZ0IwSixRQUFRMGdDLFlBQzFCLENBRUEsa0JBQUF4QixDQUFvQjVnRSxPQUNsQixNQUFNSyxHQUFLa3ZCLEVBQUV2dkIsTUFBTUksZUFBZTBnRSxRQUFRLFNBQzdCcjlELEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUlOLEdBQUcwSSxLQUFLLFdBQ3JDdkgsTUFBTUMsUUFBTyxFQUNwQixDQUVBLGtCQUFNMC9ELENBQWNuaEUsT0FDbEIsTUFBTUssR0FBS2t2QixFQUFFdnZCLE1BQU1JLGVBQWUwZ0UsUUFBUSxTQUNwQ3AzRCxLQUFPakcsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSU4sR0FBRzBJLEtBQUssV0FDMUMsSUFBSW1MLFFBQVUsTUFBUW5ULEtBQUtDLEtBQUtDLFNBQVMsa0NBQ3pDLE1BQU1zUyxRQUFVLENBQ2Q4dUQsVUFBVzUrRCxLQUFLL0YsTUFBTWlVLEdBQ3RCckIsTUFBTyxLQUNQZ3lELFFBQVM3K0QsS0FBSy9GLE1BQU1pVSxHQUNwQmpJLEtBQU1BLEtBQUtpSSxJQUVUbE8sS0FBS2lSLE9BQU9oWCxRQUNkNlYsUUFBUTh1RCxVQUFZNStELEtBQUtpUixNQUFNL0MsR0FDL0I0QixRQUFRakQsTUFBUTdNLEtBQUtpUixNQUFNbEgsT0FBT21FLElBRXBDLE1BQU12QixPQUFTclAsS0FBS3FQLE9BQU90VyxRQUFPbUssSUFDaEMsSUFBSyxDQUFDLFlBQWEsTUFBTyxXQUFZLGFBQWF3QyxTQUFTeEMsRUFBRW5DLE1BQzVELE9BQU8sRUFFVCxHQUFJMkIsS0FBSy9GLE1BQU1pVSxLQUFPMU4sRUFBRTBOLEdBQ3RCLE9BQU8sRUFFVCxJQUFJNHdELFNBQVUsRUFDZCxJQUFLLE1BQU81dkQsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRL0osRUFBRThhLFdBQzFCLFlBQU5wTSxHQUFtQkEsSUFBTTVSLEtBQUtzRyxLQUFLc0ssS0FDckM0d0QsUUFBVUEsU0FBV24vRCxJQUFNd1EsTUFBTXFMLDBCQUEwQnVqRCxNQUcvRCxPQUFPRCxXQUVUcnVELFNBQW9CLDZDQUNwQixJQUFLLE1BQU14VyxTQUFTMFMsT0FDbEI4RCxRQUNFQSxRQUFVLGtCQUFvQnhXLE1BQU1pVSxHQUFLLEtBQU9qVSxNQUFNN0QsS0FBTyxZQUVqRXFhLFNBQW9CLHVCQUNwQlgsUUFBUSt1RCxjQUFnQixJQUFJM2lELFNBQVFoQixVQUN0QixJQUFJdVosT0FBTyxDQUNyQi9sQixNQUFPcFIsS0FBS0MsS0FBS0MsU0FBUyx1Q0FDMUJpVCxRQUNBaWtCLFFBQVMsQ0FDUHdsQixRQUFTLENBQ1A3OEMsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxpQkFDMUJtM0IsU0FBVTFhLE9BQ1IsTUFBTTBZLFNBQVcsSUFBSWlDLFNBQ25CM2EsS0FBSyxHQUFHckcsY0FBYyxnQkFFeEIsSUFBSyxNQUFPeGQsS0FBTUYsU0FBVXk4QixTQUMxQixHQUFhLFNBQVR2OEIsS0FDRixPQUFPOGtCLFFBQVFobEIsTUFFbkIsSUFJTnFsQixRQUFTLFVBQ1RKLE1BQU8sU0FFTG5kLFFBQU8sRUFBSSxVQUVYVixLQUFLNjBDLFdBQVdDLFlBQVksZ0JBQWlCdGlDLFFBQ3JELENBRUEsWUFBQWt2RCxDQUFjemlFLE9BRVosR0FEQUYsTUFBTTJpRSxhQUFhemlFLE9BQ2Z5RCxLQUFLaVIsTUFBTyxDQUNkLE1BQU1ndUQsU0FBV3J3RCxLQUFLNGQsTUFBTWp3QixNQUFNOHhCLGFBQWE4QyxRQUFRLGVBQ3ZEOHRDLFNBQVM1ZCxVQUFZcmhELEtBQUtpUixNQUFNdFQsS0FDaENzaEUsU0FBU3p5RCxRQUFVeE0sS0FBS2lSLE1BQU0vQyxHQUM5Qit3RCxTQUFTeHlELFFBQVV6TSxLQUFLaVIsTUFBTWxILE9BQU9tRSxHQUNyQzNSLE1BQU04eEIsYUFBYUMsUUFBUSxhQUFjMWYsS0FBS0MsVUFBVW93RCxVQUMxRCxDQUNGLENBRUEscUJBQUFuRCxDQUF1QnYvRCxPQUNyQixNQUFNMmlFLElBQU0zaUUsTUFBTUksY0FBYzhkLGNBQzFCblYsS0FBTyxDQUNYNjVELFNBQVUsT0FDVnB4QyxTQUFVLGlCQUNWOVgsTUFBTyxRQUNQNVgsS0FBTSxXQUNOMi9CLGVBQWdCaCtCLEtBQUsvRixNQUFNK2pDLGVBQzNCNXNCLFNBQVVwUixLQUFLL0YsTUFBTW1YLFNBQ3JCaGIsS0FBTThvRSxJQUFJbmlFLFFBQVE0WixlQUNsQmxaLEtBQU0sS0FDTnFSLFNBQVUsQ0FDUnpRLEtBQU0yQixLQUFLOE8sU0FBU3pRLEtBQ3BCVixLQUFNcUMsS0FBSzhPLFNBQVNuUixPQUl4QnBCLE1BQU02eEIsY0FBY0MsYUFBYUMsUUFBUSxhQUFjMWYsS0FBS0MsVUFBVXZKLE1BQ3hFLENBRUEsZ0JBQUF5MkQsQ0FBa0J4L0QsT0FDaEIsTUFBTTJpRSxJQUFNM2lFLE1BQU1JLGNBQWM4ZCxjQUMxQm5WLEtBQU8sQ0FDWDY1RCxTQUFVLE9BQ1ZweEMsU0FBVSxZQUNWOVgsTUFBTyxRQUNQNVgsS0FBTSxXQUNOMi9CLGVBQWdCaCtCLEtBQUsvRixNQUFNK2pDLGVBQzNCNXNCLFNBQVVwUixLQUFLL0YsTUFBTW1YLFNBQ3JCaGIsS0FBTThvRSxJQUFJbmlFLFFBQVE4Z0MsT0FDbEJwZ0MsS0FBTSxLQUNOcVIsU0FBVSxDQUNSelEsS0FBTTJCLEtBQUs4TyxTQUFTelEsS0FDcEJWLEtBQU1xQyxLQUFLOE8sU0FBU25SLE9BSXhCcEIsTUFBTTZ4QixjQUFjQyxhQUFhQyxRQUFRLGFBQWMxZixLQUFLQyxVQUFVdkosTUFDeEUsQ0FFQSxlQUFBMDJELENBQWlCei9ELE9BQ2YsTUFBTXdxQixPQUFTeHFCLE1BQU1JLGNBQWNpWCxjQUFjLG1CQUMzQ2tULE9BQVN2cUIsTUFBTUksY0FBY2lYLGNBQWMscUJBQzNDdE8sS0FBTyxDQUNYNjVELFNBQVUsT0FDVnB4QyxTQUFVLFlBQ1Y5WCxNQUFPLFVBQ1ArbkIsZUFBZ0JoK0IsS0FBSy9GLE1BQU0rakMsZUFDM0I1c0IsU0FBVXBSLEtBQUsvRixNQUFNbVgsU0FDckIyVixPQUFRQSxPQUFPbUgsVUFDZnBILE9BQVFBLE9BQU9vSCxVQUNmendCLEtBQU0sS0FDTnFSLFNBQVUsQ0FDUnpRLEtBQU0yQixLQUFLOE8sU0FBU3pRLEtBQ3BCVixLQUFNcUMsS0FBSzhPLFNBQVNuUixPQUl4QnBCLE1BQU02eEIsY0FBY0MsYUFBYUMsUUFBUSxhQUFjMWYsS0FBS0MsVUFBVXZKLE1BQ3hFLENBRUEsYUFBTTR0QixDQUFTMzJCLE9BQ2IsTUFBTTQyQixXQUFhNTJCLE1BQU04eEIsYUFBYThDLFFBQVEsY0FDOUMsR0FBbUIsS0FBZmdDLFdBQ0YsT0FBTyxFQUVULE1BQU03dEIsS0FBT3NKLEtBQUs0ZCxNQUFNMkcsWUFDTixhQUFkN3RCLEtBQUtqSCxNQUNIaUgsS0FBSzJRLFFBQVUwVyxTQUFTQyxXQUFXSSxRQUNyQ0wsU0FBU3VDLGtCQUFrQmx2QixLQUFLL0YsTUFBT3FMLFlBR3JDakosTUFBTTYyQixRQUFRMzJCLE1BQ3RCLENBRUEsd0JBQU02L0QsQ0FBb0I3L0QsT0FDeEJBLE1BQU1FLGlCQUNGRixNQUFNSSxjQUFjSSxRQUFRdTlELGlCQUN4QnQ2RCxLQUFLL0YsTUFBTW9wRCxnQkFBZ0I5bUQsTUFBTUksY0FBY0ksUUFBUXU5RCxVQUVqRSxDQUVBLFlBQU1nQyxHQUNBaC9ELEtBQUtzRyxLQUFLMkUsTUFBTXZJLEtBQUsvRixNQUFNd3VCLGVBQWVsMEIsS0FBSzRGLE9BQU9PLEtBQzVELENBRUEsVUFBTTJoRSxHQUNBLytELEtBQUtzRyxLQUFLMkUsTUFBTXZJLEtBQUsvRixNQUFNd3VCLGVBQWVsMEIsS0FBSzRGLE9BQU9LLE1BQzVELENBRUEsbUJBQU0raEUsQ0FBZWhnRSxPQUNuQixNQUFNK2lDLFNBQVcsSUFBSUgsYUFDbkJuL0IsS0FBSy9GLE1BQU0yYyxRQUFVNVcsS0FBSy9GLE1BQU1zUyxTQUFXdk0sS0FBSy9GLE1BQU1pVSxJQUV4RG94QixTQUFTSyxXQUFZLEVBQ3JCTCxTQUFTbkosVUFBVTU1QixNQUFNNnlCLFNBQzNCLENBRUEsdUJBQU15c0MsQ0FBbUJ0L0QsT0FDdkIsTUFBTStJLEtBQU8sQ0FDWGpILEtBQU0sUUFDTlYsS0FBTXFDLEtBQUtpUixNQUFNdFQsTUFFbkJwQixNQUFNNnhCLGNBQWNDLGFBQWFDLFFBQVEsYUFBYzFmLEtBQUtDLFVBQVV2SixNQUN4RSxDQUVBLHFCQUFNNjJELENBQWlCNS9ELE9BQ3JCQSxNQUFNRSx1QkFDQXVELEtBQUsvRixNQUFNZ3FELGtCQUNuQixDQUVBLG1CQUFNaVgsQ0FBZTMrRCxPQUNuQixHQUFJQSxNQUFNSSxjQUFjRSxRQUFRLGNBQWUsQ0FDN0MsTUFBTWdoQyxPQUFTdGhDLE1BQU1JLGNBQWNFLFFBQVEsY0FBY0UsUUFBUThnQyxPQUNqRTc5QixLQUFLL0YsTUFBTXNrRCxpQkFBaUIxZ0IsT0FDOUIsQ0FDRixDQUVBLGVBQU10YixDQUFXaG1CLE9BQ2YsTUFBTXVvQixPQUFTOWtCLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQzlCWCxNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF1WCxRQUUzQ3dRLFFBQ0ZBLE9BQU96ZSxlQUNMOUosTUFBTUksY0FBY0ksUUFBUXd6QyxTQUM1Qm5oQyxVQUFVN1MsT0FHaEIsQ0FHQSxnQ0FBTTAvRCxTQUNFajhELEtBQUsvRixNQUFNdW5ELDBCQUNuQixDQUVBLG1DQUFNMGEsR0FDSmw4RCxLQUFLL0YsTUFBTXluRCw2QkFDYixDQUVBLG9CQUFNcVosQ0FBZ0J4K0QsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU0yaUUsU0FBV3AvRCxLQUFLL0YsTUFBTWtQLE9BQzVCbkosS0FBSy9GLE1BQU1rUCxRQUFVaTJELFNBQ3JCcGxCLE1BQU1uaEQsS0FBSyx1QkFBd0IsRUFBRXVtRSxVQUN2QyxDQUVBLG9CQUFNcEUsQ0FBZ0J6K0QsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU1tTSxTQUFXck0sTUFBTUksY0FBY0ksUUFBUXk0QixLQUM3Q3gxQixLQUFLL0YsTUFBTStrRCxnQkFBZ0JwMkMsU0FDN0IsQ0FFQSx1QkFBTXF5RCxDQUFtQjErRCxPQUN2QkEsTUFBTUUsaUJBQ051RCxLQUFLL0YsTUFBTStrRCxnQkFBZ0IsaUJBQzdCLENBRUEsY0FBTWdlLENBQVV6Z0UsT0FDZCxJQUFJckcsTUFBUStOLFNBQVMxSCxNQUFNSSxjQUFjekcsUUFBVSxLQVNuRCxPQVJJcUcsTUFBTThpRSxPQUFTLElBQ2pCbnBFLE1BQWtCLElBQVZBLE1BQWMsRUFBSUEsTUFBUSxHQUdoQ3FHLE1BQU04aUUsT0FBUyxJQUNqQm5wRSxPQUFnQixHQUdWcUcsTUFBTUksY0FBY3ZHLE1BQzFCLElBQUssMEJBWUwsSUFBSywrQkFDSDRKLEtBQUsvRixNQUFNd3JELE1BQU12dkQsT0FDakIsTUFYRixJQUFLLDBCQUNIOEosS0FBSy9GLE1BQU11akQsTUFBTXRuRCxPQUNqQixNQUNGLElBQUssMkJBQ0g4SixLQUFLL0YsTUFBTWdqRCxPQUFPL21ELE9BQ2xCLE1BQ0YsSUFBSywyQkFDSDhKLEtBQUsvRixNQUFNa2lELFFBQVFqbUQsT0FNekIsQ0FFQSxlQUFBMGtFLENBQWlCcitELE9BQ2ZBLE1BQU1JLGNBQWMyaUUsVUFBWS9pRSxNQUFNSSxjQUFjMmlFLFNBQ3BEL2lFLE1BQU1JLGNBQWNxUyxVQUFVMkwsT0FBTyxZQUN2QyxDQUVBLG9CQUFNc2lELENBQWdCMWdFLE9BQ3BCQSxNQUFNRSxpQkFDTixNQUFNRyxHQUFLa3ZCLEVBQUV2dkIsTUFBTUksZUFBZTBnRSxRQUFRLFNBQ3BDcDNELEtBQU9qRyxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUFJTixHQUFHMEksS0FBSyxZQUNwQ2pDLGVBQWlCNEMsS0FBS2tILFlBQVksQ0FBRW95RCxRQUFTdi9ELEtBQUsvRixNQUFNdS9CLFVBRzlELEdBQUk1OEIsR0FBRzRpRSxTQUFTLFlBQWEsQ0FDM0IsTUFBTUMsUUFBVTdpRSxHQUFHOGQsU0FBUyxpQkFDNUIra0QsUUFBUWpDLFFBQVEsS0FBSyxLQUNuQmlDLFFBQVF6OEMsU0FDUnBtQixHQUFHNGpDLFlBQVksV0FBVSxHQUU3QixLQUFPLENBQ0wsTUFBTWsvQixJQUFNNXpDLEVBQUUsb0NBRVJ2ZSxPQUFTdWUsRUFBRSxtQ0FDakIsSUFBSyxNQUFNbGUsS0FBS3ZLLFNBQVNrSyxPQUN2QkEsT0FBT3FrQyxPQUNMLG9EQUFvRGhrQyxFQUFFeFgsMENBQTBDd1gsRUFBRTFYLHNCQVN0RyxHQU5Bd3BFLElBQUk5dEIsT0FBT3JrQyxRQUVYbXlELElBQUk5dEIsT0FDRjlsQixFQUFFLGlDQUFpQ3pvQixTQUFTaUssWUFBWXBYLGdCQUd0RCtQLEtBQUtsSyxPQUFPOEssWUFBWXRPLEtBQU0sQ0FDaEMsTUFBTW9uRSxXQUFhN3pDLEVBQ2pCLDZCQUE2QnpvQixTQUFTaUssWUFBWXRXLGlCQUVwRDBvRSxJQUFJOXRCLE9BQU8rdEIsV0FDYixDQUVBLE1BQU1qeUQsTUFBUW9lLEVBQUUsdUNBQ2hCLElBQUssTUFBTWxlLEtBQUt2SyxTQUFTd0QsV0FDdkI2RyxNQUFNa2tDLE9BQ0osa0NBQWtDdDBDLEtBQUtDLEtBQUtDLFNBQVNvUSxZQUd6RDh4RCxJQUFJOXRCLE9BQU9sa0MsT0FFWDlRLEdBQUdnMUMsT0FBTzh0QixJQUFJRSxRQUNkRixJQUFJRyxVQUFVLEtBQUssSUFBTWpqRSxHQUFHNGpDLFlBQVksYUFDMUMsQ0FFRixDQUVBLHNCQUFNZzZCLENBQWtCaitELE9BQ3RCQSxNQUFNRSxpQkFLTixNQUFNdzZELFFBQVUxNkQsTUFBTUksY0FBY0UsUUFBUSxXQUN0Q2lqRSxZQUFjdmpFLE1BQU1JLGNBQWNJLFFBQVFnakUsT0FDaEQsUUFBMkIsSUFBaEJELFlBQTZCLE9BQ3hDLE1BQU1DLE9BQVNqMEMsRUFBRW1yQyxTQUFTdjNELEtBQUssV0FBV29nRSxlQUd0Q0MsT0FBT1AsU0FBUyxZQUVsQk8sT0FBT3ZDLFFBQVEsS0FBSyxJQUFNdUMsT0FBT3YvQixZQUFZLGNBRTdDdS9CLE9BQU9GLFVBQVUsS0FBSyxJQUFNRSxPQUFPdi9CLFlBQVksY0FHakQsTUFBTTRELFVBQVk1MEIsV0FBV0Msa0JBQWtCLGVBQWVxd0Qsd0JBRTlEOS9ELEtBQUsvRixNQUFNaUUsT0FDVCxDQUFFLENBQUNrbUMsWUFBYTI3QixPQUFPUCxTQUFTLGFBQ2hDLENBQUV4aEUsUUFBUSxHQUNkLENBRUEsa0JBQUEwOEQsQ0FBb0JuK0QsT0FDbEJBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtrdkIsRUFBRXZ2QixNQUFNSSxlQUFlZzRELFNBQVMsTUFDdkMvM0QsR0FBR29qRSxHQUFHLFlBQWFwakUsR0FBRzRnRSxRQUFRLEtBQzdCNWdFLEdBQUdpakUsVUFBVSxJQUNwQixDQUVBLGFBQUFwRixDQUFlbCtELE9BQ2JBLE1BQU1FLGlCQUNOLE1BQU13akUsR0FBS24wQyxFQUFFdnZCLE1BQU1JLGVBQWV1akUsS0FBSyxNQUNuQ0QsR0FBR0QsR0FBRyxZQUFhQyxHQUFHekMsUUFBUSxLQUM3QnlDLEdBQUdKLFVBQVUsSUFDcEIsQ0FFQSxrQkFBTTNDLENBQWMzZ0UsT0FDbEJBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtrdkIsRUFBRXZ2QixNQUFNSSxlQUFlMGdFLFFBQVEsU0FDcENwM0QsS0FBT2pHLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUlOLEdBQUcwSSxLQUFLLFlBRTFDK3hELGVBQWU4SSxXQUFXbDZELEtBQzVCLENBRUEsdUJBQWFrNkQsQ0FBWWw0RCxPQUN2QkEsTUFBTWxNLE9BQU91UixZQUFZOHlELG9CQUFzQjV5RCxXQUFXQyxXQUN4RHhGLE1BQU1sTSxPQUFPdVIsWUFBWXBYLE1BQ3pCLENBQUVvTSxPQUFPLElBRUMsSUFBSW15QixPQUNkLENBQ0UvbEIsTUFBT3BSLEtBQUtDLEtBQUtDLFNBQVMsMkJBQzFCaVQsUUFBU3hJLE1BQ1R5c0IsUUFBUyxDQUFDLEVBQ1Z2WixNQUFPLFFBRVQsQ0FDRXhCLFFBQVMsQ0FBQyxPQUFRLFFBQVMsU0FDM0JHLE1BQU8sSUFDUEMsT0FBUSxJQUNSc21ELFFBQVMsQ0FBQyxxQkFDVnptRCxTQUFVLG1EQUdWNWIsUUFBTyxFQUNiLENBTUEsaUJBQU13K0QsQ0FBYWpnRSxPQUNqQkEsTUFBTUUsZ0JBVVIsQ0FFQSxlQUFNaWdFLENBQVduZ0UsT0FDZkEsTUFBTUUsaUJBQ04sTUFBTU8sU0FBV1QsTUFBTUksY0FBY0UsUUFBUSxNQUFNRSxRQUFRQyxTQUNyREYsT0FBU2tELEtBQUsvRixNQUFNZ0QsUUFBUUMsSUFBSUYsVUFDbENvUyxVQUFVN1MsUUFBVWUsS0FBS3NHLEtBQUsyRSxNQUNoQ29uQixzQkFBc0JqZixPQUFPLENBQUVyUyxLQUFNLFdBQVk0WCxNQUFPMFcsU0FBU0MsV0FBV0ksT0FBUXpiLE9BQVF6VSxRQUVoRyxDQUVBLG1CQUFNMi9ELENBQWVsZ0UsT0FDbkJBLE1BQU1FLGlCQUNOLE1BQU02WCxPQUFTL1gsTUFBTUksY0FBY0UsUUFBUSxNQUFNRSxRQUFRdVgsT0FDbkRtUSxZQUFjbG9CLE1BQU02eUIsU0FDcEJ0SyxPQUFTOWtCLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUlvWCxRQUdwQyxJQUFJbEQsU0FZSixHQU5JQSxTQUxDcFIsS0FBS2lSLE1BSUpqUixLQUFLL0YsTUFBTTJjLFNBQVd0WixLQUFLcVAsT0FBT0MsT0FBTzVNLEtBQUtpUixNQUFNL0MsSUFDM0MsU0FBU2xPLEtBQUtpUixNQUFNL0MsS0FFcEIsR0FBR2xPLEtBQUtpUixNQUFNbEgsT0FBT21FLE1BQU1sTyxLQUFLaVIsTUFBTS9DLEtBUHpCbE8sS0FBSy9GLE1BQU1pVSxHQVduQ2tCLFVBQVU3UyxRQUFVZSxLQUFLc0csS0FBSzJFLEtBQU0sQ0FDdEMsTUFBTW9yQixTQUFXLENBQ2YxZCxNQUFPMFcsU0FBU0MsV0FBV0csS0FDM0IzMkIsS0FBTTB1QixPQUFPMXVCLE1BRWZ1NUIsc0JBQXNCamYsT0FBT2lqQixTQUFVLENBQUVobkIsT0FBUSxDQUFDM00sS0FBSy9GLFFBQ3pELEtBQU8sQ0FDTCxJQUFJcW1FLHFCQThCSixHQTdCSWhqRSxLQUFLc0csS0FBS29oQixRQUFRemxCLE1BQVEsSUFDNUIrZ0UsMkJBQTZCLElBQUlwa0QsU0FBUWhCLFVBQ3ZDLE1BQU01VixLQUFPLENBQ1hvSixNQUFPLElBQ1ArQixRQUFTblQsS0FBS0MsS0FBSzBXLE9BQU8sd0JBQXlCLENBQ2pENlEsT0FBUUEsT0FBTzF1QixPQUVqQnMrQixRQUFTLENBQ1A2ckMsT0FBUSxDQUNOOWlFLEtBQU0sK0JBQ05KLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsZUFDMUJtM0IsU0FBVSxJQUNEelosU0FBUSxJQUduQnNsRCxRQUFTLENBQ1AvaUUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxnQkFDMUJtM0IsU0FBVSxJQUNEelosU0FBUSxLQUlyQkssUUFBUyxTQUNUNUIsUUFBUyxDQUFDLE9BQVEsV0FFcEIsSUFBSThhLE9BQU9udkIsTUFBTXRILFFBQU8sRUFBSSxLQUc1QlYsS0FBS3NHLEtBQUtvaEIsUUFBUXpsQixLQUFPLEdBQUsrZ0UscUJBQXNCLENBQ3RELElBQUt4N0MsT0FBTy9vQixPQUFPOEssV0FBV2pQLEtBQU0sQ0FDOUIwRixLQUFLc0csS0FBS29oQixRQUFRemxCLEtBQU8sR0FDM0J3SixHQUFHQyxjQUFjdUssS0FBS2pXLEtBQUtDLEtBQUtDLFNBQVMsMkJBRzlCLElBQUlzbEMsbUJBQW1CMXhCLFNBQVVrRCxPQUFRbVEsYUFDakQ0ZixnQkFDUCxDQUNBLEdBQUl2ZixPQUFPL29CLE9BQU84SyxXQUFXalAsS0FBTSxDQUNwQixJQUFJa3VDLG1CQUFtQjEwQixTQUFVa0QsT0FBUW1RLGFBQ2pENGYsZ0JBQ1AsQ0FDRixDQUNGLENBQ0YsQ0FFQSxxQkFBTXkyQixDQUFpQnYrRCxPQUNyQixNQUFNK1gsT0FBUy9YLE1BQU1JLGNBQWNFLFFBQVEsU0FDdkNOLE1BQU1JLGNBQWNFLFFBQVEsU0FBU0UsUUFBUXVYLE9BQzdDLEtBQ0osSUFBS0EsT0FBUSxPQUNiLE1BQU13USxPQUFTOWtCLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUlvWCxRQUNmLElBQWpCL1gsTUFBTWltQixPQUNKam1CLE1BQU02eUIsZUFBZ0J0SyxPQUFPdlosZUFDdEJ1WixPQUFPcFosWUFDUSxJQUFqQm5QLE1BQU1pbUIsU0FDWGptQixNQUFNNnlCLGVBQWdCdEssT0FBT3haLFdBQVcsU0FDakN3WixPQUFPbFosYUFBYSxHQUVuQyxDQUVBLGVBQU1pdkQsQ0FBV3QrRCxPQUNmLE1BQU0rWCxPQUFTL1gsTUFBTUksY0FBY0UsUUFBUSxTQUN2Q04sTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRdVgsT0FDN0MsS0FDSixJQUFLQSxPQUFRLE9BQ2IsTUFBTXdRLE9BQVM5a0IsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSW9YLGNBQzlCd1EsT0FBT3BaLFdBQ2YsQ0FFQSx3QkFBTWl4RCxDQUFvQnBnRSxPQUN4QkEsTUFBTUUsaUJBQ04sTUFBTThYLFFBQVVoWSxNQUFNSSxjQUFjSSxRQUFRd1gsUUFDdENySCxRQUFVM1EsTUFBTUksY0FBY0UsUUFBUSxRQUFRRSxRQUFRbVEsUUFDdERYLFNBQVdoUSxNQUFNSSxjQUFjRSxRQUFRLFFBQVFFLFFBQVF5UCxRQUN2RDhILE9BQVMvWCxNQUFNSSxjQUFjRSxRQUFRLE1BQ3ZDTixNQUFNSSxjQUFjRSxRQUFRLE1BQU1FLFFBQVF1WCxPQUMxQyxLQUVFMkIsTUFBUSxJQUFJbEMsVUFFbEIsSUFBS3hYLE1BQU02eUIsU0FBVSxDQUNuQixNQUFNc1AsWUFBYzdLLFdBQVduakIsU0FDM0JndUIsUUFDRnpvQixNQUFNakIsYUFBZTBwQixNQUFNeGhDLElBQUksYUFDL0IrWSxNQUFNSyxXQUFhb29CLE1BQU14aEMsSUFBSSxjQUM3QitZLE1BQU1raUIsaUJBQW1CajhCLE9BQU93aUMsTUFBTXhoQyxJQUFJLHFCQUMxQytZLE1BQU1taUIsc0JBQXdCbDhCLE9BQU93aUMsTUFBTXhoQyxJQUFJLDBCQUVuRCxDQUVBK1ksTUFBTWhjLE1BQVNzUyxVQUFXVyxRQUMxQitJLE1BQU1oTyxNQUFRc00sUUFDZDBCLE1BQU1oUSxLQUFPcU8sYUFDUDJCLE1BQU05VSxPQUNaOFUsTUFBTWtnQixXQUlSLENBRUEscUJBQU15bUMsQ0FBaUJyZ0UsT0FDckJBLE1BQU1FLGlCQUNOLE1BQU02WCxPQUFTL1gsTUFBTUksY0FBY0UsUUFBUSxXQUFXRSxRQUFRdVgsT0FDeER4SyxNQUFRdk4sTUFBTUksY0FBY0UsUUFBUSxrQkFBa0JFLFFBQVErTSxNQUM5RGl5QixlQUFpQixJQUFJdEMsV0FBVyxDQUNwQ2hWLFlBQWFsb0IsTUFBTTZ5QixTQUNuQnRsQixRQUVGaXlCLGVBQWUzcUIsU0FBV3BSLEtBQUsvRixNQUFNc1MsU0FDckN3dkIsZUFBZXpuQixPQUFTQSxPQUN4QnluQixlQUFleFEsZ0JBRWpCLENBRUEsb0JBQU1rd0MsQ0FBZ0JsL0QsT0FHcEIsR0FGQUEsTUFBTUUsaUJBRW1ELE9BQXJERixNQUFNSSxjQUFjOGQsY0FBYzFkLFFBQVE4Z0MsT0FBaUIsT0FFL0QsTUFBTXY0QixLQUFPLENBQ1g0USxTQUFVcWUsZ0JBQWdCbUksZ0JBQzFCdEksU0FBVUcsZ0JBQWdCd0ksa0JBQzFCeGdDLE1BQ0F0QyxNQUFPK0YsS0FBSy9GLE9BRVZzQyxNQUFNSSxjQUFjcVMsVUFBVXlULFNBQVMsd0JBQ3pDbmQsS0FBSzRRLFNBQVdxZSxnQkFBZ0JpSSx5QkFDdkJqZ0MsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLHFCQUNoRG5kLEtBQUs0USxTQUFXcWUsZ0JBQWdCZ0kscUJBRzlCaGdDLE1BQU0rZ0MsU0FDUmg0QixLQUFLOHVCLFNBQVdHLGdCQUFnQnFJLG9CQUdsQ3JJLGdCQUFnQjBKLFFBQVEzNEIsS0FDMUIsQ0FPQSw4QkFBTW8yRCxDQUEwQm4vRCxPQUM5QkEsTUFBTUUsaUJBQ0ZGLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxpQkFDdkNubEIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQzVCcTNCLGdCQUFnQjBKLFFBQVEsQ0FDdEIvbkIsU0FBVXFlLGdCQUFnQmlJLHlCQUMxQnBJLFNBQVVHLGdCQUFnQnVJLGlCQUMxQmEsZ0JBQWdCLEVBQ2hCbFosYUFBYSxFQUNiOU4sZUFBZ0JwYSxNQUFNSSxjQUFjRSxRQUFRLGFBQWFFLFFBQVE0WixlQUNqRTFjLE1BQU8rRixLQUFLL0YsUUFHZHM2QixnQkFBZ0IwSixRQUFRLENBQ3RCL25CLFNBQVVxZSxnQkFBZ0JpSSx5QkFDMUJwSSxTQUFVRyxnQkFBZ0J1SSxpQkFDMUJ2Z0MsTUFDQXRDLE1BQU8rRixLQUFLL0YsUUFHbEIsQ0FFQSx1QkFBTTJoRSxDQUFtQnIvRCxPQUV2QkEsTUFBTUUsaUJBQ04sTUFBTW9oQyxPQUFTdGhDLE1BQU1JLGNBQWM4ZCxjQUFjMWQsUUFBUThnQyxPQUN6RCxHQUFlLE9BQVhBLE9Bb0JBdmdDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUM1QnEzQixnQkFBZ0IwSixRQUFRLENBQ3RCL25CLFNBQVVxZSxnQkFBZ0JpSSx5QkFDMUJwSSxTQUFVRyxnQkFBZ0J1SSxpQkFDMUJhLGdCQUFnQixFQUNoQmxaLGFBQWEsRUFDYnpELFVBQVd6a0IsTUFBTUksY0FBY0UsUUFBUSxjQUFjRSxRQUFROGdDLE9BQzdENWpDLE1BQU8rRixLQUFLL0YsUUFHZHM2QixnQkFBZ0IwSixRQUFRLENBQ3RCL25CLFNBQVVxZSxnQkFBZ0JnSSxvQkFDMUJuSSxTQUNBNzNCLE1BQU0rZ0MsUUFBcUIsUUFBWE8sT0FDWnRKLGdCQUFnQnlJLG9CQUNoQnpJLGdCQUFnQnVJLGlCQUNwQnZnQyxNQUNBdEMsTUFBTytGLEtBQUsvRixhQXBDZCxJQUNHLGNBQWN5ekQsS0FDYm54RCxNQUFNSSxjQUFjOGQsY0FBYzFkLFFBQVEwakUsYUFFNUMsQ0FDQSxNQUFNcHBELEVBQUksSUFBSXZWLEtBQ1p2RixNQUFNSSxjQUFjOGQsY0FBYzFkLFFBQVEwakUsbUJBRXRDcHBELEVBQUVsVyxLQUFLLENBQUVtQixPQUFPLElBQ2pCeEcsTUFBTXViLEVBQUU1VSxhQUF3QjVFLElBQVp3WixFQUFFNVUsT0FDekI0VSxFQUFFOGUsVUFBVSxDQUNWbG1CLFFBQVN6TSxZQUFZME0sYUFDckJGLE9BQVExUyxLQUFLQyxLQUFLQyxTQUFTLHlCQUdqQyxDQXdCSixDQU9BLGdCQUFBbStELENBQWtCcC9ELE9BQ2hCQSxNQUFNRSxpQkFDRkYsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLGlCQUN2Q25sQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFDNUJxM0IsZ0JBQWdCMEosUUFBUSxDQUN0Qi9uQixTQUFVcWUsZ0JBQWdCbUksZ0JBQzFCdEksU0FBVUcsZ0JBQWdCdUksaUJBQzFCYSxnQkFBZ0IsRUFDaEJsWixhQUFhLEVBQ2JsUSxRQUFTaFksT0FBT0ksY0FBY0UsUUFBUSxVQUFVRSxRQUFRd1gsUUFDeER0YSxNQUFPK0YsS0FBSy9GLFFBR2RzNkIsZ0JBQWdCMEosUUFBUSxDQUN0Qi9uQixTQUFVcWUsZ0JBQWdCbUksZ0JBQzFCdEksU0FBVUcsZ0JBQWdCdUksaUJBQzFCdmdDLE1BQ0F0QyxNQUFPK0YsS0FBSy9GLFFBR2xCLENBMkJBLG1CQUFNeTRCLENBQWVuMkIsTUFBT28yQixVQUcxQixNQUFNK3RDLFVBQVk5aEUsUUFBUUMsTUFBTXMwRCxjQUFjbnpELEtBQUsvRixNQUFNeW1FLFdBQ25EdHFFLEtBQU9tRyxPQUFPSSxlQUFldkcsS0FvQm5DLEdBbkJJQSxNQUFRc3FFLFdBQWFBLFVBQVV0cUUsT0FDakMyUyxHQUFHQyxjQUFjdUssS0FDZmpXLEtBQUtDLEtBQUswVyxPQUFPLGlDQUFrQyxDQUFFN2QsUUFJckQ0SixLQUFLdVIsT0FBTzdMLE1BQVFpdEIsU0FBU2p0QixNQUFRMUYsS0FBS3VSLE9BQU9OLE9BQVNqUixLQUFLdVIsT0FBT1ksZ0JBQWdCRSxRQUFRQyxNQUFRNGQsU0FBUzZqQixXQUFXL3pDLEtBQUt1UixPQUFPbFQsUUFFcEkyQixLQUFLdVIsT0FBT04sTUFDZGpSLEtBQUt1UixPQUFPTixNQUFNL1MsT0FBTyxDQUN2QixjQUFleTBCLFNBQVNqdEIsTUFHMUIxRixLQUFLdVIsT0FBT1ksZUFBZWpVLE9BQU8sQ0FDaEMsY0FBZXkwQixTQUFTanRCLE9BSzFCbkosTUFBTUksZUFDSkosTUFBTUksY0FBY3FTLFVBQVcsQ0FDakMsR0FBSXpTLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxvQkFBcUIsQ0FDOUQsTUFBTXhjLEtBQU9qRyxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUM1QlgsTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRdVgsUUFFL0MsR0FBSXJPLEtBQU0sQ0FDUixNQUFNL1AsTUFBUXFHLE1BQU1JLGNBQWN6RyxNQUM5QitOLFNBQVMxSCxNQUFNSSxjQUFjekcsT0FDN0IsS0FhSixHQVhLcUcsTUFBTUksY0FBY3pHLE1BS2xCNEYsTUFBTTVGLGNBQ0grUCxLQUFLL0gsT0FBTyxDQUNoQixDQUFDM0IsTUFBTUksY0FBY3ZHLE1BQU9GLGNBTjFCK1AsS0FBSy9ILE9BQU8sQ0FDaEIsQ0FBQzNCLE1BQU1JLGNBQWN2RyxNQUFPLE9BUzVCa0gsS0FBS0MsS0FBS0MsU0FBUywrQ0FBaUR5SSxLQUFLN1AsV0FBb0UsSUFBckQ0SixLQUFLL0YsTUFBTTQ3QyxZQUFZOTVDLFFBQVE2K0MsY0FBYzMzQyxJQUFxQixDQUM1SixNQUFNMDlELGFBQ0gxNkQsS0FBSy9QLE9BQVMsSUFDZCtQLEtBQUtsSyxPQUFPZ3RCLGFBQWFDLFlBQWMsSUFFeEMyM0MsWUFDRXprRSxPQUFPOEQsS0FBSy9GLE1BQU00N0MsV0FBVzk1QyxPQUFPNitDLGFBQWEzM0MsTUFDbkQwOUQsWUFDRXprRSxPQUFPOEQsS0FBSy9GLE1BQU00N0MsV0FBVzk1QyxPQUFPNitDLGFBQWExM0MsT0FFbkQ2RixHQUFHQyxjQUFjdUssS0FDZmpXLEtBQUtDLEtBQUswVyxPQUFPLHdCQUF5QixDQUN4Qy9RLElBQUtoSCxPQUNIOEQsS0FBSy9GLE1BQU00N0MsV0FBVzk1QyxPQUFPNitDLGFBQWExM0MsS0FFNUNELElBQUsvRyxPQUNIOEQsS0FBSy9GLE1BQU00N0MsV0FBVzk1QyxPQUFPNitDLGFBQWEzM0MsT0FLcEQsQ0FDRixDQUNGLENBRUEsR0FBSTFHLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxtQkFBb0IsQ0FFN0QsR0FBaUMsNkJBQTdCbG1CLE1BQU1JLGNBQWN2RyxLQUt0QixhQUpNNEosS0FBSy9GLE1BQU1nakQsT0FDZmg1QyxTQUFTMUgsTUFBTUksY0FBY3pHLGFBRS9COEosS0FBS2hDLFFBQU8sR0FHZCxHQUFpQyw0QkFBN0J6QixNQUFNSSxjQUFjdkcsS0FLdEIsYUFKTTRKLEtBQUsvRixNQUFNd3JELE1BQ2Z4aEQsU0FBUzFILE1BQU1JLGNBQWN6RyxhQUUvQjhKLEtBQUtoQyxRQUFPLEVBR2hCLENBRUEsR0FBSXpCLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxhQUV6QyxZQURBemlCLEtBQUsvRixNQUFNcTlDLGVBQWUvNkMsTUFBTUksZUFJbEMsR0FBSUosTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLHFCQUFzQixDQUMvRCxNQUFNcEYsTUFBUXBaLFNBQ1oxSCxNQUFNSSxjQUFjRSxRQUFRLGdCQUFnQkUsUUFBUXNnQixhQUVoRHJkLEtBQUsvRixNQUFNZzlDLGVBQWU1NUIsTUFBTzlnQixNQUFNSSxjQUFjekcsTUFDN0QsQ0FFQSxHQUFJcUcsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLHFCQUFzQixDQUMvRCxNQUFNcEYsTUFBUXBaLFNBQ1oxSCxNQUFNSSxjQUFjRSxRQUFRLGdCQUFnQkUsUUFBUXNnQixPQUV0RHJkLEtBQUsvRixNQUFNaTlDLGVBQWU3NUIsTUFBTzlnQixNQUFNSSxjQUFjekcsTUFDdkQsQ0FFQSxHQUFJcUcsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLG1CQUFvQixDQUM3RCxNQUFNeGEsTUFBUWpJLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQzdCWCxNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF3WCxTQUUzQ3RNLGFBQ0lBLE1BQU1vNEMsWUFBWTlqRCxNQUFNSSxjQUFjekcsTUFFaEQsQ0FFQSxHQUNFcUcsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLGVBQ3ZDbG1CLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxhQUN2QyxDQUNBLE1BQU14YyxLQUFPakcsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFDNUJYLE1BQU1JLGNBQWNFLFFBQVEsU0FBU0UsUUFBUXdYLFNBRS9DLEdBQUl0TyxLQUFNLENBQ1IsTUFBTVgsS0FBTyxDQUFDLEVBQ2QsR0FBSVcsS0FBS2xLLE9BQU84SyxXQUFXN1AsUUFBUyxDQUNsQyxNQUFNK1AsTUFBUTVCLFNBQVM2QixpQkFDckJ6SyxNQUFNSSxjQUFjekcsTUFDcEIrUCxLQUFLbEssT0FBT2tMLGdCQUVkM0IsS0FBS2xQLEtBQU8yUSxNQUFNM1EsS0FDbEJrUCxLQUFLLG9CQUFzQnlCLE1BQU1ELFVBQ2pDeEIsS0FBSyx5QkFBMkJ5QixNQUFNRSxjQUN4QyxNQUNFM0IsS0FBSyxvQkFBc0IvSSxNQUFNSSxjQUFjekcsTUFDL0NvUCxLQUFLbFAsS0FBT21HLE1BQU1JLGNBQWN6RyxZQUU1QitQLEtBQUsvSCxPQUFPb0gsS0FDcEIsQ0FDRixDQUVBLEdBQUkvSSxNQUFNSSxjQUFjcVMsVUFBVXlULFNBQVMsMkJBRUEsSUFBckNsbUIsTUFBTUksY0FBY3pHLE1BQU0wSyxPQUFjLENBRTFDLE1BQU15VyxFQUFJLElBQUl2VixLQUFLdkYsTUFBTUksY0FBY3pHLGFBQ2pDbWhCLEVBQUVsVyxLQUFLLENBQUVtQixPQUFPLEtBQ2xCeEcsTUFBTXViLEVBQUU1VSxhQUE2QixJQUFaNFUsRUFBRTVVLFNBQzdCc0csR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBSzBXLE9BQU8sMkJBQTRCLENBQzNDL2QsTUFBT3FHLE1BQU1JLGNBQWN6RyxTQUcvQnk4QixTQUFTcDJCLE1BQU1JLGNBQWN2RyxNQUFRa0gsS0FBS0MsS0FBSzBXLE9BQzdDLHFCQUdOLENBR0YsR0FBSTFYLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyxvQkFHRixJQUFyQ2xtQixNQUFNSSxjQUFjekcsTUFBTTBLLFFBQ21DLE9BQTdEckUsTUFBTUksY0FBY0UsUUFBUSxjQUFjRSxRQUFROGdDLE9BQ2xELENBRUEsTUFBTXhtQixFQUFJLElBQUl2VixLQUFLdkYsTUFBTUksY0FBY3pHLGFBQ2pDbWhCLEVBQUVsVyxLQUFLLENBQUVtQixPQUFPLEtBQ2xCeEcsTUFBTXViLEVBQUU1VSxhQUFzQjVFLElBQVp3WixFQUFFNVUsU0FDdEJzRyxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTywyQkFBNEIsQ0FDM0MvZCxNQUFPcUcsTUFBTUksY0FBY3pHLFNBRy9CeThCLFNBQVNwMkIsTUFBTUksY0FBY3ZHLE1BQVFrSCxLQUFLQyxLQUFLMFcsT0FDN0MscUJBR04sQ0FNRixHQUFJMVgsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLGdCQUFpQixDQUMxRCxNQUFNcUMsT0FBUzlrQixLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUM5QlgsTUFBTUksY0FBY0UsUUFBUSxTQUFTRSxRQUFRdVgsUUFFekNyTSxNQUFRakksS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFDN0JYLE1BQU1JLGNBQWMyQyxRQUFRL0MsTUFBTUksY0FBY2lrRSxlQUFlMXFFLE9BRWpFLEdBQUk0dUIsUUFBVTdjLE1BQ1osT0FBUTFMLE1BQU1JLGNBQWNJLFFBQVFrTCxPQUNsQyxJQUFLLGFBQ0c2YyxPQUFPNW1CLE9BQU8sQ0FDbEIsdUJBQXdCK0osTUFBTWlHLEdBQzlCLHlCQUEwQmpHLE1BQU03UixPQUVsQyxNQUNGLElBQUssbUJBQ0cwdUIsT0FBTzVtQixPQUFPLENBQ2xCLDZCQUE4QitKLE1BQU1pRyxHQUNwQywrQkFBZ0NqRyxNQUFNN1IsT0FLaEQsQ0FHQSxHQUFJbUcsTUFBTUksY0FBY3FTLFVBQVV5VCxTQUFTLGVBQWdCLENBQ3pELE1BQU1xQyxPQUFTOWtCLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQzlCWCxNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF1WCxRQUUzQ3dRLGNBQ0lBLE9BQU81bUIsT0FBTyxDQUFFOUgsS0FBTW1HLE1BQU1JLGNBQWN6RyxPQUVwRCxDQUtBLEdBQUlxRyxNQUFNSSxjQUFjcVMsVUFBVXlULFNBQVMsa0JBQW1CLENBQzVELE1BQU1xQyxPQUFTOWtCLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQzlCWCxNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF1WCxRQUUvQyxHQUFJd1EsT0FFRixHQUF5QyxJQUFyQ3ZvQixNQUFNSSxjQUFjekcsTUFBTTBLLE9BQWMsQ0FDMUMsTUFBTXlXLEVBQUksSUFBSXZWLEtBQUt2RixNQUFNSSxjQUFjekcsT0FFdkMsU0FETW1oQixFQUFFbFcsS0FBSyxDQUFFbUIsT0FBTyxJQUNsQnhHLE1BQU11YixFQUFFNVUsYUFBNkIsSUFBWjRVLEVBQUU1VSxNQUM3QnNHLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLGlDQUFrQyxDQUNqRC9kLE1BQU9xRyxNQUFNSSxjQUFjekcsY0FJL0IsT0FBUXFHLE1BQU1JLGNBQWNJLFFBQVErTSxPQUNsQyxJQUFLLGVBQ0dnYixPQUFPNW1CLE9BQU8sQ0FDbEIsNkJBQThCM0IsTUFBTUksY0FBY3pHLFFBRXBELE1BQ0YsSUFBSyxhQUNHNHVCLE9BQU81bUIsT0FBTyxDQUNsQiwyQkFBNEIzQixNQUFNSSxjQUFjekcsUUFFbEQsTUFDRixJQUFLLGdCQUNHNHVCLE9BQU81bUIsT0FBTyxDQUNsQiw4QkFBK0IzQixNQUFNSSxjQUFjekcsUUFLN0QsTUFDRSxPQUFRcUcsTUFBTUksY0FBY0ksUUFBUStNLE9BQ2xDLElBQUssZUFDR2diLE9BQU81bUIsT0FBTyxDQUNsQiw2QkFBOEIsT0FFaEMsTUFDRixJQUFLLGFBQ0c0bUIsT0FBTzVtQixPQUFPLENBQ2xCLDJCQUE0QixPQUU5QixNQUNGLElBQUssZ0JBQ0c0bUIsT0FBTzVtQixPQUFPLENBQ2xCLDhCQUErQixPQU0zQyxDQUNGLENBRUYsT0FBTzhCLEtBQUt1UixPQUFPclQsT0FBT3kwQixTQUM1QixFQ2hqRUssTUFBTWt1QyxxQkFBcUJ4SixlQUtoQyxhQUFNbG1DLEdBQ0osTUFBTUMsZ0JBQWtCLzBCLE1BQU04MEIsVUFvRDlCLE9BakRBQyxVQUFVMHZDLGNBQWUsRUFDekIxdkMsVUFBVTJ2QyxlQUFrQi9nRSxLQUFLL0YsTUFBTXF0QyxhQUFhLG9CQUFxQixFQUV6RWxXLFVBQVU0dkMsT0FBcUQsT0FBNUM1dkMsVUFBVTlyQixLQUFLdkosT0FBT0MsUUFBUXF1QixJQUFJbjBCLE1BQ3JEazdCLFVBQVU2dkMsTUFBbUQsT0FBM0M3dkMsVUFBVTlyQixLQUFLdkosT0FBT0MsUUFBUXUzQyxHQUFHcjlDLE1BQ25EazdCLFVBQVU4dkMsUUFBc0QsT0FBNUM5dkMsVUFBVTlyQixLQUFLdkosT0FBT0MsUUFBUSsvQyxJQUFJN2xELE1BRXREazdCLFVBQVUrdkMsWUFBYSxFQUV2Qi92QyxVQUFVMm9DLG1CQUNSbjZELE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLdTRCLFVBQVV1bUMsWUFBYSxVQUMzRHZtQyxVQUFVOXJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BQy9CaW9CLFVBQVU0b0MsbUJBQ1JwNkQsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUt1NEIsVUFBVXVtQyxZQUFhLFVBQzNEdm1DLFVBQVU5ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0Jpb0IsVUFBVTZvQyxvQkFDUnI2RCxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS3U0QixVQUFVdW1DLFlBQWEsV0FDM0R2bUMsVUFBVTlyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQmlvQixVQUFVOG9DLHFCQUNSdDZELE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLdTRCLFVBQVV1bUMsWUFBYSxZQUMxRHZtQyxVQUFVOXJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLFFBQVU3TCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxtQkFDcEVrMEIsVUFBVStvQyxzQkFDUnY2RCxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS3U0QixVQUFVdW1DLFlBQWEsWUFDM0R2bUMsVUFBVTlyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQmlvQixVQUFVZ3BDLHNCQUF1QixFQUNqQ2hwQyxVQUFVZ3dDLGFBQ1Jod0MsVUFBVTJvQyxvQkFDVjNvQyxVQUFVNG9DLG9CQUNWNW9DLFVBQVU2b0MscUJBQ1Y3b0MsVUFBVThvQyxzQkFDVjlvQyxVQUFVK29DLHVCQUNWL29DLFVBQVVncEMscUJBRVpocEMsVUFBVWl3QywyQ0FBNkM3ekQsV0FBV0MsV0FDaEUyakIsVUFBVTlyQixLQUFLdkosT0FBT2k3QyxVQUFVbWhCLHFCQUFxQmppRSxNQUNyRCxDQUNFb00sT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVa3dDLGdDQUFrQzl6RCxXQUFXQyxXQUNyRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWWkwRCxPQUNsQyxDQUNFai9ELE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJaEJ2aEMsU0FDVCxDQUVBLGlCQUFBcFgsQ0FBbUJDLE1BR2pCLEdBRkE1ZCxNQUFNMmQsa0JBQWtCQyxNQUVwQjNjLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUFvQixDQUMzQzhDLEtBQUttN0QsUUFBT243RCxLQUFLbTdELE1BQVEsSUFFOUIsTUFBTXFHLFlBQWMsQ0FDbEJ0ekQsR0FBSSxnQkFDSnlMLFFBQVMsWUFDVHM5QyxRQUFTLENBQ1AsQ0FDRXQ5QyxRQUFTLE9BQ1R4TCxNQUFPLENBQ0wsQ0FBRWhSLE9BQVEsWUFBYUUsTUFBTyxxQkFDOUIsQ0FBRUYsT0FBUSxZQUFhRSxNQUFPLGdCQUM5QixDQUFFRixPQUFRLG9CQUFxQkUsTUFBTywwQkFPeENva0UsbUJBQXFCLElBQUluTSxnQkFDL0JtTSxtQkFBbUJ4b0UsS0FBS3VvRSxZQUFhdm5ELEtBQU1qYSxLQUFLMGhFLDJCQUEyQnpvRSxLQUFLK0csT0FDaEZBLEtBQUttN0QsTUFBTWprRSxLQUFLdXFFLG1CQUNsQixDQUVBeG5ELEtBQUt2YSxLQUFLLGFBQWFzeUIsTUFBTWh5QixLQUFLMmhFLFlBQVkxb0UsS0FBSytHLE1BTXJELENBRUEsZ0NBQU0waEUsQ0FBNEJubEUsT0FDaEMsTUFBTW9pRSxZQUFjLENBQ2xCem9ELFNBQVVxZSxnQkFBZ0JvSSxvQkFDMUJnQixnQkFBZ0IsRUFDaEJsWixhQUFhLEVBQ2Jsb0IsTUFDQTYzQixTQUFVRyxnQkFBZ0J5SSxvQkFDMUIvaUMsTUFBTytGLEtBQUsvRixPQUdkLE9BQVFzQyxNQUFNSSxjQUFjSSxRQUFRSSxRQUNsQyxJQUFLLFlBQ0h3aEUsWUFBWXZxQyxTQUFXRyxnQkFBZ0IwSSxlQUN2QzBoQyxZQUFZcGhDLGlCQUFrQixFQUM5Qm9oQyxZQUFZbmhDLGNBQWUsRUFDM0IsTUFDRixJQUFLLFlBQ0htaEMsWUFBWXZxQyxTQUFXRyxnQkFBZ0IwSSxlQUN2QzBoQyxZQUFZcGhDLGlCQUFrQixFQUM5Qm9oQyxZQUFZbGhDLFlBQWEsRUFDekIsTUFDRixJQUFLLG9CQUNIa2hDLFlBQVl2cUMsU0FBV0csZ0JBQWdCMEksZUFDdkMwaEMsWUFBWXBoQyxpQkFBa0IsRUFDOUJvaEMsWUFBWWpoQyxpQkFBa0IsRUFLbENuSixnQkFBZ0IwSixRQUFRMGdDLFlBQzFCLENBRUEsaUJBQU1nRCxDQUFhcGxFLE9BRWpCLEdBREFBLE1BQU1FLGlCQUVIdUQsS0FBSy9GLE1BQU04QixPQUFPL0UsUUFBUXd5QixRQUFRK1UsYUFDbEN2K0IsS0FBSy9GLE1BQU04QixPQUFPL0UsUUFBUXd5QixRQUFRZ1YsYUFLckMsR0FDRXB2QixVQUFVN1MsUUFDVmUsS0FBS3NHLEtBQUsyRSxLQUNWLENBQ0EsSUFBSStOLFdBQVk1UixTQUNoQixJQUFLbkksTUFBTTZ5QixTQUFVLENBQ25CLE1BQU1zUCxZQUFjN0ssV0FBV25qQixPQUFPLENBQ3BDc2pCLHlCQUF5QixJQUV2QjBLLFFBQ0ZoNkIsU0FBV3hJLE9BQU93aUMsTUFBTXhoQyxJQUFJLGNBQzVCb1osV0FBYXBhLE9BQU93aUMsTUFBTXhoQyxJQUFJLGVBRWxDLENBQ0EsTUFBTXkyQixTQUFXLENBQ2YxZCxNQUFPLFVBQ1A4USxPQUFRL21CLEtBQUsvRixNQUFNOEIsT0FBTy9FLFFBQVF3eUIsUUFBUStVLFlBQzFDelgsT0FBUTltQixLQUFLL0YsTUFBTThCLE9BQU8vRSxRQUFRd3lCLFFBQVFnVixhQUMxQ25ZLFVBQVdybUIsS0FBSy9GLE1BQU04QixPQUFPMGlDLE1BQU1wZ0MsTUFBTXVDLE9BQ3JDWixLQUFLL0YsTUFBTThCLE9BQU8waUMsTUFBTXBnQyxLQUN4QjJCLEtBQUsvRixNQUFNN0QsS0FDZm1XLFNBQVV2TSxLQUFLL0YsTUFBTW1YLFVBRXVCLGNBQTFDOVQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsY0FDNUJ5MkIsU0FBU3B3QixPQUFRLFFBRUssSUFBYm1CLFdBQTBCaXZCLFNBQVNqdkIsU0FBV0EsZUFDL0IsSUFBZjRSLGFBQTRCcWQsU0FBU3JkLFdBQWFBLFlBQzdELE1BQU0yWSxNQUFPLElBQUt0QyxVQUFZaG5CLG9CQUFvQmd1QixVQUM5QzFFLE1BQ0Z6ZixXQUFXSyxjQUNULEtBQ0F2UyxLQUFLQyxLQUFLMFcsT0FBTyxpQ0FBa0MsQ0FDakRnQyxNQUFPZ1osT0FJZixLQUFPLENBQ0wsTUFBTTlJLFFBQVUsQ0FDZFcsT0FBUTltQixLQUFLL0YsTUFBTWtqRCxvQkFDbkJwMkIsT0FBUS9tQixLQUFLL0YsTUFBTWlqRCxtQkFDbkI3MkIsVUFBV3JtQixLQUFLL0YsTUFBTThCLE9BQU8waUMsTUFBTXBnQyxNQUFNdUMsT0FDckNaLEtBQUsvRixNQUFNOEIsT0FBTzBpQyxNQUFNcGdDLEtBQ3hCMkIsS0FBSy9GLE1BQU03RCxLQUNmbVcsU0FBVXZNLEtBQUsvRixNQUFNbVgsVUFFdkI4VSxhQUFhaUcsYUFBYWhHLFFBQVM1cEIsTUFBTTZ5QixTQUMzQyxDQUNGLENBRUEsWUFBQW1yQyxHQUNFdjZELEtBQUsvRixNQUFNNG1ELGVBQWUsa0JBQzFCeGtELE1BQU1rK0QsY0FDUixDQVNBLHlCQUFXOWdELEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxRQUFTLFFBQVMsT0FDcENpWCxTQUFVLENBQUMsQ0FBRUMsYUFBYyxRQUFTQyxhQUFjLE9BQ2xEbFgsU0FBVSwrQ0FDVkUsTUFBTyxJQUNQOG5ELFdBQVcsRUFDWEMsYUFBYSxHQUVqQixDQVFBLG1CQUFNbnZDLENBQWVuMkIsTUFBT28yQixVQUMxQixLQUFJcDJCLE1BQU1JLGVBQ0pKLE1BQU1JLGNBQWNxUyxXQUNsQnpTLE1BQU1JLGNBQWNxUyxVQUFVeVQsU0FBUyx5QkFTL0MsT0FBT3BtQixNQUFNcTJCLGNBQWNuMkIsTUFBT28yQixVQVI1QjN5QixLQUFLL0YsTUFBTTRuRCxrQkFDVHRsRCxNQUFNSSxjQUFjdkcsS0FDcEJtRyxNQUFNSSxjQUFjekcsTUFPOUIsQ0FFQSxnQkFBTzRyRSxDQUFXcHJFLElBQUt1akIsTUFDckJBLEtBQUtGLE9BQU8sT0FDZCxDQUVBLFdBQUFnb0QsQ0FBYXJsRSxHQUNYTCxNQUFNMGxFLFlBQVlybEUsR0FDbEJta0UsYUFBYWlCLFVBQVVwbEUsRUFBR3NELEtBQUtzaEMsU0FDakMsRUNwUEssTUFBTTBnQywwQkFBMEJuQixhQUtyQyxhQUFNMXZDLEdBQ0osTUFBTUMsZ0JBQWtCLzBCLE1BQU04MEIsVUFFOUIsT0FEQUMsVUFBVSt2QyxZQUFhLEVBQ2hCL3ZDLFNBQ1QsQ0FNQSx5QkFBVzNYLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxRQUFTLFFBQVMsTUFBTyxhQUUvQyxFQ3hCSyxNQUFNc29ELGtDQUFrQ3pvRCxnQkFDN0MseUJBQVdDLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsUUFDVmpMLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLGtDQUMxQm9jLFNBQVUsbURBQ1ZHLE9BQVEsUUFFWixDQUVBLGFBQU1vWCxHQUNKLE1BQU03ckIsV0FBYWpKLE1BQU04MEIsVUFFekIsT0FEQTdyQixLQUFLNDhELFdBQWtDLGFBQXJCNThELEtBQUtpTSxPQUFPbFQsS0FDdkJpSCxJQUNULENBRUEsaUJBQUEwVSxDQUFtQkMsTUFDakJBLEtBQUt2YSxLQUFLLGVBQWU5RCxPQUFPb0UsS0FBS29pQyxnQkFBZ0JucEMsS0FBSytHLE9BQzFEaWEsS0FBS3ZhLEtBQUssa0JBQWtCc3lCLE1BQU1oeUIsS0FBS21pRSxlQUFlbHBFLEtBQUsrRyxPQUMzRDNELE1BQU0yZCxrQkFBa0JDLEtBQzFCLENBRUEsY0FBQWtvRCxDQUFnQjVsRSxPQUNkLEdBQTJDLFFBQXZDQSxNQUFNSSxjQUFjSSxRQUFReWxCLE9BQWtCLENBQ2hELE1BQU12SSxLQUFPNlIsRUFBRXZ2QixNQUFNSSxlQUFlRSxRQUFRLG1CQUN0Q3dCLEtBQU80YixLQUFLdmEsS0FBSyxlQUFla2lDLE1BQ2hDeHJDLEtBQU82akIsS0FBS3ZhLEtBQUssZUFBZWtpQyxNQUNoQzFyQyxNQUFRK04sU0FBU2dXLEtBQUt2YSxLQUFLLGdCQUFnQmtpQyxPQUMzQzZhLGlCQUNKejhDLEtBQUt1UixPQUFPdFgsTUFBTThCLE9BQU8wZ0Qsa0JBQW9CLEdBQy9DQSxpQkFBaUJ2bEQsS0FBSyxDQUNwQm1ILEtBQU1qSSxLQUNOc21ELFVBQVd4bUQsTUFDWHltRCxTQUFtQixhQUFUdCtDLE9BRVpvK0MsaUJBQWlCdHdDLE1BQUssU0FBVXl3QyxLQUFNQyxPQUNwQyxPQUFPRCxLQUFLditDLEtBQUt5K0MsY0FBY0QsTUFBTXgrQyxLQUN2QyxJQUNBMkIsS0FBS3VSLE9BQU90WCxNQUFNaUUsT0FBTyxDQUFFLDBCQUEyQnUrQyxrQkFDeEQsQ0FDQXo4QyxLQUFLbWIsT0FDUCxDQUVBLGVBQUFpbkIsQ0FBaUI3bEMsT0FDZixNQUFNMGQsS0FBTzZSLEVBQUV2dkIsTUFBTUksZUFBZUUsUUFBUSxtQkFDNUNtRCxLQUFLdVIsT0FBT25iLEtBQU82akIsS0FBS3ZhLEtBQUssZUFBZWtpQyxNQUM1QzVoQyxLQUFLdVIsT0FBT2xULEtBQU80YixLQUFLdmEsS0FBSyxlQUFla2lDLE1BQzVDNWhDLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxtQkFBTTAwQixDQUFlbjJCLE1BQU9vMkIsVUFBVyxFQzVDbEMsTUFBTXl2QywyQkFBMkIvSyxlQUN0QyxpQkFBQUUsR0FDRSxHQUE4Qix1QkFBMUJ2M0QsS0FBS3FGLFlBQVlqUCxLQUErQixDQUM3QzRKLEtBQUtxaUUsYUFBWXJpRSxLQUFLcWlFLFlBQWEsR0FDeEMsSUFBSTN0QyxRQUFVcjRCLE1BQU1rN0Qsb0JBbUJwQixPQWxCQTdpQyxRQUFVLENBQ1IsQ0FDRXIzQixNQUFPMkMsS0FBS3FpRSxXQUNSL2tFLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ25CRixLQUFLQyxLQUFLQyxTQUFTLGtCQUN2QnFILE1BQU8sa0JBQ1BwSCxLQUFNdUMsS0FBS3FpRSxXQUNQLHlCQUNBLHlCQUNKak4sUUFBUzc0RCxPQUFTeUQsS0FBS3NpRSxnQkFBZ0IvbEUsU0FRekN5UCxPQUFPMG9CLFNBQ0ZBLE9BQ1QsQ0FDQSxPQUFPcjRCLE1BQU1rN0QsbUJBQ2YsQ0FFQSxxQkFBTStLLENBQWlCL2xFLE9BQ3JCeUQsS0FBS3FpRSxZQUFjcmlFLEtBQUtxaUUsV0FDeEIsSUFBSS9pRSxRQUFVVixRQUFRQyxNQUFNd08sVUFBVSswRCxtQkFBbUIzb0QsZ0JBQ3JEelosS0FBS3FpRSxhQUNQL2lFLFFBQVVWLFFBQVFDLE1BQU02YSxZQUFZcGEsUUFBUyxDQUMzQ3FhLFFBQVMsQ0FBQyxPQUFRLFFBQVMsWUFBYSxjQUN4Q0ksT0FBUSxJQUNSNm5ELFdBQVcsRUFDWDluRCxNQUFPLE9BR1h4YSxRQUFRMlIsTUFBUWpSLEtBQUtWLFFBQVEyUixZQUN2QmpSLEtBQUttYixjQUNMbmIsS0FBS2hDLFFBQU8sRUFBTXNCLFFBQzFCLENBRUEsYUFBTTZ4QixHQUNKLE1BQU1DLGdCQUFrQi8wQixNQUFNODBCLFVBRTVCbnhCLEtBQUtta0IsaUJBQ2tELElBQWhEbmtCLEtBQUsvRixNQUFNd0YsUUFBUSxPQUFRLHdCQUU1Qk8sS0FBSy9GLE1BQU15N0IsUUFBUSxPQUFRLGlCQUFpQixHQUdsRDExQixLQUFLbWtCLGlCQUNzRCxJQUFwRG5rQixLQUFLL0YsTUFBTXdGLFFBQVEsT0FBUSw0QkFFNUJPLEtBQUsvRixNQUFNeTdCLFFBQVEsT0FBUSxxQkFBcUIsR0FFeER0RSxVQUFVbXhDLG1CQUNSdmlFLEtBQUsvRixNQUFNd0YsUUFBUSxPQUFRLG1CQUFvQixFQUNqRDJ4QixVQUFVb3hDLGtCQUNSeGlFLEtBQUsvRixNQUFNd0YsUUFBUSxPQUFRLHVCQUF3QixFQUNyRDJ4QixVQUFVcXhDLGNBQWdCbmxFLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUVoRDhDLEtBQUsvRixNQUFNNDdDLFlBQ2J6a0IsVUFBVTlyQixLQUFLdkosT0FBTzBpQyxNQUFNb1gsV0FBYTcxQyxLQUFLL0YsTUFBTTQ3QyxXQUFXei9DLEtBQy9EZzdCLFVBQVU5ckIsS0FBS3ZKLE9BQU8waUMsTUFBTWlrQyxlQUFnQixHQUN2Q3R4QyxVQUFVOXJCLEtBQUt2SixPQUFPMGlDLE1BQU1pa0MsZUFBZ0IsRUFFL0MxaUUsS0FBSy9GLE1BQU02N0MsV0FDYjFrQixVQUFVOXJCLEtBQUt2SixPQUFPMGlDLE1BQU1xWCxVQUFZOTFDLEtBQUsvRixNQUFNNjdDLFVBQVUxL0MsS0FDN0RnN0IsVUFBVTlyQixLQUFLdkosT0FBTzBpQyxNQUFNa2tDLGNBQWUsR0FDdEN2eEMsVUFBVTlyQixLQUFLdkosT0FBTzBpQyxNQUFNa2tDLGNBQWUsRUFFbER2eEMsVUFBVXd4QyxnQkFBa0I1aUUsS0FBSy9GLE1BQU04akQsaUJBQ3ZDM3NCLFVBQVV5eEMsZ0JBQWtCN2lFLEtBQUsvRixNQUFNd2pELHNCQUN2Q3JzQixVQUFVMHhDLHdCQUNSNW1FLE9BQU84RCxLQUFLL0YsTUFBTXdqRCx5QkFDbEJ2aEQsT0FBTzhELEtBQUsvRixNQUFNOEIsT0FBTys4RCxhQUFhampCLFlBQ3hDemtCLFVBQVUyeEMsZUFBaUIvaUUsS0FBSy9GLE1BQU00akQscUJBQ3RDenNCLFVBQVU0eEMsdUJBQ1I5bUUsT0FBTzhELEtBQUsvRixNQUFNNGpELHdCQUNsQjNoRCxPQUFPOEQsS0FBSy9GLE1BQU04QixPQUFPKzhELGFBQWFoakIsV0FDeEMxa0IsVUFBVTZ4QyxjQUFnQmpqRSxLQUFLL0YsTUFBTStqRCxvQkFDckM1c0IsVUFBVTh4QyxzQkFDUmhuRSxPQUFPOEQsS0FBSy9GLE1BQU0rakQsdUJBQ2xCOWhELE9BQU84RCxLQUFLL0YsTUFBTThCLE9BQU8rOEQsYUFBYWxqQixVQUN4Q3hrQixVQUFVK3hDLGdCQUFrQmpuRSxPQUMxQjhELEtBQUsvRixNQUFNNDdDLFlBQVk5NUMsT0FBTzYrQyxhQUFhMzNDLEtBRTdDbXVCLFVBQVVneUMsZ0JBQWtCbG5FLE9BQzFCOEQsS0FBSy9GLE1BQU00N0MsWUFBWTk1QyxPQUFPNitDLGFBQWExM0MsS0FFN0NrdUIsVUFBVWl5QyxvQkFDUnJqRSxLQUFLL0YsTUFBTW9oRCxtQkFBbUJ0L0MsT0FBT2d0QixhQUFhOHNCLFdBQ2xEemtCLFVBQVUreEMsaUJBQ1ZuakUsS0FBSy9GLE1BQU1vaEQsbUJBQW1CdC9DLE9BQU9ndEIsYUFBYThzQixXQUNsRHprQixVQUFVZ3lDLGdCQUNaaHlDLFVBQVVreUMsZ0JBQWtCbHlDLFVBQVV1bUMsWUFBWTRMLFFBQVEzaUUsT0FDdER3d0IsVUFBVXVtQyxZQUFZNEwsUUFBUTNpRSxPQUM5QixFQUNKd3dCLFVBQVVveUMsZUFBaUJ4akUsS0FBSy9GLE1BQU02N0MsV0FBVy81QyxPQUFPMG5FLFFBQ3BEempFLEtBQUsvRixNQUFNNjdDLFdBQVcvNUMsT0FBTzBuRSxRQUM3QixFQUNKcnlDLFVBQVVzeUMsbUJBQXFCdHlDLFVBQVVreUMsZ0JBQWtCbHlDLFVBQVVveUMsZUFFckVweUMsVUFBVTZzQixvQkFBc0JqK0MsS0FBSy9GLE1BQU1na0Qsb0JBRTNDN3NCLFVBQVV1eUMsaUJBQW1Ccm1FLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUN2RGswQixVQUFVd3lDLGtCQUFvQnRtRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFDeERrMEIsVUFBVXl5Qyx1QkFBeUJ2bUUsS0FBS21FLFNBQVN2RSxJQUMvQyxPQUNBLDBCQUVGazBCLFVBQVUweUMsY0FBZ0IxeUMsVUFBVXV5QyxrQkFBb0J2eUMsVUFBVXd5QyxrQkFFbEV4eUMsVUFBVTJ5QyxpQkFBbUIsR0FDN0IsSUFBSyxNQUFNbG9FLE9BQU90SCxLQUFLeXZFLGdCQUNyQjV5QyxVQUFVMnlDLGlCQUFpQjdzRSxLQUFLLENBQUUyRSxJQUFLK2xDLElBQUt0a0MsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUt5dkUsZ0JBQWdCbm9FLFFBR3RGdTFCLFVBQVU2eUMsbUJBQXFCLENBQUMsY0FBZSxlQUFnQixjQUFlLGdCQUFnQmpoRSxTQUFTb3VCLFVBQVU5ckIsS0FBS3ZKLE9BQU80OUMsU0FBUzFsQyxRQUV0SW1kLFVBQVU4eUMsZUFBaUIsR0FDM0IsSUFBSyxNQUFNcm9FLE9BQU90SCxLQUFLNHZFLGVBQ3lCLElBQTFDNXZFLEtBQUs0dkUsY0FBY3RvRSxLQUFLeEYsT0FBT3VLLFFBQWdCck0sS0FBSzR2RSxjQUFjdG9FLEtBQUt4RixPQUFPMk0sU0FBU291QixVQUFVOXJCLEtBQUt2SixPQUFPNDlDLFNBQVMxbEMsVUFDeEhtZCxVQUFVOHlDLGVBQWVodEUsS0FBSyxDQUFFMkUsSUFBSytsQyxJQUFLdGtDLEtBQUtDLEtBQUtDLFNBQVNqSixLQUFLNHZFLGNBQWN0b0UsS0FBS3pGLFFBSXpGZzdCLFVBQVVxbkMsYUFBZXo0RCxLQUFLL0YsTUFBTXF0QyxhQUFhLGdCQUM1Q2xXLFVBQVVxbkMsZUFDYnJuQyxVQUFVdW9CLFNBQVcsQ0FDbkJ1TCxjQUFlaDFCLFNBQVN3MEIsZUFBZXR6QixVQUFVOXJCLEtBQUt2SixPQUFPNDlDLFNBQVMxbEMsT0FBUW1kLFVBQVU5ckIsS0FBS3ZKLE9BQU80OUMsU0FBU2dMLE9BQVEza0QsS0FBSy9GLE1BQU1pckQsZUFDaElFLE9BQVFsMUIsU0FBU3cwQixlQUFldHpCLFVBQVU5ckIsS0FBS3ZKLE9BQU80OUMsU0FBUzFsQyxPQUFRbWQsVUFBVTlyQixLQUFLdkosT0FBTzQ5QyxTQUFTZ0wsT0FBUTNrRCxLQUFLL0YsTUFBTW1yRCxRQUN6SEQsS0FBTWoxQixTQUFTdzBCLGVBQWV0ekIsVUFBVTlyQixLQUFLdkosT0FBTzQ5QyxTQUFTMWxDLE9BQVFtZCxVQUFVOXJCLEtBQUt2SixPQUFPNDlDLFNBQVNnTCxPQUFRM2tELEtBQUsvRixNQUFNa3JELFFBSTNIL3pCLFVBQVVnekMsa0JBQW9COW1FLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUV4RGswQixVQUFVaXhDLFdBQWFyaUUsS0FBS3FpRSxhQUFlanhDLFVBQVU0bUMsa0JBQ3JENW1DLFVBQVVybEIsVUFBWSxHQUN0QixJQUFJczRELGFBQWUsR0FDbkIsSUFBSyxNQUFNcDhELFNBQVNtcEIsVUFBVXZOLFFBQ3hCdU4sVUFBVW94QyxtQkFBc0J2NkQsTUFBTWxNLE9BQU84SyxXQUFXNVAsU0FDdERnUixNQUFNbE0sT0FBTzhLLFdBQVc3UCxTQUN0QnF0RSxlQUFpQnA4RCxNQUFNbE0sT0FBT2tMLGlCQUNoQ285RCxhQUFlcDhELE1BQU1sTSxPQUFPa0wsZUFDNUJtcUIsVUFBVXJsQixVQUFVN1UsS0FBSyxDQUN2Qm90RSxrQkFBa0IsRUFDbEJsdUUsS0FBTTZSLE1BQU1sTSxPQUFPa0wsa0JBSXpCbXFCLFVBQVVybEIsVUFBVTdVLEtBQUsrUSxRQW9CN0IsR0FqQkFtcEIsVUFBVW16QyxjQUFnQixJQUFJbnpDLFVBQVV2TixRQUFRMVgsTUFBSyxDQUFDelAsRUFBRzBqQixJQUNoREEsRUFBRXJrQixPQUFPN0YsTUFBUXdHLEVBQUVYLE9BQU83RixRQUVuQ2s3QixVQUFVb3pDLFVBQVksSUFBSXB6QyxVQUFVbXpDLGVBQWU5bEUsTUFBTSxFQUFHLElBQzVEMnlCLFVBQVVtekMsY0FBZ0JuekMsVUFBVW16QyxjQUFjbHVFLFFBQ2hENFIsT0FBU21wQixVQUFVb3hDLG9CQUFzQnY2RCxNQUFNbE0sT0FBTzhLLFdBQVc1UCxTQUVuRW02QixVQUFVcXpDLFdBQWEsSUFBSXJ6QyxVQUFVMG1DLFlBQWExbUMsVUFBVXltQyxVQUN6RDFyRCxNQUFLLENBQUN6UCxFQUFHMGpCLElBQ0QxakIsRUFBRVgsT0FBT2tNLE1BQU1nRyxNQUFNL1gsTUFBUWtxQixFQUFFcmtCLE9BQU9rTSxNQUFNZ0csTUFBTS9YLFFBRTFEd3VFLFVBQ0FqbUUsTUFBTSxFQUFHLEdBQ1oyeUIsVUFBVXV6QyxrQkFBb0JybkUsS0FBS21FLFNBQVN2RSxJQUMxQyxPQUNBLDRCQUVFazBCLFVBQVV1ekMsb0JBQXNCdnpDLFVBQVU5ckIsS0FBS3ZKLE9BQU8waUMsTUFBTSs1QixXQUFZLENBQzFFLE1BQU01MEQsS0FBTzVELEtBQUsvRixNQUFNc3JELGNBQ3BCM2hELE9BQ0Z3dEIsVUFBVTlyQixLQUFLdkosT0FBTzBpQyxNQUFNKzVCLFdBQWE1MEQsS0FBS3hOLEtBRWxELENBNENBLE9BMUNBZzdCLFVBQVV3ekMsZUFBNkMsSUFBNUJ4ekMsVUFBVXZOLE9BQU9qakIsT0FFNUN3d0IsVUFBVTJvQyxtQkFDUm42RCxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS3U0QixVQUFVdW1DLFlBQWEsVUFDM0R2bUMsVUFBVTlyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQmlvQixVQUFVNG9DLG1CQUNScDZELE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLdTRCLFVBQVV1bUMsWUFBYSxVQUMzRHZtQyxVQUFVOXJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BQy9CaW9CLFVBQVU2b0Msb0JBQ1JyNkQsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUt1NEIsVUFBVXVtQyxZQUFhLFdBQzNEdm1DLFVBQVU5ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0Jpb0IsVUFBVThvQyxxQkFDUnQ2RCxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS3U0QixVQUFVdW1DLFlBQWEsWUFDMUR2bUMsVUFBVTlyQixLQUFLdkosT0FBT21ELE1BQU1pSyxRQUFVN0wsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQ3BFazBCLFVBQVUrb0Msc0JBQ1J2NkQsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUt1NEIsVUFBVXVtQyxZQUFhLFlBQzNEdm1DLFVBQVU5ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FFL0Jpb0IsVUFBVWd3QyxhQUNWaHdDLFVBQVUyb0Msb0JBQ1Izb0MsVUFBVTRvQyxvQkFDVjVvQyxVQUFVNm9DLHFCQUNWN29DLFVBQVU4b0Msc0JBQ1Y5b0MsVUFBVStvQyx1QkFDVi9vQyxVQUFVZ3BDLHFCQUVaaHBDLFVBQVV5ekMsd0JBQTBCcjNELFdBQVdDLFdBQzdDMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU95OUMsVUFDdEIsQ0FDRWwzQyxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUloQnZoQyxTQUNULENBRUEsb0JBQUEwekMsQ0FBc0I3cUQsTUFDcEI1ZCxNQUFNeW9FLHFCQUFxQjdxRCxNQUUzQmphLEtBQUsra0Usa0JBRGEsQ0FBQyxvQ0FDZ0I5NEQsUUFBTyxDQUFDKzRELElBQUtDLE9BQzlDLE1BQU05c0IsR0FBS2wrQixLQUFLdmEsS0FBS3VsRSxLQUVyQixPQURBRCxJQUFJQyxLQUFPaG1ELE1BQU1DLEtBQUtpNUIsSUFBSW4wQyxLQUFJbTBDLElBQU1BLEdBQUcrc0IsYUFDaENGLE1BQ04sQ0FBQyxFQUNOLENBRUEsdUJBQUFHLENBQXlCbHJELE1BQ3ZCNWQsTUFBTThvRSx3QkFBd0JsckQsTUFDOUIsTUFBTW1yRCxVQUFZLENBQUMsb0NBQ2JDLFVBQVlybEUsS0FBSytrRSxtQkFBcUIsQ0FBQyxFQUM3QyxJQUFLLE1BQU1FLE9BQU9HLFVBQVcsQ0FDaEJuckQsS0FBS3ZhLEtBQUt1bEUsS0FDbEI5TyxNQUFLLENBQUMzMUMsRUFBRzIzQixNQUFTQSxHQUFHK3NCLFdBQWFHLFVBQVVKLE9BQU96a0QsSUFBTSxJQUM5RCxDQUNGLENBTUEseUJBQVcvRyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsVUFBVyxRQUFTLGFBQ3RDQyxTQUFVLHFEQUNWRSxNQUFPLElBQ1BDLE9BQVEsSUFDUjZuRCxXQUFXLEVBQ1hoeEMsU0FBVSxDQUFDLENBQUVDLGFBQWMsUUFBU0MsYUFBYyxPQUNsRHV2QyxRQUFTLENBQUMscUJBQ1Z0dkMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLFlBSWpCLENBRUEsaUJBQUFsWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUVwQmphLEtBQUsvRixNQUFNdS9CLFVBRWJ2ZixLQUNHdmEsS0FBSyxvQ0FDTHN5QixPQUFNMXZCLGFBQWV0QyxLQUFLc2xFLFlBQVkvb0UsU0FDekMwZCxLQUNHdmEsS0FBSyxxQkFDTHN5QixPQUFNMXZCLGVBQWtCdEMsS0FBSy9GLE1BQU0wZ0Qsb0JBQ3RDMWdDLEtBQ0d2YSxLQUFLLG9CQUNMc3lCLE9BQU0xdkIsZUFBa0J0QyxLQUFLL0YsTUFBTWdnRCxtQkFDdENoZ0MsS0FBS3ZhLEtBQUssY0FBY3N5QixPQUFNejFCLE9BQVN5RCxLQUFLdWxFLGVBQWVocEUsU0FVM0QwZCxLQUFLdmEsS0FBSyxxQkFBcUJzeUIsT0FBTXoxQixRQUNuQ3lELEtBQUt3bEUsb0JBQW9CanBFLE1BQUssSUFFaEMwZCxLQUFLdmEsS0FBSyx5QkFBeUJzeUIsT0FBTXoxQixRQUN2Q3lELEtBQUt5bEUsd0JBQXdCbHBFLE1BQUssSUFFaENlLEtBQUtzRyxLQUFLMkUsT0FDWjBSLEtBQ0d2YSxLQUFLLHlCQUNMc3lCLE1BQU1oeUIsS0FBSzBsRSx1QkFBdUJ6c0UsS0FBSytHLE9BQzFDaWEsS0FDR3ZhLEtBQUssNEJBQ0xzeUIsTUFBTWh5QixLQUFLMmxFLDBCQUEwQjFzRSxLQUFLK0csT0FDN0NpYSxLQUNHdmEsS0FBSyw4QkFDTGttRSxLQUFLNWxFLEtBQUs2bEUsd0JBQXdCNXNFLEtBQUsrRyxPQUMxQ2lhLEtBQ0d2YSxLQUFLLHdCQUNMc3lCLE1BQU1oeUIsS0FBSzhsRSxxQkFBcUI3c0UsS0FBSytHLE9BQ3hDaWEsS0FBS3ZhLEtBQUssaUJBQWlCc3lCLE1BQU1oeUIsS0FBSytsRSxlQUFlOXNFLEtBQUsrRyxPQUMxRGlhLEtBQUt2YSxLQUFLLG9CQUFvQnN5QixNQUFNaHlCLEtBQUtnbUUsa0JBQWtCL3NFLEtBQUsrRyxRQUd0RSxDQUVBLGNBQUErbEUsR0FDRSxNQUFNdm1FLE9BQVNRLEtBQUsvRixNQUFNOEIsT0FBTzQ5QyxTQUFTbjZDLE9BQVNaLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBSy9GLE1BQU04QixPQUFPNDlDLFNBQVNuNkMsUUFBVSxHQUNoSEEsT0FBT3RJLEtBQUssQ0FDVmQsS0FBTSxHQUNOOE0sSUFBSyxLQUNMRCxJQUFLLEtBQ0xnakUsU0FBVSxFQUNWQyxVQUFXLEdBQ1hDLFdBQVksRUFDWkMsWUFBYSxHQUNiQyxhQUFjLEVBQ2RDLGNBQWUsS0FFakJ0bUUsS0FBSy9GLE1BQU1pRSxPQUFPLENBQUUseUJBQTBCc0IsUUFDaEQsQ0FFQSxpQkFBQXdtRSxDQUFtQnpwRSxPQUNqQixNQUNNbWpFLElBREluakUsTUFBTUksY0FDRkUsUUFBUSxTQUNoQjJDLE9BQVNaLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBSy9GLE1BQU04QixPQUFPNDlDLFNBQVNuNkMsUUFDbEVBLE9BQU9rM0IsT0FBT3g2QixPQUFPd2pFLElBQUkzaUUsUUFBUXNnQixPQUFRLEdBQ3pDcmQsS0FBSy9GLE1BQU1pRSxPQUFPLENBQUUseUJBQTBCc0IsUUFDaEQsQ0FFQSxvQkFBQXNtRSxDQUFzQnZwRSxPQUVwQixPQURBQSxNQUFNRSxpQkFDRUYsTUFBTUksY0FBY0ksUUFBUXk0QixNQUNsQyxJQUFLLDRCQUNIeDFCLEtBQUsvRixNQUFNeTdCLFFBQ1QsT0FDQSw2QkFDQzExQixLQUFLL0YsTUFBTXF0QiwyQkFFZCxNQUNGLElBQUssaUJBQ0h0bkIsS0FBSy9GLE1BQU15N0IsUUFBUSxPQUFRLGtCQUFtQjExQixLQUFLL0YsTUFBTXNxRCxnQkFHL0QsQ0FFQSw0QkFBTW1oQixDQUF3Qm5wRSxPQUM1QkEsTUFBTUUsaUJBQ04sSUFBSXdsRSwwQkFDRixDQUNFaG9FLE1BQU8rRixLQUFLL0YsTUFDWm9FLEtBQU05QixNQUFNSSxjQUFjSSxRQUFRc0IsTUFFcEMsQ0FBQyxHQUNETCxRQUFPLEVBQ1gsQ0FFQSw2QkFBTTZuRSxDQUF5QnRwRSxPQUM3QixNQUFNZ2xDLE1BQVF6VixFQUFFdnZCLE1BQU1JLGVBQ2hCZ0ksT0FBUzQ4QixNQUFNMWtDLFFBQVEsWUFBWXlJLEtBQUssVUFDOUMsUUFBdUUsSUFBNUR0RixLQUFLL0YsTUFBTThCLE9BQU8wZ0QsbUJBQW1COTNDLFNBQVMrM0MsVUFBMkIsQ0FDbEYsTUFBTUQsaUJBQW1CNzlDLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBSy9GLE1BQU04QixPQUFPMGdELGtCQUNuRUEsaUJBQWlCOTNDLFFBQVErM0MsVUFBWXo0QyxTQUFTczlCLE1BQU1LLE1BQU8sSUFDM0Q1aEMsS0FBSy9GLE1BQU1pRSxPQUFPLENBQUUsMEJBQTJCdStDLGtCQUNqRCxDQUNGLENBRUEseUJBQUFrcEIsQ0FBMkJwcEUsT0FDekJBLE1BQU1FLGlCQUNOLE1BQU1rSSxPQUFTbW5CLEVBQUV2dkIsTUFBTUksZUFDcEJFLFFBQVEsWUFDUnlJLEtBQUssVUFDRm0zQyxpQkFBbUJ6OEMsS0FBSy9GLE1BQU04QixPQUFPMGdELGtCQUFvQixHQUMvREEsaUJBQWlCL2xCLE9BQU8veEIsT0FBUSxHQUNoQzgzQyxpQkFBaUJ0d0MsTUFBSyxTQUFVeXdDLEtBQU1DLE9BQ3BDLE9BQU9ELEtBQUt2K0MsS0FBS3krQyxjQUFjRCxNQUFNeCtDLEtBQ3ZDLElBQ0EyQixLQUFLL0YsTUFBTWlFLE9BQU8sQ0FBRSwwQkFBMkJ1K0Msa0JBQ2pELENBRUEseUJBQU0rb0IsQ0FBcUJqcEUsT0FNekIsYUFMTXlELEtBQUsvRixNQUFNeTdCLFFBQ2YsT0FDQSxpQkFDQzExQixLQUFLL0YsTUFBTXdGLFFBQVEsT0FBUSx3QkFFakJPLEtBQUtoQyxRQUFPLEVBQzNCLENBRUEsNkJBQU15bkUsQ0FBeUJscEUsT0FNN0IsYUFMTXlELEtBQUsvRixNQUFNeTdCLFFBQ2YsT0FDQSxxQkFDQzExQixLQUFLL0YsTUFBTXdGLFFBQVEsT0FBUSw0QkFFakJPLEtBQUtoQyxRQUFPLEVBQzNCLENBRUEsaUJBQU1zbkUsQ0FBYS9vRSxPQUNqQkEsTUFBTUUsaUJBQ04sTUFBTThYLFFBQVVoWSxNQUFNSSxjQUFjRSxRQUFRLFNBQVNFLFFBQVF1WCxhQUN2RHRVLEtBQUsvRixNQUFNZ3BELGFBQWExdUMsUUFBU2hZLE1BQU02eUIsU0FDL0MsQ0FFQSxjQUFBbTJDLENBQWdCaHBFLE9BQ2RBLE1BQU1FLGlCQUNOLE1BQU00QixLQUFPOUIsTUFBTUksY0FBY0ksUUFBUXNCLEtBQ25DNEgsS0FBT2pHLEtBQUsvRixNQUFNb0UsTUFDcEI0SCxNQUFNQSxLQUFLbEksTUFBTUMsUUFBTyxFQUM5QixDQUVBLGFBQUEwMEIsQ0FBZW4yQixNQUFPbzJCLFVBQ3BCLE1BQU01MkIsT0FBUzZDLFFBQVFDLE1BQU15ZixhQUFhcVUsV0FBVzUyQixPQUNqREEsT0FBTzQ5QyxVQUFVbjZDLFNBQ25CbXpCLFNBQVMsMEJBQTRCL3lCLE9BQU9KLE9BQU96RCxPQUFPNDlDLFNBQVNuNkMsUUFBVSxLQUUvRW5ELE1BQU1xMkIsY0FBY24yQixNQUFPbzJCLFNBQzdCLENBRUEsa0JBQU84aUIsQ0FBYTEzQyxNQUFPa2MsTUFDekIsR0FBSTNjLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHdCQUF5QixDQUNyRCxHQUFJSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwwQkFDNUIsR0FFRSxTQURBSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwwQkFBMEI4SyxjQUdwRGpLLE1BQU15VCxRQUFRc2pELElBQ1osa0JBQ0EsMENBU0YsR0FOQS8yRCxNQUFNeVQsUUFBUXNqRCxJQUNaLGtCQUNBeDNELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUtrQyxVQUE1REksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQzFCLENBQ0EsSUFBSXFwRSxXQUFZQyxhQUNoQixJQUFLLElBQUlobUQsRUFBSSxFQUFHQSxFQUFJMVIsU0FBUzIzRCxZQUFZN2xFLE9BQVE0ZixJQUMvQyxHQUFJMVIsU0FBUzIzRCxZQUFZam1ELEdBQUdrbUQsTUFBTUMsU0FBUyxhQUFjLENBQ3ZESixXQUFhejNELFNBQVMyM0QsWUFBWWptRCxHQUNsQyxLQUNGLENBR0YsR0FBSStsRCxXQUNGLElBQUssSUFBSS9sRCxFQUFJLEVBQUdBLEVBQUkrbEQsV0FBV0ssTUFBTWhtRSxPQUFRNGYsSUFDM0MsR0FDdUMsNEJBQXJDK2xELFdBQVdLLE1BQU1wbUQsR0FBR3FtRCxhQUNwQixDQUNBTCxhQUFlaG1ELEVBQ2YsS0FDRixDQUdKLEdBQUlnbUQsYUFBYyxDQUNoQixNQUFNTSxTQUFXUCxXQUFXSyxNQUFNSixjQUFjem1DLE1BTWhELE9BTEErbUMsU0FBU0MsZUFBZSxnQkFDeEJELFNBQVNFLFlBQ1AsYUFDQTFwRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFFcEJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLCtCQUNoQyxJQUFLLE9BU0wsUUFDRTRwRSxTQUFTRSxZQUFZLGtCQUFtQixRQUN4QyxNQVJGLElBQUssVUFDSEYsU0FBU0UsWUFBWSxrQkFBbUIsV0FDeEMsTUFDRixJQUFLLFFBQ0hGLFNBQVNFLFlBQVksa0JBQW1CLFNBTTlDLENBQ0YsQ0E4REosR0ExREkxcEUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUNBSUwsU0FGckJJLEtBQUttRSxTQUNGdkUsSUFBSSxPQUFRLCtCQUNaOEssY0FFSGpLLE1BQU15VCxRQUFRc2pELElBQ1osbUJBQ0EscUNBR0YvMkQsTUFBTXlULFFBQVFzakQsSUFDWixtQkFDQXgzRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQ0FLNUJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHVCQUcxQixTQURBSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFBcUI4SyxjQUcvQ2pLLE1BQU15VCxRQUFRc2pELElBQ1oscUJBQ0EscUNBR0YvMkQsTUFBTXlULFFBQVFzakQsSUFDWixxQkFDQXgzRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFLNUJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUM1QmEsTUFBTXlULFFBQVFzakQsSUFDWiwyQkFDQXgzRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFHMUJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDJCQUM1QmEsTUFBTXlULFFBQVFzakQsSUFDWiwwQkFDQXgzRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFHMUJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDRCQUM1QmEsTUFBTXlULFFBQVFzakQsSUFDWixpQ0FDQXgzRCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw0QkFHekJJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDZCQUM3QmEsTUFBTXlULFFBQVFzakQsSUFBSSxpQkFBa0IsUUFDcEMvMkQsTUFBTXlULFFBQVFzakQsSUFBSSxnQ0FBaUMsU0FHakR4M0QsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQW9CLENBQ3hCLElBQUkrcEUsU0FDMUIsa0JBQ0EzcEUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsb0JBR3pCZ3FFLE9BQ0E3L0QsTUFBSyxTQUFVOC9ELFlBQ2RyNEQsU0FBU3M0RCxNQUFNbjRELElBQUlrNEQsV0FDckIsSUFDQzNXLE9BQU0sU0FBVTl5QyxPQUNmM1UsR0FBR0MsY0FBYzBVLE1BQU1BLE1BQ3pCLEdBQ0osQ0FFQSxHQUFJcGdCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHVCQUF3QixDQUNyQixJQUFJK3BFLFNBQ2pDLGtCQUNBM3BFLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHVCQUMxQixDQUFFbXFFLE9BQVEsU0FHVEgsT0FDQTcvRCxNQUFLLFNBQVU4L0QsWUFDZHI0RCxTQUFTczRELE1BQU1uNEQsSUFBSWs0RCxXQUNyQixJQUNDM1csT0FBTSxTQUFVOXlDLE9BQ2YzVSxHQUFHQyxjQUFjMFUsTUFBTUEsTUFDekIsR0FDSixDQUVBLEdBQUlwZ0IsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBQXdCLENBQ3BELE1BQU1xQyxLQUFPLEdBQUdqQyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDdENxQyxPQUFTdXNCLEVBQUUsU0FBU2dwQyxJQUFJLGNBQzFCaHBDLEVBQUUsU0FBU2dwQyxJQUFJLFlBQWF2MUQsS0FFaEMsQ0FDRixDQUVBLFFBQTBDLElBQS9CeEIsTUFBTTlELE9BQU84QixPQUFPZ2tFLE9BQzdCLElBQUssTUFBT2xrRSxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFReE0sTUFBTTlELE1BQU04QixPQUFPZ2tFLFFBQVMsQ0FDcEUsTUFBTUQsWUFBY3R3RCxXQUFXb0Isa0JBQWtCL1UsS0FDM0Nra0UsT0FBUzlsRCxLQUFLdmEsS0FBSyxXQUFXb2dFLGVBQ2hDNXBFLE1BQU1veEUsU0FBVXZILE9BQU8vSSxTQUFTLFlBQy9CK0ksT0FBT3p4QixZQUFZLFdBQzFCLENBRUosRUM5bEJLLE1BQU1pNUIsV0FDWCwwQkFBT0MsQ0FBcUI5d0UsSUFBS3VqQixLQUFNM1UsTUFDckMsTUFBTW1pRSxjQUFnQm5pRSxLQUFLb2lFLFFBQVFwaUUsS0FBS3FpRSxhQUFlLEdBQ2xERixnQkFJTHh0RCxLQUFLdmEsS0FBSyxjQUFjeTJELE1BQUssQ0FBQzMxQyxFQUFHMjNCLE1BRy9CLE1BQU15dkIsT0FBU3p2QixHQUFHdkosYUFBYSxxQkFDekJpNUIscUJBQXVCMXZCLEdBQUd2a0MsY0FBYyx1QkFFeENrMEQsVUFBWUwsY0FBY00sV0FBVzdxRSxJQUFJMHFFLFFBZS9DLEdBYklFLFVBQVVyb0UsUUFBUSxPQUFRLFVBQzVCcXNCLEVBQUUrN0Msc0JBQXNCRyxRQUN0Qix1REFBdUQxcUUsS0FBS0MsS0FBS0MsU0FDL0QsK0ZBSUpzdUIsRUFBRSs3QyxzQkFBc0JHLFFBQ3RCLGdEQUFnRDFxRSxLQUFLQyxLQUFLQyxTQUN4RCw0RkFLNEMsYUFBaERGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLG1CQUMxQkksS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBRTFCLEdBQUk0cUUsVUFBVUcsV0FBWSxDQUN4QixNQUFNQyxnQkFBa0IvdkIsR0FBR3ZrQyxjQUFjLHFCQUNuQ3UwRCxlQUFpQkQsZ0JBQWdCdDBELGNBQWMsZUFDL0N6UyxLQUNKLElBQU0ybUUsVUFBVUcsV0FBYSxJQUFNN2xFLEtBQUswSSxNQUFNZzlELFVBQVVHLFlBQzFELE9BQVE3bEUsS0FBSzBJLE1BQU1nOUQsVUFBVUcsYUFDM0IsS0FBS2wwRCxVQUFVRCxhQUFhTSxPQUMxQjh6RCxnQkFBZ0JsNUQsVUFBVUMsSUFBSSxVQUM5Qms1RCxlQUFlajZDLFVBQVk1d0IsS0FBS0MsS0FBS0MsU0FBUyxlQUM5QzJxRSxlQUFlejVELE1BQVF2TixLQUN2QixNQUNGLEtBQUs0UyxVQUFVRCxhQUFhTyxRQUMxQjZ6RCxnQkFBZ0JsNUQsVUFBVUMsSUFBSSxXQUM5Qms1RCxlQUFlajZDLFVBQVk1d0IsS0FBS0MsS0FBS0MsU0FBUyxnQkFDOUMycUUsZUFBZXo1RCxNQUFRdk4sS0FDdkIsTUFDRixLQUFLNFMsVUFBVUQsYUFBYUUsUUFDMUJrMEQsZ0JBQWdCbDVELFVBQVVDLElBQUksbUJBQzlCazVELGVBQWVqNkMsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUNuQyw4QkFFRjJxRSxlQUFlejVELE1BQVF2TixLQUN2QixNQUNGLEtBQUs0UyxVQUFVRCxhQUFhSSxLQUMxQmcwRCxnQkFBZ0JsNUQsVUFBVUMsSUFBSSxnQkFDOUJrNUQsZUFBZWo2QyxVQUFZNXdCLEtBQUtDLEtBQUtDLFNBQ25DLDJCQUVGMnFFLGVBQWV6NUQsTUFBUXZOLEtBQ3ZCLE1BQ0YsS0FBSzRTLFVBQVVELGFBQWF6SixRQUMxQjY5RCxnQkFBZ0JsNUQsVUFBVUMsSUFBSSxtQkFDOUJrNUQsZUFBZWo2QyxVQUFZNXdCLEtBQUtDLEtBQUtDLFNBQ25DLDhCQUVGMnFFLGVBQWV6NUQsTUFBUXZOLEtBQ3ZCLE1BQ0YsS0FBSzRTLFVBQVVELGFBQWFLLFNBQzFCK3pELGdCQUFnQmw1RCxVQUFVQyxJQUFJLFlBQzlCazVELGVBQWVqNkMsVUFBWTV3QixLQUFLQyxLQUFLQyxTQUNuQywrQkFFRjJxRSxlQUFlejVELE1BQVF2TixLQUc3QixPQUNLLEdBQUkybUUsVUFBVUcsV0FBYSxFQUFHLENBQ25DLE1BQU1HLEdBQUtqd0IsR0FBR3ZrQyxjQUFjLGVBQWVBLGNBQWMsTUFDbkQyaEIsS0FBTzRpQixHQUFHdmtDLGNBQWMsbUJBQzlCdzBELEdBQUdyb0MsTUFBTXNvQyxXQUFhLE1BQ3RCRCxHQUFHcm9DLE1BQU11b0MsV0FBYSxzQkFDdEIveUMsS0FBS3dLLE1BQU1zb0MsV0FBYSxNQUN4Qjl5QyxLQUFLd0ssTUFBTXVvQyxXQUFhLHNCQUV4Qm53QixHQUFHcFksTUFBTWcxQixNQUFRLFVBQ2pCNWMsR0FBR3BZLE1BQU13b0MsV0FBYSxRQUN0QnB3QixHQUFHcFksTUFBTXNvQyxXQUFhLEtBQ3hCLEtBRUZwdUQsS0FBS3ZhLEtBQUssYUFBYXN5QixPQUFNejFCLE9BQVNnckUsV0FBV2lCLGFBQWFqc0UsU0FDaEUsQ0FFQSx5QkFBYWlzRSxDQUFjanNFLE9BQ3pCQSxNQUFNRSxpQkFDTkYsTUFBTWtoRSxrQkFDTixNQUNNN2dFLEdBRE1MLE1BQU1JLGNBQ0hFLFFBQVEsY0FDakJ1ekIsUUFBVTl5QixLQUFLbkcsT0FBTzR3RSxXQUFXN3FFLElBQUlOLEdBQUdHLFFBQVEwckUsYUFDbERyNEMsRUFBRW4yQixNQUFNdS9CLFVBQ05wSixFQUFFM3dCLFFBQVEsT0FBUSxnQkFDZDJ3QixFQUFFc0YsUUFBUSxPQUFRLFVBQVUsU0FFNUJ0RixFQUFFc0YsUUFBUSxPQUFRLFVBQVUsSUFJdEMsTUFBTWd6QyxjQUFnQnQ0QyxFQUFFbjJCLE1BQU13bUQsaUJBQWlCcndCLEVBQUUzd0IsUUFBUSxPQUFRLFdBQzdEMndCLEVBQUUzd0IsUUFBUSxPQUFRLFVBQ2hCMndCLEVBQUU2M0MsV0FBYVMsU0FBU3ByRSxLQUFLbkcsT0FBT3d4RSxjQUFjdjRDLEVBQUVsaUIsR0FBSXc2RCxTQUN2RHByRSxLQUFLbkcsT0FBT3d4RSxjQUFjdjRDLEVBQUVsaUIsR0FBSXc2RCxRQUN6QyxFQVlLcG1FLGVBQWVtK0MsZUFDcEJtb0IsS0FDQSxRQUFZLEtBQUksWUFBZSxFQUFJLGVBQW1CLENBQUMsR0FBTSxDQUFDLEdBRzlELE1BQU1uc0QsUUFBVSxHQUNoQixJQUFLLE1BQU8sQ0FBRXZPLE1BQU8wNkQsSUFBSXIrRCxVQUFXLENBRWxDLE1BQU11OUQsVUFBWTluRSxLQUFLK25FLFdBQVc3cUUsSUFBSWdSLElBR2hDL00sV0FBYTJtRSxVQUFVN3RFLE1BQU13bUQsaUJBQy9CcW5CLFVBQVVyb0UsUUFBUSxPQUFRLFdBRTlCZ2QsUUFBUXZsQixLQUFLLENBQUVtN0MsSUFBS25rQyxHQUFJKzVELFdBQVk5bUUsTUFDdEMsQ0FDQSxPQUFLc2IsUUFBUTdiLGNBR1BaLEtBQUt1NEMsd0JBQXdCLFlBQWE5N0IsU0FFekN6YyxNQUxxQkEsSUFNOUIsQ0NsSk8sTUFBTTZvRSxtQkFBbUJydkQsZ0JBQzlCLHlCQUFXQyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsU0FBVSxpQkFDNUJDLFNBQVUsK0NBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxPQUNSckwsTUFBTyx1QkFDUG1MLGVBQWUsRUFDZjI0QyxlQUFlLEVBQ2ZDLGdCQUFnQixHQUVwQixDQUVBLGFBQU10aEMsR0FDSixNQUFNQyxVQUFZLzBCLE1BQU04MEIsVUFTeEIsT0FSQUMsVUFBVTAzQyxVQUFZbHBFLE9BQU9tRSxLQUFLcXRCLFVBQVU3ZixPQUFPdTNELFdBQVc3OEQsUUFBTyxDQUFDODhELElBQUtsdEUsT0FDekVrdEUsSUFBSTd4RSxLQUFLLENBQUVkLEtBQU15RixJQUFLQSxJQUFLdTFCLFVBQVU3ZixPQUFPdTNELFVBQVVqdEUsT0FDL0NrdEUsTUFDTixJQUFJNThELEtBQUt2RSxjQUFjd0UsZUFDMUJnbEIsVUFBVTQzQyxhQUFlcHBFLE9BQU9tRSxLQUFLcXRCLFVBQVU3ZixPQUFPeTNELGNBQWMvOEQsUUFBTyxDQUFDODhELElBQUtsdEUsT0FDL0VrdEUsSUFBSTd4RSxLQUFLLENBQUUyRSxJQUFLdTFCLFVBQVU3ZixPQUFPdTNELFVBQVVqdEUsTUFBUSxHQUFJekYsS0FBTXlGLElBQUswbkQsT0FBUW55QixVQUFVN2YsT0FBT3kzRCxhQUFhbnRFLEtBQU1vdEUsT0FBUTczQyxVQUFVN2YsT0FBT3kzRCxhQUFhbnRFLEtBQUs4VCxRQUFRM1AsS0FBS3VSLE9BQU8yM0QsYUFBYyxNQUNwTEgsTUFDTixJQUFJNThELEtBQUt2RSxjQUFjd0UsZUFDbkJnbEIsU0FDVCxDQUVBLGlCQUFBcFgsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFDeEJBLEtBQUt2YSxLQUFLLGFBQWE5RCxPQUFPb0UsS0FBS21wRSxVQUFVbHdFLEtBQUsrRyxPQUNsRGlhLEtBQUt2YSxLQUFLLGtCQUFrQnN5QixNQUFNaHlCLEtBQUtvcEUsYUFBYW53RSxLQUFLK0csT0FDekRpYSxLQUFLdmEsS0FBSyxTQUFTMnBFLE1BQU1ycEUsS0FBS3NwRSxRQUFRcndFLEtBQUsrRyxNQUM3QyxDQUVBLFNBQUFtcEUsQ0FBVzVzRSxPQUNULE1BQU1zVixJQUFNaWEsRUFBRXZ2QixNQUFNSSxlQUNwQnFELEtBQUt1UixPQUFPeTNELGFBQWFuM0QsSUFBSWhWLFFBQVEsTUFBTXlJLEtBQUssU0FBV3VNLElBQUkrdkIsTUFDL0Q1aEMsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLFlBQUFvckUsQ0FBYzdzRSxPQUNaLE1BQ01uRyxLQURNMDFCLEVBQUV2dkIsTUFBTUksZUFDSEUsUUFBUSxNQUFNeUksS0FBSyxRQUNwQ3RGLEtBQUt1UixPQUFPeTNELGFBQWE1eUUsTUFBUTRKLEtBQUt1UixPQUFPdWhELFNBQVdsckQsY0FBY3dxRCxZQUFZaDhELE1BQ2xGNEosS0FBS2hDLFFBQU8sRUFDZCxDQUVBLE9BQUFzckUsQ0FBUy9zRSxPQUNQLE1BQU1zVixJQUFNaWEsRUFBRXZ2QixNQUFNSSxlQUNkdkcsS0FBT3liLElBQUloVixRQUFRLE1BQU15SSxLQUFLLFFBQ3BDdEYsS0FBS3VSLE9BQU95M0QsYUFBYTV5RSxNQUFRNEosS0FBS3VSLE9BQU91aEQsU0FBV2poRCxJQUFJK3ZCLEtBQzlELENBRUEsbUJBQU1sUCxDQUFlbjJCLE1BQU9vMkIsVUFDdEJwMkIsTUFBTXkyQixZQUNKaHpCLEtBQUt1UixPQUFPZzRELFdBQWFqc0UsS0FBS0MsS0FBS0MsU0FBUyx5QkFDOUN3QyxLQUFLbWIsY0FDQzB0RCxXQUFXVyxpQkFBaUJ4cEUsS0FBS3VSLE9BQU9rNEQsV0FBWXpwRSxLQUFLdVIsT0FBT3kzRCxlQUV4RWhwRSxLQUFLdVIsT0FBTzJKLFNBQVEsR0FFeEIsQ0FFQSw2QkFBYXN1RCxDQUFrQkMsV0FBWVQsY0FDekMsTUFBTTc2RCxNQUFRLEdBQ1J4QixPQUFTLENBQUMsRUFDVkcsT0FBUyxDQUFDLEVBQ2hCLElBQUssTUFBTTVPLFVBQVV1ckUsV0FBWSxDQUMvQnZyRSxPQUFPMDBDLFVBQVUxa0MsR0FBSzg2RCxhQUFhOXFFLE9BQU85SCxXQUNMLElBQTFCOEgsT0FBTzAwQyxVQUFVb2dCLE9BQzFCOTBELE9BQU8wMEMsVUFBVW9nQixLQUFPMTFELEtBQUtDLEtBQUt5MUQsV0FFSyxJQUE5QjkwRCxPQUFPMDBDLFVBQVVlLFdBQzFCejFDLE9BQU8wMEMsVUFBVWUsU0FBVyxRQUVPLElBQTFCejFDLE9BQU8wMEMsVUFBVWxzQyxPQUMxQnhJLE9BQU8wMEMsVUFBVWxzQyxLQUFPLENBQUMsR0FFM0IsTUFBTXhILE1BQVFOLFFBQVFDLE1BQU1zMEQsY0FBYyxDQUFFajBELE1BQU8sQ0FBRXdDLEtBQU0sQ0FBRWt4QyxVQUFXMTBDLE9BQU8wMEMsY0FDL0UsUUFBNEIsSUFBakIxMEMsT0FBTzJPLE1BQXVCLENBQ3ZDLFFBQW9DLElBQXpCQyxPQUFPNU8sT0FBTzJPLE9BQXdCLENBQy9DLE1BQU1BLE1BQVF2UCxLQUFLd1AsT0FBTzVQLElBQUlnQixPQUFPMk8sT0FDckNDLE9BQU81TyxPQUFPMk8sT0FBU0EsTUFBTXNvQyxVQUMvQixDQUNBLE1BQU11MEIsWUFBYzU4RCxPQUFPNU8sT0FBTzJPLE9BQU9ELE9BQU95ckMsV0FBVXQxQyxHQUFLQSxFQUFFc3ZDLE1BQVFuMEMsT0FBTytTLFFBQ2hGLEdBQUl5NEQsYUFBZSxFQUFHLENBQ3BCLE1BQU1DLFdBQWE3OEQsT0FBTzVPLE9BQU8yTyxPQUFPRCxPQUFPODhELGFBQWFFLFVBQVV6N0QsTUFBTWtxQyxXQUFVNzNCLEdBQUtBLEVBQUU2eEIsTUFBUW4wQyxPQUFPK0gsT0FDNUcsR0FBSTBqRSxZQUFjLEVBQUcsQ0FDbkIsTUFBTUUsY0FBZ0JqckUsUUFBUUMsTUFBTXlmLGFBQWExZSxPQUFPMkssUUFBUXJMLE9BQU8rTSxRQUFPLENBQUM4OEQsSUFBS3p1QixTQUM5RUEsTUFBTSxHQUFHejBDLE1BQU0sNkJBQ2pCa2pFLElBQUl6dUIsTUFBTSxJQUFNQSxNQUFNLElBRWpCeXVCLE1BQ04sQ0FBQyxJQUNKajhELE9BQU81TyxPQUFPMk8sT0FBT0QsT0FBTzg4RCxhQUFhRSxVQUFVejdELE1BQU13N0QsWUFBYy9xRSxRQUFRQyxNQUFNNmEsWUFBWTVNLE9BQU81TyxPQUFPMk8sT0FBT0QsT0FBTzg4RCxhQUFhRSxVQUFVejdELE1BQU13N0QsWUFBYUUsY0FDekssQ0FDRixDQUNGLE1BQU8sUUFBNEIsSUFBakIzckUsT0FBT2pFLE1BQXVCLE1BQ1YsSUFBekIwUyxPQUFPek8sT0FBT2pFLFNBQ3ZCMFMsT0FBT3pPLE9BQU9qRSxPQUFTLElBRXpCLE1BQU1nTSxLQUFPLENBQ1hvc0MsSUFBS24wQyxPQUFPK0gsTUFFZCxJQUFLLE1BQU1wSyxPQUFPK0QsT0FBT21FLEtBQUs3RSxPQUN4QnJELElBQUlnSyxNQUFNLDZCQUNaSSxLQUFLcEssS0FBT3FELE1BQU1yRCxNQUd0QjhRLE9BQU96TyxPQUFPakUsT0FBTy9DLEtBQUsrTyxLQUM1QixLQUFPLENBQ0wsTUFBTUEsS0FBTyxDQUNYb3NDLElBQUtuMEMsT0FBTytILE1BRWQsSUFBSyxNQUFNcEssT0FBTytELE9BQU9tRSxLQUFLN0UsT0FDeEJyRCxJQUFJZ0ssTUFBTSw2QkFDWkksS0FBS3BLLEtBQU9xRCxNQUFNckQsTUFHdEJzUyxNQUFNalgsS0FBSytPLEtBQ2IsQ0FDRixDQUlBLEdBSElrSSxNQUFNdk4sY0FDRndFLEtBQUswa0UsZ0JBQWdCMzdELE9BRXpCdk8sT0FBT21FLEtBQUs0SSxRQUFRL0wsT0FDdEIsSUFBSyxNQUFNc00sV0FBV3ROLE9BQU9tRSxLQUFLNEksY0FDMUJ2SCxLQUFLMGtFLGdCQUFnQm45RCxPQUFPTyxTQUFVLENBQUVuRCxPQUFRek0sS0FBS3FQLE9BQU96UCxJQUFJZ1EsV0FHMUUsR0FBSXROLE9BQU9tRSxLQUFLK0ksUUFBUWxNLE9BQ3RCLElBQUssTUFBTTZMLFdBQVc3TSxPQUFPbUUsS0FBSytJLFFBQVMsQ0FDM0J4UCxLQUFLd1AsT0FBTzVQLElBQUl1UCxTQUN4QnZPLE9BQU80TyxPQUFPTCxTQUN0QixDQUVGLE9BQU8sQ0FDVCxDQUVBLDhCQUFhczlELENBQW1CTixXQUFZVCxhQUFjRixXQUN4RCxJQUFLLE1BQU03dUUsU0FBU3FELEtBQUtxUCxPQUFPNjRDLFNBQVUsQ0FDeEMsTUFBTW9rQixVQUFZM3ZFLE1BQU1rN0MsV0FDeEIsR0FBSXkwQixVQUFVejdELE1BQ1osSUFBSyxNQUFNbEksUUFBUTJqRSxVQUFVejdELE1BQU8sQ0FDbEMsTUFBTSttQyxTQUFXanZDLGdCQUFnQnJELE9BQU93QyxLQUFLWSxjQUFnQkMsS0FBS2t2QyxXQUFhbHZDLEtBQ3pELFVBQWxCaXZDLFNBQVM3MkMsT0FDTjYyQyxTQUFTaDJDLE1BQU13QyxNQUFNa3hDLFdBQVcxa0MsSUFBSXJJLE1BQU0sWUFXN0NpakUsVUFBVTV6QixTQUFTOStDLE1BQVE4K0MsU0FBU2gyQyxNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLFNBVmQsSUFBaEM4NkQsYUFBYTl6QixTQUFTOStDLFFBQy9CNHlFLGFBQWE5ekIsU0FBUzkrQyxNQUFRLElBRWhDcXpFLFdBQVd2eUUsS0FBSyxDQUNkK0MsTUFBT0EsTUFBTW80QyxJQUNicHNDLEtBQU1pdkMsU0FBUzdDLElBQ2ZqOEMsS0FBTTgrQyxTQUFTOStDLEtBQ2Z3OEMsVUFBV3NDLFNBQVNoMkMsTUFBTXdDLE1BQU1reEMsV0FBYSxDQUFDLEtBTXRELENBRUosQ0FDQSxJQUFLLE1BQU0zc0MsUUFBUTNJLEtBQUs2USxNQUFNcTNDLFNBQVUsQ0FDdEMsTUFBTXRRLFNBQVdqdkMsZ0JBQWdCckQsT0FBT3dDLEtBQUtZLGNBQWdCQyxLQUFLa3ZDLFdBQWFsdkMsS0FDekQsVUFBbEJpdkMsU0FBUzcyQyxPQUNONjJDLFNBQVNoMkMsTUFBTXdDLE1BQU1reEMsV0FBVzFrQyxJQUFJckksTUFBTSxZQVU3Q2lqRSxVQUFVNXpCLFNBQVM5K0MsTUFBUTgrQyxTQUFTaDJDLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsU0FUZCxJQUFoQzg2RCxhQUFhOXpCLFNBQVM5K0MsUUFDL0I0eUUsYUFBYTl6QixTQUFTOStDLE1BQVEsSUFFaENxekUsV0FBV3Z5RSxLQUFLLENBQ2QrTyxLQUFNaXZDLFNBQVM3QyxJQUNmajhDLEtBQU04K0MsU0FBUzkrQyxLQUNmdzhDLFVBQVdzQyxTQUFTaDJDLE1BQU13QyxNQUFNa3hDLFdBQWEsQ0FBQyxLQU10RCxDQUNBLElBQUssTUFBTS9sQyxTQUFTdlAsS0FBS3dQLE9BQVEsQ0FDL0IsTUFBTWs5RCxVQUFZbjlELE1BQU1zb0MsV0FDeEIsSUFBSyxNQUFNbGtDLFNBQVMrNEQsVUFBVXA5RCxRQUFVLEdBQ3RDLEdBQUlxRSxNQUFNL0QsVUFBWStELE1BQU0raUMsVUFBVyxDQUNyQyxNQUFNNDFCLFVBQVlockUsUUFBUUMsTUFBTXdPLFVBQVU0RCxNQUFNMjRELFdBQ2hELElBQUssTUFBTTNqRSxRQUFRMmpFLFVBQVV6N0QsT0FBUyxHQUFJLENBQ3hDLE1BQU0rbUMsU0FBV2p2QyxnQkFBZ0JyRCxPQUFPd0MsS0FBS1ksY0FBZ0JDLEtBQUtrdkMsV0FBYWx2QyxLQUN6RCxVQUFsQml2QyxTQUFTNzJDLE9BQ042MkMsU0FBU2gyQyxNQUFNd0MsTUFBTWt4QyxXQUFXMWtDLElBQUlySSxNQUFNLFlBWTdDaWpFLFVBQVU1ekIsU0FBUzkrQyxNQUFROCtDLFNBQVNoMkMsTUFBTXdDLEtBQUtreEMsVUFBVTFrQyxTQVhkLElBQWhDODZELGFBQWE5ekIsU0FBUzkrQyxRQUMvQjR5RSxhQUFhOXpCLFNBQVM5K0MsTUFBUSxJQUVoQ3F6RSxXQUFXdnlFLEtBQUssQ0FDZDJWLE1BQU9tOUQsVUFBVTMzQixJQUNqQnBoQyxNQUFPQSxNQUFNb2hDLElBQ2Jwc0MsS0FBTWl2QyxTQUFTN0MsSUFDZmo4QyxLQUFNOCtDLFNBQVM5K0MsS0FDZnc4QyxVQUFXc0MsU0FBU2gyQyxNQUFNd0MsTUFBTWt4QyxXQUFhLENBQUMsS0FNdEQsQ0FDRixDQUVKLENBQ0EsR0FBSWh6QyxPQUFPbUUsS0FBS2lsRSxjQUFjM3lFLFFBQU93RixLQUE2QixLQUF0Qm10RSxhQUFhbnRFLE9BQWErRSxPQUFTLEVBQUcsQ0FDaEYsTUFBTXVOLFlBQWM3USxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNNjBCLG1CQUFtQixDQUFFQyxZQUFhLGNBQWU1NUMsS0FBTSxJQUFLODZDLEtBQUssSUFDM0csSUFBSyxNQUFNbHpDLFFBQVFrSSxNQUNqQjI2RCxVQUFVN2lFLEtBQUs3UCxNQUFRNlAsS0FBSy9HLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsR0FFbkQsTUFBTWdsRCxVQUFZdHpELE9BQU95ZSxPQUFPemYsUUFBUUMsTUFBTXMwRCxjQUFjNzFELEtBQUtDLEtBQUs2MUQsVUFBVTF4RCxNQUFNMnhELFdBQVd0dkQsTUFBUSxDQUFDLEdBQUluRixRQUFRQyxNQUFNczBELGNBQWM3MUQsS0FBS0MsS0FBSysxRCxhQUFhNXhELE1BQU0yeEQsV0FBV3R2RCxNQUFRLENBQUMsSUFDM0wsSUFBSyxNQUFNbEksT0FBT3EzRCxVQUNoQjRWLFVBQVV4ckUsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXlCcFksTUFBUUEsSUFFOUQsSUFBSyxNQUFNekYsUUFBUTR5RSxrQkFDYyxJQUFwQkYsVUFBVTF5RSxRQUNuQjR5RSxhQUFhNXlFLE1BQVEweUUsVUFBVTF5RSxNQUdyQyxDQUNGLENBRUEsbUJBQWFzYSxDQUFRclMsTUFDbkIsTUFBTW9yRSxXQUFhLEdBQ2JULGFBQWUsQ0FBQyxFQUNoQkYsVUFBWSxDQUFDLEVBQ25CLElBQUlTLFNBQVcsR0FDWHpXLFNBQVcsR0FDWG9XLGFBQWUsS0FDbkIsTUFDTyxVQURDN3FFLE9BRUprckUsU0FBV2pzRSxLQUFLQyxLQUFLQyxTQUFTLHVCQUM5QnMxRCxTQUFXLFdBQ1hvVyxhQUFlLG9CQUtiTCxXQUFXa0Isa0JBQWtCTixXQUFZVCxhQUFjRixXQUNvQixJQUE3RWxwRSxPQUFPbUUsS0FBS2lsRSxjQUFjM3lFLFFBQU93RixLQUE2QixLQUF0Qm10RSxhQUFhbnRFLE9BQWErRSxjQUM5RGlvRSxXQUFXVyxpQkFBaUJDLFdBQVlULGVBQ3ZDLEdBRUYsSUFBSTlzRCxTQUFRaEIsVUFDTCxJQUFJMnRELFdBQVcsQ0FBRVUsU0FBVXpXLFNBQVVvVyxhQUFjTyxXQUFZVCxhQUFjRixVQUFXNXRELFVBQ2hHbGQsUUFBTyxFQUFJLElBRW5CLEVDeFBLLE1BQU1pc0UsUUFDWCwyQkFBYUMsR0FDWCxJQUFJQyxvQkFBc0I3c0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsdUJBQ2hESSxLQUFLcVAsT0FBT3BOLEtBQU9qQyxLQUFLd1AsT0FBT3ZOLEtBQU9qQyxLQUFLNlEsTUFBTTVPLEtBQU9qQyxLQUFLOHNFLFFBQVE3cUUsS0FBT2pDLEtBQUt1M0MsT0FBT3QxQyxPQUFTLElBRW5HNHFFLG9CQUFzQjdzRSxLQUFLdkIsT0FBT2dELGNBQzVCekIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsc0JBQXVCK2hFLHNCQUV6RCxNQUFNRSxXQUFhenJFLFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLdkIsT0FBT2dELFFBQVNvckUscUJBQXVCLEtBQzVGbnFFLEtBQUtzcUUsZUFBaUJodEUsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsK0JBQWlDLENBQUMsRUFDbEY4QyxLQUFLdXFFLGVBQWlCLENBQUMsRUFDdkIsSUFBSyxNQUFNdjdDLFFBQVExeEIsS0FBS3dpRCxNQUN0QixJQUFLLENBQUMsT0FBUSxTQUFTOThDLFNBQVNnc0IsS0FBSyt3QixTQUFTeXFCLGNBQWdCLENBQUMsUUFBUyxPQUFRLFNBQVN4bkUsU0FBU2dzQixLQUFLK3dCLFNBQVMxaEQsUUFDekd1QixPQUFPQyxVQUFVQyxlQUFlakgsS0FBS21ILEtBQUt1cUUsZUFBZ0J2N0MsS0FBSyt3QixTQUFTeXFCLGFBQWMsQ0FFekYsTUFBTUMsT0FBU250RSxLQUFLa0UsUUFBUXRFLElBQUk4eEIsS0FBSyt3QixTQUFTeXFCLGFBQzlDLEdBQUlDLFNBQ0VKLGFBQWV6cUUsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUttSCxLQUFLc3FFLGVBQWdCRyxPQUFPdjhELEtBQU85UixPQUFPNEQsS0FBS3NxRSxlQUFlRyxPQUFPdjhELE9BQVM5UixPQUFPcXVFLE9BQU8xckUsVUFBVSxDQUU1SixNQUFNMnJFLG9CQUFzQixDQUMxQixpREFBa0QsUUFDbEQsNkJBQThCLE1BQzlCLDZCQUE4QixPQUVjLGlCQUFuQ0Esb0JBQW9CRCxPQUFPdjhELElBQ2hDdFAsUUFBUUMsTUFBTUMsZUFBZTJyRSxPQUFPMXJFLFFBQVMyckUsb0JBQW9CRCxPQUFPdjhELE9BQzFFbE8sS0FBS3VxRSxlQUFlRSxPQUFPdjhELElBQU11OEQsT0FBTzFyRSxTQUcxQ2lCLEtBQUt1cUUsZUFBZUUsT0FBT3Y4RCxJQUFNdThELE9BQU8xckUsT0FFNUMsQ0FFSixFQUdBc3JFLFlBQWN6cUUsT0FBT21FLEtBQUsvRCxLQUFLdXFFLGdCQUFnQjNwRSxPQUFTLEtBQ3REdEQsS0FBS3NHLEtBQUsyRSxLQUNaLElBQUlrc0IsT0FBTyxDQUNUL2xCLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLHNCQUMxQmlULFFBQVNuVCxLQUFLQyxLQUFLMFcsT0FDMkIsSUFBNUNyVSxPQUFPbUUsS0FBSy9ELEtBQUt1cUUsZ0JBQWdCM3BFLE9BQzdCLHVCQUNBLGtDQUNKLENBQ0U3QixRQUFTekIsS0FBS3ZCLE9BQU9nRCxRQUNyQnlDLFFBQ0UsV0FDQTVCLE9BQU9tRSxLQUFLL0QsS0FBS3VxRSxnQkFDZHZtRSxLQUFJMm1FLEtBQU9ydEUsS0FBS2tFLFFBQVF0RSxJQUFJeXRFLEtBQUtqOEQsUUFDakNySyxLQUFLLGFBQ1IsZUFHTnF3QixRQUFTLENBQ1B4MkIsT0FBUSxDQUNOYixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLDZCQUMxQm0zQixTQUFVcnlCLFNBQVkybkUsUUFBUS9yRSxVQUVoQzBzRSxLQUFNLENBQ0p2dEUsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUywrQkFHN0JRLFFBQU8sR0FFVixJQUFJeTJCLE9BQU8sQ0FDVC9sQixNQUFPcFIsS0FBS0MsS0FBS0MsU0FBUyxzQkFDMUJpVCxRQUFTblQsS0FBS0MsS0FBSzBXLE9BQU8sMEJBQTJCLENBQ25EbFYsUUFBU3pCLEtBQUt2QixPQUFPZ0QsVUFFdkIyMUIsUUFBUyxDQUNQbTJDLEdBQUksQ0FDRnh0RSxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLCtCQUc3QlEsUUFBTyxHQUdoQixDQUVBLG1CQUFhRSxTQUNMOEIsS0FBSzhwRSxrQkFhUHhzRSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxlQUM1QkksS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsMkJBQTJCLEdBQ3JEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsK0JBQStCLEdBQ3pEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEscUJBQXFCLEdBQy9DOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsd0JBQXdCLEdBQ2xEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsbUJBQW1CLEdBQzdDOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsMEJBQTBCLEdBQ3BEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsNkJBQTZCLEdBQ3ZEOUssS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsOEJBQThCLFVBR3BEeWdFLFdBQVduNEQsT0FBTyxTQUV4QixNQUFNalAsU0FBVzdDLFFBQVFDLE1BQU02YSxZQUFZMVosS0FBS3NxRSxnQkFBa0IsQ0FBQyxFQUFHdHFFLEtBQUt1cUUsZ0JBQzNFanRFLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLDZCQUE4QjNHLFVBQ3hEbkUsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsc0JBQXVCOUssS0FBS3ZCLE9BQU9nRCxTQUU3RGdLLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBSzBXLE9BQU8seUJBQTBCLENBQy9ENjJELFdBQVcsR0FFZixDQUVBLDRCQUFhaEIsR0FFWCxJQUFLLE1BQU03dkUsU0FBU3FELEtBQUtxUCxPQUFPNjRDLFNBQzlCLElBQ0UsTUFBTWp6QixXQUFhdnlCLEtBQUsrcUUsaUJBQWlCOXdFLE1BQU1rN0MsWUFDMUN2MkMsUUFBUUMsTUFBTW1zRSxRQUFRejRDLGNBQ3pCcG5CLFFBQVEyK0IsSUFBSSw0QkFBNEI3dkMsTUFBTTdELGNBQ3hDNkQsTUFBTWlFLE9BQU9xMEIsV0FBWSxDQUFFMDRDLGNBQWMsSUFFbkQsQ0FBRSxNQUFPamdFLEtBQ1BHLFFBQVEyK0IsSUFBSSxnQkFBaUI5K0IsS0FDN0JBLElBQUk4RSxRQUFVeFMsS0FBS0MsS0FBSzBXLE9BQU8sMEJBQTJCLENBQ3hEN2QsS0FBTTZELE1BQU03RCxLQUNaMFosUUFBUzlFLElBQUk4RSxVQUVmL0csR0FBR0MsY0FBYzBVLE1BQU0xUyxJQUFJOEUsUUFBUyxDQUFFZzdELFdBQVcsR0FDbkQsQ0FJRixJQUFLLE1BQU03a0UsUUFBUTNJLEtBQUs2USxNQUFNcTNDLFNBQzVCLElBQ0UsTUFBTWp6QixXQUFhMDNDLFFBQVFpQixnQkFBZ0JqbEUsS0FBS2t2QyxZQUMzQ3YyQyxRQUFRQyxNQUFNbXNFLFFBQVF6NEMsY0FDekJwbkIsUUFBUTIrQixJQUFJLDJCQUEyQjdqQyxLQUFLN1AsY0FDdEM2UCxLQUFLL0gsT0FBT3EwQixXQUFZLENBQUUwNEMsY0FBYyxJQUVsRCxDQUFFLE1BQU9qZ0UsS0FDUEcsUUFBUTIrQixJQUFJLGdCQUFpQjkrQixLQUM3QkEsSUFBSThFLFFBQVV4UyxLQUFLQyxLQUFLMFcsT0FBTyx5QkFBMEIsQ0FDdkQ3ZCxLQUFNNlAsS0FBSzdQLEtBQ1gwWixRQUFTOUUsSUFBSThFLFVBRWYvRyxHQUFHQyxjQUFjMFUsTUFBTTFTLElBQUk4RSxRQUFTLENBQUVnN0QsV0FBVyxHQUNuRCxDQUlGLElBQUssTUFBTUssU0FBUzd0RSxLQUFLdTNDLE9BQU8yUSxTQUM5QixJQUNFLE1BQU1qekIsV0FBYTAzQyxRQUFRbUIsaUJBQWlCRCxNQUFNaDJCLFlBQzdDdjJDLFFBQVFDLE1BQU1tc0UsUUFBUXo0QyxjQUN6QnBuQixRQUFRMitCLElBQUksNEJBQTRCcWhDLE1BQU0vMEUsY0FDeEMrMEUsTUFBTWp0RSxPQUFPcTBCLFdBQVksQ0FBRTA0QyxjQUFjLElBRW5ELENBQUUsTUFBT2pnRSxLQUNQRyxRQUFRMitCLElBQUksZ0JBQWlCOStCLEtBQzdCQSxJQUFJOEUsUUFBVXhTLEtBQUtDLEtBQUswVyxPQUFPLDBCQUEyQixDQUN4RDdkLEtBQU0rMEUsTUFBTS8wRSxLQUNaMFosUUFBUzlFLElBQUk4RSxVQUVmL0csR0FBR0MsY0FBYzBVLE1BQU0xUyxJQUFJOEUsUUFBUyxDQUFFZzdELFdBQVcsR0FDbkQsQ0FJRixJQUFLLE1BQU14YyxTQUFTaHhELEtBQUtpeEQsT0FBTy9JLFNBQzlCLElBQ0UsTUFBTWp6QixXQUFhMDNDLFFBQVFvQixpQkFBaUIvYyxNQUFNblosWUFDN0N2MkMsUUFBUUMsTUFBTW1zRSxRQUFRejRDLGNBQ3pCcG5CLFFBQVEyK0IsSUFBSSw0QkFBNEJ3a0IsTUFBTWw0RCxjQUN4Q2s0RCxNQUFNcHdELE9BQU9xMEIsV0FBWSxDQUFFMDRDLGNBQWMsSUFFbkQsQ0FBRSxNQUFPamdFLEtBQ1BHLFFBQVEyK0IsSUFBSSxnQkFBaUI5K0IsS0FDN0JBLElBQUk4RSxRQUFVeFMsS0FBS0MsS0FBSzBXLE9BQU8sMEJBQTJCLENBQ3hEN2QsS0FBTWs0RCxNQUFNbDRELEtBQ1owWixRQUFTOUUsSUFBSThFLFVBRWYvRyxHQUFHQyxjQUFjMFUsTUFBTTFTLElBQUk4RSxRQUFTLENBQUVnN0QsV0FBVyxHQUNuRCxDQUlGLElBQUssTUFBTWorRCxTQUFTdlAsS0FBS3dQLE9BQ3ZCLElBQ0UsTUFBTXlsQixXQUFhMDNDLFFBQVFxQixpQkFBaUJ6K0QsT0FDdkNqTyxRQUFRQyxNQUFNbXNFLFFBQVF6NEMsY0FDekJwbkIsUUFBUTIrQixJQUFJLDRCQUE0Qmo5QixNQUFNelcsY0FzQ3hDeVcsTUFBTTNPLE9BQU9xMEIsV0FBWSxDQUFFMDRDLGNBQWMsS0FFakRwK0QsTUFBTUQsT0FBT2tMLFNBQVEvVSxHQUFNQSxFQUFFMHBDLE9BQVMsTUFDeEMsQ0FBRSxNQUFPemhDLEtBQ1BHLFFBQVEyK0IsSUFBSSxnQkFBaUI5K0IsS0FDN0JBLElBQUk4RSxRQUFVeFMsS0FBS0MsS0FBSzBXLE9BQU8sMEJBQTJCLENBQ3hEN2QsS0FBTXlXLE1BQU16VyxLQUNaMFosUUFBUzlFLElBQUk4RSxVQUVmL0csR0FBR0MsY0FBYzBVLE1BQU0xUyxJQUFJOEUsUUFBUyxDQUFFZzdELFdBQVcsR0FDbkQsQ0FJRixJQUFLLE1BQU05N0MsUUFBUTF4QixLQUFLd2lELE1BRVUsU0FBOUI5d0IsS0FBSyt3QixTQUFTeXFCLGFBQ2QsQ0FBQyxRQUFTLE9BQVEsUUFBUyxZQUFhLFNBQVN4bkUsU0FDL0Nnc0IsS0FBSyt3QixTQUFTMWhELGFBR1Y0ckUsUUFBUXNCLHNCQUFzQnY4QyxLQUcxQyxDQUVBLHVCQUFPKzdDLENBQWtCOXdFLE9BQ3ZCLE1BQU1zNEIsV0FBYSxDQUFDLEVBWXBCLEdBVEEwM0MsUUFBUXVCLDZCQUE2QnZ4RSxNQUFPczRCLFlBQzVDMDNDLFFBQVF3QixxQkFBcUJ4eEUsTUFBT3M0QixZQUNwQzAzQyxRQUFReUIseUJBQXlCenhFLE1BQU9zNEIsWUFDeEMwM0MsUUFBUTBCLHlCQUF5QjF4RSxNQUFPczRCLFlBQ3hDMDNDLFFBQVEyQixnQ0FBZ0MzeEUsTUFBT3M0QixZQUMvQzAzQyxRQUFRNEIsNEJBQTRCNXhFLE1BQU9zNEIsWUFDM0MwM0MsUUFBUTZCLHNCQUFzQjd4RSxNQUFPczRCLFlBR2pDdDRCLE1BQU1rVSxNQUFPLENBQ2YsTUFBTUEsTUFBUWxVLE1BQU1rVSxNQUFNbEMsUUFBTyxDQUFDOC9ELElBQUt2ckQsS0FDckMsTUFBTTAwQixTQUNKMTBCLGFBQWE1ZCxPQUFPd0MsS0FBS1ksY0FBZ0J3YSxFQUFFMjBCLFdBQWEzMEIsRUFDcER3ckQsV0FBYS9CLFFBQVFpQixnQkFBZ0JoMkIsVUFLM0MsT0FKS3QyQyxRQUFRQyxNQUFNbXNFLFFBQVFnQixjQUN6QkEsV0FBVzM1QixJQUFNNkMsU0FBUzdDLElBQzFCMDVCLElBQUk3MEUsS0FBSzBILFFBQVFDLE1BQU15ZixhQUFhMHRELGNBRS9CRCxNQUNOLElBQ0M1OUQsTUFBTXZOLE9BQVMsSUFDakIyeEIsV0FBV3BrQixNQUFRQSxNQUV2QixDQUVBLE9BQU9va0IsVUFDVCxDQUVBLGtDQUFhZzVDLENBQXVCdjhDLE1BQ2xDLE1BQU1pOUMsYUFBZWo5QyxLQUFLK3dCLFNBQVMxaEQsS0FDbkMsSUFDRyxDQUFDLFFBQVMsT0FBUSxRQUFTLFlBQWEsU0FBUzJFLFNBQVNpcEUsY0FFM0QsT0FJRixNQUFNQyxVQUFZbDlDLEtBQUs3bEIsYUFDakI2bEIsS0FBS205QyxVQUFVLENBQUVoakUsUUFBUSxJQUUvQixVQUNRNmxCLEtBQUtvOUMsU0FDYixDQUFFLE1BQU9waEUsS0FDUEcsUUFBUTIrQixJQUFJLHNCQUF1QjlhLEtBQU1oa0IsSUFDM0MsQ0FDQSxNQUFNcWhFLGdCQUFrQnI5QyxLQUFLZ3hCLGVBRzdCLElBQUssTUFBTWlSLE9BQU9vYixVQUFXLENBQzNCLElBQUk5NUMsV0FBYSxDQUFDLEVBQ2xCLElBQ0UsT0FBUTA1QyxjQUNOLElBQUssUUFDSDE1QyxXQUFhMDNDLFFBQVFjLGlCQUFpQjlaLElBQUk5YixZQUMxQyxNQUNGLElBQUssT0FDSDVpQixXQUFhMDNDLFFBQVFpQixnQkFBZ0JqYSxJQUFJOWIsWUFDekMsTUFDRixJQUFLLFFBQ0g1aUIsV0FBYTAzQyxRQUFRb0IsaUJBQWlCcGEsSUFBSTliLFlBQzFDLE1BQ0YsSUFBSyxZQUNINWlCLFdBQWEwM0MsUUFBUW1CLGlCQUFpQm5hLElBQUk5YixZQUMxQyxNQUNGLElBQUssUUFDSDVpQixXQUFhMDNDLFFBQVFxQixpQkFBaUJyYSxLQUlyQ3J5RCxRQUFRQyxNQUFNbXNFLFFBQVF6NEMsY0FDekJwbkIsUUFBUTIrQixJQUNOLFlBQVltaUMseUJBQXlCaGIsSUFBSTc2RCxzQkFBc0I0NEIsS0FBSzZHLG9CQUVoRW83QixJQUFJL3lELE9BQU9xMEIsWUFFckIsQ0FBRSxNQUFPdm5CLEtBQ1BHLFFBQVEyK0IsSUFBSSxnQkFBaUI5K0IsS0FDN0JBLElBQUk4RSxRQUFVeFMsS0FBS0MsS0FBSzBXLE9BQU8saUNBQWtDLENBQy9EN2QsS0FBTTY2RCxJQUFJNzZELEtBQ1Z5L0IsV0FBWTdHLEtBQUs2RyxXQUNqQi9sQixRQUFTOUUsSUFBSThFLFVBRWYvRyxHQUFHQyxjQUFjMFUsTUFBTTFTLElBQUk4RSxRQUFTLENBQUVnN0QsV0FBVyxHQUNuRCxDQUNGLE9BR005N0MsS0FBS205QyxVQUFVLENBQUVoakUsT0FBUStpRSxXQUNqQyxDQUVBLHNCQUFPaEIsQ0FBaUJqbEUsTUFDdEIsTUFBTXNzQixXQUFhLENBQUMsRUFjcEIsT0FYQTAzQyxRQUFRcUMsd0JBQXdCcm1FLEtBQU1zc0IsWUFDdEMwM0MsUUFBUXNDLHVCQUF1QnRtRSxLQUFNc3NCLFlBQ3JDMDNDLFFBQVF1QyxvQkFBb0J2bUUsS0FBTXNzQixZQUNsQzAzQyxRQUFRd0MsMEJBQTBCeG1FLEtBQU1zc0IsWUFDeEMwM0MsUUFBUXlDLHdCQUF3QnptRSxLQUFNc3NCLFlBQ3RDMDNDLFFBQVEwQywyQkFBMkIxbUUsS0FBTXNzQixZQUN6QzAzQyxRQUFRMkMsNkJBQTZCM21FLEtBQU1zc0IsWUFDM0MwM0MsUUFBUTRDLGlCQUFpQjVtRSxLQUFNc3NCLFlBQy9CMDNDLFFBQVE2QyxnQkFBZ0I3bUUsS0FBTXNzQixZQUM5QjAzQyxRQUFROEMsc0JBQXNCOW1FLEtBQU1zc0IsWUFFN0JBLFVBQ1QsQ0FFQSx1QkFBTzg0QyxDQUFrQkYsT0FDdkIsTUFBTTU0QyxXQUFhLENBQUMsRUFLcEIsT0FGQTAzQyxRQUFRK0MscUJBQXFCN0IsTUFBTzU0QyxZQUU3QkEsVUFDVCxDQUVBLHVCQUFPNjRDLENBQWtCRCxPQUN2QixNQUFNNTRDLFdBQWEsQ0FBQyxFQUtwQixPQUZBMDNDLFFBQVFnRCxxQkFBcUI5QixNQUFPNTRDLFlBRTdCQSxVQUNULENBRUEsdUJBQU8rNEMsQ0FBa0J6K0QsT0FDdkIsTUFBTXFnRSxRQUFVLENBQ2R0Z0UsT0FBUSxJQW1DVixZQWpDNEIsSUFBakJDLE1BQU1ELFFBQTBCQyxNQUFNRCxPQUFPaE0sU0FDdERzc0UsUUFBUXRnRSxPQUFTQyxNQUFNRCxPQUFPNUksS0FBSWlOLFFBQ2hDLE1BQU1sTyxFQUFJa08sTUFBTWtrQyxXQUNWNWlCLFdBQWEsQ0FBQyxFQUtwQixHQUpBMDNDLFFBQVFrRCxxQkFBcUJwcUUsRUFBR3d2QixZQUM1QjN5QixPQUFPbUUsS0FBS3d1QixZQUFZM3hCLFFBQzFCaEMsUUFBUUMsTUFBTTZhLFlBQVkzVyxFQUFHd3ZCLGFBRTFCeHZCLEVBQUVtSyxTQUFXbkssRUFBRWl4QyxVQUNsQmp4QyxFQUFFNm1FLFVBQVksQ0FBQyxPQUNWLEdBQUt0c0UsS0FBS3FQLE9BQU8xTixJQUFJOEQsRUFBRW1LLFVBR3ZCLElBQUtuSyxFQUFFaXhDLFVBQVcsQ0FDdkIsTUFBTTQxQixVQUFZaHJFLFFBQVFDLE1BQU13TyxVQUFVdEssRUFBRTZtRSxXQUM1Q0EsVUFBVXZyRSxLQUFPNFMsTUFBTWhYLE9BQU9vRSxLQUM5QixNQUFNSCxPQUFTK3JFLFFBQVFjLGlCQUFpQm5CLFdBQ3ZDLENBQUMsUUFBUyxXQUFXOXhELFNBQVEyL0IsZUFDNUIsSUFBS3Y1QyxPQUFPdTVDLGVBQWU3MkMsT0FDekIsT0FFRixNQUFNNmIsUUFBVSxJQUFJMndELElBQUlsdkUsT0FBT3U1QyxjQUFjenpDLEtBQUl5ZixHQUFLLENBQUNBLEVBQUU0dUIsSUFBSzV1QixNQUM5RDFnQixFQUFFNm1FLFVBQVVueUIsY0FBYzMvQixTQUFRdTFELFdBQ2hDLE1BQU1udkUsT0FBU3VlLFFBQVF2ZixJQUFJbXdFLFNBQVNoN0IsS0FDaENuMEMsUUFBUVUsUUFBUUMsTUFBTTZhLFlBQVkyekQsU0FBVW52RSxPQUFNLFdBRWpEQSxPQUFPdTVDLGFBQVksSUFFNUI3NEMsUUFBUUMsTUFBTTZhLFlBQVkzVyxFQUFFNm1FLFVBQVcxckUsT0FDekMsT0FsQkU2RSxFQUFFbUssUUFBVSxLQUNabkssRUFBRTZtRSxVQUFZLENBQUMsRUFrQmpCLE9BQU83bUUsTUFHSm1xRSxPQUNULENBRUEsOEJBQU9SLENBQXlCem1FLEtBQU1zc0IsWUFnQ3BDLE1BOUJFLENBQ0UsWUFDQSxRQUNBLE9BQ0EsYUFDQSxRQUNBLFFBQ0EsUUFDQSxTQUNBLFNBQ0EsVUFDQXZ2QixTQUFTaUQsS0FBSzVILFFBRXVCLGlCQUE1QjRILEtBQUtsSyxPQUFPdVIsWUFDckJpbEIsV0FBVyxzQkFBd0IsQ0FDakNyOEIsTUFBTytQLEtBQUtsSyxPQUFPdVIsWUFDbkJpMEQsT0FBUSxTQUd5QixJQUE1QnQ3RCxLQUFLbEssT0FBT3VSLGFBQ1MsT0FBNUJySCxLQUFLbEssT0FBT3VSLFlBRVppbEIsV0FBVyxzQkFBd0IsQ0FDakNyOEIsTUFBTyxHQUNQcXJFLE9BQVEsU0FFeUMsSUFBbkN0N0QsS0FBS2xLLE9BQU91UixZQUFZaTBELFNBQ3hDaHZDLFdBQVcsNkJBQStCLEtBR3ZDQSxVQUNULENBRUEsNkJBQU9nNkMsQ0FBd0J0bUUsS0FBTXNzQixZQU1uQyxNQUxrQixVQUFkdHNCLEtBQUs1SCxXQUM0QyxJQUF4QzRILEtBQUtsSyxPQUFPZ3RCLGFBQWFDLGFBQ2xDdUosV0FBVyxpQ0FBbUMsR0FHM0NBLFVBQ1QsQ0FFQSwwQkFBT2k2QyxDQUFxQnZtRSxLQUFNc3NCLFlBQ2hDLElBQUltMkIsTUFBUXRzRCxPQUFPNkosS0FBS1AsS0FBS0csTUFBTSx1Q0FJbkMsR0FIYyxPQUFWNmlELFFBQ0ZuMkIsV0FBVzdzQixJQUFNLDZCQUErQmdqRCxNQUFNLElBRXRDLFVBQWR6aUQsS0FBSzVILEtBQ1AsSUFBSyxNQUFPNlEsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRdEUsS0FBS2xLLE9BQU9vUyxPQUM3QixpQkFBTnhPLElBQ1Qrb0QsTUFBUXRzRCxPQUFPdUQsRUFBRStGLEtBQUtHLE1BQU0sdUNBQ2QsT0FBVjZpRCxhQUN3QyxJQUEvQm4yQixXQUFXLGtCQUNwQkEsV0FBVyxnQkFBa0J0c0IsS0FBS2xLLE9BQU9vUyxPQUUzQ29rQixXQUFXLGdCQUFnQnJqQixHQUFHeEosSUFDNUIsNkJBQStCZ2pELE1BQU0sVUFJeEMsR0FBa0IsZUFBZHppRCxLQUFLNUgsS0FBdUIsQ0FDckMsSUFBSyxNQUFPNlEsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRdEUsS0FBS2xLLE9BQU84bkIsUUFDN0IsaUJBQU5sa0IsSUFDVCtvRCxNQUFRdHNELE9BQU91RCxFQUFFK0YsS0FBS0csTUFBTSx1Q0FDZCxPQUFWNmlELGFBQ3lDLElBQWhDbjJCLFdBQVcsbUJBQ3BCQSxXQUFXLGlCQUFtQnRzQixLQUFLbEssT0FBTzhuQixRQUU1QzBPLFdBQVcsaUJBQWlCcmpCLEdBQUd4SixJQUM3Qiw2QkFBK0JnakQsTUFBTSxLQUk3QyxJQUFLLE1BQU9yQixFQUFHaW1CLEtBQU0xdEUsT0FBTzJLLFFBQVF0RSxLQUFLbEssT0FBT3VJLFFBQzlDLElBQUssTUFBTzRLLEVBQUd2UCxLQUFNQyxPQUFPMkssUUFBUStpRSxFQUFFenBELFFBQ25CLGlCQUFObGtCLElBQ1Qrb0QsTUFBUXRzRCxPQUFPdUQsRUFBRStGLEtBQUtHLE1BQU0sdUNBQ2QsT0FBVjZpRCxhQUN5QyxJQUFoQ24yQixXQUFXLG1CQUNwQkEsV0FBVyxpQkFBbUJ0c0IsS0FBS2xLLE9BQU91SSxRQUU1Q2l1QixXQUFXLGlCQUFpQjgwQixHQUFHeGpDLE9BQU8zVSxHQUFHeEosSUFDdkMsNkJBQStCZ2pELE1BQU0sSUFLakQsTUFBTyxHQUFrQixTQUFkemlELEtBQUs1SCxLQUNkLElBQUssTUFBTzZRLEVBQUd2UCxLQUFNQyxPQUFPMkssUUFBUXRFLEtBQUtsSyxPQUFPd3hFLFFBQzdCLGlCQUFONXRFLElBQ1Qrb0QsTUFBUXRzRCxPQUFPdUQsRUFBRStGLEtBQUtHLE1BQU0sdUNBQ2QsT0FBVjZpRCxhQUN5QyxJQUFoQ24yQixXQUFXLG1CQUNwQkEsV0FBVyxpQkFBbUJ0c0IsS0FBS2xLLE9BQU93eEUsUUFFNUNoN0MsV0FBVyxpQkFBaUJyakIsR0FBR3hKLElBQzdCLDZCQUErQmdqRCxNQUFNLFVBSXhDLEdBQWtCLGNBQWR6aUQsS0FBSzVILEtBQ2QsSUFBSyxNQUFPNlEsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRdEUsS0FBS2xLLE9BQU84bkIsUUFDN0IsaUJBQU5sa0IsSUFDVCtvRCxNQUFRdHNELE9BQU91RCxFQUFFK0YsS0FBS0csTUFBTSx1Q0FDZCxPQUFWNmlELGFBQ3lDLElBQWhDbjJCLFdBQVcsbUJBQ3BCQSxXQUFXLGlCQUFtQnRzQixLQUFLbEssT0FBTzhuQixRQUU1QzBPLFdBQVcsaUJBQWlCcmpCLEdBQUd4SixJQUM3Qiw2QkFBK0JnakQsTUFBTSxLQUsvQyxPQUFPbjJCLFVBQ1QsQ0FFQSxpQ0FBT282QyxDQUE0QjFtRSxLQUFNc3NCLFlBQ3JCLFVBQWR0c0IsS0FBSzVILFdBQWdELElBQXJCNEgsS0FBS2xLLE9BQU95eEUsT0FDOUNqN0MsV0FBVyxzQkFBd0J0c0IsS0FBS2xLLE9BQU8weEUsYUFBZSxHQUM5RGw3QyxXQUFXLDBCQUE0QnRzQixLQUFLbEssT0FBT3l4RSxLQUFLcjZCLElBQU0sRUFDOUQ1Z0IsV0FBVyw0QkFBOEJ0c0IsS0FBS2xLLE9BQU95eEUsS0FBS2o2QixJQUFNLEVBQ2hFaGhCLFdBQVcsdUJBQXlCdHNCLEtBQUtsSyxPQUFPeXhFLEtBQUtuakQsS0FBTyxFQUM1RGtJLFdBQVcsc0JBQXdCdHNCLEtBQUtsSyxPQUFPeXhFLEtBQUs1MkUsS0FBTyxFQUMzRDI3QixXQUFXLHVCQUF5QixHQUVwQ0EsV0FBVyxpQkFBbUIsS0FDOUJBLFdBQVcscUNBQXVDLEtBQ2xEQSxXQUFXLDhCQUFnQyxLQUUvQyxDQVNBLGdDQUFPazZDLENBQTJCeG1FLEtBQU1zc0IsWUEyQ3RDLE1BMUNrQixTQUFkdHNCLEtBQUs1SCxXQUU2QyxJQUF6QzRILEtBQUtsSyxPQUFPdVIsWUFBWW9nRSxlQUVqQ243QyxXQUFXLGlCQUFtQnRzQixLQUFLbEssT0FBTzR4RSxRQUFVLEdBQ3BEcDdDLFdBQVcsZUFBaUJ0c0IsS0FBS2xLLE9BQU82eEUsTUFBUSxHQUNoRHI3QyxXQUFXLG1CQUFxQnRzQixLQUFLbEssT0FBTzh4RSxVQUFZLEdBRXhEdDdDLFdBQVcscUJBQXVCdHNCLEtBQUtsSyxPQUFPeXRCLFNBQVcsRUFDekQrSSxXQUFXLHVCQUF5QnIyQixPQUFPK0osS0FBS2xLLE9BQU8reEUsZUFBaUIsRUFFeEV2N0MsV0FBVyxrQkFBb0J0c0IsS0FBS2xLLE9BQU91UixZQUFZb2dFLGFBQ3ZEbjdDLFdBQVcsNkJBQStCdHNCLEtBQUtsSyxPQUFPdVIsWUFBWXlnRSxNQUVsRXg3QyxXQUFXLDBCQUE0QixVQUN2Q0EsV0FBVyxzQkFBd0IsRUFDbkNBLFdBQVcsMEJBQTJCLEVBQ3RDQSxXQUFXLHNCQUF3QixHQUVuQ0EsV0FBVyxzQ0FDVHIyQixPQUFPK0osS0FBS2xLLE9BQU9peUUsS0FBS3p3QixjQUFjMHdCLE1BQVEsRUFDaEQxN0MsV0FBVyxvQ0FDVHIyQixPQUFPK0osS0FBS2xLLE9BQU9peUUsS0FBS3p3QixjQUFjMndCLE1BQVEsRUFDaEQzN0MsV0FBVyx1QkFBeUJyMkIsT0FBTytKLEtBQUtsSyxPQUFPaXlFLEtBQUszMEUsU0FBVyxFQUN2RWs1QixXQUFXLHVCQUF5QixHQUVwQ0EsV0FBVyxnQkFBa0IsQ0FDM0I0N0MsVUFBV2p5RSxPQUFPK0osS0FBS2xLLE9BQU9xeUUsaUJBQW1CLEVBQ2pEQyxTQUFVLEVBQ1Z0N0QsTUFBTyxjQUdUd2YsV0FBVyxvQkFBc0IsS0FDakNBLFdBQVcsMkJBQTZCLEtBQ3hDQSxXQUFXLGlCQUFtQixLQUM5QkEsV0FBVyxxQ0FBdUMsS0FDbERBLFdBQVcsOEJBQWdDLEtBQzNDQSxXQUFXLHdCQUEwQixLQUNyQ0EsV0FBVyx1QkFBeUIsS0FDcENBLFdBQVcsa0JBQW9CLE1BRzVCQSxVQUNULENBRUEsNEJBQU93NkMsQ0FBdUI5bUUsS0FBTXNzQixZQUNoQixTQUFkdHNCLEtBQUs1SCxXQUVrQyxJQUFoQzRILEtBQUtsSyxPQUFPdXlFLE1BQU1ILGdCQUNVLElBQTVCbG9FLEtBQUtsSyxPQUFPdXlFLE1BQU12N0QsUUFFekJ3ZixXQUFXLHNCQUF3QixhQUd6QyxDQUVBLG1DQUFPcTZDLENBQThCM21FLEtBQU1zc0IsWUFDdkIsVUFBZHRzQixLQUFLNUgsTUFBa0MsU0FBZDRILEtBQUs1SCxZQUNDLElBQXRCNEgsS0FBS2xLLE9BQU9neUUsYUFDeUIsSUFBbkM5bkUsS0FBS2xLLE9BQU91UixZQUFZaTBELE9BQ2pDaHZDLFdBQVcsNkJBQ1R0c0IsS0FBS2xLLE9BQU91UixZQUFZaTBELE9BQVN0N0QsS0FBS2xLLE9BQU9neUUsTUFFL0N4N0MsV0FBVyw2QkFBK0J0c0IsS0FBS2xLLE9BQU9neUUsTUFFeER4N0MsV0FBVyxrQkFBb0IsV0FFTSxJQUE1QnRzQixLQUFLbEssT0FBT3d5RSxtQkFDa0MsSUFBNUNoOEMsV0FBVyw2QkFDcEJBLFdBQVcsNkJBQ1R0c0IsS0FBS2xLLE9BQU93eUUsWUFBY2g4QyxXQUFXLDZCQUV2Q0EsV0FBVyw2QkFBK0J0c0IsS0FBS2xLLE9BQU93eUUsWUFFeERoOEMsV0FBVyx3QkFBMEIsTUFHM0MsQ0FFQSw4QkFBTys1QyxDQUF5QnJtRSxLQUFNc3NCLFlBQ3BDLEdBQWtCLGVBQWR0c0IsS0FBSzVILEtBQXVCLENBQzlCLElBQUlxa0QsU0FBVSxFQUNkLElBQUssTUFBTzJFLEVBQUdpbUIsS0FBTTF0RSxPQUFPMkssUUFBUXRFLEtBQUtsSyxPQUFPdUksUUFDOUMsSUFBSyxNQUFPNEssRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRK2lFLEVBQUV6cEQsUUFDbkIsaUJBQU5sa0IsUUFDZSxJQUFiQSxFQUFFNUQsU0FDWGtLLEtBQUtsSyxPQUFPdUksT0FBTytpRCxHQUFHeGpDLE9BQU8zVSxHQUFHblQsT0FBUzRELEVBQUUyRixLQUMzQ285QyxTQUFVLEdBS2RBLFVBQ0Zud0IsV0FBVyxpQkFBbUJ0c0IsS0FBS2xLLE9BQU91SSxPQUU5QyxDQUNBLEdBQUksQ0FBQyxTQUFTdEIsU0FBU2lELEtBQUs1SCxNQUFPLENBQ2pDLElBQUlxa0QsU0FBVSxFQUNkLElBQUssTUFBT3h6QyxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVF0RSxLQUFLbEssT0FBT29TLE9BQzdCLGlCQUFOeE8sUUFDZSxJQUFiQSxFQUFFNUQsU0FDWGtLLEtBQUtsSyxPQUFPb1MsTUFBTWUsR0FBR25ULE9BQVM0RCxFQUFFMkYsS0FDaENvOUMsU0FBVSxHQUlaQSxVQUNGbndCLFdBQVcsZ0JBQWtCdHNCLEtBQUtsSyxPQUFPb1MsTUFFN0MsQ0FDQSxHQUFJLENBQUMsWUFBYSxjQUFjbkwsU0FBU2lELEtBQUs1SCxNQUFPLENBQ25ELElBQUlxa0QsU0FBVSxFQUNkLElBQUssTUFBT3h6QyxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVF0RSxLQUFLbEssT0FBTzhuQixRQUM3QixpQkFBTmxrQixRQUNlLElBQWJBLEVBQUU1RCxTQUNYa0ssS0FBS2xLLE9BQU84bkIsT0FBTzNVLEdBQUduVCxPQUFTNEQsRUFBRTJGLEtBQ2pDbzlDLFNBQVUsR0FJWkEsVUFDRm53QixXQUFXLGlCQUFtQnRzQixLQUFLbEssT0FBTzhuQixPQUU5QyxDQUNBLEdBQUksQ0FBQyxRQUFRN2dCLFNBQVNpRCxLQUFLNUgsTUFBTyxDQUNoQyxJQUFJcWtELFNBQVUsRUFDZCxJQUFLLE1BQU94ekMsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRdEUsS0FBS2xLLE9BQU93eEUsUUFDN0IsaUJBQU41dEUsUUFDZSxJQUFiQSxFQUFFNUQsU0FDWGtLLEtBQUtsSyxPQUFPd3hFLE9BQU9yK0QsR0FBR25ULE9BQVM0RCxFQUFFMkYsS0FDakNvOUMsU0FBVSxHQUlaQSxVQUNGbndCLFdBQVcsaUJBQW1CdHNCLEtBQUtsSyxPQUFPd3hFLE9BRTlDLENBQ0YsQ0FFQSxzQkFBT1QsQ0FBaUI3bUUsS0FBTXNzQixZQUM1QixHQUNnQixVQUFkdHNCLEtBQUs1SCxXQUM2QixJQUExQjRILEtBQUtsSyxPQUFPK0ssV0FBdUQsS0FBMUJiLEtBQUtsSyxPQUFPK0ssV0FnQnhELEdBQWtCLFVBQWRiLEtBQUs1SCxNQUNkLElBQUssTUFBTzZRLEVBQUd2UCxLQUFNQyxPQUFPMkssUUFBUXRFLEtBQUtsSyxPQUFPb1MsT0FDOUMsR0FBaUIsaUJBQU54TyxHQUVJLFVBQVhBLEVBQUV0QixZQUM2QixJQUF2QnNCLEVBQUU1RCxPQUFPK0ssV0FBb0QsS0FBdkJuSCxFQUFFNUQsT0FBTytLLFdBQ3ZELE1BQzBDLElBQS9CeXJCLFdBQVcsa0JBQ3BCQSxXQUFXLGdCQUFrQnRzQixLQUFLbEssT0FBT29TLE9BRTNDb2tCLFdBQVcsZ0JBQWdCcmpCLEdBQUc5WSxLQUFPdUosRUFBRXZKLEtBQ0ksVUFBdkNtOEIsV0FBVyxnQkFBZ0JyakIsR0FBRzlZLE9BQ2hDbThCLFdBQVcsZ0JBQWdCcmpCLEdBQUc5WSxLQUFPLFFBRXZDLE1BQU0yUSxNQUFRNUIsU0FBUzZCLGlCQUNyQnVyQixXQUFXLGdCQUFnQnJqQixHQUFHOVksS0FDWSxpQkFBbkN1SixFQUFFNUQsT0FBT2tMLGdCQUFnQnFRLE1BQzVCM1gsRUFBRTVELE9BQU9rTCxlQUFlcVEsTUFDeEIzWCxFQUFFNUQsT0FBT2tMLGdCQUVmc3JCLFdBQVcsZ0JBQWdCcmpCLEdBQUc5WSxLQUFPMlEsTUFBTTNRLEtBQzNDbThCLFdBQVcsZ0JBQWdCcmpCLEdBQUduVCxPQUFPK0ssVUFBWUMsTUFBTUQsVUFDdkR5ckIsV0FBVyxnQkFBZ0JyakIsR0FBR25ULE9BQU9rTCxlQUFpQkYsTUFBTUUsY0FDOUQsT0FHQyxHQUFrQixlQUFkaEIsS0FBSzVILEtBQXVCLENBQ3JDLElBQUssTUFBTzZRLEVBQUd2UCxLQUFNQyxPQUFPMkssUUFBUXRFLEtBQUtsSyxPQUFPOG5CLFFBQzlDLEdBQWlCLGlCQUFObGtCLEdBRUksVUFBWEEsRUFBRXRCLFlBQzZCLElBQXZCc0IsRUFBRTVELE9BQU8rSyxXQUFvRCxLQUF2Qm5ILEVBQUU1RCxPQUFPK0ssV0FDdkQsTUFDMkMsSUFBaEN5ckIsV0FBVyxtQkFDcEJBLFdBQVcsaUJBQW1CdHNCLEtBQUtsSyxPQUFPOG5CLFFBRTVDME8sV0FBVyxpQkFBaUJyakIsR0FBRzlZLEtBQU91SixFQUFFdkosS0FDSSxVQUF4Q204QixXQUFXLGlCQUFpQnJqQixHQUFHOVksT0FDakNtOEIsV0FBVyxpQkFBaUJyakIsR0FBRzlZLEtBQU8sUUFFeEMsTUFBTTJRLE1BQVE1QixTQUFTNkIsaUJBQ3JCdXJCLFdBQVcsaUJBQWlCcmpCLEdBQUc5WSxLQUNXLGlCQUFuQ3VKLEVBQUU1RCxPQUFPa0wsZ0JBQWdCcVEsTUFDNUIzWCxFQUFFNUQsT0FBT2tMLGVBQWVxUSxNQUN4QjNYLEVBQUU1RCxPQUFPa0wsZ0JBRWZzckIsV0FBVyxpQkFBaUJyakIsR0FBRzlZLEtBQU8yUSxNQUFNM1EsS0FDNUNtOEIsV0FBVyxpQkFBaUJyakIsR0FBR25ULE9BQU8rSyxVQUFZQyxNQUFNRCxVQUN4RHlyQixXQUFXLGlCQUFpQnJqQixHQUFHblQsT0FBT2tMLGVBQ3BDRixNQUFNRSxjQUNWLENBR0osSUFBSyxNQUFPb2dELEVBQUdpbUIsS0FBTTF0RSxPQUFPMkssUUFBUXRFLEtBQUtsSyxPQUFPdUksUUFDOUMsSUFBSyxNQUFPNEssRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRK2lFLEVBQUV6cEQsUUFDcEMsR0FBaUIsaUJBQU5sa0IsR0FFSSxVQUFYQSxFQUFFdEIsWUFDNkIsSUFBdkJzQixFQUFFNUQsT0FBTytLLFdBQW9ELEtBQXZCbkgsRUFBRTVELE9BQU8rSyxXQUN2RCxNQUMyQyxJQUFoQ3lyQixXQUFXLG1CQUNwQkEsV0FBVyxpQkFBbUJ0c0IsS0FBS2xLLE9BQU91SSxRQUU1Q2l1QixXQUFXLGlCQUFpQjgwQixHQUFHeGpDLE9BQU8zVSxHQUFHOVksS0FBT3VKLEVBQUV2SixLQUNJLFVBQWxEbThCLFdBQVcsaUJBQWlCODBCLEdBQUd4akMsT0FBTzNVLEdBQUc5WSxPQUMzQ204QixXQUFXLGlCQUFpQjgwQixHQUFHeGpDLE9BQU8zVSxHQUFHOVksS0FBTyxRQUVsRCxNQUFNMlEsTUFBUTVCLFNBQVM2QixpQkFDckJ1ckIsV0FBVyxpQkFBaUI4MEIsR0FBR3hqQyxPQUFPM1UsR0FBRzlZLEtBQ0MsaUJBQW5DdUosRUFBRTVELE9BQU9rTCxnQkFBZ0JxUSxNQUM1QjNYLEVBQUU1RCxPQUFPa0wsZUFBZXFRLE1BQ3hCM1gsRUFBRTVELE9BQU9rTCxnQkFFZnNyQixXQUFXLGlCQUFpQjgwQixHQUFHeGpDLE9BQU8zVSxHQUFHOVksS0FBTzJRLE1BQU0zUSxLQUN0RG04QixXQUFXLGlCQUFpQjgwQixHQUFHeGpDLE9BQU8zVSxHQUFHblQsT0FBTytLLFVBQzlDQyxNQUFNRCxVQUNSeXJCLFdBQVcsaUJBQWlCODBCLEdBQUd4akMsT0FBTzNVLEdBQUduVCxPQUFPa0wsZUFDOUNGLE1BQU1FLGNBQ1YsQ0FJUixNQUFPLEdBQWtCLGNBQWRoQixLQUFLNUgsS0FDZCxJQUFLLE1BQU82USxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVF0RSxLQUFLbEssT0FBTzhuQixRQUM5QyxHQUFpQixpQkFBTmxrQixHQUVJLFVBQVhBLEVBQUV0QixZQUM2QixJQUF2QnNCLEVBQUU1RCxPQUFPK0ssV0FBb0QsS0FBdkJuSCxFQUFFNUQsT0FBTytLLFdBQ3ZELE1BQzJDLElBQWhDeXJCLFdBQVcsbUJBQ3BCQSxXQUFXLGlCQUFtQnRzQixLQUFLbEssT0FBTzhuQixRQUU1QzBPLFdBQVcsaUJBQWlCcmpCLEdBQUc5WSxLQUFPdUosRUFBRXZKLEtBQ0ksVUFBeENtOEIsV0FBVyxpQkFBaUJyakIsR0FBRzlZLE9BQ2pDbThCLFdBQVcsaUJBQWlCcmpCLEdBQUc5WSxLQUFPLFFBRXhDLE1BQU0yUSxNQUFRNUIsU0FBUzZCLGlCQUNyQnVyQixXQUFXLGlCQUFpQnJqQixHQUFHOVksS0FDVyxpQkFBbkN1SixFQUFFNUQsT0FBT2tMLGdCQUFnQnFRLE1BQzVCM1gsRUFBRTVELE9BQU9rTCxlQUFlcVEsTUFDeEIzWCxFQUFFNUQsT0FBT2tMLGdCQUVmc3JCLFdBQVcsaUJBQWlCcmpCLEdBQUc5WSxLQUFPMlEsTUFBTTNRLEtBQzVDbThCLFdBQVcsaUJBQWlCcmpCLEdBQUduVCxPQUFPK0ssVUFBWUMsTUFBTUQsVUFDeER5ckIsV0FBVyxpQkFBaUJyakIsR0FBR25ULE9BQU9rTCxlQUNwQ0YsTUFBTUUsY0FDVixNQXpISixDQUNBc3JCLFdBQVduOEIsS0FBTzZQLEtBQUs3UCxLQUVDLFVBQXBCbThCLFdBQVduOEIsT0FDYm04QixXQUFXbjhCLEtBQU8sUUFFcEIsTUFBTTJRLE1BQVE1QixTQUFTNkIsaUJBQ3JCdXJCLFdBQVduOEIsS0FDa0MsaUJBQXRDNlAsS0FBS2xLLE9BQU9rTCxnQkFBZ0JxUSxNQUMvQnJSLEtBQUtsSyxPQUFPa0wsZUFBZXFRLE1BQzNCclIsS0FBS2xLLE9BQU9rTCxnQkFFbEJzckIsV0FBV244QixLQUFPMlEsTUFBTTNRLEtBQ3hCbThCLFdBQVcsb0JBQXNCeHJCLE1BQU1ELFVBQ3ZDeXJCLFdBQVcseUJBQTJCeHJCLE1BQU1FLGNBQzlDLENBOEdGLENBRUEsdUJBQU80bEUsQ0FBa0I1bUUsS0FBTXNzQixZQUM3QixRQUFnQyxJQUFyQnRzQixLQUFLbEssT0FBTzJLLEtBQXNCLENBUTNDLElBQUlBLEtBQU8sQ0FBQyxFQUNaLElBQUssTUFBTzdLLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVF0RSxLQUFLbEssT0FBTzJLLE1BQ3BELElBQWMsSUFBVnhRLE9BQW9DLGlCQUFWQSxZQUFnRCxJQUFuQkEsTUFBTW9mLFNBQy9ELE9BQVF6WixLQUNOLElBQUssT0FDSDZLLEtBQUtsUyxVQUFXLEVBQ2hCLE1BQ0YsSUFBSyxPQUNIa1MsS0FBS2pTLFFBQVMsRUFDZGlTLEtBQUtoUyxZQUFhLEVBQ2xCLE1BQ0YsSUFBSyxPQUNIZ1MsS0FBSy9SLE1BQU8sRUFDWixNQUNGLElBQUssT0FDSCtSLEtBQUs5UixrQkFBbUIsRUFDeEI4UixLQUFLN1Isc0JBQXVCLEVBQzVCLE1BQ0YsSUFBSyxPQUNINlIsS0FBSzVSLFVBQVcsRUFDaEI0UixLQUFLM1IsY0FBZSxFQUNwQixNQUNGLElBQUssT0FDSDJSLEtBQUt2UixVQUFXLEVBQ2hCLE1BQ0YsSUFBSyxPQUNIdVIsS0FBS3RSLFVBQVcsRUFLeEIsR0FBa0IsVUFBZDZRLEtBQUs1SCxLQUFrQixDQUV6QixNQUFNeEMsSUFBTStELE9BQU9tRSxLQUFLMkMsTUFBTSxHQUU1QkEsS0FERTdLLElBQ0ssQ0FBRSxDQUFDQSxNQUFNLEdBR1QsQ0FBRXJILFVBQVUsRUFFdkIsQ0FDQSxNQUFNa04sS0FBTyxDQUNYa3hDLFVBQVcsQ0FDVDFrQyxHQUFJLEdBQ0o4a0QsS0FBTTExRCxLQUFLQyxLQUFLeTFELEtBQ2hCcmYsU0FBVSxFQUNWanRDLFlBRzRCLElBQXJCVCxLQUFLL0csT0FBT3dDLE1BQ3JCdUUsS0FBSy9HLE1BQU13QyxLQUFPQSxLQUNsQjZ3QixXQUFXLGNBQWdCN3dCLFdBQ3FCLElBQWhDdUUsS0FBSy9HLE9BQU93QyxNQUFNa3hDLFdBQ2xDM3NDLEtBQUsvRyxNQUFNd0MsS0FBS2t4QyxVQUFZbHhDLEtBQUtreEMsVUFDakNyZ0IsV0FBVyx3QkFBMEI3d0IsS0FBS2t4QyxZQUUxQzNzQyxLQUFLL0csTUFBTXdDLEtBQUtreEMsVUFBVWxzQyxLQUFPaEYsS0FBS2t4QyxVQUFVbHNDLEtBQ2hENnJCLFdBQVcsNkJBQStCN3dCLEtBQUtreEMsVUFBVWxzQyxNQUUzRDZyQixXQUFXLGlCQUFtQixJQUNoQyxDQUNGLENBRUEsMkJBQU9rNUMsQ0FBc0J4eEUsTUFBT3M0QixZQUNsQyxJQUFJbTJCLE1BQVF0c0QsT0FBT25DLE1BQU15TCxLQUFLRyxNQUFNLHVDQWVwQyxHQWRjLE9BQVY2aUQsUUFDRm4yQixXQUFXN3NCLElBQU0sNkJBQStCZ2pELE1BQU0sU0FHdEIsSUFBekJ6dUQsTUFBTWtZLHFCQUNnQyxJQUF0Q2xZLE1BQU1rWSxlQUFlRSxTQUFTQyxNQUVyQ28yQyxNQUFRdHNELE9BQU9uQyxNQUFNa1ksZUFBZUUsUUFBUUMsS0FBS3pNLE1BQy9DLHVDQUVZLE9BQVY2aUQsUUFDRm4yQixXQUFXLDhCQUFnQyw2QkFBK0JtMkIsTUFBTSxVQUd2RCxJQUFsQnp1RCxNQUFNZ0QsUUFDZixJQUFLLE1BQU9pUyxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVF0USxNQUFNZ0QsU0FDeEN5ckQsTUFBUXRzRCxPQUFPdUQsRUFBRWxDLE1BQU1vSSxNQUFNLHVDQUNmLE9BQVY2aUQsYUFDZ0MsSUFBdkJuMkIsV0FBV3QxQixVQUNwQnMxQixXQUFXdDFCLFFBQVVoRCxNQUFNZ0QsU0FFN0JzMUIsV0FBV3QxQixRQUFRaVMsR0FBR3pSLEtBQU8sNkJBQStCaXJELE1BQU0sR0FJMUUsQ0FFQSwrQkFBT2dqQixDQUEwQnp4RSxNQUFPczRCLFlBQ2xDLENBQUMsWUFBYSxNQUFPLFlBQVl2dkIsU0FBUy9JLE1BQU1vRSxZQUV4QixJQUFqQnBFLE1BQU04QixhQUN1QixJQUE3QjlCLE1BQU04QixPQUFPdVIsY0FFcEJpbEIsV0FBVyxzQkFBd0IsQ0FDakNndkMsT0FBUSxJQUloQixDQUVBLDRCQUFPdUssQ0FBdUI3eEUsTUFBT3M0QixZQUNuQyxHQUFtQixjQUFmdDRCLE1BQU1vRSxXQUFtRSxJQUFwQ3BFLE1BQU04QixPQUFPMjhELFFBQVF2aUUsV0FBNEIsQ0FDeEZvOEIsV0FBVywwQkFBNEJ0NEIsTUFBTThCLE9BQU8yOEQsUUFBUUMsZUFBaUIxK0QsTUFBTThCLE9BQU8yOEQsT0FBT0MsZUFBaUIsSUFDbkQsS0FBM0RwbUMsV0FBVywwQkFBMEJ2Z0IsV0FBV2dwQixTQUNsRHpJLFdBQVcsMEJBQTRCLEtBRXpDLE1BQU1wOEIsV0FBYThOLFNBQVNoSyxNQUFNOEIsT0FBTzI4RCxPQUFPdmlFLFlBQWM4TixTQUFTaEssTUFBTThCLE9BQU8yOEQsT0FBT3ZpRSxZQUFjLEVBT3pHLEdBTkFvOEIsV0FBVyx5QkFBMkJ0NEIsTUFBTThCLE9BQU8yOEQsT0FBT0UsTUFDMURybUMsV0FBVyxpQ0FBbUN0NEIsTUFBTThCLE9BQU8yOEQsT0FBT0csY0FDbEV0bUMsV0FBVyxpQ0FBbUN0NEIsTUFBTThCLE9BQU8yOEQsT0FBT3hULGNBQ2xFM3lCLFdBQVcsd0JBQTBCdDRCLE1BQU04QixPQUFPMjhELE9BQU92VCxLQUN6RDV5QixXQUFXLDBCQUE0QnQ0QixNQUFNOEIsT0FBTzI4RCxPQUFPdFQsT0FDM0Q3eUIsV0FBVywwQkFBNEIzekIsUUFBUUMsTUFBTXdPLFVBQVVwVCxNQUFNOEIsT0FBTzQ5QyxTQUFTbjZDLFFBQ2xFLElBQWZySixXQUNGLElBQUssTUFBTUQsU0FBU3E4QixXQUFXLDBCQUM3QnI4QixNQUFNZ3dFLFVBQVkvdkUsV0FBYUQsTUFBTWd3RSxVQUNyQ2h3RSxNQUFNa3dFLFlBQWNqd0UsV0FBYUQsTUFBTWt3RSxZQUN2Q2x3RSxNQUFNb3dFLGNBQWdCbndFLFdBQWFELE1BQU1vd0UsY0FHN0MvekMsV0FBVyxtQkFBcUIsSUFDbEMsQ0FDRixDQUVBLGtDQUFPczVDLENBQTZCNXhFLE1BQU9zNEIsWUFDekMsR0FDaUIsY0FBZnQ0QixNQUFNb0UsV0FDd0MsSUFBdkNwRSxNQUFNOEIsUUFBUXl5RSxxQkFDckIsQ0FDQSxNQUFNbHFFLE9BQVMsQ0FBQyxFQUNoQixJQUFLLE1BQU0wNEMsbUJBQW1CL2lELE1BQU04QixPQUFPeXlFLHFCQUNyQ3h4QixnQkFBZ0JOLFVBQVksSUFDOUJwNEMsT0FBTzA0QyxnQkFBZ0I1bUQsTUFBUWdNLEtBQUthLElBQ2xDcUIsT0FBTzA0QyxnQkFBZ0I1bUQsT0FBUyxFQUNoQzRtRCxnQkFBZ0JOLFlBSXRCLE1BQU1ELGlCQUFtQixHQUN6QixJQUFLLE1BQU1ybUQsUUFBUWtPLE9BQ2pCbTRDLGlCQUFpQnZsRCxLQUFLLENBQ3BCbUgsS0FBTWpJLEtBQ05zbUQsVUFBV3A0QyxPQUFPbE8sTUFDbEJ1bUQsVUFBVSxJQUdkcHFCLFdBQVcsMkJBQTZCa3FCLGlCQUN4Q2xxQixXQUFXLGlDQUFtQyxJQUNoRCxDQUNGLENBRUEsc0NBQU9xNUMsQ0FBaUMzeEUsTUFBT3M0QixZQUM3QyxHQUFJLENBQUMsWUFBYSxNQUFPLFlBQVl2dkIsU0FBUy9JLE1BQU1vRSxZQUV4QixJQUFqQnBFLE1BQU04QixjQUNtQixJQUF4QjlCLE1BQU04QixPQUFPNUIsYUFDZ0IsSUFBNUJGLE1BQU04QixPQUFPb25ELFlBQ3RCLENBa0RBLEdBakRBNXdCLFdBQVcsMkNBQTRDLEVBQ3ZEQSxXQUFXLHdDQUF5QyxFQUNwREEsV0FBVyxrQ0FBbUMsRUFDOUNBLFdBQVcsaUNBQWtDLEVBQzdDQSxXQUFXLGtDQUFtQyxFQUM5Q0EsV0FBVyx3Q0FBeUMsRUFDcERBLFdBQVcsd0NBQXlDLE9BRUksSUFBL0N0NEIsTUFBTThCLE9BQU81QixRQUFRSSxnQkFBZ0JyRSxPQUM1QytELE1BQU04QixPQUFPNUIsUUFBUUksZUFBZXJFLFFBRXBDcThCLFdBQVcsMkNBQTRDLFFBR0osSUFBNUN0NEIsTUFBTThCLE9BQU81QixRQUFRRyxhQUFhcEUsT0FDekMrRCxNQUFNOEIsT0FBTzVCLFFBQVFHLFlBQVlwRSxRQUVqQ3E4QixXQUFXLHdDQUF5QyxRQUdQLElBQXRDdDRCLE1BQU04QixPQUFPNUIsUUFBUUssT0FBT3RFLE9BQ25DK0QsTUFBTThCLE9BQU81QixRQUFRSyxNQUFNdEUsUUFFM0JxOEIsV0FBVyxrQ0FBbUMsUUFHRixJQUFyQ3Q0QixNQUFNOEIsT0FBTzVCLFFBQVFPLE1BQU14RSxPQUNsQytELE1BQU04QixPQUFPNUIsUUFBUU8sS0FBS3hFLFFBRTFCcThCLFdBQVcsaUNBQWtDLFFBR0EsSUFBdEN0NEIsTUFBTThCLE9BQU81QixRQUFRTSxPQUFPdkUsT0FDbkMrRCxNQUFNOEIsT0FBTzVCLFFBQVFNLE1BQU12RSxRQUUzQnE4QixXQUFXLGtDQUFtQyxRQUdLLElBQTVDdDRCLE1BQU04QixPQUFPNUIsUUFBUUMsYUFBYWxFLE9BQ3pDK0QsTUFBTThCLE9BQU81QixRQUFRQyxZQUFZbEUsUUFFakNxOEIsV0FBVyx3Q0FBeUMsUUFHRCxJQUE1Q3Q0QixNQUFNOEIsT0FBTzVCLFFBQVFFLGFBQWFuRSxPQUN6QytELE1BQU04QixPQUFPNUIsUUFBUUUsWUFBWW5FLFFBRWpDcThCLFdBQVcsd0NBQXlDLFFBRXpCLElBQWxCdDRCLE1BQU1nRCxRQUF5QixDQUN4QyxNQUFNQSxRQUFVaEQsTUFBTWdELFFBQ3RCLElBQUl5bEQsU0FBVSxFQUNkLElBQUssSUFBSWxpQyxFQUFJLEVBQUdpdUQsR0FBS3h4RSxRQUFRMkQsT0FBUTRmLEVBQUlpdUQsR0FBSWp1RCxJQUFLLENBQ2hELE1BQU0xakIsT0FBU0csUUFBUXVqQixHQUNqQjNhLE1BQVEvSSxPQUFPVyxLQUFLb0ksTUFDeEIsb0hBRUYsR0FBYyxPQUFWQSxNQUFnQixDQUNsQixJQUFJekcsU0FBVyxHQUNmLE9BQVF5RyxNQUFNLElBQ1osSUFBSyxpQkFDSHpHLFNBQVcsY0FDWCxNQUNGLElBQUssa0JBQ0hBLFNBQVcsY0FDWCxNQUNGLElBQUssWUFDSEEsU0FBVyxpQkFDWCxNQUNGLElBQUssY0FDSEEsU0FBVyxRQUNYLE1BQ0YsSUFBSyxZQUNMLElBQUssUUFDSEEsU0FBVyxPQUNYLE1BQ0YsSUFBSyxvQkFDTCxJQUFLLGNBQ0hBLFNBQVcsY0FDWCxNQUNGLElBQUssVUFDSEEsU0FBVyxRQUdFLEtBQWJBLFdBQ0dtekIsV0FBVyxxQkFBcUJuekIsb0JBQ25DbXpCLFdBQVcscUJBQXFCbnpCLG1CQUFvQixFQUNwRHNqRCxTQUFVLEdBRVI1bEQsT0FBT29DLE1BQU1DLE1BQU1DLFdBQWFBLFdBQ2xDbkMsUUFBUXVqQixHQUFLNWhCLFFBQVFDLE1BQU02YSxZQUFZNWMsT0FBUSxDQUM3Q29DLE1BQU8sQ0FDTEMsS0FBTSxDQUNKQyxhQUlOc2pELFNBQVUsR0FHaEIsQ0FDRixDQUNJQSxVQUNGbndCLFdBQVd0MUIsUUFBVUEsUUFFekIsQ0FDQXMxQixXQUFXLG1CQUFxQixJQUNsQyxDQUVGLE9BQU9BLFVBQ1QsQ0FFQSwrQkFBT281QyxDQUEwQjF4RSxNQUFPczRCLFlBWXRDLE1BWEksQ0FBQyxPQUFPdnZCLFNBQVMvSSxNQUFNb0UsWUFBaUMsSUFBakJwRSxNQUFNOEIsY0FDWCxJQUF6QjlCLE1BQU04QixPQUFPL0UsVUFDdEJ1N0IsV0FBVyxrQkFBb0IsQ0FDN0JnTSxZQUFhLEtBQ2JDLGFBQWMsWUFHMEIsSUFBakN2a0MsTUFBTThCLE9BQU8yeUUsa0JBQ3RCbjhDLFdBQVcsMEJBQTRCLElBR3BDQSxVQUNULENBRUEsbUNBQU9pNUMsQ0FBOEJ2eEUsTUFBT3M0QixZQUMxQyxHQUNpQixjQUFmdDRCLE1BQU1vRSxXQUNnQyxJQUEvQnBFLE1BQU04QixRQUFRQyxTQUFTcXVCLElBQzlCLENBQ0EsTUFBTXlvQixlQUFpQjF3QyxLQUFLNmpELEtBQUtoc0QsTUFBTThCLE9BQU9DLFFBQVFxdUIsSUFBSW4wQixNQUFRLFFBRWxCLElBQXZDK0QsTUFBTThCLE9BQU9DLFFBQVFxdUIsSUFBSWl6QixXQUNPLE9BQXZDcmpELE1BQU04QixPQUFPQyxRQUFRcXVCLElBQUlpekIsWUFFekIvcUIsV0FBVyxnQ0FBa0MsUUFHTSxJQUE1Q3Q0QixNQUFNOEIsT0FBT0MsUUFBUXF1QixJQUFJeW9CLGdCQUNZLE9BQTVDNzRDLE1BQU04QixPQUFPQyxRQUFRcXVCLElBQUl5b0IsaUJBRXpCdmdCLFdBQVcscUNBQXVDLE1BQVF1Z0IscUJBR1osSUFBdkM3NEMsTUFBTThCLE9BQU9DLFFBQVFxdUIsSUFBSWl6QixXQUNPLE9BQXZDcmpELE1BQU04QixPQUFPQyxRQUFRcXVCLElBQUlpekIsWUFFekIvcUIsV0FBVyxnQ0FBa0MsUUFHRyxJQUF6Q3Q0QixNQUFNOEIsT0FBTzR5RSx5QkFDcUIsT0FBekMxMEUsTUFBTThCLE9BQU80eUUsOEJBQ3lDLElBQS9DMTBFLE1BQU04QixPQUFPNHlFLHdCQUF3Qno0RSxPQUNHLE9BQS9DK0QsTUFBTThCLE9BQU80eUUsd0JBQXdCejRFLFFBRXJDcThCLFdBQVcsd0NBQTBDLFFBR0wsSUFBekN0NEIsTUFBTThCLE9BQU80eUUseUJBQ3FCLE9BQXpDMTBFLE1BQU04QixPQUFPNHlFLDhCQUN1QyxJQUE3QzEwRSxNQUFNOEIsT0FBTzR5RSx3QkFBd0IxckUsS0FDQyxPQUE3Q2hKLE1BQU04QixPQUFPNHlFLHdCQUF3QjFyRSxNQUVyQ3N2QixXQUFXLHNDQUF3Q3VnQixxQkFFZCxJQUE1Qjc0QyxNQUFNOEIsT0FBT0MsUUFBUXUzQyxVQUVhLElBQWxDdDVDLE1BQU04QixPQUFPQyxRQUFRdTNDLEdBQUdyOUMsT0FDRyxPQUFsQytELE1BQU04QixPQUFPQyxRQUFRdTNDLEdBQUdyOUMsUUFFeEJxOEIsV0FBVywyQkFBNkJ1Z0IscUJBR0QsSUFBaEM3NEMsTUFBTThCLE9BQU9DLFFBQVF1M0MsR0FBR3R3QyxLQUNDLE9BQWhDaEosTUFBTThCLE9BQU9DLFFBQVF1M0MsR0FBR3R3QyxNQUV4QnN2QixXQUFXLHlCQUEyQnVnQixzQkFJVixJQUF2Qjc0QyxNQUFNOEIsT0FBT2d5RSxPQUNHLE9BQXZCOXpFLE1BQU04QixPQUFPZ3lFLFFBRWJ4N0MsV0FBVyxnQkFBa0IsR0FFakMsQ0FDQSxPQUFPQSxVQUNULENBRUEsMkJBQU95NkMsQ0FBc0I3QixNQUFPNTRDLFlBQ2xDLE1BQU1tMkIsTUFBUXRzRCxPQUFPK3VFLE1BQU16bEUsS0FBS0csTUFBTSx1Q0FJdEMsT0FIYyxPQUFWNmlELFFBQ0ZuMkIsV0FBVzdzQixJQUFNLDZCQUErQmdqRCxNQUFNLElBRWpEbjJCLFVBQ1QsQ0FFQSwyQkFBTzA2QyxDQUFzQjlCLE1BQU81NEMsWUFDbEMsSUFBSW0yQixNQUFRdHNELE9BQU8rdUUsTUFBTXpsRSxLQUFLRyxNQUFNLHVDQUN0QixPQUFWNmlELFFBQ0ZuMkIsV0FBVzdzQixJQUFNLDZCQUErQmdqRCxNQUFNLElBRXhELElBQUssTUFBT3g1QyxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVE0Z0UsTUFBTXpvRSxTQUN4Q2dtRCxNQUFRdHNELE9BQU91RCxFQUFFK0YsS0FBS0csTUFBTSx1Q0FDZCxPQUFWNmlELGFBQ2dDLElBQXZCbjJCLFdBQVc3dkIsVUFDcEI2dkIsV0FBVzd2QixRQUFVeW9FLE1BQU16b0UsU0FFN0I2dkIsV0FBVzd2QixRQUFRd00sR0FBR3hKLElBQU0sNkJBQStCZ2pELE1BQU0sSUFHckUsT0FBT24yQixVQUNULENBRUEsMkJBQU80NkMsQ0FBc0JsOEQsTUFBT3NoQixZQUNsQyxNQUFNbTJCLE1BQVF0c0QsT0FBTzZVLE1BQU12TCxLQUFLRyxNQUFNLHVDQUl0QyxPQUhjLE9BQVY2aUQsUUFDRm4yQixXQUFXN3NCLElBQU0sNkJBQStCZ2pELE1BQU0sSUFFakRuMkIsVUFDVCxFQ2hxQ0YsTUFBTXE4QyxlQUNKLDhFQUNBaG5FLGNBQWNDLFlBQ1osaUdBR0U5RCxLQUFPLENBQ1g4cUUsR0FBSSxDQUNGdmhFLFlBQWEsZUFDYndoRSxPQUFRLE9BQ1JDLFVBQVcsT0FDWEMsb0JBQXFCLE9BQ3JCQyxZQUFhLE9BQ2JDLE9BQVEsb0JBQ1JDLE9BQVEsV0FDUkMsZUFBZ0IscUNBQ2hCQyxnQkFBaUIsYUFDakJDLGNBQWUsMENBQ2ZDLGlCQUFrQix1QkFDbEJDLGNBQWUsb0JBQ2ZDLFFBQ0Usd0ZBR0ZDLE1BQ0UsNkRBQ0ZDLElBQUssbUNBQ0xDLFdBQVksNEJBQ1pDLFNBQVUsb0NBQ1ZDLFFBQ0UsaW1CQUVKQyxHQUFJLENBQ0Z6aUUsWUFBYSxjQUNid2hFLE9BQVEsT0FDUkMsVUFBVyxPQUNYQyxvQkFBcUIsT0FDckJDLFlBQWEsT0FDYmUsVUFBVyxNQUNYZCxPQUFRLHFCQUNSQyxPQUFRLDZCQUNSQyxlQUFnQixxQ0FDaEJDLGdCQUFpQixZQUNqQkMsY0FBZSxnREFDZkMsaUJBQWtCLHNCQUNsQkMsY0FBZSxvQkFDZkMsUUFDRSxxRkFHRkMsTUFDRSxnRkFHRkMsSUFBSyxtQ0FDTEMsV0FBWSw0QkFDWkMsU0FBVSxtQ0FDVkMsUUFDRSxtbEJBRUpHLEdBQUksQ0FDRjNpRSxZQUFhLGNBQ2J3aEUsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiZSxVQUFXLE1BQ1hkLE9BQVEsMkJBQ1JDLE9BQVEsa0JBQ1JDLGVBQWdCLHlCQUNoQkMsZ0JBQWlCLFlBQ2pCQyxjQUFlLGdEQUNmQyxpQkFBa0Isb0JBQ2xCQyxjQUFlLHNCQUNmQyxRQUNFLDBFQUdGQyxNQUNFLG1GQUdGQyxJQUFLLHVDQUNMQyxXQUFZLDRCQUNaQyxTQUFVLGtEQUNWQyxRQUNFLHdyQkFFSkksR0FBSSxDQUNGNWlFLFlBQWEsY0FDYndoRSxPQUFRLFFBQ1JDLFVBQVcsbUJBQ1hDLG9CQUFxQixRQUNyQkMsWUFBYSxRQUNiQyxPQUFRLHFDQUNSQyxPQUFRLG9CQUNSQyxlQUFnQixtQ0FDaEJDLGdCQUFpQixhQUNqQkMsY0FBZSwrQ0FDZkMsaUJBQWtCLDBCQUNsQkMsY0FBZSxrQ0FDZkMsUUFDRSx5RUFHRkMsTUFBTyxzQ0FDUEMsSUFBSyx3QkFDTEMsV0FBWSx5Q0FDWkMsU0FDRSxtSUFHRkMsUUFDRSx1bkJBRUpLLEdBQUksQ0FDRjdpRSxZQUFhLGVBQ2J3aEUsT0FBUSxVQUNSQyxVQUFXLFVBQ1hDLG9CQUFxQixVQUNyQkMsWUFBYSxLQUNiQyxPQUFRLCtCQUNSQyxPQUFRLHVDQUNSQyxlQUFnQiwyQkFDaEJDLGdCQUFpQixjQUNqQkMsY0FBZSwrQ0FDZkMsaUJBQWtCLHVDQUNsQkMsY0FBZSwrQkFDZkMsUUFDRSx3RUFHRkMsTUFDRSxvRkFHRkMsSUFBSyw2QkFDTEMsV0FBWSwwQ0FDWkMsU0FBVSxvQ0FDVkMsUUFDRSwrbkJBRUosUUFBUyxDQUNQeGlFLFlBQWEsMEJBQ2J3aEUsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiQyxPQUFRLHlCQUVSQyxPQUFRLFdBQ1JDLGVBQ0Usa0RBQ0ZDLGdCQUFpQixhQUNqQkMsY0FDRSxtREFDRkMsaUJBQWtCLDBCQUNsQkMsY0FBZSw0QkFDZkMsUUFDRSw0UUFHRkMsTUFDRSw4RUFHRkMsSUFBSyx1Q0FDTEMsV0FBWSwrQkFDWkMsU0FBVSwrQ0FDVkMsUUFDRSxrWkFFSk0sR0FBSSxDQUNGOWlFLFlBQWEsZ0JBQ2J3aEUsT0FBUSxLQUNSQyxVQUFXLEtBQ1hDLG9CQUFxQixLQUNyQkMsWUFBYSxLQUNiQyxPQUFRLHNDQUVSQyxPQUFRLFdBQ1JDLGVBQ0UsNENBQ0ZDLGdCQUFpQixTQUNqQkMsY0FDRSxzREFDRkMsaUJBQWtCLCtCQUNsQkMsY0FBZSw0QkFDZkMsUUFDRSxtSUFHRkMsTUFDRSw0R0FHRkMsSUFBSyxpREFDTEMsV0FBWSwrQ0FDWkMsU0FBVSxzREFDVkMsUUFDRSx3YkFJQXhjLGFBQWUsQ0FDbkJ1YixHQUFJLENBQ0Zod0IsSUFBSywrQ0FDTGhKLFdBQ0UsMERBQ0Z2L0MsSUFBSyxtREFDTEMsSUFBSyxtREFDTEMsSUFBSyxtREFDTEcsSUFBSyxtREFDTEMsSUFBSyxtREFDTEgsSUFBSyxtREFDTEMsSUFBSyxtREFDTEcsSUFBSyxtREFDTHd6QixJQUNFLDhEQUNGOG9CLEdBQ0UsZ0VBQ0ZJLEdBQ0Usa0VBR0ZwM0MsR0FDRSxnQkFDQTRILEtBQUs4cUUsR0FBR0ssT0FDUixnREFDQW5yRSxLQUFLOHFFLEdBQUdDLE9BQ1IsYUFDRjVpQyxNQUFPLDBEQUNQandDLE1BQ0UsdUNBR0E4SCxLQUFLOHFFLEdBQUdFLFVBQ1Isa0JBQ0Z6aUMsSUFBSyxrREFDTHlQLElBQUssb0RBQ0wyeUIsZ0JBQ0UsMkVBR0EzcUUsS0FBSzhxRSxHQUFHRyxvQkFDUix1QkFDRnhsRCxRQUNFLDREQUdBemxCLEtBQUs4cUUsR0FBR0ksWUFDUix5Q0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEsMkpBS0E3cUUsS0FBSzhxRSxHQUFHSyxPQUNSLElBQ0FuckUsS0FBSzhxRSxHQUFHTSxPQUNSLDRDQUNGa0IsWUFDRSx1RkFJRnBvRSxNQUNFLHFCQUNBMm1FLGVBREEsbUhBS0YwQixpQkFBa0IsNkNBQ2xCbDZFLEtBQU0sbUJBQXFCdzRFLGVBQWlCLGVBQzVDMkIsU0FDRSxJQUNBeHNFLEtBQUs4cUUsR0FBR08sZUFDUixJQUNBcnJFLEtBQUs4cUUsR0FBR1MsY0FDUixJQUNBdnJFLEtBQUs4cUUsR0FBR1UsaUJBQ1IsSUFDQXhyRSxLQUFLOHFFLEdBQUdXLGNBQ1IsS0FFSk8sR0FBSSxDQUNGbHhCLElBQUssaURBQ0xoSixXQUFZLHFEQUNadi9DLElBQUssa0RBQ0xDLElBQUssa0RBQ0xDLElBQUssa0RBQ0xHLElBQUssa0RBQ0xDLElBQUssa0RBQ0xILElBQUssa0RBQ0xDLElBQUssa0RBQ0xHLElBQUssa0RBQ0x3ekIsSUFDRSw4RUFHRjhvQixHQUNFLG1FQUdGSSxHQUNFLGlFQUdGcDNDLEdBQ0UsZ0JBQ0E0SCxLQUFLZ3NFLEdBQUdiLE9BQ1Isa0RBQ0FuckUsS0FBS2dzRSxHQUFHakIsT0FDUixhQUNGNWlDLE1BQ0UscUVBR0Zqd0MsTUFDRSwyQ0FHQThILEtBQUtnc0UsR0FBR2hCLFVBQ1Isa0JBQ0Z6aUMsSUFDRSxtRUFHRnlQLElBQUsscURBQ0wyeUIsZ0JBQ0UscUZBR0EzcUUsS0FBS2dzRSxHQUFHZixvQkFDUix1QkFDRnhsRCxRQUNFLDBEQUdBemxCLEtBQUtnc0UsR0FBR2QsWUFDUiwrQ0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEsOEpBS0E3cUUsS0FBS2dzRSxHQUFHYixPQUNSLElBQ0FuckUsS0FBS2dzRSxHQUFHWixPQUNSLDhDQUNGa0IsWUFDRSw0RkFJRnBvRSxNQUNFLHFCQUNBMm1FLGVBREEsb0hBS0YwQixpQkFDRSxxRUFHRmw2RSxLQUFNLG1CQUFxQnc0RSxlQUFpQixlQUM1QzJCLFNBQ0UsSUFDQXhzRSxLQUFLZ3NFLEdBQUdYLGVBQ1IsSUFDQXJyRSxLQUFLZ3NFLEdBQUdULGNBQ1IsSUFDQXZyRSxLQUFLZ3NFLEdBQUdSLGlCQUNSLElBQ0F4ckUsS0FBS2dzRSxHQUFHUCxjQUNSLEtBRUpTLEdBQUksQ0FDRnB4QixJQUFLLDBDQUNMaEosV0FBWSxxREFDWnYvQyxJQUFLLGlEQUNMQyxJQUFLLG1EQUNMQyxJQUFLLGtEQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLGtEQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMd3pCLElBQ0Usa0VBR0Y4b0IsR0FDRSwwRUFHRkksR0FDRSxrRUFHRnAzQyxHQUNFLGdCQUNBNEgsS0FBS2tzRSxHQUFHZixPQUNSLGtEQUNBbnJFLEtBQUtrc0UsR0FBR25CLE9BQ1IsYUFDRjVpQyxNQUFPLDJEQUNQandDLE1BQ0UseUNBR0E4SCxLQUFLa3NFLEdBQUdsQixVQUNSLGtCQUNGemlDLElBQUssa0RBQ0x5UCxJQUFLLHlEQUNMMnlCLGdCQUNFLHVFQUdBM3FFLEtBQUtrc0UsR0FBR2pCLG9CQUNSLHVCQUNGeGxELFFBQ0UscUVBR0F6bEIsS0FBS2tzRSxHQUFHaEIsWUFDUiwrQ0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEsZ0tBS0E3cUUsS0FBS2tzRSxHQUFHZixPQUNSLElBQ0FuckUsS0FBS2tzRSxHQUFHZCxPQUNSLDRDQUNGa0IsWUFDRSxzRkFJRnBvRSxNQUNFLHFCQUNBMm1FLGVBREEsbUhBS0YwQixpQkFDRSxxREFDRmw2RSxLQUFNLG1CQUFxQnc0RSxlQUFpQixlQUM1QzJCLFNBQ0UsSUFDQXhzRSxLQUFLa3NFLEdBQUdiLGVBQ1IsSUFDQXJyRSxLQUFLa3NFLEdBQUdYLGNBQ1IsSUFDQXZyRSxLQUFLa3NFLEdBQUdWLGlCQUNSLElBQ0F4ckUsS0FBS2tzRSxHQUFHVCxjQUNSLEtBRUpVLEdBQUksQ0FDRnJ4QixJQUFLLHNDQUNMaEosV0FDRSwwREFDRnYvQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMd3pCLElBQ0UsNkVBR0Y4b0IsR0FDRSxtRUFHRkksR0FDRSxxRUFHRnAzQyxHQUNFLGdCQUNBNEgsS0FBS21zRSxHQUFHaEIsT0FDUixnREFDQW5yRSxLQUFLbXNFLEdBQUdwQixPQUNSLGFBQ0Y1aUMsTUFDRSw0REFDRmp3QyxNQUNFLHVEQUdBOEgsS0FBS21zRSxHQUFHbkIsVUFDUixrQkFDRnppQyxJQUNFLDJFQUdGeVAsSUFBSyxzREFDTDJ5QixnQkFDRSxrRUFHQTNxRSxLQUFLbXNFLEdBQUdsQixvQkFDUix1QkFDRnhsRCxRQUNFLDJFQUdBemxCLEtBQUttc0UsR0FBR2pCLFlBQ1IseUNBQ0ZucUQsT0FDRSx3QkFDQThwRCxlQURBLHVLQUtBN3FFLEtBQUttc0UsR0FBR2hCLE9BQ1IsSUFDQW5yRSxLQUFLbXNFLEdBQUdmLE9BQ1IsNENBQ0ZrQixZQUNFLDJGQUdGcG9FLE1BQ0UscUJBQ0EybUUsZUFEQSxtSEFLRjBCLGlCQUNFLDREQUNGbDZFLEtBQU0sbUJBQXFCdzRFLGVBQWlCLGVBQzVDMkIsU0FDRSxJQUNBeHNFLEtBQUttc0UsR0FBR2QsZUFDUixJQUNBcnJFLEtBQUttc0UsR0FBR1osY0FDUixJQUNBdnJFLEtBQUttc0UsR0FBR1gsaUJBQ1IsSUFDQXhyRSxLQUFLbXNFLEdBQUdWLGNBQ1IsS0FFSlcsR0FBSSxDQUNGdHhCLElBQUssMENBQ0xoSixXQUNFLHlEQUNGdi9DLElBQUssbURBQ0xDLElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xDLElBQUssbURBQ0xILElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0x3ekIsSUFDRSwrREFDRjhvQixHQUNFLCtFQUdGSSxHQUNFLG9GQUdGcDNDLEdBQ0UsZ0JBQ0E0SCxLQUFLb3NFLEdBQUdqQixPQUNSLGdEQUNBbnJFLEtBQUtvc0UsR0FBR3JCLE9BQ1IsYUFDRjVpQyxNQUNFLGdFQUNGandDLE1BQ0UsMENBR0E4SCxLQUFLb3NFLEdBQUdwQixVQUNSLGtCQUNGemlDLElBQUssd0RBQ0x5UCxJQUFLLHNEQUNMMnlCLGdCQUNFLGlFQUdBM3FFLEtBQUtvc0UsR0FBR25CLG9CQUNSLHVCQUNGeGxELFFBQ0UseUVBR0F6bEIsS0FBS29zRSxHQUFHbEIsWUFDUix5Q0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEseUpBS0E3cUUsS0FBS29zRSxHQUFHakIsT0FDUixJQUNBbnJFLEtBQUtvc0UsR0FBR2hCLE9BQ1IsNENBQ0ZrQixZQUNFLDBGQUdGcG9FLE1BQ0UscUJBQ0EybUUsZUFEQSxtSEFLRjBCLGlCQUNFLHVEQUNGbDZFLEtBQU0sbUJBQXFCdzRFLGVBQWlCLGVBQzVDMkIsU0FDRSxJQUNBeHNFLEtBQUtvc0UsR0FBR2YsZUFDUixJQUNBcnJFLEtBQUtvc0UsR0FBR2IsY0FDUixJQUNBdnJFLEtBQUtvc0UsR0FBR1osaUJBQ1IsSUFDQXhyRSxLQUFLb3NFLEdBQUdYLGNBQ1IsS0FFSixRQUFTLENBQ1Azd0IsSUFBSyxrREFFTGhKLFdBQ0UsMERBQ0Z2L0MsSUFBSyxzREFDTEMsSUFBSyxzREFDTEMsSUFBSyxzREFDTEcsSUFBSyxzREFDTEMsSUFBSyxzREFDTEgsSUFBSyxzREFDTEMsSUFBSyxzREFDTEcsSUFBSyxzREFDTHd6QixJQUNFLGlFQUdGOG9CLEdBQ0UsbUVBR0ZJLEdBQ0Usa0VBR0ZwM0MsR0FDRSxnQkFDQTRILEtBQUssU0FBU21yRSxPQUNkLGdEQUNBbnJFLEtBQUssU0FBUytxRSxPQUNkLGFBQ0Y1aUMsTUFDRSw2REFDRmp3QyxNQUNFLDBDQUdBOEgsS0FBSyxTQUFTZ3JFLFVBQ2Qsa0JBQ0Z6aUMsSUFBSyxrREFDTHlQLElBQUssdURBQ0wyeUIsZ0JBQ0UscUZBR0EzcUUsS0FBSyxTQUFTaXJFLG9CQUNkLHVCQUNGeGxELFFBQ0Usb0ZBR0F6bEIsS0FBSyxTQUFTa3JFLFlBQ2QseUNBQ0ZucUQsT0FDRSx3QkFDQThwRCxlQURBLGtLQUtBN3FFLEtBQUssU0FBU21yRSxPQUNkLElBQ0FuckUsS0FBSyxTQUFTb3JFLE9BQ2QsNENBQ0ZrQixZQUNFLDhGQUdGcG9FLE1BQ0UscUJBQ0EybUUsZUFEQSxtSEFLRjBCLGlCQUFrQixxQ0FDbEJsNkUsS0FBTSxtQkFBcUJ3NEUsZUFBaUIsZUFDNUMyQixTQUNFLElBQ0F4c0UsS0FBSyxTQUFTcXJFLGVBQ2QsSUFDQXJyRSxLQUFLLFNBQVN1ckUsY0FDZCxJQUNBdnJFLEtBQUssU0FBU3dyRSxpQkFDZCxJQUNBeHJFLEtBQUssU0FBU3lyRSxjQUNkLEtBRUpZLEdBQUksQ0FDRnZ4QixJQUFLLCtDQUVMaEosV0FDRSwwREFDRnYvQyxJQUFLLHVEQUNMQyxJQUFLLHVEQUNMQyxJQUFLLHVEQUNMRyxJQUFLLHVEQUNMQyxJQUFLLHVEQUNMSCxJQUFLLHVEQUNMQyxJQUFLLHVEQUNMRyxJQUFLLHVEQUNMd3pCLElBQ0Usd0VBR0Y4b0IsR0FDRSx3RkFHRkksR0FDRSx1RkFHRnAzQyxHQUNFLGdCQUNBNEgsS0FBS3FzRSxHQUFHbEIsT0FDUix1REFDQW5yRSxLQUFLcXNFLEdBQUd0QixPQUNSLGNBQ0Y1aUMsTUFDRSxvRUFDRmp3QyxNQUNFLCtDQUdBOEgsS0FBS3FzRSxHQUFHckIsVUFDUixtQkFDRnppQyxJQUFLLGlFQUNMeVAsSUFBSyw2REFDTDJ5QixnQkFDRSxxR0FHQTNxRSxLQUFLcXNFLEdBQUdwQixvQkFDUix3QkFDRnhsRCxRQUNFLDJFQUdBemxCLEtBQUtxc0UsR0FBR25CLFlBQ1IsNkNBQ0ZucUQsT0FDRSwyQkFDQThwRCxlQURBLHlMQUtBN3FFLEtBQUtxc0UsR0FBR2xCLE9BQ1IsSUFDQW5yRSxLQUFLcXNFLEdBQUdqQixPQUNSLDZDQUNGa0IsWUFDRSw0R0FHRnBvRSxNQUNFLHFCQUNBMm1FLGVBREEsOElBS0YwQixpQkFBa0Isc0RBQ2xCbDZFLEtBQU0sbUJBQXFCdzRFLGVBQWlCLGdCQUM1QzJCLFNBQ0UsSUFDQXhzRSxLQUFLcXNFLEdBQUdoQixlQUNSLElBQ0FyckUsS0FBS3FzRSxHQUFHZCxjQUNSLElBQ0F2ckUsS0FBS3FzRSxHQUFHYixpQkFDUixJQUNBeHJFLEtBQUtxc0UsR0FBR1osY0FDUixNQUlDLE1BQU1nQix3QkFDWCxvQkFBT0MsQ0FBZXpkLEtBQU8sTUFPM0IsT0FOS0EsT0FDSEEsS0FBTzExRCxLQUFLQyxLQUFLeTFELFdBRWUsSUFBdkJNLGFBQWFOLFFBQ3RCQSxLQUFPLE1BRUZBLElBQ1QsQ0FFQSxxQkFBTzBkLENBQWdCMWQsTUFDckIsSUFBSThjLFFBQVUvckUsS0FBSzhxRSxHQUFHaUIsUUFJdEIsWUFIMEIsSUFBZi9yRSxLQUFLaXZELFFBQ2Q4YyxRQUFVL3JFLEtBQUtpdkQsTUFBTThjLFNBRWhCQSxPQUNULENBRUEsc0JBQU9hLEdBQ0wsTUFBTWxzRSxPQUFTLENBQUMsRUFDaEIsSUFBSyxNQUFNNUksT0FBT2tJLEtBQ2hCVSxPQUFPNUksS0FBT2tJLEtBQUtsSSxLQUFLeVIsWUFFMUIsT0FBTzdJLE1BQ1QsQ0FFQSxjQUFPbXNFLENBQVM1ZCxNQUNkLE9BQU9qdkQsS0FBS2l2RCxPQUFTanZELEtBQUs4cUUsRUFDNUIsQ0FFQSw0QkFBT2dDLENBQXVCN2QsTUFDNUIsT0FBT00sYUFBYU4sT0FBU00sYUFBYXViLEVBQzVDLEVDMTNCSyxNQUFNaUMsa0JBQ1gsV0FBQXpyRSxHQUNFckYsS0FBSzBLLE9BQVMsQ0FBQyxFQUNmMUssS0FBSyt3RSxjQUFnQixFQUN2QixDQUVBLG1CQUFXQyxHQUNULE1BQU8sR0FDVCxDQUVBLG1CQUFXQyxHQUNULE1BQU8sR0FDVCxDQVFBLFFBQUFDLENBQVVDLE1BQU9sc0UsVUFBWSxNQUMzQixNQUFnQyxXQUE1QmtzRSxNQUFNOXJFLGFBQWFqUCxLQUNkKzZFLE1BRUYsSUFBSXhwRSxPQUFPd3BFLE1BQU9sc0UsVUFDM0IsQ0FPQSxXQUFBbXNFLENBQWFuN0UsR0FDWCxNQUE4QixrQkFBMUIrSixLQUFLK0QsS0FBS3VKLFlBQ0xyWCxFQUNKMFosUUFBUSxXQUFZLEtBQ3BCQSxRQUFRLE9BQVEsSUFDaEJBLFFBQVEsY0FBZSxNQUN2QkEsUUFBUSxjQUFlLEtBQ3ZCQSxRQUFRLG9CQUFxQixJQUM3QkEsUUFBUSxRQUFTLElBQ2pCQSxRQUFRLFFBQVMsSUFFZjFaLEVBQ0owWixRQUFRLFdBQVksS0FDcEJBLFFBQVEsT0FBUSxJQUNoQkEsUUFBUSxnQkFBaUIsR0FDOUIsQ0FTQSxhQUFBMGhFLENBQWVwN0UsR0FDYixRQUFpQixJQUFOQSxFQUFtQixPQUFPQSxFQUNyQyxRQUFtQyxJQUF4QitKLEtBQUsrRCxLQUFLaXNFLFVBQTJCLENBQzlDLE1BQU1zQixNQUFRLElBQUkzcEUsT0FDaEIsY0FBZ0IzSCxLQUFLK0QsS0FBS2lzRSxVQUFZLGNBQ3RDLE9BRUYsT0FBTy81RSxFQUFFMFosUUFBUTJoRSxNQUFPLGNBQzFCLENBQ0UsT0FBT3I3RSxDQUVYLENBT0EsTUFBQXM3RSxDQUFRdDdFLEdBQ04sT0FBd0IsSUFBcEJBLEVBQUUra0MsT0FBT3A2QixRQVNJLEtBTmpCM0ssRUFBSUEsRUFDRCtrQyxPQUNBdHVCLE1BQU0sTUFDTjFJLEtBQUlxeEMsTUFBUUEsS0FBS3JhLE9BQU9yckIsUUFBUSxjQUFlLE1BQy9DdFosUUFBT2cvQyxNQUFRQSxPQUNmaHhDLEtBQUssWUFDRnpELE9BUkcsR0FXRixNQUFRM0ssRUFBSSxNQUNyQixDQWFBLEtBQUFnZ0IsQ0FDRXU3RCxVQUNBLGdCQUNtQixFQUFJLFVBQ1YsRUFBSSxLQUNSVixrQkFBa0JHLFNBQVEsTUFDMUIsRUFBSyxlQUNJLEdBQ2QsQ0FBQyxHQUVMLElBQUl4c0UsUUFBUyxFQUNUZ3RFLFFBQVMsRUFNYixRQUxvQyxJQUF6Qnp4RSxLQUFLc3hFLE1BQU1FLFVBQ3BCQyxPQUFTenhFLEtBQUtreEUsU0FBU2x4RSxLQUFLc3hFLE1BQU1FLGdCQUNNLElBQXhCeHhFLEtBQUsrRCxLQUFLeXRFLFlBQzFCQyxPQUFTenhFLEtBQUtreEUsU0FBU2x4RSxLQUFLK0QsS0FBS3l0RSxhQUVwQixJQUFYQyxPQUFrQixFQUNQLElBQVRwOEIsT0FDRkEsS0FBT3IxQyxLQUFLcTFDLE1BRWQsTUFBTXAvQixNQUFRdzdELE9BQU8xd0IsS0FBSzFMLE1BQzFCLElBQUluL0MsTUFBUSxLQUNaLEdBQ1ksT0FBVitmLFNBQ21CLElBQWxCeTdELG9CQUNnRCxLQUF2Q3o3RCxNQUFNM1IsUUFBVSxDQUFDLEdBQUdvdEUsZ0JBQzlCLENBS0EsR0FKQWp0RSxPQUFTd1IsTUFBTTNSLFFBQVUsQ0FBQyxFQUN0QnF0RSxpQkFDRjN4RSxLQUFLcTFDLEtBQU9yMUMsS0FBS3ExQyxLQUFLMWxDLFFBQVFzRyxNQUFNLEdBQUcra0IsT0FBUSxNQUFNQSxRQUVuRDQyQyxTQUNGLElBQUssTUFBTS8xRSxPQUFPK0QsT0FBT21FLEtBQUtrUyxNQUFNM1IsUUFDbEMsT0FBUWpHLE1BQ04sS0FBS3l5RSxrQkFBa0JHLFNBQ3JCanhFLEtBQUswSyxPQUFPN08sS0FBT08sT0FBTzZaLE1BQU0zUixPQUFPekksTUFBTThULFFBQVEsS0FBTSxLQUMzRCxNQUNGLEtBQUttaEUsa0JBQWtCRSxTQUNyQjk2RSxNQUFRZ0csT0FBTytaLE1BQU0zUixPQUFPekksTUFDdkJDLE1BQU01RixTQUNUOEosS0FBSzBLLE9BQU83TyxLQUFPSyxPQUFPK1osTUFBTTNSLE9BQU96SSxPQU1qRDRJLE9BQU8sV0FBYXdSLE1BQU0sR0FDMUJ4UixPQUFPLFVBQVl3UixNQUFNb0gsS0FDM0IsQ0FDRixDQUNBLE9BQU81WSxNQUNULENBT0EsYUFBQW90RSxDQUFleDhCLE1BQ2IsR0FBMkIsSUFBdkJBLEtBQUtyYSxPQUFPcDZCLE9BQ2QsT0FLRixJQUFJa2tCLE9BQ0F4cEIsTUFDQXcyRSxRQUxBbHZFLE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVEyK0IsSUFBSSxjQUFldUwsTUFLN0IsSUFBSTI4QixhQUFjLEVBQ2RDLFNBQVcsR0FDZixHQUdFLEdBRkFBLFdBQ0E1OEIsS0FBT0EsS0FBS3JhLE9BRVQxL0IsTUFBUTBFLEtBQUtpVyxNQUFNLGNBQWUsQ0FBRTI3RCxVQUFVLEVBQU92OEIsT0FFdERBLEtBQU9BLEtBQUsxbEMsUUFBUXJVLE1BQU0sV0FBWSxXQUNKLElBQXZCMEUsS0FBSzBLLE9BQU9tWixTQUNyQjdqQixLQUFLMEssT0FBT21aLE9BQVMsSUFFdkI3akIsS0FBSzBLLE9BQU9tWixPQUFPM3NCLEtBQUssQ0FDdEJkLEtBQU00SixLQUFLb3hFLFlBQVk5MUUsTUFBTWxGLE1BQzdCRixNQUFPZ0csT0FBT1osTUFBTTQyRSxZQUNwQmg3RSxNQUFNLFNBRUgsR0FDSjR0QixPQUFTOWtCLEtBQUtpVyxNQUFNLFNBQVUsQ0FDN0IyN0QsVUFBVSxFQUNWdjhCLEtBQ0FxOEIsZUFBK0IsSUFBaEJNLGFBQXdCLGVBRXpDLENBQ0EzOEIsS0FBT0EsS0FBSzFsQyxRQUFRbVYsT0FBTyxXQUFZLE1BQ3ZDLE1BQU0xdUIsS0FBTzRKLEtBQUtveEUsWUFBWXRzRCxPQUFPMXVCLE1BQVEsSUFDN0MsSUFBSStnQixPQUFTblgsS0FBS3F4RSxjQUFjcnhFLEtBQUtveEUsWUFBWXRzRCxPQUFPM04sUUFBVSxLQUNsRSxNQUFNZzdELFlBQ0pueUUsS0FBS2lXLE1BQU0sVUFBVyxDQUNwQm8vQixLQUFNai9DLEtBQ051N0UsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVo1eEUsS0FBS2lXLE1BQU0sUUFBUyxDQUNsQm8vQixLQUFNai9DLEtBQ051N0UsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVo1eEUsS0FBS2lXLE1BQU0sTUFBTyxDQUNoQm8vQixLQUFNai9DLEtBQ051N0UsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVo1eEUsS0FBS2lXLE1BQU0sYUFBYyxDQUN2Qm8vQixLQUFNai9DLEtBQ051N0UsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVo1eEUsS0FBS2lXLE1BQU0sV0FBWSxDQUNyQm8vQixLQUFNai9DLEtBQ051N0UsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBV2QsSUFBSTVqRSxNQUpGZ2tFLFlBSHNCLE9BQXRCbHRELE9BQU9vdEQsaUJBQ3NCLElBQXRCcHRELE9BQU9vdEQsWUFFQWgyRSxPQUFPNG9CLE9BQU9vdEQsWUFLOUIsSUFBSTk1RSxNQUFPLEVBQ1BDLE1BQU8sRUFDWCxHQUNFMlYsTUFBUWhPLEtBQUtreEUsU0FDWCxpQkFDRWx4RSxLQUFLK0QsS0FBS29yRSxPQUNWLFNBQ0FudkUsS0FBSytELEtBQUttckUsT0FDVixlQUNBbHZFLEtBQUswSyxPQUFPdk8sR0FBR3dULFFBQVEsUUFBUyxJQUNoQyxNQUNGb3hDLEtBQUs1cEMsUUFDSG5KLE9BQ0Y1VixNQUFPLEVBQ1ArZSxPQUFTQSxPQUFPeEgsUUFBUTNCLE1BQU0sR0FBSSxNQUVsQ0EsTUFBUWhPLEtBQUtreEUsU0FDWCxpQkFDRWx4RSxLQUFLK0QsS0FBS21yRSxPQUNWLGtCQUNBbHZFLEtBQUswSyxPQUFPdk8sR0FBR3dULFFBQVEsUUFBUyxJQUNoQyxNQUNGb3hDLEtBQUs1cEMsUUFDSG5KLFFBQ0YzVixNQUFPLEVBQ1A4ZSxPQUFTQSxPQUFPeEgsUUFBUTNCLE1BQU0sR0FBSSxZQUcvQkEsT0FDVCxNQUFNb2tFLFFBQVVqN0QsT0FBT3pLLE1BQU0sS0FDdkIybEUsVUFBK0IsSUFBbkJELFFBQVF4eEUsT0FDcEIwRSxLQUFPLENBQ1hsUCxLQUNBaUksS0FBTSxTQUNOdEMsT0FBUSxDQUNOa00sTUFBTyxDQUNMaUcsR0FBSThqRSxhQUVObnJFLFdBQVksQ0FBQyxFQUNiaUQsTUFBTyxDQUNMTCxPQUFRLENBQ052VCxNQUFPbThFLFVBQVksR0FBSyxFQUN4Qmw3RCxPQUFRaTdELFFBQVEsSUFFbEJqb0UsS0FBTSxDQUNKalUsTUFBT204RSxVQUFZLEdBQUssRUFDeEJsN0QsT0FBUWs3RCxVQUFZRCxRQUFRLEdBQUssSUFFbkMvbkUsUUFBUyxDQUNQblUsTUFBT204RSxVQUFZLEdBQUssRUFDeEJsN0QsT0FBUWs3RCxVQUFZRCxRQUFRLEdBQUssT0FNekM5c0UsS0FBS3ZKLE9BQU84SyxXQUFXOU8sUUFBVXM2RSxVQUNqQy9zRSxLQUFLdkosT0FBTzhLLFdBQVdqUCxLQUFPdTZFLFVBQVlFLFVBQzFDL3NFLEtBQUt2SixPQUFPOEssV0FBV2xQLE9BQVMyTixLQUFLdkosT0FBTzhLLFdBQVdqUCxLQUN2RDBOLEtBQUt2SixPQUFPOEssV0FBV3pPLEtBQU9BLEtBQzlCa04sS0FBS3ZKLE9BQU84SyxXQUFXeE8sS0FBT0EsVUFDSyxJQUF4QjJILEtBQUswSyxPQUFPNG5FLFVBQ3JCdHlFLEtBQUswSyxPQUFPNG5FLFFBQVUsSUFFeEJ0eUUsS0FBSzBLLE9BQU80bkUsUUFBUXA3RSxLQUFLb08sS0FDM0IsTUFBWXdzRSxRQUFVejhCLEtBQUt4dkMsTUFBTSxZQUMvQnd2QyxLQUFPQSxLQUFLMWxDLFFBQVFtaUUsUUFBUSxHQUFJLE9BQ3RCQSxRQUFVejhCLEtBQUt4dkMsTUFBTSxlQUMvQnd2QyxLQUFPLFVBRUY0OEIsU0FBVyxJQUFRbnRELFFBQVl4cEIsT0FBVys1QyxPQUNsQyxJQUFiNDhCLFdBQ0ZscEUsR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLQyxTQUFTLG1DQUVyQjJOLFFBQVFvM0MsTUFBTSxzQkFBdUJsTixNQUV6QyxDQU9BLGFBQUFrOUIsQ0FBZWw5QixLQUFNeDVDLElBQU0sVUFDekIsR0FBMkIsSUFBdkJ3NUMsS0FBS3JhLE9BQU9wNkIsT0FDZCxPQUVGLE1BQU00eEUsT0FBU245QixLQUFLM29DLE1BQU0sV0FJMUIsSUFBSXpFLE1BSEF1cUUsT0FBTzV4RSxPQUFTLElBQ2xCeTBDLEtBQU9tOUIsT0FBTyxJQUdoQixJQUFJUCxTQUFXLEdBQ2YsR0FDRUEsV0FDQTU4QixLQUFPQSxLQUFLcmEsT0FDWi95QixNQUFRakksS0FBS2lXLE1BQU0sUUFBUyxDQUFFMjdELFVBQVUsRUFBT3Y4QixPQUMzQ3B0QyxRQUNGb3RDLEtBQU9BLEtBQUsxbEMsUUFBUTFILE1BQU0sV0FBWSxXQUNOLElBQXJCakksS0FBSzBLLE9BQU83TyxPQUNyQm1FLEtBQUswSyxPQUFPN08sS0FBTyxJQUVyQm1FLEtBQUswSyxPQUFPN08sS0FBSzNFLEtBQUssQ0FDcEJkLEtBQU00SixLQUFLb3hFLFlBQVlucEUsTUFBTTdSLE1BQzdCRixNQUFPZ0csT0FBTytMLE1BQU1pcUUscUJBR2pCRCxTQUFXLEdBQUtocUUsT0FDUixJQUFiZ3FFLFdBQ0ZscEUsR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLQyxTQUFTLG1DQUVyQjJOLFFBQVFvM0MsTUFBTSxxQkFBc0JsTixNQUV4QyxDQU9BLGFBQUFvOUIsQ0FBZXA5QixNQUNiLEdBQTJCLElBQXZCQSxLQUFLcmEsT0FBT3A2QixPQUNkLE9BRUYsTUFBTTR4RSxPQUFTbjlCLEtBQUszb0MsTUFBTSxXQUN0QjhsRSxPQUFPNXhFLE9BQVMsSUFDbEJ5MEMsS0FBT205QixPQUFPLElBRWhCLE1BQU1FLFVBQVlyOUIsS0FBSzFsQyxRQUFRLGFBQWMsS0FBS2pELE1BQU0sb0JBQ3hEMU0sS0FBS3ExQyxLQUFPcjFDLEtBQUtxMUMsS0FBSzFsQyxRQUFRMGxDLEtBQUtyYSxPQUFRLE1BQzNDLElBQUssTUFBTTIzQyxTQUFTRCxlQUNnQixJQUF2QjF5RSxLQUFLMEssT0FBTzZpRSxTQUNyQnZ0RSxLQUFLMEssT0FBTzZpRSxPQUFTLElBRXZCdnRFLEtBQUswSyxPQUFPNmlFLE9BQU9yMkUsS0FBSzhJLEtBQUtveEUsWUFBWXVCLE9BRTdDLENBT0Esb0JBQU1DLENBQWdCdjlCLE1BRXBCcjFDLEtBQUtxMUMsS0FBT2o1QyxPQUFPaTVDLE1BQ2hCcmEsT0FDQXJyQixRQUFRLHdCQUF5QixLQUNqQ0EsUUFBUSxVQUFXLEtBQ25CQSxRQUFRLGtDQUFtQyxJQUU5QyxJQTJESWtqRSxPQTNEQTN2RSxJQUFNbEQsS0FBS3ExQyxLQUFLejBDLE9BRWhCcVYsTUFBUWpXLEtBQUtpVyxNQUFNLE1BQU8sQ0FBRTVYLEtBQU15eUUsa0JBQWtCRSxXQUN0RCxVQXlERixHQXZES2wxRSxNQUFNbWEsU0FDVC9TLElBQU1kLEtBQUtjLElBQUlBLElBQUsrUyxRQUd0QkEsTUFBUWpXLEtBQUtpVyxNQUFNLE1BQU8sQ0FBRTVYLEtBQU15eUUsa0JBQWtCRSxXQUFZLFVBQzNEbDFFLE1BQU1tYSxTQUNUL1MsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSytTLFFBR3RCQSxNQUFRalcsS0FBS2lXLE1BQU0sTUFBTyxDQUFFNVgsS0FBTXl5RSxrQkFBa0JFLFdBQVksVUFDM0RsMUUsTUFBTW1hLFNBQ1QvUyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLK1MsUUFHdEJBLE1BQVFqVyxLQUFLaVcsTUFBTSxNQUFPLENBQUU1WCxLQUFNeXlFLGtCQUFrQkUsV0FBWSxVQUMzRGwxRSxNQUFNbWEsU0FDVC9TLElBQU1kLEtBQUtjLElBQUlBLElBQUsrUyxRQUd0QkEsTUFBUWpXLEtBQUtpVyxNQUFNLE1BQU8sQ0FBRTVYLEtBQU15eUUsa0JBQWtCRSxXQUFZLFVBQzNEbDFFLE1BQU1tYSxTQUNUL1MsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSytTLFFBR3RCQSxNQUFRalcsS0FBS2lXLE1BQU0sTUFBTyxDQUFFNVgsS0FBTXl5RSxrQkFBa0JFLFdBQVksVUFDM0RsMUUsTUFBTW1hLFNBQ1QvUyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLK1MsUUFHdEJBLE1BQVFqVyxLQUFLaVcsTUFBTSxNQUFPLENBQUU1WCxLQUFNeXlFLGtCQUFrQkUsV0FBWSxVQUMzRGwxRSxNQUFNbWEsU0FDVC9TLElBQU1kLEtBQUtjLElBQUlBLElBQUsrUyxRQUd0QkEsTUFBUWpXLEtBQUtpVyxNQUFNLE1BQU8sQ0FBRTVYLEtBQU15eUUsa0JBQWtCRSxXQUFZLFVBQzNEbDFFLE1BQU1tYSxTQUNUL1MsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSytTLFFBR3RCQSxNQUFRalcsS0FBS2lXLE1BQU0sTUFBTyxDQUFFNVgsS0FBTXl5RSxrQkFBa0JFLFdBQVksVUFDM0RsMUUsTUFBTW1hLFNBQ1QvUyxJQUFNZCxLQUFLYyxJQUFJQSxJQUFLK1MsUUFHdEJBLE1BQVFqVyxLQUFLaVcsTUFBTSxLQUFNLENBQUU1WCxLQUFNeXlFLGtCQUFrQkUsV0FBWSxVQUMxRGwxRSxNQUFNbWEsU0FDVC9TLElBQU1kLEtBQUtjLElBQUlBLElBQUsrUyxRQUd0QkEsTUFBUWpXLEtBQUtpVyxNQUFNLEtBQU0sQ0FBRTVYLEtBQU15eUUsa0JBQWtCRSxXQUFZLFVBQzFEbDFFLE1BQU1tYSxTQUNUL1MsSUFBTWQsS0FBS2MsSUFBSUEsSUFBSytTLFFBSWxCL1MsSUFBTSxHQWtCUixHQWpCQTJ2RSxPQUFTN3lFLEtBQUtxMUMsS0FBS2oyQixPQUFPLEVBQUdsYyxLQUU3QitTLE1BQVFqVyxLQUFLaVcsTUFBTSxPQUFRLENBQUVvL0IsS0FBTXc5QixVQUNyQixJQUFWNThELE1BRUZqVyxLQUFLMEssT0FBT3RVLEtBQU9rSCxLQUFLQyxLQUFLQyxTQUFTLGlDQUd0Q3ExRSxPQUFTQSxPQUFPbGpFLFFBQVFzRyxNQUFNLFdBQVksTUFHNUNBLE1BQVFqVyxLQUFLaVcsTUFBTSxNQUFPLENBQUVvL0IsS0FBTXc5QixVQUNwQixJQUFWNThELFFBRUY0OEQsT0FBU0EsT0FBT2xqRSxRQUFRc0csTUFBTSxXQUFZLFFBR3ZDalcsS0FBS2lXLE1BQU0sYUFBYyxDQUFFby9CLEtBQU13OUIsVUFBK0IsS0FBbEJBLE9BQU83M0MsT0FBZSxDQUV2RSxJQUFJNmEsV0FBYWc5QixPQUNiQSxPQUFPeHFFLFFBQVEsTUFBUSxJQUV6Qnd0QyxXQUFhZzlCLE9BQU96ekQsT0FBTyxFQUFHeXpELE9BQU94cUUsUUFBUSxLQUFPLElBRXREckksS0FBSzBLLE9BQU9tckMsV0FBYUEsV0FDdEJsbUMsUUFBUSxhQUFjLEtBQ3RCcXJCLE9BQ0FyckIsUUFBUSxLQUFNLElBQ2pCM1AsS0FBS3ExQyxLQUFPcjFDLEtBQUtxMUMsS0FBSzFsQyxRQUFRa21DLFdBQVc3YSxPQUFRLEtBQ25ELE9BR0FoN0IsS0FBSzBLLE9BQU90VSxLQUFPa0gsS0FBS0MsS0FBS0MsU0FBUyxpQ0FHeEMsUUFDb0MsSUFBM0J3QyxLQUFLMEssT0FBT21yQyxpQkFDUSxJQUFwQjcxQyxLQUFLMEssT0FBT20wQyxJQUNuQixDQUNBLE1BQU1pMEIsY0FBZ0I5eUUsS0FBSzBLLE9BQU9tckMsV0FBV2h3QyxNQUMzQyxtQ0FFRWl0RSxnQkFDRjl5RSxLQUFLMEssT0FBT20wQyxJQUFNaTBCLGNBQWN4dUUsT0FBT3U2QyxJQUN2QzcrQyxLQUFLMEssT0FBT21yQyxXQUFhaTlCLGNBQWN4dUUsT0FBT3V4QyxXQUFXN2EsT0FFN0QsQ0FHR2g3QixLQUFLaVcsTUFBTSxRQUNaalcsS0FBS2lXLE1BQU0sU0FBVSxDQUNuQjA3RCxnQkFBZ0IsRUFDaEJDLFVBQVUsRUFDVnY4QixLQUFNcjFDLEtBQUswSyxPQUFPdk8sT0FHcEI2RCxLQUFLMEssT0FBT3ZPLEdBQUssS0FFbkI2RCxLQUFLMEssT0FBT3ZPLEdBQUs2RCxLQUFLcXhFLGNBQWNyeEUsS0FBSzBLLE9BQU92TyxJQUVoRDZELEtBQUtpVyxNQUFNLFNBR1JqVyxLQUFLaVcsTUFBTSxXQUNaalcsS0FBS2lXLE1BQU0sWUFBYSxDQUN0QjA3RCxnQkFBZ0IsRUFDaEJDLFVBQVUsRUFDVnY4QixLQUFNcjFDLEtBQUswSyxPQUFPek8sVUFHcEIrRCxLQUFLMEssT0FBT3pPLE1BQVEsS0FHdEIrRCxLQUFLaVcsTUFBTSxNQUFPLENBQUU1WCxLQUFNeXlFLGtCQUFrQkUsV0FFNUNoeEUsS0FBS2lXLE1BQU0sTUFBTyxDQUFFNVgsS0FBTXl5RSxrQkFBa0JFLFdBRTVDaHhFLEtBQUtpVyxNQUFNLFdBQ1hqVyxLQUFLMEssT0FBTzhlLFFBQVV4cEIsS0FBS3F4RSxjQUFjcnhFLEtBQUswSyxPQUFPOGUsU0FHbkR4cEIsS0FBS2lXLE1BQU0sb0JBQ1hqVyxLQUFLaVcsTUFBTSxzQkFBdUIsQ0FDaEMwN0QsZ0JBQWdCLEVBQ2hCQyxVQUFVLEVBQ1Z2OEIsS0FBTXIxQyxLQUFLMEssT0FBT2drRSxvQkFHcEIxdUUsS0FBSzBLLE9BQU9na0UsZ0JBQWtCLEtBR2hDMXVFLEtBQUtxMUMsS0FBTyxLQUFPcjFDLEtBQUtxMUMsS0FDeEIsSUFBSWs3QixTQUFXdndFLEtBQUtreEUsU0FBUyxJQUFNbHhFLEtBQUsrRCxLQUFLcXJFLGVBQWlCLElBQUssS0FDakMsT0FBOUJwdkUsS0FBS3ExQyxLQUFLeHZDLE1BQU0wcUUsWUFFbEJBLFNBQVd2d0UsS0FBS2lXLE1BQU0sbUJBQW9CLENBQ3hDMjdELFVBQVUsRUFDVkQsZ0JBQWdCLElBRWRwQixXQUVGdndFLEtBQUtxMUMsS0FBTyxDQUNWcjFDLEtBQUtxMUMsS0FBSzUyQyxNQUFNLEVBQUc4eEUsU0FBUyxXQUM1QnZ3RSxLQUFLK0QsS0FBS3NyRSxnQkFDVnJ2RSxLQUFLcTFDLEtBQUs1MkMsTUFBTTh4RSxTQUFTLFlBQ3pCbHNFLEtBQUssTUFJWCxNQUFNMHVFLGVBQWlCL3lFLEtBQUtreEUsU0FBU2x4RSxLQUFLc3hFLE1BQU1mLFNBQVUsS0FFMUQsR0FEQUEsU0FBV3Z3RSxLQUFLcTFDLEtBQUszb0MsTUFBTXFtRSxnQkFDVixPQUFieEMsU0FDRixJQUFLLElBQUkvdkQsRUFBSSxFQUFHaXVELEdBQUs4QixTQUFTM3ZFLE9BQVE0ZixFQUFJaXVELEdBQUlqdUQsSUFJcEMsT0FGTit2RCxTQUFTL3ZELEdBQUczYSxNQUNWN0YsS0FBS2t4RSxTQUFTLElBQU1seEUsS0FBSytELEtBQUtxckUsZUFBaUIsSUFBSyxZQUUzQixJQUFwQm1CLFNBQVMvdkQsRUFBSSxJQUdwQnhnQixLQUFLcTFDLE1BQVEsS0FBT3IxQyxLQUFLcTFDLEtBQU8sTUFDN0IxbEMsUUFBUTRnRSxTQUFTL3ZELEdBQUksTUFDckJ3YSxPQUNIaDdCLEtBQUs2eEUsY0FBY3RCLFNBQVMvdkQsRUFBSSxJQUNoQ0EsS0FJTSxPQUZOK3ZELFNBQVMvdkQsR0FBRzNhLE1BQ1Y3RixLQUFLa3hFLFNBQVMsSUFBTWx4RSxLQUFLK0QsS0FBS3VyRSxjQUFnQixJQUFLLFlBRTFCLElBQXBCaUIsU0FBUy92RCxFQUFJLElBR3BCeGdCLEtBQUtxMUMsTUFBUSxLQUFPcjFDLEtBQUtxMUMsS0FBTyxNQUM3QjFsQyxRQUFRNGdFLFNBQVMvdkQsR0FBSSxNQUNyQndhLE9BQ0hoN0IsS0FBS3V5RSxjQUFjaEMsU0FBUy92RCxFQUFJLElBQ2hDQSxLQUlNLE9BRk4rdkQsU0FBUy92RCxHQUFHM2EsTUFDVjdGLEtBQUtreEUsU0FBUyxJQUFNbHhFLEtBQUsrRCxLQUFLd3JFLGlCQUFtQixJQUFLLFlBRTdCLElBQXBCZ0IsU0FBUy92RCxFQUFJLElBR3BCeGdCLEtBQUtxMUMsTUFBUSxLQUFPcjFDLEtBQUtxMUMsS0FBTyxNQUM3QjFsQyxRQUFRNGdFLFNBQVMvdkQsR0FBSSxNQUNyQndhLE9BQ0hoN0IsS0FBS3V5RSxjQUFjaEMsU0FBUy92RCxFQUFJLEdBQUksYUFDcENBLEtBSU0sT0FGTit2RCxTQUFTL3ZELEdBQUczYSxNQUNWN0YsS0FBS2t4RSxTQUFTLElBQU1seEUsS0FBSytELEtBQUt5ckUsY0FBZ0IsSUFBSyxZQUUxQixJQUFwQmUsU0FBUy92RCxFQUFJLEtBR3BCeGdCLEtBQUtxMUMsTUFBUSxLQUFPcjFDLEtBQUtxMUMsS0FBTyxNQUM3QjFsQyxRQUFRNGdFLFNBQVMvdkQsR0FBSSxNQUNyQndhLE9BQ0hoN0IsS0FBS3l5RSxjQUFjbEMsU0FBUy92RCxFQUFJLElBQ2hDQSxLQU1OLE9BREF4Z0IsS0FBSzBLLE9BQU9zb0UsUUFBVWh6RSxLQUFLdXhFLE9BQU92eEUsS0FBS3ExQyxNQUNoQ3IxQyxLQUFLMEssTUFDZCxDQUVBLGlCQUFBdW9FLENBQW1CcDNFLElBQUtxM0UsWUFBYWo5RCxNQUFPc2MsWUFDMUMsTUFBTXI4QixNQUFRa00sS0FBS2EsSUFBSSxFQUFHL0csT0FBT2czRSxjQVVqQyxPQVRJaDlFLFFBQVVnRyxPQUFPK1osU0FDbkJzYyxXQUFXLGtCQUFrQjEyQixhQUFjLEVBQzNDMDJCLFdBQVcsa0JBQWtCMTJCLGFBQWUzRixNQUNoQyxVQUFSMkYsSUFDRjAyQixXQUFXLGtCQUFrQjEyQixlQUFpQjNGLE1BRTlDcThCLFdBQVcsa0JBQWtCMTJCLFdBQWEzRixPQUd2Q3E4QixVQUNULENBUUEsa0JBQU00Z0QsQ0FBY0MsY0FBZXJqQixZQUNqQyxNQUFNOEIsK0JBQ0VqcUQsY0FBYytwRCwwQ0FDSCxRQUFmNUIsYUFDRkEsV0FBYSxZQUVmLE1BQU02WixVQUFZLENBQ2hCeHpFLEtBQU1nOUUsY0FBY2g5RSxLQUNwQmlJLEtBQU0weEQsV0FDTkMsT0FBUTZCLHlCQUF5QjNqRCxHQUNqQ25TLE9BQVFxM0UsY0FBY241RSxPQUVsQm81RSxVQUFZOWdDLE1BQU03aEMsT0FBT2s1RCxpQkFDekJ5SixJQUFJajJFLHdCQUF3QixPQUFRZzJFLGNBQWNqbEUsTUFBTyxDQUM3RHNuQyxhQUFhLElBRWYsTUFBTWxqQixXQUFhLENBQUMsRUFDcEIsSUFBSXI4QixNQUFRLE9BQ3lDLElBQTFDazlFLGNBQWNuNUUsTUFBTStCLFFBQVFtM0MsSUFBSWo5QyxPQUN6QzhKLEtBQUtpekUsa0JBQ0gsS0FDQUcsY0FBY241RSxNQUFNK0IsUUFBUW0zQyxHQUFHajlDLE1BQy9CbTlFLElBQUl4L0IsTUFDSnRoQixpQkFHaUQsSUFBMUM2Z0QsY0FBY241RSxNQUFNK0IsUUFBUXUzQyxJQUFJcjlDLE9BQ3pDOEosS0FBS2l6RSxrQkFDSCxLQUNBRyxjQUFjbjVFLE1BQU0rQixRQUFRdTNDLEdBQUdyOUMsTUFDL0JtOUUsSUFBSXYvQixNQUNKdmhCLGlCQUdrRCxJQUEzQzZnRCxjQUFjbjVFLE1BQU0rQixRQUFRc3dDLEtBQUtwMkMsT0FDMUM4SixLQUFLaXpFLGtCQUNILE1BQ0FHLGNBQWNuNUUsTUFBTStCLFFBQVFzd0MsSUFBSXAyQyxNQUNoQ205RSxJQUFJL21DLElBQ0ovWixpQkFHb0QsSUFBN0M2Z0QsY0FBY241RSxNQUFNK0IsUUFBUWt3QyxPQUFPaDJDLE9BQzVDOEosS0FBS2l6RSxrQkFDSCxRQUNBRyxjQUFjbjVFLE1BQU0rQixRQUFRa3dDLE1BQU1oMkMsTUFDbENtOUUsSUFBSW5uQyxNQUNKM1osaUJBR2lELElBQTFDNmdELGNBQWNuNUUsTUFBTStCLFFBQVFHLElBQUlqRyxRQUN6Q0EsTUFBUWtHLE9BQU9nM0UsY0FBY241RSxNQUFNK0IsUUFBUUcsR0FBR2pHLE9BQU95WixRQUFRLFNBQVUsSUFDbkV6WixRQUFVa0csT0FBT2kzRSxJQUFJbDNFLE1BQ3ZCbzJCLFdBQVcsMkJBQTRCLEVBQ3ZDQSxXQUFXLDJCQUE2QnI4QixRQUd4QzBKLE9BQU9tRSxLQUFLd3VCLFlBQVkzeEIsT0FBUyxJQUMvQmdDLE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVFvM0MsTUFBTSxjQUFlaHdCLGtCQUV6QjhnRCxJQUFJbjFFLE9BQU9xMEIsYUFFbkIsTUFBTStnRCxlQUFpQixHQUN2QixJQUFJQyxnQkFBa0IsS0FDdEIsSUFBSyxNQUFNQyxRQUFReHpFLEtBQUt5ekUsYUFBYyxFQUNwQixJQUFaRCxLQUFLLEtBQ1BELGdCQUFrQkYsSUFBSWxsRSxNQUFNOVgsUUFDMUJtcUIsR0FBS0EsRUFBRXBxQixPQUFTbzlFLEtBQUssR0FBR3A5RSxNQUNYLFVBQVhvcUIsRUFBRW5pQixNQUNGbkMsT0FBT3NrQixFQUFFemtCLE9BQU83RixTQUFXZ0csT0FBT3MzRSxLQUFLLEdBQUd6M0UsT0FBTzdGLFVBR3ZELE1BQU00dUIsT0FBU3V1RCxJQUFJbGxFLE1BQU05WCxRQUN2Qm1xQixHQUFLQSxFQUFFcHFCLE9BQVNvOUUsS0FBSyxHQUFHcDlFLE1BQ1gsV0FBWG9xQixFQUFFbmlCLE1BQ0ZtaUIsRUFBRXprQixPQUFPK04sTUFBTUwsT0FBTzBOLFNBQVdxOEQsS0FBSyxHQUFHejNFLE9BQU8rTixNQUFNTCxPQUFPME4sU0FFN0RvOEQsZ0JBQWdCLElBQU16dUQsT0FBTyxJQUMvQnd1RCxlQUFlcDhFLEtBQUssQ0FDbEJtN0MsSUFBS3Z0QixPQUFPLEdBQUc1VyxHQUNmLHVCQUF3QnFsRSxnQkFBZ0IsR0FBR3JsRSxHQUMzQyx5QkFBMEJxbEUsZ0JBQWdCLEdBQUduOUUsTUFHbkQsQ0FPQSxPQU5JazlFLGVBQWUxeUUsT0FBUyxJQUN0QmdDLE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVFvM0MsTUFBTSxrQkFBbUIrd0Isc0JBRTdCRCxJQUFJOTZCLHdCQUF3QixPQUFRKzZCLGlCQUVyQ0QsR0FDVCxDQU9BLFNBQUF6SixDQUFXOEosSUFDVCxNQUFNMzNFLE9BQVMsQ0FDYjZuQixnQkFBaUIsQ0FBQyxFQUNsQjVuQixRQUFTLENBQUMsRUFDVnlpQyxNQUFPLENBQUMsRUFDUnpuQyxRQUFTLENBQUMsRUFDVnNXLFlBQWEsQ0FDWGkwRCxPQUFRLElBRVZyaUUsTUFBTyxDQUNMaUssUUFBUSxFQUNSNDNELGdCQUFnQixJQUdwQixJQUFLLE1BQU1sbEUsTUFBTyxDQUNoQixNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLFlBRXVCLElBQVo2M0UsR0FBRzczRSxPQUNaRSxPQUFPNm5CLGdCQUFnQi9uQixLQUFPLENBQzVCM0YsTUFBT2dHLE9BQU93M0UsR0FBRzczRSxRQUl2QixJQUFLLE1BQU1BLE1BQU8sQ0FBQyxNQUFPLE1BQU8sUUFBUyxRQUFTLE1BQU8sS0FBTSxXQUN2QyxJQUFaNjNFLEdBQUc3M0UsT0FDWkUsT0FBT0MsUUFBUUgsS0FBTyxDQUNwQjNGLE1BQU9nRyxPQUFPdzNFLEdBQUc3M0UsYUFJRixJQUFWNjNFLEdBQUd2M0UsS0FDWkosT0FBT0MsUUFBUUcsR0FBSyxDQUNsQmpHLE1BQU93OUUsR0FBR3YzRSxLQUdkLElBQUssTUFBTU4sTUFBTyxDQUFDLE1BQU8sbUJBQ0QsSUFBWjYzRSxHQUFHNzNFLE9BQ1pFLE9BQU8waUMsTUFBTTVpQyxLQUFPNjNFLEdBQUc3M0UsTUFHM0IsUUFBMEIsSUFBZjYzRSxHQUFHbHFELFFBQXlCLENBQ3JDLE1BQU9qSyxPQUFRZ0IsUUFBVW16RCxHQUFHbHFELFFBQVE5YyxNQUFNLFFBQzFDM1EsT0FBTy9FLFFBQVF3eUIsUUFBVSxDQUN2QitVLFlBQWFoZixPQUNiaWYsYUFBY2plLE9BRWxCLENBUUEsWUFQa0MsSUFBdkJtekQsR0FBR2hGLGtCQUNaM3lFLE9BQU8vRSxRQUFRMDNFLGdCQUFrQnh5RSxPQUFPdzNFLEdBQUdoRixrQkFFN0MzeUUsT0FBT3VSLFlBQVlpMEQsT0FBU21TLEdBQUdWLFFBQzNCcHdFLE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVFvM0MsTUFBTSxhQUFjeG1ELFFBRXZCQSxNQUNULENBT0EsZUFBTTQzRSxDQUFXRCxJQUNmLE1BQU12bEUsTUFBUSxHQUdkLEdBRkFuTyxLQUFLeXpFLGFBQWUsUUFFTSxJQUFmQyxHQUFHcEIsUUFDWixJQUFLLE1BQU12OEIsVUFBVTI5QixHQUFHcEIsUUFBUyxDQUMvQixJQUFJcnFFLE9BQVEsR0FDcUIsSUFBN0I4dEMsT0FBT2g2QyxRQUFRa00sT0FBT2lHLEtBQ3hCakcsWUFBY2pJLEtBQUs0ekUsWUFBWTc5QixRQUMvQjVuQyxNQUFNalgsS0FBSytRLFFBRWI4dEMsT0FBT2g2QyxPQUFPa00sTUFBTWlHLEdBQUssS0FDekJDLE1BQU1qWCxLQUFLNitDLFFBQ1gvMUMsS0FBS3l6RSxhQUFhdjhFLEtBQUssQ0FBQzBILFFBQVFDLE1BQU13TyxVQUFVcEYsT0FBUTh0QyxRQUMxRCxDQUdGLFFBQXlCLElBQWQyOUIsR0FBRzd2RCxPQUNaLElBQUssTUFBTTViLFNBQVN5ckUsR0FBRzd2RCxPQUFRLENBQzdCLE1BQU0yMEIsZUFBaUI1d0MsY0FBY29xRCxVQUFVLFFBQVMvcEQsTUFBTTdSLEtBQU0sQ0FDbEVzdEQsT0FBUTFqRCxLQUFLK3dFLGdCQUVmLFFBQXdCLElBQWJ2NEIsU0FBMEIsQ0FDbkMsTUFBTXE3QixPQUFTcjdCLFNBQVNyRCxXQUN4QjArQixPQUFPOTNFLE9BQU8wTyxLQUFPeEMsTUFBTS9SLFdBQ0QsSUFBZitSLE1BQU0vUSxPQUNmMjhFLE9BQU85M0UsT0FBTzhLLFdBQVczUCxLQUFPK1EsTUFBTS9RLE1BRXhDaVgsTUFBTWpYLEtBQUswSCxRQUFRQyxNQUFNd08sVUFBVXdtRSxRQUNyQyxLQUFPLENBQ0wsTUFBTXYwRSxRQUFVLENBQUMsT0FDUyxJQUFmMkksTUFBTS9RLE9BQ2ZvSSxRQUFRcEksS0FBTytRLE1BQU0vUSxNQUV2QmlYLE1BQU1qWCxLQUFLZzVCLFNBQVNvbEIsV0FBV3J0QyxNQUFNN1IsS0FBTTZSLE1BQU0vUixNQUFPb0osU0FDMUQsQ0FDRixDQUdGLFFBQTRCLElBQWpCbzBFLEdBQUdJLFVBQ1osSUFBSyxNQUFNN3JFLFNBQVN5ckUsR0FBR0ksVUFBVyxDQUNoQyxNQUFNdDdCLGVBQWlCNXdDLGNBQWNvcUQsVUFBVSxRQUFTL3BELE1BQU03UixLQUFNLENBQ2xFc3RELE9BQVExakQsS0FBSyt3RSxnQkFFZixRQUF3QixJQUFidjRCLFNBQTBCLENBQ25DLE1BQU1xN0IsT0FBU3I3QixTQUFTckQsV0FDeEIwK0IsT0FBTzkzRSxPQUFPME8sS0FBT3hDLE1BQU0vUixNQUMzQmlZLE1BQU1qWCxLQUFLMEgsUUFBUUMsTUFBTXdPLFVBQVV3bUUsUUFDckMsTUFDRTFsRSxNQUFNalgsS0FDSmc1QixTQUFTb2xCLFdBQVdydEMsTUFBTTdSLEtBQU02UixNQUFNL1IsTUFBTyxDQUMzQ3dQLElBQUtQLFNBQVNnQixhQUNkYyxlQUFnQjNKLEtBQUtDLEtBQUtDLFNBQVMscUNBSTNDLENBR0YsUUFBeUIsSUFBZGsyRSxHQUFHbkcsT0FDWixJQUFLLE1BQU1uM0UsUUFBUXM5RSxHQUFHbkcsT0FBUSxDQUM1QixNQUFNLzBCLGVBQWlCNXdDLGNBQWNvcUQsVUFBVSxRQUFTNTdELEtBQU0sQ0FDNURzdEQsT0FBUTFqRCxLQUFLK3dFLGdCQUVmLFFBQXdCLElBQWJ2NEIsU0FBMEIsQ0FDbkMsTUFBTXE3QixPQUFTcjdCLFNBQVNyRCxXQUN4QmhuQyxNQUFNalgsS0FBSzBILFFBQVFDLE1BQU13TyxVQUFVd21FLFFBQ3JDLE1BQ0UxbEUsTUFBTWpYLEtBQUtnNUIsU0FBU3dtQixXQUFXdGdELE1BRW5DLENBRUYsT0FBTytYLEtBQ1QsQ0FLQSxpQkFBTXlsRSxDQUFhOXVELFFBQ2pCLElBQUk3YyxNQUFRLEtBQ1osTUFBTThyRSxpQkFBbUJ6MkUsS0FBS0MsS0FBS0MsU0FBUyxrQ0FzRDVDLEdBckRJd0MsS0FBS2t4RSxTQUFTbHhFLEtBQUsrRCxLQUFLMHJFLFNBQVMxdUIsS0FBS2o4QixPQUFPMXVCLE9BQy9DNlIsWUFBY0wsY0FBY29xRCxVQUFVLFFBQVMraEIsaUJBQW1CLEtBQU96MkUsS0FBS0MsS0FBS0MsU0FBUyx5QkFBMkIsSUFBSyxDQUMxSHJHLFFBQVEsRUFDUnVzRCxPQUFRMWpELEtBQUsrd0UsZ0JBRVhudUUsT0FBTzIvQyxNQUFNd3ZCLGNBQ2Y1bUUsUUFBUW8zQyxNQUFNLEdBQUd6OUIsT0FBTzF1Qiw0QkFBNkI2UixRQUU5Q2pJLEtBQUtreEUsU0FBU2x4RSxLQUFLK0QsS0FBSzJyRSxPQUFPM3VCLEtBQUtqOEIsT0FBTzF1QixPQUNwRDZSLFlBQWNMLGNBQWNvcUQsVUFBVSxRQUFTK2hCLGlCQUFtQixLQUFPejJFLEtBQUtDLEtBQUtDLFNBQVMsOEJBQWdDLElBQUssQ0FDL0hyRyxRQUFRLEVBQ1J1c0QsT0FBUTFqRCxLQUFLK3dFLGdCQUVWOW9FLFFBQ0hBLFlBQWNMLGNBQWNvcUQsVUFBVSxRQUFTK2hCLGlCQUFtQixLQUFPejJFLEtBQUtDLEtBQUtDLFNBQVMsdUJBQXlCLElBQUssQ0FDeEhyRyxRQUFRLEVBQ1J1c0QsT0FBUTFqRCxLQUFLK3dFLGdCQUVWOW9FLFFBQ0hBLFlBQWNMLGNBQWNvcUQsVUFBVSxRQUFTK2hCLGlCQUFtQixLQUFPejJFLEtBQUtDLEtBQUtDLFNBQVMseUJBQTJCLElBQUssQ0FDMUhyRyxRQUFRLEVBQ1J1c0QsT0FBUTFqRCxLQUFLK3dFLGtCQUlmbnVFLE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVFvM0MsTUFBTSxHQUFHejlCLE9BQU8xdUIsMEJBQTBCNlIsVUFFM0NqSSxLQUFLa3hFLFNBQVNseEUsS0FBSytELEtBQUs0ckUsS0FBSzV1QixLQUFLajhCLE9BQU8xdUIsT0FDbEQ2UixZQUFjTCxjQUFjb3FELFVBQVUsUUFBUytoQixpQkFBbUIsS0FBT3oyRSxLQUFLQyxLQUFLQyxTQUFTLHFCQUF1QixJQUFLLENBQ3RIckcsUUFBUSxFQUNSdXNELE9BQVExakQsS0FBSyt3RSxnQkFFWG51RSxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sR0FBR3o5QixPQUFPMXVCLG1DQUFtQzZSLFVBRXBEakksS0FBS2t4RSxTQUFTbHhFLEtBQUsrRCxLQUFLNnJFLFlBQVk3dUIsS0FBS2o4QixPQUFPMXVCLE9BQ3pENlIsWUFBY0wsY0FBY29xRCxVQUFVLFFBQVMraEIsaUJBQW1CLEtBQU96MkUsS0FBS0MsS0FBS0MsU0FBUyw0QkFBOEIsSUFBSyxDQUM3SHJHLFFBQVEsRUFDUnVzRCxPQUFRMWpELEtBQUsrd0UsZ0JBRVhudUUsT0FBTzIvQyxNQUFNd3ZCLGNBQ2Y1bUUsUUFBUW8zQyxNQUFNLEdBQUd6OUIsT0FBTzF1QixnQ0FBZ0M2UixVQUVqRGpJLEtBQUtreEUsU0FBU2x4RSxLQUFLK0QsS0FBSzhyRSxVQUFVOXVCLEtBQUtqOEIsT0FBTzF1QixRQUN2RDZSLFlBQWNMLGNBQWNvcUQsVUFBVSxRQUFTK2hCLGlCQUFtQixLQUFPejJFLEtBQUtDLEtBQUtDLFNBQVMsd0JBQTBCLElBQUssQ0FDekhyRyxRQUFRLEVBQ1J1c0QsT0FBUTFqRCxLQUFLK3dFLGdCQUVYbnVFLE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVFvM0MsTUFBTSxHQUFHejlCLE9BQU8xdUIsMkJBQTJCNlIsVUFHbkRBLFlBQWdELENBTWxELE9BTG1CQSxNQUFNK3JFLE1BQU0sQ0FDN0JqNEUsT0FBUSxDQUNON0YsTUFBTzR1QixPQUFPL29CLFFBQVFrTSxPQUFPaUcsS0FJbkMsQ0FDQSxNQUFNMUgsU0FBV3NlLE9BQU8vb0IsUUFBUThLLFlBQVlqUCxLQUN0Q21QLE1BQVE1QixTQUFTNkIsaUJBQ3JCOGQsT0FBTzF1QixLQUNQa0gsS0FBS0MsS0FBS0MsU0FDUmdKLFNBQ0ksaUNBQ0Esb0NBR0Z5dEUsU0FBVyxDQUNmNTFFLEtBQU0sUUFDTmpJLEtBQU0yUSxNQUFNM1EsS0FDWjJGLE9BQVEsQ0FDTitLLFVBQVdDLE1BQU1ELFVBQ2pCRyxlQUFnQkYsTUFBTUUsZUFDdEJKLFdBQVksQ0FDVjdQLFNBQVMsRUFDVEksVUFBV29QLFNBQ1huUCxRQUFTbVAsU0FDVHJQLFFBQVEsR0FFVnNULEtBQU1xYSxPQUFPL29CLFFBQVFrTSxPQUFPaUcsR0FDNUJoWSxNQUFPNHVCLE9BQU8vb0IsUUFBUWtNLE9BQU9pRyxLQVNqQyxPQU5JdEwsT0FBTzIvQyxNQUFNd3ZCLGNBQ2Y1bUUsUUFBUW8zQyxNQUNOLDhCQUE4Qno5QixPQUFPMXVCLDJCQUNyQzY5RSxVQUdHQSxRQUNULENBTUEsZUFBQUMsQ0FBaUJiLEtBQ2YsSUFBSWMsdUJBQXdCLEVBQzVCLElBQUssTUFBTXQ0RSxNQUFPLENBQ2hCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsWUFFd0IsSUFBYnczRSxJQUFJeDNFLE1BQXdCdzNFLElBQUl4M0UsS0FBTyxLQUNoRHM0RSx1QkFBd0IsR0FNNUIsT0FISXZ4RSxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sbUJBQW9CNHhCLHVCQUU3QkEscUJBQ1QsQ0FRQSxpQkFBTUMsQ0FBYUMsUUFDYnp4RSxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sZUFBZ0I4eEIsUUFFaEMsTUFBTXJoQixLQUFPd2Qsd0JBQXdCQyxjQUFjNEQsT0FBT3JoQixNQUMxRGh6RCxLQUFLK0QsS0FBT3lzRSx3QkFBd0JJLFFBQVE1ZCxNQUM1Q2h6RCxLQUFLc3hFLE1BQVFkLHdCQUF3Qkssc0JBQXNCN2QsTUFDM0RoekQsS0FBSyt3RSxjQUFnQnNELE9BQU8zd0IsT0FDeEI5Z0QsT0FBTzIvQyxNQUFNd3ZCLGNBQ2Y1bUUsUUFBUW8zQyxNQUFNLHVCQUF3QnlRLEtBQU1oekQsS0FBSytELEtBQU0vRCxLQUFLc3hFLE9BRTlELElBQUl0MUQsZ0JBQWtCaGMsS0FBSzR5RSxlQUFleUIsT0FBT2gvQixNQUM3Q3p5QyxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sa0JBQW1Cdm1DLFlBR1AsY0FBekJxNEQsT0FBT0MsZUFDTnQwRSxLQUFLazBFLGdCQUFnQmw0RCxZQUNFLGdCQUF6QnE0RCxPQUFPQyxpQkFFUHQ0RCxnQkFBa0JoYyxLQUFLdTBFLFVBQVV2NEQsWUFFbkMsTUFBTW8zRCxjQUFnQixDQUNwQmg5RSxLQUFNNGxCLFVBQVU1bEIsS0FDaEI2RCxNQUFPK0YsS0FBSzRwRSxVQUFVNXRELFdBQ3RCN04sWUFBYW5PLEtBQUsyekUsVUFBVTMzRCxZQUc5QixRQUErQixJQUFwQnE0RCxPQUFPRyxXQUFnRCxJQUFwQkgsT0FBT0csU0FDbkQsT0FBT3BCLGNBR1QsYUFEa0JwekUsS0FBS216RSxhQUFhQyxjQUFlaUIsT0FBT24wQixPQUU1RCxDQU9BLGVBQU1xMEIsQ0FBV0UsVUFDWDd4RSxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0saUJBQWtCa3lCLFVBRWxDLElBQUssTUFBTTU0RSxNQUFPLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sWUFDOUIsSUFBbEI0NEUsU0FBUzU0RSxPQUNsQjQ0RSxTQUFTNTRFLE1BQVEsR0F1QnJCLFlBcEI0QixJQUFqQjQ0RSxTQUFTNTlFLE1BQ2Q0OUUsU0FBUzU5RSxLQUFPLEdBQ2xCNDlFLFNBQVM1OUUsS0FBTyxFQUNQNDlFLFNBQVM1OUUsS0FBTyxHQUN6QjQ5RSxTQUFTNTlFLElBQU00OUUsU0FBUzU5RSxJQUFNLEdBQUssR0FHbkM0OUUsU0FBUzU5RSxJQUFNLFNBR1EsSUFBaEI0OUUsU0FBU3Q0RSxLQUNFLFNBQWhCczRFLFNBQVN0NEUsR0FDWHM0RSxTQUFTdDRFLElBQU0sRUFDVSxTQUFoQnM0RSxTQUFTdDRFLEtBQ2xCczRFLFNBQVN0NEUsSUFBTSxJQUdmeUcsT0FBTzIvQyxNQUFNd3ZCLGNBQ2Y1bUUsUUFBUW8zQyxNQUFNLGNBQWVreUIsVUFFeEJBLFFBQ1QsRUNua0NLLE1BQU1DLDRCQUE0QkMsV0FDdkMsU0FBSWptRSxHQUNGLE9BQU9wUixLQUFLQyxLQUFLQyxTQUFTLHFCQUM1QixDQUVBLFNBQUEwMEIsQ0FBVzMxQixPQUNUQSxNQUFNRSxpQkFDTixNQUFNczBELEtBQU94MEQsTUFBTTBvQixPQUFPQSxPQUFPL3VCLE1BQzNCMCtFLGFBQWU1MEUsS0FBSzQwRSxhQUNwQkMsT0FBU3Q0RSxNQUFNMG9CLE9BQU80dkQsT0FBU3Q0RSxNQUFNMG9CLE9BQU80dkQsT0FBTzMrRSxNQUFRLEtBQ2pFOEosS0FBS29qRCxNQUFNbHRELE1BQVF3K0Usb0JBQW9CemdFLE9BQU8sQ0FDNUMyZ0UsYUFDQUMsT0FDQTlqQixPQUVGL3dELEtBQUttYixPQUNQLENBRUEsdUJBQU8yNUQsQ0FBa0JsekMsS0FDdkIsT0FBZSxPQUFSQSxJQUFlLEdBQUt4bEMsT0FBT3dsQyxJQUNwQyxDQUVBLGFBQU8zdEIsQ0FBUS9kLE9BQ2IsT0FBd0IsT0FBakJBLE1BQU0yK0UsT0FDVCxJQUFJMytFLE1BQU0wK0UsZ0JBQWdCMStFLE1BQU0yK0UsV0FBVzMrRSxNQUFNNjZELE9BQ2pELElBQUk3NkQsTUFBTTArRSxpQkFBaUIxK0UsTUFBTTY2RCxNQUN2QyxDQUVBLFlBQU92a0MsQ0FBT3VvRCxLQUNaLE1BQU16K0UsSUFBTXkrRSxLQUFPLEdBQ2JybUQsUUFBVXA0QixJQUFJdVAsTUFBTSxrQ0FFMUIsT0FBSTZvQixRQUNLLENBQ0xrbUQsYUFBY2xtRCxRQUFRLEdBQ3RCbW1ELE9BQVFubUQsUUFBUSxJQUFNLEdBQ3RCd2tCLFFBQVN4a0IsUUFBUSxJQUdkLENBQ0xrbUQsYUFBYyxPQUNkQyxPQUFRLEtBQ1IzaEMsUUFBUzU4QyxJQUViLENBRUEsa0JBQU8wK0UsQ0FBYS82RCxNQUNsQjZSLEVBQUU3UixNQUNDdmEsS0FBSyx3Q0FDTHkyRCxNQUFLLENBQUMzMUMsRUFBRzIzQixNQUNSLE1BQU01VyxNQUFRelYsRUFBRXFzQixJQUVoQixHQURBNVcsTUFBTTd2QixLQUFLLFlBQVksSUFDbEI2dkIsTUFBTTIrQixPQUFPdC9ELE9BQVEsQ0FDeEIsTUFBTXEwRSxPQUFTLElBQUlQLG9CQUFvQixDQUNyQ3R4QixNQUFPN2hCLE1BQU0sTUFDVm16QyxvQkFBb0Jsb0QsTUFBTStVLE1BQU1LLFNBRS9Cc3pDLGFBQWVwcEQsRUFDbkIsb0RBQ0V4dUIsS0FBS0MsS0FBS0MsU0FBUyxzQkFDbkIsdURBRUprM0Usb0JBQW9CUyx5QkFDcEJELGFBQWFoN0QsR0FBRyxTQUFTLEtBQ3ZCKzZELE9BQU9qM0UsUUFBTyxFQUFJLElBRXBCdWpDLE1BQU14M0IsU0FBUzZuQyxPQUFPc2pDLGFBQ3hCLElBRU4sQ0FFQSxpQkFBQWw3RCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUV4QjZSLEVBQUU3UixNQUFNdmEsS0FBSyxpQkFBaUJzakIsU0FDOUI4SSxFQUFFN1IsTUFBTXZhLEtBQUssY0FBY3NqQixTQUMzQjhJLEVBQUU3UixNQUFNdmEsS0FBSyxpQkFBaUIyMUMsS0FBSy8zQyxLQUFLQyxLQUFLQyxTQUFTLHNCQUN4RCxDQUVBLG1DQUFhMjNFLEdBQ1gsTUFBTXpxRSxPQUFTZ3FFLG9CQUFvQmxvRCxNQUNqQ2x2QixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx5QkFFNUIsSUFNRSxhQUxNdzNFLG9CQUFvQlUsZ0JBQ3hCMXFFLE9BQU9rcUUsYUFDUGxxRSxPQUFPd29DLFFBQ1AsQ0FBRTJoQyxPQUFRbnFFLE9BQU9tcUUsVUFFWixDQUNULENBQUUsTUFBT3IwRSxHQUNQLElBQUtBLEVBQUVzUCxRQUFRbkYsV0FBVyxVQUl4QixPQUhBNUIsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBS0MsU0FBUyxtQ0FFZCxDQUVYLENBQ0YsQ0FFQSxxQ0FBYTYzRSxDQUEwQkMsS0FBTUMsVUFDM0MsTUFBTTdxRSxPQUFTZ3FFLG9CQUFvQmxvRCxNQUNqQ2x2QixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx5QkFVNUIsYUFSdUJ5M0UsV0FBV2EsT0FDaEM5cUUsT0FBT2txRSxhQUNQbHFFLE9BQU93b0MsUUFDUCxJQUFJdWlDLEtBQUssQ0FBQ0gsTUFBT0MsU0FBVSxDQUN6QmwzRSxLQUFNLGNBRVIsQ0FBRXcyRSxPQUFRbnFFLE9BQU9tcUUsVUFFTDlqQixLQUlQcm1ELE9BQU93b0MsUUFBVSxJQUFNcWlDLFVBSDVCeHNFLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUtDLFNBQVMsMEJBQ25DLEVBR1gsRUM5R0ssTUFBTWs0RSw0QkFNWCxtQkFBT0MsQ0FBY0MsZUFDbkIsTUFBTXJGLFNBQVcsQ0FDZixDQUFDLGNBQWUsZUFDaEIsQ0FBQyxTQUFVLFVBQ1gsQ0FBQyxXQUFZLFlBQ2IsQ0FBQyxXQUFZLFdBQVksWUFDekIsQ0FBQyxTQUFVLFVBQ1gsQ0FBQyxVQUFXLFdBQ1osQ0FBQyxZQUFhLGFBQ2QsQ0FBQyxRQUFTLFNBQ1YsQ0FBQyxjQUFlLGVBQ2hCLENBQUMsYUFBYyxlQUVYLzJCLFVBQVksQ0FDaEJxOEIsTUFBTyxHQUNQdEYsU0FBVSxJQUVaLElBQUssTUFBTXRaLFdBQVdzWixTQUNjLE9BQTlCcUYsY0FBYzNlLFFBQVEsV0FDRSxJQUFmQSxRQUFRLElBQXFDLEtBQWZBLFFBQVEsS0FDL0NBLFFBQVEsR0FBS0EsUUFBUSxJQUV2QnpkLFVBQVVxOEIsTUFBTTMrRSxLQUNkLE9BQU8rL0QsUUFBUSx3QkFBd0JBLFFBQVEsU0FDN0MyZSxjQUFjM2UsUUFBUSxlQUcxQnpkLFVBQVUrMkIsU0FBU3I1RSxLQUFLLENBQ3RCd1gsTUFBT3VvRCxRQUFRLEdBQ2YvZ0UsTUFBTzAvRSxjQUFjM2UsUUFBUSxPQU1uQyxPQUZBemQsVUFBVXE4QixNQUNSLHVCQUF5QnI4QixVQUFVcThCLE1BQU14eEUsS0FBSyxLQUFNbTFDLFVBQVVxOEIsT0FDekRyOEIsU0FDVCxDQU9BLDJDQUFhczhCLENBQWdDQyxlQUFnQnoyRSxTQUN2RHNELE9BQU8yL0MsTUFBTXd2QixjQUNmNW1FLFFBQVEyK0IsSUFBSSxVQUFXaXNDLGdCQUV6QkEsZUFBaUJBLGVBQWVDLGFBQ2hDLE1BQU1DLFlBQWNQLDRCQUE0QkMsYUFDOUNJLGVBQWVHLFdBQWEsQ0FBQyxHQTZEL0IsTUEzRGMsQ0FDWjkvRSxLQUFNMi9FLGVBQWVJLGdCQUFnQkMsS0FDckNuOEUsTUFBTyxDQUNMMnBCLGdCQUFpQixDQUNmdHRCLElBQUssQ0FBRUosTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCQyxJQUFLLEtBQzNELy9FLElBQUssQ0FBRUwsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCRSxJQUFLLEtBQzNELy9FLElBQUssQ0FBRU4sTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCRyxJQUFLLEtBQzNELy9FLElBQUssQ0FBRVAsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCSSxJQUFLLEtBQzNELy9FLElBQUssQ0FBRVIsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCSyxJQUFLLEtBQzNELy9FLElBQUssQ0FBRVQsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCTSxJQUFLLEtBQzNELy9FLElBQUssQ0FBRVYsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCTyxJQUFLLEtBQzNELy9FLElBQUssQ0FBRVgsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCUSxJQUFLLE1BRTdENzZFLFFBQVMsQ0FDUHF1QixJQUFLLENBQ0huMEIsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCUyxPQUFRLElBQ3ZEN3pFLElBQUtnQixTQUFTOHhFLGVBQWVNLGdCQUFnQlUsVUFBVyxJQUN4RGxrQyxXQUFZendDLEtBQUswSSxNQUFNaXJFLGVBQWVNLGdCQUFnQlMsT0FBUyxJQUVqRTNqQyxHQUFJLENBQ0ZqOUMsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCVyxPQUFRLElBQ3ZEL3pFLElBQUtnQixTQUFTOHhFLGVBQWVNLGdCQUFnQlksVUFBVyxLQUUxRDFqQyxHQUFJLENBQ0ZyOUMsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCYSxTQUFVLElBQ3pEajBFLElBQUtnQixTQUFTOHhFLGVBQWVNLGdCQUFnQmMsWUFBYSxLQUU1RHA3QixJQUFLLENBQ0g3bEQsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCZSxLQUFNLEtBRXZEOXFDLElBQUssQ0FDSHAyQyxNQUFPK04sU0FBUzh4RSxlQUFlTSxnQkFBZ0JnQixLQUFNLElBQ3JEcDBFLElBQUtnQixTQUFTOHhFLGVBQWVNLGdCQUFnQmdCLEtBQU0sS0FFckRsN0UsR0FBSSxDQUFFakcsTUFBTzYvRSxlQUFlTSxnQkFBZ0JpQixhQUM1Q3ByQyxNQUFPLENBQUVoMkMsTUFBTytOLFNBQVM4eEUsZUFBZU0sZ0JBQWdCa0IsTUFBTyxNQUVqRTk0QyxNQUFPLENBQ0xvWCxXQUFZa2dDLGVBQWVJLGdCQUFnQnFCLFdBQzNDMzRCLElBQUtrM0IsZUFBZUksZ0JBQWdCc0IsSUFDcENyZixJQUFLMmQsZUFBZUksZ0JBQWdCdUIsT0FDcENyZixVQUFXMGQsZUFBZUksZ0JBQWdCd0IsVUFDMUNyZixXQUFZeWQsZUFBZUksZ0JBQWdCeUIsWUFFN0NwK0IsVUFBV3k4QixZQUFZSixNQUN2QjcrQixVQUFXaS9CLFlBQVkxRixTQUN2QmpqRSxZQUFhLENBQ1hpMEQsT0FBUWprRSxLQUFLQyxLQUFLQyxTQUFTLHdDQUcvQnFtQixhQUFjNnhELDRCQUE0Qm1DLGNBQ3hDOUIsZUFBZStCLE9BQU9DLE9BQVMsR0FDL0J6NEUsU0FFRjA0RSxpQkFBa0J0Qyw0QkFBNEJ1QyxtQkFDNUNsQyxlQUFlbUMsYUFBYWp5RSxNQUFRLEdBQ3BDM0csU0FJTixDQUVBLG9CQUFPNjRFLENBQWUvaEYsS0FBTTZRLGdCQVkxQixNQVh1QixTQUFuQkEsaUJBQ0ZBLGVBQWlCLE9BRU4scUJBQVQ3USxNQUF3QyxtQkFBVEEsS0FDakNBLEtBQU8sV0FDVywwQkFBVEEsS0FDVEEsS0FBTywwQkFDVyxVQUFUQSxNQUF1QyxLQUFuQjZRLGlCQUM3QjdRLEtBQU8sV0FDUDZRLGVBQWlCLFNBRVosQ0FDTEgsVUFBOEIsS0FBbkJHLGVBQXdCN1EsS0FBTzZRLGVBQzFDQSxlQUFtQyxLQUFuQkEsZUFBd0IsR0FBSzdRLEtBQzdDQSxLQUFNQSxNQUEyQixLQUFuQjZRLGVBQXdCLEdBQUssS0FBT0EsZUFBaUIsS0FFdkUsQ0FFQSwwQkFBYTR3RSxDQUFlTyxpQkFBa0I5NEUsU0FDNUMsTUFBTXVrQixPQUFTLEdBQ2YsSUFBSyxNQUFNNWIsU0FBU213RSxpQkFBa0IsQ0FDcEMsR0FBdUIsU0FBbkJud0UsTUFBTW93RSxTQUNSLFNBRUYsTUFBTXR4RSxNQUFRMnVFLDRCQUE0QnlDLGNBQ3hDbHdFLE1BQU03UixLQUNONlIsTUFBTW93RSxVQUFZLElBRWQ3L0IsZUFBaUI1d0MsY0FBY29xRCxVQUFVLFFBQVNqckQsTUFBTTNRLEtBQU0sQ0FDbEVzdEQsT0FBUXBrRCxRQUFRb2tELE9BQ2hCeU8sYUFBYSxJQUVmLElBQUkwaEIsT0FBUyxVQUNXLElBQWJyN0IsVUFDVHE3QixPQUFTajFFLFFBQVFDLE1BQU13TyxVQUFVbXJDLFNBQVNyRCxZQUMxQzArQixPQUFPejlFLEtBQU8yUSxNQUFNM1EsS0FDcEJ5OUUsT0FBTzkzRSxPQUFPK0ssVUFBWUMsTUFBTUQsVUFDaEMrc0UsT0FBTzkzRSxPQUFPa0wsZUFBaUJGLE1BQU1FLGVBQ2pDNHNFLE9BQU85M0UsT0FBTzhLLFlBQVl0UCxlQUM1QnM4RSxPQUFPOTNFLE9BQU84SyxXQUFXdFAsY0FBZSxHQUV0Q3M4RSxPQUFPOTNFLE9BQU84SyxZQUFZcFAsZUFDNUJvOEUsT0FBTzkzRSxPQUFPOEssV0FBV3BQLGNBQWUsS0FHMUNvOEUsT0FBUzNqRCxTQUFTb2xCLFdBQ2hCdnVDLE1BQU1ELFVBQ043QyxTQUFTZ0UsTUFBTS9SLE9BQVMsRUFBRyxJQUMzQixDQUNFK1EsZUFDMkIsS0FBekJGLE1BQU1FLGdCQUFnQ0YsTUFBTUUsaUJBR2xENHNFLE9BQU85M0UsT0FBTzhLLFdBQWFndEUsT0FBTzkzRSxPQUFPOEssWUFBYyxDQUFDLEVBQzNCLGFBQXpCRSxNQUFNRSxnQkFDUjRzRSxPQUFPOTNFLE9BQU84SyxXQUFXelAsVUFBVyxFQUNwQ3k4RSxPQUFPOTNFLE9BQU84SyxXQUFXMVAsUUFBUyxFQUNsQzA4RSxPQUFPOTNFLE9BQU84SyxXQUFXM1AsTUFBTyxHQUNFLGFBQXpCNlAsTUFBTUUsZ0JBQ2Y0c0UsT0FBTzkzRSxPQUFPOEssV0FBV3hQLFNBQVUsRUFDbkN3OEUsT0FBTzkzRSxPQUFPOEssV0FBVzFQLFFBQVMsRUFDbEMwOEUsT0FBTzkzRSxPQUFPOEssV0FBVzNQLE1BQU8sR0FDSCxVQUFwQjZQLE1BQU1ELFlBQ2Yrc0UsT0FBTzkzRSxPQUFPOEssV0FBVzNQLE1BQU8sSUFHSixRQUE1QjI4RSxPQUFPOTNFLE9BQU8rSyxZQUNoQitzRSxPQUFPejlFLEtBQU95OUUsT0FBT3o5RSxLQUFLdVosUUFBUSxTQUFVLFdBQzVDa2tFLE9BQU85M0UsT0FBTytLLFVBQVksUUFFNUIrc0UsT0FBTzkzRSxPQUFPME8sS0FBT3hHLFNBQVNnRSxNQUFNL1IsT0FBUyxFQUFHLElBQ2hEMjlFLE9BQU85M0UsT0FBTzdGLE1BQVErTixTQUFTZ0UsTUFBTS9SLE9BQVMsRUFBRyxJQUNqRDI5RSxPQUFPOTNFLE9BQU9tRCxNQUFRMjBFLE9BQU85M0UsT0FBT21ELE9BQVMsQ0FBQyxFQUM5QzIwRSxPQUFPOTNFLE9BQU9tRCxNQUFNMjJDLFlBQ0csSUFBckI1dEMsTUFBTTR0QyxZQUE0QyxTQUFyQjV0QyxNQUFNNHRDLFdBQ3JDaHlCLE9BQU8zc0IsS0FBSzI4RSxPQUNkLENBQ0EsT0FBT2h3RCxNQUNULENBRUEsd0JBQU95MEQsQ0FBbUJ4eEUsVUFBV2tWLFdBQ25DLE1BQU02SCxPQUFTN0gsVUFBVXU4RCxzQkFBc0IsUUFDekN2b0QsVUFBWWxwQixVQUFVNkksUUFBUSxhQUFjLE1BT2xELE9BTnVCa1UsT0FBT25rQixNQUFLOGdCLEdBRS9CQSxFQUFFemtCLFFBQVErSyxZQUFja3BCLFdBQ3hCeFAsRUFBRXprQixRQUFRK0ssV0FBV3VCLFFBQVEybkIsWUFBYyxHQUlqRCxDQUVBLCtCQUFhaW9ELENBQW9CTyxzQkFBdUJsNUUsU0FDdEQsTUFBTTZPLE1BQVEsR0FDVDhRLE1BQU13NUQsUUFBUUQsd0JBQW1ELE1BQXpCQSx3QkFDM0NBLHNCQUF3QixDQUFDQSx3QkFFM0IsSUFBSyxNQUFNdnlFLFFBQVF1eUUsc0JBQXVCLENBQ3hDLE1BQU1oZ0MsZUFBaUI1d0MsY0FBY29xRCxVQUFVLE9BQVEvckQsS0FBS3FILFlBQWEsQ0FDdkVvMkMsT0FBUXBrRCxRQUFRb2tELFNBRWxCLElBQUltd0IsT0FBUyxLQUVYQSxZQURzQixJQUFicjdCLFNBQ0E1NUMsUUFBUUMsTUFBTXdPLFVBQVVtckMsU0FBU3JELFlBRWpDLENBQ1AvK0MsS0FBTTZQLEtBQUtxSCxZQUNYalAsS0FBTSxRQUdWOFAsTUFBTWpYLEtBQUsyOEUsT0FDYixDQUNBLE9BQU8xbEUsS0FDVCxDQUVBLDJCQUFhdXFFLENBQWdCQyxrQkFBbUIzOEQsVUFBVzFjLFNBQ3pELE1BQU1paEQsUUFBVSxHQUNYdGhDLE1BQU13NUQsUUFBUUUscUJBQ2pCQSxrQkFBb0IsQ0FBQ0Esb0JBRXZCLElBQUssTUFBTTd6RCxVQUFVNnpELGtCQUFtQixDQUN0QyxNQUFNMXdFLE1BQVF5dEUsNEJBQTRCNEMsa0JBQ3hDeHpELE9BQU84ekQsVUFDUDU4RCxXQUVJN0UsT0FBUzJOLE9BQU8zTixPQUFPeEgsUUFBUSxRQUFTLElBQ3hDdFgsS0FBTzhlLFNBQVcyTixPQUFPM04sT0FDekJxaEMsZUFBaUI1d0MsY0FBY29xRCxVQUFVLFNBQVVsdEMsT0FBTzF1QixLQUFNLENBQ3BFc3RELE9BQVFwa0QsUUFBUW9rRCxTQUVsQixJQUFJbXdCLE9BQVMsVUFDVyxJQUFicjdCLFVBQ1RxN0IsT0FBU2oxRSxRQUFRQyxNQUFNd08sVUFBVW1yQyxTQUFTckQsWUFDMUMwK0IsT0FBTzkzRSxPQUFPa00sTUFBTWdHLEtBQUs3WCxLQUFPNlIsT0FBTzdSLE1BQVEsR0FDL0N5OUUsT0FBTzkzRSxPQUFPa00sTUFBTWdHLEtBQUtDLEdBQUtqRyxPQUFPaUcsSUFBTSxHQUMzQzJsRSxPQUFPOTNFLE9BQU8rTixNQUFRK3BFLE9BQU85M0UsT0FBTytOLE9BQVMsQ0FBQyxFQUM5QytwRSxPQUFPOTNFLE9BQU8rTixNQUFNTCxPQUFTb3FFLE9BQU85M0UsT0FBTytOLE1BQU1MLFFBQVUsQ0FBQyxFQUM1RG9xRSxPQUFPOTNFLE9BQU8rTixNQUFNTCxPQUFPME4sT0FBU0EsT0FDcEMwOEQsT0FBTzkzRSxPQUFPc1AsS0FBT3laLE9BQU96WixLQUM1QndvRSxPQUFPOTNFLE9BQU9xSyxZQUFjMGUsT0FBTyt6RCxLQUNuQ2hGLE9BQU85M0UsT0FBTzhLLFdBQWFndEUsT0FBTzkzRSxPQUFPOEssWUFBYyxDQUFDLEVBQ3hEZ3RFLE9BQU85M0UsT0FBTzhLLFdBQVdsUCxNQUN2QnNRLE9BQU9sTSxPQUFPOEssWUFBWXpQLFdBQVksRUFDeEN5OEUsT0FBTzkzRSxPQUFPOEssV0FBV2pQLEtBQ3ZCcVEsT0FBT2xNLE9BQU84SyxZQUFZeFAsVUFBVyxFQUN2Q3c4RSxPQUFPOTNFLE9BQU84SyxXQUFXeE8sS0FBT0EsTUFFaEN3N0UsT0FBUyxDQUNQejlFLEtBQU0wdUIsT0FBTzF1QixLQUNiaUksS0FBTSxTQUNOdEMsT0FBUSxDQUNOa00sTUFBTyxDQUNMZ0csS0FBTSxDQUNKN1gsS0FBTTZSLE9BQU83UixNQUFRLEdBQ3JCOFgsR0FBSWpHLE9BQU9pRyxJQUFNLEtBR3JCcEUsTUFBTyxDQUNMTCxPQUFRLENBQ04wTixTQUdKOUwsS0FBTXlaLE9BQU96WixLQUNiakYsWUFBYTBlLE9BQU8rekQsS0FDcEJoeUUsV0FBWSxDQUNWbFAsTUFBT3NRLE9BQU9sTSxPQUFPOEssWUFBWXpQLFdBQVksRUFDN0NRLEtBQU1xUSxPQUFPbE0sT0FBTzhLLFlBQVl4UCxVQUFXLEVBQzNDZ0IsUUFLUmtvRCxRQUFRcnBELEtBQUsyOEUsT0FDZixDQUNBLE9BQU90ekIsT0FDVCxDQUVBLHlCQUFhdTRCLENBQWNDLGVBQWdCQyxVQUN6QyxNQUFNQyxxQkFBdUJDLE1BQzNCLHlCQUEyQkgsZ0JBRXZCSSxnQkFBa0JGLGVBQWVHLE9BS3ZDLE9BSmlCMUUsb0JBQW9CVyx5QkFDbkM4RCxVQUNBSCxTQUdKLENBRUEsb0NBQWFLLENBQXlCQyx3QkFBeUJoNkUsU0FDN0QsSUFBS2hDLEtBQUtzRyxNQUFNMjFFLElBQUksZ0JBSWxCLE9BSEF4d0UsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBS0MsU0FBUyxtQ0FFZCxFQUVULE1BQU00MUUsb0JBQ0VzQyw0QkFBNEJJLCtCQUNoQ3dELHdCQUNBaDZFLFNBRUFzRCxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRMitCLElBQUksa0JBQW1Cc3BDLGVBRWpDLE1BQU12aEIsK0JBQ0VqcUQsY0FBYytwRCwwQ0FDdEIsSUFBSytpQixvQkFBb0JTLHlCQUN2QixPQUFPLEVBRVQsTUFBTXZMLFVBQVksQ0FDaEJ4ekUsS0FBTWc5RSxjQUFjaDlFLEtBQ3BCaUksS0FBTSxZQUNOMnhELE9BQVE2Qix5QkFBeUIzakQsR0FDakNuUyxPQUFRcTNFLGNBQWNuNUUsT0FFbEJvNUUsVUFBWTlnQyxNQUFNN2hDLE9BQU9rNUQsV0FFL0IsR0FDRTBQLHdCQUF3QnRELGFBQWFHLGdCQUFnQnFELFVBQVU1NEUsT0FBUyxHQUN4RSxDQUNBLE1BQU1vNEUsU0FBVyxVQUFZM0YsSUFBSW5sRSxHQUFLLE9BQ2hDNE4sZUFBaUI0NUQsNEJBQTRCb0QsYUFDakRRLHdCQUF3QnRELGFBQWFHLGdCQUFnQnFELFNBQ3JEUixXQUVlLElBQWJsOUQsVUFDRnUzRCxJQUFJbjFFLE9BQU8sQ0FDVHdILElBQUtvVyxVQUdYLENBQ0lsWixPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRMitCLElBQUksVUFBV3NwQyxjQUFjamxFLGFBRWpDa2xFLElBQUlqMkUsd0JBQXdCLE9BQVFnMkUsY0FBY3Z2RCxPQUFRLENBQzlENHhCLGFBQWEsVUFFVDQ5QixJQUFJajJFLHdCQUF3QixPQUFRZzJFLGNBQWM0RSxXQUFZLENBQ2xFdmlDLGFBQWEsSUFFZixNQUFNOEssY0FBZ0JtMUIsNEJBQTRCZ0QsZUFDaERZLHdCQUF3QnRELGFBQWF5RCxTQUFTMzBELFFBQVUsR0FDeER1dUQsSUFDQS96RSxTQVNGLE9BUElzRCxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRMitCLElBQUksWUFBYXlXLGVBRXJCOHlCLElBQUlqMkUsd0JBQXdCLE9BQVFtakQsUUFBUyxDQUNqRDlLLGFBQWEsSUFHUjQ5QixHQUNULEVDdFhLLE1BQU1xRyxnQ0FBZ0NsZ0UsZ0JBRTNDLHlCQUFXQyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsU0FBVSxrQkFDNUJqTCxNQUFPcFIsS0FBS0MsS0FBS0MsU0FBUyxzQkFDMUJvYyxTQUFVLGtEQUNWQyxlQUFlLEVBQ2ZDLE1BQU8sSUFDUEMsT0FBUSxRQUVaLENBR0EsYUFBTW9YLEdBQ0osTUFBTTdyQixXQUFhakosTUFBTTgwQixVQWV6QixPQWJBN3JCLEtBQUtxMEUsV0FBYXIwRSxLQUFLaU0sT0FBT29vRSxXQUM5QnIwRSxLQUFLczBFLFVBQVl0MEUsS0FBS2lNLE9BQU9xb0UsVUFDN0J0MEUsS0FBS28rQyxPQUFTcCtDLEtBQUtpTSxPQUFPbXlDLE9BQzFCcCtDLEtBQUs4dEUsY0FBZ0I5dEUsS0FBS2lNLE9BQU82aEUsY0FDakM5dEUsS0FBS3UwRSxVQUFZdjhFLEtBQUtzRyxNQUFNMjFFLElBQUksZ0JBQzVCLENBQUMsTUFBTyxZQUFZdjJFLFNBQVNzQyxLQUFLcTBFLGNBQ3BDcjBFLEtBQUt3dUUsVUFBWXRELHdCQUF3Qkcsa0JBQ3pDcnJFLEtBQUt1b0UsU0FBVzJDLHdCQUF3QkMsY0FDdENuckUsS0FBS2lNLE9BQU9zOEQsVUFFZHZvRSxLQUFLdzBFLFlBQWN0Six3QkFBd0JFLGVBQWVwckUsS0FBS3VvRSxXQUcxRHZvRSxJQUNULENBRUEsaUJBQUEwVSxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUV4QkEsS0FBS3ZhLEtBQUssaUNBQWlDa2dFLE9BQzNDM2xELEtBQ0d2YSxLQUFLLHFDQUNMOUQsT0FBT29FLEtBQUsreEIsZ0JBQWdCOTRCLEtBQUsrRyxPQUNwQ2lhLEtBQ0d2YSxLQUFLLGdDQUNMOUQsT0FBT29FLEtBQUsrNUUsb0JBQW9COWdGLEtBQUsrRyxPQUV4Q2lhLEtBQ0d2YSxLQUFLLDhCQUNMd2EsR0FBRyxTQUFTLFNBQVUxWixHQUNyQixNQUFNdzVFLHNCQUF3Qmx1RCxFQUFFOXJCLE1BQzdCNGhDLE1BQ0EvN0IsTUFBTSxrQ0FDSDArQixPQUFTelksRUFBRSxlQUNieVksT0FBT2ovQixLQUFLLGFBQWUwMEUsc0JBQzdCejFDLE9BQ0d0cUIsS0FBSzNjLEtBQUtDLEtBQUtDLFNBQVMsb0NBQ3hCdzVELFNBQVMsU0FFWnp5QixPQUFPdHFCLEtBQUtzcUIsT0FBT2ovQixLQUFLLFNBQVNncEMsWUFBWSxRQUVqRCxJQUNDclEsUUFBUSxTQUVYaGtCLEtBQUt2YSxLQUFLLGtCQUFrQnN5QixNQUFNaHlCLEtBQUttaUMsZUFBZWxwQyxLQUFLK0csT0FDM0RpYSxLQUFLdmEsS0FBSyxRQUFRMnlCLFFBQU83eEIsSUFDdkJBLEVBQUUvRCxnQkFBZSxHQUVyQixDQU9BLGdCQUFPdzlFLENBQVc3Z0QsTUFDaEIsTUFBTWk3QyxPQUFTLENBQUMsRUF1QmhCLE9BdEJBQSxPQUFPbjBCLE9BQVM5bUIsS0FBSzE1QixLQUFLLG9CQUFvQmtpQyxNQUFNNUcsT0FDaERwNEIsT0FBTzIvQyxNQUFNd3ZCLGNBQ2Y1bUUsUUFBUW8zQyxNQUFNLGVBQWdCOHhCLE9BQU9uMEIsUUFFbkM5bUIsS0FBSzE1QixLQUFLLG1CQUFtQmtCLE9BQVMsSUFDeEN5ekUsT0FBT0MsY0FBZ0JsN0MsS0FBSzE1QixLQUFLLG1CQUFtQmtpQyxNQUFNNUcsUUFFeEQ1QixLQUFLMTVCLEtBQUssb0JBQW9Ca0IsT0FBUyxJQUN6Q3l6RSxPQUFPcmhCLEtBQU93ZCx3QkFBd0JDLGNBQ3BDcjNDLEtBQUsxNUIsS0FBSyxvQkFBb0JraUMsTUFBTTVHLFNBR3BDNUIsS0FBSzE1QixLQUFLLFdBQVdrQixPQUFTLElBQ2hDeXpFLE9BQU8zd0IsT0FBU3RxQixLQUFLMTVCLEtBQUssV0FBV2tpQyxNQUFNNUcsUUFFekM1QixLQUFLMTVCLEtBQUssOEJBQThCa0IsT0FBUyxJQUNuRHl6RSxPQUFPaC9CLEtBQU9qYyxLQUFLMTVCLEtBQUssOEJBQThCa2lDLE1BQU01RyxRQUcxRHA0QixPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sZ0JBQWlCLEtBQU84eEIsT0FBT2gvQixLQUFPLE1BRS9DZy9CLE1BQ1QsQ0FFQSxtQkFBQTBGLENBQXFCeDlFLE9BQ25CLE1BQU0yOUUsY0FBZ0JwckUsU0FBU3FyRSxlQUFlLCtCQUN4Q0MsY0FBZ0J0ckUsU0FBU3FyRSxlQUM3QixpQ0FFSUUsY0FBZ0J2ckUsU0FBU3FyRSxlQUFlLDZCQUN4Q0csUUFBVXhyRSxTQUFTcXJFLGVBQWUsZ0NBQ2xDN0UsS0FBTzRFLGNBQWNLLE1BQU0sR0FDM0IzbUQsT0FBUzV6QixLQUNUdzZFLFdBQWEsSUFBSUMsV0FDdkJELFdBQVdFLE9BQVMsU0FBVWw2RSxHQUM1QixJQUNFb3pCLE9BQU8rbUQsY0FBZ0IvckUsS0FBSzRkLE1BQU1ndUQsV0FBV2o0RSxPQUMvQyxDQUFFLE1BQU8vQixHQUtQLE9BSkFzckIsRUFBRSxlQUNDN1IsS0FBSzNjLEtBQUtDLEtBQUtDLFNBQVMsOEJBQ3hCdzVELFNBQVMsY0FDWno2RCxNQUFNRSxnQkFFUixDQUNBLE1BQU1tK0UsZ0JBQ0pobkQsT0FBTyttRCxlQUFlM0UsY0FBY0csZ0JBQ2pDeUUsaUJBTUxQLGNBQWNRLFlBQWNELGdCQUFnQnhFLEtBQzVDZ0UsY0FBYzluRSxJQUFNLHlCQUEyQnNvRSxnQkFBZ0JwQixTQUMvRGMsUUFBUXY2QyxNQUFNQyxRQUFVLFFBQ3hCbFUsRUFBRSwwQkFBMEIvUixPQUFPLFNBUmpDaFIsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBS0MsU0FBUywrQkFRekIsRUFDQWc5RSxXQUFXTSxXQUFXeEYsS0FDeEIsQ0FFQSxlQUFBdmpELENBQWlCeDFCLE9BQ2Z5RCxLQUFLa3lCLFVBQVUzMUIsTUFDakIsQ0FFQSxvQkFBTTRsQyxDQUFnQjVsQyxPQUNwQixNQUFNMlIsR0FBSzNSLE1BQU1JLGNBQWNJLFFBQVF5bEIsT0FDdkMsR0FBVyxPQUFQdFUsR0FDRmxPLEtBQUttYixhQUNBLEdBQVcsa0JBQVBqTixHQUF3QixDQUNqQyxNQUFNdUMsUUFBVSsvRCx3QkFBd0JFLGVBQ3RDMXdFLEtBQUt1UixPQUFPczhELFVBRWRqbUUsY0FBY3FyQixnQkFBZ0J4aUIsU0FBU3BKLE1BQUssSUFDbkMwQixHQUFHQyxjQUFjekksS0FBS2pELEtBQUtDLEtBQUtDLFNBQVMsaUJBRXBELE1BQU8sR0FBVyxXQUFQMFEsR0FBaUIsQ0FDMUIsTUFBTXhYLElBQU1vMUIsRUFBRXZ2QixNQUFNSSxlQUFlRSxRQUFRLDZCQUMzQ25HLElBQUlrcEUsT0FDSixNQUFNeG1DLEtBQU90TixFQUFFdnZCLE1BQU1JLGVBQWVFLFFBQVEsUUFDdEN3M0UsT0FBU3FGLHdCQUF3Qk8sVUFBVTdnRCxNQUNqRCxHQUFzQixlQUFsQmk3QyxPQUFPbjBCLFFBQTJCbGdELEtBQUsyNkUsY0FBZSxDQUN4RCxNQUFNMytELGdCQUNFMDVELDRCQUE0QjJELHdCQUNoQ3I1RSxLQUFLMjZFLGNBQ0wsQ0FBRWozQixPQUFRMndCLE9BQU8zd0IsVUFFSCxJQUFkMW5DLFdBQ0VwWixPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sYUFBY3ZtQyxXQUU5QmpULEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBSzBXLE9BQU8scUJBQXNCLENBQ3JDOG1FLFVBQVd6OUUsS0FBS0MsS0FBS0MsU0FBUywyQkFDOUIrckMsVUFBV3Z0QixVQUFVNWxCLGNBR25CNGxCLFVBQVVqZSxNQUFNQyxRQUFPLEdBQzdCZ0MsS0FBS21iLFNBRUx6a0IsSUFBSW1lLE1BRVIsTUFBV3cvRCxPQUFPaC9CLE1BQXdCLEtBQWhCZy9CLE9BQU9oL0IsTUFDL0Jxa0Msd0JBQXdCc0IsWUFBWTNHLFFBQ3BDcjBFLEtBQUttYixTQUVMemtCLElBQUltZSxNQUVSLENBQ0YsQ0FLQSxtQkFBTTZkLENBQWVuMkIsTUFBT28yQixVQUMxQjN5QixLQUFLdVIsT0FBT29vRSxXQUFhaG5ELFNBQVMsbUJBQ2xDM3lCLEtBQUt1UixPQUFPNmhFLGNBQWdCemdELFNBQVMsOEJBQThCcUksWUFDekIsSUFBL0JySSxTQUFTLG9CQUNsQjN5QixLQUFLdVIsT0FBT3FvRSxVQUFZam5ELFNBQVMsd0JBRVEsSUFBaENBLFNBQVMscUJBQ2xCM3lCLEtBQUt1UixPQUFPczhELFNBQVdsN0MsU0FBUyx5QkFFSCxJQUFwQkEsU0FBUyt3QixTQUNsQjFqRCxLQUFLdVIsT0FBT215QyxPQUFTL3dCLFNBQVMrd0IsUUFFaEMxakQsS0FBS2hDLFFBQU8sRUFDZCxDQU1BLHdCQUFhZzlFLENBQWEzRyxRQUNnQixNQUFwQ0EsT0FBT2gvQixLQUFLZy9CLE9BQU9oL0IsS0FBS3owQyxVQUMxQnl6RSxPQUFPaC9CLE1BQVEsS0FFakIsTUFBTXA3QyxNQUFRLElBQUk2MkUsa0JBQ1ptSyxtQkFBcUJoaEYsTUFBTW02RSxZQUFZQyxRQUV6Q3p4RSxPQUFPMi9DLE1BQU13dkIsY0FDZjVtRSxRQUFRbzNDLE1BQU0sZ0JBQWlCMDRCLGNBRWpDbHlFLEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBSzBXLE9BQU8scUJBQXNCLENBQ3JDOG1FLFVBQVdFLGFBQWE1OEUsTUFBTXVSLGNBQzlCMjVCLFVBQVcweEMsYUFBYTdrRixjQUd0QjZrRixhQUFhbDlFLE1BQU1DLFFBQU8sRUFHbEMsQ0FLQSxtQkFBYTBTLENBQVFwUixRQUFVLENBQUMsR0FDOUJBLFFBQVFxNkUsV0FBYXI2RSxRQUFRcTZFLFlBQWMsTUFDM0NyNkUsUUFBUXV1RSxTQUNOdnVFLFFBQVF1dUUsVUFBWTJDLHdCQUF3QkMsY0FBYyxNQUM1RG54RSxRQUFRczZFLFVBQVl0NkUsUUFBUXV1RSxVQUFZLFlBQ3hDdnVFLFFBQVFva0QsT0FBU3BrRCxRQUFRb2tELFFBQVUsT0FDbkNwa0QsUUFBUTh6RSxjQUFnQjl6RSxRQUFROHpFLGVBQWlCLEdBRWpELElBQUlzRyx3QkFBd0JwNkUsU0FBU3RCLFFBQU8sRUFDOUMsRUFHRmc4QyxNQUFNa2hDLEtBQUssU0FBUyxLQUNkNTlFLEtBQUtrRSxRQUFRdEUsSUFBSSx3QkFBd0I2RCxTQUMzQzJyRCxPQUFPb2tCLGtCQUFvQkEsa0JBQzdCLElDNVBLLE1BQU1xSyxrQkFBa0IxbUQsT0FDN0Isa0JBQU8ybUQsQ0FBYUMsU0FBVTdwRSxRQUFTMEosU0FDakMxSixRQUFROVIsS0FBSyxTQUFTc2dFLEdBQUcsYUFDM0IxaUUsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsWUFBY2l6RSxTQUFXLElBQU0sS0FFM0RuZ0UsUUFBUW1nRSxTQUNWLENBRUEsa0JBQU9DLENBQWFELFNBQVVwMUUsTUFDNUIsT0FBSW8xRSxVQUFZcDFFLEtBQUsvRyxPQUFPd0MsTUFBTWt4QyxXQUFXMWtDLEdBQ3BDakksS0FBSy9HLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsR0FFNUJ0UCxRQUFRQyxNQUFNd08sVUFBVXBILEtBQ2pDLENBRUEsbUJBQWF5SyxHQUVYLE9BRGtCcFQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsY0FFMUMsSUFBSyxHQUNILE9BQU8sSUFBSWdmLFNBQVFoQixVQUNMLElBQUlpZ0UsVUFBVSxDQUN4QnpzRSxNQUFPcFIsS0FBS0MsS0FBSzBXLE9BQU8sZ0NBQ3hCeEQsUUFBUyxNQUFRblQsS0FBS0MsS0FBSzBXLE9BQU8sa0NBQW9DLDBHQUE0RzNXLEtBQUtDLEtBQUswVyxPQUFPLG9DQUFzQyxlQUN6TzBGLFFBQVMsQ0FBQyxPQUFRLE1BQU8sVUFDekIrYSxRQUFTLENBQ1B5bEIsSUFBSyxDQUNIMThDLEtBQU0sK0JBQ05KLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsT0FDMUJtM0IsU0FBV25qQixVQUFjMnBFLFVBQVVDLGFBQVksRUFBTTVwRSxRQUFTMEosUUFBTyxHQUV2RXFnRSxHQUFJLENBQ0Y5OUUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxNQUMxQm0zQixTQUFXbmpCLFVBQWMycEUsVUFBVUMsYUFBWSxFQUFPNXBFLFFBQVMwSixRQUFPLE1BSXhFbGQsUUFBTyxFQUFJLElBRW5CLElBQUssSUFDSCxPQUFPLEVBQ1QsSUFBSyxJQUNILE9BQU8sRUFFYixFQ25DSyxNQUFNdzlFLDRCQUE0QkMsVUFLdkMsaUJBQUF6aEUsQ0FBbUJDLE1BR2pCLEdBRkE1ZCxNQUFNMmQsa0JBQWtCQyxPQUVuQmphLEtBQUtWLFFBQVFxekQsU0FBVSxPQUU1QjE0QyxLQUNHdmEsS0FBSyx1QkFDTHN5QixPQUFNejFCLE9BQVN5RCxLQUFLaTlELGVBQWUxZ0UsTUFBTyxZQUM3QzBkLEtBQ0d2YSxLQUFLLGdCQUNMc3lCLE9BQU16MUIsT0FBU3lELEtBQUswN0UsY0FBY24vRSxNQUFPLFlBRTVDMGQsS0FBS3ZhLEtBQUssc0JBQXNCc3lCLE1BQU1oeUIsS0FBSzI3RSxtQkFBbUIxaUYsS0FBSytHLE9BQ25FaWEsS0FBS3ZhLEtBQUssa0JBQWtCc3lCLE1BQU1oeUIsS0FBSzQ3RSxnQkFBZ0IzaUYsS0FBSytHLE9BRTNDLElBQUk2N0UsU0FBUyxDQUM1Qi9xRCxhQUFjLGFBQ2RnckQsVUFBVyxDQUFFQyxLQUFNLzdFLEtBQUtrekIsUUFBUWo2QixLQUFLK0csU0FFOUIvRyxLQUFLZ2hCLEtBQUssR0FDckIsQ0FFQSxhQUFNaVosQ0FBUzMyQixNQUFPOEIsS0FBTyxRQUFTMjlFLGVBQWlCLFVBQ3JEei9FLE1BQU1FLGlCQUNORixNQUFNa2hFLGtCQUVOLE1BQU13ZSxjQUFnQjEvRSxPQUFPSSxlQUFlcVMsV0FBV3lULFNBQVMsbUJBQzFEdzlDLEdBQUsxakUsT0FBT0ksZUFBZUUsUUFBUSxNQUNuQ3dnQixNQUFRNGlELElBQUlsakUsU0FBU3VhLE1BRXJCZ2MsZUFBaUIxckIsY0FBYzJyQixxQkFBcUJoM0IsTUFBTyxRQUVqRSxJQUFJMi9FLFNBQVcsRUFDZixNQUFNcm1ELFdBQWE3MUIsS0FBS2lHLEtBQUtsSyxPQUFPaWdGLGdCQUFrQnA5RSxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT2lnRixpQkFBbUIsR0FDNUcxM0UsT0FBU3RFLEtBQUtpRyxLQUFLbEssT0FBT3VJLE9BQVMxRixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT3VJLFFBQVUsR0FFNUYsSUFBSyxNQUFNMkIsUUFBUXF0QixTQUNqQixHQUFLcnRCLE1BQVNBLEtBQUtsSyxRQUNkLENBQUNzQyxNQUFNMkUsU0FBU2lELEtBQUs1SCxNQUkxQixHQUFJNDlFLGNBQWUsQ0FDakIsSUFBSzkyRSxTQUFTNEMsVUFBVTlCLE1BQU8sQ0FFN0IsR0FBSTR2QixXQUFXbjJCLE1BQUt5NEMsSUFBTUEsR0FBRy9oRCxPQUFTNlAsS0FBSzdQLE9BQ3pDLFNBRUYsR0FBSWtPLE9BQU8rWSxPQUFPd0csT0FBT25rQixNQUFLeTRDLElBQU1BLEdBQUcvaEQsT0FBUzZQLEtBQUs3UCxPQUNuRCxRQUVKLENBRWlCLElBQWI4bEYsV0FDRkEsZUFBaUJmLFVBQVV6cUUsVUFFN0JwTSxPQUFPK1ksT0FBT3dHLE9BQVN2ZixPQUFPK1ksT0FBT3dHLE9BQU83WCxPQUFPLENBQUNtdkUsVUFBVUcsWUFBWVksU0FBVWoyRSxPQUN0RixLQUFPLENBQ0wsSUFBS2QsU0FBUzRDLFVBQVU5QixNQUFPLENBRTdCLEdBQUk0dkIsV0FBV24yQixNQUFLeTRDLElBQU1BLEdBQUcvaEQsT0FBUzZQLEtBQUs3UCxPQUN6QyxTQUdGLElBQUssSUFBSW9xQixFQUFJLEVBQUdBLEVBQUlsYyxPQUFPMUQsT0FBUTRmLElBQUssQ0FFdEMsTUFBTW5ELE1BQVEvWSxPQUFPa2MsR0FBR3FELE9BQU93MEIsV0FDN0JGLElBQU1BLEdBQUcvaEQsT0FBUzZQLEtBQUs3UCxRQUVWLElBQVhpbkIsT0FDRi9ZLE9BQU9rYyxHQUFHcUQsT0FBTzZTLE9BQU9yWixNQUFPLEVBRW5DLENBQ0YsQ0FDaUIsSUFBYjYrRCxXQUNGQSxlQUFpQmYsVUFBVXpxRSxVQUU3Qm1sQixXQUFXMytCLEtBQUtpa0YsVUFBVUcsWUFBWVksU0FBVWoyRSxNQUNsRCxPQUVJakcsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsZ0JBQWlCb0csZUFDcEN0RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxDQUFDLFVBQVU4OUUsa0JBQW1Cbm1ELFlBQ3pELENBRUEscUJBQU0rbEQsQ0FBaUJyL0UsT0FDckJBLE1BQU1FLGlCQUNOLE1BQU1DLEVBQUlILE1BQU1JLGNBR2hCLEdBQUlELEVBQUVzUyxVQUFVeVQsU0FBUyxhQUFjLE9BQy9CemlCLEtBQUtreUIsVUFBVTMxQixPQUNyQixNQUFNK0gsT0FBU3RFLEtBQUtpRyxLQUFLbEssT0FBT3VJLGFBQzFCdEUsS0FBS2lHLEtBQUsvSCxPQUFPLENBQ3JCLGdCQUFpQm9HLE9BQU8wSCxPQUFPLENBQUMsQ0FBRTFNLFFBQVMsRUFBR3VrQixPQUFRLE9BRTFELENBRUEsR0FBSW5uQixFQUFFc1MsVUFBVXlULFNBQVMsZ0JBQWlCLE9BQ2xDemlCLEtBQUtreUIsVUFBVTMxQixPQUNyQixNQUFNK0gsT0FBUzFGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPdUksUUFDbEQyN0QsR0FBS3ZqRSxFQUFFRyxRQUFRLG9CQUNyQnlILE9BQU9veUIsT0FBT3g2QixPQUFPK2pFLEdBQUdsakUsUUFBUXVhLE9BQVEsU0FDbEN0WCxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxnQkFBaUJvRyxRQUM1QyxDQUNGLENBRUEsb0JBQU0yNEQsQ0FBZ0IxZ0UsTUFBT3kvRSxlQUFpQixTQUM1Q3ovRSxNQUFNRSxpQkFDTixNQUFNb1YsSUFBTWlhLEVBQUV2dkIsTUFBTUksZUFDZEMsR0FBS2lWLElBQUl3ckQsUUFBUSxTQUNqQi9sRCxNQUFRekYsSUFBSWhWLFFBQVEsVUFDMUIsSUFBSW9KLEtBVUosR0FSRUEsS0FERXFSLE1BQU0xVyxPQUNEWixLQUFLaUcsS0FBS2xLLE9BQU91SSxPQUFPZ1QsTUFBTWhTLEtBQUssVUFBVTAyRSxnQkFBZ0J0OEUsTUFBS3pKLEdBQ2hFQSxFQUFFbzhDLE1BQVF6MUMsR0FBRzBJLEtBQUssYUFHcEJ0RixLQUFLaUcsS0FBS2xLLE9BQU9pZ0YsZ0JBQWdCdDhFLE1BQUt6SixHQUNwQ0EsRUFBRW84QyxNQUFRejFDLEdBQUcwSSxLQUFLLGNBR3hCVyxLQUNILE9BRUYsTUFBTTVDLGVBQWlCbUssV0FBV0MsV0FDaEN4SCxLQUFLbEssT0FBT3VSLFlBQVlwWCxNQUN4QixDQUNFb00sT0FBTyxFQUNQaTlELFFBQVN2L0QsS0FBS2lHLEtBQUswc0QsV0FLdkIsR0FBSS8xRCxHQUFHNGlFLFNBQVMsWUFBYSxDQUMzQixNQUFNQyxRQUFVN2lFLEdBQUc4ZCxTQUFTLGlCQUM1QitrRCxRQUFRakMsUUFBUSxLQUFLLElBQU1pQyxRQUFRejhDLFVBQ3JDLEtBQU8sQ0FDTCxNQUFNMDhDLElBQU01ekMsRUFBRSw2QkFBNkJ6b0Isa0JBQ3JDcUssTUFBUW9lLEVBQUUsdUNBRWhCNHpDLElBQUk5dEIsT0FBT2xrQyxPQUNYOVEsR0FBR2cxQyxPQUFPOHRCLElBQUlFLFFBQ2RGLElBQUlHLFVBQVUsSUFDaEIsQ0FDQWpqRSxHQUFHNGpDLFlBQVksV0FDakIsQ0FFQSxtQkFBTWs3QyxDQUFlbi9FLE1BQU95L0UsZUFBaUIsU0FDM0MsTUFBTS8xRSxLQUFPNmxCLEVBQUV2dkIsTUFBTUksZUFBZUUsUUFBUSxTQUN0Q3lYLE9BQVNyTyxLQUFLWCxLQUFLLFdBQ25CNjJFLE1BQVFsMkUsS0FBS1gsS0FBSyxTQUNsQjgyRSxVQUFZcDhFLEtBQUtpRyxLQUFLbEssT0FBT2lnRixnQkFBZ0IzakMsV0FBVTczQixHQUFNbE0sUUFBVWtNLEVBQUU2eEIsTUFBUS85QixRQUFZNm5FLE9BQVMzN0QsSUFBTTI3RCxRQUNsSCxHQUFJQyxXQUFhLEVBQUcsQ0FDbEIsTUFBTXZtRCxXQUFhNzFCLEtBQUtpRyxLQUFLbEssT0FBT2lnRixnQkFBa0JwOUUsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLaUcsS0FBS2xLLE9BQU9pZ0YsaUJBQW1CLEdBQ2xIbm1ELFdBQVdhLE9BQU8wbEQsVUFBVyxTQUN2QnA4RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxDQUFDLFVBQVU4OUUsa0JBQW1Cbm1ELFlBQ3pELENBQ0YsQ0FFQSx3QkFBTThsRCxDQUFvQnAvRSxPQUN4QixNQUFNMEosS0FBTzZsQixFQUFFdnZCLE1BQU1JLGVBQWVFLFFBQVEsU0FDdEN5YSxNQUFRcGIsT0FBTytKLEtBQUtwSixRQUFRLG9CQUFvQnlJLEtBQUssVUFDckRoQixPQUFTMUYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLaUcsS0FBS2xLLE9BQU91SSxRQUN4RCxRQUE2QixJQUFsQkEsT0FBT2dULE9BQXdCLENBQ3hDLE1BQU1oRCxPQUFTck8sS0FBS1gsS0FBSyxXQUNuQjYyRSxNQUFRbDJFLEtBQUtYLEtBQUssU0FDbEI4MkUsVUFBWTkzRSxPQUFPZ1QsT0FBT3VNLE9BQU93MEIsV0FBVTczQixHQUFNbE0sUUFBVWtNLEVBQUU2eEIsTUFBUS85QixRQUFZNm5FLE9BQVMzN0QsSUFBTTI3RCxRQUNsR0MsV0FBYSxJQUNmOTNFLE9BQU9nVCxPQUFPdU0sT0FBTzZTLE9BQU8wbEQsVUFBVyxTQUNqQ3A4RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxnQkFBaUJvRyxTQUU5QyxDQUNGLENBRUEseUJBQVdtVixHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxjQUMzQkMsU0FBVSwrQ0FDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1I2VyxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUMzQnd2QyxRQUFTLENBQUMsb0JBQ1Z0dkMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQXFtQyxHQUNFLE1BQU10QyxjQUFnQjU0RCxNQUFNazdELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlajFELE1BQ2xDaTFELGFBQ1QsQ0FFQSxhQUFNOWpDLEdBQ0osTUFBTUMsVUFBWS8wQixNQUFNODBCLFVBRXhCQyxVQUFVaXJELFVBQW9DLElBQXpCcjhFLEtBQUtpRyxLQUFLcTJFLFdBRS9CbHJELFVBQVU5ckIsS0FBS3ZKLE9BQU84bkIsYUFBZXZtQixLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNaTJCLGdCQUFnQixDQUFFOVksU0FBVWxQLFVBQVU5ckIsS0FBS3ZKLE9BQU84bkIsU0FFN0d1TixVQUFVd3pDLGVBQXlELElBQXhDeHpDLFVBQVU5ckIsS0FBS3ZKLE9BQU84bkIsT0FBT2pqQixPQUV4RHd3QixVQUFVOXJCLEtBQUt2SixPQUFPOG5CLE9BQU8xWCxLQUFLdkUsY0FBY3dFLGVBRWhELElBQUssSUFBSWlSLE1BQVEsRUFBR296QyxJQUFNci9CLFVBQVU5ckIsS0FBS3ZKLE9BQU91SSxPQUFPMUQsT0FBUXljLE1BQVFvekMsSUFBS3B6QyxRQUMxRStULFVBQVU5ckIsS0FBS3ZKLE9BQU91SSxPQUFPK1ksT0FBT3dHLGFBQWV2bUIsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTWkyQixnQkFBZ0IsQ0FBRTlZLFNBQVVsUCxVQUFVOXJCLEtBQUt2SixPQUFPdUksT0FBTytZLE9BQU93RyxTQUV6SXVOLFVBQVU5ckIsS0FBS3ZKLE9BQU91SSxPQUFPK1ksT0FBTzJ0RCxRQUFnRSxJQUF0RDU1QyxVQUFVOXJCLEtBQUt2SixPQUFPdUksT0FBTytZLE9BQU93RyxPQUFPampCLE9BRXpGd3dCLFVBQVU5ckIsS0FBS3ZKLE9BQU91SSxPQUFPK1ksT0FBT3dHLE9BQU8xWCxLQUFLdkUsY0FBY3dFLGVBR2hFZ2xCLFVBQVVtckQsdUJBQXlCZixvQkFBb0JlLHVCQUF1Qm5yRCxVQUFVOXJCLEtBQUt2SixPQUFPaS9DLHVCQUVwRzVwQixVQUFVb3JELGVBQWlCLEdBRTNCLElBQUssTUFBTzNnRixJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFRNm1CLFVBQVU5ckIsS0FBS3ZKLE9BQU9zQyxNQUMxRG5JLE9BQ0ZrN0IsVUFBVW9yRCxlQUFldGxGLEtBQUszQyxLQUFLa29GLHFCQUFxQjVnRixLQUFPdEgsS0FBS2tvRixxQkFBcUI1Z0YsS0FBTyxNQXFCcEcsT0FqQkF1MUIsVUFBVXNyRCwrQkFBaUNsdkUsV0FBV0MsV0FDcEQyakIsVUFBVTlyQixLQUFLdkosT0FBT3VSLFlBQVlwWCxNQUNsQyxDQUNFb00sT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVa3dDLGdDQUFrQzl6RCxXQUFXQyxXQUNyRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWWkwRCxPQUNsQyxDQUNFai9ELE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVWdHLFNBQVc5NUIsS0FBS3NHLEtBQUsyRSxLQUN4QjZvQixTQUNULENBRUEsNkJBQU9tckQsQ0FBd0J2aEMsdUJBQzdCLE1BQU0yaEMsVUFBWSxHQUNaQyxVQUFZLEdBQ2xCLElBQUssTUFBTy9nRixJQUFLZ2hGLFNBQVVqOUUsT0FBTzJLLFFBQVF5d0MsdUJBQ3hDLEdBQUk2aEMsTUFBTTFtRixXQUFZLENBQ3BCLE1BQU0ybUYsVUFBWXgvRSxLQUFLQyxLQUFLQyxTQUFTLFVBQVUzQixJQUFJK1QsaUJBQy9DaXRFLE1BQU12bkUsVUFBWXVuRSxNQUFNdDhDLFVBQzFCbzhDLFVBQVV6bEYsS0FBSyxHQUFHNGxGLGFBQWFELE1BQU0xbUYsY0FFbkMwbUYsTUFBTXZuRSxXQUFhdW5FLE1BQU10OEMsVUFDM0JxOEMsVUFBVTFsRixLQUFLLEdBQUc0bEYsYUFBYUQsTUFBTTFtRixhQUV6QyxDQUVGLElBQUlvbUYsdUJBQXlCLEdBQzdCLE1BQU1RLFNBQVcsSUFBSXovRSxLQUFLQyxLQUFLQyxTQUFTLGNBUXhDLE9BUElvL0UsVUFBVWg4RSxTQUFRMjdFLHdCQUEwQkssVUFBVXY0RSxLQUFLLFFBQzNEczRFLFVBQVUvN0UsUUFBVWc4RSxVQUFVaDhFLFNBQ2hDMjdFLHdCQUEwQixPQUFPSSxVQUFVdDRFLEtBQUswNEUsY0FFOUNKLFVBQVUvN0UsU0FBV2c4RSxVQUFVaDhFLFNBQ2pDMjdFLHdCQUEwQkksVUFBVXQ0RSxLQUFLMDRFLFdBRXBDUixzQkFDVCxDQUVBLGFBQUE3cEQsQ0FBZW4yQixNQUFPbzJCLFVBQ3BCLE1BQU01MkIsT0FBUzZDLFFBQVFDLE1BQU15ZixhQUFhcVUsV0FBVzUyQixPQUNyRCxHQUFJQSxPQUFPdUksT0FBUSxDQUNqQnF1QixTQUFTLGlCQUFtQi95QixPQUFPSixPQUNqQ3pELE9BQU91SSxRQUFVLElBRW5CLElBQUssSUFBSStZLE1BQVEsRUFBR0EsTUFBUXJkLEtBQUtpRyxLQUFLbEssT0FBT3VJLE9BQU8xRCxPQUFReWMsUUFDMURzVixTQUFTLGlCQUFpQnRWLGdCQUFrQnplLFFBQVFDLE1BQU13TyxVQUN4RHJOLEtBQUtpRyxLQUFLbEssT0FBT3VJLE9BQU8rWSxPQUFPd0csT0FHckMsQ0FFQXhuQixNQUFNcTJCLGNBQWNuMkIsTUFBT28yQixTQUM3QixFQ3RTSyxNQUFNcXFELCtCQUErQnhqRSxnQkFDMUMseUJBQVdDLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JEdkwsR0FBSSxrQ0FDSnlMLFFBQVMsQ0FBQyxPQUFRLFNBQVUsdUJBQzVCakwsTUFBT3BSLEtBQUtDLEtBQUtDLFNBQVMsaUNBQzFCb2MsU0FBVSxzREFDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1JGLGVBQWUsRUFDZndtRCxRQUFTLENBQUMsa0JBQ1Z6dkMsU0FBVSxDQUFDLENBQUVDLGFBQWMsYUFBY0MsYUFBYyxRQUUzRCxDQUVBLFlBQUltc0QsR0FDRixNQUFPLENBQ0xDLFdBQVksRUFDWkMsa0JBQW1CLEVBQ25CQyxtQkFBb0IsRUFDcEJDLFlBQWEsRUFDYkMsZ0JBQWlCLEVBQ2pCQyxtQkFBb0IsRUFDcEJDLGdCQUFpQixFQUNqQkMscUJBQXNCLEVBQ3RCQyxpQkFBa0IsRUFDbEJDLHVCQUF3QixFQUN4QkMsc0JBQXVCLEVBQ3ZCQyxtQkFBb0IsR0FDcEJDLGtCQUFtQixHQUNuQkMsZUFBZ0IsR0FDaEJDLFlBQWEsR0FFakIsQ0FFQSwwQkFBSUMsR0FDRixNQUFPLENBQ0xDLGVBQWdCLEVBQ2hCQyxZQUFhLEVBQ2JDLGNBQWUsRUFDZkMsY0FBZSxFQUNmQyxjQUFlLEVBRW5CLENBRUEscUJBQUlDLEdBQ0YsTUFBTyx1QkFDVCxDQUVBLG9CQUFJQyxHQUNGLE1BQU8sc0JBQ1QsQ0FFQSxhQUFJQyxHQUNGLE1BQU1DLE1BQVExK0UsS0FBS2k5RSxTQUNuQixJQUFJd0IsVUFBWSxDQUNkQyxNQUFNdkIsbUJBNkJSLE9BM0JJNy9FLEtBQUtzRyxLQUFLMkUsTUFDWmsyRSxVQUFVdm5GLEtBQUt3bkYsTUFBTXRCLG9CQUVVLEtBQTdCcDlFLEtBQUt1UixPQUFPb3RFLGNBQ2RGLFVBQVV2bkYsS0FBS3duRixNQUFNckIsYUFFbkIvL0UsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsc0JBQzVCdWhGLFVBQVV2bkYsS0FBS3duRixNQUFNcEIsaUJBRXZCbUIsVUFBVXZuRixLQUFLd25GLE1BQU1uQixvQkFDaEJqZ0YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsK0JBQzdCdWhGLFVBQVV2bkYsS0FBS3duRixNQUFNbEIsaUJBRXZCaUIsVUFBWUEsVUFBVXp5RSxPQUFPLENBQzNCMHlFLE1BQU1qQixxQkFDTmlCLE1BQU1oQixpQkFDTmdCLE1BQU1mLHlCQUVKcmdGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUM1QnVoRixVQUFVdm5GLEtBQUt3bkYsTUFBTWQsdUJBRXZCYSxVQUFZQSxVQUFVenlFLE9BQU8sQ0FDM0IweUUsTUFBTWIsbUJBQ05hLE1BQU1aLGtCQUNOWSxNQUFNWCxlQUNOVyxNQUFNVixjQUVEUyxTQUNULENBRUEsaUNBQWFHLEdBQ1gsT0FBTyxJQUFJMWlFLFNBQVEsQ0FBQ2hCLFFBQVNvMUMsVUFDM0JoekQsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTTYwQixtQkFBbUIsQ0FBRUMsWUFBYSxPQUFRNTVDLEtBQU0sSUFBS3c2QyxhQUFhLElBQVF4eEMsTUFBTThHLFFBQ3BHLE1BQU1xekIsS0FBTyxDQUFDLEVBQ2QsSUFBSyxNQUFNdjdCLFFBQVFrSSxNQUNqQnF6QixLQUFLdjdCLEtBQUsvRyxNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLElBQU1qSSxLQUV2Q2lWLFFBQVFzbUIsS0FBSSxHQUNiLEdBRUwsQ0FFQSw0QkFBTXE5QyxDQUF3QkMsUUFDNUIsT0FBT2wvRSxPQUFPMkssY0FBY3ZLLEtBQUt1UixPQUFPd3RFLFlBQVkxb0YsUUFBT2lrRCxPQUFTQSxNQUFNLEdBQUd6MEMsTUFBTWk1RSxVQUFTOTZFLEtBQUlzMkMsT0FBU0EsTUFBTSxJQUNqSCxDQUVBLHlCQUFNMGtDLENBQXFCOXdFLElBQ3pCLGFBQWNsTyxLQUFLdVIsT0FBT3d0RSxZQUFZN3dFLE1BQU8sQ0FDL0MsQ0FFQSxxQkFBTWtyQyxDQUFpQjlZLFVBQ3JCLE1BQU1ueUIsTUFBUW15QixTQUFTanFDLFFBQU9nakQsSUFBb0IsaUJBQVBBLEtBQ3JDNGxDLE9BQVMzK0MsU0FBU2pxQyxRQUFPZ2pELElBQW9CLGlCQUFQQSxLQUM1QyxHQUFJNGxDLE9BQU9yK0UsT0FBUSxDQUNqQixNQUFNOGlELGFBQWUxakQsS0FBS3VSLE9BQU93dEUsV0FDM0I3L0IsUUFBVSxHQUNoQixJQUFLLE1BQU0vN0IsU0FBUzg3RCxZQUNXLElBQWxCdjdCLE9BQU92Z0MsT0FDaEJoVixNQUFNalgsS0FBS3dzRCxPQUFPdmdDLFFBRWxCKzdCLFFBQVFob0QsS0FBS2lzQixPQUdqQixHQUFJKzdCLFFBQVF0K0MsT0FBUSxDQUNsQixNQUFNdTRDLElBQU03N0MsS0FBS0MsS0FBSzBXLE9BQU8xZixLQUFLbVMsS0FBSzFHLEtBQUt1UixPQUFPMnRFLGFBQWUsbUNBQW9DLENBQUUvbEMsSUFBS241QyxLQUFLdVIsT0FBTzJ0RSxhQUN6SG4yRSxHQUFHQyxjQUFjdUssS0FBS2pXLEtBQUtDLEtBQUswVyxPQUFPLDJDQUE0QyxDQUFFZ3JFLE9BQVEvL0IsUUFBUTc2QyxLQUFLLE1BQU8ydUQsS0FBTTExRCxLQUFLQyxLQUFLeTFELEtBQU03WixNQUN6SSxDQUNGLENBQ0EsT0FBT2hyQyxLQUNULENBRUEsaUJBQUFneEUsR0FDRSxJQUFLLE1BQU10akYsT0FBT21FLEtBQUt1UixPQUFPNnRFLGVBQzVCcC9FLEtBQUt1UixPQUFPNnRFLGVBQWV2akYsS0FBTyxFQU1wQyxJQUFLeUIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQStCLENBQzVELEdBQUk4QyxLQUFLdVIsT0FBT3N0QyxLQUFPLEdBQUksQ0FDekIsTUFBTWhqRCxJQUFNdUcsS0FBSzBJLE1BQU05SyxLQUFLdVIsT0FBT3N0QyxJQUFNLElBQ3pDNytDLEtBQUt1UixPQUFPOHRFLHVCQUF5QixDQUNuQ3hvRixJQUFLLENBQ0g0TCxNQUFRNUcsSUFBTSxFQUFJLEVBQUksRUFBSUEsSUFBTSxFQUNoQ3U1QixRQUFRLEdBRVZrcUQsT0FBUSxDQUNONzhFLE1BQVE1RyxJQUFNLEVBQUksRUFBSXVHLEtBQUt4TCxJQUFJLEVBQUdpRixJQUFNLEdBQUssRUFDN0NxakIsS0FBTSxDQUFDLE1BQU8sTUFBTyxPQUNyQjFmLE9BQVEsQ0FBQyxHQUVYeU0sT0FBUSxDQUNOeEosTUFBbUIsR0FBWDVHLElBQU0sR0FDZHFqQixLQUFNLE9BR1osTUFBV2xmLEtBQUt1UixPQUFPc3RDLEtBQU8sR0FDNUI3K0MsS0FBS3VSLE9BQU84dEUsdUJBQXlCLENBQ25DeG9GLElBQUssQ0FDSDRMLE1BQU8sRUFDUDJ5QixRQUFRLElBR0hwMUIsS0FBS3VSLE9BQU9zdEMsS0FBTyxLQUM1QjcrQyxLQUFLdVIsT0FBTzh0RSx1QkFBeUIsQ0FDbkNDLE9BQVEsQ0FDTjc4RSxNQUFPLEVBQ1B5YyxLQUFNLENBQUMsTUFBTyxPQUNkMWYsT0FBUSxDQUFDLEdBRVh5TSxPQUFRLENBQ054SixNQUFPLEVBQ1B5YyxLQUFNLE9BRVJnNkIsTUFBTSxTQUcrQyxJQUE5Q2w1QyxLQUFLdVIsT0FBTzh0RSx1QkFBdUJwekUsU0FDNUNqTSxLQUFLdVIsT0FBTzZ0RSxlQUFlcC9FLEtBQUt1UixPQUFPOHRFLHVCQUF1QnB6RSxPQUFPaVQsT0FBU2xmLEtBQUt1UixPQUFPOHRFLHVCQUF1QnB6RSxPQUFPeEosTUFFNUgsQ0FDRixDQUVBLGFBQU0wdUIsR0FDSixNQUFNQyxnQkFBa0IvMEIsTUFBTTgwQixVQVM5QixJQUFJb3VELE1BQ0F6cEMsVUFDQUQsV0FUSnprQixVQUFVZ0csU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBRS9CNm9CLFVBQVVzdEQsTUFBUTErRSxLQUFLaTlFLFNBRXZCN3JELFVBQVVvdUQsU0FBVSxFQUNwQnB1RCxVQUFVcXVELGNBQWUsRUFNekIsSUFBSUMsY0FBZSxFQUVuQixPQUFRdHVELFVBQVU3ZixPQUFPb3VFLE1BQ3ZCLEtBQUt2dUQsVUFBVXN0RCxNQUFNdkIsa0JBQ25CL3JELFVBQVUrbkIsSUFBTTc3QyxLQUFLQyxLQUFLMFcsT0FBTzFmLEtBQUttUyxLQUFLMHFCLFVBQVU3ZixPQUFPMnRFLGFBQWUsbUNBQW9DLENBQUUvbEMsSUFBSy9uQixVQUFVN2YsT0FBTzJ0RSxhQUN2STl0RCxVQUFVb3VELFNBQVUsRUFDcEIsTUFFRixLQUFLcHVELFVBQVVzdEQsTUFBTXRCLG1CQUNuQixHQUFJOS9FLEtBQUtzRyxLQUFLMkUsS0FBTSxDQUNsQjZvQixVQUFVd3VELGFBQWU1L0UsS0FBSzYrRSx1QkFBdUIsZUFDckR6dEQsVUFBVXl1RCxrQkFBb0I3L0UsS0FBSzYrRSx1QkFBdUIsb0JBQzFEenRELFVBQVUwdUQsaUJBQW1COS9FLEtBQUs2K0UsdUJBQXVCLG1CQUN6RFUsTUFBUW51RCxVQUFVd3VELE9BQU9sZ0YsTUFBS3pKLEdBQUtBLEVBQUVpSixNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLEtBQU9rakIsVUFBVTdmLE9BQU9vdEUsb0JBQzdELElBQVZZLE9BQ1RudUQsVUFBVTdmLE9BQU9vdEUsYUFBZSxHQUNoQ3Z0RCxVQUFVN2YsT0FBT2d1RSxNQUFRLElBRXpCbnVELFVBQVU5akIsa0JBQW9CRSxXQUFXQyxXQUN2Qzh4RSxNQUFNeGpGLE9BQU91UixZQUFZcFgsTUFDekIsQ0FDRW9NLE9BQU8sRUFDUGk5RCxRQUFTamlFLEtBQUtzRyxLQUFLMkUsT0FJekI2b0IsVUFBVTlWLFVBQVksQ0FDcEIsQ0FBQ25MLE1BQU1xTCwwQkFBMEJ1akQsTUFBTyxpQkFDeEMsQ0FBQzV1RCxNQUFNcUwsMEJBQTBCeThDLFNBQVUsb0JBQzNDLENBQUM5bkQsTUFBTXFMLDBCQUEwQnFVLFVBQVcscUJBQzVDLENBQUMxZixNQUFNcUwsMEJBQTBCQyxPQUFRLG1CQUUzQzJWLFVBQVUydUQsTUFBUSxHQUNsQixJQUFLLE1BQU9sa0YsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUttUyxNQUM3QzBxQixVQUFVMnVELE1BQU03b0YsS0FBSyxDQUNuQmdYLEdBQUlyUyxJQUNKekYsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVN0SCxTQUc3Qms3QixVQUFVNnNELHVCQUF5QmorRSxLQUFLaStFLHVCQUN4QzdzRCxVQUFVNHVELHNCQUF3QjV1RCxVQUFVNnNELHVCQUF1QkMsZUFDL0Q5c0QsVUFBVTdmLE9BQU8wdUUsZ0JBQ25CN3VELFVBQVU0dUQsc0JBQXdCNXVELFVBQVU2c0QsdUJBQXVCRyxjQUMxRHArRSxLQUFLdVIsT0FBTzJ1RSxtQkFDckI5dUQsVUFBVTR1RCxzQkFBd0I1dUQsVUFBVTZzRCx1QkFBdUJLLGNBQzFEdCtFLEtBQUt1UixPQUFPNHVFLGdCQUFnQnYvRSxTQUNyQ3d3QixVQUFVNHVELHNCQUF3QjV1RCxVQUFVNnNELHVCQUF1QkksZUFFckVqdEQsVUFBVTJ1RCxNQUFNNXpFLEtBQUt2RSxjQUFjd0UsZUFDbkNnbEIsVUFBVWd2RCxjQUFnQjlpRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxxQkFDcERrMEIsVUFBVW91RCxTQUFVLENBQ3RCLENBQ0EsTUFFRixLQUFLcHVELFVBQVVzdEQsTUFBTXJCLFlBQ21CLEtBQWxDanNELFVBQVU3ZixPQUFPb3RFLGVBQ25CdnRELFVBQVV3dUQsYUFBZTUvRSxLQUFLNitFLHVCQUF1QixlQUNyRHp0RCxVQUFVd3VELE9BQU96ekUsS0FBS3ZFLGNBQWN3RSxlQUNMLEtBQTNCZ2xCLFVBQVU3ZixPQUFPZ3VFLFFBQ25CQSxNQUFRbnVELFVBQVV3dUQsT0FBT2xnRixNQUFLekosR0FBS0EsRUFBRWlKLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsS0FBT2tqQixVQUFVN2YsT0FBT2d1RSxhQUM3RCxJQUFWQSxRQUNUbnVELFVBQVU5akIsa0JBQW9CRSxXQUFXQyxXQUN2Qzh4RSxNQUFNeGpGLE9BQU91UixZQUFZcFgsTUFDekIsQ0FDRW9NLE9BQU8sRUFDUGk5RCxRQUFTamlFLEtBQUtzRyxLQUFLMkUsT0FHdkI2b0IsVUFBVW91RCxTQUFVLEtBSTFCLE1BRUYsS0FBS3B1RCxVQUFVc3RELE1BQU1wQixnQkFFbkIsR0FEQWxzRCxVQUFVMHVELGlCQUFtQjkvRSxLQUFLNitFLHVCQUF1QixtQkFDckIsSUFBaEN6dEQsVUFBVTB1RCxXQUFXbC9FLE9BQ3ZCd3dCLFVBQVVvdUQsU0FBVSxPQUdwQixHQURBcHVELFVBQVUwdUQsV0FBVzN6RSxLQUFLdkUsY0FBY3dFLGVBQ0wsS0FBL0JnbEIsVUFBVTdmLE9BQU91a0MsWUFDbkJBLFVBQVkxa0IsVUFBVTB1RCxXQUFXcGdGLE1BQUt6SixHQUFLQSxFQUFFaUosTUFBTXdDLEtBQUtreEMsVUFBVTFrQyxLQUFPa2pCLFVBQVU3ZixPQUFPdWtDLGlCQUNqRSxJQUFkQSxXQUEyQixDQUNwQzFrQixVQUFVOWpCLGtCQUFvQkUsV0FBV0MsV0FDdkNxb0MsVUFBVS81QyxPQUFPdVIsWUFBWXBYLE1BQzdCLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU2ppRSxLQUFLc0csS0FBSzJFLE9BR3ZCNm9CLFVBQVUwc0IsWUFBY2hJLFVBQVUvNUMsT0FBTytoRCxZQUN6QyxNQUFNdkQsb0JBQXNCLEdBQzVCLElBQUssTUFBTThsQyxzQkFBc0J2cUMsVUFBVS81QyxPQUFPdytDLG9CQUM1Q3pFLFVBQVUvNUMsT0FBT3crQyxvQkFBb0I4bEMscUJBQ3ZDOWxDLG9CQUFvQnJqRCxLQUFLbXBGLG9CQUdNLElBQS9COWxDLG9CQUFvQjM1QyxPQUN0QlosS0FBS3VSLE9BQU84dUUsbUJBQXFCLEdBQ08sSUFBL0I5bEMsb0JBQW9CMzVDLFNBQzdCWixLQUFLdVIsT0FBTzh1RSxtQkFBcUI5bEMsb0JBQW9CLElBRXZEbnBCLFVBQVVpdkQsbUJBQXFCOWxDLG9CQUFvQnYyQyxLQUFJb3NCLEdBQUtBLEVBQUVrd0Qsc0JBQXFCajhFLEtBQUssSUFBTS9HLEtBQUtDLEtBQUtDLFNBQVMsV0FBYSxLQUM5SCxNQUFNcW1CLE9BQVMsR0FDZml5QixVQUFVLzVDLE9BQU84bkIsYUFBZTdqQixLQUFLbzVDLGdCQUFnQnRELFVBQVUvNUMsT0FBTzhuQixRQUN0RSxJQUFLLE1BQU01YixTQUFTNnRDLFVBQVUvNUMsT0FBTzhuQixPQUNuQ0EsT0FBTzNzQixLQUFLK1EsTUFBTTdSLE1BRXBCZzdCLFVBQVV2TixPQUFTQSxPQUFPeGYsS0FBSyxNQUMvQitzQixVQUFVbXZELDJCQUE2Qi95RSxXQUFXQyxXQUNoRHFvQyxVQUFVLzVDLE9BQU93a0YscUJBQ2pCLENBQ0VqK0UsT0FBTyxFQUNQaTlELFFBQVNqaUUsS0FBS3NHLEtBQUsyRSxPQUd2QjZvQixVQUFVb3ZELHNCQUF3Qmh6RSxXQUFXQyxXQUMzQ3FvQyxVQUFVLzVDLE9BQU95a0YsZ0JBQ2pCLENBQ0VsK0UsT0FBTyxFQUNQaTlELFFBQVNqaUUsS0FBS3NHLEtBQUsyRSxPQUd2QjZvQixVQUFVb3VELFNBQVUsQ0FDdEIsQ0FHSixNQUVGLEtBQUtwdUQsVUFBVXN0RCxNQUFNbkIsbUJBR25CLEdBRkFuc0QsVUFBVTZzRCx1QkFBeUJqK0UsS0FBS2krRSx1QkFDeEM3c0QsVUFBVTR1RCxzQkFBd0I1dUQsVUFBVTZzRCx1QkFBdUJFLFlBQ3BDLEtBQTNCL3NELFVBQVU3ZixPQUFPZ3VFLFFBQ25CQSxZQUFjdi9FLEtBQUtnL0Usb0JBQW9CaC9FLEtBQUt1UixPQUFPZ3VFLFlBQzlCLElBQVZBLE9BQXVCLENBMkRoQyxHQTFESUEsTUFBTXhqRixPQUFPNm5CLGdCQUFnQjZkLE9BQU9FLFNBQVczaEMsS0FBS3VSLE9BQU8wdUUsZ0JBQzdEN3VELFVBQVU0dUQsc0JBQXdCNXVELFVBQVU2c0QsdUJBQXVCRyxjQUMxRHArRSxLQUFLdVIsT0FBTzJ1RSxtQkFDckI5dUQsVUFBVTR1RCxzQkFBd0I1dUQsVUFBVTZzRCx1QkFBdUJLLGNBQzFEdCtFLEtBQUt1UixPQUFPNHVFLGdCQUFnQnYvRSxTQUNyQ3d3QixVQUFVNHVELHNCQUF3QjV1RCxVQUFVNnNELHVCQUF1QkksZUFFckVqdEQsVUFBVW11RCxNQUFRLENBQ2hCOThFLE1BQU8sRUFDUGcvQixPQUFRODlDLE1BQU14akYsT0FBTzZuQixnQkFBZ0I2ZCxPQUFPdnJDLE1BQzVDMHRCLGdCQUFpQixDQUNmLENBQ0UvbkIsSUFBSyxNQUNMc0YsS0FBTW8rRSxNQUFNeGpGLE9BQU82bkIsZ0JBQWdCeE0sTUFBTTlnQixJQUN6QytHLE1BQU8sbUJBRVQsQ0FDRXhCLElBQUssTUFDTHNGLEtBQU1vK0UsTUFBTXhqRixPQUFPNm5CLGdCQUFnQnhNLE1BQU03Z0IsSUFDekM4RyxNQUFPLHVCQUVULENBQ0V4QixJQUFLLE1BQ0xzRixLQUFNbytFLE1BQU14akYsT0FBTzZuQixnQkFBZ0J4TSxNQUFNNWdCLElBQ3pDNkcsTUFBTyxlQUVULENBQ0V4QixJQUFLLE1BQ0xzRixLQUFNbytFLE1BQU14akYsT0FBTzZuQixnQkFBZ0J4TSxNQUFNM2dCLElBQ3pDNEcsTUFBTyxvQkFFVCxDQUNFeEIsSUFBSyxNQUNMc0YsS0FBTW8rRSxNQUFNeGpGLE9BQU82bkIsZ0JBQWdCeE0sTUFBTTFnQixJQUN6QzJHLE1BQU8scUJBRVQsQ0FDRXhCLElBQUssTUFDTHNGLEtBQU1vK0UsTUFBTXhqRixPQUFPNm5CLGdCQUFnQnhNLE1BQU16Z0IsSUFDekMwRyxNQUFPLHVCQUVULENBQ0V4QixJQUFLLE1BQ0xzRixLQUFNbytFLE1BQU14akYsT0FBTzZuQixnQkFBZ0J4TSxNQUFNeGdCLElBQ3pDeUcsTUFBTyxnQkFFVCxDQUNFeEIsSUFBSyxNQUNMc0YsS0FBTW8rRSxNQUFNeGpGLE9BQU82bkIsZ0JBQWdCeE0sTUFBTXZnQixJQUN6Q3dHLE1BQU8scUJBR1g2N0MsS0FBTSxDQUNKLzNDLEtBQU1vK0UsTUFBTXhqRixPQUFPNm5CLGdCQUFnQnhNLE1BQU04aEMsS0FDekM3N0MsTUFBTyxjQUdYK3pCLFVBQVVtcEIsb0JBQXNCLEdBQ0csS0FBL0JucEIsVUFBVTdmLE9BQU91a0MsWUFDbkJBLGdCQUFrQjkxQyxLQUFLZy9FLG9CQUFvQmgvRSxLQUFLdVIsT0FBT3VrQyxnQkFDOUIsSUFBZEEsV0FBMkIsQ0FDcEMsSUFBSyxNQUFNdXFDLHNCQUFzQnZxQyxVQUFVLzVDLE9BQU93K0Msb0JBQzVDekUsVUFBVS81QyxPQUFPdytDLG9CQUFvQjhsQyxxQkFDdkNqdkQsVUFBVW1wQixvQkFBb0JyakQsS0FBSyxDQUNqQzJFLElBQUt3a0YsbUJBQ0xqcUYsS0FBTWtILEtBQUtDLEtBQUswVyxPQUFPbWQsVUFBVW11RCxNQUFNMzdELGdCQUFnQmxrQixNQUFLMHdCLEdBQUtBLEVBQUV2MEIsTUFBUXdrRixzQkFBcUJoakYsT0FBUyxhQUkvRyt6QixVQUFVbXBCLG9CQUFvQnB1QyxLQUFLdkUsY0FBY3dFLGVBQ1YsS0FBbkNwTSxLQUFLdVIsT0FBTzh1RSxvQkFDVnZxQyxVQUFVLzVDLE9BQU8yK0MsMkJBQTJCL1ksVUFDOUN2USxVQUFVbXVELE1BQU0zN0QsZ0JBQWdCbGtCLE1BQUswd0IsR0FBS0EsRUFBRXYwQixNQUFRbUUsS0FBS3VSLE9BQU84dUUscUJBQW9CbC9FLEtBQU8yMEMsVUFBVS81QyxPQUFPMitDLDJCQUEyQnhrRCxNQUc3SSxDQUVGLElBQUl1cUYsU0FBVSxFQUNkLElBQUssTUFBTTVrRixPQUFPdTFCLFVBQVU3ZixPQUFPbXZFLFlBQ1MsS0FBdEN0dkQsVUFBVTdmLE9BQU9tdkUsWUFBWTdrRixLQUNuQixTQUFSQSxNQUNGdTFCLFVBQVVtdUQsTUFBTTk4RSxPQUFTd0IsU0FBU210QixVQUFVN2YsT0FBT212RSxZQUFZN2tGLEtBQU0sS0FHdkU0a0YsU0FBVSxFQUdWemdGLEtBQUt1UixPQUFPOHVFLHFCQUNkanZELFVBQVVpdkQsbUJBQXFCcmdGLEtBQUt1UixPQUFPOHVFLG1CQUFtQkMsc0JBRTNERyxTQUFXemdGLEtBQUt1UixPQUFPc3RDLEtBQU8sS0FDN0IsQ0FBQ3p0QixVQUFVNnNELHVCQUF1QkUsWUFBYS9zRCxVQUFVNnNELHVCQUF1QkksY0FBZWp0RCxVQUFVNnNELHVCQUF1QkssZUFBZXQ3RSxTQUFTb3VCLFVBQVU0dUQsd0JBRTNKNXVELFVBQVVtdUQsTUFBTTk4RSxNQUFNdVAsYUFBZW9mLFVBQVVtdUQsTUFBTTk5QyxPQUFPenZCLGNBRHJFb2YsVUFBVW91RCxTQUFVLEVBSzFCLENBRUYsTUFFRixLQUFLcHVELFVBQVVzdEQsTUFBTWxCLGdCQUNuQnBzRCxVQUFVdXZELDJCQUE2QnJqRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFDakVrMEIsVUFBVW91RCxTQUFVLEVBQ3BCcHVELFVBQVVxUSxPQUFTLENBQUMsRUFDcEIsSUFBSyxNQUFNNWxDLE9BQU9tRSxLQUFLdVIsT0FBTzZ0RSxlQUM1Qmh1RCxVQUFVcVEsT0FBTzVsQyxLQUFPLENBQ3RCM0YsTUFBTytOLFNBQVNqRSxLQUFLdVIsT0FBT212RSxZQUFZN2tGLEtBQU0sSUFBTW9JLFNBQVNqRSxLQUFLdVIsT0FBTzZ0RSxlQUFldmpGLEtBQU0sSUFDOUZxSCxJQUFtRCxFQUE3Q2UsU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBTSxJQUM3Q3dCLE1BQU91SyxjQUFjOGIsdUJBQXVCN25CLEtBQUt3QixPQU1yRCxRQUhzRCxJQUEzQzJDLEtBQUt1UixPQUFPOHRFLHVCQUF1QnhvRixLQUF3Qm1KLEtBQUt1UixPQUFPOHRFLHVCQUF1QnhvRixJQUFJdStCLFNBQzNHaEUsVUFBVW91RCxTQUFVLFFBRW1DLElBQTlDeC9FLEtBQUt1UixPQUFPOHRFLHVCQUF1QkMsT0FBd0IsQ0FDcEVsdUQsVUFBVXd2RCxZQUFjLEVBQ3hCLElBQUssTUFBTS9rRixPQUFPbUUsS0FBS3VSLE9BQU84dEUsdUJBQXVCQyxPQUFPcGdFLEtBQzFEa1MsVUFBVXd2RCxZQUFjeHZELFVBQVV3dkQsWUFBYzM4RSxTQUFTakUsS0FBS3VSLE9BQU82dEUsZUFBZXZqRixLQUFNLElBRTVGdTFCLFVBQVV5dkQsV0FBYTdnRixLQUFLdVIsT0FBTzh0RSx1QkFBdUJDLE9BQU9wZ0UsS0FBS2xiLEtBQUlrd0QsR0FBSzUyRCxLQUFLQyxLQUFLQyxTQUFTLFVBQVkwMkQsRUFBRXRrRCxpQkFBZ0J2TCxLQUFLLE1BQU1zTCxRQUFRLGVBQWdCLEtBQU9yUyxLQUFLQyxLQUFLQyxTQUFTLFdBQWEsT0FBT21TLFFBQVEsb0JBQXFCLFFBQzFPeWhCLFVBQVV3dkQsY0FBZ0I1Z0YsS0FBS3VSLE9BQU84dEUsdUJBQXVCQyxPQUFPNzhFLFFBQ3RFMnVCLFVBQVVvdUQsU0FBVSxFQUV4QixNQUN5RCxJQUE5Q3gvRSxLQUFLdVIsT0FBTzh0RSx1QkFBdUJwekUsU0FDNUNtbEIsVUFBVTB2RCxXQUFheGpGLEtBQUtDLEtBQUtDLFNBQVMsVUFBWXdDLEtBQUt1UixPQUFPOHRFLHVCQUF1QnB6RSxPQUFPaVQsS0FBS3RQLHFCQUVoRCxJQUE1QzVQLEtBQUt1UixPQUFPOHRFLHVCQUF1Qm5tQyxPQUM1QzluQixVQUFVMnZELFVBQVkzK0UsS0FBS2EsSUFBSWpELEtBQUt1UixPQUFPbXZFLFlBQVl4bkMsS0FBTWw1QyxLQUFLdVIsT0FBTzZ0RSxlQUFlbG1DLE1BQ2hELElBQXBDbDVDLEtBQUt1UixPQUFPNnRFLGVBQWVsbUMsT0FDN0I5bkIsVUFBVW91RCxTQUFVLElBR3hCLE1BRUYsS0FBS3B1RCxVQUFVc3RELE1BQU1qQixxQkFDbkJyc0QsVUFBVXFRLE9BQVMsQ0FBQyxFQUNwQixJQUFLLE1BQU01bEMsT0FBT21FLEtBQUt1UixPQUFPNnRFLGVBQzVCaHVELFVBQVVxUSxPQUFPNWxDLEtBQU8sQ0FDdEIzRixNQUFPK04sU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBTSxJQUFNb0ksU0FBU2pFLEtBQUt1UixPQUFPNnRFLGVBQWV2akYsS0FBTSxJQUM5RjAzRCxPQUFRLEdBQ1IwVixPQUFRLElBQ1I1ckUsTUFBT3VLLGNBQWM4Yix1QkFBdUI3bkIsS0FBS3dCLE9BR3JEK3pCLFVBQVVxUSxPQUFPdGxDLEdBQUssQ0FDcEJqRyxNQUFPZzZCLFNBQVNzdUIsc0JBQXNCcHRCLFVBQVVxUSxRQUNoRDh4QixPQUFRLEdBQ1IwVixPQUFRLEdBQ1I1ckUsTUFBTyxxQkFFTHZCLE1BQU1zMUIsVUFBVXFRLE9BQU90bEMsR0FBR2pHLFFBQVVnRyxPQUFPazFCLFVBQVVxUSxPQUFPdGxDLEdBQUdqRyxRQUFVLEtBQzNFazdCLFVBQVVxUSxPQUFPdGxDLEdBQUdvM0QsT0FBUyxLQUUvQm5pQyxVQUFVcVEsT0FBT3lLLE1BQVEsQ0FDdkJoMkMsTUFBT2c2QixTQUFTd3VCLHlCQUF5QnR0QixVQUFVcVEsUUFDbkQ4eEIsT0FBUSxHQUNSMFYsT0FBUSxHQUNSNXJFLE1BQU8sY0FFTG5CLE9BQU9rMUIsVUFBVXFRLE9BQU95SyxNQUFNaDJDLFFBQVUsSUFDMUNrN0IsVUFBVXFRLE9BQU95SyxNQUFNcW5CLE9BQVMsS0FFbENuaUMsVUFBVXFRLE9BQU8wUixHQUFLLENBQ3BCajlDLE1BQU9nNkIsU0FBU2tzQixzQkFBc0JockIsVUFBVXFRLE9BQVEsYUFDeEQ4eEIsT0FBUSxHQUNSMFYsT0FBUSxHQUNSNXJFLE1BQU8sa0JBRVQrekIsVUFBVXFRLE9BQU8wUixHQUFHb2dCLE9BQVNuaUMsVUFBVXFRLE9BQU8wUixHQUFHajlDLE1BQVEsSUFDekRrN0IsVUFBVXFRLE9BQU84UixHQUFLLENBQ3BCcjlDLE1BQU9nNkIsU0FBU3FzQixzQkFBc0JuckIsVUFBVXFRLFFBQ2hEOHhCLE9BQVEsR0FDUjBWLE9BQVEsR0FDUjVyRSxNQUFPLG9CQUVUK3pCLFVBQVVxUSxPQUFPOFIsR0FBR2dnQixPQUFTbmlDLFVBQVVxUSxPQUFPOFIsR0FBR3I5QyxNQUFRLElBQ3pEazdCLFVBQVVxUSxPQUFPcFgsSUFBTSxDQUNyQm4wQixNQUFPazdCLFVBQVVxUSxPQUFPN3FDLElBQUlWLE1BQzVCcTlELE9BQVEsR0FDUjBWLE9BQVEsTUFDUjVyRSxNQUFPLGVBRVQrekIsVUFBVXFRLE9BQU82SyxJQUFNLENBQ3JCcDJDLE1BQU9nNkIsU0FBUzB1Qix1QkFBdUJ4dEIsVUFBVXFRLE9BQVEsWUFBYXpoQyxLQUFLdVIsT0FBT3N0QyxLQUNsRjBVLE9BQVEsR0FDUjBWLE9BQVEsR0FDUjVyRSxNQUFPLGlCQUVUK3pCLFVBQVVvdUQsU0FBVSxFQUNwQixNQUVGLEtBQUtwdUQsVUFBVXN0RCxNQUFNaEIsaUJBR25CLEdBRkF0c0QsVUFBVXl1RCxrQkFBb0I3L0UsS0FBSzYrRSx1QkFBdUIsb0JBQzFEenRELFVBQVV5dUQsWUFBWTF6RSxLQUFLdkUsY0FBY3dFLGVBQ0wsS0FBaENnbEIsVUFBVTdmLE9BQU9za0MsYUFDbkJBLFdBQWF6a0IsVUFBVXl1RCxZQUFZbmdGLE1BQUt6SixHQUFLQSxFQUFFaUosTUFBTXdDLEtBQUtreEMsVUFBVTFrQyxLQUFPa2pCLFVBQVU3ZixPQUFPc2tDLGtCQUNsRSxJQUFmQSxZQUE0QixDQUNyQ3prQixVQUFVOWpCLGtCQUFvQkUsV0FBV0MsV0FDdkNvb0MsV0FBVzk1QyxPQUFPdVIsWUFBWXBYLE1BQzlCLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU2ppRSxLQUFLc0csS0FBSzJFLE9BR3ZCNm9CLFVBQVVtckQsdUJBQXlCZixvQkFBb0JlLHVCQUF1QjFtQyxXQUFXOTVDLE9BQU9pL0MsdUJBQ2hHNXBCLFVBQVV3cEIsYUFBZS9FLFdBQVc5NUMsT0FBTzYrQyxhQUMzQ3hwQixVQUFVd2tCLFNBQVdDLFdBQVc5NUMsT0FBTzY1QyxTQUN2Q3hrQixVQUFVNHZELGFBQWVuckMsV0FBVzk1QyxPQUFPaWxGLGFBQzNDNXZELFVBQVV2TixhQUFlN2pCLEtBQUtvNUMsZ0JBQWdCdkQsV0FBVzk1QyxPQUFPOG5CLFFBQ2hFdU4sVUFBVTlzQixPQUFTLENBQUMsRUFDcEIsSUFBSyxJQUFJK1ksTUFBUSxFQUFHQSxNQUFRdzRCLFdBQVc5NUMsT0FBT3VJLE9BQU8xRCxPQUFReWMsUUFDM0QrVCxVQUFVOXNCLE9BQU8rWSxPQUFTLENBQ3hCL2QsUUFBU3UyQyxXQUFXOTVDLE9BQU91SSxPQUFPK1ksT0FBTy9kLFFBQ3pDdWtCLE9BQVEsSUFFVnVOLFVBQVU5c0IsT0FBTytZLE9BQU93RyxhQUFlN2pCLEtBQUtvNUMsZ0JBQWdCdkQsV0FBVzk1QyxPQUFPdUksT0FBTytZLE9BQU93RyxRQUU5RnVOLFVBQVVxUSxPQUFTLEVBQ25CLE1BQU1uaUMsUUFBVSxHQUNoQixJQUFLLE1BQU96RCxJQUFLZ2hGLFNBQVVqOUUsT0FBTzJLLFFBQVFzckMsV0FBVzk1QyxPQUFPaS9DLHVCQUN0RDZoQyxNQUFNdm5FLFdBQ0p1bkUsTUFBTXQ4QyxTQUNSamhDLFFBQVFwSSxLQUFLMmxGLE1BQU0xbUYsWUFBYzhOLFNBQVNqRSxLQUFLdVIsT0FBT212RSxZQUFZN2tGLEtBQU0sSUFBTW9JLFNBQVNqRSxLQUFLdVIsT0FBTzZ0RSxlQUFldmpGLEtBQU0sTUFFeEh1MUIsVUFBVXFRLFFBQVVvN0MsTUFBTTFtRixZQUFjOE4sU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBTSxJQUFNb0ksU0FBU2pFLEtBQUt1UixPQUFPNnRFLGVBQWV2akYsS0FBTSxNQUlqSXlELFFBQVFzQixPQUFTLElBQ25Cd3dCLFVBQVVxUSxRQUFVci9CLEtBQUthLE9BQU8zRCxVQUVsQzh4QixVQUFVb3VELFNBQVUsQ0FDdEIsQ0FFRixNQUVGLEtBQUtwdUQsVUFBVXN0RCxNQUFNWixrQkFDbkIxc0QsVUFBVXk4QyxjQUFxRSxJQUFsRDd0RSxLQUFLdVIsT0FBTzB2RSxXQUFXamhGLEtBQUt3K0Usa0JBQ3JEcHRELFVBQVV5OEMsU0FDWno4QyxVQUFVOHZELGFBQWVsaEYsS0FBS3VSLE9BQU8wdkUsV0FBV2poRixLQUFLdytFLGtCQUFrQnY0RSxLQUFLN1AsS0FFNUVnN0IsVUFBVTh2RCxhQUFlLEdBRTNCOXZELFVBQVVvdUQsU0FBVSxFQUNwQixNQUVGLEtBQUtwdUQsVUFBVXN0RCxNQUFNZix1QkFDbkJ2c0QsVUFBVTdWLFFBQVUsRUFDcEI2VixVQUFVOWIsU0FBVyxFQUNyQjhiLFVBQVU2dkQsV0FBYSxHQUN2QixJQUFLLE1BQU1wbEYsT0FBT21FLEtBQUt1UixPQUFPMHZFLFdBQVksQ0FDeEMsSUFBSTNwRSxNQUFRLFFBQ1osTUFBTTZwRSxLQUFPL3ZELFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLdmdGLE9BQzdDd2dGLFdBQWFod0QsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLcUQsTUFBTWtpRixXQUN0REEsWUFDRmh3RCxVQUFVNnZELFdBQVcvcEYsS0FBSyxDQUN4QjJFLElBQ0F3aEIsT0FBUSxFQUNSam5CLEtBQU1nN0IsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLb0ssS0FBSzdQLEtBQzVDa2hCLE1BQ0FxRCxRQUFRLEVBQ1IwbUUsZ0JBQWdCLEVBQ2hCRCxZQUFZLEVBQ1pFLFlBQVksSUFHaEIsSUFBSyxJQUFJamtFLE1BQVEsRUFBR0EsTUFBUThqRSxLQUFNOWpFLFFBQVMsQ0FDekMsSUFBSWlrRSxZQUFhLEVBQ2Jsd0QsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBT2trRSxxQkFDL0NqcUUsTUFBUSxVQUNKOHBFLGFBQ0ZFLFlBQWEsR0FFZmx3RCxVQUFVN1YsWUFDa0UsSUFBbkU2VixVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPbWtFLG1CQUN0RGxxRSxNQUFROFosVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBT21rRSxrQkFDakRKLGFBQ0ZFLFlBQWEsSUFHZmhxRSxNQUFRLFFBRVYsSUFBSXFELE9BQVN5VyxVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPb2tFLGlCQUN0REgsYUFDRjNtRSxRQUFTLEdBRVgsSUFBSTFULGVBQWlCbXFCLFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS29LLEtBQUtsSyxPQUFPa0wsZUFDOURILFVBQVlzcUIsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLb0ssS0FBS2xLLE9BQU8rSyxVQUN6RDQ2RSxRQUFTLEVBQ1RDLFlBQWEsRUFDb0QsaUJBQTFEdndELFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU8vSCxVQUN0RG9zRSxRQUFTLEVBQ1Q1NkUsVUFBWXNxQixVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPL0gsV0FDVSxJQUExRDhiLFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU8vSCxXQUN0RG9zRSxRQUFTLEVBQ1R6NkUsZUFBaUJtcUIsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBTy9ILFNBQVN2WixPQUFPa0wsZUFDOUVILFVBQVlzcUIsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBTy9ILFNBQVN2WixPQUFPK0ssWUFFdkU2VCxRQUFXMm1FLFlBQWNJLFNBQzNCdHdELFVBQVU5YixXQUVaLElBQUlsZixLQUFPZzdCLFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS29LLEtBQUs3UCxNQUM3Q3lGLE1BQVFtRSxLQUFLdytFLG1CQUVMOEMsWUFBY0ksVUFEeEJ0ckYsS0FBTzZRLGVBQWlCLEtBQU9ILFVBQVksTUFJeEN3NkUsWUFBY0ksU0FDakJDLFlBQWN2d0QsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBT3VrRSxpQkFFN0R4d0QsVUFBVTZ2RCxXQUFXL3BGLEtBQUssQ0FDeEIyRSxJQUNBd2hCLE1BQ0FqbkIsS0FDQWtoQixNQUFPQSxNQUFNdEYsV0FDYjJJLE9BQ0EwbUUsZUFBZ0Jqd0QsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBT2drRSxlQUM3REQsWUFBWSxFQUNaRSxXQUNBSSxPQUNBQyxXQUNBMTZFLGVBQ0FILFdBRUosQ0FDRixDQUNBc3FCLFVBQVVudUIsS0FBT2dCLFNBQVNtdEIsVUFBVTdWLFFBQVMsS0FBTyxJQUFNdFgsU0FBU210QixVQUFVN2YsT0FBT3FrQyxTQUFVLEtBQU8sR0FBS2gyQyxPQUFPSixPQUFPNHhCLFVBQVU3ZixPQUFPc3dFLGtCQUFrQjUxRSxRQUFPLENBQUNoVyxFQUFHMEosSUFBTTFKLEdBQUtnTyxTQUFTdEUsRUFBRyxLQUFPLElBQUksR0FDeE15eEIsVUFBVTZ2RCxXQUFXOTBFLEtBQUt2RSxjQUFjd0UsZUFDcENnbEIsVUFBVTliLFdBQWE4YixVQUFVbnVCLE1BQ25DbXVCLFVBQVVvdUQsU0FBVSxHQUV0QixNQUVGLEtBQUtwdUQsVUFBVXN0RCxNQUFNZCxzQkFDbkJ4c0QsVUFBVW51QixJQUFNLEVBQ2hCbXVCLFVBQVU5YixTQUFXLEVBQ3JCOGIsVUFBVTZ2RCxXQUFhLEdBQ3ZCLElBQUssTUFBTXBsRixPQUFPbUUsS0FBS3VSLE9BQU8wdkUsV0FBWSxDQUN4QyxJQUFJM3BFLE1BQVEsUUFDWixNQUFNNnBFLEtBQU8vdkQsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUt2Z0YsT0FDN0N3Z0YsV0FBYWh3RCxVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtxRCxNQUFNa2lGLFdBQ3REQSxZQUNGaHdELFVBQVU2dkQsV0FBVy9wRixLQUFLLENBQ3hCMkUsSUFDQXdoQixPQUFRLEVBQ1JqbkIsS0FBTWc3QixVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtvSyxLQUFLN1AsS0FDNUNraEIsTUFDQXFELFFBQVEsRUFDUjBtRSxnQkFBZ0IsRUFDaEJELFlBQVksRUFDWkUsWUFBWSxJQUdoQixJQUFLLElBQUlqa0UsTUFBUSxFQUFHQSxNQUFROGpFLEtBQU05akUsUUFBUyxDQUN6QyxJQUFJaWtFLFlBQWEsRUFDYmx3RCxVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPeWtFLG9CQUMvQ3hxRSxNQUFRLFVBQ0o4cEUsYUFDRkUsWUFBYSxHQUVmbHdELFVBQVVudUIsT0FFVnFVLE1BQVEsUUFFVixJQUFJcUQsT0FBU3lXLFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU91a0UsZ0JBQ3RETixhQUNGM21FLFFBQVMsR0FFWCxJQUFJMVQsZUFBaUJtcUIsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLb0ssS0FBS2xLLE9BQU9rTCxlQUM5REgsVUFBWXNxQixVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtvSyxLQUFLbEssT0FBTytLLFVBQ3pENDZFLFFBQVMsRUFDVEMsWUFBYSxFQUNvRCxpQkFBMUR2d0QsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBTy9ILFVBQ3REb3NFLFFBQVMsRUFDVDU2RSxVQUFZc3FCLFVBQVU3ZixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU8vSCxXQUNVLElBQTFEOGIsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBTy9ILFdBQ3REb3NFLFFBQVMsRUFDVHo2RSxlQUFpQm1xQixVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPL0gsU0FBU3ZaLE9BQU9rTCxlQUM5RUgsVUFBWXNxQixVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPL0gsU0FBU3ZaLE9BQU8rSyxZQUV2RTZULFFBQVcybUUsWUFBY0ksU0FDM0J0d0QsVUFBVTliLFdBRVosSUFBSWxmLEtBQU9nN0IsVUFBVTdmLE9BQU8wdkUsV0FBV3BsRixLQUFLb0ssS0FBSzdQLE1BQzdDeUYsTUFBUW1FLEtBQUt3K0UsbUJBRUw4QyxZQUFjSSxVQUR4QnRyRixLQUFPNlEsZUFBaUIsS0FBT0gsVUFBWSxNQUl4Q3c2RSxZQUFjSSxTQUNqQkMsWUFBY3Z3RCxVQUFVN2YsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPb2tFLGtCQUU3RHJ3RCxVQUFVNnZELFdBQVcvcEYsS0FBSyxDQUN4QjJFLElBQ0F3aEIsTUFDQWpuQixLQUNBa2hCLE1BQU9BLE1BQU10RixXQUNiMkksT0FDQTBtRSxnQkFBZ0IsRUFDaEJELFlBQVksRUFDWkUsV0FDQUksT0FDQUMsV0FDQTE2RSxlQUNBSCxXQUVKLENBQ0YsQ0FDQXNxQixVQUFVNnZELFdBQVc5MEUsS0FBS3ZFLGNBQWN3RSxlQUNwQ2dsQixVQUFVOWIsV0FBYThiLFVBQVVudUIsTUFDbkNtdUIsVUFBVW91RCxTQUFVLEdBRXRCLE1BRUYsS0FBS3B1RCxVQUFVc3RELE1BQU1iLG1CQXFCbkIsR0FwQkF6c0QsVUFBVXZOLE9BQVMsR0FDbkJ1TixVQUFVMndELG1CQUFxQi9oRixLQUFLdVIsT0FBT3FwQyxhQUFhMzNDLElBQU0sR0FDOURtdUIsVUFBVXdrQixTQUFXLENBQ25COTBDLE1BQU8sRUFDUDJCLE1BQU8sR0FBS3dCLFNBQVNqRSxLQUFLdVIsT0FBT212RSxZQUFZL3BGLElBQUssSUFBTXNOLFNBQVNqRSxLQUFLdVIsT0FBTzZ0RSxlQUFlem9GLElBQUssS0FDakdxckYsVUFBVyxHQUViNXdELFVBQVV5a0IsV0FBYSxDQUNyQi8wQyxNQUFPLEVBQ1AyQixNQUFPLEVBQ1B1L0UsVUFBVyxHQUViNXdELFVBQVUwa0IsVUFBWSxDQUNwQmgxQyxNQUFPLEVBQ1AyQixNQUFPLEVBQ1B1L0UsVUFBVyxHQUVrQixLQUEzQjV3RCxVQUFVN2YsT0FBT2d1RSxRQUNuQkcsb0JBQXNCMS9FLEtBQUtnL0Usb0JBQW9CNXRELFVBQVU3ZixPQUFPZ3VFLFFBQVF4akYsT0FBTzQ5QyxTQUFTbjZDLE9BQU9vQixPQUFTLEdBRXRFLEtBQWhDd3dCLFVBQVU3ZixPQUFPc2tDLGFBQ25CQSxpQkFBbUI3MUMsS0FBS2cvRSxvQkFBb0JoL0UsS0FBS3VSLE9BQU9za0MsWUFDcERBLFlBQVksQ0FDZCxNQUFNdjJDLFFBQVUsR0FDaEIsSUFBSyxNQUFPekQsSUFBS2doRixTQUFVajlFLE9BQU8ySyxRQUFRc3JDLFdBQVc5NUMsT0FBT2kvQyx1QkFDdEQ2aEMsTUFBTXZuRSxXQUNKdW5FLE1BQU10OEMsU0FDUmpoQyxRQUFRcEksS0FBSzJsRixNQUFNMW1GLFlBQWM4TixTQUFTakUsS0FBS3VSLE9BQU9tdkUsWUFBWTdrRixLQUFNLElBQU1vSSxTQUFTakUsS0FBS3VSLE9BQU82dEUsZUFBZXZqRixLQUFNLE1BRXhIdTFCLFVBQVV5a0IsV0FBV3B6QyxPQUFTbzZFLE1BQU0xbUYsWUFBYzhOLFNBQVNqRSxLQUFLdVIsT0FBT212RSxZQUFZN2tGLEtBQU0sSUFBTW9JLFNBQVNqRSxLQUFLdVIsT0FBTzZ0RSxlQUFldmpGLEtBQU0sTUFJM0l5RCxRQUFRc0IsT0FBUyxJQUNuQnd3QixVQUFVeWtCLFdBQVdwekMsT0FBU0wsS0FBS2EsT0FBTzNELFNBRTlDLENBRUYsR0FBOEIsS0FBMUJVLEtBQUt1UixPQUFPdWtDLFVBQWtCLENBQ2hDLE1BQU1BLGdCQUFrQng0QyxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNQyxVQUFVcGpCLEtBQUt1UixPQUFPdWtDLFdBQzNDLElBQXJCQSxVQUFVbDFDLFNBQ1p3d0IsVUFBVTBrQixVQUFVcnpDLE1BQVFxekMsVUFBVSxHQUFHLzVDLE9BQU8raEQsWUFFcEQsQ0FDQSxHQUFJbCtDLE9BQU9tRSxLQUFLL0QsS0FBS3VSLE9BQU8wdkUsWUFBWXJnRixPQUFTLEVBQUcsQ0FDbEQsSUFBSyxNQUFNL0UsT0FBT21FLEtBQUt1UixPQUFPMHZFLFdBQVksQ0FDeEMsTUFBTWg1RSxNQUFRakksS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUNyQyxJQUFLLElBQUl3aEIsTUFBUSxFQUFHb3hELEdBQUt4bUUsTUFBTWs1RSxLQUFLdmdGLE9BQVF5YyxNQUFRb3hELEdBQUlweEQsUUFBUyxDQUMvRCxNQUFNMm5DLElBQU0vOEMsTUFBTWs1RSxLQUFLOWpFLE9BQ3ZCLElBQUtwVixNQUFNL0ksTUFBTWtpRixhQUErQixJQUFqQnA4QixJQUFJMXZDLFNBQW9CLENBQ3JELElBQUlyUCxLQUFPckgsUUFBUUMsTUFBTXdPLFVBQVVwRixNQUFNaEMsT0FDcEIsSUFBakIrK0MsSUFBSTF2QyxVQUE4QyxpQkFBakIwdkMsSUFBSTF2QyxXQUN2Q3JQLEtBQU9ySCxRQUFRQyxNQUFNd08sVUFBVTIzQyxJQUFJMXZDLFdBRXJDLElBQUk3SyxLQUFPeEUsS0FBS2xLLE9BQU8wTyxLQUN2QixJQUFLdk8sT0FBT2d4RCxVQUFVemlELE1BQ3BCLElBQUssTUFBTTVPLE9BQU9tRSxLQUFLdVIsT0FBT212RSxZQUFhLENBQ3pDLE1BQU1wUCxNQUFRLElBQUkzcEUsT0FBTyxJQUFNOUwsSUFBSyxLQUNwQzRPLEtBQU9BLEtBQUtrRixRQUFRMmhFLE1BQU9ydEUsU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBTSxJQUFNb0ksU0FBU2pFLEtBQUt1UixPQUFPNnRFLGVBQWV2akYsS0FBTSxJQUNwSCxDQUVHSyxPQUFPZ3hELFVBQVV6aUQsUUFDcEJBLEtBQU9ySSxLQUFLMEksTUFBTSxJQUFJNE0sWUFBWSxJQUFNak4sS0FBTyxLQUFPN0wsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQXFCLGVBQWIsWUFBcUQsQ0FBRThZLFVBQVUsRUFBTTlNLFVBQVUsSUFBUXRJLFFBRXBNLElBQUl3L0UsWUFBY2grRSxTQUFTd0csS0FBTSxJQUNqQyxHQUFJdk8sT0FBTzhvRCxJQUFJeEosZ0JBQWtCLEVBQUcsQ0FDbEMsTUFBTTBtQyxJQUFNaG1GLE9BQU84b0QsSUFBSXhKLGdCQUN2QnBxQixVQUFVd2tCLFNBQVM5MEMsT0FBU29oRixJQUM1QkQsYUFBNEJDLEdBQzlCLENBQ0EsR0FBSWhtRixPQUFPOG9ELElBQUl6SixrQkFBb0IsRUFBRyxDQUNwQyxNQUFNMm1DLElBQU1obUYsT0FBTzhvRCxJQUFJekosa0JBQ3ZCbnFCLFVBQVV5a0IsV0FBVy8wQyxPQUFTb2hGLElBQzlCRCxhQUE0QkMsR0FDOUIsQ0FDQSxHQUFJaG1GLE9BQU84b0QsSUFBSTFKLGlCQUFtQixFQUFHLENBQ25DLE1BQU00bUMsSUFBTWhtRixPQUFPOG9ELElBQUkxSixpQkFDdkJscUIsVUFBVTBrQixVQUFVaDFDLE9BQVNvaEYsSUFDN0JELGFBQTRCQyxHQUM5QixDQUNBLEdBQUlobUYsT0FBTzhvRCxJQUFJakgsa0JBQW9CLEVBQUcsQ0FFcENra0MsYUFEWS9sRixPQUFPOG9ELElBQUlqSCxpQkFFekIsQ0FDQSxJQUFJM25ELEtBQU82UCxLQUFLN1AsS0FDWnlGLE1BQVFtRSxLQUFLdytFLGlCQUNmcG9GLEtBQU82UCxLQUFLbEssT0FBT2tMLGVBQWlCLEtBQU9oQixLQUFLbEssT0FBTytLLFVBQVksSUFDMURtQixNQUFNL0ksTUFBTW1pRixnQkFDckJqckYsS0FBT0EsS0FBTyxLQUFPNEosS0FBS3VSLE9BQU9xcEMsYUFBYTEzQyxJQUFNLE1BQVFsRCxLQUFLdVIsT0FBT3FwQyxhQUFhMzNDLElBQU0sSUFDdkZnL0UsYUFBZWppRixLQUFLdVIsT0FBT3FwQyxhQUFhMTNDLEtBQU8rK0UsYUFBZWppRixLQUFLdVIsT0FBT3FwQyxhQUFhMzNDLE1BQ3pGbXVCLFVBQVUyd0Qsa0JBQW1CLElBRUUsaUJBQWpCLzhCLElBQUkxdkMsV0FDcEJsZixLQUFPNlAsS0FBS2xLLE9BQU9rTCxlQUFpQixLQUFPKzlDLElBQUkxdkMsU0FBVyxLQUU1RDhiLFVBQVV2TixPQUFPM3NCLEtBQUssQ0FDcEIyRSxJQUNBd2hCLE1BQ0FqbkIsS0FDQStyRixhQUFjbjlCLElBQUl5OEIsaUJBQ2xCVyxZQUFhcDlCLElBQUk0OEIsZ0JBQ2pCbjNFLEtBQ0Erd0MsZUFBZ0J3SixJQUFJeEosZUFDcEJELGlCQUFrQnlKLElBQUl6SixpQkFDdEJELGdCQUFpQjBKLElBQUkxSixnQkFDckJ5QyxpQkFBa0JpSCxJQUFJakgsaUJBQ3RCa2tDLFlBQ0FJLGlCQUFrQjNDLGNBQWdCN2pGLE1BQVFtRSxLQUFLdStFLG1CQUVuRCxDQUNGLENBQ0YsQ0FDQW50RCxVQUFVdk4sT0FBTzFYLEtBQUt2RSxjQUFjd0UsZUFDaENnbEIsVUFBVTJ3RCxtQkFDWjN3RCxVQUFVb3VELFNBQVUsRUFFeEIsQ0FFQXB1RCxVQUFVd2tCLFNBQVNvc0MsVUFBWTV3RCxVQUFVd2tCLFNBQVNuekMsTUFBUTJ1QixVQUFVd2tCLFNBQVM5MEMsTUFDN0Vzd0IsVUFBVXlrQixXQUFXbXNDLFVBQVk1d0QsVUFBVXlrQixXQUFXcHpDLE1BQVEydUIsVUFBVXlrQixXQUFXLzBDLE1BQ25Gc3dCLFVBQVUwa0IsVUFBVWtzQyxVQUFZNXdELFVBQVUwa0IsVUFBVXJ6QyxNQUFRMnVCLFVBQVUwa0IsVUFBVWgxQyxNQUNoRixNQUVGLEtBQUtzd0IsVUFBVXN0RCxNQUFNWCxlQUNuQixDQUNFLE1BQU11RSxxQkFBdUJ0aUYsS0FBS3VSLE9BQU9neEUsaUJBQ3pDbnhELFVBQVU2a0QsWUFBYyxDQUFDLEVBQ3pCLElBQUssSUFBSTU0RCxNQUFRLEVBQUdBLE1BQVFyZCxLQUFLdVIsT0FBT21vQyxZQUFZOTRDLE9BQVF5YyxRQUMxRCtULFVBQVU2a0QsWUFBWTU0RCxPQUFTLENBQzdCQSxNQUNBam5CLEtBQU00SixLQUFLdVIsT0FBT21vQyxZQUFZcjhCLE9BQU9qbkIsS0FDckNnaEIsTUFBUTlaLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU0yM0IsZ0JBQWdCOTZDLEtBQUt1UixPQUFPbW9DLFlBQVlyOEIsT0FBT3hoQixJQUFLeW1GLGdCQUFnQjFoRixPQUFTWixLQUFLdVIsT0FBT21vQyxZQUFZcjhCLE9BQU94aEIsSUFBTSxHQUNoSjNGLE1BQU84SixLQUFLdVIsT0FBT21vQyxZQUFZcjhCLE9BQU9ubkIsTUFHNUMsQ0FDQWs3QixVQUFVb3VELFNBQVUsRUFDcEJwdUQsVUFBVXF1RCxhQUFlbmlGLEtBQUtzRyxLQUFLNCtFLE1BQVFyeUUsTUFBTXN5RSxpQkFBaUJDLGFBQWFDLFlBQy9FLE1BRUYsS0FBS3Z4RCxVQUFVc3RELE1BQU1WLFlBQ25CNXNELFVBQVVvdUQsU0FBVSxFQUNwQnB1RCxVQUFVcXVELGNBQWUsRUFJN0IsT0FBT3J1RCxTQUNULENBRUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUN4QkEsS0FBSzJvRSxVQUFTcGlGLEdBQUssWUFBWWt0RCxNQUFNbHRELEVBQUV5a0IsUUFBVXprQixFQUFFcWlGLFlBQVlDLFVBQTBELE1BQTdDdGlGLEVBQUUrTyxTQUFXL08sRUFBRWdjLE9BQVNoYyxFQUFFdWlGLFVBQVksS0FDbEg5b0UsS0FBS3ZhLEtBQUsscUJBQXFCOUQsT0FBT29FLEtBQUsreEIsZ0JBQWdCOTRCLEtBQUsrRyxPQUNoRWlhLEtBQUt2YSxLQUFLLHdCQUF3QnN5QixNQUFNaHlCLEtBQUs0Z0Msc0JBQXNCM25DLEtBQUsrRyxPQUN4RWlhLEtBQUt2YSxLQUFLLCtCQUErQnN5QixNQUFNaHlCLEtBQUtnakYsNEJBQTRCL3BGLEtBQUsrRyxPQUNyRmlhLEtBQUt2YSxLQUFLLDRCQUE0QnN5QixNQUFNaHlCLEtBQUs2Z0MsMEJBQTBCNW5DLEtBQUsrRyxPQUNoRmlhLEtBQUt2YSxLQUFLLDRCQUE0QnN5QixNQUFNaHlCLEtBQUs4Z0MsMEJBQTBCN25DLEtBQUsrRyxPQUNoRmlhLEtBQUt2YSxLQUFLLCtCQUErQnN5QixNQUFNaHlCLEtBQUtpakYsNEJBQTRCaHFGLEtBQUsrRyxPQUNyRmlhLEtBQUt2YSxLQUFLLG1CQUFtQnN5QixNQUFNaHlCLEtBQUtrakYsV0FBV2pxRixLQUFLK0csT0FDeERpYSxLQUFLdmEsS0FBSyxzQkFBc0JzeUIsTUFBTWh5QixLQUFLbWpGLGNBQWNscUYsS0FBSytHLE9BQzlEaWEsS0FBS3ZhLEtBQUssbUJBQW1Cc3lCLE1BQU1oeUIsS0FBS29qRixXQUFXbnFGLEtBQUsrRyxPQUN4RGlhLEtBQUt2YSxLQUFLLG9CQUFvQnN5QixNQUFNaHlCLEtBQUtxakYsWUFBWXBxRixLQUFLK0csT0FDMURpYSxLQUFLdmEsS0FBSyw4QkFBOEJrbUUsS0FBSzVsRSxLQUFLK3hCLGdCQUFnQjk0QixLQUFLK0csT0FDdkVpYSxLQUFLdmEsS0FBSywyQ0FBMkNrbUUsS0FBSzVsRSxLQUFLc2pGLDRCQUE0QnJxRixLQUFLK0csT0FDaEdpYSxLQUFLdmEsS0FBSyxvQkFBb0JzeUIsTUFBTWh5QixLQUFLdWpGLGVBQWV0cUYsS0FBSytHLE9BQzdEaWEsS0FBS3ZhLEtBQUssbUJBQW1Cc3lCLE1BQU1oeUIsS0FBS3dqRixrQkFBa0J2cUYsS0FBSytHLE9BQy9EaWEsS0FBS3ZhLEtBQUssc0JBQXNCc3lCLE1BQU1oeUIsS0FBS3lqRixxQkFBcUJ4cUYsS0FBSytHLE9BQ3JFaWEsS0FBS3ZhLEtBQUssOEJBQThCc3lCLE1BQU1oeUIsS0FBSzBqRixvQkFBb0J6cUYsS0FBSytHLE9BQzVFaWEsS0FBS3ZhLEtBQUssZ0NBQWdDa21FLEtBQUs1bEUsS0FBSzJqRixxQkFBcUIxcUYsS0FBSytHLE9BQzlFaWEsS0FBS3ZhLEtBQUssMkJBQTJCMnBFLE1BQU1ycEUsS0FBSzRqRix1QkFBdUIzcUYsS0FBSytHLE9BQzVFaWEsS0FBS3ZhLEtBQUsseUJBQXlCc3lCLE1BQU1oeUIsS0FBSzZqRixpQkFBaUI1cUYsS0FBSytHLE9BQ3BFaWEsS0FBS3ZhLEtBQUssMEJBQTBCc3lCLE1BQU1oeUIsS0FBSzhqRixrQkFBa0I3cUYsS0FBSytHLE1BQ3hFLENBRUEsaUJBQU0rakYsQ0FBYTNzRSxPQUNqQixHQUFJQSxNQUFNeFcsT0FBUSxDQUNoQixNQUFNcVosS0FBTyxHQUNiLElBQUssTUFBTTlZLFFBQVFpVyxNQUNqQjZDLEtBQUsvaUIsV0FBV3VwQixlQUFlM2UsS0FBS2tpRixjQUFlLENBQ2pEaHFGLFNBQVU0TixjQUFjOGIsdUJBQXVCdmlCLEtBQUssS0FBSzlELE9BQVM4RCxLQUFLLElBQU0sS0FBT0EsS0FBSyxHQUN6RjRxRCxjQUFlNXFELEtBQUssR0FBRzhpRixhQUN2QnhoRixNQUFPdEIsS0FBSyxHQUFHc0IsU0FHbkJlLFlBQVlrTixPQUFPLENBQ2pCOU0sS0FBTXRHLEtBQUtzRyxLQUFLc0ssR0FDaEIrQixRQUFTLENBQ1BvQixNQUFPL1QsS0FBS3NHLEtBQUt4TixNQUVuQnFhLFFBQVN3SixLQUFLNVYsS0FBSyxxQkFDbkJmLFFBQVNFLFlBQVl3aUIscUJBQXFCLE9BRTlDLENBQ0YsQ0FFQSxhQUFBaytELENBQWVqK0UsTUFBTSxxQkFBd0IsRUFBSyxtQkFBc0IsRUFBSyxrQkFBcUIsRUFBSyxvQkFBdUIsRUFBSyxpQkFBb0IsRUFBSyxnQkFBbUIsR0FBVSxDQUFDLEdBQ3hMLE1BQU1wSyxJQUFPb0ssS0FBSy9HLE1BQU13QyxNQUFNa3hDLFdBQVcxa0MsSUFBTWpJLEtBQUs3UCxLQUNwRCxHQUFrQixVQUFkNlAsS0FBSzVILEtBRVAsWUFEQTJCLEtBQUt1UixPQUFPNHlFLGtCQUFrQmp0RixLQUFLK08sTUFHckMsTUFBTW03RSxjQUFnQm43RSxLQUFLbEssT0FBTzhLLFdBQVc3UCxXQUFhaVAsS0FBS2xLLE9BQU84SyxXQUFXdFAsZUFBa0IwTyxLQUFLbEssT0FBTzhLLFdBQVduUCxTQUFzQnVPLEtBQUtsSyxPQUFPOEssV0FBV3BQLGNBQWdCd08sS0FBSzdQLE9BQVNrSCxLQUFLQyxLQUFLMFcsT0FBTyxzQkFDaE4vVSxNQUFRLENBQ1pxaUYsb0JBQ0FDLGtCQUNBTSxtQkFDQVQsZUFDQUksaUJBQ0FHLGlCQUVJVCxLQUFPLENBQ1g1bEMsaUJBQWtCLEdBQ2xCRCxnQkFBaUIsR0FDakJ5QyxpQkFBa0IsR0FDbEJ2QyxlQUFnQixHQUNoQmxtQyxVQUFVLEdBRVosUUFBMkMsSUFBaEN0VixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQ2hDbUUsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUFPLENBQzVCb0ssS0FDQS9HLE1BQU9OLFFBQVFDLE1BQU02YSxZQUFZeGEsTUFBTyxDQUFFa2lGLFlBQWMsQ0FBRWdELFNBQVMsSUFDbkVqRCxLQUFNLElBRUhDLGFBQXdDLElBQXhCRyxzQkFBdUQsSUFBdEJDLG9CQUFzRCxJQUF2Qk0sb0JBQ25GOWhGLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLanFGLEtBQUswSCxRQUFRQyxNQUFNNmEsWUFBWXhhLE1BQU9paUYsS0FBTSxDQUFFaUQsU0FBUyxTQUVyRixDQUNMLEdBQUtoRCxXQUtIcGhGLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLanFGLEtBQUswSCxRQUFRQyxNQUFNNmEsWUFBWXhhLE1BQU9paUYsS0FBTSxDQUFFaUQsU0FBUyxVQUp4RixJQUFLLE1BQU01dUQsUUFBUXQyQixNQUNqQmMsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUssR0FBRzNyRCxNQUFReDFCLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLLEdBQUczckQsT0FBU3QyQixNQUFNczJCLE1BS25HLElBQUssTUFBTUEsUUFBUXQyQixNQUNqQmMsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUFLcUQsTUFBTXMyQixNQUFReDFCLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3FELE1BQU1zMkIsT0FBU3QyQixNQUFNczJCLEtBRS9GLEVBQ0s0ckQsWUFBY2xpRixNQUFNbWlGLGlCQUN2QnJoRixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSyxHQUFHNWxDLGlCQUFtQnY3QyxLQUFLdVIsT0FBT3FwQyxhQUFhMTNDLElBRXBGLENBRUEsZ0JBQUFtaEYsR0FDRSxJQUFLLE1BQU14b0YsT0FBT21FLEtBQUt1UixPQUFPbXZFLFlBQzVCMWdGLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBTyxHQUVqQ21FLEtBQUt1UixPQUFPK3lFLGFBQWUsRUFDN0IsQ0FFQSxtQkFBTUMsR0FDSnZrRixLQUFLdVIsT0FBTzB2RSxXQUFhLENBQUMsRUFDMUJqaEYsS0FBS3VSLE9BQU9zd0UsaUJBQW1CLENBQUMsRUFDaEM3aEYsS0FBS3VSLE9BQU80eUUsa0JBQW9CLEdBQ2hDbmtGLEtBQUt1UixPQUFPaXpFLFVBQVk1bEYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLdVIsT0FBTzR1RSxpQkFDNUQsTUFBTVosWUFBY3YvRSxLQUFLZy9FLG9CQUFvQmgvRSxLQUFLdVIsT0FBT2d1RSxPQUNuRDFwQyxpQkFBbUI3MUMsS0FBS2cvRSxvQkFBb0JoL0UsS0FBS3VSLE9BQU9za0MsWUFDOUQsSUFBSUMsV0FBWSxFQUloQixHQUg4QixLQUExQjkxQyxLQUFLdVIsT0FBT3VrQyxZQUNkQSxnQkFBa0I5MUMsS0FBS2cvRSxvQkFBb0JoL0UsS0FBS3VSLE9BQU91a0MsWUFFckR5cEMsT0FBUzFwQyxjQUFnQnY0QyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFBd0I0NEMsV0FBWSxDQUN6RjkxQyxLQUFLdVIsT0FBT21vQyxZQUFjLEdBQzFCLElBQUssSUFBSXI4QixNQUFRLEVBQUdBLE1BQVFraUUsTUFBTXhqRixPQUFPMjlDLFlBQVk5NEMsT0FBUXljLFFBQzNEcmQsS0FBS3VSLE9BQU9tb0MsWUFBWXhpRCxLQUFLLENBQzNCZCxLQUFNbXBGLE1BQU14akYsT0FBTzI5QyxZQUFZcjhCLE9BQy9Cbm5CLE1BQU8sR0FDUDJGLElBQUssaUJBQW1CK0wsY0FBY3dxRCxZQUFZbXRCLE1BQU14akYsT0FBTzI5QyxZQUFZcjhCLFVBRy9FcmQsS0FBS3VSLE9BQU9xa0MsU0FBV0MsV0FBVzk1QyxPQUFPNjVDLFNBQ3pDNTFDLEtBQUt1UixPQUFPeXZFLGFBQWVuckMsV0FBVzk1QyxPQUFPaWxGLGFBQzdDaGhGLEtBQUt1UixPQUFPcXBDLGFBQWUvRSxXQUFXOTVDLE9BQU82K0MsYUFDN0MsSUFBSXpzQyxNQUFRLEdBQ1pBLFlBQWNuTyxLQUFLbzVDLGdCQUFnQm1tQyxNQUFNeGpGLE9BQU9vUyxPQUNoRCxJQUFLLElBQUlrUCxNQUFRLEVBQUdveEQsR0FBS3RnRSxNQUFNdk4sT0FBUXljLE1BQVFveEQsR0FBSXB4RCxRQUNqRHJkLEtBQUtra0YsY0FBYy8xRSxNQUFNa1AsUUFFM0JsUCxZQUFjbk8sS0FBS281QyxnQkFBZ0J2RCxXQUFXOTVDLE9BQU84bkIsUUFDckQsSUFBSyxJQUFJeEcsTUFBUSxFQUFHb3hELEdBQUt0Z0UsTUFBTXZOLE9BQVF5YyxNQUFRb3hELEdBQUlweEQsUUFDakRyZCxLQUFLa2tGLGNBQWMvMUUsTUFBTWtQLE9BQVEsQ0FBRWtrRSxxQkFBcUIsRUFBTUUsa0JBQWtCLElBRWxGLElBQUssSUFBSW5xRSxNQUFRLEVBQUd3TCxHQUFLK3lCLFdBQVc5NUMsT0FBT3VJLE9BQU8xRCxPQUFRMFcsTUFBUXdMLEdBQUl4TCxRQUFTLENBQzdFdFgsS0FBS3VSLE9BQU9zd0UsaUJBQWlCdnFFLE9BQVN1K0IsV0FBVzk1QyxPQUFPdUksT0FBT2dULE9BQU9oWSxRQUN0RTZPLFlBQWNuTyxLQUFLbzVDLGdCQUFnQnZELFdBQVc5NUMsT0FBT3VJLE9BQU9nVCxPQUFPdU0sUUFDbkUsSUFBSyxJQUFJeEcsTUFBUSxFQUFHb3hELEdBQUt0Z0UsTUFBTXZOLE9BQVF5YyxNQUFRb3hELEdBQUlweEQsUUFDakRyZCxLQUFLa2tGLGNBQWMvMUUsTUFBTWtQLE9BQVEsQ0FBRW1rRSxrQkFBbUJscUUsT0FFMUQsQ0FDQSxHQUFJdytCLFVBQVcsQ0FDYjNuQyxZQUFjbk8sS0FBS281QyxnQkFBZ0J0RCxVQUFVLzVDLE9BQU84bkIsUUFDcEQsSUFBSyxJQUFJeEcsTUFBUSxFQUFHb3hELEdBQUt0Z0UsTUFBTXZOLE9BQVF5YyxNQUFRb3hELEdBQUlweEQsUUFDakRyZCxLQUFLa2tGLGNBQWMvMUUsTUFBTWtQLE9BQVEsQ0FBRXlrRSxvQkFBb0IsRUFBTUYsaUJBQWlCLEdBRWxGLENBQ0EsR0FBSTFsRixPQUFPOEQsS0FBS3VSLE9BQU9xcEMsYUFBYTMzQyxLQUFPLEVBQUcsQ0FDNUMsTUFBTXdoRixpQkFBbUJubkYsS0FBS0MsS0FBSzBXLE9BQU8sdUJBQXlCalUsS0FBS3UrRSxtQkFDbEVyL0UsTUFBUSxDQUFFcWlGLHFCQUFxQixFQUFNRSxrQkFBa0IsRUFBTUosZ0JBQWdCLEdBQ25GLFFBQThELElBQW5EcmhGLEtBQUt1UixPQUFPMHZFLFdBQVdqaEYsS0FBS3UrRSxtQkFDckN2K0UsS0FBS2trRixjQUFjbGtGLEtBQUt1UixPQUFPMHZFLFdBQVdqaEYsS0FBS3UrRSxtQkFBbUJ0NEUsS0FBTS9HLFlBQ25FLFFBQXdELElBQTdDYyxLQUFLdVIsT0FBTzB2RSxXQUFXd0Qsa0JBQ3ZDemtGLEtBQUtra0YsY0FBY2xrRixLQUFLdVIsT0FBTzB2RSxXQUFXd0Qsa0JBQWtCeCtFLEtBQU0vRyxXQUM3RCxDQUNMLE1BQU0rSSxZQUFjM0ssS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTUMsVUFBVXBqQixLQUFLdStFLG1CQUNyRHQyRSxNQUFNckgsUUFDUlosS0FBS2trRixjQUFjajhFLE1BQU0sR0FBSS9JLE1BRWpDLENBQ0YsQ0FDRixDQUNGLENBRUEsWUFBQTgvRCxDQUFjemlFLE9BQ1osR0FBSUEsTUFBTUksY0FBY0ksUUFBUTJuRixrQkFBbUIsQ0FDakQsTUFBTXpsQixTQUFXLENBQUU1Z0UsS0FBTSw2QkFBOEJ4QyxJQUFLVSxNQUFNSSxjQUFjSSxRQUFRMm5GLGtCQUFtQnh1RixNQUFPcUcsTUFBTUksY0FBY0ksUUFBUTdHLE9BQzlJcUcsTUFBTTh4QixhQUFhQyxRQUFRLGFBQWMxZixLQUFLQyxVQUFVb3dELFVBQzFELE1BQU8sR0FBSTFpRSxNQUFNSSxjQUFjSSxRQUFRNEgsT0FBUSxDQUM3QyxNQUFNczZELFNBQVcsQ0FBRTVnRSxLQUFNLG9CQUFxQnNHLE9BQVFwSSxNQUFNSSxjQUFjSSxRQUFRNEgsUUFDbEZwSSxNQUFNOHhCLGFBQWFDLFFBQVEsYUFBYzFmLEtBQUtDLFVBQVVvd0QsVUFDMUQsQ0FDRixDQUVBLGFBQUEwbEIsQ0FBZUMsVUFDYixPQUFPLENBQ1QsQ0FFQSxZQUFBQyxDQUFjRCxVQUNaLE9BQU8sQ0FDVCxDQUVBLGFBQU0xeEQsQ0FBUzMyQixPQUNiLElBQ0UsTUFBTSsyQixTQUFXMWtCLEtBQUs0ZCxNQUFNandCLE1BQU04eEIsYUFBYThDLFFBQVEsZUFDdkQsUUFBNkIsSUFBbEJtQyxTQUFTajFCLE1BQTBDLCtCQUFsQmkxQixTQUFTajFCLEtBQXVDLENBTTFGLEdBTEFpMUIsU0FBU3d4RCxZQUFjdm9GLE1BQU0wb0IsT0FBT3BvQixRQUFRLE1BQU1FLFFBQVEybkYsdUJBQ3RCLElBQXpCcHhELFNBQVN3eEQsY0FDbEJ4eEQsU0FBU3d4RCxZQUFjdm9GLE1BQU0wb0IsT0FBT3BvQixRQUFRLE1BQU1FLFFBQVFnb0YsT0FFNUR6eEQsU0FBUzNRLE1BQU8sRUFDYSxNQUF6QjJRLFNBQVN3eEQsWUFBcUIsQ0FDaEMsTUFBTW5nRixPQUFTM0UsS0FBS3VSLE9BQU8reUUsYUFBYWpzQyxXQUFVNzNCLElBQW9CLElBQWZBLEVBQUV3a0UsV0FDckRyZ0YsUUFBVSxJQUNaM0UsS0FBS3VSLE9BQU8reUUsYUFBYTMvRSxRQUFVLENBQ2pDek8sTUFBTzhKLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3ozQixLQUN4Q21wRixVQUFVLEdBRVpobEYsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTejNCLEtBQU8sSUFFMUN5M0IsU0FBUzNRLE1BQU8sQ0FDbEIsTUFBTyxHQUFxQixNQUFqQjJRLFNBQVN6M0IsVUFBd0UsSUFBbERtRSxLQUFLdVIsT0FBT212RSxZQUFZcHRELFNBQVN3eEQsYUFBOEIsQ0FDdkcsTUFBTXpuRSxNQUFRcmQsS0FBS3VSLE9BQU9pekUsVUFBVW44RSxRQUFRcEUsU0FBU3F2QixTQUFTcDlCLE1BQU8sTUFDdEQsSUFBWG1uQixPQUNGcmQsS0FBS3VSLE9BQU9pekUsVUFBVTl0RCxPQUFPclosTUFBTyxHQUVnQixLQUFsRHJkLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3d4RCxjQUNuQzlrRixLQUFLdVIsT0FBT2l6RSxVQUFVdHRGLEtBQUsrTSxTQUFTakUsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTd3hELGFBQWMsS0FFckY5a0YsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTd3hELGFBQWU3Z0YsU0FBU3F2QixTQUFTcDlCLE1BQU8sSUFDekU4SixLQUFLdVIsT0FBT2l6RSxVQUFVcjRFLE9BQU91NEQsVUFDN0JweEMsU0FBUzNRLE1BQU8sQ0FDbEIsTUFBTyxRQUFxRCxJQUExQzNpQixLQUFLdVIsT0FBT212RSxZQUFZcHRELFNBQVN6M0IsTUFBaUQsTUFBekJ5M0IsU0FBU3d4RCxZQUNwQyxLQUExQzlrRixLQUFLdVIsT0FBT212RSxZQUFZcHRELFNBQVN6M0IsT0FDbkNtRSxLQUFLdVIsT0FBT2l6RSxVQUFVdHRGLEtBQUsrTSxTQUFTakUsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTejNCLEtBQU0sS0FDM0VtRSxLQUFLdVIsT0FBT212RSxZQUFZcHRELFNBQVN6M0IsS0FBTyxHQUN4Q21FLEtBQUt1UixPQUFPaXpFLFVBQVVyNEUsT0FBT3U0RCxVQUM3QnB4QyxTQUFTM1EsTUFBTyxRQUViLFFBQXFELElBQTFDM2lCLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3ozQixXQUFpRixJQUFsRG1FLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3d4RCxhQUE4QixDQUMvSSxNQUFNRyxLQUFrRCxLQUExQ2psRixLQUFLdVIsT0FBT212RSxZQUFZcHRELFNBQVN6M0IsS0FBYyxHQUFLb0ksU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3ozQixLQUFNLElBQ2xIbUUsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTejNCLEtBQTBELEtBQWxEbUUsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTd3hELGFBQXNCLEdBQUs3Z0YsU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3d4RCxhQUFjLElBQzdKOWtGLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3d4RCxhQUFlRyxLQUNoRDN4RCxTQUFTM1EsTUFBTyxDQUNsQixDQUNBLEdBQUkyUSxTQUFTM1EsS0FFWCxZQURBM2lCLEtBQUtoQyxRQUFPLEVBR2hCLE1BQU8sUUFBNkIsSUFBbEJzMUIsU0FBU2oxQixNQUEwQyxzQkFBbEJpMUIsU0FBU2oxQixLQUE4QixDQUd4RixHQUZBaTFCLFNBQVN3eEQsWUFBY3ZvRixNQUFNMG9CLE9BQU9wb0IsUUFBUSxNQUFNRSxRQUFRMm5GLGtCQUMxRHB4RCxTQUFTM1EsTUFBTyxHQUMyQyxJQUF2RDNpQixLQUFLdVIsT0FBTyt5RSxhQUFhaHhELFNBQVMzdUIsUUFBUXFnRixTQUFvQixDQUNoRSxJQUFJRSxJQUNrRCxLQUFsRGxsRixLQUFLdVIsT0FBT212RSxZQUFZcHRELFNBQVN3eEQsZUFDbkNJLElBQU1sbEYsS0FBS3VSLE9BQU9tdkUsWUFBWXB0RCxTQUFTd3hELGNBRXpDOWtGLEtBQUt1UixPQUFPbXZFLFlBQVlwdEQsU0FBU3d4RCxhQUFlOWtGLEtBQUt1UixPQUFPK3lFLGFBQWFoeEQsU0FBUzN1QixRQUFRek8sV0FDdkUsSUFBUmd2RixJQUNUbGxGLEtBQUt1UixPQUFPK3lFLGFBQWFoeEQsU0FBUzN1QixRQUFRek8sTUFBUWd2RixJQUVsRGxsRixLQUFLdVIsT0FBTyt5RSxhQUFhaHhELFNBQVMzdUIsUUFBUXFnRixVQUFXLEVBRXZEMXhELFNBQVMzUSxNQUFPLENBQ2xCLENBQ0EsR0FBSTJRLFNBQVMzUSxLQUVYLFlBREEzaUIsS0FBS2hDLFFBQU8sRUFHaEIsQ0FDRixDQUFFLE1BQU9nTixLQUNULENBQ0EsTUFBTXNvQixlQUFpQjFyQixjQUFjMnJCLHFCQUFxQmgzQixNQUFPLFFBQ2pFLEdBQUksQ0FBQ3lELEtBQUtpOUUsU0FBU1csc0JBQXVCNTlFLEtBQUtpOUUsU0FBU1Usd0JBQXdCMzZFLFNBQVNoRCxLQUFLdVIsT0FBT291RSxNQUNuRyxJQUFLLE1BQU0xNUUsUUFBUXF0QixTQUNDLFVBQWRydEIsS0FBSzVILE9BQ1AyQixLQUFLa2tGLGNBQWNqK0UsTUFDbkJqRyxLQUFLaEMsUUFBTyxHQUlwQixDQUVBLG9CQUFBeWxGLENBQXNCbG5GLE9BQ3BCQSxNQUFNa2hFLGlCQUNSLENBRUEsbUJBQUFpbUIsQ0FBcUJubkYsT0FDbkJBLE1BQU1raEUsa0JBQ04sTUFBTTVoRSxJQUFNVSxNQUFNSSxlQUFld29GLFlBQVlwb0YsU0FBU2xCLElBQ2hEd2hCLE1BQVE5Z0IsTUFBTUksZUFBZXdvRixZQUFZcG9GLFNBQVNzZ0IsV0FDQSxJQUE3Q3JkLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsTUFBTXNsRixLQUFLOWpFLFNBQzNDcmQsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUt6cUQsT0FBT3JaLE1BQU9BLE9BQy9DcmQsS0FBS2hDLFFBQU8sR0FFaEIsQ0FFQSxvQkFBTXVsRixDQUFnQmhuRixPQUNwQixNQUFNVixJQUFNVSxNQUFNSSxlQUFlSSxTQUFTbEIsSUFDcEN3aEIsTUFBUTlnQixNQUFNSSxlQUFlSSxTQUFTc2dCLE1BQ3RDK25FLFVBQVk3b0YsTUFBTUksZUFBZUksU0FBU3FvRixlQUNRLElBQTdDcGxGLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsTUFBTXNsRixLQUFLOWpFLFNBQzNDcmQsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUFLc2xGLEtBQUs5akUsT0FBTytuRSxZQUFjcGxGLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU8rbkUsV0FDOUZwbEYsS0FBS2hDLFFBQU8sR0FFaEIsQ0FFQSx1QkFBTXdsRixDQUFtQmpuRixPQUN2QixNQUFNVixJQUFNVSxNQUFNSSxlQUFlSSxTQUFTbEIsSUFDcEN3aEIsTUFBUTlnQixNQUFNSSxlQUFlSSxTQUFTc2dCLE1BQ3RDK25FLFVBQVk3b0YsTUFBTUksZUFBZUksU0FBU3FvRixVQUNoRCxRQUEyQyxJQUFoQ3BsRixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQXNCLENBQ2xEd2hCLE9BQVMsSUFDWHJkLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU8rbkUsWUFBYSxFQUNyRHBsRixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPL0gsVUFBVyxFQUNuRHRWLEtBQUtoQyxRQUFPLElBRWQsSUFBSStOLFVBQVksR0FDaEIsTUFBTXVMLE1BQVFoYSxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNa2lFLGtCQUFrQnhwRixLQUNsRHliLFFBQ0Z2TCxpQkFBbUJ6TyxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNNjBCLG1CQUFtQixDQUFFQyxZQUFhLElBQUl0d0MsT0FBTyxJQUFNQyxjQUFjQyxZQUFZeVAsT0FBUyxPQUFRalosS0FBTSxPQUFRaEksUUFBTzRQLFFBQ2pKQSxLQUFLbEssT0FBTzhLLFlBQVk3UCxVQUFjaVAsS0FBS2xLLE9BQU84SyxZQUFZdFAsY0FBZ0IwTyxLQUFLbEssT0FBTzhLLFlBQVlwUCxpQkFFN0dzVSxVQUFVbkwsT0FBUyxHQUNyQm1MLFVBQVVJLEtBQUt2RSxjQUFjd0UsZ0JBR2pDLE1BQU11cEMsZ0JBQWtCelQsZ0NBQWdDeHhCLE9BQU8sQ0FDN0RtVCxPQUFROVgsVUFDUnMyQixZQUFjcmlDLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS29LLEtBQUtsSyxPQUFPOEssWUFBWXRQLGVBQWdCLEVBQ2xGK3FDLGdCQUFnQixFQUNoQlAsbUJBQW9CL2hDLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS29LLEtBQUtsSyxPQUFPa0wsZUFDNUQ1SixNQUFPMkMsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixLQUFLb0ssS0FBSzdQLE9BRTFDLEdBQUlpbkIsT0FBUyxFQUNnQixLQUF2QnM0QixVQUFVcmdDLFVBQ1p0VixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPL0gsU0FBV3ZKLFVBQVVyTSxNQUFLOGdCLEdBQUtBLEVBQUV0UyxLQUFPeW5DLFVBQVVyZ0MsV0FDMUZ0VixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPK25FLFlBQWEsR0FDekIsS0FBbkJ6dkMsVUFBVXYvQyxPQUNuQjRKLEtBQUt1UixPQUFPMHZFLFdBQVdwbEYsS0FBS3NsRixLQUFLOWpFLE9BQU8vSCxTQUFXcWdDLFVBQVV2L0MsS0FDN0Q0SixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPK25FLFlBQWEsT0FFbEQsQ0FDTCxJQUFJOXZFLFVBQVcsRUFDWSxLQUF2QnFnQyxVQUFVcmdDLFNBQ1pBLFNBQVd2SixVQUFVck0sTUFBSzhnQixHQUFLQSxFQUFFdFMsS0FBT3luQyxVQUFVcmdDLFdBQ3RCLEtBQW5CcWdDLFVBQVV2L0MsT0FDbkJrZixTQUFXcWdDLFVBQVV2L0MsTUFFdkI0SixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBS2pxRixLQUFLLENBQ3BDcXFGLHFCQUFxQixFQUNyQkMsbUJBQW1CLEVBQ25CTSxvQkFBb0IsRUFDcEJULGdCQUFnQixFQUNoQkksaUJBQWlDLHFCQUFkMkQsVUFDbkJ4RCxnQkFBZ0Msb0JBQWR3RCxVQUNsQjdwQyxpQkFBa0IsR0FDbEJELGdCQUFpQixHQUNqQnlDLGlCQUFrQixHQUNsQnZDLGVBQWdCLEdBQ2hCbG1DLFVBRUosQ0FDQXRWLEtBQUtoQyxRQUFPLEVBQ2QsQ0FDRixDQUVBLDBCQUFNMmxGLENBQXNCcG5GLE9BQzFCLE1BQU1nbEMsTUFBUXpWLEVBQUV2dkIsTUFBTUksZUFDaEIyb0YsV0FBYS9qRCxNQUFNajhCLEtBQUssY0FDeEIxSSxHQUFLMmtDLE1BQU0xa0MsUUFBUSxNQUNuQmhCLElBQU1lLEdBQUcwSSxLQUFLLE9BQ2QrWCxNQUFRemdCLEdBQUcwSSxLQUFLLGNBQzhDLElBQXpEdEYsS0FBS3VSLE9BQU8wdkUsV0FBV3BsRixNQUFNc2xGLEtBQUs5akUsT0FBT2lvRSxjQUNsRHRsRixLQUFLdVIsT0FBTzB2RSxXQUFXcGxGLEtBQUtzbEYsS0FBSzlqRSxPQUFPaW9FLFlBQWMvakQsTUFBTUssT0FFOUQ1aEMsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLDRCQUFNNGxGLENBQXdCcm5GLE9BQzVCLE1BQU1ncEYsU0FBV3o1RCxFQUFFdnZCLE1BQU1JLGVBQ25CMGdCLE1BQVFrb0UsU0FBU2pnRixLQUFLLGNBQ2tCLElBQW5DdEYsS0FBS3VSLE9BQU9tb0MsWUFBWXI4QixTQUNqQ3JkLEtBQUt1UixPQUFPbW9DLFlBQVlyOEIsT0FBT25uQixNQUFRcXZGLFNBQVMzakQsTUFFcEQsQ0FFQSxzQkFBTWlpRCxDQUFrQnRuRixPQUN0QixNQUFNaW1CLE9BQVNzSixFQUFFdnZCLE1BQU1JLGVBQ2pCMGdCLE1BQVFtRixPQUFPbGQsS0FBSyxTQUNwQnpKLElBQU0ybUIsT0FBT2xkLEtBQUssT0FDeEIsUUFBOEMsSUFBbkN0RixLQUFLdVIsT0FBT21vQyxZQUFZcjhCLE9BQXdCLENBQ3pELE1BQU1tb0UsZ0JBQWtCbG9GLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU1DLFVBQVV2bkIsS0FDeEQsR0FBeUIsSUFBckIycEYsVUFBVTVrRixPQUFjLENBQzFCLE1BQU02a0Ysa0JBQW9CRCxVQUFVLEdBQUdya0YsT0FDbkNza0YsWUFBWS9pRixRQUFRLEdBQUdyRSxPQUFTOFIsTUFBTTRrQyxtQkFBbUJLLE9BQzNEcDFDLEtBQUt1UixPQUFPbW9DLFlBQVlyOEIsT0FBT25uQixPQUFTOEosS0FBS3VSLE9BQU9tb0MsWUFBWXI4QixPQUFPbm5CLE1BQVEsS0FBT3V2RixZQUFZL2lGLFFBQVEsR0FBRzJ5QyxLQUFLcmEsUUFBUUEsT0FFOUgsQ0FDRixDQUNBaDdCLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSx1QkFBTThsRixDQUFtQnZuRixPQUN2QixNQUNNOGdCLE1BRFN5TyxFQUFFdnZCLE1BQU1JLGVBQ0YySSxLQUFLLGNBQ29CLElBQW5DdEYsS0FBS3VSLE9BQU9tb0MsWUFBWXI4QixTQUNqQ3JkLEtBQUt1UixPQUFPbW9DLFlBQVlyOEIsT0FBT25uQixNQUFRLElBRXpDOEosS0FBS2hDLFFBQU8sRUFDZCxDQUVBLGlCQUFNcWxGLENBQWE5bUYsT0FDakIsTUFBTWdqRixZQUFjdi9FLEtBQUtnL0Usb0JBQW9CaC9FLEtBQUt1UixPQUFPZ3VFLE9BQ3pELEdBQUlBLE1BQU8sQ0FDVCxNQUFNbHFFLFVBQVksSUFBSXZULEtBQUt5OUUsTUFBTXhqRixPQUFPNm5CLGdCQUFnQnhNLE1BQU04aEMsS0FBS2xuQyxZQUFZNEYsU0FBUyxDQUFFdFYsT0FBTyxJQUNqR3RDLEtBQUt1UixPQUFPNnRFLGVBQWVsbUMsS0FBTyxDQUFDN2pDLElBQUk1UyxPQUN2QyxNQUFNd1gsV0FBYXdHLGVBQWUzZSxLQUFLa2lGLGNBQWUsQ0FDcERocUYsUUFBU3NELEtBQUtDLEtBQUtDLFNBQVMsNENBQThDLEtBQU8raEYsTUFBTXhqRixPQUFPNm5CLGdCQUFnQnhNLE1BQU04aEMsS0FBS2xuQyxXQUN6SCs1QyxjQUFlMTJDLElBQUk0dUUsYUFDbkJ4aEYsTUFBTzRTLElBQUk1UyxRQUViZSxZQUFZa04sT0FBTyxDQUNqQjlNLEtBQU10RyxLQUFLc0csS0FBS3NLLEdBQ2hCK0IsUUFBUyxDQUNQb0IsTUFBTy9ULEtBQUtzRyxLQUFLeE4sTUFFbkJxYSxRQUFTd0osS0FDVDNXLFFBQVNFLFlBQVl3aUIscUJBQXFCLFFBRTVDaG1CLEtBQUtoQyxRQUFPLEVBQ2QsQ0FDRixDQUVBLGdCQUFNb2xGLENBQVk3bUYsT0FFaEIsR0FEQUEsTUFBTUUsc0JBQ2dELElBQTNDdUQsS0FBS3VSLE9BQU84dEUsdUJBQXVCeG9GLE1BQ3ZDbUosS0FBS3VSLE9BQU84dEUsdUJBQXVCeG9GLElBQUl1K0IsUUFBVXAxQixLQUFLdVIsT0FBTzh0RSx1QkFBdUJ4b0YsSUFBSTRMLE1BQU8sQ0FDbEcsSUFBSXZNLE1BQVErTixTQUFTakUsS0FBS3VSLE9BQU9tdkUsWUFBWTdwRixJQUFLLElBQ2xELE1BQU1pWixRQUFVLEdBQ2hCLElBQUssSUFBSXNILE1BQVFwWCxLQUFLdVIsT0FBTzh0RSx1QkFBdUJ4b0YsSUFBSTRMLE1BQU8yVSxNQUFRLEVBQUdBLFFBQVMsQ0FDakYsTUFBTS9CLFVBQVksSUFBSXZULEtBQUssU0FBUzhWLFNBQVMsQ0FBRXRWLE9BQU8sSUFDdEQsR0FBSStTLElBQUk1UyxNQUFRdk0sTUFBTyxDQUNyQixNQUFNaXNELGlCQUFtQixJQUFJcmdELEtBQUssUUFBUThWLFNBQVMsQ0FBRXRWLE9BQU8sSUFDNUR3TixRQUFRNVksS0FBSyxpQ0FBaUNvRyxLQUFLQyxLQUFLMFcsT0FDdEQsa0JBQ0EsQ0FDRWhPLEtBQU0zSSxLQUFLQyxLQUFLQyxTQUFTLG9CQUN6QjZYLElBQUtBLElBQUk1UyxNQUNUKy9DLE1BQU90c0QsTUFDUCtyRCxRQUFTRSxXQUFXMS9DLHNCQUd4QnZNLE9BQWdCK04sU0FBU2srQyxXQUFXMS9DLE1BQU8sR0FDN0MsTUFDRXFOLFFBQVE1WSxLQUFLLGdDQUFnQ29HLEtBQUtDLEtBQUswVyxPQUNyRCxrQkFDQSxDQUNFaE8sS0FBTTNJLEtBQUtDLEtBQUtDLFNBQVMsb0JBQ3pCNlgsSUFBS0EsSUFBSTVTLE1BQ1QrL0MsTUFBT3RzRCxxQkFJZixDQUNBc04sWUFBWWtOLE9BQU8sQ0FDakJWLE9BQVExUyxLQUFLQyxLQUFLQyxTQUFTLG9CQUMzQm9HLEtBQU10RyxLQUFLc0csS0FBS3NLLEdBQ2hCK0IsUUFBUyxDQUNQb0IsTUFBTy9ULEtBQUtzRyxLQUFLeE4sTUFFbkJxYSxRQUFTWCxRQUFRekwsS0FBSyxJQUN0QmYsUUFBU0UsWUFBWXdpQixxQkFBcUIsUUFFNUNobUIsS0FBS3VSLE9BQU82dEUsZUFBZXZvRixJQUFNWCxNQUFRK04sU0FBU2pFLEtBQUt1UixPQUFPbXZFLFlBQVk3cEYsSUFBSyxJQUMvRW1KLEtBQUt1UixPQUFPOHRFLHVCQUF1QnhvRixJQUFJdStCLFFBQVMsRUFDaERwMUIsS0FBS2hDLFFBQU8sRUFDZCxDQUVKLENBRUEsZ0JBQU1rbEYsQ0FBWTNtRixPQUNoQkEsTUFBTUUsaUJBQ04sTUFBTTJhLE1BQVEsR0FDZCxJQUFLLE1BQU12YixNQUFPLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLFFBQVMsQ0FDbEYsTUFBTTBHLGFBQWV2QyxLQUFLOCtCLG1CQUFtQmpqQyxNQUM5QixJQUFYMEcsUUFDRjZVLE1BQU1sZ0IsS0FBS3FMLE9BRWYsQ0FDQXZDLEtBQUsrakYsWUFBWTNzRSxPQUNqQnBYLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSxtQkFBTW1sRixDQUFlNW1GLE9BRW5CLEdBREFBLE1BQU1FLGlCQUNvQixLQUF0QnVELEtBQUt1UixPQUFPZ3VFLE1BQWMsQ0FDNUIsTUFBTUEsWUFBY3YvRSxLQUFLZy9FLG9CQUFvQmgvRSxLQUFLdVIsT0FBT2d1RSxPQUN6RCxRQUFxQixJQUFWQSxNQUF1QixDQUNoQyxNQUFNbUcsYUFBZSxDQUFDLEVBQ3RCLElBQUssTUFBTTdwRixNQUFPLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxPQUNsRTZwRixhQUFhN3BGLEtBQU8wakYsTUFBTXhqRixPQUFPNm5CLGdCQUFnQnhNLE1BQU12YixLQUV6RCxHQUE4QixLQUExQm1FLEtBQUt1UixPQUFPdWtDLFVBQWtCLENBQ2hDLE1BQU1BLGdCQUFrQjkxQyxLQUFLZy9FLG9CQUFvQmgvRSxLQUFLdVIsT0FBT3VrQyxnQkFDcEMsSUFBZEEsV0FDOEIsS0FBbkM5MUMsS0FBS3VSLE9BQU84dUUsb0JBQ1Z2cUMsVUFBVS81QyxPQUFPMitDLDJCQUEyQi9ZLFVBQzlDK2pELGFBQWExbEYsS0FBS3VSLE9BQU84dUUsb0JBQXNCdnFDLFVBQVUvNUMsT0FBTzIrQywyQkFBMkJ4a0QsTUFJbkcsQ0FDQThKLEtBQUt1UixPQUFPK3lFLGFBQWUsR0FDM0IsTUFBTXJxRSxLQUFPLEdBQ2IsSUFBSyxNQUFNcGUsT0FBTzZwRixhQUFjLENBQzlCLE1BQU12a0YsS0FBTyxJQUFJVyxLQUFLNGpGLGFBQWE3cEYsS0FBS21XLGtCQUNsQzdRLEtBQUt5VyxTQUFTLENBQUV0VixPQUFPLElBQzdCdEMsS0FBS3VSLE9BQU8reUUsYUFBYXB0RixLQUFLLENBQzVCaEIsTUFBT2lMLEtBQUtzQixNQUNadWlGLFVBQVUsSUFFWi9xRSxLQUFLL2lCLFdBQVd1cEIsZUFBZTNlLEtBQUtraUYsY0FBZSxDQUNqRGhxRixRQUFTMHJGLGFBQWE3cEYsS0FBS21XLFdBQzNCKzVDLGNBQWU1cUQsS0FBSzhpRixhQUNwQnhoRixNQUFPdEIsS0FBS3NCLFFBRWhCLENBQ0FlLFlBQVlrTixPQUFPLENBQ2pCOU0sS0FBTXRHLEtBQUtzRyxLQUFLc0ssR0FDaEIrQixRQUFTLENBQ1BvQixNQUFPL1QsS0FBS3NHLEtBQUt4TixNQUVuQnFhLFFBQVN3SixLQUFLNVYsS0FBSyxxQkFDbkJmLFFBQVNFLFlBQVl3aUIscUJBQXFCLE9BRTlDLENBQ0YsQ0FDQWhtQixLQUFLaEMsUUFBTyxFQUNkLENBRUEsaUNBQU1nbEYsQ0FBNkJ6bUYsT0FDakNBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtMLE1BQU1JLGNBQWNFLFFBQVEsY0FDTixJQUF0QkQsR0FBR0csUUFBUTRILGFBQW9ELElBQW5CL0gsR0FBR0csUUFBUW1HLFVBQWlELElBQW5CdEcsR0FBR0csUUFBUWtHLElBQ3pHakQsS0FBSzJsRixhQUFhL29GLEdBQUdHLFFBQVE0SCxPQUFRLEdBQUkvSCxHQUFHRyxRQUFRbUcsSUFBS3RHLEdBQUdHLFFBQVFrRyxVQUNqQyxJQUFuQnJHLEdBQUdHLFFBQVFsQixLQUMzQm1FLEtBQUs0bEYscUJBQXFCaHBGLEdBQUdHLFFBQVFsQixJQUFLLElBRTVDbUUsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLCtCQUFNNmlDLENBQTJCdGtDLE9BQy9CQSxNQUFNRSxpQkFDTixNQUFNRyxHQUFLTCxNQUFNSSxjQUFjRSxRQUFRLGNBQ04sSUFBdEJELEdBQUdHLFFBQVE0SCxhQUFvRCxJQUFuQi9ILEdBQUdHLFFBQVFtRyxVQUFpRCxJQUFuQnRHLEdBQUdHLFFBQVFrRyxJQUN6R2pELEtBQUsybEYsYUFBYS9vRixHQUFHRyxRQUFRNEgsT0FBUSxFQUFHL0gsR0FBR0csUUFBUW1HLElBQUt0RyxHQUFHRyxRQUFRa0csVUFDaEMsSUFBbkJyRyxHQUFHRyxRQUFRbEIsS0FDM0JtRSxLQUFLNGxGLHFCQUFxQmhwRixHQUFHRyxRQUFRbEIsSUFBSyxHQUU1Q21FLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSwrQkFBTThpQyxDQUEyQnZrQyxPQUMvQkEsTUFBTUUsaUJBQ04sTUFBTUcsR0FBS0wsTUFBTUksY0FBY0UsUUFBUSxjQUNOLElBQXRCRCxHQUFHRyxRQUFRNEgsYUFBb0QsSUFBbkIvSCxHQUFHRyxRQUFRbUcsVUFBaUQsSUFBbkJ0RyxHQUFHRyxRQUFRa0csSUFDekdqRCxLQUFLMmxGLGFBQWEvb0YsR0FBR0csUUFBUTRILFFBQVMsRUFBRy9ILEdBQUdHLFFBQVFtRyxJQUFLdEcsR0FBR0csUUFBUWtHLFVBQ2pDLElBQW5CckcsR0FBR0csUUFBUWxCLEtBQzNCbUUsS0FBSzRsRixxQkFBcUJocEYsR0FBR0csUUFBUWxCLEtBQU0sR0FFN0NtRSxLQUFLaEMsUUFBTyxFQUNkLENBRUEsMkJBQUFpbEYsQ0FBNkIxbUYsT0FDM0JBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtMLE1BQU1JLGNBQWNFLFFBQVEsY0FDTixJQUF0QkQsR0FBR0csUUFBUTRILGFBQW9ELElBQW5CL0gsR0FBR0csUUFBUW1HLFVBQWlELElBQW5CdEcsR0FBR0csUUFBUWtHLElBQ3pHakQsS0FBSzJsRixhQUFhL29GLEdBQUdHLFFBQVE0SCxRQUFTLEdBQUkvSCxHQUFHRyxRQUFRbUcsSUFBS3RHLEdBQUdHLFFBQVFrRyxVQUNsQyxJQUFuQnJHLEdBQUdHLFFBQVFsQixLQUMzQm1FLEtBQUs0bEYscUJBQXFCaHBGLEdBQUdHLFFBQVFsQixLQUFNLElBRTdDbUUsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLFlBQUEybkYsQ0FBYzlwRixJQUFLM0YsTUFBT2dOLElBQUtELEtBQzdCakQsS0FBS3VSLE9BQU82dEUsZUFBZXZqRixLQUFPdUcsS0FBS2EsSUFBSWIsS0FBS2MsSUFBSWUsU0FBU2pFLEtBQUt1UixPQUFPNnRFLGVBQWV2akYsS0FBTSxJQUFNM0YsTUFBTytOLFNBQVNoQixJQUFLLEtBQU1nQixTQUFTZixJQUFLLElBQy9JLENBRUEsb0JBQUEwaUYsQ0FBc0IvcEYsSUFBSzNGLE9BQ3pCLE1BQU0wRyxHQUFLb0QsS0FBS3NoQyxTQUFTLEdBQUcxdEIsY0FBYyxvQkFBb0IvWCxRQUN4RDBsQyxNQUFRM2tDLElBQUlnWCxjQUFjLFNBQzVCMnRCLFFBQ0ZBLE1BQU1yckMsTUFBUWdHLE9BQU9xbEMsTUFBTXJyQyxPQUFTQSxNQUNwQzhKLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBT0ssT0FBT3FsQyxNQUFNcnJDLE9BRWhELENBRUEsMkJBQU0wcUMsQ0FBdUJya0MsT0FDM0JBLE1BQU1FLGlCQUNOLE1BQ011a0MsVUFES3prQyxNQUFNSSxjQUFjRSxRQUFRLFNBQ2xCRSxRQUFRbEIsSUFDdkIwRyxhQUFldkMsS0FBSzgrQixtQkFBbUJrQyxZQUM5QixJQUFYeitCLFFBQ0Z2QyxLQUFLK2pGLFlBQVksQ0FBQ3hoRixTQUVwQnZDLEtBQUtoQyxRQUFPLEVBQ2QsQ0FFQSx3QkFBTThnQyxDQUFvQmpqQyxLQUN4QixNQUFNZSxHQUFLa3ZCLEVBQUUscURBQXFEandCLFFBQzVEMGxDLE1BQVEza0MsR0FBRzhDLEtBQUssU0FDaEIxRixRQUFVNEMsR0FBRzBJLEtBQUssUUFDeEIsR0FBSWk4QixPQUFTdm5DLFVBQ1BnRyxLQUFLdVIsT0FBT3MwRSxnQkFBbUQsS0FBakM3bEYsS0FBS3VSLE9BQU9tdkUsWUFBWTdrRixNQUFhLENBQ3JFLE1BQU1zRixLQUFPLElBQUlXLEtBQUs5SCxRQUFRZ1ksWUFJOUIsYUFITTdRLEtBQUt5VyxTQUFTLENBQUV0VixPQUFPLElBQzdCaS9CLE1BQU1LLElBQUl6Z0MsS0FBS3NCLE9BQ2Z6QyxLQUFLdVIsT0FBT212RSxZQUFZN2tGLEtBQU9LLE9BQU9pRixLQUFLc0IsT0FDcEMsQ0FBQzVHLElBQUs3QixRQUFRZ1ksV0FBWTdRLEtBQ25DLENBRUYsT0FBTyxDQUNULENBS0EsZUFBQTR3QixDQUFpQngxQixPQUNmeUQsS0FBS2t5QixVQUFVMzFCLE1BQ2pCLENBRUEsMkJBQUErbUYsQ0FBNkIvbUYsT0FDM0IsTUFBTXNWLElBQU1pYSxFQUFFdnZCLE1BQU1JLGVBQ2R2RyxLQUFPeWIsSUFBSUgsS0FBSyxRQUN0QixRQUE2QyxJQUFsQzFSLEtBQUt1UixPQUFPbXZFLFlBQVl0cUYsTUFBdUIsQ0FDeEQ0SixLQUFLdVIsT0FBT212RSxZQUFZdHFGLE1BQVF5YixJQUFJK3ZCLE1BQ3BDLElBQUk2K0MsU0FBVSxFQUNWaCtFLE1BQVEsRUFDWixJQUFLLE1BQU01RyxPQUFPbUUsS0FBS3VSLE9BQU9tdkUsWUFDUyxLQUFqQzFnRixLQUFLdVIsT0FBT212RSxZQUFZN2tGLEtBQ2QsU0FBUkEsTUFDRjRHLE9BQVN3QixTQUFTakUsS0FBS3VSLE9BQU9tdkUsWUFBWTdrRixLQUFNLEtBR2xENGtGLFNBQVUsRUFHZCxNQUFNcUYsU0FBV2owRSxJQUFJaFYsUUFBUSxnQkFBZ0I2QyxLQUFLLGNBQzVDdUQsSUFBTWdCLFNBQVM2aEYsU0FBU254QixTQUFTLGNBQWN0ZixPQUFRLElBQzdEeXdDLFNBQVN6d0MsS0FBSzV5QyxPQUNWQSxRQUFVUSxLQUFRdzlFLFFBS2hCNXVFLElBQUloVixRQUFRLFFBQVE2QyxLQUFLLDBDQUEwQ2tCLE9BQVMsR0FDOUVaLEtBQUtoQyxRQUFPLEdBTG9FLElBQTlFNlQsSUFBSWhWLFFBQVEsUUFBUTZDLEtBQUssMENBQTBDa0IsUUFDckVaLEtBQUtoQyxRQUFPLEVBT2xCLENBQ0YsQ0FFQSxhQUFBK25GLENBQWVDLFdBQ2IsTUFBTXZILFVBQVl6K0UsS0FBS3krRSxVQUNqQjVpRixJQUFNb0ksU0FBU3JFLE9BQU9tRSxLQUFLMDZFLFdBQVcvK0UsTUFBSzdELEtBQU80aUYsVUFBVTVpRixPQUFTbUUsS0FBS3VSLE9BQU9vdUUsT0FBTyxJQUFNcUcsVUFDcEcsT0FBT3ZILFVBQVU1aUYsSUFDbkIsQ0FLQSxtQkFBTTYyQixDQUFlbjJCLE1BQU9vMkIsVUFDMUIsR0FBSSxDQUFDLE9BQVEsUUFBUTN2QixTQUFTekcsTUFBTXkyQixXQUFXajJCLFFBQVF5bEIsUUFBUyxDQUM5RCxHQUFJam1CLE1BQU15MkIsVUFBVWl6RCxVQUFVNTlFLFFBQVEseUJBQTJCLEVBQy9ELE9BRUY5TCxNQUFNeTJCLFVBQVVpekQsVUFBWTFwRixNQUFNeTJCLFVBQVVpekQsVUFBWSx1QkFDMUQsQ0FDQSxRQUF5QyxJQUE5QnR6RCxTQUFTLHVCQUFxRSxJQUExQkEsU0FBUyxtQkFBeUUsSUFBbENBLFNBQVMscUJBQXNDLENBWTVKLEdBWEkzeUIsS0FBS3VSLE9BQU9vdEUsZUFBaUJoc0QsU0FBUyxtQkFDeEMzeUIsS0FBS3VSLE9BQU9vdEUsYUFBZWhzRCxTQUFTLGlCQUNwQ3IxQixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSwwQkFBMkJwSSxLQUFLdVIsT0FBT290RSxjQUNqRTMrRSxLQUFLdVIsT0FBT2d1RSxNQUFRdi9FLEtBQUt1UixPQUFPb3RFLGFBQ2hDMytFLEtBQUtxa0YseUJBQ0Nya0YsS0FBS3VrRixpQkFFVHZrRixLQUFLdVIsT0FBTzIwRSxtQkFBcUJ2ekQsU0FBUyx1QkFDNUMzeUIsS0FBS3VSLE9BQU8yMEUsaUJBQW1CdnpELFNBQVMscUJBQ3hDcjFCLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLDhCQUErQnBJLEtBQUt1UixPQUFPMjBFLG1CQUVuRWxtRixLQUFLdVIsT0FBTzJ0RSxhQUFldnNELFNBQVMsYUFBYyxDQUNwRCxNQUFNOWdCLElBQU1pYSxFQUFFOXJCLEtBQUt3UixRQUFROVIsS0FBSyxTQUMxQnltRixRQUFVNW5GLEtBQUs2bkYsTUFDckJ2MEUsSUFBSW5TLEtBQUsseUJBQXlCa2dFLE9BQ2xDL3RELElBQUluUyxLQUFLLHdCQUF3QmtnRSxPQUNqQy90RCxJQUFJblMsS0FBSyxvQkFBb0JtVixPQUM3QjdVLEtBQUt1UixPQUFPMnRFLFdBQWF2c0QsU0FBUyxtQkFDNUJyMUIsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsV0FBWXBJLEtBQUt1UixPQUFPMnRFLFlBQ3hEbC9FLEtBQUt1UixPQUFPd3RFLGlCQUFtQi9CLHVCQUF1QjRCLHVCQUV0RCxNQUFNeUgsT0FBUyxLQUFPOW5GLEtBQUs2bkYsTUFBUUQsU0FFL0JFLE9BQVMsVUFDTCxJQUFJbnFFLFNBQVFoQixTQUFXdUcsV0FBV3ZHLFFBQVNtckUsU0FFckQsQ0FDQSxRQUFtRCxJQUF2QzF6RCxTQUFTLDBCQUE0QyxDQUMvRCxNQUFNdDBCLEtBQU9uQyxPQUFPeTJCLFNBQVMsMkJBQ3pCdDBCLE9BQVMyQixLQUFLaStFLHVCQUF1QkMsZ0JBQ3ZDbCtFLEtBQUt1UixPQUFPMHVFLGlCQUFrQixFQUM5QmpnRixLQUFLdVIsT0FBTzJ1RSxvQkFBcUIsRUFDakNsZ0YsS0FBS3VSLE9BQU80dUUsZ0JBQWtCLElBQ3JCOWhGLE9BQVMyQixLQUFLaStFLHVCQUF1QkcsZUFDOUNwK0UsS0FBS3VSLE9BQU8wdUUsaUJBQWtCLEVBQzlCamdGLEtBQUt1UixPQUFPMnVFLG9CQUFxQixFQUNqQ2xnRixLQUFLdVIsT0FBTzR1RSxnQkFBa0IsSUFDckI5aEYsT0FBUzJCLEtBQUtpK0UsdUJBQXVCSSxlQUM5Q3IrRSxLQUFLdVIsT0FBTzB1RSxpQkFBa0IsRUFDOUJqZ0YsS0FBS3VSLE9BQU8ydUUsb0JBQXFCLEVBQzdCNWlGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUM1QjhDLEtBQUt1UixPQUFPNHVFLGdCQUFrQixDQUFDLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFFM0RuZ0YsS0FBS3VSLE9BQU80dUUsZ0JBQWtCLENBQUMsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxLQUVwRDloRixPQUFTMkIsS0FBS2krRSx1QkFBdUJLLGdCQUM5Q3QrRSxLQUFLdVIsT0FBTzB1RSxpQkFBa0IsRUFDOUJqZ0YsS0FBS3VSLE9BQU8ydUUsb0JBQXFCLEVBQ2pDbGdGLEtBQUt1UixPQUFPNHVFLGdCQUFrQixJQUVoQzdpRixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSw2QkFBOEJwSSxLQUFLdVIsT0FBTzB1RSxpQkFDcEUzaUYsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsOEJBQStCcEksS0FBS3VSLE9BQU80dUUsaUJBQ3JFN2lGLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLGlDQUFrQ3BJLEtBQUt1UixPQUFPMnVFLG1CQUMxRSxDQUNBbGdGLEtBQUt1UixPQUFPczBFLGVBQXlELGlCQUFoQ2x6RCxTQUFTLG1CQUM5Q3IxQixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSw0QkFBNkJwSSxLQUFLdVIsT0FBT3MwRSxnQkFDbkUsSUFBSyxJQUFJcmxFLEVBQUksRUFBR2l1RCxHQUFLenVFLEtBQUt1UixPQUFPNHVFLGdCQUFnQnYvRSxPQUFRNGYsRUFBSWl1RCxHQUFJanVELElBQUssQ0FDcEUsTUFBTTBoRSxJQUFNaG1GLE9BQU95MkIsU0FBUyxxQkFBdUJuUyxJQUMvQzBoRSxJQUFNLElBQ1JsaUYsS0FBS3VSLE9BQU80dUUsZ0JBQWdCMy9ELEdBQUswaEUsSUFFckMsQ0FDQWxpRixLQUFLdVIsT0FBTzR1RSxnQkFBZ0JoMEUsT0FBT3U0RCxVQUNuQzFrRSxLQUFLdVIsT0FBT2l6RSxVQUFZNWxGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS3VSLE9BQU80dUUsaUJBQ2pCLGlCQUFoQ3h0RCxTQUFTLG1CQUM2QixNQUEzQzN5QixLQUFLdVIsT0FBTyswRSxnQkFBZ0J0MEUsWUFDOUJoUyxLQUFLdVIsT0FBTyswRSxnQkFBa0IsRUFDOUJocEYsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsNkJBQThCcEksS0FBS3VSLE9BQU8rMEUsbUJBRXBFdG1GLEtBQUt1UixPQUFPKzBFLGdCQUFrQjN6RCxTQUFTLG9CQUN2Q3IxQixLQUFLbUUsU0FBUzJHLElBQUksT0FBUSw2QkFBOEJwSSxLQUFLdVIsT0FBTyswRSxrQkFFbEIsTUFBM0N0bUYsS0FBS3VSLE9BQU8rMEUsZ0JBQWdCdDBFLGFBQ3JDaFMsS0FBS3VSLE9BQU8rMEUsZ0JBQWtCLEVBQzlCaHBGLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLDZCQUE4QnBJLEtBQUt1UixPQUFPKzBFLGlCQUV4RSxNQUFPLFFBQXFDLElBQTFCM3pELFNBQVMsYUFDckIzeUIsS0FBS3VSLE9BQU9ndUUsUUFBVTVzRCxTQUFTLGVBQ2pDM3lCLEtBQUt1UixPQUFPZ3VFLE1BQVE1c0QsU0FBUyxhQUM3QjN5QixLQUFLcWtGLHlCQUNDcmtGLEtBQUt1a0Ysc0JBRVIsUUFBeUMsSUFBOUI1eEQsU0FBUyxpQkFDckIzeUIsS0FBS3VSLE9BQU91a0MsWUFBY25qQixTQUFTLG1CQUNyQzN5QixLQUFLdVIsT0FBT3VrQyxVQUFZbmpCLFNBQVMsaUJBQ2pDM3lCLEtBQUt1UixPQUFPOHVFLG1CQUFxQixHQUNqQ3JnRixLQUFLcWtGLHlCQUNDcmtGLEtBQUt1a0Ysc0JBRVIsUUFBMEMsSUFBL0I1eEQsU0FBUyxrQkFDckIzeUIsS0FBS3VSLE9BQU9za0MsYUFBZWxqQixTQUFTLG9CQUN0QzN5QixLQUFLdVIsT0FBT3NrQyxXQUFhbGpCLFNBQVMsd0JBQzVCM3lCLEtBQUt1a0YscUJBRVIsQ0FDTCxJQUFLLE1BQU0xb0YsT0FBT21FLEtBQUt1UixPQUFPbXZFLGlCQUNDLElBQWxCL3RELFNBQVM5MkIsTUFBd0JtRSxLQUFLdVIsT0FBT212RSxZQUFZN2tGLE9BQVM4MkIsU0FBUzkyQixPQUNwRm1FLEtBQUt1UixPQUFPbXZFLFlBQVk3a0YsS0FBTzgyQixTQUFTOTJCLFdBR08sSUFBeEM4MkIsU0FBUyw0QkFBOEMzeUIsS0FBS3VSLE9BQU84dUUscUJBQXVCMXRELFNBQVMsNkJBQzVHM3lCLEtBQUt1UixPQUFPOHVFLG1CQUFxQjF0RCxTQUFTLDJCQUMxQzN5QixLQUFLcWtGLG1CQUNMcmtGLEtBQUt1UixPQUFPaXpFLFVBQVk1bEYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLdVIsT0FBTzR1RSxpQkFFaEUsQ0FDQSxNQUFNb0csU0FBVyxDQUFDLE9BQVEsTUFBTyxZQUFhLGFBQWMsV0FBWSxTQUFVLFNBQ2xGLElBQUssTUFBTTFxRixPQUFPMHFGLGNBQ2EsSUFBbEI1ekQsU0FBUzkyQixNQUF3Qm1FLEtBQUt1UixPQUFPMVYsT0FBUzgyQixTQUFTOTJCLE9BQ3hFbUUsS0FBS3VSLE9BQU8xVixLQUFPODJCLFNBQVM5MkIsS0FDaEIsUUFBUkEsS0FDRm1FLEtBQUttL0UscUJBSVgsR0FBd0MsU0FBcEM1aUYsTUFBTXkyQixXQUFXajJCLFFBQVF5bEIsT0FBbUIsQ0FDOUMsTUFBTWdrRSxXQUFheG1GLEtBQUsrbEYsZUFBZSxHQUN2QyxRQUEwQixJQUFmUyxXQUE0QixDQUNyQ3htRixLQUFLdVIsT0FBT291RSxLQUFPNkcsV0FFbkIsTUFBTTMwRSxJQUFNN1IsS0FBS3dSLFFBQVE5UixLQUFLLGtCQUMxQm1TLElBQUlqUixRQUFVaVIsSUFBSSxHQUFHNDBFLFlBQ3ZCNTBFLElBQUksR0FBRzQwRSxVQUFZLEVBRXZCLENBQ0YsTUFBTyxHQUF3QyxTQUFwQ2xxRixNQUFNeTJCLFdBQVdqMkIsUUFBUXlsQixPQUFtQixDQUNyRCxHQUFJeGlCLEtBQUt1UixPQUFPb3VFLE9BQVMzL0UsS0FBS2k5RSxTQUFTZSxhQUFnQmgrRSxLQUFLdVIsT0FBT291RSxPQUFTMy9FLEtBQUtpOUUsU0FBU2MsZ0JBQWtCemdGLEtBQUtzRyxLQUFLNCtFLE1BQVFyeUUsTUFBTXN5RSxpQkFBaUJDLGFBQWFDLFlBRWhLLFlBREEzaUYsS0FBSzBtRixrQkFFQSxDQUNMLE1BQU1GLFdBQWF4bUYsS0FBSytsRixjQUFjLEdBQ3RDLFFBQTBCLElBQWZTLFdBQTRCLENBQ3JDeG1GLEtBQUt1UixPQUFPb3VFLEtBQU82RyxXQUVuQixNQUFNMzBFLElBQU03UixLQUFLd1IsUUFBUTlSLEtBQUssa0JBQzFCbVMsSUFBSWpSLFFBQVVpUixJQUFJLEdBQUc0MEUsWUFDdkI1MEUsSUFBSSxHQUFHNDBFLFVBQVksRUFFdkIsQ0FDRixDQUNGLENBQ0F6bUYsS0FBS2hDLFFBQU8sRUFDZCxDQUVBLHFCQUFNMG9GLEdBQ0osTUFBTTljLGdCQUFrQjVwRSxLQUFLMm1GLHVCQUF1QjNtRixLQUFLdVIsUUFDekQsR0FBSWpVLEtBQUtzRyxLQUFLMkUsTUFBUWpMLEtBQUtzRyxLQUFLNCtFLE1BQVFyeUUsTUFBTXN5RSxpQkFBaUJDLGFBQWFDLFlBQWEsUUFDbkUzRix1QkFBdUI0SixnQkFBZ0JoZCxZQUNyRDdyRSxNQUFNQyxRQUFPLEdBQ25CZ0MsS0FBS21iLE9BQ1AsS0FBTyxDQUNMLE1BQU1tM0MsUUFBVWgxRCxLQUFLZ2xCLE1BQU1qc0IsUUFBT290QixHQUFLQSxFQUFFMWlCLFFBQVUwaUIsRUFBRWxiLE9BQ3JELEdBQUkrcEQsUUFBUTF4RCxPQUFRLENBQ2xCZ3BFLFVBQVV0dUQsVUFBVWhlLEtBQUtzRyxLQUFLc0ssSUFBTWlDLE1BQU1xTCwwQkFBMEJDLE1BQ3BFLE1BQU1uVyxLQUFPLENBQ1hqSCxLQUFNLG1CQUNOMGYsU0FBVXUwQyxRQUFRLEdBQUdwa0QsR0FDckIyNEUsUUFBU2pkLFdBRVh0c0UsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWV4WSxNQUNoQ3lELEdBQUdDLGNBQWN6SSxLQUNmakQsS0FBS0MsS0FBS0MsU0FBUyxpREFFckJ3QyxLQUFLbWIsT0FDUCxNQUNFcFMsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBS0MsU0FBUywrQkFHekIsQ0FDRixDQUVBLDRCQUFNbXBGLENBQXdCcmhGLE1BQzVCLE1BQU1tdUUsYUFBZSxDQUNuQjk3RSxNQUFPLENBQUMsRUFDUkMsS0FBTSxDQUFDLEdBRUh1VyxNQUFRLEdBQ2QsSUFBSyxNQUFNdFMsT0FBT3lKLEtBQUsyN0UsV0FBWSxDQUNqQyxNQUFNaDVFLE1BQVEzQyxLQUFLMjdFLFdBQVdwbEYsS0FDOUIsSUFBSyxJQUFJd2hCLE1BQVEsRUFBR294RCxHQUFLeG1FLE1BQU1rNUUsS0FBS3ZnRixPQUFReWMsTUFBUW94RCxHQUFJcHhELFFBQVMsQ0FDL0QsTUFBTTJuQyxJQUFNLzhDLE1BQU1rNUUsS0FBSzlqRSxPQUN2QixJQUFLcFYsTUFBTS9JLE1BQU1raUYsYUFBK0IsSUFBakJwOEIsSUFBSTF2QyxTQUFvQixDQUNyRCxJQUFJclAsS0FBT3JILFFBQVFDLE1BQU13TyxVQUFVcEYsTUFBTWhDLE9BQ3BCLElBQWpCKytDLElBQUkxdkMsVUFBOEMsaUJBQWpCMHZDLElBQUkxdkMsV0FDdkNyUCxLQUFPckgsUUFBUUMsTUFBTXdPLFVBQVUyM0MsSUFBSTF2QyxVQUNuQzB2QyxJQUFJMXZDLFVBQVcsR0FFYjB2QyxJQUFJeThCLG1CQUNOeDdFLEtBQUtsSyxPQUFPbUQsTUFBTTIyQyxZQUFhLEdBRTdCbVAsSUFBSTQ4QixrQkFDTjM3RSxLQUFLbEssT0FBT21ELE1BQU00MkMsV0FBWSxHQUVoQyxJQUFJcnJDLEtBQU94RSxLQUFLbEssT0FBTzBPLEtBQ3ZCLElBQUt2TyxPQUFPZ3hELFVBQVV6aUQsTUFDcEIsSUFBSyxNQUFNNU8sT0FBT3lKLEtBQUtvN0UsWUFBYSxDQUNsQyxNQUFNcFAsTUFBUSxJQUFJM3BFLE9BQU8sSUFBTTlMLElBQUssS0FDcEM0TyxLQUFPQSxLQUFLa0YsUUFBUTJoRSxNQUFPcnRFLFNBQVNxQixLQUFLbzdFLFlBQVk3a0YsS0FBTSxJQUFNb0ksU0FBU3FCLEtBQUs4NUUsZUFBZXZqRixLQUFNLElBQ3RHLENBRUdLLE9BQU9neEQsVUFBVXppRCxRQUNwQkEsS0FBT3JJLEtBQUswSSxNQUFNLElBQUk0TSxZQUFZLElBQU1qTixLQUFPLEtBQU83TCxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBcUIsZUFBYixZQUFxRCxDQUFFOFksVUFBVSxFQUFNOU0sVUFBVSxJQUFRdEksUUFFcE13RCxLQUFLbEssT0FBTzBPLEtBQU9BLEtBQ25CeEUsS0FBS2xLLE9BQU9ndEIsWUFBYzlpQixLQUFLbEssT0FBT2d0QixhQUFlLENBQUMsRUFDbEQ3c0IsT0FBTzhvRCxJQUFJeEosZ0JBQWtCLElBQy9CdjFDLEtBQUtsSyxPQUFPZ3RCLFlBQVk2c0IsU0FBVzN4QyxTQUFTK2dELElBQUl4SixlQUFnQixLQUU5RHQvQyxPQUFPOG9ELElBQUl6SixrQkFBb0IsSUFDakN0MUMsS0FBS2xLLE9BQU9ndEIsWUFBWThzQixXQUFhNXhDLFNBQVMrZ0QsSUFBSXpKLGlCQUFrQixLQUVsRXIvQyxPQUFPOG9ELElBQUkxSixpQkFBbUIsSUFDaENyMUMsS0FBS2xLLE9BQU9ndEIsWUFBWStzQixVQUFZN3hDLFNBQVMrZ0QsSUFBSTFKLGdCQUFpQixLQUVoRXAvQyxPQUFPOG9ELElBQUlqSCxrQkFBb0IsSUFDakM5M0MsS0FBS2xLLE9BQU9ndEIsWUFBWUMsV0FBYS9rQixTQUFTK2dELElBQUlqSCxpQkFBa0IsS0FFbEVsaUQsTUFBUW1FLEtBQUt3K0Usa0JBQ2Z2NEUsS0FBS2xLLE9BQU8rSyxVQUFZeEIsS0FBS3VvRSxTQUM3QjVuRSxLQUFLN1AsS0FBTzZQLEtBQUtsSyxPQUFPa0wsZUFBaUIsS0FBT2hCLEtBQUtsSyxPQUFPK0ssVUFBWSxLQUN2QyxpQkFBakJrK0MsSUFBSTF2QyxXQUNwQnJQLEtBQUtsSyxPQUFPK0ssVUFBWWsrQyxJQUFJMXZDLFNBQzVCclAsS0FBS29zQyxJQUFNenpDLFFBQVFDLE1BQU15bkQsV0FDekJyZ0QsS0FBSzdQLEtBQU82UCxLQUFLbEssT0FBT2tMLGVBQWlCLEtBQU9oQixLQUFLbEssT0FBTytLLFVBQVksU0FDMUIsSUFBbkNiLEtBQUsvRyxNQUFNd0MsTUFBTWt4QyxXQUFXMWtDLEtBQ3JDakksS0FBSy9HLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsR0FBSzVRLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU0wdkMsUUFBUTVzRCxRQUc3REEsS0FBS2xLLE9BQU84SyxZQUFZelAsVUFDMUJxOEUsYUFBYTk3RSxNQUFNc08sS0FBSzdQLE1BQVE2UCxLQUFLb3NDLElBQ3JDb2hDLGFBQWE5N0UsTUFBTXNPLEtBQUtsSyxPQUFPK0ssV0FBYWIsS0FBS29zQyxNQUN4Q3BzQyxLQUFLbEssT0FBTzhLLFlBQVl4UCxTQUFXNE8sS0FBS2xLLE9BQU84SyxZQUFZdlAsVUFDcEVtOEUsYUFBYTc3RSxLQUFLcU8sS0FBSzdQLE1BQVE2UCxLQUFLb3NDLElBQ3BDb2hDLGFBQWE3N0UsS0FBS3FPLEtBQUtsSyxPQUFPK0ssV0FBYWIsS0FBS29zQyxLQUVsRGxrQyxNQUFNalgsS0FBSytPLEtBQ2IsQ0FDRixDQUNGLENBQ0EsSUFBSyxNQUFNNmdGLGNBQWN4aEYsS0FBSzYrRSxrQkFBbUIsQ0FDL0MsTUFBTWwrRSxLQUFPckgsUUFBUUMsTUFBTXdPLFVBQVV5NUUsWUFDakM3Z0YsS0FBS2xLLE9BQU84SyxXQUFXbFAsWUFDc0MsSUFBcEQ4N0UsYUFBYTk3RSxNQUFNc08sS0FBS2xLLE9BQU9rTSxNQUFNZ0csS0FBSzdYLFFBQ25ENlAsS0FBS2xLLE9BQU9rTSxNQUFNZ0csS0FBS0MsR0FBS3VsRSxhQUFhOTdFLE1BQU1zTyxLQUFLbEssT0FBT2tNLE1BQU1nRyxLQUFLN1gsWUFFSCxJQUExRHE5RSxhQUFhOTdFLE1BQU1zTyxLQUFLbEssT0FBT2tNLE1BQU1tRyxXQUFXaFksUUFDekQ2UCxLQUFLbEssT0FBT2tNLE1BQU1tRyxXQUFXRixHQUFLdWxFLGFBQWE5N0UsTUFBTXNPLEtBQUtsSyxPQUFPa00sTUFBTW1HLFdBQVdoWSxRQUUzRTZQLEtBQUtsSyxPQUFPOEssV0FBV2pQLFlBQzhCLElBQW5ENjdFLGFBQWE3N0UsS0FBS3FPLEtBQUtsSyxPQUFPa00sTUFBTWdHLEtBQUs3WCxRQUNsRDZQLEtBQUtsSyxPQUFPa00sTUFBTWdHLEtBQUtDLEdBQUt1bEUsYUFBYTc3RSxLQUFLcU8sS0FBS2xLLE9BQU9rTSxNQUFNZ0csS0FBSzdYLFlBRUgsSUFBekRxOUUsYUFBYTc3RSxLQUFLcU8sS0FBS2xLLE9BQU9rTSxNQUFNbUcsV0FBV2hZLFFBQ3hENlAsS0FBS2xLLE9BQU9rTSxNQUFNbUcsV0FBV0YsR0FBS3VsRSxhQUFhNzdFLEtBQUtxTyxLQUFLbEssT0FBT2tNLE1BQU1tRyxXQUFXaFksUUFHckYrWCxNQUFNalgsS0FBSytPLEtBQ2IsQ0FDQSxJQUFJMHpDLFNBQVcsQ0FBQyxFQUNoQixNQUFNNGxDLFlBQWN2L0UsS0FBS2cvRSxvQkFBb0JoL0UsS0FBS3VSLE9BQU9ndUUsT0FDckRBLFFBQ0Y1bEMsU0FBVy82QyxRQUFRQyxNQUFNd08sVUFBVWt5RSxNQUFNeGpGLE9BQU80OUMsV0FFbEQsTUFBTW1mLFlBQWMsQ0FDbEJsakIsU0FBVSxHQUFLM3hDLFNBQVNxQixLQUFLbzdFLFlBQVkvcEYsSUFBSyxJQUFNc04sU0FBU3FCLEtBQUs4NUUsZUFBZXpvRixJQUFLLEtBQ3RGay9DLFdBQVksRUFDWkMsVUFBVyxHQUViLEdBQXVCLEtBQW5CeHdDLEtBQUt3d0MsVUFBa0IsQ0FDekIsTUFBTUEsZ0JBQWtCeDRDLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU1DLFVBQVU5ZCxLQUFLd3dDLFdBQ3BDLElBQXJCQSxVQUFVbDFDLFNBQ1p1TixNQUFNalgsS0FBSzQrQyxVQUFVLEdBQUdYLFlBQ3hCMmpCLFlBQVloakIsVUFBWUEsVUFBVSxHQUFHLzVDLE9BQU8raEQsWUFFaEQsQ0FDQSxHQUF3QixLQUFwQng0QyxLQUFLdXdDLFdBQW1CLENBQzFCLE1BQU1BLGlCQUFtQnY0QyxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNQyxVQUFVOWQsS0FBS3V3QyxZQUM5RCxHQUEwQixJQUF0QkEsV0FBV2oxQyxPQUFjLENBQzNCdU4sTUFBTWpYLEtBQUsyK0MsV0FBVyxHQUFHVixZQUN6QixNQUFNNzFDLFFBQVUsR0FDaEIsSUFBSyxNQUFPekQsSUFBS2doRixTQUFVajlFLE9BQU8ySyxRQUFRc3JDLFdBQVcsR0FBRzk1QyxPQUFPaS9DLHVCQUN6RDZoQyxNQUFNdm5FLFdBQ0p1bkUsTUFBTXQ4QyxTQUNSamhDLFFBQVFwSSxLQUFLMmxGLE1BQU0xbUYsWUFBYzhOLFNBQVNxQixLQUFLbzdFLFlBQVk3a0YsS0FBTSxJQUFNb0ksU0FBU3FCLEtBQUs4NUUsZUFBZXZqRixLQUFNLE1BRTFHaTlELFlBQVlqakIsWUFBY2duQyxNQUFNMW1GLFlBQWM4TixTQUFTcUIsS0FBS283RSxZQUFZN2tGLEtBQU0sSUFBTW9JLFNBQVNxQixLQUFLODVFLGVBQWV2akYsS0FBTSxNQUl6SHlELFFBQVFzQixPQUFTLElBQ25CazRELFlBQVlqakIsWUFBY3p6QyxLQUFLYSxPQUFPM0QsU0FFMUMsQ0FDRixDQUNBLE1BQU0wM0MsVUFBWSxHQUNsQixJQUFLLElBQUkzNUIsTUFBUSxFQUFHb3hELEdBQUtucEUsS0FBS28wQyxZQUFZOTRDLE9BQVF5YyxNQUFRb3hELEdBQUlweEQsUUFDNUQyNUIsVUFBVTkvQyxLQUFLLENBQ2J3WCxNQUFPcEosS0FBS28wQyxZQUFZcjhCLE9BQU9qbkIsS0FDL0JGLE1BQU9vUCxLQUFLbzBDLFlBQVlyOEIsT0FBT25uQixRQW1FbkMsTUFoRWtCLENBQ2hCbUksS0FBTSxZQUNOakksS0FBTWtQLEtBQUtsUCxLQUNYc1AsSUFBS0osS0FBS3loRixPQUNWaHJGLE9BQVEsQ0FDTjZuQixnQkFBaUIsQ0FDZnR0QixJQUFLLENBQ0hKLE1BQU8rTixTQUFTcUIsS0FBS283RSxZQUFZcHFGLElBQUssSUFBTTJOLFNBQVNxQixLQUFLODVFLGVBQWU5b0YsSUFBSyxLQUVoRkMsSUFBSyxDQUNITCxNQUFPK04sU0FBU3FCLEtBQUtvN0UsWUFBWW5xRixJQUFLLElBQU0wTixTQUFTcUIsS0FBSzg1RSxlQUFlN29GLElBQUssS0FFaEZDLElBQUssQ0FDSE4sTUFBTytOLFNBQVNxQixLQUFLbzdFLFlBQVlscUYsSUFBSyxJQUFNeU4sU0FBU3FCLEtBQUs4NUUsZUFBZTVvRixJQUFLLEtBRWhGQyxJQUFLLENBQ0hQLE1BQU8rTixTQUFTcUIsS0FBS283RSxZQUFZanFGLElBQUssSUFBTXdOLFNBQVNxQixLQUFLODVFLGVBQWUzb0YsSUFBSyxLQUVoRkMsSUFBSyxDQUNIUixNQUFPK04sU0FBU3FCLEtBQUtvN0UsWUFBWWhxRixJQUFLLElBQU11TixTQUFTcUIsS0FBSzg1RSxlQUFlMW9GLElBQUssS0FFaEZDLElBQUssQ0FDSFQsTUFBTytOLFNBQVNxQixLQUFLbzdFLFlBQVkvcEYsSUFBSyxJQUFNc04sU0FBU3FCLEtBQUs4NUUsZUFBZXpvRixJQUFLLEtBRWhGQyxJQUFLLENBQ0hWLE1BQU8rTixTQUFTcUIsS0FBS283RSxZQUFZOXBGLElBQUssSUFBTXFOLFNBQVNxQixLQUFLODVFLGVBQWV4b0YsSUFBSyxLQUVoRkMsSUFBSyxDQUNIWCxNQUFPK04sU0FBU3FCLEtBQUtvN0UsWUFBWTdwRixJQUFLLElBQU1vTixTQUFTcUIsS0FBSzg1RSxlQUFldm9GLElBQUssTUFHbEZtRixRQUFTLENBQ1ArL0MsSUFBSyxDQUNIN2xELE1BQU9rTSxLQUFLYSxJQUFJZ0IsU0FBU3FCLEtBQUtvN0UsWUFBWXhuQyxLQUFNLElBQUtqMUMsU0FBU3FCLEtBQUs4NUUsZUFBZWxtQyxLQUFNLE1BRTFGN3VCLElBQUssQ0FDSG4wQixNQUFPK04sU0FBU3FCLEtBQUtvN0UsWUFBWTlwRixJQUFLLElBQU1xTixTQUFTcUIsS0FBSzg1RSxlQUFleG9GLElBQUssTUFHbEY2bkMsTUFBTyxDQUNMb2dCLElBQUt2NUMsS0FBS3U1QyxJQUNWd1osVUFBVy95RCxLQUFLK3lELFVBQ2hCQyxXQUFZaHpELEtBQUtnekQsWUFFbkJRLFlBQ0E5aEIsVUFDQTJDLFVBRUZ4bkMsZUFBZ0IsQ0FDZC9iLEtBQU1rUCxLQUFLbFAsS0FDWDQ5QyxXQUFXLEVBQ1gzaEMsUUFBUyxDQUNQQyxJQUFLaE4sS0FBSzJMLE9BRVpnakMsWUFBYTlqQyxNQUFNNjJFLG1CQUFtQkMsU0FDdEMveUMsTUFBTyxDQUNMdlMsU0FBUyxJQUdieHpCLE1BQ0FtTixVQUFXLENBQ1RDLFFBQVN0WCxTQUFTcUIsS0FBSzRnRixpQkFBa0IsS0FJL0MsQ0FFQSxvQ0FBYWdCLENBQXlCdGQsV0FDcEMsTUFBTTN2RSxZQUFjK2lGLHVCQUF1QjRKLGdCQUFnQmhkLFdBQ3JEdWQsV0FBYW50QyxNQUFNOS9CLEdBQUcsb0JBQW9CLENBQUN4akIsSUFBS3VqQixLQUFNM1UsUUFDdEQ1TyxJQUFJNmEsT0FBT3JELEtBQU9qVSxNQUFNaVUsS0FDMUI1USxLQUFLdWdCLE9BQU9DLEtBQUssY0FBZSxDQUM5QnpmLEtBQU0saUJBQ04wZixTQUFVbmUsT0FBT21FLEtBQUs2bEUsVUFBVXR1RCxXQUFXNWIsTUFBS3dQLEdBQVcsWUFBTkEsSUFDckQyM0UsUUFBUzVzRixNQUFNaVUsS0FFakI4ckMsTUFBTW90QyxJQUFJLG1CQUFvQkQsWUFDaEMsSUFFRmx0RixNQUFNOEQsTUFBTUMsUUFBTyxFQUNyQixDQUVBLDRCQUFhNG9GLENBQWlCaGQsV0FDNUIsTUFBTTN2RSxZQUFjczRDLE1BQU03aEMsT0FBT2s1RCxXQU9qQyxhQU5NM3ZFLE1BQU1pRSxPQUFPLENBQ2pCLDBCQUEyQmpFLE1BQU1xNUMsU0FDakMsMEJBQTJCcjVDLE1BQU11NUMsU0FDakMseUJBQTBCdjVDLE1BQU11NUMsaUJBRTVCdjVDLE1BQU1ncUQsbUJBQ0xocUQsS0FDVCxDQUtBLG1CQUFheVcsQ0FBUXBSLFFBQVUsQ0FBQyxHQUU5QkEsUUFBVVYsUUFBUUMsTUFBTTZhLFlBQVksQ0FDbENpbUUsS0FBTSxFQUNOaEIsYUFBY3JoRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDeENvcEYsZ0JBQWlCaHBGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUMzQ2dwRixpQkFBa0I1b0YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsK0JBQzVDZ2lGLFdBQVk1aEYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsWUFDdEMyb0YsZUFBZ0J2b0YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsNkJBQzFDK2lGLGdCQUFpQjNpRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw4QkFDM0NpakYsZ0JBQWlCN2lGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLCtCQUMzQ2dqRixtQkFBb0I1aUYsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0NBQzlDc25GLFVBQVc1bEYsUUFBUUMsTUFBTXdPLFVBQVUvUCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxnQ0FDN0Q2aEYsV0FBWS9CLHVCQUF1QjRCLHVCQUNuQzJELGlCQUFrQmpsRixLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNNjBCLG1CQUFtQixDQUFFQyxZQUFhLG9CQUFxQjU1QyxLQUFNLE9BQ3JHZ3BGLFdBQVksQ0FBQyxFQUNiOUgsTUFBT2ppRixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwyQkFDakMrakYsV0FBWSxDQUFDLEVBQ2JZLGlCQUFrQixDQUFDLEVBQ25Cc0Msa0JBQW1CLEdBQ25CekQsWUFBYSxDQUNYcHFGLElBQUssR0FDTEMsSUFBSyxHQUNMQyxJQUFLLEdBQ0xDLElBQUssR0FDTEMsSUFBSyxHQUNMQyxJQUFLLEdBQ0xDLElBQUssR0FDTEMsSUFBSyxHQUNMcWlELEtBQU0sSUFFUmttQyxlQUFnQixDQUNkOW9GLElBQUssRUFDTEMsSUFBSyxFQUNMQyxJQUFLLEVBQ0xDLElBQUssRUFDTEMsSUFBSyxFQUNMQyxJQUFLLEVBQ0xDLElBQUssRUFDTEMsSUFBSyxFQUNMcWlELEtBQU0sR0FFUm9yQyxhQUFjLEdBQ2R4dUMsVUFBVyxHQUNYdXFDLG1CQUFvQixHQUNwQnhxQyxXQUFZLEdBQ1o2RCxZQUFhLEdBQ2I5RCxTQUFVLEVBQ1ZvckMsYUFBYyxHQUNkcG1DLGFBQWMsQ0FDWjEzQyxJQUFLLEVBQ0xELElBQUssR0FFUDdNLEtBQU0sR0FDTnlvRCxJQUFLLEdBQ0x3Z0Msd0JBQXdCLEVBQ3hCaG5CLFVBQVcsR0FDWEMsV0FBWSxHQUNadVYsU0FBVSxHQUNWa1osT0FBUSw0QkFDUjkxRSxNQUFPLDZCQUNOM1IsU0FDSCxJQUFJMDlFLHVCQUF1QjE5RSxTQUFTdEIsUUFBTyxFQUM3QyxFQ3QrRGEsTUFBTXNwRiw4QkFBOEI5dEUsZ0JBQ2pELHlCQUFXQyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyRHZMLEdBQUksNEJBQ0p5TCxRQUFTLENBQUMsT0FBUSxTQUFVLHVCQUM1QmpMLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLDRCQUMxQm9jLFNBQVUsNERBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxJQUNSRixlQUFlLEdBRW5CLENBRUEsYUFBTXNYLEdBQ0osTUFBTUMsZ0JBQWtCLzBCLE1BQU04MEIsVUFFOUJDLFVBQVU0aEMsS0FBT3B3RCxPQUFPOHZELG1CQUFtQnAxRCxLQUFLQyxLQUFLeTFELE9BQVMsSUFDOUQsTUFBTWtzQixXQUFhNWhGLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLFlBSTdDLE9BSEFrMEIsVUFBVW0yRCxLQUEwQixPQUFuQmpxRixLQUFLQyxLQUFLeTFELEtBQzNCNWhDLFVBQVUrbkIsSUFBTTc3QyxLQUFLQyxLQUFLMFcsT0FBTzFmLEtBQUttUyxLQUFLdzRFLGFBQWUsbUNBQW9DLENBQUUvbEMsSUFBSytsQyxhQUU5Rjl0RCxTQUNULENBRUEsYUFBQW8yRCxDQUFldmhGLE1BQ2IsTUFBTXhCLE9BQVMsQ0FDYnZGLE1BQU8sQ0FDTHdDLEtBQU0sQ0FDSmt4QyxVQUFXM3NDLEtBQUsvRyxNQUFNd0MsS0FBS2t4QyxZQUcvQng4QyxLQUFNNlAsS0FBSzdQLEtBQ1gyRixPQUFRLENBQUMsR0FFWCxJQUFLLE1BQU1GLE1BQU8sQ0FBQyxPQUFRLFNBQVUsUUFBUyxxQkFBc0IsNkJBQThCLFVBQVcsU0FDN0QsaUJBQW5Db0ssS0FBS2xLLE9BQU91UixjQUFjelIsTUFBcUJvSyxLQUFLbEssT0FBT3VSLFlBQVl6UixLQUFLK0UsU0FDaEZoQixPQUFPQyxVQUFVQyxlQUFlakgsS0FBSzRMLE9BQU8xSSxPQUFRLGlCQUN2RDBJLE9BQU8xSSxPQUFPdVIsWUFBYyxDQUFDLEdBRS9CN0ksT0FBTzFJLE9BQU91UixZQUFZelIsS0FBT29LLEtBQUtsSyxPQUFPdVIsWUFBWXpSLE1BRzdELE9BQVFvSyxLQUFLNUgsTUFDWCxJQUFLLFlBQ0hvRyxPQUFPMUksT0FBT3drRixxQkFBdUJ0NkUsS0FBS2xLLE9BQU93a0YscUJBQ2pEOTdFLE9BQU8xSSxPQUFPeWtGLGdCQUFrQnY2RSxLQUFLbEssT0FBT3lrRixnQkFDNUMsTUFDRixJQUFLLE9BU0wsSUFBSyxRQUVMLElBQUssU0FFTCxJQUFLLFNBQ0gsTUFaRixJQUFLLGFBQ0gvN0UsT0FBTzFJLE9BQU8wckYsa0JBQW9CeGhGLEtBQUtsSyxPQUFPMHJGLGtCQUM5QyxNQUNGLElBQUssUUFDSGhqRixPQUFPMUksT0FBTytLLFVBQVliLEtBQUtsSyxPQUFPK0ssVUFDdENyQyxPQUFPMUksT0FBT2tMLGVBQWlCaEIsS0FBS2xLLE9BQU9rTCxlQVMvQyxPQUFPeEMsTUFDVCxDQUVBLGtCQUFNaWpGLENBQWNDLFVBQVc1OUUsUUFDN0IsR0FBSUEsT0FBUSxDQUNWLE1BQU02OUUscUJBQXVCRCxVQUFVdHhGLFFBQU9xRyxJQUE0QixJQUF2QkEsRUFBRXVVLE9BQU8raUMsWUFBcUJod0MsS0FBSXRILEdBQUtBLEVBQUV3UixLQUFJN1gsUUFBTyxDQUFDcUcsRUFBRzJxRCxFQUFHMW5ELElBQU1BLEVBQUUwSSxRQUFRM0wsS0FBTzJxRCxJQUFHcDdDLFFBQU8zSixNQUFPOHRCLEVBQUc1UCxLQUN2SjRQLEVBQUVsNUIsV0FBV2dQLFNBQVMsU0FBV3NhLElBQzFCNFAsSUFDTixJQUNIdTNELFVBQVlDLGVBQWU1N0UsT0FBTzI3RSxVQUNwQyxDQUNBLE1BQU0vZSxJQUFNLENBQUMsRUFDUGlmLEtBQU8sQ0FBQyxFQUNkLElBQUssTUFBTTV0RixTQUFTMHRGLFVBQ2xCLElBQUssTUFBTTFoRixRQUFRaE0sTUFBTWtVLE1BQU1xM0MsU0FDa0IsaUJBQXBDdi9DLEtBQUsvRyxPQUFPd0MsTUFBTWt4QyxXQUFXMWtDLEtBQ2xDakksS0FBSy9HLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsR0FBR3JJLE1BQU0sVUFDaENqRyxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS2d2RixLQUFNNWhGLEtBQUsvRyxNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLE1BQ3hFMjVFLEtBQUs1aEYsS0FBSy9HLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsSUFBTSxJQUV2QzI1RSxLQUFLNWhGLEtBQUsvRyxNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLElBQUloWCxLQUFLK0MsTUFBTTdELE9BRTlDd3lFLElBQUkzaUUsS0FBSy9HLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsSUFBTSxDQUFDLEdBSzdDLE1BQU1GLFlBQWMxUSxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNNjBCLG1CQUFtQixDQUFFQyxZQUFhMzZDLEtBQUt2QixPQUFPbW5CLElBQUlDLE1BQU0ya0UsZUFBZWxvRixPQUFPbUUsS0FBSzZrRSxNQUFPdnFFLEtBQU0sSUFBS3c2QyxhQUFhLElBQzVKLElBQUssTUFBTTV5QyxRQUFRK0gsTUFDakI0NkQsSUFBSTNpRSxLQUFLL0csTUFBTXdDLEtBQUtreEMsVUFBVTFrQyxJQUFNbE8sS0FBS3duRixjQUFjdmhGLEtBQUtrdkMsWUFFMUR2MUMsT0FBT21FLEtBQUs4akYsTUFBTWpuRixRQUNwQnVLLFFBQVEyK0IsSUFBSSw2QkFBOEIrOUMsTUFFNUMsTUFBTUUsV0FBYSxHQUNuQixJQUFLLE1BQU05dEYsU0FBUzB0RixVQUFXLENBQzdCLE1BQU1sckUsUUFBVSxHQUNoQixJQUFLLE1BQU14VyxRQUFRaE0sTUFBTWtVLE1BQU1xM0MsU0FDekI1bEQsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUsrdkUsSUFBSzNpRSxLQUFLL0csT0FBT3dDLE1BQU1reEMsV0FBVzFrQyxLQUN6RXVPLFFBQVF2bEIsS0FBSzBILFFBQVFDLE1BQU02YSxZQUFZLENBQ3JDMjRCLElBQUtwc0MsS0FBS2lJLElBQ1QwNkQsSUFBSTNpRSxLQUFLL0csTUFBTXdDLEtBQUtreEMsVUFBVTFrQyxNQUdqQ3VPLFFBQVE3YixRQUNWbW5GLFdBQVc3d0YsS0FBSyxDQUNkbTdDLElBQUtwNEMsTUFBTWlVLEdBQ1hDLE1BQU9zTyxTQUdiLENBQ0lzckUsV0FBV25uRixRQUNiMnhDLE1BQU11M0IsZ0JBQWdCaWUsV0FFMUIsQ0FFQSxtQkFBTXIxRCxDQUFlbjJCLE1BQU9vMkIsVUFDMUIsR0FBd0MsV0FBcENwMkIsTUFBTXkyQixXQUFXajJCLFFBQVF5bEIsT0FBcUIsQ0FDaEQsR0FBSWptQixNQUFNeTJCLFVBQVVpekQsVUFBVTU5RSxRQUFRLHlCQUEyQixFQUMvRCxPQUVGOUwsTUFBTXkyQixVQUFVaXpELFVBQVkxcEYsTUFBTXkyQixVQUFVaXpELFVBQVksd0JBQ3hELE1BQU1sOEUsT0FBaUUsaUJBQWpENG9CLFNBQVMsb0NBRS9CLFFBRGVBLFNBQVMsb0NBQXNDLElBQUkzZ0IsWUFFaEUsSUFBSyxVQUNHaFMsS0FBSzBuRixhQUFhNzBFLE9BQU9oRyxNQUFNRCxPQUFPNDRDLFNBQVN4aEQsS0FBSWhPLEdBQUtBLEVBQUV1YixPQUFPdFgsUUFBUThQLFFBQy9FLE1BQ0YsSUFBSyxVQUNHL0osS0FBSzBuRixhQUFhOW5GLE9BQU9KLE9BQU91SixHQUFHMDJDLFNBQVNwcEQsUUFBT0osR0FBS0EsYUFBYXFoRSxhQUFZdHpELEtBQUkvTixHQUFLQSxFQUFFc2IsU0FBU3hILFFBQzNHLE1BQ0YsSUFBSyxVQUNHL0osS0FBSzBuRixhQUFhcHFGLEtBQUtxUCxPQUFPNjRDLFVBQVUsR0FHcEQsQ0FDQXhsRCxLQUFLbWIsT0FDUCxDQUVBLG1CQUFhekssQ0FBUXBSLFFBQVUsQ0FBQyxHQUM5QixJQUFJZ29GLHNCQUFzQmhvRixTQUFTdEIsUUFBTyxFQUM1QyxFQzNJRixNQUFNZ3FGLHNCQUFzQkMsZ0JBQzFCLFdBQUE1aUYsR0FDRWhKLFFBQ0EyRCxLQUFLa29GLFFBQVUsQ0FBQyxDQUNsQixDQUVBLHVCQUFXQyxHQUNULE9BQU92cEYsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNOHJGLGFBQWMsQ0FDbkQveEYsS0FBTSxXQUNONjJELE9BQVEsSUFFWixDQUVBLHVCQUFXNTVCLEdBQ1QsTUFBTyxPQUNULENBRUEsY0FBSWhZLEdBQ0YsTUFBTyxFQUNULEVBR0ssTUFBTStzRSxTQUNYLGlCQUFPQyxDQUFZQyxVQUNqQnoxRSxPQUFPMDFFLFlBQWMsSUFBSVAsY0FDekIsTUFBTTV3RCxTQUFXOTVCLEtBQUtzRyxLQUFLMkUsS0FDckJpdkQsa0JBQW9CbDZELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGlCQUNwRG9yRixTQUFTcHhGLEtBQUssQ0FDWmQsS0FBTSxXQUNOc1ksTUFBTyxlQUNQODVFLE1BQU8sY0FDUC9xRixLQUFNLHNDQUNOcWhFLFFBQVMxbkMsU0FDVHF4RCxNQUFPLENBQ0wsQ0FDRTl0RSxRQUFRLEVBQ1JsZCxLQUFNLHlCQUNOckgsS0FBTSxXQUNOMkssT0FBUXpELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUNsQ3dSLE1BQU8sZ0JBQ1BnNkUsUUFBU3BtRixvQkFBc0JzRixjQUFjOG1ELGVBQWUvekMsU0FFOUQsQ0FDRUEsUUFBUSxFQUNSbGQsS0FBTSxtQkFDTnJILEtBQU0sYUFDTjJLLE9BQVF6RCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFDbEN3UixNQUFPLHdCQUNQZzZFLFFBQVNwbUYsb0JBQ0RzRixjQUFjZ25ELG1CQUFtQmowQyxTQUUzQyxDQUNFNkgsUUFBUSxFQUNSL2tCLEtBQU0scUJBQ05ySCxLQUFNLG9CQUNOc1ksTUFBTywyQkFDUGc2RSxRQUFTcG1GLGVBQWtCZ2xGLHNCQUFzQjUyRSxVQUVuRCxDQUNFOFIsUUFBUSxFQUNSL2tCLEtBQU0sbUJBQ05ySCxLQUFNLGVBQ05zWSxNQUFPLHFCQUNQZzZFLFFBQVNwbUYsZUFBa0JvM0Usd0JBQXdCaHBFLFVBRXJELENBQ0U4UixRQUFRLEVBQ1Iva0IsS0FBTSxvQkFDTnJILEtBQU0sc0JBQ05zWSxNQUFPLGdDQUNQZzZFLFFBQVNwbUYsZUFBa0IwNkUsdUJBQXVCdHNFLFVBRXBELENBQ0VpSyxRQUFRLEVBQ1JsZCxLQUFNLHFCQUNOb0gsTUFBTyxZQUNQek8sS0FBTSxXQUNOMkssT0FBUXpELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBQ2xDd1IsTUFBTyxnQkFDUGc2RSxRQUFTcG1GLG9CQUFzQnNGLGNBQWNnb0QsYUFBYWoxQyxTQUU1RCxDQUNFNkgsUUFBUSxFQUNSL2tCLEtBQU0saUNBQ05ySCxLQUFNLFdBQ05zWSxNQUFPLGdCQUNQZzZFLFFBQVM3aUQsU0FBU21ILGlCQUVwQixDQUNFeHFCLFFBQVEsRUFDUi9rQixLQUFNLGNBQ05ySCxLQUFNLFlBQ05zWSxNQUFPLGlCQUNQZzZFLFFBQVNwbUYsZUFBa0JzRixjQUFjaW5ELGdCQUkzQzJJLG9CQUNGM2tELE9BQU84MUUsYUFBZSxJQUFJWCxjQUMxQk0sU0FBU3B4RixLQUFLLENBQ1pkLEtBQU0sY0FDTnNZLE1BQ0UseUZBQ0Y4NUUsTUFBTyxlQUNQL3FGLEtBQU0sbUNBQ05xaEUsUUFBUzFuQyxTQUNUcXhELE1BQU8sQ0FDTCxDQUNFOXRFLFFBQVEsRUFDUmxkLEtBQU0sZ0NBQ05ySCxLQUFNLGFBQ04ySyxPQUFRekQsS0FBS29FLEtBQUtDLElBQUlDLEtBQUtDLFdBQzNCNk0sTUFBTyxzQkFDUGc2RSxRQUFTL3RFLFNBQ1ByZCxLQUFLb0UsS0FBS0MsSUFBSUMsS0FBS0ssY0FBZSxFQUNsQzNFLEtBQUtvRSxLQUFLQyxJQUFJQyxLQUFLQyxXQUFhOFksU0FHcEMsQ0FDRUEsUUFBUSxFQUNSbGQsS0FBTSx3Q0FDTnJILEtBQU0sZUFDTjJLLE9BQVF6RCxLQUFLb0UsS0FBS0MsSUFBSUMsS0FBS0ssYUFDM0J5TSxNQUFPLHdCQUNQZzZFLFFBQVMvdEUsU0FDUHJkLEtBQUtvRSxLQUFLQyxJQUFJQyxLQUFLSyxhQUFlMFksT0FDbENyZCxLQUFLb0UsS0FBS0MsSUFBSUMsS0FBS0MsWUFBYSxPQU01QyxDQUVBLHFCQUFPK21GLENBQWdCbHlGLElBQUt1akIsS0FBTTNVLE1BQ2hDLE1BQU04eEIsU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBQ3JCc2dGLFdBQWE1dUUsS0FBS3ZhLEtBQUssOEJBQThCcUssU0FDM0Q4K0UsV0FBVzd4QixTQUFTLGFBQ2hCNS9CLFVBQ0Z5eEQsV0FBV0MsTUFDVCwrREFDRXhyRixLQUFLQyxLQUFLQyxTQUFTLG1CQUNuQixzQ0FHTnFyRixXQUFXQyxNQUNULDZEQUNFeHJGLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ25CLGtEQUVKeWMsS0FDR3ZhLEtBQUssNkJBQ0xzeUIsT0FBTXoxQixPQUFTcUwsY0FBY3NtRCxTQUFTM3hELFNBQ3pDMGQsS0FDR3ZhLEtBQUssK0JBQ0xzeUIsT0FBTXoxQixPQUFTb3pCLHNCQUFzQmpmLE9BQU9uVSxRQUNqRCxFQ2hLSyxNQUFNd3NGLFdBQ1gsK0JBQVdDLEdBQ1QsTUFBTyxDQUFDLFdBQVksVUFBVyxXQUNqQyxDQUVBLDRCQUFhQyxDQUFpQnAyRSxPQUFRdk4sTUFDcEMsR0FDRUEsS0FBS2pILE1BQ0wwcUYsV0FBV0MscUJBQXFCaG1GLFNBQVNzQyxLQUFLakgsTUFDOUMsQ0FDQSxNQUFNNnFGLFNBQVdyMkUsT0FBT2hHLE1BQU1pRyxLQUFLdlQsS0FDN0JzTSxFQUFJdkcsS0FBS3VHLEVBQUlxOUUsU0FBVyxFQUN4QnI4QixFQUFJdm5ELEtBQUt1bkQsRUFBSXE4QixTQUFXLEVBQ3hCbnZFLE9BQVNtdkUsU0FDVHB2RSxNQUFRb3ZFLFNBQ2QsSUFBSUMsaUJBQW1CdDJFLE9BQU9qRyxPQUFPeU8sV0FBV2hsQixRQUFPd2IsTUFDckQsTUFBTXVlLEVBQUl2ZSxJQUFJYSxPQUNkLE9BQ0V4VyxPQUFPa3RGLFFBQVFoNUQsRUFBRXZrQixFQUFHQSxFQUFHQSxFQUFJaU8sUUFDM0I1ZCxPQUFPa3RGLFFBQVFoNUQsRUFBRXk4QixFQUFHQSxFQUFHQSxFQUFJOXlDLE9BQzdCLElBR0YsT0FES292RSxpQkFBaUJ2b0YsU0FBUXVvRixpQkFBbUJ0MkUsT0FBT2pHLE9BQU9tTyxZQUN2RHpWLEtBQUtqSCxNQUNYLElBQUssV0FDSCxHQUFJaUgsS0FBSzJRLFFBQVUwVyxTQUFTQyxXQUFXSSxRQUNyQyxHQUFJbThELGlCQUFpQnZvRixPQUNuQixJQUFLLE1BQU1xUSxTQUFTazRFLGlCQUNsQng4RCxTQUFTdUMsa0JBQWtCamUsTUFBTWhYLE1BQU9xTCxXQUtuQzZqRixpQkFBaUJ2b0YsT0FDMUIrckIsU0FBUzhDLGlCQUFpQm5xQixLQUFNNmpGLGlCQUFpQjl5RixRQUFPME0sR0FBS0EsRUFBRTlJLE1BQU15MUIsT0FBTzl1QixTQUFRb0QsS0FBSWpCLEdBQUtBLEVBQUU5SSxTQUUvRjB5QixTQUFTOEMsaUJBQWlCbnFCLEtBQU1oSSxLQUFLZ2xCLE1BQU0ycUIsUUFBUTUyQyxRQUFPb3RCLEtBQU9BLEVBQUV6SCxZQUFXaFksS0FBSXlmLEdBQUtBLEVBQUV6SCxhQUUzRixNQUNGLElBQUssZ0JBQ3VCLElBQWYxVyxLQUFLK2pGLE9BQWtELGlCQUFsQi9qRixLQUFLZ2tGLGVBQTJELElBQTNCdmdGLEdBQUcwMkMsUUFBUW42QyxLQUFLK2pGLFFBQTJFLG1CQUExQ3RnRixHQUFHMDJDLFFBQVFuNkMsS0FBSytqRixPQUFPL2pGLEtBQUtna0YsV0FDaEt2Z0YsR0FBRzAyQyxRQUFRbjZDLEtBQUsrakYsT0FBTy9qRixLQUFLZ2tGLFVBQVVILGtCQUV4QyxNQU9GLFFBQ0UsR0FBSTdqRixLQUFLbXNELFNBQVduc0QsS0FBS2drRixTQUFVLENBQ2pDLE1BQU1yNEIsSUFBTXJwRCxjQUFjb0osVUFBVTFMLEtBQUttc0QsU0FDekMsR0FDRVIsSUFBSTNyRCxLQUFLZ2tGLFdBQ3FCLG1CQUF2QnI0QixJQUFJM3JELEtBQUtna0YsVUFFaEIsSUFDRWhrRixLQUFLdUgsTUFBUWdHLE9BQU9oRyxNQUFNbFAsS0FDMUJzekQsSUFBSTNyRCxLQUFLZ2tGLFVBQVVoa0YsS0FDckIsQ0FBRSxNQUFPb1ksT0FDUHZTLFFBQVFvSSxLQUFLbUssTUFBTTVOLFFBQ3JCLENBRUosRUFHTixDQUNGLEVDdkVLLE1BQU15NUUsOEJBQThCQyxTQUN6QyxpQkFBQXh2RSxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUNwQjNjLEtBQUtzRyxLQUFLMkUsT0FDWjBSLEtBQ0d2YSxLQUFLLGtCQUNMa3lDLE9BQ0Msd0VBQ0V0MEMsS0FBS0MsS0FBS0MsU0FBUyw4QkFDbkIsYUFFTnljLEtBQUt2YSxLQUFLLDJCQUNQa3lDLE9BQU8sc0VBQ1J0MEMsS0FBS0MsS0FBS0MsU0FBUyw2QkFDbkIsYUFDRnljLEtBQUt2YSxLQUFLLDJCQUEyQnN5QixPQUFNLEtBQ3pDLElBQUl5QyxPQUNGLENBQ0UvbEIsTUFBT3BSLEtBQUtDLEtBQUtDLFNBQVMsNkJBQzFCaVQsUUFBU25ULEtBQUtDLEtBQUtDLFNBQVMsZ0NBQzVCazNCLFFBQVMsQ0FDUDAzQyxRQUFTLENBQ1AzdUUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUywrQkFDMUJtM0IsU0FBVXJ5QixnQkFDRmhGLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLHNCQUF1QixHQUN2RHNrRCxPQUFPKzhCLFNBQVNsK0UsUUFBTyxHQUczQjRQLE1BQU8sQ0FDTDFkLEtBQU0sNkJBQ05KLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsVUFDMUJtM0IsU0FBVSxTQUdkcFosUUFBUyxTQUVYLENBQUMsR0FDRHZkLFFBQU8sRUFBSSxJQUVmaWMsS0FBS3ZhLEtBQUssMEJBQTBCc3lCLE9BQU0xdkIsaUJBQ2pDaEYsS0FBS3dpRCxNQUFNNWlELElBQUksbUJBQW1CaWpELFlBQVl2OUMsT0FBT2xCLEtBQUtnb0YsVUFBVTNyRixNQUFNQyxRQUFPLEVBQUksSUFHbEcsRUM1Q0ssTUFBTTJyRixnQ0FBZ0NDLG9CQUMzQyxpQkFBQTV2RSxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUN4QixJQUFJNHZFLFlBQWEsRUFDakIsR0FBdUIsT0FBbkJ2c0YsS0FBS0MsS0FBS3kxRCxLQUNaNjJCLFlBQWEsT0FDUixRQUEyQixJQUFoQnZzRixLQUFLd3NGLE9BQ3JCLElBQUssTUFBTW5xRixLQUFLQyxPQUFPSixPQUFPbEMsS0FBS3dzRixPQUFPdG9GLFNBQ3BDN0IsRUFBRXF6RCxPQUFTMTFELEtBQUtDLEtBQUt5MUQsT0FDdkI2MkIsWUFBYSxHQUlkQSxhQUNINXZFLEtBQ0d2YSxLQUFLLDJCQUNMa3lDLE9BQ0MsNENBQ0V0MEMsS0FBS0MsS0FBS0MsU0FBUyw0QkFDbkIsS0FDQUYsS0FBS0MsS0FBS0MsU0FBUyw0QkFDbkIsUUFFTnljLEtBQUt2YSxLQUFLLDJCQUEyQnN5QixPQUFNLEtBQ3pDLE1BQU1saUIsUUFDSixNQUNBeFMsS0FBS0MsS0FBS0MsU0FBUyw4QkFEbkIsVUFJQUYsS0FBS0MsS0FBS0MsU0FBUyxvQ0FKbkIsVUFPQUYsS0FBS0MsS0FBS0MsU0FBUyx5Q0FQbkIsVUFVQUYsS0FBS0MsS0FBS0MsU0FBUyx3Q0FWbkIsVUFhQUYsS0FBS0MsS0FBS0MsU0FBUyxvQ0FDbkIsT0FDRixJQUFJaTNCLE9BQ0YsQ0FDRS9sQixNQUFPcFIsS0FBS0MsS0FBS0MsU0FBUyw0QkFDMUJpVCxRQUFTWCxRQUNUNGtCLFFBQVMsQ0FBQyxFQUNWblosUUFBUyxTQUVYLENBQUMsR0FDRHZkLFFBQU8sRUFBSSxJQUduQixFQ2hESyxNQUFNK3JGLDJCQUEyQkMsZUFDdEMsaUJBQUFod0UsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFLeEIsSUFBSWd3RSxZQUFjM3NGLEtBQUtzRyxLQUFLNCtFLE1BQVFyeUUsTUFBTXN5RSxpQkFBaUJDLGFBQWFDLFlBQ3hFLElBQUtzSCxZQUFhLENBQ2hCLE1BQU1DLFFBQVU1c0YsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQzFDLEdBQUlndEYsUUFBVSxFQUFHLENBRWZELFlBRGlCM3NGLEtBQUtxUCxPQUFPdFcsUUFBT3FHLEdBQUssQ0FBQ0EsRUFBRTRlLFVBQVVDLFFBQVU3ZSxFQUFFNGUsVUFBVWhlLEtBQUtzRyxLQUFLc0ssS0FBT2lDLE1BQU1xTCwwQkFBMEJ1akQsTUFBTy83RCxTQUFTbU4sTUFBTXFMLDBCQUEwQkMsU0FBUTdhLE9BQzVKc3BGLE9BQzNCLENBQ0YsQ0FFSUQsY0FDRmh3RSxLQUNHdmEsS0FBSywyQkFDTGt5QyxPQUFPLGtDQUFvQ3QwQyxLQUFLQyxLQUFLQyxTQUFTLGlDQUFtQyxRQUNwR3ljLEtBQUt2YSxLQUFLLHdCQUF3QnN5QixPQUFNLEtBQ3RDZ3JELHVCQUF1QnRzRSxRQUFPLEtBSTlCcFQsS0FBS3NHLEtBQUs0K0UsTUFBUXJ5RSxNQUFNc3lFLGlCQUFpQkMsYUFBYUMsY0FDeEQxb0UsS0FDR3ZhLEtBQUssMkJBQ0xreUMsT0FDQywyQkFDRXQwQyxLQUFLQyxLQUFLQyxTQUFTLHNCQUNuQixRQUVOeWMsS0FBS3ZhLEtBQUssaUJBQWlCc3lCLE9BQU0sS0FDL0IwbkQsd0JBQXdCaHBFLFFBQU8sSUFHckMsRUNwQ0ssTUFBTXk1RSxrQkFBa0JobEYsU0FDN0IsV0FBQUUsQ0FBYUMsS0FBTUMsY0FDTyxJQUFiRCxLQUFLSSxNQUNkSixLQUFLSSxJQUFNLGdEQUVickosTUFBTWlKLEtBQU1DLFNBQ1p2RixLQUFLdUYsUUFBVUEsT0FDakIsQ0FFQSxVQUFNNmtGLENBQU1DLE1BQ1YsSUFBS3JxRixLQUFLc3FGLFFBRVIsT0FBT3ZoRixHQUFHQyxjQUFjMFUsTUFBTXBnQixLQUFLQyxLQUFLQyxTQUFTLGtCQUVuRCxNQUFNK3NGLE1BQVEzckYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT3d1RixPQUM1Q0MsT0FBUyxHQUNmLElBQUlDLDRCQUlKLEdBSEFGLE1BQU1HLFlBQWM5aUYsY0FBY20rQyxVQUFVd2tDLE1BQU1HLG9CQUN2QyxJQUFJNW9GLEtBQUt5b0YsTUFBTUcsYUFBYXZwRixLQUFLLENBQUVtQixPQUFPLEtBQVNHLE1BQzFEd0IsU0FBU3NtRixNQUFNRyxhQUVqQkgsTUFBTUcsYUFDTkgsTUFBTUcsWUFBYzFxRixLQUFLL0YsTUFBTThCLE9BQU9DLFFBQVF1M0MsR0FBR3I5QyxRQUVqRHUwRixrQ0FBb0MsSUFBSXZ1RSxTQUFRaEIsVUFDOUMsTUFBTXl2RSxtQkFDSkosTUFBTUcsWUFBYzFxRixLQUFLL0YsTUFBTThCLE9BQU9DLFFBQVF1M0MsR0FBR3I5QyxNQUM3QzAwRixxQkFBdUJMLE1BQU1HLFlBQWNDLG1CQUMzQ3JsRixLQUFPLENBQ1hvSixNQUFPLElBQ1ArQixRQUFTblQsS0FBS0MsS0FBSzBXLE9BQU8sNEJBQTZCLENBQ3JENDJFLGlCQUFrQjdxRixLQUFLL0YsTUFBTThCLE9BQU9DLFFBQVF1M0MsR0FBR3I5QyxNQUMvQ3kwRixtQkFDQUMscUJBQ0FFLG9CQUFxQlAsTUFBTUcsWUFDM0IvWCxNQUFPM3lFLEtBQUs1SixPQUVkcytCLFFBQVMsQ0FDUDZyQyxPQUFRLENBQ045aUUsS0FBTSwrQkFDTkosTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyxlQUMxQm0zQixTQUFVLElBQ0R6WixTQUFRLElBR25Cc2xELFFBQVMsQ0FDUC9pRSxLQUFNLCtCQUNOSixNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLGdCQUMxQm0zQixTQUFVLEtBQ1I0MUQsTUFBTVEsVUFBWUosbUJBQ2xCSixNQUFNRyxZQUFjRSxxQkFDYjF2RSxTQUFRLE1BSXJCSyxRQUFTLFNBQ1Q1QixRQUFTLENBQUMsT0FBUSxXQUVwQixJQUFJOGEsT0FBT252QixNQUFNdEgsUUFBTyxFQUFJLEtBRXpCeXNGLDZCQUE2QixPQUVwQyxJQUFLLE1BQU81dUYsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWdnRixPQUNuQ3IwRixPQUEyQixJQUFsQmdHLE9BQU9oRyxRQUNyQnMwRixPQUFPdHpGLFdBQVc4SSxLQUFLZ3JGLGNBQWNudkYsSUFBSzNGLE1BQU9tMEYsT0FFbkQsTUFDTS84RSxZQUFjdE4sS0FBS2pFLE9BQU91UixZQUFZcFgsTUFDdEMrakIsV0FBYXdHLGVBRkYsK0NBRTJCLENBQUVuVCxZQUFhazlFLFNBQzNELElBQUlubkYsU0FBVyxDQUNiTyxLQUFNdEcsS0FBS3NHLEtBQUtzSyxHQUNoQitCLFFBQVN6TSxZQUFZME0sV0FBVyxDQUFFalcsTUFBTytGLEtBQUsvRixRQUM5QytWLE9BQVFoUSxLQUFLNUosS0FDYnFhLFFBQVN3SixNQUtYLE9BSElvd0UsT0FDRmhuRixTQUFXRyxZQUFZQyxjQUFjSixTQUFVLGlCQUVwQ0csWUFBWWtOLE9BQU9yTixTQUNsQyxDQUVBLG1CQUFNMm5GLENBQWVyMEUsZUFBZ0J6Z0IsTUFBT20wRixNQUMxQyxJQUFJbHJDLG1CQUNBZixLQUVGQSxLQURFeDJDLGNBQWNtK0MsVUFBVTd2RCxjQUNaLElBQUk0TCxLQUFLNUwsT0FBT2lMLEtBQUssQ0FBRW1CLE9BQU8sS0FBU0csTUFFOUN3QixTQUFTL04sT0FFbEIsTUFBTTB6RSxVQUFZNXBFLEtBQUsvRixNQUFNOEIsT0FDN0IsT0FBUTRhLGdCQUNOLElBQUssWUFDSHdvQyxtQkFBcUI3aEQsS0FBS0MsS0FBS0MsU0FBUyxrQkFDeEN3QyxLQUFLL0YsTUFBTXNnQyxXQUFXNmpCLEtBQU0sQ0FBRWxrQixhQUFhLElBQzNDLE1BQ0YsSUFBSyxTQUNIaWxCLG1CQUFxQjdoRCxLQUFLQyxLQUFLQyxTQUFTLHFCQUN4QzRnRCxXQUFhcCtDLEtBQUtpckYsZ0JBQWdCN3NDLEtBQU1pc0MsTUFDeEMsTUFDRixJQUFLLGNBQ0hsckMsbUJBQXFCN2hELEtBQUtDLEtBQUtDLFNBQVMsb0JBQ3hDd0MsS0FBSy9GLE1BQU11akQsTUFBTW9zQixVQUFVNXRFLFFBQVF1M0MsR0FBR3I5QyxNQUFRa29ELE1BQzlDLE1BQ0YsSUFBSyxRQUNIZSxtQkFBcUI3aEQsS0FBS0MsS0FBS0MsU0FBUyxnQkFDeEN3QyxLQUFLL0YsTUFBTWlFLE9BQU8sQ0FDaEIsbUNBQ0UwckUsVUFBVWhtRCxnQkFBZ0JodEIsSUFBSVYsTUFBUWtvRCxPQUc5QyxNQUFPLENBQUVlLG1CQUFvQmYsS0FDL0IsQ0FHQSxxQkFBTTZzQyxDQUFpQi8wRixNQUFPbTBGLE1BQzVCLE1BQU16d0UsU0FBV3NNLGFBQWF0TSxTQUM5QixJQUFJSyxXQUFhd0csZUFBZTdHLFNBQVUsQ0FBQyxHQUN2Q3ZXLFNBQVcsQ0FDYk8sS0FBTXRHLEtBQUtzRyxLQUFLc0ssR0FDaEIrQixRQUFTek0sWUFBWTBNLFdBQVcsQ0FBRWpXLE1BQU8rRixLQUFLL0YsUUFDOUMrVixPQUFRMVMsS0FBS0MsS0FBSzBXLE9BQU8sb0JBQXFCLENBQzVDMCtELE1BQU8zeUUsS0FBSzVKLE9BRWRxYSxRQUFTd0osTUFFUG93RSxPQUNGaG5GLFNBQVdHLFlBQVlDLGNBQWNKLFNBQVUsV0FFakQsTUFBTXlNLGNBQWdCdE0sWUFBWWtOLE9BQU9yTixVQUNuQ2lKLFdBQWF3RCxRQUFRbzdFLFVBQzNCLFFBQTJCLElBQWhCNStFLEtBQUsxTCxRQUEwQyxJQUFoQjBMLEtBQUsxTCxPQUFjLENBQzNELE1BQU11cUYsV0FBYWoxRixNQUNuQitqQixLQUFPM04sS0FBSzVNLEtBQUssY0FBYyxHQUMvQnVhLEtBQUtsZCxRQUFRd1UsT0FBUzVDLE9BQ3BCQyxLQUFLQyxVQUFVLENBQ2J1QyxTQUFVcFIsS0FBSy9GLE1BQU1pVSxHQUNyQnVXLGFBQWEsRUFDYjBCLFFBQVMsQ0FDUFksT0FBUW9rRSxXQUNScmtFLE9BQVFxa0UsZUFJZCxNQUFNQyxZQUFjbGxFLGFBQWF4UyxZQUFZdUcsTUFJN0MsYUFITW14RSxZQUFZbmlFLHNCQUNabWlFLFlBQVluaEUsb0JBQ1ptaEUsWUFBWTcvRCxpQkFDWDYvRCxZQUFZNWhFLE9BQ3JCLENBQ0YsQ0FFQSxZQUFNdHJCLENBQVFvSCxLQUFNQyxTQUNsQixRQUNpQyxJQUF4QnZGLEtBQUt1RixRQUFRd0UsYUFDVyxJQUF4Qi9KLEtBQUt1RixRQUFROGxGLE9BQ3BCLENBQ0EsSUFBSXBsRixLQUNBcWxGLEtBRXdCLE9BQXhCdHJGLEtBQUt1RixRQUFRd0UsUUFDZjlELEtBQU8zSSxLQUFLNlEsTUFBTWpSLElBQUk4QyxLQUFLdUYsUUFBUThsRixRQUNuQ0MsS0FBT3JsRixLQUFLa3ZDLFlBRVptMkMsS0FBT3RyRixLQUFLdUYsUUFBUXdFLE9BQU9vRSxNQUFNalIsSUFBSThDLEtBQUt1RixRQUFROGxGLFFBQVFsMkMsV0FFNUQsSUFBSyxJQUFJMzBCLEVBQUksRUFBR2l1RCxHQUFLNmMsS0FBS3Z2RixPQUFPd3hFLE9BQU8zc0UsT0FBUTRmLEVBQUlpdUQsR0FBSWp1RCxJQUNsRDhxRSxLQUFLdnZGLE9BQU93eEUsT0FBTy9zRCxHQUFHNnhCLE1BQVFyeUMsS0FBS2tPLEtBQ3JDbzlFLEtBQUt2dkYsT0FBT3d4RSxPQUFPL3NELEdBQUs1aEIsUUFBUUMsTUFBTTZhLFlBQVk0eEUsS0FBS3Z2RixPQUFPd3hFLE9BQU8vc0QsR0FBSWxiLE9BSWpELE9BQXhCdEYsS0FBS3VGLFFBQVF3RSxjQUNUOUQsS0FBSy9ILE9BQU8sQ0FDaEIsZ0JBQWlCb3RGLEtBQUt2dkYsT0FBT3d4RSxTQUUvQnZ0RSxLQUFLakMsTUFBTXdULE9BQVMsSUFBSTQ0RSxVQUN0Qm1CLEtBQUt2dkYsT0FBT3d4RSxPQUFPN3RFLE1BQUtpekUsT0FBU0EsTUFBTXRnQyxNQUFRcnlDLEtBQUtrTyxLQUNwRGxPLEtBQUt1RixpQkFHRHZGLEtBQUt1RixRQUFRd0UsT0FBT3d1Qyx3QkFBd0IsT0FBUSxDQUFDK3lDLE9BQzNEdHJGLEtBQUtqQyxNQUFNd1QsT0FBUyxJQUFJNDRFLFVBQ3RCbUIsS0FBS3Z2RixPQUFPd3hFLE9BQU83dEUsTUFBS2l6RSxPQUFTQSxNQUFNdGdDLE1BQVFyeUMsS0FBS2tPLEtBQ3BEbE8sS0FBS3VGLFVBR1R2RixLQUFLakMsTUFBTUMsUUFBTyxFQUNwQixZQUNRM0IsTUFBTTZCLE9BQU9vSCxLQUFNQyxRQUU3QixFQzdMSyxNQUFNZ21GLGlCQUFpQnBtRixTQUM1QixXQUFBRSxDQUFhQyxLQUFNQyxjQUNPLElBQWJELEtBQUtJLE1BQ2RKLEtBQUtJLElBQU0sNkNBRWJySixNQUFNaUosS0FBTUMsUUFDZCxDQUdBLHdCQUFPNG9CLENBQW1CN1gsWUFDeEIsT0FBUUEsWUFDTixJQUFLLE9BQ0gsT0FBT3ZDLFVBQVV1UCxnQkFBZ0JwUCxLQUNuQyxJQUFLLFVBQ0gsT0FBT0gsVUFBVXVQLGdCQUFnQmpaLFFBQ25DLElBQUssV0FDSCxPQUFPMEosVUFBVXVQLGdCQUFnQm5QLFNBQ25DLElBQUssYUFDSCxPQUFPSixVQUFVdVAsZ0JBQWdCOGxCLFdBQ25DLFFBQ0UsT0FBT3IxQixVQUFVdVAsZ0JBQWdCdFAsUUFFdkMsQ0FPQSxlQUFNdzNFLENBQVdqZSxRQUNmLE1BQU0xM0MsV0FBYTcxQixLQUFLakUsT0FBT3d4RSxPQUMzQjN1RSxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPd3hFLFFBQ3BDLEdBQ0osSUFBSyxNQUFNb0YsU0FBU3BGLE9BQ2xCMTNDLFdBQVczK0IsS0FBS3k3RSxPQUVsQixhQUFhM3lFLEtBQUs5QixPQUFPLENBQUUsZ0JBQWlCMjNCLFlBQzlDLENBRUEsaUJBQU00MUQsQ0FBYXB1RSxPQUNqQixNQUFNK1osU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBQ3JCakQsS0FBT3RGLEtBQUtqRSxPQUFPd3hFLE9BQU9sd0QsT0FDMUJ0VCxPQUFTL0osS0FBSy9GLE1BQVErRixLQUFLL0YsTUFBUSxLQUNuQzA0RSxNQUFRLElBQUl3WCxVQUFVN2tGLEtBQU0sQ0FBRXlFLE9BQVFzaEYsT0FBUXJyRixLQUFLa08sS0FDekQsR0FBSWtwQixVQUFZdTdDLE1BQU01MkUsT0FBTzJ2RixRQUMzQixhQUFhL1ksTUFBTTUwRSxNQUFNQyxRQUFPLEVBRXBDLENBTUEsMkJBQU0ydEYsR0FFSixNQUFNcjFFLFdBQWFpMUUsU0FBU3A5RCxrQkFDMUJudUIsS0FBS2pFLE9BQU91bkIsaUJBRVJ1cUQsU0FBVzd0RSxLQUFLakUsT0FBTzh4RSxTQUN2QjVsRSxNQUFRakksS0FBSy9GLE9BQU9vakMsZ0JBQWdCd3dDLFVBQzFDLEdBQUs1bEUsTUFHRSxJQUFxQixJQUFqQkEsTUFBTXJILE9BS2YsT0FBT21JLEdBQUdDLGNBQWMwVSxNQUN0QnBnQixLQUFLQyxLQUFLMFcsT0FBTyx1QkFBd0IsQ0FBRWhhLE1BQU8rRixLQUFLL0YsTUFBTTdELFFBRTFELENBQ0wsTUFBTTZmLE1BQVEsSUFBSWxDLFVBWWxCLE9BWEFrQyxNQUFNaGMsTUFBUStGLEtBQUsvRixNQUNuQmdjLE1BQU1oTyxNQUFRQSxNQUFNLEdBQUdpRyxHQUN2QitILE1BQU1LLFdBQWFBLFdBQ25CTCxNQUFNbE0sT0FBUy9KLEtBQUtyQyxLQUNwQnNZLE1BQU0xUSxRQUFVLGtCQUNoQjBRLE1BQU1qRyxPQUFTMVMsS0FBS0MsS0FBSzBXLE9BQU8sbUJBQW9CLENBQ2xEcTNFLEtBQU10ckYsS0FBSzVKLEtBQ1h5M0UsU0FDQXYzRCxXQUFZdFcsS0FBS2pFLE9BQU91bkIsd0JBRXBCck4sTUFBTTlVLGFBQ0M4VSxNQUFNa2dCLFdBQ3JCLEVBdkJFLE9BQU9wdEIsR0FBR0MsY0FBYzBVLE1BQU1wZ0IsS0FBS0MsS0FBS0MsU0FBUyxpQkF3QnJELENBUUEsb0JBQU1vdUYsQ0FBZ0JwNUQsS0FBTXQ4QixPQUMxQixJQUFLOEosS0FBS3NxRixTQUFvQixVQUFUOTNELEtBRW5CLE9BQU96cEIsR0FBR0MsY0FBYzBVLE1BQU1wZ0IsS0FBS0MsS0FBS0MsU0FBUyxrQkFFbkQsSUFBS3dDLEtBQUtqRSxPQUFPOHZGLGdCQUEyQixVQUFUcjVELEtBRWpDLE9BQU96cEIsR0FBR0MsY0FBYzBVLE1BQ3RCcGdCLEtBQUtDLEtBQUswVyxPQUFPLDRCQUE2QixDQUM1Q2hhLE1BQU8rRixLQUFLL0YsTUFBTTdELEtBQ2xCazFGLEtBQU10ckYsS0FBSzVKLFFBSWpCLElBQUs0SixLQUFLakUsT0FBT3NDLEtBQUtqRixRQUFtQixVQUFUbzVCLEtBQzlCLE9BQU96cEIsR0FBR0MsY0FBYzBVLE1BQU1wZ0IsS0FBS0MsS0FBS0MsU0FBUyx1QkFFbkQsTUFBTTJ3RSxVQUFZbnVFLEtBQUtqRSxPQUFPdXlFLE1BQU1ILFVBQ3BDLElBQUkyZCxVQUFZOXJGLEtBQUtqRSxPQUFPK3ZGLFVBQ3hCemQsU0FBV3J1RSxLQUFLakUsT0FBT3V5RSxNQUFNRCxTQUNqQyxHQUFJdnlFLE1BQU11eUUsVUFFUixhQUFhcnVFLEtBQUs5QixPQUFPLENBQ3ZCLHdCQUF5QixJQUc3QixHQUFJaEksT0FBU200RSxTQUFXbjRFLE1BU3RCLGFBSk04SixLQUFLOUIsT0FBTyxDQUNoQixxQkFBc0I0dEYsVUFDdEIsd0JBQXlCNTFGLGNBRWQ4SixLQUFLK3JGLG9CQUVwQixHQUFhLGFBQVR2NUQsTUFBdUI2N0MsU0FBV0YsVUFBVyxDQUUvQyxJQUF1QyxVQUE1Qm51RSxLQUFLZ3NGLGtCQUE4QixPQUk5QyxTQUhNaHNGLEtBQUs5QixPQUFPLENBQ2hCLDBCQUEyQm13RSxXQUV6QkEsV0FBYUYsVUFHZixhQURNbnVFLEtBQUs5QixPQUFPLENBQUUscUJBQXNCNHRGLGtCQUM3QjlyRixLQUFLaXNGLGdCQUV0QixNQUFPLEdBQWEsYUFBVHo1RCxNQUF1QjY3QyxTQUFXLEVBRTNDLGFBQWFydUUsS0FBSzlCLE9BQU8sQ0FDdkIsMEJBQTJCbXdFLFVBR2pDLENBRUEscUJBQU0yZCxHQUNKLE1BQU1FLGlCQUFtQmxzRixLQUFLL0YsT0FBT3NqRCxjQUMvQnV3QixhQUFlOXRFLEtBQUtqRSxPQUFPK3hFLGFBQ2pDLEdBQUk5dEUsS0FBS2pFLE9BQU84dkYsZUFDZCxPQUFJSyxrQkFBb0JwZSxxQkFDaEI5dEUsS0FBSzlCLE9BQU8sQ0FDaEIsd0JBQXlCOEIsS0FBS2pFLE9BQU91eUUsTUFBTUgsWUFFdENwbEUsR0FBR0MsY0FBY3VLLEtBQ3RCalcsS0FBS0MsS0FBSzBXLE9BQU8saUNBQWtDLENBQ2pEaGEsTUFBTytGLEtBQUsvRixNQUFNN0QsS0FDbEJrMUYsS0FBTXRyRixLQUFLNUosUUFLckIsQ0FFQSxvQkFBTTYxRixHQUNKLElBQUtqc0YsS0FBS2pFLE9BQU9zQyxLQUFLakYsT0FBUSxPQUM5QixJQUF1QyxVQUE1QjRHLEtBQUtnc0Ysa0JBQThCLE9BQzlDLE1BQU1FLGlCQUFtQmxzRixLQUFLL0YsTUFBTXNqRCxjQUM5QjR1QyxhQUFlLEdBQ2ZyZSxhQUFlOXRFLEtBQUtqRSxPQUFPK3hFLGFBQ2pDLElBQUlzZSxZQUFjcHNGLEtBQUtqRSxPQUFPc3dGLE1BQU05dUMsY0FBYyt1QyxNQUNsRCxHQUFJSixpQkFBbUJFLFlBQWN0ZSxhQUNuQyxJQUFLLElBQUl6d0QsTUFBUSxFQUFHQSxPQUFTK3VFLFlBQWEvdUUsUUFDcEM2dUUsaUJBQW1CRSxZQUFjL3VFLE9BQVN5d0QsZUFDNUNzZSxhQUFlL3VFLE9Bb0JyQixPQVpBOHVFLGFBQWFqMUYsS0FDWCxDQUNFZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyw4Q0FDekJ3d0UsS0FBTS9wRSxTQUFTbW9GLGNBRWpCLENBQ0VoMkYsS0FBTTRKLEtBQUtqRSxPQUFPOHhFLFNBQ2xCRyxLQUFNLHNCQUdKaHVFLEtBQUt1c0Ysc0JBQXNCSixvQkFDM0Juc0YsS0FBS3dzRix1QkFDRXhzRixLQUFLOUIsT0FBTyxDQUN2Qix1QkFBd0I4QixLQUFLakUsT0FBTzB3RixhQUV4QyxDQU1BLHlCQUFNQyxHQUVKLEdBQUkxc0YsS0FBS2pFLE9BQU84dkYsZUFBZ0IsT0FDaEMsTUFBTU0sYUFBZSxHQUNmL3lGLE9BQVMsQ0FDYml6RixNQUFPcnNGLEtBQUtqRSxPQUFPc3dGLE1BQU05dUMsY0FBY3JzQixRQUN2Qzd5QixLQUFNMkIsS0FBS2pFLE9BQU9zQyxLQUFLakYsUUFFbkJDLE9BQVMsQ0FDYmd6RixNQUFPcnNGLEtBQUtqRSxPQUFPc3dGLE1BQU1oekYsT0FDekJnRixLQUFNMkIsS0FBS2pFLE9BQU9zQyxLQUFLaEYsUUFFbkJDLFlBQ0cwRyxLQUFLakUsT0FBT3N3RixNQUFNTSxPQURyQnJ6RixXQUVFMEcsS0FBS2pFLE9BQU9zQyxLQUFLL0UsTUFjekIsR0FaSUYsT0FBT2lGLE1BQVFqRixPQUFPaXpGLE9BQ3hCRixhQUFhajFGLEtBQUssQ0FDaEJkLEtBQU1rSCxLQUFLQyxLQUFLQyxTQUFTLDhDQUN6Qnd3RSxLQUFNL3BFLFNBQVM3SyxPQUFPaXpGLFNBR3RCaHpGLE9BQU9nRixNQUFRaEYsT0FBT2d6RixPQUN4QkYsYUFBYWoxRixLQUFLLENBQ2hCZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxlQUN6Qnd3RSxLQUFNL3BFLFNBQVM1SyxPQUFPZ3pGLFNBR3RCL3lGLFdBQ0YsSUFBSyxNQUFNMk8sU0FBUzNPLFlBQWEsQ0FDL0IsTUFBTW8wQixRQUFVemxCLE1BQU03UixLQUFLeVAsTUFBTSxtQkFFN0I2bkIsVUFDRnpsQixNQUFNaEIsZUFBaUJ5bUIsUUFBUSxHQUMvQnpsQixNQUFNN1IsS0FBT3MzQixRQUFRLElBRUgsZ0JBQWhCemxCLE1BQU0vUixRQUNSK1IsTUFBTS9SLGFBQ0UsSUFBSTRMLEtBQUttRyxNQUFNL1IsT0FBT2lMLEtBQUssQ0FBRW1CLE9BQU8sS0FDMUNHLE9BRUF3RixNQUFNL1IsT0FDUmkyRixhQUFhajFGLEtBQUssQ0FDaEJkLEtBQU02UixNQUFNN1IsS0FDWjQzRSxLQUFNL2xFLE1BQU0vUixNQUNaK1EsZUFBZ0JnQixNQUFNaEIsZ0JBRzVCLENBT0YsYUFMTWpILEtBQUt1c0Ysc0JBQXNCSixlQUM1Qi95RixPQUFPaUYsTUFBUWhGLE9BQU9nRixPQUFTMkIsS0FBS2pFLE9BQU9vdkYsa0JBQ3hDbnJGLEtBQUt3c0YsdUJBR0F4c0YsS0FBSzlCLE9BQU8sQ0FBRSx5QkFBeUIsR0FDdEQsQ0FPQSx3QkFBTTB1RixDQUFvQkMsY0FDeEIsSUFBSyxNQUFNbGEsU0FBUzN5RSxLQUFLakUsT0FBT3d4RSxPQUM5QixHQUFJb0YsTUFBTXRnQyxNQUFRdzZDLGFBQWF4NkMsSUFBSyxDQUNsQ3NnQyxNQUFNNTJFLE9BQU8ydkYsU0FBVSxRQUVLMXJGLEtBQUsvRixNQUFNa1UsTUFBTXpPLE1BQzNDdUcsTUFDZ0IsVUFBZEEsS0FBSzVILE1BQW9CNEgsS0FBSzdQLE9BQVN5MkYsYUFBYXoyRixPQUt0RDJTLEdBQUdDLGNBQWN1SyxLQUNmalcsS0FBS0MsS0FBSzBXLE9BQU8sMkJBQTRCLENBQzNDMCtELE1BQU9rYSxhQUFhejJGLEtBQ3BCazFGLEtBQU10ckYsS0FBSzVKLFFBTGZ5MkYsYUFBYTl3RixPQUFPMnZGLFNBQVUsRUFTaEMsS0FDRixPQUdJMXJGLEtBQUs5QixPQUFPLENBQUUsZ0JBQWlCOEIsS0FBS2pFLE9BQU93eEUsU0FFN0NzZixhQUFhOXdGLE9BQU8ydkYsVUFDdEIzaUYsR0FBR0MsY0FBY3pJLEtBQ2ZqRCxLQUFLQyxLQUFLMFcsT0FBTyxnQ0FBaUMsQ0FDaEQwK0QsTUFBT2thLGFBQWF6MkYsS0FDcEJrMUYsS0FBTXRyRixLQUFLNUosY0FHVDRKLEtBQUsvRixNQUFNbUQsd0JBQXdCLE9BQVEsQ0FDL0N3QixRQUFRQyxNQUFNd08sVUFBVXcvRSxnQkFHOUIsQ0FPQSwyQkFBTU4sQ0FBdUJKLGNBQzNCLEdBQTRCLElBQXhCQSxhQUFhdnJGLE9BQWpCLENBQ0EsSUFBSyxNQUFNazRELGVBQWVxekIsYUFBYyxDQUV0QyxJQUFLcnpCLFlBQVlrVixLQUFNLFNBQ3ZCLElBQUkvbEUsWUFBY2pJLEtBQUsvRixNQUFNb2pDLGdCQUFnQnk3QixZQUFZMWlFLE1BS3pELEdBQXFCLElBQWpCNlIsTUFBTXJILE9BQWMsQ0FDdEIsTUFBTWtzRixvQkFBc0J4dkYsS0FBSzZRLE1BQU16TyxNQUNyQ3VHLE1BQ2dCLFVBQWRBLEtBQUs1SCxNQUFvQjRILEtBQUs3UCxPQUFTMGlFLFlBQVkxaUUsT0FFbkQwMkYsY0FDRjdrRixZQUFjakksS0FBSy9GLE1BQU1tRCx3QkFBd0IsT0FBUSxDQUN2RHdCLFFBQVFDLE1BQU13TyxVQUFVeS9FLGtCQUcxQjdrRixZQUFjakksS0FBSy9GLE1BQU1zN0MsWUFBWXVqQixZQUFZMWlFLEtBQU0sR0FDbkQwaUUsWUFBWTd4RCxzQkFDUmdCLE1BQU0sR0FBRy9KLE9BQU8sQ0FDcEIsNkJBQTZCLEVBQzdCLHdCQUF5QjQ2RCxZQUFZN3hELGlCQUk3QyxDQUVBLEdBREFnQixNQUFRQSxNQUFNLEdBQ1csZ0JBQXJCNndELFlBQVlrVixXQUVSL2xFLE1BQU1LLDBCQUNQLENBS0wsR0FBSUwsTUFBTS9SLE1BQVE0aUUsWUFBWWtWLEtBQU8sR0FDbkMsSUFBSyxJQUFJM3dELE1BQVEsRUFBR0EsT0FBU3k3QyxZQUFZa1YsS0FBTTN3RCxRQUN6Q3BWLE1BQU0vUixNQUFRNGlFLFlBQVlrVixLQUFPM3dELE9BQVMsS0FDNUN5N0MsWUFBWWtWLE1BQVEzd0QsWUFDZHBWLE1BQU13NkMsbUJBQW1CcVcsWUFBWWtWLGFBSzNDL2xFLE1BQU13NkMsbUJBQW1CcVcsWUFBWWtWLEtBQzdDLENBQ0YsQ0FDQSxPQUFPaHVFLEtBQUsrc0Ysc0JBQXNCWixhQWpESCxDQWtEakMsQ0FPQSxtQkFBTWEsR0FFSixhQURNaHRGLEtBQUs5QixPQUFPLENBQUUsd0JBQXlCLFVBQ2hDOEIsS0FBSzlCLE9BQU8sQ0FDdkIseUJBQXdELEVBQTlCOEIsS0FBS2pFLE9BQU91eUUsTUFBTUgsV0FFaEQsQ0FHQSxvQkFBTXFlLEdBQ0osTUFBTXQyRixNQUFROEosS0FBS2pFLE9BQU9vdkYsV0FDMUIsSUFBS2oxRixPQUFtQixLQUFWQSxNQUFjLE9BQzVCLE1BQU0wakIsU0FBV3NNLGFBQWF0TSxTQUM5QixJQUFJSyxXQUFhd0csZUFBZTdHLFNBQVUsQ0FBQyxHQUMzQyxNQUFNOUosY0FBZ0J0TSxZQUFZa04sT0FBTyxDQUN2QzlNLEtBQU10RyxLQUFLc0csS0FBS3NLLEdBQ2hCK0IsUUFBU3pNLFlBQVkwTSxXQUFXLENBQUVqVyxNQUFPK0YsS0FBSy9GLFFBQzlDK1YsT0FBUTFTLEtBQUtDLEtBQUswVyxPQUFPLHlCQUEwQixDQUNqRHEzRSxLQUFNdHJGLEtBQUs1SixPQUVicWEsUUFBU3dKLE9BRUwzTixXQUFhd0QsUUFBUW83RSxVQUMzQixRQUEyQixJQUFoQjUrRSxLQUFLMUwsUUFBMEMsSUFBaEIwTCxLQUFLMUwsT0FBYyxDQUMzRCxNQUFNdXFGLGtCQUFvQixJQUFJcnBGLEtBQUs1TCxPQUFPaUwsS0FBSyxDQUFFbUIsT0FBTyxLQUFTRyxNQUNqRXdYLEtBQU8zTixLQUFLNU0sS0FBSyxjQUFjLEdBQy9CdWEsS0FBS2xkLFFBQVF3VSxPQUFTNUMsT0FDcEJDLEtBQUtDLFVBQVUsQ0FDYnVDLFNBQVVwUixLQUFLL0YsTUFBTWlVLEdBQ3JCdVcsYUFBYSxFQUNiMEIsUUFBUyxDQUNQWSxPQUFRb2tFLFdBQ1Jya0UsT0FBUXFrRSxlQUlkLE1BQU1DLFlBQWNsbEUsYUFBYXhTLFlBQVl1RyxZQUN2Q214RSxZQUFZbmlFLHNCQUNabWlFLFlBQVluaEUsY0FDbEJtaEUsWUFBWTcvRCxnQkFDZCxDQUNGLENBT0EsMkJBQU13aEUsQ0FBdUJaLGNBRTNCLElBQUssTUFBTXJ6QixlQUFlcXpCLGFBQ3BCcnpCLFlBQVk3eEQsaUJBQ2Q2eEQsWUFBWTFpRSxLQUFPLEdBQUcwaUUsWUFBWTd4RCxtQkFBbUI2eEQsWUFBWTFpRSxTQUUxQyxnQkFBckIwaUUsWUFBWWtWLEtBQ2RsVixZQUFZa1YsS0FBTzF3RSxLQUFLQyxLQUFLQyxTQUFTLDZCQUV0Q3M3RCxZQUFZa1YsS0FBTyxJQUFJbFYsWUFBWWtWLFFBQVExd0UsS0FBS0MsS0FBS0MsU0FDbkQsaUJBSU4sTUFDTXljLFdBQWF3RyxlQURGLHFEQUMyQixDQUFFMHJFLGVBQzlDLGFBQWEzb0YsWUFBWWtOLE9BQU8sQ0FDOUI5TSxLQUFNdEcsS0FBS3NHLEtBQUtzSyxHQUNoQitCLFFBQVN6TSxZQUFZME0sV0FBVyxDQUFFalcsTUFBTytGLEtBQUsvRixRQUM5QytWLE9BQVExUyxLQUFLQyxLQUFLMFcsT0FBTyx1QkFBd0IsQ0FBRXEzRSxLQUFNdHJGLEtBQUs1SixPQUM5RHFhLFFBQVN3SixNQUViLENBRUEsMEJBQU1nekUsQ0FBc0IvK0UsSUFDMUIsSUFBS2xPLEtBQUtzcUYsUUFFUixPQUFPdmhGLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUtDLFNBQVMsa0JBRW5ELElBQUt3QyxLQUFLakUsT0FBTzh2RixlQUVmLE9BQU85aUYsR0FBR0MsY0FBYzBVLE1BQ3RCcGdCLEtBQUtDLEtBQUswVyxPQUFPLDRCQUE2QixDQUM1Q2hhLE1BQU8rRixLQUFLL0YsTUFBTTdELEtBQ2xCazFGLEtBQU10ckYsS0FBSzVKLFFBSWpCLE1BQU11OEUsTUFBUTN5RSxLQUFLakUsT0FBT3d4RSxPQUFPN3RFLE1BQUtpekUsT0FDN0JBLE1BQU10Z0MsTUFBUW5rQyxLQUV2QixHQUFJeWtFLE1BQU8sQ0FDVCxNQUFNMThELE1BQVEsSUFBSWxDLFVBQ2xCa0MsTUFBTWhjLE1BQVErRixLQUFLL0YsTUFDbkJnYyxNQUFNSyxXQUFhdkMsVUFBVXVQLGdCQUFnQnBQLEtBQzdDK0IsTUFBTWxNLE9BQVMvSixLQUFLckMsS0FDcEJzWSxNQUFNakcsT0FBUzFTLEtBQUtDLEtBQUswVyxPQUFPLHlCQUEwQixDQUN4RHEzRSxLQUFNdHJGLEtBQUs1SixLQUNYdThFLE1BQU9BLE1BQU12OEUsT0FFZjZmLE1BQU0xUSxRQUFVLGlCQUNoQjBRLE1BQU0wOEQsTUFBUUEsWUFDUjE4RCxNQUFNNm9CLG1CQUFtQixhQUN6QjdvQixNQUFNa2dCLFdBQ2QsQ0FDRixDQUdBLGdCQUFNMXVCLENBQVl0RyxNQUNoQixNQUFNOFUsTUFBUWxDLFVBQVVtNEMsZUFBZS9xRCxNQUd2QyxHQUFJOFUsTUFBTXNKLE9BQVEsQ0FDaEIsR0FBc0Isb0JBQWxCdEosTUFBTTFRLFFBQ1IsYUFBYXZGLEtBQUswc0Ysc0JBQ2IsR0FBc0IsbUJBQWxCejJFLE1BQU0xUSxRQUNmLGFBQWF2RixLQUFLNHNGLG1CQUFtQjMyRSxNQUFNMDhELE1BRS9DLENBQ0YsRUMzZUYsTUFBTXVhLFVBQVkscUJBRVpDLG1CQUNBLEtBREFBLHVCQUVJLE1BRkpBLHdCQUdLLFVBSExBLHFCQUlFLE9BSkZBLDBCQU1PLFlBR1BDLFNBQ0EsY0FEQUEsVUFFQyxlQXlCUDlxRixlQUFlNHBCLGNBQWU3UCxVQUFXc3ZDLFlBQ3ZDLE1BQU0zL0IsWUFBYzF1QixLQUFLZ2YsU0FBU3BmLElBQUltZixpQkFFaEMyUCxZQUFZOXRCLE9BQU8sQ0FDdkJ1UyxRQUFTazdDLFlBRWIsQ0FFQXJwRCxlQUFlK3FGLFNBQVUvbkYsS0FBTWhHLFFBQVNndUYsY0FBZWp4RSxlQUFZeGUsR0FDakUsTUFBTXlPLFdBQWFpaEYsaUJBQWlCeHJGLFNBQ2xDdUQsS0FDQWhHLFFBQ0FndUYsY0FDQWp4RSxXQUlGLGFBRk0vUCxLQUFLK2dGLFdBRUovZ0YsS0FBSzZvQyxVQUNkLENBRUE3eUMsZUFBZWtyRixTQUFXLENBRTFCLE1BQU1DLG9CQUNKLFdBQUFwb0YsR0FDRXJGLEtBQUswdEYsTUFBUSxJQUFJdGdCLElBQ2pCcHRFLEtBQUs2ZCxPQUFTLElBRWhCLENBRUEsZ0JBQU84dkUsR0FDTCxJQUFJNXRELE1BQVFqVSxFQUFFLFFBQVFwc0IsS0FBSyxTQUN0QnFnQyxPQUFPbi9CLFNBQ1ZrckIsRUFBRSxRQUFROGxCLE9BQU85bEIsRUFBRSxxQ0FDbkJpVSxNQUFRalUsRUFBRSxRQUFRcHNCLEtBQUssVUFFekJxZ0MsTUFBTTZSLE9BQ0osZ0ZBR0osQ0FFQSxpQkFBVy96QixDQUFRaFMsR0FDWnZPLEtBQUtzd0YsdUJBQ1J0d0YsS0FBS3N3RixxQkFBdUIsSUFBSUgscUJBRWxDbndGLEtBQUtzd0YscUJBQXFCL3ZFLE9BQVNoUyxDQUNyQyxDQUVBLGlCQUFXZ1MsR0FDVCxHQUFLdmdCLEtBQUtzd0YscUJBQVYsQ0FJQSxHQUFLdHdGLEtBQUtzd0YscUJBQXFCL3ZFLE9BSS9CLE9BQU92Z0IsS0FBS3N3RixxQkFBcUIvdkUsT0FIL0I5VSxHQUFHQyxjQUFjMFUsTUFBTSxnQkFGekIsTUFGRTNVLEdBQUdDLGNBQWMwVSxNQUFNLHNCQVEzQixDQUVBLGdCQUFXZ3dFLEdBSVQsT0FIS3B3RixLQUFLc3dGLHVCQUNSdHdGLEtBQUtzd0YscUJBQXVCLElBQUlILHFCQUUzQm53RixLQUFLc3dGLHFCQUFxQkYsS0FDbkMsQ0FFQSxlQUFPRyxDQUFVQyxrQkFDZkEsaUJBQWlCaDJFLFNBQVFpMkUsa0JBQ2xCTixvQkFBb0JDLE1BQU14d0YsSUFBSTZ3RixnQkFBZ0IzM0YsT0FDakRxM0Ysb0JBQW9CQyxNQUFNdGxGLElBQUkybEYsZ0JBQWdCMzNGLEtBQU0yM0YsZ0JBQ3RELEdBRUosRUFPRixTQUFTajlCLFVBQVdqL0MsSUFBS2svQyxLQUFNNzZELE9BQzdCLE1BQU02USxNQUFRZ3FELEtBQUtya0QsTUFBTSxLQUN6QixJQUFJMjZDLEVBQUl4MUMsSUFDUixHQUFJOUssTUFBTW5HLE9BQVMsRUFDakIsSUFBSyxJQUFJNGYsRUFBSSxFQUFHQSxFQUFJelosTUFBTW5HLE9BQVMsRUFBRzRmLElBQy9CNm1DLEVBQUV0Z0QsTUFBTXlaLE1BQUs2bUMsRUFBRXRnRCxNQUFNeVosSUFBTSxDQUFDLEdBQ2pDNm1DLEVBQUlBLEVBQUV0Z0QsTUFBTXlaLElBSWhCNm1DLEVBQUV0Z0QsTUFBTUEsTUFBTW5HLE9BQVMsSUFBTTFLLEtBQy9CLENBRUEsU0FBUzg2RCxVQUFXbi9DLElBQUtrL0MsTUFDdkIsTUFBTWhxRCxNQUFRZ3FELEtBQUtya0QsTUFBTSxLQUN6QixJQUFJMjZDLEVBQUl4MUMsSUFDUixHQUFJOUssTUFBTW5HLE9BQVMsRUFDakIsSUFBSyxJQUFJNGYsRUFBSSxFQUFHQSxFQUFJelosTUFBTW5HLE9BQVMsRUFBRzRmLElBQUssQ0FDekMsSUFBSzZtQyxFQUFFdGdELE1BQU15WixJQUFLLE9BQ2xCNm1DLEVBQUlBLEVBQUV0Z0QsTUFBTXlaLEdBQ2QsQ0FHRixPQUFPNm1DLEVBQUV0Z0QsTUFBTUEsTUFBTW5HLE9BQVMsR0FDaEMsQ0FFTyxNQUFNMnNGLGlCQUtYLFdBQUFsb0YsQ0FBYUMsS0FBTyxDQUFDLEVBQUdoRyxRQUFVLENBQUMsR0FDakNVLEtBQUtzRixLQUFPQSxLQUNQdEYsS0FBS3NGLEtBQUtwRyxRQUFPYyxLQUFLc0YsS0FBS3BHLE1BQVEsQ0FBQyxHQUN6Q2MsS0FBS3U0QixTQUFXajVCLE9BQ2xCLENBTUEsZ0JBQU1rekMsR0FBZSxDQUVyQixXQUFJbHpDLEdBQ0YsT0FBT1YsUUFBUUMsTUFBTTZhLFlBQVkxWixLQUFLcUYsWUFBWW9VLGVBQWdCelosS0FBS3U0QixTQUN6RSxDQUVBLFdBQUlqNUIsQ0FBU3VNLEdBQ1g3TCxLQUFLdTRCLFNBQVcxc0IsQ0FDbEIsQ0FFQSxZQUFJK04sR0FDRixPQUFPNVosS0FBS1YsUUFBUXNhLFFBQ3RCLENBRUEsY0FBSTRlLEdBQ0YsT0FBT3g0QixLQUFLVixRQUFRcWEsU0FBU3RWLEtBQUssSUFDcEMsQ0FFQSxXQUFJNEwsR0FDRixPQUFJalEsS0FBS1YsUUFBUTB1RixJQUFZMXdGLEtBQUtzRyxLQUVoQzVELEtBQUtWLFFBQVEyUSxTQUNiek0sWUFBWW9zQixnQkFBZ0I1dkIsS0FBS1YsUUFBUTJRLFNBRWxDek0sWUFBWW9zQixnQkFBZ0I1dkIsS0FBS1YsUUFBUTJRLFNBRTNDM1MsS0FBS3NHLElBQ2QsQ0FFQSxhQUFNdXRCLEdBRUosTUFBTyxDQUNMN2tCLEtBQU10TSxLQUNOZCxNQUFPYyxLQUFLZCxNQUNab0csS0FBTXRGLEtBQUttMUMsV0FDWDcxQyxRQUFTVSxLQUFLVixRQUNkdzFELElBQUs5MEQsS0FBS3c0QixXQUNWNTBCLEtBQU10RyxLQUFLc0csS0FDWHFNLFFBQVNqUSxLQUFLaVEsUUFFbEIsQ0FFQSxRQUFBa2xDLEdBQ0UsSUFBS24xQyxLQUFLc0YsS0FBTSxPQUNoQixNQUFNQSxLQUFPLENBQUMsRUFDZCxJQUFLLE1BQU00SixLQUFLdFAsT0FBT21FLEtBQUsvRCxLQUFLc0YsTUFBTyxDQUN0QyxNQUFNM0YsRUFBSUssS0FBS3NGLEtBQUs0SixHQUVsQjVKLEtBQUs0SixHQURIdlAsYUFBYUMsT0FDTEQsRUFBRXcxQyxTQUFXeDFDLEVBQUV3MUMsV0FBYXYyQyxRQUFRQyxNQUFNb3ZGLFVBQVV0dUYsR0FDL0NBLENBQ25CLENBQ0EsT0FBTzJGLElBQ1QsQ0FFQSxlQUFNNndCLENBQVdzQyxrQkFBb0IsQ0FBQyxTQUk5Qno0QixLQUFLd3lDLGFBR1gsTUFBTWx0QyxXQUFhdEYsS0FBS214QixVQUNsQmxYLFdBQWF3RyxlQUFlemdCLEtBQUs0WixTQUFVdFUsTUFDM0N1bUIsZ0JBQWtCQyxFQUFFN1IsTUFBTSxHQUM1QmphLEtBQUtWLFFBQVE0dUYsZUFDZnJpRSxnQkFBZ0I5dUIsUUFBUXdVLE9BQVM1QyxPQUFPM08sS0FBS211RixtQkFFL0N0aUUsZ0JBQWdCOXVCLFFBQVFxeEYsU0FBV3B1RixLQUFLcUYsWUFBWWpQLEtBQ3BEeTFCLGdCQUFnQjdjLFVBQVVDLE9BQU9qUCxLQUFLVixRQUFRcWEsU0FFOUMsTUFBTTFKLFFBQ0pqUSxLQUFLVixRQUFRMlEsVUFBWWpRLEtBQUtWLFFBQVEwdUYsSUFDbEN4cUYsWUFBWTBNLFdBQVdsUSxLQUFLVixRQUFRMlEsU0FDcEMsQ0FBQyxFQUlENU0sU0FBV3pFLFFBQVFDLE1BQU02YSxZQUM3QixDQUVFOVYsS0FBTXRHLEtBQUtzRyxLQUFLc0ssR0FDaEIrQixRQUNBRCxPQUFRMVMsS0FBS0MsS0FBS0MsU0FBU3dDLEtBQUtWLFFBQVFvUCxPQUN4QytCLFFBQVNvYixnQkFBZ0JILFdBRTNCK00sbUJBR0UsQ0FBQyxTQUFVLGFBQWF6MUIsU0FBU2hELEtBQUtxQixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVl3aUIscUJBQXFCLE9BRWhDLGFBQWxCaG1CLEtBQUtxQixXQUF5QmdDLFNBQVNDLFFBQVUsQ0FBQ2hHLEtBQUtzRyxLQUFLc0ssS0FDMUMsY0FBbEJsTyxLQUFLcUIsV0FBMEJnQyxTQUFTRSxPQUFRLEdBRXBEQyxZQUFZa04sT0FBT3JOLFVBQVVnRSxNQUFLc0osS0FDekJBLEtBRVgsQ0FFQSxvQkFBTTRhLEVBQWdCLGNBQWlCLEdBQVMsQ0FBQyxHQUkvQyxHQUZJdnJCLEtBQUtWLFFBQVE4MkIsZUFBZXAyQixLQUFLcXVGLGVBQ2pDcnVGLEtBQUtWLFFBQVErdEYsZ0JBQWdCcnRGLEtBQUtzdUYsa0JBQ2pDdHVGLEtBQUtxYyxVQUVILENBQ0wsTUFBTS9XLFdBQWF0RixLQUFLbXhCLFVBQ2xCbFgsV0FBYXdHLGVBQWV6Z0IsS0FBSzRaLFNBQVV0VSxNQUMzQ3VtQixnQkFBa0JDLEVBQUVDLFVBQVU5UixNQUFNLEdBR3RDaTBFLGVBQWlCbHVGLEtBQUtzRixLQUFLaXBGLFlBQVlDLGFBQ3pDM2lFLGdCQUFnQjl1QixRQUFRd1UsT0FBUzVDLE9BQU8zTyxLQUFLbXVGLG1CQUUvQ3RpRSxnQkFBZ0I5dUIsUUFBUXF4RixTQUFXcHVGLEtBQUtxRixZQUFZalAsS0FDcER5MUIsZ0JBQWdCN2MsVUFBVUMsT0FBT2pQLEtBQUtWLFFBQVFxYSxTQUc5Q3JjLEtBQUtzd0YscUJBQXFCL3ZFLE9BQU91MEIsWUFDL0IsZ0JBQ0FweUMsS0FBS3FjLFVBQ0x3UCxnQkFBZ0JILFVBU3BCLE1BMUJFMXJCLEtBQUttMkIsV0EyQlQsQ0FFQSx1QkFBTW5jLENBQW1CQyxNQU12QkEsS0FBS0MsR0FBRyxTQUFVLHdCQUF5QmxhLEtBQUt5dUYsVUFBVXgxRixLQUFLK0csT0FDL0RpYSxLQUFLQyxHQUFHLFFBQVMsSUFBSWd6RSx3QkFBeUJsdEYsS0FBS3VpQixVQUFVdHBCLEtBQUsrRyxPQUNsRWlhLEtBQUtDLEdBQUcsUUFBUyxJQUFJZ3pFLG9CQUFxQmx0RixLQUFLa3lCLFVBQVVqNUIsS0FBSytHLE9BQzlEaWEsS0FBS0MsR0FBRyxXQUFZLElBQUlnekUsa0JBQW1CbHRGLEtBQUt5dUYsVUFBVXgxRixLQUFLK0csT0FDL0RpYSxLQUFLQyxHQUFHLFFBQVMsSUFBSWd6RSxtQkFBb0JsdEYsS0FBSzI0QixVQUFVMS9CLEtBQUsrRyxPQUM3RGlhLEtBQUtDLEdBQUcsVUFBVyxJQUFJZ3pFLGlCQUFrQmx0RixLQUFLNDRCLE9BQU8zL0IsS0FBSytHLE9BUzFEaWEsS0FDR3ZhLEtBQUsseUJBQ0x5MkQsTUFBSzd6RCxNQUFPa2UsRUFBRzIzQixXQUFhbjRDLEtBQUswdUYsY0FBY3YyQyxNQUNsRGwrQixLQUNHdmEsS0FBSywwQkFDTHkyRCxNQUFLN3pELE1BQU9rZSxFQUFHMjNCLFdBQWFuNEMsS0FBSzJ1RixjQUFjeDJDLE1BQ2xEbCtCLEtBQUt2YSxLQUFLLElBQUl3dEYseUJBQXlCLzJCLE1BQUssQ0FBQzMxQyxFQUFHMjNCLEtBQU9uNEMsS0FBSzR1RixTQUFTejJDLE1BQ3JFbCtCLEtBQ0d2YSxLQUFLLElBQUl3dEYsaUNBQ1QvMkIsTUFBSyxDQUFDMzFDLEVBQUcyM0IsS0FBT240QyxLQUFLNnVGLGNBQWMxMkMsS0FFeEMsQ0FFQSxRQUFBeTJDLENBQVVwOUUsU0FDUixHQUFLQSxVQUNEQSxRQUFRelUsUUFBUXk0QixNQUNsQmhrQixRQUFReEMsVUFBVUMsSUFDaEJqUCxLQUFLZCxNQUFNc1MsUUFBUXpVLFFBQVF5NEIsTUFBUTQzRCxTQUFXQSxXQUc5QzU3RSxRQUFRelUsUUFBUTNHLE1BQU0sQ0FDeEIsTUFBTUYsTUFBUTg2RCxVQUFVaHhELEtBQU13UixRQUFRelUsUUFBUTNHLE1BQzlDb2IsUUFBUXhDLFVBQVVDLElBQUkvWSxNQUFRazNGLFNBQVdBLFVBQzNDLENBQ0YsQ0FFQSxhQUFBeUIsQ0FBZXI5RSxTQUNiLElBQUtBLFVBQVlBLFFBQVFwYixLQUFNLE9BQy9CLE1BQU0wNEYsUUFBVXQ5RSxRQUFRcGIsS0FBS3NXLE1BQU0sS0FDRixTQUE3Qm9pRixRQUFRLEdBQUc5bUYsZUFDWGhJLEtBQUtzRixXQUF5QyxJQUExQnRGLEtBQUtzRixLQUFLd3BGLFFBQVEsS0FDcEM5dUYsS0FBS3NGLEtBQUt3cEYsUUFBUSxNQUFRdDlFLFFBQVF0YixRQUNwQ3NiLFFBQVF5OUMsU0FBVSxFQUd4QixDQUVBLG1CQUFNeS9CLENBQWVsOUUsU0FDbkIsSUFBS0EsUUFBUXpVLFFBQVFneUYsY0FBZSxhQUNaL3VGLEtBQUtndkYsUUFBUXg5RSxRQUFRelUsUUFBUWd5RixlQUFlLEtBQ3BEdjlFLFFBQVF1dUIsTUFBTUMsUUFBVSxPQUMxQyxDQUVBLG1CQUFNMnVELENBQWVuOUUsU0FDbkIsSUFBS0EsUUFBUXpVLFFBQVFreUYsZUFBZ0IsYUFDYmp2RixLQUFLZ3ZGLFFBQVF4OUUsUUFBUXpVLFFBQVFreUYsa0JBRW5EejlFLFFBQVF4QyxVQUFVQyxJQUFJLGtCQUNsQjZjLEVBQUV0YSxTQUFTd3VELEdBQUcsV0FDSyxVQUFqQnh1RCxRQUFRblQsS0FBa0J5dEIsRUFBRXRhLFNBQVMwdkMsS0FBSyxZQUFZLEdBQ3JEcDFCLEVBQUV0YSxTQUFTMHZDLEtBQUssWUFBWSxJQUUvQnAxQixFQUFFdGEsU0FBU3d1RCxHQUFHLFdBQVdsMEMsRUFBRXRhLFNBQVMwdkMsS0FBSyxZQUFZLEdBRTdELENBU0EsYUFBTTh0QyxDQUFTRSxhQUFjQyxRQUFTLEdBQ3BDLElBQUtELGFBQWF0dUYsT0FBUSxPQUFPLEVBQ2pDLElBQUl3dUYsaUJBQW1CRixhQUFheGlGLE1BQU0sS0FDMUMsTUFBTTJpRixXQUFhRCxpQkFBaUJwc0YsU0FBU21xRiwyQkFNN0MsR0FMS2tDLFlBQ0hELGlCQUFtQkEsaUJBQWlCLzRGLFFBQ2xDbUssR0FBS0EsSUFBTTJzRiw2QkFHWDd2RixLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsSUFBSzRtRixPQUFRLE9BQU8sRUFDcEIsR0FBSUMsaUJBQWlCcHNGLFNBQVNtcUYsb0JBQzVCLE9BQWVrQyxVQUVqQixHQUFJRCxpQkFBaUJwc0YsU0FBU21xRix3QkFDNUIsT0FBaUJrQyxTQUVyQixDQVlBLEdBVkFELGlCQUFtQkEsaUJBQWlCLzRGLFFBQU9tSyxHQUFLQSxJQUFNMnNGLHFCQUN0RGlDLGlCQUFtQkEsaUJBQWlCLzRGLFFBQ2xDbUssR0FBS0EsSUFBTTJzRix5QkFRVGlDLGlCQUFpQnBzRixTQUFTbXFGLHNCQUF1QixDQUNuRCxHQUFJbnRGLEtBQUs4UCxRQUFRdy9FLFNBQVUsT0FBZUQsVUFDMUNELGlCQUFtQkEsaUJBQWlCLzRGLFFBQ2xDbUssR0FBS0EsSUFBTTJzRixzQkFFZixDQUVBLEdBQUlpQyxpQkFBaUJwc0YsU0FBU21xRix5QkFBMEIsQ0FDdEQsTUFBTWw5RSxRQUFValEsS0FBSzhQLFFBQVF4SyxLQUFLMkssUUFDbEMsR0FBSUEsUUFBUWdCLE9BQVNoQixRQUFRcEQsTUFBTyxDQUNsQyxNQUFNNVMsWUFBY2lNLFNBQ2xCLFNBQVMrSixRQUFRcEQsZUFBZW9ELFFBQVFnQixTQUUxQyxHQUFJaFgsT0FDRUEsTUFBTXUvQixRQUFTLE9BQWU2MUQsU0FFdEMsTUFBTyxHQUFJcC9FLFFBQVFoVyxNQUFPLENBQ3hCLE1BQU1BLE1BQVFxRCxLQUFLcVAsT0FBT3pQLElBQUkrUyxRQUFRaFcsT0FDdEMsR0FBSUEsT0FDRUEsTUFBTXUvQixRQUFTLE9BQWU2MUQsU0FFdEMsQ0FJQUQsaUJBQW1CQSxpQkFBaUIvNEYsUUFDbENtSyxHQUFLQSxJQUFNMnNGLHlCQUVmLENBRUEsR0FBSWlDLGlCQUFpQnh1RixPQUNuQixJQUFLLElBQUk0ZixFQUFJLEVBQUdBLEVBQUk0dUUsaUJBQWlCeHVGLE9BQVE0ZixJQUFLLENBQ2hELE1BQU03aUIsS0FBT3l4RixpQkFBaUI1dUUsR0FDOUIsSUFBSXZtQixZQUFjaU0sU0FBU3ZJLE1BRTNCLEdBREsxRCxRQUFPQSxNQUFRcUQsS0FBS3FQLE9BQU96UCxJQUFJUyxPQUNoQzFELE1BQ0YsT0FBT0EsTUFBTXUvQixRQUViendCLEdBQUdDLGNBQWMwVSxNQUFNLHdCQUF3Qi9mLE9BRW5ELENBRUYsT0FBaUIweEYsU0FDbkIsQ0FFQSwwQkFBYXgyRCxDQUFlNWUsTUFDMUIsTUFDTTRSLGdCQURxQjVSLEtBQUssR0FDV3JHLGNBQWMsSUFBSXM1RSxhQUM3RCxJQUFLcmhFLGdCQUFpQixPQUV0QixNQUFNdmYsV0FBYWloRixpQkFBaUJyNEQsb0JBQW9CckosaUJBQ25EdmYsTUFDTEEsS0FBSzBOLGtCQUFrQkMsS0FDekIsQ0FFQSxTQUFJL2EsR0FDRixPQUFPYyxLQUFLc0YsS0FBS3BHLEtBQ25CLENBTUEsbUJBQU1xd0YsR0FBa0IsQ0FPeEIsa0JBQU1sQixHQUFpQixDQU92QixjQUFNaEIsR0FBYSxDQUVuQixxQkFBTWlCLEdBQ0osTUFBTWtCLGNBQWdCbHlGLEtBQUtzd0YscUJBQXFCL3ZFLE9BQU91MEIsWUFDckQsV0FDQXB5QyxLQUFLbTFDLFdBQ0xuMUMsS0FBS3U0QixTQUNMdjRCLEtBQUtxRixZQUFZalAsS0FDakI0SixLQUFLcWMsV0FHUHJjLEtBQUtzRixLQUFPa3FGLGNBQ054dkYsS0FBS3V2RixlQUNiLENBT0EsZUFBTTUyRCxDQUFXcDhCLE9BQ2ZBLE1BQU1FLGlCQUVOLE1BQU13b0IsT0FBUzFvQixNQUFNSSxjQUVyQnNvQixPQUFPOGEsTUFBTUMsUUFBVSxPQUN2QixNQUFNN2lDLE9BQVM4bkIsT0FBT2xvQixRQUFRSSxPQUU5QixJQUFJc3lGLFdBQ0FDLGNBQWUsRUFPbkIsTUFBTXBqRixLQUFPMlksT0FBT3BvQixRQUFRLElBQUlxd0YsYUFDNUI1Z0YsS0FBTW1qRixXQUFhenZGLEtBQUtrNUIsUUFBUTVzQixNQUVsQ25CLFFBQVF1UyxNQUNOLDZDQUE2QzFkLEtBQUtxRixZQUFZalAsUUFJbEUsTUFBTXU1RixxQkFBdUIxcUUsT0FBTzhhLE1BQU1DLFNBRXJDN2lDLFNBQ0hnTyxRQUFRb0ksS0FBSyx5Q0FDUms4RSxlQUVGenZGLEtBQUs3QyxVQUNSZ08sUUFBUW9JLEtBQUssTUFBTXBXLHFDQUNkc3lGLGVBRUh6dkYsS0FBSzdDLFVBQ1B1eUYsbUJBQXFCMXZGLEtBQUs3QyxRQUFRLENBQUVaLE1BQU9xekYsWUFBWSxLQUdyREgsWUFBY0MsbUJBQW9CMXZGLEtBQUt1ckIsaUJBQ3RDdEcsT0FBTzhhLE1BQU1DLFFBQVUydkQscUJBQzlCLENBT0EsTUFBQS8yRCxDQUFRcjhCLE9BRU4sTUFEa0IsVUFBZEEsTUFBTVYsS0FBaUJtRSxLQUFLa3lCLFVBQVUzMUIsT0FDckIsVUFBZEEsTUFBTVYsR0FDZixDQUVBLFNBQUE0eUYsQ0FBV2x5RixPQUNULEdBQUl5RCxLQUFLVixRQUFRbXpELGVBQ2YsT0FBT3p5RCxLQUFLa3lCLFVBQVUzMUIsTUFFMUIsQ0FFQSxTQUFBMjFCLENBQVczMUIsT0FDVCxNQUFNMG9CLE9BQVMxb0IsTUFBTUksY0FFckIsR0FBZ0IsV0FEQXNvQixPQUFPNjlELFNBQ0ssV0FBWTc5RCxPQUFPbG9CLFFBQVMsT0FDeERSLE1BQU1FLGlCQUVOLE1BQU02UCxLQUFPMlksT0FBT3BvQixRQUFRLElBQUlxd0YsYUFDaEMsSUFBSzVnRixLQUFNLE9BQ0t0TSxLQUFLazVCLFFBQVE1c0IsT0FDaEJ0TSxLQUFLdXJCLGdCQUNwQixDQU9BLE9BQUEyTixDQUFTNXNCLE1BQ1AsTUFBTTZzQixNQUFRN3NCLEtBQUs4SSxpQkFBaUIsUUFDcEMsSUFBSXFILFNBQVUsRUFDZCxJQUFLLElBQUkrRCxFQUFJLEVBQUdBLEVBQUkyWSxNQUFNdjRCLE9BQVE0ZixJQUFLLENBQ3JDLE1BQU00WSxLQUFPRCxNQUFNM1ksR0FFYmxiLEtBREssSUFBSSt6QixpQkFBaUJELE1BQ2hCN25CLE9BS2hCLElBQUssTUFBTzFWLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFqRixNQUFPLENBQzlCMHJELFVBQVVoeEQsS0FBTW5FLE9BQ2QzRixRQUNqQjQ2RCxVQUFVOXdELEtBQU1uRSxJQUFLM0YsT0FDckJ1bUIsU0FBVSxFQUVkLENBQ0YsQ0FDQSxPQUFPQSxPQUNULENBRUEsV0FBSTNNLEdBQ0YsT0FBSTlQLEtBQUsyMkIsU0FBaUIzMkIsS0FBSzIyQixTQUMzQjMyQixLQUFLNDJCLFdBQW1CdDVCLEtBQUtnZixTQUFTcGYsSUFBSThDLEtBQUs0MkIsaUJBQW5ELENBRUYsQ0FFQSxXQUFJOW1CLENBQVNqRSxHQUNYN0wsS0FBSzIyQixTQUFXOXFCLENBQ2xCLENBRUEsYUFBSXdRLEdBQ0YsT0FBSXJjLEtBQUs0MkIsV0FBbUI1MkIsS0FBSzQyQixXQUM3QjUyQixLQUFLMjJCLFNBQWlCMzJCLEtBQUsyMkIsU0FBU3pvQixRQUF4QyxDQUVGLENBRUEsYUFBSW1PLENBQVd4USxHQUNiN0wsS0FBSzQyQixXQUFhL3FCLENBQ3BCLENBRUEseUJBQVc0TixHQUNULE1BQU8sQ0FDTHkwRSxjQUFjLEVBQ2R2MEUsUUFBUyxDQUFDdXpFLFdBQ1ZyMkQsUUFBUyxHQUNUQyxpQkFBa0IsSUFDbEIyN0IsZ0JBQWdCLEVBQ2hCeGlELFFBQVN6TSxZQUFZME0sYUFDckI4OUUsS0FBSyxFQUNMNTNELFNBQVMsRUFDVGkzRCxVQUFVLEVBRWQsQ0FFQSxvQkFBSWMsR0FDRixNQUFNMEIsU0FBVyxDQUNmdnFGLEtBQU10RixLQUFLc0YsS0FDWGhHLFFBQVNVLEtBQUt1NEIsVUFFaEIsT0FBTzNwQixLQUFLQyxVQUFVZ2hGLFVBQVUsQ0FBQ2gwRixJQUFLM0YsU0FDcEMsR0FBYyxPQUFWQSxRQUNBOEosS0FBS1YsUUFBUXUzQixTQUFTN3pCLFNBQVNuSCxPQUMvQkEsSUFBSThPLFdBQVczSyxLQUFLVixRQUFRdzNCLGtCQUNoQyxPQUFPNWdDLFFBRVgsQ0FFQSxZQUFJbUwsR0FFRixPQURLckIsS0FBSzZrQixZQUFXN2tCLEtBQUs2a0IsVUFBWXZuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUN6RDhDLEtBQUs2a0IsU0FDZCxDQUVBLFlBQUl4akIsQ0FBVXdLLElBQ0YsSUFBTkEsSUFBYTdMLEtBQUs2a0IsVUFBWXZuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUM1RDhDLEtBQUs2a0IsVUFBWWhaLENBQ25CLENBRUEsMEJBQWFrcEIsQ0FBZTFZLFdBQzFCLE1BQU12TSxRQUFVeFMsS0FBS2dmLFNBQVNwZixJQUFJbWYsV0FDbEMsSUFBS3ZNLFFBQVMsT0FDZCxNQUFNeEQsV0FBYXRNLEtBQUtnMUIsWUFBWWxsQixTQUVwQyxPQURBeEQsS0FBSytQLFVBQVlBLFVBQ1YvUCxJQUNULENBRUEsd0JBQWEwb0IsQ0FBYWxsQixTQUN4QixNQUFNbWxCLFlBQWNuSixFQUFFaGMsUUFBUXhLLEtBQUttTCxTQUFTLEdBQzVDLElBQUt3a0IsWUFBYSxPQUNsQixNQUFNM29CLFdBQWF0TSxLQUFLazFCLG9CQUFvQkQsYUFFNUMsT0FEQTNvQixLQUFLd0QsUUFBVUEsUUFDUnhELElBQ1QsQ0FFQSxnQ0FBYTRvQixDQUFxQjQ2RCxXQUNoQyxJQUFLQSxVQUFXLE9BQ2hCLElBQUtBLFVBQVUveUYsUUFBUXF4RixTQUFVLE9BQ2pDLElBQUswQixVQUFVL3lGLFFBQVF3VSxPQUFRLE9BQy9CLE1BQU00akIsU0FBV3ZtQixLQUFLNGQsTUFBTUMsU0FBU3FqRSxVQUFVL3lGLFFBQVF3VSxTQUNqRHpCLFFBQVVnZ0YsVUFBVWp6RixRQUFRLFlBQzVCd2YsVUFBWXZNLFNBQVMvUyxTQUFTc2YsVUFFcEMsYUFBYXJjLEtBQUsrQixTQUNoQm96QixTQUFTN3ZCLEtBQ1Q2dkIsU0FBUzcxQixRQUNUd3dGLFVBQVUveUYsUUFBUXF4RixTQUNsQi94RSxVQUVKLENBRUEscUJBQWF0YSxDQUFVdUQsS0FBTWhHLFFBQVNndUYsY0FBZWp4RSxlQUFZeGUsR0FDL0QsTUFBTWt5RixVQUFZenlGLEtBQUtzd0YscUJBQXFCRixNQUFNeHdGLElBQUlvd0YsZUFFdEQsSUFBS3lDLFVBRUgsWUFEQTVrRixRQUFRdVMsTUFBTSwyQkFBMkI0dkUsaUJBRzNDLE1BQU1oaEYsS0FBTyxJQUFJeWpGLFVBQVV6cUYsS0FBTWhHLFNBR2pDLE9BRkkrYyxZQUFXL1AsS0FBSytQLFVBQVlBLGlCQUMxQi9QLEtBQUtpakYsZ0JBQ0pqakYsSUFDVCxDQUVBLE9BQUFnaUIsQ0FBU2w0QixPQUNGQSxNQUEyQixXQUFqQjAxQixFQUFFenRCLEtBQUtqSSxRQUN0QjA2RCxVQUFVOXdELEtBQU01SixNQUFNLEVBQ3hCLENBRUEsU0FBQTQ1RixDQUFXNTVGLE9BQ0pBLE1BQTJCLFdBQWpCMDFCLEVBQUV6dEIsS0FBS2pJLFFBQ3RCMDZELFVBQVU5d0QsS0FBTTVKLE1BQU0sRUFDeEIsQ0FFQSxVQUFBNjVGLENBQVk3NUYsTUFDVixJQUFLQSxNQUEyQixXQUFqQjAxQixFQUFFenRCLEtBQUtqSSxNQUFxQixPQUUzQzA2RCxVQUFVOXdELEtBQU01SixNQURGNDZELFVBQVVoeEQsS0FBTTVKLE1BRWhDLENBRUEsZUFBTW1zQixDQUFXaG1CLE9BS2ZBLE1BQU1FLGlCQUVOLE1BQU13b0IsT0FBUzFvQixNQUFNSSxjQUNyQixHQUFJLFdBQVlzb0IsT0FBT2xvQixRQUFTLE9BQU9pRCxLQUFLMjRCLFVBQVVwOEIsT0FDdEQsR0FDRTBvQixRQUNBQSxPQUFPalcsVUFBVXlULFNBQVMsb0JBQ3pCbmxCLEtBQUtzRyxLQUFLMkUsS0FFWCxPQUVGLE1BQU1uUyxLQUFPNnVCLE9BQU9sb0IsUUFBUXk0QixLQUN4QixjQUFjdlEsT0FBT2xvQixRQUFReTRCLE9BQzdCdlEsT0FBT2xvQixRQUFRM0csS0FDbkIsSUFBS0EsS0FBTSxPQUNYLE1BQU11a0IsT0FBU3NLLE9BQU9wb0IsUUFBUSxjQUM5QixHQUFLOGQsT0FFRSxDQUNMLE1BQU0rWixRQUFVL1osT0FBT3ZGLGlCQUFpQixlQUN4QyxJQUFLLE1BQU1nTCxLQUFLc1UsUUFBUyxDQUN2QixNQUFNdzdELE1BQVE5dkUsRUFBRXJqQixRQUFReTRCLEtBQ3BCLGNBQWNwVixFQUFFcmpCLFFBQVF5NEIsT0FDeEJwVixFQUFFcmpCLFFBQVEzRyxLQUNkNEosS0FBS2d3RixVQUFVRSxNQUNqQixDQUNBbHdGLEtBQUtzdUIsUUFBUWw0QixLQUNmLE1BVkU0SixLQUFLaXdGLFdBQVc3NUYsTUFXbEIsTUFBTWtXLEtBQU8yWSxPQUFPcG9CLFFBQVEsSUFBSXF3RixhQUM1Qmx0RixLQUFLVixRQUFRbXpELGdCQUNYbm1ELE1BQU10TSxLQUFLazVCLFFBQVE1c0IsWUFFbkJ0TSxLQUFLdXJCLGdCQUNiLEVDL3VCSyxNQUFNNGtFLGFBQ1gsV0FBQTlxRixDQUFhQyxLQUFPLENBQUMsR0FDbkJ0RixLQUFLc0YsS0FBT0EsSUFDZCxDQUVBLE1BQUE4cUYsR0FLRSxJQUpLcHdGLEtBQUtxd0YsTUFBUXJ3RixLQUFLc0YsS0FBS21zRCxVQUMxQnp4RCxLQUFLcXdGLEtBQU96b0YsY0FBYzhwRCxtQkFBbUIxeEQsS0FBS3NGLEtBQUttc0QsV0FHcER6eEQsS0FBS3lzQyxPQUNSLEdBQUl6c0MsS0FBS3F3RixLQUNQLE9BQVFyd0YsS0FBS3F3RixLQUFLaHJGLGFBQWFqUCxNQUM3QixJQUFLLGdCQUNINEosS0FBS3lzQyxPQUFTenNDLEtBQUtxd0YsS0FBS3AyRixNQUN4QixNQUVGLElBQUssV0FDSCtGLEtBQUt5c0MsT0FBU3pzQyxLQUFLcXdGLFVBS2xCcndGLEtBQUt5c0MsT0FBUzdrQyxjQUFjaUosZ0JBQWdCN1EsS0FBS3NGLEtBQUttc0QsUUFFakUsQ0FFQSxTQUFJeDNELEdBRUYsT0FEQStGLEtBQUtvd0YsU0FDRXB3RixLQUFLeXNDLE1BQ2QsQ0FFQSxXQUFJNmpELEdBQ0YsT0FBT3R3RixLQUFLdXdGLFVBQVl2d0YsS0FBS3d3RixVQUMvQixDQUVBLFlBQUlDLEdBQ0YsT0FBT3p3RixLQUFLc0YsS0FBS3ZFLFNBQVUsQ0FDN0IsQ0FFQSxPQUFJbEYsR0FDRixPQUFJbUUsS0FBS3d3RixXQUFtQnh3RixLQUFLMHdGLFFBQVF0L0UsU0FDckNwUixLQUFLdXdGLFNBQWlCdndGLEtBQUsvRixNQUFNbVgsY0FBckMsQ0FFRixDQUVBLFFBQUkzVCxHQUNGLE9BQUt1QyxLQUFLc3dGLFFBR050d0YsS0FBS3d3RixXQUFtQnh3RixLQUFLMHdGLFFBQVFockYsSUFDckMxRixLQUFLdXdGLFNBQWlCdndGLEtBQUsvRixNQUFNeUwsU0FBckMsRUFIUyx1REFLWCxDQUVBLFVBQUlpckYsR0FJRixPQUhLM3dGLEtBQUs0d0YsVUFDUjV3RixLQUFLNHdGLFFBQVVocEYsY0FBY2lKLGdCQUFnQjdRLEtBQUtzRixLQUFLbXNELFVBRWxEenhELEtBQUs0d0YsT0FDZCxDQUVBLFdBQUlGLEdBSUYsT0FISTF3RixLQUFLc0YsS0FBS3VyRixhQUNaN3dGLEtBQUs4d0YsU0FBV3RoRixXQUFXcUIsZ0JBQWdCN1EsS0FBS3NGLEtBQUt1ckYsYUFFaEQ3d0YsS0FBSzh3RixRQUNkLENBRUEsWUFBSVAsR0FDRixRQUFTdndGLEtBQUsvRixLQUNoQixDQUVBLGNBQUl1MkYsR0FDRixRQUFTeHdGLEtBQUswd0YsT0FDaEIsQ0FFQSxRQUFJdDZGLEdBQ0YsT0FBSTRKLEtBQUt3d0YsV0FBbUJ4d0YsS0FBSzB3RixRQUFRdDZGLEtBQ3JDNEosS0FBS3V3RixTQUFpQnZ3RixLQUFLL0YsTUFBTTdELEtBQzlCNEosS0FBS3NGLEtBQUtsUCxXQUFReUgsQ0FDM0IsQ0FFQSxPQUFJeXVDLEdBY0YsT0FiS3RzQyxLQUFLc0YsS0FBS2duQyxNQUNUdHNDLEtBQUt3d0YsV0FBWXh3RixLQUFLc0YsS0FBS2duQyxJQUFNdHNDLEtBQUswd0YsUUFBUXBrRCxJQUN6Q3RzQyxLQUFLdXdGLFdBQVV2d0YsS0FBS3NGLEtBQUtnbkMsSUFBTXRzQyxLQUFLL0YsTUFBTXF5QyxNQUdqRHRzQyxLQUFLc0YsS0FBS2duQyxNQUNQeHdDLE1BQU1JLE9BQU84RCxLQUFLc0YsS0FBS2duQyxPQUUxQnRzQyxLQUFLc0YsS0FBS3lyRixhQUFjLEVBQ3hCL3dGLEtBQUtzRixLQUFLZ25DLFNBQU16dUMsR0FIaUJtQyxLQUFLc0YsS0FBS3lyRixhQUFjLEdBT3REL3dGLEtBQUtzRixLQUFLZ25DLEdBQ25CLENBRUEsUUFBSTN1QyxHQUNGLE9BQU9xQyxLQUFLc0YsS0FBSzNILElBQ25CLENBRUEsbUJBQUlxekYsR0FDRixPQUFPaHhGLEtBQUttRSxXQUFhLENBQzNCLENBRUEsYUFBSUEsR0FDRixPQUNFckksTUFBTWtFLEtBQUtzRixLQUFLbkIsWUFDaEJuRSxLQUFLc0YsS0FBS25CLFVBQVksR0FDdEJuRSxLQUFLc0YsS0FBS25CLFVBQVksRUFFZixFQUVGbkUsS0FBS3NGLEtBQUtuQixTQUNuQixDQUVBLGFBQUlBLENBQVcwSCxHQUNUL1AsTUFBTStQLEdBQ1I5QyxHQUFHQyxjQUFjMFUsTUFBTSxtQ0FHckI3UixFQUFJLEVBQ045QyxHQUFHQyxjQUFjMFUsTUFBTSxvQkFHckI3UixFQUFJLEVBQ045QyxHQUFHQyxjQUFjMFUsTUFBTSx5QkFHekIxZCxLQUFLc0YsS0FBS25CLFVBQVkwSCxDQUN4QixDQUVBLE1BQUlzbkMsR0FRRixPQVBLbnpDLEtBQUtzRixLQUFLNnRDLEtBQ2JuekMsS0FBS3NGLEtBQUs2dEMsR0FBSyxHQUVibnpDLEtBQUsvRixRQUNQK0YsS0FBS3NGLEtBQUs2dEMsR0FBS256QyxLQUFLL0YsTUFBTWs1QyxJQUdyQm56QyxLQUFLc0YsS0FBSzZ0QyxFQUNuQixDQUVBLE1BQUlBLENBQUl0bkMsR0FDTjdMLEtBQUtzRixLQUFLNnRDLEdBQUt0bkMsRUFDWDdMLEtBQUsvRixPQUNQK0YsS0FBSy9GLE1BQU13ckQsTUFBTTU1QyxFQUVyQixDQUVBLFlBQUFvbEYsR0FDTWp4RixLQUFLc0YsS0FBS25CLFdBQWEsRUFDekI0RSxHQUFHQyxjQUFjMFUsTUFBTSwrQkFHekIxZCxLQUFLc0YsS0FBS25CLFdBQWEsQ0FDekIsQ0FFQSxlQUFBK3NGLEdBQ01seEYsS0FBS3NGLEtBQUtuQixXQUFhLEVBQ3pCNEUsR0FBR0MsY0FBYzBVLE1BQU0sNkJBR3pCMWQsS0FBS3NGLEtBQUtuQixXQUFhLENBQ3pCLENBRUEsY0FBQWd0RixHQUNFbnhGLEtBQUtzRixLQUFLbkIsVUFBWSxDQUN4QixDQUVBLGdCQUFJaXRGLEdBQ0YsT0FBT3B4RixLQUFLcXhGLGlCQUFtQnJ4RixLQUFLc3hGLGVBQ3RDLENBRUEsbUJBQUlELEdBQ0YsT0FBT3J4RixLQUFLbUUsV0FBYSxDQUMzQixDQUVBLG1CQUFJbXRGLEdBQ0YsT0FBT3R4RixLQUFLbUUsV0FBYSxDQUMzQixDQUVBLGFBQUlvdEYsR0FDRixPQUFPdnhGLEtBQUt3eEYsUUFBUTV3RixPQUFTLENBQy9CLENBRUEsaUJBQUk2d0YsR0FDRixPQUFRenhGLEtBQUtneEYsZUFDZixDQUVBLFVBQUlRLEdBQ0YsT0FBT3h4RixLQUFLc0YsS0FBS2tzRixRQUFVLEVBQzdCLENBRUEsT0FBSS82RixHQWlCRixPQWhCS3VKLEtBQUtzRixLQUFLN08sTUFDVHVKLEtBQUt3d0YsWUFBY3h3RixLQUFLMHhGLFVBQzFCMXhGLEtBQUtzRixLQUFLN08sSUFBTXVKLEtBQUsyd0YsT0FBTy9zRSxnQkFBZ0JudEIsSUFBSVAsTUFDdkM4SixLQUFLdXdGLFdBQ2R2d0YsS0FBS3NGLEtBQUs3TyxJQUFNdUosS0FBSy9GLE1BQU0ycEIsZ0JBQWdCbnRCLElBQUlQLFFBSS9DOEosS0FBS3NGLEtBQUs3TyxNQUNQcUYsTUFBTUksT0FBTzhELEtBQUtzRixLQUFLN08sT0FFMUJ1SixLQUFLc0YsS0FBS3FzRixhQUFjLEVBQ3hCM3hGLEtBQUtzRixLQUFLN08sSUFBTSxHQUhpQnVKLEtBQUtzRixLQUFLcXNGLGFBQWMsR0FPdEQzeEYsS0FBS3NGLEtBQUs3TyxHQUNuQixDQUVBLGdCQUFJbTdGLEdBQ0YsT0FBTzV4RixLQUFLc0YsS0FBS3NzRixlQUFnQixDQUNuQyxDQUVBLGNBQUkzcEIsR0FDRixJQUFJNTZDLEtBQU9ydEIsS0FBS3ZKLElBUWhCLE9BUEl1SixLQUFLNHhGLGVBQ1B2a0UsTUFBUSxJQU1IQSxJQUNULENBRUEsWUFBSXdrRSxHQUNGLFFBQVM3eEYsS0FBS3NGLEtBQUt3c0YsTUFDckIsQ0FFQSxVQUFJQyxHQUNGLE9BQVEveEYsS0FBSzZ4RixRQUNmLENBRUEsV0FBSUcsR0FDRixPQUFPaHlGLEtBQUsyeEYsYUFBZTN4RixLQUFLK3dGLFdBQ2xDLENBRUEsZUFBSVksR0FDRixPQUFRNzFGLE1BQU1JLE9BQU84RCxLQUFLc0YsS0FBSzdPLEtBQ2pDLENBRUEsZUFBSXM2RixHQUNGLE9BQVFqMUYsTUFBTUksT0FBTzhELEtBQUtzRixLQUFLZ25DLEtBQ2pDLENBRUEsYUFBSW9sRCxHQUNGLE9BQU8xeEYsS0FBS3d3RixZQUFjeHdGLEtBQUt1d0YsUUFDakMsQ0FFQSxpQkFBSTBCLEdBQ0YsR0FBSWp5RixLQUFLc0YsS0FBSzRzRixZQUFZQyxlQUFnQixDQUN4QyxNQUFNaHhGLEtBQU80UyxVQUFVbTRDLGVBQWVsc0QsS0FBS3NGLEtBQUs0c0YsV0FBV0MsZ0JBQzNELEdBQUloeEYsT0FDR0EsS0FBS3k5QixRQUFTLENBQ2pCLEdBQUl6OUIsS0FBSzJTLGNBQWdCQyxVQUFVRCxhQUFhekosUUFBUyxPQUFPLEVBQzNELEdBQUlsSixLQUFLb2YsT0FBUSxPQUFRLENBQ2hDLENBRUosQ0FDQSxPQUFPLENBQ1QsQ0FFQSxlQUFJNnhFLEdBQ0YsUUFBd0IsSUFBYnB5RixLQUFLc3NDLE1BQ1p4d0MsTUFBTUksT0FBTzhELEtBQUtzc0MsTUFDdEIsT0FBT3B3QyxPQUFPOEQsS0FBS3NzQyxLQUFPdHNDLEtBQUtpeUYsYUFDakMsQ0FFQSxvQkFBSUksR0FDRixPQUFPcnlGLEtBQUtzeUYsYUFBZXR5RixLQUFLdXlGLFdBQ2xDLENBRUEsZUFBSUQsR0FDRixPQUFJdHlGLEtBQUtzRixLQUFLMnNGLGNBQWdCLENBRWhDLENBRUEsZUFBSU0sR0FDRixPQUFJdnlGLEtBQUtzRixLQUFLMnNGLGNBQWdCLENBRWhDLENBa0JBLE9BQUFPLEdBQ0V4eUYsS0FBS3NGLEtBQUttdEYsVUFBVyxDQUN2QixDQUVBLGNBQUFDLEdBQ0UxeUYsS0FBS3NGLEtBQUttdEYsVUFBVyxFQUNyQnp5RixLQUFLc0YsS0FBSytuRCxTQUFVLENBQ3RCLENBRUEsT0FBQUEsR0FDRXJ0RCxLQUFLc0YsS0FBSytuRCxTQUFVLENBQ3RCLENBRUEsV0FBSXNsQyxDQUFTOW1GLEdBQ1g3TCxLQUFLc0YsS0FBS3F0RixRQUFVOW1GLENBQ3RCLENBRUEsV0FBSThtRixHQUNGLE9BQU8zeUYsS0FBS3NGLEtBQUtxdEYsT0FDbkIsQ0FFQSxXQUFJQyxDQUFTL21GLEdBQ1g3TCxLQUFLc0YsS0FBS3N0RixRQUFVL21GLENBQ3RCLENBRUEsV0FBSSttRixHQUNGLE9BQU81eUYsS0FBS3NGLEtBQUtzdEYsT0FDbkIsQ0FFQSx3QkFBQUMsQ0FBMEJDLGFBRVMsSUFBeEI5eUYsS0FBSyt5RixxQkFDZ0IsSUFBckIveUYsS0FBS295RixhQUNadDJGLE1BQU1nM0YsUUFFTjl5RixLQUFLK3lGLGVBQWlCLEVBRXRCL3lGLEtBQUsreUYsZUFBc0IveUYsS0FBS295RixZQUFjVSxPQUF4QixDQUcxQixDQUVBLGtCQUFJQyxDQUFnQmxuRixHQUNsQjdMLEtBQUtzRixLQUFLeXRGLGVBQWlCbG5GLENBQzdCLENBRUEsa0JBQUlrbkYsR0FDRixPQUFPL3lGLEtBQUtzRixLQUFLeXRGLGNBQ25CLENBRUEsMEJBQUlDLENBQXdCbm5GLEdBQzFCN0wsS0FBS3NGLEtBQUswdEYsdUJBQXlCbm5GLENBQ3JDLENBRUEsMEJBQUltbkYsR0FDRixPQUFPaHpGLEtBQUtzRixLQUFLMHRGLHdCQUEwQixDQUM3QyxDQUVBLG9CQUFJQyxHQUNGLE9BQU9qekYsS0FBS2d6Rix3QkFBMEJoekYsS0FBSyt5RixjQUM3QyxDQUVBLG1CQUFJRyxHQUNGLE9BQU9sekYsS0FBS2d6Rix3QkFBMEIsQ0FDeEMsQ0FFQSxrQkFBQUcsQ0FBb0J0bkYsRUFBSSxHQUN0QjdMLEtBQUtnekYsd0JBQTBCbm5GLEVBQzNCN0wsS0FBS2d6Rix1QkFBeUJoekYsS0FBSyt5RixpQkFDckMveUYsS0FBS2d6Rix1QkFBeUJoekYsS0FBSyt5RixlQUV2QyxDQUVBLG9CQUFBSyxDQUFzQnZuRixHQUNwQjdMLEtBQUtnekYsd0JBQTBCbm5GLEVBQzNCN0wsS0FBS2d6Rix1QkFBeUJoekYsS0FBSyt5RixpQkFDckMveUYsS0FBS2d6Rix1QkFBeUJoekYsS0FBSyt5RixlQUV2QyxDQUVBLHVCQUFJTSxHQUNGLE1BQU1DLFVBQVlyMEUsTUFBTWpmLEtBQUsreUYsZ0JBQWdCUSxLQUFLLFFBQ2xELEdBQUl2ekYsS0FBS2d6Rix3QkFBMEIsRUFBRyxDQUNwQyxJQUFLLElBQUl4eUUsRUFBSSxFQUFHQSxFQUFJeGdCLEtBQUtnekYsdUJBQXdCeHlFLElBQy9DOHlFLFVBQVU5eUUsR0FBSyxpQkFFakIsT0FBTzh5RSxTQUNULENBRUEsR0FBSXR6RixLQUFLZ3pGLHVCQUF5QixFQUFHLENBSW5DLE9BSHFCL3pFLE1BQU03YyxLQUFLQyxJQUFJckMsS0FBS2d6Rix5QkFBeUJPLEtBQ2hFLFdBRWtCdm5GLE9BQU9zbkYsVUFDN0IsQ0FDRixDQUVBLFlBQUkzckMsR0FDRixNQUFNbnZCLFdBQWEsR0FTbkIsT0FSSXg0QixLQUFLNnhGLFNBQVVyNUQsV0FBV3RoQyxLQUFLLFVBQzlCc2hDLFdBQVd0aEMsS0FBSyxRQUNqQjhJLEtBQUtzRixLQUFLbXRGLFVBQVVqNkQsV0FBV3RoQyxLQUFLLFdBQVksWUFDaEQ4SSxLQUFLc0YsS0FBSytuRCxTQUFTNzBCLFdBQVd0aEMsS0FBSyxXQUNuQzhJLEtBQUtzRixLQUFLc3RGLFNBQVNwNkQsV0FBV3RoQyxLQUFLLFdBQ25DOEksS0FBS3NGLEtBQUtxdEYsU0FBU242RCxXQUFXdGhDLEtBQUssV0FDbkM4SSxLQUFLc0YsS0FBS3ZFLFFBQVF5M0IsV0FBV3RoQyxLQUFLLFVBQ2xDOEksS0FBS3NGLEtBQUswdEYsd0JBQTBCLEdBQUd4NkQsV0FBV3RoQyxLQUFLLGNBQ3BEc2hDLFdBQVduMEIsS0FBSyxJQUN6QixDQUVBLGNBQUk2dEYsR0FDRixNQUFNajhFLE1BQVEsQ0FBQyxFQXlCZixHQXhCSWpXLEtBQUtzRixLQUFLNHNGLFlBQVk5N0YsT0FBTTZmLE1BQU03ZixLQUFPNEosS0FBS3NGLEtBQUs0c0YsV0FBVzk3RixNQUM5RDRKLEtBQUtzRixLQUFLNHNGLFlBQVkxdkMsUUFBT3ZzQyxNQUFNdXNDLE1BQVF4aUQsS0FBS3NGLEtBQUs0c0YsV0FBVzF2QyxPQUNwRXZzQyxNQUFNdWlCLFdBQWEsR0FDZng0QixLQUFLc0YsS0FBSzRzRixZQUFZQyxpQkFDeEJsOEUsTUFBTTlVLEtBQU80UyxVQUFVbTRDLGVBQWVsc0QsS0FBS3NGLEtBQUs0c0YsV0FBV0MsZ0JBQ3ZEbDhFLE1BQU05VSxPQUNIOFUsTUFBTTlVLEtBQUt5OUIsVUFBVzNvQixNQUFNOVUsS0FBS29sRCxVQUNwQ3R3QyxNQUFNbWYsUUFBUyxFQUNmbmYsTUFBTXU5RSxXQUFhdjlFLE1BQU05VSxLQUFLc3FCLFlBQVlDLFVBQzFDelYsTUFBTXVpQixZQUFjLFNBQ2Z2aUIsTUFBTTlVLEtBQUt5OUIsVUFDVjNvQixNQUFNOVUsS0FBSzJTLGNBQWdCQyxVQUFVRCxhQUFhekosUUFDcEQ0TCxNQUFNdzlFLFlBQWMsVUFDWHg5RSxNQUFNOVUsS0FBS29mLFNBQVF0SyxNQUFNdzlFLFlBQWMsY0FFaER4OUUsTUFBTTlVLEtBQUsyUyxjQUFnQkMsVUFBVUQsYUFBYXpKLFNBQ2xENEwsTUFBTTlVLEtBQUtvZixVQUVYdEssTUFBTWd4QyxhQUFjLE9BTTFCam5ELEtBQUt1d0YsU0FBVSxDQUNqQnQ2RSxNQUFNM1csUUFBVSxHQUNoQixJQUFLLE1BQU04d0IsSUFBSyxDQUFDLE9BQVEsQ0FDdkIsTUFBTXpaLGVBQWlCM1csS0FBSy9GLE1BQU1nL0Msa0JBQWtCN29CLEdBQ2hEelosZ0JBQWdCemdCLE9BQU8rZixNQUFNM1csUUFBUXBJLEtBQUt5ZixlQUFldFosTUFDL0QsQ0FFQSxJQUFLLE1BQU1wSCxLQUFLK0osS0FBSy9GLE1BQU1tbkQsWUFDekJuckMsTUFBTTNXLFFBQVFwSSxLQUFLakIsRUFBRUcsTUFHdkIsSUFBSyxNQUFNSCxLQUFLK0osS0FBSy9GLE1BQU1rbkQsWUFDekJsckMsTUFBTTNXLFFBQVFwSSxLQUFLakIsRUFBRUcsTUFJdkIsR0FGQTZmLE1BQU15OUUsYUFBZXo5RSxNQUFNM1csUUFBUXNCLE9BRS9CWixLQUFLc0YsS0FBSzRzRixZQUFZaGtGLEdBQUksQ0FDNUIsSUFBSWpJLEtBQU9qRyxLQUFLL0YsTUFBTXlGLEtBQUtNLEtBQUtzRixLQUFLNHNGLFdBQVdoa0YsSUFDaEQsSUFBS2pJLEtBQU0sQ0FDVCxNQUFNMHRGLFNBQVdyMkYsS0FBSzZRLE1BQU1qUixJQUFJOEMsS0FBS3NGLEtBQUs0c0YsV0FBV2hrRixJQUNqRHlsRixXQUFVMXRGLEtBQU9qRyxLQUFLL0YsTUFBTXlGLEtBQUtpMEYsU0FBU3Y5RixNQUNoRCxDQUVJNlAsT0FDZ0IsU0FBZEEsS0FBSzVILE1BQTZDLFVBQTFCNEgsS0FBSy9QLE1BQU1vUCxNQUFNakgsT0FDM0M0WCxNQUFNMjlFLElBQU0zdEYsS0FBSy9QLE1BQ2pCK2YsTUFBTTdmLEtBQU82UCxLQUFLL1AsTUFBTUUsS0FDeEI2ZixNQUFNNVgsS0FBTyxRQUNiNFgsTUFBTXV6QyxTQUFVLEVBQ2hCdnpDLE1BQU00OUUsUUFBUyxFQUNmNTlFLE1BQU11c0MsTUFBUXY4QyxLQUFLL1AsTUFBTUEsT0FFVCxtQkFBZCtQLEtBQUs1SCxPQUNQNFgsTUFBTTI5RSxJQUFNM3RGLEtBQUsvUCxNQUNqQitmLE1BQU03ZixLQUFPNlAsS0FBSy9QLE1BQU1tSCxNQUN4QjRZLE1BQU01WCxLQUFPLGlCQUNiNFgsTUFBTTY5RSxrQkFBbUIsRUFDekI3OUUsTUFBTTQ5RSxRQUFTLEVBQ2Y1OUUsTUFBTXVzQyxNQUFRdjhDLEtBQUsvUCxNQUFNQSxPQUVULGNBQWQrUCxLQUFLNUgsT0FDUDRYLE1BQU0yOUUsSUFBTTN0RixLQUFLL1AsTUFDakIrZixNQUFNN2YsS0FBTzZQLEtBQUsvUCxNQUFNbUgsTUFDeEI0WSxNQUFNNVgsS0FBTyxZQUNiNFgsTUFBTXl6QyxhQUFjLEVBQ3BCenpDLE1BQU00OUUsUUFBUyxFQUNmNTlFLE1BQU11c0MsTUFBUXY4QyxLQUFLL1AsTUFBTUEsT0FHL0IsTUFBTyxHQUFJOEosS0FBS3NGLEtBQUs0c0YsWUFBWTk3RixLQUFNLENBQ3JDLE1BQU02UCxLQUFPakcsS0FBSy9GLE1BQU15RixLQUFLTSxLQUFLc0YsS0FBSzRzRixXQUFXOTdGLE1BQzlDNlAsT0FDZ0IsU0FBZEEsS0FBSzVILE1BQTZDLFVBQTFCNEgsS0FBSy9QLE1BQU1vUCxNQUFNakgsT0FDM0M0WCxNQUFNMjlFLElBQU0zdEYsS0FBSy9QLE1BQ2pCK2YsTUFBTTdmLEtBQU82UCxLQUFLL1AsTUFBTUUsS0FDeEI2ZixNQUFNNVgsS0FBTyxRQUNiNFgsTUFBTXV6QyxTQUFVLEVBQ2hCdnpDLE1BQU00OUUsUUFBUyxFQUNmNTlFLE1BQU11c0MsTUFBUXY4QyxLQUFLL1AsTUFBTUEsT0FFVCxtQkFBZCtQLEtBQUs1SCxPQUNQNFgsTUFBTTI5RSxJQUFNM3RGLEtBQUsvUCxNQUNqQitmLE1BQU03ZixLQUFPNlAsS0FBSy9QLE1BQU1tSCxNQUN4QjRZLE1BQU01WCxLQUFPLGlCQUNiNFgsTUFBTTY5RSxrQkFBbUIsRUFDekI3OUUsTUFBTTQ5RSxRQUFTLEVBQ2Y1OUUsTUFBTXVzQyxNQUFRdjhDLEtBQUsvUCxNQUFNQSxPQUVULGNBQWQrUCxLQUFLNUgsT0FDUDRYLE1BQU0yOUUsSUFBTTN0RixLQUFLL1AsTUFDakIrZixNQUFNN2YsS0FBTzZQLEtBQUsvUCxNQUFNbUgsTUFDeEI0WSxNQUFNNVgsS0FBTyxZQUNiNFgsTUFBTXl6QyxhQUFjLEVBQ3BCenpDLE1BQU00OUUsUUFBUyxFQUNmNTlFLE1BQU11c0MsTUFBUXY4QyxLQUFLL1AsTUFBTUEsT0FHL0IsQ0FDRixNQUFPLEdBQUk4SixLQUFLc0YsS0FBSzRzRixZQUFZaGtGLEdBQUksQ0FDbkMsTUFBTWpJLEtBQU8zSSxLQUFLNlEsTUFBTWpSLElBQUk4QyxLQUFLc0YsS0FBSzRzRixXQUFXaGtGLElBQzdDakksTUFDc0IsVUFBcEJBLEtBQUtYLE1BQU1qSCxPQUNiNFgsTUFBTTI5RSxJQUFNM3RGLEtBQ1pnUSxNQUFNN2YsS0FBTzZQLEtBQUs3UCxLQUNsQjZmLE1BQU01WCxLQUFPLFFBQ2I0WCxNQUFNdXpDLFNBQVUsRUFDaEJ2ekMsTUFBTTQ5RSxRQUFTLEVBQ2Y1OUUsTUFBTXVzQyxNQUFRdjhDLEtBQUt3RSxLQUd6QixNQUFXekssS0FBS3NGLEtBQUs0c0YsWUFBWTk3RixNQUFRNEosS0FBS3NGLEtBQUs0c0YsWUFBWTF2QyxRQUM3RHZzQyxNQUFNN2YsS0FBTzRKLEtBQUtzRixLQUFLNHNGLFdBQVc5N0YsS0FDbEM2ZixNQUFNdXNDLE1BQVF4aUQsS0FBS3NGLEtBQUs0c0YsV0FBVzF2QyxNQUNuQ3ZzQyxNQUFNNDlFLFFBQVMsR0FXakIsT0FSQTU5RSxNQUFNODlFLGFBQWMsRUFFZjk5RSxNQUFNbWYsUUFBV25mLE1BQU11c0MsUUFDMUJ2c0MsTUFBTXVpQixZQUFjLFdBQ3BCdmlCLE1BQU04OUUsYUFBYyxHQUV0Qjk5RSxNQUFNKzdFLFFBQVUvN0UsTUFBTW1mLFNBQVd0NUIsTUFBTW1hLE1BQU11c0MsT0FFdEN2c0MsS0FDVCxFQUdLLFNBQVMrOUUsaUJBQWtCdDNGLEVBQUcwakIsR0FDbkMsT0FBSzFqQixHQUFLMGpCLEVBQVUsR0FDZkEsR0FBSzFqQixHQUFXLEVBQ2hCQSxHQUFNMGpCLEVBRVBBLEVBQUUweEUsU0FBV3AxRixFQUFFbzFGLE9BQWUsRUFDOUJwMUYsRUFBRW8xRixTQUFXMXhFLEVBQUUweEUsUUFBZ0IsRUFFNUJwMUYsRUFBRWpHLElBQU0ycEIsRUFBRTNwQixJQUxJLENBTXZCLENDNWlCTyxNQUFNdzlGLDBCQUEwQjFHLGlCQUVyQyx5QkFBVzl6RSxHQUNULE1BQU1uYSxRQUFVVixRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUM5REcsU0FBVSx3REFDVnl6RSxVQUFVLElBR1osT0FEQS90RixRQUFRcWEsUUFBUXppQixLQUFLLGlCQUNkb0ksT0FDVCxDQUdBLGFBQU02eEIsR0FDSixNQUFNN3JCLFdBQWFqSixNQUFNODBCLFVBMkR6QixHQXpEQTdyQixLQUFLbkwsT0FBUyxHQUNkbUwsS0FBSzR1RixRQUFVLENBQUMsRUFDaEI1dUYsS0FBS29mLG1CQUFxQnBuQixLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxzQkFHcERvSSxLQUFLbkwsT0FBT2pELEtBQUssQ0FDZmQsS0FDRWtILEtBQUtDLEtBQUtDLFNBQVMsbUJBQXFCLEtBQUt3QyxLQUFLc0YsS0FBSzZ1RixvQkFHM0Q3dUYsS0FBS2dILEtBQUs4bkYsa0JBQ1I5dUYsS0FBS0EsS0FBSyt1RixVQUFVQyxTQUFXaHZGLEtBQUtBLEtBQUsrdUYsU0FBU0UsYUFDcERqdkYsS0FBS2dILEtBQUtrb0YsWUFBYSxFQUdyQmx2RixLQUFLQSxLQUFLbXZGLFFBQVFDLGtCQUNqQnB2RixLQUFLQSxLQUFLK3VGLFNBQVNNLFFBQ2pCcnZGLEtBQUtBLEtBQUsrdUYsU0FBU0MsVUFBWWh2RixLQUFLQSxLQUFLK3VGLFNBQVNFLGdCQUVyRGp2RixLQUFLQSxLQUFLbXZGLE9BQU9HLGdCQUFpQixFQUNsQ3R2RixLQUFLQSxLQUFLbXZGLE9BQU9JLFlBQWEsRUFDOUJ2dkYsS0FBS0EsS0FBS212RixPQUFPSyx5QkFBMEIsR0FHekM5MEYsS0FBSyswRixhQUFhOTZGLE9BQ3BCcUwsS0FBSzJDLE1BQVFqSSxLQUFLKzBGLFlBQVk5NkYsTUFBTXlGLEtBQUs0RixLQUFLQSxLQUFLK3VGLFNBQVNya0UsV0FDNUQxcUIsS0FBS3dwRCxhQUFlOXVELEtBQUtnMUYsTUFBTUMsaUNBQzdCajFGLEtBQUtzRixLQUFLNHZGLGlCQUVSNXZGLEtBQUsyQyxPQUNQM0MsS0FBS2t2RixZQUFhLEVBQ2xCbHZGLEtBQUs2dkYsWUFBYSxHQUNUN3ZGLEtBQUtBLEtBQUsrdUYsU0FBU3JrRSxXQUFhMXFCLEtBQUtBLEtBQUs4dkYsaUJBQ25EOXZGLEtBQUtrdkYsWUFBYSxLQUdwQmx2RixLQUFLd3BELGFBQWU5dUQsS0FBS2cxRixNQUFNSyw0QkFDL0IvdkYsS0FBS2d3RixZQUFhLEVBQ2Rod0YsS0FBS0EsS0FBSyt1RixTQUFTcmtFLFdBQWExcUIsS0FBS0EsS0FBSzh2RixpQkFDNUM5dkYsS0FBS2t2RixZQUFhLElBSWpCbHZGLEtBQUtBLEtBQUtuQixZQUFXbUIsS0FBS0EsS0FBS25CLFVBQVksR0FHOUNtQixLQUFLQSxLQUFLbkIsVUFBWSxHQUN0Qm1CLEtBQUtBLEtBQUs2dUYsZ0JBQWtCN3VGLEtBQUtBLEtBQUt5dEYsaUJBRXRDenRGLEtBQUtpd0YseUJBQTBCLEdBR2pDandGLEtBQUtrd0YsY0FBZSxFQUNXLE1BQTNCeDFGLEtBQUtzRixLQUFLbXdGLGVBQ1pud0YsS0FBS2t3RixjQUFlLEdBR2xCbHdGLEtBQUtrdkYsV0FBWSxDQUNuQixJQUFJeGtFLFVBQVc5NUIsTUFDWG9QLEtBQUsyQyxPQUNQK25CLFVBQVkxcUIsS0FBSzJDLE1BQU0vUixNQUFNRSxLQUM3QkYsTUFBUW9QLEtBQUsyQyxNQUFNL1IsTUFBTUEsUUFFekI4NUIsVUFBWTFxQixLQUFLQSxLQUFLK3VGLFNBQVNya0UsVUFDL0I5NUIsTUFBUW9QLEtBQUtBLEtBQUs4dkYsZ0JBRXBCOXZGLEtBQUs0dUYsUUFBUXdCLGlCQUFtQnA0RixLQUFLQyxLQUFLMFcsT0FBTyxlQUFnQixDQUMvRDdkLEtBQU00NUIsVUFDTjk1QixRQUUwQixJQUF4Qm9QLEtBQUtBLEtBQUtuQixZQUNSbUIsS0FBS0EsS0FBS25CLFVBQVksRUFDeEJtQixLQUFLNHVGLFFBQVF3QixrQkFBb0IsTUFBTXB3RixLQUFLQSxLQUFLbkIsYUFDNUNtQixLQUFLNHVGLFFBQVF3QixrQkFBb0IsS0FBS3B3RixLQUFLQSxLQUFLbkIsYUFFM0QsQ0FFQSxHQUFJbUIsS0FBS0EsS0FBS212RixRQUFRQyxnQkFBaUIsQ0EwQ3JDLEdBekNBcHZGLEtBQUs0dUYsUUFBUVEsZ0JBQWtCcDNGLEtBQUtDLEtBQUswVyxPQUFPLHNCQUF1QixDQUNyRTVWLEtBQU1pSCxLQUFLQSxLQUFLK3VGLFNBQVNDLFFBQ3JCaDNGLEtBQUtDLEtBQUtDLFNBQVMsaUJBQ25CRixLQUFLQyxLQUFLQyxTQUFTLGtCQUVyQjhILEtBQUtBLEtBQUsrdUYsU0FBU2orRixPQUNyQmtQLEtBQUs0dUYsUUFBUVEsaUJBQW1CLEtBQUtwdkYsS0FBS0EsS0FBSyt1RixTQUFTaitGLFNBRzFEa1AsS0FBS0EsS0FBS212RixPQUFPa0IsWUFBYSxFQUUxQnJ3RixLQUFLQSxLQUFLK3VGLFNBQVNDLFVBQ3JCaHZGLEtBQUtuTCxPQUFPakQsS0FBSyxDQUFFZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxrQkFDeEM4SCxLQUFLQSxLQUFLK3VGLFNBQVNFLGNBQ3JCanZGLEtBQUtuTCxPQUFPakQsS0FBSyxDQUFFZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxxQkFJNUM4SCxLQUFLQSxLQUFLK3VGLFNBQVNNLFFBQ3JCcnZGLEtBQUtuTCxPQUFPakQsS0FBSyxDQUFFZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxpQkFHMUN3QyxLQUFLc0YsS0FBS212RixPQUFPRyxpQkFDZHR2RixLQUFLa3ZGLFdBVUVsdkYsS0FBSzZ2RixZQUNmN3ZGLEtBQUtuTCxPQUFPakQsS0FBSyxDQUNmZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxxQkFDekJzM0QsSUFBSyxhQVpQeHZELEtBQUtuTCxPQUFPakQsS0FBSyxDQUNmZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxxQkFDekJzM0QsSUFBSyxVQUVQeHZELEtBQUs0dUYsUUFBUTBCLGdCQUFrQnQ0RixLQUFLQyxLQUFLMFcsT0FDdkMsdUJBQ0EsQ0FBRTdkLEtBQU1rUCxLQUFLQSxLQUFLK3VGLFNBQVNya0UsWUFFeEIxcUIsS0FBS0EsS0FBSzh2RixpQkFBZ0I5dkYsS0FBS0EsS0FBS212RixPQUFPa0IsWUFBYSxLQVM3RDMxRixLQUFLc0YsS0FBS212RixPQUFPSSxXQUFZLENBQy9CLElBQUlnQixhQUFldjRGLEtBQUtDLEtBQUtDLFNBQVMsa0JBQ2xDd0MsS0FBS3NGLEtBQUs0aUYsU0FBUzROLG9CQUFvQnJ6RixRQUN6Q296RixjQUFnQixNQUFNNzFGLEtBQUtzRixLQUFLNGlGLFFBQVE0TixtQkFBbUJyekYsU0FFN0Q2QyxLQUFLbkwsT0FBT2pELEtBQUssQ0FDZmQsS0FBTXkvRixlQUdKNzFGLEtBQUtzRixLQUFLbXZGLE9BQU9zQix1QkFDZi8xRixLQUFLc0YsS0FBSzRpRixTQUFTNE4sb0JBQW9CcnpGLE9BQVMsRUFDbEQ2QyxLQUFLNHVGLFFBQVE4QixlQUNYMTRGLEtBQUtDLEtBQUtDLFNBQVMsdUJBRXJCOEgsS0FBSzJ3RixpQkFBbUJ6bkYsaUJBQ3RCeE8sS0FBS3NGLEtBQUs0aUYsUUFBUTROLHFCQUNqQnBxRSxVQUNIcG1CLEtBQUs0dUYsUUFBUThCLGVBQWlCMTRGLEtBQUtDLEtBQUswVyxPQUFPLG1CQUFvQixDQUNqRS9kLE1BQU9vUCxLQUFLMndGLG9CQUlwQixDQU1BLEdBSklqMkYsS0FBS3NGLEtBQUttdkYsT0FBT0csZ0JBQ25CdHZGLEtBQUtuTCxPQUFPakQsS0FBSyxDQUFFZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxvQkFHMUN3QyxLQUFLc0YsS0FBSzR3RixzQkFBdUIsQ0FDbkMsTUFBTUMsZUFBaUIsQ0FDckIvL0YsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVMsaUJBQ3pCczNELElBQUssSUFFSDkwRCxLQUFLc0YsS0FBSzR3RixzQkFBd0IsR0FDcENDLGVBQWVyaEMsSUFBTSxTQUNyQnh2RCxLQUFLNHVGLFFBQVFrQyxxQkFBdUI5NEYsS0FBS0MsS0FBS0MsU0FDNUMsMkJBR0Y4SCxLQUFLNHVGLFFBQVFrQyxxQkFDWDk0RixLQUFLQyxLQUFLQyxTQUFTLHNCQUduQndDLEtBQUtzRixLQUFLcEcsTUFBTW0zRixtQkFBa0JGLGVBQWVyaEMsS0FBTyxZQUM1RHh2RCxLQUFLbkwsT0FBT2pELEtBQUtpL0YsZUFDbkIsQ0FFSW4yRixLQUFLc0YsS0FBSzRpRixTQUFTanlFLFFBQ2pCalcsS0FBS3NGLEtBQUsrdUYsU0FBU00sU0FBUTMwRixLQUFLc0YsS0FBS2d4RixZQUFhLEdBQ2xEdDJGLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsTUFBTXNKLGFBQ1UsSUFBekJ2ZixLQUFLc0YsS0FBS2d4RixhQUE0QnQyRixLQUFLc0YsS0FBS2d4RixZQUFhLEdBQ3hFaHhGLEtBQUs0dUYsUUFBUXFDLGVBQWlCajVGLEtBQUtDLEtBQUtDLFNBQ3RDLHVCQUVFd0MsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxNQUFNdXZCLFlBQzFCbGdDLEtBQUs0dUYsUUFBUXFDLGdCQUFrQixLQUFLajVGLEtBQUtDLEtBQUtDLFNBQzVDLHFCQUdKOEgsS0FBS25MLE9BQU9qRCxLQUFLLENBQ2ZkLEtBQU1rSCxLQUFLQyxLQUFLQyxTQUFTLGdCQUN6QnMzRCxJQUFLLGFBRUU5MEQsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxNQUFNUSxVQUNqQ25SLEtBQUs0dUYsUUFBUXNDLFlBQWNsNUYsS0FBS0MsS0FBS0MsU0FBUyx1QkFDOUM4SCxLQUFLbkwsT0FBT2pELEtBQUssQ0FDZmQsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVMsZUFDekJzM0QsSUFBSyxhQUdQeHZELEtBQUs0dUYsUUFBUXNDLFlBQWNsNUYsS0FBS0MsS0FBS0MsU0FBUyxxQkFDOUM4SCxLQUFLbkwsT0FBT2pELEtBQUssQ0FDZmQsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVMsZ0JBQ3pCczNELElBQUssYUFJYixDQW9DQSxHQWxDSTkwRCxLQUFLc0YsS0FBS212RixPQUFPZ0Msc0JBQ2Z6MkYsS0FBS3NGLEtBQUsrdUYsU0FBU00sT0FDckJydkYsS0FBSzR1RixRQUFRd0MsaUJBQW1CcDVGLEtBQUtDLEtBQUtDLFNBQ3hDLDZCQUVPd0MsS0FBS3NGLEtBQUsrdUYsU0FBU0MsVUFDeEJ0MEYsS0FBS3NGLEtBQUttdkYsT0FBT0csZUFDbkJ0dkYsS0FBSzR1RixRQUFRd0MsaUJBQW1CcDVGLEtBQUtDLEtBQUtDLFNBQ3hDLDZCQUVPd0MsS0FBS3NGLEtBQUttdkYsT0FBT0ksYUFDMUJ2dkYsS0FBSzR1RixRQUFRd0MsaUJBQW1CcDVGLEtBQUtDLEtBQUtDLFNBQVMsc0JBS3JEd0MsS0FBS3NGLEtBQUttdkYsT0FBT2tDLGNBQ2YzMkYsS0FBS3NGLEtBQUttdkYsT0FBT21DLGFBRW5CdHhGLEtBQUtpNkIsZ0JBQWtCdi9CLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsTUFBTXdWLGFBQWFDLFdBQ3ZEcG1CLEtBQUtpNkIsZ0JBQWtCdi9CLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsTUFBTXFmLGVBY3BEdDFCLEtBQUtzRixLQUFLbXZGLE9BQU9tQyxhQUFjLENBQ2pDdHhGLEtBQUt1eEYsbUJBQW9CLEVBQ3pCdnhGLEtBQUt3eEYsMkJBQTRCLEVBR3BCOTJGLEtBQUsrMkYsY0FDVHZvRSxVQUNQbHBCLEtBQUt3eEYsMkJBQTRCLEdBSS9COTJGLEtBQUtzRixLQUFLK3VGLFNBQVMyQyxXQUFhaDNGLEtBQUtzRixLQUFLNGlGLFNBQVNqeUUsT0FBT3lJLFlBQzVEcFosS0FBS3V4RixtQkFBb0IsRUFDekJ2eEYsS0FBSzJ4RixzQkFBd0J6b0YsaUJBQzNCeE8sS0FBS3NGLEtBQUs0aUYsUUFBUWdQLG1CQUNqQnhyRSxVQUlzQyxJQUFyQ3BtQixLQUFLQSxLQUFLNnhGLHVCQUNaN3hGLEtBQUs0dUYsUUFBUXZ1QyxZQUFjcm9ELEtBQUtDLEtBQUtDLFNBQVMsd0JBRTlDOEgsS0FBSzR1RixRQUFRdnVDLFlBQWNyb0QsS0FBS0MsS0FBSzBXLE9BQ25DLHlCQUNBLENBQUUwOUIsT0FBUXJzQyxLQUFLQSxLQUFLNnhGLHlCQUd4Qjd4RixLQUFLbkwsT0FBT2pELEtBQUssQ0FDZmQsS0FDRWtILEtBQUtDLEtBQUtDLFNBQVMsb0JBQ25CLEtBQUs4SCxLQUFLQSxLQUFLNnhGLDRCQUtuQm4zRixLQUFLc0YsS0FBSyt1RixTQUFTK0MsZUFDbkJwM0YsS0FBS3NGLEtBQUsrdUYsU0FBU00sUUFDbkIzMEYsS0FBS3NGLEtBQUs0aUYsU0FBU2p5RSxPQUFPeUksWUFFMUJwWixLQUFLK3hGLFlBQWEsRUFDbEIveEYsS0FBSzR1RixRQUFRbUQsV0FBYS81RixLQUFLQyxLQUFLQyxTQUFTLG9CQUM3QzhILEtBQUtneUYscUJBQXVCOW9GLGlCQUMxQnhPLEtBQUtzRixLQUFLNGlGLFFBQVFxUCxtQkFDakI3ckUsV0FHTHBtQixLQUFLbkwsT0FBT2pELEtBQUssQ0FDZmQsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVMsc0JBRTdCLENBV0EsT0FUSXdDLEtBQUtzRixLQUFLbXZGLE9BQU9wK0QsU0FDZnIyQixLQUFLc0YsS0FBS2d4RixXQUNaaHhGLEtBQUs0dUYsUUFBUXNELGFBQWVsNkYsS0FBS0MsS0FBS0MsU0FBUyx1QkFFL0M4SCxLQUFLNHVGLFFBQVFzRCxhQUFlbDZGLEtBQUtDLEtBQUtDLFNBQ3BDLDRCQUlDOEgsSUFDVCxDQUdBLGNBQU0rbkYsR0FDSixHQUFLL3ZGLEtBQUtzRyxLQUFLMkUsS0FBZixDQUlBLEdBQUl2SSxLQUFLc0YsS0FBS212RixPQUFPbUMsYUFBYyxDQUVqQyxHQUFJNTJGLEtBQUtzRixLQUFLNGlGLFNBQVNnUCxrQkFBa0J6MEYsTUFBTyxDQUM5QyxNQUFNZzFGLFlBQWN6M0YsS0FBS3NGLEtBQUs0aUYsUUFBUWdQLGlCQUFpQnowRixNQUNqRHFqRCxXQUFhOWxELEtBQUtzRixLQUFLcEcsTUFBTWc3QixZQUFjLEVBQUlsNkIsS0FBS3NGLEtBQUtySixNQUMzRDJMLGNBQWNtK0MsVUFBVUQsWUFDMUI5bEQsS0FBS3NGLEtBQUtySixhQUNGLElBQUk2RixLQUFLZ2tELFlBQVkza0QsS0FBSyxDQUFFbUIsT0FBTyxLQUN6Q0csTUFDUTNHLE1BQU1JLE9BQU80cEQsZUFDdkI5bEQsS0FBS3NGLEtBQUtySixNQUFRQyxPQUFPNHBELGtCQUdxQixJQUFyQzlsRCxLQUFLc0YsS0FBSzZ4Rix5QkFDbkJuM0YsS0FBS3NGLEtBQUs2eEYsdUJBQXlCTSxZQUFjejNGLEtBQUtzRixLQUFLckosTUFDdkQrRCxLQUFLc0YsS0FBSzZ4Rix1QkFBeUIsSUFDckNuM0YsS0FBS3NGLEtBQUs2eEYsdUJBQXlCLEdBR3pDLE1BRUl0NUYsSUFBY21DLEtBQUtzRixLQUFLb3lGLHdCQUMxQjEzRixLQUFLc0YsS0FBS295Rix1QkFBd0IsUUFHaEM3NUYsSUFBY21DLEtBQUtzRixLQUFLZ3hGLGFBQzFCdDJGLEtBQUtzRixLQUFLZ3hGLFlBQ1B0MkYsS0FBS3NGLEtBQUttdkYsT0FBT0csZ0JBQWtCNTBGLEtBQUtzRixLQUFLK3VGLFNBQVNNLFVBQ3REMzBGLEtBQUtzRixLQUFLbXZGLE9BQU9rRCwwQkFJcEIzM0YsS0FBS3NGLEtBQUsrdUYsU0FBU0MsU0FDbkJ0MEYsS0FBS3NGLEtBQUsrdUYsU0FBU0UsY0FDbkJ2MEYsS0FBS3NGLEtBQUs0aUYsU0FBUzROLG9CQUFvQnJ6RixhQUVuQzVFLElBQWNtQyxLQUFLc0YsS0FBS3N5RixzQkFDMUI1M0YsS0FBS3NGLEtBQUtzeUYsb0JBQ1I1M0YsS0FBS3NGLEtBQUs0aUYsUUFBUTROLG1CQUFtQnJ6RixZQUVyQzVFLElBQWNtQyxLQUFLc0YsS0FBS3BHLE1BQU0yNEYsbUJBQ2hDNzNGLEtBQUtzRixLQUFLcEcsTUFBTTI0RixpQkFDZDczRixLQUFLc0YsS0FBSyt1RixTQUFTeUQsVUFBWTkzRixLQUFLc0YsS0FBS3N5RixxQkFBdUIsR0FHeEUsQ0FFSTUzRixLQUFLc0YsS0FBS212RixPQUFPcCtELFNBQ25CcjJCLEtBQUtzRixLQUFLK3RGLG9CQUFzQnowRixRQUFRQyxNQUFNd08sVUFDNUNyTixLQUFLKzBGLFlBQVkxQixxQkFFbkJyekYsS0FBS3NGLEtBQUtpcEYsV0FBYSxDQUFFQyxZQUFZLEdBcER2QyxNQUZFcmpGLFFBQVF1UyxNQUFNLHlDQXdEbEIsQ0FHQSxrQkFBTTJ3RSxHQUFpQixDQUd2QixtQkFBTWtCLEdBRUZ2dkYsS0FBS3NGLEtBQUs0aUYsU0FBU2p5RSxPQUM0QixXQUEvQ2pXLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsT0FBTzVRLGFBQWFqUCxPQUV0QzRKLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsTUFBUWxDLFVBQVVoUyxTQUFTL0IsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxRQUkvRGpXLEtBQUtzRixLQUFLNGlGLFNBQVM0TixvQkFDeUMsV0FBNUQ5MUYsS0FBS3NGLEtBQUs0aUYsUUFBUTROLG9CQUFvQnp3RixhQUFhalAsT0FFbkQ0SixLQUFLc0YsS0FBSzRpRixRQUFRNE4sbUJBQXFCaDBGLEtBQUtDLFNBQzFDL0IsS0FBS3NGLEtBQUs0aUYsUUFBUTROLHFCQUlwQjkxRixLQUFLc0YsS0FBSzRpRixTQUFTZ1Asa0JBQ3VDLFdBQTFEbDNGLEtBQUtzRixLQUFLNGlGLFFBQVFnUCxrQkFBa0I3eEYsYUFBYWpQLE9BRWpENEosS0FBS3NGLEtBQUs0aUYsUUFBUWdQLGlCQUFtQnAxRixLQUFLQyxTQUN4Qy9CLEtBQUtzRixLQUFLNGlGLFFBQVFnUCxtQkFJcEJsM0YsS0FBS3NGLEtBQUs0aUYsU0FBU3FQLGtCQUN1QyxXQUExRHYzRixLQUFLc0YsS0FBSzRpRixRQUFRcVAsa0JBQWtCbHlGLGFBQWFqUCxPQUVqRDRKLEtBQUtzRixLQUFLNGlGLFFBQVFxUCxpQkFBbUJ6MUYsS0FBS0MsU0FDeEMvQixLQUFLc0YsS0FBSzRpRixRQUFRcVAsa0JBR3hCLENBR0EsZ0JBQU0va0QsR0FFQ3h5QyxLQUFLZzFGLFlBQzRDLElBQTNDaDFGLEtBQUtnMUYsTUFBTStDLHVCQUF1QnA2RixZQUlwQixJQUFkcUMsS0FBS3NGLE9BQXNCdEYsS0FBS3NGLEtBQU8sQ0FBQyxRQUNuQixJQUFyQnRGLEtBQUtzRixLQUFLbXZGLFNBQXdCejBGLEtBQUtzRixLQUFLbXZGLE9BQVMsQ0FBQyxHQUdqRXowRixLQUFLc0YsS0FBSyt1RixTQUFXcjBGLEtBQUt5cEYsVUFBVXVPLGdCQUVwQ2g0RixLQUFLc0YsS0FBSzR2RixnQkFBa0JsMUYsS0FBS2cxRixNQUFNK0Msc0JBQXNCcDZGLEtBRXpEcUMsS0FBS2k0RixpQkFBaUI5ekYsVUFBWSxJQUNwQ25FLEtBQUtzRixLQUFLbkIsVUFBWW5FLEtBQUtpNEYsZ0JBQWdCOXpGLFVBQzNDbkUsS0FBS3NGLEtBQUtwRyxNQUFNbTNGLGtCQUFtQixFQUNuQ3IyRixLQUFLc0YsS0FBS3BHLE1BQU1reUYsYUFBZXB4RixLQUFLKzBGLFlBQVkzRCxjQUdsRHB4RixLQUFLc0YsS0FBSyt0RixvQkFBc0J6MEYsUUFBUUMsTUFBTXdPLFVBQzVDck4sS0FBSyswRixZQUFZMUIscUJBRW5CcnpGLEtBQUtzRixLQUFLeXRGLGVBQWlCL3lGLEtBQUsrMEYsWUFBWS9CLHVCQUM1Q2h6RixLQUFLc0YsS0FBSzZ1RixnQkFBa0IsRUFDOUIsQ0FFQSxlQUFJWSxHQUNGLEdBQUsvMEYsS0FBS2k0RixnQkFJVixPQUFPLElBQUk5SCxhQUFhbndGLEtBQUtpNEYsZ0JBQy9CLENBRUEsbUJBQUlBLEdBQ0YsR0FBS2o0RixLQUFLZzFGLE9BQ0xoMUYsS0FBS3NGLEtBQUs0dkYsZ0JBQ2YsT0FBT2wxRixLQUFLZzFGLE1BQU1rRCxtQkFBbUJsNEYsS0FBS3NGLEtBQUs0dkYsZ0JBQ2pELENBRUEsWUFBSXpMLEdBQ0YsR0FBS3pwRixLQUFLZzFGLE1BQ1YsT0FBT2gxRixLQUFLZzFGLE1BQU1tRCxnQkFBZ0JuNEYsS0FBS3NGLEtBQUs4eUYsYUFDOUMsQ0FFQSxZQUFJL0QsR0FDRixHQUFLcjBGLEtBQUt5cEYsU0FDVixPQUFPenBGLEtBQUt5cEYsU0FBU3VPLGVBQ3ZCLENBRUEsU0FBSWhELEdBQ0YsR0FBS2gxRixLQUFLc0YsS0FBSyt5RixVQUVmLE9BREtyNEYsS0FBS3M0RixTQUFRdDRGLEtBQUtzNEYsT0FBUzF3RixjQUFjb0osVUFBVWhSLEtBQUtzRixLQUFLK3lGLFlBQzNEcjRGLEtBQUtzNEYsTUFDZCxDQUVBLFFBQUluM0YsR0FDRixJQUFJK2MsU0FDSixHQUFJbGUsS0FBSyswRixZQUFZOTZGLE9BQVMrRixLQUFLc0YsS0FBSyt1RixTQUFTcmtFLFVBQVcsQ0FDMUQsTUFBTXVvRSxXQUFhdjRGLEtBQUsrMEYsWUFBWTk2RixNQUFNeUYsS0FDeENNLEtBQUtzRixLQUFLK3VGLFNBQVNya0UsV0FHbkI5UixjQUR3QixJQUFmcTZFLFdBQ0VBLFdBRUEsQ0FDVGw2RixLQUFNLFFBQ05uSSxNQUFPLENBQ0xFLEtBQU00SixLQUFLc0YsS0FBSyt1RixTQUFTcmtFLFVBQ3pCNjRCLFVBQVc3b0QsS0FBS3NGLEtBQUs4dkYsaUJBSTNCbDNFLFNBQVNqa0IsTUFBUSxDQUFFbVgsU0FBVXBSLEtBQUsrMEYsWUFBWTk2RixNQUFNaVUsR0FDdEQsTUFDTWxPLEtBQUtzRixLQUFLK3VGLFNBQVNya0UsV0FBYWh3QixLQUFLc0YsS0FBSzh2RixpQkFDNUNsM0UsU0FBVyxDQUNUN2YsS0FBTSxRQUNObkksTUFBTyxDQUNMRSxLQUFNNEosS0FBS3NGLEtBQUsrdUYsU0FBU3JrRSxVQUN6QjY0QixVQUFXN29ELEtBQUtzRixLQUFLOHZGLGdCQUV2Qm43RixNQUFPLENBQ0w3RCxLQUFNNEosS0FBSyswRixZQUFZMytGLFFBVS9CLE9BTEk4bkIsV0FDRkEsU0FBU2xKLGFBQWVoVixLQUFLc0YsTUFBTW5CLFdBQWEsRUFDaEQrWixTQUFTNUgsV0FBYXZDLFVBQVV1UCxnQkFBZ0J0UCxRQUNoRGtLLFNBQVM2QyxVQUFXLEdBRWY3QyxlQUFZcmdCLENBQ3JCLENBRUEsb0JBQUkyNkYsR0FDRixJQUFLeDRGLEtBQUtzRixLQUFLNGlGLFNBQVNqeUUsT0FBT3lJLFVBQVcsT0FBTyxFQUNqRCxHQUFJMWUsS0FBS3NGLEtBQUsrdUYsU0FBUzJDLFVBQVcsQ0FDaEMsTUFBTTcvRSxPQUM0QyxpQkFBekNuWCxLQUFLc0YsS0FBSyt1RixTQUFTb0Usa0JBQ3RCLEdBQUd6NEYsS0FBS3NGLEtBQUsrdUYsU0FBU29FLG9CQUN0Qno0RixLQUFLc0YsS0FBSyt1RixTQUFTb0Usa0JBQ3pCLElBQUt6NEYsS0FBS3NGLEtBQUsrdUYsU0FBU29FLGtCQUFtQixPQUFPLEVBQ2xELEdBQ0V6NEYsS0FBS3NGLEtBQUsrdUYsU0FBU29FLG9CQUNsQjMyRixLQUFLZzRCLFNBQVMzaUIsUUFFZixPQUFPLENBRVgsQ0FDQSxHQUFJblgsS0FBS3NGLEtBQUsrdUYsU0FBU00sUUFBVTMwRixLQUFLc0YsS0FBSyt1RixTQUFTK0MsY0FBZSxDQUNqRSxNQUFNc0IsV0FDMkMsaUJBQXhDMTRGLEtBQUtzRixLQUFLK3VGLFNBQVNzRSxpQkFDdEIsR0FBRzM0RixLQUFLc0YsS0FBSyt1RixTQUFTc0UsbUJBQ3RCMzRGLEtBQUtzRixLQUFLK3VGLFNBQVNzRSxpQkFDekIsSUFBSzM0RixLQUFLc0YsS0FBSyt1RixTQUFTc0UsaUJBQWtCLE9BQU8sRUFDakQsR0FBSTM0RixLQUFLc0YsS0FBSyt1RixTQUFTc0UsbUJBQXFCNzJGLEtBQUtnNEIsU0FBUzQrRCxZQUN4RCxPQUFPLENBRVgsQ0FDQSxPQUFPLENBQ1QsQ0FFQSxrQkFBSUUsR0FDRixNQUFNcjRDLFFBQVUsR0FxQmhCLEdBcEJBdmdELEtBQUsrMEYsWUFBWTk2RixPQUFPNCtGLFdBQVcvekUsUUFBUWhOLFNBQVFnaEYsSUFDakQsSUFBSTkrRixRQUFVOCtGLEVBQUV4ekYsS0FBS0EsS0FBS3dFLE1BQU1MLE9BQU8wTixPQUNuQ2hiLEdBQUs2RCxLQUFLKzBGLFlBQVk5NkYsTUFBTWtDLEdBRTlCQSxHQURTLE9BQVBBLElBQThCLElBQWZELE9BQU9DLElBQ25CLEdBRUEsR0FBR0EsS0FHTkEsS0FBT0EsR0FBR3dPLFdBQVcsT0FBTXhPLEdBQUssSUFBTUEsSUFDdEMyOEYsRUFBRXh6RixLQUFLQSxLQUFLdUIsV0FBV3hPLE9BQU0yQixTQUFvQm1DLElBQ2pEMjhGLEVBQUV4ekYsS0FBS0EsS0FBS3VCLFdBQVdreUYsT0FBTS8rRixRQUFVQSxRQUFVbUMsR0FBSyxNQUMxRG9rRCxRQUFRcnBELEtBQUssQ0FDWGQsS0FBTSxHQUFHMGlHLEVBQUV4ekYsS0FBS2xQLFNBQVM0RCxXQUN6Qm1kLE9BQVFuZCxRQUNSMkQsS0FBTW03RixFQUFFbjdGLE1BQ1QsSUFFSDRpRCxRQUFRcDBDLEtBQUt2RSxjQUFjd0UsZ0JBR3hCbTBDLFFBQVE3Z0QsTUFBS281RixHQUNaQSxFQUFFMWlHLEtBQ0N3WixjQUNBakYsV0FDQ3JOLEtBQUtDLEtBQUtDLFNBQVMsMkJBQTJCb1MsaUJBR3BELENBQ0EsSUFBSXpULEdBQUssR0FDTDZELEtBQUsrMEYsWUFBWTk2RixRQUNuQmtDLEdBQUs2RCxLQUFLKzBGLFlBQVk5NkYsTUFBTWtDLEdBQ3hCQSxLQUFPQSxHQUFHd08sV0FBVyxPQUFNeE8sR0FBSyxJQUFNQSxJQUMvQixPQUFQQSxJQUE4QixJQUFmRCxPQUFPQyxNQUFXQSxHQUFLLEtBRzVDb2tELFFBQVEwVCxRQUFRLENBQ2Q3OUQsS0FBTSxHQUFHa0gsS0FBS0MsS0FBS0MsU0FBUyxpQ0FBaUNyQixNQUM3RGdiLE9BQVEsTUFBTWhiLEtBQ2R3QixLQUFNLFdBRVYsQ0FPQSxPQUxBNGlELFFBQVFycEQsS0FBSyxDQUNYZCxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUyxjQUN6QjJaLE9BQVFuWCxLQUFLc0YsTUFBTTB6RixvQkFBc0IsS0FDekNyN0YsS0FBTSxJQUVENGlELE9BQ1QsQ0FFQSxjQUFJMDRDLEdBQ0YsSUFBS2o1RixLQUFLc0YsTUFBTW13RixhQUFjLENBQzVCLElBQUt6MUYsS0FBSzQ0RixlQUFnQixPQUNyQjU0RixLQUFLc0YsT0FBTXRGLEtBQUtzRixLQUFPLENBQUMsR0FDN0J0RixLQUFLc0YsS0FBS213RixhQUFlejFGLEtBQUs0NEYsZUFBZSxHQUFHajdGLElBQ2xELENBRUEsR0FBSXFDLEtBQUtzRixLQUFLbXdGLGFBQWMsQ0FDMUIsTUFBTTN3RSxPQUFTOWtCLEtBQUs0NEYsZUFBZWw1RixNQUNqQ2MsR0FBS0EsRUFBRTdDLE9BQVNxQyxLQUFLc0YsS0FBS213RixlQUU1QixHQUFJM3dFLE9BQVEsT0FBT0EsTUFDckIsQ0FDRixDQUVBLDBCQUFJbzBFLEdBQ0YsR0FBSWw1RixLQUFLaTVGLFdBQVksQ0FDbkIsTUFBTW4wRSxPQUFTOWtCLEtBQUtpNUYsV0FDcEIsT0FBSW4wRSxRQUFVQSxPQUFPM04sUUFBVXJWLEtBQUtnNEIsU0FBU2hWLE9BQU8zTixRQUMzQzJOLE9BQU8zTixZQUVoQixDQUNGLENBRUYsQ0FFQSx1QkFBSWdpRixHQUNGLFNBQ0VuNUYsS0FBS3NGLEtBQUsrdUYsU0FBU0UsZUFDbEJ6NEYsTUFBTUksT0FBTzhELEtBQUtzRixLQUFLK3VGLFNBQVN5RCxhQUNqQzU3RixPQUFPOEQsS0FBS3NGLEtBQUsrdUYsU0FBU3lELFdBQWEsR0FDdkM5M0YsS0FBS2s1Rix1QkFLVCxDQUVBLFdBQUloRixHQUNGLE1BQU1BLFFBQVUsQ0FBQyxFQUdqQixPQUZBQSxRQUFRa0Ysa0JBQW9CcDVGLEtBQUtpNUYsV0FBVzdpRyxLQUVyQzg5RixPQUNULENBR0Esa0JBQU1tRixDQUFjLzVGLFNBQ2xCLElBQUlnNkYsZ0JBQ0FDLG1CQUFvQixFQUN4QixNQUFNQyxlQUFpQixDQUN2QkEsZ0JBQWlDLENBQUMsR0FDNUJDLGtCQUFvQixDQUFDLEVBQ3ZCejVGLEtBQUtzRixLQUFLcEcsTUFBTTI0RixtQkFDbEJ5QixpQkFBa0IsRUFDbEJFLGVBQWVuRixVQUFXLEVBQzFCbUYsZUFBZXhCLGdCQUFnQnJELFFBQVMsRUFDeEM2RSxlQUFleEIsZ0JBQWdCMUQsU0FBVSxHQUczQyxNQUFNb0YsS0FBTzE1RixLQUFLKzJGLGNBQ2xCLEdBQUkyQyxLQUFLbHJFLFNBQ0h4dUIsS0FBS3NGLEtBQUtveUYsc0JBQ1osSUFBSyxNQUFPNzdGLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFtdkYsS0FBS3JGLFVBQ2pDLFNBQVJ4NEYsTUFDRjI5RixlQUFleEIsZ0JBQWdCOWhHLE1BQU0yRixLQUFPM0YsTUFBTXlqRyxJQUNsREwsaUJBQWtCLEdBTTFCLEdBQUl0NUYsS0FBS3NGLEtBQUtzeUYsb0JBQXNCLEdBQUs1M0YsS0FBS3NGLEtBQUsrdUYsU0FBU0UsYUFBYyxDQUN4RSxJQUFJcUYsWUFBYzU1RixLQUFLc0YsS0FBSyt1RixTQUFTeUQsVUFDckM4QixhQUFlNTVGLEtBQUtzRixLQUFLc3lGLG9CQUNyQmdDLFlBQWMsSUFBR0EsWUFBYyxHQUMvQjU1RixLQUFLcTBGLFNBQVN5RCxZQUFjOEIsY0FDOUJKLGVBQWV4QixnQkFBZ0JGLFVBQVk4QixZQUMzQzU1RixLQUFLc0YsS0FBSyt1RixTQUFTeUQsVUFBWThCLFlBQy9CTixpQkFBa0IsRUFFdEIsQ0FxQ0EsR0FuQ0l0NUYsS0FBS3NGLEtBQUs2eEYsdUJBQXlCLElBQ3JDb0MsbUJBQW9CLEVBQ2hCdjVGLEtBQUsrMEYsWUFBWTk2RixZQUNiK0YsS0FBSyswRixZQUFZOTZGLE1BQU1zZ0MsV0FDM0J2NkIsS0FBS3NGLEtBQUs2eEYsdUJBQ1YsQ0FBRWo5RCxhQUFhLEtBR2pCdS9ELGtCQUFrQnRtRCxHQUFLbnpDLEtBQUtpNEYsZ0JBQWdCOWtELEdBQzVDc21ELGtCQUFrQnRtRCxJQUFNbnpDLEtBQUtzRixLQUFLNnhGLHVCQUM5QnNDLGtCQUFrQnRtRCxHQUFLLElBQUdzbUQsa0JBQWtCdG1ELEdBQUssS0FJckRuekMsS0FBS3NGLEtBQUs2dUYsZ0JBQWtCLElBQzlCb0YsbUJBQW9CLEVBQ3BCRSxrQkFBa0J6Ryx1QkFDaEJoekYsS0FBS2k0RixnQkFBZ0JqRix1QkFDdkJ5RyxrQkFBa0J6Ryx3QkFBMEJoekYsS0FBS3NGLEtBQUs2dUYsc0JBR1IsSUFBckNuMEYsS0FBS3NGLEtBQUtwRyxNQUFNbTNGLG1CQUFrQ3IyRixLQUFLc0YsS0FBS3BHLE1BQU1tM0Ysa0JBQW1CLEdBRTVGcjJGLEtBQUtzRixLQUFLcEcsTUFBTW0zRixrQkFDbEJrRCxtQkFBb0IsRUFDcEJFLGtCQUFrQnQxRixVQUFZLEdBRzNCckksTUFBTWtFLEtBQUtzRixLQUFLbkIsWUFDakJuRSxLQUFLc0YsS0FBS25CLFlBQWNuRSxLQUFLKzBGLFlBQVk1d0YsWUFFekNzMUYsa0JBQWtCdDFGLFVBQVluRSxLQUFLc0YsS0FBS25CLFdBSXhDbkUsS0FBS3NGLEtBQUtneEYsV0FBWSxDQUN4QixJQUFJdUQsZUFFRkEsZUFERTc1RixLQUFLc0YsS0FBS3cwRixRQUNLOTVGLEtBQUt5cEYsU0FFTHpwRixLQUFLZzFGLE1BQU0rRSxpQkFBaUIvNUYsS0FBS3lwRixTQUFTOXJGLEtBQU0sQ0FDL0RpdEUsTUFBTyxJQUlQaXZCLGVBQWVsOEYsWUFDWHFDLEtBQUtnMUYsTUFBTWdGLDBCQUNmaDZGLEtBQUtpNEYsZ0JBQWdCdDZGLEtBQ3JCazhGLGVBQWVsOEYsS0FDZixDQUNFczhGLGtCQUFrQixFQUNsQkMsa0JBQWtCLEVBQ2xCbDhGLFFBQVEsR0FJaEIsQ0FnQkEsT0FkSXM3Rix1QkFDSXQ1RixLQUFLZzFGLE1BQU1tRixlQUFlbjZGLEtBQUt5cEYsU0FBUzlyRixLQUFNNjdGLGVBQWdCLENBQ2xFeDdGLFFBQVEsSUFHUnU3Rix5QkFDSXY1RixLQUFLZzFGLE1BQU1vRixrQkFDZnA2RixLQUFLaTRGLGdCQUFnQnQ2RixLQUNyQjg3RixrQkFDQSxDQUFFejdGLFFBQVEsSUFHZGdDLEtBQUtzRixLQUFLbXZGLE9BQU9wK0QsUUFBUyxRQUNwQnIyQixLQUFLZzFGLE1BQU1xRiwrQkFDVixDQUNULENBRUEsb0JBQU1DLENBQWdCaDdGLFNBR3BCLE9BRktVLEtBQUtzRixLQUFLbXZGLFNBQVF6MEYsS0FBS3NGLEtBQUttdkYsT0FBUyxDQUFDLEdBQzNDejBGLEtBQUtzRixLQUFLbXZGLE9BQU9DLGlCQUFrQixHQUM1QixDQUNULENBRUEsNEJBQU02RixDQUF3Qmo3RixTQUk1QixPQUhBVSxLQUFLc0YsS0FBS212RixPQUFPSyx5QkFBMEIsRUFDM0M5MEYsS0FBS3NGLEtBQUttdkYsT0FBT0csZ0JBQWlCLEVBQ2xDNTBGLEtBQUtzRixLQUFLbXZGLE9BQU9JLFlBQWEsR0FDdkIsQ0FDVCxDQUVBLDRCQUFNMkYsQ0FBd0JsN0YsU0FJNUIsT0FIQVUsS0FBS3NGLEtBQUttdkYsT0FBT0sseUJBQTBCLEVBQzNDOTBGLEtBQUtzRixLQUFLbXZGLE9BQU9HLGdCQUFpQixFQUNsQzUwRixLQUFLc0YsS0FBS212RixPQUFPSSxZQUFhLEdBQ3ZCLENBQ1QsQ0FFQSw4QkFBTTRGLENBQTBCbjdGLFNBSzlCLE9BSkFVLEtBQUtzRixLQUFLbXZGLE9BQU9DLGlCQUFrQixFQUNuQzEwRixLQUFLc0YsS0FBS212RixPQUFPSyx5QkFBMEIsRUFDM0M5MEYsS0FBS3NGLEtBQUttdkYsT0FBT0csZ0JBQWlCLEVBQ2xDNTBGLEtBQUtzRixLQUFLbXZGLE9BQU9JLFlBQWEsR0FDdkIsQ0FDVCxDQUVBLDZCQUFNNkYsQ0FBeUJwN0YsU0FDN0IsT0FBS1UsS0FBS3NGLEtBQUsrdUYsU0FBU0UsY0FDeEJ2MEYsS0FBS3NGLEtBQUttdkYsT0FBT0sseUJBQTBCLEVBQzNDOTBGLEtBQUtzRixLQUFLbXZGLE9BQU9HLGdCQUFpQixFQUNsQzUwRixLQUFLc0YsS0FBS212RixPQUFPSSxZQUFhLEdBQ3ZCLEdBSnNDNzBGLEtBQUt5NkYsMEJBS3BELENBRUEsaUJBQU1FLENBQWFyN0YsU0FFakIsT0FEQVUsS0FBS3NGLEtBQUttdkYsT0FBT2dDLHFCQUFzQixHQUNoQyxDQUNULENBRUEsMEJBQU1tRSxDQUFzQnQ3RixTQWdCMUIsT0FmS1UsS0FBS3NGLEtBQUs0d0Ysd0JBQXVCbDJGLEtBQUtzRixLQUFLNHdGLHNCQUF3QixHQUN4RWwyRixLQUFLc0YsS0FBSzR3Rix1QkFBeUIsRUFDbkNsMkYsS0FBS3NGLEtBQUtuQixXQUFhLEVBQ3ZCbkUsS0FBS3NGLEtBQUs2dUYsaUJBQW1CLEVBQ3hCbjBGLEtBQUtzRixLQUFLcEcsTUFBTW0zRixtQkFDbkJyMkYsS0FBS3NGLEtBQUtwRyxNQUFNbTNGLGtCQUFtQixHQUVoQ3IyRixLQUFLc0YsS0FBS3BHLE1BQU1reUYsZUFDbkJweEYsS0FBS3NGLEtBQUtwRyxNQUFNa3lGLGNBQWUsR0FFN0JweEYsS0FBS3NGLEtBQUt5dEYsZ0JBQWtCL3lGLEtBQUtzRixLQUFLNnVGLGtCQUN4Q24wRixLQUFLc0YsS0FBS3BHLE1BQU1tM0Ysa0JBQW1CLEVBQ25DcjJGLEtBQUtzRixLQUFLbXZGLE9BQU9tQyxjQUFlLEVBQ2hDNTJGLEtBQUtzRixLQUFLZ3hGLFlBQWEsSUFFbEIsQ0FDVCxDQUVBLG9CQUFNdUUsQ0FBZ0J2N0YsU0FDcEIsTUFBTTJsQixPQUFTM2xCLFFBQVEvQyxNQUFNSSxjQUM3QixJQUFJc29CLE9BQU9qVyxVQUFVeVQsU0FBUyxZQUE5QixDQUVBLEdBREF3QyxPQUFPalcsVUFBVTJMLE9BQU8sWUFDbkIzYSxLQUFLbUIsS0FNVixPQUZLbkIsS0FBS3NGLEtBQUs0aUYsVUFBU2xvRixLQUFLc0YsS0FBSzRpRixRQUFVLENBQUMsR0FDN0Nsb0YsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxNQUFRbEMsVUFBVTYwQyx3QkFBd0I1b0QsS0FBS21CLFFBQzVEbkIsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxRQUN2QmpXLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsTUFBTThLLFVBQVcsUUFDN0IvZ0IsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxNQUFNa0wsU0FBUyxDQUFFQyxVQUFVLElBQ25EcGhCLEtBQUtzRixLQUFLNnVGLGlCQUFtQixFQUM3Qm4wRixLQUFLc0YsS0FBS212RixPQUFPa0MsYUFBYyxFQUMvQjF4RSxPQUFPalcsVUFBVTJMLE9BQU8sWUFDcEIzYSxLQUFLc0YsS0FBSzRpRixRQUFRanlFLE1BQU1zSixRQUMxQnZmLEtBQUtzRixLQUFLZ3hGLFlBQWEsRUFDdkJ0MkYsS0FBS3NGLEtBQUttdkYsT0FBT21DLGNBQWUsUUFFRCxJQUFwQjUyRixLQUFLc0YsS0FBS3JKLE9BQXlCK0QsS0FBSyswRixZQUFZOTZGLFFBQzdEK0YsS0FBS3NGLEtBQUtySixNQUNSK0QsS0FBSyswRixZQUFZOTZGLE1BQU1xTCxLQUFLQSxLQUFLdEosUUFBUUMsTUFBTS9GLE9BQVMsSUFJdkQsR0FyQkw2UyxHQUFHQyxjQUFjMFUsTUFBTXBnQixLQUFLQyxLQUFLQyxTQUFTLHNCQUhELENBeUI3QyxDQUVBLGFBQU1zOUYsQ0FBU3g3RixTQVViLGFBVE15VSxVQUFVbWtCLE1BQU1sNEIsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxNQUFPLFVBQVcsQ0FDeERnUCxPQUFRM2xCLFFBQVEvQyxNQUFNSSxjQUN0QnVCLFFBQVEsSUFFTjhCLEtBQUtzRixLQUFLNGlGLFFBQVFqeUUsTUFBTXNKLFNBQzFCdmYsS0FBS3NGLEtBQUttdkYsT0FBT21DLGNBQWUsRUFDaEM1MkYsS0FBS3NGLEtBQUtneEYsWUFBYSxFQUN2QnQyRixLQUFLc0YsS0FBSzZ1RixpQkFBbUIsSUFFeEIsQ0FDVCxDQUVBLDBCQUFNNEcsQ0FBc0J6N0YsU0FFMUIsR0FES1UsS0FBS3NGLEtBQUs0aUYsVUFBU2xvRixLQUFLc0YsS0FBSzRpRixRQUFVLENBQUMsR0FDekNsb0YsS0FBS3NGLEtBQUsrdUYsU0FBUzJDLFdBQWFoM0YsS0FBS3NGLEtBQUs0aUYsUUFBUWp5RSxPQUFPeUksVUFBVyxDQUN0RSxNQUFNdkgsT0FDNEMsaUJBQXpDblgsS0FBS3NGLEtBQUsrdUYsU0FBU29FLGtCQUN0QixHQUFHejRGLEtBQUtzRixLQUFLK3VGLFNBQVNvRSxvQkFDdEJ6NEYsS0FBS3NGLEtBQUsrdUYsU0FBU29FLGtCQUN6Qno0RixLQUFLc0YsS0FBSzRpRixRQUFRZ1AsaUJBQW1CLElBQUlwMUYsS0FBS3FWLGNBQ3hDblgsS0FBS3NGLEtBQUs0aUYsUUFBUWdQLGlCQUFpQnQvRSxTQUFTLENBQUV0VixPQUFPLEdBQzdELENBQ0EsR0FBSXRDLEtBQUtzRixLQUFLK3VGLFNBQVNNLFFBRW5CMzBGLEtBQUtzRixLQUFLK3VGLFNBQVMrQyxlQUNuQnAzRixLQUFLc0YsS0FBSzRpRixRQUFRanlFLE9BQU95SSxVQUN6QixDQUNBLE1BQU1nNkUsV0FDMkMsaUJBQXhDMTRGLEtBQUtzRixLQUFLK3VGLFNBQVNzRSxpQkFDdEIsR0FBRzM0RixLQUFLc0YsS0FBSyt1RixTQUFTc0UsbUJBQ3RCMzRGLEtBQUtzRixLQUFLK3VGLFNBQVNzRSxpQkFDekIzNEYsS0FBS3NGLEtBQUs0aUYsUUFBUXFQLGlCQUFtQixJQUFJejFGLEtBQUs0MkYsa0JBQ3hDMTRGLEtBQUtzRixLQUFLNGlGLFFBQVFxUCxpQkFBaUIzL0UsU0FBUyxDQUFFdFYsT0FBTyxJQUMzRHRDLEtBQUtzRixLQUFLNnVGLGlCQUFvQm4wRixLQUFLc0YsS0FBSzRpRixRQUFRcVAsaUJBQWlCOTBGLE1BQVEsQ0FDM0UsQ0FLRixPQUZBekMsS0FBS3NGLEtBQUttdkYsT0FBT2tELDBCQUEyQixFQUM1QzMzRixLQUFLc0YsS0FBS212RixPQUFPbUMsY0FBZSxHQUN6QixDQUNULENBRUEsMkJBQU1vRSxDQUF1QjE3RixTQUUzQixPQURBVSxLQUFLc0YsS0FBS212RixPQUFPZ0MscUJBQXNCLEdBQ2hDLENBQ1QsQ0FFQSx3QkFBTXdFLENBQW9CMzdGLFNBUXhCLE9BUEtVLEtBQUtzRixLQUFLNGlGLFVBQVNsb0YsS0FBS3NGLEtBQUs0aUYsUUFBVSxDQUFDLEdBQzdDbG9GLEtBQUtzRixLQUFLNGlGLFFBQVE0TixtQkFBcUIsSUFBSWgwRixLQUFLOUIsS0FBS2k1RixZQUFZOWhGLGNBQzNEblgsS0FBS3NGLEtBQUs0aUYsUUFBUTROLG1CQUFtQmwrRSxTQUFTLENBQUV0VixPQUFPLFVBQ3ZEcEIsU0FBU2lDLGVBQWVuRCxLQUFLc0YsS0FBSzRpRixRQUFRNE4sb0JBQ2hEOTFGLEtBQUtzRixLQUFLbXZGLE9BQU9zQixzQkFBdUIsRUFDeEMvMUYsS0FBS3NGLEtBQUs2dUYsaUJBQW1CLEVBQzdCbjBGLEtBQUtzRixLQUFLbXZGLE9BQU9tQyxjQUFlLEdBQ3pCLENBQ1QsQ0FHQSxXQUFBRyxDQUFhajlELFVBQVcsR0FDdEIsTUFBTTQvRCxLQUFPLENBQ1hyRixTQUFVLENBQUMsRUFDWC91QyxPQUFRLENBQUMsRUFDVDkyQixTQUFTLEdBRUwwc0UsTUFBUSxDQUNaNUcsUUFBU2gzRixLQUFLQyxLQUFLQyxTQUFTLGFBQzVCbTNGLE9BQVFyM0YsS0FBS0MsS0FBS0MsU0FBUyxhQUMzQisyRixhQUFjajNGLEtBQUtDLEtBQUtDLFNBQVMsa0JBQ2pDczZGLFVBQVd4NkYsS0FBS0MsS0FBS0MsU0FBUyxrQkFDOUI0NUYsY0FBZTk1RixLQUFLQyxLQUFLQyxTQUFTLG1CQUNsQ203RixpQkFBa0JyN0YsS0FBS0MsS0FBS0MsU0FBUyxtQkFDckN3NUYsVUFBVzE1RixLQUFLQyxLQUFLQyxTQUFTLGtCQUM5Qmk3RixrQkFBbUJuN0YsS0FBS0MsS0FBS0MsU0FBUyxxQkFDdEN3eUIsVUFBVzF5QixLQUFLQyxLQUFLQyxTQUFTLGNBQzlCcEgsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVMsY0FHdkJzOEIsV0FBYTk1QixLQUFLc0YsS0FBS284QixhQUN6QjFoQyxLQUFLc0YsS0FBS284QixXQUFhLENBQUMsR0FHMUIsTUFBTXk1RCxZQUFjdjhGLFFBQVFDLE1BQU15NkIsV0FDaEN0NUIsS0FBS3EwRixTQUNMcjBGLEtBQUtzRixLQUFLK3VGLFVBSVosSUFBSyxNQUFPeDRGLE9BQVErRCxPQUFPMkssUUFBUTR3RixhQXVCUCxLQUFyQkEsWUFBWXQvRixNQUFzQyxPQUF2Qm1FLEtBQUtxMEYsU0FBU3g0RixPQUN4Q0MsTUFBTUksT0FBT2kvRixZQUFZdC9GLFFBQ3pCSyxPQUFPaS9GLFlBQVl0L0YsUUFBVW1FLEtBQUtxMEYsU0FBU3g0RixPQUcvQzY5RixLQUFLbHJFLFNBQVUsRUFFZmtyRSxLQUFLckYsU0FBU3g0RixLQUFPLENBQ25CcXBGLElBQUtsbEYsS0FBS3EwRixTQUFTeDRGLEtBQ25CODlGLElBQUt3QixZQUFZdC9GLEtBQ2pCekYsS0FBTThrRyxNQUFNci9GLEtBQ1pBLEtBRUVpK0IsV0FBVTk1QixLQUFLc0YsS0FBS284QixXQUFXN2xDLE1BQU8sSUFLOUMsT0FBTzY5RixJQUNULEVDdDhCSyxNQUFNMEIsa0JBQWtCajJGLFNBQzdCLFdBQUFFLENBQWFDLEtBQU1DLGNBQ08sSUFBYkQsS0FBS0ksTUFDZEosS0FBS0ksSUFBTSwrQ0FFYnJKLE1BQU1pSixLQUFNQyxTQUNadkYsS0FBS3VGLFFBQVVBLE9BQ2pCLENBR0EsZ0JBQUk4MUYsR0FDRixNQUFNQyxNQUFRLEdBQ1JDLE1BQVF2N0YsS0FBS2pFLE9BQU9zL0YsYUFDdkJobEcsUUFBT3VYLElBQU1BLEVBQUVra0YsU0FDZjl0RixLQUFJNEosR0FDSSxJQUFJdWlGLGFBQWF2aUYsS0FFdEI0dEYsUUFBVXg3RixLQUFLakUsT0FBT3MvRixhQUN6QmhsRyxRQUFPdVgsR0FBS0EsRUFBRWtrRixTQUNkOXRGLEtBQUk0SixHQUNJLElBQUl1aUYsYUFBYXZpRixLQXNCNUIsT0FwQkE1TixLQUFLakUsT0FBT3MvRixhQUFhdmpGLFNBQVFsSyxJQUUvQkEsRUFBRTRqRixPQUFTLEdBQ1A1akYsRUFBRWtrRixPQUNKbGtGLEVBQUU0akYsT0FBU2dLLFFBQ1JubEcsUUFBTys1QixHQUFLQSxFQUFFenlCLE9BQVNpUSxFQUFFalEsT0FBU3l5QixFQUFFNGdFLGtCQUNwQ2h0RixLQUFJb3NCLElBQ0ksQ0FBRXp5QixLQUFNeXlCLEVBQUV6eUIsS0FBTXZILEtBQU1nNkIsRUFBRWg2QixTQUduQ3dYLEVBQUU0akYsT0FBUytKLE1BQ1JsbEcsUUFBTys1QixHQUFLQSxFQUFFenlCLE9BQVNpUSxFQUFFalEsT0FBU3l5QixFQUFFNGdFLGtCQUNwQ2h0RixLQUFJb3NCLElBQ0ksQ0FBRXp5QixLQUFNeXlCLEVBQUV6eUIsS0FBTXZILEtBQU1nNkIsRUFBRWg2QixTQUdyQyxNQUFNcWxHLFdBQWEsSUFBSXRMLGFBQWF2aUYsR0FFcEMwdEYsTUFBTXBrRyxLQUFLdWtHLFdBQVUsSUFFaEJILEtBQ1QsQ0FFQSxzQkFBSUksR0FDRixNQUFNTCxhQUFlcjdGLEtBQUtxN0YsYUFJMUIsT0FIQUEsYUFBYXZqRixTQUFRbEssSUFDbkJBLEVBQUU2N0UsU0FBV3pwRixLQUFLMjdGLHVCQUF1Qi90RixFQUFFalEsS0FBSSxJQUUxQzA5RixZQUNULENBRUEseUJBQUl0RCxHQUNGLE9BQU8vM0YsS0FBS2pFLE9BQU9zL0YsYUFBYTM3RixNQUFLa08sR0FBS0EsRUFBRTdNLFFBQzlDLENBRUEsZUFBSTY2RixHQUNGLE1BQU1odUYsRUFBSTVOLEtBQUsrM0Ysc0JBQ2YsR0FBS25xRixFQUNMLE9BQUlBLEVBQUU2akQsUUFDRzdwRCxjQUFjaUosZ0JBQWdCakQsRUFBRTZqRCxjQUR6QyxDQUlGLENBRUEsNkJBQUlvcUMsR0FDRixNQUFNUCxNQUFRdDdGLEtBQUs4N0YsbUJBQW1CM3ZGLE1BQ3BDLENBQUN6UCxFQUFHMGpCLElBQU0xakIsRUFBRTAxRixZQUFjaHlFLEVBQUVneUUsY0FLOUIsT0FIQWtKLE1BQU14akYsU0FBUWxLLElBQ1pBLEVBQUU2N0UsU0FBV3pwRixLQUFLMjdGLHVCQUF1Qi90RixFQUFFalEsS0FBSSxJQUUxQzI5RixLQUNULENBRUEsNEJBQUlTLEdBQ0YsTUFBTVQsTUFBUXQ3RixLQUFLODdGLG1CQUFtQjN2RixNQUNwQyxDQUFDelAsRUFBRzBqQixJQUFNQSxFQUFFNm5ELFdBQWF2ckUsRUFBRXVyRSxhQUs3QixPQUhBcXpCLE1BQU14akYsU0FBUWxLLElBQ1pBLEVBQUU2N0UsU0FBV3pwRixLQUFLMjdGLHVCQUF1Qi90RixFQUFFalEsS0FBSSxJQUUxQzI5RixLQUNULENBRUEsU0FBSUMsR0FDRixPQUFPdjdGLEtBQUtxN0YsYUFBYWhsRyxRQUFPdVgsSUFBTUEsRUFBRWlrRixVQUFZamtGLEVBQUVva0YsV0FBWSxFQUNwRSxDQUVBLFdBQUl3SixHQUNGLE9BQU94N0YsS0FBS3E3RixhQUFhaGxHLFFBQU91WCxHQUFLQSxFQUFFaWtGLFVBQVlqa0YsRUFBRW9rRixXQUFZLEVBQ25FLENBRUEsbUJBQUlnSyxHQUNGLE9BQU9oOEYsS0FBS3E3RixhQUFhWSxPQUFNejdGLEdBQUtBLEVBQUV1d0YsYUFDeEMsQ0FFQSxvQkFBSW1MLEdBQ0YsT0FBT2w4RixLQUFLcTdGLGFBQWFZLE9BQU1ydUYsR0FBS0EsRUFBRXNrRixZQUFZOThELFFBQ3BELENBRUEsc0JBQUF1bUUsQ0FBd0J6RyxpQkFDdEIsSUFBS2wxRixLQUFLakUsT0FBT29nRyxXQUFXMzZELE1BQU01Z0MsT0FDaEMsT0FFRixJQUFLWixLQUFLbW1GLFFBQVMsT0FDbkIsTUFFTXNELFNBRll6cEYsS0FBS204RixVQUVJejhGLE1BQUs4YSxJQUM5QixNQUFNNGhGLEdBQUs1aEYsRUFBRTZnRixjQUFjMzdGLE1BQUtrTyxHQUFLc25GLGtCQUFvQnRuRixFQUFFalEsT0FDM0QsUUFBU3krRixNQUVYLE9BQUkzUyxlQUFKLENBSUYsQ0FFQSxrQkFBQXlPLENBQW9CaEQsaUJBQ2xCLE1BQU1ILFlBQWMvMEYsS0FBS2pFLE9BQU9zL0YsYUFBYTM3RixNQUMzQ2tPLEdBQUtzbkYsa0JBQW9CdG5GLEVBQUVqUSxPQUU3QixHQUFJbzNGLFlBQWEsT0FBT24yRixRQUFRQyxNQUFNd08sVUFBVTBuRixZQUVsRCxDQUVBLGNBQUFzSCxDQUFnQm5ILGlCQUNkLE1BQU0rQyxnQkFBa0JqNEYsS0FBS2s0RixtQkFBbUJoRCxpQkFDaEQsR0FBSStDLGdCQUFpQixPQUFPLElBQUk5SCxhQUFhOEgsZ0JBRS9DLENBRUEseUJBQUlxRSxHQUNGLEdBQUt0OEYsS0FBS21tRixRQUNWLE9BQU9ubUYsS0FBSys3Rix5QkFBeUJyOEYsTUFDbkNrTyxHQUFLQSxFQUFFdEksS0FBSzB0Rix1QkFBeUIsR0FFekMsQ0FFQSxlQUFJdUosR0FDRixNQUFNaEIsTUFBUXY3RixLQUFLcTdGLGFBQ2hCbHZGLE1BQUssQ0FBQ3pQLEVBQUcwakIsSUFBTTFqQixFQUFFMDFGLFlBQWNoeUUsRUFBRWd5RSxlQUNoQy83RixRQUFPdVgsR0FBS0EsRUFBRW1rRixTQUNsQixHQUFJd0osTUFBTTM2RixPQUFTLEVBQUcsT0FBTzI2RixNQUFNLEVBRXJDLENBRUEsaUJBQUlpQixHQUNGLE1BQU1oQixRQUFVeDdGLEtBQUtxN0YsYUFDbEJsdkYsTUFBSyxDQUFDelAsRUFBRzBqQixJQUFNMWpCLEVBQUUwMUYsWUFBY2h5RSxFQUFFZ3lFLGVBQ2hDLzdGLFFBQU91WCxHQUFLQSxFQUFFaWtGLFdBQ2xCLEdBQUkySixRQUFRNTZGLE9BQVMsRUFBRyxPQUFPNDZGLFFBQVEvOEYsT0FBTyxHQUFHNm1CLEtBRW5ELENBRUEsc0JBQUl3MkUsR0FDRixNQUFNUyxZQUFjdjhGLEtBQUt1OEYsWUFDbkJDLGNBQWdCeDhGLEtBQUt3OEYsY0FDM0IsSUFBSWxCLE1BQVF0N0YsS0FBS3E3RixhQWlCakIsT0FoQktyN0YsS0FBS2pFLE9BQU8wZ0csbUJBQXFCRixjQUNwQ2pCLE1BQVFBLE1BQU1qbEcsUUFBT3VYLEdBRWpCQSxFQUFFbWtGLFFBQVdua0YsRUFBRWlrRixVQUFZamtGLEVBQUV3a0YsYUFBZW1LLFlBQVluSyxnQkFLekRweUYsS0FBS2pFLE9BQU8yZ0csZ0JBQWtCRixnQkFDakNsQixNQUFRQSxNQUFNamxHLFFBQU91WCxHQUVqQkEsRUFBRWlrRixVQUFhamtGLEVBQUVta0YsUUFBVW5rRixFQUFFd2tGLGFBQWVvSyxjQUFjcEssZUFLekRrSixLQUNULENBRUEsc0JBQUlxQixHQUNGLE1BQU1yQixNQUFRdDdGLEtBQUs2N0YsMEJBQ25CLEdBQUlQLE1BQU0xNkYsT0FBUyxFQUFHLE9BQU8wNkYsTUFBTSxFQUVyQyxDQUVBLHdCQUFNc0IsQ0FBb0JwN0QsTUFBTSxRQUFXLEdBQVMsQ0FBQyxHQUNuRCxNQUFNcTdELGlCQUFtQjc4RixLQUFLODhGLHFCQUFxQnQ3RCxNQUNuRCxhQUFheGhDLEtBQUs5QixPQUNoQixDQUFFLHNCQUF1QjIrRixrQkFDekIsQ0FBRTcrRixRQUVOLENBRUEsdUJBQU1vOEYsQ0FBbUIyQyxlQUFnQnhxRSxZQUFZLFFBQVcsR0FBUyxDQUFDLEdBQ3hFLE1BQU04b0UsYUFBZXo4RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPcy9GLGNBQ25EbjlGLE9BQVNVLFFBQVFDLE1BQU13TyxVQUFVa2xCLFlBQ2pDeXFFLGlCQUFtQjNCLGFBQWFoakQsV0FDcEN6cUMsR0FBS212RixpQkFBbUJudkYsRUFBRWpRLFFBRUYsSUFBdEJxL0YsbUJBQ0E5K0YsT0FBT1AsYUFBYU8sT0FBT1AsS0FDL0JpQixRQUFRQyxNQUFNNmEsWUFBWTJoRixhQUFhMkIsa0JBQW1COStGLE9BQVEsQ0FDaEUrK0YsV0FBVyxVQUVQajlGLEtBQUs0OEYsbUJBQW1CdkIsYUFBYyxDQUFFcjlGLFNBQ2hELENBRUEsb0JBQUE4K0YsQ0FBc0J0N0QsTUFDcEIsTUFBTXE3RCxpQkFBbUJyN0QsTUFBUTVpQyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPcy9GLGNBZ0JyRSxPQWZBNzVELEtBQUsxcEIsU0FBUWxLLElBQ1gsSUFBSXRJLEtBRUZBLEtBRHlCLGlCQUF2QnNJLEVBQUV2SSxZQUFZalAsS0FDVHdYLEVBQUV0SSxLQUVGc0ksRUFFVCxNQUFNeVAsTUFBUXJkLEtBQUtxNEMsVUFBVXdrRCxpQkFBa0J2M0YsS0FBSzNILE9BQ3JDLElBQVgwZixPQUNGdy9FLGlCQUFpQjNsRyxLQUFLb08sTUFDdEJ5RCxHQUFHQyxjQUFjdUssS0FBS2pXLEtBQUtDLEtBQUtDLFNBQVMsaUNBRXpDcS9GLGlCQUFpQngvRSxPQUFTL1gsSUFDNUIsSUFFS3UzRixnQkFDVCxDQUVBLHVCQUFNSyxDQUNKQyxjQUNBQyxpQkFDQSxvQkFBdUIsRUFBSSxRQUFXLEdBQVMsQ0FBQyxHQUVoRCxNQUFNQyxVQUFZcjlGLEtBQUtxOEYsZUFBZWMsZUFDaENHLFlBQWN0OUYsS0FBS3E4RixlQUFlZSxpQkFDbENQLGlCQUFtQmorRixRQUFRQyxNQUFNd08sVUFDckNyTixLQUFLakUsT0FBT3MvRixjQUVSa0MsZUFBaUJWLGlCQUFpQnhrRCxXQUN0Q3pxQyxHQUFLdXZGLGdCQUFrQnZ2RixFQUFFalEsT0FFckI2L0YsaUJBQW1CWCxpQkFBaUJ4a0QsV0FDeEN6cUMsR0FBS3d2RixrQkFBb0J4dkYsRUFBRWpRLE9BRzdCLEdBQUswL0YsV0FBY0MsWUFLbkIsR0FBSUEsWUFBWXRNLGdCQUNkam9GLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLGtDQUFtQyxDQUNsRDdkLEtBQU1rbkcsWUFBWWxuRyxZQUh4QixDQVNBLEdBQUlxbkcsbUJBQW9CLENBQ3RCLEdBQUlKLFVBQVVySyx1QkFBeUIsRUFPckMsWUFOQWpxRixHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTyxvQ0FBcUMsQ0FDcERrcEYsY0FDQU8sUUFBU0wsVUFBVXJLLDBCQUt6QnFLLFVBQVVqSyxzQkFBc0IsR0FDaEN5SixpQkFBaUJVLGdCQUFrQjMrRixRQUFRQyxNQUFNd08sVUFBVWd3RixVQUFVLzNGLEtBQ3ZFLENBRUFnNEYsWUFBWXJNLGVBQ1o0TCxpQkFBaUJXLGtCQUFvQjUrRixRQUFRQyxNQUFNd08sVUFDakRpd0YsWUFBWWg0RixZQUVSdEYsS0FBSzlCLE9BQ1QsQ0FBRSxzQkFBdUIyK0Ysa0JBQ3pCLENBQUU3K0YsUUF0QkosTUFYRStLLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUtDLFNBQVMsNEJBbUM5QyxDQUVBLHFCQUFNbWdHLENBQWlCekksZ0JBQWlCMEksWUFBWSxRQUFXLEdBQVMsQ0FBQyxHQUN2RSxNQUFNN0ksWUFBYy8wRixLQUFLcThGLGVBQWVuSCxpQkFFeEMsSUFBS0gsWUFNSCxZQUxBaHNGLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLCtCQUFnQyxDQUMvQ2loRixtQkFNTixNQUFNMkgsaUJBQW1CaitGLFFBQVFDLE1BQU13TyxVQUNyQ3JOLEtBQUtqRSxPQUFPcy9GLGNBRVIyQixpQkFBbUJILGlCQUFpQnhrRCxXQUN4Q3pxQyxHQUFLc25GLGtCQUFvQnRuRixFQUFFalEsT0FFekJvM0YsWUFBWTV3RixXQUFheTVGLFdBQVk3SSxZQUFZN0Qsa0JBQ2hENkQsWUFBWTlELGVBQ2pCNEwsaUJBQWlCRyxrQkFBb0JwK0YsUUFBUUMsTUFBTXdPLFVBQ2pEMG5GLFlBQVl6dkYsWUFFUnRGLEtBQUs5QixPQUNULENBQUUsc0JBQXVCMitGLGtCQUN6QixDQUFFNytGLFFBRU4sQ0FFQSxzQkFBTTYvRixDQUNKM0ksaUJBQ0Esb0JBQXVCLEVBQUksUUFBVyxHQUFTLENBQUMsR0FFaEQsTUFBTUgsWUFBYy8wRixLQUFLcThGLGVBQWVuSCxpQkFFeEMsSUFBS0gsWUFNSCxZQUxBaHNGLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLCtCQUFnQyxDQUMvQ2loRixtQkFNTixNQUFNMkgsaUJBQW1CaitGLFFBQVFDLE1BQU13TyxVQUNyQ3JOLEtBQUtqRSxPQUFPcy9GLGNBRVIyQixpQkFBbUJILGlCQUFpQnhrRCxXQUN4Q3pxQyxHQUFLc25GLGtCQUFvQnRuRixFQUFFalEsT0FFN0IsR0FBSW8zRixZQUFZL0QsZ0JBQ2Rqb0YsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBSzBXLE9BQU8sa0NBQW1DLENBQ2xEaWhGLHVCQUhOLENBUUEsR0FBSXVJLG1CQUFvQixDQUN0QixHQUFJMUksWUFBWS9CLHVCQUF5QixFQU92QyxZQU5BanFGLEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUswVyxPQUFPLG9DQUFxQyxDQUNwRGtwRixjQUFlakksZ0JBQ2Z3SSxRQUFTM0ksWUFBWS9CLDBCQUszQitCLFlBQVkzQixzQkFBc0IsRUFDcEMsQ0FDQTJCLFlBQVk5RCxlQUNaNEwsaUJBQWlCRyxrQkFBb0JwK0YsUUFBUUMsTUFBTXdPLFVBQ2pEMG5GLFlBQVl6dkYsWUFFUnRGLEtBQUs5QixPQUNULENBQUUsc0JBQXVCMitGLGtCQUN6QixDQUFFNytGLFFBbkJKLENBcUJGLENBRUEsb0NBQU04L0YsQ0FDSjVJLGdCQUNBcDBGLE9BQ0EsUUFBVyxHQUFTLENBQUMsR0FFckIsTUFBTWkwRixZQUFjLzBGLEtBQUtxOEYsZUFBZW5ILGlCQUV4QyxJQUFLSCxZQU1ILFlBTEFoc0YsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBSzBXLE9BQU8sK0JBQWdDLENBQy9DaWhGLG1CQU1OLE1BQU0ySCxpQkFBbUJqK0YsUUFBUUMsTUFBTXdPLFVBQ3JDck4sS0FBS2pFLE9BQU9zL0YsY0FFUjJCLGlCQUFtQkgsaUJBQWlCeGtELFdBQ3hDenFDLEdBQUtzbkYsa0JBQW9CdG5GLEVBQUVqUSxPQUc3Qm8zRixZQUFZM0IscUJBQXFCdHlGLE9BRWpDKzdGLGlCQUFpQkcsa0JBQW9CcCtGLFFBQVFDLE1BQU13TyxVQUNqRDBuRixZQUFZenZGLFlBRVJ0RixLQUFLOUIsT0FDVCxDQUFFLHNCQUF1QjIrRixrQkFDekIsQ0FBRTcrRixRQUVOLENBRUEsaUNBQU1xOEYsRUFBNkIsa0JBQ2QsRUFBSSxrQkFDSixFQUFJLFFBQ2QsRUFBSSxLQUNOLE1BQ0wsQ0FBQyxHQUNILE1BQU0wRCxrQkFBb0IvOUYsS0FBS3M4RixzQkFDekJoOUYsUUFBVSxDQUNkMjZGLGlCQUNBQyxpQkFDQWw4RixPQUNBaWMsTUFFRixPQUFLOGpGLGtCQUNFLzlGLEtBQUtnK0Ysb0JBQW9CRCxrQkFBa0JwZ0csS0FBTTJCLFNBRHpCVSxLQUFLZytGLHlCQUFvQm5nRyxFQUFXeUIsUUFFckUsQ0FFQSx5QkFBTTArRixDQUNKOUksaUJBQ0Esa0JBQ3FCLEVBQUksa0JBQ0osRUFBSSxRQUNkLEVBQUksS0FDTixNQUNMLENBQUMsR0FFTCxNQUFNK0ksV0FBYWorRixLQUFLaytGLGlDQUFpQ2hKLGdCQUFpQixDQUN4RStFLGlCQUNBa0UsZUFBZ0JqRSxpQkFDaEJqZ0YsYUFFSWphLEtBQUs5QixPQUFPKy9GLFdBQVksQ0FBRWpnRyxRQUNsQyxDQUVBLGdDQUFBa2dHLENBQ0VoSixpQkFDQSxrQkFBcUIsRUFBSSxrQkFBcUIsRUFBSSxLQUFTLE1BQVMsQ0FBQyxHQUVyRSxNQUFNa0osTUFBUWxKLGdCQUdSbUosdUJBQXlCLENBQUMsRUFDMUJoRCxhQUFlcjdGLEtBQUtqRSxPQUFPcy9GLGFBQzdCejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9zL0YsY0FDcEMsR0FDSkEsYUFBYXZqRixTQUFRbEssV0FDWkEsRUFBRTdNLE9BQ0xxOUYsT0FBU0EsUUFBVXh3RixFQUFFalEsT0FBTWlRLEVBQUU3TSxRQUFTLE1BRTVDczlGLHVCQUF1Qix1QkFBeUJoRCxhQUVoRCxNQUFNaUQsb0JBQXNCdCtGLEtBQUsyN0YsdUJBQXVCeUMsT0FDeEQsSUFBSUcsb0JBQXNCLEtBc0IxQixPQXJCSUQsb0JBQ0VwRSxpQkFDRnFFLG9CQUFzQnYrRixLQUFLdytGLDhCQUN6QkYsb0JBQW9CM2dHLEtBQ3BCLENBQUVzOEYsaUJBQWtCaGdGLE9BRWJnZ0YsbUJBQ1RzRSxvQkFBc0IsQ0FBQyxFQUN2QkEsb0JBQW9CLGlDQUNsQnYrRixLQUFLeStGLGdDQUNQRixvQkFBb0IsK0JBQ2xCditGLEtBQUswK0Ysb0NBQW9DSixvQkFBb0IzZ0csS0FBTSxDQUNqRXNjLFFBSU5za0Ysb0JBQXNCditGLEtBQUt3K0YsbUNBQThCM2dHLEVBQVcsQ0FDbEVvOEYsbUJBSUFzRSxvQkFDSzMvRixRQUFRQyxNQUFNNmEsWUFDbkIya0YsdUJBQ0FFLHFCQUVVRixzQkFDaEIsQ0FFQSw4QkFBQU0sQ0FDRXZHLGNBQ0EsaUJBQW9CLEdBQVMsQ0FBQyxHQUVqQixJQUFJbkUsa0JBQWtCLENBQ2pDb0UsVUFBV3I0RixLQUFLckMsS0FDaEJ5NkYsYUFDQXdHLGdCQUNBOUUsUUFBUzFCLGVBQWlCcDRGLEtBQUttK0YsZUFBZXhnRyxPQUUzQ3c0QixXQUtQLENBSUEseUJBQU0wb0UsRUFBcUIsUUFBVyxHQUFTLENBQUMsR0FDOUMsTUFBTXhELGFBQWVyN0YsS0FBS2pFLE9BQU9zL0YsYUFDN0J6OEYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT3MvRixjQUNwQyxHQUNKQSxhQUFhdmpGLFNBQVFsSyxJQUNmQSxFQUFFb2xGLHVCQUF5QnBsRixFQUFFbWxGLGlCQUMvQm5sRixFQUFFb2xGLHdCQUEwQnBsRixFQUFFbWxGLGVBQzFCbmxGLEVBQUVvbEYsdUJBQXlCcGxGLEVBQUVtbEYsaUJBQy9CbmxGLEVBQUVvbEYsdUJBQXlCcGxGLEVBQUVtbEYsZ0JBRWpDLFVBRUkveUYsS0FBSzQ4RixtQkFBbUJ2QixhQUFjLENBQUVyOUYsUUFBUSxJQUN0RGdDLEtBQUtxNkYsNEJBQTRCLENBQUVyOEYsUUFDckMsQ0FHQSxnQkFBTXlKLENBQVkwekIsWUFDaEIsR0FBSTc5QixLQUFLc0csS0FBSzJFLEtBQU0sQ0FDbEIsTUFBTXBILEtBQU80UyxVQUFVbTRDLGVBQWUvd0IsWUFDaENrZ0UsYUFBZXI3RixLQUFLakUsT0FBT3MvRixhQUM3Qno4RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPcy9GLGNBQ3BDLEdBQ0VoK0UsTUFBUWcrRSxhQUFhaGpELFdBQVV6cUMsR0FBS0EsRUFBRWt4RixXQUFhMzlGLEtBQUt4RCxPQUMxRDBmLE9BQVMsSUFDWGcrRSxhQUFhaCtFLE9BQU82MEUsV0FBV0MsZUFBaUJoeEYsS0FBS2lwRCxxQkFDL0NwcUQsS0FBSzlCLE9BQU8sQ0FBRSxzQkFBdUJtOUYsZUFFL0MsS0FBTyxDQUNMLE1BQU0vMUYsS0FBTyxDQUNYQSxLQUFNNjFCLFdBQ045OEIsS0FBTSxTQUNOMGdHLE9BQVEsYUFDUjk0RixLQUFNakcsS0FBS3JDLE1BRWJMLEtBQUt1Z0IsT0FBT0MsS0FBSyxjQUFleFksS0FDbEMsQ0FDRixDQUdBLGFBQUk2MkYsR0FDRixNQUFNQSxVQUFZbjhGLEtBQUttbUYsUUFDbkJubUYsS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxLQUNwQjVpQyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsTUFDOUMsR0FDRnhoQyxLQUFLZy9GLFVBRVQsT0FEQWgvRixLQUFLaS9GLGlCQUFpQjlDLFdBQ2ZBLFNBQ1QsQ0FFQSxlQUFBaEUsQ0FBaUJDLGNBQWMsZUFBa0IsR0FBUyxDQUFDLEdBSXpELE9BSGtCOEcsY0FDZHRnRyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUttOEYsV0FDN0JuOEYsS0FBS204RixXQUNRejhGLE1BQUs4YSxHQUFLNDlFLGVBQWlCNTlFLEVBQUU3YyxNQUNoRCxDQUVBLGdCQUFBc2hHLENBQWtCOUMsV0FDaEIsR0FBS0EsV0FBV3Y3RixPQUFoQixDQUNBdTdGLFVBQVUsR0FBRzk2RSxPQUFRLEVBRXJCLElBQUssSUFBSWhFLE1BQVEsRUFBR0EsTUFBUTgrRSxVQUFVdjdGLE9BQVF5YyxRQUFTLENBQ3JELE1BQU0xRCxRQUFVLEdBQ1Y4dkUsU0FBVzBTLFVBQVU5K0UsT0FDdEJvc0UsU0FBU3J6RixNQUFNdWpCLFFBQVF6aUIsS0FBSyxTQUM3QnV5RixTQUFTMW9GLFFBQVE0WSxRQUFRemlCLEtBQUssVUFDOUJ1eUYsU0FBU3A4RCxPQUFTcnRCLEtBQUttbUYsU0FBU3hzRSxRQUFRemlCLEtBQUssUUFDakR1eUYsU0FBU2p4RCxXQUFhN2UsUUFBUXRWLEtBQUssSUFDckMsQ0FFSTgzRixVQUFVdjdGLE9BQVMsSUFBR3U3RixVQUFVQSxVQUFVdjdGLE9BQVMsR0FBR3UrRixNQUFPLEdBRWpFaEQsVUFBVXJrRixTQUFRMEMsSUFDaEIsR0FBSUEsRUFBRTZnRixjQUFnQjdnRixFQUFFNmdGLGFBQWF6NkYsT0FBUSxDQUMzQzRaLEVBQUU2Z0YsYUFBZTdnRixFQUFFNmdGLGFBQWFobEcsUUFBT3VYLEtBQWEsT0FBTkEsS0FDOUMsSUFBSyxJQUFJNFMsRUFBSSxFQUFHQSxFQUFJaEcsRUFBRTZnRixhQUFhejZGLE9BQVE0ZixJQUFLLENBQzlDLE1BQU13dUIsS0FBT3gwQixFQUFFNmdGLGFBQWE3NkUsR0FHNUIsSUFBSTVTLEVBQ2dCLGlCQUFUb2hDLE1BQXFCQSxnQkFBZ0I1eUMsT0FDOUN3UixFQUFJNU4sS0FBS2pFLE9BQU9zL0YsYUFBYTM3RixNQUFLa08sR0FBS29oQyxPQUFTcGhDLEVBQUVqUSxPQUNiLGlCQUE1QnF4QyxNQUFNM3BDLGFBQWFqUCxNQUM1QndYLE9BQUkvUCxFQUNKa0wsR0FBR0MsY0FBY3VLLEtBQ2ZqVyxLQUFLQyxLQUFLQyxTQUFTLHNDQUVoQm9RLE9BQUkvUCxPQUVNLElBQU4rUCxFQUNUNE0sRUFBRTZnRixhQUFhNzZFLEdBQUssSUFBSTJ2RSxhQUFhdmlGLEdBR3JDekMsUUFBUXVTLE1BQ04sMkRBR04sQ0FDQWxELEVBQUU2Z0YsYUFBYWx2RixLQUFLNm5GLGlCQUN0QixJQXpDc0IsQ0EyQzFCLENBRUEsYUFBSWdMLEdBQ0YsSUFDR2gvRixLQUFLakUsT0FBT29nRyxVQUFVMzZELE1BQ2UsSUFBdEN4aEMsS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxLQUFLNWdDLE9BRTNCLE9BR0YsTUFBTXU3RixVQUFZLEdBRVo5dUUsS0FBT3J0QixLQUFLby9GLGFBQ2xCLElBQUlDLG9CQUFxQkMsZUFBZ0JDLGdCQWlCekMsR0FoQnNCRixvQkFBbEJoeUUsS0FBS3pzQixRQUFVLEdBQ1ZaLEtBQUtqRSxPQUFPeWpHLGVBQWlCbnlFLEtBQUt6c0IsT0FEQyxFQUdmeXNCLEtBQUt6c0IsT0FBU1osS0FBS2pFLE9BQU95akcsY0FFbkJGLGVBQWhDdC9GLEtBQUtqRSxPQUFPeWpHLGVBQWlCLEdBQ3hCeC9GLEtBQUtqRSxPQUFPeWpHLGVBQWlCbnlFLEtBQUt6c0IsT0FEVSxFQUUvQlosS0FBS2pFLE9BQU95akcsY0FBZ0JueUUsS0FBS3pzQixPQUdyRDIrRixnQkFEMEIsSUFBeEJGLG9CQUNnQnIvRixLQUFLakUsT0FBT29nRyxVQUFVMzZELEtBQUs1Z0MsT0FHM0NaLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsS0FBSzVnQyxPQUFTeStGLG9CQUdwQixJQUFoQmh5RSxLQUFLenNCLFFBQ0haLEtBQUtqRSxPQUFPeWpHLGNBQWdCLEVBQzlCLElBQ0UsSUFBSW5pRixNQUFRLEVBQ1pBLE1BQVFqYixLQUFLQyxJQUFJckMsS0FBS2pFLE9BQU95akcsZUFDN0JuaUYsUUFFQWdRLEtBQUtuMkIsS0FBSyxDQUNSeUcsS0FBTXFDLEtBQUt5L0Ysa0JBQ1hweUUsTUFBTSxFQUNOZ3VFLGFBQWMsS0FNdEIsTUFBTXFFLGVBQWlCOWdHLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9vZ0csV0FDM0QsSUFBSyxJQUFJOStFLE1BQVEsRUFBR0EsTUFBUWtpRixnQkFBaUJsaUYsUUFBUyxDQUNwRCxJQUFJb3NFLFNBQVcsQ0FBQyxFQUNoQixNQUFNNFIsYUFBZSxHQUVuQmgrRSxPQUFTZ2lGLHFCQUNUaGlGLE1BQVFnaUYsb0JBQXNCSyxlQUFlbCtELEtBQUs1Z0MsU0FFbEQ2b0YsU0FBVzdxRixRQUFRQyxNQUFNd08sVUFDdkJxeUYsZUFBZWwrRCxLQUFLbmtCLE1BQVFnaUYsc0JBRTlCNVYsU0FBU3A4RCxNQUFPLEVBQ2hCbzhELFNBQVM0UixjQUFjdmpGLFNBQVFsSyxJQUNwQixNQUFMQSxHQUFXeXRGLGFBQWFua0csS0FBSzBXLEVBQUMsS0FHbEN5UCxPQUFTaWlGLGdCQUFrQmppRixNQUFRaWlGLGVBQWlCanlFLEtBQUt6c0IsU0FDM0RoQyxRQUFRQyxNQUFNNmEsWUFBWSt2RSxTQUFVcDhELEtBQUtoUSxNQUFRaWlGLGdCQUFpQixDQUNoRXJDLFdBQVcsSUFHYjV2RSxLQUFLaFEsTUFBUWlpRixnQkFBZ0JqRSxjQUFjdmpGLFNBQVFsSyxJQUN4QyxNQUFMQSxHQUFXeXRGLGFBQWFua0csS0FBSzBXLEVBQUMsSUFHcEM2N0UsU0FBUzRSLGFBQWVBLGNBRTFCNVIsU0FBU3BvRSxPQUFRLEVBQ2pCb29FLFNBQVNrVyxLQUFNLEVBQ2Z4RCxVQUFVamxHLEtBQUt1eUYsU0FDakIsQ0FFQSxPQUFPMFMsU0FDVCxDQUVBLGdCQUFJaUQsR0FFRixNQUFNN0QsTUFBUXY3RixLQUFLakUsT0FBTzJnRyxlQUN0QjE4RixLQUFLdTdGLE1BQ0x2N0YsS0FBS3U3RixPQUFPbGxHLFFBQU91WCxJQUFNQSxFQUFFdEksS0FBSytuRCxVQUU5Qm11QyxRQUFVeDdGLEtBQUtqRSxPQUFPMGdHLGtCQUN4Qno4RixLQUFLdzdGLFFBQ0x4N0YsS0FBS3c3RixTQUFTbmxHLFFBQU8rNUIsSUFBTUEsRUFBRTlxQixLQUFLbXRGLFdBZWhDbU4sV0FBYSxHQUViQyxjQUFnQjcvRixLQUFLOC9GLFdBQVd0RSxTQUNoQ3VFLGNBQWdCLy9GLEtBQUtnZ0csV0FBV3hFLFNBQ2hDeUUsWUFBY2pnRyxLQUFLOC9GLFdBQVd2RSxPQUM5QjJFLFlBQWNsZ0csS0FBS2dnRyxXQUFXekUsT0FFcEMsSUFBdUIsSUFBbkJzRSxnQkFBMkMsSUFBbkJFLGNBQXNCLENBRWhELElBQUssSUFBSXp6RCxJQUFNdXpELGNBQWV2ekQsS0FBT3l6RCxjQUFlenpELE1BQU8sQ0FFekQsTUFBTW05QyxTQUFXLENBQ2Y5ckYsS0FBTXFDLEtBQUt5L0Ysa0JBQ1hweUUsTUFBTSxFQUNOZ3VFLGFBQWMsSUFFaUJHLFFBQzlCbmxHLFFBQU91WCxHQUFLMCtCLE1BQVExK0IsRUFBRXdrRixjQUN0QmptRixNQUFLLENBQUN6UCxFQUFHMGpCLElBQU0xakIsRUFBRWpHLElBQU0ycEIsRUFBRTNwQixNQUNIcWhCLFNBQVFsSyxHQUMvQjY3RSxTQUFTNFIsYUFBYW5rRyxLQUFLMFcsRUFBRWpRLFFBRS9CaWlHLFdBQVcxb0csS0FBS3V5RixTQUNsQixDQUdBLElBQUssSUFBSXBzRSxNQUFRLEVBQUdBLE1BQVFyZCxLQUFLakUsT0FBT29rRyxjQUFlOWlGLFFBQ3JEdWlGLFdBQVcxb0csS0FBSyxDQUNkeUcsS0FBTXFDLEtBQUt5L0Ysa0JBQ1hweUUsTUFBTSxFQUNOZ3VFLGFBQWMsSUFHcEIsQ0FFQSxJQUFxQixJQUFqQjRFLGNBQXVDLElBQWpCQyxZQUV4QixJQUFLLElBQUk1ekQsSUFBTTJ6RCxZQUFhM3pELEtBQU80ekQsWUFBYTV6RCxNQUFPLENBRXJELE1BQU1tOUMsU0FBVyxDQUNmOXJGLEtBQU1xQyxLQUFLeS9GLGtCQUNYcHlFLE1BQU0sRUFDTmd1RSxhQUFjLElBRWlCRSxNQUM5QmxsRyxRQUFPdVgsR0FBSzArQixNQUFRMStCLEVBQUV3a0YsY0FDdEJqbUYsTUFBSyxDQUFDelAsRUFBRzBqQixJQUFNMWpCLEVBQUVqRyxJQUFNMnBCLEVBQUUzcEIsTUFDSHFoQixTQUFRbEssR0FDL0I2N0UsU0FBUzRSLGFBQWFua0csS0FBSzBXLEVBQUVqUSxRQUUvQmlpRyxXQUFXMW9HLEtBQUt1eUYsU0FDbEIsQ0FHRixPQUFPbVcsVUFDVCxDQUVBLHlCQUFNUSxDQUFxQjUrRCxNQUFNLFFBQVcsR0FBUyxDQUFDLEdBRXBELE1BQU02K0QsWUFBY3JnRyxLQUFLc2dHLG1CQUFtQjkrRCxZQUN0Q3hoQyxLQUFLOUIsT0FDVCxDQUFFLHdCQUF5Qm1pRyxhQUMzQixDQUFFcmlHLFFBRU4sQ0FFQSxvQkFBTW04RixDQUFnQi9CLGFBQWM3bEUsWUFBWSxRQUFXLEdBQVMsQ0FBQyxHQUNuRSxNQUFNNHBFLFVBQVl2OUYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT29nRyxVQUFVMzZELE1BQzFEdGpDLE9BQVNVLFFBQVFDLE1BQU13TyxVQUFVa2xCLFlBQ2pDZ3VFLGNBQWdCcEUsVUFBVTlqRCxXQUFVNzlCLEdBQUs0OUUsZUFBaUI1OUUsRUFBRTdjLFFBQzNDLElBQW5CNGlHLGdCQUNBcmlHLE9BQU9QLGFBQWFPLE9BQU9QLEtBQy9CaUIsUUFBUUMsTUFBTTZhLFlBQVl5aUYsVUFBVW9FLGVBQWdCcmlHLE9BQVEsQ0FDMUQrK0YsV0FBVyxVQUVQajlGLEtBQUtvZ0csb0JBQW9CakUsVUFBVyxDQUFFbitGLFNBQzlDLENBRUEsa0JBQUFzaUcsQ0FBb0I5K0QsTUFDbEIsTUFBTTYrRCxZQUFjemhHLFFBQVFDLE1BQU13TyxVQUFVbTBCLE1BQ3RDZy9ELG9CQUFzQnhnRyxLQUFLakUsT0FBT3MvRixhQUFhcjNGLEtBQUk0SixHQUFLQSxFQUFFalEsT0F3QmhFLE9BdEJBMGlHLFlBQVl2b0YsU0FBUTBDLElBTWxCLFVBSk9BLEVBQUVnZSxrQkFDRmhlLEVBQUU2RyxhQUNGN0csRUFBRTJrRixZQUNGM2tGLEVBQUVtbEYsSUFDTG5sRixFQUFFNmdGLGNBQWdCN2dGLEVBQUU2Z0YsYUFBYXo2RixPQUFRLENBQzNDLElBQUssSUFBSTRmLEVBQUksRUFBR0EsRUFBSWhHLEVBQUU2Z0YsYUFBYXo2RixPQUFRNGYsSUFDekNoRyxFQUFFNmdGLGFBQWU3Z0YsRUFBRTZnRixhQUFhaGxHLFFBQU91WCxLQUFhLE9BQU5BLEtBRTFDNE0sRUFBRTZnRixhQUFhNzZFLEdBQUdsYixNQUFNM0gsT0FDMUI2YyxFQUFFNmdGLGFBQWE3NkUsR0FBS2hHLEVBQUU2Z0YsYUFBYTc2RSxHQUFHbGIsS0FBSzNILE1BSy9DNmMsRUFBRTZnRixhQUFlN2dGLEVBQUU2Z0YsYUFBYWhsRyxRQUFPc0gsTUFDckM2aUcsb0JBQW9CeDlGLFNBQVNyRixPQUVqQyxLQUdLMGlHLFdBQ1QsQ0FFQSxvQkFBTUksQ0FDSkMsY0FDQSxNQUFVLEVBQUMsUUFBWSxDQUFDLEVBQUMsUUFBVyxHQUFTLENBQUMsR0FFOUMsTUFBTXZFLFVBQVl2OUYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT29nRyxVQUFVMzZELE1BQ2hFMjZELFVBQVVya0YsU0FBUTBDLFdBQ1RBLEVBQUV6WixVQUVYLE1BQU13L0YsY0FBZ0JwRSxVQUFVOWpELFdBQVU3OUIsR0FBS2ttRixlQUFpQmxtRixFQUFFN2MsT0FDbEUsSUFBdUIsSUFBbkI0aUcsY0FDRixPQUFPLEVBRVQsTUFBTUksaUJBQW1CSixjQUFnQm4zQyxNQUN6QyxHQUFJdTNDLGlCQUFtQnhFLFVBQVV2N0YsT0FBUSxPQUFPLEVBQ2hELE1BQU1nZ0csWUFBY2hpRyxRQUFRQyxNQUFNd08sVUFBVXd6RixTQUs1QyxPQUpBRCxZQUFZampHLEtBQU9xQyxLQUFLeS9GLGtCQUN4Qm1CLFlBQVl2ekUsS0FBTzh1RSxVQUFVb0UsZUFBZWx6RSxLQUM1Q3V6RSxZQUFZNy9GLFFBQVMsRUFDckJvN0YsVUFBVXpsRSxPQUFPaXFFLGlCQUFrQixFQUFHQyxtQkFDekI1Z0csS0FBS29nRyxvQkFBb0JqRSxVQUFXLENBQUVuK0YsUUFDckQsQ0FFQSxvQkFBTThpRyxDQUFnQm5qRyxNQUFNLFFBQVcsR0FBUyxDQUFDLEdBQy9DLE1BQU13K0YsVUFBWXY5RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsTUFDMUQrK0QsY0FBZ0JwRSxVQUFVOWpELFdBQVU3OUIsR0FBSzdjLE9BQVM2YyxFQUFFN2MsT0FLMUQsR0FKQXcrRixVQUFVemxFLE9BQU82cEUsY0FBZSxHQUNoQ3BFLFVBQVVya0YsU0FBUTBDLFdBQ1RBLEVBQUV6WixVQUVQbzdGLFVBQVV2N0YsT0FBUyxFQUFHLENBQ3hCLElBQUl5YyxNQUFRa2pGLGNBQWdCLEVBQ3hCbGpGLE1BQVEsSUFBR0EsTUFBUSxHQUN2QjgrRSxVQUFVOStFLE9BQU90YyxRQUFTLENBQzVCLENBQ0EsYUFBYWYsS0FBS29nRyxvQkFBb0JqRSxVQUFXLENBQUVuK0YsUUFDckQsQ0FFQSxzQkFBTWs4RixDQUNKOUIsY0FDQSxrQkFBcUIsRUFBSSxRQUFXLEdBQVMsQ0FBQyxHQUU5QyxNQUFNN2xFLFdBQWF2eUIsS0FBS3crRiw4QkFBOEJwRyxhQUFjLENBQ2xFNkIseUJBRUlqNkYsS0FBSzlCLE9BQU9xMEIsV0FBWSxDQUFFdjBCLFFBQ2xDLENBRUEsZ0NBQUEraUcsRUFBa0Msa0JBQ2IsRUFBSSxLQUNoQixNQUNMLENBQUMsR0FDSCxNQUFNeHVFLFdBQWEsQ0FBQyxFQUNkNHBFLFVBQVluOEYsS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxLQUNwQzVpQyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsTUFDOUMsR0FVSixPQVRBMjZELFVBQVVya0YsU0FBUTBDLFdBQ1RBLEVBQUV6WixVQUVYd3hCLFdBQVcseUJBQTJCdnlCLEtBQUtzZ0csbUJBQW1CbkUsV0FFMURsQyxtQkFDRjFuRSxXQUFXLGlDQUFtQyxFQUM5Q0EsV0FBVyxnQ0FBa0MsR0FFeENBLFVBQ1QsQ0FFQSw2QkFBQWlzRSxDQUNFcEcsY0FDQSxrQkFBcUIsRUFBSSxLQUFTLE1BQVMsQ0FBQyxHQUU1QyxJQUFLQSxhQUNILE9BQU9wNEYsS0FBSytnRyxpQ0FBaUMsQ0FDM0M5RyxtQkFHSixNQUFNMW5FLFdBQWEsQ0FBQyxFQUNkNHBFLFVBQVluOEYsS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxLQUNwQzVpQyxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsTUFDOUMsR0FpQkosT0FoQkEyNkQsVUFBVXJrRixTQUFRMEMsV0FDVEEsRUFBRXpaLE9BQ0xxM0YsZUFBaUI1OUUsRUFBRTdjLE9BQU02YyxFQUFFelosUUFBUyxNQUUxQ3d4QixXQUFXLHlCQUEyQnZ5QixLQUFLc2dHLG1CQUFtQm5FLFdBRTFEbEMsbUJBQ0YxbkUsV0FBVyxpQ0FDVHZ5QixLQUFLeStGLGdDQUNQbHNFLFdBQVcsK0JBQ1R2eUIsS0FBSzArRixvQ0FBb0N0RyxhQUFjLENBQUVuK0UsUUFNdERzWSxVQUNULENBR0Esa0JBQUk0ckUsR0FDRixJQUFLbitGLEtBQUttOEYsVUFBVyxPQUNyQixNQUFNMVMsU0FBV3pwRixLQUFLbThGLFVBQVV6OEYsTUFBSzhhLEdBQUtBLEVBQUV6WixTQUM1QyxJQUFLMG9GLFNBQVUsT0FDWEEsU0FBUzRSLGNBQWN6NkYsU0FBUTZvRixTQUFTdVgsZ0JBQWlCLEdBQzdELE1BQU0vbUcsTUFBUStGLEtBQUs0N0YsWUFDbkIsR0FBSTNoRyxNQUFPLENBQ1QsTUFBTXl6RCxLQUFPenpELE1BQU15RixLQUFLK3BGLFNBQVN1TyxpQkFBaUJob0UsV0FDOUMwOUIsT0FDRis3QixTQUFTd1gscUJBQXNCLEVBQy9CeFgsU0FBU3lYLGdCQUFrQnh6QyxLQUUvQixDQUNBLE9BQU8rN0IsUUFDVCxDQUVBLG9CQUFJMFgsR0FDRixJQUFLbmhHLEtBQUttOEYsVUFBVyxPQUNyQixNQUFNaUYsWUFBY3BoRyxLQUFLbThGLFVBQVU5akQsV0FBVTc5QixHQUFLQSxFQUFFelosU0FDcEQsSUFBcUIsSUFBakJxZ0csWUFBb0IsT0FDeEIsR0FBb0IsSUFBaEJBLFlBQW1CLE9BQ3ZCLE1BQU0zWCxTQUFXenBGLEtBQUttOEYsVUFBVWlGLFlBQWMsR0FDeENubkcsTUFBUStGLEtBQUs0N0YsWUFDbkIsR0FBSTNoRyxNQUFPLENBQ1QsTUFBTXl6RCxLQUFPenpELE1BQU15RixLQUFLK3BGLFNBQVN1TyxpQkFBaUJob0UsV0FDOUMwOUIsT0FDRis3QixTQUFTd1gscUJBQXNCLEVBQy9CeFgsU0FBU3lYLGdCQUFrQnh6QyxLQUUvQixDQUNBLE9BQU8rN0IsUUFDVCxDQUVBLGdCQUFJNFgsR0FDRixJQUFLcmhHLEtBQUttOEYsVUFBVyxPQUNyQixNQUFNaUYsWUFBY3BoRyxLQUFLbThGLFVBQVU5akQsV0FBVTc5QixHQUFLQSxFQUFFelosU0FDcEQsSUFBcUIsSUFBakJxZ0csWUFBb0IsT0FDeEIsR0FBSUEsY0FBZ0JwaEcsS0FBS204RixVQUFVdjdGLE9BQVMsRUFBRyxPQUMvQyxNQUFNNm9GLFNBQVd6cEYsS0FBS204RixVQUFVaUYsWUFBYyxHQUN4Q25uRyxNQUFRK0YsS0FBSzQ3RixZQUNuQixHQUFJM2hHLE1BQU8sQ0FDVCxNQUFNeXpELEtBQU96ekQsTUFBTXlGLEtBQUsrcEYsU0FBU3VPLGlCQUFpQmhvRSxXQUM5QzA5QixPQUNGKzdCLFNBQVN3WCxxQkFBc0IsRUFDL0J4WCxTQUFTeVgsZ0JBQWtCeHpDLEtBRS9CLENBQ0EsT0FBTys3QixRQUNULENBRUEsb0JBQU02WCxDQUFnQmg4RixZQUNkdEYsS0FBS3VoRyx1QkFDVGo4RixLQUFLOHlGLGFBQ0w5eUYsS0FBS3VHLEVBQ0x2RyxLQUFLdW5ELEVBQ0x2bkQsS0FBS3VILE1BRVQsQ0FFQSw0QkFBTTAwRixDQUNKbkosYUFDQXZzRixFQUNBZ2hELEVBQ0FwZ0QsU0FDQSxRQUFXLEdBQVMsQ0FBQyxHQUVyQixNQUFNMHZGLFVBQVl2OUYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT29nRyxVQUFVMzZELE1BQzFEKytELGNBQWdCcEUsVUFBVTlqRCxXQUFVNzlCLEdBQUs0OUUsZUFBaUI1OUUsRUFBRTdjLE9BR2xFLE9BRkF3K0YsVUFBVW9FLGVBQWVpQixZQUFjLENBQUUzMUYsRUFBR2doRCxFQUFHaGdELE1BQU9KLGVBRXpDek0sS0FBS29nRyxvQkFBb0JqRSxVQUFXLENBQUVuK0YsUUFDckQsQ0FFQSxvQ0FBTXlqRyxFQUFnQyxRQUFXLEdBQVMsQ0FBQyxHQUN6RCxHQUFJemhHLEtBQUttK0YsZUFDUCxhQUFhbitGLEtBQUswaEcseUJBQXlCMWhHLEtBQUttK0YsZUFBZXhnRyxLQUFNLENBQ25FSyxRQUdOLENBRUEsOEJBQU0wakcsQ0FBMEJ0SixjQUFjLFFBQVcsR0FBUyxDQUFDLEdBQ2pFLE1BQU0rRCxVQUFZdjlGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxNQUMxRCsrRCxjQUFnQnBFLFVBQVU5akQsV0FBVTc5QixHQUFLNDlFLGVBQWlCNTlFLEVBQUU3YyxPQUdsRSxjQUZPdytGLFVBQVVvRSxlQUFlaUIsa0JBRW5CeGhHLEtBQUtvZ0csb0JBQW9CakUsVUFBVyxDQUFFbitGLFFBQ3JELENBU0EsbUJBQU0yakcsR0FDSixHQUFLM2hHLEtBQUtrOEYsa0JBSVYsR0FBSWw4RixLQUFLODdGLG9CQUFvQmw3RixPQUFTLEVBQ3BDbUksR0FBR0MsY0FBY3VLLEtBQUtqVyxLQUFLQyxLQUFLQyxTQUFTLG1DQUczQyxHQUFJd0MsS0FBS2c4RixnQkFBaUIsQ0FJeEIsTUFBTVgsYUFBZXI3RixLQUFLcTdGLGFBQ3BCdkksT0FBUzl5RixLQUFLOC9GLFdBQVc5L0YsS0FBSzg3RixvQkFDcENULGFBQWF2akYsU0FBUWxLLElBRW5CQSxFQUFFaWxGLHlCQUF5QkMsUUFDM0JsbEYsRUFBRW9sRix1QkFBeUJwbEYsRUFBRW1sRixlQUM3Qm5sRixFQUFFekosVUFBWSxXQUVWbkUsS0FBSzQ4RixtQkFBbUJ2QixhQUFjLENBQUVyOUYsUUFBUSxVQUNoRGdDLEtBQUtvZ0csb0JBQW9CcGdHLEtBQUttOEYsVUFBVyxDQUFFbitGLFFBQVEsVUFDbkRnQyxLQUFLNGhHLE9BQ2IsT0F0QkU3NEYsR0FBR0MsY0FBY3VLLEtBQUtqVyxLQUFLQyxLQUFLQyxTQUFTLDRCQXVCN0MsQ0FFQSxhQUFNcWtHLEdBRUosTUFBTTFGLFVBQVluOEYsS0FBS204RixVQUFVOWxHLFFBQU9ta0IsSUFBTUEsRUFBRTZTLE9BQ2hELElBQUssSUFBSTdNLEVBQUksRUFBR0EsRUFBSTI3RSxVQUFVdjdGLE9BQVE0ZixJQUNoQzI3RSxVQUFVMzdFLEdBQUc2NkUsZUFBY2MsVUFBVTM3RSxHQUFHNjZFLGFBQWUsSUFDdkRjLFVBQVUzN0UsR0FBR3pmLGVBQWVvN0YsVUFBVTM3RSxHQUFHemYsT0FFL0MsTUFBTTg3RixpQkFBbUI3OEYsS0FBS2pFLE9BQU9zL0YsYUFDakN6OEYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT3MvRixjQUNwQyxHQUNKLElBQUssSUFBSTc2RSxFQUFJLEVBQUdBLEVBQUlxOEUsaUJBQWlCajhGLE9BQVE0ZixJQUN2Q3E4RSxpQkFBaUJyOEUsR0FBR3pmLGVBQWU4N0YsaUJBQWlCcjhFLEdBQUd6ZixhQUV2RGYsS0FBSzhoRyxvQkFBb0IsRUFBRyxFQUFHLENBQUU5akcsUUFBUSxVQUN6Q2dDLEtBQUtvZ0csb0JBQW9CakUsVUFBVyxDQUFFbitGLFFBQVEsVUFDOUNnQyxLQUFLNDhGLG1CQUFtQkMsaUJBQWtCLENBQUU3K0YsUUFBUSxVQUNwRGdDLEtBQUsraEcsTUFDYixDQUVBLGdCQUFBaEksQ0FBa0IzQixjQUFjLEtBQVMsR0FBTSxDQUFDLEdBQzlDLE1BQU0rRCxVQUFZdjlGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxNQUUxRHdnRSxpQkFEYzdGLFVBQVU5akQsV0FBVTc5QixHQUFLNDlFLGVBQWlCNTlFLEVBQUU3YyxPQUN6Qml0RSxLQUN2QyxPQUF5QixJQUFyQnV4QixVQUFVdjdGLE9BQXFCLEtBQy9Cb2hHLGtCQUFvQjdGLFVBQVV2N0YsT0FDekJ1N0YsVUFBVUEsVUFBVXY3RixPQUFTLEdBRWxDb2hHLGlCQUFtQixFQUFVN0YsVUFBVSxHQUNwQ0EsVUFBVTZGLGlCQUNuQixDQUVBLHVCQUFNQyxDQUFtQi9NLGlCQUFpQixRQUFXLEdBQVMsQ0FBQyxHQUM3RCxNQUFNdG5GLEVBQUk1TixLQUFLcThGLGVBQWVuSCx1QkFDeEJ6Z0UsT0FBT3lsQixRQUFRLENBQ25CeHJDLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLDBCQUMxQmlULFFBQVMsTUFBTW5ULEtBQUtDLEtBQUswVyxPQUFPLDZCQUE4QixDQUM1RDdkLEtBQU13WCxFQUFFeFgsYUFFVitqRCxJQUFLNzNDLFVBQ0gsTUFHTTQvRixvQkFIbUJ0akcsUUFBUUMsTUFBTXdPLFVBQ3JDck4sS0FBS2pFLE9BQU9zL0YsY0FFK0JobEcsUUFDM0N1WCxHQUFLc25GLGtCQUFvQnRuRixFQUFFalEsT0FFdkJ3a0csY0FBZ0J2akcsUUFBUUMsTUFBTXdPLFVBQ2xDck4sS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxNQUV4QjJnRSxjQUFjcnFGLFNBQVEwQyxJQUNoQkEsRUFBRTZnRixjQUFnQjdnRixFQUFFNmdGLGFBQWF6NkYsU0FDbkM0WixFQUFFNmdGLGFBQWU3Z0YsRUFBRTZnRixhQUFhaGxHLFFBQzlCc0gsTUFBUXUzRixrQkFBb0J2M0YsT0FFaEMsVUFFSXFDLEtBQUs0OEYsbUJBQW1Cc0Ysb0JBQXFCLENBQUVsa0csUUFBUSxVQUN2RGdDLEtBQUtvZ0csb0JBQW9CK0IsY0FBZSxDQUFFbmtHLFFBQVEsR0FHOUQsQ0FFQSxvQkFBTW9rRyxDQUNKck4sYUFDQSxRQUNXLEVBQUksYUFDRSxLQUFJLDRCQUNVLEVBQUksUUFDeEIsR0FDUCxDQUFDLEdBRUwsTUFBTThILGlCQUFtQjc4RixLQUFLakUsT0FBT3MvRixhQUNqQ3o4RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPcy9GLGNBQ3BDLEdBTUosR0FKSXRHLFlBQVl6dkYsS0FBSyt5RixrQkFBa0J0RCxZQUFZenZGLEtBQUsreUYsVUFDcER0RCxZQUFZenZGLEtBQUs4eUYscUJBQXFCckQsWUFBWXp2RixLQUFLOHlGLGFBQ3ZEckQsWUFBWXp2RixLQUFLcEgsZUFBZTYyRixZQUFZenZGLEtBQUtwSCxRQUVoRDYyRixZQUFZcDNGLEtBQU0sQ0FDckIsSUFBSTBrRyxRQUFTLEVBQ2IsTUFBUUEsUUFDTnROLFlBQVl6dkYsS0FBSzNILEtBQU9pQixRQUFRQyxNQUFNeW5ELFNBQVMsSUFDL0MrN0MsT0FDdUUsSUFBckV4RixpQkFBaUJ4bUcsUUFBT3VYLEdBQUtBLEVBQUVqUSxPQUFTbzNGLFlBQVlwM0YsT0FBTWlELE1BRWhFLENBRUEsR0FBSTFDLE9BQVEsQ0FDTjYyRixZQUFZL0IsdUJBQXlCK0IsWUFBWWhDLGlCQUNuRGdDLFlBQVkvQix1QkFBeUIrQixZQUFZaEMsZ0JBRW5ELE1BQU0xMUUsTUFBUXcvRSxpQkFBaUJ4a0QsV0FBVXpxQyxHQUFLQSxFQUFFalEsT0FBU28zRixZQUFZcDNGLE9BQ3JFay9GLGlCQUFpQngvRSxPQUFTMDNFLFlBQVl6dkYsSUFDeEMsTUFBT3UzRixpQkFBaUIzbEcsS0FBSzY5RixZQUFZenZGLE1BTXpDLFNBSk10RixLQUFLNDhGLG1CQUFtQkMsaUJBQWtCLENBQzlDNytGLE9BQVFBLFNBQVdnQyxLQUFLbW1GLFVBQVlubUYsS0FBS3NpRyw2QkFHdkNBLDJCQUE0QixDQUM5QixNQUFNM1AsUUFBVTN5RixLQUFLMjhGLG9CQUFvQnZLLFlBQ25DaUosYUFBZXI3RixLQUFLcTdGLGFBQzFCQSxhQUFhdmpGLFNBQVFsSyxHQUFLQSxFQUFFaWxGLHlCQUF5QkYsaUJBQy9DM3lGLEtBQUs0OEYsbUJBQW1CdkIsYUFBYyxDQUMxQ3I5RixPQUFRQSxTQUFXZ0MsS0FBS21tRixTQUU1QixDQUVBLEdBQ0VubUYsS0FBS21tRixVQUNINE8sWUFBWXp2RixLQUFLK25ELFVBQVcwbkMsWUFBWXp2RixLQUFLbXRGLFNBQy9DLENBQ0EsTUFBTTBQLGNBQWdCbmlHLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsS0FDeEM1aUMsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLakUsT0FBT29nRyxVQUFVMzZELE1BQzlDLEdBRXlCLElBQXpCMmdFLGNBQWN2aEcsUUFDaEJtSSxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLQyxTQUFTLGlDQUl2QixJQUFJK2lHLGNBQWdCNEIsY0FBYzlwRCxXQUFVNzlCLEdBQUs0OUUsZUFBaUI1OUUsRUFBRTdjLFFBQzdDLElBQW5CNGlHLGdCQUFzQkEsY0FBZ0IsR0FDckM0QixjQUFjNUIsZUFBZWxGLGVBQ2hDOEcsY0FBYzVCLGVBQWVsRixhQUFlLEtBS3JDLElBRlA4RyxjQUFjNUIsZUFBZWxGLGFBQWFoakQsV0FDeEN6cUMsR0FBS0EsSUFBTW1uRixZQUFZcDNGLFFBR3pCd2tHLGNBQWM1QixlQUFlbEYsYUFBYW5rRyxLQUFLNjlGLFlBQVlwM0YsWUFFdkRxQyxLQUFLb2dHLG9CQUFvQitCLGNBQWUsQ0FBRW5rRyxRQUNsRCxDQUNGLENBRUEscUJBQU11a0csQ0FDSnJOLGlCQUNBLG9CQUN1QixFQUFJLGtCQUNOLEVBQUksa0JBQ0osRUFBSSxxQkFDRCxFQUFJLFFBQ2pCLEdBQ1AsQ0FBQyxHQUNKLENBUUgscUJBQU0wSixDQUNKMUosZ0JBQ0FzTixlQUNBLG9CQUN1QixFQUFJLGtCQUNOLEVBQUksa0JBQ0osRUFBSSxxQkFDRCxFQUFJLFFBQ2pCLEdBQ1AsQ0FBQyxHQUlMLElBQUkzN0MsVUFBVyxFQUNmLE1BQU1zMUMsVUFBWXY5RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtqRSxPQUFPb2dHLFVBQVUzNkQsTUFDMURpaEUsWUFBY3RHLFVBQVU5akQsV0FBVTc5QixHQUN0Q0EsRUFBRTZnRixjQUFjcjRGLFNBQVNreUYsbUJBRTNCLElBQUk4TSxpQkFBbUJTLFlBQWNELGNBQ2pDUixpQkFBbUI3RixVQUFVdjdGLE9BQVMsSUFDeENvaEcsaUJBQW1CN0YsVUFBVXY3RixPQUFTLEdBR3BDb2hHLGlCQUFtQixJQUNyQkEsaUJBQW1CLEdBR3JCLE1BQU1VLFVBQVlWLGlCQUFtQlMsWUFDL0IxTixZQUFjLzBGLEtBQUtxOEYsZUFBZW5ILGlCQUNsQzJILGlCQUFtQmorRixRQUFRQyxNQUFNd08sVUFDckNyTixLQUFLakUsT0FBT3MvRixjQUVSMkIsaUJBQW1CSCxpQkFBaUJ4a0QsV0FDeEN6cUMsR0FBS3NuRixrQkFBb0J0bkYsRUFBRWpRLE9BRzdCLEdBQUk4L0YsbUJBQW9CLENBQ3RCLElBQUsxSSxZQU1ILFlBTEFoc0YsR0FBR0MsY0FBYzBVLE1BQ2ZwZ0IsS0FBS0MsS0FBSzBXLE9BQU8sK0JBQWdDLENBQy9DaWhGLGdCQUFpQmwxRixLQUFLazFGLG1CQUs1QixHQUFJSCxZQUFZL0IsdUJBQXlCNXdGLEtBQUtDLElBQUlxZ0csV0FPaEQsWUFOQTM1RixHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLMFcsT0FBTyxvQ0FBcUMsQ0FDcERrcEYsY0FBZWpJLGdCQUNmd0ksUUFBUzNJLFlBQVkvQiwwQkFLM0IrQixZQUFZM0IscUJBQXFCLEVBQUloeEYsS0FBS0MsSUFBSXFnRyxZQUM5QzdGLGlCQUFpQkcsa0JBQW9CcCtGLFFBQVFDLE1BQU13TyxVQUNqRDBuRixZQUFZenZGLFlBRVJ0RixLQUFLOUIsT0FDVCxDQUFFLHNCQUF1QjIrRixrQkFDekIsQ0FBRTcrRixRQUFRLElBRVo2b0QsVUFBVyxDQUNiLENBNkJBLE9BM0JrQixJQUFkNjdDLGtCQUNJMWlHLEtBQUtnNkYsMEJBQ1Q5RSxnQkFDQWlILFVBQVU2RixrQkFBa0Jya0csS0FDNUIsQ0FBRUssUUFBUSxJQUVaNm9ELFVBQVcsR0FHVG0zQyw0QkFDSWgrRixLQUFLZytGLG9CQUFvQjlJLGdCQUFpQixDQUM5QytFLGlCQUNBQyxpQkFDQWw4RixRQUFRLElBRVY2b0QsVUFBVyxHQUdUcXpDLG1CQUFxQjhELDRCQUNqQmgrRixLQUFLazZGLGlCQUFpQmlDLFVBQVU2RixrQkFBa0Jya0csS0FBTSxDQUM1RHM4RixpQkFDQWo4RixRQUFRLElBRVY2b0QsVUFBVyxHQUdUQSxVQUFZN29ELGNBQWNnQyxLQUFLakMsTUFBTUMsUUFBTyxHQUN6QzBrRyxTQUNULENBRUEsK0JBQU0xSSxDQUNKOUUsZ0JBQ0FrRCxjQUNBLGtCQUNxQixFQUFJLGtCQUNKLEVBQUksUUFDYixLQUFJLFdBQ0YsRUFBSSxRQUNQLEdBQ1AsQ0FBQyxHQUVMLE1BQU0rRCxVQUFZdjlGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2pFLE9BQU9vZ0csVUFBVTM2RCxNQUcxRHNqRCxZQUFjcVgsVUFBVXo4RixNQUFLOGEsR0FBSzQ5RSxlQUFpQjU5RSxFQUFFN2MsT0FDM0QsSUFBS21uRixZQUlILFlBSEEzNUUsUUFBUXVTLE1BQ04sa0JBQWtCdzNFLDZCQUE2QmtELHdCQU1uRCxNQUFNMTZGLE9BQVN5K0YsVUFBVXo4RixNQUFLOGEsR0FDNUJBLEVBQUU2Z0YsY0FBY3I0RixTQUFTa3lGLG1CQUczQixJQUFLeDNGLE9BRUgsWUFEQXlOLFFBQVF1UyxNQUFNLGtCQUFrQnczRSxnQ0FLbEMsR0FES3BRLFlBQVl1VyxlQUFjdlcsWUFBWXVXLGFBQWUsSUFDdER2VyxZQUFZdVcsYUFBYXI0RixTQUFTa3lGLGlCQUFrQixPQUN4RHBRLFlBQVl1VyxhQUFhbmtHLEtBQUtnK0YsaUJBRzlCLE1BQU15TixvQkFBc0JqbEcsT0FBTzI5RixhQUFhaGxHLFFBQzlDdVgsR0FBS3NuRixrQkFBb0J0bkYsSUFJM0IsR0FGQWxRLE9BQU8yOUYsYUFBZXNILG9CQUVsQkMsV0FBYTlkLFlBQVkwYyxZQUFhLENBQ3hDLE1BQU16TSxZQUFjLzBGLEtBQUtxOEYsZUFBZW5ILGlCQUN4QyxJQUFJMk4sbUJBQXFCajdGLGNBQWM4cEQsbUJBQ3JDcWpDLGFBQWF6dkYsTUFBTW1zRCxTQUdyQixHQUFJb3hDLHNCQUF3QkEsOEJBQThCaG5GLGVBQWlCZ25GLG9CQUFvQnR4RixrQkFBa0J0RSxPQUFRLENBQ3ZILE1BQU02MUYsWUFBY2p3RixPQUFPaEcsTUFBTUQsT0FBT3ZXLFFBQU9MLEdBQUtBLEVBQUVnK0MsV0FBYWgrQyxFQUFFaUUsT0FBT2lVLEtBQU8yMEYsbUJBQW1CMzBGLEtBQzNFLElBQXZCNDBGLFlBQVlsaUcsU0FDZGlpRyxtQkFBcUJDLFlBQVksR0FFckMsQ0FDQSxHQUNFRCxzQkFHSUEsOEJBQThCaG5GLGVBQzlCZ25GLG9CQUFvQnR4RixrQkFBa0J0RSxPQUkxQzlCLFFBQVFvSSxLQUFLLDRDQUtiLEdBSEl1eEUsWUFBWTBjLFlBQVkzMEYsUUFBVXZQLEtBQUt3UCxPQUFPaTJGLE9BQU9wbEcsTUFDdkR3TixRQUFRb0ksS0FBSyw2Q0FFWHN2RixtQkFBbUI5NEYsUUFBUXBNLE9BQVNtbkYsWUFBWTBjLFlBQVkzMEYsTUFDOUQ5RCxHQUFHQyxjQUFjMFUsTUFDZnBnQixLQUFLQyxLQUFLQyxTQUFTLGtDQUVoQixDQUNMLE1BQU1xUCxNQUFRakYsY0FBYzhwRCxtQkFDMUJvekIsWUFBWTBjLFlBQVkzMEYsT0FFMUIsSUFBSWhCLEVBQUlpNUUsWUFBWTBjLFlBQVkzMUYsRUFDaEMsTUFBTWdoRCxFQUFJaTRCLFlBQVkwYyxZQUFZMzBDLEVBQ2xDLElBQUltMkMsV0FBYSxJQUFJQyxLQUFLQyxVQUN4QnIzRixFQUNBZ2hELEVBQ0FnMkMsbUJBQW1CdHhGLE9BQU91SSxNQUMxQitvRixtQkFBbUJ0eEYsT0FBT3dJLFFBQzFCczRDLFlBQ0YsTUFBTW4wRCxPQUFTLEdBQ2YsSUFBSWlsRyxnQkFBaUIsRUFDckIsTUFBUUEsZ0JBQWdCLENBQ3RCLE1BQU1DLGdCQUFrQnYyRixNQUFNRCxPQUFPbE4sTUFBS3FELEdBQ3BDQSxFQUFFbUwsS0FBTzIwRixtQkFBbUIzMEYsSUFDekJuTCxFQUFFd08sT0FBTzh4RixPQUFPQyxXQUFXTixjQUVoQ0ksaUJBQ0Z2M0YsRUFBSXUzRixnQkFBZ0I3eEYsT0FBTzh4RixPQUFPeG1ELE1BQVEsRUFDMUNtbUQsV0FBYSxJQUFJQyxLQUFLQyxVQUNwQnIzRixFQUNBZ2hELEVBQ0FnMkMsbUJBQW1CdHhGLE9BQU91SSxNQUMxQitvRixtQkFBbUJ0eEYsT0FBT3dJLFFBQzFCczRDLGFBQ0c4d0MsZ0JBQWlCLENBQzFCLENBRUFqbEcsT0FBT2hILEtBQUssQ0FDVm03QyxJQUFLd3dELG1CQUFtQjMwRixHQUN4QnJDLEVBQ0FnaEQsSUFnQkYsTUFBTTAyQyxrQkFDZSxrQkFBWkMsUUFDSEEsUUFDQXhqRyxLQUFLakUsT0FBT3duRyx3QkFDWlYsbUJBQW1COTRGLE9BQU93dUMsd0JBQzlCLFFBQ0FyNkMsT0FDQSxDQUFFc2xHLFFBQVNELG1CQUVmLENBRUosT0FFTXZqRyxLQUFLb2dHLG9CQUFvQmpFLFVBQVcsQ0FBRW4rRixRQUM5QyxDQUdBLHlCQUFNOGpHLEVBQXFCLEtBQ1QsSUFDWCxFQUFFLFFBQ0UsR0FDUCxDQUFDLFNBQ0c5aEcsS0FBSzlCLE9BQ1QsQ0FDRSxxQ0FDRUwsSUFBY3FoQixLQUFPbGYsS0FBS3krRixnQ0FBa0N2L0UsS0FDOUQsbUNBQ0VyaEIsSUFBYzRsRyxHQUFLempHLEtBQUt5K0YsZ0NBQWtDZ0YsSUFFOUQsQ0FBRXpsRyxRQUVOLENBRUEsbUNBQUl5Z0csR0FDRixNQUFNeGtGLEtBQU9qYSxLQUFLakMsT0FBT3VqQyxTQUN6QixJQUFLcm5CLEtBQU0sT0FBUSxFQUNuQixNQUFNMmxGLFdBQWEzbEYsS0FBSyxHQUFHckcsY0FBYyxnQkFDekMsT0FBS2dzRixXQU1FQSxXQUFXMTZCLFlBTk8sQ0FPM0IsQ0FPQSwwQ0FBSXcrQixHQUNGLE9BQUsxakcsS0FBS20rRixlQUNIbitGLEtBQUswK0Ysb0NBQW9DMStGLEtBQUttK0YsZUFBZXhnRyxPQURsQyxDQUVwQyxDQUVBLG1DQUFBK2dHLENBQXFDdEcsY0FBYyxLQUFTLE9BQzFELE1BQU10aEYsWUFBY21ELE1BQVFqYSxLQUFLakMsT0FBT3VqQyxTQUN4QyxJQUFLeHFCLGNBQWdCQSxZQUFZLEdBQUksT0FBUSxFQUM3QyxNQUFNOG9GLFdBQWE5b0YsWUFBWSxHQUFHbEQsY0FBYyxnQkFDaEQsSUFBS2dzRixXQUFZLE9BQVEsRUFDekIsTUFBTStELHNCQUF3Qi9ELFdBQVdoc0YsY0FDdkMsOEJBQThCd2tGLGtCQUVoQyxJQUFLdUwsc0JBQXVCLE9BQVEsRUFDcEMsTUFBTUMsV0FDSkQsc0JBQXNCRSxXQUN0QkYsc0JBQXNCRyxZQUFjLEVBQ3BDbEUsV0FBV2tFLFlBQWMsRUFDM0IsT0FBT0YsV0FBYSxFQUFJLEVBQUl4aEcsS0FBSzBJLE1BQU04NEYsV0FDekMsQ0FHQSxVQUFBOUQsQ0FBWXQrRCxNQUNWLE9BQUtBLE1BQU01Z0MsT0FDSjRnQyxLQUFLdjFCLFFBQU8sQ0FBQzgzRixLQUFNN3dELFVBQ3hCNndELEtBQUszUixZQUFjbC9DLFFBQVFrL0MsWUFBYzJSLEtBQU83d0QsVUFDaERrL0MsYUFIeUIsQ0FJN0IsQ0FFQSxVQUFBNE4sQ0FBWXgrRCxNQUNWLE9BQUtBLE1BQU01Z0MsT0FDSjRnQyxLQUFLdjFCLFFBQU8sQ0FBQzgzRixLQUFNN3dELFVBQ3hCNndELEtBQUszUixZQUFjbC9DLFFBQVFrL0MsWUFBYzJSLEtBQU83d0QsVUFDaERrL0MsYUFIeUIsQ0FJN0IsQ0FHQSxTQUFBLzVDLENBQVc3VyxLQUFNN2pDLE1BQ2YsT0FBTzZqQyxLQUFLNlcsV0FBVXpxQyxHQUFLQSxFQUFFalEsT0FBU0EsTUFDeEMsQ0FFQSxXQUFJd29GLEdBQ0YsT0FBT25tRixLQUFLUCxRQUFRLE9BQVEsVUFDOUIsQ0FFQSxXQUFNbWlHLEdBQ0osTUFBTW9DLFVBQVlsNEUsRUFBRSxTQUFTZ3BDLElBQUksYUFDM0JtdkMsUUFBVS9uRyxPQUFPOG5HLFVBQVVyMEYsUUFBUSxLQUFNLEtBQ3pDdTBGLE9BQVNsa0csS0FBSzg3RixtQkFBbUJsN0YsT0FDakNrWixNQUFRMVgsS0FBS2EsS0FBYyxLQUFUaWhHLE9BQWdCLEdBQUtELFFBQVMsR0FBS0EsU0FDM0Rqa0csS0FBS2pDLE1BQU1vbUcsTUFBTSxHQUFHcGpHLE9BQVMsUUFDN0JmLEtBQUtqQyxNQUFNc3lELFNBQVN2MkMsTUFBUUEsWUFDdEI5WixLQUFLMDFCLFFBQVEsT0FBUSxXQUFXLFNBQ2hDMTFCLEtBQUtxNkYsNkJBQ2IsQ0FFQSxVQUFNMEgsR0FDSixPQUFPL2hHLEtBQUt5MUIsVUFBVSxPQUFRLFVBQ2hDLENBRUEsZUFBQWdxRSxHQUNFLE9BQU83Z0csUUFBUUMsTUFBTXluRCxTQUFTLEdBQ2hDLENBRUEsZ0NBQUEydUMsQ0FBa0NDLGlCQUNoQyxNQUFNSCxZQUFjLzBGLEtBQUtxOEYsZUFBZW5ILGlCQUN4QyxJQUFLSCxZQUFZOTZGLE1BQU8sT0FDeEIsTUFBTXVuQyxLQUFPLEdBaUJiLE9BaEJBdFIsU0FBU0MsOEJBQThCclksU0FBUXNZLEdBQzdDb1IsS0FBS3RxQyxLQUNILEdBQUdvRyxLQUFLQyxLQUFLQyxTQUFTLDRCQUE0QjR5QixFQUFFNW9CLGdCQUd4RGc2QixLQUFLdHFDLEtBQ0gsR0FBR29HLEtBQUtDLEtBQUtDLFNBQVMsc0JBQXNCRixLQUFLQyxLQUFLQyxTQUNwRCxpQkFHSmdrQyxLQUFLdHFDLEtBQ0gsR0FBR29HLEtBQUtDLEtBQUtDLFNBQVMsc0JBQXNCRixLQUFLQyxLQUFLQyxTQUNwRCxnQkFHSnUzRixZQUFZOTZGLE1BQU00cEIsT0FBTy9MLFNBQVE3aEIsR0FBS3VyQyxLQUFLdHFDLEtBQUtqQixFQUFFRyxRQUMzQ29yQyxJQUNULENBRUEsdUNBQUk0aUUsR0FDRixNQUFNQyxpQkFBbUJya0csS0FBSyszRixzQkFDOUIsR0FBS3NNLGlCQUNMLE9BQU9ya0csS0FBS2kxRixpQ0FBaUNvUCxpQkFBaUIxbUcsS0FDaEUsQ0FFQSwrQkFBSTAzRixHQUNGLE1BQU03ekQsS0FBTyxHQWtDYixPQWpDQXRSLFNBQVNDLDhCQUE4QnJZLFNBQVFzWSxHQUM3Q29SLEtBQUt0cUMsS0FDSCxHQUFHb0csS0FBS0MsS0FBS0MsU0FBUyw0QkFBNEI0eUIsRUFBRTVvQixnQkFHeERnNkIsS0FBS3RxQyxLQUNILEdBQUdvRyxLQUFLQyxLQUFLQyxTQUFTLHNCQUFzQkYsS0FBS0MsS0FBS0MsU0FDcEQsaUJBR0pna0MsS0FBS3RxQyxLQUNILEdBQUdvRyxLQUFLQyxLQUFLQyxTQUFTLHNCQUFzQkYsS0FBS0MsS0FBS0MsU0FDcEQsZ0JBSUpGLEtBQUtvRSxLQUFLcUssV0FBVytMLFNBQVE3aEIsSUFFeEJ1ckMsS0FBS3grQixTQUFTL00sRUFBRUcsT0FDaEJILEVBQUVHLEtBQ0E0UixjQUNBaEYsU0FBUyxJQUFJMUYsS0FBS0MsS0FBS0MsU0FBUyx1QkFBdUJ3SyxnQkFFMUR3NUIsS0FBS3RxQyxLQUFLakIsRUFBRUcsS0FDZCxJQUVGNEosS0FBS3E3RixhQUFhdmpGLFNBQVFsSyxJQUNwQkEsRUFBRTNULE9BQ0oyVCxFQUFFM1QsTUFBTTRwQixPQUFPL0wsU0FBUTdoQixJQUNoQnVyQyxLQUFLeCtCLFNBQVMvTSxFQUFFRyxPQUFPb3JDLEtBQUt0cUMsS0FBS2pCLEVBQUVHLEtBQUksR0FFaEQsSUFFS29yQyxLQUFLcjFCLEtBQUttNEYsS0FBS0MsV0FBV0MsUUFDbkMsQ0FFQSxvQ0FBSUMsR0FDRixNQUFNampFLEtBQU8sR0FzQmIsT0FyQkF0UixTQUFTQyw4QkFBOEJyWSxTQUFRc1ksR0FBS29SLEtBQUt0cUMsS0FBSyxHQUFHazVCLEVBQUUveUIsV0FDbkVta0MsS0FBS3RxQyxLQUFLLEdBQUdvRyxLQUFLQyxLQUFLQyxTQUFTLGdCQUNoQ2drQyxLQUFLdHFDLEtBQUssR0FBR29HLEtBQUtDLEtBQUtDLFNBQVMsZUFFaENGLEtBQUtvRSxLQUFLcUssV0FBVytMLFNBQVE3aEIsSUFFeEJ1ckMsS0FBS3grQixTQUFTL00sRUFBRUcsT0FDaEJILEVBQUVHLEtBQ0E0UixjQUNBaEYsU0FBUyxJQUFJMUYsS0FBS0MsS0FBS0MsU0FBUyx1QkFBdUJ3SyxnQkFFMUR3NUIsS0FBS3RxQyxLQUFLakIsRUFBRUcsS0FDZCxJQUVGNEosS0FBS3E3RixhQUFhdmpGLFNBQVFsSyxJQUNwQkEsRUFBRTNULE9BQ0oyVCxFQUFFM1QsTUFBTTRwQixPQUFPL0wsU0FBUTdoQixJQUNoQnVyQyxLQUFLeCtCLFNBQVMvTSxFQUFFRyxPQUFPb3JDLEtBQUt0cUMsS0FBS2pCLEVBQUVHLEtBQUksR0FFaEQsSUFFS29yQyxLQUFLcjFCLEtBQUttNEYsS0FBS0MsV0FBV0MsUUFDbkMsRUM5a0RLLE1BQU1FLGtCQUFrQnYvRixTQUM3QixXQUFBRSxDQUFhQyxLQUFNQyxTQUNqQixRQUFzQyxJQUEzQkQsS0FBS3ZKLFFBQVErSyxVQUEyQixDQUNqRCxNQUFNbUIsTUFBUXk4RixVQUFVeDhGLGVBQWU1QyxLQUFLbFAsT0FDdEMsS0FBTSxVQUFXLGtCQUFxQnV1RyxlQUFrQjE4RixNQUM5RDNDLEtBQUtsUCxLQUFPQSxLQUNaa1AsS0FBS3ZKLFNBQVcsQ0FBQyxFQUNqQixNQUFNOEssV0FBYSxJQUFLdkIsS0FBS3ZKLE9BQU84SyxjQUFlODlGLGVBQ25Eci9GLEtBQUt2SixPQUFTLElBQUt1SixLQUFLdkosT0FBUStLLFVBQVdHLGVBQWdCSixXQUM3RCxDQUNBeEssTUFBTWlKLEtBQU1DLFFBQ2QsQ0FFQSxxQkFBTzJDLENBQWdCcEIsV0FDckIsTUFBTXJDLE9BQVMsQ0FDYnROLFFBQVEsRUFDUkMsVUFBVSxFQUNWQyxTQUFTLEVBQ1RqQixLQUFNMFEsVUFDTkEsVUFDQTlQLFNBQVMsRUFDVGlRLGVBQWdCLElBR1pwQixNQUFRaUIsVUFBVWpCLE1BQU0sd0JBQzlCLEdBQUlBLE1BQU8sQ0FDVHBCLE9BQU9xQyxVQUFZakIsTUFBTSxHQUFHbTFCLE9BQzVCdjJCLE9BQU96TixTQUFVLEVBRWpCLE1BQU1pUSxlQUFpQnBCLE1BQU0sR0FBR20xQixPQUNoQ3YyQixPQUFPd0MsZUFBaUJBLGVBQ3hCeEMsT0FBT3JPLEtBQU82USxlQUFpQixLQUFPeEMsT0FBT3FDLFVBQVksSUFDekRyQyxPQUFPck4sU0FBVzZQLGlCQUFtQjNKLEtBQUtDLEtBQUtDLFNBQVMsbUNBQ3hEaUgsT0FBT3BOLFFBQVU0UCxpQkFBbUIzSixLQUFLQyxLQUFLQyxTQUFTLGtDQUN2RGlILE9BQU9uTixPQUFTMlAsaUJBQW1CM0osS0FBS0MsS0FBS0MsU0FBUyxpQ0FDdERpSCxPQUFPdE4sT0FBU3NOLE9BQU9yTixVQUFZcU4sT0FBT3BOLFNBQVdvTixPQUFPbk4sTUFDOUQsQ0FDQSxPQUFPbU4sTUFDVCxDQUVBLG9CQUFJbWdHLEdBQ0YsT0FBTzVrRyxLQUFLNmtHLGNBQWNqa0csT0FBUyxDQUNyQyxDQUVBLGlCQUFJaWtHLEdBQ0YsR0FBSTdrRyxLQUFLK0osUUFBVS9KLEtBQUsrSixPQUFPOU0sUUFBUyxDQUN0QyxNQUFNNm5HLGNBQWdCLFNBQVM5a0csS0FBSzVKLE9BQU80UixjQUNyQys4RixlQUFpQixTQUFTL2tHLEtBQUtqRSxPQUFPK0ssWUFBWWtCLGNBQ3hELElBQUl3bUIsUUFBVXh1QixLQUFLK0osT0FBTzlNLFFBQVFnUCxRQUFPLENBQUN1aUIsUUFBU2h1QixJQUM3Q0EsRUFBRTFDLFVBQVkwQyxFQUFFQyxhQUFxQit0QixRQUNsQ0EsUUFBUXhpQixPQUNieEwsRUFBRThFLEtBQUtrcEIsUUFBUXhxQixLQUFJb3NCLEtBQ2pCQSxFQUFJeHhCLFFBQVFDLE1BQU13TyxVQUFVK2lCLElBQzFCdHpCLE9BQVMwRCxFQUNYNHZCLEVBQUV1akIsU0FBV3ZqQixFQUFFdWpCLFVBQXFCLEdBQVR2akIsRUFBRW9DLEtBQ3RCcEMsT0FHVixJQU9ILE9BTkE1QixRQUFRcmlCLE1BQUssQ0FBQ3pQLEVBQUcwakIsSUFBTTFqQixFQUFFaTNDLFNBQVd2ekIsRUFBRXV6QixXQUN0Q25sQixRQUFVQSxRQUFRbjRCLFFBQ2hCbUssR0FDRUEsRUFBRTNFLElBQUltTSxnQkFBa0IrOEYsZ0JBQ3hCdmtHLEVBQUUzRSxJQUFJbU0sZ0JBQWtCODhGLGdCQUVyQnQyRSxPQUNULENBQ0EsTUFBTyxFQUNULENBT0Esa0JBQUlta0IsR0FDRixPQUFPM3lDLEtBQUs1SixJQUNkLENBS0EsWUFBSW9nQixHQUNGLElBQUl0Z0IsTUFBUSxFQXVCWixNQXRCd0IsY0FBcEI4SixLQUFLL0YsTUFBTW9FLE1BRWJuSSxNQUFROEosS0FBS3lLLEtBQ2J2VSxPQUFTOEosS0FBS2pFLE9BQU9ndEIsYUFBYTZzQixTQUM5QjN4QyxTQUFTakUsS0FBS2pFLE9BQU9ndEIsYUFBYTZzQixVQUNsQyxFQUNKMS9DLE9BQVM4SixLQUFLakUsT0FBT2d0QixhQUFhOHNCLFdBQzlCNXhDLFNBQVNqRSxLQUFLakUsT0FBT2d0QixhQUFhOHNCLFlBQ2xDLEVBQ0ozL0MsT0FBUzhKLEtBQUtqRSxPQUFPZ3RCLGFBQWFDLFdBQzlCL2tCLFNBQVNqRSxLQUFLakUsT0FBT2d0QixhQUFhQyxZQUNsQyxFQUVGMXJCLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHNCQUMxQjhDLEtBQUtqRSxPQUFPZ3RCLGFBQWErc0IsWUFFekI1L0MsT0FBUytOLFNBQVNqRSxLQUFLakUsT0FBT2d0QixhQUFhK3NCLGFBSTdDNS9DLE1BQVErTixTQUFTakUsS0FBS2pFLE9BQU83RixPQUV2QjRGLE1BQU01RixPQUFpQixLQUFSQSxLQUN6QixDQUtBLFNBQUlBLEdBQ0YsTUFBTUEsTUFBUThKLEtBQUsrSixRQUFRaE8sT0FBTzhuQixTQUFTLEdBQUc3akIsS0FBSzJ5QyxtQkFBbUJ6OEMsTUFDdEUsT0FBT0EsT0FBUzhKLEtBQUt3VyxRQUN2QixDQUVBLGlCQUFNNnBDLENBQWFucUQsT0FDakIsR0FBd0IsY0FBcEI4SixLQUFLL0YsTUFBTW9FLEtBQXNCLENBQ25DLE1BQU0ybUcsTUFBUS9nRyxTQUFTL04sT0FBUzhKLEtBQUt3VyxTQUMvQnl1RixLQUNIamxHLEtBQUtqRSxPQUFPZ3RCLGFBQWFDLFdBQ3RCL2tCLFNBQVNqRSxLQUFLakUsT0FBT2d0QixZQUFZQyxZQUNqQyxHQUFLZzhFLFlBQ0xobEcsS0FBSzlCLE9BQU8sQ0FDaEIsZ0NBQWlDK21HLElBQU0sRUFBSUEsSUFBTSxHQUVyRCxZQUFhamxHLEtBQUs5QixPQUFPLENBQUUsZUFBZ0JoSSxPQUM3QyxDQUVBLHdCQUFNdXNELENBQW9CNTJDLEdBQ3hCLEdBQWtCLFVBQWQ3TCxLQUFLM0IsS0FBa0IsT0FBTyxLQUNsQyxHQUF3QixjQUFwQjJCLEtBQUsvRixNQUFNb0UsS0FBc0IsQ0FDbkMsTUFBTTRtRyxLQUNIamxHLEtBQUtqRSxPQUFPZ3RCLGFBQWFDLFdBQ3RCL2tCLFNBQVNqRSxLQUFLakUsT0FBT2d0QixZQUFZQyxZQUNqQyxHQUFLL2tCLFNBQVM0SCxTQUNkN0wsS0FBSzlCLE9BQU8sQ0FDaEIsZ0NBQWlDK21HLElBQU0sRUFBSUEsSUFBTSxHQUVyRCxDQUNGLEVDOUlLLE1BQU1DLG9CQUFvQmgxRSxTQUMvQixXQUFBN3FCLENBQWFDLEtBQU1DLGNBQ08sSUFBYkQsS0FBS0ksTUFDZEosS0FBS0ksSUFBTSxzQ0FFYnJKLE1BQU1pSixLQUFNQyxRQUNkLENBRUEsWUFBSTB0QyxHQUNGLE9BQU9qekMsS0FBS2tzQyxLQUNkLENBRUEsU0FBSUEsR0FDRixNQUFNQSxNQUFRam9DLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUWt3QyxNQUFNaDJDLE9BQ2pELE9BQU80RixNQUFNb3dDLE9BQVMsS0FBT0EsS0FDL0IsQ0FFQSxNQUFJaUgsR0FDRixHQUN3QyxPQUF0Q256QyxLQUFLakUsT0FBT0MsUUFBUWt3QyxNQUFNZ0gsY0FDMUJyMUMsSUFBY21DLEtBQUtqRSxPQUFPQyxRQUFRa3dDLE1BQU1nSCxTQUNGLEtBQXRDbHpDLEtBQUtqRSxPQUFPQyxRQUFRa3dDLE1BQU1nSCxRQUUxQixPQUFPbHpDLEtBQUtrc0MsTUFFZCxHQUNFbHNDLEtBQUtqRSxPQUFPQyxRQUFRa3dDLE1BQU1nSCxRQUFVbHpDLEtBQUtqRSxPQUFPQyxRQUFRa3dDLE1BQU1oMkMsTUFFOUQsT0FBTzhKLEtBQUtrc0MsTUFFZCxNQUFNaUgsR0FBS2x2QyxTQUFTakUsS0FBS2pFLE9BQU9DLFFBQVFrd0MsTUFBTWdILFNBQzlDLE9BQU9wM0MsTUFBTXEzQyxJQUFNLEtBQU9BLEVBQzVCLENBRUEsU0FBSVUsR0FDRixPQUFPN3pDLEtBQUtrc0MsS0FDZCxDQUVBLFlBQUlvSCxHQUNGLE9BQU90ekMsS0FBS2tzQyxLQUNkLENBRUEsV0FBTXVaLENBQU92dkQsT0FFWCxPQURJQSxNQUFROEosS0FBS2tzQyxRQUFPaDJDLE1BQVE4SixLQUFLa3NDLGFBQ3hCbHNDLEtBQUs5QixPQUFPLENBQUUsK0JBQWdDaEksT0FDN0QsQ0FFQSxTQUFJODhDLEdBQ0YsT0FBT2h6QyxLQUFLN0QsRUFDZCxDQUVBLE1BQUlBLEdBQ0YsTUFBTUEsR0FBSzhILFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUUcsSUFBSWpHLE9BQzVDLE9BQU80RixNQUFNSyxJQUFNLEtBQU9BLEVBQzVCLENBRUEsVUFBSTQyQyxHQUNGLE9BQU8veUMsS0FBS3NzQyxHQUNkLENBRUEsT0FBSUEsR0FDRixNQUFNQSxJQUFNcm9DLFNBQVNqRSxLQUFLakUsT0FBT0MsUUFBUXN3QyxLQUFLcDJDLE9BQzlDLE9BQU80RixNQUFNd3dDLEtBQU8sS0FBT0EsR0FDN0IsQ0FFQSxTQUFJd0gsR0FDRixPQUFPN3ZDLFNBQVNqRSxLQUFLakUsT0FBT0MsU0FBU3UzQyxJQUFJdHdDLE1BQVEsQ0FDbkQsQ0FFQSxZQUFJdXdDLEdBQ0YsT0FBT3h6QyxLQUFLOHpDLEtBQ2QsQ0FFQSxVQUFJaHRCLEdBQ0YsT0FBTyxJQUNULENBRUEsYUFBSTJzQixHQUNGLE9BQU8sSUFDVCxFQy9FSyxNQUFNMHhELHVCQUF1Qm5qRCxJQUNsQyxXQUFBMzhDLENBQWErL0YsVUFDWEEsU0FBU3BnRyxNQUFRLEdBQ2pCM0ksTUFBTStvRyxTQUNSLENBRUEsU0FBSTNpRyxHQUNGLE1BQU1BLE1BQVFwRyxNQUFNb0csTUFDcEIsT0FBaUIsS0FBVkEsTUFBZSxFQUFZLEdBQVJBLEtBQzVCLENBSUEsdUJBQVc0aUcsR0FDVCxNQUFPLEdBQ1QsRUNmSyxNQUFNQyw0QkFBNEJILGVBQ3ZDLHVCQUFXRSxHQUNULE1BQU8sR0FDVCxFQ0pGLE1BQU1FLFNBQVcsQ0FDZkMsVUFBVyxDQUNUcHZHLEtBQU0sR0FDTnd4RCxLQUFNLEdBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixTQUVScS9FLGVBQWdCLENBQ2RydkcsS0FBTSwwQkFDTnd4RCxLQUFNLDhCQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsUUFDVGxkLEtBQU1qQyxPQUNOc3BHLFFBQVMsQ0FDUGhzRyxNQUFPLCtCQUNQNm1DLFNBQVUsbUNBRVpvbEUsU0FBVUMsTUFBUUMsc0JBQXNCRCxPQUUxQy9oQyx1QkFBd0IsQ0FDdEJ6dEUsS0FBTSxrQ0FDTnd4RCxLQUFNLHNDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsU0FFUjAvRSxvQkFBcUIsQ0FDbkIxdkcsS0FBTSxvQ0FDTnd4RCxLQUFNLG1DQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsU0FFUjIvRSx3QkFBeUIsQ0FDdkIzdkcsS0FBTSwrQ0FDTnd4RCxLQUFNLCtDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsU0FFUnk4Qiw0QkFBNkIsQ0FDM0J6c0QsS0FBTSxtREFDTnd4RCxLQUFNLG1EQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsU0FFUjJ5QyxrQkFBbUIsQ0FDakIzaUUsS0FBTSx5Q0FDTnd4RCxLQUFNLHlDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsU0FFUjR5QyxxQkFBc0IsQ0FDcEI1aUUsS0FBTSw0Q0FDTnd4RCxLQUFNLDRDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsU0FFUjQvRSxnQkFBaUIsQ0FDZjV2RyxLQUFNLHVDQUNOd3hELEtBQU0sdUNBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixTQUVSNi9FLHVCQUF3QixDQUN0Qjd2RyxLQUFNLDhDQUNOd3hELEtBQU0sOENBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixTQUVSOC9FLDBCQUEyQixDQUN6Qjl2RyxLQUFNLGlEQUNOd3hELEtBQU0saURBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixTQUVSdTZELDJCQUE0QixDQUMxQnZxRixLQUFNLGtEQUNOd3hELEtBQU0sa0RBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixTQUVSakcsc0JBQXVCLENBQ3JCL3BCLEtBQU0saUNBQ053eEQsS0FBTSxxQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBSVYsU0FBU3kvRSxzQkFBdUJELE1BQzlCLElBQUlPLFNBQVcsRUFDZixPQUFRUCxNQUNOLElBQUssV0FDSE8sU0FBVyxFQUNYLE1BQ0YsSUFBSyxRQUNIQSxTQUFXLEVBR2Z2akcsT0FBT3dqRyxPQUFPbitCLFdBQWEsQ0FDekJqdUUsUUFBUyxLQUNUbXNHLFNBRUosQ0FFTyxNQUFNRSw2QkFBNkI3c0YsZ0JBQ3hDLHlCQUFXQyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyRC9LLE1BQU8sc0JBQ1BSLEdBQUksaUJBQ0owTCxTQUFVLG1EQUNWRSxNQUFPLElBQ1BDLE9BQVEsT0FDUkYsZUFBZSxHQUVuQixDQUVBLE9BQUFzWCxHQUNFLE1BQU03eEIsUUFBVSxDQUFDLEVBQ1hrbUcsVUFBWSxDQUNoQmMsTUFBTSxFQUNOQyxPQUFPLEdBRVQsSUFBSyxNQUFPcjNGLEVBQUd2UCxLQUFNQyxPQUFPMkssUUFBUWc3RixVQUNsQ2ptRyxRQUFRNFAsR0FBSyxDQUNYaFosTUFBT29ILEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRZ1MsR0FDakNzM0YsUUFBUzdtRyxHQUVQdVAsRUFBRXJKLE1BQU0scUJBQ1YyL0YsVUFBVWxtRyxRQUFRNFAsR0FBR2haLFFBQVMsR0FRbEMsT0FMQW9KLFFBQVFtbkcsY0FBZ0JqQixVQUFVYyxLQUM5QmQsVUFBVWUsTUFDUixPQUNBLE1BQ0YsT0FDR2puRyxPQUNULENBRUEsdUJBQU9vbkcsR0FDTCxJQUFLLE1BQU94M0YsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRZzdGLFVBQ2xDam9HLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUTMrRSxFQUFHdlAsR0FFcENrbUcsc0JBQXNCdm9HLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGtCQUNsRCxDQUVBLGlCQUFBOGMsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFDeEJBLEtBQ0d2YSxLQUFLLG9CQUNMd2EsR0FBRyxVQUFVM2QsT0FBU3lELEtBQUsybUcsbUJBQW1CcHFHLFNBQ2pEMGQsS0FDR3ZhLEtBQUssd0NBQ0x3YSxHQUFHLFNBQVMzZCxPQUFTeUQsS0FBSzRtRyxZQUFZcnFHLFNBQ3pDMGQsS0FDR3ZhLEtBQUssc0JBQ0x3YSxHQUFHLFNBQVMzZCxPQUFTeUQsS0FBSzZtRyxnQkFBZ0J0cUcsUUFDL0MsQ0FFQSxrQkFBQW9xRyxDQUFvQnBxRyxPQUNsQixNQUFNcWxDLElBQU05VixFQUFFdnZCLE1BQU1JLGVBQWVpbEMsTUFDdkIsU0FBUkEsS0FBMEIsUUFBUkEsS0FDcEI5VixFQUFFLG1CQUNDcHNCLEtBQUssd0NBQ0x5MkQsTUFBSyxXQUNKLE1BQU0yd0MsU0FBV2g3RSxFQUFFOXJCLE1BQ1AsU0FBUjRoQyxJQUNGa2xFLFNBQVNwMUYsS0FBSyxXQUFXLEdBRXpCbzFGLFNBQVNwMUYsS0FBSyxXQUFXLEVBRTdCLEdBRU4sQ0FFQSxXQUFBazFGLENBQWFycUcsT0FDWCxNQUFNaXBHLFVBQVksQ0FDaEJjLE1BQU0sRUFDTkMsT0FBTyxHQUVUejZFLEVBQUUsbUJBQ0Nwc0IsS0FBSyx3Q0FDTHkyRCxNQUFLLFdBQ2FycUMsRUFBRTlyQixNQUNOMFIsS0FBSyxXQUNoQjh6RixVQUFVYyxNQUFPLEVBRWpCZCxVQUFVZSxPQUFRLENBRXRCLElBQ0Z6NkUsRUFBRSxvQkFBb0I4VixJQUNwQjRqRSxVQUFVYyxLQUFRZCxVQUFVZSxNQUFRLE9BQVMsTUFBUyxPQUUxRCxDQUVBLHFCQUFNTSxDQUFpQnRxRyxPQUNyQkEsTUFBTUUsaUJBQ04sVUFBVyxNQUFPeVMsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRZzdGLGdCQUNsQ2pvRyxLQUFLbUUsU0FBUzJHLElBQUksT0FBUThHLEVBQUd2UCxHQUFHNGIsU0FFeEMsT0FBT3ZiLEtBQUtoQyxRQUNkLENBRUEsbUJBQU0wMEIsQ0FBZW4yQixNQUFPK0ksTUFDMUIsTUFBTWtnRyxVQUFZLENBQ2hCYyxNQUFNLEVBQ05DLE9BQU8sR0FFVCxVQUFXLE1BQU0xcUcsT0FBTytELE9BQU9tRSxLQUFLd2hHLFVBQ2xDam9HLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRdk0sSUFBS3lKLEtBQUt6SixNQUNoQ0EsSUFBSWdLLE1BQU0scUJBQ1oyL0YsVUFBVWxnRyxLQUFLekosT0FBUSxHQUczQnlCLEtBQUttRSxTQUFTMkcsSUFBSSxPQUFRLFlBQWFvOUYsVUFBVWMsT0FBU2QsVUFBVWUsTUFDdEUsRUN2T0ssTUFBTVEsMkJBQTJCdHJCLFVBS3RDLGlCQUFBemhFLENBQW1CQyxNQUNqQjVkLE1BQU0yZCxrQkFBa0JDLE1BRW5CamEsS0FBS1YsUUFBUXF6RCxXQUVsQjE0QyxLQUNHdmEsS0FBSyx1QkFDTHN5QixPQUFNejFCLE9BQVN5RCxLQUFLaTlELGVBQWUxZ0UsTUFBTyxZQUM3QzBkLEtBQ0d2YSxLQUFLLGdCQUNMc3lCLE9BQU16MUIsT0FBU3lELEtBQUswN0UsY0FBY24vRSxNQUFPLFlBQzlDLENBRUEsYUFBTTIyQixDQUFTMzJCLE1BQU84QixLQUFPLFFBQVMyOUUsZUFBaUIsVUFDckR6L0UsTUFBTUUsaUJBQ05GLE1BQU1raEUsa0JBRU4sTUFBTW5xQyxlQUFpQjFyQixjQUFjMnJCLHFCQUFxQmgzQixNQUFPLFFBRWpFLElBQUkyL0UsU0FBVyxFQUNmLE1BQU1ybUQsV0FBYTcxQixLQUFLaUcsS0FBS2xLLE9BQU9pZ0YsZ0JBQWtCcDlFLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPaWdGLGlCQUFtQixHQUNsSCxJQUFLLE1BQU0vMUUsUUFBUXF0QixTQUNacnRCLE1BQVNBLEtBQUtsSyxRQUNkLENBQUNzQyxNQUFNMkUsU0FBU2lELEtBQUs1SCxTQUdyQjhHLFNBQVM0QyxVQUFVOUIsT0FDbEI0dkIsV0FBV24yQixNQUFLeTRDLElBQU1BLEdBQUcvaEQsT0FBUzZQLEtBQUs3UCxTQUs1QixJQUFiOGxGLFdBQ0ZBLGVBQWlCZixVQUFVenFFLFVBRTdCbWxCLFdBQVczK0IsS0FBS2lrRixVQUFVRyxZQUFZWSxTQUFVajJFLGVBRTVDakcsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsQ0FBQyxVQUFVODlFLGtCQUFtQm5tRCxZQUN6RCxDQUVBLG9CQUFNb25DLENBQWdCMWdFLE1BQU95L0UsZUFBaUIsU0FDNUN6L0UsTUFBTUUsaUJBQ04sTUFBTUcsR0FBS2t2QixFQUFFdnZCLE1BQU1JLGVBQWUwZ0UsUUFBUSxTQUNwQ3AzRCxLQUFPakcsS0FBS2lHLEtBQUtsSyxPQUFPaWdGLGdCQUFnQnQ4RSxNQUFLekosR0FDMUNBLEVBQUVvOEMsTUFBUXoxQyxHQUFHMEksS0FBSyxhQUUzQixJQUFLVyxLQUNILE9BRUYsTUFBTTVDLGVBQWlCbUssV0FBV0MsV0FDaEN4SCxLQUFLbEssT0FBT3VSLFlBQVlwWCxNQUN4QixDQUNFb00sT0FBTyxFQUNQaTlELFFBQVN2L0QsS0FBS2lHLEtBQUswc0QsV0FLdkIsR0FBSS8xRCxHQUFHNGlFLFNBQVMsWUFBYSxDQUMzQixNQUFNQyxRQUFVN2lFLEdBQUc4ZCxTQUFTLGlCQUM1QitrRCxRQUFRakMsUUFBUSxLQUFLLElBQU1pQyxRQUFRejhDLFVBQ3JDLEtBQU8sQ0FDTCxNQUFNMDhDLElBQU01ekMsRUFBRSw2QkFBNkJ6b0Isa0JBQ3JDcUssTUFBUW9lLEVBQUUsdUNBRWhCNHpDLElBQUk5dEIsT0FBT2xrQyxPQUNYOVEsR0FBR2cxQyxPQUFPOHRCLElBQUlFLFFBQ2RGLElBQUlHLFVBQVUsSUFDaEIsQ0FDQWpqRSxHQUFHNGpDLFlBQVksV0FDakIsQ0FFQSxtQkFBTWs3QyxDQUFlbi9FLE1BQU95L0UsZUFBaUIsU0FDM0MsTUFBTS8xRSxLQUFPNmxCLEVBQUV2dkIsTUFBTUksZUFBZUUsUUFBUSxTQUN0Q3lYLE9BQVNyTyxLQUFLWCxLQUFLLFdBQ25CNjJFLE1BQVFsMkUsS0FBS1gsS0FBSyxTQUNsQjgyRSxVQUFZcDhFLEtBQUtpRyxLQUFLbEssT0FBT2lnRixnQkFBZ0IzakMsV0FBVTczQixHQUFNbE0sUUFBVWtNLEVBQUU2eEIsTUFBUS85QixRQUFZNm5FLE9BQVMzN0QsSUFBTTI3RCxRQUNsSCxHQUFJQyxXQUFhLEVBQUcsQ0FDbEIsTUFBTXZtRCxXQUFhNzFCLEtBQUtpRyxLQUFLbEssT0FBT2lnRixnQkFBa0JwOUUsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLaUcsS0FBS2xLLE9BQU9pZ0YsaUJBQW1CLEdBQ2xIbm1ELFdBQVdhLE9BQU8wbEQsVUFBVyxTQUN2QnA4RSxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxDQUFDLFVBQVU4OUUsa0JBQW1Cbm1ELFlBQ3pELENBQ0YsQ0FFQSx5QkFBV3BjLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxRQUFTLGNBQzNCQyxTQUFVLDhDQUNWRSxNQUFPLElBQ1BDLE9BQVEsSUFDUjZXLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFVBQzNCd3ZDLFFBQVMsQ0FBQyxvQkFDVnR2QyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGlCQUlqQixDQUVBLGlCQUFBcW1DLEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxDQUVBLGFBQU05akMsR0FDSixNQUFNQyxVQUFZLzBCLE1BQU04MEIsVUFFeEJDLFVBQVVpckQsVUFBb0MsSUFBekJyOEUsS0FBS2lHLEtBQUtxMkUsV0FFL0IsTUFBTS9oQyxvQkFBc0IsR0FDNUIsSUFBSyxNQUFPMStDLElBQUt5WixZQUFhMVYsT0FBTzJLLFFBQ25DNm1CLFVBQVU5ckIsS0FBS3ZKLE9BQU93K0MscUJBRXRCLEdBQUlqbEMsU0FBVSxDQUNaLE1BQU0weEYsV0FBYTFwRyxLQUFLQyxLQUFLQyxTQUFTLFVBQVUzQixJQUFJK1QsaUJBQ3BEMnFDLG9CQUFvQnJqRCxLQUFLOHZHLFdBQzNCLENBR0Y1MUUsVUFBVXNyRCwrQkFBaUNsdkUsV0FBV0MsV0FDcEQyakIsVUFBVTlyQixLQUFLdkosT0FBT3VSLFlBQVlwWCxNQUNsQyxDQUNFb00sT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVa3dDLGdDQUFrQzl6RCxXQUFXQyxXQUNyRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWWkwRCxPQUNsQyxDQUNFai9ELE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVTYxRSxtQ0FBcUN6NUYsV0FBV0MsV0FDeEQyakIsVUFBVTlyQixLQUFLdkosT0FBT3drRixxQkFDdEIsQ0FDRWorRSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVU4MUUsOEJBQWdDMTVGLFdBQVdDLFdBQ25EMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU95a0YsZ0JBQ3RCLENBQ0VsK0UsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVOXJCLEtBQUt2SixPQUFPOG5CLGFBQWV2bUIsS0FBS3ZCLE9BQU9tbkIsSUFBSUMsTUFBTWkyQixnQkFBZ0IsQ0FBRTlZLFNBQVVsUCxVQUFVOXJCLEtBQUt2SixPQUFPOG5CLFNBQzdHdU4sVUFBVXd6QyxlQUF5RCxJQUF4Q3h6QyxVQUFVOXJCLEtBQUt2SixPQUFPOG5CLE9BQU9qakIsT0FFeER3d0IsVUFBVTlyQixLQUFLdkosT0FBTzhuQixPQUFPMVgsS0FBS3ZFLGNBQWN3RSxlQUVoRGdsQixVQUFVKzFFLDBCQUE0QixHQUN0QyxNQUFNcHFCLFNBQVcsSUFBSXovRSxLQUFLQyxLQUFLQyxTQUFTLGNBZXhDLE9BZEkrOEMsb0JBQW9CMzVDLFNBQ3RCd3dCLFVBQVUrMUUsMkJBQTZCNXNELG9CQUFvQmwyQyxLQUFLMDRFLFdBR2xFM3JELFVBQVVvckQsZUFBaUIsR0FFM0JwckQsVUFBVW9yRCxlQUFldGxGLEtBQ3ZCLEdBQUdvRyxLQUFLQyxLQUFLQyxTQUFTLHdCQUF3QjR6QixVQUFVOXJCLEtBQUt2SixPQUFPMG5FLFdBRXRFcnlDLFVBQVVvckQsZUFBZXRsRixLQUN2QixHQUFHb0csS0FBS0MsS0FBS0MsU0FBUyx3QkFBd0I0ekIsVUFBVTlyQixLQUFLdkosT0FBTytoRCxlQUd0RTFzQixVQUFVZ0csU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBQ3hCNm9CLFNBQ1QsRUMzTEssTUFBTWcyRSxzQkFBc0IzckIsVUFDakMseUJBQVdoaUUsR0FDVCxPQUFPN2EsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNb2QsZUFBZ0IsQ0FDckRHLFNBQVUsOENBQ1ZELFFBQVMsQ0FBQyxPQUFRLE9BQVEsUUFDMUJHLE1BQU8sSUFDUEMsT0FBUSxPQUNSNm5ELFdBQVcsRUFDWGh4QyxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUFXQyxhQUFjLE9BQ3BEdXZDLFFBQVMsQ0FBQyxTQUNWdHZDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGNBQ2JDLGdCQUFpQixRQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQXFtQyxHQUNFLE1BQU10QyxjQUFnQjU0RCxNQUFNazdELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlajFELE1BQ2xDaTFELGFBQ1QsQ0FFQSxhQUFNOWpDLEdBQ0osTUFBTUMsVUFBWS8wQixNQUFNODBCLFVBa0N4QixPQWpDQUMsVUFBVXk2RCxlQUFpQjdyRixLQUFLaUcsS0FBS2xLLE9BQU84dkYsZUFDNUN6NkQsVUFBVWdHLFNBQVc5NUIsS0FBS3NHLEtBQUsyRSxLQUMvQjZvQixVQUFVb0ksUUFBVXg1QixLQUFLaUcsS0FBS3V6QixRQUM5QnBJLFVBQVVpMkUsY0FBZ0JybkcsS0FBS3FuRyxjQUMvQmoyRSxVQUFVazJFLFdBQW9ELFVBQWpDdG5HLEtBQUtpRyxLQUFLK2xGLGtCQUN2QzU2RCxVQUFVbTJFLGVBQWlCdm5HLEtBQUtpRyxLQUFLbEssT0FBT3V5RSxNQUFNRCxXQUFhcnVFLEtBQUtpRyxLQUFLbEssT0FBT3V5RSxNQUFNSCxVQUN0Ri84QyxVQUFVaXJELFVBQW9DLElBQXpCcjhFLEtBQUtpRyxLQUFLcTJFLFdBQy9CbHJELFVBQVVvMkUsZUFBb0QsSUFBbkN4bkcsS0FBS2lHLEtBQUtsSyxPQUFPd3hFLE9BQU8zc0UsT0FFbkR3d0IsVUFBVXNyRCwrQkFBaUNsdkUsV0FBV0MsV0FDcEQyakIsVUFBVTlyQixLQUFLdkosT0FBT3VSLFlBQVlwWCxNQUNsQyxDQUNFb00sT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVa3dDLGdDQUFrQzl6RCxXQUFXQyxXQUNyRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWWkwRCxPQUNsQyxDQUNFai9ELE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVXEyRSxzQkFBd0JqNkYsV0FBV0MsV0FDM0MyakIsVUFBVTlyQixLQUFLdkosT0FBTzBVLFFBQ3RCLENBQ0VuTyxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSWhCdmhDLFNBQ1QsQ0FFQSxpQkFBSWkyRSxHQUNGLElBQUkxMUQsT0FBUyxFQUNiLE1BQU00N0IsT0FBU3Z0RSxLQUFLaUcsS0FBS2xLLE9BQU93eEUsT0FDaEMsSUFBSyxNQUFNb0YsU0FBU3BGLE9BQ2RvRixNQUFNNTJFLE9BQU8ydkYsU0FBUy81QyxTQUU1QixNQUFPLEdBQUdBLFlBQVk0N0IsT0FBTzNzRSxRQUMvQixDQUVBLGlCQUFBb1osQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFDeEJBLEtBQUt2YSxLQUFLLDRCQUE0QnN5QixPQUFNejFCLFFBQzFDQSxNQUFNRSxpQkFDTnVELEtBQUtpRyxLQUFLMGxGLHVCQUFzQixJQUVsQzF4RSxLQUFLdmEsS0FBSyxpQkFBaUJzeUIsT0FBTXoxQixPQUFTeUQsS0FBSzBuRyxVQUFVbnJHLFNBQ3pEMGQsS0FBS3ZhLEtBQUssZUFBZXN5QixPQUFNejFCLE9BQVN5RCxLQUFLMm5HLGVBQWVwckcsU0FDNUQwZCxLQUFLdmEsS0FBSyxlQUFlc3lCLE9BQU16MUIsT0FBU3lELEtBQUsybkcsZUFBZXByRyxTQUM1RDBkLEtBQUt2YSxLQUFLLGdCQUFnQnN5QixPQUFNejFCLFFBQzlCLE1BQU0yUixHQUFLNGQsRUFBRXZ2QixNQUFNSSxlQUFlMGdFLFFBQVEsTUFBTS8zRCxLQUFLLE1BQ3JEdEYsS0FBS2lHLEtBQUtnbkYscUJBQXFCLytFLEdBQUUsSUFFbkMrTCxLQUFLdmEsS0FBSyxtQ0FBbUM5RCxRQUFPVyxRQUNsRCxNQUFNckcsTUFBUStOLFNBQVMxSCxNQUFNSSxjQUFjekcsT0FDM0M4SixLQUFLaUcsS0FBSzJsRixlQUFlLFFBQVMxMUYsTUFBSyxJQUV6QytqQixLQUFLdmEsS0FBSyxzQkFBc0JzeUIsT0FBTSxLQUNwQ2h5QixLQUFLaUcsS0FBSzJsRixlQUFlLFdBQVUsSUFFckMzeEUsS0FBS3ZhLEtBQUssc0JBQXNCc3lCLE9BQU0sS0FDcENoeUIsS0FBS2lHLEtBQUsybEYsZUFBZSxXQUFVLElBRXJDM3hFLEtBQUt2YSxLQUFLLG9CQUFvQnN5QixPQUFNejFCLFFBQ2xDeUQsS0FBSzRuRyxrQkFBa0JyckcsTUFBTyxNQUFLLElBRXJDMGQsS0FBS3ZhLEtBQUssdUJBQXVCOUQsUUFBT1csUUFDdEN5RCxLQUFLNG5HLGtCQUFrQnJyRyxNQUFPLFNBQVEsSUFFeEMwZCxLQUFLdmEsS0FBSyxvQkFBb0JzeUIsT0FBTSxLQUNsQ2h5QixLQUFLaUcsS0FBSyttRixlQUFjLElBRTFCL3lFLEtBQUt2YSxLQUFLLHVCQUF1QnN5QixPQUFNejFCLFFBQ3JDeUQsS0FBSzRuRyxrQkFBa0JyckcsTUFBTyxTQUFRLElBRXhDMGQsS0FBS3ZhLEtBQUssV0FBV3N5QixPQUFNejFCLE9BQVN5RCxLQUFLNm5HLFdBQVd0ckcsUUFDdEQsQ0FFQSxvQkFBTW9yRyxDQUFnQnByRyxPQUNwQkEsTUFBTUUsaUJBQ04sTUFFTTRnQixNQUZVeU8sRUFBRXZ2QixNQUFNSSxlQUVGMGdFLFFBQVEsTUFBTS8zRCxLQUFLLFNBQ3pDLGFBQWF0RixLQUFLaUcsS0FBS3dsRixZQUFZcHVFLE1BQ3JDLENBT0EsZUFBTXFxRixDQUFXbnJHLE9BQ2YsSUFBS2UsS0FBS3NHLEtBQUsyRSxLQUFNLE9BQ3JCaE0sTUFBTUUsaUJBQ04sTUFFTTRnQixNQUZVeU8sRUFBRXZ2QixNQUFNSSxlQUVGMGdFLFFBQVEsTUFBTS8zRCxLQUFLLFNBRW5DaW9FLE9BQVN2dEUsS0FBS2lHLEtBQUtsSyxPQUFPd3hFLE9BQzVCM3VFLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPd3hFLFFBQ3pDLEdBRUosT0FESWx3RCxPQUFTLEdBQUdrd0QsT0FBTzcyQyxPQUFPclosTUFBTyxTQUN4QnJkLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLGdCQUFpQnF2RSxRQUNuRCxDQVFBLGFBQU1yNkMsQ0FBUzMyQixNQUFPOEIsS0FBTyxTQUMzQjlCLE1BQU1FLGlCQUVORixNQUFNa2hFLGtCQUVOLE1BQU1ucUMsZUFBaUIxckIsY0FBYzJyQixxQkFBcUJoM0IsTUFBTyxRQUUzRGd4RSxPQUFTLEdBQ2YsSUFBSyxNQUFNdG5FLFFBQVFxdEIsU0FDWnJ0QixNQUFTLENBQUMsUUFBUyxTQUFTakQsU0FBU2lELEtBQUs1SCxRQUM3QixVQUFkNEgsS0FBSzVILEtBQ1BrdkUsT0FBT3IyRSxLQUFLK08sTUFDVyxVQUFkQSxLQUFLNUgsTUFBb0IyQixLQUFLaUcsS0FBS2xLLE9BQU9zQyxLQUFLL0UsT0FDeEQwRyxLQUFLNG5HLGtCQUFrQixLQUFNLE1BQU8sQ0FBRXh4RyxLQUFNNlAsS0FBSzdQLGNBRy9DNEosS0FBS2lHLEtBQUt1bEYsVUFBVWplLE9BQzVCLENBUUEsVUFBQXM2QixDQUFZdHJHLE9BQ1ZBLE1BQU1FLGlCQUVORixNQUFNa2hFLGtCQUVOLE9BRHFCM3hDLEVBQUV2dkIsTUFBTUksZUFDVG9uRyxPQUFPOWxFLFFBQVEsUUFDckMsQ0FTQSx1QkFBTTJwRSxDQUFtQnJyRyxNQUFPaTJCLEtBQU1sekIsUUFBVSxDQUFDLEdBRS9DLElBQUkrZCxNQUFRLEtBQ1I3TCxRQUFVLEtBQ1ZqVixRQUNGQSxNQUFNRSxpQkFDTitVLFFBQVVzYSxFQUFFdnZCLE1BQU1JLGVBRWxCMGdCLE1BQVE3TCxRQUFRNnJELFFBQVEsTUFBTS8zRCxLQUFLLFVBR3JDLE1BQU11ZSxPQUFTN2pCLEtBQUtpRyxLQUFLbEssT0FBT3N3RixNQUFNTSxPQUNsQy90RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT3N3RixNQUFNTSxRQUMvQyxHQUNKLE9BQVFuNkQsTUFDTixJQUFLLE1BRUgzTyxPQUFPM3NCLEtBQUssQ0FFVmQsS0FBTWtKLFFBQVFsSixNQUFRa0gsS0FBS0MsS0FBS0MsU0FBUyxxQkFFekN0SCxNQUFPLGdCQUVULE1BQ0YsSUFBSyxTQUVIMnRCLE9BQU94RyxPQUFTLENBQ2RqbkIsS0FBTW9iLFFBQVF3dUQsR0FBRyxTQUFXeHVELFFBQVFvd0IsTUFBUS9kLE9BQU94RyxPQUFPam5CLEtBQzFERixNQUFPc2IsUUFBUXd1RCxHQUFHLFVBQVl4dUQsUUFBUW93QixNQUFRL2QsT0FBT3hHLE9BQU9ubkIsT0FFOUQsTUFDRixJQUFLLFNBRUNtbkIsT0FBUyxHQUFHd0csT0FBTzZTLE9BQU9yWixNQUFPLEdBRXpDLGFBQWFyZCxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxzQkFBdUIybEIsUUFDekQsRUM1TkssTUFBTWlrRiwyQkFBMkJ4d0MsV0FLdEMseUJBQVc3OUMsR0FDVCxPQUFPN2EsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNb2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFBUyxXQUNwQ0MsU0FBVSxtREFDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1I2VyxTQUFVLENBQUMsQ0FBRUMsYUFBYyxRQUFTQyxhQUFjLE9BQ2xEQyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxhQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsV0FJakIsQ0FFQSxhQUFNZ0MsQ0FBUzMyQixPQUNiQSxNQUFNRSxpQkFDTkYsTUFBTWtoRSxrQkFFTixNQUFNbnFDLGVBQWlCMXJCLGNBQWMyckIscUJBQXFCaDNCLE1BQU8sUUFDakUsSUFBS3lELEtBQUtWLFFBQVFxekQsU0FDaEIsT0FFRixNQUFNeGtELE1BQVFuTyxLQUFLL0YsTUFBTWtVLE1BQU1nbkMsWUFBYyxHQUM3QyxJQUFLLE1BQU1sdkMsUUFBUXF0QixTQUNacnRCLE1BQVNBLEtBQUtsSyxRQUdkLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVWlILFNBQVNpRCxLQUFLNUgsT0FHdkQ4UCxNQUFNalgsS0FBSytPLEtBQUtrdkMsa0JBRVpuMUMsS0FBSy9GLE1BQU1pRSxPQUFPLENBQUVpUSxPQUM1QixDQUVBLFlBQUFvc0QsR0FBaUIsQ0FFakIsaUJBQUFoRCxHQUNFLE1BQU10QyxjQUFnQjU0RCxNQUFNazdELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlajFELE1BQ2xDaTFELGFBQ1QsQ0FFQSxhQUFNOWpDLEdBQ0osTUFBTUMsZ0JBQWtCLzBCLE1BQU04MEIsVUFNOUIsR0FKQUMsVUFBVWdHLFNBQVc5NUIsS0FBS3NHLEtBQUsyRSxLQUMvQjZvQixVQUFVdWhDLFNBQVczeUQsS0FBS21rQixXQUUxQmlOLFVBQVV1bUMsWUFBYyxDQUFDLEVBQ3JCdm1DLFVBQVVqakIsTUFBTyxDQUNuQixJQUFLLE1BQU1sSSxRQUFRbXJCLFVBQVVqakIsTUFFeEJ2TyxPQUFPQyxVQUFVQyxlQUFlakgsS0FDL0J1NEIsVUFBVXVtQyxZQUNWMXhELEtBQUs1SCxRQUdQK3lCLFVBQVV1bUMsWUFBWTF4RCxLQUFLNUgsTUFBUSxJQUVyQyt5QixVQUFVdW1DLFlBQVkxeEQsS0FBSzVILE1BQU1uSCxLQUFLK08sTUFFeEMsSUFBSyxNQUFNb3pELFlBQVlqb0MsVUFBVXVtQyxZQUMvQnZtQyxVQUFVdW1DLFlBQVkwQixVQUFVbHRELEtBQUt2RSxjQUFjd0UsY0FFdkQsQ0E4Q0EsT0E1Q0FnbEIsVUFBVThtQyxZQUMrQyxXQUF2RDU2RCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwwQkFDMUJJLEtBQUtzRyxLQUFLMkUsS0FFWjZvQixVQUFVMm9DLG1CQUNSbjZELE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLdTRCLFVBQVV1bUMsWUFBYSxVQUMzRHZtQyxVQUFVOXJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLE9BQy9CaW9CLFVBQVU0b0MsbUJBQ1JwNkQsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUt1NEIsVUFBVXVtQyxZQUFhLFVBQzNEdm1DLFVBQVU5ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FDL0Jpb0IsVUFBVTZvQyxvQkFDUnI2RCxPQUFPQyxVQUFVQyxlQUFlakgsS0FBS3U0QixVQUFVdW1DLFlBQWEsV0FDM0R2bUMsVUFBVTlyQixLQUFLdkosT0FBT21ELE1BQU1pSyxPQUMvQmlvQixVQUFVOG9DLHFCQUNSdDZELE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLdTRCLFVBQVV1bUMsWUFBYSxZQUMxRHZtQyxVQUFVOXJCLEtBQUt2SixPQUFPbUQsTUFBTWlLLFFBQzVCN0wsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQzlCazBCLFVBQVVncEMscUJBQ1J4NkQsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUt1NEIsVUFBVXVtQyxZQUFhLFlBQzNEdm1DLFVBQVU5ckIsS0FBS3ZKLE9BQU9tRCxNQUFNaUssT0FFL0Jpb0IsVUFBVWd3QyxhQUNSaHdDLFVBQVUyb0Msb0JBQ1Yzb0MsVUFBVTRvQyxvQkFDVjVvQyxVQUFVNm9DLHFCQUNWN29DLFVBQVU4b0Msc0JBQ1Y5b0MsVUFBVWdwQyxxQkFFWmhwQyxVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUloQnZoQyxTQUNULENBRUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUV4QkEsS0FBS3ZhLEtBQUssY0FBY3N5QixPQUFNb3JDLEtBQzVCLE1BQU14Z0UsR0FBS2t2QixFQUFFc3hDLEdBQUd6Z0UsZUFBZTBnRSxRQUFRLFNBQzFCcjlELEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUlOLEdBQUcwSSxLQUFLLFdBQ3JDdkgsTUFBTUMsUUFBTyxFQUFJLElBR3hCaWMsS0FBS3ZhLEtBQUsscUJBQXFCc3lCLE1BQU1oeUIsS0FBSzA2RCxtQkFBbUJ6aEUsS0FBSytHLE9BRWxFaWEsS0FBS3ZhLEtBQUssZUFBZXN5QixNQUFNaHlCLEtBQUswOUQsYUFBYXprRSxLQUFLK0csT0FDdERpYSxLQUFLdmEsS0FBSyxnQkFBZ0JzeUIsTUFBTWh5QixLQUFLaTlELGVBQWVoa0UsS0FBSytHLE9BRXpEaWEsS0FBS3ZhLEtBQUssZ0JBQWdCc3lCLE9BQU0xdkIsV0FDOUIsTUFBTTFGLEdBQUtrdkIsRUFBRXN4QyxHQUFHemdFLGVBQWUwZ0UsUUFBUSxTQUNqQ0MsYUFBZXQ5RCxLQUFLL0YsTUFBTWtVLE1BQU1qUixJQUFJTixHQUFHMEksS0FBSyxVQUFXLENBQzNEaTRELFFBQVEsVUFFSkQsYUFBYXIvRCxTQUNuQnJCLEdBQUc0Z0UsUUFBUSxLQUFLLElBQU14OUQsS0FBS2hDLFFBQU8sSUFBTSxJQUcxQ2ljLEtBQUt2YSxLQUFLLGFBQWFzeUIsT0FBTW9yQyxLQUMzQixPQUFRQSxHQUFHemdFLGNBQWNJLFFBQVFzQixNQUMvQixJQUFLLE9BQ0gyQixLQUFLL0YsTUFBTW84QyxnQkFBZ0IrbUIsSUFDM0IsTUFDRixJQUFLLE9BQ0hwOUQsS0FBSy9GLE1BQU0yOEMsZ0JBQWdCd21CLElBQzNCLE1BQ0YsSUFBSyxRQUNIcDlELEtBQUsvRixNQUFNMDhDLGlCQUFpQnltQixJQUM1QixNQUNGLElBQUssUUFDSHA5RCxLQUFLL0YsTUFBTXU4QyxpQkFBaUI0bUIsSUFDNUIsTUFDRixJQUFLLFNBQ0hwOUQsS0FBSy9GLE1BQU00OEMsa0JBQWtCdW1CLElBRWpDLElBR0ZuakQsS0FBS3ZhLEtBQUssU0FBU3N5QixNQUFNaHlCLEtBQUsrNkQsZUFBZTloRSxLQUFLK0csTUFDcEQsQ0FFQSxvQkFBTSs2RCxDQUFnQngrRCxPQUNwQkEsTUFBTUUsaUJBQ04sTUFBTTJpRSxTQUFXcC9ELEtBQUsvRixNQUFNa1AsT0FDNUJuSixLQUFLL0YsTUFBTWtQLFFBQVVpMkQsUUFDdkIsQ0FFQSxrQkFBTTFCLENBQWNuaEUsT0FDbEIsTUFBTUssR0FBS2t2QixFQUFFdnZCLE1BQU1JLGVBQWUwZ0UsUUFBUSxTQUNwQ3AzRCxLQUFPakcsS0FBSy9GLE1BQU1rVSxNQUFNalIsSUFBSU4sR0FBRzBJLEtBQUssV0FDMUMsSUFBSW1MLFFBQVUsTUFBUW5ULEtBQUtDLEtBQUtDLFNBQVMsa0NBQ3pDLE1BQU1zUyxRQUFVLENBQ2Q4dUQsVUFBVzUrRCxLQUFLL0YsTUFBTWlVLEdBQ3RCckIsTUFBTyxLQUNQZ3lELFFBQVM3K0QsS0FBSy9GLE1BQU1pVSxHQUNwQmpJLEtBQU1BLEtBQUtpSSxJQUVUbE8sS0FBS2lSLE9BQU9oWCxRQUNkNlYsUUFBUTh1RCxVQUFZNStELEtBQUtpUixNQUFNL0MsR0FDL0I0QixRQUFRakQsTUFBUTdNLEtBQUtpUixNQUFNbEgsT0FBT21FLElBRXBDLE1BQU12QixPQUFTclAsS0FBS3FQLE9BQU90VyxRQUFPbUssSUFDaEMsSUFBSyxDQUFDLFlBQWEsTUFBTyxXQUFZLGFBQWF3QyxTQUFTeEMsRUFBRW5DLE1BQzVELE9BQU8sRUFFVCxHQUFJMkIsS0FBSy9GLE1BQU1pVSxLQUFPMU4sRUFBRTBOLEdBQ3RCLE9BQU8sRUFFVCxJQUFJNHdELFNBQVUsRUFDZCxJQUFLLE1BQU81dkQsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRL0osRUFBRThhLFdBQzFCLFlBQU5wTSxHQUFtQkEsSUFBTTVSLEtBQUtzRyxLQUFLc0ssS0FDckM0d0QsUUFDRUEsU0FDQW4vRCxJQUFNd1EsTUFBTXFMLDBCQUEwQnVqRCxNQUc1QyxPQUFPRCxXQUVUcnVELFNBQW9CLDZDQUNwQixJQUFLLE1BQU14VyxTQUFTMFMsT0FDbEI4RCxRQUNFQSxRQUFVLGtCQUFvQnhXLE1BQU1pVSxHQUFLLEtBQU9qVSxNQUFNN0QsS0FBTyxZQUVqRXFhLFNBQW9CLDZCQUNkZ2tCLE9BQU84UCxPQUFPLENBQ2xCNzFCLE1BQU9wUixLQUFLQyxLQUFLQyxTQUFTLHVDQUMxQmlULFFBQ0Fra0IsU0FBVTFhLE9BQ1IsTUFBTTBZLFNBQVcsSUFBSWlDLFNBQVMzYSxLQUFLLEdBQUdyRyxjQUFjLGdCQUNwRCxJQUFLLE1BQU94ZCxLQUFNRixTQUFVeThCLFNBQ2IsU0FBVHY4QixPQUNGMFosUUFBUSt1RCxRQUFVM29FLE1BRXRCLFVBR0VvSCxLQUFLNjBDLFdBQVdDLFlBQVksZ0JBQWlCdGlDLFFBQ3JELENBRUEsb0JBQU1tdEQsQ0FBZ0IxZ0UsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtrdkIsRUFBRXZ2QixNQUFNSSxlQUFlMGdFLFFBQVEsU0FDcENwM0QsS0FBT2pHLEtBQUsvRixNQUFNa1UsTUFBTWpSLElBQUlOLEdBQUcwSSxLQUFLLFlBQ3BDakMsZUFBaUI0QyxLQUFLa0gsWUFBWSxDQUFFb3lELFFBQVN2L0QsS0FBSy9GLE1BQU11L0IsVUFHOUQsR0FBSTU4QixHQUFHNGlFLFNBQVMsWUFBYSxDQUMzQixNQUFNQyxRQUFVN2lFLEdBQUc4ZCxTQUFTLGlCQUM1QitrRCxRQUFRakMsUUFBUSxLQUFLLElBQU1pQyxRQUFRejhDLFVBQ3JDLEtBQU8sQ0FDTCxNQUFNMDhDLElBQU01ekMsRUFBRSxvQ0FFUnZlLE9BQVN1ZSxFQUFFLG1DQUNqQixJQUFLLE1BQU1sZSxLQUFLdkssU0FBU2tLLE9BQ3ZCQSxPQUFPcWtDLE9BQ0wsb0RBQW9EaGtDLEVBQUV4WCwwQ0FBMEN3WCxFQUFFMVgsc0JBUXRHLEdBTEF3cEUsSUFBSTl0QixPQUFPcmtDLFFBRVhteUQsSUFBSTl0QixPQUNGOWxCLEVBQUUsaUNBQWlDem9CLFNBQVNpSyxZQUFZcFgsZ0JBRXREK1AsS0FBS2xLLE9BQU84SyxZQUFZdE8sS0FBTSxDQUNoQyxNQUFNb25FLFdBQWE3ekMsRUFDakIsNkJBQTZCem9CLFNBQVNpSyxZQUFZdFcsaUJBRXBEMG9FLElBQUk5dEIsT0FBTyt0QixXQUNiLENBRUEsTUFBTWp5RCxNQUFRb2UsRUFBRSx1Q0FDaEIsSUFBSyxNQUFNbGUsS0FBS3ZLLFNBQVN3RCxXQUN2QjZHLE1BQU1ra0MsT0FDSixrQ0FBa0N0MEMsS0FBS0MsS0FBS0MsU0FBU29RLFlBR3pEOHhELElBQUk5dEIsT0FBT2xrQyxPQUVYOVEsR0FBR2cxQyxPQUFPOHRCLElBQUlFLFFBQ2RGLElBQUlHLFVBQVUsSUFDaEIsQ0FDQWpqRSxHQUFHNGpDLFlBQVksV0FFakIsQ0FFQSxrQkFBQWs2QixDQUFvQm4rRCxPQUNsQkEsTUFBTUUsaUJBQ05xdkIsRUFBRXZ2QixNQUFNSSxlQUFlZzRELFNBQVMsTUFBTW96QyxZQUFZLElBQ3BELEVDalJLLE1BQU1DLHFDQUFxQ3h1RixnQkFDaEQseUJBQVdDLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JEL0ssTUFBT3BSLEtBQUtDLEtBQUtDLFNBQVMsd0JBQzFCb2MsU0FBVSw4REFDVkQsUUFBUyxDQUFDLE9BQVEsU0FBVSw4QkFDNUJnNUMsVUFBVSxFQUNWaVAsV0FBVyxFQUNYblAsZ0JBQWdCLEVBQ2hCNTRDLGVBQWUsRUFDZkMsTUFBTyxJQUNQQyxPQUFRLFFBRVosQ0FFQSxpQkFBQUMsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFFSSxJQUFJNGhFLFNBQVMsQ0FDdkMvcUQsYUFBYyxrQkFDZG0zRSxZQUFhLENBQUVsc0IsS0FBTXorRSxLQUFLc0csS0FBSzJFLE1BQy9CdXpFLFVBQVcsQ0FBRUMsS0FBTS83RSxLQUFLa29HLG1CQUFtQmp2RyxLQUFLK0csU0FFOUIvRyxLQUFLZ2hCLEtBQUssSUFFQSxJQUFJNGhFLFNBQVMsQ0FDekNockQsYUFBYyxlQUNkbzNFLFlBQWEsQ0FDWEUsVUFBVzdxRyxLQUFLc0csS0FBSzJFLE1BRXZCdXpFLFVBQVcsQ0FDVHFzQixVQUFXbm9HLEtBQUtvb0csMEJBQTBCbnZHLEtBQUsrRyxTQUc3Qi9HLEtBQUtnaEIsS0FBSyxJQUVoQ0EsS0FBS3ZhLEtBQUssc0JBQXNCc3lCLE9BQU0xdkIsVUFDcEN0QyxLQUFLdVIsT0FBUyxDQUFDLEVBQ2Z2UixLQUFLeXNDLE9BQVMsV0FDUnpzQyxLQUFLaEMsUUFBTyxFQUFJLElBR3hCaWMsS0FBS3ZhLEtBQUssZUFBZXN5QixPQUFNMXZCLFVBQzdCdEMsS0FBS3VSLE9BQU91Z0YsUUFBVTl4RixLQUFLdVIsT0FBT3VnRixhQUM1Qjl4RixLQUFLaEMsUUFBTyxFQUFJLElBR3hCaWMsS0FBS3ZhLEtBQUssaUJBQWlCc3lCLE1BQU1oeUIsS0FBS3FvRyxVQUFVcHZHLEtBQUsrRyxNQUd2RCxDQUVBLCtCQUFNb29HLENBQTJCN3JHLE9BQy9CLE1BQU0rSSxLQUFPLENBQ1hqSCxLQUFNLFdBQ05nckYsTUFBT3JwRixLQUFLcXBGLE1BQ1pDLFNBQVUsbUJBRVovc0YsTUFBTTh4QixhQUFhQyxRQUFRLGFBQWMxZixLQUFLQyxVQUFVdkosTUFDMUQsQ0FFQSxhQUFNNnJCLEdBQ0osSUFBS254QixLQUFLdVIsT0FBTzAyRCxXQUFZLENBQzNCLE1BQU01NkMsS0FBTzZDLFNBQVNDLDhCQUE4Qnp3QixNQUNsRDB3QixHQUFlLFFBQVZBLEVBQUV2MEIsTUFFVG1FLEtBQUt1UixPQUFPMDJELFdBQWE1NkMsS0FBS2h3QixLQUloQyxDQUNBLElBQUsyQyxLQUFLdVIsT0FBTzJnRixXQUFZLENBQzNCLE1BQU1BLFdBQWFoaUUsU0FBU0MsOEJBQThCendCLE1BQ3hEMHdCLEdBQWUsUUFBVkEsRUFBRXYwQixNQUVUbUUsS0FBS3VSLE9BQU8yZ0YsV0FBYSxDQUN2Qjk3RixLQUFNODdGLFdBQVc3MEYsTUFPckIsQ0FFQTJDLEtBQUtzb0csc0JBT0wsTUFBTWhqRyxXQUFhakosTUFBTTgwQixVQUd6QixHQURBN3JCLEtBQUt5dkYsWUFBYyxJQUFJNUUsYUFBYW53RixLQUFLdVIsUUFDckNqTSxLQUFLaU0sT0FBTzJnRixXQUFXOTdGLE1BQVE0SixLQUFLL0YsTUFBTyxDQUM3QyxNQUFNaTRGLFdBQWFseUYsS0FBSy9GLE1BQU15RixLQUFLNEYsS0FBS2lNLE9BQU8yZ0YsV0FBVzk3RixNQUN0RDg3RixZQUNGNXNGLEtBQUtpTSxPQUFPMmdGLFdBQVcxdkMsTUFBUTB2QyxXQUFXaDhGLE1BQU1BLE1BQ2hEb1AsS0FBS2lqRyxvQkFBcUIsR0FFMUJqakcsS0FBS3l2RixZQUFZN0MsV0FBVzF2QyxRQUMzQnhpRCxLQUFLdVIsT0FBTzJnRixZQUFZMXZDLFFBRXpCbDlDLEtBQUtpTSxPQUFPMmdGLFdBQVcxdkMsTUFBUWw5QyxLQUFLeXZGLFlBQVk3QyxXQUFXMXZDLE1BRS9ELENBRUEsR0FBSWw5QyxLQUFLaU0sT0FBTzAyRCxZQUFjam9FLEtBQUsvRixNQUFPLENBQ3hDLE1BQU1ndUUsV0FBYWpvRSxLQUFLL0YsTUFBTXlGLEtBQUs0RixLQUFLaU0sT0FBTzAyRCxZQUMzQ0EsWUFDRjNpRSxLQUFLaU0sT0FBTzlhLElBQU13eEUsV0FBVy94RSxNQUFNQSxNQUNuQ29QLEtBQUtrakcsY0FBZSxHQUNmbGpHLEtBQUtpTSxPQUFPOWEsSUFBTTZPLEtBQUt5dkYsWUFBWTlzQixVQUM1QyxDQTRCQSxPQTFCQTNpRSxLQUFLckwsTUFBUStGLEtBQUsvRixNQUNsQnFMLEtBQUswdkYsTUFBUWgxRixLQUFLZzFGLE1BQ2xCMXZGLEtBQUtBLEtBQU90RixLQUFLc0YsS0FFakJBLEtBQUttakcsWUFBYyxDQUFDLEVBQ2hCem9HLEtBQUtnMUYsUUFDUDF2RixLQUFLb2pHLDZCQUNIMW9HLEtBQUtnMUYsTUFBTXlQLGtDQUdYemtHLEtBQUsvRixRQUNQcUwsS0FBS29qRyw2QkFBK0IsR0FDcEN4NEUsU0FBU0MsOEJBQThCclksU0FBUXNZLEdBQzdDOXFCLEtBQUtvakcsNkJBQTZCeHhHLEtBQUssR0FBR2s1QixFQUFFL3lCLFdBRTlDaUksS0FBS29qRyw2QkFBNkJ4eEcsS0FDaEMsR0FBR29HLEtBQUtDLEtBQUtDLFNBQVMsZ0JBRXhCOEgsS0FBS29qRyw2QkFBNkJ4eEcsS0FDaEMsR0FBR29HLEtBQUtDLEtBQUtDLFNBQVMsZUFFeEJ3QyxLQUFLL0YsTUFBTTRwQixPQUFPL0wsU0FBUTdoQixHQUN4QnFQLEtBQUtvakcsNkJBQTZCeHhHLEtBQUtqQixFQUFFRyxTQUl0Q2tQLElBQ1QsQ0FFQSxTQUFJMHZGLEdBSUYsT0FIS2gxRixLQUFLczRGLFNBQ1J0NEYsS0FBS3M0RixPQUFTMXdGLGNBQWNvSixVQUFVaFIsS0FBS3VSLE9BQU84bUYsWUFFN0NyNEYsS0FBS3M0RixNQUNkLENBRUEsU0FBSXIrRixHQUNGLE9BQUsrRixLQUFLdVIsT0FBT2tnRCxTQUNaenhELEtBQUt5c0MsU0FDUnpzQyxLQUFLeXNDLE9BQVM3a0MsY0FBY2lKLGdCQUFnQjdRLEtBQUt1UixPQUFPa2dELFVBRW5EenhELEtBQUt5c0MsUUFKcUIsSUFLbkMsQ0FFQSxtQkFBTS9aLENBQWVuMkIsTUFBT28yQixVQUMxQi96QixRQUFRQyxNQUFNNmEsWUFBWTFaLEtBQU0yeUIsZ0JBQzFCM3lCLEtBQUtoQyxRQUFPLEVBQ3BCLENBRUEsd0JBQU1rcUcsQ0FBb0IzckcsT0FDeEIsTUFBTW9zRyxXQUFhcHNHLE1BQU04eEIsYUFBYThDLFFBQVEsY0FDeENxZ0MsU0FBVzVpRCxLQUFLNGQsTUFBTW04RSxZQUV0QmwzQyxRQUFVN3BELGNBQWMycEQsNkJBQTZCQyxVQUUzRHh4RCxLQUFLdVIsT0FBT2tnRCxRQUFVQSxRQUd0Qnp4RCxLQUFLdVIsT0FBT3VnRixPQUE2RCxJQUFwRDl4RixLQUFLL0YsT0FBT3kxQixRQUFRcjVCLFFBQU9vdEIsSUFBTUEsRUFBRWxiLE9BQU0zSCxPQUMxRFosS0FBS3VSLE9BQU8yZ0YsV0FBV0MsdUJBQ2xCbnlGLEtBQUt1UixPQUFPMmdGLFdBQVdDLHFCQUcxQm55RixLQUFLaEMsUUFBTyxFQUNwQixDQUVBLHFCQUFNNHFHLENBQWlCaDhGLFFBQ0MsSUFBbEJBLE9BQU9oTSxRQUNUWixLQUFLdVIsT0FBT2tnRCxRQUFVN2tELE9BQU8sR0FBR2tDLFVBQVVuUixLQUUxQ3FDLEtBQUt1UixPQUFPdWdGLE9BQTZELElBQXBEOXhGLEtBQUsvRixPQUFPeTFCLFFBQVFyNUIsUUFBT290QixJQUFNQSxFQUFFbGIsT0FBTTNILE9BQzFEWixLQUFLdVIsT0FBTzJnRixXQUFXQyx1QkFDbEJueUYsS0FBS3VSLE9BQU8yZ0YsV0FBV0MscUJBRTFCbnlGLEtBQUtoQyxRQUFPLElBRWxCK0ssR0FBR0MsY0FBY3VLLEtBQUtqVyxLQUFLQyxLQUFLQyxTQUFTLDRCQUU3QyxDQUVBLGVBQU02cUcsQ0FBVzlyRyxPQUNmQSxNQUFNRSxpQkFHTixPQURlRixNQUFNSSxjQUFjSSxRQUFRSSxRQUV6QyxJQUFLLGVBQ0g2QyxLQUFLbWIsUUFDTCxNQUNGLElBQUssWUFDSCxDQUNFLE1BQU00NUUsWUFBYyxJQUFJNUUsYUFBYW53RixLQUFLdVIsUUFFMUMsR0FBSXZSLEtBQUtnMUYsTUFBTTdPLFFBQVMsQ0FDdEIsS0FDSTRPLFlBQVloQyxnQkFBa0JnQyxZQUFZaEMsZUFBaUIsR0FLN0QsWUFIQWhxRixHQUFHQyxjQUFjdUssS0FDZmpXLEtBQUtDLEtBQUtDLFNBQVMsd0NBSXZCLEdBQUl3QyxLQUFLc0YsS0FBS3VqRyx1QkFBd0IsQ0FDcEMsTUFBTWxXLFFBQVUzeUYsS0FBS2cxRixNQUFNMkgsbUJBQ3ZCN2dHLE1BQU1pNUYsWUFBWTNDLGVBQ3BCMkMsWUFBWXpvRCxJQUFNcW1ELFFBQVFQLGFBSzVCcHlGLEtBQUtzRixLQUFLd2pHLHFCQUFzQixDQUNsQyxDQUNGLE9BRU05b0csS0FBS2cxRixNQUFNb04sZUFBZXJOLFlBQWEsQ0FDM0NxRCxhQUFjcDRGLEtBQUt1UixPQUFPNm1GLGFBQzFCa0ssMkJBQTRCdGlHLEtBQUtzRixLQUFLd2pHLG9CQUN0QzVxRyxPQUFROEIsS0FBS3VSLE9BQU9yVCxTQUV0QjhCLEtBQUttYixPQUNQLENBQ0EsTUFFRixJQUFLLG1CQUNILENBQ0UsTUFBTTQ1RSxZQUFjLElBQUk1RSxhQUFhbndGLEtBQUt1UixRQUMxQyxHQUFJd2pGLFlBQVk3QyxXQUFXMkIsT0FBUSxDQUNqQyxNQUFNMXlGLEtBQU8sSUFBSTRTLFVBQ2pCZ2hGLFlBQVl6dkYsS0FBSzh2QixRQUFTLEVBQzFCajBCLEtBQUtsSCxNQUFRODZGLFlBQVk5NkYsTUFBTW1YLFNBQzNCMmpGLFlBQVk3QyxXQUFXNEIsd0JBQ25CM3lGLEtBQUsyOUIsbUJBQW1CaTJELFlBQVk3QyxXQUFXMEIsSUFBSS8zRixLQUN6RGs1RixZQUFZenZGLEtBQUs0c0YsV0FBV0MsZUFBaUJoeEYsS0FBS2lwRCxnQkFDekMycUMsWUFBWTdDLFdBQVcxb0MsU0FDaENyb0QsS0FBSzhHLE1BQVE4c0YsWUFBWTdDLFdBQVcwQixVQUM5Qnp5RixLQUFLQSxPQUNYNHpGLFlBQVl6dkYsS0FBSzRzRixXQUFXQyxlQUFpQmh4RixLQUFLaXBELGdCQUN6QzJxQyxZQUFZN0MsV0FBV3hvQyxvQkFDMUJ2b0QsS0FBSzA5QixjQUFjazJELFlBQVk3QyxXQUFXMEIsSUFBSS8zRixLQUNwRGs1RixZQUFZenZGLEtBQUs0c0YsV0FBV0MsZUFBaUJoeEYsS0FBS2lwRCxlQUV0RCxNQUFPLEdBQUkycUMsWUFBWTdDLFdBQVcxdkMsTUFBTyxDQUN2QyxNQUFNdGtDLFNBQVcsQ0FDZjFILFNBQVV1K0UsWUFBWTdDLFdBQVcxdkMsTUFDakN2MEIsWUFBYThtRSxZQUFZN0MsV0FBVzk3RixLQUNwQ216QyxVQUFXd3JELFlBQVkzK0YsS0FBTzIrRixZQUFZMytGLFVBQU95SCxHQUUvQ2szRixZQUFZeEUsV0FDZHJ5RSxTQUFTamtCLE1BQVE4NkYsWUFBWTk2RixNQUFNbVgsVUFFckMsTUFBTWpRLEtBQU80UyxVQUFVckQsT0FBT3dOLGdCQUN4Qi9jLEtBQUtBLE9BQ1g0ekYsWUFBWXp2RixLQUFLNHNGLFdBQVdDLGVBQWlCaHhGLEtBQUtpcEQsZUFDbEQycUMsWUFBWXp2RixLQUFLOHZCLFFBQVMsQ0FDNUIsQ0FFQXgyQixRQUFRQyxNQUFNNmEsWUFBWTFaLEtBQUt1UixPQUFRd2pGLFlBQVl6dkYsTUFDbkR0RixLQUFLaEMsUUFBTyxFQUNkLEVBT04sQ0FFQSxtQkFBQXNxRyxHQUNFLE1BQU12VCxZQUFjLElBQUk1RSxhQUFhbndGLEtBQUt1UixRQVExQyxHQVBLdlIsS0FBS3NGLE9BQU10RixLQUFLc0YsS0FBTyxDQUFDLEdBQzdCdEYsS0FBS3VSLE9BQU9raEYsVUFBVyxFQUN2Qnp5RixLQUFLdVIsT0FBTzg3QyxTQUFVLEVBQ3RCcnRELEtBQUtzRixLQUFLd2pHLHFCQUFzQixFQUNoQzlvRyxLQUFLc0YsS0FBS3lqRyxxQkFBc0IsRUFDaEMvb0csS0FBS3NGLEtBQUswakcsb0JBQXNCLEdBRTNCaHBHLEtBQUtzRixLQUFLdWpHLHVCQUF3QixDQUNyQyxNQUFNdE0sWUFBY3Y4RixLQUFLZzFGLE1BQU11SCxZQUN6QkMsY0FBZ0J4OEYsS0FBS2cxRixNQUFNd0gsY0FDM0I3SixRQUFVM3lGLEtBQUtnMUYsTUFBTTJILG1CQUV2QjVILFlBQVkzQyxZQUFjTyxTQUFTUCxhQUNyQ3B5RixLQUFLc0YsS0FBS3dqRyxxQkFBc0IsRUFDaEMvVCxZQUFZaEMsZUFBaUIsSUFFN0IveUYsS0FBS3NGLEtBQUt3akcscUJBQXNCLEVBQ2hDL1QsWUFBWWxDLHlCQUF5QkYsU0FBU1AsY0FFNUMyQyxZQUFZbEQsVUFFWjBLLGNBQ0N2OEYsS0FBS2cxRixNQUFNajVGLE9BQU9rdEcsb0JBQ25CbFUsWUFBWTNDLFlBQWNtSyxZQUFZbkssY0FFdENweUYsS0FBS3VSLE9BQU9raEYsVUFBVyxFQUN2Qnp5RixLQUFLc0YsS0FBS3lqRyxxQkFBc0IsRUFDaEMvb0csS0FBS3NGLEtBQUs0akcsZ0JBQWtCNXJHLEtBQUtDLEtBQUtDLFNBQVMsZ0JBQy9Dd0MsS0FBS3NGLEtBQUt3akcscUJBQXNCLEdBSWhDL1QsWUFBWWhELFFBRVp5SyxnQkFDQ3g4RixLQUFLZzFGLE1BQU1qNUYsT0FBTzJnRyxnQkFDbkIzSCxZQUFZM0MsWUFBY29LLGNBQWNwSyxjQUV4Q3B5RixLQUFLdVIsT0FBTzg3QyxTQUFVLEVBQ3RCcnRELEtBQUtzRixLQUFLeWpHLHFCQUFzQixFQUNoQy9vRyxLQUFLc0YsS0FBSzRqRyxnQkFBa0I1ckcsS0FBS0MsS0FBS0MsU0FBUyxnQkFDL0N3QyxLQUFLc0YsS0FBS3dqRyxxQkFBc0IsRUFHdEMsQ0FDRixDQUVBLG1CQUFhcDRGLENBQVFwTCxNQUNuQixHQUFJQSxLQUFLa3NELFNBQVUsQ0FDakIsTUFBTUMsUUFBVTdwRCxjQUFjMnBELDZCQUE2QmpzRCxLQUFLa3NELFVBQzVEQyxVQUFTbnNELEtBQUttc0QsUUFBVUEsZ0JBQ3JCbnNELEtBQUtrc0QsUUFDZCxDQUNBLE9BQU8sSUFBSXcyQyw2QkFBNkIxaUcsTUFBTXRILFFBQU8sRUFDdkQsRUNoVkssTUFBTW1yRyx1QkFBdUIxdEIsVUFLbEMseUJBQVdoaUUsR0FnQlQsT0FmZ0I3YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUM5REUsUUFBUyxDQUFDLE9BQVEsVUFBVyxPQUFRLFNBQ3JDQyxTQUFVLDBDQUNWRSxNQUFPLElBQ1BDLE9BQVEsSUFDUjZuRCxXQUFXLEVBQ1g3d0MsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGtCQVNqQixDQUlBLGVBQVc3eUIsR0FDVCxNQUFPLGdCQUNULENBRUEsaUJBQUFrNUQsR0FDRSxNQUFNdEMsY0FBZ0I1NEQsTUFBTWs3RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZWoxRCxNQUNsQ2kxRCxhQUNULENBRUEsYUFBTTlqQyxDQUFTN3hCLFFBQVUsQ0FBQyxHQUN4QixNQUFNOHhCLFVBQVkvMEIsTUFBTTgwQixRQUFRN3hCLFNBNERoQyxPQTFEQTh4QixVQUFVaXFFLGFBQWVyN0YsS0FBS2lHLEtBQUt5MUYsbUJBQ25DdHFFLFVBQVUycUUseUJBQTJCLzdGLEtBQUtpRyxLQUFLODFGLHlCQUMvQzNxRSxVQUFVbXFFLE1BQVF2N0YsS0FBS2lHLEtBQUtzMUYsTUFDNUJucUUsVUFBVW9xRSxRQUFVeDdGLEtBQUtpRyxLQUFLdTFGLFFBRTlCcHFFLFVBQVU2dUUsWUFBYzd1RSxVQUFVbXFFLE1BQU0zNkYsT0FBU3d3QixVQUFVbXFFLE1BQU10dkYsUUFBTyxDQUFDODNGLEtBQU03d0QsVUFBWTZ3RCxLQUFLM1IsWUFBY2wvQyxRQUFRay9DLFlBQWMyUixLQUFPN3dELFVBQVNrL0MsYUFBZSxFQUVuS2hoRSxVQUFVOHVFLFlBQWM5dUUsVUFBVW1xRSxNQUFNMzZGLE9BQVN3d0IsVUFBVW1xRSxNQUFNdHZGLFFBQU8sQ0FBQzgzRixLQUFNN3dELFVBQVk2d0QsS0FBSzNSLFlBQWNsL0MsUUFBUWsvQyxZQUFjMlIsS0FBTzd3RCxVQUFTay9DLGFBQWUsRUFFbktoaEUsVUFBVXl1RSxjQUFnQnp1RSxVQUFVb3FFLFFBQVE1NkYsT0FBU3d3QixVQUFVb3FFLFFBQVF2dkYsUUFBTyxDQUFDODNGLEtBQU03d0QsVUFBWTZ3RCxLQUFLM1IsWUFBY2wvQyxRQUFRay9DLFlBQWMyUixLQUFPN3dELFVBQVNrL0MsYUFBZSxFQUV6S2hoRSxVQUFVMnVFLGNBQWdCM3VFLFVBQVVvcUUsUUFBUTU2RixPQUFTd3dCLFVBQVVvcUUsUUFBUXZ2RixRQUFPLENBQUM4M0YsS0FBTTd3RCxVQUFZNndELEtBQUszUixZQUFjbC9DLFFBQVFrL0MsWUFBYzJSLEtBQU83d0QsVUFBU2svQyxhQUFlLEVBRXpLaGhFLFVBQVVvcUUsUUFBUTFqRixTQUFRbEssSUFDcEJBLEVBQUV3a0YsWUFBY2hoRSxVQUFVNnVFLFlBQzVCcnlGLEVBQUU0a0YsVUFFRjVrRixFQUFFOGtGLGlCQUVKOWtGLEVBQUVnbEYsUUFBVWhsRixFQUFFd2tGLGNBQWdCaGhFLFVBQVUydUUsY0FDeENueUYsRUFBRStrRixRQUFVL2tGLEVBQUV3a0YsY0FBZ0JoaEUsVUFBVXl1RSxpQkFHMUN6dUUsVUFBVW1xRSxNQUFNempGLFNBQVFsSyxJQUNsQkEsRUFBRXdrRixZQUFjaGhFLFVBQVUydUUsY0FDNUJueUYsRUFBRXkvQyxVQUVGei9DLEVBQUU4a0YsaUJBRUo5a0YsRUFBRWdsRixRQUFVaGxGLEVBQUV3a0YsY0FBZ0JoaEUsVUFBVTh1RSxZQUN4Q3R5RixFQUFFK2tGLFFBQVUva0YsRUFBRXdrRixjQUFnQmhoRSxVQUFVNnVFLGVBRzFDN3VFLFVBQVUrcUUsVUFBWW44RixLQUFLaUcsS0FBS2syRixVQUNoQy9xRSxVQUFVNHFFLGdCQUFrQmg4RixLQUFLZzhGLGdCQUNqQzVxRSxVQUFVK3NFLGVBQWlCbitGLEtBQUtpRyxLQUFLazRGLGVBQ2pDL3NFLFVBQVUrc0UsaUJBQ1ovc0UsVUFBVStzRSxlQUFlenZGLE1BQVEwaUIsVUFBVStzRSxlQUFlcUQsWUFDdERsa0csS0FBS0MsS0FBSzBXLE9BQU8sMEJBQTJCLENBQzVDcEksRUFBR3VsQixVQUFVK3NFLGVBQWVxRCxZQUFZMzFGLEVBQ3hDZ2hELEVBQUd6N0IsVUFBVStzRSxlQUFlcUQsWUFBWTMwQyxJQUV4Q3Z2RCxLQUFLQyxLQUFLQyxTQUFTLHNCQUV6QjR6QixVQUFVK3ZFLGlCQUFtQm5oRyxLQUFLaUcsS0FBS2s3RixpQkFDdkMvdkUsVUFBVWl3RSxhQUFlcmhHLEtBQUtpRyxLQUFLbzdGLGFBQ25DandFLFVBQVUrMEQsUUFBVW5tRixLQUFLaUcsS0FBS2tnRixRQUU5Qi8wRCxVQUFVZ0csU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBRS9CNm9CLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUloQnZoQyxTQUNULENBZUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUt4QkEsS0FDR3ZhLEtBQUsscUJBQ0x3YSxHQUFHLFNBQVMzZCxPQUFTeUQsS0FBSzR0QywyQkFBMkJyeEMsU0FFeEQwZCxLQUFLdmEsS0FBSyxZQUFZc3lCLE9BQU16MUIsUUFDMUJBLE1BQU1FLGlCQUNORixNQUFNa2hFLGtCQUNTbGhFLE1BQU1JLGNBQ0dFLFFBQVEsYUFDQytXLGNBQWMscUJBQy9CNUUsVUFBVTJMLE9BQU8sT0FBTSxJQUV6Q1YsS0FDR3ZhLEtBQUssYUFDTDZ1QyxZQUFXaHlDLE9BQ1ZBLE1BQU1JLGNBQ0hpWCxjQUFjLHFCQUNkNUUsVUFBVWdVLE9BQU8sVUFHeEIvSSxLQUFLQyxHQUFHLFdBQVksY0FBZTJyQixTQUFTa0ksYUFBYTkwQyxLQUFLK0csT0FFOURpYSxLQUNHdmEsS0FBSyxpQkFDTGsyRCxZQUFZNTFELEtBQUt5aEcsK0JBQStCeG9HLEtBQUsrRyxPQUV4RGlhLEtBQ0d2YSxLQUFLLGdCQUNMd2EsR0FBRyxhQUFhM2QsT0FBU3lELEtBQUtvcEcsd0JBQXdCN3NHLFNBQ3pEMGQsS0FDR3ZhLEtBQUssZ0JBQ0x3YSxHQUFHLFlBQVkzZCxPQUFTeUQsS0FBS29wRyx3QkFBd0I3c0csU0FDeEQwZCxLQUNHdmEsS0FBSyxnQkFDTHdhLEdBQUcsYUFBYTNkLE9BQVN5RCxLQUFLcXBHLHdCQUF3QjlzRyxTQUN6RDBkLEtBQ0d2YSxLQUFLLGdCQUNMd2EsR0FBRyxRQUFRM2QsT0FBU3lELEtBQUtxcEcsd0JBQXdCOXNHLFNBRXBEMGQsS0FBS3ZhLEtBQUssV0FBV3N5QixNQUFNaHlCLEtBQUtzcEcsY0FBY3J3RyxLQUFLK0csT0FDbkRpYSxLQUFLdmEsS0FBSyx1QkFBdUJzeUIsTUFBTWh5QixLQUFLdXBHLHFCQUFxQnR3RyxLQUFLK0csT0FDdEVpYSxLQUFLdmEsS0FBSyxlQUFlc3lCLE1BQU1oeUIsS0FBS3dwRyxhQUFhdndHLEtBQUsrRyxPQUN0RGlhLEtBQUt2YSxLQUFLLGtCQUFrQnN5QixNQUFNaHlCLEtBQUt5cEcsZ0JBQWdCeHdHLEtBQUsrRyxPQUU1RGlhLEtBQ0d2YSxLQUFLLG9CQUNMd2EsR0FBRyxhQUFhM2QsT0FBU3lELEtBQUtvcEcsd0JBQXdCN3NHLFNBQ3pEMGQsS0FDR3ZhLEtBQUssb0JBQ0x3YSxHQUFHLFlBQVkzZCxPQUFTeUQsS0FBS29wRyx3QkFBd0I3c0csU0FDeEQwZCxLQUNHdmEsS0FBSyxvQkFDTHdhLEdBQUcsYUFBYTNkLE9BQVN5RCxLQUFLcXBHLHdCQUF3QjlzRyxTQUN6RDBkLEtBQ0d2YSxLQUFLLG9CQUNMd2EsR0FBRyxRQUFRM2QsT0FBU3lELEtBQUtxcEcsd0JBQXdCOXNHLFNBRXBEMGQsS0FBS3ZhLEtBQUssYUFBYXN5QixNQUFNaHlCLEtBQUswcEcsa0JBQWtCendHLEtBQUsrRyxPQUV6RGlhLEtBQUt2YSxLQUFLLHFCQUFxQnN5QixNQUFNaHlCLEtBQUsycEcsbUJBQW1CMXdHLEtBQUsrRyxPQUVsRWlhLEtBQUt2YSxLQUFLLFdBQVdzeUIsTUFBTWh5QixLQUFLbWlFLGVBQWVscEUsS0FBSytHLE9BRXBEaWEsS0FBS3ZhLEtBQUssbUJBQW1Cc3lCLE1BQU1oeUIsS0FBSzRwRyxpQkFBaUIzd0csS0FBSytHLE9BRTlEaWEsS0FBS3ZhLEtBQUssa0JBQWtCc3lCLE1BQU1oeUIsS0FBSzZwRyxxQkFBcUI1d0csS0FBSytHLE9BRWpFaWEsS0FBS3ZhLEtBQUssV0FBV3N5QixNQUFNaHlCLEtBQUt1aUIsVUFBVXRwQixLQUFLK0csT0FDL0NpYSxLQUNHdmEsS0FBSyx3QkFDTHN5QixNQUFNaHlCLEtBQUs4cEcsNkJBQTZCN3dHLEtBQUsrRyxPQUVoRGlhLEtBQUt2YSxLQUFLLGtCQUFrQnN5QixNQUFNaHlCLEtBQUsrcEcsdUJBQXVCOXdHLEtBQUsrRyxPQUVuRWlhLEtBQ0d2YSxLQUFLLHFCQUNMc3lCLE1BQU1oeUIsS0FBS2dxRyx3QkFBd0Ivd0csS0FBSytHLE9BWVAsSUFBSTY3RSxTQUFTLENBQy9DaHJELGFBQWMsZ0JBQ2RvM0UsWUFBYSxDQUNYRSxVQUFXbm9HLEtBQUtpcUcseUJBQXlCaHhHLEtBQUsrRyxPQUVoRDg3RSxVQUFXLENBQ1Rxc0IsVUFBV25vRyxLQUFLa3FHLHdCQUF3Qmp4RyxLQUFLK0csU0FHckIvRyxLQUFLZ2hCLEtBQUssSUFFVixJQUFJNGhFLFNBQVMsQ0FDdkMvcUQsYUFBYyxlQUNkZ3JELFVBQVcsQ0FBRUMsS0FBTS83RSxLQUFLa29HLG1CQUFtQmp2RyxLQUFLK0csU0FFOUIvRyxLQUFLZ2hCLEtBQUssSUFROUIsR0FOK0IsSUFBSTRoRSxTQUFTLENBQzFDL3FELGFBQWMsbUJBQ2RnckQsVUFBVyxDQUFFQyxLQUFNLzdFLEtBQUswcEcsa0JBQWtCendHLEtBQUsrRyxTQUUxQi9HLEtBQUtnaEIsS0FBSyxJQUU3QmphLEtBQUtpRyxLQUFLa2dGLFFBQVMsQ0FDckJsc0UsS0FDR3ZhLEtBQUssc0NBQ0xzeUIsTUFBTWh5QixLQUFLbXFHLHlCQUF5Qmx4RyxLQUFLK0csT0FFVixJQUFJNjdFLFNBQVMsQ0FDN0NockQsYUFBYyxxQkFDZEMsYUFBYyxrQkFDZG0zRSxZQUFhLENBQ1hFLFVBQVdub0csS0FBS29xRyw4QkFBOEJueEcsS0FBSytHLE1BQ25EKzdFLEtBQU0vN0UsS0FBS3FxRyw2QkFBNkJweEcsS0FBSytHLE9BRS9DODdFLFVBQVcsQ0FDVHFzQixVQUFXbm9HLEtBQUtzcUcsNkJBQTZCcnhHLEtBQUsrRyxNQUNsRCs3RSxLQUFNLzdFLEtBQUt1cUcsNEJBQTRCdHhHLEtBQUsrRyxNQUM1Q3dxRyxTQUFVeHFHLEtBQUt5cUcsYUFBYXh4RyxLQUFLK0csU0FHWC9HLEtBQUtnaEIsS0FBSyxJQUVwQ0EsS0FDR3ZhLEtBQUssbUJBQ0x3YSxHQUFHLGFBQWEzZCxPQUFTeUQsS0FBSzBxRyxhQUFhbnVHLFFBQ2hELENBQ0YsQ0FPQSxjQUFBb3VHLENBQWdCcDRFLFdBQWEsQ0FBQyxHQUc1QixJQUFJanRCLEtBRE8sSUFBSSt6QixpQkFBaUJyNUIsS0FBS281QixLQUFNLENBQUV3eEUsUUFBUzVxRyxLQUFLNHFHLFVBQzdDcjVGLE9BZWQsR0FiRWpNLEtBREVpdEIsV0FDSzN6QixRQUFRQyxNQUFNNmEsWUFBWXBVLEtBQU1pdEIsWUFFaEMzekIsUUFBUUMsTUFBTXlmLGFBQWFoWixNQUtsQ3RGLEtBQUtpRyxLQUFLbEssT0FBT29nRyxXQUFXMzZELE1BQU01Z0MsUUFDbEMwRSxLQUFLdkosT0FBT3lqRyxjQUFnQngvRixLQUFLaUcsS0FBS2xLLE9BQU9vZ0csVUFBVTM2RCxLQUFLNWdDLFNBRTVEMEUsS0FBS3ZKLE9BQU95akcsY0FBZ0J4L0YsS0FBS2lHLEtBQUtsSyxPQUFPb2dHLFVBQVUzNkQsS0FBSzVnQyxRQUcxRDBFLEtBQUt2SixPQUFPcy9GLGFBQWMsQ0FDNUIsTUFBTUEsYUFBZXo4RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT3MvRixjQUU5RCxJQUFLLE1BQU9uc0YsRUFBR3ZQLEtBQU1DLE9BQU8ySyxRQUFRakYsS0FBS3ZKLE9BQU9zL0YsY0FBZSxDQUM3RCxNQUFNaCtFLE1BQVFnK0UsYUFBYWhqRCxXQUFVenFDLEdBQUtBLEVBQUVqUSxPQUFTdVIsSUFDckQsSUFBZSxJQUFYbU8sTUFBY3RVLEdBQUdDLGNBQWMwVSxNQUFNLG1DQUNwQyxDQUNILE1BQU0ydkQsU0FBV2d1QixhQUFhaCtFLE9BQ3hCd3RGLFFBQVVDLE1BQU1uckcsR0FDdEJmLFFBQVFDLE1BQU02YSxZQUFZMnpELFNBQVV3OUIsU0FDcEN4UCxhQUFhaCtFLE9BQVNnd0QsUUFDeEIsQ0FDRixDQUVBL25FLEtBQUt2SixPQUFPcy9GLGFBQWVBLFlBQzdCLENBRUEsR0FBSS8xRixLQUFLNjJGLFVBQVcsQ0FDbEIsTUFBTUEsVUFBWXY5RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT29nRyxVQUFVMzZELE1BRXJFLElBQUssTUFBTzNsQyxJQUFLM0YsU0FBVTBKLE9BQU8ySyxRQUFRakYsS0FBSzYyRixXQUFZLENBQ3pELE1BQU1vRSxjQUFnQnBFLFVBQVU5akQsV0FBVTc5QixHQUFLQSxFQUFFN2MsT0FBUzlCLE1BQzFELElBQXVCLElBQW5CMGtHLGNBQ0Z4M0YsR0FBR0MsY0FBYzBVLE1BQU0saUNBQ2xCLENBQ0wsTUFBTXF0RixpQkFBbUI1TyxVQUFVb0UsZUFDN0JzSyxRQUFVQyxNQUFNNTBHLE9BQ3RCMEksUUFBUUMsTUFBTTZhLFlBQVlxeEYsaUJBQWtCRixTQUM1QzFPLFVBQVVvRSxlQUFpQndLLGdCQUM3QixDQUNGLFFBRU96bEcsS0FBSzYyRixVQUNaNzJGLEtBQUt2SixPQUFPb2dHLFVBQVksQ0FBRTM2RCxLQUFNMjZELFVBQ2xDLENBS0EsT0FBT3Y5RixRQUFRQyxNQUFNczBELGNBQWM3dEQsS0FDckMsQ0FPQSxtQkFBTW90QixDQUFlbjJCLE1BQU9vMkIsVUFDMUIsTUFBTTFOLE9BQVMxb0IsTUFBTUksY0FDZjRKLFNBQXlDLFNBQTlCMGUsUUFBUWxvQixTQUFTd0osU0FDbEMsR0FBSTBlLFFBQVE3dUIsTUFBTTRNLFNBQVMsT0FBUSxDQUNqQyxNQUFPLENBQUUsQ0FBRXJGLE1BQVFzbkIsT0FBTzd1QixLQUFLc1csTUFBTSxLQUMvQnFvRixZQUFjLzBGLEtBQUtpRyxLQUFLbzJGLGVBQWUxK0YsTUFDekNvM0YsYUFBZUEsWUFBWTk2RixRQUN4QjZCLE1BQU1JLE9BQU8rb0IsT0FBTy91QixlQUNqQjYrRixZQUFZOTZGLE1BQU13ckQsTUFBTXZwRCxPQUFPK29CLE9BQU8vdUIsUUFHbEQsQ0FDQSxHQUFJcVEsU0FBVSxDQUNaLE1BQU8sQ0FBRWxJLEtBQU1WLEtBQU1xdEcsUUFBUzFsRyxNQUFRMmYsT0FBTzd1QixLQUFLc1csTUFBTSxLQUNsRDJRLE1BQVFyZCxLQUFLaXJHLHFCQUFxQnR0RyxNQUN4QyxHQUNXLGlCQUFUVSxPQUNDdkMsTUFBTXVoQixRQUNLLGdCQUFaMnRGLFNBRWEsU0FBVDFsRyxLQUFpQixDQUVuQixNQUFNKzFGLGFBQWVyN0YsS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGFBQ2xDejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGNBQ3pDLEdBT0osT0FOSUEsYUFBYWgrRSxPQUFPNjBFLG1CQUNmbUosYUFBYWgrRSxPQUFPNjBFLFdBQVdoa0YsVUFDL0JtdEYsYUFBYWgrRSxPQUFPNjBFLFdBQVc3ekYsTUFDakNnOUYsYUFBYWgrRSxPQUFPNjBFLFdBQWEsQ0FBQyxFQUN6Q21KLGFBQWFoK0UsT0FBTzYwRSxXQUFXOTdGLEtBQU82dUIsT0FBTy91QixpQkFDdkM4SixLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxzQkFBdUJtOUYsY0FFbEQsQ0FFSixDQUNBaC9GLE1BQU1xMkIsY0FBY24yQixNQUFPbzJCLFNBQzdCLENBRUEsc0JBQWF1NEUsQ0FBV3gwRyxJQUFLdWpCLEtBQU0zVSxNQUNqQyxJQUFLQSxLQUFLcXRELFNBQ1IsT0FFRixNQUFNdzRDLGVBQWlCbHhGLEtBQUssR0FBR2pMLFVBQVV5VCxTQUFTLGNBQzVDbTlFLFdBQWEzbEYsS0FBSyxHQUFHckcsY0FBYyxnQkFDekMsSUFBS2dzRixXQUFZLE9BRWpCLElBQUlnQyxNQUFRdDhGLEtBQUtBLEtBQUs4bEcsUUFBUXhMLFdBQVcxZ0YsS0FDckN5Z0YsSUFBTXI2RixLQUFLQSxLQUFLOGxHLFFBQVF4TCxXQUFXNkQsR0FRdkMsUUFQcUIsSUFBVjdCLFFBQ1RBLE1BQVEsUUFFUyxJQUFSakMsTUFDVEEsS0FBTyxHQUdMd0wsZUFBZ0IsQ0FDbEIsTUFBTW5ILFVBQVlsNEUsRUFBRSxTQUFTZ3BDLElBQUksYUFDM0JtdkMsUUFBVS9uRyxPQUFPOG5HLFVBQVVyMEYsUUFBUSxLQUFNLEtBQy9DLEdBQUlqWixJQUFJdVAsS0FBS2tnRixRQUFTLENBQ3BCLE1BQU0rZCxPQUFTeHRHLElBQUl1UCxLQUFLNjFGLG9CQUFvQmw3RixPQUN0Q2taLE9BQWtCLEtBQVRvcUYsT0FBZ0IsR0FBS0QsUUFDcEN2dEcsSUFBSTIwRyxZQUFZLFNBRWhCMzBHLElBQUkyNUQsU0FBU3YyQyxNQUFRMVgsS0FBS2EsSUFBSTZXLE1BQU8sR0FBS21xRixRQUU1QyxNQUNFdnRHLElBQUkyNUQsU0FBU3YyQyxNQUFRLEdBQUttcUYsUUFFNUIsYUFBYXZ0RyxJQUFJdVAsS0FBS28wRiw0QkFBNEIsQ0FBRXBnRixNQU90RCxDQUVJMm5GLFFBQW9CLElBQVhBLE9BQ1hoQyxXQUFXMEwsU0FBUyxDQUNsQjErQyxJQUFLLEVBQ0xoUSxLQUFNZ2xELE1BQ04ySixTQUFVLGFBSUQsSUFBVDVMLEtBQ0ZDLFdBQVcwTCxTQUFTLENBQ2xCMStDLElBQUssRUFDTGhRLEtBQU0raUQsSUFDTjRMLFNBQVUsVUFLaEIsQ0FFQSxjQUFPdHlGLENBQVN2aUIsSUFBS3VqQixNQUNuQnZqQixJQUFJdVAsS0FBSy9ILE9BQU8sQ0FBRSw4QkFBK0IsR0FDbkQsQ0FnQ0Esb0JBQUErc0csQ0FBc0J0dEcsTUFDcEIsT0FBT3FDLEtBQUtpRyxLQUFLbEssT0FBT3MvRixhQUFhaGpELFdBQVV6cUMsR0FBS0EsRUFBRWpRLE9BQVNBLE1BQ2pFLENBRUEsaUJBQUE2dEcsQ0FBbUI3dEcsTUFDakIsT0FBT3FDLEtBQUtpRyxLQUFLbEssT0FBT29nRyxVQUFVMzZELEtBQUs2VyxXQUFVenFDLEdBQUtBLEVBQUVqUSxPQUFTQSxNQUNuRSxDQUVBLFlBQUE4dEcsQ0FBYzl0RyxNQUNaLE9BQU9xQyxLQUFLaUcsS0FBS2xLLE9BQU9vZ0csVUFBVTM2RCxLQUFLOWhDLE1BQUtrTyxHQUFLQSxFQUFFalEsT0FBU0EsTUFDOUQsQ0FFQSxTQUFBMDZDLENBQVc3VyxLQUFNN2pDLE1BQ2YsT0FBTzZqQyxLQUFLNlcsV0FBVXpxQyxHQUFLQSxFQUFFalEsT0FBU0EsTUFDeEMsQ0FFQSxnQ0FBTWl3QyxDQUE0QnJ4QyxPQUNoQ0EsTUFBTUUsaUJBQ05GLE1BQU1raEUsa0JBQ04sTUFBTXg0QyxPQUFTMW9CLE1BQU1JLGNBQ3JCc29CLE9BQU9wb0IsUUFBUSxzQkFBc0JtUyxVQUFVMkwsT0FBTyxRQUN0RCxNQUFNd2lGLGNBQWdCbDRFLE9BQU9wb0IsUUFBUSxzQkFBc0JFLFNBQVNZLEtBQzlEeS9GLGdCQUFrQm40RSxPQUFPbG9CLFFBQVFxZ0csc0JBQ2pDcDlGLEtBQUtpRyxLQUFLaTNGLGtCQUFrQkMsY0FBZUMsZ0JBQ25ELENBRUEsZUFBTTc2RSxDQUFXaG1CLE9BQ2YsTUFBTTBvQixPQUFTMW9CLE1BQU1JLGNBS2ZnZSxPQUFTc0ssT0FBTzJwQixhQUFhLFVBQzdCdHBDLEtBQU8xRyxRQUFRQyxNQUFNeWYsYUFBYSxDQUN0QyxDQUFDM0QsU0FBVXNLLE9BQU9qVyxVQUFVeVQsU0FBUyxpQkFFdkMsR0FBSW5kLEtBQUs2MkYsVUFBVyxDQUNsQixNQUFNQSxVQUFZdjlGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPb2dHLFVBQVUzNkQsTUFDckUsSUFBSyxNQUFPM2xDLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFqRixLQUFLNjJGLFdBQVksQ0FDekQsTUFBTW9FLGNBQWdCcEUsVUFBVTlqRCxXQUFVNzlCLEdBQUtBLEVBQUU3YyxPQUFTOUIsTUFDMUQsSUFBdUIsSUFBbkIwa0csY0FDRngzRixHQUFHQyxjQUFjMFUsTUFBTSxpQ0FDbEIsQ0FDTCxNQUFNcXRGLGlCQUFtQjVPLFVBQVVvRSxlQUM3QnNLLFFBQVVDLE1BQU01MEcsT0FDdEIwSSxRQUFRQyxNQUFNNmEsWUFBWXF4RixpQkFBa0JGLFNBQzVDMU8sVUFBVW9FLGVBQWlCd0ssZ0JBQzdCLENBQ0YsT0FDTS9xRyxLQUFLaUcsS0FBS202RixvQkFBb0JqRSxVQUN0QyxDQUNGLENBaUJBLDBCQUFNME4sQ0FBc0J0dEcsT0FDMUIsTUFBTTBvQixPQUFTMW9CLE1BQU1JLGNBRWZnQixLQURrQnNuQixPQUFPcG9CLFFBQVEsYUFDVkUsUUFBUVksS0FDL0J3K0YsVUFBWXY5RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT29nRyxVQUFVMzZELE1BQy9EKytELGNBQWdCdmdHLEtBQUtxNEMsVUFBVThqRCxVQUFXeCtGLE1BQzNDdytGLFVBQVVvRSxlQUFldkksa0JBQzVCbUUsVUFBVW9FLGVBQWV2SSxnQkFBa0IsQ0FBQyxHQUU5QyxNQUFNM0QsU0FBVzhILFVBQVVvRSxlQUFldkksZ0JBQ3BDMzVGLEtBQU80bUIsT0FBT2pXLFVBQVV5VCxTQUFTLFdBQWEsVUFBWSxTQUMxRDFoQixPQUFTc3pGLFNBQVNoMkYsTUFDeEJnMkYsU0FBU0MsU0FBVSxFQUNuQkQsU0FBU00sUUFBUyxFQUNsQk4sU0FBU2gyRixPQUFTMEMsT0FDbEJvN0YsVUFBVW9FLGVBQWVsTSxVQUFZdHpGLGFBZ0IvQmYsS0FBS2lHLEtBQUttNkYsb0JBQW9CakUsVUFDdEMsQ0FFQSxzQkFBTXlOLENBQWtCcnRHLE9BQ3RCLE1BRU1tdkcsTUFGU252RyxNQUFNSSxjQUNVRSxRQUFRLG1CQUNURSxRQUFRWSxXQUNoQ3FDLEtBQUtpRyxLQUFLaTBGLGlCQUFpQndSLE1BQ25DLENBRUEsNkJBQU0xQixDQUF5Qnp0RyxPQUM3QkEsTUFBTUUsaUJBQ04sTUFBTXdvQixPQUFTMW9CLE1BQU1JLGNBQ3JCLEdBQUlzb0IsT0FBT2pXLFVBQVV5VCxTQUFTLFlBQWEsT0FDM0MsTUFBTXRsQixPQUFTOG5CLE9BQU9sb0IsUUFBUUksT0FFeEJ1dUcsTUFEa0J6bUYsT0FBT3BvQixRQUFRLG1CQUNURSxRQUFRWSxLQUN0QyxPQUFRUixRQUNOLElBQUssZUFDRzZDLEtBQUtpRyxLQUFLNjZGLGVBQWU0SyxPQUMvQixNQUNGLElBQUssa0JBQ0cxckcsS0FBS2lHLEtBQUt3NkYsZUFBZWlMLE1BQU8sQ0FBRXRpRCxNQUFPLElBQy9DLE1BRUYsSUFBSyxtQkFDR3BwRCxLQUFLaUcsS0FBS3c2RixlQUFlaUwsTUFBTyxDQUFFdGlELE1BQU8sSUFDL0MsTUFFRixJQUFLLGtCQUNINCtDLDZCQUE2QnQzRixPQUFPLENBQ2xDMm5GLFVBQVdyNEYsS0FBS2lHLEtBQUt0SSxLQUNyQnk2RixhQUFjc1QsTUFDZGw2QyxTQUFVLENBQUMsSUFRbkIsQ0FFQSw4QkFBTTI0QyxDQUEwQjV0RyxPQUM5QixNQUFNNmhHLE1BQVE3aEcsTUFBTUksY0FBY0ksU0FBU1ksV0FDckNxQyxLQUFLaUcsS0FBSyszRixvQkFBb0JJLE1BQ3RDLENBRUEsa0NBQU0wTCxDQUE4QnZ0RyxPQUNsQ0EsTUFBTUUsaUJBQ04sTUFBTXdvQixPQUFTMW9CLE1BQU1JLGNBQ3JCLEdBQUlzb0IsT0FBT2pXLFVBQVV5VCxTQUFTLFlBQWEsT0FDM0MsR0FBSXdDLE9BQU9qVyxVQUFVeVQsU0FBUyxZQUFhLE9BQzNDbG1CLE1BQU1raEUsa0JBRU4sTUFBTXkzQixnQkFBa0Jqd0UsT0FBT3BvQixRQUFRLHNCQUFzQkUsU0FBU1ksS0FDdEUsR0FBS3UzRixnQkFBTCxDQUNBLE9BQVFqd0UsT0FBT2xvQixRQUFRSSxRQUNyQixJQUFLLGdCQUNHNkMsS0FBSzJyRyxxQkFBcUJ6VyxpQkFDaEMsTUFDRixJQUFLLHdCQUNHbDFGLEtBQUs0ckcsMEJBQTBCLEVBQUdydkcsT0FDeEMsTUFDRixJQUFLLHdCQUNHeUQsS0FBSzRyRyx5QkFBeUIsRUFBR3J2RyxPQUN2QyxNQUNGLElBQUsscUJBQ0d5RCxLQUFLaUcsS0FBSzI0RixnQkFBZ0IxSixpQkFBa0IsRUFBRyxDQUFFbDNGLFFBQVEsSUFDL0QsTUFDRixJQUFLLG9CQUNHZ0MsS0FBS2lHLEtBQUsyNEYsZ0JBQWdCMUosZ0JBQWlCLEVBQUcsQ0FBRWwzRixRQUFRLElBQzlELE1BQ0YsSUFBSyxzQkFDSCxhQUFhZ0MsS0FBS2lHLEtBQUsrM0Ysb0JBQW9COUksaUJBQzdDLElBQUssWUFDSCxDQUNFLE1BQU0wSSxXQUFhMzRFLE9BQU9sb0IsUUFBUStELFlBQzVCZCxLQUFLaUcsS0FBSzAzRixnQkFBZ0J6SSxnQkFBaUIwSSxZQUNqRDU5RixLQUFLaUcsS0FBS28wRiw2QkFDWixDQUNBLE1BQ0YsSUFBSyx5QkFDR3I2RixLQUFLaUcsS0FBSzQzRixpQkFBaUIzSSxpQkFDakMsTUFDRixJQUFLLGtCQUNILENBQ0UsTUFBTUgsWUFBYy8wRixLQUFLaUcsS0FBS28yRixlQUFlbkgsaUJBQ3ZDekwsU0FBV3pwRixLQUFLaUcsS0FBSzAxRix1QkFBdUJ6RyxpQkFDbERILFlBQVl6dkYsS0FBSyt5RixVQUFZcjRGLEtBQUtpRyxLQUFLdEksS0FDdkNvM0YsWUFBWXp2RixLQUFLOHlGLGFBQWUzTyxTQUFTOXJGLEtBQ3pDbzNGLFlBQVl6dkYsS0FBS3BILFFBQVMsRUFDMUI4cEcsNkJBQTZCdDNGLE9BQU9xa0YsWUFBWXp2RixLQUNsRCxDQUNBLE1BQ0YsSUFBSywwQkFDR3RGLEtBQUtpRyxLQUFLZzhGLGtCQUFrQi9NLGlCQUd0Q2wxRixLQUFLaUcsS0FBS28wRiw2QkEzQ1ksQ0E0Q3hCLENBRUEsNEJBQU0wUCxDQUF3Qnh0RyxPQUM1QkEsTUFBTUUsaUJBQ04sTUFBTXdvQixPQUFTMW9CLE1BQU1JLGNBQ3JCSixNQUFNa2hFLGtCQUVOLE1BQU0yNkIsYUFBZW56RSxPQUFPcG9CLFFBQVEsY0FBY0UsU0FBU1ksS0FDM0QsR0FBS3k2RixhQUNMLE1BQ08seUJBRENuekUsT0FBT2xvQixRQUFRSSxPQUVaNkMsS0FBS2lHLEtBQUswNEYsK0JBQStCdkcsbUJBRnBELENBSUYsQ0FFQSw4QkFBTXdULENBQTBCOXFHLE1BQU92RSxPQUNyQ0EsTUFBTUUsaUJBQ05GLE1BQU1raEUsa0JBQ04sTUFBTXg0QyxPQUFTMW9CLE1BQU1JLGNBQ2Z1NEYsZ0JBQWtCandFLE9BQU9wb0IsUUFBUSxzQkFBc0JFLFNBQVNZLEtBQ3RFLElBQUt1M0YsZ0JBQWlCLE9BQ3RCLE1BQU1tRyxhQUFlcjdGLEtBQUtpRyxLQUFLbzFGLGFBQ3pCdEcsWUFBY3NHLGFBQWEzN0YsTUFBS2tPLEdBQUtzbkYsa0JBQW9CdG5GLEVBQUVqUSxPQUM3RG8zRixZQUFZOUIsa0JBQW9CbnlGLE1BQVEsSUFDNUNpMEYsWUFBWTNCLHFCQUFxQnR5RixhQVEzQmQsS0FBS2lHLEtBQUs2N0Ysb0JBQW9CLENBQUU5akcsUUFBUSxVQUN4Q2dDLEtBQUtpRyxLQUFLMjJGLG1CQUFtQnZCLGNBQ3JDLENBRUEsb0JBQU1sNUIsQ0FBZ0I1bEUsT0FDcEIsTUFBTTBvQixPQUFTMW9CLE1BQU1JLGNBQ2ZRLE9BQVM4bkIsT0FBT2xvQixTQUFTSSxPQUMvQixHQUFLQSxPQUNMLE9BQVFBLFFBQ04sSUFBSyxPQUNILElBQ0dyQixNQUFNa0UsS0FBS2lHLEtBQUtsSyxPQUFPb2dHLFVBQVUxNUYsUUFDbEN6QyxLQUFLaUcsS0FBS2xLLE9BQU9vZ0csVUFBVTE1RixNQUFRLEVBQ25DLENBQ0EsTUFBTTA1RixVQUFZbDlFLE1BQU10akIsTUFDdEIsS0FDQXNqQixNQUFNamYsS0FBS2lHLEtBQUtsSyxPQUFPb2dHLFVBQVUxNUYsUUFDakN1QixLQUFJLFdBQ0osTUFBTyxDQUFFckcsS0FBTWlCLFFBQVFDLE1BQU15bkQsU0FBUyxJQUN4QyxJQUNBNjFDLFVBQVUsR0FBRy9sRyxLQUFPLFFBQ2hCK2xHLFVBQVV2N0YsT0FBUyxJQUFHdTdGLFVBQVVBLFVBQVV2N0YsT0FBUyxHQUFHeEssS0FBTyxhQUMzRDRKLEtBQUtpRyxLQUFLbTZGLG9CQUFvQmpFLFVBQ3RDLENBRUEsTUFDRixJQUFLLFFBQ0gxbkUsT0FBT3lsQixRQUFRLENBQ2J4ckMsTUFBTyxHQUFHcFIsS0FBS0MsS0FBS0MsU0FBUyw0QkFDN0JpVCxRQUFTLE1BQU1uVCxLQUFLQyxLQUFLQyxTQUFTLG9DQUNsQzI4QyxJQUFLNzNDLGdCQUNHdEMsS0FBS2lHLEtBQUttNkYsb0JBQW9CLFVBQzlCcGdHLEtBQUtpRyxLQUFLODdGLE1BQUssSUFHekIsTUFFRixJQUFLLFlBQ0MvaEcsS0FBS2lHLEtBQUtpMkYsaUJBQ1p6bkUsT0FBT3lsQixRQUFRLENBQ2J4ckMsTUFBTyxHQUFHcFIsS0FBS0MsS0FBS0MsU0FBUywyQkFDN0JpVCxRQUFTLE1BQU1uVCxLQUFLQyxLQUFLQyxTQUN2QixtQ0FFRjI4QyxJQUFLLElBQU1uNkMsS0FBS2lHLEtBQUswN0Ysa0JBR3ZCNTRGLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBS0MsU0FBUyw2QkFFM0MsTUFFRixJQUFLLFVBQ0hpM0IsT0FBT3lsQixRQUFRLENBQ2J4ckMsTUFBTyxHQUFHcFIsS0FBS0MsS0FBS0MsU0FBUyw4QkFDN0JpVCxRQUFTLE1BQU1uVCxLQUFLQyxLQUFLQyxTQUN2QixzQ0FFRjI4QyxJQUFLLElBQU1uNkMsS0FBS2lHLEtBQUs0N0YsWUFFdkIsTUFFRixJQUFLLFlBQ0M3aEcsS0FBS2lHLEtBQUtxMkYsc0JBQ1o3bkUsT0FBT3lsQixRQUFRLENBQ2J4ckMsTUFBTyxHQUFHcFIsS0FBS0MsS0FBS0MsU0FBUyxnQ0FDN0JpVCxRQUFTLE1BQU1uVCxLQUFLQyxLQUFLQyxTQUN2Qix3Q0FFRjI4QyxJQUFLLElBQU1uNkMsS0FBS2lHLEtBQUs0NEYsd0JBRWxCNytGLEtBQUtpRyxLQUFLNDRGLHNCQU12QixDQUVBLHdCQUFBb0wsQ0FBMEJybEIsVUFDeEIsUUFBSXRuRixLQUFLc0csS0FBSzJFLElBRWhCLENBRUEsNkJBQU0yaEcsQ0FBeUIzdEcsT0FDN0IsTUFBTUcsRUFBSUgsTUFBTUksY0FDVjZqQixFQUFJOWpCLEVBQUVrWCxjQUFjLFVBQ3BCaTRGLFNBQVdudkcsRUFBRWtYLGNBQWMsY0FFakNyWCxNQUFNOHhCLGFBQWF5OUUsYUFBYUQsU0FBVSxFQUFHQSxTQUFTOXhGLFFBRXRELE1BQU1neUYsZ0JBQWtCcnZHLEVBQUVHLFFBQVEsbUJBQzVCeUksS0FBTyxDQUViQSxLQUFZLFVBQ1pBLFNBQWdCLFNBQ2hCQSxLQUFLN0gsS0FBTytpQixFQUFFempCLFFBQVFpeEIsU0FDdEIxb0IsS0FBSzh5RixhQUFlMlQsZ0JBQWdCaHZHLFFBQVFZLEtBQzVDMkgsS0FBS21zRCxRQUFVenhELEtBQUtpRyxLQUFLdEksS0FDekIySCxLQUFLZ2tGLFNBQVcsaUJBQ2hCL3NGLE1BQU04eEIsYUFBYUMsUUFBUSxhQUFjMWYsS0FBS0MsVUFBVXZKLE1BSTFELENBRUEsNkJBQUE4a0csQ0FBK0J4bEIsVUFDN0IsUUFBSXRuRixLQUFLc0csS0FBSzJFLElBRWhCLENBRUEsNEJBQUE4aEcsQ0FBOEJ6bEIsVUFDNUIsUUFBSXRuRixLQUFLc0csS0FBSzJFLElBRWhCLENBRUEsa0NBQU0raEcsQ0FBOEIwQixXQUNsQyxNQUNNL3NDLFNBQVcsQ0FBRXRoRSxLQURKcXVHLFVBQVVydkcsY0FDT0ksUUFBUVksS0FBTVUsS0FBTSxlQUNwRDJ0RyxVQUFVMzlFLGFBQWFDLFFBQVEsYUFBYzFmLEtBQUtDLFVBQVVvd0QsVUFDOUQsQ0FFQSxpQ0FBTXNyQyxDQUE2QnlCLFdBQ2pDLE1BQU03NEUsV0FBYTY0RSxVQUFVMzlFLGFBQWE4QyxRQUFRLGNBQzVDN3JCLEtBQU9zSixLQUFLNGQsTUFBTTJHLFlBR3hCbnpCLEtBQUswcUcsYUFBYXNCLFdBRWxCLE1BQ001VCxhQURTNFQsVUFBVXJ2RyxjQUNHSSxRQUFRWSxLQUVwQyxHQUFrQixnQkFBZDJILEtBQUtqSCxLQUF3QixDQUMvQixNQUFNNHRHLFlBQWNqc0csS0FBS3lyRyxhQUFhclQsY0FDdEMsR0FBSTZULGFBQ0VBLFlBQVk1USxjQUFjcjRGLFNBQVNzQyxLQUFLM0gsTUFBTyxhQUUvQ3FDLEtBQUtpRyxLQUFLNjdGLG9CQUFvQixDQUFFOWpHLFFBQVEsVUFDeENnQyxLQUFLaUcsS0FBSyt6RiwwQkFBMEIxMEYsS0FBSzNILEtBQU15NkYsYUFDdkQsTUFDRTRQLDZCQUE2QnQzRixPQUFPLENBQ2xDMm5GLFVBQVdyNEYsS0FBS2lHLEtBQUt0SSxLQUNyQnk2RixhQUNBNW1DLFNBQVVsc0QsTUFHaEIsQ0FFQSxXQUFBNG1HLENBQWFGLFdBQ1hoc0csS0FBS3lxRyxhQUFhdUIsVUFDcEIsQ0FFQSxZQUFBdkIsQ0FBY3VCLFdBQ0dBLFVBQVVydkcsY0FDbEJxUyxVQUFVQyxJQUFJLFlBQ3ZCLENBRUEsWUFBQXk3RixDQUFjc0IsV0FDWixNQUFNL21GLE9BQVMrbUYsVUFBVXJ2RyxjQUN6QnNvQixPQUFPalcsV0FBV2dVLE9BQU8sWUFDM0IsQ0FFQSx3QkFBTWtsRixDQUFvQjNyRyxPQUN4QixNQUFNMG9CLE9BQVMxb0IsTUFBTUksY0FDZmdCLEtBQU9zbkIsT0FBT2xvQixTQUFTWSxLQUN2QncxQixXQUFhNTJCLE1BQU04eEIsYUFBYThDLFFBQVEsY0FDeEM3ckIsS0FBT3NKLEtBQUs0ZCxNQUFNMkcsa0JBQ2xCbnpCLEtBQUttc0csaUJBQWlCN21HLEtBQU0zSCxLQUNwQyxDQUVBLHVCQUFNK3JHLENBQW1CbnRHLE9BQ3ZCQSxNQUFNRSxpQkFDTixNQUFNNkksS0FBTyxDQUFFK3lGLFVBQVdyNEYsS0FBS2lHLEtBQUt0SSxNQUNwQyxHQUFJcEIsTUFBTTh4QixhQUFjLENBQ3RCLE1BQU04RSxXQUFhNTJCLE1BQU04eEIsYUFBYThDLFFBQVEsY0FDOUM3ckIsS0FBS2tzRCxTQUFXNWlELEtBQUs0ZCxNQUFNMkcsV0FDN0IsQ0FDQTYwRSw2QkFBNkJ0M0YsT0FBT3BMLEtBQ3RDLENBRUEsd0JBQU1xa0csQ0FBb0JwdEcsT0FDeEIsTUFFTW9CLEtBRlNwQixNQUFNSSxjQUNhRSxRQUFRLGdCQUNWRSxRQUFRWSxLQUNsQzBmLE1BQVFyZCxLQUFLaXJHLHFCQUFxQnR0RyxNQUNsQzA5RixhQUFlcjdGLEtBQUtpRyxLQUFLbEssT0FBT3MvRixhQUNsQ3o4RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT3MvRixjQUN6QyxHQUVFdEcsWUFBYyxJQUFJNUUsYUFBYWtMLGFBQWFoK0UsUUFDbEQsR0FBSTAzRSxZQUFZN0MsV0FBVzJCLE9BQVEsQ0FDakMsTUFBTTF5RixLQUFPLElBQUk0UyxVQUNqQjVTLEtBQUs0SSxPQUFTL0osS0FBS2lHLEtBQUt0SSxLQUN4Qm8zRixZQUFZenZGLEtBQUs4dkIsUUFBUyxFQUMxQjIvRCxZQUFZenZGLEtBQUt3NUYsU0FBVzM5RixLQUFLeEQsS0FDakN3RCxLQUFLbEgsTUFBUTg2RixZQUFZOTZGLE1BQU1tWCxVQUMxQjdVLE1BQU02eUIsVUFBWTJsRSxZQUFZOTZGLE1BQU1xckQsU0FDdkNua0QsS0FBS3k5QixTQUFVLEVBQ2Z6OUIsS0FBS2lyRyxZQUFjLGFBQ25CanJHLEtBQUtrckcsaUJBQW1CLCtDQUd0QnRYLFlBQVk3QyxXQUFXNEIsd0JBQ25CM3lGLEtBQUsyOUIsbUJBQW1CaTJELFlBQVk3QyxXQUFXMEIsSUFBSS8zRixXQUNuRHNGLEtBQUtnMUIsWUFDWDQrRCxZQUFZenZGLEtBQUs0c0YsV0FBV0MsZUFBaUJoeEYsS0FBS2lwRCxnQkFDekMycUMsWUFBWTdDLFdBQVcxb0MsU0FDaENyb0QsS0FBSzhHLE1BQVE4c0YsWUFBWTdDLFdBQVcwQixVQUM5Qnp5RixLQUFLQSxhQUNMQSxLQUFLZzFCLFlBQ1g0K0QsWUFBWXp2RixLQUFLNHNGLFdBQVdDLGVBQWlCaHhGLEtBQUtpcEQsZ0JBQ3pDMnFDLFlBQVk3QyxXQUFXeG9DLG9CQUMxQnZvRCxLQUFLMDlCLGNBQWNrMkQsWUFBWTdDLFdBQVcwQixJQUFJLzNGLFdBQzlDc0YsS0FBS2cxQixZQUNYNCtELFlBQVl6dkYsS0FBSzRzRixXQUFXQyxlQUFpQmh4RixLQUFLaXBELGVBRXRELE1BQU8sR0FBSTJxQyxZQUFZN0MsV0FBVzF2QyxNQUFPLENBQ3ZDLE1BQU10a0MsU0FBVyxDQUNmMUgsU0FBVXUrRSxZQUFZN0MsV0FBVzF2QyxNQUNqQ3YwQixZQUFhOG1FLFlBQVk3QyxXQUFXOTdGLEtBQ3BDbXpDLFVBQVd3ckQsWUFBWTMrRixLQUFPMitGLFlBQVkzK0YsVUFBT3lILEdBRS9DazNGLFlBQVl4RSxXQUFVcnlFLFNBQVNqa0IsTUFBUTg2RixZQUFZOTZGLE1BQU1tWCxVQUM3RCxNQUFNalEsS0FBTzRTLFVBQVVyRCxPQUFPd04sVUFDOUIvYyxLQUFLNEksT0FBUy9KLEtBQUtpRyxLQUFLdEksV0FDbEJ3RCxLQUFLQSxhQUNMQSxLQUFLZzFCLFlBQ1g0K0QsWUFBWXp2RixLQUFLNHNGLFdBQVdDLGVBQWlCaHhGLEtBQUtpcEQsZUFDbEQycUMsWUFBWXp2RixLQUFLOHZCLFFBQVMsRUFDMUIyL0QsWUFBWXp2RixLQUFLdzVGLFNBQVczOUYsS0FBS3hELElBQ25DLE9BRU1xQyxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxzQkFBdUJtOUYsY0FDbEQsQ0FFQSx1QkFBQStOLENBQXlCN3NHLE9BQ1JBLE1BQU1JLGNBQ2RxUyxVQUFVQyxJQUFJLFlBQ3ZCLENBRUEsdUJBQUFvNkYsQ0FBeUI5c0csT0FDUkEsTUFBTUksY0FDZHFTLFVBQVVnVSxPQUFPLFlBQzFCLENBRUEsbUJBQU1zbUYsQ0FBZS9zRyxPQUluQixNQUVNb0IsS0FGU3BCLE1BQU1JLGNBQ01FLFFBQVEsZ0JBQ1ZFLFFBQVFZLEtBQzNCMGYsTUFBUXJkLEtBQUtpckcscUJBQXFCdHRHLE1BQ2xDMDlGLGFBQWVyN0YsS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGFBQ2xDejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGNBQ3pDLEdBQ0pBLGFBQWFoK0UsT0FBT3kwRSxRQUFVdUosYUFBYWgrRSxPQUFPeTBFLGFBQzVDOXhGLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHNCQUF1Qm05RixjQUNsRCxDQUVBLHFCQUFNb08sQ0FBaUJsdEcsT0FDckIsTUFFTW9CLEtBRlNwQixNQUFNSSxjQUNDRSxRQUFRLFdBQ1ZFLFFBQVFZLEtBQ3RCMGYsTUFBUXJkLEtBQUtpckcscUJBQXFCdHRHLE1BQ2xDMDlGLGFBQWVyN0YsS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGFBQ2xDejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGNBQ3pDLFVBQ2dCQSxhQUFhaCtFLE9BQ2RvMEMsY0FDYnp4RCxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxzQkFBdUJtOUYsY0FDbEQsQ0FFQSwwQkFBTWtPLENBQXNCaHRHLE9BQzFCLE1BRU1vQixLQUZTcEIsTUFBTUksY0FDTUUsUUFBUSxnQkFDVkUsUUFBUVksS0FDM0IwZixNQUFRcmQsS0FBS2lyRyxxQkFBcUJ0dEcsTUFDbEMwOUYsYUFBZXI3RixLQUFLaUcsS0FBS2xLLE9BQU9zL0YsYUFDbEN6OEYsUUFBUUMsTUFBTXdPLFVBQVVyTixLQUFLaUcsS0FBS2xLLE9BQU9zL0YsY0FDekMsR0FDSkEsYUFBYTNrRSxPQUFPclosTUFBTyxTQUNyQnJkLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHNCQUF1Qm05RixjQUNsRCxDQUVBLGtCQUFNbU8sQ0FBY2p0RyxPQUNsQixNQUVNb0IsS0FGU3BCLE1BQU1JLGNBQ01FLFFBQVEsZ0JBQ1ZFLFFBQVFZLEtBQzNCMGYsTUFBUXJkLEtBQUtpckcscUJBQXFCdHRHLE1BQ2xDMDlGLGFBQWVyN0YsS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGFBQ2xDejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGNBQ3pDLFVBQ0dBLGFBQWFoK0UsT0FBTzYwRSxXQUFXQyxxQkFDaENueUYsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsc0JBQXVCbTlGLGNBQ2xELENBRUEsc0JBQU04USxDQUFrQjdtRyxLQUFNM0gsTUFDNUIsSUFBSTh6RCxRQUFTeDNELE1BQ093M0QsUUFBaEJuc0QsS0FBSys3QyxVQUFxQi83QyxLQUFLKzdDLFVBRy9CLzdDLEtBQUttSCxTQUFXbkgsS0FBS2tILFFBQ2pCLFNBQVNsSCxLQUFLbUgsaUJBQWlCbkgsS0FBS2tILFVBQ3BDbEgsS0FBSzRILFNBQVc1SCxLQUFLOEwsVUFBWTlMLEtBQUs0SSxHQUc1QixVQUFkNUksS0FBS2pILEtBQ1BvekQsUUFBVW5zRCxLQUFLM0gsS0FDTjh6RCxVQUNUeDNELE1BQVF1VixXQUFXcUIsZ0JBQWdCNGdELFNBQzlCeDNELE9BQXVCLFNBQWRxTCxLQUFLakgsT0FBaUJvekQsUUFBVSxPQUc1Q3gzRCxPQUFTdzNELFVBQVl4M0QsTUFBTTBELE9BQzdCOHpELFFBQVV4M0QsTUFBTTBELE1BR2xCLE1BQU1vM0YsWUFBYyxDQUFDLEVBR3JCLE9BRkl0akMsVUFBU3NqQyxZQUFZdGpDLFFBQVVBLFNBRTNCbnNELEtBQUtqSCxNQUFNMkosZUFDakIsSUFBSyxRQXFCTCxRQUNFLE1BcEJGLElBQUssT0FDSCtzRixZQUFZN0MsV0FBYSxDQUN2QmhrRixHQUFJNUksS0FBS0EsTUFBTStzQyxLQUFPL3NDLEtBQUs0SSxHQUMzQjdQLEtBQU0sUUFFUixNQUNGLElBQUssaUJBQ0gwMkYsWUFBWTdDLFdBQWEsQ0FDdkJoa0YsR0FBSTVJLEtBQUtsUCxLQUNUaUksS0FBTSxrQkFFUixNQUNGLElBQUssWUFDSDAyRixZQUFZN0MsV0FBYSxDQUN2QmhrRixHQUFJNUksS0FBS2xQLEtBQ1RpSSxLQUFNLGFBYVosTUFBTWc5RixhQUFlcjdGLEtBQUtpRyxLQUFLbEssT0FBT3MvRixhQUNsQ3o4RixRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT3MvRixjQUN6QyxHQUVFaVIsZUFBaUJqUixhQURUcjdGLEtBQUtpckcscUJBQXFCdHRHLE9BRXBDMnVHLGVBQWVoZ0UsWUFBWWdnRSxlQUFlaGdFLElBQzlDMXRDLFFBQVFDLE1BQU02YSxZQUFZNHlGLGVBQWdCdlgsbUJBQ3BDLzBGLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHNCQUF1Qm05RixjQUNsRCxDQUVBLG9DQUFNb0csU0FDRXpoRyxLQUFLaUcsS0FBS3c3RixnQ0FDbEIsQ0FFQSxvQkFBTVcsQ0FBZ0I5OEYsTUFhcEIsSUFBSW1zRCxRQUFTeDNELE1BQ093M0QsUUFBaEJuc0QsS0FBSys3QyxVQUFxQi83QyxLQUFLKzdDLFVBRy9CLzdDLEtBQUttSCxTQUFXbkgsS0FBS2tILFFBQ2pCLFNBQVNsSCxLQUFLbUgsaUJBQWlCbkgsS0FBS2tILFVBQ3BDbEgsS0FBSzRILFNBQVc1SCxLQUFLOEwsVUFBWTlMLEtBQUs0SSxHQUc1QixVQUFkNUksS0FBS2pILEtBQ1BvekQsUUFBVW5zRCxLQUFLM0gsS0FDTjh6RCxVQUNUeDNELE1BQVF1VixXQUFXcUIsZ0JBQWdCNGdELFNBQzlCeDNELE9BQXVCLFNBQWRxTCxLQUFLakgsT0FBaUJvekQsUUFBVSxPQUc1Q3gzRCxPQUFTdzNELFVBQVl4M0QsTUFBTTBELE9BQzdCOHpELFFBQVV4M0QsTUFBTTBELE1BR2xCLE1BQU1vM0YsWUFBYyxDQUFDLEVBR3JCLE9BRkl0akMsVUFBU3NqQyxZQUFZdGpDLFFBQVVBLFNBRTNCbnNELEtBQUtqSCxNQUFNMkosZUFDakIsSUFBSyxRQTBCTCxRQUNFLE1BekJGLElBQUssT0FDSCxHQUFJMUMsS0FBSzRJLEdBQUksQ0FDWCxNQUFNakksS0FBTzNJLEtBQUs2USxNQUFNalIsSUFBSW9JLEtBQUs0SSxJQUNqQyxHQUF5QixVQUFyQmpJLE1BQU1YLE1BQU1qSCxLQUFrQixNQUNwQyxDQUVBMDJGLFlBQVk3QyxXQUFhLENBQ3ZCaGtGLEdBQUk1SSxLQUFLQSxNQUFNK3NDLEtBQU8vc0MsS0FBSzRJLEdBQzNCN1AsS0FBTSxRQUVSLE1BQ0YsSUFBSyxpQkFDSDAyRixZQUFZN0MsV0FBYSxDQUN2QmhrRixHQUFJNUksS0FBS2xQLEtBQ1RpSSxLQUFNLGtCQUVSLE1BQ0YsSUFBSyxZQUNIMDJGLFlBQVk3QyxXQUFhLENBQ3ZCaGtGLEdBQUk1SSxLQUFLbFAsS0FDVGlJLEtBQU0sYUFjUDAyRixZQUFZN0MsYUFDVmx5RixLQUFLaUcsS0FBS2xLLE9BQU8yMEYsUUFPcEJxRSxZQUFZN0MsV0FBYSxDQUN2Qjd6RixLQUFNLE9BQ05qSSxLQUFNa0gsS0FBS0MsS0FBS0MsU0FBUywyQ0FSM0J1M0YsWUFBWTdDLFdBQWEsQ0FDdkJoa0YsR0FBSSxNQUNKN1AsS0FBTSxpQkFDTmpJLEtBQU1rSCxLQUFLQyxLQUFLQyxTQUFTLHlCQVMvQixNQUFNNjlGLGFBQWVyN0YsS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGFBQ2xDejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGNBQ3pDLEdBRUosSUFBSWdILFFBQVMsRUFDYixNQUFRQSxRQUNOdE4sWUFBWXAzRixLQUFPaUIsUUFBUUMsTUFBTXluRCxTQUFTLElBQzFDKzdDLE9BQ21FLElBQWpFaEgsYUFBYWhsRyxRQUFPdVgsR0FBS0EsRUFBRWpRLE9BQVNvM0YsWUFBWXAzRixPQUFNaUQsT0FHMUR5NkYsYUFBYW5rRyxLQUFLNjlGLG1CQUNaLzBGLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHNCQUF1Qm05RixjQUNsRCxDQUVBLDBCQUFNc1EsQ0FBc0J6VyxpQkFDMUIsTUFBTW1HLGFBQWVyN0YsS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGFBQ2xDejhGLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPcy9GLGNBQ3pDLEdBQ0V0RyxZQUFjc0csYUFBYTM3RixNQUFLa08sR0FBS3NuRixrQkFBb0J0bkYsRUFBRWpRLE9BQzVEbzNGLGNBQ0xBLFlBQVluRCxjQUFnQm1ELFlBQVluRCxtQkFDbEM1eEYsS0FBS2lHLEtBQUs2N0Ysb0JBQW9CLENBQUU5akcsUUFBUSxVQUN4Q2dDLEtBQUtpRyxLQUFLMjJGLG1CQUFtQnZCLGNBQ3JDLEVBR0ssU0FBU3lQLE1BQU9qNUYsS0FDckIsSUFBSyxNQUFNMUssWUFBWTBLLElBQUssQ0FDMUIsTUFBTTA2RixHQUFLM3RHLFFBQVFDLE1BQU0ydEcsUUFBUTM2RixJQUFJMUssV0FDMUIsV0FBUG9sRyxLQUNGMTZGLElBQUkxSyxVQUFZMmpHLE1BQU1qNUYsSUFBSTFLLGFBR2pCLFdBQVBvbEcsSUFBb0Izc0csT0FBTzJLLFFBQVFzSCxJQUFJMUssV0FBV3ZHLFVBRXBDLFdBQVAyckcsSUFBb0IxNkYsSUFBSTFLLFVBQVV2RyxRQUUzQixXQUFQMnJHLElBQW9CendHLE1BQU1JLE9BQU8yVixJQUFJMUssY0FDOUMwSyxJQUFJMUssVUFBWWpMLE9BQU8yVixJQUFJMUssWUFKM0IwSyxJQUFJMUssVUFBWSxJQU1wQixDQUNBLE9BQU8wSyxHQUNULENDbHFDTyxNQUFNNDZGLHdCQUF3Qmh4QixVQUtuQyx5QkFBV2hpRSxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsVUFBVyxRQUM3QkMsU0FBVSxpREFDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1JzbUQsUUFBUyxDQUFDLG9CQUNWdHZDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsaUJBSWpCLENBRUEsaUJBQUFxbUMsR0FDRSxNQUFNdEMsY0FBZ0I1NEQsTUFBTWs3RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZWoxRCxNQUNsQ2kxRCxhQUNULENBTUEsYUFBTTlqQyxDQUFTN3hCLFFBQVUsQ0FBQyxHQUN4QixNQUFNOHhCLFVBQVkvMEIsTUFBTTgwQixRQUFRN3hCLFNBc0JoQyxPQXBCQTh4QixVQUFVbjBCLFFBQVV4QixpQkFBaUJ3RSw4QkFBOEJELEtBQUtpRyxLQUFLaEosUUFBUyxDQUFFOUMsUUFBUSxJQUVoR2kzQixVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVZ0csU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBRXhCNm9CLFNBQ1QsQ0FNQSxpQkFBQXBYLENBQW1CQyxNQUNqQjVkLE1BQU0yZCxrQkFBa0JDLE1BRW5CamEsS0FBS1YsUUFBUXF6RCxVQUVsQjE0QyxLQUNHdmEsS0FBSyxtQkFDTHN5QixPQUFNb3JDLElBQU0zaEUsaUJBQWlCYSxxQkFBcUI4Z0UsR0FBSXA5RCxLQUFLaUcsT0FDaEUsRUN0RUssTUFBTXltRyxzQkFBc0JELGdCQUtqQyx5QkFBV2h6RixHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREssTUFBTyxJQUNQQyxPQUFRLEtBRVosRUNkSyxNQUFNNHlGLHlCQUF5QkMsYUFDcEMsaUJBQUFyMUMsR0FDRSxNQUFNdEMsY0FBZ0I1NEQsTUFBTWs3RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZWoxRCxNQUNsQ2kxRCxhQUNULEVDTEssTUFBTTQzQyx3QkFBd0JDLFlBQ25DLGlCQUFBdjFDLEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxFQ0xLLE1BQU04M0MsMkJBQTJCQyxlQUN0QyxpQkFBQXoxQyxHQUNFLE1BQU10QyxjQUFnQjU0RCxNQUFNazdELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlajFELE1BQ2xDaTFELGFBQ1QsRUNMSyxNQUFNZzRDLDRCQUE0QkMsZ0JBQ3ZDLGlCQUFBMzFDLEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxFQ0xLLE1BQU1rNEMsd0JBQXdCQyxZQUNuQyxpQkFBQTcxQyxHQUNFLE1BQU10QyxjQUFnQjU0RCxNQUFNazdELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlajFELE1BQ2xDaTFELGFBQ1QsRUNHSyxNQUFNbzRDLHVCQUF1QjV4QixVQUtsQyxpQkFBQXpoRSxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUVuQmphLEtBQUtWLFFBQVFxekQsV0FFbEIxNEMsS0FBS3ZhLEtBQUssdUJBQXVCc3lCLE9BQU16MUIsT0FBU3lELEtBQUtpOUQsZUFBZTFnRSxNQUFPLFdBQzNFMGQsS0FBS3ZhLEtBQUssZ0JBQWdCc3lCLE9BQU16MUIsT0FBU3lELEtBQUswN0UsY0FBY24vRSxNQUFPLFdBQ25FMGQsS0FBS3ZhLEtBQUssWUFBWXN5QixPQUFNMXZCLGVBQWtCdEMsS0FBS3N0RyxjQUNuRHJ6RixLQUFLdmEsS0FBSyxtQkFBbUJzeUIsTUFBTWh5QixLQUFLdXRHLGlCQUFpQnQwRyxLQUFLK0csT0FDOURpYSxLQUFLdmEsS0FBSyxrQkFBa0JzeUIsTUFBTWh5QixLQUFLNDBELGVBQWUzN0QsS0FBSytHLE9BQzNEaWEsS0FBS3ZhLEtBQUssaUJBQWlCc3lCLE1BQU1oeUIsS0FBSytsRSxlQUFlOXNFLEtBQUsrRyxPQUMxRGlhLEtBQUt2YSxLQUFLLG9CQUFvQnN5QixNQUFNaHlCLEtBQUtnbUUsa0JBQWtCL3NFLEtBQUsrRyxPQUNsRSxDQUVBLG9CQUFNNDBELENBQWdCcjRELE9BQ3BCQSxNQUFNRSxpQkFDTixNQUFNNkosV0FBYS9KLE1BQU1JLGNBQWNJLFFBQVF3ekMsZUFDekN2d0MsS0FBS2lHLEtBQUtJLGVBQ2RDLFdBQ0E4SSxVQUFVN1MsT0FFZCxDQUVBLGFBQU0yMkIsQ0FBUzMyQixNQUFPeS9FLGVBQWlCLFNBQ3JDei9FLE1BQU1FLGlCQUNORixNQUFNa2hFLGtCQUVOLE1BQU1ucUMsZUFBaUIxckIsY0FBYzJyQixxQkFBcUJoM0IsTUFBTyxRQUVqRSxJQUFJMi9FLFNBQVcsRUFDZixNQUFNcm1ELFdBQWE3MUIsS0FBS2lHLEtBQUtsSyxPQUFPaWdGLGdCQUFrQnA5RSxRQUFRQyxNQUFNd08sVUFBVXJOLEtBQUtpRyxLQUFLbEssT0FBT2lnRixpQkFBbUIsR0FDbEgsSUFBSyxNQUFNLzFFLFFBQVFxdEIsU0FDWnJ0QixNQUFTQSxLQUFLbEssUUFDZCxDQUFDLE9BQVEsU0FBVSxRQUFTLE9BQVEsU0FBU2lILFNBQVNpRCxLQUFLNUgsU0FJM0Q4RyxTQUFTNEMsVUFBVTlCLE9BQ2xCNHZCLFdBQVduMkIsTUFBS3k0QyxJQUFNQSxHQUFHL2hELE9BQVM2UCxLQUFLN1AsU0FLNUIsSUFBYjhsRixXQUNGQSxlQUFpQmYsVUFBVXpxRSxVQUU3Qm1sQixXQUFXMytCLEtBQUtpa0YsVUFBVUcsWUFBWVksU0FBVWoyRSxlQUc1Q2pHLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLENBQUMsVUFBVTg5RSxrQkFBbUJubUQsWUFDekQsQ0FFQSxzQkFBTTAzRSxDQUFrQmh4RyxPQUN0QixNQUNNbWpFLElBREluakUsTUFBTUksY0FDRkUsUUFBUSxTQUNoQms2QyxJQUFNbjRDLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPMjlDLGFBQ3JEM0MsSUFBSXJnQixPQUFPeDZCLE9BQU93akUsSUFBSTNpRSxRQUFRc2dCLE9BQVEsU0FDaENyZCxLQUFLaUcsS0FBSy9ILE9BQU8sQ0FBRSxxQkFBc0I2NEMsS0FDakQsQ0FFQSxlQUFNdTJELEdBQ0osTUFBTXYyRCxJQUFNLzJDLEtBQUtpRyxLQUFLbEssT0FBTzI5QyxZQUFjOTZDLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPMjlDLGFBQWUsR0FDbkczQyxJQUFJNy9DLEtBQUssWUFDSDhJLEtBQUtpRyxLQUFLL0gsT0FBTyxDQUFFLHFCQUFzQjY0QyxLQUNqRCxDQUVBLGNBQUFndkIsR0FDRSxNQUFNdm1FLE9BQVNRLEtBQUtpRyxLQUFLbEssT0FBTzQ5QyxTQUFTbjZDLE9BQVNaLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPNDlDLFNBQVNuNkMsUUFBVSxHQUM5R0EsT0FBT3RJLEtBQUssQ0FDVmQsS0FBTSxHQUNOOE0sSUFBSyxLQUNMRCxJQUFLLEtBQ0xnakUsU0FBVSxFQUNWQyxVQUFXLEdBQ1hDLFdBQVksRUFDWkMsWUFBYSxHQUNiQyxhQUFjLEVBQ2RDLGNBQWUsS0FFakJ0bUUsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUseUJBQTBCc0IsUUFDL0MsQ0FFQSxpQkFBQXdtRSxDQUFtQnpwRSxPQUNqQixNQUNNbWpFLElBREluakUsTUFBTUksY0FDRkUsUUFBUSxTQUNoQjJDLE9BQVNaLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPNDlDLFNBQVNuNkMsUUFDakVBLE9BQU9rM0IsT0FBT3g2QixPQUFPd2pFLElBQUkzaUUsUUFBUXNnQixPQUFRLEdBQ3pDcmQsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUseUJBQTBCc0IsUUFDL0MsQ0FFQSxvQkFBTXk5RCxDQUFnQjFnRSxNQUFPeS9FLGVBQWlCLFNBQzVDei9FLE1BQU1FLGlCQUNOLE1BQU1HLEdBQUtrdkIsRUFBRXZ2QixNQUFNSSxlQUFlMGdFLFFBQVEsU0FDcENwM0QsS0FBT2pHLEtBQUtpRyxLQUFLbEssT0FBT2lnRixnQkFBZ0J0OEUsTUFBS3pKLEdBQzFDQSxFQUFFbzhDLE1BQVF6MUMsR0FBRzBJLEtBQUssYUFFM0IsSUFBS1csS0FDSCxPQUVGLE1BQU01QyxlQUFpQm1LLFdBQVdDLFdBQ2hDeEgsS0FBS2xLLE9BQU91UixZQUFZcFgsTUFDeEIsQ0FDRW9NLE9BQU8sRUFDUGk5RCxRQUFTdi9ELEtBQUtpRyxLQUFLMHNELFdBS3ZCLEdBQUkvMUQsR0FBRzRpRSxTQUFTLFlBQWEsQ0FDM0IsTUFBTUMsUUFBVTdpRSxHQUFHOGQsU0FBUyxpQkFDNUIra0QsUUFBUWpDLFFBQVEsS0FBSyxJQUFNaUMsUUFBUXo4QyxVQUNyQyxLQUFPLENBQ0wsTUFBTTA4QyxJQUFNNXpDLEVBQUUsNkJBQTZCem9CLGtCQUNyQ3FLLE1BQVFvZSxFQUFFLHVDQUVoQjR6QyxJQUFJOXRCLE9BQU9sa0MsT0FDWDlRLEdBQUdnMUMsT0FBTzh0QixJQUFJRSxRQUNkRixJQUFJRyxVQUFVLElBQ2hCLENBQ0FqakUsR0FBRzRqQyxZQUFZLFdBQ2pCLENBRUEsbUJBQU1rN0MsQ0FBZW4vRSxNQUFPeS9FLGVBQWlCLFNBQzNDLE1BQU0vMUUsS0FBTzZsQixFQUFFdnZCLE1BQU1JLGVBQWVFLFFBQVEsU0FDdEN5WCxPQUFTck8sS0FBS1gsS0FBSyxXQUNuQjYyRSxNQUFRbDJFLEtBQUtYLEtBQUssU0FDbEI4MkUsVUFBWXA4RSxLQUFLaUcsS0FBS2xLLE9BQU9pZ0YsZ0JBQWdCM2pDLFdBQVU3M0IsR0FBTWxNLFFBQVVrTSxFQUFFNnhCLE1BQVEvOUIsUUFBWTZuRSxPQUFTMzdELElBQU0yN0QsUUFDbEgsR0FBSUMsV0FBYSxFQUFHLENBQ2xCLE1BQU12bUQsV0FBYTcxQixLQUFLaUcsS0FBS2xLLE9BQU9pZ0YsZ0JBQWtCcDlFLFFBQVFDLE1BQU13TyxVQUFVck4sS0FBS2lHLEtBQUtsSyxPQUFPaWdGLGlCQUFtQixHQUNsSG5tRCxXQUFXYSxPQUFPMGxELFVBQVcsU0FDdkJwOEUsS0FBS2lHLEtBQUsvSCxPQUFPLENBQUUsQ0FBQyxVQUFVODlFLGtCQUFtQm5tRCxZQUN6RCxDQUNGLENBRUEseUJBQVdwYyxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxTQUMzQkMsU0FBVSwwQ0FDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1I2VyxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUMzQnd2QyxRQUFTLENBQUMsb0JBQ1Z0dkMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxpQkFJakIsQ0FFQSxpQkFBQXFtQyxHQUNFLE1BQU10QyxjQUFnQjU0RCxNQUFNazdELG9CQUU1QixPQURBdkMsMEJBQTBCQyxjQUFlajFELE1BQ2xDaTFELGFBQ1QsQ0FFQSxhQUFNOWpDLEdBQ0osTUFBTUMsVUFBWS8wQixNQUFNODBCLFVBRXhCQyxVQUFVaXJELFVBQW9DLElBQXpCcjhFLEtBQUtpRyxLQUFLcTJFLFdBRS9CLE1BQU1uakMsSUFBTXY1QyxPQUFPMkssUUFBUXZLLEtBQUtpRyxLQUFLL0csT0FBT3dDLE1BQU1reEMsV0FBV2xzQyxNQUFRLENBQUMsR0FBR3JRLFFBQU9tSyxHQUFLQSxFQUFFLEtBQUl3RCxLQUFJeEQsR0FBS0EsRUFBRSxLQUVoRzJOLFlBQWM3USxLQUFLdkIsT0FBT21uQixJQUFJQyxNQUFNaTJCLGdCQUFnQixDQUFFOVksU0FBVXRnQyxLQUFLaUcsS0FBS2xLLE9BQU9vUyxNQUFPZ3JDLFNBQXdCLElBQVhBLElBQUksSUFBcUJBLElBQUksS0FFeEkvbkIsVUFBVXZOLE9BQVMxVixNQUFNOVgsUUFBT2dqRCxJQUFrQixVQUFaQSxHQUFHaDdDLE9BQ3pDK3lCLFVBQVVvOEUsV0FBYXIvRixNQUFNOVgsUUFBT2dqRCxJQUFrQixVQUFaQSxHQUFHaDdDLE9BRTdDK3lCLFVBQVV3ekMsZUFBNkMsSUFBNUJ4ekMsVUFBVXZOLE9BQU9qakIsT0FDNUN3d0IsVUFBVXE4RSxlQUFpRCxJQUFoQ3I4RSxVQUFVbzhFLFdBQVc1c0csT0FFaER3d0IsVUFBVXZOLE9BQU8xWCxLQUFLdkUsY0FBY3dFLGVBRXBDZ2xCLFVBQVUydUQsTUFBUSxHQUNsQixJQUFLLE1BQU9sa0YsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUttUyxNQUM3QzBxQixVQUFVMnVELE1BQU03b0YsS0FBSyxDQUNuQmdYLEdBQUlyUyxJQUNKekYsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVN0SCxPQUN6Qis4RCxXQUFtRSxLQUF2RGp6RCxLQUFLaUcsS0FBSy9HLE9BQU93QyxNQUFNa3hDLFdBQVdsc0MsTUFBUSxDQUFDLEdBQUc3SyxPQUc5RHUxQixVQUFVMnVELE1BQU01ekUsS0FBS3ZFLGNBQWN3RSxlQUVuQ2dsQixVQUFVMnlDLGlCQUFtQixHQUM3QixJQUFLLE1BQU1sb0UsT0FBT3RILEtBQUt5dkUsZ0JBQ3JCNXlDLFVBQVUyeUMsaUJBQWlCN3NFLEtBQUssQ0FBRTJFLElBQUsrbEMsSUFBS3RrQyxLQUFLQyxLQUFLQyxTQUFTakosS0FBS3l2RSxnQkFBZ0Jub0UsUUFHdEZ1MUIsVUFBVTZ5QyxtQkFBcUIsQ0FBQyxjQUFlLGVBQWdCLGNBQWUsZ0JBQWdCamhFLFNBQVNvdUIsVUFBVTlyQixLQUFLdkosT0FBTzQ5QyxTQUFTMWxDLFFBRXRJbWQsVUFBVTh5QyxlQUFpQixHQUMzQixJQUFLLE1BQU1yb0UsT0FBT3RILEtBQUs0dkUsZUFDeUIsSUFBMUM1dkUsS0FBSzR2RSxjQUFjdG9FLEtBQUt4RixPQUFPdUssUUFBZ0JyTSxLQUFLNHZFLGNBQWN0b0UsS0FBS3hGLE9BQU8yTSxTQUFTb3VCLFVBQVU5ckIsS0FBS3ZKLE9BQU80OUMsU0FBUzFsQyxVQUN4SG1kLFVBQVU4eUMsZUFBZWh0RSxLQUFLLENBQUUyRSxJQUFLK2xDLElBQUt0a0MsS0FBS0MsS0FBS0MsU0FBU2pKLEtBQUs0dkUsY0FBY3RvRSxLQUFLekYsUUErQnpGLE9BM0JBZzdCLFVBQVVnekMsa0JBQW9COW1FLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHFCQUV4RGswQixVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVeXpDLHdCQUEwQnIzRCxXQUFXQyxXQUM3QzJqQixVQUFVOXJCLEtBQUt2SixPQUFPeTlDLFVBQ3RCLENBQ0VsM0MsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVZ0csU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBQ3hCNm9CLFNBQ1QsQ0FFQSxhQUFBc0IsQ0FBZW4yQixNQUFPbzJCLFVBQ3BCLE1BQU01MkIsT0FBUzZDLFFBQVFDLE1BQU15ZixhQUFhcVUsV0FBVzUyQixPQUNqREEsT0FBTzI5QyxjQUNUL21CLFNBQVMsc0JBQXdCL3lCLE9BQU9KLE9BQ3RDekQsT0FBTzI5QyxhQUFlLEtBR3RCMzlDLE9BQU80OUMsU0FBU242QyxTQUNsQm16QixTQUFTLDBCQUE0Qi95QixPQUFPSixPQUFPekQsT0FBTzQ5QyxTQUFTbjZDLFFBQVUsS0FHN0MsMENBQTlCakQsTUFBTUksZUFBZXZHLE9BQ3ZCdThCLFNBQVMseUNBQTJDcDJCLE1BQU1JLGNBQWNzeUQsU0FHeEMseUNBQTlCMXlELE1BQU1JLGVBQWV2RyxPQUN2QnU4QixTQUFTLDBDQUE0Q3AyQixNQUFNSSxjQUFjc3lELFNBRzNFNXlELE1BQU1xMkIsY0FBY24yQixNQUFPbzJCLFNBQzdCLEVDL1BLLE1BQU0rNkUsdUJBQXVCanlCLFVBQ2xDLFdBQUFwMkUsSUFBZ0IrVCxNQUNkL2MsU0FBUytjLE1BQ1RwWixLQUFLMnRHLFVBQVksT0FDbkIsQ0FNQSx5QkFBV2wwRixHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUMzQkcsTUFBTyxJQUNQQyxPQUFRLElBQ1JzbUQsUUFBUyxDQUFDLG9CQUNWdHZDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsaUJBSWpCLENBR0EsWUFBSXRYLEdBQ0YsTUFBTyxnQ0FBZ0M1WixLQUFLaUcsS0FBSzVILGlCQUNuRCxDQUVBLGlCQUFBazVELEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxDQU1BLGFBQU05akMsR0FFSixNQUFNQyxVQUFZLzBCLE1BQU04MEIsVUFFeEJDLFVBQVVpckQsVUFBb0MsSUFBekJyOEUsS0FBS2lHLEtBQUtxMkUsV0FDL0JsckQsVUFBVXc4RSxxQkFBdUJ4OEUsVUFBVWlyRCxVQUFpQyxjQUFyQnI4RSxLQUFLL0YsT0FBT29FLEtBRW5FK3lCLFVBQVVuMEIsUUFBVXhCLGlCQUFpQndFLDhCQUNuQ0QsS0FBS2lHLEtBQUtoSixTQUdabTBCLFVBQVV1b0MsWUFBYyxHQUN4QixJQUFLLE1BQU85OUQsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUsrVixpQkFDN0M4bUIsVUFBVXVvQyxZQUFZemlFLEtBQUssQ0FDekJnWCxHQUFJclMsSUFDSnpGLEtBQU1GLE1BQ04rOEQsV0FBZ0QsSUFBckNqekQsS0FBS2lHLEtBQUtsSyxPQUFPOEssV0FBV2hMLE9BSTNDdTFCLFVBQVUydUQsTUFBUSxHQUNsQixJQUFLLE1BQU9sa0YsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUWhXLEtBQUttUyxNQUM3QzBxQixVQUFVMnVELE1BQU03b0YsS0FBSyxDQUNuQmdYLEdBQUlyUyxJQUNKekYsS0FBTWtILEtBQUtDLEtBQUtDLFNBQVN0SCxPQUN6Qis4RCxXQUFtRSxLQUF2RGp6RCxLQUFLaUcsS0FBSy9HLE9BQU93QyxNQUFNa3hDLFdBQVdsc0MsTUFBUSxDQUFDLEdBQUc3SyxPQTJCOUQsT0F4QkF1MUIsVUFBVTJ1RCxNQUFNNXpFLEtBQUt2RSxjQUFjd0UsZUFFbkNnbEIsVUFBVXk4RSxjQUFnQjd0RyxLQUFLaUcsS0FBS2xLLE9BQU84SyxXQUFXN1AsUUFDdERvNkIsVUFBVTA4RSxlQUNQOXRHLEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVd4UCxVQUM1QjJJLEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVd6UCxTQUUvQmc2QixVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVZ0csU0FBVzk1QixLQUFLc0csS0FBSzJFLEtBQ3hCNm9CLFNBQ1QsQ0FRQSxpQkFBQXBYLENBQW1CQyxNQUNqQjVkLE1BQU0yZCxrQkFBa0JDLE1BRW5CamEsS0FBS1YsUUFBUXF6RCxVQUVsQjE0QyxLQUFLdmEsS0FBSyxrQkFBa0JzeUIsTUFBTWh5QixLQUFLNDBELGVBQWUzN0QsS0FBSytHLE1BQzdELENBSUEsb0JBQU00MEQsQ0FBZ0JyNEQsT0FDcEJBLE1BQU1FLGlCQUNOLE1BQU02SixXQUFhL0osTUFBTUksY0FBY0UsUUFBUSxrQkFBa0JFLFFBQVF3ekMsZUFDbkV2d0MsS0FBS2lHLEtBQUtJLGVBQ2RDLFdBQ0E4SSxVQUFVN1MsT0FFZCxDQTZEQSxtQkFBTW0yQixDQUFlbjJCLE1BQU9vMkIsVUFDMUIsTUFBTTdyQixVQUFZNnJCLFNBQVMscUJBQXVCM3lCLEtBQUtpRyxLQUFLbEssT0FBTytLLFVBQ25FLEdBQUk5RyxLQUFLaUcsS0FBS2xLLE9BQU84SyxZQUFZN1AsUUFBUyxDQUN4QyxNQUFNaVEsZUFBaUIwckIsU0FBUywwQkFBNEIzeUIsS0FBS2lHLEtBQUtsSyxPQUFPa0wsZUFDN0UwckIsU0FBU3Y4QixLQUFPNlEsZUFBaUIsS0FBT0gsVUFBWSxHQUN0RCxNQUNFNnJCLFNBQVN2OEIsS0FBTzBRLFVBRWxCLE9BQU96SyxNQUFNcTJCLGNBQWNuMkIsTUFBT28yQixTQUNwQyxFQ3BNSyxNQUFNbzdFLHVCQUF1QnR5QixVQUNsQyx5QkFBV2hpRSxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREcsU0FBVSwrQ0FDVkQsUUFBUyxDQUFDLE9BQVEsT0FBUSxTQUMxQkcsTUFBTyxJQUNQQyxPQUFRLE9BQ1I2bkQsV0FBVyxFQUNYdkIsUUFBUyxDQUFDLFNBQ1Z0dkMsS0FBTSxDQUNKLENBQ0VDLFlBQWEsY0FDYkMsZ0JBQWlCLFFBQ2pCQyxRQUFTLGlCQUlqQixDQUVBLGlCQUFBcW1DLEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxDQUVBLGFBQU05akMsR0FDSixNQUFNQyxVQUFZLzBCLE1BQU04MEIsVUFxQnhCLE9BcEJBQyxVQUFVaXJELFVBQW9DLElBQXpCcjhFLEtBQUtpRyxLQUFLcTJFLFdBQy9CbHJELFVBQVVnRyxTQUFXOTVCLEtBQUtzRyxLQUFLMkUsS0FDL0I2b0IsVUFBVW9JLFFBQVV4NUIsS0FBS2lHLEtBQUt1ekIsUUFFOUJwSSxVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVrd0MsZ0NBQWtDOXpELFdBQVdDLFdBQ3JEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZaTBELE9BQ2xDLENBQ0VqL0QsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUloQnZoQyxTQUNULENBRUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUN4QkEsS0FBS3ZhLEtBQUssV0FBV3N5QixPQUFNejFCLE9BQVN5RCxLQUFLNm5HLFdBQVd0ckcsU0FDcEQwZCxLQUFLdmEsS0FBSyxlQUFlc3lCLE9BQU16MUIsUUFDN0JBLE1BQU1FLGlCQUNOdUQsS0FBS2lHLEtBQUtta0YsTUFBSyxFQUFLLElBRXRCbndFLEtBQUt2YSxLQUFLLHNCQUFzQnN5QixPQUFNejFCLFFBQ3BDQSxNQUFNRSxpQkFDTnVELEtBQUtpRyxLQUFLbWtGLE1BQUssRUFBSSxHQUV2QixDQVFBLFVBQUF5ZCxDQUFZdHJHLE9BQ1ZBLE1BQU1FLGlCQUVORixNQUFNa2hFLGtCQUVOLE9BRHFCM3hDLEVBQUV2dkIsTUFBTUksZUFDVG9uRyxPQUFPOWxFLFFBQVEsUUFDckMsRUN0RUssTUFBTSt2RSx3QkFBd0J2eUIsVUFJbkMseUJBQVdoaUUsR0FDVCxPQUFPN2EsUUFBUUMsTUFBTTZhLFlBQVlyZCxNQUFNb2QsZUFBZ0IsQ0FDckRFLFFBQVMsQ0FBQyxPQUFRLFFBQVMsVUFDM0JDLFNBQVUsMkNBQ1ZFLE1BQU8sSUFDUEMsT0FBUSxJQUNSc21ELFFBQVMsQ0FBQyxvQkFDVnR2QyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGlCQUlqQixDQUVBLGlCQUFBbFgsQ0FBbUJDLE1BQ2pCNWQsTUFBTTJkLGtCQUFrQkMsTUFFeEJBLEtBQ0d2YSxLQUFLLG1CQUNMc3lCLE9BQU1vckMsSUFBTTNoRSxpQkFBaUJhLHFCQUFxQjhnRSxHQUFJcDlELEtBQUtpRyxPQUNoRSxDQUVBLGlCQUFBc3hELEdBQ0UsTUFBTXRDLGNBQWdCNTRELE1BQU1rN0Qsb0JBRTVCLE9BREF2QywwQkFBMEJDLGNBQWVqMUQsTUFDbENpMUQsYUFDVCxDQUtBLGFBQU05akMsR0FDSixNQUFNQyxVQUFZLzBCLE1BQU04MEIsVUFDeEJDLFVBQVVuMEIsUUFBVXhCLGlCQUFpQndFLDhCQUE4QkQsS0FBS2lHLEtBQUtoSixRQUFTLENBQUU5QyxRQUFRLElBRWhHaTNCLFVBQVVvckQsZUFBaUIsR0FFM0IsSUFBSyxNQUFPM2dGLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVF2SyxLQUFLaUcsS0FBS2xLLE9BQU9zQyxNQUNyRG5JLE9BQ0ZrN0IsVUFBVW9yRCxlQUFldGxGLEtBQ3ZCM0MsS0FBSzA1RyxXQUFXcHlHLEtBQU90SCxLQUFLMDVHLFdBQVdweUcsS0FBTyxNQThCcEQsT0F6QkF1MUIsVUFBVXNyRCwrQkFBaUNsdkUsV0FBV0MsV0FDcEQyakIsVUFBVTlyQixLQUFLdkosT0FBT3VSLFlBQVlwWCxNQUNsQyxDQUNFb00sT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVODhFLCtCQUFpQzFnRyxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXlnRSxNQUNsQyxDQUNFenJFLE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVWt3QyxnQ0FBa0M5ekQsV0FBV0MsV0FDckQyakIsVUFBVTlyQixLQUFLdkosT0FBT3VSLFlBQVlpMEQsT0FDbEMsQ0FDRWovRCxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVVnRyxTQUFXOTVCLEtBQUtzRyxLQUFLMkUsS0FDeEI2b0IsU0FDVCxFQy9FSyxNQUFNKzhFLHdCQUF3QjF5QixVQUluQyx5QkFBV2hpRSxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxVQUMzQkMsU0FBVSwyQ0FDVkUsTUFBTyxJQUNQQyxPQUFRLElBQ1JzbUQsUUFBUyxDQUFDLG9CQUNWdHZDLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsaUJBSWpCLENBRUEsaUJBQUFxbUMsR0FDRSxNQUFNdEMsY0FBZ0I1NEQsTUFBTWs3RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZWoxRCxNQUNsQ2kxRCxhQUNULENBS0EsYUFBTTlqQyxHQUNKLE1BQU1DLFVBQVkvMEIsTUFBTTgwQixVQUV4QkMsVUFBVW9yRCxlQUFpQixHQUUzQixJQUFLLE1BQU8zZ0YsSUFBSzNGLFNBQVUwSixPQUFPMkssUUFBUXZLLEtBQUtpRyxLQUFLbEssT0FBT3NDLE1BQ3JEbkksT0FDRms3QixVQUFVb3JELGVBQWV0bEYsS0FDdkIzQyxLQUFLNjVHLFdBQVd2eUcsS0FBT3RILEtBQUs2NUcsV0FBV3Z5RyxLQUFPLE1BOEJwRCxPQXpCQXUxQixVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVU4OEUsK0JBQWlDMWdHLFdBQVdDLFdBQ3BEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZeWdFLE1BQ2xDLENBQ0V6ckUsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVa3dDLGdDQUFrQzl6RCxXQUFXQyxXQUNyRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWWkwRCxPQUNsQyxDQUNFai9ELE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVWdHLFNBQVc5NUIsS0FBS3NHLEtBQUsyRSxLQUN4QjZvQixTQUNULEVDekVLLE1BQU1pOUUseUJBQXlCaDNDLGVBQ3BDLHlCQUFXNTlDLEdBQ1QsT0FBTzdhLFFBQVFDLE1BQU02YSxZQUFZcmQsTUFBTW9kLGVBQWdCLENBQ3JERSxRQUFTLENBQUMsT0FBUSxVQUFXLFFBQVMsT0FBUSxXQUM5Q0csTUFBTyxJQUNQQyxPQUFRLElBQ1I2bkQsV0FBVyxFQUNYaG9ELFNBQVUsNkNBQ1ZnWCxTQUFVLENBQUMsQ0FBRUMsYUFBYyxTQUFVQyxhQUFjLGNBQ25EQyxLQUFNLENBQ0osQ0FDRUMsWUFBYSxhQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsaUJBSWpCLENBRUEsYUFBTUMsR0FJSixNQUFNQyxnQkFBa0IvMEIsTUFBTTgwQixVQUU5QkMsVUFBVXZxQixXQUFhLEdBQ25CN0csS0FBSy9GLE1BQU04QixPQUFPOEssV0FBV3luRyxPQUMvQmw5RSxVQUFVdnFCLFdBQVczUCxLQUFLb0csS0FBS0MsS0FBS0MsU0FBUyxzQkFHL0MsTUFBTThwRSxTQUFXdG5FLEtBQUsvRixNQUFNd0YsUUFBUSxPQUFRLFlBMEI1QyxPQXpCcUMyeEIsVUFBVWsyQyxjQUF2QixJQUFiQSxVQUNlQSxTQUN0QmwyQyxVQUFVazJDLFNBQ1psMkMsVUFBVTl4QixRQUFReWEsT0FBUyxJQUN0QnFYLFVBQVU5eEIsUUFBUXlhLE9BQVMsT0FFbENxWCxVQUFVc3JELCtCQUFpQ2x2RSxXQUFXQyxXQUNwRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWXBYLE1BQ2xDLENBQ0VvTSxPQUFPLEVBQ1BpOUQsUUFBU251QyxVQUFVdWhDLFdBSXZCdmhDLFVBQVU4OEUsK0JBQWlDMWdHLFdBQVdDLFdBQ3BEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZeWdFLE1BQ2xDLENBQ0V6ckUsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQU9oQnZoQyxTQUNULENBRUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUN4QkEsS0FBS3ZhLEtBQUssY0FBY3N5QixPQUFNMXZCLGVBQWtCdEMsS0FBS3V1RyxnQkFDckR0MEYsS0FDR3ZhLEtBQUssaUJBQ0xzeUIsT0FBTTF2QixtQkFBcUJ0QyxLQUFLd3VHLGVBQWVqeUcsU0FDbEQwZCxLQUFLdmEsS0FBSyxrQkFBa0JzeUIsTUFBTWh5QixLQUFLeXVHLGdCQUFnQngxRyxLQUFLK0csTUFNOUQsQ0FFQSxxQkFBTXl1RyxHQUNKLE1BQU1ubkMsU0FBV3RuRSxLQUFLL0YsTUFBTXdGLFFBQVEsT0FBUSxZQUN4QzZuRSxVQUNGdG5FLEtBQUswdUcsUUFBVTF1RyxLQUFLcXdELFNBQVN0MkMsT0FDN0IvWixLQUFLcXdELFNBQVN0MkMsT0FBUyxRQUV2Qi9aLEtBQUtxd0QsU0FBU3QyQyxPQUFTL1osS0FBSzB1RyxTQUFXLFVBRW5DMXVHLEtBQUsvRixNQUFNeTdCLFFBQVEsT0FBUSxZQUFhNHhDLFNBQ2hELENBRUEsaUJBQU1pbkMsR0FDSixNQUFNcFMsVUFBWXY5RixRQUFRQyxNQUFNd08sVUFDOUJyTixLQUFLL0YsTUFBTThCLE9BQU9DLFFBQVFDLE1BQU1rZ0csV0FBYSxJQUUvQ0EsVUFBVWpsRyxLQUFLLENBQUVkLEtBQU0sS0FBTUYsTUFBTyxhQUM5QjhKLEtBQUsvRixNQUFNaUUsT0FBTyxDQUFFLGlDQUFrQ2krRixXQUM5RCxDQUVBLG9CQUFNcVMsQ0FBZ0JqeUcsT0FDcEIsTUFFTThnQixNQUZTOWdCLE1BQU1JLGNBQ0dFLFFBQVEsVUFDVEUsUUFBUXNnQixNQUN6QjgrRSxVQUFZdjlGLFFBQVFDLE1BQU13TyxVQUM5QnJOLEtBQUsvRixNQUFNOEIsT0FBT0MsUUFBUUMsTUFBTWtnRyxXQUFhLE1BRTFDQSxZQUNMQSxVQUFVemxFLE9BQU9yWixNQUFPLFNBQ2xCcmQsS0FBSy9GLE1BQU1pRSxPQUFPLENBQUUsaUNBQWtDaStGLFlBQzlELENBRUEsWUFBQTVoQyxHQUNFbCtELE1BQU1rK0QsY0FFUixDQUtBLGFBQUE3bkMsQ0FBZW4yQixNQUFPbzJCLFVBQ3BCLE1BQU01MkIsT0FBUzZDLFFBQVFDLE1BQU15ZixhQUFhcVUsV0FBVzUyQixPQUNqREEsT0FBT0MsUUFBUUMsTUFBTWtnRyxZQUN2QnhwRSxTQUFTLGtDQUFvQy95QixPQUFPSixPQUNsRHpELE9BQU9DLFFBQVFDLE1BQU1rZ0csV0FBYSxLQUl0QzkvRixNQUFNcTJCLGNBQWNuMkIsTUFBT28yQixTQUM3QixFQ25ISyxNQUFNZzhFLHdCQUF3Qmx6QixVQUluQyx5QkFBV2hpRSxHQUNULE9BQU83YSxRQUFRQyxNQUFNNmEsWUFBWXJkLE1BQU1vZCxlQUFnQixDQUNyREUsUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUMzQkcsTUFBTyxJQUNQQyxPQUFRLElBQ1JnWCxLQUFNLENBQ0osQ0FDRUMsWUFBYSxjQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsWUFJakIsQ0FLQSxZQUFJdFgsR0FFRixNQUFPLGdEQUNULENBRUEsaUJBQUEyOUMsR0FDRSxNQUFNdEMsY0FBZ0I1NEQsTUFBTWs3RCxvQkFFNUIsT0FEQXZDLDBCQUEwQkMsY0FBZWoxRCxNQUNsQ2kxRCxhQUNULENBTUEsYUFBTTlqQyxHQUNKLE1BQU1DLFVBQVkvMEIsTUFBTTgwQixVQUV4QkMsVUFBVXc5RSxZQUFjLEdBRXhCeDlFLFVBQVVpckQsVUFBb0MsSUFBekJyOEUsS0FBS2lHLEtBQUtxMkUsV0FDM0JsckQsVUFBVWlyRCxXQUNaanJELFVBQVVpekIsY0FBZ0Jya0QsS0FBSy9GLE1BQU1vcUQsY0FDckNqekIsVUFBVTh5QixlQUFpQmxrRCxLQUFLL0YsTUFBTWlxRCxlQUN0Qzl5QixVQUFVdzlFLFlBQWM1dUcsS0FBS2lHLEtBQUtoTSxNQUFNa1UsTUFBTTlYLFFBQU80UCxRQUNqQyxVQUFkQSxLQUFLNUgsT0FDSDRILEtBQUtsSyxPQUFPOEssV0FBVzFQLFVBTy9CaTZCLFVBQVV3OUUsWUFBWXppRyxLQUFLdkUsY0FBY3dFLGdCQUczQ2dsQixVQUFVdW9DLFlBQWMsR0FDeEIsSUFBSyxNQUFPOTlELElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFoVyxLQUFLdVosa0JBQzdDc2pCLFVBQVV1b0MsWUFBWXppRSxLQUFLLENBQ3pCZ1gsR0FBSXJTLElBQ0p6RixLQUFNRixNQUNOKzhELFdBQWdELElBQXJDanpELEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVdoTCxPQUkzQ3UxQixVQUFVMnVELE1BQVEsR0FDbEIsSUFBSyxNQUFPbGtGLElBQUszRixTQUFVMEosT0FBTzJLLFFBQVFoVyxLQUFLbVMsTUFDN0MwcUIsVUFBVTJ1RCxNQUFNN29GLEtBQUssQ0FDbkIyM0csTUFBTzd1RyxLQUFLaUcsS0FBS2xLLE9BQU84eUcsTUFBTWh6RyxNQUFRLEVBQ3RDcVMsR0FBSXJTLElBQ0p6RixLQUFNa0gsS0FBS0MsS0FBS0MsU0FBU3RILE9BQ3pCKzhELFdBQW1FLEtBQXZEanpELEtBQUtpRyxLQUFLL0csT0FBT3dDLE1BQU1reEMsV0FBV2xzQyxNQUFRLENBQUMsR0FBRzdLLE9BbUM5RCxPQWhDQXUxQixVQUFVMnVELE1BQU01ekUsS0FBS3ZFLGNBQWN3RSxlQUVuQ2dsQixVQUFVcW9DLG9CQUM2QixJQUFyQ3o1RCxLQUFLaUcsS0FBS2xLLE9BQU84SyxXQUFXMU8sT0FDUyxJQUFyQzZILEtBQUtpRyxLQUFLbEssT0FBTzhLLFdBQVczTyxPQUNXLElBQXZDOEgsS0FBS2lHLEtBQUtsSyxPQUFPOEssV0FBVy9PLE9BRTlCczVCLFVBQVVzckQsK0JBQWlDbHZFLFdBQVdDLFdBQ3BEMmpCLFVBQVU5ckIsS0FBS3ZKLE9BQU91UixZQUFZcFgsTUFDbEMsQ0FDRW9NLE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVTA5RSxpQ0FBbUN0aEcsV0FBV0MsV0FDdEQyakIsVUFBVTlyQixLQUFLdkosT0FBT3VSLFlBQVl0VyxRQUNsQyxDQUNFc0wsT0FBTyxFQUNQaTlELFFBQVNudUMsVUFBVXVoQyxXQUl2QnZoQyxVQUFVa3dDLGdDQUFrQzl6RCxXQUFXQyxXQUNyRDJqQixVQUFVOXJCLEtBQUt2SixPQUFPdVIsWUFBWWkwRCxPQUNsQyxDQUNFai9ELE9BQU8sRUFDUGk5RCxRQUFTbnVDLFVBQVV1aEMsV0FJdkJ2aEMsVUFBVWdHLFNBQVc5NUIsS0FBS3NHLEtBQUsyRSxLQUN4QjZvQixTQUNULENBUUEsaUJBQUFwWCxDQUFtQkMsTUFDakI1ZCxNQUFNMmQsa0JBQWtCQyxNQUduQmphLEtBQUtWLFFBQVFxekQsV0FDbEIxNEMsS0FBS3ZhLEtBQUssa0JBQWtCc3lCLE1BQU1oeUIsS0FBSzQwRCxlQUFlMzdELEtBQUsrRyxPQUMzRGlhLEtBQUt2YSxLQUFLLG9CQUFvQnN5QixNQUFNaHlCLEtBQUsrdUcsaUJBQWlCOTFHLEtBQUsrRyxPQUNqRSxDQU1BLG9CQUFNNDBELENBQWdCcjRELE9BQ3BCQSxNQUFNRSxpQkFDTixNQUFNNkosV0FBYS9KLE1BQU1JLGNBQWNFLFFBQVEsa0JBQWtCRSxRQUFRd3pDLGVBQ25FdndDLEtBQUtpRyxLQUFLSSxlQUNkQyxXQUNBOEksVUFBVTdTLE9BRWQsQ0FFQSxzQkFBTXd5RyxDQUFrQnh5RyxPQUN0QkEsTUFBTUUsaUJBQ04sTUFBTTZKLFdBQWEvSixNQUFNSSxjQUFjRSxRQUFRLG9CQUFvQkUsUUFBUXd6QyxlQUNyRXZ3QyxLQUFLaUcsS0FBS0ksZUFBZUMsV0FDakMsRUMzSEssU0FBUzBvRyxtQkFDZCxNQUFNQyxnQkFBa0JDLFdBQVdydkcsVUFBVXN2RyxnQkFDN0NELFdBQVdydkcsVUFBVXN2RyxnQkFBa0IsU0FBVTV5RyxNQUFPNnlHLE1BQU9DLElBQUtwMUYsTUFDbEUsR0FBcUMsU0FBakNqYSxLQUFLNjFCLFdBQVd4QyxhQUF5QixNQUN2QixJQUFUcFosT0FDVG0xRixNQUFRcHZHLEtBQUt3UixRQUFRLEdBQUdvQyxjQUFjNVQsS0FBS1YsUUFBUWd3RyxRQUFRLEdBQUdDLGVBQWVyNUcsTUFDN0VtNUcsSUFBTSxJQUFJMW5HLE9BQU9BLE9BQU9nSCxPQUFPeWdHLE9BQVEsS0FDdkNuMUYsS0FBT2phLEtBQUt3UixRQUFRLEdBQUdvQyxjQUFjNVQsS0FBS1YsUUFBUWd3RyxRQUFRLEdBQUdyK0Usa0JBRS9ELE1BQU11K0UsV0FBYXh2RyxLQUFLd1IsUUFBUSxHQUFHb0MsY0FBYyx1QkFBeUI1VCxLQUFLcXBGLE1BQVEsS0FDakZvbUIsVUFBWXp2RyxLQUFLd1IsUUFBUSxHQUFHb0MsY0FBYyxzQkFBd0I1VCxLQUFLcXBGLE1BQVEsS0FDL0VockYsS0FBT214RyxXQUFXdDVHLE1BQ3hCLElBQUlpakQsSUFBTSxHQUNWLE9BQVE5NkMsTUFDTixJQUFLLGFBQ0wsSUFBSyxRQUNMLElBQUssUUFDTCxJQUFLLFNBQ0hveEcsVUFBVWgxRixjQUFjc2xCLE1BQU1DLFFBQVUsR0FDeENtWixJQUFNczJELFVBQVV2NUcsTUFDaEIsTUFDRixRQUNFdTVHLFVBQVVoMUYsY0FBY3NsQixNQUFNQyxRQUFVLE9BRzVDLE1BQU0wdkUsZUFBaUJOLE1BQ2pCTyxTQUFXRCxjQUF5QixLQUFUcnhHLE1BQXVCLEtBQVI4NkMsSUFDMUN5MkQsU0FBVyxJQUFJQyxJQUNmQyxVQUFZLElBQUlELElBQ2hCRSxvQkFBc0IsSUFBSUYsSUFHaEMsR0FBSUYsU0FBVSxDQUVaLE1BQU1LLGNBQWdCLENBQUNoZ0QsT0FBUWlnRCxZQUFhLEtBQzFDLElBQUtqZ0QsT0FDSCxPQUtGLEdBSHNCLGlCQUFYQSxTQUNUQSxPQUFTaHdELEtBQUs2MUIsV0FBV2k4QixRQUFRNTBELElBQUk4eUQsVUFFbENBLE9BQ0gsT0FFRixNQUFNa2dELFNBQVdsZ0QsT0FBTzNkLElBQ3BCeTlELFVBQVU3d0csSUFBSWl4RyxVQUVaRCxhQUFlRixvQkFBb0I5d0csSUFBSWl4RyxXQUN6Q0gsb0JBQW9COWdHLElBQUlpaEcsV0FJNUJKLFVBQVU3Z0csSUFBSWloRyxVQUNWRCxZQUNGRixvQkFBb0I5Z0csSUFBSWloRyxVQUV0QmxnRCxPQUFPQSxRQUNUZ2dELGNBQWNoZ0QsT0FBT0EsUUFDdkIsRUFHRTAvQyxjQUVGMXZHLEtBQUttd0csb0JBQW9CZCxJQUFLVyxlQXhGeEMsU0FBaUN0NUcsSUFBS2c1RyxhQUFjTixNQUFPL3dHLEtBQU04NkMsSUFBS3kyRCxTQUFVRSxVQUFXRSxlQUN6RixNQUFNemxHLFFBQVU3VCxJQUFJbS9CLFdBQVd4WSxPQUFTM21CLElBQUltL0IsV0FBVzJ2QixTQUdqRDRxRCxpQkFBbUIsSUFBSVAsSUFBSUMsV0FFakMsSUFBSyxNQUFNeDFELFNBQVMvdkMsUUFBUyxDQUMzQixNQUFNOGxHLFFBQVUzNUcsSUFBSTQ1RyxZQUFZaDJELE9BRWhDLEdBQUk4MUQsaUJBQWlCbnhHLElBQUlxN0MsTUFBTTBWLFFBQVEzZCxLQUFPaUksTUFBTTBWLFFBQ2xENC9DLFNBQVMzZ0csSUFBSW9oRyxhQUNSLENBQ0wsTUFBTUUsV0FBY2IsY0FBZ0JOLE1BQU0xaEQsS0FBSzhpRCxhQUFhQyxXQUFXLzVHLElBQUlnNkcsY0FBY3AyRCxTQUNuRnEyRCxVQUFzQixLQUFUdHlHLE1BQWVBLE9BQVNpOEMsTUFBTWo4QyxLQUMzQ3FJLEtBQU85RyxPQUFPbUUsS0FBS3UyQyxNQUFNcDdDLE9BQU93QyxNQUFNa3hDLFdBQVdsc0MsTUFBUSxDQUFDLEdBQzFEa3FHLFVBQXFCLEtBQVJ6M0QsS0FBOEIsSUFBaEJ6eUMsS0FBSzlGLFFBQWdCOEYsS0FBSzFELFNBQVNtMkMsS0FDaEVvM0QsV0FBYUksV0FBYUMsWUFFNUJoQixTQUFTM2dHLElBQUlvaEcsU0FDYkwsY0FBYzExRCxNQUFNMFYsUUFFeEIsQ0FDRixDQUNGLENBcUVRNmdELENBQXVCN3dHLEtBQU0wdkcsYUFBY0wsSUFBS2h4RyxLQUFNODZDLElBQUt5MkQsU0FBVUUsVUFBV0UsY0FDbEYsQ0FHQSxJQUFLLE1BQU03M0QsTUFBTWwrQixLQUFLN0UsaUJBQWlCLG1CQUNyQyxJQUFJK2lDLEdBQUducEMsVUFBVXlULFNBQVMsVUFHMUIsR0FBSTAxQixHQUFHbnBDLFVBQVV5VCxTQUFTLFVBQVcsQ0FDbkMsTUFBTTVjLE1BQVE4cEcsVUFBWUcsVUFBVTd3RyxJQUFJazVDLEdBQUdwN0MsUUFBUW16RyxVQUNuRC8zRCxHQUFHcFksTUFBTUMsU0FBWTJ2RSxVQUFZOXBHLE1BQVMsT0FBUyxPQUMvQ2txRyxvQkFBb0I5d0csSUFBSWs1QyxHQUFHcDdDLFFBQVFtekcsVUFDakNQLFVBQVk5cEcsT0FDZHN5QyxHQUFHbnBDLFVBQVVnVSxPQUFPLGFBR3RCbTFCLEdBQUducEMsVUFBVTJMLE9BQU8sYUFBY3JkLEtBQUt3MEQsUUFBUWcvQyxVQUFVMzRELEdBQUdwN0MsUUFBUVksTUFFeEUsTUFDRXc2QyxHQUFHcFksTUFBTUMsU0FBWTJ2RSxVQUFZQyxTQUFTM3dHLElBQUlrNUMsR0FBR3A3QyxRQUFRc3pHLFNBQVksT0FBUyxNQUdwRixNQUNFcEIsZ0JBQWdCcDJHLEtBQUttSCxLQUFNekQsTUFBTzZ5RyxNQUFPQyxJQUFLcDFGLEtBRWxELEVBRUErL0IsTUFBTTkvQixHQUFHLG9CQUFvQjVYLE1BQU81TCxJQUFLdWpCLEtBQU0zVSxRQUM3QyxHQUFvQyxTQUFoQzVPLElBQUltL0IsV0FBV3hDLGFBQXlCLENBQ3JDMzhCLElBQUltL0IsV0FBV2s3RSxlQUNacjZHLElBQUltL0IsV0FBV203RSxXQUV2QixNQUFNdGpCLE1BQVEsSUFBSSxJQUFJbWlCLElBQUl2cUcsS0FBSytYLE1BQU1obkIsUUFBT21xQixHQUFnQixxQkFBWEEsRUFBRXBxQixPQUE2QjROLEtBQUlpQyxNQUFRQSxLQUFLNUgsU0FDM0Y2K0IsT0FBUyxHQUNUK3pFLGFBQWdCdjZHLElBQUk0SSxRQUFRNHhHLFlBQVk3eUcsTUFBUSxHQUNoRDh5RyxZQUFlejZHLElBQUk0SSxRQUFRNHhHLFlBQVkvM0QsS0FBTyxHQUNwRGpjLE9BQU9obUMsS0FDTCxvQkFBc0JvRyxLQUFLQyxLQUFLQyxTQUFTLFlBQWMsYUFFekQsTUFBTTR6RyxXQUFhLENBQ2pCLENBQ0V2MUcsSUFBSyxZQUNMekYsS0FBTSwyQkFFUixDQUNFeUYsSUFBSyxPQUNMekYsS0FBTSxzQkFFUixDQUNFeUYsSUFBSyxPQUNMekYsS0FBTSxzQkFFUixDQUNFeUYsSUFBSyxhQUNMekYsS0FBTSw0QkFFUixDQUNFeUYsSUFBSyxRQUNMekYsS0FBTSx1QkFFUixDQUNFeUYsSUFBSyxRQUNMekYsS0FBTSx1QkFFUixDQUNFeUYsSUFBSyxRQUNMekYsS0FBTSx1QkFFUixDQUNFeUYsSUFBSyxTQUNMekYsS0FBTSx3QkFFUixDQUNFeUYsSUFBSyxTQUNMekYsS0FBTSx3QkFFUixDQUNFeUYsSUFBSyxTQUNMekYsS0FBTSx5QkFHVixJQUFLLE1BQU1pN0csYUFBYUQsV0FDbEIxakIsTUFBTTFxRixTQUFTcXVHLFVBQVV4MUcsTUFDM0JxaEMsT0FBT2htQyxLQUNMLGtCQUFvQm02RyxVQUFVeDFHLElBQU0sS0FBT28xRyxlQUFpQkksVUFBVXgxRyxJQUFNLHVCQUF5QixJQUFNLElBQ3pHeUIsS0FBS0MsS0FBS0MsU0FBUzZ6RyxVQUFVajdHLE1BQzdCLGFBSVIsTUFBTXNRLEtBQU8sR0FDYkEsS0FBS3hQLEtBQ0gsb0JBQXNCb0csS0FBS0MsS0FBS0MsU0FBUyxZQUFjLGFBRXpELElBQUssTUFBTTI3QyxPQUFPdjVDLE9BQU8ySyxRQUFRaFcsS0FBS21TLE1BQU0xQyxLQUFJeEQsSUFBYyxDQUFFME4sR0FBSTFOLEVBQUUsR0FBSXBLLEtBQU1rSCxLQUFLQyxLQUFLQyxTQUFTZ0QsRUFBRSxRQUFTMkwsS0FBS3ZFLGNBQWN3RSxlQUMvSDFGLEtBQUt4UCxLQUNILGtCQUNFaWlELElBQUlqckMsR0FDSixLQUFPaWpHLGNBQWdCaDRELElBQUlqckMsR0FBSyx1QkFBeUIsSUFBTSxJQUMvRGlyQyxJQUFJL2lELEtBQ0osYUFHTixJQUFJazdHLFNBQVdoMEcsS0FBS0MsS0FBS0MsU0FBUyx5QkFDakIsMEJBQWI4ekcsV0FDRkEsU0FBVyxNQUVicjNGLEtBQUt2YSxLQUFLLHFCQUFxQnkyRCxNQUFLLFdBQ2xDLE1BQU1uUixJQUFNbDVCLEVBQUU5ckIsTUFDZCxJQUFJaUcsS0FBTyxHQUdUQSxVQUZ3QixJQUFmWCxLQUFLK1gsTUFFUC9YLEtBQUsrWCxNQUFNM2QsTUFBSzhnQixHQUFLQSxFQUFFNnhCLE1BQVEyUyxJQUFJMS9DLEtBQUssaUJBRXhDNU8sSUFBSW0vQixXQUFXeFksTUFBTW5nQixJQUFJOG5ELElBQUkxL0MsS0FBSyxnQkFFdkNXLE1BQXNCLFVBQWRBLEtBQUs1SCxNQUNmMm1ELElBQUl0bEQsS0FBSyxLQUFLdWEsS0FBS2hVLEtBQUs3UCxLQUFPLE1BQVE2UCxLQUFLbEssUUFBUTBPLE1BQVEsS0FBTyxLQUFReEUsS0FBS2xLLFFBQVE4SyxZQUFZNVAsT0FBbUIsSUFBTXE2RyxTQUFXLElBQU0sSUFFbEosSUFDQXIzRixLQUNHdmEsS0FBSywyQkFDTG9wRixNQUNDLDRIQUNnR3B5RixJQUFJMnlGLE1BQVEsY0FBZ0Juc0QsT0FBTzc0QixLQUFLLElBRHhJLDRJQUUrSDNOLElBQUkyeUYsTUFBUSxjQUFnQjNpRixLQUFLckMsS0FBSyxJQUZySyx5QkFLSjRWLEtBQUt2YSxLQUFLLFVBQVU5RCxPQUFPbEYsSUFBSTRJLFFBQVFnd0csUUFBUSxHQUFHMzZFLFNBQVMxN0IsS0FBS3ZDLEtBQ2xFLElBRUosQ0MvTk8sTUFBTTY2RyxNQUNYLFdBQU9sa0YsR0FDTHpxQixPQUFPMnZDLE1BQU1pL0Qsc0JBQXNCdDZHLEtBQUssd0JBRXhDMEwsT0FBT3dDLEtBQUtvc0csc0JBQXNCdDZHLEtBQUssd0JBQ3ZDMEwsT0FBT3dDLEtBQUtvc0csc0JBQXNCdDZHLEtBQUssZUFDdkMwTCxPQUFPd0MsS0FBS29zRyxzQkFBc0J0NkcsS0FBSyxxQkFDdkMwTCxPQUFPNnVHLGFBQWFELHNCQUFzQnQ2RyxLQUFLLHdCQUMvQzBMLE9BQU82ckQsTUFBTStpRCxzQkFBc0J0NkcsS0FBSyx3QkFDeEMwTCxPQUFPOHVHLFNBQVNGLHNCQUFzQnQ2RyxLQUFLLHdCQUMzQzBMLE9BQU8rdUcsVUFBVUgsc0JBQXNCdDZHLEtBQUssd0JBQzVDMEwsT0FBT2d2RyxNQUFNSixzQkFBc0J0NkcsS0FBSyx3QkFDeENvRyxLQUFLdkIsT0FBT21uQixJQUFNLENBQ2hCQyxNQUFPb3VGLE1BRVgsQ0FNQSxlQUFPLy9CLEdBQ0wsT0FBTyxJQUFJN3BFLE9BQU8sS0FBTy9ILE9BQU9tRSxLQUFLd3RHLE1BQU1NLG9CQUFvQnh0RyxLQUFLLEtBQU8sb0JBQzdFLENBT0EsZ0JBQU8wdUQsQ0FBV2prRCxVQUNoQixJQUFLLE1BQU16USxRQUFRa3pHLE1BQU1PLG1CQUN2QixHQUFJaGpHLG9CQUFvQnlpRyxNQUFNTyxtQkFBbUJ6ekcsTUFDL0MsT0FBT0EsS0FBTyxLQUFPeVEsU0FBU3pRLE1BQVEsSUFBTSxJQUdoRCxNQUFPLEVBQ1QsQ0FPQSxjQUFPdzBELENBQVMvakQsVUFDZCxPQUFPeWlHLE1BQU14K0MsVUFBVWprRCxVQUFZbEgsY0FBY3dxRCxZQUFZdGpELFNBQVMxWSxLQUN4RSxDQU9BLHdCQUFPaXZGLENBQW1CbjNFLElBQ3hCLEdBQUlBLEdBQUksQ0FDTixNQUFNclMsSUFBTXFTLEdBQUd5QixRQUFRLGNBQWUsSUFDdEMsR0FBdUIsTUFBbkI5VCxJQUFJdWpCLFFBQVEsR0FDZCxPQUFPdmpCLEdBRVgsQ0FDQSxNQUFPLEVBQ1QsQ0FPQSw2QkFBT2s4QyxDQUF3QmpwQyxVQUM3QixPQUFPeWlHLE1BQU1sc0Isa0JBQWtCdjJFLFNBQVM1UCxPQUFPd0MsTUFBTWt4QyxXQUFXMWtDLEdBQ2xFLENBT0EsY0FBTzZqRyxDQUFTNTRELEtBQ2QsT0FBWSxJQUFSQSxJQUNLNzdDLEtBQUtDLEtBQUtDLFNBQVMsY0FDVCxJQUFSMjdDLE1BQ1RBLElBQU03N0MsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFHM0JJLEtBQUtDLEtBQUswVyxPQUFPMWYsS0FBS21TLEtBQUt5eUMsTUFBUSxtQ0FBb0MsQ0FBRUEsTUFDbEYsQ0FZQSw0QkFBYUMsRUFBaUIsU0FBVSxLQUFTOTdDLEtBQUtDLEtBQUt5MUQsS0FBSSxLQUFRLEVBQUksY0FBaUIsRUFBSSxhQUFnQixHQUFVLENBQUMsR0FDekgsSUFBSTdrRCxNQUFRLEdBQ1osTUFBTTh3RSxPQUFTMytDLFNBQVNqcUMsUUFBT2dqRCxJQUFvQixpQkFBUEEsS0FHNUMsR0FGQWxyQyxNQUFRbXlCLFNBQVNqcUMsUUFBT2dqRCxJQUFvQixpQkFBUEEsS0FFakM0bEMsT0FBT3IrRSxPQUFRLENBQ2pCLE1BQU1vTixZQUFjdWpHLE1BQU12NUQsbUJBQW1CLENBQUVDLFlBQWFzNUQsTUFBTXpwQixlQUFlN0ksUUFBUzVnRixLQUFNLElBQUsyMEQsS0FBTTdaLElBQUs2NEQsYUFBY241RCxjQUN4SG5oQixJQUFNLEdBQ1osSUFBSyxNQUFNdlUsU0FBUzg3RCxPQUFRLENBQzFCLE1BQU1oNUUsS0FBTytILE1BQU10TyxNQUFLOGdCLEdBQUtBLEVBQUV0aEIsTUFBTXdDLEtBQUtreEMsVUFBVTFrQyxLQUFPaVYsUUFDdkRsZCxNQUNGeXhCLElBQUl4Z0MsS0FBSytPLEtBRWIsQ0FDQSxHQUFJeXhCLElBQUk5MkIsT0FBU3ErRSxPQUFPcitFLE9BQVEsQ0FDOUIsTUFBTXF4RyxXQUFhLEdBQ25CLElBQUssTUFBTWhoRCxPQUFPdjVCLElBQ2hCdTZFLFdBQVcvNkcsS0FBSys1RCxJQUFJL3hELE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsS0FFL0IsSUFBUmlyQyxNQUNGQSxJQUFNNzdDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBRWxDNkwsR0FBR0MsY0FBY3VLLEtBQUtqVyxLQUFLQyxLQUFLMFcsT0FBTywyQ0FBNEMsQ0FBRWdyRSxPQUFRQSxPQUFPNW9GLFFBQU93VixJQUFNb21HLFdBQVdqdkcsU0FBUzZJLEtBQUl4SCxLQUFLLE1BQU8ydUQsS0FBTTdaLElBQUtvNEQsTUFBTVEsUUFBUTU0RCxPQUNoTCxDQUNBaHJDLE1BQVFBLE1BQU1uQyxPQUFPMHJCLElBQ3ZCLENBQ0EsT0FBT3ZwQixLQUNULENBU0Esc0JBQU8yc0MsQ0FBaUIzM0IsTUFBT3FlLE1BQzdCLElBQUkwTyxTQUFXLEdBQ2YsTUFBTWdqQixVQUFZdHpELE9BQU95ZSxPQUFPemYsUUFBUUMsTUFBTXMwRCxjQUFjNzFELEtBQUtDLEtBQUs2MUQsVUFBVTF4RCxNQUFNMnhELFdBQVd0dkQsTUFBUSxDQUFDLEdBQUluRixRQUFRQyxNQUFNczBELGNBQWM3MUQsS0FBS0MsS0FBSysxRCxhQUFhNXhELE1BQU0yeEQsV0FBV3R2RCxNQUFRLENBQUMsSUFJM0wsWUFIZ0MsSUFBckJtdkQsVUFBVS92QyxTQUNuQitzQixTQUFXZ2pCLFVBQVUvdkMsY0FFUSxJQUFoQnFlLEtBQUtuckMsT0FBeUJ1SixPQUFPSixPQUFPZ2lDLE1BQVFBLE1BQU1uckMsUUFBT21xQixHQUFLQSxFQUFFdGhCLE9BQU93QyxNQUFNa3hDLFdBQVcxa0MsS0FBT2lWLE9BQXVCLEtBQWIrc0IsVUFBbUJBLFdBQWExdkIsRUFBRXBxQixNQUNwSyxDQVFBLHFCQUFPMHhGLENBQWdCN0ksUUFDckIsR0FBc0IsaUJBQVhBLE9BQ1RBLE9BQVMsQ0FBQ0EsYUFDTCxRQUFzQixJQUFYQSxRQUFtRCxtQkFBbEJBLE9BQU81b0YsT0FDeEQsT0FFRixNQUFNNjdHLE9BQVMsQ0FBQyxFQUNWN0MsSUFBTWtDLE1BQU0vL0IsV0FDbEIsSUFBSyxNQUFNaHhELEtBQUt5K0QsT0FBUSxDQUN0QixNQUFNcGpGLElBQU0ya0IsRUFBRTNhLE1BQU13cEcsS0FDaEJ4ekcsV0FDNEIsSUFBbkJxMkcsT0FBT3IyRyxJQUFJLE1BQ3BCcTJHLE9BQU9yMkcsSUFBSSxJQUFNLENBQUMsUUFFa0IsSUFBM0JxMkcsT0FBT3IyRyxJQUFJLElBQUlBLElBQUksTUFDNUJxMkcsT0FBT3IyRyxJQUFJLElBQUlBLElBQUksSUFBTSxJQUUzQnEyRyxPQUFPcjJHLElBQUksSUFBSUEsSUFBSSxJQUFJM0UsS0FBSzJFLElBQUksSUFJcEMsQ0FDQSxNQUFNczJHLFdBQWEsR0FDbkIsSUFBSyxNQUFNcHZHLEtBQUttdkcsT0FBUSxDQUN0QixNQUFNbHRELElBQU0sR0FDWixJQUFLLE1BQU0vdUQsS0FBS2k4RyxPQUFPbnZHLEdBQ2pCbXZHLE9BQU9udkcsR0FBRzlNLEdBQUcySyxPQUFTLEVBQ3hCb2tELElBQUk5dEQsS0FBS2pCLFNBQWtCaThHLE9BQU9udkcsR0FBRzlNLEdBQUdvTyxLQUFLLEtBQU8sS0FFcEQyZ0QsSUFBSTl0RCxLQUFLakIsRUFBSSxNQUFRaThHLE9BQU9udkcsR0FBRzlNLEdBQUdvTyxLQUFLLEtBR3ZDMmdELElBQUlwa0QsT0FBUyxFQUNmdXhHLFdBQVdqN0csS0FBSzZMLFNBQWtCaWlELElBQUkzZ0QsS0FBSyxLQUFPLEtBRWxEOHRHLFdBQVdqN0csS0FBSzZMLEVBQUksTUFBUWlpRCxJQUFJM2dELEtBQUssSUFFekMsQ0FDQSxPQUFJOHRHLFdBQVd2eEcsT0FBUyxFQUNmLElBQUkrRyxPQUFPLEtBQU93cUcsV0FBVzl0RyxLQUFLLEtBQU8sTUFFM0MsSUFBSXNELE9BQU8sSUFBTXdxRyxXQUFXOXRHLEtBQUssSUFBTSxJQUNoRCxDQWtCQSw4QkFBYSt0RyxFQUFtQixZQUFhLEtBQU0sS0FBUzkwRyxLQUFLQyxLQUFLeTFELEtBQUksS0FBUSxFQUFLLE1BQVUsTUFBSyxjQUFpQixFQUFJLGFBQWdCLEdBQVUsQ0FBQyxHQUNwSixJQUFJcS9DLGlCQUFtQmQsTUFBTWUsdUJBQXVCLENBQUVyNkQsWUFBYTU1QyxLQUFNMjBELEtBQU03WixJQUFLMGEsTUFBT20rQyxhQUFjbjVELGNBS3pHLE9BSkltNUQsY0FBeUIsT0FBVGgvQyxPQUNsQnEvQyxXQUFhZCxNQUFNZ0IsaUJBQWlCRixXQUFZci9DLE9BRWxEcS9DLFdBQVdsbUcsS0FBS29sRyxNQUFNaUIsd0JBQ1RqQixNQUFNa0IsY0FBY0osV0FBWXg1RCxZQUMvQyxDQWdCQSx5QkFBYSthLEVBQWMsTUFBTyxLQUFTdDJELEtBQUtDLEtBQUt5MUQsS0FBSSxLQUFRLEVBQUssTUFBVSxNQUFLLGNBQWlCLEVBQUksYUFBZ0IsR0FBVSxDQUFDLEdBQ25JLElBQUs3dkMsT0FBMEIsaUJBQVZBLE1BQ25CLE1BQU8sR0FFVCxNQUFNcGMsTUFBUW9jLE1BQU10ZCxNQUFNMHJHLE1BQU0vL0IsWUFDaEMsT0FBS3pxRSxPQUdRLEtBQVRpc0QsT0FDRkEsS0FBTzExRCxLQUFLQyxLQUFLeTFELE1BRVp1K0MsTUFBTWEsa0JBQWtCLENBQUVuNkQsWUFBYSxJQUFJdHdDLE9BQU8sSUFBTUMsY0FBY0MsWUFBWXNiLE9BQVMsS0FBTTlrQixLQUFNMEksTUFBTSxHQUFJaXNELEtBQU03WixJQUFLMGEsTUFBT20rQyxhQUFjbjVELGVBTC9JLEVBTVgsQ0FjQSwrQkFBYWIsRUFBb0IsWUFBYSxLQUFNLEtBQVMxNkMsS0FBS0MsS0FBS3kxRCxLQUFJLEtBQVEsRUFBSSxjQUFpQixFQUFJLGFBQWdCLEdBQVUsQ0FBQyxHQUNySSxJQUFZLElBQVI3WixJQUVGLE9BREFwd0MsR0FBR0MsY0FBYzBVLE1BQU1wZ0IsS0FBS0MsS0FBSzBXLE9BQU8sbUNBQW9DLENBQUVrbEMsSUFBSzc3QyxLQUFLQyxLQUFLQyxTQUFTLGVBQy9GLEdBRVQsSUFBSTYwRyxpQkFBbUJyeUcsS0FBS3N5Ryx1QkFBdUIsQ0FBRXI2RCxZQUFhNTVDLEtBQU0yMEQsS0FBTTdaLElBQUswYSxNQUFPLE1BQU9tK0MsYUFBY241RCxjQUMzR201RCxjQUF5QixPQUFUaC9DLE9BQ2xCcS9DLFdBQWFkLE1BQU1nQixpQkFBaUJGLFdBQVlyL0MsT0FFbERxL0MsV0FBV2xtRyxLQUFLb2xHLE1BQU1pQixrQkFDdEIsTUFBTTVwQyxJQUFNLENBQUMsRUFDYixJQUFLLE1BQU04cEMsYUFBYUwsV0FDakJ6eUcsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUsrdkUsSUFBSzhwQyxVQUFVeHpHLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsTUFDNUUwNkQsSUFBSThwQyxVQUFVeHpHLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsSUFBTXdrRyxXQUc3QyxhQUFhbkIsTUFBTWtCLGNBQWM3eUcsT0FBT0osT0FBT29wRSxLQUFNL3ZCLFlBQ3ZELENBWUEsZ0JBQU96MUIsQ0FBV0QsTUFBTzZ2QyxLQUFPMTFELEtBQUtDLEtBQUt5MUQsS0FBTTdaLEtBQU0sRUFBTTY0RCxjQUFlLEdBQ3pFLE9BQVksSUFBUjc0RCxLQUNGcHdDLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUswVyxPQUFPLG1DQUFvQyxDQUFFa2xDLElBQUs3N0MsS0FBS0MsS0FBS0MsU0FBUyxlQUMvRixJQUVGK3pHLE1BQU0zNEQsY0FBYyxDQUFFejFCLE1BQU82dkMsS0FBTTdaLElBQUs2NEQsY0FDakQsQ0FhQSxvQkFBT3A1RCxFQUFlLE1BQU8sS0FBU3Q3QyxLQUFLQyxLQUFLeTFELEtBQUksS0FBUSxFQUFJLGNBQWlCLEVBQUksYUFBZ0IsR0FBVSxDQUFDLEdBQzlHLElBQUs3dkMsT0FBMEIsaUJBQVZBLE1BQ25CLE1BQU8sR0FFVCxJQUFZLElBQVJnMkIsSUFFRixPQURBcHdDLEdBQUdDLGNBQWMwVSxNQUFNcGdCLEtBQUtDLEtBQUswVyxPQUFPLG1DQUFvQyxDQUFFa2xDLElBQUs3N0MsS0FBS0MsS0FBS0MsU0FBUyxlQUMvRixHQUVULE1BQU1hLEtBQU84a0IsTUFBTXpXLE1BQU0sS0FBSyxHQUN4QnVyQyxZQUFjLElBQUl0d0MsT0FBTyxJQUFNQyxjQUFjQyxZQUFZc2IsT0FBUyxLQUN4RSxPQUFPb3VGLE1BQU12NUQsbUJBQW1CLENBQUVDLFlBQWE1NUMsS0FBTTIwRCxLQUFNN1osSUFBSzY0RCxhQUFjbjVELGFBQ2hGLENBa0JBLG1DQUFheTVELEVBQXdCLFlBQWEsS0FBTSxLQUFTaDFHLEtBQUtDLEtBQUt5MUQsS0FBSSxLQUFRLEVBQUssTUFBVSxNQUFLLGNBQWlCLEVBQUksYUFBZ0IsR0FBVSxDQUFDLEdBQ3pKLElBQUsvYSxZQUNILE1BQU8sR0FHVCxJQUFJdjFDLFFBQVUsR0FFVjVCLE1BQVEsRUFxQlosT0FwQkkrM0MsY0FDRSxDQUFDLE1BQU8sU0FBUzcxQyxTQUFTNndELFFBQzVCL3lELFFBRUUsQ0FBQyxNQUFPLGVBQWVrQyxTQUFTNndELFNBQ2xDL3lELE9BQWdCeEQsS0FBS3dpRCxNQUFNdmdELE9BSTNCLENBQUMsTUFBTyxTQUFTeUQsU0FBUzZ3RCxTQUM1Qm54RCxRQUFVQSxRQUFRc0osYUFBYXVsRyxNQUFNb0IsY0FBYyxDQUFFMTZELFlBQWE1NUMsS0FBTTIwRCxLQUFNN1osSUFBSzY0RCxhQUFjWSxZQUFhOXhHLFVBRzVHLENBQUMsTUFBTyxlQUFla0MsU0FBUzZ3RCxTQUNsQ254RCxRQUFVQSxRQUFRc0osYUFBYXVsRyxNQUFNc0IscUJBQXFCLENBQUU1NkQsWUFBYTU1QyxLQUFNMjBELEtBQU03WixJQUFLNjRELGFBQWNZLFlBQWE5eEcsVUFHbkgrM0MsYUFDRmk2RCxnQkFBZ0JDLG1CQUFtQixDQUFFMTFHLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMseUJBQTBCdzFHLElBQUssTUFFekZ0d0csT0FDVCxDQWFBLDBCQUFhaXdHLEVBQWUsWUFBYSxLQUFNLEtBQVNyMUcsS0FBS0MsS0FBS3kxRCxLQUFJLEtBQVEsRUFBSyxjQUFpQixFQUFJLFlBQWdCLEdBQU0sQ0FBQyxHQUM3SCxJQUFLL2EsWUFDSCxNQUFPLEdBRUksS0FBVCthLE9BQ0ZBLEtBQU8xMUQsS0FBS0MsS0FBS3kxRCxPQUVQLElBQVI3WixNQUNGQSxJQUFNNzdDLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGFBRzlCMDFHLFlBQWMsR0FDaEJFLGdCQUFnQkMsbUJBQW1CLENBQUUxMUcsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUyx5QkFBMEJ3MUcsSUFBSzV3RyxLQUFLMEksTUFBTSxJQUFNOG5HLGVBR2pILE1BQU1LLGFBQWUxQixNQUFNMkIsZ0JBQWdCLEdBQUc3MEcsVUFFeEM4MEcsbUJBQXFCNzFHLEtBQUsyMUcsZUFBZTU4RyxRQUFRTCxJQUNyRCxNQUFNNDhDLFVBQVk1OEMsRUFBRXlKLFFBQVEsT0FBUSxhQUNwQyxRQUF5QixJQUFkbXpDLFVBQ1QsT0FBTyxFQUVULE1BQU1sc0MsS0FBUWtzQyxVQUFVbHNDLE1BQVEsR0FDMUIwc0csY0FBd0IsSUFBUmo2RCxLQUFpRCxJQUFoQ3Y1QyxPQUFPMkssUUFBUTdELE1BQU05RixRQUFpQmhCLE9BQU9DLFVBQVVDLGVBQWVqSCxLQUFLNk4sS0FBTXl5QyxNQUFRenlDLEtBQUt5eUMsS0FDckksT0FBT2xCLFlBQVl5VixLQUFLOWEsVUFBVTFrQyxLQUFPLENBQUM4a0QsS0FBT2cvQyxhQUFlLEtBQU8sS0FBTWh2RyxTQUFTNHZDLFVBQVVvZ0IsT0FBU29nRCxnQkFHM0csWUFBMkJ2MUcsSUFBdkJzMUcsbUJBQ0ssR0FHRkEsa0JBQ1QsQ0FZQSxpQ0FBYU4sRUFBc0IsWUFBYSxLQUFNLEtBQVN2MUcsS0FBS0MsS0FBS3kxRCxLQUFJLEtBQVEsRUFBSyxjQUFpQixFQUFJLFlBQWdCLElBQzdILElBQUsvYSxZQUNILE1BQU8sR0FFSSxLQUFUK2EsT0FDRkEsS0FBTzExRCxLQUFLQyxLQUFLeTFELE9BRVAsSUFBUjdaLE1BQ0ZBLElBQU03N0MsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsYUFHbEMsTUFBTSt1RSxhQUFlc2xDLE1BQU04QixnQkFBZ0JoMUcsTUFBTWpJLEtBQ2pELElBQUlrOUcsZUFBaUIsR0FFakJ4eUcsTUFBUSxFQUNaLElBQUssTUFBTWt1QixRQUFRMXhCLEtBQUt3aUQsTUFDbEI4eUQsWUFBYyxJQUNoQkUsZ0JBQWdCQyxtQkFBbUIsQ0FBRTExRyxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHlCQUEwQncxRyxJQUFLNXdHLEtBQUswSSxNQUFjLElBQVJoSyxNQUFjOHhHLGVBQ3ZIOXhHLFNBRUVrdUIsS0FBS3FFLGVBQWlCNDRDLGVBQ25CajlDLEtBQUsraEYsZUFDRi9oRixLQUFLZ2lGLFdBRWJzQyxlQUFpQkEsZUFBZXRuRyxPQUFPZ2pCLEtBQUszUixNQUFNaG5CLFFBQVFtcUIsSUFDeEQsR0FBNEMsaUJBQWpDQSxFQUFFdGhCLE9BQU93QyxNQUFNa3hDLFdBQVcxa0MsR0FDbkMsT0FBTyxFQUVULE1BQU14SCxLQUFROFosRUFBRXRoQixNQUFNd0MsS0FBS2t4QyxVQUFVbHNDLE1BQVEsQ0FBQyxFQUN4QzBzRyxjQUF3QixJQUFSajZELEtBQWlELElBQWhDdjVDLE9BQU8ySyxRQUFRN0QsTUFBTTlGLFFBQWlCaEIsT0FBT0MsVUFBVUMsZUFBZWpILEtBQUs2TixLQUFNeXlDLE1BQVF6eUMsS0FBS3l5QyxLQUNySSxPQUFPbEIsWUFBWXlWLEtBQUtsdEMsRUFBRXRoQixNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLEtBQU8sQ0FBQzhrRCxLQUFPZy9DLGFBQWUsS0FBTyxLQUFNaHZHLFNBQVN3ZCxFQUFFdGhCLE1BQU13QyxLQUFLa3hDLFVBQVVvZ0IsT0FBU29nRCxrQkFJekksT0FBT0UsY0FDVCxDQVFBLHVCQUFPZCxDQUFrQjkxRyxFQUFHMGpCLEdBQzFCLE1BQU1tekYsR0FBS3R2RyxTQUFTdkgsRUFBRXdDLE1BQU13QyxLQUFLa3hDLFVBQVVlLFNBQVUsSUFDL0M2L0QsR0FBS3Z2RyxTQUFTbWMsRUFBRWxoQixNQUFNd0MsS0FBS2t4QyxVQUFVZSxTQUFVLElBQ3JELEdBQUk0L0QsS0FBT0MsR0FBSSxDQUNiLE1BQU1DLEdBQUsvMkcsYUFBYWtDLFFBQVE4MEcsU0FBU0MsVUFFekMsT0FBSUYsS0FET3J6RixhQUFheGhCLFFBQVE4MEcsU0FBU0MsVUFFaEMsRUFFQ0YsSUFBTSxFQUFJLENBRXRCLENBQ0EsT0FBT0QsR0FBS0QsRUFDZCxDQU1BLHNCQUFPTCxDQUFpQi92RixPQUN0QixNQUFNOWtCLEtBQU84a0IsTUFBTXpXLE1BQU0sS0FBSyxHQUN4QnVtRyxhQUFlMUIsTUFBTU0sbUJBQW1CeHpHLE1BQzlDLElBQUs0MEcsYUFHSCxNQUZBbHFHLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBSzBXLE9BQU8sd0NBQ3ZDOUksUUFBUTIrQixJQUFJLFVBQVczbUIsT0FDakIsSUFBSW5MLE1BRVosT0FBT2k3RixZQUNULENBRUEsNkJBQVdwQixHQUNULE1BQU8sQ0FDTG4xRyxFQUFHLFNBQ0gwekIsRUFBRyxRQUNINVAsRUFBRyxRQUNIb3pGLEdBQUksVUFDSnZ3RixFQUFHLFNBQ0h6VixFQUFHLFlBQ0hpbUcsR0FBSSxTQUNKNTlHLEVBQUcsU0FFUCxDQU1BLHNCQUFPbzlHLENBQWlCbHdGLE9BQ3RCLE1BQU05a0IsS0FBTzhrQixNQUFNelcsTUFBTSxLQUFLLEdBQ3hCdS9ELGFBQWVzbEMsTUFBTU8sbUJBQW1CenpHLE1BQzlDLElBQUs0dEUsYUFHSCxNQUZBbGpFLEdBQUdDLGNBQWN1SyxLQUFLalcsS0FBS0MsS0FBSzBXLE9BQU8sd0NBQ3ZDOUksUUFBUTIrQixJQUFJLFVBQVczbUIsT0FDakIsSUFBSW5MLE1BRVosT0FBT2kwRCxZQUNULENBRUEsNkJBQVc2bEMsR0FDVCxNQUFPLENBQ0xwMUcsRUFBRzYxQyxNQUNIbmlCLEVBQUcwakYsS0FDSHR6RixFQUFHcGIsS0FDSHd1RyxHQUFJbkMsYUFDSnB1RixFQUFHb3JDLE1BQ0g3Z0QsRUFBRzhqRyxTQUNIbUMsR0FBSWxDLFVBQ0oxN0csRUFBRzI3RyxNQUVQLENBS0EsMEJBQWFhLENBQWVKLFdBQVl4NUQsYUFDdEMsTUFBTTRYLElBQU00aEQsV0FBV3p4RyxPQUN2QixJQUFJRSxNQUFRLEVBQ1osSUFBSyxNQUFNNkQsVUFBVTB0RyxXQUNmeDVELGNBQ0ZpNkQsZ0JBQWdCQyxtQkFBbUIsQ0FBRTExRyxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHlCQUEwQncxRyxJQUFLNXdHLEtBQUswSSxNQUFNaEssTUFBUTJ2RCxPQUNqSDN2RCxPQUFnQixLQUVadXhHLFdBQVcxdEcsa0JBQW1CL0YsUUFBUTgwRyxTQUFTQyxZQUNuRHRCLFdBQVcxdEcsY0FBZ0J1QixTQUFTbXNHLFdBQVcxdEcsUUFBUWhILE9BTTNELE9BSElrN0MsYUFDRmk2RCxnQkFBZ0JDLG1CQUFtQixDQUFFMTFHLE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMseUJBQTBCdzFHLElBQUssTUFFekZYLFVBQ1QsQ0FNQSx1QkFBT0UsQ0FBa0J3QixRQUFTL2dELE1BQ2hDLE1BQU00VixJQUFNbXJDLFFBQVE5bkcsUUFBTyxDQUFDbWtCLEVBQUc1UCxLQUM3QjRQLEVBQUU1UCxFQUFFdGhCLE1BQU13QyxLQUFLa3hDLFVBQVUxa0MsSUFBTWtpQixFQUFFNVAsRUFBRXRoQixNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLEtBQU9zUyxFQUFFdGhCLE1BQU13QyxLQUFLa3hDLFVBQVVvZ0IsT0FBU0EsS0FDeEY1aUMsSUFDTixDQUFDLEdBQ0osT0FBTzJqRixRQUFRMTlHLFFBQU9tcUIsR0FBcUMsT0FBaENBLEVBQUV0aEIsTUFBTXdDLEtBQUtreEMsVUFBVW9nQixPQUFrQjRWLElBQUlwb0QsRUFBRXRoQixNQUFNd0MsS0FBS2t4QyxVQUFVMWtDLEtBQ2pHLENBYUEsK0JBQWE4bEcsRUFBb0IsWUFBYSxLQUFNLEtBQVMxMkcsS0FBS0MsS0FBS3kxRCxLQUFJLEtBQVEsRUFBSyxjQUFpQixFQUFJLFlBQWdCLEdBQU0sQ0FBQyxHQUNsSTduRCxRQUFRb0ksS0FBSyxzREFDYixJQUFJODRELGdCQUFrQmtsQyxNQUFNb0IsY0FBYyxDQUFFMTZELFlBQWE1NUMsS0FBTTIwRCxLQUFNN1osSUFBSzY0RCxhQUFjWSxjQUt4RixPQUpJWixjQUF5QixPQUFUaC9DLE9BQ2xCcVosVUFBWWtsQyxNQUFNZ0IsaUJBQWlCbG1DLFVBQVdyWixPQUVoRHFaLFVBQVVsZ0UsS0FBS29sRyxNQUFNaUIsa0JBQ2RubUMsU0FDVCxDQWFBLG1DQUFhNG5DLEVBQXdCLFlBQWEsS0FBTSxLQUFTMzJHLEtBQUtDLEtBQUt5MUQsS0FBSSxLQUFRLEVBQUssY0FBaUIsRUFBSSxZQUFnQixJQUMvSDduRCxRQUFRb0ksS0FBSywwREFDYixJQUFJd2dHLGNBQWdCeEMsTUFBTXNCLHFCQUFxQixDQUFFNTZELFlBQWE1NUMsS0FBTTIwRCxLQUFNN1osSUFBSzY0RCxhQUFjWSxjQUs3RixPQUpJWixjQUF5QixPQUFUaC9DLE9BQ2xCK2dELFFBQVV4QyxNQUFNZ0IsaUJBQWlCd0IsUUFBUy9nRCxPQUU1QytnRCxRQUFRNW5HLEtBQUtvbEcsTUFBTWlCLHdCQUNOakIsTUFBTWtCLGNBQWNzQixRQUFTbkIsWUFBYyxFQUMxRCxFQ2xtQkYsTUFBTSxvQkFBeUJoMEcsUUFBUTBHLEtBQUs0dUcsaUJBQW1CLENBQUMsRUFHMURDLDZCQUF5RCxJQUF2QkMsbUJBQXFDLFFBQVdBLG1CQUV6RSxNQUFNQyw0QkFBNEJGLHdCQUMvQyxlQUFPRyxHQUVMLElBQUsxMUcsUUFBUUMsTUFBTUMsZUFBZXhCLEtBQUt5QixRQUFTLE1BQzlDLE9BR0ZhLE9BQU95ZSxPQUFPemIsT0FBTzJ4RyxlQUFlQyxXQUFZLENBQzlDQyxvQkFBcUJKLHNCQUd2QnowRyxPQUFPeWUsT0FBT3piLE9BQU8yeEcsZUFBZUcsVUFBVyxDQUM3Q0Qsb0JBQXFCLCtCQUd2QkUsb0JBQW9CQyxjQUNsQkwsZUFDQSxPQUNBMzFHLFFBQVFpMkcsYUFBYUMsT0FBT0MscUJBQzVCLENBQ0VybkIsTUFBTyxDQUNMLHVCQUVGc25CLGFBQWEsSUFJakIsTUFBTUMsZUFBaUJDLFdBQVdyMUcsVUFBVXMxRyxhQUM1Q0QsV0FBV3IxRyxVQUFVczFHLGFBQWUsU0FBVTU0RyxPQUU1QyxHQURBMDRHLGVBQWVwOEcsS0FBS21ILEtBQU16RCxPQUN0QnNXLE9BQU91aUcsdUJBQXVCRixXQUFZLENBQzVDLE1BQU1wd0IsWUFBY2p5RSxPQUFPdWlHLFlBQVlDLFFBQVE5NEcsT0FDL0MsSUFBSyxNQUFNKzRHLFVBQVV6aUcsT0FBT2hHLE1BQU0wb0csUUFBUS92RCxTQUNwQzh2RCxPQUFPRSxVQUFVbi9HLFFBQU8rcEIsSUFBTUEsRUFBRXRpQixXQUFVNEIsTUFBSzBnQixHQUFLQSxFQUFFcmtCLGtCQUFrQnM0Ryx1QkFBd0JpQixPQUFPL2pHLE9BQU9ra0csWUFBWUMsVUFBVTV3QixjQUN0SXd3QixPQUFPRSxVQUFVbi9HLFFBQU8rcEIsSUFBTUEsRUFBRXRpQixXQUFVa0csS0FBSTFCLE1BQU84ZCxLQUF1RCxVQUFyQ0EsRUFBRXJrQixPQUFPNDVHLCtCQUEwQ3YxRixFQUFFcmtCLE9BQU82NUcsdUJBQXdCLEdBR2pLLENBQ0YsRUFFQSxNQUFNQyxnQkFBa0JYLFdBQVdyMUcsVUFBVWkyRyxjQUM3Q1osV0FBV3IxRyxVQUFVaTJHLGNBQWdCLFNBQVV2NUcsT0FFN0MsR0FEQXM1RyxnQkFBZ0JoOUcsS0FBS21ILEtBQU16RCxPQUN2QnNXLE9BQU91aUcsdUJBQXVCRixXQUFZLENBQzVDLE1BQU1wd0IsWUFBY2p5RSxPQUFPdWlHLFlBQVlDLFFBQVE5NEcsT0FDL0MsSUFBSyxNQUFNKzRHLFVBQVV6aUcsT0FBT2hHLE1BQU0wb0csUUFBUS92RCxTQUNwQzh2RCxPQUFPRSxVQUFVbi9HLFFBQU8rcEIsSUFBTUEsRUFBRXRpQixXQUFVNEIsTUFBSzBnQixHQUFLQSxFQUFFcmtCLGtCQUFrQnM0Ryx1QkFBd0JpQixPQUFPL2pHLE9BQU9ra0csWUFBWUMsVUFBVTV3QixjQUN0SXd3QixPQUFPRSxVQUFVbi9HLFFBQU8rcEIsSUFBTUEsRUFBRXRpQixXQUFVa0csS0FBSTFCLE1BQU84ZCxLQUF1RCxVQUFyQ0EsRUFBRXJrQixPQUFPNDVHLCtCQUEwQ3YxRixFQUFFcmtCLE9BQU9nNkcsd0JBQXlCLEdBR2xLLENBQ0YsRUFFQWpuRyxTQUFTd2UsS0FBS3l2QyxpQkFBaUIsYUFBYXo2RCxlQUFnQi9GLE9BQzFELEdBQUlzVyxPQUFPdWlHLHVCQUF1QkYsV0FBWSxDQUM1QyxNQUFNYyxRQUFVbmpHLFFBQVFuYyxLQUFLdS9HLFVBQVVDLFFBQVFGLFFBQy9DLElBQUtBLFFBQ0gsT0FFRixNQUFNbHhCLFlBQWNqeUUsT0FBT3VpRyxZQUFZQyxRQUFROTRHLE9BQy9DLElBQUk0NUcsWUFBYSxFQUNqQixJQUFLLE1BQU1iLFVBQVV6aUcsT0FBT2hHLE1BQU0wb0csUUFBUS92RCxTQUNwQzh2RCxPQUFPRSxVQUFVbi9HLFFBQU8rcEIsSUFBTUEsRUFBRXRpQixXQUFVNEIsTUFBSzBnQixHQUFLQSxFQUFFcmtCLGtCQUFrQnM0Ryx1QkFBd0JpQixPQUFPL2pHLE9BQU9ra0csWUFBWUMsVUFBVTV3QixlQUN0SXF4QixpQkFBbUJiLE9BQU9FLFVBQVVuL0csUUFBTytwQixJQUFNQSxFQUFFdGlCLFdBQVVtTyxRQUFPM0osTUFBTzh0QixFQUFHaFEsS0FDNUUsTUFBTS9JLFFBQVUrSSxFQUFFcmtCLE9BQU80NUcsd0JBS3pCLE9BSlUsSUFBTnQrRixJQUFxQixJQUFOQSxHQUNqQmxNLFFBQVF1UyxNQUFNMEMsRUFBRXppQixLQUFPLDZCQUV6Qnl5QixFQUFJQSxHQUFLL1ksQ0FDRitZLElBQ04sSUFJTHRoQixTQUFTcXJFLGVBQWUsU0FBU3A2QyxNQUFNcTJFLE9BRHJDRCxXQUM4QyxVQUVBLEVBRXBELENBQ0YsR0FDRixDQUVBLG1CQUFPRSxHQUNMLE1BQU8sQ0FDTEMsVUFBVyxJQUFJMTNHLFFBQVEwRyxLQUFLcytDLE9BQU8yeUQsZ0JBQWdCLENBQ2pEajBHLE9BQU8sRUFDUHVzQyxRQUFRLEVBQ1IzZCxRQUFTLGVBQ1Q3ekIsTUFBTyx1Q0FDUHVxRCxLQUFNLHdDQUVSNHVELFVBQVcsSUFBSTUzRyxRQUFRMEcsS0FBS3MrQyxPQUFPMnlELGdCQUFnQixDQUNqRGowRyxPQUFPLEVBQ1B1c0MsUUFBUSxFQUNSeHhDLE1BQU8seUNBRVRvNUcsV0FBWSxJQUFJNzNHLFFBQVEwRyxLQUFLcytDLE9BQU8yeUQsZ0JBQWdCLENBQ2xEajBHLE9BQU8sRUFDUHVzQyxRQUFRLEVBQ1J4eEMsTUFBTywwQ0FHYixDQUdBLDJCQUFNczRHLEdBQ0osSUFDRSxNQUFNaG9HLEdBQUssSUFBSS9PLFFBQVFDLE1BQU02M0csY0FBYyxRQUFTLFNBQVUsV0FBWSxJQUFJMTJHLEtBQUtzMkcsZ0JBQ25GLGFBQWEzb0csR0FBRzlVLEtBQUs4OUcsV0FBWTMyRyxLQUFLNk0sTUFBTzdNLEtBQUtzMUcsT0FBUXQxRyxLQUFLdXJHLFNBQ2pFLENBQUUsTUFBT3ZnRyxLQUNQRyxRQUFRdVMsTUFBTTFTLElBQ2hCLENBQ0YsQ0FHQSwyQkFBTTRxRyxHQUNKLElBQ0UsTUFBTWpvRyxHQUFLLElBQUkvTyxRQUFRQyxNQUFNNjNHLGNBQWMsUUFBUyxTQUFVLFdBQVksSUFBSTEyRyxLQUFLdzJHLGdCQUNuRixhQUFhN29HLEdBQUc5VSxLQUFLODlHLFdBQVkzMkcsS0FBSzZNLE1BQU83TSxLQUFLczFHLE9BQVF0MUcsS0FBS3VyRyxTQUNqRSxDQUFFLE1BQU92Z0csS0FDUEcsUUFBUXVTLE1BQU0xUyxJQUNoQixDQUNGLENBR0EsNEJBQU0rcUcsR0FDSixJQUNFLE1BQU1wb0csR0FBSyxJQUFJL08sUUFBUUMsTUFBTTYzRyxjQUFjLFFBQVMsU0FBVSxXQUFZLElBQUkxMkcsS0FBS3kyRyxpQkFDbkYsYUFBYTlvRyxHQUFHOVUsS0FBSzg5RyxXQUFZMzJHLEtBQUs2TSxNQUFPN00sS0FBS3MxRyxPQUFRdDFHLEtBQUt1ckcsU0FDakUsQ0FBRSxNQUFPdmdHLEtBQ1BHLFFBQVF1UyxNQUFNMVMsSUFDaEIsQ0FDRixDQUVBLGdDQUFhNHJHLENBQXFCbmxELFNBQ2hDLE1BQU1SLFVBQVkvcUQsU0FBU3VyRCxTQUN2QlIsSUFDRkEsSUFBSXVrRCxVQUFVbi9HLFFBQU8rcEIsSUFBTUEsRUFBRXRpQixXQUFVa0csS0FBSTFCLE1BQU84ZCxLQUF1RCxVQUFyQ0EsRUFBRXJrQixPQUFPNDVHLCtCQUEwQ3YxRixFQUFFcmtCLE9BQU82NUcsdUJBQXdCLElBRXhKenFHLFFBQVF1UyxNQUFNLG9CQUFzQit6QyxRQUFVLGNBRWxELENBRUEsaUNBQWFvbEQsQ0FBc0JwbEQsU0FDakMsTUFBTVIsVUFBWS9xRCxTQUFTdXJELFNBQ3ZCUixJQUNGQSxJQUFJdWtELFVBQVVuL0csUUFBTytwQixJQUFNQSxFQUFFdGlCLFdBQVVrRyxLQUFJMUIsTUFBTzhkLEtBQXVELFVBQXJDQSxFQUFFcmtCLE9BQU80NUcsK0JBQTBDdjFGLEVBQUVya0IsT0FBT2c2Ryx3QkFBeUIsSUFFeko1cUcsUUFBUXVTLE1BQU0sb0JBQXNCK3pDLFFBQVUsY0FFbEQsQ0FFQSxrQ0FBYXFsRCxDQUF1QkMsY0FDbEMsTUFBTTlsRCxVQUFZL3FELFNBQVM2d0csY0FDM0IsT0FBTzlsRCxLQUFLNUwsbUJBQW1CL25ELEtBQUtzRyxLQUFNdU0sTUFBTXFMLDBCQUEwQnFVLFlBQWEsQ0FDekYsQ0FFQSxvQ0FBYW1uRixDQUF5Qno2RyxNQUFPMDZHLG1CQUMzQyxHQUFtQixnQkFBZjE2RyxNQUFNbkcsS0FBd0IsQ0FHaEMsTUFBTThnSCxTQUFXMzZHLE1BQU0rNEcsT0FBTzZCLE9BQU9sckcsUUFBTyxDQUFDbWtCLEVBQUd4aUIsS0FDOUMsR0FBSUEsYUFBYWhQLFFBQVEwRyxLQUFLOHhHLGlCQUM1QixJQUFLLElBQUk1MkYsRUFBSSxFQUFHaXVELEdBQUs3Z0UsRUFBRTZ6QixPQUFPN2dDLE9BQVE0ZixFQUFJaXVELEdBQUlqdUQsR0FBUSxJQUN2QyxJQUFUNFAsRUFBRSxJQUFnQnhpQixFQUFFNnpCLE9BQU9qaEIsR0FBSzRQLEVBQUUsTUFDcENBLEVBQUUsR0FBS3hpQixFQUFFNnpCLE9BQU9qaEIsTUFFTCxJQUFUNFAsRUFBRSxJQUFnQnhpQixFQUFFNnpCLE9BQU9qaEIsRUFBSSxHQUFLNFAsRUFBRSxNQUN4Q0EsRUFBRSxHQUFLeGlCLEVBQUU2ekIsT0FBT2poQixFQUFJLFNBR25CLEdBQUk1UyxhQUFhaFAsUUFBUTBHLEtBQUsreEcsbUJBQW9CLENBQ3ZELE1BQU14ckcsRUFBSXpKLEtBQUtjLElBQUkwSyxFQUFFL0IsRUFBSStCLEVBQUVrTSxNQUFPbE0sRUFBRS9CLEdBQzlCZ2hELEVBQUl6cUQsS0FBS2MsSUFBSTBLLEVBQUVpL0MsRUFBSWovQyxFQUFFbU0sT0FBUW5NLEVBQUVpL0MsS0FDeEIsSUFBVHo4QixFQUFFLElBQWdCdmtCLEVBQUl1a0IsRUFBRSxNQUMxQkEsRUFBRSxHQUFLdmtCLEtBRUksSUFBVHVrQixFQUFFLElBQWdCeThCLEVBQUl6OEIsRUFBRSxNQUMxQkEsRUFBRSxHQUFLeThCLEVBRVgsQ0FDQSxPQUFPejhCLElBQ04sRUFBQyxHQUFPLElBQ0xrbkYscUJBQXVCcHhHLFNBQVMrd0csb0JBQW9CRSxPQUFPbHJHLFFBQU8sQ0FBQ21rQixFQUFHeGlCLEtBQzFFLEdBQUlBLGFBQWFoUCxRQUFRMEcsS0FBSzh4RyxpQkFDNUIsSUFBSyxJQUFJNTJGLEVBQUksRUFBR2l1RCxHQUFLN2dFLEVBQUU2ekIsT0FBTzdnQyxPQUFRNGYsRUFBSWl1RCxHQUFJanVELEdBQVEsSUFDdkMsSUFBVDRQLEVBQUUsSUFBZ0J4aUIsRUFBRTZ6QixPQUFPamhCLEdBQUs0UCxFQUFFLE1BQ3BDQSxFQUFFLEdBQUt4aUIsRUFBRTZ6QixPQUFPamhCLE1BRUwsSUFBVDRQLEVBQUUsSUFBZ0J4aUIsRUFBRTZ6QixPQUFPamhCLEVBQUksR0FBSzRQLEVBQUUsTUFDeENBLEVBQUUsR0FBS3hpQixFQUFFNnpCLE9BQU9qaEIsRUFBSSxTQUduQixHQUFJNVMsYUFBYWhQLFFBQVEwRyxLQUFLK3hHLG1CQUFvQixDQUN2RCxNQUFNeHJHLEVBQUl6SixLQUFLYyxJQUFJMEssRUFBRS9CLEVBQUkrQixFQUFFa00sTUFBT2xNLEVBQUUvQixHQUM5QmdoRCxFQUFJenFELEtBQUtjLElBQUkwSyxFQUFFaS9DLEVBQUlqL0MsRUFBRW1NLE9BQVFuTSxFQUFFaS9DLEtBQ3hCLElBQVR6OEIsRUFBRSxJQUFnQnZrQixFQUFJdWtCLEVBQUUsTUFDMUJBLEVBQUUsR0FBS3ZrQixLQUVJLElBQVR1a0IsRUFBRSxJQUFnQnk4QixFQUFJejhCLEVBQUUsTUFDMUJBLEVBQUUsR0FBS3k4QixFQUVYLENBQ0EsT0FBT3o4QixJQUNOLEVBQUMsR0FBTyxJQUNMbW5GLGFBQWVoN0csTUFBTStJLEtBQUt3L0UsWUFBWWo1RSxFQUFJcXJHLFNBQVMsR0FBS0ksY0FBYyxHQUN0RUUsYUFBZWo3RyxNQUFNK0ksS0FBS3cvRSxZQUFZajRCLEVBQUlxcUQsU0FBUyxHQUFLSSxjQUFjLFNBQ3RFLzZHLE1BQU0rSSxLQUFLMkwsTUFBTU0sT0FBT2ttRyxnQkFDOUJsN0csTUFBTStJLEtBQUsyTCxNQUFNL1MsT0FBTyxDQUFFMk4sRUFBRzByRyxhQUFjMXFELEVBQUcycUQsY0FBZ0IsQ0FBRWhVLFNBQVMsR0FDM0UsQ0FDRixDQUVBLHlCQUFha1UsQ0FBYy84RixRQUFRLGlCQUFxQixHQUFFLFVBQWMsR0FBRSxnQkFBb0J4SyxNQUFNcUwsMEJBQTBCdWpELEtBQUksZUFBbUI1dUQsTUFBTXFMLDBCQUEwQnFVLFVBQWEsQ0FBQyxHQUNqTXZ5QixLQUFLdWdCLE9BQU9DLEtBQUssY0FBZSxDQUFFemYsS0FBTSxpQkFBa0JzYyxRQUFRLElBQ2xFcmQsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVF1dkcsV0FBV0MsZ0JBQWdCLEdBQ3JELElBQUssTUFBTW5tRCxXQUFXb21ELGlCQUFrQixDQUN0QyxNQUFNNW1ELFVBQVkvcUQsU0FBU3VyRCxTQUMzQixHQUFJUixJQUFLLENBQ1AsSUFBSTZtRCxXQUFhQyxlQUNacDlGLFNBQ0htOUYsV0FBYUUsdUJBRVQvbUQsSUFBSS95RCxPQUFPLENBQUUsb0JBQXFCNDVHLFlBQzFDLE1BQ0Uzc0csUUFBUXVTLE1BQU0sb0JBQXNCK3pDLFFBQVUsY0FFbEQsQ0FFQSxJQUFLLE1BQU1BLFdBQVd3bUQsVUFBVyxDQUMvQixNQUFNaG5ELFVBQVkvcUQsU0FBU3VyRCxTQUMzQixHQUFJUixJQUFLLENBQ1AsSUFBSTUrQyxRQUFVLHNDQUNUc0ksU0FDSHRJLFFBQVUsa0RBRU40K0MsSUFBSS95RCxPQUFPLENBQUUsY0FBZW1VLFNBQ3BDLE1BQ0VsSCxRQUFRdVMsTUFBTSxhQUFlK3pDLFFBQVUsY0FFM0MsQ0FDRixDQUVBLHlCQUFheW1ELENBQWNuQixhQUFjb0IsT0FBUyxLQUFNQyxPQUFTLE1BQy9ELE1BQU1ubkQsVUFBWS9xRCxTQUFTNndHLGNBQ3ZCOWxELEtBQUs1TCxtQkFBbUIvbkQsS0FBS3NHLEtBQU11TSxNQUFNcUwsMEJBQTBCcVUsWUFDakVzb0YsT0FDRWxuRCxJQUFJeXRCLE1BQU14aEYsSUFBSWk3RyxTQUFTOXlELG1CQUFtQi9uRCxLQUFLc0csS0FBTXVNLE1BQU1xTCwwQkFBMEJxVSxXQUN2Rm9oQyxJQUFJbHpELE1BQU1DLFFBQU8sRUFBTSxDQUFFbTZHLE9BQVFDLFNBR25Dbm5ELElBQUlsekQsTUFBTUMsUUFBTyxHQUd2QixDQUVBLG1DQUFhcTZHLENBQXdCdDNHLE9BQVF1M0csVUFBV0MsYUFBY0MsV0FBVyxlQUFtQnJvRyxNQUFNcUwsMEJBQTBCQyxPQUFVLENBQUMsR0FDN0ksSUFBSyxNQUFNZzJDLFdBQVc2bUQsVUFBVyxDQUMvQixNQUFNcm5ELFVBQVkvcUQsU0FBU3VyRCxTQUN2QlIsVUFDSUEsSUFBSS95RCxPQUFPLENBQUV5QyxRQUFTSSxTQUU1Qm9LLFFBQVF1UyxNQUFNLFFBQVUrekMsUUFBVSxjQUV0QyxDQUNBLE1BQU1xbUQsV0FBZS8yRyxPQUFnRDAzRyxlQUF2Q3RvRyxNQUFNcUwsMEJBQTBCdWpELEtBQzlELElBQUssTUFBTXROLFdBQVcrbUQsVUFBVyxDQUMvQixNQUFNdm5ELFVBQVkvcUQsU0FBU3VyRCxTQUN2QlIsVUFDSUEsSUFBSS95RCxPQUFPLENBQUUsb0JBQXFCNDVHLGFBRXhDM3NHLFFBQVF1UyxNQUFNLGdCQUFrQit6QyxRQUFVLGNBRTlDLENBRUEsSUFBSyxNQUFNQSxXQUFXOG1ELGFBQWMsQ0FDbEMsTUFBTXRuRCxVQUFZL3FELFNBQVN1ckQsU0FDdkJSLElBQ3VCLElBQXJCdW5ELFVBQVU1M0csUUFBZ0JrM0csYUFBZVcsZ0JBQW9HLElBQWxGeG5ELElBQUl5dEIsTUFBTWw1QixTQUFTbnZELFFBQU9MLEdBQUtBLEVBQUVzbEIsVUFBVUMsVUFBWWs5RixpQkFBZ0I3M0csY0FDOUhxd0QsSUFBSS95RCxPQUFPLENBQUUsb0JBQXVCNkMsT0FBZ0RvUCxNQUFNcUwsMEJBQTBCQyxNQUF2RXRMLE1BQU1xTCwwQkFBMEJ1akQsT0FHckY1ekQsUUFBUXVTLE1BQU0sV0FBYSt6QyxRQUFVLGNBRXpDLENBQ0YsQ0FFQSxvQkFBYWluRCxDQUFTQyxXQUNwQixNQUFNMW5ELFVBQVkvcUQsU0FBU3l5RyxXQUN2QjFuRCxJQUNGeHZDLFlBQVcsS0FDVHd2QyxJQUFJMm5ELE1BQUssR0FDUixLQUVIenRHLFFBQVF1UyxNQUFNLFNBQVdpN0YsVUFBWSxjQUV6QyxFQ2pTSyxTQUFTLGNBQ2QzK0QsTUFBTWtoQyxLQUFLLFFBQVE1NEUsVUNGbkJNLE9BQU9sSCxhQUFhc0ssY0FBZ0J2SyxpQkFDcENtSCxPQUFPMnZDLE1BQU12c0MsY0FBZ0JrcUIsU0FDN0J0dEIsT0FBTzJ2QyxNQUFNL3NDLGdCQUFrQixDQUM3QmtyRixRQUFTd1UsYUFFWHRpRyxPQUFPd0MsS0FBS1ksY0FBZ0JiLFNBQzVCdkMsT0FBT3dDLEtBQUtJLGdCQUFrQixDQUM1QjhsRixLQUFNQyxTQUNONVksTUFBT3dYLFVBQ1A2SyxNQUFPb0csVUFDUG56RixNQUFPeThGLFdDZCtCcGlHLGlCQTRDakN1MkcsY0ExQ2UsQ0FDcEIsc0RBQ0Esc0RBRUEsMkRBQ0EsaUVBQ0EsNERBQ0EsbURBQ0EsaUVBQ0Esd0VBQ0EsMkRBQ0Esb0VBQ0EsZ0VBQ0Esa0RBQ0Esa0RBQ0Esd0RBQ0EsdURBRUEsaURBQ0Esa0RBRUEsbUVBQ0Esb0VBQ0EsbUVBQ0EsdUVBQ0Esd0VBQ0EsMEVBQ0EscUVBQ0Esc0VBQ0EsdUVBQ0EsNEVBQ0EsbUVBQ0EsMkVBQ0Esb0VBQ0EsZ0VBQ0EsNkRBRUEsMERBQ0Esc0RBS0osQ0ZyQ0lDLEdHUkcsV0E2VUwsR0F6VUF4N0csS0FBS21FLFNBQVNzM0csYUFBYSxPQUFRLFlBQWEsQ0FDOUMzaUgsS0FBTSwyQkFDTmlILE1BQU8sNEJBQ1B1cUQsS0FBTSwyQkFDTm5xRCxLQUFNLGNBQ05ZLEtBQU1nb0cscUJBQ04yUyxZQUFZLElBRWQzUyxxQkFBcUJLLG1CQUVyQnBwRyxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsa0JBQW1CLENBQ2hEejNGLEtBQU0sMkJBQ053eEQsS0FBTSwrQkFDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1I1bEIsS0FBTStuQixRQUNON0ssU0FBUyxJQUdYamUsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLHVCQUF3QixDQUNyRHozRixLQUFNLDJDQUNOd3hELEtBQU0sMkNBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSNWxCLEtBQU1xMkUsb0JBQW9CSSxpQkFDMUJ2NUQsUUFBUyxpQkFBbUJqZSxLQUFLMjdHLE1BQU0vcUcsR0FBSyxrQkFHOUM1USxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsV0FBWSxDQUN6Q3ozRixLQUFNLDhCQUNOd3hELEtBQU0sOEJBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxXQUNUbGQsS0FBTWpDLE9BQ05zcEcsUUFBU254RyxLQUFLbVMsS0FDZGkvRixTQUFVLEtBQ1I1OEYsR0FBR2trQyxRQUFRanZDLFFBQU8sRUFBSSxJQUkxQlYsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLFlBQWEsQ0FDMUN6M0YsS0FBTSwrQkFDTnd4RCxLQUFNLCtCQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsR0FDVGxkLEtBQU1qQyxPQUNOc3BHLFFBQVMsQ0FDUCxHQUFJLGlDQUNKd1QsRUFBRyxtQ0FDSEMsRUFBRyx5Q0FRUDc3RyxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsbUJBQW9CLENBQ2pEejNGLEtBQU0sNEJBQ053eEQsS0FBTSxnQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBR1I5b0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLG9CQUFxQixDQUNsRHozRixLQUFNLDZCQUNOd3hELEtBQU0saUNBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQU9SOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUN6M0YsS0FBTSx5QkFDTnd4RCxLQUFNLDZCQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFHUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsd0JBQXlCLENBQ3REejNGLEtBQU0saUNBQ053eEQsS0FBTSxxQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBR1I5b0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLDZCQUE4QixDQUMzRHozRixLQUFNLHNDQUNOd3hELEtBQU0sMENBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQUVSOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSx5QkFBMEIsQ0FDdkR6M0YsS0FBTSw2QkFDTnd4RCxLQUFNLGlDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsVUFDVGxkLEtBQU1qQyxPQUNOc3BHLFFBQVMsQ0FDUDF4RixRQUFTLGtDQUNUdVAsUUFBUyxxQ0FHYmptQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsd0JBQXlCLENBQ3REejNGLEtBQU0saUNBQ053eEQsS0FBTSxxQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLFdBQ1RsZCxLQUFNakMsT0FDTnNwRyxRQUFTLENBQ1AwVCxPQUFRLHVCQUNSMXBGLE9BQVEsNEJBQ1IycEYsU0FBVSw4QkFRZC83RyxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMEJBQTJCLENBQ3hEejNGLEtBQU0sbUNBQ053eEQsS0FBTSx1Q0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBR1I5b0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLHdCQUF5QixDQUN0RHozRixLQUFNLGlDQUNOd3hELEtBQU0scUNBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQUdSOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxxQkFBc0IsQ0FDbkR6M0YsS0FBTSw4QkFDTnd4RCxLQUFNLGtDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFFUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMkJBQTRCLENBQ3pEejNGLEtBQU0sb0NBQ055OUQsTUFBTyxTQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFFUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsb0JBQXFCLENBQ2xEejNGLEtBQU0sNkJBQ055OUQsTUFBTyxTQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFHUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsV0FBWSxDQUN6Q3ozRixLQUFNLG9CQUNOd3hELEtBQU0sd0JBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQU1SOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbER6M0YsS0FBTSw2QkFDTnd4RCxLQUFNLGlDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNK25CLFFBQ043SyxTQUFTLElBRVhqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsYUFBYyxDQUMzQ3ozRixLQUFNLDhCQUNOd3hELEtBQU0sa0NBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQUVSOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbER6M0YsS0FBTSwwQkFDTnd4RCxLQUFNLDhCQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFFUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMkJBQTRCLENBQ3pEejNGLEtBQU0sNkNBQ053eEQsS0FBTSxpREFDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBR1I5b0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3ozRixLQUFNLHlCQUNOd3hELEtBQU0sNkJBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxNQUNUbGQsS0FBTWpDLE9BQ05zcEcsUUFBUyxDQUNQcDRDLElBQUssNEJBQ0xuc0QsS0FBTSw2QkFDTndnRCxRQUFTLGdDQUNUMjNELE9BQVEsa0NBTVpoOEcsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLHNCQUF1QixDQUNwRHozRixLQUFNLCtCQUNOd3hELEtBQU0sbUNBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQUVKOW9CLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLHlCQUM1QkksS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3ozRixLQUFNLHlCQUNOd3hELEtBQU0sNkJBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUywwQ0FDVGxkLEtBQU1qQyxTQUVSa0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLGVBQWdCLENBQzdDejNGLEtBQU0sd0JBQ053eEQsS0FBTSw0QkFDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLHFDQUNUbGQsS0FBTWpDLFVBT1ZrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMkJBQTRCLENBQ3pEejNGLEtBQU0sb0NBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFFUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsZUFBZ0IsQ0FDN0N6M0YsS0FBTSxvQkFDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxJQUNUbGQsS0FBTW5DLFNBRVJvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsZ0JBQWlCLENBQzlDejNGLEtBQU0seUJBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFHUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsd0JBQXlCLENBQ3REejNGLEtBQU0saUNBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsU0FDVGxkLEtBQU1qQyxPQUNOc3BHLFFBQVMsQ0FDUDZULE9BQVEsMEJBQ1JDLFNBQVUsNEJBQ1ZDLE1BQU8sNEJBSVhuOEcsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLHVCQUF3QixDQUNyRHozRixLQUFNLGdDQUNOd3hELEtBQU0sb0NBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQUVSOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbER6M0YsS0FBTSw2QkFDTnd4RCxLQUFNLGlDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFNBQVMsRUFDVGxkLEtBQU0rbkIsVUFFUjlvQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsdUJBQXdCLENBQ3JEejNGLEtBQU0sZ0NBQ053eEQsS0FBTSxvQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBRUo5b0IsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsd0JBQXlCLENBNkZyRCxTQUFTdzhHLGlCQUFrQm42RyxNQUN6QnVzQixFQUFFLFNBQVNncEMsSUFBSSxZQUFhdjFELE1BQzVCd0osR0FBRzR3RyxRQUFRMzdHLFFBQU8sR0FDbEIsSUFBSyxNQUFPLENBQUU4NkYsS0FBTWw1RixPQUFPMkssUUFBUXhCLEdBQUcwMkMsU0FDcENxNUMsRUFBRTk2RixRQUFPLEVBRWIsQ0FsR0FWLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSx5QkFBMEIsQ0FDdkR6M0YsS0FBTSxrQ0FDTnd4RCxLQUFNLHNDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsa0RBQ1RsZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSw2QkFBOEIsQ0FDM0R6M0YsS0FBTSxzQ0FDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxRQUNUbGQsS0FBTWpDLE9BQ05zcEcsUUFBUyxDQUNQam5HLE1BQU8sMkJBQ1B0RyxLQUFNLDBCQUNOeWhILFFBQVMsNkJBQ1Q3ekUsTUFBTyw4QkFHWHpvQyxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsOEJBQStCLENBQzVEejNGLEtBQU0sdUNBQ053eEQsS0FBTSwyQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLDBDQUNUbGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsb0JBQXFCLENBQ2xEejNGLEtBQU0sNkJBQ053eEQsS0FBTSxpQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLHdDQUNUbGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsb0JBQXFCLENBQ2xEejNGLEtBQU0sNkJBQ053eEQsS0FBTSxpQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLG1CQUNUbGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEseUJBQTBCLENBQ3ZEejNGLEtBQU0sa0NBQ053eEQsS0FBTSxzQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLG9CQUNUbGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMEJBQTJCLENBQ3hEejNGLEtBQU0sbUNBQ053eEQsS0FBTSx1Q0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLG9CQUNUbGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMEJBQTJCLENBQ3hEejNGLEtBQU0sbUNBQ053eEQsS0FBTSx1Q0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBRVI5b0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLGtCQUFtQixDQUNoRHozRixLQUFNLDJCQUNOeTlELE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLEdBQ1RsZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcER6M0YsS0FBTSwrQkFDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxHQUNUbGQsS0FBTWpDLFNBRVJrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsc0JBQXVCLENBQ3BEejNGLEtBQU0sK0JBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsR0FDVGxkLEtBQU1uQyxPQUNOeXBHLFNBQVVwbUcsTUFBUW02RyxpQkFBaUJuNkcsT0FVdkMsQ0FzQ0EsR0FqQ0FqQyxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsdUJBQXdCLENBQ3JEejNGLEtBQU0sZ0NBQ053eEQsS0FBTSxvQ0FDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBRVI5b0IsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3ozRixLQUFNLHlCQUNOd3hELEtBQU0sNkJBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQW1CSjlvQixLQUFLa0UsUUFBUXRFLElBQUksaUJBQWlCNkQsT0FBUSxDQUM1Q3pELEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxhQUFjLENBQzNDejNGLEtBQU0sc0JBQ053eEQsS0FBTSwwQkFDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1IxSSxTQUFTLEVBQ1RsZCxLQUFNK25CLFVBRVIsTUFBT3JuQixTQUFXekIsS0FBS2tFLFFBQVF0RSxJQUFJLGlCQUFpQjZCLFFBQVEyTixNQUFNLE1BQzdENVEsTUFBTUksT0FBTzZDLFdBQWE3QyxPQUFPNkMsVUFBWSxJQUNoRHpCLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxjQUFlLENBQzVDejNGLEtBQU0sdUJBQ053eEQsS0FBTSwyQkFDTmlNLE1BQU8sU0FDUDV2QyxRQUFRLEVBQ1IxSSxRQUFTLFNBQ1RsZCxLQUFNakMsU0FFUmtCLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUN6M0YsS0FBTSx5QkFDTnd4RCxLQUFNLDZCQUNOaU0sTUFBTyxTQUNQNXZDLFFBQVEsRUFDUjFJLFFBQVMsWUFDVGxkLEtBQU1qQyxTQUdaLENBS0FrQixLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsWUFBYSxDQUMxQ3ozRixLQUFNLHFCQUNOd3hELEtBQU0seUJBQ05pTSxNQUFPLFNBQ1A1dkMsUUFBUSxFQUNSNWxCLEtBQU0rbkIsUUFDTjdLLFNBQVMsSUFFWGplLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSx1QkFBd0IsQ0FDckR6M0YsS0FBTSxvQ0FDTnd4RCxLQUFNLHdDQUNOaU0sTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNK25CLFFBQ043SyxTQUFTLElBS1hqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsZ0JBQWlCLENBQzlDejNGLEtBQU0sa0JBQ053eEQsS0FBTSx1QkFDTmlNLE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1I1bEIsS0FBTStuQixRQUNON0ssU0FBUyxJQUVYamUsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLHFCQUFzQixDQUNuRHozRixLQUFNLHFCQUNOeTlELE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1I1bEIsS0FBTStuQixRQUNON0ssU0FBUyxJQUdYamUsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLHFCQUFzQixDQUNuRHozRixLQUFNLDhCQUNOd3hELEtBQU0sOEJBQ05pTSxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksU0FBUyxFQUNUbGQsS0FBTStuQixVQUVSOW9CLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcER6M0YsS0FBTSx3QkFDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSNWxCLEtBQU0rbkIsUUFDTjdLLFNBQVMsSUFFWGplLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcER6M0YsS0FBTSx3QkFDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSNWxCLEtBQU1qQyxPQUNObWYsUUFBUyxNQUVYamUsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLDZCQUE4QixDQUMzRGg2QixNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxDQUFDLElBRVpqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsWUFBYSxDQUMxQ3ozRixLQUFNLGlCQUNOeTlELE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1I1bEIsS0FBTStuQixRQUNON0ssU0FBUyxJQUVYamUsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLG1CQUFvQixDQUNqRHozRixLQUFNLDhCQUNOeTlELE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1I1bEIsS0FBTWpDLE9BQ05tZixRQUFTLE1BRVhqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsMEJBQTJCLENBQ3hEejNGLEtBQU0sc0RBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNakMsT0FDTm1mLFFBQVMsS0FFWGplLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSw2QkFBOEIsQ0FDM0R6M0YsS0FBTSw0RUFDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSNWxCLEtBQU1uQyxPQUNOcWYsUUFBUyxJQUVYamUsS0FBS21FLFNBQVNvc0YsU0FBUyxPQUFRLDhCQUErQixDQUM1RHozRixLQUFNLDRDQUNOeTlELE1BQU8sUUFDUDV2QyxRQUFRLEVBQ1I1bEIsS0FBTW5DLE9BQ05xZixRQUFTcEwsTUFBTXFMLDBCQUEwQnVqRCxPQUUzQ3poRSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsNEJBQTZCLENBQzFEejNGLEtBQU0sMENBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNK25CLFFBQ043SyxTQUFTLElBRVhqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsNkJBQThCLENBQzNEejNGLEtBQU0sMENBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNK25CLFFBQ043SyxTQUFTLElBRVhqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsOEJBQStCLENBQzVEejNGLEtBQU0sMEJBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNNGdCLE1BQ04xRCxRQUFTLEtBRVhqZSxLQUFLbUUsU0FBU29zRixTQUFTLE9BQVEsaUNBQWtDLENBQy9EejNGLEtBQU0sK0NBQ055OUQsTUFBTyxRQUNQNXZDLFFBQVEsRUFDUjVsQixLQUFNNGdCLE1BQ04xRCxRQUFTLEtBR1gzWSxPQUFPd2pHLE9BQU9uK0IsV0FBYSxDQUN6Qmp1RSxRQUFTLDZCQUNUbXNHLFNBQVUsR0FFWnZqRyxPQUFPMi9DLE1BQU1zM0QsUUFBVXY4RyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxhQUNqRDBGLE9BQU9DLEtBQUtDLE1BQU1DLEVBQUlvaUcsZUFDdEJ2aUcsT0FBT0MsS0FBS0MsTUFBTXVrRCxFQUFJaStDLG1CQUN4QixDSHBuQklvQixHSVNGb1QsT0FBT0MsZ0JBQWdCLE9BQVF6aUQsWUFDL0J3aUQsT0FBT2xGLGNBQWMsT0FBUS96QyxhQUFjLENBQ3pDNnNCLE1BQU8sQ0FBQyxPQUNSc25CLGFBQWEsSUFFZjhFLE9BQU9sRixjQUFjLE9BQVF2RyxpQkFBa0IsQ0FDN0MzZ0IsTUFBTyxDQUFDLFdBQ1JzbkIsYUFBYSxJQUVmOEUsT0FBT2xGLGNBQWMsT0FBUTV5QyxrQkFBbUIsQ0FDOUMwckIsTUFBTyxDQUFDLFlBQ1JzbkIsYUFBYSxJQUVmOEUsT0FBT2xGLGNBQWMsT0FBUTlNLG1CQUFvQixDQUMvQ3BhLE1BQU8sQ0FBQyxhQUNSc25CLGFBQWEsSUFFZjhFLE9BQU9sRixjQUFjLE9BQVF4eUMsbUJBQW9CLENBQy9Dc3JCLE1BQU8sQ0FBQyxhQUNSc25CLGFBQWEsSUFHZmdGLE1BQU1ELGdCQUFnQixPQUFRdCtCLFdBQzlCdStCLE1BQU1wRixjQUFjLE9BQVFsSCxlQUFnQixDQUMxQ2hnQixNQUFPLENBQUMsU0FDUnNuQixhQUFhLElBRWZnRixNQUFNcEYsY0FBYyxPQUFRakcsZ0JBQWlCLENBQzNDamhCLE1BQU8sQ0FBQyxVQUNSc25CLGFBQWEsSUFFZmdGLE1BQU1wRixjQUFjLE9BQVF4TixjQUFlLENBQ3pDMVosTUFBTyxDQUFDLFFBQ1JzbkIsYUFBYSxJQUVmZ0YsTUFBTXBGLGNBQWMsT0FBUTdHLGVBQWdCLENBQzFDcmdCLE1BQU8sQ0FBQyxTQUNSc25CLGFBQWEsSUFFZmdGLE1BQU1wRixjQUFjLE9BQVF6RyxnQkFBaUIsQ0FDM0N6Z0IsTUFBTyxDQUFDLFVBQ1JzbkIsYUFBYSxJQUVmZ0YsTUFBTXBGLGNBQWMsT0FBUTVHLGdCQUFpQixDQUMzQ3RnQixNQUFPLENBQUMsVUFDUnNuQixhQUFhLElBRWZnRixNQUFNcEYsY0FBYyxPQUFRcDVCLG9CQUFxQixDQUMvQ2tTLE1BQU8sQ0FBQyxjQUNSc25CLGFBQWEsSUFFZmdGLE1BQU1wRixjQUFjLE9BQVE3TixtQkFBb0IsQ0FDOUNyWixNQUFPLENBQUMsYUFDUnNuQixhQUFhLElBRWZnRixNQUFNcEYsY0FBYyxPQUFRdkgsZUFBZ0IsQ0FDMUMzZixNQUFPLENBQUMsU0FDUnNuQixhQUFhLElBRWZnRixNQUFNcEYsY0FBYyxPQUFRekwsZUFBZ0IsQ0FDMUN6YixNQUFPLENBQUMsU0FDUnNuQixhQUFhLElBRWZnRixNQUFNcEYsY0FBYyxPQUFRbEksY0FBZSxDQUFFaGYsTUFBTyxDQUFDLFVBQ3JEc3NCLE1BQU1wRixjQUFjLE9BQVFuSSxnQkFBaUIsQ0FDM0MvZSxNQUFPLENBQUMsUUFDUnNuQixhQUFhLElBR2ZpRixPQUFPRixnQkFBZ0IsT0FBUTNNLGFBQy9CNk0sT0FBT3JGLGNBQWMsT0FBUXpILGdCQUFpQixDQUM1QzZILGFBQWEsSUFHZmtGLFFBQVFILGdCQUFnQixPQUFRbk4sY0FDaENzTixRQUFRdEYsY0FBYyxPQUFRakksaUJBQWtCLENBQzlDcUksYUFBYSxJQUdmbUYsV0FBV0osZ0JBQWdCLE9BQVE3TSxpQkFDbkNpTixXQUFXdkYsY0FBYyxPQUFRM0gsb0JBQXFCLENBQ3BEK0gsYUFBYSxJQUdmb0YsT0FBT0wsZ0JBQWdCLE9BQVFqTixhQUMvQnNOLE9BQU94RixjQUFjLE9BQVEvSCxnQkFBaUIsQ0FDNUNtSSxhQUFhLElBR2ZxRixVQUFVTixnQkFBZ0IsT0FBUS9NLGdCQUNsQ3FOLFVBQVV6RixjQUFjLE9BQVE3SCxtQkFBb0IsQ0FDbERpSSxhQUFhLElDL0dmc0YsV0FBV0MsZUFBZSxnQkFBZ0IsU0FBVW5wRyxVQUVsRCxPQURZNUIsV0FBVzRDLG1CQUFtQmhCLFdBRW5DLG9DQUNULElBQ0FrcEcsV0FBV0MsZUFBZSxvQkFBb0IsU0FBVWo3RyxTQUN0RCxNQUFNZ1gsV0FBYWhYLFFBQVFrN0csS0FBS2xrRyxhQUFldkMsVUFBVXVQLGdCQUFnQnRQLFNBQWtCRCxVQUFVNmEsaUJBQWlCdHZCLFFBQVFrN0csS0FBS2xrRyxZQUM3SDVSLFNBQVlwRixRQUFRazdHLEtBQUs5MUcsU0FBVyxFQUFJLElBQUlwRixRQUFRazdHLEtBQUs5MUcsV0FBYXBGLFFBQVFrN0csS0FBSzkxRyxTQUFXLEdBQUlwRixRQUFRazdHLEtBQUs5MUcsU0FBU3NOLFdBQzlILE9BQU8xVSxLQUFLQyxLQUFLMFcsT0FBTyxrQkFBcUJxQyxXQUFrQixPQUFMLEtBQWlCNVIsU0FBZ0IsUUFBTCxLQUFrQnBGLFFBQVFrN0csS0FBS3g5RixRQUFlLFVBQUwsSUFBaUIsQ0FBRTFHLFdBQVk1UixTQUFVdE8sS0FBTWtKLFFBQVFrN0csS0FBS3BrSCxNQUM3TCxJTEtFNDRHLG1CQUNBdUMsTUFBTWxrRixPQUNOVixTQUFTVSxPTW5CWDJzQixNQUFNa2hDLEtBQUssbUJBQW1CeDNFLFNBQzVCLElBQUssTUFBTTNILFVBQVUySCxPQUFPKzJHLFlBQVlDLFFBQVMsQ0FDL0MsTUFBTUMsS0FBT2ozRyxPQUFPKzJHLFlBQVlDLFFBQVEzK0csUUFBUTZGLEtBQUtsQyxNQUFLMUosR0FBZ0IsU0FBWEEsRUFBRXFJLE9BQ2pFLFFBQW9CLElBQVRzOEcsS0FBc0IsQ0FDL0IsUUFBa0YsSUFBdkVqM0csT0FBTysyRyxZQUFZQyxRQUFRMytHLFFBQVE2RixLQUFLbEMsTUFBSzFKLEdBQWdCLE9BQVhBLEVBQUVxSSxPQUFnQyxDQUM3RixNQUFNdThHLFlBQWNoN0csT0FBT3llLE9BQU96ZSxPQUFPOFEsT0FBTzlRLE9BQU9pN0csZUFBZUYsT0FBUUEsTUFDOUVDLFlBQVl2OEcsS0FBTyxLQUNuQnFGLE9BQU8rMkcsWUFBWUMsUUFBUTMrRyxRQUFRNkYsS0FBSzFLLEtBQUswakgsWUFDL0MsQ0FDQSxRQUFrRixJQUF2RWwzRyxPQUFPKzJHLFlBQVlDLFFBQVEzK0csUUFBUTZGLEtBQUtsQyxNQUFLMUosR0FBZ0IsT0FBWEEsRUFBRXFJLE9BQWdDLENBQzdGLE1BQU11OEcsWUFBY2g3RyxPQUFPeWUsT0FBT3plLE9BQU84USxPQUFPOVEsT0FBT2k3RyxlQUFlRixPQUFRQSxNQUM5RUMsWUFBWXY4RyxLQUFPLEtBQ25CcUYsT0FBTysyRyxZQUFZQyxRQUFRMytHLFFBQVE2RixLQUFLMUssS0FBSzBqSCxZQUMvQyxDQUNGLENBQ0YsS05NQXZHLG9CQUFvQkMsV0FFcEIxeEcsT0FBTzRLLFdBQVdpZ0IsVUFBVXYyQixLQUFLLENBQy9CdzJCLFFBQVMsMERBQ1RDLFNBQVVyckIsTUFBT3VELE9BQVNDLFlBQWUsQ0FBQyxLQUN4QyxNQUFPcy9ELFVBQVdvMUMsS0FBTXBrSCxNQUFReVAsTUFBTXBILE1BQU0sRUFBRyxHQUMvQyxJQUFJNkcsS0FBTyxDQUNUbFAsS0FDQXVqQixRQUFTLENBQUMsZUFBZ0IsVUFDMUJsYyxLQUFNLGlCQUVSLE1BQU1zSixNQUFRcStELFdBQVcxNEQsTUFBTSxXQUMvQixHQUFJM0YsTUFBTyxDQUNULE1BQU1oRCxLQUFPZ0QsTUFBTWtGLFFBQU8sQ0FBQ21rQixFQUFHNVAsS0FDNUIsTUFBTXM2RixPQUFTdDZGLEVBQUUzYSxNQUFNLHFCQU12QixPQUxJaTFHLE9BQ0YxcUYsRUFBRTBxRixPQUFPLElBQU1BLE9BQU8sR0FFdEIxcUYsRUFBRXp5QixLQUFPNmlCLEVBRUo0UCxJQUNOLENBQUMsR0FDSixHQUFJcnNCLEtBQUtwRyxLQUFNLENBQ2IsTUFBTXN6RCxVQUFZL3FELFNBQVNuQyxLQUFLcEcsS0FBTSxDQUFFbzlHLFNBQVVqMUcsYUFDbEQsR0FBSW1yRCxNQUNGM3JELEtBQU8sQ0FDTGxQLEtBQU1BLE1BQVE2NkQsSUFBSTc2RCxNQUFRMk4sS0FBS3BHLEtBQy9CZ2MsUUFBUyxDQUFDLGdCQUNWNWMsUUFBUyxDQUNQa3lCLEtBQU0sR0FDTnR4QixLQUFNc3pELElBQUl0ekQsS0FDVnVRLEdBQUkraUQsSUFBSS9pRCxHQUNSN1AsS0FBTTR5RCxJQUFJNTlCLGNBRVo1MUIsS0FBTXNHLEtBQUt0RyxNQUFRbUYsT0FBT3F1RCxJQUFJNTlCLGNBQWMybkYsYUFFMUNSLE9BQ0ZsMUcsS0FBS3ZJLFFBQVF5OUcsS0FBT0EsTUFFbEJ6MkcsS0FBSzJCLEtBQUssQ0FDWixNQUFNaEosRUFBSW9TLFNBQVNDLGNBQWMsS0FDakNyUyxFQUFFc1MsVUFBVUMsSUFBSTNKLEtBQUtxVSxTQUNyQixJQUFLLE1BQU96SyxFQUFHdlAsS0FBTUMsT0FBTzJLLFFBQVFqRixLQUFLdkksU0FDbkMsTUFBQzRDLElBQ0hqRCxFQUFFSyxRQUFRbVMsR0FBS3ZQLEdBSW5CLE9BREFqRCxFQUFFeVMsVUFBWSxhQUFhcEwsS0FBSzJCLDhEQUE4REosS0FBS2xQLE9BQzVGc0csQ0FDVCxDQUVKLENBQ0YsQ0FFQSxPQUFPOFEsV0FBV3l0RyxhQUFhMzFHLEtBQUksR0FFdEMsR0FFTCxDT2hGTyxNQUFNKzVDLGFBQ1gsV0FBQWg2QyxHQUNFckYsS0FBS3MvQyxhQUFlLEtBQ3BCdC9DLEtBQUtxK0QsYUFBZSxJQUN0QixDQUVBLGNBQUFDLENBQWdCNWUsU0FDZCxRQUFpQyxJQUF0QjEvQyxLQUFLcy9DLGFBQThCLENBQzVDLE1BQU0rakQsT0FBU3JqRyxLQUFLcy9DLGFBQWFrTix3QkFDakMsSUFBSzF3RCxNQUFNdW5HLE9BQU96bUQsTUFBUSxNQUFROWdELE1BQU11bkcsT0FBT3oyQyxLQUFPLElBQUssQ0FDekQsSUFBSWhRLEtBQU95bUQsT0FBT3ptRCxLQUNkZ1EsSUFBTXkyQyxPQUFPejJDLElBQ2pCLE1BQU1zdUQsV0FBYXB2RixFQUFFOXJCLEtBQUtzL0MsY0FBY3NYLGNBQ3hDOXFDLEVBQUUsUUFBUThsQixPQUFPLDBCQUE0QjhOLFFBQVUsVUFDdkQsTUFBTTJNLElBQU12Z0MsRUFBRSxpQkFDUnF2RixVQUFZOXVELElBQUl1SyxjQUNoQndrRCxTQUFXL3VELElBQUl5SyxhQUNqQnBLLE9BQU9JLFlBQTJCLElBQWJvdUQsV0FBbUJDLFVBQVl2dUQsSUFDdERBLEtBQVl1dUQsVUFFWnZ1RCxLQUF5QixJQUFic3VELFdBRVZ4dUQsT0FBT0MsV0FBYXl1RCxTQUFXeCtELE9BQ2pDQSxLQUFPOFAsT0FBT0MsV0FBYXl1RCxVQUU3Qi91RCxJQUFJeUksSUFBSSxDQUNObFksS0FBTUEsS0FBTyxLQUNiZ1EsSUFBS0EsSUFBTSxNQUVmLENBQ0YsQ0FDRixDQUVBLFlBQUFtUixDQUFjeGhFLE9BQ1JlLEtBQUsraEQsYUFBYUMsZUFBaUIvaUQsTUFBTUksZ0JBQzNDMCtHLGFBQWEvOUcsS0FBSytoRCxhQUFhZ2YsY0FDL0IvZ0UsS0FBSytoRCxhQUFhQyxhQUFlLEtBQ2pDeHpCLEVBQUUsaUJBQWlCOUksU0FFdkIsRUN2Q0YsSUFBSXM0RixTQUFXLFFBQ0ssb0JBQVRDLE9BQ1RELFNBQVcsY0FBK0JDLEtBQ3hDLG9CQUFNQyxDQUFnQjUyQixVQUNwQixPQUFPLElBQUkxb0UsU0FBUSxDQUFDaEIsUUFBU28xQyxVQUUzQixHQURnQnhoRCxTQUFTOEUsY0FBY2d4RSxVQUdyQyxZQURBMXBFLFVBSWUsSUFBSXVnRyxrQkFBaUIsQ0FBQ0MsVUFBV0MsWUFDaEQ3c0csU0FBU3NHLGlCQUFpQnd2RSxVQUFVOXNFLFNBQVNxZ0MsS0FDM0NqOUIsVUFDQXlnRyxTQUFTQyxZQUFXLEdBQ3JCLElBR01DLFFBQVEvc0csU0FBU3dlLEtBQU0sQ0FDOUJ3dUYsV0FBVyxFQUNYQyxTQUFTLEdBQ1YsR0FFTCxDQUVBLGNBQU1DLEdBSUosU0FITTMvRyxNQUFNMi9HLFdBR1csSUFBbkJoOEcsS0FBS2k4RyxVQUNQLElBQUssTUFBTXZsSCxPQUFPa0osT0FBT0osT0FBT3VKLEdBQUcwMkMsU0FDakMvb0QsSUFBSXlrQixjQUlGbmIsS0FBS3c3RyxlQUFleDdHLEtBQUtrOEcsWUFBWXQzQixlQUVBLElBQWhDNWtGLEtBQUtrOEcsWUFBWUMsWUFDMUJwekcsR0FBRzR3RyxRQUFRdE8sWUFBWXJyRyxLQUFLazhHLFlBQVlDLFdBRTVDLENBRUEsZUFBTUMsR0FFSixTQURNLy9HLE1BQU0rL0csY0FDUnA4RyxLQUFLaThHLFVBQVksSUFBTWo4RyxLQUFLcThHLFNBSTNCcjhHLEtBQUtrOEcsWUFBWS8rRyxPQUl0QixHQUFJNkMsS0FBS3M4RyxZQUNQdDhHLEtBQUtzOEcsYUFBYyxPQUlyQixHQUNPLFVBREN0OEcsS0FBS2s4RyxZQUFZLytHLE9BRXJCMlIsU0FBUzhFLGNBQWM1VCxLQUFLazhHLFlBQVl0M0IsVUFBVTV5RCxPQUd4RCxDQUVBLFdBQU11cUYsR0FDZ0IsY0FBaEJ2OEcsS0FBSzdGLFNBQ1A2RixLQUFLczhHLGFBQWMsU0FFZmpnSCxNQUFNa2dILE9BQ2QsSUNuRUcsTUFBTUMsNkJBQTZCbEIsU0FDeEMsV0FBQWoyRyxDQUFhNGUsUUFDWDVuQixNQUFNdUMsUUFBUUMsTUFBTTZhLFlBQVksQ0FDOUJoTCxNQUFPLGlDQUNQcEIsWUFBYSxpRUFDYm12RyxjQUFjLEVBQ2R6OEUsU0FBUyxFQUNUMDhFLE1BQU8sQ0FDTCxDQUNFeHVHLEdBQUksZ0JBQ0owMkUsU0FBVSwrQkFDVmwyRSxNQUFPLDhCQUNQK0IsUUFBUyxnQ0FDVDByRyxXQUFZLFlBRWQsQ0FDRWp1RyxHQUFJLGlCQUNKMDJFLFNBQVUsNEJBQ1ZsMkUsTUFBTywrQkFDUCtCLFFBQVMsaUNBQ1R0VCxPQUFRLFNBRVYsQ0FDRStRLEdBQUksdUJBQ0owMkUsU0FBVSxzQkFDVmwyRSxNQUFPLG9DQUNQK0IsUUFBUyxzQ0FDVHRULE9BQVEsU0FFVixDQUNFK1EsR0FBSSxrQkFDSjAyRSxTQUFVLHVEQUNWbDJFLE1BQU8sK0JBQ1ArQixRQUFTLGlDQUNUdFQsT0FBUSxTQUVWLENBQ0UrUSxHQUFJLGtCQUNKMDJFLFNBQVUsZ0NBQ1ZsMkUsTUFBTywrQkFDUCtCLFFBQVMsbUNBR2Jrc0csYUFBYyxDQUNaLDhCQUErQixnQkFDL0IsZ0NBQWlDLDhCQUNqQywrQkFBZ0MscUJBQ2hDLGlDQUFrQyx5Q0FDbEMsb0NBQXFDLGtCQUNyQyxzQ0FBdUMsZ0NBQ3ZDLCtCQUFnQyxtQ0FDaEMsaUNBQWtDLHVEQUNsQywrQkFBZ0Msb0JBQ2hDLGlDQUFrQyxxRUFFbkMxNEYsUUFDTCxFQ3pESyxNQUFNMjRGLDZCQUE2QkoscUJBQ3hDLFdBQUFuM0csQ0FBYTRlLFFBQ1g1bkIsTUFBTSxDQUNKcVMsTUFBTyxtQ0FDUHBCLFlBQWEsaURBQ2JxdkcsYUFBYyxDQUNaLDhCQUErQixhQUMvQixnQ0FBaUMsZ0NBQ2pDLCtCQUFnQyw0QkFDaEMsaUNBQWtDLDBDQUNsQyxvQ0FBcUMsaUJBQ3JDLHNDQUF1QyxvQ0FDdkMsK0JBQWdDLCtDQUNoQyxpQ0FBa0Msd0VBQ2xDLCtCQUFnQyxnQ0FDaEMsaUNBQWtDLDBGQUd4QyxFQ2ZLLFNBQVMsZUFDZDNpRSxNQUFNa2hDLEtBQUssU0FBUzU0RSxVQUNsQjZJLFFBQVEyK0IsSUFBSSx1Q0FDUnhzQyxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSx1QkFBeUJJLEtBQUtzRyxLQUFLMkUsS0FJakVqTCxLQUFLK2hELGFBQWUsSUFBSUEsYUFFeEIsTUFBTXc5RCxvQkFBc0J2L0csS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsb0JBQ3RELElBQUk4MUQsS0FBTzExRCxLQUFLQyxLQUFLeTFELEtBQ3JCLE1BQU04cEQsT0FBUyxDQUNianVDLEdBQUksbUJBQ0pzQixHQUFJLG1CQUNKRCxHQUFJLHlCQUVzQixJQUFqQjRzQyxPQUFPOXBELFFBQ2hCQSxLQUFPLE1BRVRwd0QsT0FBT2xCLEtBQU9rQixPQUFPbEIsTUFBUSxDQUFDLEVBQzlCa0IsT0FBT2xCLEtBQUtnb0YsT0FBU296QixPQUFPOXBELE1BQ3hCcDBELFFBQVFDLE1BQU1DLGVBQWV4QixLQUFLdkIsT0FBT2dELFFBQVM4OUcscUJBQXVCLGNBQ3BFdi9HLEtBQUt3aUQsTUFBTTVpRCxJQUFJLG1CQUFtQmlqRCxZQUFZdjlDLE9BQU9sQixLQUFLZ29GLFVBQVUzckYsTUFBTUMsUUFBTyxHQUN4RlYsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVEsbUJBQW9COUssS0FBS3ZCLE9BQU9nRCxVQ3hCekR1RCxpQkFDTCxJQUNFLElBQUkwd0QsS0FBTzExRCxLQUFLQyxLQUFLeTFELEtBQ3JCLE1BQU0rcEQsTUFBUSxDQUNabHVDLEdBQUksQ0FDRix1QkFBd0IydEMsc0JBRTFCdHNDLEdBQUksQ0FDRix1QkFBd0Iwc0MsNEJBR0QsSUFBaEJHLE1BQU0vcEQsUUFDZkEsS0FBTyxNQUVULElBQUssTUFBTWdxRCxZQUFZRCxNQUFNL3BELE1BQzNCMTFELEtBQUt5L0csTUFBTWx2QixTQUFTLE9BQVFtdkIsU0FBVSxJQUFJRCxNQUFNL3BELE1BQU1ncUQsVUFFMUQsQ0FBRSxNQUFPaHlHLEtBQ1BHLFFBQVF1UyxNQUFNLGFBQWMxUyxJQUM5QixDQUNGLENETUlpeUcsRUFBYyxHQUVsQixDRW5CTyxNQUFNQyxVQUFZLENBQ3ZCLE1BQUFDLEdDWkFuakUsTUFBTTkvQixHQUFHLGVBQWU1WCxNQUFPODZHLGNBQWU5OUcsUUFBUys5RyxhQUVyRCxHQUFJLy9HLEtBQUtzRyxLQUFLc0ssS0FBT212RyxZQUdXLDhCQUE5QkQsY0FBYy9xRyxRQUFRQyxLQUN0QjhxRyxjQUFjL3FHLFFBQVFDLE1BQVE4cUcsY0FBY0UsUUFBUXJqSCxNQUFNeUwsTUFDMUQwM0csY0FBYy9xRyxRQUFRQyxJQUFNOHFHLGNBQWNFLFFBQVFyakgsTUFBTXlMLEtBSWpCLGNBQXJDMDNHLGNBQWNFLFFBQVFyakgsTUFBTW9FLE9BQXlCKytHLGNBQWNFLFFBQVFyakgsTUFBTXFuRCw0QkFBOEI4N0QsY0FBY0UsUUFBUXJqSCxNQUFNc25ELG9CQUM3SSxPQUFRamtELEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGtCQUNoQyxJQUFLLE1BQ0gsSUFBSXUzQixPQUNGLENBQ0UvbEIsTUFBT3BSLEtBQUtDLEtBQUtDLFNBQVMsZ0NBQzFCaVQsUUFBU25ULEtBQUtDLEtBQUtDLFNBQVMsaUNBQzVCazNCLFFBQVMsQ0FDUHZ6QixLQUFNLENBQ0o5RCxNQUFPQyxLQUFLQyxLQUFLQyxTQUFTLHFDQUMxQm0zQixTQUFVcnlCLGdCQUNGODZHLGNBQWNFLFFBQVFyakgsTUFBTXVuRCwyQkFDbEN6NEMsR0FBR0MsY0FBY3pJLEtBQUtqRCxLQUFLQyxLQUFLMFcsT0FBTyxnQ0FBaUMsQ0FBRTdkLEtBQU1nbkgsY0FBYzdyRyxPQUFPdFgsTUFBTTdELFFBQzNHZ25ILGNBQWNFLFFBQVFyakgsTUFBTWtQLFFBQVMsSUFHekN3NEMsUUFBUyxDQUNQdGtELE1BQU9DLEtBQUtDLEtBQUtDLFNBQVMsd0NBQzFCbTNCLFNBQVVyeUIsZ0JBQ0Y4NkcsY0FBY0UsUUFBUXJqSCxNQUFNeW5ELDhCQUNsQzM0QyxHQUFHQyxjQUFjekksS0FBS2pELEtBQUtDLEtBQUswVyxPQUFPLGtDQUFtQyxDQUFFN2QsS0FBTWduSCxjQUFjN3JHLE9BQU90WCxNQUFNN0QsUUFDN0dnbkgsY0FBY0UsUUFBUXJqSCxNQUFNa1AsUUFBUyxJQUd6Q3loRSxLQUFNLENBQ0p2dEUsTUFBT0MsS0FBS0MsS0FBS0MsU0FBUywrQkFHN0JRLFFBQU8sR0FDWixNQUVGLElBQUssT0FDSG8vRyxjQUFjRSxRQUFRcmpILE1BQU11bkQsMkJBQzVCejRDLEdBQUdDLGNBQWN6SSxLQUFLakQsS0FBS0MsS0FBSzBXLE9BQU8sZ0NBQWlDLENBQUU3ZCxLQUFNZ25ILGNBQWM3ckcsT0FBT3RYLE1BQU03RCxRQUMzR2duSCxjQUFjRSxRQUFRcmpILE1BQU1rUCxRQUFTLEVBQ3JDLE1BRUYsSUFBSyxVQUNIaTBHLGNBQWNFLFFBQVFyakgsTUFBTXluRCw4QkFDNUIzNEMsR0FBR0MsY0FBY3pJLEtBQUtqRCxLQUFLQyxLQUFLMFcsT0FBTyxrQ0FBbUMsQ0FBRTdkLEtBQU1nbkgsY0FBYzdyRyxPQUFPdFgsTUFBTTdELFFBQzdHZ25ILGNBQWNFLFFBQVFyakgsTUFBTWtQLFFBQVMsRUFNM0MsSUN6REY2d0MsTUFBTWtoQyxLQUFLLG1CQUFtQngzRSxTQUM1QkEsT0FBTzY1RyxjQUFjLENBQ25CbC9HLEtBQU0sS0FDTmtQLE9BQVEsQ0FBQyxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxNQUMvRGl3RyxVQUFXLElBQ1h6aEgsT0FBUSxhQUVWMkgsT0FBTzY1RyxjQUFjLENBQ25CbC9HLEtBQU0sS0FDTmtQLE9BQVEsQ0FBQyxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxNQUMvRGl3RyxVQUFXLElBQ1h6aEgsT0FBUSxZQUNULElGR0QsY0FDQSxlR2hCRmkrQyxNQUFNOS9CLEdBQUcsb0JBQW9CNVgsTUFBT2dELEtBQU0yVSxLQUFNM2EsV0FBbkJnRCxJQ0c3QjAzQyxNQUFNOS9CLEdBQUcscUJBQXFCLENBQUN4akIsSUFBS3VqQixLQUFNM1UsUUFDeEN1Z0MsU0FBU3dJLGtCQUFrQjMzQyxJQUFLdWpCLEtBQU0zVSxNQUN0Q3VnQyxTQUFTa0gsc0JBQXNCcjJDLElBQUt1akIsS0FBTTNVLFdBQ1EsSUFBdkM1TyxJQUFJd0ksT0FBT3dDLE9BQU8sa0JBQzNCeWEsaUJBQWlCeUcsa0JBQWtCbHNCLElBQUt1akIsS0FBTTNVLEtBQ2hELElDUkYwMEMsTUFBTTkvQixHQUFHLGdCQUFnQixDQUFDMFosT0FBUTNaLFFBQ2hDLE1BQU1tZixLQUFPbmYsS0FBS3ZhLEtBQUssUUFDdkIsR0FBSTA1QixLQUFLNG1DLEdBQUcscUJBQXNELElBQS9CNW1DLEtBQUsxNUIsS0FBSyxVQUFVa0IsT0FBYyxDQUNuRSxNQUFNNjhHLHNCQUF3QnJrRixLQUFLMTVCLEtBQUssaUJBQ2xDZytHLGlCQUFtQixHQUNuQkMsbUJBQXFCcmdILEtBQUttRSxTQUFTdkUsSUFDdkMsT0FDQSx3QkFFRnVnSCxzQkFBc0IvaUcsV0FBV3k3QyxNQUFLLENBQUM5TyxFQUFHdTJELGdCQUN4QyxNQUFNL2hILElBQU0raEgsYUFBYS9pQyxhQUFhZ2pDLGFBQ2xDdmdILEtBQUtDLEtBQUswQixJQUFJLGlCQUFpQnBELFNBQ2pDK2hILGFBQWEvaUMsWUFBY3Y5RSxLQUFLQyxLQUFLQyxTQUFTLGlCQUFpQjNCLFNBRTdEOGhILGtCQUFxQixDQUFDLFdBQVczNkcsU0FBUzQ2RyxhQUFhMW5ILFFBQ3pEd25ILGlCQUFpQnhtSCxLQUFLMG1ILGFBQ3hCLElBRUZILHNCQUFzQjE0QixRQUN0QjA0QixzQkFBc0I3ckUsT0FDcEI4ckUsaUJBQWlCdnhHLE1BQUssQ0FBQ2tWLE1BQU95OEYsU0FDNUJ6OEYsTUFBTTZNLFVBQVU0dUIsY0FBY2doRSxPQUFPNXZGLGNBR0wsVUFBaEN1dkYsc0JBQXNCNzdFLE1BQ3hCNjdFLHNCQUFzQjc3RSxJQUFJLGFBQ2UsU0FBaEM2N0Usc0JBQXNCNzdFLE9BQy9CNjdFLHNCQUFzQjc3RSxJQUFJLE9BRTlCLEtDNUJGb1ksTUFBTTkvQixHQUFHLG1CQUFtQjVYLE1BQU9nRCxLQUFNMlUsS0FBTTNhLFdBQW5CZ0QsSUNBNUIwM0MsTUFBTTkvQixHQUFHLGVBQWU1WCxNQUFPZ0QsS0FBTTJVLEtBQU0zYSxXQUN6QyxJQUFJeStHLGVBQWdCLEVBQ2hCQyxjQUFlLEVBQ2YxZ0gsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEseUJBQ3FDLFNBQTdESSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSxpQkFBaUI4SyxlQUM3Q2lTLEtBQUt2YSxLQUFLLE9BQU9zakIsU0FFZ0MsS0FBL0MxbEIsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsbUJBQzVCK2MsS0FBS3ZhLEtBQUssT0FBT3doRCxLQUFLLE1BQU81akQsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsa0JBQ3ZENmdILGVBQWdCLEdBR2dDLEtBQTlDemdILEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGtCQUM1QitjLEtBQUt2YSxLQUFLLE1BQU11YSxLQUFLM2MsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsaUJBQy9DOGdILGNBQWUsSUFHZEQsZUFDSDlqRyxLQUFLdmEsS0FBSyxPQUFPd2hELEtBQUssTUFBTyw2Q0FFMUI4OEQsY0FDSC9qRyxLQUFLdmEsS0FBSyxjQUFjdWEsS0FBSzNjLEtBQUtDLEtBQUtDLFNBQVMsa0JBQ2xELElDckJGdzhDLE1BQU05L0IsR0FBRyxvQkFBb0IsQ0FBQytqRyxXQUFZaGtHLEtBQU0zVSxRQUM5Q3dtQixFQUFFLFFBQVE4bEIsT0FBTyw4Q0FBZ0R0MEMsS0FBS0MsS0FBSzBXLE9BQU8xZixLQUFLbVMsS0FBS3BKLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLGNBQWdCLG1DQUFvQyxDQUFFaThDLElBQUs3N0MsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsY0FBaUIsVUFBVWdoSCxZQUFZcHlGLEVBQUUsS0FBTTdSLE1BQUssSUNEalErL0IsTUFBTTkvQixHQUFHLGtCQUFrQixDQUFDeGpCLElBQUt1akIsS0FBTTNhLFdBQ3JDLElBQUssTUFBTXFZLFFBQVFyWSxRQUFRNitHLFNBQ3pCLElBQUssTUFBTTU4RSxTQUFTamlDLFFBQVE2K0csU0FBU3htRyxNQUFNMDhELE9BQ3pDLEdBQUkvMEUsUUFBUTYrRyxTQUFTeG1HLGdCQUFpQnd0RixlQUFnQixDQUNwRCxNQUFNaVosSUFBTW5rRyxLQUFLdmEsS0FBSyxVQUFZaVksS0FBTyxJQUFNNHBCLE1BQVEsTUFDcEMsSUFBZjY4RSxJQUFJeDlHLFNBQ053OUcsSUFBSSxHQUFHdGtDLFlBQWN4OEUsS0FBS0MsS0FBS0MsU0FBUyx1Q0FFNUMsQ0FFSixJQ1ZGdzhDLE1BQU05L0IsR0FBRyx3QkFBd0IsQ0FBQ3hqQixJQUFLdWpCLEtBQU1yVyxRQUMzQzh3RSxvQkFBb0JNLFlBQVkvNkQsS0FBSSxHVnNCdEMsR1dsQkYzWCxlQUFlKzdHLGtCQUFtQi80RyxNQUNoQyxNQUFNZzVHLFlBQWMsSUFBSXo3RSxnQkFDdEJ2OUIsS0FBS2tnQixVQUNMbGdCLEtBQUsrVyxVQUNML1csS0FBS21mLGFBRVA2NUYsWUFBWWg3RSxhQUFlaCtCLEtBQUs4TCxTQUVoQyxhQURzQmt0RyxZQUFZajZFLGdCQUVwQyxDQUVBL2hDLGVBQWVpOEcsY0FBZWo1RyxNQUM1QixJQUNFLElBQUlyTCxNQUVGQSxNQURFcUwsS0FBS3VILE1BQ0N2UCxLQUFLd1AsT0FBTzVQLElBQUlvSSxLQUFLdUgsT0FBT0QsT0FBTzFQLElBQUlvSSxLQUFLczVELFdBQVcza0UsTUFFdkRxRCxLQUFLcVAsT0FBT3pQLElBQUlvSSxLQUFLczVELFdBRS9CLE1BQU0zNEQsS0FBT2hNLE1BQU1rVSxNQUFNalIsSUFBSW9JLEtBQUtXLFlBQ1ozSSxLQUFLcVAsT0FDeEJ6UCxJQUFJb0ksS0FBS3U1RCxTQUNUemhFLHdCQUF3QixPQUFRLENBQUM2SSxLQUFLdTZDLFlBRXZDdm1ELE1BQU02cEQsd0JBQXdCLE9BQVEsQ0FBQzc5QyxLQUFLaUksSUFFaEQsQ0FBRSxNQUFPMU4sR0FFUCxPQURBdUksR0FBR0MsY0FBYzBVLE1BQU1sZCxJQUNoQixDQUNULENBQ0EsT0FBTyxDQUNULENDakNPLE1BQU1nK0csaUJBT1gsdUJBQWFDLENBQVluNUcsTUFDdkIsUUFBNkIsSUFBbEJBLEtBQUt5WSxVQUNkLEdBQUl6Z0IsS0FBS3NHLEtBQUtzSyxLQUFPNUksS0FBS3lZLFNBQ3hCLE9BQVF6WSxLQUFLakgsTUFDWCxJQUFLLG1CQUNIMitFLHVCQUF1QmtLLHdCQUF3QjVoRixLQUFLdWhGLFNBQ3BELE1BQ0YsSUFBSyxpQkFDSHZwRixLQUFLcVAsT0FBT3pQLElBQUlvSSxLQUFLdWhGLFNBQVM5b0YsTUFBTUMsUUFBTyxHQUMzQyxNQUNGLElBQUssb0JBQ0htZSxpQkFBaUIwRixnQkFBZ0J2YyxNQUNqQyxNQUNGLElBQUsscUJBQ0g2VyxpQkFBaUJvRixlQUFlamMsTUFDaEMsTUFDRixJQUFLLHVCQUNINlcsaUJBQWlCd0UsaUJBQWlCcmIsV0FJbkMsQ0FDTCxHQUFJaEksS0FBS3NHLEtBQUsyRSxLQUNaLE9BQVFqRCxLQUFLakgsTUFDWCxLQUFLZzlCLGlCQUFpQnZGLGNBQWN6M0IsS0FDbENnOUIsaUJBQWlCekYsU0FBU3R3QixNQUMxQixNQUNGLEtBQUsreEIsa0JBQWtCdkIsY0FBY3ozQixLQUNuQ2c1QixrQkFBa0J6QixTQUFTdHdCLE1BQzNCLE1BQ0YsSUFBSyxnQkFFa0JZLFNBQVNaLEtBQUtXLE9BQzVCWCxLQUFLeTVGLFFBQVF6NUYsS0FBS0EsTUFLL0IsT0FBUUEsS0FBS2pILE1BQ1gsSUFBSyxhQUNIdUosY0FBYyttRCxtQkFDZCxNQUNGLElBQUssaUJBQ0hyeEQsS0FBS21FLFNBQVMyRyxJQUFJLE9BQVF1dkcsV0FBV0MsZ0JBQWdDLElBQWhCdHlHLEtBQUtxVixRQUdoRSxDQUNGLENBTUEsMEJBQU8rakcsQ0FBcUJwNUcsTUFDMUIsR0FBSWhJLEtBQUtzRyxLQUFLMkUsS0FDWmpELEtBQUt5WSxTQUFXemdCLEtBQUtzRyxLQUFLc0ssR0FDMUJzd0csaUJBQWlCQyxXQUFXbjVHLFVBQ3ZCLENBQ0wsTUFBTWd0RCxRQUFVaDFELEtBQUtnbEIsTUFBTWpzQixRQUFPb3RCLEdBQUtBLEVBQUUxaUIsUUFBVTBpQixFQUFFbGIsT0FDakQrcEQsUUFBUTF4RCxRQUNWMEUsS0FBS3lZLFNBQVd1MEMsUUFBUSxHQUFHcGtELEdBQzNCNVEsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWV4WSxPQUVoQ3lELEdBQUdDLGNBQWMwVSxNQUNmcGdCLEtBQUtDLEtBQUtDLFNBQVMsK0JBR3pCLENBQ0YsQ0FVQSx3QkFBT21oSCxDQUNMcjVHLE1BQ0EsT0FBVyxLQUFJLGdCQUFtQixFQUFJLGFBQWdCLEdBQVMsQ0FBQyxHQUVoRSxHQUFJOGMsYUFBNEIsSUFBWEEsT0FDbkIsR0FBSUEsU0FBVzlrQixLQUFLc0csS0FBS3NLLEdBQ3ZCNUksS0FBS3lZLFNBQVd6Z0IsS0FBS3NHLEtBQUtzSyxHQUMxQnN3RyxpQkFBaUJDLFdBQVduNUcsVUFDdkIsQ0FDTCxNQUFNMUIsS0FBT3RHLEtBQUtnbEIsTUFBTXBsQixJQUFJa2xCLGFBQ0wsSUFBWnhlLEtBQUtzSyxJQUFzQnRLLEtBQUs3QyxRQUN6Q3VFLEtBQUt5WSxTQUFXbmEsS0FBS3NLLEdBQ3JCNVEsS0FBS3VnQixPQUFPQyxLQUFLLGNBQWV4WSxPQUN2QnM1RyxnQkFDVDcxRyxHQUFHQyxjQUFjMFUsTUFBTXBnQixLQUFLQyxLQUFLQyxTQUFTLHlCQUU5QyxNQUVJcWhILGFBQ0ZMLGlCQUFpQkMsV0FBV241RyxNQUU5QmhJLEtBQUt1Z0IsT0FBT0MsS0FBSyxjQUFleFksS0FFcEMsRUNpWUYsU0FBU3c1RyxhQUFjdmlILE9BQ3JCLE9BQU9BLE1BQU02eUIsUUFDZixDQXBkQTRxQixNQUFNOS9CLEdBQUcsd0JBQXdCLENBQUN4akIsSUFBS3VqQixLQUFNM2EsV0FDM0MsTUFBTXkvRyxVQUFZanpGLEVBQUVwMUIsSUFBSTBpQyxNQUFNMTVCLEtBQUsseUJBQ25DcS9HLFVBQ0dyL0csS0FBSyx1Q0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLDRCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSyxvQ0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLHNCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSyw4Q0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLDJCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSyx3Q0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLHVCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSywwQ0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLDZCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSywrQ0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLHVCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSywyQ0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLHdCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSyxpQ0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLDRCQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSyxnQ0FDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLGdDQUNuQixTQUVOdWhILFVBQ0dyL0csS0FBSyxpREFDTDdDLFFBQVEsa0JBQ1JtaUgsT0FDQyw4QkFDRTFoSCxLQUFLQyxLQUFLQyxTQUFTLDJCQUNuQixRQUNKLElBWUp3OEMsTUFBTWtoQyxLQUFLLFFBQVE1NEUsaUJBQ2pCaEYsS0FBS29FLEtBQU8sQ0FDVjZzRCxPQUFRLENBQ05sL0IsV0FBWXpuQixjQUFjaW1ELGdCQUMxQnQrQixZQUFhM25CLGNBQWNrbUQsaUJBQzNCNzNDLE1BQU9yTyxjQUFjcW1ELFlBRXZCbDFCLE1BQU8sQ0FDTFUsWUFFRjkzQixJQUFLLENBQ0hDLEtBQU0sQ0FDSkMsWUFBWSxFQUNaSSxjQUFjLElBR2xCeUUsS0FBTSxDQUFDeXlDLElBQUsvaUQsUUFDVjdCLEtBQUttUyxLQUFLeXlDLEtBQU8vaUQsTUFFbkJ3Z0gsb0JBQXFCdkMsb0JBQW9CdUMsb0JBQ3pDQyxxQkFBc0J4QyxvQkFBb0J3QyxxQkFDMUNDLHNCQUF1QnpDLG9CQUFvQnlDLHNCQUMzQ0Usd0JBQXlCM0Msb0JBQW9CMkMsd0JBQzdDVSxhQUFjckQsb0JBQW9CcUQsYUFDbENRLGFBQWM3RCxvQkFBb0I2RCxhQUNsQ0csdUJBQXdCaEUsb0JBQW9CZ0UsdUJBQzVDSyxRQUFTckUsb0JBQW9CcUUsU0FFL0J0UyxPQUFPdm1HLFVBQVU0Z0QsZUFBaUJBLGNBQ3BDLEl6RDFJTyxZQUFxQncrRCxXQUkxQmpsRSxNQUFNOS9CLEdBQUcsaUJBQWlCLENBQUN4akIsSUFBS3VqQixLQUFNM1UsT0FDcENtb0Ysb0JBQW9CRSxVQUFVajNGLElBQUt1akIsS0FBTTNVLFFBRzNDMDBDLE1BQU1raEMsS0FBSyxtQkFBbUIsV0FDNUJ1UyxvQkFBb0JJLFNBQVNveEIsV0FDN0J4eEIsb0JBQW9CNXZFLE9BQVNxaEcsVUFBVUMsZUFBZTdoSCxLQUFLdkIsT0FBT21TLElBQ2xFdS9FLG9CQUFvQjV2RSxPQUFPZ3dFLFNBQVMsZ0JBQWlCM2hFLGVBQ3JEdWhFLG9CQUFvQjV2RSxPQUFPZ3dFLFNBQVMsV0FBWVIsVUFDaERJLG9CQUFvQjV2RSxPQUFPZ3dFLFNBQVMsU0FBVUwsT0FFaEQsSUFFQXh6QyxNQUFNOS9CLEdBQUcscUJBQXFCLENBQUN4akIsSUFBS3VqQixLQUFNM1UsT0FDeENpb0YsaUJBQWlCMTBELGNBQWM1ZSxPQUVuQyxDeUR3SEFtbEcsQ0FBUW5yQixtQkFFUmo2QyxNQUFNOS9CLEdBQUcsdUJBQXVCLENBQUN4akIsSUFBS3VqQixLQUFNM1UsT0FDMUNpaUUsV0FBV0Msb0JBQW9COXdFLElBQUt1akIsS0FBTTNVLFFDeEoxQzAwQyxNQUFNOS9CLEdBQUcsZUFBZSxDQUFDRCxLQUFNeEosV0FFN0IsR0FBSUEsUUFBUTVLLE1BQU0sZ0JBQWlCLENBRWpDLE1BQU13NUcsU0FBVzV1RyxRQUFRNUssTUFBTSxVQWdDL0IsT0EvQkl3NUcsU0FDRixJQUFJdjlHLEtBQUssU0FBU1gsS0FBSyxDQUFFbUIsT0FBTyxJQUFRK0UsTUFBS2dRLElBQzNDLE1BQU1waEIsRUFBSW9oQixFQUFFOVUsT0FDTis4RyxJQUFNRCxTQUNUcjdHLEtBQUlxZixJQUNILElBQUlpOEYsSUFBTSxHQWNWLE9BYllBLElBQVJycEgsR0FBSyxFQUFTcUgsS0FBS0MsS0FBS0MsU0FBUyx3QkFDNUJ2SCxHQUFLLElBQVdxSCxLQUFLQyxLQUFLQyxTQUFTLGVBQ25DdkgsR0FBS290QixFQUFJLEVBQ1YvbEIsS0FBS0MsS0FBS0MsU0FBUyx1QkFDaEJ2SCxHQUFLb3RCLEVBQUksRUFDWi9sQixLQUFLQyxLQUFLQyxTQUFTLG9CQUNoQnZILEdBQUtvdEIsRUFBUy9sQixLQUFLQyxLQUFLQyxTQUFTLHVCQUNuQ3ZILEdBQUssSUFDUm90QixFQUFJLEdBQVUvbEIsS0FBS0MsS0FBS0MsU0FBUyxlQUUxQkYsS0FBS0MsS0FBS0MsU0FBUyxnQkFFaEM4aEgsS0FBTyxJQUFNaGlILEtBQUtDLEtBQUtDLFNBQVMsY0FBZ0IsSUFBTTZsQixFQUMvQ2k4RixPQUVSajdHLEtBQUssT0FDUmdULEVBQUU4ZSxVQUFVLENBQ1ZsbUIsUUFBU3pNLFlBQVkwTSxhQUNyQkYsT0FBUXN2RyxLQUNULElBR0h2MkcsR0FBR0MsY0FBYzBVLE1BQU0sK0JBR2xCLENBQ1QsS0R1SEp3L0YsVUFBVUMsU0FFVm5qRSxNQUFNa2hDLEtBQUssbUJGcEtKLFdBQ0w1OUUsS0FBSzYwQyxXQUFhK3NFLFVBQVVDLGVBQWUsUUFDM0M3aEgsS0FBSzYwQyxXQUFXMDdDLFNBQVMsb0JBQXFCd3dCLG1CQUM5Qy9nSCxLQUFLNjBDLFdBQVcwN0MsU0FBUyxnQkFBaUIwd0IsY0FDNUMsSUVrS0F2a0UsTUFBTWtoQyxLQUFLLFNBQVMsV0FFbEIsTUFBTXFrQyxXQUFhLENBQ2pCLGtCQUNBLFdBQ0EsYUFDQSx1QkFDQSxjQUdGLElBQUssTUFBTWw0RCxLQUFLazRELFdBQVksQ0FDMUIsTUFBTUMsVUFBWTUvRyxPQUFPMkssUUFBUWhXLEtBQUs4eUQsSUFBSXJqRCxLQUFJeEQsR0FDckMsQ0FBQ0EsRUFBRSxHQUFJbEQsS0FBS0MsS0FBS0MsU0FBU2dELEVBQUUsT0FFckNqTSxLQUFLOHlELEdBQUttNEQsVUFBVXZ6RyxRQUFPLENBQUM0RixJQUFLclIsS0FDL0JxUixJQUFJclIsRUFBRSxJQUFNQSxFQUFFLEdBQ1BxUixNQUNOLENBQUMsRUFDTixDQUVBLElBQUk0dEcsWUFBYzc4RyxPQUFPNmdELGNBQWNwTCxXQUNyQ3QxQyxHQUFLQSxFQUFFbUwsS0FBTzNaLEtBQUs0RixPQUFPTyxRQUVQLElBQWpCK2tILGNBQ0Y3OEcsT0FBTzZnRCxjQUFjZzhELGFBQWFoaUgsS0FDaEMsMkNBRUpnaUgsWUFBYzc4RyxPQUFPNmdELGNBQWNwTCxXQUNqQ3QxQyxHQUFLQSxFQUFFbUwsS0FBTzNaLEtBQUs0RixPQUFPRyxlQUVQLElBQWpCbWxILGNBQ0Y3OEcsT0FBTzZnRCxjQUFjZzhELGFBQWFoaUgsS0FDaEMsbURBR0osTUFBTWlpSCxjQUFrQjlnSCxRQUFRQyxNQUFNQyxlQUFleEIsS0FBS3lCLFFBQVMsTUFBa0IsT0FBVixRQUMzRTZELE9BQU82Z0QsY0FBY3dRLFFBQ25CLENBQ0UvbEQsR0FBSTNaLEtBQUs0RixPQUFPQyxZQUNoQixDQUFDc2xILGVBQWdCLHlCQUNqQmppSCxLQUFNLGdEQUVSLENBQ0V5USxHQUFJM1osS0FBSzRGLE9BQU9FLFlBQ2hCLENBQUNxbEgsZUFBZ0Isb0JBQ2pCamlILEtBQU0saURBRVIsQ0FDRXlRLEdBQUkzWixLQUFLNEYsT0FBT0ksZUFDaEIsQ0FBQ21sSCxlQUFnQixzQkFDakJqaUgsS0FBTSwyQ0FFUixDQUNFeVEsR0FBSTNaLEtBQUs0RixPQUFPSyxNQUNoQixDQUFDa2xILGVBQWdCLGFBQ2pCamlILEtBQU0sNkNBR1osSUFFQXU4QyxNQUFNOS9CLEdBQUcsc0JBQXNCLENBQUM1VSxLQUFNaEcsUUFBUzhpQixVQUM3QyxHQUFJOWtCLEtBQUs4a0IsU0FBV0EsT0FBUSxDQUMxQixNQUFNdTlGLFVBQVlsa0gsaUJBQWlCNEQsYUFBYWlHLE1BQ2hELEdBQUlxNkcsVUFDRixPQUFRQSxXQUNOLEtBQUtwckgsS0FBSzRGLE9BQU9FLFlBQ2pCLEtBQUs5RixLQUFLNEYsT0FBT0csWUFDakIsS0FBSy9GLEtBQUs0RixPQUFPSSxlQUNqQixLQUFLaEcsS0FBSzRGLE9BQU9LLE1BQ2pCLEtBQUtqRyxLQUFLNEYsT0FBT00sTUFDakIsS0FBS2xHLEtBQUs0RixPQUFPTyxLQUNmNEssS0FBS3lFLE9BQU9xaEIsYUFBYXUwRixVQUFXLENBQ2xDcjhELFlBQVksSUFFZCxNQUNGLEtBQUsvdUQsS0FBSzRGLE9BQU9DLFlBQ2YsQ0FDRSxNQUFNczZDLFNBQVdwdkMsS0FBS3BHLE1BQU13QyxNQUFNZ3pDLFNBQ2xDLElBQUl0MkMsU0FBVyxNQUNFLElBQWJzMkMsU0FDRnQyQyxTQUFXa0gsS0FBS2xILFVBQVUwMEIsUUFDSixJQUFiNGhCLFdBQ1R0MkMsU0FBV2tILEtBQUtsSCxVQUFVRSxRQUNyQnhDLE1BQU1zQyxZQUNUQSxTQUFXZ0UsS0FBSzBJLE1BQU0xTSxTQUFXLFFBR3JDa0gsS0FBS3lFLE9BQU9xaEIsYUFBYTcyQixLQUFLNEYsT0FBT0MsWUFBYSxDQUNoRGtwRCxZQUFZLEVBQ1o1TyxTQUNBdDJDLFVBRUosRUFJUixLQUdGNDdDLE1BQU05L0IsR0FBRyxzQkFBc0IsQ0FBQzVVLEtBQU1oRyxRQUFTOGlCLFVBQzdDLEdBQUk5a0IsS0FBSzhrQixTQUFXQSxPQUFRLENBQzFCLE1BQU11OUYsVUFBWWxrSCxpQkFBaUI0RCxhQUFhaUcsTUFDaEQsR0FBSXE2RyxVQUNGLE9BQVFBLFdBQ04sS0FBS3BySCxLQUFLNEYsT0FBT0MsWUFDakIsS0FBSzdGLEtBQUs0RixPQUFPRSxZQUNqQixLQUFLOUYsS0FBSzRGLE9BQU9HLFlBQ2pCLEtBQUsvRixLQUFLNEYsT0FBT0ksZUFDakIsS0FBS2hHLEtBQUs0RixPQUFPSyxNQUNqQixLQUFLakcsS0FBSzRGLE9BQU9NLE1BQ2pCLEtBQUtsRyxLQUFLNEYsT0FBT08sS0FDZjRLLEtBQUt5RSxPQUFPMGUsZUFBZWszRixVQUFXLENBQ3BDcjhELFlBQVksSUFJdEIsS0FLRnRKLE1BQU05L0IsR0FBRyxvQkFBb0IwbEcsWUFDM0IsR0FBSUEscUJBQXFCQyxjQUFlLENBQ3RDLE1BQU01NUcsS0FBTzNJLEtBQUs2USxNQUFNek8sTUFBSzhnQixHQUFnQix5QkFBWEEsRUFBRXBxQixPQUNwQyxHQUFJNlAsS0FBTSxDQUNSLE1BQ002NUcsWUFET0YsVUFBVXQrRSxTQUNFNWhDLEtBQUssc0JBQXNCdUcsS0FBS2lJLFFBQ3JENHhHLGNBQWFBLFlBQVksR0FBRy8vRSxNQUFNQyxRQUFVLE9BQ2xELENBQ0YsS0FHRmdhLE1BQU05L0IsR0FBRyxjQUFjLENBQUNrMEMsSUFBSzlvRCxLQUFNK29ELE9BQzFCem1ELGNBQWN1bUQsWUFBWUMsSUFBSzlvRCxLQUFNK29ELFFBRzlDclUsTUFBTTkvQixHQUFHLGlCQUFpQixDQUFDeGpCLElBQUt1akIsS0FBTTNVLE9BQ3BDdWdDLFNBQVN3SCxjQUFjMzJDLElBQUt1akIsS0FBTTNVLFFBRXBDMDBDLE1BQU05L0IsR0FBRyxxQkFBcUIsQ0FBQzhSLFlBQWEzb0IsU0FBVXEyRixLQUFNenBGLFVBQzFENDFCLFNBQVNvSSxvQkFBb0JqaUIsWUFBYTNvQixTQUFVcTJGLEtBQU16cEYsV0FHNUQrcEMsTUFBTTkvQixHQUFHLFNBQVM1WCxVQXVCaEIsU0FBU3k5RyxzQkFBdUI1MEMsTUFBT2o5RCxJQUNsQjVRLEtBQUtvRSxLQUFLbXpDLE9BQU9zMkIsT0FBekIsU0FBUGo5RCxHQUF5QyxLQUNkNVEsS0FBS3UzQyxPQUFPMzNDLElBQUlnUixHQUNqRCxPQXhCTSs3RCxRQUFRQyxpQkFtTGhCLFdBQ0UsTUFBTTU4QyxLQUFPeEIsRUFBRSxRQUNmaGQsU0FBU2l1RCxpQkFBaUIsUUFBU3pILGdCQUFnQlksVUFDbkQ1b0MsS0FBS3BULEdBQUcsUUFBUyxzQkFBdUJuRyxVQUFVcTRDLG9CQUNsRHQ5QyxTQUFTaXVELGlCQUFpQixZQUFhK2hELGFBQ3pDLENBcExFa0IsR0FJQTFpSCxLQUFLb0UsS0FBS3FLLGdCQUFrQnpPLEtBQUt3aUQsTUFBTTVpRCxJQUFJLGdCQUFnQjhpRCxnQkFFM0QxaUQsS0FBS3VnQixPQUFPM0QsR0FBRyxlQUFlNVgsYUFDNUJrOEcsaUJBQWlCQyxXQUFXbjVHLEtBQUksSUFtQmxDLE1BQU0yNkcsWUFBYyxDQUFFdHFILEtBQU0sNEJBQzVCLElBQUssTUFBTW9OLEtBQUt6RixLQUFLdTNDLE9BQ25Cb3JFLFlBQVlsOUcsRUFBRXN2QyxLQUFPdHZDLEVBQUUzTSxLQUd6QmtILEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSw0QkFBNkIsQ0FDMUR6M0YsS0FBTSxxQ0FDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxPQUNUbGQsS0FBTWpDLE9BQ05zcEcsUUFBU3VhLFlBQ1R0YSxTQUFVejNGLElBQU02eEcsc0JBQXNCLHdCQUF5Qjd4RyxNQUdqRTVRLEtBQUttRSxTQUFTb3NGLFNBQVMsT0FBUSw2QkFBOEIsQ0FDM0R6M0YsS0FBTSxzQ0FDTnk5RCxNQUFPLFFBQ1A1dkMsUUFBUSxFQUNSMUksUUFBUyxPQUNUbGQsS0FBTWpDLE9BQ05zcEcsUUFBU3VhLFlBQ1R0YSxTQUFVejNGLElBQU02eEcsc0JBQXNCLHlCQUEwQjd4RyxNQTJDbEU1USxLQUFLb0UsS0FBS216QyxPQUFTLENBQ2pCcXJFLHNCQUM2RCxTQUEzRDVpSCxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSw2QkFDdEIsS0FDQUksS0FBS3UzQyxPQUFPMzNDLElBQ1pJLEtBQUttRSxTQUFTdkUsSUFBSSxPQUFRLDhCQUVoQ2lqSCx1QkFDOEQsU0FBNUQ3aUgsS0FBS21FLFNBQVN2RSxJQUFJLE9BQVEsOEJBQ3RCLEtBQ0FJLEtBQUt1M0MsT0FBTzMzQyxJQUNaSSxLQUFLbUUsU0FBU3ZFLElBQUksT0FBUSwrQkFNbEMsSUFLRjg4QyxNQUFNOS9CLEdBQ0osd0JBQ2EsQ0FBQ3hqQixJQUFLdWpCLEtBQU0zVSxPQUNWNmpHLGVBQWUrQixVQUFVeDBHLElBQUt1akIsS0FBTTNVLFFBR3JEMDBDLE1BQU05L0IsR0FBRyx1QkFBdUIsQ0FBQ3hqQixJQUFLdWpCLE9BQ3BDa3ZGLGVBQWVsd0YsUUFBUXZpQixJQUFLdWpCLFFBSTlCKy9CLE1BQU05L0IsR0FBRyxtQkFBbUJrbUcsZ0JBQWtCQSxlQUFlN2xELGlCQUM3RHZnQixNQUFNOS9CLEdBQUcsMkJBQTJCLENBQUN4akIsSUFBS3VqQixLQUFNM1UsT0FDOUMwOEQsa0JBQWtCRixVQUFVcHJFLElBQUt1akIsS0FBTTNVLFFBRXpDMDBDLE1BQU05L0IsR0FBRyxzQkFBc0IsQ0FBQ3hqQixJQUFLdWpCLEtBQU0zVSxPQUN6Q3U3RCxhQUFhaUIsVUFBVXByRSxJQUFLdWpCLEtBQU0zVSxRQUtwQzAwQyxNQUFNOS9CLEdBQUcsY0FBZXRTLGNBQWN1bEQsZ0JBS3RDblQsTUFBTTkvQixHQUFHLDBCQUEwQixTQTBCbkM4L0IsTUFBTTkvQixHQUFHLG1CQUFvQmtvRCxtQkFBbUIzc0IsYUFDaER1RSxNQUFNOS9CLEdBQUcsa0JBQW1Ca29ELG1CQUFtQjNzQixhQUUvQ3VFLE1BQU05L0IsR0FBRyx5QkFBMEJrdUUsU0FBU0MsWUFDNUNydUMsTUFBTTkvQixHQUFHLHNCQUF1Qmt1RSxTQUFTUSxnQkFFekM1dUMsTUFBTTkvQixHQUFHLGlCQUFrQjZ1RSxXQUFXRSxpQkFFdENqdkMsTUFBTTkvQixHQUFHLHNCRTFlRixTQUE2QmpnQixNQUFPOEQsTUFBT3VILE1BQ2hELEdBQWtCLFNBQWRBLEtBQUtqSCxNQUFtQmlILEtBQUs0SCxRQUFTLENBQ3hDLEdBQUlqVCxNQUFNcUwsS0FBSytzQyxNQUFRL3NDLEtBQUs0SCxRQUMxQixPQUVGLElBQUkweEQsVUFBWSxLQU1oQixPQUpFQSxVQURFdDVELEtBQUttSCxTQUFXbkgsS0FBS2tILFFBQ1hsUCxLQUFLd1AsT0FBTzVQLElBQUlvSSxLQUFLbUgsU0FBU0csT0FBTzFQLElBQUlvSSxLQUFLa0gsU0FBU3ZTLE1BRXZEcUQsS0FBS3FQLE9BQU96UCxJQUFJb0ksS0FBSzRILFNBRTNCalQsTUFBTXFMLEtBQUtqSCxNQUNqQixJQUFLLFlBQ0wsSUFBSyxNQUNMLElBQUssV0FDSCxJQUFLLENBQUMsU0FBUzJFLFNBQVNzQyxLQUFLQSxLQUFLakgsTUFDaEMsT0FFRixNQUNGLElBQUssVUFDSCxPQUNGLElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVTJFLFNBQVNzQyxLQUFLQSxLQUFLakgsTUFDMUQsT0FHRnVnRSxXQUNGQSxVQUFVOWEsd0JBQXdCLE9BQVEsQ0FBQ3grQyxLQUFLQSxLQUFLK3NDLEtBRXpELENBQ0YsSUZ5ZEF6dkMsT0FBT21HLEdBQUd0SCxTQUFXOG5GLHNCQUNyQjNtRixPQUFPbUcsR0FBR3lyRCxXQUFhbTFCLHdCQUN2Qi9tRixPQUFPbUcsR0FBRzRELE9BQVNvOUUsbUJBRW5CL3ZDLE1BQU05L0IsR0FBRyxZRzVmTSxTQUFtQm1tRyxNQUM1QkEsS0FBS3Z4RyxTQUFTclAsUUFBUSxPQUFRLG9CQUNoQzRnSCxLQUFLQyxZQUFZQyxHQUFHQyxPQUV4QixJSHlmQXhtRSxNQUFNOS9CLEdBQUcsMEJJNWZNLFNBQWlDdW1HLFlBQWF4bUcsS0FBTTNVLE1BQ2pFLEdBQUttN0csWUFBWWx2RyxPQUFPOVIsUUFBUSxPQUFRLHlCQUNqQ3dhLEtBQUt1bEQsU0FBUyx5QkFDakJ2bEQsS0FBSys4QyxTQUFTLHdCQUVYeXBELFlBQVlsdkcsT0FBTzlSLFFBQVEsT0FBUSw2QkFBeUN3YSxLQUFLdWxELFNBQVMsNEJBQTRCLENBQ3pILE1BQU0zdEQsSUFBTWlhLEVBQUU3UixNQUNkcEksSUFBSW1sRCxTQUFTLDJCQUNiLE1BQU0wcEQsV0FBYXA3RyxLQUFLbzVFLFFBQVEsSUFBSXgvRSxPQUFPd0MsT0FBTywrQkFBaUMsR0FDbkYsR0FBbUIsS0FBZmcvRyxXQUNGN3VHLElBQUluUyxLQUFLLDJDQUEyQ3MvRyxPQUFPLDJDQUN0RCxDQUNMLE1BQU1yN0YsTUFBcUMsSUFBN0IrOEYsV0FBVzFsRixPQUFPcDZCLE9BQ2hDaVIsSUFBSW5TLEtBQUssMkNBQTJDcy9HLE9BQU8sdUVBQXlFcjdGLE1BQVEsU0FBVyxJQUFNLHdDQUEwQ0EsTUFBUSxpQkFBbUIsaUJBQW1CLCtEQUFpRXJlLEtBQUtvSixNQUFRLFVBQVlpVixNQUFRLEdBQUssMkJBQTZCKzhGLFdBQWEsVUFBWSxlQUNwWixDQUNGLENBRUosSUo0ZUExbUUsTUFBTTkvQixHQUFHLDhCSzdmTSxTQUFxQ3VtRyxZQUFheG1HLEtBQU0zVSxNQUNoRW03RyxZQUFZbHZHLE9BQU94SCxPQUFPdEssUUFBUSxPQUFRLHlCQUN4Q3dhLEtBQUt1bEQsU0FBUywwQkFDakJ2bEQsS0FBSys4QyxTQUFTLHdCQUNkLzhDLEtBQUt2YSxLQUFLLG1DQUFtQ3N5QixPQUFPejFCLFFBQ2xELE1BQU1zVixJQUFNaWEsRUFBRXZ2QixNQUFNSSxlQUNkczZELFFBQVVwbEQsSUFBSWhWLFFBQVEsMEJBQTBCNkMsS0FBSyxvQkFDdkR1M0QsUUFBUStJLEdBQUcsYUFDYm51RCxJQUFJd2pDLEtBQUssVUFDVDRoQixRQUFRdUcsWUFFUjNyRCxJQUFJd2pDLEtBQUssUUFDVDRoQixRQUFRNEksWUFDVixLQUlSLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RpdmUtZWZmZWN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2hlbHBlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hdmVyYWdlLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItcGlja2VyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWdyb3VwLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZC1hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9zYW4tY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1saW5rLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9yb2xsLWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvZGFtYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9zYW5kYXRhLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb25jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3BvaW50LXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXItcm9sbC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvcmFuZ2Vjb21iYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL2FjdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1lZGl0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29udGV4dC1tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYmF0Y2guanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kcm9wLWNvYy1pZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYWN0b3ItdXBkYXRlLWl0ZW1zLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2V0dGluZ3MtZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3ItZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL2RhdGEuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9za2lsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2dhbWUtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LW1hY3JvLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctcGxheWxpc3QtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctc2NlbmUtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2V0dXAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9za2lsbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb2MtaWQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1jbGlja2FibGUtZXZlbnRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbml0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2UtcmVhZHktbGFzdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy90b29sdGlwcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXRvdXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItdG91cnMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luZGV4LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9jcmVhdGUtdG9rZW4uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWFjdG9yLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXBhdXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGxheWVyLWxpc3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1yZWFsLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3NvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvYzcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2Vib3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZHJhdy1ub3RlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItY29jNy1qb3VybmFsLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItam91cm5hbC10ZXh0LXBhZ2Utc2hlZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTmFtZXNwYWNlIENPQzcgQ29uZmlndXJhdGlvbiBWYWx1ZXNcbmV4cG9ydCBjb25zdCBDT0M3ID0ge31cblxuLy8gQ3VzdG9tIGNoYXRNZXNzYWdlXG4vLyBDT05GSUcuQ2hhdE1lc3NhZ2UudGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NoYXQtbWVzc2FnZS5odG1sJztcblxuLyoqXG4gKiBUaGUgc2V0IG9mIEVyYXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5lcmFzID0ge1xuICBzdGFuZGFyZDogJ0NvQzcuRXJhMTkyMCcsXG4gIG1vZGVybjogJ0NvQzcuRXJhTW9kZXJuJyxcbiAgbW9kZXJuUHVscDogJ0NvQzcuRXJhTW9kZXJuUHVscCcsXG4gIHB1bHA6ICdDb0M3LkVyYVB1bHAnLFxuICBkb3duRGFya2VyVHJhaWxzOiAnQ29DNy5FcmFEb3duRGFya2VyVHJhaWxzJyxcbiAgZG93bkRhcmtlclRyYWlsc1B1bHA6ICdDb0M3LkVyYURvd25EYXJrZXJUcmFpbHNQdWxwJyxcbiAgZGFya0FnZXM6ICdDb0M3LkVyYURhcmtBZ2VzJyxcbiAgZGFya0FnZXNQdWxwOiAnQ29DNy5FcmFEYXJrQWdlc1B1bHAnLFxuICByZWdlbmN5OiAnQ29DNy5FcmFSZWdlbmN5JyxcbiAgcmVnZW5jeVB1bHA6ICdDb0M3LkVyYVJlZ2VuY3lQdWxwJyxcbiAgcmVpZ25PZlRlcnJvcjogJ0NvQzcuRXJhUmVpZ25PZlRlcnJvcicsXG4gIGdhc0xpZ2h0OiAnQ29DNy5FcmFHYXNMaWdodCcsXG4gIGludmljdHVzOiAnQ29DNy5FcmFJbnZpY3R1cydcbn1cblxuQ09DNy5tb25ldGFyeUZvcm1hdEtleXMgPSB7XG4gIGRlY2ltYWxMZWZ0OiAnZGVjaW1hbExlZnQnLFxuICBkZWNpbWFsUmlnaHQ6ICdkZWNpbWFsUmlnaHQnLFxuICBpbnRlZ2VyTGVmdDogJ2ludGVnZXJMZWZ0JyxcbiAgaW50ZWdlclJpZ2h0OiAnaW50ZWdlclJpZ2h0JyxcbiAgbHNkOiAnbHNkJyxcbiAgcm9tYW46ICdyb21hbidcbn1cblxuQ09DNy5tb25ldGFyeUZvcm1hdHMgPSB7XG4gIGRlY2ltYWxMZWZ0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdERlY2ltYWxMZWZ0JyxcbiAgZGVjaW1hbFJpZ2h0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdERlY2ltYWxSaWdodCcsXG4gIGludGVnZXJMZWZ0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdEludGVnZXJMZWZ0JyxcbiAgaW50ZWdlclJpZ2h0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdEludGVnZXJSaWdodCcsXG4gIGxzZDogJ0NvQzcuTW9uZXRhcnlGb3JtYXRMc2QnLFxuICByb21hbjogJ0NvQzcuTW9uZXRhcnlGb3JtYXRSb21hbidcbn1cblxuQ09DNy5tb25ldGFyeVR5cGVLZXlzID0ge1xuICBub25lOiAnbm9uZScsXG4gIGFzc2VzOiAnYXNzZXMnLFxuICBzZXN0ZXJ0aWk6ICdzZXN0ZXJ0aWknLFxuICBxdWluYXJpaTogJ3F1aW5hcmlpJyxcbiAgZGVuYXJpaTogJ2RlbmFyaWknLFxuICBkOiAnZCcsXG4gIHM6ICdzJyxcbiAgdmFsdWU6ICd2YWx1ZScsXG4gIG11bHRpcGxpZXI6ICdtdWx0aXBsaWVyJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5VHlwZXMgPSB7XG4gIG5vbmU6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVOb25lJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH0sXG4gIGFzc2VzOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlQXNzZXMnLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIHNlc3RlcnRpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVNlc3RlcnRpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgcXVpbmFyaWk6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVRdWluYXJpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgZGVuYXJpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZURlbmFyaWknLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIGQ6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVEZW5pZXJzJyxcbiAgICBmaWx0ZXI6IFsnbHNkJ11cbiAgfSxcbiAgczoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVNvdXMnLFxuICAgIGZpbHRlcjogWydsc2QnXVxuICB9LFxuICB2YWx1ZToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZU9uZScsXG4gICAgZmlsdGVyOiBbXVxuICB9LFxuICBtdWx0aXBsaWVyOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlQ3JlZGl0UmF0aW5nJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH1cbn1cblxuQ09DNy5jaGFyYWN0ZXJpc3RpY3MgPSB7XG4gIHN0cjogJ0NvQzcuQ2hhcmFjU3RyJyxcbiAgY29uOiAnQ29DNy5DaGFyYWNDb24nLFxuICBzaXo6ICdDb0M3LkNoYXJhY1NpeicsXG4gIGRleDogJ0NvQzcuQ2hhcmFjRGV4JyxcbiAgYXBwOiAnQ29DNy5DaGFyYWNBcHAnLFxuICBpbnQ6ICdDb0M3LkNoYXJhY0ludCcsXG4gIHBvdzogJ0NvQzcuQ2hhcmFjUG93JyxcbiAgZWR1OiAnQ29DNy5DaGFyYWNFZHUnXG59XG5cbi8qKlxuICogVGhlIHNldCBvZiBTa2lsbHMgYXR0cmlidXRlcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LnNraWxsUHJvcGVydGllcyA9IHtcbiAgbm9hZGp1c3RtZW50czogJ0NvQzcuU2tpbGxOb0FkanVzdG1lbnRzJyxcbiAgbm94cGdhaW46ICdDb0M3LlNraWxsTm9YcEdhaW4nLFxuICBzcGVjaWFsOiAnQ29DNy5Ta2lsbFNwZWNpYWwnLFxuICByYXJpdHk6ICdDb0M3LlNraWxsUmFyaXR5JyxcbiAgcHVzaDogJ0NvQzcuU2tpbGxQdXNoJyxcbiAgY29tYmF0OiAnQ29DNy5Ta2lsbENvbWJhdCcsXG4gIGZpZ2h0aW5nOiAnQ29DNy5Ta2lsbEZpZ2h0aW5nJyxcbiAgZmlyZWFybTogJ0NvQzcuU2tpbGxGaXJlYXJtJyxcbiAgcmFuZ2VkOiAnQ29DNy5Ta2lsbFJhbmdlZCcsXG4gIHJlcXVpcmVzbmFtZTogJ0NvQzcuU2tpbGxSZXF1aXJlc05hbWUnLFxuICBrZWVwYmFzZXZhbHVlOiAnQ29DNy5Ta2lsbEtlZXBCYXNlVmFsdWUnLFxuICBwaWNrbmFtZW9ubHk6ICdDb0M3LlNraWxsUGlja05hbWVPbmx5JyxcbiAgb25seW9uZTogJ0NvQzcuU2tpbGxTcGVjaWFsaXphdGlvbklzVW5pcXVlJ1xufVxuXG5DT0M3LndlYXBvblByb3BlcnRpZXMgPSB7XG4gIG1lbGVlOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuTWVsZWUnLFxuICBybmdkOiAnQ29DNy5XZWFwb25SbmdkJyxcbiAgbW52cjogJ0NvQzcuV2VhcG9uUHJvcGVyeU1hbmV1dmVyJyxcbiAgdGhyb3duOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuVGhyb3duJyxcbiAgc2hvdGd1bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlNob3RndW4nLFxuICBkYnJsOiAnQ29DNy5XZWFwb25EYnJsJyxcbiAgaW1wbDogJ0NvQzcuV2VhcG9uSW1wbCcsXG4gIGJyc3Q6ICdDb0M3LldlYXBvbkJyc3QnLFxuICBhdXRvOiAnQ29DNy5XZWFwb25BdXRvJyxcbiAgYWhkYjogJ0NvQzcuV2VhcG9uQWhkYicsXG4gIGFkZGI6ICdDb0M3LldlYXBvbkFkZGInLFxuICBzbG50OiAnQ29DNy5XZWFwb25TbG50JyxcbiAgc3BjbDogJ0NvQzcuV2VhcG9uU3BjbCcsXG4gIG1vbnQ6ICdDb0M3LldlYXBvbk1vbnQnLFxuICBibHN0OiAnQ29DNy5XZWFwb25CbHN0JyxcbiAgc3R1bjogJ0NvQzcuV2VhcG9uU3R1bicsXG4gIHJhcmU6ICdDb0M3LldlYXBvblJhcmUnLFxuICBidXJuOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuQnVybidcbn1cblxuQ09DNy5zcGVsbFByb3BlcnRpZXMgPSB7XG4gIGNhbGw6ICdDb0M3LkNhbGxTcGVsbCcsXG4gIGRpc21pc3M6ICdDb0M3LkRpc21pc3NTcGVsbCcsXG4gIGNvbnRhY3Q6ICdDb0M3LkNvbnRhY3RTcGVsbCcsXG4gIHN1bW1vbjogJ0NvQzcuU3VtbW9uU3BlbGwnLFxuICBiaW5kOiAnQ29DNy5CaW5kU3BlbGwnLFxuICBlbmNoYW50bWVudDogJ0NvQzcuRW5jaGFudG1lbnRTcGVsbCcsXG4gIGdhdGU6ICdDb0M3LkdhdGVTcGVsbCcsXG4gIGNvbWJhdDogJ0NvQzcuQ29tYmF0U3BlbGwnXG59XG5cbkNPQzcuYm9va1R5cGUgPSB7XG4gIG15dGhvczogJ0NvQzcuTXl0aG9zQm9vaycsXG4gIG9jY3VsdDogJ0NvQzcuT2NjdWx0Qm9vaycsXG4gIG90aGVyOiAnQ29DNy5PdGhlcidcbn1cblxuQ09DNy50YWxlbnRUeXBlID0ge1xuICBwaHlzaWNhbDogJ0NvQzcuUGh5c2ljYWxUYWxlbnQnLFxuICBtZW50YWw6ICdDb0M3Lk1lbnRhbFRhbGVudCcsXG4gIGNvbWJhdDogJ0NvQzcuQ29tYmF0VGFsZW50JyxcbiAgbWlzY2VsbGFuZW91czogJ0NvQzcuTWlzY2VsbGFuZW91c1RhbGVudCcsXG4gIGJhc2ljOiAnQ29DNy5CYXNpY1RhbGVudCcsXG4gIGluc2FuZTogJ0NvQzcuSW5zYW5lVGFsZW50JyxcbiAgb3RoZXI6ICdDb0M3Lk90aGVyVGFsZW50J1xufVxuXG5DT0M3LnN0YXR1c1R5cGUgPSB7XG4gIG1hbmlhOiAnQ29DNy5NYW5pYScsXG4gIHBob2JpYTogJ0NvQzcuUGhvYmlhJ1xufVxuXG5DT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzID0ge1xuICBjbGFzc2ljOiAnQ29DNy5DbGFzc2ljJyxcbiAgbG92ZWNyYWZ0aWFuOiAnQ29DNy5Mb3ZlY3JhZnRpYW4nLFxuICBtb2Rlcm46ICdDb0M3Lk1vZGVybicsXG4gIHB1bHA6ICdDb0M3LlB1bHAnXG59XG5cbkNPQzcuZm9ybXVsYSA9IHt9XG5cbkNPQzcuZm9ybXVsYS5hY3RvciA9IHtcbiAgJ0BTVFInOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuZm9ybXVsYS5hY3RvcnNoZWV0ID0ge1xuICAnQFNUUic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlJyxcbiAgJ0BDT04nOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZScsXG4gICdAU0laJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxuICAnQERFWCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgJ0BBUFAnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmFwcC52YWx1ZScsXG4gICdASU5UJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxuICAnQFBPVyc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJyxcbiAgJ0BFRFUnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmVkdS52YWx1ZSdcbn1cblxuQ09DNy5zdGF0dXMgPSB7XG4gIHRlbXBvSW5zYW5lOiAndGVtcG9JbnNhbmUnLFxuICBpbmRlZkluc2FuZTogJ2luZGVmSW5zYW5lJyxcbiAgdW5jb25zY2lvdXM6ICd1bmNvbnNjaW91cycsXG4gIGNyaXRpY2FsV291bmRzOiAnY3JpdGljYWxXb3VuZHMnLFxuICBkeWluZzogJ2R5aW5nJyxcbiAgcHJvbmU6ICdwcm9uZScsXG4gIGRlYWQ6ICdkZWFkJ1xufVxuXG5DT0M3Lm5ld0Jvb2tOYW1lID0gJ0NvQzcuTmV3Qm9va05hbWUnXG5DT0M3Lm5ld1NraWxsTmFtZSA9ICdDb0M3Lk5ld1NraWxsTmFtZSdcbkNPQzcubmV3U3BlbGxOYW1lID0gJ0NvQzcuTmV3U3BlbGxOYW1lJ1xuQ09DNy5uZXdJdGVtTmFtZSA9ICdDb0M3Lk5ld0l0ZW1OYW1lJ1xuQ09DNy5uZXdXZWFwb25OYW1lID0gJ0NvQzcuTmV3V2VhcG9uTmFtZSdcblxuQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwgPSAnQ29DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwnXG5cbkNPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbkNPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSA9ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LnJhbmdlZFNwZWNpYWxpemF0aW9uTmFtZSA9ICdDb0M3LlJhbmdlZFNwZWNpYWxpemF0aW9uTmFtZSdcblxuQ09DNy5jb21iYXRDYXJkcyA9IHtcbiAgZmlnaHRCYWNrOiAnQ29DNy5GaWdodEJhY2snLFxuICBkb2RnZTogJ0NvQzcuRG9kZ2UnLFxuICBtYW5ldXZlcjogJ0NvQzcuTWFuZXV2ZXInLFxuICBub1Jlc3BvbnNlOiAnQ29DNy5Ob1Jlc3BvbnNlJ1xufVxuIiwiLyogZ2xvYmFsIEFjdGl2ZUVmZmVjdCwgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb0M3QWN0aXZlRWZmZWN0IGV4dGVuZHMgQWN0aXZlRWZmZWN0IHtcbiAgYXBwbHkgKGFjdG9yLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmtleSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlJykge1xuICAgICAgLy8gQXJtb3IgY2FuIGJlIGZyZWUgdGV4dCBpZiBib3RoIGFyZSBudW1iZXJzIGFsbG93IGNhbGN1bGF0aW9uXG4gICAgICBpZiAoIWlzTmFOKGNoYW5nZS52YWx1ZSkgJiYgIWlzTmFOKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlKSkge1xuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSA9IE51bWJlcihhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoYW5nZS5rZXkgPT09ICdzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZScpIHtcbiAgICAgIC8vIElmIGRiIGlzIGN1cnJlbnRseSBhIG51bWJlciBhbGxvdyBzdHJpbmdzIHRvIGJlIGFwcGxpZWRcbiAgICAgIGlmIChpc05hTihjaGFuZ2UudmFsdWUpICYmICFpc05hTihhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSkpIHtcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPSBTdHJpbmcoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZXMgPSBzdXBlci5hcHBseShhY3RvciwgY2hhbmdlKVxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvKipcbiAgICogTWFuYWdlIEFjdGl2ZSBFZmZlY3QgaW5zdGFuY2VzIHRocm91Z2ggdGhlIEFjdG9yIFNoZWV0IHZpYSBlZmZlY3QgY29udHJvbCBidXR0b25zLlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50ICAgICAgVGhlIGxlZnQtY2xpY2sgZXZlbnQgb24gdGhlIGVmZmVjdCBjb250cm9sXG4gICAqIEBwYXJhbSB7QWN0b3J8SXRlbX0gb3duZXIgICAgICBUaGUgb3duaW5nIGRvY3VtZW50IHdoaWNoIG1hbmFnZXMgdGhpcyBlZmZlY3RcbiAgICogQHJldHVybnMge1Byb21pc2V8bnVsbH0gICAgICAgIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjaGFuZ2VzIGFyZSBjb21wbGV0ZS5cbiAgICovXG4gIHN0YXRpYyBvbk1hbmFnZUFjdGl2ZUVmZmVjdCAoZXZlbnQsIG93bmVyKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpJylcbiAgICBjb25zdCBlZmZlY3QgPSBsaS5kYXRhc2V0LmVmZmVjdElkXG4gICAgICA/IG93bmVyLmVmZmVjdHMuZ2V0KGxpLmRhdGFzZXQuZWZmZWN0SWQpXG4gICAgICA6IG51bGxcbiAgICBzd2l0Y2ggKGEuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2NyZWF0ZSc6XG4gICAgICAgIHJldHVybiBvd25lci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgICAgICAgIG9yaWdpbjogb3duZXIudXVpZCxcbiAgICAgICAgICAgICdkdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgICAgICBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICd0ZW1wb3JhcnknID8gMSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRpc2FibGVkOiBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICdpbmFjdGl2ZSdcbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgIHJldHVybiBlZmZlY3QuZGVsZXRlKClcbiAgICAgIGNhc2UgJ3RvZ2dsZSc6XG4gICAgICAgIHJldHVybiBlZmZlY3QudXBkYXRlKHsgZGlzYWJsZWQ6ICFlZmZlY3QuZGlzYWJsZWQgfSlcbiAgICB9XG4gIH1cblxuICBfcHJlcGFyZUR1cmF0aW9uICgpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IHN1cGVyLl9wcmVwYXJlRHVyYXRpb24oKVxuICAgIGlmIChkdXJhdGlvbi50eXBlID09PSAnc2Vjb25kcycpIHtcbiAgICAgIGlmIChkdXJhdGlvbi5zZWNvbmRzID4gMzYwMCkge1xuICAgICAgICBkdXJhdGlvbi5sYWJlbCA9IG5ldyBEYXRlKGR1cmF0aW9uLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxOSlcbiAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24uc2Vjb25kcyA+IDEwMCkge1xuICAgICAgICBkdXJhdGlvbi5sYWJlbCA9IG5ldyBEYXRlKGR1cmF0aW9uLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDE0LCAxOSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uXG4gIH1cblxuICBzdGF0aWMgZmlsdGVyQWN0aXZlRWZmZWN0cyAoZWZmZWN0LCBjb25kaXRpb25OYW1lKSB7XG4gICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzExJykpIHtcbiAgICAgIC8vIEZvdW5kcnlWVFQgdjEwXG4gICAgICByZXR1cm4gZWZmZWN0LmZsYWdzLmNvcmU/LnN0YXR1c0lkID09PSBjb25kaXRpb25OYW1lXG4gICAgfVxuICAgIHJldHVybiBlZmZlY3Quc3RhdHVzZXMuaGFzKGNvbmRpdGlvbk5hbWUpXG4gIH1cblxuICBzdGF0aWMgZ2V0U3RhdHVzS2V5IChlZmZlY3QpIHtcbiAgICBsZXQgb3B0aW9ucyA9IFtdXG4gICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzExJykpIHtcbiAgICAgIC8vIEZvdW5kcnlWVFQgdjEwXG4gICAgICBvcHRpb25zID0gW2VmZmVjdC5nZXRGbGFnKCdjb3JlJywgJ3N0YXR1c0lkJyldXG4gICAgfSBlbHNlIGlmIChlZmZlY3Quc3RhdHVzZXMuc2l6ZSA+IDApIHtcbiAgICAgIG9wdGlvbnMgPSBbLi4uZWZmZWN0LnN0YXR1c2VzLnZhbHVlcygpXVxuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucy5maW5kKHYgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKENPQzcuc3RhdHVzLCB2KSlcbiAgfVxuXG4gIGdldCBpc1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleSh0aGlzKSA9PT0gJ3N0cmluZydcbiAgfVxuXG4gIHN0YXRpYyBwcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyAoZWZmZWN0cywgeyBzdGF0dXMgPSB0cnVlIH0gPSB7fSkge1xuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgICAgdGVtcG9yYXJ5OiB7XG4gICAgICAgIHR5cGU6ICd0ZW1wb3JhcnknLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRlbXBvcmFyeScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIHBhc3NpdmU6IHtcbiAgICAgICAgdHlwZTogJ3Bhc3NpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhc3NpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBpbmFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnaW5hY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluYWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgc3VwcHJlc3NlZDoge1xuICAgICAgICB0eXBlOiAnc3VwcHJlc3NlZCcsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VwcHJlc3NlZCcpLFxuICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgaW5mbzogW2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmF2YWlsYWJsZScpXVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgIGNhdGVnb3JpZXMuc3RhdHVzID0ge1xuICAgICAgICB0eXBlOiAnc3RhdHVzJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU3RhdHVzJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhY3RpdmUgZWZmZWN0cywgY2xhc3NpZnlpbmcgdGhlbSBpbnRvIGNhdGVnb3JpZXNcbiAgICBmb3IgKGNvbnN0IGUgb2YgZWZmZWN0cykge1xuICAgICAgaWYgKGUuaXNTdXBwcmVzc2VkKSBjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGlmIChlLmlzU3RhdHVzKSBjYXRlZ29yaWVzLnN0YXR1cy5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuZGlzYWJsZWQpIGNhdGVnb3JpZXMuaW5hY3RpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGlmIChlLmlzVGVtcG9yYXJ5KSBjYXRlZ29yaWVzLnRlbXBvcmFyeS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgY2F0ZWdvcmllcy5wYXNzaXZlLmVmZmVjdHMucHVzaChlKVxuICAgIH1cblxuICAgIGNhdGVnb3JpZXMuc3VwcHJlc3NlZC5oaWRkZW4gPSAhY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmVmZmVjdHMubGVuZ3RoXG4gICAgcmV0dXJuIGNhdGVnb3JpZXNcbiAgfVxuXG4gIHN0YXRpYyBwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyAoZWZmZWN0cykge1xuICAgIGxldCBjb3VudCA9IDBcbiAgICAvLyBEZWZpbmUgZWZmZWN0IGhlYWRlciBjYXRlZ29yaWVzXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICAgIGFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnYWN0aXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgaW5hY3RpdmU6IHtcbiAgICAgICAgdHlwZTogJ2luYWN0aXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnSW5hY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFjdGl2ZSBlZmZlY3RzLCBjbGFzc2lmeWluZyB0aGVtIGludG8gY2F0ZWdvcmllc1xuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XG4gICAgICBjb3VudCArPSAxXG4gICAgICBlLl9nZXRTb3VyY2VOYW1lKCkgLy8gVHJpZ2dlciBhIGxvb2t1cCBmb3IgdGhlIHNvdXJjZSBuYW1lXG4gICAgICBpZiAoZS5pc1N1cHByZXNzZWQgfHwgZS5kaXNhYmxlZCkgY2F0ZWdvcmllcy5pbmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgY2F0ZWdvcmllcy5hY3RpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgfVxuXG4gICAgaWYgKGNvdW50ID4gMCkgY2F0ZWdvcmllcy5leHBlbmRlZCA9IHRydWVcbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgUm9sbCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RpY2Uge1xuICBzdGF0aWMgYXN5bmMgcm9sbCAobW9kaWYgPSAwLCByb2xsTW9kZSA9IG51bGwsIGhpZGVEaWNlID0gZmFsc2UpIHtcbiAgICBsZXQgYWx0ZXJuYXRpdmVEaWNlID0gJydcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JylcbiAgICAgIH0gZWxzZSBpZiAobW9kaWYgPiAwKSB7XG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJylcbiAgICAgICAgLy8gVGVtcG9yYXJ5IGZpeCBmb3IgYnJvbnplIHRleHR1cmUgaW4gRHNOXG4gICAgICAgIC8vIEZvdW5kcnlWVFQgdjEyXG4gICAgICAgIGlmIChhbHRlcm5hdGl2ZURpY2UgPT09ICdicm9uemUnICYmIGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJykudmVyc2lvbiwgJzUuMC4wJykgJiYgIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJykudmVyc2lvbiwgJzUuMC41JykpIHtcbiAgICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSAnYnJvbnplMDEnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJvbGxcbiAgICBpZiAoXG4gICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgKSB7XG4gICAgICByb2xsID0gUm9sbC5mcm9tRGF0YShDb0M3RGljZS5jcml0MDEpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgICkge1xuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuZnVtYmxlOTkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgJzFkdCcgK1xuICAgICAgICAgIChhbHRlcm5hdGl2ZURpY2UgIT09ICcnXG4gICAgICAgICAgICA/ICcrMWRvWycgKyBhbHRlcm5hdGl2ZURpY2UgKyAnXSdcbiAgICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMobW9kaWYpKSArXG4gICAgICAgICAgJysxZDEwJ1xuICAgICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsXG4gICAgfVxuXG4gICAgaWYgKHJvbGxNb2RlKSByZXN1bHQucm9sbE1vZGUgPSByb2xsTW9kZVxuICAgIGlmIChoaWRlRGljZSkgcmVzdWx0LmhpZGVEaWNlID0gaGlkZURpY2VcbiAgICBmb3IgKGNvbnN0IGQgb2Ygcm9sbC5kaWNlKSB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIENPTkZJRy5EaWNlLnRlcm1zLnQpIHtcbiAgICAgICAgcmVzdWx0LnRlbnMucmVzdWx0cy5wdXNoKGQudG90YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9IGQudG90YWwgPT09IDEwID8gMCA6IGQudG90YWxcbiAgICAgICAgcmVzdWx0LnVuaXQucmVzdWx0cy5wdXNoKHJlc3VsdC51bml0LnRvdGFsKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9XG4gICAgICAgIHJlc3VsdC51bml0LnRvdGFsID09PSAwICYmIHJlc3VsdC50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICA/IDEwMFxuICAgICAgICAgIDogTWF0aC5tYXgoLi4ucmVzdWx0LnRlbnMucmVzdWx0cylcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC51bml0LnRvdGFsID09PSAwKSB7XG4gICAgICBjb25zdCBkaWNlID0gcmVzdWx0LnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IE1hdGgubWluKC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfVxuICAgIHJlc3VsdC50b3RhbCA9IHJlc3VsdC51bml0LnRvdGFsICsgcmVzdWx0LnRlbnMudG90YWxcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2hvd1JvbGxEaWNlM2QgKHJvbGwpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3Qgc3luY0RpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeW5jRGljZTNkJylcblxuICAgICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcblxuICAgICAgYXdhaXQgZ2FtZS5kaWNlM2Quc2hvd0ZvclJvbGwoXG4gICAgICAgIHJvbGwsXG4gICAgICAgIGdhbWUudXNlcixcbiAgICAgICAgc3luY0RpY2UsXG4gICAgICAgIChjaGF0RGF0YS53aGlzcGVyLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBjaGF0RGF0YS53aGlzcGVyKSxcbiAgICAgICAgY2hhdERhdGEuYmxpbmRcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY29tYmluZWRSb2xsIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5wb29sID0gb3B0aW9ucy5wb29sID8/IHt9XG4gICAgb3B0aW9ucy5wb29sWycwJ10gPSBmYWxzZVxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zLnBvb2wpLm1hcCh2ID0+IHBhcnNlSW50KHYsIDEwKSlcbiAgICBsZXQgcGVuYWx0eURpY2UgPSBNYXRoLmFicyhNYXRoLm1pbigwLCBNYXRoLm1pbiguLi5rZXlzKSkpXG4gICAgbGV0IGJvbnVzRGljZSA9IE1hdGgubWF4KDAsIE1hdGgubWF4KC4uLmtleXMpKVxuICAgIGNvbnN0IGhhc0RTTiA9IGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmVcblxuICAgIGNvbnN0IHBvb2wgPSBbXVxuICAgIHBvb2wucHVzaCgnMWR0KzFkMTAnKVxuXG4gICAgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xuICAgICAgcG9vbC5wdXNoKFxuICAgICAgICAoaGFzRFNOXG4gICAgICAgICAgPyAnKzFkb1snICsgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScpICsgJ10nXG4gICAgICAgICAgOiAnKzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMocGVuYWx0eURpY2UpKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoYm9udXNEaWNlID4gMCkge1xuICAgICAgcG9vbC5wdXNoKFxuICAgICAgICAvLyBUZW1wb3JhcnkgZml4IGZvciBicm9uemUgdGV4dHVyZSBpbiBEc05cbiAgICAgICAgLy8gRm91bmRyeVZUVCB2MTJcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpID09PSAnYnJvbnplJyAmJiBmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpLnZlcnNpb24sICc1LjAuMCcpICYmICFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpLnZlcnNpb24sICc1LjAuNScpID8gJ2Jyb256ZTAxJyA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJykpICsgJ10nXG4gICAgICAgICAgOiAnKzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMoYm9udXNEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHBvb2wuam9pbignJykpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGdyb3Vwczoge1xuICAgICAgICBiYXNlRGllOiAwLFxuICAgICAgICBwZW5hbHR5RGljZTogW10sXG4gICAgICAgIGJvbnVzRGljZTogW11cbiAgICAgIH0sXG4gICAgICB1bml0OiAwLFxuICAgICAgcm9sbFxuICAgIH1cbiAgICBsZXQgYmFzZVNldCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIGlmICghYmFzZVNldCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYmFzZURpZSA9IGQudG90YWxcbiAgICAgICAgICBiYXNlU2V0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIHBlbmFsdHlEaWNlLS1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZS5wdXNoKGQudG90YWwpXG4gICAgICAgICAgYm9udXNEaWNlLS1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cblxuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMucG9vbCkge1xuICAgICAgb3V0cHV0W2tleV0gPSB7XG4gICAgICAgIHVuaXQ6IHtcbiAgICAgICAgICB0b3RhbDogcmVzdWx0LnVuaXQsXG4gICAgICAgICAgcmVzdWx0czogW3Jlc3VsdC51bml0XVxuICAgICAgICB9LFxuICAgICAgICB0ZW5zOiB7XG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVzdWx0czogW11cbiAgICAgICAgfSxcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJvbGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vZGlmID0gcGFyc2VJbnQoa2V5LCAxMClcbiAgICAgIGxldCBtb2RpZmllciA9IG1vZGlmXG4gICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChyZXN1bHQuZ3JvdXBzLmJhc2VEaWUpXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKG1vZGlmaWVyKTsgbW9kaWZpZXIgPCAwOyBtb2RpZmllcisrKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5wdXNoKFxuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2VbbW9kaWZpZXIgKyBvZmZzZXRdXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qgb2Zmc2V0ID0gbW9kaWZpZXI7IG1vZGlmaWVyID4gMDsgbW9kaWZpZXItLSkge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZVtNYXRoLmFicyhtb2RpZmllciAtIG9mZnNldCldXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9XG4gICAgICAgICAgb3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCAmJiBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICAgID8gMTAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgICBjb25zdCBkaWNlID0gb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmZpbHRlcih0ID0+IHQgPiAwKVxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IE1hdGgubWluKC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH1cbiAgICAgIG91dHB1dFtrZXldLnRvdGFsID0gb3V0cHV0W2tleV0udW5pdC50b3RhbCArIG91dHB1dFtrZXldLnRlbnMudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gUHJlZGV0ZXJtaW5lZCB2YWx1ZSBvZiBkaWNlLCB1c2VkIG9ubHkgZm9yIERFViBhbmQgdGVzdCBwdXJwb3Nlc1xuICBzdGF0aWMgZnVtYmxlOTkgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ09wZXJhdG9yVGVybScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG9wZXJhdG9yOiAnKydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnRGllJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiAxLFxuICAgICAgICBmYWNlczogMTAsXG4gICAgICAgIG1vZGlmaWVyczogW10sXG4gICAgICAgIHJlc3VsdHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXN1bHQ6IDksXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIHRvdGFsOiA5OSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxuXG4gIHN0YXRpYyBjcml0MDEgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxMCxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogMSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSXRlbSwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpLCBmcm9tVXVpZCAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0NJREVkaXRvciB9IGZyb20gJy4uL2FwcHMvY29jLWlkLWVkaXRvci5qcydcblxuLyoqXG4gKiBPdmVycmlkZSBhbmQgZXh0ZW5kIHRoZSBiYXNpYyA6Y2xhc3M6YEl0ZW1gIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbSBleHRlbmRzIEl0ZW0ge1xuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIC8qKiBAc2VlIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgJiYgIWNvbnRleHQ/LmV4dGVuZGVkKSB7XG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXG4gICAgICAgKiB0aGUgZXh0ZW5kZWQgZmxhZyB3aWxsIGJlIHRydWUsIHRodXMgYnlwYXNzaW5nIHRoaXMgd2hvbGUgcHJvY2Vzc1xuICAgICAgICogYW5kIHJlc3VtZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBuZXcgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xuICAgICAgICAuLi57IGV4dGVuZGVkOiB0cnVlIH0sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBhc3luYyBfY3JlYXRlRG9jdW1lbnRMaW5rIChldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiBldmVudERhdGEudHlwZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGV2ZW50RGF0YS51dWlkID09PSAnc3RyaW5nJyAmJiBldmVudERhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGV2ZW50RGF0YS51dWlkLm1hdGNoKC9eQWN0b3JcXC4vKSAmJiByZWxhdGl2ZVRvIGluc3RhbmNlb2YgQ09ORklHLkpvdXJuYWxFbnRyeVBhZ2UuZG9jdW1lbnRDbGFzcykge1xuICAgICAgLy8gSWYgZHJvcHBpbmcgYSBza2lsbC93ZWFwb24gZnJvbSBhbiBBY3RvciBvbnRvIGEgSm91cm5hbCBFbnRyeSBQYWdlIGNvbnZlcnQgdG8gYSBjaGVjayBsaW5rXG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZXZlbnREYXRhLnV1aWQpXG4gICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiAnQGNvYzcuY2hlY2tbdHlwZTonICsgaXRlbS50eXBlICsgJyxuYW1lOicgKyBpdGVtLm5hbWUgKyAnXSdcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9jcmVhdGVEb2N1bWVudExpbmsoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGljb25MYW5ndWFnZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy9sYW5ndWFnZS5zdmcnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWFsZnVuY3Rpb246ICdtYWxmYydcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIG9uIG9mIHRoZSBpdGVtIHByb3BlcnR5IGluIGRhdGEuZGF0YS5wcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIDogbmFtZSBmb3IgdGhlIHByb3BlcnR5IHRvIHRvZ2dsZVxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlUHJvcGVydHkgKHByb3BlcnR5SWQsIG92ZXJyaWRlID0gZmFsc2UpIHtcbiAgICBsZXQgY2hlY2tlZFByb3BzID0ge31cbiAgICBsZXQgZmlnaHRpbmdcbiAgICBsZXQgZmlyZWFybXNcbiAgICBsZXQgcmFuZ2VkXG4gICAgaWYgKHR5cGVvZiBDT0M3LmVyYXNbcHJvcGVydHlJZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gQ29DSURFZGl0b3IuZXJhVG9nZ2xlKHRoaXMsIHByb3BlcnR5SWQpXG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmICFvdmVycmlkZSkge1xuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhaGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYWhkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FkZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc2hvdGd1bicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLnZhbHVlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBudWxsLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLnZhbHVlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnIHx8IHByb3BlcnR5SWQgPT09ICdybmdkJykge1xuICAgICAgICBsZXQgbWVsZWVXZWFwb25cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAncm5nZCcgJiYgIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZWxlZVdlYXBvbikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5icnN0JzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYXV0byc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmRicmwnOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5ybmdkJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmICFvdmVycmlkZSkge1xuICAgICAgbGV0IG1vZGlmID0gZmFsc2VcbiAgICAgIHN3aXRjaCAocHJvcGVydHlJZCkge1xuICAgICAgICBjYXNlICdjb21iYXQnOlxuICAgICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgICAgICAgIC8vIENsb3NlIGNvbWJhdCBieSBkZWZhdWx0XG4gICAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogZmFsc2UsXG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogZmFsc2UsXG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkJzogZmFsc2UsXG4gICAgICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiAnJyxcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2ZpZ2h0aW5nJzpcbiAgICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcpIHtcbiAgICAgICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgICAgcmFuZ2VkID0gZmFsc2VcbiAgICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdmaXJlYXJtJzpcbiAgICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICAgIHJhbmdlZCA9IGZhbHNlXG4gICAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3JhbmdlZCc6XG4gICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJhbmdlZCkge1xuICAgICAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXG4gICAgICAgICAgICByYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RpZikge1xuICAgICAgICAvLyBzZXQgc3BlY2lhbGlzYXRpb24gaWYgZmlnaHRpbmcgb3IgZmlyZWFybVxuICAgICAgICBpZiAoZmlnaHRpbmcpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5yYW5nZWQnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICAgIClcbiAgICAgICAgICBjaGVja2VkUHJvcHMubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHMuc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH0gZWxzZSBpZiAoZmlyZWFybXMpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5yYW5nZWQnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZWQpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LnJhbmdlZFNwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgICApXG4gICAgICAgICAgY2hlY2tlZFByb3BzLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnR5SWQgPT09ICdzcGVjaWFsJykge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNbcHJvcGVydHlJZF0pIHtcbiAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiAnJyxcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyB0aGlzLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9wTmFtZSA9IGBzeXN0ZW0ucHJvcGVydGllcy4ke3Byb3BlcnR5SWR9YFxuICAgICAgY29uc3QgcHJvcFZhbHVlID0gIXRoaXMuc3lzdGVtLnByb3BlcnRpZXNbcHJvcGVydHlJZF1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW3Byb3BOYW1lXTogcHJvcFZhbHVlIH0pLnRoZW4oaXRlbSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGhhc1Byb3BlcnR5IChwcm9wZXJ0eUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNJbmNsdWRlZEluU2V0KCdwcm9wZXJ0aWVzJywgcHJvcGVydHlJZClcbiAgfVxuXG4gIGdldCBzaG9ydE5hbWUgKCkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubmFtZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcy5zaGVldCkgcmV0dXJuIGF3YWl0IHRoaXMuc2hlZXQudXBkYXRlUm9sbChyb2xsKVxuICAgIGVsc2UgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVSb2xsKHJvbGwpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVQYXJ0c1NwZWMgKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pIHtcbiAgICBpZiAoIXNwZWNpYWxpemF0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcbiAgICAgICAgc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNwZWNOYW1lUmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgJ14oJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc3BlY2lhbGl6YXRpb24pICsgJylcXFxccypcXFxcKCguKylcXFxcKSQnLFxuICAgICAgJ2knXG4gICAgKVxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKHNwZWNOYW1lUmVnZXgpXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBzcGVjaWFsaXphdGlvbiA9IG1hdGNoWzFdXG4gICAgICBza2lsbE5hbWUgPSBtYXRjaFsyXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknLFxuICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICBza2lsbE5hbWVcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0TmFtZVdpdGhvdXRTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb0M3SXRlbSkge1xuICAgICAgaWYgKGl0ZW0uc3lzdGVtPy5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmIHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGl0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCAmJiB0eXBlb2YgaXRlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cblxuICBzdGF0aWMgaXNBbnlTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJyB8fCAhaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5KSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJykudG9Mb3dlckNhc2UoKSxcbiAgICAgICdhbnknXG4gICAgXS5pbmNsdWRlcyhDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMuc2tpbGwuZ3Vlc3NOYW1lUGFydHMoaXRlbS5uYW1lKS5za2lsbE5hbWUudG9Mb3dlckNhc2UoKSlcbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICBjb25zdCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgLy8gaWYgc2tpbGwgaXMgbm90IGEgc3BlY2lhbGlzYXRpb24gbWFrZSBpdCBhIHNwZWNpYWxpc2F0aW9uXG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBza2lsbCBpcyBjb21iYXQgc2tpbGwgYW5kIG5vIHNwZWNpYWxpc2F0aW9uIHNldCB0aGVuIG1ha2UgaXQgYSBmaWdodGluZyggY2xvc2Vjb21iYXQpIHNraWxsXG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm1cbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHNraWxsIGlzIGNsb3NlIGNvbWJhdCB3aXRob3V0IHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICghdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPT09ICcnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyByYW5nZSBjb21iYXQgd2l0aG91dCBhIHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgICAoIXRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nXSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgIH1cblxuICAgIHJldHVybiBjaGVja2VkUHJvcHNcbiAgfVxuXG4gIGlzSW5jbHVkZWRJblNldCAoc2V0LCBwcm9wZXJ0eUlkKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbVtzZXRdKSB0aGlzLnN5c3RlbVtzZXRdID0gW11cbiAgICBjb25zdCBwcm9wZXJ0eUluZGV4ID0gdGhpcy5zeXN0ZW1bc2V0XS5pbmRleE9mKHByb3BlcnR5SWQpXG4gICAgaWYgKHByb3BlcnR5SW5kZXggPiAtMSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudCc6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB1bmZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudCc6IGZhbHNlIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRldmVsb3BlbWVudEZsYWcgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlSXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuZ2V0SXRlbUZsYWcoZmxhZ05hbWUpXG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgIWZsYWdWYWx1ZSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmxhZ1ZhbHVlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZ05hbWUgPT09ICdkZXZlbG9wZW1lbnQnKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFhwR2FpbkRpc2FibGVkJykpXG4gICAgICB9XG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHNldEl0ZW1GbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBpZiAoXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXG4gICAgICBlcmFzZUFkanVzdG1lbnRcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgW2BzeXN0ZW0uYWRqdXN0bWVudHMuJHtmbGFnTmFtZX1gXTogbnVsbCxcbiAgICAgICAgW25hbWVdOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZhbHNlIH0pXG4gIH1cblxuICBnZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCB1c2VzQWx0ZXJuYXRpdmVTa2lsbCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiZcbiAgICAgICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LmJyc3QgPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcz8udGhyb3duID09PSB0cnVlKVxuICAgIClcbiAgfVxuXG4gIGdldCBtYXhVc2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG11bHRpU2hvdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXgpXG4gICAgaWYgKGlzTmFOKG11bHRpU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIG11bHRpU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3Qgc2luZ2xlU2hvdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpXG4gICAgaWYgKGlzTmFOKHNpbmdsZVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBzaW5nbGVTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kU3RyaW5nICgpIHtcbiAgICBsZXQgdXNlc1BlclJvdW5kXG4gICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9IHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWxcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlc1BlclJvdW5kID0gJzEnXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXh9KWBcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYXV0bykge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQXV0bycpfWBcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYnJzdCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnJzdCcpfWBcbiAgICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpIHtcbiAgICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3R9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlc1BlclJvdW5kXG4gIH1cblxuICBnZXQgbXVsdGlwbGVTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMubWF4VXNlc1BlclJvdW5kIDw9IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHNpbmdsZVNob3QgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy51c2VzUGVyUm91bmQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJhc2VSYW5nZSAoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0ucmFuZ2Uubm9ybWFsLnZhbHVlKVxuICAgIGlmICghaXNOYU4ocmVzdWx0KSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJvbGwoXG4gICAgICB0aGlzLnN5c3RlbS5yYW5nZS5ub3JtYWwudmFsdWUsXG4gICAgICB0aGlzLnBhcmVudD8ucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKSA/PyB7fVxuICAgICkuZXZhbHVhdGVTeW5jKCkudG90YWxcbiAgfVxuXG4gIGdldCBsb25nUmFuZ2UgKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLmxvbmcudmFsdWUpXG4gICAgaWYgKCFpc05hTihyZXN1bHQpKSB7XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIHJldHVybiBuZXcgUm9sbChcbiAgICAgIHRoaXMuc3lzdGVtLnJhbmdlLmxvbmcudmFsdWUsXG4gICAgICB0aGlzLnBhcmVudD8ucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKSA/PyB7fVxuICAgICkuZXZhbHVhdGVTeW5jKCkudG90YWxcbiAgfVxuXG4gIGdldCBleHRyZW1lUmFuZ2UgKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUpXG4gICAgaWYgKCFpc05hTihyZXN1bHQpKSB7XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIHJldHVybiBuZXcgUm9sbChcbiAgICAgIHRoaXMuc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUsXG4gICAgICB0aGlzLnBhcmVudD8ucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKSA/PyB7fVxuICAgICkuZXZhbHVhdGVTeW5jKCkudG90YWxcbiAgfVxuXG4gIGdldCBza2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBbXVxuXG4gICAgY29uc3Qgc2tpbGxQcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHtcbiAgICAgICAgc2tpbGxQcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsUHJvcGVydGllc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZUJhc2UgKGFjdG9yLCBkYXRhKSB7XG4gICAgaWYgKGRhdGEudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAoU3RyaW5nKGRhdGEuc3lzdGVtLmJhc2UpLmluY2x1ZGVzKCdAJykpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3JzaGVldCkpIHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy5hY3Rvci4nKSkge1xuICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGZvdW5kcnkudXRpbHMuZ2V0UHJvcGVydHkoYWN0b3IsIHZhbHVlLnN1YnN0cmluZygxMSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIG5ldyBSb2xsKGRhdGEuc3lzdGVtLmJhc2UsIHBhcnNlZClbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4ocGFyc2VJbnQoZGF0YS5zeXN0ZW0uYmFzZSkpID8gcGFyc2VJbnQoZGF0YS5zeXN0ZW0uYmFzZSkgOiBudWxsXG4gIH1cblxuICBnZXQgX2Jhc2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBbbnVsbCwgZmFsc2VdXG4gICAgaWYgKHR5cGVvZiB0aGlzLnN5c3RlbS5iYXNlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIFt0aGlzLnN5c3RlbS5iYXNlLCBmYWxzZV1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zeXN0ZW0uYmFzZS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwodGhpcy5zeXN0ZW0uYmFzZSwgcGFyc2VkKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICApXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFsdWUgPSAwXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbdmFsdWUsIHRydWVdXG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAhaXNOYU4ocGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSkpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSlcbiAgICAgICAgOiBudWxsLFxuICAgICAgZmFsc2VcbiAgICBdXG4gIH1cblxuICBhc3luYyBhc3luY0Jhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgYFtDT0M3XSAoJHt0aGlzLnBhcmVudD8ubmFtZX0pIEV2YWx1YXRpbmcgc2tpbGwgJHt0aGlzLm5hbWV9OiR7dGhpcy5zeXN0ZW0uYmFzZX0gdG8gJHtlWzBdfWBcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0IGJhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0QnVsbGV0TGVmdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hbW1vKSB7XG4gICAgICB0aGlzLnNldEJ1bGxldHMoMClcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hbW1vXG4gIH1cblxuICBhc3luYyByZWxvYWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG1heEJ1bGxldCA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhtYXhCdWxsZXQpXG4gIH1cblxuICBhc3luYyBzZXRCdWxsZXRzIChidWxsZXRzKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmFtbW8nOiBidWxsZXRzIHx8IDAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEJ1bGxldCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgYnVsbGV0cyA9IGF3YWl0IHRoaXMuZ2V0QnVsbGV0TGVmdCgpXG4gICAgY29uc3QgbWF4QnVsbGV0cyA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGlmIChidWxsZXRzICsgMSA+PSBtYXhCdWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0cylcbiAgICBlbHNlIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhidWxsZXRzICsgMSlcbiAgfVxuXG4gIGFzeW5jIHNob290QnVsbGV0cyAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGlmICh4ID4gYnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyAtIHgpXG4gIH1cblxuICBzdGF0aWMgbWVyZ2VPcHRpb25hbFNraWxscyAoc2tpbGxMaXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgam9pbnRBcnJheSA9IHNraWxsTGlzdC5jb25jYXQob3B0aW9ucylcbiAgICByZXR1cm4gam9pbnRBcnJheVxuICAgICAgLnJlZHVjZSgobmV3QXJyYXksIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gSWYgc2tpbGwgaXMgbm90IGEgZ2VuZXJpYyBzcGVjIGFuZCBpcyBhbHJlYWR5IGluY2x1ZGVkIHdlIGRvbid0IGFkZCBpdGVtXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pICYmXG4gICAgICAgICAgbmV3QXJyYXkuZmluZChza2lsbCA9PiBza2lsbC5uYW1lID09PSBpdGVtLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBuZXdBcnJheVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgaXRlbSBpcyBhZGRlZFxuICAgICAgICByZXR1cm4gWy4uLm5ld0FycmF5LCBpdGVtXVxuICAgICAgfSwgW10pXG4gICAgICAuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gIH1cblxuICAvKiogVE9ETyA6IHJpZW4gYSBmYWlyZSBpY2kgISFcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB8fCBudWxsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdXNlZCB0byBkaXNwbGF5IGEgY2FyZCBmb3IgdGhlIEl0ZW0gaW4gdGhlIGNoYXQgbG9nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBodG1sT3B0aW9ucyAgICBPcHRpb25zIHVzZWQgYnkgdGhlIFRleHRFZGl0b3IuZW5yaWNoSFRNTCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcbiAgICovXG4gIGFzeW5jIGdldENoYXREYXRhIChodG1sT3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gRm91bmRyeVZUVCB2MTFcbiAgICBodG1sT3B0aW9ucy5hc3luYyA9IHRydWVcbiAgICBjb25zdCBkYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0pXG4gICAgLy8gRml4IDogZGF0YSBjYW4gaGF2ZSBkZXNjcmlwdGlvbiBkaXJlY3RseSBpbiBmaWVsZCwgbm90IHVuZGVyIHZhbHVlLlxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB7XG4gICAgICAgIHZhbHVlOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBzcGVjaWFsOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSAnJ1xuICAgIH1cbiAgICBjb25zdCBsYWJlbHMgPSBbXVxuXG4gICAgLy8gUmljaCB0ZXh0IGRlc2NyaXB0aW9uXG4gICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcblxuICAgIC8vIEl0ZW0gdHlwZSBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcHJvcHMgPSBbXVxuICAgIGNvbnN0IGZuID0gdGhpc1tgXyR7dGhpcy50eXBlfUNoYXREYXRhYF1cbiAgICBpZiAoZm4pIGZuLmJpbmQodGhpcykoZGF0YSwgbGFiZWxzLCBwcm9wcywgaHRtbE9wdGlvbnMpXG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKHAgPT4gISFwKVxuICAgIGRhdGEubGFiZWxzID0gbGFiZWxzXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgbGV0IHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbClcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbHMnKVxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke0NvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbCl9YFxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBza2lsbE5hbWUgPSB0aGlzLnN5c3RlbS5za2lsbC5tYWluLm5hbWVcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke3RoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZX1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNraWxsTmFtZSkge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBza2lsbExhYmVsLFxuICAgICAgICB2YWx1ZTogc2tpbGxOYW1lXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25Vc2VzUGVyUm91bmQnKSxcbiAgICAgIHZhbHVlOiB0aGlzLnVzZXNQZXJSb3VuZFN0cmluZ1xuICAgIH0pXG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcbiAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5tYWxmdW5jdGlvbiA/IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uIDogJy0nXG4gICAgfSlcblxuICAgIGlmICh0aGlzLnN5c3RlbS5idWxsZXRzKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuQmVQdXNoZWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5wdXNoKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuaW1wbFxuICB9XG5cbiAgZ2V0IGlzRG9kZ2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJykudG9Mb3dlckNhc2UoKVxuICAgIClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgUmF5LCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIFJldHVybiA8YT4gZWxlbWVudCBvZiBhIHJvbGwgaW5zdGFuY2UuIGZvdW5kcnkuanMgcmVmOlRleHRFZGl0b3IuX2NyZWF0ZUlubGluZVJvbGxcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5saW5lUm9sbCAocm9sbCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGNsczogWydpbmxpbmUtcm9sbCddLFxuICAgIGRhdGFzZXQ6IHt9XG4gIH1cblxuICB0cnkge1xuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxuICAgIGRhdGEucmVzdWx0ID0gcm9sbC50b3RhbFxuICAgIGRhdGEudGl0bGUgPSByb2xsLmZvcm11bGFcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIENvbnN0cnVjdCBhbmQgcmV0dXJuIHRoZSBmb3JtZWQgbGluayBlbGVtZW50XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICBhLnRpdGxlID0gZGF0YS50aXRsZVxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgYS5kYXRhc2V0W2tdID0gdlxuICB9XG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcbiAgcmV0dXJuIGFcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX19cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxuICogVXNlZCBmb3IgTUFDIGNvbXBhdC5cbiAqIEBwYXJhbSB7Uy5FdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0N0cmxLZXkgKGV2ZW50KSB7XG4gIGlmIChldmVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gKFxuICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgY2hhdEhlbHBlciB7XG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nWzFdLnRvVXBwZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHt9XG4gICAgbWVzc2FnZURhdGEuZmxhdm9yID0gdGl0bGVcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChvcHRpb25zLndoaXNwZXIpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgbWVzc2FnZURhdGEucm9sbE1vZGUgPSBDT05TVC5ESUNFX1JPTExfTU9ERVMuU0VMRlxuICAgIH1cbiAgICBtZXNzYWdlRGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgbWVzc2FnZURhdGEuY29udGVudCA9IG1lc3NhZ2VcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShtZXNzYWdlRGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gJy0nICsgc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXG4gICAgICByZXR1cm4gdG9rZW4/LmFjdG9yXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0U3BlYWtlckZyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGFjdG9yS2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBzcGVha2VyLnRva2VuID0gdG9rZW5JZFxuICAgICAgc3BlYWtlci5zY2VuZSA9IHNjZW5lSWRcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3Rvci5pZFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcbiAgICAgIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBzcGVha2VyXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICBpZiAoIXByb3Auc3RhcnRzV2l0aCgnXycpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KFxuICAgICAgICAgICAgb2JqZWN0W3Byb3BdLFxuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9OiR7cHJvcH06YFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGFzZXRbYCR7b2JqZWN0TmFtZX0ke3Byb3B9YF0gPSBvYmplY3RbcHJvcF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmplY3RGcm9tRWxlbWVudCAob2JqZWN0LCBlbGVtZW50KSB7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemUgKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgICAgY29uc3QgcyA9IGtleS5zbGljZSgxKVxuICAgICAgICBjb25zdCBvYmpQcm9wID0gcy5zbGljZShzLmluZGV4T2YoJzonKSArIDEpXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbb2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBvYmpbb2JqTmFtZV0gPSB7fVxuICAgICAgICBkZXNlcmlhbGl6ZShvYmpbb2JqTmFtZV0sIG9ialByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIG9ialtrZXldID0gdHJ1ZVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgb2JqW2tleV0gPSBmYWxzZVxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcbiAgICAgICAgZWxzZSBvYmpba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtZW50IHx8ICFvYmplY3QpIHJldHVyblxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbGVtZW50LmRhdGFzZXQpKSB7XG4gICAgICBpZiAocHJvcCA9PT0gJ3RlbXBsYXRlJykgcmV0dXJuXG4gICAgICBkZXNlcmlhbGl6ZShvYmplY3QsIHByb3AsIGVsZW1lbnQuZGF0YXNldFtwcm9wXSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzY2VuZS5kb2N1bWVudClcbiAgICAgICAgcmV0dXJuIHRva2VuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGtleSlcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yVG9rZW4oYWN0b3IpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yVG9rZW4gKGFjdG9yKSB7XG4gICAgaWYgKCFhY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gYWN0b3IudG9rZW4gfHwgYWN0b3IucHJvdG90eXBlVG9rZW5cbiAgICAvKioqKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvLyBDYXNlIDAgLSBBY3RvciBpcyBhIHRva2VuIChzeW50aGV0aWMgYWN0b3IpLCByZXR1cm4gdGhhdCB0b2tlbi5cbiAgICAvLyBpZihhY3Rvci5pc1Rva2VuKSByZXR1cm4gYWN0b3IudG9rZW47XG4gICAgLy8gZWxzZXtcbiAgICAvLyAgLy8gQ2FzZSAxIC0gQWN0b3IgaXMgbm90IGEgdG9rZW4sIGZpbmQgaWYgYSB0b2tlbiBleGlzdCBmb3IgdGhhdCBhY3Rvci5cbiAgICAvLyAgY29uc3QgYWN0b3JUb2tlbnMgPSBhY3Rvci5nZXRBY3RpdmVUb2tlbnMoKTtcbiAgICAvLyAgaWYoIGFjdG9yVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgLy8gQ2FzZSAxLjEgLSBJZiBoZSBoYXMgb25seSBvbmUgVG9rZW4gcmV0dXJuIGl0LlxuICAgIC8vICAgIGlmKCAxID09PSBhY3RvclRva2Vucy5sZW5ndGgpIHJldHVybiBhY3RvclRva2Vuc1swXTtcblxuICAgIC8vICAgIC8vIENhc2UgMS4yIC0gQWN0b3IgaGFzIG11bHRpcGxlIHRva2VucywgZmluZCBpZiBvbmUgb2YgdGhlbSBpcyB0aGUgY29udHJvbGxlZCB0b2tlbi5cbiAgICAvLyAgICBjb25zdCBjb250cm9sbGVkVG9rZW5zID0gYWN0b3JUb2tlbnMuZmlsdGVyKCB0ID0+IHQuX2NvbnRyb2xsZWQpO1xuICAgIC8vICAgIGlmKCBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgICAvLyBSZXR1cm4gdGhlIDFzdCBjb250cm9sbGVkIHRva2VuLCByaXNlIGEgd2FybmluZyBpZiBoZSBoYXMgbXVsdGlwbGUgY29udHJvbGxlZCB0b2tlbnMuXG4gICAgLy8gICAgICBpZiggdmVyYm9zZSAmJiBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCA+IDEpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gaGFzICR7Y29udHJvbGxlZFRva2Vucy5sZW5ndGh9IGNvbnRyb2xsZWQgdG9rZW5zLiBVc2luZyB0aGUgZmlyc3QgZm91bmRgKTtcbiAgICAvLyAgICAgIHJldHVybiBjb250cm9sbGVkVG9rZW5zWzBdO1xuICAgIC8vICAgIH1cblxuICAgIC8vICAgIC8vIENhc2UgMS4zIGFjdG9yIGRvZXNuJ3QgaGF2ZSBhbnkgYWN0aXZlIHRva2VuLiBSZXR1cm4gdGhlIGZpcnN0IHZhbGlkIHRva2VuIGZvciB0aGF0IGFjdG9yIGFuZCByYWlzZSBhIHdhcm5pbmcuXG4gICAgLy8gICAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gZG9lc24ndCBoYXZlIGFueSBjb250cm9sbGVkIHRva2VuLiBVc2luZyBmaXJzdCB0b2tlbiBmb3VuZC5gKTtcbiAgICAvLyAgICByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG4gICAgLy8gIH1cblxuICAgIC8vICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy5lcnJvciggYENvdWxkIG5vdCBmaW4gYW55IHRva2VuIGZvciAke2FjdG9yLm5hbWV9LmApO1xuICAgIC8vICByZXR1cm4gbnVsbDtcbiAgICAvLyB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JJbWdGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGlmICghYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIFRyeSB0byBmaW5kIGEgdG9rZW4uXG4gICAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KVxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjKSB7XG4gICAgICAgICAgaWYgKCh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmMuaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuICh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIGlmIG5vIHRva2VuIGZvdW5kIGZvciB0aGF0IGFjdG9yIHJldHVybiB0aGUgcHJvdG90eXBlIHRva2VuIGltYWdlLlxuICAgICAgaWYgKGFjdG9yLnByb3RvdHlwZVRva2VuKSB7XG4gICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYz8uaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdG9yLnByb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhY3Rvci5pbWdcbiAgfVxuXG4gIHN0YXRpYyBnZXREaXN0YW5jZSAoc3RhcnRUb2tlbiwgZW5kVG9rZW4pIHtcbiAgICAvLyBzdGFydFRva2VuLnVwZGF0ZVNvdXJjZSgpO1xuICAgIC8vIGNhbnZhcy5zaWdodC5pbml0aWFsaXplVG9rZW5zKCk7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5pZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGlmIChzdGFydFRva2VuLnNjZW5lPy5pZCB8fCBmYWxzZSkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzdGFydFRva2VuLnNjZW5lLmlkKVxuICAgICAgICBpZiAodHlwZW9mIHNjZW5lPy50b2tlbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5zID0gc2NlbmU/LnRva2Vuc1xuICAgICAgICAgICAgLmZpbHRlcih0b2tlbiA9PiB0b2tlbi5hY3Rvci5pZCA9PT0gZW5kVG9rZW4uZGF0YS5kb2N1bWVudC5pZClcbiAgICAgICAgICAgIC5tYXAodG9rZW4gPT4gdG9rZW4ub2JqZWN0KVxuICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBlbmRUb2tlbiA9IHRva2Vuc1swXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgZGlzdGFuY2UgPSB7XG4gICAgICBncmlkVW5pdDogMCxcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgdW5pdDogY2FudmFzLnNjZW5lLmdyaWQudW5pdHNcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShzdGFydFRva2VuLmNlbnRlciwgZW5kVG9rZW4uY2VudGVyKVxuICAgICAgY29uc3Qgc2VnbWVudCA9IFt7IHJheSB9XVxuICAgICAgZGlzdGFuY2UgPSB7XG4gICAgICAgIGdyaWRVbml0OiByYXkuZGlzdGFuY2UgLyBjYW52YXMuc2NlbmUuZ3JpZC5zaXplLFxuICAgICAgICAvLyB2YWx1ZTogKHJheS5kaXN0YW5jZS9jYW52YXMuc2NlbmUuZGF0YS5ncmlkKSpjYW52YXMuc2NlbmUuZGF0YS5ncmlkRGlzdGFuY2UsXG4gICAgICAgIHZhbHVlOiBjYW52YXMuZ3JpZC5tZWFzdXJlRGlzdGFuY2VzKHNlZ21lbnQsIHtcbiAgICAgICAgICBncmlkU3BhY2VzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdncmlkU3BhY2VzJylcbiAgICAgICAgfSlbMF0sXG4gICAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VFbGV2YXRpb24nKSkge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBNYXRoLmFicyhcbiAgICAgICAgICAoc3RhcnRUb2tlbi5kb2N1bWVudC5lbGV2YXRpb24gfHwgMCkgLSAoZW5kVG9rZW4uZG9jdW1lbnQuZWxldmF0aW9uIHx8IDApXG4gICAgICAgIClcbiAgICAgICAgZGlzdGFuY2UudmFsdWUgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgZGlzdGFuY2UudmFsdWUgKiBkaXN0YW5jZS52YWx1ZSArIGVsZXZhdGlvbiAqIGVsZXZhdGlvblxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VUaGVhdHJlT2ZUaGVNaW5kJykpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VEaXN0YW5jZUNhbGN1bGF0aW9uRmFpbHVyZScpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBkaXN0YW5jZVxuICB9XG5cbiAgc3RhdGljIHRvWWFyZHMgKGRpc3RhbmNlKSB7XG4gICAgc3dpdGNoIChkaXN0YW5jZS51bml0KSB7XG4gICAgICBjYXNlICdmdCc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZSAvIDNcblxuICAgICAgY2FzZSAneWQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSb2xsIHtcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgcm9sbERpdiA9IGNhcmQucXVlcnlTZWxlY3RvcignZGl2LmRpY2Utcm9sbCcpXG4gICAgaWYgKCFyb2xsRGl2KSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByb2xsRGl2KVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIGdldCByZXN1bHRUeXBlICgpIHtcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KHRoaXMuc3VjY2Vzc0xldmVsKVxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZ1bWJsZScpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICBpZiAodGhpcy5za2lsbElkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCByb2xsID0gb2JqZWN0IHx8IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCBlbGVtZW50KVxuICAgIHJvbGwuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHt9XG4gICAgfVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoXG4gICAgICByb2xsLmRpY2VzLFxuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yZXN1bHQnKVxuICAgIClcbiAgICByb2xsLmRpY2VzLmhhc0JvbnVzID0gcm9sbC5kaWNlTW9kaWZpZXIgIT09IDBcbiAgICByb2xsLmRpY2VzLmJvbnVzID0gTWF0aC5hYnMocm9sbC5kaWNlTW9kaWZpZXIpXG4gICAgcm9sbC5kaWNlcy5ib251c1R5cGUgPVxuICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJylcbiAgICBjb25zdCB0ZW5EaWNlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGVuLWRpY2UnKVxuICAgIGlmICh0ZW5EaWNlKSB7XG4gICAgICBmb3IgKGNvbnN0IGQgb2YgdGVuRGljZS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKSB7XG4gICAgICAgIGNvbnN0IGRpZSA9IHtcbiAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgaXNNYXg6IGZhbHNlLFxuICAgICAgICAgIGlzTWluOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogLTFcbiAgICAgICAgfVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRpZSwgZClcbiAgICAgICAgcm9sbC5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB1bml0RGllID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKVxuICAgICAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LWRpZScpLnF1ZXJ5U2VsZWN0b3IoJ2xpJylcbiAgICAgIDogbnVsbFxuICAgIHJvbGwuZGljZXMudW5pdC52YWx1ZSA9IHVuaXREaWUgPyBwYXJzZUludCh1bml0RGllLmRhdGFzZXQudmFsdWUpIDogbnVsbFxuXG4gICAgcm9sbC5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IGluY3JlYXNlU3VjY2VzcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmluY3JlYXNlLXN1Y2Nlc3MnKVxuICAgIGlmIChpbmNyZWFzZVN1Y2Nlc3MgJiYgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICBmb3IgKGNvbnN0IGlzbCBvZiBpbmNyZWFzZVN1Y2Nlc3MucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpIHtcbiAgICAgICAgY29uc3QgbmV3U3VjY2VzTGV2ZWwgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KG5ld1N1Y2Nlc0xldmVsLCBpc2wpXG4gICAgICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV3U3VjY2VzTGV2ZWwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJvbGwubHVja05lZWRlZCkge1xuICAgICAgcm9sbC5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XG4gICAgICAgIGx1Y2tOZWVkZWRWYWx1ZTogcm9sbC5sdWNrTmVlZGVkXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2hlY2sgKGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG5cbiAgICByb2xsLnJvbGxUeXBlID0gY2hlY2sucm9sbFR5cGVcbiAgICByb2xsLnNpZGUgPSBjaGVjay5zaWRlXG4gICAgcm9sbC5hY3Rpb24gPSBjaGVjay5hY3Rpb25cbiAgICByb2xsLnJlZk1lc3NhZ2VJZCA9IGNoZWNrLnJlZk1lc3NhZ2VJZFxuICAgIHJvbGwucmVmZXJlbmNlTWVzc2FnZUlkID0gY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkXG5cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IGNoZWNrLnN1Y2Nlc3NMZXZlbFxuICAgIHJvbGwuZGlmZmljdWx0eSA9IGNoZWNrLmRpZmZpY3VsdHlcbiAgICByb2xsLnNraWxsSWQgPSBjaGVjay5za2lsbCA/IGNoZWNrLnNraWxsLmlkIDogbnVsbFxuICAgIHJvbGwuaXRlbUlkID0gY2hlY2suaXRlbSA/IGNoZWNrLml0ZW0uaWQgOiBudWxsXG4gICAgcm9sbC5kaWNlTW9kID0gY2hlY2suZGljZU1vZGlmaWVyXG4gICAgcm9sbC52YWx1ZSA9IHBhcnNlSW50KGNoZWNrLnJhd1ZhbHVlKVxuICAgIHJvbGwuZnVtYmxlID0gY2hlY2suaXNGdW1ibGVcbiAgICByb2xsLmNyaXRpY2FsID0gY2hlY2suaXNDcml0aWNhbFxuICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA/IGNoZWNrLmNoYXJhY3RlcmlzdGljIDogbnVsbFxuICAgIHJvbGwucmVzdWx0ID0gY2hlY2suZGljZS50b3RhbFxuXG4gICAgcm9sbC5hY3RvcktleSA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgaWYgKGNoZWNrLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgIHJvbGwudG9rZW5JZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgcm9sbC5hY3RvcklkID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICByb2xsLnRva2VuS2V5ID0gbnVsbFxuICAgICAgcm9sbC5hY3RvcklkID0gY2hlY2suYWN0b3IudG9rZW5LZXkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhdHRhY2hDaGVja1RvRWxlbWVudCAoaHRtbEVsZW1lbnQsIGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayhjaGVjaylcbiAgICByb2xsLmF0dGFjaFRvRWxlbWVudChodG1sRWxlbWVudClcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGh0bWxFbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgaHRtbEVsZW1lbnQpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdEYW1hZ2Uge1xuICBzdGF0aWMgZ2V0TWFpbkRpZSAoZGFtYWdlU3RyaW5nKSB7XG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMjAnKSkgcmV0dXJuICdkMjAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTInKSkgcmV0dXJuICdkMTInXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTAnKSkgcmV0dXJuICdkMTAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkOCcpKSByZXR1cm4gJ2Q4J1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDQnKSkgcmV0dXJuICdkNCdcbiAgICByZXR1cm4gJ2Q2J1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCBkYW1hZ2UgPSBvYmplY3QgfHwge31cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRhbWFnZSwgZWxlbWVudClcbiAgICBjb25zdCByb2xscyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbHMnKS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXG4gICAgZGFtYWdlLnJvbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByKVxuICAgICAgY29uc3QgZ3JvdXAgPSByb2xsLmdyb3VwXG4gICAgICBjb25zdCBkaWNlID0ge1xuICAgICAgICBmYWNlczogcm9sbC5mYWNlcyxcbiAgICAgICAgcmVzdWx0OiByb2xsLnJlc3VsdFxuICAgICAgfVxuICAgICAgZGVsZXRlIHJvbGwuZ3JvdXBcbiAgICAgIGRlbGV0ZSByb2xsLmZhY2VzXG4gICAgICBkZWxldGUgcm9sbC5yZXN1bHRcbiAgICAgIGlmICh0eXBlb2YgZGFtYWdlLnJvbGxzW2dyb3VwXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcm9sbC5kaWNlID0gW11cbiAgICAgICAgZGFtYWdlLnJvbGxzLnB1c2gocm9sbClcbiAgICAgIH1cbiAgICAgIGRhbWFnZS5yb2xsc1tncm91cF0uZGljZS5wdXNoKGRpY2UpXG4gICAgfVxuICAgIGlmICghb2JqZWN0KSByZXR1cm4gZGFtYWdlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNYXRoVGVybSwgTnVtZXJpY1Rlcm0sIFBhcmVudGhldGljYWxUZXJtLCBSb2xsLCBSb2xsVGVybSAqL1xuY2xhc3MgQXZlcmFnZVBhcmVudGhldGljYWxUZXJtIGV4dGVuZHMgUGFyZW50aGV0aWNhbFRlcm0ge1xuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgX2V2YWx1YXRlU3luYyAoeyBtaW5pbWl6ZSA9IGZhbHNlLCBtYXhpbWl6ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIC8vIEV2YWx1YXRlIHRoZSBpbm5lciBSb2xsXG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbCB8fCBuZXcgQXZlcmFnZVJvbGwodGhpcy50ZXJtKVxuICAgIHRoaXMucm9sbCA9IHJvbGwuZXZhbHVhdGUoeyBtaW5pbWl6ZSwgbWF4aW1pemUsIGFzeW5jOiBmYWxzZSB9KVxuXG4gICAgLy8gUHJvcGFnYXRlIGZsYXZvciB0ZXh0IHRvIGlubmVyIHRlcm1zXG4gICAgaWYgKHRoaXMuZmxhdm9yKSB0aGlzLnJvbGwudGVybXMuZm9yRWFjaCh0ID0+IHsgdC5vcHRpb25zLmZsYXZvciA9IHQub3B0aW9ucy5mbGF2b3IgPz8gdGhpcy5mbGF2b3IgfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBdmVyYWdlUm9sbCBleHRlbmRzIFJvbGwge1xuICAvKipcbiAgICogRXZhbHVhdGUgdGhlIHJvbGwgc3luY2hyb25vdXNseS5cbiAgICogQSB0ZW1wb3JhcnkgaGVscGVyIG1ldGhvZCB1c2VkIHRvIG1pZ3JhdGUgYmVoYXZpb3IgZnJvbSAwLjcueCAoc3luYyBieSBkZWZhdWx0KSB0byAwLjkueCAoYXN5bmMgYnkgZGVmYXVsdCkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gICAgICBPcHRpb25zIHdoaWNoIGluZm9ybSBob3cgZXZhbHVhdGlvbiBpcyBwZXJmb3JtZWRcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5taW5pbWl6ZV0gICAgRm9yY2UgdGhlIHJlc3VsdCB0byBiZSBtaW5pbWl6ZWRcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5tYXhpbWl6ZV0gICAgRm9yY2UgdGhlIHJlc3VsdCB0byBiZSBtYXhpbWl6ZWRcbiAgICogQHJldHVybnMge1JvbGx9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZXZhbHVhdGVTeW5jICh7IG1pbmltaXplID0gZmFsc2UsIG1heGltaXplID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgLy8gU3RlcCAxIC0gUmVwbGFjZSBpbnRlcm1lZGlhdGUgdGVybXMgd2l0aCBldmFsdWF0ZWQgbnVtYmVyc1xuICAgIHRoaXMudGVybXMgPSB0aGlzLnRlcm1zLm1hcCh0ZXJtID0+IHtcbiAgICAgIGlmICghKHRlcm0gaW5zdGFuY2VvZiBSb2xsVGVybSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSb2xsIGV2YWx1YXRpb24gZW5jb3VudGVyZWQgYW4gaW52YWxpZCB0ZXJtIHdoaWNoIHdhcyBub3QgYSBSb2xsVGVybSBpbnN0YW5jZScpXG4gICAgICB9XG4gICAgICBpZiAodGVybS5pc0ludGVybWVkaWF0ZSkge1xuICAgICAgICB0ZXJtLmV2YWx1YXRlKHsgbWluaW1pemUsIG1heGltaXplLCBhc3luYzogZmFsc2UgfSlcbiAgICAgICAgdGhpcy5fZGljZSA9IHRoaXMuX2RpY2UuY29uY2F0KHRlcm0uZGljZSlcblxuICAgICAgICAvLyBUaGlzIHNlY3Rpb24gaXMgcmVwbGFjZWQgdG8gY2FsY3VsYXRlIHRoZSBhdmVyYWdlXG4gICAgICAgIGxldCB0b3RhbCA9IHRlcm0udG90YWxcbiAgICAgICAgaWYgKG1pbmltaXplICYmIG1heGltaXplICYmIHRlcm0uZGljZS5sZW5ndGgpIHtcbiAgICAgICAgICB0b3RhbCA9IE1hdGguZmxvb3IoKHRlcm0uZGljZVswXS5mYWNlcyArIDEpIC8gMiAqIHRlcm0udG90YWwpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IE51bWVyaWNUZXJtKHsgbnVtYmVyOiB0b3RhbCwgb3B0aW9uczogdGVybS5vcHRpb25zIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gdGVybVxuICAgIH0pXG5cbiAgICAvLyBTdGVwIDIgLSBTaW1wbGlmeSByZW1haW5pbmcgdGVybXNcbiAgICB0aGlzLnRlcm1zID0gdGhpcy5jb25zdHJ1Y3Rvci5zaW1wbGlmeVRlcm1zKHRoaXMudGVybXMpXG5cbiAgICAvLyBTdGVwIDMgLSBFdmFsdWF0ZSByZW1haW5pbmcgdGVybXNcbiAgICB0aGlzLnRlcm1zID0gdGhpcy50ZXJtcy5tYXAodGVybSA9PiB7XG4gICAgICBpZiAoIXRlcm0uX2V2YWx1YXRlZCkge1xuICAgICAgICBpZiAodHlwZW9mIHRlcm0uZmFjZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBOdW1lcmljVGVybSh7IG51bWJlcjogTWF0aC5mbG9vcigodGVybS5mYWNlcyArIDEpIC8gMiAqIHRlcm0ubnVtYmVyKSwgb3B0aW9uczogdGVybS5vcHRpb25zIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVybS5ldmFsdWF0ZSh7IG1pbmltaXplLCBtYXhpbWl6ZSwgYXN5bmM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXJtXG4gICAgfSlcblxuICAgIC8vIFN0ZXAgNCAtIEV2YWx1YXRlIHRoZSBmaW5hbCBleHByZXNzaW9uXG4gICAgdGhpcy5fdG90YWwgPSB0aGlzLl9ldmFsdWF0ZVRvdGFsKClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IGEgZm9ybXVsYSBieSBpZGVudGlmeWluZyBpdHMgb3V0ZXItbW9zdCBwYXJlbnRoZXRpY2FsIGFuZCBtYXRoIHRlcm1zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBfZm9ybXVsYSAgICAgIFRoZSByYXcgZm9ybXVsYSB0byBzcGxpdFxuICAgKiBAcmV0dXJucyB7c3RyaW5nW119ICAgICAgICAgIEFuIGFycmF5IG9mIHRlcm1zLCBzcGxpdCBvbiBwYXJlbnRoZXRpY2FsIHRlcm1zXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX3NwbGl0UGFyZW50aGVzZXMgKF9mb3JtdWxhKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NwbGl0R3JvdXAoX2Zvcm11bGEsIHtcbiAgICAgIG9wZW5SZWdleHA6IEF2ZXJhZ2VQYXJlbnRoZXRpY2FsVGVybS5PUEVOX1JFR0VYUCxcbiAgICAgIGNsb3NlUmVnZXhwOiBBdmVyYWdlUGFyZW50aGV0aWNhbFRlcm0uQ0xPU0VfUkVHRVhQLFxuICAgICAgb3BlblN5bWJvbDogJygnLFxuICAgICAgY2xvc2VTeW1ib2w6ICcpJyxcbiAgICAgIG9uQ2xvc2U6IGdyb3VwID0+IHtcbiAgICAgICAgLy8gRXh0cmFjdCBncm91cCBhcmd1bWVudHNcbiAgICAgICAgY29uc3QgZm4gPSBncm91cC5vcGVuLnNsaWNlKDAsIC0xKVxuICAgICAgICBjb25zdCBleHByZXNzaW9uID0gZ3JvdXAudGVybXMuam9pbignJylcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgZmxhdm9yOiBncm91cC5mbGF2b3IgPyBncm91cC5mbGF2b3Iuc2xpY2UoMSwgLTEpIDogdW5kZWZpbmVkIH1cblxuICAgICAgICAvLyBDbGFzc2lmeSB0aGUgcmVzdWx0aW5nIHRlcm1zXG4gICAgICAgIGNvbnN0IHRlcm1zID0gW11cbiAgICAgICAgaWYgKGZuIGluIE1hdGgpIHtcbiAgICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5fc3BsaXRNYXRoQXJncyhleHByZXNzaW9uKVxuICAgICAgICAgIHRlcm1zLnB1c2gobmV3IE1hdGhUZXJtKHsgZm4sIHRlcm1zOiBhcmdzLCBvcHRpb25zIH0pKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChmbikgdGVybXMucHVzaChmbilcbiAgICAgICAgICB0ZXJtcy5wdXNoKG5ldyBBdmVyYWdlUGFyZW50aGV0aWNhbFRlcm0oeyB0ZXJtOiBleHByZXNzaW9uLCBvcHRpb25zIH0pKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZXJtc1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENPTlNULCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCBUb2tlbkRvY3VtZW50LCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIEFjdG9yUGlja2VyRGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItcGlja2VyJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tXaGljaEFjdG9yVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L21lc3NhZ2VzL2FjdG9yLXBpY2tlci5oYnMnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNDE1LFxuICAgICAgaGVpZ2h0OiAzNzVcbiAgICB9KVxuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5kaXJlY3RvcnktaXRlbScsIHRoaXMuX29uUGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmNhbi1waW5nJykuaG92ZXIodGhpcy5fb25Ib3ZlckluLmJpbmQodGhpcyksIHRoaXMuX29uSG92ZXJPdXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuc3VibWl0LWJ1dHRvbicsIHRoaXMuX29uU3VibWl0QnV0dG9uLmJpbmQodGhpcykpXG4gIH1cblxuICBfb25QaWNrIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGZvciAoY29uc3QgbCBvZiBsaS5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICBsLmNsYXNzTGlzdC50b2dnbGUoJ3BpY2tlZCcsIGwgPT09IGxpKVxuICAgIH1cbiAgICB0aGlzLm9iamVjdC5zZWxlY3RlZCA9IGxpLmRhdGFzZXQuZW50cnlVdWlkXG4gIH1cblxuICBhc3luYyBfb25Ib3ZlckluIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoIWNhbnZhcy5yZWFkeSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHRva2VuID0gKGF3YWl0IGZyb21VdWlkKGxpLmRhdGFzZXQuZW50cnlVdWlkKSk/Lm9iamVjdFxuICAgIGlmICh0b2tlbj8uaXNWaXNpYmxlKSB7XG4gICAgICBpZiAoIXRva2VuLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgdG9rZW4uX29uSG92ZXJJbihldmVudCwgeyBob3Zlck91dE90aGVyczogdHJ1ZSB9KVxuICAgICAgICB0aGlzLl9oaWdobGlnaHRlZCA9IHRva2VuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uSG92ZXJPdXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0aGlzLl9oaWdobGlnaHRlZCkge1xuICAgICAgdGhpcy5faGlnaGxpZ2h0ZWQuX29uSG92ZXJPdXQoZXZlbnQpXG4gICAgfVxuICAgIHRoaXMuX2hpZ2hsaWdodGVkID0gbnVsbFxuICB9XG5cbiAgYXN5bmMgX29uU3VibWl0QnV0dG9uIChldmVudCkge1xuICAgIHRoaXMub2JqZWN0LnJlc29sdmUoYXdhaXQgZnJvbVV1aWQodGhpcy5vYmplY3Quc2VsZWN0ZWQpKVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoKSB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ11cbiAgICBsZXQgZm91bmQgPSBbXVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjYW52YXMucmVhZHkgJiYgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvdW5kID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0ID0+IHQuZG9jdW1lbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjYW52YXMucmVhZHkpIHtcbiAgICAgICAgZm91bmQgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKHQgPT4gYWxsb3dlZFR5cGVzLmluY2x1ZGVzKHQuZG9jdW1lbnQuYWN0b3IudHlwZSkgJiYgKHQuYWN0b3Iub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gdC5hY3Rvci5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVIpLm1hcCh0ID0+IHQuZG9jdW1lbnQpXG4gICAgICB9XG4gICAgICBjb25zdCBmb3VuZElEcyA9IGZvdW5kLm1hcCh0ID0+IHQuYWN0b3JJZClcbiAgICAgIGZvdW5kID0gZm91bmQuY29uY2F0KGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IGFsbG93ZWRUeXBlcy5pbmNsdWRlcyhhLnR5cGUpICYmICFmb3VuZElEcy5pbmNsdWRlcyhhLmlkKSAmJiAoYS5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA/PyBhLm93bmVyc2hpcC5kZWZhdWx0KSA9PT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikpXG4gICAgfVxuICAgIGlmIChmb3VuZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBmb3VuZFswXVxuICAgIH1cbiAgICBpZiAoZm91bmQubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBmb3VuZCkge1xuICAgICAgICBjb25zdCBpc1Rva2VuRG9jdW1lbnQgPSAob3B0aW9uIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudClcbiAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICB1dWlkOiBvcHRpb24udXVpZCxcbiAgICAgICAgICBuYW1lOiBvcHRpb24ubmFtZSxcbiAgICAgICAgICBpbWc6IChpc1Rva2VuRG9jdW1lbnQgPyBvcHRpb24uYWN0b3IucG9ydHJhaXQgOiBvcHRpb24ucG9ydHJhaXQpLFxuICAgICAgICAgIGNhblBpbmc6IGlzVG9rZW5Eb2N1bWVudFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgb3B0aW9ucy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgICAgbGV0IHNlbGVjdGVkID0gb3B0aW9uc1sxXS51dWlkXG4gICAgICBpZiAoZ2FtZS51c2VyLmNoYXJhY3Rlcikge1xuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9uID0gZm91bmQuZmluZChvcHRpb24gPT4gKG9wdGlvbi5hY3RvcklkID8/IG9wdGlvbi5pZCkgPT09IGdhbWUudXNlci5jaGFyYWN0ZXIuaWQpXG4gICAgICAgIGlmIChkZWZhdWx0T3B0aW9uKSB7XG4gICAgICAgICAgc2VsZWN0ZWQgPSBkZWZhdWx0T3B0aW9uLnV1aWRcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIG5ldyBBY3RvclBpY2tlckRpYWxvZyh7IG9wdGlvbnMsIHNlbGVjdGVkLCByZXNvbHZlIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgVG9rZW5Eb2N1bWVudCwgdWkgKi9cbmltcG9ydCB7IEFjdG9yUGlja2VyRGlhbG9nIH0gZnJvbSAnLi9hY3Rvci1waWNrZXItZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0dyb3VwTWVzc2FnZSB7XG4gIC8vIFN0ZXAgNmM6IEdNIC8gLSA9IFJlbW92ZSBhIHJvbGxcbiAgc3RhdGljIGFzeW5jIHJlbW92ZVJvbGwgKHsgbWVzc2FnZUlkLCBtc2csIHdoaWNoIH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgdXBkYXRlcyA9IHtcbiAgICAgICAgWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLi09JyArIHdoaWNoXTogbnVsbFxuICAgICAgfVxuICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDZiOiBHTSAvIE5vbiBHTSA9IFB1c2ggUm9sbFxuICBzdGF0aWMgYXN5bmMgcHVzaE15Um9sbCAoeyBtZXNzYWdlSWQsIG1zZywgd2hpY2ggfSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICBsZXQgZ21JZCA9IGZhbHNlXG4gICAgaWYgKCFtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgZ21JZCA9IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKClcbiAgICB9XG4gICAgc3dpdGNoIChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbWJpbmVkJzpcbiAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLndhc1B1c2hlZCddID0gdHJ1ZVxuICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1Db21iaW5lZFJvbGwoeyBtc2csIGdtSWQsIHVwZGF0ZXMsIHB1c2hpbmc6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ29wcG9zZWQnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3Qgcm9sbHMgPSB7IFt3aGljaF06IG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsIH1cbiAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1Ob3JtYWxSb2xsKHsgbXNnLCByb2xscywgZ21JZCwgdXBkYXRlcywgcHVzaGluZzogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCA2YTogR00gLyBOb24gR00gPSBTcGVuZCBsdWNrXG4gIHN0YXRpYyBhc3luYyBzcGVuZE15THVjayAoeyBtZXNzYWdlSWQsIG1zZywgd2hpY2gsIGluZGV4LCBsdWNrQW1vdW50IH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NvbWJpbmVkJzpcbiAgICAgICAgICBpZiAoIWx1Y2tBbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21EYXRhKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkKVxuICAgICAgICAgICAgbHVja0Ftb3VudCA9IGNoZWNrLmluY3JlYXNlU3VjY2Vzc1tpbmRleF0ubHVja1RvU3BlbmQgPz8gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobHVja0Ftb3VudCkge1xuICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLmdldEFjdG9yKG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10uYWN0b3JVdWlkKVxuICAgICAgICAgICAgaWYgKCEoYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gYWN0b3IuYWN0b3IgOiBhY3Rvcikuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICAgICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gbXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hlY2sgPSBDb0M3Q2hlY2suZnJvbURhdGEobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZClcbiAgICAgICAgICAgICAgY2hlY2suaW5jcmVhc2VMdWNrU3BlbmQobHVja0Ftb3VudClcbiAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmNvbXBsZXRlZCddID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGlmIChtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ21JZCA9IENvQzdVdGlsaXRpZXMuZ2V0QW5JZEZvckdtKClcbiAgICAgICAgICAgICAgICBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcjogZ21JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtc2cuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ29wcG9zZWQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21EYXRhKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgY2hlY2sudXBncmFkZUNoZWNrKGluZGV4LCBmYWxzZSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGx1Y2tBbW91bnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50LCBmYWxzZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XG4gICAgICAgICAgICAgIFsnZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmNvbXBsZXRlZCddOiBjaGVjay5KU09OUm9sbERhdGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBnbUlkID0gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgICAgICAgICAgIGlmIChnbUlkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ3JvdXAtbWVzc2FnZS11cGRhdGUnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlc1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQ29DNy5FcnJvclJvbGxBbHJlYWR5Q29tcGxldGVkJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgNTogR00gLyAtID0gVXBkYXRlIHRoZSBtZXNzYWdlXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVUaGVHcm91cE1lc3NhZ2UgKHsgbXNnLCB1cGRhdGVzLCByb2xsRGF0YSB9ID0ge30pIHtcbiAgICBpZiAobXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10pIHtcbiAgICAgIGlmICh0eXBlb2Ygcm9sbERhdGEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJvbGxEYXRhID0ge31cbiAgICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBtc2c/LmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wYXJzZVJvbGxzKHsgcm9sbDogbXNnPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsLCBxdWljazogdHJ1ZSB9KVxuICAgICAgICAgIHJvbGxEYXRhW3doaWNoXSA9IHJvbGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyByb2xsRGF0YSB9LCBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG1zZy5mbGFncy5Db0M3Wydncm91cC1tZXNzYWdlJ10sIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KHVwZGF0ZXMpPy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10gPz8ge30sIHsgcGVyZm9ybURlbGV0aW9uczogdHJ1ZSB9KSlcbiAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gb3B0aW9ucy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQpIHtcbiAgICAgICAgICBvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkID0gQ29DN0NoZWNrLmZyb21EYXRhKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuYWxsUm9sbHNDb21wbGV0ZWQgPSB0cnVlXG4gICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG9wdGlvbnMucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBvcHRpb25zLmFsbFJvbGxzQ29tcGxldGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmFsbFJvbGxzQ29tcGxldGVkJ10gPSBvcHRpb25zLmFsbFJvbGxzQ29tcGxldGVkXG4gICAgICBzd2l0Y2ggKG9wdGlvbnMudHlwZSkge1xuICAgICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgICAgb3B0aW9ucy5pc1N1Y2Nlc3MgPSBmYWxzZVxuICAgICAgICAgIG9wdGlvbnMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICAgICAgICBpZiAob3B0aW9ucy5hbGxSb2xsc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgbGV0IHN1Y2Nlc3NlcyA9IDBcbiAgICAgICAgICAgIGxldCBmYWlsdXJlcyA9IDBcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gb3B0aW9ucy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQuaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc2VzKytcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLmlzRmFpbHVyZSkge1xuICAgICAgICAgICAgICAgIGZhaWx1cmVzKytcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NlcyA+IDAgJiYgKG9wdGlvbnMuY29tYmluZWQgPT09ICdhbnknIHx8IChmYWlsdXJlcyA9PT0gMCAmJiBvcHRpb25zLmNvbWJpbmVkID09PSAnYWxsJykpKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5pc0ZhaWx1cmUgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5pc1N1Y2Nlc3MnXSA9IG9wdGlvbnMuaXNTdWNjZXNzXG4gICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmlzRmFpbHVyZSddID0gb3B0aW9ucy5pc0ZhaWx1cmVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgICBpZiAob3B0aW9ucy5hbGxSb2xsc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgb3B0aW9ucy5pc1RpZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pc0NvbWJhdCkge1xuICAgICAgICAgICAgICAvLyBTb3J0IGNvbWJhdCByb2xscyBieSBpbmRleC4gYXR0YWNrZXJzIGZpcnN0XG4gICAgICAgICAgICAgIG9wdGlvbnMucm9sbE9yZGVyID0gQXJyYXkuZnJvbSgobmV3IEludDhBcnJheShvcHRpb25zLnJvbGxPcmRlci5tYXAodiA9PiBwYXJzZUludCh2LnN1YnN0cigxKSwgMTApKSkpLnNvcnQoKSkubWFwKHYgPT4gJ3InICsgdilcbiAgICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0xldmVscyA9IHt9XG4gICAgICAgICAgICAgIG9wdGlvbnMuZGVmZW5kZXJJc0RvZGdpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdoaWNoIGluIG9wdGlvbnMucm9sbFN0YXR1c2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQucGFzc2VkKSB7XG4gICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWxzW29wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQuc3VjY2Vzc0xldmVsXSA9IHBhcnNlSW50KHN1Y2Nlc3NMZXZlbHNbb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWxdID8/IDAsIDEwKSArIDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0RvZGdpbmcgJiYgIW9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0F0dGFja2VyKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLmRlZmVuZGVySXNEb2RnaW5nID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuZGVmZW5kZXJJc0RvZGdpbmcnXSA9IG9wdGlvbnMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWR2YW50YWdlQXR0YWNrZXIgPT09IGZhbHNlICYmIG9wdGlvbnMuYWR2YW50YWdlRGVmZW5kZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmZW5kZXJJc0RvZGdpbmcpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYWR2YW50YWdlRGVmZW5kZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UuYWR2YW50YWdlRGVmZW5kZXInXSA9IG9wdGlvbnMuYWR2YW50YWdlRGVmZW5kZXJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hZHZhbnRhZ2VBdHRhY2tlciA9IHRydWVcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5hZHZhbnRhZ2VBdHRhY2tlciddID0gb3B0aW9ucy5hZHZhbnRhZ2VBdHRhY2tlclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBiZXN0ID0gTWF0aC5tYXgoLi4uT2JqZWN0LmtleXMoc3VjY2Vzc0xldmVscykpXG4gICAgICAgICAgICAgIG9wdGlvbnMubmVlZHNUaWVCcmVha2VyID0gZmFsc2VcbiAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgICAgaWYgKGJlc3QgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBvcHRpb25zLnJvbGxTdGF0dXNlcykge1xuICAgICAgICAgICAgICAgICAgbGV0IHJvbGxJc1dpbm5lciA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBsZXQgcm9sbElzVGllID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uY29tcGxldGVkLnN1Y2Nlc3NMZXZlbCA9PT0gYmVzdCAmJiBzdWNjZXNzTGV2ZWxzW2Jlc3RdID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGxJc1dpbm5lciA9IHRydWVcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgPT09IGJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWR2YW50YWdlQXR0YWNrZXIgJiYgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzQXR0YWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICByb2xsSXNXaW5uZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5hZHZhbnRhZ2VEZWZlbmRlciAmJiAhb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzQXR0YWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICByb2xsSXNXaW5uZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gcm9sbElzV2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIHJvbGxJc1RpZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm5lZWRzVGllQnJlYWtlciA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmlzVGllID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNXaW5uZXIgPSByb2xsSXNXaW5uZXJcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc1RpZSA9IHJvbGxJc1RpZVxuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLnJvbGxTdGF0dXNlcy4nICsgd2hpY2ggKyAnLmlzV2lubmVyJ10gPSByb2xsSXNXaW5uZXJcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5pc1RpZSddID0gcm9sbElzVGllXG4gICAgICAgICAgICAgICAgICBpZiAocm9sbElzV2lubmVyICYmICFyb2xsSXNUaWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0F0dGFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc01hbmV1dmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdFRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9sbERhdGFbd2hpY2hdLmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0VGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9sbERhdGFbd2hpY2hdLmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc01hbmV1dmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW3doaWNoXS5pc0RvZGdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0VGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByb2xsRGF0YVt3aGljaF0uYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvbGxEYXRhW3doaWNoXS5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdFRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByb2xsRGF0YVt3aGljaF0uYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLm5lZWRzVGllQnJlYWtlciddID0gb3B0aW9ucy5uZWVkc1RpZUJyZWFrZXJcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFNvcnQgYnkgc3VjY2Vzc2VzXG4gICAgICAgICAgICAgIGNvbnN0IG9wcG9zZWRSb2xsVGllQnJlYWtlciA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpXG4gICAgICAgICAgICAgIG9wdGlvbnMucm9sbE9yZGVyLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbYV0uY29tcGxldGVkLnN1Y2Nlc3NMZXZlbCA+IG9wdGlvbnMucm9sbFN0YXR1c2VzW2JdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbYV0uY29tcGxldGVkLnN1Y2Nlc3NMZXZlbCA8IG9wdGlvbnMucm9sbFN0YXR1c2VzW2JdLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHBvc2VkUm9sbFRpZUJyZWFrZXIpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJvbGxTdGF0dXNlc1thXS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQgPiBvcHRpb25zLnJvbGxTdGF0dXNlc1tiXS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5tb2RpZmllZFJlc3VsdCA8IG9wdGlvbnMucm9sbFN0YXR1c2VzW2JdLmNvbXBsZXRlZC5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yb2xsU3RhdHVzZXNbYV0uY29tcGxldGVkLnJhd1ZhbHVlID4gb3B0aW9ucy5yb2xsU3RhdHVzZXNbYl0uY29tcGxldGVkLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm9sbFN0YXR1c2VzW2FdLmNvbXBsZXRlZC5yYXdWYWx1ZSA8IG9wdGlvbnMucm9sbFN0YXR1c2VzW2JdLmNvbXBsZXRlZC5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0TWF4ID0gb3B0aW9ucy5yb2xsT3JkZXIubGVuZ3RoXG4gICAgICAgICAgICAgIGxldCBvZmZzZXQgPSAwXG4gICAgICAgICAgICAgIGNvbnN0IGEgPSBvcHRpb25zLnJvbGxTdGF0dXNlc1tvcHRpb25zLnJvbGxPcmRlclswXV1cbiAgICAgICAgICAgICAgaWYgKCFhLmZhaWxlZCkge1xuICAgICAgICAgICAgICAgIGZvciAoOyBvZmZzZXQgPCBvZmZzZXRNYXg7IG9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBiID0gb3B0aW9ucy5yb2xsU3RhdHVzZXNbb3B0aW9ucy5yb2xsT3JkZXJbb2Zmc2V0XV1cbiAgICAgICAgICAgICAgICAgIGlmIChhLmNvbXBsZXRlZC5zdWNjZXNzTGV2ZWwgIT09IGIuY29tcGxldGVkLnN1Y2Nlc3NMZXZlbCB8fCAob3Bwb3NlZFJvbGxUaWVCcmVha2VyID8gYS5jb21wbGV0ZWQubW9kaWZpZWRSZXN1bHQgIT09IGIuY29tcGxldGVkLm1vZGlmaWVkUmVzdWx0IDogYS5jb21wbGV0ZWQucmF3VmFsdWUgIT09IGIuY29tcGxldGVkLnJhd1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQtLVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAtMVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9wdGlvbnMuaXNUaWUgPSBvZmZzZXQgPiAwXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2Zmc2V0TWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgaXNXaW5uZXIgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGxldCBpc1RpZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgaWYgKGkgPD0gb2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICBpc1dpbm5lciA9IHRydWVcbiAgICAgICAgICAgICAgICAgIGlzVGllID0gb3B0aW9ucy5pc1RpZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB3aGljaCA9IG9wdGlvbnMucm9sbE9yZGVyW2ldXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLmlzV2lubmVyID0gaXNXaW5uZXJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0uaXNUaWUgPSBpc1RpZVxuICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5pc1dpbm5lciddID0gaXNXaW5uZXJcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNUaWUnXSA9IGlzVGllXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb3B0aW9ucy5uZWVkc1RpZUJyZWFrZXIgPSBmYWxzZVxuICAgICAgICAgICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2UubmVlZHNUaWVCcmVha2VyJ10gPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlc1snZmxhZ3MuQ29DNy5ncm91cC1tZXNzYWdlLmlzVGllJ10gPSBvcHRpb25zLmlzVGllXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoQ29DN0dyb3VwTWVzc2FnZS5nZXRUZW1wbGF0ZVBhdGgobXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS50eXBlKSwgb3B0aW9ucylcbiAgICAgIHVwZGF0ZXMuY29udGVudCA9IGh0bWxcbiAgICAgIGF3YWl0IG1zZy51cGRhdGUodXBkYXRlcylcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDQ6IEdNIC8gLSA9IFByZXBhcmUgbWVzc2FnZSBkYXRhXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVUaGVNZXNzYWdlICh7IG1lc3NhZ2VJZCwgdXBkYXRlcyB9KSB7XG4gICAgY29uc3QgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmIChtc2c/LmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXSA/PyBmYWxzZSkge1xuICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0Q2hlY2sgKHsgbXNnLCB0aGVSb2xsIH0pIHtcbiAgICBjb25zdCBjaGVja0RhdGEgPSB7XG4gICAgICBkaWZmaWN1bHR5OiB0aGVSb2xsLmRpZmZpY3VsdHksXG4gICAgICBkaWNlTW9kaWZpZXI6IHRoZVJvbGwuYm9udXMsXG4gICAgICBhY3RvcktleTogKHRoZVJvbGwuYWN0b3IuYWN0b3JLZXkgPz8gdGhlUm9sbC5hY3Rvci5hY3Rvci5hY3RvcktleSksXG4gICAgICBkZW55UHVzaDogZmFsc2UsXG4gICAgICBjb21iYXQ6IChtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddLmlzQ29tYmF0ID8/IGZhbHNlKVxuICAgIH1cbiAgICBzd2l0Y2ggKHRoZVJvbGwudHlwZSkge1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBjaGVja0RhdGEuY2hhcmFjdGVyaXN0aWMgPSB0aGVSb2xsLmtleVxuICAgICAgICBjaGVja0RhdGEuZGVueVB1c2ggPSAobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5kZW55UHVzaCA/PyBmYWxzZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIGNoZWNrRGF0YS5hdHRyaWJ1dGUgPSB0aGVSb2xsLmtleVxuICAgICAgICBjaGVja0RhdGEuZGVueVB1c2ggPSAobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5kZW55UHVzaCA/PyBmYWxzZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgY2hlY2tEYXRhLnNraWxsID0gdGhlUm9sbC5za2lsbFxuICAgICAgICBjaGVja0RhdGEuZGVueVB1c2ggPSAoKG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10uZGVueVB1c2ggPz8gZmFsc2UpIHx8ICF0aGVSb2xsLnB1c2hhYmxlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIGNoZWNrRGF0YS5pdGVtID0gdGhlUm9sbC5pdGVtXG4gICAgICAgIGNoZWNrRGF0YS5kZW55UHVzaCA9ICgobXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5kZW55UHVzaCA/PyBmYWxzZSkgfHwgIXRoZVJvbGwucHVzaGFibGUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suY3JlYXRlKGNoZWNrRGF0YSlcbiAgfVxuXG4gIC8vIFN0ZXAgMzogR00gLyBOb24gR00gPSBQZXJmb3JtIGEgcm9sbFxuICBzdGF0aWMgYXN5bmMgcGVyZm9ybVJvbGwgKHsgbXNnLCB3aGljaCwgcm9sbCwgcHVzaGluZyB9ID0ge30pIHtcbiAgICBjb25zdCB0aGVSb2xsID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wYXJzZVJvbGxzKHsgcm9sbCwgcXVpY2s6IGZhbHNlIH0pXG4gICAgaWYgKCF0aGVSb2xsKSB7XG4gICAgICByZXR1cm4ge31cbiAgICB9XG4gICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLmdldENoZWNrKHsgbXNnLCB0aGVSb2xsIH0pXG4gICAgaWYgKHB1c2hpbmcpIHtcbiAgICAgIGNoZWNrLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKHtcbiAgICAgIGZvcmNlRFNOOiB0cnVlXG4gICAgfSlcbiAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuY29tcGxldGVkJ10gPSBjaGVjay5KU09OUm9sbERhdGFcbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgLy8gU3RlcCAyYjogR00gLyBOb24gR00gPSBwZXJmb3JtIHJvbGwgZGF0YVxuICBzdGF0aWMgYXN5bmMgcGVyZm9ybUNvbWJpbmVkUm9sbCAoeyBtZXNzYWdlSWQsIG1zZywgZ21JZCwgdXBkYXRlcywgcHVzaGluZyA9IGZhbHNlIH0pIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICB9XG5cbiAgICBjb25zdCByb2xsRGF0YSA9IHt9XG4gICAgZm9yIChjb25zdCB3aGljaCBpbiBtc2c/LmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnBhcnNlUm9sbHMoeyByb2xsOiBtc2c/LmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwsIHF1aWNrOiBmYWxzZSB9KVxuICAgICAgaWYgKHJvbGwpIHtcbiAgICAgICAgcm9sbERhdGFbd2hpY2hdID0gcm9sbFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBvb2wgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbERhdGEpIHtcbiAgICAgIHBvb2xbcGFyc2VJbnQocm9sbERhdGFbd2hpY2hdLmJvbnVzID8/IDAsIDEwKV0gPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBDb0M3RGljZS5jb21iaW5lZFJvbGwoeyBwb29sIH0pXG5cbiAgICBsZXQgZmlyc3QgPSB0cnVlXG4gICAgZm9yIChjb25zdCB3aGljaCBpbiByb2xsRGF0YSkge1xuICAgICAgY29uc3QgYm9udXMgPSBwYXJzZUludChyb2xsRGF0YVt3aGljaF0uYm9udXMgPz8gMCwgMTApXG4gICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UuZ2V0Q2hlY2soeyBtc2csIHRoZVJvbGw6IHJvbGxEYXRhW3doaWNoXSB9KVxuICAgICAgaWYgKHB1c2hpbmcpIHtcbiAgICAgICAgY2hlY2sucHVzaGluZyA9IHB1c2hpbmdcbiAgICAgIH1cbiAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKHtcbiAgICAgICAgcm9sbDogcm9sbFtib251c10sXG4gICAgICAgIHNpbGVudDogKGZpcnN0ID09PSBmYWxzZSA/IHRydWUgOiB1bmRlZmluZWQpLFxuICAgICAgICBmb3JjZURTTjogZmlyc3RcbiAgICAgIH0pXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuY29tcGxldGVkJ10gPSBjaGVjay5KU09OUm9sbERhdGFcbiAgICAgIGZpcnN0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGdtSWQgPSBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgICBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgICAgbGlzdGVuZXI6IGdtSWQsXG4gICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgICB1cGRhdGVzXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAyYTogR00gLyBOb24gR00gPSBwZXJmb3JtIHJvbGwgZGF0YVxuICBzdGF0aWMgYXN5bmMgcGVyZm9ybU5vcm1hbFJvbGwgKHsgbWVzc2FnZUlkLCBtc2csIHJvbGxzLCBnbUlkLCB1cGRhdGVzLCBwdXNoaW5nID0gZmFsc2UgfSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIH1cblxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbHMpIHtcbiAgICAgIGlmICh0eXBlb2YgbXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8ucm9sbFN0YXR1c2VzW3doaWNoXS5jb21wbGV0ZWQgPT09ICd1bmRlZmluZWQnIHx8IHB1c2hpbmcpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih1cGRhdGVzLCBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1Sb2xsKHsgbXNnLCB3aGljaCwgcm9sbDogcm9sbHNbd2hpY2hdLCBwdXNoaW5nIH0pKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQ29DNy5FcnJvclJvbGxBbHJlYWR5Q29tcGxldGVkJywgeyBsb2NhbGl6ZTogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgfSBlbHNlIGlmIChnbUlkICE9PSBmYWxzZSkge1xuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICB0eXBlOiAnZ3JvdXAtbWVzc2FnZS11cGRhdGUnLFxuICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgdXBkYXRlc1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDI6IEdNIC8gTm9uIEdNID0gUHJlcGFyZSByb2xsIGRhdGFcbiAgc3RhdGljIGFzeW5jIHBlcmZvcm1NeVJvbGxzICh7IG1lc3NhZ2VJZCwgbXNnLCByb2xscyB9KSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7fVxuICAgIGZvciAoY29uc3Qgd2hpY2ggaW4gcm9sbHMpIHtcbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UubmFtZVJvbGwoeyB3aGljaCwgcm9sbDogcm9sbHNbd2hpY2hdLCB1cGRhdGVzIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZ21JZCA9IChtc2cuY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSA/IGZhbHNlIDogQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKSlcblxuICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAobXNnLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMgfSlcbiAgICAgIH0gZWxzZSBpZiAoZ21JZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgICAgbGlzdGVuZXI6IGdtSWQsXG4gICAgICAgICAgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJyxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgICB1cGRhdGVzXG4gICAgICAgIH0pXG4gICAgICAgIC8vIFdhaXQgZm9yIGEgYml0IHRvIHJlZHVjZSByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbWJpbmVkJzpcbiAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtQ29tYmluZWRSb2xsKHsgbXNnLCBnbUlkLCB1cGRhdGVzIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wZXJmb3JtTm9ybWFsUm9sbCh7IG1zZywgcm9sbHMsIGdtSWQsIHVwZGF0ZXMgfSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDI6IEdNIC8gTm9uIEdNID0gTmFtZSByb2xsc1xuICBzdGF0aWMgYXN5bmMgbmFtZVJvbGwgKHsgd2hpY2gsIHJvbGwsIHVwZGF0ZXMgfSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGFyc2VSb2xscyh7IHJvbGwsIHF1aWNrOiBmYWxzZSB9KVxuICAgIGlmIChwYXJzZWQpIHtcbiAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5zaG9ydE5hbWUnXSA9IHBhcnNlZC5zaG9ydE5hbWVcbiAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5mdWxsTmFtZSddID0gcGFyc2VkLmZ1bGxOYW1lXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcudGFncyddID0gcGFyc2VkLnRhZ3MgPz8gW11cbiAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5wZXJjZW50J10gPSBwYXJzZWQucGVyY2VudCA/PyAxXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNNYW5ldXZlciddID0gcGFyc2VkLmlzTWFuZXV2ZXIgPz8gZmFsc2VcbiAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5pc0RvZGdpbmcnXSA9IHBhcnNlZC5pc0RvZGdlID8/IGZhbHNlXG4gICAgICB1cGRhdGVzWydmbGFncy5Db0M3Lmdyb3VwLW1lc3NhZ2Uucm9sbFN0YXR1c2VzLicgKyB3aGljaCArICcuaXNXZWFwb24nXSA9IHBhcnNlZC5pc0RvZGdlID8/IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAxOiBHTSAvIC0gPSBDcmVhdGUgbWVzc2FnZVxuICBzdGF0aWMgYXN5bmMgbmV3R3JvdXBNZXNzYWdlICh7IHJvbGxEYXRhID0gdW5kZWZpbmVkLCBvcHRpb25zIH0pIHtcbiAgICBpZiAodHlwZW9mIHJvbGxEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcm9sbERhdGEgPSB7fVxuICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBvcHRpb25zLnJvbGxTdGF0dXNlcykge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wYXJzZVJvbGxzKHsgcm9sbDogb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwsIHF1aWNrOiB0cnVlIH0pXG4gICAgICAgIHJvbGxEYXRhW3doaWNoXSA9IHJvbGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByb2xsc0J5VXNlciA9IHt9XG4gICAgY29uc3Qgcm9sbFJlcXVpcmVzTmFtZSA9IHt9XG4gICAgZm9yIChjb25zdCB3aGljaCBpbiByb2xsRGF0YSkge1xuICAgICAgbGV0IGFzVXNlcklkID0gJydcbiAgICAgIHN3aXRjaCAocm9sbERhdGFbd2hpY2hdLmF1dG9Sb2xsLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKHJvbGxEYXRhW3doaWNoXS5hdXRvUm9sbFswXSAhPT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgICBhc1VzZXJJZCA9IHJvbGxEYXRhW3doaWNoXS5hdXRvUm9sbFswXVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGFzVXNlcklkID0gZ2FtZS51c2VyLmlkXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBvcHRpb25zLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbGluZyA9IGZhbHNlXG4gICAgICAgICAgaWYgKHJvbGxEYXRhW3doaWNoXS5zaG9ydE5hbWUgPT09ICctJykge1xuICAgICAgICAgICAgcm9sbFJlcXVpcmVzTmFtZVt3aGljaF0gPSByb2xsRGF0YVt3aGljaF0ucm9sbFxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKGFzVXNlcklkICE9PSAnJykge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyb2xsc0J5VXNlciwgYXNVc2VySWQpKSB7XG4gICAgICAgICAgcm9sbHNCeVVzZXJbYXNVc2VySWRdID0ge31cbiAgICAgICAgfVxuICAgICAgICByb2xsc0J5VXNlclthc1VzZXJJZF1bd2hpY2hdID0gb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxcbiAgICAgICAgb3B0aW9ucy5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxpbmcgPSBhc1VzZXJJZFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IE9iamVjdC5hc3NpZ24oeyByb2xsRGF0YSB9LCBvcHRpb25zKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShDb0M3R3JvdXBNZXNzYWdlLmdldFRlbXBsYXRlUGF0aChvcHRpb25zLnR5cGUpLCB0ZW1wbGF0ZURhdGEpXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgJ2dyb3VwLW1lc3NhZ2UnOiBvcHRpb25zXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuICAgIHN3aXRjaCAoY2hhdERhdGEuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy50eXBlKSB7XG4gICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgY2hhdERhdGEuc3BlYWtlciA9IE9iamVjdC5hc3NpZ24oY2hhdERhdGEuc3BlYWtlciA/PyB7fSwgeyBhbGlhczogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9wcG9zZWRSb2xsQ2FyZCcpIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIGNoYXREYXRhLnNwZWFrZXIgPSBPYmplY3QuYXNzaWduKGNoYXREYXRhLnNwZWFrZXIgPz8ge30sIHsgYWxpYXM6IE9iamVjdC52YWx1ZXMocm9sbERhdGEpWzBdLmFjdG9yLm5hbWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgY29uc3QgbXNnID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgZm9yIChjb25zdCB3aGljaCBpbiByb2xsUmVxdWlyZXNOYW1lKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLm5hbWVSb2xsKHsgd2hpY2gsIHJvbGw6IHJvbGxSZXF1aXJlc05hbWVbd2hpY2hdLCB1cGRhdGVzIH0pXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLnVwZGF0ZVRoZUdyb3VwTWVzc2FnZSh7IG1zZywgdXBkYXRlcywgcm9sbERhdGEgfSlcbiAgICB9XG4gICAgZm9yIChjb25zdCB1c2VySWQgaW4gcm9sbHNCeVVzZXIpIHtcbiAgICAgIGlmICh1c2VySWQgIT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICB0eXBlOiAnZ3JvdXAtbWVzc2FnZS1yb2xsJyxcbiAgICAgICAgICBsaXN0ZW5lcjogdXNlcklkLFxuICAgICAgICAgIG1lc3NhZ2VJZDogbXNnLmlkLFxuICAgICAgICAgIHJvbGxzOiByb2xsc0J5VXNlclt1c2VySWRdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocm9sbHNCeVVzZXIsIGdhbWUudXNlci5pZCkpIHtcbiAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UucGVyZm9ybU15Um9sbHMoe1xuICAgICAgICBtc2csXG4gICAgICAgIHJvbGxzOiByb2xsc0J5VXNlcltnYW1lLnVzZXIuaWRdXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgaXNVc2VyQWN0aXZlICh7IHdoaWNoLCBtc2cgfSkge1xuICAgIGlmIChtc2cuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGxpbmcgPz8gZmFsc2UpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBnYW1lLnVzZXJzLmdldChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbGluZylcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCAhdXNlciB8fCAhdXNlci5hY3RpdmUpIHtcbiAgICAgICAgY29uc3QgdXBkYXRlcyA9IHtcbiAgICAgICAgICBbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5yb2xsU3RhdHVzZXMuJyArIHdoaWNoICsgJy5yb2xsaW5nJ106IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS51cGRhdGVUaGVHcm91cE1lc3NhZ2UoeyBtc2csIHVwZGF0ZXMgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBnbUlkID0gQ29DN1V0aWxpdGllcy5nZXRBbklkRm9yR20oKVxuICAgICAgICAgIGlmIChnbUlkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyOiBnbUlkLFxuICAgICAgICAgICAgICB0eXBlOiAnZ3JvdXAtbWVzc2FnZS11cGRhdGUnLFxuICAgICAgICAgICAgICBtZXNzYWdlSWQ6IG1zZy5pZCxcbiAgICAgICAgICAgICAgdXBkYXRlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbWVzc2FnZUlkID0gYnV0dG9uLmNsb3Nlc3QoJ2xpLmNoYXQtbWVzc2FnZScpPy5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IGtleSA9IGJ1dHRvbi5kYXRhc2V0LmtleVxuICAgIGxldCB2YWx1ZSA9IGJ1dHRvbi5kYXRhc2V0LnZhbHVlXG4gICAgaWYgKG1lc3NhZ2VJZCAmJiBrZXkpIHtcbiAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3Qtb25seS1nbScpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IG1zZyA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIGlmICh0eXBlb2YgbXNnLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXT8uW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG1zZy5jYW5Vc2VyTW9kaWZ5KGdhbWUudXNlciwgJ3VwZGF0ZScpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdmFsdWUgPSAhbXNnLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXVtrZXldXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXBkYXRlcyA9IHtcbiAgICAgICAgICBbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS4nICsga2V5XTogdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgJ2FkdmFudGFnZURlZmVuZGVyJzpcbiAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5hZHZhbnRhZ2VBdHRhY2tlciddID0gIXZhbHVlXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2FkdmFudGFnZUF0dGFja2VyJzpcbiAgICAgICAgICAgIHVwZGF0ZXNbJ2ZsYWdzLkNvQzcuZ3JvdXAtbWVzc2FnZS5hZHZhbnRhZ2VEZWZlbmRlciddID0gIXZhbHVlXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlR3JvdXBNZXNzYWdlKHsgbXNnLCB1cGRhdGVzIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbWVzc2FnZUlkID0gYnV0dG9uLmNsb3Nlc3QoJ2xpLmNoYXQtbWVzc2FnZScpPy5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHdoaWNoID0gYnV0dG9uLmRhdGFzZXQud2hpY2hcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBtc2cgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICBpZiAodHlwZW9mIG1zZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aGljaCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LnJvbGxTdGF0dXNlc1t3aGljaF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbC5zcGxpdCgnIycpWzBdKVxuICAgICAgICAgIGlmICghYWN0b3IgfHwgIWFjdG9yLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JOb0FjdG9yUGVybWlzc2lvbicsIHsgbG9jYWxpemU6IHRydWUgfSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSAnaW1wYXRpZW50LXJvbGwnOlxuICAgICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLmlzVXNlckFjdGl2ZSh7XG4gICAgICAgICAgICAgICAgd2hpY2gsXG4gICAgICAgICAgICAgICAgbXNnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdub3JtYWwtcm9sbCc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UucGVyZm9ybU15Um9sbHMoe1xuICAgICAgICAgICAgICAgIG1zZyxcbiAgICAgICAgICAgICAgICByb2xsczogeyBbd2hpY2hdOiBtc2cuZmxhZ3MuQ29DNz8uWydncm91cC1tZXNzYWdlJ10ucm9sbFN0YXR1c2VzW3doaWNoXS5yb2xsIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3VzZS1sdWNrJzpcbiAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5zcGVuZE15THVjayh7XG4gICAgICAgICAgICAgICAgd2hpY2gsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGJ1dHRvbi5kYXRhc2V0LmluZGV4LFxuICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgbXNnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdyZW1vdmUtcm9sbCc6XG4gICAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UucmVtb3ZlUm9sbCh7XG4gICAgICAgICAgICAgICAgd2hpY2gsXG4gICAgICAgICAgICAgICAgbXNnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdwdXNoJzpcbiAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5wdXNoTXlSb2xsKHtcbiAgICAgICAgICAgICAgICB3aGljaCxcbiAgICAgICAgICAgICAgICBtc2dcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1zZy5mbGFncz8uQ29DNz8uWydncm91cC1tZXNzYWdlJ10/LnJvbGxTdGF0dXNlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBsZXQgb2theSA9IGZhbHNlXG4gICAgICAgICAgZm9yIChjb25zdCB3aGljaCBpbiBtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlcykge1xuICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnJvbGxTdGF0dXNlc1t3aGljaF0ucm9sbC5zcGxpdCgnIycpWzBdKVxuICAgICAgICAgICAgaWYgKGFjdG9yLmNhblVzZXJNb2RpZnkoZ2FtZS51c2VyLCAndXBkYXRlJykpIHtcbiAgICAgICAgICAgICAgb2theSA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFva2F5KSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdDb0M3LkVycm9yTm9BY3RvclBlcm1pc3Npb24nLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ3JvbGwtb25jZSc6XG4gICAgICAgICAgICAgIGlmIChtc2cuZmxhZ3MuQ29DN1snZ3JvdXAtbWVzc2FnZSddLnR5cGUgPT09ICdjb21iaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVzID0ge31cbiAgICAgICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1Db21iaW5lZFJvbGwoeyBtc2csIHVwZGF0ZXMgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAndG9nZ2xlJzpcbiAgICAgICAgICAgICAgQ29DN0dyb3VwTWVzc2FnZS5fb25Ub2dnbGUoZXZlbnQpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJlbmRlckNoYXRNZXNzYWdlIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBjYW5Nb2RpZnkgPSB7XG4gICAgICBnbTogZ2FtZS51c2VyLmlzR01cbiAgICB9XG4gICAgZm9yIChjb25zdCB3aGljaCBpbiBhcHAuZmxhZ3M/LkNvQzc/LlsnZ3JvdXAtbWVzc2FnZSddPy5yb2xsU3RhdHVzZXMpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQoYXBwLmZsYWdzLkNvQzdbJ2dyb3VwLW1lc3NhZ2UnXS5yb2xsU3RhdHVzZXNbd2hpY2hdLnJvbGwuc3BsaXQoJyMnKVswXSlcbiAgICAgIGNhbk1vZGlmeVt3aGljaF0gPSBhY3Rvcj8uY2FuVXNlck1vZGlmeShnYW1lLnVzZXIsICd1cGRhdGUnKSA/PyBmYWxzZVxuICAgIH1cbiAgICBjYW5Nb2RpZnkuYW55ID0gT2JqZWN0LnZhbHVlcyhjYW5Nb2RpZnkpLmZpbHRlcihiID0+IGIpLmxlbmd0aCA+IDBcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjYW5Nb2RpZnkpIHtcbiAgICAgIGlmICghY2FuTW9kaWZ5W2tleV0pIHtcbiAgICAgICAgaHRtbC5maW5kKCcudmlzaWJsZS1vbmx5LScgKyBrZXkpLnJlbW92ZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sLmZpbmQoJy5oaWRkZW4tb25seS0nICsga2V5KS5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cbiAgICBodG1sLm9uKCdjbGljaycsICcucm9sbC1jYXJkLXYyIGJ1dHRvbjpub3QoLnRvZ2dsZS1zd2l0Y2gpJywgQ29DN0dyb3VwTWVzc2FnZS5fb25DbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5yb2xsLWNhcmQtdjIgYTpub3QoLnRvZ2dsZS1saW5rKScsIENvQzdHcm91cE1lc3NhZ2UuX29uQ2xpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcucm9sbC1jYXJkLXYyIGJ1dHRvbi50b2dnbGUtc3dpdGNoJywgQ29DN0dyb3VwTWVzc2FnZS5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcucm9sbC1jYXJkLXYyIGEudG9nZ2xlLWxpbmsnLCBDb0M3R3JvdXBNZXNzYWdlLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEFjdG9yIChpZGVudGlmaWVyKSB7XG4gICAgaWYgKGlkZW50aWZpZXIubWF0Y2goL15hXFwuLykpIHtcbiAgICAgIHJldHVybiAoKGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQoaWRlbnRpZmllcikpPy5bMF0pID8/IG51bGxcbiAgICB9XG4gICAgaWYgKGlkZW50aWZpZXIuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHJldHVybiBhd2FpdCBmcm9tVXVpZChpZGVudGlmaWVyKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGlkZW50aWZpZXIpID8/IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwYXJzZVJvbGxzICh7IHJvbGwsIHF1aWNrID0gdHJ1ZSwgZGVmYXVsdFV1aWQgPSAnJyB9KSB7XG4gICAgY29uc3QgbWF0Y2ggPSByb2xsLm1hdGNoKC9eKD88YT5bXiNdKyMpPyg/PHQ+YXR0cmlidXRlfGNoYXJhY3RlcmlzdGljfGl0ZW18c2tpbGwpIyg/PGs+W14jXSspKCMoPzxtPi4qKSk/JC8pXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBtb2RpZmllcnMgPSAobWF0Y2guZ3JvdXBzLm0gPz8gJycpLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyMnKVxuICAgICAgY29uc3QgYm9udXMgPSBwYXJzZUludChtb2RpZmllcnMuZmluZChtID0+IG0ubWF0Y2goL15bKy1dXFxkKyQvKSkgPz8gMCwgMTApXG4gICAgICBjb25zdCBkaWZmaWN1bHR5ID0gbW9kaWZpZXJzLmZpbmQobSA9PiBtLm1hdGNoKC9eXFxkKyQvKSlcbiAgICAgIGNvbnN0IHB1c2hpbmcgPSBtb2RpZmllcnMuZmlsdGVyKG0gPT4gbSA9PT0gJ3AnKS5sZW5ndGggPiAwXG4gICAgICAvLyBjb25zdCBhdHRhY2tlciA9IG1vZGlmaWVycy5maWx0ZXIobSA9PiBtID09PSAneCcpLmxlbmd0aCA+IDAgLy8gTllJXG4gICAgICAvLyBjb25zdCBkZWZlbmRlciA9IG1vZGlmaWVycy5maWx0ZXIobSA9PiBtID09PSAnbycpLmxlbmd0aCA+IDAgLy8gTllJXG4gICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgdHlwZTogbWF0Y2guZ3JvdXBzLnQsXG4gICAgICAgIGtleTogbWF0Y2guZ3JvdXBzLmssXG4gICAgICAgIGJvbnVzLFxuICAgICAgICBkaWZmaWN1bHR5OiAoKGRpZmZpY3VsdHkgPz8gJycpLnRvU3RyaW5nKCkgPT09ICcwJyA/IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA6IChkaWZmaWN1bHR5ID8gcGFyc2VJbnQoZGlmZmljdWx0eSwgMTApIDogKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nID8gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSkpLFxuICAgICAgICBwdXNoaW5nXG4gICAgICB9XG4gICAgICBpZiAoIW1hdGNoLmdyb3Vwcy5hICYmIGRlZmF1bHRVdWlkICYmIGRlZmF1bHRVdWlkICE9PSAnJykge1xuICAgICAgICBtYXRjaC5ncm91cHMuYSA9IGRlZmF1bHRVdWlkICsgJyMnXG4gICAgICB9XG4gICAgICBpZiAobWF0Y2guZ3JvdXBzLmEpIHtcbiAgICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3R3JvdXBNZXNzYWdlLmdldEFjdG9yKG1hdGNoLmdyb3Vwcy5hLnN1YnN0cigwLCBtYXRjaC5ncm91cHMuYS5sZW5ndGggLSAxKSlcbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgICAgcm9sbERhdGEuYWN0b3IgPSBhY3RvclxuICAgICAgICByb2xsRGF0YS5hdXRvUm9sbCA9IGdhbWUudXNlcnMuZmlsdGVyKHUgPT4gIXUuaXNHTSAmJiByb2xsRGF0YS5hY3Rvci5jYW5Vc2VyTW9kaWZ5KHUsICd1cGRhdGUnKSkubWFwKHUgPT4geyByZXR1cm4geyBpZDogdS5pZCwgYWN0aXZlOiB1LmFjdGl2ZSB9IH0pXG4gICAgICAgIGlmIChyb2xsRGF0YS5hdXRvUm9sbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSByb2xsRGF0YS5hdXRvUm9sbC5maWx0ZXIoZCA9PiBkLmFjdGl2ZSkubWFwKGQgPT4gZC5pZClcbiAgICAgICAgICBpZiAocm9sbERhdGEuYXV0b1JvbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByb2xsRGF0YS5hdXRvUm9sbCA9IFsncHJldmVudCcsICdyb2xsJ11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQWN0b3JQaWNrZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuICAgICAgICByb2xsRGF0YS5hY3RvciA9IGFjdG9yXG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICByb2xsRGF0YS5hdXRvUm9sbCA9IFtnYW1lLnVzZXIuaWRdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm9sbERhdGEuYXV0b1JvbGwgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+ICF1LmlzR00gJiYgcm9sbERhdGEuYWN0b3IuY2FuVXNlck1vZGlmeSh1LCAndXBkYXRlJykpLm1hcCh1ID0+IHsgcmV0dXJuIHsgaWQ6IHUuaWQsIGFjdGl2ZTogdS5hY3RpdmUgfSB9KVxuICAgICAgICAgIGlmIChyb2xsRGF0YS5hdXRvUm9sbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByb2xsRGF0YS5hdXRvUm9sbCA9IHJvbGxEYXRhLmF1dG9Sb2xsLmZpbHRlcihkID0+IGQuYWN0aXZlKS5tYXAoZCA9PiBkLmlkKVxuICAgICAgICAgICAgaWYgKHJvbGxEYXRhLmF1dG9Sb2xsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICByb2xsRGF0YS5hdXRvUm9sbCA9IFsncHJldmVudCcsICdyb2xsJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhLnJvbGwgPSByb2xsRGF0YS5hY3Rvci51dWlkICsgJyMnICsgcm9sbERhdGEudHlwZSArICcjJyArIHJvbGxEYXRhLmtleSArIChyb2xsRGF0YS5ib251cyA8IDAgPyAnIycgKyByb2xsRGF0YS5ib251cyA6IChyb2xsRGF0YS5ib251cyA+IDAgPyAnIysnICsgcm9sbERhdGEuYm9udXMgOiAnJykpICsgKGRpZmZpY3VsdHkgPT09IDAgPyAnIzAnIDogKGRpZmZpY3VsdHkgPyAnIycgKyBwYXJzZUludChkaWZmaWN1bHR5LCAxMCkgOiAnJykpXG4gICAgICByb2xsRGF0YS5wb3J0cmFpdCA9IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci50ZXh0dXJlLnNyYyA6IHJvbGxEYXRhLmFjdG9yLnBvcnRyYWl0KVxuICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gJy0nXG4gICAgICByb2xsRGF0YS5mdWxsTmFtZSA9ICctJ1xuICAgICAgc3dpdGNoIChyb2xsRGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgICByb2xsRGF0YS5zaG9ydE5hbWUgPSBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMocm9sbERhdGEua2V5KT8uc2hvcnQgPz8gJy0nXG4gICAgICAgICAgcm9sbERhdGEuZnVsbE5hbWUgPSBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMocm9sbERhdGEua2V5KT8ubGFiZWwgPz8gJy0nXG4gICAgICAgICAgcm9sbERhdGEucGVyY2VudCA9IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci5hY3RvciA6IHJvbGxEYXRhLmFjdG9yKS5zeXN0ZW0/LmNoYXJhY3RlcmlzdGljc1tyb2xsRGF0YS5rZXldPy52YWx1ZSA/PyAxXG4gICAgICAgICAgaWYgKHJvbGxEYXRhLnNob3J0TmFtZSA9PT0gJy0nKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICAgIHN3aXRjaCAocm9sbERhdGEua2V5KSB7XG4gICAgICAgICAgICBjYXNlICdsY2snOlxuICAgICAgICAgICAgICByb2xsRGF0YS5zaG9ydE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmZ1bGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnc2FuJzpcbiAgICAgICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmZ1bGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgICByb2xsRGF0YS5wZXJjZW50ID0gKHJvbGxEYXRhLmFjdG9yIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCA/IHJvbGxEYXRhLmFjdG9yLmFjdG9yIDogcm9sbERhdGEuYWN0b3IpLnN5c3RlbT8uYXR0cmlic1tyb2xsRGF0YS5rZXldPy52YWx1ZSA/PyAxXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIGlmICghcXVpY2spIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxscyA9IGF3YWl0IChyb2xsRGF0YS5hY3RvciBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgPyByb2xsRGF0YS5hY3Rvci5hY3RvciA6IHJvbGxEYXRhLmFjdG9yKS5nZXRJdGVtT3JBZGQocm9sbERhdGEua2V5LCAnc2tpbGwnKVxuICAgICAgICAgICAgaWYgKHNraWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcm9sbERhdGEuc2tpbGwgPSBza2lsbHNbMF1cbiAgICAgICAgICAgICAgcm9sbERhdGEuc2hvcnROYW1lID0gc2tpbGxzWzBdLnNob3J0TmFtZVxuICAgICAgICAgICAgICByb2xsRGF0YS5mdWxsTmFtZSA9IHNraWxsc1swXS5zaG9ydE5hbWVcbiAgICAgICAgICAgICAgcm9sbERhdGEucHVzaGFibGUgPSAoc2tpbGxzWzBdLnN5c3RlbS5wcm9wZXJ0aWVzPy5wdXNoID8/IGZhbHNlKVxuICAgICAgICAgICAgICByb2xsRGF0YS5wZXJjZW50ID0gc2tpbGxzWzBdLnZhbHVlXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmlzTWFuZXV2ZXIgPSBza2lsbHNbMF0uaXNEb2RnZVxuICAgICAgICAgICAgICByb2xsRGF0YS5pc0RvZGdlID0gc2tpbGxzWzBdLmlzRG9kZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgaWYgKCFxdWljaykge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCAocm9sbERhdGEuYWN0b3IgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ID8gcm9sbERhdGEuYWN0b3IuYWN0b3IgOiByb2xsRGF0YS5hY3RvcikuZ2V0SXRlbU9yQWRkKHJvbGxEYXRhLmtleSwgJ3dlYXBvbicpXG4gICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJvbGxEYXRhLml0ZW0gPSBpdGVtc1swXVxuICAgICAgICAgICAgICByb2xsRGF0YS5zaG9ydE5hbWUgPSBpdGVtc1swXS5zaG9ydE5hbWVcbiAgICAgICAgICAgICAgcm9sbERhdGEuZnVsbE5hbWUgPSBpdGVtc1swXS5zaG9ydE5hbWVcbiAgICAgICAgICAgICAgcm9sbERhdGEuaXNNYW5ldXZlciA9IGl0ZW1zWzBdLnN5c3RlbS5wcm9wZXJ0aWVzPy5tbnZyID8/IGZhbHNlXG4gICAgICAgICAgICAgIHJvbGxEYXRhLmlzV2VhcG9uID0gdHJ1ZVxuICAgICAgICAgICAgICBjb25zdCBza2lsbElkID0gaXRlbXNbMF0uc3lzdGVtLnNraWxsW2l0ZW1zWzBdLnVzZXNBbHRlcm5hdGl2ZVNraWxsID8gJ2FsdGVybmF0aXYnIDogJ21haW4nXS5pZFxuICAgICAgICAgICAgICBpZiAoc2tpbGxJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gKHJvbGxEYXRhLmFjdG9yIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCA/IHJvbGxEYXRhLmFjdG9yLmFjdG9yIDogcm9sbERhdGEuYWN0b3IpLml0ZW1zLmZpbmQoZCA9PiBkLmlkID09PSBza2lsbElkKVxuICAgICAgICAgICAgICAgIHJvbGxEYXRhLnRhZ3MgPSBbc2tpbGwubmFtZV1cbiAgICAgICAgICAgICAgICByb2xsRGF0YS5wZXJjZW50ID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgICByb2xsRGF0YS5wdXNoYWJsZSA9IChza2lsbC5zeXN0ZW0ucHJvcGVydGllcz8ucHVzaCA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJvbGxEYXRhXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0VGVtcGxhdGVQYXRoICh0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvbWVzc2FnZXMvb3Bwb3NlZC5oYnMnXG4gICAgICBjYXNlICdjb21iaW5lZGFsbCc6XG4gICAgICBjYXNlICdjb21iaW5lZGFueSc6XG4gICAgICBjYXNlICdjb21iaW5lZCc6XG4gICAgICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L21lc3NhZ2VzL2NvbWJpbmVkLmhicydcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVHcm91cE1lc3NhZ2UgKG9wdGlvbnMpIHtcbiAgICAvLyBUT0RPOiBBZGQgYWRkaXRpb25hbCByb2xsc1xuICAgIC8vIFRPRE86IFBoeXNpY2FsIEh1bWFuIExpbWl0c1xuICAgIGlmICghQ29DN0dyb3VwTWVzc2FnZS5nZXRUZW1wbGF0ZVBhdGgob3B0aW9ucy50eXBlKSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBsZXQgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICB0eXBlOiAnJyxcbiAgICAgIGRlbnlQdXNoOiBmYWxzZSxcbiAgICAgIHNob3dDb21wbGV0ZWRSb2xsczogdHJ1ZSxcbiAgICAgIGFsbFJvbGxzQ29tcGxldGVkOiBmYWxzZSxcbiAgICAgIGlzQ29tYmF0OiBmYWxzZSxcbiAgICAgIGlzRWRpdGFibGU6IHRydWUsXG4gICAgICByb2xsU3RhdHVzZXM6IHt9LFxuICAgICAgcm9sbE9yZGVyOiBbXVxuICAgIH0sIG9wdGlvbnMpXG5cbiAgICBzd2l0Y2ggKGNvbmZpZy50eXBlKSB7XG4gICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgZGVueVB1c2g6IHRydWUsXG4gICAgICAgICAgaXNUaWU6IGZhbHNlLFxuICAgICAgICAgIG5lZWRzVGllQnJlYWtlcjogZmFsc2UsXG4gICAgICAgICAgYWR2YW50YWdlQXR0YWNrZXI6IGZhbHNlLFxuICAgICAgICAgIGFkdmFudGFnZURlZmVuZGVyOiBmYWxzZSxcbiAgICAgICAgICBkZWZlbmRlcklzRG9kZ2luZzogZmFsc2UsXG4gICAgICAgICAgd2lubmVyUm9sbHNEYW1hZ2U6IGZhbHNlXG4gICAgICAgIH0sIGNvbmZpZylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NvbWJpbmVkYWxsJzpcbiAgICAgIGNhc2UgJ2NvbWJpbmVkYW55JzpcbiAgICAgIGNhc2UgJ2NvbWJpbmVkJzpcbiAgICAgICAgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgY29tYmluZWQ6IChjb25maWcudHlwZSA9PT0gJ2NvbWJpbmVkYWxsJyA/ICdhbGwnIDogKGNvbmZpZy50eXBlID09PSAnY29tYmluZWRhbnknID8gJ2FueScgOiAnJykpLFxuICAgICAgICAgIGFjdG9yVXVpZDogJycsXG4gICAgICAgICAgaXNTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgIHdhc1B1c2hlZDogZmFsc2VcbiAgICAgICAgfSwgY29uZmlnKVxuICAgICAgICBjb25maWcudHlwZSA9ICdjb21iaW5lZCdcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjb25zdCByb2xsRGF0YSA9IHt9XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGZvciAoY29uc3Qgb2Zmc2V0IGluIG9wdGlvbnMucm9sbFJlcXVpc2l0ZXMpIHtcbiAgICAgIGNvbnN0IHdoaWNoID0gJ3InICsgb2Zmc2V0XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0dyb3VwTWVzc2FnZS5wYXJzZVJvbGxzKHsgcm9sbDogb3B0aW9ucy5yb2xsUmVxdWlzaXRlc1tvZmZzZXRdLCBxdWljazogdHJ1ZSwgZGVmYXVsdFV1aWQ6IGNvbmZpZy5hY3RvclV1aWQgPz8gJycgfSlcbiAgICAgIGlmICghcm9sbCkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnY29tYmluZWQnKSB7XG4gICAgICAgIGlmIChjb25maWcuYWN0b3JVdWlkID09PSAnJyB8fCBjb25maWcuYWN0b3JVdWlkID09PSByb2xsLmFjdG9yLnV1aWQpIHtcbiAgICAgICAgICBjb25maWcuYWN0b3JVdWlkID0gcm9sbC5hY3Rvci51dWlkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQ29DNy5FcnJvckNvbWJpbmVkUm9sbHNSZXF1aXJlU2luZ2xlQWN0b3InLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcm9sbERhdGFbd2hpY2hdID0gcm9sbFxuICAgICAgY29uZmlnLnJvbGxTdGF0dXNlc1t3aGljaF0gPSB7XG4gICAgICAgIHJvbGw6IHJvbGwucm9sbCxcbiAgICAgICAgcm9sbGFibGU6IChjb25maWcudHlwZSAhPT0gJ2NvbWJpbmVkJyksXG4gICAgICAgIHJvbGxpbmc6IGZhbHNlLFxuICAgICAgICBzaG9ydE5hbWU6IHJvbGwuc2hvcnROYW1lLFxuICAgICAgICBmdWxsTmFtZTogcm9sbC5mdWxsTmFtZSxcbiAgICAgICAgcGVyY2VudDogcm9sbC5wZXJjZW50LFxuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgaXNNYW5ldXZlcjogZmFsc2UsXG4gICAgICAgIGlzRG9kZ2luZzogZmFsc2UsXG4gICAgICAgIGlzV2VhcG9uOiBmYWxzZVxuICAgICAgfVxuICAgICAgc3dpdGNoIChjb25maWcudHlwZSkge1xuICAgICAgICBjYXNlICdvcHBvc2VkJzpcbiAgICAgICAgICBjb25maWcucm9sbFN0YXR1c2VzW3doaWNoXSA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgaXNBdHRhY2tlcjogY291bnQgPT09IDAsIC8vIEN1cnJlbnRseSBvbmx5IDF2MSBhdHRhY2tlciBmaXJzdFxuICAgICAgICAgICAgaXNXaW5uZXI6IGZhbHNlLFxuICAgICAgICAgICAgaXNUaWU6IGZhbHNlXG4gICAgICAgICAgfSwgY29uZmlnLnJvbGxTdGF0dXNlc1t3aGljaF0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY29tYmluZWQnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjb25maWcucm9sbE9yZGVyLnB1c2god2hpY2gpXG4gICAgICBjb3VudCsrXG4gICAgfVxuICAgIGlmIChjb25maWcudHlwZSA9PT0gJ29wcG9zZWQnICYmIE9iamVjdC5rZXlzKHJvbGxEYXRhKS5sZW5ndGggIT09IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JPcHBvc2VkUm9sbHNMaW1pdGVkVG9Ud29BY3RvcnMnLCB7IGxvY2FsaXplOiB0cnVlIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBkZWxldGUgY29uZmlnLnJvbGxSZXF1aXNpdGVzXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICByZXR1cm4gQ29DN0dyb3VwTWVzc2FnZS5uZXdHcm91cE1lc3NhZ2UoeyByb2xsRGF0YSwgb3B0aW9uczogY29uZmlnIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGdtSWQgPSBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgICBpZiAoZ21JZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gRXJyb3IgbWVzc2FnZSBzaG93biBpbiBDb0M3VXRpbGl0aWVzLmdldEFuSWRGb3JHbSgpXG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHsgdHlwZTogJ2dyb3VwLW1lc3NhZ2UtbmV3JywgbGlzdGVuZXI6IGdtSWQsIG9wdGlvbnM6IGNvbmZpZyB9KVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICghdGhpcy5yb2xsTW9kZSkgcmV0dXJuIG51bGxcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5pdGVtSWQpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbVxuICB9XG5cbiAgZ2V0IHRhcmdldGVkVG9rZW5zICgpIHtcbiAgICByZXR1cm4gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHJldHVybiB0aGlzLnRhcmdldFRva2VuXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBhIHRhcmdldEtleSB3YXMgcHJvdmlkZWQgdHJ5IHRvIGZpbmQgYSB0b2tlbiB3aXRoIHRoYXQga2V5IGFuZCB1c2UgaXQuXG4gICAqIElmIG5vdCB0YXJnZXRLZXkgcHJvdmlkZWQgcmV0dXJuIHRoZSBmaXJzdCB0YXJnZXQuXG4gICAqL1xuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgIGlmICh0aGlzLl90YXJnZXRLZXkpIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLl90YXJnZXRLZXkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IHRoaXMudGFyZ2V0ZWRUb2tlbnMucG9wKClcbiAgICAgICAgaWYgKHRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICAgICAgdGhpcy5fdGFyZ2V0S2V5ID0gYCR7dGhpcy5fdGFyZ2V0VG9rZW4uc2NlbmUuaWR9LiR7dGhpcy5fdGFyZ2V0VG9rZW4uaWR9YFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRUb2tlblxuICB9XG5cbiAgZ2V0IHRhcmdldEFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldEFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgdGhpcy5fdGFyZ2V0QWN0b3IgPSB0aGlzLnRhcmdldFRva2VuLmFjdG9yXG4gICAgICBlbHNlIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBhc3luYyBzYXkgKG1lc3NhZ2UsIGZsYXZvciA9IG51bGwpIHtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgICBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW4uZG9jdW1lbnRcbiAgICAgIH1cbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgICkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpIC8vIENoYW5nZSBmb3IgdXNlclxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGZvdW5kcnksIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsLCBjaGF0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5mdW5jdGlvbiByZXBsYWNlciAoa2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ19fJykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkIC8vIHJlbW92ZSBmcm9tIHJlc3VsdFxuICB9XG5cbiAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJ11cbiAgaWYgKGV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkge1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGNvbnN0IGNoZWNrcyA9IFsnc2FuQ2hlY2snLCAnaW50Q2hlY2snXVxuICBpZiAoY2hlY2tzLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdmFsdWUuSlNPTlJvbGxEYXRhXG4gIH1cblxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbmV4cG9ydCBjbGFzcyBTYW5DaGVja0NhcmQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgc2FuRGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihcbiAgICAgIGFjdG9yS2V5LFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZmFzdEZvcndhcmQgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gQm9vbGVhbihvcHRpb25zLmZhc3RGb3J3YXJkKVxuICAgICAgICA6IGZhbHNlXG4gICAgKVxuICAgIHNhbkRhdGEuc2FuUmVhc29uID0gc2FuRGF0YS5zYW5SZWFzb24gPz8gJydcbiAgICB0aGlzLnNhbkRhdGEgPSBzYW5EYXRhXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIGlmIChzYW5EYXRhLm1vZGlmaWVyICYmICFpc05hTihOdW1iZXIoc2FuRGF0YS5tb2RpZmllcikpKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuTW9kaWZpZXIgPSBOdW1iZXIoc2FuRGF0YS5tb2RpZmllcilcbiAgICB9XG4gICAgaWYgKHNhbkRhdGEuZGlmZmljdWx0eSAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEuZGlmZmljdWx0eSkpKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSA9IE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpXG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSB7fVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLmlzQmxpbmQgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IEJvb2xlYW4odGhpcy5vcHRpb25zLmlzQmxpbmQpXG4gICAgICA6IHN1cGVyLmlzQmxpbmRcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eVxuICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IHRoaXMub3B0aW9ucy5tb2RpZmllclxuICAgICAgOiAwXG4gIH1cblxuICBnZXQgc2FuTG9zc1NvdXJjZSAoKSB7XG4gICAgaWYgKCF0aGlzLnNhbkRhdGEudG9rZW5LZXkpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuc2FuRGF0YS50b2tlbktleSlcbiAgfVxuXG4gIGdldCBpbnZvbHVudGFyeUFjdGlvbiAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgJiZcbiAgICAgICh0aGlzLnNhbkNoZWNrLmlzRmFpbHVyZSB8fCB0aGlzLnNhbkNoZWNrLmlzRnVtYmxlKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgc2FuTG9zc0Zvcm11bGEgKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgaWYgKHRoaXMuc2FuRGF0YS5zYW5NYXggJiYgdGhpcy5zYW5DaGVjay5mYWlsZWQpIHtcbiAgICAgICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1heCkpXG4gICAgICAgICAgPyBOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1heClcbiAgICAgICAgICA6IHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWluICYmIHRoaXMuc2FuQ2hlY2sucGFzc2VkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NaW4pKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NaW4pXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWluXG4gICAgICB9XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3RUb1JlYXNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3Iuc2FuTG9zdFRvUmVhc29uKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pXG4gIH1cblxuICBnZXQgbWF4UG9zc2libGVTYW5Mb3NzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgIClcbiAgfVxuXG4gIGdldCBtYXhTYW5Mb3NzICgpIHtcbiAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5EYXRhLnNhbk1heC50b1N0cmluZygpKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3Iuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pXG4gIH1cblxuICBnZXQgZmlyc3RFbmNvdW50ZXIgKCkge1xuICAgIHJldHVybiAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gIH1cblxuICBnZXQgaXNBY3Rvckxvb3NpbmdTYW4gKCkge1xuICAgIC8vIE5vIHNhbiBsb3NzIGR1cmluZyBib3V0IG9mIG1hZC5cbiAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gVGhlIHNhbiBsb3NzIGlzIGEgMFxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcblxuICAgIGlmIChcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24gJiZcbiAgICAgIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApID09PSAwXG4gICAgKSB7XG4gICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJvdXREdXJhdGlvblRleHQgKCkge1xuICAgIGlmICh0aGlzLmJvdXREdXJhdGlvbikge1xuICAgICAgaWYgKHRoaXMuYm91dFJlYWxUaW1lKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMubXl0aG9zR2Fpbikge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMubXl0aG9zR2FpblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGFkdmFuY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZV0gPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVNhbkxvc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzUmVhbFRpbWUnOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NTdW1tYXJ5Jzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSlcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogb2xkVmFsdWUgKyBhbW91bnRHYWluZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IGFtb3VudEdhaW5lZFxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJ5cGFzc1JvbGxTYW4gKCkge1xuICAgIHRoaXMuaXNCeXBhc3NlZCA9IHRydWVcbiAgICB0aGlzLnNhbkNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgdGhpcy5zYW5DaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICB0aGlzLnNhbkNoZWNrLmF0dHJpYnV0ZSA9ICdzYW4nXG4gICAgdGhpcy5zYW5DaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5zYW5EaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuc2FuQ2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLnNhbkNoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLnN0YXRlLnNhblJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnN0YXRlLmludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkID0gdGhpcy5zYW5DaGVjay5wYXNzZWRcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pZ25vcmVTYW5DaGVjayA9IHRydWVcbiAgICB0aGlzLnByZUhhcmRlbmVkU2FuTG9zcyA9IHRoaXMub3JpZ2luYWxTYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYXBwbHlNeXRob3NIYXJkZW5lZCh0aGlzLnByZUhhcmRlbmVkU2FuTG9zcylcbiAgfVxuXG4gIGFwcGx5TXl0aG9zSGFyZGVuZWQgKHNhbkxvc3MpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci51c2VNeXRob3NIYXJkZW5lZCA/IE1hdGguZmxvb3Ioc2FuTG9zcyAvIDIpIDogc2FuTG9zc1xuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnByZUhhcmRlbmVkU2FuTG9zcyA9IDBcbiAgICAgIHRoaXMub3JpZ2luYWxTYW5Mb3NzID0gMFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuc2FuTG9zc0Zvcm11bGEgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLm9yaWdpbmFsU2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgICApXG4gICAgICAgIHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzID0gdGhpcy5vcmlnaW5hbFNhbkxvc3NcbiAgICAgICAgaWYgKHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzID4gbWF4KSB7XG4gICAgICAgICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSBtYXhcbiAgICAgICAgICB0aGlzLnN0YXRlLmxpbWl0ZWRMb3NzVG9DcmVhdHVyZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSB0aGlzLm9yaWdpbmFsU2FuTG9zc1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5zYW5DaGVjay5pc0Z1bWJsZSkge1xuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5vcmlnaW5hbFNhbkxvc3MgPSBuZXcgUm9sbCh0aGlzLnNhbkRhdGEuc2FuTWF4KVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgICAgdGhpcy5vcmlnaW5hbFNhbkxvc3NcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IG1pbiA9IG5ldyBSb2xsKHRoaXMuc2FuTG9zc0Zvcm11bGEpWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1pbmltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgKVxuICAgICAgaWYgKG1pbiA+PSBtYXgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLnByZUhhcmRlbmVkU2FuTG9zcyA9IHRoaXMub3JpZ2luYWxTYW5Mb3NzID0gdGhpcy5tYXhcbiAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5hcHBseU15dGhvc0hhcmRlbmVkKHRoaXMucHJlSGFyZGVuZWRTYW5Mb3NzKVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbkxvc3MgKCkge1xuICAgIHRoaXMuc2FuTG9zc1JvbGwgPSBuZXcgUm9sbChgJHt0aGlzLnNhbkxvc3NGb3JtdWxhfWApXG5cbiAgICBhd2FpdCB0aGlzLnNhbkxvc3NSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5zYW5Mb3NzUm9sbClcblxuICAgIGNvbnN0IG1heCA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICApXG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbC50b3RhbCA+IG1heCkge1xuICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5vcmlnaW5hbFNhbkxvc3MgPSB0aGlzLnNhbkxvc3NSb2xsLnRvdGFsXG4gICAgdGhpcy5wcmVIYXJkZW5lZFNhbkxvc3MgPSBNYXRoLm1pbih0aGlzLm9yaWdpbmFsU2FuTG9zcywgbWF4KVxuICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYXBwbHlNeXRob3NIYXJkZW5lZCh0aGlzLnByZUhhcmRlbmVkU2FuTG9zcylcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgdGhpcy5zYW5Mb3NzKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA+IDApIHRoaXMuc3RhdGUuYWN0b3JMb3N0U2FuID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA8IDUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci5kYWlseVNhbkxvc3MgPj0gdGhpcy5hY3Rvci5kYWlseVNhbkxpbWl0KSB7XG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEludCAoKSB7XG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuaW50Q2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5pbnRDaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdpbnQnXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5pbnREaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuaW50Q2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmludE1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pbnRDaGVjay5wYXNzZWQgfHwgdGhpcy5zdGF0ZS5hbHJlYWR5SW5zYW5lKSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmlnZ2VySW5zYW5pdHkgKCkge1xuICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gIH1cblxuICBhc3luYyBjbGVhclNhbkxvc3NSZWFzb24gKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0UmVhc29uU2FuTG9zcyh0aGlzLnNhbkRhdGEuc2FuUmVhc29uLCAwKVxuICAgIGlmICghdGhpcy5zYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgLy8gQXR0YWNoZSB0aGUgc2FuQ2hlY2sgcmVzdWx0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgdGhpcy5fX2lubGluZVNhbkNoZWNrID0gdGhpcy5zYW5DaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbCkge1xuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5zYW5Mb3NzUm9sbClcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcbiAgICAgIHRoaXMuX19pbmxpbmVJbnRDaGVjayA9IHRoaXMuaW50Q2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeSh0aGlzLCByZXBsYWNlcikpXG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKHNhbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMpIHtcbiAgICAgICAgaWYgKHQuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci50b2tlbktleSwgc2FuRGF0YSwge1xuICAgICAgICAgICAgZmFzdEZvcndhcmRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vVGFyZ2V0c1NhbkNoZWNrJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoLi4uYXJncykge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxuICAgIGlmIChjaGF0Q2FyZC5hY3Rvci5oYXNJbmRlZkluc2FuZSkge1xuICAgICAgY2hhdENhcmQuc3RhdGUuYWxyZWFkeUluc2FuZSA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoY2hhdENhcmQuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxuICAgIGF3YWl0IGNoYXRDYXJkLnNheShodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBodG1sQ2FyZCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuXG4gICAgcmV0dXJuIFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sQ2FyZClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuXG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCgpXG4gICAgT2JqZWN0LmFzc2lnbihzYW5DaGVja0NhcmQsIHNhbkNoZWNrQ2FyZERhdGEpXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XG4gICAgICBzYW5DaGVja0NhcmQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5DaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuaW50Q2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbCA9IFJvbGwuZnJvbURhdGEoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3R3JvdXBNZXNzYWdlIH0gZnJvbSAnLi9jb2M3LWdyb3VwLW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBBbGxvdyBmb3IgcGFyc2luZyBvZiBDb0M3IGVsZW1lbnRzIGluIGNoYXQgbWVzc2FnZSBhbmQgc2hlZXRzLlxuICogRm9ybWF0IGlzIDpcbiAqIEBjb2M3LlRZUEVfT0ZfUkVRVUVTVFtPUFRJT05TXXtESVNQTEFZRURfTkFNRX1cbiAqIFRZUEVfT0ZfUkVRVUVTVCA6XG4gKiAtIHNhbmxvc3M6IHRyaWdnZXIgYSBzYW4gY2hlY2ssIHVwb24gZmFpbHVyZSB3aWxsIHByb3Bvc2UgdG8gZGVkdWN0IHRoZSBjb3JyZXNwb25kaW5nIFNBTi5cbiAqIC0gY2hlY2s6IHRyaWdnZXIgYSBjaGVjayBkZXBlbmRpbmcgb24gdGhlIG9wdGlvbnMuXG4gKiAtIGl0ZW06IFRyaWdnZXIgYSB3ZWFwb24gY2hlY2tcbiAqIC0gZWZmZWN0OiBBZGQgYW4gZWZmZWN0XG4gKlxuICogT1BUSU9OUzogW10gPSBvcHRpb25hbFxuICogc2FubG9zczpcbiAqICAgc2FuTWF4OiBtYXggU0FOIGxvc3NcbiAqICAgc2FuTWluOiBtaW4gU0FOIGxvc3NcbiAqICAgc2FuUmVhc29uOiBSZWFzb25cbiAqIGNoZWNrOlxuICogICB0eXBlOiB0eXBlIG9mIGNoZWNrIChjaGFyYWN0ZXJpc3RpYywgc2tpbGwsIGF0dHJpYikuXG4gKiAgIG5hbWU6IG5hbWUgb2YgdGhlIHNraWxsL2NoYXJhY3RlcmlzdGljLlxuICogICBbZGlmZmljdWx0eV06ID8gKGJsaW5kKSwgMCAocmVndWxhciksICsgKGhhcmQpLCArKyAoZXh0cmVtZSksICsrKyAoY3JpdGljYWwpLlxuICogICBbbW9kaWZpZXJdOiAteCAoeCBwZW5hbHR5IGRpY2UpLCAreCAoeCBib251cyBkaWNlKSwgMCAobm8gbW9kaWZpZXIpLlxuICogICBbaWNvbl06IGljb24gdG8gdXNlIChmb250IGF3c29tZSkuXG4gKiAgIFtibGluZF06IHdpbGwgdHJpZ2dlciBhIGJsaW5kIHJvbGwuXG4gKiAgIFtwdXNoaW5nXTogd2lsbCB0cmlnZ2VyIGEgcHVzaGVkIHJvbGxcbiAqXG4gKiBbRElTUExBWUVEX05BTUU6IG5hbWUgdG8gZGlzcGxheS5dXG4gKlxuICogVG8gYWRkL2VkaXQgYSBuZXcgbGluayB1cGRhdGUgdGhlc2Ugc2VjdGlvbnNcbiAqICAgZnJvbURyb3BEYXRhID0+IEFkZCBhbGwgZGVmYXVsdHMgaGVyZVxuICogICBfY3JlYXRlTGluayA9PiBDcmVhdGUgSFRNTCBmcm9tIGRvY3VtZW50IGRhdGFcbiAqICAgX2NyZWF0ZURvY3VtZW50TGluayA9PiBDcmVhdGUgQGxpbmsgZnJvbSBkb2N1bWVudCBkYXRhXG4gKiAgIF9vbkxpbmtBY3RvckNsaWNrID0+IFByb2Nlc3MgbGlua1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0xpbmsge1xuICBzdGF0aWMgZ2V0IENIRUNLX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEVDSzogJ2NoZWNrJyxcbiAgICAgIFNBTkxPU1M6ICdzYW5sb3NzJyxcbiAgICAgIElURU06ICdpdGVtJyxcbiAgICAgIEVGRkVDVDogJ2VmZmVjdCdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IExJTktfVFlQRSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIENIQVJBQ1RFUklTVElDOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgQVRUUklCVVRFOiAnYXR0cmlidXRlJyxcbiAgICAgIFNLSUxMOiAnc2tpbGwnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGluaXQgKCkge1xuICAgIENPTkZJRy5Db0M3TGluayA9IHtcbiAgICAgIGRvY3VtZW50Q2xhc3M6IENvQzdMaW5rXG4gICAgfVxuICAgIGNvbnN0IGJvZHkgPSAkKCdib2R5JylcbiAgICBib2R5Lm9uKCdjbGljaycsICdhLmNvYzctbGluaycsIENvQzdMaW5rLl9vbkxpbmtDbGljaylcbiAgICBib2R5Lm9uKCdkcmFnc3RhcnQnLCAnYS5jb2M3LWxpbmsnLCBldmVudCA9PiBDb0M3TGluay5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuXG4gICAgQ09ORklHLlRleHRFZGl0b3IuZW5yaWNoZXJzLnB1c2goe1xuICAgICAgcGF0dGVybjogbmV3IFJlZ0V4cCgnQChjb2M3KVxcXFwuJyArICcoY2hlY2t8ZWZmZWN0fGl0ZW18c2FubG9zcyknICsgJ1xcXFxbKFteXFxcXFtcXFxcXV0qKD86XFxcXFtbXlxcXFxbXFxcXF1dKig/OlxcXFxbW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSopXFxcXF0nICsgJyg/OnsoW159XSspfSk/JywgJ2dpJyksXG4gICAgICBlbnJpY2hlcjogQ29DN0xpbmsuX2NyZWF0ZUxpbmtcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIF9saW5rRnJvbUV2ZW50IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgaSA9IGEucXVlcnlTZWxlY3RvcignW2RhdGEtbGluay1pY29uXScpXG4gICAgY29uc3QgZGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGEuZGF0YXNldClcblxuICAgIGNvbnN0IG9sZFR5cGUgPSBkYXRhLnR5cGVcblxuICAgIGRhdGEudHlwZSA9ICdDb0M3TGluaydcbiAgICBkYXRhLmljb24gPSBudWxsXG5cbiAgICBpZiAob2xkVHlwZSkge1xuICAgICAgZGF0YS5saW5rVHlwZSA9IG9sZFR5cGVcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLm9iamVjdCAmJlxuICAgICAgKHR5cGVvZiBkYXRhLm9iamVjdCA9PT0gJ3N0cmluZycgfHwgZGF0YS5vYmplY3QgaW5zdGFuY2VvZiBTdHJpbmcpXG4gICAgKSB7XG4gICAgICBkYXRhLm9iamVjdCA9IEpTT04ucGFyc2UoZGF0YS5vYmplY3QpXG4gICAgICAvLyBkYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkVGRkVDVFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGkuZGF0YXNldCAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gIT09ICdmYXMgZmEtZGljZSdcbiAgICApIHtcbiAgICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIH1cbiAgICBkYXRhLmRpc3BsYXlOYW1lID0gYS5kYXRhc2V0LmRpc3BsYXlOYW1lID8gYS5pbm5lclRleHQgOiBudWxsXG4gICAgaWYgKGRhdGEuZGlmZmljdWx0eSkge1xuICAgICAgZGF0YS5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkYXRhLmRpZmZpY3VsdHkpXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgX29uRHJhZ0NvQzdMaW5rIChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0M3TGluay5fbGlua0Zyb21FdmVudChldmVudClcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIG9idGFpbmluZyB0aGUgcmVsZXZhbnQgRG9jdW1lbnQgZnJvbSBkcm9wcGVkIGRhdGEgcHJvdmlkZWQgdmlhIGEgRGF0YVRyYW5zZmVyIGV2ZW50LlxuICAgKiBUaGUgZHJvcHBlZCBkYXRhIGNvdWxkIGhhdmU6XG4gICAqIDEuIEEgZGF0YSBvYmplY3QgZXhwbGljaXRseSBwcm92aWRlZFxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpblxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgVGhlIGRhdGEgb2JqZWN0IGV4dHJhY3RlZCBmcm9tIGEgRGF0YVRyYW5zZmVyIGV2ZW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2hpY2ggYWZmZWN0IGRyb3AgZGF0YSBiZWhhdmlvclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59ICAgVGhlIHJlc29sdmVkIERvY3VtZW50XG4gICAqIEB0aHJvd3MgSWYgYSBEb2N1bWVudCBjb3VsZCBub3QgYmUgcmV0cmlldmVkIGZyb20gdGhlIHByb3ZpZGVkIGRhdGEuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbURyb3BEYXRhIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjbHMgPSBuZXcgQ29DN0xpbmsoKVxuICAgIGNscy5vYmplY3QgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHtcbiAgICAgIHR5cGU6ICdDb0M3TGluaycsXG4gICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSyxcbiAgICAgIGxpbmtUeXBlOiBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwsXG4gICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIsXG4gICAgICBtb2RpZmllcjogMCxcbiAgICAgIG9iamVjdDoge1xuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVmZmVjdE5ldycpLFxuICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgICAgY2hhbmdlczogW11cbiAgICAgIH1cbiAgICB9LCBkYXRhKVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnbmFtZScsICdkaXNwbGF5TmFtZScsICdpY29uJywgJ2lkJywgJ3BhY2snLCAnc2FuTWluJywgJ3Nhbk1heCcsICdzYW5SZWFzb24nXSkge1xuICAgICAgY2xzLm9iamVjdFtrZXldID0gY2xzLm9iamVjdFtrZXldID8/ICcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2xzLm9iamVjdC5vYmplY3QuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNscy5vYmplY3Qub2JqZWN0LmV4dGVybmFsICE9PSAndW5kZWZpbmVkJyAmJiBbJ2h0dHAnLCAnaHR0cHMnXS5pbmNsdWRlcyhjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCkpIHtcbiAgICAgIGNscy5vYmplY3Qub2JqZWN0Lmljb24gPSBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCArICc6Ly8nICsgY2xzLm9iamVjdC5vYmplY3QuaWNvblxuICAgIH1cbiAgICBjbHMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICByZXR1cm4gY2xzXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX2NyZWF0ZUxpbmsgKG1hdGNoKSB7XG4gICAgY29uc3QgbmFtZSA9IG1hdGNoWzRdID8/IHVuZGVmaW5lZFxuICAgIGNvbnN0IG9wdGlvbnMgPSBtYXRjaFszXSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCB0eXBlID0gbWF0Y2hbMl0gPz8gdW5kZWZpbmVkXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluayddLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogdHlwZSB9LFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGJsaW5kOiBmYWxzZSxcbiAgICAgIG5hbWVcbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgIGRhdGEuZWZmZWN0ID0gSlNPTi5wYXJzZShvcHRpb25zKVxuICAgICAgZGF0YS5kYXRhc2V0Lm9iamVjdCA9IG9wdGlvbnNcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5lZmZlY3QuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuZWZmZWN0LmV4dGVybmFsICE9PSAndW5kZWZpbmVkJyAmJiBbJ2h0dHAnLCAnaHR0cHMnXS5pbmNsdWRlcyhkYXRhLmVmZmVjdC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5lZmZlY3QuaWNvbiA9IGRhdGEuZWZmZWN0LmV4dGVybmFsICsgJzovLycgKyBkYXRhLmVmZmVjdC5pY29uXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25zLm1hdGNoQWxsKC9bXixdKy9naSlcbiAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgQXJyYXkuZnJvbShtYXRjaGVzKSkge1xuICAgICAgICBsZXQgW2tleSwgdmFsdWVdID0gbWF0Y2hbMF0uc3BsaXQoJzonKVxuICAgICAgICBpZiAoa2V5ID09PSAnaWNvbicpIHtcbiAgICAgICAgICBkYXRhLmljb24gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2JsaW5kJykge1xuICAgICAgICAgICAgdmFsdWUgPSB0cnVlXG4gICAgICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncHVzaGluZycpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICAgICAgZGF0YS5wdXNoaW5nID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnY29tYmF0Jykge1xuICAgICAgICAgICAgdmFsdWUgPSB0cnVlXG4gICAgICAgICAgICBkYXRhLmNvbWJhdCA9IHRydWUgJiYgW0NvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tdLmluY2x1ZGVzKHR5cGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5kYXRhc2V0W2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkYXRhLmRhdGFzZXQuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuZGF0YXNldC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5kYXRhc2V0LmV4dGVybmFsKSkge1xuICAgICAgICBkYXRhLmRhdGFzZXQuaWNvbiA9IGRhdGEuZGF0YXNldC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5kYXRhc2V0Lmljb25cbiAgICAgICAgZGF0YS5pY29uID0gZGF0YS5kYXRhc2V0Lmljb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGl0bGVcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcoZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOiB7XG4gICAgICAgIGxldCBodW1hbk5hbWUgPSBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICBpZiAoWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ2xjaycpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YXNldC5uYW1lID09PSAnc2FuJykge1xuICAgICAgICAgICAgaHVtYW5OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMoZGF0YS5kYXRhc2V0LnR5cGU/LnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgaHVtYW5OYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKGRhdGEuZGF0YXNldC5uYW1lKT8ubGFiZWxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIW5hbWUgJiYgZGF0YS5kYXRhc2V0Lm5hbWUubWF0Y2goL14uXFwuW15cXFxcLl0qXFwuLiskLykpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvY0lkTmFtZSA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEuZGF0YXNldC5uYW1lKSk/LlswXT8ubmFtZVxuICAgICAgICAgICAgaWYgKGNvY0lkTmFtZSkge1xuICAgICAgICAgICAgICBodW1hbk5hbWUgPSBjb2NJZE5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfSR7ZGF0YS5wdXNoaW5nID8gJ1B1c2hpbmcnIDogJyd9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGh1bWFuTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUzpcbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtTYW5Mb3NzJHshZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30keyFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIHNhbk1pbjogZGF0YS5kYXRhc2V0LnNhbk1pbixcbiAgICAgICAgICAgIHNhbk1heDogZGF0YS5kYXRhc2V0LnNhbk1heFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtJdGVtJHshZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30keyFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEuZGF0YXNldC5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6XG4gICAgICAgIHRpdGxlID0gZGF0YS5lZmZlY3QubGFiZWxcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIGRhdGEubmFtZSA9IHRpdGxlXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEuZGF0YXNldC5kaXNwbGF5TmFtZSA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS50aXRsZSA9IGdhbWUudXNlci5pc0dNID8gZGF0YS5uYW1lIDogdGl0bGVcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhc2V0KSkge1xuICAgICAgYS5kYXRhc2V0W2tdID0gdlxuICAgIH1cbiAgICBhLmRyYWdnYWJsZSA9IHRydWVcbiAgICBkYXRhLmljb24gPSBkYXRhLmljb24gPz8gZGF0YS5lZmZlY3Q/Lmljb24gPz8gJ2ZhcyBmYS1kaWNlJ1xuICAgIC8vIGNoZWNrIGlmIGl0J3MgYW4gaW1hZ2Ugb3IgYW4gaWNvblxuICAgIGlmIChkYXRhLmljb24uaW5jbHVkZXMoJ1xcXFwnKSB8fCBkYXRhLmljb24uaW5jbHVkZXMoJy4nKSkge1xuICAgICAgZGF0YS5pbWcgPSBkYXRhLmljb25cbiAgICB9XG4gICAgaWYgKGRhdGEuYmxpbmQpIHtcbiAgICAgIGEuaW5uZXJIVE1MICs9ICc8aSBjbGFzcz1cImZhcyBmYS1leWUtc2xhc2hcIj48L2k+J1xuICAgIH1cbiAgICBpZiAoZGF0YS5pbWcpIHtcbiAgICAgIGEuaW5uZXJIVE1MICs9IGA8aW1nIGRhdGEtbGluay1pY29uPVwiJHtkYXRhLmljb259XCIgc3JjPVwiJHtkYXRhLmltZ31cIj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIGEuaW5uZXJIVE1MICs9IGA8aSBkYXRhLWxpbmstaWNvbj1cIiR7ZGF0YS5pY29ufVwiIGNsYXNzPVwibGluay1pY29uICR7ZGF0YS5pY29ufVwiPjwvaT5gXG4gICAgfVxuICAgIGEuaW5uZXJIVE1MICs9IGA8c3Bhbj4ke2RhdGEubmFtZX08L3NwYW4+YFxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb250ZW50IGxpbmsgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudERhdGEgICAgICAgICAgICAgICAgICAgICBUaGUgcGFyc2VkIG9iamVjdCBvZiBkYXRhIHByb3ZpZGVkIGJ5IHRoZSBkcm9wIHRyYW5zZmVyIGV2ZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdICAgICAgICAgICAgICAgICAgICAgQWRkaXRpb25hbCBvcHRpb25zIHRvIGNvbmZpZ3VyZSBsaW5rIGdlbmVyYXRpb24uXG4gICAqIEBwYXJhbSB7Q2xpZW50RG9jdW1lbnR9IFtvcHRpb25zLnJlbGF0aXZlVG9dICBBIGRvY3VtZW50IHRvIGdlbmVyYXRlIGEgbGluayByZWxhdGl2ZSB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsXSAgICAgICAgICAgICAgIEEgY3VzdG9tIGxhYmVsIHRvIHVzZSBpbnN0ZWFkIG9mIHRoZSBkb2N1bWVudCdzIG5hbWUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2NyZWF0ZURvY3VtZW50TGluayAoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0gPSB7fSkge1xuICAgIGlmICghZXZlbnREYXRhLmNoZWNrKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgc3dpdGNoIChldmVudERhdGEuY2hlY2sudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOiB7XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6Y2hhcmFjLG5hbWU6U1RSLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTVFIgY2hlY2soLTEpfVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOmNoYXJhY3RlcmlzdGljLG5hbWU6c3RyLGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117U3RyZW5ndGh9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6YXR0cmlidXRlLG5hbWU6bGNrLGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117THVja31cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTpza2lsbCxuYW1lOkxhdyxkaWZmaWN1bHR5OjEsbW9kaWZpZXI6MCxpY29uOmZhIGZhLWxpbmtde0xhd31cbiAgICAgICAgaWYgKCFldmVudERhdGEubGlua1R5cGUgfHwgKCFldmVudERhdGEubmFtZSAmJiAhZXZlbnREYXRhLnJvbGxzKSkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZXZlbnREYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ30ke2V2ZW50RGF0YS5wdXNoaW5nID8gJ3B1c2hpbmcsJyA6ICcnfXR5cGU6JHtldmVudERhdGEubGlua1R5cGV9YFxuICAgICAgICBpZiAoZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgfSBlbHNlIGlmIChldmVudERhdGEucm9sbHMpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscm9sbHM6JHtldmVudERhdGEucm9sbHN9YFxuICAgICAgICAgIGlmIChldmVudERhdGEuY29tYmF0KSB7XG4gICAgICAgICAgICBvcHRpb25zICs9ICcsY29tYmF0J1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGV2ZW50RGF0YS5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtldmVudERhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnICYmIGV2ZW50RGF0YS5tb2RpZmllciAhPT0gMCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke2V2ZW50RGF0YS5tb2RpZmllcn1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZXZlbnREYXRhLmRpc3BsYXlOYW1lID8/IChsYWJlbCA/PyAnJylcbiAgICAgICAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7ZGlzcGxheU5hbWV9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUzoge1xuICAgICAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsZGlmZmljdWx0eTorKyxtb2RpZmllcjotMV17SGFyZCBTYW4gTG9zcyAoLTEpIDEvMUQ2fVxuICAgICAgICBpZiAoIWV2ZW50RGF0YS5zYW5NYXggfHwgIWV2ZW50RGF0YS5zYW5NaW4pIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9c2FuTWF4OiR7ZXZlbnREYXRhLnNhbk1heH0sc2FuTWluOiR7ZXZlbnREYXRhLnNhbk1pbn1gXG4gICAgICAgIGlmIChldmVudERhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHNhblJlYXNvbjoke2V2ZW50RGF0YS5zYW5SZWFzb259YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuZGlmZmljdWx0eSAmJiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtldmVudERhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5tb2RpZmllciAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LnNhbmxvc3NbJHtvcHRpb25zfV1gXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZXZlbnREYXRhLmRpc3BsYXlOYW1lID8/IChsYWJlbCA/PyAnJylcbiAgICAgICAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7ZGlzcGxheU5hbWV9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTToge1xuICAgICAgICAvLyBAY29jNy5pdGVtW3R5cGU6b3B0aW9uYWwsbmFtZTpTaG90Z3VuLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTaGl0Z3VuIGNoZWNrKC0xKX1cbiAgICAgICAgaWYgKCFldmVudERhdGEubmFtZSkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZXZlbnREYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ31uYW1lOiR7ZXZlbnREYXRhLm5hbWV9YFxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLnBhY2spIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscGFjazoke2V2ZW50RGF0YS5wYWNrfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmlkKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGlkOiR7ZXZlbnREYXRhLmlkfWBcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDoge1xuICAgICAgICAvLyBAY29jNy5lZmZlY3Rbe1wibGFiZWxcIjpcIkthcG93XCIsXCJpY29uXCI6XCJpY29ucy9zdmcvYXVyYS5zdmdcIixcImNoYW5nZXNcIjpbe1wia2V5XCI6XCJzeXN0ZW0udW5rbm93bi50ZXN0XCIsXCJtb2RlXCI6MixcInZhbHVlXCI6XCI1XCJ9XSxcInRpbnRcIjpcIiNlOTE2MTZcIixcImR1cmF0aW9uXCI6e1wic2Vjb25kc1wiOm51bGwsXCJyb3VuZHNcIjo2LFwidHVybnNcIjpudWxsfX1de0thcG93aW5nfVxuICAgICAgICAvLyBjb25zdCBlZmZlY3REYXRhID0gZm91bmRyeS51dGlscy5kZWVwQ2xvbmUoZXZlbnREYXRhKVxuICAgICAgICAvLyBpZiAoIXRoaXMuZWZmZWN0SXNUZW1wKSBkZWxldGUgZWZmZWN0RGF0YS5kdXJhdGlvblxuICAgICAgICAvLyBpZiAoZWZmZWN0RGF0YS5jaGFuZ2VzPy5sZW5ndGggPT09IDApIGRlbGV0ZSBlZmZlY3REYXRhLmNoYW5nZXNcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLmRpc2FibGVkKSBkZWxldGUgZWZmZWN0RGF0YS5kaXNhYmxlZFxuICAgICAgICAvLyBpZiAoIWVmZmVjdERhdGEudGludCkgZGVsZXRlIGVmZmVjdERhdGEudGludFxuICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5vYmplY3QuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgZXZlbnREYXRhLm9iamVjdC5leHRlcm5hbCA9IHBhcnRzWzFdXG4gICAgICAgICAgZXZlbnREYXRhLm9iamVjdC5pY29uID0gcGFydHNbMl1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5lZmZlY3RbJHtKU09OLnN0cmluZ2lmeShldmVudERhdGEub2JqZWN0KX1dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICc/J1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtBY3RvckNsaWNrIChhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOlxuICAgICAgICBpZiAoWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLmNoYXJhY3RlcmlzdGljQ2hlY2soXG4gICAgICAgICAgICBvcHRpb25zLm5hbWUsXG4gICAgICAgICAgICBzaGlmdEtleSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnc2tpbGwnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLnNraWxsQ2hlY2sob3B0aW9ucywgc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLmF0dHJpYnV0ZUNoZWNrKG9wdGlvbnMubmFtZSwgc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnY29tYmluZWRhbGwnLCAnY29tYmluZWRhbnknLCAnb3Bwb3NlZCddLmluY2x1ZGVzKG9wdGlvbnMubGlua1R5cGUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICByZXR1cm4gQ29DN0dyb3VwTWVzc2FnZS5jcmVhdGVHcm91cE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogb3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcm9sbFJlcXVpc2l0ZXM6IG9wdGlvbnMucm9sbHMuc3BsaXQoJyYmJyksXG4gICAgICAgICAgICBpc0NvbWJhdDogQm9vbGVhbihvcHRpb25zLmNvbWJhdCA/PyBmYWxzZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKGFjdG9yLmFjdG9yS2V5LCBvcHRpb25zLCB7XG4gICAgICAgICAgZmFzdEZvcndhcmQ6IHNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5KVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW3tcbiAgICAgICAgICBsYWJlbDogb3B0aW9ucy5vYmplY3QubGFiZWwsXG4gICAgICAgICAgaWNvbjogb3B0aW9ucy5vYmplY3QuaWNvbixcbiAgICAgICAgICBjaGFuZ2VzOiBvcHRpb25zLm9iamVjdC5jaGFuZ2VzXG4gICAgICAgIH1dKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0NoYXRNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgc3BlYWtlcjoge1xuICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG1lc3NhZ2VcbiAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKG9wdGlvbnMpXG4gICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBtZXNzYWdlID0gYDxkaXYgY2xhc3M9XCJlZmZlY3QtbWVzc2FnZVwiPiR7bGlua308L2Rpdj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICB9KVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICB9XG5cbiAgc3RhdGljIHRvV2hpc3Blck1lc3NhZ2UgKG9wdGlvbnMsIGFjdG9ycykge1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgd2hpc3BlcjogYWN0b3Iub3duZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICB9XG4gICAgICBsZXQgbWVzc2FnZVxuICAgICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhvcHRpb25zKVxuICAgICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHtsaW5rfTwvZGl2PmBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGEgY2hlY2sgd2hlbiBhIGxpbmsgaXMgY2xpY2tlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgY29uc3QgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayhhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXkgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKG9wdGlvbnMpXG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgbGV0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IGEub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKVxuICAgICAgICBpZiAoYWN0b3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGFjdG9yID0gYWN0b3JzWzBdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGEgPT4gKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gYS5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpXG4gICAgICAgICAgaWYgKGFjdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGFjdG9yID0gYWN0b3JzWzBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2soYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5IH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0NvbnRyb2xsZWRBY3RvcicpKVxuICB9XG5cbiAgc2V0VmFsdWUgKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLm9iamVjdFtrZXldID0gdmFsdWVcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRG9jdW1lbnRMaW5rKHRoaXMub2JqZWN0KVxuICB9XG5cbiAgZ2V0IGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuaWRcbiAgfVxuXG4gIGdldCBwYWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QucGFja1xuICB9XG5cbiAgZ2V0IGNoZWNrVHlwZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmNoZWNrXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuaWNvblxuICB9XG5cbiAgZ2V0IGRpc3BsYXlOYW1lICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuZGlzcGxheU5hbWVcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm1vZGlmaWVyXG4gIH1cblxuICBnZXQgbGlua1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5saW5rVHlwZVxuICB9XG5cbiAgZ2V0IHNhbk1pbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhbk1pblxuICB9XG5cbiAgZ2V0IHNhbk1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhbk1heFxuICB9XG5cbiAgZ2V0IHNhblJlYXNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhblJlYXNvblxuICB9XG5cbiAgZ2V0IGVmZmVjdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm9iamVjdFxuICB9XG5cbiAgZ2V0IGNoZWNrTmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaXNDaGFyYWN0ZXJpc3RpY0NoZWNrKSB7XG4gICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVxuICAgICAgcmV0dXJuIGNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IHRoaXMub2JqZWN0Lm5hbWUgfHwgYy5zaG9ydE5hbWUgPT09IHRoaXMub2JqZWN0Lm5hbWUgfHwgYy5sYWJlbCA9PT0gdGhpcy5vYmplY3QubmFtZSk/LmtleSA/PyAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vYmplY3QubmFtZVxuICB9XG5cbiAgZ2V0IGlzQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICB9XG5cbiAgZ2V0IGlzQ2hhcmFjdGVyaXN0aWNDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDXG4gIH1cblxuICBnZXQgaXNBdHRyaWJ1dGVDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURVxuICB9XG5cbiAgZ2V0IGlzU2tpbGxDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMXG4gIH1cblxuICBnZXQgaXNJdGVtQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNXG4gIH1cblxuICBnZXQgaXNTYW5Mb3NzQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTXG4gIH1cblxuICBnZXQgaXNFZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1RcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NoZWNrICYmIHRoaXMub2JqZWN0LmJsaW5kXG4gIH1cblxuICBnZXQgaXNQdXNoaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NoZWNrICYmIHRoaXMub2JqZWN0LnB1c2hpbmdcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09OU1QsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb250ZW50TGlua0RpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2xpbmstY3JlYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdGl2ZS1lZmZlY3Qtc2hlZXQnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogbnVsbCwgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcicgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9saW5rLWNyZWF0aW9uLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNTYwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy50YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuZWZmZWN0LW9wdGlvbnMnLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXRhaWxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gUHJlcGFyZSBjaGVjayB0eXBlXG4gICAgc2hlZXREYXRhLmNoZWNrVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUNoZWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkl0ZW1XZWFwb24nKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnRUZGRUNULlRhYkVmZmVjdHMnKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyBsaW5rIHR5cGVcbiAgICBzaGVldERhdGEubGlua1R5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyAnYXR0cmlidXRlJyB0eXBlc1xuICAgIHNoZWV0RGF0YS5hdHRyaWJ1dGVUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6ICdsY2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnc2FuJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgZWZmZWN0IG1vZGUgdHlwZXNcbiAgICBzaGVldERhdGEuZWZmZWN0TW9kZXMgPSBPYmplY3QuZW50cmllcyhDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTKS5yZWR1Y2UoXG4gICAgICAob2JqLCBlKSA9PiB7XG4gICAgICAgIG9ialtlWzFdXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnRUZGRUNULk1PREVfJyArIGVbMF0pXG4gICAgICAgIHJldHVybiBvYmpcbiAgICAgIH0sXG4gICAgICB7fVxuICAgIClcblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyAnY2hhcmFjdGVyaXN0aWMnIHR5cGVzXG4gICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljVHlwZSA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpXG5cbiAgICBzaGVldERhdGEubGluayA9IHNoZWV0RGF0YS5vYmplY3QubGlua1xuXG4gICAgc2hlZXREYXRhLmZyb21HYW1lID0gc2hlZXREYXRhLmxpbmsuaXNJdGVtQ2hlY2sgfHwgc2hlZXREYXRhLmxpbmsuaXNTa2lsbENoZWNrXG5cbiAgICBzaGVldERhdGEuZnJvbURpcmVjdG9yeSA9IChzaGVldERhdGEub2JqZWN0Lmhhc0lEID09PSAnZnJvbURpcmVjdG9yeScpXG4gICAgc2hlZXREYXRhLmZyb21Db21wZW5kaXVtID0gKHNoZWV0RGF0YS5vYmplY3QuaGFzSUQgPT09ICdmcm9tQ29tcGVuZGl1bScpXG5cbiAgICBzaGVldERhdGEuaXNTZXRGcm9tR2FtZSA9IChzaGVldERhdGEubGluay5pZCAmJiAoc2hlZXREYXRhLmZyb21EaXJlY3RvcnkgfHwgc2hlZXREYXRhLmZyb21Db21wZW5kaXVtKSlcblxuICAgIHNoZWV0RGF0YS5kaWZmaWN1bHR5TGV2ZWwgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsXG5cbiAgICBzaGVldERhdGEuYWN0b3JOYW1lcyA9IHNoZWV0RGF0YS5vYmplY3QuYWN0b3JzLm1hcChhID0+IGEubmFtZSkuam9pbignLCAnKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ3NlbGVjdFtuYW1lPXR5cGVdLHNlbGVjdFtuYW1lPWNoZWNrXSxzZWxlY3RbbmFtZT1hdHRyaWJ1dGVLZXldLHNlbGVjdFtuYW1lPWNoYXJhY3RlcmlzdGljS2V5XSxpbnB1dFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG5cbiAgICAvLyBIYW5kbGluZyBlZmZlY3RzXG4gICAgaHRtbC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkVmZmVjdENvbnRyb2wuYmluZCh0aGlzKSlcbiAgfVxuXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnZnJvbUNvbXBlbmRpdW0nOlxuICAgICAgY2FzZSAnZnJvbURpcmVjdG9yeSc6XG4gICAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gdGhpcy5vYmplY3QuaGFzSUQgPyAnJyA6IGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBfb25FZmZlY3RDb250cm9sIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgc3dpdGNoIChidXR0b24uZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRFZmZlY3RDaGFuZ2UoKVxuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgYnV0dG9uLmNsb3Nlc3QoJy5lZmZlY3QtY2hhbmdlJykucmVtb3ZlKClcbiAgICAgICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2FkZEVmZmVjdENoYW5nZSAoKSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5vYmplY3QubGluay5lZmZlY3QuY2hhbmdlcy5sZW5ndGhcbiAgICByZXR1cm4gdGhpcy5zdWJtaXQoe1xuICAgICAgcHJldmVudENsb3NlOiB0cnVlLFxuICAgICAgdXBkYXRlRGF0YToge1xuICAgICAgICBbYGVmZmVjdC5jaGFuZ2VzLiR7aWR4fWBdOiB7XG4gICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICBtb2RlOiBDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTLkFERCxcbiAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBsZXQgaGFzRWZmZWN0ID0gZmFsc2VcbiAgICBjb25zdCBlZmZlY3QgPSB7XG4gICAgICBkdXJhdGlvbjoge30sXG4gICAgICBjaGFuZ2VzOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmb3JtRGF0YSkge1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSAnY2hlY2tOYW1lJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZm9ybURhdGEuY2hlY2tOYW1lKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2JsaW5kJzpcbiAgICAgICAgY2FzZSAncHVzaGluZyc6XG4gICAgICAgIGNhc2UgJ2RpZmZpY3VsdHknOlxuICAgICAgICBjYXNlICdkaXNwbGF5TmFtZSc6XG4gICAgICAgIGNhc2UgJ2ljb24nOlxuICAgICAgICBjYXNlICdpZCc6XG4gICAgICAgIGNhc2UgJ21vZGlmaWVyJzpcbiAgICAgICAgY2FzZSAncGFjayc6XG4gICAgICAgIGNhc2UgJ3Nhbk1pbic6XG4gICAgICAgIGNhc2UgJ3Nhbk1heCc6XG4gICAgICAgIGNhc2UgJ3NhblJlYXNvbic6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZShrZXksIGZvcm1EYXRhW2tleV0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaGFzTW9kaWZpZXJzJzpcbiAgICAgICAgY2FzZSAnaGFzTGFiZWwnOlxuICAgICAgICBjYXNlICdoYXNJY29uJzpcbiAgICAgICAgICB0aGlzLm9iamVjdFtrZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5sYWJlbCc6XG4gICAgICAgICAgZWZmZWN0LmxhYmVsID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuaWNvbic6XG4gICAgICAgICAgZWZmZWN0Lmljb24gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC50aW50JzpcbiAgICAgICAgICBlZmZlY3QudGludCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmRpc2FibGVkJzpcbiAgICAgICAgICBlZmZlY3QuZGlzYWJsZWQgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi5zZWNvbmRzJzpcbiAgICAgICAgICBlZmZlY3QuZHVyYXRpb24uc2Vjb25kcyA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmR1cmF0aW9uLnJvdW5kcyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnJvdW5kcyA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmR1cmF0aW9uLnR1cm5zJzpcbiAgICAgICAgICBlZmZlY3QuZHVyYXRpb24udHVybnMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IGtleS5tYXRjaCgvXmVmZmVjdFxcLmNoYW5nZXNcXC4oXFxkKylcXC5rZXkkLylcbiAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGVmZmVjdC5jaGFuZ2VzLnB1c2goe1xuICAgICAgICAgICAgICBrZXk6IGZvcm1EYXRhW2tleV0sXG4gICAgICAgICAgICAgIG1vZGU6IGZvcm1EYXRhWydlZmZlY3QuY2hhbmdlcy4nICsgbWF0Y2hbMV0gKyAnLm1vZGUnXSxcbiAgICAgICAgICAgICAgdmFsdWU6IGZvcm1EYXRhWydlZmZlY3QuY2hhbmdlcy4nICsgbWF0Y2hbMV0gKyAnLnZhbHVlJ11cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNFZmZlY3QpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ29iamVjdCcsIGVmZmVjdClcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHN3aXRjaCAodGFyZ2V0Lm5hbWUpIHtcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnY2hlY2snLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbGlua1R5cGUnLCBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NoZWNrJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdsaW5rVHlwZScsIHRhcmdldC52YWx1ZSlcbiAgICAgICAgICBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUMpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVswXS5rZXkpXG4gICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnbGNrJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhdHRyaWJ1dGVLZXknOlxuICAgICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpY0tleSc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsIHRhcmdldC52YWx1ZSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzdWJtaXQnKSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuc3VibWl0dGVyLmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICAgICAgY2FzZSAnY2xpcGJvYXJkJzpcbiAgICAgICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKHRoaXMub2JqZWN0LmxpbmsubGluaylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnY2hhdCc6XG4gICAgICAgICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICd3aGlzcGVyLW93bmVyJzpcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QsIHRoaXMub2JqZWN0LmFjdG9ycylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnd2hpc3Blci1zZWxlY3RlZCc6XG4gICAgICAgICAgICBpZiAoIWNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vVG9rZW5zU2VsZWN0ZWQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ29DN0xpbmsudG9XaGlzcGVyTWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdCwgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmZpbHRlcih0ID0+IHQuYWN0b3Iub3duZXJzLmxlbmd0aCkubWFwKHQgPT4gdC5hY3RvcikpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ0NvQzdMaW5rJykge1xuICAgICAgdGhpcy5zZXRMaW5rKGF3YWl0IENvQzdMaW5rLmZyb21Ecm9wRGF0YShkYXRhKSlcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgoZGF0YS50eXBlID09PSAnRm9sZGVyJyAmJiBkYXRhLmRvY3VtZW50TmFtZSA9PT0gJ0FjdG9yJykgfHwgWydJdGVtJywgJ0FjdG9yJ10uaW5jbHVkZXMoZGF0YS50eXBlKSkge1xuICAgICAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsIGRhdGEuZG9jdW1lbnROYW1lID8/IGRhdGEudHlwZSlcbiAgICAgICAgaWYgKGRhdGEuZG9jdW1lbnROYW1lID8/IGRhdGEudHlwZSA9PT0gJ0FjdG9yJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmFjdG9ycyA9IGRhdGFMaXN0LmZpbHRlcihhID0+IGEub3duZXJzLmxlbmd0aClcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFMaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGlmIChbJ3NraWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGRhdGFMaXN0WzBdLnR5cGUpKSB7XG4gICAgICAgICAgICBpZiAoZGF0YUxpc3RbMF0ucGFjaykge1xuICAgICAgICAgICAgICB0aGlzLm9iamVjdC5oYXNJRCA9ICdmcm9tQ29tcGVuZGl1bSdcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgncGFjaycsIGRhdGFMaXN0WzBdLnBhY2spXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLm9iamVjdC5oYXNJRCA9ICdmcm9tRGlyZWN0b3J5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnaWQnLCBkYXRhTGlzdFswXS5pZClcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBkYXRhTGlzdFswXS5uYW1lKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRMaW5rIChsaW5rKSB7XG4gICAgdGhpcy5vYmplY3QubGluayA9IGxpbmtcbiAgICBpZiAobGluay5wYWNrICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbUNvbXBlbmRpdW0nXG4gICAgfSBlbHNlIGlmIChsaW5rLmlkICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbURpcmVjdG9yeSdcbiAgICB9XG4gICAgaWYgKGxpbmsuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyIHx8IHBhcnNlSW50KGxpbmsubW9kaWZpZXIsIDEwKSAhPT0gMCB8fCBsaW5rLmlzUHVzaGluZykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzTW9kaWZpZXJzID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNNb2RpZmllcnMgPSBmYWxzZVxuICAgIH1cbiAgICBpZiAobGluay5kaXNwbGF5TmFtZSAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0xhYmVsID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAobGluay5pY29uICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzSWNvbiA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChsaW5rRGF0YSA9IHt9LCBvcHRpb24gPSB7fSkge1xuICAgIGNvbnN0IG9iamVjdCA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoe1xuICAgICAgbGluazogbnVsbCxcbiAgICAgIGhhc0lEOiAnJyxcbiAgICAgIGhhc01vZGlmaWVyczogZmFsc2UsXG4gICAgICBoYXNMYWJlbDogZmFsc2UsXG4gICAgICBoYXNJY29uOiBmYWxzZSxcbiAgICAgIGFjdG9yczogW11cbiAgICB9LCBvcHRpb24pXG4gICAgY29uc3QgZGlhbG9nID0gbmV3IENvQzdDb250ZW50TGlua0RpYWxvZyhvYmplY3QsIHt9KVxuICAgIGRpYWxvZy5zZXRMaW5rKGF3YWl0IENvQzdMaW5rLmZyb21Ecm9wRGF0YShsaW5rRGF0YSkpXG4gICAgZGlhbG9nLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi9jb2M3LWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsID0ge31cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiggdW5kZWZpbmVkID09IG9wdGlvbnMuYXNrVmFsdWUpIG9wdGlvbnMuYXNrVmFsdWUgPSB0cnVlO1xuICAgIGlmIChvcHRpb25zLm5hbWUgJiYgIW9wdGlvbnMuZGlzcGxheU5hbWUpIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICBjb25zdCB1bmtub3duRGlmZmljdWx0eURlZmF1bHQgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpID09PSAndW5rbm93bidcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgYWxsb3dGbGF0RGljZU1vZGlmaWVyOlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXREaWNlTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdERpY2VNb2RpZmllcixcbiAgICAgIGFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyOlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpICYmXG4gICAgICAgICFvcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIsXG4gICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLFxuICAgICAgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0LFxuICAgICAgaGlkZURpZmZpY3VsdHk6IG9wdGlvbnMuaGlkZURpZmZpY3VsdHkgPz8gZmFsc2UsXG4gICAgICBvcHRpb25zXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKCFvcHRpb25zLmZvcmNlZENhcmRUeXBlID8/IHRydWUpXG4gICAgKSB7XG4gICAgICBkYXRhLmNhcmRUeXBlcyA9IENvQzdDaGF0TWVzc2FnZS5jYXJkVHlwZXMob3B0aW9ucylcbiAgICB9XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9ib251cy5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvbnVzU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNib251cy1yb2xsLWZvcm0nKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAncm9sbCcsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBSb2xsQ2FyZCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICB0aGlzLmluaXRpYXRvciA9IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cbiAgICBpZiAoIWNhcmRFbGVtZW50KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tSFRNTENhcmRFbGVtZW50IChjYXJkKSB7XG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2FyZC5yb2xscy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmIChjYXJkLnJvbGxzW2luZGV4XT8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgIGNhcmQucm9sbHNbaW5kZXhdID0gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGNhcmQucm9sbHNbaW5kZXhdKVxuICAgICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0ucm9sbGVkKSB7XG4gICAgICAgICAgY2FyZC5yb2xsc1tpbmRleF0uX2h0bWxSb2xsID0gYXdhaXQgY2FyZC5yb2xsc1tpbmRleF0uZ2V0SHRtbFJvbGwoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHNwYW4gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHNwYW4gJiYgc3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiYgIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IHNwYW4uY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2VJZChtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgZmxhZyA9IHNwYW4uZGF0YXNldC5mbGFnXG4gICAgaWYgKCFmbGFnKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSBzcGFuLmNsb3Nlc3QoJy50b2dnbGUnKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICBjYXJkLnRvZ2dsZUZsYWcoZmxhZylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICBjYXJkLnVuc2V0RmxhZyhiLmRhdGFzZXQuZmxhZylcbiAgICAgIH1cbiAgICAgIGNhcmQuc2V0RmxhZyhmbGFnKVxuICAgIH1cbiAgICBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkaXNwYXRjaCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgbGV0IG1lc3NhZ2VzID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuZGVmYXVsdENvbmZpZy50eXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpICYmXG4gICAgICAgICAgbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3N0YXRlJykgIT09ICdyZXNvbHZlZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFsnY29tYmluZWRDYXJkJ10uaW5jbHVkZXModGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2luaXRpYXRvcicpID09PSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuXG4gICAgICBpZiAobWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIE9sZCBtZXNzYWdlcyBjYW4ndCBiZSB1c2VkIGlmIG1lc3NhZ2UgaXMgbW9yZSB0aGFuIGEgZGF5IG9sZCBtYXJrIGl0IGFzIHJlc29sdmVkXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKG1lc3NhZ2VzWzBdLnRpbWVzdGFtcClcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgICAgICBjb25zdCB0aW1lRGlmZlNlYyA9IChub3cgLSB0aW1lc3RhbXApIC8gMTAwMFxuICAgICAgICBpZiAoMjQgKiA2MCAqIDYwIDwgdGltZURpZmZTZWMpIHtcbiAgICAgICAgICBhd2FpdCBtZXNzYWdlc1swXS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcbiAgICAgICAgICBtZXNzYWdlcyA9IFtdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNhcmRcbiAgICAgIGlmICghbWVzc2FnZXMubGVuZ3RoKSBjYXJkID0gbmV3IHRoaXMoKVxuICAgICAgZWxzZSBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlc1swXSlcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5fcm9sbE1vZGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNhcmQuX3JvbGxNb2RlID0gZGF0YS5fcm9sbE1vZGVcbiAgICAgIH1cbiAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgIH0gZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVzb2x2ZU9sZCAodXNlcklkKSB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpICYmIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdzdGF0ZScpICE9PSAncmVzb2x2ZWQnKSB7XG4gICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xuICAgICAgICAgIHJldHVybiBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnaW5pdGlhdG9yJykgPT09IHVzZXJJZFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIGlmIChtZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IG1lc3NhZ2VzWzBdLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuICAgICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpXG4gICAgaHRtbENhcmRFbGVtZW50WzBdLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5jb25maWcudGl0bGUpLFxuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50WzBdLm91dGVySFRNTCxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgICAgIHN0YXRlOiAnaW5pdGlhdGVkJyxcbiAgICAgICAgICBpbml0aWF0b3I6IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBhd2FpdCB0aGlzLmNvbXB1dGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIGF3YWl0IHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMuY29uZmlnLnRlbXBsYXRlLCB0aGlzKVxuICAgICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG5cbiAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0pXG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICB1cGRhdGVSb2xsIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmZyb21HTSkge1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnJvbGxzW2RhdGEucmFua10sIGRhdGEucm9sbClcbiAgICB9XG4gIH1cblxuICBhZGRSb2xsRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGRhdGEucm9sbClcbiAgICB0aGlzLnJvbGxzLnB1c2goY2hlY2spXG4gICAgaWYgKHRoaXMuY29uZmlnLnR5cGUgPT09ICdjb21iaW5lZENhcmQnKSB7XG4gICAgICB0aGlzLmluaXRpYXRvciA9IGRhdGEucm9sbC5pbml0aWF0b3JcbiAgICB9XG4gIH1cblxuICBhZGRSb2xsIChkYXRhKSB7XG4gICAgdGhpcy5yb2xscy5wdXNoKGRhdGEpXG4gIH1cblxuICByZW1vdmVSb2xsIChyYW5rKSB7XG4gICAgdGhpcy5yb2xscy5zcGxpY2UocmFuaywgMSlcbiAgfVxuXG4gIHNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSB0cnVlXG4gIH1cblxuICB1bnNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSBmYWxzZVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICB0aGlzW2ZsYWdOYW1lXSA9ICF0aGlzW2ZsYWdOYW1lXVxuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4Y2x1ZGU6IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbScsICdfbWVzc2FnZScsICdfaHRtbFJvbGwnXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfXydcbiAgICB9XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IHdpbm5lcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIud2lubmVyKVxuICB9XG5cbiAgZ2V0IHdpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGgpIHJldHVybiB0aGlzLndpbm5lcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbG9vc2VycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gIXIud2lubmVyKVxuICB9XG5cbiAgZ2V0IGxvb3NlciAoKSB7XG4gICAgaWYgKHRoaXMubG9vc2Vycy5sZW5ndGgpIHJldHVybiB0aGlzLmxvb3NlcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgaGFzV2lubmVyICgpIHtcbiAgICBpZiAodGhpcy53aW5uZXJzLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNLZWVwZXIgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgZGF0YSAoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5kYXRhU3RyaW5nKVxuICB9XG5cbiAgZ2V0IGRhdGFTdHJpbmcgKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5jb25maWcuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMuY29uZmlnLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQXVkaW9IZWxwZXIsIENPTkZJRywgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29tYmluZWRDaGVja0NhcmQgZXh0ZW5kcyBSb2xsQ2FyZCB7XG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVybmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLmZpbmQoJy5yb2xsLWNhcmQgYScpLmNsaWNrKGFzeW5jIChldmVudCkgPT4gQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2soIGV2ZW50KSk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBhJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBidXR0b24nLFxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdjb21iaW5lZENhcmQnLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvbWJpbmVkUm9sbENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgc3VjY2Vzc0NvdW50ICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGxldCBjb3VudCA9IDBcbiAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgIGlmIChyLnBhc3NlZCkgY291bnQgKz0gMVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvdW50XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYWluQWN0b3JLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzWzBdPy5hY3Rvcj8uYWN0b3JLZXkgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgc3VjY2VzcyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5hbnkpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA+IDApIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsKSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPT09IHRoaXMucm9sbHMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmYWlsdXJlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMuc3VjY2Vzc1xuICB9XG5cbiAgZ2V0IGNoZWNrR01Jbml0aWF0b3IgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmdldCh0aGlzLmluaXRpYXRvcik/LmlzR01cbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICByb2xsOiB0aGlzLl9yb2xsW2NoZWNrLmRpY2VNb2RpZmllciB8fCAwXSxcbiAgICAgIHNpbGVudDogdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrLmdldEh0bWxSb2xsKHsgaGlkZVN1Y2Nlc3M6IHRydWUgfSlcbiAgfVxuXG4gIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOiB7XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhc3NpZ25Sb2xsJzoge1xuICAgICAgICB0aGlzLmFzc2lnblJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgYXNzaWduUm9sbCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5fcm9sbCA9IGRhdGEucm9sbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBDb21iaW5lZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jYXJkJzoge1xuICAgICAgICBjb25zdCBwb29sID0ge31cbiAgICAgICAgZm9yIChjb25zdCBkaWNlIG9mIGNhcmQucm9sbHMpIHtcbiAgICAgICAgICBjb25zdCBkaWNlTW9kaWZpZXIgPSBwYXJzZUludChkaWNlLmRpY2VNb2RpZmllciwgMTApXG4gICAgICAgICAgaWYgKCFpc05hTihkaWNlTW9kaWZpZXIpKSB7XG4gICAgICAgICAgICBwb29sW2RpY2VNb2RpZmllcl0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBDb0M3RGljZS5jb21iaW5lZFJvbGwoeyBwb29sIH0pXG4gICAgICAgIHJvbGwuaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICdhc3NpZ25Sb2xsJyxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxuICAgICAgICAgIHJvbGxcbiAgICAgICAgfVxuICAgICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICBpbml0aWF0b3I6IGdhbWUudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGwpIHJldHVyblxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgLy8gcmVtb3ZlIGFueSBhY3RvcnMgdGhhdCBubyBsb25nZXIgZXhpc3RcbiAgICB9KVxuXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGlmICghci5yb2xsZWQpIHtcbiAgICAgICAgci5tb2RpZmllciA9IHIuZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5kaWZmaWN1bHR5ID0gci5kaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICByLmZsYXREaWNlTW9kaWZpZXIgPSByLmZsYXREaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgICByLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHIuZmxhdFRocmVzaG9sZE1vZGlmaWVyIHx8IDBcbiAgICAgICAgYXdhaXQgci5fcGVyZm9ybSh7IHJvbGw6IHRoaXMuX3JvbGxbci5tb2RpZmllcl0sIHNpbGVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLmdldEh0bWxSb2xsKClcbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXG4gIH1cblxuICBnZXQgb3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlc1xuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChvcHRpb25uYWxDaGF0RGF0YSA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVswXVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmNvbXB1dGUpIHRoaXMuY29tcHV0ZSgpXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgdGhpcy50b01lc3NhZ2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG5cbiAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0pXG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1yYWRpby1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtc3dpdGNoJywgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuc3VibWl0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdmb2N1c291dCcsICdpbnB1dCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgJ2Zvcm0nLCB0aGlzLl9vbktleS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcykgcmV0dXJuXG4gICAgaWYgKFxuICAgICAgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdhbWUuQ29DNy5jYXJkcykuaW5jbHVkZXMoXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc1xuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBJbnRlcmFjdGl2ZUNoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGNvbnN0IHR5cGVkQ2FyZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgZ2FtZS5Db0M3LmNhcmRzW2h0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc10oKSxcbiAgICAgIGNhcmRcbiAgICApXG4gICAgdHlwZWRDYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgdHlwZWRDYXJkLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IHR5cGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzc2lnbk9iamVjdCAoKSB7fVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJyAvL0F2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cbiAgICBpZiAodGhpc1thY3Rpb25dKSB0aGlzW2FjdGlvbl0oeyBldmVudCwgdXBkYXRlOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgbGV0IGRhdGEgPSBmZC5vYmplY3RcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QodGhpcywgZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZGF0YSkpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZVxuICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBpZiAoIWNhcmREYXRhLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgICAgY2FyZERhdGEubWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5pYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgdGhpcy51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICB0aGlzLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgaXNUYXJnZXRPd25lciAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0LmlzT3duZXJcbiAgfVxuXG4gIGdldCBpc0tlZXBlciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPVxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuZG9jdW1lbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZUNoYXRDYXJkIH0gZnJvbSAnLi4vaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBEYW1hZ2VDYXJkIGV4dGVuZHMgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBleGNsdWRlOiBbXG4gICAgICAgICdfdGFyZ2V0VG9rZW4nLFxuICAgICAgICAnX3RhcmdldEFjdG9yJyxcbiAgICAgICAgJ19odG1sUm9sbCcsXG4gICAgICAgICdfaHRtbElubGluZVJvbGwnXG4gICAgICBdLmNvbmNhdChzdXBlci5kZWZhdWx0T3B0aW9ucy5leGNsdWRlKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL2RhbWFnZS5odG1sJ1xuICAgIH0pXG4gIH1cblxuICAvLyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAvLyAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIC8vIH1cblxuICBhc3luYyBhc3NpZ25PYmplY3QgKCkge1xuICAgIGlmICh0aGlzLmRhbWFnZVJvbGwgJiYgdGhpcy5kYW1hZ2VSb2xsLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICB0aGlzLmRhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKHRoaXMuZGFtYWdlUm9sbClcbiAgICB9XG4gIH1cblxuICBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgc3VwZXIuX29uQnV0dG9uKGV2ZW50KVxuICB9XG5cbiAgZ2V0IGNyaXRpY2FsICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNyaXRpY2FsXG4gIH1cblxuICBzZXQgY3JpdGljYWwgKHgpIHtcbiAgICB0aGlzLl9vcHRpb25zLmNyaXRpY2FsID0geFxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9pbXBhbGUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgcmV0dXJuIHRoaXMuX2ltcGFsZVxuICB9XG5cbiAgc2V0IGltcGFsZSAoeCkge1xuICAgIHRoaXMuX2ltcGFsZSA9IHhcbiAgfVxuXG4gIGdldCBpc0RhbWFnZUZvcm11bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kYW1hZ2VGb3JtdWxhICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYW1hZ2VGb3JtdWxhKSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuZGFtYWdlRm9ybXVsYSlcbiAgfVxuXG4gIGdldCBpc0RhbWFnZU51bWJlciAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYW1hZ2VGb3JtdWxhKSlcbiAgfVxuXG4gIGdldCBpc0FybW9yRm9ydWxhICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuYXJtb3IgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuYXJtb3IpXG4gIH1cblxuICBnZXQgdG90YWxEYW1hZ2VTdHJpbmcgKCkge1xuICAgIGxldCBkYW1hZ2UgPSBOdW1iZXIoXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXG4gICAgKVxuICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkgfHwgTnVtYmVyKHRoaXMuYXJtb3IpID4gMCkge1xuICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcilcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICBpZiAoZGFtYWdlIDw9IDApIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhbWFnZVxuICB9XG5cbiAgZ2V0IG5vRGFtYWdlICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9IHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHtcbiAgICAgICAgICByZXR1cm4gISEoZGFtYWdlIC0gTnVtYmVyKHRoaXMuYXJtb3IpIDw9IDApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gISEoZGFtYWdlIDw9IDApXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMucm9sbCAmJiAhdGhpcy5pc0RhbWFnZU51bWJlcikge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsRGFtYWdlKHsgdXBkYXRlOiBmYWxzZSB9KVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyIHx8XG4gICAgICAodGhpcy5yb2xsICYmIHRoaXMucm9sbC50b3RhbCAhPSBudWxsKSB8fFxuICAgICAgdGhpcy5oYXJkcm9sbGVkXG4gICAgKSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLmRhbWFnZUluZmxpY3RlZCAmJiAhdGhpcy5ub0RhbWFnZSkge1xuICAgICAgYXdhaXQgdGhpcy5kZWFsRGFtYWdlKHsgdXBkYXRlOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJvbGxlZCAmJiB0aGlzLnJvbGwpIHtcbiAgICAgIGlmICh0aGlzLnJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgdGhpcy5yb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLnJvbGwpXG4gICAgICB9XG4gICAgICBjb25zdCBhID0gY3JlYXRlSW5saW5lUm9sbCh0aGlzLnJvbGwpXG4gICAgICB0aGlzLl9odG1sSW5saW5lUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgICB0aGlzLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbC5yZW5kZXIoKVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIHRoaXMucm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuZGFtYWdlRm9ybXVsYSB8fCAnMCcpLmV2YWx1YXRlKHtcbiAgICAgIGFzeW5jOiB0cnVlXG4gICAgfSlcbiAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLnJvbGwpXG4gICAgdGhpcy5oYXJkcm9sbGVkID0gdHJ1ZVxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcm9sbEFybW9yIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmFybW9yKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgdGhpcy5hcm1vciA9IHJvbGwudG90YWxcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2VUb1NlbGVjdGVkVGFyZ2V0IChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGlmICh0aGlzLmlzQXJtb3JGb3J1bGEpIGF3YWl0IHRoaXMucm9sbEFybW9yKClcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpKSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JFdmFsdWF0aW5nRGFtYWdlJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0cyA9IFtdXG4gICAgY29uc3QgdGFyZ2V0TmFtZSA9IFtdXG4gICAgY29uc3Qgc2VsZWN0ZWRQbGF5ZXJzID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0b2tlbiA9PiB7XG4gICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICB9KVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RlZFBsYXllcnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XS5pZCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgdGFyZ2V0TmFtZS5wdXNoKHNlbGVjdGVkUGxheWVyc1tpbmRleF0ubmFtZSlcbiAgICAgIHRhcmdldHMucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdKVxuICAgIH1cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdGl0bGU6ICcgJyxcbiAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGVhbERhbWFnZScsIHtcbiAgICAgICAgZGFtYWdlOiB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldE5hbWVcbiAgICAgIH0pLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICBvbmU6IHtcbiAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb25maXJtRGFtYWdlKHRhcmdldHMpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0d286IHtcbiAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7fVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVmYXVsdDogJ3R3bydcbiAgICB9XG4gICAgaWYgKHRhcmdldE5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjb25maXJtRGFtYWdlICh0YXJnZXRzKSB7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRhcmdldHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBhd2FpdCB0YXJnZXRzW2luZGV4XS5kZWFsRGFtYWdlKE51bWJlcih0aGlzLnRvdGFsRGFtYWdlU3RyaW5nKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogZmFsc2VcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRhbWFnZURlYWxUbycsIHtcbiAgICAgICAgICBuYW1lOiB0YXJnZXRzW2luZGV4XS5uYW1lLFxuICAgICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGlmICh0aGlzLmlzQXJtb3JGb3J1bGEpIGF3YWl0IHRoaXMucm9sbEFybW9yKClcbiAgICBsZXQgZGFtYWdlID0gdGhpcy50b3RhbERhbWFnZVN0cmluZ1xuICAgIGlmIChpc05hTihOdW1iZXIoZGFtYWdlKSkpIHtcbiAgICAgIGlmIChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtb3JBYnNvcmJzRGFtYWdlJykgPT09IGRhbWFnZSkge1xuICAgICAgICBkYW1hZ2UgPSAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFcnJvciBldmFsdWF0aW5nIGRhbWFnZScpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50YXJnZXRBY3Rvcikge1xuICAgICAgYXdhaXQgdGhpcy50YXJnZXRBY3Rvci5kZWFsRGFtYWdlKE51bWJlcihkYW1hZ2UpLCB7XG4gICAgICAgIGlnbm9yZUFybW9yOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmRhbWFnZUluZmxpY3RlZCA9IHRydWVcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGdldCByYW5nZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yYW5nZSB8fCAnbm9ybWFsJ1xuICB9XG5cbiAgc2V0IHJhbmdlICh4KSB7XG4gICAgY29uc3QgcmFuZ2VzID0gWydub3JtYWwnLCAnbG9uZycsICdleHRyZW1lJ11cbiAgICBpZiAoIXJhbmdlcy5pbmNsdWVzKHgudG9Mb3dlckNhc2UoKSkpIHJldHVyblxuICAgIHRoaXMuX29wdGlvbnMucmFuZ2UgPSB4XG4gIH1cblxuICBnZXQgZGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnJhbmdlXG4gICAgbGV0IGZvcm11bGEgPSB0aGlzLndlYXBvbj8uc3lzdGVtPy5yYW5nZVtyYW5nZV0/LmRhbWFnZVxuICAgIGxldCBkYiA9IHRoaXMuYWN0b3IuZGJcbiAgICBkYiA9ICgoZGIgPz8gJycpLnRvU3RyaW5nKCkudHJpbSgpID09PSAnJyA/IDAgOiBkYikudG9TdHJpbmcoKS50cmltKClcblxuICAgIGlmICghZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGJcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYWhkYikgZm9ybXVsYSA9IGZvcm11bGEgKyBDb0M3VXRpbGl0aWVzLmhhbGZEQih0aGlzLmFjdG9yLmRiKVxuXG4gICAgaWYgKGZvcm11bGEpIHtcbiAgICAgIGNvbnN0IG1heERhbWFnZSA9IG5ldyBSb2xsKGZvcm11bGEpWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICBsZXQgcm9sbFN0cmluZ1xuICAgICAgaWYgKHRoaXMuY3JpdGljYWwpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1wYWxlKSB7XG4gICAgICAgICAgcm9sbFN0cmluZyA9IGZvcm11bGEgKyAnKycgKyBtYXhEYW1hZ2VcbiAgICAgICAgICByZXR1cm4gcm9sbFN0cmluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhEYW1hZ2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFybW9yICgpIHtcbiAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLl9hcm1vciAmJiB0aGlzLl9hcm1vciAhPT0gJycpIHJldHVybiB0aGlzLl9hcm1vclxuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNldCBhcm1vciAoeCkge1xuICAgIHRoaXMuX2FybW9yID0geFxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vZGFtYWdlLmpzJ1xuaW1wb3J0IHsgUm9sbENhcmQgfSBmcm9tICcuL3JvbGwtY2FyZC5qcydcblxuZXhwb3J0IGNsYXNzIE9wcG9zZWRDaGVja0NhcmQgZXh0ZW5kcyBSb2xsQ2FyZCB7XG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVybmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCAudG9nZ2xlLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIHN1cGVyLmJpbmRMaXN0ZXJuZXJzKCBodG1sKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYScsXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGJ1dHRvbicsXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdvcHBvc2VkQ2FyZCdcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IGF0dGFja2VyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGF0dGFja2VyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ID09PSAwIHx8IHIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChhdHRhY2tlci5sZW5ndGgpIHJldHVybiBhdHRhY2tlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGVmZW5kZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggIT09IDAgfHwgIXIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChkZWZlbmRlci5sZW5ndGgpIHJldHVybiBkZWZlbmRlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJJc0RvZGdpbmcgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LnNraWxsPy5uYW1lXG4gICAgKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZUF0dGFja2VyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hYVxuICB9XG5cbiAgZ2V0IHdpbm5lclJvbGxzRGFtYWdlICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5yb2xscy5sZW5ndGggPj0gMiAmJlxuICAgICAgdGhpcy5oYXNXaW5uZXIgJiZcbiAgICAgIHRoaXMud2lubmVyPy5pdGVtPy50eXBlID09PSAnd2VhcG9uJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzZXQgYWR2YW50YWdlQXR0YWNrZXIgKHgpIHtcbiAgICB0aGlzLl9hYSA9IHRydWVcbiAgICB0aGlzLl9hZCA9IGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlRGVmZW5kZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgIHJldHVybiB0aGlzLl9hZFxuICB9XG5cbiAgc2V0IGFkdmFudGFnZURlZmVuZGVyICh4KSB7XG4gICAgdGhpcy5fYWQgPSB0cnVlXG4gICAgdGhpcy5fYWEgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzVGllICgpIHtcbiAgICByZXR1cm4gdGhpcy53aW5uZXJDb3VudCA+IDFcbiAgfVxuXG4gIGdldCBuZWVkc1RpZUJyZWFrZXIgKCkge1xuICAgIGlmICghdGhpcy5jb21iYXQpIHJldHVybiBmYWxzZVxuICAgIGlmIChcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwuc3VjY2Vzc0xldmVsID09PSB0aGlzLmRlZmVuZGVyUm9sbC5zdWNjZXNzTGV2ZWxcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHdpbm5lckNvdW50ICgpIHtcbiAgICBsZXQgY291bnQgPSAwXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGlmIChyLndpbm5lcikgY291bnQgKz0gMVxuICAgIH1cbiAgICByZXR1cm4gY291bnRcbiAgfVxuXG4gIGdldCBpc0F0dGFja01hbmV1dmVyICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgICghdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0gfHxcbiAgICAgICAgdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/Lm1udnIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByZXN1bHRUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQgJiYgdGhpcy5hdHRhY2tlclJvbGwgJiYgdGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgIGlmICghdGhpcy5hdHRhY2tlclJvbGwud2lubmVyICYmICF0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWZlbmRlcklzRG9kZ2luZykge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgaWYgKCF0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNvbWJhdCA9IGRhdGEuY29tYmF0IHx8IHVuZGVmaW5lZFxuICAgICAgICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgICAgICAgZGF0YS5yb2xsLmF0dGFja2VyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnJvbGwuaW5kZXggPSB0aGlzLnJvbGxzLmxlbmd0aFxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOlxuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgcm9sbCAocmFuaykge1xuICAgIGF3YWl0IHRoaXMucm9sbHNbcmFua10uX3BlcmZvcm0oKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICByYW5rLFxuICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgIH1cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSB0aGlzLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgT3Bwb3NlZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndG9nZ2xlLWNvbWJhdCc6IHtcbiAgICAgICAgY2FyZC5jb21iYXQgPSAhY2FyZC5jb21iYXRcbiAgICAgICAgLy8gaWYoICFjYXJkLmFkdmFudGFnZUF0dGFja2VyICYmICFjYXJkLmFkdmFudGFnZURlZmVuZGVyKSBjYXJkLmFkdmFudGFnZUF0dGFja2VyID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgICAgaWYgKCFjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5KSB7XG4gICAgICAgICAgY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSA9IGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FyZC5yb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWRhbWFnZSc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGNhcmQud2lubmVyLmlzRXh0cmVtZVN1Y2Nlc3MsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gY2FyZC53aW5uZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudGFyZ2V0S2V5ID0gY2FyZC5sb29zZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gY2FyZC53aW5uZXIuaXRlbUlkXG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IGNhcmQucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGUgKHJhbmsgPSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnJvbGxzID0gdGhpcy5yb2xscy5maWx0ZXIocm9sbCA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHJvbGwuYWN0b3IuYWN0b3JLZXkgIT09ICd1bmRlZmluZWQnIC8vIHJlbW92ZSBhbnkgYWN0b3JzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgfSlcblxuICAgIGlmICghcmFuaykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgICAgICghdGhpcy5yb2xsc1tpXS5pdGVtIHx8XG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/Lm1udnIpICYmXG4gICAgICAgICAgKCh0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXT8uc2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgIT09XG4gICAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpKSB8fFxuICAgICAgICAgICAgIXRoaXMucm9sbHNbaV0/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICAgIHRoaXMucm9sbHNbaV0uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tpXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucm9sbHNbcmFua10ucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbHNbcmFua10uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tyYW5rXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIC8vIFNvcnQgY29tYmF0IHJvbGxzIGJ5IGluZGV4LlxuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLmluZGV4ID4gYi5pbmRleCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSByZXR1cm4gLTFcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0pXG5cbiAgICAgIC8vIENvbWJhdCByb2xsIGluY2x1ZGVzIG9ubHkgMiBwZXJzb25zLCByZW1vdmUgdGhlIHJlc3QuXG4gICAgICBpZiAodGhpcy5yb2xscy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRoaXMucm9sbHMgPSBbdGhpcy5yb2xsc1swXSwgdGhpcy5yb2xsc1sxXV1cbiAgICAgICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgICAgICBkZWxldGUgci53aW5uZXJcbiAgICAgICAgICBkZWxldGUgci50aWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGaXJzdCBwZXJzb24gYWRkZWQgaXMgdGhlIGF0dGFja2VyLlxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0pIHRoaXMucm9sbHNbMF0uYXR0YWNrZXIgPSB0cnVlXG5cbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdPy5yb2xsZWQgJiYgdGhpcy5yb2xsc1sxXT8ucm9sbGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnJvbGxzWzBdLnBhc3NlZCB8fCB0aGlzLnJvbGxzWzFdLnBhc3NlZCkge1xuICAgICAgICAgIGlmICh0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA+IHRoaXMucm9sbHNbMV0uc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm9sbHNbMV0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMV0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hZHZhbnRhZ2VBdHRhY2tlcikgdGhpcy5yb2xsc1swXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgICBlbHNlIHRoaXMucm9sbHNbMV0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEucm9sbGVkICYmICFiLnJvbGxlZCkgcmV0dXJuIC0xXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgYi5yb2xsZWQpIHJldHVybiAxXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gMFxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPiBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsIDwgYi5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgIHJldHVybiAxXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpKSB7XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPiBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0IDwgYi5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlID4gYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA8IGIucmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgdGhpcy53aW5Db3VudCA9IDBcbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdICYmIHRoaXMucm9sbHNbMF0ucm9sbGVkICYmICF0aGlzLnJvbGxzWzBdLmZhaWxlZCkge1xuICAgICAgICB0aGlzLndpbkNvdW50ID0gMVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnJvbGxlZCAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPT09IHRoaXMucm9sbHNbaV0uc3VjY2Vzc0xldmVsICYmXG4gICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJylcbiAgICAgICAgICAgICAgPyB0aGlzLnJvbGxzWzBdLm1vZGlmaWVkUmVzdWx0ID09PSB0aGlzLnJvbGxzW2ldLm1vZGlmaWVkUmVzdWx0XG4gICAgICAgICAgICAgIDogdGhpcy5yb2xsc1swXS5yYXdWYWx1ZSA9PT0gdGhpcy5yb2xsc1tpXS5yYXdWYWx1ZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMud2luQ291bnQgPSB0aGlzLndpbkNvdW50ICsgMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS53aW5uZXIgPSBpIDwgdGhpcy53aW5Db3VudFxuICAgICAgICB0aGlzLnJvbGxzW2ldLnRpZSA9IHRoaXMucm9sbHNbaV0ud2lubmVyICYmIHRoaXMud2luQ291bnQgPiAxXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xvc2VDYXJkICgpIHtcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBTYW5EYXRhRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnOmNoZWNrYm94JykuY2xpY2soKCkgPT4gdGhpcy5fdG9nZ2xlSW5wdXQoaHRtbCkpXG4gIH1cblxuICBfdG9nZ2xlSW5wdXQgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJypbbmFtZT1cImN1c3RvbW5hbWVcIl0nKS50b2dnbGUoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9zYW5kYXRhLmh0bWwnLFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTYW5EYXRhRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvdycpLCAvLyBUT0RPOiBSZW1vdmUgU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBWYWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzYW4tZGF0YS1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ1ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29udGVudExpbmtEaWFsb2cgfSBmcm9tICcuL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgU2FuRGF0YURpYWxvZyB9IGZyb20gJy4vc2FuZGF0YS1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGF0TWVzc2FnZSB7XG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0FUVFJJQlVURSAoKSB7XG4gICAgcmV0dXJuICdSL0FUJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMgKCkge1xuICAgIHJldHVybiAnUi9DSCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NPTUJBVCAoKSB7XG4gICAgcmV0dXJuICdSL0NPJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfU0tJTEwgKCkge1xuICAgIHJldHVybiAnUi9TSydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0VOQ09VTlRFUiAoKSB7XG4gICAgcmV0dXJuICdSL0VDJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfQ09NQklORUQgKCkge1xuICAgIHJldHVybiAnQy9DTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0dST1VQICgpIHtcbiAgICByZXR1cm4gJ0MvR1InXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9OT1JNQUwgKCkge1xuICAgIHJldHVybiAnQy9OTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX09QUE9TRUQgKCkge1xuICAgIHJldHVybiAnQy9PUCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX1NBTl9DSEVDSyAoKSB7XG4gICAgcmV0dXJuICdDL1NDJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9ORSAoKSB7XG4gICAgcmV0dXJuICdDL05PJ1xuICB9XG5cbiAgLy8gc3RhdGljIGdldCBST0xMX1RPX0NIQVQgKCkge1xuICAvLyAgIHJldHVybiAnUi9DSCdcbiAgLy8gfVxuXG4gIC8vIHN0YXRpYyBnZXQgUk9MTF9UT19DTElQQk9BUkQgKCkge1xuICAvLyAgIHJldHVybiAnUi9DTCdcbiAgLy8gfVxuXG4gIHN0YXRpYyBjYXJkVHlwZXMgKGNvbmZpZykge1xuICAgIGlmIChjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjb25zdCBzZWxlY3QgPSB7XG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxdOiAnQ29DNy5SZWd1bGFyUm9sbENhcmQnLFxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURdOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURdOiAnQ29DNy5PcHBvc2VkUm9sbENhcmQnXG4gICAgICAvLyBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUF06ICdDb0M3Lkdyb3VwUm9sbENhcmQnIC0gTllJXG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUgJiZcbiAgICAgIGNvbmZpZy5hdHRyaWJ1dGUgPT09ICdzYW4nXG4gICAgKSB7XG4gICAgICBzZWxlY3RbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tdID0gJ0NvQzcuU2FuaXR5TG9zc0VuY291bnRlcidcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdFxuICB9XG5cbiAgc3RhdGljIG5vcm1hbGl6ZVJlcXVlc3QgKG9wdGlvbnMpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUilcbiAgICApIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lsbElkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAob3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQob3B0aW9ucy5za2lsbElkKSkge1xuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBza2lsbElkcyA9IG9wdGlvbnMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKG9wdGlvbnMuc2tpbGxOYW1lKVxuICAgICAgICBpZiAoc2tpbGxJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIG9wdGlvbnMuc2tpbGxJZCA9IHNraWxsSWRzWzBdLmlkXG4gICAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBbJ2xjaycsICdzYW4nXS5pbmNsdWRlcyhvcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICkge1xuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIG9wdGlvbnMucm9sbFR5cGUgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmQnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0dST1VQLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLmNhcmRUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkQ2FyZFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChcbiAgICAgICFbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUlxuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLnJvbGxUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkUm9sbFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIHNoaWZ0S2V5OiBvcHRpb25zLmZhc3RGb3J3YXJkID8/IG9wdGlvbnMuZXZlbnQ/LnNoaWZ0S2V5ID8/IG9wdGlvbnMuZmFzdEZvcndhcmQgPz8gZmFsc2UsXG4gICAgICAgIGFsdEtleTogb3B0aW9ucy5ldmVudD8uYWx0S2V5ID8/IGZhbHNlLFxuICAgICAgICBpc0N0cmxLZXk6IGlzQ3RybEtleShvcHRpb25zLmV2ZW50ID8/IGZhbHNlKSxcbiAgICAgICAgY3JlYXRlRW5jb3VudGVyOiBvcHRpb25zLmNyZWF0ZUVuY291bnRlciA/PyBmYWxzZSxcbiAgICAgICAgb3BlbkxpbmtUb29sOiBvcHRpb25zLm9wZW5MaW5rVG9vbCA/PyBmYWxzZSxcbiAgICAgICAgc2VuZFRvQ2hhdDogb3B0aW9ucy5zZW5kVG9DaGF0ID8/IGZhbHNlLFxuICAgICAgICBzZW5kVG9DbGlwYm9hcmQ6IG9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID8/IGZhbHNlLFxuICAgICAgICBpc0NvbWJhdDpcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdD8uY29udGFpbnMoJ2NvbWJhdCcpID8/IGZhbHNlLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA/PyBmYWxzZSxcbiAgICAgICAgYm9udXNEaWNlOiAwXG4gICAgICB9LFxuICAgICAgZGlhbG9nT3B0aW9uczoge1xuICAgICAgICByb2xsVHlwZTogb3B0aW9ucy5yb2xsVHlwZSxcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIGF0dHJpYnV0ZTogJycsXG4gICAgICAgIGNoYXRNZXNzYWdlOiBvcHRpb25zLmNoYXRNZXNzYWdlID8/IHRydWUsXG4gICAgICAgIGZvcmNlZENhcmRUeXBlOiBvcHRpb25zLmZvcmNlZENhcmRUeXBlID8/IGZhbHNlLFxuICAgICAgICBoaWRlRGlmZmljdWx0eTogb3B0aW9ucy5oaWRlRGlmZmljdWx0eSA/PyBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUM6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUjpcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuc2tpbGxJZCA9XG4gICAgICAgICAgb3B0aW9ucy5za2lsbElkID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaXRlbUlkID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuaXRlbUlkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID1cbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID1cbiAgICAgICAgICBvcHRpb25zLmF0dHJpYnV0ZSA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5hdHRyaWJ1dGUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkID8/XG4gICAgICAgICAgb3B0aW9ucy5hY3Rvci5pZFxuICAgICAgICBjb25maWcub3B0aW9ucy50b2tlbktleSA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkID8/XG4gICAgICAgICAgb3B0aW9ucy5hY3Rvci50b2tlbktleVxuICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsdGVybmF0aXYtc2tpbGwnKVxuICAgICAgICBjb25maWcub3B0aW9ucy5hY3RvciA9IG9wdGlvbnMuYWN0b3JcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDb21iYXRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvcklkID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICh0eXBlb2YgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3IgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yQWN0b3InKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBdPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgIWdhbWUudXNlci5pc0dNICYmXG4gICAgICAgICAgICAhY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXVxuICAgICAgICAgICAgICA/LnZhbHVlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuV2VhcG9uJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuYWx0S2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaGFzUGxheWVyT3duZXIgPVxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmhhc1BsYXllck93bmVyID8/IGZhbHNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cbiAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZhbHNlXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5ID1cbiAgICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHkgPz9cbiAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsW1xuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpXG4gICAgICAgICAgXVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0cmlnZ2VyIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjb25maWcgPSBDb0M3Q2hhdE1lc3NhZ2Uubm9ybWFsaXplUmVxdWVzdChvcHRpb25zKVxuICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleSkgJiZcbiAgICAgIGdhbWUudXNlci5pc0dNICYmXG4gICAgICBbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSlcbiAgICApIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQgfHwgY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkIHx8IGNvbmZpZy5vcHRpb25zLm9wZW5MaW5rVG9vbCB8fCBjb25maWcub3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FID09PSBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZVxuICAgICkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZUxpbmsoY29uZmlnKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBib251c0RpY2UgPSBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0/LmF0dHJpYnM/Lltjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVdPy5ib251c0RpY2VcbiAgICAgICAgICBpZiAoYm9udXNEaWNlKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNEaWNlID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtPy5jaGFyYWN0ZXJpc3RpY3M/Lltjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY10/LmJvbnVzRGljZVxuICAgICAgICAgIGlmIChib251c0RpY2UpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5pdGVtSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU1vZGlmaWVycyA9IE9iamVjdC52YWx1ZXMoY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLnNraWxscykuZmluZChrID0+IGsuZm91bmRyeUlEID09PSBjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtTW9kaWZpZXJzPy5ib251c0RpY2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGl0ZW1Nb2RpZmllcnMuYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gTWF0aC5taW4oTWF0aC5tYXgoY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIsIC0yKSwgMilcbiAgICAgIH1cbiAgICAgIGlmICghY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkpIHtcbiAgICAgICAgYXdhaXQgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZVJvbGwoY29uZmlnKVxuICAgICAgfVxuICAgICAgcmV0dXJuIENvQzdDaGF0TWVzc2FnZS5ydW5Sb2xsKGNvbmZpZylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTGluayAoY29uZmlnKSB7XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQzpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiAnQ29DN0xpbmsnXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5za2lsbElkKT8uc2hvcnROYW1lXG4gICAgICAgICAgICBpZiAoIWxpbmtEYXRhLm5hbWUpIHJldHVyblxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgbGlua0RhdGEubGlua1R5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFKSB7XG4gICAgICAgICAgICBpZiAoKGNvbmZpZy5vcHRpb25zLmFsdEtleSB8fCBjb25maWcub3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIpICYmIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUikge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhbk1pbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yPy5zeXN0ZW0/LnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gICAgICAgICAgICBsaW5rRGF0YS5zYW5NYXggPSBjb25maWcub3B0aW9ucy5hY3Rvcj8uc3lzdGVtPy5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja0ZhaWxsZWRcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhblJlYXNvbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlPy5sZW5ndGhcbiAgICAgICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLmFjdG9yLm5hbWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcub3B0aW9ucy5zZW5kVG9DaGF0KSB7XG4gICAgICAgICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKGxpbmtEYXRhKVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkKSB7XG4gICAgICAgICAgICBDb0M3TGluay5mcm9tRHJvcERhdGEobGlua0RhdGEpLnRoZW4obGluayA9PiB7XG4gICAgICAgICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKGxpbmsubGluaylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUobGlua0RhdGEsIHsgYWN0b3JzOiBbY29uZmlnLm9wdGlvbnMuYWN0b3JdLmZpbHRlcihhID0+IGEub3duZXJzLmxlbmd0aCksIGhhc01vZGlmaWVyczogY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUm9sbCAoY29uZmlnKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShjb25maWcuZGlhbG9nT3B0aW9ucylcbiAgICBpZiAodXNhZ2UpIHtcbiAgICAgIGNvbnN0IGNhcmRUeXBlID0gdXNhZ2UuZ2V0KCdjYXJkVHlwZScpXG4gICAgICBpZiAoY2FyZFR5cGUpIHtcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPSBjYXJkVHlwZVxuICAgICAgfVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKVxuICAgICAgKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJ1blJvbGwgKGNvbmZpZykge1xuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0s6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBzYW5EYXRhID0gYXdhaXQgU2FuRGF0YURpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgcHJvbXB0TGFiZWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmIChzYW5EYXRhKSB7XG4gICAgICAgICAgICBsZXQgc2FuTWluID0gc2FuRGF0YS5nZXQoJ3Nhbk1pbicpIHx8IDBcbiAgICAgICAgICAgIGxldCBzYW5NYXggPSBzYW5EYXRhLmdldCgnc2FuTWF4JykgfHwgMFxuICAgICAgICAgICAgY29uc3Qgc2FuUmVhc29uID0gc2FuRGF0YS5nZXQoJ3NhblJlYXNvbicpXG5cbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1pbikpKSBzYW5NaW4gPSBOdW1iZXIoc2FuTWluKVxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWF4KSkpIHNhbk1heCA9IE51bWJlcihzYW5NYXgpXG5cbiAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgICAgICAgICB7IHNhbk1pbiwgc2FuTWF4LCBzYW5SZWFzb24gfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNhbk1vZGlmaWVyOiBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllcixcbiAgICAgICAgICAgICAgICBzYW5EaWZmaWN1bHR5OiBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBjb25maWcub3B0aW9ucy5zaGlmdEtleVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3RvcklkXG4gICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllclxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgICAgY2hlY2suc3RhbmRieSA9XG4gICAgICAgICAgIWNvbmZpZy5vcHRpb25zLnByZXZlbnRTdGFuZGJ5ICYmXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lclxuICAgICAgICBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwpIHtcbiAgICAgICAgICBjaGVjay5za2lsbCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbEF0dHJpYnV0ZShjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5jaGF0TWVzc2FnZSkge1xuICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXN1bHQ6IGNoZWNrLm1vZGlmaWVkUmVzdWx0LFxuICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogY2hlY2sucm9sbGVkU3VjY2Vzc0xldmVsLFxuICAgICAgICAgIGlzRnVtYmxlOiBjaGVjay5pc0Z1bWJsZSxcbiAgICAgICAgICBpc0NyaXRpY2FsOiBjaGVjay5pc0NyaXRpY2FsLFxuICAgICAgICAgIHN1Y2Nlc3NMZXZlbHM6IHtcbiAgICAgICAgICAgIDE6IGNoZWNrLnJlZ3VsYXJUaHJlc2hvbGQsXG4gICAgICAgICAgICAyOiBjaGVjay5oYXJkVGhyZXNob2xkLFxuICAgICAgICAgICAgMzogY2hlY2suZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFzc2VkOiBjaGVjay5wYXNzZWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORUQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgY2hlY2suYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgY2hlY2suc2tpbGxJZCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBjaGVjay5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgICBsZXQgZGF0YSA9IHt9XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgICAgIGNvbWJhdDogY29uZmlnLm9wdGlvbnMuaXNDb21iYXQsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBjb25maWcub3B0aW9ucy5pdGVtSWRcbiAgICAgICAgICAgIGNoZWNrLndlYXBvbkFsdFNraWxsID0gY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgICAgIGNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPcHBvc2VkIHJvbGxlZCBjYW4ndCBiZSBwdXNoZWQuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YS5yb2xsID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgZGF0YS5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29uQ2hlY2sge1xuICBjb25zdHJ1Y3RvciAoYWN0b3JJZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIpIHtcbiAgICB0aGlzLmNoZWNrID0gbmV3IENvQzdDaGVjayhhY3RvcklkKVxuICAgIHRoaXMuY2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnY29uJ1xuICAgIHRoaXMuY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmNoZWNrLmRlbnlQdXNoID0gdHJ1ZVxuICAgIHRoaXMuYWN0b3JJZCA9IGFjdG9ySWRcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcklkKSByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGFjdG9ySWQgKHgpIHtcbiAgICB0aGlzLl9hY3RvcklkID0geFxuICAgIHRoaXMuY2hlY2suYWN0b3IgPSB4XG4gIH1cblxuICBnZXQgYWN0b3JJZCAoKSB7XG4gICAgaWYgKHRoaXMuX2FjdG9ySWQpIHJldHVybiB0aGlzLl9hY3RvcklkXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgcmV0dXJuIHRoaXMuYWN0b3IudG9rZW5LZXlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGlzU3VjY2VzcyAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2spIHJldHVybiB0aGlzLmNoZWNrLmlzU3VjY2Vzc1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNSb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmNoZWNrICYmIHRoaXMuY2hlY2suZGljZXMgJiYgdGhpcy5jaGVjay5kaWNlcy50b3RhbCkgcmV0dXJuIHRydWVcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGNvbkNoZWNrLCBjYXJkKVxuICAgIGNvbnN0IGh0bWxDaGVjayA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChodG1sQ2hlY2ssIGNvbkNoZWNrLmNoZWNrKVxuICAgIGNvbkNoZWNrLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIHJldHVybiBjb25DaGVja1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2hlY2tFbGVtZW50ICgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMuY2hlY2spXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIGlmIChodG1sRWxlbWVudCkge1xuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2hhdC1jYXJkJywgJ2l0ZW0tY2FyZCcsICdyb2xsLWNhcmQnKVxuICAgICAgcmV0dXJuIGh0bWxFbGVtZW50XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXG5cbiAgICBpZiAoZmFzdEZvcndhcmQpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbENvbigpXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcbiAgICB9XG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlblxuICAgICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sRWxlbWVudC5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgICkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpIC8vIENoYW5nZSBmb3IgdXNlclxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJvbGxDb24gKCkge1xuICAgIHRoaXMuY2hlY2suaGlkZURpY2VSZXN1bHQgPSB0cnVlXG4gICAgYXdhaXQgdGhpcy5jaGVjay5fcGVyZm9ybSgpXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgIXRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFwcGxpZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuc2VsZWN0LXNraWxsJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdFNraWxsQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RTa2lsbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXS5zZWxlY3RlZCA9IHRydWVcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDBcbiAgICB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrXG4gICAgY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnNraWxsLXNlbGVjdG9yJylcbiAgICBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50JylcbiAgICBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApIC8vIFJlbmRlciB0ZW1wbGF0ZSBidWcgYXZlYyBjZXJ0YWluZXMgZGF0YVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTa2lsbFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkYXRhLmFkZGVkID49IGRhdGEub3B0aW9uc0NvdW50KSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZGF0YS5za2lsbHMuZmlsdGVyKHNraWxsID0+IHNraWxsLnNlbGVjdGVkKVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoc2VsZWN0ZWQpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnc2tpbGwtc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBQb2ludFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uQnV0dG9uQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1MaXN0ID0gbGkuY2xvc2VzdCgnLml0ZW0tbGlzdCcpXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3RhYmxlJykpIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tpdGVtLmRhdGFzZXQua2V5XS5vcHRpb25hbCA9IGZhbHNlXG4gICAgfVxuICAgICQobGkpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpXG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5zZWxlY3RlZCA9IHRydWVcbiAgICBjb25zdCB0b3RhbFBvaW50cyA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcbiAgICB0b3RhbFBvaW50cy5pbm5lclRleHQgPVxuICAgICAgdGhpcy5kYXRhLmRhdGEudG90YWwgK1xuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5tdWx0aXBsaWVyICpcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS52YWx1ZVxuICAgIGNvbnN0IGJ1dHRvbiA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXG4gICAgdGhpcy5kYXRhLmRhdGEucmVzb2x2ZWQgPSB0cnVlXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XG4gICAgLy8gZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vIGlmKCAhdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMDtcbiAgICAvLyB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrO1xuICAgIC8vIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb2ludC1zZWxlY3RvcicpO1xuICAgIC8vIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKTtcbiAgICAvLyBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZDtcbiAgICAvLyBpZiggdGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9ucykgdGhpcy5jbG9zZSgpO1xuICAgIC8vIHJldHVybiBldmVudDtcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgc3VwZXIuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvcG9pbnQtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgUG9pbnRTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc29sdmVkKSByZXR1cm4gcmVzb2x2ZShkYXRhKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIENoYXJhY1NlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgdGhpcy5kYXRhLmRhdGEuc2VsZWN0ZWQgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGVkKSByZXR1cm4gcmVzb2x2ZShkYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCAqL1xuZXhwb3J0IGNsYXNzIENoYXJhY1JvbGxEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgb3B0aW9ucykge1xuICAgIHN1cGVyKGRhdGEsIG9wdGlvbnMpXG5cbiAgICB0aGlzLnJvbGxlZCA9IGRhdGEucm9sbGVkIHx8IHt9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5vbignY2hhbmdlJywgJ2lucHV0JywgdGhpcy5fb25DaGFuZ2VJbnB1dC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ3N1Ym1pdCcsICdmb3JtJywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vblJvbGxDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbmNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuZGVjcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJlc2V0LWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUmVzZXRDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2J1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5pbmNyZWFzZUNoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMucmVzZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGlmIChhY3Rpb24gPT09ICdyb2xsJykge1xuICAgICAgZm9yIChjb25zdCBjaGFyIG9mIFtcbiAgICAgICAgJ3N0cicsXG4gICAgICAgICdjb24nLFxuICAgICAgICAnc2l6JyxcbiAgICAgICAgJ2RleCcsXG4gICAgICAgICdhcHAnLFxuICAgICAgICAnaW50JyxcbiAgICAgICAgJ3BvdycsXG4gICAgICAgICdlZHUnLFxuICAgICAgICAnbHVjaydcbiAgICAgIF0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcilcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgICBpZiAoYWN0aW9uID09PSAndmFsaWRhdGUnICYmIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlKSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICBpZiAoaW5wdXQgJiYgZm9ybXVsYSkge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcihmb3JtdWxhKSkpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEpXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VSb2xsaW5nQ2hhcmFjdGVyaXN0aWMnLCB7XG4gICAgICAgICAgICBsYWJlbDogdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3Rba2V5XS5sYWJlbCxcbiAgICAgICAgICAgIGZvcm11bGFcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHJvbGwudG90YWxcbiAgICAgIH0gZWxzZSBpbnB1dC52YWx1ZSA9IE51bWJlcihmb3JtdWxhKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkgdGhpcy5yb2xsZWQgPSB7fVxuICAgICAgdGhpcy5yb2xsZWRba2V5XSA9IHRydWVcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSArIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQgJiYgTnVtYmVyKGlucHV0LnZhbHVlKSA+IDApIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSAtIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gbnVsbFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gMFxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlSW5wdXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2lucHV0Lm5hbWVdID0gdmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgY2hlY2tUb3RhbCAoKSB7XG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCA9IDBcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNcbiAgICApKSB7XG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudmFsdWUnKVxuICAgICAgdmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudG90YWwnKVxuICAgIHRvdGFsLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWxcblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPSBPYmplY3QudmFsdWVzKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpLmZpbHRlcih2YWwgPT4gaXNOYU4ocGFyc2VJbnQodmFsKSkpLmxlbmd0aCA9PT0gMFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3Qgcm9sbGVkID0ge31cbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcbiAgICAgICAgcm9sbGVkW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEucG9pbnRzV2FybmluZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItcm9sbC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1JvbGxEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgcm9sbGVkLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWxpZGF0ZSkgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoXG4gICAgc2tpbGxzLFxuICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICBiYXNlVmFsdWUgPSBudWxsLFxuICAgIG5hbWUgPSBudWxsXG4gICkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QuaHRtbCcsXG4gICAgICB7XG4gICAgICAgIGhhc1NraWxsczogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxscyxcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogbmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLCB7IG5hbWUgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NraWxsLW5hbWUtZGlhbG9nJ10sXG4gICAgICB0aXRsZTogJycsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QuaGJzJyxcbiAgICAgIHdpZHRoOiA0MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0aXRsZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICBzcGVjaWFsaXphdGlvbjogdGhpcy5vYmplY3Quc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdbbmFtZT1leGlzdGluZy1za2lsbF0nKS5jaGFuZ2UodGhpcy5fb25TZWxlY3RDaGFuZ2UuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYW5nZSAoZXZlbnQpIHtcbiAgICB0aGlzLm9iamVjdC5zZWxlY3RlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub2JqZWN0LnNlbGVjdGVkID09PSAnJykge1xuICAgICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdmb3JtJylcbiAgICAgIHRoaXMub2JqZWN0Lm5hbWUgPSAob2JqLmZpbmQoJ2lucHV0W25hbWU9bmV3LXNraWxsLW5hbWVdJykudmFsKCkgPz8gJycpXG4gICAgICB0aGlzLm9iamVjdC5iYXNlVmFsdWUgPSAob2JqLmZpbmQoJ2lucHV0W25hbWU9YmFzZS12YWx1ZV0nKS52YWwoKSA/PyAnJylcbiAgICB9XG4gICAgaWYgKHRoaXMub2JqZWN0LnNlbGVjdGVkID09PSAnJyAmJiB0aGlzLm9iamVjdC5uYW1lID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMub2JqZWN0LnJlc29sdmUoe1xuICAgICAgc2VsZWN0ZWQ6IHRoaXMub2JqZWN0LnNlbGVjdGVkLFxuICAgICAgbmFtZTogdGhpcy5vYmplY3QubmFtZSxcbiAgICAgIGJhc2VWYWx1ZTogdGhpcy5vYmplY3QuYmFzZVZhbHVlXG4gICAgfSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoeyBza2lsbHMgPSBbXSwgYWxsb3dDdXN0b20gPSBmYWxzZSwgZml4ZWRCYXNlVmFsdWUgPSBmYWxzZSwgc3BlY2lhbGl6YXRpb25OYW1lID0gJycsIGxhYmVsID0gJycsIGJhc2VWYWx1ZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgY29uc3Qgc2VsZWN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHNraWxscykge1xuICAgICAgc2VsZWN0LnB1c2goe1xuICAgICAgICBpZDogc2tpbGwuaWQsXG4gICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXG4gICAgICAgIGJhc2U6IHNraWxsLnN5c3RlbS5iYXNlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBuZXcgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyh7XG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICAgICAgYWxsb3dDdXN0b20sXG4gICAgICAgIGZpeGVkQmFzZVZhbHVlLFxuICAgICAgICBhbGxvd1NlbGVjdDogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxsczogc2VsZWN0LFxuICAgICAgICBzZWxlY3RlZDogJycsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICBsYWJlbCxcbiAgICAgICAgYmFzZVZhbHVlLFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCB7fSkucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxWYWx1ZURpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG5hbWUgPSBudWxsLCBiYXNlVmFsdWUgPSBudWxsKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC12YWx1ZS5odG1sJyxcbiAgICAgIHsgYmFzZTogYmFzZVZhbHVlLCBuYW1lIH1cbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsVmFsdWUnLCB7IG5hbWUgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlUmVzb2x0aW9uIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGluaXRpYXRvck1lc3NhZ2UgPSBudWxsLFxuICAgIHRhcmdldE1lc3NhZ2UgPSBudWxsLFxuICAgIG1lc3NhZ2VJZCA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy5pbml0aWF0b3JNZXNzYWdlID0gaW5pdGlhdG9yTWVzc2FnZVxuICAgIHRoaXMudGFyZ2V0TWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICB9XG5cbiAgYXN5bmMgcHJlQ3JlYXRlTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7YWN0b3I6IHRoaXMuYWN0b3J9KTtcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgLy8gY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlcjtcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIC8vIEFkZCBpbWFnZSB0byBjYXJkLlxuICAgIC8vIGRhdGEuZmxhZ3MgPSB7XG4gICAgLy8gICBpbWc6IHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW4uZGF0YS5pbWc6IHRoaXMuYWN0b3IuaW1nXG4gICAgLy8gfTtcblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IGNoYXRNZXNzYWdlLmlkXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldE1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLnRhcmdldE1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMudGFyZ2V0LmFjdG9yS2V5KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3JNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQodGhpcy5pbml0aWF0b3JNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvclRva2VuICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3IpIHtcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmluaXRpYXRvci5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmUgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnbm9SZXNwb25zZSc6XG4gICAgICAgICAgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ2RvZGdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gVE9ETyB2ZXJpZmllciBsYSBjb25kaXRpb24gPD0gdnMgPFxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmRhdGEuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWF0b3JNaXNzZWQnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgaWYgKHRoaXMud2lubmVyLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAodGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy53aW5uZXIudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy53aW5uZXIudG9rZW4uZG9jdW1tZW50XG4gICAgICAgIGlmICh0aGlzLndpbm5lci5hY3Rvcikgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLndpbm5lci5hY3RvclxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IHRoaXMud2lubmVyID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSkgOiBudWxsXG4gICAgICBjb25zdCB1c2VyID1cbiAgICAgICAgdGhpcy53aW5uZXIgJiYgdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgID8gdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgIDogZ2FtZS51c2VyXG5cbiAgICAgIGxldCBtc2dcbiAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignUmVzb2xpdGlvbiBjYXJkIG1pc3NpbmcsIHdhcyBkZWxldGVkID8nKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChzcGVha2VyKSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uaHRtbCdcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZVRhcmdldCBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBzdXBlcihhY3RvcktleSwgZmFzdEZvcndhcmQpXG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5pbml0aWF0b3JLZXkgPSBudWxsXG4gICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQgPSBwYXJlbnRNZXNzYWdlSWRcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcblxuICAgIHRoaXMub3V0bnVtYmVyZWQgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmRpY2VNb2RpZmllciA9IDBcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMuc2tpbGxJZCA9IG51bGxcbiAgICB0aGlzLml0ZW1JZCA9IG51bGxcbiAgICB0aGlzLmRvZGdpbmcgPSBmYWxzZVxuICAgIHRoaXMubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgdGhpcy5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgIHRoaXMubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGFjdGlvblNlbGVjdGVkICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5kb2RnaW5nIHx8XG4gICAgICB0aGlzLm5vdFJlc3BvbmRpbmcgfHxcbiAgICAgIHRoaXMuZmlnaHRpbmdCYWNrIHx8XG4gICAgICB0aGlzLm1hbmV1dmVyaW5nXG4gICAgKVxuICB9XG5cbiAgZ2V0IGFjdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZG9kZ2luZykgcmV0dXJuICdkb2RnZSdcbiAgICBpZiAodGhpcy5ub3RSZXNwb25kaW5nKSByZXR1cm4gJ25vUmVzcG9uc2UnXG4gICAgaWYgKHRoaXMuZmlnaHRpbmdCYWNrKSByZXR1cm4gJ2ZpZ2h0QmFjaydcbiAgICBpZiAodGhpcy5tYW5ldXZlcmluZykgcmV0dXJuICdtYW5ldXZlcidcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICB9XG5cbiAgc2V0IGluaXRpYXRvcktleSAoeCkge1xuICAgIHRoaXMuX2luaXRpYXRvcktleSA9IHhcbiAgICB0aGlzLnRhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBpbml0aWF0b3JLZXkgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAoIXRoaXMuX2luaXRpYXRvciAmJiB0aGlzLnBhcmVudE1lc3NhZ2VJZCkge1xuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5faW5pdGlhdG9yKSB0aGlzLl9pbml0aWF0b3JLZXkgPSB0aGlzLl9pbml0aWF0b3IuYWN0b3JLZXlcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGBObyBpbml0aWF0b3IgZm91bmQgZm9yIHRhcmdldCA6ICR7dGhpcy5hY3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pbml0aWF0b3JLZXlcbiAgfVxuXG4gIGdldCBpbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5pbml0aWF0b3JLZXkpIHtcbiAgICAgIGlmICh0aGlzLnBhcmVudE1lc3NhZ2VJZCkge1xuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgICApXG4gICAgICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgICB9IGVsc2UgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuaW5pdGlhdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCBtZWxlZUluaXRpYXRvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3IpIHtcbiAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIHRhcmdldC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUudGFyZ2V0JylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgdGFyZ2V0LnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIHN3aXRjaCAoZmxhZykge1xuICAgICAgY2FzZSAnb3V0bnVtYmVyZWQnOlxuICAgICAgY2FzZSAnc3VycHJpc2VkJzpcbiAgICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPSBNYXRoLm1heCgtMiwgTWF0aC5taW4oMiwgcGFyc2VJbnQodGhpcy5kaWNlTW9kaWZpZXIsIDEwKSArICh0aGlzW2ZsYWddID8gMSA6IC0xKSkpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZVxuXG4gICAgbGV0IHVzZXIgPSBnYW1lLnVzZXJcbiAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxldCBvd25lcnMgPSBbXVxuICAgICAgY29uc3QgZ21zID0gZ2FtZS51c2Vycy5maWx0ZXIoYSA9PiBhLmlzR00pLm1hcChhID0+IGEuaWQpXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFjdG9yLm93bmVyc2hpcCkpIHtcbiAgICAgICAgaWYgKHYgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVIpIHtcbiAgICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBvd25lcnMgPSBnYW1lLnVzZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWdtcy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgb3duZXJzLnB1c2goaylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBjb250ZW50ID0gJydcbiAgICAgIHN3aXRjaCAob3duZXJzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgLy8gR01cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKHR5cGVvZiBnYW1lLnVzZXJzLmdldChvd25lcnNbMF0pICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0JylcbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgICAgICAgIGZvciAoY29uc3QgayBvZiBvd25lcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBnYW1lLnVzZXJzLmdldChrKVxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgICAgY29udGVudCArXG4gICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICtcbiAgICAgICAgICAgICAgICBrICtcbiAgICAgICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICAgICAgdXNlci5uYW1lICtcbiAgICAgICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICAgICAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXNlciA9IHRoaXMuYWN0b3IudXNlclxuICAgIH1cblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZS5pZFxuICAgIHJldHVybiBtZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00gJiYgbWVzc2FnZS51c2VyLmlkICE9PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvSW50ZXJhY3RXaXRoQ2hhdENhcmQnKVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgYXN5bmMgZ2V0VXBkYXRlZENoYXRDYXJkICgpIHtcbiAgICByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKS50aGVuKGh0bWwgPT4ge1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNlbGVjdGVkIChjYXJkLCBldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBudWxsXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICBjaGVjay5hY3Rpb24gPSB0aGlzLmFjdGlvblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuZGljZU1vZGlmaWVyXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBhc3luYyBwdWJsaXNoTm9SZXBvbnNlUmVzdWx0ICgpIHtcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIHRoaXMubm90UmVzcG9uZGluZyA9IHRydWVcbiAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcblxuICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG4gICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcblxuICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgYWN0b3JLZXkgPSBjYXJkLmRhdGFzZXQuYWN0b3JLZXlcbiAgICBjb25zdCBwYXJlbnRNZXNzYWdlSWQgPSBjYXJkLmRhdGFzZXQucGFyZW50TWVzc2FnZUlkXG4gICAgY29uc3QgZmFzdEZvcndhcmQgPSBjYXJkLmRhdGFzZXQuZmFzdEZvcndhcmQgPT09ICd0cnVlJ1xuICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3TWVsZWVUYXJnZXQoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCwgZmFzdEZvcndhcmQpXG5cbiAgICB0YXJnZXQucm9sbCA9IENvQzdSb2xsLmdldEZyb21DYXJkKGNhcmQpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGNhcmQpXG5cbiAgICBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICB0YXJnZXQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfSBlbHNlIHRhcmdldC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICB1cGdyYWRlUm9sbCAobHVja0Ftb3VudCwgbmV3U3VjY2Vzc0xldmVsLCBvbGRDYXJkKSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRpZG4ndCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgZGljZVRvdGFsLmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG9sZENhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZm91bmRyeSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsLCBDb0M3RGFtYWdlIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlSW5pdGlhdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG51bGxcbiAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICB0aGlzLm11bHRpcGxlU2hvdHMgPSBmYWxzZVxuICAgIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgIHRoaXMudG9rZW5LZXkgPSBudWxsXG4gICAgdGhpcy5haW1lZCA9IGZhbHNlXG4gICAgdGhpcy5ib251c0RpZUEgPSBmYWxzZVxuICAgIHRoaXMuYm9udXNEaWVCID0gZmFsc2VcbiAgICB0aGlzLnBlbmFsdHlEaWVBID0gZmFsc2VcbiAgICB0aGlzLnBlbmFsdHlEaWVCID0gZmFsc2VcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxuICAgIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIGZvciAoY29uc3QgdCBvZiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xuICAgICAgdGFyZ2V0LnRva2VuID0gdFxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLl90YXJnZXRzID0gW3RoaXMuX3RhcmdldHNbMF1dXG4gICAgICAvLyB0ZW1wb3JhcmlseSBvbmx5IGFsbG93IG9uZSB0YXJnZXRcbiAgICAgIHRoaXMuX3RhcmdldHNbMF0uYWN0aXZlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcbiAgICAgIHRhcmdldC5hY3RpdmUgPSB0cnVlXG4gICAgICB0aGlzLl90YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH1cbiAgICBpZiAoYWN0b3JLZXkpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgdGhpcy50b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLnRva2VuKSB0aGlzLnRva2VuS2V5ID0gYWN0b3IudG9rZW5LZXlcbiAgICAgIGlmIChpdGVtSWQpIHtcbiAgICAgICAgY29uc3Qgd2VhcG9uID0gYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5zaW5nbGVTaG90KSB7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNob3QgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbktleSkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuX3RhcmdldHMpIHtcbiAgICAgICAgaWYgKHQudG9rZW4gJiYgdGhpcy50b2tlbikge1xuICAgICAgICAgIHQuZGlzdGFuY2UgPSBjaGF0SGVscGVyLmdldERpc3RhbmNlKHQudG9rZW4sIHRoaXMudG9rZW4pXG4gICAgICAgICAgdC5yb3VuZGVkRGlzdGFuY2UgPSBNYXRoLnJvdW5kKHQuZGlzdGFuY2UudmFsdWUgKiAxMDApIC8gMTAwXG4gICAgICAgICAgdC5kaXN0YW5jZVVuaXQgPSB0LmRpc3RhbmNlLnVuaXRcbiAgICAgICAgICBjb25zdCBkaXN0SW5ZZCA9XG4gICAgICAgICAgICBNYXRoLnJvdW5kKGNoYXRIZWxwZXIudG9ZYXJkcyh0LmRpc3RhbmNlKSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICAvLyBpZiggZGlzdEluWWQpe1xuICAgICAgICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICAgICAgICB0LnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCBwYlJhbmdlSW5ZZCA9XG4gICAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgLyAxNVxuICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHBiUmFuZ2VJbllkKSB0LnRvZ2dsZUZsYWcoJ3BvaW50QmxhbmtSYW5nZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0LnBvaW50QmxhbmtSYW5nZSAhPT0gdHJ1ZSAmJiB0aGlzLndlYXBvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLmJhc2VSYW5nZSkge1xuICAgICAgICAgICAgICB0LmJhc2VSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0Lm91dE9mUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24ubG9uZ1JhbmdlKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHQub3V0T2ZSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSkgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDJcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDIgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0KSB0Lm91dE9mUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEodC5iYXNlUmFuZ2UgfHwgdC5sb25nUmFuZ2UgfHwgdC5leHRyZW1lUmFuZ2UgfHwgdC5vdXRPZlJhbmdlKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB9XG4gICAgICAgIH0gZWxzZSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbVxuICB9XG5cbiAgZ2V0IHRhcmdldHMgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0cykgdGhpcy5fdGFyZ2V0cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHNcbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldHMgJiYgdGhpcy50YXJnZXRzLmxlbmd0aCkgcmV0dXJuIHRoaXMudGFyZ2V0cy5wb3AoKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgbWFpbldlYXBvblNraWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gIH1cblxuICBnZXQgYXV0b1dlYXBvblNraWxsICgpIHtcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLndlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWFpbldlYXBvblNraWxsXG4gIH1cblxuICBnZXQgYXV0b0ZpcmUgKCkge1xuICAgIHJldHVybiB0aGlzLmJ1cnN0IHx8IHRoaXMuZnVsbEF1dG9cbiAgfVxuXG4gIGdldCBtdWx0aVRhcmdldCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbEF1dG8gfHwgdGhpcy5tdWx0aXBsZVNob3RzXG4gIH1cblxuICBnZXQgYWltaW5nICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9haW1pbmcpIHtcbiAgICAgIHRoaXMuX2FpbWluZyA9IHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdhaW1pbmcnKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWltaW5nXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0ICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMubGVuZ3RoKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzLmZpbmQodCA9PiB0LmFjdGl2ZSlcbiAgfVxuXG4gIGdldCBzaG90cyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fc2hvdHMpIHRoaXMuX3Nob3RzID0gW11cbiAgICByZXR1cm4gdGhpcy5fc2hvdHNcbiAgfVxuXG4gIGdldCBjdXJyZW50U2hvdFJhbmsgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3RzLmxlbmd0aCArIDFcbiAgfVxuXG4gIGdldCBhY3RpdmVUYXJnZXRTaG90RGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdERpZmZpY3VsdHkoKVxuICB9XG5cbiAgc2V0IGFpbWluZyAoYikge1xuICAgIHRoaXMuX2FpbWluZyA9IGJcbiAgfVxuXG4gIGdldCBkaWRBbnlTaG90SGl0ICgpIHtcbiAgICBsZXQgYW55SGl0ID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgYW55SGl0ID0gYW55SGl0IHx8IHIuaXNTdWNjZXNzXG4gICAgfVxuICAgIHJldHVybiBhbnlIaXRcbiAgfVxuXG4gIGdldCBzdWNjZXNzZnVsSGl0cyAoKSB7XG4gICAgY29uc3QgaGl0cyA9IFtdXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tpbmRleF0uaXNTdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGhpdCA9IHtcbiAgICAgICAgICByb2xsOiB0aGlzLnJvbGxzW2luZGV4XSxcbiAgICAgICAgICBzaG90OiB0aGlzLnNob3RzW2luZGV4XVxuICAgICAgICB9XG4gICAgICAgIGhpdHMucHVzaChoaXQpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoaXRzLmxlbmd0aCAhPT0gMCkgcmV0dXJuIGhpdHNcbiAgICBlbHNlIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2hvdEZpcmVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cyA/IHRoaXMuc2hvdHMubGVuZ3RoIDogMFxuICB9XG5cbiAgZ2V0IHRvdGFsQW1tbyAoKSB7XG4gICAgcmV0dXJuIHRoaXMud2VhcG9uLmdldEJ1bGxldExlZnQoKVxuICB9XG5cbiAgZ2V0IG1heFNob3RzICgpIHtcbiAgICBpZiAodGhpcy5mdWxsQXV0bykgcmV0dXJuICfiiJ4nXG4gICAgLy8gcmV0dXJuIHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQubWF4O1xuXG4gICAgcmV0dXJuIHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQubWF4XG4gICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KVxuICAgICAgOiAxXG4gIH1cblxuICBnZXQgaWdub3JlQW1tbyAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3JlZ2FyZEFtbW8nKVxuICB9XG5cbiAgZ2V0IGlnbm9yZVVzZXNQZXJSb3VuZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3JlZ2FyZFVzZVBlclJvdW5kJylcbiAgfVxuXG4gIGdldCBvdXRPZkFtbW8gKCkge1xuICAgIGlmICh0aGlzLmlnbm9yZUFtbW8pIHJldHVybiBmYWxzZVxuICAgIGlmICh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID49IHRoaXMud2VhcG9uLmdldEJ1bGxldExlZnQoKSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBvdXRPZlNob3RzICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVVc2VzUGVyUm91bmQpIHJldHVybiBmYWxzZVxuICAgIGlmICh0aGlzLnNob3RzKSByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggPj0gdGhpcy5tYXhTaG90c1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHZvbGxleVNpemUgKCkge1xuICAgIGlmICghdGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0bykgcmV0dXJuIDFcbiAgICBpZiAodGhpcy5fdm9sbGV5U2l6ZSkgcmV0dXJuIHRoaXMuX3ZvbGxleVNpemVcbiAgICBjb25zdCBzaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIHJldHVybiBzaXplIDwgMyA/IDMgOiBzaXplXG4gIH1cblxuICBzZXQgdm9sbGV5U2l6ZSAoeCkge1xuICAgIGlmICh4ID49IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkpIHtcbiAgICAgIHRoaXMuX3ZvbGxleVNpemUgPSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApXG4gICAgfSBlbHNlIGlmICh4IDw9IDMpIHtcbiAgICAgIHRoaXMuX3ZvbGxleVNpemUgPSAzXG4gICAgfVxuICAgIHRoaXMuX3ZvbGxleVNpemUgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IGlzVm9sbGV5TWluU2l6ZSAoKSB7XG4gICAgaWYgKHRoaXMudm9sbGV5U2l6ZSA9PT0gMykgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1heFNpemUgKCkge1xuICAgIGNvbnN0IG1heFNpemUgPVxuICAgICAgTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKSA8IDNcbiAgICAgICAgPyAzXG4gICAgICAgIDogTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIGlmIChtYXhTaXplID09PSB0aGlzLnZvbGxleVNpemUpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXRUYXJnZXRGcm9tS2V5IChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4ga2V5ID09PSB0LmFjdG9yS2V5KVxuICB9XG5cbiAgY2FsY1RhcmdldHNEaWZmaWN1bHR5ICgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy50YXJnZXRzKSB7XG4gICAgICB0LnNob3REaWZmaWN1bHR5ID0gdGhpcy5zaG90RGlmZmljdWx0eSh0KVxuICAgIH1cbiAgfVxuXG4gIGdldCBjYWxjdWxhdGVkQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2NhbGN1bGF0ZWRNb2RpZmllciA+IDIgPyB0aGlzLl9jYWxjdWxhdGVkTW9kaWZpZXIgOiAwKVxuICB9XG5cbiAgZ2V0IGNhbGN1bGF0ZWRQZW5hbHR5RGljZSAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9jYWxjdWxhdGVkTW9kaWZpZXIgPCAtMiA/IC10aGlzLl9jYWxjdWxhdGVkTW9kaWZpZXIgOiAwKVxuICB9XG5cbiAgc2hvdERpZmZpY3VsdHkgKHQgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdCB8fCB0aGlzLmFjdGl2ZVRhcmdldFxuICAgIGxldCBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICBpZiAodC5sb25nUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5sb25nLmRhbWFnZVxuICAgICAgaWYgKHQuZXh0cmVtZVJhbmdlKSBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2VcbiAgICB9XG4gICAgbGV0IG1vZGlmaWVyID0gcGFyc2VJbnQodGFyZ2V0Lm1vZGlmaWVyLCAxMClcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAodGhpcy5ib251c0RpZUEpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5ib251c0RpZUIpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5wZW5hbHR5RGllQSkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnBlbmFsdHlEaWVCKSBtb2RpZmllci0tXG4gICAgdGhpcy5fY2FsY3VsYXRlZE1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfSBlbHNlIGlmIChtb2RpZmllciA+IDIpIHtcbiAgICAgIG1vZGlmaWVyID0gMlxuICAgIH1cblxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ1JlZ3VsYXInXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IGRpZmZpY3VsdHkpIGRpZmZpY3VsdHlOYW1lID0gJ0hhcmQnXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnRXh0cmVtZSdcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0NyaXRpY2FsJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdJbXBvc3NpYmxlJ1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogZGlmZmljdWx0eSxcbiAgICAgIG5hbWU6IGRpZmZpY3VsdHlOYW1lLFxuICAgICAgbW9kaWZpZXIsXG4gICAgICBkYW1hZ2UsXG4gICAgICBpbXBvc3NpYmxlOiBkaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvb3QgYXQgdGhlIGFjdGl2ZSB0YXJnZXQuIEFkZCBpdCB0byB0aGUgbGlzdCBvZiBzaG90cy5cbiAgICogVE9ETyA6IHJlY2FsY3VsZXIgbGEgZGlmZmljdWx0w6kgZGUgdG91cyBsZXMgc2hvdHMgIS5cbiAgICovXG4gIGFkZFNob3RBdEN1cnJlbnRUYXJnZXQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBzaG90ID0ge1xuICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcbiAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0aXZlVGFyZ2V0LmFjdG9yS2V5LFxuICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICBtb2RpZmllcjogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcbiAgICAgIGJ1bGxldHNTaG90OiAxLFxuICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICBidWxsZXRzU2hvdFRyYW5zaXQ6IDEsXG4gICAgICB0cmFuc2l0OiBmYWxzZVxuICAgIH1cblxuICAgIGxldCBidWxsZXRMZWZ0ID0gdGhpcy50b3RhbEFtbW8gLSB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkXG5cbiAgICBpZiAodGhpcy5mdWxsQXV0bykge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFNob3RSYW5rID4gMSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1Nob3QgPSB0aGlzLnNob3RzW3RoaXMuY3VycmVudFNob3RSYW5rIC0gMl1cbiAgICAgICAgaWYgKHByZXZpb3VzU2hvdC5hY3RvcktleSAhPT0gdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpIHtcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UoXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShwcmV2aW91c1Nob3QuYWN0b3JLZXkpLFxuICAgICAgICAgICAgY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpXG4gICAgICAgICAgKVxuICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBNYXRoLmZsb29yKGNoYXRIZWxwZXIudG9ZYXJkcyhkaXN0YW5jZSkpXG4gICAgICAgICAgaWYgKHNob3QudHJhbnNpdEJ1bGxldHMgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgICAgICBzaG90LnRyYW5zaXRCdWxsZXRzID0gYnVsbGV0TGVmdFxuICAgICAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9XG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICAgICAgICBzaG90LnRyYW5zaXQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSB0aGlzLnZvbGxleVNpemVcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90IDw9IDMpIHNob3QuYnVsbGV0c1Nob3QgPSAzXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICAgIC8vIGJ1bGxldHNTaG90VHJhbnNpdCBpcyBmb3IgbG9jYWxpemluZyBDb0M3LlNob3RCdWxsZXRzIHVzaW5nIHBhcmFtZXRlcnMsIGxvY2FsaXplIGRvZXMgbm90IGFjY2VwdCBhZGRpbmcgYSBwYXJhbWV0ZXIgYXMgYSBzdW0gb2Ygc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHMsIHNvIEkgY3JlYXRlIGEgbmV3IHZhbHVlIGluIGFkdmFuY2UgdG8gdXNlIGluc3RlYWRcbiAgICAgIHNob3QuYnVsbGV0c1Nob3RUcmFuc2l0ID0gc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVyc3QpIHtcbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgIDogMVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBidWxsZXRMZWZ0XG4gICAgICAgIGJ1bGxldExlZnQgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC5idWxsZXRzU2hvdFxuXG4gICAgaWYgKHRoaXMuYWltaW5nKSB7XG4gICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICB0aGlzLmFpbWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvcmFuZ2UtaW5pdGlhdG9yLmh0bWwnXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgLy8gY29uc3QgZWxlbWVudCA9ICQoaHRtbClbMF07XG4gICAgLy8gY29uc3QgdGFyZ2V0RWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRhcmdldFRlc3QnKTtcbiAgICAvLyB0aGlzLnRhcmdldC5hdHRhY2hUb0VsZW1lbnQodGFyZ2V0RWxlbWVudCk7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgLy8gaWYoIHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZTtcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnc2luZ2xlU2hvdCcgfHxcbiAgICAgIGZsYWcgPT09ICdtdWx0aXBsZVNob3RzJyB8fFxuICAgICAgZmxhZyA9PT0gJ2Z1bGxBdXRvJ1xuICAgICkge1xuICAgICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmIChmbGFnID09PSAnZnVsbEF1dG8nKSB0aGlzLmJ1cnN0ID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnYnVyc3QnKSB7XG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmICghdGhpcy5zaW5nbGVTaG90ICYmICF0aGlzLm11bHRpcGxlU2hvdHMpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgIHRoaXMuYnVyc3QgPSAhdGhpcy5idXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICAgIGNvbnNvbGUubG9nKGZsYWcsIHRoaXNbZmxhZ10pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZUNhcmQgKCkge1xuICAgIHRoaXMucm9sbHMgPSBbXVxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBsZXQgd2VhcG9uTWFsZnVuY3Rpb24gPSBmYWxzZVxuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2hpbGUgKCF3ZWFwb25NYWxmdW5jdGlvbiAmJiB0aGlzLnNob3RzLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCB0aGlzLnNob290QXRUYXJnZXQodGhpcy5zaG90c1tpbmRleF0pXG4gICAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsLmRpY2Uucm9sbClcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoXG4gICAgICAgICAgcGFyc2VJbnQodGhpcy5zaG90c1tpbmRleF0uYnVsbGV0c1Nob3QpICtcbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLnRyYW5zaXRCdWxsZXRzKVxuICAgICAgICApXG4gICAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgICAgcm9sbC5pc1N1Y2Nlc3MgPSBmYWxzZVxuICAgICAgICAgIHdlYXBvbk1hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGluZGV4KytcbiAgICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCB0aGlzLnNob290QXRUYXJnZXQoKVxuICAgICAgaWYgKHJvbGwuZGljZT8ucm9sbCkge1xuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsLmRpY2Uucm9sbClcbiAgICAgIH1cbiAgICAgIGxldCBidWxsZXRGaXJlZCA9IHRoaXMuYnVyc3RcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxuICAgICAgICA6IDFcbiAgICAgIGlmIChidWxsZXRGaXJlZCA+PSB0aGlzLnRvdGFsQW1tbykgYnVsbGV0RmlyZWQgPSB0aGlzLnRvdGFsQW1tb1xuICAgICAgY29uc3Qgc2hvdCA9IHtcbiAgICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcbiAgICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSxcbiAgICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxuICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyLFxuICAgICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcbiAgICAgICAgYnVsbGV0c1Nob3Q6IGJ1bGxldEZpcmVkLFxuICAgICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgICAgdHJhbnNpdDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMud2VhcG9uLnNob290QnVsbGV0cyhidWxsZXRGaXJlZClcblxuICAgICAgaWYgKHJvbGwuaGFzTWFsZnVuY3Rpb24pIHtcbiAgICAgICAgcm9sbC5pc1N1Y2Nlc3MgPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gICAgICB0aGlzLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgc2hvb3RBdFRhcmdldCAoc2hvdCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBzaG90XG4gICAgICA/IHRoaXMuZ2V0VGFyZ2V0RnJvbUtleShzaG90LmFjdG9yS2V5KVxuICAgICAgOiB0aGlzLmFjdGl2ZVRhcmdldFxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgY2hlY2suYWN0b3JLZXkgPSB0aGlzLmFjdG9yS2V5XG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgY2hlY2suaXRlbSA9IHRoaXMuaXRlbUlkXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGlmICh0aGlzLmF1dG9GaXJlKSBjaGVjay5za2lsbCA9IHRoaXMuYXV0b1dlYXBvblNraWxsXG4gICAgZWxzZSBjaGVjay5za2lsbCA9IHRoaXMubWFpbldlYXBvblNraWxsXG4gICAgaWYgKHRoaXMubXVsdGlUYXJnZXQpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBzaG90LmRpZmZpY3VsdHlcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHNob3QubW9kaWZpZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgMVxuICAgICAgaWYgKHRoaXMuYWltaW5nKSB7XG4gICAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5haW1lZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbFxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXJcbiAgICB9XG5cbiAgICBjaGVjay5kZXRhaWxzID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRhcmdldCcpfTogJHt0YXJnZXQubmFtZX1gXG4gICAgY2hlY2sudGFyZ2V0S2V5ID0gdGFyZ2V0LmFjdG9yS2V5XG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIGNoYW5nZVZvbGxleVNpemUgKHgpIHtcbiAgICB0aGlzLnZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemUgKyB4XG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnJhbmdlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LWZsYWcnKSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXQnKVxuICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC50YXJnZXRLZXkpXG4gICAgICAgIGluaXRpYXRvci50YXJnZXRzW2tleV0udG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICB9IGVsc2UgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBwYXNzUm9sbCAocm9sbEluZGV4KSB7XG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChyb2xsLmx1Y2tOZWVkZWQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gcm9sbC5kaWZmaWN1bHR5XG4gICAgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICB1cGdyYWRlUm9sbCAocm9sbEluZGV4LCB1cGdyYWRlaW5kZXgpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gcm9sbC5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHJvbGwuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKClcbiAgICByYW5nZUluaXRpYXRvci5fdGFyZ2V0cyA9IFtdXG4gICAgaWYgKG1lc3NhZ2VJZCkgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgZWxzZSBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9XG5cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJhbmdlSW5pdGlhdG9yLCBjYXJkKVxuICAgIGNvbnN0IGNhcmRUYXJnZXRzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICBmb3IgKGNvbnN0IHQgb2YgY2FyZFRhcmdldHMpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdSYW5nZVRhcmdldC5nZXRGcm9tRWxlbWVudCh0KVxuICAgICAgcmFuZ2VJbml0aWF0b3IudGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkU2hvdHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaG90JylcbiAgICBpZiAoY2FyZFNob3RzKSB7XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgY2FyZFNob3RzKSB7XG4gICAgICAgIGNvbnN0IHNob3QgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHNob3QsIHMpXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLnNob3RzLnB1c2goc2hvdClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZWxzZSB7XG4gICAgLy8gIGNvbnN0IHNob3QgPSB7XG4gICAgLy8gICAgICBzaG90T3JkZXI6IDAsXG4gICAgLy8gICAgICBhY3RvcktleTogbnVsbCxcbiAgICAvLyAgICAgIGFjdG9yTmFtZTogJ2R1bW15J1xuICAgIC8vICB9XG4gICAgLy8gfVxuXG4gICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMgPSBbXVxuICAgIGNvbnN0IHJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcucm9sbC1yZXN1bHQnKVxuICAgIGZvciAoY29uc3QgciBvZiByb2xscykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KHIpXG4gICAgICByYW5nZUluaXRpYXRvci5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlID0gW11cbiAgICBjb25zdCBkYW1hZ2VSb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmRhbWFnZS1yZXN1bHRzJylcbiAgICBmb3IgKGNvbnN0IGRyIG9mIGRhbWFnZVJvbGxzKSB7XG4gICAgICBjb25zdCBkYW1hZ2VSb2xsID0gQ29DN0RhbWFnZS5nZXRGcm9tRWxlbWVudChkcilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZS5wdXNoKGRhbWFnZVJvbGwpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlSW5pdGlhdG9yXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlICgpIHtcbiAgICB0aGlzLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgaGl0cyA9IHRoaXMuc3VjY2Vzc2Z1bEhpdHNcblxuICAgIC8vIGxldCB2b2xsZXlTaXplID0gMTtcbiAgICAvLyBpZiggdGhpcy5mdWxsQXV0bykge1xuICAgIC8vICB2b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplO1xuICAgIC8vICBpZih2b2xsZXlTaXplIDwgMykgdm9sbGV5U2l6ZSA9IDM7XG4gICAgLy8gfVxuICAgIC8vIGlmKCB0aGlzLmJ1cnN0KSB2b2xsZXlTaXplID0gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBoID0gaGl0c1tpXVxuICAgICAgY29uc3Qgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KGguc2hvdC5idWxsZXRzU2hvdClcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gW11cblxuICAgICAgaWYgKHZvbGxleVNpemUgPiAwKSB7XG4gICAgICAgIGxldCBkYW1hZ2VGb3JtdWxhID0gU3RyaW5nKGguc2hvdC5kYW1hZ2UpXG4gICAgICAgIGlmICghZGFtYWdlRm9ybXVsYSB8fCBkYW1hZ2VGb3JtdWxhID09PSAnJykgZGFtYWdlRm9ybXVsYSA9ICcwJ1xuICAgICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIpIHtcbiAgICAgICAgICBkYW1hZ2VGb3JtdWxhID0gZGFtYWdlRm9ybXVsYSArICcrJyArIHRoaXMuYWN0b3IuZGJcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIHtcbiAgICAgICAgICBkYW1hZ2VGb3JtdWxhID0gZGFtYWdlRm9ybXVsYSArIENvQzdVdGlsaXRpZXMuaGFsZkRCKHRoaXMuYWN0b3IuZGIpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXG4gICAgICAgIGNvbnN0IG1heERhbWFnZSA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpWyghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpID8gJ2V2YWx1YXRlJyA6ICdldmFsdWF0ZVN5bmMnKS8qIC8vIEZvdW5kcnlWVFQgdjExICovXSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSA9IHRoaXMud2VhcG9uLmltcGFsZVxuICAgICAgICAgID8gYCR7ZGFtYWdlRm9ybXVsYX0gKyAke21heERhbWFnZX1gXG4gICAgICAgICAgOiBgJHttYXhEYW1hZ2V9YFxuICAgICAgICBjb25zdCBjcml0aWNhbERhbWFnZURpZSA9IENvQzdEYW1hZ2UuZ2V0TWFpbkRpZShjcml0aWNhbERhbWFnZUZvcm11bGEpXG5cbiAgICAgICAgbGV0IGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICAgIGxldCBzdWNjZXNzZnVsU2hvdHMgPSAwXG4gICAgICAgIGxldCBjcml0aWNhbCA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLmZ1bGxBdXRvIHx8IHRoaXMuYnVyc3QpIHtcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSBNYXRoLmZsb29yKHZvbGxleVNpemUgLyAyKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdWNjZXNzZnVsU2hvdHMgPT09IDApIHN1Y2Nlc3NmdWxTaG90cyA9IDFcbiAgICAgICAgaWYgKGgucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgICAgaW1wYWxpbmdTaG90cyA9IHN1Y2Nlc3NmdWxTaG90c1xuICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemUgLSBpbXBhbGluZ1Nob3RzXG4gICAgICAgICAgY3JpdGljYWwgPSB0cnVlXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCAhPT0gaC5yb2xsLnN1Y2Nlc3NMZXZlbCAmJlxuICAgICAgICAgICAgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA8PSBoLnJvbGwuZGlmZmljdWx0eSB8fFxuICAgICAgICAgICAgICBoLnNob3QuZXh0cmVtZVJhbmdlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gdm9sbGV5U2l6ZVxuICAgICAgICAgICAgaW1wYWxpbmdTaG90cyA9IDBcbiAgICAgICAgICAgIGNyaXRpY2FsID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdG90YWwgPSAwXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzdWNjZXNzZnVsU2hvdHM7IGluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZGFtYWdlRm9ybXVsYSlcbiAgICAgICAgICAvKiogTU9ESUYgMC44LnggKiovXG4gICAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbClcbiAgICAgICAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgICAgICAgY29uc3QgZGljZSA9IFtdXG4gICAgICAgICAgZm9yIChjb25zdCBkaWUgb2Ygcm9sbC5kaWNlKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBkaWUucmVzdWx0cykge1xuICAgICAgICAgICAgICBkaWNlLnB1c2goe1xuICAgICAgICAgICAgICAgIGZhY2VzOiBkaWUuZmFjZXMsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQucmVzdWx0XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogZGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBkYW1hZ2VEaWUsXG4gICAgICAgICAgICBkaWNlLFxuICAgICAgICAgICAgY3JpdGljYWw6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGltcGFsaW5nU2hvdHM7IGluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoKVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgY29uc3QgZGljZSA9IFtdXG4gICAgICAgICAgZm9yIChjb25zdCBkaWUgb2Ygcm9sbC5kaWNlKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBkaWUucmVzdWx0cykge1xuICAgICAgICAgICAgICBkaWNlLnB1c2goe1xuICAgICAgICAgICAgICAgIGZhY2VzOiBkaWUuZmFjZXMsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQucmVzdWx0XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogY3JpdGljYWxEYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXG4gICAgICAgICAgICBkaWU6IGNyaXRpY2FsRGFtYWdlRGllLFxuICAgICAgICAgICAgZGljZSxcbiAgICAgICAgICAgIGNyaXRpY2FsOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFyZ2V0TmFtZSA9ICdkdW1teSdcbiAgICAgICAgbGV0IHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpXG4gICAgICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0TmFtZSA9IHRhcmdldC5uYW1lXG5cbiAgICAgICAgdGhpcy5kYW1hZ2UucHVzaCh7XG4gICAgICAgICAgdGFyZ2V0S2V5OiBoLnJvbGwudGFyZ2V0S2V5LFxuICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgcm9sbHM6IGRhbWFnZVJvbGxzLFxuICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgIGNyaXRpY2FsLFxuICAgICAgICAgIGRlYWx0OiBmYWxzZSxcbiAgICAgICAgICByZXN1bHRTdHJpbmc6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcucmFuZ2VDb21iYXREYW1hZ2UnLCB7XG4gICAgICAgICAgICBuYW1lOiB0YXJnZXROYW1lLFxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGFtYWdlUm9sbGVkID0gdGhpcy5kYW1hZ2UubGVuZ3RoICE9PSAwXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlICgpIHtcbiAgICBmb3IgKGxldCBkSW5kZXggPSAwOyBkSW5kZXggPCB0aGlzLmRhbWFnZS5sZW5ndGg7IGRJbmRleCsrKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3RvciA9PT0gbnVsbCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1RhcmdldFRvRGFtYWdlJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gPSAwXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCA9IDBcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgckluZGV4ID0gMDtcbiAgICAgICAgICBySW5kZXggPCB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzLmxlbmd0aDtcbiAgICAgICAgICBySW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkZWFsdEFtb3VudCA9IGF3YWl0IGFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWxcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuICs9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRha2VuID0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0uYWJzb3JiZWQgPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgKz1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5kZWFsdCA9IHRydWVcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlQXJtb3InLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4sXG4gICAgICAgICAgICBhcm1vcjogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGFtYWdlRGVhbHQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZVRhcmdldCB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcbiAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICB0aGlzLmluTWVsZWUgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGJpZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYmlnKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9iaWcgPSB0aGlzLmFjdG9yLmJ1aWxkID49IDRcbiAgICAgIGVsc2UgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2JpZ1xuICB9XG5cbiAgc2V0IGJpZyAoYikge1xuICAgIHRoaXMuX2JpZyA9IGJcbiAgfVxuXG4gIGdldCBzbWFsbCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fc21hbGwpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX3NtYWxsID0gdGhpcy5hY3Rvci5idWlsZCA8PSAtMlxuICAgICAgZWxzZSB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zbWFsbFxuICB9XG5cbiAgc2V0IHNtYWxsIChiKSB7XG4gICAgdGhpcy5fc21hbGwgPSBiXG4gIH1cblxuICBnZXQgbm9ybWFsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYmlnICYmICF0aGlzLnNtYWxsXG4gIH1cblxuICBzZXQgbm9ybWFsIChiKSB7XG4gICAgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNGYXN0ICgpIHtcbiAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgcmV0dXJuIHRoaXMuYWN0b3IubW92ID49IDhcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBmYXN0ICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9mYXN0KSB7XG4gICAgICAvLyBpZiggdGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgdGhpcy5fZmFzdCA9IHRoaXMuYWN0b3IubW92ID49IDg7XG4gICAgICAvLyBlbHNlIHRoaXMuX2Zhc3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Zhc3QgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmFzdFxuICB9XG5cbiAgc2V0IGZhc3QgKGIpIHtcbiAgICB0aGlzLl9mYXN0ID0gYlxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSAmJiAhdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gJ0R1bW15J1xuICB9XG5cbiAgZ2V0IGltZyAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgIGlmICh0aGlzLnRva2VuLmRvY3VtZW50Py50ZXh0dXJlLnNyYykge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbi5kb2N1bWVudD8udGV4dHVyZS5zcmNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmRhdGEuaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3Rva2VuICYmIHRoaXMuYWN0b3JLZXkpIHtcbiAgICAgIHRoaXMuX3Rva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuXG4gIH1cblxuICBnZXQgc2l6ZVRleHQgKCkge1xuICAgIGlmICh0aGlzLmJpZykge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuU21hbGxUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldFRpdGxlJylcbiAgfVxuXG4gIGdldCBzaXplTGFiZWwgKCkge1xuICAgIGlmICh0aGlzLmJpZykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0JylcbiAgICBpZiAodGhpcy5zbWFsbCkgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5jb21iYXRDYXJkLlNtYWxsVGFyZ2V0JylcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXQnKVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIGlmICh0aGlzLmJhc2VSYW5nZSB8fCB0aGlzLnBvaW50QmxhbmtSYW5nZSkge1xuICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgICBpZiAodGhpcy5sb25nUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICBpZiAodGhpcy5leHRyZW1lUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIGxldCBtb2RpZmllciA9IDBcbiAgICBpZiAodGhpcy5jb3ZlcikgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnBvaW50QmxhbmtSYW5nZSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmZhc3QpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zbWFsbCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmJpZykgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmluTWVsZWUpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zdXJwcmlzZWQpIG1vZGlmaWVyKytcbiAgICByZXR1cm4gbW9kaWZpZXJcbiAgfVxuXG4gIHNldCB0b2tlbiAodCkge1xuICAgIHRoaXMuX3Rva2VuID0gdFxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGVsZW1lbnQpXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIGNoYW5nZURpc3BsYXllZFRhcmdldCAoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQtc2VsZWN0b3InKSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YXJnZXRzID0gdGFyZ2V0U2VsZWN0b3IuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGNvbnN0IHRhcmdldExpc3QgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKVxuICAgIHJldHVybiB0YXJnZXRMaXN0XG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudCh0aGlzLCBlbGVtZW50KVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZykge1xuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdiYXNlUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnbG9uZ1JhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2V4dHJlbWVSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdwb2ludEJsYW5rUmFuZ2UnXG4gICAgKSB7XG4gICAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmJhc2VSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLm91dE9mUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdzaXplJykge1xuICAgICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmJpZykge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSBmYWxzZVxuICAgICAgfSBlbHNlIHRoaXMuc21hbGwgPSB0cnVlXG4gICAgfSBlbHNlIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIGlmICh0aGlzLmFjdG9yICYmIGZsYWcgPT09ICdmYXN0JyAmJiB0aGlzLmZhc3QgJiYgIXRoaXMuaXNGYXN0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2FybkZhc3RUYXJnZXRXaXRoV3JvbmdNT1YnLCB7XG4gICAgICAgICAgbW92OiB0aGlzLmFjdG9yLm1vdlxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgZ2FtZSwgVG9rZW4sIHRva2VuRGF0YSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ29DN1JvbGwsIGNoYXRIZWxwZXIsIGlzQ3RybEtleSB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4vY2hhdC9kYW1hZ2VjYXJkcy5qcyc7XG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuXG5jb25zdCBDSEFUX0NPQzdfTUVTU0FHRSA9IHtcbiAgRkFLRVJPTEw6XG4gICAgJzxkaXYgY2xhc3M9XCJkaWNlLXJvbGxcIj48ZGl2IGNsYXNzPVwiZGljZS1yZXN1bHRcIj48ZGl2IGNsYXNzPVwiZGljZS1mb3JtdWxhXCI+Pz8/PC9kaXY+PGg0IGNsYXNzPVwiZGljZS10b3RhbFwiPj88L2g0PjwvZGl2PjwvZGl2Pidcbn1cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdCB7XG4gIHN0YXRpYyByZW5kZXJDaGF0TWVzc2FnZUhvb2sgKGNoYXRNZXNzYWdlLCBodG1sKSB7XG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnR01TZWxmUm9sbCcpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuZmxhdm9yLXRleHQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwiZmxhdm9yLXRleHRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlJvbGxTZWNyZXREaWNlJ1xuICAgICAgICAgICl9PC9zcGFuPmBcbiAgICAgICAgKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGVudFwiPiR7Q0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTEx9PC9kaXY+YFxuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAncmVtb3ZlV2lzcGVyVGFyZ2V0cycpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnZmFrZVJvbGwnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5LZWVwZXJTZW50RGVjb3knKSlcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZha2VSb2xsTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsU2VjcmV0RGljZScpLFxuICAgICAgd2hpc3BlcjogZ2FtZS51c2Vycy5wbGF5ZXJzLFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVIsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgR01TZWxmUm9sbDogZmFsc2UsXG4gICAgICAgICAgcmVtb3ZlV2lzcGVyVGFyZ2V0czogdHJ1ZSxcbiAgICAgICAgICBmYWtlUm9sbDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogQ0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTExcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICAvLyBUT0RPIHJlbXBsYWNlciBsZXMgZ2V0RWxlbWVudHNCeXh4eHggcGFyIHF1ZXJ5U2VsZWN0b3JcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBJbml0IHNvY2tldHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIHJlYWR5ICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQucmVhZHknKTtcbiAgICBnYW1lLkNvQzcgPSAnaW5pdCdcbiAgfVxuXG4gIC8vIHN0YXRpYyBvbk1lc3NhZ2UoIGRhdGEpIHtcbiAgLy8gIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5vbk1lc3NhZ2UnKTtcbiAgLy8gIGNvbnNvbGUubG9nKGBtZXNzYWdlIHJlY2VpdmVkIHNlbmQmZXIgOiR7ZGF0YS51c2VyfSBtZXNzYWdlIHR5cGUgOiAke2RhdGEuYWN0aW9ufSBmb3IgbWVzc2FnZSA6JHtkYXRhLm1lc3NhZ2VJZH1gKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAgICogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBhc3luYyBjaGF0TGlzdGVuZXJzIChhcHAsIGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC1idXR0b25zIGJ1dHRvbicsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbi5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2hhbmdlJyxcbiAgICAgICdpbnB1dFt0eXBlPXJhbmdlXS5zbGlkZXInLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYW5nZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJywgQ29DN0NoYXQuX29uQ2hhdENhcmRUZXN0LmJpbmQodGhpcykpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5jYXJkLXRpdGxlJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yYWRpby1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5wYW5lbC1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5zaW1wbGUtZmxhZycsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy52b2xsZXktc2l6ZScsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVm9sbGV5U2l6ZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRyb3Bkb3duLWVsZW1lbnQnLFxuICAgICAgQ29DN0NoYXQuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuc2ltcGxlLXRvZ2dsZScsIENvQzdDaGF0Ll9vblRvZ2dsZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmlzLW91dG51bWJlcmVkJywgQ29DN0NoYXQuX29uT3V0bnVtYmVyZWRTZWxlY3RlZC5iaW5kKHRoaXMpKTtcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy50YXJnZXQtc2VsZWN0b3InLCBDb0M3Q2hhdC5fb25UYXJnZXRTZWxlY3QuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdjbGljaycsICdjb2M3LWlubGluZS1yZXN1bHQnLCBDb0M3Q2hhdC5fb25JbmxpbmUuYmluZCh0aGlzKSlcblxuICAgIC8vIFJvbGxDYXJkLmJpbmRMaXN0ZXJuZXJzKCBodG1sKTtcbiAgICBPcHBvc2VkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gICAgQ29tYmluZWRDaGVja0NhcmQuYmluZExpc3Rlcm5lcnMoaHRtbClcbiAgfVxuXG4gIHN0YXRpYyBfb25PcGVuQWN0b3IgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGFjdG9yS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgaWYgKGFjdG9yS2V5KSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3Rvci5pc093bmVyKSBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25VcGRhdGVDaGF0TWVzc2FnZSAoY2hhdE1lc3NhZ2UpIHtcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXG5cbiAgICAvLyBpZiggY2hhdE1lc3NhZ2UuZ2V0RmxhZyggJ0NvQzcnLCAncmV2ZWxlZCcpKXtcbiAgICAvLyB9XG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIChjaGF0TWVzc2FnZS50eXBlID09PSAwIC8qIC8vIEZvdW5kcnlWVFQgdjExICovIHx8IGNoYXRNZXNzYWdlLnN0eWxlID09PSAwIC8qIC8vIEZvdW5kcnlWVFQgdjEyICovKSkge1xuICAgICAgY29uc3QgY2FyZCA9ICQoY2hhdE1lc3NhZ2UuY29udGVudClbMF1cbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnJlc29sdmVkID09PSAndHJ1ZScpIHtcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnRhcmdldENhcmQpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBpbml0aWF0b3IudGFyZ2V0Q2FyZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmICh0YXJnZXQucmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5tZXNzYWdlSWQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIGF3YWl0IGluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoY2hhdE1lc3NhZ2UuaWQpXG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgaWYgKCF0YXJnZXQubWVsZWVJbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkge1xuICAgICAgICAgICAgICBhd2FpdCB0YXJnZXQubWVsZWVJbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZW5kZXJNZXNzYWdlSG9vayAobWVzc2FnZSwgaHRtbCkge1xuICAgIHVpLmNoYXQuc2Nyb2xsQm90dG9tKClcblxuICAgIEludGVyYWN0aXZlQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdjaGVja1JldmVhbGVkJykpIHtcbiAgICAgIGh0bWwuZmluZCgnLmRpY2Utcm9sbCcpLnJlbW92ZUNsYXNzKCdnbS12aXNpYmxlLW9ubHknKVxuICAgICAgaHRtbFswXS5kYXRhc2V0LmNoZWNrUmV2ZWFsZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNob3dpbmcgZHJvcGRvd24gc2VsZWN0aW9uXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wYnRuJylcbiAgICAgIC5jbGljayhldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLmNsb3Nlc3QoJy5kcm9wZG93bicpXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bicpXG4gICAgICAubW91c2VsZWF2ZShldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXG4gICAgICApXG5cbiAgICAvLyBjb25zb2xlLmxvZygnKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLS0+Q29DN0NoYXQubWVzc2FnZUxpc3RlbmVycyBtZXNzYWdlIDonICsgbWVzc2FnZS5pZCk7XG4gICAgLy8gbWVzc2FnZS5kYXRhLmNvbnRlbnQgPSBcIlwiO1xuICAgIC8vIGRhdGEubWVzc2FnZS5jb250ZW50ID0gXCJcIjtcblxuICAgIC8vIFdoZW4gYSBuZXcgY2FyZCBpcyBwdWJsaXNoZWQsIGNoZWNrIHdldGhlciBpdCdzIGEgcm9sbCB0aGF0IG1vZGlmaWVzIGFuIG90aGVyIGNhcmQuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBjYXJkID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY29jNy5jaGF0LWNhcmQnKVxuICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSAmJlxuICAgICAgICAgICEoY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9PT0gJ3RydWUnKSAmJlxuICAgICAgICAgIGNhcmQuZGF0YXNldC5yZWZNZXNzYWdlSWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KGNhcmQpXG5cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgICAgICByb2xsLmRlZmVuZGFudElkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ2luaXRpYXRvcicpIHtcbiAgICAgICAgICAgIHJvbGwuaW5pdGlhdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9ICd0cnVlJ1xuXG4gICAgICAgICAgQ29DN0NoYXQudXBkYXRlQ29tYmF0Q2FyZFRhcmdldChyb2xsKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlck9ubHkgPSBodG1sLmZpbmQoJy50YXJnZXQtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHVzZXJPbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBjb25zdCBhY3RvcklkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0b3ItaWQnKVxuICAgICAgICBpZiAoYWN0b3JJZCkge1xuICAgICAgICAgIGlmIChnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkuaXNPd25lcikge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdtT25seSA9IGh0bWwuZmluZCgnLmdtLW9ubHknKVxuICAgIGZvciAoY29uc3Qgem9uZSBvZiBnbU9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcudXNlci12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiB1c2VyVmlzaWJsZU9ubHkpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgY29uc3QgZ21WaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLmdtLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIGdtVmlzaWJsZU9ubHkpIHtcbiAgICAgIGlmICghKGdhbWUudXNlci5pc0dNIHx8IChnYW1lLnVzZXIuaXNUcnVzdGVkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RydXN0ZWRDYW5TZWVDaGF0Q2FyZCcpKSkpIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IG93bmVyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5vd25lci12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3Qgem9uZSBvZiBvd25lclZpc2libGVPbmx5KSB7XG4gICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLmRhdGFzZXQ/LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBzZWxmLlxuICAgICAgaWYgKCFhY3RvcikgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3Rvcih6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkgLy8gVHJ5IHdpdGggY2xvc2VzdCBjaGF0IGNhcmQuXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLnBhcmVudEVsZW1lbnQuZGF0YXNldC5hY3RvcktleSkgLy8gVHJ5IHdpdGggcGFyZW50IGVsZW1lbnQuXG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLWFjdG9yLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgIH1cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtdG9rZW4ta2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLXRva2VuLWtleVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggYWN0b3JJZCk7XG4gICAgICBpZiAoKGFjdG9yICYmICFhY3Rvci5pc093bmVyKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAvLyBpZiggIUNvQzdDaGF0LmlzQ2FyZE93bmVyKCB6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkpIHt6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fVxuICAgIH1cblxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIC8vIEdNIGNhbiBzZWUgZXZlcnl0aGluZ1xuICAgICAgY29uc3Qgb3duZXJPbmx5ID0gaHRtbC5maW5kKCcub3duZXItb25seScpXG4gICAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJPbmx5KSB7XG4gICAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXG4gICAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5kYXRhc2V0Py5hY3RvcktleSB8fCB6b25lLmRhdGFzZXQ/LmFjdG9ySWRcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBzZWxmLlxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3Rvcih6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkgLy8gVHJ5IHdpdGggY2xvc2VzdCBjaGF0IGNhcmQuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLnBhcmVudEVsZW1lbnQuZGF0YXNldC5hY3RvcktleSkgLy8gVHJ5IHdpdGggcGFyZW50IGVsZW1lbnQuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtdG9rZW4ta2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggYWN0b3JJZCk7XG4gICAgICAgIGlmICgoYWN0b3IgJiYgIWFjdG9yLmlzT3duZXIpIHx8ICghYWN0b3IgJiYgIWdhbWUudXNlci5pc0dNKSkge1xuICAgICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxuICAgICAgICAvLyBpZiggIUNvQzdDaGF0LmlzQ2FyZE93bmVyKCB6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkpIHt6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fVxuICAgICAgfVxuXG4gICAgICBjb25zdCBnbVNlbGVjdE9ubHkgPSBodG1sLmZpbmQoJy5nbS1zZWxlY3Qtb25seScpXG4gICAgICBpZiAoIShnYW1lLnVzZXIuaXNUcnVzdGVkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJykpKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2VsZWN0IG9mIGdtU2VsZWN0T25seSkge1xuICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdpbmFjdGl2ZScpXG4gICAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ3NpbXBsZS1mbGFnJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBnbVJhbmdlT25seSA9IGh0bWwuZmluZCgnLmdtLXJhbmdlLW9ubHknKVxuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzVHJ1c3RlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcpKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHJhbmdlIG9mIGdtUmFuZ2VPbmx5KSB7XG4gICAgICAgICAgcmFuZ2UuZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGFjdGlvblR5cGVTdHJpbmcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmaWdodEJhY2s6ICdDb0M3LmZpZ2h0QmFjaycsXG4gICAgICBtYW5ldXZlcjogJ0NvQzcubWFuZXV2ZXInLFxuICAgICAgZG9kZ2luZzogJ0NvQzcuZG9kZ2UnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9vblRhcmdldFNlbGVjdCAoZXZlbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXkpXG4gICAgY29uc3QgdGFyZ2V0c1NlbGVjdG9yID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0cy1zZWxlY3RvcicpXG4gICAgZm9yIChjb25zdCBpIG9mIHRhcmdldHNTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSkge1xuICAgICAgaS5zdHlsZS5ib3JkZXIgPSAnbm9uZSdcbiAgICB9XG4gICAgdGFyZ2V0c1NlbGVjdG9yXG4gICAgICAucXVlcnlTZWxlY3RvcihgW2RhdGEta2V5PVwiJHtpbmRleH1cIl1gKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgIzAwMCdcbiAgICBjb25zdCB0YXJnZXRzID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0cycpXG4gICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpKSB7XG4gICAgICB0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIHQuZGF0YXNldC5hY3RpdmUgPSAnZmFsc2UnXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldFRvRGlzcGxheSA9IHRhcmdldHMucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS10YXJnZXQta2V5PVwiJHtpbmRleH1cIl1gXG4gICAgKVxuICAgIHRhcmdldFRvRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIHRhcmdldFRvRGlzcGxheS5kYXRhc2V0LmFjdGl2ZSA9ICd0cnVlJ1xuICAgIC8vIGNvbnN0IGNoYXRDYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkLnJhbmdlJyk7XG4gICAgLy8gY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoIGNoYXRDYXJkKTtcbiAgfVxuXG4gIHN0YXRpYyBfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjbGVhciBhbGwgZHJvcCBkb3duIGFuZCBoaWdobGlnaHQgdGhpcyBwYXJ0aWN1bGFyIG9uZVxuICAgIGNvbnN0IGRyb3BEb3duQm94ZXMgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLnJlc3BvbnNlLXNlbGVjdGlvbicpXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgIGZvciAoY29uc3QgZHBkbkJveCBvZiBkcm9wRG93bkJveGVzKSB7XG4gICAgICBkcGRuQm94LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJylcblxuICAgIC8vIGNsb3NlIGRyb3Bkb3duXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuXG4gICAgLy8gRGlzcGxheSB0aGUgcm9sbCBidXR0b25cbiAgICBjb25zdCBzZWxlY3RlZEJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWFjdGlvbicpXG4gICAgc2VsZWN0ZWRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICBjb25zdCBidXR0b24gPSBzZWxlY3RlZEJveC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIElkIC0gQnVpbGQgY2FuIGJlIHJldHJpZXZlZCBmcm9tIHRoYXRcblxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBpdGVtXG5cbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgSWRcblxuICAgIC8vIFBhc3MgdGhlIGRlZmVuZGFudCBhY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuZGVmZW5kZXJDaG9pY2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxWYWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZVxuICAgIGJ1dHRvbi5kYXRhc2V0Lml0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25JZFxuICAgIGJ1dHRvbi5kYXRhc2V0Lml0ZW1OYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbk5hbWVcblxuICAgIC8vIFB1dCBzb21lIHRleHQgaW4gdGhlIGJ1dHRvblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICAgICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWV9ICgke1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgICAgIH0lKWBcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbk5hbWV9ICgke1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgICAgIH0lKWBcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgLy8gU2F2ZSBhY3Rpb24gZm9yIHRoZSByb2xsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uSW5saW5lIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmxpbmUtcmVzdWx0JykpIHtcbiAgICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9jb2xsYXBzZUlubGluZVJlc3VsdChhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fZXhwYW5kSW5saW5lUmVzdWx0KGEpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9vblRvZ2dsZVNlbGVjdGVkIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVTZWxlY3RlZChjYXJkLCBldmVudClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZCA9PT0gJycpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTm9Eb2RnZVNraWxsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjbGVhciBhbGwgZHJvcCBkb3duIGFuZCBoaWdobGlnaHQgdGhpcyBwYXJ0aWN1bGFyIG9uZVxuICAgIGNvbnN0IGRyb3BEb3duQm94ZXMgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLnJlc3BvbnNlLXNlbGVjdGlvbicpXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgIGZvciAoY29uc3QgZHBkbkJveCBvZiBkcm9wRG93bkJveGVzKSB7XG4gICAgICBkcGRuQm94LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpIC8vIE5lZWQgdG8gdGVzdCBpZiBpdCdzIHJlYWxseSBhIGRvZGdlICEhIVxuXG4gICAgLy8gU2F2ZSBhY3Rpb24gZm9yIHRoZSByb2xsXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9ICdkb2RnaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcblxuICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWV9ICgke1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICB9JSlgXG4gIH1cblxuICBzdGF0aWMgX29uQ2hhdENhcmRSYWRpb1N3aXRjaCAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaCcpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvcHRpb25MaXN0ID1cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyYWRpby1zd2l0Y2gnKVxuICAgIGxldCBpbmRleFxuICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gb3B0aW9uTGlzdFtpbmRleF1cbiAgICAgIGlmIChlbGVtZW50LmRhdGFzZXQucHJvcGVydHkgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5zZWxlY3RlZCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFZvbGxleVNpemUgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgY29uc3QgcmFuZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5jcmVhc2UnKSkge1xuICAgICAgICAgIHJhbmdlQ2FyZC5jaGFuZ2VWb2xsZXlTaXplKDEpXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgtMSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgQ29DN01lbGVlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdSYW5nZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlJykpIHtcbiAgICAgIC8vIENvQzdJdGVtLnVwZGF0ZUNhcmRTd2l0Y2goIGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpKSB7XG4gICAgICBDb0M3Q2hlY2sudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBpZiBkYXRhc2V0Lm9iamVjdCBpcyB0aGVyZSA9PiBuZWVkIHRvIHVuZXNjYXBlIHRoaW5ncyAhIVxuICAgIC8vIGlmIG5vdCB1c2UgdGhlIGRhdGFzZXQgZGlyZWN0bHkuXG4gICAgY29uc3QgY2FyZERhdGEgPSBjYXJkLmRhdGFzZXQub2JqZWN0XG4gICAgICA/IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgICA6IGNhcmQuZGF0YXNldFxuXG4gICAgaWYgKGNhcmREYXRhLmFjdG9yS2V5KSByZXR1cm4gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShjYXJkRGF0YS5hY3RvcktleSlcblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGNvbnN0IHRva2VuS2V5ID0gY2FyZERhdGEudG9rZW5JZFxuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IgfHwgbmV3IFRva2VuKHRva2VuRGF0YSkuYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmREYXRhLmFjdG9ySWRcbiAgICBpZiAoYWN0b3JJZCkgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgaWYgKGNoYXRNZXNzYWdlLnVzZXIpIHJldHVybiBjaGF0TWVzc2FnZS51c2VyLmNoYXJhY3RlclxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgaXNDYXJkT3duZXIgKGNhcmQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICByZXR1cm4gY2hhdE1lc3NhZ2Uub3dubmVyIHx8IGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgX2dldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tVG9rZW4gKHRva2VuS2V5KSB7XG4gICAgY29uc3QgdG9rZW4gPSBDb0M3Q2hhdC5nZXRUb2tlbih0b2tlbktleSlcbiAgICByZXR1cm4gdG9rZW4gPyB0b2tlbi5hY3RvciA6IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRUb2tlbiAodG9rZW5LZXkpIHtcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIGNvbnN0IHRva2VuRG9jID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdPy50b2tlblxuICAgICAgICByZXR1cm4gdG9rZW5Eb2Mub2JqZWN0IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIHVwZGF0ZSBhIGNoYXQgbWVzc2FnZSB3aXRoIGEgbmV3IEhUTUwgY29udGVudCBhbmQgcG9wdWxhdGUgaXQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoY2FyZCwgbWVzc0lkID0gbnVsbCkge1xuICAgIGNvbnN0IG1lc3NhZ2VJZCA9XG4gICAgICBtZXNzSWQgPT0gbnVsbCA/IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG1lc3NJZFxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGNhcmQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkUmFuZ2UgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBidXR0b24uY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cblxuICAgIGlmICghQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZCkpIHJldHVyblxuXG4gICAgY29uc3QgbWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG5cbiAgICBsZXQgbWVzc2FnZUNhcmRcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgIG1lc3NhZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgIG1lc3NhZ2VDYXJkID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgIG1lc3NhZ2VDYXJkID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgfVxuICAgIG1lc3NhZ2VDYXJkLmRpY2VNb2RpZmllciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICBhd2FpdCBtZXNzYWdlQ2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbWVzc2FnZS1pZD1cIicgKyBtZXNzYWdlSWQgKyAnXCJdJykucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1yYW5nZV1bbmFtZT1cIicgKyBidXR0b24ubmFtZSArICdcIl0nKS5mb2N1cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkQWN0aW9uJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBidXR0b24uY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCBvcmlnaW5NZXNzYWdlID0gYnV0dG9uLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICAvLyBjb25zdCBtZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuXG4gICAgaWYgKCFDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKSkgcmV0dXJuXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5uZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICAgIGxldCBtZWxlZUNhcmRcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgbWVsZWVDYXJkID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgfVxuICAgICAgICAgIG1lbGVlQ2FyZC51cGdyYWRlUm9sbChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIGNhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgICAgIH0gZWxzZSBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgICAgICBjb25zdCByYW5nZUNhcmQgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBjb25zdCByb2xsUmVzdWx0ID0gYnV0dG9uLmNsb3Nlc3QoJy5yb2xsLXJlc3VsdCcpXG4gICAgICAgICAgY29uc3Qgcm9sbEluZGV4ID0gcm9sbFJlc3VsdFxuICAgICAgICAgICAgPyBwYXJzZUludChyb2xsUmVzdWx0LmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICByYW5nZUNhcmQucGFzc1JvbGwocm9sbEluZGV4KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIHJhbmdlQ2FyZC51cGdyYWRlUm9sbChyb2xsSW5kZXgsIHVwZ3JhZGVJbmRleCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpIHx8XG4gICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKSAhPSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgY29uc3QgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciA9XG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG5cbiAgICAgICAgICBpZiAoYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAnZmFsc2UnIC8vIHRyaWdnZXIgMyB1cGRhdGVzIGRlIGNhcmRcbiAgICAgICAgICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZnVtYmxlJylcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IubmFtZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncHVzaCc6IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuY2xvbmVOb2RlKHRydWUpIC8vIFRPRE8gbm90IG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9XG4gICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdXNoaW5nU2tpbGwnKVxuICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZmFpbHVyZScpXG4gICAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgIG5ld0NhcmQuZGF0YXNldC5wdXNoZWRSb2xsID0gdHJ1ZVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChuZXdDYXJkLCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2sucHVzaChjYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVmZW5kaW5nJzoge1xuICAgICAgICBsZXQgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAuZGF0YXNldC50b2tlbklkXG4gICAgICAgIGxldCBkZWZlbmRlclxuICAgICAgICBpZiAoIWRlZmVuZGVyS2V5KSB7XG4gICAgICAgICAgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAgIC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICBkZWZlbmRlciA9IGdhbWUuYWN0b3JzLmdldChkZWZlbmRlcktleSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlbmRlciA9IHRoaXMuZ2V0QWN0b3JGcm9tVG9rZW4oZGVmZW5kZXJLZXkpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZVR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uVHlwZVxuICAgICAgICBjb25zdCBvdXRudW1iZXJlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vdXRudW1iZXJlZCA9PT0gJ3RydWUnXG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICAgICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICAgICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgICAgIGNoZWNrLmFjdGlvbiA9IHJlc3BvbnNlVHlwZVxuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2RvZGdpbmcnOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBjaGVjay5pdGVtID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ21hbmV1dmVyJzoge1xuICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDw9IGFjdG9yLmJ1aWxkIC0gMykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1hbmV1dmVyTm90UG9zc2libGUnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDwgYWN0b3IuYnVpbGQpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgLSAoYWN0b3IuYnVpbGQgLSBkZWZlbmRlci5idWlsZClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNoZWNrLmRpY2VNb2RpZmllciA8IC0yKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgKyBNYXRoLmFicyhjaGVjay5kaWNlTW9kaWZpZXIpIC0gMlxuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS1pbml0aWF0b3Itcm9sbCc6IHtcbiAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgaW5pdGlhdG9yLnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgaW5pdGlhdG9yLnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1uby1yZXNwb25zZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoTm9SZXBvbnNlUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IHRhcmdldC5wZXJmb3JtU2tpbGxDaGVjayhcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcbiAgICAgICAgKVxuICAgICAgICAkKGJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncm9sbC1tZWxlZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBidXR0b24uZGF0YXNldC5jcml0aWNhbCA9PT0gJ3RydWUnLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGJ1dHRvbi5kYXRhc2V0LmRlYWxlclxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBidXR0b24uZGF0YXNldC50YXJnZXRcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gYnV0dG9uLmRhdGFzZXQud2VhcG9uXG4gICAgICAgIGlmIChvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgICAgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICB9XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcblxuICAgICAgICAvLyBjb25zdCBkYW1hZ2VDYXJkID0gbmV3IENvQzdEYW1hZ2VSb2xsKFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQud2VhcG9uLFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQuZGVhbGVyLFxuICAgICAgICAvLyAge1xuICAgICAgICAvLyAgICB0YXJnZXRLZXk6IGJ1dHRvbi5kYXRhc2V0LnRhcmdldCxcbiAgICAgICAgLy8gICAgY3JpdGljYWw6ICd0cnVlJyA9PSBidXR0b24uZGF0YXNldC5jcml0aWNhbCxcbiAgICAgICAgLy8gICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIC8vICB9KTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgLy8gZGFtYWdlQ2FyZC5yb2xsRGFtYWdlKCk7XG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgIC8vICBmb3IgKGNvbnN0IGIgb2YgY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1idXR0b25zJykpIHsgYi5yZW1vdmUoKSB9XG4gICAgICAgIC8vICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZCggY2FyZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1zaG9vdCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgcmFuZ2VJbml0aWF0b3IuYWRkU2hvdEF0Q3VycmVudFRhcmdldCgpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yZXNvbHZlQ2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3Iucm9sbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWFsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FyZC5kYXRhc2V0LnRhcmdldEtleVxuICAgICAgICBjb25zdCBhbW91bnQgPSBjYXJkLmRhdGFzZXQucmVzdWx0XG4gICAgICAgIGNvbnN0IHRhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgYXdhaXQgdGFyZ2V0QWN0b3IuZGVhbERhbWFnZShhbW91bnQpXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKVxuICAgICAgICBjb25zdCBkaWNlVG90YWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgJChkaWNlVG90YWwpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JylcbiAgICAgICAgaWYgKGJ1dHRvbnMpIGJ1dHRvbnMucmVtb3ZlKClcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWFsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IuZGVhbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rlc3RjaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgICAgICkge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2stY2FyZCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suc3RhbmRieSA9IGZhbHNlXG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBmb3JjZVJvbGw6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZmxhZy1mb3ItZGV2ZWxvcG1lbnQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IGNoZWNrLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc2V0LWNyZWF0dXJlLXNhbi1kYXRhJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5jbGVhclNhbkxvc3NSZWFzb24oKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtc2FuLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhZHZhbmNlLXN0YXRlJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5hZHZhbmNlU3RhdGUoXG4gICAgICAgICAgYnV0dG9uLmRhdGFzZXQuc3RhdGUgLyosIGJ1dHRvbi5kYXRhc2V0LnBhcmFtICovXG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1sb3NzJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuTG9zcygpXG4gICAgICAgIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1pbnQtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxJbnQoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIC8vIGNhc2UgJ2FwcGx5LXNhbi1sb3NzJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIGF3YWl0IHNhbkNoZWNrLmFwcGx5U2FuTG9zcygpO1xuICAgICAgLy8gIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKCk7XG4gICAgICAvLyAgYnJlYWs7XG4gICAgICAvLyB9XG5cbiAgICAgIC8vIGNhc2UgJ3JldmVhbC1zYW4tY2hlY2snOntcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XG4gICAgICAvLyAgc2FuQ2hlY2suaXNCbGluZCA9IGZhbHNlO1xuICAgICAgLy8gIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKCk7XG4gICAgICAvLyAgYnJlYWs7XG4gICAgICAvLyB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY29uLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjb25DaGVjayA9IENvQzdDb25DaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjb25DaGVjay5yb2xsQ29uKClcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY29uLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjb25DaGVjayA9IENvQzdDb25DaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25DaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdG9nZ2xpbmcgdGhlIHZpc2liaWxpdHkgb2YgY2hhdCBjYXJkIGNvbnRlbnQgd2hlbiB0aGUgbmFtZSBpcyBjbGlja2VkXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBoZWFkZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGhlYWRlci5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JylcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgaWYgKCFjb250ZW50LnN0eWxlLmRpc3BsYXkpIHtcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID1cbiAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5cbi8vIFRPRE8gOiByw6ljdXDDqXJlciBsZSBqZXQgZW4gdGFudCBxdSdvYmpldCAhISFcbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVJbml0aWF0b3IgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcbiAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuICAgIHRoaXMub3V0bnVtYmVyZWQgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmRpY2VNb2RpZmllciA9IDBcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnRhcmdldENhcmQgPSBudWxsXG4gICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmh0bWwnXG4gIH1cblxuICBhc3luYyByZXZlYWxDaGVjayAoKSB7XG4gICAgLy8gVE9ETyA6IG9uIHV0aWxpc2UgbCd1cGRhdGUgZHUgbWVzc2FnZSBhdSBsaWV1IGRlIHJlY29uc3RydWlyZSBsJ29iamV0LiBDaGFuZ2VyIGNlIGNvbXBvcnRlbWVudC5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdjaGVja1JldmVhbGVkJywgdHJ1ZSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UoY2hhdE1lc3NhZ2UsIGZhbHNlKVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xuICAgIGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgaWYgKHRoaXMudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpc1xuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWwgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXG4gICAgICA/IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZ05hbWUpXG4gICAgICA6IGZsYWdOYW1lXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gICAgc3dpdGNoIChmbGFnKSB7XG4gICAgICBjYXNlICdvdXRudW1iZXJlZCc6XG4gICAgICBjYXNlICdzdXJwcmlzZWQnOlxuICAgICAgICB0aGlzLmRpY2VNb2RpZmllciA9IE1hdGgubWF4KC0yLCBNYXRoLm1pbigyLCBwYXJzZUludCh0aGlzLmRpY2VNb2RpZmllciwgMTApICsgKHRoaXNbZmxhZ10gPyAxIDogLTEpKSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ2luaXRpYXRvcidcbiAgICBjaGVjay5hY3Rpb24gPSAnYXR0YWNrJ1xuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuY2hlY2tSZXZlYWxlZCA9IGZhbHNlXG4gICAgZWxzZSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSB0cnVlXG5cbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuZGljZU1vZGlmaWVyXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIHtcbiAgICAgICAgdGFyZ2V0S2V5OiB0aGlzLnRhcmdldEtleSxcbiAgICAgICAgbWVzc2FnZUlkOiB0aGlzLm1lc3NhZ2VJZCxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRoaXMuZmFzdEZvcndhcmQsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yS2V5XG4gICAgICB9KVxuICAgICAgdGhpcy50YXJnZXRDYXJkID0gbWVzc2FnZS5pZCB8fCBtZXNzYWdlLl9pZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1dG9TdWNjZXNzICYmICF0aGlzLmNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLmNoZWNrLmZvcmNlUGFzcygpXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGlmICghdGhpcy50YXJnZXRDYXJkICYmICF0aGlzLmF1dG9TdWNjZXNzICYmIHRoaXMuaGFzVGFyZ2V0KSB7XG4gICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgICAgKVxuICAgICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcbiAgICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGluaXRpYXRvciA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoaW5pdGlhdG9yLCBjYXJkKVxuICAgIGluaXRpYXRvci5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MdWNrTm90RW5vdWdoJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBjb25zdCByb2xsRGFtYWdlQnV0dG9uID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJvbGwtbWVsZWUtZGFtYWdlXCJdJ1xuICAgIClcbiAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbnZpc2libGUnKVxuXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIEFwcGxpY2F0aW9uLCBDT05GSUcsIENPTlNULCBEaWFsb2csIERpZSwgZm91bmRyeSwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgSG9va3MsIFJvbGwsIFRleHRFZGl0b3IsIFRva2VuLCB1aSAqL1xuaW1wb3J0IHsgQXZlcmFnZVJvbGwgfSBmcm9tICcuLi9hcHBzL2F2ZXJhZ2Utcm9sbC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi4vYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi4vY2hhdC9jb25jaGVjay5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBQb2ludFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IENoYXJhY1NlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsU3BlY1NlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsVmFsdWVEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXZhbHVlLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzZSBBY3RvciBjbGFzcyB0byBpbXBsZW1lbnQgYWRkaXRpb25hbCBsb2dpYyBzcGVjaWFsaXplZCBmb3IgQ29DIDd0aC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQ0FjdG9yIGV4dGVuZHMgQWN0b3Ige1xuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIC8qKiBAc2VlIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgaW4gbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cyAqL1xuICAgIGlmIChkYXRhLnR5cGUgaW4gQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXcgY2xhc3Mgd2lsbCBjYWxsIGl0J3Mgc3VwZXIoKSxcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgKiBhbmQgcmVzdW1lIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xuICAgICAgICAuLi57IGV4dGVuZGVkOiB0cnVlIH0sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH0pXG4gICAgfVxuICAgIC8vIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gICBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXG4gICAgLy8gICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcbiAgICAvLyAgIH1cbiAgICAvLyB9XG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplICgpIHtcbiAgICBzdXBlci5pbml0aWFsaXplKClcbiAgICBhd2FpdCB0aGlzLmNyZWF0dXJlSW5pdCgpIC8vIFRPRE8gOiBtb3ZlIHRoaXMgaW4gQ29DQWN0b3IuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqIFRlc3RpbmdcbiAgLy8gYXN5bmMgdXBkYXRlKGRhdGEsIG9wdGlvbnM9e30pIHtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oJ3JldHVybiBzdXBlci51cGRhdGUoZGF0YSwgb3B0aW9ucyk7Jyk7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGBpbnQgOiAke3RoaXMuY2hhcmFjdGVyaXN0aWNzLmludH1gKTtcbiAgLy8gICB0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnQgPSAxNTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYG1vZGlmaWVkIGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHJldHVybiBzdXBlci51cGRhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICAvLyBnZXQgY2hhcmFjdGVyaXN0aWNzKCl7XG4gIC8vICAgY29uc3QgYWN0b3IgPSB0aGlzO1xuICAvLyAgICAgcmV0dXJuIHtcbiAgLy8gICAgICAgZ2V0IGludCgpe1xuICAvLyAgICAgICAgIHJldHVybiBhY3Rvci5nZXRQcm9wKCdfaW50Jyk7XG4gIC8vICAgICAgIH0sXG5cbiAgLy8gICAgICAgc2V0IGludCh4KXtcbiAgLy8gICAgICAgICBhY3Rvci5zZXRQcm9wKCdfaW50JywgeCk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgfTtcbiAgLy8gfVxuXG4gIC8vIHNldFByb3Aoa2V5LCB4KXtcbiAgLy8gICB0aGlzW2tleV0gPSB4O1xuICAvLyB9XG5cbiAgLy8gZ2V0UHJvcChrZXkpe1xuICAvLyAgIHJldHVybiB0aGlzW2tleV18fDA7XG4gIC8vIH1cbiAgLy9cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIFByZXBhcmUgZGF0YSByZWxhdGVkIHRvIHRoaXMgRG9jdW1lbnQgaXRzZWxmLCBiZWZvcmUgYW55IGVtYmVkZGVkIERvY3VtZW50cyBvciBkZXJpdmVkIGRhdGEgaXMgY29tcHV0ZWQuXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xuICAgKi9cbiAgcHJlcGFyZUJhc2VEYXRhICgpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXModGhpcy50eXBlKSkge1xuICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxzID0ge31cbiAgICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICAgIGlmIChpLnR5cGUgIT09ICdza2lsbCcpIGNvbnRpbnVlXG4gICAgICAgIHRoaXMuc3lzdGVtLnNraWxsc1tgJHtpLml0ZW1JZGVudGlmaWVyfWBdID0geyBmb3VuZHJ5SUQ6IGkuaWQsIGNvY2lkOiBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkLCB2YWx1ZTogaS5yYXdWYWx1ZSwgYm9udXNEaWNlOiBpLnN5c3RlbS5ib251c0RpY2UgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgKiBSZW1vdmFsIG9mIDEvNSBzYW5pdHlcbiAgICAgKiB0aGlzIGlzIHRvIHJlbW92ZSB0aGVcbiAgICAgKiBhY3Rvci5kYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5IHRvIGJlIHJlbW92ZWQgZnJvbSB0ZW1wbGF0ZVxuICAgICAqIGFuZCBpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCB0byBiZSByZW1vdmVkIGZyb20gdGVtcGxhdGVcbiAgICAgKi9cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5KSB7XG4gICAgICAgICAgY29uc3QgcyA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5LnNwbGl0KCcvJylcbiAgICAgICAgICBpZiAoc1sxXSAmJiAhaXNOYU4oTnVtYmVyKHNbMV0pKSkge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IE51bWJlcihzWzFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gMFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHJldHVybiBjb21wdXRlZCB2YWx1ZXMgb3IgZml4ZWQgdmFsdWVzIGlmIG5vdCBhdXRvLlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLnJhd01vdlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9IHRoaXMucmF3RGJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPSB0aGlzLnJhd0J1aWxkXG5cbiAgICAgIC8vIEZvciB2ZWhpY2xlIG9ubHkgOlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID0gdGhpcy5ocFxuXG4gICAgICAvLyBpZiAoXG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4IHx8XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCA9PSBudWxsXG4gICAgICAvLyApIHtcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICAgIC8vIH1cbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggfHxcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4ID09IG51bGxcbiAgICAgIC8vICkge1xuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgICAgLy8gfVxuXG4gICAgLy8gaWYgKFxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPT0gbnVsbCAmJlxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4ICE9IG51bGxcbiAgICAvLyApIHtcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgLy8gfVxuICAgIC8vIGlmIChcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID09IG51bGwgJiZcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCAhPSBudWxsXG4gICAgLy8gKSB7XG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgIC8vIH1cbiAgICB9XG4gICAgc3VwZXIucHJlcGFyZUJhc2VEYXRhKClcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogUHJlcGFyZSBhbGwgZW1iZWRkZWQgRG9jdW1lbnQgaW5zdGFuY2VzIHdoaWNoIGV4aXN0IHdpdGhpbiB0aGlzIHByaW1hcnkgRG9jdW1lbnQuXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xuICAgKiBhY3RpdmUgZWZmZWN0cyBhcmUgYXBwbGllZFxuICAgKi9cbiAgcHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzICgpIHtcbiAgICBzdXBlci5wcmVwYXJlRW1iZWRkZWREb2N1bWVudHMoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBBcHBseSB0cmFuc2Zvcm1hdGlvbnMgb3IgZGVyaXZhdGlvbnMgdG8gdGhlIHZhbHVlcyBvZiB0aGUgc291cmNlIGRhdGEgb2JqZWN0LlxuICAgKiBDb21wdXRlIGRhdGEgZmllbGRzIHdob3NlIHZhbHVlcyBhcmUgbm90IHN0b3JlZCB0byB0aGUgZGF0YWJhc2UuXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xuICAgKi9cbiAgcHJlcGFyZURlcml2ZWREYXRhICgpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXModGhpcy50eXBlKSkge1xuICAgICAgc3VwZXIucHJlcGFyZURlcml2ZWREYXRhKClcbiAgICAgIC8vIFNldCBocE1heCwgbXBNYXgsIHNhbk1heCwgbW92LCBkYiwgYnVpbGQuIFRoaXMgaXMgdG8gYWxsb3cgY2FsY3VsYXRpb24gb2YgZGVyaXZlZCB2YWx1ZSB3aXRoIG1vZGlmZWQgY2hhcmFjdGVyaXN0aWNzLlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLnJhd01vdlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9IHRoaXMucmF3RGJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPSB0aGlzLnJhd0J1aWxkXG5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4ID0gdGhpcy5yYXdIcE1heFxuICAgICAgaWYgKHRoaXMuaHAgPT09IG51bGwpIHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUgPSB0aGlzLnJhd0hwTWF4XG5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4ID0gdGhpcy5yYXdNcE1heFxuICAgICAgaWYgKHRoaXMubXAgPT09IG51bGwpIHRoaXMuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSB0aGlzLnJhd01wTWF4XG5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCA9IHRoaXMucmF3U2FuTWF4XG4gICAgICBpZiAodGhpcy5zYW4gPT09IG51bGwpIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gdGhpcy5yYXdTYW5NYXhcblxuICAgICAgLy8gQXBwbHkgZWZmZWN0cyB0byBhdXRvbWF0aWNhbHkgY2FsY3VsYXRlZCB2YWx1ZXMuXG4gICAgICBjb25zdCBmaWx0ZXJNYXRyaXggPSBbXVxuXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuaHAubWF4JylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tcC5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5zYW4ubWF4JylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlJylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZScpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUnKVxuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gdGhpcy5lZmZlY3RzLnJlZHVjZSgoY2hhbmdlcywgZSkgPT4ge1xuICAgICAgICBpZiAoZS5kaXNhYmxlZCB8fCBlLmlzU3VwcHJlc3NlZCkgcmV0dXJuIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMuY29uY2F0KFxuICAgICAgICAgIGUuY2hhbmdlcy5tYXAoYyA9PiB7XG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcbiAgICAgICAgICAgIGMuZWZmZWN0ID0gZVxuICAgICAgICAgICAgYy5wcmlvcml0eSA9IGMucHJpb3JpdHkgPz8gYy5tb2RlICogMTBcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSwgW10pXG4gICAgICBjaGFuZ2VzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KVxuXG4gICAgICBjb25zdCBzZWxlY3RDaGFuZ2VzID0gY2hhbmdlcy5maWx0ZXIoZSA9PiBmaWx0ZXJNYXRyaXguaW5jbHVkZXMoZS5rZXkpKVxuXG4gICAgICAvLyBBcHBseSBhbGwgY2hhbmdlc1xuICAgICAgZm9yIChjb25zdCBjaGFuZ2Ugb2Ygc2VsZWN0Q2hhbmdlcykge1xuICAgICAgICBjaGFuZ2UuZWZmZWN0LmFwcGx5KHRoaXMsIGNoYW5nZSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaHBNYXggJiYgdGhpcy5ocE1heCA8IHRoaXMuaHApIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSA9IHRoaXMuaHBNYXggfVxuICAgICAgaWYgKHRoaXMubXBNYXggJiYgdGhpcy5tcE1heCA8IHRoaXMubXApIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IHRoaXMubXBNYXggfVxuICAgICAgaWYgKHRoaXMuc2FuTWF4ICYmIHRoaXMuc2FuTWF4IDwgdGhpcy5zYW4pIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnNhbk1heCB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRlZmF1bHRJbWcgKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbnRhaW5lcic6XG4gICAgICAgIHJldHVybiAnaWNvbnMvc3ZnL2NoZXN0LnN2ZydcbiAgICAgIGNhc2UgJ2NyZWF0dXJlJzpcbiAgICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2Zsb2F0aW5nLXRlbnRhY2xlcy5zdmcnXG4gICAgICBjYXNlICducGMnOlxuICAgICAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvY3VsdGlzdC5zdmcnXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgZGF0YS5wcm90b3R5cGVUb2tlbiA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIGRpc3Bvc2l0aW9uOiAxLFxuICAgICAgICBzaWdodDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ25wYycpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSBDb0NBY3Rvci5kZWZhdWx0SW1nKGRhdGEudHlwZSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NyZWF0dXJlJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9IENvQ0FjdG9yLmRlZmF1bHRJbWcoZGF0YS50eXBlKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29udGFpbmVyJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9IENvQ0FjdG9yLmRlZmF1bHRJbWcoZGF0YS50eXBlKVxuICAgICAgfVxuICAgICAgZGF0YS5wcm90b3R5cGVUb2tlbiA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xuICAgICAgICBhY3Rvckxpbms6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8qKlxuICAgKiBFYXJseSB2ZXJzaW9uIG9uIHRlbXBsYXRlcyBkaWQgbm90IGluY2x1ZGUgcG9zc2liaWxpdHkgb2YgYXV0byBjYWxjXG4gICAqIEp1c3QgY2hlY2sgaWYgYXV0byBpcyB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2UgaXQgd2lsbCBiZSBzZXQgdG8gdHJ1ZVxuICAgKi9cbiAgY2hlY2tVbmRlZmluZWRBdXRvICgpIHtcbiAgICBjb25zdCByZXR1cm5EYXRhID0ge1xuICAgICAgYXR0cmliczoge1xuICAgICAgICBocDoge30sXG4gICAgICAgIG1wOiB7fSxcbiAgICAgICAgc2FuOiB7fSxcbiAgICAgICAgbW92OiB7fSxcbiAgICAgICAgZGI6IHt9LFxuICAgICAgICBidWlsZDoge31cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmhwPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5ocC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8ubXA/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLm1wLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5zYW4/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLnNhbi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8ubW92Py5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tb3YuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmRiPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uYnVpbGQ/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVybkRhdGFcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgIHN0cjoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLlNUUicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGNvbjoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkNPTicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBzaXo6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TSVonLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGRleDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkRFWCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBhcHA6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5BUFAnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGludDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLklOVCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBwb3c6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5QT1cnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBlZHU6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5FRFUnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgaGFyZDogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDIpIHx8IG51bGwsXG4gICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDUpIHx8IG51bGwsXG4gICAgICAgICAgZm9ybXVsYTogdmFsdWUuZm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbiBmcm9tIHByZUNyZWF0ZUFjdG9yIGhvb2tcbiAgICogQHBhcmFtIHsqfSBjcmVhdGVEYXRhXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5pdFRva2VuIChjcmVhdGVEYXRhKSB7XG4gICAgLy8gY2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24uYWN0aXZlXG4gICAgaWYgKGNyZWF0ZURhdGEpIHtcbiAgICAgIC8vXG4gICAgfVxuICB9XG5cbiAgZ2V0IGhhc1RlbXBvSW5zYW5lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gIH1cblxuICBnZXQgZ2V0VGVtcG9JbnNhbmVEdXJhdGlvblRleHQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCAnZHVyYXRpb25UZXh0JylcbiAgfVxuXG4gIGdldCBoYXNJbmRlZkluc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICB9XG5cbiAgZ2V0IHBvcnRyYWl0ICgpIHtcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHJldHVybiB0aGlzLmltZ1xuICAgIHJldHVybiB0aGlzLnRva2VuPy50ZXh0dXJlPy5zcmMgfHwgdGhpcy5wcm90b3R5cGVUb2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMuaW1nXG4gIH1cblxuICBhc3luYyBlbnRlckJvdXRPZk1hZG5lc3MgKHJlYWxUaW1lID0gdHJ1ZSwgZHVyYXRpb24gPSAxKSB7XG4gICAgLy8gY29uc3QgZHVyYXRpb24gPSB7cm91bmRzOiAxLFxuICAgIC8vICAgc2Vjb25kczogMTcsXG4gICAgLy8gICBzdGFydFJvdW5kOiAzLFxuICAgIC8vICAgc3RhcnRUaW1lOiA1OCxcbiAgICAvLyAgIHN0YXJ0VHVybjogNCxcbiAgICAvLyAgIHR1cm5zOiAyfTtcbiAgICAvLyBhd2FpdCB0aGlzLmJvdXRPZk1hZG5lc3M/LnNldEZsYWcoICdDb0M3JywgJ21hZG5lc3MnLCB0cnVlKTtcblxuICAgIGxldCByZXN1bHQgPSBudWxsXG4gICAgY29uc3QgYm91dE9mTWFkbmVzc1RhYmxlSWQgPSByZWFsVGltZVxuICAgICAgPyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpXG4gICAgICA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKVxuICAgIGlmIChib3V0T2ZNYWRuZXNzVGFibGVJZCAhPT0gJ25vbmUnKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIHBob2JpYTogZmFsc2UsXG4gICAgICAgIG1hbmlhOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG51bGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZSA9IGdhbWUudGFibGVzLmdldChib3V0T2ZNYWRuZXNzVGFibGVJZClcbiAgICAgIHJlc3VsdC50YWJsZVJvbGwgPSBhd2FpdCBib3V0T2ZNYWRuZXNzVGFibGUucm9sbCgpXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5ET0NVTUVOVCA9PT1cbiAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udHlwZVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQocmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLmRvY3VtZW50SWQpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5waG9iaWEpIHJlc3VsdC5waG9iaWEgPSB0cnVlXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0/LnR5cGU/Lm1hbmlhKSByZXN1bHQubWFuaWEgPSB0cnVlXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OmAgKyBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICB7IGFzeW5jOiB0cnVlIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJlc3VsdC5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgICAgICAgZGVsZXRlIGl0ZW1EYXRhLl9pZFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtRGF0YV0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlQm91dE9mTWFkbmVzc0l0ZW1Ob3RGb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuVEVYVCA9PT1cbiAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udHlwZVxuICAgICAgICApIHtcbiAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udGV4dCxcbiAgICAgICAgICAgIHsgYXN5bmM6IHRydWUgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NUYWJsZU5vdEZvdW5kJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGl0J3Mgbm90IGEgcmVhbCB0aW1lIG5vIG5lZWQgdG8gYWN0aXZhdGUgdGhlIGJvdXRcbiAgICBpZiAoIXJlYWxUaW1lKSByZXR1cm4gcmVzdWx0XG5cbiAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwge1xuICAgICAgcmVhbFRpbWUsXG4gICAgICBkdXJhdGlvblxuICAgIH0pXG5cbiAgICAvLyBjb25zdCBlZmZlY3QgPSB0aGlzLmVmZmVjdHMuZ2V0KCBlZmZlY3REYXRhLl9pZCk7XG4gICAgLy8gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKTtcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBuZXcgYWN0b3IgY3JlYXRpb24uXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcbiAgICovXG4gIC8vIHN0YXRpYyBhc3luYyBjcmVhdGUoZGF0YSwgb3B0aW9ucykge1xuICAvLyAgLy8gSWYgdGhlIGNyZWF0ZWQgYWN0b3IgaGFzIGl0ZW1zIChvbmx5IGFwcGxpY2FibGUgdG8gZHVwbGljYXRlZCBhY3RvcnMpIGJ5cGFzcyB0aGUgbmV3IGFjdG9yIGNyZWF0aW9uIGxvZ2ljXG4gIC8vICBpZiAoZGF0YS5pdGVtcykge1xuICAvLyAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyAgfVxuICAvLyAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBlbXB0eVNraWxsIChcbiAgICBza2lsbE5hbWUsXG4gICAgdmFsdWUsXG4gICAge1xuICAgICAgcmFyaXR5ID0gZmFsc2UsXG4gICAgICBwdXNoID0gdHJ1ZSxcbiAgICAgIGNvbWJhdCA9IGZhbHNlLFxuICAgICAgaW1nID0gZmFsc2UsXG4gICAgICBzcGVjaWFsaXphdGlvbiA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICBza2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IGZhbHNlLFxuICAgICAgICAgIHJhcml0eSxcbiAgICAgICAgICBwdXNoLFxuICAgICAgICAgIGNvbWJhdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbWcgIT09IGZhbHNlKSB7XG4gICAgICBkYXRhLmltZyA9IGltZ1xuICAgIH1cbiAgICBpZiAoc3BlY2lhbGl6YXRpb24gIT09IGZhbHNlKSB7XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbilcbiAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgZGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIGxpc3Qgb2Ygc2tpbGxzIGJ5IHJlbW92aW5nIHNwZWNpYWxpemF0aW9uIGZyb20gbmFtZVxuICAgKi9cbiAgLy8gYXN5bmMgY2xlYW5Ta2lsbHMgKCkge1xuICAvLyAgIERpYWxvZy5jb25maXJtKHtcbiAgLy8gICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2xlYW5Ta2lsbExpc3QnKX1gLFxuICAvLyAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNsZWFuU2tpbGxMaXN0SGludCcpfTwvcD5gLFxuICAvLyAgICAgeWVzOiAoKSA9PiBjbGVhbih0aGlzKVxuICAvLyAgIH0pXG4gIC8vICAgYXN5bmMgZnVuY3Rpb24gY2xlYW4gKGFjdG9yKSB7XG4gIC8vICAgICBjb25zdCB1cGRhdGUgPSBbXVxuICAvLyAgICAgYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gIC8vICAgICAgIGlmIChzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgLy8gICAgICAgICBjb25zdCBjbGVhbiA9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhzKT8udHJpbSgpXG4gIC8vICAgICAgICAgaWYgKGNsZWFuLnRvTG93ZXJDYXNlKCkgIT0gcy5uYW1lLnRvTG93ZXJDYXNlKCkgfHwgY2xlYW4udG9Mb3dlckNhc2UoKSAhPSBzLmRhdGEubmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gIC8vICAgICAgICAgICB1cGRhdGUucHVzaCh7XG4gIC8vICAgICAgICAgICAgIF9pZDogcy5pZCxcbiAgLy8gICAgICAgICAgICAgbmFtZTogY2xlYW5cbiAgLy8gICAgICAgICAgIH0pXG4gIC8vICAgICAgICAgfVxuICAvLyAgICAgICB9XG4gIC8vICAgICB9KVxuICAvLyAgICAgaWYgKHVwZGF0ZS5sZW5ndGggIT0gMCl7XG4gIC8vICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgdXBkYXRlKVxuICAvLyAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBTa2lsbHMgOiAke0FycmF5LmZyb20oIHVwZGF0ZSwgZSA9PiBlLm5hbWUpLmpvaW4oJywgJyl9IHVwZGF0ZWQuYClcbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ1NraWxsIGxpc3Qgd2FzIGNsZWFuIGFscmVhZHkgIScpXG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBjcmVhdGVTa2lsbCAoc2tpbGxOYW1lLCB2YWx1ZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbE5hbWUsIHZhbHVlKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlV2VhcG9uU2tpbGwgKG5hbWUsIGZpcmVhcm1zID0gZmFsc2UsIGJhc2UgPSBudWxsKSB7XG4gICAgLy8gVE9ETyA6IEFzayBmb3IgYmFzZSB2YWx1ZSBpZiBudWxsXG5cbiAgICBjb25zdCBza2lsbERhdGEgPSBhd2FpdCBTa2lsbFNwZWNTZWxlY3REaWFsb2cuY3JlYXRlKFxuICAgICAgW10sXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICApLFxuICAgICAgMCxcbiAgICAgIG5hbWVcbiAgICApXG4gICAgaWYgKHNraWxsRGF0YSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbERhdGEuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgbmFtZSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgIClcbiAgICApXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIGJhc2U6IGlzTmFOKHZhbHVlKSA/IDAgOiB2YWx1ZSxcbiAgICAgICAgYWRqdXN0bWVudHM6IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbCxcbiAgICAgICAgICBleHBlcmllbmNlOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6ICFiYXNlXG4gICAgfSlcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHNraWxsWzBdXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhIGNyZWF0dXJlIHdpdGggbWluaW11bXMgc2tpbGxzXG4gICAqL1xuICBhc3luYyBjcmVhdHVyZUluaXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdjcmVhdHVyZScpIHJldHVyblxuICAgIGlmICh0aGlzLmdldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKSkgcmV0dXJuIC8vIENoYW5nZSB0byByZXR1cm4gc2tpbGwgP1xuXG4gICAgLy8gQ2hlY2sgaWYgZmlnaHRpbmcgc2tpbGxzIGV4aXN0cywgaWYgbm90IGNyZWF0ZSBpdCBhbmQgdGhlIGFzc29jaWF0ZWQgYXR0YWNrLlxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKVxuICAgIClcbiAgICBpZiAoc2tpbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gQ3JlYXRpbmcgbmF0dXJhbCBhdHRhY2sgc2tpbGxcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpLFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgYmFzZTogMCxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlnaHRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIHNwZWNpYWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmbGFnczoge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYXR0YWNrID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAnSXRlbScsXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiAnSW5uYXRlIGF0dGFjaycsXG4gICAgICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiLFxuICAgICAgICAgICAgICAgICAgY2hhdDogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdwblR5cGU6ICdpbm5hdGUnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgIGFkZGI6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzbG50OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlbmRlclNoZWV0OiBmYWxzZSB9XG4gICAgICAgIClcbiAgICAgICAgaWYgKHNraWxsLmxlbmd0aCA+IDAgJiYgYXR0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBjcmVhdGVkQXR0YWNrID0gdGhpcy5pdGVtcy5nZXQoYXR0YWNrWzBdLmlkKVxuICAgICAgICAgIGF3YWl0IGNyZWF0ZWRBdHRhY2sudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsWzBdLmlkLFxuICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbFswXS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0dXJlIGluaXQ6ICcgKyBlcnIubWVzc2FnZSlcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCAnU2tpbGwgY3JlYXRlZCcpO1xuICAgICAgYXdhaXQgdGhpcy5zZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJylcbiAgICAgIC8vIENyZWF0aW5nIGNvcnJlc3BvbmRpbmcgd2VhcG9uLlxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUl0ZW0gKGl0ZW1OYW1lLCBxdWFudGl0eSA9IDEsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHF1YW50aXR5XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlCb29rIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvb2soZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQm9vayhpdGVtTmFtZSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQm9vayAoaXRlbU5hbWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2Jvb2snLFxuICAgICAgc3lzdGVtOiB7fVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U3BlbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBzdGF0aWMgZW1wdHlTcGVsbCAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnc3BlbGwnLFxuICAgICAgc3lzdGVtOiB7fVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlU3BlbGwgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNwZWxsKGl0ZW1OYW1lKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTa2lsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSksXG4gICAgICAgICh0aGlzLnR5cGUgIT09ICdjaGFyYWN0ZXInID8gMSA6IG51bGwpLFxuICAgICAgICBzaG93U2hlZXRcbiAgICAgIClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGxOYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoc2tpbGxOYW1lLCBudWxsLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUl0ZW0gKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSksIDEsIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGl0ZW1OYW1lLCAxLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVdlYXBvbiAoZXZlbnQgPSBudWxsLCBwcm9wZXJ0aWVzID0ge30pIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBsZXQgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpXG4gICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpKSkge1xuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZSh3ZWFwb25OYW1lKSkge1xuICAgICAgICBpbmRleCsrXG4gICAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHdlYXBvbk5hbWUsXG4gICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllc1trZXldID1cbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkgPz8gZmFsc2VcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJpb1NlY3Rpb24gKHRpdGxlID0gbnVsbCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuc3lzdGVtLmJpb2dyYXBoeVxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgICA6IFtdXG4gICAgYmlvLnB1c2goe1xuICAgICAgdGl0bGUsXG4gICAgICB2YWx1ZTogbnVsbFxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9LCB7IHJlbmRlclNoZWV0OiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVmFsdWUgKGluZGV4LCBjb250ZW50KSB7XG4gICAgY29uc3QgYmlvID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpb1tpbmRleF0udmFsdWUgPSBjb250ZW50XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9LCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJpb1RpdGxlIChpbmRleCwgdGl0bGUpIHtcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS50aXRsZSA9IHRpdGxlXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQmlvU2VjdGlvbiAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvLnNwbGljZShpbmRleCwgMSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBtb3ZlQmlvU2VjdGlvblVwIChpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gMCkgcmV0dXJuXG4gICAgY29uc3QgYmlvID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBlbGVtID0gYmlvLnNwbGljZShpbmRleCwgMSlbMF1cbiAgICBiaW8uc3BsaWNlKGluZGV4IC0gMSwgMCwgZWxlbSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBtb3ZlQmlvU2VjdGlvbkRvd24gKGluZGV4KSB7XG4gICAgY29uc3QgYmlvID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoIC0gMSkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCArIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVGV4dEFyZWEgKHRleHRBcmVhKSB7XG4gICAgY29uc3QgbmFtZSA9ICdzeXN0ZW0uJyArIHRleHRBcmVhLmRhdGFzZXQuYXJlYU5hbWVcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogdGV4dEFyZWEudmFsdWUgfSlcbiAgfVxuXG4gIC8vIGFzeW5jIF91cGRhdGVFbWJlZGRlZERvY3VtZW50cyAoZG9jdW1lbnRDbGFzcywgcGFyZW50LCB7IHVwZGF0ZXMsIG9wdGlvbnMsIHBhY2sgfSwgdXNlcikge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvLyBhc3luYyBwcmVVcGRhdGVBY3RpdmVFZmZlY3QgKGEsYixjLGQpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgdXBkYXRlQWN0aXZlRWZmZWN0IChhLGIsYyxkKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaXRlbSBmb3IgdGhhdCBhY3Rvci5cbiAgICogSWYgaXQncyBhIHNraWxsIGZpcnN0IGNoZWNrIGlmIHRoZSBza2lsbCBpcyBhbHJlYWR5IG93bmVkLiBJZiBpdCBpcyBkb24ndCBjcmVhdGUgYSBzZWNvbmQgdGltZS5cbiAgICogRmlsbCB0aGUgdmFsdWUgb2YgdGhlIHNraWxsIHdpdGggYmFzZSBvciB0cnkgdG8gZXZhbHVhdGUgdGhlIGZvcm11bGEuXG4gICAqIEBwYXJhbSB7Kn0gZW1iZWRkZWROYW1lXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIChlbWJlZGRlZE5hbWUsIGRhdGFBcnJheSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGFBcnJheSA9IFtdXG4gICAgbGV0IGJhc2VWYWx1ZSA9IDBcbiAgICBsZXQgYmFzZUNhbGN1bGF0ZWQgPSAwXG4gICAgbGV0IGFyY2hldHlwZSA9IGZhbHNlXG4gICAgbGV0IG9jY3VwYXRpb24gPSBmYWxzZVxuICAgIGZvciAobGV0IGRhdGEgb2YgZGF0YUFycmF5KSB7XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdza2lsbCc6IHtcbiAgICAgICAgICBiYXNlVmFsdWUgPSBkYXRhLnN5c3RlbS5iYXNlXG4gICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIElmIG5vdCBhIFBDIHNldCBza2lsbCB2YWx1ZSB0byBiYXNlXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJdGVtSWRCeU5hbWUoZGF0YS5uYW1lKSkgcmV0dXJuIC8vIElmIHNraWxsIHdpdGggdGhpcyBuYW1lIGV4aXN0IHJldHVyblxuXG4gICAgICAgICAgICBpZiAoYmFzZVZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChTdHJpbmcoYmFzZVZhbHVlKSAhPT0gU3RyaW5nKGRhdGEuc3lzdGVtLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuc3lzdGVtLnZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICAgICAgICAgKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodmFsdWUpIGRhdGEuc3lzdGVtLnZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGFkZFRoaXMgPSB0cnVlXG5cbiAgICAgICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBpc0FueUJ1dE5vdEZsYWdnZWQgPSAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUpID8/IGZhbHNlKSAmJiAhKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSA/PyBmYWxzZSlcbiAgICAgICAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21Eb2N1bWVudChkYXRhKVxuICAgICAgICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCA/PyBmYWxzZSkgJiYgIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5ID8/IGZhbHNlKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtPy5mbGFncz8ub2NjdXBhdGlvbiB8fCBkYXRhLnN5c3RlbT8uZmxhZ3M/LmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1NraWxscyA9IHRoaXMuc2tpbGxzLmZpbHRlcihlbCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtPy5mbGFncz8ub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0/LmZsYWdzPy5hcmNoZXR5cGUgJiZcbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5mbGFncz8uYXJjaGV0eXBlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2tpbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBleGlzdGluZ1NraWxscy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IHNraWxsTGlzdC5maW5kSW5kZXgoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gZXhpc3RpbmdTa2lsbHNbaV0ubmFtZSB8fCBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBleGlzdGluZ1NraWxsc1tpXS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsTGlzdC5zcGxpY2UoZm91bmQsIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IHNraWxsTGlzdC5jb25jYXQoZXhpc3RpbmdTa2lsbHMpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IGV4aXN0aW5nU2tpbGxzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgICAgICAgYWxsb3dDdXN0b206IChpc0FueUJ1dE5vdEZsYWdnZWQgfHwgKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSkpLFxuICAgICAgICAgICAgICBmaXhlZEJhc2VWYWx1ZTogKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbk5hbWU6IGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBsYWJlbDogZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBiYXNlVmFsdWU6IGRhdGEuc3lzdGVtLmJhc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNraWxsRGF0YSwgJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgc2tpbGxEYXRhLnNlbGVjdGVkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZXMgPSB7fVxuICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlc1snc3lzdGVtLnZhbHVlJ10gPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5mbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlc1tgc3lzdGVtLmZsYWdzLiR7a2V5fWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2hhbmdlcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLl9pZCA9IGV4aXN0aW5nSXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2NoYW5nZXNdKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGV4aXN0aW5nSXRlbSlcbiAgICAgICAgICAgICAgICAgIGFkZFRoaXMgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdzID0gZGF0YS5zeXN0ZW0/LmZsYWdzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtlZXBCYXNlID0gKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShleGlzdGluZylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmxhZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5mbGFnc1trZXldID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2VlcEJhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmJhc2UgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGJhc2VWYWx1ZSA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IGF3YWl0IENvQzdJdGVtLmNhbGN1bGF0ZUJhc2UodGhpcywgZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGJhc2VWYWx1ZSA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gYXdhaXQgQ29DN0l0ZW0uY2FsY3VsYXRlQmFzZSh0aGlzLCBkYXRhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYWRkVGhpcykge1xuICAgICAgICAgICAgaWYgKFN0cmluZyhiYXNlVmFsdWUpICE9PSBTdHJpbmcoYmFzZUNhbGN1bGF0ZWQpKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmJhc2UgPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6IHtcbiAgICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnY29udGFpbmVyJykge1xuICAgICAgICAgICAgY29uc3QgbWFpblNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5tYWluPy5uYW1lXG4gICAgICAgICAgICBpZiAobWFpblNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgICAgPyBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBtYWluU2tpbGxcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5tYXRjaCgvaVxcLnNraWxsXFwuLykpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURCZXN0KHsgY29jaWQ6IG5hbWUsIHNob3dMb2FkaW5nOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlU2tpbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFthdmFpbGFibGVTa2lsbHNbMF1dKVxuICAgICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAgICAgICAgICAgKGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgfHwgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFtleGlzdGluZ10pXG4gICAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5nZXRTa2lsbHNCeU5hbWUobWFpblNraWxsKVswXVxuICAgICAgICAgICAgICAgICAgICAvLyBza2lsbCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNlY29uZFNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5hbHRlcm5hdGl2Py5uYW1lXG4gICAgICAgICAgICBpZiAoc2Vjb25kU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gc2Vjb25kU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgICAgPyBzZWNvbmRTa2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICAgICAgICAgICAgICA6IHNlY29uZFNraWxsXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUubWF0Y2goL2lcXC5za2lsbFxcLi8pKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGVTa2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQmVzdCh7IGNvY2lkOiBuYW1lLCBzaG93TG9hZGluZzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJsZVNraWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhbYXZhaWxhYmxlU2tpbGxzWzBdXSlcbiAgICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmdldFNraWxsc0J5TmFtZShzZWNvbmRTa2lsbClbMF1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAgICAgICAgICAgKGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgfHwgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFtleGlzdGluZ10pXG4gICAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraWxsID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgISFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNraWxsKSBkYXRhLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID0gc2tpbGwuaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnc2V0dXAnOiB7XG4gICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmVuYWJsZUNoYXJhY3RlcmlzaXRpY3MpIHtcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0ID0ge31cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3N0cicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24gPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdjb24nKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnc2l6JylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2RleCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdhcHAnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdyA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3BvdycpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdlZHUnKVxuXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrID0ge31cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWUgPSBpc05hTih0aGlzLmx1Y2spXG4gICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICA6IHRoaXMubHVja1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay5sYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2suc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICBpZiAoIWRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcyA9IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnN0ciA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ci52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24udmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmRleCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdy52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjayA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWVcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3BlbmRQb2ludHMnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbENoYXJhYycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5wb2ludHNXYXJuaW5nID0gIShcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zaXogIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5pbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgIT09IG51bGxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNvbnN0IHJvbGxlZCA9IGF3YWl0IENoYXJhY1JvbGxEaWFsb2cuY3JlYXRlKGRhdGEuc3lzdGVtKVxuICAgICAgICAgICAgaWYgKHJvbGxlZCkge1xuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgICAgICAgICAgICdzdHInLFxuICAgICAgICAgICAgICAgICdjb24nLFxuICAgICAgICAgICAgICAgICdzaXonLFxuICAgICAgICAgICAgICAgICdkZXgnLFxuICAgICAgICAgICAgICAgICdhcHAnLFxuICAgICAgICAgICAgICAgICdpbnQnLFxuICAgICAgICAgICAgICAgICdwb3cnLFxuICAgICAgICAgICAgICAgICdlZHUnXG4gICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldXG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS5mb3JtdWxhYF0gPVxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3dcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCddID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93IC8gNVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IHRoaXMucmF3SHBNYXgsXG4gICAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLm1heCc6IHRoaXMucmF3SHBNYXhcbiAgICAgICAgICAgICAgfSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmEgPSBPYmplY3QuZW50cmllcyhkYXRhLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG4gICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLml0ZW1zLCBlcmE6ICh0eXBlb2YgZXJhWzBdICE9PSAndW5kZWZpbmVkJyA/IGVyYVswXSA6IHRydWUpIH0pXG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgICAgY29uc3Qgb3RoZXJzSXRlbXMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKHNraWxscylcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKG90aGVyc0l0ZW1zKVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFja3N0b3J5JzogZGF0YS5zeXN0ZW0uYmFja3N0b3J5IH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbk5hbWUgb2YgZGF0YS5zeXN0ZW0uYmlvU2VjdGlvbnMpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLnN5c3RlbS5iaW9ncmFwaHk/LmZpbmQoXG4gICAgICAgICAgICAgICAgICBlbCA9PiBzZWN0aW9uTmFtZSA9PT0gZWwudGl0bGVcbiAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVCaW9TZWN0aW9uKHNlY3Rpb25OYW1lKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJlZmFjdG9yIHRoaXNcbiAgICAgICAgICBjb25zdCBtb25ldGFyeSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5zeXN0ZW0ubW9uZXRhcnksIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGRhdGEuc3lzdGVtLm1vbmV0YXJ5KSlcbiAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRcbiAgICAgICAgICBsZXQgc3RhdGUgPSBmYWxzZVxuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHN0YXRlID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShzaGVldC5fc3RhdGUpXG4gICAgICAgICAgICB9LCAxMDApKVxuICAgICAgICAgIH0gd2hpbGUgKHN0YXRlID09PSBBcHBsaWNhdGlvbi5SRU5ERVJfU1RBVEVTLlJFTkRFUklORylcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAnc3lzdGVtLm1vbmV0YXJ5JzogbW9uZXRhcnlcbiAgICAgICAgICB9KVxuICAgICAgICAgIEhvb2tzLmNhbGwoJ3NldHVwRmluaXNoZWRDb0M3JylcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2FyY2hldHlwZSc6XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIEFyY2hldHlwcmUgb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5hcmNoZXR5cGUpIHtcbiAgICAgICAgICAgICAgbGV0IHJlc2V0QXJjaGV0eXBlID0gZmFsc2VcbiAgICAgICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVzZXRBcmNoZXR5cGUnKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0QXJjaGV0eXBlSGludCcsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVzZXRBcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0WWVzOiBmYWxzZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAocmVzZXRBcmNoZXR5cGUpIGF3YWl0IHRoaXMucmVzZXRBcmNoZXR5cGUoKVxuICAgICAgICAgICAgICBlbHNlIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb3JlQ2hhcmFjID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1trZXldID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgICAgICAgICAgIGNoYXIua2V5ID0ga2V5XG4gICAgICAgICAgICAgICAgY29yZUNoYXJhYy5wdXNoKGNoYXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNoYXJhY1xuXG4gICAgICAgICAgICBpZiAoY29yZUNoYXJhYy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gY29yZUNoYXJhY1xuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TZWxlY3RDb3JlQ2hhcmFjJylcbiAgICAgICAgICAgICAgY2hhcmFjID0gYXdhaXQgQ2hhcmFjU2VsZWN0RGlhbG9nLmNyZWF0ZShjaGFyRGlhbG9nRGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhYy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhcmFjID0gY29yZUNoYXJhY1swXS5rZXlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjaGFyYWMpIHJldHVyblxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjaGFyYWNdID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlID0gTnVtYmVyKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlKVxuICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjKVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgcm9sbC50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlUm9sbGluZ0NoYXJhY3RlcmlzdGljJyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjaGFyLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgIGZvcm11bGE6IGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhci52YWx1ZSA8IHJvbGwudG90YWwgPyByb2xsLnRvdGFsIDogY2hhci52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtjaGFyYWN9LnZhbHVlYF06IHZhbHVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc2tpbGxzXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdhcmNoZXR5cGUnKVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIGFyY2hldHlwZSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzpcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gT2NjdXBhdGlvbiBvbmx5IGZvciBQQ3NcbiAgICAgICAgICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgbGV0IHJlc2V0T2NjdXBhdGlvbiA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0T2NjdXBhdGlvbicpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRPY2N1cGF0aW9uSGludCcsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVzZXRPY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0T2NjdXBhdGlvbikgYXdhaXQgdGhpcy5yZXNldE9jY3VwYXRpb24oKVxuICAgICAgICAgICAgICBlbHNlIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lEcyB0byBpdGVtc1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5za2lsbHMgfSlcblxuICAgICAgICAgICAgaWYgKE51bWJlcihkYXRhLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgICAgICAgLy8gT2NjdXBhdGlvbnMgd2l0aCBhIGNyZWRpdCByYXRpbmcgcmVxdWlyZSBhIGNyZWRpdCByYXRpbmcgc2tpbGxcbiAgICAgICAgICAgICAgY29uc3QgYWN0b3JDcmVkaXRSYXRpbmcgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZmluZENvY0lkSW5MaXN0KCdpLnNraWxsLmNyZWRpdC1yYXRpbmcnLCBkYXRhLnN5c3RlbS5za2lsbHMpXG4gICAgICAgICAgICAgIGlmIChhY3RvckNyZWRpdFJhdGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnN5c3RlbS5hcGkuY29jaWQuZmluZENvY0lkSW5MaXN0KCdpLnNraWxsLmNyZWRpdC1yYXRpbmcnLCB0aGlzLml0ZW1zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscy5wdXNoKGFjdG9yQ3JlZGl0UmF0aW5nWzBdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZWxlY3QgY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIGNvbnN0IHBvaW50c0RpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBkYXRhLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgICAgIGxldCBvcHRpb25hbENoYXIgPSBmYWxzZVxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxuICAgICAgICAgICAgICBpZiAodmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsID1cbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbmFsQ2hhciA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEudG90YWwgPSB0b3RhbFxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsQ2hhcikge1xuICAgICAgICAgICAgICAvLyBJcyB0aGVyZSBhbnkgb3B0aW9uYWwgY2hhciB0byBjaG9vc2UgZm9yIHBvaW50cyBjYWxjID9cbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9pbnRTZWxlY3REaWFsb2cuY3JlYXRlKHBvaW50c0RpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgIGlmICghcmVzdWx0KSByZXR1cm4gLy8gUG9pbnQgbm90IHNlbGVjdGVkID0+IGV4aXQuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBvcHRpb25hbCBza2lsbHNcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIC8vIENvbnZlcnQgQ29DSWRzIHRvIGl0ZW1zXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyB9KVxuXG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0ub3B0aW9ucylcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFNlbGVjdGlvbldpbmRvdycpXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGdlbmVyaWMgc3BlYyB3ZSBhbHdheXMgYWRkIGl0XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5zeXN0ZW0uZmxhZ3M/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgd2FzIGFkZGVkIHRvIHNraWxsIGxpc3QgcHJldmlvdXNseSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm9uZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggPD0gZGlhbG9nRGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgaXMgbGVzcyBza2lsbCB0aGFuIG9wdGlvbnMsIGFkZCB0aGVtIGFsbC5cbiAgICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvTGVzc1NraWxsVGhhbk9wdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxDb3VudDogZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb3VudDogZGlhbG9nRGF0YS5vcHRpb25zQ291bnRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoIGRpYWxvZ0RhdGEuc2tpbGxzLCAnb2NjdXBhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gQ29DN0l0ZW0ubWVyZ2VPcHRpb25hbFNraWxscyhcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxsc1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBleHRyYSBza2lsbHNcbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZWxlY3RQZXJzb25hbFNraWxscycsIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLnNraWxscykge1xuICAgICAgICAgICAgICAgIC8vIFNlbGVjdCBhbGwgc2tpbGxzIHRoYXQgYXJlIG5vdCBhbHJlYWR5IGZsYWdnZWQgYXMgb2NjdXBhdGlvbiwgY2FuIGhhdmUgYWRqdXN0bWVudHMgYW5kIFhQLlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFzLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uICYmXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub2FkanVzdG1lbnRzICYmXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgYWxyZWFkeSBzZWxlY3RlZCBkb24ndCBhZGQgaXRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHMubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKSAvLyBEaWFsb2cgZGF0YSBidWcgPz8/XG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc2tpbGxzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKGRhdGEuc3lzdGVtLnNraWxscywgJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gQ3JlZGl0IHJhdGluZyBpcyBhbHdheXMgcGFydCBvZiBvY2N1cGF0aW9uXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICAgICAgICAvLyBzZXR0aW5nIGl0IHRvIG1pbiBjcmVkaXQgcmF0aW5nXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy51cGRhdGUoe1xuICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLm9jY3VwYXRpb24nOiBOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGRhdGEpKVxuICAgICAgICAgICAgb2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGRhdGEpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkRGF0YUFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHByb2Nlc3NlZCA9IGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgZW1iZWRkZWROYW1lLFxuICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQuYXJjaGV0eXBlJzogdGhpcy5hcmNoZXR5cGVQb2ludHNcbiAgICAgIH0pXG4gICAgICBIb29rcy5jYWxsKCdhcmNoZXR5cGVGaW5pc2hlZENvQzcnKVxuICAgIH1cbiAgICBpZiAob2NjdXBhdGlvbikge1xuICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzLFxuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgICAgfSlcbiAgICAgIEhvb2tzLmNhbGwoJ29jY3VwYXRpb25GaW5pc2hlZENvQzcnKVxuICAgIH1cblxuICAgIHJldHVybiBwcm9jZXNzZWRcbiAgfVxuXG4gIC8vIGdldFNraWxsSWRCeU5hbWUoIHNraWxsTmFtZSl7XG4gIC8vICAgbGV0IGlkID0gbnVsbDtcbiAgLy8gICAgZm9yIChjb25zdCBbbWFwLCBrZXksIHZhbHVlXSBvZiB0aGlzLml0ZW1zKSB7XG4gIC8vICAgICBpZiggdmFsdWUubmFtZSA9PSBza2lsbE5hbWUpIGlkID0gdmFsdWUuaWQ7XG4gIC8vICAgfTtcblxuICAvLyAgIHJldHVybiBpZDtcbiAgLy8gfVxuXG4gIGdldEl0ZW1JZEJ5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBsZXQgaWQgPSBudWxsXG4gICAgY29uc3QgbmFtZSA9IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBpdGVtTmFtZVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKSB7XG4gICAgICAgIGlkID0gdmFsdWUuaWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaWRcbiAgfVxuXG4gIGdldEl0ZW1zQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGl0ZW1MaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS5uYW1lID09PSBpdGVtTmFtZSkgaXRlbUxpc3QucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbUxpc3RcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKlxuICAgKi9cbiAgZ2V0U2tpbGxzQnlOYW1lIChza2lsbE5hbWUpIHtcbiAgICAvLyBUT0RPIDogbW9yZSBhZ2dyZXNzaXZlIGZpbmRpbmcgaW5jbHVkaW5nIHNwZWNzXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBjb25zdCBuYW1lID0gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogc2tpbGxOYW1lXG5cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKFxuICAgICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgdmFsdWUuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IHNraWxsTmFtZVxuICAgICAgICApICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICkge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0Rmlyc3RJdGVtQnlDb0NJRCAoY29jaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maW5kKGkgPT4gaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gY29jaWQpXG4gIH1cblxuICAvLyBwYXJzZUZvcm11bGEgKGZvcm11bGEpIHtcbiAgLy8gICBsZXQgcGFyc2VkRm9ybXVsYSA9IGZvcm11bGFcbiAgLy8gICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XG4gIC8vICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIC8vIH1cblxuICBwYXJzZUNoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgcGFyc2VkID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGZvdW5kcnkudXRpbHMuZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkXG4gIH1cblxuICBzdGF0aWMgZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgIC8vIEZvdW5kcnlWVFQgdjExXG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNMaXN0ID0gKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljcyA6IGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLmNoYXJhY3Rlci5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY2hhcmFjdGVyaXN0aWNMaXN0KSkge1xuICAgICAgY2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICBrZXksXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIGdldENoYXJhY3RlcmlzdGljIChjaGFyTmFtZSkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIGNoYXJOYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAga2V5ID09PSBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XG4gICAgaWYgKFxuICAgICAgWydsY2snLCAnbHVjaycsIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJykudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgc2hvcnROYW1lOiAnbHVjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnc2FuJyxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKS50b0xvd2VyQ2FzZSgpXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJ1blJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJldmVudFN0YW5kYnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID0gdHJ1ZVxuICAgIH1cbiAgICBvcHRpb25zLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihvcHRpb25zKVxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvbiAoKSB7XG4gICAgY29uc3Qgb2NjdXBhdGlvbiA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpXG4gICAgcmV0dXJuIG9jY3VwYXRpb25bMF1cbiAgfVxuXG4gIGdldCBhcmNoZXR5cGUgKCkge1xuICAgIGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJylcbiAgICByZXR1cm4gYXJjaGV0eXBlWzBdXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb24gKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvblNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IG9jY3VwYXRpb25Ta2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIGF3YWl0IHRoaXMub2NjdXBhdGlvbi5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogbnVsbCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGUgKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3QgYXJjaGV0eXBlU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJjaGV0eXBlU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IGFyY2hldHlwZVNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hcmNoZXR5cGUpIGF3YWl0IHRoaXMuYXJjaGV0eXBlLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IG51bGwgfSlcbiAgfVxuXG4gIGdldCBsdWNrICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicz8ubGNrPy52YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIHNldEx1Y2sgKHZhbHVlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzcGVuZEx1Y2sgKGFtb3VudCkge1xuICAgIGFtb3VudCA9IHBhcnNlSW50KGFtb3VudClcbiAgICBpZiAoISh0aGlzLmx1Y2sgPj0gYW1vdW50KSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc2V0THVjayh0aGlzLmx1Y2sgLSBhbW91bnQpXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlKVxuICB9XG5cbiAgZ2V0IHJhd0hwTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlICE9IG51bGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gQ29DQWN0b3IuaHBGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcywgdGhpcy50eXBlKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICB9XG5cbiAgYXN5bmMgX3NldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbXMgKHNraWxsTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAobGV0IHNraWxsIG9mIHNraWxsTGlzdCkge1xuICAgICAgc2tpbGwgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbClcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNraWxsLnN5c3RlbSwgJ2ZsYWdzJykpIHtcbiAgICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICB9XG4gICAgICAgIHNraWxsLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoc2tpbGwpKSB7XG4gICAgICAgIHByb2Nlc3NlZC5wdXNoKHNraWxsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbUlkID0gdGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGwubmFtZSlcbiAgICAgICAgaWYgKCFpdGVtSWQpIHtcbiAgICAgICAgICBwcm9jZXNzZWQucHVzaChza2lsbClcbiAgICAgICAgfSBlbHNlIGlmIChmbGFnKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgcHJvY2Vzc2VkLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkSXRlbXMgKGl0ZW1MaXN0LCBmbGFnID0gbnVsbCkge1xuICAgIGNvbnN0IHByb2Nlc3NlZCA9IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0KSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIWl0ZW0uc3lzdGVtLmZsYWdzKSBpdGVtLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICAgIGl0ZW0uc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgcHJvY2Vzc2VkLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSkpXG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRVbmlxdWVJdGVtIChza2lsbCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgIGlmICghaXRlbUlkKSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIXNraWxsLnN5c3RlbS5mbGFncykgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtza2lsbF0sIHtcbiAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICB9XG4gIH1cblxuICBnZXQgcmF3TXBNYXggKCkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8pIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIENvQ0FjdG9yLm1wRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgICB9IGVsc2UgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KVxuICB9XG5cbiAgZ2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHR5cGVvZiBzYW5SZWFzb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzLmZpbHRlcihcbiAgICAgICAgICByID0+IHIudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzYW5SZWFzb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICApWzBdID8/IHsgdHlwZTogJycsIHRvdGFsTG9zczogMCwgaW1tdW5pdHk6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJycsIHRvdGFsTG9zczogMCwgaW1tdW5pdHk6IGZhbHNlIH1cbiAgfVxuXG4gIHNhbkxvc3RUb1JlYXNvbiAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHNhblJlYXNvbikge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICAgIHJldHVybiBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQgKHNhblJlYXNvbikge1xuICAgIGlmIChzYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnR5cGUgIT09ICcnXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XG4gICAgaWYgKHR5cGVvZiBzYW5SZWFzb24gPT09ICdzdHJpbmcnICYmIHNhblJlYXNvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKVxuICAgICAgY29uc3QgaW5kZXggPSBzYW5pdHlMb3NzRXZlbnRzLmZpbmRJbmRleChcbiAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICAgIGlmIChzYW5Mb3NzID4gMCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IHNhblJlYXNvbixcbiAgICAgICAgICAgIHRvdGFsTG9zczogc2FuTG9zcyxcbiAgICAgICAgICAgIGltbXVuaXR5OiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50c1tpbmRleF0udG90YWxMb3NzICs9IHNhbkxvc3NcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG1heExvc3NUb1NhblJlYXNvbiAoc2FuUmVhc29uLCBzYW5NYXhGb3JtdWxhKSB7XG4gICAgY29uc3Qgc2FuTWF4ID0gbmV3IFJvbGwoc2FuTWF4Rm9ybXVsYS50b1N0cmluZygpKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHNhbk1heCAtIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MpXG4gIH1cblxuICBhc3luYyBsb29zZVNhbiAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gLSBzYW5Mb3NzKVxuICAgICAgaWYgKHNhbkxvc3MgPiAwKSB0aGlzLnNldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uLCBzYW5Mb3NzKVxuICAgICAgcmV0dXJuIHNhbkxvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3MgKGNoZWNrUGFzc2VkKSB7XG4gICAgaWYgKGNoZWNrUGFzc2VkKSByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWRcbiAgICByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrUGFzc2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzQ2hlY2tGYWlsbGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc01heCAoKSB7XG4gICAgaWYgKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNaW4gKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuPy5kYWlseUxvc3MgfHwgMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTGltaXQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMaW1pdCB8fCAwXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdGh1bGh1TXl0aG9zKSByZXR1cm4gTWF0aC5tYXgoOTkgLSB0aGlzLmN0aHVsaHVNeXRob3MsIDApXG4gICAgICByZXR1cm4gOTlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heClcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgbXAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlKVxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICAvLyBUT0RPIGlmIGFueSBpcyBudWxsIHNldCBtYXggYmFjayB0byBudWxsLlxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgICAgIH1cbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGFzeW5jIHNldE1wICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSkgeyB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCBzYW4gKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSlcbiAgfVxuXG4gIGdldCBpbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbikge1xuICAgICAgICBvY2N1cGF0aW9uUG9pbnRzICs9IHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgaWYgKCF0aGlzLm9jY3VwYXRpb24pIHJldHVybiAwXG4gICAgbGV0IHBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5vY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICApKSB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgIHBvaW50cyArPSBjaGFyLnZhbHVlICogTnVtYmVyKHZhbHVlLm11bHRpcGxpZXIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludHNcbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldFBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgIH0pXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBhcmNoZXR5cGVQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKSB7XG4gICAgICAgIGFyY2hldHlwZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuYXJjaGV0eXBlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmNoZXR5cGVQb2ludHNcbiAgfVxuXG4gIGdldCBhcmNoZXR5cGVQb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5hcmNoZXR5cGUpIHJldHVybiAwXG4gICAgcmV0dXJuIHRoaXMuYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICB9XG5cbiAgZ2V0IGV4cGVyaWVuY2VQb2ludHMgKCkge1xuICAgIGxldCBleHBlcmllbmNlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpIHtcbiAgICAgICAgZXhwZXJpZW5jZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXhwZXJpZW5jZVBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBwZXJzb25hbFBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbCkge1xuICAgICAgICBwZXJzb25hbFBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMucGVyc29uYWxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBlcnNvbmFsUG9pbnRzXG4gIH1cblxuICBnZXQgcGVyc29uYWxQb2ludHMgKCkge1xuICAgIHJldHVybiAyICogTnVtYmVyKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUpXG4gIH1cblxuICBnZXQgaGFzRGV2ZWxvcG1lbnRQaGFzZSAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRTYW4gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KSB7IHZhbHVlID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4IH1cbiAgICBjb25zdCBsb3NzID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpIC0gdmFsdWVcblxuICAgIGlmIChsb3NzID4gMCkge1xuICAgICAgbGV0IHRvdGFsTG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcylcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgIDogMFxuICAgICAgdG90YWxMb3NzID0gdG90YWxMb3NzICsgbG9zc1xuICAgICAgaWYgKGxvc3MgPj0gNSkgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICBpZiAodG90YWxMb3NzID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSxcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiB0b3RhbExvc3NcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSc6IHZhbHVlIH0pXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBhc3luYyBzZXRBdHRyaWJBdXRvICh2YWx1ZSwgYXR0cmliKSB7XG4gICAgY29uc3QgdXBkYXRlZEtleSA9IGBzeXN0ZW0uYXR0cmlicy4ke2F0dHJpYn0uYXV0b2BcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyBbdXBkYXRlZEtleV06IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBdHRyaWJBdXRvIChhdHRyaWIpIHtcbiAgICB0aGlzLnNldEF0dHJpYkF1dG8oIXRoaXMuc3lzdGVtLmF0dHJpYnNbYXR0cmliXS5hdXRvLCBhdHRyaWIpXG4gIH1cblxuICBzdGF0aWMgZGJGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuICcxRDQnXG4gICAgcmV0dXJuIGAke01hdGguZmxvb3IoKHN1bSAtIDQ1KSAvIDgwKX1ENmBcbiAgfVxuXG4gIHN0YXRpYyBidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MgKGNoYXJhY3RlcmlzdGljcykge1xuICAgIGNvbnN0IHN1bSA9IChjaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID8/IDApICsgKGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgPz8gMClcbiAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxuICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgaWYgKHN1bSA8IDEyNSkgcmV0dXJuIDBcbiAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxuICAgIHJldHVybiBNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCkgKyAxXG4gIH1cblxuICBzdGF0aWMgaHBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUpIHtcbiAgICBjb25zdCBzdW0gPSBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDAsIDEwKSArIHBhcnNlSW50KGNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgPz8gMCwgMTApXG4gICAgY29uc3QgZGl2aXNvciA9IChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcpICYmIHR5cGUgPT09ICdjaGFyYWN0ZXInID8gNSA6IDEwKVxuICAgIHJldHVybiBNYXRoLmZsb29yKHN1bSAvIGRpdmlzb3IpXG4gIH1cblxuICBzdGF0aWMgbXBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgfVxuXG4gIHN0YXRpYyBtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUsIGFnZSkge1xuICAgIGxldCBNT1ZcbiAgICBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUpIHtcbiAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgfSBlbHNlIGlmIChjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgfHwgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA4XG4gICAgfSBlbHNlIHtcbiAgICAgIE1PViA9IDdcbiAgICB9XG4gICAgaWYgKHR5cGUgIT09ICdjcmVhdHVyZScgJiYgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQoYWdlKSkpIHtcbiAgICAgICAgTU9WID0gcGFyc2VJbnQoYWdlKSA+PSA0MCA/IE1PViAtIE1hdGguZmxvb3IocGFyc2VJbnQoYWdlKSAvIDEwKSArIDMgOiBNT1ZcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1PVilcbiAgfVxuXG4gIGdldCByYXdCdWlsZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIHtcbiAgICAgIHJldHVybiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3RGIgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuZGIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCByYXdNb3YgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMubW92KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0bykge1xuICAgICAgY29uc3QgTU9WID0gQ29DQWN0b3IubW92RnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMuc3lzdGVtLnR5cGUsIHRoaXMuc3lzdGVtLmluZm9zLmFnZSlcbiAgICAgIGlmIChNT1YgPiAwKSByZXR1cm4gTU9WXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlXG4gIH1cblxuICBnZXQgdG9rZW5JZCAoKSB7XG4gICAgLy8gVE9ETyBjbGFyaWZpZXIgY2EgZXQgdG9rZW5rZXlcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbG9ja2VkICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICB9XG5cbiAgZ2V0SXRlbXNGcm9tTmFtZSAobmFtZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkubmFtZSA9PT0gbmFtZSlcbiAgfVxuXG4gIHNldCBsb2NrZWQgKHZhbHVlKSB7XG4gICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGF0dHJpYnV0ZU5hbWUga2V5IG9mIGF0dHJpYnV0ZSB0byBjaGVjayBpbiBbJ2xjayddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgYXR0cmlidXRlQ2hlY2sgKGF0dHJpYnV0ZU5hbWUsIGZhc3RGb3J3YXJkID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGF0dHJpYiA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICBpZiAoIWF0dHJpYikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIG1pc3Npbmc6IGF0dHJpYnV0ZU5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmIChvcHRpb25zLm1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGxBdHRyaWJ1dGUoYXR0cmliLmtleSlcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gY2hhcmFjdGVyaXN0aWNOYW1lIGtleSBvZiBjaGFyYWN0ZXJpc3RpYyB0byBjaGVjayBpbiBbJ3N0cicsJ2NvbicsJ3NpeicsJ2RleCcsJ2FwcCcsJ2ludCcsJ3BvdycsJ2VkdSddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgY2hhcmFjdGVyaXN0aWNDaGVjayAoXG4gICAgY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgIGZhc3RGb3J3YXJkID0gZmFsc2UsXG4gICAgb3B0aW9ucyA9IHt9XG4gICkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhY3RlcmlzdGljTmFtZSlcblxuICAgIGlmICghY2hhcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgbWlzc2luZzogY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhci5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIHN0YXRpYyB0b29sVGlwU2tpbGxUZXh0ICgpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgKSB7XG4gICAgICBjb25zdCBpc0NvbWJhdCA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbGFzc0xpc3Q/LmNvbnRhaW5zKFxuICAgICAgICAnY29tYmF0J1xuICAgICAgKVxuICAgICAgY29uc3Qgc2tpbGxJZCA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgIGNvbnN0IGFjdG9yQXBwSWQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLndpbmRvdy1hcHAnKT8uZGF0YXNldD8uYXBwaWRcbiAgICAgIGlmICh0eXBlb2Ygc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGFjdG9yQXBwSWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB1aS53aW5kb3dzW2FjdG9yQXBwSWRdPy5hY3Rvcj8uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ySWQgPSB1aS53aW5kb3dzW2FjdG9yQXBwSWRdLmFjdG9yLmlkXG4gICAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gYWN0b3IuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGlzQ29tYmF0ID8gJ0NvQzcuVG9vbFRpcENvbWJhdCcgOiAnQ29DNy5Ub29sVGlwU2tpbGwnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2tpbGw6IHNraWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgcmVndWxhcjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICAgICAgaGFyZDogTWF0aC5mbG9vcihza2lsbC52YWx1ZSAvIDIpLFxuICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyA1KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgIGFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b29sVGlwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZ2V0SXRlbU9yQWRkIChpdGVtSWRlbnRpZmllciwgdHlwZSA9ICdza2lsbCcpIHtcbiAgICBjb25zdCB0eXBlQ29DSUQgPSBpdGVtSWRlbnRpZmllci5tYXRjaCgvXmlcXC4oW15cXFxcLl0rKVxcLi4vKVxuICAgIGlmICh0eXBlQ29DSUQpIHtcbiAgICAgIC8vIEF0dGVtcHQgdG8gbG9hZCBmcm9tIGFjdG9yIGJ5IENvQyBJRFxuICAgICAgbGV0IGl0ZW0gPSB0aGlzLmdldEZpcnN0SXRlbUJ5Q29DSUQoaXRlbUlkZW50aWZpZXIpXG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgY29uc3QgbmV3SXRlbXMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQmVzdCh7IGNvY2lkOiBpdGVtSWRlbnRpZmllciwgc2hvd0xvYWRpbmc6IHRydWUgfSlcbiAgICAgICAgaWYgKG5ld0l0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBuZXdJdGVtcylcbiAgICAgICAgICBpdGVtID0gdGhpcy5nZXRGaXJzdEl0ZW1CeUNvQ0lEKGl0ZW1JZGVudGlmaWVyKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9Ta2lsbEFkZGVkQXRCYXNlJywge1xuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBwZXJjZW50OiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0ucmVsb2FkKClcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9XG4gICAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID09PSAnJyAmJiBpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmdldEl0ZW1PckFkZChpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWUsICdza2lsbCcpXG4gICAgICAgICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLm1haW4uaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJ10gPSBza2lsbFswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID09PSAnJyAmJiBpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmdldEl0ZW1PckFkZChpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUsICdza2lsbCcpXG4gICAgICAgICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lJ10gPSBza2lsbFswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh1cGRhdGVzKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gW2l0ZW1dXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gbG9hZCBmb3IgYWN0b3IgYnkgbmFtZVxuICAgIGxldCBteUl0ZW1zID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoaXRlbUlkZW50aWZpZXIpXG4gICAgaWYgKCFteUl0ZW1zLmxlbmd0aCkge1xuICAgICAgY29uc3QgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgICAgLy8gQXR0ZW1wdCB0byBsb2FkIGl0ZW0gZnJvbSB3b3JsZFxuICAgICAgY29uc3QgbmV3SXRlbSA9IGdhbWUuaXRlbXMuZmluZCgoZCkgPT4ge1xuICAgICAgICBpZiAoZC50eXBlID09PSB0eXBlICYmIGQubmFtZSA9PT0gaXRlbUlkZW50aWZpZXIpIHtcbiAgICAgICAgICBjb25zdCBlcmFzID0gbmV3SXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzXG4gICAgICAgICAgaWYgKGVyYXMgJiYgT2JqZWN0LmtleXMoZXJhcykubGVuZ3RoID4gMCAmJiAhKGVyYXNbZXJhXSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG4gICAgICBpZiAobmV3SXRlbSkge1xuICAgICAgICBteUl0ZW1zLnB1c2gobmV3SXRlbSlcbiAgICAgIH1cbiAgICAgIGlmIChteUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBBdHRlbXB0IHRvIGxvYWQgaXRlbSBmcm9tIGNvbXBlbmRpdW1zXG4gICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICAgICAgaWYgKHBhY2subWV0YWRhdGE/LnR5cGUgPT09ICdJdGVtJykge1xuICAgICAgICAgICAgYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxuICAgICAgICAgICAgY29uc3QgbmV3SXRlbSA9IGdhbWUuaXRlbXMuZmluZCgoZCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZC50eXBlID09PSB0eXBlICYmIGQubmFtZSA9PT0gaXRlbUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcmFzID0gbmV3SXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzXG4gICAgICAgICAgICAgICAgaWYgKGVyYXMgJiYgT2JqZWN0LmtleXMoZXJhcykubGVuZ3RoID4gMCAmJiAhKGVyYXNbZXJhXSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAobmV3SXRlbSkge1xuICAgICAgICAgICAgICBteUl0ZW1zLnB1c2gobmV3SXRlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChteUl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgbXlJdGVtcylcbiAgICAgICAgbXlJdGVtcyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW1JZGVudGlmaWVyKVxuICAgICAgICBpZiAobXlJdGVtcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAobXlJdGVtc1swXS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvU2tpbGxBZGRlZEF0QmFzZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogbXlJdGVtc1swXS5uYW1lLFxuICAgICAgICAgICAgICBwZXJjZW50OiBteUl0ZW1zWzBdLnZhbHVlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9IGVsc2UgaWYgKG15SXRlbXNbMF0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IG15SXRlbXNbMF0ucmVsb2FkKClcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7fVxuICAgICAgICAgICAgaWYgKG15SXRlbXNbMF0uc3lzdGVtLnNraWxsLm1haW4uaWQgPT09ICcnICYmIG15SXRlbXNbMF0uc3lzdGVtLnNraWxsLm1haW4ubmFtZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmdldEl0ZW1PckFkZChteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5tYWluLm5hbWUsICdza2lsbCcpXG4gICAgICAgICAgICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwubWFpbi5pZCddID0gc2tpbGxbMF0uaWRcbiAgICAgICAgICAgICAgICB1cGRhdGVzWydzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJ10gPSBza2lsbFswXS5uYW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID09PSAnJyAmJiBteUl0ZW1zWzBdLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQobXlJdGVtc1swXS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lLCAnc2tpbGwnKVxuICAgICAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQnXSA9IHNraWxsWzBdLmlkXG4gICAgICAgICAgICAgICAgdXBkYXRlc1snc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSddID0gc2tpbGxbMF0ubmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGF3YWl0IG15SXRlbXNbMF0udXBkYXRlKHVwZGF0ZXMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBteUl0ZW1zXG4gIH1cblxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBza2lsbElkZW50aWZpZXIgPSBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhXG4gICAgbGV0IHNraWxsID0gYXdhaXQgdGhpcy5nZXRJdGVtT3JBZGQoc2tpbGxJZGVudGlmaWVyLCAnc2tpbGwnKVxuICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgIG9wdGlvbnMubmFtZSA9IHNraWxsWzBdLm5hbWVcbiAgICB9XG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChza2lsbERhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5pZCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoc2tpbGxEYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICAvLyBObyBza2lsbCBmb3VuZCwgdHJ5IHRvIGdldCBnZXQgaXQgZnJvbSBjb21wZW5kaXVtICFcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgcmV0cmlldmFsIG9mIHNraWxsIGZyb20gY29tcGVuZGl1bSAhIVxuICAgICAgICAvLyBnYW1lLnNldHRpbmdzLmdldCggJ0NvQzcnLCAnRGVmYXVsdENvbXBlbmRpdW0nKTtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gJz8nXG4gICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgfVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1NraWxsJykgKyAnICcgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgICAgIG1pc3Npbmc6IHNraWxsSWRlbnRpZmllcixcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgY3JlYXRlID0gZmFsc2VcbiAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFkZFdlYXBvbnRIaW50Jywge1xuICAgICAgICAgIHdlYXBvbjogc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSldKVxuICAgICAgfSBlbHNlIHJldHVyblxuXG4gICAgICBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW0ubmFtZSlcblxuICAgICAgaWYgKCFza2lsbC5sZW5ndGgpIHJldHVyblxuXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGF3YWl0IFNraWxsVmFsdWVEaWFsb2cuY3JlYXRlKFxuICAgICAgICAgIHNraWxsWzBdLm5hbWUsXG4gICAgICAgICAgc2tpbGxbMF0uYmFzZVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsVmFsdWUuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZVZhbHVlKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmRpZmZpY3VsdHkgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBvcHRpb25zLm1vZGlmaWVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBpZiAob3B0aW9ucy5wdXNoaW5nID09PSAnZmFsc2UnKSBjaGVjay5wdXNoaW5nID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLnB1c2hpbmcgPSAhIW9wdGlvbnMucHVzaGluZ1xuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZShjaGVjay5wdXNoaW5nKVxuICB9XG5cbiAgYXN5bmMgd2VhcG9uQ2hlY2sgKHdlYXBvbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBsZXQgd2VhcG9uXG4gICAgaWYgKHR5cGVvZiB3ZWFwb25EYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSBhd2FpdCBmcm9tVXVpZCh3ZWFwb25EYXRhLnV1aWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2VhcG9uRGF0YS5pZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXG4gICAgfVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICBsZXQgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZSh3ZWFwb25EYXRhLm5hbWUpXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXG4gICAgICAgICAgaWYgKHBhY2spIHtcbiAgICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGFjdG9yID1cbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBhcmVudD8uYWN0b3IgIT09ICd1bmRlZmluZWQnID8gdGhpcy5wYXJlbnQuYWN0b3IgOiB0aGlzXG5cbiAgICAgICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IGFjdG9yLmdldEl0ZW1zRnJvbU5hbWUoaXRlbS5uYW1lKVxuICAgICAgICAgIGlmICghd2VhcG9ucy5sZW5ndGgpIHJldHVyblxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNOb1dlYXBvbk5hbWVkJywge1xuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgd2VhcG9uTmFtZTogd2VhcG9uRGF0YS5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh3ZWFwb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JBY3Rvckhhc1Rvb01hbnlXZWFwb25zTmFtZWQnLCB7XG4gICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHdlYXBvbiA9IHdlYXBvbnNbMF1cbiAgICB9XG5cbiAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCAod2VhcG9uRGF0YS51dWlkIHx8IHdlYXBvbi5pZCksIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbml0aWF0aXZlIChoYXNHdW4gPSBmYWxzZSkge1xuICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSkge1xuICAgICAgY2FzZSAnb3B0aW9uYWwnOiB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKHRoaXMuYWN0b3JLZXkpXG4gICAgICAgIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUx1Y2sgPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUJsaW5kVGFtcGVyaW5nID0gdHJ1ZVxuICAgICAgICByb2xsLmhpZGVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycpID09PSBmYWxzZVxuICAgICAgICByb2xsLmZsYXZvciA9ICdJbml0aWF0aXZlIHJvbGwnXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKCdkZXgnLCBoYXNHdW4gPyAxIDogMClcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHJvbGwuc3VjY2Vzc0xldmVsICsgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDEwMFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBoYXNHdW5cbiAgICAgICAgICA/IHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgKyA1MFxuICAgICAgICAgIDogdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGdldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIHNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldFdlYXBvblNraWxscyAoaXRlbUlkKSB7XG4gICAgbGV0IHdlYXBvbiA9IGZyb21VdWlkU3luYyhpdGVtSWQpXG4gICAgaWYgKCF3ZWFwb24pIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWFwb24uc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gZ2FtZS5wYWNrcy5nZXQod2VhcG9uLnBhY2spLmdldCh3ZWFwb24uX2lkKVxuICAgIH1cbiAgICBpZiAod2VhcG9uLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKSlcbiAgICB9XG5cbiAgICBpZiAod2VhcG9uLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSlcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgLyoqIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSBvciBza2lsbCB0aGF0IG1hdGNoZXMgdGhlIG5hbWUgKi9cbiAgZmluZCAobmFtZSkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIFRyeSBJRFxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChuYW1lKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVnRXhwID0gL1xcKChbXildKylcXCkvXG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlZ0V4cC5leGVjKG5hbWUpXG4gICAgbGV0IHNob3J0TmFtZSA9IG51bGxcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkgc2hvcnROYW1lID0gbWF0Y2hlc1sxXVxuICAgIC8vIFRyeSB0byBmaW5kIGEgc2tpbGwgd2l0aCBleGFjdCBuYW1lLlxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFzLm5hbWUgJiZcbiAgICAgICAgKHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoc2tpbGwubGVuZ3RoKSByZXR1cm4geyB0eXBlOiAnaXRlbScsIHZhbHVlOiBza2lsbFswXSB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBhIGNoYXJhY3RlcmlzdGljLlxuICAgIGNvbnN0IGNoYXJLZXkgPSBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcktleVtpXSlcbiAgICAgIGlmIChjaGFyKSB7XG4gICAgICAgIGNoYXIubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBhdHRyaWJ1dGUuXG4gICAgY29uc3QgYXR0cmliS2V5ID0gWydsY2snLCAnc2FuJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYktleVtpXSlcbiAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgIGF0dHIubmFtZSA9IGF0dHIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHdpdGggcGFydGlhbCA/P1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwaWxvdFNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuUGlsb3RTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkcml2ZVNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuRHJpdmVTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0b2tlblV1aWQgKCkge1xuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gdGhpcy5zaGVldC50b2tlbi51dWlkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIC8vIENsYXJpZmllciBjYSBldCB0b2tlbmlkXG4gICAgLyoqICogTU9ESUYgMC44LnggKi9cbiAgICAvLyBpZiB0aGlzLnNoZWV0LnRva2VuID0+IHdhcyBvcGVuZWQgZnJvbSB0b2tlblxuICAgIC8vIGlmIHRoaXMudG9rZW4gPT4gc3ludGhldGljIGFjdG9yID09IHRoaXMuaXNUb2tlblxuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9XG4gICAgLyoqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vQ2FzZSAxOiB0aGUgYWN0b3IgaXMgYSBzeW50aGV0aWMgYWN0b3IgYW5kIGhhcyBhIHRva2VuLCByZXR1cm4gdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLmlzVG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmlkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuXG4gICAgLy8gLy9DYXNlIDI6IHRoZSBhY3RvciBpcyBub3QgYSB0b2tlbiAobGlua2VkIGFjdG9yKS4gSWYgdGhlIHNoZWV0IGhhdmUgYW4gYXNzb2NpYXRlZCB0b2tlbiByZXR1cm4gdGhlIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5zaGVldC50b2tlbikgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4uc2NlbmU/LmlkP3RoaXMuc2hlZXQudG9rZW4uc2NlbmUuaWQ6J1RPS0VOJ30uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWA7XG5cbiAgICAvLyAvL0Nhc2UgMzogQWN0b3IgaGFzIG5vIHRva2VuIHJldHVybiBoaXMgSUQ7XG4gICAgLy8gcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXQgYWN0b3JLZXkgKCkge1xuICAgIGlmICh0aGlzLnByb3RvdHlwZVRva2VuLmFjdG9yTGluaykgcmV0dXJuIHRoaXMuaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIHRoaXMudG9rZW5LZXlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBnZXQgaGFzUm9sbGFibGVDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIodmFsdWUuZm9ybXVsYSkpKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBob3NSb2xsYWJsZVNraWxscyAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKGlzTmFOKHNraWxsLnN5c3RlbT8udmFsdWUpKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgdGhlIGZvcm11bGEgaWYgYXZhaWxhYmxlIHRvIHJvbGwgc29tZSBjaGFyYWN0ZXJpdGljcy5cbiAgICovXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmIChyLnRvdGFsKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgIHIudG90YWxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlcmUgaXMgYSBmb3JtdWxhLCB3aWxsIHNldCB0aGUgY2hhcmFjdGVyaXN0aWMgdG8gdGhlIGF2ZXJhZ2UgdmFsdWUgLGlmIGRpdmlzaWJsZSBieSA1LCBvciB0aGUgY2xvc2VzdCAxMC5cbiAgICovXG4gIGFzeW5jIGF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgYXZlcmFnZSA9IG5ldyBBdmVyYWdlUm9sbCgnKCcgKyB2YWx1ZS5mb3JtdWxhICsgJyknKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtaW5pbWl6ZTogdHJ1ZSwgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gYXZlcmFnZVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGEgY2hhcmFjdGVyaXNpdGMgZm9ybXVsYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBvdGhlciBjaGFyYWN0ZXJpc3RpYyBhbmQgc2V0IGl0IGFjY29yZGluZ2x5LlxuICAgKi9cbiAgYXN5bmMgcmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgbGV0IGNoYXJWYWx1ZVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG5ldyBSb2xsKFxuICAgICAgICAgICAgdmFsdWUuZm9ybXVsYSxcbiAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgIClbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY2hhclZhbHVlID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyVmFsdWUpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBjaGFyVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgfVxuXG4gIGFzeW5jIHNldENoYXJhY3RlcmlzdGljIChuYW1lLCB2YWx1ZSkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0ge31cbiAgICBjb25zdCBjaGFyVmFsdWUgPSBpc05hTihwYXJzZUludCh2YWx1ZSkpID8gbnVsbCA6IHBhcnNlSW50KHZhbHVlKVxuICAgIGNoYXJhY3RlcmlzdGljW25hbWVdID0gY2hhclZhbHVlXG4gICAgaWYgKCFjaGFyVmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgZm9ybXVsYSA9IG5hbWUucmVwbGFjZSgnLnZhbHVlJywgJy5mb3JtdWxhJylcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNbZm9ybXVsYV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcGVtZW50UGhhc2UgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBmYWlsdXJlID0gW11cbiAgICBjb25zdCBzdWNjZXNzID0gW11cbiAgICBjb25zdCBza2lsbE1hc3RlcmluZ1RocmVzaG9sZCA9IDkwXG4gICAgY29uc3QgYWx3YXlzU3VjY2Vzc1RocmVzaG9sZCA9IDk1XG5cbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpXG4gICAgbGV0IHNraWxsc1JvbGxlZCA9IDBcbiAgICBsZXQgbWVzc2FnZSA9ICc8cCBjbGFzcz1cImNoYXQtY2FyZFwiPidcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBpZiAoaXRlbS5kZXZlbG9wZW1lbnRGbGFnKSB7XG4gICAgICAgICAgc2tpbGxzUm9sbGVkKytcbiAgICAgICAgICBjb25zdCBkaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwMCB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGl0ZW0udmFsdWVcbiAgICAgICAgICBsZXQgYXVnbWVudCA9IG51bGxcbiAgICAgICAgICBsZXQgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gbnVsbFxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiBza2lsbFZhbHVlIHx8IGRpZS50b3RhbCA+PSBhbHdheXNTdWNjZXNzVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zdCBhdWdtZW50RGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMCB9KS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc3VjY2Vzcy5wdXNoKGl0ZW0uaWQpXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgU0FOIGF1Z21lbnQgd2hlbiB0aGUgc2tpbGwgZ29lcyBiZXlvbmQgdGhlIHNraWxsIG1hc3RlcmluZyB0aHJlc2hvbGQuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgPCBza2lsbE1hc3RlcmluZ1RocmVzaG9sZCAmJlxuICAgICAgICAgICAgICBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbCA+PSBza2lsbE1hc3RlcmluZ1RocmVzaG9sZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGF1Z21lbnRTQU5EaWUgPSBhd2FpdCBuZXcgRGllKHtcbiAgICAgICAgICAgICAgICBmYWNlczogNixcbiAgICAgICAgICAgICAgICBudW1iZXI6IDJcbiAgICAgICAgICAgICAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBjb25zdCBzYW5HYWluZWQgPSBhdWdtZW50U0FORGllLnRvdGFsXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZE1lc3NhZ2UgPSBgR2FpbmVkIDJkNiAoJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfSA9ICR7c2FuR2FpbmVkfSkgU0FOYFxuICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKHNhbkdhaW5lZE1lc3NhZ2UpXG4gICAgICAgICAgICAgIHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAnQ29DNy5TYW5HYWluZWQnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19YCxcbiAgICAgICAgICAgICAgICAgIHNhbkdhaW5lZCxcbiAgICAgICAgICAgICAgICAgIHNraWxsOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICBza2lsbFZhbHVlOiBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgICAgLy8gU2V0IHNhbiBjb250cm9scyB0aGF0IGl0IGRvZXNuJ3QgYXVnbWVudCBiZXlvbmQgc2FuTWF4XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U2FuKHRoaXMuc2FuICsgc2FuR2FpbmVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXVnbWVudCArPSBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgaWYgKHNraWxsTWFzdGVyaW5nTWVzc2FnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBtZXNzYWdlICs9IHNraWxsTWFzdGVyaW5nTWVzc2FnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgaXRlbS5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2RmFpbHVyZScsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IGl0ZW0udmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgIGZhaWx1cmUucHVzaChpdGVtLmlkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCBpdGVtLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IFtdXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgIGZvciAoY29uc3Qgc2FuaXR5TG9zc0V2ZW50IG9mIHRoaXMuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMpIHtcbiAgICAgIGlmIChzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHtcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHNhbml0eUxvc3NFdmVudClcbiAgICAgIH0gZWxzZSBpZiAoc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcyA+IDEpIHtcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcy0tXG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXG4gICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgaWYgKHNraWxsc1JvbGxlZCkge1xuICAgICAgICBtZXNzYWdlICs9ICc8YnI+J1xuICAgICAgfVxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZHVjZVNhbml0eUxpbWl0cycpfTwvc3Bhbj5gXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHNcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcyB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2Uoc2tpbGxzUm9sbGVkID8gdGl0bGUgOiAnJywgbWVzc2FnZSwge1xuICAgICAgICBzcGVha2VyXG4gICAgICB9KVxuICAgICAgdGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24gPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiB7IGZhaWx1cmUsIHN1Y2Nlc3MgfVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcEx1Y2sgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBjdXJyZW50THVjayA9IHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlXG4gICAgaWYgKCFjdXJyZW50THVjaykgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJzogMCB9KVxuICAgIGNvbnN0IHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaydcbiAgICApXG4gICAgY29uc3QgdXBncmFkZVJvbGwgPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgIGNvbnN0IGhpZ2hlclRoYW5DdXJyZW50THVjayA9IHVwZ3JhZGVSb2xsID4gY3VycmVudEx1Y2tcbiAgICBsZXQgYXVnbWVudFJvbGxcbiAgICBpZiAocHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrKSB7XG4gICAgICBoaWdoZXJUaGFuQ3VycmVudEx1Y2tcbiAgICAgICAgPyAoYXVnbWVudFJvbGwgPSAnMkQxMCsxMCcpXG4gICAgICAgIDogKGF1Z21lbnRSb2xsID0gJzFEMTArNScpXG4gICAgfSBlbHNlIGlmIChoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcbiAgICAgIGF1Z21lbnRSb2xsID0gJzFEMTAnXG4gICAgfVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxMdWNrNERldicpXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayB8fCBoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRWYWx1ZSA9IChhd2FpdCBuZXcgUm9sbChhdWdtZW50Um9sbCkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKVxuICAgICAgICAudG90YWxcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6XG4gICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUgKyBhdWdtZW50VmFsdWVcbiAgICAgIH0pXG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgJ0NvQzcuTHVja0luY3JlYXNlZCcsXG4gICAgICAgIHtcbiAgICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLFxuICAgICAgICAgIHNjb3JlOiBjdXJyZW50THVjayxcbiAgICAgICAgICBhdWdtZW50OiBhdWdtZW50VmFsdWVcbiAgICAgICAgfVxuICAgICAgKX08L3NwYW4+YFxuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAnQ29DNy5MdWNrTm90SW5jcmVhc2VkJyxcbiAgICAgICAgeyBkaWU6IHVwZ3JhZGVSb2xsLCBzY29yZTogY3VycmVudEx1Y2sgfVxuICAgICAgKX08L3NwYW4+YFxuICAgIH1cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMgfVxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXIgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZXZlbG9wU2tpbGwgKHNraWxsSWQsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgaWYgKCFza2lsbCkgcmV0dXJuXG4gICAgbGV0IHRpdGxlID0gJydcbiAgICBsZXQgbWVzc2FnZSA9ICcnXG4gICAgY29uc3QgdXBncmFkZVJvbGwgPSBuZXcgUm9sbCgnMUQxMDAnKVxuICAgIGF3YWl0IHVwZ3JhZGVSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHVwZ3JhZGVSb2xsKVxuICAgIGlmICh1cGdyYWRlUm9sbC50b3RhbCA+IHNraWxsLnZhbHVlIHx8IHVwZ3JhZGVSb2xsLnRvdGFsID49IDk1KSB7XG4gICAgICBjb25zdCBhdWdtZW50Um9sbCA9IG5ldyBSb2xsKCcxRDEwJylcbiAgICAgIGF3YWl0IGF1Z21lbnRSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoYXVnbWVudFJvbGwpXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZTdWNjZXNzRGV0YWlscycsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgYXVnbWVudDogYXVnbWVudFJvbGwudG90YWxcbiAgICAgIH0pXG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudFJvbGwudG90YWwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGRpZTogdXBncmFkZVJvbGwudG90YWwsXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxuICAgICAgfSlcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldkZhaWx1cmVEZXRhaWxzJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lXG4gICAgICB9KVxuICAgIH1cbiAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcy5faWQgfVxuICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXG4gICAgYXdhaXQgc2tpbGwudW5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgfVxuXG4gIGhhc0NvbmRpdGlvblN0YXR1cyAoY29uZGl0aW9uTmFtZSkge1xuICAgIGNvbnN0IGNvbmRpdGlvblZhbHVlID0gdGhpcy5zeXN0ZW0uY29uZGl0aW9ucz8uW2NvbmRpdGlvbk5hbWVdPy52YWx1ZVxuICAgIGlmICh0eXBlb2YgY29uZGl0aW9uVmFsdWUgIT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIGZhbHNlIC8vIE5lY2Vzc2FyeSwgaW5jb3JyZWN0IHRlbXBsYXRlIGluaXRpYWxpemF0aW9uXG4gICAgfVxuICAgIHJldHVybiBjb25kaXRpb25WYWx1ZVxuICB9XG5cbiAgaGFzQ29uZGl0aW9uVmFsdWUgKGNvbmRpdGlvbk5hbWUsIGZpZWxkKSB7XG4gICAgaWYgKCF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhjb25kaXRpb25OYW1lKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoY29uZGl0aW9uTmFtZSA9PT0gQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUgJiYgZmllbGQgPT09ICdkdXJhdGlvblRleHQnKSB7XG4gICAgICBjb25zdCByZWFsVGltZSA9IHRoaXMuaGFzQ29uZGl0aW9uVmFsdWUoY29uZGl0aW9uTmFtZSwgJ3JlYWxUaW1lJylcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShjb25kaXRpb25OYW1lLCAnZHVyYXRpb24nKVxuICAgICAgaWYgKHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIGR1cmF0aW9uICsgJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJvdW5kcycpXG4gICAgICAgIH0gZWxzZSBpZiAocmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGR1cmF0aW9uICsgJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmhvdXJzJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5jb25kaXRpb25zPy5bY29uZGl0aW9uTmFtZV0/LltmaWVsZF1cbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUNvbmRpdGlvbiAoY29uZGl0aW9uTmFtZSkge1xuICAgIGNvbnN0IGNvbmRpdGlvblZhbHVlID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoY29uZGl0aW9uTmFtZSlcbiAgICBpZiAoIWNvbmRpdGlvblZhbHVlKSB7XG4gICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihjb25kaXRpb25OYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbk5hbWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2V0Q29uZGl0aW9uIChcbiAgICBjb25kaXRpb25OYW1lLFxuICAgIHtcbiAgICAgIGZvcmNlVmFsdWUgPSBmYWxzZSxcbiAgICAgIGp1c3RUaGlzID0gZmFsc2UsXG4gICAgICByZWFsVGltZSA9IG51bGwsXG4gICAgICBkdXJhdGlvbiA9IG51bGxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgaWYgKCFmb3JjZVZhbHVlICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmVmZmVjdHNcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gQ29DN0FjdGl2ZUVmZmVjdC5maWx0ZXJBY3RpdmVFZmZlY3RzKGVmZmVjdCwgY29uZGl0aW9uTmFtZSkpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHt9XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgb3ZlcmxheTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgcmVhbFRpbWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdXN0b20uZHVyYXRpb24gPSB7XG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MuQ29DNy5yZWFsVGltZSA9IHJlYWxUaW1lXG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgICByZWFsVGltZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpZiAocmVhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24ucm91bmRzID0gZHVyYXRpb25cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24uc2Vjb25kcyA9IGR1cmF0aW9uICogMzYwMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmlsdGVyKFxuICAgICAgICAgIGVmZmVjdCA9PiBlZmZlY3QuaWQgPT09IGNvbmRpdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZWZmZWN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICAgIGljb246IGVmZmVjdFswXS5pY29uLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMScpKSB7XG4gICAgICAgICAgICAvLyBGb3VuZHJ5VlRUIHYxMFxuICAgICAgICAgICAgc291cmNlLmxhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKGVmZmVjdFswXS5sYWJlbClcbiAgICAgICAgICAgIHNvdXJjZS5mbGFncyA9IHtcbiAgICAgICAgICAgICAgY29yZToge1xuICAgICAgICAgICAgICAgIHN0YXR1c0lkOiBlZmZlY3RbMF0uaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2UubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShlZmZlY3RbMF0ubmFtZSlcbiAgICAgICAgICAgIHNvdXJjZS5zdGF0dXNlcyA9IFtlZmZlY3RbMF0uaWRdXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGVmZmVjdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNvdXJjZSwgY3VzdG9tKVxuICAgICAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbZWZmZWN0RGF0YV0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhpcyBkb2Vzbid0IGV4aXN0IGluIEZvdW5kcnlWVFQgQWN0aXZlRWZmZWN0cz9cbiAgICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXN0b20uX2lkID0gZWZmZWN0c1swXVxuICAgICAgICBhd2FpdCBzdXBlci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2N1c3RvbV0pXG4gICAgICAgIGZvcmNlVmFsdWUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmb3JjZVZhbHVlIHx8ICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgIFtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS52YWx1ZWBdOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHt9XG4gICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSB8fCByZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnJlYWxUaW1lYF0gPSByZWFsVGltZVxuICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5kdXJhdGlvbmBdID0gZHVyYXRpb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS4tPXJlYWxUaW1lYF0gPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGBzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LmR1cmF0aW9uYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09ZHVyYXRpb25gXSA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGZpZWxkcylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmICghanVzdFRoaXMpIHtcbiAgICAgICAgLy8gRG9lcyBzZXR0aW5nIHRoZSBjb25kaXRpb24gYWxzbyB0cmlnZ2VyIG90aGVyIGFjdGlvbnM/XG4gICAgICAgIC8vIC0gSWYgQWN0aXZlRWZmZWN0cyBhcmUgYWRkZWQgaGFzQ29uZGl0aW9uU3RhdHVzIGZvciByZWNlbnRseSBhZGRlZCBjb25kaXRpb25zIG1heSByZXR1cm4gaW5jb3JyZWN0bHlcbiAgICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnByb25lKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpICYmXG4gICAgICAgICAgICAgICF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbkNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB1bnNldENvbmRpdGlvbiAoY29uZGl0aW9uTmFtZSwgeyBmb3JjZVZhbHVlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFmb3JjZVZhbHVlICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmVmZmVjdHNcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gQ29DN0FjdGl2ZUVmZmVjdC5maWx0ZXJBY3RpdmVFZmZlY3RzKGVmZmVjdCwgY29uZGl0aW9uTmFtZSkpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT12YWx1ZWBdOiBudWxsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVE9ETyA6IGNoZWNrIGlmIGV2ZXIgdXNlZFxuICBhc3luYyByZXNldENvdW50ZXIgKGNvdW50ZXIpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtjb3VudGVyXTogMCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXREYWlseVNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihcbiAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1XG4gICAgICApLFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwXG4gICAgfSlcbiAgfVxuXG4gIGdldCBmaWdodGluZ1NraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBjbG9zZUNvbWJhdFdlYXBvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbkxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICd3ZWFwb24nICYmICF2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQodmFsdWUuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIHZhbHVlLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwgPyBza2lsbC52YWx1ZSA6IDBcbiAgICAgICAgd2VhcG9uTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHdlYXBvbkxpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gd2VhcG9uTGlzdFxuICB9XG5cbiAgZ2V0IGZpcmVhcm1Ta2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiAodmFsdWUuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSB8fCB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5yYW5nZWQgfHwgdmFsdWUuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gJ2kuc2tpbGwuZmlnaHRpbmctdGhyb3cnKSkge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgdXNlciAoKSB7XG4gICAgLy8gaXMgdGhhdCBhY3RvciBpbXBlcnNvbmFudGVkIGJ5IGEgdXNlciA/XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmluZCh1c2VyID0+IHtcbiAgICAgIGlmICh1c2VyLmNoYXJhY3Rlcikge1xuICAgICAgICBpZiAodXNlci5jaGFyYWN0ZXIuaWQgPT09IHRoaXMuaWQpIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGRvZGdlU2tpbGwgKCkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5nZXRGaXJzdEl0ZW1CeUNvQ0lEKCdpLnNraWxsLmRvZGdlJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZ1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RJdGVtQnlDb0NJRCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmNyZWRpdC1yYXRpbmcnKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvc1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RJdGVtQnlDb0NJRCgnaS5za2lsbC5jdGh1bGh1LW15dGhvcycpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jdGh1bGh1LW15dGhvcycpXG4gICAgKVxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBjdGh1bGh1TXl0aG9zICgpIHtcbiAgICBjb25zdCBDTSA9IHRoaXMuY3RodWxodU15dGhvc1NraWxsXG4gICAgaWYgKENNKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENNLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENNLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBteXRob3NIYXJkZW5lZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdteXRob3NIYXJkZW5lZCcpIHx8IGZhbHNlXG4gIH1cblxuICBnZXQgdXNlTXl0aG9zSGFyZGVuZWQgKCkge1xuICAgIHJldHVybiB0aGlzLm15dGhvc0hhcmRlbmVkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93TXl0aG9zSGFyZGVuZWQnKVxuICB9XG5cbiAgYXN5bmMgc2V0TXl0aG9zSGFyZGVuZWQgKCkge1xuICAgIGF3YWl0IHRoaXMuc2V0RmxhZygnQ29DNycsICdteXRob3NIYXJkZW5lZCcsIHRydWUpXG4gIH1cblxuICBnZXQgbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcsIHRydWUpXG4gIH1cblxuICBnZXQgY3JlZGl0UmF0aW5nICgpIHtcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nU2tpbGxcbiAgICBpZiAoQ1IpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ1IudmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ1Iuc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgc3RhdGljIG1vbmV0YXJ5Rm9ybWF0IChmb3JtYXQsIHN5bWJvbCwgdmFsdWUpIHtcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5sc2Q6XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHZhbHVlIC8gMjQwKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gMTIpICUgMjApICsgJy8nICsgKHZhbHVlICUgMTIpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLnJvbWFuOlxuICAgICAgICByZXR1cm4gKE1hdGguZmxvb3IodmFsdWUgLyA0MDApKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gMTYpICUgMjUpICsgJy8nICsgKE1hdGguZmxvb3IodmFsdWUgLyA4KSAlIDIpICsgJy8nICsgKE1hdGguZmxvb3IodmFsdWUgLyA0KSAlIDIpICsgJy8nICsgKHZhbHVlICUgNClcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuZGVjaW1hbExlZnQ6XG4gICAgICAgIHJldHVybiBzeW1ib2wgKyBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkucmVwbGFjZSgvXFwuMDAkLywgJycpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmRlY2ltYWxSaWdodDpcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiB9KS5yZXBsYWNlKC9cXC4wMCQvLCAnJykgKyAnICcgKyBzeW1ib2xcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuaW50ZWdlckxlZnQ6XG4gICAgICAgIHJldHVybiBzeW1ib2wgKyBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKClcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuaW50ZWdlclJpZ2h0OlxuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpICsgJyAnICsgc3ltYm9sXG4gICAgfVxuICAgIHJldHVybiAnMCdcbiAgfVxuXG4gIHN0YXRpYyBtb25ldGFyeVZhbHVlIChmb3JtYXQsIHZhbHVlcywgQ1IsIHR5cGUsIHZhbHVlKSB7XG4gICAgQ1IgPSBDUiB8fCAwXG4gICAgY29uc3Qgcm93ID0gdmFsdWVzLmZpbmQociA9PiAodHlwZW9mIHIubWluID09PSAnb2JqZWN0JyB8fCByLm1pbiA8PSBDUikgJiYgKHR5cGVvZiByLm1heCA9PT0gJ29iamVjdCcgfHwgci5tYXggPj0gQ1IpKVxuICAgIGlmICh0eXBlb2Ygcm93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygcm93W3R5cGVdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygcm93W3ZhbHVlXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMubHNkOlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gMjQwICogQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDI0MCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnM6XG4gICAgICAgICAgICAgIHJldHVybiAxMiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLmQ6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLnJvbWFuOlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gNDAwICogQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDQwMCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLmRlbmFyaWk6XG4gICAgICAgICAgICAgIHJldHVybiAxNiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnF1aW5hcmlpOlxuICAgICAgICAgICAgICByZXR1cm4gOCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnNlc3RlcnRpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDQgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5hc3NlczpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgc3dpdGNoIChyb3dbdHlwZV0pIHtcbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLm11bHRpcGxpZXI6XG4gICAgICAgICAgICAgIHJldHVybiBDUiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnZhbHVlOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzcGVuZGluZ0xldmVsICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdzcGVuZGluZ1R5cGUnLCAnc3BlbmRpbmdWYWx1ZScpXG4gIH1cblxuICBnZXQgY2FzaCAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnY2FzaFR5cGUnLCAnY2FzaFZhbHVlJylcbiAgfVxuXG4gIGdldCBhc3NldHMgKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ2Fzc2V0c1R5cGUnLCAnYXNzZXRzVmFsdWUnKVxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnKSBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgb3duZXJzICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maWx0ZXIoXG4gICAgICB1ID0+IHRoaXMudGVzdFVzZXJQZXJtaXNzaW9uKHUsICdPV05FUicpICYmICF1LmlzR01cbiAgICApXG4gIH1cblxuICBnZXQgcGxheWVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lcnMuZmlsdGVyKHUgPT4gdS5jaGFyYWN0ZXI/LmlkID09PSB0aGlzLmlkKVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlclVzZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICBnYW1lLnVzZXJzLmNvbnRlbnRzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClbMF0gfHwgbnVsbFxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4XG4gICAgfVxuICAgIGNvbnN0IGhlYWx0aEJlZm9yZSA9IHRoaXMuaHBcbiAgICBsZXQgZGFtYWdlVGFrZW5cbiAgICAvLyBpcyBoZWFsaW5nXG4gICAgaWYgKGlzTmFOKGhlYWx0aEJlZm9yZSkgfHwgdmFsdWUgPj0gaGVhbHRoQmVmb3JlKSB7XG4gICAgICBhd2FpdCB0aGlzLl9zZXRIcCh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGFtYWdlVGFrZW4gPSBoZWFsdGhCZWZvcmUgLSB2YWx1ZVxuICAgICAgYXdhaXQgdGhpcy5kZWFsRGFtYWdlKGRhbWFnZVRha2VuLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAoYW1vdW50LCBvcHRpb25zID0ge30pIHtcbiAgICAvLyBUT0RPOiBDaGFuZ2Ugb3B0aW9ucyB0byBsaXN0IG9mIHZhbHVlc1xuICAgIGNvbnN0IGFybW9yRGF0YSA9IG9wdGlvbnMuYXJtb3JcbiAgICAgID8gb3B0aW9ucy5hcm1vclxuICAgICAgOiB0aGlzLnN5c3RlbS5hdHRyaWJzLmFybW9yIC8vIGlmIHRoZXJlIGFybW9yIHZhbHVlIHBhc3NlZCB3ZSB1c2UgaXRcbiAgICBjb25zdCBncm9zc0RhbWFnZSA9IHBhcnNlSW50KGFtb3VudClcbiAgICBsZXQgYXJtb3JWYWx1ZSA9IDBcbiAgICBpZiAoIW9wdGlvbnMuaWdub3JlQXJtb3IpIHtcbiAgICAgIGlmIChhcm1vckRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgLy8gbm9wXG4gICAgICB9IGVsc2UgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKGFybW9yRGF0YSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IChhd2FpdCBuZXcgUm9sbChhcm1vckRhdGEpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vckRhdGEpKSkge1xuICAgICAgICBhcm1vclZhbHVlID0gTnVtYmVyKGFybW9yRGF0YSlcbiAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vckRhdGE/LnZhbHVlKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEudmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclVuYWJsZVRvUGFyc2VBcm1vckZvcm11bGEnLCB7XG4gICAgICAgICAgICB2YWx1ZTogYXJtb3JEYXRhXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXREYW1hZ2UgPSBncm9zc0RhbWFnZSAtIGFybW9yVmFsdWVcbiAgICBpZiAobmV0RGFtYWdlIDw9IDApIHJldHVybiAwXG4gICAgYXdhaXQgdGhpcy5fc2V0SHAodGhpcy5ocCAtIG5ldERhbWFnZSlcbiAgICBpZiAobmV0RGFtYWdlID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpKSB7XG4gICAgICAgIGlmICh0aGlzLmhwID09PSAwKSB7XG4gICAgICAgICAgaWYgKG5ldERhbWFnZSA+PSBNYXRoLmNlaWwodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggLyAyKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25DaGVjay50b01lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgaGFzTWFqb3JXb3VuZCA9IGZhbHNlXG4gICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhhc01ham9yV291bmQgPSB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgIGlmIChoYXNNYWpvcldvdW5kKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldERhbWFnZVxuICB9XG5cbiAgZ2V0IG1ham9yV291bmQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgfVxuXG4gIGdldCBkeWluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmR5aW5nKVxuICB9XG5cbiAgZ2V0IHVuY29uc2Npb3VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gIH1cblxuICBnZXQgZGVhZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gIH1cblxuICBnZXQgcHJvbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5wcm9uZSlcbiAgfVxuXG4gIC8vIHN0YXRpYyB1cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpe1xuICAvLyAgIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGB1cGRhdGluZyBhY3RvciAke2FjdG9yLm5hbWV9YCk7XG4gIC8vICAgICBjb25zdCBwcm9uZSA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnByb25lXTtcbiAgLy8gICAgIGNvbnN0IHVuY29uc2Npb3VzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMudW5jb25zY2lvdXNdO1xuICAvLyAgICAgY29uc3QgY3JpdGljYWxXb3VuZHMgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kc107XG4gIC8vICAgICBjb25zdCBkeWluZyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLmR5aW5nXTtcbiAgLy8gICAgIGlmKCBwcm9uZSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclByb25lJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIHVuY29uc2Npb3VzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXMnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgICBpZiggY3JpdGljYWxXb3VuZHMpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGR5aW5nKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yRHlpbmcnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgfVxuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JQcm9uZVwiOiBcInthY3Rvcn0gZmFsbCBwcm9uZVwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXNcIjogXCJ7YWN0b3J9IGZhbGwgdW5jb25zY2lvdXNcIixcbiAgLy8gXCJDb0M3LkluZm9BY3Rvck1ham9yV291bmRcIjogXCJ7YWN0b3J9IGdldCBhIG1ham9yIHdvdW5kXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JEeWluZ1wiOiBcInthY29yfSBpcyBkeWluZ1wiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9ySW5qdXJpZWRcIjogXCJ7YWN0b3J9IGlzIGluanVyaWVkXCIsXG5cbiAgLy8gc3RhdGljIHVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpe1xuICAvLyAgIGNvbnN0IGluanVyaWVkID0gZGF0YVVwZGF0ZT8uYWN0b3JEYXRhPy5mbGFncz8uQ29DNz8uaW5qdXJpZWQ7XG4gIC8vICAgaWYoIGluanVyaWVkKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9ySW5qdXJpZWQnLCB7YWN0b3I6IHRva2VuLm5hbWV9KSk7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgdXBkYXRlIChkYXRhID0ge30sIGNvbnRleHQgPSB7fSkge1xuICAvLyAgIGNvbnNvbGUubG9nKCc+Pj4+JywgZGF0YSwgY29udGV4dClcbiAgLy8gICBzdXBlci51cGRhdGUoZGF0YSwgY29udGV4dClcbiAgLy8gfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yLCBBdWRpb0hlbHBlciwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCBnZXRDb21wdXRlZFN0eWxlLCBJdGVtLCByZW5kZXJUZW1wbGF0ZSwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGVjayB7XG4gIGNvbnN0cnVjdG9yIChcbiAgICBhY3RvciA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGl0ZW0gPSBudWxsLFxuICAgIGRpY2VNb2QgPSAwLFxuICAgIGRpZmZpY3VsdHkgPSBudWxsLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDBcbiAgKSB7XG4gICAgdGhpcy5hY3RvciA9IGFjdG9yXG4gICAgdGhpcy5za2lsbCA9IHNraWxsXG4gICAgdGhpcy5pdGVtID0gaXRlbVxuICAgIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICB0aGlzLnJhd1ZhbHVlID0gMCAvLyB2YWx1ZSBuZWVkZWQgYmVmb3JlIGRpZmZpY3VsdHlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG51bGxcbiAgICB0aGlzLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuXG4gICAgaWYgKGRpZmZpY3VsdHkgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGlzVW5rbm93biA9XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBpc1Vua25vd25cbiAgICAgICAgPyBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGNhcmRUeXBlICgpIHtcbiAgICByZXR1cm4gJ3JvbGxDYXJkJ1xuICB9XG5cbiAgc3RhdGljIGdldCBkaWZmaWN1bHR5TGV2ZWwgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1bmtub3duOiAtMSxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0LFxuICAgICAgaW1wb3NzaWJsZTogOVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZnVtYmxlOiAtOTksXG4gICAgICBmYWlsdXJlOiAwLFxuICAgICAgcmVndWxhcjogMSxcbiAgICAgIGhhcmQ6IDIsXG4gICAgICBleHRyZW1lOiAzLFxuICAgICAgY3JpdGljYWw6IDRcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFyYWN0ZXJpc3RpYzogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIGF0dHJpYnV0ZTogJ2F0dHJpYnV0ZScsXG4gICAgICBza2lsbDogJ2l0ZW0nLFxuICAgICAgaXRlbTogJ2l0ZW0nLFxuICAgICAgdmFsdWU6ICd2YWx1ZSdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZGlmZmljdWx0eVN0cmluZyAoZGlmZmljdWx0eUxldmVsKSB7XG4gICAgc3dpdGNoIChcbiAgICAgICFpc05hTihOdW1iZXIoZGlmZmljdWx0eUxldmVsKSlcbiAgICAgICAgPyBOdW1iZXIoZGlmZmljdWx0eUxldmVsKVxuICAgICAgICA6IGRpZmZpY3VsdHlMZXZlbFxuICAgICkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICAvLyBpZiAoIXRoaXMuYWN0b3IgfHwgIXRoaXMuYWN0b3IuaWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cbiAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNraWxsKSB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fcmF3VmFsdWUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMSkgcmV0dXJuIDFcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgcmF3VmFsdWUgKHgpIHtcbiAgICB0aGlzLl9yYXdWYWx1ZSA9IHhcbiAgfVxuXG4gIHNldCB1dWlkICh4KSB7XG4gICAgdGhpcy5fdXVpZCA9IHhcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICBpZiAoIXRoaXMuX3V1aWQpIHRoaXMuX3V1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHJldHVybiB0aGlzLl91dWlkXG4gIH1cblxuICBnZXQgaGFzQ2FyZCAoKSB7XG4gICAgY29uc3QgY2hhdENhcmQgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy51dWlkID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndXVpZCcpICYmXG4gICAgICAgIENvQzdDaGVjay5jYXJkVHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKGNoYXRDYXJkLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmF3VmFsdWVTdHJpbmcgKCkge1xuICAgIGlmICh0aGlzLl9yYXdWYWx1ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuICcwJ1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKFxuICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA8IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpICsgJysnICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgICAgKVxuICAgIH0gZWxzZSByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKVxuICB9XG5cbiAgZ2V0IGNyaXRpY2FsVGhyZXNob2xkICgpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgZ2V0IHJlZ3VsYXJUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSA+PSAxMDApIHJldHVybiA5OVxuICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMucmF3VmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaGFyZFRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHJldHVybiBNYXRoLmZsb29yKHRoaXMucmF3VmFsdWUgLyAyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZXh0cmVtZVRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHJldHVybiBNYXRoLmZsb29yKHRoaXMucmF3VmFsdWUgLyA1KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZnVtYmxlVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBpZiAodGhpcy5kaWZmaWN1bHR5ID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGQgPCA1MCA/IDk2IDogMTAwXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kaWZmaWN1bHR5ID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmhhcmRUaHJlc2hvbGQgPCA1MCA/IDk2IDogMTAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnJhd1ZhbHVlIDwgNTAgPyA5NiA6IDEwMFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc1RocmVzaG9sZCAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICAgIHJldHVybiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5U3RyaW5nICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgZ2V0IG1vZGlmaWVkUmVzdWx0ICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHR5cGVvZiB0aGlzLl9tb2RpZmllZFJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLl9tb2RpZmllZFJlc3VsdFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIpIHtcbiAgICAgIGNvbnN0IG1vZGlmaWVkID0gdGhpcy5kaWNlcy50b3RhbCArIHRoaXMuZmxhdERpY2VNb2RpZmllclxuICAgICAgaWYgKG1vZGlmaWVkIDwgMSkgcmV0dXJuIDFcbiAgICAgIGlmIChtb2RpZmllZCA+IDEwMCkgcmV0dXJuIDEwMFxuICAgICAgcmV0dXJuIG1vZGlmaWVkXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRpY2VzLnRvdGFsXG4gIH1cblxuICBzZXQgbW9kaWZpZWRSZXN1bHQgKHgpIHtcbiAgICB0aGlzLl9tb2RpZmllZFJlc3VsdCA9IHhcbiAgfVxuXG4gIGdldCBmbGF0RGljZU1vZGlmaWVyU3RyaW5nICgpIHtcbiAgICBpZiAoIXRoaXMuZmxhdERpY2VNb2RpZmllcikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5mbGF0RGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIGArJHt0aGlzLmZsYXREaWNlTW9kaWZpZXJ9YFxuICAgIHJldHVybiB0aGlzLmZsYXREaWNlTW9kaWZpZXIudG9TdHJpbmcoKVxuICB9XG5cbiAgZ2V0IGlzRnVtYmxlICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRSZXN1bHQgPj0gdGhpcy5mdW1ibGVUaHJlc2hvbGRcbiAgfVxuXG4gIGdldCBpc0NyaXRpY2FsICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDFcbiAgfVxuXG4gIGdldCBpc0V4dHJlbWVTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxuICB9XG5cbiAgZ2V0IHBhc3NlZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmx1Y2tTcGVudCkgcmV0dXJuIHRoaXMuZGlmZmljdWx0eSA8PSB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc1RocmVzaG9sZCA+PSB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8IHRoaXMuaXNDcml0aWNhbFxuICB9XG5cbiAgZ2V0IGZhaWxlZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiAhdGhpcy5wYXNzZWRcbiAgfVxuXG4gIGdldCBpc1NpbXBsZVJvbGwgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5yYXdWYWx1ZSA9PT0gJ3VuZGVmaW5lZCdcbiAgfVxuXG4gIGdldCBoYXNCb251cyAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNQZW5hbHR5ICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPCAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc01vZGlmaWVyICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgIT09IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgZGljZU1vZGlmaWVyICgpIHtcbiAgICBpZiAodGhpcy5fZGljZU1vZGlmaWVyKSByZXR1cm4gdGhpcy5fZGljZU1vZGlmaWVyXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNldCBkaWNlTW9kaWZpZXIgKHgpIHtcbiAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuc2hvcnROYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LmxhYmVsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3J0TmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zaG9ydE5hbWVcbiAgICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0ubmFtZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyh0aGlzLmNoYXJhY3RlcmlzdGljKT8uc2hvcnRcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdsY2snKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdzYW4nKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZnVsbE5hbWUgKCkge1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPVxuICAgICAgdGhpcy5fZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgID8gZmFsc2VcbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxuICAgIGNvbnN0IG1vZGlmaWVyID1cbiAgICAgIHRoaXMuX2RpY2VNb2RpZmllciA+IDBcbiAgICAgICAgPyBgKyR7dGhpcy5fZGljZU1vZGlmaWVyfWBcbiAgICAgICAgOiB0aGlzLl9kaWNlTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgYENvQzcuTGlua0NoZWNrJHshZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICF0aGlzLl9kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgIH1gLFxuICAgICAgeyBkaWZmaWN1bHR5LCBtb2RpZmllciwgbmFtZTogdGhpcy5uYW1lIH1cbiAgICApXG4gIH1cblxuICBnZXQgcm9sbGVkICgpIHtcbiAgICBpZiAodGhpcy5kaWNlKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGNoZWNrIGZyb20gYW4gSFRNTEVsZW1lbnQgb3IgYSBjaGF0IGNhcmQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgIFRoZSBIVE1MRWxlbWVudCB0aGF0IGlzIGEgcm9sbC1yZXN1bHQgb3IgYSBjaGF0IGNhcmQgY29udGFpbmluZyBhIHNpbmdsZSByb2xsLXJlc3VsdC5cbiAgICogQHJldHVybiB7Q29DN0NoZWNrfSAgICAgIEEgQ29DN0NoZWNrLlxuICAgKi9cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgcm9sbFJlc3VsdCA9IGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpXG4gICAgICA/IGNhcmRcbiAgICAgIDogY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQocm9sbFJlc3VsdCwgY2hlY2spXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNoZWNrLm1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHB1c2ggKGNhcmQsIHB1Ymxpc2ggPSB0cnVlKSB7XG4gICAgY29uc3Qgb2xkQ2hlY2sgPSBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZCkgLy8gVE9ETzogUmVmYWN0b3JpbmdcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICBjb25zdCBza2lsbElkID0gY2FyZC5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBjaGFyYWMgPSBjYXJkLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICBjb25zdCBpdGVtSWQgPSBjYXJkLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgZGljZU1vZCA9IGNhcmQuZGF0YXNldC5kaWNlTW9kXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IGNhcmQuZGF0YXNldC5kaWZmaWN1bHR5XG5cbiAgICBsZXQgcHVzaGVkUm9sbFxuICAgIGlmIChza2lsbElkKSB7XG4gICAgICBwdXNoZWRSb2xsID0gbmV3IENvQzdDaGVjayhhY3RvcklkLCBza2lsbElkLCBpdGVtSWQsIGRpY2VNb2QsIGRpZmZpY3VsdHkpXG4gICAgfSBlbHNlIGlmIChjaGFyYWMpIHtcbiAgICAgIHB1c2hlZFJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHB1c2hlZFJvbGwuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgICAgcHVzaGVkUm9sbC5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgICAgcHVzaGVkUm9sbC5hY3RvciA9IGFjdG9ySWRcbiAgICAgIHB1c2hlZFJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGFyYWNcbiAgICB9IGVsc2UgcmV0dXJuXG4gICAgaWYgKG9sZENoZWNrLnV1aWQpIHtcbiAgICAgIHB1c2hlZFJvbGwuY29udGV4dCA9IG9sZENoZWNrLmNvbnRleHRcbiAgICAgIHB1c2hlZFJvbGwudXVpZCA9IG9sZENoZWNrLnV1aWRcbiAgICB9XG4gICAgaWYgKG9sZENoZWNrLnBhcmVudCkgcHVzaGVkUm9sbC5wYXJlbnQgPSBvbGRDaGVjay5wYXJlbnRcbiAgICBwdXNoZWRSb2xsLnB1c2hpbmcgPSB0cnVlXG4gICAgYXdhaXQgcHVzaGVkUm9sbC5yb2xsKClcbiAgICBpZiAob2xkQ2hlY2subWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBvID0gYXdhaXQgZ2FtZS5tZXNzYWdlcy5nZXQob2xkQ2hlY2subWVzc2FnZUlkKVxuICAgICAgaWYgKHR5cGVvZiBvLnJvbGxzPy5bMF0/Lm9wdGlvbnM/LmNvYzdSZXN1bHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG8ucm9sbHNbMF0ub3B0aW9ucy5jb2M3UmVzdWx0LnB1c2hpbmcgPSB0cnVlXG4gICAgICAgIGF3YWl0IG8udXBkYXRlKHtcbiAgICAgICAgICByb2xsczogby5yb2xsc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHVibGlzaCkgcHVzaGVkUm9sbC50b01lc3NhZ2UodHJ1ZSwgY2FyZClcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgc2V0IGFjdG9yICh4KSB7XG4gICAgdGhpcy5hY3RvcktleSA9IHhcbiAgICBpZiAoeCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9hY3RvciA9IHhcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh4IGluc3RhbmNlb2YgQWN0b3IpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgdGhpcy5fYWN0b3IgPSB4XG4gICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRoaXMuYWN0b3IubmFtZVxuICAgICAgaWYgKHgudG9rZW4gJiYgeC50b2tlbi5zY2VuZSAmJiB4LnRva2VuLnNjZW5lLmlkKSB7XG4gICAgICAgIHRoaXMuYWN0b3JLZXkgPSBgJHt4LnRva2VuLnNjZW5lLmlkfS4ke3gudG9rZW4uaWR9YFxuICAgICAgfSBlbHNlIHRoaXMuYWN0b3JLZXkgPSB4LmlkIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHguaW5jbHVkZXMoJy4nKSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0geC5zcGxpdCgnLicpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdGhpcy5fYWN0b3IubmFtZSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVyblxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICB0aGlzLl9hY3RvciA9IHRva2VuLmFjdG9yXG4gICAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdG9rZW4ubmFtZVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5fYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoeClcbiAgICB0aGlzLmFjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgc3VjY2Vzc0xldmVsSWNvbnMgKCkge1xuICAgIGlmICh0aGlzLnVua25vd25EaWZmaWN1bHR5KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCAmJiB0aGlzLl9yYXdWYWx1ZSAhPT0gMCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zdWNjZXNzTGV2ZWwgPj0gdGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICBjb25zdCBpY29ucyA9IFtdXG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBpbmRleCA8IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMTtcbiAgICAgICAgaW5kZXgrK1xuICAgICAgKSB7XG4gICAgICAgIGljb25zLnB1c2godGhpcy5pc0NyaXRpY2FsID8gJ21lZGFsJyA6ICdzdGFyJylcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN1Y2Nlc3NIaW50ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TdWNjZXNMZXZlbEhpbnQnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLnN1Y2Nlc3NMZXZlbCAtIHRoaXMuZGlmZmljdWx0eSArIDFcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0NyaXRpY2FsID8gJ2NyaXRpY2FsJyA6ICdzdWNjZXNzJyxcbiAgICAgICAgaGludDogc3VjY2Vzc0hpbnQsXG4gICAgICAgIGljb25zXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGljb25zID0gW11cbiAgICAgIGNvbnN0IHN1Y2Nlc3NMZXZlbCA9IHRoaXMuaXNGdW1ibGUgPyAtMSA6IHRoaXMuc3VjY2Vzc0xldmVsXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5kaWZmaWN1bHR5IC0gc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIGljb25zLnB1c2godGhpcy5pc0Z1bWJsZSA/ICdza3VsbCcgOiAnc3BpZGVyJylcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZhaWx1cmVIaW50ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWlsdXJlTGV2ZWxIaW50Jywge1xuICAgICAgICB2YWx1ZTogdGhpcy5kaWZmaWN1bHR5IC0gc3VjY2Vzc0xldmVsXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGNzc0NsYXNzOiB0aGlzLmlzRnVtYmxlID8gJ2Z1bWJsZScgOiAnZmFpbHVyZScsXG4gICAgICAgIGhpbnQ6IGZhaWx1cmVIaW50LFxuICAgICAgICBpY29uc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCB1bmtub3duRGlmZmljdWx0eSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlFeHRyZW1lIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUhhcmQgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhclxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IHRoaXMuZGlmZmljdWx0eVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzZXQgc2tpbGwgKHgpIHtcbiAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2dldEl0ZW1Gcm9tSWQoeClcbiAgICB0aGlzLnNraWxsSWQgPSB4XG4gIH1cblxuICBzZXQgaXRlbSAoeCkge1xuICAgIHRoaXMuX2l0ZW0gPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXG4gICAgaWYgKHRoaXMuX2l0ZW0/LnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICB0aGlzLml0ZW1JZCA9IHhcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXRlbSA9IHVuZGVmaW5lZFxuICAgICAgdGhpcy5pdGVtSWQgPSB1bmRlZmluZWRcbiAgICB9XG4gIH1cblxuICBfZ2V0SXRlbUZyb21JZCAoeCkge1xuICAgIGlmICh4ID09IG51bGwpIHJldHVybiBudWxsXG4gICAgaWYgKHggaW5zdGFuY2VvZiBJdGVtKSByZXR1cm4geFxuICAgIGlmICh0aGlzLl9hY3RvcikgcmV0dXJuIHRoaXMuX2FjdG9yLml0ZW1zLmdldCh4KVxuICAgIHJldHVybiBnYW1lLml0ZW1zLmdldCh4KVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX2FjdG9yIHx8ICF0aGlzLl9hY3Rvcj8uaWQpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yS2V5KSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMuYWN0b3JJZCkgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzRHVtbXk6IHRydWUsXG4gICAgICAgICAgbmFtZTogdGhpcy5hY3Rvck5hbWUgPyB0aGlzLmFjdG9yTmFtZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpZDogdW5kZWZpbmVkLFxuICAgICAgICAgIGltZzogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJyxcbiAgICAgICAgICBwb3J0cmFpdDogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLl9hY3Rvci5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgY29uc3QgYWN0b3IgPSBuZXcgQ29DQWN0b3IodGhpcy5fYWN0b3IpXG4gICAgICB0aGlzLl9hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICBpZiAoIXRoaXMuX3NraWxsICYmIHRoaXMuc2tpbGxJZCkge1xuICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuX3NraWxsICYmIHRoaXMuaXRlbSkge1xuICAgICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwpIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCAmJiAhdGhpcy53ZWFwb25BbHRTa2lsbCkge1xuICAgICAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZClcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgJiZcbiAgICAgICAgICB0aGlzLndlYXBvbkFsdFNraWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9za2lsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5faXRlbSAmJiB0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSB7XG4gICAgICB0aGlzLl9pdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pdGVtXG4gIH1cblxuICBnZXQgZGlzcGxheVJlc3VsdFR5cGUgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5UmVzdWx0VHlwZScpXG4gIH1cblxuICBnZXQgZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJylcbiAgfVxuXG4gIGdldCBkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGxheVJlc3VsdFR5cGUgJiYgdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGdldCBkb250RGlzcGxheVN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmRpc3BsYXlSZXN1bHRUeXBlICYmICF0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgZ2V0IGltYWdlICgpIHtcbiAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuaW1nXG4gICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5pbWdcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TGlua0VsZW1lbnQoKS5vdXRlckhUTUxcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0TGlua0VsZW1lbnQgKGNsYXNzZXMgPSBudWxsKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNsczogWydjb2M3LWxpbmsnLCAnY29jNy1yb2xsJ10uY29uY2F0KGNsYXNzZXMpLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogJ2NoZWNrJyB9LFxuICAgICAgaWNvbjogdGhpcy5pbWFnZVxuICAgICAgICA/IGA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7dGhpcy5pbWFnZX0pXCI+PC9kaXY+YFxuICAgICAgICA6ICc8aSBjbGFzcz1cImZhcyBmYS1kaWNlXCI+PC9pPicsXG4gICAgICBibGluZDogdGhpcy5pc0JsaW5kXG4gICAgfVxuXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKHRoaXMuX2RpZmZpY3VsdHkpXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgYENvQzcuTGlua0NoZWNrJHshdGhpcy5fZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICF0aGlzLl9kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgIH1gLFxuICAgICAge1xuICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICBtb2RpZmllcjogdGhpcy5fZGljZU1vZGlmaWVyLFxuICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgIH1cbiAgICApXG5cbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS50aXRsZSA9IHRpdGxlXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICAgIGEuaW5uZXJIVE1MID0gYCR7ZGF0YS5ibGluZCA/ICc8aSBjbGFzcz1cImZhcyBmYS1leWUtc2xhc2hcIj48L2k+JyA6ICcnfSR7XG4gICAgICBkYXRhLmljb25cbiAgICB9JHt0aGlzLm5hbWV9YFxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGFzeW5jIHJvbGwgKGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0ob3B0aW9ucylcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjaGVjayB3aXRoIHRoZSBwcm92aWRlZCBkYXRhXG4gICAqIFByb2Nlc3Mgcm9sbCBkYXRhIHRvIGEgZm9ybWF0IHRoYXQgY2FuIGJlIGZlZCB0byBjcmVhdGUoKVxuICAgKiBAcGFyYW0geyp9IHJvbGxEYXRhIEEgcm9sbCBkYXRhIHN0cnVjdHVyZSBhcyByZXR1cm5lZCBieSBhY3Rvci5maW5kXG4gICAqIEByZXR1cm5zIEEgY2hlY2sgd2l0aCB0aGUgcm9sbCBkYXRhIHByb3ZpZGVkXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRnJvbUFjdG9yUm9sbERhdGEgKHJvbGxEYXRhKSB7XG4gICAgY29uc3Qgcm9sbCA9IHt9XG4gICAgLy8gY2hlY2sgTW9kaWZpZXJcbiAgICBpZiAocm9sbERhdGEuZGlmZmljdWx0eSkgcm9sbC5kaWZmaWN1bHR5ID0gcm9sbERhdGEuZGlmZmljdWx0eVxuICAgIGlmIChyb2xsRGF0YS5kaWNlTW9kaWZpZXIpIHJvbGwuZGljZU1vZGlmaWVyID0gcm9sbERhdGEuZGljZU1vZGlmaWVyXG4gICAgaWYgKHJvbGxEYXRhLmRlbnlQdXNoID09PSB0cnVlKSByb2xsLmRlbnlQdXNoID0gdHJ1ZVxuICAgIGlmIChyb2xsRGF0YS5mbGF0RGljZU1vZGlmaWVyKSB7XG4gICAgICByb2xsLmZsYXREaWNlTW9kaWZpZXIgPSByb2xsRGF0YS5mbGF0RGljZU1vZGlmaWVyXG4gICAgfVxuICAgIGlmIChyb2xsRGF0YS5mbGF0VGhyZXNob2xkTW9kaWZpZXIpIHtcbiAgICAgIHJvbGwuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gcm9sbERhdGEuZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgfVxuICAgIC8vIEFjdG9yXG4gICAgaWYgKHJvbGxEYXRhLmFjdG9yPy5hY3RvcktleSkgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLmFjdG9yLmFjdG9yS2V5XG4gICAgZWxzZSBpZiAocm9sbERhdGEuYWN0b3I/Lm5hbWUpIHJvbGwuYWN0b3JOYW1lID0gcm9sbERhdGEuYWN0b3IubmFtZVxuICAgIC8vIENoZWNrIHR5cGVcbiAgICBzd2l0Y2ggKHJvbGxEYXRhLnR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuY2hhcmFjdGVyaXN0aWM6XG4gICAgICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSByb2xsRGF0YS52YWx1ZT8ua2V5XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLmF0dHJpYnV0ZTpcbiAgICAgICAgcm9sbC5hdHRyaWJ1dGUgPSByb2xsRGF0YS52YWx1ZT8ua2V5XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLml0ZW06XG4gICAgICAgIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS52YWx1ZS5hY3Rvci5hY3RvcktleVxuICAgICAgICBpZiAocm9sbERhdGEudmFsdWU/LnR5cGUgPT09ICdza2lsbCcpIHJvbGwuc2tpbGwgPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBlbHNlIHJvbGwuaXRlbSA9IHJvbGxEYXRhLnZhbHVlLmlkXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLnNraWxsOlxuICAgICAgICByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEudmFsdWUuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgcm9sbC5za2lsbCA9IHJvbGxEYXRhLnZhbHVlLmlkXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLnZhbHVlOlxuICAgICAgICByb2xsLmRpc3BsYXlOYW1lID0gcm9sbERhdGEudmFsdWUubmFtZVxuICAgICAgICByb2xsLnJhd1ZhbHVlID0gcm9sbERhdGEudmFsdWUudGhyZXNob2xkXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmNyZWF0ZShyb2xsKVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZSAoe1xuICAgIGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIsXG4gICAgZGljZU1vZGlmaWVyID0gbnVsbCxcbiAgICBhY3RvcktleSA9IG51bGwsXG4gICAgY2hhcmFjdGVyaXN0aWMgPSBudWxsLFxuICAgIGF0dHJpYnV0ZSA9IG51bGwsXG4gICAgcmF3VmFsdWUgPSAwLFxuICAgIGl0ZW0gPSBudWxsLFxuICAgIHNraWxsID0gbnVsbCxcbiAgICBmbGF0RGljZU1vZGlmaWVyID0gMCxcbiAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwLFxuICAgIGRpc3BsYXlOYW1lID0gbnVsbCxcbiAgICBhY3Rvck5hbWUgPSBudWxsLFxuICAgIGRlbnlQdXNoID0gdW5kZWZpbmVkXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICBpZiAoZGVueVB1c2ggPT09IHRydWUpIGNoZWNrLmRlbnlQdXNoID0gdHJ1ZVxuICAgIGlmIChkaWNlTW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllclxuICAgIGlmIChmbGF0RGljZU1vZGlmaWVyKSBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgIGlmIChmbGF0VGhyZXNob2xkTW9kaWZpZXIpIHtcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIH1cbiAgICBpZiAoZGlzcGxheU5hbWUpIGNoZWNrLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWVcbiAgICBpZiAoYWN0b3JLZXkpIGNoZWNrLmFjdG9yID0gYWN0b3JLZXlcbiAgICBpZiAoYWN0b3JOYW1lKSBjaGVjay5hY3Rvck5hbWUgPSBhY3Rvck5hbWVcbiAgICBpZiAoIWlzTmFOKE51bWJlcihyYXdWYWx1ZSkpKSBjaGVjay5yYXdWYWx1ZSA9IE51bWJlcihyYXdWYWx1ZSlcbiAgICBpZiAoY2hlY2suYWN0b3IgJiYgIWNoZWNrLmFjdG9yLmlzRHVtbXkpIHtcbiAgICAgIC8vIFRPRE8gOiBBZGQgY2hlY2sgZm9yIHZhbGlkaXR5IG9mIGNoYXJhY3RlcmlzdGljLCBhdHRyaWJ1dGUsIHNraWxsSWRcbiAgICAgIGlmIChza2lsbCkgY2hlY2suc2tpbGwgPSBza2lsbFxuICAgICAgLy8gVE9ETyA6IHRyeSByZXRyaWV2ZSBza2lsbCBieSBuYW1lXG4gICAgICBlbHNlIGlmIChjaGFyYWN0ZXJpc3RpYykgY2hlY2suY2hhcmFjdGVyaXN0aWMgPSBjaGFyYWN0ZXJpc3RpY1xuICAgICAgZWxzZSBpZiAoYXR0cmlidXRlKSBjaGVjay5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGVcbiAgICAgIGVsc2UgaWYgKGl0ZW0pIGNoZWNrLml0ZW0gPSBpdGVtXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljIChjaGFyLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmNoYXJhY3RlcmlzdGljID0gY2hhclxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxBdHRyaWJ1dGUgKGF0dHJpYiwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5hdHRyaWJ1dGUgPSBhdHRyaWJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyByb2xsVmFsdWUgKHZhbCwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbFxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGdldCByb2xsZWRTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgYXN5bmMgX3BlcmZvcm0gKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuZGljZSA9XG4gICAgICBvcHRpb25zLnJvbGwgfHxcbiAgICAgIChhd2FpdCBDb0M3RGljZS5yb2xsKHRoaXMuZGljZU1vZGlmaWVyLCB0aGlzLnJvbGxNb2RlLCB0aGlzLmlzQmxpbmQpKVxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQgJiYgIWdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIEF1ZGlvSGVscGVyLnBsYXkoeyBzcmM6IENPTkZJRy5zb3VuZHMuZGljZSB9LCB0cnVlKVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmZvcmNlRFNOKSB7XG4gICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRpY2Uucm9sbClcbiAgICB9XG5cbiAgICB0aGlzLmRpY2VzID0ge1xuICAgICAgdGVuczogW10sXG4gICAgICB1bml0OiB7XG4gICAgICAgIHZhbHVlOiB0aGlzLmRpY2UudW5pdC50b3RhbFxuICAgICAgfSxcbiAgICAgIHRvdGFsOiB0aGlzLmRpY2UudG90YWwsXG4gICAgICB0ZW5SZXN1bHQ6IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsLFxuICAgICAgaGFzQm9udXM6ICEhdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICBib251czogTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpLFxuICAgICAgYm9udXNUeXBlOlxuICAgICAgICB0aGlzLmRpY2VNb2RpZmllciA8IDBcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXG4gICAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJyksXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlcbiAgICB9XG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmRpY2UudW5pdC50b3RhbCA9PT0gMCA/IDEwMCA6IDkwXG4gICAgY29uc3QgbWluID0gdGhpcy5kaWNlLnVuaXQudG90YWwgPT09IDAgPyAxMCA6IDBcbiAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmRpY2UudG90YWwgLSB0aGlzLmRpY2UudW5pdC50b3RhbFxuICAgIGxldCBmaXJzdFZhbHVlID0gKHNlbGVjdGVkID09PSAwID8gMTAgOiBNYXRoLmZsb29yKHNlbGVjdGVkIC8gMTApKVxuICAgIGZvciAoY29uc3QgZCBvZiB0aGlzLmRpY2Uucm9sbC5kaWNlKSB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIENPTkZJRy5EaWNlLnRlcm1zLnQpIHtcbiAgICAgICAgaWYgKGQucmVzdWx0c1swXS5yZXN1bHQgPT09IGZpcnN0VmFsdWUpIHtcbiAgICAgICAgICBmaXJzdFZhbHVlID0gLTFcbiAgICAgICAgICBkLnJlc3VsdHNbMF0uYWN0aXZlID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGQucmVzdWx0c1swXS5hY3RpdmUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGljZS5yb2xsLl90b3RhbCA9IHRoaXMuZGljZS50b3RhbFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaWNlLnRlbnMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRoaXMuZGljZS50ZW5zLnJlc3VsdHNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuZGljZXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlTHVja1NwZW5kIChsdWNrQW1vdW50KSB7XG4gICAgY29uc3Qgc3BlbmRpbmdBbW91bnQgPSBwYXJzZUludChsdWNrQW1vdW50LCAxMClcbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudCA/PyAwLCAxMCkgKyBzcGVuZGluZ0Ftb3VudFxuICAgIGNvbnN0IG1vZGlmaWVkUmVzdWx0ID0gTWF0aC5tYXgoMSwgdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgaWYgKG1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICB9IGVsc2UgaWYgKG1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuZXh0cmVtZVRocmVzaG9sZCkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWVcbiAgICB9IGVsc2UgaWYgKG1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuaGFyZFRocmVzaG9sZCkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmRcbiAgICB9IGVsc2UgaWYgKG1vZGlmaWVkUmVzdWx0IDw9IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyXG4gICAgfSBlbHNlIGlmICh0aGlzLmZ1bWJsZVRocmVzaG9sZCA8PSBtb2RpZmllZFJlc3VsdCkge1xuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuICAgIH0gZWxzZSBpZiAobW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZVxuICAgIH1cbiAgICBpZiAodGhpcy5kaWZmaWN1bHR5IDw9IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgbGV0IHJlbW92ZSA9IDBcbiAgICBmb3IgKGxldCBpbmRleCA9IDAsIG1heEluZGV4ID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoOyBpbmRleCA8IG1heEluZGV4OyBpbmRleCsrKSB7XG4gICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzc1tpbmRleF0ubHVja1RvU3BlbmQgPSB0aGlzLmluY3JlYXNlU3VjY2Vzc1tpbmRleF0ubHVja1RvU3BlbmQgLSBzcGVuZGluZ0Ftb3VudFxuICAgICAgaWYgKHRoaXMuaW5jcmVhc2VTdWNjZXNzW2luZGV4XS5sdWNrVG9TcGVuZCA8IDEpIHtcbiAgICAgICAgcmVtb3ZlKytcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlbW92ZTsgaW5kZXgrKykge1xuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3Muc2hpZnQoKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBjb21wdXRlQ2hlY2sgKCkge1xuICAgIHRoaXMuaXNVbmtub3duID0gdGhpcy51bmtub3duRGlmZmljdWx0eVxuXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhcikge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUhhcmQpIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgIH1cblxuICAgIHRoaXMudGVuT25seU9uZURpZSA9IHRoaXMuZGljZXMudGVucy5sZW5ndGggPT09IDFcblxuICAgIHRoaXMuaXNWYWx1ZSA9IGZhbHNlXG4gICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gZmFsc2VcbiAgICB0aGlzLmlzU2tpbGwgPSBmYWxzZVxuICAgIHRoaXMuaXNJdGVtID0gZmFsc2VcbiAgICB0aGlzLmlzQXR0cmlidXRlID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuZGVueVB1c2ggPSB0cnVlXG4gICAgICB0aGlzLmRlbnlMdWNrID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RvciA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlzVmFsdWUgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICAgIHRoaXMuaXNTa2lsbCA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5sdWNrU3BlbnQgJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLmhhcmRUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmRcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuZXh0cmVtZVRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZ1bWJsZVRocmVzaG9sZCA8PSB0aGlzLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVua25vd25EaWZmaWN1bHR5KSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCA9ICcnXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TdWNjZXNzUmVxdWlyZWQnLCB7XG4gICAgICAgIHN1Y2Nlc3NSZXF1aXJlZDogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICB9XG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1Vua25vd24gJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IHRoaXMuZmFpbGVkXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRoaXMucGFzc2VkXG4gICAgfVxuXG4gICAgdGhpcy5oYXNNYWxmdW5jdGlvbiA9IGZhbHNlXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcblxuICAgIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgIHRoaXMuaXNJdGVtID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0ubWFsZnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIE51bWJlcih0aGlzLm1vZGlmaWVkUmVzdWx0KSA+PSBOdW1iZXIodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5oYXNNYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgICB0aGlzLm1hbGZ1bmN0aW9uVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYWxmdW5jdGlvbicsIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lOiB0aGlzLml0ZW0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZUl0ZW1GbGFnKENvQzdJdGVtLmZsYWdzLm1hbGZ1bmN0aW9uKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNhbkJlUHVzaGVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5jYW5CZVB1c2hlZCA9IHRoaXMuc2tpbGwgPyB0aGlzLnNraWxsLmNhbkJlUHVzaGVkKCkgOiBmYWxzZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMgIT0gbnVsbCkgdGhpcy5jYW5CZVB1c2hlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgICAgIGlmICh0aGlzLmRlbnlQdXNoKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGVueUx1Y2sgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5sdWNrU3BlbnQgJiZcbiAgICAgICAgIXRoaXMucGFzc2VkICYmXG4gICAgICAgICF0aGlzLmlzRnVtYmxlICYmXG4gICAgICAgIHRoaXMuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCAmJlxuICAgICAgICAhdGhpcy51bmtub3duRGlmZmljdWx0eVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLnNraWxsIHx8IHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgICBjb25zdCBsdWNrTmVlZGVkID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuc3VjY2VzVGhyZXNob2xkXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IubHVjayA+IGx1Y2tOZWVkZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzRW5vdWdoTHVjayA9IHRydWVcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZCA9IGx1Y2tOZWVkZWRcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IGx1Y2tOZWVkZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5sdWNrU3BlbnQpIHtcbiAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuXG4gICAgICAgIC8vIENhbid0IHNwZW5kIGx1Y2sgb24gcHVzaGVkIHJvbGxzLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIXRoaXMucHVzaGluZyAmJlxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnbGNrJyAmJlxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnc2FuJ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnVua25vd25EaWZmaWN1bHR5ICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5SZWd1bGFyRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMucmVndWxhclRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVja1xuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5IDw9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLmhhcmRUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2sgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzcy5sZW5ndGggPiAwXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxuICAgIH1cbiAgICBpZiAodGhpcy5kaWNlKSB7XG4gICAgICB0aGlzLmRpY2Uucm9sbC5vcHRpb25zLmNvYzdSZXN1bHQgPSB7XG4gICAgICAgIHN1Y2Nlc3NMZXZlbDogT2JqZWN0LmtleXMoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbCkuZmluZChrZXkgPT4gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbFtrZXldID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkgPz8gJ3Vua25vd24nLFxuICAgICAgICBkaWZmaWN1bHR5U2V0OiAhdGhpcy5pc1Vua25vd24sXG4gICAgICAgIHBhc3NlZDogdGhpcy5wYXNzZWQsXG4gICAgICAgIHB1c2hpbmc6IGZhbHNlLFxuICAgICAgICBwdXNoZWQ6IHRoaXMucHVzaGluZyxcbiAgICAgICAgbHVja1NwZW50OiB0aGlzLnRvdGFsTHVja1NwZW50ID8/IDBcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm1lc3NhZ2VJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IG8gPSBhd2FpdCBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0eXBlb2Ygby5yb2xscz8uWzBdPy5vcHRpb25zPy5jb2M3UmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBvLnJvbGxzWzBdLm9wdGlvbnMuY29jN1Jlc3VsdC5sdWNrU3BlbnQgPSB0aGlzLnRvdGFsTHVja1NwZW50ID8/IDBcbiAgICAgICAgYXdhaXQgby51cGRhdGUoe1xuICAgICAgICAgIHJvbGxzOiBvLnJvbGxzXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jYW5Bd2FyZEV4cGVyaWVuY2UgPVxuICAgICAgdGhpcy5za2lsbCAmJiAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5wYXNzZWQgJiZcbiAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDw9IDAgJiZcbiAgICAgIHRoaXMuc2tpbGwgJiZcbiAgICAgICF0aGlzLnNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLm5veHBnYWluICYmXG4gICAgICAhdGhpcy5sdWNrU3BlbnQgJiZcbiAgICAgICF0aGlzLmZvcmNlZCAmJlxuICAgICAgIXRoaXMuaXNCbGluZCAmJlxuICAgICAgIXRoaXMuaXNVbmtub3duXG4gICAgKSB7XG4gICAgICB0aGlzLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgY29uc3QgcGFyZW50ID0gYXdhaXQgZnJvbVV1aWQodGhpcy5wYXJlbnQpXG4gICAgICBpZiAocGFyZW50ICYmICd1cGRhdGVSb2xsJyBpbiBwYXJlbnQpIHtcbiAgICAgICAgYXdhaXQgcGFyZW50LnVwZGF0ZVJvbGwodGhpcy5KU09OUm9sbFN0cmluZylcbiAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgUm9sbCAke3RoaXMudXVpZH0gZGVwZW5kcyBvZiAke3RoaXMucGFyZW50fWApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2hvd0RpY2VSb2xsICgpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3QgZGljZVJlc3VsdHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBkaWVSZXN1bHQgb2YgdGhpcy5kaWNlcy50ZW5zKSB7XG4gICAgICAgIGRpY2VSZXN1bHRzLnB1c2goZGllUmVzdWx0LnZhbHVlID09PSAxMDAgPyAwIDogZGllUmVzdWx0LnZhbHVlIC8gMTApXG4gICAgICB9XG4gICAgICBkaWNlUmVzdWx0cy5wdXNoKHRoaXMuZGljZXMudW5pdC52YWx1ZSlcblxuICAgICAgY29uc3QgZGljZURhdGEgPSB7XG4gICAgICAgIGZvcm11bGE6IGAke3RoaXMuZGljZXMudGVucy5sZW5ndGh9ZDEwMCsxZDEwYCxcbiAgICAgICAgcmVzdWx0czogZGljZVJlc3VsdHMsXG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgZ2FtZS5kaWNlM2Quc2hvdyhkaWNlRGF0YSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGxldCBjc3NDbGFzcyA9ICcnXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdzdWNjZXNzJ1xuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnZmFpbHVyZSdcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnc3VjY2VzcyBjcml0aWNhbCdcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ2ZhaWx1cmUgZnVtYmxlJ1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIHJlZ3VsYXItc3VjY2VzcydcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgaGFyZC1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBleHRyZW1lLXN1Y2Nlc3MnXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NMaXN0ICgpIHtcbiAgICBjb25zdCBjc3NDbGFzcyA9IFtdXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJylcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnKVxuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJywgJ2NyaXRpY2FsJylcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnLCAnZnVtYmxlJylcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgncmVndWxhci1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2hhcmQtc3VjY2VzcycpXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdleHRyZW1lLXN1Y2Nlc3MnKVxuICAgIH1cblxuICAgIHJldHVybiBjc3NDbGFzc1xuICB9XG5cbiAgZ2V0IHBsYXllckNzc0NsYXNzICgpIHtcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MgfHwgdGhpcy5mb3JjZWRTdWNjZXNzKSByZXR1cm4gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlIHx8IHRoaXMuZm9yY2VkRmFpbHVyZSkgcmV0dXJuICdmYWlsdXJlJ1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyB1cGdyYWRlQ2hlY2sgKHVwZ3JhZGVpbmRleCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGluY3JlYXNlZFN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzc1t1cGdyYWRlaW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpIHx8XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tUb1NwZW5kKSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgPyAwXG4gICAgICA6IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLm5ld1N1Y2Nlc3NMZXZlbCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MuZGlmZmljdWx0eSkgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBpZiAodGhpcy5kaWZmaWN1bHR5IDw9IG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB1cGdyYWRlaW5kZXggKyAxOyBpbmRleCsrKSB7XG4gICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5zaGlmdCgpXG4gICAgfVxuICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xuICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgfVxuICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICBpZiAodXBkYXRlKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICByZW1vdmVVcGdyYWRlcyAoKSB7XG4gICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICB0aGlzLmx1Y2tOZWVkZWQgPSAwXG4gICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gbnVsbFxuICAgIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICB9XG5cbiAgZm9yY2VQYXNzIChsdWNrQW1vdW50ID0gbnVsbCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGlmIChsdWNrQW1vdW50KSB7XG4gICAgICB0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KVxuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSB0aGlzLmRpZmZpY3VsdHlcbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xuICAgICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcbiAgICAgIH1cbiAgICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICAgID8gMFxuICAgICAgICA6IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JjZWQgPSB0cnVlXG4gICAgICB0aGlzLmZvcmNlZFN1Y2Nlc3MgPSB0cnVlXG4gICAgICBpZiAodGhpcy5pc1Vua25vd24pIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIsIHVwZGF0ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwodGhpcy5kaWZmaWN1bHR5LCB1cGRhdGUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yY2VGYWlsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgdGhpcy5mb3JjZWQgPSB0cnVlXG4gICAgdGhpcy5mb3JjZWRGYWlsdXJlID0gdHJ1ZVxuICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUsIHVwZGF0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHkgLSAxLCB1cGRhdGUpXG4gICAgfVxuICB9XG5cbiAgX2ZvcmNlQ2hlY2sgKGhpZ2gsIGxvdywgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCB0b3RhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChoaWdoIC0gbG93KSkgKyBsb3cgKyAxXG4gICAgY29uc3QgdW5pdFRvdGFsID0gdG90YWwgJSAxMFxuICAgIGxldCB0ZW5Ub3RhbCA9IE1hdGguZmxvb3IodG90YWwgLyAxMClcbiAgICBjb25zdCB0ZW5zID0gW11cblxuICAgIGxldCBoYXNFbm91Z2ggPSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcikgPT09IHRlbnMubGVuZ3RoXG4gICAgd2hpbGUgKCFoYXNFbm91Z2gpIHtcbiAgICAgIGxldCB0ZW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgIGxldCByb2xsID0gdGVuICogMTAgKyB1bml0VG90YWxcbiAgICAgIGlmIChyb2xsID09PSAwKSB7XG4gICAgICAgIHJvbGwgPSAxMDBcbiAgICAgICAgdGVuID0gMTAwXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNQZW5hbHR5ICYmIHJvbGwgPD0gaGlnaCkge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA+IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0JvbnVzICYmIHJvbGwgPiBsb3cpIHtcbiAgICAgICAgdGVucy5wdXNoKHRlbilcbiAgICAgICAgaWYgKHJvbGwgPCB0b3RhbCkgdG90YWwgPSByb2xsXG4gICAgICB9XG4gICAgICBoYXNFbm91Z2ggPSB0ZW5zLmxlbmd0aCA9PT0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpXG4gICAgfVxuXG4gICAgLy8gSW5zZXJ0IHJlc3VsdCBhdCByYW5kb20gcG9zaXRpb24uXG4gICAgaWYgKHRlblRvdGFsID09PSAxMCAmJiB1bml0VG90YWwgPT09IDApIHtcbiAgICAgIHRlblRvdGFsID0gMTAwXG4gICAgfVxuICAgIHRlbnMuc3BsaWNlKFxuICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGVucy5sZW5ndGggKyAxKSxcbiAgICAgIDAsXG4gICAgICB0ZW5Ub3RhbCA9PT0gMTAgPyAwIDogdGVuVG90YWxcbiAgICApXG5cbiAgICB0aGlzLmRpY2VzLnRlbnMgPSBbXVxuICAgIHRoaXMuZGljZXMudW5pdC52YWx1ZSA9IHVuaXRUb3RhbFxuICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPSB0b3RhbFxuICAgIHRoaXMuZGljZXMudG90YWwgPSB0b3RhbFxuICAgIHRoaXMuZGljZXMudGVuUmVzdWx0ID0gdG90YWwgLSB1bml0VG90YWxcblxuICAgIGNvbnN0IG1heCA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwMCA6IDkwXG4gICAgY29uc3QgbWluID0gdW5pdFRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdG90YWwgLSB1bml0VG90YWxcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRlbnNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZm9yY2VTdWNjZXNzTGV2ZWwgKHN1Y2Nlc3NMZXZlbCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XG4gICAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIH0gZWxzZSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxXG4gICAgICBsb3cgPSAwXG4gICAgfVxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgaW5jcmVhc2VTdWNjZXNzTGV2ZWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XG4gICAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgZGVjcmVhc2VTdWNjZXNzTGV2ZWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgYXN5bmMgZmxhZ0ZvckRldmVsb3BlbWVudCAoKSB7XG4gICAgdGhpcy5mbGFnZ2VkRm9yRGV2ZWxvcG1lbnQgPSB0cnVlXG4gICAgaWYgKHRoaXMuc2tpbGwpIGF3YWl0IHRoaXMuc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBzZXQgZGlmZmljdWx0eSAoeCkge1xuICAgIHRoaXMuX2RpZmZpY3VsdHkgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLl9kaWZmaWN1bHR5XG4gIH1cblxuICBzZXQgZmxhdm9yICh4KSB7XG4gICAgdGhpcy5fZmxhdm9yID0geFxuICB9XG5cbiAgc2V0IGNvbnRleHQgKHgpIHtcbiAgICB0aGlzLl9jb250ZXh0ID0geFxuICB9XG5cbiAgZ2V0IGNvbnRleHQgKCkge1xuICAgIGlmICghdGhpcy5fY29udGV4dCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0XG4gIH1cblxuICBzZXQgcGFyZW50ICh4KSB7XG4gICAgaWYgKCF0aGlzLnV1aWQpIHRoaXMudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgdGhpcy5wYXJlbnRVdWlkID0geFxuICB9XG5cbiAgZ2V0IHBhcmVudCAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudFV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5wYXJlbnRVdWlkXG4gIH1cblxuICBnZXQgZmxhdm9yICgpIHtcbiAgICBpZiAodGhpcy5fZmxhdm9yKSByZXR1cm4gdGhpcy5fZmxhdm9yXG4gICAgbGV0IGZsYXZvciA9ICcnXG4gICAgaWYgKHRoaXMuYWN0b3I/LnN5c3RlbSkge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkl0ZW1DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBpdGVtOiB0aGlzLml0ZW0ubmFtZSxcbiAgICAgICAgICBza2lsbDogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmxhdm9yKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSYXdWYWx1ZScsIHtcbiAgICAgICAgICAgIHJhd3ZhbHVlOiB0aGlzLnJhd1ZhbHVlLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnB1c2hpbmcpIHtcbiAgICAgIGZsYXZvciA9IGAke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUHVzaGluZycpfSAke2ZsYXZvcn1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGZsYXZvclxuICB9XG5cbiAgZ2V0IHRvb2x0aXBIZWFkZXIgKCkge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgK1xuICAgICAgICBgICgke3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuc2tpbGwudmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5yYXdWYWx1ZVN0cmluZ30lKWBcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsRWxlbWVudCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIGVsc2UgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAoaHRtbCkgcmV0dXJuICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5vcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIHJldHVybiBodG1sIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChwdXNoaW5nID0gZmFsc2UpIHtcbiAgICAvLyBJZiBjYXJkIGlzIHByb3ZpZGVkIGF0dHRhY2hlZCB0aGUgcm9sbCB0byB0aGUgY2FyZC4gSWYgVVJJRCBwcm92aWRlZCBhdHRhY2ggYXQgdGhpcyBwb3NpdGlvbi4/XG4gICAgdGhpcy5wdXNoaW5nID0gcHVzaGluZ1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IuaXNEdW1teSkge1xuICAgICAgICBpZiAodGhpcy5hY3Rvci5uYW1lKSBzcGVha2VyID0geyBhbGlhczogdGhpcy5hY3Rvci5uYW1lIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgfVxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvcj8udXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIHR5cGU6IENvQzdDaGVjay5jYXJkVHlwZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXVpZCkgY2hhdERhdGEuZmxhZ3MuQ29DNy51dWlkID0gdGhpcy51dWlkXG4gICAgaWYgKHRoaXMuY29udGV4dCkgY2hhdERhdGEuZmxhZ3MuQ29DNy5jb250ZXh0ID0gdGhpcy5jb250ZXh0XG5cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNoYXREYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgY2hhdERhdGEuZmxhdm9yID0gYFske3RoaXMuYWN0b3IubmFtZX1dICR7Y2hhdERhdGEuZmxhdm9yfWBcbiAgICAgICAgY2hhdERhdGEuZmxhZ3MgPSB7XG4gICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgR01TZWxmUm9sbDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGNoYXREYXRhLnNwZWFrZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY2hhdERhdGEuZmxhZ3MuQ29DNy5vcmlnaW5hbFNwZWFrZXIgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjaGF0RGF0YS5zcGVha2VyKVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNhc2UgJ293bmVycyc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSB0aGlzLmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSAnZXZlcnlvbmUnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gZ2FtZS51c2Vycy5wbGF5ZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoIGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKTtcbiAgICBpZiAodGhpcy5kaWNlPy5yb2xsICYmICF0aGlzLmRpY2U/LmhpZGVEaWNlKSB7XG4gICAgICAvLyBGb3VuZHJ5VlRUIHYxMVxuICAgICAgaWYgKGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTEnKSkge1xuICAgICAgICBjaGF0RGF0YS5yb2xscyA9IFt0aGlzLmRpY2Uucm9sbF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXREYXRhLnJvbGwgPSB0aGlzLmRpY2Uucm9sbFxuICAgICAgfVxuICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMXG4gICAgICBjaGF0RGF0YS5yb2xsTW9kZSA9IHRoaXMuaXNCbGluZCA/ICdibGluZHJvbGwnIDogdGhpcy5yb2xsTW9kZVxuICAgIH1cblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBtYWtlUHVibGljICBXaWxsIGNoYW5nZSB0aGUgcm9sbCBtb2RlIHRvIHB1YmxpY1xuICAgKi9cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgbWFrZVB1YmxpYyA9IGZhbHNlLCBmb3JjZVJvbGwgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAobWFrZVB1YmxpYykgdGhpcy5yb2xsTW9kZSA9IGZhbHNlIC8vIHJlc2V0IHJvbGwgbW9kZVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7IGZsYXZvcjogdGhpcy5mbGF2b3IgfVxuXG4gICAgaWYgKG1ha2VQdWJsaWMpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBbXVxuICAgICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSlcbiAgICB9IC8vIGVsc2Uge1xuICAgIC8vIGNoYXREYXRhLndoaXNwZXIgPSBbXVxuICAgIC8vIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICAvLyBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgIC8vIH1cblxuICAgIGlmIChjaGF0RGF0YS5ibGluZCkge1xuICAgICAgdGhpcy5pc0JsaW5kID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBsZXQgbmV3Q29udGVudCA9IGh0bWxcblxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXSAvLyBJZiBubyBtZXNzYWdlSWQgcmV0dXJuIHRoZSBIVE1MRWxlbWVudCBjb250YWluaW5nIHRoZSByb2xsLlxuICAgIC8vIElmIG5vIG1lc3NhZ2VJZFxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGNvbnN0IGh0bWxNZXNzYWdlID0gJC5wYXJzZUhUTUwobWVzc2FnZS5jb250ZW50KVswXVxuICAgIGlmICghaHRtbE1lc3NhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpKSB7XG4gICAgICBjb25zdCBodG1sQ2hlY2sgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgICAgY29uc3Qgcm9sbFJlc3VsdEVsZW1lbnQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgaWYgKHJvbGxSZXN1bHRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJvbGxSZXN1bHRFbGVtZW50LnJlcGxhY2VXaXRoKGh0bWxDaGVjaylcbiAgICAgIH1cbiAgICAgIG5ld0NvbnRlbnQgPSBodG1sTWVzc2FnZS5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBjaGF0RGF0YS5jb250ZW50ID0gbmV3Q29udGVudFxuXG4gICAgaWYgKENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMID09PSBtZXNzYWdlLnR5cGUpIHtcbiAgICAgIGlmIChtZXNzYWdlLndoaXNwZXI/Lmxlbmd0aCkge1xuICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgIH0gZWxzZSBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSXG4gICAgfVxuXG4gICAgaWYgKGZvcmNlUm9sbCAmJiB0aGlzLmRpY2U/LnJvbGwgJiYgKGdhbWUudXNlci5pc0dNIHx8ICF0aGlzLmlzQmxpbmQpKSB7XG4gICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRpY2Uucm9sbClcbiAgICB9XG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZShjaGF0RGF0YSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eVJlZ3VsYXIgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUNyaXRpY2FsID0gZmFsc2VcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlSZWd1bGFyJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5SGFyZCcpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUV4dHJlbWUnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlFeHRyZW1lID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlDcml0aWNhbCcpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUNyaXRpY2FsID0gdHJ1ZVxuICAgIH1cbiAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGdldCB0b29sdGlwICgpIHtcbiAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL3JvbGwtdG9vbHRpcC5odG1sJyxcbiAgICAgIHRoaXNcbiAgICApXG4gIH1cblxuICBnZXQgaW5saW5lQ2hlY2sgKCkge1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctaW5saW5lLWNoZWNrJylcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctY2hlY2stcmVzdWx0JylcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctaW5saW5lJylcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc0xpc3QpXG4gICAgYS50aXRsZSA9IHRoaXMudG9vbHRpcEhlYWRlclxuICAgIGEuZGF0YXNldC5yb2xsID0gZXNjYXBlKHRoaXMuSlNPTlJvbGxTdHJpbmcpIC8vIFRPRE8hSU1QT1JUQU5UISEhXG4gICAgYS5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT4gJHtcbiAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgJz8/J1xuICAgIH1gXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGdldCByb2xsVG9vbFRpcCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IHBhcnRzID0gW11cbiAgICBjb25zdCB0ZW5zID0gdGhpcy5kaWNlcy50ZW5zLm1hcChyID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdDogci52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHIuc2VsZWN0ZWQsXG4gICAgICAgIGNsYXNzZXM6IFtcbiAgICAgICAgICAnZGllJyxcbiAgICAgICAgICAnZDEwJyxcbiAgICAgICAgICAhci5zZWxlY3RlZCA/ICdkaXNjYXJkZWQnIDogbnVsbCxcbiAgICAgICAgICByLmlzTWluID8gJ21pbicgOiBudWxsLFxuICAgICAgICAgIHIuaXNNYXggPyAnbWF4JyA6IG51bGxcbiAgICAgICAgXVxuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjKVxuICAgICAgICAgIC5qb2luKCcgJylcbiAgICAgIH1cbiAgICB9KVxuICAgIGNvbnN0IHVuaXQgPSBbXG4gICAgICB7XG4gICAgICAgIHJlc3VsdDogdGhpcy5kaWNlcy51bml0LnZhbHVlLFxuICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgY2xhc3NlczogJ2RpZSBkMTAnXG4gICAgICB9XG4gICAgXVxuXG4gICAgcGFydHMucHVzaCh7XG4gICAgICBmb3JtdWxhOiB0aGlzLnRvb2x0aXBIZWFkZXIsXG4gICAgICB0b3RhbDogdGhpcy5tb2RpZmllZFJlc3VsdCxcbiAgICAgIGljb25zOiB0aGlzLnN1Y2Nlc3NMZXZlbEljb25zLFxuICAgICAgY2xhc3M6IHRoaXMuY3NzQ2xhc3MsXG4gICAgICBzdWNjZXNzUmVxdWlyZWQ6IHRoaXMuc3VjY2Vzc1JlcXVpcmVkLFxuICAgICAgcmVzdWx0VHlwZTogdGhpcy5yZXN1bHRUeXBlLFxuICAgICAgZmFjZTogMTAsXG4gICAgICByb2xsczogWy4uLnRlbnMsIC4uLnVuaXRdXG4gICAgfSlcbiAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL3JvbGwtdG9vbHRpcC5odG1sJyxcbiAgICAgIHsgcGFydHMgfVxuICAgIClcbiAgfVxuXG4gIGdldCBKU09OUm9sbERhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuSlNPTlJvbGxTdHJpbmcpXG4gIH1cblxuICBnZXQgSlNPTlJvbGxTdHJpbmcgKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBjb25zdCBleGNsdWRlID0gWydfYWN0b3InLCAnX3NraWxsJywgJ19pdGVtJ11cbiAgICAgIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGRhdGEpXG4gIH1cblxuICBzdGF0aWMgZnJvbVJvbGxTdHJpbmcgKGRhdGFTdHJpbmcpIHtcbiAgICBsZXQgZGF0YVxuICAgIHRyeSB7XG4gICAgICBkYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShkYXRhU3RyaW5nKSlcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmZyb21EYXRhKGRhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYWx0ZXIgKGNoZWNrLCBjb21tYW5kLCBvcHRpb25zID0ge30pIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgIGNhc2UgJ3VzZUx1Y2snOiB7XG4gICAgICAgIGlmIChvcHRpb25zLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgICAgY2hlY2suZm9yY2VQYXNzKGx1Y2tBbW91bnQsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMudGFyZ2V0LmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgYXdhaXQgY2hlY2sudXBncmFkZUNoZWNrKHVwZ3JhZGVJbmRleCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKG51bGwsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1mYWlsJzoge1xuICAgICAgICBjaGVjay5mb3JjZUZhaWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNoZWNrLmluY3JlYXNlU3VjY2Vzc0xldmVsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNoZWNrJzoge1xuICAgICAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY2hlY2sucm9sbE1vZGUgPSBmYWxzZVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZmxhZy1mb3ItZGV2ZWxvcG1lbnQnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncHVzaCc6IHtcbiAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxuICAgICAgICBjaGVjay5wdXNoaW5nID0gdHJ1ZVxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2tJbmxpbmVSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWNoZWNrLXJlc3VsdCcpKSB7XG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfY29sbGFwc2VJbmxpbmVSZXN1bHQgKGEpIHtcbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWlubGluZS1jaGVjaycpKSByZXR1cm5cbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSByZXR1cm5cbiAgICBjb25zdCB0b29sdGlwID0gYS5xdWVyeVNlbGVjdG9yKCcuY29jNy1jaGVjay10b29sdGlwJylcbiAgICBpZiAodG9vbHRpcCkgdG9vbHRpcC5yZW1vdmUoKVxuICAgIHJldHVybiBhLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfZXhwYW5kSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSByZXR1cm5cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0b29sdGlwXG4gICAgY29uc3QgY2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgSlNPTi5wYXJzZSh1bmVzY2FwZShhLmRhdGFzZXQucm9sbCkpXG4gICAgKSAvLyBUT0RPIDogZmluZCBzdHJpbmdpZnkgdW5lc2NhcGUgISEgMjAyMTAyMDVcbiAgICBpZiAoY2hlY2suc3RhbmRieSkgcmV0dXJuXG5cbiAgICBjb25zdCB0aXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRpcC5pbm5lckhUTUwgPSBhd2FpdCBjaGVjay5yb2xsVG9vbFRpcFxuXG4gICAgLy8gQWRkIHRoZSB0b29sdGlwXG4gICAgY29uc3QgdG9vbHRpcCA9IHRpcC5jaGlsZHJlblswXVxuICAgIGEuYXBwZW5kQ2hpbGQodG9vbHRpcClcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJylcblxuICAgIC8vIFNldCB0aGUgcG9zaXRpb25cbiAgICBjb25zdCBwYSA9IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBwdCA9IHRvb2x0aXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB0b29sdGlwLnN0eWxlLmxlZnQgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLngsXG4gICAgICB3aW5kb3cuaW5uZXJXaWR0aCAtIChwdC53aWR0aCArIDMpXG4gICAgKX1weGBcbiAgICB0b29sdGlwLnN0eWxlLnRvcCA9IGAke01hdGgubWluKFxuICAgICAgcGEueSArIHBhLmhlaWdodCArIDMsXG4gICAgICB3aW5kb3cuaW5uZXJIZWlnaHQgLSAocHQuaGVpZ2h0ICsgMylcbiAgICApfXB4YFxuICAgIGNvbnN0IHppID0gZ2V0Q29tcHV0ZWRTdHlsZShhKS56SW5kZXhcbiAgICB0b29sdGlwLnN0eWxlLnpJbmRleCA9IE51bWJlci5pc051bWVyaWMoemkpID8gemkgKyAxIDogMTAwXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBEaWFsb2csIERpZSwgRm9sZGVyLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZnJvbVV1aWRTeW5jLCBnYW1lLCBnZXREb2N1bWVudENsYXNzLCBIb29rcywgTWFjcm8sIE51bWVyaWNUZXJtLCBSb2xsLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdVdGlsaXRpZXMge1xuICAvLyBzdGF0aWMgdGVzdChldmVudCl7XG4gIC8vICAgaWYoIGV2ZW50LnNoaWZ0S2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gU0hJRlQgdXRpbGl0aWVzJyk7XG4gIC8vICAgZWxzZSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gdXRpbGl0aWVzJyk7XG4gIC8vICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKTtcbiAgLy8gICBsZXQgYWN0b3I7XG4gIC8vICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dO1xuICAvLyAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpO1xuXG4gIC8vICBhY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGlzRm9ybXVsYSAoeCkge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHgpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUoeClcbiAgfVxuXG4gIHN0YXRpYyBQYXJzZUNoYXRFbnRyeSAoaHRtbCwgY29udGVudCkge1xuICAgIGNvbnN0IHJlZ1ggPSAvKFxcUyspL2dcbiAgICBjb25zdCB0ZXJtcyA9IGNvbnRlbnQubWF0Y2gocmVnWClcbiAgICBpZiAoXG4gICAgICB0ZXJtc1swXT8udG9Mb3dlckNhc2UoKS5tYXRjaCgvXlxcL3Iob2xsKT8kLykgJiZcbiAgICAgIHRlcm1zWzFdPy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJzFkJScpXG4gICAgKSB7XG4gICAgICAvLyBEZWxheSBjYWxsaW5nIGZ1bmN0aW9uIHRvIHByZXZlbnQgY2hhdG1lc3NhZ2Uga2V5IGRvd24gdHJpZ2dlcmluZyBkZWZhdWx0XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ29DN1V0aWxpdGllcy5fRXhlY0NvbW1hbmQoY29udGVudClcbiAgICAgIH0sIDIwMClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfRXhlY0NvbW1hbmQgKGNvbnRlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gY29udGVudFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5zcGxpdCgnICcpXG4gICAgICA/LmpvaW4oJycpXG4gICAgICA/LnJlcGxhY2UoL1xcL3Iob2xsKT8xZCUvLCAnJylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgbGV0IGVzY2FwZWQgPSBvcHRpb25zXG4gICAgICBsZXQgdGhyZXNob2xkXG4gICAgICBsZXQgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgbGV0IGRpY2VNb2RpZmllciA9IDBcbiAgICAgIGxldCBhc2sgPSBmYWxzZVxuICAgICAgbGV0IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGxldCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNvbnN0IHRocmVzaG9sZFN0ciA9IGVzY2FwZWQubWF0Y2goL1teKF0rKD89XFwpKS8pXG4gICAgICBpZiAodGhyZXNob2xkU3RyICYmIHRocmVzaG9sZFN0ci5sZW5ndGgpIHtcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHRocmVzaG9sZFN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiB0aHJlc2hvbGRTdHIpIHtcbiAgICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKGAoJHttYXRjaH0pYCwgJycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpZmZpY3VsdHlTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXltdKyg/PVxcXSkvKVxuICAgICAgaWYgKGRpZmZpY3VsdHlTdHIgJiYgZGlmZmljdWx0eVN0ci5sZW5ndGgpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkoZGlmZmljdWx0eVN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBkaWZmaWN1bHR5U3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgWyR7bWF0Y2h9XWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZXNjYXBlZC5pbmNsdWRlcygnPycpKSB7XG4gICAgICAgIGFzayA9IHRydWVcbiAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZSgnPycsICcnKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIoZXNjYXBlZCkpKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIoZXNjYXBlZClcblxuICAgICAgaWYgKGFzaykge1xuICAgICAgICBjb25zdCBkaWFsb2dPcHRpb25zID0ge1xuICAgICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgICBtb2RpZmllcjogZGljZU1vZGlmaWVyLFxuICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgYXNrVmFsdWU6IHRydWVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKGRpYWxvZ09wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpIHx8IHRocmVzaG9sZFxuICAgICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGlmICh0aHJlc2hvbGQpIGNoZWNrLnJhd1ZhbHVlID0gIWlzTmFOKHRocmVzaG9sZCkgPyB0aHJlc2hvbGQgOiB1bmRlZmluZWRcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChzcGVha2VyLnRva2VuICYmIHNwZWFrZXIuc2NlbmUpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgICAgIGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICApIC8vIFJFRkFDVE9SSU5HICgyKSArKysgd2h5IHNwZWFrZXIuc2NlbmUuXG4gICAgICBpZiAoYWN0b3IpIGNoZWNrLmFjdG9yID0gYWN0b3JcbiAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICBpZiAoYWN0b3IpIGNoZWNrLmFjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0ZXN0ICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm9zKCdEbyBzb21lIHN0dWZmJylcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21TdHJpbmcgKGFjdG9yU3RyaW5nKSB7XG4gICAgbGV0IGFjdG9yXG5cbiAgICAvLyBUb2tlbiBpcyBiZXR0ZXIgdGhhbiBhY3Rvci5cbiAgICAvLyBDYXNlIDEgOiB0cnlpbmcgd2l0aCBJRC5cbiAgICAvLyBDYXNlIDEuMSA6IHRva2VuIGZvdW5kLlxuICAgIGlmIChnYW1lLmFjdG9ycy50b2tlbnNbYWN0b3JTdHJpbmddKSByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXVxuICAgIC8vIENhc2UgMS4yIDogYWN0b3IgZm91bmQuXG4gICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoYWN0b3JTdHJpbmcpXG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIENhc2UgMiA6IHRyeWluZyB3aXRoIG5hbWVcbiAgICAvLyBDYXNlIDIuMSA6IHRva2VuIGZvdW5kLlxuICAgIGFjdG9yID0gT2JqZWN0LnZhbHVlcyhnYW1lLmFjdG9ycy50b2tlbnMpLmZpbmQodCA9PiB7XG4gICAgICBpZiAodC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIC8vIENhc2UgMi4yIDogYWN0b3IgZm91bmQuXG4gICAgICBhY3RvciA9IGdhbWUuYWN0b3JzLmZpbmQoYSA9PiB7XG4gICAgICAgIGlmIChhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYWN0b3JTdHJpbmcudG9Mb3dlckNhc2UoKSkgcmV0dXJuIHRydWVcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoYWN0b3IpIHJldHVybiBhY3RvclxuXG4gICAgLy8gLy8gQ2FzZSAzIHN0cmluZyBtYXliZSBhbiBhY3RvcktleVxuICAgIC8vIGlmIChjcmVhdHVyZS5pbmNsdWRlcygnLicpKSB7XG4gICAgLy8gICBjb25zdCBbLCBhY3RvcklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgLy8gICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21TdHJpbmcoYWN0b3JJZClcbiAgICAvLyB9XG5cbiAgICAvLyBObyBqb3lcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljTmFtZXMgKGNoYXIpIHtcbiAgICBjb25zdCBjaGFyS2V5ID0gY2hhci50b0xvd2VyQ2FzZSgpXG5cbiAgICBzd2l0Y2ggKGNoYXJLZXkpIHtcbiAgICAgIGNhc2UgJ3N0cic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNUUicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TdHJlbmd0aCcpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2Nvbic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNPTicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICBjYXNlICdzaXonOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TSVonKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU2l6ZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2RleCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkRFWCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5EZXh0ZXJpdHknKVxuICAgICAgICB9XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5BUFAnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQXBwZWFyYW5jZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLklOVCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdwb3cnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5QT1cnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB9XG4gICAgICBjYXNlICdlZHUnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FRFUnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnbHVjayc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY0xpc3QgPSAoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/IGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLnRlbXBsYXRlcy5jaGFyYWN0ZXJpc3RpY3MuY2hhcmFjdGVyaXN0aWNzIDogZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IuY2hhcmFjdGVyLmNoYXJhY3RlcmlzdGljcylcbiAgICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY2hhcmFjdGVyaXN0aWNMaXN0KSkge1xuICAgICAgICAgIGlmIChjaGFyS2V5ID09PSBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIGlmIChTdHJpbmcoZGlmZmljdWx0eSkgPT09ICcwJykgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGlmZmljdWx0eSkpKSByZXR1cm4gTnVtYmVyKGRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBza2lsbENoZWNrTWFjcm8gKHNraWxsLCBldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKSAvLyBObyBuZWVkIHRvIGZpbGwgYWN0b3IgdG9rZW5cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLnNraWxsQ2hlY2soc2tpbGwsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIHdlYXBvbkNoZWNrTWFjcm8gKHdlYXBvbiwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIGlmIChzcGVha2VyLnNjZW5lICYmIHNwZWFrZXIudG9rZW4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXG4gICAgICAgIGNvbnN0IGJhc2VBY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzcGVha2VyLnNjZW5lKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcblxuICAgICAgICBjb25zdCBBY3RvckNsYXNzID0gZ2V0RG9jdW1lbnRDbGFzcygnQWN0b3InKVxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XG4gICAgICAgICAgcGFyZW50OiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcbiAgICAgIH0gZWxzZSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgIH1cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcbiAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50LCB7IHRocmVzaG9sZCB9KVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1hY3JvIChiYXIsIGRhdGEsIHNsb3QpIHtcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnSXRlbScpIHJldHVyblxuXG4gICAgY29uc3QgaXRlbSA9IGZyb21VdWlkU3luYyhkYXRhLnV1aWQsIGJhcilcblxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCEoaXRlbS50eXBlID09PSAnd2VhcG9uJykgJiYgIShpdGVtLnR5cGUgPT09ICdza2lsbCcpKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvSW5jb3JyZWN0VHlwZScpXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGNvbW1hbmQgPSAnJ1xuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy53ZWFwb25DaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgdXVpZDonJHtkYXRhLnV1aWR9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9HbG9iYWxTcGVjJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29tbWFuZCA9IGBnYW1lLkNvQzcubWFjcm9zLnNraWxsQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIHV1aWQ6JyR7ZGF0YS51dWlkfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIGlmIChjb21tYW5kICE9PSAnJykge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBtYWNybyBjb21tYW5kXG4gICAgICBjb25zdCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXG4gICAgICAgIG0gPT4gbS5uYW1lID09PSBpdGVtLm5hbWUgJiYgbS5jb21tYW5kID09PSBjb21tYW5kXG4gICAgICApXG4gICAgICBpZiAoIW1hY3JvKSB7XG4gICAgICAgIE1hY3JvLmNyZWF0ZShmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh7XG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgIGltZzogaXRlbS5pbWcsXG4gICAgICAgICAgY29tbWFuZFxuICAgICAgICB9KSkudGhlbihtYWNybyA9PiB7XG4gICAgICAgICAgZ2FtZS51c2VyLmFzc2lnbkhvdGJhck1hY3JvKG1hY3JvLCBzbG90KVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZURldlBoYXNlICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVDaGFyQ3JlYXRpb24gKHRvZ2dsZSkge1xuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpXG4gICAgKVxuICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgdHlwZTogJ3VwZGF0ZUNoYXInXG4gICAgfSlcbiAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICAgIEhvb2tzLmNhbGwoJ3RvZ2dsZUNoYXJDcmVhdGlvbicsIHRvZ2dsZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRUYXJnZXQgKCkge1xuICAgIGNvbnN0IHVzZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLmFjdGl2ZSlcbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9yc1xuICAgIGxldCBjaGVja09wdGlvbnMgPSBgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJDT0NDaGVja0FsbFBDXCIgaWQ9XCJDT0NDaGVja0FsbFBDXCI+XFxuXG4gICAgPGxhYmVsIGZvcj1cIkNPQ0NoZWNrQWxsUENcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5hbGxBY3RvcnMnKX08L2xhYmVsPmBcbiAgICBjb25zdCBwbGF5ZXJUb2tlbklkcyA9IHVzZXJzXG4gICAgICAubWFwKHUgPT4gdS5jaGFyYWN0ZXI/LmlkKVxuICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gdW5kZWZpbmVkKVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVySWRzID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0b2tlbiA9PiB7XG4gICAgICByZXR1cm4gdG9rZW4uYWN0b3IuaWRcbiAgICB9KVxuXG4gICAgLy8gQnVpbGQgY2hlY2tib3ggbGlzdCBmb3IgYWxsIGFjdGl2ZSBwbGF5ZXJzXG4gICAgYWN0b3JzLmZvckVhY2goYWN0b3IgPT4ge1xuICAgICAgY29uc3QgY2hlY2tlZCA9XG4gICAgICAgIChzZWxlY3RlZFBsYXllcklkcy5pbmNsdWRlcyhhY3Rvci5pZCkgfHxcbiAgICAgICAgICBwbGF5ZXJUb2tlbklkcy5pbmNsdWRlcyhhY3Rvci5pZCkpICYmXG4gICAgICAgICdjaGVja2VkJ1xuICAgICAgY2hlY2tPcHRpb25zICs9IGBcbiAgICAgPGJyPlxuICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIiR7YWN0b3IuaWR9XCIgaWQ9XCIke2FjdG9yLmlkfVwiIHZhbHVlPVwiJHthY3Rvci5uYW1lfVwiICR7Y2hlY2tlZH0+XFxuXG4gICAgIDxsYWJlbCBmb3I9XCIke2FjdG9yLmlkfVwiPiR7YWN0b3IubmFtZX08L2xhYmVsPlxuICAgICAgIGBcbiAgICB9KVxuXG4gICAgbmV3IERpYWxvZyh7XG4gICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9YCxcbiAgICAgIGNvbnRlbnQ6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcucmVzdFRhcmdldHMnXG4gICAgICApfTogJHtjaGVja09wdGlvbnN9IDxicj5gLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICB3aGlzcGVyOiB7XG4gICAgICAgICAgbGFiZWw6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5zdGFydFJlc3QnKX1gLFxuICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyBodG1sID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgICAgICAgICAgbGV0IGFsbCA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IGh0bWwuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdXNlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKHVzZXIubmFtZSA9PT0gJ0NPQ0NoZWNrQWxsUEMnICYmIHVzZXIuY2hlY2tlZCkgYWxsID0gdHJ1ZVxuICAgICAgICAgICAgICBpZiAodXNlci5jaGVja2VkIHx8IGFsbCkgdGFyZ2V0cy5wdXNoKHVzZXIuaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnN0YXJ0UmVzdCh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHN0YXJ0UmVzdCAodGFyZ2V0cykge1xuICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhY3RvciA9PiB0YXJnZXRzLmluY2x1ZGVzKGFjdG9yLmlkKSlcbiAgICBsZXQgY2hhdENvbnRlbnQgPSBgPGk+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuZHJlYW1pbmcnKX0uLi48L2k+PGJyPmBcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICAgIGxldCBxdWlja0hlYWxlciA9IGZhbHNlXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcykge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0YWxlbnQnKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucXVpY2tIZWFsZXInKX1gKSB7XG4gICAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NyaXRpY2FsV291bmRzID1cbiAgICAgICAgICAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpICYmXG4gICAgICAgICAgYWN0b3IuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICBjb25zdCBkYWlseVNhbml0eUxvc3MgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgIGNvbnN0IGhwVmFsdWUgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZVxuICAgICAgICBjb25zdCBocE1heCA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgICAgICBjb25zdCBtcFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICAgICAgY29uc3QgbXBNYXggPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXhcbiAgICAgICAgY29uc3QgcG93ID0gYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWVcbiAgICAgICAgY2hhdENvbnRlbnQgPSBjaGF0Q29udGVudCArIGA8YnI+PGI+JHthY3Rvci5uYW1lfS4gPC9iPmBcbiAgICAgICAgaWYgKGhwVmFsdWUgPCBocE1heCkge1xuICAgICAgICAgIGlmIChpc0NyaXRpY2FsV291bmRzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya3JlZFwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3Lmhhc0NyaXRpY2FsV291bmRzJ1xuICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGhlYWxBbW91bnQgPSAxXG4gICAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVGYXN0ZXJSZWNvdmVyeScpKSB7XG4gICAgICAgICAgICAgIGhlYWxBbW91bnQgPSAyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocXVpY2tIZWFsZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgaGVhbEFtb3VudCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFsQW1vdW50ID0gTWF0aC5taW4oaGVhbEFtb3VudCwgaHBNYXggLSBocFZhbHVlKVxuICAgICAgICAgICAgaWYgKGhlYWxBbW91bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuaGVhbHRoUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LnB1bHBIZWFsdGhSZWNvdmVyZWQnLFxuICAgICAgICAgICAgICAgICAgeyBudW1iZXI6IGhlYWxBbW91bnQgfVxuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSArIGhlYWxBbW91bnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYWlseVNhbml0eUxvc3MgPiAwKSB7XG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuZGFpbHlTYW5Mb3NzUmVzdGFydGVkJ1xuICAgICAgICAgICAgKX0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwLFxuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG91cnMgPSA3XG4gICAgICAgIGlmIChob3VycyA+IDAgJiYgbXBWYWx1ZSA8IG1wTWF4KSB7XG4gICAgICAgICAgbGV0IG1hZ2ljQW1vdW50ID0gaG91cnMgKiBNYXRoLmNlaWwocG93IC8gMTAwKVxuICAgICAgICAgIG1hZ2ljQW1vdW50ID0gTWF0aC5taW4obWFnaWNBbW91bnQsIG1wTWF4IC0gbXBWYWx1ZSlcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcubWFnaWNQb2ludHNSZWNvdmVyZWQnXG4gICAgICAgICAgICApfTogJHttYWdpY0Ftb3VudH0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzpcbiAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgKyBtYWdpY0Ftb3VudFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBjb250ZW50OiBjaGF0Q29udGVudCxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlWFBHYWluICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd4cEVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5EaXNhYmxlZCcpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJvbGxEaWNlIChldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5hc2tWYWx1ZSA9ICFvcHRpb25zLnRocmVzaG9sZFxuICAgIGxldCBkaWNlTW9kaWZpZXIsIGRpZmZpY3VsdHksIGZsYXREaWNlTW9kaWZpZXIsIGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIGxldCB0aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZFxuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5tb2RpZmllcikgZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFldmVudD8uc2hpZnRLZXkgJiYgIW9wdGlvbnMuZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFjdG9ycyA9IFtdXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgYWN0b3JzLnB1c2godG9rZW4uYWN0b3IudG9rZW5LZXkpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChnYW1lLnVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICBhY3RvcnMucHVzaChnYW1lLnVzZXIuY2hhcmFjdGVyLnRva2VuS2V5KVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgdGsgb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNoZWNrLmFjdG9yID0gdGtcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG5cbiAgICBpZiAoIWFjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDaGFyU2hlZXRzICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGZvciAoY29uc3QgYSBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgICBpZiAoYT8udHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgYT8uc2hlZXQgJiYgYT8uc2hlZXQ/LnJlbmRlcmVkKSB7XG4gICAgICAgICAgYS51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHRydWUgfSlcbiAgICAgICAgICBhLnJlbmRlcihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGEuaXNPd25lcikge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGZyb20gX29uRHJvcCB0byBnZXQgdGhlIGRyb3BwZWQgZW50aXR5VHlwZSBvciBlbnRpdHlUeXBlIGZyb20gYSBmb2xkZXJcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMgW2l0ZW1zXSBhcnJheSBvZiBpdGVtc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldERhdGFGcm9tRHJvcEV2ZW50IChldmVudCwgZW50aXR5VHlwZSA9ICdJdGVtJykge1xuICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50KSByZXR1cm4gW11cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAoZGF0YUxpc3QudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YUxpc3QuZG9jdW1lbnROYW1lID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IGZyb21VdWlkKGRhdGFMaXN0LnV1aWQpXG4gICAgICAgIGlmICghZm9sZGVyKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIGZvbGRlci5jb250ZW50c1xuICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC50eXBlID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChkYXRhTGlzdC51dWlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBbXVxuICAgICAgICByZXR1cm4gW2l0ZW1dXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb3B5VG9DbGlwYm9hcmQgKHRleHQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmxlZnQgPSAnLTk5OXB4J1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS50b3AgPSAnLTk5OXB4J1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKVxuICAgICAgICB0ZXh0QXJlYS5mb2N1cygpXG4gICAgICAgIHRleHRBcmVhLnNlbGVjdCgpXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKVxuICAgICAgICAgICAgPyByZXNvbHZlKClcbiAgICAgICAgICAgIDogcmVqZWN0KFxuICAgICAgICAgICAgICBuZXcgRXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXG4gICAgICAgICAgICApXG4gICAgICAgICAgdGV4dEFyZWEucmVtb3ZlKClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyKSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHF1b3RlUmVnRXhwIChzdHJpbmcpIHtcbiAgICAvLyBodHRwczovL2JpdGJ1Y2tldC5vcmcvY2dnYWVydG5lci9qcy1oYWNrcy9yYXcvbWFzdGVyL3F1b3RlLmpzXG4gICAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aFxuICAgIGxldCBxU3RyaW5nID0gJydcblxuICAgIGZvciAobGV0IGN1cnJlbnQsIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGN1cnJlbnQgPSBzdHJpbmcuY2hhckF0KGkpXG5cbiAgICAgIGlmIChjdXJyZW50ID49ICcgJyAmJiBjdXJyZW50IDw9ICd+Jykge1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gJ1xcXFwnIHx8IGN1cnJlbnQgPT09IFwiJ1wiKSB7XG4gICAgICAgICAgcVN0cmluZyArPSAnXFxcXCdcbiAgICAgICAgfVxuXG4gICAgICAgIHFTdHJpbmcgKz0gY3VycmVudC5yZXBsYWNlKC9bLVtcXF0ve30oKSorPy5cXFxcXiR8XS9nLCAnXFxcXCQmJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoY3VycmVudCkge1xuICAgICAgICAgIGNhc2UgJ1xcYic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcYidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXGYnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGYnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxuJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xccic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxccidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHQnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHQnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx2JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx2J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdSdcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gNDsgLS1qID49IGN1cnJlbnQubGVuZ3RoOyBxU3RyaW5nICs9ICcwJyk7XG4gICAgICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBxU3RyaW5nXG4gIH1cblxuICBzdGF0aWMgc2V0QnlQYXRoIChvYmosIHBhdGgsIHZhbHVlKSB7XG4gICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcbiAgICBsZXQgbyA9IG9ialxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgICAgfVxuICAgIH1cblxuICAgIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dID0gdmFsdWVcbiAgfVxuXG4gIHN0YXRpYyBnZXRCeVBhdGggKG9iaiwgcGF0aCkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgbGV0IG8gPSBvYmpcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIERvY3VtZW50IGJ5IGl0cyBVbml2ZXJzYWxseSBVbmlxdWUgSWRlbnRpZmllciAodXVpZCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1dWlkICAgVGhlIHV1aWQgb2YgdGhlIERvY3VtZW50IHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm4ge1Byb21pc2U8RG9jdW1lbnR8bnVsbD59XG4gICAqL1xuICBzdGF0aWMgU2Zyb21VdWlkICh1dWlkKSB7XG4gICAgbGV0IHBhcnRzID0gdXVpZC5zcGxpdCgnLicpXG4gICAgbGV0IGRvY1xuXG4gICAgLy8gQ29tcGVuZGl1bSBEb2N1bWVudHNcbiAgICBpZiAocGFydHNbMF0gPT09ICdDb21wZW5kaXVtJykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICAgIC8vIHJldHVybiBmcm9tVXVpZCh1dWlkKSAvLyBSZXR1cm4gUHJvbWlzZVxuICAgICAgLy8gcGFydHMuc2hpZnQoKTtcbiAgICAgIC8vIGNvbnN0IFtzY29wZSwgcGFja05hbWUsIGlkXSA9IHBhcnRzLnNsaWNlKDAsIDMpO1xuICAgICAgLy8gcGFydHMgPSBwYXJ0cy5zbGljZSgzKTtcbiAgICAgIC8vIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChgJHtzY29wZX0uJHtwYWNrTmFtZX1gKTtcbiAgICAgIC8vIHJldHVybiBhd2FpdCBwYWNrPy5nZXREb2N1bWVudChpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdvcmxkIERvY3VtZW50c1xuICAgICAgY29uc3QgW2RvY05hbWUsIGRvY0lkXSA9IHBhcnRzLnNsaWNlKDAsIDIpXG4gICAgICBwYXJ0cyA9IHBhcnRzLnNsaWNlKDIpXG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gQ09ORklHW2RvY05hbWVdLmNvbGxlY3Rpb24uaW5zdGFuY2VcbiAgICAgIGRvYyA9IGNvbGxlY3Rpb24uZ2V0KGRvY0lkKVxuICAgIH1cblxuICAgIC8vIEVtYmVkZGVkIERvY3VtZW50c1xuICAgIHdoaWxlIChkb2MgJiYgcGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgW2VtYmVkZGVkTmFtZSwgZW1iZWRkZWRJZF0gPSBwYXJ0cy5zbGljZSgwLCAyKVxuICAgICAgZG9jID0gZG9jLmdldEVtYmVkZGVkRG9jdW1lbnQoZW1iZWRkZWROYW1lLCBlbWJlZGRlZElkKVxuICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgyKVxuICAgIH1cbiAgICByZXR1cm4gZG9jIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBpc0RvY3VtZW50VXVpZFBhY2sgKHV1aWQpIHtcbiAgICBpZiAodXVpZC5pbmNsdWRlcygnQ29tcGVuZGl1bScpKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgaXNEb2N1bWVudFV1aWQgKHV1aWQpIHtcbiAgICBjb25zdCBpZGVudGlmaWVycyA9IFsnQWN0b3InLCAnU2NlbmUnLCAnVG9rZW4nLCAnSXRlbScsICdDb21wZW5kaXVtJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodXVpZC5pbmNsdWRlcyhpZGVudGlmaWVyc1tpXSkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEgKGRyb3BEYXRhKSB7XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRyb3BEYXRhLnRva2VuVXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnRva2VuVXVpZFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRyb3BEYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudXVpZFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZHJvcERhdGEuc2NlbmVJZCAmJiBkcm9wRGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkcm9wRGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2Ryb3BEYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZHJvcERhdGEuYWN0b3JJZCB8fCBkcm9wRGF0YS5hY3RvcktleSB8fCBkcm9wRGF0YS5pZFxuICAgIH1cbiAgICBpZiAoZHJvcERhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZHJvcERhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cbiAgICByZXR1cm4gZG9jVXVpZFxuICB9XG5cbiAgc3RhdGljIGdldERvY3VtZW50RnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIGlmICghdG9rZW4uc2NlbmUpIHRva2VuLnNjZW5lID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2NlbmUpXG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9XG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICBjb25zdCBkb2MgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleShrZXkpXG4gICAgaWYgKCFkb2MpIHJldHVybiBudWxsXG4gICAgaWYgKGRvYy5hY3RvcikgcmV0dXJuIGRvYy5hY3RvclxuICAgIGlmIChkb2MuY29uc3RydWN0b3I/Lm5hbWUgPT09ICdDb0NBY3RvcicpIHJldHVybiBkb2NcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmb2xkZXIgb24gdGhlIGFjdG9ycyB0YWIgY2FsbGVkIFwiSW1wb3J0ZWQgQ2hhcmFjdGVyc1wiIGlmIHRoZSBmb2xkZXIgZG9lc24ndCBleGlzdC5cbiAgICogQHJldHVybnMge0ZvbGRlcn0gdGhlIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlclxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cyAoKSB7XG4gICAgbGV0IGZvbGRlck5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJylcbiAgICBpZiAoZm9sZGVyTmFtZSA9PT0gJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJykge1xuICAgICAgZm9sZGVyTmFtZSA9ICdJbXBvcnRlZCBjaGFyYWN0ZXJzJ1xuICAgIH1cbiAgICBsZXQgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gZ2FtZS5mb2xkZXJzLmZpbmQoXG4gICAgICBlbnRyeSA9PiBlbnRyeS5uYW1lID09PSBmb2xkZXJOYW1lICYmIGVudHJ5LnR5cGUgPT09ICdBY3RvcidcbiAgICApXG4gICAgaWYgKFxuICAgICAgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID09PSBudWxsIHx8XG4gICAgICB0eXBlb2YgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBmb2xkZXJcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9IGF3YWl0IEZvbGRlci5jcmVhdGUoe1xuICAgICAgICBuYW1lOiBmb2xkZXJOYW1lLFxuICAgICAgICB0eXBlOiAnQWN0b3InLFxuICAgICAgICBwYXJlbnQ6IG51bGxcbiAgICAgIH0pXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVkSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJylcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlclxuICB9XG5cbiAgLyoqXG4gICAqIGd1ZXNzSXRlbSwgdHJ5IGFuZCBmaW5kIHRoZSBpdGVtIGluIHRoZSBsb2NhdGlvbnMgZGVmaW5lZCBpbiAke3NvdXJjZX0gaSA9IEl0ZW0gRGlyZWN0b3J5LCB3ID0gV29ybGQgQ29tcGVuZGl1bXMsIG0gPSBNb2R1bGUgQ29tcGVuZGl1bXMsIHMgPSBTeXN0ZW0gQ29tcGVuZGl1bXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgSXRlbSB0eXBlIHRvIGZpbmRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiBpdGVtIHRvIGZpbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbWJhdCBudWxsIChkZWZhdWx0KS4gSWYgYm9vbGVhbiBjb21iYXQgcHJvcGVydHkgb2Ygc2tpbGwgbXVzdCBtYXRjaFxuICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlICcnIChkZWZhdWx0KS4gQ2hlY2sgb3JkZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZhbGxiYWNrQW55IGZhbHNlIChkZWZhdWx0KS4gU2hvdWxkIGFueSBzcGVjaWFsaXphdGlvbiB0aGF0IGlzbid0IGZvdW5kIHRyeSB1c2luZyAoQW55KSBpdGVtc1xuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YSBJdGVtIG9yIG51bGxcbiAgICovXG4gIHN0YXRpYyBhc3luYyBndWVzc0l0ZW0gKFxuICAgIHR5cGUsXG4gICAgbmFtZSxcbiAgICB7IGNvbWJhdCA9IG51bGwsIHNvdXJjZSA9ICcnLCBmYWxsYmFja0FueSA9IGZhbHNlIH0gPSB7fVxuICApIHtcbiAgICBsZXQgZXhpc3RpbmcgPSBudWxsXG4gICAgbmFtZSA9IG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgIGZvciAobGV0IG8gPSAwLCBvTSA9IHNvdXJjZS5sZW5ndGg7IG8gPCBvTTsgbysrKSB7XG4gICAgICBzd2l0Y2ggKHNvdXJjZS5zdWJzdHJpbmcobywgbyArIDEpKSB7XG4gICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgIGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgaXRlbSA9PiBpdGVtLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgJiZcbiAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3JzpcbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHBhY2subWV0YWRhdGEudHlwZSA9PT0gJ0l0ZW0nICYmXG4gICAgICAgICAgICAgICgoc291cmNlW29dID09PSAndycgJiYgcGFjay5tZXRhZGF0YS5wYWNrYWdlID09PSAnd29ybGQnKSB8fFxuICAgICAgICAgICAgICAgIChzb3VyY2Vbb10gPT09ICdTJyAmJiBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgPT09ICdDb0M3JykgfHxcbiAgICAgICAgICAgICAgICAoc291cmNlW29dID09PSAncycgJiZcbiAgICAgICAgICAgICAgICAgICFbJ3dvcmxkJywgJ0NvQzcnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2UpKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50cygpXG4gICAgICAgICAgICAgIGV4aXN0aW5nID0gZG9jdW1lbnRzLmZpbmQoXG4gICAgICAgICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSB0eXBlICYmXG4gICAgICAgICAgICAgICAgICBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmYWxsYmFja0FueSAmJiB0eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IG5hbWUubWF0Y2goL14oLisgXFwoKSg/IWFueSkuKyhcXCkpJC8pXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgbWF0Y2hbMV0gKyAnYW55JyArIG1hdGNoWzJdLFxuICAgICAgICAgIHsgY29tYmF0LCBzb3VyY2UgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHRvS2ViYWJDYXNlIChzKSB7XG4gICAgaWYgKCFzKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgY29uc3QgbWF0Y2ggPSBzLm1hdGNoKC9bQS1aXXsyLH0oPz1bQS1aXVthLXpdK1swLTldKnxcXGIpfFtBLVpdP1thLXpdK1swLTldKnxbQS1aXXxbMC05XSsvZylcblxuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIHJldHVybiBtYXRjaC5qb2luKCctJykudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgc3RhdGljIHNvcnRCeU5hbWVLZXkgKGEsIGIpIHtcbiAgICByZXR1cm4gYS5uYW1lXG4gICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIC5sb2NhbGVDb21wYXJlKFxuICAgICAgICBiLm5hbWVcbiAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICB9XG5cbiAgc3RhdGljIGdldEFuSWRGb3JHbSAoKSB7XG4gICAgY29uc3Qga2VlcGVycyA9IGdhbWUudXNlcnMuZmlsdGVyKHUgPT4gdS5hY3RpdmUgJiYgdS5pc0dNICYmIHUuaWQgIT09IGdhbWUudXNlci5pZClcbiAgICBzd2l0Y2ggKGtlZXBlcnMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0NvQzcuRXJyb3JNaXNzaW5nS2VlcGVyVXNlcicsIHsgbG9jYWxpemU6IHRydWUgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBrZWVwZXJzWzBdLmlkXG4gICAgfVxuICAgIHJldHVybiBrZWVwZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGtlZXBlcnMubGVuZ3RoKV0uaWRcbiAgfVxuXG4gIHN0YXRpYyBoYWxmREIgKGRiKSB7XG4gICAgZGIgPSAoKGRiID8/ICcnKS50b1N0cmluZygpLnRyaW0oKSA9PT0gJycgPyAwIDogZGIpLnRvU3RyaW5nKCkudHJpbSgpXG4gICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGRiKVxuICAgIGZvciAoY29uc3QgdGVybSBvZiByb2xsLnRlcm1zKSB7XG4gICAgICBpZiAoZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpICYmIHRlcm0gaW5zdGFuY2VvZiBmb3VuZHJ5LmRpY2UudGVybXMuRGllKSB7XG4gICAgICAgIHRlcm0uX2ZhY2VzID0gTWF0aC5mbG9vcih0ZXJtLl9mYWNlcyAvIDIpXG4gICAgICB9IGVsc2UgaWYgKHRlcm0gaW5zdGFuY2VvZiBEaWUpIHtcbiAgICAgICAgLy8gRm91bmRyeVZUVCBWMTFcbiAgICAgICAgdGVybS5mYWNlcyA9IE1hdGguZmxvb3IodGVybS5mYWNlcyAvIDIpXG4gICAgICB9IGVsc2UgaWYgKHRlcm0gaW5zdGFuY2VvZiBOdW1lcmljVGVybSkge1xuICAgICAgICB0ZXJtLm51bWJlciA9ICh0ZXJtLm51bWJlciA8IDAgPyBNYXRoLmNlaWwodGVybS5udW1iZXIgLyAyKSA6IE1hdGguZmxvb3IodGVybS5udW1iZXIgLyAyKSlcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGZvcm11bGEgPSByb2xsLmZvcm11bGEudG9TdHJpbmcoKS50cmltKClcbiAgICBpZiAoIWZvcm11bGEuc3RhcnRzV2l0aCgnLScpKSB7XG4gICAgICBmb3JtdWxhID0gJysnICsgZm9ybXVsYVxuICAgIH1cbiAgICByZXR1cm4gZm9ybXVsYVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURFZGl0b3IgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtZWRpdG9yLmhicycsXG4gICAgICB3aWR0aDogOTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29DSURGbGFnLnRpdGxlJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnN1cHBvcnRlZExhbmd1YWdlcyA9IENPTkZJRy5zdXBwb3J0ZWRMYW5ndWFnZXNcblxuICAgIHRoaXMub3B0aW9ucy5lZGl0YWJsZSA9IHRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGVcblxuICAgIHNoZWV0RGF0YS5ndWVzc0NvZGUgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZCh0aGlzLm9iamVjdClcbiAgICBzaGVldERhdGEuaWRQcmVmaXggPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ2V0UHJlZml4KHRoaXMub2JqZWN0KVxuXG4gICAgc2hlZXREYXRhLmNvY2lkRmxhZyA9IHRoaXMub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcblxuICAgIHNoZWV0RGF0YS5pZCA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LmlkIHx8ICcnXG4gICAgc2hlZXREYXRhLmxhbmcgPSBzaGVldERhdGEuY29jaWRGbGFnPy5sYW5nIHx8IGdhbWUuaTE4bi5sYW5nXG4gICAgc2hlZXREYXRhLnByaW9yaXR5ID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ucHJpb3JpdHkgfHwgMFxuXG4gICAgc2hlZXREYXRhLmVyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6IChzaGVldERhdGEuY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGNvbnN0IENvQ0lES2V5cyA9IE9iamVjdC5hc3NpZ24oZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi5fZmFsbGJhY2suQ29DNz8uQ29DSURGbGFnPy5rZXlzID8/IHt9KSwgZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNz8uQ29DSURGbGFnPy5rZXlzID8/IHt9KSlcbiAgICBjb25zdCBwcmVmaXggPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc2hlZXREYXRhLmlkUHJlZml4KSlcbiAgICBzaGVldERhdGEuZXhpc3RpbmdLZXlzID0gT2JqZWN0LmtleXMoQ29DSURLZXlzKS5yZWR1Y2UoKG9iaiwgaykgPT4ge1xuICAgICAgaWYgKGsubWF0Y2gocHJlZml4KSkge1xuICAgICAgICBvYmoucHVzaCh7IGssIG5hbWU6IENvQ0lES2V5c1trXSB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIFtdKS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5pc1N5c3RlbUlEID0gKHR5cGVvZiBDb0NJREtleXNbc2hlZXREYXRhLmlkXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgY29uc3QgbWF0Y2ggPSBzaGVldERhdGEuaWQubWF0Y2goL14oW15cXFxcLl0rKVxcLihbXlxcXFwuXSopXFwuKC4rKS8pXG4gICAgc2hlZXREYXRhLl9leGlzdGluZyA9IChtYXRjaCAmJiB0eXBlb2YgbWF0Y2hbM10gIT09ICd1bmRlZmluZWQnID8gbWF0Y2hbM10gOiAnJylcblxuICAgIGlmIChzaGVldERhdGEuaWQgJiYgc2hlZXREYXRhLmxhbmcpIHtcbiAgICAgIC8vIEZpbmQgb3V0IGlmIHRoZXJlIGV4aXN0cyBhIGR1cGxpY2F0ZSBDb0NJRFxuICAgICAgY29uc3Qgd29ybGREb2N1bWVudHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQWxsKHtcbiAgICAgICAgY29jaWQ6IHNoZWV0RGF0YS5pZCxcbiAgICAgICAgbGFuZzogc2hlZXREYXRhLmxhbmcsXG4gICAgICAgIHNjb3BlOiAnd29ybGQnXG4gICAgICB9KVxuICAgICAgY29uc3QgdXNlZEVyYXMgPSB7fVxuICAgICAgY29uc3QgdW5pcXVlV29ybGRQcmlvcml0eSA9IHt9XG4gICAgICBzaGVldERhdGEud29ybGREb2N1bWVudEluZm8gPSBhd2FpdCBQcm9taXNlLmFsbCh3b3JsZERvY3VtZW50cy5tYXAoYXN5bmMgKGQpID0+IHtcbiAgICAgICAgaWYgKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pcXVlV29ybGRQcmlvcml0eSwgZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF0pKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dID0gMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0rK1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLyonXSA9IDFcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlcmFzID0gKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/IE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpIDogW10pXG4gICAgICAgIGZvciAoY29uc3QgZXJhIG9mIGVyYXMpIHtcbiAgICAgICAgICB1c2VkRXJhc1tlcmFdID0gQ09DNy5lcmFzW2VyYV0gPz8gJz8nXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9sZGVycyA9IFtdXG4gICAgICAgIGxldCBlID0gZD8uZm9sZGVyXG4gICAgICAgIHdoaWxlIChlPy5uYW1lKSB7XG4gICAgICAgICAgZm9sZGVycy51bnNoaWZ0KGU/Lm5hbWUpXG4gICAgICAgICAgZSA9IGUuZm9sZGVyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcmFzOiBlcmFzLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBjdXJyZW50KSB7XG4gICAgICAgICAgICBhbGxbY3VycmVudF0gPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gYWxsXG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHByaW9yaXR5OiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5LFxuICAgICAgICAgIGxhbmc6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyA/PyAnZW4nLFxuICAgICAgICAgIGxpbms6IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkLmxpbmssIHsgYXN5bmM6IHRydWUgfSksXG4gICAgICAgICAgZm9sZGVyOiBmb2xkZXJzLm1hcChuID0+IG4uaW5kZXhPZignICcpID4gLTEgPyAnXCInICsgbiArICdcIicgOiBuKS5qb2luKCcgJmd0OyAnKVxuICAgICAgICB9XG4gICAgICB9KSlcbiAgICAgIGlmIChPYmplY3QuZW50cmllcyh1bmlxdWVXb3JsZFByaW9yaXR5KS5maWx0ZXIoYyA9PiBjWzFdID4gMSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZVdvcmxkUHJpb3JpdHkgPSB0cnVlXG4gICAgICB9XG4gICAgICBzaGVldERhdGEud29ybGREdXBsaWNhdGVzID0gd29ybGREb2N1bWVudHMubGVuZ3RoID8/IDBcblxuICAgICAgY29uc3QgY29tcGVuZGl1bURvY3VtZW50cyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURBbGwoe1xuICAgICAgICBjb2NpZDogc2hlZXREYXRhLmlkLFxuICAgICAgICBsYW5nOiBzaGVldERhdGEubGFuZyxcbiAgICAgICAgc2NvcGU6ICdjb21wZW5kaXVtcydcbiAgICAgIH0pXG4gICAgICBjb25zdCB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkgPSB7fVxuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1Eb2N1bWVudEluZm8gPSBhd2FpdCBQcm9taXNlLmFsbChjb21wZW5kaXVtRG9jdW1lbnRzLm1hcChhc3luYyAoZCkgPT4ge1xuICAgICAgICBpZiAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHksIGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdKSkge1xuICAgICAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dID0gMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSsrXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8qJ10gPSAxXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXJhcyA9IChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPyBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLnNvcnQoKSA6IFtdKVxuICAgICAgICBmb3IgKGNvbnN0IGVyYSBvZiBlcmFzKSB7XG4gICAgICAgICAgdXNlZEVyYXNbZXJhXSA9IENPQzcuZXJhc1tlcmFdID8/ICc/J1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSBbXVxuICAgICAgICBsZXQgZSA9IGQ/LmZvbGRlclxuICAgICAgICB3aGlsZSAoZT8ubmFtZSkge1xuICAgICAgICAgIGZvbGRlcnMudW5zaGlmdChlPy5uYW1lKVxuICAgICAgICAgIGUgPSBlLmZvbGRlclxuICAgICAgICB9XG4gICAgICAgIGZvbGRlcnMudW5zaGlmdChkLmNvbXBlbmRpdW0ubWV0YWRhdGEubGFiZWwpXG4gICAgICAgIGUgPSBkPy5jb21wZW5kaXVtLmZvbGRlclxuICAgICAgICB3aGlsZSAoZT8ubmFtZSkge1xuICAgICAgICAgIGZvbGRlcnMudW5zaGlmdChlPy5uYW1lKVxuICAgICAgICAgIGUgPSBlLmZvbGRlclxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZXJhczogZXJhcy5yZWR1Y2UoZnVuY3Rpb24gKGFsbCwgY3VycmVudCkge1xuICAgICAgICAgICAgYWxsW2N1cnJlbnRdID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGFsbFxuICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICBwcmlvcml0eTogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSxcbiAgICAgICAgICBsYW5nOiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcgPz8gJ2VuJyxcbiAgICAgICAgICBsaW5rOiBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoZC5saW5rLCB7IGFzeW5jOiB0cnVlIH0pLFxuICAgICAgICAgIGZvbGRlcjogZm9sZGVycy5tYXAobiA9PiBuLmluZGV4T2YoJyAnKSA+IC0xID8gJ1wiJyArIG4gKyAnXCInIDogbikuam9pbignICZndDsgJylcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgICBpZiAoT2JqZWN0LmVudHJpZXModW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5KS5maWx0ZXIoYyA9PiBjWzFdID4gMSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRHVwbGljYXRlcyA9IGNvbXBlbmRpdW1Eb2N1bWVudHMubGVuZ3RoID8/IDBcbiAgICAgIHNoZWV0RGF0YS51c2VkRXJhcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh1c2VkRXJhcykpIHtcbiAgICAgICAgc2hlZXREYXRhLnVzZWRFcmFzLnB1c2goe1xuICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLnVzZWRFcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bURvY3VtZW50SW5mbyA9IFtdXG4gICAgICBzaGVldERhdGEud29ybGREb2N1bWVudEluZm8gPSBbXVxuICAgICAgc2hlZXREYXRhLndvcmxkRHVwbGljYXRlcyA9IDBcbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRHVwbGljYXRlcyA9IDBcbiAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSA9IGZhbHNlXG4gICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnYS5jb3B5LXRvLWNsaXBib2FyZCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCgkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCgpKVxuICAgIH0pXG5cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1fZXhpc3RpbmcnKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGNvbnN0IHByZWZpeCA9IG9iai5kYXRhKCdwcmVmaXgnKVxuICAgICAgbGV0IHZhbHVlID0gb2JqLnZhbCgpXG4gICAgICBpZiAodmFsdWUgIT09ICcnKSB7XG4gICAgICAgIHZhbHVlID0gcHJlZml4ICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZSh2YWx1ZSlcbiAgICAgIH1cbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwodmFsdWUpLnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnc2VsZWN0W25hbWU9a25vd25dJykuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKG9iai52YWwoKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdhW2RhdGEtZ3Vlc3NdJykuY2xpY2soYXN5bmMgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgY29uc3QgZ3Vlc3MgPSBvYmouZGF0YSgnZ3Vlc3MnKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbChndWVzcykudHJpZ2dlcignY2hhbmdlJylcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGVyYVRvZ2dsZSAoZG9jdW1lbnQsIHByb3BlcnR5SWQpIHtcbiAgICBpZiAoZG9jdW1lbnQudHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgLy8gU2V0dXBzIGNhbiBvbmx5IGhhdmUgb25lIGVyYSB0byBtYWtlIHN1cmUgdGhlIGNvcnJlY3Qgc2tpbGxzIGFyZSBwb3B1bGF0ZWQgdmlhIENvQyBJRFxuICAgICAgY29uc3QgdXBkYXRlID0ge1xuICAgICAgICBbcHJvcGVydHlJZF06IHRydWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhkb2N1bWVudC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKSkge1xuICAgICAgICAgIGlmIChrZXkgIT09IHByb3BlcnR5SWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZVsnLT0nICsga2V5XSA9IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzogdXBkYXRlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXM/Lltwcm9wZXJ0eUlkXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6IHtcbiAgICAgICAgICAgIFtwcm9wZXJ0eUlkXTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICAgW2BmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzLiR7cHJvcGVydHlJZH1gXTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICBbYGZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMuLT0ke3Byb3BlcnR5SWR9YF06IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCBDb0NJREVkaXRvci5lcmFUb2dnbGUodGhpcy5vYmplY3QsIHByb3BlcnR5SWQpXG4gICAgY29uc3Qgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMub3B0aW9ucylcbiAgICBhd2FpdCB0aGlzLmNsb3NlKClcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgaWQgPSBmb3JtRGF0YS5pZCB8fCAnJ1xuICAgIGF3YWl0IHRoaXMub2JqZWN0LnVwZGF0ZSh7XG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQnOiBpZCxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nJzogZm9ybURhdGEubGFuZyB8fCBnYW1lLmkxOG4ubGFuZyxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSc6IGZvcm1EYXRhLnByaW9yaXR5IHx8IDAsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6ICh0aGlzLm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVxuICAgIH0pXG4gICAgY29uc3QgaHRtbCA9ICQodGhpcy5vYmplY3Quc2hlZXQuZWxlbWVudCkuZmluZCgnaGVhZGVyLndpbmRvdy1oZWFkZXIgYS5oZWFkZXItYnV0dG9uLmVkaXQtY29jLWlkLXdhcm5pbmcsaGVhZGVyLndpbmRvdy1oZWFkZXIgYS5oZWFkZXItYnV0dG9uLmVkaXQtY29jLWlkLWV4aXNpdGluZycpXG4gICAgaWYgKGh0bWwubGVuZ3RoKSB7XG4gICAgICBodG1sLmNzcyh7XG4gICAgICAgIGNvbG9yOiAoaWQgPyAndmFyKC0tY29sb3ItdGV4dC1saWdodC1oaWdobGlnaHQpJyA6ICdyZWQnKVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DSURFZGl0b3IgfSBmcm9tICcuLi9hcHBzL2NvYy1pZC1lZGl0b3IuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIChoZWFkZXJCdXR0b25zLCBzaGVldCkge1xuICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICBjb25zdCBzaGVldENvQ0lEID0gc2hlZXQub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcbiAgICBjb25zdCBub0lkID0gKHR5cGVvZiBzaGVldENvQ0lEID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygc2hlZXRDb0NJRC5pZCA9PT0gJ3VuZGVmaW5lZCcgfHwgc2hlZXRDb0NJRC5pZCA9PT0gJycpXG4gICAgY29uc3QgQ29DSURFZGl0b3JCdXR0b24gPSB7XG4gICAgICBjbGFzczogKG5vSWQgPyAnZWRpdC1jb2MtaWQtd2FybmluZycgOiAnZWRpdC1jb2MtaWQtZXhpc2l0aW5nJyksXG4gICAgICBsYWJlbDogJ0NvQzcuQ29DSURGbGFnLmlkJyxcbiAgICAgIGljb246ICdmYXMgZmEtZmluZ2VycHJpbnQnLFxuICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICBuZXcgQ29DSURFZGl0b3Ioc2hlZXQub2JqZWN0LCB7fSkucmVuZGVyKHRydWUsIHsgZm9jdXM6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbnVtYmVyT2ZCdXR0b25zID0gaGVhZGVyQnV0dG9ucy5sZW5ndGhcbiAgICBoZWFkZXJCdXR0b25zLnNwbGljZShudW1iZXJPZkJ1dHRvbnMgLSAxLCAwLCBDb0NJREVkaXRvckJ1dHRvbilcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb250ZXh0TWVudSB7XG4gIGJpbmQgKG1lbnUsIGh0bWwsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFja1xuICAgIHRoaXMuX2h0bWwgPSBodG1sXG4gICAgdGhpcy5fbWVudSA9IG1lbnVcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVudVRyaWdnZXIgPSBodG1sLmZpbmQoYFtkYXRhLWNvbnRleHQtbWVudT0ke21lbnUuaWR9XWApIC8vIEZpbmQgYWxsIG1lbnUgdHJpZ2dlcnMuXG4gICAgICBpZiAobWVudVRyaWdnZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLy8gSWYgdGhlcmUgaXMgbm8gdHJpZ2dlciwgZG8gbm90IGNvbnRpbnVlLlxuICAgICAgbWVudVRyaWdnZXIuY29udGV4dG1lbnUodGhpcy5fb25Db250ZXh0TWVudS5iaW5kKHRoaXMpKSAvLyBBdHRhY2ggdGhlIGhhbmRsZXIuXG4gICAgICBjb25zdCBtZW51RWxlbWVudCA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVNZW51KG1lbnUpIC8vIEJ1aWxkIHRoZSBtZW51XG4gICAgICBtZW51RWxlbWVudC5vbignY2xpY2snLFxuICAgICAgICAnLm1lbnUtYWN0aW9uJyxcbiAgICAgICAgdGhpcy5fb25NZW51QWN0aW9uLmJpbmQodGhpcykpXG4gICAgICAvLyBjb25zdCBkb2N1bWVudE1lbnUgPSB0aGlzLm1lbnVDb250YWluZXIuZmluZChgLmNvbnRleHQtbWVudS13cmFwcGVyLiR7bWVudS5pZH1gKVxuICAgICAgaWYgKHRoaXMubWVudS5sZW5ndGggIT09IDApIHRoaXMubWVudS5yZXBsYWNlV2l0aChtZW51RWxlbWVudClcbiAgICAgIGVsc2UgdGhpcy5tZW51Q29udGFpbmVyLmFwcGVuZChtZW51RWxlbWVudClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9XG4gIH1cblxuICBnZXQgbWVudUNvbnRhaW5lciAoKSB7XG4gICAgbGV0IG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgaWYgKG1lbnVDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9odG1sLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1lbnUtY29udGFpbmVyXCI+PC9kaXY+JylcbiAgICAgIG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgfVxuICAgIHJldHVybiBtZW51Q29udGFpbmVyXG4gIH1cblxuICBnZXQgbWVudSAoKSB7XG4gICAgLy8gY29uc3QgbWVudUNvbnRhaW5lciA9IHRoaXMubWVudUNvbnRhaW5lclxuICAgIC8vIGlmICghbWVudUNvbnRhaW5lciB8fCBtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke3RoaXMuX21lbnUuaWR9YClcbiAgfVxuXG4gIF9vbk1lbnVBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdicmFuY2gnKSkgcmV0dXJuXG4gICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrKGV2ZW50LCB0aGlzLnRhcmdldClcbiAgfVxuXG4gIHN0YXRpYyBjbG9zZUFsbCAoKSB7XG4gICAgY29uc3QgbWVudUNvbnRhaW5lcnMgPSAkKCdib2R5JykuZmluZCgnLm1lbnUtY29udGFpbmVyJylcbiAgICBjb25zdCBtZW51cyA9IG1lbnVDb250YWluZXJzLmZpbmQoJy5jb250ZXh0LW1lbnUtd3JhcHBlcicpXG4gICAgbWVudXMuZWFjaChmdW5jdGlvbiAoaSwgbSkgeyBtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJyB9KVxuICAgIC8vIGJvZHkuZmluZCgnLm1lbnUtd3JhcHBlcicpLmhpZGUoKVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQodHJ1ZSlcbiAgICBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwoKSAvLyBPbmx5IDEgbWVudSBjYW4gYmUgb3Blbi5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudD8uY3VycmVudFRhcmdldFxuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0XG4gICAgaWYgKCF0YXJnZXQpIHJldHVyblxuICAgIGNvbnN0IG1lbnVOYW1lID0gdGFyZ2V0LmRhdGFzZXQ/LmNvbnRleHRNZW51XG4gICAgaWYgKG1lbnVOYW1lID09PSB0aGlzLl9tZW51LmlkKSB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5tZW51XG4gICAgICBpZiAod3JhcHBlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHN1Yk1lbnUgPSB3cmFwcGVyLmZpbmQoJy5zdWItbWVudScpXG4gICAgICAgIGxldCBsZWZ0ID0gZXZlbnQuY2xpZW50WFxuICAgICAgICBsZXQgdG9wID0gZXZlbnQuY2xpZW50WVxuICAgICAgICBjb25zdCBtZW51SGVpZ2h0ID0gd3JhcHBlci5vdXRlckhlaWdodCgpXG4gICAgICAgIGNvbnN0IG1lbnVXaWR0aCA9IHdyYXBwZXIub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBtZW51SGVpZ2h0ICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gbWVudUhlaWdodFxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQpIHtcbiAgICAgICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSBtZW51V2lkdGhcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3ViTWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgbWVudVdpZHRoICsgbGVmdCArIHN1Yk1lbnUub3V0ZXJXaWR0aCgpKSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIHJpZ2h0OiBgJHttZW51V2lkdGggLSA1fXB4YCxcbiAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Yk1lbnUuY3NzKHtcbiAgICAgICAgICAgICAgbGVmdDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIHJpZ2h0OiAnJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlci5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGAke2xlZnR9cHhgLFxuICAgICAgICAgIHRvcDogYCR7dG9wfXB4YCxcbiAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY2FuU2VlICh2aXNpYmlsaXR5KSB7XG4gICAgc3dpdGNoICh2aXNpYmlsaXR5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2dtJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gICAgICBjYXNlICd0cnVzdGVkJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc1RydXN0ZWRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIENyZWF0ZU1lbnUgKG1lbnUpIHtcbiAgICBjb25zdCBjbGFzc2VzID0gdHlwZW9mIG1lbnUuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbbWVudS5jbGFzc2VzXSA6IG1lbnUuY2xhc3Nlc1xuICAgIGNsYXNzZXMucHVzaCgnY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCc8ZGl2PjwvZGl2PicpXG4gICAgd3JhcHBlci5hZGRDbGFzcyhtZW51LmlkKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHdyYXBwZXIuYWRkQ2xhc3MoYykpXG4gICAgaWYgKG1lbnUuc2VjdGlvbikge1xuICAgICAgbWVudS5zZWN0aW9uLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihzLCB7IG11bHRpOiB0cnVlIH0pXG4gICAgICAgIGlmIChzZWN0aW9uKSB3cmFwcGVyLmFwcGVuZChzZWN0aW9uKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVTZWN0aW9uKG1lbnUpXG4gICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICB9XG4gICAgcmV0dXJuIHdyYXBwZXJcbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVTZWN0aW9uIChzLCB7IG11bHRpID0gZmFsc2UsIHN1Yk1lbnUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIXMuaXRlbXMpIHJldHVybiBudWxsXG4gICAgaWYgKHMudmlzaWJpbGl0eSAmJiAhQ29DN0NvbnRleHRNZW51LmNhblNlZShzLnZpc2liaWxpdHkpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNsYXNzZXMgPSBzLmNsYXNzZXMgPyB0eXBlb2Ygcy5jbGFzc2VzID09PSAnc3RyaW5nJyA/IFtzLmNsYXNzZXNdIDogcy5jbGFzc2VzIDogW11cbiAgICBpZiAobXVsdGkpIGNsYXNzZXMucHVzaCgnbWVudS1zZWN0aW9uJylcbiAgICBpZiAoc3ViTWVudSkgY2xhc3Nlcy5wdXNoKCdzdWItbWVudScpXG4gICAgY29uc3Qgc2VjdGlvbiA9ICQoJzx1bD48L3VsPicpXG4gICAgY2xhc3Nlcy5mb3JFYWNoKGMgPT4gc2VjdGlvbi5hZGRDbGFzcyhjKSlcbiAgICBzLml0ZW1zLmZvckVhY2goaSA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoJzxsaT48L2xpPicpXG4gICAgICBsaS5hZGRDbGFzcygnbWVudS1pdGVtJylcbiAgICAgIGlmIChpLmFjdGlvbikge1xuICAgICAgICBsaS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICBsaS5hdHRyKCdkYXRhLWFjdGlvbicsIGkuYWN0aW9uKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpLmxhYmVsID09PSAnc3RyaW5nJykgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWx9PC9zcGFuPmApXG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGkubGFiZWwuaWNvbikgbGkuYXBwZW5kKGA8aSBjbGFzcz1cIiR7aS5sYWJlbC5pY29ufVwiPjwvaT5gKVxuICAgICAgICBpZiAoaS5sYWJlbC50ZXh0KSBsaS5hcHBlbmQoYDxzcGFuPiR7aS5sYWJlbC50ZXh0fTwvc3Bhbj5gKVxuICAgICAgfVxuICAgICAgaWYgKGkuc3ViTWVudSkge1xuICAgICAgICBsaS5hZGRDbGFzcygnc3ViLW1lbnUtYnV0dG9uJylcbiAgICAgICAgbGkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jYXJldC1yaWdodFwiPjwvaT4nKVxuICAgICAgICBjb25zdCBzdWIgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihpLnN1Yk1lbnUsIHsgc3ViTWVudTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc3ViKSBsaS5hcHBlbmQoc3ViKVxuICAgICAgfVxuICAgICAgc2VjdGlvbi5hcHBlbmQobGkpXG4gICAgfSlcbiAgICByZXR1cm4gc2VjdGlvblxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi8uLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IENvQzdDb25DaGVjayB9IGZyb20gJy4uLy4uL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRleHRNZW51IH0gZnJvbSAnLi4vLi4vY29udGV4dC1tZW51LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvclNoZWV0IGV4dGVuZHMgQWN0b3JTaGVldCB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuc2hvd0hpZGRlbkRldk1lbnUgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcblxuICAgIHNoZWV0RGF0YS5jYW5EcmFnVG9rZW4gPSAhIXRoaXMudG9rZW4gJiYgZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEubGlua2VkQWN0b3IgPSB0aGlzLmFjdG9yLnByb3RvdHlwZVRva2VuPy5hY3RvckxpbmsgPT09IHRydWVcbiAgICBzaGVldERhdGEuaXNUb2tlbiA9IHRoaXMuYWN0b3IuaXNUb2tlblxuICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSA9IHt9XG4gICAgc2hlZXREYXRhLnNraWxscyA9IHt9XG4gICAgc2hlZXREYXRhLmNvbWJhdFNraWxscyA9IHt9XG4gICAgc2hlZXREYXRhLndlYXBvbnMgPSB7fVxuICAgIHNoZWV0RGF0YS5yYW5nZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLm1lbGVlV3BuID0gW11cbiAgICBzaGVldERhdGEuYWN0b3JGbGFncyA9IHt9XG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9XG4gICAgICB0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInXG4gICAgICAgID8gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLmFjdG9yLmVmZmVjdHMpXG4gICAgICAgIDogQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLmFjdG9yLmVmZmVjdHMpXG5cbiAgICBzaGVldERhdGEucGVybWlzc2lvbkxpbWl0ZWQgPSAhZ2FtZS51c2VyLmlzR00gJiYgKHRoaXMuYWN0b3Iub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gdGhpcy5hY3Rvci5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRFxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuYWxsb3dVbmxvY2sgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdhbHdheXMnIHx8XG4gICAgICBnYW1lLnVzZXIuaXNHTSB8fFxuICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnY3JlYXRpb24nICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSlcbiAgICBpZiAoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci50eXBlICE9PSAndmVoaWNsZScpIHtcbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzID0ge1xuICAgICAgICAgIHN0cjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TVFInLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkNPTicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlNJWicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRleDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5ERVgnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5JyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFwcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5BUFAnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuSU5UJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5FRFUnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicyA9IHtcbiAgICAgICAgICBocDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnSGl0IHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTWFnaWMgcG9pbnRzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxjazogeyB2YWx1ZTogbnVsbCwgc2hvcnQ6ICdMQ0snLCBsYWJlbDogJ0x1Y2snIH0sXG4gICAgICAgICAgc2FuOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIG1heDogOTksXG4gICAgICAgICAgICBzaG9ydDogJ1NBTicsXG4gICAgICAgICAgICBsYWJlbDogJ1Nhbml0eScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdNT1YnLFxuICAgICAgICAgICAgbGFiZWw6ICdNb3ZlbWVudCByYXRlJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnREInLFxuICAgICAgICAgICAgbGFiZWw6ICdEYW1hZ2UgYm9udXMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYnVpbGQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdCTEQnLFxuICAgICAgICAgICAgbGFiZWw6ICdCdWlsZCcsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm1vcjogeyB2YWx1ZTogbnVsbCwgYXV0bzogZmFsc2UgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5ID0ge1xuICAgICAgICAgIHBlcnNvbmFsRGVzY3JpcHRpb246IHsgdHlwZTogJ3N0cmluZycsIHZhbHVlOiAnJyB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zID0ge1xuICAgICAgICAgIG9jY3VwYXRpb246ICcnLFxuICAgICAgICAgIGFnZTogJycsXG4gICAgICAgICAgc2V4OiAnJyxcbiAgICAgICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgICAgIGFyY2hldHlwZTogJycsXG4gICAgICAgICAgb3JnYW5pemF0aW9uOiAnJyxcbiAgICAgICAgICBwbGF5ZXJuYW1lOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncyA9IHsgbG9ja2VkOiB0cnVlLCBtYW51YWxDcmVkaXQ6IGZhbHNlIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jcmVkaXQgPSB7XG4gICAgICAgICAgbW9uZXRhcnlTeW1ib2w6IG51bGwsXG4gICAgICAgICAgbXVsdGlwbGllcjogbnVsbCxcbiAgICAgICAgICBzcGVudDogbnVsbCxcbiAgICAgICAgICBhc3NldHNEZXRhaWxzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGV2ZWxvcG1lbnQpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50ID0ge1xuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxuICAgICAgICAgIG9jY3VwYXRpb246IG51bGwsXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5KSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5ID0gW11cblxuICAgICAgc2hlZXREYXRhLnB1bHBSdWxlQXJjaGV0eXBlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKVxuICAgICAgc2hlZXREYXRhLnB1bHBSdWxlT3JnYW5pemF0aW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAgICdDb0M3JyxcbiAgICAgICAgJ3B1bHBSdWxlT3JnYW5pemF0aW9uJ1xuICAgICAgKVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5pc0RlYWQgPSB0aGlzLmFjdG9yLmRlYWRcbiAgICBzaGVldERhdGEuaXNEeWluZyA9IHRoaXMuYWN0b3IuZHlpbmdcblxuICAgIGlmIChzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgICAgLy8gc2kgYydlc3QgdW5lIGZvcm11bGUgZXQgcXUnb24gcGV1dCBsJ2V2YWx1ZXJcbiAgICAgICAgLy8gY2UgYmxvYyBkZXZyYWl0IGV0cmUgZMOpcGxhY8OpIGRhbnMgbGUgYmxvYyBfdXBkYXRlRm9ybURhdGFcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnJhbmdlZCkge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5SYW5nZWRTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihpdGVtLnN5c3RlbS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgICAgQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXRcbiAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGZvdW5kcnkudXRpbHMuZ2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnN1YnN0cmluZyg1KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gKFxuICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoaXRlbS5zeXN0ZW0udmFsdWUsIHBhcnNlZCkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLnRvdGFsXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlU2tpbGxGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVRvVXBkYXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFxuICAgICAgICAgICAgICAgICAgYFtDT0M3XSAoQWN0b3I6JHt0aGlzLm5hbWV9KSBFdmFsdWF0aW5nIHNraWxsICR7aXRlbS5uYW1lfToke2l0ZW0uc3lzdGVtLnZhbHVlfSB0byAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbVRvVXBkYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnZhbHVlJzogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICBjb25zdCB7IGJhc2UsIHJhd1ZhbHVlLCB2YWx1ZSB9ID0gc2tpbGwuc3lzdGVtXG5cbiAgICAgICAgICAgIC8vIEFzc3VtZSBmYWxsYmFjayB2YWx1ZXMsIHVzZWZ1bCBmb3IgaW5pdGlhbCBzZXR1cCBvZiBza2lsbHNcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnJhd1ZhbHVlID0gcmF3VmFsdWUgfHwgdmFsdWUgfHwgYmFzZVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSB2YWx1ZSB8fCBiYXNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5iYXNlID0gYXdhaXQgc2tpbGwuYXN5bmNCYXNlKClcblxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnZhbHVlKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIHBhcnQgb2YgbWlncmF0aW9uIG9yIGRvbmUgYXQgaW5pdCAhXG4gICAgICAgICAgICAgIC8vIFdhcyBkb25lIHdoZW4gc2tpbGwgdmFsdWUgd2FzIGNoYW5nZWQgdG8gYmFzZSArIGFkanVzdGVtZW50XG4gICAgICAgICAgICAgIGNvbnN0IGV4cCA9IGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgICAgICAgPyBwYXJzZUludChpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICBsZXQgdXBkYXRlZEV4cCA9IGV4cCArIHBhcnNlSW50KGl0ZW0uc3lzdGVtLnZhbHVlKSAtIHNraWxsLnZhbHVlXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVkRXhwIDw9IDApIHVwZGF0ZWRFeHAgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICAgICAgICBgW0NPQzddIFVwZGF0aW5nIHNraWxsICR7c2tpbGwubmFtZX0gZXhwZXJpZW5jZS4gRXhwZXJpZW5jZSBtaXNzaW5nOiAke3VwZGF0ZWRFeHB9YFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgX2lkOiBpdGVtLl9pZCxcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IHVwZGF0ZWRFeHAsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnZhbHVlJzogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgaWYgKCFpdGVtLnN5c3RlbS5hZGp1c3RtZW50cykgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPSB7fVxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlID0gdXBkYXRlZEV4cFxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHNraWxsLnJhd1ZhbHVlXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gc2tpbGwudmFsdWUgLy8gQUNUSVZFX0VGRkVDVCBuZWNlc3NhcnkgdG8gYXBwbHkgZWZmZWN0c1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSBza2lsbC52YWx1ZSAvLyBBQ1RJVkVfRUZGRUNUIG5lY2Vzc2FyeSB0byBhcHBseSBlZmZlY3RzXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnJhd1ZhbHVlID0gc2tpbGwucmF3VmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGlzdCA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdXG4gICAgICAgIGlmICghbGlzdCkge1xuICAgICAgICAgIGxpc3QgPSBbXVxuICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gbGlzdFxuICAgICAgICB9XG4gICAgICAgIGxpc3QucHVzaChpdGVtKVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGl0ZW1UeXBlIGluIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbVR5cGVdLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgfVxuXG4gICAgICAvLyByZWRvbmRhbnQgYXZlYyBtYXRyaWNlIGl0ZW1ieXR5cGVcbiAgICAgIHNoZWV0RGF0YS5za2lsbHMgPSBzaGVldERhdGEuaXRlbXNcbiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3NraWxsJylcbiAgICAgICAgLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgICBzaGVldERhdGEubWVsZWVTa2lsbHMgPSBzaGVldERhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT5cbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IHRydWUgJiZcbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgc2hlZXREYXRhLnJhbmdlU2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgKHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPT09IHRydWUgfHwgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFuZ2VkID09PSB0cnVlKVxuICAgICAgKVxuXG4gICAgICBjb25zdCBjYnRTa2lsbHMgPSBzaGVldERhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT4gc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlXG4gICAgICApXG4gICAgICBpZiAoY2J0U2tpbGxzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgY2J0U2tpbGxzKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNvbWJhdFNraWxsc1tza2lsbC5faWRdID0gc2tpbGxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB3ZWFwb25zID0gc2hlZXREYXRhLml0ZW1zQnlUeXBlLndlYXBvblxuXG4gICAgICBpZiAod2VhcG9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IHdlYXBvbiBvZiB3ZWFwb25zKSB7XG4gICAgICAgICAgd2VhcG9uLnVzZXNBbHRlcm5hdGVTa2lsbCA9XG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0byA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QgPT09IHRydWVcbiAgICAgICAgICBpZiAoIXdlYXBvbi5zeXN0ZW0uYW1tbykgd2VhcG9uLnN5c3RlbS5hbW1vID0gMFxuXG4gICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gdHJ1ZVxuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gJyc7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gMDtcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi52YWx1ZSA9IDA7XG4gICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gOiBzaSBsJ0lEIG4nZXN0cyBwYXMgZMOpZmluaWUgbWFpcyBxdSd1biBub20gYSDDqXTDqSBkb25uw6ksIHV0aWxpc2VyIGNlIG5vbSBldCB0YW50ZXIgZGUgcmV0cm91dmVyIGxlIHNraWxsXG4gICAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogYXZhbnQgZCdhc3NpZ2VyIGxlIHNraWxsIHbDqXJpZmllciBxdSdpbCBleGlzdGUgdG91am91cnMuXG4gICAgICAgICAgICAvLyBzaSBpbCBuJ2V4aXN0ZSBwbHVzIGlsIGZhdXQgbGUgcmV0cm91dmVyIG91IHBhc3NlciBza2lsbHNldCBhIGZhbHNlLlxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkXSkge1xuICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZClcbiAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLm5hbWUgPSBza2lsbC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkICE9PSAnJykge1xuICAgICAgICAgICAgICBpZiAoc2hlZXREYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRdKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSA9IHNraWxsLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgd2VhcG9uLnN5c3RlbS5fcHJvcGVydGllcyA9IFtdXG4gICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSB7fVxuICAgICAgICAgICAgcHJvcGVydHkuaWQgPSBrZXlcbiAgICAgICAgICAgIHByb3BlcnR5Lm5hbWUgPSB2YWx1ZVxuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5fcHJvcGVydGllcy5wdXNoKHByb3BlcnR5KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNoZWV0RGF0YS53ZWFwb25zW3dlYXBvbi5faWRdID0gd2VhcG9uXG4gICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSBzaGVldERhdGEucmFuZ2VXcG4ucHVzaCh3ZWFwb24pXG4gICAgICAgICAgZWxzZSBzaGVldERhdGEubWVsZWVXcG4ucHVzaCh3ZWFwb24pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBzaGVldERhdGEudG9rZW5JZCA9IHRva2VuXG4gICAgICAgID8gYCR7dG9rZW4ucGFyZW50Py5pZCA/IHRva2VuLnBhcmVudC5pZCA6ICdUT0tFTid9LiR7dG9rZW4uaWR9YFxuICAgICAgICA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG5cbiAgICAgIHNoZWV0RGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSBmYWxzZVxuICAgICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGFyYWN0ZXJpc3RpYyBvZiBPYmplY3QudmFsdWVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSkgY2hhcmFjdGVyaXN0aWMuZWRpdGFibGUgPSB0cnVlXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFyZCA9IE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWMudmFsdWUgLyAyKVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmV4dHJlbWUgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gNSlcblxuICAgICAgICAgIC8vIElmIG5vIHZhbHVlICYmIG5vIGZvcm11bGEgZG9uJ3QgZGlzcGxheSBjaGFyYWMuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiAhY2hhcmFjdGVyaXN0aWMuZm9ybXVsYSkge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZGlzcGxheSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaWYgYW55IGNoYXJhY3RlcmlzdGljIGhhcyBubyB2YWx1ZSBidXQgaGFzIGEgZm9ybXVsYS5cbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlICYmIGNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgfHxcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yIGNvbXBhdCB3aXRoIHByZXZpb3VzIGNoYXJhY3RlcnMgdGVzdCBpZiBhdXRvIGlzIGRlZmluaWVkLCBpZiBub3Qgd2UgZGVmaW5lIGl0XG4gICAgaWYgKCFbJ3ZlaGljbGUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXModGhpcy5hY3Rvci50eXBlKSkge1xuICAgICAgY29uc3QgYXV0byA9IHRoaXMuYWN0b3IuY2hlY2tVbmRlZmluZWRBdXRvKClcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc2hlZXREYXRhLmRhdGEuc3lzdGVtLCBhdXRvKVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPCAwKSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IG51bGxcbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gbnVsbFxuXG4gICAgaWYgKCFbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSBpbnN0YW5jZW9mIEFycmF5ICYmIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkubGVuZ3RoKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbMF0uaXNGaXJzdCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeVtzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5Lmxlbmd0aCAtIDFdLmlzTGFzdCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcblxuICAgIHNoZWV0RGF0YS5oYXNDb25kaXRpb25zID1cbiAgICAgIHRoaXMuYWN0b3IuZWZmZWN0cy5zaXplID4gMCB8fFxuICAgICAgKHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKS5maWx0ZXIoXG4gICAgICAgICAgY29uZGl0aW9uID0+IHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZVxuICAgICAgICApLmxlbmd0aCA+IDApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvLyBzdGF0aWMgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gIC8vICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gIC8vICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gIC8vICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIC8vIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0RFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2UuanMgZ2V0IHRva2VuS2V5KCk6IERFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICAvLyBpZiggdGhpcy50b2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLy8gcmV0dXJuIHRoaXMuYWN0b3IuaWQ7XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJy5zZWN0aW9uLWhlYWRlcicpLmNsaWNrKHRoaXMuX29uU2VjdGlvbkhlYWRlci5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW1zLWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSXRlbUhlYWRlci5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmludmVudG9yeS1oZWFkZXInKS5jbGljayh0aGlzLl9vbkludmVudG9yeUhlYWRlci5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlYWQtb25seScpLmRibGNsaWNrKHRoaXMuX3RvZ2dsZVJlYWRPbmx5LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFtbW8nKS5jbGljayh0aGlzLl9vbkFkZEFtby5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG4gICAgaHRtbC5maW5kKCcucmVsb2FkLXdlYXBvbicpLm9uKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IHRoaXMuX29uUmVsb2FkV2VhcG9uKGV2ZW50KSlcblxuICAgIC8vIE93bmVyIE9ubHkgTGlzdGVuZXJzXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lciAmJiAhKHRoaXMuYWN0b3IuY29tcGVuZGl1bT8ubG9ja2VkID8/IGZhbHNlKSkge1xuICAgICAgaHRtbC5maW5kKCcubG9jaycpLmNsaWNrKHRoaXMuX29uTG9ja0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmZsYWcnKS5jbGljayh0aGlzLl9vbkZsYWdDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mb3JtdWxhJykuY2xpY2sodGhpcy5fb25Gb3JtdWxhQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuYXV0by10b2dnbGUnKS5jbGljayh0aGlzLl9vbkF1dG9Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICB9XG5cbiAgICAvLyBPd25lciBPbmx5LCBub3QgYXZhaWxhYmxlIGZyb20gY29tcGVuZGl1bVxuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIgJiYgdHlwZW9mIHRoaXMuYWN0b3IuY29tcGVuZGl1bSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgICBpZiAoIXRoaXMubWVudXMpIHRoaXMubWVudXMgPSBbXVxuXG4gICAgICAgIGNvbnN0IHJvbGxNZW51ID0ge1xuICAgICAgICAgIGlkOiAnc2tpbGwtcm9sbCcsXG4gICAgICAgICAgY2xhc3NlczogJ3JvbGwtbWVudScsXG4gICAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAnbWFpbicsXG4gICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdyb2xsJywgbGFiZWw6ICdSb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnb3Bwb3NlZC1yb2xsJywgbGFiZWw6ICdPcHBvc2VkIHJvbGwnIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb21iaW5lZC1yb2xsJywgbGFiZWw6ICdDb21iaW5lZCByb2xsJyB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzZXM6ICdrZWVwZXInLFxuICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnZ20nLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiB7IGljb246ICdmYXMgZmEtbGluaycsIHRleHQ6ICdMaW5rJyB9LFxuICAgICAgICAgICAgICAgICAgc3ViTWVudToge1xuICAgICAgICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29weS10by1jbGlwYm9hcmQnLCBsYWJlbDogJ0NvcHkgdG8gY2xpcC1ib2FyZCcgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3JlcXVlc3Qtcm9sbCcsIGxhYmVsOiAnUmVxdWVzdCByb2xsJyB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzYW5NZW51ID0ge1xuICAgICAgICAgIGlkOiAnc2FuLXJvbGwnLFxuICAgICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICAgIHNlY3Rpb246IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnZW5jb3VudGVyJywgbGFiZWw6ICdFbmNvdW50ZXInIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdyb2xsJywgbGFiZWw6ICdSb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnb3Bwb3NlZC1yb2xsJywgbGFiZWw6ICdPcHBvc2VkIHJvbGwnIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb21iaW5lZC1yb2xsJywgbGFiZWw6ICdDb21iaW5lZCByb2xsJyB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzZXM6ICdrZWVwZXInLFxuICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAndHJ1c3RlZCcsXG4gICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogeyBpY29uOiAnZmFzIGZhLWxpbmsnLCB0ZXh0OiAnTGluaycgfSxcbiAgICAgICAgICAgICAgICAgIHN1Yk1lbnU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstdG9vbCcsIGxhYmVsOiAnT3BlbiBpbiBsaW5rIHRvb2wnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLWVuY291bnRlcicsIGxhYmVsOiAnRW5jb3VudGVyJyB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb2xsQ29udGV4dE1lbnUgPSBuZXcgQ29DN0NvbnRleHRNZW51KClcbiAgICAgICAgcm9sbENvbnRleHRNZW51LmJpbmQocm9sbE1lbnUsIGh0bWwsIHRoaXMuX29uQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgICB0aGlzLm1lbnVzLnB1c2gocm9sbENvbnRleHRNZW51KVxuXG4gICAgICAgIGNvbnN0IHNhbkNvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICAgIHNhbkNvbnRleHRNZW51LmJpbmQoc2FuTWVudSwgaHRtbCwgdGhpcy5fb25Db250ZXh0TWVudUNsaWNrLmJpbmQodGhpcykpXG4gICAgICAgIHRoaXMubWVudXMucHVzaChzYW5Db250ZXh0TWVudSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnRleHQgbWVudSBiaW5kXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKS5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNraWxsLWltYWdlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbEF0dHJpYlRlc3QuYmluZCh0aGlzKSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnRva2VuLWRyYWctaGFuZGxlJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCB0aGlzLl9vbkRyYWdUb2tlblN0YXJ0LmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnQ2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbCcpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnQXR0cmlidXRlKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5zYW4tY2hlY2snKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ1NhbkNoZWNrKGV2ZW50KSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJvbGwtY2hhcmFjdGVyaXRpY3MnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF2ZXJhZ2UtY2hhcmFjdGVyaXRpY3MnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25BdmVyYWdlQ2hhcmFjdGVyaXRpY3NWYWx1ZS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICAgIC8vIFN0YXR1cyBtb25pdG9yXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnKSkge1xuICAgICAgICBodG1sLmZpbmQoJy5yZXNldC1jb3VudGVyJykuY2xpY2sodGhpcy5fb25SZXNldENvdW50ZXIuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuY29uZGl0aW9uLW1vbml0b3InKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkNvbmRpdGlvblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1keWluZycpLmNsaWNrKHRoaXMuaGVhbC5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1kZWFkJykuY2xpY2sodGhpcy5yZXZpdmUuYmluZCh0aGlzKSlcbiAgICAgIH1cblxuICAgICAgaHRtbC5maW5kKCcuZHlpbmctY2hlY2snKS5jbGljayh0aGlzLmNoZWNrRm9yRGVhdGguYmluZCh0aGlzKSlcblxuICAgICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1pbWFnZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uV2VhcG9uUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRWZmZWN0KGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxuICAgICAgLy8gICAua2V5ZG93bigoZXZlbnQpID0+IHtcbiAgICAgIC8vICAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdwb2ludGVyJylcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgIH0pXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgIC8vICAgLmtleWRvd24oKGV2ZW50KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIC8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgncG9pbnRlcicpXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9KVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1za2lsbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vbldlYXBvblNraWxsUm9sbChldmVudCkpXG4gICAgICBodG1sLm9uKCdjbGljaycsICcud2VhcG9uLWRhbWFnZScsIHRoaXMuX29uV2VhcG9uRGFtYWdlLmJpbmQodGhpcykpXG5cbiAgICAgIGNvbnN0IHdoZWVsSW5wdXRzID0gaHRtbC5maW5kKCcuYXR0cmlidXRlLXZhbHVlJylcbiAgICAgIGZvciAoY29uc3Qgd2hlZWxJbnB1dCBvZiB3aGVlbElucHV0cykge1xuICAgICAgICB3aGVlbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnQgPT4gdGhpcy5fb25XaGVlbChldmVudCksIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1wb3B1cCcpLmNsaWNrKHRoaXMuX29uSXRlbVBvcHVwLmJpbmQodGhpcykpXG5cbiAgICAvLyBVcGRhdGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmRibGNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVuZGVySXRlbVNoZWV0KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG5cbiAgICAvLyBEZWxldGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIHN3aXRjaCAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnYm9vayc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHt9XG4gICAgICAgICAgICBpZiAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0Lm1lbGVlKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXMubWVsZWUgPSB0cnVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5ybmdkKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXMucm5nZCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYsIHByb3BlcnRpZXMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIGh0bWwuZmluZCgnLmNsZWFuLXNraWxsLWxpc3QnKS5jbGljaygoKSA9PiB7XG4gICAgLy8gICB0aGlzLmFjdG9yLmNsZWFuU2tpbGxzKClcbiAgICAvLyB9KVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmNyZWF0ZUJpb1NlY3Rpb24oKVxuICAgICAgdGhpcy5yZW5kZXIoKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc2VjdGlvbicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25VcChpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLWRvd24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25Eb3duKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZXZlbG9wbWVudC1mbGFnJykuZGJsY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFyY2hldHlwZS1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5za2lsbC1kZXZlbG9wZW1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKCFldmVudC5kZXRhaWwgfHwgZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcEx1Y2soZXZlbnQuc2hpZnRLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmNsZWFyX2NvbmRpdGlvbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGRpc2FibGUgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBpbiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSAhPT1cbiAgICAgICAgICAgICAgJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGlzYWJsZVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb259LnZhbHVlYF0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGlzYWJsZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKGRpc2FibGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmFjdG9yLmVmZmVjdHMubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdXNlZCBmb3IgZGV2IHB1cnBvc2VzIG9ubHkgIVxuICAgICAqL1xuICAgIGh0bWwuZmluZCgnLnRlc3QtdHJpZ2dlcicpLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHtcbiAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpKSByZXR1cm4gbnVsbFxuICAgICAgLy8gYXdhaXQgSXRlbS5jcmVhdGUoe1xuICAgICAgLy8gICBuYW1lOiAnX19Db0M3SW50ZXJuYWxJdGVtX18nLFxuICAgICAgLy8gICB0eXBlOiAnaXRlbSdcbiAgICAgIC8vIH0pXG4gICAgICAvLyBjb25zdCBlZmZlY3RzID0gYXdhaXQgaXRlbS5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgLy8gICB7XG4gICAgICAvLyAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgIC8vICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgIC8vICAgICBvcmlnaW46IG51bGwsXG4gICAgICAvLyAgICAgJ2R1cmF0aW9uLnJvdW5kcyc6IHVuZGVmaW5lZCxcbiAgICAgIC8vICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgLy8gICB9XG4gICAgICAvLyBdKVxuICAgICAgLy8gY29uc3QgZWZmZWN0ID0gZWZmZWN0c1swXVxuICAgICAgLy8gYXdhaXQgZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZWZmZWN0IGNyZWF0ZWQgIScpXG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgIH0pXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwU2tpbGxFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBBdHRyaWJ1dGVFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdXRvLXRvZ2dsZScpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBBdXRvRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1jb250cm9sLmRldmVsb3BtZW50LWZsYWcnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50LmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcblxuICAgIC8vIEFjdGl2ZSBFZmZlY3RzXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5hY3RvcikpXG4gIH1cblxuICB0b29sVGlwU2tpbGxFbnRlciAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCB0b29sVGlwID0gZ2FtZS5hY3RvcnMuZG9jdW1lbnRDbGFzcy50b29sVGlwU2tpbGxUZXh0KClcbiAgICAgICAgaWYgKHRvb2xUaXAgIT09IGZhbHNlKSB7XG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hhciA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuY2hhci1ib3gnKVxuICAgICAgICAgIGlmICh0eXBlb2YgY2hhciAhPT0gJ3VuZGVmaW5lZCcgJiYgISFjaGFyKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFySWQgPSBjaGFyLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gc2hlZXQuYWN0b3IuY2hhcmFjdGVyaXN0aWNzW2NoYXJJZF1cbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgIHNraWxsOiBjaGFyYWN0ZXJpc3RpYy5sYWJlbCxcbiAgICAgICAgICAgICAgcmVndWxhcjogY2hhcmFjdGVyaXN0aWMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgaGFyZDogY2hhcmFjdGVyaXN0aWMuaGFyZCA/PyAwLFxuICAgICAgICAgICAgICBleHRyZW1lOiBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID8/IDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICB0b29sVGlwQXR0cmlidXRlRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgYXR0cmliID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKVxuICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmliICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlSWQgPSBhdHRyaWIuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gJydcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBzaGVldC5hY3Rvci5zeXN0ZW0uYXR0cmlic1thdHRyaWJ1dGVJZF1cbiAgICAgICAgICAgIHN3aXRjaCAoYXR0cmlidXRlSWQpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbGNrJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBza2lsbDogYXR0cmlidXRlcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdkYic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwREInKVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnc2FuJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2FuaXR5Jywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6ICdTYW5pdHknLFxuICAgICAgICAgICAgICAgICAgcmVndWxhcjogYXR0cmlidXRlcy52YWx1ZSA/PyAwLFxuICAgICAgICAgICAgICAgICAgaGFyZDogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDIpLFxuICAgICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEtlZXBlclNhbml0eScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF1dG9FbnRlciAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwQXV0b1RvZ2dsZScpXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbElkID0gaXRlbS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gc2hlZXQuYWN0b3IuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgICAgICAgICBjb25zdCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGxGbGFnVG9nZ2xlJywge1xuICAgICAgICAgICAgICBzdGF0dXM6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50XG4gICAgICAgICAgICAgICAgICA/ICdDb0M3LlRvb2xUaXBTa2lsbEZsYWdnZWQnXG4gICAgICAgICAgICAgICAgICA6ICdDb0M3LlRvb2xUaXBTa2lsbFVuZmxhZ2dlZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICBfb25Db250ZXh0TWVudUNsaWNrIChldmVudCwgdGFyZ2V0KSB7XG4gICAgY29uc3QgdGFyZ2V0VHlwZSA9IHRhcmdldC5kYXRhc2V0Py50YXJnZXRUeXBlXG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfVxuICAgIHN3aXRjaCAodGFyZ2V0VHlwZSkge1xuICAgICAgY2FzZSAoJ3NraWxsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICByb2xsT3B0aW9ucy5za2lsbElkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuc2tpbGxJZFxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY2hhcmFjdGVyaXN0aWMnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgIHJvbGxPcHRpb25zLmNoYXJhY3RlcmlzdGljID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFyLWJveCcpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAoJ2F0dHJpYnV0ZScpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmF0dHJpYnV0ZSA9IHRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICgncm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnb3Bwb3NlZC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29tYmluZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdyZXF1ZXN0LXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICByb2xsT3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnbGluay10b29sJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLm9wZW5MaW5rVG9vbCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdzZW5kLWNoYXQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnbGluay1lbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2VuY291bnRlcicpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgcm9sbE9wdGlvbnMuZmFzdEZvcndhcmQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIocm9sbE9wdGlvbnMpXG4gIH1cblxuICBfb25SZW5kZXJJdGVtU2hlZXQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXG4gICAgICBzY2VuZTogbnVsbCxcbiAgICAgIGFjdG9yVG86IHRoaXMuYWN0b3IuaWQsXG4gICAgICBpdGVtOiBpdGVtLmlkXG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuPy5hY3Rvcikge1xuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICB9XG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZS5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgdmlzaWJsZSA9IHZpc2libGUgfHwgdiAhPT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2aXNpYmxlXG4gICAgfSlcbiAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb250ZW50ID1cbiAgICAgICAgY29udGVudCArICc8b3B0aW9uIHZhbHVlPVwiJyArIGFjdG9yLmlkICsgJ1wiPicgKyBhY3Rvci5uYW1lICsgJzwvb3B0aW9uPidcbiAgICB9XG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgbWVzc2FnZS5hY3RvclRvID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RVc2VyVG9HaXZlVG8nKSxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIGNvbmZpcm06IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAnY29uZmlybScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICAgIGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ210cmFkZWl0ZW10bycsIG1lc3NhZ2UpXG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgc3VwZXIuX29uRHJhZ1N0YXJ0KGV2ZW50KVxuICAgIGlmICh0aGlzLnRva2VuKSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSlcbiAgICAgIGRyYWdEYXRhLnRva2VuVXVpZCA9IHRoaXMudG9rZW4udXVpZFxuICAgICAgZHJhZ0RhdGEudG9rZW5JZCA9IHRoaXMudG9rZW4uaWRcbiAgICAgIGRyYWdEYXRhLnNjZW5lSWQgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfVxuICB9XG5cbiAgX29uRHJhZ0NoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICBjaGVjazogJ2NoZWNrJyxcbiAgICAgIHR5cGU6ICdDb0M3TGluaycsXG4gICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgbmFtZTogYm94LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWMsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnQXR0cmlidXRlIChldmVudCkge1xuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmF0dHJpYixcbiAgICAgIGljb246IG51bGwsXG4gICAgICBkb2N1bWVudDoge1xuICAgICAgICB0eXBlOiB0aGlzLmRvY3VtZW50LnR5cGUsXG4gICAgICAgIHV1aWQ6IHRoaXMuZG9jdW1lbnQudXVpZFxuICAgICAgfVxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIF9vbkRyYWdTYW5DaGVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzYW5NaW4gPSBldmVudC5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5zYW4tdmFsdWUucGFzcycpXG4gICAgY29uc3Qgc2FuTWF4ID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLmZhaWxlZCcpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIENvQzdUeXBlOiAnbGluaycsXG4gICAgICBsaW5rVHlwZTogJ2NvYzctbGluaycsXG4gICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIHNhbk1pbjogc2FuTWluLmlubmVyVGV4dCxcbiAgICAgIHNhbk1heDogc2FuTWF4LmlubmVyVGV4dCxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBkb2N1bWVudDoge1xuICAgICAgICB0eXBlOiB0aGlzLmRvY3VtZW50LnR5cGUsXG4gICAgICAgIHV1aWQ6IHRoaXMuZG9jdW1lbnQudXVpZFxuICAgICAgfVxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBpZiAoZGF0YVN0cmluZyA9PT0gJycpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdDb0M3TGluaycpIHtcbiAgICAgIGlmIChkYXRhLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayh0aGlzLmFjdG9yLCBkYXRhKVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci5fb25Ecm9wKGV2ZW50KVxuICB9XG5cbiAgYXN5bmMgX29uQ29uZGl0aW9uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvbmRpdGlvbikge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci50b2dnbGVDb25kaXRpb24oZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvbmRpdGlvbilcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXZpdmUgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgYXN5bmMgaGVhbCAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmFjdG9yLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICB9XG5cbiAgYXN5bmMgY2hlY2tGb3JEZWF0aCAoZXZlbnQpIHtcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICB0aGlzLmFjdG9yLmlzVG9rZW4gPyB0aGlzLmFjdG9yLnRva2VuS2V5IDogdGhpcy5hY3Rvci5pZFxuICAgIClcbiAgICBjb25DaGVjay5zdGF5QWxpdmUgPSB0cnVlXG4gICAgY29uQ2hlY2sudG9NZXNzYWdlKGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgYXN5bmMgX29uRHJhZ1Rva2VuU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6ICdUb2tlbicsXG4gICAgICB1dWlkOiB0aGlzLnRva2VuLnV1aWRcbiAgICB9XG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRDb3VudGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0RGFpbHlTYW5pdHkoKVxuICB9XG5cbiAgYXN5bmMgX29uQXV0b1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykpIHtcbiAgICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICB0aGlzLmFjdG9yLnRvZ2dsZUF0dHJpYkF1dG8oYXR0cmliKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIClcbiAgICBpZiAod2VhcG9uKSB7XG4gICAgICB3ZWFwb24udG9nZ2xlUHJvcGVydHkoXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSxcbiAgICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJvbGwgdGhlIGFjdG9yIGNoYXJhY3RlcmlzdGljIGZyb20gZm9ybXVsYSB3aGVuIHBvc3NpYmxlLlxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIHRoaXMuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgICBIb29rcy5jYWxsKCdhY3RvckxvY2tDbGlja2VkQ29DNycsIFshaXNMb2NrZWRdKVxuICB9XG5cbiAgYXN5bmMgX29uRmxhZ0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGZsYWdOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZyhmbGFnTmFtZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZvcm11bGFDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICB9XG5cbiAgYXN5bmMgX29uV2hlZWwgKGV2ZW50KSB7XG4gICAgbGV0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSkgfHwgbnVsbFxuICAgIGlmIChldmVudC5kZWx0YVkgPiAwKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlID09PSAwID8gMCA6IHZhbHVlIC0gMVxuICAgIH1cblxuICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlICsgMVxuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0SHAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldFNhbih2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0THVjayh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIF90b2dnbGVSZWFkT25seSAoZXZlbnQpIHtcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5ID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHlcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3JlYWQtb25seScpXG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiB7XG4gICAgICAgIHN1bW1hcnkucmVtb3ZlKClcbiAgICAgICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxuXG4gICAgICBjb25zdCBsYWJlbHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbHNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLmxhYmVscykge1xuICAgICAgICBsYWJlbHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbFwiPjxzcGFuIGNsYXNzPVwibGFiZWwtbmFtZVwiPiR7cC5uYW1lfSA6PC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwtdmFsdWVcIj4ke3AudmFsdWV9PC9zcGFuPjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChsYWJlbHMpXG5cbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgICQoYDxkaXYgY2xhc3M9XCJpdGVtLWRlc2NyaXB0aW9uXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi52YWx1ZX08L2Rpdj5gKVxuICAgICAgKVxuXG4gICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDAsICgpID0+IGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxuICAgIH1cbiAgICAvLyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uU2VjdGlvbkhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbGV0IHNlY3Rpb24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ3NlY3Rpb24nKSxcbiAgICAvLyAgcGFubmVsQ2xhc3MgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoJ3Bhbm5lbCcpLFxuICAgIC8vICBwYW5uZWwgPSBzZWN0aW9uLmZpbmQoIGAuJHtwYW5uZWxDbGFzc31gKTtcbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnc2VjdGlvbicpXG4gICAgY29uc3QgcGFubmVsQ2xhc3MgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucGFubmVsXG4gICAgaWYgKHR5cGVvZiBwYW5uZWxDbGFzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVyblxuICAgIGNvbnN0IHBhbm5lbCA9ICQoc2VjdGlvbikuZmluZChgLnBhbm5lbC4ke3Bhbm5lbENsYXNzfWApXG5cbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XG4gICAgaWYgKHBhbm5lbC5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgLy8gQ291bGQgcmVtb3ZlIGV4cGFuZGVkIGNsYXNzIGFuZCB1c2UgKHBhbm5lbC5pcygnOnZpc2libGUnKSlcbiAgICAgIHBhbm5lbC5zbGlkZVVwKDIwMCwgKCkgPT4gcGFubmVsLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxuICAgIH0gZWxzZSB7XG4gICAgICBwYW5uZWwuc2xpZGVEb3duKDIwMCwgKCkgPT4gcGFubmVsLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxuICAgIH1cblxuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoYGRhdGEucGFubmVsLiR7cGFubmVsQ2xhc3N9LmV4cGFuZGVkYClcblxuICAgIHRoaXMuYWN0b3IudXBkYXRlKFxuICAgICAgeyBbY2FtZWxGbGFnXTogIXBhbm5lbC5oYXNDbGFzcygnZXhwYW5kZWQnKSB9LFxuICAgICAgeyByZW5kZXI6IGZhbHNlIH0pXG4gIH1cblxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnbGknKVxuICAgIGlmIChsaS5pcygnOnZpc2libGUnKSkgbGkuc2xpZGVVcCgyMDApXG4gICAgZWxzZSBsaS5zbGlkZURvd24oMjAwKVxuICB9XG5cbiAgX29uSXRlbUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb2wgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLm5leHQoJ29sJylcbiAgICBpZiAob2wuaXMoJzp2aXNpYmxlJykpIG9sLnNsaWRlVXAoMjAwKVxuICAgIGVsc2Ugb2wuc2xpZGVEb3duKDIwMClcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1Qb3B1cCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuXG4gICAgQ29DN0FjdG9yU2hlZXQucG9wdXBTa2lsbChpdGVtKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHBvcHVwU2tpbGwgKHNraWxsKSB7XG4gICAgc2tpbGwuc3lzdGVtLmRlc2NyaXB0aW9uLmVucmljaGVkVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBza2lsbC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7IGFzeW5jOiB0cnVlIH1cbiAgICApXG4gICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyhcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbERldGFpbHNXaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogc2tpbGwsXG4gICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdza2lsbCddLFxuICAgICAgICB3aWR0aDogNTIwLFxuICAgICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgICAgc2Nyb2xsWTogWycuaXRlbS1kZXNjcmlwdGlvbiddLFxuICAgICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1kZXRhaWxzLmh0bWwnXG4gICAgICB9XG4gICAgKVxuICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBvZiBhbiBpdGVtIGZyb20gdGhlIEFjdG9yIHNoZWV0LCBvYnRhaW5pbmcgdGhlIEl0ZW0gaW5zdGFuY2UgYW5kIGRpc3BhdGNoaW5nIHRvIGl0J3Mgcm9sbCBtZXRob2RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vbkl0ZW1Sb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWQ7XG4gICAgLy8gY29uc3QgYWN0b3JJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZDtcbiAgICAvLyBjb25zdCB0b2tlbktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZDtcbiAgICAvLyBsZXQgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKCk7XG5cbiAgICAvLyBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleTtcbiAgICAvLyBjaGVjay5pdGVtID0gaXRlbUlkO1xuICAgIC8vIGNoZWNrLnJvbGwoKTtcbiAgICAvLyBjaGVjay50b01lc3NhZ2UoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbkVmZmVjdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWZmZWN0SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5lZmZlY3RJZFxuICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuYWN0b3IuZWZmZWN0cy5nZXQoZWZmZWN0SWQpXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUoeyB0eXBlOiAnQ29DN0xpbmsnLCBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QsIG9iamVjdDogZWZmZWN0IH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgZmFzdEZvcndhcmQgPSBldmVudC5zaGlmdEtleVxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAvLyBjb25zdCBhY3RvcktleSA9ICF0aGlzLnRva2VuPyB0aGlzLmFjdG9yLmFjdG9yS2V5IDogYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8qKiAqIE1PRElGIDAuOC54ICoqKi9cbiAgICBsZXQgYWN0b3JLZXlcbiAgICBpZiAoIXRoaXMudG9rZW4pIGFjdG9yS2V5ID0gdGhpcy5hY3Rvci5pZFxuICAgIC8vIFNoZWV0IHdhcyBvcGVuZWQgZnJvbSBhY3RvciBkaXJlY3RvcnlcbiAgICBlbHNlIHtcbiAgICAgIC8vIE9wZW5lZCBmcm9tIHRva2VuXG4gICAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuICYmIGdhbWUuYWN0b3JzLnRva2Vuc1t0aGlzLnRva2VuLmlkXSkge1xuICAgICAgICBhY3RvcktleSA9IGBUT0tFTi4ke3RoaXMudG9rZW4uaWR9YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgJHt0aGlzLnRva2VuLnBhcmVudC5pZH0uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgIGNoZWNrOiBDb0M3TGluay5DSEVDS19UWVBFLklURU0sXG4gICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lXG4gICAgICB9XG4gICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKGxpbmtEYXRhLCB7IGFjdG9yczogW3RoaXMuYWN0b3JdIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9jZWVkV2l0aG91dFRhcmdldFxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPD0gMCkge1xuICAgICAgICBwcm9jZWVkV2l0aG91dFRhcmdldCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1RhcmdldFNlbGVjdGVkJywge1xuICAgICAgICAgICAgICB3ZWFwb246IHdlYXBvbi5uYW1lXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJ11cbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMCB8fCBwcm9jZWVkV2l0aG91dFRhcmdldCkge1xuICAgICAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25SZWxvYWRXZWFwb24gKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5yZWxvYWQoKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uYWRkQnVsbGV0KClcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24uc2V0QnVsbGV0cygwKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uc2hvb3RCdWxsZXRzKDEpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQW1vIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gIH1cblxuICBhc3luYyBfb25XZWFwb25Ta2lsbFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcbiAgICBjb25zdCB0b2tlbktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZFxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoKVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHVzYWdlLmdldCgnYm9udXNEaWNlJylcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbElkXG4gICAgY2hlY2suaXRlbSA9IGl0ZW1JZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBIQUNLOiBqdXN0IHRvIHBvcCB0aGUgYWR2YW5jZWQgcm9sbCB3aW5kb3dcbiAgICAvLyBjaGVjay5pdGVtLnJvbGwoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvbkRhbWFnZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCByYW5nZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1kYW1hZ2UnKS5kYXRhc2V0LnJhbmdlXG4gICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXksXG4gICAgICByYW5nZVxuICAgIH0pXG4gICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSB0aGlzLmFjdG9yLnRva2VuS2V5XG4gICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gaXRlbUlkXG4gICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgIC8vIGNvbnNvbGUubG9nKCAnV2VhcG9uIGRhbWFnZSBDbGlja2VkJyk7XG4gIH1cblxuICBhc3luYyBfb25PcHBvc2VkUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliID09PSAnZGInKSByZXR1cm5cblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQsXG4gICAgICBldmVudCxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtbGFiZWwnKSkge1xuICAgICAgZGF0YS5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtbGFiZWwnKSkge1xuICAgICAgZGF0YS5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmFsdEtleSkge1xuICAgICAgZGF0YS5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURcbiAgICB9XG5cbiAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihkYXRhKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQCAgcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZsYWdnZWQ0ZGV2JykpIHJldHVyblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRydWUsXG4gICAgICAgIGNoYXJhY3RlcmlzdGljOiBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGFyLWJveCcpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWMsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIGV2ZW50LFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQXR0cmliVGVzdCAoZXZlbnQpIHtcbiAgICAvLyBGTEFUTU9ESUZJRVJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYXR0cmliID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXG4gICAgaWYgKGF0dHJpYiA9PT0gJ2RiJykge1xuICAgICAgaWYgKFxuICAgICAgICAhL14tezAsMX1cXGQrJC8udGVzdChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaWYgKCFpc05hTihyLnRvdGFsKSAmJiAhKHIudG90YWwgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c0RhbWFnZVJvbGwnKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRydWUsXG4gICAgICAgIGF0dHJpYnV0ZTogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSxcbiAgICAgICAgY2FyZFR5cGU6XG4gICAgICAgIGV2ZW50LmFsdEtleSAmJiBhdHRyaWIgPT09ICdzYW4nXG4gICAgICAgICAgPyBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICAgIDogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIGV2ZW50LFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uUm9sbFNraWxsVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBza2lsbElkOiBldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWQsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIGV2ZW50LFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIHtcblxuICAvLyAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgLy8gIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7ZWRpdG9yczogdGhpcy5lZGl0b3JzfSk7XG4gIC8vICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XG4gIC8vICBpZiAoIHVwZGF0ZURhdGEgKSBkYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKTtcbiAgLy8gIGVsc2UgZGF0YSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpO1xuXG4gIC8vICAvLyBIYW5kbGUgRGFtYWdlIGFycmF5XG4gIC8vICBjb25zdCBkYW1hZ2UgPSBkYXRhLmRhdGE/LmRhbWFnZTtcbiAgLy8gIGlmICggZGFtYWdlICkgZGFtYWdlLnBhcnRzID0gT2JqZWN0LnZhbHVlcyhkYW1hZ2U/LnBhcnRzIHx8IHt9KS5tYXAoZCA9PiBbZFswXSB8fCAnJywgZFsxXSB8fCAnJ10pO1xuXG4gIC8vICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgLy8gIHJldHVybiBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QoZGF0YSk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ191cGRhdGVPYmplY3QnKTtcbiAgICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggICBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSBDZi4gc2hlZXQuanMoMjQzKVxuICAgIGNvbnN0IG92ZXJyaWRlcyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdCh0aGlzLmFjdG9yLm92ZXJyaWRlcylcbiAgICBjb25zdCBuYW1lID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/Lm5hbWVcbiAgICBpZiAobmFtZSAmJiBvdmVycmlkZXMgJiYgb3ZlcnJpZGVzW25hbWVdKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRWZmZWN0QXBwbGllZENhbnRPdmVycmlkZScsIHsgbmFtZSB9KVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmICh0aGlzLm9iamVjdC5pbWcgIT09IGZvcm1EYXRhLmltZyAmJiAodGhpcy5vYmplY3QudG9rZW4gPz8gdGhpcy5vYmplY3QucHJvdG90eXBlVG9rZW4pLnRleHR1cmUuc3JjID09PSBDb0NBY3Rvci5kZWZhdWx0SW1nKHRoaXMub2JqZWN0LnR5cGUpKSB7XG4gICAgICAvLyBJbWFnZSB3YXMgY2hhbmdlZCBhbmQgaXQgd2FzIHRoZSBkZWZhdWx0LCBzbyBhbHNvIHVwZGF0ZSB0aGUgdG9rZW4gaW1hZ2VcbiAgICAgIGlmICh0aGlzLm9iamVjdC50b2tlbikge1xuICAgICAgICB0aGlzLm9iamVjdC50b2tlbi51cGRhdGUoe1xuICAgICAgICAgICd0ZXh0dXJlLnNyYyc6IGZvcm1EYXRhLmltZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vYmplY3QucHJvdG90eXBlVG9rZW4udXBkYXRlKHtcbiAgICAgICAgICAndGV4dHVyZS5zcmMnOiBmb3JtRGF0YS5pbWdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtYWRqdXN0bWVudCcpKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgPyBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogbnVsbFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3JlZGl0LXJhdGluZycpID09PSBpdGVtLm5hbWUgJiYgdHlwZW9mIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtPy5jcmVkaXRSYXRpbmc/Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxuICAgICAgICAgICAgICAgIChpdGVtLnZhbHVlIHx8IDApIC1cbiAgICAgICAgICAgICAgICAoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgfHwgMClcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlID5cbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXgpIHx8XG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DcmVkaXRPdXRPZlJhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBtaW46IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIFRPRE8gOiBjaGVjayB3aHkgU0FOIG9ubHkgP1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFNhbihcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVUZXh0QXJlYShldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi12YWx1ZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZUJpb1RpdGxlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCducGMtc2tpbGwtc2NvcmUnKSkge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLW5hbWUnKSB8fFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge31cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1mb3JtdWxhJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlIHNraWxsIGFzc29jacOpIGEgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tc2tpbGwnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uICYmIHNraWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xuICAgICAgICAgICAgICBjYXNlICdtYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdhbHRlcm5hdGl2JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlIG5vbSBkZSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnJhbmdlLm5vcm1hbCAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIC8vIHRlc3RlIGxhIHZhbGlkaXTDqSBkZSBsYSBmb3JtdWxlLlxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TlBDU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgc2hlZXREYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcbiAgICBzaGVldERhdGEuZGlzcGxheUZvcm11bGEgPSAodGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJykgfHwgZmFsc2UpXG5cbiAgICBzaGVldERhdGEuaGFzU2FuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXG4gICAgc2hlZXREYXRhLmhhc01wID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgIT09IG51bGxcbiAgICBzaGVldERhdGEuaGFzTHVjayA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkucGVyc29uYWxEZXNjcmlwdGlvbj8udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHNhbmxvc3NNZW51ID0ge1xuICAgICAgICBpZDogJ3Nhbi1sb3NzLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuXG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FubG9zc0NvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICBzYW5sb3NzQ29udGV4dE1lbnUuYmluZChzYW5sb3NzTWVudSwgaHRtbCwgdGhpcy5fb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgdGhpcy5tZW51cy5wdXNoKHNhbmxvc3NDb250ZXh0TWVudSlcbiAgICB9XG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXNhbicpLmNsaWNrKHRoaXMuX29uU2FuQ2hlY2suYmluZCh0aGlzKSlcbiAgICAvLyBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgLy8gICBodG1sXG4gICAgLy8gICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgLy8gICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgLy8gfVxuICB9XG5cbiAgYXN5bmMgX29uU2FuTG9zc0NvbnRleHRNZW51Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIsXG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGV2ZW50LFxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NsaXBib2FyZCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllclxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLm1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbkRhdGEgPSB7XG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL25wYy1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgbWluaW1pemFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1zY29yZScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSxcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGZvcmNlQXV0byAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5oZWlnaHQoJ2F1dG8nKVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnkgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vbnBjLXNoZWV0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0NyZWF0dXJlU2hlZXQgZXh0ZW5kcyBDb0M3TlBDU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IHRydWVcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUxvc3NUeXBlRGlhbG9nVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3Nhbml0eS1sb3NzLXR5cGUuaGJzJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBkYXRhLmlzSW1tdW5pdHkgPSBkYXRhLm9iamVjdC50eXBlID09PSAnaW1tdW5pdHknXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRpYWxvZy1idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uID09PSAnYWRkJykge1xuICAgICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICAgIGNvbnN0IHR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICAgIGNvbnN0IG5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaHRtbC5maW5kKCcuZmllbGRfdmFsdWUnKS52YWwoKSlcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPVxuICAgICAgICB0aGlzLm9iamVjdC5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgdG90YWxMb3NzOiB2YWx1ZSxcbiAgICAgICAgaW1tdW5pdHk6IHR5cGUgPT09ICdpbW11bml0eSdcbiAgICAgIH0pXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgfSlcbiAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBfb25TZWxlY3RDaGFuZ2UgKGV2ZW50KSB7XG4gICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICB0aGlzLm9iamVjdC5uYW1lID0gaHRtbC5maW5kKCcuZmllbGRfbmFtZScpLnZhbCgpXG4gICAgdGhpcy5vYmplY3QudHlwZSA9IGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS52YWwoKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHt9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9udEZhY2UsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlciB9IGZyb20gJy4uLy4uL2FwcHMvY3JlYXRlLW15dGhvcy1lbmNvdW50ZXJzLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXJhY3RlclNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gJ0NvQzdDaGFyYWN0ZXJTaGVldCcpIHtcbiAgICAgIGlmICghdGhpcy5zdW1tYXJpemVkKSB0aGlzLnN1bW1hcml6ZWQgPSBmYWxzZVxuICAgICAgbGV0IGJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgICBidXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWF4aW1pemUnKVxuICAgICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VtbWFyaXplJyksXG4gICAgICAgICAgY2xhc3M6ICd0ZXN0LWV4dHJhLWljb24nLFxuICAgICAgICAgIGljb246IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyAnZmFzIGZhLXdpbmRvdy1tYXhpbWl6ZSdcbiAgICAgICAgICAgIDogJ2ZhcyBmYS13aW5kb3ctbWluaW1pemUnLFxuICAgICAgICAgIG9uY2xpY2s6IGV2ZW50ID0+IHRoaXMudG9nZ2xlU2hlZXRNb2RlKGV2ZW50KVxuICAgICAgICB9LyogLFxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIGNsYXNzOiAnZHJhZy10ZXN0LXRoaW5neScsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZDEwJyxcbiAgICAgICAgICBvbmRyYWdzdGFydDogKCkgPT4gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdkcmFnIHN0YXJ0ZWQnKVxuICAgICAgICB9ICovXG4gICAgICBdLmNvbmNhdChidXR0b25zKVxuICAgICAgcmV0dXJuIGJ1dHRvbnNcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNoZWV0TW9kZSAoZXZlbnQpIHtcbiAgICB0aGlzLnN1bW1hcml6ZWQgPSAhdGhpcy5zdW1tYXJpemVkXG4gICAgbGV0IG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShDb0M3Q2hhcmFjdGVyU2hlZXQuZGVmYXVsdE9wdGlvbnMpXG4gICAgaWYgKHRoaXMuc3VtbWFyaXplZCkge1xuICAgICAgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3B0aW9ucywge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0b3InLCAnY2hhcmFjdGVyJywgJ3N1bW1hcml6ZWQnXSxcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgIHdpZHRoOiA3MDBcbiAgICAgIH0pXG4gICAgfVxuICAgIG9wdGlvbnMudG9rZW4gPSB0aGlzLm9wdGlvbnMudG9rZW5cbiAgICBhd2FpdCB0aGlzLmNsb3NlKClcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXG4gICAgICB0eXBlb2YgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJywgZmFsc2UpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJywgdHJ1ZSlcbiAgICB9XG4gICAgc2hlZXREYXRhLnNraWxsTGlzdE1vZGVWYWx1ZSA9XG4gICAgICB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpID8/IGZhbHNlXG4gICAgc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uID1cbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID8/IHRydWVcbiAgICBzaGVldERhdGEuc2hvd0ljb25zT25seSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJY29uc09ubHknKVxuXG4gICAgaWYgKHRoaXMuYWN0b3Iub2NjdXBhdGlvbikge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb24ubmFtZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb25TZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmFjdG9yLmFyY2hldHlwZSkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlLm5hbWVcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnRvdGFsRXhwZXJpZW5jZSA9IHRoaXMuYWN0b3IuZXhwZXJpZW5jZVBvaW50c1xuICAgIHNoZWV0RGF0YS50b3RhbE9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkT2NjdXBhdGlvblBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5vY2N1cGF0aW9uKVxuICAgIHNoZWV0RGF0YS50b3RhbEFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZEFyY2hldHlwZVBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LmFyY2hldHlwZSlcbiAgICBzaGVldERhdGEudG90YWxQZXJzb25hbCA9IHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkUGVyc29uYWxQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LnBlcnNvbmFsKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNYXggPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNaW4gPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWluXG4gICAgKVxuICAgIHNoZWV0RGF0YS5pbnZhbGlkQ3JlZGl0UmF0aW5nID1cbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA+XG4gICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4IHx8XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPFxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01pblxuICAgIHNoZWV0RGF0YS5wdWxwVGFsZW50Q291bnQgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgID8gc2hlZXREYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEubWluUHVscFRhbGVudHMgPSB0aGlzLmFjdG9yLmFyY2hldHlwZT8uc3lzdGVtLnRhbGVudHNcbiAgICAgID8gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LnN5c3RlbS50YWxlbnRzXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEuaW52YWxpZFB1bHBUYWxlbnRzID0gc2hlZXREYXRhLnB1bHBUYWxlbnRDb3VudCA8IHNoZWV0RGF0YS5taW5QdWxwVGFsZW50c1xuXG4gICAgc2hlZXREYXRhLmhhc0RldmVsb3BtZW50UGhhc2UgPSB0aGlzLmFjdG9yLmhhc0RldmVsb3BtZW50UGhhc2VcblxuICAgIHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJylcbiAgICBzaGVldERhdGEuYWxsb3dDaGFyQ3JlYXRpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICBzaGVldERhdGEuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXG4gICAgKVxuICAgIHNoZWV0RGF0YS5zaG93RGV2UGFubmVsID0gc2hlZXREYXRhLmFsbG93RGV2ZWxvcG1lbnQgfHwgc2hlZXREYXRhLmFsbG93Q2hhckNyZWF0aW9uXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeUZvcm1hdHMpIHtcbiAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlGb3JtYXRzW2tleV0pIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dDdXJyZW5jeVN5bWJvbCA9IFsnZGVjaW1hbExlZnQnLCAnZGVjaW1hbFJpZ2h0JywgJ2ludGVnZXJMZWZ0JywgJ2ludGVnZXJSaWdodCddLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlUeXBlcykge1xuICAgICAgaWYgKENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5sZW5ndGggPT09IDAgfHwgQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpKSB7XG4gICAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5uYW1lKSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5tYW51YWxDcmVkaXQgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnbWFudWFsQ3JlZGl0JylcbiAgICBpZiAoIXNoZWV0RGF0YS5tYW51YWxDcmVkaXQpIHtcbiAgICAgIHNoZWV0RGF0YS5tb25ldGFyeSA9IHtcbiAgICAgICAgc3BlbmRpbmdMZXZlbDogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5zcGVuZGluZ0xldmVsKSxcbiAgICAgICAgYXNzZXRzOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLmFzc2V0cyksXG4gICAgICAgIGNhc2g6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3IuY2FzaClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuc3VtbWFyaXplZCA9IHRoaXMuc3VtbWFyaXplZCAmJiAhc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdCA9IFtdXG4gICAgbGV0IHByZXZpb3VzU3BlYyA9ICcnXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBzaGVldERhdGEuc2tpbGxzKSB7XG4gICAgICBpZiAoc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uIHx8ICFza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5yYXJpdHkpIHtcbiAgICAgICAgaWYgKHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICBpZiAocHJldmlvdXNTcGVjICE9PSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3BlYyA9IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgaXNTcGVjaWFsaXphdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuc2tpbGxMaXN0LnB1c2goc2tpbGwpXG4gICAgICB9XG4gICAgfVxuICAgIHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlID0gWy4uLnNoZWV0RGF0YS5za2lsbHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBiLnN5c3RlbS52YWx1ZSAtIGEuc3lzdGVtLnZhbHVlXG4gICAgfSlcbiAgICBzaGVldERhdGEudG9wU2tpbGxzID0gWy4uLnNoZWV0RGF0YS5za2lsbHNCeVZhbHVlXS5zbGljZSgwLCAxNClcbiAgICBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZSA9IHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlLmZpbHRlcihcbiAgICAgIHNraWxsID0+IHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5XG4gICAgKVxuICAgIHNoZWV0RGF0YS50b3BXZWFwb25zID0gWy4uLnNoZWV0RGF0YS5tZWxlZVdwbiwgLi4uc2hlZXREYXRhLnJhbmdlV3BuXVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlIC0gYi5zeXN0ZW0uc2tpbGwubWFpbj8udmFsdWVcbiAgICAgIH0pXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAuc2xpY2UoMCwgMylcbiAgICBzaGVldERhdGEuZGlzcGxheVBsYXllck5hbWUgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnXG4gICAgKVxuICAgIGlmIChzaGVldERhdGEuZGlzcGxheVBsYXllck5hbWUgJiYgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5wbGF5ZXJuYW1lKSB7XG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJVc2VyXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSA9IHVzZXIubmFtZVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcblxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIF9zYXZlU2Nyb2xsUG9zaXRpb25zIChodG1sKSB7XG4gICAgc3VwZXIuX3NhdmVTY3JvbGxQb3NpdGlvbnMoaHRtbClcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbJy5yaWdodC1wYW5lbCAudGFiLmRldmVsb3BtZW50IG9sJ11cbiAgICB0aGlzLl9zY3JvbGxQb3NpdGlvbnNYID0gc2VsZWN0b3JzLnJlZHVjZSgocG9zLCBzZWwpID0+IHtcbiAgICAgIGNvbnN0IGVsID0gaHRtbC5maW5kKHNlbClcbiAgICAgIHBvc1tzZWxdID0gQXJyYXkuZnJvbShlbCkubWFwKGVsID0+IGVsLnNjcm9sbExlZnQpXG4gICAgICByZXR1cm4gcG9zXG4gICAgfSwge30pXG4gIH1cblxuICBfcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyAoaHRtbCkge1xuICAgIHN1cGVyLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXG4gICAgY29uc3Qgc2VsZWN0b3JzID0gWycucmlnaHQtcGFuZWwgLnRhYi5kZXZlbG9wbWVudCBvbCddXG4gICAgY29uc3QgcG9zaXRpb25zID0gdGhpcy5fc2Nyb2xsUG9zaXRpb25zWCB8fCB7fVxuICAgIGZvciAoY29uc3Qgc2VsIG9mIHNlbGVjdG9ycykge1xuICAgICAgY29uc3QgZWwgPSBodG1sLmZpbmQoc2VsKVxuICAgICAgZWwuZWFjaCgoaSwgZWwpID0+IHsgZWwuc2Nyb2xsTGVmdCA9IHBvc2l0aW9uc1tzZWxdPy5baV0gfHwgMCB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL2luZGV4Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY4NyxcbiAgICAgIGhlaWdodDogNjIzLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycucmlnaHQtcGFuZWwgLnRhYiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICAvLyBNT0RJRjogMC44Lnggb3duZXIgZGVwcmVjYXRlZCAgPT4gaXNPd25lclxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUuZmxhZ2dlZDRkZXYnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25Ta2lsbERldihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtb2NjdXBhdGlvbicpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0T2NjdXBhdGlvbigpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LWFyY2hldHlwZScpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0QXJjaGV0eXBlKCkpXG4gICAgICBodG1sLmZpbmQoJy5vcGVuLWl0ZW0nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZXRhaWxzKGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAgIC8vICAgLmNoYW5nZShhc3luYyBldmVudCA9PntcbiAgICAgIC8vICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAvLyAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIC8vICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoIGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnZhbHVlKVxuICAgICAgLy8gICAgIGlmKCAhaXNOYU4odmFsdWUpKSBhd2FpdCB0aGlzLmFjdG9yLnNldEhwKGV2ZW50KVxuICAgICAgLy8gICAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy53YXJuKCdFcnJvciBwYXJzaW5nIEhQIHZhbHVlJylcbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1saXN0LW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxMaXN0TW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtdW5jb21tb24tbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTa2lsbFVuY29tbW9uTW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1hZGQnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkFkZFNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1kZWxldGUnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcubXl0aG9zRW5jb3VudGVyc1RvdGFsTG9zcycpXG4gICAgICAgICAgLmJsdXIodGhpcy5fb25FZGl0U2FuaXR5TG9zc1JlYXNvbi5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy50b2dnbGUta2VlcGVyLWZsYWdzJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Ub2dnbGVLZWVwZXJGbGFncy5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5hZGQtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vbkFkZE1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25BZGRNb25ldGFyeSAoKSB7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSA6IFtdXG4gICAgdmFsdWVzLnB1c2goe1xuICAgICAgbmFtZTogJycsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBtYXg6IG51bGwsXG4gICAgICBjYXNoVHlwZTogMCxcbiAgICAgIGNhc2hWYWx1ZTogJycsXG4gICAgICBhc3NldHNUeXBlOiAwLFxuICAgICAgYXNzZXRzVmFsdWU6ICcnLFxuICAgICAgc3BlbmRpbmdUeXBlOiAwLFxuICAgICAgc3BlbmRpbmdWYWx1ZTogJydcbiAgICB9KVxuICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnOiB2YWx1ZXMgfSlcbiAgfVxuXG4gIF9vblJlbW92ZU1vbmV0YXJ5IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZGl2ID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgdmFsdWVzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgIHZhbHVlcy5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25Ub2dnbGVLZWVwZXJGbGFncyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZykge1xuICAgICAgY2FzZSAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICAgICAnQ29DNycsXG4gICAgICAgICAgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLFxuICAgICAgICAgICF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWRcbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbXl0aG9zSGFyZGVuZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCAhdGhpcy5hY3Rvci5teXRob3NIYXJkZW5lZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BZGRTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBuZXcgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlcihcbiAgICAgIHtcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IsXG4gICAgICAgIHR5cGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgICB9LFxuICAgICAge31cbiAgICApLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRWRpdFNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3Qgb2Zmc2V0ID0gaW5wdXQuY2xvc2VzdCgnLmZsZXhyb3cnKS5kYXRhKCdvZmZzZXQnKVxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cz8uW29mZnNldF0/LnRvdGFsTG9zcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLmFjdG9yLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKVxuICAgICAgc2FuaXR5TG9zc0V2ZW50c1tvZmZzZXRdLnRvdGFsTG9zcyA9IHBhcnNlSW50KGlucHV0LnZhbCgpLCAxMClcbiAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50cyB9KVxuICAgIH1cbiAgfVxuXG4gIF9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9mZnNldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC5jbG9zZXN0KCcuZmxleHJvdycpXG4gICAgICAuZGF0YSgnb2Zmc2V0JylcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gdGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgIHNhbml0eUxvc3NFdmVudHMuc3BsaWNlKG9mZnNldCwgMSlcbiAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICByZXR1cm4gbGVmdC50eXBlLmxvY2FsZUNvbXBhcmUocmlnaHQudHlwZSlcbiAgICB9KVxuICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50cyB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2tpbGxMaXN0TW9kZSAoZXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAnQ29DNycsXG4gICAgICAnc2tpbGxMaXN0TW9kZScsXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKVxuICAgIClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIChldmVudCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICdDb0M3JyxcbiAgICAgICdza2lsbFNob3dVbmNvbW1vbicsXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJylcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Ta2lsbERldiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGF3YWl0IHRoaXMuYWN0b3IuZGV2ZWxvcFNraWxsKHNraWxsSWQsIGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgX29uSXRlbURldGFpbHMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yW3R5cGVdXG4gICAgaWYgKGl0ZW0pIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0ubW9uZXRhcnk/LnZhbHVlcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IE9iamVjdC52YWx1ZXMoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyB8fCBbXSlcbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2hlZXQgKHNoZWV0LCBodG1sKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgKVxuICAgICAgICAgIC8vIGNvbnN0IGJvcmRlckltYWdlID0gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnKTtcbiAgICAgICAgICAvLyBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScsICcnKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScpICE9PSAnc2xpY2UnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5ocmVmPy5lbmRzV2l0aCgnY29jN2cuY3NzJykpIHtcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQucnVsZXNbaV0uc2VsZWN0b3JUZXh0ID09PSAnLnNoZWV0VjIuY2hhcmFjdGVyIGZvcm0nXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjc3NSdWxlSW5kZXggPSBpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNzc1J1bGVJbmRleCkge1xuICAgICAgICAgICAgICBjb25zdCBDU1NTdHlsZSA9IHN0eWxlU2hlZXQucnVsZXNbY3NzUnVsZUluZGV4XS5zdHlsZVxuICAgICAgICAgICAgICBDU1NTdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYm9yZGVyLWltYWdlJylcbiAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnY29udGFpbic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvbnRhaW4nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdjb3Zlcic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5nc1xuICAgICAgICAgICAgLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGl2ZS1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1zcGVjaWFsaXphdGlvbi1sZW5ndGgnLCAnYXV0bycpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JylcbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpLFxuICAgICAgICAgIHsgd2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBgJHtnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJyl9cHhgXG4gICAgICAgIGlmIChzaXplICE9PSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJykpIHtcbiAgICAgICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2hlZXQuYWN0b3I/LnN5c3RlbS5wYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldC5hY3Rvci5zeXN0ZW0ucGFubmVsKSkge1xuICAgICAgICBjb25zdCBwYW5uZWxDbGFzcyA9IGNoYXRIZWxwZXIuY2FtZWxDYXNlVG9IeXBoZW4oa2V5KVxuICAgICAgICBjb25zdCBwYW5uZWwgPSBodG1sLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuICAgICAgICBpZiAodmFsdWUuZXhwYW5kZWQpIHBhbm5lbC5hZGRDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgICBlbHNlIHBhbm5lbC5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29tYmF0IHtcbiAgc3RhdGljIHJlbmRlckNvbWJhdFRyYWNrZXIgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRDb21iYXQgPSBkYXRhLmNvbWJhdHNbZGF0YS5jdXJyZW50SW5kZXggLSAxXVxuICAgIGlmICghY3VycmVudENvbWJhdCkgcmV0dXJuXG5cbiAgICAvLyBUT0RPIDogU2kgbGUgY29tYmF0IGVzdCBkZWphIGRlYnV0w6kgYXZhbnQgY2hhcmdlbWVudCBsYSBmb25jdGlvbiBkJ2luaXRpYXRpdmUgcG9pbnRlIHZlcnMgbCdhbmNpZW5uZS5cbiAgICAvLyBsYSBmb25jdGlvbiBhdHRyaWJ1w6llIGVzdCBkYXRhLmNvbWJhdC5yb2xsSW5pdGlhdGl2ZVxuICAgIGh0bWwuZmluZCgnLmNvbWJhdGFudCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAvLyBpZiggZ2FtZS5jb21iYXQuc3RhcnRlZCl7XG5cbiAgICAgIGNvbnN0IGNvbWJJZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb21iYXRhbnQtaWQnKVxuICAgICAgY29uc3QgY29tYmF0YW50Q29udHJvbHNEaXYgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY29tYmF0YW50LWNvbnRyb2xzJylcbiAgICAgIC8vIGNvbnN0IGNvbWJhdGFudCA9IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChjb21iSWQpO1xuICAgICAgY29uc3QgY29tYmF0YW50ID0gY3VycmVudENvbWJhdC5jb21iYXRhbnRzLmdldChjb21iSWQpXG5cbiAgICAgIGlmIChjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFjdGl2ZSBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5QdXRHdW5Bd2F5J1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkRyYXdHdW4nXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSA9PT0gJ29wdGlvbmFsJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcpXG4gICAgICApIHtcbiAgICAgICAgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5Jbml0aWF0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLWluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IGluaXRpYXRpdmVUZXN0ID0gdG9rZW5Jbml0aWF0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCByb2xsID1cbiAgICAgICAgICAgIDEwMCAqIGNvbWJhdGFudC5pbml0aWF0aXZlIC0gMTAwICogTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSlcbiAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgncmVndWxhci1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5UmVndWxhcidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnaGFyZC1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5SGFyZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5RXh0cmVtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2NyaXRpY2FsJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5Q3JpdGljYWwnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlIDwgMCkge1xuICAgICAgICBjb25zdCBoNCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1uYW1lJykucXVlcnlTZWxlY3RvcignaDQnKVxuICAgICAgICBjb25zdCBzcGFuID0gZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5pbml0aWF0aXZlJylcbiAgICAgICAgaDQuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIGg0LnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgc3Bhbi5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG5cbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnZGFya3JlZCdcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9ICdibGFjaydcbiAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICB9XG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtaW5pdCcpLmNsaWNrKGV2ZW50ID0+IENvQzdDb21iYXQuX29uVG9nZ2xlR3VuKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGVHdW4gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYnRuLmNsb3Nlc3QoJy5jb21iYXRhbnQnKVxuICAgIGNvbnN0IGMgPSBhd2FpdCBnYW1lLmNvbWJhdC5jb21iYXRhbnRzLmdldChsaS5kYXRhc2V0LmNvbWJhdGFudElkKVxuICAgIGlmIChjLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3SW5pdCA9IGF3YWl0IGMuYWN0b3Iucm9sbEluaXRpYXRpdmUoISFjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpXG4gICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgaWYgKGMuaW5pdGlhdGl2ZSA8IG5ld0luaXQpIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgICB9IGVsc2UgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICB9XG59XG5cbi8qKlxuICogUm9sbCBpbml0aWF0aXZlIGZvciBvbmUgb3IgbXVsdGlwbGUgQ29tYmF0YW50cyB3aXRoaW4gdGhlIENvbWJhdCBlbnRpdHlcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBpZHMgICAgIEEgQ29tYmF0YW50IGlkIG9yIEFycmF5IG9mIGlkcyBmb3Igd2hpY2ggdG8gcm9sbFxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIG1vZGlmeSBob3cgaW5pdGlhdGl2ZSByb2xscyBhcmUgY3JlYXRlZCBvciBwcmVzZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbb3B0aW9ucy5mb3JtdWxhXSAgICAgICAgIEEgbm9uLWRlZmF1bHQgaW5pdGlhdGl2ZSBmb3JtdWxhIHRvIHJvbGwuIE90aGVyd2lzZSB0aGUgc3lzdGVtIGRlZmF1bHQgaXMgdXNlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXBkYXRlVHVybj10cnVlXSAgICAgVXBkYXRlIHRoZSBDb21iYXQgdHVybiBhZnRlciBhZGRpbmcgbmV3IGluaXRpYXRpdmUgc2NvcmVzIHRvIGtlZXAgdGhlIHR1cm4gb24gdGhlIHNhbWUgQ29tYmF0YW50LlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLm1lc3NhZ2VPcHRpb25zPXt9XSAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2l0aCB3aGljaCB0byBjdXN0b21pemUgY3JlYXRlZCBDaGF0IE1lc3NhZ2VzXG4gKiBAcmV0dXJuIHtQcm9taXNlPENvbWJhdD59ICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgQ29tYmF0IGVudGl0eSBvbmNlIHVwZGF0ZXMgYXJlIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcm9sbEluaXRpYXRpdmUgKFxuICBpZHMsXG4gIHsgZm9ybXVsYSA9IG51bGwsIHVwZGF0ZVR1cm4gPSB0cnVlLCBtZXNzYWdlT3B0aW9ucyA9IHt9IH0gPSB7fVxuKSB7XG4gIC8vIEl0ZXJhdGUgb3ZlciBDb21iYXRhbnRzLCBwZXJmb3JtaW5nIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgZWFjaFxuICBjb25zdCB1cGRhdGVzID0gW11cbiAgZm9yIChjb25zdCBbLCBpZF0gb2YgaWRzLmVudHJpZXMoKSkge1xuICAgIC8vIEdldCBDb21iYXRhbnQgZGF0YSAobm9uLXN0cmljdGx5KVxuICAgIGNvbnN0IGNvbWJhdGFudCA9IHRoaXMuY29tYmF0YW50cy5nZXQoaWQpXG5cbiAgICAvLyBQcm9kdWNlIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgdGhlIENvbWJhdGFudFxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBjb21iYXRhbnQuYWN0b3Iucm9sbEluaXRpYXRpdmUoXG4gICAgICAhIWNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpXG4gICAgKVxuICAgIHVwZGF0ZXMucHVzaCh7IF9pZDogaWQsIGluaXRpYXRpdmU6IHJvbGwgfSlcbiAgfVxuICBpZiAoIXVwZGF0ZXMubGVuZ3RoKSByZXR1cm4gdGhpc1xuXG4gIC8vIFVwZGF0ZSBtdWx0aXBsZSBjb21iYXRhbnRzXG4gIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0NvbWJhdGFudCcsIHVwZGF0ZXMpXG5cbiAgcmV0dXJuIHRoaXNcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgSXRlbSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQ0lEQmF0Y2ggZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtYmF0Y2guaGJzJyxcbiAgICAgIHdpZHRoOiA3MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db0NJREZsYWcudGl0bGUnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNsb3NlOiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuZm91bmRLZXlzID0gT2JqZWN0LmtleXMoc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXMpLnJlZHVjZSgob3V0LCBrZXkpID0+IHtcbiAgICAgIG91dC5wdXNoKHsgbmFtZToga2V5LCBrZXk6IHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzW2tleV0gfSlcbiAgICAgIHJldHVybiBvdXRcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgc2hlZXREYXRhLm1pc3NpbmdOYW1lcyA9IE9iamVjdC5rZXlzKHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzKS5yZWR1Y2UoKG91dCwga2V5KSA9PiB7XG4gICAgICBvdXQucHVzaCh7IGtleTogc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXNba2V5XSA/PyAnJywgbmFtZToga2V5LCBjdXN0b206IHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzW2tleV0sIHN1ZmZpeDogc2hlZXREYXRhLm9iamVjdC5taXNzaW5nTmFtZXNba2V5XS5yZXBsYWNlKHRoaXMub2JqZWN0LnN1ZmZpeFJlZ0V4cCwgJycpIH0pXG4gICAgICByZXR1cm4gb3V0XG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5leGlzdGluZycpLmNoYW5nZSh0aGlzLm9uU2V0TmFtZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmZhLXdhbmQtbWFnaWMnKS5jbGljayh0aGlzLm9uQ2xpY2tHdWVzcy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnaW5wdXQnKS5rZXl1cCh0aGlzLm9uS2V5dXAuYmluZCh0aGlzKSlcbiAgfVxuXG4gIG9uU2V0TmFtZSAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW29iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKV0gPSBvYmoudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgb25DbGlja0d1ZXNzIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBuYW1lID0gb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW25hbWVdID0gdGhpcy5vYmplY3QuaWRQcmVmaXggKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKG5hbWUpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIG9uS2V5dXAgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJylcbiAgICB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXNbbmFtZV0gPSB0aGlzLm9iamVjdC5pZFByZWZpeCArIG9iai52YWwoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcikge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnR5cGVOYW1lID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHRoaXMub2JqZWN0LnVwZGF0ZUxpc3QsIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lcylcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnJlc29sdmUodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc1NraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGNvbnN0IGFjdG9ycyA9IHt9XG4gICAgY29uc3Qgc2NlbmVzID0ge31cbiAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVMaXN0KSB7XG4gICAgICB1cGRhdGUuY29jaWRGbGFnLmlkID0gbWlzc2luZ05hbWVzW3VwZGF0ZS5uYW1lXVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLmxhbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcubGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPSAwXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcuZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlLmNvY2lkRmxhZy5lcmFzID0ge31cbiAgICAgIH1cbiAgICAgIGNvbnN0IGZsYWdzID0gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KHsgZmxhZ3M6IHsgQ29DNzogeyBjb2NpZEZsYWc6IHVwZGF0ZS5jb2NpZEZsYWcgfSB9IH0pXG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5zY2VuZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZXNbdXBkYXRlLnNjZW5lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldCh1cGRhdGUuc2NlbmUpXG4gICAgICAgICAgc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPSBzY2VuZS50b09iamVjdCgpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW5PZmZzZXQgPSBzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnMuZmluZEluZGV4KHQgPT4gdC5faWQgPT09IHVwZGF0ZS50b2tlbilcbiAgICAgICAgaWYgKHRva2VuT2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICBjb25zdCBpdGVtT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zW3Rva2VuT2Zmc2V0XS5hY3RvckRhdGEuaXRlbXMuZmluZEluZGV4KGkgPT4gaS5faWQgPT09IHVwZGF0ZS5pdGVtKVxuICAgICAgICAgIGlmIChpdGVtT2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGFuZGVkRmxhZ3MgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChPYmplY3QuZW50cmllcyhmbGFncykucmVkdWNlKChvdXQsIGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChlbnRyeVswXS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICAgICAgb3V0W2VudHJ5WzBdXSA9IGVudHJ5WzFdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIG91dFxuICAgICAgICAgICAgfSwge30pKVxuICAgICAgICAgICAgc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zW3Rva2VuT2Zmc2V0XS5hY3RvckRhdGEuaXRlbXNbaXRlbU9mZnNldF0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdLCBleHBhbmRlZEZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXBkYXRlLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGFjdG9yc1t1cGRhdGUuYWN0b3JdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGFjdG9yc1t1cGRhdGUuYWN0b3JdID0gW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICAgIF9pZDogdXBkYXRlLml0ZW1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhmbGFncykpIHtcbiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgIGl0ZW1ba2V5XSA9IGZsYWdzW2tleV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWN0b3JzW3VwZGF0ZS5hY3Rvcl0ucHVzaChpdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBfaWQ6IHVwZGF0ZS5pdGVtXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZmxhZ3MpKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICBpdGVtW2tleV0gPSBmbGFnc1trZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoaXRlbXMpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhY3RvcnMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBhY3RvcklkIG9mIE9iamVjdC5rZXlzKGFjdG9ycykpIHtcbiAgICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoYWN0b3JzW2FjdG9ySWRdLCB7IHBhcmVudDogZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhzY2VuZXMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBzY2VuZUlkIG9mIE9iamVjdC5rZXlzKHNjZW5lcykpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgc2NlbmUudXBkYXRlKHNjZW5lc1tzY2VuZUlkXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1bGF0ZVNraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpIHtcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICBjb25zdCBhY3RvckRhdGEgPSBhY3Rvci50b09iamVjdCgpXG4gICAgICBpZiAoYWN0b3JEYXRhLml0ZW1zKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMpIHtcbiAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0gaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaXRlbS50b09iamVjdCgpIDogaXRlbVxuICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IuX2lkLFxuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1EYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgY29uc3Qgc2NlbmVEYXRhID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBzY2VuZURhdGEudG9rZW5zID8/IFtdKSB7XG4gICAgICAgIGlmICh0b2tlbi5hY3RvcklkICYmICF0b2tlbi5hY3RvckxpbmspIHtcbiAgICAgICAgICBjb25zdCBhY3RvckRhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0b2tlbi5hY3RvckRhdGEpXG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFjdG9yRGF0YS5pdGVtcyA/PyBbXSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgICBzY2VuZTogc2NlbmVEYXRhLl9pZCxcbiAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbi5faWQsXG4gICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXmlcXC5za2lsbFxcLi8sIHR5cGU6ICdpJywgZXJhOiBmYWxzZSB9KVxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGZvdW5kS2V5c1tpdGVtLm5hbWVdID0gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgfVxuICAgICAgY29uc3QgQ29DSURLZXlzID0gT2JqZWN0LmFzc2lnbihmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLl9mYWxsYmFjay5Db0M3Py5Db0NJREZsYWc/LmtleXMgPz8ge30pLCBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLnRyYW5zbGF0aW9ucy5Db0M3Py5Db0NJREZsYWc/LmtleXMgPz8ge30pKVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gQ29DSURLZXlzKSB7XG4gICAgICAgIGZvdW5kS2V5c1tnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyBrZXkpXSA9IGtleVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIG1pc3NpbmdOYW1lcykge1xuICAgICAgICBpZiAodHlwZW9mIGZvdW5kS2V5c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBtaXNzaW5nTmFtZXNbbmFtZV0gPSBmb3VuZEtleXNbbmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKHR5cGUpIHtcbiAgICBjb25zdCB1cGRhdGVMaXN0ID0gW11cbiAgICBjb25zdCBtaXNzaW5nTmFtZXMgPSB7fVxuICAgIGNvbnN0IGZvdW5kS2V5cyA9IHt9XG4gICAgbGV0IHR5cGVOYW1lID0gJydcbiAgICBsZXQgaWRQcmVmaXggPSAnJ1xuICAgIGxldCBzdWZmaXhSZWdFeHAgPSBudWxsXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIHR5cGVOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgaWRQcmVmaXggPSAnaS5za2lsbC4nXG4gICAgICAgIHN1ZmZpeFJlZ0V4cCA9IC9eaVxcLnNraWxsXFwuL1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGF3YWl0IENvQ0lEQmF0Y2gucG9wdWxhdGVTa2lsbEtleXModXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpXG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDb0NJREJhdGNoKHsgdHlwZU5hbWUsIGlkUHJlZml4LCBzdWZmaXhSZWdFeHAsIHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzLCByZXNvbHZlIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0NJREJhdGNoIH0gZnJvbSAnLi9hcHBzL2NvYy1pZC1iYXRjaC5qcydcblxuZXhwb3J0IGNsYXNzIFVwZGF0ZXIge1xuICBzdGF0aWMgYXN5bmMgY2hlY2tGb3JVcGRhdGUgKCkge1xuICAgIGxldCBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicpXG4gICAgaWYgKGdhbWUuYWN0b3JzLnNpemUgKyBnYW1lLnNjZW5lcy5zaXplICsgZ2FtZS5pdGVtcy5zaXplICsgZ2FtZS5qb3VybmFsLnNpemUgKyBnYW1lLnRhYmxlcy5zaXplID09PSAwKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYWN0b3JzLCBpdGVtcywgam91cm5hbHMsIHJvbGwgdGFibGVzLCBvciBzY2VuZXMgc2tpcCB3b3JsZCB1cGRhdGVcbiAgICAgIHN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgc3lzdGVtVXBkYXRlVmVyc2lvbilcbiAgICB9XG4gICAgY29uc3QgcnVuTWlncmF0ZSA9IGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgc3lzdGVtVXBkYXRlVmVyc2lvbiA/PyAnMCcpXG4gICAgdGhpcy51cGRhdGVkTW9kdWxlcyA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJykgfHwge31cbiAgICB0aGlzLmN1cnJlbnRNb2R1bGVzID0ge31cbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKCFbJ0NvQzcnLCAnd29ybGQnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSAmJiBbJ0FjdG9yJywgJ0l0ZW0nLCAnU2NlbmUnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnR5cGUpKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY3VycmVudE1vZHVsZXMsIHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpKSB7XG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIGNoZWNrIGVhY2ggbW9kdWxlIG9uY2VcbiAgICAgICAgICBjb25zdCBtb2R1bGUgPSBnYW1lLm1vZHVsZXMuZ2V0KHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpXG4gICAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgaWYgKHJ1bk1pZ3JhdGUgfHwgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnVwZGF0ZWRNb2R1bGVzLCBtb2R1bGUuaWQpIHx8IFN0cmluZyh0aGlzLnVwZGF0ZWRNb2R1bGVzW21vZHVsZS5pZF0pICE9PSBTdHJpbmcobW9kdWxlLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgIC8vIEEgbWlncmF0aW9uIGlzIHJlcXVpcmVkLCBtb2R1bGUgaGFzIG5vdCBiZWVuIHVwZGF0ZWQgYmVmb3JlLCBvciB0aGUgdmVyc2lvbiBudW1iZXIgaGFzIGNoYW5nZWQsIGNoZWNrIGFnYWluc3Qga25vd24gZ29vZCB2YWx1ZXNcbiAgICAgICAgICAgICAgY29uc3Qga25vd25Nb2R1bGVWZXJzaW9ucyA9IHtcbiAgICAgICAgICAgICAgICAnY2FsbC1vZi1jdGh1bGh1LWZvdW5kcnl2dHQtaW52ZXN0aWdhdG9yLXdpemFyZCc6ICcxLjAuMycsXG4gICAgICAgICAgICAgICAgJ2NoYS1jb2MtZnZ0dC1lbi1xdWlja3N0YXJ0JzogJzcuMCcsXG4gICAgICAgICAgICAgICAgJ2NoYS1jb2MtZnZ0dC1lbi1zdGFydGVyc2V0JzogJzcuMCdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGtub3duTW9kdWxlVmVyc2lvbnNbbW9kdWxlLmlkXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihtb2R1bGUudmVyc2lvbiwga25vd25Nb2R1bGVWZXJzaW9uc1ttb2R1bGUuaWRdKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kdWxlc1ttb2R1bGUuaWRdID0gbW9kdWxlLnZlcnNpb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kdWxlc1ttb2R1bGUuaWRdID0gbW9kdWxlLnZlcnNpb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocnVuTWlncmF0ZSB8fCBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICA/ICdDb0M3Lk1pZ3JhdGUuTWVzc2FnZSdcbiAgICAgICAgICAgICAgOiAnQ29DNy5NaWdyYXRlLldpdGhNb2R1bGVzTWVzc2FnZScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb24sXG4gICAgICAgICAgICAgIG1vZHVsZXM6XG4gICAgICAgICAgICAgICAgJzx1bD48bGk+JyArXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcylcbiAgICAgICAgICAgICAgICAgIC5tYXAobW9kID0+IGdhbWUubW9kdWxlcy5nZXQobW9kKS50aXRsZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc8L2xpPjxsaT4nKSArXG4gICAgICAgICAgICAgICAgJzwvbGk+PC91bD4nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblVwZGF0ZScpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4gVXBkYXRlci51cGRhdGUoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNraXA6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblNraXAnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgRGlhbG9nKHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuR01SZXF1aXJlZCcsIHtcbiAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb25cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBPSzoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uT2theScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZURvY3VtZW50cygpXG5cbiAgICAvLyAvLyBJZiB3ZSBwdXQgdXAgYSB0ZW1wb3Jhcnkgc2NlbmUgcmV0dXJuIHRoZSB1c2VyIGFuZCByZW1vdmUgaXRcbiAgICAvLyBpZiAoXG4gICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgIT09ICd1bmRlZmluZWQnXG4gICAgLy8gKSB7XG4gICAgLy8gICBhd2FpdCB0aGlzLm9yaWdpbmFsU2NlbmUudmlldygpXG4gICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG4gICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLmRlbGV0ZSgpXG4gICAgLy8gfVxuXG4gICAgLy8gTWlncmF0ZSBTZXR0aW5ncyBpZiBQdWxwIFJ1bGVzIGlzIGVuYWJsZWQgdHVybiBvbiBhbGwgcnVsZXNcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVzJykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRG91YmxlTWF4SGVhbHRoJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZU9yZ2FuaXphdGlvbicsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVGYXN0ZXJSZWNvdmVyeScsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJywgdHJ1ZSlcbiAgICB9XG5cbiAgICBhd2FpdCBDb0NJREJhdGNoLmNyZWF0ZSgnc2tpbGwnKVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMudXBkYXRlZE1vZHVsZXMgfHwge30sIHRoaXMuY3VycmVudE1vZHVsZXMpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nLCBzZXR0aW5ncylcbiAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgZ2FtZS5zeXN0ZW0udmVyc2lvbilcblxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuQ29tcGxldGUnKSwge1xuICAgICAgcGVybWFuZW50OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVEb2N1bWVudHMgKCkge1xuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3JzXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHRoaXMubWlncmF0ZUFjdG9yRGF0YShhY3Rvci50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgQWN0b3IgZG9jdW1lbnQgJHthY3Rvci5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgYWN0b3IudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yQWN0b3InLCB7XG4gICAgICAgICAgbmFtZTogYWN0b3IubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgSXRlbXNcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW0udG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEl0ZW0gZG9jdW1lbnQgJHtpdGVtLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckl0ZW0nLCB7XG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBUYWJsZXNcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIGdhbWUudGFibGVzLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKHRhYmxlLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBUYWJsZSBkb2N1bWVudCAke3RhYmxlLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCB0YWJsZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JUYWJsZScsIHtcbiAgICAgICAgICBuYW1lOiB0YWJsZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBNYWNyb3NcbiAgICBmb3IgKGNvbnN0IG1hY3JvIG9mIGdhbWUubWFjcm9zLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKG1hY3JvLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBNYWNybyBkb2N1bWVudCAke21hY3JvLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBtYWNyby51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JNYWNybycsIHtcbiAgICAgICAgICBuYW1lOiBtYWNyby5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBTY2VuZXMgW1Rva2VuXSBBY3RvcnNcbiAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIGdhbWUuc2NlbmVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKHNjZW5lKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgU2NlbmUgZG9jdW1lbnQgJHtzY2VuZS5uYW1lfWApXG4gICAgICAgICAgLy8gaWYgKFxuICAgICAgICAgIC8vICAgc2NlbmUuaWQgPT09IGdhbWUuc2NlbmVzLmN1cnJlbnQuaWQgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLnRlbXBvcmFyeVNjZW5lID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIC8vICAgdHlwZW9mIHRoaXMub3JpZ2luYWxTY2VuZSA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAvLyApIHtcbiAgICAgICAgICAvLyAgIHRoaXMudGVtcG9yYXJ5U2NlbmUgPSBhd2FpdCBTY2VuZS5jcmVhdGUoe1xuICAgICAgICAgIC8vICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuVXBkYXRlQ3VycmVudFNjZW5lJyksXG4gICAgICAgICAgLy8gICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnXG4gICAgICAgICAgLy8gICB9KVxuICAgICAgICAgIC8vICAgdGhpcy5vcmlnaW5hbFNjZW5lID0gc2NlbmVcbiAgICAgICAgICAvLyAgIGF3YWl0IERyYXdpbmdEb2N1bWVudC5jcmVhdGUoXG4gICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAvLyAgICAgICBhdXRob3I6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICAvLyAgICAgICBzaGFwZToge1xuICAgICAgICAgIC8vICAgICAgICAgdHlwZTogJ3InLFxuICAgICAgICAgIC8vICAgICAgICAgd2lkdGg6IDE2MDAsXG4gICAgICAgICAgLy8gICAgICAgICBoZWlnaHQ6IDIwMFxuICAgICAgICAgIC8vICAgICAgIH0sXG4gICAgICAgICAgLy8gICAgICAgeDogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB5OiAyMjAwLFxuICAgICAgICAgIC8vICAgICAgIHo6IDAsXG4gICAgICAgICAgLy8gICAgICAgc3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgICAgLy8gICAgICAgdGV4dDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICAgIGZvbnRGYW1pbHk6ICdTaWduaWthJyxcbiAgICAgICAgICAvLyAgICAgICBmb250U2l6ZTogMTI4LFxuICAgICAgICAgIC8vICAgICAgIHRleHRDb2xvcjogJyNGRkZGRkYnLFxuICAgICAgICAgIC8vICAgICAgIHRleHRBbHBoYTogMSxcbiAgICAgICAgICAvLyAgICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgICAgIC8vICAgICAgIGxvY2tlZDogdHJ1ZVxuICAgICAgICAgIC8vICAgICB9LFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgcGFyZW50OiB0aGlzLnRlbXBvcmFyeVNjZW5lXG4gICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAvLyAgIClcbiAgICAgICAgICAvLyAgIGF3YWl0IHRoaXMudGVtcG9yYXJ5U2NlbmUudmlldygpXG4gICAgICAgICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG4gICAgICAgICAgLy8gfVxuICAgICAgICAgIGF3YWl0IHNjZW5lLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgICBzY2VuZS50b2tlbnMuZm9yRWFjaCh0ID0+ICh0Ll9hY3RvciA9IG51bGwpKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvclNjZW5lJywge1xuICAgICAgICAgIG5hbWU6IHNjZW5lLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIENvbXBlbmRpdW0gUGFja3NcbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKFxuICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lICE9PSAnQ29DNycgJiZcbiAgICAgICAgWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZScsICdTY2VuZSddLmluY2x1ZGVzKFxuICAgICAgICAgIHBhY2subWV0YWRhdGEudHlwZVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgYXdhaXQgVXBkYXRlci5taWdyYXRlQ29tcGVuZGl1bURhdGEocGFjaylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUFjdG9yRGF0YSAoYWN0b3IpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JBcnR3b3JrKGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzKGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlKGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JNb25ldGFyeShhY3RvciwgdXBkYXRlRGF0YSlcblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3IgSXRlbXNcbiAgICBpZiAoYWN0b3IuaXRlbXMpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYWN0b3IuaXRlbXMucmVkdWNlKChhcnIsIGkpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPVxuICAgICAgICAgIGkgaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaS50b09iamVjdCgpIDogaVxuICAgICAgICBjb25zdCBpdGVtVXBkYXRlID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoaXRlbURhdGEpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KGl0ZW1VcGRhdGUpKSB7XG4gICAgICAgICAgaXRlbVVwZGF0ZS5faWQgPSBpdGVtRGF0YS5faWRcbiAgICAgICAgICBhcnIucHVzaChmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChpdGVtVXBkYXRlKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyXG4gICAgICB9LCBbXSlcbiAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVwZGF0ZURhdGEuaXRlbXMgPSBpdGVtc1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbWlncmF0ZUNvbXBlbmRpdW1EYXRhIChwYWNrKSB7XG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gcGFjay5tZXRhZGF0YS50eXBlXG4gICAgaWYgKFxuICAgICAgIVsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhkb2N1bWVudFR5cGUpXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBVbmxvY2sgdGhlIHBhY2sgZm9yIGVkaXRpbmdcbiAgICBjb25zdCB3YXNMb2NrZWQgPSBwYWNrLmxvY2tlZFxuICAgIGF3YWl0IHBhY2suY29uZmlndXJlKHsgbG9ja2VkOiBmYWxzZSB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBhY2subWlncmF0ZSgpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZygncGFjayBtaWdyYXRlIGZhaWxlZCcsIHBhY2ssIGVycilcbiAgICB9XG4gICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxuXG4gICAgLy8gSXRlcmF0ZSBvdmVyIGNvbXBlbmRpdW0gZW50cmllcyAtIGFwcGx5aW5nIGZpbmUtdHVuZWQgbWlncmF0aW9uIGZ1bmN0aW9uc1xuICAgIGZvciAoY29uc3QgZG9jIG9mIGRvY3VtZW50cykge1xuICAgICAgbGV0IHVwZGF0ZURhdGEgPSB7fVxuICAgICAgdHJ5IHtcbiAgICAgICAgc3dpdGNoIChkb2N1bWVudFR5cGUpIHtcbiAgICAgICAgICBjYXNlICdBY3Rvcic6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlQWN0b3JEYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdJdGVtJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnTWFjcm8nOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnUm9sbFRhYmxlJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVUYWJsZURhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ1NjZW5lJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVTY2VuZURhdGEoZG9jKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICAvLyBTYXZlIHRoZSBlbnRyeSwgaWYgZGF0YSB3YXMgY2hhbmdlZFxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYE1pZ3JhdGVkICR7ZG9jdW1lbnRUeXBlfSBkb2N1bWVudCAke2RvYy5uYW1lfSBpbiBDb21wZW5kaXVtICR7cGFjay5jb2xsZWN0aW9ufWBcbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgZG9jLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yRG9jdW1lbnRQYWNrJywge1xuICAgICAgICAgIG5hbWU6IGRvYy5uYW1lLFxuICAgICAgICAgIGNvbGxlY3Rpb246IHBhY2suY29sbGVjdGlvbixcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFwcGx5IHRoZSBvcmlnaW5hbCBsb2NrZWQgc3RhdHVzIGZvciB0aGUgcGFja1xuICAgIGF3YWl0IHBhY2suY29uZmlndXJlKHsgbG9ja2VkOiB3YXNMb2NrZWQgfSlcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlSXRlbURhdGEgKGl0ZW0pIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBJdGVtXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRXhwZXJpZW5jZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQXJ0d29yayhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1FcmFzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW12MTAoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tVbml0cyhpdGVtLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlTWFjcm9EYXRhICh0YWJsZSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZU1hY3JvQXJ0d29yayh0YWJsZSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZVRhYmxlRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVUYWJsZUFydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVTY2VuZURhdGEgKHNjZW5lKSB7XG4gICAgY29uc3QgcmV0dXJucyA9IHtcbiAgICAgIHRva2VuczogW11cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2VuZS50b2tlbnMgIT09ICd1bmRlZmluZWQnICYmIHNjZW5lLnRva2Vucy5sZW5ndGgpIHtcbiAgICAgIHJldHVybnMudG9rZW5zID0gc2NlbmUudG9rZW5zLm1hcCh0b2tlbiA9PiB7XG4gICAgICAgIGNvbnN0IHQgPSB0b2tlbi50b09iamVjdCgpXG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgICAgICBVcGRhdGVyLl9taWdyYXRlVG9rZW5BcnR3b3JrKHQsIHVwZGF0ZURhdGEpXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVEYXRhKS5sZW5ndGgpIHtcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHQsIHVwZGF0ZURhdGEpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0LmFjdG9ySWQgfHwgdC5hY3RvckxpbmspIHtcbiAgICAgICAgICB0LmFjdG9yRGF0YSA9IHt9XG4gICAgICAgIH0gZWxzZSBpZiAoIWdhbWUuYWN0b3JzLmhhcyh0LmFjdG9ySWQpKSB7XG4gICAgICAgICAgdC5hY3RvcklkID0gbnVsbFxuICAgICAgICAgIHQuYWN0b3JEYXRhID0ge31cbiAgICAgICAgfSBlbHNlIGlmICghdC5hY3RvckxpbmspIHtcbiAgICAgICAgICBjb25zdCBhY3RvckRhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0LmFjdG9yRGF0YSlcbiAgICAgICAgICBhY3RvckRhdGEudHlwZSA9IHRva2VuLmFjdG9yPy50eXBlXG4gICAgICAgICAgY29uc3QgdXBkYXRlID0gVXBkYXRlci5taWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YSlcbiAgICAgICAgICA7WydpdGVtcycsICdlZmZlY3RzJ10uZm9yRWFjaChlbWJlZGRlZE5hbWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVbZW1iZWRkZWROYW1lXT8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IG5ldyBNYXAodXBkYXRlW2VtYmVkZGVkTmFtZV0ubWFwKHUgPT4gW3UuX2lkLCB1XSkpXG4gICAgICAgICAgICB0LmFjdG9yRGF0YVtlbWJlZGRlZE5hbWVdLmZvckVhY2gob3JpZ2luYWwgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB1cGRhdGUgPSB1cGRhdGVzLmdldChvcmlnaW5hbC5faWQpXG4gICAgICAgICAgICAgIGlmICh1cGRhdGUpIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3JpZ2luYWwsIHVwZGF0ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBkZWxldGUgdXBkYXRlW2VtYmVkZGVkTmFtZV1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodC5hY3RvckRhdGEsIHVwZGF0ZSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdFxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHJldHVybnNcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIFtcbiAgICAgICAgJ2FyY2hldHlwZScsXG4gICAgICAgICdjaGFzZScsXG4gICAgICAgICdpdGVtJyxcbiAgICAgICAgJ29jY3VwYXRpb24nLFxuICAgICAgICAnc2V0dXAnLFxuICAgICAgICAnc2tpbGwnLFxuICAgICAgICAnc3BlbGwnLFxuICAgICAgICAnc3RhdHVzJyxcbiAgICAgICAgJ3RhbGVudCcsXG4gICAgICAgICd3ZWFwb24nXG4gICAgICBdLmluY2x1ZGVzKGl0ZW0udHlwZSlcbiAgICApIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIHZhbHVlOiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICBrZWVwZXI6ICcnXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXInXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJ10gPSAwXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQXJ0d29yayAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGxldCBpbWFnZSA9IFN0cmluZyhpdGVtLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID0gaXRlbS5zeXN0ZW0uaXRlbXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9IGl0ZW0uc3lzdGVtLmdyb3Vwc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10uaW1nID1cbiAgICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddID0gaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnICYmIHR5cGVvZiBpdGVtLnN5c3RlbS5jb3N0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNhc3RpbmdUaW1lJ10gPSBpdGVtLnN5c3RlbS5jYXN0aW5nVGltZSB8fCAnJ1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLmhpdFBvaW50cyddID0gaXRlbS5zeXN0ZW0uY29zdC5ocCB8fCAwXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29zdHMubWFnaWNQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QubXAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLnNhbml0eSddID0gaXRlbS5zeXN0ZW0uY29zdC5zYW4gfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLnBvd2VyJ10gPSBpdGVtLnN5c3RlbS5jb3N0LnBvdyB8fCAwXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29zdHMub3RoZXJzJ10gPSAnJ1xuXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jb3N0J10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT11bmlkZW50aWZpZWQnXSA9IG51bGxcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJvb2sgYXV0b21hdGlvbiB3YXMgaW5jcmVhc2VkIGluIDAuNi41XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIERvY3VtZW50IGRhdGEgZXhwcmVzc2VkIGFzIGEgcGxhaW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7anNvbn0gdXBkYXRlRGF0YSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICogQHJldHVybnMge2pzb259IERpZmZlcmVudGlhbCB1cGRhdGUgZGF0YSB3aGljaCBtb2RpZmllcyB0aGUgZXhpc3RpbmcgdmFsdWVzIG9mIHRoaXMgZG9jdW1lbnQgZGF0YVxuICAgKi9cbiAgc3RhdGljIF9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcbiAgICAgIC8qKiBJZiBib29rIHN0aWxsIGhhcyB0aGUgc3lzdGVtLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCBrZXkgdGhlbiBydW4gbWlncmF0ZSBvbiBpdCAqL1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwgZGVmYXVsdCB0byBlbXB0eSBzdHJpbmcgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF1dGhvciddID0gaXRlbS5zeXN0ZW0uYXV0aG9yIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kYXRlJ10gPSBpdGVtLnN5c3RlbS5kYXRlIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5sYW5ndWFnZSddID0gaXRlbS5zeXN0ZW0ubGFuZ3VhZ2UgfHwgJydcbiAgICAgICAgLyoqIEZpZWxkcyBjaGFuZ2VkIGZyb20gbnVsbC9zdHJpbmcgZGVmYXVsdHMgdG8gaW50ZWdlciB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzJ10gPSBpdGVtLnN5c3RlbS5zYW5Mb3NzIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm15dGhvc1JhdGluZyddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLm15dGhvc1JhdGluZykgfHwgMFxuICAgICAgICAvKiogUmVuYW1lZC9tb3ZlZCBmaWVsZHMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbnRlbnQnXSA9IGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3Rlc1xuICAgICAgICAvKiogTmV3IGZpZWxkcyBzZXQgZGVmYXVsdCB2YWx1ZXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRpZmZpY3VsdHlMZXZlbCddID0gJ3JlZ3VsYXInXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5mdWxsU3R1ZGllcyddID0gMFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5pdGlhbFJlYWRpbmcnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5rZWVwZXJOb3RlcyddID0gJydcbiAgICAgICAgLyoqIE1vdmUgYW5kIHJlbmFtZSBnYWluIGZpZWxkcyB0byBnYWlucywgZGVmYXVsdCBOYU4gdmFsdWVzIHRvIDAgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5jdGh1bGh1TXl0aG9zLkNNSSkgfHwgMFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5jdGh1bGh1TXl0aG9zLkNNRikgfHwgMFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMub2NjdWx0J10gPSBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5vY2N1bHQpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm90aGVycyddID0gW11cbiAgICAgICAgLyoqIE5ldyBzdHVkeSBmaWVsZCBkZWZhdWx0IG5lY2Vzc2FyeSB0byBpbnRlZ2VyIG9mIHdlZWtzU3R1ZHlUaW1lIG9yIDAgaWYgbm90IHNldCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHknXSA9IHtcbiAgICAgICAgICBuZWNlc3Nhcnk6IE51bWJlcihpdGVtLnN5c3RlbS53ZWVrc1N0dWR5VGltZSkgfHwgMCxcbiAgICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgICB1bml0czogJ0NvQzcud2Vla3MnXG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJlbW92ZSBvbGQga2V5cyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1zYW5Mb3NzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPXdlZWtzU3R1ZHlUaW1lJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWdhaW4nXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy4tPW90aGVyJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPXByb3BlcnRpZXMnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09ZmxhZ3MnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rVW5pdHMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnN0dWR5LnVuaXRzID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zdHVkeS51bml0cyddID0gJ0NvQzcud2Vla3MnXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnIHx8IGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLm5vdGVzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyICsgaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLnN5c3RlbS5ub3Rlc1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPW5vdGVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXInXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXMgKyB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLnN5c3RlbS5rZWVwZXJOb3Rlc1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWtlZXBlck5vdGVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUVtYmVkZGVkdjEwIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmdyb3Vwc1tvXS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFsnc2V0dXAnXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5pdGVtc1trXS5zeXN0ZW0gPSB2LmRhdGFcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2FyY2hldHlwZScsICdvY2N1cGF0aW9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2LnN5c3RlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsc1trXS5zeXN0ZW0gPSB2LmRhdGFcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFsnYm9vayddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNwZWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddID0gaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbXYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgKHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgKSB7XG4gICAgICB1cGRhdGVEYXRhLm5hbWUgPSBpdGVtLm5hbWVcbiAgICAgIC8vIFVwZGF0ZSBQb2xpc2ggZG9kZ2UgdHJhbnNsYXRpb24gZnJvbSBVbmlraSB0byBVbmlrIHRvIG1hdGNoIHVwZGF0ZSB0byBsYW5nL3BsLmpzb25cbiAgICAgIGlmICh1cGRhdGVEYXRhLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5uYW1lID0gJ1VuaWsnXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSxcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcbiAgICAgICAgICA/IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgOiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgKVxuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxsTmFtZSddID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLml0ZW1zKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID0gaXRlbS5zeXN0ZW0uaXRlbXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSB2Lm5hbWVcbiAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSxcbiAgICAgICAgICAgICAgdHlwZW9mIHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgOiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPVxuICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSB2Lm5hbWVcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10ubmFtZSA9ICdVbmlrJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUsXG4gICAgICAgICAgICAgICAgdHlwZW9mIHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10uc3lzdGVtLnNraWxsTmFtZSA9XG4gICAgICAgICAgICAgICAgcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPVxuICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FcmFzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5lcmFzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gMTkyMCA9PiBzdGFuZGFyZFxuICAgICAgLy8gbWRybiA9PiBtb2Rlcm4gLyBtb2Rlcm5QdWxwXG4gICAgICAvLyBwdWxwID0+IHB1bHBcbiAgICAgIC8vIGRkdHMgPT4gZG93bkRhcmtlclRyYWlscyAvIGRvd25EYXJrZXJUcmFpbHNQdWxwXG4gICAgICAvLyBkcmthID0+IGRhcmtBZ2VzIC8gZGFya0FnZXNQdWxwXG4gICAgICAvLyBnbGl0ID0+IGdhc0xpZ2h0XG4gICAgICAvLyBudmN0ID0+IGludmljdHVzXG4gICAgICBsZXQgZXJhcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5lcmFzKSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlLnNlbGVjdGVkICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSAnMTkyMCc6XG4gICAgICAgICAgICAgIGVyYXMuc3RhbmRhcmQgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdtZHJuJzpcbiAgICAgICAgICAgICAgZXJhcy5tb2Rlcm4gPSB0cnVlXG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3B1bHAnOlxuICAgICAgICAgICAgICBlcmFzLnB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdkZHRzJzpcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRvd25EYXJrZXJUcmFpbHNQdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZHJrYSc6XG4gICAgICAgICAgICAgIGVyYXMuZGFya0FnZXMgPSB0cnVlXG4gICAgICAgICAgICAgIGVyYXMuZGFya0FnZXNQdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZ2xpdCc6XG4gICAgICAgICAgICAgIGVyYXMuZ2FzTGlnaHQgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdudmN0JzpcbiAgICAgICAgICAgICAgZXJhcy5pbnZpY3R1cyA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgICAgLy8gSWYgbW9yZSB0aGFuIG9uZSBlcmEgdGFrZSB0aGUgZmlyc3Qgb25lIG9ubHlcbiAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMoZXJhcylbMF1cbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIGVyYXMgPSB7IFtrZXldOiB0cnVlIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBubyBlcmFzIGRlZmF1bHQgdG8gc3RhbmRhcmRcbiAgICAgICAgICBlcmFzID0geyBzdGFuZGFyZDogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IENvQzcgPSB7XG4gICAgICAgIGNvY2lkRmxhZzoge1xuICAgICAgICAgIGlkOiAnJyxcbiAgICAgICAgICBsYW5nOiBnYW1lLmkxOG4ubGFuZyxcbiAgICAgICAgICBwcmlvcml0eTogMCxcbiAgICAgICAgICBlcmFzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaXRlbS5mbGFncy5Db0M3ID0gQ29DN1xuICAgICAgICB1cGRhdGVEYXRhWydmbGFncy5Db0M3J10gPSBDb0M3XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcgPSBDb0M3LmNvY2lkRmxhZ1xuICAgICAgICB1cGRhdGVEYXRhWydmbGFncy5Db0M3LmNvY2lkRmxhZyddID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyddID0gQ29DNy5jb2NpZEZsYWcuZXJhc1xuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09ZXJhcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQXJ0d29yayAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoYWN0b3IuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBhY3Rvci5wcm90b3R5cGVUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlPy5zcmMgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBpbWFnZSA9IFN0cmluZyhhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYykubWF0Y2goXG4gICAgICAgIC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvXG4gICAgICApXG4gICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsncHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMnXSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGFjdG9yLmVmZmVjdHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhY3Rvci5lZmZlY3RzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2Lmljb24pLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEuZWZmZWN0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGFjdG9yLmVmZmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzW2tdLmljb24gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JNb25ldGFyeSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgdHlwZW9mIGFjdG9yLnN5c3RlbS5jcmVkaXQ/Lm11bHRpcGxpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tb25ldGFyeVN5bWJvbCA/IGFjdG9yLnN5c3RlbS5jcmVkaXQubW9uZXRhcnlTeW1ib2wgOiAnJCdcbiAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10udG9TdHJpbmcoKS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zeW1ib2wnXSA9ICckJ1xuICAgICAgfVxuICAgICAgY29uc3QgbXVsdGlwbGllciA9IHBhcnNlSW50KGFjdG9yLnN5c3RlbS5jcmVkaXQubXVsdGlwbGllcikgPyBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpIDogMVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW50J10gPSBhY3Rvci5zeXN0ZW0uY3JlZGl0LnNwZW50XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuYXNzZXRzRGV0YWlscyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNEZXRhaWxzXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3BlbmRpbmdMZXZlbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVuZGluZ0xldmVsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuY2FzaCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5jYXNoXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuYXNzZXRzJ10gPSBhY3Rvci5zeXN0ZW0uY3JlZGl0LmFzc2V0c1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyddID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICAgIGlmIChtdWx0aXBsaWVyICE9PSAxKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyddKSB7XG4gICAgICAgICAgdmFsdWUuY2FzaFZhbHVlID0gbXVsdGlwbGllciAqIHZhbHVlLmNhc2hWYWx1ZVxuICAgICAgICAgIHZhbHVlLmFzc2V0c1ZhbHVlID0gbXVsdGlwbGllciAqIHZhbHVlLmFzc2V0c1ZhbHVlXG4gICAgICAgICAgdmFsdWUuc3BlbmRpbmdWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5zcGVuZGluZ1ZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWNyZWRpdCddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0/LmVuY291bnRlcmVkQ3JlYXR1cmVzICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3QgZ3JvdXBzID0ge31cbiAgICAgIGZvciAoY29uc3Qgc2FuaXR5TG9zc0V2ZW50IG9mIGFjdG9yLnN5c3RlbS5lbmNvdW50ZXJlZENyZWF0dXJlcykge1xuICAgICAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcyA+IDApIHtcbiAgICAgICAgICBncm91cHNbc2FuaXR5TG9zc0V2ZW50Lm5hbWVdID0gTWF0aC5tYXgoXG4gICAgICAgICAgICBncm91cHNbc2FuaXR5TG9zc0V2ZW50Lm5hbWVdID8/IDAsXG4gICAgICAgICAgICBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gW11cbiAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBncm91cHMpIHtcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBuYW1lLFxuICAgICAgICAgIHRvdGFsTG9zczogZ3JvdXBzW25hbWVdLFxuICAgICAgICAgIGltbXVuaXR5OiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnXSA9IHNhbml0eUxvc3NFdmVudHNcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVuY291bnRlcmVkQ3JlYXR1cmVzJ10gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICh0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMgPT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmNyaXRpY2FsV291bmRzLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy51bmNvbnNjaW91cy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZHlpbmcudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmRlYWQudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy50ZW1wb0luc2FuZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuaW5kZWZJbnNhbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uY3JpdGljYWxXb3VuZHM/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmNyaXRpY2FsV291bmRzLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmNyaXRpY2FsV291bmRzLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy51bmNvbnNjaW91cz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udW5jb25zY2lvdXMudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudW5jb25zY2lvdXMudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmR5aW5nPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5keWluZy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5keWluZy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZGVhZD8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZGVhZC52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5kZWFkLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5wcm9uZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8ucHJvbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMucHJvbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnRlbXBvSW5zYW5lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy50ZW1wb0luc2FuZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy50ZW1wb0luc2FuZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uaW5kZWZJbnNhbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmluZGVmSW5zYW5lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmluZGVmSW5zYW5lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGVmZmVjdHMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWZmZWN0ID0gZWZmZWN0c1tpXVxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBlZmZlY3QuaWNvbi5tYXRjaChcbiAgICAgICAgICAgICAgL1xcLyhoYW5naW5nLXNwaWRlcnx0ZW50YWNsZXMtc2t1bGx8YXJtLXNsaW5nfGhlYXJ0LWJlYXRzfHRvbWJzdG9uZXxrbm9ja2VkLW91dC1zdGFyc3xmYWxsaW5nfHNrdWxsfHVuY29uc2Npb3VzKVxcLi9cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBsZXQgc3RhdHVzSWQgPSAnJ1xuICAgICAgICAgICAgICBzd2l0Y2ggKG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGFuZ2luZy1zcGlkZXInOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAndGVtcG9JbnNhbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RlbnRhY2xlcy1za3VsbCc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdpbmRlZkluc2FuZSdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnYXJtLXNsaW5nJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2NyaXRpY2FsV291bmRzJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdoZWFydC1iZWF0cyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdkeWluZydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAndG9tYnN0b25lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdza3VsbCc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdkZWFkJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdrbm9ja2VkLW91dC1zdGFycyc6XG4gICAgICAgICAgICAgICAgY2FzZSAndW5jb25zY2lvdXMnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAndW5jb25zY2lvdXMnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhbGxpbmcnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAncHJvbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChzdGF0dXNJZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZURhdGFbYHN5c3RlbS5jb25kaXRpb25zLiR7c3RhdHVzSWR9LnZhbHVlYF0pIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5jb25kaXRpb25zLiR7c3RhdHVzSWR9LnZhbHVlYF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmZsYWdzLmNvcmU/LnN0YXR1c0lkICE9PSBzdGF0dXNJZCkge1xuICAgICAgICAgICAgICAgICAgZWZmZWN0c1tpXSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZWZmZWN0LCB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29yZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzSWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzID0gZWZmZWN0c1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1zdGF0dXMnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnbnBjJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkgJiYgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVjaWFsJ10gPSB7XG4gICAgICAgICAgY2hlY2tQYXNzZWQ6IG51bGwsXG4gICAgICAgICAgY2hlY2tGYWlsbGVkOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dGFja3NQZXJSb3VuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dGFja3NQZXJSb3VuZCddID0gMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0/LmF0dHJpYnM/LnNhbiAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IG9uZUZpZnRoU2FuaXR5ID0gTWF0aC5jZWlsKGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9ICcgLyAnICsgb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0ubm90ZXMgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubm90ZXMnXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVNYWNyb0FydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodGFibGUuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUYWJsZUFydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5yZXN1bHRzKSkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YS5yZXN1bHRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGEucmVzdWx0cyA9IHRhYmxlLnJlc3VsdHNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHNba10uaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUb2tlbkFydHdvcmsgKHRva2VuLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodG9rZW4uaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuLyoqXG4gKiBuYW1lQ2hhcmFjdGVycyBsaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYmUgcGFydCBvZiBhIFtdIGZvciBjaGFyYWN0ZXIsIHNraWxsLCBvciB3ZWFwb24gbmFtZXMgdXNlZCBpbiBicmFja2V0IGV4cHJlc3Npb24uXG4gKlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZGVzY3JpcHRpb25cIiBsYW5nIGtleSB0byBzaG93IGluIHRoZSBsYW5ndWFnZSBzZWxlY3Rpb24gZGlhbG9nIGJveC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBEYW1hZ2UgQm9udXMgZS5nLiBEQjogXCJkYk5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBBcm1vdXIgQm9udXMgZS5nLiBBcm1vcjogXCJhcm1vck5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZE5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gYXR0YWNrcyBlLmcuIEF0dGFja3MgUGVyIFJvdW5kOiBcImF0dGFja3NQZXJSb3VuZE5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIHNhbml0eSBsb3NzIGUuZy4gU0FOIGxvc3M6IFwic2FuTG9zc05vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmZ1bGxkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBkYW1hZ2UgYm9udXMgaW4gYXR0cmlidXRlcyBhbmQgd2VhcG9uIGRhbWFnZSBlLmcuIERCOiBcImZ1bGxkYlwiIC8gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJmdWxsZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBoYWxmIGRhbWFnZSBib251cyBpbiB3ZWFwb24gZGFtYWdlIGUuZy4gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJoYWxmZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIElmIHRoZXJlIGlzIG5vIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uLCBhZGQgdGhpcyBzZWN0aW9uIHdlcmUgaXQgcHJvYmFibHkgaXMsIHRoaXMgbmVlZHMgdG8gbWF0Y2hlZCBieSBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNraWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNraWxscyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uTGFuZ2F1Z2VzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgbGFuZ3VhZ2VzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25TcGVsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBzcGVsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uaGFuZGd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBoYW5kZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5yaWZsZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSByaWZsZSB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc21iXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIHN1Ym1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5tYWNoaW5lR3VuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIG1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5sYXVuY2hlZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBsYXVuY2hlZCB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZXhhbXBsZVwiIFN0cmluZyB0aGF0IHNob3VsZCBzaG93IGFzIGEgcGxhY2Vob2xkZXIgZXhhbXBsZS5cbiAqXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYWdlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm9jY3VwYXRpb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG9jY3VwYXRpb24sIG5hbWVkIGNhcHR1cmluZyBncm91cCA8b2NjdXBhdGlvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnN0clwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc3RyZW5ndGggY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c3RyPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uY29uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb25zdGl0dXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8Y29uPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2l6XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzaXplIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNpej4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmludFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgaW50ZWxsaWdlbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGludD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnBvd1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgcG93ZXIgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8cG93Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGV4XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkZXh0ZXJpdHkgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGV4Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXBwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhcHBlYXJhbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFwcD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmVkdVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZWR1Y2F0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGVkdT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuaXR5IHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uaHBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGhpdCBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGhwPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubXBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1hZ2ljIHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bXA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGFtYWdlIGJvbnVzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkYj4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uZGJOb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5idWlsZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYnVpbGQgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGJ1aWxkPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXJtb3JcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubW92XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtb3ZlbWVudCByYXRlIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxtb3Y+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5sY2tcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGx1Y2sgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGxjaz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXR0YWNrcyBwZXIgcm91bmQsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXR0YWNrc1BlclJvdW5kPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5Mb3NzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW4gbG9zcyBtaW4vbWF4LCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbkxvc3M+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgdGhlbiBub25lLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgd2VhcG9uIDxuYW1lPiwgb3B0aW9uYWwgPHBlcmNlbnRhZ2U+LCBhbmQgPGRhbWFnZT4uIERhbWFnZSBjYW4gY29udGFpbiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBhbmQgXCJrZXlzLjxsYW5ndWFnZT4uaGFsZmRiXCIuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvbkRvZGdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiBkb2RnZSBza2lsbCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5za2lsbFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2tpbGwgc2VjdGlvbiBza2lsbCBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+IGFuZCA8cGVyY2VudGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lmd1ZXNzU3RhcnRDb21iYXRcIiBSZWd1bGFyIGV4cHJlc3Npb24gaWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZmluZCB0aGVzZSBhcmUgbGlrZWx5IHRvIGJlIHRoZSBmaXJzdCB3ZWFwb24gbmFtZSwgXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgaXMgdGhlbiBhZGRlZCBiZWZvcmUgaXQgdG8gZ2V0IHRoZSBncm91cHNcbiAqXG4gKiBUaGVzZSBzaG91bGQgbm90IGJlIGVkaXRlZCBhcyB0aGV5IHNob3VsZCB3b3JrIGFzIGlzXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm5hbWVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNlY3Rpb25zXCIgUmVndWxhciBleHByZXNzaW9uIHRvIHNwbGl0IHRleHQgaW50byBjb21iYXQsIHNraWxsLCBsYW5ndWFnZSwgYW5kIHNwZWxscyBzZWN0aW9uXG4gKlxuICogSWYgdGhlcmUgaXMgbmV3IGZ1bmN0aW9uYWxpdHkgY2hlY2sgZm9yIHRoaXMgc3RyaW5nIGluIHRoZSB0cmFuc2xhdGlvbnMgLyBrZXlzIGZvciB5b3VyIGxhbmd1YWdlIFwiTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEXCJcbiAqL1xuY29uc3QgbmFtZUNoYXJhY3RlcnMgPVxuICAnXFxcXHUzMDAwXFxcXHUzNDAwLVxcXFx1NERCRlxcXFx1MzA0MC1cXFxcdTMwRkZcXFxcdTRFMDAtXFxcXHU5RkZGXFxcXHdcXFxcKFxcXFwpXFxcXC1cXFxcLyZcIlxcJ++9pe+8iO+8ie+8jycgK1xuICBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKFxuICAgICdhzIFlzIFpzIFvzIHDoMOow6zDssO5w4DDiMOMw5LDmcOhw6nDrcOzw7rDvcOBw4nDjcOTw5rDncOiw6rDrsO0w7vDgsOKw47DlMObw6PDscO1w4PEgMORw5XDpMOrw6/DtsO8w7/DhMOLw4/DlsOcxbjDoMOow6fDh8Ofw5jDuMOFw6XDhsOmxZPigJzigJ3Cq8K7xIXEh8SZxYLFhMOzxZvFusW8xITEhsSYxYHFg8OTxZrFucW7J1xuICApXG5cbmNvbnN0IGtleXMgPSB7XG4gIGVuOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkVuZ2xpc2gnLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQicgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18aGFsZicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdza2lsbHMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ2xhbmd1YWdlcycgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8KF58IClcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICsgJ1JpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIGFnZSAyN1xcblNUUiA3NSBDT04gNjAgU0laIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9XIDUwIEVEVSA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbkJ1aWxkOiAxIE1vdmU6IDcgTVA6IDEwIEx1Y2s6IDQwIEFybW9yOiAxXFxuQXR0YWNrcyBwZXIgcm91bmQ6IDMgU0FOIGxvc3M6IDFkNC8xZDhcXG5Db21iYXRcXG5CaXRlIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGFtYWdlIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkYW1hZ2UgMUQ4KzFcXG5Eb2RnZSA1MCUgKDI1LzEwKVxcblNraWxsc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VhZ2VzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5TcGVsbHM6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICBkZToge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5HZXJtYW4nLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGRpY2VTaG9ydDogJ3d8ZCcsXG4gICAgZnVsbGRiOiAnKCcgKyAnU2NoYWRlbnNib251c3xTYicgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18MS8yIFNjaGFkZW5zYm9udXN8U2IvMicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0thbXBmfEFuZ3JpZmY6fEFOR1JJRkZFJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0thbXBmJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0ZlcnRpZ2tlaXRlbicgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnU3ByYWNoZW4nICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1phdWJlcicgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBHdW58UmV2b2x2ZXJ8UGlzdG9sZXxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnR2V3ZWhyfFNjaHJvdGZsaW50ZXxDYXJhYmluZXJ8S2FyYWJpbmVyfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVmYW50ZW4nICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmFuYXRlfER5bmFtaXQnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnVm9ybmFtZSBOYWNobmFtZVxcbkFsdGVyOiAyOVxcbkJlcnVmOiBFaW4gQmVydWZcXG5TVCA1MFxcbk1BIDYwXFxuS08gNjBcXG5HRSA2MFxcbkdSIDU1XFxuRVIgNjVcXG5JTiA4MFxcbkJJIDg1XFxuVHJlZmZlcnB1bmt0ZTogMTFcXG5HZWlzdGlnZSBTdGFiaWxpdMOkdDogNjBcXG5TY2hhZGVuc2JvbnVzOiAwXFxuU3RhdHVyOiAwXFxuTWFnaWVwdW5rdGU6IDEyXFxuQmV3ZWd1bmdzd2VpdGU6IDhcXG5cXG5LYW1wZlxcbkFuZ3JpZmZlOiAxXFxuSGFuZGdlbWVuZ2UgMzAlICgxNS82KSwgU2NoYWRlbiAxRDNcXG5NZXNzZXIgMzAlICgxNS82KSwgU2NoYWRlbiAxRDRcXG5BdXN3ZWljaGVuIDMwJSAoMTUvNilcXG5cXG5GZXJ0aWdrZWl0ZW46IEFudGhyb3BvbG9naWUgNzAlICgzNS8xNCksIEFyY2jDpG9sb2dpZSAzMCUgKDE1LzYpLCBCaWJsaW90aGVrc251dHp1bmcgNTAlICgyNS8xMCksIEVyc3RlIEhpbGZlIDUwJSAoMjUvMTApLCBGaW5hbnprcmFmdCA0MCUgKDIwLzgpLCBHZXNjaGljaHRlIDYwJSAoMzAvMTIpLCBLbGV0dGVybiA1MCUgKDI1LzEwKVxcblxcblNwcmFjaGVuOiBFbmdsaXNjaCA4NSUgKDQyLzE3KTsgRGV1dHNjaCA0NSUgKDIyLzkpLCBMYXRlaW4gNDUlICgyMi85KSdcbiAgfSxcbiAgcGw6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuUG9saXNoJyxcbiAgICBkYk5vbmU6ICdicmFrJyxcbiAgICBhcm1vck5vbmU6ICdicmFrJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnYnJhaycsXG4gICAgc2FuTG9zc05vbmU6ICdicmFrJyxcbiAgICBkaWNlU2hvcnQ6ICdrfGQnLFxuICAgIGZ1bGxkYjogJygnICsgJ01vZHlmaWthdG9yIE9icmHFvGXFhHxNTycgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18MS8yIE1PfE1PLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdXYWxrYXxBdGFraScgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdXYWxrYScgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdVbWllasSZdG5vxZtjaScgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnSsSZenlraScgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnWmFrbMSZY2lhJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIFBpc3RvbGV0fFJld29sd2VyfERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnS2FyYWJpbnxTdHJ6ZWxiYXxXaWF0csOzd2thfEdhcmFuZHxHYXVnZSB8TGVlLUVuZmllbGR8U3RyemVsYmEgbmEgc8WCb25pZScgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdQaXN0b2xldCBtYXN6eW5vd3l8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW/Fgm90b3dhfEdyYW5hdHxMYXNrYSBkeW5hbWl0dXxEeW5hbWl0JyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ1ByenlrxYJhZG93YSBwb3N0YcSHLCAyNyBsYXRcXG5CaWJsaW90ZWthcnpcXG5TIDc1IEtPTiA2MCBCQyA4MCBaUiA3MCBXWUcgNjAgSU5UIDgwXFxuTU9DIDUwIFdZSyA4NSBQIDU1IFBXIDE0IE1POiAxRDRcXG5LcnplcGE6IDEgUnVjaDogNyBQTTogMTAgU3pjesSZxZtjaWU6IDQwIFBhbmNlcno6IDFcXG5BdGFraSB3IHJ1bmR6aWU6IDMgVXRyYXRhIFBvY3p5dGFsbm/Fm2NpOiAxSzQvMUs4XFxuV2Fsa2FcXG5VZ3J5emllbmllIDUwJSAoMjUvMTApLCBvYnJhxbxlbmlhIDFLNlxcbldhbGthIDMwJSAoMTUvNiksIG9icmHFvGVuaWEgMUszXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIG9icmHFvGVuaWEgMUs4KzFcXG5VbmlrIDUwJSAoMjUvMTApXFxuVW1pZWrEmXRub8WbY2lcXG5UcmVzdXJhIFp3aWVyesSFdCA1NSUsIFVyb2sgT3NvYmlzdHkgMzAlLCBQaWVyd3N6YSBQb21vYyAyNSUsIFVrcnl3YW5pZSAyMCUsXFxuTmFzxYJ1Y2hpd2FuaWUgNTAlLCBNZWR5Y3luYSA0NSUsIFByemVrb255d2FuaWUgMjUlLCBQc3ljaG9sb2dpYSA3NSUsXFxuTmF1a2EgKEFzdHJvbm9taWEpIDkwJSwgTmF1a2EgKEJvdGFuaWthKSAzNSUsIE5hdWthIChab29sb2dpYSkgMTAlLFxcblNwb3N0cnplZ2F3Y3pvxZvEhyAzNSUsIFVrcnl3YW5pZSAxMCVcXG5KxJl6eWtpOiBBbmdpZWxza2kgODAlLCBFa2xvIDUlLlxcblpha2zEmWNpYTogUHJ6eXp3YW5pZSBOUEMsIE9kZXPFgmFuaWUgTlBDLidcbiAgfSxcbiAgZnI6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuRnJlbmNoJyxcbiAgICBkYk5vbmU6ICdBY3VuZScsXG4gICAgYXJtb3JOb25lOiAnKD86QWN1bmV8YXVjdW5lKScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ0FjdW5lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ0FjdW5lJyxcbiAgICBmdWxsZGI6ICcoJyArICdCRHxCb251cyBhdXggZG9tbWFnZXN8SW1wYWN0fEltcCcgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18MS8yIEltcHxJbXAvMicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0NvbWJhdHxBcm1lc3xBdHRhcXVlcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnQ29tcMOpdGVuY2VzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWVzPycgKyAnKVxcXFxzKls6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnU29ydGlsw6hnZXNcXFxccyp8U29ydHMnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSZXZvbHZlcnxQaXN0b2xldHxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTogJyg/PHR5cGU+JyArICdDYXJhYmluZXxMZWUtRW5maWVsZHxGdXNpbCcgKyAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1NNR3xUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfE1pdHJhaWxsZXVzZScgKyAnKScsXG4gICAgbGF1bmNoZWQ6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdCb29tZXJhbmcgZGUgZ3VlcnJlfEphdmVsaW5lfFBpZXJyZXxTaHVyaWtlbnxCw6J0b24gZGUgZHluYW1pdGV8Q29ja3RhaWwgTW9sb3RvdnxHcmVuYWRlIMOgIG1haW58TW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlJyArXG4gICAgICAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYW5zXFxuRk9SIDc1IENPTiA2MCBUQUkgODAgREVYIDcwIEFQUCA2MCBJTlQgODBcXG5QT1UgNTAgw4lEVSA4NSBTQU4gNTUgUFYgMTQgQkQ6IDFENFxcbkNhcnJ1cmU6IDEgTXZ0OiA3IFBNOiAxMCBDaGFuY2U6IDQwIEFybXVyZTogMVxcbkF0dGFxdWVzIHBhciByb3VuZCAzIFBlcnRlIGRlIFNBTjogMWQ0LzFkOFxcbkF0dGFxdWVzXFxuQml0ZSA1MCUgKDI1LzEwKSwgZG9tbWFnZSAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkb21tYWdlIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkb21tYWdlIDFEOCsxXFxuRXNxdWl2ZXIgNTAlICgyNS8xMClcXG5Db21ww6l0ZW5jZXNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbkxhbmd1ZTogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuU29ydGlsw6hnZXM6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICBlczoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5TcGFuaXNoJyxcbiAgICBkYk5vbmU6ICduaW5ndW5hJyxcbiAgICBhcm1vck5vbmU6ICduaW5ndW5hJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbmluZ3VubycsXG4gICAgc2FuTG9zc05vbmU6ICdubycsXG4gICAgZnVsbGRiOiAnKCcgKyAnQkR8YmR8Ym9uaWZpY2FjacOzbiBkZSBkYcOxbycgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18bWVkaW8gZGHDsW98bWl0YWR8ZGHDsW8gYSBsYSBtaXRhZCcgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0NvbWJhdGV8QXJtYXMnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0ZScgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdIYWJpbGlkYWRlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnSWRpb21hc3xMZW5ndWFqZXN8TGVuZ3VhcycgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnQ29uanVyb3N8SGVjaGl6b3MnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSZXZvbHZlcnxQaXN0b2xhfERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmlmbGV8Q2FyYWJpbmF8TGVlLUVuZmllbGR8Q2F6YSBFbGVmYW50ZXN8RnVzaWx8RXNjb3BldGF8R2FsZ2F8UmVjb3J0YWRhJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1YmZ1c2lsfFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN8QW1ldHJhbGxhZG9yYScgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmFuYWRhfERpbmFtaXRhJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCAyNyBhw7Fvc1xcbkZVRSA3NSBDT04gNjAgVEFNIDgwIERFUyA3MCBBUEEgNjAgSU5UIDgwXFxuUE9EIDUwIEVEVSA4NSBDT1IgNTUgUFYgMTQgQkQ6IDFENFxcbkNvcnB1bGVuY2lhOiAxIE1vdmltaWVudG86IDcgUE06IDEwIFN1ZXJ0ZTogNDAgQXJtYWR1cmE6IDFcXG5Ow7ptZXJvIGRlIEF0YXF1ZXMgMyBQw6lyZGlkYSBkZSBjb3JkdXJhOiAxZDQvMWQ4XFxuQ29tYmF0ZVxcbkJpdGUgNTAlICgyNS8xMCksIGRhw7FvIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRhw7FvIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkYcOxbyAxRDgrMVxcbkVzcXVpdmFyIDUwJSAoMjUvMTApXFxuSGFiaWxpZGFkZXNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbklkaW9tYXM6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcbkNvbmp1cm9zOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgJ3poLVRXJzoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5UcmFkaXRpb25hbENoaW5lc2UnLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQnzlgrflrrPliqDlgLwnICsgJyknLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOlxuICAgICAgJ1xcbig/OicgKyAnY29tYmF0fGZpZ2h0aW5nIGF0dGFja3N85oiw6ayl5oqA6IO9fOaIsOmspeWIl+ihqHzmrablmagnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6XG4gICAgICAnXFxuKD86JyArICcoPzpTa2lsbHN85oqA6IO95YiX6KGoKScgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3VhZ2VzfOiqnuiogCcgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzfOWSkuaWh+WIl+ihqHzlkpLmlocnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcg6YGC55m85qeNfFxcXFwuMjLnn63lj6Poh6rli5XmiYvmp418XFxcXC4yNeefreWPo+aJi+anjSjllq7nrqEpfFxcXFwuMzLmiJY3XFxcXC42NW1t5bem6Lyq5omL5qeNfFxcXFwuMzLmiJY3XFxcXC42NW1t6Ieq5YuV5omL5qeNfFxcXFwuMzU3IE1hZ251beW3pui8quaJi+anjXxcXFxcLjM45oiWOW1t5bem6Lyq5omL5qeNfFxcXFwuMzjoh6rli5XmiYvmp4186LKd6Zu35aGUTTl85qC85rSb5YWLMTd8OW1t6Ieq5YuV5omL5qeNfOmtr+agvFAwOHxcXFxcLjQx5bem6Lyq5omL5qeNfFxcXFwuNDTppqzmoLzljZflt6bovKrmiYvmp418XFxcXC40NeW3pui8quaJi+anjXxcXFxcLjQ16Ieq5YuV5omL5qeNfOaymea8oOS5i+m3uXxHdW58UmV2b2x2ZXJ8UGlzdG9sfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICfmraXmp4185Y2h6LOT5qeNfOWNiuiHquWLleatpeanjXznjbXosaHmp418UmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCcgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbnzooZ3pi5Lmp40nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3zmqZ/mp40nICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZeeIhueCuOeJqXzmiYvmprTlvYh86YeN5q2m5ZmoJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ+ekuuevhOinkuiJsiwg5bm06b2hIDI3XFxu5Yqb6YePIDc1IOmrlOizqiA2MCDpq5TlnosgODAg5pWP5o23IDcwIOWkluiyjiA2MCDmmbrlipsgODBcXG7mhI/lv5cgNTAg5pWZ6IKyIDg1IFNBTiA1NSBIUCAxNCBEQjogMUQ0XFxu6auU5qC8OiAxIE1vdmU6IDcgTVA6IDEwIOW5uOmBizogNDAg6K2355SyOiAxXFxu5pS75pOK5qyh5pW4OiAzIOeQhuaZuuWWquWksTogMWQ0LzFkOFxcbuaIsOmspeWIl+ihqFxcbuWSrCA1MCUgKDI1LzEwKSwg5YK35a6zIDFENlxcbuepuuaJiyAzMCUgKDE1LzYpLCDlgrflrrMgMUQzXFxu5omL5qeNIDQwJSAoMjAvOCksIOWCt+WusyAxRDgrMVxcbumWg+mBvyA1MCUgKDI1LzEwKVxcbuaKgOiDveWIl+ihqFxcbuWLleeJqemmtOmkiiA1NSUsIOWPluaChSAzMCUsIOaApeaVkSAyNSUsIOa9m+ihjCAyMCUsXFxu6IGG6IG9IDUwJSwg6Jel5a24IDQ1JSwg57K+56We5YiG5p6QIDI1JSwg5b+D55CG5a24IDc1JSxcXG7np5HlrbggKOWPuOazleenkeWtuCkgOTAlLCDnp5HlrbggKOWvhueivOWtuCkgMzUlLCBcXG7lgbXmn6UgMzUlLCDllqzoo50gMTAlXFxu6Kqe6KiAOiDnsrXoqp4gODAlLCDoroDllIcgNSUuXFxu5ZKS5paHOiDlj6zllpogTlBDLCDmjIfmj64gTlBDLidcbiAgfSxcbiAgamE6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuSmFwYW5lc2UnLFxuICAgIGRiTm9uZTogJ+OBquOBlycsXG4gICAgYXJtb3JOb25lOiAn44Gq44GXJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAn44Gq44GXJyxcbiAgICBzYW5Mb3NzTm9uZTogJ+OBquOBlycsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCfGRifOODgOODoeODvOOCuCjjg7t8772lKT/jg5zjg7zjg4rjgrknICsgJyknLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOlxuICAgICAgJ1xcbig/OicgKyAnY29tYmF0fGZpZ2h0aW5nIGF0dGFja3N85oim6ZeYfOatpuWZqCcgKyAnKVs677yaXFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICfmiKbpl5gnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczpcbiAgICAgICdcXG4oPzonICsgJyg/OlNraWxsc3zmioDog70pJyArICdcXFxccyooPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzrvvJpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWFnZXN86KiA6KqeJyArICcpXFxcXHMqWzrvvJpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHN85ZGq5paHJyArICcpXFxcXHMqWzrvvJpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAn5ouz6YqDfOOCquODvOODiOODnuODgeODg+OCr3zjg6rjg5zjg6vjg5Djg7x844OH44Oq44Oz44K444Oj44O8fOODmeODrOODg+OCv3zjg6vjgqzjg7x844OH44K244O844OIKOODu3zvvaUpP+OCpOODvOOCsOODq3xHdW58UmV2b2x2ZXJ8UGlzdG9sfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICfjg6njgqTjg5Xjg6t844K344On44OD44OI44Ks44OzfOOCq+ODvOODk+ODs3zjgrLjg7zjgrh844Oq44O877yd44Ko44Oz44OV44Kj44O844Or44OJfOOCqOODrOODleOCoeODs+ODiCjjg7t8772lKT/jgqzjg7N8UmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCcgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICfjgrXjg5bjg57jgrfjg7Pjgqzjg7N844OI44Oz44OX44K944OzfFN1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ+ODluODreODvOODi+ODs+OCsHzjg7Tjg4Pjgqvjg7zjgrl844Oe44K344Oz44Ks44OzfEJyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ+ODouODreODiOODlXzjgrDjg6zjg43jg7zjg4l844OA44Kk44OK44Oe44Kk44OIfE1vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICfjgrXjg7Pjg5fjg6sg5aSq6YOO44CBMjfmrbPjgIHoqJjogIVcXG5TVFIgNzUgQ09OIDYwIFNJWiA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVyA1MCBFRFUgODUg5q2j5rCX5bqmIDU1IOiAkOS5heWKmyAxNCDjg4Djg6Hjg7zjgrjjg7vjg5zjg7zjg4rjgrnvvJoxRDRcXG7jg5Pjg6vjg4nvvJoxIOenu+WLle+8mjcg44Oe44K444OD44Kv44O744Od44Kk44Oz44OI77yaMTAg5bm46YGL77yaNDAg6KOF55Sy77yaMVxcbjHjg6njgqbjg7Pjg4njga7mlLvmkoPlm57mlbDvvJozIOato+awl+W6puWWquWkse+8mjFENC8xRDhcXG7miKbpl5hcXG7lmZvjgb/jgaTjgY0gNTAlICgyNS8xMCnjgIHjg4Djg6Hjg7zjgrggMUQ2XFxu5qC86ZeYIDMwJSAoMTUvNinjgIHjg4Djg6Hjg7zjgrggMUQzK0RCXFxu44OH44Oq44Oz44K444Oj44O8IDQwJSAoMjAvOCnjgIHjg4Djg6Hjg7zjgrggMUQ4KzFcXG7lm57pgb8gNTAlICgyNS8xMClcXG7mioDog71cXG7oqIDjgYTjgY/jgovjgoEgMjUl44CB5Yy75a2mIDQ1JeOAgemaoOWvhiAxMCXjgIFcXG7ogZ7jgY3ogLMgNTAl44CB6Kqs5b6XIDI1JeOAgeW/g+eQhuWtpiA3NSXjgIFcXG7np5HlraYgKOWkqeaWh+WtpikgOTAl44CB56eR5a2mICjmpI3nianlraYpIDM1JeOAgeenkeWtpiAo5YuV54mp5a2mKSAxMCXjgIFcXG7li5Xniankvb/jgYQgNTUl44CB5aSJ6KOFIDIwJeOAgeebruaYnyAzNSXjgIHprYXmg5EgMzAl44CCXFxu6KiA6Kqe77ya6Iux6KqeIDgwJeOAgeOCouOCr+ODreiqniA1JeOAglxcbuWRquaWh++8mk5QQ+OBruWPrOWWmuOAgU5QQ+OBrumAgOaVo+OAgidcbiAgfVxufVxuXG5jb25zdCB0cmFuc2xhdGlvbnMgPSB7XG4gIGVuOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnYWdlJyArICcoXFxcXHMqOik/XFxcXHMrKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1NJWicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdTQU58U2FuaXR5JyArICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ0hQfEhpdCBwb2ludHMnICsgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWMgcG9pbnRzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZW4uZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmVuLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdCdWlsZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybW9yJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5lbi5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZlJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0x1Y2snICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5lbi5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTYW5pdHkgbG9zc3xTQU4gbG9zcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZW4uc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ2RhbWFnZScgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZW4uZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRG9kZ2UnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICdGaWdodGluZ3xGaXJlYXJtc3xCcmF3bHxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBkZToge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ0FsdGVyJyArICcoXFxcXHMqOik/XFxcXHMrKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ0JlcnVmJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS08nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdHUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnTUEnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdHRScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0VSJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnQkknICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ2dTfFNUQXxHZWlzdGlnZSBTdGFiaWxpdMOkdCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1RQfFRyZWZmZXJwdW5rdGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2llcHVua3RlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZGUuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEfFdcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZGUuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU3RhdHVyfFN0YXQuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdQYW56ZXJ1bmcnICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmRlLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQld8QmV3ZWd1bmdzd2VpdGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdHbMO8Y2snICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0FuZ3JpZmZlIHBybyBSdW5kZXxBbmdyaWZmZXxQcm8gUnVuZGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZGUuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU3RhYmlsaXTDpHRzdmVybHVzdCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZGUuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZFtEV10/WytcXFxcZF0qXFxcXC9cXFxcZFtEV10/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ1NjaGFkZW4nICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCt3fGQpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZGUuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZHx3KT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdBdXN3ZWljaGVuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sO10/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArXG4gICAgICAnQW5ncmlmZmV8SGFuZGdlbWVuZ2V8TmFoa2FtcGZ8RmF1c3RmZXVlcndhZmZlfEJlacOfZW4nICtcbiAgICAgICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBwbDoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspJyArICdcXFxccysoPzonICsgJ2xhdGF8bGF0fHJvaycgKyAnKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjogJ1ssXFxcXHNdKicgKyAnWmF3w7NkJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1MnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdLT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdCQycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01PQycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ1pSJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnV1lHJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnV1lLJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQfFBvY3p5dGFsbm/Fm8SHJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFd8UHVua3R5IFd5dHJ6eW1hxYJvxZtjaScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UHVua3R5IE1hZ2lpJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMucGwuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEfEtcXFxcZCspP3wnICtcbiAgICAgIGtleXMucGwuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDogJyg/PCFbYS16XSknICsgJ0tyemVwYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ1BhbmNlcnonICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLnBsLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ1J1Y2gnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnU3pjesSZxZtjaWUnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0YWtpIHcgcnVuZHppZXwjIEF0YWtpJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLnBsLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1V0cmF0YSBQb2N6eXRhbG5vxZtjaXx1dHJhdGEgUCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMucGwuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZFtES10/WytcXFxcZF0qXFxcXC9cXFxcZFtES10/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ29icmHFvGVuaWEnICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtrfGQpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMucGwuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnVW5paycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdXYWxrYXxCcm/FhCBQYWxuYXxCaWphdHlrYXxVZ3J5emllbmllJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBmcjoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspXFxcXHMqJyArICdhbnMnICsgJyg/IVthLXpdKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnRk9SJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnVEFJJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9VJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnw4lEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhKFthLXpdfGRlXFxcXHMpKSg/OicgK1xuICAgICAgJ1NBTnxTYW50w6kgTWVudGFsZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BWfFBvaW50cyBkZSB2aWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFBvaW50cyBkZSBtYWdpZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5mci5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0NhcnJ1cmUnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBcm11cmV8UHJvdGVjdGlvbicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmZyLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTXZ0fE1vdXZlbWVudHxEw6lwbGFjZW1lbnQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdDaGFuY2UnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFxdWVzIHBhciByb3VuZCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5mci5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQZXJ0ZSBkZSBTYW50w6kgbWVudGFsZXxQZXJ0ZSBkZSBTQU4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmZyLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkb21tYWdlfGTDqWfDonRzJyArXG4gICAgICAnKSk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZnIuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRXNxdWl2ZXI/JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQXUgY29udGFjdHzDgCBkaXN0YW5jZXxDb21iYXQgcmFwcHJvY2jDqXxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBlczoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspXFxcXHMqJyArICdhW8Oxw5Fdb3MnICsgJyg/IVthLXpdKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jdXBhY2nDs24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnRlVFJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnVEFNJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9EJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVTJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBBJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ0NPUnxDb3JkdXJhJyArICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQdW50b3MgZGUgdmlkYXxQXFxcXC4gP1ZcXFxcLicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UHVudG9zIE3DoWdpY29zfFB1bnRvcyBkZSBNYWdpYScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lcy5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0NvcnB1bGVuY2lhJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtYWR1cmEnICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmVzLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmltaWVudG8nICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnU3VlcnRlJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdOw7ptZXJvIGRlIEF0YXF1ZXMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZXMuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUMOpcmRpZGEgZGUgY29yZHVyYXxQw6lyZGlkYSBkZSBDT1InICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVzLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYcOxbycgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZXMuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRXNxdWl2YXInICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdDb21iYXRpcnxBcm1hcyBkZSBmdWVnb3xQZWxlYXxNb3JkaXNjbycgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgJ3poLVRXJzoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZXzlubTpvaEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSfOWKm+mHjycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTnzpq5Tos6onICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVp86auU5Z6LJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UfOaZuuWKmycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPV3zmhI/lv5cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVh85pWP5o23JyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQfOWkluiyjicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVXzmlZnogrInICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1NBTnxTYW5pdHl855CG5pm6JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnSFB8SGl0IHBvaW50c3znlJ/lkb0nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5c1snemgtVFcnXS5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0J1aWxkfOmrlOagvCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybW9yfOitt+eUsicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccyooPzxhcm1vcj4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrfOW5uOmBiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzfOaUu+aTiuasoeaVuHwjIOaUu+aTiicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5c1snemgtVFcnXS5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTYW5pdHkgbG9zc3xTQU4gbG9zc3znkIbmmbrllqrlpLF8U0FO5YC85pCN5aSxfFNBTuWAvOWWquWksXzmiaNTQU4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkYW1hZ2V85YK35a6zJyArXG4gICAgICAnKSk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRG9kZ2V86ZaD6YG/fOmWg+i6sicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJT8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ+i/keaIsOaKgOiDvXzlsITmk4rmioDog718QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgamE6IHtcbiAgICBhZ2U6ICdbKO+8iF0/KD88YWdlPlxcXFxkKyknICsgJyhcXFxccyspKig/OicgKyAn5q2zfOaJjScgKyAnKVsp77yJXT9bLOOAgVxcXFxzXSonLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyzjgIFcXFxcc10qJyArICco6IG35qWtKT8nICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFInICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0laJyArICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVycgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88cG93PlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccypbOu+8ml0pP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICcoU0FOfFNhbml0eXzmraPmsJfluqYpJyArXG4gICAgICAnKShcXFxccypbOu+8ml0pP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICcoSFB8SGl0IHBvaW50c3zogJDkuYXlipt844OS44OD44OIKOODu3zvvaUpP+ODneOCpOODs+ODiCknICtcbiAgICAgICcpKFxcXFxzKls677yaXSk/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnKE1QfE1hZ2ljIHBvaW50c3zjg57jgrjjg4Pjgq8o44O7fO+9pSk/44Od44Kk44Oz44OIKScgK1xuICAgICAgJykoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLOOAgVxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuamEuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKls677yaXSk/XFxcXHMqKD88ZGI+WystXT9cXFxccypcXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuamEuZGJOb25lICtcbiAgICAgICcpWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICcoQnVpbGR844OT44Or44OJKScgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88YnVpbGQ+WystXT9cXFxcZCspWyzjgIFcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnKEFybW9yfOijheeUsiknICtcbiAgICAgICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxhcm1vcj4nICtcbiAgICAgIGtleXMuamEuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVss44CBXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnKE1vdmV8TU9WfOenu+WLleeOhz8pJyArICcoXFxcXHMqWzrvvJpdKT9cXFxccyooPzxtb3Y+XFxcXGQrKVss44CBXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnKEx1Y2t85bm46YGLKScgKyAnKFxcXFxzKls677yaXSk/XFxcXHMqKD88bGNrPlxcXFxkK3wtKVss44CBXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICcoQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzfCgoMXwxIHzvvJEp44Op44Km44Oz44OJ44GuKT/mlLvmkoPlm57mlbApJyArXG4gICAgICAnKShcXFxccypbOu+8ml0pP1xcXFxzKig/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuamEuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVss44CBXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnKFNhbml0eSBsb3NzfFNBTiBsb3NzfOato+awl+W6puWWquWksSknICtcbiAgICAgICcpKFxcXFxzKls677yaXVxcXFxEKik/XFxcXHMqKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuamEuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qW1xcXFwv77yPXVxcXFxkRD9bK1xcXFxkXSopWyzjgIFcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0XFxcXHcgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKlss44CBXT9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspWyXvvIVdWyzjgIFdPyg/OlxcXFxzKltcXFxcKO+8iF1cXFxcZCtbXFxcXC/vvI9dXFxcXGQrW1xcXFwp77yJXVxcXFxzKlss44CBXT8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RhbWFnZXzjg4Djg6Hjg7zjgrgnICtcbiAgICAgICcpKT9cXFxccyooPzxkYW1hZ2U+KDo/XFxcXGQrW2REXSk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5qYS5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuamEuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtbZERdKT9cXFxcZCspKilcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnKERvZGdlfOWbnumBvyknICtcbiAgICAgICcpKFxcXFxzKls677yaXSk/XFxcXHMqXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqWyXvvIVdPyg/OlxcXFxzKltcXFxcKO+8iF1cXFxcZCtbXFxcXC/vvI9dXFxcXGQrW1xcXFwp77yJXSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZXxcXFxcZCcgK1xuICAgICAgJykpW1xcXFxzOu+8ml0qXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXVsl77yFXT9cXFxcKT8oXFxcXHMqW1xcXFwo77yIXVxcXFxkK1tcXFxcL++8j11cXFxcZCtbXFxcXCnvvIldKT9cXFxccz9bXFxcXC4s44CBXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAn6L+R5o6lKOaIpumXmHzmoLzpl5gpfOagvOmXmHzmlLvmkoN857Sg5omLfOWZm+OBv+OBpOOBjXzlsITmkoN8QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVss44CBXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5qYS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5qYS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmphLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuamEuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAge1xuICBzdGF0aWMgY2hlY2tMYW5ndWFnZSAobGFuZyA9IG51bGwpIHtcbiAgICBpZiAoIWxhbmcpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRyYW5zbGF0aW9uc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIHJldHVybiBsYW5nXG4gIH1cblxuICBzdGF0aWMgZ2V0RXhhbXBsZVRleHQgKGxhbmcpIHtcbiAgICBsZXQgZXhhbXBsZSA9IGtleXMuZW4uZXhhbXBsZVxuICAgIGlmICh0eXBlb2Yga2V5c1tsYW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGV4YW1wbGUgPSBrZXlzW2xhbmddLmV4YW1wbGVcbiAgICB9XG4gICAgcmV0dXJuIGV4YW1wbGVcbiAgfVxuXG4gIHN0YXRpYyBnZXRUcmFuc2xhdGlvbnMgKCkge1xuICAgIGNvbnN0IG91dHB1dCA9IHt9XG4gICAgZm9yIChjb25zdCBrZXkgaW4ga2V5cykge1xuICAgICAgb3V0cHV0W2tleV0gPSBrZXlzW2tleV0uZGVzY3JpcHRpb25cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgc3RhdGljIGdldEtleXMgKGxhbmcpIHtcbiAgICByZXR1cm4ga2V5c1tsYW5nXSB8fCBrZXlzLmVuXG4gIH1cblxuICBzdGF0aWMgZ2V0UmVndWxhckV4cHJlc3Npb25zIChsYW5nKSB7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uc1tsYW5nXSB8fCB0cmFuc2xhdGlvbnMuZW5cbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIENvQzdBY3RvckltcG9ydGVyIGhlbHBlciBjbGFzcyB0byBpbXBvcnQgYW4gQWN0b3IgZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlciB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnBhcnNlZCA9IHt9XG4gICAgdGhpcy5pdGVtTG9jYXRpb25zID0gJydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgYXNOdW1iZXIgKCkge1xuICAgIHJldHVybiAnbidcbiAgfVxuXG4gIHN0YXRpYyBnZXQgYXNTdHJpbmcgKCkge1xuICAgIHJldHVybiAncydcbiAgfVxuXG4gIC8qKlxuICAgKiBnZXRSZWdFeCwgZ2V0IFJlZ0V4cCBvYmplY3QgaWYgbm90IGN1cnJlbnRseSBhIFJlZ0V4cCBvYmplY3RcbiAgICogQHBhcmFtIHtNaXhlZH0gcmVnZXggUmVnRXhwIG9yIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kaWZpZXJzIGlmIHN0cmluZyB3YXMgc3VwcGxpZWQgaW4gcmVnZXggbGlzdCBvZiBtb2RpZmllcnMgdG8gYWRkIHRvIHRoZSBSZWdFeHBcbiAgICogQHJldHVybnMge1JlZ0V4cH1cbiAgICovXG4gIGdldFJlZ0V4IChyZWdleCwgbW9kaWZpZXJzID0gJ2l1Jykge1xuICAgIGlmIChyZWdleC5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ1JlZ0V4cCcpIHtcbiAgICAgIHJldHVybiByZWdleFxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleCwgbW9kaWZpZXJzKVxuICB9XG5cbiAgLyoqXG4gICAqIGNsZWFuU3RyaW5nLCByZW1vdmVzIG5ldyBsaW5lIGFuZCBjYXJyaWVyIHJldHVybiBjaGFyYWN0ZXIgYW5kIGxhdGVyYWwgc3BhY2VzIGZyb20gYSBzdHJpbmdcbiAgICogQHBhcmFtIHtTdHJpbmd9IHMgdGhlIHN0cmluZyB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgY2xlYW5lZCBzdHJpbmdcbiAgICovXG4gIGNsZWFuU3RyaW5nIChzKSB7XG4gICAgaWYgKHRoaXMua2V5cy5kZXNjcmlwdGlvbiA9PT0gJ0NvQzcuSmFwYW5lc2UnKSB7XG4gICAgICByZXR1cm4gc1xuICAgICAgICAucmVwbGFjZSgvKFxcbnxcXHIpL2csICcgJylcbiAgICAgICAgLnJlcGxhY2UoL15cXHMqLywgJycpXG4gICAgICAgIC5yZXBsYWNlKC9cXHMqWyjvvIhdXFxzKi9nLCAnICgnKVxuICAgICAgICAucmVwbGFjZSgvXFxzKlsp77yJXVxccyovZywgJyknKVxuICAgICAgICAucmVwbGFjZSgvXFxzKlsu44CCXT9cXHMqWy7jgIJdPyQvLCAnJylcbiAgICAgICAgLnJlcGxhY2UoL15b44CI44CKXS8sICcnKVxuICAgICAgICAucmVwbGFjZSgvW+OAieOAi10kLywgJycpXG4gICAgfVxuICAgIHJldHVybiBzXG4gICAgICAucmVwbGFjZSgvKFxcbnxcXHIpL2csICcgJylcbiAgICAgIC5yZXBsYWNlKC9eXFxzKi8sICcnKVxuICAgICAgLnJlcGxhY2UoL1xccypcXC4/XFxzKlxcLj8kLywgJycpXG4gIH1cblxuICAvKipcbiAgICogdHJhbnNsYXRlUm9sbCwgdHJhbnNsYXRlcyBsYW5ndWFnZSBzcGVjaWZpYyBzaG9ydGZvcm0gb2YgZGljZSAoRCkgaW4gcm9sbHNcbiAgICogRXhhbXBsZSBmb3IgR2VybWFuIHJvbGxzOiAxVzQgPT4gMUQ0LlxuICAgKiBEaWNlIHNob3J0Zm9ybSBpcyBjb25maWd1cmVkIHVzaW5nIGtleXMuZGljZVNob3J0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSByb2xsIHRvIGJlIHRyYW5zbGF0ZWRcbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIHRyYW5zbGF0ZWQgcm9sbFxuICAgKi9cbiAgdHJhbnNsYXRlUm9sbCAocykge1xuICAgIGlmICh0eXBlb2YgcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBzXG4gICAgaWYgKHR5cGVvZiB0aGlzLmtleXMuZGljZVNob3J0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKFxuICAgICAgICAnKD88bjE+XFxcXGQrKScgKyB0aGlzLmtleXMuZGljZVNob3J0ICsgJyg/PG4yPlxcXFxkKyknLFxuICAgICAgICAnaXVnJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIHMucmVwbGFjZShyZWdFeCwgJyQ8bjE+RCQ8bjI+JylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogdG9IVE1MLCBjb252ZXJ0cyBhIHN0cmluZyB0byBIVE1MIHN0cmlwaW5nIG91dCBlbXB0eSBsaW5lcyBvciBsaW5lcyB0aGF0IGNvbnRhaW4ganVzdCAsIG9yIC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHMgdGhlIHN0cmluZyB0byBjb252ZXJ0XG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBIVE1MIG9yIGFuIGVtcHR5IHN0cmluZ1xuICAgKi9cbiAgdG9IVE1MIChzKSB7XG4gICAgaWYgKHMudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHMgPSBzXG4gICAgICAudHJpbSgpXG4gICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAubWFwKHRleHQgPT4gdGV4dC50cmltKCkucmVwbGFjZSgvXlssLlxcc+OAgeOAgl0rJC8sICcnKSlcbiAgICAgIC5maWx0ZXIodGV4dCA9PiB0ZXh0KVxuICAgICAgLmpvaW4oJzwvcD48cD4nKVxuICAgIGlmIChzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHJldHVybiAnPHA+JyArIHMgKyAnPC9wPidcbiAgfVxuXG4gIC8qKlxuICAgKiBjaGVjayBleHBlY3RzIGEga2V5IGZyb20gdGhpcy5yZWdFeCB3aWxsIGF0dGVtcHQgdG8gbWF0Y2ggdGhlIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHJlZ0V4S2V5IGtleSBpbiB0aGlzLnJlZ0V4XG4gICAqIEBwYXJhbSB7SlNPTn1cbiAgICogLSByZW1vdmVGcm9tVGV4dCByZW1vdmUgZnJvbSB0aGlzLnRleHRcbiAgICogLSBzYXZlS2V5cyBhZGQgZ3JvdXAga2V5cyB0byB0aGlzLnBhcnNlZFxuICAgKiAtIHR5cGUgSWYgYWRkaW5nIHdpdGggc2F2ZUtleXMgc2V0IHR5cGUgKENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nIC8gQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIpXG4gICAqIC0gdGV4dCBJZiBzZXQgdXNlIHRoaXMgaW5zdGVhZCBvZiB0aGlzLnRleHRcbiAgICogLSByZXF1aXJlZEdyb3VwIElmIG5vdCBmYWxzZSByZXF1aXJlIHNwZWNpZmllZCBrZXkgaW4gUmVnRXhwIGdyb3Vwc1xuICAgKiBAcmV0dXJucyB7RmFsc2V9L3tKU09OIGdyb3VwcyAnJyBpcyBtYXRjaGVkIHN0cmluZ31cbiAgICovXG4gIGNoZWNrIChcbiAgICByZWdFeEtleSxcbiAgICB7XG4gICAgICByZW1vdmVGcm9tVGV4dCA9IHRydWUsXG4gICAgICBzYXZlS2V5cyA9IHRydWUsXG4gICAgICB0eXBlID0gQ29DN0FjdG9ySW1wb3J0ZXIuYXNTdHJpbmcsXG4gICAgICB0ZXh0ID0gZmFsc2UsXG4gICAgICByZXF1aXJlZEdyb3VwID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgbGV0IG91dHB1dCA9IGZhbHNlXG4gICAgbGV0IHJlZ0V4cCA9IGZhbHNlXG4gICAgaWYgKHR5cGVvZiB0aGlzLnJlZ0V4W3JlZ0V4S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJlZ0V4cCA9IHRoaXMuZ2V0UmVnRXgodGhpcy5yZWdFeFtyZWdFeEtleV0pXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5rZXlzW3JlZ0V4S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJlZ0V4cCA9IHRoaXMuZ2V0UmVnRXgodGhpcy5rZXlzW3JlZ0V4S2V5XSlcbiAgICB9XG4gICAgaWYgKHJlZ0V4cCAhPT0gZmFsc2UpIHtcbiAgICAgIGlmICh0ZXh0ID09PSBmYWxzZSkge1xuICAgICAgICB0ZXh0ID0gdGhpcy50ZXh0XG4gICAgICB9XG4gICAgICBjb25zdCBjaGVjayA9IHJlZ0V4cC5leGVjKHRleHQpXG4gICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICBpZiAoXG4gICAgICAgIGNoZWNrICE9PSBudWxsICYmXG4gICAgICAgIChyZXF1aXJlZEdyb3VwID09PSBmYWxzZSB8fFxuICAgICAgICAgIHR5cGVvZiAoY2hlY2suZ3JvdXBzIHx8IHt9KVtyZXF1aXJlZEdyb3VwXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICApIHtcbiAgICAgICAgb3V0cHV0ID0gY2hlY2suZ3JvdXBzIHx8IHt9XG4gICAgICAgIGlmIChyZW1vdmVGcm9tVGV4dCkge1xuICAgICAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKGNoZWNrWzBdLnRyaW0oKSwgJ1xcbicpLnRyaW0oKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzYXZlS2V5cykge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGNoZWNrLmdyb3VwcykpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nOlxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBTdHJpbmcoY2hlY2suZ3JvdXBzW2tleV0pLnJlcGxhY2UoJ1xcbicsICcgJylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyOlxuICAgICAgICAgICAgICAgIHZhbHVlID0gTnVtYmVyKGNoZWNrLmdyb3Vwc1trZXldKVxuICAgICAgICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gTnVtYmVyKGNoZWNrLmdyb3Vwc1trZXldKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXRwdXRbJy1zb3VyY2UnXSA9IGNoZWNrWzBdXG4gICAgICAgIG91dHB1dFsnLWluZGV4J10gPSBjaGVjay5pbmRleFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc0NvbWJhdCBleHRyYWN0cyBjb21iYXQgLyBkb2RnZSBpbmZvcm1hdGlvbiBmcm9tIGEgc3Vic2VjdGlvbiBvZiB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgY29tYmF0IHNlY3Rpb25cbiAgICogQHJldHVybnMgdm9pZFxuICAgKi9cbiAgcHJvY2Vzc0NvbWJhdCAodGV4dCkge1xuICAgIGlmICh0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ2NvbWJhdCB0ZXh0JywgdGV4dClcbiAgICB9XG4gICAgbGV0IHdlYXBvblxuICAgIGxldCBkb2RnZVxuICAgIGxldCBuZXdsaW5lXG4gICAgbGV0IGxhc3RQZXJjZW50ID0gZmFsc2VcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgaWYgKFxuICAgICAgICAoZG9kZ2UgPSB0aGlzLmNoZWNrKCd3ZWFwb25Eb2RnZScsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pKVxuICAgICAgKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoZG9kZ2VbJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuc2tpbGxzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkLnNraWxscyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuc2tpbGxzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHRoaXMuY2xlYW5TdHJpbmcoZG9kZ2UubmFtZSksXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihkb2RnZS5wZXJjZW50YWdlKSxcbiAgICAgICAgICBwdXNoOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgKHdlYXBvbiA9IHRoaXMuY2hlY2soJ3dlYXBvbicsIHtcbiAgICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgICAgdGV4dCxcbiAgICAgICAgICByZXF1aXJlZEdyb3VwOiBsYXN0UGVyY2VudCA9PT0gZmFsc2UgPyAncGVyY2VudGFnZScgOiBmYWxzZVxuICAgICAgICB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHdlYXBvblsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLm5hbWUgfHwgJycpXG4gICAgICAgIGxldCBkYW1hZ2UgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5jbGVhblN0cmluZyh3ZWFwb24uZGFtYWdlIHx8ICcnKSlcbiAgICAgICAgY29uc3QgaXNSYW5nZWQgPSAhIShcbiAgICAgICAgICB0aGlzLmNoZWNrKCdoYW5kZ3VuJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygncmlmbGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdzbWInLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdtYWNoaW5lR3VuJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbGF1bmNoZWQnLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgd2VhcG9uLnBlcmNlbnRhZ2UgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygd2VhcG9uLnBlcmNlbnRhZ2UgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIGxhc3RQZXJjZW50ID0gTnVtYmVyKHdlYXBvbi5wZXJjZW50YWdlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RQZXJjZW50ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGxldCBmb3VuZFxuICAgICAgICBsZXQgYWhkYiA9IGZhbHNlXG4gICAgICAgIGxldCBhZGRiID0gZmFsc2VcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGZvdW5kID0gdGhpcy5nZXRSZWdFeChcbiAgICAgICAgICAgICdcXFxccypbKy1dP1xcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmhhbGZkYiArXG4gICAgICAgICAgICAgICcpXFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLmtleXMuZnVsbGRiICtcbiAgICAgICAgICAgICAgJyk/Wy0rXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMucGFyc2VkLmRiLnJlcGxhY2UoL15bLStdLywgJycpICtcbiAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICkuZXhlYyhkYW1hZ2UpXG4gICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICBhaGRiID0gdHJ1ZVxuICAgICAgICAgICAgZGFtYWdlID0gZGFtYWdlLnJlcGxhY2UoZm91bmRbMF0sICcnKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAgICdcXFxccypbKy1dP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLmtleXMuZnVsbGRiICtcbiAgICAgICAgICAgICAgICAnKVxcXFxzKlstK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkLmRiLnJlcGxhY2UoL15bLStdLywgJycpICtcbiAgICAgICAgICAgICAgICAnKT8nXG4gICAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgIGFkZGIgPSB0cnVlXG4gICAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGZvdW5kKVxuICAgICAgICBjb25zdCBkYW1hZ2VzID0gZGFtYWdlLnNwbGl0KCcvJylcbiAgICAgICAgY29uc3QgaXNTaG90Z3VuID0gZGFtYWdlcy5sZW5ndGggPT09IDNcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgc2tpbGw6IHtcbiAgICAgICAgICAgICAgaWQ6IGxhc3RQZXJjZW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICBub3JtYWw6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXNTaG90Z3VuID8gMTAgOiAwLFxuICAgICAgICAgICAgICAgIGRhbWFnZTogZGFtYWdlc1swXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBsb25nOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDIwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGlzU2hvdGd1biA/IGRhbWFnZXNbMV0gOiAnJ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBleHRyZW1lOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDUwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGlzU2hvdGd1biA/IGRhbWFnZXNbMl0gOiAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBzb21lIG9mIHRoZSBwcm9wZXJ0aWVzXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1biA9IGlzU2hvdGd1blxuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QgPSBpc1JhbmdlZCB8fCBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSA9ICFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2RcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5haGRiID0gYWhkYlxuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIgPSBhZGRiXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuYXR0YWNrcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzID0gW11cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzLnB1c2goZGF0YSlcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eKC4rKVxcbi8pKSkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKG5ld2xpbmVbMF0sICdcXG4nKVxuICAgICAgfSBlbHNlIGlmICgobmV3bGluZSA9IHRleHQubWF0Y2goL15bXlxcbl0rJC8pKSkge1xuICAgICAgICB0ZXh0ID0gJydcbiAgICAgIH1cbiAgICB9IHdoaWxlIChtYXhMb29wcyA+IDAgJiYgKCEhd2VhcG9uIHx8ICEhZG9kZ2UgfHwgISF0ZXh0KSlcbiAgICBpZiAobWF4TG9vcHMgPT09IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVW5leHBlY3RlZFdlYXBvblRleHQnKVxuICAgICAgKVxuICAgICAgY29uc29sZS5kZWJ1ZygnVW5leHBlY3RlZCB3ZWFwb25zOicsIHRleHQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NTa2lsbHMgZXh0cmFjdHMgc2tpbGxzIC8gbGFuZ3VhZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIHNraWxscyAvIGxhbmd1YWdlIHNlY3Rpb25cbiAgICogQHJldHVybnMgdm9pZFxuICAgKi9cbiAgcHJvY2Vzc1NraWxscyAodGV4dCwga2V5ID0gJ3NraWxscycpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGxldCBza2lsbFxuICAgIGxldCBtYXhMb29wcyA9IDQwXG4gICAgZG8ge1xuICAgICAgbWF4TG9vcHMtLVxuICAgICAgdGV4dCA9IHRleHQudHJpbSgpXG4gICAgICBza2lsbCA9IHRoaXMuY2hlY2soJ3NraWxsJywgeyBzYXZlS2V5czogZmFsc2UsIHRleHQgfSlcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHNraWxsWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWRba2V5XS5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKHNraWxsLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoc2tpbGwucGVyY2VudGFnZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IHdoaWxlIChtYXhMb29wcyA+IDAgJiYgc2tpbGwpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRTa2lsbHNUZXh0JylcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgc2tpbGxzOicsIHRleHQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NTcGVsbHMgZXh0cmFjdHMgc3BlbGwgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIHNwZWxsIHNlY3Rpb25cbiAgICogQHJldHVybnMgdm9pZFxuICAgKi9cbiAgcHJvY2Vzc1NwZWxscyAodGV4dCkge1xuICAgIGlmICh0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBicmVha3MgPSB0ZXh0LnNwbGl0KC9cXC5cXHI/XFxuLylcbiAgICBpZiAoYnJlYWtzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRleHQgPSBicmVha3NbMF1cbiAgICB9XG4gICAgY29uc3Qgc3BlbGxzQXJyID0gdGV4dC5yZXBsYWNlKC8oW1xcblxccl0rKS9nLCAnICcpLnNwbGl0KC8oPzwhXFwoW14pXSspWyzjgIFdLylcbiAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZSh0ZXh0LnRyaW0oKSwgJ1xcbicpXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHNBcnIpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuc3BlbGxzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnBhcnNlZC5zcGVsbHMgPSBbXVxuICAgICAgfVxuICAgICAgdGhpcy5wYXJzZWQuc3BlbGxzLnB1c2godGhpcy5jbGVhblN0cmluZyhzcGVsbCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHBhcnNlQ2hhcmFjdGVyIGV4dHJhY3RzIGluZm9ybWF0aW9uIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uIG9mIGFuIGVudGl0eSAoTlBDIG9yIENyZWF0dXJlKVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGVudGl0eVxuICAgKiBAcmV0dXJucyBleHRyYWN0ZWREYXRhIG9iamVjdCB3aXRoIHRoZSBlbnRpdHkgZGF0YVxuICAgKi9cbiAgYXN5bmMgcGFyc2VDaGFyYWN0ZXIgKHRleHQpIHtcbiAgICAvLyBSZXBsYWNlIFwiRW4gRGFzaFwiIGFuZCBcIkVtIERhc2hcIiBkYXNoZXMgd2l0aCAtIGFuZCBcIlJpZ2h0IFNpbmdsZSBRdW90YXRpb24gTWFya1wiIHdpdGggJ1xuICAgIHRoaXMudGV4dCA9IFN0cmluZyh0ZXh0KVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTN8XFx1MjAxNHxcXHUyMjEyL2csICctJylcbiAgICAgIC5yZXBsYWNlKC9cXHUyMDE5L2csIFwiJ1wiKVxuICAgICAgLnJlcGxhY2UoL1tcXHVkYmMwLVxcdWRiZmVdW1xcdWRjMDAtXFx1ZGZmZl0vZywgJycpXG4gICAgLy8gRWFybGllc3QgY2hhcmFjdGVyIHRoYXQgaGFzIGJlZW4gdXNlZCwgdG8gd29yayBvdXQgdGhlIGhlYWRlclxuICAgIGxldCBtaW4gPSB0aGlzLnRleHQubGVuZ3RoXG4gICAgLy8gU1RSLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGxldCBjaGVjayA9IHRoaXMuY2hlY2soJ3N0cicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbXG4gICAgICAnLWluZGV4J1xuICAgIF1cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gQ09OLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnY29uJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gU0laLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnc2l6JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gSU5ULCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnaW50JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gUE9XLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygncG93JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gREVYLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZGV4JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gQVBQLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYXBwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gRURVLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZWR1JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gU0FOLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnc2FuJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gSFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdocCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIE1QLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbXAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBXb3JrIG91dCB0aGUgaGVhZGVyIGJhc2VkIG9uIHByZXZpb3VzIG1pbmltdW0gbWF0Y2hlZCBjaGFyYWN0ZXJcbiAgICBsZXQgaGVhZGVyXG4gICAgaWYgKG1pbiA+IDApIHtcbiAgICAgIGhlYWRlciA9IHRoaXMudGV4dC5zdWJzdHIoMCwgbWluKVxuICAgICAgLy8gR2V0IG5hbWUgZnJvbSBoZWFkZXJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbmFtZScsIHsgdGV4dDogaGVhZGVyIH0pXG4gICAgICBpZiAoY2hlY2sgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIElmIG5vdCBmb3VuZCB1c2UgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgICB0aGlzLnBhcnNlZC5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkVW5uYW1lZENoYXJhY3RlcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZW1vdmUgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcbiAgICAgIH1cbiAgICAgIC8vIEdldCBhZ2UgZnJvbSBoZWFkZXJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYWdlJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgZm91bmQgcmVtb3ZlIGFnZSBmcm9tIGhlYWRlclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcbiAgICAgIH1cbiAgICAgIC8vIEdldCBvY2N1cGF0aW9uIGZyb20gaGVhZGVyXG4gICAgICBpZiAoIXRoaXMuY2hlY2soJ29jY3VwYXRpb24nLCB7IHRleHQ6IGhlYWRlciB9KSAmJiBoZWFkZXIudHJpbSgpICE9PSAnJykge1xuICAgICAgICAvLyBJZiBvY2N1cGF0aW9uIGlzIG5vdCBmb3VuZCBidXQgdGhlcmUgaXMgYSBoZWFkZXIgc2V0IHRoZSBvY2N1cGF0aW9uIHRvIHRoZSByZW1haW5pbmcgaGVhZGVyXG4gICAgICAgIGxldCBvY2N1cGF0aW9uID0gaGVhZGVyXG4gICAgICAgIGlmIChoZWFkZXIuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGZ1bGwgc3RvcCBqdXN0IHVzZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgaGVhZGVyIGFzIHRoZSBvY2N1cGF0aW9uXG4gICAgICAgICAgb2NjdXBhdGlvbiA9IGhlYWRlci5zdWJzdHIoMCwgaGVhZGVyLmluZGV4T2YoJy4nKSArIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiA9IG9jY3VwYXRpb25cbiAgICAgICAgICAucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvLCQvLCAnJylcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2Uob2NjdXBhdGlvbi50cmltKCksICdcXG4nKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGVyZSBpcyBubyBoZWFkZXIgc2V0IGRlZmF1bHQgTlBDIG5hbWVcbiAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gb2NjdXBhdGlvbiBidXQgbm8gYWdlIGNoZWNrIGlmIHRoZSBvY2N1cGF0aW9uIHN0YXJ0cyBudW1iZXIgc3BsaXQgYWdlIGFuZCBvY2N1cGF0aW9uXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQuYWdlID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvbkFnZSA9IHRoaXMucGFyc2VkLm9jY3VwYXRpb24ubWF0Y2goXG4gICAgICAgIC9eKD88YWdlPlxcZCspLCg/PG9jY3VwYXRpb24+LispJC9cbiAgICAgIClcbiAgICAgIGlmIChvY2N1cGF0aW9uQWdlKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLmFnZSA9IG9jY3VwYXRpb25BZ2UuZ3JvdXBzLmFnZVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvbkFnZS5ncm91cHMub2NjdXBhdGlvbi50cmltKClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gR2V0IGRhbWFnZSBib251cywgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcbiAgICBpZiAoXG4gICAgICAhdGhpcy5jaGVjaygnZGInKSB8fFxuICAgICAgdGhpcy5jaGVjaygnZGJOb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuZGJcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5kYiA9ICcwJ1xuICAgIH1cbiAgICB0aGlzLnBhcnNlZC5kYiA9IHRoaXMudHJhbnNsYXRlUm9sbCh0aGlzLnBhcnNlZC5kYilcbiAgICAvLyBHZXQgYnVpbGRcbiAgICB0aGlzLmNoZWNrKCdidWlsZCcpXG4gICAgLy8gR2V0IGFybW9yLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdhcm1vcicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdhcm1vck5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hcm1vclxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmFybW9yID0gJzAnXG4gICAgfVxuICAgIC8vIEdldCBtb3ZlbWVudFxuICAgIHRoaXMuY2hlY2soJ21vdicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlcbiAgICAvLyBHZXQgbHVja1xuICAgIHRoaXMuY2hlY2soJ2xjaycsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlcbiAgICAvLyBHZXQgc2FuaXR5IGxvc3NcbiAgICB0aGlzLmNoZWNrKCdzYW5Mb3NzJylcbiAgICB0aGlzLnBhcnNlZC5zYW5Mb3NzID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLnNhbkxvc3MpXG4gICAgLy8gR2V0IGF0dGFja3MgcGVyIHJvdW5kLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZCcpICYmXG4gICAgICB0aGlzLmNoZWNrKCdhdHRhY2tzUGVyUm91bmROb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuYXR0YWNrc1BlclJvdW5kXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrc1BlclJvdW5kID0gJzAnXG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgY29tYmF0IHNlY3Rpb25cbiAgICB0aGlzLnRleHQgPSAnXFxuJyArIHRoaXMudGV4dFxuICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXG4gICAgaWYgKHRoaXMudGV4dC5tYXRjaChzZWN0aW9ucykgPT09IG51bGwpIHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGd1ZXNzIHdoZXJlIGl0IHN0YXJ0c1xuICAgICAgc2VjdGlvbnMgPSB0aGlzLmNoZWNrKCdndWVzc1N0YXJ0Q29tYmF0Jywge1xuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZVxuICAgICAgfSlcbiAgICAgIGlmIChzZWN0aW9ucykge1xuICAgICAgICAvLyBBZGQgYSBoZWFkZXIgdG8gdGhlIHN0YXJ0IG9mIHRoZSBjb21iYXQgc2VjdGlvblxuICAgICAgICB0aGlzLnRleHQgPSBbXG4gICAgICAgICAgdGhpcy50ZXh0LnNsaWNlKDAsIHNlY3Rpb25zWyctaW5kZXgnXSksXG4gICAgICAgICAgdGhpcy5rZXlzLm5ld0NvbWJhdEhlYWRlcixcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2Uoc2VjdGlvbnNbJy1pbmRleCddKVxuICAgICAgICBdLmpvaW4oJycpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwbGl0IHRoZSBzZWN0aW9ucyBDb21iYXQsIFNraWxscywgTGFuZ3VhZ2VzLCBhbmQgU3BlbGxzXG4gICAgY29uc3QgcmVnRXhwU2VjdGlvbnMgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXguc2VjdGlvbnMsICdpJylcbiAgICBzZWN0aW9ucyA9IHRoaXMudGV4dC5zcGxpdChyZWdFeHBTZWN0aW9ucylcbiAgICBpZiAoc2VjdGlvbnMgIT09IG51bGwpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHNlY3Rpb25zLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBjb21iYXRcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NDb21iYXQoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvblNraWxscyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIHNraWxsc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NraWxscyhzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uTGFuZ2F1Z2VzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgbGFuZ3VhZ2VzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSwgJ2xhbmd1YWdlcycpXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU3BlbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc3BlbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU3BlbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBBbnkgcmVtYWluaW5nIHRleHQgYWRkIHRvIEdNIG5vdGVzIHNvIHlvdSBjYW4gZWFzaWx5IHNlZSBpZiB0aGVyZSBhcmUgYW55IG9idmlvdXMgaXNzdWUgb3IganVzdCBnZW5lcmFsIG5vdGVzXG4gICAgdGhpcy5wYXJzZWQuZ21ub3RlcyA9IHRoaXMudG9IVE1MKHRoaXMudGV4dClcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRcbiAgfVxuXG4gIGRpc2FibGVBdHRyaWJBdXRvIChrZXksIGF0dHJpYlZhbHVlLCBjaGVjaywgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgoMCwgTnVtYmVyKGF0dHJpYlZhbHVlKSlcbiAgICBpZiAodmFsdWUgIT09IE51bWJlcihjaGVjaykpIHtcbiAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5hdXRvYF0gPSBmYWxzZVxuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LnZhbHVlYF0gPSB2YWx1ZVxuICAgICAgaWYgKGtleSA9PT0gJ2J1aWxkJykge1xuICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0uY3VycmVudGBdID0gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5tYXhgXSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGVudGl0eSAoYG5wY2Agb3IgYGNyZWF0dXJlYCkgZnJvbSB0aGUgb2JqZWN0IHdpdGggdGhlIGFscmVhZHkgcGFyc2VkIGVudGl0eSBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFyYWN0ZXJEYXRhIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVudGl0eVR5cGVTdHJpbmcgZW50aXR5IHR5cGUgb2J0YWluZWQgZnJvbSB0aGUgdXNlciBpbnB1dFxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBjcmVhdGVkIGZvdW5kcnkgYEFjdG9yYFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW50aXR5IChjaGFyYWN0ZXJEYXRhLCBlbnRpdHlUeXBlKSB7XG4gICAgY29uc3QgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID1cbiAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMuY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzKClcbiAgICBpZiAoZW50aXR5VHlwZSAhPT0gJ25wYycpIHtcbiAgICAgIGVudGl0eVR5cGUgPSAnY3JlYXR1cmUnXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3RlckRhdGEubmFtZSxcbiAgICAgIHR5cGU6IGVudGl0eVR5cGUsXG4gICAgICBmb2xkZXI6IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlci5pZCxcbiAgICAgIHN5c3RlbTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuaXRlbXMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdocCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocC52YWx1ZSxcbiAgICAgICAgbnBjLmhwTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtcCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgbnBjLm1wTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbW92JyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdi52YWx1ZSxcbiAgICAgICAgbnBjLm1vdixcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnYnVpbGQnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQudmFsdWUsXG4gICAgICAgIG5wYy5idWlsZCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyhjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGIudmFsdWUpLnJlcGxhY2UoL15cXCtcXHMqLywgJycpXG4gICAgICBpZiAodmFsdWUgIT09IFN0cmluZyhucGMuZGIpKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJ10gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlRGF0YTonLCB1cGRhdGVEYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVJdGVtRGF0YSA9IFtdXG4gICAgbGV0IGxhc3RXZWFwb25Ta2lsbCA9IG51bGxcbiAgICBmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy53ZWFwb25Ta2lsbHMpIHtcbiAgICAgIGlmIChwYWlyWzBdICE9PSBmYWxzZSkge1xuICAgICAgICBsYXN0V2VhcG9uU2tpbGwgPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICAgIGkgPT4gaS5uYW1lID09PSBwYWlyWzBdLm5hbWUgJiZcbiAgICAgICAgICAgIGkudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgTnVtYmVyKGkuc3lzdGVtLnZhbHVlKSA9PT0gTnVtYmVyKHBhaXJbMF0uc3lzdGVtLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclsxXS5uYW1lICYmXG4gICAgICAgICAgaS50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgICAgIGkuc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UgPT09IHBhaXJbMV0uc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IGxhc3RXZWFwb25Ta2lsbFswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IGxhc3RXZWFwb25Ta2lsbFswXS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1cGRhdGVJdGVtRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCd1cGRhdGVJdGVtRGF0YTonLCB1cGRhdGVJdGVtRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgIH1cbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogYWN0b3JEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YVxuICAgKi9cbiAgYWN0b3JEYXRhIChwYykge1xuICAgIGNvbnN0IHN5c3RlbSA9IHtcbiAgICAgIGNoYXJhY3RlcmlzdGljczoge30sXG4gICAgICBhdHRyaWJzOiB7fSxcbiAgICAgIGluZm9zOiB7fSxcbiAgICAgIHNwZWNpYWw6IHt9LFxuICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgfSxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIGxvY2tlZDogZmFsc2UsXG4gICAgICAgIGRpc3BsYXlGb3JtdWxhOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAnc3RyJyxcbiAgICAgICdjb24nLFxuICAgICAgJ3NpeicsXG4gICAgICAnZGV4JyxcbiAgICAgICdhcHAnLFxuICAgICAgJ2ludCcsXG4gICAgICAncG93JyxcbiAgICAgICdlZHUnXG4gICAgXSkge1xuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XG4gICAgICAgICAgdmFsdWU6IE51bWJlcihwY1trZXldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc2FuJywgJ21vdicsICdidWlsZCcsICdhcm1vcicsICdsY2snLCAnaHAnLCAnbXAnXSkge1xuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzeXN0ZW0uYXR0cmlic1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3lzdGVtLmF0dHJpYnMuZGIgPSB7XG4gICAgICAgIHZhbHVlOiBwYy5kYlxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ2FnZScsICdvY2N1cGF0aW9uJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc3lzdGVtLmluZm9zW2tleV0gPSBwY1trZXldXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuc2FuTG9zcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IFtwYXNzZWQsIGZhaWxlZF0gPSBwYy5zYW5Mb3NzLnNwbGl0KC9bL++8j10vKVxuICAgICAgc3lzdGVtLnNwZWNpYWwuc2FuTG9zcyA9IHtcbiAgICAgICAgY2hlY2tQYXNzZWQ6IHBhc3NlZCxcbiAgICAgICAgY2hlY2tGYWlsbGVkOiBmYWlsZWRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzUGVyUm91bmQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzeXN0ZW0uc3BlY2lhbC5hdHRhY2tzUGVyUm91bmQgPSBOdW1iZXIocGMuYXR0YWNrc1BlclJvdW5kKVxuICAgIH1cbiAgICBzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyID0gcGMuZ21ub3Rlc1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdhY3RvckRhdGE6Jywgc3lzdGVtKVxuICAgIH1cbiAgICByZXR1cm4gc3lzdGVtXG4gIH1cblxuICAvKipcbiAgICogaXRlbXNEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBpdGVtIGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IHBjIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXIgYXMgcmV0dXJuZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhXG4gICAqL1xuICBhc3luYyBpdGVtc0RhdGEgKHBjKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIHRoaXMud2VhcG9uU2tpbGxzID0gW11cbiAgICAvLyBXZWFwb24gc2tpbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBhdHRhY2sgb2YgcGMuYXR0YWNrcykge1xuICAgICAgICBsZXQgc2tpbGwgPSBmYWxzZVxuICAgICAgICBpZiAoYXR0YWNrLnN5c3RlbT8uc2tpbGw/LmlkICE9PSB0cnVlKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLndlYXBvblNraWxsKGF0dGFjaylcbiAgICAgICAgICBpdGVtcy5wdXNoKHNraWxsKVxuICAgICAgICB9XG4gICAgICAgIGF0dGFjay5zeXN0ZW0uc2tpbGwuaWQgPSBudWxsXG4gICAgICAgIGl0ZW1zLnB1c2goYXR0YWNrKVxuICAgICAgICB0aGlzLndlYXBvblNraWxscy5wdXNoKFtmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbCksIGF0dGFja10pXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNraWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc2tpbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5za2lsbHMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWQgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpZiAodHlwZW9mIHNraWxsLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IHNraWxsLnB1c2hcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2tpbGwucHVzaCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCA9IHNraWxsLnB1c2hcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCBvcHRpb25zKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBMYW5ndWFnZXNcbiAgICBpZiAodHlwZW9mIHBjLmxhbmd1YWdlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMubGFuZ3VhZ2VzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaXRlbXMucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goXG4gICAgICAgICAgICBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCB7XG4gICAgICAgICAgICAgIGltZzogQ29DN0l0ZW0uaWNvbkxhbmd1YWdlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkxhbmd1YWdlU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwZWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc3BlbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHBjLnNwZWxscykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdzcGVsbCcsIG5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBpdGVtcy5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNwZWxsKG5hbWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqIHdlYXBvblNraWxsIHRyaWVzIHRvIGd1ZXNzIHdoYXQga2luZCBvZiB3ZWFwb24gc2tpbGwgdG8gdXNlIGZvciB3ZWFwb24gZnJvbSBpdCdzIG5hbWVcbiAgICogQHBhcmFtIHdlYXBvbjogSlNPTiwgd2VhcG9uIGRhdGFcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb24pIHtcbiAgICBsZXQgc2tpbGwgPSBudWxsXG4gICAgY29uc3QgbG9jYWxpemVkRmlyZWFybSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICBpZiAodGhpcy5nZXRSZWdFeCh0aGlzLmtleXMuaGFuZGd1bikuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgbG9jYWxpemVkRmlyZWFybSArICcgKCcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxOYW1lSGFuZGd1bicpICsgJyknLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIEhhbmRndW4gc2tpbGw6IGAsIHNraWxsKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCh0aGlzLmtleXMucmlmbGUpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIGxvY2FsaXplZEZpcmVhcm0gKyAnICgnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsTmFtZVJpZmxlU2hvdGd1bicpICsgJyknLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgbG9jYWxpemVkRmlyZWFybSArICcgKCcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxOYW1lUmlmbGUnKSArICcpJywge1xuICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBsb2NhbGl6ZWRGaXJlYXJtICsgJyAoJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbE5hbWVTaG90Z3VuJykgKyAnKScsIHtcbiAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBSaWZsZSBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCh0aGlzLmtleXMuc21iKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBsb2NhbGl6ZWRGaXJlYXJtICsgJyAoJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbE5hbWVTbWInKSArICcpJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBTdWJtYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCh0aGlzLmtleXMubWFjaGluZUd1bikuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgbG9jYWxpemVkRmlyZWFybSArICcgKCcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxuYW1lTWFjaGluZUd1bicpICsgJyknLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIE1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KHRoaXMua2V5cy5sYXVuY2hlZCkuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgbG9jYWxpemVkRmlyZWFybSArICcgKCcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxuYW1lTGF1bmNoJykgKyAnKScsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgTGF1bmNoIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChza2lsbCAhPT0gbnVsbCAmJiB0eXBlb2Ygc2tpbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBza2lsbENsb25lID0gc2tpbGwuY2xvbmUoe1xuICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICB2YWx1ZTogd2VhcG9uLnN5c3RlbT8uc2tpbGw/LmlkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2tpbGxDbG9uZVxuICAgIH1cbiAgICBjb25zdCBmaXJlYXJtcyA9IHdlYXBvbi5zeXN0ZW0/LnByb3BlcnRpZXM/LnJuZ2RcbiAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICB3ZWFwb24ubmFtZSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgIClcbiAgICApXG4gICAgY29uc3QgbmV3U2tpbGwgPSB7XG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBiYXNlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWQsXG4gICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICAgIGBXZWFwb24gc2tpbGwgbm90IGZvdW5kIGZvciAke3dlYXBvbi5uYW1lfSwgY3JlYXRpbmcgYSBuZXcgb25lYCxcbiAgICAgICAgbmV3U2tpbGxcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG5ld1NraWxsXG4gIH1cblxuICAvKipcbiAgICogbmVlZHNDb252ZXJzaW9uIGRvZXMgYW4gZXZhbHVhdGlvbiB0byBzZWUgaWYgdGhlIGdpdmVuIG5wYyBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gN3RoIEVkaXRpb25cbiAgICogUmV0dXJucyBgZmFsc2VgIHdoZW4gYW55IG9mIHRoZSBDaGFyYWN0ZXJpc3RpY3MgdmFsdWUgaXQncyBhYm92ZSAyOVxuICAgKi9cbiAgbmVlZHNDb252ZXJzaW9uIChucGMpIHtcbiAgICBsZXQgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gdHJ1ZVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICdzdHInLFxuICAgICAgJ2NvbicsXG4gICAgICAnc2l6JyxcbiAgICAgICdkZXgnLFxuICAgICAgJ2FwcCcsXG4gICAgICAnaW50JyxcbiAgICAgICdwb3cnLFxuICAgICAgJ2VkdSdcbiAgICBdKSB7XG4gICAgICBpZiAodHlwZW9mIG5wY1trZXldICE9PSAndW5kZWZpbmVkJyAmJiBucGNba2V5XSA+IDMwKSB7XG4gICAgICAgIG5lZWRzQ29udmVyc2lvblJlc3VsdCA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCduZWVkc0NvbnZlcnNpb246JywgbmVlZHNDb252ZXJzaW9uUmVzdWx0KVxuICAgIH1cbiAgICByZXR1cm4gbmVlZHNDb252ZXJzaW9uUmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlQWN0b3IgbWFpbiBtZXRob2QgdG8gY3JlYXRlIGFuIGBBY3RvcmAgZnJvbSBhIGdpdmUgdXNlciBpbnB1dCwgdGFrZXMgb24gYWNjb3VudCB0aGUgbGFuZywgZW50aXR5IHR5cGUsXG4gICAqIHRoZSBjb252ZXJ0IHRvIDcgRWRpdGlvbiBmbGFnLCBhbmQgdGhlIHJhdyBlbnRpdHkgZGF0YS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0cyBpbnB1dHMgZnJvbSB0aGUgZm9ybSB0byBjcmVhdGUgYW4gQWN0b3JcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgZm91bmRyeSBgQWN0b3JgIGZyb20gdGhlIGdpdmVuIGBpbnB1dGAgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlQWN0b3IgKGlucHV0cykge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjcmVhdGVBY3RvcjonLCBpbnB1dHMpXG4gICAgfVxuICAgIGNvbnN0IGxhbmcgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKGlucHV0cy5sYW5nKVxuICAgIHRoaXMua2V5cyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEtleXMobGFuZylcbiAgICB0aGlzLnJlZ0V4ID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0UmVndWxhckV4cHJlc3Npb25zKGxhbmcpXG4gICAgdGhpcy5pdGVtTG9jYXRpb25zID0gaW5wdXRzLnNvdXJjZVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdSZWd1bGFyIEV4cHJlc3Npb25zOicsIGxhbmcsIHRoaXMua2V5cywgdGhpcy5yZWdFeClcbiAgICB9XG4gICAgbGV0IGNoYXJhY3RlciA9IGF3YWl0IHRoaXMucGFyc2VDaGFyYWN0ZXIoaW5wdXRzLnRleHQpXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3BhcnNlQ2hhcmFjdGVyOicsIGNoYXJhY3RlcilcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWd1ZXNzJyAmJlxuICAgICAgICB0aGlzLm5lZWRzQ29udmVyc2lvbihjaGFyYWN0ZXIpKSB8fFxuICAgICAgaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtY29udmVydCdcbiAgICApIHtcbiAgICAgIGNoYXJhY3RlciA9IGF3YWl0IHRoaXMuY29udmVydDdFKGNoYXJhY3RlcilcbiAgICB9XG4gICAgY29uc3QgY2hhcmFjdGVyRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3Rlci5uYW1lLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JEYXRhKGNoYXJhY3RlciksXG4gICAgICBpdGVtczogYXdhaXQgdGhpcy5pdGVtc0RhdGEoY2hhcmFjdGVyKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaW5wdXRzLnRlc3RNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBpbnB1dHMudGVzdE1vZGUgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJEYXRhXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IHRoaXMuY3JlYXRlRW50aXR5KGNoYXJhY3RlckRhdGEsIGlucHV0cy5lbnRpdHkpXG4gICAgcmV0dXJuIG5wY1xuICB9XG5cbiAgLyoqXG4gICAqIGNvbnZlcnQ3RSBDb252ZXJ0cyB0aGUgZ2l2ZW4gZW50aXR5IGZyb20gNiBlZGl0aW9uIHRvIDcgZWRpdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gdGhlIGVudGl0eSBvYmplY3QgYXMgb2J0YWluZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm4gdGhlIHNhbWUgb2JqZWN0IGJ1dCB3aXRoIHVwZGF0ZWQgY2hhcmFjdGVyaXN0aWNzIGZvciA3IGVkaXRpb25cbiAgICovXG4gIGFzeW5jIGNvbnZlcnQ3RSAoY3JlYXR1cmUpIHtcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnQ29udmVydGluZyBucGMnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnXSkge1xuICAgICAgaWYgKHR5cGVvZiBjcmVhdHVyZVtrZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjcmVhdHVyZVtrZXldICo9IDVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjcmVhdHVyZS5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZWR1IDw9IDE4KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSAqPSA1XG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmVkdSA8PSAyNikge1xuICAgICAgICBjcmVhdHVyZS5lZHUgPSBjcmVhdHVyZS5lZHUgKyA5MCAtIDE4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjcmVhdHVyZS5lZHUgPj0yOFxuICAgICAgICBjcmVhdHVyZS5lZHUgPSA5OVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNCcpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMVxuICAgICAgfSBlbHNlIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDYnKSB7XG4gICAgICAgIGNyZWF0dXJlLmRiID0gLTJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NvbnZlcnQ3RTogJywgY3JlYXR1cmUpXG4gICAgfVxuICAgIHJldHVybiBjcmVhdHVyZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRmlsZSwgRmlsZVBpY2tlciwgZ2FtZSwgdWkgKi9cbmV4cG9ydCBjbGFzcyBDb0M3RGlyZWN0b3J5UGlja2VyIGV4dGVuZHMgRmlsZVBpY2tlciB7XG4gIGdldCB0aXRsZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrRGlyZWN0b3J5JylcbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcGF0aCA9IGV2ZW50LnRhcmdldC50YXJnZXQudmFsdWVcbiAgICBjb25zdCBhY3RpdmVTb3VyY2UgPSB0aGlzLmFjdGl2ZVNvdXJjZVxuICAgIGNvbnN0IGJ1Y2tldCA9IGV2ZW50LnRhcmdldC5idWNrZXQgPyBldmVudC50YXJnZXQuYnVja2V0LnZhbHVlIDogbnVsbFxuICAgIHRoaXMuZmllbGQudmFsdWUgPSBDb0M3RGlyZWN0b3J5UGlja2VyLmZvcm1hdCh7XG4gICAgICBhY3RpdmVTb3VyY2UsXG4gICAgICBidWNrZXQsXG4gICAgICBwYXRoXG4gICAgfSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBEZWZhdWx0RGlyZWN0b3J5ICh2YWwpIHtcbiAgICByZXR1cm4gdmFsID09PSBudWxsID8gJycgOiBTdHJpbmcodmFsKVxuICB9XG5cbiAgc3RhdGljIGZvcm1hdCAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuYnVja2V0ICE9PSBudWxsXG4gICAgICA/IGBbJHt2YWx1ZS5hY3RpdmVTb3VyY2V9OiR7dmFsdWUuYnVja2V0fV0gJHt2YWx1ZS5wYXRofWBcbiAgICAgIDogYFske3ZhbHVlLmFjdGl2ZVNvdXJjZX1dICR7dmFsdWUucGF0aH1gXG4gIH1cblxuICBzdGF0aWMgcGFyc2UgKHJhdykge1xuICAgIGNvbnN0IHN0ciA9IHJhdyA/PyAnJ1xuICAgIGNvbnN0IG1hdGNoZXMgPSBzdHIubWF0Y2goL15cXFsoW146XSspKDooLispKT9cXF1cXHMqKC4rKT8kL3UpXG5cbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aXZlU291cmNlOiBtYXRjaGVzWzFdLFxuICAgICAgICBidWNrZXQ6IG1hdGNoZXNbM10gPz8gJycsXG4gICAgICAgIGN1cnJlbnQ6IG1hdGNoZXNbNF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZVNvdXJjZTogJ2RhdGEnLFxuICAgICAgYnVja2V0OiBudWxsLFxuICAgICAgY3VycmVudDogc3RyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NIdG1sIChodG1sKSB7XG4gICAgJChodG1sKVxuICAgICAgLmZpbmQoJ2lucHV0W2RhdGEtZHR5cGU9XCJEZWZhdWx0RGlyZWN0b3J5XCJdJylcbiAgICAgIC5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9ICQoZWwpXG4gICAgICAgIGlucHV0LnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSlcbiAgICAgICAgaWYgKCFpbnB1dC5uZXh0KCkubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgcGlja2VyID0gbmV3IENvQzdEaXJlY3RvcnlQaWNrZXIoe1xuICAgICAgICAgICAgZmllbGQ6IGlucHV0WzBdLFxuICAgICAgICAgICAgLi4uQ29DN0RpcmVjdG9yeVBpY2tlci5wYXJzZShpbnB1dC52YWwoKSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IHBpY2tlckJ1dHRvbiA9ICQoXG4gICAgICAgICAgICAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJmaWxlLXBpY2tlclwiIHRpdGxlPVwiJyArXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrRGlyZWN0b3J5JykgK1xuICAgICAgICAgICAgICAnXCI+PGkgY2xhc3M9XCJmYXMgZmEtZmlsZS1pbXBvcnQgZmEtZndcIj48L2k+PC9idXR0b24+J1xuICAgICAgICAgIClcbiAgICAgICAgICBDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURlZmF1bHREaXJlY3RvcnkoKVxuICAgICAgICAgIHBpY2tlckJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBwaWNrZXIucmVuZGVyKHRydWUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpbnB1dC5wYXJlbnQoKS5hcHBlbmQocGlja2VyQnV0dG9uKVxuICAgICAgICB9XG4gICAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgJChodG1sKS5maW5kKCdvbC5maWxlcy1saXN0JykucmVtb3ZlKClcbiAgICAkKGh0bWwpLmZpbmQoJ2Zvb3RlciBkaXYnKS5yZW1vdmUoKVxuICAgICQoaHRtbCkuZmluZCgnZm9vdGVyIGJ1dHRvbicpLnRleHQoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVEZWZhdWx0RGlyZWN0b3J5ICgpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBDb0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxuICAgIClcbiAgICB0cnkge1xuICAgICAgYXdhaXQgQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEaXJlY3RvcnkoXG4gICAgICAgIHBhcnNlZC5hY3RpdmVTb3VyY2UsXG4gICAgICAgIHBhcnNlZC5jdXJyZW50LFxuICAgICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XG4gICAgICApXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5tZXNzYWdlLnN0YXJ0c1dpdGgoJ0VFWElTVCcpKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXJVcGxvYWRFcnJvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSAoZmlsZSwgZmlsZW5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBDb0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxuICAgIClcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEZpbGVQaWNrZXIudXBsb2FkKFxuICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgIHBhcnNlZC5jdXJyZW50LFxuICAgICAgbmV3IEZpbGUoW2ZpbGVdLCBmaWxlbmFtZSwge1xuICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJ1xuICAgICAgfSksXG4gICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XG4gICAgKVxuICAgIGlmICghcmVzcG9uc2UucGF0aCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlsZVVwbG9hZEVycm9yJykpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZC5jdXJyZW50ICsgJy8nICsgZmlsZW5hbWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGZvdW5kcnksIGdhbWUsIHVpLCBmZXRjaCAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIENvQzdBY3RvckltcG9ydGVyIGhlbHBlciBjbGFzcyB0byBpbXBvcnQgYW4gQWN0b3IgZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIge1xuICAvKipcbiAgICogQ29tcG9zZSB0aGUgQmFja3N0b3J5IGZyb20gdGhlIGRpZmZlcmVudCBibG9ja3MuXG4gICAqIEBwYXJhbSB7fSBiYWNrc3RvcnlKU09OIERob2xlSG91c2UgYmFja3N0b3J5IEpTT05cbiAgICogQHJldHVybnMgSFRNTCB3aXRoIHRoZSBmb3JtYXR0ZWQgYmFja3N0b3J5XG4gICAqL1xuICBzdGF0aWMgZ2V0QmFja3N0b3J5IChiYWNrc3RvcnlKU09OKSB7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBbXG4gICAgICBbJ2Rlc2NyaXB0aW9uJywgJ0Rlc2NyaXB0aW9uJ10sXG4gICAgICBbJ3RyYWl0cycsICdUcmFpdHMnXSxcbiAgICAgIFsnaWRlb2xvZ3knLCAnSWRlb2xvZ3knXSxcbiAgICAgIFsnaW5qdXJ1ZXMnLCAnSW5qdXJpZXMnLCAnaW5qdXJpZXMnXSxcbiAgICAgIFsncGVvcGxlJywgJ1Blb3BsZSddLFxuICAgICAgWydwaG9iaWFzJywgJ1Bob2JpYXMnXSxcbiAgICAgIFsnbG9jYXRpb25zJywgJ0xvY2F0aW9ucyddLFxuICAgICAgWyd0b21lcycsICdUb21lcyddLFxuICAgICAgWydwb3NzZXNzaW9ucycsICdQb3NzZXNzaW9ucyddLFxuICAgICAgWydlbmNvdW50ZXJzJywgJ0VuY291bnRlcnMnXVxuICAgIF1cbiAgICBjb25zdCBiYWNrc3RvcnkgPSB7XG4gICAgICBibG9jazogW10sXG4gICAgICBzZWN0aW9uczogW11cbiAgICB9XG4gICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHNlY3Rpb25zKSB7XG4gICAgICBpZiAoYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlY3Rpb25bMl0gPT09ICd1bmRlZmluZWQnIHx8IHNlY3Rpb25bMl0gPT09ICcnKSB7XG4gICAgICAgICAgc2VjdGlvblsyXSA9IHNlY3Rpb25bMF1cbiAgICAgICAgfVxuICAgICAgICBiYWNrc3RvcnkuYmxvY2sucHVzaChcbiAgICAgICAgICBgPGgzPiR7c2VjdGlvblsxXX08L2gzPlxcbjxkaXYgY2xhc3M9XCIke3NlY3Rpb25bMl19XCI+XFxuJHtcbiAgICAgICAgICAgIGJhY2tzdG9yeUpTT05bc2VjdGlvblswXV1cbiAgICAgICAgICB9XFxuPC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGJhY2tzdG9yeS5zZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICB0aXRsZTogc2VjdGlvblsxXSxcbiAgICAgICAgICB2YWx1ZTogYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBiYWNrc3RvcnkuYmxvY2sgPVxuICAgICAgJzxoMj5CYWNrc3Rvcnk8L2gyPlxcbicgKyBiYWNrc3RvcnkuYmxvY2suam9pbignXFxuJywgYmFja3N0b3J5LmJsb2NrKVxuICAgIHJldHVybiBiYWNrc3RvcnlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0pTT059IGRob2xlSG91c2VEYXRhIERob2xlSG91c2VKU09OXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY29udmVydERob2xlSG91c2VDaGFyYWN0ZXJEYXRhIChkaG9sZUhvdXNlRGF0YSwgb3B0aW9ucykge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnU291cmNlOicsIGRob2xlSG91c2VEYXRhKVxuICAgIH1cbiAgICBkaG9sZUhvdXNlRGF0YSA9IGRob2xlSG91c2VEYXRhLkludmVzdGlnYXRvclxuICAgIGNvbnN0IGJhY2tzdG9yaWVzID0gQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmdldEJhY2tzdG9yeShcbiAgICAgIGRob2xlSG91c2VEYXRhLkJhY2tzdG9yeSA/PyB7fVxuICAgIClcbiAgICBjb25zdCBjRGF0YSA9IHtcbiAgICAgIG5hbWU6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5OYW1lLFxuICAgICAgYWN0b3I6IHtcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNzOiB7XG4gICAgICAgICAgc3RyOiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU1RSLCAxMCkgfSxcbiAgICAgICAgICBjb246IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5DT04sIDEwKSB9LFxuICAgICAgICAgIHNpejogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNJWiwgMTApIH0sXG4gICAgICAgICAgZGV4OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuREVYLCAxMCkgfSxcbiAgICAgICAgICBhcHA6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5BUFAsIDEwKSB9LFxuICAgICAgICAgIGludDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLklOVCwgMTApIH0sXG4gICAgICAgICAgcG93OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuUE9XLCAxMCkgfSxcbiAgICAgICAgICBlZHU6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5FRFUsIDEwKSB9XG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5LCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHlNYXgsIDEwKSxcbiAgICAgICAgICAgIGRhaWx5TGltaXQ6IE1hdGguZmxvb3IoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eSAvIDUpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBocDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5IaXRQdHMsIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkhpdFB0c01heCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtcDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5NYWdpY1B0cywgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTWFnaWNQdHNNYXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbGNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkx1Y2ssIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1vdmUsIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1vdmUsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGI6IHsgdmFsdWU6IGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5EYW1hZ2VCb251cyB9LFxuICAgICAgICAgIGJ1aWxkOiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuQnVpbGQsIDEwKSB9XG4gICAgICAgIH0sXG4gICAgICAgIGluZm9zOiB7XG4gICAgICAgICAgb2NjdXBhdGlvbjogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk9jY3VwYXRpb24sXG4gICAgICAgICAgYWdlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQWdlLFxuICAgICAgICAgIHNleDogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLkdlbmRlcixcbiAgICAgICAgICByZXNpZGVuY2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5SZXNpZGVuY2UsXG4gICAgICAgICAgYmlydGhwbGFjZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLkJpcnRocGxhY2VcbiAgICAgICAgfSxcbiAgICAgICAgYmFja3N0b3J5OiBiYWNrc3Rvcmllcy5ibG9jayxcbiAgICAgICAgYmlvZ3JhcGh5OiBiYWNrc3Rvcmllcy5zZWN0aW9ucyxcbiAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICBrZWVwZXI6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EaG9sZUhvdXNlQWN0b3JJbXBvcnRlclNvdXJjZScpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBza2lsbHM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0U2tpbGxzKFxuICAgICAgICBkaG9sZUhvdXNlRGF0YS5Ta2lsbHMuU2tpbGwgPz8gW10sXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICksXG4gICAgICBwb3NzZXNpb25zOiBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZXh0cmFjdFBvc3Nlc3Npb25zKFxuICAgICAgICBkaG9sZUhvdXNlRGF0YS5Qb3NzZXNzaW9ucz8uaXRlbSA/PyBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gY0RhdGFcbiAgfVxuXG4gIHN0YXRpYyBtYWtlU2tpbGxOYW1lIChuYW1lLCBzcGVjaWFsaXphdGlvbikge1xuICAgIGlmIChzcGVjaWFsaXphdGlvbiA9PT0gJ05vbmUnKSB7XG4gICAgICBzcGVjaWFsaXphdGlvbiA9ICdBbnknXG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnTGFuZ3VhZ2UgKE90aGVyKScgfHwgbmFtZSA9PT0gJ0xhbmd1YWdlIChPd24pJykge1xuICAgICAgbmFtZSA9ICdMYW5ndWFnZSdcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdPcGVyYXRlIEhlYXZ5IE1hY2hpbmUnKSB7XG4gICAgICBuYW1lID0gJ09wZXJhdGUgSGVhdnkgTWFjaGluZXJ5J1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ1Rocm93JyAmJiBzcGVjaWFsaXphdGlvbiA9PT0gJycpIHtcbiAgICAgIG5hbWUgPSAnRmlnaHRpbmcnXG4gICAgICBzcGVjaWFsaXphdGlvbiA9ICdUaHJvdydcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHNraWxsTmFtZTogc3BlY2lhbGl6YXRpb24gPT09ICcnID8gbmFtZSA6IHNwZWNpYWxpemF0aW9uLFxuICAgICAgc3BlY2lhbGl6YXRpb246IHNwZWNpYWxpemF0aW9uID09PSAnJyA/ICcnIDogbmFtZSxcbiAgICAgIG5hbWU6IG5hbWUgKyAoc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiAnICgnICsgc3BlY2lhbGl6YXRpb24gKyAnKScpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RTa2lsbHMgKGRob2xlSG91c2Vza2lsbHMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGhvbGVIb3VzZXNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN1YnNraWxsID09PSAnTm9uZScpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLm1ha2VTa2lsbE5hbWUoXG4gICAgICAgIHNraWxsLm5hbWUsXG4gICAgICAgIHNraWxsLnN1YnNraWxsID8/ICcnXG4gICAgICApXG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIHBhcnRzLm5hbWUsIHtcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZSxcbiAgICAgICAgZmFsbGJhY2tBbnk6IHRydWVcbiAgICAgIH0pXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxuICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY2xvbmVkID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZXhpc3RpbmcudG9PYmplY3QoKSlcbiAgICAgICAgY2xvbmVkLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICBpZiAoY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpIHtcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucmVxdWlyZXNuYW1lID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkgPz8gZmFsc2UpIHtcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucGlja25hbWVvbmx5ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0gQ29DQWN0b3IuZW1wdHlTa2lsbChcbiAgICAgICAgICBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgICAgcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOlxuICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJycgPyBmYWxzZSA6IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcyA9IGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcyA/PyB7fVxuICAgICAgICBpZiAocGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICdGaWdodGluZycpIHtcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAocGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICdGaXJlYXJtcycpIHtcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5za2lsbE5hbWUgPT09ICdEb2RnZScpIHtcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ0FueScpIHtcbiAgICAgICAgY2xvbmVkLm5hbWUgPSBjbG9uZWQubmFtZS5yZXBsYWNlKCcgKEFueSknLCAnIChOb25lKScpXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGxOYW1lID0gJ05vbmUnXG4gICAgICB9XG4gICAgICBjbG9uZWQuc3lzdGVtLmJhc2UgPSBwYXJzZUludChza2lsbC52YWx1ZSA/PyAwLCAxMClcbiAgICAgIGNsb25lZC5zeXN0ZW0udmFsdWUgPSBwYXJzZUludChza2lsbC52YWx1ZSA/PyAwLCAxMClcbiAgICAgIGNsb25lZC5zeXN0ZW0uZmxhZ3MgPSBjbG9uZWQuc3lzdGVtLmZsYWdzID8/IHt9XG4gICAgICBjbG9uZWQuc3lzdGVtLmZsYWdzLm9jY3VwYXRpb24gPVxuICAgICAgICBza2lsbC5vY2N1cGF0aW9uID09PSB0cnVlIHx8IHNraWxsLm9jY3VwYXRpb24gPT09ICd0cnVlJ1xuICAgICAgc2tpbGxzLnB1c2goY2xvbmVkKVxuICAgIH1cbiAgICByZXR1cm4gc2tpbGxzXG4gIH1cblxuICBzdGF0aWMgZmluZFdlYXBvblNraWxsSWQgKHNraWxsTmFtZSwgY2hhcmFjdGVyKSB7XG4gICAgY29uc3Qgc2tpbGxzID0gY2hhcmFjdGVyLmdldEVtYmVkZGVkQ29sbGVjdGlvbignSXRlbScpXG4gICAgY29uc3QgY2hlY2tOYW1lID0gc2tpbGxOYW1lLnJlcGxhY2UoL15cXCgoLispXFwpJC8sICckMScpXG4gICAgY29uc3QgY2hhcmFjdGVyU2tpbGwgPSBza2lsbHMuZmluZChpID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGkuc3lzdGVtPy5za2lsbE5hbWUgPT09IGNoZWNrTmFtZSB8fFxuICAgICAgICBpLnN5c3RlbT8uc2tpbGxOYW1lPy5pbmRleE9mKGNoZWNrTmFtZSkgPiAtMVxuICAgICAgKVxuICAgIH0pXG4gICAgcmV0dXJuIGNoYXJhY3RlclNraWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFBvc3Nlc3Npb25zIChkaG9sZWhvdXNlUG9zc2Vzc2lvbnMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRob2xlaG91c2VQb3NzZXNzaW9ucykgJiYgZGhvbGVob3VzZVBvc3Nlc3Npb25zICE9IG51bGwpIHtcbiAgICAgIGRob2xlaG91c2VQb3NzZXNzaW9ucyA9IFtkaG9sZWhvdXNlUG9zc2Vzc2lvbnNdXG4gICAgfVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkaG9sZWhvdXNlUG9zc2Vzc2lvbnMpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ2l0ZW0nLCBpdGVtLmRlc2NyaXB0aW9uLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2VcbiAgICAgIH0pXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxuICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY2xvbmVkID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZXhpc3RpbmcudG9PYmplY3QoKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lZCA9IHtcbiAgICAgICAgICBuYW1lOiBpdGVtLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpdGVtcy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFdlYXBvbnMgKGRob2xlaG91c2VXZWFwb25zLCBjaGFyYWN0ZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB3ZWFwb25zID0gW11cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGhvbGVob3VzZVdlYXBvbnMpKSB7XG4gICAgICBkaG9sZWhvdXNlV2VhcG9ucyA9IFtkaG9sZWhvdXNlV2VhcG9uc11cbiAgICB9XG4gICAgZm9yIChjb25zdCB3ZWFwb24gb2YgZGhvbGVob3VzZVdlYXBvbnMpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmZpbmRXZWFwb25Ta2lsbElkKFxuICAgICAgICB3ZWFwb24uc2tpbGxuYW1lLFxuICAgICAgICBjaGFyYWN0ZXJcbiAgICAgIClcbiAgICAgIGNvbnN0IGRhbWFnZSA9IHdlYXBvbi5kYW1hZ2UucmVwbGFjZSgvXFwrREIvaSwgJycpXG4gICAgICBjb25zdCBhZGRiID0gZGFtYWdlICE9PSB3ZWFwb24uZGFtYWdlXG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCd3ZWFwb24nLCB3ZWFwb24ubmFtZSwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGw/Lm5hbWUgPz8gJydcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbC5tYWluLmlkID0gc2tpbGw/LmlkID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2UgPSBjbG9uZWQuc3lzdGVtLnJhbmdlID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID0gY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwgPz8ge31cbiAgICAgICAgY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlID0gZGFtYWdlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uYW1tbyA9IHdlYXBvbi5hbW1vXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ubWFsZnVuY3Rpb24gPSB3ZWFwb24ubWFsZlxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlID1cbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID1cbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2VcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIgPSBhZGRiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSB7XG4gICAgICAgICAgbmFtZTogd2VhcG9uLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICBza2lsbDoge1xuICAgICAgICAgICAgICBtYWluOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc2tpbGw/Lm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgaWQ6IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgZGFtYWdlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbW1vOiB3ZWFwb24uYW1tbyxcbiAgICAgICAgICAgIG1hbGZ1bmN0aW9uOiB3ZWFwb24ubWFsZixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgbWVsZWU6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcgPz8gZmFsc2UsXG4gICAgICAgICAgICAgIHJuZ2Q6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlyZWFybSA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgYWRkYlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2VhcG9ucy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIHdlYXBvbnNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzYXZlUG9ydHJhaXQgKGJhc2U2NFBvcnRyYWl0LCBmaWxlTmFtZSkge1xuICAgIGNvbnN0IGJhc2U2NFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBiYXNlNjRQb3J0cmFpdFxuICAgIClcbiAgICBjb25zdCBpbWFnZUJsb2IgPSBhd2FpdCBiYXNlNjRSZXNwb25zZS5ibG9iKClcbiAgICBjb25zdCBmaWxlUGF0aCA9IENvQzdEaXJlY3RvcnlQaWNrZXIudXBsb2FkVG9EZWZhdWx0RGlyZWN0b3J5KFxuICAgICAgaW1hZ2VCbG9iLFxuICAgICAgZmlsZU5hbWVcbiAgICApXG4gICAgcmV0dXJuIGZpbGVQYXRoXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTlBDRnJvbURob2xlSG91c2UgKGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKCFnYW1lLnVzZXI/LmNhbignRklMRVNfVVBMT0FEJykpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyVXBsb2FkRXJyb3InKVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNoYXJhY3RlckRhdGEgPVxuICAgICAgYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YShcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEsXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ0NoYXJhY3RlciBEYXRhOicsIGNoYXJhY3RlckRhdGEpXG4gICAgfVxuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9XG4gICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXG4gICAgaWYgKCFDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURlZmF1bHREaXJlY3RvcnkoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3RlckRhdGEubmFtZSxcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBzeXN0ZW06IGNoYXJhY3RlckRhdGEuYWN0b3JcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgQWN0b3IuY3JlYXRlKGFjdG9yRGF0YSlcbiAgICAvLyBJZiBwb3NzaWJsZSB1cGxvYWQgdGhlIGltYWdlIHBvcnRyYWl0XG4gICAgaWYgKFxuICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLlBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdD8ubGVuZ3RoID4gMTBcbiAgICApIHtcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gJ2F2YXRhci0nICsgbnBjLmlkICsgJy5wbmcnXG4gICAgICBjb25zdCBwb3J0cmFpdCA9IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5zYXZlUG9ydHJhaXQoXG4gICAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5QZXJzb25hbERldGFpbHMuUG9ydHJhaXQsXG4gICAgICAgIGZpbGVOYW1lXG4gICAgICApXG4gICAgICBpZiAocG9ydHJhaXQgIT09IGZhbHNlKSB7XG4gICAgICAgIG5wYy51cGRhdGUoe1xuICAgICAgICAgIGltZzogcG9ydHJhaXRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJdGVtczogJywgY2hhcmFjdGVyRGF0YS5pdGVtcylcbiAgICB9XG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgY2hhcmFjdGVyRGF0YS5za2lsbHMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgY2hhcmFjdGVyRGF0YS5wb3NzZXNpb25zLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICAgIGNvbnN0IHdlYXBvbnMgPSBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZXh0cmFjdFdlYXBvbnMoXG4gICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuV2VhcG9ucz8ud2VhcG9uID8/IFtdLFxuICAgICAgbnBjLFxuICAgICAgb3B0aW9uc1xuICAgIClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ1dlYXBvbnM6ICcsIHdlYXBvbnMpXG4gICAgfVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHdlYXBvbnMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG5cbiAgICByZXR1cm4gbnBjXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgSG9va3MsIHVpLCBGaWxlUmVhZGVyICovXG5cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB9IGZyb20gJy4vZGhvbGVob3VzZV9pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2FjdG9yLWltcG9ydGVyJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2FjdG9yLWltcG9ydGVyLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNjAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLmltcG9ydFR5cGUgPSBkYXRhLm9iamVjdC5pbXBvcnRUeXBlXG4gICAgZGF0YS5jb252ZXJ0NkUgPSBkYXRhLm9iamVjdC5jb252ZXJ0NkVcbiAgICBkYXRhLnNvdXJjZSA9IGRhdGEub2JqZWN0LnNvdXJjZVxuICAgIGRhdGEuY2hhcmFjdGVyRGF0YSA9IGRhdGEub2JqZWN0LmNoYXJhY3RlckRhdGFcbiAgICBkYXRhLmNhblVwbG9hZCA9IGdhbWUudXNlcj8uY2FuKCdGSUxFU19VUExPQUQnKVxuICAgIGlmIChbJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGRhdGEuaW1wb3J0VHlwZSkpIHtcbiAgICAgIGRhdGEubGFuZ3VhZ2VzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0VHJhbnNsYXRpb25zKClcbiAgICAgIGRhdGEubGFuZ3VhZ2UgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKFxuICAgICAgICBkYXRhLm9iamVjdC5sYW5ndWFnZVxuICAgICAgKVxuICAgICAgZGF0YS5wbGFjZWhvbGRlciA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KGRhdGEubGFuZ3VhZ2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnI2Rob2xlaG91c2UtY2hhcmFjdGVyLXByZXZpZXcnKS5oaWRlKClcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1lbnRpdHktdHlwZSwjY29jLWVudGl0eS1sYW5nJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2Rob2xlaG91c2UtanNvbi1maWxlLXBpY2tlcicpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uSlNPTkZpbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJylcbiAgICAgIC5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQgPSAkKHRoaXMpXG4gICAgICAgICAgLnZhbCgpXG4gICAgICAgICAgLm1hdGNoKC9bXFx1ZGJjMC1cXHVkYmZlXVtcXHVkYzAwLVxcdWRmZmZdLylcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gJCgnI2NvYy1wcm9tcHQnKVxuICAgICAgICBpZiAocHJvbXB0LmRhdGEoJ2V4dGVuZGVkJykgJiYgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkKSB7XG4gICAgICAgICAgcHJvbXB0XG4gICAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZENoYXJhY3RlcnMnKSlcbiAgICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb21wdC5odG1sKHByb21wdC5kYXRhKCd0ZXh0JykpLnJlbW92ZUNsYXNzKCdlcnJvcicpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudHJpZ2dlcigna2V5dXAnKVxuXG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIGdldElucHV0cyBleHRyYWN0cyB0aGUgZGF0YSBmcm9tIHRoZSBpbnB1dCBmaWVsZHMgYW5kXG4gICAqIGFkZHMgYSBgLmAgYXQgdGhlIGVuZCBpZiBpdCdzIG5vdCBhbHJlYWR5IHRoZXJlLlxuICAgKi9cbiAgc3RhdGljIGdldElucHV0cyAoZm9ybSkge1xuICAgIGNvbnN0IGlucHV0cyA9IHt9XG4gICAgaW5wdXRzLmVudGl0eSA9IGZvcm0uZmluZCgnI2NvYy1lbnRpdHktdHlwZScpLnZhbCgpLnRyaW0oKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdlbnRpdHkgdHlwZTonLCBpbnB1dHMuZW50aXR5KVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9IGZvcm0uZmluZCgnI2NvYy1jb252ZXJ0LTZFJykudmFsKCkudHJpbSgpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMubGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoXG4gICAgICAgIGZvcm0uZmluZCgnI2NvYy1lbnRpdHktbGFuZycpLnZhbCgpLnRyaW0oKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjc291cmNlJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLnNvdXJjZSA9IGZvcm0uZmluZCgnI3NvdXJjZScpLnZhbCgpLnRyaW0oKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy50ZXh0ID0gZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLnZhbCgpLnRyaW0oKVxuICAgIH1cblxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdyZWNlaXZlZCB0ZXh0JywgJyMjJyArIGlucHV0cy50ZXh0ICsgJyMjJylcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0c1xuICB9XG5cbiAgX29uSlNPTkZpbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBqc29uRmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtanNvbi1maWxlLXBpY2tlcicpXG4gICAgY29uc3QgcG9ydHJhaXRJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ2Rob2xlaG91c2UtY2hhcmFjdGVyLXBvcnRyYWl0J1xuICAgIClcbiAgICBjb25zdCBjaGFyYWN0ZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtY2hhcmFjdGVyLW5hbWUnKVxuICAgIGNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1jaGFyYWN0ZXItcHJldmlldycpXG4gICAgY29uc3QgZmlsZSA9IGpzb25GaWxlSW5wdXQuZmlsZXNbMF1cbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzXG4gICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkaWFsb2cuY2hhcmFjdGVySlNPTiA9IEpTT04ucGFyc2UoZmlsZVJlYWRlci5yZXN1bHQpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICQoJyNjb2MtcHJvbXB0JylcbiAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZEpTT04nKSlcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHBlcnNvbmFsRGV0YWlscyA9XG4gICAgICAgIGRpYWxvZy5jaGFyYWN0ZXJKU09OPy5JbnZlc3RpZ2F0b3I/LlBlcnNvbmFsRGV0YWlsc1xuICAgICAgaWYgKCFwZXJzb25hbERldGFpbHMpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGhvbGVIb3VzZUludmFsaWRBY3RvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjaGFyYWN0ZXJOYW1lLnRleHRDb250ZW50ID0gcGVyc29uYWxEZXRhaWxzLk5hbWVcbiAgICAgIHBvcnRyYWl0SW1hZ2Uuc3JjID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgcGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0XG4gICAgICBwcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAkKCcuZGlhbG9nLmFjdG9yLWltcG9ydGVyJykuaGVpZ2h0KCdhdXRvJylcbiAgICB9XG4gICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpXG4gIH1cblxuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCBpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5idXR0b25cbiAgICBpZiAoaWQgPT09ICdubycpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0gZWxzZSBpZiAoaWQgPT09ICdnZXRFeGFtcGxlTm93Jykge1xuICAgICAgY29uc3QgY29udGVudCA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KFxuICAgICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZVxuICAgICAgKVxuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoY29udGVudCkudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvcGllZCcpKVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnaW1wb3J0Jykge1xuICAgICAgY29uc3QgYXBwID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdkaXYuZGlhbG9nLmFjdG9yLWltcG9ydGVyJylcbiAgICAgIGFwcC5oaWRlKClcbiAgICAgIGNvbnN0IGZvcm0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgY29uc3QgaW5wdXRzID0gQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuZ2V0SW5wdXRzKGZvcm0pXG4gICAgICBpZiAoaW5wdXRzLmVudGl0eSA9PT0gJ2Rob2xlaG91c2UnICYmIHRoaXMuY2hhcmFjdGVySlNPTikge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPVxuICAgICAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jcmVhdGVOUENGcm9tRGhvbGVIb3VzZShcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVySlNPTixcbiAgICAgICAgICAgIHsgc291cmNlOiBpbnB1dHMuc291cmNlIH1cbiAgICAgICAgICApXG4gICAgICAgIGlmIChjaGFyYWN0ZXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ2NoYXJhY3RlcjonLCBjaGFyYWN0ZXIpXG4gICAgICAgICAgfVxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWN0b3JJbXBvcnRlZCcsIHtcbiAgICAgICAgICAgICAgYWN0b3JUeXBlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQ2hhcmFjdGVyJyksXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogY2hhcmFjdGVyLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGNoYXJhY3Rlci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHAuc2hvdygpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRzLnRleHQgJiYgaW5wdXRzLnRleHQgIT09ICcnKSB7XG4gICAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmltcG9ydEFjdG9yKGlucHV0cylcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHAuc2hvdygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgdGhpcy5vYmplY3QuaW1wb3J0VHlwZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LXR5cGUnXVxuICAgIHRoaXMub2JqZWN0LmNoYXJhY3RlckRhdGEgPSBmb3JtRGF0YVsnY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YSddPy50cmltKClcbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29udmVydC02RSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3QuY29udmVydDZFID0gZm9ybURhdGFbJ2NvYy1jb252ZXJ0LTZFJ11cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWVudGl0eS1sYW5nJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LWxhbmcnXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhLnNvdXJjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNvdXJjZSA9IGZvcm1EYXRhLnNvdXJjZVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAqIEBwYXJhbSB7aHRtbH0gaHRtbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChpbnB1dHMpIHtcbiAgICBpZiAoaW5wdXRzLnRleHRbaW5wdXRzLnRleHQubGVuZ3RoXSAhPT0gJy4nKSB7XG4gICAgICBpbnB1dHMudGV4dCArPSAnLicgLy8gQWRkIGEgZG90IGEgdGhlIGVuZCB0byBoZWxwIHRoZSByZWdleCBmaW5kIHRoZSBlbmRcbiAgICB9XG4gICAgY29uc3QgYWN0b3IgPSBuZXcgQ29DN0FjdG9ySW1wb3J0ZXIoKVxuICAgIGNvbnN0IGNyZWF0ZWRBY3RvciA9IGF3YWl0IGFjdG9yLmNyZWF0ZUFjdG9yKGlucHV0cylcbiAgICAvLyBBY3RvciBjcmVhdGVkLCBOb3RpZnkgdGhlIHVzZXIgYW5kIHNob3cgdGhlIHNoZWV0LlxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjcmVhdGVkQWN0b3I6JywgY3JlYXRlZEFjdG9yKVxuICAgIH1cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFjdG9ySW1wb3J0ZWQnLCB7XG4gICAgICAgIGFjdG9yVHlwZTogY3JlYXRlZEFjdG9yLnR5cGU/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgIGFjdG9yTmFtZTogY3JlYXRlZEFjdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgKVxuICAgIGF3YWl0IGNyZWF0ZWRBY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAvLyBjb25zdCB1cGRhdGVkID0gYXdhaXQgVXBkYXRlci51cGRhdGVBY3RvcihucGMpXG4gICAgLy8gY29uc29sZS5kZWJ1ZygndXBkYXRlZDonLCB1cGRhdGVkKVxuICB9XG5cbiAgLy8gLyoqXG4gIC8vICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdlYiB0byBjcmF0ZSB0aGUgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2dcbiAgLy8gICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuaW1wb3J0VHlwZSA9IG9wdGlvbnMuaW1wb3J0VHlwZSA/PyAnbnBjJ1xuICAgIG9wdGlvbnMubGFuZ3VhZ2UgPVxuICAgICAgb3B0aW9ucy5sYW5ndWFnZSA/PyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKG51bGwpXG4gICAgb3B0aW9ucy5jb252ZXJ0NkUgPSBvcHRpb25zLmxhbmd1YWdlID8/ICdjb2MtZ3Vlc3MnXG4gICAgb3B0aW9ucy5zb3VyY2UgPSBvcHRpb25zLnNvdXJjZSA/PyAnaXdtcydcbiAgICBvcHRpb25zLmNoYXJhY3RlckRhdGEgPSBvcHRpb25zLmNoYXJhY3RlckRhdGEgPz8gJydcblxuICAgIG5ldyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyhvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuXG5Ib29rcy5vbmNlKCdyZWFkeScsICgpID0+IHtcbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ0NvQzctSW1wb3J0ZXItVGVzdHMnKT8uYWN0aXZlKSB7XG4gICAgd2luZG93LkNvQzdBY3RvckltcG9ydGVyID0gQ29DN0FjdG9ySW1wb3J0ZXJcbiAgfVxufSlcbiIsIi8qIGdsb2JhbCBEaWFsb2csIGZvdW5kcnksIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBEcm9wQ29DSUQgZXh0ZW5kcyBEaWFsb2cge1xuICBzdGF0aWMgcHJvY2Vzc0Zvcm0gKHJlc3BvbnNlLCBlbGVtZW50LCByZXNvbHZlKSB7XG4gICAgaWYgKGVsZW1lbnQuZmluZCgnaW5wdXQnKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZHJvcENvQ0lEJywgKHJlc3BvbnNlID8gJ1knIDogJ04nKSlcbiAgICB9XG4gICAgcmVzb2x2ZShyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBwcm9jZXNzSXRlbSAocmVzcG9uc2UsIGl0ZW0pIHtcbiAgICBpZiAocmVzcG9uc2UgJiYgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCkge1xuICAgICAgcmV0dXJuIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGl0ZW0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICgpIHtcbiAgICBjb25zdCBkcm9wQ29DSUQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkcm9wQ29DSUQnKVxuICAgIHN3aXRjaCAoZHJvcENvQ0lEKSB7XG4gICAgICBjYXNlICcnOlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGxnID0gbmV3IERyb3BDb0NJRCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuTmFtZScpLFxuICAgICAgICAgICAgY29udGVudDogJzxwPicgKyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5EaWFsb2cnKSArICc8L3A+PHA+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwicmVtZW1iZXJ0aGlzXCIgc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogc3ViO1wiPjxsYWJlbCBmb3I9XCJyZW1lbWJlcnRoaXNcIj4nICsgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuUmVtZW1iZXInKSArICc8L2xhYmVsPjwvcD4nLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FwcCcsICdkaWFsb2cnXSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgeWVzOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnWWVzJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlbGVtZW50KSA9PiB7IERyb3BDb0NJRC5wcm9jZXNzRm9ybSh0cnVlLCBlbGVtZW50LCByZXNvbHZlKSB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG5vOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnTm8nKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKGVsZW1lbnQpID0+IHsgRHJvcENvQ0lELnByb2Nlc3NGb3JtKGZhbHNlLCBlbGVtZW50LCByZXNvbHZlKSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIGNhc2UgJ1knOlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgY2FzZSAnTic6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERyYWdEcm9wLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdPY2N1cGF0aW9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcblxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWl0ZW0tZGVsZXRlJykuY2xpY2sodGhpcy5fb25Hcm91cEl0ZW1EZWxldGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5ncm91cC1jb250cm9sJykuY2xpY2sodGhpcy5fb25Hcm91cENvbnRyb2wuYmluZCh0aGlzKSlcblxuICAgIGNvbnN0IGRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5kcm9wcGFibGUnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIGRyYWdEcm9wLmJpbmQoaHRtbFswXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3Qgb3B0aW9uYWxTa2lsbCA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdvcHRpb25hbC1za2lsbHMnKVxuICAgIGNvbnN0IG9sID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsb3Nlc3QoJ29sJylcbiAgICBjb25zdCBpbmRleCA9IG9sPy5kYXRhc2V0Py5ncm91cFxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBsZXQgdXNlQ29DSUQgPSAwXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICBjb25zdCBncm91cHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcyA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKSA6IFtdXG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIGNvbnRpbnVlXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25hbFNraWxsKSB7XG4gICAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgICAgLy8gR2VuZXJpYyBzcGVjaWFsaXphdGlvbiBjYW4gYmUgaW5jbHVkZWQgbWFueSB0aW1lc1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWUgLy8gSWYgc2tpbGwgaXMgYWxyZWFkeSBpbiBtYWluIGRvbid0IGFkZCBpdFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZ3JvdXBzW2luZGV4XS5za2lsbHMuZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZSAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIGdyb3VwIGRvbid0IGFkZCBpdFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBncm91cHNbaW5kZXhdLnNraWxscy5jb25jYXQoW0Ryb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgc2FtZSBza2lsbCBpcyBpbiBvbmUgb2YgdGhlIGdyb3VwIHJlbW92ZSBpdCBmcm9tIHRoZSBncm91cHNcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ3JvdXBzW2ldLnNraWxscy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICBncm91cHNbaV0uc2tpbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkdyb3VwQ29udHJvbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIC8vIEFkZCBuZXcgZGFtYWdlIGNvbXBvbmVudFxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnYWRkLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmdyb3Vwcyc6IGdyb3Vwcy5jb25jYXQoW3sgb3B0aW9uczogMCwgc2tpbGxzOiBbXSB9XSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZW1vdmUtZ3JvdXAnKSkge1xuICAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpIC8vIFN1Ym1pdCBhbnkgdW5zYXZlZCBjaGFuZ2VzXG4gICAgICBjb25zdCBncm91cHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcylcbiAgICAgIGNvbnN0IG9sID0gYS5jbG9zZXN0KCcuaXRlbS1saXN0Lmdyb3VwJylcbiAgICAgIGdyb3Vwcy5zcGxpY2UoTnVtYmVyKG9sLmRhdGFzZXQuZ3JvdXApLCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGxpID0gb2JqLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBncm91cCA9IG9iai5jbG9zZXN0KCcuZ3JvdXAnKVxuICAgIGxldCBpdGVtXG4gICAgaWYgKGdyb3VwLmxlbmd0aCkge1xuICAgICAgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzW2dyb3VwLmRhdGEoJ2dyb3VwJyldW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogdGhpcy5pdGVtLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtSWQgPSBpdGVtLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGNvbnN0IENvQ0lkID0gaXRlbS5kYXRhKCdjb2NpZCcpXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uR3JvdXBJdGVtRGVsZXRlIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBncm91cCA9IE51bWJlcihpdGVtLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKS5kYXRhKCdncm91cCcpKVxuICAgIGNvbnN0IGdyb3VwcyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgIGlmICh0eXBlb2YgZ3JvdXBzW2dyb3VwXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgICAgY29uc3QgaXRlbUluZGV4ID0gZ3JvdXBzW2dyb3VwXS5za2lsbHMuZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICAgIGdyb3Vwc1tncm91cF0uc2tpbGxzLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL29jY3VwYXRpb24uaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscyB9KVxuXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDAsIGxlbiA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCA8IGxlbjsgaW5kZXgrKykge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgfSlcblxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uaXNFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gQ29DN09jY3VwYXRpb25TaGVldC5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldID8gQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldIDogbnVsbClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBzdGF0aWMgb2NjdXBhdGlvblBvaW50c1N0cmluZyAob2NjdXBhdGlvblNraWxsUG9pbnRzKSB7XG4gICAgY29uc3Qgb3B0aW9ubmFsID0gW11cbiAgICBjb25zdCBtYW5kYXRvcnkgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgIGlmIChjYXJhYy5tdWx0aXBsaWVyKSB7XG4gICAgICAgIGNvbnN0IGNhcmFjTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ0hBUkFDLiR7a2V5LnRvVXBwZXJDYXNlKCl9YClcbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmIGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgb3B0aW9ubmFsLnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgIWNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgbWFuZGF0b3J5LnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgb2NjdXBhdGlvblBvaW50c1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAobWFuZGF0b3J5Lmxlbmd0aCkgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBtYW5kYXRvcnkuam9pbignICsgJylcbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiBtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IGAgKyAoJHtvcHRpb25uYWwuam9pbihvclN0cmluZyl9KWBcbiAgICB9XG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgIW1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gb3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpXG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0uZ3JvdXBzKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gT2JqZWN0LnZhbHVlcyhcbiAgICAgICAgc3lzdGVtLmdyb3VwcyB8fCBbXVxuICAgICAgKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBmb3JtRGF0YVtgc3lzdGVtLmdyb3Vwcy4ke2luZGV4fS5za2lsbHNgXSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHNcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIENoYXRNZXNzYWdlLCBDT05TVCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBBdmVyYWdlUm9sbCB9IGZyb20gJy4uL2FwcHMvYXZlcmFnZS1yb2xsLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN09jY3VwYXRpb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9vY2N1cGF0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC1kaWFsb2cuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnaW52ZXN0aWdhdG9yLXdpemFyZC1hcHBsaWNhdGlvbicsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2ludmVzdGlnYXRvci13aXphcmQnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkLmhicycsXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA2MDAsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFsnLnNjcm9sbHNlY3Rpb24nXSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuZHJhZ2dhYmxlJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dXG4gICAgfSlcbiAgfVxuXG4gIGdldCBwYWdlTGlzdCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFBBR0VfTk9ORTogLTEsXG4gICAgICBQQUdFX0lOVFJPRFVDVElPTjogMCxcbiAgICAgIFBBR0VfQ09ORklHVVJBVElPTjogMSxcbiAgICAgIFBBR0VfU0VUVVBTOiAyLFxuICAgICAgUEFHRV9BUkNIRVRZUEVTOiAzLFxuICAgICAgUEFHRV9DSEFSQUNUSVNUSUNTOiA0LFxuICAgICAgUEFHRV9BVFRSSUJVVEVTOiA1LFxuICAgICAgUEFHRV9WSUVXX0FUVFJJQlVURVM6IDYsXG4gICAgICBQQUdFX09DQ1VQQVRJT05TOiA3LFxuICAgICAgUEFHRV9PQ0NVUEFUSU9OX1NLSUxMUzogOCxcbiAgICAgIFBBR0VfQVJDSEVUWVBFX1NLSUxMUzogOSxcbiAgICAgIFBBR0VfUE9JTlRTX1NLSUxMUzogMTAsXG4gICAgICBQQUdFX0lOVkVTVElHQVRPUjogMTEsXG4gICAgICBQQUdFX0JBQ0tTVE9SWTogMTIsXG4gICAgICBQQUdFX0NSRUFURTogMTNcbiAgICB9XG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzTWV0aG9kcyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIE1FVEhPRF9ERUZBVUxUOiAxLFxuICAgICAgTUVUSE9EX1JPTEw6IDEsXG4gICAgICBNRVRIT0RfUE9JTlRTOiAyLFxuICAgICAgTUVUSE9EX1ZBTFVFUzogMyxcbiAgICAgIE1FVEhPRF9DSE9PU0U6IDRcbiAgICB9XG4gIH1cblxuICBnZXQgY29jaWRDcmVkaXRSYXRpbmcgKCkge1xuICAgIHJldHVybiAnaS5za2lsbC5jcmVkaXQtcmF0aW5nJ1xuICB9XG5cbiAgZ2V0IGNvY2lkTGFuZ3VhZ2VPd24gKCkge1xuICAgIHJldHVybiAnaS5za2lsbC5sYW5ndWFnZS1vd24nXG4gIH1cblxuICBnZXQgcGFnZU9yZGVyICgpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMucGFnZUxpc3RcbiAgICBsZXQgcGFnZU9yZGVyID0gW1xuICAgICAgcGFnZXMuUEFHRV9JTlRST0RVQ1RJT05cbiAgICBdXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0NPTkZJR1VSQVRJT04pXG4gICAgfVxuICAgIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXAgPT09ICcnKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX1NFVFVQUylcbiAgICB9XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVJDSEVUWVBFUylcbiAgICB9XG4gICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9DSEFSQUNUSVNUSUNTKVxuICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BVFRSSUJVVEVTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIgPSBwYWdlT3JkZXIuY29uY2F0KFtcbiAgICAgIHBhZ2VzLlBBR0VfVklFV19BVFRSSUJVVEVTLFxuICAgICAgcGFnZXMuUEFHRV9PQ0NVUEFUSU9OUyxcbiAgICAgIHBhZ2VzLlBBR0VfT0NDVVBBVElPTl9TS0lMTFNcbiAgICBdKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FSQ0hFVFlQRV9TS0lMTFMpXG4gICAgfVxuICAgIHBhZ2VPcmRlciA9IHBhZ2VPcmRlci5jb25jYXQoW1xuICAgICAgcGFnZXMuUEFHRV9QT0lOVFNfU0tJTExTLFxuICAgICAgcGFnZXMuUEFHRV9JTlZFU1RJR0FUT1IsXG4gICAgICBwYWdlcy5QQUdFX0JBQ0tTVE9SWSxcbiAgICAgIHBhZ2VzLlBBR0VfQ1JFQVRFXG4gICAgXSlcbiAgICByZXR1cm4gcGFnZU9yZGVyXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9hZENhY2hlSXRlbUJ5Q29DSUQgKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IC9eaVxcLi8sIHR5cGU6ICdpJywgc2hvd0xvYWRpbmc6IHRydWUgfSkudGhlbigoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdCA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgIGxpc3RbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gPSBpdGVtXG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShsaXN0KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCAocmVnZXhwKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSUQpLmZpbHRlcihlbnRyeSA9PiBlbnRyeVswXS5tYXRjaChyZWdleHApKS5tYXAoZW50cnkgPT4gZW50cnlbMV0pXG4gIH1cblxuICBhc3luYyBnZXRDYWNoZUl0ZW1CeUNvQ0lEIChpZCkge1xuICAgIHJldHVybiAoYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRClbaWRdID8/IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBhbmRJdGVtQXJyYXkgKGl0ZW1MaXN0KSB7XG4gICAgY29uc3QgaXRlbXMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ICE9PSAnc3RyaW5nJylcbiAgICBjb25zdCBjb2NpZHMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ID09PSAnc3RyaW5nJylcbiAgICBpZiAoY29jaWRzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRFxuICAgICAgY29uc3QgbWlzc2luZyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGNvY2lkIG9mIGNvY2lkcykge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbXMucHVzaChzb3VyY2VbY29jaWRdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NpbmcucHVzaChjb2NpZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVyYSA9IGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW3RoaXMub2JqZWN0LmRlZmF1bHRFcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiB0aGlzLm9iamVjdC5kZWZhdWx0RXJhIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5kb2N1bWVudHMtbm90LWZvdW5kJywgeyBjb2NpZHM6IG1pc3Npbmcuam9pbignLCAnKSwgbGFuZzogZ2FtZS5pMThuLmxhbmcsIGVyYSB9KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICBnZXRBZ2VBZGp1c3RtZW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0gPSAwXG4gICAgfVxuICAgIC8vIGVkdTogb3B0aW9uYWwgLSBudW1iZXIgb2YgZWR1IGltcHJvdmVtZW50IGNoZWNrc1xuICAgIC8vIGRlZHVjdDogb3B0aW9uYWwgLSBkZWR1Y3QgW3RvdGFsXSBiZXR3ZWVuIFtmcm9tXVxuICAgIC8vIHJlZHVjZTogb3B0aW9uYWwgLSBkZWR1Y3QgW3RvdGxhXSBmcm9tIFtmcm9tXVxuICAgIC8vIGx1Y2s6IG9wdGlvbmFsIC0gcmVyb2xsIGx1Y2sgYW5kIHRha2UgaGlnaGVyXG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuYWdlID49IDQwKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IE1hdGguZmxvb3IodGhpcy5vYmplY3QuYWdlIC8gMTApXG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSAtIDIgPiA0ID8gNCA6IGtleSAtIDIpLFxuICAgICAgICAgICAgcm9sbGVkOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVkdWN0OiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSA+IDEgPyA1ICogTWF0aC5wb3coMiwga2V5IC0gNCkgOiAwKSxcbiAgICAgICAgICAgIGZyb206IFsnc3RyJywgJ2NvbicsICdkZXgnXSxcbiAgICAgICAgICAgIHZhbHVlczoge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlZHVjZToge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgLSAzKSAqIDUsXG4gICAgICAgICAgICBmcm9tOiAnYXBwJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gMjApIHtcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgICAgcm9sbGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gMTUpIHtcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBkZWR1Y3Q6IHtcbiAgICAgICAgICAgIHRvdGFsOiA1LFxuICAgICAgICAgICAgZnJvbTogWydzdHInLCAnc2l6J10sXG4gICAgICAgICAgICB2YWx1ZXM6IHt9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWR1Y2U6IHtcbiAgICAgICAgICAgIHRvdGFsOiA1LFxuICAgICAgICAgICAgZnJvbTogJ2VkdSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGx1Y2s6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNbdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbV0gPSAtdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UudG90YWxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEucGFnZXMgPSB0aGlzLnBhZ2VMaXN0XG5cbiAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGZhbHNlXG5cbiAgICBsZXQgc2V0dXBcbiAgICBsZXQgYXJjaGV0eXBlXG4gICAgbGV0IG9jY3VwYXRpb25cblxuICAgIGxldCBzaG93TW9uZXRhcnkgPSBmYWxzZVxuXG4gICAgc3dpdGNoIChzaGVldERhdGEub2JqZWN0LnN0ZXApIHtcbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfSU5UUk9EVUNUSU9OOlxuICAgICAgICBzaGVldERhdGEuZXJhID0gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0RXJhIH0pXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0NPTkZJR1VSQVRJT046XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cHMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuc2V0dXBcXC4vKVxuICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5vY2N1cGF0aW9uXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5hcmNoZXR5cGVcXC4vKVxuICAgICAgICAgIHNldHVwID0gc2hlZXREYXRhLnNldHVwcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdFNldHVwID0gJydcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgPSAnJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICAgIHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLm93bmVyc2hpcCA9IHtcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVdOiAnT1dORVJTSElQLk5PTkUnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRF06ICdPV05FUlNISVAuTElNSVRFRCcsXG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUl06ICdPV05FUlNISVAuT0JTRVJWRVInLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJdOiAnT1dORVJTSElQLk9XTkVSJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFRcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5jaG9vc2VSb2xsZWRWYWx1ZXMpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfQ0hPT1NFXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0FyY2hldHlwZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpXG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9TRVRVUFM6XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9PT0gJycpIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgICAgc2V0dXAgPSBzaGVldERhdGEuc2V0dXBzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LnNldHVwKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRVM6XG4gICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLmFyY2hldHlwZVxcLi8pXG4gICAgICAgIGlmIChzaGVldERhdGEuYXJjaGV0eXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICBhcmNoZXR5cGUgPSBzaGVldERhdGEuYXJjaGV0eXBlcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuYm9udXNQb2ludHMgPSBhcmNoZXR5cGUuc3lzdGVtLmJvbnVzUG9pbnRzXG4gICAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpYyBpbiBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NvcmVDaGFyYWN0ZXJpc3RpY10pIHtcbiAgICAgICAgICAgICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjb3JlQ2hhcmFjdGVyaXN0aWMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9ICcnXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSBjb3JlQ2hhcmFjdGVyaXN0aWNzWzBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGNvcmVDaGFyYWN0ZXJpc3RpY3MubWFwKGMgPT4gYy50b0xvY2FsZVVwcGVyQ2FzZSgpKS5qb2luKCcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpICsgJyAnKVxuICAgICAgICAgICAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgICAgICAgICAgICBhcmNoZXR5cGUuc3lzdGVtLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgc2tpbGxzLnB1c2goc2tpbGwubmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gc2tpbGxzLmpvaW4oJywgJylcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnN1Z2dlc3RlZE9jY3VwYXRpb25zID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkT2NjdXBhdGlvbnMsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuc3VnZ2VzdGVkVHJhaXRzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUzpcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgIHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCB8fCB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuY2hvb3NlUm9sbGVkVmFsdWVzKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfQ0hPT1NFXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9WQUxVRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cCA9IHtcbiAgICAgICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgICAgIHBvaW50czogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWUsXG4gICAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3N0cicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnN0cixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnY29uJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuY29uLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnc2l6JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuc2l6LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2RleCcsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmRleCxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2FwcCcsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmFwcCxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdpbnQnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5pbnQsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdwb3cnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5wb3csXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2VkdScsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVkdSxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGx1Y2s6IHtcbiAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmx1Y2ssXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgYXJjaGV0eXBlID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LmFyY2hldHlwZSlcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmNoZXR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWMgaW4gYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NvcmVDaGFyYWN0ZXJpc3RpY10pIHtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAga2V5OiBjb3JlQ2hhcmFjdGVyaXN0aWMsXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChzaGVldERhdGEuc2V0dXAuY2hhcmFjdGVyaXN0aWNzLmZpbmQoYyA9PiBjLmtleSA9PT0gY29yZUNoYXJhY3RlcmlzdGljKT8ubGFiZWwgPz8gJ1Vua25vd24nKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldERhdGEuc2V0dXAuY2hhcmFjdGVyaXN0aWNzLmZpbmQoYyA9PiBjLmtleSA9PT0gdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljKS5yb2xsID0gYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGVtcHRpZXMgPSBmYWxzZVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2hlZXREYXRhLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cFBvaW50c1trZXldICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwLnRvdGFsICs9IHBhcnNlSW50KHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVtcHRpZXMgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpYyA9IHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYy50b0xvY2FsZVVwcGVyQ2FzZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVtcHRpZXMgJiYgdGhpcy5vYmplY3QuYWdlID49IDE1KSB7XG4gICAgICAgICAgICAgIGlmIChbc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1JPTEwsIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9WQUxVRVMsIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9DSE9PU0VdLmluY2x1ZGVzKHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QpKSB7XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLnNldHVwLnRvdGFsLnRvU3RyaW5nKCkgPT09IHNoZWV0RGF0YS5zZXR1cC5wb2ludHMudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQVRUUklCVVRFUzpcbiAgICAgICAgc2hlZXREYXRhLnB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLnBvaW50cyA9IHt9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50c1trZXldID0ge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSxcbiAgICAgICAgICAgIG1pbjogLXBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIDEsXG4gICAgICAgICAgICBsYWJlbDogQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKGtleSkubGFiZWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdSAhPT0gJ3VuZGVmaW5lZCcgJiYgIXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1LnJvbGxlZCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCA9IDBcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmRlZHVjdC5mcm9tKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVkdWN0VG90YWwgPSBzaGVldERhdGEuZGVkdWN0VG90YWwgLSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLmRlZHVjdEZyb20gPSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmRlZHVjdC5mcm9tLm1hcChuID0+IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLicgKyBuLnRvVXBwZXJDYXNlKCkpKS5qb2luKCcsICcpLnJlcGxhY2UoLygsICkoW14sXSspJC8sICckMScgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKSArICcgJDInKS5yZXBsYWNlKC9eKFteLF0rKSwoW14sXSspJC8sICckMSQyJylcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmRlZHVjdFRvdGFsICE9PSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmRlZHVjdC50b3RhbCkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5yZWR1Y2VGcm9tID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuJyArIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLmZyb20udG9VcHBlckNhc2UoKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMubHVjayAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzaGVldERhdGEubHVja1ZhbHVlID0gTWF0aC5tYXgodGhpcy5vYmplY3Quc2V0dXBQb2ludHMubHVjaywgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMubHVjaylcbiAgICAgICAgICBpZiAodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMubHVjayA9PT0gMCkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX1ZJRVdfQVRUUklCVVRFUzpcbiAgICAgICAgc2hlZXREYXRhLnBvaW50cyA9IHt9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50c1trZXldID0ge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSxcbiAgICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgICBzdWZmaXg6ICclJyxcbiAgICAgICAgICAgIGxhYmVsOiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoa2V5KS5sYWJlbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmRiID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5kYkZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5Cb251c0RhbWFnZSdcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOYU4oc2hlZXREYXRhLnBvaW50cy5kYi52YWx1ZSkgfHwgTnVtYmVyKHNoZWV0RGF0YS5wb2ludHMuZGIudmFsdWUpID49IDApIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzLmRiLnByZWZpeCA9ICcrJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuYnVpbGQgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmJ1aWxkRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3LkJ1aWxkJ1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIoc2hlZXREYXRhLnBvaW50cy5idWlsZC52YWx1ZSkgPj0gMCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMuYnVpbGQucHJlZml4ID0gJysnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5ocCA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuaHBGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMsICdjaGFyYWN0ZXInKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3LkhpdFBvaW50cydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmhwLnByZWZpeCA9IHNoZWV0RGF0YS5wb2ludHMuaHAudmFsdWUgKyAnLydcbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5tcCA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IubXBGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuTWFnaWNQb2ludHMnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5tcC5wcmVmaXggPSBzaGVldERhdGEucG9pbnRzLm1wLnZhbHVlICsgJy8nXG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuc2FuID0ge1xuICAgICAgICAgIHZhbHVlOiBzaGVldERhdGEucG9pbnRzLnBvdy52YWx1ZSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJy85OScsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3LlNhbml0eSdcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1vdiA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IubW92RnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzLCAnY2hhcmFjdGVyJywgdGhpcy5vYmplY3QuYWdlKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3Lk1vdmVtZW50J1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX09DQ1VQQVRJT05TOlxuICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwub2NjdXBhdGlvblxcLi8pXG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICBvY2N1cGF0aW9uID0gc2hlZXREYXRhLm9jY3VwYXRpb25zLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb24pXG4gICAgICAgICAgaWYgKHR5cGVvZiBvY2N1cGF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBvY2N1cGF0aW9uLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gQ29DN09jY3VwYXRpb25TaGVldC5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cylcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmcgPSBvY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmdcbiAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsXG4gICAgICAgICAgICBzaGVldERhdGEucGVyc29uYWxUZXh0ID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxUZXh0XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgc2hlZXREYXRhLmdyb3VwcyA9IHt9XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc2tpbGxzOiBbXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyA9IDBcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSkpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgKz0gTWF0aC5tYXgoLi4ub3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0lOVkVTVElHQVRPUjpcbiAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlID0gKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRMYW5ndWFnZU93bl0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgICBpZiAoc2hlZXREYXRhLmxhbmd1YWdlKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlTmFtZSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZExhbmd1YWdlT3duXS5pdGVtLm5hbWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2VOYW1lID0gJydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9PQ0NVUEFUSU9OX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLmRlZmF1bHQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgbGV0IGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgIGNvbnN0IHJvd3MgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFncy5pc011bHRpcGxlXG4gICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgICAgbmFtZTogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lLFxuICAgICAgICAgICAgICBncm91cCxcbiAgICAgICAgICAgICAgdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJvd3M7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpc1BpY2thYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc09jY3VwYXRpb25EZWZhdWx0KSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuZGVmYXVsdCsrXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmluT2NjdXBhdGlvbkdyb3VwICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBncm91cCA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmluT2NjdXBhdGlvbkdyb3VwXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9nZ2xlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0ub2NjdXBhdGlvblRvZ2dsZVxuICAgICAgICAgICAgaWYgKGlzUGlja2FibGUpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gZmFsc2VcbiAgICAgICAgICAgIGxldCBkZWxldGVhYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvZ2dsZSB8fCAoaXNQaWNrYWJsZSAmJiBwaWNrZWQpKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSA9ICFzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5hcmNoZXR5cGVUb2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBncm91cDogZ3JvdXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdG9nZ2xlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNDcmVkaXRSYXRpbmcsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlLFxuICAgICAgICAgICAgICBwaWNrZWQsXG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUsXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBza2lsbE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5tYXggPSAocGFyc2VJbnQoc2hlZXREYXRhLmRlZmF1bHQsIDEwKSB8fCAwKSArIChwYXJzZUludChzaGVldERhdGEub2JqZWN0LnBlcnNvbmFsLCAxMCkgfHwgMCkgKyBPYmplY3QudmFsdWVzKHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbkdyb3VwcykucmVkdWNlKChzLCB2KSA9PiBzICsgKHBhcnNlSW50KHYsIDEwKSB8fCAwKSwgMClcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEuc2VsZWN0ZWQgPT09IHNoZWV0RGF0YS5tYXgpIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRV9TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5tYXggPSAwXG4gICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgbGV0IGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgIGNvbnN0IHJvd3MgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFncy5pc011bHRpcGxlXG4gICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgICAgbmFtZTogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lLFxuICAgICAgICAgICAgICBncm91cCxcbiAgICAgICAgICAgICAgdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJvd3M7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpc1BpY2thYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc0FyY2hldHlwZURlZmF1bHQpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnZGVmYXVsdCdcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5tYXgrK1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9nZ2xlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uYXJjaGV0eXBlVG9nZ2xlXG4gICAgICAgICAgICBpZiAoaXNQaWNrYWJsZSkge1xuICAgICAgICAgICAgICB0b2dnbGUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGxldCBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIGxldCBwaWNrZWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IGRlbGV0ZWFibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZFxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9nZ2xlIHx8IChpc1BpY2thYmxlICYmIHBpY2tlZCkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lXG4gICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBkZWxldGVhYmxlID0gIXNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLm9jY3VwYXRpb25Ub2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBncm91cDogZ3JvdXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdG9nZ2xlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlLFxuICAgICAgICAgICAgICBwaWNrZWQsXG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUsXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBza2lsbE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLnNlbGVjdGVkID09PSBzaGVldERhdGEubWF4KSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9QT0lOVFNfU0tJTExTOlxuICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gW11cbiAgICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkgPSAhKHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5tYXggPiAwKVxuICAgICAgICBzaGVldERhdGEucGVyc29uYWwgPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5pbnQsIDEwKSksXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24gPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZSA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cCAhPT0gJycpIHtcbiAgICAgICAgICBzaG93TW9uZXRhcnkgPSAoYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHNoZWV0RGF0YS5vYmplY3Quc2V0dXApKS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLmxlbmd0aCA+IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgICAgIG9jY3VwYXRpb24gPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Qub2NjdXBhdGlvbilcbiAgICAgICAgICBpZiAob2NjdXBhdGlvbikge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgaWYgKGFyY2hldHlwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgPSBhcmNoZXR5cGVbMF0uc3lzdGVtLmJvbnVzUG9pbnRzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5za2lsbEl0ZW1zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV1cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBza2lsbC5yb3dzLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBjb25zdCByb3cgPSBza2lsbC5yb3dzW2luZGV4XVxuICAgICAgICAgICAgICBpZiAoIXNraWxsLmZsYWdzLmlzTXVsdGlwbGUgfHwgcm93LnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2tpbGwuaXRlbSlcbiAgICAgICAgICAgICAgICBpZiAocm93LnNlbGVjdGVkICE9PSBmYWxzZSAmJiB0eXBlb2Ygcm93LnNlbGVjdGVkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgaXRlbSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHJvdy5zZWxlY3RlZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGJhc2UgPSBpdGVtLnN5c3RlbS5iYXNlXG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOdW1lcmljKGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoJ0AnICsga2V5LCAnaScpXG4gICAgICAgICAgICAgICAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UocmVnRXgsIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOdW1lcmljKGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgICBiYXNlID0gTWF0aC5mbG9vcihuZXcgQXZlcmFnZVJvbGwoJygnICsgYmFzZSArICcpJylbKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzEyJykgPyAnZXZhbHVhdGUnIDogJ2V2YWx1YXRlU3luYycpLyogLy8gRm91bmRyeVZUVCB2MTEgKi9dKHsgbWluaW1pemU6IHRydWUsIG1heGltaXplOiB0cnVlIH0pLnRvdGFsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdG90YWxQb2ludHMgPSBwYXJzZUludChiYXNlLCAxMClcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5vY2N1cGF0aW9uUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cylcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraWxsLmZsYWdzLmlzQ3JlZGl0UmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSArICcgWycgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluICsgJyAtICcgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ICsgJ10nXG4gICAgICAgICAgICAgICAgICBpZiAodG90YWxQb2ludHMgPj0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiAmJiB0b3RhbFBvaW50cyA8PSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvdy5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyByb3cuc2VsZWN0ZWQgKyAnKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGlzT2NjdXBhdGlvbjogcm93Lm9jY3VwYXRpb25Ub2dnbGUsXG4gICAgICAgICAgICAgICAgICBpc0FyY2hldHlwZTogcm93LmFyY2hldHlwZVRvZ2dsZSxcbiAgICAgICAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICAgICAgICBwZXJzb25hbFBvaW50czogcm93LnBlcnNvbmFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgb2NjdXBhdGlvblBvaW50czogcm93Lm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6IHJvdy5hcmNoZXR5cGVQb2ludHMsXG4gICAgICAgICAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiByb3cuZXhwZXJpZW5jZVBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgc2hvd0NyZWRpdFJhdGluZzogc2hvd01vbmV0YXJ5ICYmIGtleSA9PT0gdGhpcy5jb2NpZENyZWRpdFJhdGluZ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5yZW1haW5pbmcgPSBzaGVldERhdGEucGVyc29uYWwudG90YWwgLSBzaGVldERhdGEucGVyc29uYWwuY291bnRcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24ucmVtYWluaW5nID0gc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgLSBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudFxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgLSBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQkFDS1NUT1JZOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgYWxsQmFja3N0b3JpZXMgPSBhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUJhY2tzdG9yaWVzXG4gICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzID0ge31cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYmFja3N0b3JpZXNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgICAgIHJvbGxzOiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCh0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0ua2V5LCBhbGxCYWNrc3RvcmllcykubGVuZ3RoID8gdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSA6ICcnKSxcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ1JFQVRFOlxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5rZXlwcmVzcyhlID0+IC90ZXh0YXJlYS9pLnRlc3QoKGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCkudGFnTmFtZSkgfHwgKGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGUgfHwgMCkgIT09IDEzKVxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdF9vbl9jaGFuZ2UnKS5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yb2xsLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbmNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlY3JlYXNlLTEwLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2FsbCcpLmNsaWNrKHRoaXMuX29uUm9sbEFsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfY2hvb3NlJykuY2xpY2sodGhpcy5fb25Sb2xsQ2hvb3NlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9lZHUnKS5jbGljayh0aGlzLl9vblJvbGxFZHUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2x1Y2snKS5jbGljayh0aGlzLl9vblJvbGxMdWNrLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5zdWJtaXRfb25fYmx1cicpLmJsdXIodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnNhdmUtY2hhcmFjdGVyaXN0aWMtb24tYmx1cicpLmJsdXIodGhpcy5fb25DaGFuZ2VTYXZlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLnRvZ2dsZWFibGUnKS5jbGljayh0aGlzLl9vblRvZ2dsZVNraWxsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS5jbGlja2FibGUnKS5jbGljayh0aGlzLl9vbkNsaWNrUGlja1NraWxsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2tpbGxzLWxpc3QgaW5wdXQnKS5jbGljayh0aGlzLl9vbkNsaWNrU2tpbGxTcGVjaWFsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2tpbGxzLWxpc3QgLnJlbW92ZS1za2lsbCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tSZW1vdmVTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc2tpbGwtYWRqdXN0bWVudCcpLmJsdXIodGhpcy5fb25DaGFuZ2VTa2lsbFBvaW50cy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgndGV4dGFyZWEuYmFja3N0b3J5LXRleHQnKS5rZXl1cCh0aGlzLl9vbkNoYW5nZUJhY2tzdG9yeVRleHQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5iYWNrc3Rvcnktcm9sbCcpLmNsaWNrKHRoaXMuX29uUm9sbEJhY2tzdG9yeS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLmJhY2tzdG9yeS1yZXNldCcpLmNsaWNrKHRoaXMuX29uUmVzZXRCYWNrc3RvcnkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIHJvbGxNZXNzYWdlIChyb2xscykge1xuICAgIGlmIChyb2xscy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBbXVxuICAgICAgZm9yIChjb25zdCByb2xsIG9mIHJvbGxzKSB7XG4gICAgICAgIGh0bWwucHVzaChhd2FpdCByZW5kZXJUZW1wbGF0ZShSb2xsLkNIQVRfVEVNUExBVEUsIHtcbiAgICAgICAgICBmb3JtdWxhOiAoQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHJvbGxbMF0pPy5sYWJlbCA/PyByb2xsWzBdKSArICc6ICcgKyByb2xsWzFdLFxuICAgICAgICAgIHRvb2x0aXA6IGF3YWl0IHJvbGxbMl0uZ2V0VG9vbHRpcCgpLFxuICAgICAgICAgIHRvdGFsOiByb2xsWzJdLnRvdGFsXG4gICAgICAgIH0pKVxuICAgICAgfVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwuam9pbignPGRpdj4mbmJzcDs8L2Rpdj4nKSxcbiAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYWRkSXRlbVRvTGlzdCAoaXRlbSwgeyBpc09jY3VwYXRpb25EZWZhdWx0ID0gZmFsc2UsIGluT2NjdXBhdGlvbkdyb3VwID0gZmFsc2UsIG9jY3VwYXRpb25Ub2dnbGUgPSBmYWxzZSwgaXNBcmNoZXR5cGVEZWZhdWx0ID0gZmFsc2UsIGFyY2hldHlwZVRvZ2dsZSA9IGZhbHNlLCBpc0NyZWRpdFJhdGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGNvbnN0IGtleSA9IChpdGVtLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQgPz8gaXRlbS5uYW1lKVxuICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmludmVzdGlnYXRvckl0ZW1zLnB1c2goaXRlbSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBpc011bHRpcGxlID0gISEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsICYmICgoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5yZXF1aXJlc25hbWUgJiYgIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLm9ubHlvbmUgPz8gZmFsc2UpKSB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnBpY2tuYW1lb25seSB8fCBpdGVtLm5hbWUgPT09IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQW55U3BlY05hbWUnKSkpXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICBpc09jY3VwYXRpb25EZWZhdWx0LFxuICAgICAgaW5PY2N1cGF0aW9uR3JvdXAsXG4gICAgICBpc0FyY2hldHlwZURlZmF1bHQsXG4gICAgICBpc0NyZWRpdFJhdGluZyxcbiAgICAgIG9jY3VwYXRpb25Ub2dnbGUsXG4gICAgICBhcmNoZXR5cGVUb2dnbGVcbiAgICB9XG4gICAgY29uc3Qgcm93cyA9IHtcbiAgICAgIG9jY3VwYXRpb25Qb2ludHM6ICcnLFxuICAgICAgYXJjaGV0eXBlUG9pbnRzOiAnJyxcbiAgICAgIGV4cGVyaWVuY2VQb2ludHM6ICcnLFxuICAgICAgcGVyc29uYWxQb2ludHM6ICcnLFxuICAgICAgc2VsZWN0ZWQ6IGZhbHNlXG4gICAgfVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldID0ge1xuICAgICAgICBpdGVtLFxuICAgICAgICBmbGFnczogZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChmbGFncywgeyBpc011bHRpcGxlIH0sIHsgaW5wbGFjZTogZmFsc2UgfSksXG4gICAgICAgIHJvd3M6IFtdXG4gICAgICB9XG4gICAgICBpZiAoIWlzTXVsdGlwbGUgfHwgIShpc09jY3VwYXRpb25EZWZhdWx0ID09PSBmYWxzZSAmJiBpbk9jY3VwYXRpb25Hcm91cCA9PT0gZmFsc2UgJiYgaXNBcmNoZXR5cGVEZWZhdWx0ID09PSBmYWxzZSkpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaChmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWlzTXVsdGlwbGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1swXVtmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZmxhZ3MsIHJvd3MsIHsgaW5wbGFjZTogZmFsc2UgfSkpXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGZsYWcgaW4gZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLmZsYWdzW2ZsYWddID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLmZsYWdzW2ZsYWddIHx8IGZsYWdzW2ZsYWddXG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNNdWx0aXBsZSAmJiBmbGFncy5pc0NyZWRpdFJhdGluZykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF0ub2NjdXBhdGlvblBvaW50cyA9IHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5taW5cbiAgICB9XG4gIH1cblxuICBjbGVhclNldHVwUG9pbnRzICgpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9ICcnXG4gICAgfVxuICAgIHRoaXMub2JqZWN0LnJvbGxlZFZhbHVlcyA9IFtdXG4gIH1cblxuICBhc3luYyBzZXRTa2lsbExpc3RzICgpIHtcbiAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zID0ge31cbiAgICB0aGlzLm9iamVjdC5vY2N1cGF0aW9uR3JvdXBzID0ge31cbiAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcyA9IFtdXG4gICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Qub2NjdXBhdGlvbilcbiAgICBsZXQgYXJjaGV0eXBlID0gZmFsc2VcbiAgICBpZiAodGhpcy5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgYXJjaGV0eXBlID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LmFyY2hldHlwZSlcbiAgICB9XG4gICAgaWYgKHNldHVwICYmIG9jY3VwYXRpb24gJiYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpIHx8IGFyY2hldHlwZSkpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zID0gW11cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHNldHVwLnN5c3RlbS5iaW9TZWN0aW9uc1tpbmRleF0sXG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtleTogJ3J0Li5iYWNrc3RvcnktJyArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2Uoc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zW2luZGV4XSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnBlcnNvbmFsID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxcbiAgICAgIHRoaXMub2JqZWN0LnBlcnNvbmFsVGV4dCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsVGV4dFxuICAgICAgdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nID0gb2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nXG4gICAgICBsZXQgaXRlbXMgPSBbXVxuICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShzZXR1cC5zeXN0ZW0uaXRlbXMpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0pXG4gICAgICB9XG4gICAgICBpdGVtcyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLnNraWxscylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW1zW2luZGV4XSwgeyBpc09jY3VwYXRpb25EZWZhdWx0OiB0cnVlLCBvY2N1cGF0aW9uVG9nZ2xlOiB0cnVlIH0pXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBncm91cCA9IDAsIGdtID0gb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgZ3JvdXAgPCBnbTsgZ3JvdXArKykge1xuICAgICAgICB0aGlzLm9iamVjdC5vY2N1cGF0aW9uR3JvdXBzW2dyb3VwXSA9IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tncm91cF0ub3B0aW9uc1xuICAgICAgICBpdGVtcyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tncm91cF0uc2tpbGxzKVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW1zW2luZGV4XSwgeyBpbk9jY3VwYXRpb25Hcm91cDogZ3JvdXAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFyY2hldHlwZSkge1xuICAgICAgICBpdGVtcyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW1zW2luZGV4XSwgeyBpc0FyY2hldHlwZURlZmF1bHQ6IHRydWUsIGFyY2hldHlwZVRvZ2dsZTogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoTnVtYmVyKHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5tYXgpID4gMCkge1xuICAgICAgICBjb25zdCBuYW1lQ3JlZGl0UmF0aW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcua2V5cy4nICsgdGhpcy5jb2NpZENyZWRpdFJhdGluZylcbiAgICAgICAgY29uc3QgZmxhZ3MgPSB7IGlzT2NjdXBhdGlvbkRlZmF1bHQ6IHRydWUsIG9jY3VwYXRpb25Ub2dnbGU6IHRydWUsIGlzQ3JlZGl0UmF0aW5nOiB0cnVlIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRDcmVkaXRSYXRpbmddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdCh0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRDcmVkaXRSYXRpbmddLml0ZW0sIGZsYWdzKVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW25hbWVDcmVkaXRSYXRpbmddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdCh0aGlzLm9iamVjdC5za2lsbEl0ZW1zW25hbWVDcmVkaXRSYXRpbmddLml0ZW0sIGZsYWdzKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRCh0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nKVxuICAgICAgICAgIGlmIChza2lsbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChza2lsbFswXSwgZmxhZ3MpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXkpIHtcbiAgICAgIGNvbnN0IGRyYWdEYXRhID0geyB0eXBlOiAnaW52ZXN0aWdhdG9yQ2hhcmFjdGVyaXN0aWMnLCBrZXk6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY0tleSwgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC52YWx1ZSB9XG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vZmZzZXQpIHtcbiAgICAgIGNvbnN0IGRyYWdEYXRhID0geyB0eXBlOiAnaW52ZXN0aWdhdG9yVmFsdWUnLCBvZmZzZXQ6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vZmZzZXQgfVxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfVxuICB9XG5cbiAgX2NhbkRyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgX2NhbkRyYWdEcm9wIChzZWxlY3Rvcikge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhTGlzdCA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSlcbiAgICAgIGlmICh0eXBlb2YgZGF0YUxpc3QudHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGF0YUxpc3QudHlwZSA9PT0gJ2ludmVzdGlnYXRvckNoYXJhY3RlcmlzdGljJykge1xuICAgICAgICBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXlcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuZW1wdHlcbiAgICAgICAgfVxuICAgICAgICBkYXRhTGlzdC5va2F5ID0gZmFsc2VcbiAgICAgICAgaWYgKGRhdGFMaXN0LmRlc3RpbmF0aW9uID09PSAneCcpIHtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLm9iamVjdC5yb2xsZWRWYWx1ZXMuZmluZEluZGV4KGkgPT4gaS5hc3NpZ25lZCA9PT0gdHJ1ZSlcbiAgICAgICAgICBpZiAob2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvbGxlZFZhbHVlc1tvZmZzZXRdID0ge1xuICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSxcbiAgICAgICAgICAgICAgYXNzaWduZWQ6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gJydcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC5rZXkgPT09ICctJyAmJiB0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5vYmplY3QucGxhY2VhYmxlLmluZGV4T2YocGFyc2VJbnQoZGF0YUxpc3QudmFsdWUsIDEwKSlcbiAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnB1c2gocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dLCAxMCkpXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSA9IHBhcnNlSW50KGRhdGFMaXN0LnZhbHVlLCAxMClcbiAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUuc29ydCgpLnJldmVyc2UoKVxuICAgICAgICAgIGRhdGFMaXN0Lm9rYXkgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LmRlc3RpbmF0aW9uID09PSAnLScpIHtcbiAgICAgICAgICBpZiAodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5wdXNoKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0sIDEwKSlcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPSAnJ1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgICAgICAgIGRhdGFMaXN0Lm9rYXkgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IHRlbXAgPSAodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9PT0gJycgPyAnJyA6IHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0sIDEwKSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSA9PT0gJycgPyAnJyA6IHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSwgMTApKVxuICAgICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSA9IHRlbXBcbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhTGlzdC5va2F5KSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YUxpc3QudHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGF0YUxpc3QudHlwZSA9PT0gJ2ludmVzdGlnYXRvclZhbHVlJykge1xuICAgICAgICBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXlcbiAgICAgICAgZGF0YUxpc3Qub2theSA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5yb2xsZWRWYWx1ZXNbZGF0YUxpc3Qub2Zmc2V0XS5hc3NpZ25lZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBsZXQgb2xkXG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJycpIHtcbiAgICAgICAgICAgIG9sZCA9IHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSB0aGlzLm9iamVjdC5yb2xsZWRWYWx1ZXNbZGF0YUxpc3Qub2Zmc2V0XS52YWx1ZVxuICAgICAgICAgIGlmICh0eXBlb2Ygb2xkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3Qucm9sbGVkVmFsdWVzW2RhdGFMaXN0Lm9mZnNldF0udmFsdWUgPSBvbGRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYmplY3Qucm9sbGVkVmFsdWVzW2RhdGFMaXN0Lm9mZnNldF0uYXNzaWduZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFMaXN0Lm9rYXkgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFMaXN0Lm9rYXkpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuICAgIGlmIChbdGhpcy5wYWdlTGlzdC5QQUdFX0FSQ0hFVFlQRV9TS0lMTFMsIHRoaXMucGFnZUxpc3QuUEFHRV9PQ0NVUEFUSU9OX1NLSUxMU10uaW5jbHVkZXModGhpcy5vYmplY3Quc3RlcCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW0pXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkNsaWNrU2tpbGxTcGVjaWFsIChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICBfb25DbGlja1JlbW92ZVNraWxsIChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8ucGFyZW50Tm9kZT8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5wYXJlbnROb2RlPy5kYXRhc2V0Py5pbmRleFxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLnNwbGljZShpbmRleCwgaW5kZXgpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZVNraWxsIChldmVudCkge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8uaW5kZXhcbiAgICBjb25zdCB0b2dnbGVLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py50b2dnbGVLZXlcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9ICF0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DbGlja1BpY2tTa2lsbCAoZXZlbnQpIHtcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmluZGV4XG4gICAgY29uc3QgdG9nZ2xlS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8udG9nZ2xlS2V5XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IGZhbHNlXG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgICBsZXQgc2tpbGxMaXN0ID0gW11cbiAgICAgIGNvbnN0IGdyb3VwID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzR3JvdXBGcm9tS2V5KGtleSlcbiAgICAgIGlmIChncm91cCkge1xuICAgICAgICBza2lsbExpc3QgPSAoYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoZ3JvdXApICsgJy4rJCcpLCB0eXBlOiAnaScgfSkpLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICByZXR1cm4gIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkpKVxuICAgICAgICB9KVxuICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgc2tpbGxzOiBza2lsbExpc3QsXG4gICAgICAgIGFsbG93Q3VzdG9tOiAodGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSksXG4gICAgICAgIGZpeGVkQmFzZVZhbHVlOiB0cnVlLFxuICAgICAgICBzcGVjaWFsaXphdGlvbk5hbWU6IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgbGFiZWw6IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWVcbiAgICAgIH0pXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBpZiAoc2tpbGxEYXRhLnNlbGVjdGVkICE9PSAnJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5uYW1lICE9PSAnJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9IHNraWxsRGF0YS5uYW1lXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzZWxlY3RlZCA9IGZhbHNlXG4gICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQgIT09ICcnKSB7XG4gICAgICAgICAgc2VsZWN0ZWQgPSBza2lsbExpc3QuZmluZChpID0+IGkuaWQgPT09IHNraWxsRGF0YS5zZWxlY3RlZClcbiAgICAgICAgfSBlbHNlIGlmIChza2lsbERhdGEubmFtZSAhPT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IHNraWxsRGF0YS5uYW1lXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaCh7XG4gICAgICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdDogZmFsc2UsXG4gICAgICAgICAgaW5PY2N1cGF0aW9uR3JvdXA6IGZhbHNlLFxuICAgICAgICAgIGlzQXJjaGV0eXBlRGVmYXVsdDogZmFsc2UsXG4gICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgIG9jY3VwYXRpb25Ub2dnbGU6ICh0b2dnbGVLZXkgPT09ICdvY2N1cGF0aW9uVG9nZ2xlJyksXG4gICAgICAgICAgYXJjaGV0eXBlVG9nZ2xlOiAodG9nZ2xlS2V5ID09PSAnYXJjaGV0eXBlVG9nZ2xlJyksXG4gICAgICAgICAgb2NjdXBhdGlvblBvaW50czogJycsXG4gICAgICAgICAgYXJjaGV0eXBlUG9pbnRzOiAnJyxcbiAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgICAgICBwZXJzb25hbFBvaW50czogJycsXG4gICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlU2tpbGxQb2ludHMgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgYWRqdXN0bWVudCA9IGlucHV0LmRhdGEoJ2FkanVzdG1lbnQnKVxuICAgIGNvbnN0IGxpID0gaW5wdXQuY2xvc2VzdCgnbGknKVxuICAgIGNvbnN0IGtleSA9IGxpLmRhdGEoJ2tleScpXG4gICAgY29uc3QgaW5kZXggPSBsaS5kYXRhKCdpbmRleCcpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdW2FkanVzdG1lbnRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW2FkanVzdG1lbnRdID0gaW5wdXQudmFsKClcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZUJhY2tzdG9yeVRleHQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGV4dGFyZWEgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgaW5kZXggPSB0ZXh0YXJlYS5kYXRhKCdpbmRleCcpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSB0ZXh0YXJlYS52YWwoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBjb25zdCBrZXkgPSBidXR0b24uZGF0YSgna2V5JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJvbGx0YWJsZSA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQoa2V5KVxuICAgICAgaWYgKHJvbGx0YWJsZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdGFibGVSZXN1bHQgPSBhd2FpdCByb2xsdGFibGVbMF0ucm9sbCgpXG4gICAgICAgIGlmICh0YWJsZVJlc3VsdC5yZXN1bHRzWzBdLnR5cGUgPT09IENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5URVhUKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlID0gKHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSArICdcXG4nICsgdGFibGVSZXN1bHQucmVzdWx0c1swXS50ZXh0LnRyaW0oKSkudHJpbSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0QmFja3N0b3J5IChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IGJ1dHRvbi5kYXRhKCdpbmRleCcpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSAnJ1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEx1Y2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgaWYgKHNldHVwKSB7XG4gICAgICBjb25zdCBkaWUgPSBhd2FpdCBuZXcgUm9sbChzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmx1Y2sudG9TdHJpbmcoKSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMubHVjayA9IFtkaWUudG90YWxdXG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgIGZvcm11bGE6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuUm9sbFR3aWNlRm9yTHVjaycpICsgJzogJyArIHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpLFxuICAgICAgICB0b29sdGlwOiBhd2FpdCBkaWUuZ2V0VG9vbHRpcCgpLFxuICAgICAgICB0b3RhbDogZGllLnRvdGFsXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsRWR1IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKCF0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgJiYgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUudG90YWwpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuZWR1LCAxMClcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IFtdXG4gICAgICAgIGZvciAobGV0IHJvbGxzID0gdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUudG90YWw7IHJvbGxzID4gMDsgcm9sbHMtLSkge1xuICAgICAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwMCcpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBpZiAoZGllLnRvdGFsID4gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgUm9sbCgnMWQxMCcpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIG1lc3NhZ2UucHVzaChgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldlN1Y2Nlc3MnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJyksXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmApXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgcGFyc2VJbnQoYXVnbWVudERpZS50b3RhbCwgMTApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UucHVzaChgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2RmFpbHVyZScsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEFsbDREZXYnKSxcbiAgICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmpvaW4oJycpLFxuICAgICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmVkdSA9IHZhbHVlIC0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuZWR1LCAxMClcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxBbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHJvbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnLCAnbHVjayddKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICByb2xscy5wdXNoKHJlc3VsdClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yb2xsTWVzc2FnZShyb2xscylcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbENob29zZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKHRoaXMub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgY29uc3Qgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgICBpZiAodHlwZW9mIHNldHVwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCByb2xsRm9ybXVsYXMgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnXSkge1xuICAgICAgICAgIHJvbGxGb3JtdWxhc1trZXldID0gc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xsc1trZXldXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgICAgICBjb25zdCBhcmNoZXR5cGUgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgIGlmICh0eXBlb2YgYXJjaGV0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHJvbGxGb3JtdWxhc1t0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWNdID0gYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnJvbGxlZFZhbHVlcyA9IFtdXG4gICAgICAgIGNvbnN0IGh0bWwgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByb2xsRm9ybXVsYXMpIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwocm9sbEZvcm11bGFzW2tleV0udG9TdHJpbmcoKSlcbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5yb2xsZWRWYWx1ZXMucHVzaCh7XG4gICAgICAgICAgICB2YWx1ZTogcm9sbC50b3RhbCxcbiAgICAgICAgICAgIGFzc2lnbmVkOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaHRtbC5wdXNoKGF3YWl0IHJlbmRlclRlbXBsYXRlKFJvbGwuQ0hBVF9URU1QTEFURSwge1xuICAgICAgICAgICAgZm9ybXVsYTogcm9sbEZvcm11bGFzW2tleV0udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHRvb2x0aXA6IGF3YWl0IHJvbGwuZ2V0VG9vbHRpcCgpLFxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWxcbiAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwuam9pbignPGRpdj4mbmJzcDs8L2Rpdj4nKSxcbiAgICAgICAgICB3aGlzcGVyOiBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGlmICh0eXBlb2YgbGkuZGF0YXNldC5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1pbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWF4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlPZmZzZXQobGkuZGF0YXNldC5vZmZzZXQsIDEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxMClcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgMSlcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIC0xKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYzEwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGlmICh0eXBlb2YgbGkuZGF0YXNldC5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1pbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWF4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlPZmZzZXQobGkuZGF0YXNldC5vZmZzZXQsIC0xMCwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgbW9kaWZ5T2Zmc2V0IChrZXksIHZhbHVlLCBtaW4sIG1heCkge1xuICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0gPSBNYXRoLm1heChNYXRoLm1pbihwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkgKyB2YWx1ZSwgcGFyc2VJbnQobWF4LCAxMCkpLCBwYXJzZUludChtaW4sIDEwKSlcbiAgfVxuXG4gIG1vZGlmeUNoYXJhY3RlcmlzdGljIChrZXksIHZhbHVlKSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpICsgdmFsdWVcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnJvbGxNZXNzYWdlKFtyZXN1bHRdKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9ICQoYCNpbnZlc3RpZ2F0b3Itd2l6YXJkLWFwcGxpY2F0aW9uIGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaS5maW5kKCdpbnB1dCcpXG4gICAgY29uc3QgZm9ybXVsYSA9IGxpLmRhdGEoJ3JvbGwnKVxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QucmVyb2xsc0VuYWJsZWQgfHwgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9PT0gJycpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEudG9TdHJpbmcoKSlcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlucHV0LnZhbChyb2xsLnRvdGFsKVxuICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gTnVtYmVyKHJvbGwudG90YWwpXG4gICAgICAgIHJldHVybiBba2V5LCBmb3JtdWxhLnRvU3RyaW5nKCksIHJvbGxdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF9vbkNoYW5nZVN1Ym1pdCBtZXRob2QuXG4gICAqL1xuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBfb25DaGFuZ2VTYXZlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmoucHJvcCgnbmFtZScpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdID0gb2JqLnZhbCgpXG4gICAgICBsZXQgZW1wdGllcyA9IGZhbHNlXG4gICAgICBsZXQgdG90YWwgPSAwXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gJycpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgICAgIHRvdGFsICs9IHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbXB0aWVzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBvYmpUb3RhbCA9IG9iai5jbG9zZXN0KCdvbC5pdGVtLWxpc3QnKS5maW5kKCdzcGFuLnRvdGFsJylcbiAgICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KG9ialRvdGFsLnNpYmxpbmdzKCdzcGFuLnZhbHVlJykudGV4dCgpLCAxMClcbiAgICAgIG9ialRvdGFsLnRleHQodG90YWwpXG4gICAgICBpZiAodG90YWwgPT09IG1heCAmJiAhZW1wdGllcykge1xuICAgICAgICBpZiAob2JqLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCdidXR0b24uc3VibWl0LWJ1dHRvbltkYXRhLWJ1dHRvbj1uZXh0XScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRQYWdlTnVtYmVyIChkaXJlY3Rpb24pIHtcbiAgICBjb25zdCBwYWdlT3JkZXIgPSB0aGlzLnBhZ2VPcmRlclxuICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KE9iamVjdC5rZXlzKHBhZ2VPcmRlcikuZmluZChrZXkgPT4gcGFnZU9yZGVyW2tleV0gPT09IHRoaXMub2JqZWN0LnN0ZXApLCAxMCkgKyBkaXJlY3Rpb25cbiAgICByZXR1cm4gcGFnZU9yZGVyW2tleV1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGVcbiAgICogQSBzdWJjbGFzcyBvZiB0aGUgRm9ybUFwcGxpY2F0aW9uIG11c3QgaW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZC5cbiAgICovXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChbJ2JhY2snLCAnbmV4dCddLmluY2x1ZGVzKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24pKSB7XG4gICAgICBpZiAoZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZS5pbmRleE9mKCdjdXJyZW50bHktc3VibWl0dGluZycpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lID0gZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZSArICcgY3VycmVudGx5LXN1Ym1pdHRpbmcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGZvcm1EYXRhWyd3b3JsZC1lcmEnXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtc2V0dXAnXSkge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXAgPSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJywgdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwKVxuICAgICAgICB0aGlzLm9iamVjdC5zZXR1cCA9IHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cFxuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXAgIT09IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXAgPSBmb3JtRGF0YVsnZGVmYXVsdC1vd25lcnNoaXAnXVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0T3duZXJzaGlwKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRFcmEgIT09IGZvcm1EYXRhWyd3b3JsZC1lcmEnXSkge1xuICAgICAgICBjb25zdCBvYmogPSAkKHRoaXMuZWxlbWVudC5maW5kKCdmb3JtJykpXG4gICAgICAgIGNvbnN0IHN0YXJ0ZWQgPSBEYXRlLm5vdygpXG4gICAgICAgIG9iai5maW5kKCcuZGlhbG9nLWJ1dHRvbnM6Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5zY3JvbGxzZWN0aW9uOmZpcnN0JykuaGlkZSgpXG4gICAgICAgIG9iai5maW5kKCcuZXJhY2hhbmdlOmZpcnN0Jykuc2hvdygpXG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEgPSBmb3JtRGF0YVsnd29ybGQtZXJhJ11cbiAgICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnd29ybGRFcmEnLCB0aGlzLm9iamVjdC5kZWZhdWx0RXJhKVxuICAgICAgICB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5sb2FkQ2FjaGVJdGVtQnlDb0NJRCgpXG4gICAgICAgIC8vIFRvIHByZXZlbnQgZmxhc2hpbmcgc2hvdyBtZXNzYWdlIGZvciBhdCBsZWFzdCA1MDAgbXNcbiAgICAgICAgY29uc3QgYnVmZmVyID0gNTAwIC0gKERhdGUubm93KCkgLSBzdGFydGVkKVxuICAgICAgICAvLyBEb24ndCBib3RoZXIgaWYgbGVzcyB0aGFuIDEwbXMgcmVtYWluaW5nXG4gICAgICAgIGlmIChidWZmZXIgPiAxMCkge1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBidWZmZXIpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHR5cGVvZiBmb3JtRGF0YVsnY2hhcmFjdGVyaXN0aWNzLW1ldGhvZCddICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IE51bWJlcihmb3JtRGF0YVsnY2hhcmFjdGVyaXN0aWNzLW1ldGhvZCddKVxuICAgICAgICBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ERUZBVUxUKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5ID0gZmFsc2VcbiAgICAgICAgICB0aGlzLm9iamVjdC5jaG9vc2VSb2xsZWRWYWx1ZXMgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vYmplY3QuY2hvb3NlUm9sbGVkVmFsdWVzID0gZmFsc2VcbiAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMgPSBbXVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IHRoaXMuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5ID0gZmFsc2VcbiAgICAgICAgICB0aGlzLm9iamVjdC5jaG9vc2VSb2xsZWRWYWx1ZXMgPSBmYWxzZVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMgPSBbOTAsIDgwLCA3MCwgNjAsIDYwLCA1MCwgNTAsIDQwXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMgPSBbODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNTAsIDQwXVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0NIT09TRSkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSA9IGZhbHNlXG4gICAgICAgICAgdGhpcy5vYmplY3QuY2hvb3NlUm9sbGVkVmFsdWVzID0gdHJ1ZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUG9pbnRCdXknLCB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScsIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkQ2hvb3NlVmFsdWVzJywgdGhpcy5vYmplY3QuY2hvb3NlUm9sbGVkVmFsdWVzKVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucmVyb2xsc0VuYWJsZWQgPSAodHlwZW9mIGZvcm1EYXRhWydyZXJvbGxzLWVuYWJsZWQnXSA9PT0gJ3N0cmluZycpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJywgdGhpcy5vYmplY3QucmVyb2xsc0VuYWJsZWQpXG4gICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIoZm9ybURhdGFbJ3F1aWNrLWZpcmUtdmFsdWVzLScgKyBpXSlcbiAgICAgICAgaWYgKG51bSA+IDApIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXNbaV0gPSBudW1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtZW5hYmxlZCddID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgPT09ICcwJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDFcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSBmb3JtRGF0YVsnZGVmYXVsdC1xdWFudGl0eSddXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgIT09ICcwJykge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSAwXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cCAhPT0gZm9ybURhdGFbJ2NvYy1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gZm9ybURhdGFbJ2NvYy1zZXR1cCddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09IGZvcm1EYXRhWydjb2MtYXJjaGV0eXBlJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYXJjaGV0eXBlID0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXVxuICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gIT09IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gPSBmb3JtRGF0YVsnY29jLW9jY3VwYXRpb24nXVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZmxhdEtleXMgPSBbJ25hbWUnLCAnYWdlJywgJ3Jlc2lkZW5jZScsICdiaXJ0aHBsYWNlJywgJ2xhbmd1YWdlJywgJ2F2YXRhcicsICd0b2tlbiddXG4gICAgZm9yIChjb25zdCBrZXkgb2YgZmxhdEtleXMpIHtcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFba2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5vYmplY3Rba2V5XSAhPT0gZm9ybURhdGFba2V5XSkge1xuICAgICAgICB0aGlzLm9iamVjdFtrZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICBpZiAoa2V5ID09PSAnYWdlJykge1xuICAgICAgICAgIHRoaXMuZ2V0QWdlQWRqdXN0bWVudHMoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChldmVudC5zdWJtaXR0ZXI/LmRhdGFzZXQuYnV0dG9uID09PSAnYmFjaycpIHtcbiAgICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSB0aGlzLmdldFBhZ2VOdW1iZXIoLTEpXG4gICAgICBpZiAodHlwZW9mIHBhZ2VOdW1iZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnN0ZXAgPSBwYWdlTnVtYmVyXG4gICAgICAgIC8vIFdoZW4gbW92aW5nIHN0ZXAgcmVzZXQgc2Nyb2xsIGhlaWdodFxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLmVsZW1lbnQuZmluZCgnLnNjcm9sbHNlY3Rpb24nKVxuICAgICAgICBpZiAob2JqLmxlbmd0aCAmJiBvYmpbMF0uc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgb2JqWzBdLnNjcm9sbFRvcCA9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbiA9PT0gJ25leHQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3Quc3RlcCA9PT0gdGhpcy5wYWdlTGlzdC5QQUdFX0NSRUFURSB8fCAodGhpcy5vYmplY3Quc3RlcCA9PT0gdGhpcy5wYWdlTGlzdC5QQUdFX0JBQ0tTVE9SWSAmJiBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkpIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0VG9DcmVhdGUoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSB0aGlzLmdldFBhZ2VOdW1iZXIoMSlcbiAgICAgICAgaWYgKHR5cGVvZiBwYWdlTnVtYmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnN0ZXAgPSBwYWdlTnVtYmVyXG4gICAgICAgICAgLy8gV2hlbiBtb3Zpbmcgc3RlcCByZXNldCBzY3JvbGwgaGVpZ2h0XG4gICAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5lbGVtZW50LmZpbmQoJy5zY3JvbGxzZWN0aW9uJylcbiAgICAgICAgICBpZiAob2JqLmxlbmd0aCAmJiBvYmpbMF0uc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICBvYmpbMF0uc2Nyb2xsVG9wID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgYXR0ZW1wdFRvQ3JlYXRlICgpIHtcbiAgICBjb25zdCBhY3RvckRhdGEgPSBhd2FpdCB0aGlzLm5vcm1hbGl6ZUNoYXJhY3RlckRhdGEodGhpcy5vYmplY3QpXG4gICAgaWYgKGdhbWUudXNlci5pc0dNIHx8IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGF3YWl0IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQuY3JlYXRlQ2hhcmFjdGVyKGFjdG9yRGF0YSlcbiAgICAgIGFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGtlZXBlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+IHUuYWN0aXZlICYmIHUuaXNHTSlcbiAgICAgIGlmIChrZWVwZXJzLmxlbmd0aCkge1xuICAgICAgICBhY3RvckRhdGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3Rlci13aXphcmQnLFxuICAgICAgICAgIGxpc3RlbmVyOiBrZWVwZXJzWzBdLmlkLFxuICAgICAgICAgIHBheWxvYWQ6IGFjdG9yRGF0YVxuICAgICAgICB9XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuQ3JlYXRpbmdJbnZlc3RpZ2F0b3InKVxuICAgICAgICApXG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nS2VlcGVyVXNlcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBub3JtYWxpemVDaGFyYWN0ZXJEYXRhIChkYXRhKSB7XG4gICAgY29uc3Qgd2VhcG9uU2tpbGxzID0ge1xuICAgICAgbWVsZWU6IHt9LFxuICAgICAgcm5nZDoge31cbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2tpbGxJdGVtcykge1xuICAgICAgY29uc3Qgc2tpbGwgPSBkYXRhLnNraWxsSXRlbXNba2V5XVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IHNraWxsLnJvd3MubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHNraWxsLnJvd3NbaW5kZXhdXG4gICAgICAgIGlmICghc2tpbGwuZmxhZ3MuaXNNdWx0aXBsZSB8fCByb3cuc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbC5pdGVtKVxuICAgICAgICAgIGlmIChyb3cuc2VsZWN0ZWQgIT09IGZhbHNlICYmIHR5cGVvZiByb3cuc2VsZWN0ZWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvdy5vY2N1cGF0aW9uVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93LmFyY2hldHlwZVRvZ2dsZSkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZmxhZ3MuYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKCdAJyArIGtleSwgJ2knKVxuICAgICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKHJlZ0V4LCBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBBdmVyYWdlUm9sbCgnKCcgKyBiYXNlICsgJyknKVsoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTInKSA/ICdldmFsdWF0ZScgOiAnZXZhbHVhdGVTeW5jJykvKiAvLyBGb3VuZHJ5VlRUIHYxMSAqL10oeyBtaW5pbWl6ZTogdHJ1ZSwgbWF4aW1pemU6IHRydWUgfSkudG90YWwpXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW0uc3lzdGVtLmJhc2UgPSBiYXNlXG4gICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cyA/PyB7fVxuICAgICAgICAgIGlmIChOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLnBlcnNvbmFsID0gcGFyc2VJbnQocm93LnBlcnNvbmFsUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uID0gcGFyc2VJbnQocm93Lm9jY3VwYXRpb25Qb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuYXJjaGV0eXBlID0gcGFyc2VJbnQocm93LmFyY2hldHlwZVBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93LmV4cGVyaWVuY2VQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHBhcnNlSW50KHJvdy5leHBlcmllbmNlUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPSBkYXRhLmxhbmd1YWdlXG4gICAgICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByb3cuc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPSByb3cuc2VsZWN0ZWRcbiAgICAgICAgICAgIGl0ZW0uX2lkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgpXG4gICAgICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzSWQoaXRlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5uYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJhbmdlZCkge1xuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLnJuZ2RbaXRlbS5uYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbE5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc291cmNlSXRlbSBvZiBkYXRhLmludmVzdGlnYXRvckl0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc291cmNlSXRlbSlcbiAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWVdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQgPSB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWVdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICB9XG4gICAgbGV0IG1vbmV0YXJ5ID0ge31cbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIG1vbmV0YXJ5ID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2V0dXAuc3lzdGVtLm1vbmV0YXJ5KVxuICAgIH1cbiAgICBjb25zdCBkZXZlbG9wbWVudCA9IHtcbiAgICAgIHBlcnNvbmFsOiAyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgIG9jY3VwYXRpb246IDAsXG4gICAgICBhcmNoZXR5cGU6IDBcbiAgICB9XG4gICAgaWYgKGRhdGEuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChkYXRhLmFyY2hldHlwZSlcbiAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goYXJjaGV0eXBlWzBdLnRvT2JqZWN0KCkpXG4gICAgICAgIGRldmVsb3BtZW50LmFyY2hldHlwZSA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEub2NjdXBhdGlvbilcbiAgICAgIGlmIChvY2N1cGF0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpdGVtcy5wdXNoKG9jY3VwYXRpb25bMF0udG9PYmplY3QoKSlcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25bMF0uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50Lm9jY3VwYXRpb24gKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJpb2dyYXBoeSA9IFtdXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGRhdGEuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICBiaW9ncmFwaHkucHVzaCh7XG4gICAgICAgIHRpdGxlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICB2YWx1ZTogZGF0YS5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgaW1nOiBkYXRhLmF2YXRhcixcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnN0ciwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5zdHIsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5jb24sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuY29uLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc2l6LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnNpeiwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmRleCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5kZXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXBwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5hcHAsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuYXBwLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGludDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5lZHUsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuZWR1LCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBNYXRoLm1heChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmx1Y2ssIDEwKSwgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5sdWNrLCAxMCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBhZ2U6IGRhdGEuYWdlLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGF0YS5yZXNpZGVuY2UsXG4gICAgICAgICAgYmlydGhwbGFjZTogZGF0YS5iaXJ0aHBsYWNlXG4gICAgICAgIH0sXG4gICAgICAgIGRldmVsb3BtZW50LFxuICAgICAgICBiaW9ncmFwaHksXG4gICAgICAgIG1vbmV0YXJ5XG4gICAgICB9LFxuICAgICAgcHJvdG90eXBlVG9rZW46IHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICBzcmM6IGRhdGEudG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgZGlzcG9zaXRpb246IENPTlNULlRPS0VOX0RJU1BPU0lUSU9OUy5GUklFTkRMWSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpdGVtcyxcbiAgICAgIG93bmVyc2hpcDoge1xuICAgICAgICBkZWZhdWx0OiBwYXJzZUludChkYXRhLmRlZmF1bHRPd25lcnNoaXAsIDEwKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3JEYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgIGNvbnN0IGZ1bmN0aW9uSWQgPSBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAgIGlmIChhcHAub2JqZWN0LmlkID09PSBhY3Rvci5pZCkge1xuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICB0eXBlOiAnb3Blbi1jaGFyYWN0ZXInLFxuICAgICAgICAgIGxpc3RlbmVyOiBPYmplY3Qua2V5cyhhY3RvckRhdGEub3duZXJzaGlwKS5maW5kKGsgPT4gayAhPT0gJ2RlZmF1bHQnKSxcbiAgICAgICAgICBwYXlsb2FkOiBhY3Rvci5pZFxuICAgICAgICB9KVxuICAgICAgICBIb29rcy5vZmYoJ3JlbmRlckFjdG9yU2hlZXQnLCBmdW5jdGlvbklkKVxuICAgICAgfVxuICAgIH0pXG4gICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyIChhY3RvckRhdGEpIHtcbiAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgYWN0b3IudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLnJhd0hwTWF4LFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogYWN0b3IucmF3TXBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLm1heCc6IGFjdG9yLnJhd01wTWF4XG4gICAgfSlcbiAgICBhd2FpdCBhY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgICByZXR1cm4gYWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3YXkgdG8gY3JlYXRlIHRoZSBDb0M3Q2hhcmFjdGVyV2l6YXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICAvLyBUcnkgYW5kIHByZXJlcXVzdCBhcyBtYW55IENvQ0lEcyBkdWUgdG8gdGhlIHdheSB0aGV5IGhhdmUgdG8gYmUgbG9hZGVkXG4gICAgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoe1xuICAgICAgc3RlcDogMCxcbiAgICAgIGRlZmF1bHRTZXR1cDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnKSxcbiAgICAgIGRlZmF1bHRRdWFudGl0eTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknKSxcbiAgICAgIGRlZmF1bHRPd25lcnNoaXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcpLFxuICAgICAgZGVmYXVsdEVyYTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKSxcbiAgICAgIHJlcm9sbHNFbmFibGVkOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJyksXG4gICAgICBlbmZvcmNlUG9pbnRCdXk6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5JyksXG4gICAgICBxdWlja0ZpcmVWYWx1ZXM6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScpLFxuICAgICAgY2hvb3NlUm9sbGVkVmFsdWVzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRDaG9vc2VWYWx1ZXMnKSxcbiAgICAgIHBsYWNlYWJsZTogZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJykpLFxuICAgICAgY2FjaGVDb0NJRDogQ29DN0ludmVzdGlnYXRvcldpemFyZC5sb2FkQ2FjaGVJdGVtQnlDb0NJRCgpLFxuICAgICAgY2FjaGVCYWNrc3RvcmllczogZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXnJ0XFwuXFwuYmFja3N0b3J5LS8sIHR5cGU6ICdydCcgfSksXG4gICAgICBjYWNoZUl0ZW1zOiB7fSxcbiAgICAgIHNldHVwOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRTZXR1cCcpLFxuICAgICAgc2tpbGxJdGVtczoge30sXG4gICAgICBvY2N1cGF0aW9uR3JvdXBzOiB7fSxcbiAgICAgIGludmVzdGlnYXRvckl0ZW1zOiBbXSxcbiAgICAgIHNldHVwUG9pbnRzOiB7XG4gICAgICAgIHN0cjogJycsXG4gICAgICAgIGNvbjogJycsXG4gICAgICAgIHNpejogJycsXG4gICAgICAgIGRleDogJycsXG4gICAgICAgIGFwcDogJycsXG4gICAgICAgIGludDogJycsXG4gICAgICAgIHBvdzogJycsXG4gICAgICAgIGVkdTogJycsXG4gICAgICAgIGx1Y2s6ICcnXG4gICAgICB9LFxuICAgICAgc2V0dXBNb2RpZmllcnM6IHtcbiAgICAgICAgc3RyOiAwLFxuICAgICAgICBjb246IDAsXG4gICAgICAgIHNpejogMCxcbiAgICAgICAgZGV4OiAwLFxuICAgICAgICBhcHA6IDAsXG4gICAgICAgIGludDogMCxcbiAgICAgICAgcG93OiAwLFxuICAgICAgICBlZHU6IDAsXG4gICAgICAgIGx1Y2s6IDBcbiAgICAgIH0sXG4gICAgICByb2xsZWRWYWx1ZXM6IFtdLFxuICAgICAgYXJjaGV0eXBlOiAnJyxcbiAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpYzogJycsXG4gICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgIGJpb1NlY3Rpb25zOiBbXSxcbiAgICAgIHBlcnNvbmFsOiAwLFxuICAgICAgcGVyc29uYWxUZXh0OiAnJyxcbiAgICAgIGNyZWRpdFJhdGluZzoge1xuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMFxuICAgICAgfSxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgYWdlOiAnJyxcbiAgICAgIHJlcXVpcmVzQWdlQWRqdXN0bWVudHM6IGZhbHNlLFxuICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgbGFuZ3VhZ2U6ICcnLFxuICAgICAgYXZhdGFyOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycsXG4gICAgICB0b2tlbjogJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnXG4gICAgfSwgb3B0aW9ucylcbiAgICBuZXcgQ29DN0ludmVzdGlnYXRvcldpemFyZChvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBBY3RvclNoZWV0LCBjYW52YXMsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvQ0lEQWN0b3JVcGRhdGVJdGVtcyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2NvYy1pZC1hY3Rvci11cGRhdGUtaXRlbXMnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdpbnZlc3RpZ2F0b3Itd2l6YXJkJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9yQ29DSURJdGVtc0Jlc3QnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NvYy1pZC1hY3Rvci11cGRhdGUtaXRlbXMuaGJzJyxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQxMCxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmxhbmcgPSBDT05GSUcuc3VwcG9ydGVkTGFuZ3VhZ2VzW2dhbWUuaTE4bi5sYW5nXSA/PyAnPydcbiAgICBjb25zdCBkZWZhdWx0RXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgIHNoZWV0RGF0YS5pc0VuID0gZ2FtZS5pMThuLmxhbmcgPT09ICdlbidcbiAgICBzaGVldERhdGEuZXJhID0gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbZGVmYXVsdEVyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IGRlZmF1bHRFcmEgfSlcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGdldFVwZGF0ZURhdGEgKGl0ZW0pIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgY29jaWRGbGFnOiBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICBzeXN0ZW06IHt9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnY2hhdCcsICdrZWVwZXInLCAnbm90ZXMnLCAnb3Bwb3NpbmdEaWZmaWN1bHR5JywgJ3B1c2hlZEZhaWxsdXJlQ29uc2VxdWVuY2VzJywgJ3NwZWNpYWwnLCAndmFsdWUnXSkge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbj8uW2tleV0gPT09ICdzdHJpbmcnICYmIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uW2tleV0ubGVuZ3RoKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG91dHB1dC5zeXN0ZW0sICdkZXNjcmlwdGlvbicpKSB7XG4gICAgICAgICAgb3V0cHV0LnN5c3RlbS5kZXNjcmlwdGlvbiA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0LnN5c3RlbS5kZXNjcmlwdGlvbltrZXldID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25ba2V5XVxuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgICAgY2FzZSAnYXJjaGV0eXBlJzpcbiAgICAgICAgb3V0cHV0LnN5c3RlbS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IGl0ZW0uc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zXG4gICAgICAgIG91dHB1dC5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzID0gaXRlbS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdib29rJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ29jY3VwYXRpb24nOlxuICAgICAgICBvdXRwdXQuc3lzdGVtLnN1Z2dlc3RlZENvbnRhY3RzID0gaXRlbS5zeXN0ZW0uc3VnZ2VzdGVkQ29udGFjdHNcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgb3V0cHV0LnN5c3RlbS5za2lsbE5hbWUgPSBpdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgb3V0cHV0LnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzdGF0dXMnOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQWN0b3JzIChhY3Rvckxpc3QsIHBhcmVudCkge1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIGNvbnN0IHVubGlua2VkQWN0b3JzID0gYXdhaXQgYWN0b3JMaXN0LmZpbHRlcihhID0+IGEudG9rZW4/LmFjdG9yTGluayA9PT0gZmFsc2UpLm1hcChhID0+IGEuaWQpLmZpbHRlcigoYSwgbywgdikgPT4gdi5pbmRleE9mKGEpID09PSBvKS5yZWR1Y2UoYXN5bmMgKGMsIGkpID0+IHtcbiAgICAgICAgYy5wdXNoKGF3YWl0IGZyb21VdWlkKCdBY3Rvci4nICsgaSkpXG4gICAgICAgIHJldHVybiBjXG4gICAgICB9LCBbXSlcbiAgICAgIGFjdG9yTGlzdCA9IHVubGlua2VkQWN0b3JzLmNvbmNhdChhY3Rvckxpc3QpXG4gICAgfVxuICAgIGNvbnN0IGlkcyA9IHt9XG4gICAgY29uc3QgYW55cyA9IHt9XG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3Rvckxpc3QpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcy5jb250ZW50cykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQubWF0Y2goLy1hbnkkLykpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFueXMsIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQpKSB7XG4gICAgICAgICAgICAgIGFueXNbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gPSBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW55c1tpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXS5wdXNoKGFjdG9yLm5hbWUpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkc1tpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZvdW5kID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBnYW1lLnN5c3RlbS5hcGkuY29jaWQubWFrZUdyb3VwUmVnRXgoT2JqZWN0LmtleXMoaWRzKSksIHR5cGU6ICdpJywgc2hvd0xvYWRpbmc6IHRydWUgfSlcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZm91bmQpIHtcbiAgICAgIGlkc1tpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IHRoaXMuZ2V0VXBkYXRlRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhbnlzKS5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIGFueSBrZXlzIG9uIEFjdG9ycycsIGFueXMpXG4gICAgfVxuICAgIGNvbnN0IGFsbFVwZGF0ZXMgPSBbXVxuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JMaXN0KSB7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW11cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcy5jb250ZW50cykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlkcywgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCkpIHtcbiAgICAgICAgICB1cGRhdGVzLnB1c2goZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICAgICAgICBfaWQ6IGl0ZW0uaWRcbiAgICAgICAgICB9LCBpZHNbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0pKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgYWxsVXBkYXRlcy5wdXNoKHtcbiAgICAgICAgICBfaWQ6IGFjdG9yLmlkLFxuICAgICAgICAgIGl0ZW1zOiB1cGRhdGVzXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhbGxVcGRhdGVzLmxlbmd0aCkge1xuICAgICAgQWN0b3IudXBkYXRlRG9jdW1lbnRzKGFsbFVwZGF0ZXMpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICd1cGRhdGUnKSB7XG4gICAgICBpZiAoZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZS5pbmRleE9mKCdjdXJyZW50bHktc3VibWl0dGluZycpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lID0gZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZSArICcgY3VycmVudGx5LXN1Ym1pdHRpbmcnXG4gICAgICBjb25zdCBwYXJlbnQgPSB0eXBlb2YgZm9ybURhdGFbJ2NvYy1pZC1hY3Rvci11cGRhdGUtaXRlbXMtcGFyZW50J10gPT09ICdzdHJpbmcnXG4gICAgICBjb25zdCB3aGljaCA9IChmb3JtRGF0YVsnY29jLWlkLWFjdG9yLXVwZGF0ZS1pdGVtcy13aGljaCddID8/ICcnKS50b1N0cmluZygpXG4gICAgICBzd2l0Y2ggKHdoaWNoKSB7XG4gICAgICAgIGNhc2UgJzEnOlxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWN0b3JzKGNhbnZhcy5zY2VuZS50b2tlbnMuY29udGVudHMubWFwKGQgPT4gZC5vYmplY3QuYWN0b3IpLCBwYXJlbnQpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnMic6XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVBY3RvcnMoT2JqZWN0LnZhbHVlcyh1aS53aW5kb3dzKS5maWx0ZXIocyA9PiBzIGluc3RhbmNlb2YgQWN0b3JTaGVldCkubWFwKHMgPT4gcy5vYmplY3QpLCBwYXJlbnQpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnMyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVBY3RvcnMoZ2FtZS5hY3RvcnMuY29udGVudHMsIGZhbHNlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgbmV3IENvQ0lEQWN0b3JVcGRhdGVJdGVtcyhvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZm91bmRyeSwgZ2FtZSwgUGxhY2VhYmxlc0xheWVyICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5pbXBvcnQgQ29DSURBY3RvclVwZGF0ZUl0ZW1zIGZyb20gJy4vYXBwcy9jb2MtaWQtYWN0b3ItdXBkYXRlLWl0ZW1zLmpzJ1xuXG5jbGFzcyBDb0M3TWVudUxheWVyIGV4dGVuZHMgUGxhY2VhYmxlc0xheWVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLm9iamVjdHMgPSB7fVxuICB9XG5cbiAgc3RhdGljIGdldCBsYXllck9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmxheWVyT3B0aW9ucywge1xuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcbiAgICAgIHpJbmRleDogNjBcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldCBkb2N1bWVudE5hbWUgKCkge1xuICAgIHJldHVybiAnVG9rZW4nXG4gIH1cblxuICBnZXQgcGxhY2VhYmxlcyAoKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdNZW51IHtcbiAgc3RhdGljIGdldEJ1dHRvbnMgKGNvbnRyb2xzKSB7XG4gICAgY2FudmFzLmNvYzdnbXRvb2xzID0gbmV3IENvQzdNZW51TGF5ZXIoKVxuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBzaG93SGlkZGVuRGV2TWVudSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcbiAgICAgIHRpdGxlOiAnQ29DNy5HbVRvb2xzJyxcbiAgICAgIGxheWVyOiAnY29jN2dtdG9vbHMnLFxuICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJyxcbiAgICAgIHZpc2libGU6IGlzS2VlcGVyLFxuICAgICAgdG9vbHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXG4gICAgICAgICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5EZXZQaGFzZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlRGV2UGhhc2UodG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1lZGl0JyxcbiAgICAgICAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkNoYXJDcmVhdGlvbk1vZGUnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PlxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24odG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtZmluZ2VycHJpbnQnLFxuICAgICAgICAgIG5hbWU6ICdhY3Rvci1jb2MtaWQtYmVzdCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkFjdG9yQ29DSURJdGVtc0Jlc3QnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQ0lEQWN0b3JVcGRhdGVJdGVtcy5jcmVhdGUoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1wbHVzJyxcbiAgICAgICAgICBuYW1lOiAnYWN0b3ItaW1wb3J0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQWN0b3JJbXBvcnRlcicsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItY2hlY2snLFxuICAgICAgICAgIG5hbWU6ICdpbnZlc3RpZ2F0b3Itd2l6YXJkJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1jZXJ0aWZpY2F0ZScsXG4gICAgICAgICAgY2xhc3M6ICd4cF90b2dnbGUnLFxuICAgICAgICAgIG5hbWU6ICd4cHRvZ2dsZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcudG9nZ2xlWFAnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZVhQR2Fpbih0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tY2FyZC1qb2tlcicsXG4gICAgICAgICAgbmFtZTogJ2Zha2Vyb2xsJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRmFrZVJvbGwnLFxuICAgICAgICAgIG9uQ2xpY2s6IENvQzdDaGF0LmZha2VSb2xsTWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtbW9vbicsXG4gICAgICAgICAgbmFtZTogJ3N0YXJ0cmVzdCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnN0YXJ0UmVzdCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXRUYXJnZXQoKVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgICBpZiAoc2hvd0hpZGRlbkRldk1lbnUpIHtcbiAgICAgIGNhbnZhcy5jb2M3RGV2VG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgICBjb250cm9scy5wdXNoKHtcbiAgICAgICAgbmFtZTogJ2NvYzdEZXZNZW51JyxcbiAgICAgICAgdGl0bGU6XG4gICAgICAgICAgXCJEZXYgdG9vbHMuIElmIHlvdSBkb24ndCBrbm93IHdoYXQgaXQgaXMsIHlvdSBkb24ndCBuZWVkIGl0IGFuZCB5b3Ugc2hvdWxkbid0IHVzZSBpdCAhIVwiLFxuICAgICAgICBsYXllcjogJ2NvYzdEZXZUb29scycsXG4gICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLXBvbGljZS1iYWRnZScsXG4gICAgICAgIHZpc2libGU6IGlzS2VlcGVyLFxuICAgICAgICB0b29sczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWRpY2UtZmlyZScsXG4gICAgICAgICAgICBuYW1lOiAnYWx3YXlzQ3JpdCcsXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0LFxuICAgICAgICAgICAgdGl0bGU6ICdBbGwgcm9sbHMgd2lsbCBjcml0JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgPSBmYWxzZVxuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCA9IHRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZmlyZS1leHRpbmd1aXNoZXInLFxuICAgICAgICAgICAgbmFtZTogJ2Fsd2F5c0Z1bWJsZScsXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUsXG4gICAgICAgICAgICB0aXRsZTogJ0FsbCByb2xscyB3aWxsIGZ1bWJsZScsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlID0gdG9nZ2xlXG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlbmRlckNvbnRyb2xzIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3Qga2VlcGVyTWVudSA9IGh0bWwuZmluZCgnLmdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnKS5wYXJlbnQoKVxuICAgIGtlZXBlck1lbnUuYWRkQ2xhc3MoJ2NvYzctbWVudScpXG4gICAgaWYgKGlzS2VlcGVyKSB7XG4gICAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1jcmVhdGUtbGlua1wiIHRpdGxlPVwiJyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZUxpbmsnKSArXG4gICAgICAgICAgJ1wiPjxpIGNsYXNzPVwiZmFzIGZhLWxpbmtcIj48L2k+PC9saT4nXG4gICAgICApXG4gICAgfVxuICAgIGtlZXBlck1lbnUuYWZ0ZXIoXG4gICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1kaWNlLXJvbGxcIiB0aXRsZT1cIicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSArXG4gICAgICAgICdcIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPjwvbGk+J1xuICAgIClcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNvYzctbWVudS5jb2M3LWRpY2Utcm9sbCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN1V0aWxpdGllcy5yb2xsRGljZShldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1jcmVhdGUtbGluaycpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShldmVudCkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9jb2M3LWxpbmsuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2FudmFzIHtcbiAgc3RhdGljIGdldCBDT0M3X1RZUEVTX1NVUFBPUlRFRCAoKSB7XG4gICAgcmV0dXJuIFsnQ29DN0xpbmsnLCAnbG9jYXRvcicsICdnZXRUb2tlbiddXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25Ecm9wU29tZXRoaW5nIChjYW52YXMsIGRhdGEpIHtcbiAgICBpZiAoXG4gICAgICBkYXRhLnR5cGUgJiZcbiAgICAgIENvQzdDYW52YXMuQ09DN19UWVBFU19TVVBQT1JURUQuaW5jbHVkZXMoZGF0YS50eXBlKVxuICAgICkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSBjYW52YXMuc2NlbmUuZ3JpZC5zaXplXG4gICAgICBjb25zdCB4ID0gZGF0YS54IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCB5ID0gZGF0YS55IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCBoZWlnaHQgPSBncmlkU2l6ZVxuICAgICAgY29uc3Qgd2lkdGggPSBncmlkU2l6ZVxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBvYmouY2VudGVyXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy55LCB5LCB5ICsgaGVpZ2h0KVxuICAgICAgICApXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxuICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCAvLyBJZiBubyB0YXJnZXQgd2hpc3BlciB0byBzZWxlY3RlZCB0b2tlblxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnQ29DN0xpbmsnOlxuICAgICAgICAgIGlmIChkYXRhLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICAgICAgaWYgKGRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgZHJvcFRhcmdldFRva2Vucykge1xuICAgICAgICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBkYXRhKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBBcHBseSB0byBldmVyeW9uZSA/IG9yIG9ubHkgcGxheWVycyA/IG9yIG5vYm9keVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UoZGF0YSwgZHJvcFRhcmdldFRva2Vucy5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKGRhdGEsIGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIodSA9PiAhIXUuY2hhcmFjdGVyKS5tYXAodSA9PiB1LmNoYXJhY3RlcikpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2dldFRva2VuJzpcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGEuYXBwSWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmNhbGxCYWNrID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdWkud2luZG93c1tkYXRhLmFwcElkXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHVpLndpbmRvd3NbZGF0YS5hcHBJZF1bZGF0YS5jYWxsQmFja10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVpLndpbmRvd3NbZGF0YS5hcHBJZF1bZGF0YS5jYWxsQmFja10oZHJvcFRhcmdldFRva2VucylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICAvLyBIYW5kbGVzIGdlbmVyaWMgY2FudmEgZHJvcC5cbiAgICAgICAgLy8gZGF0YVRyYW5zZmVyIG11c3QgaW5jbHVkZSA6XG4gICAgICAgIC8vIC0gZG9jVXVpZCA6IHRoZSBVdWlkIG9mIHRoZSBkb2N1bWVudCB0byBjYWxsXG4gICAgICAgIC8vIC0gY2FsbEJhY2sgOiB0aGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbCBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICAgIC8vIFVzZWQgdG8gc2VsZWN0IGxvY2F0aW9uIGZvciBjaGFzZVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChkYXRhLmRvY1V1aWQgJiYgZGF0YS5jYWxsQmFjaykge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoZGF0YS5kb2NVdWlkKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBkb2NbZGF0YS5jYWxsQmFja10gJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGRvY1tkYXRhLmNhbGxCYWNrXSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zY2VuZSA9IGNhbnZhcy5zY2VuZS51dWlkXG4gICAgICAgICAgICAgICAgZG9jW2RhdGEuY2FsbEJhY2tdKGRhdGEpXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIERpYWxvZywgZ2FtZSwgU2V0dGluZ3MgKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dGluZ3NEaXJlY3RvcnkgZXh0ZW5kcyBTZXR0aW5ncyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJyNzZXR0aW5ncy1nYW1lJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cInRyaWdnZXItZGF0YS1taWdyYXRpb25cIj48aSBjbGFzcz1cImZhcyBmYS13cmVuY2hcIj48L2k+ICcgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlckJ1dHRvbicpICtcbiAgICAgICAgICAgICc8L2J1dHRvbj4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnI3NldHRpbmdzLWRvY3VtZW50YXRpb24nKVxuICAgICAgICAuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1zeXN0ZW0tbWFudWFsXCI+PGkgY2xhc3M9XCJmYXMgZmEtYm9va3NcIj48L2k+ICcgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3lzdGVtLkRvY3VtZW50YXRpb24nKSArXG4gICAgICAgICc8L2J1dHRvbj4nKVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1kYXRhLW1pZ3JhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQ29udGVudHMnKSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgbWlncmF0ZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyUmVzdGFydCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgMClcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xvc2U6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtYmFuXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRyaWdnZXItc3lzdGVtLW1hbnVhbCcpLmNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgKGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnN5c3RlbS1kb2MnKS5nZXREb2N1bWVudChDT05GSUcuQ29DNy5NYW51YWwpKT8uc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENvbXBlbmRpdW1EaXJlY3RvcnksIERpYWxvZywgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb21wZW5kaXVtRGlyZWN0b3J5IGV4dGVuZHMgQ29tcGVuZGl1bURpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBsZXQgdHJhbnNsYXRlZCA9IGZhbHNlXG4gICAgaWYgKGdhbWUuaTE4bi5sYW5nID09PSAnZW4nKSB7XG4gICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdhbWUuYmFiZWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCB2IG9mIE9iamVjdC52YWx1ZXMoZ2FtZS5iYWJlbGUubW9kdWxlcykpIHtcbiAgICAgICAgaWYgKHYubGFuZyA9PT0gZ2FtZS5pMThuLmxhbmcpIHtcbiAgICAgICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdHJhbnNsYXRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImNvbXBlbmRpdW0tdHJhbnNsYXRpb25cIiB0aXRsZT1cIicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICc8L2E+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy5jb21wZW5kaXVtLXRyYW5zbGF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlV2FybmluZycpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsQmFiZWxlJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVFbmFibGVUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVOb1RyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+J1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpLFxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2Nsb3NlJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge31cbiAgICAgICAgKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3JEaXJlY3RvcnksIENPTlNULCBnYW1lICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyB9IGZyb20gJy4vYXBwcy9hY3Rvci1pbXBvcnRlci1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JEaXJlY3RvcnkgZXh0ZW5kcyBBY3RvckRpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEFsbG93IEludmVzdGlnYXRvciBXaXphcmRcbiAgICAvLyAgKiBJZiB0aGUgdXNlciByb2xlIGlzIGFsbG93ZWQgdG8gY3JlYXRlIGFjdG9yc1xuICAgIC8vICAqIElmIHRoZSB1c2VyIGhhcyBsZXNzIG93bmVkIGFjdG9ycyB0aGFuIGFsbG93ZWQgaW4gc2V0dGluZ3NcbiAgICBsZXQgYWxsb3dXaXphcmQgPSBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZVxuICAgIGlmICghYWxsb3dXaXphcmQpIHtcbiAgICAgIGNvbnN0IGFsbG93ZWQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScpXG4gICAgICBpZiAoYWxsb3dlZCA+IDApIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiBbYS5vd25lcnNoaXAuZGVmYXVsdCwgKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FKV0uaW5jbHVkZXMoQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikpLmxlbmd0aFxuICAgICAgICBhbGxvd1dpemFyZCA9IGV4aXN0aW5nIDwgYWxsb3dlZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbGxvd1dpemFyZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKCc8YSBjbGFzcz1cImludmVzdGlnYXRvci13aXphcmRcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpICsgJzwvYT4nKVxuICAgICAgaHRtbC5maW5kKCcuaW52ZXN0aWdhdG9yLXdpemFyZCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGEgY2xhc3M9XCJhY3Rvci1pbXBvcnRcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmFjdG9yLWltcG9ydCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIERpYWxvZywgZm91bmRyeSwgZ2FtZSwgUm9sbCwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcGVudGFncmFtLXJvc2Uuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIGFzeW5jIGNhc3QgKHByaXYpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGNvbnN0IGNvc3RzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uY29zdHMpXG4gICAgY29uc3QgbG9zc2VzID0gW11cbiAgICBsZXQgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzXG4gICAgY29zdHMubWFnaWNQb2ludHMgPSBDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShjb3N0cy5tYWdpY1BvaW50cylcbiAgICAgID8gKGF3YWl0IG5ldyBSb2xsKGNvc3RzLm1hZ2ljUG9pbnRzKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICA6IHBhcnNlSW50KGNvc3RzLm1hZ2ljUG9pbnRzKVxuICAgIGlmIChcbiAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzICYmXG4gICAgICBjb3N0cy5tYWdpY1BvaW50cyA+IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICApIHtcbiAgICAgIGNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCBjb252ZXJ0ZWRIaXRQb2ludHMgPVxuICAgICAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzIC0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICAgICBjb25zdCBjb252ZXJ0ZWRNYWdpY1BvaW50cyA9IGNvc3RzLm1hZ2ljUG9pbnRzIC0gY29udmVydGVkSGl0UG9pbnRzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vdEVub3VnaE1hZ2ljUG9pbnRzJywge1xuICAgICAgICAgICAgYWN0b3JNYWdpY1BvaW50czogdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRlZEhpdFBvaW50cyxcbiAgICAgICAgICAgIGNvbnZlcnRlZE1hZ2ljUG9pbnRzLFxuICAgICAgICAgICAgb3JpZ2luYWxNYWdpY1BvaW50czogY29zdHMubWFnaWNQb2ludHMsXG4gICAgICAgICAgICBzcGVsbDogdGhpcy5uYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29zdHMuaGl0UG9pbnRzID0gY29udmVydGVkSGl0UG9pbnRzXG4gICAgICAgICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgPSBjb252ZXJ0ZWRNYWdpY1BvaW50c1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnXVxuICAgICAgICB9XG4gICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgICAgaWYgKCFjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHMpIHJldHVyblxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb3N0cykpIHtcbiAgICAgIGlmICghdmFsdWUgfHwgTnVtYmVyKHZhbHVlKSA9PT0gMCkgY29udGludWVcbiAgICAgIGxvc3Nlcy5wdXNoKGF3YWl0IHRoaXMucmVzb2x2ZUxvc3NlcyhrZXksIHZhbHVlLCBwcml2KSlcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9jaGF0Lmh0bWwnXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXNjcmlwdGlvbiwgbG9zc2VzIH0pXG4gICAgbGV0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiB0aGlzLm5hbWUsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuICAgIGlmIChwcml2KSB7XG4gICAgICBjaGF0RGF0YSA9IENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsICdnbXJvbGwnKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZUxvc3NlcyAoY2hhcmFjdGVyaXN0aWMsIHZhbHVlLCBwcml2KSB7XG4gICAgbGV0IGNoYXJhY3RlcmlzdGljTmFtZVxuICAgIGxldCBsb3NzXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKHZhbHVlKSkge1xuICAgICAgbG9zcyA9IChhd2FpdCBuZXcgUm9sbCh2YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgIH0gZWxzZSB7XG4gICAgICBsb3NzID0gcGFyc2VJbnQodmFsdWUpXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHRoaXMuYWN0b3Iuc3lzdGVtXG4gICAgc3dpdGNoIChjaGFyYWN0ZXJpc3RpYykge1xuICAgICAgY2FzZSAnaGl0UG9pbnRzJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3IuZGVhbERhbWFnZShsb3NzLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzYW5pdHknOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5UG9pbnRzJylcbiAgICAgICAgbG9zcyA9IGF3YWl0IHRoaXMuZ3JhbnRTYW5pdHlMb3NzKGxvc3MsIHByaXYpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtYWdpY1BvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYWdpY1BvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAoYWN0b3JEYXRhLmF0dHJpYnMubXAudmFsdWUgLSBsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG93ZXInOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXG4gICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnOlxuICAgICAgICAgICAgYWN0b3JEYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLSBsb3NzXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiB7IGNoYXJhY3RlcmlzdGljTmFtZSwgbG9zcyB9XG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIGdyYW50U2FuaXR5TG9zcyAodmFsdWUsIHByaXYpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZVxuICAgIGxldCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHt9KVxuICAgIGxldCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cbiAgICBpZiAocHJpdikge1xuICAgICAgY2hhdERhdGEgPSBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCAnZ21yb2xsJylcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgbWVzc2FnZS5nZXRIVE1MKClcbiAgICBpZiAodHlwZW9mIGNhcmQubGVuZ3RoICE9PSAndW5kZWZpbmVkJyAmJiBjYXJkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zcyA9IHZhbHVlXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgcmV0dXJuIHNhbml0eUNoZWNrLnNhbkxvc3NcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICAvLyBsZXQgc3BlbGxEYXRhXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suc3lzdGVtLnNwZWxscy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChib29rLnN5c3RlbS5zcGVsbHNbaV0uX2lkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzW2ldID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChib29rLnN5c3RlbS5zcGVsbHNbaV0sIGRhdGEpXG4gICAgICAgICAgLy8gc3BlbGxEYXRhID0gYm9vay5zeXN0ZW0uc3BlbGxzW2ldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbnRleHQucGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLnNwZWxscyc6IGJvb2suc3lzdGVtLnNwZWxsc1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLnNoZWV0Lm9iamVjdCA9IG5ldyBDb0M3U3BlbGwoXG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcbiAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtib29rXSlcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHNwZWxsLl9pZCA9PT0gdGhpcy5pZCksXG4gICAgICAgICAgdGhpcy5jb250ZXh0XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHN1cGVyLnVwZGF0ZShkYXRhLCBjb250ZXh0KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9zcGVsbC9kYXRhLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgLyoqIENvbnZlcnQgdGhlIGRpZmZpY3VsdHkgb24gdGhlIHNlbGVjdCBlbGVtZW50IHRvIGEgZm9ybWF0IGFjY2VwdGVkICovXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICdjcml0aWNhbCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBjYXNlICd1bnJlYWRhYmxlJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdGhlIGZ1dHVyZTogYWRkIGFkdmFuY2VkIHJ1bGVzIGZvciBsZWFybmluZyBzcGVsbHMsIHBnLiAxNzZcbiAgICogQHBhcmFtIFt7RG9jdW1lbnR9XSBzcGVsbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgYWRkU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnNwZWxscylcbiAgICAgIDogW11cbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgY29sbGVjdGlvbi5wdXNoKHNwZWxsKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIHNwZWxsRGV0YWlsIChpbmRleCkge1xuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBkYXRhID0gdGhpcy5zeXN0ZW0uc3BlbGxzW2luZGV4XVxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuYWN0b3IgPyB0aGlzLmFjdG9yIDogbnVsbFxuICAgIGNvbnN0IHNwZWxsID0gbmV3IENvQzdTcGVsbChkYXRhLCB7IHBhcmVudCwgYm9va0lkOiB0aGlzLmlkIH0pXG4gICAgaWYgKGlzS2VlcGVyIHx8IHNwZWxsLnN5c3RlbS5sZWFybmVkKSB7XG4gICAgICByZXR1cm4gYXdhaXQgc3BlbGwuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWxsIHRoZSBsb2dpYyBpbnZvbHZpbmcgdGhlIGF0dGVtcHQgb2YgaW5pdGlhbCByZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBAc2VlIGxpc3RlbiBAc2VlIGdyYW50SW5pdGlhbFJlYWRpbmdcbiAgICovXG4gIGFzeW5jIGF0dGVtcHRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIENvbnZlcnRzIHRoZSBkaWZmaWN1bHR5IHZhbHVlIHRvIHNvbWV0aGluZyBhY2NlcHRlZCBieSBDb0M3Q2hlY2sgKi9cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0Jvb2suY29udmVydERpZmZpY3VsdHkoXG4gICAgICB0aGlzLnN5c3RlbS5kaWZmaWN1bHR5TGV2ZWxcbiAgICApXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSB0aGlzLnN5c3RlbS5sYW5ndWFnZVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uZ2V0U2tpbGxzQnlOYW1lKGxhbmd1YWdlKVxuICAgIGlmICghc2tpbGwpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH0gZWxzZSBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBY3RvciB3aG8gb3ducyB0aGlzIGRvZXMgbm90IGhhdmUgdGhlIHNraWxsIG9mXG4gICAgICAgKiB0aGUgbGFuZ3VhZ2UgaW4gd2hpY2ggaXQgd2FzIHdyaXR0ZW5cbiAgICAgICAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkxhbmd1YWdlJywgeyBhY3RvcjogdGhpcy5hY3Rvci5uYW1lIH0pXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnSU5JVElBTF9SRUFESU5HJ1xuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5zeXN0ZW0uZGlmZmljdWx0eUxldmVsXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICByZXR1cm4gYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRzIGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGludGVyYWN0cyBpbiBzb21lIHdheSB3aXRoIHByb2dyZXNzIGJhclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAncmVzZXQnIHx8ICdpbmNyZWFzZScgfHwgJ2RlY3JlYXNlJ1xuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUganVzdCBzbyB0aGF0IHByb2dyZXNzIGlzIG5vdCBncmVhdGVyIHRoYW4gbmVjZXNzYXJ5XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGNoYW5nZVByb2dyZXNzIChtb2RlLCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc093bmVkICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYWxSZWFkaW5nTmVlZGVkJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE15dGhvc1RvbWUnKSlcbiAgICB9XG4gICAgY29uc3QgbmVjZXNzYXJ5ID0gdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgbGV0IGZ1bGxTdHVkeSA9IHRoaXMuc3lzdGVtLmZ1bGxTdHVkeVxuICAgIGxldCBwcm9ncmVzcyA9IHRoaXMuc3lzdGVtLnN0dWR5LnByb2dyZXNzXG4gICAgaWYgKGlzTmFOKHByb2dyZXNzKSkge1xuICAgICAgLyoqIEl0IHNlZW1zIGEgbGl0dGxlIGltcG9zc2libGUsIGJ1dCB5b3UgbmV2ZXIga25vdyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IDBcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh2YWx1ZSAmJiBwcm9ncmVzcyA+IHZhbHVlKSB7XG4gICAgICAvKipcbiAgICAgICAqIFByb2dyZXNzIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB2YWx1ZSBlbnRlcmVkIGJ5IHVzZXIgYXMgbmVjZXNzYXJ5LFxuICAgICAgICogcmVzZXQgcHJvZ3Jlc3MgdG8gYmUgZXF1YWwgbmVjZXNzYXJ5IGFuZCBjb21wbGV0ZSBmdWxsIHN0dWR5XG4gICAgICAgKi9cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSxcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHZhbHVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29tcGxldGVGdWxsU3R1ZHkoKVxuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gJ2luY3JlYXNlJyAmJiBwcm9ncmVzcyA8IG5lY2Vzc2FyeSkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gaW5jcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6ICsrcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgICBpZiAocHJvZ3Jlc3MgPT09IG5lY2Vzc2FyeSkge1xuICAgICAgICAvKiogQ29tcGxldGUgZnVsbCBzdHVkeSBpZiBwcm9ncmVzcyBpcyBlcXVhbCBuZWNlc3NhcnkgKi9cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5IH0pXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50RnVsbFN0dWR5KClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdkZWNyZWFzZScgJiYgcHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gZGVjcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAtLXByb2dyZXNzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrRXhoYXVzdGlvbiAoKSB7XG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3I/LmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLnN5c3RlbS5teXRob3NSYXRpbmdcbiAgICBpZiAodGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcpIHtcbiAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlID49IG15dGhvc1JhdGluZykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9va0hhc05vdGhpbmdNb3JlVG9UZWFjaCcsIHtcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ3JhbnRGdWxsU3R1ZHkgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MpIHJldHVyblxuICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvci5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLnN5c3RlbS5teXRob3NSYXRpbmdcbiAgICBsZXQgbXl0aG9zRmluYWwgPSB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmZpbmFsXG4gICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCA+IG15dGhvc1JhdGluZykge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBteXRob3NGaW5hbDsgaW5kZXgrKykge1xuICAgICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsIC0gaW5kZXggPD0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgICAgbXl0aG9zRmluYWwgLT0gaW5kZXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhZGVyIGF1dG9tYXRpY2FsbHkgZ2FpbnMgYSBza2lsbCB0aWNrIGZvciB0aGVcbiAgICAgKiBsYW5ndWFnZSBpbiB3aGljaCB0aGUgYm9vayBpcyB3cml0dGVuXG4gICAgICovXG4gICAgZGV2ZWxvcG1lbnRzLnB1c2goXG4gICAgICB7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvc0ZpbmFsKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0ubGFuZ3VhZ2UsXG4gICAgICAgIGdhaW46ICdkZXZlbG9wbWVudCdcbiAgICAgIH1cbiAgICApXG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmZ1bGxTdHVkaWVzJzogKyt0aGlzLnN5c3RlbS5mdWxsU3R1ZGllc1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgZ3JhbnRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIElmIGluaXRpYWwgcmVhZGluZyBoYXMgYWxyZWFkeSBiZWVuIGRvbmUgdGhlcmUgaXMgbm90aGluZyB0byBkbyBoZXJlICovXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSByZXR1cm5cbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvcyA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm15dGhvc1xuICAgIH1cbiAgICBjb25zdCBvY2N1bHQgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMub2NjdWx0LFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vY2N1bHRcbiAgICB9XG4gICAgY29uc3Qgb3RoZXIgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMub3RoZXJzLFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vdGhlclxuICAgIH1cbiAgICBpZiAobXl0aG9zLnR5cGUgJiYgbXl0aG9zLmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvcy5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvY2N1bHQudHlwZSAmJiBvY2N1bHQuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9jY3VsdCcpLFxuICAgICAgICBnYWluOiBwYXJzZUludChvY2N1bHQuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob3RoZXIudHlwZSkge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBvdGhlci5nYWlucykge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2tpbGwubmFtZS5tYXRjaCgvXiguKykgXFwoKC4rKVxcKSQvKVxuICAgICAgICAvKiogU2FuaXRpemF0aW9uIHRvIGRlYWwgd2l0aCBzcGVjaWFsaXphdGlvbnMgKi9cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBza2lsbC5zcGVjaWFsaXphdGlvbiA9IHBhdHRlcm5bMV1cbiAgICAgICAgICBza2lsbC5uYW1lID0gcGF0dGVyblsyXVxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIHNraWxsLnZhbHVlID0gKFxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoc2tpbGwudmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICkudG90YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUpIHtcbiAgICAgICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgZ2Fpbjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc2tpbGwuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBpZiAoKG15dGhvcy50eXBlIHx8IG9jY3VsdC50eXBlKSAmJiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICB9XG4gICAgLyoqIE1hcmsgaW5pdGlhbCByZWFkaW5nIGFzIGNvbXBsZXRlICovXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5pbml0aWFsUmVhZGluZyc6IHRydWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0l0ZW19IHNwZWxsbGVhcm5lZCBUaGUgc3BlbGwgdGhhdCB3YXMgbGVhcm5lZCBzdWNjZXNzZnVsbHkgZnJvbSBib29rXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBncmFudFNwZWxsTGVhcm5pbmcgKHNwZWxsbGVhcm5lZCkge1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2YgdGhpcy5zeXN0ZW0uc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuX2lkID09PSBzcGVsbGxlYXJuZWQuX2lkKSB7XG4gICAgICAgIHNwZWxsLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICAvLyBEb2VzIHRoZSBhY3RvciBhbHJlYWR5IGhhcyBhIHNwZWxsIG9mIHRoYXQgbmFtZT8gVGhlbiBkbyBub3QgYWRkIHRoZSBzcGVsbFxuICAgICAgICBjb25zdCBleGlzdGluZ1NwZWxsID0gYXdhaXQgdGhpcy5hY3Rvci5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiBpdGVtLm5hbWUgPT09IHNwZWxsbGVhcm5lZC5uYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKCFleGlzdGluZ1NwZWxsKSB7XG4gICAgICAgICAgc3BlbGxsZWFybmVkLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxBbHJlYWR5TGVhcm5lZCcsIHtcbiAgICAgICAgICAgICAgc3BlbGw6IHNwZWxsbGVhcm5lZC5uYW1lLFxuICAgICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNhdmUgc3BlbGwgbGlzdCBvZiBib29rXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IHRoaXMuc3lzdGVtLnNwZWxscyB9KVxuICAgIC8vIEFkZCBsZWFybmVkIHNwZWxsIHRvIGFjdG9yXG4gICAgaWYgKHNwZWxsbGVhcm5lZC5zeXN0ZW0ubGVhcm5lZCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZWxsU3VjY2Vzc2Z1bGx5TGVhcm5lZCcsIHtcbiAgICAgICAgICBzcGVsbDogc3BlbGxsZWFybmVkLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzcGVsbGxlYXJuZWQpXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBBcnJheSBvZiBza2lsbHMgYW5kIGhhbmRsZXMgYWxsIHRoZSBsb2dpYyB0byBkZXZlbG9wIHRoZW1cbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xuICAgIGlmIChkZXZlbG9wbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXG4gICAgICBpZiAoIWRldmVsb3BtZW50LmdhaW4pIGNvbnRpbnVlXG4gICAgICBsZXQgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmdldFNraWxsc0J5TmFtZShkZXZlbG9wbWVudC5uYW1lKVxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICogRmlyc3QsIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBza2lsbCBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAqIEluIHRoZSBsYXN0IGFsdGVybmF0aXZlIGp1c3QgY3JlYXRlIGEgbmV3IGdlbmVyaWMgc2tpbGxcbiAgICAgICAqL1xuICAgICAgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1NraWxsID0gYXdhaXQgZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiBpdGVtLm5hbWUgPT09IGRldmVsb3BtZW50Lm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nU2tpbGwpXG4gICAgICAgICAgXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlU2tpbGwoZGV2ZWxvcG1lbnQubmFtZSwgMClcbiAgICAgICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6IGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2tpbGwgPSBza2lsbFswXVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cbiAgICAgICAgYXdhaXQgc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHJlY2VpdmVkIHZhbHVlIGdhaW5lZCBpcyBudW1lcmljLCBlbnN1cmUgdGhhdCB0aGUgYW1vdW50XG4gICAgICAgICAqIHdpbGwgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSB2YWx1ZSBvZiA5OVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiA+IDk5KSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBkZXZlbG9wbWVudC5nYWluOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiAtPSBpbmRleFxuICAgICAgICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNob3dEZXZlbG9wbWVudHNUYWJsZShkZXZlbG9wbWVudHMpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2VxdWVudCBwZXJpb2RzIG9mIGZ1bGwgc3R1ZHkgbWF5IGJlIHVuZGVydGFrZW4sIHRoZSBkaWZmZXJlbmNlIGJlaW5nXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwIH0pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3lzdGVtLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGV2ZWxvcG1lbnRzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRTcGVsbExlYXJuaW5nIChpZCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgc3BlbGwgPSB0aGlzLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiB7XG4gICAgICByZXR1cm4gc3BlbGwuX2lkID09PSBpZFxuICAgIH0pXG4gICAgaWYgKHNwZWxsKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgc3BlbGw6IHNwZWxsLm5hbWVcbiAgICAgIH0pXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ1NQRUxMX0xFQVJOSU5HJ1xuICAgICAgY2hlY2suc3BlbGwgPSBzcGVsbFxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKiogTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGNoZWNrIGNhcmQgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGwpXG5cbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZyhjaGVjay5zcGVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIEhvb2tzLCByZW5kZXJUZW1wbGF0ZSwgc29ja2V0bGliLCB1aSAqL1xuXG5jb25zdCBFQ0NfQ0xBU1MgPSAnZW5oYW5jZWQtY2hhdC1jYXJkJ1xuXG5jb25zdCBQRVJNSVNTSU9OX1RZUEUgPSB7XG4gIEdNOiAnZ20nLCAvLyB1c2VyIGlzIEdNXG4gIE5PVF9HTTogJyFnbScsIC8vIHVzZXIgaXMgTk9UIGdtIChoaWRlIHRvIEdNIGluIGNhc2Ugb2YgdmlzaWJpbGl0eSlcbiAgU1BFQUtFUjogJ3NwZWFrZXInLCAvLyB0aGUgc3BlYWtlciBpcyBhbiBhY3RvciBjb250cm9sZWQvb3duZWQgYnkgdGhlIHVzZXJcbiAgVVNFUjogJ3VzZXInLCAvLyB0aGUgdXNlciBpcyB0aGUgbWVzc2FnZSdzIGF1dGhvclxuICBFVkVSWU9ORTogJ2FsbCcsIC8vIGVxdWl2YWxlbnQgdG8gZW1wdHkgc3RyaW5nXG4gIEJMQUNLTElTVDogJ2JsYWNrbGlzdCcgLy8gaW52ZXJ0IHRoZSBsb2dpY1xufVxuXG5jb25zdCBTVEFURSA9IHtcbiAgT046ICdzd2l0Y2hlZC1vbicsXG4gIE9GRjogJ3N3aXRjaGVkLW9mZidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRFQ0MgKC4uLmNhcmRjbGFzcykge1xuICAvLyBIb29rcy5vbmNlKCdpbml0JywgZnVuY3Rpb24gKCkge1xuICAvLyB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLmluamVjdENTUyhhcHAsIGh0bWwsIGRhdGEpXG4gIClcblxuICBIb29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkY2xhc3MpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oZ2FtZS5zeXN0ZW0uaWQpIC8vIFNvY2tldCBpcyBhdHRhY2hlZCB0byBjdXJyZW50IHN5c3RlbVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCd1cGRhdGVNZXNzYWdlJywgdXBkYXRlTWVzc2FnZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignR01VcGRhdGUnLCBHTVVwZGF0ZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignYWR2aXNlJywgYWR2aXNlKVxuICAgIC8vIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbiAgfSlcblxuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuICApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2UgKG1lc3NhZ2VJZCwgbmV3Q29udGVudCkge1xuICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnRcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gR01VcGRhdGUgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tRGF0YShcbiAgICBkYXRhLFxuICAgIG9wdGlvbnMsXG4gICAgY2FyZENsYXNzTmFtZSxcbiAgICBtZXNzYWdlSWRcbiAgKVxuICBhd2FpdCBjYXJkLkdNVXBkYXRlKClcbiAgLy8gY29uc3QgZGlmZiA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCggZGF0YSwgY2FyZC50b09iamVjdCgpKVxuICByZXR1cm4gY2FyZC50b09iamVjdCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkdmlzZSAoKSB7fVxuXG5jbGFzcyBFbmhhbmNlZENoYXRDYXJkTGliIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMudHlwZXMgPSBuZXcgTWFwKClcbiAgICB0aGlzLnNvY2tldCA9IG51bGxcbiAgICAvLyB0aGlzLmVuaGFuY2VkQ2hhdENhcmRDbGFzcyA9IEVuaGFuY2VkQ2hhdENhcmRcbiAgfVxuXG4gIHN0YXRpYyBpbmplY3RDU1MgKCkge1xuICAgIGxldCBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgaWYgKCFzdHlsZT8ubGVuZ3RoKSB7XG4gICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSAgdHlwZT1cInRleHQvY3NzXCI+PC9zdHlsZT4nKSlcbiAgICAgIHN0eWxlID0gJCgnaGVhZCcpLmZpbmQoJ3N0eWxlJylcbiAgICB9XG4gICAgc3R5bGUuYXBwZW5kKFxuICAgICAgYC5lY2MtcmVzdHJpY3RlZCB7Y29sb3I6IHJlZH1cbiAgICAuZWNjLXJlc3RyaWN0ZWQ6aG92ZXIge2N1cnNvcjogbm90LWFsbG93ZWR9YFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBzZXQgc29ja2V0ICh4KSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc29ja2V0ICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0VDQyBub3QgSW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm8gc29ja2V0JylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGVzICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIgPSBuZXcgRW5oYW5jZWRDaGF0Q2FyZExpYigpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3RvcnMpIHtcbiAgICBjYXJkQ29uc3RydWN0b3JzLmZvckVhY2goY2FyZENvbnN0cnVjdG9yID0+IHtcbiAgICAgIGlmICghRW5oYW5jZWRDaGF0Q2FyZExpYi50eXBlcy5nZXQoY2FyZENvbnN0cnVjdG9yLm5hbWUpKSB7XG4gICAgICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuc2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lLCBjYXJkQ29uc3RydWN0b3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHN0YXRpYyBnbV9vblRvZ2dsZSAoZGF0YSl7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZ21fb25Ub2dnbGUnKVxuICAvLyB9XG59XG5cbmZ1bmN0aW9uIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgbyA9IG9ialxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICB9XG4gIH1cblxuICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG59XG5cbmZ1bmN0aW9uIGdldEJ5UGF0aCAob2JqLCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBvID0gb2JqXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxufVxuXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8vIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9yKSB7XG4gIC8vICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkQ29uc3RydWN0b3IpXG4gIC8vIH1cblxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MpIHRoaXMuZGF0YS5mbGFncyA9IHt9XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb25seSBvbmNlIGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2UgdG8gY2hhdC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHt9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdE9wdGlvbnMsIHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICBzZXQgb3B0aW9ucyAoeCkge1xuICAgIHRoaXMuX29wdGlvbnMgPSB4XG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGVtcGxhdGVcbiAgfVxuXG4gIGdldCBjc3NDbGFzc2VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXM/LmpvaW4oJyAnKVxuICB9XG5cbiAgZ2V0IHNwZWFrZXIgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMub29jKSByZXR1cm4gZ2FtZS51c2VyXG4gICAgaWYgKFxuICAgICAgdGhpcy5vcHRpb25zLnNwZWFrZXIgJiZcbiAgICAgIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICApIHtcbiAgICAgIHJldHVybiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3IodGhpcy5vcHRpb25zLnNwZWFrZXIpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLnVzZXJcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhcmQ6IHRoaXMsXG4gICAgICBmbGFnczogdGhpcy5mbGFncyxcbiAgICAgIGRhdGE6IHRoaXMudG9PYmplY3QoKSxcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIGNzczogdGhpcy5jc3NDbGFzc2VzLFxuICAgICAgdXNlcjogZ2FtZS51c2VyLFxuICAgICAgc3BlYWtlcjogdGhpcy5zcGVha2VyXG4gICAgfVxuICB9XG5cbiAgdG9PYmplY3QgKCkge1xuICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm5cbiAgICBjb25zdCBkYXRhID0ge31cbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModGhpcy5kYXRhKSkge1xuICAgICAgY29uc3QgdiA9IHRoaXMuZGF0YVtrXVxuICAgICAgaWYgKHYgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgZGF0YVtrXSA9IHYudG9PYmplY3QgPyB2LnRvT2JqZWN0KCkgOiBmb3VuZHJ5LnV0aWxzLmRlZXBDbG9uZSh2KVxuICAgICAgfSBlbHNlIGRhdGFba10gPSB2XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICAvLyBNYXAgZWNjIGNhcmQgdHlwZSBpZiBub3QgcmVnaXN0ZXJlZCBhbHJlYWR5XG4gICAgLy8gdGhpcy5yZWdpc3RlckVDQ0NsYXNzKClcblxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpXG5cbiAgICAvLyBQdWJsaXNoIGJ5IGN1cnJlbnQgdXNlciBieSBkZWZhdWx0IHVubGVzcyBvcHRpb25zLkdNY2hhdENhcmRcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXREYXRhKClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaWYgKHRoaXMub3B0aW9ucy5hdHRhY2hPYmplY3QpIHtcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgfVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICBjb25zdCBzcGVha2VyID1cbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmICF0aGlzLm9wdGlvbnMub29jXG4gICAgICAgID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICAgICAgOiB7fVxuXG4gICAgLy8gY29uc3QgdXNlcklkID0gdGhpcy5vcHRpb25zLnVzZXJJZCA/IHRoaXMub3B0aW9ucy51c2VySWQgOiBnYW1lLnVzZXIuaWRcblxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgLy8gdXNlcjogdXNlcklkLFxuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXIsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSBjaGF0RGF0YS53aGlzcGVyID0gW2dhbWUudXNlci5pZF1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IGF0dGFjaE9iamVjdCA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gVE9ETyB0aGUgd2hvbGUgZnVuY3Rpb24gaGFzIHRvIGJlIGV4ZWN1dGVkIGJ5IEdNIGlmIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcHV0ZSkgYXdhaXQgdGhpcy5sb2NhbENvbXB1dGUoKVxuICAgIGlmICh0aGlzLm9wdGlvbnMuR01VcGRhdGUpIGF3YWl0IHRoaXMuRXhlY3V0ZUdNVXBkYXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIGRhdGEpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGlmIChhdHRhY2hPYmplY3QgJiYgIXRoaXMuZGF0YS5FRUNfQUNUSU9OPy5kZXRhY2hEYXRhKSB7XG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgICB9XG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKFxuICAgICAgICAndXBkYXRlTWVzc2FnZScsXG4gICAgICAgIHRoaXMubWVzc2FnZUlkLFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICApXG4gICAgICAvLyBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgICAvLyBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIH0pIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyByZXR1cm4gbXNnIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIC8vIGh0bWwub24oXG4gICAgLy8gICAnY2xpY2snLFxuICAgIC8vICAgYC4ke0VDQ19DTEFTU30gLmVjYy1yYWRpby1zd2l0Y2hgLFxuICAgIC8vICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIC8vIClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQsc2VsZWN0LHRleHRhcmVhJywgdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCwgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5zdWJtaXRgLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgYC4ke0VDQ19DTEFTU30gaW5wdXRgLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gYnV0dG9uYCwgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgYC4ke0VDQ19DTEFTU30gZm9ybWAsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG5cbiAgICAvLyBjb25zdCB2aXNpID0gaHRtbC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaS5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgY29uc3QgZWwgPSB2aXNpW2ldO1xuICAgIC8vICAgYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKVxuXG4gICAgLy8gfVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0VmlzaWJpbGl0eShlbCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy1wZXJtaXNzaW9uc10nKVxuICAgICAgLmVhY2goYXN5bmMgKGksIGVsKSA9PiBhd2FpdCB0aGlzLnNldFBlcm1pc3Npb24oZWwpKVxuICAgIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXN3aXRjaGApLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZChgLiR7RUNDX0NMQVNTfSBpbnB1dFt0eXBlPVwicmFkaW9cIl1gKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFJhZGlvU3RhdGUoZWwpKVxuICAgIC8vIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGApLmVhY2goIChpLCBlbCkgPT4gdGhpcy5zZXRTdGF0ZShlbCkpXG4gIH1cblxuICBzZXRTdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5mbGFnKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgIHRoaXMuZmxhZ3NbZWxlbWVudC5kYXRhc2V0LmZsYWddID8gU1RBVEUuT04gOiBTVEFURS5PRkZcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5uYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBlbGVtZW50LmRhdGFzZXQubmFtZSlcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh2YWx1ZSA/IFNUQVRFLk9OIDogU1RBVEUuT0ZGKVxuICAgIH1cbiAgfVxuXG4gIHNldFJhZGlvU3RhdGUgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQubmFtZSkgcmV0dXJuXG4gICAgY29uc3Qgc3BsaXRlZCA9IGVsZW1lbnQubmFtZS5zcGxpdCgnLicpXG4gICAgaWYgKHNwbGl0ZWRbMF0udG9Mb3dlckNhc2UoKSAhPT0gJ2RhdGEnKSByZXR1cm5cbiAgICBpZiAodGhpcy5kYXRhICYmIHR5cGVvZiB0aGlzLmRhdGFbc3BsaXRlZFsxXV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kYXRhW3NwbGl0ZWRbMV1dID09PSBlbGVtZW50LnZhbHVlKSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRWaXNpYmlsaXR5IChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50LmRhdGFzZXQuZWNjVmlzaWJpbGl0eSkgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91U2VlID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5LCB0cnVlKVxuICAgIGlmICghY2FuWW91U2VlKSBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfVxuXG4gIGFzeW5jIHNldFBlcm1pc3Npb24gKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucykgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91TW9kID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucylcbiAgICBpZiAoIWNhbllvdU1vZCkge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlY2MtcmVzdHJpY3RlZCcpXG4gICAgICBpZiAoJChlbGVtZW50KS5pcygnaW5wdXQnKSkge1xuICAgICAgICBpZiAoZWxlbWVudC50eXBlID09PSAncmFuZ2UnKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgZWxzZSAkKGVsZW1lbnQpLmF0dHIoJ3JlYWRvbmx5JywgdHJ1ZSlcbiAgICAgIH1cbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdzZWxlY3QnKSkgJChlbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgYXMgcGVybWlzc2lvbiBhZ2FpbnN0IGEgc3RyaW5nIG9mIGFsbG93ZWQgcGVyc29ucy5cbiAgICogSWYgdGhlIHN0cmluZyBpcyBlbXB0eSBwZXJtaXNzaW9uIGFyZSBhbGwgZ3JhbnRlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdHJpY3RlZFRvICAgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgc2V0IG9mIHBsYXllciBhbGxvd2VkLiBWYWx1ZSBjYW4gYmUgb3duZXIsIGdtLCBwbGF5ZXJzLCB1dWlkIHNlcGFyYXRlZCBieSBzcGFjZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2lvbiAgICAgICAgaWYgdHJ1ZSBnbSB3aWxsIGJlIGNvbnNpZGVyZWQgZm9yIHBlcm1pc3Npb25zLiBmYWxzZSA9IGdtIGhhcyBhbHdheXMgcmlnaHQuIHRydWUgR00gcGVybWlzc2lvbiB3aWxsIGJlIGNoZWNrZWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGhhc1Blcm0gKHJlc3RyaWN0ZWRUbywgdmlzaW9uID0gZmFsc2UpIHtcbiAgICBpZiAoIXJlc3RyaWN0ZWRUby5sZW5ndGgpIHJldHVybiB0cnVlXG4gICAgbGV0IHBlcm1pc3Npb25zQXJyYXkgPSByZXN0cmljdGVkVG8uc3BsaXQoJyAnKVxuICAgIGNvbnN0IHdoaXRlTGlzdCA9ICFwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1QpXG4gICAgaWYgKCF3aGl0ZUxpc3QpIHtcbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuQkxBQ0tMSVNUXG4gICAgICApXG4gICAgfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF2aXNpb24pIHJldHVybiB0cnVlIC8vIEdNIGNhbiBhbHdheXMgbW9kaWZ5IGV2ZXJ5dGhpbmcgISBOYWhcbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5HTSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICB9XG4gICAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuTk9UX0dNKSkge1xuICAgICAgICByZXR1cm4gZmFsc2UgfHwgIXdoaXRlTGlzdFxuICAgICAgfVxuICAgIH1cblxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5OT1RfR01cbiAgICApXG5cbiAgICAvLyAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICAvLyB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuVVNFUikpIHtcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2UuaXNBdXRob3IpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdCAvLyBpc0F1dGhvciB2cyB1c2VyLmlzT3duZXIgP1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5VU0VSXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVIpKSB7XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy5tZXNzYWdlLmRhdGEuc3BlYWtlclxuICAgICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xuICAgICAgICBjb25zdCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKFxuICAgICAgICAgIGBTY2VuZS4ke3NwZWFrZXIuc2NlbmV9LlRva2VuLiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIClcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBlbHNlIGlmIChzcGVha2VyLnVzZXIpIHtcbiAgICAgIC8vICAgaWYgKGdhbWUudXNlci5pZCA9PSBzcGVha2VyLnVzZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgLy8gfVxuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5TUEVBS0VSXG4gICAgICApXG4gICAgfVxuICAgIC8vIEFsbCBmaWx0ZXIgcGFzc2VkLCBhcnJheSBzaG91bGQgY29udGFpbnMgb25seSB1dWlkcyBvciBhY3Rvci90b2tlbiBpZHNcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGVybWlzc2lvbnNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB1dWlkID0gcGVybWlzc2lvbnNBcnJheVtpXVxuICAgICAgICBsZXQgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZCh1dWlkKVxuICAgICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCh1dWlkKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gYWN0b3IuaXNPd25lclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFVuYWJsZSB0byBmaW5kIGFjdG9yICR7dXVpZH1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vIElmIHBhc3MgdGhlIGZpbHRlciByZXR1cm4gZmFsc2UgdW5sZXNzIGl0J3MgYSBibGFja2xpc3RcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG5cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5mbGFnc1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZS5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIGxvY2FsIGNsaWVudFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHVwZGF0ZSBvYmplY3QgYWZ0ZXIgZGF0YSBjaGFuZ2UuXG4gICAqIFRoaXMgaXMgY2FsbGVkIGJ5IG9uZSBvZiB0aGUgR00gY2xpZW50cy5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIEdNVXBkYXRlICgpIHt9XG5cbiAgYXN5bmMgRXhlY3V0ZUdNVXBkYXRlICgpIHtcbiAgICBjb25zdCBuZXdEYXRhID0gYXdhaXQgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAnR01VcGRhdGUnLFxuICAgICAgdGhpcy50b09iamVjdCgpLFxuICAgICAgdGhpcy5fb3B0aW9ucyxcbiAgICAgIHRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuXG4gICAgdGhpcy5kYXRhID0gbmV3RGF0YVxuICAgIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJyAvLyBBdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG5cbiAgICBsZXQgZm9ybVVwZGF0ZVxuICAgIGxldCBhY3Rpb25VcGRhdGUgPSBmYWxzZVxuXG4gICAgLy8gaWYgKCdzdWJtaXQnID09IHRhcmdldC50eXBlKSB7XG4gICAgLy8gICBjb25zb2xlLndhcm4oJ0J1dHRvbiBpcyBhbHNvIGEgc3VibWl0JylcbiAgICAvLyB9XG5cbiAgICAvLyBQZXJmb3JtIGNhcmQgdXBkYXRlIGZpcnN0XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoY2FyZCkgZm9ybVVwZGF0ZSA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBmaW5kIGEgRUVDIGNsYXNzIGZvciB0aGlzIGNhcmQ6ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW5hbERpc3BsYXlTdHlsZSA9IHRhcmdldC5zdHlsZS5kaXNwbGF5XG5cbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgY29uc29sZS53YXJuKCdubyBhY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYnV0dG9uJylcbiAgICAgIGlmICghZm9ybVVwZGF0ZSkgcmV0dXJuIC8vIElmIHRoZSBmb3JtIHdhcyB1cGRhdGVkIHdlIHN0aWxsIHVwZGF0ZSB0aGUgY2FyZFxuICAgIH1cbiAgICBpZiAoIXRoaXNbYWN0aW9uXSkge1xuICAgICAgY29uc29sZS53YXJuKGBubyAke2FjdGlvbn0gYWN0aW9uIGZvdW5kIGZvciB0aGlzIGNhcmRgKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICh0aGlzW2FjdGlvbl0pIHtcbiAgICAgIGFjdGlvblVwZGF0ZSA9IGF3YWl0IHRoaXNbYWN0aW9uXSh7IGV2ZW50LCB1cGRhdGVDYXJkOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmIChmb3JtVXBkYXRlIHx8IGFjdGlvblVwZGF0ZSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheVN0eWxlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25DaGFuZ2UgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFnTmFtZSA9IHRhcmdldC50YWdOYW1lXG4gICAgaWYgKHRhZ05hbWUgPT09ICdCVVRUT04nICYmICdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gLy9cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZm9ybSBmcm9tIHRoZSBjYXJkIGFuZCB1cGRhdGUgdGhlIGRhdGEgc3RydWN0dXJlXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICogQHJldHVybnNcbiAgICovXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgY29uc3QgZGF0YSA9IGZkLm9iamVjdFxuICAgICAgLy8gZGF0YSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIC8vICAgdGhpcy5kYXRhLFxuICAgICAgLy8gICBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKVxuICAgICAgLy8gKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXRCeVBhdGgodGhpcywga2V5KVxuICAgICAgICBpZiAoIShvbGRWYWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgICAgc2V0QnlQYXRoKHRoaXMsIGtleSwgdmFsdWUpXG4gICAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXR0YWNoT2JqZWN0OiB0cnVlLFxuICAgICAgY2xhc3NlczogW0VDQ19DTEFTU10sXG4gICAgICBleGNsdWRlOiBbXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJyxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgb29jOiBmYWxzZSwgLy8gICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vb2M9ZmFsc2VdICBVc2UgdGhlIHNwZWFrZXIvZ2V0c3BlYWtlci4gaWYgdHJ1ZSB1c2UgdGhlIHVzZXIgaW5zdGVhZFxuICAgICAgY29tcHV0ZTogdHJ1ZSwgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUubG9jYWw9dHJ1ZV0gaW52b3F1ZSB0aGUgY29tcHV0ZSBtZXRob2QgYXMgbG9jYWwgdXNlciA9PiBuZWVkIHRvIG92ZXJyaWRlIGxvY2FsQ29tcHV0ZVxuICAgICAgR01VcGRhdGU6IGZhbHNlIC8vICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jb21wdXRlLkdNPWZhbHNlXSBpbnZvcXVlIHRoZSBHTVVwZGF0ZSBtZXRob2QgYXMgR00gPT4gbmVlZCB0byBvdmVycmlkZSBHTVVwZGF0ZVxuICAgIH1cbiAgfVxuXG4gIGdldCBvYmplY3REYXRhU3RyaW5nICgpIHtcbiAgICBjb25zdCBzYXZlRGF0YSA9IHtcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIG9wdGlvbnM6IHRoaXMuX29wdGlvbnNcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGh0bW1sQ2FyZCkge1xuICAgIGlmICghaHRtbWxDYXJkKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0LmVjY0NsYXNzKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkgcmV0dXJuXG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgY29uc3QgbWVzc2FnZSA9IGh0bW1sQ2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShcbiAgICAgIGNhcmREYXRhLmRhdGEsXG4gICAgICBjYXJkRGF0YS5vcHRpb25zLFxuICAgICAgaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MsXG4gICAgICBtZXNzYWdlSWRcbiAgICApXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IENhcmRDbGFzcyA9IGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIudHlwZXMuZ2V0KGNhcmRDbGFzc05hbWUpXG5cbiAgICBpZiAoIUNhcmRDbGFzcykge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5rbm93biBjaGF0IGNhcmQgdHlwZTogJHtjYXJkQ2xhc3NOYW1lfWApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkQ2xhc3MoZGF0YSwgb3B0aW9ucylcbiAgICBpZiAobWVzc2FnZUlkKSBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGF3YWl0IGNhcmQuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIHRydWUpXG4gIH1cblxuICB1bnNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIGZhbHNlKVxuICB9XG5cbiAgdG9nZ2xlRGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBuYW1lKVxuICAgIHNldEJ5UGF0aCh0aGlzLCBuYW1lLCAhdmFsdWUpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgYW5zd2VyID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQuZXhlY3V0ZUFzR00oJ2dtX29uVG9nZ2xlJywge1xuICAgIC8vICAgZXZlbnQ6IGV2ZW50LFxuICAgIC8vICAgY2FyZDogdGhpc1xuICAgIC8vIH0pXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICgnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIHRoaXMuX29uQnV0dG9uKGV2ZW50KVxuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJlxuICAgICAgIWdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbmFtZSA9IHRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICAgID8gYGRhdGEuZmxhZ3MuJHt0YXJnZXQuZGF0YXNldC5mbGFnfWBcbiAgICAgIDogdGFyZ2V0LmRhdGFzZXQubmFtZVxuICAgIGlmICghbmFtZSkgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5lY2MtcmFkaW8nKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICB0aGlzLnRvZ2dsZURhdGEobmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZWNjLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICBjb25zdCBiTmFtZSA9IGIuZGF0YXNldC5mbGFnXG4gICAgICAgICAgPyBgZGF0YS5mbGFncy4ke2IuZGF0YXNldC5mbGFnfWBcbiAgICAgICAgICA6IGIuZGF0YXNldC5uYW1lXG4gICAgICAgIHRoaXMudW5zZXREYXRhKGJOYW1lKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXREYXRhKG5hbWUpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gU3VibWl0IG9uIGNoYW5nZSA/XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgfVxuXG4gIF9mZXRjaCAoKSB7XG4gICAgaWYgKCF0aGlzLl9kb2MgJiYgdGhpcy5kYXRhLmRvY1V1aWQpIHtcbiAgICAgIHRoaXMuX2RvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLl9kb2MpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9kb2MuY29uc3RydWN0b3I/Lm5hbWUpIHtcbiAgICAgICAgICBjYXNlICdUb2tlbkRvY3VtZW50JzpcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yID0gdGhpcy5fZG9jLmFjdG9yXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnQ29DQWN0b3InOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2NcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB0aGlzLl9hY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgdGhpcy5fZmV0Y2goKVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IGlzQWN0b3IgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxuICB9XG5cbiAgZ2V0IGlzQWN0aXZlICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFjdGl2ZSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGtleSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5hY3RvcktleVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3Rvcikge1xuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5pbWdcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRyaXZlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9kcml2ZXIpIHtcbiAgICAgIHRoaXMuX2RyaXZlciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZHJpdmVyXG4gIH1cblxuICBnZXQgdmVoaWNsZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS52ZWhpY2xlS2V5KSB7XG4gICAgICB0aGlzLl92ZWhpY2xlID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLnZlaGljbGVLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl92ZWhpY2xlXG4gIH1cblxuICBnZXQgaGFzQWN0b3IgKCkge1xuICAgIHJldHVybiAhIXRoaXMuYWN0b3JcbiAgfVxuXG4gIGdldCBoYXNWZWhpY2xlICgpIHtcbiAgICByZXR1cm4gISF0aGlzLnZlaGljbGVcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLm5hbWVcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiB0aGlzLmRhdGEubmFtZSB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm1vdikge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgdGhpcy5kYXRhLm1vdiA9IHRoaXMudmVoaWNsZS5tb3ZcbiAgICAgIGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHRoaXMuZGF0YS5tb3YgPSB0aGlzLmFjdG9yLm1vdlxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSkpIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWRNb3YgPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEubW92ID0gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLnV1aWRcbiAgfVxuXG4gIGdldCBoYXNNYXhCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgYm9udXNEaWNlICgpIHtcbiAgICBpZiAoXG4gICAgICBpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA8IDAgfHxcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPiAyXG4gICAgKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmJvbnVzRGljZVxuICB9XG5cbiAgc2V0IGJvbnVzRGljZSAoeCkge1xuICAgIGlmIChpc05hTih4KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQm9udXMgZGljZSBjYW4gT25seSBiZSBhIG51bWJlcicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHggPiAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdNYXggMiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ05vIG5lZ2F0aXYgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHhcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaHApIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IDBcbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IHRoaXMuYWN0b3IuaHBcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmhwXG4gIH1cblxuICBzZXQgaHAgKHgpIHtcbiAgICB0aGlzLmRhdGEuaHAgPSB4XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc2V0SHAoeClcbiAgICB9XG4gIH1cblxuICBhZGRCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlID49IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSBtYXggYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gIH1cblxuICByZW1vdmVCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlIDw9IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSAwIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgLT0gMVxuICB9XG5cbiAgcmVzZXRCb251c0RpY2UgKCkge1xuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSAwXG4gIH1cblxuICBnZXQgaGFzQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNPbmVCb251c0RpY2UgfHwgdGhpcy5oYXNUd29Cb251c0RpY2VcbiAgfVxuXG4gIGdldCBoYXNPbmVCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAxXG4gIH1cblxuICBnZXQgaGFzVHdvQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib251c0RpY2UgPj0gMlxuICB9XG5cbiAgZ2V0IGNhbkFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaXN0Py5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgY2FuQmVDYXV0aW91cyAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmhhc01heEJvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5hc3Npc3QgfHwgW11cbiAgfVxuXG4gIGdldCBkZXggKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0RyaXZlcikge1xuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5kcml2ZXIuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmFjdG9yLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpKSB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSB0cnVlXG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkRGV4ID0gZmFsc2VcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRleFxuICB9XG5cbiAgZ2V0IGhhc0FHdW5SZWFkeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5oYXNBR3VuUmVhZHkgfHwgZmFsc2VcbiAgfVxuXG4gIGdldCBpbml0aWF0aXZlICgpIHtcbiAgICBsZXQgaW5pdCA9IHRoaXMuZGV4XG4gICAgaWYgKHRoaXMuaGFzQUd1blJlYWR5KSB7XG4gICAgICBpbml0ICs9IDUwXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLnNwZWVkQ2hlY2spe1xuICAgIC8vICAgaWYodGhpcy5zcGVlZENoZWNrLnNjb3JlKSBpbml0ICs9IHRoaXMuc3BlZWRDaGVjay5zY29yZS8xMDBcbiAgICAvLyB9XG5cbiAgICByZXR1cm4gaW5pdFxuICB9XG5cbiAgZ2V0IGlzQ2hhc2VyICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmRhdGEuY2hhc2VyXG4gIH1cblxuICBnZXQgaXNQcmV5ICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNDaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ZhbGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNWYWxpZERleCAmJiB0aGlzLmhhc1ZhbGlkTW92XG4gIH1cblxuICBnZXQgaGFzVmFsaWREZXggKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKVxuICB9XG5cbiAgZ2V0IGhhc1ZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSlcbiAgfVxuXG4gIGdldCBoYXNEcml2ZXIgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZlaGljbGUgJiYgdGhpcy5oYXNBY3RvclxuICB9XG5cbiAgZ2V0IG1vdkFkanVzdG1lbnQgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcodGhpcy5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpXG4gICAgICBpZiAocm9sbCkge1xuICAgICAgICBpZiAoIXJvbGwuc3RhbmRieSkge1xuICAgICAgICAgIGlmIChyb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHJldHVybiAxXG4gICAgICAgICAgZWxzZSBpZiAocm9sbC5mYWlsZWQpIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgYWRqdXN0ZWRNb3YgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5tb3YgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLm1vdikpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIE51bWJlcih0aGlzLm1vdikgKyB0aGlzLm1vdkFkanVzdG1lbnRcbiAgfVxuXG4gIGdldCBoYXNNb3ZBZGp1c3RtZW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNCb251c01vdiB8fCB0aGlzLmhhc01hbHVzTW92XG4gIH1cblxuICBnZXQgaGFzQm9udXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTWFsdXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBnZXQgb3B0aW9ucygpe1xuICAvLyAgcmV0dXJuIHtcbiAgLy8gICAgZXhjbHVkZTogW10sXG4gIC8vICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJ1xuICAvLyAgfTtcbiAgLy8gfVxuXG4gIC8vIGdldCBkYXRhU3RyaW5nKCl7XG4gIC8vICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSx2YWx1ZSk9PntcbiAgLy8gICAgaWYoIG51bGwgPT09IHZhbHVlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAvLyAgICBpZiggdGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCBrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIHJldHVybiB2YWx1ZTtcbiAgLy8gIH0pO1xuICAvLyB9XG5cbiAgdG9vU2xvdyAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gdHJ1ZVxuICB9XG5cbiAgaW5jbHVkZUluQ2hhc2UgKCkge1xuICAgIHRoaXMuZGF0YS5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSBmYWxzZVxuICB9XG5cbiAgZXNjYXBlZCAoKSB7XG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSB0cnVlXG4gIH1cblxuICBzZXQgc2xvd2VzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5zbG93ZXN0ID0geFxuICB9XG5cbiAgZ2V0IHNsb3dlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuc2xvd2VzdFxuICB9XG5cbiAgc2V0IGZhc3Rlc3QgKHgpIHtcbiAgICB0aGlzLmRhdGEuZmFzdGVzdCA9IHhcbiAgfVxuXG4gIGdldCBmYXN0ZXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZhc3Rlc3RcbiAgfVxuXG4gIGNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyAobWluTW92KSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMubW92ZW1lbnRBY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2YgdGhpcy5hZGp1c3RlZE1vdiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIGlzTmFOKG1pbk1vdilcbiAgICApIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAxICsgKHRoaXMuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLm1vdmVtZW50QWN0aW9uIDwgMCkgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgfVxuXG4gIHNldCBtb3ZlbWVudEFjdGlvbiAoeCkge1xuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHhcbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgc2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHhcbiAgfVxuXG4gIGdldCBjdXJyZW50TW92ZW1lbnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgfHwgMFxuICB9XG5cbiAgZ2V0IGhhc01heE12dEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgZ2V0IGhhc05vTXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8PSAwXG4gIH1cblxuICBhZGRNb3ZlbWVudEFjdGlvbnMgKHggPSAxKSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGFsdGVyTW92ZW1lbnRBY3Rpb25zICh4KSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbkFycmF5ICgpIHtcbiAgICBjb25zdCBiYXNlQXJyYXkgPSBBcnJheSh0aGlzLm1vdmVtZW50QWN0aW9uKS5maWxsKCdiYXNlJylcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID49IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zOyBpKyspIHtcbiAgICAgICAgYmFzZUFycmF5W2ldID0gJ2Jhc2UgYXZhaWxhYmxlJ1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VBcnJheVxuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAwKSB7XG4gICAgICBjb25zdCBkZWZpY2l0QXJyYXkgPSBBcnJheShNYXRoLmFicyh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMpKS5maWxsKFxuICAgICAgICAnZGVmaWNpdCdcbiAgICAgIClcbiAgICAgIHJldHVybiBkZWZpY2l0QXJyYXkuY29uY2F0KGJhc2VBcnJheSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzZXMgPSBbXVxuICAgIGlmICh0aGlzLmlzQ2hhc2VyKSBjc3NDbGFzc2VzLnB1c2goJ2NoYXNlcicpXG4gICAgZWxzZSBjc3NDbGFzc2VzLnB1c2goJ3ByZXknKVxuICAgIGlmICh0aGlzLmRhdGEuZXhjbHVkZWQpIGNzc0NsYXNzZXMucHVzaCgnZXhjbHVkZWQnLCAndG9vX3Nsb3cnKVxuICAgIGlmICh0aGlzLmRhdGEuZXNjYXBlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdlc2NhcGVkJylcbiAgICBpZiAodGhpcy5kYXRhLmZhc3Rlc3QpIGNzc0NsYXNzZXMucHVzaCgnZmFzdGVzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5zbG93ZXN0KSBjc3NDbGFzc2VzLnB1c2goJ3Nsb3dlc3QnKVxuICAgIGlmICh0aGlzLmRhdGEuYWN0aXZlKSBjc3NDbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgaWYgKHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDApIGNzc0NsYXNzZXMucHVzaCgnbm8tYWN0aW9ucycpXG4gICAgcmV0dXJuIGNzc0NsYXNzZXMuam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlZWRDaGVjayAoKSB7XG4gICAgY29uc3QgY2hlY2sgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSBjaGVjay5zY29yZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLnNjb3JlXG4gICAgY2hlY2suY3NzQ2xhc3NlcyA9ICcnXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY2hlY2sucm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChjaGVjay5yb2xsKSB7XG4gICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5IHx8IGNoZWNrLnJvbGwuaGFzQ2FyZCkge1xuICAgICAgICAgIGNoZWNrLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICBjaGVjay5pbmxpbmVSb2xsID0gY2hlY2sucm9sbC5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICAgICAgICBjaGVjay5jc3NDbGFzc2VzICs9ICdyb2xsZWQnXG4gICAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICAgICAgY2hlY2subW9kaWZpZXJDc3MgPSAndXBncmFkZSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hlY2sucm9sbC5mYWlsZWQpIGNoZWNrLm1vZGlmaWVyQ3NzID0gJ2Rvd25ncmFkZSdcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XG4gICAgICAgICAgICAgIGNoZWNrLnJvbGwuZmFpbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY2hlY2suaGFzTW9kaWZpZXIgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICBjaGVjay5vcHRpb25zID0gW11cbiAgICAgIGZvciAoY29uc3QgYyBvZiBbJ2NvbiddKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gdGhpcy5hY3Rvci5nZXRDaGFyYWN0ZXJpc3RpYyhjKVxuICAgICAgICBpZiAoY2hhcmFjdGVyaXN0aWM/LnZhbHVlKSBjaGVjay5vcHRpb25zLnB1c2goY2hhcmFjdGVyaXN0aWMubGFiZWwpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLmRyaXZlU2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLnBpbG90U2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgICBjaGVjay5oYXNPcHRpb25zID0gISFjaGVjay5vcHRpb25zLmxlbmd0aFxuXG4gICAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LmlkKSB7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICBjb25zdCBnYW1lSXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICAgIGlmIChnYW1lSXRlbSkgaXRlbSA9IHRoaXMuYWN0b3IuZmluZChnYW1lSXRlbS5uYW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZSlcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtXG4gICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICBjaGVjay5yZWZTZXQgPSBmYWxzZVxuICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS5iYXNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lICYmIHRoaXMuZGF0YS5zcGVlZENoZWNrPy5zY29yZSkge1xuICAgICAgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICAgIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgfVxuXG4gICAgY2hlY2suY2FuQmVSb2xsZWQgPSB0cnVlXG5cbiAgICBpZiAoIWNoZWNrLnJvbGxlZCAmJiAhY2hlY2suc2NvcmUpIHtcbiAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJyBpbnZhbGlkJ1xuICAgICAgY2hlY2suY2FuQmVSb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBjaGVjay5pc1ZhbGlkID0gY2hlY2sucm9sbGVkICYmICFpc05hTihjaGVjay5zY29yZSlcblxuICAgIHJldHVybiBjaGVja1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlSb2xlQW5kRGV4IChhLCBiKSB7XG4gIGlmICghYSAmJiBiKSByZXR1cm4gMVxuICBpZiAoIWIgJiYgYSkgcmV0dXJuIC0xXG4gIGlmICghYSAmJiAhYikgcmV0dXJuIDBcbiAgLy8gUHV0IGNoYXNlcnMgZmlyc3RcbiAgaWYgKGIuY2hhc2VyICYmICFhLmNoYXNlcikgcmV0dXJuIDFcbiAgaWYgKGEuY2hhc2VyICYmICFiLmNoYXNlcikgcmV0dXJuIC0xXG4gIC8vIElmIHNhbWV0eXBlIHNvcnQgYnkgZGV4XG4gIHJldHVybiBhLmRleCAtIGIuZGV4XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgRW5oYW5jZWRDaGF0Q2FyZCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi8uLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhc2VPYnN0YWNsZUNhcmQgZXh0ZW5kcyBFbmhhbmNlZENoYXRDYXJkIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuaHRtbCcsXG4gICAgICBHTVVwZGF0ZTogdHJ1ZVxuICAgIH0pXG4gICAgb3B0aW9ucy5jbGFzc2VzLnB1c2goJ29ic3RhY2xlLWNhcmQnKVxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuc3RhdHVzID0gW11cbiAgICBkYXRhLnN0cmluZ3MgPSB7fVxuICAgIGRhdGEuZGlzcGxheUFjdG9yT25DYXJkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgICAvLyBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLnBhcnRpY2lwYW50RGF0YSlcblxuICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgbmFtZTpcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSArIGAgOiR7dGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdH1gXG4gICAgfSlcblxuICAgIGRhdGEuY2FyZC5icmVha2FibGVPYnN0YWNsZSA9XG4gICAgICBkYXRhLmRhdGEub2JzdGFjbGU/LmJhcnJpZXIgJiYgZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAvLyBUT0RPOiBDaGVjayBpZiB1c2VmdWxsXG4gICAgZGF0YS5jYXJkLnZhbGlkQ2hlY2sgPSBmYWxzZVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkICYmXG4gICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhemFyZCB8fFxuICAgICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgJiYgIWRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpKVxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Py5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lKVxuICAgICAgZGF0YS5jaGVja09wdGlvbnMgPSB0aGlzLmNoYXNlLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKFxuICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkXG4gICAgICApXG4gICAgICBpZiAoZGF0YS5za2lsbCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICAgIGRhdGEudmFsaWRTa2lsbCA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXG4gICAgICBkYXRhLmR1bW15QWN0b3IgPSB0cnVlXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZGF0YS5kYXRhLmJvbnVzRGljZSkgZGF0YS5kYXRhLmJvbnVzRGljZSA9IDBcblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5ib251c0RpY2UgPCAyICYmXG4gICAgICBkYXRhLmRhdGEudG90YWxBY3Rpb25Db3N0IDwgZGF0YS5kYXRhLm1vdmVtZW50QWN0aW9uXG4gICAgKSB7XG4gICAgICBkYXRhLmNhblRha2VDYXV0aW91c0FwcHJvYWNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGRhdGEuY3VzdG9tV2VhcG9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5kYXRhLndlYXBvbkNob2ljZSA9PT0gJzAnKSB7XG4gICAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoZGF0YS52YWxpZENoZWNrKSB7XG4gICAgICBsZXQgY2hlY2tOYW1lLCB2YWx1ZVxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5za2lsbC52YWx1ZS5uYW1lXG4gICAgICAgIHZhbHVlID0gZGF0YS5za2lsbC52YWx1ZS52YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgICB2YWx1ZSA9IGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgfVxuICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFza1JvbGwnLCB7XG4gICAgICAgIG5hbWU6IGNoZWNrTmFtZSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0pXG4gICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSAhPT0gMCkge1xuICAgICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSA+IDApIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgrJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXG4gICAgICAgIH0gZWxzZSBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgke2RhdGEuZGF0YS5ib251c0RpY2V9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkKSB7XG4gICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWNpbmdPYnN0YWNsZScsIHtcbiAgICAgICAgdHlwZTogZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BQmFycmllcicpXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUhhemFyZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5uYW1lKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgKz0gYCAoJHtkYXRhLmRhdGEub2JzdGFjbGUubmFtZX0pYFxuICAgICAgfVxuXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSB0cnVlXG4gICAgICAvLyBkYXRhLmRhdGEuc3RhdGVzLm9ic3RhY2xlQ2FuQmVCcm9rZW4gPSBmYWxzZVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmFycmllcicpIH0pXG4gICAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSB9KVxuICAgICAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXphcmQnKSB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICBpZiAoIWRhdGEudmFsaWRDaGVjaykge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRDaGVjaycpLFxuICAgICAgICAgICAgY3NzOiAnZXJyb3InXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuRW50ZXJWYWx1ZVRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICdDb0M3LlNraWxsU2VsZWN0QmFzZScsXG4gICAgICAgICAgICB7IG5hbWU6IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgfVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkgZGF0YS5kYXRhLnN0YXRlcy5jYW5Bc2tSb2xsID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YS52YWxpZFNraWxsKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZFNraWxsJyksXG4gICAgICAgICAgICBjc3M6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICBsZXQgZGFtYWdlU3RhdHVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrRG93bicpXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbCkge1xuICAgICAgICAgIGRhbWFnZVN0YXR1cyArPSBgIDogJHt0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwudG90YWx9YFxuICAgICAgICB9XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGRhbWFnZVN0YXR1c1xuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsIDw9IDApIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9XG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob0RhbWFnZURlYWx0JylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5pbmxpbmVEYW1hZ2VSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbHQnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlubGluZURhbWFnZVJvbGxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVnb3RpYXRlJykgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHtcbiAgICAgICAgY29uc3QgY2F1dGlvdXNTdGF0dXMgPSB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhdXRpb3VzJyksXG4gICAgICAgICAgY3NzOiAnJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoID4gMSkge1xuICAgICAgICAgIGNhdXRpb3VzU3RhdHVzLmNzcyA9ICdzdHJvbmcnXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNhdXRpb3VzQXBwcm9hY2hUeXBlID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQmVpbmdWZXJ5Q2F1dGlvdXMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jYXV0aW91c0FwcHJvYWNoVHlwZSA9XG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmVpbmdDYXV0aW91cycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIGNhdXRpb3VzU3RhdHVzLmNzcyArPSAnIGNvbnN1bWUnXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goY2F1dGlvdXNTdGF0dXMpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZSAvLyBPbiBoYXphcmQsIHlvdSBwYXNzIGV2ZW4gaWYgeW91IGZhaWwgeW91ciByb2xsXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5tb3ZlUGxheWVyID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlUGFzc2VkID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuT2JzdGFjbGVQYXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5sdWNrU3BlbnQpIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuR290THVja3knXG4gICAgICAgICAgICApfSlgXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1Y2Nlc3MnKSxcbiAgICAgICAgICAgIGNzczogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZ1bWJsZScpXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJyksXG4gICAgICAgICAgICBjc3M6ICdmdW1ibGUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGYWlsJylcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJyksXG4gICAgICAgICAgICBjc3M6ICdmYWlsdXJlJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5UcnlUb05lZ290aWF0ZUhhemFyZCdcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuVHJ5VG9HZXRQYXN0QmFycmllcnMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRyeVRvQnJlYWsnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgICAvLyBJZiB0aGUgY2FyZCBpcyByZXNvbHZlZCB0aGUgY2hlY2sgaXMgZnJvemVuXG4gICAgICAgIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaW5saW5lQ2hlY2s/Lm91dGVySFRNTFxuICAgICAgfSBlbHNlIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZ2V0SHRtbFJvbGwoKVxuICAgIH1cblxuICAgIC8vIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCkge1xuICAgIC8vICAgaWYgKCFkYXRhLmRhdGEuYXJtb3IpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpXG4gICAgLy8gICAgICAgZGF0YS5kYXRhLmFybW9yID1cbiAgICAvLyAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgIC8vICAgfVxuICAgIC8vICAgaWYgKGRhdGEuZGF0YS5hcm1vcikge1xuICAgIC8vICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS5hcm1vcikpKSBkYXRhLmRhdGEuYXJtb3IgPSBudWxsXG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICBkYXRhLnBsYXllckRhbWFnZVRha2VuID0gZmFsc2VcbiAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZhbHNlXG5cbiAgICAgIC8vIEhhcyB0aGUgb2JzdGFjbGUgY2hhbmdlZCA/XG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSXMgcGxheWVyIHRha2luZyBkYW1hZ2VcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICAgIGRhdGEucGxheWVyRGFtYWdlVGFrZW4gPSB0cnVlXG4gICAgICAgIGRhdGEuaW5saW5lRGFtYWdlVGFrZW5Sb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgICAvLyBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPCAwKVxuICAgICAgICAvLyAgIGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuXG4gICAgICAgIGlmIChkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9PT0gMCkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VUYWtlTm9EYW1hZ2UnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAnQ29DNy5Zb3VUYWtlU29tZURhbWFnZScsXG4gICAgICAgICAgICB7IGFtb3VudDogZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvdGFsRGFtYWdlJykgK1xuICAgICAgICAgICAgYCA6JHtkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbn1gXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuYWN0aW9uTG9zdCA9IHRydWVcbiAgICAgICAgZGF0YS5zdHJpbmdzLmFjdGlvbkxvc3QgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWW91TG9zdFRpbWUnKVxuICAgICAgICBkYXRhLmlubGluZUFjdGlvbkxvc3RSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgfVxuXG4gICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhcmRSZXNvbHZlZCcpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTW92ZVRvTG9jYXRpb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLmZpbmFsT3V0Y29tZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Eb250TW92ZVRvTG9jYXRpb24nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvQzc6IEdNVXBkYXRlIGNhbGxlZCBmcm9tIG5vbiBHTSB1c2VyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgIC8vIENhcmQgaXMgcmVzb2x2ZWQsIGNvbXB1dGUgYWxsIGZvcm11bGFzIGFuZCBkYW1hZ2UuXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGw/LnRvdGFsKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsRGFtYWdlID0gdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICBjb25zdCBhcm1vclZhbHVlID0gdGhpcy5kYXRhLmZsYWdzLmlnbm9yZUFybW9yID8gMCA6IHRoaXMuZGF0YS5hcm1vclxuICAgICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChhcm1vclZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vclZhbHVlKSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSBOdW1iZXIoYXJtb3JWYWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSB0b3RhbERhbWFnZSAtIHRoaXMuZGF0YS5hcm1vclxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMgPSB0cnVlIC8vIEJ5IGRlZmF1bHQgcmVmbGVjdCBjaGFuZ2VzXG4gICAgICB9XG5cbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID1cbiAgICAgICAgICAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSB8fCB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSAmJlxuICAgICAgICAgICF0aGlzLmRhdGEuc3RhdGVzLmZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZFxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWxcbiAgICAgICkge1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSkge1xuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID1cbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQgPVxuICAgICAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cyAtIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlIDw9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgICApXG4gICAgICB0aGlzLmRhdGEuRUVDX0FDVElPTiA9IHsgZGV0YWNoRGF0YTogdHJ1ZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjayAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2sgPSBDb0M3Q2hlY2suZnJvbURhdGEodGhpcy5kYXRhLm9iamVjdHMuY2hlY2spXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkQWN0aW9uUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSAoKSB7XG4gICAgLy8gY29uc3QgY2hhc2UgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YT8udXVpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhID0ge31cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5zdGF0ZXMgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cblxuICAgIC8vIGNvbnN0IGxvY2F0aW9uID0gY2hhc2UuZ2V0TG9jYXRpb25EYXRhKHRoaXMuZGF0YS5sb2NhdGlvblV1aWQpXG4gICAgdGhpcy5kYXRhLm9ic3RhY2xlID0gdGhpcy5sb2NhdGlvbj8ub2JzdGFjbGVEZXRhaWxzIC8vIEZlZWQgdGhlIG9ic3RhY2xlIGRlZmluaXRpb25cbiAgICAvLyB0aGlzLmRhdGEucGFydGljaXBhbnREYXRhID0gY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZCA9IHRoaXMuY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhLnV1aWRcblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50RGF0YT8uYm9udXNEaWNlID4gMCkge1xuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHRoaXMucGFydGljaXBhbnREYXRhLmJvbnVzRGljZVxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlID0gdGhpcy5wYXJ0aWNpcGFudC5oYXNCb251c0RpY2VcbiAgICB9XG5cbiAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25BcnJheSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgKVxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHRoaXMucGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPSAwXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBpZiAoIXRoaXMuX3BhcnRpY2lwYW50KVxuICAgIC8vICAgdGhpcy5fcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKVxuICAgIC8vIHJldHVybiB0aGlzLl9wYXJ0aWNpcGFudFxuICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKSAvLyBUTyBSRVNFVFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0UGFydGljaXBhbnREYXRhKHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpXG4gIH1cblxuICBnZXQgbG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxuICB9XG5cbiAgZ2V0IG9ic3RhY2xlICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5vYnN0YWNsZURldGFpbHNcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuY2hhc2VVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9jaGFzZSkgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IHJvbGwgKCkge1xuICAgIGxldCByb2xsRGF0YVxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpIHtcbiAgICAgIGNvbnN0IGFjdG9yU2tpbGwgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmZpbmQoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWVcbiAgICAgIClcbiAgICAgIGlmICh0eXBlb2YgYWN0b3JTa2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcm9sbERhdGEgPSBhY3RvclNraWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhLmFjdG9yID0geyBhY3RvcktleTogdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5pZCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lICYmIHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZCkge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdG9yOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnBhcnRpY2lwYW50Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhKSB7XG4gICAgICByb2xsRGF0YS5kaWNlTW9kaWZpZXIgPSB0aGlzLmRhdGE/LmJvbnVzRGljZSB8fCAwXG4gICAgICByb2xsRGF0YS5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICByb2xsRGF0YS5kZW55UHVzaCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHJvbGxEYXRhIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkRmFpbGVkUm9sbHMgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmUpIHJldHVybiBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgJiZcbiAgICAgICAgIVJvbGwudmFsaWRhdGUoZGFtYWdlKSAvLyBWYWxpZGF0ZSBvbmx5IHRha2UgYSBzdHJpbmcsIGlmIGRhbWFnZSBpcyBhIG51bWJlciBjb252ZXJ0IHRvIGEgc3RyaW5nXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNBY3Rpb25Db3N0KSB7XG4gICAgICBjb25zdCBhY3Rpb25Db3N0ID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3RcbiAgICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ICYmICFSb2xsLnZhbGlkYXRlKGFjdGlvbkNvc3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHdlYXBvbnNPcHRpb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25zID0gW11cbiAgICB0aGlzLnBhcnRpY2lwYW50LmFjdG9yPy5pdGVtVHlwZXM/LndlYXBvbj8uZm9yRWFjaCh3ID0+IHtcbiAgICAgIGxldCBmb3JtdWxhID0gdy5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgICAgbGV0IGRiID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYlxuICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIHtcbiAgICAgICAgZGIgPSAnJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGIgPSBgJHtkYn1gXG4gICAgICB9XG5cbiAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5haGJkKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiICsgJy8yJ1xuICAgICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgICAgbmFtZTogYCR7dy5kYXRhLm5hbWV9ICgke2Zvcm11bGF9KWAsXG4gICAgICAgIGRhbWFnZTogZm9ybXVsYSxcbiAgICAgICAgdXVpZDogdy51dWlkXG4gICAgICB9KVxuICAgIH0pXG4gICAgd2VhcG9ucy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGlmIChcbiAgICAgICF3ZWFwb25zLmZpbmQodyA9PlxuICAgICAgICB3Lm5hbWVcbiAgICAgICAgICAudG9VcHBlckNhc2UoKVxuICAgICAgICAgIC5zdGFydHNXaXRoKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyk/LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICApXG4gICAgICApXG4gICAgKSB7XG4gICAgICBsZXQgZGIgPSAnJ1xuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXG4gICAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICAgIGlmIChkYiA9PT0gbnVsbCB8fCBOdW1iZXIoZGIpID09PSAwKSBkYiA9ICcnXG4gICAgICB9XG5cbiAgICAgIHdlYXBvbnMudW5zaGlmdCh7XG4gICAgICAgIG5hbWU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFybWVkV2VhcG9uTmFtZScpfSAoMUQzJHtkYn0pYCxcbiAgICAgICAgZGFtYWdlOiBgMUQzJHtkYn1gLFxuICAgICAgICB1dWlkOiAndW5hcm1lZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PdGhlcicpLFxuICAgICAgZGFtYWdlOiB0aGlzLmRhdGE/LmN1c3RvbVdlYXBvbkRhbWFnZSB8fCBudWxsLFxuICAgICAgdXVpZDogMFxuICAgIH0pXG4gICAgcmV0dXJuIHdlYXBvbnNcbiAgfVxuXG4gIGdldCB1c2VkV2VhcG9uICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YT8ud2VhcG9uQ2hvaWNlKSB7XG4gICAgICBpZiAoIXRoaXMud2VhcG9uc09wdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICghdGhpcy5kYXRhKSB0aGlzLmRhdGEgPSB7fSAvLyB1c2VsZXNzICEhIVxuICAgICAgdGhpcy5kYXRhLndlYXBvbkNob2ljZSA9IHRoaXMud2VhcG9uc09wdGlvbnNbMF0udXVpZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEud2VhcG9uQ2hvaWNlKSB7XG4gICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLndlYXBvbnNPcHRpb25zLmZpbmQoXG4gICAgICAgIGUgPT4gZS51dWlkID09PSB0aGlzLmRhdGEud2VhcG9uQ2hvaWNlXG4gICAgICApXG4gICAgICBpZiAod2VhcG9uKSByZXR1cm4gd2VhcG9uXG4gICAgfVxuICB9XG5cbiAgZ2V0IGluZmxpY3RlZERhbWFnZUZvcm11bGEgKCkge1xuICAgIGlmICh0aGlzLnVzZWRXZWFwb24pIHtcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMudXNlZFdlYXBvblxuICAgICAgaWYgKHdlYXBvbiAmJiB3ZWFwb24uZGFtYWdlICYmIFJvbGwudmFsaWRhdGUod2VhcG9uLmRhbWFnZSkpIHtcbiAgICAgICAgcmV0dXJuIHdlYXBvbi5kYW1hZ2VcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkT2JzdGFjbGVEYW1hZ2UgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICFpc05hTihOdW1iZXIodGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cykpICYmXG4gICAgICBOdW1iZXIodGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cykgPiAwICYmXG4gICAgICB0aGlzLmluZmxpY3RlZERhbWFnZUZvcm11bGFcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHN0cmluZ3MgKCkge1xuICAgIGNvbnN0IHN0cmluZ3MgPSB7fVxuICAgIHN0cmluZ3MuZGFtYWdlUm9sbFJlcXVlc3QgPSB0aGlzLnVzZWRXZWFwb24ubmFtZVxuXG4gICAgcmV0dXJuIHN0cmluZ3NcbiAgfVxuXG4gIC8vIEFjdGlvbnMgOlxuICBhc3luYyB2YWxpZGF0ZUNhcmQgKG9wdGlvbnMpIHtcbiAgICBsZXQgbG9hY3Rpb25DaGFuZ2VkXG4gICAgbGV0IHBhcnRpY2lwYW50Q2hhZ2VkID0gZmFsc2VcbiAgICBjb25zdCBvYnN0YWNsZVVwZGF0ZSA9IHt9XG4gICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzID0ge31cbiAgICBjb25zdCBwYXJ0aWNpcGFudFVwZGF0ZSA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZSA9IGZhbHNlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gZmFsc2VcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgaWYgKGRpZmYuY2hhbmdlcykge1xuICAgICAgaWYgKHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGlmZi5vYnN0YWNsZSkpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSAndHlwZScpIHtcbiAgICAgICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlsc1t2YWx1ZS5rZXldID0gdmFsdWUubmV3XG4gICAgICAgICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID4gMCAmJiB0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICBsZXQgcmVtYWluaW5nSHAgPSB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzXG4gICAgICByZW1haW5pbmdIcCAtPSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZVxuICAgICAgaWYgKHJlbWFpbmluZ0hwIDwgMCkgcmVtYWluaW5nSHAgPSAwXG4gICAgICBpZiAodGhpcy5vYnN0YWNsZS5IaXRQb2ludHMgIT09IHJlbWFpbmluZ0hwKSB7XG4gICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzID0gcmVtYWluaW5nSHBcbiAgICAgICAgbG9hY3Rpb25DaGFuZ2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA+IDApIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kZWFsRGFtYWdlKFxuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuLFxuICAgICAgICAgIHsgaWdub3JlQXJtb3I6IHRydWUgfVxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ocCA9IHRoaXMucGFydGljaXBhbnREYXRhLmhwXG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwIC09IHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuXG4gICAgICAgIGlmIChwYXJ0aWNpcGFudFVwZGF0ZS5ocCA8IDApIHBhcnRpY2lwYW50VXBkYXRlLmhwID0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ID4gMCkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID1cbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgcGFydGljaXBhbnRVcGRhdGUuY3VycmVudE1vdmVtZW50QWN0aW9ucyAtPSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZSAvLyBCb251cyBkaWNlIGF3YXJkZWQgZHVyaW5nIGZsb3cgYXJlIGJlaW5nIGNvbnN1bWVkXG5cbiAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gMFxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXG4gICAgICAgICFpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSAmJlxuICAgICAgICB0aGlzLmRhdGEuYm9udXNEaWNlICE9PSB0aGlzLnBhcnRpY2lwYW50LmJvbnVzRGljZVxuICAgICAgKSB7XG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmJvbnVzRGljZSA9IHRoaXMuZGF0YS5ib251c0RpY2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLm1vdmVQbGF5ZXIpIHtcbiAgICAgIGxldCB0YXJnZXRMb2NhdGlvblxuICAgICAgaWYgKHRoaXMuZGF0YS5mb3J3YXJkKSB7XG4gICAgICAgIHRhcmdldExvY2F0aW9uID0gdGhpcy5sb2NhdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSB0aGlzLmNoYXNlLmdldExvY2F0aW9uU2hpZnQodGhpcy5sb2NhdGlvbi51dWlkLCB7XG4gICAgICAgICAgc2tpcDogLTFcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldExvY2F0aW9uLnV1aWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGFzZS5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKFxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLnV1aWQsXG4gICAgICAgICAgdGFyZ2V0TG9jYXRpb24udXVpZCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzY3JvbGxUb0xvY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgYWN0aXZhdGVMb2NhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxvYWN0aW9uQ2hhbmdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFzZS51cGRhdGVMb2NhdGlvbih0aGlzLmxvY2F0aW9uLnV1aWQsIG9ic3RhY2xlVXBkYXRlLCB7XG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChwYXJ0aWNpcGFudENoYWdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFzZS51cGRhdGVQYXJ0aWNpcGFudChcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEudXVpZCxcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUsXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2xvc2VkID0gdHJ1ZVxuICAgIGF3YWl0IHRoaXMuY2hhc2UuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKCkgLy8gUmVuZGVyIHdpbGwgYmUgZG9uZSB0aGVyZSAhXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGRlZmluZU9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuc3RhdGVzKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0cnlUb0JyZWFrRG93bk9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBjYW5jZWxCcmVha09yUGFzc0Nob2ljZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cykgcmV0dXJuIHRoaXMuY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uKClcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByZXF1ZXN0Um9sbCAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdGFrZUNhdXRpb3VzQXBwcm9hY2ggKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2ggPSAwXG4gICAgdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCArPSAxXG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkge1xuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSkge1xuICAgICAgdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA8PSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0KSB7IC8vIEFsbCBtb3YgYWN0aW9uIGhhdmUgYmVlbiB1c2VkIHRvIHRha2UgY3VhdGlvdXMgYXBwcm9hY2guXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IGZhbHNlIC8vIERvIG5vdCBjb25zdW1lIHRoZSBib251cyBkaWNlLlxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsU2tpbGxDaGVjayAob3B0aW9ucykge1xuICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSByZXR1cm5cbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxuICAgIGlmICghdGhpcy5yb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RoaW5nVG9Sb2xsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrID0gQ29DN0NoZWNrLmNyZWF0ZUZyb21BY3RvclJvbGxEYXRhKHRoaXMucm9sbClcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzLmNoZWNrKSByZXR1cm4gZmFsc2VcbiAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5kZW55UHVzaCA9IHRydWUgLy8gT2JzdGFjbGUgY2hlY2sgY2FuJ3QgYmUgcHVzaGVkXG4gICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQgPSB0cnVlXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJylcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5hcm1vciA9PT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPVxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB1c2VMdWNrIChvcHRpb25zKSB7XG4gICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLCAndXNlTHVjaycsIHtcbiAgICAgIHRhcmdldDogb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgdXBkYXRlOiBmYWxzZVxuICAgIH0pXG4gICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLnBhc3NlZCkge1xuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbEZhaWxDb25zZXF1ZW5jZXMgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UgJiYgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmlzRmFpbHVyZSkge1xuICAgICAgY29uc3QgZGFtYWdlID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSA9PT0gJ251bWJlcidcbiAgICAgICAgICA/IGAke3RoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZX1gXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2VcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwgPSBuZXcgUm9sbChkYW1hZ2UpXG4gICAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxuICAgICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCA9PT0gJ251bWJlcidcbiAgICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gbmV3IFJvbGwoYWN0aW9uQ29zdClcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gKHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwudG90YWwgLSAxKSAvLyAxIGFjdGlvbiBhbHJlYWR5IHNwZW5kIGZvciBza2lsbCBjaGVja1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBhc2tSb2xsT2JzdGFjbGVEYW1hZ2UgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnBsYXllckFjdGlvbkRlZmluZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxPYnN0YWNsZURhbWFnZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwgPSBuZXcgUm9sbCh0aGlzLnVzZWRXZWFwb24/LmRhbWFnZSlcbiAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbClcbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBMaXN0IGFsbCBjaGFuZ2VzXG4gIGxpc3RDaGFuZ2VzICh2YWxpZGF0ZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGlmZiA9IHtcbiAgICAgIG9ic3RhY2xlOiB7fSxcbiAgICAgIHBsYXllcjoge30sXG4gICAgICBjaGFuZ2VzOiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBuYW1lcyA9IHtcbiAgICAgIGJhcnJpZXI6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXG4gICAgICBoYXphcmQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXG4gICAgICBoYXNIaXRQb2ludHM6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSxcbiAgICAgIEhpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpLFxuICAgICAgaGFzQWN0aW9uQ29zdDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSxcbiAgICAgIGZhaWxlZEFjdGlvbkNvc3Q6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3Rpb25Db3N0JyksXG4gICAgICBoYXNEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodEJhY2snKSxcbiAgICAgIGZhaWxlZENoZWNrRGFtYWdlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uRGFtYWdlJyksXG4gICAgICBjaGVja05hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGVjaycpLFxuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5hbWUnKVxuICAgIH1cblxuICAgIGlmICh2YWxpZGF0ZSAmJiAhdGhpcy5kYXRhLnZhbGlkYXRpb24pIHtcbiAgICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uID0ge31cbiAgICB9XG5cbiAgICBjb25zdCBuZXdPYnN0YWNsZSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIHRoaXMub2JzdGFjbGUsXG4gICAgICB0aGlzLmRhdGEub2JzdGFjbGVcbiAgICApXG4gICAgLy8gY29uc3Qgb2xkT2JzdGFjbGUgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QodGhpcy5kYXRhLm9ic3RhY2xlLCB0aGlzLm9ic3RhY2xlKVxuXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhuZXdPYnN0YWNsZSkpIHtcbiAgICAgIC8vIGlmICgnYmFycmllcicgPT0ga2V5IHx8ICdoYXphcmQnID09IGtleSlcbiAgICAgIC8vIHtcbiAgICAgIC8vICAgZGlmZi5jaGFuZ2VzID0gdHJ1ZVxuICAgICAgLy8gICBkaWZmLm9ic3RhY2xlLnR5cGUgPSB7XG4gICAgICAvLyAgICAgb2xkOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICAgICB0aGlzLm9ic3RhY2xlLmJhcnJpZXIgPyAnQ29DNy5CYXJyaWVyJyA6ICdDb0M3LkhhemFyZCdcbiAgICAgIC8vICAgICApLFxuICAgICAgLy8gICAgIG5ldzogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgPyAnQ29DNy5CYXJyaWVyJyA6ICdDb0M3LkhhemFyZCdcbiAgICAgIC8vICAgICApLFxuICAgICAgLy8gICAgIGtleTogJ3R5cGUnLFxuICAgICAgLy8gICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJylcbiAgICAgIC8vICAgfVxuICAgICAgLy8gICBpZiAodmFsaWRhdGUpIHtcbiAgICAgIC8vICAgICB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uLnR5cGUgPSB0cnVlXG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH1cbiAgICAgIC8vIGVsc2VcbiAgICAgIC8vIHtcbiAgICAgIGlmIChcbiAgICAgICAgIShcbiAgICAgICAgICAobmV3T2JzdGFjbGVba2V5XSA9PT0gJycgJiYgdGhpcy5vYnN0YWNsZVtrZXldID09PSBudWxsKSB8fFxuICAgICAgICAgICghaXNOYU4oTnVtYmVyKG5ld09ic3RhY2xlW2tleV0pKSAmJlxuICAgICAgICAgICAgTnVtYmVyKG5ld09ic3RhY2xlW2tleV0pID09PSB0aGlzLm9ic3RhY2xlW2tleV0pXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBkaWZmLmNoYW5nZXMgPSB0cnVlXG5cbiAgICAgICAgZGlmZi5vYnN0YWNsZVtrZXldID0ge1xuICAgICAgICAgIG9sZDogdGhpcy5vYnN0YWNsZVtrZXldLFxuICAgICAgICAgIG5ldzogbmV3T2JzdGFjbGVba2V5XSxcbiAgICAgICAgICBuYW1lOiBuYW1lc1trZXldLFxuICAgICAgICAgIGtleVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YWxpZGF0ZSkgdGhpcy5kYXRhLnZhbGlkYXRpb25ba2V5XSA9IHRydWVcbiAgICAgIH1cbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGlmZlxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgY2FudmFzLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIFBJWEksIFRva2VuLCBUb2tlbkRvY3VtZW50LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDaGFzZU9ic3RhY2xlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQsIHNvcnRCeVJvbGVBbmREZXggfSBmcm9tICcuL3BhcnRpY2lwYW50LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHNcbiAgZ2V0IHBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3QgcExpc3QgPSBbXVxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAuZmlsdGVyKHAgPT4gIXAuY2hhc2VyKVxuICAgICAgLm1hcChwID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIH0pXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+IHAuY2hhc2VyKVxuICAgICAgLm1hcChwID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIH0pXG4gICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAvLyBwLmluZGV4ID0gcExpc3QubGVuZ3RoIC0gMVxuICAgICAgcC5hc3Npc3QgPSBbXVxuICAgICAgaWYgKHAuY2hhc2VyKSB7XG4gICAgICAgIHAuYXNzaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXG4gICAgICAgICAgLm1hcChjID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGMudXVpZCwgbmFtZTogYy5uYW1lIH1cbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5hc3Npc3QgPSBwcmV5c1xuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXG4gICAgICAgICAgLm1hcChjID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGMudXVpZCwgbmFtZTogYy5uYW1lIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY29uc3QgcGFydGljcGFudCA9IG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIC8vIHBhcnRpY3BhbnQubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24oIHBhcnRpY3BhbnQudXVpZCkgLy8gUmVjdXJzaXZpdHlcbiAgICAgIHBMaXN0LnB1c2gocGFydGljcGFudClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c09iamVjdCAoKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIH1cblxuICBnZXQgYWN0aXZlQWN0b3IgKCkge1xuICAgIGNvbnN0IHAgPSB0aGlzLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIGlmICghcCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChwLmRvY1V1aWQpIHtcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleShwLmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92ICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3ZcbiAgICApXG4gICAgcExpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzQnlJbml0aWF0aXZlICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYi5pbml0aWF0aXZlIC0gYS5pbml0aWF0aXZlXG4gICAgKVxuICAgIHBMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHByZXlzICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIXAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKSB8fCBbXVxuICB9XG5cbiAgZ2V0IGNoYXNlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZCkgfHwgW11cbiAgfVxuXG4gIGdldCBhbGxIYXZlVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShlID0+IGUuaGFzVmFsaWRNb3YpXG4gIH1cblxuICBnZXQgYWxsSGF2ZVNwZWVkUm9sbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmV2ZXJ5KHAgPT4gcC5zcGVlZENoZWNrPy5yb2xsZWQpXG4gIH1cblxuICBnZXRQYXJ0aWNpcGFudExvY2F0aW9uIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnNcblxuICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiB7XG4gICAgICBjb25zdCBscCA9IGwucGFydGljaXBhbnRzPy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgICByZXR1cm4gISFscFxuICAgIH0pXG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb25cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnREYXRhIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQpIHJldHVybiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShwYXJ0aWNpcGFudCkgLy8gVE9ETyA6IGNoZWNrIGlmIHdlIG5lZWQgdG8gZHVwbGljYXRlXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnQgKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50RGF0YSA9IHRoaXMuZ2V0UGFydGljaXBhbnREYXRhKHBhcnRpY2lwYW50VXVpZClcbiAgICBpZiAocGFydGljaXBhbnREYXRhKSByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudERhdGEpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG5leHRBY3RpdmVQYXJ0aWNpcGFudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUuZmluZChcbiAgICAgIHAgPT4gcC5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiAwXG4gICAgKVxuICB9XG5cbiAgZ2V0IHNsb3dlc3RQcmV5ICgpIHtcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgICA/LmZpbHRlcihwID0+IHAuaXNQcmV5KVxuICAgIGlmIChwcmV5cy5sZW5ndGggPiAwKSByZXR1cm4gcHJleXNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZmFzdGVzdENoYXNlciAoKSB7XG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgICA/LmZpbHRlcihwID0+IHAuaXNDaGFzZXIpXG4gICAgaWYgKGNoYXNlcnMubGVuZ3RoID4gMCkgcmV0dXJuIGNoYXNlcnMuc2xpY2UoLTEpLnBvcCgpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFjdHVhbFBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3Qgc2xvd2VzdFByZXkgPSB0aGlzLnNsb3dlc3RQcmV5XG4gICAgY29uc3QgZmFzdGVzdENoYXNlciA9IHRoaXMuZmFzdGVzdENoYXNlclxuICAgIGxldCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbmNsdWRlTGF0ZWNvbWVycyAmJiBzbG93ZXN0UHJleSkge1xuICAgICAgcExpc3QgPSBwTGlzdC5maWx0ZXIocCA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcC5pc1ByZXkgfHwgKHAuaXNDaGFzZXIgJiYgcC5hZGp1c3RlZE1vdiA+PSBzbG93ZXN0UHJleS5hZGp1c3RlZE1vdilcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluY2x1ZGVFc2NhcGVkICYmIGZhc3Rlc3RDaGFzZXIpIHtcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHAuaXNDaGFzZXIgfHwgKHAuaXNQcmV5ICYmIHAuYWRqdXN0ZWRNb3YgPD0gZmFzdGVzdENoYXNlci5hZGp1c3RlZE1vdilcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBzbG93ZXN0UGFydGljaXBhbnQgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92XG4gICAgaWYgKHBMaXN0Lmxlbmd0aCA+IDApIHJldHVybiBwTGlzdFswXVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBhcnRpY2lwYW50cyAobGlzdCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLmNsZWFuUGFydGljaXBhbnRMaXN0KGxpc3QpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudCAocGFydGljaWFudFV1aWQsIHVwZGF0ZURhdGEsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgY29uc3QgdXBkYXRlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodXBkYXRlRGF0YSlcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaWFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnRJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodXBkYXRlLnV1aWQpIGRlbGV0ZSB1cGRhdGUudXVpZFxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QocGFydGljaXBhbnRzW3BhcnRpY2lwYW50SW5kZXhdLCB1cGRhdGUsIHtcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgY2xlYW5QYXJ0aWNpcGFudExpc3QgKGxpc3QpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gbGlzdCB8fCBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgbGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgbGV0IGRhdGFcbiAgICAgIGlmIChwLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdfcGFydGljaXBhbnQnKSB7XG4gICAgICAgIGRhdGEgPSBwLmRhdGFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBwXG4gICAgICB9XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KHBhcnRpY2lwYW50c0RhdGEsIGRhdGEudXVpZClcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YS5wdXNoKGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnREYXRhTWlzc2luZycpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVtpbmRleF0gPSBkYXRhXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gcGFydGljaXBhbnRzRGF0YVxuICB9XG5cbiAgYXN5bmMgYXNzaXN0UGFydGljaXBhbnQgKFxuICAgIGFzc2lzdGFudFV1aWQsXG4gICAgYmVuZWZpY2lhcnlVdWlkLFxuICAgIHsgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgYXNzaXN0YW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkKVxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChiZW5lZmljaWFyeVV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IGFzc2lzdGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IGFzc2lzdGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBjb25zdCBiZW5lZmljaWFyeUluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IGJlbmVmaWNpYXJ5VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgaWYgKCFhc3Npc3RhbnQgfHwgIWJlbmVmaWNpYXJ5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudE5vdEZvdW5kJykpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKGJlbmVmaWNpYXJ5Lmhhc01heEJvbnVzRGljZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckJlbmVmaWNpYXJ5QXRNYXhCb251cycsIHtcbiAgICAgICAgICBuYW1lOiBiZW5lZmljaWFyeS5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKGFzc2lzdGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBhc3Npc3RhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgYXNzaXN0YW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKC0xKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVthc3Npc3RhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShhc3Npc3RhbnQuZGF0YSlcbiAgICB9XG5cbiAgICBiZW5lZmljaWFyeS5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbYmVuZWZpY2lhcnlJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIGJlbmVmaWNpYXJ5LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUJvbnVzRGljZSAocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50LmJvbnVzRGljZSA+PSBkaWNlTnVtYmVyKSBwYXJ0aWNpcGFudC5yZW1vdmVCb251c0RpY2UoKVxuICAgIGVsc2UgcGFydGljaXBhbnQuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBjYXV0aW91c0FwcHJvYWNoIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgeyB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQuaGFzTWF4Qm9udXNEaWNlKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yUGFydGljaXBhbnRBdE1heEJvbnVzJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQ6IHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKC0xKVxuICAgIH1cbiAgICBwYXJ0aWNpcGFudC5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGNvdW50LFxuICAgIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG5cbiAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucyhjb3VudClcblxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiAoe1xuICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgIHJlbmRlciA9IHRydWUsXG4gICAgaHRtbCA9IG51bGxcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgYWN0aXZlUGFydGljaXBhbnQgPSB0aGlzLm5leHRBY3RpdmVQYXJ0aWNpcGFudFxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbixcbiAgICAgIHJlbmRlcixcbiAgICAgIGh0bWxcbiAgICB9XG4gICAgaWYgKCFhY3RpdmVQYXJ0aWNpcGFudCkgcmV0dXJuIHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudCh1bmRlZmluZWQsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudChhY3RpdmVQYXJ0aWNpcGFudC51dWlkLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlLFxuICAgICAgaHRtbCA9IG51bGxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEocGFydGljaXBhbnRVdWlkLCB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgYWN0aXZlTG9jYXRpb246IGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICBodG1sXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShkYXRhVXBkYXRlLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBVdWlkID0gcGFydGljaXBhbnRVdWlkXG4gICAgLy8gICA/IHBhcnRpY2lwYW50VXVpZFxuICAgIC8vICAgOiB0aGlzLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZVswXT8udXVpZFxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGFVcGRhdGUgPSB7fVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBkZWxldGUgcC5hY3RpdmVcbiAgICAgIGlmIChwVXVpZCAmJiBwVXVpZCA9PT0gcC51dWlkKSBwLmFjdGl2ZSA9IHRydWVcbiAgICB9KVxuICAgIHBhcnRpY2lwYW50c0RhdGFVcGRhdGVbJ3N5c3RlbS5wYXJ0aWNpcGFudHMnXSA9IHBhcnRpY2lwYW50c1xuXG4gICAgY29uc3QgcGFydGljaXBhbnRMb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwVXVpZClcbiAgICBsZXQgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IG51bGxcbiAgICBpZiAocGFydGljaXBhbnRMb2NhdGlvbikge1xuICAgICAgaWYgKGFjdGl2YXRlTG9jYXRpb24pIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEoXG4gICAgICAgICAgcGFydGljaXBhbnRMb2NhdGlvbi51dWlkLFxuICAgICAgICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiwgaHRtbCB9XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0ge31cbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9XG4gICAgICAgICAgdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cbiAgICAgICAgICB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCwge1xuICAgICAgICAgICAgaHRtbFxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKHVuZGVmaW5lZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbnNEYXRhVXBkYXRlKSB7XG4gICAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVVwZGF0ZSxcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVxuICAgICAgKVxuICAgIH0gZWxzZSByZXR1cm4gcGFydGljaXBhbnRzRGF0YVVwZGF0ZVxuICB9XG5cbiAgYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBtb3ZlUGFydGljaXBhbnQgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENoYXNlT2JzdGFjbGVDYXJkKHtcbiAgICAgIGNoYXNlVXVpZDogdGhpcy51dWlkLFxuICAgICAgbG9jYXRpb25VdWlkLFxuICAgICAgbW92ZVBhcnRpY2lwYW50LFxuICAgICAgZm9yd2FyZDogbG9jYXRpb25VdWlkICE9PSB0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWRcbiAgICB9KVxuICAgIGNhcmQudG9NZXNzYWdlKClcblxuICAgIC8vIGNvbnN0IHRlc3QgPSBuZXcgdGVzdENhcmQoKVxuICAgIC8vIHRlc3QuaW5pdGlhbGl6ZSh7fSlcbiAgICAvLyB0ZXN0LnRvTWVzc2FnZSgpXG4gIH1cblxuICAvLyBIYW5kbGUgcm91bmRzXG5cbiAgYXN5bmMgcHJvZ3Jlc3NUb05leHRSb3VuZCAoeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgcC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICAgIHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICB0aGlzLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybih7IHJlbmRlciB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsU3RyaW5nKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGxTdHJpbmcpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAgIDogW11cbiAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAucm9sbFV1aWQgPT09IHJvbGwudXVpZClcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBkYXRhOiByb2xsU3RyaW5nLFxuICAgICAgICB0eXBlOiAnaW52b2tlJyxcbiAgICAgICAgbWV0aG9kOiAndXBkYXRlUm9sbCcsXG4gICAgICAgIGl0ZW06IHRoaXMudXVpZFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxuXG4gIC8vIGhhbmRsZSBsb2NhdGlvbnNcbiAgZ2V0IGxvY2F0aW9ucyAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zdGFydGVkXG4gICAgICA/IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cbiAgICAgIDogdGhpcy5pbml0VHJhY2tcbiAgICB0aGlzLnByb2Nlc3NMb2NhdGlvbnMobG9jYXRpb25zKVxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldExvY2F0aW9uRGF0YSAobG9jYXRpb25VdWlkLCB7IGR1cGxpY2F0ZURhdGEgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZURhdGFcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5sb2NhdGlvbnMpXG4gICAgICA6IHRoaXMubG9jYXRpb25zXG4gICAgcmV0dXJuIGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gIH1cblxuICBwcm9jZXNzTG9jYXRpb25zIChsb2NhdGlvbnMpIHtcbiAgICBpZiAoIWxvY2F0aW9ucz8ubGVuZ3RoKSByZXR1cm5cbiAgICBsb2NhdGlvbnNbMF0uZmlyc3QgPSB0cnVlXG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbG9jYXRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgY2xhc3NlcyA9IFtdXG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9uc1tpbmRleF1cbiAgICAgIGlmICghbG9jYXRpb24ubmFtZSkgY2xhc3Nlcy5wdXNoKCdlbXB0eScpXG4gICAgICBpZiAobG9jYXRpb24uYWN0aXZlKSBjbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgICBpZiAobG9jYXRpb24uaW5pdCAmJiAhdGhpcy5zdGFydGVkKSBjbGFzc2VzLnB1c2goJ2luaXQnKVxuICAgICAgbG9jYXRpb24uY3NzQ2xhc3NlcyA9IGNsYXNzZXMuam9pbignICcpXG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLmxhc3QgPSB0cnVlXG5cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiAhKHAgPT09IG51bGwpKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwucGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbSA9IGwucGFydGljaXBhbnRzW2ldIC8vIEluaXQgdHJhY2sgPSBvbmx5IHV1aWQsIHVwZGF0ZSBsb2NhdGlvbiBsaXN0IGNoYW5nZSBmb3IgdXVpZFxuXG4gICAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVHlwZSA6ICR7dHlwZW9mIGVsZW19YClcbiAgICAgICAgICBsZXQgcFxuICAgICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycgfHwgZWxlbSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgICAgcCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gZWxlbSA9PT0gcC51dWlkKSAvLyBSZXRyaWV2ZSBwYXJ0aWNpcGFudCBkYXRhIGZyb20gbGlzdC5cbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICAgICAgcCA9IHVuZGVmaW5lZCAvLyBwYXJ0aWNpcGFudCBpcyBhbHJlYWR5IHByb2Nlc3NlZC5cbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50QWxyZWFkeVByb2Nlc3NlZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHAgPSB1bmRlZmluZWRcblxuICAgICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzW2ldID0gbmV3IF9wYXJ0aWNpcGFudChwKSAvLyByZXBsYWNlIHV1aWQgd2l0aCBfcGFydGljaXBhbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcGFydGljaXBhbnRzLnB1c2goIG51bGwpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAnVW5kZWZpbmVkIHBhdGljaXBhbnQgd2hpbGUgcHJvY2Vzc2luZyBwYXJ0aWNpcGFudHMgYXJyYXknXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGwucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleCkgLy8gVE9ETyA6IHRlc3QgaWYgc29ydGluZyB3b3Jrc1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBnZXQgaW5pdFRyYWNrICgpIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QgfHxcbiAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IFtdIC8vICEhISEhISEgbG9jYXRpb25zIHZzIGluaXQgbG9jYXRpb25zICEhIVxuXG4gICAgY29uc3QgaW5pdCA9IHRoaXMuc3RhcnRpbmdMaW5lXG4gICAgbGV0IGxvY2F0aW9uc0luZGV4U3RhcnQsIGluaXRJbmRleFN0YXJ0LCBsb2NhdGlvbnNMZW5ndGhcbiAgICBpZiAoaW5pdC5sZW5ndGggPD0gMCkgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4ID49IGluaXQubGVuZ3RoKSB7XG4gICAgICBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gMFxuICAgIH0gZWxzZSBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gaW5pdC5sZW5ndGggLSB0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4XG5cbiAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8PSAwKSBpbml0SW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDw9IGluaXQubGVuZ3RoKSBpbml0SW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGluaXRJbmRleFN0YXJ0ID0gdGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCAtIGluaXQubGVuZ3RoXG5cbiAgICBpZiAobG9jYXRpb25zSW5kZXhTdGFydCA9PT0gMCkge1xuICAgICAgbG9jYXRpb25zTGVuZ3RoID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9XG4gICAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCArIGxvY2F0aW9uc0luZGV4U3RhcnRcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5sZW5ndGggIT09IDApIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDwgMCkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgaW5kZXggPCBNYXRoLmFicyh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4KTtcbiAgICAgICAgICBpbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGluaXQucHVzaCh7XG4gICAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhc2VMb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9uc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IGxvY2F0aW9uID0ge31cbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IFtdXG4gICAgICBpZiAoXG4gICAgICAgIGluZGV4ID49IGxvY2F0aW9uc0luZGV4U3RhcnQgJiZcbiAgICAgICAgaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0IDwgY2hhc2VMb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBsb2NhdGlvbiA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIGNoYXNlTG9jYXRpb25zLmxpc3RbaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0XVxuICAgICAgICApXG4gICAgICAgIGxvY2F0aW9uLmluaXQgPSBmYWxzZVxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA+PSBpbml0SW5kZXhTdGFydCAmJiBpbmRleCAtIGluaXRJbmRleFN0YXJ0IDwgaW5pdC5sZW5ndGgpIHtcbiAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChsb2NhdGlvbiwgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XSwge1xuICAgICAgICAgIG92ZXJ3cml0ZTogZmFsc2VcbiAgICAgICAgfSlcblxuICAgICAgICBpbml0W2luZGV4IC0gaW5pdEluZGV4U3RhcnRdLnBhcnRpY2lwYW50cz8uZm9yRWFjaChwID0+IHtcbiAgICAgICAgICBpZiAocCAhPSBudWxsKSBwYXJ0aWNpcGFudHMucHVzaChwKVxuICAgICAgICB9KVxuXG4gICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50c1xuICAgICAgfVxuICAgICAgbG9jYXRpb24uZmlyc3QgPSBmYWxzZVxuICAgICAgbG9jYXRpb24uZW5kID0gZmFsc2VcbiAgICAgIGxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uKVxuICAgIH1cblxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldCBzdGFydGluZ0xpbmUgKCkge1xuICAgIC8vIEdldCBwcmV5cyBhbmQgY2hlY2sgZm9yIGVzY2FwZWRcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMuc3lzdGVtLmluY2x1ZGVFc2NhcGVkXG4gICAgICA/IHRoaXMucHJleXNcbiAgICAgIDogdGhpcy5wcmV5cz8uZmlsdGVyKHAgPT4gIXAuZGF0YS5lc2NhcGVkKVxuICAgIC8vIEdldCBjaGFzZXJzXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuc3lzdGVtLmluY2x1ZGVMYXRlY29tZXJzXG4gICAgICA/IHRoaXMuY2hhc2Vyc1xuICAgICAgOiB0aGlzLmNoYXNlcnM/LmZpbHRlcihjID0+ICFjLmRhdGEuZXhjbHVkZWQpXG5cbiAgICAvLyBSZWN1cnNpdml0eSAhISB3aXRoIGdldFBhcnRpY2lwYW50TG9jYXRpb24gYW5kIGdldCBwYXJ0aWNpcGFudHNcblxuICAgIC8vIElmIG5vIHByZXkgb3Igbm8gY2hhc3NlclxuICAgIC8vIGlmICgwID09IGNoYXNlcnMubGVuZ3RoKSB7XG4gICAgLy8gICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIGNoYXNlcnMnKVxuICAgIC8vICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIH1cbiAgICAvLyBpZiAoMCA9PSBwcmV5cy5sZW5ndGgpIHtcbiAgICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gcHJleXMnKVxuICAgIC8vICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIH1cblxuICAgIC8vIEJ1aWxkIHN0YXJ0aW5nIHRyYWNrXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IFtdXG5cbiAgICBjb25zdCBjaGFzZXJzTWluTW92ID0gdGhpcy5maW5kTWluTW92KGNoYXNlcnMpXG4gICAgY29uc3QgY2hhc2Vyc01heE1vdiA9IHRoaXMuZmluZE1heE1vdihjaGFzZXJzKVxuICAgIGNvbnN0IHByZXlzTWluTW92ID0gdGhpcy5maW5kTWluTW92KHByZXlzKVxuICAgIGNvbnN0IHByZXlzTWF4TW92ID0gdGhpcy5maW5kTWF4TW92KHByZXlzKVxuXG4gICAgaWYgKGNoYXNlcnNNaW5Nb3YgIT09IC0xICYmIGNoYXNlcnNNYXhNb3YgIT09IC0xKSB7XG4gICAgICAvLyBBZGQgY2hhc2VycyB0byB0aGUgdHJhY2suXG4gICAgICBmb3IgKGxldCBtb3YgPSBjaGFzZXJzTWluTW92OyBtb3YgPD0gY2hhc2Vyc01heE1vdjsgbW92KyspIHtcbiAgICAgICAgLy8gRmluZCBhbGwgd2l0aCB0aGF0IG1vdlxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdCA9IGNoYXNlcnNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gbW92ID09PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIGNoYXNlVHJhY2sucHVzaChsb2NhdGlvbilcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHNwYWNlIGJldHdlZW4gY2hhc2VycyBhbmQgcHJleXMuXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zeXN0ZW0uc3RhcnRpbmdSYW5nZTsgaW5kZXgrKykge1xuICAgICAgICBjaGFzZVRyYWNrLnB1c2goe1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByZXlzTWluTW92ICE9PSAtMSAmJiBwcmV5c01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBwcmV5cyB0byB0aGUgdHJhY2suXG4gICAgICBmb3IgKGxldCBtb3YgPSBwcmV5c01pbk1vdjsgbW92IDw9IHByZXlzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gcHJleXNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gbW92ID09PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIGNoYXNlVHJhY2sucHVzaChsb2NhdGlvbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hhc2VUcmFja1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlTG9jYXRpb25zTGlzdCAobGlzdCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIC8vIFJlbW92ZSBhbGwgdW5uZWNlc3NhcnkgaXRlbXMgKGNzc0NsYXNzLCApXG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsaXN0KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLmxvY2F0aW9ucy5saXN0JzogdXBkYXRlZExpc3QgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB1cGRhdGVMb2NhdGlvbiAobG9jYXRpb25VdWlkLCB1cGRhdGVEYXRhLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgdXBkYXRlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodXBkYXRlRGF0YSlcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh1cGRhdGUudXVpZCkgZGVsZXRlIHVwZGF0ZS51dWlkXG4gICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0sIHVwZGF0ZSwge1xuICAgICAgb3ZlcndyaXRlOiB0cnVlXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgY2xlYW5Mb2NhdGlvbnNMaXN0IChsaXN0KSB7XG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShsaXN0KVxuICAgIGNvbnN0IHBhcnRpcGFudHNVdWlkQXJyYXkgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMubWFwKHAgPT4gcC51dWlkKVxuXG4gICAgdXBkYXRlZExpc3QuZm9yRWFjaChsID0+IHtcbiAgICAgIC8vIGRlbGV0ZSBsLmFjdGl2ZVxuICAgICAgZGVsZXRlIGwuY3NzQ2xhc3Nlc1xuICAgICAgZGVsZXRlIGwuZmlyc3RcbiAgICAgIGRlbGV0ZSBsLmxhc3RcbiAgICAgIGRlbGV0ZSBsLmVuZFxuICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwucGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiAhKHAgPT09IG51bGwpKSAvLyBSZW1vdmUgbnVsbCBlbGVtZW50c1xuICAgICAgICAgIC8vIFJlcGxhY2UgX1BhcnRpY2lwYW50cyBieSB1dWlkXG4gICAgICAgICAgaWYgKGwucGFydGljaXBhbnRzW2ldLmRhdGE/LnV1aWQpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzW2ldID0gbC5wYXJ0aWNpcGFudHNbaV0uZGF0YS51dWlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHVua293biBwYXJ0aWNpY3BhbnRzXG4gICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHV1aWQgPT5cbiAgICAgICAgICBwYXJ0aXBhbnRzVXVpZEFycmF5LmluY2x1ZGVzKHV1aWQpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHVwZGF0ZWRMaXN0XG4gIH1cblxuICBhc3luYyBpbnNlcnRMb2NhdGlvbiAoXG4gICAgaW5zZXJ0QXRVdWlkLFxuICAgIHsgc2hpZnQgPSAwLCBsb2NEYXRhID0ge30sIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgfSlcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGluc2VydEF0VXVpZCA9PT0gbC51dWlkKVxuICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IG5ld0xvY2F0aW9uSW5kZXggPSBsb2NhdGlvbkluZGV4ICsgc2hpZnRcbiAgICBpZiAobmV3TG9jYXRpb25JbmRleCA+IGxvY2F0aW9ucy5sZW5ndGgpIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IG5ld0xvY2F0aW9uID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUobG9jRGF0YSlcbiAgICBuZXdMb2NhdGlvbi51dWlkID0gdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKVxuICAgIG5ld0xvY2F0aW9uLmluaXQgPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uaW5pdFxuICAgIG5ld0xvY2F0aW9uLmFjdGl2ZSA9IHRydWVcbiAgICBsb2NhdGlvbnMuc3BsaWNlKG5ld0xvY2F0aW9uSW5kZXgsIDAsIG5ld0xvY2F0aW9uKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlTG9jYXRpb24gKHV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IHV1aWQgPT09IGwudXVpZClcbiAgICBsb2NhdGlvbnMuc3BsaWNlKGxvY2F0aW9uSW5kZXgsIDEpXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGluZGV4ID0gbG9jYXRpb25JbmRleCAtIDFcbiAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gMFxuICAgICAgbG9jYXRpb25zW2luZGV4XS5hY3RpdmUgPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVMb2NhdGlvbiAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKGxvY2F0aW9uVXVpZCwge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSwgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhICh7XG4gICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgaHRtbCA9IG51bGxcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICA6IFtdXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5sb2NhdGlvbnMubGlzdCddID0gdGhpcy5jbGVhbkxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuXG4gICAgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPSAwXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9IC0xXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsIGh0bWwgPSBudWxsIH0gPSB7fVxuICApIHtcbiAgICBpZiAoIWxvY2F0aW9uVXVpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEoe1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIDogW11cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgICAgaWYgKGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKSBsLmFjdGl2ZSA9IHRydWVcbiAgICB9KVxuICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5sb2NhdGlvbnMubGlzdCddID0gdGhpcy5jbGVhbkxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgIC8vIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGlmIChzY3JvbGxUb0xvY2F0aW9uKSB7XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID1cbiAgICAgICAgdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9XG4gICAgICAgIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24obG9jYXRpb25VdWlkLCB7IGh0bWwgfSlcbiAgICAgIC8vIGF3YWl0IHRoaXMuc2V0Y2hhc2VUcmFja1Njcm9sbCh7XG4gICAgICAvLyAgIGZyb206IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbixcbiAgICAgIC8vICAgdG86IHRoaXMuY2hhc2VUcmFja0FjdGl2ZUxvY2F0aW9uU2Nyb2xsUG9zaXRpb25cbiAgICAgIC8vIH0pXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICAvLyBMb2NhdGlvbnMgbmF2aWdhdGlvblxuICBnZXQgYWN0aXZlTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zLmZpbmQobCA9PiBsLmFjdGl2ZSlcbiAgICBpZiAoIWxvY2F0aW9uKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGxvY2F0aW9uLnBhcnRpY2lwYW50cz8ubGVuZ3RoKSBsb2NhdGlvbi5oYXNQYXJ0aWNpcGFudCA9IHRydWVcbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGdldCBwcmV2aW91c0xvY2F0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLmxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLmFjdGl2ZSlcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAwKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uc1thY3RpdmVJbmRleCAtIDFdXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBjb25zdCB0ZXN0ID0gYWN0b3IuZmluZChsb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSlcbiAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9yVGVzdCA9IHRlc3RcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uXG4gIH1cblxuICBnZXQgbmV4dExvY2F0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLmxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLmFjdGl2ZSlcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSB0aGlzLmxvY2F0aW9ucy5sZW5ndGggLSAxKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uc1thY3RpdmVJbmRleCArIDFdXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBjb25zdCB0ZXN0ID0gYWN0b3IuZmluZChsb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSlcbiAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9yVGVzdCA9IHRlc3RcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uXG4gIH1cblxuICBhc3luYyBsb2NhdG9yRHJvcHBlZCAoZGF0YSkge1xuICAgIGF3YWl0IHRoaXMuc2V0TG9jYXRpb25Db29yZGluYXRlcyhcbiAgICAgIGRhdGEubG9jYXRpb25VdWlkLFxuICAgICAgZGF0YS54LFxuICAgICAgZGF0YS55LFxuICAgICAgZGF0YS5zY2VuZVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHNldExvY2F0aW9uQ29vcmRpbmF0ZXMgKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB4LFxuICAgIHksXG4gICAgc2NlbmVJZCxcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmNvb3JkaW5hdGVzID0geyB4LCB5LCBzY2VuZTogc2NlbmVJZCB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGFzeW5jIGNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyAoeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGlmICh0aGlzLmFjdGl2ZUxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jbGVhckxvY2F0aW9uQ29vcmRpbmF0ZXModGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkLCB7XG4gICAgICAgIHJlbmRlclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjbGVhckxvY2F0aW9uQ29vcmRpbmF0ZXMgKGxvY2F0aW9uVXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgZGVsZXRlIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5jb29yZGluYXRlc1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnRIYXZlQWN0aXZlTG9jYXRpb25Ta2lsbCAoKXtcbiAgLy8gICBpZiggIXRoaXMuYWN0aXZlQWN0b3IpIHJldHVybiBmYWxzZVxuICAvLyAgIGlmKCB0aGlzLmFjdGl2ZUFjdG9yLmZpbmQoIHRoaXMuYWN0aXZlTG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpKSByZXR1cm4gdHJ1ZVxuICAvLyAgIHJldHVybiBmYWxzZVxuICAvLyB9XG5cbiAgLy8gSGFuZGxlIG1lY2hhbmljc1xuICBhc3luYyBjdXRUb1RoZUNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuYWxsSGF2ZVNwZWVkUm9sbCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RBbGxIYXZlU3BlZWRSb2xsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0dWFsUGFydGljaXBhbnRzPy5sZW5ndGggPCAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5lZWRNaW4yUGFydGljaXBhbnRzJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsSGF2ZVZhbGlkTW92KSB7XG4gICAgICAvLyBUT0RPIDogQ2hlY2sgZm9yIHNwZWVkIHJvbGwgPz9cblxuICAgICAgLy8gQ2FsY3VsYXRlIG1vdmVtZW50IGFjdGlvbnNcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICBjb25zdCBtaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YodGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMpXG4gICAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgLy8gcC5kYXRhLm1vdmVtZW50QWN0aW9uID0gMSArIChwLmFkanVzdGVkTW92IC0gbWluTW92KVxuICAgICAgICBwLmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhtaW5Nb3YpXG4gICAgICAgIHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgcC5ib251c0RpY2UgPSAwXG4gICAgICB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdCh0aGlzLmxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0KClcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXN0YXJ0ICgpIHtcbiAgICAvLyBhd2FpdCB0aGlzLmNsZWFuTG9jYXRpb25zKCkgLy9UcmFuc2ZlcnJlZCBpbiB1cGRhdGVMb2NhdGlvbkxpc3RcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9ucy5maWx0ZXIobCA9PiAhbC5pbml0KVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobG9jYXRpb25zW2ldLnBhcnRpY2lwYW50cykgbG9jYXRpb25zW2ldLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgICBpZiAobG9jYXRpb25zW2ldLmFjdGl2ZSkgZGVsZXRlIGxvY2F0aW9uc1tpXS5hY3RpdmVcbiAgICB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNpcGFudHNEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocGFydGljaXBhbnRzRGF0YVtpXS5hY3RpdmUpIGRlbGV0ZSBwYXJ0aWNpcGFudHNEYXRhW2ldLmFjdGl2ZVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnNldGNoYXNlVHJhY2tTY3JvbGwoMCwgMCwgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzRGF0YSwgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy5zdG9wKClcbiAgfVxuXG4gIGdldExvY2F0aW9uU2hpZnQgKGxvY2F0aW9uVXVpZCwgeyBza2lwID0gMSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBvcmlnaW5JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBjb25zdCBkZXN0aW5hdGlvbkluZGV4ID0gb3JpZ2luSW5kZXggKyBza2lwXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPj0gbG9jYXRpb25zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV1cbiAgICB9XG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPCAwKSByZXR1cm4gbG9jYXRpb25zWzBdXG4gICAgcmV0dXJuIGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XSAvLyBFUlJPUiBNT1ZFIDIgRk9SIFNLSVAgKzFcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZVBhcnRpY2lwYW50IChwYXJ0aWNpcGFudFV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZW1vdmVQYXJ0aWNpcGFudCcpLFxuICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZW1vdmVQYXJ0aWNpcGFudEhpbnQnLCB7XG4gICAgICAgIG5hbWU6IHAubmFtZVxuICAgICAgfSl9PC9wPmAsXG4gICAgICB5ZXM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgICApXG4gICAgICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50c0RhdGEgPSBwYXJ0aWNpcGFudHNEYXRhLmZpbHRlcihcbiAgICAgICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gcC51dWlkXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgbG9jYXRpb25zRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgIClcbiAgICAgICAgbG9jYXRpb25zRGF0YS5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKFxuICAgICAgICAgICAgICB1dWlkID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gdXVpZFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMobmV3UGFydGljaXBhbnRzRGF0YSwgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnNEYXRhLCB7IHJlbmRlciB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnQsXG4gICAge1xuICAgICAgcmVuZGVyID0gdHJ1ZSxcbiAgICAgIGxvY2F0aW9uVXVpZCA9IG51bGwsXG4gICAgICByZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsXG4gICAgICB1cGRhdGUgPSBmYWxzZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLmNoYXNlVXVpZCkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWRcbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS51cGRhdGUpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudC51dWlkKSB7XG4gICAgICBsZXQgdW5pcXVlID0gZmFsc2VcbiAgICAgIHdoaWxlICghdW5pcXVlKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgICAgIHVuaXF1ZSA9XG4gICAgICAgICAgcGFydGljaXBhbnRzRGF0YS5maWx0ZXIocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpLmxlbmd0aCA9PT0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1cGRhdGUpIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgcGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uXG4gICAgICB9XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVtpbmRleF0gPSBwYXJ0aWNpcGFudC5kYXRhXG4gICAgfSBlbHNlIHBhcnRpY2lwYW50c0RhdGEucHVzaChwYXJ0aWNpcGFudC5kYXRhKVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzRGF0YSwge1xuICAgICAgcmVuZGVyOiByZW5kZXIgJiYgIXRoaXMuc3RhcnRlZCAmJiAhdGhpcy5yZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9uc1xuICAgIH0pXG5cbiAgICBpZiAocmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLnNsb3dlc3RQYXJ0aWNpcGFudD8uYWRqdXN0ZWRNb3ZcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHAuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKHNsb3dlc3QpKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7XG4gICAgICAgIHJlbmRlcjogcmVuZGVyICYmICF0aGlzLnN0YXJ0ZWRcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGFydGVkICYmXG4gICAgICAhKHBhcnRpY2lwYW50LmRhdGEuZXNjYXBlZCB8fCBwYXJ0aWNpcGFudC5kYXRhLmV4Y2x1ZGVkKVxuICAgICkge1xuICAgICAgY29uc3QgbG9jYXRpb25zRGF0YSA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cblxuICAgICAgaWYgKGxvY2F0aW9uc0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yRW1wdHlMb2NhdGlvbnNMaXN0JylcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9uc0RhdGEuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIGxvY2F0aW9uSW5kZXggPSAwXG4gICAgICBpZiAoIWxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzID0gW11cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMuZmluZEluZGV4KFxuICAgICAgICAgIHAgPT4gcCA9PT0gcGFydGljaXBhbnQudXVpZFxuICAgICAgICApID09PSAtMVxuICAgICAgKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnQudXVpZClcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnNEYXRhLCB7IHJlbmRlciB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVkaXRQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHtcbiAgICAgIHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVQYXJ0aWNpcGFudCA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge31cblxuICAvKipcbiAgICogTW92ZSBhIHBhcnRpY2lwYW50IGZvciBhIG51bWJlciBvZiBsb2NhdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHBhcnRpY2lwYW50VXVpZCAgICAgVXVpZCBvZiBwYXJ0aWNpcGFudFxuICAgKiBAcGFyYW0geyp9IGxvY2F0aW9uTW92ZWQgICAgICAgICAgICAgICAgIE51bWJlciBvZiBsb2NhdGlvbnMgbW92cmVkXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgICAgICAgVG90YWwgbnVtYmVyIG9mIGxvY2F0aW9ucyBjcm9zc2VkXG4gICAqL1xuICBhc3luYyBtb3ZlUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBsb2NhdGlvbk1vdmVkLFxuICAgIHtcbiAgICAgIHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVQYXJ0aWNpcGFudCA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIC8vIGNvbnN0IHNlbGVjdG9yID0gYCNpdGVtLSR7dGhpcy5pZH0gLmNoYXNlLXRyYWNrYFxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYG1vdmVQYXJ0aWNpcGFudCA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpfWApXG4gICAgbGV0IG1vZGlmaWVkID0gZmFsc2VcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBvcmlnaW5JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PlxuICAgICAgbC5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKHBhcnRpY2lwYW50VXVpZClcbiAgICApXG4gICAgbGV0IGRlc3RpbmF0aW9uSW5kZXggPSBvcmlnaW5JbmRleCArIGxvY2F0aW9uTW92ZWRcbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA+IGxvY2F0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICBkZXN0aW5hdGlvbkluZGV4ID0gbG9jYXRpb25zLmxlbmd0aCAtIDFcbiAgICB9XG5cbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IDApIHtcbiAgICAgIGRlc3RpbmF0aW9uSW5kZXggPSAwXG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxNb3ZlID0gZGVzdGluYXRpb25JbmRleCAtIG9yaWdpbkluZGV4XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcblxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgICAgcGFydGljaXBhbnRVdWlkOiB0aGlzLnBhcnRpY2lwYW50VXVpZFxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCBNYXRoLmFicyh0b3RhbE1vdmUpKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudE5vdEVub3VnaE1vdmVtZW50Jywge1xuICAgICAgICAgICAgYXNzaXN0YW50VXVpZDogcGFydGljaXBhbnRVdWlkLFxuICAgICAgICAgICAgYWN0aW9uczogcGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoMCAtIE1hdGguYWJzKHRvdGFsTW92ZSkpXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHRvdGFsTW92ZSAhPT0gMCkge1xuICAgICAgYXdhaXQgdGhpcy5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKFxuICAgICAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgIGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XS51dWlkLFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGFjdGl2YXRlUGFydGljaXBhbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgICAgYWN0aXZhdGVMb2NhdGlvbixcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhY3RpdmF0ZUxvY2F0aW9uICYmICFhY3RpdmF0ZVBhcnRpY2lwYW50KSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdGl2YXRlTG9jYXRpb24obG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdLnV1aWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChtb2RpZmllZCAmJiByZW5kZXIpIGF3YWl0IHRoaXMuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgcmV0dXJuIHRvdGFsTW92ZVxuICB9XG5cbiAgYXN5bmMgbW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYW5pbWF0ZSA9IG51bGwsXG4gICAgICBtb3ZlVG9rZW4gPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcblxuICAgIC8vIEZpbmQgZGVzdGluYXRpb24gbG9jYXRpb24uXG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGlmICghZGVzdGluYXRpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gbW92ZSAke3BhcnRpY2lwYW50VXVpZH0uIExvY2F0aW9uICR7bG9jYXRpb25VdWlkfSB1bmtub3duYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRmluZCBvcmlnaW4gbG9jYXRpb25cbiAgICBjb25zdCBvcmlnaW4gPSBsb2NhdGlvbnMuZmluZChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcblxuICAgIGlmICghb3JpZ2luKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmluZCAke3BhcnRpY2lwYW50VXVpZH0gaW4gbG9jYXRpb25zYClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghZGVzdGluYXRpb24ucGFydGljaXBhbnRzKSBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMgPSBbXVxuICAgIGlmIChkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMuaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKSkgcmV0dXJuIC8vIG1vdmluZyBwYXJ0aWNwYW50IHRvIGEgbG9jYXRpb24gaGUgYWxyZWFkeSBvY2N1cGllc1xuICAgIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50VXVpZClcbiAgICAvLyBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMuc29ydChzb3J0QnlSb2xlQW5kRGV4KVxuXG4gICAgY29uc3Qgb2xkUGFydGljaXBhbnRzTGlzdCA9IG9yaWdpbi5wYXJ0aWNpcGFudHMuZmlsdGVyKFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHBcbiAgICApXG4gICAgb3JpZ2luLnBhcnRpY2lwYW50cyA9IG9sZFBhcnRpY2lwYW50c0xpc3RcblxuICAgIGlmIChtb3ZlVG9rZW4gJiYgZGVzdGluYXRpb24uY29vcmRpbmF0ZXMpIHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICBsZXQgcGFydGljcGFudERvY3VtZW50ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoXG4gICAgICAgIHBhcnRpY2lwYW50Py5kYXRhPy5kb2NVdWlkXG4gICAgICApXG4gICAgICAvLyBGaW5kIHRva2VuXG4gICAgICBpZiAocGFydGljcGFudERvY3VtZW50ICYmICEocGFydGljcGFudERvY3VtZW50IGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCB8fCBwYXJ0aWNwYW50RG9jdW1lbnQ/Lm9iamVjdCBpbnN0YW5jZW9mIFRva2VuKSkge1xuICAgICAgICBjb25zdCBmb3VuZFRva2VucyA9IGNhbnZhcy5zY2VuZS50b2tlbnMuZmlsdGVyKGQgPT4gZC5hY3RvckxpbmsgJiYgZC5hY3Rvcj8uaWQgPT09IHBhcnRpY3BhbnREb2N1bWVudC5pZClcbiAgICAgICAgaWYgKGZvdW5kVG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudCA9IGZvdW5kVG9rZW5zWzBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgcGFydGljcGFudERvY3VtZW50ICYmXG4gICAgICAgICEoXG4gICAgICAgICAgLyogcGFydGljcGFudERvY3VtZW50LmlzVG9rZW4gfHwgKi8gKFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50IGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCB8fFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Py5vYmplY3QgaW5zdGFuY2VvZiBUb2tlblxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTm8gdG9rZW4gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYWN0b3InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lICE9PSBnYW1lLnNjZW5lcy52aWV3ZWQudXVpZCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQ2F1dGlvbiB0aGUgc2NlbmUgaXMgbm90IHRoZSBhY3RpdmUgc2NlbmUnKVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0aWNwYW50RG9jdW1lbnQucGFyZW50Py51dWlkICE9PSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JUb2tlbk5vdE9uU2NlbmUnKVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzY2VuZSA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KFxuICAgICAgICAgICAgZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmVcbiAgICAgICAgICApXG4gICAgICAgICAgbGV0IHggPSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy54XG4gICAgICAgICAgY29uc3QgeSA9IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnlcbiAgICAgICAgICBsZXQgdGFyZ2V0UmVjdCA9IG5ldyBQSVhJLlJlY3RhbmdsZShcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5LFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC53aWR0aCxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3QuaGVpZ2h0XG4gICAgICAgICAgKS5ub3JtYWxpemUoKVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFtdXG4gICAgICAgICAgbGV0IGZvdW5kRnJlZVNwYWNlID0gZmFsc2VcbiAgICAgICAgICB3aGlsZSAoIWZvdW5kRnJlZVNwYWNlKSB7XG4gICAgICAgICAgICBjb25zdCBvdmVybGFwaW5nVG9rZW4gPSBzY2VuZS50b2tlbnMuZmluZCh0ID0+IHtcbiAgICAgICAgICAgICAgaWYgKHQuaWQgPT09IHBhcnRpY3BhbnREb2N1bWVudC5pZCkgcmV0dXJuIGZhbHNlIC8vIFlvdSBjYW4ndCBvdmVybGFwIHdpdGggeW91cnNlbGZcbiAgICAgICAgICAgICAgcmV0dXJuIHQub2JqZWN0LmJvdW5kcy5pbnRlcnNlY3RzKHRhcmdldFJlY3QpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKG92ZXJsYXBpbmdUb2tlbikge1xuICAgICAgICAgICAgICB4ID0gb3ZlcmxhcGluZ1Rva2VuLm9iamVjdC5ib3VuZHMucmlnaHQgKyAxXG4gICAgICAgICAgICAgIHRhcmdldFJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICB5LFxuICAgICAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3Qud2lkdGgsXG4gICAgICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC5oZWlnaHRcbiAgICAgICAgICAgICAgKS5ub3JtYWxpemUoKVxuICAgICAgICAgICAgfSBlbHNlIGZvdW5kRnJlZVNwYWNlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZS5wdXNoKHtcbiAgICAgICAgICAgIF9pZDogcGFydGljcGFudERvY3VtZW50LmlkLFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKCBwVXVpZCA9PntcbiAgICAgICAgICAvLyAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBVdWlkKVxuICAgICAgICAgIC8vICAgY29uc3QgcERvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBwPy5kYXRhPy5kb2NVdWlkKVxuICAgICAgICAgIC8vICAgaWYoIHBEb2MgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ICYmIHBEb2Mub2JqZWN0IGluc3RhbmNlb2YgVG9rZW4pe1xuICAgICAgICAgIC8vICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgICAgIC8vICAgICB1cGRhdGUucHVzaCh7XG4gICAgICAgICAgLy8gICAgICAgX2lkOiBwRG9jLmlkLFxuICAgICAgICAgIC8vICAgICAgIHg6eCxcbiAgICAgICAgICAvLyAgICAgICB5OnlcbiAgICAgICAgICAvLyAgICAgfSlcbiAgICAgICAgICAvLyAgICAgaWYoIHBEb2Mub2JqZWN0LndpZHRoKSB4ICs9IHBEb2Mub2JqZWN0LndpZHRoXG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfSlcbiAgICAgICAgICBjb25zdCBzaG93VG9rZW5Nb3ZlbWVudCA9XG4gICAgICAgICAgICB0eXBlb2YgYW5pbWF0ZSA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICAgID8gYW5pbWF0ZVxuICAgICAgICAgICAgICA6IHRoaXMuc3lzdGVtLnNob3dUb2tlbk1vdmVtZW50XG4gICAgICAgICAgYXdhaXQgcGFydGljcGFudERvY3VtZW50LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAgICdUb2tlbicsXG4gICAgICAgICAgICB1cGRhdGUsXG4gICAgICAgICAgICB7IGFuaW1hdGU6IHNob3dUb2tlbk1vdmVtZW50IH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgLy8gSGFuZGxlIHNjcm9sbGluZ1xuICBhc3luYyBzZXRjaGFzZVRyYWNrU2Nyb2xsICh7XG4gICAgZnJvbSA9IHVuZGVmaW5lZCxcbiAgICB0byA9IC0xLFxuICAgIHJlbmRlciA9IHRydWVcbiAgfSA9IHt9KSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7XG4gICAgICAgICdzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSc6XG4gICAgICAgICAgdW5kZWZpbmVkID09PSBmcm9tID8gdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIDogZnJvbSxcbiAgICAgICAgJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byc6XG4gICAgICAgICAgdW5kZWZpbmVkID09PSB0byA/IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiA6IHRvXG4gICAgICB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGdldCBjaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uICgpIHtcbiAgICBjb25zdCBodG1sID0gdGhpcy5zaGVldD8uX2VsZW1lbnRcbiAgICBpZiAoIWh0bWwpIHJldHVybiAtMVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcbiAgICAvLyBjb25zdCBzZWxlY3RvciA9IGAjaXRlbS0ke3RoaXMuaWR9IC5jaGFzZS10cmFja2BcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBEQVRBIDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcbiAgICAvLyByZXR1cm4gJCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KClcblxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYERBVEEgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoJyNpdGVtLVZOaHRxeEEyd0pKbldTdFQgLmNoYXNlLXRyYWNrJykuc2Nyb2xsTGVmdCgpfS5DaGFzZSB0cmFjayBvZmZzZXQ6ICR7Y2hhc2VUcmFjay5zY3JvbGxMZWZ0fSwgRG9jdW1lbnQgb2Zmc2V0OiR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2l0ZW0tVk5odHF4QTJ3SkpuV1N0VCcpLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpLnNjcm9sbExlZnR9YClcbiAgICByZXR1cm4gY2hhc2VUcmFjay5zY3JvbGxMZWZ0XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvZmZzZXQgcG9zaXRpb24gb2YgdGhlIGFjdGl2ZSBsb2NhdGlvblxuICAgKiB0aGUgY2VudGVyIG9mIHRoZSBhY3RpdmUgbG9jYXRpb24gd2lsbCBiZSBjZW50ZXJlZFxuICAgKiBpbiB0aGUgcGFyZW50LlxuICAgKi9cbiAgZ2V0IGNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0aXZlTG9jYXRpb24pIHJldHVybiAtMVxuICAgIHJldHVybiB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZClcbiAgfVxuXG4gIGdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uIChsb2NhdGlvblV1aWQsIHsgaHRtbCA9IG51bGwgfSkge1xuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gaHRtbCB8fCB0aGlzLnNoZWV0Py5fZWxlbWVudFxuICAgIGlmICghaHRtbEVsZW1lbnQgfHwgIWh0bWxFbGVtZW50WzBdKSByZXR1cm4gLTFcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbEVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVybiAtMVxuICAgIGNvbnN0IGFjdGl2ZUxvY2F0aW9uRWxlbWVudCA9IGNoYXNlVHJhY2sucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuY2hhc2UtbG9jYXRpb25bZGF0YS11dWlkPVwiJHtsb2NhdGlvblV1aWR9XCJdYFxuICAgIClcbiAgICBpZiAoIWFjdGl2ZUxvY2F0aW9uRWxlbWVudCkgcmV0dXJuIC0xXG4gICAgY29uc3QgbGVmdFNjcm9sbCA9XG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQub2Zmc2V0TGVmdCArXG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQuY2xpZW50V2lkdGggLyAyIC1cbiAgICAgIGNoYXNlVHJhY2suY2xpZW50V2lkdGggLyAyXG4gICAgcmV0dXJuIGxlZnRTY3JvbGwgPCAwID8gMCA6IE1hdGguZmxvb3IobGVmdFNjcm9sbClcbiAgfVxuXG4gIC8vIFNob3VsZCBiZSByZW1vdmVkXG4gIGZpbmRNaW5Nb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIGZpbmRNYXhNb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIC8vIFV0aWxpdGllc1xuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcbiAgICByZXR1cm4gbGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBnZXQgc3RhcnRlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdzdGFydGVkJylcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0ICgpIHtcbiAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcbiAgICBjb25zdCByZW1TaXplID0gTnVtYmVyKHJlbVN0cmluZy5yZXBsYWNlKCdweCcsICcnKSlcbiAgICBjb25zdCBwQ291bnQgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5sZW5ndGhcbiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplLCA0MCAqIHJlbVNpemUpXG4gICAgdGhpcy5zaGVldC5fdGFic1swXS5hY3RpdmUgPSAnc2V0dXAnXG4gICAgdGhpcy5zaGVldC5wb3NpdGlvbi53aWR0aCA9IHdpZHRoXG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnLCB0cnVlKVxuICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgfVxuXG4gIGFzeW5jIHN0b3AgKCkge1xuICAgIHJldHVybiB0aGlzLnVuc2V0RmxhZygnQ29DNycsICdzdGFydGVkJylcbiAgfVxuXG4gIGdlbmVyYXRlTmV3VXVpZCAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gIH1cblxuICBnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBpZiAoIXBhcnRpY2lwYW50LmFjdG9yKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuICAgIHBhcnRpY2lwYW50LmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4gbGlzdC5wdXNoKHMubmFtZSkpXG4gICAgcmV0dXJuIGxpc3RcbiAgfVxuXG4gIGdldCBhY3RpdmVBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgcGFydGljaWNwYW50RGF0YSA9IHRoaXMuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgaWYgKCFwYXJ0aWNpY3BhbnREYXRhKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MocGFydGljaWNwYW50RGF0YS51dWlkKVxuICB9XG5cbiAgZ2V0IGFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWxpc3QuaW5jbHVkZXMocy5uYW1lKSAmJlxuICAgICAgICAhcy5uYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAuaW5jbHVkZXMoYCgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpfSlgLnRvTG93ZXJDYXNlKCkpXG4gICAgICApIHtcbiAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICB9KSAvLyBUT0RPOiBSZW1vdmUgPz9cbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWN0b3IpIHtcbiAgICAgICAgcC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXMocy5uYW1lKSkgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBsaXN0LnNvcnQoSW50bC5Db2xsYXRvcigpLmNvbXBhcmUpXG4gIH1cblxuICBnZXQgYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnQgKCkge1xuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PiBsaXN0LnB1c2goYCR7Yy5sYWJlbH1gKSlcbiAgICBsaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gKVxuICAgIGxpc3QucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyl9YClcblxuICAgIGdhbWUuQ29DNy5za2lsbExpc3Q/LmZvckVhY2gocyA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICFsaXN0LmluY2x1ZGVzKHMubmFtZSkgJiZcbiAgICAgICAgIXMubmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKGAoJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKX0pYC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKSB7XG4gICAgICAgIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFjdG9yKSB7XG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0LmluY2x1ZGVzKHMubmFtZSkpIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gbGlzdC5zb3J0KEludGwuQ29sbGF0b3IoKS5jb21wYXJlKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHRoZSBkYXRhIG9mIGFsbCBwYXJhc2l0ZSBwYXJ0aWNpcGFudHMgaW4gbG9jYXRpb25zLlxuICAgKiBTaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAqL1xuICAvLyBhc3luYyBjbGVhbkxvY2F0aW9ucyAoKSB7XG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gIC8vICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gIC8vICAgICBjb25zdCBwYXJ0aXBhbnRzVXVpZEFycmF5ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLm1hcChwID0+IHAudXVpZClcbiAgLy8gICAgIGlmIChsLnBhcnRpY2lwYW50cykge1xuICAvLyAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcih1dWlkID0+XG4gIC8vICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxuICAvLyAgICAgICApXG4gIC8vICAgICB9XG4gIC8vICAgfSlcbiAgLy8gICB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NraWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gQ29DN1NraWxsLmd1ZXNzTmFtZVBhcnRzKGRhdGEubmFtZSlcbiAgICAgIGNvbnN0IHsgbmFtZSwgc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbiwgLi4ubmV3UHJvcGVydGllcyB9ID0gc2tpbGxcbiAgICAgIGRhdGEubmFtZSA9IG5hbWVcbiAgICAgIGRhdGEuc3lzdGVtIHx8PSB7fVxuICAgICAgY29uc3QgcHJvcGVydGllcyA9IHsgLi4uZGF0YS5zeXN0ZW0ucHJvcGVydGllcywgLi4ubmV3UHJvcGVydGllcyB9XG4gICAgICBkYXRhLnN5c3RlbSA9IHsgLi4uZGF0YS5zeXN0ZW0sIHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24sIHByb3BlcnRpZXMgfVxuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgc3RhdGljIGd1ZXNzTmFtZVBhcnRzIChza2lsbE5hbWUpIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICBjb21iYXQ6IGZhbHNlLFxuICAgICAgZmlnaHRpbmc6IGZhbHNlLFxuICAgICAgZmlyZWFybTogZmFsc2UsXG4gICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICBza2lsbE5hbWUsXG4gICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uOiAnJ1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKC9eKC4rKVxccypcXCgoW14pXSspXFwpJC8pXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBvdXRwdXQuc2tpbGxOYW1lID0gbWF0Y2hbMl0udHJpbSgpXG4gICAgICBvdXRwdXQuc3BlY2lhbCA9IHRydWVcblxuICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb24gPSBtYXRjaFsxXS50cmltKClcbiAgICAgIG91dHB1dC5zcGVjaWFsaXphdGlvbiA9IHNwZWNpYWxpemF0aW9uXG4gICAgICBvdXRwdXQubmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIG91dHB1dC5za2lsbE5hbWUgKyAnKSdcbiAgICAgIG91dHB1dC5maWdodGluZyA9IHNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgb3V0cHV0LmZpcmVhcm0gPSBzcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgb3V0cHV0LnJhbmdlZCA9IHNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmFuZ2VkU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgIG91dHB1dC5jb21iYXQgPSBvdXRwdXQuZmlnaHRpbmcgfHwgb3V0cHV0LmZpcmVhcm0gfHwgb3V0cHV0LnJhbmdlZFxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBnZXQgaGFzQWN0aXZlRWZmZWN0cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRWZmZWN0cy5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgYWN0aXZlRWZmZWN0cyAoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LmVmZmVjdHMpIHtcbiAgICAgIGNvbnN0IGVmZmVjdEtleUZ1bGwgPSBgc2tpbGwuJHt0aGlzLm5hbWV9YC50b0xvd2VyQ2FzZSgpXG4gICAgICBjb25zdCBlZmZlY3RLZXlTaG9ydCA9IGBza2lsbC4ke3RoaXMuc3lzdGVtLnNraWxsTmFtZX1gLnRvTG93ZXJDYXNlKClcbiAgICAgIGxldCBjaGFuZ2VzID0gdGhpcy5wYXJlbnQuZWZmZWN0cy5yZWR1Y2UoKGNoYW5nZXMsIGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGlzYWJsZWQgfHwgZS5pc1N1cHByZXNzZWQpIHJldHVybiBjaGFuZ2VzXG4gICAgICAgIHJldHVybiBjaGFuZ2VzLmNvbmNhdChcbiAgICAgICAgICBlLmRhdGEuY2hhbmdlcy5tYXAoYyA9PiB7XG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcbiAgICAgICAgICAgIGMuZWZmZWN0ID0gZVxuICAgICAgICAgICAgYy5wcmlvcml0eSA9IGMucHJpb3JpdHkgPz8gYy5tb2RlICogMTBcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSwgW10pXG4gICAgICBjaGFuZ2VzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KVxuICAgICAgY2hhbmdlcyA9IGNoYW5nZXMuZmlsdGVyKFxuICAgICAgICBlID0+XG4gICAgICAgICAgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gZWZmZWN0S2V5U2hvcnQgfHxcbiAgICAgICAgICBlLmtleS50b0xvd2VyQ2FzZSgpID09PSBlZmZlY3RLZXlGdWxsXG4gICAgICApXG4gICAgICByZXR1cm4gY2hhbmdlc1xuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIC8qKlxuICAqIFVuaXF1ZSBpZGVudGlmaWVyIHNob3VsZCBiZSB1c2VkIHRvIHN0b3JlIGFuZCBvYnRhaW4gaXRlbSB0byBhc3Nlc3MgaXRlbSB1bmlxdWVuZXNzLlxuICAqIEZvciBvbGQgaXRlbXMgd2l0aG91dCBpZCwgZmFsbGJhY2sgb2Ygc2tpbGxOYW1lIG1heSBzdGlsbCBiZSB1c2VkXG4gICogYnV0IGlmIHNraWxsIG5hbWUgaXMgbm90IHVuaXF1ZSBpdCB3aWxsIGNhdXNlIHByb2JsZW1zLlxuICAqL1xuICBnZXQgaXRlbUlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWVcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgc2NvcmUgdW5hZmZlY3RlZCBieSBhY3RpdmUgZWZmZWN0c1xuICAgKi9cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICBsZXQgdmFsdWUgPSAwXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIC8vIEZvciBhbiBhY3RvciB3aXRoIGV4cGVyaWVuY2Ugd2UgbmVlZCB0byBjYWxjdWxhdGUgc2tpbGwgdmFsdWVcbiAgICAgIHZhbHVlID0gdGhpcy5iYXNlXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWxcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb25cbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbilcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKVxuICAgICAgICA6IDBcbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlXG4gICAgICApIHtcbiAgICAgICAgdmFsdWUgKz0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIGFsbCBvdGhlcnMgYWN0b3Igd2Ugc3RvcmUgdGhlIHZhbHVlIGRpcmVjdGx5XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHNraWxsJ3MgdmFsdWUgYWZ0ZXIgYWN0aXZlIGVmZmVjdHMgaGF2ZSBiZWVuIGFwcGxpZWRcbiAgICovXG4gIGdldCB2YWx1ZSAoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcmVudD8uc3lzdGVtLnNraWxscz8uW2Ake3RoaXMuaXRlbUlkZW50aWZpZXJ9YF0/LnZhbHVlXG4gICAgcmV0dXJuIHZhbHVlIHx8IHRoaXMucmF3VmFsdWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVZhbHVlICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBkZWx0YSA9IHBhcnNlSW50KHZhbHVlKSAtIHRoaXMucmF3VmFsdWVcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgZGVsdGFcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUV4cGVyaWVuY2UgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIHBhcnNlSW50KHgpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIGdldCB2YWx1ZSAoKSB7XG4gIC8vICAgbGV0IHBWYWx1ZVxuICAvLyAgIGlmKCB0aGlzLnBhcmVudCl7XG5cbiAgLy8gICB9XG4gIC8vICAgY29uc3QgdmFsdWUgPSBzdXBlci52YWx1ZVxuICAvLyAgIGxldCB1cGRhdGVkID0gdmFsdWVcbiAgLy8gICBmb3IgKGNvbnN0IGNoYW5nZSBvZiB0aGlzLmFjdGl2ZUVmZmVjdHMpIHtcbiAgLy8gICAgIGNvbnN0IG1vZGlmaWVyID0gTnVtYmVyLmZyb21TdHJpbmcoY2hhbmdlLnZhbHVlKVxuICAvLyAgICAgaWYgKCFpc05hTihtb2RpZmllcikpIHtcbiAgLy8gICAgICAgY29uc3QgbW9kZXMgPSBDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTXG4gIC8vICAgICAgIHN3aXRjaCAoY2hhbmdlLm1vZGUpIHtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLkFERDpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgKz0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5NVUxUSVBMWTpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgPSBNYXRoLnJvdW5kKHVwZGF0ZWQgKiBtb2RpZmllcilcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5PVkVSUklERTpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLlVQR1JBREU6XG4gIC8vICAgICAgICAgICBpZiAobW9kaWZlciA+IHVwZGF0ZWQpIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLkRPV05HUkFERTpcbiAgLy8gICAgICAgICAgIGlmIChtb2RpZmVyIDwgdXBkYXRlZCkgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIGlmICghaXNOYU4odXBkYXRlZCkgJiYgdXBkYXRlZCAhPSB2YWx1ZSkge1xuICAvLyAgICAgaWYgKHVwZGF0ZWQgPCAwKSB1cGRhdGVkID0gMFxuICAvLyAgICAgcmV0dXJuIHVwZGF0ZWRcbiAgLy8gICB9IHJldHVybiB2YWx1ZVxuICAvLyB9XG59XG4iLCJpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9yLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1ZlaGljbGUgZXh0ZW5kcyBDb0NBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvamVlcC5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBnZXQgcmF3QnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIGNvbnN0IGJ1aWxkID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4oYnVpbGQpID8gbnVsbCA6IGJ1aWxkXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gbnVsbCB8fFxuICAgICAgdW5kZWZpbmVkID09PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgfHxcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gJydcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWVcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgfVxuICAgIGNvbnN0IGhwID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50KVxuICAgIHJldHVybiBpc05hTihocCkgPyBudWxsIDogaHBcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGdldCByYXdIcE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA+IHRoaXMuYnVpbGQpIHZhbHVlID0gdGhpcy5idWlsZFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCByYXdEYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGJcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgY29uc3QgZGIgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiPy52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4oZGIpID8gbnVsbCA6IGRiXG4gIH1cblxuICBnZXQgcmF3TW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3ZcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGNvbnN0IG1vdiA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubW92Py52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4obW92KSA/IG51bGwgOiBtb3ZcbiAgfVxuXG4gIGdldCBtcE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5tYXgpIHx8IDBcbiAgfVxuXG4gIGdldCByYXdNcE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubXBNYXhcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGllICovXG5cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZSBleHRlbmRzIERpZSB7XG4gIGNvbnN0cnVjdG9yICh0ZXJtRGF0YSkge1xuICAgIHRlcm1EYXRhLmZhY2VzID0gMTBcbiAgICBzdXBlcih0ZXJtRGF0YSlcbiAgfVxuXG4gIGdldCB0b3RhbCAoKSB7XG4gICAgY29uc3QgdG90YWwgPSBzdXBlci50b3RhbFxuICAgIHJldHVybiB0b3RhbCA9PT0gMTAgPyAwIDogdG90YWwgKiAxMFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICd0J1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4vZGVjYWRlci1kaWUuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZU90aGVyIGV4dGVuZHMgQ29DN0RlY2FkZXJEaWUge1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICdvJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUgKi9cbmNvbnN0IFNFVFRJTkdTID0ge1xuICBwdWxwUnVsZXM6IHtcbiAgICBuYW1lOiAnJyxcbiAgICBoaW50OiAnJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgaW5pdGlhdGl2ZVJ1bGU6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogJ2Jhc2ljJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYmFzaWM6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUJhc2ljJyxcbiAgICAgIG9wdGlvbmFsOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVPcHRpb25hbCdcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBydWxlID0+IF9zZXRJbml0aWF0aXZlT3B0aW9ucyhydWxlKVxuICB9LFxuICBkZXZlbG9wbWVudFJvbGxGb3JMdWNrOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2snLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIGFsbG93TXl0aG9zSGFyZGVuZWQ6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuYWxsb3dNeXRob3NIYXJkZW5lZFRpdGxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuYWxsb3dNeXRob3NIYXJkZW5lZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZURvdWJsZU1heEhlYWx0aDoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Eb3VibGVNYXhIZWFsdGguTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRvdWJsZU1heEhlYWx0aC5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRldmVsb3BtZW50Um9sbEx1Y2suTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRldmVsb3BtZW50Um9sbEx1Y2suSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlQXJjaGV0eXBlOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkFyY2hldHlwZS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuQXJjaGV0eXBlLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZU9yZ2FuaXphdGlvbjoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Pcmdhbml6YXRpb24uTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLk9yZ2FuaXphdGlvbi5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVUYWxlbnRzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLlRhbGVudHMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLlRhbGVudHMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRmFzdGVyUmVjb3Zlcnk6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRmFzdGVyUmVjb3ZlcnkuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5LkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZU1ham9yV291bmRzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVNYWpvcldvdW5kcy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlQWdlUGVuYWx0aWVzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVBZ2VQZW5hbHRpZXMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIG9wcG9zZWRSb2xsVGllQnJlYWtlcjoge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PcHBvc2VkUm9sbFRpZUJyZWFrZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PcHBvc2VkUm9sbFRpZUJyZWFrZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfVxufVxuXG5mdW5jdGlvbiBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMgKHJ1bGUpIHtcbiAgbGV0IGRlY2ltYWxzID0gMFxuICBzd2l0Y2ggKHJ1bGUpIHtcbiAgICBjYXNlICdvcHRpb25hbCc6XG4gICAgICBkZWNpbWFscyA9IDJcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYmFzaWMnOlxuICAgICAgZGVjaW1hbHMgPSAwXG4gICAgICBicmVha1xuICB9XG4gIENPTkZJRy5Db21iYXQuaW5pdGlhdGl2ZSA9IHtcbiAgICBmb3JtdWxhOiBudWxsLFxuICAgIGRlY2ltYWxzXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdHYW1lUnVsZVNldHRpbmdzIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRpdGxlOiAnU0VUVElOR1MuVGl0bGVSdWxlcycsXG4gICAgICBpZDogJ3J1bGVzLXNldHRpbmdzJyxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9zeXN0ZW0vcnVsZS1zZXR0aW5ncy5odG1sJyxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBvcHRpb25zW2tdID0ge1xuICAgICAgICB2YWx1ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCBrKSxcbiAgICAgICAgc2V0dGluZzogdlxuICAgICAgfVxuICAgICAgaWYgKGsubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XG4gICAgICAgIHB1bHBSdWxlc1tvcHRpb25zW2tdLnZhbHVlXSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgb3B0aW9ucy5wdWxwU2VsZWN0aW9uID0gcHVscFJ1bGVzLnRydWVcbiAgICAgID8gcHVscFJ1bGVzLmZhbHNlXG4gICAgICAgID8gJ3NvbWUnXG4gICAgICAgIDogJ2FsbCdcbiAgICAgIDogJ25vbmUnXG4gICAgcmV0dXJuIG9wdGlvbnNcbiAgfVxuXG4gIHN0YXRpYyByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCBrLCB2KVxuICAgIH1cbiAgICBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sXG4gICAgICAuZmluZCgnI3B1bHBSdWxlc1NlbGVjdCcpXG4gICAgICAub24oJ2NoYW5nZScsIGV2ZW50ID0+IHRoaXMub25DaGFuZ2VQdWxwU2VsZWN0KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ2xpY2tQdWxwKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnYnV0dG9uW25hbWU9cmVzZXRdJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uUmVzZXREZWZhdWx0cyhldmVudCkpXG4gIH1cblxuICBvbkNoYW5nZVB1bHBTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgdmFsID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS52YWwoKVxuICAgIGlmICh2YWwgPT09ICdub25lJyB8fCB2YWwgPT09ICdhbGwnKSB7XG4gICAgICAkKCcjcnVsZXMtc2V0dGluZ3MnKVxuICAgICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gJCh0aGlzKVxuICAgICAgICAgIGlmICh2YWwgPT09ICdub25lJykge1xuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIGZhbHNlKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25DbGlja1B1bHAgKGV2ZW50KSB7XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgJCgnI3J1bGVzLXNldHRpbmdzJylcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcbiAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgIHB1bHBSdWxlcy50cnVlID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHB1bHBSdWxlcy5mYWxzZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAkKCcjcHVscFJ1bGVzU2VsZWN0JykudmFsKFxuICAgICAgcHVscFJ1bGVzLnRydWUgPyAocHVscFJ1bGVzLmZhbHNlID8gJ3NvbWUnIDogJ2FsbCcpIDogJ25vbmUnXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgb25SZXNldERlZmF1bHRzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBmb3IgYXdhaXQgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3Jywgaywgdj8uZGVmYXVsdClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBkYXRhKSB7XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgZm9yIGF3YWl0IChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoU0VUVElOR1MpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGtleSwgZGF0YVtrZXldKVxuICAgICAgaWYgKGtleS5tYXRjaCgvXnB1bHBSdWxlLnsyLH0kLykpIHtcbiAgICAgICAgcHVscFJ1bGVzW2RhdGFba2V5XV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlcycsIHB1bHBSdWxlcy50cnVlICYmICFwdWxwUnVsZXMuZmFsc2UpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0FyY2hldHlwZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnc2tpbGxzJykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLWRlbGV0ZScpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnc2tpbGxzJykpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdza2lsbCcsIGNvbGxlY3Rpb25OYW1lID0gJ3NraWxscycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgbGV0IHVzZUNvQ0lEID0gMFxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgIH1cbiAgICAgIGNvbGxlY3Rpb24ucHVzaChEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogdGhpcy5pdGVtLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtSWQgPSBpdGVtLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGNvbnN0IENvQ0lkID0gaXRlbS5kYXRhKCdjb2NpZCcpXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYXJjaGV0eXBlLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcblxuICAgIGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgc2VsZWN0ZWRdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NcbiAgICApKSB7XG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgY29uc3QgY2hhcmFjTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ0hBUkFDLiR7a2V5LnRvVXBwZXJDYXNlKCl9YClcbiAgICAgICAgY29yZUNoYXJhY3RlcmlzdGljcy5wdXNoKGNoYXJhY05hbWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZFN1Z2dlc3RlZE9jY3VwYXRpb25zID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkU3VnZ2VzdGVkVHJhaXRzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnN1Z2dlc3RlZFRyYWl0cyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgfSlcbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCkge1xuICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmcgKz0gY29yZUNoYXJhY3RlcmlzdGljcy5qb2luKG9yU3RyaW5nKVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdWxwVGFsZW50cycpfTogJHtzaGVldERhdGEuZGF0YS5zeXN0ZW0udGFsZW50c31gXG4gICAgKVxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzUG9pbnRzJyl9OiAke3NoZWV0RGF0YS5kYXRhLnN5c3RlbS5ib251c1BvaW50c31gXG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2tTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9tYWluLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2l0ZW0nLCAnYm9vayddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuc3BlbGxzJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycuYm9keSddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcubmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5pbml0aWFsUmVhZGluZyA9IHRoaXMuaXRlbS5zeXN0ZW0uaW5pdGlhbFJlYWRpbmdcbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5pc093bmVyID0gdGhpcy5pdGVtLmlzT3duZXJcbiAgICBzaGVldERhdGEuc3BlbGxzTGVhcm5lZCA9IHRoaXMuc3BlbGxzTGVhcm5lZFxuICAgIHNoZWV0RGF0YS5leGhhdXN0ZWQgPSAoYXdhaXQgdGhpcy5pdGVtLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2VcbiAgICBzaGVldERhdGEuc3R1ZHlDb21wbGV0ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5LnByb2dyZXNzID09PSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLnNwZWxsTGlzdEVtcHR5ID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQ29udGVudCA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jb250ZW50LFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgZ2V0IHNwZWxsc0xlYXJuZWQgKCkge1xuICAgIGxldCBhbW91bnQgPSAwXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgaWYgKHNwZWxsLnN5c3RlbS5sZWFybmVkKSBhbW91bnQrK1xuICAgIH1cbiAgICByZXR1cm4gYCR7YW1vdW50fSAvICR7c3BlbGxzLmxlbmd0aH1gXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdEluaXRpYWxSZWFkaW5nKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRGVsZXRlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5lZGl0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuc3BlbGwtbmFtZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnRlYWNoLXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ2xpJykuZGF0YSgnaWQnKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRTcGVsbExlYXJuaW5nKGlkKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCdbbmFtZT1cInN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcIl0nKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdyZXNldCcsIHZhbHVlKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjaW5jcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2luY3JlYXNlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2RlY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdkZWNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnYWRkJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmNoYW5nZS1vdGhlci1nYWlucycpLmNoYW5nZShldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnY2hhbmdlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI3JlZG8tZnVsbC1zdHVkeScpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5yZWRvRnVsbFN0dWR5KClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdyZW1vdmUnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNwZWxsRGV0YWlsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygnbGknKS5kYXRhKCdpbmRleCcpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5zcGVsbERldGFpbChpbmRleClcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkZWxldGUgYSBzcGVsbCBvbiB0aGUgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRlbGV0ZSAoZXZlbnQpIHtcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSByZXR1cm5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnNwZWxscylcbiAgICAgIDogW11cbiAgICBpZiAoaW5kZXggPj0gMCkgc3BlbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogc3BlbGxzIH0pXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZHJhZ3MgYW4gaXRlbSB0byB0aGUgc2hlZXRcbiAgICogRmlsdGVycyBvbmx5ICdzcGVsbCcgaXRlbXMgYW5kIGluc2VydHMgdGhlbSBpbiBhIEB0eXBlIHtBcnJheX1cbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NwZWxsJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBzcGVsbHMgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFbJ3NraWxsJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkgY29udGludWVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdzcGVsbCcpIHtcbiAgICAgICAgc3BlbGxzLnB1c2goaXRlbSlcbiAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnICYmIHRoaXMuaXRlbS5zeXN0ZW0udHlwZS5vdGhlcikge1xuICAgICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKG51bGwsICdhZGQnLCB7IG5hbWU6IGl0ZW0ubmFtZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0uYWRkU3BlbGxzKHNwZWxscylcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGNoZWNrYm94ZXMgZm9yIHR5cGUgd2hlbiB1c2VyIGNsaWNrcyBvbiB0aGUgY29ycmVzcG9uZGluZ1xuICAgKiBsYWJlbCwgbm90IHN1cmUgaWYgdGhpcyB3b3JrcyBvbiBlbmdpbmVzIG90aGVyIHRoYW4gVjhcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge2pRdWVyeS5FdmVudH0gY2xpY2tcbiAgICovXG4gIG1vZGlmeVR5cGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHJldHVybiB0b2dnbGVTd2l0Y2gucHJldigpLnRyaWdnZXIoJ2NsaWNrJylcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZnkgSXRlbSBkYXRhIGJhc2VkIG9uIHVzZXIgaW50ZXJhY3Rpb25zIHdpdGggdGhlIG90aGVyIHNraWxsXG4gICAqIGdhaW5zIHRhYmxlIG9uIGRldGFpbHMgdGFiIG9uIHRoaXMgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ2FkZCcgfHwgJ2NoYW5nZScgfHwgJ3JlbW92ZSdcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5T3RoZXJzR2FpbnMgKGV2ZW50LCBtb2RlLCBvcHRpb25zID0ge30pIHtcbiAgICAvKiogTm8gbmVlZCB0byBjaGVjayBpZiB1c2VyIGlzIEdNIGJlY2F1c2Ugb25seSB0aGV5IGNhbiBzZWUgZGV0YWlscyB0YWIgKi9cbiAgICBsZXQgaW5kZXggPSBudWxsXG4gICAgbGV0IGVsZW1lbnQgPSBudWxsXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgICAgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ3RyJykuZGF0YSgnaW5kZXgnKVxuICAgICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xuICAgIH1cbiAgICBjb25zdCBza2lsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdhaW5zLm90aGVyc1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdhaW5zLm90aGVycylcbiAgICAgIDogW11cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGFkZCBhIG5ldyBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBza2lsbHMucHVzaCh7XG4gICAgICAgICAgLyoqIG5ldyBza2lsbCAqL1xuICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSB8fCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmV3U2tpbGxOYW1lJyksXG4gICAgICAgICAgLyoqIGRldmVsb3BtZW50IGJ5IGRlZmF1bHQsIHZhbHVlIGNhbiBhbHNvIGJlIDFkNiBvciAxZDEwICovXG4gICAgICAgICAgdmFsdWU6ICdkZXZlbG9wbWVudCdcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYW5nZSc6XG4gICAgICAgIC8qKiBVc2VyIGNoYW5nZWQgbmFtZSAoaW5wdXQpIG9yIHZhbHVlIChzZWxlY3QpIG9mIGEgc2tpbGwgb24gdGFibGUgKi9cbiAgICAgICAgc2tpbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICBuYW1lOiBlbGVtZW50LmlzKCdpbnB1dCcpID8gZWxlbWVudC52YWwoKSA6IHNraWxsc1tpbmRleF0ubmFtZSxcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5pcygnc2VsZWN0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS52YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gcmVtb3ZlIGEgc2tpbGwgb24gb3RoZXIgZ2FpbnMgdGFibGUgKi9cbiAgICAgICAgaWYgKGluZGV4ID49IDApIHNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5nYWlucy5vdGhlcnMnOiBza2lsbHMgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yU2hlZXQsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb250YWluZXJTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ3N0b3JhZ2UnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvc3RvcmFnZS1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA2NzIsXG4gICAgICBoZWlnaHQ6IDc2NSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdpdGVtcydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuYWN0b3IuaXRlbXMudG9PYmplY3QoKSB8fCBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBpdGVtcy5wdXNoKGl0ZW0udG9PYmplY3QoKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyBpdGVtcyB9KVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHt9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmVkaXRhYmxlID0gdGhpcy5pc0VkaXRhYmxlXG5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIGlmIChzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUsXG4gICAgICAgICAgICBpdGVtLnR5cGVcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXS5wdXNoKGl0ZW0pXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGl0ZW1UeXBlIGluIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbVR5cGVdLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5hbGxvd1VubG9jayA9XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2Fsd2F5cycgfHxcbiAgICAgIGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3dlYXBvbicpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLXRyYWRlJykuY2xpY2sodGhpcy5fb25UcmFkZUl0ZW0uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKHRoaXMuX29uSXRlbVN1bW1hcnkuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soYXN5bmMgZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpLCB7XG4gICAgICAgIHN0cmljdDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGl0ZW1Ub0RlbGV0ZS5kZWxldGUoKVxuICAgICAgbGkuc2xpZGVVcCgyMDAsICgpID0+IHRoaXMucmVuZGVyKGZhbHNlKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLWl0ZW0nKS5jbGljayhldiA9PiB7XG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubG9jaycpLmNsaWNrKHRoaXMuX29uTG9ja0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgfVxuXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXG4gICAgICBzY2VuZTogbnVsbCxcbiAgICAgIGFjdG9yVG86IHRoaXMuYWN0b3IuaWQsXG4gICAgICBpdGVtOiBpdGVtLmlkXG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuPy5hY3Rvcikge1xuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICB9XG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZS5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgdmlzaWJsZSA9XG4gICAgICAgICAgICB2aXNpYmxlIHx8XG4gICAgICAgICAgICB2ICE9PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZpc2libGVcbiAgICB9KVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnRlbnQgPVxuICAgICAgICBjb250ZW50ICsgJzxvcHRpb24gdmFsdWU9XCInICsgYWN0b3IuaWQgKyAnXCI+JyArIGFjdG9yLm5hbWUgKyAnPC9vcHRpb24+J1xuICAgIH1cbiAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICBjb250ZW50LFxuICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3Rmb3JtJykpXG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UuYWN0b3JUbyA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPjwvZGl2PicpXG5cbiAgICAgIGNvbnN0IGxhYmVscyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEubGFiZWxzKSB7XG4gICAgICAgIGxhYmVscy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsXCI+PHNwYW4gY2xhc3M9XCJsYWJlbC1uYW1lXCI+JHtwLm5hbWV9IDo8L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbC12YWx1ZVwiPiR7cC52YWx1ZX08L3NwYW4+PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKGxhYmVscylcblxuICAgICAgZGl2LmFwcGVuZChcbiAgICAgICAgJChgPGRpdiBjbGFzcz1cIml0ZW0tZGVzY3JpcHRpb25cIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnZhbHVlfTwvZGl2PmApXG4gICAgICApXG4gICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIF9vbkludmVudG9yeUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnbGknKS5zbGlkZVRvZ2dsZSgyMDApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEcmFnRHJvcCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRBY3RvclRvQ2hhc2UnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlciddLFxuICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiAzMDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5mb3JtLWNvbnRhaW5lcicsXG4gICAgICBwZXJtaXNzaW9uczogeyBkcm9wOiBnYW1lLnVzZXIuaXNHTSB9LFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCB0b2tlblNlbGVjdG9yRHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJhZ1NlbGVjdG9yOiAnLmNoYXNlLXRva2VuJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgIGRyYWdzdGFydDogZ2FtZS51c2VyLmlzR01cbiAgICAgIH0sXG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfVxuICAgIH0pXG4gICAgdG9rZW5TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXBhcnRpY2lwYW50JykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QgPSB7fVxuICAgICAgdGhpcy5fYWN0b3IgPSBudWxsXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5mb29kLWNoYWluJykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QuY2hhc2VyID0gIXRoaXMub2JqZWN0LmNoYXNlclxuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdbZGF0YS1hY3Rpb25dJykuY2xpY2sodGhpcy5fb25BY3Rpb24uYmluZCh0aGlzKSlcblxuICAgIC8vIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6ICdnZXRUb2tlbicsXG4gICAgICBhcHBJZDogdGhpcy5hcHBJZCxcbiAgICAgIGNhbGxCYWNrOiAnYWRkVG9rZW5Ub0NoYXNlJ1xuICAgIH1cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLm9iamVjdC5pbml0aWF0aXZlKSB7XG4gICAgICBjb25zdCBpbml0ID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZmluZChcbiAgICAgICAgYyA9PiBjLmtleSA9PT0gJ2RleCdcbiAgICAgIClcbiAgICAgIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBpbml0LmxhYmVsXG4gICAgICAvLyB0aGlzLm9iamVjdC5pbml0aWF0aXZlID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnXG4gICAgICAvLyApfSAoJHtpbml0LnNob3J0TmFtZX0pYFxuICAgIH1cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2spIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxuICAgICAgICBjID0+IGMua2V5ID09PSAnY29uJ1xuICAgICAgKVxuICAgICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgICAgbmFtZTogc3BlZWRDaGVjay5sYWJlbFxuICAgICAgfVxuICAgICAgLy8gdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgIC8vICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtcbiAgICAgIC8vICAgICBzcGVlZENoZWNrLnNob3J0TmFtZVxuICAgICAgLy8gICB9KWBcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlUGFydGljaXBhbnQoKVxuXG4gICAgLy8gY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3I/LmZpbmQoIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/Lm5hbWUpXG4gICAgLy8gaWYoIHNwZWVkQ2hlY2spe1xuICAgIC8vICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHNwZWVkQ2hlY2tcbiAgICAvLyB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lKVxuICAgICAgaWYgKHNwZWVkQ2hlY2spIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IHNwZWVkQ2hlY2sudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5zcGVlZENoZWNrUmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBkYXRhLnBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUgJiZcbiAgICAgICAgIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/LnNjb3JlXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IGRhdGEucGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLm9iamVjdC5pbml0aWF0aXZlICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGluaXRpYXRpdmUgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3QuaW5pdGlhdGl2ZSlcbiAgICAgIGlmIChpbml0aWF0aXZlKSB7XG4gICAgICAgIGRhdGEub2JqZWN0LmRleCA9IGluaXRpYXRpdmUudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5pbml0UmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgZGF0YS5vYmplY3QuZGV4ID0gZGF0YS5wYXJ0aWNpcGFudC5pbml0aWF0aXZlXG4gICAgfVxuXG4gICAgZGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBkYXRhLmNoYXNlID0gdGhpcy5jaGFzZVxuICAgIGRhdGEuZGF0YSA9IHRoaXMuZGF0YVxuXG4gICAgZGF0YS5vcHRpb25zTGlzdCA9IHt9XG4gICAgaWYgKHRoaXMuY2hhc2UpIHtcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCA9XG4gICAgICAgIHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0ID0gW11cbiAgICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChgJHtjLmxhYmVsfWApXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWBcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChzLm5hbWUpXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9jaGFzZSkge1xuICAgICAgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLm9iamVjdC5jaGFzZVV1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMub2JqZWN0LmRvY1V1aWQpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleSh0aGlzLm9iamVjdC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcywgZm9ybURhdGEpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkcm9wU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRyb3BEYXRhID0gSlNPTi5wYXJzZShkcm9wU3RyaW5nKVxuXG4gICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkcm9wRGF0YSlcblxuICAgIHRoaXMub2JqZWN0LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICAvLyBJZiBhY3RvciBpcyBjb250cm9sbGVkIGJ5IEdNIG9ubHkgd2UgYXNzdW1lIGhlIGlzIGEgY2hhc2VyXG4gICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICBpZiAodGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZykge1xuICAgICAgZGVsZXRlIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgYWRkVG9rZW5Ub0NoYXNlICh0b2tlbnMpIHtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5vYmplY3QuZG9jVXVpZCA9IHRva2Vuc1swXS5kb2N1bWVudD8udXVpZFxuICAgICAgLy8gSWYgYWN0b3IgaXMgY29udHJvbGxlZCBieSBHTSBvbmx5IHdlIGFzc3VtZSBoZSBpcyBhIGNoYXNlclxuICAgICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVG9rZW5JbmNvcnJlY3QnKSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdjaGFzZS1jYW5jZWwnOlxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXNlLWFkZCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG5cbiAgICAgICAgICBpZiAodGhpcy5jaGFzZS5zdGFydGVkKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICEocGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gJiYgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gPiAwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRG9lc05vdE1lZXRNaW5pbXVtUmVxVG9CZUFkZGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEub3ZlcnJpZGVNb3ZlbWVudEFjdGlvbikge1xuICAgICAgICAgICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5jaGFzZS5zbG93ZXN0UGFydGljaXBhbnRcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHBhcnRpY2lwYW50LmFkanVzdGVkTW92KSkge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50Lm1vdiA9IHNsb3dlc3QuYWRqdXN0ZWRNb3ZcbiAgICAgICAgICAgICAgfSAvKiogZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5tb3YgPVxuICAgICAgICAgICAgICAgICAgc2xvd2VzdC5hZGp1c3RlZE1vdiArIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uIC0gMVxuICAgICAgICAgICAgICB9ICovXG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLmFkZFBhcnRpY2lwYW50KHBhcnRpY2lwYW50LCB7XG4gICAgICAgICAgICBsb2NhdGlvblV1aWQ6IHRoaXMub2JqZWN0LmxvY2F0aW9uVXVpZCxcbiAgICAgICAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zOiB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCxcbiAgICAgICAgICAgIHVwZGF0ZTogdGhpcy5vYmplY3QudXBkYXRlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsLXNwZWVkLWNoZWNrJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICAgICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0NoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzU2tpbGwpIHtcbiAgICAgICAgICAgICAgcm9sbC5za2lsbCA9IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmXG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XG4gICAgICAgICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogcGFydGljaXBhbnQubmFtZSA/IHBhcnRpY2lwYW50Lm5hbWUgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikge1xuICAgICAgICAgICAgICByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMub2JqZWN0LCBwYXJ0aWNpcGFudC5kYXRhKVxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlUGFydGljaXBhbnQgKCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoIXRoaXMuZGF0YSkgdGhpcy5kYXRhID0ge31cbiAgICB0aGlzLm9iamVjdC5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5vYmplY3QuZXNjYXBlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25EZWx0YSA9IDBcblxuICAgIGlmICghdGhpcy5kYXRhLm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgIGNvbnN0IHNsb3dlc3RQcmV5ID0gdGhpcy5jaGFzZS5zbG93ZXN0UHJleVxuICAgICAgY29uc3QgZmFzdGVzdENoYXNlciA9IHRoaXMuY2hhc2UuZmFzdGVzdENoYXNlclxuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA8IHNsb3dlc3Q/LmFkanVzdGVkTW92KSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gdHJ1ZVxuICAgICAgICBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiA9IDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgcGFydGljaXBhbnQuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKHNsb3dlc3Q/LmFkanVzdGVkTW92KVxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzQ2hhc2VyKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzbG93ZXN0UHJleSAmJlxuICAgICAgICAgICF0aGlzLmNoYXNlLnN5c3RlbS5pbmNsdWRlTGFzdENvbW1lcnMgJiZcbiAgICAgICAgICBwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA8IHNsb3dlc3RQcmV5LmFkanVzdGVkTW92XG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5leGNsdWRlZEJlY2F1c2UgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vU2xvdycpXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5pc1ByZXkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZhc3Rlc3RDaGFzZXIgJiZcbiAgICAgICAgICAhdGhpcy5jaGFzZS5zeXN0ZW0uaW5jbHVkZUVzY2FwZWQgJiZcbiAgICAgICAgICBwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA+IGZhc3Rlc3RDaGFzZXIuYWRqdXN0ZWRNb3ZcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZXNjYXBlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb0Zhc3QnKVxuICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBpZiAoZGF0YS5kcm9wRGF0YSkge1xuICAgICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkYXRhLmRyb3BEYXRhKVxuICAgICAgaWYgKGRvY1V1aWQpIGRhdGEuZG9jVXVpZCA9IGRvY1V1aWRcbiAgICAgIGRlbGV0ZSBkYXRhLmRyb3BEYXRhXG4gICAgfVxuICAgIHJldHVybiBuZXcgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlcihkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgRHJhZ0Ryb3AsIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIH0gZnJvbSAnLi4vLi4vYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nLCAnY2hhc2UnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9jaGFzZS5odG1sJyxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6IDUwMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdwYXJ0aWNpcGFudHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG9wdGlvbnNcblxuICAgIC8vIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgIC8vIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuICdjb2M3Q2hhc2VTaGVldCdcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLnBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNPYmplY3RcbiAgICBzaGVldERhdGEucGFydGljaXBhbnRzQnlJbml0aWF0aXZlID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZVxuICAgIHNoZWV0RGF0YS5wcmV5cyA9IHRoaXMuaXRlbS5wcmV5c1xuICAgIHNoZWV0RGF0YS5jaGFzZXJzID0gdGhpcy5pdGVtLmNoYXNlcnNcblxuICAgIHNoZWV0RGF0YS5wcmV5c01pbk1vdiA9IHNoZWV0RGF0YS5wcmV5cy5sZW5ndGggPyBzaGVldERhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEucHJleXNNYXhNb3YgPSBzaGVldERhdGEucHJleXMubGVuZ3RoID8gc2hlZXREYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnNNaW5Nb3YgPSBzaGVldERhdGEuY2hhc2Vycy5sZW5ndGggPyBzaGVldERhdGEuY2hhc2Vycy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92ID0gc2hlZXREYXRhLmNoYXNlcnMubGVuZ3RoID8gc2hlZXREYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPCBzaGVldERhdGEucHJleXNNaW5Nb3YpIHtcbiAgICAgICAgcC50b29TbG93KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuaW5jbHVkZUluQ2hhc2UoKVxuICAgICAgfVxuICAgICAgcC5mYXN0ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLmNoYXNlcnNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWluTW92XG4gICAgfSlcblxuICAgIHNoZWV0RGF0YS5wcmV5cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPiBzaGVldERhdGEuY2hhc2Vyc01heE1vdikge1xuICAgICAgICBwLmVzY2FwZWQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICB9XG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEucHJleXNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5wcmV5c01pbk1vdlxuICAgIH0pXG5cbiAgICBzaGVldERhdGEubG9jYXRpb25zID0gdGhpcy5pdGVtLmxvY2F0aW9uc1xuICAgIHNoZWV0RGF0YS5hbGxIYXZlVmFsaWRNb3YgPSB0aGlzLmFsbEhhdmVWYWxpZE1vdlxuICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbiA9IHRoaXMuaXRlbS5hY3RpdmVMb2NhdGlvblxuICAgIGlmIChzaGVldERhdGEuYWN0aXZlTG9jYXRpb24pIHtcbiAgICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi50aXRsZSA9IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlc1xuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTG9jYXRpb25Db29yZGluYXRlJywge1xuICAgICAgICAgIHg6IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlcy54LFxuICAgICAgICAgIHk6IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlcy55XG4gICAgICAgIH0pXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRyYWdPbkNhbnZhcycpXG4gICAgfVxuICAgIHNoZWV0RGF0YS5wcmV2aW91c0xvY2F0aW9uID0gdGhpcy5pdGVtLnByZXZpb3VzTG9jYXRpb25cbiAgICBzaGVldERhdGEubmV4dExvY2F0aW9uID0gdGhpcy5pdGVtLm5leHRMb2NhdGlvblxuICAgIHNoZWV0RGF0YS5zdGFydGVkID0gdGhpcy5pdGVtLnN0YXJ0ZWRcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnQgKCkge1xuICAvLyAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcbiAgLy8gICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnQpXG4gIC8vIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnRMb2NhdGlvbiAoKSB7XG4gIC8vICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cykgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICAvLyB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBodG1sLmZpbmQoJy5jaGFzZS10cmFjaycpLnJlYWR5KGFzeW5jIGh0bWwgPT4gYXdhaXQgdGhpcy5fb25TaGVldFJlYWR5KGh0bWwpKVxuXG4gICAgLy8gSGFuZGxlIERyb3Byb3duXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bi1lbGVtZW50JylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLl9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkKGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmRyb3BidG4nKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgY29uc3QgZHJvcGRvd24gPSB0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duJylcbiAgICAgIGNvbnN0IGRyb3Bkb3duQ29udGVudCA9IGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICB9KVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgaHRtbC5vbignZGJsY2xpY2snLCAnLm9wZW4tYWN0b3InLCBDb0M3Q2hhdC5fb25PcGVuQWN0b3IuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGluLWxvY2F0aW9uJylcbiAgICAgIC5jb250ZXh0bWVudSh0aGlzLmNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcy5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcucC1zaWRlJykuY2xpY2sodGhpcy5fb25DaGFuZ2VTaWRlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25EZWxldGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXJvbGwnKS5jbGljayh0aGlzLl9vblJlc2V0Um9sbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1kcml2ZXInKS5jbGljayh0aGlzLl9vbkRlbGV0ZURyaXZlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1zaWduJykuY2xpY2sodGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcucm9sbC1wYXJ0aWNpcGFudCcpLmNsaWNrKHRoaXMuX29uUm9sbFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5uYW1lLWNvbnRhaW5lcicpLmNsaWNrKHRoaXMuX29uTG9jYXRpb25DbGljay5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcub2JzdGFjbGUtdHlwZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUeXBlQ2xpY2suYmluZCh0aGlzKSlcbiAgICAvLyBodG1sLmZpbmQoJy5vYnN0YWNsZS10b2dnbGUnKS5jbGljayh0aGlzLl9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy50b2dnbGUnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQtY29udHJvbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5jaGFzZS1jb250cm9sJykuY2xpY2sodGhpcy5fb25DaGFzZUNvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmxvY2F0aW9uLWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKHRoaXMuX29uTG9jYXRpb25Db250cm9sQ2xpY2suYmluZCh0aGlzKSlcbiAgICAvLyBodG1sXG4gICAgLy8gICAuZmluZCgnLm1vdmVtZW50LWFjdGlvbiAuZGVjcmVhc2UnKVxuICAgIC8vICAgLmNsaWNrKHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zLmJpbmQodGhpcywgLTEpKVxuICAgIC8vIGh0bWxcbiAgICAvLyAgIC5maW5kKCcubW92ZW1lbnQtYWN0aW9uIC5pbmNyZWFzZScpXG4gICAgLy8gICAuY2xpY2sodGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMuYmluZCh0aGlzLCAxKSlcblxuICAgIC8vIGh0bWxcbiAgICAvLyAuZmluZCgnLnBpbi1sb2NhdGlvbicpXG4gICAgLy8gLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0KGV2ZW50KSlcblxuICAgIGNvbnN0IHBpbkxvY2F0aW9uU2VsZWN0b3JEcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcmFnU2VsZWN0b3I6ICcucGluLWxvY2F0aW9uJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfVxuICAgIH0pXG4gICAgcGluTG9jYXRpb25TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLnBhcnRpY2lwYW50JyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3BQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIHBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgY29uc3QgbmV3UGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcubmV3LXBhcnRpY2lwYW50JyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgbmV3UGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBpZiAodGhpcy5pdGVtLnN0YXJ0ZWQpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFzZS1sb2NhdGlvbiAuY2hhc2UtcGFydGljaXBhbnQnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25DaGFzZVBhcnRpY2lwYW50Q2xpY2suYmluZCh0aGlzKSlcblxuICAgICAgY29uc3QgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICAgIGRyYWdTZWxlY3RvcjogJy5jaGFzZS1wYXJ0aWNpcGFudCcsXG4gICAgICAgIGRyb3BTZWxlY3RvcjogJy5jaGFzZS1sb2NhdGlvbicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyYWdvdmVyOiB0aGlzLl9vbkRyYWdFbnRlci5iaW5kKHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcbiAgICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7IGVkaXRvcnM6IHRoaXMuZWRpdG9ycyB9KVxuICAgIGxldCBkYXRhID0gZmQub2JqZWN0XG4gICAgaWYgKHVwZGF0ZURhdGEpIHtcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKVxuICAgIH1cblxuICAgIC8vIENoZWNrIHRoYXQgc3RhcnRpbmcgcG9zaXRpb24gaXMgbm90IG91dHNpZGUgb2YgY2hhc2UgcmFuZ2UuXG4gICAgaWYgKFxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCAmJlxuICAgICAgZGF0YS5zeXN0ZW0uc3RhcnRpbmdJbmRleCA+IHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgKSB7XG4gICAgICBkYXRhLnN5c3RlbS5zdGFydGluZ0luZGV4ID0gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzKSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHMgYXJyYXlcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cykpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSBrKVxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdQYXJ0aWNpcGFudCB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odilcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsLCBjbGVhbmVkKVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0gPSBvcmlnaW5hbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50c1xuICAgIH1cblxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xuICAgICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIC8vIEhhbmRsZSBsb2NhdGlvbnMgbGlzdFxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC51dWlkID09PSBrZXkpXG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkZWxldGUgZGF0YS5sb2NhdGlvbnNcbiAgICAgIGRhdGEuc3lzdGVtLmxvY2F0aW9ucyA9IHsgbGlzdDogbG9jYXRpb25zIH1cbiAgICB9XG4gICAgLy8gY29uc3QgcGFydGljaXBhbnRzID0gZGF0YS5zeXN0ZW0/LnBhcnRpY2lwYW50cztcbiAgICAvLyBpZiggcGFydGljaXBhbnRzKSBkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMgPSBPYmplY3QudmFsdWVzKCBwYXJ0aWNpcGFudHMpLm1hcCggcCA9PiBjbGVhbihwKSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGRhdGEpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIGFzeW5jIF9vblN1Ym1pdCguLi5hcmdzKSB7XG4gIC8vICBhd2FpdCBzdXBlci5fb25TdWJtaXQoLi4uYXJncyk7XG4gIC8vIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3Qgb3ZlcnJpZGUgPSB0YXJnZXQ/LmRhdGFzZXQ/Lm92ZXJyaWRlID09PSAndHJ1ZSdcbiAgICBpZiAodGFyZ2V0Py5uYW1lPy5pbmNsdWRlcygnLmhwJykpIHtcbiAgICAgIGNvbnN0IFssICwgdXVpZF0gPSB0YXJnZXQubmFtZS5zcGxpdCgnLicpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudCh1dWlkKVxuICAgICAgaWYgKHBhcnRpY2lwYW50ICYmIHBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRhcmdldC52YWx1ZSkpKSB7XG4gICAgICAgICAgYXdhaXQgcGFydGljaXBhbnQuYWN0b3Iuc2V0SHAoTnVtYmVyKHRhcmdldC52YWx1ZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG92ZXJyaWRlKSB7XG4gICAgICBjb25zdCBbLCB0eXBlLCB1dWlkLCBzdWJUeXBlLCBkYXRhXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlID09PSAncGFydGljaXBhbnRzJyAmJlxuICAgICAgICAhaXNOYU4oaW5kZXgpICYmXG4gICAgICAgIHN1YlR5cGUgPT09ICdzcGVlZC1jaGVjaydcbiAgICAgICkge1xuICAgICAgICBpZiAoZGF0YSA9PT0gJ25hbWUnKSB7XG4gICAgICAgICAgLy8gQ2hhbmdpbmcgbmFtZSB3aWxsIHJlbW92ZSBhbGwgb3RoZXIgcmVmICFcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgICAgICAgIDogW11cbiAgICAgICAgICBpZiAocGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrKSB7XG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLmlkXG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnR5cGVcbiAgICAgICAgICB9IGVsc2UgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrID0ge31cbiAgICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2submFtZSA9IHRhcmdldC52YWx1ZVxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNldFNjcm9sbCAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmVkaXRhYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaW5pdGlhbE9wZW5pbmcgPSBodG1sWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2luZG93LWFwcCcpXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVyblxuXG4gICAgbGV0IHN0YXJ0ID0gZGF0YS5kYXRhLnNjcm9sbD8uY2hhc2VUcmFjay5mcm9tXG4gICAgbGV0IGVuZCA9IGRhdGEuZGF0YS5zY3JvbGw/LmNoYXNlVHJhY2sudG9cbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3RhcnQgPSAwXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5kID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZW5kID0gLTFcbiAgICB9XG5cbiAgICBpZiAoaW5pdGlhbE9wZW5pbmcpIHtcbiAgICAgIGNvbnN0IHJlbVN0cmluZyA9ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKVxuICAgICAgY29uc3QgcmVtU2l6ZSA9IE51bWJlcihyZW1TdHJpbmcucmVwbGFjZSgncHgnLCAnJykpXG4gICAgICBpZiAoYXBwLml0ZW0uc3RhcnRlZCkge1xuICAgICAgICBjb25zdCBwQ291bnQgPSBhcHAuaXRlbS5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aFxuICAgICAgICBjb25zdCB3aWR0aCA9IChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplXG4gICAgICAgIGFwcC5hY3RpdmF0ZVRhYignc2V0dXAnKVxuICAgICAgICAvLyBhcHAuX3RhYnNbMF0uYWN0aXZlID0gJ3NldHVwJ1xuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSBNYXRoLm1heCh3aWR0aCwgNDAgKiByZW1TaXplKVxuICAgICAgICAvLyBodG1sLmNzcygnd2lkdGgnLCBgJHt3aWR0aH1weGApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSA0NSAqIHJlbVNpemVcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBhcHAuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oeyBodG1sIH0pIC8vIGh0bWwgaXMgbm90IHJlbmRlcmVkLCBlbGVtZW50IGhhdmUgc2l6ZSA9IDBcbiAgICAgIC8vIGlmIChlbmQgPiAwKSB7XG4gICAgICAvLyAgIHN0YXJ0ID0gMFxuICAgICAgLy8gfSBlbHNlIGlmIChzdGFydCA+IDApIHtcbiAgICAgIC8vICAgZW5kID0gc3RhcnRcbiAgICAgIC8vICAgc3RhcnQgPSAwXG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgY2hhc2VUcmFjay5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogc3RhcnQsXG4gICAgICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGVuZCAhPT0gLTEpIHtcbiAgICAgIGNoYXNlVHJhY2suc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IGVuZCxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIGF3YWl0IGFwcC5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IH0pXG4gIH1cblxuICBzdGF0aWMgb25DbG9zZSAoYXBwLCBodG1sKSB7XG4gICAgYXBwLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS50cmFja1Njcm9sbFBvc2l0aW9uJzogLTEgfSlcbiAgfVxuXG4gIC8vIGFzeW5jIF9vblNoZWV0UmVhZHkgKGh0bWwpIHtcbiAgLy8gICBjb25zdCB0cmFjayA9IGh0bWwuZmluZCgnLmNoYXNlLXRyYWNrJylcbiAgLy8gICBjb25zdCBlbGVtZW50ID0gJCh0cmFjaykuZmluZCgnLmFjdGl2ZScpXG5cbiAgLy8gICBjb25zdCBlbGVtZW50bGVmdCA9IGVsZW1lbnRbMF0ub2Zmc2V0TGVmdFxuICAvLyAgIGNvbnN0IGRpdldpZHRoID0gdHJhY2tbMF0uY2xpZW50V2lkdGhcbiAgLy8gICBsZXQgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IGVsZW1lbnRsZWZ0IC0gZGl2V2lkdGggLyAyXG4gIC8vICAgaWYgKGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPCAwKSBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gMFxuXG4gIC8vICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSB0aGlzLml0ZW0uc3lzdGVtLnRyYWNrU2Nyb2xsUG9zaXRpb25cbiAgLy8gICBpZiAoIXRyYWNrLmxlbmd0aCkgcmV0dXJuXG4gIC8vICAgaWYgKCFzY3JvbGxQb3NpdGlvbikgcmV0dXJuXG4gIC8vICAgY29uc3QgdHJhY2tFbGVtZW50ID0gdHJhY2tbMF1cbiAgLy8gICB0cmFja0VsZW1lbnQuc2Nyb2xsVG8oe1xuICAvLyAgICAgdG9wOiAwLFxuICAvLyAgICAgbGVmdDogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCxcbiAgLy8gICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcbiAgLy8gICB9KVxuXG4gIC8vICAgLy9UT0RPIDogY291bGRkIHVzZSBwYXJlbnQub2Zmc2V0VG9wIGV0IGNoaWxkLm9mZnNldFRvcCB0byBjZW50ZXIgdGhlIGFjdGl2ZSBlbGVtZW50XG5cbiAgLy8gICAvLyBjb25zdCBhY3RpdmUgPSBodG1sLmZpbmQoJy5uYW1lLWNvbnRhaW5lci5hY3RpdmUnKVxuICAvLyAgIC8vIGlmKCBhY3RpdmUpe1xuICAvLyAgIC8vICAgY29uc3QgZWxlbWVudCA9IGFjdGl2ZVswXVxuICAvLyAgIC8vICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7YmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcImVuZFwiLCBpbmxpbmU6IFwiY2VudGVyXCJ9KVxuICAvLyAgIC8vIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpXG4gIC8vICAgLy8gfVxuICAvLyAgIC8vIH0pXG4gIC8vIH1cblxuICBmaW5kUGFydGljaXBhbnRJbmRleCAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kTG9jYXRpb25JbmRleCAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRMb2NhdGlvbiAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmQocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcbiAgICByZXR1cm4gbGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50Jyk/LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgIGNvbnN0IGFzc2lzdGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5VXVpZCA9IHRhcmdldC5kYXRhc2V0LmJlbmVmaWNpYXJ5VXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hc3Npc3RQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkLCBiZW5lZmljaWFyeVV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcubG9jYXRpb24ub2JzdGFjbGUnKVxuICAgIC8vIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgLy8gY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAvLyBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RvZ2dsZScpXG4gICAgY29uc3QgZGF0YSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KHtcbiAgICAgIFt0b2dnbGVdOiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3dpdGNoZWQtb24nKVxuICAgIH0pXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC51dWlkID09PSBrZXkpXG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgIH1cbiAgfVxuXG4gIC8vIGFzeW5jIF9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2sgKGV2ZW50KSB7XG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAvLyAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxuICAvLyAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgLy8gICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZSA9ICFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVcbiAgLy8gICBpZiAoIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMpIHtcbiAgLy8gICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMgPSB7XG4gIC8vICAgICAgIGJhcnJpZXI6IHRydWVcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAvLyB9XG5cbiAgYXN5bmMgX29uT2JzdGFjbGVUeXBlQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxuICAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHt9XG4gICAgfVxuICAgIGNvbnN0IG9ic3RhY2xlID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlsc1xuICAgIGNvbnN0IHR5cGUgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXJyaWVyJykgPyAnYmFycmllcicgOiAnaGF6YXJkJ1xuICAgIGNvbnN0IGFjdGl2ZSA9IG9ic3RhY2xlW3R5cGVdXG4gICAgb2JzdGFjbGUuYmFycmllciA9IGZhbHNlXG4gICAgb2JzdGFjbGUuaGF6YXJkID0gZmFsc2VcbiAgICBvYnN0YWNsZVt0eXBlXSA9ICFhY3RpdmVcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhYWN0aXZlXG4gICAgLy8gaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JhcnJpZXInKSkge1xuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuYmFycmllclxuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXG4gICAgLy8gfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXphcmQnKSkge1xuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZFxuICAgIC8vIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIH1cblxuICBhc3luYyBfb25Mb2NhdGlvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBsVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVMb2NhdGlvbihsVXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ29udHJvbENsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGxVdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlTG9jYXRpb24obFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhZGQtYWZ0ZXInOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uaW5zZXJ0TG9jYXRpb24obFV1aWQsIHsgc2hpZnQ6IDEgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnYWRkLWJlZm9yZSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5pbnNlcnRMb2NhdGlvbihsVXVpZCwgeyBzaGlmdDogMCB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdhZGQtcGFydGljaXBhbnQnOlxuICAgICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZSh7XG4gICAgICAgICAgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCxcbiAgICAgICAgICBsb2NhdGlvblV1aWQ6IGxVdWlkLFxuICAgICAgICAgIGRyb3BEYXRhOiB7fVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oYExvY2F0aW9uICR7bFV1aWR9IENsaWNrZWQuIEFjdGlvbjogJHthY3Rpb259YClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnRDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBwVXVpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldD8udXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24nKSkgcmV0dXJuXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFwYXJ0aWNpcGFudFV1aWQpIHJldHVyblxuICAgIHN3aXRjaCAodGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkcmF3R3VuJzpcbiAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVQYXJ0aWNpcGFudEd1bihwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkZWNyZWFzZUFjdGlvbnMnOlxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygtMSwgZXZlbnQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpbmNyZWFzZUFjdGlvbnMnOlxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygxLCBldmVudClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21vdmVCYWNrd2FyZCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCAtMSwgeyByZW5kZXI6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21vdmVGb3J3YXJkJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIDEsIHsgcmVuZGVyOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhY3RpdmF0ZVBhcnRpY2lwYW50JzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgIGNhc2UgJ2JvbnVzRGljZSc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBkaWNlTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQuY291bnRcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlQm9udXNEaWNlKHBhcnRpY2lwYW50VXVpZCwgZGljZU51bWJlcilcbiAgICAgICAgICB0aGlzLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2F1dGlvdXNBcHByb2FjaCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5jYXV0aW91c0FwcHJvYWNoKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2VkaXRQYXJ0aWNpcGFudCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkID0gbG9jYXRpb24udXVpZFxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEudXBkYXRlID0gdHJ1ZVxuICAgICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHBhcnRpY2lwYW50LmRhdGEpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZVBhcnRpY2lwYW50JzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gIH1cblxuICBhc3luYyBfb25DaGFzZUNvbnRyb2xDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghbG9jYXRpb25VdWlkKSByZXR1cm5cbiAgICBzd2l0Y2ggKHRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnb2JzdGFjbGUtc2tpbGwtY2hlY2snOlxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtLmFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayhsb2NhdGlvblV1aWQpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zIChjb3VudCwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIXBhcnRpY2lwYW50VXVpZCkgcmV0dXJuXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcbiAgICBpZiAocGFydGljaXBhbnQuaGFzTWF4TXZ0QWN0aW9ucyAmJiBjb3VudCA+IDApIHJldHVyblxuICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKGNvdW50KVxuXG4gICAgLy8gY29uc3Qgc2hlZXQgPSB0YXJnZXQuY2xvc2VzdCgnLmNvYzcuaXRlbS5jaGFzZScpXG4gICAgLy8gY29uc3QgY2hhc2VUcmFjayA9IHNoZWV0LnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgLy8gaWYgKGNoYXNlVHJhY2spXG4gICAgLy8gICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAvLyAgICAgJ2RhdGEudHJhY2tTY3JvbGxQb3NpdGlvbic6IGNoYXNlVHJhY2suc2Nyb2xsTGVmdFxuICAgIC8vICAgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0uc2V0Y2hhc2VUcmFja1Njcm9sbCh7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cylcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldD8uYWN0aW9uXG4gICAgaWYgKCFhY3Rpb24pIHJldHVyblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdpbml0JzpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFpc05hTih0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCkgJiZcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbG9jYXRpb25zID0gQXJyYXkuYXBwbHkoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgQXJyYXkodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwpXG4gICAgICAgICAgKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXVpZDogZm91bmRyeS51dGlscy5yYW5kb21JRCgxNikgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgbG9jYXRpb25zWzBdLm5hbWUgPSAnU3RhcnQnXG4gICAgICAgICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLm5hbWUgPSAnRW5kJ1xuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2VIaW50Jyl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChbXSlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS5zdG9wKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2N1dDJjaGFzZSc6XG4gICAgICAgIGlmICh0aGlzLml0ZW0uYWxsSGF2ZVNwZWVkUm9sbCkge1xuICAgICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybUN1dDJDaGFzZScpfWAsXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkNvbmZpcm1DdXQyQ2hhc2VIaW50J1xuICAgICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLmN1dFRvVGhlQ2hhc2UoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RBbGxIYXZlU3BlZWRSb2xsJykpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncmVzdGFydCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2VIaW50J1xuICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0ucmVzdGFydCgpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25leHRSb3VuZCc6XG4gICAgICAgIGlmICh0aGlzLml0ZW0ubmV4dEFjdGl2ZVBhcnRpY2lwYW50KSB7XG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtTmV4dENoYXNlUm91bmQnKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5Db25maXJtTmV4dENoYXNlUm91bmRIaW50J1xuICAgICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB0aGlzLml0ZW0ucHJvZ3Jlc3NUb05leHRSb3VuZCgpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgaSA9IGEucXVlcnlTZWxlY3RvcignaS5pY29uJylcbiAgICBjb25zdCBkcmFnSWNvbiA9IGEucXVlcnlTZWxlY3RvcignLnBpbi1pbWFnZScpXG5cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGRyYWdJY29uLCAwLCBkcmFnSWNvbi5oZWlnaHQpXG5cbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSBhLmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgZGF0YSA9IHt9XG5cbiAgICBkYXRhLnR5cGUgPSAnbG9jYXRvcidcbiAgICBkYXRhLkNvQzdUeXBlID0gJ2NoYXNlJ1xuICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIGRhdGEubG9jYXRpb25VdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGRhdGEuZG9jVXVpZCA9IHRoaXMuaXRlbS51dWlkXG4gICAgZGF0YS5jYWxsQmFjayA9ICdsb2NhdG9yRHJvcHBlZCdcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuXG4gICAgLy8gY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWQsIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQgfVxuICAgIC8vIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcmFnRGF0YSA9IHsgdXVpZDogdGFyZ2V0LmRhdGFzZXQudXVpZCwgdHlwZTogJ3BhcnRpY2lwYW50JyB9XG4gICAgZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdEcm9wcGVkJylcbiAgICB0aGlzLl9vbkRyYWdMZWF2ZShkcmFnRXZlbnQpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5kYXRhc2V0LnV1aWRcblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdwYXJ0aWNpcGFudCcpIHtcbiAgICAgIGNvbnN0IG9sZExvY2F0aW9uID0gdGhpcy5maW5kTG9jYXRpb24obG9jYXRpb25VdWlkKVxuICAgICAgaWYgKG9sZExvY2F0aW9uKSB7XG4gICAgICAgIGlmIChvbGRMb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKGRhdGEudXVpZCkpIHJldHVyblxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihkYXRhLnV1aWQsIGxvY2F0aW9uVXVpZClcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoe1xuICAgICAgICBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkLFxuICAgICAgICBsb2NhdGlvblV1aWQsXG4gICAgICAgIGRyb3BEYXRhOiBkYXRhXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdPdmVyIChkcmFnRXZlbnQpIHtcbiAgICB0aGlzLl9vbkRyYWdFbnRlcihkcmFnRXZlbnQpXG4gIH1cblxuICBfb25EcmFnRW50ZXIgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmUgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdD8ucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB1dWlkID0gdGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgYXdhaXQgdGhpcy5hbHRlclBhcnRpY2lwYW50KGRhdGEsIHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZGF0YSA9IHsgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCB9XG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICAgIGRhdGEuZHJvcERhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgfVxuICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKGRhdGEpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50RWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudEVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnRzW2luZGV4XSlcbiAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIHBhcnRpY2lwYW50LmFjdG9yLnBsYXllcikge1xuICAgICAgICByb2xsLnN0YW5kYnkgPSB0cnVlXG4gICAgICAgIHJvbGwuc3RhbmRieVRleHQgPSAnQ29DNy5DaGFzZSdcbiAgICAgICAgcm9sbC5zdGFuZGJ5UmlnaHRJY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIF9vbkRyYWdFbnRlclBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIF9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZVNpZGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5uQ2RvQ3lvaXVkdGpyTmt1Jyk7XG4gICAgLy8gY29uc3QgaXRlbVRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ0l0ZW0ucGxJRW1OUlA2TzdQdmVOdi5yb2xsLnEyc0F6c0h0NEZzcXNkZkQnKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlciA9ICFwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgdXVpZCA9IGRyaXZlci5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBkZWxldGUgcGFydGljaXBhbnQuZG9jVXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25SZXNldFJvbGwgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnQgKGRhdGEsIHV1aWQpIHtcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZGF0YS50b2tlblV1aWQpIGRvY1V1aWQgPSBkYXRhLnRva2VuVXVpZFxuICAgIGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmRhdGE/Ll9pZCB8fCBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2tcbiAgICAvLyBzcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdzdHInXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGlmIChvbGRQYXJ0aWNpcGFudC5tb3YpIGRlbGV0ZSBvbGRQYXJ0aWNpcGFudC5tb3ZcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9sZFBhcnRpY2lwYW50LCBwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyAoKSB7XG4gICAgYXdhaXQgdGhpcy5pdGVtLmNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcygpXG4gIH1cblxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoZGF0YSkge1xuICAgIC8vIGxldCBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgIC8vICAgJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uUXlGVGlpRVppWDl2VGZpQydcbiAgICAvLyApXG4gICAgLy8gcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcbiAgICAvLyAgICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLnViTHpoZTU3Sk9USE1JcjknXG4gICAgLy8gKVxuICAgIC8vIHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoJ0FjdG9yLnVpWTNjYXBTVWVMTHZTTGknKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLlF5RlRpaUVaaVg5dlRmaUMuSXRlbS5Hck9IZUxYZmVFcGhzUk1aJylcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBcIlNjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uWXFzTlFQRGhGQ1BsU1JxSlwiKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIFwiU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ZcXNOUVBEaEZDUGxTUnFKLkl0ZW0uOEpFblRqSk9HRlhtbDR3a1wiKVxuXG4gICAgLy8gdHJ5IHRvIGZpbmQgYSB2YWxpZCBkb2N1bWVudFxuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkYXRhLnRva2VuVXVpZCkgZG9jVXVpZCA9IGRhdGEudG9rZW5VdWlkXG4gICAgZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleSB8fCBkYXRhLmlkXG4gICAgfVxuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRhdGEudXVpZFxuICAgIH0gZWxzZSBpZiAoZG9jVXVpZCkge1xuICAgICAgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxuICAgICAgaWYgKCFhY3RvciAmJiBkYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHt9XG4gICAgaWYgKGRvY1V1aWQpIHBhcnRpY2lwYW50LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIGlmIChkYXRhLmlkKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KGRhdGEuaWQpXG4gICAgICAgICAgaWYgKGl0ZW0/LmRhdGE/LnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vIFRPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrIGNvbiBub24gdmVoaWNsZSwgZHJpdmUgYXV0byBmb3IgdmVoaWNsZVxuICAgIC8vIHNwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ2NvbidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnNwZWVkQ2hlY2spIHtcbiAgICAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS52ZWhpY2xlKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6ICdjb24nLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuZHJpdmUtYXV0bycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBsZXQgdW5pcXVlID0gZmFsc2VcbiAgICB3aGlsZSAoIXVuaXF1ZSkge1xuICAgICAgcGFydGljaXBhbnQudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgICB1bmlxdWUgPVxuICAgICAgICBwYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKS5sZW5ndGggPT09IDBcbiAgICB9XG5cbiAgICBwYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVBhcnRpY2lwYW50R3VuIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuXG4gICAgcGFydGljaXBhbnQuaGFzQUd1blJlYWR5ID0gIXBhcnRpY2lwYW50Lmhhc0FHdW5SZWFkeVxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbiAob2JqKSB7XG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XG4gICAgY29uc3QgdHAgPSBmb3VuZHJ5LnV0aWxzLmdldFR5cGUob2JqW3Byb3BOYW1lXSlcbiAgICBpZiAodHAgPT09ICdPYmplY3QnKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gY2xlYW4ob2JqW3Byb3BOYW1lXSlcbiAgICB9XG5cbiAgICBpZiAodHAgPT09ICdPYmplY3QnICYmICFPYmplY3QuZW50cmllcyhvYmpbcHJvcE5hbWVdKS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIW9ialtwcm9wTmFtZV0ubGVuZ3RoKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gbnVsbFxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFpc05hTihOdW1iZXIob2JqW3Byb3BOYW1lXSkpKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gTnVtYmVyKG9ialtwcm9wTmFtZV0pXG4gICAgfVxuICB9XG4gIHJldHVybiBvYmpcbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0VjIgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2l0ZW0tc2hlZXRWMi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKHRoaXMuaXRlbS5lZmZlY3RzLCB7IHN0YXR1czogZmFsc2UgfSlcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5ICovXG5cbmltcG9ydCB7IENvQzdJdGVtU2hlZXRWMiB9IGZyb20gJy4vaXRlbS1zaGVldFYyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0IGV4dGVuZHMgQ29DN0l0ZW1TaGVldFYyIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDUwNlxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBKb3VybmFsU2hlZXQgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Sm91cm5hbFNoZWV0IGV4dGVuZHMgSm91cm5hbFNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNYWNyb0NvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNYWNyb0NvbmZpZyBleHRlbmRzIE1hY3JvQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBQbGF5bGlzdENvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQbGF5bGlzdENvbmZpZyBleHRlbmRzIFBsYXlsaXN0Q29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBSb2xsVGFibGVDb25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbFRhYmxlQ29uZmlnIGV4dGVuZHMgUm9sbFRhYmxlQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTY2VuZUNvbmZpZyBleHRlbmRzIFNjZW5lQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1NldHVwU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtc2VjdGlvbicpLmNsaWNrKHRoaXMuX29uUmVtb3ZlU2VjdGlvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgfVxuICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZVNlY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zKVxuICAgIGJpby5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucykgOiBbXVxuICAgIGJpby5wdXNoKG51bGwpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvU2VjdGlvbnMnOiBiaW8gfSlcbiAgfVxuXG4gIF9vbkFkZE1vbmV0YXJ5ICgpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSA6IFtdXG4gICAgdmFsdWVzLnB1c2goe1xuICAgICAgbmFtZTogJycsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBtYXg6IG51bGwsXG4gICAgICBjYXNoVHlwZTogMCxcbiAgICAgIGNhc2hWYWx1ZTogJycsXG4gICAgICBhc3NldHNUeXBlOiAwLFxuICAgICAgYXNzZXRzVmFsdWU6ICcnLFxuICAgICAgc3BlbmRpbmdUeXBlOiAwLFxuICAgICAgc3BlbmRpbmdWYWx1ZTogJydcbiAgICB9KVxuICAgIHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uUmVtb3ZlTW9uZXRhcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCB2YWx1ZXMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICB2YWx1ZXMuc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiB0aGlzLml0ZW0uZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NldHVwJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc2V0dXAuaHRtbCcsXG4gICAgICB3aWR0aDogNTY1LFxuICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG5cbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogdGhpcy5pdGVtLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuXG4gICAgc2hlZXREYXRhLnNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgIHNoZWV0RGF0YS5vdGhlckl0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIHNoZWV0RGF0YS5pdGVtc0xpc3RFbXB0eSA9IHNoZWV0RGF0YS5vdGhlckl0ZW1zLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlGb3JtYXRzKSB7XG4gICAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5Rm9ybWF0c1trZXldKSB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5zaG93Q3VycmVuY3lTeW1ib2wgPSBbJ2RlY2ltYWxMZWZ0JywgJ2RlY2ltYWxSaWdodCcsICdpbnRlZ2VyTGVmdCcsICdpbnRlZ2VyUmlnaHQnXS5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5VHlwZXMpIHtcbiAgICAgIGlmIChDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIubGVuZ3RoID09PSAwIHx8IENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KSkge1xuICAgICAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0ubmFtZSkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmJpb1NlY3Rpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYmlvU2VjdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10gPSBPYmplY3QudmFsdWVzKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMgfHwgW10pXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCddID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZFxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Py5uYW1lID09PSAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncylcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gYHN5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvJHt0aGlzLml0ZW0udHlwZX0tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmhhZE5vbkNoYXJhY3Rlck93bmVyID0gc2hlZXREYXRhLmhhc093bmVyICYmIHRoaXMuYWN0b3I/LnR5cGUgIT09ICdjaGFyYWN0ZXInXG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMoXG4gICAgICB0aGlzLml0ZW0uZWZmZWN0c1xuICAgIClcblxuICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IHZhbHVlLFxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgIHNoZWV0RGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICF0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZ1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk7XG4gIC8vICAgY29uc3QgZm9ybUF0dHJzID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpLmRhdGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XG4gIC8vICAgICBsZXQgayA9IHZbXCJrZXlcIl0udHJpbSgpO1xuICAvLyAgICAgaWYgKC9bXFxzXFwuXS8udGVzdChrKSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXCJBdHRyaWJ1dGUga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BhY2VzIG9yIHBlcmlvZHNcIik7XG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcbiAgLy8gICAgIG9ialtrXSA9IHY7XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHt9KTtcblxuICAvLyAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzIHdoaWNoIGFyZSBubyBsb25nZXIgdXNlZFxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XG4gIC8vICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGF0dHJpYnV0ZXNbYC09JHtrfWBdID0gbnVsbDtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZS1jb21iaW5lIGZvcm1EYXRhXG4gIC8vICAgZm9ybURhdGEgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkuZmlsdGVyKGUgPT4gIWVbMF0uc3RhcnRzV2l0aChcImRhdGEuYXR0cmlidXRlc1wiKSkucmVkdWNlKChvYmosIGUpID0+IHtcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHsgX2lkOiB0aGlzLm9iamVjdC5faWQsIFwiZGF0YS5hdHRyaWJ1dGVzXCI6IGF0dHJpYnV0ZXMgfSk7XG5cbiAgLy8gICAvLyBVcGRhdGUgdGhlIEl0ZW1cbiAgLy8gICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHNraWxsTmFtZSA9IGZvcm1EYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IGZvcm1EYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSB8fCB0aGlzLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBza2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdzcGVsbCddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFsnLmJvZHknXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLm5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5vcHRpb24nKS5jbGljayhldmVudCA9PiB0aGlzLm1vZGlmeVR5cGUoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnI2Nhc3Qtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uY2FzdChmYWxzZSlcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2Nhc3Qtc3BlbGwtaGlkZGVuJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5pdGVtLmNhc3QodHJ1ZSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTdGF0dXNTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzdGF0dXMnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zdGF0dXMuaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5pdGVtKSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLml0ZW0uZWZmZWN0cywgeyBzdGF0dXM6IGZhbHNlIH0pXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcuc3RhdHVzVHlwZVtrZXldID8gQ09DNy5zdGF0dXNUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1RhbGVudFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3RhbGVudCddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3RhbGVudC5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uc3lzdGVtLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy50YWxlbnRUeXBlW2tleV0gPyBDT0M3LnRhbGVudFR5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdpdGVtJywgJ3ZlaGljbGUnXSxcbiAgICAgIHdpZHRoOiA1NTUsXG4gICAgICBoZWlnaHQ6IDQyMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvdmVoaWNsZS5odG1sJyxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuYWN0b3InLCBkcm9wU2VsZWN0b3I6ICcuZHJvcFpvbmUnIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAvLyAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHBlcmltZW50YWxGZWF0dXJlc1dhcm5pbmcnKVxuICAgIC8vIClcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5wcm9wZXJ0aWVzID0gW11cbiAgICBpZiAodGhpcy5hY3Rvci5zeXN0ZW0ucHJvcGVydGllcy5hcm1lZCkge1xuICAgICAgc2hlZXREYXRhLnByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtZWRWZWhpY2xlJykpXG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmICh0eXBlb2YgZXhwYW5kZWQgPT09ICd1bmRlZmluZWQnKSBzaGVldERhdGEuZXhwYW5kZWQgPSB0cnVlXG4gICAgZWxzZSBzaGVldERhdGEuZXhwYW5kZWQgPSBleHBhbmRlZFxuICAgIGlmIChzaGVldERhdGEuZXhwYW5kZWQpIHtcbiAgICAgIHNoZWV0RGF0YS5vcHRpb25zLmhlaWdodCA9IDQyMFxuICAgIH0gZWxzZSBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSAnYXV0bydcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgLy8gICBpZiggdmFsdWUpIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3LmJvb2tUeXBlW2tleV0/Q09DNy5ib29rVHlwZVtrZXldOm51bGwpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucmVtb3ZlLWFybW9yJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5leHBhbmQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25Ub2dnbGVFeHBhbmQuYmluZCh0aGlzKSlcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcbiAgICAvLyBodG1sLm9uKCdkcm9wJywgKGV2ZW50KSA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5zcGVsbCAuc3BlbGwtbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxTdW1tYXJ5KGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSAnYXV0bycgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnLCAhZXhwYW5kZWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRBcm1vciAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxuICAgIClcbiAgICBsb2NhdGlvbnMucHVzaCh7IG5hbWU6IG51bGwsIHZhbHVlOiBudWxsIH0pXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVBcm1vciAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb24gPSBidXR0b24uY2xvc2VzdCgnLmFybW9yJylcbiAgICBjb25zdCBpbmRleCA9IGxvY2F0aW9uLmRhdGFzZXQuaW5kZXhcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IG51bGxcbiAgICApXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxuICAgIGxvY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdXZWFwb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTQ1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC10YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgcGF0aCA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zJ1xuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbCA9IFtdXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIGlmIChzaGVldERhdGEuaGFzT3duZXIpIHtcbiAgICAgIHNoZWV0RGF0YS5maXJlYXJtU2tpbGxzID0gdGhpcy5hY3Rvci5maXJlYXJtU2tpbGxzXG4gICAgICBzaGVldERhdGEuZmlnaHRpbmdTa2lsbHMgPSB0aGlzLmFjdG9yLmZpZ2h0aW5nU2tpbGxzXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIHByaWNlOiB0aGlzLml0ZW0uc3lzdGVtLnByaWNlW2tleV0gPz8gMCxcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAodGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHNoZWV0RGF0YS5fZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMudGhyb3duID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25TcGVjaWFsID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcud2VhcG9uLXByb3BlcnR5JykuY2xpY2sodGhpcy5fb25Qcm9wZXJ0eUNsaWNrLmJpbmQodGhpcykpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKi9cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgX29uUHJvcGVydHlDbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkocHJvcGVydHlJZClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENvbXBlbmRpdW0sIGdhbWUsIEhvb2tzLCBTZWFyY2hGaWx0ZXIgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5mdW5jdGlvbiBtYXRjaFNlYXJjaEVudHJpZXNJdGVtIChhcHAsIGlzTmFtZVNlYXJjaCwgcXVlcnksIHR5cGUsIGVyYSwgZW50cnlJZHMsIGZvbGRlcklkcywgaW5jbHVkZUZvbGRlcikge1xuICBjb25zdCBlbnRyaWVzID0gYXBwLmNvbGxlY3Rpb24uaW5kZXggPz8gYXBwLmNvbGxlY3Rpb24uY29udGVudHNcblxuICAvLyBDb3B5IHRoZSBmb2xkZXJJZHMgdG8gYSBuZXcgc2V0IHNvIHdlIGNhbiBhZGQgdG8gdGhlIG9yaWdpbmFsIHNldCB3aXRob3V0IGluY29ycmVjdGx5IGFkZGluZyBjaGlsZCBlbnRyaWVzXG4gIGNvbnN0IG1hdGNoZWRGb2xkZXJJZHMgPSBuZXcgU2V0KGZvbGRlcklkcylcblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBlbnRyeUlkID0gYXBwLl9nZXRFbnRyeUlkKGVudHJ5KVxuICAgIC8vIElmIHdlIG1hdGNoZWQgYSBmb2xkZXIsIGFkZCBpdHMgY2hpbGRyZW4gZW50cmllc1xuICAgIGlmIChtYXRjaGVkRm9sZGVySWRzLmhhcyhlbnRyeS5mb2xkZXI/Ll9pZCA/PyBlbnRyeS5mb2xkZXIpKSB7XG4gICAgICBlbnRyeUlkcy5hZGQoZW50cnlJZClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWF0Y2hOYW1lID0gKCFpc05hbWVTZWFyY2ggfHwgcXVlcnkudGVzdChTZWFyY2hGaWx0ZXIuY2xlYW5RdWVyeShhcHAuX2dldEVudHJ5TmFtZShlbnRyeSkpKSlcbiAgICAgIGNvbnN0IG1hdGNoVHlwZSA9ICh0eXBlID09PSAnJyB8fCB0eXBlID09PSBlbnRyeS50eXBlKVxuICAgICAgY29uc3QgZXJhcyA9IE9iamVjdC5rZXlzKGVudHJ5LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pXG4gICAgICBjb25zdCBtYXRjaEVyYXMgPSAoZXJhID09PSAnJyB8fCBlcmFzLmxlbmd0aCA9PT0gMCB8fCBlcmFzLmluY2x1ZGVzKGVyYSkpXG4gICAgICBpZiAobWF0Y2hOYW1lICYmIG1hdGNoVHlwZSAmJiBtYXRjaEVyYXMpIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiB3ZSBhcmUgc2VhcmNoaW5nIGJ5IG5hbWUsIG1hdGNoIHRoZSBlbnRyeSBuYW1lXG4gICAgICAgIGVudHJ5SWRzLmFkZChlbnRyeUlkKVxuICAgICAgICBpbmNsdWRlRm9sZGVyKGVudHJ5LmZvbGRlcilcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBlbmRpdW1GaWx0ZXIgKCkge1xuICBjb25zdCBvbGRTZWFyY2hGaWx0ZXIgPSBDb21wZW5kaXVtLnByb3RvdHlwZS5fb25TZWFyY2hGaWx0ZXJcbiAgQ29tcGVuZGl1bS5wcm90b3R5cGUuX29uU2VhcmNoRmlsdGVyID0gZnVuY3Rpb24gKGV2ZW50LCBxdWVyeSwgcmd4LCBodG1sKSB7XG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbi5kb2N1bWVudE5hbWUgPT09ICdJdGVtJykge1xuICAgICAgaWYgKHR5cGVvZiBodG1sID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBxdWVyeSA9IHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5maWx0ZXJzWzBdLmlucHV0U2VsZWN0b3IpLnZhbHVlXG4gICAgICAgIHJneCA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShxdWVyeSksICdpJylcbiAgICAgICAgaHRtbCA9IHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5maWx0ZXJzWzBdLmNvbnRlbnRTZWxlY3RvcilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHR5cGVTZWxlY3QgPSB0aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3Rvcignc2VsZWN0W25hbWU9Y29jN3R5cGUnICsgdGhpcy5hcHBJZCArICddJylcbiAgICAgIGNvbnN0IGVyYVNlbGVjdCA9IHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdzZWxlY3RbbmFtZT1jb2M3ZXJhJyArIHRoaXMuYXBwSWQgKyAnXScpXG4gICAgICBjb25zdCB0eXBlID0gdHlwZVNlbGVjdC52YWx1ZVxuICAgICAgbGV0IGVyYSA9ICcnXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgIGNhc2UgJ3NldHVwJzpcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIGVyYVNlbGVjdC5wYXJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJ1xuICAgICAgICAgIGVyYSA9IGVyYVNlbGVjdC52YWx1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZXJhU2VsZWN0LnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdoaWRlJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc05hbWVTZWFyY2ggPSAhIXF1ZXJ5XG4gICAgICBjb25zdCBpc1NlYXJjaCA9IGlzTmFtZVNlYXJjaCB8fCB0eXBlICE9PSAnJyB8fCBlcmEgIT09ICcnXG4gICAgICBjb25zdCBlbnRyeUlkcyA9IG5ldyBTZXQoKVxuICAgICAgY29uc3QgZm9sZGVySWRzID0gbmV3IFNldCgpXG4gICAgICBjb25zdCBhdXRvRXhwYW5kRm9sZGVySWRzID0gbmV3IFNldCgpXG5cbiAgICAgIC8vIE1hdGNoIGVudHJpZXMgYW5kIGZvbGRlcnNcbiAgICAgIGlmIChpc1NlYXJjaCkge1xuICAgICAgICAvLyBJbmNsdWRlIGZvbGRlcnMgYW5kIHRoZWlyIHBhcmVudHMsIGF1dG8tZXhwYW5kaW5nIHBhcmVudCBmb2xkZXJzXG4gICAgICAgIGNvbnN0IGluY2x1ZGVGb2xkZXIgPSAoZm9sZGVyLCBhdXRvRXhwYW5kID0gdHJ1ZSkgPT4ge1xuICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBmb2xkZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBmb2xkZXIgPSB0aGlzLmNvbGxlY3Rpb24uZm9sZGVycy5nZXQoZm9sZGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGZvbGRlcklkID0gZm9sZGVyLl9pZFxuICAgICAgICAgIGlmIChmb2xkZXJJZHMuaGFzKGZvbGRlcklkKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBmb2xkZXIgaXMgbm90IGFscmVhZHkgYXV0by1leHBhbmRpbmcsIGJ1dCBpdCBzaG91bGQgYmUsIGFkZCBpdCB0byB0aGUgc2V0XG4gICAgICAgICAgICBpZiAoYXV0b0V4cGFuZCAmJiAhYXV0b0V4cGFuZEZvbGRlcklkcy5oYXMoZm9sZGVySWQpKSB7XG4gICAgICAgICAgICAgIGF1dG9FeHBhbmRGb2xkZXJJZHMuYWRkKGZvbGRlcklkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvbGRlcklkcy5hZGQoZm9sZGVySWQpXG4gICAgICAgICAgaWYgKGF1dG9FeHBhbmQpIHtcbiAgICAgICAgICAgIGF1dG9FeHBhbmRGb2xkZXJJZHMuYWRkKGZvbGRlcklkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm9sZGVyLmZvbGRlcikge1xuICAgICAgICAgICAgaW5jbHVkZUZvbGRlcihmb2xkZXIuZm9sZGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc05hbWVTZWFyY2gpIHtcbiAgICAgICAgICAvLyBGaXJzdCBtYXRjaCBmb2xkZXJzXG4gICAgICAgICAgdGhpcy5fbWF0Y2hTZWFyY2hGb2xkZXJzKHJneCwgaW5jbHVkZUZvbGRlcilcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5leHQgbWF0Y2ggZW50cmllc1xuICAgICAgICBtYXRjaFNlYXJjaEVudHJpZXNJdGVtKHRoaXMsIGlzTmFtZVNlYXJjaCwgcmd4LCB0eXBlLCBlcmEsIGVudHJ5SWRzLCBmb2xkZXJJZHMsIGluY2x1ZGVGb2xkZXIpXG4gICAgICB9XG5cbiAgICAgIC8vIFRvZ2dsZSBlYWNoIGRpcmVjdG9yeSBpdGVtXG4gICAgICBmb3IgKGNvbnN0IGVsIG9mIGh0bWwucXVlcnlTZWxlY3RvckFsbCgnLmRpcmVjdG9yeS1pdGVtJykpIHtcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvbGRlcicpKSB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBpc1NlYXJjaCAmJiBmb2xkZXJJZHMuaGFzKGVsLmRhdGFzZXQuZm9sZGVySWQpXG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICghaXNTZWFyY2ggfHwgbWF0Y2gpID8gJ2ZsZXgnIDogJ25vbmUnXG4gICAgICAgICAgaWYgKGF1dG9FeHBhbmRGb2xkZXJJZHMuaGFzKGVsLmRhdGFzZXQuZm9sZGVySWQpKSB7XG4gICAgICAgICAgICBpZiAoaXNTZWFyY2ggJiYgbWF0Y2gpIHtcbiAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnY29sbGFwc2VkJywgIWdhbWUuZm9sZGVycy5fZXhwYW5kZWRbZWwuZGF0YXNldC51dWlkXSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICghaXNTZWFyY2ggfHwgZW50cnlJZHMuaGFzKGVsLmRhdGFzZXQuZW50cnlJZCkpID8gJ2ZsZXgnIDogJ25vbmUnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb2xkU2VhcmNoRmlsdGVyLmNhbGwodGhpcywgZXZlbnQsIHF1ZXJ5LCByZ3gsIGh0bWwpXG4gICAgfVxuICB9XG5cbiAgSG9va3Mub24oJ3JlbmRlckNvbXBlbmRpdW0nLCBhc3luYyAoYXBwLCBodG1sLCBkYXRhKSA9PiB7XG4gICAgaWYgKGFwcC5jb2xsZWN0aW9uLmRvY3VtZW50TmFtZSA9PT0gJ0l0ZW0nKSB7XG4gICAgICBpZiAoIWFwcC5jb2xsZWN0aW9uLmluZGV4ZWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLmNvbGxlY3Rpb24uZ2V0SW5kZXgoKVxuICAgICAgfVxuICAgICAgY29uc3QgdHlwZXMgPSBbLi4ubmV3IFNldChkYXRhLmluZGV4LmZpbHRlcihpID0+IGkubmFtZSAhPT0gJyNbQ0ZfdGVtcEVudGl0eV0nKS5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpKV1cbiAgICAgIGNvbnN0IHNlbGVjdCA9IFtdXG4gICAgICBjb25zdCBzZWxlY3RlZFR5cGUgPSAoYXBwLm9wdGlvbnMuZmlsdGVyQ29DNz8udHlwZSA/PyAnJylcbiAgICAgIGNvbnN0IHNlbGVjdGVkRXJhID0gKGFwcC5vcHRpb25zLmZpbHRlckNvQzc/LmVyYSA/PyAnJylcbiAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIlwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWxsJykgKyAnPC9vcHRpb24+J1xuICAgICAgKVxuICAgICAgY29uc3QgZ3JvdXBUeXBlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2FyY2hldHlwZScsXG4gICAgICAgICAgbmFtZTogJ0NvQzcuRW50aXRpZXMuQXJjaGV0eXBlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnYm9vaycsXG4gICAgICAgICAgbmFtZTogJ0NvQzcuRW50aXRpZXMuQm9vaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2l0ZW0nLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLkl0ZW0nXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdvY2N1cGF0aW9uJyxcbiAgICAgICAgICBuYW1lOiAnQ29DNy5FbnRpdGllcy5PY2N1cGF0aW9uJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc2V0dXAnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlNldHVwJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc2tpbGwnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlNraWxsJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc3BlbGwnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlNwZWxsJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnc3RhdHVzJyxcbiAgICAgICAgICBuYW1lOiAnQ29DNy5FbnRpdGllcy5TdGF0dXMnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICd0YWxlbnQnLFxuICAgICAgICAgIG5hbWU6ICdDb0M3LkVudGl0aWVzLlRhbGVudCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ3dlYXBvbicsXG4gICAgICAgICAgbmFtZTogJ0NvQzcuRW50aXRpZXMuV2VhcG9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgICBmb3IgKGNvbnN0IGdyb3VwVHlwZSBvZiBncm91cFR5cGVzKSB7XG4gICAgICAgIGlmICh0eXBlcy5pbmNsdWRlcyhncm91cFR5cGUua2V5KSkge1xuICAgICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICsgZ3JvdXBUeXBlLmtleSArICdcIicgKyAoc2VsZWN0ZWRUeXBlID09PSBncm91cFR5cGUua2V5ID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInIDogJycpICsgJz4nICtcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKGdyb3VwVHlwZS5uYW1lKSArXG4gICAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gW11cbiAgICAgIGVyYXMucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGZvciAoY29uc3QgZXJhIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykubWFwKGUgPT4geyByZXR1cm4geyBpZDogZVswXSwgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pIH0gfSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpKSB7XG4gICAgICAgIGVyYXMucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgZXJhLmlkICtcbiAgICAgICAgICAgICdcIicgKyAoc2VsZWN0ZWRFcmEgPT09IGVyYS5pZCA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyA6ICcnKSArICc+JyArXG4gICAgICAgICAgICBlcmEubmFtZSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBsZXQgdW5jb21tb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxSYXJpdHlTaG9ydCcpXG4gICAgICBpZiAodW5jb21tb24gPT09ICdDb0M3LlNraWxsUmFyaXR5U2hvcnQnKSB7XG4gICAgICAgIHVuY29tbW9uID0gJz8/J1xuICAgICAgfVxuICAgICAgaHRtbC5maW5kKCdsaS5kaXJlY3RvcnktaXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCByb3cgPSAkKHRoaXMpXG4gICAgICAgIGxldCBpdGVtID0gW11cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIERFUFJFQ0lBVEVEIElOIHYxMVxuICAgICAgICAgIGl0ZW0gPSBkYXRhLmluZGV4LmZpbmQoaSA9PiBpLl9pZCA9PT0gcm93LmRhdGEoJ2RvY3VtZW50LWlkJykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbSA9IGFwcC5jb2xsZWN0aW9uLmluZGV4LmdldChyb3cuZGF0YSgnZG9jdW1lbnQtaWQnKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICByb3cuZmluZCgnYScpLmh0bWwoaXRlbS5uYW1lICsgJyAoJyArIChpdGVtLnN5c3RlbT8uYmFzZSA/PyAnPycpICsgJyUnICsgKChpdGVtLnN5c3RlbT8ucHJvcGVydGllcz8ucmFyaXR5ID8/IGZhbHNlKSA/ICcgJyArIHVuY29tbW9uIDogJycpICsgJyknKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnaGVhZGVyLmRpcmVjdG9yeS1oZWFkZXInKVxuICAgICAgICAuYWZ0ZXIoXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb21wZW5kaXVtZmlsdGVyXCI+JyArXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkZXItc2VhcmNoIGZsZXhyb3dcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3dHlwZScgKyBhcHAuYXBwSWQgKyAnXCIgc3R5bGU9XCJcIj4nICsgc2VsZWN0LmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaGVhZGVyLXNlYXJjaCBmbGV4cm93IGVyYV9zZWxlY3RcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzdlcmEnICsgYXBwLmFwcElkICsgJ1wiIHN0eWxlPVwiXCI+JyArIGVyYXMuam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JyArXG4gICAgICAgICAgJzwvZGl2PidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCdzZWxlY3QnKS5jaGFuZ2UoYXBwLm9wdGlvbnMuZmlsdGVyc1swXS5jYWxsYmFjay5iaW5kKGFwcCkpXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDYXJkLCBDT05GSUcsIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCBJdGVtLCBKb3VybmFsRW50cnksIE1hY3JvLCBQbGF5bGlzdCwgUm9sbFRhYmxlLCBTY2VuZSwgU2NlbmVOYXZpZ2F0aW9uLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJRCB7XG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQWN0b3IuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICAvLyBDT05GSUcuQ2FyZHMuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdzeXN0ZW0uYmFzZScpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ3N5c3RlbS5wcm9wZXJ0aWVzJylcbiAgICBDT05GSUcuSm91cm5hbEVudHJ5LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLk1hY3JvLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlBsYXlsaXN0LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlJvbGxUYWJsZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5TY2VuZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIGdhbWUuc3lzdGVtLmFwaSA9IHtcbiAgICAgIGNvY2lkOiBDb0NJRFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIFJlZ0V4cCBmb3IgdmFsaWQgdHlwZSBhbmQgZm9ybWF0XG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIHJlZ0V4S2V5ICgpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMoQ29DSUQuZ2FtZVByb3BlcnR5TG9va3VwKS5qb2luKCd8JykgKyAnKVxcXFwuKC4qPylcXFxcLiguKykkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLiBiYXNlZCBvbiBkb2N1bWVudFxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ2V0UHJlZml4IChkb2N1bWVudCkge1xuICAgIGZvciAoY29uc3QgdHlwZSBpbiBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXApIHtcbiAgICAgIGlmIChkb2N1bWVudCBpbnN0YW5jZW9mIENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cFt0eXBlXSkge1xuICAgICAgICByZXR1cm4gdHlwZSArICcuJyArIChkb2N1bWVudC50eXBlID8/ICcnKSArICcuJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLm5hbWUgYmFzZWQgb24gZG9jdW1lbnRcbiAgICogQHBhcmFtIGRvY3VtZW50XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGd1ZXNzSWQgKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIENvQ0lELmdldFByZWZpeChkb2N1bWVudCkgKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKGRvY3VtZW50Lm5hbWUpXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5wYXJ0aWFsLW5hbWUoLXJlbW92ZWQpXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21LZXkgKGlkKSB7XG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCBrZXkgPSBpZC5yZXBsYWNlKC8oW15cXFxcLi1dKykkLywgJycpXG4gICAgICBpZiAoa2V5LnN1YnN0cigtMSkgPT09ICctJykge1xuICAgICAgICByZXR1cm4ga2V5XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUucGFydGlhbC1uYW1lKC1yZW1vdmVkKVxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21Eb2N1bWVudCAoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gQ29DSUQuZ3Vlc3NHcm91cEZyb21LZXkoZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cmFuc2xhdGlvbiBvZiBlcmEga2V5XG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZXJhVGV4dCAoZXJhKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JylcbiAgICB9IGVsc2UgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgIH1cblxuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1tlcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhIH0pXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgaXRlbXMgd2l0aCBtYXRjaGluZyBDb0NJRHMsIGxhbmd1YWdlLCBhbmQgZXJhc1xuICAgKiB1aS5ub3RpZmljYXRpb25zLndhcm4gZm9yIG1pc3Npbmcga2V5c1xuICAgKiBAcGFyYW0gaXRlbUxpc3QgYXJyYXkgb2YgQ29DSURzXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZXhwYW5kSXRlbUFycmF5ICh7IGl0ZW1MaXN0LCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgbGV0IGl0ZW1zID0gW11cbiAgICBjb25zdCBjb2NpZHMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ID09PSAnc3RyaW5nJylcbiAgICBpdGVtcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgIT09ICdzdHJpbmcnKVxuXG4gICAgaWYgKGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGZvdW5kID0gYXdhaXQgQ29DSUQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IENvQ0lELm1ha2VHcm91cFJlZ0V4KGNvY2lkcyksIHR5cGU6ICdpJywgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgICBjb25zdCBhbGwgPSBbXVxuICAgICAgZm9yIChjb25zdCBjb2NpZCBvZiBjb2NpZHMpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGZvdW5kLmZpbmQoaSA9PiBpLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBjb2NpZClcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBhbGwucHVzaChpdGVtKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWxsLmxlbmd0aCA8IGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgbm90bWlzc2luZyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgZG9jIG9mIGFsbCkge1xuICAgICAgICAgIG5vdG1pc3NpbmcucHVzaChkb2MuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICAgICAgfVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnRzLW5vdC1mb3VuZCcsIHsgY29jaWRzOiBjb2NpZHMuZmlsdGVyKHggPT4gIW5vdG1pc3NpbmcuaW5jbHVkZXMoeCkpLmpvaW4oJywgJyksIGxhbmcsIGVyYTogQ29DSUQuZXJhVGV4dChlcmEpIH0pKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBpdGVtcy5jb25jYXQoYWxsKVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGl0ZW0gd2l0aCBtYXRjaGluZyBDb0NJRHMgZnJvbSBsaXN0XG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3IgbWlzc2luZyBrZXlzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGlzdCBhcnJheSBvZiBpdGVtc1xuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGZpbmRDb2NJZEluTGlzdCAoY29jaWQsIGxpc3QpIHtcbiAgICBsZXQgaXRlbU5hbWUgPSAnJ1xuICAgIGNvbnN0IENvQ0lES2V5cyA9IE9iamVjdC5hc3NpZ24oZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi5fZmFsbGJhY2suQ29DNz8uQ29DSURGbGFnPy5rZXlzID8/IHt9KSwgZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNz8uQ29DSURGbGFnPy5rZXlzID8/IHt9KSlcbiAgICBpZiAodHlwZW9mIENvQ0lES2V5c1tjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpdGVtTmFtZSA9IENvQ0lES2V5c1tjb2NpZF1cbiAgICB9XG4gICAgcmV0dXJuICh0eXBlb2YgbGlzdC5maWx0ZXIgPT09ICd1bmRlZmluZWQnID8gT2JqZWN0LnZhbHVlcyhsaXN0KSA6IGxpc3QpLmZpbHRlcihpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkIHx8IChpdGVtTmFtZSAhPT0gJycgJiYgaXRlbU5hbWUgPT09IGkubmFtZSkpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBSZWdFeHAgbWF0Y2hpbmcgYWxsIHN0cmluZ3MgaW4gYXJyYXlcbiAgICogQHBhcmFtIGNvY2lkcyBhbiBhcnJheSBvZiBDb0NJRCBzdHJpbmdzXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIG1ha2VHcm91cFJlZ0V4IChjb2NpZHMpIHtcbiAgICBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvY2lkcyA9IFtjb2NpZHNdXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29jaWRzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgY29jaWRzLmZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBzcGxpdHMgPSB7fVxuICAgIGNvbnN0IHJneCA9IENvQ0lELnJlZ0V4S2V5KClcbiAgICBmb3IgKGNvbnN0IGkgb2YgY29jaWRzKSB7XG4gICAgICBjb25zdCBrZXkgPSBpLm1hdGNoKHJneClcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0ucHVzaChrZXlbM10pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbGllbnRseSBlcnJvclxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZWdFeFBhcnRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgaW4gc3BsaXRzKSB7XG4gICAgICBjb25zdCByb3cgPSBbXVxuICAgICAgZm9yIChjb25zdCBzIGluIHNwbGl0c1t0XSkge1xuICAgICAgICBpZiAoc3BsaXRzW3RdW3NdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByb3cucHVzaChzICsgJ1xcXFwuJyArICcoJyArIHNwbGl0c1t0XVtzXS5qb2luKCd8JykgKyAnKScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyBzcGxpdHNbdF1bc10uam9pbignJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyb3cubGVuZ3RoID4gMSkge1xuICAgICAgICByZWdFeFBhcnRzLnB1c2godCArICdcXFxcLicgKyAnKCcgKyByb3cuam9pbignfCcpICsgJyknKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgcm93LmpvaW4oJycpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVnRXhQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgcmVnRXhQYXJ0cy5qb2luKCd8JykgKyAnKSQnKVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByZWdFeFBhcnRzLmpvaW4oJycpICsgJyQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGRvY3VtZW50cyB3aXRoIGFuIENvQ0lEIG1hdGNoaW5nIHRoZSByZWdleCBhbmQgbWF0Y2hpbmcgdGhlIGRvY3VtZW50IHR5cGVcbiAgICogYW5kIGxhbmd1YWdlLCBmcm9tIHRoZSBzcGVjaWZpZWQgc2NvcGUuXG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3Igbm8gbWF0Y2hlc1xuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gc2NvcGUgZGVmaW5lcyB3aGVyZSBpdCB3aWxsIGxvb2s6XG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURSZWdleEFsbCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnYWxsJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBsZXQgY2FuZGlkYXRlcyA9IGF3YWl0IENvQ0lELmZyb21Db0NJRFJlZ2V4QWxsTWl4ZWQoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBzY29wZSwgbGFuZ0ZhbGxiYWNrLCBzaG93TG9hZGluZyB9KVxuICAgIGlmIChsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJykge1xuICAgICAgY2FuZGlkYXRlcyA9IENvQ0lELmZpbHRlckJ5TGFuZ3VhZ2UoY2FuZGlkYXRlcywgbGFuZylcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gICAgcmV0dXJuIGF3YWl0IENvQ0lELm9ubHlEb2N1bWVudHMoY2FuZGlkYXRlcywgc2hvd0xvYWRpbmcpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZG9jdW1lbnRzIHdpdGggYW4gQ29DSUQsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHNwZWNpZmllZCBzY29wZS5cbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBubyBtYXRjaGVzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBzY29wZSBkZWZpbmVzIHdoZXJlIGl0IHdpbGwgbG9vazpcbiAgICogKiphbGwqKjogZmluZCBpbiBib3RoIHdvcmxkICYgY29tcGVuZGlhLFxuICAgKiAqKndvcmxkKio6IG9ubHkgc2VhcmNoIGluIHdvcmxkLFxuICAgKiAqKmNvbXBlbmRpdW1zKio6IG9ubHkgc2VhcmNoIGluIGNvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJREFsbCAoeyBjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnYWxsJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IGNvY2lkLm1hdGNoKENvQ0lELnJlZ0V4S2V5KCkpXG4gICAgaWYgKCFwYXJ0cykge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEFsbCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKSwgdHlwZTogcGFydHNbMV0sIGxhbmcsIGVyYSwgc2NvcGUsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGZvciBlYWNoIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZFxuICAgKiBsYW5ndWFnZSwgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50cyBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEUmVnZXhCZXN0ICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGxldCBjYW5kaWRhdGVzID0gYXdhaXQgdGhpcy5mcm9tQ29DSURSZWdleEFsbE1peGVkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgc2NvcGU6ICdhbGwnLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgaWYgKGxhbmdGYWxsYmFjayAmJiBsYW5nICE9PSAnZW4nKSB7XG4gICAgICBjYW5kaWRhdGVzID0gQ29DSUQuZmlsdGVyQnlMYW5ndWFnZShjYW5kaWRhdGVzLCBsYW5nKVxuICAgIH1cbiAgICBjYW5kaWRhdGVzLnNvcnQoQ29DSUQuY29tcGFyZUNvQ0lEUHJpbylcbiAgICBjb25zdCBpZHMgPSB7fVxuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZXMpIHtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlkcywgY2FuZGlkYXRlLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkKSkge1xuICAgICAgICBpZHNbY2FuZGlkYXRlLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IGNhbmRpZGF0ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgQ29DSUQub25seURvY3VtZW50cyhPYmplY3QudmFsdWVzKGlkcyksIHNob3dMb2FkaW5nKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgb25seSB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudCBmb3IgQ29DSUQgdGhhdCBtYXRjaGVzIHRoZSBsYW5ndWFnZSxcbiAgICogd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50c1xuICAgKiBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBAcGFyYW0gY29jaWQgc3RyaW5nIENvQ0lEXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqL1xuICBzdGF0aWMgZnJvbUNvQ0lEIChjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURCZXN0KHsgY29jaWQsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdFxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICovXG4gIHN0YXRpYyBmcm9tQ29DSURCZXN0ICh7IGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZCB8fCB0eXBlb2YgY29jaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgY29jaWRSZWdFeHAgPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZG9jdW1lbnRzIG9yIGluZGV4ZXMgd2l0aCBhbiBDb0NJRCBtYXRjaGluZyB0aGUgcmVnZXggYW5kIG1hdGNoaW5nIHRoZSBkb2N1bWVudCB0eXBlXG4gICAqIGFuZCBsYW5ndWFnZSwgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKmFsbCoqOiBmaW5kIGluIGJvdGggd29ybGQgJiBjb21wZW5kaWEsXG4gICAqICoqd29ybGQqKjogb25seSBzZWFyY2ggaW4gd29ybGQsXG4gICAqICoqY29tcGVuZGl1bXMqKjogb25seSBzZWFyY2ggaW4gY29tcGVuZGl1bXNcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEUmVnZXhBbGxNaXhlZCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnYWxsJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkUmVnRXhwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0cyA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAwXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBpZiAoWydhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKFsnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50ID0gY291bnQgKyBnYW1lLnBhY2tzLnNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChhd2FpdCBDb0NJRC5kb2NzRnJvbVdvcmxkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSkpXG4gICAgfVxuXG4gICAgaWYgKFsnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5jb25jYXQoYXdhaXQgQ29DSUQuaW5kZXhlc0Zyb21Db21wZW5kaWEoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHByb2dyZXNzQmFyOiBjb3VudCB9KSlcbiAgICB9XG5cbiAgICBpZiAoc2hvd0xvYWRpbmcpIHtcbiAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiAxMDAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSB3b3JsZC5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jc0Zyb21Xb3JsZCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0gPSB7fSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuXG4gICAgaWYgKHByb2dyZXNzQmFyID4gMCkge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoMTAwIC8gcHJvZ3Jlc3NCYXIpIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZVByb3BlcnR5ID0gQ29DSUQuZ2V0R2FtZVByb3BlcnR5KGAke3R5cGV9Li5gKVxuXG4gICAgY29uc3QgY2FuZGlkYXRlRG9jdW1lbnRzID0gZ2FtZVtnYW1lUHJvcGVydHldPy5maWx0ZXIoKGQpID0+IHtcbiAgICAgIGNvbnN0IGNvY2lkRmxhZyA9IGQuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKVxuICAgICAgaWYgKHR5cGVvZiBjb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgY29uc3QgZXJhcyA9IChjb2NpZEZsYWcuZXJhcyA/PyBbXSlcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXJhcyA9IChlcmEgPT09IGZhbHNlIHx8IE9iamVjdC5lbnRyaWVzKGVyYXMpLmxlbmd0aCA9PT0gMCB8fCAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVyYXMsIGVyYSkgJiYgZXJhc1tlcmFdKSlcbiAgICAgIHJldHVybiBjb2NpZFJlZ0V4cC50ZXN0KGNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoY29jaWRGbGFnLmxhbmcpICYmIG1hdGNoaW5nRXJhc1xuICAgIH0pXG5cbiAgICBpZiAoY2FuZGlkYXRlRG9jdW1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjYW5kaWRhdGVEb2N1bWVudHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBpbmRleGVzIG1hdGNoaW5nIHRoZSBDb0NJRCByZWdleCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgY29tcGVuZGl1bXMuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5kZXhlc0Zyb21Db21wZW5kaWEgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG5cbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBDb0NJRC5nZXREb2N1bWVudFR5cGUodHlwZSkubmFtZVxuICAgIGxldCBpbmRleERvY3VtZW50cyA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAxXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChwcm9ncmVzc0JhciA+IDApIHtcbiAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoY291bnQgKiAxMDAgLyBwcm9ncmVzc0JhcikgfSlcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKHBhY2suZG9jdW1lbnROYW1lID09PSBkb2N1bWVudFR5cGUpIHtcbiAgICAgICAgaWYgKCFwYWNrLmluZGV4ZWQpIHtcbiAgICAgICAgICBhd2FpdCBwYWNrLmdldEluZGV4KClcbiAgICAgICAgfVxuICAgICAgICBpbmRleERvY3VtZW50cyA9IGluZGV4RG9jdW1lbnRzLmNvbmNhdChwYWNrLmluZGV4LmZpbHRlcigoaSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmFzID0gKGkuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/PyB7fSlcbiAgICAgICAgICBjb25zdCBtYXRjaGluZ0VyYXMgPSAoZXJhID09PSBmYWxzZSB8fCBPYmplY3QuZW50cmllcyhlcmFzKS5sZW5ndGggPT09IDAgfHwgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlcmFzLCBlcmEpICYmIGVyYXNbZXJhXSkpXG4gICAgICAgICAgcmV0dXJuIGNvY2lkUmVnRXhwLnRlc3QoaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nKSAmJiBtYXRjaGluZ0VyYXNcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbmRleERvY3VtZW50c1xuICB9XG5cbiAgLyoqXG4gICAqIFNvcnQgYSBsaXN0IG9mIGRvY3VtZW50IG9uIENvQ0lEIHByaW9yaXR5IC0gdGhlIGhpZ2hlc3QgZmlyc3QuXG4gICAqIElmIHByaW9yaXR5IGlzIHRoZSBzYW1lIHVzZSB3b3JsZCBvdmVyIGNvbXBlbmRpdW1zXG4gICAqIEBleGFtcGxlXG4gICAqIGFMaXN0T2ZEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgKi9cbiAgc3RhdGljIGNvbXBhcmVDb0NJRFByaW8gKGEsIGIpIHtcbiAgICBjb25zdCBhcCA9IHBhcnNlSW50KGEuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHksIDEwKVxuICAgIGNvbnN0IGJwID0gcGFyc2VJbnQoYi5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSwgMTApXG4gICAgaWYgKGFwID09PSBicCkge1xuICAgICAgY29uc3QgYW8gPSBhIGluc3RhbmNlb2YgZm91bmRyeS5hYnN0cmFjdC5EYXRhTW9kZWxcbiAgICAgIGNvbnN0IGJvID0gYiBpbnN0YW5jZW9mIGZvdW5kcnkuYWJzdHJhY3QuRGF0YU1vZGVsXG4gICAgICBpZiAoYW8gPT09IGJvKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKGFvID8gLTEgOiAxKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYnAgLSBhcFxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGZpcnN0IHBhcnQgb2YgYSBDb0NJRCB0byB3aGF0IHRob3NlIGRvY3VtZW50cyBhcmUgY2FsbGVkIGluIHRoZSBgZ2FtZWAgb2JqZWN0LlxuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICovXG4gIHN0YXRpYyBnZXRHYW1lUHJvcGVydHkgKGNvY2lkKSB7XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBnYW1lUHJvcGVydHkgPSBDb0NJRC5nYW1lUHJvcGVydHlMb29rdXBbdHlwZV1cbiAgICBpZiAoIWdhbWVQcm9wZXJ0eSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmluY29ycmVjdC50eXBlJykpXG4gICAgICBjb25zb2xlLmxvZygnQ29DNyB8ICcsIGNvY2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICB9XG4gICAgcmV0dXJuIGdhbWVQcm9wZXJ0eVxuICB9XG5cbiAgc3RhdGljIGdldCBnYW1lUHJvcGVydHlMb29rdXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhOiAnYWN0b3JzJyxcbiAgICAgIGM6ICdjYXJkcycsXG4gICAgICBpOiAnaXRlbXMnLFxuICAgICAgamU6ICdqb3VybmFsJyxcbiAgICAgIG06ICdtYWNyb3MnLFxuICAgICAgcDogJ3BsYXlsaXN0cycsXG4gICAgICBydDogJ3RhYmxlcycsXG4gICAgICBzOiAnc2NlbmVzJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIHRoZSBmaXJzdCBwYXJ0IG9mIGEgQ29DSUQgdG8gd2hhdCB0aG9zZSBkb2N1bWVudHMgYXJlIGNhbGxlZCBpbiB0aGUgYGdhbWVgIG9iamVjdC5cbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqL1xuICBzdGF0aWMgZ2V0RG9jdW1lbnRUeXBlIChjb2NpZCkge1xuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwW3R5cGVdXG4gICAgaWYgKCFkb2N1bWVudFR5cGUpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5pbmNvcnJlY3QudHlwZScpKVxuICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCAnLCBjb2NpZClcbiAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudFR5cGVcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZG9jdW1lbnROYW1lTG9va3VwICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYTogQWN0b3IsXG4gICAgICBjOiBDYXJkLFxuICAgICAgaTogSXRlbSxcbiAgICAgIGplOiBKb3VybmFsRW50cnksXG4gICAgICBtOiBNYWNybyxcbiAgICAgIHA6IFBsYXlsaXN0LFxuICAgICAgcnQ6IFJvbGxUYWJsZSxcbiAgICAgIHM6IFNjZW5lXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgaW5kZXhlcyB3aXRoIHRoZWlyIGRvY3VtZW50c1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIG9ubHlEb2N1bWVudHMgKGNhbmRpZGF0ZXMsIHNob3dMb2FkaW5nKSB7XG4gICAgY29uc3QgbGVuID0gY2FuZGlkYXRlcy5sZW5ndGhcbiAgICBsZXQgY291bnQgPSAwXG4gICAgZm9yIChjb25zdCBvZmZzZXQgaW4gY2FuZGlkYXRlcykge1xuICAgICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiBNYXRoLmZsb29yKGNvdW50IC8gbGVuKSB9KVxuICAgICAgICBjb3VudCA9IGNvdW50ICsgMTAwXG4gICAgICB9XG4gICAgICBpZiAoIShjYW5kaWRhdGVzW29mZnNldF0gaW5zdGFuY2VvZiBmb3VuZHJ5LmFic3RyYWN0LkRhdGFNb2RlbCkpIHtcbiAgICAgICAgY2FuZGlkYXRlc1tvZmZzZXRdID0gYXdhaXQgZnJvbVV1aWQoY2FuZGlkYXRlc1tvZmZzZXRdLnV1aWQpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgIH1cbiAgICByZXR1cm4gY2FuZGlkYXRlc1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBhbiBhcnJheSBvZiBpbmRleCBvciBkb2N1bWVudHMuXG4gICAqIElmIGEgQ29DSUQgaGFzIGEgdmVyc2lvbiBsYW5nIHRoZW4gcmVtb3ZlIHRoZSBlbiB2ZXJzaW9uc1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckJ5TGFuZ3VhZ2UgKGluZGV4ZXMsIGxhbmcpIHtcbiAgICBjb25zdCBpZHMgPSBpbmRleGVzLnJlZHVjZSgoYywgaSkgPT4ge1xuICAgICAgY1tpLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IGNbaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gfHwgaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nID09PSBsYW5nXG4gICAgICByZXR1cm4gY1xuICAgIH0sIHt9KVxuICAgIHJldHVybiBpbmRleGVzLmZpbHRlcihpID0+IGkuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyAhPT0gJ2VuJyB8fCAhaWRzW2kuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRdKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgYWxsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgQ29DSUQgcmVnZXgsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHdvcmxkLlxuICAgKiBUaGUgZG9jdW1lbnQgbGlzdCBpcyBzb3J0ZWQgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBmaXJzdC5cbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBwcm9ncmVzc0JhciBJZiBncmVhdGVyIHRoYW4gemVybyBzaG93IHBlcmNlbnRhZ2VcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkb2N1bWVudHNGcm9tV29ybGQgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9ID0ge30pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NhbGxpbmcgZG9jdW1lbnRzRnJvbVdvcmxkIGRpcmVjdGx5IGlzIGRlcHJlY2lhdGVkJylcbiAgICBsZXQgZG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jc0Zyb21Xb3JsZCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXIgfSlcbiAgICBpZiAobGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpIHtcbiAgICAgIGRvY3VtZW50cyA9IENvQ0lELmZpbHRlckJ5TGFuZ3VhZ2UoZG9jdW1lbnRzLCBsYW5nKVxuICAgIH1cbiAgICBkb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgIHJldHVybiBkb2N1bWVudHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSBjb21wZW5kaXVtcy5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NhbGxpbmcgZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSBkaXJlY3RseSBpcyBkZXByZWNpYXRlZCcpXG4gICAgbGV0IGluZGV4ZXMgPSBhd2FpdCBDb0NJRC5pbmRleGVzRnJvbUNvbXBlbmRpYSh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXIgfSlcbiAgICBpZiAobGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpIHtcbiAgICAgIGluZGV4ZXMgPSBDb0NJRC5maWx0ZXJCeUxhbmd1YWdlKGluZGV4ZXMsIGxhbmcpXG4gICAgfVxuICAgIGluZGV4ZXMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgIHJldHVybiBhd2FpdCBDb0NJRC5vbmx5RG9jdW1lbnRzKGluZGV4ZXMsIHByb2dyZXNzQmFyID4gMClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09ORklHLCBDT05TVCwgRG9jdW1lbnRTaGVldENvbmZpZywgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIE5vdGVzTGF5ZXIsIFJlZ2lvbkJlaGF2aW9yLCBUb2tlbkxheWVyICovXG5jb25zdCB7IFJlZ2lvbkJlaGF2aW9yVHlwZSB9ID0gZm91bmRyeS5kYXRhLnJlZ2lvbkJlaGF2aW9ycyA/PyB7fSAvLyBGb3VuZHJ5VlRUIHYxMVxuXG4vLyBGb3VuZHJ5VlRUIHYxMVxuY29uc3QgUmVnaW9uQmVoYXZpb3JUeXBlQ2xhc3MgPSAodHlwZW9mIFJlZ2lvbkJlaGF2aW9yVHlwZSA9PT0gJ3VuZGVmaW5lZCcgPyBjbGFzcyB7fSA6IFJlZ2lvbkJlaGF2aW9yVHlwZSlcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29DN0NsaWNrYWJsZUV2ZW50cyBleHRlbmRzIFJlZ2lvbkJlaGF2aW9yVHlwZUNsYXNzIHtcbiAgc3RhdGljIGluaXRTZWxmICgpIHtcbiAgICAvLyBGb3VuZHJ5VlRUIHYxMVxuICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKENPTkZJRy5SZWdpb25CZWhhdmlvci5kYXRhTW9kZWxzLCB7XG4gICAgICBjb2M3Q2xpY2thYmxlRXZlbnRzOiBDb0M3Q2xpY2thYmxlRXZlbnRzXG4gICAgfSlcblxuICAgIE9iamVjdC5hc3NpZ24oQ09ORklHLlJlZ2lvbkJlaGF2aW9yLnR5cGVJY29ucywge1xuICAgICAgY29jN0NsaWNrYWJsZUV2ZW50czogJ2ZhLXNvbGlkIGZhLWNvbXB1dGVyLW1vdXNlJ1xuICAgIH0pXG5cbiAgICBEb2N1bWVudFNoZWV0Q29uZmlnLnJlZ2lzdGVyU2hlZXQoXG4gICAgICBSZWdpb25CZWhhdmlvcixcbiAgICAgICdDb0M3JyxcbiAgICAgIGZvdW5kcnkuYXBwbGljYXRpb25zLnNoZWV0cy5SZWdpb25CZWhhdmlvckNvbmZpZyxcbiAgICAgIHtcbiAgICAgICAgdHlwZXM6IFtcbiAgICAgICAgICAnY29jN0NsaWNrYWJsZUV2ZW50cydcbiAgICAgICAgXSxcbiAgICAgICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgICAgIH1cbiAgICApXG5cbiAgICBjb25zdCBvbGRPbkNsaWNrTGVmdCA9IFRva2VuTGF5ZXIucHJvdG90eXBlLl9vbkNsaWNrTGVmdFxuICAgIFRva2VuTGF5ZXIucHJvdG90eXBlLl9vbkNsaWNrTGVmdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgb2xkT25DbGlja0xlZnQuY2FsbCh0aGlzLCBldmVudClcbiAgICAgIGlmIChjYW52YXMuYWN0aXZlTGF5ZXIgaW5zdGFuY2VvZiBUb2tlbkxheWVyKSB7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gY2FudmFzLmFjdGl2ZUxheWVyLnRvTG9jYWwoZXZlbnQpXG4gICAgICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIGNhbnZhcy5zY2VuZS5yZWdpb25zLmNvbnRlbnRzKSB7XG4gICAgICAgICAgaWYgKHJlZ2lvbi5iZWhhdmlvcnMuZmlsdGVyKGIgPT4gIWIuZGlzYWJsZWQpLmZpbmQoYiA9PiBiLnN5c3RlbSBpbnN0YW5jZW9mIENvQzdDbGlja2FibGVFdmVudHMpICYmIHJlZ2lvbi5vYmplY3QucG9seWdvblRyZWUudGVzdFBvaW50KGRlc3RpbmF0aW9uKSkge1xuICAgICAgICAgICAgcmVnaW9uLmJlaGF2aW9ycy5maWx0ZXIoYiA9PiAhYi5kaXNhYmxlZCkubWFwKGFzeW5jIChiKSA9PiB7IGlmIChhd2FpdCBiLnN5c3RlbS5faGFuZGxlTW91c2VPdmVyRXZlbnQoKSA9PT0gdHJ1ZSkgeyBhd2FpdCBiLnN5c3RlbS5faGFuZGxlTGVmdENsaWNrRXZlbnQoKSB9IH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkT25DbGlja1JpZ2h0ID0gVG9rZW5MYXllci5wcm90b3R5cGUuX29uQ2xpY2tSaWdodFxuICAgIFRva2VuTGF5ZXIucHJvdG90eXBlLl9vbkNsaWNrUmlnaHQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIG9sZE9uQ2xpY2tSaWdodC5jYWxsKHRoaXMsIGV2ZW50KVxuICAgICAgaWYgKGNhbnZhcy5hY3RpdmVMYXllciBpbnN0YW5jZW9mIFRva2VuTGF5ZXIpIHtcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBjYW52YXMuYWN0aXZlTGF5ZXIudG9Mb2NhbChldmVudClcbiAgICAgICAgZm9yIChjb25zdCByZWdpb24gb2YgY2FudmFzLnNjZW5lLnJlZ2lvbnMuY29udGVudHMpIHtcbiAgICAgICAgICBpZiAocmVnaW9uLmJlaGF2aW9ycy5maWx0ZXIoYiA9PiAhYi5kaXNhYmxlZCkuZmluZChiID0+IGIuc3lzdGVtIGluc3RhbmNlb2YgQ29DN0NsaWNrYWJsZUV2ZW50cykgJiYgcmVnaW9uLm9iamVjdC5wb2x5Z29uVHJlZS50ZXN0UG9pbnQoZGVzdGluYXRpb24pKSB7XG4gICAgICAgICAgICByZWdpb24uYmVoYXZpb3JzLmZpbHRlcihiID0+ICFiLmRpc2FibGVkKS5tYXAoYXN5bmMgKGIpID0+IHsgaWYgKGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVNb3VzZU92ZXJFdmVudCgpID09PSB0cnVlKSB7IGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVSaWdodENsaWNrRXZlbnQoKSB9IH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChjYW52YXMuYWN0aXZlTGF5ZXIgaW5zdGFuY2VvZiBUb2tlbkxheWVyKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ZXIgPSBjYW52YXM/LmFwcD8ucmVuZGVyZXI/LmV2ZW50cz8ucG9pbnRlclxuICAgICAgICBpZiAoIXBvaW50ZXIpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGNhbnZhcy5hY3RpdmVMYXllci50b0xvY2FsKGV2ZW50KVxuICAgICAgICBsZXQgc2V0UG9pbnRlciA9IGZhbHNlXG4gICAgICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIGNhbnZhcy5zY2VuZS5yZWdpb25zLmNvbnRlbnRzKSB7XG4gICAgICAgICAgaWYgKHJlZ2lvbi5iZWhhdmlvcnMuZmlsdGVyKGIgPT4gIWIuZGlzYWJsZWQpLmZpbmQoYiA9PiBiLnN5c3RlbSBpbnN0YW5jZW9mIENvQzdDbGlja2FibGVFdmVudHMpICYmIHJlZ2lvbi5vYmplY3QucG9seWdvblRyZWUudGVzdFBvaW50KGRlc3RpbmF0aW9uKSkge1xuICAgICAgICAgICAgc2V0UG9pbnRlciA9IGF3YWl0IHJlZ2lvbi5iZWhhdmlvcnMuZmlsdGVyKGIgPT4gIWIuZGlzYWJsZWQpLnJlZHVjZShhc3luYyAoYywgYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgYi5zeXN0ZW0uX2hhbmRsZU1vdXNlT3ZlckV2ZW50KClcbiAgICAgICAgICAgICAgaWYgKHIgIT09IGZhbHNlICYmIHIgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGIudXVpZCArICcgZGlkIG5vdCByZXR1cm4gYSBib29sZWFuJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjID0gYyB8fCByXG4gICAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgICB9LCBmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldFBvaW50ZXIpIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9hcmQnKS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9hcmQnKS5zdHlsZS5jdXJzb3IgPSAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBkZWZpbmVTY2hlbWEgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtb3VzZU92ZXI6IG5ldyBmb3VuZHJ5LmRhdGEuZmllbGRzLkphdmFTY3JpcHRGaWVsZCh7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBnbU9ubHk6IHRydWUsXG4gICAgICAgIGluaXRpYWw6ICdyZXR1cm4gZmFsc2UnLFxuICAgICAgICBsYWJlbDogJ0NvQzcuQ2xpY2thYmxlRXZlbnRzLk1vdXNlT3Zlci5UaXRsZScsXG4gICAgICAgIGhpbnQ6ICdDb0M3LkNsaWNrYWJsZUV2ZW50cy5Nb3VzZU92ZXIuSGludCdcbiAgICAgIH0pLFxuICAgICAgbGVmdENsaWNrOiBuZXcgZm91bmRyeS5kYXRhLmZpZWxkcy5KYXZhU2NyaXB0RmllbGQoe1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgZ21Pbmx5OiB0cnVlLFxuICAgICAgICBsYWJlbDogJ0NvQzcuQ2xpY2thYmxlRXZlbnRzLkxlZnRDbGljay5UaXRsZSdcbiAgICAgIH0pLFxuICAgICAgcmlnaHRDbGljazogbmV3IGZvdW5kcnkuZGF0YS5maWVsZHMuSmF2YVNjcmlwdEZpZWxkKHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIGdtT25seTogdHJ1ZSxcbiAgICAgICAgbGFiZWw6ICdDb0M3LkNsaWNrYWJsZUV2ZW50cy5SaWdodENsaWNrLlRpdGxlJ1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIF9oYW5kbGVNb3VzZU92ZXJFdmVudCAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZuID0gbmV3IGZvdW5kcnkudXRpbHMuQXN5bmNGdW5jdGlvbignc2NlbmUnLCAncmVnaW9uJywgJ2JlaGF2aW9yJywgYHske3RoaXMubW91c2VPdmVyfVxcbn1gKVxuICAgICAgcmV0dXJuIGF3YWl0IGZuLmNhbGwoZ2xvYmFsVGhpcywgdGhpcy5zY2VuZSwgdGhpcy5yZWdpb24sIHRoaXMuYmVoYXZpb3IpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIF9oYW5kbGVMZWZ0Q2xpY2tFdmVudCAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZuID0gbmV3IGZvdW5kcnkudXRpbHMuQXN5bmNGdW5jdGlvbignc2NlbmUnLCAncmVnaW9uJywgJ2JlaGF2aW9yJywgYHske3RoaXMubGVmdENsaWNrfVxcbn1gKVxuICAgICAgcmV0dXJuIGF3YWl0IGZuLmNhbGwoZ2xvYmFsVGhpcywgdGhpcy5zY2VuZSwgdGhpcy5yZWdpb24sIHRoaXMuYmVoYXZpb3IpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIF9oYW5kbGVSaWdodENsaWNrRXZlbnQgKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmbiA9IG5ldyBmb3VuZHJ5LnV0aWxzLkFzeW5jRnVuY3Rpb24oJ3NjZW5lJywgJ3JlZ2lvbicsICdiZWhhdmlvcicsIGB7JHt0aGlzLnJpZ2h0Q2xpY2t9XFxufWApXG4gICAgICByZXR1cm4gYXdhaXQgZm4uY2FsbChnbG9iYWxUaGlzLCB0aGlzLnNjZW5lLCB0aGlzLnJlZ2lvbiwgdGhpcy5iZWhhdmlvcilcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBDbGlja1JlZ2lvbkxlZnRVdWlkIChkb2NVdWlkKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICBpZiAoZG9jKSB7XG4gICAgICBkb2MuYmVoYXZpb3JzLmZpbHRlcihiID0+ICFiLmRpc2FibGVkKS5tYXAoYXN5bmMgKGIpID0+IHsgaWYgKGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVNb3VzZU92ZXJFdmVudCgpID09PSB0cnVlKSB7IGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVMZWZ0Q2xpY2tFdmVudCgpIH0gfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignam91cm5hbFBhZ2VVdWlkcyAnICsgZG9jVXVpZCArICcgbm90IGxvYWRlZCcpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIENsaWNrUmVnaW9uUmlnaHRVdWlkIChkb2NVdWlkKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICBpZiAoZG9jKSB7XG4gICAgICBkb2MuYmVoYXZpb3JzLmZpbHRlcihiID0+ICFiLmRpc2FibGVkKS5tYXAoYXN5bmMgKGIpID0+IHsgaWYgKGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVNb3VzZU92ZXJFdmVudCgpID09PSB0cnVlKSB7IGF3YWl0IGIuc3lzdGVtLl9oYW5kbGVSaWdodENsaWNrRXZlbnQoKSB9IH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2pvdXJuYWxQYWdlVXVpZHMgJyArIGRvY1V1aWQgKyAnIG5vdCBsb2FkZWQnKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBoYXNQZXJtaXNzaW9uRG9jdW1lbnQgKGRvY3VtZW50VXVpZCkge1xuICAgIGNvbnN0IGRvYyA9IGF3YWl0IGZyb21VdWlkKGRvY3VtZW50VXVpZClcbiAgICByZXR1cm4gZG9jPy50ZXN0VXNlclBlcm1pc3Npb24oZ2FtZS51c2VyLCBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9CU0VSVkVSKSA/PyBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIEluU2NlbmVSZWxhdGl2ZVRlbGVwb3J0IChldmVudCwgZGVzdGluYXRpb25SZWdpb24pIHtcbiAgICBpZiAoZXZlbnQubmFtZSA9PT0gJ3Rva2VuTW92ZUluJykge1xuICAgICAgLy8gcmVnaW9uIE1VU1QgYmUgdGhlIHNhbWUgc2hhcGUgd2l0aCBubyB0cmFuc2Zvcm1hdGlvblxuICAgICAgLy8gQ3VycmVudGx5IG9ubHkgUG9seWdvblNoYXBlRGF0YSBhbmQgUmVjdGFuZ2xlU2hhcGVEYXRhXG4gICAgICBjb25zdCBzb3VyY2VUTCA9IGV2ZW50LnJlZ2lvbi5zaGFwZXMucmVkdWNlKChjLCBwKSA9PiB7XG4gICAgICAgIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlBvbHlnb25TaGFwZURhdGEpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBwLnBvaW50cy5sZW5ndGg7IGkgPCBpbTsgaSA9IGkgKyAyKSB7XG4gICAgICAgICAgICBpZiAoY1swXSA9PT0gZmFsc2UgfHwgcC5wb2ludHNbaV0gPCBjWzBdKSB7XG4gICAgICAgICAgICAgIGNbMF0gPSBwLnBvaW50c1tpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNbMV0gPT09IGZhbHNlIHx8IHAucG9pbnRzW2kgKyAxXSA8IGNbMV0pIHtcbiAgICAgICAgICAgICAgY1sxXSA9IHAucG9pbnRzW2kgKyAxXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlJlY3RhbmdsZVNoYXBlRGF0YSkge1xuICAgICAgICAgIGNvbnN0IHggPSBNYXRoLm1pbihwLnggKyBwLndpZHRoLCBwLngpXG4gICAgICAgICAgY29uc3QgeSA9IE1hdGgubWluKHAueSArIHAuaGVpZ2h0LCBwLnkpXG4gICAgICAgICAgaWYgKGNbMF0gPT09IGZhbHNlIHx8IHggPCBjWzBdKSB7XG4gICAgICAgICAgICBjWzBdID0geFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY1sxXSA9PT0gZmFsc2UgfHwgeSA8IGNbMV0pIHtcbiAgICAgICAgICAgIGNbMV0gPSB5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjXG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uVEwgPSAoYXdhaXQgZnJvbVV1aWQoZGVzdGluYXRpb25SZWdpb24pKS5zaGFwZXMucmVkdWNlKChjLCBwKSA9PiB7XG4gICAgICAgIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlBvbHlnb25TaGFwZURhdGEpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBwLnBvaW50cy5sZW5ndGg7IGkgPCBpbTsgaSA9IGkgKyAyKSB7XG4gICAgICAgICAgICBpZiAoY1swXSA9PT0gZmFsc2UgfHwgcC5wb2ludHNbaV0gPCBjWzBdKSB7XG4gICAgICAgICAgICAgIGNbMF0gPSBwLnBvaW50c1tpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNbMV0gPT09IGZhbHNlIHx8IHAucG9pbnRzW2kgKyAxXSA8IGNbMV0pIHtcbiAgICAgICAgICAgICAgY1sxXSA9IHAucG9pbnRzW2kgKyAxXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwIGluc3RhbmNlb2YgZm91bmRyeS5kYXRhLlJlY3RhbmdsZVNoYXBlRGF0YSkge1xuICAgICAgICAgIGNvbnN0IHggPSBNYXRoLm1pbihwLnggKyBwLndpZHRoLCBwLngpXG4gICAgICAgICAgY29uc3QgeSA9IE1hdGgubWluKHAueSArIHAuaGVpZ2h0LCBwLnkpXG4gICAgICAgICAgaWYgKGNbMF0gPT09IGZhbHNlIHx8IHggPCBjWzBdKSB7XG4gICAgICAgICAgICBjWzBdID0geFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY1sxXSA9PT0gZmFsc2UgfHwgeSA8IGNbMV0pIHtcbiAgICAgICAgICAgIGNbMV0gPSB5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjXG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uWCA9IGV2ZW50LmRhdGEuZGVzdGluYXRpb24ueCAtIHNvdXJjZVRMWzBdICsgZGVzdGluYXRpb25UTFswXVxuICAgICAgY29uc3QgZGVzdGluYXRpb25ZID0gZXZlbnQuZGF0YS5kZXN0aW5hdGlvbi55IC0gc291cmNlVExbMV0gKyBkZXN0aW5hdGlvblRMWzFdXG4gICAgICBhd2FpdCBldmVudC5kYXRhLnRva2VuLm9iamVjdC5zdG9wQW5pbWF0aW9uKCkgLy8gUGFuaWNcbiAgICAgIGV2ZW50LmRhdGEudG9rZW4udXBkYXRlKHsgeDogZGVzdGluYXRpb25YLCB5OiBkZXN0aW5hdGlvblkgfSwgeyBhbmltYXRlOiBmYWxzZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBNYXBQaW5Ub2dnbGUgKHRvZ2dsZSwgeyBqb3VybmFsUGFnZVV1aWRzID0gW10sIG5vdGVVdWlkcyA9IFtdLCBwZXJtaXNzaW9uRmFsc2UgPSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkUsIHBlcm1pc3Npb25UcnVlID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUiB9ID0ge30pIHtcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHsgdHlwZTogJ3RvZ2dsZU1hcE5vdGVzJywgdG9nZ2xlOiB0cnVlIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ2NvcmUnLCBOb3Rlc0xheWVyLlRPR0dMRV9TRVRUSU5HLCB0cnVlKVxuICAgIGZvciAoY29uc3QgZG9jVXVpZCBvZiBqb3VybmFsUGFnZVV1aWRzKSB7XG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBmcm9tVXVpZChkb2NVdWlkKVxuICAgICAgaWYgKGRvYykge1xuICAgICAgICBsZXQgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25UcnVlXG4gICAgICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICAgICAgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25GYWxzZVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGRvYy51cGRhdGUoeyAnb3duZXJzaGlwLmRlZmF1bHQnOiBwZXJtaXNzaW9uIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdqb3VybmFsUGFnZVV1aWRzICcgKyBkb2NVdWlkICsgJyBub3QgbG9hZGVkJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRvY1V1aWQgb2Ygbm90ZVV1aWRzKSB7XG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBmcm9tVXVpZChkb2NVdWlkKVxuICAgICAgaWYgKGRvYykge1xuICAgICAgICBsZXQgdGV4dHVyZSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2FydC9tYXAtcGluLnN2ZydcbiAgICAgICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgICAgICB0ZXh0dXJlID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvYXJ0L21hcC1waW4tZGFyay5zdmcnXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgZG9jLnVwZGF0ZSh7ICd0ZXh0dXJlLnNyYyc6IHRleHR1cmUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ25vdGVVdWlkcyAnICsgZG9jVXVpZCArICcgbm90IGxvYWRlZCcpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9wZW5Eb2N1bWVudCAoZG9jdW1lbnRVdWlkLCBwYWdlSWQgPSBudWxsLCBhbmNob3IgPSBudWxsKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jdW1lbnRVdWlkKVxuICAgIGlmIChkb2M/LnRlc3RVc2VyUGVybWlzc2lvbihnYW1lLnVzZXIsIENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpKSB7XG4gICAgICBpZiAocGFnZUlkKSB7XG4gICAgICAgIGlmIChkb2MucGFnZXMuZ2V0KHBhZ2VJZCk/LnRlc3RVc2VyUGVybWlzc2lvbihnYW1lLnVzZXIsIENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpKSB7XG4gICAgICAgICAgZG9jLnNoZWV0LnJlbmRlcih0cnVlLCB7IHBhZ2VJZCwgYW5jaG9yIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvYy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlVGlsZUpvdXJuYWxQYWdlcyAoYWN0aXZlLCB0aWxlVXVpZHMsIGpvdXJuYWxVdWlkcywgcGFnZVV1aWRzLCB7IHBhZ2VQZXJtaXNzaW9uID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUiB9ID0ge30pIHtcbiAgICBmb3IgKGNvbnN0IGRvY1V1aWQgb2YgdGlsZVV1aWRzKSB7XG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBmcm9tVXVpZChkb2NVdWlkKVxuICAgICAgaWYgKGRvYykge1xuICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHsgaGlkZGVuOiAhYWN0aXZlIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdUaWxlICcgKyBkb2NVdWlkICsgJyBub3QgbG9hZGVkJylcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGVybWlzc2lvbiA9ICghYWN0aXZlID8gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FIDogcGFnZVBlcm1pc3Npb24pXG4gICAgZm9yIChjb25zdCBkb2NVdWlkIG9mIHBhZ2VVdWlkcykge1xuICAgICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgYXdhaXQgZG9jLnVwZGF0ZSh7ICdvd25lcnNoaXAuZGVmYXVsdCc6IHBlcm1pc3Npb24gfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pvdXJuYWwgUGFnZSAnICsgZG9jVXVpZCArICcgbm90IGxvYWRlZCcpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIERvIG5vdCBub25lIC8gb3duZXIgam91cm5hbHMgaWYgYW55IGVudHJpZXMgZG8gbm90IG1hdGNoXG4gICAgZm9yIChjb25zdCBkb2NVdWlkIG9mIGpvdXJuYWxVdWlkcykge1xuICAgICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoZG9jVXVpZClcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgaWYgKHBhZ2VVdWlkcy5sZW5ndGggPT09IDAgfHwgcGVybWlzc2lvbiA9PT0gcGFnZVBlcm1pc3Npb24gfHwgZG9jLnBhZ2VzLmNvbnRlbnRzLmZpbHRlcihkID0+IGQub3duZXJzaGlwLmRlZmF1bHQgPT09IHBhZ2VQZXJtaXNzaW9uKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHsgJ293bmVyc2hpcC5kZWZhdWx0JzogKCFhY3RpdmUgPyBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkUgOiBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdKb3VybmFsICcgKyBkb2NVdWlkICsgJyBub3QgbG9hZGVkJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9TY2VuZSAoc2NlbmVVdWlkKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoc2NlbmVVdWlkKVxuICAgIGlmIChkb2MpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb2MudmlldygpXG4gICAgICB9LCAxMDApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NjZW5lICcgKyBzY2VuZVV1aWQgKyAnIG5vdCBsb2FkZWQnKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZnJvbVV1aWQsIEhvb2tzLCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBjb25maWd1cmVEb2N1bWVudHMgfSBmcm9tICcuLi9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMnXG5pbXBvcnQgeyBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyB9IGZyb20gJy4uL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMnXG5pbXBvcnQgeyByZWdpc3RlclNldHRpbmdzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2hlZXRzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMnXG5pbXBvcnQgeyBoYW5kbGViYXJzSGVscGVyIH0gZnJvbSAnLi4vc2NyaXB0cy9oYW5kbGViYXJzLWhlbHBlci5qcydcbmltcG9ydCB7IGNvbXBlbmRpdW1GaWx0ZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBlbmRpdW0tZmlsdGVyLmpzJ1xuaW1wb3J0IHsgQ29DSUQgfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUmVhZHlMYXN0IGZyb20gJy4vZGljZS1zby1uaWNlLXJlYWR5LWxhc3QuanMnXG5pbXBvcnQgQ29DN0NsaWNrYWJsZUV2ZW50cyBmcm9tICcuLi9hcHBzL2NvYzctY2xpY2thYmxlLWV2ZW50cy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2luaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uZmlndXJlRG9jdW1lbnRzKClcbiAgICBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcygpXG4gICAgcmVnaXN0ZXJTZXR0aW5ncygpXG4gICAgcmVnaXN0ZXJTaGVldHMoKVxuICAgIGhhbmRsZWJhcnNIZWxwZXIoKVxuICAgIGNvbXBlbmRpdW1GaWx0ZXIoKVxuICAgIENvQ0lELmluaXQoKVxuICAgIENvQzdMaW5rLmluaXQoKVxuICAgIERpY2VTb05pY2VSZWFkeUxhc3QubGlzdGVuKClcbiAgICBDb0M3Q2xpY2thYmxlRXZlbnRzLmluaXRTZWxmKClcblxuICAgIENPTkZJRy5UZXh0RWRpdG9yLmVucmljaGVycy5wdXNoKHtcbiAgICAgIHBhdHRlcm46IC9AY2hhb3NpdW1VVUlEXFxbKFteI1xcXV0rKSg/OiMoW15cXF1dKykpP10oPzp7KFtefV0rKX0pPy9naSxcbiAgICAgIGVucmljaGVyOiBhc3luYyAobWF0Y2gsIHsgcmVsYXRpdmVUbyB9ID0ge30pID0+IHtcbiAgICAgICAgY29uc3QgW3NlbGVjdG9ycywgaGFzaCwgbmFtZV0gPSBtYXRjaC5zbGljZSgxLCA0KVxuICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGNsYXNzZXM6IFsnY29udGVudC1saW5rJywgJ2Jyb2tlbiddLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdW5saW5rJ1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnRzID0gc2VsZWN0b3JzPy5zcGxpdCgvXFxzKixcXHMqLylcbiAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgY29uc3Qga2V5cyA9IHBhcnRzLnJlZHVjZSgoYywgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5dmFsID0gaS5tYXRjaCgvXigoW146XSspOikoLispPyQvKVxuICAgICAgICAgICAgaWYgKGtleXZhbCkge1xuICAgICAgICAgICAgICBjW2tleXZhbFsyXV0gPSBrZXl2YWxbM11cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGMudXVpZCA9IGlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSwge30pXG4gICAgICAgICAgaWYgKGtleXMudXVpZCkge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gYXdhaXQgZnJvbVV1aWQoa2V5cy51dWlkLCB7IHJlbGF0aXZlOiByZWxhdGl2ZVRvIH0pXG4gICAgICAgICAgICBpZiAoZG9jKSB7XG4gICAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSB8fCBkb2MubmFtZSB8fCBrZXlzLnV1aWQsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogWydjb250ZW50LWxpbmsnXSxcbiAgICAgICAgICAgICAgICBkYXRhc2V0OiB7XG4gICAgICAgICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgICAgICAgIHV1aWQ6IGRvYy51dWlkLFxuICAgICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgIHR5cGU6IGRvYy5kb2N1bWVudE5hbWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGljb246IGtleXMuaWNvbiA/PyBDT05GSUdbZG9jLmRvY3VtZW50TmFtZV0uc2lkZWJhckljb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaGFzaCkge1xuICAgICAgICAgICAgICAgIGRhdGEuZGF0YXNldC5oYXNoID0gaGFzaFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChrZXlzLmltZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICAgICAgICAgICAgICBhLmNsYXNzTGlzdC5hZGQoZGF0YS5jbGFzc2VzKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YXNldCkpIHtcbiAgICAgICAgICAgICAgICAgIGlmICgodiAhPT0gbnVsbCkgJiYgKHR5cGVvZiB2ICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5kYXRhc2V0W2tdID0gdlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIiR7a2V5cy5pbWd9XCIgaGVpZ2h0PVwiMTZweFwiIHN0eWxlPVwidmVydGljYWwtYWxpZ246Ym90dG9tO2JvcmRlcjowO1wiPiR7ZGF0YS5uYW1lfWBcbiAgICAgICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFRleHRFZGl0b3IuY3JlYXRlQW5jaG9yKGRhdGEpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0Jvb2sgfSBmcm9tICcuLi9pdGVtcy9ib29rL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlIH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvZGF0YS5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDb0M3U2tpbGwgfSBmcm9tICcuLi9pdGVtcy9za2lsbC9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGUgfSBmcm9tICcuLi9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlRG9jdW1lbnRzICgpIHtcbiAgQ09ORklHLkFjdGl2ZUVmZmVjdC5kb2N1bWVudENsYXNzID0gQ29DN0FjdGl2ZUVmZmVjdFxuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzcyA9IENvQ0FjdG9yXG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgdmVoaWNsZTogQ29DN1ZlaGljbGVcbiAgfVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID0gQ29DN0l0ZW1cbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzID0ge1xuICAgIGJvb2s6IENvQzdCb29rLFxuICAgIHNwZWxsOiBDb0M3U3BlbGwsXG4gICAgY2hhc2U6IENvQzdDaGFzZSxcbiAgICBza2lsbDogQ29DN1NraWxsXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBsb2FkVGVtcGxhdGVzICovXG5cbi8qKlxuICogRGVmaW5lIGEgc2V0IG9mIHRlbXBsYXRlIHBhdGhzIHRvIHByZS1sb2FkXG4gKiBQcmUtbG9hZGVkIHRlbXBsYXRlcyBhcmUgY29tcGlsZWQgYW5kIGNhY2hlZCBmb3IgZmFzdCBhY2Nlc3Mgd2hlbiByZW5kZXJpbmdcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBjb25zdCBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgLyoqIERlZmluZSB0ZW1wbGF0ZSBwYXRocyB0byBsb2FkICovXG4gIGNvbnN0IHRlbXBsYXRlUGF0aHMgPSBbXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1za2lsbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1jb21iYXQuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItaW52ZW50b3J5Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnktaXRlbXMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWJhY2tncm91bmQuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY29tbW9uL2FjdGl2ZS1lZmZlY3RzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Ita2VlcGVyLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Itc2tpbGxzLXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jaGFyYWN0ZXItZGV2ZWxvcG1lbnQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2RldmVsb3BtZW50LWNvbnRyb2xzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy92aXRhbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NvbWJhdC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyLXNoZWV0LXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXIvc3VtbWFyeS5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV0YWlscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9kZXRhaWxzLmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2ludHJvZHVjdGlvbi5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9jb25maWd1cmF0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1zZXR1cC5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZWxlY3QtYXJjaGV0eXBlLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1vY2N1cGF0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1jaGFyYWN0ZXJpc3RpY3MuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWF0dHJpYnV0ZXMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvdmlldy1hdHRyaWJ1dGVzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1pbnZlc3RpZ2F0b3IuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LW9jY3VwYXRpb24tc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3RvZ2dsZS1za2lsbC5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtYXJjaGV0eXBlLXNraWxscy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9wb2ludHMtc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2JhY2tzdG9yeS5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9jcmVhdGUuaGJzJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvbWVzc2FnZXMvcm9sbC1jb250YWluZXIuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L21lc3NhZ2VzL3JvbGwtZGljZS5oYnMnXG4gIF1cblxuICAvKiogTG9hZCB0aGUgdGVtcGxhdGUgcGFydHMgKi9cbiAgcmV0dXJuIGxvYWRUZW1wbGF0ZXModGVtcGxhdGVQYXRocylcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIENPTlNULCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS5qcydcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllT3RoZXIgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0dhbWVSdWxlU2V0dGluZ3MgfSBmcm9tICcuL2dhbWUtcnVsZXMuanMnXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgLyoqXG4gICAqIFJ1bGVzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyTWVudSgnQ29DNycsICdnYW1lUnVsZXMnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTmFtZScsXG4gICAgbGFiZWw6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLkxhYmVsJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5IaW50JyxcbiAgICBpY29uOiAnZmFzIGZhLWJvb2snLFxuICAgIHR5cGU6IENvQzdHYW1lUnVsZVNldHRpbmdzLFxuICAgIHJlc3RyaWN0ZWQ6IHRydWVcbiAgfSlcbiAgQ29DN0dhbWVSdWxlU2V0dGluZ3MucmVnaXN0ZXJTZXR0aW5ncygpXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd1c2VDb250ZXh0TWVudXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZUNvbnRleHRNZW51cycsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZUNvbnRleHRNZW51c0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5EaG9sZVVwbG9hZC5EaXJlY3RvcnkuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuRGhvbGVVcGxvYWQuRGlyZWN0b3J5LkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBDb0M3RGlyZWN0b3J5UGlja2VyLkRlZmF1bHREaXJlY3RvcnksXG4gICAgZGVmYXVsdDogJ1tkYXRhXSB3b3JsZHMvJyArIGdhbWUud29ybGQuaWQgKyAnL2Rob2xlLWltYWdlcydcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3dvcmxkRXJhJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLldvcmxkRXJhLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLldvcmxkRXJhLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnc3RhbmRhcmQnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiBDT0M3LmVyYXMsXG4gICAgb25DaGFuZ2U6ICgpID0+IHtcbiAgICAgIHVpLnBsYXllcnMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZHJvcENvQ0lEJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICcnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICAnJzogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlByb21wdCcsXG4gICAgICBZOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuVXNlQ29DSUQnLFxuICAgICAgTjogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELklnbm9yZUNvQ0lEJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogSW5pdGlhdGl2ZVxuICAgKi9cbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogUm9sbCBjdXN0b21pc2Fpb25zXG4gICAqL1xuICAvKiogU3RhbmRieSByb2xscyBtYWRlIGJ5IEdNIGZyb20gcGxheWVyIHNoZWV0ICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xscycsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgZGljZSBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCB0aHJlc2hvbGQgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAncmVndWxhcicsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIHJlZ3VsYXI6ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlSZWd1bGFyJyxcbiAgICAgIHVua25vd246ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlVbmtub3duJ1xuICAgIH1cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnZXZlcnlvbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBub2JvZHk6ICdTRVRUSU5HUy5Eb05vdEFkdmlzZScsXG4gICAgICBvd25lcnM6ICdTRVRUSU5HUy5BZHZpc2VPd25lcnNPbmx5JyxcbiAgICAgIGV2ZXJ5b25lOiAnU0VUVElOR1MuQWR2aXNlQWxsUGxheWVyJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogQ2hhdCBDYXJkc1xuICAgKi9cbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gbW9kaWZ5IGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBUcnVzdGVkIHBsYXllcnMgd2lsbCBiZSBhbGxvd2VkIHRvIHNlZSBjaGF0IGNhcmRzIHByaXZhdGUgc2VjdGlvbnMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuU2VlQ2hhdENhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIG5lZWQgdG8gZGlzcGxheSBhY3RvciBpbWFnZSBvbiBjaGF0IGNhcmRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5UmVzdWx0VHlwZScsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIHVzZSBvZiB0b2tlbiBpbnN0ZWFkIG9mIHBvcnRyYWl0cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZVRva2VuJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VUb2tlbicsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZVRva2VuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogU2NlbmUgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZ3JpZFNwYWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQ2hlY2tFbGV2YXRpb24nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZVRoZWF0cmVPZlRoZU1pbmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNjZW5lRGlzdGFuY2VOb3RDYWxjdWFsdGVkTm9FcnJvcicsXG4gICAgaGludDogJ1NFVFRJTkdTLlNjZW5lRGlzdGFuY2VOb3RDYWxjdWFsdGVkTm9FcnJvckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBEZWZhdWx0IGJlaGF2aW9yIHdoZW4gTlBDIGlzIGNyZWF0ZWQgb24gYSBzY2VuZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Rva2VuRHJvcE1vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRva2VuRHJvcE1vZGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdhc2snLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBhc2s6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlQXNrJyxcbiAgICAgIHJvbGw6ICdTRVRUSU5HUy5Ub2tlbkRyb3BNb2RlUm9sbCcsXG4gICAgICBhdmVyYWdlOiAnU0VUVElOR1MuVG9rZW5Ecm9wTW9kZUF2ZXJhZ2UnLFxuICAgICAgaWdub3JlOiAnU0VUVElOR1MuVG9rZW5Ecm9wTW9kZUlnbm9yZSdcbiAgICB9XG4gIH0pXG4gIC8qKlxuICAgKiBHYW1lIEFydHdvcmsgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVHYW1lQXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlR2FtZUFydHdvcmtIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZUltYWdlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlSW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFBhdXNlSW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGltZS10cmFwLnN2ZycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0UGF1c2VUZXh0SGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdUaGUgQmxpbmQgSWRpb3QgR29kIGlzIGRyZWFtaW5nLi4uJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogU2hlZXQgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndG9vbFRpcERlbGF5Jywge1xuICAgIG5hbWU6ICdDb0M3LnRvb2xUaXBEZWxheScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IDIwMDAsXG4gICAgdHlwZTogTnVtYmVyXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd0ljb25zT25seScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1Muc2hvd0ljb25zT25seScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHBsYXllciB0byB1bmxvY2sgdGhlIHNoZWV0IG91dHNpZGUgb2YgY3JlYXRpb24gbW9kZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUGxheWVyVW5sb2NrU2hlZXRNb2RlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ2Fsd2F5cycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIGFsd2F5czogJ1NFVFRJTkdTLkFsd2F5c0VkaXRhYmxlJyxcbiAgICAgIGNyZWF0aW9uOiAnU0VUVElOR1MuQ3JlYXRpb25Nb2RlT25seScsXG4gICAgICBuZXZlcjogJ1NFVFRJTkdTLk5ldmVyRWRpdGFibGUnXG4gICAgfVxuICB9KVxuICAvKiogQWxsb3cgcGxheWVyIHRvIG1vZGlmeSBzdGF0dXMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzdGF0dXNQbGF5ZXJFZGl0YWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TdGF0dXNQbGF5ZXJFZGl0YWJsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT25lQmxvY2tCYWNrU3RvcnknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmtIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnKSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJykgNCByZXBlYXRcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdzbGljZScsXG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBjaG9pY2VzOiB7XG4gICAgICAgIHNsaWNlOiAnU0VUVElOR1MuQmFja2dyb3VuZFNsaWNlJyxcbiAgICAgICAgYXV0bzogJ1NFVFRJTkdTLkJhY2tncm91bmRBdXRvJyxcbiAgICAgICAgY29udGFpbjogJ1NFVFRJTkdTLkJhY2tncm91bmRDb250YWluJyxcbiAgICAgICAgY292ZXI6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ292ZXInXG4gICAgICB9XG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCggJy4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kLndlYnAnKVwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrU2hlZXRJbWFnZUhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL3RlbnRhY2xlcy53ZWJwJylcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRnJvbnRDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoNDMsNTUsODMsMSknLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0JhY2tncm91bmRDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0JhY2tncm91bmRDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSgxMDMsMTEsMTEsMSknLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrSW50ZXJhY3RpdmVDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSgxMDMsMTEsMTEsMSknLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtGaXhlZFNraWxsTGVuZ3RoJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnRCb2xkJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnRTaXplJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogMTYsXG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBvbkNoYW5nZTogc2l6ZSA9PiBfc2V0Um9vdEZvbnRTaXplKHNpemUpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIF9zZXRSb290Rm9udFNpemUgKHNpemUpIHtcbiAgICAgICQoJzpyb290JykuY3NzKCdmb250LXNpemUnLCBzaXplKVxuICAgICAgdWkuc2lkZWJhci5yZW5kZXIodHJ1ZSlcbiAgICAgIGZvciAoY29uc3QgWywgd10gb2YgT2JqZWN0LmVudHJpZXModWkud2luZG93cykpIHtcbiAgICAgICAgdy5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2VhcG9uc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNyZWdhcmRVc2VQZXJSb3VuZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkQW1tbycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcmVnYXJkQW1tbycsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW9IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBDaGFzZXNcbiAgICovXG4gIC8vIE1PVkVEIFRPIENIQVNTRSBJTkRJVklEVUFMIFNFVFRJTkdcbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdjaGFzZVNob3dUb2tlbk1vdmVtZW50Jywge1xuICAvLyAgIG5hbWU6ICdTRVRUSU5HUy5DaGFzZVNob3dUb2tlbk1vdmVtZW50JyxcbiAgLy8gICBoaW50OiAnU0VUVElOR1MuQ2hhc2VTaG93VG9rZW5Nb3ZlbWVudEhpbnQnLFxuICAvLyAgIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgIGNvbmZpZzogdHJ1ZSxcbiAgLy8gICBkZWZhdWx0OiB0cnVlLFxuICAvLyAgIHR5cGU6IEJvb2xlYW5cbiAgLy8gfSlcblxuICAvKipcbiAgICogRGljZSBTbyBOaWNlXG4gICAqL1xuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3luY0RpY2UzZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5TeW5jRGljZTNEJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5TeW5jRGljZTNESGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSlcbiAgICBjb25zdCBbdmVyc2lvbl0gPSBnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8udmVyc2lvbi5zcGxpdCgnLicpXG4gICAgaWYgKCFpc05hTihOdW1iZXIodmVyc2lvbikpICYmIE51bWJlcih2ZXJzaW9uKSA+PSAzKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RlbkRpZUJvbnVzJywge1xuICAgICAgICBuYW1lOiAnU0VUVElOR1MuVGVuRGllQm9udXMnLFxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllQm9udXNIaW50JyxcbiAgICAgICAgc2NvcGU6ICdjbGllbnQnLFxuICAgICAgICBjb25maWc6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICdicm9uemUnLFxuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgIH0pXG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknLCB7XG4gICAgICAgIG5hbWU6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5JyxcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHlIaW50JyxcbiAgICAgICAgc2NvcGU6ICdjbGllbnQnLFxuICAgICAgICBjb25maWc6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICdibG9vZG1vb24nLFxuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldmVsb3BlciBhbmQgZGVidWcgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVidWdtb2RlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EZWJ1Z01vZGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWJ1Z01vZGVIaW50JyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdleHBlcmltZW50YWxGZWF0dXJlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU2hvd0V4cGVyaW1lbnRhbEZlYXR1cmVzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU2hvd0V4cGVyaW1lbnRhbEZlYXR1cmVzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgLyoqXG4gICAqIE90aGVyIHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnLCB7XG4gICAgbmFtZTogJ0hpZGRlbiBkZXYgbWVudScsXG4gICAgaGludDogJ1VzZSBhdCB5b3VyIG93biByaXNrJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0RldiBwaGFzZWQgYWxsb3dlZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIC8qKiBGZWF0OiB3ZWxjb21lIG1lc3NhZ2UgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93V2VsY29tZU1lc3NhZ2UnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLnNob3dXZWxjb21lTWVzc2FnZScsXG4gICAgaGludDogJ1NFVFRJTkdTLnNob3dXZWxjb21lTWVzc2FnZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywge1xuICAgIG5hbWU6ICdDaGFyIGNyZWF0aW9uIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nLCB7XG4gICAgbmFtZTogJ1N5c3RlbSB1cGRhdGUgdmVyc2lvbicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJzAnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nLCB7XG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiB7fVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3hwRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnRW5hYmxlIFhQIGdhaW4nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycsIHtcbiAgICBuYW1lOiAnU2hvdyBjaGFuZ2Vsb2cvaW5zdHJ1Y3Rpb25zJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnMCdcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRTZXR1cCcsIHtcbiAgICBuYW1lOiAnRm9yY2Ugc3BlY2lmaWMgc2V0dXAgQ29DIElEIGZvciBJbnZlc3RpZ2F0b3IgV2l6YXJkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5Jywge1xuICAgIG5hbWU6ICdOdW1iZXIgb2YgaW52ZXN0aWdhdG9ycyBhIHNpbmdsZSB1c2VyIHdpdGhvdXQgY3JlYXRlIGFjdG9yIHJpZ2h0cyBjYW4gb3duJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkT3duZXJzaGlwJywge1xuICAgIG5hbWU6ICdEZWZhdWx0IHBlcm1pc3Npb25zIGZvciBub24gb3duZXIgcGxheWVycycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUmVyb2xscycsIHtcbiAgICBuYW1lOiAnQWxsb3cgcGxheWVycyB0byByZXJvbGwgY2hhcmFjdGVyaXN0aWNzJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRQb2ludEJ1eScsIHtcbiAgICBuYW1lOiAnRm9yY2UgcG9pbnQgYnV5IGluc3RlYWQgb2Ygc2V0dXAgY2hvaWNlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnLCB7XG4gICAgbmFtZTogJ1F1aWNrIGZpcmUgc2V0dXAgdmFsdWVzJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEFycmF5LFxuICAgIGRlZmF1bHQ6IFtdXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkQ2hvb3NlVmFsdWVzJywge1xuICAgIG5hbWU6ICdDaG9vc2Ugd2hlcmUgdG8gcGxhY2Ugcm9sbGVkIGNoYXJhY3RlcmlzdGljcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXVxuICB9KVxuICAvKiogU2V0IGFuIGluaXRpYXRpdmUgZm9ybXVsYSBmb3IgdGhlIHN5c3RlbSAqL1xuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogJ0BjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgICBkZWNpbWFsczogNFxuICB9XG4gIENPTkZJRy5kZWJ1Zy5ob29rcyA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVidWdtb2RlJylcbiAgQ09ORklHLkRpY2UudGVybXMudCA9IENvQzdEZWNhZGVyRGllXG4gIENPTkZJRy5EaWNlLnRlcm1zLm8gPSBDb0M3RGVjYWRlckRpZU90aGVyXG59XG4iLCIvKiBnbG9iYWwgQWN0b3JzLCBBY3RvclNoZWV0LCBJdGVtcywgSXRlbVNoZWV0LCBKb3VybmFsLCBKb3VybmFsU2hlZXQsIE1hY3JvQ29uZmlnLCBNYWNyb3MsIFBsYXlsaXN0Q29uZmlnLCBQbGF5bGlzdHMsIFJvbGxUYWJsZXMsIFJvbGxUYWJsZUNvbmZpZywgU2NlbmVzLCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgQ29DN0FyY2hldHlwZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2FyY2hldHlwZS5qcydcbmltcG9ydCB7IENvQzdCb29rU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9ib29rL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q29udGFpbmVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2Uvc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzJ1xuaW1wb3J0IHsgQ29DN0pvdXJuYWxTaGVldCB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3TWFjcm9Db25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdQbGF5bGlzdENvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdSb2xsVGFibGVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTY2VuZUNvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTZXR1cFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NldHVwLmpzJ1xuaW1wb3J0IHsgQ29DN1NraWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2tpbGwuanMnXG5pbXBvcnQgeyBDb0M3U3BlbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1N0YXR1c1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3N0YXR1cy5qcydcbmltcG9ydCB7IENvQzdUYWxlbnRTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZVNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN1dlYXBvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2hlZXRzICgpIHtcbiAgQWN0b3JzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEFjdG9yU2hlZXQpXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN05QQ1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnbnBjJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3VmVoaWNsZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsndmVoaWNsZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NyZWF0dXJlU2hlZXQsIHtcbiAgICB0eXBlczogWydjcmVhdHVyZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NvbnRhaW5lclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY29udGFpbmVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhcmFjdGVyU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFyYWN0ZXInXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIEl0ZW1zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEl0ZW1TaGVldClcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTa2lsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2tpbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1dlYXBvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnd2VhcG9uJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdCb29rU2hlZXQsIHtcbiAgICB0eXBlczogWydib29rJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTcGVsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc3BlbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1RhbGVudFNoZWV0LCB7XG4gICAgdHlwZXM6IFsndGFsZW50J10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTdGF0dXNTaGVldCwge1xuICAgIHR5cGVzOiBbJ3N0YXR1cyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3T2NjdXBhdGlvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnb2NjdXBhdGlvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3QXJjaGV0eXBlU2hlZXQsIHtcbiAgICB0eXBlczogWydhcmNoZXR5cGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NldHVwU2hlZXQsIHtcbiAgICB0eXBlczogWydzZXR1cCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NoYXNlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdJdGVtU2hlZXQsIHsgdHlwZXM6IFsnaXRlbSddIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0VjIsIHtcbiAgICB0eXBlczogWydpdGVtJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBTY2VuZXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgU2NlbmVDb25maWcpXG4gIFNjZW5lcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NjZW5lQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBKb3VybmFsLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEpvdXJuYWxTaGVldClcbiAgSm91cm5hbC5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0pvdXJuYWxTaGVldCwge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgUm9sbFRhYmxlcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBSb2xsVGFibGVDb25maWcpXG4gIFJvbGxUYWJsZXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdSb2xsVGFibGVDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIE1hY3Jvcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBNYWNyb0NvbmZpZylcbiAgTWFjcm9zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3TWFjcm9Db25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFBsYXlsaXN0cy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBQbGF5bGlzdENvbmZpZylcbiAgUGxheWxpc3RzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3UGxheWxpc3RDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhhbmRsZWJhcnMgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY29uc3QgaGFuZGxlYmFyc0hlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncm9sbEFjdG9ySW1nJywgZnVuY3Rpb24gKGFjdG9yS2V5KSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkoYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfSlcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignbG9jYWxpemVSb2xsTmFtZScsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9IG9wdGlvbnMuaGFzaC5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyBmYWxzZSA6IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKG9wdGlvbnMuaGFzaC5kaWZmaWN1bHR5KVxuICAgIGNvbnN0IG1vZGlmaWVyID0gKG9wdGlvbnMuaGFzaC5tb2RpZmllciA+IDAgPyBgKyR7b3B0aW9ucy5oYXNoLm1vZGlmaWVyfWAgOiBvcHRpb25zLmhhc2gubW9kaWZpZXIgPCAwID8gb3B0aW9ucy5oYXNoLm1vZGlmaWVyLnRvU3RyaW5nKCkgOiBmYWxzZSlcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MaW5rQ2hlY2snICsgKCFkaWZmaWN1bHR5ID8gJycgOiAnRGlmZicpICsgKCFtb2RpZmllciA/ICcnIDogJ01vZGlmJykgKyAoIW9wdGlvbnMuaGFzaC5wdXNoaW5nID8gJycgOiAnUHVzaGluZycpLCB7IGRpZmZpY3VsdHksIG1vZGlmaWVyLCBuYW1lOiBvcHRpb25zLmhhc2gubmFtZSB9KVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgnZGljZVNvTmljZVJlYWR5JywgZGljZTNkID0+IHtcbiAgICBmb3IgKGNvbnN0IHN5c3RlbSBpbiBkaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtcykge1xuICAgICAgY29uc3QgZDEwMCA9IGRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zW3N5c3RlbV0uZGljZS5maW5kKGQgPT4gZC50eXBlID09PSAnZDEwMCcpXG4gICAgICBpZiAodHlwZW9mIGQxMDAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc3lzdGVtXS5kaWNlLmZpbmQoZCA9PiBkLnR5cGUgPT09ICdkdCcpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGRpY2VEZWNhZGVyID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihkMTAwKSksIGQxMDApXG4gICAgICAgICAgZGljZURlY2FkZXIudHlwZSA9ICdkdCdcbiAgICAgICAgICBkaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzeXN0ZW1dLmRpY2UucHVzaChkaWNlRGVjYWRlcilcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zW3N5c3RlbV0uZGljZS5maW5kKGQgPT4gZC50eXBlID09PSAnZG8nKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBkaWNlRGVjYWRlciA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoZDEwMCkpLCBkMTAwKVxuICAgICAgICAgIGRpY2VEZWNhZGVyLnR5cGUgPSAnZG8nXG4gICAgICAgICAgZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc3lzdGVtXS5kaWNlLnB1c2goZGljZURlY2FkZXIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdUb29sdGlwcyB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLlRvb2xUaXBIb3ZlciA9IG51bGxcbiAgICB0aGlzLnRvb2xUaXBUaW1lciA9IG51bGxcbiAgfVxuXG4gIGRpc3BsYXlUb29sVGlwICh0b29sVGlwKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuVG9vbFRpcEhvdmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBpZiAoIWlzTmFOKGJvdW5kcy5sZWZ0IHx8ICcnKSAmJiAhaXNOYU4oYm91bmRzLnRvcCB8fCAnJykpIHtcbiAgICAgICAgbGV0IGxlZnQgPSBib3VuZHMubGVmdFxuICAgICAgICBsZXQgdG9wID0gYm91bmRzLnRvcFxuICAgICAgICBjb25zdCBoZWlnaHRUZXh0ID0gJCh0aGlzLlRvb2xUaXBIb3Zlcikub3V0ZXJIZWlnaHQoKVxuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiaGVscC10b29sdGlwXCI+JyArIHRvb2xUaXAgKyAnPC9kaXY+JylcbiAgICAgICAgY29uc3QgdGlwID0gJCgnI2hlbHAtdG9vbHRpcCcpXG4gICAgICAgIGNvbnN0IGhlaWdodFRpcCA9IHRpcC5vdXRlckhlaWdodCgpXG4gICAgICAgIGNvbnN0IHdpZHRoVGlwID0gdGlwLm91dGVyV2lkdGgoKVxuICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgaGVpZ2h0VGV4dCAqIDEuNSArIGhlaWdodFRpcCArIHRvcCkge1xuICAgICAgICAgIHRvcCA9IHRvcCAtIGhlaWdodFRpcFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvcCA9IHRvcCArIGhlaWdodFRleHQgKiAxLjVcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCB3aWR0aFRpcCArIGxlZnQpIHtcbiAgICAgICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSB3aWR0aFRpcFxuICAgICAgICB9XG4gICAgICAgIHRpcC5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGxlZnQgKyAncHgnLFxuICAgICAgICAgIHRvcDogdG9wICsgJ3B4J1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBMZWF2ZSAoZXZlbnQpIHtcbiAgICBpZiAoZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyKVxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gbnVsbFxuICAgICAgJCgnI2hlbHAtdG9vbHRpcCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgTXV0YXRpb25PYnNlcnZlciwgVG91ciwgdWkgKi9cbmxldCBDb0M3VG91ciA9IGNsYXNzIGludGVybmFsQ29DN1RvdXIge31cbmlmICh0eXBlb2YgVG91ciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgQ29DN1RvdXIgPSBjbGFzcyBpbnRlcm5hbENvQzdUb3VyIGV4dGVuZHMgVG91ciB7XG4gICAgYXN5bmMgd2FpdEZvckVsZW1lbnQgKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGFzeW5jIF9wcmVTdGVwICgpIHtcbiAgICAgIGF3YWl0IHN1cGVyLl9wcmVTdGVwKClcblxuICAgICAgLy8gQ2xvc2UgY3VycmVudGx5IG9wZW4gYXBwbGljYXRpb25zXG4gICAgICBpZiAodGhpcy5zdGVwSW5kZXggPT09IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHAgb2YgT2JqZWN0LnZhbHVlcyh1aS53aW5kb3dzKSkge1xuICAgICAgICAgIGFwcC5jbG9zZSgpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRWxlbWVudCh0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudFN0ZXAuc2lkZWJhclRhYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdWkuc2lkZWJhci5hY3RpdmF0ZVRhYih0aGlzLmN1cnJlbnRTdGVwLnNpZGViYXJUYWIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgX3Bvc3RTdGVwICgpIHtcbiAgICAgIGF3YWl0IHN1cGVyLl9wb3N0U3RlcCgpXG4gICAgICBpZiAodGhpcy5zdGVwSW5kZXggPCAwIHx8ICF0aGlzLmhhc05leHQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5jdXJyZW50U3RlcC5hY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmlzUmVzZXR0aW5nKSB7XG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSBmYWxzZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRTdGVwLmFjdGlvbikge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKS5jbGljaygpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZXNldCAoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSB0cnVlXG4gICAgICB9XG4gICAgICBhd2FpdCBzdXBlci5yZXNldCgpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IENvQzdUb3VyIH1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5ICovXG5pbXBvcnQgeyBDb0M3VG91ciB9IGZyb20gJy4uL2FwcHMvY29jNy10b3VyLmpzJ1xuXG5leHBvcnQgY2xhc3MgRW5hYmxlVmFyaWFudFJ1bGVzRW4gZXh0ZW5kcyBDb0M3VG91ciB7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICBzdXBlcihmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHtcbiAgICAgIHRpdGxlOiAnRW5hYmxlIG9wdGlvbmFsL3ZhcmlhbnQgcnVsZXMuJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTGVhcm4gaG93IHRvIGVuYWJsZSBQdWxwIEN0aHVsaHUgcnVsZXMsIG9yIG90aGVyIHZhcmlhbnQgcnVsZXMnLFxuICAgICAgY2FuQmVSZXN1bWVkOiBmYWxzZSxcbiAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICBzdGVwczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLXNldHRpbmdzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJy50YWJzPmFbZGF0YS10YWI9XCJzZXR0aW5nc1wiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCcsXG4gICAgICAgICAgc2lkZWJhclRhYjogJ3NldHRpbmdzJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLWNvbmZpZ3VyZScsXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS1hY3Rpb249XCJjb25maWd1cmVcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tc3lzdGVtLXNldHRpbmdzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLXRhYj1cInN5c3RlbVwiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tZ2FtZS1ydWxlcycsXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS1jYXRlZ29yeT1cInN5c3RlbVwiXSBbZGF0YS1rZXk9XCJDb0M3LmdhbWVSdWxlc1wiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnc2F2ZS1nYW1lLXJ1bGVzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJyNydWxlcy1zZXR0aW5ncyBbbmFtZT1zdWJtaXRdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc0NvbnRlbnQnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBsb2NhbGl6YXRpb246IHtcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZSc6ICdHYW1lIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NDb250ZW50JzogJ0dvIHRvIHRoZSBHYW1lIFNldHRpbmdzIHRhYicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZVRpdGxlJzogJ0NvbmZpZ3VyZSBTZXR0aW5ncycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZUNvbnRlbnQnOiAnQ2xpY2sgb24gdGhlIENvbmZpZ3VyZSBTZXR0aW5ncyBidXR0b24nLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJzogJ1N5c3RlbSBTZXR0aW5ncycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzQ29udGVudCc6ICdHbyB0byB0aGUgU3lzdGVtIFNldHRpbmdzIHRhYicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc1RpdGxlJzogJ0NvbmZpZ3VyZSBWYXJpYW50L09wdGlvbmFsIFJ1bGVzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzQ29udGVudCc6ICdDbGljayBvbiB0aGUgQ29uZmlndXJlIFZhcmlhbnQvT3B0aW9uYWwgUnVsZXMgYnV0dG9uJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzVGl0bGUnOiAnU2F2ZSBydWxlIGNoYW5nZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50JzogJ09uY2UgeW91IGhhdmUgbWFkZSB5b3VyIGNoYW5nZXMgY2xpY2sgb24gdGhlIFNhdmUgQ2hhbmdlcyBidXR0b24nXG4gICAgICB9XG4gICAgfSwgY29uZmlnKSlcbiAgfVxufVxuIiwiaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRW4gfSBmcm9tICcuL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xuXG5leHBvcnQgY2xhc3MgRW5hYmxlVmFyaWFudFJ1bGVzRnIgZXh0ZW5kcyBFbmFibGVWYXJpYW50UnVsZXNFbiB7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICB0aXRsZTogJ0FjdGl2ZXogbGVzIHLDqGdsZXMgb3B0aW9ubmVsbGVzLicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0FjdGl2ZXogbGVzIHLDqGdsZXMgb3B0aW9uZWxsZXMgZXQgUHVscCBDdGh1bGh1JyxcbiAgICAgIGxvY2FsaXphdGlvbjoge1xuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJzogJ1BhcmFtw6h0cmVzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NDb250ZW50JzogJ091dnJpciBsXFwnb25nbGV0IFwiUGFyYW3DqHRyZXNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZVRpdGxlJzogJ0NvbmZpZ3VyYXRpb24gZGVzIG9wdGlvbnMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JzogJ0NsaXF1ZXogc3VyIFwiQ29uZmlndXJhdGlvbiBkZXMgb3B0aW9uc1wiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZSc6ICdTeXN0w6htZSBkZSBqZXUnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnOiAnT3V2cmV6IGxcXCdvbmdsZXQgXCJTeXN0w6htZSBkZSBqZXVcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc1RpdGxlJzogJ0NvbmZpZ3VyZXIgbGVzIHZhcmlhbnRlcy9yw6hnbGVzIG9wdGlvbm5lbGxlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnOiAnQ2xpY2tleiBzdXIgbGUgYm91dHRvbiBcIkNvbmZpZ3VyZXIgbGVzIHZhcmlhbnRlcy9yw6hnbGVzIG9wdGlvbm5lbGxlc1wiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzVGl0bGUnOiAnU2F1dmVnYXJkZXIgbGVzIG1vZGlmaWNhdGlvbnMnLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50JzogJ0FwcmVzIGF2b2lyIGNob2lzaXMgbGVzIG9wdGlvbnMgY2xpcXVleiBzdXIgbGUgYm91dG9uIFwiU2F1dmVnYXJkZXIgbGVzIG1vZGlmaWNhdGlvbnNcIidcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ09ORklHLCBmb3VuZHJ5LCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN1Rvb2x0aXBzIH0gZnJvbSAnLi4vYXBwcy90b29sdGlwcy5qcydcbi8vIGltcG9ydCB7IENvQzdXZWxjb21lTWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvd2VsY29tZS1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJUb3VycyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItdG91cnMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnQ2FsbCBvZiBDdGh1bGh1IDd0aCBFZGl0aW9uIHwgUmVhZHknKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93V2VsY29tZU1lc3NhZ2UnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgLyoqIFRoaXMgd2lsbCBwcm9tcHQgdGhlIHdlbGNvbWUgbWVzc2FnZSB3aGVuIGl0IGlzICBmaW5pc2hlZCAqL1xuICAgICAgLy8gYXdhaXQgQ29DN1dlbGNvbWVNZXNzYWdlLmNyZWF0ZSgpXG4gICAgfVxuICAgIGdhbWUuQ29DN1Rvb2x0aXBzID0gbmV3IENvQzdUb29sdGlwcygpXG5cbiAgICBjb25zdCBpbnN0cnVjdGlvbnNWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycpXG4gICAgbGV0IGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIGNvbnN0IHJlYWRNZSA9IHtcbiAgICAgIGVuOiAnc3hCMk9YYmZ3VjZNMG55UScsXG4gICAgICBlczogJzM1Rk03Wk9kekM2TDJ4bGonLFxuICAgICAgZnI6ICd0ZGFreXpUVk9Rc0FNZFNtJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlYWRNZVtsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIENPTkZJRy5Db0M3ID0gQ09ORklHLkNvQzcgPz8ge31cbiAgICBDT05GSUcuQ29DNy5NYW51YWwgPSByZWFkTWVbbGFuZ11cbiAgICBpZiAoZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnN5c3RlbS52ZXJzaW9uLCBpbnN0cnVjdGlvbnNWZXJzaW9uID8/ICcwJykpIHtcbiAgICAgIChhd2FpdCBnYW1lLnBhY2tzLmdldCgnQ29DNy5zeXN0ZW0tZG9jJykuZ2V0RG9jdW1lbnQoQ09ORklHLkNvQzcuTWFudWFsKSk/LnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG4gICAgfVxuICAgIHJlZ2lzdGVyVG91cnMoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0VuIH0gZnJvbSAnLi4vdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMnXG5pbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNGciB9IGZyb20gJy4uL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWZyLmpzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJUb3VycyAoKSB7XG4gIHRyeSB7XG4gICAgbGV0IGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIGNvbnN0IHRvdXJzID0ge1xuICAgICAgZW46IHtcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRW5cbiAgICAgIH0sXG4gICAgICBmcjoge1xuICAgICAgICAnZW5hYmxlLXZhcmlhbnQtcnVsZXMnOiBFbmFibGVWYXJpYW50UnVsZXNGclxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvdXJzW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFuZyA9ICdlbidcbiAgICB9XG4gICAgZm9yIChjb25zdCB0b3VyTmFtZSBpbiB0b3Vyc1tsYW5nXSkge1xuICAgICAgZ2FtZS50b3Vycy5yZWdpc3RlcignQ29DNycsIHRvdXJOYW1lLCBuZXcgdG91cnNbbGFuZ11bdG91ck5hbWVdKCkpXG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdUT1VSIEVSUk9SJywgZXJyKVxuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBDcmVhdGVUb2tlbiBmcm9tICcuL2NyZWF0ZS10b2tlbi5qcydcbmltcG9ydCAqIGFzIERpY2VTb05pY2VSZWFkeSBmcm9tICcuL2RpY2Utc28tbmljZS1yZWFkeS5qcydcbmltcG9ydCAqIGFzIEluaXQgZnJvbSAnLi9pbml0LmpzJ1xuaW1wb3J0ICogYXMgUmVhZHkgZnJvbSAnLi9yZWFkeS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckFjdG9yU2hlZXQgZnJvbSAnLi9yZW5kZXItYWN0b3Itc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJDaGF0TWVzc2FnZSBmcm9tICcuL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJEaWFsb2cgZnJvbSAnLi9yZW5kZXItZGlhbG9nLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVySXRlbVNoZWV0IGZyb20gJy4vcmVuZGVyLWl0ZW0tc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQYXVzZSBmcm9tICcuL3JlbmRlci1wYXVzZS5qcydcbmltcG9ydCAqIGFzIFJlbmRlclBsYXllckxpc3QgZnJvbSAnLi9yZW5kZXItcGxheWVyLWxpc3QuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJSZWFsUm9sbCBmcm9tICcuL3JlbmRlci1yZWFsLXJvbGwuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJTZXR0aW5nc0NvbmZpZyBmcm9tICcuL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMnXG5cbmV4cG9ydCBjb25zdCBDb0M3SG9va3MgPSB7XG4gIGxpc3RlbiAoKSB7XG4gICAgQ3JlYXRlVG9rZW4ubGlzdGVuKClcbiAgICBEaWNlU29OaWNlUmVhZHkubGlzdGVuKClcbiAgICBJbml0Lmxpc3RlbigpXG4gICAgUmVhZHkubGlzdGVuKClcbiAgICBSZW5kZXJBY3RvclNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyQ2hhdE1lc3NhZ2UubGlzdGVuKClcbiAgICBSZW5kZXJEaWFsb2cubGlzdGVuKClcbiAgICBSZW5kZXJJdGVtU2hlZXQubGlzdGVuKClcbiAgICBSZW5kZXJQYXVzZS5saXN0ZW4oKVxuICAgIFJlbmRlclBsYXllckxpc3QubGlzdGVuKClcbiAgICBSZW5kZXJSZWFsUm9sbC5saXN0ZW4oKVxuICAgIFJlbmRlclNldHRpbmdzQ29uZmlnLmxpc3RlbigpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcywgRGlhbG9nLCBnYW1lLCB1aSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdjcmVhdGVUb2tlbicsIGFzeW5jICh0b2tlbkRvY3VtZW50LCBvcHRpb25zLCBjcmFldG9ySWQpID0+IHtcbiAgICAvLyBPbmx5IHRva2VuIGNyZWF0b3IgY2FuIHJvbGxcbiAgICBpZiAoZ2FtZS51c2VyLmlkICE9PSBjcmFldG9ySWQpIHJldHVyblxuICAgIC8vIFNldCB0b2tlbiBpY29uIGNvcnJlY3RseVxuICAgIGlmIChcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyAmJlxuICAgICAgdG9rZW5Eb2N1bWVudC50ZXh0dXJlLnNyYyAhPT0gdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmltZykge1xuICAgICAgdG9rZW5Eb2N1bWVudC50ZXh0dXJlLnNyYyA9IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5pbWdcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gcm9sbCBhc2sgaWYgd2Ugc2hvdWxkIHJvbGwgaXRcbiAgICBpZiAodG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLnR5cGUgIT09ICdjaGFyYWN0ZXInICYmICh0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuaGFzUm9sbGFibGVDaGFyYWN0ZXJpc3RpY3MgfHwgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmhvc1JvbGxhYmxlU2tpbGxzKSkge1xuICAgICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b2tlbkRyb3BNb2RlJykpIHtcbiAgICAgICAgY2FzZSAnYXNrJzpcbiAgICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLlRpdGxlJyksXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5Qcm9tcHQnKSxcbiAgICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuQnV0dG9uUm9sbCcpLFxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLnJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLlJvbGxlZCcsIHsgbmFtZTogdG9rZW5Eb2N1bWVudC5vYmplY3QuYWN0b3IubmFtZSB9KSlcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmxvY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2U6IHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuQnV0dG9uQXZlcmFnZScpLFxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkF2ZXJhZ2VkJywgeyBuYW1lOiB0b2tlbkRvY3VtZW50Lm9iamVjdC5hY3Rvci5uYW1lIH0pKVxuICAgICAgICAgICAgICAgICAgICB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IubG9ja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2tpcDoge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblNraXAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgICB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5Sb2xsZWQnLCB7IG5hbWU6IHRva2VuRG9jdW1lbnQub2JqZWN0LmFjdG9yLm5hbWUgfSkpXG4gICAgICAgICAgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmxvY2tlZCA9IHRydWVcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2F2ZXJhZ2UnOlxuICAgICAgICAgIHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5hdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkF2ZXJhZ2VkJywgeyBuYW1lOiB0b2tlbkRvY3VtZW50Lm9iamVjdC5hY3Rvci5uYW1lIH0pKVxuICAgICAgICAgIHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5sb2NrZWQgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdpZ25vcmUnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgnZGljZVNvTmljZVJlYWR5JywgZGljZTNkID0+IHtcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XG4gICAgICB0eXBlOiAnZHQnLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9KVxuICAgIGRpY2UzZC5hZGREaWNlUHJlc2V0KHtcbiAgICAgIHR5cGU6ICdkbycsXG4gICAgICBsYWJlbHM6IFsnMTAnLCAnMjAnLCAnMzAnLCAnNDAnLCAnNTAnLCAnNjAnLCAnNzAnLCAnODAnLCAnOTAnLCAnMDAnXSxcbiAgICAgIGZvbnRTY2FsZTogMC43NSxcbiAgICAgIHN5c3RlbTogJ3N0YW5kYXJkJ1xuICAgIH0pXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN0dyb3VwTWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvY29jNy1ncm91cC1tZXNzYWdlLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgIENvQzdDaGF0LnJlbmRlck1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbiAgICBDb0M3Q2hhdC5yZW5kZXJDaGF0TWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxuICAgIGlmICh0eXBlb2YgYXBwLmZsYWdzPy5Db0M3Py5bJ2dyb3VwLW1lc3NhZ2UnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIENvQzdHcm91cE1lc3NhZ2UucmVuZGVyQ2hhdE1lc3NhZ2UoYXBwLCBodG1sLCBkYXRhKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJEaWFsb2cnLCAoZGlhbG9nLCBodG1sKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGh0bWwuZmluZCgnZm9ybScpXG4gICAgaWYgKGZvcm0uaXMoJyNkb2N1bWVudC1jcmVhdGUnKSAmJiBmb3JtLmZpbmQoJ3NlbGVjdCcpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgY29uc3QgZW50aXR5Q3JlYXRlU2VsZWN0VGFnID0gZm9ybS5maW5kKFwiW25hbWU9J3R5cGUnXVwiKVxuICAgICAgY29uc3QgZW50aXR5U29ydGVkTGlzdCA9IFtdXG4gICAgICBjb25zdCBzaG93RXhwZXJpbWVudGFsID0gISFnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICAgJ0NvQzcnLFxuICAgICAgICAnZXhwZXJpbWVudGFsRmVhdHVyZXMnXG4gICAgICApXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuY2hpbGRyZW4oKS5lYWNoKChvLCBlbnRpdHlPcHRpb24pID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0gZW50aXR5T3B0aW9uLnRleHRDb250ZW50Py5jYXBpdGFsaXplKClcbiAgICAgICAgaWYgKGdhbWUuaTE4bi5oYXMoYENvQzcuRW50aXRpZXMuJHtrZXl9YCkpIHtcbiAgICAgICAgICBlbnRpdHlPcHRpb24udGV4dENvbnRlbnQgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENvQzcuRW50aXRpZXMuJHtrZXl9YClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvd0V4cGVyaW1lbnRhbCB8fCAhWyd2ZWhpY2xlJ10uaW5jbHVkZXMoZW50aXR5T3B0aW9uLnZhbHVlKSkge1xuICAgICAgICAgIGVudGl0eVNvcnRlZExpc3QucHVzaChlbnRpdHlPcHRpb24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuZW1wdHkoKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmFwcGVuZChcbiAgICAgICAgZW50aXR5U29ydGVkTGlzdC5zb3J0KChmaXJzdCwgc2Vjb25kKSA9PlxuICAgICAgICAgIGZpcnN0LmlubmVyVGV4dC5sb2NhbGVDb21wYXJlKHNlY29uZC5pbm5lclRleHQpXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdhY3RvcicpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnY2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYm9vaycpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnaXRlbScpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHt9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGF1c2UnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICAgIGxldCBpbWFnZVJlcGxhY2VkID0gZmFsc2VcbiAgICBsZXQgdGV4dFJlcGxhY2VkID0gZmFsc2VcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLnJlbW92ZSgpXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSlcbiAgICAgICAgaW1hZ2VSZXBsYWNlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlVGV4dCcpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2gzJykuaHRtbChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSlcbiAgICAgICAgdGV4dFJlcGxhY2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWltYWdlUmVwbGFjZWQpIHtcbiAgICAgIGh0bWwuZmluZCgnaW1nJykuYXR0cignc3JjJywgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaW1hZ2VzL3RpbWV0cmFwMi53ZWJwJylcbiAgICB9XG4gICAgaWYgKCF0ZXh0UmVwbGFjZWQpIHtcbiAgICAgIGh0bWwuZmluZCgnZmlnY2FwdGlvbicpLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhdXNlTmFtZScpKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJQbGF5ZXJMaXN0JywgKHBsYXllckxpc3QsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAkKCc8aDQ+JykuYXBwZW5kKCc8ZGl2PjxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1jYWxlbmRhclwiPjwvaT4nICsgZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJykgfSkgKyAnPC9kaXY+JykuaW5zZXJ0QWZ0ZXIoJCgnaDMnLCBodG1sKSlcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclJlYWxSb2xsJywgKGFwcCwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICAgIGZvciAoY29uc3QgdGVybSBpbiBvcHRpb25zLmRpZVRlcm1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGlucHV0IGluIG9wdGlvbnMuZGllVGVybXNbdGVybV0uaW5wdXRzKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmRpZVRlcm1zW3Rlcm1dIGluc3RhbmNlb2YgQ29DN0RlY2FkZXJEaWUpIHtcbiAgICAgICAgICBjb25zdCB0YWcgPSBodG1sLmZpbmQoJ1tuYW1lPVwiJyArIHRlcm0gKyAnLicgKyBpbnB1dCArICdcIl0nKVxuICAgICAgICAgIGlmICh0YWcubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0YWdbMF0ucGxhY2Vob2xkZXIgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVhbFJvbGxEZWNhZGVyUGxhY2Vob2xkZXJOYW1lJylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIHVzZXIpID0+IHtcbiAgICBDb0M3RGlyZWN0b3J5UGlja2VyLnByb2Nlc3NIdG1sKGh0bWwpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgc29ja2V0bGliLCB1aSAqL1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gQ29DN1NvY2tldCAoKSB7XG4gIGdhbWUuQ29DN3NvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbSgnQ29DNycpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ21jcmVhdGVtZXNzYWdlYXMnLCBnbWNyZWF0ZW1lc3NhZ2VhcylcbiAgZ2FtZS5Db0M3c29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ21jcmVhdGVtZXNzYWdlYXMgKGRhdGEpIHtcbiAgY29uc3QgbWVsZWVUYXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KFxuICAgIGRhdGEudGFyZ2V0S2V5LFxuICAgIGRhdGEubWVzc2FnZUlkLFxuICAgIGRhdGEuZmFzdEZvcndhcmRcbiAgKVxuICBtZWxlZVRhcmdldC5pbml0aWF0b3JLZXkgPSBkYXRhLmFjdG9yS2V5XG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBtZWxlZVRhcmdldC5jcmVhdGVDaGF0Q2FyZCgpXG4gIHJldHVybiBtZXNzYWdlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtdHJhZGVpdGVtdG8gKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoZGF0YS5zY2VuZSkge1xuICAgICAgYWN0b3IgPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZSkudG9rZW5zLmdldChkYXRhLmFjdG9yRnJvbSkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvckZyb20pXG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSBhY3Rvci5pdGVtcy5nZXQoZGF0YS5pdGVtKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBnYW1lLmFjdG9yc1xuICAgICAgLmdldChkYXRhLmFjdG9yVG8pXG4gICAgICAuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgIGFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0uaWRdKVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZSlcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuIiwiLyogZ2xvYmFsIGZyb21VdWlkLCBnYW1lLCBOb3Rlc0xheWVyLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0dyb3VwTWVzc2FnZSB9IGZyb20gJy4vY29jNy1ncm91cC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0ludmVzdGlnYXRvcldpemFyZCB9IGZyb20gJy4vaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTeXN0ZW1Tb2NrZXQge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZGF0YS50eXBlXSAgICAgICAgICAgICAgICBBY3Rpb24gdG8gcnVuXG4gICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gW2RhdGEubGlzdGVuZXJdICBvbmx5IHRoaXMgc3BlY2ZpYyB1c2VyIHNob3VsZCBydW4gdGhlIGFjdGlvblxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNhbGxTb2NrZXQgKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEubGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlkID09PSBkYXRhLmxpc3RlbmVyKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY2hhcmFjdGVyLXdpemFyZCc6XG4gICAgICAgICAgICBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlckZyb21EYXRhKGRhdGEucGF5bG9hZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnb3Blbi1jaGFyYWN0ZXInOlxuICAgICAgICAgICAgZ2FtZS5hY3RvcnMuZ2V0KGRhdGEucGF5bG9hZCkuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2dyb3VwLW1lc3NhZ2UtbmV3JzpcbiAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UubmV3R3JvdXBNZXNzYWdlKGRhdGEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2dyb3VwLW1lc3NhZ2Utcm9sbCc6XG4gICAgICAgICAgICBDb0M3R3JvdXBNZXNzYWdlLnBlcmZvcm1NeVJvbGxzKGRhdGEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2dyb3VwLW1lc3NhZ2UtdXBkYXRlJzpcbiAgICAgICAgICAgIENvQzdHcm91cE1lc3NhZ2UudXBkYXRlVGhlTWVzc2FnZShkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlOlxuICAgICAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZTpcbiAgICAgICAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2ludm9rZSc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChkYXRhLml0ZW0pXG4gICAgICAgICAgICAgIGl0ZW1bZGF0YS5tZXRob2RdKGRhdGEuZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3VwZGF0ZUNoYXInOlxuICAgICAgICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndG9nZ2xlTWFwTm90ZXMnOlxuICAgICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdjb3JlJywgTm90ZXNMYXllci5UT0dHTEVfU0VUVElORywgZGF0YS50b2dnbGUgPT09IHRydWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBLZWVwZXIgYWN0aW9uLCBpZiB5b3UgYXJlIGEga2VlcGVyIHJ1biB5b3Vyc2VsZiwgaWYgdGhlcmUgaXMgbm8gYWN0aXZlIEdNIHNob3cgZXJyb3JcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cbiAgICovXG4gIHN0YXRpYyByZXF1ZXN0S2VlcGVyQWN0aW9uIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBkYXRhLmxpc3RlbmVyID0gZ2FtZS51c2VyLmlkXG4gICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qga2VlcGVycyA9IGdhbWUudXNlcnMuZmlsdGVyKHUgPT4gdS5hY3RpdmUgJiYgdS5pc0dNKVxuICAgICAgaWYgKGtlZXBlcnMubGVuZ3RoKSB7XG4gICAgICAgIGRhdGEubGlzdGVuZXIgPSBrZWVwZXJzWzBdLmlkXG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ0tlZXBlclVzZXInKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgdXNlciBhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gdXNlcklkICAgICAgT25seSB0aGlzIHVzZXIgaWQgc2hvdWxkIHJ1biB0aGUgYWN0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVycm9ySWZNaXNzaW5nICBJZiByZXF1ZXN0aW5nIGEgc3BlY2lmaWMgdXNlciBzaG91bGQgcnVuIHRoZSBhY3Rpb24gZXJyb3IgaWYgdXNlciBub3QgZm91bmQgLyBsb2dnZWQgaW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZVNlbGYgICAgIElmIHJ1bm5pbmcgYXMgYWxsIHVzZXJzIHNob3VsZCB0aGUgY3VycmVudCB1c2VyIGFsc28gcnVuIHRoZSBhY3Rpb24uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzdGF0aWMgcmVxdWVzdFVzZXJBY3Rpb24gKFxuICAgIGRhdGEsXG4gICAgeyB1c2VySWQgPSBudWxsLCBlcnJvcklmTWlzc2luZyA9IHRydWUsIGluY2x1ZGVTZWxmID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgaWYgKHVzZXJJZCAmJiB0eXBlb2YgdXNlcklkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHVzZXJJZCA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgIGRhdGEubGlzdGVuZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1c2VyID0gZ2FtZS51c2Vycy5nZXQodXNlcklkKVxuICAgICAgICBpZiAodHlwZW9mIHVzZXIuaWQgIT09ICd1bmRlZmluZWQnICYmIHVzZXIuYWN0aXZlKSB7XG4gICAgICAgICAgZGF0YS5saXN0ZW5lciA9IHVzZXIuaWRcbiAgICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JJZk1pc3NpbmcpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdVc2VyJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluY2x1ZGVTZWxmKSB7XG4gICAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENvbWJhdCwgQ09ORklHLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgSXRlbURpcmVjdG9yeSAqL1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDcmVhdHVyZVNoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbWJhdCwgcm9sbEluaXRpYXRpdmUgfSBmcm9tICcuL2NvbWJhdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IFVwZGF0ZXIgfSBmcm9tICcuL3VwZGF0ZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN01lbnUgfSBmcm9tICcuL21lbnUuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdDYW52YXMgfSBmcm9tICcuL2FwcHMvY2FudmFzLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHRpbmdzRGlyZWN0b3J5IH0gZnJvbSAnLi9zZXR0aW5ncy1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdIb29rcyB9IGZyb20gJy4vaG9va3MvaW5kZXguanMnXG5pbXBvcnQgKiBhcyBEaWNlQm90IGZyb20gJy4vZGljZWJvdC5qcydcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1NvY2tldCB9IGZyb20gJy4vaG9va3Mvc29ja2V0LmpzJ1xuaW1wb3J0IHsgQ29DN1N5c3RlbVNvY2tldCB9IGZyb20gJy4vYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMnXG5pbXBvcnQgeyBEcm9wQWN0b3JTaGVldERhdGEgfSBmcm9tICcuL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcydcbmltcG9ydCBDb0M3Q2xpY2thYmxlRXZlbnRzIGZyb20gJy4vYXBwcy9jb2M3LWNsaWNrYWJsZS1ldmVudHMuanMnXG5pbXBvcnQgRHJhd05vdGUgZnJvbSAnLi9ob29rcy9kcmF3LW5vdGUuanMnXG5pbXBvcnQgUmVuZGVyQ29DN0pvdXJuYWxTaGVldCBmcm9tICcuL2hvb2tzL3JlbmRlci1jb2M3LWpvdXJuYWwtc2hlZXQuanMnXG5pbXBvcnQgUmVuZGVySm91cm5hbFRleHRQYWdlU2hlZXQgZnJvbSAnLi9ob29rcy9yZW5kZXItam91cm5hbC10ZXh0LXBhZ2Utc2hlZXQuanMnXG5cbi8vIENhcmQgaW5pdFxuaW1wb3J0IHsgaW5pdEVDQyB9IGZyb20gJy4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcbmltcG9ydCB7IENoYXNlT2JzdGFjbGVDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRleHRNZW51IH0gZnJvbSAnLi9jb250ZXh0LW1lbnUuanMnXG5cbkhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgY29uc3Qgc3lzdGVtVGFiID0gJChhcHAuZm9ybSkuZmluZCgnLnRhYltkYXRhLXRhYj1zeXN0ZW1dJylcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUluaXREaWNlc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlSW5pdGlhdGl2ZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3RhbmJ5R01Sb2xsc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwudHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXRDYXJkcycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZW5hYmxlU3RhdHVzSWNvbnNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVNjZW5lJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5vdmVycmlkZUdhbWVBcnR3b3JrXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVHYW1lQXJ0d29yaycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheVBsYXllck5hbWVPblNoZWV0XScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVTaGVldCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcmVnYXJkVXNlUGVyUm91bmRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVdlYXBvbicpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3luY0RpY2UzZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGljZVNvTmljZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGVidWdtb2RlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVEZXZlbG9wZXJEZWJ1ZycpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ3NlbGVjdFtuYW1lPUNvQzdcXFxcLmJvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVJvbGxUYWJsZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xuICAvLyBzeXN0ZW1UYWJcbiAgLy8gICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5jaGFzZVNob3dUb2tlbk1vdmVtZW50XScpXG4gIC8vICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgLy8gICAuYmVmb3JlKFxuICAvLyAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gIC8vICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGFzZVNldHRpbmdzJykgK1xuICAvLyAgICAgICAnPC9oMj4nXG4gIC8vICAgKVxufSlcblxuSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgZ2FtZS5Db0M3ID0ge1xuICAgIG1hY3Jvczoge1xuICAgICAgc2tpbGxDaGVjazogQ29DN1V0aWxpdGllcy5za2lsbENoZWNrTWFjcm8sXG4gICAgICB3ZWFwb25DaGVjazogQ29DN1V0aWxpdGllcy53ZWFwb25DaGVja01hY3JvLFxuICAgICAgY2hlY2s6IENvQzdVdGlsaXRpZXMuY2hlY2tNYWNyb1xuICAgIH0sXG4gICAgY2FyZHM6IHtcbiAgICAgIERhbWFnZUNhcmRcbiAgICB9LFxuICAgIGRldjoge1xuICAgICAgZGljZToge1xuICAgICAgICBhbHdheXNDcml0OiBmYWxzZSxcbiAgICAgICAgYWx3YXlzRnVtYmxlOiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgZXJhczogKGVyYSwgbmFtZSkgPT4ge1xuICAgICAgQ09DNy5lcmFzW2VyYV0gPSBuYW1lXG4gICAgfSxcbiAgICBDbGlja1JlZ2lvbkxlZnRVdWlkOiBDb0M3Q2xpY2thYmxlRXZlbnRzLkNsaWNrUmVnaW9uTGVmdFV1aWQsXG4gICAgQ2xpY2tSZWdpb25SaWdodFV1aWQ6IENvQzdDbGlja2FibGVFdmVudHMuQ2xpY2tSZWdpb25SaWdodFV1aWQsXG4gICAgaGFzUGVybWlzc2lvbkRvY3VtZW50OiBDb0M3Q2xpY2thYmxlRXZlbnRzLmhhc1Blcm1pc3Npb25Eb2N1bWVudCxcbiAgICBJblNjZW5lUmVsYXRpdmVUZWxlcG9ydDogQ29DN0NsaWNrYWJsZUV2ZW50cy5JblNjZW5lUmVsYXRpdmVUZWxlcG9ydCxcbiAgICBNYXBQaW5Ub2dnbGU6IENvQzdDbGlja2FibGVFdmVudHMuTWFwUGluVG9nZ2xlLFxuICAgIG9wZW5Eb2N1bWVudDogQ29DN0NsaWNrYWJsZUV2ZW50cy5vcGVuRG9jdW1lbnQsXG4gICAgdG9nZ2xlVGlsZUpvdXJuYWxQYWdlczogQ29DN0NsaWNrYWJsZUV2ZW50cy50b2dnbGVUaWxlSm91cm5hbFBhZ2VzLFxuICAgIHRvU2NlbmU6IENvQzdDbGlja2FibGVFdmVudHMudG9TY2VuZVxuICB9XG4gIENvbWJhdC5wcm90b3R5cGUucm9sbEluaXRpYXRpdmUgPSByb2xsSW5pdGlhdGl2ZVxufSlcblxuaW5pdEVDQyhDaGFzZU9ic3RhY2xlQ2FyZClcblxuSG9va3Mub24oJ3JlbmRlckNvbWJhdFRyYWNrZXInLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q29tYmF0LnJlbmRlckNvbWJhdFRyYWNrZXIoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5EaWNlQm90Lmxpc3RlbigpXG5Db0M3SG9va3MubGlzdGVuKClcblxuSG9va3Mub25jZSgnc29ja2V0bGliLnJlYWR5JywgQ29DN1NvY2tldClcblxuSG9va3Mub25jZSgnc2V0dXAnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIExvY2FsaXplIENPTkZJRyBvYmplY3RzIG9uY2UgdXAtZnJvbnRcbiAgY29uc3QgdG9Mb2NhbGl6ZSA9IFtcbiAgICAnc3BlbGxQcm9wZXJ0aWVzJyxcbiAgICAnYm9va1R5cGUnLFxuICAgICd0YWxlbnRUeXBlJyxcbiAgICAnb2NjdXBhdGlvblByb3BlcnRpZXMnLFxuICAgICdzdGF0dXNUeXBlJ1xuICBdXG5cbiAgZm9yIChjb25zdCBvIG9mIHRvTG9jYWxpemUpIHtcbiAgICBjb25zdCBsb2NhbGl6ZWQgPSBPYmplY3QuZW50cmllcyhDT0M3W29dKS5tYXAoZSA9PiB7XG4gICAgICByZXR1cm4gW2VbMF0sIGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKV1cbiAgICB9KVxuICAgIENPQzdbb10gPSBsb2NhbGl6ZWQucmVkdWNlKChvYmosIGUpID0+IHtcbiAgICAgIG9ialtlWzBdXSA9IGVbMV1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCB7fSlcbiAgfVxuXG4gIGxldCBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLmRlYWRcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgfVxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLnVuY29uc2Npb3VzXG4gIClcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xuICAgIENPTkZJRy5zdGF0dXNFZmZlY3RzW2VmZmVjdEluZGV4XS5pY29uID1cbiAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2tub2NrZWQtb3V0LXN0YXJzLnN2ZydcbiAgfVxuICAvLyBGb3VuZHJ5VlRUIHYxMFxuICBjb25zdCBlZmZlY3ROYW1lS2V5ID0gKCFmb3VuZHJ5LnV0aWxzLmlzTmV3ZXJWZXJzaW9uKGdhbWUudmVyc2lvbiwgJzExJykgPyAnbGFiZWwnIDogJ25hbWUnKVxuICBDT05GSUcuc3RhdHVzRWZmZWN0cy51bnNoaWZ0KFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmluZGVmSW5zYW5lLFxuICAgICAgW2VmZmVjdE5hbWVLZXldOiAnQ29DNy5JbnNhbml0eU5hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuQ3JpdGljYWxXb3VuZHMnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvYXJtLXNsaW5nLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5keWluZyxcbiAgICAgIFtlZmZlY3ROYW1lS2V5XTogJ0NvQzcuRHlpbmcnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgIH1cbiAgKVxufSlcblxuSG9va3Mub24oJ2NyZWF0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKGdhbWUudXNlcklkID09PSB1c2VySWQpIHtcbiAgICBjb25zdCBzdGF0dXNLZXkgPSBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleShkYXRhKVxuICAgIGlmIChzdGF0dXNLZXkpIHtcbiAgICAgIHN3aXRjaCAoc3RhdHVzS2V5KSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oc3RhdHVzS2V5LCB7XG4gICAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWxUaW1lID0gZGF0YS5mbGFncy5Db0M3Py5yZWFsVGltZVxuICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gbnVsbFxuICAgICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbj8ucm91bmRzXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24/LnNlY29uZHNcbiAgICAgICAgICAgICAgaWYgKCFpc05hTihkdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVhbFRpbWUsXG4gICAgICAgICAgICAgIGR1cmF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2RlbGV0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKGdhbWUudXNlcklkID09PSB1c2VySWQpIHtcbiAgICBjb25zdCBzdGF0dXNLZXkgPSBDb0M3QWN0aXZlRWZmZWN0LmdldFN0YXR1c0tleShkYXRhKVxuICAgIGlmIChzdGF0dXNLZXkpIHtcbiAgICAgIHN3aXRjaCAoc3RhdHVzS2V5KSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBkYXRhLnBhcmVudC51bnNldENvbmRpdGlvbihzdGF0dXNLZXksIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGl0ZW0gY2FsbGVkICdfX0NvQzdJbnRlcm5hbEl0ZW1fXydcbi8vIFRoaXMgaXRlbSBpcyB1c2VkIGZvciBpbnRlcm5hbCBwdXJwb3NlcyBhbmQgc2hvdWxkIG5vdCBiZSBzZWVuIGJ5IGFueW9uZVxuSG9va3Mub24oJ2NoYW5nZVNpZGViYXJUYWInLCBkaXJlY3RvcnkgPT4ge1xuICBpZiAoZGlyZWN0b3J5IGluc3RhbmNlb2YgSXRlbURpcmVjdG9yeSkge1xuICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmZpbmQoaSA9PiBpLm5hbWUgPT09ICdfX0NvQzdJbnRlcm5hbEl0ZW1fXycpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBkaXJlY3RvcnkuX2VsZW1lbnRcbiAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gaHRtbC5maW5kKGBbZGF0YS1kb2N1bWVudC1pZD0nJHtpdGVtLmlkfSddYClcbiAgICAgIGlmIChpdGVtRWxlbWVudCkgaXRlbUVsZW1lbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2hvdGJhckRyb3AnLCAoYmFyLCBkYXRhLCBzbG90KSA9PiB7XG4gIHJldHVybiBDb0M3VXRpbGl0aWVzLmNyZWF0ZU1hY3JvKGJhciwgZGF0YSwgc2xvdClcbn0pXG5cbkhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NoYXQuY2hhdExpc3RlbmVycyhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigndXBkYXRlQ2hhdE1lc3NhZ2UnLCAoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKSA9PlxuICBDb0M3Q2hhdC5vblVwZGF0ZUNoYXRNZXNzYWdlKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcilcbilcblxuSG9va3Mub24oJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICAvLyBDT05GSUcuY29tcGF0aWJpbGl0eS5tb2RlID0gQ09OU1QuQ09NUEFUSUJJTElUWV9NT0RFUy5TSUxFTlRcbiAgYXdhaXQgVXBkYXRlci5jaGVja0ZvclVwZGF0ZSgpXG5cbiAgLy8gZ2FtZS5Db0M3Lm1lbnVzID0gbmV3IENvQzdNZW51KCk7XG5cbiAgYWN0aXZhdGVHbG9iYWxMaXN0ZW5lcigpXG5cbiAgLy8gc2V0R2xvYmFsQ3NzVmFyKClcblxuICBnYW1lLkNvQzcuc2tpbGxMaXN0ID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc2tpbGxzJyk/LmdldERvY3VtZW50cygpXG5cbiAgZ2FtZS5zb2NrZXQub24oJ3N5c3RlbS5Db0M3JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gIH0pXG5cbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4XCI6IFwiUGhvYmlhcyBpbmRleFwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBwaG9iaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4XCI6IFwiTWFuaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgbWFuaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlXCI6IFwiU2FtcGxlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZVwiOiBcIlNhbXBsZSBNYW5pYXMgdGFibGVcIixcblxuICBmdW5jdGlvbiBfdGFibGVTZXR0aW5nc0NoYW5nZWQgKHRhYmxlLCBpZCkge1xuICAgIGlmIChpZCA9PT0gJ25vbmUnKSBnYW1lLkNvQzcudGFibGVzW3RhYmxlXSA9IG51bGxcbiAgICBlbHNlIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gZ2FtZS50YWJsZXMuZ2V0KGlkKVxuICB9XG5cbiAgLy8gZnVuY3Rpb24gX3RhYmxlSW5kZXhDaGFuZ2VkKCB0YWJsZSwgaW5kZXgpe1xuICAvLyAgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV09aW5kZXg7XG4gIC8vIH1cblxuICBjb25zdCB0YWJsZUNob2ljZSA9IHsgbm9uZTogJ1NFVFRJTkdTLkxldEtlZXBlckRlY2lkZScgfVxuICBmb3IgKGNvbnN0IHQgb2YgZ2FtZS50YWJsZXMpIHtcbiAgICB0YWJsZUNob2ljZVt0Ll9pZF0gPSB0Lm5hbWVcbiAgfVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19TdW1tYXJ5JywgaWQpXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfUmVhbFRpbWUnLCBpZClcbiAgfSlcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDksXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDEwLFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdtYW5pYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdwaG9iaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcbiAgICBib3V0T2ZNYWRuZXNzX1N1bW1hcnk6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpXG4gICAgICAgICksXG4gICAgYm91dE9mTWFkbmVzc19SZWFsVGltZTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgICApXG4gICAgLy8gbWFuaWFzSW5kZXg6IGdlLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyksXG4gICAgLy8gcGhvYmlhc0luZGV4OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKT9udWxsOmdhbWUudGFibGVzLmdldChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnKSksXG4gICAgLy8gbWFuaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpLFxuICB9XG59KVxuXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlQWN0b3InLCAoY3JlYXRlRGF0YSkgPT4gQ29DQWN0b3IuaW5pdFRva2VuKCBjcmVhdGVEYXRhKSk7XG5cbkhvb2tzLm9uKFxuICAncmVuZGVyQ29DN0NoYXNlU2hlZXQnLFxuICAvKiogYXN5bmMgKi8gKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICAvKiogYXdhaXQgKi8gQ29DN0NoYXNlU2hlZXQuc2V0U2Nyb2xsKGFwcCwgaHRtbCwgZGF0YSlcbilcblxuSG9va3Mub24oJ2Nsb3NlQ29DN0NoYXNlU2hlZXQnLCAoYXBwLCBodG1sKSA9PlxuICBDb0M3Q2hhc2VTaGVldC5vbkNsb3NlKGFwcCwgaHRtbClcbilcblxuLy8gQ2FsbGVkIG9uIGNsb3NpbmcgYSBjaGFyYWN0ZXIgc2hlZXQgdG8gbG9jayBpdCBvbiBnZXR0aW5nIGl0IHRvIGRpc3BsYXkgdmFsdWVzXG5Ib29rcy5vbignY2xvc2VBY3RvclNoZWV0JywgY2hhcmFjdGVyU2hlZXQgPT4gY2hhcmFjdGVyU2hlZXQub25DbG9zZVNoZWV0KCkpXG5Ib29rcy5vbigncmVuZGVyQ29DN0NyZWF0dXJlU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q3JlYXR1cmVTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3JlbmRlckNvQzdOUENTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuLy8gSG9va3Mub24oJ3VwZGF0ZUFjdG9yJywgKGFjdG9yLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpKTtcbi8vIEhvb2tzLm9uKCd1cGRhdGVUb2tlbicsIChzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpKTtcblxuSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgQ29DN1V0aWxpdGllcy5QYXJzZUNoYXRFbnRyeSlcbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbihcInJlbmRlckNoYXRMb2dcIiwgKGFwcCwgaHRtbCwgZGF0YSkgPT4gQ29DN0l0ZW0uY2hhdExpc3RlbmVycyhodG1sKSk7XG5cbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgKC8qIGNvbnRyb2xzICovKSA9PiB7XG4gIC8vIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICBsZXQgZ3JvdXAgPSBjb250cm9scy5maW5kKGIgPT4gYi5uYW1lID09ICd0b2tlbicpO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgLy8gICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXG4gIC8vICB9KTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhcyBmYS11c2VyLWVkaXQnLFxuICAvLyAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbigpXG4gIC8vICB9KTtcbiAgLy8gfVxufSlcblxuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVOYXZpZ2F0aW9uJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuLy8gU2hlZXQgY3NzIG9wdGlvbnNcbi8vIEhvb2tzLm9uKCdyZW5kZXJDb0M3Q2hhcmFjdGVyU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpO1xuSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpXG5Ib29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KVxuXG5Ib29rcy5vbignZ2V0U2NlbmVDb250cm9sQnV0dG9ucycsIENvQzdNZW51LmdldEJ1dHRvbnMpXG5Ib29rcy5vbigncmVuZGVyU2NlbmVDb250cm9scycsIENvQzdNZW51LnJlbmRlckNvbnRyb2xzKVxuXG5Ib29rcy5vbignZHJvcENhbnZhc0RhdGEnLCBDb0M3Q2FudmFzLm9uRHJvcFNvbWV0aGluZylcblxuSG9va3Mub24oJ2Ryb3BBY3RvclNoZWV0RGF0YScsIERyb3BBY3RvclNoZWV0RGF0YSlcblxuZnVuY3Rpb24gYWN0aXZhdGVHbG9iYWxMaXN0ZW5lciAoKSB7XG4gIGNvbnN0IGJvZHkgPSAkKCdib2R5JylcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwpXG4gIGJvZHkub24oJ2NsaWNrJywgJ2EuY29jNy1pbmxpbmUtY2hlY2snLCBDb0M3Q2hlY2suX29uQ2xpY2tJbmxpbmVSb2xsKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBfb25MZWZ0Q2xpY2spXG59XG5cbmZ1bmN0aW9uIF9vbkxlZnRDbGljayAoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5XG59XG5cbkNPTkZJRy51aS5zZXR0aW5ncyA9IENvQzdTZXR0aW5nc0RpcmVjdG9yeVxuQ09ORklHLnVpLmNvbXBlbmRpdW0gPSBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeVxuQ09ORklHLnVpLmFjdG9ycyA9IENvQzdBY3RvckRpcmVjdG9yeVxuXG5Ib29rcy5vbignZHJhd05vdGUnLCBEcmF3Tm90ZSlcbkhvb2tzLm9uKCdyZW5kZXJDb0M3Sm91cm5hbFNoZWV0JywgUmVuZGVyQ29DN0pvdXJuYWxTaGVldClcbkhvb2tzLm9uKCdyZW5kZXJKb3VybmFsVGV4dFBhZ2VTaGVldCcsIFJlbmRlckpvdXJuYWxUZXh0UGFnZVNoZWV0KVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCBIb29rcywgUm9sbCwgdWkgKi9cblxuLyoqXG4gKkNhbGxvZkN0aHVsaHUoN3RoRWQuKSBEZWZpbmUgeW91ciBvd24gY29tbWFuZHNcbiAqSGVyZSwgd2UgcmVjZWl2ZSB0aGUgY2hhdCBNZXNzYWdlcyBhbmQgZGV0ZXJtaW5lIGVhY2ggY29tbWFuZC5cbiAqWy9DQ11EZWZpbmUgYSBjb21tYW5kIHRvIGp1ZGdlIGEgbm9ybWFsIGRpY2UuXG4gKlsvQ0JSXSBDb21tYW5kIHRvIGRlZmluZSB0aGUgZGVjaXNpb24gb24gY29tYmluYXRpb24gcm9sbHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignY2hhdE1lc3NhZ2UnLCAoaHRtbCwgY29udGVudCkgPT4ge1xuICAgIC8vIEknbSBjdXJyZW50bHkgdXNpbmcgaXQgZm9yIHRlc3RpbmcgYm9udXMgZGljZS5cbiAgICBpZiAoY29udGVudC5tYXRjaCgvXlxcLyhjYnJ8Y2MpL2kpKSB7XG4gICAgICAvLyBFeHRyYWN0aW5nIG51bWJlcnMgZnJvbSBjb21iaW5hdGlvbiByb2xsc1xuICAgICAgY29uc3QgY29tbWFuZHMgPSBjb250ZW50Lm1hdGNoKC8oXFxkKykvZylcbiAgICAgIGlmIChjb21tYW5kcykge1xuICAgICAgICBuZXcgUm9sbCgnMWQxMDAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkudGhlbihyID0+IHtcbiAgICAgICAgICBjb25zdCBzID0gci5yZXN1bHRcbiAgICAgICAgICBjb25zdCByZXMgPSBjb21tYW5kc1xuICAgICAgICAgICAgLm1hcChtID0+IHtcbiAgICAgICAgICAgICAgbGV0IHJlcyA9ICcnXG4gICAgICAgICAgICAgIGlmIChzIDw9IDEpIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDEwMCkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPD0gbSAvIDUpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSAvIDIpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSA5Nikge1xuICAgICAgICAgICAgICAgIGlmIChtIDwgNTApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICAgIGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICB9IGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGZpcnN0IHJlc3VsdHMuXG4gICAgICAgICAgICAgIHJlcyArPSAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsdWUnKSArICcgJyArIG1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKCcgLyAnKVxuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogcmVzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0luY29ycmVjdCB1c2FnZSBvZiBjb21tYW5kJylcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiB0byBhdm9pZCBlcnJvcnMgaW4gdGhlIGNvbW1hbmQuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIERyb3BBY3RvclNoZWV0RGF0YSAoYWN0b3IsIHNoZWV0LCBkYXRhKSB7XG4gIGlmIChkYXRhLnR5cGUgPT09ICdJdGVtJyAmJiBkYXRhLmFjdG9ySWQpIHtcbiAgICBpZiAoYWN0b3IuZGF0YS5faWQgPT09IGRhdGEuYWN0b3JJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGxldCBhY3RvckZyb20gPSBudWxsXG4gICAgaWYgKGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWQpIHtcbiAgICAgIGFjdG9yRnJvbSA9IGdhbWUuc2NlbmVzLmdldChkYXRhLnNjZW5lSWQpLnRva2Vucy5nZXQoZGF0YS50b2tlbklkKS5hY3RvclxuICAgIH0gZWxzZSB7XG4gICAgICBhY3RvckZyb20gPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvcklkKVxuICAgIH1cbiAgICBzd2l0Y2ggKGFjdG9yLmRhdGEudHlwZSkge1xuICAgICAgY2FzZSAnY2hhcmFjdGVyJzpcbiAgICAgIGNhc2UgJ25wYyc6XG4gICAgICBjYXNlICdjcmVhdHVyZSc6XG4gICAgICAgIGlmICghWydjaGFzZSddLmluY2x1ZGVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd2ZWhpY2xlJzpcbiAgICAgICAgcmV0dXJuXG4gICAgICBjYXNlICdjb250YWluZXInOlxuICAgICAgICBpZiAoIVsnYm9vaycsICdpdGVtJywgJ3NwZWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhY3RvckZyb20pIHtcbiAgICAgIGFjdG9yRnJvbS5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhLmRhdGEuX2lkXSlcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERyYXdOb3RlIChub3RlKSB7XG4gIGlmIChub3RlLmRvY3VtZW50LmdldEZsYWcoJ0NvQzcnLCAnaGlkZS1iYWNrZ3JvdW5kJykgPz8gZmFsc2UpIHtcbiAgICBub3RlLmNvbnRyb2xJY29uLmJnLmNsZWFyKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQgKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlbmRlckNvQzdKb3VybmFsU2hlZXQgKGFwcGxpY2F0aW9uLCBodG1sLCBkYXRhKSB7XG4gIGlmICgoYXBwbGljYXRpb24ub2JqZWN0LmdldEZsYWcoJ0NvQzcnLCAnY3NzLWFkdmVudHVyZS1lbnRyeScpID8/IGZhbHNlKSkge1xuICAgIGlmICghaHRtbC5oYXNDbGFzcygnY29jNy1hZHZlbnR1cmUtZW50cnknKSkge1xuICAgICAgaHRtbC5hZGRDbGFzcygnY29jNy1hZHZlbnR1cmUtZW50cnknKVxuICAgIH1cbiAgICBpZiAoKGFwcGxpY2F0aW9uLm9iamVjdC5nZXRGbGFnKCdDb0M3JywgJ2ZpeGVkLWFkdmVudHVyZS1oZWFkaW5nJykgPz8gZmFsc2UpICYmICFodG1sLmhhc0NsYXNzKCdmaXhlZC1hZHZlbnR1cmUtaGVhZGluZycpKSB7XG4gICAgICBjb25zdCBvYmogPSAkKGh0bWwpXG4gICAgICBvYmouYWRkQ2xhc3MoJ2ZpeGVkLWFkdmVudHVyZS1oZWFkaW5nJylcbiAgICAgIGNvbnN0IHN1YmhlYWRpbmcgPSBkYXRhLnBhZ2VzPy5bMF0/LmZsYWdzPy5Db0M3Py5bJ2ZpeGVkLWFkdmVudHVyZS1zdWJoZWFkaW5nJ10gPz8gJydcbiAgICAgIGlmIChzdWJoZWFkaW5nID09PSAnJykge1xuICAgICAgICBvYmouZmluZCgnYXJ0aWNsZS5qb3VybmFsLWVudHJ5LXBhZ2UudGV4dC5sZXZlbDEnKT8uYmVmb3JlKCc8ZGl2IHN0eWxlPVwicGFkZGluZzogMC41ZW07XCI+PC9kaXY+JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNob3J0ID0gc3ViaGVhZGluZy50cmltKCkubGVuZ3RoID09PSAwXG4gICAgICAgIG9iai5maW5kKCdhcnRpY2xlLmpvdXJuYWwtZW50cnktcGFnZS50ZXh0LmxldmVsMScpPy5iZWZvcmUoJzxkaXYgY2xhc3M9XCJhZHZlbnR1cmUtaGVhZGluZy1zZWN0aW9uIGZsZXhyb3dcIj48ZGl2IGNsYXNzPVwiYm9va21hcmsnICsgKHNob3J0ID8gJyBzaG9ydCcgOiAnJykgKyAnXCI+PGltZyBzcmM9XCJzeXN0ZW1zL0NvQzcvYXNzZXRzL2FydC8nICsgKHNob3J0ID8gJ2Jvb2ttYXJrcy53ZWJwJyA6ICdib29rbWFyay53ZWJwJykgKyAnXCI+PC9kaXY+PGRpdiBjbGFzcz1cImFkdmVudHVyZS1oZWFkaW5nXCI+PGRpdiBjbGFzcz1cImhlYWRpbmdcIj4nICsgZGF0YS50aXRsZSArICc8L2Rpdj4nICsgKHNob3J0ID8gJycgOiAnPGRpdiBjbGFzcz1cInN1YmhlYWRpbmdcIj4nICsgc3ViaGVhZGluZyArICc8L2Rpdj4nKSArICc8L2Rpdj48L2Rpdj4nKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQgKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlbmRlckpvdXJuYWxUZXh0UGFnZVNoZWV0IChhcHBsaWNhdGlvbiwgaHRtbCwgZGF0YSkge1xuICBpZiAoKGFwcGxpY2F0aW9uLm9iamVjdC5wYXJlbnQuZ2V0RmxhZygnQ29DNycsICdjc3MtYWR2ZW50dXJlLWVudHJ5JykgPz8gZmFsc2UpKSB7XG4gICAgaWYgKCFodG1sLmhhc0NsYXNzKCdjb2M3LWFkdmVudHVyZS1lbnRyeScpKSB7XG4gICAgICBodG1sLmFkZENsYXNzKCdjb2M3LWFkdmVudHVyZS1lbnRyeScpXG4gICAgICBodG1sLmZpbmQoJ3NlY3Rpb24udG1pLXRvZ2dsZWFibGUgcC50b2dnbGUnKS5jbGljaygoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICBjb25zdCBzZWN0aW9uID0gb2JqLmNsb3Nlc3QoJ3NlY3Rpb24udG1pLXRvZ2dsZWFibGUnKS5maW5kKCdkaXYudG9nZ2xlOmZpcnN0JylcbiAgICAgICAgaWYgKHNlY3Rpb24uaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICBvYmoudGV4dCgnUmV2ZWFsJylcbiAgICAgICAgICBzZWN0aW9uLnNsaWRlVXAoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9iai50ZXh0KCdIaWRlJylcbiAgICAgICAgICBzZWN0aW9uLnNsaWRlRG93bigpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiQ09DNyIsInN0YW5kYXJkIiwibW9kZXJuIiwibW9kZXJuUHVscCIsInB1bHAiLCJkb3duRGFya2VyVHJhaWxzIiwiZG93bkRhcmtlclRyYWlsc1B1bHAiLCJkYXJrQWdlcyIsImRhcmtBZ2VzUHVscCIsInJlZ2VuY3kiLCJyZWdlbmN5UHVscCIsInJlaWduT2ZUZXJyb3IiLCJnYXNMaWdodCIsImludmljdHVzIiwiZGVjaW1hbExlZnQiLCJkZWNpbWFsUmlnaHQiLCJpbnRlZ2VyTGVmdCIsImludGVnZXJSaWdodCIsImxzZCIsInJvbWFuIiwibm9uZSIsImFzc2VzIiwic2VzdGVydGlpIiwicXVpbmFyaWkiLCJkZW5hcmlpIiwiZCIsInMiLCJ2YWx1ZSIsIm11bHRpcGxpZXIiLCJuYW1lIiwiZmlsdGVyIiwic3RyIiwiY29uIiwic2l6IiwiZGV4IiwiYXBwIiwiaW50IiwicG93IiwiZWR1Iiwibm9hZGp1c3RtZW50cyIsIm5veHBnYWluIiwic3BlY2lhbCIsInJhcml0eSIsInB1c2giLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJyYW5nZWQiLCJyZXF1aXJlc25hbWUiLCJrZWVwYmFzZXZhbHVlIiwicGlja25hbWVvbmx5Iiwib25seW9uZSIsIm1lbGVlIiwicm5nZCIsIm1udnIiLCJ0aHJvd24iLCJzaG90Z3VuIiwiZGJybCIsImltcGwiLCJicnN0IiwiYXV0byIsImFoZGIiLCJhZGRiIiwic2xudCIsInNwY2wiLCJtb250IiwiYmxzdCIsInN0dW4iLCJyYXJlIiwiYnVybiIsImNhbGwiLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwiZm9ybXVsYSIsImFjdG9yIiwiYWN0b3JzaGVldCIsInN0YXR1cyIsInRlbXBvSW5zYW5lIiwiaW5kZWZJbnNhbmUiLCJ1bmNvbnNjaW91cyIsImNyaXRpY2FsV291bmRzIiwiZHlpbmciLCJwcm9uZSIsImRlYWQiLCJuZXdCb29rTmFtZSIsIm5ld1NraWxsTmFtZSIsIm5ld1NwZWxsTmFtZSIsIm5ld0l0ZW1OYW1lIiwibmV3V2VhcG9uTmFtZSIsImNyZWF0dXJlRmlnaHRpbmdTa2lsbCIsImZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIiwiZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSIsInJhbmdlZFNwZWNpYWxpemF0aW9uTmFtZSIsImNvbWJhdENhcmRzIiwiZmlnaHRCYWNrIiwiZG9kZ2UiLCJtYW5ldXZlciIsIm5vUmVzcG9uc2UiLCJDb0M3QWN0aXZlRWZmZWN0IiwiQWN0aXZlRWZmZWN0IiwiYXBwbHkiLCJjaGFuZ2UiLCJrZXkiLCJpc05hTiIsInN5c3RlbSIsImF0dHJpYnMiLCJhcm1vciIsIk51bWJlciIsImRiIiwiU3RyaW5nIiwic3VwZXIiLCJvbk1hbmFnZUFjdGl2ZUVmZmVjdCIsImV2ZW50Iiwib3duZXIiLCJwcmV2ZW50RGVmYXVsdCIsImEiLCJjdXJyZW50VGFyZ2V0IiwibGkiLCJjbG9zZXN0IiwiZWZmZWN0IiwiZGF0YXNldCIsImVmZmVjdElkIiwiZWZmZWN0cyIsImdldCIsImFjdGlvbiIsImNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwibGFiZWwiLCJnYW1lIiwiaTE4biIsImxvY2FsaXplIiwiaWNvbiIsIm9yaWdpbiIsInV1aWQiLCJlZmZlY3RUeXBlIiwidW5kZWZpbmVkIiwiZGlzYWJsZWQiLCJzaGVldCIsInJlbmRlciIsImRlbGV0ZSIsInVwZGF0ZSIsIl9wcmVwYXJlRHVyYXRpb24iLCJkdXJhdGlvbiIsInR5cGUiLCJzZWNvbmRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJmaWx0ZXJBY3RpdmVFZmZlY3RzIiwiY29uZGl0aW9uTmFtZSIsImZvdW5kcnkiLCJ1dGlscyIsImlzTmV3ZXJWZXJzaW9uIiwidmVyc2lvbiIsInN0YXR1c2VzIiwiaGFzIiwiZmxhZ3MiLCJjb3JlIiwic3RhdHVzSWQiLCJnZXRTdGF0dXNLZXkiLCJvcHRpb25zIiwic2l6ZSIsInZhbHVlcyIsImdldEZsYWciLCJmaW5kIiwidiIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiaXNTdGF0dXMiLCJ0aGlzIiwicHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwidGVtcG9yYXJ5IiwicGFzc2l2ZSIsImluYWN0aXZlIiwic3VwcHJlc3NlZCIsImluZm8iLCJlIiwiaXNTdXBwcmVzc2VkIiwiaXNUZW1wb3JhcnkiLCJoaWRkZW4iLCJsZW5ndGgiLCJwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsImNvdW50IiwiYWN0aXZlIiwiX2dldFNvdXJjZU5hbWUiLCJleHBlbmRlZCIsIkNvQzdEaWNlIiwicm9sbCIsIm1vZGlmIiwicm9sbE1vZGUiLCJoaWRlRGljZSIsImFsdGVybmF0aXZlRGljZSIsIm1vZHVsZXMiLCJzZXR0aW5ncyIsIkNvQzciLCJkZXYiLCJkaWNlIiwiYWx3YXlzQ3JpdCIsIlJvbGwiLCJmcm9tRGF0YSIsImNyaXQwMSIsImFsd2F5c0Z1bWJsZSIsImZ1bWJsZTk5IiwicmVwZWF0IiwiTWF0aCIsImFicyIsImFzeW5jIiwicmVzdWx0IiwidW5pdCIsInRvdGFsIiwicmVzdWx0cyIsInRlbnMiLCJDT05GSUciLCJEaWNlIiwidGVybXMiLCJ0IiwiaW5jbHVkZXMiLCJtYXgiLCJtaW4iLCJzaG93Um9sbERpY2UzZCIsInN5bmNEaWNlIiwiY2hhdERhdGEiLCJ3aGlzcGVyIiwiYmxpbmQiLCJDaGF0TWVzc2FnZSIsImFwcGx5Um9sbE1vZGUiLCJkaWNlM2QiLCJzaG93Rm9yUm9sbCIsInVzZXIiLCJjb21iaW5lZFJvbGwiLCJwb29sIiwia2V5cyIsIm1hcCIsInBhcnNlSW50IiwicGVuYWx0eURpY2UiLCJib251c0RpY2UiLCJoYXNEU04iLCJqb2luIiwiZ3JvdXBzIiwiYmFzZURpZSIsImJhc2VTZXQiLCJvdXRwdXQiLCJtb2RpZmllciIsIm9mZnNldCIsInN0YXRpYyIsImNsYXNzIiwiZXZhbHVhdGVkIiwibnVtYmVyIiwiZmFjZXMiLCJtb2RpZmllcnMiLCJvcGVyYXRvciIsIkNvQzdJdGVtIiwiSXRlbSIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNvbnRleHQiLCJkb2N1bWVudENsYXNzZXMiLCJleHRlbmRlZCIsImltZyIsIl9jcmVhdGVEb2N1bWVudExpbmsiLCJldmVudERhdGEiLCJtYXRjaCIsInJlbGF0aXZlVG8iLCJKb3VybmFsRW50cnlQYWdlIiwiZG9jdW1lbnRDbGFzcyIsIml0ZW0iLCJmcm9tVXVpZCIsImljb25MYW5ndWFnZSIsIm1hbGZ1bmN0aW9uIiwidG9nZ2xlUHJvcGVydHkiLCJwcm9wZXJ0eUlkIiwib3ZlcnJpZGUiLCJmaXJlYXJtcyIsImNoZWNrZWRQcm9wcyIsImVyYXMiLCJDb0NJREVkaXRvciIsImVyYVRvZ2dsZSIsInByb3BlcnRpZXMiLCJza2lsbE5hbWUiLCJwYXJ0cyIsImdldE5hbWVQYXJ0c1NwZWMiLCJzcGVjaWFsaXphdGlvbiIsIm1lbGVlV2VhcG9uIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJ0aGVuIiwiaGFzUHJvcGVydHkiLCJpc0luY2x1ZGVkSW5TZXQiLCJzaG9ydE5hbWUiLCJ1cGRhdGVSb2xsIiwic3BlY05hbWVSZWdleCIsIlJlZ0V4cCIsIkNvQzdVdGlsaXRpZXMiLCJxdW90ZVJlZ0V4cCIsImdldE5hbWVXaXRob3V0U3BlYyIsImlzQW55U3BlYyIsInRvTG93ZXJDYXNlIiwic2tpbGwiLCJndWVzc05hbWVQYXJ0cyIsImNoZWNrU2tpbGxQcm9wZXJ0aWVzIiwic2V0IiwiaW5kZXhPZiIsImZsYWdGb3JEZXZlbG9wZW1lbnQiLCJpc0dNIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiZGV2ZWxvcGVtZW50RmxhZyIsImdldEl0ZW1GbGFnIiwidG9nZ2xlSXRlbUZsYWciLCJmbGFnTmFtZSIsImVyYXNlQWRqdXN0bWVudCIsImZsYWdWYWx1ZSIsInVpIiwibm90aWZpY2F0aW9ucyIsInNldEl0ZW1GbGFnIiwidW5zZXRJdGVtRmxhZyIsImxvY2tlZCIsInVzZXNBbHRlcm5hdGl2ZVNraWxsIiwibWF4VXNlc1BlclJvdW5kIiwibXVsdGlTaG90IiwidXNlc1BlclJvdW5kIiwic2luZ2xlU2hvdCIsIm5vcm1hbCIsInVzZXNQZXJSb3VuZFN0cmluZyIsImJ1cnN0IiwibXVsdGlwbGVTaG90cyIsImJhc2VSYW5nZSIsInJhbmdlIiwicGFyZW50IiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJldmFsdWF0ZVN5bmMiLCJsb25nUmFuZ2UiLCJsb25nIiwiZXh0cmVtZVJhbmdlIiwiZXh0cmVtZSIsInNraWxsUHJvcGVydGllcyIsImVudHJpZXMiLCJjYWxjdWxhdGVCYXNlIiwiYmFzZSIsInBhcnNlZCIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJnZXRQcm9wZXJ0eSIsImZsb29yIiwibWF4aW1pemUiLCJlcnIiLCJfYmFzZSIsImFzeW5jQmFzZSIsImNvbnNvbGUiLCJnZXRCdWxsZXRMZWZ0IiwiYW1tbyIsInNldEJ1bGxldHMiLCJyZWxvYWQiLCJtYXhCdWxsZXQiLCJidWxsZXRzIiwiYWRkQnVsbGV0IiwibWF4QnVsbGV0cyIsInNob290QnVsbGV0cyIsIngiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwic2tpbGxMaXN0IiwiY29uY2F0IiwicmVkdWNlIiwibmV3QXJyYXkiLCJzb3J0Iiwic29ydEJ5TmFtZUtleSIsIl9nZXRDaGF0Q2FyZEFjdG9yIiwiY2FyZCIsInRva2VuS2V5IiwidG9rZW5JZCIsInNjZW5lSWQiLCJzcGxpdCIsImFjdG9ycyIsInRva2VucyIsInNjZW5lIiwic2NlbmVzIiwidG9rZW5EYXRhIiwiZ2V0RW1iZWRkZWREb2N1bWVudCIsIlRva2VuIiwiYWN0b3JJZCIsImdldENoYXREYXRhIiwiaHRtbE9wdGlvbnMiLCJkdXBsaWNhdGUiLCJkZXNjcmlwdGlvbiIsImxhYmVscyIsIlRleHRFZGl0b3IiLCJlbnJpY2hIVE1MIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwic2tpbGxMYWJlbCIsImZvdW5kIiwibWFpbiIsImlkIiwiaXRlbXMiLCJhbHRlcm5hdGl2IiwiY2FuQmVQdXNoZWQiLCJpbXBhbGUiLCJpc0RvZGdlIiwiY3JlYXRlSW5saW5lUm9sbCIsImNscyIsInRpdGxlIiwiZXNjYXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImsiLCJpbm5lckhUTUwiLCJpc0N0cmxLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImtleUNvZGUiLCJjaGF0SGVscGVyIiwiaHlwaGVuVG9DYW1lbENhc2UiLCJzdHJpbmciLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJjcmVhdGVNZXNzYWdlIiwibWVzc2FnZSIsIm1lc3NhZ2VEYXRhIiwiZmxhdm9yIiwic3BlYWtlciIsImdldFNwZWFrZXIiLCJDT05TVCIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImNvbnRlbnQiLCJjcmVhdGUiLCJtc2ciLCJjYW1lbENhc2VUb0h5cGhlbiIsImdldEFjdG9yRnJvbUtleSIsImlzRG9jdW1lbnRVdWlkIiwiaXNEb2N1bWVudFV1aWRQYWNrIiwiU2Zyb21VdWlkIiwidG9rZW4iLCJnZXRUb2tlbkZyb21LZXkiLCJnZXRTcGVha2VyRnJvbUtleSIsImFjdG9yS2V5IiwiYWxpYXMiLCJhdHRhY2hPYmplY3RUb0VsZW1lbnQiLCJvYmplY3QiLCJlbGVtZW50Iiwib2JqZWN0TmFtZSIsInByb3AiLCJnZXRPYmplY3RGcm9tRWxlbWVudCIsImRlc2VyaWFsaXplIiwib2JqIiwib2JqUHJvcCIsIm9iak5hbWUiLCJ0b1N0cmluZyIsInRva2VuRG9jIiwiZ2V0QWN0b3JUb2tlbiIsInByb3RvdHlwZVRva2VuIiwiZ2V0QWN0b3JJbWdGcm9tS2V5IiwidGV4dHVyZSIsInNyYyIsImdldERpc3RhbmNlIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImNhbnZhcyIsImdyaWQiLCJ1bml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJtZWFzdXJlRGlzdGFuY2VzIiwiZ3JpZFNwYWNlcyIsImVsZXZhdGlvbiIsInNxcnQiLCJ3YXJuIiwidG9ZYXJkcyIsIkNvQzdSb2xsIiwiZ2V0RnJvbUNhcmQiLCJyb2xsRGl2IiwicXVlcnlTZWxlY3RvciIsInJlc3VsdFR5cGUiLCJzdWNjZXNzTGV2ZWwiLCJDb0M3Q2hlY2siLCJyZWd1bGFyIiwiZm9ybWF0IiwiaGFyZCIsImNyaXRpY2FsIiwiZnVtYmxlIiwiZmFpbHVyZSIsIml0ZW1JZCIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiZ2V0RnJvbUVsZW1lbnQiLCJoYXNCb251cyIsImRpY2VNb2RpZmllciIsImJvbnVzIiwiYm9udXNUeXBlIiwidGVuRGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaWUiLCJzZWxlY3RlZCIsImlzTWF4IiwiaXNNaW4iLCJ1bml0RGllIiwiaW5jcmVhc2VTdWNjZXNzIiwiaXNsIiwibmV3U3VjY2VzTGV2ZWwiLCJsdWNrTmVlZGVkIiwibHVja05lZWRlZFR4dCIsImx1Y2tOZWVkZWRWYWx1ZSIsImdldEZyb21DaGVjayIsImNoZWNrIiwicm9sbFR5cGUiLCJzaWRlIiwicmVmTWVzc2FnZUlkIiwicmVmZXJlbmNlTWVzc2FnZUlkIiwiZGlmZmljdWx0eSIsImRpY2VNb2QiLCJyYXdWYWx1ZSIsImlzRnVtYmxlIiwiaXNDcml0aWNhbCIsImNoYXJhY3RlcmlzdGljIiwiaXNUb2tlbiIsImF0dGFjaENoZWNrVG9FbGVtZW50IiwiaHRtbEVsZW1lbnQiLCJhdHRhY2hUb0VsZW1lbnQiLCJDb0M3RGFtYWdlIiwiZ2V0TWFpbkRpZSIsImRhbWFnZVN0cmluZyIsImRhbWFnZSIsInJvbGxzIiwiciIsImdyb3VwIiwiQXZlcmFnZVBhcmVudGhldGljYWxUZXJtIiwiUGFyZW50aGV0aWNhbFRlcm0iLCJfZXZhbHVhdGVTeW5jIiwiQXZlcmFnZVJvbGwiLCJ0ZXJtIiwiZXZhbHVhdGUiLCJtaW5pbWl6ZSIsImZvckVhY2giLCJSb2xsVGVybSIsIkVycm9yIiwiaXNJbnRlcm1lZGlhdGUiLCJfZGljZSIsIk51bWVyaWNUZXJtIiwic2ltcGxpZnlUZXJtcyIsIl9ldmFsdWF0ZWQiLCJfdG90YWwiLCJfZXZhbHVhdGVUb3RhbCIsIl9zcGxpdFBhcmVudGhlc2VzIiwiX2Zvcm11bGEiLCJfc3BsaXRHcm91cCIsIm9wZW5SZWdleHAiLCJPUEVOX1JFR0VYUCIsImNsb3NlUmVnZXhwIiwiQ0xPU0VfUkVHRVhQIiwib3BlblN5bWJvbCIsImNsb3NlU3ltYm9sIiwib25DbG9zZSIsIm9wZW4iLCJleHByZXNzaW9uIiwiYXJncyIsIl9zcGxpdE1hdGhBcmdzIiwiTWF0aFRlcm0iLCJBY3RvclBpY2tlckRpYWxvZyIsIkZvcm1BcHBsaWNhdGlvbiIsImRlZmF1bHRPcHRpb25zIiwibWVyZ2VPYmplY3QiLCJjbGFzc2VzIiwidGVtcGxhdGUiLCJjbG9zZU9uU3VibWl0Iiwid2lkdGgiLCJoZWlnaHQiLCJhY3RpdmF0ZUxpc3RlbmVycyIsImh0bWwiLCJvbiIsIl9vblBpY2siLCJob3ZlciIsIl9vbkhvdmVySW4iLCJfb25Ib3Zlck91dCIsIl9vblN1Ym1pdEJ1dHRvbiIsImwiLCJwYXJlbnRFbGVtZW50IiwiY2hpbGRyZW4iLCJ0b2dnbGUiLCJlbnRyeVV1aWQiLCJyZWFkeSIsImlzVmlzaWJsZSIsImNvbnRyb2xsZWQiLCJob3Zlck91dE90aGVycyIsIl9oaWdobGlnaHRlZCIsInJlc29sdmUiLCJjbG9zZSIsImFsbG93ZWRUeXBlcyIsInBsYWNlYWJsZXMiLCJvd25lcnNoaXAiLCJkZWZhdWx0IiwiRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUyIsIk9XTkVSIiwiZm91bmRJRHMiLCJvcHRpb24iLCJpc1Rva2VuRG9jdW1lbnQiLCJUb2tlbkRvY3VtZW50IiwicG9ydHJhaXQiLCJjYW5QaW5nIiwiY2hhcmFjdGVyIiwiZGVmYXVsdE9wdGlvbiIsIlByb21pc2UiLCJDb0M3R3JvdXBNZXNzYWdlIiwicmVtb3ZlUm9sbCIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2VzIiwicm9sbFN0YXR1c2VzIiwid2hpY2giLCJ1cGRhdGVzIiwidXBkYXRlVGhlR3JvdXBNZXNzYWdlIiwicHVzaE15Um9sbCIsImdtSWQiLCJjYW5Vc2VyTW9kaWZ5IiwiZ2V0QW5JZEZvckdtIiwicGVyZm9ybUNvbWJpbmVkUm9sbCIsInB1c2hpbmciLCJwZXJmb3JtTm9ybWFsUm9sbCIsInNwZW5kTXlMdWNrIiwiY29tcGxldGVkIiwibHVja0Ftb3VudCIsImluZGV4IiwibHVja1RvU3BlbmQiLCJnZXRBY3RvciIsImFjdG9yVXVpZCIsInNwZW5kTHVjayIsImVycm9yIiwiaW5jcmVhc2VMdWNrU3BlbmQiLCJKU09OUm9sbERhdGEiLCJzb2NrZXQiLCJlbWl0IiwibGlzdGVuZXIiLCJ1cGdyYWRlQ2hlY2siLCJmb3JjZVBhc3MiLCJyb2xsRGF0YSIsInBhcnNlUm9sbHMiLCJxdWljayIsImFzc2lnbiIsImV4cGFuZE9iamVjdCIsInBlcmZvcm1EZWxldGlvbnMiLCJhbGxSb2xsc0NvbXBsZXRlZCIsImlzU3VjY2VzcyIsImlzRmFpbHVyZSIsInN1Y2Nlc3NlcyIsImZhaWx1cmVzIiwiY29tYmluZWQiLCJpc1RpZSIsImlzQ29tYmF0Iiwicm9sbE9yZGVyIiwiQXJyYXkiLCJmcm9tIiwiSW50OEFycmF5Iiwic3Vic3RyIiwic3VjY2Vzc0xldmVscyIsImRlZmVuZGVySXNEb2RnaW5nIiwicGFzc2VkIiwiaXNEb2RnaW5nIiwiaXNBdHRhY2tlciIsImFkdmFudGFnZUF0dGFja2VyIiwiYWR2YW50YWdlRGVmZW5kZXIiLCJiZXN0IiwibmVlZHNUaWVCcmVha2VyIiwicmVzdWx0VGV4dCIsInJvbGxJc1dpbm5lciIsInJvbGxJc1RpZSIsImlzV2lubmVyIiwiaXNNYW5ldXZlciIsIm9wcG9zZWRSb2xsVGllQnJlYWtlciIsImIiLCJtb2RpZmllZFJlc3VsdCIsIm9mZnNldE1heCIsImZhaWxlZCIsImkiLCJyZW5kZXJUZW1wbGF0ZSIsImdldFRlbXBsYXRlUGF0aCIsInVwZGF0ZVRoZU1lc3NhZ2UiLCJnZXRDaGVjayIsImNoZWNrRGF0YSIsInRoZVJvbGwiLCJkZW55UHVzaCIsImF0dHJpYnV0ZSIsInB1c2hhYmxlIiwicGVyZm9ybVJvbGwiLCJfcGVyZm9ybSIsImZvcmNlRFNOIiwiZmlyc3QiLCJzaWxlbnQiLCJwZXJmb3JtTXlSb2xscyIsIm5hbWVSb2xsIiwic2V0VGltZW91dCIsImZ1bGxOYW1lIiwidGFncyIsInBlcmNlbnQiLCJuZXdHcm91cE1lc3NhZ2UiLCJyb2xsc0J5VXNlciIsInJvbGxSZXF1aXJlc05hbWUiLCJhc1VzZXJJZCIsImF1dG9Sb2xsIiwicm9sbGluZyIsInRlbXBsYXRlRGF0YSIsInVzZXJJZCIsImlzVXNlckFjdGl2ZSIsInVzZXJzIiwiX29uVG9nZ2xlIiwiYnV0dG9uIiwiY29udGFpbnMiLCJfb25DbGljayIsIm9rYXkiLCJyZW5kZXJDaGF0TWVzc2FnZSIsImNhbk1vZGlmeSIsImdtIiwiYW55IiwicmVtb3ZlIiwiaWRlbnRpZmllciIsImFwaSIsImNvY2lkIiwiZnJvbUNvQ0lEIiwibSIsImRpZmZpY3VsdHlMZXZlbCIsInVua25vd24iLCJkZWZhdWx0VXVpZCIsInUiLCJnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIiwic2hvcnQiLCJjaGFyYWN0ZXJpc3RpY3MiLCJza2lsbHMiLCJnZXRJdGVtT3JBZGQiLCJpc1dlYXBvbiIsImNyZWF0ZUdyb3VwTWVzc2FnZSIsImNvbmZpZyIsInNob3dDb21wbGV0ZWRSb2xscyIsImlzRWRpdGFibGUiLCJ3aW5uZXJSb2xsc0RhbWFnZSIsIndhc1B1c2hlZCIsInJvbGxSZXF1aXNpdGVzIiwicm9sbGFibGUiLCJDaGF0Q2FyZEFjdG9yIiwiZmFzdEZvcndhcmQiLCJkaXNwbGF5QWN0b3JPbkNhcmQiLCJpc0JsaW5kIiwiX2lzQmxpbmQiLCJfcm9sbE1vZGUiLCJ3ZWFwb24iLCJ0YXJnZXRlZFRva2VucyIsInRhcmdldHMiLCJ0YXJnZXQiLCJ0YXJnZXRUb2tlbiIsInRhcmdldEFjdG9yIiwiX3RhcmdldFRva2VuIiwiX3RhcmdldEtleSIsInBvcCIsIl90YXJnZXRBY3RvciIsInRhcmdldEtleSIsImhhc1RhcmdldCIsImdldFdlYXBvblNraWxscyIsInRhcmdldEltZyIsInRhcmdldE5hbWUiLCJhY3RvckltZyIsInNheSIsInNwZWFrZXJEYXRhIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJyZXBsYWNlciIsIlNhbkNoZWNrQ2FyZCIsInNhbkRhdGEiLCJCb29sZWFuIiwic2FuUmVhc29uIiwic2FuTW9kaWZpZXIiLCJzYW5EaWZmaWN1bHR5Iiwic3RhdGUiLCJzYW5Mb3NzU291cmNlIiwiaW52b2x1bnRhcnlBY3Rpb24iLCJzYW5Sb2xsZWQiLCJzYW5DaGVjayIsInNhbkxvc3NGb3JtdWxhIiwic2FuTWF4Iiwic2FuTWluIiwic2FuTG9zdFRvUmVhc29uIiwibWF4UG9zc2libGVTYW5Mb3NzIiwibWF4TG9zc1RvU2FuUmVhc29uIiwibWF4U2FuTG9zcyIsInNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCIsImZpcnN0RW5jb3VudGVyIiwibXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCIsImlzQWN0b3JMb29zaW5nU2FuIiwiaGFzVGVtcG9JbnNhbmUiLCJpbW11bmVUb0NyZWF0dXJlIiwiYm91dER1cmF0aW9uVGV4dCIsImJvdXREdXJhdGlvbiIsImJvdXRSZWFsVGltZSIsImJvdXRTdW1tYXJ5IiwieW91R2FpbkN0aHVsaHVNeXRob3NTdHJpbmciLCJteXRob3NHYWluIiwiYWR2YW5jZVN0YXRlIiwia2VlcENyZWF0dXJlU2FuRGF0YSIsImZpbmlzaCIsImFwcGx5U2FuTG9zcyIsImJvdXRSZXN1bHQiLCJlbnRlckJvdXRPZk1hZG5lc3MiLCJib3V0T2ZNYWRuZXNzUmVzb2x2ZWQiLCJib3V0T2ZNYWRuZXNzT3ZlciIsInRyaWdnZXJJbnNhbml0eSIsInVuc2V0Q29uZGl0aW9uIiwiY3RodWxodU15dGhvc0F3YXJkZWQiLCJhbW91bnRHYWluZWQiLCJleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSIsImN0aHVsaHVNeXRob3NTa2lsbCIsIm9sZFZhbHVlIiwiYWRqdXN0bWVudHMiLCJleHBlcmllbmNlIiwiYnlwYXNzUm9sbFNhbiIsImlzQnlwYXNzZWQiLCJpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCIsInNhbkxvc3NSb2xsZWQiLCJpZ25vcmVTYW5DaGVjayIsInByZUhhcmRlbmVkU2FuTG9zcyIsIm9yaWdpbmFsU2FuTG9zcyIsInNhbkxvc3MiLCJhcHBseU15dGhvc0hhcmRlbmVkIiwidXNlTXl0aG9zSGFyZGVuZWQiLCJyb2xsU2FuIiwibGltaXRlZExvc3NUb0NyZWF0dXJlIiwiaW1tdW5lQWxyZWFkeUluQm91dCIsInNhbkxvc3NBcHBsaWVkIiwiaW50Um9sbGVkIiwiaW5zYW5pdHkiLCJyb2xsU2FuTG9zcyIsInNhbkxvc3NSb2xsIiwibG9vc2VTYW4iLCJhY3Rvckxvc3RTYW4iLCJzYW4iLCJwZXJtYW5lbnRseUluc2FuZSIsImhhc0luZGVmSW5zYW5lIiwic2hha2VuIiwiaW5zYW5pdHlUYWJsZVJvbGxlZCIsImRhaWx5U2FuTG9zcyIsImRhaWx5U2FuTGltaXQiLCJ0ZW1wb3JhcnlJbnNhbmUiLCJpbmRlZmluaXRlbHlJbnNhbmUiLCJtZW1vcnlSZXByZXNzZWQiLCJyb2xsSW50IiwiaW50Q2hlY2siLCJpbnREaWZmaWN1bHR5IiwiaW50TW9kaWZpZXIiLCJhbHJlYWR5SW5zYW5lIiwic2V0Q29uZGl0aW9uIiwiY2xlYXJTYW5Mb3NzUmVhc29uIiwic2V0UmVhc29uU2FuTG9zcyIsInVwZGF0ZUNoYXRDYXJkIiwiX19pbmxpbmVTYW5DaGVjayIsImlubGluZUNoZWNrIiwib3V0ZXJIVE1MIiwiX19pbmxpbmVTYW5Mb3NzUm9sbCIsIl9faW5saW5lSW50Q2hlY2siLCJodG1sQ2FyZEVsZW1lbnQiLCIkIiwicGFyc2VIVE1MIiwiY2hhdE1lc3NhZ2UiLCJjaGF0IiwidXBkYXRlTWVzc2FnZSIsImNoZWNrVGFyZ2V0cyIsImNoYXRDYXJkIiwiZ2V0RnJvbU1lc3NhZ2VJZCIsImh0bWxDYXJkIiwic2FuQ2hlY2tDYXJkRGF0YSIsInBhcnNlIiwidW5lc2NhcGUiLCJzYW5DaGVja0NhcmQiLCJDb0M3TGluayIsIkNIRUNLX1RZUEUiLCJDSEVDSyIsIlNBTkxPU1MiLCJJVEVNIiwiRUZGRUNUIiwiTElOS19UWVBFIiwiQ0hBUkFDVEVSSVNUSUMiLCJBVFRSSUJVVEUiLCJTS0lMTCIsImluaXQiLCJib2R5IiwiX29uTGlua0NsaWNrIiwiX29uRHJhZ0NvQzdMaW5rIiwiZW5yaWNoZXJzIiwicGF0dGVybiIsImVucmljaGVyIiwiX2NyZWF0ZUxpbmsiLCJfbGlua0Zyb21FdmVudCIsIm9sZFR5cGUiLCJsaW5rVHlwZSIsImxpbmtJY29uIiwiZGlzcGxheU5hbWUiLCJpbm5lclRleHQiLCJjb252ZXJ0RGlmZmljdWx0eSIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZnJvbURyb3BEYXRhIiwiY2hhbmdlcyIsImV4dGVybmFsIiwibWF0Y2hlcyIsIm1hdGNoQWxsIiwiZGlmZmljdWx0eVN0cmluZyIsImh1bWFuTmFtZSIsImNvY0lkTmFtZSIsImRyYWdnYWJsZSIsInBhY2siLCJsaW5rIiwiX29uTGlua0FjdG9yQ2xpY2siLCJjaGFyYWN0ZXJpc3RpY0NoZWNrIiwic2hpZnRLZXkiLCJza2lsbENoZWNrIiwiYXR0cmlidXRlQ2hlY2siLCJ3ZWFwb25DaGVjayIsInRvQ2hhdE1lc3NhZ2UiLCJ0b1doaXNwZXJNZXNzYWdlIiwib3duZXJzIiwiQ29DN0NvbnRlbnRMaW5rRGlhbG9nIiwiZ2V0U3BlYWtlckFjdG9yIiwiT0JTRVJWRVIiLCJzZXRWYWx1ZSIsImNoZWNrVHlwZSIsImNoZWNrTmFtZSIsImlzQ2hhcmFjdGVyaXN0aWNDaGVjayIsIkNvQ0FjdG9yIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwiYyIsImlzQ2hlY2siLCJpc0F0dHJpYnV0ZUNoZWNrIiwiaXNTa2lsbENoZWNrIiwiaXNJdGVtQ2hlY2siLCJpc1Nhbkxvc3NDaGVjayIsImlzRWZmZWN0IiwiaXNQdXNoaW5nIiwiZHJhZ0Ryb3AiLCJkcmFnU2VsZWN0b3IiLCJkcm9wU2VsZWN0b3IiLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwiZ2V0RGF0YSIsInNoZWV0RGF0YSIsImF0dHJpYnV0ZVR5cGUiLCJlZmZlY3RNb2RlcyIsIkFDVElWRV9FRkZFQ1RfTU9ERVMiLCJjaGFyYWN0ZXJpc3RpY1R5cGUiLCJmcm9tR2FtZSIsImZyb21EaXJlY3RvcnkiLCJoYXNJRCIsImZyb21Db21wZW5kaXVtIiwiaXNTZXRGcm9tR2FtZSIsImFjdG9yTmFtZXMiLCJfb25DaGFuZ2VTdWJtaXQiLCJjbGljayIsIl9vbkVmZmVjdENvbnRyb2wiLCJfb25TdWJtaXQiLCJfYWRkRWZmZWN0Q2hhbmdlIiwiaWR4Iiwic3VibWl0IiwicHJldmVudENsb3NlIiwidXBkYXRlRGF0YSIsIm1vZGUiLCJBREQiLCJfdXBkYXRlT2JqZWN0IiwiZm9ybURhdGEiLCJoYXNFZmZlY3QiLCJ0aW50Iiwicm91bmRzIiwidHVybnMiLCJzdWJtaXR0ZXIiLCJjb3B5VG9DbGlwYm9hcmQiLCJfb25Ecm9wIiwiZGF0YVN0cmluZyIsInNldExpbmsiLCJkb2N1bWVudE5hbWUiLCJkYXRhTGlzdCIsImdldERhdGFGcm9tRHJvcEV2ZW50IiwiaGFzTW9kaWZpZXJzIiwiaGFzTGFiZWwiLCJoYXNJY29uIiwibGlua0RhdGEiLCJkaWFsb2ciLCJSb2xsRGlhbG9nIiwidW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0IiwiYWxsb3dGbGF0RGljZU1vZGlmaWVyIiwiZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIiLCJhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllciIsImRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJoaWRlRGlmZmljdWx0eSIsImNhcmRUeXBlIiwiZm9yY2VkQ2FyZFR5cGUiLCJjYXJkVHlwZXMiLCJDb0M3Q2hhdE1lc3NhZ2UiLCJkbGciLCJEaWFsb2ciLCJidXR0b25zIiwiY2FsbGJhY2siLCJGb3JtRGF0YSIsIlJvbGxDYXJkIiwiaW5pdGlhdG9yIiwiZnJvbU1lc3NhZ2VJZCIsImZyb21NZXNzYWdlIiwiY2FyZEVsZW1lbnQiLCJmcm9tSFRNTENhcmRFbGVtZW50IiwiY2FyZERhdGEiLCJyb2xsZWQiLCJfaHRtbFJvbGwiLCJnZXRIdG1sUm9sbCIsInNwYW4iLCJmbGFnIiwidW5zZXRGbGFnIiwic2V0RmxhZyIsInRvZ2dsZUZsYWciLCJkaXNwYXRjaCIsImNvbGxlY3Rpb24iLCJkZWZhdWx0Q29uZmlnIiwidGltZXN0YW1wIiwicHJvY2VzcyIsInJlc29sdmVPbGQiLCJjbG9zZUNhcmQiLCJ0b01lc3NhZ2UiLCJjb21wdXRlIiwiY2xvc2VkIiwiZnJvbUdNIiwicmFuayIsImFkZFJvbGxEYXRhIiwiYWRkUm9sbCIsInNwbGljZSIsIl9tZXNzYWdlIiwiX21lc3NhZ2VJZCIsImV4Y2x1ZGUiLCJleGNsdWRlU3RhcnRXaXRoIiwid2lubmVycyIsIndpbm5lciIsImxvb3NlcnMiLCJsb29zZXIiLCJoYXNXaW5uZXIiLCJpc0tlZXBlciIsIkNvbWJpbmVkQ2hlY2tDYXJkIiwiYmluZExpc3Rlcm5lcnMiLCJzdWNjZXNzQ291bnQiLCJtYWluQWN0b3JLZXkiLCJzdWNjZXNzIiwiYWxsIiwiY2hlY2tHTUluaXRpYXRvciIsIl9yb2xsIiwiaGlkZVN1Y2Nlc3MiLCJhc3NpZ25Sb2xsIiwiQXVkaW9IZWxwZXIiLCJwbGF5Iiwic291bmRzIiwiYWx0ZXIiLCJmbGF0RGljZU1vZGlmaWVyIiwiZmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiaGlkZURpY2VSZXN1bHQiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJjc3NDbGFzc2VzIiwib3B0aW9ubmFsQ2hhdERhdGEiLCJjYXJkQ2xhc3MiLCJfb25CdXR0b24iLCJfb25LZXkiLCJiaW5kTGlzdGVuZXJzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNhcmRzIiwidHlwZWRDYXJkIiwiYXNzaWduT2JqZWN0IiwiX3VwZGF0ZSIsImZvcm1zIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJkaWZmT2JqZWN0IiwiaXNUYXJnZXRPd25lciIsImlzT3duZXIiLCJEYW1hZ2VDYXJkIiwiZGFtYWdlUm9sbCIsIl9pbXBhbGUiLCJpc0RhbWFnZUZvcm11bGEiLCJkYW1hZ2VGb3JtdWxhIiwidmFsaWRhdGUiLCJpc0RhbWFnZU51bWJlciIsImlzQXJtb3JGb3J1bGEiLCJ0b3RhbERhbWFnZVN0cmluZyIsImlnbm9yZUFybW9yIiwibm9EYW1hZ2UiLCJyb2xsRGFtYWdlIiwiaGFyZHJvbGxlZCIsImRhbWFnZUluZmxpY3RlZCIsImRlYWxEYW1hZ2UiLCJfaHRtbElubGluZVJvbGwiLCJyb2xsQXJtb3IiLCJkZWFsRGFtYWdlVG9TZWxlY3RlZFRhcmdldCIsInNlbGVjdGVkUGxheWVycyIsIm9uZSIsImNvbmZpcm1EYW1hZ2UiLCJ0d28iLCJpbmNsdWVzIiwidHJpbSIsImhhbGZEQiIsIm1heERhbWFnZSIsInJvbGxTdHJpbmciLCJfYXJtb3IiLCJPcHBvc2VkQ2hlY2tDYXJkIiwiYXR0YWNrZXJSb2xsIiwiYXR0YWNrZXIiLCJkZWZlbmRlclJvbGwiLCJkZWZlbmRlciIsImRvZGdlU2tpbGwiLCJfYWEiLCJfYWQiLCJ3aW5uZXJDb3VudCIsImlzQXR0YWNrTWFuZXV2ZXIiLCJkYW1hZ2VDaGF0Q2FyZCIsImlzRXh0cmVtZVN1Y2Nlc3MiLCJ0aWUiLCJyZXNvbHZlZCIsIndpbkNvdW50IiwiU2FuRGF0YURpYWxvZyIsIl90b2dnbGVJbnB1dCIsIlZhbGlkYXRlIiwiUk9MTF9UWVBFX0FUVFJJQlVURSIsIlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyIsIlJPTExfVFlQRV9DT01CQVQiLCJST0xMX1RZUEVfU0tJTEwiLCJST0xMX1RZUEVfRU5DT1VOVEVSIiwiQ0FSRF9UWVBFX0NPTUJJTkVEIiwiQ0FSRF9UWVBFX0dST1VQIiwiQ0FSRF9UWVBFX05PUk1BTCIsIkNBUkRfVFlQRV9PUFBPU0VEIiwiQ0FSRF9UWVBFX1NBTl9DSEVDSyIsIkNBUkRfVFlQRV9OT05FIiwic2VsZWN0Iiwibm9ybWFsaXplUmVxdWVzdCIsInNraWxsSWRzIiwiZ2V0U2tpbGxzQnlOYW1lIiwiYWx0S2V5IiwiY3JlYXRlRW5jb3VudGVyIiwib3BlbkxpbmtUb29sIiwic2VuZFRvQ2hhdCIsInNlbmRUb0NsaXBib2FyZCIsInByZXZlbnRTdGFuZGJ5IiwiZGlhbG9nT3B0aW9ucyIsImF0dHJpYiIsIndlYXBvbkFsdFNraWxsIiwid2VhcG9uTmFtZSIsImhhc1BsYXllck93bmVyIiwidHJpZ2dlciIsImNyZWF0ZUxpbmsiLCJpdGVtTW9kaWZpZXJzIiwiZm91bmRyeUlEIiwiY3JlYXRlUm9sbCIsInJ1blJvbGwiLCJjaGVja1Bhc3NlZCIsImNoZWNrRmFpbGxlZCIsImluZm9zIiwidXNhZ2UiLCJwcm9tcHRMYWJlbCIsInN0YW5kYnkiLCJyb2xsQXR0cmlidXRlIiwicm9sbENoYXJhY3RlcmlzdGljIiwicm9sbGVkU3VjY2Vzc0xldmVsIiwicmVndWxhclRocmVzaG9sZCIsImhhcmRUaHJlc2hvbGQiLCJleHRyZW1lVGhyZXNob2xkIiwiQ29DN0NvbkNoZWNrIiwiX2FjdG9ySWQiLCJpc1JvbGxlZCIsImNvbkNoZWNrIiwiaHRtbENoZWNrIiwiZ2V0Q2hlY2tFbGVtZW50Iiwicm9sbENvbiIsInJlcGxhY2VXaXRoIiwic3RheUFsaXZlIiwiYXBwbGllZCIsIlNraWxsU2VsZWN0RGlhbG9nIiwiX29uU2VsZWN0U2tpbGxDbGlja2VkIiwic3R5bGUiLCJkaXNwbGF5IiwiYWRkZWQiLCJvcHRpb25zQ291bnQiLCJQb2ludFNlbGVjdERpYWxvZyIsIl9vblNlbGVjdENoYXJhY3RlcmlzdGljIiwiX29uQnV0dG9uQ2xpY2tlZCIsIml0ZW1MaXN0Iiwib3B0aW9uYWwiLCJ0b2dnbGVDbGFzcyIsIkNoYXJhY1NlbGVjdERpYWxvZyIsIkNoYXJhY1JvbGxEaWFsb2ciLCJfb25DaGFuZ2VJbnB1dCIsIl9vblJvbGxDaGFyYWN0ZXJpc3RpYyIsIl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyIsImNoYXJhY0tleSIsImluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJkZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwicmVzZXRDaGFyYWN0ZXJpc3RpYyIsImNoYXIiLCJjaGVja1RvdGFsIiwiX2VsZW1lbnQiLCJpbnB1dCIsImxpc3QiLCJwb2ludHMiLCJ2YWxpZGF0aW9uIiwiZW5hYmxlZCIsInZhbCIsInBvaW50c1dhcm5pbmciLCJTa2lsbFNwZWNTZWxlY3REaWFsb2ciLCJzcGVjaWFsaXphdGlvbk5hbWUiLCJiYXNlVmFsdWUiLCJoYXNTa2lsbHMiLCJTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIiwiX29uQ2xpY2tTdWJtaXQiLCJfb25TZWxlY3RDaGFuZ2UiLCJhbGxvd0N1c3RvbSIsImZpeGVkQmFzZVZhbHVlIiwiYWxsb3dTZWxlY3QiLCJTa2lsbFZhbHVlRGlhbG9nIiwiQ29DN01lbGVlUmVzb2x0aW9uIiwiaW5pdGlhdG9yTWVzc2FnZSIsInRhcmdldE1lc3NhZ2UiLCJwcmVDcmVhdGVNZXNzYWdlIiwiQ29DN01lbGVlVGFyZ2V0IiwiQ29DN01lbGVlSW5pdGlhdG9yIiwiaW5pdGlhdG9yVG9rZW4iLCJyZXN1bHRTdHJpbmciLCJ3aW5uZXJJbWciLCJ3aW5uZXJUaXRsZSIsImNyaXRpY2FsRGFtYWdlIiwiZG9jdW1tZW50IiwicGFyZW50TWVzc2FnZUlkIiwiaW5pdGlhdG9yS2V5Iiwib3V0bnVtYmVyZWQiLCJzdXJwcmlzZWQiLCJhdXRvU3VjY2VzcyIsImRvZGdpbmciLCJub3RSZXNwb25kaW5nIiwiZmlnaHRpbmdCYWNrIiwibWFuZXV2ZXJpbmciLCJhY3Rpb25TZWxlY3RlZCIsIl9pbml0aWF0b3JLZXkiLCJfaW5pdGlhdG9yIiwibWVsZWVJbml0aWF0b3IiLCJ1cGRhdGVDYXJkU3dpdGNoIiwicHVibGlzaFVwZGF0ZSIsImNhbWVsRmxhZyIsImNyZWF0ZUNoYXRDYXJkIiwiZ21zIiwicHJvbXB0IiwiZ2V0VXBkYXRlZENoYXRDYXJkIiwidXBkYXRlU2VsZWN0ZWQiLCJ3ZWFwb25JZCIsInBlcmZvcm1Ta2lsbENoZWNrIiwicHVibGlzaCIsImlzVW5rb253biIsInB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQiLCJyZXNvbHV0aW9uQ2FyZCIsInJlc29sdXRpb25NZXNzYWdlIiwicHVibGlzaENoZWNrUmVzdWx0Iiwicm9sbEljb25zIiwicm9sbENvbG9yIiwicm9sbFRpdGxlIiwidXBncmFkZVJvbGwiLCJuZXdTdWNjZXNzTGV2ZWwiLCJvbGRDYXJkIiwibHVja1NwZW50IiwicHJvY2Vzc2VkIiwiZGljZVJvbGxzIiwicmVzdWxEZXRhaWxzIiwiZGljZVRvdGFsIiwiQ29DN0NoYXQiLCJDb0M3UmFuZ2VJbml0aWF0b3IiLCJjb3ZlciIsInRhcmdldENhcmQiLCJmdWxsQXV0byIsImFpbWVkIiwiYm9udXNEaWVBIiwiYm9udXNEaWVCIiwicGVuYWx0eURpZUEiLCJwZW5hbHR5RGllQiIsInRvdGFsQnVsbGV0c0ZpcmVkIiwiX3RhcmdldHMiLCJDb0M3UmFuZ2VUYXJnZXQiLCJyb3VuZGVkRGlzdGFuY2UiLCJyb3VuZCIsImRpc3RhbmNlVW5pdCIsImRpc3RJbllkIiwicG9pbnRCbGFua1JhbmdlIiwib3V0T2ZSYW5nZSIsIm1haW5XZWFwb25Ta2lsbCIsImF1dG9XZWFwb25Ta2lsbCIsImF1dG9GaXJlIiwibXVsdGlUYXJnZXQiLCJhaW1pbmciLCJfYWltaW5nIiwiZ2V0QWN0b3JGbGFnIiwiYWN0aXZlVGFyZ2V0Iiwic2hvdHMiLCJfc2hvdHMiLCJjdXJyZW50U2hvdFJhbmsiLCJhY3RpdmVUYXJnZXRTaG90RGlmZmljdWx0eSIsInNob3REaWZmaWN1bHR5IiwiZGlkQW55U2hvdEhpdCIsImFueUhpdCIsInN1Y2Nlc3NmdWxIaXRzIiwiaGl0cyIsImhpdCIsInNob3QiLCJzaG90RmlyZWQiLCJ0b3RhbEFtbW8iLCJtYXhTaG90cyIsImlnbm9yZUFtbW8iLCJpZ25vcmVVc2VzUGVyUm91bmQiLCJvdXRPZkFtbW8iLCJvdXRPZlNob3RzIiwidm9sbGV5U2l6ZSIsIl92b2xsZXlTaXplIiwiaXNWb2xsZXlNaW5TaXplIiwiaXNWb2xsZXlNYXhTaXplIiwiZ2V0VGFyZ2V0RnJvbUtleSIsImNhbGNUYXJnZXRzRGlmZmljdWx0eSIsImNhbGN1bGF0ZWRCb251c0RpY2UiLCJfY2FsY3VsYXRlZE1vZGlmaWVyIiwiY2FsY3VsYXRlZFBlbmFsdHlEaWNlIiwiZGlmZmljdWx0eU5hbWUiLCJpbXBvc3NpYmxlIiwibGV2ZWwiLCJhZGRTaG90QXRDdXJyZW50VGFyZ2V0IiwiYWN0b3JOYW1lIiwiYnVsbGV0c1Nob3QiLCJ0cmFuc2l0QnVsbGV0cyIsImJ1bGxldHNTaG90VHJhbnNpdCIsInRyYW5zaXQiLCJidWxsZXRMZWZ0IiwicHJldmlvdXNTaG90IiwibG9nIiwicmVzb2x2ZUNhcmQiLCJ3ZWFwb25NYWxmdW5jdGlvbiIsInNob290QXRUYXJnZXQiLCJoYXNNYWxmdW5jdGlvbiIsImJ1bGxldEZpcmVkIiwiZGV0YWlscyIsImNoYW5nZVZvbGxleVNpemUiLCJwYXNzUm9sbCIsInJvbGxJbmRleCIsInVwZ3JhZGVpbmRleCIsImluY3JlYXNlZFN1Y2Nlc3MiLCJyYW5nZUluaXRpYXRvciIsImNhcmRUYXJnZXRzIiwiY2FyZFNob3RzIiwiZGFtYWdlUm9sbHMiLCJkciIsImgiLCJkYW1hZ2VEaWUiLCJjcml0aWNhbERhbWFnZUZvcm11bGEiLCJjcml0aWNhbERhbWFnZURpZSIsImltcGFsaW5nU2hvdHMiLCJzdWNjZXNzZnVsU2hvdHMiLCJkZWFsdCIsImRhbWFnZVJvbGxlZCIsImRJbmRleCIsInRvdGFsVGFrZW4iLCJ0b3RhbEFic29yYmVkIiwickluZGV4IiwiZGVhbHRBbW91bnQiLCJ0YWtlbiIsImFic29yYmVkIiwiZGFtYWdlRGVhbHQiLCJpbk1lbGVlIiwiYmlnIiwiX2JpZyIsImJ1aWxkIiwic21hbGwiLCJfc21hbGwiLCJpc0Zhc3QiLCJtb3YiLCJmYXN0IiwiX2Zhc3QiLCJfYWN0b3IiLCJfdG9rZW4iLCJzaXplVGV4dCIsInNpemVMYWJlbCIsImNoYW5nZURpc3BsYXllZFRhcmdldCIsIkNIQVRfQ09DN19NRVNTQUdFIiwicmVuZGVyQ2hhdE1lc3NhZ2VIb29rIiwiZmFrZVJvbGxNZXNzYWdlIiwicGxheWVycyIsIkdNU2VsZlJvbGwiLCJyZW1vdmVXaXNwZXJUYXJnZXRzIiwiZmFrZVJvbGwiLCJjaGF0TGlzdGVuZXJzIiwiX29uQ2hhdENhcmRBY3Rpb24iLCJfb25DaGF0Q2FyZFJhbmdlIiwiX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IiwiX29uQ2hhdENhcmRSYWRpb1N3aXRjaCIsIl9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIiwiX29uQ2hhdENhcmRWb2xsZXlTaXplIiwiX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQiLCJfb25Ub2dnbGVTZWxlY3RlZCIsIl9vblRhcmdldFNlbGVjdCIsIl9vbk9wZW5BY3RvciIsIl9vbklubGluZSIsIm9uVXBkYXRlQ2hhdE1lc3NhZ2UiLCJzY3JvbGxCb3R0b20iLCJjaGVja1JldmVhbGVkIiwicmV2ZWFsQ2hlY2siLCJyZW5kZXJNZXNzYWdlSG9vayIsInJlbW92ZUNsYXNzIiwibW91c2VsZWF2ZSIsImRlZmVuZGFudElkIiwiaW5pdGlhdG9ySWQiLCJ1cGRhdGVDb21iYXRDYXJkVGFyZ2V0IiwidXNlck9ubHkiLCJnZXRBdHRyaWJ1dGUiLCJnbU9ubHkiLCJ6b25lIiwidXNlclZpc2libGVPbmx5IiwiZWxlbSIsImdtVmlzaWJsZU9ubHkiLCJpc1RydXN0ZWQiLCJvd25lclZpc2libGVPbmx5IiwiX2dldEFjdG9yRnJvbUtleSIsIm93bmVyT25seSIsImdtU2VsZWN0T25seSIsImdtUmFuZ2VPbmx5IiwiYWN0aW9uVHlwZVN0cmluZyIsInRhcmdldHNTZWxlY3RvciIsImJvcmRlciIsInRhcmdldFRvRGlzcGxheSIsImRyb3BEb3duQm94ZXMiLCJkcGRuQm94Iiwic2VsZWN0ZWRCb3giLCJhY3Rpb25UeXBlIiwiZGVmZW5kZXJDaG9pY2UiLCJza2lsbFZhbHVlIiwiaXRlbU5hbWUiLCJfY29sbGFwc2VJbmxpbmVSZXN1bHQiLCJfZXhwYW5kSW5saW5lUmVzdWx0Iiwib3B0aW9uTGlzdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwcm9wZXJ0eSIsInJhbmdlQ2FyZCIsImlzQ2FyZE93bmVyIiwib3dubmVyIiwiZ2V0QWN0b3JGcm9tVG9rZW4iLCJnZXRUb2tlbiIsIm1lc3NJZCIsIm1lc3NhZ2VDYXJkIiwiZm9jdXMiLCJvcmlnaW5NZXNzYWdlIiwibWVsZWVDYXJkIiwicm9sbFJlc3VsdCIsInVwZ3JhZGVJbmRleCIsImRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIiLCJuZXdDYXJkIiwiY2xvbmVOb2RlIiwicHVzaGVkUm9sbCIsImRlZmVuZGVyS2V5IiwicmVzcG9uc2VUeXBlIiwiZGVhbGVyIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJmb3JjZVJvbGwiLCJDb0M3c29ja2V0IiwiZXhlY3V0ZUFzR00iLCJfaWQiLCJyb2xsRGFtYWdlQnV0dG9uIiwiQWN0b3IiLCJpbml0aWFsaXplIiwiY3JlYXR1cmVJbml0IiwicHJlcGFyZUJhc2VEYXRhIiwiaXRlbUlkZW50aWZpZXIiLCJjb2NpZEZsYWciLCJkYWlseUxpbWl0Iiwib25lRmlmdGhTYW5pdHkiLCJyYXdNb3YiLCJyYXdEYiIsInJhd0J1aWxkIiwiY3VycmVudCIsImhwIiwicHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzIiwicHJlcGFyZURlcml2ZWREYXRhIiwicmF3SHBNYXgiLCJtcCIsInJhd01wTWF4IiwicmF3U2FuTWF4IiwiZmlsdGVyTWF0cml4IiwicHJpb3JpdHkiLCJzZWxlY3RDaGFuZ2VzIiwiaHBNYXgiLCJtcE1heCIsImRlZmF1bHRJbWciLCJhY3RvckxpbmsiLCJkaXNwb3NpdGlvbiIsInNpZ2h0IiwiY2hlY2tVbmRlZmluZWRBdXRvIiwicmV0dXJuRGF0YSIsImluaXRUb2tlbiIsImNyZWF0ZURhdGEiLCJoYXNDb25kaXRpb25TdGF0dXMiLCJnZXRUZW1wb0luc2FuZUR1cmF0aW9uVGV4dCIsImhhc0NvbmRpdGlvblZhbHVlIiwicmVhbFRpbWUiLCJib3V0T2ZNYWRuZXNzVGFibGVJZCIsImJvdXRPZk1hZG5lc3NUYWJsZSIsInRhYmxlcyIsInRhYmxlUm9sbCIsIlRBQkxFX1JFU1VMVF9UWVBFUyIsIkRPQ1VNRU5UIiwiZG9jdW1lbnRJZCIsIml0ZW1EYXRhIiwidG9PYmplY3QiLCJURVhUIiwidGV4dCIsImVtcHR5U2tpbGwiLCJjcmVhdGVTa2lsbCIsInNob3dTaGVldCIsInJlbmRlclNoZWV0IiwiY3JlYXRlV2VhcG9uU2tpbGwiLCJza2lsbERhdGEiLCJwZXJzb25hbCIsIm9jY3VwYXRpb24iLCJhcmNoZXR5cGUiLCJhdHRhY2siLCJ3cG5UeXBlIiwiY3JlYXRlZEF0dGFjayIsInNldEFjdG9yRmxhZyIsImNyZWF0ZUl0ZW0iLCJxdWFudGl0eSIsImNyZWF0ZUVtcHR5Qm9vayIsImdldEl0ZW1JZEJ5TmFtZSIsImNyZWF0ZUJvb2siLCJjcmVhdGVFbXB0eVNwZWxsIiwiY3JlYXRlU3BlbGwiLCJlbXB0eVNwZWxsIiwiY3JlYXRlRW1wdHlTa2lsbCIsImNyZWF0ZUVtcHR5SXRlbSIsImNyZWF0ZUVtcHR5V2VhcG9uIiwiY3JlYXRlQmlvU2VjdGlvbiIsImJpbyIsImJpb2dyYXBoeSIsInVwZGF0ZUJpb1ZhbHVlIiwidXBkYXRlQmlvVGl0bGUiLCJkZWxldGVCaW9TZWN0aW9uIiwibW92ZUJpb1NlY3Rpb25VcCIsIm1vdmVCaW9TZWN0aW9uRG93biIsInVwZGF0ZVRleHRBcmVhIiwidGV4dEFyZWEiLCJhcmVhTmFtZSIsImVtYmVkZGVkTmFtZSIsImRhdGFBcnJheSIsInByb2Nlc3NlZERhdGFBcnJheSIsImJhc2VDYWxjdWxhdGVkIiwiYWRkVGhpcyIsImlzQW55QnV0Tm90RmxhZ2dlZCIsImd1ZXNzR3JvdXBGcm9tRG9jdW1lbnQiLCJmcm9tQ29DSURSZWdleEJlc3QiLCJjb2NpZFJlZ0V4cCIsImV4aXN0aW5nU2tpbGxzIiwiZWwiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsImZpbmRJbmRleCIsImV4aXN0aW5nSXRlbSIsInVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwiZXhpc3RpbmciLCJrZWVwQmFzZSIsIm1haW5Ta2lsbCIsImF2YWlsYWJsZVNraWxscyIsImZyb21Db0NJREJlc3QiLCJzaG93TG9hZGluZyIsImFkZEl0ZW1zIiwic2Vjb25kU2tpbGwiLCJlbmFibGVDaGFyYWN0ZXJpc2l0aWNzIiwiZ2V0Q2hhcmFjdGVyaXN0aWMiLCJsdWNrIiwiZXJhIiwiZXhwYW5kSXRlbUFycmF5IiwiaXQiLCJvdGhlcnNJdGVtcyIsImFkZFVuaXF1ZUl0ZW1zIiwiYmFja3N0b3J5Iiwic2VjdGlvbk5hbWUiLCJiaW9TZWN0aW9ucyIsIm1vbmV0YXJ5IiwiX3N0YXRlIiwiQXBwbGljYXRpb24iLCJSRU5ERVJfU1RBVEVTIiwiUkVOREVSSU5HIiwiSG9va3MiLCJyZXNldEFyY2hldHlwZSIsImNvbmZpcm0iLCJ5ZXMiLCJkZWZhdWx0WWVzIiwiY29yZUNoYXJhYyIsImVudHJ5IiwiY29yZUNoYXJhY3RlcmlzdGljcyIsImNoYXJhYyIsImNoYXJEaWFsb2dEYXRhIiwiY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEiLCJyZXNldE9jY3VwYXRpb24iLCJjcmVkaXRSYXRpbmciLCJhY3RvckNyZWRpdFJhdGluZyIsImZpbmRDb2NJZEluTGlzdCIsInBvaW50c0RpYWxvZ0RhdGEiLCJvY2N1cGF0aW9uU2tpbGxQb2ludHMiLCJvcHRpb25hbENoYXIiLCJkaWFsb2dEYXRhIiwic2tpbGxDb3VudCIsIm1lcmdlZCIsImNyZWRpdFJhdGluZ1NraWxsIiwiYXJjaGV0eXBlUG9pbnRzIiwib2NjdXBhdGlvblBvaW50cyIsInBlcnNvbmFsUG9pbnRzIiwiZ2V0SXRlbXNCeU5hbWUiLCJnZXRGaXJzdEl0ZW1CeUNvQ0lEIiwiY2hhcmFjdGVyaXN0aWNMaXN0IiwidGVtcGxhdGVzIiwiY2hhck5hbWUiLCJhdHRyaWJOYW1lIiwibGNrIiwiZXJhc2VPbGQiLCJvY2N1cGF0aW9uU2tpbGwiLCJhcmNoZXR5cGVTa2lsbCIsInNldEx1Y2siLCJocEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJfc2V0SHAiLCJhZGRVbmlxdWVJdGVtIiwibXBGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiZ2V0UmVhc29uU2FuTG9zcyIsInNhbml0eUxvc3NFdmVudHMiLCJ0b3RhbExvc3MiLCJpbW11bml0eSIsImxlZnQiLCJyaWdodCIsImxvY2FsZUNvbXBhcmUiLCJzYW5NYXhGb3JtdWxhIiwic2FuaXR5TG9zc0V2ZW50Iiwic2V0U2FuIiwic2FuTG9zc0NoZWNrUGFzc2VkIiwic2FuTG9zc0NoZWNrRmFpbGxlZCIsInNhbkxvc3NNYXgiLCJzYW5Mb3NzTWluIiwiZGFpbHlMb3NzIiwiY3RodWxodU15dGhvcyIsInNldE1wIiwib2NjdXBhdGlvblBvaW50c1NwZW50IiwicmVzZXRPY2N1cGF0aW9uUG9pbnRzIiwicmVzZXRBcmNoZXR5cGVQb2ludHMiLCJyZXNldFBlcnNvbmFsUG9pbnRzIiwiYXJjaGV0eXBlUG9pbnRzU3BlbnQiLCJib251c1BvaW50cyIsImV4cGVyaWVuY2VQb2ludHMiLCJwZXJzb25hbFBvaW50c1NwZW50IiwiaGFzRGV2ZWxvcG1lbnRQaGFzZSIsImRldmVsb3BlbWVudCIsIm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiIsImxvc3MiLCJzZXRBdHRyaWJBdXRvIiwidXBkYXRlZEtleSIsInRvZ2dsZUF0dHJpYkF1dG8iLCJkYkZyb21DaGFyYWN0ZXJpc3RpY3MiLCJzdW0iLCJidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJkaXZpc29yIiwibW92RnJvbUNoYXJhY3RlcmlzdGljcyIsImFnZSIsIk1PViIsImdldEl0ZW1zRnJvbU5hbWUiLCJ0b2dnbGVBY3RvckZsYWciLCJhdHRyaWJ1dGVOYW1lIiwibWlzc2luZyIsImNoYXJhY3RlcmlzdGljTmFtZSIsInRvb2xUaXBTa2lsbFRleHQiLCJDb0M3VG9vbHRpcHMiLCJUb29sVGlwSG92ZXIiLCJhY3RvckFwcElkIiwiYXBwaWQiLCJ3aW5kb3dzIiwidG9vbFRpcCIsIm5ld0l0ZW1zIiwibXlJdGVtcyIsIm5ld0l0ZW0iLCJwYWNrcyIsIm1ldGFkYXRhIiwiZ2V0RG9jdW1lbnRzIiwic2tpbGxJZGVudGlmaWVyIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJfcmF3VmFsdWUiLCJ1cGRhdGVWYWx1ZSIsIndlYXBvbkRhdGEiLCJ3ZWFwb25zIiwidG9KU09OIiwicm9sbEluaXRpYXRpdmUiLCJoYXNHdW4iLCJkZW55THVjayIsImRlbnlCbGluZFRhbXBlcmluZyIsInVuc2V0QWN0b3JGbGFnIiwiZnJvbVV1aWRTeW5jIiwiZXhlYyIsImNoYXJLZXkiLCJhdHRyaWJLZXkiLCJhdHRyIiwicGlsb3RTa2lsbHMiLCJkcml2ZVNraWxscyIsInRva2VuVXVpZCIsImhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzIiwiaG9zUm9sbGFibGVTa2lsbHMiLCJyb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUiLCJyZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSIsImF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImF2ZXJhZ2UiLCJjaGFyVmFsdWUiLCJzZXRDaGFyYWN0ZXJpc3RpYyIsImRldmVsb3BlbWVudFBoYXNlIiwic2tpbGxzUm9sbGVkIiwiRGllIiwiYXVnbWVudCIsInNraWxsTWFzdGVyaW5nTWVzc2FnZSIsImF1Z21lbnREaWUiLCJhdWdtZW50U0FORGllIiwic2FuR2FpbmVkIiwic2FuR2FpbmVkTWVzc2FnZSIsImRlYnVnIiwic2NvcmUiLCJpbmNyZWFzZUV4cGVyaWVuY2UiLCJjaGFuZ2VkIiwiZGV2ZWxvcEx1Y2siLCJjdXJyZW50THVjayIsInB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayIsImhpZ2hlclRoYW5DdXJyZW50THVjayIsImF1Z21lbnRSb2xsIiwiYXVnbWVudFZhbHVlIiwiZGV2ZWxvcFNraWxsIiwiY29uZGl0aW9uVmFsdWUiLCJjb25kaXRpb25zIiwiZmllbGQiLCJ0b2dnbGVDb25kaXRpb24iLCJmb3JjZVZhbHVlIiwiY3VzdG9tIiwib3ZlcmxheSIsInN0YXR1c0VmZmVjdHMiLCJzb3VyY2UiLCJlZmZlY3REYXRhIiwiZmllbGRzIiwianVzdFRoaXMiLCJkZWxldGVFbWJlZGRlZERvY3VtZW50cyIsInJlc2V0Q291bnRlciIsImNvdW50ZXIiLCJyZXNldERhaWx5U2FuaXR5IiwiZmlnaHRpbmdTa2lsbHMiLCJjbG9zZUNvbWJhdFdlYXBvbnMiLCJ3ZWFwb25MaXN0IiwiZmlyZWFybVNraWxscyIsIkNNIiwibXl0aG9zSGFyZGVuZWQiLCJzZXRNeXRob3NIYXJkZW5lZCIsIkNSIiwibW9uZXRhcnlGb3JtYXQiLCJzeW1ib2wiLCJtb25ldGFyeUZvcm1hdEtleXMiLCJ0b0xvY2FsZVN0cmluZyIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1vbmV0YXJ5VmFsdWUiLCJyb3ciLCJtb25ldGFyeVR5cGVLZXlzIiwic3BlbmRpbmdMZXZlbCIsImNhc2giLCJhc3NldHMiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJwbGF5ZXIiLCJjaGFyYWN0ZXJVc2VyIiwiY29udGVudHMiLCJzZXRIcCIsImhlYWx0aEJlZm9yZSIsImRhbWFnZVRha2VuIiwiYXJtb3JEYXRhIiwiZ3Jvc3NEYW1hZ2UiLCJhcm1vclZhbHVlIiwiaXNGb3JtdWxhIiwibmV0RGFtYWdlIiwiY2VpbCIsImhhc01ham9yV291bmQiLCJtYWpvcldvdW5kIiwiaXNVbmtub3duIiwiX3V1aWQiLCJyYW5kb21JRCIsImhhc0NhcmQiLCJyYXdWYWx1ZVN0cmluZyIsImNyaXRpY2FsVGhyZXNob2xkIiwiZnVtYmxlVGhyZXNob2xkIiwic3VjY2VzVGhyZXNob2xkIiwiX21vZGlmaWVkUmVzdWx0IiwibW9kaWZpZWQiLCJmbGF0RGljZU1vZGlmaWVyU3RyaW5nIiwiaXNTaW1wbGVSb2xsIiwiaGFzUGVuYWx0eSIsImhhc01vZGlmaWVyIiwiX2RpY2VNb2RpZmllciIsIl9kaWZmaWN1bHR5Iiwib2xkQ2hlY2siLCJvIiwiY29jN1Jlc3VsdCIsInN1Y2Nlc3NMZXZlbEljb25zIiwidW5rbm93bkRpZmZpY3VsdHkiLCJpY29ucyIsInN1Y2Nlc3NIaW50IiwiY3NzQ2xhc3MiLCJoaW50IiwiZmFpbHVyZUhpbnQiLCJnbURpZmZpY3VsdHlDcml0aWNhbCIsImdtRGlmZmljdWx0eUV4dHJlbWUiLCJnbURpZmZpY3VsdHlIYXJkIiwiZ21EaWZmaWN1bHR5UmVndWxhciIsIl9za2lsbCIsIl9nZXRJdGVtRnJvbUlkIiwiX2l0ZW0iLCJpc0R1bW15IiwiZGlzcGxheVJlc3VsdFR5cGUiLCJkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwiLCJkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCIsImRvbnREaXNwbGF5U3VjY2Vzc0xldmVsIiwiaW1hZ2UiLCJnZXRMaW5rRWxlbWVudCIsImNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIiwidGhyZXNob2xkIiwicm9sbFZhbHVlIiwidGVuUmVzdWx0IiwiZmlyc3RWYWx1ZSIsInNwZW5kaW5nQW1vdW50IiwidG90YWxMdWNrU3BlbnQiLCJtYXhJbmRleCIsInNoaWZ0IiwidGVuT25seU9uZURpZSIsImlzVmFsdWUiLCJpc0NoYXJhY3RpcmlzdGljIiwiaXNTa2lsbCIsImlzSXRlbSIsImlzQXR0cmlidXRlIiwic3VjY2Vzc1JlcXVpcmVkIiwibWFsZnVuY3Rpb25UeHQiLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwiY2FuSW5jcmVhc2VTdWNjZXNzIiwiZGlmZmljdWx0eVNldCIsInB1c2hlZCIsImNhbkF3YXJkRXhwZXJpZW5jZSIsImZvcmNlZCIsIkpTT05Sb2xsU3RyaW5nIiwiY3NzQ2xhc3NMaXN0IiwicGxheWVyQ3NzQ2xhc3MiLCJmb3JjZWRTdWNjZXNzIiwiZm9yY2VkRmFpbHVyZSIsInJlbW92ZVVwZ3JhZGVzIiwiZm9yY2VTdWNjZXNzTGV2ZWwiLCJfZm9yY2VDaGVjayIsImhpZ2giLCJsb3ciLCJyYW5kb20iLCJ1bml0VG90YWwiLCJ0ZW5Ub3RhbCIsImhhc0Vub3VnaCIsInRlbiIsImZsYWdnZWRGb3JEZXZlbG9wbWVudCIsIl9mbGF2b3IiLCJfY29udGV4dCIsInBhcmVudFV1aWQiLCJyYXd2YWx1ZSIsInRvb2x0aXBIZWFkZXIiLCJnZXRIdG1sUm9sbEVsZW1lbnQiLCJvcmlnaW5hbFNwZWFrZXIiLCJuZXdDb250ZW50IiwiaHRtbE1lc3NhZ2UiLCJyb2xsUmVzdWx0RWxlbWVudCIsIk9USEVSIiwidG9vbHRpcCIsInJvbGxUb29sVGlwIiwiZmFjZSIsImZyb21Sb2xsU3RyaW5nIiwiY29tbWFuZCIsIl9vbkNsaWNrSW5saW5lUm9sbCIsInRpcCIsImFwcGVuZENoaWxkIiwicGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwdCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ0b3AiLCJ5IiwiaW5uZXJIZWlnaHQiLCJ6aSIsImdldENvbXB1dGVkU3R5bGUiLCJ6SW5kZXgiLCJpc051bWVyaWMiLCJQYXJzZUNoYXRFbnRyeSIsIl9FeGVjQ29tbWFuZCIsImVzY2FwZWQiLCJhc2siLCJ0aHJlc2hvbGRTdHIiLCJkaWZmaWN1bHR5U3RyIiwiYXNrVmFsdWUiLCJ0ZXN0IiwiZ2V0QWN0b3JGcm9tU3RyaW5nIiwiYWN0b3JTdHJpbmciLCJza2lsbENoZWNrTWFjcm8iLCJ3ZWFwb25DaGVja01hY3JvIiwiYmFzZUFjdG9yIiwiZ2V0RG9jdW1lbnRDbGFzcyIsImNoZWNrTWFjcm8iLCJyb2xsRGljZSIsImNyZWF0ZU1hY3JvIiwiYmFyIiwic2xvdCIsIm1hY3JvIiwibWFjcm9zIiwiYXNzaWduSG90YmFyTWFjcm8iLCJNYWNybyIsInRvZ2dsZURldlBoYXNlIiwidXBkYXRlQ2hhclNoZWV0cyIsInRvZ2dsZUNoYXJDcmVhdGlvbiIsImdldFRhcmdldCIsImNoZWNrT3B0aW9ucyIsInBsYXllclRva2VuSWRzIiwic2VsZWN0ZWRQbGF5ZXJJZHMiLCJjaGVja2VkIiwic3RhcnRSZXN0IiwiY2hhdENvbnRlbnQiLCJxdWlja0hlYWxlciIsImlzQ3JpdGljYWxXb3VuZHMiLCJkYWlseVNhbml0eUxvc3MiLCJocFZhbHVlIiwibXBWYWx1ZSIsImhlYWxBbW91bnQiLCJob3VycyIsIm1hZ2ljQW1vdW50IiwidG9nZ2xlWFBHYWluIiwidGsiLCJyZW5kZXJlZCIsImVudGl0eVR5cGUiLCJmb2xkZXIiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJwb3NpdGlvbiIsInJlamVjdCIsImV4ZWNDb21tYW5kIiwiY2F0Y2giLCJsZW4iLCJxU3RyaW5nIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsImoiLCJzZXRCeVBhdGgiLCJwYXRoIiwiZ2V0QnlQYXRoIiwiZG9jIiwiZG9jTmFtZSIsImRvY0lkIiwiaW5zdGFuY2UiLCJlbWJlZGRlZElkIiwiaWRlbnRpZmllcnMiLCJnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIiwiZHJvcERhdGEiLCJkb2NVdWlkIiwiZ2V0RG9jdW1lbnRGcm9tS2V5IiwiY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzIiwiZm9sZGVyTmFtZSIsImltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciIsImZvbGRlcnMiLCJGb2xkZXIiLCJndWVzc0l0ZW0iLCJvTSIsInBhY2thZ2UiLCJmYWxsYmFja0FueSIsInRvS2ViYWJDYXNlIiwibm9ybWFsaXplIiwia2VlcGVycyIsIl9mYWNlcyIsInN1Ym1pdE9uQ2xvc2UiLCJzdWJtaXRPbkNoYW5nZSIsInN1cHBvcnRlZExhbmd1YWdlcyIsImVkaXRhYmxlIiwiZ3Vlc3NDb2RlIiwiZ3Vlc3NJZCIsImlkUHJlZml4IiwiZ2V0UHJlZml4IiwibGFuZyIsImlzRW5hYmxlZCIsIkNvQ0lES2V5cyIsImZsYXR0ZW5PYmplY3QiLCJfZmFsbGJhY2siLCJDb0NJREZsYWciLCJ0cmFuc2xhdGlvbnMiLCJwcmVmaXgiLCJleGlzdGluZ0tleXMiLCJpc1N5c3RlbUlEIiwiX2V4aXN0aW5nIiwid29ybGREb2N1bWVudHMiLCJmcm9tQ29DSURBbGwiLCJzY29wZSIsInVzZWRFcmFzIiwidW5pcXVlV29ybGRQcmlvcml0eSIsIndvcmxkRG9jdW1lbnRJbmZvIiwidW5zaGlmdCIsIm4iLCJ3YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSIsIndvcmxkRHVwbGljYXRlcyIsImNvbXBlbmRpdW1Eb2N1bWVudHMiLCJ1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRG9jdW1lbnRJbmZvIiwiY29tcGVuZGl1bSIsIndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRHVwbGljYXRlcyIsInNpYmxpbmdzIiwiX29uQ2xpY2tUb2dnbGUiLCJndWVzcyIsImNzcyIsImNvbG9yIiwiYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiIsImhlYWRlckJ1dHRvbnMiLCJzaGVldENvQ0lEIiwiQ29DSURFZGl0b3JCdXR0b24iLCJvbmNsaWNrIiwibnVtYmVyT2ZCdXR0b25zIiwiQ29DN0NvbnRleHRNZW51IiwibWVudSIsIl9jYWxsYmFjayIsIl9odG1sIiwiX21lbnUiLCJtZW51VHJpZ2dlciIsImNvbnRleHRtZW51IiwiX29uQ29udGV4dE1lbnUiLCJtZW51RWxlbWVudCIsIkNyZWF0ZU1lbnUiLCJfb25NZW51QWN0aW9uIiwibWVudUNvbnRhaW5lciIsImNsb3NlQWxsIiwiZWFjaCIsInZpc2liaWxpdHkiLCJtZW51TmFtZSIsImNvbnRleHRNZW51Iiwid3JhcHBlciIsInN1Yk1lbnUiLCJjbGllbnRYIiwiY2xpZW50WSIsIm1lbnVIZWlnaHQiLCJvdXRlckhlaWdodCIsIm1lbnVXaWR0aCIsIm91dGVyV2lkdGgiLCJjYW5TZWUiLCJhZGRDbGFzcyIsInNlY3Rpb24iLCJDcmVhdGVTZWN0aW9uIiwibXVsdGkiLCJzdWIiLCJDb0M3QWN0b3JTaGVldCIsIkFjdG9yU2hlZXQiLCJfZ2V0SGVhZGVyQnV0dG9ucyIsInNob3dIaWRkZW5EZXZNZW51IiwiY2FuRHJhZ1Rva2VuIiwibGlua2VkQWN0b3IiLCJpdGVtc0J5VHlwZSIsImNvbWJhdFNraWxscyIsInJhbmdlV3BuIiwibWVsZWVXcG4iLCJhY3RvckZsYWdzIiwicGVybWlzc2lvbkxpbWl0ZWQiLCJMSU1JVEVEIiwiYWxsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscFJ1bGVBcmNoZXR5cGUiLCJwdWxwUnVsZU9yZ2FuaXphdGlvbiIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJ1cGRhdGVkRXhwIiwiaXRlbVR5cGUiLCJtZWxlZVNraWxscyIsInJhbmdlU2tpbGxzIiwiY2J0U2tpbGxzIiwidXNlc0FsdGVybmF0ZVNraWxsIiwic2tpbGxTZXQiLCJfcHJvcGVydGllcyIsImhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSIsImlzRmlyc3QiLCJpc0xhc3QiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJfb25TZWN0aW9uSGVhZGVyIiwiX29uSXRlbUhlYWRlciIsIl9vbkludmVudG9yeUhlYWRlciIsImRibGNsaWNrIiwiX3RvZ2dsZVJlYWRPbmx5IiwiX29uQWRkQW1vIiwiX29uUmVsb2FkV2VhcG9uIiwiX29uTG9ja0NsaWNrZWQiLCJfb25GbGFnQ2xpY2tlZCIsIl9vbkZvcm11bGFDbGlja2VkIiwiX29uQXV0b1RvZ2dsZSIsIm1lbnVzIiwicm9sbE1lbnUiLCJzYW5NZW51Iiwicm9sbENvbnRleHRNZW51IiwiX29uQ29udGV4dE1lbnVDbGljayIsInNhbkNvbnRleHRNZW51IiwiX29uT3Bwb3NlZFJvbGwiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QiLCJfb25Sb2xsU2tpbGxUZXN0IiwiX29uUm9sbEF0dHJpYlRlc3QiLCJfb25EcmFnVG9rZW5TdGFydCIsIl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyIsIl9vbkRyYWdBdHRyaWJ1dGUiLCJfb25EcmFnU2FuQ2hlY2siLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25FZmZlY3QiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25XZWFwb25EYW1hZ2UiLCJ3aGVlbElucHV0cyIsIndoZWVsSW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiX29uV2hlZWwiLCJfb25JdGVtU3VtbWFyeSIsIl9vbkl0ZW1Qb3B1cCIsIl9vblJlbmRlckl0ZW1TaGVldCIsImV2IiwicGFyZW50cyIsIml0ZW1Ub0RlbGV0ZSIsInN0cmljdCIsInNsaWRlVXAiLCJzdG9wUHJvcGFnYXRpb24iLCJfb25UcmFkZUl0ZW0iLCJkZXRhaWwiLCJkaXNhYmxlIiwibW91c2VlbnRlciIsInRvb2xUaXBTa2lsbEVudGVyIiwidG9vbFRpcExlYXZlIiwidG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIiLCJ0b29sVGlwQXR0cmlidXRlRW50ZXIiLCJ0b29sVGlwQXV0b0VudGVyIiwidG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCIsImRlbGF5IiwidG9vbFRpcFRpbWVyIiwiZGlzcGxheVRvb2xUaXAiLCJjaGFySWQiLCJhdHRyaWJ1dGVJZCIsImF0dHJpYnV0ZXMiLCJ0YXJnZXRUeXBlIiwicm9sbE9wdGlvbnMiLCJhY3RvckZyb20iLCJhY3RvclRvIiwidmlzaWJsZSIsIk5PTkUiLCJfb25EcmFnU3RhcnQiLCJkcmFnRGF0YSIsImJveCIsIkNvQzdUeXBlIiwiaXNMb2NrZWQiLCJkZWx0YVkiLCJyZWFkT25seSIsInNlY3JldHMiLCJoYXNDbGFzcyIsInN1bW1hcnkiLCJkaXYiLCJzcGVjaWFsRGl2IiwiaGlkZSIsInNsaWRlRG93biIsInBhbm5lbENsYXNzIiwicGFubmVsIiwiaXMiLCJvbCIsIm5leHQiLCJwb3B1cFNraWxsIiwiZW5yaWNoZWRWYWx1ZSIsInNjcm9sbFkiLCJwcm9jZWVkV2l0aG91dFRhcmdldCIsImNhbmNlbCIsInByb2NlZWQiLCJyb2xsRm9ybXVsYSIsIm92ZXJyaWRlcyIsImNyZWRpdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsIkNvQzdOUENTaGVldCIsImFsbG93Rm9ybXVsYSIsImRpc3BsYXlGb3JtdWxhIiwiaGFzU2FuIiwiaGFzTXAiLCJoYXNMdWNrIiwiaXNDcmVhdHVyZSIsImhhc0ludmVudG9yeSIsImVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiIsImVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIiLCJrZWVwZXIiLCJzYW5sb3NzTWVudSIsInNhbmxvc3NDb250ZXh0TWVudSIsIl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIiwiX29uU2FuQ2hlY2siLCJyZXNpemFibGUiLCJtaW5pbWl6YWJsZSIsImZvcmNlQXV0byIsInNldFBvc2l0aW9uIiwiQ29DN0NyZWF0dXJlU2hlZXQiLCJDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIiwiaXNJbW11bml0eSIsIl9vbkJ1dHRvbkNsaWNrIiwiQ29DN0NoYXJhY3RlclNoZWV0Iiwic3VtbWFyaXplZCIsInRvZ2dsZVNoZWV0TW9kZSIsInNraWxsTGlzdE1vZGVWYWx1ZSIsInNraWxsU2hvd1VuY29tbW9uIiwic2hvd0ljb25zT25seSIsIm9jY3VwYXRpb25TZXQiLCJhcmNoZXR5cGVTZXQiLCJ0b3RhbEV4cGVyaWVuY2UiLCJ0b3RhbE9jY3VwYXRpb24iLCJpbnZhbGlkT2NjdXBhdGlvblBvaW50cyIsInRvdGFsQXJjaGV0eXBlIiwiaW52YWxpZEFyY2hldHlwZVBvaW50cyIsInRvdGFsUGVyc29uYWwiLCJpbnZhbGlkUGVyc29uYWxQb2ludHMiLCJjcmVkaXRSYXRpbmdNYXgiLCJjcmVkaXRSYXRpbmdNaW4iLCJpbnZhbGlkQ3JlZGl0UmF0aW5nIiwicHVscFRhbGVudENvdW50IiwidGFsZW50IiwibWluUHVscFRhbGVudHMiLCJ0YWxlbnRzIiwiaW52YWxpZFB1bHBUYWxlbnRzIiwiYWxsb3dEZXZlbG9wbWVudCIsImFsbG93Q2hhckNyZWF0aW9uIiwiZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayIsInNob3dEZXZQYW5uZWwiLCJfbW9uZXRhcnlGb3JtYXRzIiwibW9uZXRhcnlGb3JtYXRzIiwic2hvd0N1cnJlbmN5U3ltYm9sIiwiX21vbmV0YXJ5VHlwZXMiLCJtb25ldGFyeVR5cGVzIiwib25lQmxvY2tCYWNrU3RvcnkiLCJwcmV2aW91c1NwZWMiLCJpc1NwZWNpYWxpemF0aW9uIiwic2tpbGxzQnlWYWx1ZSIsInRvcFNraWxscyIsInRvcFdlYXBvbnMiLCJyZXZlcnNlIiwiZGlzcGxheVBsYXllck5hbWUiLCJza2lsbExpc3RFbXB0eSIsImVucmljaGVkQmFja3N0b3J5IiwiX3NhdmVTY3JvbGxQb3NpdGlvbnMiLCJfc2Nyb2xsUG9zaXRpb25zWCIsInBvcyIsInNlbCIsInNjcm9sbExlZnQiLCJfcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyIsInNlbGVjdG9ycyIsInBvc2l0aW9ucyIsIl9vblNraWxsRGV2IiwiX29uSXRlbURldGFpbHMiLCJ0b2dnbGVTa2lsbExpc3RNb2RlIiwidG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUiLCJfb25BZGRTYW5pdHlMb3NzUmVhc29uIiwiX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiIsImJsdXIiLCJfb25FZGl0U2FuaXR5TG9zc1JlYXNvbiIsIl9vblRvZ2dsZUtlZXBlckZsYWdzIiwiX29uQWRkTW9uZXRhcnkiLCJfb25SZW1vdmVNb25ldGFyeSIsImNhc2hUeXBlIiwiY2FzaFZhbHVlIiwiYXNzZXRzVHlwZSIsImFzc2V0c1ZhbHVlIiwic3BlbmRpbmdUeXBlIiwic3BlbmRpbmdWYWx1ZSIsInN0eWxlU2hlZXQiLCJjc3NSdWxlSW5kZXgiLCJzdHlsZVNoZWV0cyIsImhyZWYiLCJlbmRzV2l0aCIsInJ1bGVzIiwic2VsZWN0b3JUZXh0IiwiQ1NTU3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiRm9udEZhY2UiLCJsb2FkIiwibG9hZGVkRmFjZSIsImZvbnRzIiwid2VpZ2h0IiwiZXhwYW5kZWQiLCJDb0M3Q29tYmF0IiwicmVuZGVyQ29tYmF0VHJhY2tlciIsImN1cnJlbnRDb21iYXQiLCJjb21iYXRzIiwiY3VycmVudEluZGV4IiwiY29tYklkIiwiY29tYmF0YW50Q29udHJvbHNEaXYiLCJjb21iYXRhbnQiLCJjb21iYXRhbnRzIiwicHJlcGVuZCIsImluaXRpYXRpdmUiLCJ0b2tlbkluaXRpYXRpdmUiLCJpbml0aWF0aXZlVGVzdCIsImg0IiwiZm9udFdlaWdodCIsInRleHRTaGFkb3ciLCJiYWNrZ3JvdW5kIiwiX29uVG9nZ2xlR3VuIiwiY29tYmF0YW50SWQiLCJuZXdJbml0Iiwic2V0SW5pdGlhdGl2ZSIsImlkcyIsIkNvQ0lEQmF0Y2giLCJmb3VuZEtleXMiLCJvdXQiLCJtaXNzaW5nTmFtZXMiLCJzdWZmaXgiLCJzdWZmaXhSZWdFeHAiLCJvblNldE5hbWUiLCJvbkNsaWNrR3Vlc3MiLCJrZXl1cCIsIm9uS2V5dXAiLCJ0eXBlTmFtZSIsInByb2Nlc3NTa2lsbEtleXMiLCJ1cGRhdGVMaXN0IiwidG9rZW5PZmZzZXQiLCJpdGVtT2Zmc2V0IiwiYWN0b3JEYXRhIiwiZXhwYW5kZWRGbGFncyIsInVwZGF0ZURvY3VtZW50cyIsInBvcHVsYXRlU2tpbGxLZXlzIiwic2NlbmVEYXRhIiwiVXBkYXRlciIsImNoZWNrRm9yVXBkYXRlIiwic3lzdGVtVXBkYXRlVmVyc2lvbiIsImpvdXJuYWwiLCJydW5NaWdyYXRlIiwidXBkYXRlZE1vZHVsZXMiLCJjdXJyZW50TW9kdWxlcyIsInBhY2thZ2VOYW1lIiwibW9kdWxlIiwia25vd25Nb2R1bGVWZXJzaW9ucyIsIm1vZCIsInNraXAiLCJPSyIsInBlcm1hbmVudCIsIm1pZ3JhdGVBY3RvckRhdGEiLCJpc0VtcHR5IiwiZW5mb3JjZVR5cGVzIiwibWlncmF0ZUl0ZW1EYXRhIiwidGFibGUiLCJtaWdyYXRlVGFibGVEYXRhIiwibWlncmF0ZU1hY3JvRGF0YSIsIm1pZ3JhdGVTY2VuZURhdGEiLCJtaWdyYXRlQ29tcGVuZGl1bURhdGEiLCJfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IiwiX21pZ3JhdGVBY3RvckFydHdvcmsiLCJfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUiLCJfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIiwiX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIiwiX21pZ3JhdGVBY3Rvck1vbmV0YXJ5IiwiYXJyIiwiaXRlbVVwZGF0ZSIsImRvY3VtZW50VHlwZSIsIndhc0xvY2tlZCIsImNvbmZpZ3VyZSIsIm1pZ3JhdGUiLCJkb2N1bWVudHMiLCJfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCIsIl9taWdyYXRlSXRlbUV4cGVyaWVuY2UiLCJfbWlncmF0ZUl0ZW1BcnR3b3JrIiwiX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzIiwiX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIiwiX21pZ3JhdGVJdGVtRXJhcyIsIl9taWdyYXRlSXRlbXYxMCIsIl9taWdyYXRlSXRlbUJvb2tVbml0cyIsIl9taWdyYXRlTWFjcm9BcnR3b3JrIiwiX21pZ3JhdGVUYWJsZUFydHdvcmsiLCJyZXR1cm5zIiwiX21pZ3JhdGVUb2tlbkFydHdvcmsiLCJNYXAiLCJvcmlnaW5hbCIsImciLCJzcGVsbHMiLCJjb3N0IiwiY2FzdGluZ1RpbWUiLCJ1bmlkZW50aWZpZWQiLCJhdXRob3IiLCJkYXRlIiwibGFuZ3VhZ2UiLCJteXRob3NSYXRpbmciLCJub3RlcyIsImdhaW4iLCJDTUkiLCJDTUYiLCJuZWNlc3NhcnkiLCJ3ZWVrc1N0dWR5VGltZSIsInByb2dyZXNzIiwic3R1ZHkiLCJrZWVwZXJOb3RlcyIsImVuY291bnRlcmVkQ3JlYXR1cmVzIiwiaW0iLCJhdHRhY2tzUGVyUm91bmQiLCJpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCIsIm5hbWVDaGFyYWN0ZXJzIiwiZW4iLCJkYk5vbmUiLCJhcm1vck5vbmUiLCJhdHRhY2tzUGVyUm91bmROb25lIiwic2FuTG9zc05vbmUiLCJmdWxsZGIiLCJoYWxmZGIiLCJzZWN0aW9uQ29tYmF0cyIsIm5ld0NvbWJhdEhlYWRlciIsInNlY3Rpb25Ta2lsbHMiLCJzZWN0aW9uTGFuZ2F1Z2VzIiwic2VjdGlvblNwZWxscyIsImhhbmRndW4iLCJyaWZsZSIsInNtYiIsIm1hY2hpbmVHdW4iLCJsYXVuY2hlZCIsImV4YW1wbGUiLCJkZSIsImRpY2VTaG9ydCIsInBsIiwiZnIiLCJlcyIsImphIiwid2VhcG9uRG9kZ2UiLCJndWVzc1N0YXJ0Q29tYmF0Iiwic2VjdGlvbnMiLCJDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCIsImNoZWNrTGFuZ3VhZ2UiLCJnZXRFeGFtcGxlVGV4dCIsImdldFRyYW5zbGF0aW9ucyIsImdldEtleXMiLCJnZXRSZWd1bGFyRXhwcmVzc2lvbnMiLCJDb0M3QWN0b3JJbXBvcnRlciIsIml0ZW1Mb2NhdGlvbnMiLCJhc051bWJlciIsImFzU3RyaW5nIiwiZ2V0UmVnRXgiLCJyZWdleCIsImNsZWFuU3RyaW5nIiwidHJhbnNsYXRlUm9sbCIsInJlZ0V4IiwidG9IVE1MIiwicmVnRXhLZXkiLCJyZWdFeHAiLCJyZXF1aXJlZEdyb3VwIiwicmVtb3ZlRnJvbVRleHQiLCJzYXZlS2V5cyIsInByb2Nlc3NDb21iYXQiLCJuZXdsaW5lIiwiQ29DN0ltcG9ydGVyIiwibGFzdFBlcmNlbnQiLCJtYXhMb29wcyIsInBlcmNlbnRhZ2UiLCJpc1JhbmdlZCIsImRhbWFnZXMiLCJpc1Nob3RndW4iLCJhdHRhY2tzIiwicHJvY2Vzc1NraWxscyIsImJyZWFrcyIsInByb2Nlc3NTcGVsbHMiLCJzcGVsbHNBcnIiLCJzcGVsbCIsInBhcnNlQ2hhcmFjdGVyIiwiaGVhZGVyIiwib2NjdXBhdGlvbkFnZSIsInJlZ0V4cFNlY3Rpb25zIiwiZ21ub3RlcyIsImRpc2FibGVBdHRyaWJBdXRvIiwiYXR0cmliVmFsdWUiLCJjcmVhdGVFbnRpdHkiLCJjaGFyYWN0ZXJEYXRhIiwibnBjIiwidXBkYXRlSXRlbURhdGEiLCJsYXN0V2VhcG9uU2tpbGwiLCJwYWlyIiwid2VhcG9uU2tpbGxzIiwicGMiLCJpdGVtc0RhdGEiLCJ3ZWFwb25Ta2lsbCIsImNsb25lZCIsImxhbmd1YWdlcyIsImxvY2FsaXplZEZpcmVhcm0iLCJjbG9uZSIsIm5ld1NraWxsIiwibmVlZHNDb252ZXJzaW9uIiwibmVlZHNDb252ZXJzaW9uUmVzdWx0IiwiY3JlYXRlQWN0b3IiLCJpbnB1dHMiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwidGVzdE1vZGUiLCJjcmVhdHVyZSIsIkNvQzdEaXJlY3RvcnlQaWNrZXIiLCJGaWxlUGlja2VyIiwiYWN0aXZlU291cmNlIiwiYnVja2V0IiwiRGVmYXVsdERpcmVjdG9yeSIsInJhdyIsInByb2Nlc3NIdG1sIiwicGlja2VyIiwicGlja2VyQnV0dG9uIiwiY3JlYXRlRGVmYXVsdERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsInVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSIsImZpbGUiLCJmaWxlbmFtZSIsInVwbG9hZCIsIkZpbGUiLCJDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIiLCJnZXRCYWNrc3RvcnkiLCJiYWNrc3RvcnlKU09OIiwiYmxvY2siLCJjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJkaG9sZUhvdXNlRGF0YSIsIkludmVzdGlnYXRvciIsImJhY2tzdG9yaWVzIiwiQmFja3N0b3J5IiwiUGVyc29uYWxEZXRhaWxzIiwiTmFtZSIsIkNoYXJhY3RlcmlzdGljcyIsIlNUUiIsIkNPTiIsIlNJWiIsIkRFWCIsIkFQUCIsIklOVCIsIlBPVyIsIkVEVSIsIlNhbml0eSIsIlNhbml0eU1heCIsIkhpdFB0cyIsIkhpdFB0c01heCIsIk1hZ2ljUHRzIiwiTWFnaWNQdHNNYXgiLCJMdWNrIiwiTW92ZSIsIkRhbWFnZUJvbnVzIiwiQnVpbGQiLCJPY2N1cGF0aW9uIiwiQWdlIiwiR2VuZGVyIiwiUmVzaWRlbmNlIiwiQmlydGhwbGFjZSIsImV4dHJhY3RTa2lsbHMiLCJTa2lsbHMiLCJTa2lsbCIsInBvc3Nlc2lvbnMiLCJleHRyYWN0UG9zc2Vzc2lvbnMiLCJQb3NzZXNzaW9ucyIsIm1ha2VTa2lsbE5hbWUiLCJkaG9sZUhvdXNlc2tpbGxzIiwic3Vic2tpbGwiLCJmaW5kV2VhcG9uU2tpbGxJZCIsImdldEVtYmVkZGVkQ29sbGVjdGlvbiIsImRob2xlaG91c2VQb3NzZXNzaW9ucyIsImlzQXJyYXkiLCJleHRyYWN0V2VhcG9ucyIsImRob2xlaG91c2VXZWFwb25zIiwic2tpbGxuYW1lIiwibWFsZiIsInNhdmVQb3J0cmFpdCIsImJhc2U2NFBvcnRyYWl0IiwiZmlsZU5hbWUiLCJiYXNlNjRSZXNwb25zZSIsImZldGNoIiwiaW1hZ2VCbG9iIiwiYmxvYiIsImNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIiwiZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJjYW4iLCJQb3J0cmFpdCIsIldlYXBvbnMiLCJDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyIsImltcG9ydFR5cGUiLCJjb252ZXJ0NkUiLCJjYW5VcGxvYWQiLCJwbGFjZWhvbGRlciIsIl9vbkpTT05GaWxlU2VsZWN0ZWQiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJnZXRJbnB1dHMiLCJqc29uRmlsZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3J0cmFpdEltYWdlIiwiY2hhcmFjdGVyTmFtZSIsInByZXZpZXciLCJmaWxlcyIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY2hhcmFjdGVySlNPTiIsInBlcnNvbmFsRGV0YWlscyIsInRleHRDb250ZW50IiwicmVhZEFzVGV4dCIsImFjdG9yVHlwZSIsImltcG9ydEFjdG9yIiwiY3JlYXRlZEFjdG9yIiwib25jZSIsIkRyb3BDb0NJRCIsInByb2Nlc3NGb3JtIiwicmVzcG9uc2UiLCJwcm9jZXNzSXRlbSIsIm5vIiwiQ29DN09jY3VwYXRpb25TaGVldCIsIkl0ZW1TaGVldCIsIl9vbkl0ZW1EZWxldGUiLCJfb25Hcm91cEl0ZW1EZWxldGUiLCJfb25Hcm91cENvbnRyb2wiLCJEcmFnRHJvcCIsImNhbGxiYWNrcyIsImRyb3AiLCJjb2xsZWN0aW9uTmFtZSIsIm9wdGlvbmFsU2tpbGwiLCJ1c2VDb0NJRCIsIkNvQ0lkIiwiaXRlbUluZGV4IiwiaGFzT3duZXIiLCJpc0VtYmVkZGVkIiwib2NjdXBhdGlvblBvaW50c1N0cmluZyIsIml0ZW1Qcm9wZXJ0aWVzIiwib2NjdXBhdGlvblByb3BlcnRpZXMiLCJlbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUiLCJvcHRpb25uYWwiLCJtYW5kYXRvcnkiLCJjYXJhYyIsImNhcmFjTmFtZSIsIm9yU3RyaW5nIiwiQ29DN0ludmVzdGlnYXRvcldpemFyZCIsInBhZ2VMaXN0IiwiUEFHRV9OT05FIiwiUEFHRV9JTlRST0RVQ1RJT04iLCJQQUdFX0NPTkZJR1VSQVRJT04iLCJQQUdFX1NFVFVQUyIsIlBBR0VfQVJDSEVUWVBFUyIsIlBBR0VfQ0hBUkFDVElTVElDUyIsIlBBR0VfQVRUUklCVVRFUyIsIlBBR0VfVklFV19BVFRSSUJVVEVTIiwiUEFHRV9PQ0NVUEFUSU9OUyIsIlBBR0VfT0NDVVBBVElPTl9TS0lMTFMiLCJQQUdFX0FSQ0hFVFlQRV9TS0lMTFMiLCJQQUdFX1BPSU5UU19TS0lMTFMiLCJQQUdFX0lOVkVTVElHQVRPUiIsIlBBR0VfQkFDS1NUT1JZIiwiUEFHRV9DUkVBVEUiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2RzIiwiTUVUSE9EX0RFRkFVTFQiLCJNRVRIT0RfUk9MTCIsIk1FVEhPRF9QT0lOVFMiLCJNRVRIT0RfVkFMVUVTIiwiTUVUSE9EX0NIT09TRSIsImNvY2lkQ3JlZGl0UmF0aW5nIiwiY29jaWRMYW5ndWFnZU93biIsInBhZ2VPcmRlciIsInBhZ2VzIiwiZGVmYXVsdFNldHVwIiwibG9hZENhY2hlSXRlbUJ5Q29DSUQiLCJmaWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEIiwicmVnZXhwIiwiY2FjaGVDb0NJRCIsImdldENhY2hlSXRlbUJ5Q29DSUQiLCJjb2NpZHMiLCJkZWZhdWx0RXJhIiwiZ2V0QWdlQWRqdXN0bWVudHMiLCJzZXR1cE1vZGlmaWVycyIsInJlcXVpcmVzQWdlQWRqdXN0bWVudHMiLCJkZWR1Y3QiLCJzZXR1cCIsImNhbk5leHQiLCJjcmVhdGVCdXR0b24iLCJzaG93TW9uZXRhcnkiLCJzdGVwIiwic2V0dXBzIiwib2NjdXBhdGlvbnMiLCJhcmNoZXR5cGVzIiwiX2VyYXMiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2QiLCJlbmZvcmNlUG9pbnRCdXkiLCJjaG9vc2VSb2xsZWRWYWx1ZXMiLCJxdWlja0ZpcmVWYWx1ZXMiLCJoYXNBcmNoZXR5cGVzIiwiY29yZUNoYXJhY3RlcmlzdGljIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJzdWdnZXN0ZWRPY2N1cGF0aW9ucyIsInN1Z2dlc3RlZFRyYWl0cyIsImVtcHRpZXMiLCJzZXR1cFBvaW50cyIsInB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzIiwiZGVkdWN0VG90YWwiLCJkZWR1Y3RGcm9tIiwicmVkdWNlRnJvbSIsImx1Y2tWYWx1ZSIsInBlcnNvbmFsVGV4dCIsInNraWxsSXRlbXMiLCJsYW5ndWFnZU5hbWUiLCJyb3dzIiwiaXNNdWx0aXBsZSIsImlzQ3JlZGl0UmF0aW5nIiwiaXNQaWNrYWJsZSIsImlzT2NjdXBhdGlvbkRlZmF1bHQiLCJpbk9jY3VwYXRpb25Hcm91cCIsIm9jY3VwYXRpb25Ub2dnbGUiLCJwaWNrZWQiLCJkZWxldGVhYmxlIiwiYXJjaGV0eXBlVG9nZ2xlIiwib2NjdXBhdGlvbkdyb3VwcyIsImlzQXJjaGV0eXBlRGVmYXVsdCIsImNyZWRpdFJhdGluZ09rYXkiLCJyZW1haW5pbmciLCJ0b3RhbFBvaW50cyIsIm51bSIsImlzT2NjdXBhdGlvbiIsImlzQXJjaGV0eXBlIiwic2hvd0NyZWRpdFJhdGluZyIsImFsbEJhY2tzdG9yaWVzIiwiY2FjaGVCYWNrc3RvcmllcyIsInJvbGUiLCJVU0VSX1BFUk1JU1NJT05TIiwiQUNUT1JfQ1JFQVRFIiwiZGVmYXVsdFJvbGUiLCJrZXlwcmVzcyIsInNyY0VsZW1lbnQiLCJ0YWdOYW1lIiwiY2hhckNvZGUiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25Sb2xsQWxsIiwiX29uUm9sbENob29zZSIsIl9vblJvbGxFZHUiLCJfb25Sb2xsTHVjayIsIl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyIsIl9vblRvZ2dsZVNraWxsIiwiX29uQ2xpY2tQaWNrU2tpbGwiLCJfb25DbGlja1NraWxsU3BlY2lhbCIsIl9vbkNsaWNrUmVtb3ZlU2tpbGwiLCJfb25DaGFuZ2VTa2lsbFBvaW50cyIsIl9vbkNoYW5nZUJhY2tzdG9yeVRleHQiLCJfb25Sb2xsQmFja3N0b3J5IiwiX29uUmVzZXRCYWNrc3RvcnkiLCJyb2xsTWVzc2FnZSIsIkNIQVRfVEVNUExBVEUiLCJnZXRUb29sdGlwIiwiYWRkSXRlbVRvTGlzdCIsImludmVzdGlnYXRvckl0ZW1zIiwiaW5wbGFjZSIsImNsZWFyU2V0dXBQb2ludHMiLCJyb2xsZWRWYWx1ZXMiLCJzZXRTa2lsbExpc3RzIiwicGxhY2VhYmxlIiwibmFtZUNyZWRpdFJhdGluZyIsImNoYXJhY3RlcmlzdGljS2V5IiwiX2NhbkRyYWdTdGFydCIsInNlbGVjdG9yIiwiX2NhbkRyYWdEcm9wIiwiZGVzdGluYXRpb24iLCJlbXB0eSIsImFzc2lnbmVkIiwidGVtcCIsIm9sZCIsInBhcmVudE5vZGUiLCJ0b2dnbGVLZXkiLCJndWVzc0dyb3VwRnJvbUtleSIsImFkanVzdG1lbnQiLCJ0ZXh0YXJlYSIsInJvbGx0YWJsZSIsInRhYmxlUmVzdWx0Iiwicm9sbEZvcm11bGFzIiwibW9kaWZ5T2Zmc2V0IiwibW9kaWZ5Q2hhcmFjdGVyaXN0aWMiLCJyZXJvbGxzRW5hYmxlZCIsIm9ialRvdGFsIiwiZ2V0UGFnZU51bWJlciIsImRpcmVjdGlvbiIsImNsYXNzTmFtZSIsImRlZmF1bHRPd25lcnNoaXAiLCJzdGFydGVkIiwibm93IiwiYnVmZmVyIiwiZGVmYXVsdFF1YW50aXR5IiwiZmxhdEtleXMiLCJwYWdlTnVtYmVyIiwic2Nyb2xsVG9wIiwiYXR0ZW1wdFRvQ3JlYXRlIiwibm9ybWFsaXplQ2hhcmFjdGVyRGF0YSIsImNyZWF0ZUNoYXJhY3RlciIsInBheWxvYWQiLCJzb3VyY2VJdGVtIiwiYXZhdGFyIiwiVE9LRU5fRElTUE9TSVRJT05TIiwiRlJJRU5ETFkiLCJjcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YSIsImZ1bmN0aW9uSWQiLCJvZmYiLCJjYWNoZUl0ZW1zIiwiQ29DSURBY3RvclVwZGF0ZUl0ZW1zIiwiaXNFbiIsImdldFVwZGF0ZURhdGEiLCJzdWdnZXN0ZWRDb250YWN0cyIsInVwZGF0ZUFjdG9ycyIsImFjdG9yTGlzdCIsInVubGlua2VkQWN0b3JzIiwiYW55cyIsIm1ha2VHcm91cFJlZ0V4IiwiYWxsVXBkYXRlcyIsIkNvQzdNZW51TGF5ZXIiLCJQbGFjZWFibGVzTGF5ZXIiLCJvYmplY3RzIiwibGF5ZXJPcHRpb25zIiwiQ29DN01lbnUiLCJnZXRCdXR0b25zIiwiY29udHJvbHMiLCJjb2M3Z210b29scyIsImxheWVyIiwidG9vbHMiLCJvbkNsaWNrIiwiY29jN0RldlRvb2xzIiwicmVuZGVyQ29udHJvbHMiLCJrZWVwZXJNZW51IiwiYWZ0ZXIiLCJDb0M3Q2FudmFzIiwiQ09DN19UWVBFU19TVVBQT1JURUQiLCJvbkRyb3BTb21ldGhpbmciLCJncmlkU2l6ZSIsImRyb3BUYXJnZXRUb2tlbnMiLCJiZXR3ZWVuIiwiYXBwSWQiLCJjYWxsQmFjayIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJNYW51YWwiLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJhbGxvd1dpemFyZCIsImFsbG93ZWQiLCJDb0M3U3BlbGwiLCJjYXN0IiwicHJpdiIsImlzT3duZWQiLCJjb3N0cyIsImxvc3NlcyIsImNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyIsIm1hZ2ljUG9pbnRzIiwiY29udmVydGVkSGl0UG9pbnRzIiwiY29udmVydGVkTWFnaWNQb2ludHMiLCJhY3Rvck1hZ2ljUG9pbnRzIiwib3JpZ2luYWxNYWdpY1BvaW50cyIsImhpdFBvaW50cyIsInJlc29sdmVMb3NzZXMiLCJncmFudFNhbml0eUxvc3MiLCJnZXRIVE1MIiwic2FuaXR5TG9zcyIsInNhbml0eUNoZWNrIiwiYm9va0lkIiwiYm9vayIsIkNvQzdCb29rIiwiYWRkU3BlbGxzIiwic3BlbGxEZXRhaWwiLCJsZWFybmVkIiwiYXR0ZW1wdEluaXRpYWxSZWFkaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJpbml0aWFsUmVhZGluZyIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsImdyYW50SW5pdGlhbFJlYWRpbmciLCJvdGhlcnMiLCJncmFudFNwZWxsTGVhcm5pbmciLCJzcGVsbGxlYXJuZWQiLCJleGlzdGluZ1NraWxsIiwic2hvd0RldmVsb3BtZW50c1RhYmxlIiwicmVkb0Z1bGxTdHVkeSIsImF0dGVtcHRTcGVsbExlYXJuaW5nIiwiRUNDX0NMQVNTIiwiUEVSTUlTU0lPTl9UWVBFIiwiU1RBVEUiLCJHTVVwZGF0ZSIsImNhcmRDbGFzc05hbWUiLCJFbmhhbmNlZENoYXRDYXJkIiwiYWR2aXNlIiwiRW5oYW5jZWRDaGF0Q2FyZExpYiIsInR5cGVzIiwiaW5qZWN0Q1NTIiwiZW5oYW5jZWRDaGF0Q2FyZHNMaWIiLCJyZWdpc3RlciIsImNhcmRDb25zdHJ1Y3RvcnMiLCJjYXJkQ29uc3RydWN0b3IiLCJvb2MiLCJkZWVwQ2xvbmUiLCJhdHRhY2hPYmplY3QiLCJvYmplY3REYXRhU3RyaW5nIiwiZWNjQ2xhc3MiLCJsb2NhbENvbXB1dGUiLCJFeGVjdXRlR01VcGRhdGUiLCJFRUNfQUNUSU9OIiwiZGV0YWNoRGF0YSIsIl9vbkNoYW5nZSIsInNldFZpc2liaWxpdHkiLCJzZXRQZXJtaXNzaW9uIiwic2V0U3RhdGUiLCJzZXRSYWRpb1N0YXRlIiwic3BsaXRlZCIsImVjY1Zpc2liaWxpdHkiLCJoYXNQZXJtIiwiZWNjUGVybWlzc2lvbnMiLCJyZXN0cmljdGVkVG8iLCJ2aXNpb24iLCJwZXJtaXNzaW9uc0FycmF5Iiwid2hpdGVMaXN0IiwiaXNBdXRob3IiLCJhc3NpZ25PYmplY3RzIiwibmV3RGF0YSIsImZvcm1VcGRhdGUiLCJhY3Rpb25VcGRhdGUiLCJvcmlnaW5hbERpc3BsYXlTdHlsZSIsInVwZGF0ZUNhcmQiLCJzYXZlRGF0YSIsImh0bW1sQ2FyZCIsIkNhcmRDbGFzcyIsInVuc2V0RGF0YSIsInRvZ2dsZURhdGEiLCJiTmFtZSIsIl9wYXJ0aWNpcGFudCIsIl9mZXRjaCIsIl9kb2MiLCJpc0FjdG9yIiwiaGFzQWN0b3IiLCJoYXNWZWhpY2xlIiwiaXNBY3RpdmUiLCJ2ZWhpY2xlIiwiZHJpdmVyIiwiX2RyaXZlciIsInZlaGljbGVLZXkiLCJfdmVoaWNsZSIsImhhc1ZhbGlkTW92IiwiaGFzTWF4Qm9udXNEaWNlIiwiYWRkQm9udXNEaWNlIiwicmVtb3ZlQm9udXNEaWNlIiwicmVzZXRCb251c0RpY2UiLCJoYXNCb251c0RpY2UiLCJoYXNPbmVCb251c0RpY2UiLCJoYXNUd29Cb251c0RpY2UiLCJjYW5Bc3Npc3QiLCJhc3Npc3QiLCJjYW5CZUNhdXRpb3VzIiwiaGFzRHJpdmVyIiwiaGFzVmFsaWREZXgiLCJoYXNBR3VuUmVhZHkiLCJpc0NoYXNlciIsImNoYXNlciIsImlzUHJleSIsImlzVmFsaWQiLCJtb3ZBZGp1c3RtZW50Iiwic3BlZWRDaGVjayIsInJvbGxEYXRhU3RyaW5nIiwiYWRqdXN0ZWRNb3YiLCJoYXNNb3ZBZGp1c3RtZW50IiwiaGFzQm9udXNNb3YiLCJoYXNNYWx1c01vdiIsInRvb1Nsb3ciLCJleGNsdWRlZCIsImluY2x1ZGVJbkNoYXNlIiwic2xvd2VzdCIsImZhc3Rlc3QiLCJjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMiLCJtaW5Nb3YiLCJtb3ZlbWVudEFjdGlvbiIsImN1cnJlbnRNb3ZlbWVudEFjdGlvbnMiLCJoYXNNYXhNdnRBY3Rpb25zIiwiaGFzTm9NdnRBY3Rpb25zIiwiYWRkTW92ZW1lbnRBY3Rpb25zIiwiYWx0ZXJNb3ZlbWVudEFjdGlvbnMiLCJtb3ZlbWVudEFjdGlvbkFycmF5IiwiYmFzZUFycmF5IiwiZmlsbCIsImlubGluZVJvbGwiLCJtb2RpZmllckNzcyIsImhhc09wdGlvbnMiLCJnYW1lSXRlbSIsInJlZiIsInJlZlNldCIsImlzQ2hhcmFjdGVyaXN0aWMiLCJjYW5CZVJvbGxlZCIsInNvcnRCeVJvbGVBbmREZXgiLCJDaGFzZU9ic3RhY2xlQ2FyZCIsInN0cmluZ3MiLCJ0b3RhbEFjdGlvbkNvc3QiLCJicmVha2FibGVPYnN0YWNsZSIsIm9ic3RhY2xlIiwiYmFycmllciIsImhhc0hpdFBvaW50cyIsInZhbGlkQ2hlY2siLCJzdGF0ZXMiLCJvYnN0YWNsZURlZmluZWQiLCJoYXphcmQiLCJ0cnlUb05lZ290aWF0ZSIsInRyeVRvQnJlYWsiLCJicmVha09yTmVnb3RpYXRlRGVmaW5lZCIsInBhcnRpY2lwYW50IiwiY2hhc2UiLCJnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBhcnRpY2lwYW50VXVpZCIsInZhbGlkU2tpbGwiLCJjaGVja1RocmVzaG9sZCIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsImR1bW15QWN0b3IiLCJjYW5UYWtlQ2F1dGlvdXNBcHByb2FjaCIsImN1c3RvbVdlYXBvbiIsIndlYXBvbkNob2ljZSIsImNoZWNrUm9sbFJlcXVlc3QiLCJjYW5Bc2tSb2xsIiwiRW50ZXJWYWx1ZVRpdGxlIiwiZGFtYWdlU3RhdHVzIiwib2JzdGFjbGVEYW1hZ2VSb2xsIiwib2JzdGFjbGVEYW1hZ2VSb2xsZWQiLCJvYnN0YWNsZURhbWFnZSIsImlubGluZURhbWFnZVJvbGwiLCJ0b3RhbENhdXRpb3VzQXBwcm9hY2giLCJjYXV0aW91c1N0YXR1cyIsImNhdXRpb3VzQXBwcm9hY2hUeXBlIiwiY29uc3VtZUJvbnVzRGljZSIsIm1vdmVQbGF5ZXIiLCJvYnN0YWNsZVBhc3NlZCIsImNoZWNrRmFpbGVkIiwicGxheWVyQWN0aW9uRGVmaW5lZCIsInBsYXllckludGVudGlvbnMiLCJjaGVja1JvbGxlZCIsImNhcmRSZXNvbHZlZCIsInBsYXllckRhbWFnZVRha2VuIiwib2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCIsImxpc3RDaGFuZ2VzIiwiaGFzRGFtYWdlIiwiaW5saW5lRGFtYWdlVGFrZW5Sb2xsIiwiZmFpbGVkRGFtYWdlUm9sbCIsInRvdGFsUGxheWVyRGFtYWdlVGFrZW4iLCJoYXNBY3Rpb25Db3N0IiwiYWN0aW9uTG9zdCIsImlubGluZUFjdGlvbkxvc3RSb2xsIiwiZmFpbGVkQWN0aW9uUm9sbCIsImZpbmFsT3V0Y29tZSIsInRvdGFsRGFtYWdlIiwicmVmbGVjdE9ic3RhbGVDaGFuZ2VzIiwiZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkIiwidG90YWxPYnN0YWNsZURhbWFnZSIsIm9ic3RhY2xlRGVzdG95ZWQiLCJIaXRQb2ludHMiLCJhY3RpdmVQYXJ0aWNpcGFudERhdGEiLCJvYnN0YWNsZURldGFpbHMiLCJwYXJ0aWNpcGFudERhdGEiLCJnZXRQYXJ0aWNpcGFudERhdGEiLCJnZXRMb2NhdGlvbkRhdGEiLCJsb2NhdGlvblV1aWQiLCJjaGFzZVV1aWQiLCJfY2hhc2UiLCJhY3RvclNraWxsIiwidmFsaWRGYWlsZWRSb2xscyIsImZhaWxlZENoZWNrRGFtYWdlIiwiYWN0aW9uQ29zdCIsImZhaWxlZEFjdGlvbkNvc3QiLCJ3ZWFwb25zT3B0aW9ucyIsIml0ZW1UeXBlcyIsInciLCJhaGJkIiwiY3VzdG9tV2VhcG9uRGFtYWdlIiwidXNlZFdlYXBvbiIsImluZmxpY3RlZERhbWFnZUZvcm11bGEiLCJ2YWxpZE9ic3RhY2xlRGFtYWdlIiwiZGFtYWdlUm9sbFJlcXVlc3QiLCJ2YWxpZGF0ZUNhcmQiLCJsb2FjdGlvbkNoYW5nZWQiLCJwYXJ0aWNpcGFudENoYWdlZCIsIm9ic3RhY2xlVXBkYXRlIiwicGFydGljaXBhbnRVcGRhdGUiLCJkaWZmIiwibmV3IiwicmVtYWluaW5nSHAiLCJ0YXJnZXRMb2NhdGlvbiIsImZvcndhcmQiLCJnZXRMb2NhdGlvblNoaWZ0IiwibW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiIsInNjcm9sbFRvTG9jYXRpb24iLCJhY3RpdmF0ZUxvY2F0aW9uIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVQYXJ0aWNpcGFudCIsImFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiIsImRlZmluZU9ic3RhY2xlIiwidHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSIsInRyeVRvQnJlYWtEb3duT2JzdGFjbGUiLCJjYW5jZWxPYnN0YWNsZURlZmluaXRpb24iLCJjYW5jZWxCcmVha09yUGFzc0Nob2ljZSIsInJlcXVlc3RSb2xsIiwidGFrZUNhdXRpb3VzQXBwcm9hY2giLCJyb2xsU2tpbGxDaGVjayIsInVzZUx1Y2siLCJyb2xsRmFpbENvbnNlcXVlbmNlcyIsImFza1JvbGxPYnN0YWNsZURhbWFnZSIsInJvbGxPYnN0YWNsZURhbWFnZSIsIm5hbWVzIiwibmV3T2JzdGFjbGUiLCJDb0M3Q2hhc2UiLCJwYXJ0aWNpcGFudHMiLCJwTGlzdCIsInByZXlzIiwiY2hhc2VycyIsInBhcnRpY3BhbnQiLCJwYXJ0aWNpcGFudHNPYmplY3QiLCJnZXRQYXJ0aWNpcGFudExvY2F0aW9uIiwiYWN0aXZlQWN0b3IiLCJwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92IiwiYWN0dWFsUGFydGljaXBhbnRzIiwicGFydGljaXBhbnRzQnlJbml0aWF0aXZlIiwiYWxsSGF2ZVZhbGlkTW92IiwiZXZlcnkiLCJhbGxIYXZlU3BlZWRSb2xsIiwibG9jYXRpb25zIiwibHAiLCJnZXRQYXJ0aWNpcGFudCIsIm5leHRBY3RpdmVQYXJ0aWNpcGFudCIsInNsb3dlc3RQcmV5IiwiZmFzdGVzdENoYXNlciIsImluY2x1ZGVMYXRlY29tZXJzIiwiaW5jbHVkZUVzY2FwZWQiLCJzbG93ZXN0UGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNEYXRhIiwiY2xlYW5QYXJ0aWNpcGFudExpc3QiLCJwYXJ0aWNpYW50VXVpZCIsInBhcnRpY2lwYW50SW5kZXgiLCJvdmVyd3JpdGUiLCJhc3Npc3RQYXJ0aWNpcGFudCIsImFzc2lzdGFudFV1aWQiLCJiZW5lZmljaWFyeVV1aWQiLCJhc3Npc3RhbnQiLCJiZW5lZmljaWFyeSIsImFzc2lzdGFudEluZGV4IiwiYmVuZWZpY2lhcnlJbmRleCIsInVzZU1vdmVtZW50QWN0aW9ucyIsImFjdGlvbnMiLCJ0b2dnbGVCb251c0RpY2UiLCJkaWNlTnVtYmVyIiwiY2F1dGlvdXNBcHByb2FjaCIsImFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50IiwiYWN0aXZhdGVQYXJ0aWNpcGFudCIsImRhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSIsImFjdGl2ZUxvY2F0aW9uIiwicFV1aWQiLCJwYXJ0aWNpcGFudHNEYXRhVXBkYXRlIiwicGFydGljaXBhbnRMb2NhdGlvbiIsImxvY2F0aW9uc0RhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSIsImNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayIsIm1vdmVQYXJ0aWNpcGFudCIsInByb2dyZXNzVG9OZXh0Um91bmQiLCJyb2xsVXVpZCIsIm1ldGhvZCIsImluaXRUcmFjayIsInByb2Nlc3NMb2NhdGlvbnMiLCJkdXBsaWNhdGVEYXRhIiwibGFzdCIsInN0YXJ0aW5nTGluZSIsImxvY2F0aW9uc0luZGV4U3RhcnQiLCJpbml0SW5kZXhTdGFydCIsImxvY2F0aW9uc0xlbmd0aCIsInN0YXJ0aW5nSW5kZXgiLCJnZW5lcmF0ZU5ld1V1aWQiLCJjaGFzZUxvY2F0aW9ucyIsImVuZCIsImNoYXNlVHJhY2siLCJjaGFzZXJzTWluTW92IiwiZmluZE1pbk1vdiIsImNoYXNlcnNNYXhNb3YiLCJmaW5kTWF4TW92IiwicHJleXNNaW5Nb3YiLCJwcmV5c01heE1vdiIsInN0YXJ0aW5nUmFuZ2UiLCJ1cGRhdGVMb2NhdGlvbnNMaXN0IiwidXBkYXRlZExpc3QiLCJjbGVhbkxvY2F0aW9uc0xpc3QiLCJsb2NhdGlvbkluZGV4IiwicGFydGlwYW50c1V1aWRBcnJheSIsImluc2VydExvY2F0aW9uIiwiaW5zZXJ0QXRVdWlkIiwibmV3TG9jYXRpb25JbmRleCIsIm5ld0xvY2F0aW9uIiwibG9jRGF0YSIsInJlbW92ZUxvY2F0aW9uIiwiZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEiLCJoYXNQYXJ0aWNpcGFudCIsImFjdGl2ZUFjdG9ySGFzU2tpbGwiLCJhY3RpdmVBY3RvclRlc3QiLCJwcmV2aW91c0xvY2F0aW9uIiwiYWN0aXZlSW5kZXgiLCJuZXh0TG9jYXRpb24iLCJsb2NhdG9yRHJvcHBlZCIsInNldExvY2F0aW9uQ29vcmRpbmF0ZXMiLCJjb29yZGluYXRlcyIsImNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyIsImNsZWFyTG9jYXRpb25Db29yZGluYXRlcyIsImN1dFRvVGhlQ2hhc2UiLCJzdGFydCIsInJlc3RhcnQiLCJzZXRjaGFzZVRyYWNrU2Nyb2xsIiwic3RvcCIsImRlc3RpbmF0aW9uSW5kZXgiLCJyZW1vdmVQYXJ0aWNpcGFudCIsIm5ld1BhcnRpY2lwYW50c0RhdGEiLCJsb2NhdGlvbnNEYXRhIiwiYWRkUGFydGljaXBhbnQiLCJ1bmlxdWUiLCJyZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyIsImVkaXRQYXJ0aWNpcGFudCIsImxvY2F0aW9uTW92ZWQiLCJvcmlnaW5JbmRleCIsInRvdGFsTW92ZSIsIm9sZFBhcnRpY2lwYW50c0xpc3QiLCJtb3ZlVG9rZW4iLCJwYXJ0aWNwYW50RG9jdW1lbnQiLCJmb3VuZFRva2VucyIsInZpZXdlZCIsInRhcmdldFJlY3QiLCJQSVhJIiwiUmVjdGFuZ2xlIiwiZm91bmRGcmVlU3BhY2UiLCJvdmVybGFwaW5nVG9rZW4iLCJib3VuZHMiLCJpbnRlcnNlY3RzIiwic2hvd1Rva2VuTW92ZW1lbnQiLCJhbmltYXRlIiwidG8iLCJjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZUxvY2F0aW9uRWxlbWVudCIsImxlZnRTY3JvbGwiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJwcmV2IiwicmVtU3RyaW5nIiwicmVtU2l6ZSIsInBDb3VudCIsIl90YWJzIiwiYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwYXJ0aWNpY3BhbnREYXRhIiwiSW50bCIsIkNvbGxhdG9yIiwiY29tcGFyZSIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0IiwiQ29DN1NraWxsIiwibmV3UHJvcGVydGllcyIsImhhc0FjdGl2ZUVmZmVjdHMiLCJhY3RpdmVFZmZlY3RzIiwiZWZmZWN0S2V5RnVsbCIsImVmZmVjdEtleVNob3J0IiwiZGVsdGEiLCJleHAiLCJDb0M3VmVoaWNsZSIsIkNvQzdEZWNhZGVyRGllIiwidGVybURhdGEiLCJERU5PTUlOQVRJT04iLCJDb0M3RGVjYWRlckRpZU90aGVyIiwiU0VUVElOR1MiLCJwdWxwUnVsZXMiLCJpbml0aWF0aXZlUnVsZSIsImNob2ljZXMiLCJvbkNoYW5nZSIsInJ1bGUiLCJfc2V0SW5pdGlhdGl2ZU9wdGlvbnMiLCJhbGxvd015dGhvc0hhcmRlbmVkIiwicHVscFJ1bGVEb3VibGVNYXhIZWFsdGgiLCJwdWxwUnVsZVRhbGVudHMiLCJwdWxwUnVsZUZhc3RlclJlY292ZXJ5IiwicHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcyIsImRlY2ltYWxzIiwiQ29tYmF0IiwiQ29DN0dhbWVSdWxlU2V0dGluZ3MiLCJ0cnVlIiwiZmFsc2UiLCJzZXR0aW5nIiwicHVscFNlbGVjdGlvbiIsInJlZ2lzdGVyU2V0dGluZ3MiLCJvbkNoYW5nZVB1bHBTZWxlY3QiLCJvbkNsaWNrUHVscCIsIm9uUmVzZXREZWZhdWx0cyIsImNoZWNrYm94IiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiY2hhcmFjTmFtZSIsImVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMiLCJlbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyIsImNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmciLCJDb0M3Qm9va1NoZWV0Iiwic3BlbGxzTGVhcm5lZCIsImV4aGF1c3RlZCIsInN0dWR5Q29tcGxldGVkIiwic3BlbGxMaXN0RW1wdHkiLCJlbnJpY2hlZENvbnRlbnQiLCJfb25EZWxldGUiLCJfb25TcGVsbERldGFpbCIsIm1vZGlmeU90aGVyc0dhaW5zIiwibW9kaWZ5VHlwZSIsIkNvQzdDb250YWluZXJTaGVldCIsInNsaWRlVG9nZ2xlIiwiQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciIsInBlcm1pc3Npb25zIiwiX29uRHJvcFBhcnRpY2lwYW50IiwiZHJhZ3N0YXJ0IiwiX29uVG9rZW5TZWxlY3RvckRyYWdTdGFydCIsIl9vbkFjdGlvbiIsInZhbGlkYXRlUGFydGljaXBhbnQiLCJzcGVlZENoZWNrUmVhZE9ubHkiLCJpbml0UmVhZE9ubHkiLCJvcHRpb25zTGlzdCIsInNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QiLCJkcm9wU3RyaW5nIiwiYWRkVG9rZW5Ub0NoYXNlIiwib3ZlcnJpZGVNb3ZlbWVudEFjdGlvbiIsInJlY2FsY3VsYXRpb25OZWVkZWQiLCJwYXJ0aWNpcGFudEV4Y2x1ZGVkIiwibW92ZW1lbnRBY3Rpb25EZWx0YSIsImluY2x1ZGVMYXN0Q29tbWVycyIsImV4Y2x1ZGVkQmVjYXVzZSIsIkNvQzdDaGFzZVNoZWV0IiwiX29uRHJhZ0VudGVyUGFydGljaXBhbnQiLCJfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCIsIl9vbkNoYW5nZVNpZGUiLCJfb25EZWxldGVQYXJ0aWNpcGFudCIsIl9vblJlc2V0Um9sbCIsIl9vbkRlbGV0ZURyaXZlciIsIl9vbkFkZFBhcnRpY2lwYW50IiwiX29uUm9sbFBhcnRpY2lwYW50IiwiX29uTG9jYXRpb25DbGljayIsIl9vbk9ic3RhY2xlVHlwZUNsaWNrIiwiX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCIsIl9vbkNoYXNlQ29udHJvbENsaWNrZWQiLCJfb25Mb2NhdGlvbkNvbnRyb2xDbGljayIsIl9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydCIsIl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrIiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsImRyYWdvdmVyIiwiX29uRHJhZ0VudGVyIiwiX29uRHJhZ0xlYXZlIiwiX2dldFN1Ym1pdERhdGEiLCJlZGl0b3JzIiwiY2xlYW5lZCIsImNsZWFuIiwib3JpZ2luYWxMb2NhdGlvbiIsInN1YlR5cGUiLCJmaW5kUGFydGljaXBhbnRJbmRleCIsInNldFNjcm9sbCIsImluaXRpYWxPcGVuaW5nIiwic2Nyb2xsIiwiYWN0aXZhdGVUYWIiLCJzY3JvbGxUbyIsImJlaGF2aW9yIiwiZmluZExvY2F0aW9uSW5kZXgiLCJmaW5kTG9jYXRpb24iLCJsVXVpZCIsInRvZ2dsZVBhcnRpY2lwYW50R3VuIiwiX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zIiwiZHJhZ0ljb24iLCJzZXREcmFnSW1hZ2UiLCJsb2NhdGlvbkVsZW1lbnQiLCJkcmFnRXZlbnQiLCJvbGRMb2NhdGlvbiIsIl9vbkRyYWdPdmVyIiwiYWx0ZXJQYXJ0aWNpcGFudCIsInN0YW5kYnlUZXh0Iiwic3RhbmRieVJpZ2h0SWNvbiIsIm9sZFBhcnRpY2lwYW50IiwidHAiLCJnZXRUeXBlIiwiQ29DN0l0ZW1TaGVldFYyIiwiQ29DN0l0ZW1TaGVldCIsIkNvQzdKb3VybmFsU2hlZXQiLCJKb3VybmFsU2hlZXQiLCJDb0M3TWFjcm9Db25maWciLCJNYWNyb0NvbmZpZyIsIkNvQzdQbGF5bGlzdENvbmZpZyIsIlBsYXlsaXN0Q29uZmlnIiwiQ29DN1JvbGxUYWJsZUNvbmZpZyIsIlJvbGxUYWJsZUNvbmZpZyIsIkNvQzdTY2VuZUNvbmZpZyIsIlNjZW5lQ29uZmlnIiwiQ29DN1NldHVwU2hlZXQiLCJfb25BZGRCaW8iLCJfb25SZW1vdmVTZWN0aW9uIiwib3RoZXJJdGVtcyIsIml0ZW1zTGlzdEVtcHR5IiwiQ29DN1NraWxsU2hlZXQiLCJfc2hlZXRUYWIiLCJoYWROb25DaGFyYWN0ZXJPd25lciIsImlzU3BlY2lhbGl6ZWQiLCJjYW5Nb2RpZnlTcGVjIiwiQ29DN1NwZWxsU2hlZXQiLCJDb0M3U3RhdHVzU2hlZXQiLCJzdGF0dXNUeXBlIiwiZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzIiwiQ29DN1RhbGVudFNoZWV0IiwidGFsZW50VHlwZSIsIkNvQzdWZWhpY2xlU2hlZXQiLCJhcm1lZCIsIl9vbkFkZEFybW9yIiwiX29uUmVtb3ZlQXJtb3IiLCJfb25Ub2dnbGVFeHBhbmQiLCJvbGRTaXplIiwiQ29DN1dlYXBvblNoZWV0IiwiY29tYmF0U2tpbGwiLCJwcmljZSIsImVucmljaGVkRGVzY3JpcHRpb25TcGVjaWFsIiwiX29uUHJvcGVydHlDbGljayIsImNvbXBlbmRpdW1GaWx0ZXIiLCJvbGRTZWFyY2hGaWx0ZXIiLCJDb21wZW5kaXVtIiwiX29uU2VhcmNoRmlsdGVyIiwicXVlcnkiLCJyZ3giLCJmaWx0ZXJzIiwiaW5wdXRTZWxlY3RvciIsInR5cGVTZWxlY3QiLCJlcmFTZWxlY3QiLCJpc05hbWVTZWFyY2giLCJpc1NlYXJjaCIsImVudHJ5SWRzIiwiU2V0IiwiZm9sZGVySWRzIiwiYXV0b0V4cGFuZEZvbGRlcklkcyIsImluY2x1ZGVGb2xkZXIiLCJhdXRvRXhwYW5kIiwiZm9sZGVySWQiLCJfbWF0Y2hTZWFyY2hGb2xkZXJzIiwibWF0Y2hlZEZvbGRlcklkcyIsImVudHJ5SWQiLCJfZ2V0RW50cnlJZCIsIm1hdGNoTmFtZSIsIlNlYXJjaEZpbHRlciIsImNsZWFuUXVlcnkiLCJfZ2V0RW50cnlOYW1lIiwibWF0Y2hUeXBlIiwibWF0Y2hFcmFzIiwibWF0Y2hTZWFyY2hFbnRyaWVzSXRlbSIsIl9leHBhbmRlZCIsImluZGV4ZWQiLCJnZXRJbmRleCIsInNlbGVjdGVkVHlwZSIsImZpbHRlckNvQzciLCJzZWxlY3RlZEVyYSIsImdyb3VwVHlwZXMiLCJncm91cFR5cGUiLCJ1bmNvbW1vbiIsIkNvQ0lEIiwiY29tcGVuZGl1bUluZGV4RmllbGRzIiwiSm91cm5hbEVudHJ5IiwiUGxheWxpc3QiLCJSb2xsVGFibGUiLCJTY2VuZSIsImdhbWVQcm9wZXJ0eUxvb2t1cCIsImRvY3VtZW50TmFtZUxvb2t1cCIsImVyYVRleHQiLCJsYW5nRmFsbGJhY2siLCJub3RtaXNzaW5nIiwic3BsaXRzIiwicmVnRXhQYXJ0cyIsImZyb21Db0NJRFJlZ2V4QWxsIiwiY2FuZGlkYXRlcyIsImZyb21Db0NJRFJlZ2V4QWxsTWl4ZWQiLCJmaWx0ZXJCeUxhbmd1YWdlIiwiY29tcGFyZUNvQ0lEUHJpbyIsIm9ubHlEb2N1bWVudHMiLCJjYW5kaWRhdGUiLCJkb2NzRnJvbVdvcmxkIiwicHJvZ3Jlc3NCYXIiLCJpbmRleGVzRnJvbUNvbXBlbmRpYSIsIlNjZW5lTmF2aWdhdGlvbiIsImRpc3BsYXlQcm9ncmVzc0JhciIsInBjdCIsImdhbWVQcm9wZXJ0eSIsImdldEdhbWVQcm9wZXJ0eSIsImNhbmRpZGF0ZURvY3VtZW50cyIsIm1hdGNoaW5nRXJhcyIsImdldERvY3VtZW50VHlwZSIsImluZGV4RG9jdW1lbnRzIiwiYXAiLCJicCIsImFvIiwiYWJzdHJhY3QiLCJEYXRhTW9kZWwiLCJqZSIsInJ0IiwiQ2FyZCIsImluZGV4ZXMiLCJkb2N1bWVudHNGcm9tV29ybGQiLCJkb2N1bWVudHNGcm9tQ29tcGVuZGlhIiwicmVnaW9uQmVoYXZpb3JzIiwiUmVnaW9uQmVoYXZpb3JUeXBlQ2xhc3MiLCJSZWdpb25CZWhhdmlvclR5cGUiLCJDb0M3Q2xpY2thYmxlRXZlbnRzIiwiaW5pdFNlbGYiLCJSZWdpb25CZWhhdmlvciIsImRhdGFNb2RlbHMiLCJjb2M3Q2xpY2thYmxlRXZlbnRzIiwidHlwZUljb25zIiwiRG9jdW1lbnRTaGVldENvbmZpZyIsInJlZ2lzdGVyU2hlZXQiLCJhcHBsaWNhdGlvbnMiLCJzaGVldHMiLCJSZWdpb25CZWhhdmlvckNvbmZpZyIsIm1ha2VEZWZhdWx0Iiwib2xkT25DbGlja0xlZnQiLCJUb2tlbkxheWVyIiwiX29uQ2xpY2tMZWZ0IiwiYWN0aXZlTGF5ZXIiLCJ0b0xvY2FsIiwicmVnaW9uIiwicmVnaW9ucyIsImJlaGF2aW9ycyIsInBvbHlnb25UcmVlIiwidGVzdFBvaW50IiwiX2hhbmRsZU1vdXNlT3ZlckV2ZW50IiwiX2hhbmRsZUxlZnRDbGlja0V2ZW50Iiwib2xkT25DbGlja1JpZ2h0IiwiX29uQ2xpY2tSaWdodCIsIl9oYW5kbGVSaWdodENsaWNrRXZlbnQiLCJwb2ludGVyIiwicmVuZGVyZXIiLCJldmVudHMiLCJzZXRQb2ludGVyIiwiY3Vyc29yIiwiZGVmaW5lU2NoZW1hIiwibW91c2VPdmVyIiwiSmF2YVNjcmlwdEZpZWxkIiwibGVmdENsaWNrIiwicmlnaHRDbGljayIsIkFzeW5jRnVuY3Rpb24iLCJnbG9iYWxUaGlzIiwiQ2xpY2tSZWdpb25MZWZ0VXVpZCIsIkNsaWNrUmVnaW9uUmlnaHRVdWlkIiwiaGFzUGVybWlzc2lvbkRvY3VtZW50IiwiZG9jdW1lbnRVdWlkIiwiSW5TY2VuZVJlbGF0aXZlVGVsZXBvcnQiLCJkZXN0aW5hdGlvblJlZ2lvbiIsInNvdXJjZVRMIiwic2hhcGVzIiwiUG9seWdvblNoYXBlRGF0YSIsIlJlY3RhbmdsZVNoYXBlRGF0YSIsImRlc3RpbmF0aW9uVEwiLCJkZXN0aW5hdGlvblgiLCJkZXN0aW5hdGlvblkiLCJzdG9wQW5pbWF0aW9uIiwiTWFwUGluVG9nZ2xlIiwiTm90ZXNMYXllciIsIlRPR0dMRV9TRVRUSU5HIiwiam91cm5hbFBhZ2VVdWlkcyIsInBlcm1pc3Npb24iLCJwZXJtaXNzaW9uVHJ1ZSIsInBlcm1pc3Npb25GYWxzZSIsIm5vdGVVdWlkcyIsIm9wZW5Eb2N1bWVudCIsInBhZ2VJZCIsImFuY2hvciIsInRvZ2dsZVRpbGVKb3VybmFsUGFnZXMiLCJ0aWxlVXVpZHMiLCJqb3VybmFsVXVpZHMiLCJwYWdlVXVpZHMiLCJwYWdlUGVybWlzc2lvbiIsInRvU2NlbmUiLCJzY2VuZVV1aWQiLCJ2aWV3IiwibG9hZFRlbXBsYXRlcyIsInByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIiwicmVnaXN0ZXJNZW51IiwicmVzdHJpY3RlZCIsIndvcmxkIiwiWSIsIk4iLCJub2JvZHkiLCJldmVyeW9uZSIsImlnbm9yZSIsImFsd2F5cyIsImNyZWF0aW9uIiwibmV2ZXIiLCJfc2V0Um9vdEZvbnRTaXplIiwic2lkZWJhciIsImNvbnRhaW4iLCJob29rcyIsIkFjdG9ycyIsInVucmVnaXN0ZXJTaGVldCIsIkl0ZW1zIiwiU2NlbmVzIiwiSm91cm5hbCIsIlJvbGxUYWJsZXMiLCJNYWNyb3MiLCJQbGF5bGlzdHMiLCJIYW5kbGViYXJzIiwicmVnaXN0ZXJIZWxwZXIiLCJoYXNoIiwiRGljZUZhY3RvcnkiLCJzeXN0ZW1zIiwiZDEwMCIsImRpY2VEZWNhZGVyIiwiZ2V0UHJvdG90eXBlT2YiLCJrZXl2YWwiLCJyZWxhdGl2ZSIsInNpZGViYXJJY29uIiwiY3JlYXRlQW5jaG9yIiwiaGVpZ2h0VGV4dCIsImhlaWdodFRpcCIsIndpZHRoVGlwIiwiY2xlYXJUaW1lb3V0IiwiQ29DN1RvdXIiLCJUb3VyIiwid2FpdEZvckVsZW1lbnQiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwib2JzZXJ2ZXIiLCJkaXNjb25uZWN0Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJfcHJlU3RlcCIsInN0ZXBJbmRleCIsImN1cnJlbnRTdGVwIiwic2lkZWJhclRhYiIsIl9wb3N0U3RlcCIsImhhc05leHQiLCJpc1Jlc2V0dGluZyIsInJlc2V0IiwiRW5hYmxlVmFyaWFudFJ1bGVzRW4iLCJjYW5CZVJlc3VtZWQiLCJzdGVwcyIsImxvY2FsaXphdGlvbiIsIkVuYWJsZVZhcmlhbnRSdWxlc0ZyIiwiaW5zdHJ1Y3Rpb25zVmVyc2lvbiIsInJlYWRNZSIsInRvdXJzIiwidG91ck5hbWUiLCJyZWdpc3RlclRvdXJzIiwiQ29DN0hvb2tzIiwibGlzdGVuIiwidG9rZW5Eb2N1bWVudCIsImNyYWV0b3JJZCIsIl9vYmplY3QiLCJhZGREaWNlUHJlc2V0IiwiZm9udFNjYWxlIiwiZW50aXR5Q3JlYXRlU2VsZWN0VGFnIiwiZW50aXR5U29ydGVkTGlzdCIsInNob3dFeHBlcmltZW50YWwiLCJlbnRpdHlPcHRpb24iLCJjYXBpdGFsaXplIiwic2Vjb25kIiwiaW1hZ2VSZXBsYWNlZCIsInRleHRSZXBsYWNlZCIsInBsYXllckxpc3QiLCJpbnNlcnRBZnRlciIsImRpZVRlcm1zIiwidGFnIiwiZ21jcmVhdGVtZXNzYWdlYXMiLCJtZWxlZVRhcmdldCIsImdtdHJhZGVpdGVtdG8iLCJDb0M3U3lzdGVtU29ja2V0IiwiY2FsbFNvY2tldCIsInJlcXVlc3RLZWVwZXJBY3Rpb24iLCJyZXF1ZXN0VXNlckFjdGlvbiIsImVycm9ySWZNaXNzaW5nIiwiaW5jbHVkZVNlbGYiLCJfb25MZWZ0Q2xpY2siLCJzeXN0ZW1UYWIiLCJiZWZvcmUiLCJjYXJkY2xhc3MiLCJzb2NrZXRsaWIiLCJyZWdpc3RlclN5c3RlbSIsImluaXRFQ0MiLCJjb21tYW5kcyIsInJlcyIsInRvTG9jYWxpemUiLCJsb2NhbGl6ZWQiLCJlZmZlY3RJbmRleCIsImVmZmVjdE5hbWVLZXkiLCJzdGF0dXNLZXkiLCJkaXJlY3RvcnkiLCJJdGVtRGlyZWN0b3J5IiwiaXRlbUVsZW1lbnQiLCJfdGFibGVTZXR0aW5nc0NoYW5nZWQiLCJhY3RpdmF0ZUdsb2JhbExpc3RlbmVyIiwidGFibGVDaG9pY2UiLCJib3V0T2ZNYWRuZXNzX1N1bW1hcnkiLCJib3V0T2ZNYWRuZXNzX1JlYWxUaW1lIiwiY2hhcmFjdGVyU2hlZXQiLCJub3RlIiwiY29udHJvbEljb24iLCJiZyIsImNsZWFyIiwiYXBwbGljYXRpb24iLCJzdWJoZWFkaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==