(()=>{"use strict";class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}const COC7={eras:{nvct:"CoC7.EraNvct",drka:"CoC7.EraDrka",ddts:"CoC7.EraDdts",glit:"CoC7.EraGlit",1920:"CoC7.Era1920",pulp:"CoC7.EraPulp",mdrn:"CoC7.EraMdrn"},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.dodgeSkillName="CoC7.DodgeSkillName",COC7.creditRatingSkillName="CoC7.CreditRatingSkillName",COC7.CthulhuMythosName="CoC7.CthulhuMythosName",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold,event=null){await CoC7Utilities.rollDice(event,{threshold})}static async createMacro(bar,data,slot){if("Item"!==data.type)return;const item=await fromUuid(data.uuid);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){let macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));macro||(macro=await Macro.create({name:item.name,type:"script",img:item.img,command})),game.user.assignHotbarMacro(macro,slot)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];return chatHelper.getTokenFromKey(key)?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula=formula+db+"/2"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click",".coc7-link",await CoC7Parser._onCheck.bind(this)),html.on("dragstart","a.coc7-link",CoC7Parser._onDragCoC7Link.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.type){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.system.skillName}`]={value:i.rawValue},this.system.skills[`${i.id}`]={value:i.rawValue});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0},detectionModes:[{id:"basicSight",range:30,enabled:!0}]}):"npc"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/cultist.svg"):"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/floating-tentacles.svg"):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="icons/svg/chest.svg"),data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.system.description.value,{async:!1})}`,result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!1}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio})}async updateBioValue(index,content){const bio=duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(const data of dataArray)switch(data.type){case"skill":if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;if(CoC7Item.isAnySpec(data)){let skillList=[];(data.system?.flags?.occupation||data.system?.flags?.archetype)&&(skillList=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase())))));const skillData=await SkillSpecSelectDialog.create(skillList,data.system.specialization,baseCalculated);if(skillData){if(baseCalculated=skillData.get("base-value"),data.system.value=baseCalculated,skillData.get("existing-skill")){const existingItem=this.items.get(skillData.get("existing-skill"));for(const[key,value]of Object.entries(data.system.flags))value&&await existingItem.setItemFlag(key);return void(data.name=CoC7Item.getNameWithoutSpec(existingItem))}{const parts=CoC7Item.getNamePartsSpec(skillData.get("new-skill-name"),data.system.specialization);data.system.skillName=parts.skillName,data.name=parts.name}}}String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(duplicate(data));break;case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax})}}const skills=data.system.items.filter((it=>"skill"===it.type)),othersItems=data.system.items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(duplicate(data)),occupation=!0}break;default:processedDataArray.push(duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&"skill"===value.type&&skillList.push(value);return skillList}parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actor))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?Math.floor((parseInt(this.system.characteristics.siz.value,10)+parseInt(this.system.characteristics.con.value,10))/(game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===this.type?5:10)):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(const skill of skillList)if(CoC7Item.isAnySpec(skill))skill.system.flags||(skill.system.flags={}),flag&&(skill.system.flags[flag]=!0),processed.push(duplicate(skill));else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),processed.push(duplicate(skill))}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}get rawBuild(){if(!this.system.attribs)return null;if(!this.system.attribs.build)return null;if("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto){const sum=this.system.characteristics.str.value+this.system.characteristics.siz.value;if(sum>164)return Math.floor((sum-45)/80)+1;if(sum<65)return-2;if(sum<85)return-1;if(sum<125)return 0;if(sum<165)return 1}return this.system.attribs.build.value}get build(){return this.system.attribs.build.value}get rawDb(){if(!this.system.attribs)return null;if(!this.system.attribs.db)return null;if("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto){const sum=this.system.characteristics.str.value+this.system.characteristics.siz.value;if(sum>164)return`${Math.floor((sum-45)/80)}D6`;if(sum<65)return-2;if(sum<85)return-1;if(sum<125)return 0;if(sum<165)return"1D4"}return this.system.attribs.db.value}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){let MOV;if(MOV=this.system.characteristics.dex.value>this.system.characteristics.siz.value&&this.system.characteristics.str.value>this.system.characteristics.siz.value?9:this.system.characteristics.dex.value>=this.system.characteristics.siz.value||this.system.characteristics.str.value>=this.system.characteristics.siz.value?8:7,"creature"!==this.system.type&&(isNaN(parseInt(this.system.infos.age))||(MOV=parseInt(this.system.infos.age)>=40?MOV-Math.floor(parseInt(this.system.infos.age)/10)+3:MOV)),MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){let skill=this.getSkillsByName(skillData.name?skillData.name:skillData);if(!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await class{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const effectData=mergeObject({label:game.i18n.localize(effect[0].label),icon:effect[0].icon,flags:{core:{statusId:effect[0].id}},disabled:!1},custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.firearm&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.dodgeSkillName));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.creditRatingSkillName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.CthulhuMythosName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}get spendingLevel(){const CR=this.creditRating;return CR>=99?5e3:CR>=90?250:CR>=50?50:CR>=10?10:CR>=1?2:.5}get cash(){const CR=this.creditRating;return CR>=99?5e4:CR>=90?20*CR:CR>=50?5*CR:CR>=10?2*CR:CR>=1?CR:.5}get assets(){const CR=this.creditRating;return CR>=99?5e6:CR>=90?2e3*CR:CR>=50?500*CR:CR>=10?50*CR:CR>=1?10*CR:0}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Link{constructor(){this._linkData={type:CoC7Link.LINK_TYPE.CHECK,check:CoC7Link.CHECK_TYPE.SKILL,effect:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}}}static async fromData(linkData){const label=CoC7LinkCreationDialog.attributes.concat(CoCActor.getCharacteristicDefinition()).filter((e=>e.key===linkData.name)).map((e=>e.label));label.length>0&&(linkData.label=label[0]);const link=new CoC7Link;return await link.setData(linkData),link}static get TYPE_KEYWORD(){return["check","sanloss","item"]}static get CHARAC_KEYWORD(){return["charac","char","characteristic","characteristics"]}static get ATTRIB_KEYWORD(){return["attributes","attribute","attrib","attribs"]}static get SKILL_KEYWORD(){return["skill"]}static get EFFECT_KEYWORD(){return["effect","effects"]}static get LINK_TYPE(){return{CHECK:1,SANLOSS:2,ITEM:3,EFFECT:4}}static get CHECK_TYPE(){return{CHARACTERISTIC:1,ATTRIBUTE:2,SKILL:3,EFFECT:4}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get data(){const data=duplicate(this._linkData);return data.isCheck=this.is.check,data.isSanloss=this.is.sanloss,data.isItem=this.is.item,data.isEffect=this.is.effect,data}async fetchItem(){if(this._linkData.validItem=!1,!this._linkData.fromCompendium&&!this._linkData.fromDirectory)return this._item=void 0,!1;if(this._linkData.fromCompendium){const pack=game.packs.get(this._linkData.pack);if(!pack)return!1;if("Item"!==pack.metadata.entity)return;this._item=await pack.getDocument(this._linkData.id)}if(this._linkData.fromDirectory&&(this._item=game.items.get(this._linkData.id)),this._linkData.skillName=null,this._linkData.itemName=null,this._item){if("weapon"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.ITEM,this._linkData.itemName=this._item.data.name,this._linkData.validItem=!0,!0;if("skill"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.CHECK,this.check=CoC7Link.CHECK_TYPE.SKILL,this._linkData.skillName=this._item.data.name,this._linkData.validItem=!0,!0}return!1}async setData(x){this._linkData.fromCompendium=!1,this._linkData.fromDirectory=!1,this.hasPlayerOwner=!1,x.hasPlayerOwner&&(this.hasPlayerOwner=!0,this.actorKey=x.actorKey),x.pack&&x.id&&(this._linkData.fromCompendium=!0,this._linkData.pack=x.pack,this._linkData.id=x.id),x.id&&!x.pack&&(this._linkData.fromDirectory=!0,this._linkData.id=x.id);if(!await this.fetchItem()&&(x.check?this.type=x.check:this.type=CoC7Link.LINK_TYPE.CHECK,x.type?this.check=x.type:this.type&&(this.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),x.name))if(this._linkData.itemName=null,this._linkData.skillName=null,this._linkData.characteristicKey=null,this._linkData.attributeKey=null,this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x.name;break;case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x.name;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x.name}else this.is.item&&(this._linkData.itemName=x.name);!x.difficulty&&isNaN(Number(x.difficulty))||(this._linkData.difficulty=Number(x.difficulty)),!x.modifier&&isNaN(Number(x.modifier))||(this._linkData.modifier=Number(x.modifier)),void 0===x.difficulty&&void 0===x.modifier||(this._linkData.forceModifiers=!0),x.forceModifiers&&(this._linkData.forceModifiers=!0),"true"!==x.displayName&&!0!==x.displayName||(this._linkData.displayName=!0),x.label&&(this._linkData.hasLabel=!0,this._linkData.label=x.label),x.icon&&(this._linkData.hasIcon=!0,this._linkData.icon=x.icon),"true"!==x.blind&&!0!==x.blind||(this._linkData.blind=!0),this._linkData.sanMin=x.sanMin,this._linkData.sanMax=x.sanMax,this._linkData.sanReason=x.sanReason,(this.is.effect||x.object)&&(x.object&&("string"==typeof x.object||x.object instanceof String)?this._linkData.effect=JSON.parse(x.object):this._linkData.effect=foundry.utils.deepClone(x.object),this._linkData.effect.changes||(this._linkData.effect.changes=[]))}get type(){return this._linkData.type}get checkType(){switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return"characteristic";case CoC7Link.CHECK_TYPE.ATTRIBUTE:return"attribute";case CoC7Link.CHECK_TYPE.SKILL:return"skill";case CoC7Link.CHECK_TYPE.EFFECT:return"effect";default:return}}set type(x){if(isNaN(Number(x)))switch(x.toLowerCase()){case"check":this._linkData.type=CoC7Link.LINK_TYPE.CHECK;break;case"sanloss":this._linkData.type=CoC7Link.LINK_TYPE.SANLOSS;break;case"item":this._linkData.type=CoC7Link.LINK_TYPE.ITEM;break;case"effect":this._linkData.type=CoC7Link.LINK_TYPE.EFFECT;break;default:this._linkData.type=void 0}else this._linkData.type=x}get check(){return isNaN(Number(this._linkData.check))?void 0:Number(this._linkData.check)}set check(x){isNaN(Number(x))?(this._linkData.check=void 0,CoC7Link.CHARAC_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),CoC7Link.ATTRIB_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.ATTRIBUTE),CoC7Link.SKILL_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.SKILL),CoC7Link.EFFECT_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.EFFECT,this._linkData.check=CoC7Link.CHECK_TYPE.EFFECT)):this._linkData.check=Number(x)}get name(){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return this._linkData.characteristicKey;case CoC7Link.CHECK_TYPE.ATTRIBUTE:return this._linkData.attributeKey;case CoC7Link.CHECK_TYPE.SKILL:return this._linkData.skillName;default:return}else if(this.is.item)return this._linkData.itemName}set name(x){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x;break;case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x}else this.is.item&&(this._linkData.itemName=x)}get is(){const link=this;return{get check(){return link.type===CoC7Link.LINK_TYPE.CHECK},set check(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.CHECK)},get sanloss(){return link.type===CoC7Link.LINK_TYPE.SANLOSS},set sanloss(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.SANLOSS)},get item(){return link.type===CoC7Link.LINK_TYPE.ITEM},set item(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.ITEM)},get effect(){return link.type===CoC7Link.LINK_TYPE.EFFECT},set effect(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.EFFECT)}}}async update(updateData){this._linkData=mergeObject(this._linkData,updateData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}async updateFromLink(linkData){await this.setData(linkData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}get link(){if(!this.type)return null;switch(this.type){case CoC7Link.LINK_TYPE.CHECK:{if(!this.type||!this.name)return null;let options=`${this._linkData.blind?"blind,":""}type:${this.checkType},name:${this.name}`;void 0!==this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),void 0!==this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.check[${options}]`;return this._linkData.hasLabel&&this._linkData.label?link+=`{${this._linkData.label}}`:this.name&&(link+=`{${this.name}}`),link}case CoC7Link.LINK_TYPE.SANLOSS:{if(!this._linkData.sanMax||!this._linkData.sanMin)return null;let options=`sanMax:${this._linkData.sanMax},sanMin:${this._linkData.sanMin}`;this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),this._linkData.sanReason&&(options+=`,sanReason:${this._linkData.sanReason}`),this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`);let link=`@coc7.sanloss[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}case CoC7Link.LINK_TYPE.ITEM:{if(!this.type||!this.name)return null;let options=`name:${this.name}`;this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.item[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}case CoC7Link.LINK_TYPE.EFFECT:{const effectData=foundry.utils.deepClone(this._linkData.effect);this.effectIsTemp||delete effectData.duration,0===effectData.changes?.length&&delete effectData.changes,effectData.disabled||delete effectData.disabled,effectData.tint||delete effectData.tint;let link=`@coc7.effect[${JSON.stringify(effectData)}]`;return this._linkData.hasLabel&&void 0!==this._linkData.label&&(link+=`{${this._linkData.label}}`),link}default:return null}}get effectIsTemp(){if(!this._linkData.effect.duration)return!1;return(this._linkData.effect.duration.seconds??(this._linkData.effect.duration.rounds||this._linkData.effect.duration.turns)??0)>0}sendToChat(){const option={};let message;option.speaker={alias:game.user.name},message=this.is.effect?`<div class="effect-message">${this.link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:this.link}),chatHelper.createMessage(null,message,option)}sendToClipboard(){CoC7Utilities.copyToClipboard(this.link)}}class CoC7LinkCreationDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0,width:560,height:"auto",choices:{},allowCustom:!0,minimum:0,maximum:null,tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}static async fromLinkData(linkData,options={}){const link=await CoC7Link.fromData(linkData);return new CoC7LinkCreationDialog(link,options)}static get attributes(){return[{key:"lck",label:game.i18n.localize("CoC7.Luck"),selected:!1},{key:"san",label:game.i18n.localize("CoC7.Sanity"),selected:!1}]}async getData(){const data=await super.getData();data.link=this.link,data.data=this.link.data,data.data.effect.modes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),data.fromGame=this.link.is.item||this.link.is.check&&this.link.check===CoC7Link.CHECK_TYPE.SKILL,data.askId=data.fromGame&&(this.link.data.fromDirectory||this.link.data.fromCompendium),data.askPack=data.fromGame&&this.link.data.fromCompendium,data.isSetFromGame=data.askId||data.askPack,data.difficultyLevel=CoC7Check.difficultyLevel,data.selectedDifficulty={unknown:CoC7Check.difficultyLevel.unknown===this.link.data.difficulty,regular:CoC7Check.difficultyLevel.regular===this.link.data.difficulty,hard:CoC7Check.difficultyLevel.hard===this.link.data.difficulty,extreme:CoC7Check.difficultyLevel.extreme===this.link.data.difficulty,critical:CoC7Check.difficultyLevel.critical===this.link.data.difficulty},this.link.data.difficulty||("unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?data.selectedDifficulty.unknown=!0:data.selectedDifficulty.regular=!0),data.linkType=[{key:CoC7Link.LINK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check"),selected:this.link.is.check},{key:CoC7Link.LINK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck"),selected:this.link.is.sanloss},{key:CoC7Link.LINK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon"),selected:this.link.is.item},{key:CoC7Link.LINK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects"),selected:this.link.is.effect}],data.checkType=CoC7Link.CHECK_TYPE,data.selectedCheckType={characteristic:CoC7Link.CHECK_TYPE.CHARACTERISTIC===this.link.check,attribute:CoC7Link.CHECK_TYPE.ATTRIBUTE===this.link.check,skill:CoC7Link.CHECK_TYPE.SKILL===this.link.check},this.link.check||(data.selectedCheckType.characteristic=!0),data.characteristics=CoCActor.getCharacteristicDefinition();for(let i=0;i<data.characteristics.length;i++)data.data.characteristicKey===data.characteristics[i].key||data.data.characteristicKey===data.characteristics[i].shortName||data.data.characteristicKey===data.characteristics[i].label?data.characteristics[i].selected=!0:data.characteristics[i].selected=!1;return data.attributes=CoC7LinkCreationDialog.attributes.map((e=>(e.selected=data.data.attributeKey===e.key,e))),data}get link(){return this.object}activateListeners(html){html.find(".submit-button").click(this._onClickSubmit.bind(this)),super.activateListeners(html),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":return button.closest(".effect-change").remove(),this.submit({preventClose:!0}).then((()=>this.render()))}}async _addEffectChange(){const idx=this.link.data.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}_getSubmitData(updateData={}){const fd=new FormDataExtended(this.form,{editors:this.editors}),data=foundry.utils.expandObject(fd.object);return updateData&&foundry.utils.mergeObject(data,updateData),data.effect&&(data.effect.changes=Array.from(Object.values(data.effect.changes||{}))),data}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("link"===data.CoC7Type)await this.link.updateFromLink(data),this.render(!0);else{if(data.actorId){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId,actor=chatHelper.getActorFromKey(actorKey);actor.hasPlayerOwner?(this.link.hasPlayerOwner=!0,this.link.actorKey=actor.actorKey):this.link.hasPlayerOwner=!1}if("Item"===data.type)if(data.data)switch(data.data.type){case"skill":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.CHECK,this.link.check=CoC7Link.CHECK_TYPE.SKILL,this.link.name=data.data.name,this.render(!0);break;case"weapon":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.ITEM,this.link.name=data.data.name,this.render(!0)}else data.id&&(this.link._linkData.id=data.id,this.link._linkData.fromDirectory=!0),data.pack&&(this.link._linkData.pack=data.pack,this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!0),await this.link.fetchItem(),this.render(!0)}}async _onClickSubmit(event){const action=event.currentTarget.dataset.action;if(this.link.link){switch(action){case"clipboard":CoC7Utilities.copyToClipboard(this.link.link);break;case"chat":{const option={};let message;option.speaker={alias:game.user.name},message=this.link.is.effect?`<div class="effect-message">${this.link.link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:this.link.link}),chatHelper.createMessage(null,message,option)}break;case"whisper-owner":{const option={};option.speaker={alias:game.user.name},option.whisper=this.link.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:this.link.actor.name,check:this.link.link}),option)}break;case"whisper-selected":{if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));const option={};option.speaker={alias:game.user.name};for(const t of canvas.tokens.controlled)t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:this.link.link}),option))}}this.close()}}async _updateObject(event,formData){const target=event.currentTarget,group=target?.closest(".form-group"),groupName=group?.dataset.group;if("origin"===groupName)"fromCompendium"===target.name&&(this.link._linkData.fromCompendium=!this.link._linkData.fromCompendium,this.link._linkData.fromCompendium&&(this.link._linkData.fromDirectory=!1)),"fromDirectory"===target.name&&(this.link._linkData.fromDirectory=!this.link._linkData.fromDirectory,this.link._linkData.fromDirectory&&(this.link._linkData.fromCompendium=!1)),await this.link.fetchItem();else{const formDataEx=expandObject(formData);formDataEx.check&&(formDataEx.check=Number(formDataEx.check)),formDataEx.difficulty&&(formDataEx.difficulty=Number(formDataEx.difficulty)),formDataEx.type&&(formDataEx.type=Number(formDataEx.type));const diffData=diffObject(this.link.data,formDataEx);await this.link.update(diffData)}this.render(!0)}static async create(){const link=new CoC7Link;new CoC7LinkCreationDialog(link,{}).render(!0)}}class CoC7Parser{static async onEditorDrop(event,editor){event.preventDefault();const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("coc7-link"===data.linkType)if(event.stopPropagation(),"effect"!==data.type){if(!event.shiftKey&&(void 0===data.difficulty||void 0===data.modifier)){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(data.modifier=usage.get("bonusDice"),data.difficulty=usage.get("difficulty"))}"blindroll"===game.settings.get("core","rollMode")&&(data.blind=!0);const link=CoC7Parser.createCoC7Link(data);link&&editor.insertContent(link)}else{const link=await CoC7Link.fromData(data);editor.insertContent(link.link)}else if(isCtrlKey(event)){if(event.stopPropagation(),"Item"!==data.type)return;let item;const linkData={};if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(data.id)}else item=data.data?data.data:game.items.get(data.id);if(!item)return;if(linkData.name=item.name,data.pack&&(linkData.pack=data.pack),data.id&&(linkData.id=data.id),"skill"===item.type){if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(linkData.modifier=usage.get("bonusDice"),linkData.difficulty=usage.get("difficulty"))}linkData.check="check",linkData.type="skill","blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0)}else{if("weapon"!==item.type)return;linkData.check="item",linkData.type="weapon"}const link=CoC7Parser.createCoC7Link(linkData);link&&editor.insertContent(link)}}static ParseMessage(message,html,data){if(message.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}static createCoC7Link(data){if(data.check)switch(data.check.toLowerCase()){case"check":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;void 0!==data.difficulty&&(options+=`,difficulty:${data.difficulty}`),void 0!==data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.check[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"sanloss":{if(!data.sanMax||!data.sanMin)return;let options=`${data.blind?"blind,":""}sanMax:${data.sanMax},sanMin:${data.sanMin}`;data.difficulty&&(options+=`,difficulty:${data.difficulty}`),data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`);let link=`@coc7.sanloss[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"item":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.item[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}}}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _getTextNodes(parent){const text=[],walk=document.createTreeWalker(parent,NodeFilter.SHOW_TEXT,null,!1);for(;walk.nextNode();)text.push(walk.currentNode);return text}static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7)\\.([^\\]]+?)\\[((?:[^\\]\\[]+|\\[(?:[^\\]\\[]+|\\[[^\\]\\[]*\\])*\\])*)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Parser._createLink),html.innerHTML}static bindEventsHandler(html){html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _onDragCoC7Link(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=duplicate(a.dataset);data.linkType="coc7-link",data.CoC7Type="link",data.icon=null,data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object),data.type="effect"),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name},matches=options.matchAll(/[^,]+/gi);if("effect"===type)data.effect=JSON.parse(options),data.dataset.object=options;else for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=["check"].includes(type.toLowerCase())),data.dataset[key]=value}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case"check":{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case"sanloss":title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case"item":title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case"effect":title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}static async _onCheck(event){const options=event.currentTarget.dataset;if(options.difficulty&&(options.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),game.user.isGM){if(isCtrlKey(event)){options.displayName&&(options.label=event.currentTarget.innerText);const link=await CoC7Link.fromData(options);return void new CoC7LinkCreationDialog(link).render(!0)}if(canvas.tokens.controlled.length){const link=await CoC7Link.fromData(options);for(const token of canvas.tokens.controlled)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return token.actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return token.actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return token.actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(token.actor.actorKey,options,{fastForward:event.shiftKey});break;case"item":return token.actor.weaponCheck(options,event.shiftKey);case"effect":await token.actor.createEmbeddedDocuments("ActiveEffect",[link.data.effect])}}else if(game.user.data.document.character?.data)await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1})));else if(game.user.isGM){const option={speaker:{alias:game.user.name}};chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:(await CoC7Link.fromData(options)).link}),option)}}else{const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);if(actor)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(actor.id,options,{fastForward:event.shiftKey});break;case"item":return actor.weaponCheck(options,event.shiftKey)}else game.user.data.document.character?.data?await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1}))):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])checkedProps={["system.eras."+propertyId]:!this.system.eras[propertyId]};else if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.specialization":"",name:this.system.skillName}:this.system.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.system.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.system.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match?{name:match[0],specialization:match[1],skillName:match[2]}:{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return item instanceof CoC7Item?!("skill"!==item.type||!item.system.properties?.special)&&[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CoC7Item.getNameWithoutSpec(item).toLowerCase()):!("skill"!==item.type||!item.properties?.special)&&[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CoC7Item.getNameWithoutSpec(item).toLowerCase())}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.system.range.normal.value)}get longRange(){return parseInt(this.system.range.long.value)}get extremeRange(){return parseInt(this.system.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){htmlOptions.async=!1;const data=duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.DodgeSkillName").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType)return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config);CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={check:"check",type:"",name:"",hasPlayerOwner:config.options.hasPlayerOwner,actorKey:config.options.actor.actorKey,forceModifiers:config.options.shiftKey};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.type="skill",linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.type="characteristic",linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check="sanloss":(linkData.type="attribute",linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check="item",linkData.type="weapon",linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check="sanloss",linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name,linkData.tokenKey=config.options.actor.actorKey}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.fromData(linkData).then((link=>link.sendToChat())):config.options.sendToClipboard?CoC7Link.fromData(linkData).then((link=>link.sendToClipboard())):CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){isNaN(Number(change.value))||(change.value=Number(change.value));const result=super.apply(actor,change),evaluated=isNaN(result)?parse(result):result;return isNaN(evaluated)?result:evaluated}_applyMultiply(actor,change){const{key,value}=change,current=foundry.utils.getProperty(actor,key),n=Number.fromString(value);let update;const strUpdate=`${current}*${String(value)}`;if(isNaN(parse(strUpdate)))if(Roll.validate(strUpdate))update=strUpdate;else{if("number"!=typeof current||isNaN(n))return null;update=current*n}else update=String(parse(strUpdate));return foundry.utils.setProperty(actor,key,update),update}_applyAdd(actor,change){const{key,value}=change,current=foundry.utils.getProperty(actor,key)??null;let update=null;switch(foundry.utils.getType(current)){case"null":update=value;break;case"string":{const strUpdate=`${current}+${String(value)}`.replace("++","+").replace("+-","-");update=isNaN(parse(strUpdate))?Roll.validate(strUpdate)?strUpdate:current+String(value):String(parse(strUpdate))}break;case"number":{const n=Number.fromString(value);isNaN(n)||(update=current+n)}break;case"Array":{const at=foundry.utils.getType(current[0]);current.length&&foundry.utils.getType(value)!==at||(update=current.concat([value]))}}return null!==update&&foundry.utils.setProperty(actor,key,update),update}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}_prepareDuration(){super._prepareDuration();const duration=this.duration;if(Number.isNumeric(duration.seconds)){let label=duration.label;duration.seconds>3600?label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(label=new Date(1e3*duration.seconds).toISOString().slice(14,19)),duration.label=label}}get isStatus(){const statusId=this.getFlag("core","statusId");return["tempoInsane","indefInsane","criticalWounds","dying","dead","unconscious","prone"].includes(statusId)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("Suppressed"),effects:[],info:[game.i18n.localize("Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e._getSourceName(),e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}function parse(str){if(!/^[+\-*/)(\d]+$/.exec(str))return NaN;try{return new Roll(str).evaluate({async:!1}).total}catch(e){return NaN}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id);item.system.rawValue=skill.rawValue,item.system.value=skill.value}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.firearm));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}static parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actorsheet))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));if(html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),html.find("a.coc7-link").on("click",(event=>CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event))),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null;await Item.create({name:"__CoC7InternalItem__",type:"item"}),ui.notifications.info("effect created !")})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"characteristic",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"attribute",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("coc7-link"===data.linkType&&"effect"===data.type){const link=await CoC7Link.fromData(data);link._linkData.effect&&this.actor.createEmbeddedDocuments("ActiveEffect",[link._linkData.effect])}await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=TextEditor.enrichHTML(skill.system.description.value,{async:!1});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);if(isCtrlKey(event)&&game.user.isGM){const link=new CoC7Link;await link.setData({type:"effect",object:effect});new CoC7LinkCreationDialog(link).render(!0)}}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:"item",type:"weapon",name:weapon.name,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey};CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize(COC7.creditRatingSkillName)===item.name){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=CoC7Parser.createCoC7Link(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized,await this.close();const options=this.summarized?{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700}:CoC7CharacterSheet.defaultOptions;await this.render(!0,options)}async getData(){const sheetData=await super.getData();if(this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),!sheetData.manualCredit){let factor,monetarySymbol;sheetData.credit={},sheetData.data.system.credit?(factor=parseInt(sheetData.data.system.credit.multiplier)?parseInt(sheetData.data.system.credit.multiplier):1,monetarySymbol=sheetData.data.system.credit.monetarySymbol?sheetData.data.system.credit.monetarySymbol:"$"):(factor=1,monetarySymbol="$"),sheetData.credit.spendingLevel=`${monetarySymbol}${this.actor.spendingLevel*factor}`,sheetData.credit.assets=`${monetarySymbol}${this.actor.assets*factor}`,sheetData.credit.cash=`${monetarySymbol}${this.actor.cash*factor}`}sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this))))}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class Updater{static async checkForUpdate(){const systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion"),runMigrate=isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);module&&(!runMigrate&&Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)&&String(this.updatedModules[module.id])===String(module.version)||(this.currentModules[module.id]=module.version))}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0));const settings=mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemSetupEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&mergeObject(original,update)})),delete update[embeddedName]})),mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1])}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemSetupEras(item,updateData){if("setup"===item.type)for(const[key,value]of Object.entries(item.system.eras))void 0!==value.selected&&(updateData["system.eras."+key]=value.selected)}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateActorKeeperNotes(actor,updateData){return["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""}),updateData}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("aeio"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilitt: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrae|MO)",halfdb:"(|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejtnoci(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Jzyki)[:\n]",sectionSpells:"\n(?:Zaklcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrwka|Garand|Gauge |Lee-Enfield|Strzelba na sonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mootowa|Granat|Laska dynamitu|Dynamit)",example:"Przykadowa posta, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczcie: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalnoci: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obraenia 1K6\nWalka 30% (15/6), obraenia 1K3\nDerringer 40% (20/8), obraenia 1K8+1\nUnik 50% (25/10)\nUmiejtnoci\nTresura Zwierzt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczo 35%, Ukrywanie 10%\nJzyki: Angielski 80%, Eklo 5%.\nZaklcia: Przyzwanie NPC, Odesanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Comptences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bton de dynamite|Cocktail Molotov|Grenade  main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 DU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nComptences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificacin de dao)",halfdb:"(|medio dao|mitad|dao a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 aos\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNmero de Ataques 3 Prdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), dao 1D6\nBrawl 30% (15/6), dao 1D3\nDerringer 40% (20/8), dao 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks|||)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|)[:\n]",sectionSpells:"\n(?:spells||)[:\n]",handgun:"(?<type> |\\.22|\\.25()|\\.327\\.65mm|\\.327\\.65mm|\\.357 Magnum|\\.389mm|\\.38|M9|17|9mm|P08|\\.41|\\.44|\\.45|\\.45||Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>||||Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|)",machineGun:"(?<type>Browning|Vickers|)",launched:"(?<type>Molotov|Grenade|Dynamite||)",example:",  27\n 75  60  80  70  60  80\n 50  85 SAN 55 HP 14 DB: 1D4\n: 1 Move: 7 MP: 10 : 40 : 1\n: 3 : 1d4/1d8\n\n 50% (25/10),  1D6\n 30% (15/6),  1D3\n 40% (20/8),  1D8+1\n 50% (25/10)\n\n 55%,  30%,  25%,  20%,\n 50%,  45%,  25%,  75%,\n () 90%,  () 35%, \n 35%,  10%\n:  80%,  5%.\n:  NPC,  NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilitt)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilittsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beien)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawd(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalno)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymaoci)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczcie(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalnoci|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obraenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Bro Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])DU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sant Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armure|Protection(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Dplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Sant mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dgts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact| distance|Combat rapproch|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupacin(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mgicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Nmero de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Prdida de cordura|Prdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*dao)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks||# )(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss||SAN|SAN|SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge||)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(||Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Handgun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Rifle/Shotgun",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Rifle",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Shotgun",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Submachine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Machine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill","Launch",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory);return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill&&"1"===skill.value&&"0"===skill.half&&"0"===skill.fifth)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7LinkCreationDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["link","chase"]}static async onDropSomething(canvas,data){if(data.CoC7Type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.CoC7Type)){const gridSize=canvas.scene.grid,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));if(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),"link"===data.CoC7Type){const link=await CoC7Link.fromData(data);link.link||ui.notifications.error("Invalid link");const option={};if(option.speaker={alias:game.user.name},link.is.effect)if(dropTargetTokens.length)for(const t of dropTargetTokens)await t.actor.createEmbeddedDocuments("ActiveEffect",[link._linkData.effect]);else;else if(dropTargetTokens.length)for(const t of dropTargetTokens)t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:link.link}),option));else{const whisperTargets=game.users.players.filter((u=>!!u.character));for(const u of whisperTargets)option.whisper=[u],chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:u.character.name,check:link.link}),option)}}else if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.system.costs,losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),messageId=htmmlCard.closest(".message")?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid),particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new NormalizedRectangle(x,y,particpantDocument.object.width,particpantDocument.object.height);const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new NormalizedRectangle(x,y,particpantDocument.object.width,particpantDocument.object.height)):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){void 0===data.system&&(data.system={});const construct=CoC7Skill.guessNameParts(data.name);construct.isSpecialization?(data.system.skillName=construct.skillName,data.system.specialization=construct.specialization,void 0===data.system.properties&&(data.system.properties={}),data.system.properties.special=!0,(construct.isFighting||construct.isFirearms)&&(data.system.properties.combat=!0,construct.isFighting?data.system.properties.fighting=!0:data.system.properties.firearm=!0)):data.system.skillName=data.name}super(data,context)}static guessNameParts(skillName){const output={skillName,specialization:"",isSpecialization:!1,isFighting:!1,isFirearms:!1},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);return match&&(output.skillName=match[2].trim(),output.specialization=match[1].trim(),output.isSpecialization=!0,output.specialization===game.i18n.localize("CoC7.FightingSpecializationName")?output.isFighting=!0:output.specialization===game.i18n.localize("CoC7.FirearmSpecializationName")&&(output.isFirearms=!0)),output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.system.skillName}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||collection.push(duplicate(item)));await this.item.update({[`system.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.system[collectionName].find((s=>s._id===li.data("item-id"))).system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.system[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!1,secrets:sheetData.editable}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedContent=TextEditor.enrichHTML(sheetData.data.system.content,{async:!1,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.data.data.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.data.data.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?mergeObject(data,updateData):expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const participantUuid=event.currentTarget.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const action=event.currentTarget.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){dragEvent.currentTarget.classList?.remove("drag-over")}async _onDropParticipant(event){const uuid=event.currentTarget.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){if("skill"!==game.items.get(data.id)?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.DriveAutoSkillName")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}groups[index].skills=groups[index].skills.concat([item])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}collection.push(duplicate(item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id")));const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async _onGroupItemDelete(event){const li=event.currentTarget.closest(".item"),ol=li.closest(".item-list.group"),groups=duplicate(this.item.system.groups);groups[Number(ol.dataset.group)].skills.splice(Number(li.dataset.itemIndex),1),await this.item.update({"system.groups":groups})}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.system[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||collection.push(duplicate(item)));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.system[collectionName].find((s=>s._id===li.data("item-id"))).system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}getItem(itemId,collectionName="items"){return this.item.system[collectionName].find((s=>s._id===itemId))}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.system[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:525,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.skills=this.item.system.items.filter((it=>"skill"===it.type)),sheetData.otherItems=this.item.system.items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:value,isEnabled:!0===this.item.system.eras[key]});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:value,isEnabled:!0===this.item.system.eras[key]});return sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:value,isEnabled:!0===this.item.system.eras[key]});return sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("#app-"+appId),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=search]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era&&(filter=!1===item.system.eras[era]||!0===item.system.eras[era]?item.system.eras[era]:item.system.eras[era]?.selected??!1),filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}function listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const[key,value]of Object.entries(COC7.eras))eras.push('<option value="'+key+'">'+game.i18n.localize(value)+"</option>");html.data("packId",app.metadata.id),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}()}))}class CoC7DecaderDSNFaces{construtor(){this.selected=""}setFaces(){let selected=game.user.getFlag("dice-so-nice","appearance")?.global.system;if(selected!==this.selected){let data,destination,sourceDie=game.dice3d.DiceFactory.systems[selected]?.dice.find((d=>"d100"===d.type));void 0===sourceDie&&(sourceDie=game.dice3d.DiceFactory.systems.standard.dice.find((d=>"d100"===d.type)),selected="standard"),void 0!==sourceDie&&(destination=game.dice3d.DiceFactory.systems.standard.dice.findIndex((d=>"dt"===d.type)),data=Object.assign({},sourceDie),data.type="dt",game.dice3d.DiceFactory.systems.standard.dice[destination]=Object.assign(sourceDie.constructor.prototype,data)),this.selected=selected}}}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",action:"click"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-category="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}async _preStep(){await super._preStep(),"goto-game-rules"===this.currentStep.id&&(await this.waitForElement(".category-filter.system.active"),await this.waitForElement(this.currentStep.selector))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les rgles optionnelles.",description:"Activez les rgles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramtres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramtres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Systme de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Systme de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/rgles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/rgles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");if(isNewerVersion(game.system.version,instructionsVersion??"0")){let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ"};void 0===readMe[lang]&&(lang="en"),(await game.packs.get("CoC7.system-doc").getDocument(readMe[lang])).sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)}!async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",(()=>{})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),game.CoC7DecaderDSNFaces=new CoC7DecaderDSNFaces})),Hooks.on("diceSoNiceRollStart",(dice3d=>{game.CoC7DecaderDSNFaces.setFaces()})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener)game.user.id===data.listener&&data.type;else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}if("updateChar"===data.type)CoC7Utilities.updateCharSheets()}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,label:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,label:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(data.flags.core.statusId,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(data.flags.core.statusId,{forceValue:!0})}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",(async(bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("renderChatMessage",((app,html,data)=>CoC7Chat.renderMessageHook(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),tinyMCE.PluginManager.add("CoC7_Editor_OnDrop",(function(editor){editor.on("drop",(event=>CoC7Parser.onEditorDrop(event,editor)))})),CONFIG.TinyMCE.plugins=`CoC7_Editor_OnDrop ${CONFIG.TinyMCE.plugins}`,game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalPageSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data)})),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLE1BQU8sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzNEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLE1BQU8sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzNEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLE1BQU8sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzNEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLE1BQU8sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzNEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLE1BQU8sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzNEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLE1BQU8sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzNEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLEtBQU0sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzFEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUd0QkEsTUFBUTRTLEtBQUs1UyxNQUFNLEtBQU0sQ0FBRXlFLEtBQU1nNUQsa0JBQWtCRSxXQUFZLFVBQzFEditELE1BQU1ZLFNBQ1R2SSxJQUFNbEIsS0FBS2tCLElBQUlBLElBQUt1SSxRQUlsQnZJLElBQU0sR0Fr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LElGNmZBcGxDLE9BQU82SyxHQUFHak0sU0FBV3MwRSxzQkFDckJsekUsT0FBTzZLLEdBQUc2bEQsV0FBYTJpQix3QkFDdkJyekUsT0FBTzZLLEdBQUdGLE9BQVM4b0Usa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvZGljZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmQtYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbmNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9yYW5nZWNvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvZGFtYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3JvbGwtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2xpbmsuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcGFyc2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9zYW5kYXRhLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0aXZlLWVmZmVjdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29udGV4dC1tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXBkYXRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jNy1kaXJlY3RvcnktcGlja2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2Rob2xlaG91c2VfaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2V0dGluZ3MtZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3ItZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL2RhdGEuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9za2lsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2dhbWUtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9vY2N1cGF0aW9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2V0dXAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9za2lsbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvaW5pdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2xvYWQtdGVtcGxhdGVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL3JlZ2lzdGVyLXNldHRpbmdzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL3JlZ2lzdGVyLXNoZWV0cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9oYW5kbGViYXJzLWhlbHBlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRzbi1mYWNlcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy90b29sdGlwcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXRvdXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItdG91cnMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luZGV4LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItYWN0b3Itc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGF1c2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZGljZS1zby1uaWNlLXJvbGwtc3RhcnQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3NvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvYzcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2Vib3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgZ2FtZSwgUm9sbCAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdEaWNlIHtcclxuICBzdGF0aWMgYXN5bmMgcm9sbCAobW9kaWYgPSAwLCByb2xsTW9kZSA9IG51bGwsIGhpZGVEaWNlID0gZmFsc2UpIHtcclxuICAgIGxldCBhbHRlcm5hdGl2ZURpY2UgPSAnJ1xyXG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcclxuICAgICAgaWYgKG1vZGlmIDwgMCkge1xyXG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknKVxyXG4gICAgICB9IGVsc2UgaWYgKG1vZGlmID4gMCkge1xyXG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IHJvbGxcclxuICAgIGlmIChcclxuICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgJiZcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXHJcbiAgICApIHtcclxuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuY3JpdDAxKVxyXG4gICAgfSBlbHNlIGlmIChcclxuICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSAmJlxyXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcclxuICAgICkge1xyXG4gICAgICByb2xsID0gUm9sbC5mcm9tRGF0YShDb0M3RGljZS5mdW1ibGU5OSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcclxuICAgICAgICAnMWR0JyArXHJcbiAgICAgICAgICAoYWx0ZXJuYXRpdmVEaWNlICE9PSAnJ1xyXG4gICAgICAgICAgICA/ICcrMWRvWycgKyBhbHRlcm5hdGl2ZURpY2UgKyAnXSdcclxuICAgICAgICAgICAgOiAnKzFkdCdcclxuICAgICAgICAgICkucmVwZWF0KE1hdGguYWJzKG1vZGlmKSkgK1xyXG4gICAgICAgICAgJysxZDEwJ1xyXG4gICAgICApLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgdW5pdDoge1xyXG4gICAgICAgIHRvdGFsOiAwLFxyXG4gICAgICAgIHJlc3VsdHM6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIHRlbnM6IHtcclxuICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICByZXN1bHRzOiBbXVxyXG4gICAgICB9LFxyXG4gICAgICB0b3RhbDogMCxcclxuICAgICAgcm9sbFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb2xsTW9kZSkgcmVzdWx0LnJvbGxNb2RlID0gcm9sbE1vZGVcclxuICAgIGlmIChoaWRlRGljZSkgcmVzdWx0LmhpZGVEaWNlID0gaGlkZURpY2VcclxuICAgIGZvciAoY29uc3QgZCBvZiByb2xsLmRpY2UpIHtcclxuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XHJcbiAgICAgICAgcmVzdWx0LnRlbnMucmVzdWx0cy5wdXNoKGQudG90YWwpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0LnVuaXQudG90YWwgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXHJcbiAgICAgICAgcmVzdWx0LnVuaXQucmVzdWx0cy5wdXNoKHJlc3VsdC51bml0LnRvdGFsKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobW9kaWYgPCAwKSB7XHJcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID1cclxuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9PT0gMCAmJiByZXN1bHQudGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXHJcbiAgICAgICAgICA/IDEwMFxyXG4gICAgICAgICAgOiBNYXRoLm1heCguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxyXG4gICAgfSBlbHNlIGlmIChyZXN1bHQudW5pdC50b3RhbCA9PT0gMCkge1xyXG4gICAgICBjb25zdCBkaWNlID0gcmVzdWx0LnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcclxuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBkaWNlLmxlbmd0aCA9PT0gMCA/IDEwMCA6IE1hdGgubWluKC4uLmRpY2UpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IE1hdGgubWluKC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXHJcbiAgICB9XHJcbiAgICByZXN1bHQudG90YWwgPSByZXN1bHQudW5pdC50b3RhbCArIHJlc3VsdC50ZW5zLnRvdGFsXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgc2hvd1JvbGxEaWNlM2QgKHJvbGwpIHtcclxuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XHJcbiAgICAgIGNvbnN0IHN5bmNEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3luY0RpY2UzZCcpXHJcblxyXG4gICAgICBjb25zdCBjaGF0RGF0YSA9IHtcclxuICAgICAgICB3aGlzcGVyOiBudWxsLFxyXG4gICAgICAgIGJsaW5kOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXHJcblxyXG4gICAgICBhd2FpdCBnYW1lLmRpY2UzZC5zaG93Rm9yUm9sbChcclxuICAgICAgICByb2xsLFxyXG4gICAgICAgIGdhbWUudXNlcixcclxuICAgICAgICBzeW5jRGljZSxcclxuICAgICAgICBjaGF0RGF0YS53aGlzcGVyLFxyXG4gICAgICAgIGNoYXREYXRhLmJsaW5kXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBjb21iaW5lZFJvbGwgKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMucG9vbCA9IG9wdGlvbnMucG9vbCA/PyB7fVxyXG4gICAgb3B0aW9ucy5wb29sWycwJ10gPSBmYWxzZVxyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMucG9vbCkubWFwKHYgPT4gcGFyc2VJbnQodiwgMTApKVxyXG4gICAgbGV0IHBlbmFsdHlEaWNlID0gTWF0aC5hYnMoTWF0aC5taW4oMCwgTWF0aC5taW4oLi4ua2V5cykpKVxyXG4gICAgbGV0IGJvbnVzRGljZSA9IE1hdGgubWF4KDAsIE1hdGgubWF4KC4uLmtleXMpKVxyXG4gICAgY29uc3QgaGFzRFNOID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZVxyXG5cclxuICAgIGNvbnN0IHBvb2wgPSBbXVxyXG4gICAgcG9vbC5wdXNoKCcxZHQrMWQxMCcpXHJcblxyXG4gICAgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xyXG4gICAgICBwb29sLnB1c2goXHJcbiAgICAgICAgKGhhc0RTTlxyXG4gICAgICAgICAgPyAnKzFkb1snICsgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScpICsgJ10nXHJcbiAgICAgICAgICA6ICcxZHQnXHJcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMocGVuYWx0eURpY2UpKVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBpZiAoYm9udXNEaWNlID4gMCkge1xyXG4gICAgICBwb29sLnB1c2goXHJcbiAgICAgICAgKGhhc0RTTlxyXG4gICAgICAgICAgPyAnKzFkb1snICsgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllQm9udXMnKSArICddJ1xyXG4gICAgICAgICAgOiAnMWR0J1xyXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKGJvbnVzRGljZSkpXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbChwb29sLmpvaW4oJycpKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcclxuICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgZ3JvdXBzOiB7XHJcbiAgICAgICAgYmFzZURpZTogMCxcclxuICAgICAgICBwZW5hbHR5RGljZTogW10sXHJcbiAgICAgICAgYm9udXNEaWNlOiBbXVxyXG4gICAgICB9LFxyXG4gICAgICB1bml0OiAwLFxyXG4gICAgICByb2xsXHJcbiAgICB9XHJcbiAgICBsZXQgYmFzZVNldCA9IGZhbHNlXHJcbiAgICBmb3IgKGNvbnN0IGQgb2Ygcm9sbC5kaWNlKSB7XHJcbiAgICAgIGlmIChkIGluc3RhbmNlb2YgQ09ORklHLkRpY2UudGVybXMudCkge1xyXG4gICAgICAgIGlmICghYmFzZVNldCkge1xyXG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5iYXNlRGllID0gZC50b3RhbFxyXG4gICAgICAgICAgYmFzZVNldCA9IHRydWVcclxuICAgICAgICB9IGVsc2UgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xyXG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5wZW5hbHR5RGljZS5wdXNoKGQudG90YWwpXHJcbiAgICAgICAgICBwZW5hbHR5RGljZS0tXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYm9udXNEaWNlLnB1c2goZC50b3RhbClcclxuICAgICAgICAgIGJvbnVzRGljZS0tXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3VsdC51bml0ID0gZC50b3RhbCA9PT0gMTAgPyAwIDogZC50b3RhbFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cclxuXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnBvb2wpIHtcclxuICAgICAgb3V0cHV0W2tleV0gPSB7XHJcbiAgICAgICAgdW5pdDoge1xyXG4gICAgICAgICAgdG90YWw6IHJlc3VsdC51bml0LFxyXG4gICAgICAgICAgcmVzdWx0czogW3Jlc3VsdC51bml0XVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGVuczoge1xyXG4gICAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgICByZXN1bHRzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgcm9sbFxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG1vZGlmID0gcGFyc2VJbnQoa2V5LCAxMClcclxuICAgICAgbGV0IG1vZGlmaWVyID0gbW9kaWZcclxuICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2gocmVzdWx0Lmdyb3Vwcy5iYXNlRGllKVxyXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKG1vZGlmaWVyKTsgbW9kaWZpZXIgPCAwOyBtb2RpZmllcisrKSB7XHJcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2goXHJcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlW21vZGlmaWVyICsgb2Zmc2V0XVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IG1vZGlmaWVyOyBtb2RpZmllciA+IDA7IG1vZGlmaWVyLS0pIHtcclxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcclxuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYm9udXNEaWNlW01hdGguYWJzKG1vZGlmaWVyIC0gb2Zmc2V0KV1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1vZGlmIDwgMCkge1xyXG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPVxyXG4gICAgICAgICAgb3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCAmJiBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcclxuICAgICAgICAgICAgPyAxMDBcclxuICAgICAgICAgICAgOiBNYXRoLm1heCguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXHJcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnN0IGRpY2UgPSBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuZmlsdGVyKHQgPT4gdCA+IDApXHJcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnRvdGFsID0gTWF0aC5taW4oLi4ub3V0cHV0W2tleV0udGVucy5yZXN1bHRzKVxyXG4gICAgICB9XHJcbiAgICAgIG91dHB1dFtrZXldLnRvdGFsID0gb3V0cHV0W2tleV0udW5pdC50b3RhbCArIG91dHB1dFtrZXldLnRlbnMudG90YWxcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXRcclxuICB9XHJcblxyXG4gIC8vIFByZWRldGVybWluZWQgdmFsdWUgb2YgZGljZSwgdXNlZCBvbmx5IGZvciBERVYgYW5kIHRlc3QgcHVycG9zZXNcclxuICBzdGF0aWMgZnVtYmxlOTkgPSB7XHJcbiAgICBjbGFzczogJ1JvbGwnLFxyXG4gICAgb3B0aW9uczoge30sXHJcbiAgICBkaWNlOiBbXSxcclxuICAgIGZvcm11bGE6ICcxZHQgKyAxZDEwJyxcclxuICAgIHRlcm1zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzczogJ0NvQzdEZWNhZGVyRGllJyxcclxuICAgICAgICBvcHRpb25zOiB7fSxcclxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXHJcbiAgICAgICAgbnVtYmVyOiAxLFxyXG4gICAgICAgIGZhY2VzOiAxMCxcclxuICAgICAgICBtb2RpZmllcnM6IFtdLFxyXG4gICAgICAgIHJlc3VsdHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0OiA5LFxyXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzczogJ09wZXJhdG9yVGVybScsXHJcbiAgICAgICAgb3B0aW9uczoge30sXHJcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxyXG4gICAgICAgIG9wZXJhdG9yOiAnKydcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzOiAnRGllJyxcclxuICAgICAgICBvcHRpb25zOiB7fSxcclxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXHJcbiAgICAgICAgbnVtYmVyOiAxLFxyXG4gICAgICAgIGZhY2VzOiAxMCxcclxuICAgICAgICBtb2RpZmllcnM6IFtdLFxyXG4gICAgICAgIHJlc3VsdHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0OiA5LFxyXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICB0b3RhbDogOTksXHJcbiAgICBldmFsdWF0ZWQ6IHRydWVcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcml0MDEgPSB7XHJcbiAgICBjbGFzczogJ1JvbGwnLFxyXG4gICAgb3B0aW9uczoge30sXHJcbiAgICBkaWNlOiBbXSxcclxuICAgIGZvcm11bGE6ICcxZHQgKyAxZDEwJyxcclxuICAgIHRlcm1zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzczogJ0NvQzdEZWNhZGVyRGllJyxcclxuICAgICAgICBvcHRpb25zOiB7fSxcclxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXHJcbiAgICAgICAgbnVtYmVyOiAxLFxyXG4gICAgICAgIGZhY2VzOiAxMCxcclxuICAgICAgICBtb2RpZmllcnM6IFtdLFxyXG4gICAgICAgIHJlc3VsdHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0OiAxMCxcclxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxyXG4gICAgICAgIG9wdGlvbnM6IHt9LFxyXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcclxuICAgICAgICBvcGVyYXRvcjogJysnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzczogJ0RpZScsXHJcbiAgICAgICAgb3B0aW9uczoge30sXHJcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxyXG4gICAgICAgIG51bWJlcjogMSxcclxuICAgICAgICBmYWNlczogMTAsXHJcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcclxuICAgICAgICByZXN1bHRzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdDogMSxcclxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgdG90YWw6IDEsXHJcbiAgICBldmFsdWF0ZWQ6IHRydWVcclxuICB9XHJcbn1cclxuIiwiLy8gTmFtZXNwYWNlIENPQzcgQ29uZmlndXJhdGlvbiBWYWx1ZXNcclxuZXhwb3J0IGNvbnN0IENPQzcgPSB7fVxyXG5cclxuLy8gQ3VzdG9tIGNoYXRNZXNzYWdlXHJcbi8vIENPTkZJRy5DaGF0TWVzc2FnZS50ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2hhdC1tZXNzYWdlLmh0bWwnO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBzZXQgb2YgRXJhcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXHJcbiAqIEB0eXBlIHtPYmplY3R9XHJcbiAqL1xyXG5DT0M3LmVyYXMgPSB7XHJcbiAgbnZjdDogJ0NvQzcuRXJhTnZjdCcsXHJcbiAgZHJrYTogJ0NvQzcuRXJhRHJrYScsXHJcbiAgZGR0czogJ0NvQzcuRXJhRGR0cycsXHJcbiAgZ2xpdDogJ0NvQzcuRXJhR2xpdCcsXHJcbiAgMTkyMDogJ0NvQzcuRXJhMTkyMCcsXHJcbiAgcHVscDogJ0NvQzcuRXJhUHVscCcsXHJcbiAgbWRybjogJ0NvQzcuRXJhTWRybidcclxufVxyXG5cclxuQ09DNy5jaGFyYWN0ZXJpc3RpY3MgPSB7XHJcbiAgc3RyOiAnQ29DNy5DaGFyYWNTdHInLFxyXG4gIGNvbjogJ0NvQzcuQ2hhcmFjQ29uJyxcclxuICBzaXo6ICdDb0M3LkNoYXJhY1NpeicsXHJcbiAgZGV4OiAnQ29DNy5DaGFyYWNEZXgnLFxyXG4gIGFwcDogJ0NvQzcuQ2hhcmFjQXBwJyxcclxuICBpbnQ6ICdDb0M3LkNoYXJhY0ludCcsXHJcbiAgcG93OiAnQ29DNy5DaGFyYWNQb3cnLFxyXG4gIGVkdTogJ0NvQzcuQ2hhcmFjRWR1J1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHNldCBvZiBTa2lsbHMgYXR0cmlidXRlcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXHJcbiAqIEB0eXBlIHtPYmplY3R9XHJcbiAqL1xyXG5DT0M3LnNraWxsUHJvcGVydGllcyA9IHtcclxuICBub2FkanVzdG1lbnRzOiAnQ29DNy5Ta2lsbE5vQWRqdXN0bWVudHMnLFxyXG4gIG5veHBnYWluOiAnQ29DNy5Ta2lsbE5vWHBHYWluJyxcclxuICBzcGVjaWFsOiAnQ29DNy5Ta2lsbFNwZWNpYWwnLFxyXG4gIHJhcml0eTogJ0NvQzcuU2tpbGxSYXJpdHknLFxyXG4gIHB1c2g6ICdDb0M3LlNraWxsUHVzaCcsXHJcbiAgY29tYmF0OiAnQ29DNy5Ta2lsbENvbWJhdCcsXHJcbiAgZmlnaHRpbmc6ICdDb0M3LlNraWxsRmlnaHRpbmcnLFxyXG4gIGZpcmVhcm06ICdDb0M3LlNraWxsRmlyZWFybSdcclxufVxyXG5cclxuQ09DNy53ZWFwb25Qcm9wZXJ0aWVzID0ge1xyXG4gIG1lbGVlOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuTWVsZWUnLFxyXG4gIHJuZ2Q6ICdDb0M3LldlYXBvblJuZ2QnLFxyXG4gIG1udnI6ICdDb0M3LldlYXBvblByb3BlcnlNYW5ldXZlcicsXHJcbiAgdGhyb3duOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuVGhyb3duJyxcclxuICBzaG90Z3VuOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuU2hvdGd1bicsXHJcbiAgZGJybDogJ0NvQzcuV2VhcG9uRGJybCcsXHJcbiAgaW1wbDogJ0NvQzcuV2VhcG9uSW1wbCcsXHJcbiAgYnJzdDogJ0NvQzcuV2VhcG9uQnJzdCcsXHJcbiAgYXV0bzogJ0NvQzcuV2VhcG9uQXV0bycsXHJcbiAgYWhkYjogJ0NvQzcuV2VhcG9uQWhkYicsXHJcbiAgYWRkYjogJ0NvQzcuV2VhcG9uQWRkYicsXHJcbiAgc2xudDogJ0NvQzcuV2VhcG9uU2xudCcsXHJcbiAgc3BjbDogJ0NvQzcuV2VhcG9uU3BjbCcsXHJcbiAgbW9udDogJ0NvQzcuV2VhcG9uTW9udCcsXHJcbiAgYmxzdDogJ0NvQzcuV2VhcG9uQmxzdCcsXHJcbiAgc3R1bjogJ0NvQzcuV2VhcG9uU3R1bicsXHJcbiAgcmFyZTogJ0NvQzcuV2VhcG9uUmFyZScsXHJcbiAgYnVybjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LkJ1cm4nXHJcbn1cclxuXHJcbkNPQzcuc3BlbGxQcm9wZXJ0aWVzID0ge1xyXG4gIGNhbGw6ICdDb0M3LkNhbGxTcGVsbCcsXHJcbiAgZGlzbWlzczogJ0NvQzcuRGlzbWlzc1NwZWxsJyxcclxuICBjb250YWN0OiAnQ29DNy5Db250YWN0U3BlbGwnLFxyXG4gIHN1bW1vbjogJ0NvQzcuU3VtbW9uU3BlbGwnLFxyXG4gIGJpbmQ6ICdDb0M3LkJpbmRTcGVsbCcsXHJcbiAgZW5jaGFudG1lbnQ6ICdDb0M3LkVuY2hhbnRtZW50U3BlbGwnLFxyXG4gIGdhdGU6ICdDb0M3LkdhdGVTcGVsbCcsXHJcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRTcGVsbCdcclxufVxyXG5cclxuQ09DNy5ib29rVHlwZSA9IHtcclxuICBteXRob3M6ICdDb0M3Lk15dGhvc0Jvb2snLFxyXG4gIG9jY3VsdDogJ0NvQzcuT2NjdWx0Qm9vaycsXHJcbiAgb3RoZXI6ICdDb0M3Lk90aGVyJ1xyXG59XHJcblxyXG5DT0M3LnRhbGVudFR5cGUgPSB7XHJcbiAgcGh5c2ljYWw6ICdDb0M3LlBoeXNpY2FsVGFsZW50JyxcclxuICBtZW50YWw6ICdDb0M3Lk1lbnRhbFRhbGVudCcsXHJcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRUYWxlbnQnLFxyXG4gIG1pc2NlbGxhbmVvdXM6ICdDb0M3Lk1pc2NlbGxhbmVvdXNUYWxlbnQnLFxyXG4gIGJhc2ljOiAnQ29DNy5CYXNpY1RhbGVudCcsXHJcbiAgaW5zYW5lOiAnQ29DNy5JbnNhbmVUYWxlbnQnLFxyXG4gIG90aGVyOiAnQ29DNy5PdGhlclRhbGVudCdcclxufVxyXG5cclxuQ09DNy5zdGF0dXNUeXBlID0ge1xyXG4gIG1hbmlhOiAnQ29DNy5NYW5pYScsXHJcbiAgcGhvYmlhOiAnQ29DNy5QaG9iaWEnXHJcbn1cclxuXHJcbkNPQzcub2NjdXBhdGlvblByb3BlcnRpZXMgPSB7XHJcbiAgY2xhc3NpYzogJ0NvQzcuQ2xhc3NpYycsXHJcbiAgbG92ZWNyYWZ0aWFuOiAnQ29DNy5Mb3ZlY3JhZnRpYW4nLFxyXG4gIG1vZGVybjogJ0NvQzcuTW9kZXJuJyxcclxuICBwdWxwOiAnQ29DNy5QdWxwJ1xyXG59XHJcblxyXG5DT0M3LmZvcm11bGEgPSB7fVxyXG5cclxuQ09DNy5mb3JtdWxhLmFjdG9yID0ge1xyXG4gICdAU1RSJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxyXG4gICdAQ09OJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxyXG4gICdAU0laJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxyXG4gICdAREVYJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxyXG4gICdAQVBQJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxyXG4gICdASU5UJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxyXG4gICdAUE9XJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxyXG4gICdARURVJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXHJcbn1cclxuXHJcbkNPQzcuZm9ybXVsYS5hY3RvcnNoZWV0ID0ge1xyXG4gICdAU1RSJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxyXG4gICdAQ09OJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxyXG4gICdAU0laJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxyXG4gICdAREVYJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxyXG4gICdAQVBQJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxyXG4gICdASU5UJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxyXG4gICdAUE9XJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxyXG4gICdARURVJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXHJcbn1cclxuXHJcbkNPQzcuc3RhdHVzID0ge1xyXG4gIHRlbXBvSW5zYW5lOiAndGVtcG9JbnNhbmUnLFxyXG4gIGluZGVmSW5zYW5lOiAnaW5kZWZJbnNhbmUnLFxyXG4gIHVuY29uc2Npb3VzOiAndW5jb25zY2lvdXMnLFxyXG4gIGNyaXRpY2FsV291bmRzOiAnY3JpdGljYWxXb3VuZHMnLFxyXG4gIGR5aW5nOiAnZHlpbmcnLFxyXG4gIHByb25lOiAncHJvbmUnLFxyXG4gIGRlYWQ6ICdkZWFkJ1xyXG59XHJcblxyXG5DT0M3Lm5ld0Jvb2tOYW1lID0gJ0NvQzcuTmV3Qm9va05hbWUnXHJcbkNPQzcubmV3U2tpbGxOYW1lID0gJ0NvQzcuTmV3U2tpbGxOYW1lJ1xyXG5DT0M3Lm5ld1NwZWxsTmFtZSA9ICdDb0M3Lk5ld1NwZWxsTmFtZSdcclxuQ09DNy5uZXdJdGVtTmFtZSA9ICdDb0M3Lk5ld0l0ZW1OYW1lJ1xyXG5DT0M3Lm5ld1dlYXBvbk5hbWUgPSAnQ29DNy5OZXdXZWFwb25OYW1lJ1xyXG5cclxuQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwgPSAnQ29DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwnXHJcblxyXG5DT0M3LmRvZGdlU2tpbGxOYW1lID0gJ0NvQzcuRG9kZ2VTa2lsbE5hbWUnXHJcbkNPQzcuY3JlZGl0UmF0aW5nU2tpbGxOYW1lID0gJ0NvQzcuQ3JlZGl0UmF0aW5nU2tpbGxOYW1lJ1xyXG5DT0M3LkN0aHVsaHVNeXRob3NOYW1lID0gJ0NvQzcuQ3RodWxodU15dGhvc05hbWUnXHJcbkNPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcclxuQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcclxuXHJcbkNPQzcuY29tYmF0Q2FyZHMgPSB7XHJcbiAgZmlnaHRCYWNrOiAnQ29DNy5GaWdodEJhY2snLFxyXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXHJcbiAgbWFuZXV2ZXI6ICdDb0M3Lk1hbmV1dmVyJyxcclxuICBub1Jlc3BvbnNlOiAnQ29DNy5Ob1Jlc3BvbnNlJ1xyXG59XHJcbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBEaWFsb2csIGR1cGxpY2F0ZSwgRm9sZGVyLCBmcm9tVXVpZCwgZ2FtZSwgZ2V0RG9jdW1lbnRDbGFzcywgSG9va3MsIE1hY3JvLCBSb2xsLCBUb2tlbiwgdWkgKi9cclxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcclxuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vYXBwcy9yb2xsLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN1V0aWxpdGllcyB7XHJcbiAgLy8gc3RhdGljIHRlc3QoZXZlbnQpe1xyXG4gIC8vICAgaWYoIGV2ZW50LnNoaWZ0S2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gU0hJRlQgdXRpbGl0aWVzJyk7XHJcbiAgLy8gICBlbHNlIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnSGVsbG8gZnJvbSB1dGlsaXRpZXMnKTtcclxuICAvLyAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCk7XHJcbiAgLy8gICBsZXQgYWN0b3I7XHJcbiAgLy8gICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl07XHJcbiAgLy8gICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKTtcclxuXHJcbiAgLy8gIGFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyk7XHJcbiAgLy8gfVxyXG5cclxuICBzdGF0aWMgaXNGb3JtdWxhICh4KSB7XHJcbiAgICBpZiAodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcclxuICAgIGlmICghaXNOYU4oTnVtYmVyKHgpKSkgcmV0dXJuIGZhbHNlXHJcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh4KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIFBhcnNlQ2hhdEVudHJ5IChodG1sLCBjb250ZW50KSB7XHJcbiAgICBjb25zdCByZWdYID0gLyhcXFMrKS9nXHJcbiAgICBjb25zdCB0ZXJtcyA9IGNvbnRlbnQubWF0Y2gocmVnWClcclxuICAgIGlmIChcclxuICAgICAgdGVybXNbMF0/LnRvTG93ZXJDYXNlKCkubWF0Y2goL15cXC9yKG9sbCk/JC8pICYmXHJcbiAgICAgIHRlcm1zWzFdPy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJzFkJScpXHJcbiAgICApIHtcclxuICAgICAgLy8gRGVsYXkgY2FsbGluZyBmdW5jdGlvbiB0byBwcmV2ZW50IGNoYXRtZXNzYWdlIGtleSBkb3duIHRyaWdnZXJpbmcgZGVmYXVsdFxyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBDb0M3VXRpbGl0aWVzLl9FeGVjQ29tbWFuZChjb250ZW50KVxyXG4gICAgICB9LCAyMDApXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIF9FeGVjQ29tbWFuZCAoY29udGVudCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbnRlbnRcclxuICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgLnNwbGl0KCcgJylcclxuICAgICAgPy5qb2luKCcnKVxyXG4gICAgICA/LnJlcGxhY2UoL1xcL3Iob2xsKT8xZCUvLCAnJylcclxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgbGV0IGVzY2FwZWQgPSBvcHRpb25zXHJcbiAgICAgIGxldCB0aHJlc2hvbGRcclxuICAgICAgbGV0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcclxuICAgICAgbGV0IGRpY2VNb2RpZmllciA9IDBcclxuICAgICAgbGV0IGFzayA9IGZhbHNlXHJcbiAgICAgIGxldCBmbGF0RGljZU1vZGlmaWVyXHJcbiAgICAgIGxldCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcclxuICAgICAgY29uc3QgdGhyZXNob2xkU3RyID0gZXNjYXBlZC5tYXRjaCgvW14oXSsoPz1cXCkpLylcclxuICAgICAgaWYgKHRocmVzaG9sZFN0ciAmJiB0aHJlc2hvbGRTdHIubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHRocmVzaG9sZFN0clswXSlcclxuICAgICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIHRocmVzaG9sZFN0cikge1xyXG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgKCR7bWF0Y2h9KWAsICcnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBkaWZmaWN1bHR5U3RyID0gZXNjYXBlZC5tYXRjaCgvW15bXSsoPz1cXF0pLylcclxuICAgICAgaWYgKGRpZmZpY3VsdHlTdHIgJiYgZGlmZmljdWx0eVN0ci5sZW5ndGgpIHtcclxuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkaWZmaWN1bHR5U3RyWzBdKVxyXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZGlmZmljdWx0eVN0cikge1xyXG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgWyR7bWF0Y2h9XWAsICcnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoZXNjYXBlZC5pbmNsdWRlcygnPycpKSB7XHJcbiAgICAgICAgYXNrID0gdHJ1ZVxyXG4gICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoJz8nLCAnJylcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWlzTmFOKE51bWJlcihlc2NhcGVkKSkpIGRpY2VNb2RpZmllciA9IE51bWJlcihlc2NhcGVkKVxyXG5cclxuICAgICAgaWYgKGFzaykge1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZ09wdGlvbnMgPSB7XHJcbiAgICAgICAgICB0aHJlc2hvbGQsXHJcbiAgICAgICAgICBtb2RpZmllcjogZGljZU1vZGlmaWVyLFxyXG4gICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoZGlhbG9nT3B0aW9ucylcclxuICAgICAgICBpZiAodXNhZ2UpIHtcclxuICAgICAgICAgIGRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxyXG4gICAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcclxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcclxuICAgICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXHJcbiAgICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXHJcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxyXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcclxuICAgICAgaWYgKHRocmVzaG9sZCkgY2hlY2sucmF3VmFsdWUgPSAhaXNOYU4odGhyZXNob2xkKSA/IHRocmVzaG9sZCA6IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxyXG4gICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xyXG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxyXG4gICAgICAgIGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXHJcbiAgICAgICkgLy8gUkVGQUNUT1JJTkcgKDIpICsrKyB3aHkgc3BlYWtlci5zY2VuZS5cclxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXHJcbiAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcclxuICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcclxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXHJcbiAgICB9XHJcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XHJcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm9zKCdEbyBzb21lIHN0dWZmJylcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRBY3RvckZyb21TdHJpbmcgKGFjdG9yU3RyaW5nKSB7XHJcbiAgICBsZXQgYWN0b3JcclxuXHJcbiAgICAvLyBUb2tlbiBpcyBiZXR0ZXIgdGhhbiBhY3Rvci5cclxuICAgIC8vIENhc2UgMSA6IHRyeWluZyB3aXRoIElELlxyXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cclxuICAgIGlmIChnYW1lLmFjdG9ycy50b2tlbnNbYWN0b3JTdHJpbmddKSByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXVxyXG4gICAgLy8gQ2FzZSAxLjIgOiBhY3RvciBmb3VuZC5cclxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxyXG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcclxuXHJcbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXHJcbiAgICAvLyBDYXNlIDIuMSA6IHRva2VuIGZvdW5kLlxyXG4gICAgYWN0b3IgPSBPYmplY3QudmFsdWVzKGdhbWUuYWN0b3JzLnRva2VucykuZmluZCh0ID0+IHtcclxuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH0pXHJcbiAgICBpZiAoIWFjdG9yKSB7XHJcbiAgICAgIC8vIENhc2UgMi4yIDogYWN0b3IgZm91bmQuXHJcbiAgICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZmluZChhID0+IHtcclxuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoYWN0b3IpIHJldHVybiBhY3RvclxyXG5cclxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcclxuICAgIC8vIGlmIChjcmVhdHVyZS5pbmNsdWRlcygnLicpKSB7XHJcbiAgICAvLyAgIGNvbnN0IFssIGFjdG9ySWRdID0ga2V5LnNwbGl0KCcuJylcclxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gTm8gam95XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljTmFtZXMgKGNoYXIpIHtcclxuICAgIGNvbnN0IGNoYXJLZXkgPSBjaGFyLnRvTG93ZXJDYXNlKClcclxuXHJcbiAgICBzd2l0Y2ggKGNoYXJLZXkpIHtcclxuICAgICAgY2FzZSAnc3RyJzpcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNUUicpLFxyXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlN0cmVuZ3RoJylcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ2Nvbic6XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcclxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnc2l6JzpcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNJWicpLFxyXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnZGV4JzpcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkRFWCcpLFxyXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkRleHRlcml0eScpXHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdhcHAnOlxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXHJcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQXBwZWFyYW5jZScpXHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdpbnQnOlxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSU5UJyksXHJcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ3Bvdyc6XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5QT1cnKSxcclxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdlZHUnOlxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXHJcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJylcclxuICAgICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcclxuICAgICAgICAgIGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLnRlbXBsYXRlcy5jaGFyYWN0ZXJpc3RpY3MuY2hhcmFjdGVyaXN0aWNzXHJcbiAgICAgICAgKSkge1xyXG4gICAgICAgICAgaWYgKGNoYXJLZXkgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNvbnZlcnREaWZmaWN1bHR5IChkaWZmaWN1bHR5KSB7XHJcbiAgICBpZiAoU3RyaW5nKGRpZmZpY3VsdHkpID09PSAnMCcpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XHJcbiAgICBpZiAoIWlzTmFOKE51bWJlcihkaWZmaWN1bHR5KSkpIHJldHVybiBOdW1iZXIoZGlmZmljdWx0eSlcclxuXHJcbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcclxuICAgICAgY2FzZSAnPyc6XHJcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93blxyXG4gICAgICBjYXNlICcrJzpcclxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXHJcbiAgICAgIGNhc2UgJysrJzpcclxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXHJcbiAgICAgIGNhc2UgJysrKyc6XHJcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2tpbGxDaGVja01hY3JvIChza2lsbCwgZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxyXG4gICAgbGV0IGFjdG9yXHJcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cclxuICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpIC8vIE5vIG5lZWQgdG8gZmlsbCBhY3RvciB0b2tlblxyXG5cclxuICAgIGlmICghYWN0b3IpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBhY3Rvci5za2lsbENoZWNrKHNraWxsLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcclxuICB9XHJcblxyXG4gIHN0YXRpYyB3ZWFwb25DaGVja01hY3JvICh3ZWFwb24sIGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXHJcbiAgICBsZXQgYWN0b3JcclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxyXG4gICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICBpZiAoc3BlYWtlci5zY2VuZSAmJiBzcGVha2VyLnRva2VuKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXHJcbiAgICAgICAgY29uc3QgYmFzZUFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc3BlYWtlci5zY2VuZSlcclxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcclxuXHJcbiAgICAgICAgY29uc3QgQWN0b3JDbGFzcyA9IGdldERvY3VtZW50Q2xhc3MoJ0FjdG9yJylcclxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XHJcbiAgICAgICAgICBwYXJlbnQ6IHRva2VuXHJcbiAgICAgICAgfSlcclxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcclxuICAgICAgfSBlbHNlIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0FjdG9yQXZhaWxhYmxlJykpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcclxuICAgIGF3YWl0IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQsIHsgdGhyZXNob2xkIH0pXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTWFjcm8gKGJhciwgZGF0YSwgc2xvdCkge1xyXG4gICAgaWYgKGRhdGEudHlwZSAhPT0gJ0l0ZW0nKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YS51dWlkKVxyXG5cclxuICAgIGlmICghaXRlbSkge1xyXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIGlmICghKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpICYmICEoaXRlbS50eXBlID09PSAnc2tpbGwnKSkge1xyXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9JbmNvcnJlY3RUeXBlJylcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb21tYW5kID0gJydcclxuXHJcbiAgICBpZiAoaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xyXG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Mud2VhcG9uQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIHV1aWQ6JyR7ZGF0YS51dWlkfSd9LCBldmVudCk7YFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xyXG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vR2xvYmFsU3BlYycpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy5za2lsbENoZWNrKHtuYW1lOicke2l0ZW0ubmFtZX0nLCB1dWlkOicke2RhdGEudXVpZH0nfSwgZXZlbnQpO2BcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29tbWFuZCAhPT0gJycpIHtcclxuICAgICAgLy8gQ3JlYXRlIHRoZSBtYWNybyBjb21tYW5kXHJcbiAgICAgIGxldCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXHJcbiAgICAgICAgbSA9PiBtLm5hbWUgPT09IGl0ZW0ubmFtZSAmJiBtLmNvbW1hbmQgPT09IGNvbW1hbmRcclxuICAgICAgKVxyXG4gICAgICBpZiAoIW1hY3JvKSB7XHJcbiAgICAgICAgbWFjcm8gPSBhd2FpdCBNYWNyby5jcmVhdGUoe1xyXG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgdHlwZTogJ3NjcmlwdCcsXHJcbiAgICAgICAgICBpbWc6IGl0ZW0uaW1nLFxyXG4gICAgICAgICAgY29tbWFuZFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgZ2FtZS51c2VyLmFzc2lnbkhvdGJhck1hY3JvKG1hY3JvLCBzbG90KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVEZXZQaGFzZSAodG9nZ2xlKSB7XHJcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnLCB0b2dnbGUpXHJcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXHJcbiAgICAgIHRvZ2dsZVxyXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRW5hYmxlZCcpXHJcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpXHJcbiAgICApXHJcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcclxuICAgICAgdHlwZTogJ3VwZGF0ZUNoYXInXHJcbiAgICB9KVxyXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVDaGFyQ3JlYXRpb24gKHRvZ2dsZSkge1xyXG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcsIHRvZ2dsZSlcclxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgdG9nZ2xlXHJcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpXHJcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKVxyXG4gICAgKVxyXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XHJcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xyXG4gICAgfSlcclxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXHJcbiAgICBIb29rcy5jYWxsKCd0b2dnbGVDaGFyQ3JlYXRpb24nLCB0b2dnbGUpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZ2V0VGFyZ2V0ICgpIHtcclxuICAgIGNvbnN0IHVzZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLmFjdGl2ZSlcclxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzXHJcbiAgICBsZXQgY2hlY2tPcHRpb25zID0gYDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiQ09DQ2hlY2tBbGxQQ1wiIGlkPVwiQ09DQ2hlY2tBbGxQQ1wiPlxcblxyXG4gICAgPGxhYmVsIGZvcj1cIkNPQ0NoZWNrQWxsUENcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5hbGxBY3RvcnMnKX08L2xhYmVsPmBcclxuICAgIGNvbnN0IHBsYXllclRva2VuSWRzID0gdXNlcnNcclxuICAgICAgLm1hcCh1ID0+IHUuY2hhcmFjdGVyPy5pZClcclxuICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgY29uc3Qgc2VsZWN0ZWRQbGF5ZXJJZHMgPSBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubWFwKHRva2VuID0+IHtcclxuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmlkXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEJ1aWxkIGNoZWNrYm94IGxpc3QgZm9yIGFsbCBhY3RpdmUgcGxheWVyc1xyXG4gICAgYWN0b3JzLmZvckVhY2goYWN0b3IgPT4ge1xyXG4gICAgICBjb25zdCBjaGVja2VkID1cclxuICAgICAgICAoc2VsZWN0ZWRQbGF5ZXJJZHMuaW5jbHVkZXMoYWN0b3IuaWQpIHx8XHJcbiAgICAgICAgICBwbGF5ZXJUb2tlbklkcy5pbmNsdWRlcyhhY3Rvci5pZCkpICYmXHJcbiAgICAgICAgJ2NoZWNrZWQnXHJcbiAgICAgIGNoZWNrT3B0aW9ucyArPSBgXHJcbiAgICAgPGJyPlxyXG4gICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiJHthY3Rvci5pZH1cIiBpZD1cIiR7YWN0b3IuaWR9XCIgdmFsdWU9XCIke2FjdG9yLm5hbWV9XCIgJHtjaGVja2VkfT5cXG5cclxuICAgICA8bGFiZWwgZm9yPVwiJHthY3Rvci5pZH1cIj4ke2FjdG9yLm5hbWV9PC9sYWJlbD5cclxuICAgICAgIGBcclxuICAgIH0pXHJcblxyXG4gICAgbmV3IERpYWxvZyh7XHJcbiAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuZHJlYW1pbmcnKX1gLFxyXG4gICAgICBjb250ZW50OiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgJ0NvQzcucmVzdFRhcmdldHMnXHJcbiAgICAgICl9OiAke2NoZWNrT3B0aW9uc30gPGJyPmAsXHJcbiAgICAgIGJ1dHRvbnM6IHtcclxuICAgICAgICB3aGlzcGVyOiB7XHJcbiAgICAgICAgICBsYWJlbDogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnN0YXJ0UmVzdCcpfWAsXHJcbiAgICAgICAgICBjYWxsYmFjazogYXN5bmMgaHRtbCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldHMgPSBbXVxyXG4gICAgICAgICAgICBsZXQgYWxsID0gZmFsc2VcclxuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBodG1sLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKVxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdXNlcnMpIHtcclxuICAgICAgICAgICAgICBpZiAodXNlci5uYW1lID09PSAnQ09DQ2hlY2tBbGxQQycgJiYgdXNlci5jaGVja2VkKSBhbGwgPSB0cnVlXHJcbiAgICAgICAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCB8fCBhbGwpIHRhcmdldHMucHVzaCh1c2VyLmlkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMuc3RhcnRSZXN0KHRhcmdldHMpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KS5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBzdGFydFJlc3QgKHRhcmdldHMpIHtcclxuICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHJldHVyblxyXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGFjdG9yID0+IHRhcmdldHMuaW5jbHVkZXMoYWN0b3IuaWQpKVxyXG4gICAgbGV0IGNoYXRDb250ZW50ID0gYDxpPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9Li4uPC9pPjxicj5gXHJcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xyXG4gICAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcclxuICAgICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcykge1xyXG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RhbGVudCcpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnF1aWNrSGVhbGVyJyl9YCkge1xyXG4gICAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzQ3JpdGljYWxXb3VuZHMgPVxyXG4gICAgICAgICAgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSAmJlxyXG4gICAgICAgICAgYWN0b3IuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxyXG4gICAgICAgIGNvbnN0IGRhaWx5U2FuaXR5TG9zcyA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3NcclxuICAgICAgICBjb25zdCBocFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWVcclxuICAgICAgICBjb25zdCBocE1heCA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxyXG4gICAgICAgIGNvbnN0IG1wVmFsdWUgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxyXG4gICAgICAgIGNvbnN0IG1wTWF4ID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4XHJcbiAgICAgICAgY29uc3QgcG93ID0gYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWVcclxuICAgICAgICBjaGF0Q29udGVudCA9IGNoYXRDb250ZW50ICsgYDxicj48Yj4ke2FjdG9yLm5hbWV9LiA8L2I+YFxyXG4gICAgICAgIGlmIChocFZhbHVlIDwgaHBNYXgpIHtcclxuICAgICAgICAgIGlmIChpc0NyaXRpY2FsV291bmRzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNoYXRDb250ZW50ID1cclxuICAgICAgICAgICAgICBjaGF0Q29udGVudCArXHJcbiAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya3JlZFwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgJ0NvQzcuaGFzQ3JpdGljYWxXb3VuZHMnXHJcbiAgICAgICAgICAgICAgKX0uIDwvYj5gXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgaGVhbEFtb3VudCA9IDFcclxuICAgICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknKSkge1xyXG4gICAgICAgICAgICAgIGhlYWxBbW91bnQgPSAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHF1aWNrSGVhbGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgaGVhbEFtb3VudCsrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaGVhbEFtb3VudCA9IE1hdGgubWluKGhlYWxBbW91bnQsIGhwTWF4IC0gaHBWYWx1ZSlcclxuICAgICAgICAgICAgaWYgKGhlYWxBbW91bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICBjaGF0Q29udGVudCA9XHJcbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXHJcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgICAnQ29DNy5oZWFsdGhSZWNvdmVyZWQnXHJcbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjaGF0Q29udGVudCA9XHJcbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXHJcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgJ0NvQzcucHVscEhlYWx0aFJlY292ZXJlZCcsXHJcbiAgICAgICAgICAgICAgICAgIHsgbnVtYmVyOiBoZWFsQW1vdW50IH1cclxuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzpcclxuICAgICAgICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlICsgaGVhbEFtb3VudFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGFpbHlTYW5pdHlMb3NzID4gMCkge1xyXG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxyXG4gICAgICAgICAgICBjaGF0Q29udGVudCArXHJcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICAgJ0NvQzcuZGFpbHlTYW5Mb3NzUmVzdGFydGVkJ1xyXG4gICAgICAgICAgICApfS48L2I+YFxyXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcclxuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwLFxyXG4gICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnOiBNYXRoLmZsb29yKGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBob3VycyA9IDdcclxuICAgICAgICBpZiAoaG91cnMgPiAwICYmIG1wVmFsdWUgPCBtcE1heCkge1xyXG4gICAgICAgICAgbGV0IG1hZ2ljQW1vdW50ID0gaG91cnMgKiBNYXRoLmNlaWwocG93IC8gMTAwKVxyXG4gICAgICAgICAgbWFnaWNBbW91bnQgPSBNYXRoLm1pbihtYWdpY0Ftb3VudCwgbXBNYXggLSBtcFZhbHVlKVxyXG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxyXG4gICAgICAgICAgICBjaGF0Q29udGVudCArXHJcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAgICdDb0M3Lm1hZ2ljUG9pbnRzUmVjb3ZlcmVkJ1xyXG4gICAgICAgICAgICApfTogJHttYWdpY0Ftb3VudH0uPC9iPmBcclxuICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6XHJcbiAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgKyBtYWdpY0Ftb3VudFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xyXG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXHJcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcclxuICAgICAgY29udGVudDogY2hhdENvbnRlbnQsXHJcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxyXG4gICAgfVxyXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHRvZ2dsZVhQR2FpbiAodG9nZ2xlKSB7XHJcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd4cEVuYWJsZWQnLCB0b2dnbGUpXHJcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXHJcbiAgICAgIHRvZ2dsZVxyXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkVuYWJsZWQnKVxyXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkRpc2FibGVkJylcclxuICAgIClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyByb2xsRGljZSAoZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgb3B0aW9ucy5hc2tWYWx1ZSA9ICFvcHRpb25zLnRocmVzaG9sZFxyXG4gICAgbGV0IGRpY2VNb2RpZmllciwgZGlmZmljdWx0eSwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXHJcbiAgICBsZXQgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcclxuXHJcbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLm1vZGlmaWVyKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcclxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xyXG4gICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFldmVudD8uc2hpZnRLZXkgJiYgIW9wdGlvbnMuZmFzdEZvcndhcmQpIHtcclxuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxyXG4gICAgICBpZiAodXNhZ2UpIHtcclxuICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcclxuICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxyXG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKVxyXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXHJcbiAgICAgICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY3RvcnMgPSBbXVxyXG5cclxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgY2FudmFzLnRva2Vucy5jb250cm9sbGVkKSB7XHJcbiAgICAgICAgYWN0b3JzLnB1c2godG9rZW4uYWN0b3IudG9rZW5LZXkpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZ2FtZS51c2VyLmNoYXJhY3Rlcikge1xyXG4gICAgICBhY3RvcnMucHVzaChnYW1lLnVzZXIuY2hhcmFjdGVyLnRva2VuS2V5KVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAoY29uc3QgdGsgb2YgYWN0b3JzKSB7XHJcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXHJcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxyXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcclxuICAgICAgY2hlY2suYWN0b3IgPSB0a1xyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWFjdG9ycy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcclxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXHJcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXHJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyB1cGRhdGVDaGFyU2hlZXRzICgpIHtcclxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcclxuICAgICAgICBpZiAoYT8udHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgYT8uc2hlZXQgJiYgYT8uc2hlZXQ/LnJlbmRlcmVkKSB7XHJcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxyXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcclxuICAgICAgICBpZiAoYS5pc093bmVyKSB7XHJcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxyXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgZnJvbSBfb25Ecm9wIHRvIGdldCB0aGUgZHJvcHBlZCBlbnRpdHlUeXBlIG9yIGVudGl0eVR5cGUgZnJvbSBhIGZvbGRlclxyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXHJcbiAgICogQHJldHVybnMgW2l0ZW1zXSBhcnJheSBvZiBpdGVtc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBnZXREYXRhRnJvbURyb3BFdmVudCAoZXZlbnQsIGVudGl0eVR5cGUgPSAnSXRlbScpIHtcclxuICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50KSByZXR1cm4gW11cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGFMaXN0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpKVxyXG4gICAgICBpZiAoZGF0YUxpc3QudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YUxpc3QuZG9jdW1lbnROYW1lID09PSBlbnRpdHlUeXBlKSB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXdhaXQgZnJvbVV1aWQoZGF0YUxpc3QudXVpZClcclxuICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuIFtdXHJcbiAgICAgICAgcmV0dXJuIGZvbGRlci5jb250ZW50c1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGFMaXN0LnR5cGUgPT09IGVudGl0eVR5cGUpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YUxpc3QudXVpZClcclxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBbXVxyXG4gICAgICAgIHJldHVybiBbaXRlbV1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gW11cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNvcHlUb0NsaXBib2FyZCAodGV4dCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxyXG4gICAgICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dFxyXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJ1xyXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmxlZnQgPSAnLTk5OXB4J1xyXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnRvcCA9ICctOTk5cHgnXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSlcclxuICAgICAgICB0ZXh0QXJlYS5mb2N1cygpXHJcbiAgICAgICAgdGV4dEFyZWEuc2VsZWN0KClcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKVxyXG4gICAgICAgICAgICA/IHJlc29sdmUoKVxyXG4gICAgICAgICAgICA6IHJlamVjdChcclxuICAgICAgICAgICAgICBuZXcgRXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyKSlcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcXVvdGVSZWdFeHAgKHN0cmluZykge1xyXG4gICAgLy8gaHR0cHM6Ly9iaXRidWNrZXQub3JnL2NnZ2FlcnRuZXIvanMtaGFja3MvcmF3L21hc3Rlci9xdW90ZS5qc1xyXG4gICAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aFxyXG4gICAgbGV0IHFTdHJpbmcgPSAnJ1xyXG5cclxuICAgIGZvciAobGV0IGN1cnJlbnQsIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgY3VycmVudCA9IHN0cmluZy5jaGFyQXQoaSlcclxuXHJcbiAgICAgIGlmIChjdXJyZW50ID49ICcgJyAmJiBjdXJyZW50IDw9ICd+Jykge1xyXG4gICAgICAgIGlmIChjdXJyZW50ID09PSAnXFxcXCcgfHwgY3VycmVudCA9PT0gXCInXCIpIHtcclxuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFwnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnQucmVwbGFjZSgvWy1bXFxdL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3dpdGNoIChjdXJyZW50KSB7XHJcbiAgICAgICAgICBjYXNlICdcXGInOlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcYidcclxuICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICBjYXNlICdcXGYnOlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcZidcclxuICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICBjYXNlICdcXG4nOlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcclxuICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICBjYXNlICdcXHInOlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxccidcclxuICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICBjYXNlICdcXHQnOlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdCdcclxuICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICBjYXNlICdcXHYnOlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcclxuICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdSdcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDQ7IC0taiA+PSBjdXJyZW50Lmxlbmd0aDsgcVN0cmluZyArPSAnMCcpO1xyXG4gICAgICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcVN0cmluZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xyXG4gICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcclxuICAgIGxldCBvID0gb2JqXHJcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgIGlmICghb1twYXJ0c1tpXV0pIG9bcGFydHNbaV1dID0ge31cclxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dID0gdmFsdWVcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRCeVBhdGggKG9iaiwgcGF0aCkge1xyXG4gICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcclxuICAgIGxldCBvID0gb2JqXHJcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0cmlldmUgYSBEb2N1bWVudCBieSBpdHMgVW5pdmVyc2FsbHkgVW5pcXVlIElkZW50aWZpZXIgKHV1aWQpLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1dWlkICAgVGhlIHV1aWQgb2YgdGhlIERvY3VtZW50IHRvIHJldHJpZXZlXHJcbiAgICogQHJldHVybiB7UHJvbWlzZTxEb2N1bWVudHxudWxsPn1cclxuICAgKi9cclxuICBzdGF0aWMgU2Zyb21VdWlkICh1dWlkKSB7XHJcbiAgICBsZXQgcGFydHMgPSB1dWlkLnNwbGl0KCcuJylcclxuICAgIGxldCBkb2NcclxuXHJcbiAgICAvLyBDb21wZW5kaXVtIERvY3VtZW50c1xyXG4gICAgaWYgKHBhcnRzWzBdID09PSAnQ29tcGVuZGl1bScpIHtcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgLy8gcmV0dXJuIGZyb21VdWlkKHV1aWQpIC8vIFJldHVybiBQcm9taXNlXHJcbiAgICAgIC8vIHBhcnRzLnNoaWZ0KCk7XHJcbiAgICAgIC8vIGNvbnN0IFtzY29wZSwgcGFja05hbWUsIGlkXSA9IHBhcnRzLnNsaWNlKDAsIDMpO1xyXG4gICAgICAvLyBwYXJ0cyA9IHBhcnRzLnNsaWNlKDMpO1xyXG4gICAgICAvLyBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoYCR7c2NvcGV9LiR7cGFja05hbWV9YCk7XHJcbiAgICAgIC8vIHJldHVybiBhd2FpdCBwYWNrPy5nZXREb2N1bWVudChpZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBXb3JsZCBEb2N1bWVudHNcclxuICAgICAgY29uc3QgW2RvY05hbWUsIGRvY0lkXSA9IHBhcnRzLnNsaWNlKDAsIDIpXHJcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMilcclxuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IENPTkZJR1tkb2NOYW1lXS5jb2xsZWN0aW9uLmluc3RhbmNlXHJcbiAgICAgIGRvYyA9IGNvbGxlY3Rpb24uZ2V0KGRvY0lkKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVtYmVkZGVkIERvY3VtZW50c1xyXG4gICAgd2hpbGUgKGRvYyAmJiBwYXJ0cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IFtlbWJlZGRlZE5hbWUsIGVtYmVkZGVkSWRdID0gcGFydHMuc2xpY2UoMCwgMilcclxuICAgICAgZG9jID0gZG9jLmdldEVtYmVkZGVkRG9jdW1lbnQoZW1iZWRkZWROYW1lLCBlbWJlZGRlZElkKVxyXG4gICAgICBwYXJ0cyA9IHBhcnRzLnNsaWNlKDIpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jIHx8IG51bGxcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0RvY3VtZW50VXVpZFBhY2sgKHV1aWQpIHtcclxuICAgIGlmICh1dWlkLmluY2x1ZGVzKCdDb21wZW5kaXVtJykpIHJldHVybiB0cnVlXHJcbiAgICBlbHNlIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzRG9jdW1lbnRVdWlkICh1dWlkKSB7XHJcbiAgICBjb25zdCBpZGVudGlmaWVycyA9IFsnQWN0b3InLCAnU2NlbmUnLCAnVG9rZW4nLCAnSXRlbScsICdDb21wZW5kaXVtJ11cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHV1aWQuaW5jbHVkZXMoaWRlbnRpZmllcnNbaV0pKSByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YSAoZHJvcERhdGEpIHtcclxuICAgIGxldCBkb2NVdWlkLCBhY3RvclxyXG4gICAgaWYgKGRyb3BEYXRhLnRva2VuVXVpZCkge1xyXG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudG9rZW5VdWlkXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkcm9wRGF0YS51dWlkICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudXVpZFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jVXVpZCA9XHJcbiAgICAgICAgZHJvcERhdGEuc2NlbmVJZCAmJiBkcm9wRGF0YS50b2tlbklkXHJcbiAgICAgICAgICA/IGBTY2VuZS4ke2Ryb3BEYXRhLnNjZW5lSWR9LlRva2VuLiR7ZHJvcERhdGEudG9rZW5JZH1gXHJcbiAgICAgICAgICA6IGRyb3BEYXRhLmFjdG9ySWQgfHwgZHJvcERhdGEuYWN0b3JLZXkgfHwgZHJvcERhdGEuaWRcclxuICAgIH1cclxuICAgIGlmIChkcm9wRGF0YS50eXBlID09PSAnVG9rZW4nKSB7XHJcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS51dWlkXHJcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcclxuICAgICAgYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxyXG4gICAgICBpZiAoIWFjdG9yICYmIGRyb3BEYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xyXG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvY1V1aWRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREb2N1bWVudEZyb21LZXkgKGtleSkge1xyXG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXHJcbiAgICAvLyBDYXNlIDAgLSBhIGRvY3VtZW50IFV1aWRcclxuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkKGtleSkpIHtcclxuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcclxuICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKGtleSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cclxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xyXG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcclxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcclxuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXHJcbiAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXHJcbiAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcclxuICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXHJcbiAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcclxuICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBkdXBsaWNhdGUoc2NlbmUpXHJcbiAgICAgIHJldHVybiB0b2tlblxyXG4gICAgfVxyXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxyXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xyXG4gICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoa2V5KVxyXG4gICAgaWYgKCFkb2MpIHJldHVybiBudWxsXHJcbiAgICBpZiAoZG9jLmFjdG9yKSByZXR1cm4gZG9jLmFjdG9yXHJcbiAgICBpZiAoZG9jLmNvbnN0cnVjdG9yPy5uYW1lID09PSAnQ29DQWN0b3InKSByZXR1cm4gZG9jXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGZvbGRlciBvbiB0aGUgYWN0b3JzIHRhYiBjYWxsZWQgXCJJbXBvcnRlZCBDaGFyYWN0ZXJzXCIgaWYgdGhlIGZvbGRlciBkb2Vzbid0IGV4aXN0LlxyXG4gICAqIEByZXR1cm5zIHtGb2xkZXJ9IHRoZSBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzICgpIHtcclxuICAgIGxldCBmb2xkZXJOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXHJcbiAgICBpZiAoZm9sZGVyTmFtZSA9PT0gJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJykge1xyXG4gICAgICBmb2xkZXJOYW1lID0gJ0ltcG9ydGVkIGNoYXJhY3RlcnMnXHJcbiAgICB9XHJcbiAgICBsZXQgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gZ2FtZS5mb2xkZXJzLmZpbmQoXHJcbiAgICAgIGVudHJ5ID0+IGVudHJ5Lm5hbWUgPT09IGZvbGRlck5hbWUgJiYgZW50cnkudHlwZSA9PT0gJ0FjdG9yJ1xyXG4gICAgKVxyXG4gICAgaWYgKFxyXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09IG51bGwgfHxcclxuICAgICAgdHlwZW9mIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gJ3VuZGVmaW5lZCdcclxuICAgICkge1xyXG4gICAgICAvLyBDcmVhdGUgdGhlIGZvbGRlclxyXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBhd2FpdCBGb2xkZXIuY3JlYXRlKHtcclxuICAgICAgICBuYW1lOiBmb2xkZXJOYW1lLFxyXG4gICAgICAgIHR5cGU6ICdBY3RvcicsXHJcbiAgICAgICAgcGFyZW50OiBudWxsXHJcbiAgICAgIH0pXHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlZEltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIHJldHVybiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGd1ZXNzSXRlbSwgdHJ5IGFuZCBmaW5kIHRoZSBpdGVtIGluIHRoZSBsb2NhdGlvbnMgZGVmaW5lZCBpbiAke3NvdXJjZX0gaSA9IEl0ZW0gRGlyZWN0b3J5LCB3ID0gV29ybGQgQ29tcGVuZGl1bXMsIG0gPSBNb2R1bGUgQ29tcGVuZGl1bXMsIHMgPSBTeXN0ZW0gQ29tcGVuZGl1bXNcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBJdGVtIHR5cGUgdG8gZmluZFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgaXRlbSB0byBmaW5kXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbWJhdCBudWxsIChkZWZhdWx0KS4gSWYgYm9vbGVhbiBjb21iYXQgcHJvcGVydHkgb2Ygc2tpbGwgbXVzdCBtYXRjaFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgJycgKGRlZmF1bHQpLiBDaGVjayBvcmRlclxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmYWxsYmFja0FueSBmYWxzZSAoZGVmYXVsdCkuIFNob3VsZCBhbnkgc3BlY2lhbGl6YXRpb24gdGhhdCBpc24ndCBmb3VuZCB0cnkgdXNpbmcgKEFueSkgaXRlbXNcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YSBJdGVtIG9yIG51bGxcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZ3Vlc3NJdGVtIChcclxuICAgIHR5cGUsXHJcbiAgICBuYW1lLFxyXG4gICAgeyBjb21iYXQgPSBudWxsLCBzb3VyY2UgPSAnJywgZmFsbGJhY2tBbnkgPSBmYWxzZSB9ID0ge31cclxuICApIHtcclxuICAgIGxldCBleGlzdGluZyA9IG51bGxcclxuICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKClcclxuICAgIGZvciAobGV0IG8gPSAwLCBvTSA9IHNvdXJjZS5sZW5ndGg7IG8gPCBvTTsgbysrKSB7XHJcbiAgICAgIHN3aXRjaCAoc291cmNlLnN1YnN0cmluZyhvLCBvICsgMSkpIHtcclxuICAgICAgICBjYXNlICdpJzpcclxuICAgICAgICAgIGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxyXG4gICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxyXG4gICAgICAgICAgICAgIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lICYmXHJcbiAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICd3JzpcclxuICAgICAgICBjYXNlICdtJzpcclxuICAgICAgICBjYXNlICdzJzpcclxuICAgICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGUgPT09ICdJdGVtJyAmJlxyXG4gICAgICAgICAgICAgICgoc291cmNlW29dID09PSAndycgJiYgcGFjay5tZXRhZGF0YS5wYWNrYWdlID09PSAnd29ybGQnKSB8fFxyXG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ1MnICYmIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ0NvQzcnKSB8fFxyXG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ3MnICYmXHJcbiAgICAgICAgICAgICAgICAgICFbJ3dvcmxkJywgJ0NvQzcnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2UpKSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxyXG4gICAgICAgICAgICAgIGV4aXN0aW5nID0gZG9jdW1lbnRzLmZpbmQoXHJcbiAgICAgICAgICAgICAgICBpdGVtID0+XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxyXG4gICAgICAgICAgICAgICAgICBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxyXG4gICAgICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZmFsbGJhY2tBbnkgJiYgdHlwZSA9PT0gJ3NraWxsJykge1xyXG4gICAgICBjb25zdCBtYXRjaCA9IG5hbWUubWF0Y2goL14oLisgXFwoKSg/IWFueSkuKyhcXCkpJC8pXHJcbiAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbShcclxuICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICBtYXRjaFsxXSArICdhbnknICsgbWF0Y2hbMl0sXHJcbiAgICAgICAgICB7IGNvbWJhdCwgc291cmNlIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBzb3J0QnlOYW1lS2V5IChhLCBiKSB7XHJcbiAgICByZXR1cm4gYS5uYW1lXHJcbiAgICAgIC5ub3JtYWxpemUoJ05GRCcpXHJcbiAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcclxuICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgLmxvY2FsZUNvbXBhcmUoXHJcbiAgICAgICAgYi5uYW1lXHJcbiAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxyXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxyXG4gICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGR1cGxpY2F0ZSwgZnJvbVV1aWQsIGdhbWUsIFJheSwgVG9rZW4sIHVpICovXHJcblxyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gPGE+IGVsZW1lbnQgb2YgYSByb2xsIGluc3RhbmNlLiBmb3VuZHJ5LmpzIHJlZjpUZXh0RWRpdG9yLl9jcmVhdGVJbmxpbmVSb2xsXHJcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlubGluZVJvbGwgKHJvbGwpIHtcclxuICBjb25zdCBkYXRhID0ge1xyXG4gICAgY2xzOiBbJ2lubGluZS1yb2xsJ10sXHJcbiAgICBkYXRhc2V0OiB7fVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxyXG4gICAgZGF0YS5yZXN1bHQgPSByb2xsLnRvdGFsXHJcbiAgICBkYXRhLnRpdGxlID0gcm9sbC5mb3JtdWxhXHJcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICAvLyBDb25zdHJ1Y3QgYW5kIHJldHVybiB0aGUgZm9ybWVkIGxpbmsgZWxlbWVudFxyXG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXHJcbiAgYS50aXRsZSA9IGRhdGEudGl0bGVcclxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XHJcbiAgICBhLmRhdGFzZXRba10gPSB2XHJcbiAgfVxyXG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcclxuICByZXR1cm4gYVxyXG59XHJcblxyXG4vKipcclxuICogRnVuY3Rpb24gdXNlZCBmb3IgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIuXHJcbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cclxuICogQHBhcmFtIHsqfSBrZXkgICAgIFRoZSBvYmplY3QncyBwcm9wZXJ0eSBLZXlcclxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZXhjbHVkZV8gKGtleSwgdmFsdWUpIHtcclxuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcclxuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xyXG59XHJcblxyXG4vKipcclxuICogRnVuY3Rpb24gdXNlZCBmb3IgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIuXHJcbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9fXHJcbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgICBUaGUgYXNzb2NpYXRlZCB2YWx1ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xyXG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xyXG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnX18nKSkge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxyXG4gKiBVc2VkIGZvciBNQUMgY29tcGF0LlxyXG4gKiBAcGFyYW0ge1MuRXZlbnR9IGV2ZW50XHJcbiAqIEByZXR1cm5zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNDdHJsS2V5IChldmVudCkge1xyXG4gIGlmIChldmVudCA9PT0gZmFsc2UpIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICByZXR1cm4gKFxyXG4gICAgZXZlbnQubWV0YUtleSB8fFxyXG4gICAgZXZlbnQuY3RybEtleSB8fFxyXG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcclxuICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIGNoYXRIZWxwZXIge1xyXG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLy0oW2Etel0pL2csIGZ1bmN0aW9uIChzdHJpbmcpIHtcclxuICAgICAgcmV0dXJuIHN0cmluZ1sxXS50b1VwcGVyQ2FzZSgpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge31cclxuICAgIG1lc3NhZ2VEYXRhLmZsYXZvciA9IHRpdGxlXHJcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxyXG4gICAgaWYgKG9wdGlvbnMud2hpc3Blcikge1xyXG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcclxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJvbGwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcclxuICAgICAgbWVzc2FnZURhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMXHJcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGxNb2RlID0gQ09OU1QuRElDRV9ST0xMX01PREVTLlNFTEZcclxuICAgIH1cclxuICAgIG1lc3NhZ2VEYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcclxuICAgIG1lc3NhZ2VEYXRhLmNvbnRlbnQgPSBtZXNzYWdlXHJcblxyXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKG1lc3NhZ2VEYXRhKS50aGVuKG1zZyA9PiB7XHJcbiAgICAgIHJldHVybiBtc2dcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xyXG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uIChzdHJpbmcpIHtcclxuICAgICAgcmV0dXJuICctJyArIHN0cmluZy50b0xvd2VyQ2FzZSgpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XHJcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcclxuICAgIC8vIENhc2UgMCAtIGEgZG9jdW1lbnQgVXVpZFxyXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xyXG4gICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0RvY3VtZW50VXVpZFBhY2soa2V5KSkgcmV0dXJuIGZyb21VdWlkKGtleSkgLy8gVE9ETyBDaGVjayB3ZSBjYW4gZG8gdGhhdFxyXG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoa2V5KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxyXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XHJcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxyXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xyXG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXHJcbiAgICAgIHJldHVybiB0b2tlbj8uYWN0b3JcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XHJcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFNwZWFrZXJGcm9tS2V5IChhY3RvcktleSkge1xyXG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XHJcbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgIGlmIChhY3RvcktleS5pbmNsdWRlcygnLicpKSB7XHJcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIHNwZWFrZXIudG9rZW4gPSB0b2tlbklkXHJcbiAgICAgIHNwZWFrZXIuc2NlbmUgPSBzY2VuZUlkXHJcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcclxuICAgICAgc3BlYWtlci5hY3RvciA9IGFjdG9yLmlkXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcclxuICAgICAgc3BlYWtlci5hbGlhcyA9IGFjdG9yLm5hbWVcclxuICAgIH1cclxuICAgIHJldHVybiBzcGVha2VyXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xyXG4gICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKG9iamVjdCkpIHtcclxuICAgICAgaWYgKCFwcm9wLnN0YXJ0c1dpdGgoJ18nKSkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQoXHJcbiAgICAgICAgICAgIG9iamVjdFtwcm9wXSxcclxuICAgICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgICAgYCR7b2JqZWN0TmFtZX06JHtwcm9wfTpgXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVsZW1lbnQuZGF0YXNldFtgJHtvYmplY3ROYW1lfSR7cHJvcH1gXSA9IG9iamVjdFtwcm9wXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE9iamVjdEZyb21FbGVtZW50IChvYmplY3QsIGVsZW1lbnQpIHtcclxuICAgIGZ1bmN0aW9uIGRlc2VyaWFsaXplIChvYmosIGtleSwgdmFsdWUpIHtcclxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcclxuICAgICAgICBjb25zdCBzID0ga2V5LnNsaWNlKDEpXHJcbiAgICAgICAgY29uc3Qgb2JqUHJvcCA9IHMuc2xpY2Uocy5pbmRleE9mKCc6JykgKyAxKVxyXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcclxuICAgICAgICBpZiAodHlwZW9mIG9ialtvYmpOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIG9ialtvYmpOYW1lXSA9IHt9XHJcbiAgICAgICAgZGVzZXJpYWxpemUob2JqW29iak5hbWVdLCBvYmpQcm9wLCB2YWx1ZSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykgb2JqW2tleV0gPSB0cnVlXHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIG9ialtrZXldID0gZmFsc2VcclxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcclxuICAgICAgICBlbHNlIG9ialtrZXldID0gdmFsdWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghZWxlbWVudCB8fCAhb2JqZWN0KSByZXR1cm5cclxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbGVtZW50LmRhdGFzZXQpKSB7XHJcbiAgICAgIGlmIChwcm9wID09PSAndGVtcGxhdGUnKSByZXR1cm5cclxuICAgICAgZGVzZXJpYWxpemUob2JqZWN0LCBwcm9wLCBlbGVtZW50LmRhdGFzZXRbcHJvcF0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcclxuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XHJcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXHJcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XHJcbiAgICAgICAgY29uc3QgdG9rZW5Eb2MgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0/LnRva2VuXHJcbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxyXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXHJcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxyXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcclxuICAgICAgICBpZiAoIXRva2VuLnNjZW5lKSB0b2tlbi5zY2VuZSA9IGR1cGxpY2F0ZShzY2VuZS5kb2N1bWVudClcclxuICAgICAgICByZXR1cm4gdG9rZW5cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoa2V5KVxyXG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvclRva2VuKGFjdG9yKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEFjdG9yVG9rZW4gKGFjdG9yKSB7XHJcbiAgICBpZiAoIWFjdG9yKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIGFjdG9yLnRva2VuIHx8IGFjdG9yLnByb3RvdHlwZVRva2VuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKi9cclxuICAgIC8vIC8vIENhc2UgMCAtIEFjdG9yIGlzIGEgdG9rZW4gKHN5bnRoZXRpYyBhY3RvciksIHJldHVybiB0aGF0IHRva2VuLlxyXG4gICAgLy8gaWYoYWN0b3IuaXNUb2tlbikgcmV0dXJuIGFjdG9yLnRva2VuO1xyXG4gICAgLy8gZWxzZXtcclxuICAgIC8vICAvLyBDYXNlIDEgLSBBY3RvciBpcyBub3QgYSB0b2tlbiwgZmluZCBpZiBhIHRva2VuIGV4aXN0IGZvciB0aGF0IGFjdG9yLlxyXG4gICAgLy8gIGNvbnN0IGFjdG9yVG9rZW5zID0gYWN0b3IuZ2V0QWN0aXZlVG9rZW5zKCk7XHJcbiAgICAvLyAgaWYoIGFjdG9yVG9rZW5zLmxlbmd0aCl7XHJcbiAgICAvLyAgICAvLyBDYXNlIDEuMSAtIElmIGhlIGhhcyBvbmx5IG9uZSBUb2tlbiByZXR1cm4gaXQuXHJcbiAgICAvLyAgICBpZiggMSA9PT0gYWN0b3JUb2tlbnMubGVuZ3RoKSByZXR1cm4gYWN0b3JUb2tlbnNbMF07XHJcblxyXG4gICAgLy8gICAgLy8gQ2FzZSAxLjIgLSBBY3RvciBoYXMgbXVsdGlwbGUgdG9rZW5zLCBmaW5kIGlmIG9uZSBvZiB0aGVtIGlzIHRoZSBjb250cm9sbGVkIHRva2VuLlxyXG4gICAgLy8gICAgY29uc3QgY29udHJvbGxlZFRva2VucyA9IGFjdG9yVG9rZW5zLmZpbHRlciggdCA9PiB0Ll9jb250cm9sbGVkKTtcclxuICAgIC8vICAgIGlmKCBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCl7XHJcbiAgICAvLyAgICAgIC8vIFJldHVybiB0aGUgMXN0IGNvbnRyb2xsZWQgdG9rZW4sIHJpc2UgYSB3YXJuaW5nIGlmIGhlIGhhcyBtdWx0aXBsZSBjb250cm9sbGVkIHRva2Vucy5cclxuICAgIC8vICAgICAgaWYoIHZlcmJvc2UgJiYgY29udHJvbGxlZFRva2Vucy5sZW5ndGggPiAxKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGhhcyAke2NvbnRyb2xsZWRUb2tlbnMubGVuZ3RofSBjb250cm9sbGVkIHRva2Vucy4gVXNpbmcgdGhlIGZpcnN0IGZvdW5kYCk7XHJcbiAgICAvLyAgICAgIHJldHVybiBjb250cm9sbGVkVG9rZW5zWzBdO1xyXG4gICAgLy8gICAgfVxyXG5cclxuICAgIC8vICAgIC8vIENhc2UgMS4zIGFjdG9yIGRvZXNuJ3QgaGF2ZSBhbnkgYWN0aXZlIHRva2VuLiBSZXR1cm4gdGhlIGZpcnN0IHZhbGlkIHRva2VuIGZvciB0aGF0IGFjdG9yIGFuZCByYWlzZSBhIHdhcm5pbmcuXHJcbiAgICAvLyAgICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy53YXJuKCBgQWN0b3IgJHthY3Rvci5uYW1lfSBkb2Vzbid0IGhhdmUgYW55IGNvbnRyb2xsZWQgdG9rZW4uIFVzaW5nIGZpcnN0IHRva2VuIGZvdW5kLmApO1xyXG4gICAgLy8gICAgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xyXG4gICAgLy8gIH1cclxuXHJcbiAgICAvLyAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoIGBDb3VsZCBub3QgZmluIGFueSB0b2tlbiBmb3IgJHthY3Rvci5uYW1lfS5gKTtcclxuICAgIC8vICByZXR1cm4gbnVsbDtcclxuICAgIC8vIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRBY3RvckltZ0Zyb21LZXkgKGFjdG9yS2V5KSB7XHJcbiAgICBpZiAoIWFjdG9yS2V5KSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcclxuICAgICAgLy8gVHJ5IHRvIGZpbmQgYSB0b2tlbi5cclxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShhY3RvcktleSlcclxuICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgaWYgKCh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmMpIHtcclxuICAgICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjLmluZGV4T2YoJyonKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmNcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcclxuICAgICAgLy8gaWYgbm8gdG9rZW4gZm91bmQgZm9yIHRoYXQgYWN0b3IgcmV0dXJuIHRoZSBwcm90b3R5cGUgdG9rZW4gaW1hZ2UuXHJcbiAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbikge1xyXG4gICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYykge1xyXG4gICAgICAgICAgaWYgKGFjdG9yLnByb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjPy5pbmRleE9mKCcqJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyY1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFjdG9yLmltZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldERpc3RhbmNlIChzdGFydFRva2VuLCBlbmRUb2tlbikge1xyXG4gICAgLy8gc3RhcnRUb2tlbi51cGRhdGVTb3VyY2UoKTtcclxuICAgIC8vIGNhbnZhcy5zaWdodC5pbml0aWFsaXplVG9rZW5zKCk7XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgPT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5pZCAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICkge1xyXG4gICAgICBpZiAoc3RhcnRUb2tlbi5zY2VuZT8uaWQgfHwgZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzdGFydFRva2VuLnNjZW5lLmlkKVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2NlbmU/LnRva2VucyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIGNvbnN0IHRva2VucyA9IHNjZW5lPy50b2tlbnNcclxuICAgICAgICAgICAgLmZpbHRlcih0b2tlbiA9PiB0b2tlbi5hY3Rvci5pZCA9PT0gZW5kVG9rZW4uZGF0YS5kb2N1bWVudC5pZClcclxuICAgICAgICAgICAgLm1hcCh0b2tlbiA9PiB0b2tlbi5vYmplY3QpXHJcbiAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBlbmRUb2tlbiA9IHRva2Vuc1swXVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGRpc3RhbmNlID0ge1xyXG4gICAgICBncmlkVW5pdDogMCxcclxuICAgICAgdmFsdWU6IDAsXHJcbiAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgIHR5cGVvZiBlbmRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICkge1xyXG4gICAgICBjb25zdCByYXkgPSBuZXcgUmF5KHN0YXJ0VG9rZW4uY2VudGVyLCBlbmRUb2tlbi5jZW50ZXIpXHJcbiAgICAgIGNvbnN0IHNlZ21lbnQgPSBbeyByYXkgfV1cclxuICAgICAgZGlzdGFuY2UgPSB7XHJcbiAgICAgICAgZ3JpZFVuaXQ6IHJheS5kaXN0YW5jZSAvIGNhbnZhcy5zY2VuZS5ncmlkLnNpemUsXHJcbiAgICAgICAgLy8gdmFsdWU6IChyYXkuZGlzdGFuY2UvY2FudmFzLnNjZW5lLmRhdGEuZ3JpZCkqY2FudmFzLnNjZW5lLmRhdGEuZ3JpZERpc3RhbmNlLFxyXG4gICAgICAgIHZhbHVlOiBjYW52YXMuZ3JpZC5tZWFzdXJlRGlzdGFuY2VzKHNlZ21lbnQsIHtcclxuICAgICAgICAgIGdyaWRTcGFjZXM6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2dyaWRTcGFjZXMnKVxyXG4gICAgICAgIH0pWzBdLFxyXG4gICAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJykpIHtcclxuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBNYXRoLmFicyhcclxuICAgICAgICAgIChzdGFydFRva2VuLmRvY3VtZW50LmVsZXZhdGlvbiB8fCAwKSAtIChlbmRUb2tlbi5kb2N1bWVudC5lbGV2YXRpb24gfHwgMClcclxuICAgICAgICApXHJcbiAgICAgICAgZGlzdGFuY2UudmFsdWUgPSBNYXRoLnNxcnQoXHJcbiAgICAgICAgICBkaXN0YW5jZS52YWx1ZSAqIGRpc3RhbmNlLnZhbHVlICsgZWxldmF0aW9uICogZWxldmF0aW9uXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VEaXN0YW5jZUNhbGN1bGF0aW9uRmFpbHVyZScpXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIHJldHVybiBkaXN0YW5jZVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvWWFyZHMgKGRpc3RhbmNlKSB7XHJcbiAgICBzd2l0Y2ggKGRpc3RhbmNlLnVuaXQpIHtcclxuICAgICAgY2FzZSAnZnQnOlxyXG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZSAvIDNcclxuXHJcbiAgICAgIGNhc2UgJ3lkJzpcclxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcclxuXHJcbiAgICAgIGNhc2UgJ20nOlxyXG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3Um9sbCB7XHJcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XHJcbiAgICBjb25zdCByb2xsRGl2ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCdkaXYuZGljZS1yb2xsJylcclxuICAgIGlmICghcm9sbERpdikgcmV0dXJuIG51bGxcclxuXHJcbiAgICBjb25zdCByb2xsID0gbmV3IENvQzdSb2xsKClcclxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcm9sbERpdilcclxuXHJcbiAgICByZXR1cm4gcm9sbFxyXG4gIH1cclxuXHJcbiAgZ2V0IHJlc3VsdFR5cGUgKCkge1xyXG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBwYXJzZUludCh0aGlzLnN1Y2Nlc3NMZXZlbClcclxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxyXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcclxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkU3VjY2VzcycpXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxyXG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxyXG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRnVtYmxlJylcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgYWN0b3IgKCkge1xyXG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgaXRlbSAoKSB7XHJcbiAgICBpZiAodGhpcy5pdGVtSWQgJiYgdGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBza2lsbCAoKSB7XHJcbiAgICBpZiAodGhpcy5za2lsbElkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgc2hvd0RpY2VSb2xsICgpIHtcclxuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XHJcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cclxuICAgICAgZm9yIChjb25zdCBkaWVSZXN1bHQgb2YgdGhpcy5kaWNlcy50ZW5zKSB7XHJcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcclxuICAgICAgfVxyXG4gICAgICBkaWNlUmVzdWx0cy5wdXNoKHRoaXMuZGljZXMudW5pdC52YWx1ZSlcclxuXHJcbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xyXG4gICAgICAgIGZvcm11bGE6IGAke3RoaXMuZGljZXMudGVucy5sZW5ndGh9ZDEwMCsxZDEwYCxcclxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcclxuICAgICAgICB3aGlzcGVyOiBudWxsLFxyXG4gICAgICAgIGJsaW5kOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RnJvbUVsZW1lbnQgKGVsZW1lbnQsIG9iamVjdCA9IG51bGwpIHtcclxuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXHJcbiAgICBjb25zdCByb2xsID0gb2JqZWN0IHx8IG5ldyBDb0M3Um9sbCgpXHJcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJvbGwsIGVsZW1lbnQpXHJcbiAgICByb2xsLmRpY2VzID0ge1xyXG4gICAgICB0ZW5zOiBbXSxcclxuICAgICAgdW5pdDoge31cclxuICAgIH1cclxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoXHJcbiAgICAgIHJvbGwuZGljZXMsXHJcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2UtcmVzdWx0JylcclxuICAgIClcclxuICAgIHJvbGwuZGljZXMuaGFzQm9udXMgPSByb2xsLmRpY2VNb2RpZmllciAhPT0gMFxyXG4gICAgcm9sbC5kaWNlcy5ib251cyA9IE1hdGguYWJzKHJvbGwuZGljZU1vZGlmaWVyKVxyXG4gICAgcm9sbC5kaWNlcy5ib251c1R5cGUgPVxyXG4gICAgICByb2xsLmRpY2VNb2RpZmllciA8IDBcclxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXHJcbiAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJylcclxuICAgIGNvbnN0IHRlbkRpY2UgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW4tZGljZScpXHJcbiAgICBpZiAodGVuRGljZSkge1xyXG4gICAgICBmb3IgKGNvbnN0IGQgb2YgdGVuRGljZS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKSB7XHJcbiAgICAgICAgY29uc3QgZGllID0ge1xyXG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgaXNNYXg6IGZhbHNlLFxyXG4gICAgICAgICAgaXNNaW46IGZhbHNlLFxyXG4gICAgICAgICAgdmFsdWU6IC0xXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoZGllLCBkKVxyXG4gICAgICAgIHJvbGwuZGljZXMudGVucy5wdXNoKGRpZSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgdW5pdERpZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJylcclxuICAgICAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LWRpZScpLnF1ZXJ5U2VsZWN0b3IoJ2xpJylcclxuICAgICAgOiBudWxsXHJcbiAgICByb2xsLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0RGllID8gcGFyc2VJbnQodW5pdERpZS5kYXRhc2V0LnZhbHVlKSA6IG51bGxcclxuXHJcbiAgICByb2xsLmluY3JlYXNlU3VjY2VzcyA9IFtdXHJcbiAgICBjb25zdCBpbmNyZWFzZVN1Y2Nlc3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNyZWFzZS1zdWNjZXNzJylcclxuICAgIGlmIChpbmNyZWFzZVN1Y2Nlc3MgJiYgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XHJcbiAgICAgIGZvciAoY29uc3QgaXNsIG9mIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xyXG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc0xldmVsID0ge31cclxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KG5ld1N1Y2Nlc0xldmVsLCBpc2wpXHJcbiAgICAgICAgcm9sbC5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXdTdWNjZXNMZXZlbClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb2xsLmx1Y2tOZWVkZWQpIHtcclxuICAgICAgcm9sbC5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XHJcbiAgICAgICAgbHVja05lZWRlZFZhbHVlOiByb2xsLmx1Y2tOZWVkZWRcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmICghb2JqZWN0KSByZXR1cm4gcm9sbFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZyb21DaGVjayAoY2hlY2spIHtcclxuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxyXG5cclxuICAgIHJvbGwucm9sbFR5cGUgPSBjaGVjay5yb2xsVHlwZVxyXG4gICAgcm9sbC5zaWRlID0gY2hlY2suc2lkZVxyXG4gICAgcm9sbC5hY3Rpb24gPSBjaGVjay5hY3Rpb25cclxuICAgIHJvbGwucmVmTWVzc2FnZUlkID0gY2hlY2sucmVmTWVzc2FnZUlkXHJcbiAgICByb2xsLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZFxyXG5cclxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gY2hlY2suc3VjY2Vzc0xldmVsXHJcbiAgICByb2xsLmRpZmZpY3VsdHkgPSBjaGVjay5kaWZmaWN1bHR5XHJcbiAgICByb2xsLnNraWxsSWQgPSBjaGVjay5za2lsbCA/IGNoZWNrLnNraWxsLmlkIDogbnVsbFxyXG4gICAgcm9sbC5pdGVtSWQgPSBjaGVjay5pdGVtID8gY2hlY2suaXRlbS5pZCA6IG51bGxcclxuICAgIHJvbGwuZGljZU1vZCA9IGNoZWNrLmRpY2VNb2RpZmllclxyXG4gICAgcm9sbC52YWx1ZSA9IHBhcnNlSW50KGNoZWNrLnJhd1ZhbHVlKVxyXG4gICAgcm9sbC5mdW1ibGUgPSBjaGVjay5pc0Z1bWJsZVxyXG4gICAgcm9sbC5jcml0aWNhbCA9IGNoZWNrLmlzQ3JpdGljYWxcclxuICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA/IGNoZWNrLmNoYXJhY3RlcmlzdGljIDogbnVsbFxyXG4gICAgcm9sbC5yZXN1bHQgPSBjaGVjay5kaWNlLnRvdGFsXHJcblxyXG4gICAgcm9sbC5hY3RvcktleSA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxyXG5cclxuICAgIGlmIChjaGVjay5hY3Rvci5pc1Rva2VuKSB7XHJcbiAgICAgIHJvbGwudG9rZW5JZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICByb2xsLmFjdG9ySWQgPSBudWxsXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByb2xsLnRva2VuS2V5ID0gbnVsbFxyXG4gICAgICByb2xsLmFjdG9ySWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm9sbFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGF0dGFjaENoZWNrVG9FbGVtZW50IChodG1sRWxlbWVudCwgY2hlY2spIHtcclxuICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2soY2hlY2spXHJcbiAgICByb2xsLmF0dGFjaFRvRWxlbWVudChodG1sRWxlbWVudClcclxuXHJcbiAgICByZXR1cm4gcm9sbFxyXG4gIH1cclxuXHJcbiAgYXR0YWNoVG9FbGVtZW50IChodG1sRWxlbWVudCkge1xyXG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgaHRtbEVsZW1lbnQpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0RhbWFnZSB7XHJcbiAgc3RhdGljIGdldE1haW5EaWUgKGRhbWFnZVN0cmluZykge1xyXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMjAnKSkgcmV0dXJuICdkMjAnXHJcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2QxMicpKSByZXR1cm4gJ2QxMidcclxuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEwJykpIHJldHVybiAnZDEwJ1xyXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkOCcpKSByZXR1cm4gJ2Q4J1xyXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkNCcpKSByZXR1cm4gJ2Q0J1xyXG4gICAgcmV0dXJuICdkNidcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xyXG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cclxuICAgIGNvbnN0IGRhbWFnZSA9IG9iamVjdCB8fCB7fVxyXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkYW1hZ2UsIGVsZW1lbnQpXHJcbiAgICBjb25zdCByb2xscyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbHMnKS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXHJcbiAgICBkYW1hZ2Uucm9sbHMgPSBbXVxyXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XHJcbiAgICAgIGNvbnN0IHJvbGwgPSB7fVxyXG4gICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJvbGwsIHIpXHJcbiAgICAgIGRhbWFnZS5yb2xscy5wdXNoKHJvbGwpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFvYmplY3QpIHJldHVybiBkYW1hZ2VcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lICovXHJcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0Q2FyZEFjdG9yIHtcclxuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcclxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcclxuICB9XHJcblxyXG4gIGdldCBpc0JsaW5kICgpIHtcclxuICAgIGlmICghdGhpcy5yb2xsTW9kZSkgcmV0dXJuIG51bGxcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcclxuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxyXG4gIH1cclxuXHJcbiAgc2V0IGlzQmxpbmQgKHgpIHtcclxuICAgIHRoaXMuX2lzQmxpbmQgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgcm9sbE1vZGUgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXHJcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcclxuICB9XHJcblxyXG4gIHNldCByb2xsTW9kZSAoeCkge1xyXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgYWN0b3IgKCkge1xyXG4gICAgaWYgKCF0aGlzLmFjdG9yS2V5KSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRva2VuICgpIHtcclxuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcclxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGl0ZW0gKCkge1xyXG4gICAgaWYgKCF0aGlzLml0ZW1JZCkgcmV0dXJuIG51bGxcclxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcclxuICB9XHJcblxyXG4gIGdldCB3ZWFwb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRhcmdldGVkVG9rZW5zICgpIHtcclxuICAgIHJldHVybiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXHJcbiAgfVxyXG5cclxuICBnZXQgdGFyZ2V0ICgpIHtcclxuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxyXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3JcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cclxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxyXG4gICAqL1xyXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XHJcbiAgICAgIGlmICh0aGlzLl90YXJnZXRLZXkpIHtcclxuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IHRoaXMudGFyZ2V0ZWRUb2tlbnMucG9wKClcclxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcclxuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl90YXJnZXRUb2tlblxyXG4gIH1cclxuXHJcbiAgZ2V0IHRhcmdldEFjdG9yICgpIHtcclxuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcclxuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHRoaXMuX3RhcmdldEFjdG9yID0gdGhpcy50YXJnZXRUb2tlbi5hY3RvclxyXG4gICAgICBlbHNlIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxyXG4gIH1cclxuXHJcbiAgZ2V0IHRhcmdldEtleSAoKSB7XHJcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXHJcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0S2V5XHJcbiAgfVxyXG5cclxuICBnZXQgaGFzVGFyZ2V0ICgpIHtcclxuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgc2V0IHRhcmdldEtleSAoeCkge1xyXG4gICAgdGhpcy5fdGFyZ2V0S2V5ID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNraWxscyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXHJcbiAgfVxyXG5cclxuICBnZXQgdGFyZ2V0SW1nICgpIHtcclxuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxyXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xyXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xyXG4gIH1cclxuXHJcbiAgZ2V0IG5hbWUgKCkge1xyXG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcclxuICAgIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcclxuICB9XHJcblxyXG4gIGdldCB0YXJnZXROYW1lICgpIHtcclxuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXHJcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdG9ySW1nICgpIHtcclxuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXHJcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXHJcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXHJcbiAgfVxyXG5cclxuICBhc3luYyBzYXkgKG1lc3NhZ2UsIGZsYXZvciA9IG51bGwpIHtcclxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cclxuICAgIGxldCBzcGVha2VyXHJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xyXG4gICAgICBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcclxuICAgICAgaWYgKHRoaXMudG9rZW4pIHtcclxuICAgICAgICBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW4uZG9jdW1lbnRcclxuICAgICAgfVxyXG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXHJcblxyXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XHJcbiAgICAgIHVzZXI6IHVzZXIuaWQsXHJcbiAgICAgIHNwZWFrZXIsXHJcbiAgICAgIGZsYXZvcixcclxuICAgICAgY29udGVudDogbWVzc2FnZVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChcclxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcclxuICAgICkge1xyXG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxyXG5cclxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xyXG4gICAgICByZXR1cm4gbXNnXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXHJcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXHJcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xyXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsLCBjaGF0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xyXG5cclxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcclxuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ19fJykpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XHJcbiAgfVxyXG5cclxuICBjb25zdCBleGNsdWRlID0gWydfYWN0b3InXVxyXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGNvbnN0IGNoZWNrcyA9IFsnc2FuQ2hlY2snLCAnaW50Q2hlY2snXVxyXG4gIGlmIChjaGVja3MuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2FuQ2hlY2tDYXJkIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XHJcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgc2FuRGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKFxyXG4gICAgICBhY3RvcktleSxcclxuICAgICAgdHlwZW9mIG9wdGlvbnMuZmFzdEZvcndhcmQgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgPyBCb29sZWFuKG9wdGlvbnMuZmFzdEZvcndhcmQpXHJcbiAgICAgICAgOiBmYWxzZVxyXG4gICAgKVxyXG4gICAgc2FuRGF0YS5zYW5SZWFzb24gPSBzYW5EYXRhLnNhblJlYXNvbiA/PyAnJ1xyXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xyXG4gICAgaWYgKHNhbkRhdGEubW9kaWZpZXIgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKSkpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXHJcbiAgICB9XHJcbiAgICBpZiAoc2FuRGF0YS5kaWZmaWN1bHR5ICYmICFpc05hTihOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KSkpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0ZSA9IHt9XHJcbiAgfVxyXG5cclxuICBnZXQgaXNCbGluZCAoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5pc0JsaW5kICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICA/IEJvb2xlYW4odGhpcy5vcHRpb25zLmlzQmxpbmQpXHJcbiAgICAgIDogc3VwZXIuaXNCbGluZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgPyB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eVxyXG4gICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxyXG4gIH1cclxuXHJcbiAgZ2V0IG1vZGlmaWVyICgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICA/IHRoaXMub3B0aW9ucy5tb2RpZmllclxyXG4gICAgICA6IDBcclxuICB9XHJcblxyXG4gIGdldCBzYW5Mb3NzU291cmNlICgpIHtcclxuICAgIGlmICghdGhpcy5zYW5EYXRhLnRva2VuS2V5KSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuc2FuRGF0YS50b2tlbktleSlcclxuICB9XHJcblxyXG4gIGdldCBpbnZvbHVudGFyeUFjdGlvbiAoKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXHJcbiAgICAgICh0aGlzLnNhbkNoZWNrLmlzRmFpbHVyZSB8fCB0aGlzLnNhbkNoZWNrLmlzRnVtYmxlKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBzYW5Mb3NzRm9ybXVsYSAoKSB7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcclxuICAgICAgaWYgKHRoaXMuc2FuRGF0YS5zYW5NYXggJiYgdGhpcy5zYW5DaGVjay5mYWlsZWQpIHtcclxuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KSlcclxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXHJcbiAgICAgICAgICA6IHRoaXMuc2FuRGF0YS5zYW5NYXhcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xyXG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NaW4pKVxyXG4gICAgICAgICAgPyBOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbilcclxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAwXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNhbkxvc3RUb1JlYXNvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5zYW5Mb3N0VG9SZWFzb24odGhpcy5zYW5EYXRhLnNhblJlYXNvbilcclxuICB9XHJcblxyXG4gIGdldCBtYXhQb3NzaWJsZVNhbkxvc3MgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxyXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxyXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXQgbWF4U2FuTG9zcyAoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5EYXRhLnNhbk1heC50b1N0cmluZygpKS5ldmFsdWF0ZSh7XHJcbiAgICAgIG1heGltaXplOiB0cnVlXHJcbiAgICB9KS50b3RhbFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5zYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQodGhpcy5zYW5EYXRhLnNhblJlYXNvbilcclxuICB9XHJcblxyXG4gIGdldCBmaXJzdEVuY291bnRlciAoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzQWN0b3JMb29zaW5nU2FuICgpIHtcclxuICAgIC8vIE5vIHNhbiBsb3NzIGR1cmluZyBib3V0IG9mIG1hZC5cclxuICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoZSBzYW4gbG9zcyBpcyBhIDBcclxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24gJiZcclxuICAgICAgdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXHJcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcclxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XHJcbiAgICAgICkgPT09IDBcclxuICAgICkge1xyXG4gICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBnZXQgYm91dER1cmF0aW9uVGV4dCAoKSB7XHJcbiAgICBpZiAodGhpcy5ib3V0RHVyYXRpb24pIHtcclxuICAgICAgaWYgKHRoaXMuYm91dFJlYWxUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yb3VuZHMnKX1gXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5ib3V0RHVyYXRpb259ICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmhvdXJzJyl9YFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IHlvdUdhaW5DdGh1bGh1TXl0aG9zU3RyaW5nICgpIHtcclxuICAgIGlmICh0aGlzLm15dGhvc0dhaW4pIHtcclxuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcclxuICAgICAgICB2YWx1ZTogdGhpcy5teXRob3NHYWluXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWR2YW5jZVN0YXRlIChzdGF0ZSkge1xyXG4gICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xyXG4gICAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2ludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkJzoge1xyXG4gICAgICAgIHRoaXMuc3RhdGVbc3RhdGVdID0gdHJ1ZVxyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5U2FuTG9zcygpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NSZWFsVGltZSc6IHtcclxuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcclxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcclxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gZmFsc2VcclxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcclxuICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxyXG4gICAgICAgIClcclxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcclxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gZmFsc2VcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2VudGVyQm91dE9mTWFkbmVzc1N1bW1hcnknOiB7XHJcbiAgICAgICAgdGhpcy5ib3V0RHVyYXRpb24gPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXHJcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuYm91dFN1bW1hcnkgPSB0cnVlXHJcbiAgICAgICAgdGhpcy5ib3V0UmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rvci5lbnRlckJvdXRPZk1hZG5lc3MoXHJcbiAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgIHRoaXMuYm91dER1cmF0aW9uXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxyXG4gICAgICAgIGF3YWl0IHRoaXMudHJpZ2dlckluc2FuaXR5KClcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2JvdXRPZk1hZG5lc3NPdmVyJzoge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXHJcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5jdGh1bGh1TXl0aG9zQXdhcmRlZCA9IHRydWVcclxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSAwXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdjdGh1bGh1TXl0aG9zQXdhcmRlZCc6IHtcclxuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxyXG4gICAgICAgIGlmICghdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkKSB7XHJcbiAgICAgICAgICBhbW91bnRHYWluZWQgPSA1XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5jdGh1bGh1TXl0aG9zQXdhcmRlZCA9IHRydWVcclxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxyXG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID1cclxuICAgICAgICAgIGN0aHVsaHVNeXRob3NTa2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSB8fCAwXHJcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xyXG4gICAgICAgICAgYXdhaXQgY3RodWxodU15dGhvc1NraWxsLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICdkYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBvbGRWYWx1ZSArIGFtb3VudEdhaW5lZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5teXRob3NHYWluID0gYW1vdW50R2FpbmVkXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYnlwYXNzUm9sbFNhbiAoKSB7XHJcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXHJcbiAgICB0aGlzLnNhbkNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICB0aGlzLnNhbkNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxyXG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xyXG4gICAgdGhpcy5zYW5DaGVjay5kaWZmaWN1bHR5ID1cclxuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXHJcbiAgICBhd2FpdCB0aGlzLnNhbkNoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcclxuICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkID0gdHJ1ZVxyXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXHJcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXHJcbiAgICB0aGlzLnN0YXRlLmlnbm9yZVNhbkNoZWNrID0gdHJ1ZVxyXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcm9sbFNhbiAoKSB7XHJcbiAgICB0aGlzLnNhbkNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICB0aGlzLnNhbkNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxyXG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xyXG4gICAgdGhpcy5zYW5DaGVjay5kaWZmaWN1bHR5ID1cclxuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXHJcbiAgICBhd2FpdCB0aGlzLnNhbkNoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcclxuICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkID0gdHJ1ZVxyXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXHJcbiAgICBpZiAoIXRoaXMuaXNBY3Rvckxvb3NpbmdTYW4pIHtcclxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXHJcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pbW11bmVBbHJlYWR5SW5Cb3V0ID0gdHJ1ZVxyXG4gICAgICAgIGlmICghdGhpcy5zYW5DaGVjay5wYXNzZWQpIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXHJcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXHJcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxyXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcclxuICAgICAgdGhpcy5zYW5Mb3NzID0gMFxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxyXG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhblJlYXNvbikge1xyXG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxyXG4gICAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcclxuICAgICAgICAgIHRoaXMuc2FuTG9zc0Zvcm11bGFcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKHRoaXMuc2FuTG9zcyA8IHRoaXMuc2FuTG9zc0Zvcm11bGEpIHtcclxuICAgICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLnNhbkxvc3NGb3JtdWxhXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5zYW5DaGVjay5pc0Z1bWJsZSkge1xyXG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXHJcbiAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxyXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXHJcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxyXG4gICAgICApXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pIHtcclxuICAgICAgY29uc3QgbWluID0gbmV3IFJvbGwodGhpcy5zYW5Mb3NzRm9ybXVsYSkuZXZhbHVhdGUoe1xyXG4gICAgICAgIG1pbmltaXplOiB0cnVlXHJcbiAgICAgIH0pLnRvdGFsXHJcbiAgICAgIGNvbnN0IG1heCA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxyXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXHJcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxyXG4gICAgICApXHJcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IG1heFxyXG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyByb2xsU2FuTG9zcyAoKSB7XHJcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxyXG5cclxuICAgIGF3YWl0IHRoaXMuc2FuTG9zc1JvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXHJcblxyXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5zYW5Mb3NzUm9sbClcclxuXHJcbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcclxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcclxuICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxyXG4gICAgKVxyXG5cclxuICAgIGlmICh0aGlzLnNhbkxvc3NSb2xsLnRvdGFsID4gbWF4KSB7XHJcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIG1heClcclxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcclxuICB9XHJcblxyXG4gIGFzeW5jIGFwcGx5U2FuTG9zcyAoKSB7XHJcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmxvb3NlU2FuKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sIHRoaXMuc2FuTG9zcylcclxuXHJcbiAgICBpZiAodGhpcy5zYW5Mb3NzID4gMCkgdGhpcy5zdGF0ZS5hY3Rvckxvc3RTYW4gPSB0cnVlXHJcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NBcHBsaWVkID0gdHJ1ZVxyXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcclxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXHJcbiAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXHJcblxyXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxyXG4gICAgICB0aGlzLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxyXG5cclxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnNhbkxvc3MgPCA1KSB7XHJcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxyXG4gICAgICBpZiAodGhpcy5hY3Rvci5oYXNJbmRlZkluc2FuZSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eVRhYmxlUm9sbGVkID0gZmFsc2VcclxuICAgICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eVRhYmxlUm9sbGVkID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYWN0b3IuZGFpbHlTYW5Mb3NzID49IHRoaXMuYWN0b3IuZGFpbHlTYW5MaW1pdCkge1xyXG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XHJcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXHJcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxyXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXHJcbiAgICAgIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lID0gdHJ1ZVxyXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxyXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXHJcbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGxJbnQgKCkge1xyXG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgdGhpcy5pbnRDaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcclxuICAgIHRoaXMuaW50Q2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnaW50J1xyXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cclxuICAgICAgdGhpcy5vcHRpb25zLmludERpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB0aGlzLmludENoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5pbnRNb2RpZmllciB8fCAwXHJcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcclxuICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxyXG4gICAgaWYgKHRoaXMuaW50Q2hlY2sucGFzc2VkIHx8IHRoaXMuc3RhdGUuYWxyZWFkeUluc2FuZSkge1xyXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxyXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IHRydWVcclxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxyXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcclxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxyXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXHJcbiAgICAgIHRoaXMuc3RhdGUubWVtb3J5UmVwcmVzc2VkID0gdHJ1ZVxyXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHRyaWdnZXJJbnNhbml0eSAoKSB7XHJcbiAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxyXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXHJcbiAgfVxyXG5cclxuICBhc3luYyBjbGVhclNhbkxvc3NSZWFzb24gKCkge1xyXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRSZWFzb25TYW5Mb3NzKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sIDApXHJcbiAgICBpZiAoIXRoaXMuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKSB7XHJcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcclxuICAgIC8vIEF0dGFjaGUgdGhlIHNhbkNoZWNrIHJlc3VsdCB0byB0aGUgbWVzc2FnZS5cclxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xyXG4gICAgICB0aGlzLl9faW5saW5lU2FuQ2hlY2sgPSB0aGlzLnNhbkNoZWNrLmlubGluZUNoZWNrLm91dGVySFRNTFxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnNhbkxvc3NSb2xsKSB7XHJcbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMuc2FuTG9zc1JvbGwpXHJcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcclxuICAgICAgdGhpcy5fX2lubGluZUludENoZWNrID0gdGhpcy5pbnRDaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoU2FuQ2hlY2tDYXJkLnRlbXBsYXRlLCB0aGlzKVxyXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cclxuXHJcbiAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXHJcbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkodGhpcywgcmVwbGFjZXIpKVxyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cclxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcblxyXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcclxuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxyXG4gICAgfSlcclxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgcmV0dXJuIG1zZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSAoKSB7XHJcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKHNhbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHRhcmdldHMgPSBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXHJcbiAgICBpZiAodGFyZ2V0cy5sZW5ndGgpIHtcclxuICAgICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMpIHtcclxuICAgICAgICBpZiAodC5hY3Rvci5pc1Rva2VuKSB7XHJcbiAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKHQuYWN0b3IudG9rZW5LZXksIHNhbkRhdGEsIHtcclxuICAgICAgICAgICAgZmFzdEZvcndhcmRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9UYXJnZXRzU2FuQ2hlY2snKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxyXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLmhhc0luZGVmSW5zYW5lKSB7XHJcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmFscmVhZHlJbnNhbmUgPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLnNhbiA8PSAwKSB7XHJcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmludFJvbGxlZCA9IHRydWVcclxuICAgICAgY2hhdENhcmQuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXHJcblxyXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnNhbml0eSA9IHRydWVcclxuICAgICAgY2hhdENhcmQuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXHJcblxyXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5maW5pc2ggPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXHJcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxyXG5cclxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxyXG4gICAgYXdhaXQgY2hhdENhcmQuc2F5KGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUwpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxyXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXHJcblxyXG4gICAgY29uc3QgaHRtbENhcmQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcclxuXHJcbiAgICByZXR1cm4gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWxDYXJkKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XHJcbiAgICBjb25zdCBzYW5DaGVja0NhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcclxuXHJcbiAgICBjb25zdCBzYW5DaGVja0NhcmQgPSBuZXcgU2FuQ2hlY2tDYXJkKClcclxuICAgIE9iamVjdC5hc3NpZ24oc2FuQ2hlY2tDYXJkLCBzYW5DaGVja0NhcmREYXRhKVxyXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XHJcbiAgICAgIHNhbkNoZWNrQ2FyZC5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkNoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcclxuICAgICAgc2FuQ2hlY2tDYXJkLnNhbkNoZWNrID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXHJcbiAgICAgICAgc2FuQ2hlY2tDYXJkLnNhbkNoZWNrXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2FuQ2hlY2tDYXJkLmludENoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcclxuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXHJcbiAgICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcclxuICAgICAgc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsID0gUm9sbC5mcm9tRGF0YShzYW5DaGVja0NhcmQuc2FuTG9zc1JvbGwpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNhbkNoZWNrQ2FyZFxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xyXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcclxuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2hlbHBlci5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3Q29uQ2hlY2sge1xyXG4gIGNvbnN0cnVjdG9yIChhY3RvcklkID0gbnVsbCwgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xyXG4gICAgdGhpcy5jaGVjayA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZClcclxuICAgIHRoaXMuY2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnY29uJ1xyXG4gICAgdGhpcy5jaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgdGhpcy5jaGVjay5kZW55UHVzaCA9IHRydWVcclxuICAgIHRoaXMuYWN0b3JJZCA9IGFjdG9ySWRcclxuICB9XHJcblxyXG4gIGdldCBpc0JsaW5kICgpIHtcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcclxuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxyXG4gIH1cclxuXHJcbiAgc2V0IGlzQmxpbmQgKHgpIHtcclxuICAgIHRoaXMuX2lzQmxpbmQgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgcm9sbE1vZGUgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXHJcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcclxuICB9XHJcblxyXG4gIHNldCByb2xsTW9kZSAoeCkge1xyXG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcclxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdG9yICgpIHtcclxuICAgIGlmICh0aGlzLmFjdG9ySWQpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIHNldCBhY3RvcklkICh4KSB7XHJcbiAgICB0aGlzLl9hY3RvcklkID0geFxyXG4gICAgdGhpcy5jaGVjay5hY3RvciA9IHhcclxuICB9XHJcblxyXG4gIGdldCBhY3RvcklkICgpIHtcclxuICAgIGlmICh0aGlzLl9hY3RvcklkKSByZXR1cm4gdGhpcy5fYWN0b3JJZFxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCB0b2tlbktleSAoKSB7XHJcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSByZXR1cm4gdGhpcy5hY3Rvci50b2tlbktleVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBpc1N1Y2Nlc3MgKCkge1xyXG4gICAgaWYgKHRoaXMuY2hlY2spIHJldHVybiB0aGlzLmNoZWNrLmlzU3VjY2Vzc1xyXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBpc1JvbGxlZCAoKSB7XHJcbiAgICBpZiAodGhpcy5jaGVjayAmJiB0aGlzLmNoZWNrLmRpY2VzICYmIHRoaXMuY2hlY2suZGljZXMudG90YWwpIHJldHVybiB0cnVlXHJcbiAgICBlbHNlIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XHJcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soKVxyXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChjb25DaGVjaywgY2FyZClcclxuICAgIGNvbnN0IGh0bWxDaGVjayA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcclxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KGh0bWxDaGVjaywgY29uQ2hlY2suY2hlY2spXHJcbiAgICBjb25DaGVjay5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcclxuICAgIHJldHVybiBjb25DaGVja1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0Q2hlY2tFbGVtZW50ICgpIHtcclxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzLmNoZWNrKVxyXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxyXG4gICAgaWYgKGh0bWxFbGVtZW50KSB7XHJcbiAgICAgIGh0bWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NoYXQtY2FyZCcsICdpdGVtLWNhcmQnLCAncm9sbC1jYXJkJylcclxuICAgICAgcmV0dXJuIGh0bWxFbGVtZW50XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdG9NZXNzYWdlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXHJcblxyXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMucm9sbENvbigpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxyXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxyXG5cclxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xyXG4gICAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXHJcbiAgICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxyXG4gICAgbGV0IHNwZWFrZXJcclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XHJcbiAgICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW5cclxuICAgICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxyXG5cclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xyXG4gICAgICB1c2VyOiB1c2VyLmlkLFxyXG4gICAgICBzcGVha2VyLFxyXG4gICAgICBmbGF2b3I6IHRoaXMuZmxhdm9yLFxyXG4gICAgICBjb250ZW50OiBodG1sRWxlbWVudC5vdXRlckhUTUxcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXHJcbiAgICApIHtcclxuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpIC8vIENoYW5nZSBmb3IgdXNlclxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcclxuXHJcbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcclxuICAgICAgcmV0dXJuIG1zZ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGxDb24gKCkge1xyXG4gICAgdGhpcy5jaGVjay5oaWRlRGljZVJlc3VsdCA9IHRydWVcclxuICAgIGF3YWl0IHRoaXMuY2hlY2suX3BlcmZvcm0oKVxyXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgIXRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuYXBwbGllZCA9IHRydWVcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcclxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcclxuXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXHJcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXHJcblxyXG4gICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxyXG4gICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcclxuXHJcbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiB0aGlzLmlzUm9sbGVkICYmICF0aGlzLmlzU3VjY2Vzcykge1xyXG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuXHJcbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxyXG5cclxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTCB9KVxyXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXHJcbiAgICByZXR1cm4gbXNnXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXHJcbmV4cG9ydCBjbGFzcyBTa2lsbFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLnNlbGVjdC1za2lsbCcpXHJcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdFNraWxsQ2xpY2tlZChldmVudCkpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25TZWxlY3RTa2lsbENsaWNrZWQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxyXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xyXG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcclxuICAgIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLnNlbGVjdGVkID0gdHJ1ZVxyXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDBcclxuICAgIHRoaXMuZGF0YS5kYXRhLmFkZGVkKytcclxuICAgIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5za2lsbC1zZWxlY3RvcicpXHJcbiAgICBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50JylcclxuICAgIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkXHJcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9uc0NvdW50KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxyXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNlbGVjdC5odG1sJyxcclxuICAgICAgZGF0YVxyXG4gICAgKSAvLyBSZW5kZXIgdGVtcGxhdGUgYnVnIGF2ZWMgY2VydGFpbmVzIGRhdGFcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgY29uc3QgZGxnID0gbmV3IFNraWxsU2VsZWN0RGlhbG9nKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgICAgY29udGVudDogaHRtbCxcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICBidXR0b25zOiB7fSxcclxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZGF0YS5hZGRlZCA+PSBkYXRhLm9wdGlvbnNDb3VudCkgcmV0dXJuIHJlc29sdmUoZmFsc2UpXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZGF0YS5za2lsbHMuZmlsdGVyKHNraWxsID0+IHNraWxsLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShzZWxlY3RlZClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdza2lsbC1zZWxlY3QnXSB9XHJcbiAgICAgIClcclxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBQb2ludFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLml0ZW0tbmFtZScpXHJcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcclxuICAgIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25CdXR0b25DbGlja2VkKGV2ZW50KSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xyXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcclxuICAgIGNvbnN0IGl0ZW1MaXN0ID0gbGkuY2xvc2VzdCgnLml0ZW0tbGlzdCcpXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdGFibGUnKSkge1xyXG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJylcclxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLnNlbGVjdGVkID0gZmFsc2VcclxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLm9wdGlvbmFsID0gZmFsc2VcclxuICAgIH1cclxuICAgICQobGkpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpXHJcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnNlbGVjdGVkID0gdHJ1ZVxyXG4gICAgY29uc3QgdG90YWxQb2ludHMgPSBsaVxyXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxyXG4gICAgdG90YWxQb2ludHMuaW5uZXJUZXh0ID1cclxuICAgICAgdGhpcy5kYXRhLmRhdGEudG90YWwgK1xyXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLm11bHRpcGxpZXIgKlxyXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0udmFsdWVcclxuICAgIGNvbnN0IGJ1dHRvbiA9IGxpXHJcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxyXG4gICAgICAucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXHJcbiAgICB0aGlzLmRhdGEuZGF0YS5yZXNvbHZlZCA9IHRydWVcclxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcclxuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XHJcbiAgICAvLyBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAvLyBpZiggIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDA7XHJcbiAgICAvLyB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrO1xyXG4gICAgLy8gY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvaW50LXNlbGVjdG9yJyk7XHJcbiAgICAvLyBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50Jyk7XHJcbiAgICAvLyBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZDtcclxuICAgIC8vIGlmKCB0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zKSB0aGlzLmNsb3NlKCk7XHJcbiAgICAvLyByZXR1cm4gZXZlbnQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25CdXR0b25DbGlja2VkIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cclxuICAgIHN1cGVyLmNsb3NlKClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcclxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9wb2ludC1zZWxlY3QuaHRtbCcsXHJcbiAgICAgIGRhdGFcclxuICAgIClcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgY29uc3QgZGxnID0gbmV3IFBvaW50U2VsZWN0RGlhbG9nKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgICAgY29udGVudDogaHRtbCxcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICBidXR0b25zOiB7fSxcclxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc29sdmVkKSByZXR1cm4gcmVzb2x2ZShkYXRhKVxyXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxyXG4gICAgICApXHJcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXHJcbmV4cG9ydCBjbGFzcyBDaGFyYWNTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG5cclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxyXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyhldmVudCkpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXHJcbiAgICB0aGlzLmRhdGEuZGF0YS5zZWxlY3RlZCA9IGxpLmRhdGFzZXQua2V5XHJcbiAgICB0aGlzLmNsb3NlKClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcclxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXNlbGVjdC5odG1sJyxcclxuICAgICAgZGF0YVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ2hhcmFjU2VsZWN0RGlhbG9nKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgICAgY29udGVudDogaHRtbCxcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICBidXR0b25zOiB7fSxcclxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGVkKSByZXR1cm4gcmVzb2x2ZShkYXRhLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxyXG4gICAgICApXHJcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBEaWFsb2csIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsICovXHJcbmV4cG9ydCBjbGFzcyBDaGFyYWNSb2xsRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcclxuICBjb25zdHJ1Y3RvciAoZGF0YSwgb3B0aW9ucykge1xyXG4gICAgc3VwZXIoZGF0YSwgb3B0aW9ucylcclxuXHJcbiAgICB0aGlzLnJvbGxlZCA9IGRhdGEucm9sbGVkIHx8IHt9XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuICAgIGh0bWwub24oJ2NoYW5nZScsICdpbnB1dCcsIHRoaXMuX29uQ2hhbmdlSW5wdXQuYmluZCh0aGlzKSlcclxuICAgIGh0bWwub24oJ3N1Ym1pdCcsICdmb3JtJywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcucm9sbC1jaGFyYWN0ZXJpc3RpYycsXHJcbiAgICAgIHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcclxuICAgIClcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxyXG4gICAgICB0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxyXG4gICAgKVxyXG4gICAgaHRtbC5vbihcclxuICAgICAgJ2NsaWNrJyxcclxuICAgICAgJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXHJcbiAgICAgIHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXHJcbiAgICApXHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLnJlc2V0LWNoYXJhY3RlcmlzdGljJyxcclxuICAgICAgdGhpcy5fb25SZXNldENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcclxuICAgIClcclxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2J1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxyXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcclxuICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxyXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcclxuICAgIHRoaXMuaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcclxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XHJcbiAgICB0aGlzLmRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXHJcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxyXG4gICAgdGhpcy5yZXNldENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cclxuICAgIGlmIChhY3Rpb24gPT09ICdyb2xsJykge1xyXG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgW1xyXG4gICAgICAgICdzdHInLFxyXG4gICAgICAgICdjb24nLFxyXG4gICAgICAgICdzaXonLFxyXG4gICAgICAgICdkZXgnLFxyXG4gICAgICAgICdhcHAnLFxyXG4gICAgICAgICdpbnQnLFxyXG4gICAgICAgICdwb3cnLFxyXG4gICAgICAgICdlZHUnLFxyXG4gICAgICAgICdsdWNrJ1xyXG4gICAgICBdKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICBhY3Rpb24gPT09ICd2YWxpZGF0ZScgJiZcclxuICAgICAgIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jaGVja1RvdGFsKClcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xyXG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXHJcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXHJcbiAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cclxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XHJcbiAgICAgIGlmIChpc05hTihOdW1iZXIoZm9ybXVsYSkpKSB7XHJcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEpXHJcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICAgICAgcm9sbC50b01lc3NhZ2Uoe1xyXG4gICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VSb2xsaW5nQ2hhcmFjdGVyaXN0aWMnLCB7XHJcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdFtrZXldLmxhYmVsLFxyXG4gICAgICAgICAgICBmb3JtdWxhXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaW5wdXQudmFsdWUgPSByb2xsLnRvdGFsXHJcbiAgICAgIH0gZWxzZSBpbnB1dC52YWx1ZSA9IE51bWJlcihmb3JtdWxhKVxyXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXHJcbiAgICAgIGlmICghdGhpcy5yb2xsZWQpIHRoaXMucm9sbGVkID0ge31cclxuICAgICAgdGhpcy5yb2xsZWRba2V5XSA9IHRydWVcclxuICAgIH1cclxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXHJcbiAgfVxyXG5cclxuICBhc3luYyBpbmNyZWFzZUNoYXJhY3RlcmlzdGljIChrZXkpIHtcclxuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxyXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxyXG4gICAgaWYgKGlucHV0KSB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSArIDFcclxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxyXG4gICAgfVxyXG4gICAgdGhpcy5jaGVja1RvdGFsKClcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xyXG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXHJcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXHJcbiAgICBpZiAoaW5wdXQgJiYgTnVtYmVyKGlucHV0LnZhbHVlKSA+IDApIHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpIC0gMVxyXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXHJcbiAgICB9XHJcbiAgICB0aGlzLmNoZWNrVG90YWwoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVzZXRDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XHJcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcclxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcclxuICAgIGlmIChpbnB1dCkge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IG51bGxcclxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gMFxyXG4gICAgfVxyXG4gICAgdGhpcy5jaGVja1RvdGFsKClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNoYW5nZUlucHV0IChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSlcclxuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNbaW5wdXQubmFtZV0gPSB2YWx1ZVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXHJcbiAgfVxyXG5cclxuICBjaGVja1RvdGFsICgpIHtcclxuICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcclxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1xyXG4gICAgKSkge1xyXG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcclxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcclxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsKSAhPT1cclxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgdmFsaWRhdGlvbi5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKVxyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxyXG4gICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcclxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IHRydWVcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnZhbHVlJylcclxuICAgICAgdmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudG90YWwnKVxyXG4gICAgdG90YWwuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbFxyXG5cclxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCkge1xyXG4gICAgICBpZiAodGhpcy5yb2xsZWQpIHtcclxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9XHJcbiAgICAgICAgICAhT2JqZWN0LmVudHJpZXModGhpcy5yb2xsZWQpLmZpbmQoZWwgPT4gIWVsKSAmJlxyXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5yb2xsZWQpLmxlbmd0aCA9PT0gOVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSkge1xyXG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVCdXR0b24gPVxyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXHJcbiAgICAgICAgICB2YWxpZGF0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25TdWJtaXQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XHJcbiAgICBjb25zdCByb2xsZWQgPSB7fVxyXG4gICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xyXG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcclxuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgKz0gdmFsdWUgfHwgMFxyXG4gICAgICB9XHJcbiAgICAgIGlmICghaXNOYU4odmFsdWUpICYmIHZhbHVlID4gMCkge1xyXG4gICAgICAgIHJvbGxlZFtrZXldID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsKSAhPT1cclxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxyXG4gICAgICApIHtcclxuICAgICAgICBkYXRhLnBvaW50c1dhcm5pbmcgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXHJcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1yb2xsLmh0bWwnLFxyXG4gICAgICBkYXRhXHJcbiAgICApXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNSb2xsRGlhbG9nKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgICAgY29udGVudDogaHRtbCxcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICByb2xsZWQsXHJcbiAgICAgICAgICBidXR0b25zOiB7fSxcclxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnZhbGlkYXRlKSByZXR1cm4gcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxyXG4gICAgICApXHJcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xyXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIHtcclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChcclxuICAgIHNraWxscyxcclxuICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcclxuICAgIGJhc2VWYWx1ZSA9IG51bGwsXHJcbiAgICBuYW1lID0gbnVsbFxyXG4gICkge1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxyXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWMtc2VsZWN0Lmh0bWwnLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGFzU2tpbGxzOiBza2lsbHMubGVuZ3RoID4gMCxcclxuICAgICAgICBza2lsbHMsXHJcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxyXG4gICAgICAgIG5hbWVcclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXHJcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xyXG4gICAgICAgIHRpdGxlOiBuYW1lXHJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTZWxlY3RCYXNlJywgeyBuYW1lIH0pXHJcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XHJcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBzcGVjaWFsaXphdGlvbk5hbWVcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXHJcbiAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgdmFsaWRhdGU6IHtcclxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XHJcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXHJcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxyXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcclxuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9tZWxlZS10YXJnZXQuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlUmVzb2x0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAoXHJcbiAgICBpbml0aWF0b3JNZXNzYWdlID0gbnVsbCxcclxuICAgIHRhcmdldE1lc3NhZ2UgPSBudWxsLFxyXG4gICAgbWVzc2FnZUlkID0gbnVsbFxyXG4gICkge1xyXG4gICAgdGhpcy5pbml0aWF0b3JNZXNzYWdlID0gaW5pdGlhdG9yTWVzc2FnZVxyXG4gICAgdGhpcy50YXJnZXRNZXNzYWdlID0gdGFyZ2V0TWVzc2FnZVxyXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcclxuICB9XHJcblxyXG4gIGFzeW5jIHByZUNyZWF0ZU1lc3NhZ2UgKCkge1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXHJcblxyXG4gICAgLy8gY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoe2FjdG9yOiB0aGlzLmFjdG9yfSk7XHJcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xyXG5cclxuICAgIC8vIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXI7XHJcblxyXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XHJcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcclxuICAgICAgY29udGVudDogaHRtbFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBpbWFnZSB0byBjYXJkLlxyXG4gICAgLy8gZGF0YS5mbGFncyA9IHtcclxuICAgIC8vICAgaW1nOiB0aGlzLmFjdG9yLmlzVG9rZW4gPyB0aGlzLmFjdG9yLnRva2VuLmRhdGEuaW1nOiB0aGlzLmFjdG9yLmltZ1xyXG4gICAgLy8gfTtcclxuXHJcbiAgICBjb25zdCByb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcclxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcclxuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXHJcbiAgICB9XHJcbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcclxuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcclxuXHJcbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcclxuICAgIHRoaXMubWVzc2FnZUlkID0gY2hhdE1lc3NhZ2UuaWRcclxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcclxuICB9XHJcblxyXG4gIGdldCB0YXJnZXQgKCkge1xyXG4gICAgaWYgKHRoaXMudGFyZ2V0TWVzc2FnZSkge1xyXG4gICAgICByZXR1cm4gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQodGhpcy50YXJnZXRNZXNzYWdlKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXJnZXQpIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLnRhcmdldC5hY3RvcktleSlcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgaW5pdGlhdG9yICgpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYXRvck1lc3NhZ2UpIHtcclxuICAgICAgcmV0dXJuIENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKHRoaXMuaW5pdGlhdG9yTWVzc2FnZSlcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgaW5pdGlhdG9yVG9rZW4gKCkge1xyXG4gICAgaWYgKHRoaXMuaW5pdGlhdG9yKSB7XHJcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmluaXRpYXRvci5hY3RvcktleSlcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBhc3luYyByZXNvbHZlICgpIHtcclxuICAgIGlmICh0aGlzLnRhcmdldCkge1xyXG4gICAgICBzd2l0Y2ggKHRoaXMudGFyZ2V0LmFjdGlvbikge1xyXG4gICAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxyXG4gICAgICAgICAgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcclxuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xyXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhdG9yTWlzc2VkJywge1xyXG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxyXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxyXG4gICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXHJcbiAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcclxuICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcclxuICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgIGNhc2UgJ2RvZGdlJzpcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxyXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcclxuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxyXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xyXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XHJcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XHJcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy5pbml0aWF0b3JcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC5za2lsbC5pbWdcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAnZG9kZ2UnXHJcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxyXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID49IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XHJcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xyXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcclxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxyXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gdmVyaWZpZXIgbGEgY29uZGl0aW9uIDw9IHZzIDxcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XHJcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XHJcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQud2VhcG9uLmltZ1xyXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQud2VhcG9uLm5hbWVcclxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxyXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgY2FzZSAnbWFuZXV2ZXInOlxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxyXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcclxuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxyXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XHJcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcclxuICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhcmdldC5uYW1lXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC5za2lsbC5kYXRhLmltZ1xyXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxyXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXHJcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XHJcbiAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xyXG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcclxuICAgICAgfSlcclxuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxyXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhdG9yTWlzc2VkJywge1xyXG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcclxuICAgICAgfSlcclxuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxyXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLndpbm5lcikge1xyXG4gICAgICBpZiAodGhpcy53aW5uZXIucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lKSB7XHJcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IHRydWVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcclxuICAgIGlmICh0aGlzLm1lc3NhZ2VJZCkge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcbiAgICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cclxuICAgICAgaWYgKHRoaXMud2lubmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMud2lubmVyLnRva2VuLmRvY3VtbWVudFxyXG4gICAgICAgIGlmICh0aGlzLndpbm5lci5hY3Rvcikgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLndpbm5lci5hY3RvclxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB0aGlzLndpbm5lciA/IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpIDogbnVsbFxyXG4gICAgICBjb25zdCB1c2VyID1cclxuICAgICAgICB0aGlzLndpbm5lciAmJiB0aGlzLndpbm5lci5hY3Rvci51c2VyXHJcbiAgICAgICAgICA/IHRoaXMud2lubmVyLmFjdG9yLnVzZXJcclxuICAgICAgICAgIDogZ2FtZS51c2VyXHJcblxyXG4gICAgICBsZXQgbXNnXHJcbiAgICAgIGlmICghbWVzc2FnZSkge1xyXG4gICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ1Jlc29saXRpb24gY2FyZCBtaXNzaW5nLCB3YXMgZGVsZXRlZCA/JylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBpZiAoc3BlYWtlcikge1xyXG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcclxuICAgICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cclxuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXHJcbiAgICAgICAgICBzcGVha2VyLFxyXG4gICAgICAgICAgY29udGVudDogaHRtbFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xyXG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcclxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgICByZXR1cm4gbXNnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgdGVtcGxhdGUgKCkge1xyXG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uaHRtbCdcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcclxuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xyXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcclxuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVUYXJnZXQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcclxuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcclxuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcclxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxyXG4gICAgdGhpcy5pbml0aWF0b3JLZXkgPSBudWxsXHJcbiAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCA9IHBhcmVudE1lc3NhZ2VJZFxyXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXHJcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcclxuXHJcbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcclxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcclxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxyXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxyXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxyXG5cclxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxyXG4gICAgdGhpcy5za2lsbElkID0gbnVsbFxyXG4gICAgdGhpcy5pdGVtSWQgPSBudWxsXHJcbiAgICB0aGlzLmRvZGdpbmcgPSBmYWxzZVxyXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gZmFsc2VcclxuICAgIHRoaXMuZmlnaHRpbmdCYWNrID0gZmFsc2VcclxuICAgIHRoaXMubWFuZXV2ZXJpbmcgPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdGlvblNlbGVjdGVkICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHRoaXMuZG9kZ2luZyB8fFxyXG4gICAgICB0aGlzLm5vdFJlc3BvbmRpbmcgfHxcclxuICAgICAgdGhpcy5maWdodGluZ0JhY2sgfHxcclxuICAgICAgdGhpcy5tYW5ldXZlcmluZ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5kb2RnaW5nKSByZXR1cm4gJ2RvZGdlJ1xyXG4gICAgaWYgKHRoaXMubm90UmVzcG9uZGluZykgcmV0dXJuICdub1Jlc3BvbnNlJ1xyXG4gICAgaWYgKHRoaXMuZmlnaHRpbmdCYWNrKSByZXR1cm4gJ2ZpZ2h0QmFjaydcclxuICAgIGlmICh0aGlzLm1hbmV1dmVyaW5nKSByZXR1cm4gJ21hbmV1dmVyJ1xyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCB3ZWFwb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHNraWxsICgpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXHJcbiAgfVxyXG5cclxuICBzZXQgaW5pdGlhdG9yS2V5ICh4KSB7XHJcbiAgICB0aGlzLl9pbml0aWF0b3JLZXkgPSB4XHJcbiAgICB0aGlzLnRhcmdldEtleSA9IHhcclxuICB9XHJcblxyXG4gIGdldCBpbml0aWF0b3JLZXkgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcclxuICAgICAgaWYgKCF0aGlzLl9pbml0aWF0b3IgJiYgdGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcclxuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcclxuICAgICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLl9pbml0aWF0b3IpIHRoaXMuX2luaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBgTm8gaW5pdGlhdG9yIGZvdW5kIGZvciB0YXJnZXQgOiAke3RoaXMuYWN0b3IubmFtZX1gXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9pbml0aWF0b3JLZXlcclxuICB9XHJcblxyXG4gIGdldCBpbml0aWF0b3IgKCkge1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYXRvcktleSkge1xyXG4gICAgICBpZiAodGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcclxuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcclxuICAgICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XHJcbiAgICAgIH0gZWxzZSByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuaW5pdGlhdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcclxuICB9XHJcblxyXG4gIGdldCBtZWxlZUluaXRpYXRvciAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcikge1xyXG4gICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcclxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yXHJcbiAgfVxyXG5cclxuICBnZXQgdGVtcGxhdGUgKCkge1xyXG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5odG1sJ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcclxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcclxuICAgIGNvbnN0IGNhcmQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cclxuXHJcbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxyXG4gICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxyXG5cclxuICAgIHJldHVybiB0YXJnZXRcclxuICB9XHJcblxyXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5tZWxlZS50YXJnZXQnKVxyXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXHJcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXHJcblxyXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XHJcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xyXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcclxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICB0YXJnZXQudG9nZ2xlRmxhZyhmbGFnKVxyXG4gICAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcclxuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXHJcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcclxuICAgICAgOiBmbGFnTmFtZVxyXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcclxuXHJcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XHJcbiAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXHJcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcclxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXHJcblxyXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXHJcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lXHJcblxyXG4gICAgbGV0IHVzZXIgPSBnYW1lLnVzZXJcclxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBsZXQgb3duZXJzID0gW11cclxuICAgICAgY29uc3QgZ21zID0gZ2FtZS51c2Vycy5maWx0ZXIoYSA9PiBhLmlzR00pLm1hcChhID0+IGEuaWQpXHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWN0b3Iub3duZXJzaGlwKSkge1xyXG4gICAgICAgIGlmICh2ID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSB7XHJcbiAgICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgIG93bmVycyA9IGdhbWUudXNlcnMubWFwKGEgPT4gYS5pZClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoIWdtcy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICBvd25lcnMucHVzaChrKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBsZXQgY29udGVudCA9ICcnXHJcbiAgICAgIHN3aXRjaCAob3duZXJzLmxlbmd0aCkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgIC8vIEdNXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgIGlmICh0eXBlb2YgZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGNvbnRlbnQgPVxyXG4gICAgICAgICAgICAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0U2luZ2xlVXNlckZvclRhcmdldCcpXHJcbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xyXG4gICAgICAgICAgZm9yIChjb25zdCBrIG9mIG93bmVycykge1xyXG4gICAgICAgICAgICBjb250ZW50ID1cclxuICAgICAgICAgICAgICBjb250ZW50ICtcclxuICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xyXG4gICAgICAgICAgICAgIGsgK1xyXG4gICAgICAgICAgICAgICdcIj4nICtcclxuICAgICAgICAgICAgICBnYW1lLnVzZXJzLmdldChrKS5uYW1lICtcclxuICAgICAgICAgICAgICAnPC9vcHRpb24+J1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXHJcbiAgICAgICAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcclxuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0J1xyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXHJcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3Rmb3JtJylcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdXNlciA9IHRoaXMuYWN0b3IudXNlclxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xyXG4gICAgICB1c2VyOiB1c2VyLmlkLFxyXG4gICAgICBzcGVha2VyLFxyXG4gICAgICBjb250ZW50OiBodG1sXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XHJcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxyXG4gICAgfVxyXG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XHJcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXHJcblxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcclxuXHJcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWRcclxuICAgIHJldHVybiBtZXNzYWdlXHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIG1lc3NhZ2UudXNlci5pZCAhPT0gZ2FtZS51c2VyLmlkKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hYmxlVG9JbnRlcmFjdFdpdGhDaGF0Q2FyZCcpXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcclxuXHJcbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWwgfSlcclxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgcmV0dXJuIG1zZ1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VXBkYXRlZENoYXRDYXJkICgpIHtcclxuICAgIHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpLnRoZW4oaHRtbCA9PiB7XHJcbiAgICAgIHJldHVybiBodG1sXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNlbGVjdGVkIChjYXJkLCBldmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXHJcblxyXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ2RvZGdlJzpcclxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IHRydWVcclxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXHJcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXHJcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcclxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSAnbm9SZXNwb25zZSc6XHJcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxyXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gdHJ1ZVxyXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxyXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXHJcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBudWxsXHJcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcclxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXHJcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxyXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSB0cnVlXHJcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcclxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25JZFxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICdtYW5ldXZlcic6XHJcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxyXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcclxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcclxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSB0cnVlXHJcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxyXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuXHJcbiAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxyXG5cclxuICAgIHJldHVybiB0YXJnZXRcclxuICB9XHJcblxyXG4gIGFzeW5jIHBlcmZvcm1Ta2lsbENoZWNrIChza2lsbElkID0gbnVsbCwgcHVibGlzaCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cclxuICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxyXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcclxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXHJcbiAgICBjaGVjay5yb2xsVHlwZSA9ICdvcHBvc2VkJ1xyXG4gICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXHJcbiAgICBjaGVjay5hY3Rpb24gPSB0aGlzLmFjdGlvblxyXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXHJcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcclxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxyXG4gICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxyXG5cclxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcclxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcclxuXHJcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xyXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXHJcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxyXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXHJcblxyXG4gICAgcmV0dXJuIGNoZWNrXHJcbiAgfVxyXG5cclxuICBhc3luYyBwdWJsaXNoTm9SZXBvbnNlUmVzdWx0ICgpIHtcclxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxyXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcclxuICAgIHRoaXMubm90UmVzcG9uZGluZyA9IHRydWVcclxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcclxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXHJcbiAgICAgIHRoaXMubWVzc2FnZUlkXHJcbiAgICApXHJcblxyXG4gICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcclxuXHJcbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcclxuICAgIGlmICghY2hlY2sgJiYgIXRoaXMuY2hlY2spIHJldHVybiBudWxsXHJcblxyXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcclxuICAgIHRoaXMucm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayh0aGlzLmNoZWNrKVxyXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXHJcblxyXG4gICAgdGhpcy5yb2xsLnJvbGxJY29ucyA9IFtdXHJcbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XHJcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xyXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XHJcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xyXG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXHJcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcclxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcclxuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcclxuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXHJcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcclxuICAgICAgfVxyXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XHJcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcclxuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcclxuICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdza3VsbCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxyXG4gICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcclxuICAgICAgdGhpcy5tZXNzYWdlSWRcclxuICAgIClcclxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXHJcblxyXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xyXG4gICAgY29uc3QgYWN0b3JLZXkgPSBjYXJkLmRhdGFzZXQuYWN0b3JLZXlcclxuICAgIGNvbnN0IHBhcmVudE1lc3NhZ2VJZCA9IGNhcmQuZGF0YXNldC5wYXJlbnRNZXNzYWdlSWRcclxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gY2FyZC5kYXRhc2V0LmZhc3RGb3J3YXJkID09PSAndHJ1ZSdcclxuICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3TWVsZWVUYXJnZXQoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCwgZmFzdEZvcndhcmQpXHJcblxyXG4gICAgdGFyZ2V0LnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGNhcmQpXHJcblxyXG4gICAgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xyXG4gICAgICB0YXJnZXQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXHJcbiAgICB9IGVsc2UgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxyXG4gICAgcmV0dXJuIHRhcmdldFxyXG4gIH1cclxuXHJcbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xyXG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcclxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRpZG4ndCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXHJcbiAgICB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXHJcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxyXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXHJcblxyXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcclxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxyXG4gICAgZGljZVJvbGxzLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXHJcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXHJcblxyXG4gICAgY29uc3QgcmVzdWxEZXRhaWxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxyXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXHJcbiAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcclxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcclxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxyXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxyXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbHVja0Ftb3VudCxcclxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XHJcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXHJcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsdWNrQW1vdW50LFxyXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XHJcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxyXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbHVja0Ftb3VudCxcclxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuXHJcbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXHJcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxyXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcclxuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwsIENvQzdEYW1hZ2UgfSBmcm9tICcuL2hlbHBlci5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3UmFuZ2VJbml0aWF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGl0ZW1JZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcclxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxyXG4gICAgdGhpcy5pdGVtSWQgPSBpdGVtSWRcclxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxyXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXHJcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcclxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcclxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxyXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxyXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxyXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXHJcbiAgICB0aGlzLnRhcmdldENhcmQgPSBudWxsXHJcbiAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXHJcbiAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxyXG4gICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcclxuICAgIHRoaXMuYnVyc3QgPSBmYWxzZVxyXG4gICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXHJcbiAgICB0aGlzLnRva2VuS2V5ID0gbnVsbFxyXG4gICAgdGhpcy5haW1lZCA9IGZhbHNlXHJcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxyXG4gICAgdGhpcy5fdGFyZ2V0cyA9IFtdXHJcbiAgICBmb3IgKGNvbnN0IHQgb2YgWy4uLmdhbWUudXNlci50YXJnZXRzXSkge1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xyXG4gICAgICB0YXJnZXQudG9rZW4gPSB0XHJcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fdGFyZ2V0cy5sZW5ndGgpIHRoaXMuX3RhcmdldHNbMF0uYWN0aXZlID0gdHJ1ZVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxyXG4gICAgICB0YXJnZXQuYWN0aXZlID0gdHJ1ZVxyXG4gICAgICB0aGlzLl90YXJnZXRzLnB1c2godGFyZ2V0KVxyXG4gICAgfVxyXG4gICAgaWYgKGFjdG9yS2V5KSB7XHJcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICBpZiAodGhpcy50b2tlbikgdGhpcy50b2tlbktleSA9IGFjdG9yLnRva2VuS2V5XHJcbiAgICAgIGlmIChpdGVtSWQpIHtcclxuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxyXG4gICAgICAgIGlmICh3ZWFwb24pIHtcclxuICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5zaW5nbGVTaG90KSB0aGlzLnNpbmdsZVNob3QgPSB0cnVlXHJcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudG9rZW5LZXkpIHtcclxuICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuX3RhcmdldHMpIHtcclxuICAgICAgICBpZiAodC50b2tlbiAmJiB0aGlzLnRva2VuKSB7XHJcbiAgICAgICAgICB0LmRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZSh0LnRva2VuLCB0aGlzLnRva2VuKVxyXG4gICAgICAgICAgdC5yb3VuZGVkRGlzdGFuY2UgPSBNYXRoLnJvdW5kKHQuZGlzdGFuY2UudmFsdWUgKiAxMDApIC8gMTAwXHJcbiAgICAgICAgICB0LmRpc3RhbmNlVW5pdCA9IHQuZGlzdGFuY2UudW5pdFxyXG4gICAgICAgICAgY29uc3QgZGlzdEluWWQgPVxyXG4gICAgICAgICAgICBNYXRoLnJvdW5kKGNoYXRIZWxwZXIudG9ZYXJkcyh0LmRpc3RhbmNlKSAqIDEwMCkgLyAxMDBcclxuICAgICAgICAgIC8vIGlmKCBkaXN0SW5ZZCl7XHJcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvcikge1xyXG4gICAgICAgICAgICB0LnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXHJcbiAgICAgICAgICAgIGNvbnN0IHBiUmFuZ2VJbllkID1cclxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIC8gMTVcclxuICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHBiUmFuZ2VJbllkKSB0LnBvaW50QmxhbmtSYW5nZSA9IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0aGlzLndlYXBvbikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy53ZWFwb24uYmFzZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxyXG4gICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gZmFsc2VcclxuICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcclxuICAgICAgICAgICAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSkgdC5iYXNlUmFuZ2UgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXHJcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmxvbmdSYW5nZVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmxvbmdSYW5nZSAmJlxyXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5leHRyZW1lUmFuZ2VcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgJiZcclxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogMlxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDIgJiZcclxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHQuYmFzZVJhbmdlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0gZWxzZSB0LmJhc2VSYW5nZSA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcclxuICB9XHJcblxyXG4gIGdldCBhY3RvckltZyAoKSB7XHJcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxyXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xyXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdG9yICgpIHtcclxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcclxuICB9XHJcblxyXG4gIGdldCBpdGVtICgpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcclxuICB9XHJcblxyXG4gIGdldCB3ZWFwb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRhcmdldHMgKCkge1xyXG4gICAgaWYgKCF0aGlzLl90YXJnZXRzKSB0aGlzLl90YXJnZXRzID0gW11cclxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXHJcbiAgfVxyXG5cclxuICBnZXQgdGFyZ2V0ICgpIHtcclxuICAgIGlmICh0aGlzLnRhcmdldHMgJiYgdGhpcy50YXJnZXRzLmxlbmd0aCkgcmV0dXJuIHRoaXMudGFyZ2V0cy5wb3AoKVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBza2lsbHMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxyXG4gIH1cclxuXHJcbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpXHJcbiAgfVxyXG5cclxuICBnZXQgYXV0b1dlYXBvblNraWxsICgpIHtcclxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5tYWluV2VhcG9uU2tpbGxcclxuICB9XHJcblxyXG4gIGdldCBhdXRvRmlyZSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXHJcbiAgfVxyXG5cclxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZnVsbEF1dG8gfHwgdGhpcy5tdWx0aXBsZVNob3RzXHJcbiAgfVxyXG5cclxuICBnZXQgYWltaW5nICgpIHtcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2FpbWluZykge1xyXG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9haW1pbmdcclxuICB9XHJcblxyXG4gIGdldCBhY3RpdmVUYXJnZXQgKCkge1xyXG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcclxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzLmZpbmQodCA9PiB0LmFjdGl2ZSlcclxuICB9XHJcblxyXG4gIGdldCBzaG90cyAoKSB7XHJcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zaG90cykgdGhpcy5fc2hvdHMgPSBbXVxyXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXHJcbiAgfVxyXG5cclxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcclxuICAgIHJldHVybiB0aGlzLnNob3RzLmxlbmd0aCArIDFcclxuICB9XHJcblxyXG4gIGdldCBhY3RpdmVUYXJnZXRTaG90RGlmZmljdWx0eSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zaG90RGlmZmljdWx0eSgpXHJcbiAgfVxyXG5cclxuICBzZXQgYWltaW5nIChiKSB7XHJcbiAgICB0aGlzLl9haW1pbmcgPSBiXHJcbiAgfVxyXG5cclxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XHJcbiAgICBsZXQgYW55SGl0ID0gZmFsc2VcclxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XHJcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFueUhpdFxyXG4gIH1cclxuXHJcbiAgZ2V0IHN1Y2Nlc3NmdWxIaXRzICgpIHtcclxuICAgIGNvbnN0IGhpdHMgPSBbXVxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGlmICh0aGlzLnJvbGxzW2luZGV4XS5pc1N1Y2Nlc3MpIHtcclxuICAgICAgICBjb25zdCBoaXQgPSB7XHJcbiAgICAgICAgICByb2xsOiB0aGlzLnJvbGxzW2luZGV4XSxcclxuICAgICAgICAgIHNob3Q6IHRoaXMuc2hvdHNbaW5kZXhdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhpdHMucHVzaChoaXQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChoaXRzLmxlbmd0aCAhPT0gMCkgcmV0dXJuIGhpdHNcclxuICAgIGVsc2UgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBzaG90RmlyZWQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcclxuICB9XHJcblxyXG4gIGdldCB0b3RhbEFtbW8gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMud2VhcG9uLmdldEJ1bGxldExlZnQoKVxyXG4gIH1cclxuXHJcbiAgZ2V0IG1heFNob3RzICgpIHtcclxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSByZXR1cm4gJ+KInidcclxuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcclxuXHJcbiAgICByZXR1cm4gdGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXhcclxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcclxuICAgICAgOiAxXHJcbiAgfVxyXG5cclxuICBnZXQgaWdub3JlQW1tbyAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcmVnYXJkQW1tbycpXHJcbiAgfVxyXG5cclxuICBnZXQgaWdub3JlVXNlc1BlclJvdW5kICgpIHtcclxuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXHJcbiAgfVxyXG5cclxuICBnZXQgb3V0T2ZBbW1vICgpIHtcclxuICAgIGlmICh0aGlzLmlnbm9yZUFtbW8pIHJldHVybiBmYWxzZVxyXG4gICAgaWYgKHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPj0gdGhpcy53ZWFwb24uZ2V0QnVsbGV0TGVmdCgpKSByZXR1cm4gdHJ1ZVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XHJcbiAgICBpZiAodGhpcy5pZ25vcmVVc2VzUGVyUm91bmQpIHJldHVybiBmYWxzZVxyXG4gICAgaWYgKHRoaXMuc2hvdHMpIHJldHVybiB0aGlzLnNob3RzLmxlbmd0aCA+PSB0aGlzLm1heFNob3RzXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCB2b2xsZXlTaXplICgpIHtcclxuICAgIGlmICghdGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0bykgcmV0dXJuIDFcclxuICAgIGlmICh0aGlzLl92b2xsZXlTaXplKSByZXR1cm4gdGhpcy5fdm9sbGV5U2l6ZVxyXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcclxuICAgIHJldHVybiBzaXplIDwgMyA/IDMgOiBzaXplXHJcbiAgfVxyXG5cclxuICBzZXQgdm9sbGV5U2l6ZSAoeCkge1xyXG4gICAgaWYgKHggPj0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKSkge1xyXG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxyXG4gICAgfSBlbHNlIGlmICh4IDw9IDMpIHtcclxuICAgICAgdGhpcy5fdm9sbGV5U2l6ZSA9IDNcclxuICAgIH1cclxuICAgIHRoaXMuX3ZvbGxleVNpemUgPSBwYXJzZUludCh4KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzVm9sbGV5TWluU2l6ZSAoKSB7XHJcbiAgICBpZiAodGhpcy52b2xsZXlTaXplID09PSAzKSByZXR1cm4gdHJ1ZVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcclxuICAgIGNvbnN0IG1heFNpemUgPVxyXG4gICAgICBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApIDwgM1xyXG4gICAgICAgID8gM1xyXG4gICAgICAgIDogTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxyXG4gICAgaWYgKG1heFNpemUgPT09IHRoaXMudm9sbGV5U2l6ZSkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4ga2V5ID09PSB0LmFjdG9yS2V5KVxyXG4gIH1cclxuXHJcbiAgY2FsY1RhcmdldHNEaWZmaWN1bHR5ICgpIHtcclxuICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnRhcmdldHMpIHtcclxuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3REaWZmaWN1bHR5ICh0ID0gbnVsbCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gdCB8fCB0aGlzLmFjdGl2ZVRhcmdldFxyXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlXHJcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xyXG4gICAgICBpZiAodC5sb25nUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5sb25nLmRhbWFnZVxyXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZVxyXG4gICAgfVxyXG4gICAgbGV0IG1vZGlmaWVyID0gdGFyZ2V0Lm1vZGlmaWVyXHJcbiAgICBsZXQgZGlmZmljdWx0eVxyXG4gICAgdGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1blxyXG4gICAgICA/IChkaWZmaWN1bHR5ID0gMSlcclxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxyXG4gICAgbGV0IGRpZmZpY3VsdHlOYW1lID0gJydcclxuICAgIGlmICh0aGlzLmFpbWluZyAmJiB0aGlzLmN1cnJlbnRTaG90UmFuayA9PT0gMSkgbW9kaWZpZXIrK1xyXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXHJcbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIG1vZGlmaWVyLS1cclxuICAgIGlmICh0aGlzLnJlbG9hZCkgbW9kaWZpZXItLVxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxyXG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIG1vZGlmaWVyIC09IHRoaXMuY3VycmVudFNob3RSYW5rIC0gMVxyXG4gICAgaWYgKG1vZGlmaWVyIDwgLTIpIHtcclxuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxyXG4gICAgICBkaWZmaWN1bHR5ICs9IGV4Y2Vzc1xyXG4gICAgICBpZiAoZGlmZmljdWx0eSA+IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwpIHtcclxuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXHJcbiAgICAgIH1cclxuICAgICAgbW9kaWZpZXIgPSAtMlxyXG4gICAgfVxyXG5cclxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IGRpZmZpY3VsdHkpIHtcclxuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcclxuICAgIH1cclxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IGRpZmZpY3VsdHkpIGRpZmZpY3VsdHlOYW1lID0gJ0hhcmQnXHJcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XHJcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0V4dHJlbWUnXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xyXG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdDcml0aWNhbCdcclxuICAgIH1cclxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcclxuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnSW1wb3NzaWJsZSdcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsZXZlbDogZGlmZmljdWx0eSxcclxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXHJcbiAgICAgIG1vZGlmaWVyLFxyXG4gICAgICBkYW1hZ2UsXHJcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvb3QgYXQgdGhlIGFjdGl2ZSB0YXJnZXQuIEFkZCBpdCB0byB0aGUgbGlzdCBvZiBzaG90cy5cclxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxyXG4gICAqL1xyXG4gIGFkZFNob3RBdEN1cnJlbnRUYXJnZXQgKCkge1xyXG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxyXG4gICAgY29uc3Qgc2hvdCA9IHtcclxuICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcclxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXHJcbiAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSxcclxuICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxyXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcclxuICAgICAgbW9kaWZpZXI6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyLFxyXG4gICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcclxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXHJcbiAgICAgIHRyYW5zaXRCdWxsZXRzOiAwLFxyXG4gICAgICBidWxsZXRzU2hvdFRyYW5zaXQ6IDEsXHJcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcclxuXHJcbiAgICBpZiAodGhpcy5mdWxsQXV0bykge1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XHJcbiAgICAgICAgY29uc3QgcHJldmlvdXNTaG90ID0gdGhpcy5zaG90c1t0aGlzLmN1cnJlbnRTaG90UmFuayAtIDJdXHJcbiAgICAgICAgaWYgKHByZXZpb3VzU2hvdC5hY3RvcktleSAhPT0gdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpIHtcclxuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcclxuICAgICAgICAgICAgY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkocHJldmlvdXNTaG90LmFjdG9yS2V5KSxcclxuICAgICAgICAgICAgY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBzaG90LnRyYW5zaXRCdWxsZXRzID0gTWF0aC5mbG9vcihjaGF0SGVscGVyLnRvWWFyZHMoZGlzdGFuY2UpKVxyXG4gICAgICAgICAgaWYgKHNob3QudHJhbnNpdEJ1bGxldHMgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XHJcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XHJcbiAgICAgICAgICAgIGJ1bGxldExlZnQgPSAwXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cclxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LnRyYW5zaXRCdWxsZXRzXHJcbiAgICAgICAgICBzaG90LnRyYW5zaXQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSB0aGlzLnZvbGxleVNpemVcclxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcclxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XHJcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcclxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxyXG4gICAgICB9XHJcbiAgICAgIC8vIGJ1bGxldHNTaG90VHJhbnNpdCBpcyBmb3IgbG9jYWxpemluZyBDb0M3LlNob3RCdWxsZXRzIHVzaW5nIHBhcmFtZXRlcnMsIGxvY2FsaXplIGRvZXMgbm90IGFjY2VwdCBhZGRpbmcgYSBwYXJhbWV0ZXIgYXMgYSBzdW0gb2Ygc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHMsIHNvIEkgY3JlYXRlIGEgbmV3IHZhbHVlIGluIGFkdmFuY2UgdG8gdXNlIGluc3RlYWRcclxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYnVyc3QpIHtcclxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXHJcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxyXG4gICAgICAgIDogMVxyXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcclxuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxyXG4gICAgICAgIGJ1bGxldExlZnQgPSAwXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XHJcblxyXG4gICAgaWYgKHRoaXMuYWltaW5nKSB7XHJcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcclxuICAgICAgdGhpcy5haW1lZCA9IHRydWVcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNob3RzLnB1c2goc2hvdClcclxuICB9XHJcblxyXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XHJcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvcmFuZ2UtaW5pdGlhdG9yLmh0bWwnXHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XHJcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcclxuXHJcbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcclxuICAgIC8vIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXJnZXRUZXN0Jyk7XHJcbiAgICAvLyB0aGlzLnRhcmdldC5hdHRhY2hUb0VsZW1lbnQodGFyZ2V0RWxlbWVudCk7XHJcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XHJcbiAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXHJcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcclxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXHJcblxyXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXHJcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xyXG5cclxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xyXG4gICAgICB1c2VyOiB1c2VyLmlkLFxyXG4gICAgICBzcGVha2VyLFxyXG4gICAgICBjb250ZW50OiBodG1sXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXHJcbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMocm9sbE1vZGUpKSB7XHJcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxyXG4gICAgfVxyXG4gICAgLy8gaWYgKCByb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XHJcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXHJcblxyXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXHJcblxyXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XHJcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcclxuXHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcblxyXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXHJcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcclxuICAgIHJldHVybiBtc2dcclxuICB9XHJcblxyXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XHJcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxyXG4gICAgICA/IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZ05hbWUpXHJcbiAgICAgIDogZmxhZ05hbWVcclxuICAgIGlmIChcclxuICAgICAgZmxhZyA9PT0gJ3NpbmdsZVNob3QnIHx8XHJcbiAgICAgIGZsYWcgPT09ICdtdWx0aXBsZVNob3RzJyB8fFxyXG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcclxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcclxuICAgICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXHJcbiAgICAgIGlmIChmbGFnID09PSAnZnVsbEF1dG8nKSB0aGlzLmJ1cnN0ID0gZmFsc2VcclxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcclxuICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJ2J1cnN0Jykge1xyXG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcclxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxyXG4gICAgICB0aGlzLmJ1cnN0ID0gIXRoaXMuYnVyc3RcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVzb2x2ZUNhcmQgKCkge1xyXG4gICAgdGhpcy5yb2xscyA9IFtdXHJcbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xyXG4gICAgICBsZXQgd2VhcG9uTWFsZnVuY3Rpb24gPSBmYWxzZVxyXG4gICAgICBsZXQgaW5kZXggPSAwXHJcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xyXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCB0aGlzLnNob290QXRUYXJnZXQodGhpcy5zaG90c1tpbmRleF0pXHJcbiAgICAgICAgaWYgKHJvbGwuZGljZT8ucm9sbCkge1xyXG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMud2VhcG9uLnNob290QnVsbGV0cyhcclxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXHJcbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLnRyYW5zaXRCdWxsZXRzKVxyXG4gICAgICAgIClcclxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xyXG4gICAgICAgICAgcm9sbC5pc1N1Y2Nlc3MgPSBmYWxzZVxyXG4gICAgICAgICAgd2VhcG9uTWFsZnVuY3Rpb24gPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluZGV4KytcclxuICAgICAgICB0aGlzLnJvbGxzLnB1c2gocm9sbClcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IHRoaXMuc2hvb3RBdFRhcmdldCgpXHJcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcclxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsLmRpY2Uucm9sbClcclxuICAgICAgfVxyXG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XHJcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxyXG4gICAgICAgIDogMVxyXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cclxuICAgICAgY29uc3Qgc2hvdCA9IHtcclxuICAgICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxyXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxyXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSxcclxuICAgICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXHJcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXHJcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyLFxyXG4gICAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxyXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcclxuICAgICAgICB0cmFuc2l0QnVsbGV0czogMCxcclxuICAgICAgICB0cmFuc2l0OiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMud2VhcG9uLnNob290QnVsbGV0cyhidWxsZXRGaXJlZClcclxuXHJcbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XHJcbiAgICAgICAgcm9sbC5pc1N1Y2Nlc3MgPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxyXG4gICAgICB0aGlzLnJvbGxzLnB1c2gocm9sbClcclxuICAgIH1cclxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXHJcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcclxuXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcblxyXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBzaG90XHJcbiAgICAgID8gdGhpcy5nZXRUYXJnZXRGcm9tS2V5KHNob3QuYWN0b3JLZXkpXHJcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcclxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICBjaGVjay5hY3RvcktleSA9IHRoaXMuYWN0b3JLZXlcclxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxyXG4gICAgY2hlY2suaXRlbSA9IHRoaXMuaXRlbUlkXHJcbiAgICAvLyBDb21iYXQgcm9sbCBjYW5ub3QgYmUgYmxpbmQgb3IgdW5rbm93blxyXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXHJcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxyXG4gICAgaWYgKHRoaXMuYXV0b0ZpcmUpIGNoZWNrLnNraWxsID0gdGhpcy5hdXRvV2VhcG9uU2tpbGxcclxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxyXG4gICAgaWYgKHRoaXMubXVsdGlUYXJnZXQpIHtcclxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHNob3QuZGlmZmljdWx0eVxyXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXHJcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcclxuICAgICAgaWYgKHRoaXMuYWltaW5nKSB7XHJcbiAgICAgICAgdGhpcy5haW1pbmcgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmxldmVsXHJcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxyXG4gICAgY2hlY2sudGFyZ2V0S2V5ID0gdGFyZ2V0LmFjdG9yS2V5XHJcblxyXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXHJcbiAgICByZXR1cm4gY2hlY2tcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXHJcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXHJcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXHJcblxyXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcclxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcclxuXHJcbiAgICByZXR1cm4gaW5pdGlhdG9yXHJcbiAgfVxyXG5cclxuICBjaGFuZ2VWb2xsZXlTaXplICh4KSB7XHJcbiAgICB0aGlzLnZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemUgKyB4XHJcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcblxyXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5yYW5nZS5pbml0aWF0b3InKVxyXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXHJcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXHJcblxyXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XHJcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xyXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcclxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXHJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1mbGFnJykpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXQnKVxyXG4gICAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LnRhcmdldEtleSlcclxuICAgICAgICBpbml0aWF0b3IudGFyZ2V0c1trZXldLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxyXG4gICAgICB9IGVsc2UgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxyXG4gICAgICBpbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGFzc1JvbGwgKHJvbGxJbmRleCkge1xyXG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxyXG4gICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KHJvbGwubHVja05lZWRlZClcclxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRvZXMgbm90IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IHJvbGwuZGlmZmljdWx0eVxyXG4gICAgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXHJcbiAgICByb2xsLmx1Y2tTcGVudCA9IHRydWVcclxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgdXBncmFkZVJvbGwgKHJvbGxJbmRleCwgdXBncmFkZWluZGV4KSB7XHJcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xyXG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxyXG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHJvbGwuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cclxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpXHJcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxyXG4gICAgICApXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpXHJcbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxyXG4gICAgaWYgKHJvbGwuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxyXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXHJcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xyXG4gICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKClcclxuICAgIHJhbmdlSW5pdGlhdG9yLl90YXJnZXRzID0gW11cclxuICAgIGlmIChtZXNzYWdlSWQpIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxyXG4gICAgZWxzZSBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XHJcbiAgICAgIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxyXG4gICAgfVxyXG5cclxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocmFuZ2VJbml0aWF0b3IsIGNhcmQpXHJcbiAgICBjb25zdCBjYXJkVGFyZ2V0cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXHJcbiAgICBmb3IgKGNvbnN0IHQgb2YgY2FyZFRhcmdldHMpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN1JhbmdlVGFyZ2V0LmdldEZyb21FbGVtZW50KHQpXHJcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnRhcmdldHMucHVzaCh0YXJnZXQpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2FyZFNob3RzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvdCcpXHJcbiAgICBpZiAoY2FyZFNob3RzKSB7XHJcbiAgICAgIGZvciAoY29uc3QgcyBvZiBjYXJkU2hvdHMpIHtcclxuICAgICAgICBjb25zdCBzaG90ID0ge31cclxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHNob3QsIHMpXHJcbiAgICAgICAgcmFuZ2VJbml0aWF0b3Iuc2hvdHMucHVzaChzaG90KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBlbHNlIHtcclxuICAgIC8vICBjb25zdCBzaG90ID0ge1xyXG4gICAgLy8gICAgICBzaG90T3JkZXI6IDAsXHJcbiAgICAvLyAgICAgIGFjdG9yS2V5OiBudWxsLFxyXG4gICAgLy8gICAgICBhY3Rvck5hbWU6ICdkdW1teSdcclxuICAgIC8vICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMgPSBbXVxyXG4gICAgY29uc3Qgcm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb2xsLXJlc3VsdCcpXHJcbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcclxuICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KHIpXHJcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzLnB1c2gocm9sbClcclxuICAgIH1cclxuXHJcbiAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UgPSBbXVxyXG4gICAgY29uc3QgZGFtYWdlUm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW1hZ2UtcmVzdWx0cycpXHJcbiAgICBmb3IgKGNvbnN0IGRyIG9mIGRhbWFnZVJvbGxzKSB7XHJcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGwgPSBDb0M3RGFtYWdlLmdldEZyb21FbGVtZW50KGRyKVxyXG4gICAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UucHVzaChkYW1hZ2VSb2xsKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByYW5nZUluaXRpYXRvclxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcm9sbERhbWFnZSAoKSB7XHJcbiAgICB0aGlzLmRhbWFnZSA9IFtdXHJcbiAgICBjb25zdCBoaXRzID0gdGhpcy5zdWNjZXNzZnVsSGl0c1xyXG5cclxuICAgIC8vIGxldCB2b2xsZXlTaXplID0gMTtcclxuICAgIC8vIGlmKCB0aGlzLmZ1bGxBdXRvKSB7XHJcbiAgICAvLyAgdm9sbGV5U2l6ZSA9IHRoaXMudm9sbGV5U2l6ZTtcclxuICAgIC8vICBpZih2b2xsZXlTaXplIDwgMykgdm9sbGV5U2l6ZSA9IDM7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBpZiggdGhpcy5idXJzdCkgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGggPSBoaXRzW2ldXHJcbiAgICAgIGNvbnN0IHZvbGxleVNpemUgPSBwYXJzZUludChoLnNob3QuYnVsbGV0c1Nob3QpXHJcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gW11cclxuXHJcbiAgICAgIGlmICh2b2xsZXlTaXplID4gMCkge1xyXG4gICAgICAgIGxldCBkYW1hZ2VGb3JtdWxhID0gU3RyaW5nKGguc2hvdC5kYW1hZ2UpXHJcbiAgICAgICAgaWYgKCFkYW1hZ2VGb3JtdWxhIHx8IGRhbWFnZUZvcm11bGEgPT09ICcnKSBkYW1hZ2VGb3JtdWxhID0gJzAnXHJcbiAgICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXHJcbiAgICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZGFtYWdlRm9ybXVsYSkuZXZhbHVhdGUoe1xyXG4gICAgICAgICAgbWF4aW1pemU6IHRydWVcclxuICAgICAgICB9KS50b3RhbFxyXG4gICAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSA9IHRoaXMud2VhcG9uLmltcGFsZVxyXG4gICAgICAgICAgPyBgJHtkYW1hZ2VGb3JtdWxhfSArICR7bWF4RGFtYWdlfWBcclxuICAgICAgICAgIDogYCR7bWF4RGFtYWdlfWBcclxuICAgICAgICBjb25zdCBjcml0aWNhbERhbWFnZURpZSA9IENvQzdEYW1hZ2UuZ2V0TWFpbkRpZShjcml0aWNhbERhbWFnZUZvcm11bGEpXHJcblxyXG4gICAgICAgIGxldCBpbXBhbGluZ1Nob3RzID0gMFxyXG4gICAgICAgIGxldCBzdWNjZXNzZnVsU2hvdHMgPSAwXHJcbiAgICAgICAgbGV0IGNyaXRpY2FsID0gZmFsc2VcclxuICAgICAgICBpZiAodGhpcy5mdWxsQXV0byB8fCB0aGlzLmJ1cnN0KSB7XHJcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSBNYXRoLmZsb29yKHZvbGxleVNpemUgLyAyKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3VjY2Vzc2Z1bFNob3RzID09PSAwKSBzdWNjZXNzZnVsU2hvdHMgPSAxXHJcbiAgICAgICAgaWYgKGgucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lKSB7XHJcbiAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gc3VjY2Vzc2Z1bFNob3RzXHJcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplIC0gaW1wYWxpbmdTaG90c1xyXG4gICAgICAgICAgY3JpdGljYWwgPSB0cnVlXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgIT09IGgucm9sbC5zdWNjZXNzTGV2ZWwgJiZcclxuICAgICAgICAgICAgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA8PSBoLnJvbGwuZGlmZmljdWx0eSB8fFxyXG4gICAgICAgICAgICAgIGguc2hvdC5leHRyZW1lUmFuZ2UpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gdm9sbGV5U2l6ZVxyXG4gICAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gMFxyXG4gICAgICAgICAgICBjcml0aWNhbCA9IGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdG90YWwgPSAwXHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHN1Y2Nlc3NmdWxTaG90czsgaW5kZXgrKykge1xyXG4gICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpXHJcbiAgICAgICAgICAvKiogTU9ESUYgMC44LnggKiovXHJcbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcclxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXHJcbiAgICAgICAgICAvKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcclxuICAgICAgICAgICAgZm9ybXVsYTogZGFtYWdlRm9ybXVsYSxcclxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXHJcbiAgICAgICAgICAgIGRpZTogZGFtYWdlRGllLFxyXG4gICAgICAgICAgICBjcml0aWNhbDogZmFsc2VcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpbXBhbGluZ1Nob3RzOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxyXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xyXG4gICAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxyXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgICAgZGFtYWdlUm9sbHMucHVzaCh7XHJcbiAgICAgICAgICAgIGZvcm11bGE6IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSxcclxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXHJcbiAgICAgICAgICAgIGRpZTogY3JpdGljYWxEYW1hZ2VEaWUsXHJcbiAgICAgICAgICAgIGNyaXRpY2FsOiB0cnVlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgdG90YWwgKz0gcm9sbC50b3RhbFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRhcmdldE5hbWUgPSAnZHVtbXknXHJcbiAgICAgICAgbGV0IHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpXHJcbiAgICAgICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICAgIGlmICh0YXJnZXQpIHRhcmdldE5hbWUgPSB0YXJnZXQubmFtZVxyXG5cclxuICAgICAgICB0aGlzLmRhbWFnZS5wdXNoKHtcclxuICAgICAgICAgIHRhcmdldEtleTogaC5yb2xsLnRhcmdldEtleSxcclxuICAgICAgICAgIHRhcmdldE5hbWUsXHJcbiAgICAgICAgICByb2xsczogZGFtYWdlUm9sbHMsXHJcbiAgICAgICAgICB0b3RhbCxcclxuICAgICAgICAgIGNyaXRpY2FsLFxyXG4gICAgICAgICAgZGVhbHQ6IGZhbHNlLFxyXG4gICAgICAgICAgcmVzdWx0U3RyaW5nOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlJywge1xyXG4gICAgICAgICAgICBuYW1lOiB0YXJnZXROYW1lLFxyXG4gICAgICAgICAgICB0b3RhbFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kYW1hZ2VSb2xsZWQgPSB0aGlzLmRhbWFnZS5sZW5ndGggIT09IDBcclxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVhbERhbWFnZSAoKSB7XHJcbiAgICBmb3IgKGxldCBkSW5kZXggPSAwOyBkSW5kZXggPCB0aGlzLmRhbWFnZS5sZW5ndGg7IGRJbmRleCsrKSB7XHJcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICBpZiAoYWN0b3IgPT09IG51bGwpIHtcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1RhcmdldFRvRGFtYWdlJykpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuID0gMFxyXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCA9IDBcclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgbGV0IHJJbmRleCA9IDA7XHJcbiAgICAgICAgICBySW5kZXggPCB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzLmxlbmd0aDtcclxuICAgICAgICAgIHJJbmRleCsrXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBkZWFsdEFtb3VudCA9IGF3YWl0IGFjdG9yLmRlYWxEYW1hZ2UoXHJcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuICs9IGRlYWx0QW1vdW50XHJcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udGFrZW4gPSBkZWFsdEFtb3VudFxyXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLmFic29yYmVkID1cclxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcclxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCArPVxyXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWwgLSBkZWFsdEFtb3VudFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLmRlYWx0ID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlQXJtb3InLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRhcmdldE5hbWUsXHJcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4sXHJcbiAgICAgICAgICAgIGFybW9yOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWRcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZGFtYWdlRGVhbHQgPSB0cnVlXHJcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3UmFuZ2VUYXJnZXQge1xyXG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwpIHtcclxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxyXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXHJcbiAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXHJcbiAgICB0aGlzLmJhc2VSYW5nZSA9IHRydWVcclxuICAgIHRoaXMubG9uZ1JhbmdlID0gZmFsc2VcclxuICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcclxuICAgIHRoaXMuaW5NZWxlZSA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgYmlnICgpIHtcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2JpZykge1xyXG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9iaWcgPSB0aGlzLmFjdG9yLmJ1aWxkID49IDRcclxuICAgICAgZWxzZSB0aGlzLl9iaWcgPSBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2JpZ1xyXG4gIH1cclxuXHJcbiAgc2V0IGJpZyAoYikge1xyXG4gICAgdGhpcy5fYmlnID0gYlxyXG4gIH1cclxuXHJcbiAgZ2V0IHNtYWxsICgpIHtcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3NtYWxsKSB7XHJcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX3NtYWxsID0gdGhpcy5hY3Rvci5idWlsZCA8PSAtMlxyXG4gICAgICBlbHNlIHRoaXMuX3NtYWxsID0gZmFsc2VcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9zbWFsbFxyXG4gIH1cclxuXHJcbiAgc2V0IHNtYWxsIChiKSB7XHJcbiAgICB0aGlzLl9zbWFsbCA9IGJcclxuICB9XHJcblxyXG4gIGdldCBub3JtYWwgKCkge1xyXG4gICAgcmV0dXJuICF0aGlzLmJpZyAmJiAhdGhpcy5zbWFsbFxyXG4gIH1cclxuXHJcbiAgc2V0IG5vcm1hbCAoYikge1xyXG4gICAgdGhpcy5fYmlnID0gZmFsc2VcclxuICAgIHRoaXMuX3NtYWxsID0gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBpc0Zhc3QgKCkge1xyXG4gICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5tb3YpIHJldHVybiB0aGlzLmFjdG9yLm1vdiA+PSA4XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBmYXN0ICgpIHtcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2Zhc3QpIHtcclxuICAgICAgLy8gaWYoIHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5tb3YpIHRoaXMuX2Zhc3QgPSB0aGlzLmFjdG9yLm1vdiA+PSA4O1xyXG4gICAgICAvLyBlbHNlIHRoaXMuX2Zhc3QgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fZmFzdCA9IGZhbHNlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fZmFzdFxyXG4gIH1cclxuXHJcbiAgc2V0IGZhc3QgKGIpIHtcclxuICAgIHRoaXMuX2Zhc3QgPSBiXHJcbiAgfVxyXG5cclxuICBnZXQgYWN0b3IgKCkge1xyXG4gICAgaWYgKHRoaXMuYWN0b3JLZXkgJiYgIXRoaXMuX2FjdG9yKSB7XHJcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcclxuICB9XHJcblxyXG4gIGdldCBuYW1lICgpIHtcclxuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXHJcbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxyXG4gICAgcmV0dXJuICdEdW1teSdcclxuICB9XHJcblxyXG4gIGdldCBpbWcgKCkge1xyXG4gICAgaWYgKHRoaXMudG9rZW4pIHtcclxuICAgICAgaWYgKHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5kYXRhLmltZ1xyXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xyXG4gIH1cclxuXHJcbiAgZ2V0IHRva2VuICgpIHtcclxuICAgIGlmICghdGhpcy5fdG9rZW4gJiYgdGhpcy5hY3RvcktleSkge1xyXG4gICAgICB0aGlzLl90b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fdG9rZW5cclxuICB9XHJcblxyXG4gIGdldCBzaXplVGV4dCAoKSB7XHJcbiAgICBpZiAodGhpcy5iaWcpIHtcclxuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0VGl0bGUnKVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc21hbGwpIHtcclxuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuU21hbGxUYXJnZXRUaXRsZScpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXRUaXRsZScpXHJcbiAgfVxyXG5cclxuICBnZXQgc2l6ZUxhYmVsICgpIHtcclxuICAgIGlmICh0aGlzLmJpZykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0JylcclxuICAgIGlmICh0aGlzLnNtYWxsKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmNvbWJhdENhcmQuU21hbGxUYXJnZXQnKVxyXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0JylcclxuICB9XHJcblxyXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcclxuICAgIGlmICh0aGlzLmJhc2VSYW5nZSB8fCB0aGlzLnBvaW50QmxhbmtSYW5nZSkge1xyXG4gICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5sb25nUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcclxuICAgIGlmICh0aGlzLmV4dHJlbWVSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxyXG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxyXG4gIH1cclxuXHJcbiAgZ2V0IG1vZGlmaWVyICgpIHtcclxuICAgIGxldCBtb2RpZmllciA9IDBcclxuICAgIGlmICh0aGlzLmNvdmVyKSBtb2RpZmllci0tXHJcbiAgICBpZiAodGhpcy5wb2ludEJsYW5rUmFuZ2UpIG1vZGlmaWVyKytcclxuICAgIGlmICh0aGlzLmZhc3QpIG1vZGlmaWVyLS1cclxuICAgIGlmICh0aGlzLnNtYWxsKSBtb2RpZmllci0tXHJcbiAgICBpZiAodGhpcy5iaWcpIG1vZGlmaWVyKytcclxuICAgIGlmICh0aGlzLmluTWVsZWUpIG1vZGlmaWVyLS1cclxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgbW9kaWZpZXIrK1xyXG4gICAgcmV0dXJuIG1vZGlmaWVyXHJcbiAgfVxyXG5cclxuICBzZXQgdG9rZW4gKHQpIHtcclxuICAgIHRoaXMuX3Rva2VuID0gdFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcclxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBlbGVtZW50KVxyXG4gICAgcmV0dXJuIHRhcmdldFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNoYW5nZURpc3BsYXllZFRhcmdldCAoZXZlbnQpIHtcclxuICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1zZWxlY3RvcicpKSByZXR1cm4gbnVsbFxyXG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCB0YXJnZXRzID0gdGFyZ2V0U2VsZWN0b3IuY2xvc2VzdCgnLnRhcmdldHMnKVxyXG4gICAgY29uc3QgdGFyZ2V0TGlzdCA9IHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXHJcbiAgICByZXR1cm4gdGFyZ2V0TGlzdFxyXG4gIH1cclxuXHJcbiAgYXR0YWNoVG9FbGVtZW50IChlbGVtZW50KSB7XHJcbiAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudCh0aGlzLCBlbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRmxhZyAoZmxhZykge1xyXG4gICAgaWYgKFxyXG4gICAgICBmbGFnID09PSAnYmFzZVJhbmdlJyB8fFxyXG4gICAgICBmbGFnID09PSAnbG9uZ1JhbmdlJyB8fFxyXG4gICAgICBmbGFnID09PSAnZXh0cmVtZVJhbmdlJyB8fFxyXG4gICAgICBmbGFnID09PSAncG9pbnRCbGFua1JhbmdlJ1xyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcclxuICAgICAgdGhpcy5iYXNlUmFuZ2UgPSBmYWxzZVxyXG4gICAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXHJcbiAgICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcclxuICAgICAgdGhpcy5vdXRPZlJhbmdlID0gZmFsc2VcclxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcclxuICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJ3NpemUnKSB7XHJcbiAgICAgIGlmICh0aGlzLnNtYWxsKSB7XHJcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5iaWcgPSB0cnVlXHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5iaWcpIHtcclxuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcclxuICAgICAgICB0aGlzLmJpZyA9IGZhbHNlXHJcbiAgICAgIH0gZWxzZSB0aGlzLnNtYWxsID0gdHJ1ZVxyXG4gICAgfSBlbHNlIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxyXG4gICAgaWYgKGZsYWcgPT09ICdmYXN0JyAmJiB0aGlzLmZhc3QgJiYgIXRoaXMuaXNGYXN0KSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldhcm5GYXN0VGFyZ2V0V2l0aFdyb25nTU9WJywge1xyXG4gICAgICAgICAgbW92OiB0aGlzLmFjdG9yLm1vdlxyXG4gICAgICAgIH0pXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBkaWZmT2JqZWN0LCBleHBhbmRPYmplY3QsIEZvcm1EYXRhRXh0ZW5kZWQsIGdhbWUsIG1lcmdlT2JqZWN0LCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cclxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEludGVyYWN0aXZlQ2hhdENhcmQge1xyXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXHJcbiAgfVxyXG5cclxuICBnZXQgb3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcclxuICB9XHJcblxyXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRlbXBsYXRlXHJcbiAgfVxyXG5cclxuICBnZXQgY3NzQ2xhc3NlcyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXHJcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXHJcbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxyXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXHJcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXHJcblxyXG4gICAgY29uc3QgY2hhdERhdGEgPSBtZXJnZU9iamVjdChcclxuICAgICAge1xyXG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcclxuICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMudGl0bGUpLFxyXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcclxuICAgICAgfSxcclxuICAgICAgb3B0aW9ubmFsQ2hhdERhdGFcclxuICAgIClcclxuXHJcbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcclxuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxyXG5cclxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xyXG4gICAgICByZXR1cm4gbXNnXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgaWYgKG9wdGlvbnMuY29tcHV0ZSkgdGhpcy5jb21wdXRlKClcclxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcclxuICAgICAgdGhpcy50b01lc3NhZ2UoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXHJcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXHJcblxyXG4gICAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXHJcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXHJcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxyXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXHJcblxyXG4gICAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXHJcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXHJcblxyXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xyXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcclxuICAgICAgfSlcclxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXHJcbiAgICAgIHJldHVybiBtc2dcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLmludGVyYWN0aXZlLWNhcmQgLmljLXJhZGlvLXN3aXRjaCcsXHJcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcclxuICAgIClcclxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1zd2l0Y2gnLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLnN1Ym1pdCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXHJcbiAgICBodG1sLm9uKCdmb2N1c291dCcsICdpbnB1dCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXHJcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCBidXR0b24nLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5vbigna2V5ZG93bicsICdmb3JtJywgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXHJcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSBodG1sTWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY2FyZCcpXHJcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXHJcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcykgcmV0dXJuXHJcbiAgICBpZiAoXHJcbiAgICAgICFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhnYW1lLkNvQzcuY2FyZHMpLmluY2x1ZGVzKFxyXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc1xyXG4gICAgICApXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgSW50ZXJhY3RpdmVDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcclxuICAgIGNvbnN0IHR5cGVkQ2FyZCA9IE9iamVjdC5hc3NpZ24oXHJcbiAgICAgIG5ldyBnYW1lLkNvQzcuY2FyZHNbaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzXSgpLFxyXG4gICAgICBjYXJkXHJcbiAgICApXHJcbiAgICB0eXBlZENhcmQuYXNzaWduT2JqZWN0KClcclxuICAgIHR5cGVkQ2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IHR5cGVcclxuICAgKiBAcmV0dXJuc1xyXG4gICAqL1xyXG4gIGFzc2lnbk9iamVjdCAoKSB7fVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgd2lsbCBjaGVjayBmb3IgYW4gYWN0aW9uIChkYXRhLWFjdGlvbilcclxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cclxuICAgKi9cclxuICBfb25CdXR0b24gKGV2ZW50KSB7XHJcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICAvLyBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJyAvL0F2b2lkIG11bHRpcGxlIHB1c2hcclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxyXG4gICAgaWYgKHRoaXNbYWN0aW9uXSkgdGhpc1thY3Rpb25dKHsgZXZlbnQsIHVwZGF0ZTogdHJ1ZSB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IGV2ZW50XHJcbiAgICogQHJldHVybnMgZmFsc2UgaWYga2V5IGlzIGVudGVyIHRvIGF2b2lkIGdsb2JhbCBzdWJtaXNzaW9uXHJcbiAgICovXHJcbiAgX29uS2V5IChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgdGhpcy5fb25TdWJtaXQoZXZlbnQpXHJcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXHJcbiAgfVxyXG5cclxuICBfb25TdWJtaXQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXHJcbiAgICBpZiAoIWNhcmQpIHJldHVyblxyXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxyXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgX3VwZGF0ZSAoY2FyZCkge1xyXG4gICAgY29uc3QgZm9ybXMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKVxyXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBmb3JtID0gZm9ybXNbaV1cclxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxyXG4gICAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcclxuICAgICAgZGF0YSA9IGRpZmZPYmplY3QodGhpcywgZXhwYW5kT2JqZWN0KGRhdGEpKVxyXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xyXG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgdXBkYXRlcyA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZXNcclxuICB9XHJcblxyXG4gIGdldCBtZXNzYWdlICgpIHtcclxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxyXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHNldCBtZXNzYWdlICh4KSB7XHJcbiAgICB0aGlzLl9tZXNzYWdlID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XHJcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXHJcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcclxuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXHJcbiAgICAgIGV4Y2x1ZGU6IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbScsICdfbWVzc2FnZScsICdfaHRtbFJvbGwnXSxcclxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ19fJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGEgKCkge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5kYXRhU3RyaW5nKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGFTdHJpbmcgKCkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgcm9sbE1vZGUgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXHJcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcclxuICB9XHJcblxyXG4gIHNldCByb2xsTW9kZSAoeCkge1xyXG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcclxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcclxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcclxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXHJcbiAgICByZXR1cm4gY2FyZFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxyXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcclxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcclxuICAgIHJldHVybiBjYXJkXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xyXG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxyXG4gICAgaWYgKCFjYXJkRGF0YS5tZXNzYWdlSWQpIHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxyXG4gICAgICBjYXJkRGF0YS5tZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcclxuICAgIH1cclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XHJcbiAgICBjb25zdCBjYXJkID0gT2JqZWN0LmFzc2lnbihuZXcgdGhpcygpLCBkYXRhKVxyXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3QoKVxyXG4gICAgcmV0dXJuIGNhcmRcclxuICB9XHJcblxyXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIHNldEZsYWcgKGZsYWdOYW1lKSB7XHJcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cclxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xyXG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXHJcbiAgICB0aGlzW2ZsYWdOYW1lXSA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xyXG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBpZiAoJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiB0aGlzLl9vbkJ1dHRvbihldmVudClcclxuICAgIGlmIChcclxuICAgICAgdGFyZ2V0ICYmXHJcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiZcclxuICAgICAgIWdhbWUudXNlci5pc0dNXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xyXG4gICAgaWYgKCFmbGFnKSByZXR1cm5cclxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5jbG9zZXN0KCcuaWMtcmFkaW8nKVxyXG4gICAgaWYgKCF0b2dnbGUpIHtcclxuICAgICAgdGhpcy50b2dnbGVGbGFnKGZsYWcpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxyXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xyXG4gICAgICAgIHRoaXMudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0RmxhZyhmbGFnKVxyXG4gICAgfVxyXG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXHJcbiAgICBpZiAoY2FyZCkgdGhpcy5fdXBkYXRlKGNhcmQpXHJcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcblxyXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xyXG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXHJcbiAgfVxyXG5cclxuICBnZXQgaXNCbGluZCAoKSB7XHJcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXHJcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XHJcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcclxuICB9XHJcblxyXG4gIHNldCBpc0JsaW5kICh4KSB7XHJcbiAgICB0aGlzLl9pc0JsaW5kID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdG9yICgpIHtcclxuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcclxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcclxuICB9XHJcblxyXG4gIGdldCB0b2tlbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXHJcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcclxuICB9XHJcblxyXG4gIGdldCBpdGVtICgpIHtcclxuICAgIGlmICghdGhpcy5pdGVtSWQpIHJldHVybiBudWxsXHJcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXHJcbiAgfVxyXG5cclxuICBnZXQgd2VhcG9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1cclxuICB9XHJcblxyXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XHJcbiAgICByZXR1cm4gWy4uLmdhbWUudXNlci50YXJnZXRzXVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRhcmdldCAoKSB7XHJcbiAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgcmV0dXJuIHRoaXMudGFyZ2V0VG9rZW5cclxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXHJcbiAgfVxyXG5cclxuICBnZXQgaXNUYXJnZXRPd25lciAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50YXJnZXQuaXNPd25lclxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzS2VlcGVyICgpIHtcclxuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxyXG4gICAqIElmIG5vdCB0YXJnZXRLZXkgcHJvdmlkZWQgcmV0dXJuIHRoZSBmaXJzdCB0YXJnZXQuXHJcbiAgICovXHJcbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcclxuICAgIGlmICghdGhpcy5fdGFyZ2V0VG9rZW4pIHtcclxuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xyXG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxyXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xyXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0S2V5ID0gYCR7dGhpcy5fdGFyZ2V0VG9rZW4uc2NlbmUuaWR9LiR7dGhpcy5fdGFyZ2V0VG9rZW4uaWR9YFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXHJcbiAgfVxyXG5cclxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xyXG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xyXG4gICAgICBpZiAodGhpcy50YXJnZXRUb2tlbikge1xyXG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID1cclxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcclxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uZGF0YS5hY3RvciB8fFxyXG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmRvY3VtZW50XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLl90YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0QWN0b3JcclxuICB9XHJcblxyXG4gIGdldCB0YXJnZXRLZXkgKCkge1xyXG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc1RhcmdldCAoKSB7XHJcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBmYWxzZVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcclxuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcclxuICB9XHJcblxyXG4gIGdldCBza2lsbHMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRhcmdldEltZyAoKSB7XHJcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcclxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcclxuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcclxuICB9XHJcblxyXG4gIGdldCBuYW1lICgpIHtcclxuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXHJcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXHJcbiAgfVxyXG5cclxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XHJcbiAgICBpZiAoIXRoaXMudGFyZ2V0KSByZXR1cm4gJ2R1bW15J1xyXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcclxuICB9XHJcblxyXG4gIGdldCBhY3RvckltZyAoKSB7XHJcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxyXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xyXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBnYW1lLCBtZXJnZU9iamVjdCwgUm9sbCwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xyXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZUNoYXRDYXJkIH0gZnJvbSAnLi4vaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xyXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIERhbWFnZUNhcmQgZXh0ZW5kcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcclxuICAvKipcclxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGV4Y2x1ZGU6IFtcclxuICAgICAgICAnX3RhcmdldFRva2VuJyxcclxuICAgICAgICAnX3RhcmdldEFjdG9yJyxcclxuICAgICAgICAnX2h0bWxSb2xsJyxcclxuICAgICAgICAnX2h0bWxJbmxpbmVSb2xsJ1xyXG4gICAgICBdLmNvbmNhdChzdXBlci5kZWZhdWx0T3B0aW9ucy5leGNsdWRlKSxcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvZGFtYWdlLmh0bWwnXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAvLyAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcbiAgLy8gfVxyXG5cclxuICBhc3luYyBhc3NpZ25PYmplY3QgKCkge1xyXG4gICAgaWYgKHRoaXMuZGFtYWdlUm9sbCAmJiB0aGlzLmRhbWFnZVJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcclxuICAgICAgdGhpcy5kYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLmRhbWFnZVJvbGwpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25CdXR0b24gKGV2ZW50KSB7XHJcbiAgICBzdXBlci5fb25CdXR0b24oZXZlbnQpXHJcbiAgfVxyXG5cclxuICBnZXQgY3JpdGljYWwgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcml0aWNhbFxyXG4gIH1cclxuXHJcbiAgc2V0IGNyaXRpY2FsICh4KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zLmNyaXRpY2FsID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IGltcGFsZSAoKSB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuX2ltcGFsZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLndlYXBvbi5pbXBhbGVcclxuICAgIHJldHVybiB0aGlzLl9pbXBhbGVcclxuICB9XHJcblxyXG4gIHNldCBpbXBhbGUgKHgpIHtcclxuICAgIHRoaXMuX2ltcGFsZSA9IHhcclxuICB9XHJcblxyXG4gIGdldCBpc0RhbWFnZUZvcm11bGEgKCkge1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhbWFnZUZvcm11bGEgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcclxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpKSByZXR1cm4gZmFsc2VcclxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuZGFtYWdlRm9ybXVsYSlcclxuICB9XHJcblxyXG4gIGdldCBpc0RhbWFnZU51bWJlciAoKSB7XHJcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzQXJtb3JGb3J1bGEgKCkge1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFybW9yICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXHJcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHJldHVybiBmYWxzZVxyXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5hcm1vcilcclxuICB9XHJcblxyXG4gIGdldCB0b3RhbERhbWFnZVN0cmluZyAoKSB7XHJcbiAgICBsZXQgZGFtYWdlID0gTnVtYmVyKFxyXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXHJcbiAgICApXHJcbiAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcclxuICAgICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkgfHwgTnVtYmVyKHRoaXMuYXJtb3IpID4gMCkge1xyXG4gICAgICAgIGRhbWFnZSA9IGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xyXG4gICAgICAgIGlmIChkYW1hZ2UgPD0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhbWFnZVxyXG4gIH1cclxuXHJcbiAgZ2V0IG5vRGFtYWdlICgpIHtcclxuICAgIGlmICh0aGlzLnJvbGxlZCkge1xyXG4gICAgICBjb25zdCBkYW1hZ2UgPSB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXHJcbiAgICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xyXG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xyXG4gICAgICAgICAgcmV0dXJuICEhKGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKSA8PSAwKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gISEoZGFtYWdlIDw9IDApXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMucm9sbCAmJiAhdGhpcy5pc0RhbWFnZU51bWJlcikge1xyXG4gICAgICBhd2FpdCB0aGlzLnJvbGxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgfHxcclxuICAgICAgKHRoaXMucm9sbCAmJiB0aGlzLnJvbGwudG90YWwgIT0gbnVsbCkgfHxcclxuICAgICAgdGhpcy5oYXJkcm9sbGVkXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLmRhbWFnZUluZmxpY3RlZCAmJiAhdGhpcy5ub0RhbWFnZSkge1xyXG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucm9sbGVkICYmIHRoaXMucm9sbCkge1xyXG4gICAgICBpZiAodGhpcy5yb2xsLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XHJcbiAgICAgICAgdGhpcy5yb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLnJvbGwpXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5yb2xsKVxyXG4gICAgICB0aGlzLl9odG1sSW5saW5lUm9sbCA9IGEub3V0ZXJIVE1MXHJcbiAgICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsLnJlbmRlcigpXHJcbiAgICB9XHJcbiAgICBhd2FpdCBzdXBlci51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgfVxyXG5cclxuICBhc3luYyByb2xsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xyXG4gICAgdGhpcy5yb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5kYW1hZ2VGb3JtdWxhIHx8ICcwJykuZXZhbHVhdGUoe1xyXG4gICAgICBhc3luYzogdHJ1ZVxyXG4gICAgfSlcclxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMucm9sbClcclxuICAgIHRoaXMuaGFyZHJvbGxlZCA9IHRydWVcclxuICAgIG9wdGlvbnMudXBkYXRlID1cclxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxyXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGxBcm1vciAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcclxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmFybW9yKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICB0aGlzLmFybW9yID0gcm9sbC50b3RhbFxyXG4gICAgb3B0aW9ucy51cGRhdGUgPVxyXG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXHJcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XHJcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXHJcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpKSkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckV2YWx1YXRpbmdEYW1hZ2UnKSlcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCB0YXJnZXRzID0gW11cclxuICAgIGNvbnN0IHRhcmdldE5hbWUgPSBbXVxyXG4gICAgY29uc3Qgc2VsZWN0ZWRQbGF5ZXJzID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0b2tlbiA9PiB7XHJcbiAgICAgIHJldHVybiB0b2tlbi5hY3RvclxyXG4gICAgfSlcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RlZFBsYXllcnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBzZWxlY3RlZFBsYXllcnNbaW5kZXhdLmlkKSB7XHJcbiAgICAgICAgY29udGludWVcclxuICAgICAgfVxyXG4gICAgICB0YXJnZXROYW1lLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XS5uYW1lKVxyXG4gICAgICB0YXJnZXRzLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XSlcclxuICAgIH1cclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIHRpdGxlOiAnICcsXHJcbiAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGVhbERhbWFnZScsIHtcclxuICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmcsXHJcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROYW1lXHJcbiAgICAgIH0pLFxyXG4gICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgb25lOiB7XHJcbiAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcclxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxyXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGFtYWdlKHRhcmdldHMpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0d286IHtcclxuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxyXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcclxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7fVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgZGVmYXVsdDogJ3R3bydcclxuICAgIH1cclxuICAgIGlmICh0YXJnZXROYW1lLmxlbmd0aCA+IDApIHtcclxuICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNvbmZpcm1EYW1hZ2UgKHRhcmdldHMpIHtcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBhd2FpdCB0YXJnZXRzW2luZGV4XS5kZWFsRGFtYWdlKE51bWJlcih0aGlzLnRvdGFsRGFtYWdlU3RyaW5nKSwge1xyXG4gICAgICAgIGlnbm9yZUFybW9yOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbFRvJywge1xyXG4gICAgICAgICAgbmFtZTogdGFyZ2V0c1tpbmRleF0ubmFtZSxcclxuICAgICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWFsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xyXG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxyXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcclxuICAgIGlmIChpc05hTihOdW1iZXIoZGFtYWdlKSkpIHtcclxuICAgICAgaWYgKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKSA9PT0gZGFtYWdlKSB7XHJcbiAgICAgICAgZGFtYWdlID0gMFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0Vycm9yIGV2YWx1YXRpbmcgZGFtYWdlJylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudGFyZ2V0QWN0b3IpIHtcclxuICAgICAgYXdhaXQgdGhpcy50YXJnZXRBY3Rvci5kZWFsRGFtYWdlKE51bWJlcihkYW1hZ2UpLCB7XHJcbiAgICAgICAgaWdub3JlQXJtb3I6IHRydWVcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHRoaXMuZGFtYWdlSW5mbGljdGVkID0gdHJ1ZVxyXG4gICAgb3B0aW9ucy51cGRhdGUgPVxyXG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXHJcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhbmdlICgpIHtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UgfHwgJ25vcm1hbCdcclxuICB9XHJcblxyXG4gIHNldCByYW5nZSAoeCkge1xyXG4gICAgY29uc3QgcmFuZ2VzID0gWydub3JtYWwnLCAnbG9uZycsICdleHRyZW1lJ11cclxuICAgIGlmICghcmFuZ2VzLmluY2x1ZXMoeC50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuXHJcbiAgICB0aGlzLl9vcHRpb25zLnJhbmdlID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRhbWFnZUZvcm11bGEgKCkge1xyXG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnJhbmdlXHJcbiAgICBsZXQgZm9ybXVsYSA9IHRoaXMud2VhcG9uPy5zeXN0ZW0/LnJhbmdlW3JhbmdlXT8uZGFtYWdlXHJcbiAgICBsZXQgZGIgPSB0aGlzLmFjdG9yLmRiXHJcbiAgICBpZiAoZGIgPT09IG51bGwgfHwgTnVtYmVyKGRiKSA9PT0gMCkge1xyXG4gICAgICBkYiA9ICcnXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkYiA9IGAke2RifWBcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGIgJiYgIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxyXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGJcclxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5haGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiICsgJy8yJ1xyXG5cclxuICAgIGlmIChmb3JtdWxhKSB7XHJcbiAgICAgIGNvbnN0IG1heERhbWFnZSA9IG5ldyBSb2xsKGZvcm11bGEpLmV2YWx1YXRlKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcclxuICAgICAgbGV0IHJvbGxTdHJpbmdcclxuICAgICAgaWYgKHRoaXMuY3JpdGljYWwpIHtcclxuICAgICAgICBpZiAodGhpcy5pbXBhbGUpIHtcclxuICAgICAgICAgIHJvbGxTdHJpbmcgPSBmb3JtdWxhICsgJysnICsgbWF4RGFtYWdlXHJcbiAgICAgICAgICByZXR1cm4gcm9sbFN0cmluZ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbWF4RGFtYWdlXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmb3JtdWxhXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgYXJtb3IgKCkge1xyXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5fYXJtb3IgJiYgdGhpcy5fYXJtb3IgIT09ICcnKSByZXR1cm4gdGhpcy5fYXJtb3JcclxuICAgIGlmICh0aGlzLnRhcmdldCkge1xyXG4gICAgICByZXR1cm4gdGhpcy50YXJnZXRBY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIDBcclxuICB9XHJcblxyXG4gIHNldCBhcm1vciAoeCkge1xyXG4gICAgdGhpcy5fYXJtb3IgPSB4XHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXHJcbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcclxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXHJcblxyXG5leHBvcnQgY2xhc3MgUm9sbENhcmQge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMucm9sbHMgPSBbXVxyXG4gICAgdGhpcy5pbml0aWF0b3IgPSBudWxsXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxyXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxyXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcclxuICAgIHJldHVybiBjYXJkXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXHJcbiAgICBpZiAoIWNhcmRFbGVtZW50KSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxyXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxyXG4gICAgcmV0dXJuIGNhcmRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBmcm9tSFRNTENhcmRFbGVtZW50IChjYXJkKSB7XHJcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xyXG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXJkLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xyXG4gICAgICAgIGNhcmQucm9sbHNbaW5kZXhdID0gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGNhcmQucm9sbHNbaW5kZXhdKVxyXG4gICAgICAgIGlmIChjYXJkLnJvbGxzW2luZGV4XS5yb2xsZWQpIHtcclxuICAgICAgICAgIGNhcmQucm9sbHNbaW5kZXhdLl9odG1sUm9sbCA9IGF3YWl0IGNhcmQucm9sbHNbaW5kZXhdLmdldEh0bWxSb2xsKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjYXJkXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGNvbnN0IHNwYW4gPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBpZiAoc3BhbiAmJiBzcGFuLmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBtZXNzYWdlID0gc3Bhbi5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcclxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlSWQobWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcclxuICAgIGlmICghY2FyZCkgcmV0dXJuXHJcbiAgICBjb25zdCBmbGFnID0gc3Bhbi5kYXRhc2V0LmZsYWdcclxuICAgIGlmICghZmxhZykgcmV0dXJuXHJcbiAgICBjb25zdCB0b2dnbGUgPSBzcGFuLmNsb3Nlc3QoJy50b2dnbGUnKVxyXG4gICAgaWYgKCF0b2dnbGUpIHtcclxuICAgICAgY2FyZC50b2dnbGVGbGFnKGZsYWcpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcclxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcclxuICAgICAgICBjYXJkLnVuc2V0RmxhZyhiLmRhdGFzZXQuZmxhZylcclxuICAgICAgfVxyXG4gICAgICBjYXJkLnNldEZsYWcoZmxhZylcclxuICAgIH1cclxuICAgIGNhcmQudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGRpc3BhdGNoIChkYXRhKSB7XHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgbGV0IG1lc3NhZ2VzID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcudHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKSAmJlxyXG4gICAgICAgICAgbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3N0YXRlJykgIT09ICdyZXNvbHZlZCdcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2luaXRpYXRvcicpID09PSBkYXRhLnJvbGwuaW5pdGlhdG9yXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKG1lc3NhZ2VzWzBdLnRpbWVzdGFtcClcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXHJcbiAgICAgICAgY29uc3QgdGltZURpZmZTZWMgPSAobm93IC0gdGltZXN0YW1wKSAvIDEwMDBcclxuICAgICAgICBpZiAoMjQgKiA2MCAqIDYwIDwgdGltZURpZmZTZWMpIHtcclxuICAgICAgICAgIGF3YWl0IG1lc3NhZ2VzWzBdLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxyXG4gICAgICAgICAgbWVzc2FnZXMgPSBbXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGNhcmRcclxuICAgICAgaWYgKCFtZXNzYWdlcy5sZW5ndGgpIGNhcmQgPSBuZXcgdGhpcygpXHJcbiAgICAgIGVsc2UgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXHJcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5fcm9sbE1vZGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY2FyZC5fcm9sbE1vZGUgPSBkYXRhLl9yb2xsTW9kZVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxyXG4gICAgfSBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvTWVzc2FnZSAoKSB7XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXHJcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpXHJcbiAgICBodG1sQ2FyZEVsZW1lbnRbMF0uZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxyXG5cclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xyXG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXHJcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMuY29uZmlnLnRpdGxlKSxcclxuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50WzBdLm91dGVySFRNTCxcclxuICAgICAgZmxhZ3M6IHtcclxuICAgICAgICBDb0M3OiB7XHJcbiAgICAgICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxyXG4gICAgICAgICAgc3RhdGU6ICdpbml0aWF0ZWQnLFxyXG4gICAgICAgICAgaW5pdGlhdG9yOiB0aGlzLmluaXRpYXRvclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xyXG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXHJcblxyXG4gICAgY29uc3QgbXNnID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxyXG4gICAgcmV0dXJuIG1zZ1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xyXG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcclxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcclxuICAgICAgYXdhaXQgdGhpcy50b01lc3NhZ2UoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMuY29uZmlnLnRlbXBsYXRlLCB0aGlzKVxyXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxyXG5cclxuICAgICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxyXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxyXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxyXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxyXG5cclxuICAgICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcclxuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXHJcbiAgICAgIH0pXHJcbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgICByZXR1cm4gbXNnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVSb2xsIChkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEuZnJvbUdNKSB7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRSb2xsRGF0YSAoZGF0YSkge1xyXG4gICAgY29uc3QgY2hlY2sgPSBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgZGF0YS5yb2xsKVxyXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxyXG4gICAgaWYgKHRoaXMuY29uZmlnLnR5cGUgPT09ICdjb21iaW5lZENhcmQnKSB7XHJcbiAgICAgIHRoaXMuaW5pdGlhdG9yID0gZGF0YS5yb2xsLmluaXRpYXRvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkUm9sbCAoZGF0YSkge1xyXG4gICAgdGhpcy5yb2xscy5wdXNoKGRhdGEpXHJcbiAgfVxyXG5cclxuICByZW1vdmVSb2xsIChyYW5rKSB7XHJcbiAgICB0aGlzLnJvbGxzLnNwbGljZShyYW5rLCAxKVxyXG4gIH1cclxuXHJcbiAgc2V0RmxhZyAoZmxhZ05hbWUpIHtcclxuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxyXG4gICAgdGhpc1tmbGFnTmFtZV0gPSB0cnVlXHJcbiAgfVxyXG5cclxuICB1bnNldEZsYWcgKGZsYWdOYW1lKSB7XHJcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cclxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcclxuICB9XHJcblxyXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XHJcbiAgICB0aGlzW2ZsYWdOYW1lXSA9ICF0aGlzW2ZsYWdOYW1lXVxyXG4gIH1cclxuXHJcbiAgZ2V0IG1lc3NhZ2UgKCkge1xyXG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXHJcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgc2V0IG1lc3NhZ2UgKHgpIHtcclxuICAgIHRoaXMuX21lc3NhZ2UgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgbWVzc2FnZUlkICgpIHtcclxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcclxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgc2V0IG1lc3NhZ2VJZCAoeCkge1xyXG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxyXG4gIH1cclxuXHJcbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGV4Y2x1ZGU6IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbScsICdfbWVzc2FnZScsICdfaHRtbFJvbGwnXSxcclxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ19fJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICBnZXQgd2lubmVycyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLndpbm5lcilcclxuICB9XHJcblxyXG4gIGdldCB3aW5uZXIgKCkge1xyXG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGgpIHJldHVybiB0aGlzLndpbm5lcnNbMF1cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCBsb29zZXJzICgpIHtcclxuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+ICFyLndpbm5lcilcclxuICB9XHJcblxyXG4gIGdldCBsb29zZXIgKCkge1xyXG4gICAgaWYgKHRoaXMubG9vc2Vycy5sZW5ndGgpIHJldHVybiB0aGlzLmxvb3NlcnNbMF1cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCBoYXNXaW5uZXIgKCkge1xyXG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgaXNLZWVwZXIgKCkge1xyXG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXHJcbiAgfVxyXG5cclxuICBnZXQgcm9sbE1vZGUgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXHJcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcclxuICB9XHJcblxyXG4gIHNldCByb2xsTW9kZSAoeCkge1xyXG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcclxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGEgKCkge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5kYXRhU3RyaW5nKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGFTdHJpbmcgKCkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICBpZiAodGhpcy5jb25maWcuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5jb25maWcuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIG1lcmdlT2JqZWN0ICovXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9kYW1hZ2UuanMnXHJcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgT3Bwb3NlZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcclxuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgLnRvZ2dsZS1zd2l0Y2gnLFxyXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXHJcbiAgICApXHJcbiAgICAvLyBzdXBlci5iaW5kTGlzdGVybmVycyggaHRtbCk7XHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGEnLFxyXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcclxuICAgIClcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYnV0dG9uJyxcclxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmh0bWwnLFxyXG4gICAgICB0eXBlOiAnb3Bwb3NlZENhcmQnXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbmZpZyAoKSB7XHJcbiAgICByZXR1cm4gT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXHJcbiAgfVxyXG5cclxuICBnZXQgYXR0YWNrZXJSb2xsICgpIHtcclxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xyXG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYXR0YWNrZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggPT09IDAgfHwgci5hdHRhY2tlcilcclxuICAgICAgICBpZiAoYXR0YWNrZXIubGVuZ3RoKSByZXR1cm4gYXR0YWNrZXJbMF1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgZGVmZW5kZXJSb2xsICgpIHtcclxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xyXG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgZGVmZW5kZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggIT09IDAgfHwgIXIuYXR0YWNrZXIpXHJcbiAgICAgICAgaWYgKGRlZmVuZGVyLmxlbmd0aCkgcmV0dXJuIGRlZmVuZGVyWzBdXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRlZmVuZGVySXNEb2RnaW5nICgpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXHJcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5za2lsbD8ubmFtZVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XHJcbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFkdmFudGFnZUF0dGFja2VyICgpIHtcclxuICAgIGlmICh0eXBlb2YgdGhpcy5fYWEgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fYWFcclxuICB9XHJcblxyXG4gIGdldCB3aW5uZXJSb2xsc0RhbWFnZSAoKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuY29tYmF0ICYmXHJcbiAgICAgIHRoaXMucm9sbHMubGVuZ3RoID49IDIgJiZcclxuICAgICAgdGhpcy5oYXNXaW5uZXIgJiZcclxuICAgICAgdGhpcy53aW5uZXI/Lml0ZW0/LnR5cGUgPT09ICd3ZWFwb24nXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgc2V0IGFkdmFudGFnZUF0dGFja2VyICh4KSB7XHJcbiAgICB0aGlzLl9hYSA9IHRydWVcclxuICAgIHRoaXMuX2FkID0gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBhZHZhbnRhZ2VEZWZlbmRlciAoKSB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FkID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcclxuICAgIHJldHVybiB0aGlzLl9hZFxyXG4gIH1cclxuXHJcbiAgc2V0IGFkdmFudGFnZURlZmVuZGVyICh4KSB7XHJcbiAgICB0aGlzLl9hZCA9IHRydWVcclxuICAgIHRoaXMuX2FhID0gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBpc1RpZSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy53aW5uZXJDb3VudCA+IDFcclxuICB9XHJcblxyXG4gIGdldCBuZWVkc1RpZUJyZWFrZXIgKCkge1xyXG4gICAgaWYgKCF0aGlzLmNvbWJhdCkgcmV0dXJuIGZhbHNlXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXHJcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsICYmXHJcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5kZWZlbmRlclJvbGwuc3VjY2Vzc0xldmVsXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IHdpbm5lckNvdW50ICgpIHtcclxuICAgIGxldCBjb3VudCA9IDBcclxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XHJcbiAgICAgIGlmIChyLndpbm5lcikgY291bnQgKz0gMVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50XHJcbiAgfVxyXG5cclxuICBnZXQgaXNBdHRhY2tNYW5ldXZlciAoKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuY29tYmF0ICYmXHJcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXHJcbiAgICAgICghdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0gfHxcclxuICAgICAgICB0aGlzLmF0dGFja2VyUm9sbD8uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cilcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgcmVzdWx0VGV4dCAoKSB7XHJcbiAgICBpZiAodGhpcy5jb21iYXQgJiYgdGhpcy5hdHRhY2tlclJvbGwgJiYgdGhpcy5kZWZlbmRlclJvbGwpIHtcclxuICAgICAgaWYgKCF0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIgJiYgIXRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xyXG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwubWFuZXV2ZXIpIHtcclxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwubWFuZXV2ZXIpIHtcclxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJJc0RvZGdpbmcpIHtcclxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBhc3luYyBwcm9jZXNzIChkYXRhKSB7XHJcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ25ldyc6XHJcbiAgICAgICAgaWYgKCF0aGlzLnJvbGxzPy5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMuY29tYmF0ID0gZGF0YS5jb21iYXQgfHwgdW5kZWZpbmVkXHJcbiAgICAgICAgICBpZiAodGhpcy5jb21iYXQpIHtcclxuICAgICAgICAgICAgZGF0YS5yb2xsLmF0dGFja2VyID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhLnJvbGwuaW5kZXggPSB0aGlzLnJvbGxzLmxlbmd0aFxyXG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSAncm9sbCc6XHJcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzpcclxuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGwgKHJhbmspIHtcclxuICAgIGF3YWl0IHRoaXMucm9sbHNbcmFua10uX3BlcmZvcm0oKVxyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcclxuICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXHJcbiAgICAgIHJhbmssXHJcbiAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cclxuICAgIH1cclxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IHRoaXMucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXHJcbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXHJcbiAgICBjb25zdCBtZXNzYWdlID0gYS5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcclxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBPcHBvc2VkQ2hlY2tDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXHJcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcclxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXHJcblxyXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgY2FzZSAndG9nZ2xlLWNvbWJhdCc6IHtcclxuICAgICAgICBjYXJkLmNvbWJhdCA9ICFjYXJkLmNvbWJhdFxyXG4gICAgICAgIC8vIGlmKCAhY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciAmJiAhY2FyZC5hZHZhbnRhZ2VEZWZlbmRlcikgY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciA9IHRydWU7XHJcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XHJcbiAgICAgICAgY2FyZC5yZW1vdmVSb2xsKHJhbmspXHJcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcclxuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXHJcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAncm9sbC1jaGVjayc6IHtcclxuICAgICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXHJcbiAgICAgICAgaWYgKCFjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5KSB7XHJcbiAgICAgICAgICBjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5ID0gYCR7c3BlYWtlci5zY2VuZX0uJHtzcGVha2VyLnRva2VufWBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYXJkLnJvbGwocmFuaylcclxuICAgICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdyb2xsLWRhbWFnZSc6IHtcclxuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXHJcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XHJcbiAgICAgICAgICBjcml0aWNhbDogY2FyZC53aW5uZXIuaXNFeHRyZW1lU3VjY2VzcyxcclxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSBjYXJkLndpbm5lci5hY3Rvci5hY3RvcktleVxyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGNhcmQubG9vc2VyLmFjdG9yLmFjdG9yS2V5XHJcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gY2FyZC53aW5uZXIuaXRlbUlkXHJcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNoYXRDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XHJcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcclxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcclxuICAgICAgICAgIGNsYXNzZXM6IGEuY2xhc3NMaXN0LFxyXG4gICAgICAgICAgdGFyZ2V0OiBhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcihjYXJkLnJvbGxzW3JhbmtdLCBhY3Rpb24sIG9wdGlvbnMpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxyXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXHJcbiAgICAgICAgICByYW5rLFxyXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxyXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNvbXB1dGUgKHJhbmsgPSB1bmRlZmluZWQpIHtcclxuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcclxuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmFjdG9yS2V5ICE9PSAndW5kZWZpbmVkJyAvLyByZW1vdmUgYW55IGFjdG9ycyB0aGF0IG5vIGxvbmdlciBleGlzdFxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIXJhbmspIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXJcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmNvbWJhdCAmJlxyXG4gICAgICAgICAgKCF0aGlzLnJvbGxzW2ldLml0ZW0gfHxcclxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5tbnZyKSAmJlxyXG4gICAgICAgICAgKCh0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldPy5za2lsbD8ubmFtZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpICE9PVxyXG4gICAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpKSB8fFxyXG4gICAgICAgICAgICAhdGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcclxuICAgICAgICAgIHRoaXMucm9sbHNbaV0uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tpXS5nZXRIdG1sUm9sbCh7XHJcbiAgICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMucm9sbHNbcmFua10ucm9sbGVkKSB7XHJcbiAgICAgICAgdGhpcy5yb2xsc1tyYW5rXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLmdldEh0bWxSb2xsKHtcclxuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xyXG4gICAgICAvLyBTb3J0IGNvbWJhdCByb2xscyBieSBpbmRleC5cclxuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgaWYgKGEuaW5kZXggPiBiLmluZGV4KSByZXR1cm4gMVxyXG4gICAgICAgIGlmIChhLmluZGV4IDwgYi5pbmRleCkgcmV0dXJuIC0xXHJcbiAgICAgICAgcmV0dXJuIDBcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIENvbWJhdCByb2xsIGluY2x1ZGVzIG9ubHkgMiBwZXJzb25zLCByZW1vdmUgdGhlIHJlc3QuXHJcbiAgICAgIGlmICh0aGlzLnJvbGxzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICB0aGlzLnJvbGxzID0gW3RoaXMucm9sbHNbMF0sIHRoaXMucm9sbHNbMV1dXHJcbiAgICAgICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcclxuICAgICAgICAgIGRlbGV0ZSByLndpbm5lclxyXG4gICAgICAgICAgZGVsZXRlIHIudGllXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGaXJzdCBwZXJzb24gYWRkZWQgaXMgdGhlIGF0dGFja2VyLlxyXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSkgdGhpcy5yb2xsc1swXS5hdHRhY2tlciA9IHRydWVcclxuXHJcbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdPy5yb2xsZWQgJiYgdGhpcy5yb2xsc1sxXT8ucm9sbGVkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0ucGFzc2VkIHx8IHRoaXMucm9sbHNbMV0ucGFzc2VkKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcclxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFkdmFudGFnZUF0dGFja2VyKSB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIGlmIChhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAtMVxyXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgYi5yb2xsZWQpIHJldHVybiAxXHJcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAwXHJcbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsID4gYi5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXHJcbiAgICAgICAgICByZXR1cm4gLTFcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsIDwgYi5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXHJcbiAgICAgICAgICByZXR1cm4gMVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJykpIHtcclxuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0ID4gYi5tb2RpZmllZFJlc3VsdCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxyXG4gICAgICAgICAgICByZXR1cm4gLTFcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0IDwgYi5tb2RpZmllZFJlc3VsdCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxyXG4gICAgICAgICAgICByZXR1cm4gMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA+IGIucmF3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcclxuICAgICAgICAgICAgcmV0dXJuIC0xXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA8IGIucmF3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcclxuICAgICAgICAgICAgcmV0dXJuIDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDBcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMud2luQ291bnQgPSAwXHJcbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdICYmIHRoaXMucm9sbHNbMF0ucm9sbGVkICYmICF0aGlzLnJvbGxzWzBdLmZhaWxlZCkge1xyXG4gICAgICAgIHRoaXMud2luQ291bnQgPSAxXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0gJiZcclxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5yb2xsZWQgJiZcclxuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPT09IHRoaXMucm9sbHNbaV0uc3VjY2Vzc0xldmVsICYmXHJcbiAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxyXG4gICAgICAgICAgICAgID8gdGhpcy5yb2xsc1swXS5tb2RpZmllZFJlc3VsdCA9PT0gdGhpcy5yb2xsc1tpXS5tb2RpZmllZFJlc3VsdFxyXG4gICAgICAgICAgICAgIDogdGhpcy5yb2xsc1swXS5yYXdWYWx1ZSA9PT0gdGhpcy5yb2xsc1tpXS5yYXdWYWx1ZSlcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLndpbkNvdW50ID0gdGhpcy53aW5Db3VudCArIDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMucm9sbHNbaV0ud2lubmVyID0gaSA8IHRoaXMud2luQ291bnRcclxuICAgICAgICB0aGlzLnJvbGxzW2ldLnRpZSA9IHRoaXMucm9sbHNbaV0ud2lubmVyICYmIHRoaXMud2luQ291bnQgPiAxXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlQ2FyZCAoKSB7XHJcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIEF1ZGlvSGVscGVyLCBDT05GSUcsIGdhbWUsIG1lcmdlT2JqZWN0ICovXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXHJcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29tYmluZWRDaGVja0NhcmQgZXh0ZW5kcyBSb2xsQ2FyZCB7XHJcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCAudG9nZ2xlLXN3aXRjaCcsXHJcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcclxuICAgIClcclxuICAgIC8vIGh0bWwuZmluZCgnLnJvbGwtY2FyZCBhJykuY2xpY2soYXN5bmMgKGV2ZW50KSA9PiBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljayggZXZlbnQpKTtcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGEnLFxyXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXHJcbiAgICApXHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBidXR0b24nLFxyXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5odG1sJyxcclxuICAgICAgdHlwZTogJ2NvbWJpbmVkQ2FyZCcsXHJcbiAgICAgIHRpdGxlOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldCBjb25maWcgKCkge1xyXG4gICAgcmV0dXJuIENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWdcclxuICB9XHJcblxyXG4gIGdldCBzdWNjZXNzQ291bnQgKCkge1xyXG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XHJcbiAgICAgIGxldCBjb3VudCA9IDBcclxuICAgICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcclxuICAgICAgICBpZiAoci5wYXNzZWQpIGNvdW50ICs9IDFcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY291bnRcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCBtYWluQWN0b3JLZXkgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucm9sbHNbMF0/LmFjdG9yPy5hY3RvcktleSB8fCB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCBzdWNjZXNzICgpIHtcclxuICAgIGlmICh0eXBlb2YgdGhpcy5zdWNjZXNzQ291bnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBpZiAodGhpcy5hbnkpIHtcclxuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID4gMCkgcmV0dXJuIHRydWVcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hbGwpIHtcclxuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID09PSB0aGlzLnJvbGxzLmxlbmd0aCkgcmV0dXJuIHRydWVcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgZmFpbHVyZSAoKSB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiAhdGhpcy5zdWNjZXNzXHJcbiAgfVxyXG5cclxuICBnZXQgY2hlY2tHTUluaXRpYXRvciAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5nZXQodGhpcy5pbml0aWF0b3IpPy5pc0dNXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRIdG1sUm9sbCAoKSB7XHJcbiAgICBpZiAoIXRoaXMucm9sbGVkKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oe1xyXG4gICAgICByb2xsOiB0aGlzLl9yb2xsW2NoZWNrLmRpY2VNb2RpZmllciB8fCAwXSxcclxuICAgICAgc2lsZW50OiB0cnVlXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrLmdldEh0bWxSb2xsKHsgaGlkZVN1Y2Nlc3M6IHRydWUgfSlcclxuICB9XHJcblxyXG4gIHByb2Nlc3MgKGRhdGEpIHtcclxuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcclxuICAgICAgY2FzZSAnbmV3JzpcclxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgJ3JvbGwnOlxyXG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSAndXBkYXRlUm9sbCc6IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdhc3NpZ25Sb2xsJzoge1xyXG4gICAgICAgIHRoaXMuYXNzaWduUm9sbChkYXRhKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXHJcbiAgfVxyXG5cclxuICBhc3luYyBhc3NpZ25Sb2xsIChkYXRhKSB7XHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkge1xyXG4gICAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuX3JvbGwgPSBkYXRhLnJvbGxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXHJcbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXHJcbiAgICBjb25zdCBtZXNzYWdlID0gYS5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcclxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBDb21iaW5lZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxyXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXHJcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxyXG5cclxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xyXG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxyXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XHJcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxyXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3JvbGwtY2FyZCc6IHtcclxuICAgICAgICBjb25zdCBwb29sID0ge31cclxuICAgICAgICBmb3IgKGNvbnN0IGRpY2Ugb2YgY2FyZC5yb2xscykge1xyXG4gICAgICAgICAgY29uc3QgZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoZGljZS5kaWNlTW9kaWZpZXIsIDEwKVxyXG4gICAgICAgICAgaWYgKCFpc05hTihkaWNlTW9kaWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHBvb2xbZGljZU1vZGlmaWVyXSA9IGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0RpY2UuY29tYmluZWRSb2xsKHsgcG9vbCB9KVxyXG4gICAgICAgIHJvbGwuaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcclxuICAgICAgICAgIGFjdGlvbjogJ2Fzc2lnblJvbGwnLFxyXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcclxuICAgICAgICAgIHJvbGxcclxuICAgICAgICB9XHJcbiAgICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXHJcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxyXG4gICAgICAgICAgZGF0YTogYS5kYXRhc2V0LFxyXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXHJcbiAgICAgICAgICB0YXJnZXQ6IGFcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXHJcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcclxuICAgICAgICAgIHJhbmssXHJcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxyXG4gICAgICAgICAgcm9sbDoge1xyXG4gICAgICAgICAgICBpbml0aWF0b3I6IGdhbWUudXNlci5pZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxyXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNvbXB1dGUgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9yb2xsKSByZXR1cm5cclxuXHJcbiAgICB0aGlzLnJvbGxzID0gdGhpcy5yb2xscy5maWx0ZXIocm9sbCA9PiB7XHJcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5kYXRhICE9PSAndW5kZWZpbmVkJyAvLyByZW1vdmUgYW55IGFjdG9ycyB0aGF0IG5vIGxvbmdlciBleGlzdFxyXG4gICAgfSlcclxuXHJcbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xyXG4gICAgICBpZiAoIXIucm9sbGVkKSB7XHJcbiAgICAgICAgci5tb2RpZmllciA9IHIuZGljZU1vZGlmaWVyIHx8IDBcclxuICAgICAgICByLmRpZmZpY3VsdHkgPSByLmRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICAgICAgci5mbGF0RGljZU1vZGlmaWVyID0gci5mbGF0RGljZU1vZGlmaWVyIHx8IDBcclxuICAgICAgICByLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHIuZmxhdFRocmVzaG9sZE1vZGlmaWVyIHx8IDBcclxuICAgICAgICBhd2FpdCByLl9wZXJmb3JtKHsgcm9sbDogdGhpcy5fcm9sbFtyLm1vZGlmaWVyXSwgc2lsZW50OiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcclxuICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xyXG4gICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLmdldEh0bWxSb2xsKClcclxuICB9XHJcblxyXG4gIGNsb3NlQ2FyZCAoKSB7XHJcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgZ2FtZSwgVG9rZW4sIHRva2VuRGF0YSwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcclxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcclxuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMnXHJcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5qcydcclxuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xyXG5pbXBvcnQgeyBDb0M3Um9sbCwgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcclxuLy8gaW1wb3J0IHsgQ29DN0RhbWFnZVJvbGwgfSBmcm9tICcuL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xyXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuL2NoYXQvY29uY2hlY2suanMnXHJcbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuL2FwcHMvcGFyc2VyLmpzJ1xyXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xyXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcclxuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXHJcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xyXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcclxuXHJcbmNvbnN0IENIQVRfQ09DN19NRVNTQUdFID0ge1xyXG4gIEZBS0VST0xMOlxyXG4gICAgJzxkaXYgY2xhc3M9XCJkaWNlLXJvbGxcIj48ZGl2IGNsYXNzPVwiZGljZS1yZXN1bHRcIj48ZGl2IGNsYXNzPVwiZGljZS1mb3JtdWxhXCI+Pz8/PC9kaXY+PGg0IGNsYXNzPVwiZGljZS10b3RhbFwiPj88L2g0PjwvZGl2PjwvZGl2PidcclxufVxyXG5leHBvcnQgY2xhc3MgQ29DN0NoYXQge1xyXG4gIC8vIHN0YXRpYyBjcmVhdGVDaGF0TWVzc2FnZUhvb2soY2hhdE1lc3NhZ2UsIG9wdGlvbnMsIHVzZXIpe1xyXG4gIC8vIH1cclxuXHJcbiAgc3RhdGljIHJlbmRlckNoYXRNZXNzYWdlSG9vayAoY2hhdE1lc3NhZ2UsIGh0bWwpIHtcclxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ0dNU2VsZlJvbGwnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcclxuICAgICAgICAucmVwbGFjZVdpdGgoXHJcbiAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJmbGF2b3ItdGV4dFwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAnQ29DNy5Sb2xsU2VjcmV0RGljZSdcclxuICAgICAgICAgICl9PC9zcGFuPmBcclxuICAgICAgICApXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpXHJcbiAgICAgICAgLnJlcGxhY2VXaXRoKFxyXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj4ke0NIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMfTwvZGl2PmBcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAncmVtb3ZlV2lzcGVyVGFyZ2V0cycpICYmICFnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICBodG1sLmZpbmQoJy53aGlzcGVyLXRvJykucmVtb3ZlKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hhdE1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdmYWtlUm9sbCcpICYmIGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcclxuICAgICAgICAucmVwbGFjZVdpdGgoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LktlZXBlclNlbnREZWNveScpKVxyXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5yZW1vdmUoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZha2VSb2xsTWVzc2FnZSAoKSB7XHJcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcclxuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxyXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsU2VjcmV0RGljZScpLFxyXG4gICAgICB3aGlzcGVyOiBnYW1lLnVzZXJzLnBsYXllcnMsXHJcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSLFxyXG4gICAgICBmbGFnczoge1xyXG4gICAgICAgIENvQzc6IHtcclxuICAgICAgICAgIEdNU2VsZlJvbGw6IGZhbHNlLFxyXG4gICAgICAgICAgcmVtb3ZlV2lzcGVyVGFyZ2V0czogdHJ1ZSxcclxuICAgICAgICAgIGZha2VSb2xsOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBjb250ZW50OiBDSEFUX0NPQzdfTUVTU0FHRS5GQUtFUk9MTFxyXG4gICAgfVxyXG5cclxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcclxuICB9XHJcblxyXG4gIC8vIFRPRE8gcmVtcGxhY2VyIGxlcyBnZXRFbGVtZW50c0J5eHh4eCBwYXIgcXVlcnlTZWxlY3RvclxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAgICogIEluaXQgc29ja2V0cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICBzdGF0aWMgcmVhZHkgKCkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0LnJlYWR5Jyk7XHJcbiAgICBnYW1lLkNvQzcgPSAnaW5pdCdcclxuICB9XHJcblxyXG4gIC8vIHN0YXRpYyBvbk1lc3NhZ2UoIGRhdGEpIHtcclxuICAvLyAgY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Lm9uTWVzc2FnZScpO1xyXG4gIC8vICBjb25zb2xlLmxvZyhgbWVzc2FnZSByZWNlaXZlZCBzZW5kJmVyIDoke2RhdGEudXNlcn0gbWVzc2FnZSB0eXBlIDogJHtkYXRhLmFjdGlvbn0gZm9yIG1lc3NhZ2UgOiR7ZGF0YS5tZXNzYWdlSWR9YCk7XHJcbiAgLy8gfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAgICogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIHN0YXRpYyBhc3luYyBjaGF0TGlzdGVuZXJzIChhcHAsIGh0bWwpIHtcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcuY2FyZC1idXR0b25zIGJ1dHRvbicsXHJcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkQWN0aW9uLmJpbmQodGhpcylcclxuICAgIClcclxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJywgQ29DN0NoYXQuX29uQ2hhdENhcmRUZXN0LmJpbmQodGhpcykpO1xyXG4gICAgaHRtbC5vbihcclxuICAgICAgJ2NsaWNrJyxcclxuICAgICAgJy5jYXJkLXRpdGxlJyxcclxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVDb250ZW50LmJpbmQodGhpcylcclxuICAgIClcclxuICAgIGh0bWwub24oXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICcucmFkaW8tc3dpdGNoJyxcclxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaC5iaW5kKHRoaXMpXHJcbiAgICApXHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLnBhbmVsLXN3aXRjaCcsXHJcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoLmJpbmQodGhpcylcclxuICAgIClcclxuXHJcbiAgICBodG1sLm9uKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnLnNpbXBsZS1mbGFnJyxcclxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxyXG4gICAgKVxyXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnZvbGxleS1zaXplJywgQ29DN0NoYXQuX29uQ2hhdENhcmRWb2xsZXlTaXplLmJpbmQodGhpcykpXHJcblxyXG4gICAgaHRtbC5vbihcclxuICAgICAgJ2NsaWNrJyxcclxuICAgICAgJy5kcm9wZG93bi1lbGVtZW50JyxcclxuICAgICAgQ29DN0NoYXQuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQuYmluZCh0aGlzKVxyXG4gICAgKVxyXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnNpbXBsZS10b2dnbGUnLCBDb0M3Q2hhdC5fb25Ub2dnbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxyXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmlzLW91dG51bWJlcmVkJywgQ29DN0NoYXQuX29uT3V0bnVtYmVyZWRTZWxlY3RlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICBodG1sLm9uKCdjbGljaycsICcudGFyZ2V0LXNlbGVjdG9yJywgQ29DN0NoYXQuX29uVGFyZ2V0U2VsZWN0LmJpbmQodGhpcykpXHJcblxyXG4gICAgaHRtbC5vbignZGJsY2xpY2snLCAnLm9wZW4tYWN0b3InLCBDb0M3Q2hhdC5fb25PcGVuQWN0b3IuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sLm9uKCdjbGljaycsICcuY29jNy1saW5rJywgYXdhaXQgQ29DN1BhcnNlci5fb25DaGVjay5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5vbignZHJhZ3N0YXJ0JywgJ2EuY29jNy1saW5rJywgQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sLm9uKCdjbGljaycsICdjb2M3LWlubGluZS1yZXN1bHQnLCBDb0M3Q2hhdC5fb25JbmxpbmUuYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBSb2xsQ2FyZC5iaW5kTGlzdGVybmVycyggaHRtbCk7XHJcbiAgICBPcHBvc2VkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXHJcbiAgICBDb21iaW5lZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9vbk9wZW5BY3RvciAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IGFjdG9yS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdG9yS2V5XHJcbiAgICBpZiAoYWN0b3JLZXkpIHtcclxuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIGlmIChhY3Rvci5pc093bmVyKSBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBvblVwZGF0ZUNoYXRNZXNzYWdlIChjaGF0TWVzc2FnZSkge1xyXG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxyXG5cclxuICAgIC8vIGlmKCBjaGF0TWVzc2FnZS5nZXRGbGFnKCAnQ29DNycsICdyZXZlbGVkJykpe1xyXG4gICAgLy8gfVxyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNoYXRNZXNzYWdlLnR5cGUgPT09IDApIHtcclxuICAgICAgY29uc3QgY2FyZCA9ICQoY2hhdE1lc3NhZ2UuY29udGVudClbMF1cclxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XHJcbiAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5yZXNvbHZlZCA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQudGFyZ2V0Q2FyZCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxyXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoXHJcbiAgICAgICAgICAgICAgICBpbml0aWF0b3IudGFyZ2V0Q2FyZFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBpZiAodGFyZ2V0LnJlc29sdmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXHJcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXQubWVzc2FnZUlkLFxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXHJcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBpZiAoaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXHJcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxyXG4gICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICBpbml0aWF0b3IucmVzb2x1dGlvbkNhcmRcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoY2hhdE1lc3NhZ2UuaWQpXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcclxuICAgICAgICAgICAgICB0YXJnZXQucGFyZW50TWVzc2FnZUlkLFxyXG4gICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxyXG4gICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxyXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5tZWxlZUluaXRpYXRvci5jaGVja1JldmVhbGVkKSB7XHJcbiAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLnJldmVhbENoZWNrKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHJlbmRlck1lc3NhZ2VIb29rIChtZXNzYWdlLCBodG1sKSB7XHJcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXHJcblxyXG4gICAgSW50ZXJhY3RpdmVDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgaWYgKG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdjaGVja1JldmVhbGVkJykpIHtcclxuICAgICAgaHRtbC5maW5kKCcuZGljZS1yb2xsJykucmVtb3ZlQ2xhc3MoJ2dtLXZpc2libGUtb25seScpXHJcbiAgICAgIGh0bWxbMF0uZGF0YXNldC5jaGVja1JldmVhbGVkID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhbmRsZSBzaG93aW5nIGRyb3Bkb3duIHNlbGVjdGlvblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLmRyb3BidG4nKVxyXG4gICAgICAuY2xpY2soZXZlbnQgPT5cclxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICAgICAgICAuY2xvc2VzdCgnLmRyb3Bkb3duJylcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXHJcbiAgICAgIClcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5kcm9wZG93bicpXHJcbiAgICAgIC5tb3VzZWxlYXZlKGV2ZW50ID0+XHJcbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcclxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcclxuICAgICAgKVxyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiotLT5Db0M3Q2hhdC5tZXNzYWdlTGlzdGVuZXJzIG1lc3NhZ2UgOicgKyBtZXNzYWdlLmlkKTtcclxuICAgIC8vIG1lc3NhZ2UuZGF0YS5jb250ZW50ID0gXCJcIjtcclxuICAgIC8vIGRhdGEubWVzc2FnZS5jb250ZW50ID0gXCJcIjtcclxuXHJcbiAgICAvLyBXaGVuIGEgbmV3IGNhcmQgaXMgcHVibGlzaGVkLCBjaGVjayB3ZXRoZXIgaXQncyBhIHJvbGwgdGhhdCBtb2RpZmllcyBhbiBvdGhlciBjYXJkLlxyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LmNoYXQtY2FyZCcpXHJcbiAgICAgIGlmIChjYXJkKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpICYmXHJcbiAgICAgICAgICAhKGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPT09ICd0cnVlJykgJiZcclxuICAgICAgICAgIGNhcmQuZGF0YXNldC5yZWZNZXNzYWdlSWRcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChjYXJkKVxyXG5cclxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ3RhcmdldCcpIHtcclxuICAgICAgICAgICAgcm9sbC5kZWZlbmRhbnRJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXHJcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxyXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ2luaXRpYXRvcicpIHtcclxuICAgICAgICAgICAgcm9sbC5pbml0aWF0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXHJcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxyXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAndHJ1ZSdcclxuXHJcbiAgICAgICAgICBDb0M3Q2hhdC51cGRhdGVDb21iYXRDYXJkVGFyZ2V0KHJvbGwpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlck9ubHkgPSBodG1sLmZpbmQoJy50YXJnZXQtb25seScpXHJcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdXNlck9ubHkpIHtcclxuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgIGNvbnN0IGFjdG9ySWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rvci1pZCcpXHJcbiAgICAgICAgaWYgKGFjdG9ySWQpIHtcclxuICAgICAgICAgIGlmIChnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkuaXNPd25lcikge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ21Pbmx5ID0gaHRtbC5maW5kKCcuZ20tb25seScpXHJcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2YgZ21Pbmx5KSB7XHJcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLnVzZXItdmlzaWJsZS1vbmx5JylcclxuICAgIGZvciAoY29uc3QgZWxlbSBvZiB1c2VyVmlzaWJsZU9ubHkpIHtcclxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnbVZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcuZ20tdmlzaWJsZS1vbmx5JylcclxuICAgIGZvciAoY29uc3QgZWxlbSBvZiBnbVZpc2libGVPbmx5KSB7XHJcbiAgICAgIGlmICghKGdhbWUudXNlci5pc0dNIHx8IChnYW1lLnVzZXIuaXNUcnVzdGVkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RydXN0ZWRDYW5TZWVDaGF0Q2FyZCcpKSkpIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG93bmVyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5vd25lci12aXNpYmxlLW9ubHknKVxyXG4gICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyVmlzaWJsZU9ubHkpIHtcclxuICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcclxuICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLmRhdGFzZXQ/LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBzZWxmLlxyXG4gICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cclxuICAgICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLnBhcmVudEVsZW1lbnQuZGF0YXNldC5hY3RvcktleSkgLy8gVHJ5IHdpdGggcGFyZW50IGVsZW1lbnQuXHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcclxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XHJcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcclxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtdG9rZW4ta2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XHJcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcclxuICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcclxuICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIC8vIEdNIGNhbiBzZWUgZXZlcnl0aGluZ1xyXG4gICAgICBjb25zdCBvd25lck9ubHkgPSBodG1sLmZpbmQoJy5vd25lci1vbmx5JylcclxuICAgICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyT25seSkge1xyXG4gICAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXHJcbiAgICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcclxuICAgICAgICAgIHpvbmUuZGF0YXNldD8uYWN0b3JLZXkgfHwgem9uZS5kYXRhc2V0Py5hY3RvcklkXHJcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBzZWxmLlxyXG4gICAgICAgIGlmICghYWN0b3IpIHtcclxuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFjdG9yKSB7XHJcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFjdG9yKSB7XHJcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXHJcbiAgICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XHJcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxyXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxyXG4gICAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggYWN0b3JJZCk7XHJcbiAgICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgKCFhY3RvciAmJiAhZ2FtZS51c2VyLmlzR00pKSB7XHJcbiAgICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxyXG4gICAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGdtU2VsZWN0T25seSA9IGh0bWwuZmluZCgnLmdtLXNlbGVjdC1vbmx5JylcclxuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzVHJ1c3RlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcpKSkge1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2VsZWN0IG9mIGdtU2VsZWN0T25seSkge1xyXG4gICAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2luYWN0aXZlJylcclxuICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdzaW1wbGUtZmxhZycpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGFjdGlvblR5cGVTdHJpbmcgKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZmlnaHRCYWNrOiAnQ29DNy5maWdodEJhY2snLFxyXG4gICAgICBtYW5ldXZlcjogJ0NvQzcubWFuZXV2ZXInLFxyXG4gICAgICBkb2RnaW5nOiAnQ29DNy5kb2RnZSdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBfb25UYXJnZXRTZWxlY3QgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXkpXHJcbiAgICBjb25zdCB0YXJnZXRzU2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzLXNlbGVjdG9yJylcclxuICAgIGZvciAoY29uc3QgaSBvZiB0YXJnZXRzU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpIHtcclxuICAgICAgaS5zdHlsZS5ib3JkZXIgPSAnbm9uZSdcclxuICAgIH1cclxuICAgIHRhcmdldHNTZWxlY3RvclxyXG4gICAgICAucXVlcnlTZWxlY3RvcihgW2RhdGEta2V5PVwiJHtpbmRleH1cIl1gKVxyXG4gICAgICAucXVlcnlTZWxlY3RvcignaW1nJykuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjMDAwJ1xyXG4gICAgY29uc3QgdGFyZ2V0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMnKVxyXG4gICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpKSB7XHJcbiAgICAgIHQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICB0LmRhdGFzZXQuYWN0aXZlID0gJ2ZhbHNlJ1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGFyZ2V0VG9EaXNwbGF5ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgW2RhdGEtdGFyZ2V0LWtleT1cIiR7aW5kZXh9XCJdYFxyXG4gICAgKVxyXG4gICAgdGFyZ2V0VG9EaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICB0YXJnZXRUb0Rpc3BsYXkuZGF0YXNldC5hY3RpdmUgPSAndHJ1ZSdcclxuICAgIC8vIGNvbnN0IGNoYXRDYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkLnJhbmdlJyk7XHJcbiAgICAvLyBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZCggY2hhdENhcmQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxyXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xyXG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXHJcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICAuY2xvc2VzdCgnLnJlc3BvbnNlLXNlbGVjdGlvbicpXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXHJcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xyXG4gICAgICBkcGRuQm94LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcclxuICAgIH1cclxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXHJcblxyXG4gICAgLy8gY2xvc2UgZHJvcGRvd25cclxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcclxuXHJcbiAgICAvLyBEaXNwbGF5IHRoZSByb2xsIGJ1dHRvblxyXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICAgIC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcclxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICBjb25zdCBidXR0b24gPSBzZWxlY3RlZEJveC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxyXG5cclxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBJZCAtIEJ1aWxkIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGF0XHJcblxyXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIGl0ZW1cclxuXHJcbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgSWRcclxuXHJcbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgYWN0aW9uXHJcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xyXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cclxuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxyXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXHJcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcclxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcclxuICAgIGJ1dHRvbi5kYXRhc2V0Lml0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25JZFxyXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbU5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZVxyXG5cclxuICAgIC8vIFB1dCBzb21lIHRleHQgaW4gdGhlIGJ1dHRvblxyXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcclxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxyXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXHJcbiAgICAgICAgfSUpYFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XHJcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cclxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbk5hbWV9ICgke1xyXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcclxuICAgICAgICB9JSlgXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIF9vbklubGluZSAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcblxyXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmxpbmUtcmVzdWx0JykpIHtcclxuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9vblRvZ2dsZVNlbGVjdGVkIChldmVudCkge1xyXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXHJcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XHJcbiAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVTZWxlY3RlZChjYXJkLCBldmVudClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkID09PSAnJykge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vRG9kZ2VTa2lsbCcpKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBjbGVhciBhbGwgZHJvcCBkb3duIGFuZCBoaWdobGlnaHQgdGhpcyBwYXJ0aWN1bGFyIG9uZVxyXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxyXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxyXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcclxuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXHJcbiAgICB9XHJcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJykgLy8gTmVlZCB0byB0ZXN0IGlmIGl0J3MgcmVhbGx5IGEgZG9kZ2UgISEhXHJcblxyXG4gICAgLy8gU2F2ZSBhY3Rpb24gZm9yIHRoZSByb2xsXHJcbiAgICBjb25zdCBzZWxlY3RlZEJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxyXG4gICAgc2VsZWN0ZWRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXHJcblxyXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcclxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSAnZG9kZ2luZydcclxuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxyXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXHJcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcclxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcclxuXHJcbiAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXHJcbiAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XHJcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXHJcbiAgICB9JSlgXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX29uQ2hhdENhcmRSYWRpb1N3aXRjaCAoZXZlbnQpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZFJhZGlvU3dpdGNoJyk7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBvcHRpb25MaXN0ID1cclxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JhZGlvLXN3aXRjaCcpXHJcbiAgICBsZXQgaW5kZXhcclxuICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRpb25MaXN0W2luZGV4XVxyXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnByb3BlcnR5ID09PSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHkpIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuc2VsZWN0ZWQgPVxyXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFZvbGxleVNpemUgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcclxuXHJcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcclxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xyXG4gICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5jcmVhc2UnKSkge1xyXG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoMSlcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWNyZWFzZScpKSB7XHJcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgtMSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcclxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xyXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XHJcbiAgICAgICAgQ29DN01lbGVlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcclxuICAgICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlQ2FyZFN3aXRjaChldmVudClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xyXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XHJcbiAgICAgICAgQ29DN1JhbmdlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZScpKSB7XHJcbiAgICAgIC8vIENvQzdJdGVtLnVwZGF0ZUNhcmRTd2l0Y2goIGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpKSB7XHJcbiAgICAgIENvQzdDaGVjay51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgICBUaGUgY2hhdCBjYXJkIGJlaW5nIHVzZWRcclxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XHJcbiAgICAvLyBpZiBkYXRhc2V0Lm9iamVjdCBpcyB0aGVyZSA9PiBuZWVkIHRvIHVuZXNjYXBlIHRoaW5ncyAhIVxyXG4gICAgLy8gaWYgbm90IHVzZSB0aGUgZGF0YXNldCBkaXJlY3RseS5cclxuICAgIGNvbnN0IGNhcmREYXRhID0gY2FyZC5kYXRhc2V0Lm9iamVjdFxyXG4gICAgICA/IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXHJcbiAgICAgIDogY2FyZC5kYXRhc2V0XHJcblxyXG4gICAgaWYgKGNhcmREYXRhLmFjdG9yS2V5KSByZXR1cm4gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShjYXJkRGF0YS5hY3RvcktleSlcclxuXHJcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cclxuICAgIGNvbnN0IHRva2VuS2V5ID0gY2FyZERhdGEudG9rZW5JZFxyXG4gICAgaWYgKHRva2VuS2V5KSB7XHJcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcclxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcclxuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXHJcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcclxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcclxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxyXG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmREYXRhLmFjdG9ySWRcclxuICAgIGlmIChhY3RvcklkKSByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpXHJcblxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxyXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXHJcbiAgICBpZiAobWVzc2FnZUlkKSB7XHJcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxyXG4gICAgICBpZiAoY2hhdE1lc3NhZ2UudXNlcikgcmV0dXJuIGNoYXRNZXNzYWdlLnVzZXIuY2hhcmFjdGVyXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0NhcmRPd25lciAoY2FyZCkge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxyXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXHJcbiAgICBpZiAobWVzc2FnZUlkKSB7XHJcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxyXG4gICAgICByZXR1cm4gY2hhdE1lc3NhZ2Uub3dubmVyIHx8IGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX2dldEFjdG9yRnJvbUtleSAoa2V5KSB7XHJcbiAgICBpZiAoIWtleSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXHJcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcclxuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXHJcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxyXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXHJcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcclxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IgfHwgbmV3IFRva2VuKHRva2VuRGF0YSkuYWN0b3JcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcclxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tVG9rZW4gKHRva2VuS2V5KSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IENvQzdDaGF0LmdldFRva2VuKHRva2VuS2V5KVxyXG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uYWN0b3IgOiBudWxsXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0VG9rZW4gKHRva2VuS2V5KSB7XHJcbiAgICBpZiAodG9rZW5LZXkpIHtcclxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxyXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xyXG4gICAgICAgIGNvbnN0IHRva2VuRG9jID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdPy50b2tlblxyXG4gICAgICAgIHJldHVybiB0b2tlbkRvYy5vYmplY3QgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcclxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxyXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXHJcbiAgICAgICAgcmV0dXJuIHRva2VuIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiB1cGRhdGUgYSBjaGF0IG1lc3NhZ2Ugd2l0aCBhIG5ldyBIVE1MIGNvbnRlbnQgYW5kIHBvcHVsYXRlIGl0LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKGNhcmQsIG1lc3NJZCA9IG51bGwpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9XHJcbiAgICAgIG1lc3NJZCA9PSBudWxsID8gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkIDogbWVzc0lkXHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxyXG5cclxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogY2FyZC5vdXRlckhUTUwgfSlcclxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgcmV0dXJuIG1zZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkQWN0aW9uIChldmVudCkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkQWN0aW9uJyk7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgY2FyZCA9IGJ1dHRvbi5jbG9zZXN0KCcuY2hhdC1jYXJkJylcclxuICAgIGlmICghY2FyZCkgcmV0dXJuXHJcbiAgICBjb25zdCBvcmlnaW5NZXNzYWdlID0gYnV0dG9uLmNsb3Nlc3QoJy5tZXNzYWdlJylcclxuICAgIC8vIGNvbnN0IG1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cclxuXHJcbiAgICBpZiAoIUNvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpKSByZXR1cm5cclxuXHJcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xyXG4gICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5sdWNrQW1vdW50KVxyXG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm5ld1N1Y2Nlc3NMZXZlbFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XHJcbiAgICAgICAgICBsZXQgbWVsZWVDYXJkXHJcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XHJcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xyXG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG1lbGVlQ2FyZC51cGdyYWRlUm9sbChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIGNhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXHJcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xyXG4gICAgICAgICAgY29uc3QgcmFuZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICAgICAgICBjb25zdCByb2xsUmVzdWx0ID0gYnV0dG9uLmNsb3Nlc3QoJy5yb2xsLXJlc3VsdCcpXHJcbiAgICAgICAgICBjb25zdCByb2xsSW5kZXggPSByb2xsUmVzdWx0XHJcbiAgICAgICAgICAgID8gcGFyc2VJbnQocm9sbFJlc3VsdC5kYXRhc2V0LmluZGV4KVxyXG4gICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcclxuICAgICAgICAgICAgcmFuZ2VDYXJkLnBhc3NSb2xsKHJvbGxJbmRleClcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxyXG4gICAgICAgICAgICByYW5nZUNhcmQudXBncmFkZVJvbGwocm9sbEluZGV4LCB1cGdyYWRlSW5kZXgpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSB8fFxyXG4gICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKSAhPSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xyXG4gICAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcclxuICAgICAgICAgICAgY2hlY2suZm9yY2VQYXNzKGx1Y2tBbW91bnQpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcclxuICAgICAgICAgICAgYXdhaXQgY2hlY2sudXBncmFkZUNoZWNrKHVwZ3JhZGVJbmRleClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxyXG4gICAgICAgICAgY29uc3QgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciA9XHJcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcclxuXHJcbiAgICAgICAgICBpZiAoYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxyXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXHJcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAnZmFsc2UnIC8vIHRyaWdnZXIgMyB1cGRhdGVzIGRlIGNhcmRcclxuICAgICAgICAgICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcclxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcclxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bWJsZScpXHJcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXHJcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XHJcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IubmFtZVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdwdXNoJzoge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmNsb25lTm9kZSh0cnVlKSAvLyBUT0RPIG5vdCBuZWNlc3NhcnlcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcclxuICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID1cclxuICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVzaGluZ1NraWxsJylcclxuICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZmFpbHVyZScpXHJcbiAgICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcclxuICAgICAgICBuZXdDYXJkLmRhdGFzZXQucHVzaGVkUm9sbCA9IHRydWVcclxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChuZXdDYXJkLCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxyXG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5wdXNoKGNhcmQpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdkZWZlbmRpbmcnOiB7XHJcbiAgICAgICAgbGV0IGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXHJcbiAgICAgICAgICAuZGF0YXNldC50b2tlbklkXHJcbiAgICAgICAgbGV0IGRlZmVuZGVyXHJcbiAgICAgICAgaWYgKCFkZWZlbmRlcktleSkge1xyXG4gICAgICAgICAgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcclxuICAgICAgICAgICAgLmRhdGFzZXQuYWN0b3JJZFxyXG4gICAgICAgICAgZGVmZW5kZXIgPSBnYW1lLmFjdG9ycy5nZXQoZGVmZW5kZXJLZXkpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRlZmVuZGVyID0gdGhpcy5nZXRBY3RvckZyb21Ub2tlbihkZWZlbmRlcktleSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25UeXBlXHJcbiAgICAgICAgY29uc3Qgb3V0bnVtYmVyZWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub3V0bnVtYmVyZWQgPT09ICd0cnVlJ1xyXG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICAgICAgY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxyXG4gICAgICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXHJcbiAgICAgICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXHJcbiAgICAgICAgY2hlY2suYWN0aW9uID0gcmVzcG9uc2VUeXBlXHJcbiAgICAgICAgc3dpdGNoIChyZXNwb25zZVR5cGUpIHtcclxuICAgICAgICAgIGNhc2UgJ2RvZGdpbmcnOlxyXG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXHJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcclxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXHJcblxyXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XHJcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxyXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaXRlbUlkXHJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxyXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnbWFuZXV2ZXInOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcclxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDw9IGFjdG9yLmJ1aWxkIC0gMykge1xyXG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNYW5ldXZlck5vdFBvc3NpYmxlJylcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxyXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPCBhY3Rvci5idWlsZCkge1xyXG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9XHJcbiAgICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgLSAoYWN0b3IuYnVpbGQgLSBkZWZlbmRlci5idWlsZClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNoZWNrLmRpY2VNb2RpZmllciA8IC0yKSB7XHJcbiAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9XHJcbiAgICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ICsgTWF0aC5hYnMoY2hlY2suZGljZU1vZGlmaWVyKSAtIDJcclxuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ21lbGVlLWluaXRpYXRvci1yb2xsJzoge1xyXG4gICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgaW5pdGlhdG9yLnBlcmZvcm1Ta2lsbENoZWNrKFxyXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsXHJcbiAgICAgICAgKVxyXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXHJcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoY2hlY2suZGljZS5yb2xsKVxyXG4gICAgICAgIGF3YWl0IGluaXRpYXRvci5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1uby1yZXNwb25zZSc6IHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICBhd2FpdCB0YXJnZXQucHVibGlzaE5vUmVwb25zZVJlc3VsdCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LXJvbGwnOiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCB0YXJnZXQucGVyZm9ybVNraWxsQ2hlY2soXHJcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcclxuICAgICAgICApXHJcbiAgICAgICAgJChidXR0b24pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcclxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXHJcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hDaGVja1Jlc3VsdCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdyb2xsLW1lbGVlLWRhbWFnZSc6IHtcclxuICAgICAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcclxuICAgICAgICAgIGNyaXRpY2FsOiBidXR0b24uZGF0YXNldC5jcml0aWNhbCA9PT0gJ3RydWUnLFxyXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XHJcbiAgICAgICAgfSlcclxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGJ1dHRvbi5kYXRhc2V0LmRlYWxlclxyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGJ1dHRvbi5kYXRhc2V0LnRhcmdldFxyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGJ1dHRvbi5kYXRhc2V0LndlYXBvblxyXG4gICAgICAgIGlmIChvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XHJcbiAgICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcclxuXHJcbiAgICAgICAgLy8gY29uc3QgZGFtYWdlQ2FyZCA9IG5ldyBDb0M3RGFtYWdlUm9sbChcclxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQud2VhcG9uLFxyXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC5kZWFsZXIsXHJcbiAgICAgICAgLy8gIHtcclxuICAgICAgICAvLyAgICB0YXJnZXRLZXk6IGJ1dHRvbi5kYXRhc2V0LnRhcmdldCxcclxuICAgICAgICAvLyAgICBjcml0aWNhbDogJ3RydWUnID09IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsLFxyXG4gICAgICAgIC8vICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxyXG4gICAgICAgIC8vICB9KTtcclxuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xyXG4gICAgICAgIC8vIGRhbWFnZUNhcmQucm9sbERhbWFnZSgpO1xyXG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XHJcbiAgICAgICAgLy8gIGZvciAoY29uc3QgYiBvZiBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWJ1dHRvbnMnKSkgeyBiLnJlbW92ZSgpIH1cclxuICAgICAgICAvLyAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoIGNhcmQpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1zaG9vdCc6IHtcclxuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLmFkZFNob3RBdEN1cnJlbnRUYXJnZXQoKVxyXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1yb2xsJzoge1xyXG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IucmVzb2x2ZUNhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAncm9sbC1yYW5nZS1kYW1hZ2UnOiB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yb2xsRGFtYWdlKClcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2RlYWwtbWVsZWUtZGFtYWdlJzoge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEtleSA9IGNhcmQuZGF0YXNldC50YXJnZXRLZXlcclxuICAgICAgICBjb25zdCBhbW91bnQgPSBjYXJkLmRhdGFzZXQucmVzdWx0XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICAgIGF3YWl0IHRhcmdldEFjdG9yLmRlYWxEYW1hZ2UoYW1vdW50KVxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKVxyXG4gICAgICAgIGNvbnN0IGRpY2VUb3RhbCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxyXG4gICAgICAgICQoZGljZVRvdGFsKS5hcHBlbmQoJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicpXHJcbiAgICAgICAgaWYgKGJ1dHRvbnMpIGJ1dHRvbnMucmVtb3ZlKClcclxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxyXG5cclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdkZWFsLXJhbmdlLWRhbWFnZSc6IHtcclxuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLmRlYWxEYW1hZ2UoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3Rlc3RjaGVjayc6IHtcclxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcygpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcclxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcygpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcclxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGNoZWNrLmZvcmNlRmFpbCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcclxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGNoZWNrLmluY3JlYXNlU3VjY2Vzc0xldmVsKClcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcclxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxyXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgaXNDdHJsS2V5KGV2ZW50KVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdyb2xsLWNoZWNrLWNhcmQnOiB7XHJcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICBjaGVjay5zdGFuZGJ5ID0gZmFsc2VcclxuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXHJcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBmb3JjZVJvbGw6IHRydWUgfSlcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcclxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGF3YWl0IGNoZWNrLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxyXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXHJcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3Jlc2V0LWNyZWF0dXJlLXNhbi1kYXRhJzoge1xyXG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suY2xlYXJTYW5Mb3NzUmVhc29uKClcclxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAncm9sbC1zYW4tY2hlY2snOiB7XHJcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuKClcclxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnYWR2YW5jZS1zdGF0ZSc6IHtcclxuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmFkdmFuY2VTdGF0ZShcclxuICAgICAgICAgIGJ1dHRvbi5kYXRhc2V0LnN0YXRlIC8qLCBidXR0b24uZGF0YXNldC5wYXJhbSAqL1xyXG4gICAgICAgIClcclxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAncm9sbC1zYW4tbG9zcyc6IHtcclxuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxyXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW5Mb3NzKClcclxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAncm9sbC1pbnQtY2hlY2snOiB7XHJcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsSW50KClcclxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gY2FzZSAnYXBwbHktc2FuLWxvc3MnOntcclxuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcclxuICAgICAgLy8gIGF3YWl0IHNhbkNoZWNrLmFwcGx5U2FuTG9zcygpO1xyXG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcclxuICAgICAgLy8gIGJyZWFrO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICAvLyBjYXNlICdyZXZlYWwtc2FuLWNoZWNrJzp7XHJcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XHJcbiAgICAgIC8vICBzYW5DaGVjay5pc0JsaW5kID0gZmFsc2U7XHJcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xyXG4gICAgICAvLyAgYnJlYWs7XHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIGNhc2UgJ3JvbGwtY29uLWNoZWNrJzoge1xyXG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICAgICAgYXdhaXQgY29uQ2hlY2sucm9sbENvbigpXHJcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3JldmVhbC1jb24tY2hlY2snOiB7XHJcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgICBjb25DaGVjay5pc0JsaW5kID0gZmFsc2VcclxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIHRvZ2dsaW5nIHRoZSB2aXNpYmlsaXR5IG9mIGNoYXQgY2FyZCBjb250ZW50IHdoZW4gdGhlIG5hbWUgaXMgY2xpY2tlZFxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBzdGF0aWMgX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgaGVhZGVyID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgY2FyZCA9IGhlYWRlci5jbG9zZXN0KCcuY2hhdC1jYXJkJylcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKVxyXG4gICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgaWYgKCFjb250ZW50LnN0eWxlLmRpc3BsYXkpIHtcclxuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID1cclxuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcclxuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xyXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXHJcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xyXG5cclxuLy8gVE9ETyA6IHLDqWN1cMOpcmVyIGxlIGpldCBlbiB0YW50IHF1J29iamV0ICEhIVxyXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlSW5pdGlhdG9yIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XHJcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xyXG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxyXG4gICAgdGhpcy5pdGVtSWQgPSBpdGVtSWRcclxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxyXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXHJcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXHJcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcclxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcclxuICAgIHRoaXMuZGlzYWR2YW50YWdlID0gZmFsc2VcclxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxyXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxyXG4gICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRlbXBsYXRlICgpIHtcclxuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuaHRtbCdcclxuICB9XHJcblxyXG4gIGFzeW5jIHJldmVhbENoZWNrICgpIHtcclxuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXHJcbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxyXG5cclxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXHJcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UoY2hhdE1lc3NhZ2UsIGZhbHNlKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xyXG4gICAgY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxyXG5cclxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cclxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcclxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzXHJcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcclxuXHJcbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXHJcblxyXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XHJcbiAgICAgIHVzZXI6IHVzZXIuaWQsXHJcbiAgICAgIHNwZWFrZXIsXHJcbiAgICAgIGNvbnRlbnQ6IGh0bWxcclxuICAgIH1cclxuXHJcbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcclxuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXHJcbiAgICB9XHJcbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcclxuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcclxuXHJcbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcclxuXHJcbiAgICByZXR1cm4gY2hhdE1lc3NhZ2VcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcclxuXHJcbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWwgfSlcclxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgcmV0dXJuIG1zZ1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcclxuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXHJcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcclxuICAgICAgOiBmbGFnTmFtZVxyXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXHJcbiAgfVxyXG5cclxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXHJcbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcclxuICAgIGNoZWNrLmlzVW5rb253biA9IGZhbHNlXHJcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxyXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcclxuICAgIGNoZWNrLnNpZGUgPSAnaW5pdGlhdG9yJ1xyXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcclxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxyXG4gICAgY2hlY2suaXRlbSA9IHRoaXMuaXRlbUlkXHJcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcclxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcclxuICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IDBcclxuXHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuY2hlY2tSZXZlYWxlZCA9IGZhbHNlXHJcbiAgICBlbHNlIHRoaXMuY2hlY2tSZXZlYWxlZCA9IHRydWVcclxuXHJcbiAgICBpZiAodGhpcy5vdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcclxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcclxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcclxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcclxuXHJcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xyXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXHJcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxyXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXHJcblxyXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XHJcbiAgICAgIGNoZWNrLnN1Y2Nlc3NMZXZlbCA9PT0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XHJcbiAgICAgIGNoZWNrLnN1Y2Nlc3NMZXZlbCA9PT0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxyXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtY3JlYXRlbWVzc2FnZWFzJywge1xyXG4gICAgICAgIHRhcmdldEtleTogdGhpcy50YXJnZXRLZXksXHJcbiAgICAgICAgbWVzc2FnZUlkOiB0aGlzLm1lc3NhZ2VJZCxcclxuICAgICAgICBmYXN0Rm9yd2FyZDogdGhpcy5mYXN0Rm9yd2FyZCxcclxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RvcktleVxyXG4gICAgICB9KVxyXG4gICAgICB0aGlzLnRhcmdldENhcmQgPSBtZXNzYWdlLmlkIHx8IG1lc3NhZ2UuX2lkXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYXV0b1N1Y2Nlc3MgJiYgIXRoaXMuY2hlY2suaXNGdW1ibGUpIHtcclxuICAgICAgdGhpcy5jaGVjay5mb3JjZVBhc3MoKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNoZWNrXHJcbiAgfVxyXG5cclxuICBhc3luYyBwdWJsaXNoQ2hlY2tSZXN1bHQgKGNoZWNrID0gbnVsbCkge1xyXG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcclxuXHJcbiAgICBpZiAoY2hlY2spIHRoaXMuY2hlY2sgPSBjaGVja1xyXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXHJcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcclxuXHJcbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cclxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcclxuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXHJcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcclxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcclxuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ21lZGFsJylcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XHJcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZGFya3JlZCdcclxuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxyXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xyXG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3BpZGVyJylcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xyXG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcclxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcclxuICAgICAgfVxyXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcclxuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xyXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxyXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMudGFyZ2V0Q2FyZCAmJiAhdGhpcy5hdXRvU3VjY2VzcyAmJiB0aGlzLmhhc1RhcmdldCkge1xyXG4gICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXHJcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlSWRcclxuICAgICAgKVxyXG4gICAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxyXG4gICAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XHJcbiAgICBjb25zdCBpbml0aWF0b3IgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKClcclxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoaW5pdGlhdG9yLCBjYXJkKVxyXG4gICAgaW5pdGlhdG9yLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxyXG5cclxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcclxuICAgICAgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxyXG4gICAgfSBlbHNlIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcclxuICAgIHJldHVybiBpbml0aWF0b3JcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXHJcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXHJcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXHJcblxyXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcclxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcclxuXHJcbiAgICByZXR1cm4gaW5pdGlhdG9yXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XHJcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcclxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xyXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxyXG5cclxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xyXG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcclxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXHJcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcclxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcclxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcclxuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXHJcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MdWNrTm90RW5vdWdoJywge1xyXG4gICAgICAgICAgbmFtZTogdGhpcy5hY3Rvci5uYW1lXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxyXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxyXG4gICAgdGhpcy5yb2xsLmx1Y2tTcGVudCA9IHRydWVcclxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxyXG5cclxuICAgIGNvbnN0IGRpY2VSb2xscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbCcpXHJcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcclxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxyXG4gICAgZGljZVJvbGxzLmRhdGFzZXQubHVja1NwZW50ID0gdHJ1ZVxyXG5cclxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcclxuICAgIGNvbnN0IGRpY2VUb3RhbCA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxyXG4gICAgY29uc3Qgcm9sbERhbWFnZUJ1dHRvbiA9IG9sZENhcmQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJvbGwtbWVsZWUtZGFtYWdlXCJdJ1xyXG4gICAgKVxyXG4gICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJylcclxuXHJcbiAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcclxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcclxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxyXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxyXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbHVja0Ftb3VudCxcclxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XHJcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcclxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcclxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcclxuICAgICAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID0gdHJ1ZVxyXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcclxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcblxyXG4gICAgZGljZVRvdGFsLmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxyXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcclxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG9sZENhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBBY3RvciwgQ09ORklHLCBDT05TVCwgRGlhbG9nLCBEaWUsIGR1cGxpY2F0ZSwgZm91bmRyeSwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgZ2V0UHJvcGVydHksIEhvb2tzLCBtZXJnZU9iamVjdCwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpICovXHJcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXHJcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi9jaGF0L2NvbmNoZWNrLmpzJ1xyXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgU2tpbGxTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMnXHJcbmltcG9ydCB7IFBvaW50U2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xyXG5pbXBvcnQgeyBDaGFyYWNTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL2NoYXItc2VsZWN0aW9uLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgQ2hhcmFjUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMnXHJcbmltcG9ydCB7IFNraWxsVmFsdWVEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXZhbHVlLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xyXG5pbXBvcnQgeyBDb0M3UmFuZ2VJbml0aWF0b3IgfSBmcm9tICcuLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXHJcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcclxuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtcy9pdGVtLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZCB0aGUgYmFzZSBBY3RvciBjbGFzcyB0byBpbXBsZW1lbnQgYWRkaXRpb25hbCBsb2dpYyBzcGVjaWFsaXplZCBmb3IgQ29DIDd0aC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0NBY3RvciBleHRlbmRzIEFjdG9yIHtcclxuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xyXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XHJcbiAgICAvKiogQHNlZSBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzIGluIG1vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMgKi9cclxuICAgIGlmIChkYXRhLnR5cGUgaW4gQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXHJcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXHJcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxyXG4gICAgICAgKi9cclxuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xyXG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcclxuICAgICAgICAuLi5jb250ZXh0XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvLyBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgLy8gICBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XHJcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xyXG4gICAgLy8gICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N0YXR1cycpIHtcclxuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXHJcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xyXG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9zd29yZC5zdmcnXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH1cclxuICAgIC8qKiBEZWZhdWx0IGJlaGF2aW9yLCBqdXN0IGNhbGwgc3VwZXIoKSBhbmQgZG8gYWxsIHRoZSBkZWZhdWx0IEl0ZW0gaW5pdHMgKi9cclxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBpbml0aWFsaXplICgpIHtcclxuICAgIHN1cGVyLmluaXRpYWxpemUoKVxyXG4gICAgYXdhaXQgdGhpcy5jcmVhdHVyZUluaXQoKSAvLyBUT0RPIDogbW92ZSB0aGlzIGluIENvQ0FjdG9yLmNyZWF0ZShkYXRhLCBvcHRpb25zKVxyXG4gIH1cclxuXHJcbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKiBUZXN0aW5nXHJcbiAgLy8gYXN5bmMgdXBkYXRlKGRhdGEsIG9wdGlvbnM9e30pIHtcclxuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygncmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTsnKTtcclxuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XHJcbiAgLy8gICB0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnQgPSAxNTtcclxuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgbW9kaWZpZWQgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XHJcbiAgLy8gICByZXR1cm4gc3VwZXIudXBkYXRlKGRhdGEsIG9wdGlvbnMpO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gZ2V0IGNoYXJhY3RlcmlzdGljcygpe1xyXG4gIC8vICAgY29uc3QgYWN0b3IgPSB0aGlzO1xyXG4gIC8vICAgICByZXR1cm4ge1xyXG4gIC8vICAgICAgIGdldCBpbnQoKXtcclxuICAvLyAgICAgICAgIHJldHVybiBhY3Rvci5nZXRQcm9wKCdfaW50Jyk7XHJcbiAgLy8gICAgICAgfSxcclxuXHJcbiAgLy8gICAgICAgc2V0IGludCh4KXtcclxuICAvLyAgICAgICAgIGFjdG9yLnNldFByb3AoJ19pbnQnLCB4KTtcclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgfTtcclxuICAvLyB9XHJcblxyXG4gIC8vIHNldFByb3Aoa2V5LCB4KXtcclxuICAvLyAgIHRoaXNba2V5XSA9IHg7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBnZXRQcm9wKGtleSl7XHJcbiAgLy8gICByZXR1cm4gdGhpc1trZXldfHwwO1xyXG4gIC8vIH1cclxuICAvL1xyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBQcmVwYXJlIGRhdGEgcmVsYXRlZCB0byB0aGlzIERvY3VtZW50IGl0c2VsZiwgYmVmb3JlIGFueSBlbWJlZGRlZCBEb2N1bWVudHMgb3IgZGVyaXZlZCBkYXRhIGlzIGNvbXB1dGVkLlxyXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xyXG4gICAqL1xyXG4gIHByZXBhcmVCYXNlRGF0YSAoKSB7XHJcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXModGhpcy50eXBlKSkge1xyXG4gICAgICB0aGlzLnN5c3RlbS5za2lsbHMgPSB7fVxyXG4gICAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5pdGVtcykge1xyXG4gICAgICAgIGlmIChpLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsc1tgJHtpLnN5c3RlbS5za2lsbE5hbWV9YF0gPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBpLnJhd1ZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbHNbYCR7aS5pZH1gXSA9IHsgdmFsdWU6IGkucmF3VmFsdWUgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgKiBSZW1vdmFsIG9mIDEvNSBzYW5pdHlcclxuICAgICAqIHRoaXMgaXMgdG8gcmVtb3ZlIHRoZVxyXG4gICAgICogYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSB0byBiZSByZW1vdmVkIGZyb20gdGVtcGxhdGVcclxuICAgICAqIGFuZCBpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCB0byBiZSByZW1vdmVkIGZyb20gdGVtcGxhdGVcclxuICAgICAqL1xyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5KSB7XHJcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkuc3BsaXQoJy8nKVxyXG4gICAgICAgICAgaWYgKHNbMV0gJiYgIWlzTmFOKE51bWJlcihzWzFdKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IE51bWJlcihzWzFdKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IDBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IDBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJldHVybiBjb21wdXRlZCB2YWx1ZXMgb3IgZml4ZWQgdmFsdWVzIGlmIG5vdCBhdXRvLlxyXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XHJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPSB0aGlzLnJhd0RiXHJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPSB0aGlzLnJhd0J1aWxkXHJcblxyXG4gICAgICAvLyBGb3IgdmVoaWNsZSBvbmx5IDpcclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID0gdGhpcy5ocFxyXG5cclxuICAgICAgLy8gaWYgKFxyXG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4IHx8XHJcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ID09IG51bGxcclxuICAgICAgLy8gKSB7XHJcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcclxuICAgICAgLy8gfVxyXG4gICAgICAvLyBpZiAoXHJcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggfHxcclxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPT0gbnVsbFxyXG4gICAgICAvLyApIHtcclxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxyXG4gICAgICAvLyB9XHJcblxyXG4gICAgLy8gaWYgKFxyXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9PSBudWxsICYmXHJcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCAhPSBudWxsXHJcbiAgICAvLyApIHtcclxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcclxuICAgIC8vIH1cclxuICAgIC8vIGlmIChcclxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT0gbnVsbCAmJlxyXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggIT0gbnVsbFxyXG4gICAgLy8gKSB7XHJcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XHJcbiAgICAvLyB9XHJcbiAgICB9XHJcbiAgICBzdXBlci5wcmVwYXJlQmFzZURhdGEoKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogUHJlcGFyZSBhbGwgZW1iZWRkZWQgRG9jdW1lbnQgaW5zdGFuY2VzIHdoaWNoIGV4aXN0IHdpdGhpbiB0aGlzIHByaW1hcnkgRG9jdW1lbnQuXHJcbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXHJcbiAgICogYWN0aXZlIGVmZmVjdHMgYXJlIGFwcGxpZWRcclxuICAgKi9cclxuICBwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMgKCkge1xyXG4gICAgc3VwZXIucHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzKClcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEFwcGx5IHRyYW5zZm9ybWF0aW9ucyBvciBkZXJpdmF0aW9ucyB0byB0aGUgdmFsdWVzIG9mIHRoZSBzb3VyY2UgZGF0YSBvYmplY3QuXHJcbiAgICogQ29tcHV0ZSBkYXRhIGZpZWxkcyB3aG9zZSB2YWx1ZXMgYXJlIG5vdCBzdG9yZWQgdG8gdGhlIGRhdGFiYXNlLlxyXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xyXG4gICAqL1xyXG4gIHByZXBhcmVEZXJpdmVkRGF0YSAoKSB7XHJcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXModGhpcy50eXBlKSkge1xyXG4gICAgICBzdXBlci5wcmVwYXJlRGVyaXZlZERhdGEoKVxyXG4gICAgICAvLyBTZXQgaHBNYXgsIG1wTWF4LCBzYW5NYXgsIG1vdiwgZGIsIGJ1aWxkLiBUaGlzIGlzIHRvIGFsbG93IGNhbGN1bGF0aW9uIG9mIGRlcml2ZWQgdmFsdWUgd2l0aCBtb2RpZmVkIGNoYXJhY3RlcmlzdGljcy5cclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLnJhd01vdlxyXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxyXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlID0gdGhpcy5yYXdCdWlsZFxyXG5cclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggPSB0aGlzLnJhd0hwTWF4XHJcbiAgICAgIGlmICh0aGlzLmhwID09PSBudWxsKSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5yYXdIcE1heFxyXG5cclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPSB0aGlzLnJhd01wTWF4XHJcbiAgICAgIGlmICh0aGlzLm1wID09PSBudWxsKSB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gdGhpcy5yYXdNcE1heFxyXG5cclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4ID0gdGhpcy5yYXdTYW5NYXhcclxuICAgICAgaWYgKHRoaXMuc2FuID09PSBudWxsKSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IHRoaXMucmF3U2FuTWF4XHJcblxyXG4gICAgICAvLyBBcHBseSBlZmZlY3RzIHRvIGF1dG9tYXRpY2FseSBjYWxjdWxhdGVkIHZhbHVlcy5cclxuICAgICAgY29uc3QgZmlsdGVyTWF0cml4ID0gW11cclxuXHJcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnKVxyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMubXAubWF4JylcclxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5zYW4ubWF4JylcclxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUnKVxyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUnKVxyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUnKVxyXG5cclxuICAgICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuZWZmZWN0cy5yZWR1Y2UoKGNoYW5nZXMsIGUpID0+IHtcclxuICAgICAgICBpZiAoZS5kaXNhYmxlZCB8fCBlLmlzU3VwcHJlc3NlZCkgcmV0dXJuIGNoYW5nZXNcclxuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXHJcbiAgICAgICAgICBlLmNoYW5nZXMubWFwKGMgPT4ge1xyXG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcclxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXHJcbiAgICAgICAgICAgIGMucHJpb3JpdHkgPSBjLnByaW9yaXR5ID8/IGMubW9kZSAqIDEwXHJcbiAgICAgICAgICAgIHJldHVybiBjXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgfSwgW10pXHJcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXHJcblxyXG4gICAgICBjb25zdCBzZWxlY3RDaGFuZ2VzID0gY2hhbmdlcy5maWx0ZXIoZSA9PiBmaWx0ZXJNYXRyaXguaW5jbHVkZXMoZS5rZXkpKVxyXG5cclxuICAgICAgLy8gQXBwbHkgYWxsIGNoYW5nZXNcclxuICAgICAgZm9yIChjb25zdCBjaGFuZ2Ugb2Ygc2VsZWN0Q2hhbmdlcykge1xyXG4gICAgICAgIGNoYW5nZS5lZmZlY3QuYXBwbHkodGhpcywgY2hhbmdlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5ocE1heCAmJiB0aGlzLmhwTWF4IDwgdGhpcy5ocCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5ocE1heCB9XHJcbiAgICAgIGlmICh0aGlzLm1wTWF4ICYmIHRoaXMubXBNYXggPCB0aGlzLm1wKSB7IHRoaXMuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSB0aGlzLm1wTWF4IH1cclxuICAgICAgaWYgKHRoaXMuc2FuTWF4ICYmIHRoaXMuc2FuTWF4IDwgdGhpcy5zYW4pIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnNhbk1heCB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQG92ZXJyaWRlICovXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBpZiAoZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xyXG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gbWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xyXG4gICAgICAgIGFjdG9yTGluazogdHJ1ZSxcclxuICAgICAgICBkaXNwb3NpdGlvbjogMSxcclxuICAgICAgICBzaWdodDoge1xyXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGV0ZWN0aW9uTW9kZXM6IFt7XHJcbiAgICAgICAgICBpZDogJ2Jhc2ljU2lnaHQnLFxyXG4gICAgICAgICAgcmFuZ2U6IDMwLFxyXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgIH1dXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ25wYycpIHtcclxuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xyXG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvY3VsdGlzdC5zdmcnXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY3JlYXR1cmUnKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcclxuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2Zsb2F0aW5nLXRlbnRhY2xlcy5zdmcnXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29udGFpbmVyJykge1xyXG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XHJcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2NoZXN0LnN2ZydcclxuICAgICAgfVxyXG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gbWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xyXG4gICAgICAgIGFjdG9yTGluazogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xyXG4gICAqIEp1c3QgY2hlY2sgaWYgYXV0byBpcyB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2UgaXQgd2lsbCBiZSBzZXQgdG8gdHJ1ZVxyXG4gICAqL1xyXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XHJcbiAgICBjb25zdCByZXR1cm5EYXRhID0ge1xyXG4gICAgICBhdHRyaWJzOiB7XHJcbiAgICAgICAgaHA6IHt9LFxyXG4gICAgICAgIG1wOiB7fSxcclxuICAgICAgICBzYW46IHt9LFxyXG4gICAgICAgIG1vdjoge30sXHJcbiAgICAgICAgZGI6IHt9LFxyXG4gICAgICAgIGJ1aWxkOiB7fVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uaHA/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5tcD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LnNhbj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5tb3Y/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uZGI/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5idWlsZD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXR1cm5EYXRhXHJcbiAgfVxyXG5cclxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcclxuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHtcclxuICAgICAgc3RyOiB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLlNUUicsXHJcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnLFxyXG4gICAgICAgIGZvcm11bGE6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgY29uOiB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkNPTicsXHJcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcclxuICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHNpejoge1xyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TSVonLFxyXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnLFxyXG4gICAgICAgIGZvcm11bGE6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgZGV4OiB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkRFWCcsXHJcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5JyxcclxuICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIGFwcDoge1xyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5BUFAnLFxyXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxyXG4gICAgICAgIGZvcm11bGE6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgaW50OiB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLklOVCcsXHJcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJyxcclxuICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHBvdzoge1xyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5QT1cnLFxyXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJyxcclxuICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIGVkdToge1xyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5FRFUnLFxyXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXHJcbiAgICAgICAgZm9ybXVsYTogbnVsbFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1xyXG4gICAgICApKSB7XHJcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XHJcbiAgICAgICAgICBrZXksXHJcbiAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXHJcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcclxuICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcclxuICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyAyKSB8fCBudWxsLFxyXG4gICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDUpIHx8IG51bGwsXHJcbiAgICAgICAgICBmb3JtdWxhOiB2YWx1ZS5mb3JtdWxhXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbiBmcm9tIHByZUNyZWF0ZUFjdG9yIGhvb2tcclxuICAgKiBAcGFyYW0geyp9IGNyZWF0ZURhdGFcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgaW5pdFRva2VuIChjcmVhdGVEYXRhKSB7XHJcbiAgICAvLyBjYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbi5hY3RpdmVcclxuICAgIGlmIChjcmVhdGVEYXRhKSB7XHJcbiAgICAgIC8vXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgaGFzVGVtcG9JbnNhbmUgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCAnZHVyYXRpb25UZXh0JylcclxuICB9XHJcblxyXG4gIGdldCBoYXNJbmRlZkluc2FuZSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXHJcbiAgfVxyXG5cclxuICBnZXQgcG9ydHJhaXQgKCkge1xyXG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSByZXR1cm4gdGhpcy5pbWdcclxuICAgIHJldHVybiB0aGlzLnRva2VuPy50ZXh0dXJlPy5zcmMgfHwgdGhpcy5wcm90b3R5cGVUb2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMuaW1nXHJcbiAgfVxyXG5cclxuICBhc3luYyBlbnRlckJvdXRPZk1hZG5lc3MgKHJlYWxUaW1lID0gdHJ1ZSwgZHVyYXRpb24gPSAxKSB7XHJcbiAgICAvLyBjb25zdCBkdXJhdGlvbiA9IHtyb3VuZHM6IDEsXHJcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxyXG4gICAgLy8gICBzdGFydFJvdW5kOiAzLFxyXG4gICAgLy8gICBzdGFydFRpbWU6IDU4LFxyXG4gICAgLy8gICBzdGFydFR1cm46IDQsXHJcbiAgICAvLyAgIHR1cm5zOiAyfTtcclxuICAgIC8vIGF3YWl0IHRoaXMuYm91dE9mTWFkbmVzcz8uc2V0RmxhZyggJ0NvQzcnLCAnbWFkbmVzcycsIHRydWUpO1xyXG5cclxuICAgIGxldCByZXN1bHQgPSBudWxsXHJcbiAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGVJZCA9IHJlYWxUaW1lXHJcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxyXG4gICAgICA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKVxyXG4gICAgaWYgKGJvdXRPZk1hZG5lc3NUYWJsZUlkICE9PSAnbm9uZScpIHtcclxuICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgIHBob2JpYTogZmFsc2UsXHJcbiAgICAgICAgbWFuaWE6IGZhbHNlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYm91dE9mTWFkbmVzc1RhYmxlID0gZ2FtZS50YWJsZXMuZ2V0KGJvdXRPZk1hZG5lc3NUYWJsZUlkKVxyXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxyXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRE9DVU1FTlQgPT09XHJcbiAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udHlwZVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kb2N1bWVudElkKVxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0/LnR5cGU/LnBob2JpYSkgcmVzdWx0LnBob2JpYSA9IHRydWVcclxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5tYW5pYSkgcmVzdWx0Lm1hbmlhID0gdHJ1ZVxyXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OiR7VGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICAgICAgICAgIHsgYXN5bmM6IGZhbHNlIH1cclxuICAgICAgICAgICAgKX1gXHJcbiAgICAgICAgICAgIHJlc3VsdC5uYW1lID0gaXRlbS5uYW1lXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbS50b09iamVjdCgpXHJcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtRGF0YS5faWRcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtRGF0YV0pXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlQm91dE9mTWFkbmVzc0l0ZW1Ob3RGb3VuZCcpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XHJcbiAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udHlwZVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udGV4dCxcclxuICAgICAgICAgICAgeyBhc3luYzogZmFsc2UgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzVGFibGVOb3RGb3VuZCcpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgaXQncyBub3QgYSByZWFsIHRpbWUgbm8gbmVlZCB0byBhY3RpdmF0ZSB0aGUgYm91dFxyXG4gICAgaWYgKCFyZWFsVGltZSkgcmV0dXJuIHJlc3VsdFxyXG5cclxuICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCB7XHJcbiAgICAgIHJlYWxUaW1lLFxyXG4gICAgICBkdXJhdGlvblxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBjb25zdCBlZmZlY3QgPSB0aGlzLmVmZmVjdHMuZ2V0KCBlZmZlY3REYXRhLl9pZCk7XHJcbiAgICAvLyBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpO1xyXG5cclxuICAgIHJldHVybiByZXN1bHRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB1cG9uIG5ldyBhY3RvciBjcmVhdGlvbi5cclxuICAgKiBAcGFyYW0geyp9IGRhdGFcclxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcclxuICAgKi9cclxuICAvLyBzdGF0aWMgYXN5bmMgY3JlYXRlKGRhdGEsIG9wdGlvbnMpIHtcclxuICAvLyAgLy8gSWYgdGhlIGNyZWF0ZWQgYWN0b3IgaGFzIGl0ZW1zIChvbmx5IGFwcGxpY2FibGUgdG8gZHVwbGljYXRlZCBhY3RvcnMpIGJ5cGFzcyB0aGUgbmV3IGFjdG9yIGNyZWF0aW9uIGxvZ2ljXHJcbiAgLy8gIGlmIChkYXRhLml0ZW1zKSB7XHJcbiAgLy8gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcclxuICAvLyAgfVxyXG4gIC8vICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xyXG4gIC8vIH1cclxuXHJcbiAgc3RhdGljIGVtcHR5U2tpbGwgKFxyXG4gICAgc2tpbGxOYW1lLFxyXG4gICAgdmFsdWUsXHJcbiAgICB7XHJcbiAgICAgIHJhcml0eSA9IGZhbHNlLFxyXG4gICAgICBwdXNoID0gdHJ1ZSxcclxuICAgICAgY29tYmF0ID0gZmFsc2UsXHJcbiAgICAgIGltZyA9IGZhbHNlLFxyXG4gICAgICBzcGVjaWFsaXphdGlvbiA9IGZhbHNlXHJcbiAgICB9ID0ge31cclxuICApIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcclxuICAgICAgdHlwZTogJ3NraWxsJyxcclxuICAgICAgc3lzdGVtOiB7XHJcbiAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgc2tpbGxOYW1lLFxyXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcclxuICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICBzcGVjaWFsOiBmYWxzZSxcclxuICAgICAgICAgIHJhcml0eSxcclxuICAgICAgICAgIHB1c2gsXHJcbiAgICAgICAgICBjb21iYXRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbWcgIT09IGZhbHNlKSB7XHJcbiAgICAgIGRhdGEuaW1nID0gaW1nXHJcbiAgICB9XHJcbiAgICBpZiAoc3BlY2lhbGl6YXRpb24gIT09IGZhbHNlKSB7XHJcbiAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uKVxyXG4gICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxyXG4gICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXHJcbiAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbiBsaXN0IG9mIHNraWxscyBieSByZW1vdmluZyBzcGVjaWFsaXphdGlvbiBmcm9tIG5hbWVcclxuICAgKi9cclxuICAvLyBhc3luYyBjbGVhblNraWxscyAoKSB7XHJcbiAgLy8gICBEaWFsb2cuY29uZmlybSh7XHJcbiAgLy8gICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2xlYW5Ta2lsbExpc3QnKX1gLFxyXG4gIC8vICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2xlYW5Ta2lsbExpc3RIaW50Jyl9PC9wPmAsXHJcbiAgLy8gICAgIHllczogKCkgPT4gY2xlYW4odGhpcylcclxuICAvLyAgIH0pXHJcbiAgLy8gICBhc3luYyBmdW5jdGlvbiBjbGVhbiAoYWN0b3IpIHtcclxuICAvLyAgICAgY29uc3QgdXBkYXRlID0gW11cclxuICAvLyAgICAgYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XHJcbiAgLy8gICAgICAgaWYgKHMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xyXG4gIC8vICAgICAgICAgY29uc3QgY2xlYW4gPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMocyk/LnRyaW0oKVxyXG4gIC8vICAgICAgICAgaWYgKGNsZWFuLnRvTG93ZXJDYXNlKCkgIT0gcy5uYW1lLnRvTG93ZXJDYXNlKCkgfHwgY2xlYW4udG9Mb3dlckNhc2UoKSAhPSBzLmRhdGEubmFtZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgLy8gICAgICAgICAgIHVwZGF0ZS5wdXNoKHtcclxuICAvLyAgICAgICAgICAgICBfaWQ6IHMuaWQsXHJcbiAgLy8gICAgICAgICAgICAgbmFtZTogY2xlYW5cclxuICAvLyAgICAgICAgICAgfSlcclxuICAvLyAgICAgICAgIH1cclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgIH0pXHJcbiAgLy8gICAgIGlmICh1cGRhdGUubGVuZ3RoICE9IDApe1xyXG4gIC8vICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgdXBkYXRlKVxyXG4gIC8vICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYFNraWxscyA6ICR7QXJyYXkuZnJvbSggdXBkYXRlLCBlID0+IGUubmFtZSkuam9pbignLCAnKX0gdXBkYXRlZC5gKVxyXG4gIC8vICAgICB9IGVsc2Uge1xyXG4gIC8vICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ1NraWxsIGxpc3Qgd2FzIGNsZWFuIGFscmVhZHkgIScpXHJcbiAgLy8gICAgIH1cclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICBhc3luYyBjcmVhdGVTa2lsbCAoc2tpbGxOYW1lLCB2YWx1ZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsTmFtZSwgdmFsdWUpXHJcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xyXG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGNyZWF0ZWRcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZVdlYXBvblNraWxsIChuYW1lLCBmaXJlYXJtcyA9IGZhbHNlLCBiYXNlID0gbnVsbCkge1xyXG4gICAgLy8gVE9ETyA6IEFzayBmb3IgYmFzZSB2YWx1ZSBpZiBudWxsXHJcblxyXG4gICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcclxuICAgICAgW10sXHJcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICBmaXJlYXJtc1xyXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xyXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcclxuICAgICAgKSxcclxuICAgICAgMCxcclxuICAgICAgbmFtZVxyXG4gICAgKVxyXG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoc2tpbGxEYXRhLmdldCgnYmFzZS12YWx1ZScpKVxyXG4gICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxyXG4gICAgICBuYW1lLFxyXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgZmlyZWFybXNcclxuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcclxuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXHJcbiAgICAgIClcclxuICAgIClcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXHJcbiAgICAgIHR5cGU6ICdza2lsbCcsXHJcbiAgICAgIHN5c3RlbToge1xyXG4gICAgICAgIGJhc2U6IGlzTmFOKHZhbHVlKSA/IDAgOiB2YWx1ZSxcclxuICAgICAgICBhZGp1c3RtZW50czoge1xyXG4gICAgICAgICAgcGVyc29uYWw6IG51bGwsXHJcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxyXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsLFxyXG4gICAgICAgICAgZXhwZXJpZW5jZTogbnVsbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXHJcbiAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxyXG4gICAgICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAgIHNwZWNpYWw6IHRydWUsXHJcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxyXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXHJcbiAgICAgICAgICBjb21iYXQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcclxuICAgICAgcmVuZGVyU2hlZXQ6ICFiYXNlXHJcbiAgICB9KVxyXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShuYW1lKVxyXG4gICAgcmV0dXJuIHNraWxsWzBdXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIGEgY3JlYXR1cmUgd2l0aCBtaW5pbXVtcyBza2lsbHNcclxuICAgKi9cclxuICBhc3luYyBjcmVhdHVyZUluaXQgKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NyZWF0dXJlJykgcmV0dXJuXHJcbiAgICBpZiAodGhpcy5nZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJykpIHJldHVybiAvLyBDaGFuZ2UgdG8gcmV0dXJuIHNraWxsID9cclxuXHJcbiAgICAvLyBDaGVjayBpZiBmaWdodGluZyBza2lsbHMgZXhpc3RzLCBpZiBub3QgY3JlYXRlIGl0IGFuZCB0aGUgYXNzb2NpYXRlZCBhdHRhY2suXHJcbiAgICBjb25zdCBza2lsbHMgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcclxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKVxyXG4gICAgKVxyXG4gICAgaWYgKHNraWxscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgLy8gQ3JlYXRpbmcgbmF0dXJhbCBhdHRhY2sgc2tpbGxcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpLFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICB0eXBlOiAnc2tpbGwnLFxyXG4gICAgICAgICAgbmFtZTogcGFydHMubmFtZSxcclxuICAgICAgICAgIHN5c3RlbToge1xyXG4gICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXHJcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBwYXJ0cy5zcGVjaWFsaXphdGlvbixcclxuICAgICAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcclxuICAgICAgICAgICAgICBmaWdodGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICBzcGVjaWFsOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZsYWdzOiB7fVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcclxuICAgICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0IGF0dGFjayA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXHJcbiAgICAgICAgICAnSXRlbScsXHJcbiAgICAgICAgICBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAnSW5uYXRlIGF0dGFjaycsXHJcbiAgICAgICAgICAgICAgdHlwZTogJ3dlYXBvbicsXHJcbiAgICAgICAgICAgICAgc3lzdGVtOiB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgIGNoYXQ6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgd3BuVHlwZTogJ2lubmF0ZScsXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgICAgICAgIGFkZGI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgIHNsbnQ6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICB7IHJlbmRlclNoZWV0OiBmYWxzZSB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIChza2lsbC5sZW5ndGggPiAwICYmIGF0dGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjb25zdCBjcmVhdGVkQXR0YWNrID0gdGhpcy5pdGVtcy5nZXQoYXR0YWNrWzBdLmlkKVxyXG4gICAgICAgICAgYXdhaXQgY3JlYXRlZEF0dGFjay51cGRhdGUoe1xyXG4gICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4uaWQnOiBza2lsbFswXS5pZCxcclxuICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbFswXS5uYW1lXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXR1cmUgaW5pdDogJyArIGVyci5tZXNzYWdlKVxyXG4gICAgICB9XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKCAnU2tpbGwgY3JlYXRlZCcpO1xyXG4gICAgICBhd2FpdCB0aGlzLnNldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKVxyXG4gICAgICAvLyBDcmVhdGluZyBjb3JyZXNwb25kaW5nIHdlYXBvbi5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUl0ZW0gKGl0ZW1OYW1lLCBxdWFudGl0eSA9IDEsIHNob3dTaGVldCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBuYW1lOiBpdGVtTmFtZSxcclxuICAgICAgdHlwZTogJ2l0ZW0nLFxyXG4gICAgICBzeXN0ZW06IHtcclxuICAgICAgICBxdWFudGl0eVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xyXG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGNyZWF0ZWRcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUVtcHR5Qm9vayAoZXZlbnQgPSBudWxsKSB7XHJcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcclxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSwgc2hvd1NoZWV0KVxyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gMFxyXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcclxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcclxuICAgICAgaW5kZXgrK1xyXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGl0ZW1OYW1lLCBzaG93U2hlZXQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVCb29rIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxyXG4gICAgICB0eXBlOiAnYm9vaycsXHJcbiAgICAgIHN5c3RlbToge31cclxuICAgIH1cclxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XHJcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcclxuICAgIH0pXHJcbiAgICByZXR1cm4gY3JlYXRlZFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlRW1wdHlTcGVsbCAoZXZlbnQgPSBudWxsKSB7XHJcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcclxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSwgc2hvd1NoZWV0KVxyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gMFxyXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XHJcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XHJcbiAgICAgIGluZGV4KytcclxuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpICsgJyAnICsgaW5kZXhcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGl0ZW1OYW1lLCBzaG93U2hlZXQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZW1wdHlTcGVsbCAoaXRlbU5hbWUpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxyXG4gICAgICB0eXBlOiAnc3BlbGwnLFxyXG4gICAgICBzeXN0ZW06IHt9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlU3BlbGwgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U3BlbGwoaXRlbU5hbWUpXHJcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xyXG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGNyZWF0ZWRcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U2tpbGwgKGV2ZW50ID0gbnVsbCkge1xyXG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXHJcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKFxyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSksXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICBzaG93U2hlZXRcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gMFxyXG4gICAgbGV0IHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxyXG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsTmFtZSkpIHtcclxuICAgICAgaW5kZXgrK1xyXG4gICAgICBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChza2lsbE5hbWUsIG51bGwsIHNob3dTaGVldClcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUVtcHR5SXRlbSAoZXZlbnQgPSBudWxsKSB7XHJcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcclxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSwgMSwgc2hvd1NoZWV0KVxyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gMFxyXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcclxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcclxuICAgICAgaW5kZXgrK1xyXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGl0ZW1OYW1lLCAxLCBzaG93U2hlZXQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVFbXB0eVdlYXBvbiAoZXZlbnQgPSBudWxsLCBwcm9wZXJ0aWVzID0ge30pIHtcclxuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxyXG4gICAgbGV0IHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKVxyXG4gICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpKSkge1xyXG4gICAgICBsZXQgaW5kZXggPSAwXHJcbiAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XHJcbiAgICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZSh3ZWFwb25OYW1lKSkge1xyXG4gICAgICAgIGluZGV4KytcclxuICAgICAgICB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkgKyAnICcgKyBpbmRleFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgbmFtZTogd2VhcG9uTmFtZSxcclxuICAgICAgdHlwZTogJ3dlYXBvbicsXHJcbiAgICAgIHN5c3RlbToge1xyXG4gICAgICAgIHByb3BlcnRpZXM6IHt9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcclxuICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllc1trZXldID1cclxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSA/PyBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcclxuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUJpb1NlY3Rpb24gKHRpdGxlID0gbnVsbCkge1xyXG4gICAgY29uc3QgYmlvID0gdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5XHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcclxuICAgICAgOiBbXVxyXG4gICAgYmlvLnB1c2goe1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgdmFsdWU6IG51bGxcclxuICAgIH0pXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVCaW9WYWx1ZSAoaW5kZXgsIGNvbnRlbnQpIHtcclxuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXHJcbiAgICBiaW9baW5kZXhdLnZhbHVlID0gY29udGVudFxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9LCB7IHJlbmRlcjogZmFsc2UgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUJpb1RpdGxlIChpbmRleCwgdGl0bGUpIHtcclxuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXHJcbiAgICBiaW9baW5kZXhdLnRpdGxlID0gdGl0bGVcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZUJpb1NlY3Rpb24gKGluZGV4KSB7XHJcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxyXG4gICAgYmlvLnNwbGljZShpbmRleCwgMSlcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uVXAgKGluZGV4KSB7XHJcbiAgICBpZiAoaW5kZXggPT09IDApIHJldHVyblxyXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcclxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoKSByZXR1cm5cclxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxyXG4gICAgYmlvLnNwbGljZShpbmRleCAtIDEsIDAsIGVsZW0pXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBtb3ZlQmlvU2VjdGlvbkRvd24gKGluZGV4KSB7XHJcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxyXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGggLSAxKSByZXR1cm5cclxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxyXG4gICAgYmlvLnNwbGljZShpbmRleCArIDEsIDAsIGVsZW0pXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVUZXh0QXJlYSAodGV4dEFyZWEpIHtcclxuICAgIGNvbnN0IG5hbWUgPSAnc3lzdGVtLicgKyB0ZXh0QXJlYS5kYXRhc2V0LmFyZWFOYW1lXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogdGV4dEFyZWEudmFsdWUgfSlcclxuICB9XHJcblxyXG4gIC8vIGFzeW5jIF91cGRhdGVFbWJlZGRlZERvY3VtZW50cyAoZG9jdW1lbnRDbGFzcywgcGFyZW50LCB7IHVwZGF0ZXMsIG9wdGlvbnMsIHBhY2sgfSwgdXNlcikge1xyXG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcclxuICAvLyB9XHJcblxyXG4gIC8vIGFzeW5jIHByZVVwZGF0ZUFjdGl2ZUVmZmVjdCAoYSxiLGMsZCkge1xyXG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcclxuICAvLyB9XHJcblxyXG4gIC8vIGFzeW5jIHVwZGF0ZUFjdGl2ZUVmZmVjdCAoYSxiLGMsZCkge1xyXG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcclxuICAvLyB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhbiBpdGVtIGZvciB0aGF0IGFjdG9yLlxyXG4gICAqIElmIGl0J3MgYSBza2lsbCBmaXJzdCBjaGVjayBpZiB0aGUgc2tpbGwgaXMgYWxyZWFkeSBvd25lZC4gSWYgaXQgaXMgZG9uJ3QgY3JlYXRlIGEgc2Vjb25kIHRpbWUuXHJcbiAgICogRmlsbCB0aGUgdmFsdWUgb2YgdGhlIHNraWxsIHdpdGggYmFzZSBvciB0cnkgdG8gZXZhbHVhdGUgdGhlIGZvcm11bGEuXHJcbiAgICogQHBhcmFtIHsqfSBlbWJlZGRlZE5hbWVcclxuICAgKiBAcGFyYW0geyp9IGRhdGFcclxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVFbWJlZGRlZERvY3VtZW50cyAoZW1iZWRkZWROYW1lLCBkYXRhQXJyYXksIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHByb2Nlc3NlZERhdGFBcnJheSA9IFtdXHJcbiAgICBsZXQgYmFzZVZhbHVlID0gMFxyXG4gICAgbGV0IGJhc2VDYWxjdWxhdGVkID0gMFxyXG4gICAgbGV0IGFyY2hldHlwZSA9IGZhbHNlXHJcbiAgICBsZXQgb2NjdXBhdGlvbiA9IGZhbHNlXHJcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgZGF0YUFycmF5KSB7XHJcbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxyXG4gICAgICAgICAgYmFzZVZhbHVlID0gZGF0YS5zeXN0ZW0uYmFzZVxyXG4gICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXHJcbiAgICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnY2hhcmFjdGVyJykge1xyXG4gICAgICAgICAgICAvLyBJZiBub3QgYSBQQyBzZXQgc2tpbGwgdmFsdWUgdG8gYmFzZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJdGVtSWRCeU5hbWUoZGF0YS5uYW1lKSkgcmV0dXJuIC8vIElmIHNraWxsIHdpdGggdGhpcyBuYW1lIGV4aXN0IHJldHVyblxyXG5cclxuICAgICAgICAgICAgaWYgKGJhc2VWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIGlmIChTdHJpbmcoYmFzZVZhbHVlKSAhPT0gU3RyaW5nKGRhdGEuc3lzdGVtLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBiYXNlQ2FsY3VsYXRlZFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihkYXRhLnN5c3RlbS52YWx1ZSkpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHZhbHVlXHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gKFxyXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcclxuICAgICAgICAgICAgICAgICAgKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICAgICAgICAgICAgICApLnRvdGFsXHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSBkYXRhLnN5c3RlbS52YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gbnVsbFxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoZGF0YSkpIHtcclxuICAgICAgICAgICAgbGV0IHNraWxsTGlzdCA9IFtdXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbT8uZmxhZ3M/Lm9jY3VwYXRpb24gfHwgZGF0YS5zeXN0ZW0/LmZsYWdzPy5hcmNoZXR5cGUpIHtcclxuICAgICAgICAgICAgICBza2lsbExpc3QgPSB0aGlzLnNraWxscy5maWx0ZXIoZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbT8uZmxhZ3M/Lm9jY3VwYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtPy5mbGFncz8uYXJjaGV0eXBlICYmXHJcbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5mbGFncz8uYXJjaGV0eXBlXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbi50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxyXG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcclxuICAgICAgICAgICAgICBza2lsbExpc3QsXHJcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24sXHJcbiAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiAoc2tpbGxEYXRhKSB7XHJcbiAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBza2lsbERhdGEuZ2V0KCdiYXNlLXZhbHVlJylcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSA9IGJhc2VDYWxjdWxhdGVkXHJcbiAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5nZXQoJ2V4aXN0aW5nLXNraWxsJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEuZ2V0KCdleGlzdGluZy1za2lsbCcpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5mbGFncykpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSBhd2FpdCBleGlzdGluZ0l0ZW0uc2V0SXRlbUZsYWcoa2V5KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGV4aXN0aW5nSXRlbSlcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXHJcbiAgICAgICAgICAgICAgICAgIHNraWxsRGF0YS5nZXQoJ25ldy1za2lsbC1uYW1lJyksXHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcclxuICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhiYXNlQ2FsY3VsYXRlZCkpIHtcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IGJhc2VDYWxjdWxhdGVkXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxyXG4gICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgY2FzZSAnd2VhcG9uJzoge1xyXG4gICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NvbnRhaW5lcicpIHtcclxuICAgICAgICAgICAgY29uc3QgbWFpblNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5tYWluPy5uYW1lXHJcbiAgICAgICAgICAgIGlmIChtYWluU2tpbGwpIHtcclxuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXHJcbiAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXHJcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cclxuICAgICAgICAgICAgICAgICAgOiBtYWluU2tpbGxcclxuICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcclxuICAgICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgISFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5ybmdkXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsLmlkXHJcbiAgICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZFNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5hbHRlcm5hdGl2Py5uYW1lXHJcbiAgICAgICAgICAgIGlmIChzZWNvbmRTa2lsbCkge1xyXG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxyXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxyXG4gICAgICAgICAgICAgICAgICA/IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXHJcbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXHJcbiAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXHJcbiAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSBza2lsbC5pZFxyXG4gICAgICAgICAgICB9IC8vIFRPRE8gOiBFbHNlIDogc2VsZWN0aW9ubmVyIGxlIHNraWxsIGRhbnMgbGEgbGlzdGUgb3UgZW4gY3LDqWVyIHVuIG5vdXZlYXUuXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNhc2UgJ3NldHVwJzoge1xyXG4gICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmVuYWJsZUNoYXJhY3RlcmlzaXRpY3MpIHtcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QgPSB7fVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzdHInKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24gPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdjb24nKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zaXogPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzaXonKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXggPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdkZXgnKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdhcHAnKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5pbnQgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdwb3cnKVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdlZHUnKVxyXG5cclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjayA9IHt9XHJcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWUgPSBpc05hTih0aGlzLmx1Y2spXHJcbiAgICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgICAgOiB0aGlzLmx1Y2tcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay5sYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgICAnQ29DNy5MdWNrJ1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2suc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcykge1xyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyID1cclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIudmFsdWVcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gPVxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmNvbi52YWx1ZVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiA9XHJcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6LnZhbHVlXHJcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ID1cclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXgudmFsdWVcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgPVxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmFwcC52YWx1ZVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCA9XHJcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50LnZhbHVlXHJcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ID1cclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cudmFsdWVcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgPVxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmVkdS52YWx1ZVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2sgPVxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWVcclxuICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNwZW5kUG9pbnRzJylcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQ2hhcmFjJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5wb2ludHNXYXJuaW5nID0gIShcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnN0ciAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zaXogIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmRleCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5pbnQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ICE9PSBudWxsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY29uc3Qgcm9sbGVkID0gYXdhaXQgQ2hhcmFjUm9sbERpYWxvZy5jcmVhdGUoZGF0YS5zeXN0ZW0pXHJcbiAgICAgICAgICAgIGlmIChyb2xsZWQpIHtcclxuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBbXHJcbiAgICAgICAgICAgICAgICAnc3RyJyxcclxuICAgICAgICAgICAgICAgICdjb24nLFxyXG4gICAgICAgICAgICAgICAgJ3NpeicsXHJcbiAgICAgICAgICAgICAgICAnZGV4JyxcclxuICAgICAgICAgICAgICAgICdhcHAnLFxyXG4gICAgICAgICAgICAgICAgJ2ludCcsXHJcbiAgICAgICAgICAgICAgICAncG93JyxcclxuICAgICAgICAgICAgICAgICdlZHUnXHJcbiAgICAgICAgICAgICAgXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV1cclxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0uZm9ybXVsYWBdID1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnXSA9XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVja1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSddID1cclxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3dcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0J10gPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCddID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEpXHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzogdGhpcy5yYXdIcE1heCxcclxuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnOiB0aGlzLnJhd0hwTWF4XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gZGF0YS5zeXN0ZW0uaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXHJcbiAgICAgICAgICBjb25zdCBvdGhlcnNJdGVtcyA9IGRhdGEuc3lzdGVtLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlICE9PSAnc2tpbGwnKVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhza2lsbHMpXHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKG90aGVyc0l0ZW1zKVxyXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JykpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJhY2tzdG9yeSc6IGRhdGEuc3lzdGVtLmJhY2tzdG9yeSB9KVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uTmFtZSBvZiBkYXRhLnN5c3RlbS5iaW9TZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICF0aGlzLnN5c3RlbS5iaW9ncmFwaHk/LmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgIGVsID0+IHNlY3Rpb25OYW1lID09PSBlbC50aXRsZVxyXG4gICAgICAgICAgICAgICAgKSAmJlxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWVcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQmlvU2VjdGlvbihzZWN0aW9uTmFtZSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIEhvb2tzLmNhbGwoJ3NldHVwRmluaXNoZWRDb0M3JylcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgJ2FyY2hldHlwZSc6XHJcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2hhcmFjdGVyJykge1xyXG4gICAgICAgICAgICAvLyBBcmNoZXR5cHJlIG9ubHkgZm9yIFBDc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hcmNoZXR5cGUpIHtcclxuICAgICAgICAgICAgICBsZXQgcmVzZXRBcmNoZXR5cGUgPSBmYWxzZVxyXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVzZXRBcmNoZXR5cGUnKSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRBcmNoZXR5cGVIaW50Jywge1xyXG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxyXG4gICAgICAgICAgICAgICAgeWVzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc2V0QXJjaGV0eXBlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICBpZiAocmVzZXRBcmNoZXR5cGUpIGF3YWl0IHRoaXMucmVzZXRBcmNoZXR5cGUoKVxyXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWMgPSBbXVxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2tleV0gPSBmYWxzZVxyXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxyXG4gICAgICAgICAgICAgICAgY2hhci5rZXkgPSBrZXlcclxuICAgICAgICAgICAgICAgIGNvcmVDaGFyYWMucHVzaChjaGFyKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGNoYXJhY1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEaWFsb2dEYXRhID0ge31cclxuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBjb3JlQ2hhcmFjXHJcbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2VsZWN0Q29yZUNoYXJhYycpXHJcbiAgICAgICAgICAgICAgY2hhcmFjID0gYXdhaXQgQ2hhcmFjU2VsZWN0RGlhbG9nLmNyZWF0ZShjaGFyRGlhbG9nRGF0YSlcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb3JlQ2hhcmFjLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgIGNoYXJhYyA9IGNvcmVDaGFyYWNbMF0ua2V5XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghY2hhcmFjKSByZXR1cm5cclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjaGFyYWNdID0gdHJ1ZVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IE51bWJlcihkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZSlcclxuICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWMpXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoXHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAgICAgcm9sbC50b01lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNoYXIubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhOiBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhci52YWx1ZSA8IHJvbGwudG90YWwgPyByb2xsLnRvdGFsIDogY2hhci52YWx1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtjaGFyYWN9LnZhbHVlYF06IHZhbHVlXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGFsbCBza2lsbHNcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdhcmNoZXR5cGUnKVxyXG5cclxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxyXG4gICAgICAgICAgICBhcmNoZXR5cGUgPSB0cnVlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzpcclxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XHJcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIHtcclxuICAgICAgICAgICAgICBsZXQgcmVzZXRPY2N1cGF0aW9uID0gZmFsc2VcclxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0T2NjdXBhdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldE9jY3VwYXRpb25IaW50Jywge1xyXG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxyXG4gICAgICAgICAgICAgICAgeWVzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0WWVzOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgaWYgKHJlc2V0T2NjdXBhdGlvbikgYXdhaXQgdGhpcy5yZXNldE9jY3VwYXRpb24oKVxyXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBjaGFyYWN0ZXJpc3RpY1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cclxuICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBkYXRhLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcclxuICAgICAgICAgICAgbGV0IHRvdGFsID0gMFxyXG4gICAgICAgICAgICBsZXQgb3B0aW9uYWxDaGFyID0gZmFsc2VcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcclxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcclxuICAgICAgICAgICAgKSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XHJcbiAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxyXG4gICAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubmFtZSA9IGNoYXIubGFiZWxcclxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxyXG4gICAgICAgICAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbCA9XHJcbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxyXG4gICAgICAgICAgICAgICAgICBOdW1iZXIocG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5tdWx0aXBsaWVyKVxyXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5vcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBvcHRpb25hbENoYXIgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEudG90YWwgPSB0b3RhbFxyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWxDaGFyKSB7XHJcbiAgICAgICAgICAgICAgLy8gSXMgdGhlcmUgYW55IG9wdGlvbmFsIGNoYXIgdG8gY2hvb3NlIGZvciBwb2ludHMgY2FsYyA/XHJcbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9pbnRTZWxlY3REaWFsb2cuY3JlYXRlKHBvaW50c0RpYWxvZ0RhdGEpXHJcbiAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHJldHVybiAvLyBQb2ludCBub3Qgc2VsZWN0ZWQgPT4gZXhpdC5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIG9wdGlvbmFsIHNraWxsc1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxyXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzID0gW11cclxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcclxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXHJcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5vcHRpb25zQ291bnQgPSBOdW1iZXIoZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5vcHRpb25zKVxyXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxTZWxlY3Rpb25XaW5kb3cnKVxyXG5cclxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscykge1xyXG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGEgZ2VuZXJpYyBzcGVjIHdlIGFsd2F5cyBhZGQgaXRcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSB2YWx1ZS5uYW1lICYmIGl0ZW0udHlwZSA9PT0gJ3NraWxsJ1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5zeXN0ZW0uZmxhZ3M/Lm9jY3VwYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBza2lsbCB3YXMgYWRkZWQgdG8gc2tpbGwgbGlzdCBwcmV2aW91c2x5LCByZW1vdmUgaXRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBub25lLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggPD0gZGlhbG9nRGF0YS5vcHRpb25zQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxyXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvTGVzc1NraWxsVGhhbk9wdGlvbnMnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gQ29DN0l0ZW0ubWVyZ2VPcHRpb25hbFNraWxscyhcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBhd2FpdCBTa2lsbFNlbGVjdERpYWxvZy5jcmVhdGUoZGlhbG9nRGF0YSlcclxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gbWVyZ2VkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGV4dHJhIHNraWxsc1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxyXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzID0gW11cclxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcclxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXHJcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5vcHRpb25zQ291bnQgPSBOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpXHJcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XHJcbiAgICAgICAgICAgICAgICBudW1iZXI6IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcclxuICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuc2tpbGxzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsIHNraWxscyB0aGF0IGFyZSBub3QgYWxyZWFkeSBmbGFnZ2VkIGFzIG9jY3VwYXRpb24sIGNhbiBoYXZlIGFkanVzdG1lbnRzIGFuZCBYUC5cclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLmZsYWdzLm9jY3VwYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm9hZGp1c3RtZW50cyAmJlxyXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIGFscmVhZHkgc2VsZWN0ZWQgZG9uJ3QgYWRkIGl0XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gcy5uYW1lXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm9uZSwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgaXMgbGVzcyBza2lsbCB0aGFuIG9wdGlvbnMsIGFkZCB0aGVtIGFsbC5cclxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxDb3VudDogZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gbWVyZ2VkXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpIC8vIERpYWxvZyBkYXRhIGJ1ZyA/Pz9cclxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gbWVyZ2VkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGFsbCBza2lsbHNcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdvY2N1cGF0aW9uJylcclxuICAgICAgICAgICAgLy8gQ3JlZGl0IHJhdGluZyBpcyBhbHdheXMgcGFydCBvZiBvY2N1cGF0aW9uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlZGl0UmF0aW5nU2tpbGw/LnNldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcclxuICAgICAgICAgICAgLy8gc2V0dGluZyBpdCB0byBtaW4gY3JlZGl0IHJhdGluZ1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvbic6IE51bWJlcihkYXRhLnN5c3RlbS5jcmVkaXRSYXRpbmcubWluKVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxyXG4gICAgICAgICAgICBvY2N1cGF0aW9uID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb2Nlc3NlZERhdGFBcnJheS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcclxuICAgICAgZW1iZWRkZWROYW1lLFxyXG4gICAgICBwcm9jZXNzZWREYXRhQXJyYXksXHJcbiAgICAgIG9wdGlvbnNcclxuICAgIClcclxuXHJcbiAgICBpZiAoYXJjaGV0eXBlKSB7XHJcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMuYXJjaGV0eXBlUG9pbnRzXHJcbiAgICAgIH0pXHJcbiAgICAgIEhvb2tzLmNhbGwoJ2FyY2hldHlwZUZpbmlzaGVkQ29DNycpXHJcbiAgICB9XHJcbiAgICBpZiAob2NjdXBhdGlvbikge1xyXG4gICAgICAvLyBzZXR0aW5nIHBvaW50c1xyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XHJcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzLFxyXG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQucGVyc29uYWwnOiB0aGlzLnBlcnNvbmFsUG9pbnRzXHJcbiAgICAgIH0pXHJcbiAgICAgIEhvb2tzLmNhbGwoJ29jY3VwYXRpb25GaW5pc2hlZENvQzcnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwcm9jZXNzZWRcclxuICB9XHJcblxyXG4gIC8vIGdldFNraWxsSWRCeU5hbWUoIHNraWxsTmFtZSl7XHJcbiAgLy8gICBsZXQgaWQgPSBudWxsO1xyXG4gIC8vICAgIGZvciAoY29uc3QgW21hcCwga2V5LCB2YWx1ZV0gb2YgdGhpcy5pdGVtcykge1xyXG4gIC8vICAgICBpZiggdmFsdWUubmFtZSA9PSBza2lsbE5hbWUpIGlkID0gdmFsdWUuaWQ7XHJcbiAgLy8gICB9O1xyXG5cclxuICAvLyAgIHJldHVybiBpZDtcclxuICAvLyB9XHJcblxyXG4gIGdldEl0ZW1JZEJ5TmFtZSAoaXRlbU5hbWUpIHtcclxuICAgIGxldCBpZCA9IG51bGxcclxuICAgIGNvbnN0IG5hbWUgPSBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXHJcbiAgICAgID8gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxyXG4gICAgICA6IGl0ZW1OYW1lXHJcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlkID0gdmFsdWUuaWRcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpZFxyXG4gIH1cclxuXHJcbiAgZ2V0SXRlbXNCeU5hbWUgKGl0ZW1OYW1lKSB7XHJcbiAgICBjb25zdCBpdGVtTGlzdCA9IFtdXHJcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgaWYgKHZhbHVlLm5hbWUgPT09IGl0ZW1OYW1lKSBpdGVtTGlzdC5wdXNoKHZhbHVlKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpdGVtTGlzdFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKlxyXG4gICAqL1xyXG4gIGdldFNraWxsc0J5TmFtZSAoc2tpbGxOYW1lKSB7XHJcbiAgICAvLyBUT0RPIDogbW9yZSBhZ2dyZXNzaXZlIGZpbmRpbmcgaW5jbHVkaW5nIHNwZWNzXHJcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxyXG4gICAgY29uc3QgbmFtZSA9IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXHJcbiAgICAgID8gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cclxuICAgICAgOiBza2lsbE5hbWVcclxuXHJcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT1cclxuICAgICAgICAgIG5hbWUudG9Mb3dlckNhc2UoKSAmJlxyXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdza2lsbCdcclxuICAgICAgKSB7XHJcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBza2lsbExpc3RcclxuICB9XHJcblxyXG4gIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xyXG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XHJcbiAgICAgIHBhcnNlZEZvcm11bGEgPSBwYXJzZWRGb3JtdWxhLnJlcGxhY2Uoa2V5LCB2YWx1ZSlcclxuICAgIH1cclxuICAgIHJldHVybiBwYXJzZWRGb3JtdWxhXHJcbiAgfVxyXG5cclxuICBwYXJzZUNoYXJhY3RlcmlzdGljcyAoKSB7XHJcbiAgICBjb25zdCBwYXJzZWQgPSB7fVxyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xyXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XHJcbiAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyc2VkXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uICgpIHtcclxuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IFtdXHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcclxuICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcclxuICAgICkpIHtcclxuICAgICAgY2hhcmFjdGVyaXN0aWNzLnB1c2goe1xyXG4gICAgICAgIGtleSxcclxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXHJcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcclxuICB9XHJcblxyXG4gIGdldENoYXJhY3RlcmlzdGljIChjaGFyTmFtZSkge1xyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykge1xyXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcclxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcclxuICAgICAgKSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSA9PT1cclxuICAgICAgICAgICAgY2hhck5hbWUudG9Mb3dlckNhc2UoKSB8fFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKS50b0xvd2VyQ2FzZSgpID09PVxyXG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICBrZXkgPT09IGNoYXJOYW1lLnRvTG93ZXJDYXNlKClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgc2hvcnROYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxyXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIFsnbGNrJywgJ2x1Y2snLCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLnRvTG93ZXJDYXNlKCldLmluY2x1ZGVzKFxyXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICApXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBrZXk6ICdsY2snLFxyXG4gICAgICAgIHNob3J0TmFtZTogJ2x1Y2snLFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxyXG4gICAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIFtcclxuICAgICAgICAnc2FuJyxcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJykudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JykudG9Mb3dlckNhc2UoKVxyXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcclxuICAgICkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleTogJ3NhbicsXHJcbiAgICAgICAgc2hvcnROYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyksXHJcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKSxcclxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGFzeW5jIHJ1blJvbGwgKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBvcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9IHRydWVcclxuICAgIH1cclxuICAgIG9wdGlvbnMuYWN0b3IgPSB0aGlzXHJcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIob3B0aW9ucylcclxuICAgIHJldHVybiByZXN1bHRzXHJcbiAgfVxyXG5cclxuICBnZXQgb2NjdXBhdGlvbiAoKSB7XHJcbiAgICBjb25zdCBvY2N1cGF0aW9uID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJylcclxuICAgIHJldHVybiBvY2N1cGF0aW9uWzBdXHJcbiAgfVxyXG5cclxuICBnZXQgYXJjaGV0eXBlICgpIHtcclxuICAgIGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJylcclxuICAgIHJldHVybiBhcmNoZXR5cGVbMF1cclxuICB9XHJcblxyXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvbiAoZXJhc2VPbGQgPSB0cnVlKSB7XHJcbiAgICBpZiAoZXJhc2VPbGQpIHtcclxuICAgICAgY29uc3Qgb2NjdXBhdGlvblNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxyXG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxyXG4gICAgICApXHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgYXdhaXQgb2NjdXBhdGlvblNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMub2NjdXBhdGlvbikgYXdhaXQgdGhpcy5vY2N1cGF0aW9uLmRlbGV0ZSgpXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IG51bGwgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlIChlcmFzZU9sZCA9IHRydWUpIHtcclxuICAgIGlmIChlcmFzZU9sZCkge1xyXG4gICAgICBjb25zdCBhcmNoZXR5cGVTa2lsbCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT5cclxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxyXG4gICAgICApXHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcmNoZXR5cGVTa2lsbC5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBhd2FpdCBhcmNoZXR5cGVTa2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnYXJjaGV0eXBlJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYXJjaGV0eXBlKSBhd2FpdCB0aGlzLmFyY2hldHlwZS5kZWxldGUoKVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IG51bGwgfSlcclxuICB9XHJcblxyXG4gIGdldCBsdWNrICgpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzPy5sY2s/LnZhbHVlKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0THVjayAodmFsdWUpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOiB2YWx1ZSB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc3BlbmRMdWNrIChhbW91bnQpIHtcclxuICAgIGFtb3VudCA9IHBhcnNlSW50KGFtb3VudClcclxuICAgIGlmICghKHRoaXMubHVjayA+PSBhbW91bnQpKSByZXR1cm4gZmFsc2VcclxuICAgIHJldHVybiB0aGlzLnNldEx1Y2sodGhpcy5sdWNrIC0gYW1vdW50KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhwICgpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd0hwTWF4ICgpIHtcclxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8pIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgIT0gbnVsbCAmJlxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgIT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihcclxuICAgICAgICAgIChwYXJzZUludCh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlLCAxMCkgK1xyXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlLCAxMCkpIC9cclxuICAgICAgICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlRG91YmxlTWF4SGVhbHRoJykgJiZcclxuICAgICAgICAgICAgdGhpcy50eXBlID09PSAnY2hhcmFjdGVyJ1xyXG4gICAgICAgICAgICAgID8gNVxyXG4gICAgICAgICAgICAgIDogMTApXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhwTWF4ICgpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9zZXRIcCAodmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxyXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpIHtcclxuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcclxuICAgIH1cclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IHZhbHVlIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRVbmlxdWVJdGVtcyAoc2tpbGxMaXN0LCBmbGFnID0gbnVsbCkge1xyXG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cclxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2tpbGxMaXN0KSB7XHJcbiAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoc2tpbGwpKSB7XHJcbiAgICAgICAgaWYgKCFza2lsbC5zeXN0ZW0uZmxhZ3MpIHNraWxsLnN5c3RlbS5mbGFncyA9IHt9XHJcbiAgICAgICAgaWYgKGZsYWcpIHNraWxsLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcclxuICAgICAgICBwcm9jZXNzZWQucHVzaChkdXBsaWNhdGUoc2tpbGwpKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXHJcbiAgICAgICAgaWYgKCFpdGVtSWQpIHtcclxuICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgIGlmICghc2tpbGwuc3lzdGVtLmZsYWdzKSBza2lsbC5zeXN0ZW0uZmxhZ3MgPSB7fVxyXG4gICAgICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwcm9jZXNzZWQucHVzaChkdXBsaWNhdGUoc2tpbGwpKVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZykge1xyXG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcclxuICAgICAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xyXG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRJdGVtcyAoaXRlbUxpc3QsIGZsYWcgPSBudWxsKSB7XHJcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0KSB7XHJcbiAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgaWYgKCFpdGVtLnN5c3RlbS5mbGFncykgaXRlbS5zeXN0ZW0uZmxhZ3MgPSB7fVxyXG4gICAgICAgIGl0ZW0uc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICAgIHByb2Nlc3NlZC5wdXNoKGR1cGxpY2F0ZShpdGVtKSlcclxuICAgIH1cclxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcclxuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkVW5pcXVlSXRlbSAoc2tpbGwsIGZsYWcgPSBudWxsKSB7XHJcbiAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxyXG4gICAgaWYgKCFpdGVtSWQpIHtcclxuICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICBpZiAoIXNraWxsLnN5c3RlbS5mbGFncykgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cclxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtza2lsbF0sIHtcclxuICAgICAgICByZW5kZXJTaGVldDogZmFsc2VcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAoZmxhZykge1xyXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxyXG4gICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgcmF3TXBNYXggKCkge1xyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykge1xyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXHJcbiAgICAgIH0gZWxzZSByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KVxyXG4gIH1cclxuXHJcbiAgZ2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uKSB7XHJcbiAgICBpZiAodHlwZW9mIHNhblJlYXNvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzLmZpbHRlcihcclxuICAgICAgICAgIHIgPT4gci50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNhblJlYXNvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgKVswXSA/PyB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIHJldHVybiB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XHJcbiAgfVxyXG5cclxuICBzYW5Mb3N0VG9SZWFzb24gKHNhblJlYXNvbikge1xyXG4gICAgaWYgKHNhblJlYXNvbikge1xyXG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxyXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDBcclxuICB9XHJcblxyXG4gIHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoc2FuUmVhc29uKSB7XHJcbiAgICBpZiAoc2FuUmVhc29uKSB7XHJcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXHJcbiAgICAgIHJldHVybiBzYW5pdHlMb3NzRXZlbnQudHlwZSAhPT0gJydcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgc2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XHJcbiAgICBpZiAodHlwZW9mIHNhblJlYXNvbiA9PT0gJ3N0cmluZycgJiYgc2FuUmVhc29uICE9PSAnJykge1xyXG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gZHVwbGljYXRlKHRoaXMuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMpXHJcbiAgICAgIGNvbnN0IGluZGV4ID0gc2FuaXR5TG9zc0V2ZW50cy5maW5kSW5kZXgoXHJcbiAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgKVxyXG4gICAgICBpZiAoc2FuTG9zcyA+IDApIHtcclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xyXG4gICAgICAgICAgICB0eXBlOiBzYW5SZWFzb24sXHJcbiAgICAgICAgICAgIHRvdGFsTG9zczogc2FuTG9zcyxcclxuICAgICAgICAgICAgaW1tdW5pdHk6IGZhbHNlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzYW5pdHlMb3NzRXZlbnRzW2luZGV4XS50b3RhbExvc3MgKz0gc2FuTG9zc1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xyXG4gICAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy51cGRhdGUoe1xyXG4gICAgICAgICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHNcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1heExvc3NUb1NhblJlYXNvbiAoc2FuUmVhc29uLCBzYW5NYXhGb3JtdWxhKSB7XHJcbiAgICBjb25zdCBzYW5NYXggPSBuZXcgUm9sbChzYW5NYXhGb3JtdWxhLnRvU3RyaW5nKCkpLmV2YWx1YXRlKHtcclxuICAgICAgbWF4aW1pemU6IHRydWVcclxuICAgIH0pLnRvdGFsXHJcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxyXG4gICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHNhbk1heCAtIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MpXHJcbiAgfVxyXG5cclxuICBhc3luYyBsb29zZVNhbiAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XHJcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxyXG4gICAgaWYgKCFzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gLSBzYW5Mb3NzKVxyXG4gICAgICB0aGlzLnNldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uLCBzYW5Mb3NzKVxyXG4gICAgICByZXR1cm4gc2FuTG9zc1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDBcclxuICB9XHJcblxyXG4gIHNhbkxvc3MgKGNoZWNrUGFzc2VkKSB7XHJcbiAgICBpZiAoY2hlY2tQYXNzZWQpIHJldHVybiB0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZFxyXG4gICAgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNhbkxvc3NDaGVja1Bhc3NlZCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcclxuICB9XHJcblxyXG4gIGdldCBzYW5Mb3NzQ2hlY2tGYWlsbGVkICgpIHtcclxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja0ZhaWxsZWRcclxuICB9XHJcblxyXG4gIGdldCBzYW5Mb3NzTWF4ICgpIHtcclxuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpIHtcclxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSkpIHtcclxuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKS5ldmFsdWF0ZSh7XHJcbiAgICAgICAgbWF4aW1pemU6IHRydWVcclxuICAgICAgfSkudG90YWxcclxuICAgIH1cclxuICAgIHJldHVybiAwXHJcbiAgfVxyXG5cclxuICBnZXQgc2FuTG9zc01pbiAoKSB7XHJcbiAgICBpZiAodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpIHtcclxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpKSkge1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKS5ldmFsdWF0ZSh7XHJcbiAgICAgICAgbWF4aW1pemU6IHRydWVcclxuICAgICAgfSkudG90YWxcclxuICAgIH1cclxuICAgIHJldHVybiAwXHJcbiAgfVxyXG5cclxuICBnZXQgZGFpbHlTYW5Mb3NzICgpIHtcclxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMb3NzIHx8IDBcclxuICB9XHJcblxyXG4gIGdldCBkYWlseVNhbkxpbWl0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMaW1pdCB8fCAwXHJcbiAgfVxyXG5cclxuICBnZXQgcmF3U2FuTWF4ICgpIHtcclxuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LnNhbj8uYXV0bykge1xyXG4gICAgICBpZiAodGhpcy5jdGh1bGh1TXl0aG9zKSByZXR1cm4gTWF0aC5tYXgoOTkgLSB0aGlzLmN0aHVsaHVNeXRob3MsIDApXHJcbiAgICAgIHJldHVybiA5OVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heClcclxuICB9XHJcblxyXG4gIGdldCBzYW5NYXggKCkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heClcclxuICB9XHJcblxyXG4gIGdldCBtcCAoKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSlcclxuICB9XHJcblxyXG4gIGdldCBtcE1heCAoKSB7XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XHJcbiAgICAgIC8vIFRPRE8gaWYgYW55IGlzIG51bGwgc2V0IG1heCBiYWNrIHRvIG51bGwuXHJcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0TXAgKHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcclxuICAgIGlmICh2YWx1ZSA+IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSkgeyB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSB9XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOiB2YWx1ZSB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0IHNhbiAoKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpXHJcbiAgfVxyXG5cclxuICBnZXQgaW50ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxyXG4gIH1cclxuXHJcbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHNTcGVudCAoKSB7XHJcbiAgICBsZXQgb2NjdXBhdGlvblBvaW50cyA9IDBcclxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcclxuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbikge1xyXG4gICAgICAgIG9jY3VwYXRpb25Qb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLm9jY3VwYXRpb25cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9jY3VwYXRpb25Qb2ludHNcclxuICB9XHJcblxyXG4gIGdldCBvY2N1cGF0aW9uUG9pbnRzICgpIHtcclxuICAgIGlmICghdGhpcy5vY2N1cGF0aW9uKSByZXR1cm4gMFxyXG4gICAgbGV0IHBvaW50cyA9IDBcclxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoXHJcbiAgICAgIHRoaXMub2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXHJcbiAgICApKSB7XHJcbiAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XHJcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcclxuICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgcG9pbnRzICs9IGNoYXIudmFsdWUgKiBOdW1iZXIodmFsdWUubXVsdGlwbGllcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBvaW50c1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVzZXRPY2N1cGF0aW9uUG9pbnRzICgpIHtcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGVQb2ludHMgKCkge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMub2NjdXBhdGlvblBvaW50c1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlc2V0UGVyc29uYWxQb2ludHMgKCkge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldCBhcmNoZXR5cGVQb2ludHNTcGVudCAoKSB7XHJcbiAgICBsZXQgYXJjaGV0eXBlUG9pbnRzID0gMFxyXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xyXG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5hcmNoZXR5cGUpIHtcclxuICAgICAgICBhcmNoZXR5cGVQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJjaGV0eXBlUG9pbnRzXHJcbiAgfVxyXG5cclxuICBnZXQgYXJjaGV0eXBlUG9pbnRzICgpIHtcclxuICAgIGlmICghdGhpcy5hcmNoZXR5cGUpIHJldHVybiAwXHJcbiAgICByZXR1cm4gdGhpcy5hcmNoZXR5cGUuc3lzdGVtLmJvbnVzUG9pbnRzXHJcbiAgfVxyXG5cclxuICBnZXQgZXhwZXJpZW5jZVBvaW50cyAoKSB7XHJcbiAgICBsZXQgZXhwZXJpZW5jZVBvaW50cyA9IDBcclxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcclxuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSkge1xyXG4gICAgICAgIGV4cGVyaWVuY2VQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGV4cGVyaWVuY2VQb2ludHNcclxuICB9XHJcblxyXG4gIGdldCBwZXJzb25hbFBvaW50c1NwZW50ICgpIHtcclxuICAgIGxldCBwZXJzb25hbFBvaW50cyA9IDBcclxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcclxuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpIHtcclxuICAgICAgICBwZXJzb25hbFBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMucGVyc29uYWxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBlcnNvbmFsUG9pbnRzXHJcbiAgfVxyXG5cclxuICBnZXQgcGVyc29uYWxQb2ludHMgKCkge1xyXG4gICAgcmV0dXJuIDIgKiBOdW1iZXIodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZSlcclxuICB9XHJcblxyXG4gIGdldCBoYXNEZXZlbG9wbWVudFBoYXNlICgpIHtcclxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcclxuICAgICAgaWYgKHNraWxsLnN5c3RlbS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cykge1xyXG4gICAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0U2FuICh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXHJcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpIHsgdmFsdWUgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXggfVxyXG4gICAgY29uc3QgbG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlKSAtIHZhbHVlXHJcblxyXG4gICAgaWYgKGxvc3MgPiAwKSB7XHJcbiAgICAgIGxldCB0b3RhbExvc3MgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXHJcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXHJcbiAgICAgICAgOiAwXHJcbiAgICAgIHRvdGFsTG9zcyA9IHRvdGFsTG9zcyArIGxvc3NcclxuICAgICAgaWYgKGxvc3MgPj0gNSkgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXHJcbiAgICAgIGlmICh0b3RhbExvc3MgPj0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCkge1xyXG4gICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUsXHJcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiB0b3RhbExvc3NcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSB9KVxyXG4gICAgcmV0dXJuIHZhbHVlXHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRBdHRyaWJBdXRvICh2YWx1ZSwgYXR0cmliKSB7XHJcbiAgICBjb25zdCB1cGRhdGVkS2V5ID0gYHN5c3RlbS5hdHRyaWJzLiR7YXR0cmlifS5hdXRvYFxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgW3VwZGF0ZWRLZXldOiB2YWx1ZSB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdG9nZ2xlQXR0cmliQXV0byAoYXR0cmliKSB7XHJcbiAgICB0aGlzLnNldEF0dHJpYkF1dG8oIXRoaXMuc3lzdGVtLmF0dHJpYnNbYXR0cmliXS5hdXRvLCBhdHRyaWIpXHJcbiAgfVxyXG5cclxuICBnZXQgcmF3QnVpbGQgKCkge1xyXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkKSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPT09ICdhdXRvJykge1xyXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSB7XHJcbiAgICAgIGNvbnN0IHN1bSA9XHJcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSArXHJcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxyXG4gICAgICBpZiAoc3VtID4gMTY0KSByZXR1cm4gTWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApICsgMVxyXG4gICAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxyXG4gICAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxyXG4gICAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxyXG4gICAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXHJcbiAgfVxyXG5cclxuICBnZXQgYnVpbGQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWVcclxuICB9XHJcblxyXG4gIGdldCByYXdEYiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuZGIpIHJldHVybiBudWxsXHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9PT0gJ2F1dG8nKSB7XHJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLmF1dG8pIHtcclxuICAgICAgY29uc3Qgc3VtID1cclxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlICtcclxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlXHJcbiAgICAgIGlmIChzdW0gPiAxNjQpIHJldHVybiBgJHtNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCl9RDZgXHJcbiAgICAgIGlmIChzdW0gPCA2NSkgcmV0dXJuIC0yXHJcbiAgICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXHJcbiAgICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXHJcbiAgICAgIGlmIChzdW0gPCAxNjUpIHJldHVybiAnMUQ0J1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcclxuICB9XHJcblxyXG4gIGdldCBkYiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd01vdiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMubW92KSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlID09PSAnYXV0bycpIHtcclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0byA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvKSB7XHJcbiAgICAgIGxldCBNT1ZcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPlxyXG4gICAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSAmJlxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPlxyXG4gICAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxyXG4gICAgICApIHtcclxuICAgICAgICBNT1YgPSA5IC8vIEJ1ZyBjb3JyZWN0aW9uIGJ5IEFkbWlyYWxOeWFyLlxyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPj1cclxuICAgICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgfHxcclxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID49XHJcbiAgICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlXHJcbiAgICAgICkge1xyXG4gICAgICAgIE1PViA9IDhcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBNT1YgPSA3XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnR5cGUgIT09ICdjcmVhdHVyZScpIHtcclxuICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KHRoaXMuc3lzdGVtLmluZm9zLmFnZSkpKSB7XHJcbiAgICAgICAgICBNT1YgPVxyXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnN5c3RlbS5pbmZvcy5hZ2UpID49IDQwXHJcbiAgICAgICAgICAgICAgPyBNT1YgLSBNYXRoLmZsb29yKHBhcnNlSW50KHRoaXMuc3lzdGVtLmluZm9zLmFnZSkgLyAxMCkgKyAzXHJcbiAgICAgICAgICAgICAgOiBNT1ZcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKE1PViA+IDApIHJldHVybiBNT1ZcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxyXG4gIH1cclxuXHJcbiAgZ2V0IG1vdiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWVcclxuICB9XHJcblxyXG4gIGdldCB0b2tlbklkICgpIHtcclxuICAgIC8vIFRPRE8gY2xhcmlmaWVyIGNhIGV0IHRva2Vua2V5XHJcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgfVxyXG5cclxuICBnZXQgbG9ja2VkICgpIHtcclxuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcclxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxyXG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XHJcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncyc6IHt9IH0pXHJcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiBmYWxzZSB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWRcclxuICB9XHJcblxyXG4gIGdldEl0ZW1zRnJvbU5hbWUgKG5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkubmFtZSA9PT0gbmFtZSlcclxuICB9XHJcblxyXG4gIHNldCBsb2NrZWQgKHZhbHVlKSB7XHJcbiAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdmFsdWUgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZUFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcclxuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cclxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IGF0dHJpYnV0ZU5hbWUga2V5IG9mIGF0dHJpYnV0ZSB0byBjaGVjayBpbiBbJ2xjayddXHJcbiAgICogQHBhcmFtIHsqfSBmYXN0Rm9yd2FyZFxyXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcclxuICAgKi9cclxuICBhc3luYyBhdHRyaWJ1dGVDaGVjayAoYXR0cmlidXRlTmFtZSwgZmFzdEZvcndhcmQgPSBmYWxzZSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCBhdHRyaWIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkpXHJcbiAgICBpZiAoIWF0dHJpYikge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcclxuICAgICAgICAgIG1pc3Npbmc6IGF0dHJpYnV0ZU5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuXHJcbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXHJcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XHJcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XHJcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcclxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXHJcbiAgICAgICAgaWYgKHVzYWdlKSB7XHJcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcclxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXHJcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxyXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxyXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XHJcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXHJcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcclxuICAgIGF3YWl0IGNoZWNrLnJvbGxBdHRyaWJ1dGUoYXR0cmliLmtleSlcclxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gY2hhcmFjdGVyaXN0aWNOYW1lIGtleSBvZiBjaGFyYWN0ZXJpc3RpYyB0byBjaGVjayBpbiBbJ3N0cicsJ2NvbicsJ3NpeicsJ2RleCcsJ2FwcCcsJ2ludCcsJ3BvdycsJ2VkdSddXHJcbiAgICogQHBhcmFtIHsqfSBmYXN0Rm9yd2FyZFxyXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcclxuICAgKi9cclxuICBhc3luYyBjaGFyYWN0ZXJpc3RpY0NoZWNrIChcclxuICAgIGNoYXJhY3RlcmlzdGljTmFtZSxcclxuICAgIGZhc3RGb3J3YXJkID0gZmFsc2UsXHJcbiAgICBvcHRpb25zID0ge31cclxuICApIHtcclxuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhY3RlcmlzdGljTmFtZSlcclxuXHJcbiAgICBpZiAoIWNoYXIpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmRGb3JBY3RvcicsIHtcclxuICAgICAgICAgIG1pc3Npbmc6IGNoYXJhY3RlcmlzdGljTmFtZSxcclxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcblxyXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxyXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xyXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xyXG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XHJcbiAgICAgICAgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IGNoYXIubGFiZWxcclxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXHJcbiAgICAgICAgaWYgKHVzYWdlKSB7XHJcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcclxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXHJcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxyXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxyXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XHJcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXHJcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcclxuICAgIGF3YWl0IGNoZWNrLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyLmtleSlcclxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXHJcbiAgfVxyXG5cclxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcclxuICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxyXG4gICAgICBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhXHJcbiAgICApXHJcbiAgICBpZiAoIXNraWxsLmxlbmd0aCkge1xyXG4gICAgICBsZXQgaXRlbSA9IG51bGxcclxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XHJcbiAgICAgICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KHNraWxsRGF0YS5wYWNrKVxyXG4gICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cclxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXHJcbiAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLmlkKSB7XHJcbiAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHNraWxsRGF0YS5pZClcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTm8gc2tpbGwgZm91bmQsIHRyeSB0byBnZXQgZ2V0IGl0IGZyb20gY29tcGVuZGl1bSAhXHJcbiAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgIC8vIFRPRE86IEltcGxlbWVudCByZXRyaWV2YWwgb2Ygc2tpbGwgZnJvbSBjb21wZW5kaXVtICEhXHJcbiAgICAgICAgLy8gZ2FtZS5zZXR0aW5ncy5nZXQoICdDb0M3JywgJ0RlZmF1bHRDb21wZW5kaXVtJyk7XHJcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSAnPydcclxuICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vU2tpbGwnKSArXHJcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xyXG4gICAgICAgICAgICAgIG1pc3Npbmc6IHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGEsXHJcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXHJcbiAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcclxuICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZFdlYXBvbicpfWAsXHJcbiAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcclxuICAgICAgICAgIHdlYXBvbjogc2tpbGxEYXRhLm5hbWUsXHJcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXHJcbiAgICAgICAgfSl9PC9wPmAsXHJcbiAgICAgICAgeWVzOiAoKSA9PiB7XHJcbiAgICAgICAgICBjcmVhdGUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZHVwbGljYXRlKGl0ZW0pXSlcclxuICAgICAgfSBlbHNlIHJldHVyblxyXG5cclxuICAgICAgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShpdGVtLm5hbWUpXHJcblxyXG4gICAgICBpZiAoIXNraWxsLmxlbmd0aCkgcmV0dXJuXHJcblxyXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gYXdhaXQgU2tpbGxWYWx1ZURpYWxvZy5jcmVhdGUoXHJcbiAgICAgICAgICBza2lsbFswXS5uYW1lLFxyXG4gICAgICAgICAgc2tpbGxbMF0uYmFzZVxyXG4gICAgICAgIClcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbFZhbHVlLmdldCgnYmFzZS12YWx1ZScpKVxyXG4gICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZVZhbHVlKHZhbHVlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuXHJcbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLm1vZGlmaWVyKSB7XHJcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxyXG4gICAgfVxyXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XHJcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XHJcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcclxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXHJcbiAgICAgICAgaWYgKHVzYWdlKSB7XHJcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcclxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXHJcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxyXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxyXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XHJcbiAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXHJcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXHJcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcclxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxyXG4gICAgY2hlY2sudG9NZXNzYWdlKClcclxuICB9XHJcblxyXG4gIGFzeW5jIHdlYXBvbkNoZWNrICh3ZWFwb25EYXRhLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XHJcbiAgICBsZXQgd2VhcG9uXHJcbiAgICBpZiAodHlwZW9mIHdlYXBvbkRhdGEudXVpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgd2VhcG9uID0gYXdhaXQgZnJvbVV1aWQod2VhcG9uRGF0YS51dWlkKVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3ZWFwb25EYXRhLmlkICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldCh3ZWFwb25EYXRhLmlkKVxyXG4gICAgfVxyXG4gICAgaWYgKCF3ZWFwb24pIHtcclxuICAgICAgbGV0IHdlYXBvbnMgPSB0aGlzLmdldEl0ZW1zRnJvbU5hbWUod2VhcG9uRGF0YS5uYW1lKVxyXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICAgIGxldCBpdGVtID0gbnVsbFxyXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXHJcbiAgICAgICAgICBpZiAocGFjaykge1xyXG4gICAgICAgICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuXHJcbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHdlYXBvbkRhdGEuaWQpIHtcclxuICAgICAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGxldCBjcmVhdGUgPSBmYWxzZVxyXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xyXG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZFdlYXBvbicpfWAsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWRkV2VhcG9udEhpbnQnLCB7XHJcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxyXG4gICAgICAgICAgICB9KX08L3A+YCxcclxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY3JlYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgY29uc3QgYWN0b3IgPVxyXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5wYXJlbnQ/LmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IHRoaXMucGFyZW50LmFjdG9yIDogdGhpc1xyXG5cclxuICAgICAgICAgIGlmIChjcmVhdGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgYXdhaXQgYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXHJcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXHJcbiAgICAgICAgICB3ZWFwb25zID0gYWN0b3IuZ2V0SXRlbXNGcm9tTmFtZShpdGVtLm5hbWUpXHJcbiAgICAgICAgICBpZiAoIXdlYXBvbnMubGVuZ3RoKSByZXR1cm5cclxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNOb1dlYXBvbk5hbWVkJywge1xyXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHdlYXBvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcclxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JBY3Rvckhhc1Rvb01hbnlXZWFwb25zTmFtZWQnLCB7XHJcbiAgICAgICAgICAgIGFjdG9yTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICB3ZWFwb25OYW1lOiB3ZWFwb25EYXRhLm5hbWVcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIHdlYXBvbiA9IHdlYXBvbnNbMF1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XHJcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2FyblRvb01hbnlUYXJnZXQnKSlcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcclxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXHJcbiAgICB9XHJcbiAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcclxuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcclxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyByb2xsSW5pdGlhdGl2ZSAoaGFzR3VuID0gZmFsc2UpIHtcclxuICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSkge1xyXG4gICAgICBjYXNlICdvcHRpb25hbCc6IHtcclxuICAgICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjayh0aGlzLmFjdG9yS2V5KVxyXG4gICAgICAgIHJvbGwuZGVueVB1c2ggPSB0cnVlXHJcbiAgICAgICAgcm9sbC5kZW55THVjayA9IHRydWVcclxuICAgICAgICByb2xsLmRlbnlCbGluZFRhbXBlcmluZyA9IHRydWVcclxuICAgICAgICByb2xsLmhpZGVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycpID09PSBmYWxzZVxyXG4gICAgICAgIHJvbGwuZmxhdm9yID0gJ0luaXRpYXRpdmUgcm9sbCdcclxuICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYygnZGV4JywgaGFzR3VuID8gMSA6IDApXHJcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICByb2xsLnN1Y2Nlc3NMZXZlbCArIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgLyAxMDBcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc0d1blxyXG4gICAgICAgICAgPyB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlICsgNTBcclxuICAgICAgICAgIDogdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xyXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xyXG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XHJcbiAgICAgIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IHRydWVcclxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxyXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyB1bnNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogZmFsc2UgfSlcclxuICB9XHJcblxyXG4gIGdldFdlYXBvblNraWxscyAoaXRlbUlkKSB7XHJcbiAgICBsZXQgd2VhcG9uID0gZnJvbVV1aWRTeW5jKGl0ZW1JZClcclxuICAgIGlmICghd2VhcG9uKSB7XHJcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYXBvbi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHdlYXBvbiA9IGdhbWUucGFja3MuZ2V0KHdlYXBvbi5wYWNrKS5nZXQod2VhcG9uLl9pZClcclxuICAgIH1cclxuICAgIGlmICh3ZWFwb24udHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXHJcbiAgICBjb25zdCBza2lsbHMgPSBbXVxyXG4gICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkge1xyXG4gICAgICBza2lsbHMucHVzaCh0aGlzLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh3ZWFwb24udXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XHJcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2tpbGxzXHJcbiAgfVxyXG5cclxuICAvKiogVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlIG9yIHNraWxsIHRoYXQgbWF0Y2hlcyB0aGUgbmFtZSAqL1xyXG4gIGZpbmQgKG5hbWUpIHtcclxuICAgIGlmICghbmFtZSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgLy8gVHJ5IElEXHJcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQobmFtZSlcclxuICAgIGlmIChpdGVtKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogJ2l0ZW0nLFxyXG4gICAgICAgIHZhbHVlOiBpdGVtXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZWdFeHAgPSAvXFwoKFteKV0rKVxcKS9cclxuICAgIGNvbnN0IG1hdGNoZXMgPSByZWdFeHAuZXhlYyhuYW1lKVxyXG4gICAgbGV0IHNob3J0TmFtZSA9IG51bGxcclxuICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoKSBzaG9ydE5hbWUgPSBtYXRjaGVzWzFdXHJcbiAgICAvLyBUcnkgdG8gZmluZCBhIHNraWxsIHdpdGggZXhhY3QgbmFtZS5cclxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgICEhcy5uYW1lICYmXHJcbiAgICAgICAgKHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XHJcbiAgICAgICAgICBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSB8fFxyXG4gICAgICAgICAgcy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cclxuICAgICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcclxuICAgICAgICAgIHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XHJcbiAgICAgICAgICAgIHNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG4gICAgaWYgKHNraWxsLmxlbmd0aCkgcmV0dXJuIHsgdHlwZTogJ2l0ZW0nLCB2YWx1ZTogc2tpbGxbMF0gfVxyXG5cclxuICAgIC8vIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMuXHJcbiAgICBjb25zdCBjaGFyS2V5ID0gWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnLCAnZWR1J11cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcktleS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyS2V5W2ldKVxyXG4gICAgICBpZiAoY2hhcikge1xyXG4gICAgICAgIGNoYXIubmFtZSA9IGNoYXIubGFiZWxcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcclxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgY2hhci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUcnkgdG8gZmluZCBhIGF0dHJpYnV0ZS5cclxuICAgIGNvbnN0IGF0dHJpYktleSA9IFsnbGNrJywgJ3NhbiddXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYktleS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBhdHRyID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmliS2V5W2ldKVxyXG4gICAgICBpZiAoYXR0cikge1xyXG4gICAgICAgIGF0dHIubmFtZSA9IGF0dHIubGFiZWxcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcclxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F0dHJpYnV0ZScsIHZhbHVlOiBhdHRyIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUcnkgd2l0aCBwYXJ0aWFsID8/XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgcGlsb3RTa2lsbHMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICBzLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmXHJcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XHJcbiAgICAgICAgICBnYW1lLmkxOG5cclxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LlBpbG90U3BlY2lhbGl6YXRpb25OYW1lJylcclxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgZHJpdmVTa2lsbHMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICBzLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmXHJcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XHJcbiAgICAgICAgICBnYW1lLmkxOG5cclxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LkRyaXZlU3BlY2lhbGl6YXRpb25OYW1lJylcclxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgdG9rZW5VdWlkICgpIHtcclxuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNoZWV0LnRva2VuLnV1aWRcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgdG9rZW5LZXkgKCkge1xyXG4gICAgLy8gQ2xhcmlmaWVyIGNhIGV0IHRva2VuaWRcclxuICAgIC8qKiAqIE1PRElGIDAuOC54ICovXHJcbiAgICAvLyBpZiB0aGlzLnNoZWV0LnRva2VuID0+IHdhcyBvcGVuZWQgZnJvbSB0b2tlblxyXG4gICAgLy8gaWYgdGhpcy50b2tlbiA9PiBzeW50aGV0aWMgYWN0b3IgPT0gdGhpcy5pc1Rva2VuXHJcbiAgICBpZiAodGhpcy5zaGVldC50b2tlbikge1xyXG4gICAgICByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyByZXR1cm4gbnVsbDtcclxuICAgICAgcmV0dXJuIHRoaXMuaWRcclxuICAgIH1cclxuICAgIC8qKioqKioqKioqKioqKioqKi9cclxuICAgIC8vIC8vQ2FzZSAxOiB0aGUgYWN0b3IgaXMgYSBzeW50aGV0aWMgYWN0b3IgYW5kIGhhcyBhIHRva2VuLCByZXR1cm4gdG9rZW4ga2V5LlxyXG4gICAgLy8gaWYoIHRoaXMuaXNUb2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uaWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXHJcblxyXG4gICAgLy8gLy9DYXNlIDI6IHRoZSBhY3RvciBpcyBub3QgYSB0b2tlbiAobGlua2VkIGFjdG9yKS4gSWYgdGhlIHNoZWV0IGhhdmUgYW4gYXNzb2NpYXRlZCB0b2tlbiByZXR1cm4gdGhlIHRva2VuIGtleS5cclxuICAgIC8vIGlmKCB0aGlzLnNoZWV0LnRva2VuKSByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5zY2VuZT8uaWQ/dGhpcy5zaGVldC50b2tlbi5zY2VuZS5pZDonVE9LRU4nfS4ke3RoaXMuc2hlZXQudG9rZW4uaWR9YDtcclxuXHJcbiAgICAvLyAvL0Nhc2UgMzogQWN0b3IgaGFzIG5vIHRva2VuIHJldHVybiBoaXMgSUQ7XHJcbiAgICAvLyByZXR1cm4gdGhpcy5pZDtcclxuICB9XHJcblxyXG4gIGdldCBhY3RvcktleSAoKSB7XHJcbiAgICBpZiAodGhpcy5wcm90b3R5cGVUb2tlbi5hY3RvckxpbmspIHJldHVybiB0aGlzLmlkIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgcmV0dXJuIHRoaXMudG9rZW5LZXlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xyXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXHJcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcclxuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXHJcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxyXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXHJcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxyXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcclxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcclxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVc2UgdGhlIGZvcm11bGEgaWYgYXZhaWxhYmxlIHRvIHJvbGwgc29tZSBjaGFyYWN0ZXJpdGljcy5cclxuICAgKi9cclxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xyXG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcclxuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XHJcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpXHJcbiAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcclxuICAgICAgICBpZiAoci50b3RhbCkge1xyXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgci50b3RhbFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcclxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSWYgdGhlcmUgaXMgYSBmb3JtdWxhLCB3aWxsIHNldCB0aGUgY2hhcmFjdGVyaXN0aWMgdG8gdGhlIGF2ZXJhZ2UgdmFsdWUgLGlmIGRpdmlzaWJsZSBieSA1LCBvciB0aGUgY2xvc2VzdCAxMC5cclxuICAgKi9cclxuICBhc3luYyBhdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xyXG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcclxuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxyXG4gICAgICAgIGNvbnN0IG1pbiA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpLmV2YWx1YXRlKHsgbWluaW1pemU6IHRydWUgfSkudG90YWxcclxuICAgICAgICBjb25zdCBhdmVyYWdlID0gTWF0aC5mbG9vcigobWF4ICsgbWluKSAvIDIpXHJcbiAgICAgICAgY29uc3QgY2hhclZhbHVlID1cclxuICAgICAgICAgIGF2ZXJhZ2UgJSA1ID09PSAwID8gYXZlcmFnZSA6IE1hdGgucm91bmQoYXZlcmFnZSAvIDEwKSAqIDEwXHJcbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xyXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxyXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXN0IGlmIGEgY2hhcmFjdGVyaXNpdGMgZm9ybXVsYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBvdGhlciBjaGFyYWN0ZXJpc3RpYyBhbmQgc2V0IGl0IGFjY29yZGluZ2x5LlxyXG4gICAqL1xyXG4gIGFzeW5jIHJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlICgpIHtcclxuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XHJcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmIHZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XHJcbiAgICAgICAgbGV0IGNoYXJWYWx1ZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjaGFyVmFsdWUgPSBuZXcgUm9sbChcclxuICAgICAgICAgICAgdmFsdWUuZm9ybXVsYSxcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXHJcbiAgICAgICAgICApLmV2YWx1YXRlKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNoYXJWYWx1ZSA9IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xyXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0Q2hhcmFjdGVyaXN0aWMgKG5hbWUsIHZhbHVlKSB7XHJcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHt9XHJcbiAgICBjb25zdCBjaGFyVmFsdWUgPSBpc05hTihwYXJzZUludCh2YWx1ZSkpID8gbnVsbCA6IHBhcnNlSW50KHZhbHVlKVxyXG4gICAgY2hhcmFjdGVyaXN0aWNbbmFtZV0gPSBjaGFyVmFsdWVcclxuICAgIGlmICghY2hhclZhbHVlKSB7XHJcbiAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdAJykpIHtcclxuICAgICAgICBjb25zdCBmb3JtdWxhID0gbmFtZS5yZXBsYWNlKCcudmFsdWUnLCAnLmZvcm11bGEnKVxyXG4gICAgICAgIGNoYXJhY3RlcmlzdGljW2Zvcm11bGFdID0gdmFsdWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljKVxyXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXHJcbiAgfVxyXG5cclxuICBhc3luYyBkZXZlbG9wZW1lbnRQaGFzZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgZmFpbHVyZSA9IFtdXHJcbiAgICBjb25zdCBzdWNjZXNzID0gW11cclxuICAgIGNvbnN0IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkID0gOTBcclxuICAgIGNvbnN0IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQgPSA5NVxyXG5cclxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxBbGw0RGV2JylcclxuICAgIGxldCBza2lsbHNSb2xsZWQgPSAwXHJcbiAgICBsZXQgbWVzc2FnZSA9ICc8cCBjbGFzcz1cImNoYXQtY2FyZFwiPidcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICBpZiAoaXRlbS5kZXZlbG9wZW1lbnRGbGFnKSB7XHJcbiAgICAgICAgICBza2lsbHNSb2xsZWQrK1xyXG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMDAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGl0ZW0udmFsdWVcclxuICAgICAgICAgIGxldCBhdWdtZW50ID0gbnVsbFxyXG4gICAgICAgICAgbGV0IHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IG51bGxcclxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiBza2lsbFZhbHVlIHx8IGRpZS50b3RhbCA+PSBhbHdheXNTdWNjZXNzVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwIH0pLmV2YWx1YXRlKHtcclxuICAgICAgICAgICAgICBhc3luYzogdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBzdWNjZXNzLnB1c2goaXRlbS5pZClcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFNBTiBhdWdtZW50IHdoZW4gdGhlIHNraWxsIGdvZXMgYmV5b25kIHRoZSBza2lsbCBtYXN0ZXJpbmcgdGhyZXNob2xkLlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSA8IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkICYmXHJcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWwgPj0gc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGRcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYXVnbWVudFNBTkRpZSA9IGF3YWl0IG5ldyBEaWUoe1xyXG4gICAgICAgICAgICAgICAgZmFjZXM6IDYsXHJcbiAgICAgICAgICAgICAgICBudW1iZXI6IDJcclxuICAgICAgICAgICAgICB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkID0gYXVnbWVudFNBTkRpZS50b3RhbFxyXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZE1lc3NhZ2UgPSBgR2FpbmVkIDJkNiAoJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfSA9ICR7c2FuR2FpbmVkfSkgU0FOYFxyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoc2FuR2FpbmVkTWVzc2FnZSlcclxuICAgICAgICAgICAgICBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAnQ29DNy5TYW5HYWluZWQnLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICByZXN1bHRzOiBgJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfWAsXHJcbiAgICAgICAgICAgICAgICAgIHNhbkdhaW5lZCxcclxuICAgICAgICAgICAgICAgICAgc2tpbGw6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgc2tpbGxWYWx1ZTogc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxyXG4gICAgICAgICAgICAgIC8vIFNldCBzYW4gY29udHJvbHMgdGhhdCBpdCBkb2Vzbid0IGF1Z21lbnQgYmV5b25kIHNhbk1heFxyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U2FuKHRoaXMuc2FuICsgc2FuR2FpbmVkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF1Z21lbnQgKz0gYXVnbWVudERpZS50b3RhbFxyXG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgICAgICAnQ29DNy5EZXZTdWNjZXNzJyxcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcclxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcclxuICAgICAgICAgICAgaWYgKHNraWxsTWFzdGVyaW5nTWVzc2FnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gc2tpbGxNYXN0ZXJpbmdNZXNzYWdlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgaXRlbS5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudClcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2RmFpbHVyZScsXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXHJcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcclxuICAgICAgICAgICAgZmFpbHVyZS5wdXNoKGl0ZW0uaWQpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhd2FpdCBpdGVtLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gW11cclxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgIGZvciAoY29uc3Qgc2FuaXR5TG9zc0V2ZW50IG9mIHRoaXMuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMpIHtcclxuICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xyXG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXHJcbiAgICAgIH0gZWxzZSBpZiAoc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcyA+IDEpIHtcclxuICAgICAgICBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzLS1cclxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxyXG4gICAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgaWYgKHNraWxsc1JvbGxlZCkge1xyXG4gICAgICAgIG1lc3NhZ2UgKz0gJzxicj4nXHJcbiAgICAgIH1cclxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZHVjZVNhbml0eUxpbWl0cycpfTwvc3Bhbj5gXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XHJcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXHJcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cclxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHNraWxsc1JvbGxlZCA/IHRpdGxlIDogJycsIG1lc3NhZ2UsIHtcclxuICAgICAgICBzcGVha2VyXHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgZmFpbHVyZSwgc3VjY2VzcyB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZXZlbG9wTHVjayAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgY3VycmVudEx1Y2sgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZVxyXG4gICAgaWYgKCFjdXJyZW50THVjaykgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJzogMCB9KVxyXG4gICAgY29uc3QgcHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrID0gZ2FtZS5zZXR0aW5ncy5nZXQoXHJcbiAgICAgICdDb0M3JyxcclxuICAgICAgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaydcclxuICAgIClcclxuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcclxuICAgIGNvbnN0IGhpZ2hlclRoYW5DdXJyZW50THVjayA9IHVwZ3JhZGVSb2xsID4gY3VycmVudEx1Y2tcclxuICAgIGxldCBhdWdtZW50Um9sbFxyXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaykge1xyXG4gICAgICBoaWdoZXJUaGFuQ3VycmVudEx1Y2tcclxuICAgICAgICA/IChhdWdtZW50Um9sbCA9ICcyRDEwKzEwJylcclxuICAgICAgICA6IChhdWdtZW50Um9sbCA9ICcxRDEwKzUnKVxyXG4gICAgfSBlbHNlIGlmIChoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcclxuICAgICAgYXVnbWVudFJvbGwgPSAnMUQxMCdcclxuICAgIH1cclxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxMdWNrNERldicpXHJcbiAgICBsZXQgbWVzc2FnZSA9ICc8cCBjbGFzcz1cImNoYXQtY2FyZFwiPidcclxuICAgIGlmIChwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgfHwgaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XHJcbiAgICAgIGNvbnN0IGF1Z21lbnRWYWx1ZSA9IChhd2FpdCBuZXcgUm9sbChhdWdtZW50Um9sbCkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKVxyXG4gICAgICAgIC50b3RhbFxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XHJcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6XHJcbiAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSArIGF1Z21lbnRWYWx1ZVxyXG4gICAgICB9KVxyXG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAnQ29DNy5MdWNrSW5jcmVhc2VkJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLFxyXG4gICAgICAgICAgc2NvcmU6IGN1cnJlbnRMdWNrLFxyXG4gICAgICAgICAgYXVnbWVudDogYXVnbWVudFZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICApfTwvc3Bhbj5gXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICdDb0M3Lkx1Y2tOb3RJbmNyZWFzZWQnLFxyXG4gICAgICAgIHsgZGllOiB1cGdyYWRlUm9sbCwgc2NvcmU6IGN1cnJlbnRMdWNrIH1cclxuICAgICAgKX08L3NwYW4+YFxyXG4gICAgfVxyXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xyXG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xyXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcyB9XHJcbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZXZlbG9wU2tpbGwgKHNraWxsSWQsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQoc2tpbGxJZClcclxuICAgIGlmICghc2tpbGwpIHJldHVyblxyXG4gICAgbGV0IHRpdGxlID0gJydcclxuICAgIGxldCBtZXNzYWdlID0gJydcclxuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gbmV3IFJvbGwoJzFEMTAwJylcclxuICAgIGF3YWl0IHVwZ3JhZGVSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodXBncmFkZVJvbGwpXHJcbiAgICBpZiAodXBncmFkZVJvbGwudG90YWwgPiBza2lsbC52YWx1ZSB8fCB1cGdyYWRlUm9sbC50b3RhbCA+PSA5NSkge1xyXG4gICAgICBjb25zdCBhdWdtZW50Um9sbCA9IG5ldyBSb2xsKCcxRDEwJylcclxuICAgICAgYXdhaXQgYXVnbWVudFJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGF1Z21lbnRSb2xsKVxyXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZTdWNjZXNzRGV0YWlscycsIHtcclxuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxyXG4gICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRSb2xsLnRvdGFsXHJcbiAgICAgIH0pXHJcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XHJcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcclxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxyXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxyXG4gICAgICB9KVxyXG4gICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudFJvbGwudG90YWwpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xyXG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXHJcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcclxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcclxuICAgICAgfSlcclxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2RmFpbHVyZURldGFpbHMnLCB7XHJcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMuX2lkIH1cclxuICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXHJcbiAgICBhd2FpdCBza2lsbC51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxyXG4gIH1cclxuXHJcbiAgaGFzQ29uZGl0aW9uU3RhdHVzIChjb25kaXRpb25OYW1lKSB7XHJcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8udmFsdWVcclxuICAgIGlmICh0eXBlb2YgY29uZGl0aW9uVmFsdWUgIT09ICdib29sZWFuJykge1xyXG4gICAgICByZXR1cm4gZmFsc2UgLy8gTmVjZXNzYXJ5LCBpbmNvcnJlY3QgdGVtcGxhdGUgaW5pdGlhbGl6YXRpb25cclxuICAgIH1cclxuICAgIHJldHVybiBjb25kaXRpb25WYWx1ZVxyXG4gIH1cclxuXHJcbiAgaGFzQ29uZGl0aW9uVmFsdWUgKGNvbmRpdGlvbk5hbWUsIGZpZWxkKSB7XHJcbiAgICBpZiAoIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpKSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIGlmIChjb25kaXRpb25OYW1lID09PSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSAmJiBmaWVsZCA9PT0gJ2R1cmF0aW9uVGV4dCcpIHtcclxuICAgICAgY29uc3QgcmVhbFRpbWUgPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdyZWFsVGltZScpXHJcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShjb25kaXRpb25OYW1lLCAnZHVyYXRpb24nKVxyXG4gICAgICBpZiAodHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGR1cmF0aW9uICsgJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJvdW5kcycpXHJcbiAgICAgICAgfSBlbHNlIGlmIChyZWFsVGltZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAnJ1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8uW2ZpZWxkXVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdG9nZ2xlQ29uZGl0aW9uIChjb25kaXRpb25OYW1lKSB7XHJcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpXHJcbiAgICBpZiAoIWNvbmRpdGlvblZhbHVlKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbk5hbWUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbk5hbWUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRDb25kaXRpb24gKFxyXG4gICAgY29uZGl0aW9uTmFtZSxcclxuICAgIHtcclxuICAgICAgZm9yY2VWYWx1ZSA9IGZhbHNlLFxyXG4gICAgICBqdXN0VGhpcyA9IGZhbHNlLFxyXG4gICAgICByZWFsVGltZSA9IG51bGwsXHJcbiAgICAgIGR1cmF0aW9uID0gbnVsbFxyXG4gICAgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBpZiAoIWZvcmNlVmFsdWUgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xyXG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXHJcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gZWZmZWN0LmZsYWdzLmNvcmU/LnN0YXR1c0lkID09PSBjb25kaXRpb25OYW1lKVxyXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcclxuICAgICAgY29uc3QgY3VzdG9tID0ge31cclxuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XHJcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxyXG4gICAgICAgICAgY3VzdG9tLmZsYWdzID0ge1xyXG4gICAgICAgICAgICBjb3JlOiB7XHJcbiAgICAgICAgICAgICAgb3ZlcmxheTogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XHJcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XHJcbiAgICAgICAgICAgIENvQzc6IHtcclxuICAgICAgICAgICAgICByZWFsVGltZTogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbiA9IHtcclxuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlIHx8IHJlYWxUaW1lID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MuQ29DNy5yZWFsVGltZSA9IHJlYWxUaW1lXHJcbiAgICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcclxuICAgICAgICAgICAgICBDb0M3OiB7XHJcbiAgICAgICAgICAgICAgICByZWFsVGltZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgIGlmIChyZWFsVGltZSkge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tLmR1cmF0aW9uLnJvdW5kcyA9IGR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbi5zZWNvbmRzID0gZHVyYXRpb24gKiAzNjAwXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbHRlcihcclxuICAgICAgICAgIGVmZmVjdCA9PiBlZmZlY3QuaWQgPT09IGNvbmRpdGlvbk5hbWVcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKGVmZmVjdC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgIGNvbnN0IGVmZmVjdERhdGEgPSBtZXJnZU9iamVjdChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoZWZmZWN0WzBdLmxhYmVsKSxcclxuICAgICAgICAgICAgICBpY29uOiBlZmZlY3RbMF0uaWNvbixcclxuICAgICAgICAgICAgICBmbGFnczoge1xyXG4gICAgICAgICAgICAgICAgY29yZToge1xyXG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZDogZWZmZWN0WzBdLmlkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY3VzdG9tXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2VmZmVjdERhdGFdKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBUaGlzIGRvZXNuJ3QgZXhpc3QgaW4gRm91bmRyeVZUVCBBY3RpdmVFZmZlY3RzP1xyXG4gICAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY3VzdG9tLl9pZCA9IGVmZmVjdHNbMF1cclxuICAgICAgICBhd2FpdCBzdXBlci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2N1c3RvbV0pXHJcbiAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZvcmNlVmFsdWUgfHwgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcclxuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XHJcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcclxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XHJcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcclxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcclxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IHRydWVcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHt9XHJcbiAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS52YWx1ZWBdID0gdHJ1ZVxyXG4gICAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnJlYWxUaW1lYF0gPSByZWFsVGltZVxyXG4gICAgICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXSA9IGR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxyXG4gICAgICAgICAgICAgICAgZmllbGRzLFxyXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0ucmVhbFRpbWVgXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1yZWFsVGltZWBdID0gbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxyXG4gICAgICAgICAgICAgICAgZmllbGRzLFxyXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1kdXJhdGlvbmBdID0gbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGZpZWxkcylcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFqdXN0VGhpcykge1xyXG4gICAgICAgIC8vIERvZXMgc2V0dGluZyB0aGUgY29uZGl0aW9uIGFsc28gdHJpZ2dlciBvdGhlciBhY3Rpb25zP1xyXG4gICAgICAgIC8vIC0gSWYgQWN0aXZlRWZmZWN0cyBhcmUgYWRkZWQgaGFzQ29uZGl0aW9uU3RhdHVzIGZvciByZWNlbnRseSBhZGRlZCBjb25kaXRpb25zIG1heSByZXR1cm4gaW5jb3JyZWN0bHlcclxuICAgICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcclxuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnByb25lKVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKSAmJlxyXG4gICAgICAgICAgICAgICF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBjb25DaGVjay50b01lc3NhZ2UoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1bnNldENvbmRpdGlvbiAoY29uZGl0aW9uTmFtZSwgeyBmb3JjZVZhbHVlID0gZmFsc2UgfSA9IHt9KSB7XHJcbiAgICBpZiAoIWZvcmNlVmFsdWUgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xyXG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXHJcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gZWZmZWN0LmZsYWdzLmNvcmU/LnN0YXR1c0lkID09PSBjb25kaXRpb25OYW1lKVxyXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcclxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvcmNlVmFsdWUgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmb3JjZVZhbHVlIHx8ICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XHJcbiAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XHJcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcclxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XHJcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcclxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxyXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcclxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IGZhbHNlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVE9ETyA6IGNoZWNrIGlmIGV2ZXIgdXNlZFxyXG4gIGFzeW5jIHJlc2V0Q291bnRlciAoY291bnRlcikge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbY291bnRlcl06IDAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlc2V0RGFpbHlTYW5pdHkgKCkge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnOiBNYXRoLmZsb29yKFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNVxyXG4gICAgICApLFxyXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyc6IDBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgZmlnaHRpbmdTa2lsbHMgKCkge1xyXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cclxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xyXG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xyXG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxyXG5cclxuICAgIHJldHVybiBza2lsbExpc3RcclxuICB9XHJcblxyXG4gIGdldCBjbG9zZUNvbWJhdFdlYXBvbnMgKCkge1xyXG4gICAgY29uc3Qgd2VhcG9uTGlzdCA9IFtdXHJcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICd3ZWFwb24nICYmICF2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XHJcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldCh2YWx1ZS5zeXN0ZW0uc2tpbGwubWFpbi5pZClcclxuICAgICAgICB2YWx1ZS5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsID8gc2tpbGwudmFsdWUgOiAwXHJcbiAgICAgICAgd2VhcG9uTGlzdC5wdXNoKHZhbHVlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd2VhcG9uTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcclxuXHJcbiAgICByZXR1cm4gd2VhcG9uTGlzdFxyXG4gIH1cclxuXHJcbiAgZ2V0IGZpcmVhcm1Ta2lsbHMgKCkge1xyXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cclxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xyXG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XHJcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXHJcblxyXG4gICAgcmV0dXJuIHNraWxsTGlzdFxyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXIgKCkge1xyXG4gICAgLy8gaXMgdGhhdCBhY3RvciBpbXBlcnNvbmFudGVkIGJ5IGEgdXNlciA/XHJcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maW5kKHVzZXIgPT4ge1xyXG4gICAgICBpZiAodXNlci5jaGFyYWN0ZXIpIHtcclxuICAgICAgICBpZiAodXNlci5jaGFyYWN0ZXIuaWQgPT09IHRoaXMuaWQpIHJldHVybiB0cnVlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRvZGdlU2tpbGwgKCkge1xyXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXHJcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmRvZGdlU2tpbGxOYW1lKVxyXG4gICAgKVxyXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgY3JlZGl0UmF0aW5nU2tpbGwgKCkge1xyXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXHJcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWRpdFJhdGluZ1NraWxsTmFtZSlcclxuICAgIClcclxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGN0aHVsaHVNeXRob3NTa2lsbCAoKSB7XHJcbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcclxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuQ3RodWxodU15dGhvc05hbWUpXHJcbiAgICApXHJcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBjdGh1bGh1TXl0aG9zICgpIHtcclxuICAgIGNvbnN0IENNID0gdGhpcy5jdGh1bGh1TXl0aG9zU2tpbGxcclxuICAgIGlmIChDTSkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IENNLnZhbHVlXHJcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXHJcbiAgICAgIHJldHVybiBwYXJzZUludChDTS5zeXN0ZW0udmFsdWUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gMFxyXG4gIH1cclxuXHJcbiAgZ2V0IG15dGhvc0hhcmRlbmVkICgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnKSB8fCBmYWxzZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0TXl0aG9zSGFyZGVuZWQgKCkge1xyXG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJywgdHJ1ZSlcclxuICB9XHJcblxyXG4gIGdldCBteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkICgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcpIHx8IGZhbHNlXHJcbiAgfVxyXG5cclxuICBhc3luYyBleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSAoKSB7XHJcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcsIHRydWUpXHJcbiAgfVxyXG5cclxuICBnZXQgY3JlZGl0UmF0aW5nICgpIHtcclxuICAgIGNvbnN0IENSID0gdGhpcy5jcmVkaXRSYXRpbmdTa2lsbFxyXG4gICAgaWYgKENSKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gQ1IudmFsdWVcclxuICAgICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWVcclxuICAgICAgcmV0dXJuIHBhcnNlSW50KENSLnN5c3RlbS52YWx1ZSlcclxuICAgIH1cclxuICAgIHJldHVybiAwXHJcbiAgfVxyXG5cclxuICBnZXQgc3BlbmRpbmdMZXZlbCAoKSB7XHJcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nXHJcbiAgICBpZiAoQ1IgPj0gOTkpIHJldHVybiA1MDAwXHJcbiAgICBpZiAoQ1IgPj0gOTApIHJldHVybiAyNTBcclxuICAgIGlmIChDUiA+PSA1MCkgcmV0dXJuIDUwXHJcbiAgICBpZiAoQ1IgPj0gMTApIHJldHVybiAxMFxyXG4gICAgaWYgKENSID49IDEpIHJldHVybiAyXHJcbiAgICByZXR1cm4gMC41XHJcbiAgfVxyXG5cclxuICBnZXQgY2FzaCAoKSB7XHJcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nXHJcbiAgICBpZiAoQ1IgPj0gOTkpIHJldHVybiA1MDAwMFxyXG4gICAgaWYgKENSID49IDkwKSByZXR1cm4gQ1IgKiAyMFxyXG4gICAgaWYgKENSID49IDUwKSByZXR1cm4gQ1IgKiA1XHJcbiAgICBpZiAoQ1IgPj0gMTApIHJldHVybiBDUiAqIDJcclxuICAgIGlmIChDUiA+PSAxKSByZXR1cm4gQ1JcclxuICAgIHJldHVybiAwLjVcclxuICB9XHJcblxyXG4gIGdldCBhc3NldHMgKCkge1xyXG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1xyXG4gICAgaWYgKENSID49IDk5KSByZXR1cm4gNTAwMDAwMFxyXG4gICAgaWYgKENSID49IDkwKSByZXR1cm4gQ1IgKiAyMDAwXHJcbiAgICBpZiAoQ1IgPj0gNTApIHJldHVybiBDUiAqIDUwMFxyXG4gICAgaWYgKENSID49IDEwKSByZXR1cm4gQ1IgKiA1MFxyXG4gICAgaWYgKENSID49IDEpIHJldHVybiBDUiAqIDEwXHJcbiAgICByZXR1cm4gMFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNraWxscyAoKSB7XHJcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxyXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XHJcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnKSBza2lsbExpc3QucHVzaCh2YWx1ZSlcclxuICAgIH1cclxuXHJcbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXHJcblxyXG4gICAgcmV0dXJuIHNraWxsTGlzdFxyXG4gIH1cclxuXHJcbiAgZ2V0IG93bmVycyAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maWx0ZXIoXHJcbiAgICAgIHUgPT4gdGhpcy50ZXN0VXNlclBlcm1pc3Npb24odSwgJ09XTkVSJykgJiYgIXUuaXNHTVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHBsYXllciAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5vd25lcnMuZmlsdGVyKHUgPT4gdS5jaGFyYWN0ZXI/LmlkID09PSB0aGlzLmlkKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNoYXJhY3RlclVzZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgZ2FtZS51c2Vycy5jb250ZW50cy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpWzBdIHx8IG51bGxcclxuICAgIClcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXHJcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpIHtcclxuICAgICAgdmFsdWUgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXhcclxuICAgIH1cclxuICAgIGNvbnN0IGhlYWx0aEJlZm9yZSA9IHRoaXMuaHBcclxuICAgIGxldCBkYW1hZ2VUYWtlblxyXG4gICAgLy8gaXMgaGVhbGluZ1xyXG4gICAgaWYgKGlzTmFOKGhlYWx0aEJlZm9yZSkgfHwgdmFsdWUgPj0gaGVhbHRoQmVmb3JlKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuX3NldEhwKHZhbHVlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGFtYWdlVGFrZW4gPSBoZWFsdGhCZWZvcmUgLSB2YWx1ZVxyXG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoZGFtYWdlVGFrZW4sIHsgaWdub3JlQXJtb3I6IHRydWUgfSlcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVhbERhbWFnZSAoYW1vdW50LCBvcHRpb25zID0ge30pIHtcclxuICAgIC8vIFRPRE86IENoYW5nZSBvcHRpb25zIHRvIGxpc3Qgb2YgdmFsdWVzXHJcbiAgICBjb25zdCBhcm1vckRhdGEgPSBvcHRpb25zLmFybW9yXHJcbiAgICAgID8gb3B0aW9ucy5hcm1vclxyXG4gICAgICA6IHRoaXMuc3lzdGVtLmF0dHJpYnMuYXJtb3IgLy8gaWYgdGhlcmUgYXJtb3IgdmFsdWUgcGFzc2VkIHdlIHVzZSBpdFxyXG4gICAgY29uc3QgZ3Jvc3NEYW1hZ2UgPSBwYXJzZUludChhbW91bnQpXHJcbiAgICBsZXQgYXJtb3JWYWx1ZSA9IDBcclxuICAgIGlmICghb3B0aW9ucy5pZ25vcmVBcm1vcikge1xyXG4gICAgICBpZiAoYXJtb3JEYXRhID09PSBudWxsKSB7XHJcbiAgICAgICAgLy8gbm9wXHJcbiAgICAgIH0gZWxzZSBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JEYXRhKSkge1xyXG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXHJcbiAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vckRhdGEpKSkge1xyXG4gICAgICAgIGFybW9yVmFsdWUgPSBOdW1iZXIoYXJtb3JEYXRhKVxyXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhPy52YWx1ZSkpKSB7XHJcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEudmFsdWUpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclVuYWJsZVRvUGFyc2VBcm1vckZvcm11bGEnLCB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBhcm1vckRhdGFcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXREYW1hZ2UgPSBncm9zc0RhbWFnZSAtIGFybW9yVmFsdWVcclxuICAgIGlmIChuZXREYW1hZ2UgPD0gMCkgcmV0dXJuIDBcclxuICAgIGF3YWl0IHRoaXMuX3NldEhwKHRoaXMuaHAgLSBuZXREYW1hZ2UpXHJcbiAgICBpZiAobmV0RGFtYWdlID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcclxuICAgICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG5ldERhbWFnZSA+PSBNYXRoLmNlaWwodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggLyAyKSkge1xyXG4gICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxyXG4gICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGhhc01ham9yV291bmQgPSBmYWxzZVxyXG4gICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxyXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRydWVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXHJcbiAgICAgICAgICBpZiAoaGFzTWFqb3JXb3VuZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXREYW1hZ2VcclxuICB9XHJcblxyXG4gIGdldCBtYWpvcldvdW5kICgpIHtcclxuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcclxuICB9XHJcblxyXG4gIGdldCBkeWluZyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuZHlpbmcpXHJcbiAgfVxyXG5cclxuICBnZXQgdW5jb25zY2lvdXMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRlYWQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXHJcbiAgfVxyXG5cclxuICBnZXQgcHJvbmUgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnByb25lKVxyXG4gIH1cclxuXHJcbiAgLy8gc3RhdGljIHVwZGF0ZUFjdG9yKCBhY3RvciwgZGF0YVVwZGF0ZSl7XHJcbiAgLy8gICBpZiggZ2FtZS51c2VyLmlzR00pe1xyXG4gIC8vICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGB1cGRhdGluZyBhY3RvciAke2FjdG9yLm5hbWV9YCk7XHJcbiAgLy8gICAgIGNvbnN0IHByb25lID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMucHJvbmVdO1xyXG4gIC8vICAgICBjb25zdCB1bmNvbnNjaW91cyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnVuY29uc2Npb3VzXTtcclxuICAvLyAgICAgY29uc3QgY3JpdGljYWxXb3VuZHMgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kc107XHJcbiAgLy8gICAgIGNvbnN0IGR5aW5nID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuZHlpbmddO1xyXG4gIC8vICAgICBpZiggcHJvbmUpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JQcm9uZScsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcclxuICAvLyAgICAgaWYoIHVuY29uc2Npb3VzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXMnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XHJcbiAgLy8gICAgIGlmKCBjcml0aWNhbFdvdW5kcykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3Rvck1ham9yV291bmQnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XHJcbiAgLy8gICAgIGlmKCBkeWluZykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckR5aW5nJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xyXG4gIC8vICAgfVxyXG4gIC8vICAgcmV0dXJuO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gXCJDb0M3LkluZm9BY3RvclByb25lXCI6IFwie2FjdG9yfSBmYWxsIHByb25lXCIsXHJcbiAgLy8gXCJDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzXCI6IFwie2FjdG9yfSBmYWxsIHVuY29uc2Npb3VzXCIsXHJcbiAgLy8gXCJDb0M3LkluZm9BY3Rvck1ham9yV291bmRcIjogXCJ7YWN0b3J9IGdldCBhIG1ham9yIHdvdW5kXCIsXHJcbiAgLy8gXCJDb0M3LkluZm9BY3RvckR5aW5nXCI6IFwie2Fjb3J9IGlzIGR5aW5nXCIsXHJcbiAgLy8gXCJDb0M3LkluZm9BY3RvckluanVyaWVkXCI6IFwie2FjdG9yfSBpcyBpbmp1cmllZFwiLFxyXG5cclxuICAvLyBzdGF0aWMgdXBkYXRlVG9rZW4oIHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSl7XHJcbiAgLy8gICBjb25zdCBpbmp1cmllZCA9IGRhdGFVcGRhdGU/LmFjdG9yRGF0YT8uZmxhZ3M/LkNvQzc/LmluanVyaWVkO1xyXG4gIC8vICAgaWYoIGluanVyaWVkKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9ySW5qdXJpZWQnLCB7YWN0b3I6IHRva2VuLm5hbWV9KSk7XHJcbiAgLy8gICByZXR1cm47XHJcbiAgLy8gfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xyXG5leHBvcnQgY2xhc3MgU2tpbGxWYWx1ZURpYWxvZyB7XHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobmFtZSA9IG51bGwsIGJhc2VWYWx1ZSA9IG51bGwpIHtcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcclxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC12YWx1ZS5odG1sJyxcclxuICAgICAgeyBiYXNlOiBiYXNlVmFsdWUsIG5hbWUgfVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXHJcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xyXG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsVmFsdWUnLCB7IG5hbWUgfSksXHJcbiAgICAgICAgY29udGVudDogaHRtbCxcclxuICAgICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgICB2YWxpZGF0ZToge1xyXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcclxuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcclxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NraWxsLXNlbGVjdC1mb3JtJylcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0ZScsXHJcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcclxuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGR1cGxpY2F0ZSwgZm91bmRyeSwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cclxuXHJcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcclxuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXHJcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdMaW5rIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLl9saW5rRGF0YSA9IHtcclxuICAgICAgdHlwZTogQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLLFxyXG4gICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTCxcclxuICAgICAgZWZmZWN0OiB7XHJcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcclxuICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcclxuICAgICAgICBjaGFuZ2VzOiBbXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGxpbmtEYXRhKSB7XHJcbiAgICBjb25zdCBsYWJlbCA9IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuYXR0cmlidXRlc1xyXG4gICAgICAuY29uY2F0KENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpKVxyXG4gICAgICAuZmlsdGVyKGUgPT4gZS5rZXkgPT09IGxpbmtEYXRhLm5hbWUpXHJcbiAgICAgIC5tYXAoZSA9PiBlLmxhYmVsKVxyXG4gICAgaWYgKGxhYmVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGlua0RhdGEubGFiZWwgPSBsYWJlbFswXVxyXG4gICAgfVxyXG4gICAgY29uc3QgbGluayA9IG5ldyBDb0M3TGluaygpXHJcbiAgICBhd2FpdCBsaW5rLnNldERhdGEobGlua0RhdGEpXHJcbiAgICByZXR1cm4gbGlua1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBUWVBFX0tFWVdPUkQgKCkge1xyXG4gICAgcmV0dXJuIFsnY2hlY2snLCAnc2FubG9zcycsICdpdGVtJ11cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgQ0hBUkFDX0tFWVdPUkQgKCkge1xyXG4gICAgcmV0dXJuIFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ11cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgQVRUUklCX0tFWVdPUkQgKCkge1xyXG4gICAgcmV0dXJuIFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBTS0lMTF9LRVlXT1JEICgpIHtcclxuICAgIHJldHVybiBbJ3NraWxsJ11cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgRUZGRUNUX0tFWVdPUkQgKCkge1xyXG4gICAgcmV0dXJuIFsnZWZmZWN0JywgJ2VmZmVjdHMnXVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBMSU5LX1RZUEUgKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgQ0hFQ0s6IDEsXHJcbiAgICAgIFNBTkxPU1M6IDIsXHJcbiAgICAgIElURU06IDMsXHJcbiAgICAgIEVGRkVDVDogNFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBDSEVDS19UWVBFICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIENIQVJBQ1RFUklTVElDOiAxLFxyXG4gICAgICBBVFRSSUJVVEU6IDIsXHJcbiAgICAgIFNLSUxMOiAzLFxyXG4gICAgICBFRkZFQ1Q6IDRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBhY3RvciAoKSB7XHJcbiAgICBpZiAodGhpcy5hY3RvcktleSkge1xyXG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGEgKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZSh0aGlzLl9saW5rRGF0YSlcclxuICAgIGRhdGEuaXNDaGVjayA9IHRoaXMuaXMuY2hlY2tcclxuICAgIGRhdGEuaXNTYW5sb3NzID0gdGhpcy5pcy5zYW5sb3NzXHJcbiAgICBkYXRhLmlzSXRlbSA9IHRoaXMuaXMuaXRlbVxyXG4gICAgZGF0YS5pc0VmZmVjdCA9IHRoaXMuaXMuZWZmZWN0XHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZmV0Y2hJdGVtICgpIHtcclxuICAgIHRoaXMuX2xpbmtEYXRhLnZhbGlkSXRlbSA9IGZhbHNlXHJcbiAgICBpZiAoIXRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtICYmICF0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XHJcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XHJcbiAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldCh0aGlzLl9saW5rRGF0YS5wYWNrKVxyXG4gICAgICBpZiAoIXBhY2spIHJldHVybiBmYWxzZVxyXG4gICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICB0aGlzLl9pdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudCh0aGlzLl9saW5rRGF0YS5pZClcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xyXG4gICAgICB0aGlzLl9pdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5fbGlua0RhdGEuaWQpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lID0gbnVsbFxyXG4gICAgdGhpcy5fbGlua0RhdGEuaXRlbU5hbWUgPSBudWxsXHJcblxyXG4gICAgaWYgKHRoaXMuX2l0ZW0pIHtcclxuICAgICAgaWYgKHRoaXMuX2l0ZW0uZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuaXRlbU5hbWUgPSB0aGlzLl9pdGVtLmRhdGEubmFtZVxyXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnZhbGlkSXRlbSA9IHRydWVcclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5faXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcclxuICAgICAgICB0aGlzLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTFxyXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHRoaXMuX2l0ZW0uZGF0YS5uYW1lXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEudmFsaWRJdGVtID0gdHJ1ZVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0RGF0YSAoeCkge1xyXG4gICAgLy8gdGhpcy5fbGlua0RhdGEgPSB4O1xyXG4gICAgLy8gdGhpcy5fbGlua0RhdGEuZm9yY2VNb2RpZmllcnMgPSBmYWxzZTtcclxuICAgIHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gZmFsc2VcclxuICAgIHRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxyXG4gICAgdGhpcy5oYXNQbGF5ZXJPd25lciA9IGZhbHNlXHJcblxyXG4gICAgaWYgKHguaGFzUGxheWVyT3duZXIpIHtcclxuICAgICAgdGhpcy5oYXNQbGF5ZXJPd25lciA9IHRydWVcclxuICAgICAgdGhpcy5hY3RvcktleSA9IHguYWN0b3JLZXlcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXRyaWV2ZSBpdGVtXHJcbiAgICBpZiAoeC5wYWNrICYmIHguaWQpIHtcclxuICAgICAgdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSB0cnVlXHJcbiAgICAgIHRoaXMuX2xpbmtEYXRhLnBhY2sgPSB4LnBhY2tcclxuICAgICAgdGhpcy5fbGlua0RhdGEuaWQgPSB4LmlkXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHguaWQgJiYgIXgucGFjaykge1xyXG4gICAgICB0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gdHJ1ZVxyXG4gICAgICB0aGlzLl9saW5rRGF0YS5pZCA9IHguaWRcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsaW5rU2V0ID0gYXdhaXQgdGhpcy5mZXRjaEl0ZW0oKVxyXG5cclxuICAgIGlmICghbGlua1NldCkge1xyXG4gICAgICAvLyBMaW5rIGRlZmluaXRpb25cclxuICAgICAgaWYgKHguY2hlY2spIHRoaXMudHlwZSA9IHguY2hlY2tcclxuICAgICAgZWxzZSB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0sgLy8gY2hlY2ssIHNhbmxvc3MsIGl0ZW1cclxuICAgICAgaWYgKHgudHlwZSkgdGhpcy5jaGVjayA9IHgudHlwZVxyXG4gICAgICAvLyBhdHRyaWIsIGNoYXJhYywgc2tpbGxcclxuICAgICAgZWxzZSBpZiAodGhpcy50eXBlKSB0aGlzLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQ1xyXG5cclxuICAgICAgLy8gTGluayBuYW1lXHJcbiAgICAgIGlmICh4Lm5hbWUpIHtcclxuICAgICAgICB0aGlzLl9saW5rRGF0YS5pdGVtTmFtZSA9IG51bGxcclxuICAgICAgICB0aGlzLl9saW5rRGF0YS5za2lsbE5hbWUgPSBudWxsXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPSBudWxsXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5ID0gbnVsbFxyXG4gICAgICAgIGlmICh0aGlzLmlzLmNoZWNrKSB7XHJcbiAgICAgICAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcclxuICAgICAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMOlxyXG4gICAgICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHgubmFtZVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQzpcclxuICAgICAgICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGFyYWN0ZXJpc3RpY0tleSA9IHgubmFtZVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XHJcbiAgICAgICAgICAgICAgdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5ID0geC5uYW1lXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pcy5pdGVtKSB0aGlzLl9saW5rRGF0YS5pdGVtTmFtZSA9IHgubmFtZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW9kaWZpZXJzXHJcbiAgICBpZiAoeC5kaWZmaWN1bHR5IHx8ICFpc05hTihOdW1iZXIoeC5kaWZmaWN1bHR5KSkpIHtcclxuICAgICAgdGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eSA9IE51bWJlcih4LmRpZmZpY3VsdHkpXHJcbiAgICB9XHJcbiAgICBpZiAoeC5tb2RpZmllciB8fCAhaXNOYU4oTnVtYmVyKHgubW9kaWZpZXIpKSkge1xyXG4gICAgICB0aGlzLl9saW5rRGF0YS5tb2RpZmllciA9IE51bWJlcih4Lm1vZGlmaWVyKVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2YgeC5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICB0eXBlb2YgeC5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICkge1xyXG4gICAgICB0aGlzLl9saW5rRGF0YS5mb3JjZU1vZGlmaWVycyA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh4LmZvcmNlTW9kaWZpZXJzKSB0aGlzLl9saW5rRGF0YS5mb3JjZU1vZGlmaWVycyA9IHRydWVcclxuXHJcbiAgICAvLyBGb3JjZSBkaXNwbGF5ZWQgbmFtZVxyXG4gICAgaWYgKHguZGlzcGxheU5hbWUgPT09ICd0cnVlJyB8fCB4LmRpc3BsYXlOYW1lID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmRpc3BsYXlOYW1lID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHgubGFiZWwpIHtcclxuICAgICAgdGhpcy5fbGlua0RhdGEuaGFzTGFiZWwgPSB0cnVlXHJcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmxhYmVsID0geC5sYWJlbFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEljb25cclxuICAgIGlmICh4Lmljb24pIHtcclxuICAgICAgdGhpcy5fbGlua0RhdGEuaGFzSWNvbiA9IHRydWVcclxuICAgICAgdGhpcy5fbGlua0RhdGEuaWNvbiA9IHguaWNvblxyXG4gICAgfVxyXG5cclxuICAgIC8vIEJsaW5kXHJcbiAgICBpZiAoeC5ibGluZCA9PT0gJ3RydWUnIHx8IHguYmxpbmQgPT09IHRydWUpIHRoaXMuX2xpbmtEYXRhLmJsaW5kID0gdHJ1ZVxyXG5cclxuICAgIC8vIFNhbiBEYXRhXHJcbiAgICB0aGlzLl9saW5rRGF0YS5zYW5NaW4gPSB4LnNhbk1pblxyXG4gICAgdGhpcy5fbGlua0RhdGEuc2FuTWF4ID0geC5zYW5NYXhcclxuICAgIHRoaXMuX2xpbmtEYXRhLnNhblJlYXNvbiA9IHguc2FuUmVhc29uXHJcblxyXG4gICAgLy8gRWZmZWN0XHJcbiAgICBpZiAodGhpcy5pcy5lZmZlY3QgfHwgeC5vYmplY3QpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHgub2JqZWN0ICYmXHJcbiAgICAgICAgKHR5cGVvZiB4Lm9iamVjdCA9PT0gJ3N0cmluZycgfHwgeC5vYmplY3QgaW5zdGFuY2VvZiBTdHJpbmcpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmVmZmVjdCA9IEpTT04ucGFyc2UoeC5vYmplY3QpXHJcbiAgICAgIH0gZWxzZSB0aGlzLl9saW5rRGF0YS5lZmZlY3QgPSBmb3VuZHJ5LnV0aWxzLmRlZXBDbG9uZSh4Lm9iamVjdClcclxuICAgICAgaWYgKCF0aGlzLl9saW5rRGF0YS5lZmZlY3QuY2hhbmdlcykgdGhpcy5fbGlua0RhdGEuZWZmZWN0LmNoYW5nZXMgPSBbXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLnR5cGVcclxuICB9XHJcblxyXG4gIGdldCBjaGVja1R5cGUgKCkge1xyXG4gICAgc3dpdGNoICh0aGlzLmNoZWNrKSB7XHJcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQzpcclxuICAgICAgICByZXR1cm4gJ2NoYXJhY3RlcmlzdGljJ1xyXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQVRUUklCVVRFOlxyXG4gICAgICAgIHJldHVybiAnYXR0cmlidXRlJ1xyXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XHJcbiAgICAgICAgcmV0dXJuICdza2lsbCdcclxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDpcclxuICAgICAgICByZXR1cm4gJ2VmZmVjdCdcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXQgdHlwZSAoeCkge1xyXG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSB0aGlzLl9saW5rRGF0YS50eXBlID0geFxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHN3aXRjaCAoeC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgY2FzZSAnY2hlY2snOlxyXG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdzYW5sb3NzJzpcclxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TU1xyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdpdGVtJzpcclxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuSVRFTVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdlZmZlY3QnOlxyXG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5FRkZFQ1RcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSB1bmRlZmluZWRcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBjaGVjayAoKSB7XHJcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLl9saW5rRGF0YS5jaGVjaykpXHJcbiAgICAgID8gTnVtYmVyKHRoaXMuX2xpbmtEYXRhLmNoZWNrKVxyXG4gICAgICA6IHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgc2V0IGNoZWNrICh4KSB7XHJcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHRoaXMuX2xpbmtEYXRhLmNoZWNrID0gTnVtYmVyKHgpXHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSB1bmRlZmluZWRcclxuICAgICAgaWYgKENvQzdMaW5rLkNIQVJBQ19LRVlXT1JELmluY2x1ZGVzKHgpKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDXHJcbiAgICAgIH1cclxuICAgICAgaWYgKENvQzdMaW5rLkFUVFJJQl9LRVlXT1JELmluY2x1ZGVzKHgpKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChDb0M3TGluay5TS0lMTF9LRVlXT1JELmluY2x1ZGVzKHgpKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMXHJcbiAgICAgIH1cclxuICAgICAgaWYgKENvQzdMaW5rLkVGRkVDVF9LRVlXT1JELmluY2x1ZGVzKHgpKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkVGRkVDVFxyXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1RcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IG5hbWUgKCkge1xyXG4gICAgaWYgKHRoaXMuaXMuY2hlY2spIHtcclxuICAgICAgc3dpdGNoICh0aGlzLmNoZWNrKSB7XHJcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5XHJcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcclxuICAgICAgICAgIHJldHVybiB0aGlzLl9saW5rRGF0YS5hdHRyaWJ1dGVLZXlcclxuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lXHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pcy5pdGVtKSByZXR1cm4gdGhpcy5fbGlua0RhdGEuaXRlbU5hbWVcclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHNldCBuYW1lICh4KSB7XHJcbiAgICBpZiAodGhpcy5pcy5jaGVjaykge1xyXG4gICAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcclxuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUM6XHJcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGFyYWN0ZXJpc3RpY0tleSA9IHhcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcclxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLmF0dHJpYnV0ZUtleSA9IHhcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMOlxyXG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lID0geFxyXG4gICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5pcy5pdGVtKSB0aGlzLl9saW5rRGF0YS5pdGVtTmFtZSA9IHhcclxuICB9XHJcblxyXG4gIGdldCBpcyAoKSB7XHJcbiAgICBjb25zdCBsaW5rID0gdGhpc1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZ2V0IGNoZWNrICgpIHtcclxuICAgICAgICByZXR1cm4gbGluay50eXBlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcclxuICAgICAgfSxcclxuICAgICAgc2V0IGNoZWNrICh4KSB7XHJcbiAgICAgICAgaWYgKHggPT09IHRydWUpIGxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xyXG4gICAgICB9LFxyXG4gICAgICBnZXQgc2FubG9zcyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsudHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcclxuICAgICAgfSxcclxuICAgICAgc2V0IHNhbmxvc3MgKHgpIHtcclxuICAgICAgICBpZiAoeCA9PT0gdHJ1ZSkgbGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcclxuICAgICAgfSxcclxuICAgICAgZ2V0IGl0ZW0gKCkge1xyXG4gICAgICAgIHJldHVybiBsaW5rLnR5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXHJcbiAgICAgIH0sXHJcbiAgICAgIHNldCBpdGVtICh4KSB7XHJcbiAgICAgICAgaWYgKHggPT09IHRydWUpIGxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXHJcbiAgICAgIH0sXHJcbiAgICAgIGdldCBlZmZlY3QgKCkge1xyXG4gICAgICAgIHJldHVybiBsaW5rLnR5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5FRkZFQ1RcclxuICAgICAgfSxcclxuICAgICAgc2V0IGVmZmVjdCAoeCkge1xyXG4gICAgICAgIGlmICh4ID09PSB0cnVlKSBsaW5rLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuRUZGRUNUXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZSAodXBkYXRlRGF0YSkge1xyXG4gICAgdGhpcy5fbGlua0RhdGEgPSBtZXJnZU9iamVjdCh0aGlzLl9saW5rRGF0YSwgdXBkYXRlRGF0YSlcclxuICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5IHx8IHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hJdGVtKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUZyb21MaW5rIChsaW5rRGF0YSkge1xyXG4gICAgYXdhaXQgdGhpcy5zZXREYXRhKGxpbmtEYXRhKVxyXG4gICAgaWYgKHRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgfHwgdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcclxuICAgICAgYXdhaXQgdGhpcy5mZXRjaEl0ZW0oKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGxpbmsgKCkge1xyXG4gICAgaWYgKCF0aGlzLnR5cGUpIHJldHVybiBudWxsXHJcbiAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICBjYXNlIENvQzdMaW5rLkxJTktfVFlQRS5DSEVDSzoge1xyXG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6Y2hhcmFjLG5hbWU6U1RSLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTVFIgY2hlY2soLTEpfVxyXG4gICAgICAgIGlmICghdGhpcy50eXBlIHx8ICF0aGlzLm5hbWUpIHJldHVybiBudWxsXHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHt0aGlzLl9saW5rRGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9dHlwZToke1xyXG4gICAgICAgICAgdGhpcy5jaGVja1R5cGVcclxuICAgICAgICB9LG5hbWU6JHt0aGlzLm5hbWV9YFxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7dGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eX1gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fbGlua0RhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHt0aGlzLl9saW5rRGF0YS5tb2RpZmllcn1gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke3RoaXMuX2xpbmtEYXRhLmljb259YFxyXG5cclxuICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBuZWVkZWRcclxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcclxuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7dGhpcy5fbGlua0RhdGEucGFja31gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XHJcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHt0aGlzLl9saW5rRGF0YS5pZH1gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5jaGVja1ske29wdGlvbnN9XWBcclxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaGFzTGFiZWwgJiYgdGhpcy5fbGlua0RhdGEubGFiZWwpIHtcclxuICAgICAgICAgIGxpbmsgKz0gYHske3RoaXMuX2xpbmtEYXRhLmxhYmVsfX1gXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5hbWUpIHtcclxuICAgICAgICAgIGxpbmsgKz0gYHske3RoaXMubmFtZX19YFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlua1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlIENvQzdMaW5rLkxJTktfVFlQRS5TQU5MT1NTOiB7XHJcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cclxuICAgICAgICBpZiAoIXRoaXMuX2xpbmtEYXRhLnNhbk1heCB8fCAhdGhpcy5fbGlua0RhdGEuc2FuTWluKSByZXR1cm4gbnVsbFxyXG5cclxuICAgICAgICAvLyBUT0RPIDogQmxpbmQgU0FOIHRlc3QgPz9cclxuICAgICAgICAvLyBsZXQgb3B0aW9ucyA9IGAke3RoaXMuX2xpbmtEYXRhLmJsaW5kPydibGluZCwnOicnfXNhbk1heDoke3RoaXMuX2xpbmtEYXRhLnNhbk1heH0sc2FuTWluOiR7dGhpcy5fbGlua0RhdGEuc2FuTWlufWA7XHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgc2FuTWF4OiR7dGhpcy5fbGlua0RhdGEuc2FuTWF4fSxzYW5NaW46JHt0aGlzLl9saW5rRGF0YS5zYW5NaW59YFxyXG5cclxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eSkge1xyXG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHt0aGlzLl9saW5rRGF0YS5kaWZmaWN1bHR5fWBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLnNhblJlYXNvbikge1xyXG4gICAgICAgICAgb3B0aW9ucyArPSBgLHNhblJlYXNvbjoke3RoaXMuX2xpbmtEYXRhLnNhblJlYXNvbn1gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5tb2RpZmllcikge1xyXG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7dGhpcy5fbGlua0RhdGEubW9kaWZpZXJ9YFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHt0aGlzLl9saW5rRGF0YS5pY29ufWBcclxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCkgbGluayArPSBgeyR7dGhpcy5fbGlua0RhdGEubGFiZWx9fWBcclxuICAgICAgICByZXR1cm4gbGlua1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEbyB3ZSBuZWVkIHRoYXQgPz8/XHJcbiAgICAgIGNhc2UgQ29DN0xpbmsuTElOS19UWVBFLklURU06IHtcclxuICAgICAgICAvLyBAY29jNy5pdGVtW3R5cGU6b3B0aW9uYWwsbmFtZTpTaG90Z3VuLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTaGl0Z3VuIGNoZWNrKC0xKX1cclxuICAgICAgICBpZiAoIXRoaXMudHlwZSB8fCAhdGhpcy5uYW1lKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIGxldCBvcHRpb25zID0gYG5hbWU6JHt0aGlzLm5hbWV9YFxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke3RoaXMuX2xpbmtEYXRhLmljb259YFxyXG5cclxuICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBuZWVkZWRcclxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcclxuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7dGhpcy5fbGlua0RhdGEucGFja31gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XHJcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHt0aGlzLl9saW5rRGF0YS5pZH1gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxyXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCkgbGluayArPSBgeyR7dGhpcy5fbGlua0RhdGEubGFiZWx9fWBcclxuICAgICAgICByZXR1cm4gbGlua1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlIENvQzdMaW5rLkxJTktfVFlQRS5FRkZFQ1Q6IHtcclxuICAgICAgICBjb25zdCBlZmZlY3REYXRhID0gZm91bmRyeS51dGlscy5kZWVwQ2xvbmUodGhpcy5fbGlua0RhdGEuZWZmZWN0KVxyXG4gICAgICAgIGlmICghdGhpcy5lZmZlY3RJc1RlbXApIGRlbGV0ZSBlZmZlY3REYXRhLmR1cmF0aW9uXHJcbiAgICAgICAgaWYgKGVmZmVjdERhdGEuY2hhbmdlcz8ubGVuZ3RoID09PSAwKSBkZWxldGUgZWZmZWN0RGF0YS5jaGFuZ2VzXHJcbiAgICAgICAgaWYgKCFlZmZlY3REYXRhLmRpc2FibGVkKSBkZWxldGUgZWZmZWN0RGF0YS5kaXNhYmxlZFxyXG4gICAgICAgIGlmICghZWZmZWN0RGF0YS50aW50KSBkZWxldGUgZWZmZWN0RGF0YS50aW50XHJcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuZWZmZWN0WyR7SlNPTi5zdHJpbmdpZnkoZWZmZWN0RGF0YSl9XWBcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCAmJlxyXG4gICAgICAgICAgdHlwZW9mIHRoaXMuX2xpbmtEYXRhLmxhYmVsICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbGluayArPSBgeyR7dGhpcy5fbGlua0RhdGEubGFiZWx9fWBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxpbmtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGVmZmVjdElzVGVtcCAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2xpbmtEYXRhLmVmZmVjdC5kdXJhdGlvbikgcmV0dXJuIGZhbHNlXHJcbiAgICBjb25zdCBkdXJhdGlvbiA9XHJcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmVmZmVjdC5kdXJhdGlvbi5zZWNvbmRzID8/XHJcbiAgICAgICh0aGlzLl9saW5rRGF0YS5lZmZlY3QuZHVyYXRpb24ucm91bmRzIHx8XHJcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuZWZmZWN0LmR1cmF0aW9uLnR1cm5zKSA/P1xyXG4gICAgICAwXHJcbiAgICByZXR1cm4gZHVyYXRpb24gPiAwXHJcbiAgfVxyXG5cclxuICBzZW5kVG9DaGF0ICgpIHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IHt9XHJcbiAgICBsZXQgbWVzc2FnZVxyXG4gICAgb3B0aW9uLnNwZWFrZXIgPSB7XHJcbiAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXMuZWZmZWN0KSB7XHJcbiAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHt0aGlzLmxpbmt9PC9kaXY+YFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZUNoZWNrUmVxdWVzdGVkV2FpdCcsIHtcclxuICAgICAgICBjaGVjazogdGhpcy5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxyXG4gIH1cclxuXHJcbiAgc2VuZFRvQ2xpcGJvYXJkICgpIHtcclxuICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKHRoaXMubGluaylcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09OU1QsZGlmZk9iamVjdCwgZXhwYW5kT2JqZWN0LCBGb3JtQXBwbGljYXRpb24sIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xyXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcclxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcclxuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2xpbmsuanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGlkOiAnbGluay1jcmVhdGlvbicsXHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhY3RpdmUtZWZmZWN0LXNoZWV0J10sXHJcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpLFxyXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJyB9XSxcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvbGluay1jcmVhdGlvbi5odG1sJyxcclxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXHJcbiAgICAgIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXHJcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxyXG4gICAgICB3aWR0aDogNTYwLFxyXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcclxuICAgICAgY2hvaWNlczoge30sXHJcbiAgICAgIGFsbG93Q3VzdG9tOiB0cnVlLFxyXG4gICAgICBtaW5pbXVtOiAwLFxyXG4gICAgICBtYXhpbXVtOiBudWxsLFxyXG4gICAgICB0YWJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcudGFicycsXHJcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuZWZmZWN0LW9wdGlvbnMnLFxyXG4gICAgICAgICAgaW5pdGlhbDogJ2RldGFpbHMnXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGZyb21MaW5rRGF0YSAobGlua0RhdGEsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgY29uc3QgbGluayA9IGF3YWl0IENvQzdMaW5rLmZyb21EYXRhKGxpbmtEYXRhKVxyXG4gICAgcmV0dXJuIG5ldyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nKGxpbmssIG9wdGlvbnMpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMgKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAge1xyXG4gICAgICAgIGtleTogJ2xjaycsXHJcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyksXHJcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBrZXk6ICdzYW4nLFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JyksXHJcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcblxyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcclxuXHJcbiAgICBkYXRhLmxpbmsgPSB0aGlzLmxpbmtcclxuICAgIGRhdGEuZGF0YSA9IHRoaXMubGluay5kYXRhXHJcbiAgICBkYXRhLmRhdGEuZWZmZWN0Lm1vZGVzID0gT2JqZWN0LmVudHJpZXMoQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFUykucmVkdWNlKFxyXG4gICAgICAob2JqLCBlKSA9PiB7XHJcbiAgICAgICAgb2JqW2VbMV1dID0gZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuTU9ERV8nICsgZVswXSlcclxuICAgICAgICByZXR1cm4gb2JqXHJcbiAgICAgIH0sXHJcbiAgICAgIHt9XHJcbiAgICApXHJcbiAgICBkYXRhLmZyb21HYW1lID1cclxuICAgICAgdGhpcy5saW5rLmlzLml0ZW0gfHxcclxuICAgICAgKHRoaXMubGluay5pcy5jaGVjayAmJiB0aGlzLmxpbmsuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEwpXHJcbiAgICBkYXRhLmFza0lkID1cclxuICAgICAgZGF0YS5mcm9tR2FtZSAmJlxyXG4gICAgICAodGhpcy5saW5rLmRhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLmxpbmsuZGF0YS5mcm9tQ29tcGVuZGl1bSlcclxuICAgIGRhdGEuYXNrUGFjayA9IGRhdGEuZnJvbUdhbWUgJiYgdGhpcy5saW5rLmRhdGEuZnJvbUNvbXBlbmRpdW1cclxuICAgIGRhdGEuaXNTZXRGcm9tR2FtZSA9IGRhdGEuYXNrSWQgfHwgZGF0YS5hc2tQYWNrXHJcblxyXG4gICAgLy8gUHJlcGFyZSBkaWZmaWN1bHR5IHNlbGVjdCBkYXRhXHJcbiAgICBkYXRhLmRpZmZpY3VsdHlMZXZlbCA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWxcclxuICAgIGRhdGEuc2VsZWN0ZWREaWZmaWN1bHR5ID0ge1xyXG4gICAgICB1bmtub3duOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IHRoaXMubGluay5kYXRhLmRpZmZpY3VsdHksXHJcbiAgICAgIHJlZ3VsYXI6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gdGhpcy5saW5rLmRhdGEuZGlmZmljdWx0eSxcclxuICAgICAgaGFyZDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxyXG4gICAgICBleHRyZW1lOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPT09IHRoaXMubGluay5kYXRhLmRpZmZpY3VsdHksXHJcbiAgICAgIGNyaXRpY2FsOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMubGluay5kYXRhLmRpZmZpY3VsdHkpIHtcclxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nKSB7XHJcbiAgICAgICAgZGF0YS5zZWxlY3RlZERpZmZpY3VsdHkudW5rbm93biA9IHRydWVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRhLnNlbGVjdGVkRGlmZmljdWx0eS5yZWd1bGFyID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJlcGFyZSBsaW5rIHR5cGVcclxuICAgIGRhdGEubGlua1R5cGUgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDSyxcclxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJyksXHJcbiAgICAgICAgc2VsZWN0ZWQ6IHRoaXMubGluay5pcy5jaGVja1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TUyxcclxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUNoZWNrJyksXHJcbiAgICAgICAgc2VsZWN0ZWQ6IHRoaXMubGluay5pcy5zYW5sb3NzXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNLFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSXRlbVdlYXBvbicpLFxyXG4gICAgICAgIHNlbGVjdGVkOiB0aGlzLmxpbmsuaXMuaXRlbVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuRUZGRUNULFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0VGRkVDVC5UYWJFZmZlY3RzJyksXHJcbiAgICAgICAgc2VsZWN0ZWQ6IHRoaXMubGluay5pcy5lZmZlY3RcclxuICAgICAgfVxyXG4gICAgXVxyXG5cclxuICAgIC8vIFByZXBhcmUgY2hlY2sgdHlwZSBkYXRhXHJcbiAgICBkYXRhLmNoZWNrVHlwZSA9IENvQzdMaW5rLkNIRUNLX1RZUEVcclxuICAgIGRhdGEuc2VsZWN0ZWRDaGVja1R5cGUgPSB7XHJcbiAgICAgIGNoYXJhY3RlcmlzdGljOiBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDID09PSB0aGlzLmxpbmsuY2hlY2ssXHJcbiAgICAgIGF0dHJpYnV0ZTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEUgPT09IHRoaXMubGluay5jaGVjayxcclxuICAgICAgc2tpbGw6IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEwgPT09IHRoaXMubGluay5jaGVja1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmxpbmsuY2hlY2spIGRhdGEuc2VsZWN0ZWRDaGVja1R5cGUuY2hhcmFjdGVyaXN0aWMgPSB0cnVlXHJcblxyXG4gICAgLy8gUHJlcGFyZSBjaGFyYWN0ZXJpc3RpY3NcclxuICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY0tleSA9PT0gZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaV0ua2V5IHx8XHJcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljS2V5ID09PSBkYXRhLmNoYXJhY3RlcmlzdGljc1tpXS5zaG9ydE5hbWUgfHxcclxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLmxhYmVsXHJcbiAgICAgICkge1xyXG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLnNlbGVjdGVkID0gdHJ1ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLnNlbGVjdGVkID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXBhcmUgY2hhcmFjdGVyaXN0aWNzXHJcbiAgICBkYXRhLmF0dHJpYnV0ZXMgPSBDb0M3TGlua0NyZWF0aW9uRGlhbG9nLmF0dHJpYnV0ZXMubWFwKGUgPT4ge1xyXG4gICAgICBlLnNlbGVjdGVkID0gZGF0YS5kYXRhLmF0dHJpYnV0ZUtleSA9PT0gZS5rZXlcclxuICAgICAgcmV0dXJuIGVcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9XHJcblxyXG4gIGdldCBsaW5rICgpIHtcclxuICAgIHJldHVybiB0aGlzLm9iamVjdFxyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXHJcblxyXG4gICAgLy8gUmVwbGFjZWQgaW4gb3B0aW9ucyBieSBkcmFnRHJvcDogW3tkcmFnU2VsZWN0b3I6IG51bGwsIGRyb3BTZWxlY3RvcjogJy5jb250YWluZXInfV1cclxuICAgIC8vIGNvbnN0IGRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcclxuICAgIC8vICAgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcicsXHJcbiAgICAvLyAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKSB9XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGNvbnN0IHRlc3QgPSBkcmFnRHJvcC5iaW5kKGh0bWxbMF0pO1xyXG5cclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgLy8gSGFuZGxpbmcgZWZmZWN0c1xyXG4gICAgaHRtbC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkVmZmVjdENvbnRyb2wuYmluZCh0aGlzKSlcclxuICB9XHJcblxyXG4gIF9vbkVmZmVjdENvbnRyb2wgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBzd2l0Y2ggKGJ1dHRvbi5kYXRhc2V0LmFjdGlvbikge1xyXG4gICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRFZmZlY3RDaGFuZ2UoKVxyXG4gICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgIGJ1dHRvbi5jbG9zZXN0KCcuZWZmZWN0LWNoYW5nZScpLnJlbW92ZSgpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VibWl0KHsgcHJldmVudENsb3NlOiB0cnVlIH0pLnRoZW4oKCkgPT4gdGhpcy5yZW5kZXIoKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIF9hZGRFZmZlY3RDaGFuZ2UgKCkge1xyXG4gICAgY29uc3QgaWR4ID0gdGhpcy5saW5rLmRhdGEuZWZmZWN0LmNoYW5nZXMubGVuZ3RoXHJcbiAgICByZXR1cm4gdGhpcy5zdWJtaXQoe1xyXG4gICAgICBwcmV2ZW50Q2xvc2U6IHRydWUsXHJcbiAgICAgIHVwZGF0ZURhdGE6IHtcclxuICAgICAgICBbYGVmZmVjdC5jaGFuZ2VzLiR7aWR4fWBdOiB7XHJcbiAgICAgICAgICBrZXk6ICcnLFxyXG4gICAgICAgICAgbW9kZTogQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFUy5BREQsXHJcbiAgICAgICAgICB2YWx1ZTogJydcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKiogQGluaGVyaXRkb2MgKi9cclxuICBfZ2V0U3VibWl0RGF0YSAodXBkYXRlRGF0YSA9IHt9KSB7XHJcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcclxuICAgIGNvbnN0IGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmZC5vYmplY3QpXHJcbiAgICBpZiAodXBkYXRlRGF0YSkgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKVxyXG4gICAgaWYgKGRhdGEuZWZmZWN0KSB7XHJcbiAgICAgIGRhdGEuZWZmZWN0LmNoYW5nZXMgPSBBcnJheS5mcm9tKE9iamVjdC52YWx1ZXMoZGF0YS5lZmZlY3QuY2hhbmdlcyB8fCB7fSkpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXHJcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxyXG4gICAgaWYgKGRhdGEuQ29DN1R5cGUgPT09ICdsaW5rJykge1xyXG4gICAgICBhd2FpdCB0aGlzLmxpbmsudXBkYXRlRnJvbUxpbmsoZGF0YSlcclxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChkYXRhLmFjdG9ySWQpIHtcclxuICAgICAgICBjb25zdCBhY3RvcktleSA9XHJcbiAgICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXHJcbiAgICAgICAgICAgID8gYCR7ZGF0YS5zY2VuZUlkfS4ke2RhdGEudG9rZW5JZH1gXHJcbiAgICAgICAgICAgIDogZGF0YS5hY3RvcklkXHJcbiAgICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSlcclxuICAgICAgICBpZiAoYWN0b3IuaGFzUGxheWVyT3duZXIpIHtcclxuICAgICAgICAgIHRoaXMubGluay5oYXNQbGF5ZXJPd25lciA9IHRydWVcclxuICAgICAgICAgIHRoaXMubGluay5hY3RvcktleSA9IGFjdG9yLmFjdG9yS2V5XHJcbiAgICAgICAgfSBlbHNlIHRoaXMubGluay5oYXNQbGF5ZXJPd25lciA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSB7XHJcbiAgICAgICAgaWYgKCFkYXRhLmRhdGEpIHtcclxuICAgICAgICAgIGlmIChkYXRhLmlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuaWQgPSBkYXRhLmlkXHJcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkYXRhLnBhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5wYWNrID0gZGF0YS5wYWNrXHJcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXHJcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmxpbmsuZmV0Y2hJdGVtKClcclxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN3aXRjaCAoZGF0YS5kYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc2tpbGwnOlxyXG4gICAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgdGhpcy5saW5rLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcclxuICAgICAgICAgICAgICB0aGlzLmxpbmsuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMXHJcbiAgICAgICAgICAgICAgdGhpcy5saW5rLm5hbWUgPSBkYXRhLmRhdGEubmFtZVxyXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSAnd2VhcG9uJzpcclxuICAgICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxyXG4gICAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSBmYWxzZVxyXG4gICAgICAgICAgICAgIHRoaXMubGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cclxuICAgICAgICAgICAgICB0aGlzLmxpbmsubmFtZSA9IGRhdGEuZGF0YS5uYW1lXHJcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcclxuXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXHJcbiAgICAvLyBpZiggYWN0aW9uID09PSAnY3JlYXRlLWVmZmVjdCcpe1xyXG4gICAgLy8gICBsZXQgaXRlbSA9IGdhbWUuaXRlbXMuZmluZChpID0+IGkubmFtZSA9PT0gJ19fQ29DN0ludGVybmFsSXRlbV9fJylcclxuICAgIC8vICAgaWYgKCFpdGVtKVxyXG4gICAgLy8gICAgIGl0ZW0gPSBhd2FpdCBJdGVtLmNyZWF0ZSh7XHJcbiAgICAvLyAgICAgICBuYW1lOiAnX19Db0M3SW50ZXJuYWxJdGVtX18nLFxyXG4gICAgLy8gICAgICAgdHlwZTogJ2l0ZW0nXHJcbiAgICAvLyAgICAgfSlcclxuICAgIC8vICAgZm9yKCBjb25zdCBlIG9mIGl0ZW0uZWZmZWN0cyl7XHJcbiAgICAvLyAgICAgYXdhaXQgZS5kZWxldGUoKVxyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGNvbnN0IGVmZmVjdHMgPSBhd2FpdCBpdGVtLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXHJcbiAgICAvLyAgICAge1xyXG4gICAgLy8gICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcclxuICAgIC8vICAgICAgIGljb246ICdpY29ucy9zdmcvYXVyYS5zdmcnLFxyXG4gICAgLy8gICAgICAgb3JpZ2luOiBudWxsLFxyXG4gICAgLy8gICAgICAgJ2R1cmF0aW9uLnJvdW5kcyc6IHVuZGVmaW5lZCxcclxuICAgIC8vICAgICAgIGRpc2FibGVkOiB0cnVlXHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICBdKVxyXG4gICAgLy8gICBjb25zdCBlZmZlY3QgPSBlZmZlY3RzWzBdXHJcbiAgICAvLyAgIGF3YWl0IGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcclxuICAgIC8vIH1cclxuICAgIGlmICghdGhpcy5saW5rLmxpbmspIHtcclxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy53YXJuKCAnTGluayBpcyBpbnZhbGlkICEnKTtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICBjYXNlICdjbGlwYm9hcmQnOlxyXG4gICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKHRoaXMubGluay5saW5rKVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICdjaGF0JzpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxyXG4gICAgICAgICAgbGV0IG1lc3NhZ2VcclxuICAgICAgICAgIG9wdGlvbi5zcGVha2VyID0ge1xyXG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0aGlzLmxpbmsuaXMuZWZmZWN0KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHt0aGlzLmxpbmsubGlua308L2Rpdj5gXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xyXG4gICAgICAgICAgICAgIGNoZWNrOiB0aGlzLmxpbmsubGlua1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKG51bGwsIG1lc3NhZ2UsIG9wdGlvbilcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgJ3doaXNwZXItb3duZXInOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHt9XHJcbiAgICAgICAgICBvcHRpb24uc3BlYWtlciA9IHtcclxuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBvcHRpb24ud2hpc3BlciA9IHRoaXMubGluay5hY3Rvci5vd25lcnNcclxuICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XHJcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5saW5rLmFjdG9yLm5hbWUsXHJcbiAgICAgICAgICAgICAgY2hlY2s6IHRoaXMubGluay5saW5rXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBvcHRpb25cclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgJ3doaXNwZXItc2VsZWN0ZWQnOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmICghY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTm9Ub2tlbnNTZWxlY3RlZCcpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxyXG4gICAgICAgICAgb3B0aW9uLnNwZWFrZXIgPSB7XHJcbiAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yIChjb25zdCB0IG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xyXG4gICAgICAgICAgICBpZiAodC5hY3Rvci5oYXNQbGF5ZXJPd25lcikge1xyXG4gICAgICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gdC5hY3Rvci5vd25lcnNcclxuICAgICAgICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHQuYWN0b3IubmFtZSxcclxuICAgICAgICAgICAgICAgICAgY2hlY2s6IHRoaXMubGluay5saW5rXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG9wdGlvblxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgdGhpcy5jbG9zZSgpXHJcbiAgfVxyXG5cclxuICAvKiogQG92ZXJyaWRlXHJcbiAgICogQSBzdWJjbGFzcyBvZiB0aGUgRm9ybUFwcGxpY2F0aW9uIG11c3QgaW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZC5cclxuICAgKi9cclxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGdyb3VwID0gdGFyZ2V0Py5jbG9zZXN0KCcuZm9ybS1ncm91cCcpXHJcbiAgICBjb25zdCBncm91cE5hbWUgPSBncm91cD8uZGF0YXNldC5ncm91cFxyXG4gICAgaWYgKGdyb3VwTmFtZSA9PT0gJ29yaWdpbicpIHtcclxuICAgICAgLy8gRGVwcmVjYXRlZFxyXG4gICAgICBpZiAodGFyZ2V0Lm5hbWUgPT09ICdmcm9tQ29tcGVuZGl1bScpIHtcclxuICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gIXRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW1cclxuICAgICAgICBpZiAodGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xyXG4gICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRhcmdldC5uYW1lID09PSAnZnJvbURpcmVjdG9yeScpIHtcclxuICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSAhdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5XHJcbiAgICAgICAgaWYgKHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xyXG4gICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMubGluay5mZXRjaEl0ZW0oKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZm9ybURhdGFFeCA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSlcclxuICAgICAgaWYgKGZvcm1EYXRhRXguY2hlY2spIGZvcm1EYXRhRXguY2hlY2sgPSBOdW1iZXIoZm9ybURhdGFFeC5jaGVjaylcclxuICAgICAgaWYgKGZvcm1EYXRhRXguZGlmZmljdWx0eSkge1xyXG4gICAgICAgIGZvcm1EYXRhRXguZGlmZmljdWx0eSA9IE51bWJlcihmb3JtRGF0YUV4LmRpZmZpY3VsdHkpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZvcm1EYXRhRXgudHlwZSkgZm9ybURhdGFFeC50eXBlID0gTnVtYmVyKGZvcm1EYXRhRXgudHlwZSlcclxuICAgICAgY29uc3QgZGlmZkRhdGEgPSBkaWZmT2JqZWN0KHRoaXMubGluay5kYXRhLCBmb3JtRGF0YUV4KVxyXG4gICAgICBhd2FpdCB0aGlzLmxpbmsudXBkYXRlKGRpZmZEYXRhKVxyXG4gICAgfVxyXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIC8vIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XHJcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYF9nZXRTdWJtaXREYXRhOiAke3VwZGF0ZURhdGF9YCk7XHJcblxyXG4gIC8vICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcclxuICAvLyAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7ZWRpdG9yczogdGhpcy5lZGl0b3JzfSk7XHJcbiAgLy8gICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XHJcbiAgLy8gICBpZiAoIHVwZGF0ZURhdGEgKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XHJcbiAgLy8gICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSk7XHJcblxyXG4gIC8vICAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxyXG4gIC8vICAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XHJcbiAgLy8gICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcclxuXHJcbiAgLy8gICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcclxuICAvLyAgIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gLyoqIEBvdmVycmlkZSAqL1xyXG4gIC8vIF9vblN1Ym1pdFxyXG5cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICgpIHtcclxuICAgIGNvbnN0IGxpbmsgPSBuZXcgQ29DN0xpbmsoKVxyXG4gICAgbmV3IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cobGluaywge30pLnJlbmRlcih0cnVlKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgZHVwbGljYXRlLCBnYW1lLCBOb2RlRmlsdGVyLCBUZXh0RWRpdG9yLCB1aSAqL1xyXG5cclxuLyoqXHJcbiAqIEFsbG93IGZvciBwYXJzaW5nIG9mIENvQzcgZWxlbWVudHMgaW4gY2hhdCBtZXNzYWdlIGFuZCBzaGVldHMuXHJcbiAqIEZvcm1hdCBpcyA6XHJcbiAqIEBjb2M3LlRZUEVfT0ZfUkVRVUVTVFtPUFRJT05TXXtESVNQTEFZRURfTkFNRX1cclxuICogVFlQRV9PRl9SRVFVRVNUIDpcclxuICogLSBzYW5sb3NzIDogdHJpZ2dlciBhIHNhbiBjaGVjaywgdXBvbiBmYWlsdXJlIHdpbGwgcHJvcG9zZSB0byBkZWR1Y3QgdGhlIGNvcnJlc3BvbmRpbmcgU0FOLlxyXG4gKiAtIGNoZWNrIDogdHJpZ2dlciBhIGNoZWNrIGRlcGVuZGluZyBvbiB0aGUgb3B0aW9ucy5cclxuICpcclxuICogT1BUSU9OUzogW10gPSBvcHRpb25hbFxyXG4gKiBzYW5sb3NzOlxyXG4gKiAgIHNhbk1heDogbWF4IFNBTiBsb3NzXHJcbiAqICAgc2FuTWluOiBtaW4gU0FOIGxvc3NcclxuICogY2hlY2s6XHJcbiAqICAgdHlwZTogdHlwZSBvZiBjaGVjayAoY2hhcmFjdGVyaXN0aWMsIHNraWxsLCBhdHRyaWIpLlxyXG4gKiAgIG5hbWU6IG5hbWUgb2YgdGhlIHNraWxsL2NoYXJhY3RlcmlzdGljLlxyXG4gKiAgIFtkaWZmaWN1bHR5XTogPyAoYmxpbmQpLCAwIChyZWd1bGFyKSwgKyAoaGFyZCksICsrIChleHRyZW1lKSwgKysrIChjcml0aWNhbCkuXHJcbiAqICAgW21vZGlmaWVyXTogLXggKHggcGVuYWx0eSBkaWNlKSwgK3ggKHggYm9udXMgZGljZSksIDAgKG5vIG1vZGlmaWVyKS5cclxuICogICBbaWNvbl06IGljb24gdHUgdXNlIChmb250IGF3c29tZSkuXHJcbiAqICAgW2JsaW5kXTogd2lsbCB0cmlnZ2VyIGEgYmxpbmQgcm9sbC5cclxuICpcclxuICogW0RJU1BMQVlFRF9OQU1FOiBuYW1lIHRvIGRpc3BsYXkuXVxyXG4gKlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xyXG5pbXBvcnQgeyBpc0N0cmxLZXksIGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcclxuXHJcbi8vIGltcG9ydCB7IENvQzdTYW5DaGVjayB9IGZyb20gJy4uL2NoYXQvc2FuY2hlY2suanMnO1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcclxuaW1wb3J0IHsgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyB9IGZyb20gJy4vbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXHJcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9saW5rLmpzJ1xyXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9yb2xsLWRpYWxvZy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3UGFyc2VyIHtcclxuICBzdGF0aWMgYXN5bmMgb25FZGl0b3JEcm9wIChldmVudCwgZWRpdG9yKSB7XHJcbiAgICAvLyBUT0RPOiBNQU5BR0UgRkxBVCBNT0RJRklFUiBUSEVSRVxyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIC8vIGNoZWNrIGtleSBwcmVzc2VkIChDVFJMID8pXHJcbiAgICAvLyBpZiBDVFJMIGNoZWNrIGlmIGl0ZW0gaXMgc2tpbGwvd2VhcG9uXHJcbiAgICAvLyBpZiBpdGVtIGZyb20gZ2FtZSBvciBwYWNrIGFkZCByZWYgdG8gdGhlIGxpbmsgIVxyXG4gICAgLy8gY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XHJcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxyXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcclxuICAgIGlmIChkYXRhLmxpbmtUeXBlID09PSAnY29jNy1saW5rJykge1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICBpZiAoZGF0YS50eXBlICE9PSAnZWZmZWN0Jykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICFldmVudC5zaGlmdEtleSAmJlxyXG4gICAgICAgICAgKHR5cGVvZiBkYXRhLmRpZmZpY3VsdHkgPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgICAgIHR5cGVvZiBkYXRhLm1vZGlmaWVyID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGlmICh1c2FnZSkge1xyXG4gICAgICAgICAgICBkYXRhLm1vZGlmaWVyID0gdXNhZ2UuZ2V0KCdib251c0RpY2UnKVxyXG4gICAgICAgICAgICBkYXRhLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcclxuICAgICAgICAgIGRhdGEuYmxpbmQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBDb0M3UGFyc2VyLmNyZWF0ZUNvQzdMaW5rKGRhdGEpXHJcbiAgICAgICAgaWYgKGxpbmspIHtcclxuICAgICAgICAgIGVkaXRvci5pbnNlcnRDb250ZW50KGxpbmspXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShkYXRhKVxyXG4gICAgICAgIGVkaXRvci5pbnNlcnRDb250ZW50KGxpbmsubGluaylcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXHJcblxyXG4gICAgICBpZiAoZGF0YS50eXBlICE9PSAnSXRlbScpIHJldHVyblxyXG5cclxuICAgICAgbGV0IGl0ZW1cclxuICAgICAgY29uc3QgbGlua0RhdGEgPSB7fVxyXG5cclxuICAgICAgaWYgKGRhdGEucGFjaykge1xyXG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChkYXRhLnBhY2spXHJcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxyXG4gICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KGRhdGEuaWQpXHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhKSB7XHJcbiAgICAgICAgaXRlbSA9IGRhdGEuZGF0YVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWl0ZW0pIHJldHVyblxyXG5cclxuICAgICAgbGlua0RhdGEubmFtZSA9IGl0ZW0ubmFtZVxyXG4gICAgICBpZiAoZGF0YS5wYWNrKSBsaW5rRGF0YS5wYWNrID0gZGF0YS5wYWNrXHJcbiAgICAgIGlmIChkYXRhLmlkKSBsaW5rRGF0YS5pZCA9IGRhdGEuaWRcclxuXHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGlzYWJsZUZsYXREaWNlTW9kaWZpZXI6IHRydWVcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBpZiAodXNhZ2UpIHtcclxuICAgICAgICAgICAgbGlua0RhdGEubW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXHJcbiAgICAgICAgICAgIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsaW5rRGF0YS5jaGVjayA9ICdjaGVjaydcclxuICAgICAgICBsaW5rRGF0YS50eXBlID0gJ3NraWxsJ1xyXG4gICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xyXG4gICAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcclxuICAgICAgICBsaW5rRGF0YS5jaGVjayA9ICdpdGVtJ1xyXG4gICAgICAgIGxpbmtEYXRhLnR5cGUgPSAnd2VhcG9uJ1xyXG4gICAgICB9IGVsc2UgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBsaW5rID0gQ29DN1BhcnNlci5jcmVhdGVDb0M3TGluayhsaW5rRGF0YSlcclxuICAgICAgaWYgKGxpbmspIHtcclxuICAgICAgICBlZGl0b3IuaW5zZXJ0Q29udGVudChsaW5rKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUGFyc2VNZXNzYWdlIChcclxuICAgIG1lc3NhZ2UsXHJcbiAgICBodG1sLFxyXG4gICAgZGF0YSAvKiBjaGF0TWVzc2FnZSwgZGF0YS8qLCBvcHRpb24sIHVzZXIgKi9cclxuICApIHtcclxuICAgIC8vIEBjb2M3LnNhbmxvc3Nbc2FuTWF4OjFENixzYW5NaW46MSxzYW5SZWFzb246R2hvdWxzLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cclxuICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6Y2hhcmFjLG5hbWU6U1RSLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTVFIgY2hlY2soLTEpfVxyXG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTphdHRyaWIsbmFtZTpsY2ssZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIGx1Y2sgY2hlY2soLTEpfVxyXG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxuYW1lOmFudGhyb3BvbG9neSxkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgQW50aHJvcG9sb2d5IGNoZWNrKC0xKX1cclxuICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6c2tpbGwsaWNvbjpmYXMgZmEtYXJyb3ctYWx0LWNpcmNsZS1yaWdodCxuYW1lOmFudGhyb3BvbG9neSxkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgQW50aHJvcG9sb2d5IGNoZWNrKC0xKX1cclxuICAgIC8vIEBjb2M3Lml0ZW1bbmFtZTpTaG90Z3VuLGljb246ZmFzIGZhLWJ1bGxzZXllLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17VXNlIHNob3RndW59XHJcbiAgICAvLyBbVEJJXUBjb2M3LmRhbWFnZVtmb3JtdWxhOjFENl17RGFtYWdlIDFENn1cclxuICAgIC8vIFtUQkldQGNvYzcucm9sbFt0aHJlc2hvbGQ6NTBde1NpbXBsZSByb2xsfVxyXG5cclxuICAgIGlmICghbWVzc2FnZS5pc0NvbnRlbnRWaXNpYmxlKSByZXR1cm5cclxuXHJcbiAgICBpZiAoZGF0YS5tZXNzYWdlLmNvbnRlbnQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcygnQGNvYzcnKSkge1xyXG4gICAgICBjb25zdCBwYXJzZWRDb250ZW50ID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEubWVzc2FnZS5jb250ZW50KVxyXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5odG1sKHBhcnNlZENvbnRlbnQpXHJcbiAgICAgIC8vIGNoYXRNZXNzYWdlLmRhdGEuY29udGVudCA9IHBhcnNlZENvbnRlbnQ7XHJcbiAgICAgIGRhdGEubWVzc2FnZS5jb250ZW50ID0gcGFyc2VkQ29udGVudFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWUgLy8gYWxsb3cgbWVzc2FnZSB0byBiZSBwdWJsaXNoZWQgIVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZUNvQzdMaW5rIChkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEuY2hlY2spIHJldHVyblxyXG4gICAgc3dpdGNoIChkYXRhLmNoZWNrLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgY2FzZSAnY2hlY2snOiB7XHJcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XHJcbiAgICAgICAgaWYgKCFkYXRhLnR5cGUgfHwgIWRhdGEubmFtZSkgcmV0dXJuXHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtkYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ310eXBlOiR7ZGF0YS50eXBlfSxuYW1lOiR7XHJcbiAgICAgICAgICBkYXRhLm5hbWVcclxuICAgICAgICB9YFxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtkYXRhLmRpZmZpY3VsdHl9YFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGRhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtkYXRhLm1vZGlmaWVyfWBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxyXG4gICAgICAgIGlmIChkYXRhLnBhY2spIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZGF0YS5wYWNrfWBcclxuICAgICAgICBpZiAoZGF0YS5pZCkgb3B0aW9ucyArPSBgLGlkOiR7ZGF0YS5pZH1gXHJcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXHJcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcclxuICAgICAgICByZXR1cm4gbGlua1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdzYW5sb3NzJzoge1xyXG4gICAgICAgIC8vIEBjb2M3LnNhbmxvc3Nbc2FuTWF4OjFENixzYW5NaW46MSxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XHJcbiAgICAgICAgaWYgKCFkYXRhLnNhbk1heCB8fCAhZGF0YS5zYW5NaW4pIHJldHVyblxyXG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9c2FuTWF4OiR7XHJcbiAgICAgICAgICBkYXRhLnNhbk1heFxyXG4gICAgICAgIH0sc2FuTWluOiR7ZGF0YS5zYW5NaW59YFxyXG4gICAgICAgIGlmIChkYXRhLmRpZmZpY3VsdHkpIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZGF0YS5kaWZmaWN1bHR5fWBcclxuICAgICAgICBpZiAoZGF0YS5tb2RpZmllcikgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZGF0YS5tb2RpZmllcn1gXHJcbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxyXG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LnNhbmxvc3NbJHtvcHRpb25zfV1gXHJcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcclxuICAgICAgICByZXR1cm4gbGlua1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEbyB3ZSBuZWVkIHRoYXQgPz8/XHJcbiAgICAgIGNhc2UgJ2l0ZW0nOiB7XHJcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XHJcbiAgICAgICAgaWYgKCFkYXRhLnR5cGUgfHwgIWRhdGEubmFtZSkgcmV0dXJuXHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtkYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ310eXBlOiR7ZGF0YS50eXBlfSxuYW1lOiR7XHJcbiAgICAgICAgICBkYXRhLm5hbWVcclxuICAgICAgICB9YFxyXG4gICAgICAgIC8vIGlmKCBkYXRhLmRpZmZpY3VsdHkpIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZGF0YS5kaWZmaWN1bHR5fWA7XHJcbiAgICAgICAgLy8gaWYoIGRhdGEubW9kaWZpZXIpIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke2RhdGEubW9kaWZpZXJ9YDtcclxuICAgICAgICBpZiAoZGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke2RhdGEuaWNvbn1gXHJcbiAgICAgICAgaWYgKGRhdGEucGFjaykgb3B0aW9ucyArPSBgLHBhY2s6JHtkYXRhLnBhY2t9YFxyXG4gICAgICAgIGlmIChkYXRhLmlkKSBvcHRpb25zICs9IGAsaWQ6JHtkYXRhLmlkfWBcclxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxyXG4gICAgICAgIGlmIChkYXRhLmRpc3BsYXlOYW1lKSBsaW5rICs9IGB7JHtkYXRhLmRpc3BsYXlOYW1lfX1gXHJcbiAgICAgICAgcmV0dXJuIGxpbmtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIFBhcnNlU2hlZXRDb250ZW50IChhcHAsIGh0bWwpIHtcclxuICAgIC8vIENoZWNrIGluIGFsbCBlZGl0b3JzIGNvbnRlbnQgZm9yIGEgbGluay5cclxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBodG1sLmZpbmQoJ2Rpdi5lZGl0b3ItY29udGVudCA+ICosIHAnKSkge1xyXG4gICAgICBpZiAoZWxlbWVudC5vdXRlckhUTUwudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcygnQGNvYzcnKSkge1xyXG4gICAgICAgIGVsZW1lbnQub3V0ZXJIVE1MID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGVsZW1lbnQub3V0ZXJIVE1MKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmluZCB0aGUgY2xpY2sgdG8gZXhlY3V0ZSB0aGUgY2hlY2suXHJcbiAgICAvLyBodG1sLm9uKCdjbGljaycsICdhLmNvYzctbGluaycsIENvQzdQYXJzZXIuX29uQ2hlY2suYmluZCh0aGlzKSk7XHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXHJcbiAgICAgIC5vbignY2xpY2snLCBhc3luYyBldmVudCA9PiBhd2FpdCBDb0M3UGFyc2VyLl9vbkNoZWNrKGV2ZW50KSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcclxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiBDb0M3UGFyc2VyLl9vbkRyYWdDb0M3TGluayhldmVudCkpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX2dldFRleHROb2RlcyAocGFyZW50KSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gW11cclxuICAgIGNvbnN0IHdhbGsgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxyXG4gICAgICBwYXJlbnQsXHJcbiAgICAgIE5vZGVGaWx0ZXIuU0hPV19URVhULFxyXG4gICAgICBudWxsLFxyXG4gICAgICBmYWxzZVxyXG4gICAgKVxyXG4gICAgd2hpbGUgKHdhbGsubmV4dE5vZGUoKSkgdGV4dC5wdXNoKHdhbGsuY3VycmVudE5vZGUpXHJcbiAgICByZXR1cm4gdGV4dFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGVucmljaEhUTUwgKGNvbnRlbnQpIHtcclxuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgaHRtbC5pbm5lckhUTUwgPSBTdHJpbmcoY29udGVudClcclxuXHJcbiAgICBsZXQgdGV4dCA9IFtdXHJcblxyXG4gICAgdGV4dCA9IFRleHRFZGl0b3IuX2dldFRleHROb2RlcyhodG1sKVxyXG4gICAgLy8gQWx0ZXJuYXRpdmUgcmVnZXggOiAnQChjb2M3KS4oW15cXFtdKylcXFsoW15cXF1dKylcXF0oPzp7KFtefV0rKX0pPydcclxuICAgIC8vIEJlZm9yZSBhY3RpdmUgZWZmZWN0IDogICAgICAgJ0AoY29jNykuKC4qPylcXFxcWyhbXlxcXFxdXSspXFxcXF0nICsgJyg/OnsoW159XSspfSk/JyxcclxuICAgIGNvbnN0IHJneCA9IG5ldyBSZWdFeHAoJ0AoY29jNylcXFxcLicgKyAnKFteXFxcXF1dKz8pJyArICdcXFxcWygoPzpbXlxcXFxdXFxcXFtdK3xcXFxcWyg/OlteXFxcXF1cXFxcW10rfFxcXFxbW15cXFxcXVxcXFxbXSpcXFxcXSkqXFxcXF0pKilcXFxcXScgKyAnKD86eyhbXn1dKyl9KT8nLCAnZ2knKVxyXG4gICAgVGV4dEVkaXRvci5fcmVwbGFjZVRleHRDb250ZW50KHRleHQsIHJneCwgQ29DN1BhcnNlci5fY3JlYXRlTGluaylcclxuICAgIHJldHVybiBodG1sLmlubmVySFRNTFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGJpbmRFdmVudHNIYW5kbGVyIChodG1sKSB7XHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXHJcbiAgICAgIC5vbignY2xpY2snLCBhc3luYyBldmVudCA9PiBhd2FpdCBDb0M3UGFyc2VyLl9vbkNoZWNrKGV2ZW50KSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcclxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiBDb0M3UGFyc2VyLl9vbkRyYWdDb0M3TGluayhldmVudCkpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX29uRHJhZ0NvQzdMaW5rIChldmVudCkge1xyXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxpbmstaWNvbl0nKVxyXG4gICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZShhLmRhdGFzZXQpXHJcbiAgICBkYXRhLmxpbmtUeXBlID0gJ2NvYzctbGluaydcclxuICAgIGRhdGEuQ29DN1R5cGUgPSAnbGluaydcclxuICAgIGRhdGEuaWNvbiA9IG51bGxcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGRhdGEub2JqZWN0ICYmXHJcbiAgICAgICh0eXBlb2YgZGF0YS5vYmplY3QgPT09ICdzdHJpbmcnIHx8IGRhdGEub2JqZWN0IGluc3RhbmNlb2YgU3RyaW5nKVxyXG4gICAgKSB7XHJcbiAgICAgIGRhdGEub2JqZWN0ID0gSlNPTi5wYXJzZShkYXRhLm9iamVjdClcclxuICAgICAgZGF0YS50eXBlID0gJ2VmZmVjdCdcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGkuZGF0YXNldCAmJlxyXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gJiZcclxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICE9PSAnZmFzIGZhLWRpY2UnXHJcbiAgICApIHtcclxuICAgICAgZGF0YS5pY29uID0gaS5kYXRhc2V0LmxpbmtJY29uXHJcbiAgICB9XHJcbiAgICBkYXRhLmRpc3BsYXlOYW1lID0gYS5kYXRhc2V0LmRpc3BsYXlOYW1lID8gYS5pbm5lclRleHQgOiBudWxsXHJcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX2NyZWF0ZUxpbmsgKG1hdGNoKSB7XHJcbiAgICBjb25zdCBuYW1lID0gbWF0Y2hbNF0gPz8gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBvcHRpb25zID0gbWF0Y2hbM10gPz8gdW5kZWZpbmVkXHJcbiAgICBjb25zdCB0eXBlID0gbWF0Y2hbMl0gPz8gdW5kZWZpbmVkXHJcbiAgICAvLyBjb25zdCB0YWcgPSBtYXRjaFsxXSA/PyB1bmRlZmluZWRcclxuXHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBjbHM6IFsnY29jNy1saW5rJ10sXHJcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6IHR5cGUgfSxcclxuICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgYmxpbmQ6IGZhbHNlLFxyXG4gICAgICBuYW1lXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWF0Y2hlcyA9IG9wdGlvbnMubWF0Y2hBbGwoL1teLF0rL2dpKVxyXG4gICAgaWYgKHR5cGUgPT09ICdlZmZlY3QnKSB7XHJcbiAgICAgIGRhdGEuZWZmZWN0ID0gSlNPTi5wYXJzZShvcHRpb25zKVxyXG4gICAgICBkYXRhLmRhdGFzZXQub2JqZWN0ID0gb3B0aW9uc1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBBcnJheS5mcm9tKG1hdGNoZXMpKSB7XHJcbiAgICAgICAgbGV0IFtrZXksIHZhbHVlXSA9IG1hdGNoWzBdLnNwbGl0KCc6JylcclxuICAgICAgICBpZiAoa2V5ID09PSAnaWNvbicpIGRhdGEuaWNvbiA9IHZhbHVlXHJcbiAgICAgICAgaWYgKGtleSA9PT0gJ2JsaW5kJyAmJiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9IHRydWVcclxuICAgICAgICAgIGRhdGEuYmxpbmQgPSB0cnVlICYmIFsnY2hlY2snXS5pbmNsdWRlcyh0eXBlLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEuZGF0YXNldFtrZXldID0gdmFsdWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aXRsZVxyXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKGRhdGEuZGF0YXNldC5kaWZmaWN1bHR5KVxyXG5cclxuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIGNhc2UgJ2NoZWNrJzoge1xyXG4gICAgICAgIGxldCBodW1hbk5hbWUgPSBkYXRhLmRhdGFzZXQubmFtZVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhcclxuICAgICAgICAgICAgZGF0YS5kYXRhc2V0LnR5cGU/LnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ2xjaycpIHtcclxuICAgICAgICAgICAgaHVtYW5OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YXNldC5uYW1lID09PSAnc2FuJykge1xyXG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhcclxuICAgICAgICAgICAgZGF0YS5kYXRhc2V0LnR5cGU/LnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGh1bWFuTmFtZSA9IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhcclxuICAgICAgICAgICAgZGF0YS5kYXRhc2V0Lm5hbWVcclxuICAgICAgICAgICk/LmxhYmVsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcclxuICAgICAgICAgICAgIWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ1xyXG4gICAgICAgICAgfWAsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXHJcbiAgICAgICAgICAgIG5hbWU6IGh1bWFuTmFtZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ3Nhbmxvc3MnOlxyXG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgIGBDb0M3LkxpbmtTYW5Mb3NzJHshZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xyXG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXHJcbiAgICAgICAgICB9YCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcclxuICAgICAgICAgICAgc2FuTWluOiBkYXRhLmRhdGFzZXQuc2FuTWluLFxyXG4gICAgICAgICAgICBzYW5NYXg6IGRhdGEuZGF0YXNldC5zYW5NYXhcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnaXRlbSc6XHJcbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgYENvQzcuTGlua0l0ZW0keyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XHJcbiAgICAgICAgICAgICFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcclxuICAgICAgICAgIH1gLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxyXG4gICAgICAgICAgICBuYW1lOiBkYXRhLmRhdGFzZXQubmFtZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdlZmZlY3QnOlxyXG4gICAgICAgIHRpdGxlID0gZGF0YS5lZmZlY3QubGFiZWxcclxuICAgICAgICBicmVha1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgIGRhdGEubmFtZSA9IHRpdGxlXHJcbiAgICB9IGVsc2UgZGF0YS5kYXRhc2V0LmRpc3BsYXlOYW1lID0gdHJ1ZVxyXG5cclxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICAgIGEudGl0bGUgPSBnYW1lLnVzZXIuaXNHTSA/IGRhdGEubmFtZSA6IHRpdGxlXHJcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXHJcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XHJcbiAgICAgIGEuZGF0YXNldFtrXSA9IHZcclxuICAgIH1cclxuICAgIGEuZHJhZ2dhYmxlID0gdHJ1ZVxyXG4gICAgZGF0YS5pY29uID0gZGF0YS5pY29uID8/IGRhdGEuZWZmZWN0Py5pY29uID8/ICdmYXMgZmEtZGljZSdcclxuICAgIC8vIGNoZWNrIGlmIGl0J3MgYW4gaW1hZ2Ugb3IgYW4gaWNvblxyXG4gICAgaWYgKGRhdGEuaWNvbi5pbmNsdWRlcygnXFxcXCcpIHx8IGRhdGEuaWNvbi5pbmNsdWRlcygnLicpKSB7XHJcbiAgICAgIGRhdGEuaW1nID0gZGF0YS5pY29uXHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YS5ibGluZCkgYS5pbm5lckhUTUwgKz0gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nXHJcbiAgICBpZiAoZGF0YS5pbWcpIHtcclxuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpbWcgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBzcmM9XCIke2RhdGEuaW1nfVwiPmBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGEuaW5uZXJIVE1MICs9IGA8aSBkYXRhLWxpbmstaWNvbj1cIiR7ZGF0YS5pY29ufVwiIGNsYXNzPVwibGluay1pY29uICR7ZGF0YS5pY29ufVwiPjwvaT5gXHJcbiAgICB9XHJcbiAgICBhLmlubmVySFRNTCArPSBgPHNwYW4+JHtkYXRhLm5hbWV9PC9zcGFuPmBcclxuXHJcbiAgICByZXR1cm4gYVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHJpZ2dlciBhIGNoZWNrIHdoZW4gYSBsaW5rIGlzIGNsaWNxdWVkLlxyXG4gICAqIERlcGVuZGluZyB0aGUgb3JpZ2luXHJcbiAgICogQHBhcmFtIHsqfSBldmVudFxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIF9vbkNoZWNrIChldmVudCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldFxyXG5cclxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcclxuICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xpY2sgb3JpZ2luIChmcm9tIG1lc3NhZ2Ugb3IgZnJvbSBzaGVldClcclxuICAgIC8vIGNvbnN0IGZyb21TaGVldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpP2ZhbHNlOnRydWU7XHJcblxyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzcGxheU5hbWUpIG9wdGlvbnMubGFiZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dFxyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShvcHRpb25zKVxyXG4gICAgICAgIGNvbnN0IGxpbmtEaWFsb2cgPSBuZXcgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyhsaW5rKVxyXG4gICAgICAgIGxpbmtEaWFsb2cucmVuZGVyKHRydWUpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEob3B0aW9ucylcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcclxuICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xyXG4gICAgICAgICAgICBjYXNlICdjaGVjayc6XHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAnY2hhcmFjJyxcclxuICAgICAgICAgICAgICAgICAgJ2NoYXInLFxyXG4gICAgICAgICAgICAgICAgICAnY2hhcmFjdGVyaXN0aWMnLFxyXG4gICAgICAgICAgICAgICAgICAnY2hhcmFjdGVyaXN0aWNzJ1xyXG4gICAgICAgICAgICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5hY3Rvci5jaGFyYWN0ZXJpc3RpY0NoZWNrKFxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5LFxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChbJ3NraWxsJ10uaW5jbHVkZXMob3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3Iuc2tpbGxDaGVjayhvcHRpb25zLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKFxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmF0dHJpYnV0ZUNoZWNrKFxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5LFxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBjYXNlICdzYW5sb3NzJzoge1xyXG4gICAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodG9rZW4uYWN0b3IuYWN0b3JLZXksIG9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FzZSAnaXRlbSc6IHtcclxuICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3Iud2VhcG9uQ2hlY2sob3B0aW9ucywgZXZlbnQuc2hpZnRLZXkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2VmZmVjdCc6XHJcbiAgICAgICAgICAgICAgYXdhaXQgdG9rZW4uYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcclxuICAgICAgICAgICAgICAgIGxpbmsuZGF0YS5lZmZlY3RcclxuICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZ2FtZS51c2VyLmRhdGEuZG9jdW1lbnQuY2hhcmFjdGVyPy5kYXRhKSB7XHJcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgZ2FtZS51c2VyLmRhdGEuZG9jdW1lbnQuY2hhcmFjdGVyLmRhdGEuaXRlbXMubWFwKGFzeW5jIHYgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICh2Lm5hbWUgPT09IG9wdGlvbnMubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuICAgICAgICAgICAgICAgIGNoZWNrLl9yYXdWYWx1ZSA9IHYuZGF0YS5kYXRhLmJhc2VcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxyXG4gICAgICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSBlbHNlIGlmIChnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0ge1xyXG4gICAgICAgICAgICBzcGVha2VyOiB7XHJcbiAgICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xyXG4gICAgICAgICAgICAgIGNoZWNrOiAoYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEob3B0aW9ucykpLmxpbmtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG9wdGlvblxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxyXG4gICAgICBjb25zdCBhY3RvciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3RvcihzcGVha2VyKVxyXG4gICAgICBpZiAoYWN0b3IpIHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcclxuICAgICAgICAgIGNhc2UgJ2NoZWNrJzpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMoXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjdG9yLmNoYXJhY3RlcmlzdGljQ2hlY2soXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBldmVudC5zaGlmdEtleSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFsnc2tpbGwnXS5pbmNsdWRlcyhvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gYWN0b3Iuc2tpbGxDaGVjayhvcHRpb25zLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY3Rvci5hdHRyaWJ1dGVDaGVjayhvcHRpb25zLm5hbWUsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgY2FzZSAnc2FubG9zcyc6IHtcclxuICAgICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShhY3Rvci5pZCwgb3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyBjb25zdCBjaGVjayA9IG5ldyBDb0M3U2FuQ2hlY2soXHJcbiAgICAgICAgICAgIC8vICAgYWN0b3IuaWQsXHJcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5zYW5NaW4sXHJcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5zYW5NYXgsXHJcbiAgICAgICAgICAgIC8vICAgdW5kZWZpbmVkICE9IG9wdGlvbnMuZGlmZmljdWx0eT9Db0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSk6Q29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxyXG4gICAgICAgICAgICAvLyAgIHVuZGVmaW5lZCAhPSBvcHRpb25zLm1vZGlmaWVyP051bWJlcihvcHRpb25zLm1vZGlmaWVyKTowKTtcclxuICAgICAgICAgICAgLy8gY2hlY2sudG9NZXNzYWdlKCBldmVudC5zaGlmdEtleSk7XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY2FzZSAnaXRlbSc6IHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIGV2ZW50LnNoaWZ0S2V5KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGdhbWUudXNlci5kYXRhLmRvY3VtZW50LmNoYXJhY3Rlcj8uZGF0YSkge1xyXG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgIGdhbWUudXNlci5kYXRhLmRvY3VtZW50LmNoYXJhY3Rlci5kYXRhLml0ZW1zLm1hcChhc3luYyB2ID0+IHtcclxuICAgICAgICAgICAgICBpZiAodi5uYW1lID09PSBvcHRpb25zLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICAgICAgICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSB2LmRhdGEuZGF0YS5iYXNlXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgQ09ORklHLCBkdXBsaWNhdGUsIGdhbWUsIGdldFByb3BlcnR5LCBJdGVtLCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uL2FwcHMvcGFyc2VyLmpzJ1xyXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuLyoqXHJcbiAqIE92ZXJyaWRlIGFuZCBleHRlbmQgdGhlIGJhc2ljIDpjbGFzczpgSXRlbWAgaW1wbGVtZW50YXRpb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3SXRlbSBleHRlbmRzIEl0ZW0ge1xyXG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXHJcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcclxuICAgIC8qKiBAc2VlIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXHJcbiAgICBpZiAoZGF0YS50eXBlIGluIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXHJcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXHJcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxyXG4gICAgICAgKi9cclxuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XHJcbiAgICAgICAgLi4ueyBleHRlbmRlZDogdHJ1ZSB9LFxyXG4gICAgICAgIC4uLmNvbnRleHRcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy5zdmcnXHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xyXG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XHJcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xyXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgaWNvbkxhbmd1YWdlICgpIHtcclxuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMvbGFuZ3VhZ2Uuc3ZnJ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBmbGFncyAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtYWxmdW5jdGlvbjogJ21hbGZjJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVG9nZ2xlIG9uIG9mIHRoZSBpdGVtIHByb3BlcnR5IGluIGRhdGEuZGF0YS5wcm9wZXJ0aWVzXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgOiBuYW1lIGZvciB0aGUgcHJvcGVydHkgdG8gdG9nZ2xlXHJcbiAgICovXHJcbiAgYXN5bmMgdG9nZ2xlUHJvcGVydHkgKHByb3BlcnR5SWQsIG92ZXJyaWRlID0gZmFsc2UpIHtcclxuICAgIGxldCBjaGVja2VkUHJvcHMgPSB7fVxyXG4gICAgbGV0IGZpZ2h0aW5nXHJcbiAgICBsZXQgZmlyZWFybXNcclxuICAgIGlmICh0eXBlb2YgQ09DNy5lcmFzW3Byb3BlcnR5SWRdICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBjaGVja2VkUHJvcHMgPSB7XHJcbiAgICAgICAgWydzeXN0ZW0uZXJhcy4nICsgcHJvcGVydHlJZF06ICEodGhpcy5zeXN0ZW0uZXJhc1twcm9wZXJ0eUlkXSA/PyBmYWxzZSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmICFvdmVycmlkZSkge1xyXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FoZGInKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIHtcclxuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiB0cnVlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhZGRiJykge1xyXG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSB7XHJcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogdHJ1ZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc2hvdGd1bicpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xyXG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWUsXHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUnOiBudWxsLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbCxcclxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLnZhbHVlJzogbnVsbCxcclxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnIHx8IHByb3BlcnR5SWQgPT09ICdybmdkJykge1xyXG4gICAgICAgIGxldCBtZWxlZVdlYXBvblxyXG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XHJcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSkge1xyXG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcclxuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcclxuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWVsZWVXZWFwb24pIHtcclxuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogdHJ1ZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmJyc3QnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmF1dG8nOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmRicmwnOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmICFvdmVycmlkZSkge1xyXG4gICAgICBsZXQgbW9kaWYgPSBmYWxzZVxyXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2NvbWJhdCcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XHJcbiAgICAgICAgICAvLyBDbG9zZSBjb21iYXQgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcclxuICAgICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXHJcbiAgICAgICAgICB9IGVsc2UgZmlyZWFybXMgPSB0cnVlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6ICcnLFxyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbW9kaWYgPSB0cnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlnaHRpbmcnKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XHJcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXHJcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXHJcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1vZGlmID0gdHJ1ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpcmVhcm0nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcclxuICAgICAgICAgIGZpcmVhcm1zID0gdHJ1ZVxyXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXHJcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgbW9kaWYgPSB0cnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChtb2RpZikge1xyXG4gICAgICAgIC8vIHNldCBzcGVjaWFsaXNhdGlvbiBpZiBmaWdodGluZyBvciBmaXJlYXJtXHJcbiAgICAgICAgaWYgKGZpZ2h0aW5nKSB7XHJcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IHRydWUsXHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcclxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lLFxyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxyXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxyXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmaXJlYXJtcykge1xyXG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiB0cnVlLFxyXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcclxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXHJcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxyXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxyXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHByb3BlcnR5SWQgPT09ICdzcGVjaWFsJykge1xyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1twcm9wZXJ0eUlkXSkge1xyXG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcclxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogZmFsc2UsXHJcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcclxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXHJcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogZmFsc2UsXHJcbiAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogJycsXHJcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hlY2tlZFByb3BzID0ge1xyXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxyXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxyXG4gICAgICByZXR1cm4gaXRlbVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcHJvcE5hbWUgPSBgc3lzdGVtLnByb3BlcnRpZXMuJHtwcm9wZXJ0eUlkfWBcclxuICAgICAgY29uc3QgcHJvcFZhbHVlID0gIXRoaXMuc3lzdGVtLnByb3BlcnRpZXNbcHJvcGVydHlJZF1cclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbcHJvcE5hbWVdOiBwcm9wVmFsdWUgfSkudGhlbihpdGVtID0+IHtcclxuICAgICAgICByZXR1cm4gaXRlbVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFzUHJvcGVydHkgKHByb3BlcnR5SWQpIHtcclxuICAgIHJldHVybiB0aGlzLmlzSW5jbHVkZWRJblNldCgncHJvcGVydGllcycsIHByb3BlcnR5SWQpXHJcbiAgfVxyXG5cclxuICBnZXQgc2hvcnROYW1lICgpIHtcclxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNraWxsTmFtZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMubmFtZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xyXG4gICAgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzLnNoZWV0KSByZXR1cm4gYXdhaXQgdGhpcy5zaGVldC51cGRhdGVSb2xsKHJvbGwpXHJcbiAgICBlbHNlIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcykgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlUm9sbChyb2xsKVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE5hbWVQYXJ0c1NwZWMgKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pIHtcclxuICAgIGlmICghc3BlY2lhbGl6YXRpb24pIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBza2lsbE5hbWUsXHJcbiAgICAgICAgc3BlY2lhbGl6YXRpb246ICcnLFxyXG4gICAgICAgIHNraWxsTmFtZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcclxuICAgICAgJ14oJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc3BlY2lhbGl6YXRpb24pICsgJylcXFxccypcXFxcKCguKylcXFxcKSQnLFxyXG4gICAgICAnaSdcclxuICAgIClcclxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKHNwZWNOYW1lUmVnZXgpXHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBtYXRjaFswXSxcclxuICAgICAgICBzcGVjaWFsaXphdGlvbjogbWF0Y2hbMV0sXHJcbiAgICAgICAgc2tpbGxOYW1lOiBtYXRjaFsyXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKScsXHJcbiAgICAgIHNwZWNpYWxpemF0aW9uLFxyXG4gICAgICBza2lsbE5hbWVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXROYW1lV2l0aG91dFNwZWMgKGl0ZW0pIHtcclxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29DN0l0ZW0pIHtcclxuICAgICAgaWYgKGl0ZW0uc3lzdGVtPy5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmIHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0uc3lzdGVtLnNraWxsTmFtZVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaXRlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmIHR5cGVvZiBpdGVtLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gaXRlbS5za2lsbE5hbWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzQW55U3BlYyAoaXRlbSkge1xyXG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb0M3SXRlbSkge1xyXG4gICAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnIHx8ICFpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICdhbnknXHJcbiAgICAgIF0uaW5jbHVkZXMoQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGl0ZW0pLnRvTG93ZXJDYXNlKCkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBBc3N1bWUgaXQncyBkYXRhIG9ubHlcclxuICAgICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJyB8fCAhaXRlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSByZXR1cm4gZmFsc2VcclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICdhbnknXHJcbiAgICAgIF0uaW5jbHVkZXMoQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGl0ZW0pLnRvTG93ZXJDYXNlKCkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjaGVja1NraWxsUHJvcGVydGllcyAoKSB7XHJcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cclxuICAgIGNvbnN0IGNoZWNrZWRQcm9wcyA9IHt9XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcclxuICAgICAgLy8gaWYgc2tpbGwgaXMgbm90IGEgc3BlY2lhbGlzYXRpb24gbWFrZSBpdCBhIHNwZWNpYWxpc2F0aW9uXHJcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XHJcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsID0gdHJ1ZVxyXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCddID0gdHJ1ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBza2lsbCBpcyBjb21iYXQgc2tpbGwgYW5kIG5vIHNwZWNpYWxpc2F0aW9uIHNldCB0aGVuIG1ha2UgaXQgYSBmaWdodGluZyggY2xvc2Vjb21iYXQpIHNraWxsXHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxyXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm1cclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcclxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSB0cnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGlmIHNraWxsIGlzIGNsb3NlIGNvbWJhdCB3aXRob3V0IHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxyXG4gICAgICAgICghdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPT09ICcnKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcclxuICAgICAgICApXHJcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGlmIHNraWxsIGlzIHJhbmdlIGNvbWJhdCB3aXRob3V0IGEgc3BlY2lhbGlzYXRpb24gbmFtZSBtYWtlIHNldCBpdCBhY2NvcmRpbmcgdG8gdGhlIGZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxyXG4gICAgICAgICghdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPT09ICcnKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxyXG4gICAgICAgIClcclxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xyXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPSBmYWxzZVxyXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnXSA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xyXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSA9IGZhbHNlXHJcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJ10gPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNoZWNrZWRQcm9wc1xyXG4gIH1cclxuXHJcbiAgaXNJbmNsdWRlZEluU2V0IChzZXQsIHByb3BlcnR5SWQpIHtcclxuICAgIGlmICghdGhpcy5zeXN0ZW1bc2V0XSkgdGhpcy5zeXN0ZW1bc2V0XSA9IFtdXHJcbiAgICBjb25zdCBwcm9wZXJ0eUluZGV4ID0gdGhpcy5zeXN0ZW1bc2V0XS5pbmRleE9mKHByb3BlcnR5SWQpXHJcbiAgICBpZiAocHJvcGVydHlJbmRleCA+IC0xKSByZXR1cm4gdHJ1ZVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcclxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50JzogdHJ1ZSB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdW5mbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcclxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50JzogZmFsc2UgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBkZXZlbG9wZW1lbnRGbGFnICgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdG9nZ2xlSXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XHJcbiAgICBjb25zdCBmbGFnVmFsdWUgPSAhdGhpcy5nZXRJdGVtRmxhZyhmbGFnTmFtZSlcclxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxyXG4gICAgaWYgKFxyXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXHJcbiAgICAgICFmbGFnVmFsdWUgJiZcclxuICAgICAgZXJhc2VBZGp1c3RtZW50XHJcbiAgICApIHtcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXHJcbiAgICAgICAgW25hbWVdOiBmbGFnVmFsdWVcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAoZmxhZ05hbWUgPT09ICdkZXZlbG9wZW1lbnQnKSB7XHJcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsWHBHYWluRGlzYWJsZWQnKSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldEl0ZW1GbGFnIChmbGFnTmFtZSkge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyB1bnNldEl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xyXG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXHJcbiAgICBpZiAoXHJcbiAgICAgIChmbGFnTmFtZSA9PT0gJ29jY3VwYXRpb24nIHx8IGZsYWdOYW1lID09PSAnYXJjaGV0eXBlJykgJiZcclxuICAgICAgZXJhc2VBZGp1c3RtZW50XHJcbiAgICApIHtcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXHJcbiAgICAgICAgW25hbWVdOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmYWxzZSB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XHJcbiAgICAgIHRoaXMuc3lzdGVtLmZsYWdzID0ge31cclxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZVxyXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXSkgcmV0dXJuIGZhbHNlXHJcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdXHJcbiAgfVxyXG5cclxuICBnZXQgdXNlc0FsdGVybmF0aXZlU2tpbGwgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdGhpcy50eXBlID09PSAnd2VhcG9uJyAmJlxyXG4gICAgICAodGhpcy5zeXN0ZW0ucHJvcGVydGllcz8uYXV0byA9PT0gdHJ1ZSB8fFxyXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LmJyc3QgPT09IHRydWUgfHxcclxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy50aHJvd24gPT09IHRydWUpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXQgbWF4VXNlc1BlclJvdW5kICgpIHtcclxuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxyXG4gICAgY29uc3QgbXVsdGlTaG90ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcclxuICAgIGlmIChpc05hTihtdWx0aVNob3QpKSByZXR1cm4gMFxyXG4gICAgcmV0dXJuIG11bHRpU2hvdFxyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXNQZXJSb3VuZCAoKSB7XHJcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcclxuICAgIGNvbnN0IHNpbmdsZVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKVxyXG4gICAgaWYgKGlzTmFOKHNpbmdsZVNob3QpKSByZXR1cm4gMFxyXG4gICAgcmV0dXJuIHNpbmdsZVNob3RcclxuICB9XHJcblxyXG4gIGdldCB1c2VzUGVyUm91bmRTdHJpbmcgKCkge1xyXG4gICAgbGV0IHVzZXNQZXJSb3VuZFxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpIHtcclxuICAgICAgdXNlc1BlclJvdW5kID0gdGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm5vcm1hbFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXNlc1BlclJvdW5kID0gJzEnXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heCkge1xyXG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXh9KWBcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHtcclxuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQXV0bycpfWBcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QpIHtcclxuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnJzdCcpfWBcclxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdCkge1xyXG4gICAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0fSlgXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXNlc1BlclJvdW5kXHJcbiAgfVxyXG5cclxuICBnZXQgbXVsdGlwbGVTaG90cyAoKSB7XHJcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcclxuICAgIGlmICh0aGlzLm1heFVzZXNQZXJSb3VuZCA8PSAxKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGdldCBzaW5nbGVTaG90ICgpIHtcclxuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKCF0aGlzLnVzZXNQZXJSb3VuZCkge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBnZXQgYmFzZVJhbmdlICgpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5ub3JtYWwudmFsdWUpXHJcbiAgfVxyXG5cclxuICBnZXQgbG9uZ1JhbmdlICgpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5sb25nLnZhbHVlKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGV4dHJlbWVSYW5nZSAoKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0ucmFuZ2UuZXh0cmVtZS52YWx1ZSlcclxuICB9XHJcblxyXG4gIGdldCBza2lsbFByb3BlcnRpZXMgKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIFtdXHJcblxyXG4gICAgY29uc3Qgc2tpbGxQcm9wZXJ0aWVzID0gW11cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSB7XHJcbiAgICAgICAgc2tpbGxQcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNraWxsUHJvcGVydGllc1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZUJhc2UgKGFjdG9yLCBkYXRhKSB7XHJcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxyXG4gICAgaWYgKFN0cmluZyhkYXRhLnN5c3RlbS5iYXNlKS5pbmNsdWRlcygnQCcpKSB7XHJcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xyXG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuYWN0b3IuJykpIHtcclxuICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KGFjdG9yLCB2YWx1ZS5zdWJzdHJpbmcoMTEpKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBsZXQgdmFsdWVcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgICBuZXcgUm9sbChkYXRhLnN5c3RlbS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcclxuICAgICAgICAgICAgbWF4aW1pemU6IHRydWVcclxuICAgICAgICAgIH0pLnRvdGFsXHJcbiAgICAgICAgKVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB2YWx1ZSA9IDBcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICAgIH1cclxuICAgIHJldHVybiAhaXNOYU4ocGFyc2VJbnQoZGF0YS5zeXN0ZW0uYmFzZSkpID8gcGFyc2VJbnQoZGF0YS5zeXN0ZW0uYmFzZSkgOiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgX2Jhc2UgKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIFtudWxsLCBmYWxzZV1cclxuICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYmFzZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIFt0aGlzLnN5c3RlbS5iYXNlLCBmYWxzZV1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5zeXN0ZW0uYmFzZS5pbmNsdWRlcygnQCcpKSB7XHJcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xyXG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcclxuICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHZhbHVlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgbmV3IFJvbGwodGhpcy5zeXN0ZW0uYmFzZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XHJcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXHJcbiAgICAgICAgICB9KS50b3RhbFxyXG4gICAgICAgIClcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdmFsdWUgPSAwXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBbdmFsdWUsIHRydWVdXHJcbiAgICB9XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAhaXNOYU4ocGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSkpXHJcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5iYXNlKVxyXG4gICAgICAgIDogbnVsbCxcclxuICAgICAgZmFsc2VcclxuICAgIF1cclxuICB9XHJcblxyXG4gIGFzeW5jIGFzeW5jQmFzZSAoKSB7XHJcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxyXG4gICAgaWYgKGVbMV0pIHtcclxuICAgICAgY29uc29sZS5pbmZvKFxyXG4gICAgICAgIGBbQ09DN10gKCR7dGhpcy5wYXJlbnQ/Lm5hbWV9KSBFdmFsdWF0aW5nIHNraWxsICR7dGhpcy5uYW1lfToke3RoaXMuc3lzdGVtLmJhc2V9IHRvICR7ZVswXX1gXHJcbiAgICAgIClcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJhc2UnOiBlWzBdIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZVswXVxyXG4gIH1cclxuXHJcbiAgZ2V0IGJhc2UgKCkge1xyXG4gICAgY29uc3QgZSA9IHRoaXMuX2Jhc2VcclxuICAgIGlmIChlWzFdKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVbMF1cclxuICB9XHJcblxyXG4gIGdldEJ1bGxldExlZnQgKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmFtbW8pIHtcclxuICAgICAgdGhpcy5zZXRCdWxsZXRzKDApXHJcbiAgICAgIHJldHVybiAwXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYW1tb1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVsb2FkICgpIHtcclxuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxyXG4gICAgY29uc3QgbWF4QnVsbGV0ID0gdGhpcy5zeXN0ZW0uYnVsbGV0c1xyXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXHJcbiAgICAgIDogMVxyXG4gICAgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKG1heEJ1bGxldClcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldEJ1bGxldHMgKGJ1bGxldHMpIHtcclxuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmFtbW8nOiBidWxsZXRzIHx8IDAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZEJ1bGxldCAoKSB7XHJcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcclxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxyXG4gICAgY29uc3QgbWF4QnVsbGV0cyA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcclxuICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5idWxsZXRzKVxyXG4gICAgICA6IDFcclxuICAgIGlmIChidWxsZXRzICsgMSA+PSBtYXhCdWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0cylcclxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgKyAxKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2hvb3RCdWxsZXRzICh4KSB7XHJcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcclxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxyXG4gICAgaWYgKHggPiBidWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoMClcclxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgLSB4KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIG1lcmdlT3B0aW9uYWxTa2lsbHMgKHNraWxsTGlzdCwgb3B0aW9ucykge1xyXG4gICAgY29uc3Qgam9pbnRBcnJheSA9IHNraWxsTGlzdC5jb25jYXQob3B0aW9ucylcclxuICAgIHJldHVybiBqb2ludEFycmF5XHJcbiAgICAgIC5yZWR1Y2UoKG5ld0FycmF5LCBpdGVtKSA9PiB7XHJcbiAgICAgICAgLy8gSWYgc2tpbGwgaXMgbm90IGEgZ2VuZXJpYyBzcGVjIGFuZCBpcyBhbHJlYWR5IGluY2x1ZGVkIHdlIGRvbid0IGFkZCBpdGVtXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSAmJlxyXG4gICAgICAgICAgbmV3QXJyYXkuZmluZChza2lsbCA9PiBza2lsbC5uYW1lID09PSBpdGVtLm5hbWUpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3QXJyYXlcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxzZSBpdGVtIGlzIGFkZGVkXHJcbiAgICAgICAgcmV0dXJuIFsuLi5uZXdBcnJheSwgaXRlbV1cclxuICAgICAgfSwgW10pXHJcbiAgICAgIC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcclxuICB9XHJcblxyXG4gIC8qKiBUT0RPIDogcmllbiBhIGZhaXJlIGljaSAhIVxyXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXHJcbiAgICogQHJldHVybiB7QWN0b3J8bnVsbH0gICAgICAgICBUaGUgQWN0b3IgZW50aXR5IG9yIG51bGxcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBfZ2V0Q2hhdENhcmRBY3RvciAoY2FyZCkge1xyXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXHJcbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXHJcbiAgICBpZiAodG9rZW5LZXkpIHtcclxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxyXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xyXG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcclxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcclxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcclxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXHJcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XHJcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZC5kYXRhc2V0LmFjdG9ySWRcclxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkgfHwgbnVsbFxyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXBhcmUgYW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB1c2VkIHRvIGRpc3BsYXkgYSBjYXJkIGZvciB0aGUgSXRlbSBpbiB0aGUgY2hhdCBsb2dcclxuICAgKiBAcGFyYW0ge09iamVjdH0gaHRtbE9wdGlvbnMgICAgT3B0aW9ucyB1c2VkIGJ5IHRoZSBUZXh0RWRpdG9yLmVucmljaEhUTUwgZnVuY3Rpb25cclxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcclxuICAgKi9cclxuICBnZXRDaGF0RGF0YSAoaHRtbE9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gRm91bmRyeVZUVCB2MTBcclxuICAgIGh0bWxPcHRpb25zLmFzeW5jID0gZmFsc2VcclxuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0pXHJcbiAgICAvLyBGaXggOiBkYXRhIGNhbiBoYXZlIGRlc2NyaXB0aW9uIGRpcmVjdGx5IGluIGZpZWxkLCBub3QgdW5kZXIgdmFsdWUuXHJcbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgdmFsdWU6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgc3BlY2lhbDogJydcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJydcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSAnJ1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGFiZWxzID0gW11cclxuXHJcbiAgICAvLyBSaWNoIHRleHQgZGVzY3JpcHRpb25cclxuICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgIGh0bWxPcHRpb25zXHJcbiAgICApXHJcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEuZGVzY3JpcHRpb24udmFsdWUpXHJcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCxcclxuICAgICAgaHRtbE9wdGlvbnNcclxuICAgIClcclxuICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwpXHJcblxyXG4gICAgLy8gSXRlbSB0eXBlIHNwZWNpZmljIHByb3BlcnRpZXNcclxuICAgIGNvbnN0IHByb3BzID0gW11cclxuICAgIGNvbnN0IGZuID0gdGhpc1tgXyR7dGhpcy50eXBlfUNoYXREYXRhYF1cclxuICAgIGlmIChmbikgZm4uYmluZCh0aGlzKShkYXRhLCBsYWJlbHMsIHByb3BzLCBodG1sT3B0aW9ucylcclxuXHJcbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xyXG4gICAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXHJcbiAgICBkYXRhLnByb3BlcnRpZXMgPSBwcm9wcy5maWx0ZXIocCA9PiAhIXApXHJcbiAgICBkYXRhLmxhYmVscyA9IGxhYmVsc1xyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9XHJcblxyXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSBwcm9wcy5wdXNoKHZhbHVlKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBza2lsbExhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsJylcclxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xyXG4gICAgbGV0IGZvdW5kID0gZmFsc2VcclxuICAgIGlmICh0aGlzLnN5c3RlbS5za2lsbC5tYWluLmlkKSB7XHJcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpXHJcbiAgICAgIGlmIChza2lsbCkge1xyXG4gICAgICAgIHNraWxsTmFtZSArPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpXHJcbiAgICAgICAgZm91bmQgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB0aGlzLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XHJcbiAgICAgIHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxzJylcclxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcclxuICAgICAgaWYgKHNraWxsKSB7XHJcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHtDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpfWBcclxuICAgICAgICBmb3VuZCA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghZm91bmQpIHtcclxuICAgICAgc2tpbGxOYW1lID0gdGhpcy5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXHJcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xyXG4gICAgICAgIHNraWxsTmFtZSArPSBgLyR7dGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lfWBcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChza2lsbE5hbWUpIHtcclxuICAgICAgbGFiZWxzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IHNraWxsTGFiZWwsXHJcbiAgICAgICAgdmFsdWU6IHNraWxsTmFtZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGxhYmVscy5wdXNoKHtcclxuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvblVzZXNQZXJSb3VuZCcpLFxyXG4gICAgICB2YWx1ZTogdGhpcy51c2VzUGVyUm91bmRTdHJpbmdcclxuICAgIH0pXHJcblxyXG4gICAgbGFiZWxzLnB1c2goe1xyXG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcclxuICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uID8gdGhpcy5zeXN0ZW0ubWFsZnVuY3Rpb24gOiAnLSdcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJ1bGxldHMpIHtcclxuICAgICAgbGFiZWxzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcclxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYnVsbGV0c1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FuQmVQdXNoZWQgKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2gpIHJldHVybiB0cnVlXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldCBpbXBhbGUgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuaW1wbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzRG9kZ2UgKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIGZhbHNlXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cclxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRvZGdlU2tpbGxOYW1lJykudG9Mb3dlckNhc2UoKVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIEF1ZGlvSGVscGVyLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgZHVwbGljYXRlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgZ2V0Q29tcHV0ZWRTdHlsZSwgSXRlbSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCBUb2tlbiwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuL2RpY2UuanMnXHJcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXHJcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi9hY3RvcnMvYWN0b3IuanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3Q2hlY2sge1xyXG4gIGNvbnN0cnVjdG9yIChcclxuICAgIGFjdG9yID0gbnVsbCxcclxuICAgIHNraWxsID0gbnVsbCxcclxuICAgIGl0ZW0gPSBudWxsLFxyXG4gICAgZGljZU1vZCA9IDAsXHJcbiAgICBkaWZmaWN1bHR5ID0gbnVsbCxcclxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXHJcbiAgICBmbGF0RGljZU1vZGlmaWVyID0gMFxyXG4gICkge1xyXG4gICAgdGhpcy5hY3RvciA9IGFjdG9yXHJcbiAgICB0aGlzLnNraWxsID0gc2tpbGxcclxuICAgIHRoaXMuaXRlbSA9IGl0ZW1cclxuICAgIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcclxuICAgIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxyXG4gICAgdGhpcy5yYXdWYWx1ZSA9IDAgLy8gdmFsdWUgbmVlZGVkIGJlZm9yZSBkaWZmaWN1bHR5XHJcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG51bGxcclxuICAgIHRoaXMucmVmZXJlbmNlTWVzc2FnZUlkID0gbnVsbFxyXG4gICAgdGhpcy5wdXNoaW5nID0gZmFsc2VcclxuICAgIHRoaXMuZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcclxuICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXHJcblxyXG4gICAgaWYgKGRpZmZpY3VsdHkgPT09IG51bGwpIHtcclxuICAgICAgY29uc3QgaXNVbmtub3duID1cclxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xyXG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBpc1Vua25vd25cclxuICAgICAgICA/IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93blxyXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGNhcmRUeXBlICgpIHtcclxuICAgIHJldHVybiAncm9sbENhcmQnXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGRpZmZpY3VsdHlMZXZlbCAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1bmtub3duOiAtMSxcclxuICAgICAgcmVndWxhcjogMSxcclxuICAgICAgaGFyZDogMixcclxuICAgICAgZXh0cmVtZTogMyxcclxuICAgICAgY3JpdGljYWw6IDQsXHJcbiAgICAgIGltcG9zc2libGU6IDlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgc3VjY2Vzc0xldmVsICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGZ1bWJsZTogLTk5LFxyXG4gICAgICBmYWlsdXJlOiAwLFxyXG4gICAgICByZWd1bGFyOiAxLFxyXG4gICAgICBoYXJkOiAyLFxyXG4gICAgICBleHRyZW1lOiAzLFxyXG4gICAgICBjcml0aWNhbDogNFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCB0eXBlICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNoYXJhY3RlcmlzdGljOiAnY2hhcmFjdGVyaXN0aWMnLFxyXG4gICAgICBhdHRyaWJ1dGU6ICdhdHRyaWJ1dGUnLFxyXG4gICAgICBza2lsbDogJ2l0ZW0nLFxyXG4gICAgICBpdGVtOiAnaXRlbScsXHJcbiAgICAgIHZhbHVlOiAndmFsdWUnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZGlmZmljdWx0eVN0cmluZyAoZGlmZmljdWx0eUxldmVsKSB7XHJcbiAgICBzd2l0Y2ggKFxyXG4gICAgICAhaXNOYU4oTnVtYmVyKGRpZmZpY3VsdHlMZXZlbCkpXHJcbiAgICAgICAgPyBOdW1iZXIoZGlmZmljdWx0eUxldmVsKVxyXG4gICAgICAgIDogZGlmZmljdWx0eUxldmVsXHJcbiAgICApIHtcclxuICAgICAgY2FzZSAnPyc6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXHJcbiAgICAgIGNhc2UgJysnOlxyXG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxyXG4gICAgICBjYXNlICcrKyc6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXHJcbiAgICAgIGNhc2UgJysrKyc6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxyXG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxyXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcclxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxyXG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxyXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgcmF3VmFsdWUgKCkge1xyXG4gICAgLy8gaWYgKCF0aGlzLmFjdG9yIHx8ICF0aGlzLmFjdG9yLmlkKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSB7XHJcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XHJcbiAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5za2lsbCkgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcclxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XHJcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLl9yYXdWYWx1ZSkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcclxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmICh0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMSkgcmV0dXJuIDFcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllclxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgc2V0IHJhd1ZhbHVlICh4KSB7XHJcbiAgICB0aGlzLl9yYXdWYWx1ZSA9IHhcclxuICB9XHJcblxyXG4gIHNldCB1dWlkICh4KSB7XHJcbiAgICB0aGlzLl91dWlkID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IHV1aWQgKCkge1xyXG4gICAgaWYgKCF0aGlzLl91dWlkKSB0aGlzLl91dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcclxuICAgIHJldHVybiB0aGlzLl91dWlkXHJcbiAgfVxyXG5cclxuICBnZXQgaGFzQ2FyZCAoKSB7XHJcbiAgICBjb25zdCBjaGF0Q2FyZCA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgdGhpcy51dWlkID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndXVpZCcpICYmXHJcbiAgICAgICAgQ29DN0NoZWNrLmNhcmRUeXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpXHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgICBpZiAoY2hhdENhcmQubGVuZ3RoID4gMCkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd1ZhbHVlU3RyaW5nICgpIHtcclxuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxyXG4gICAgKSB7XHJcbiAgICAgIGlmICh0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA8IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyAnKycgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXHJcbiAgICAgIClcclxuICAgIH0gZWxzZSByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNyaXRpY2FsVGhyZXNob2xkICgpIHtcclxuICAgIHJldHVybiAxXHJcbiAgfVxyXG5cclxuICBnZXQgcmVndWxhclRocmVzaG9sZCAoKSB7XHJcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xyXG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSA+PSAxMDApIHJldHVybiA5OVxyXG4gICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5yYXdWYWx1ZSlcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgaGFyZFRocmVzaG9sZCAoKSB7XHJcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDIpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGV4dHJlbWVUaHJlc2hvbGQgKCkge1xyXG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHJldHVybiBNYXRoLmZsb29yKHRoaXMucmF3VmFsdWUgLyA1KVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBmdW1ibGVUaHJlc2hvbGQgKCkge1xyXG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcclxuICAgICAgaWYgKHRoaXMuZGlmZmljdWx0eSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kaWZmaWN1bHR5ID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWUgPCA1MCA/IDk2IDogMTAwXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IHN1Y2Nlc1RocmVzaG9sZCAoKSB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmhhcmRUaHJlc2hvbGRcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcclxuICAgICAgICAgIHJldHVybiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxyXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxyXG4gICAgICAgICAgcmV0dXJuIC0xXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiB0aGlzLnJhd1ZhbHVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBnZXQgZGlmZmljdWx0eVN0cmluZyAoKSB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcclxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcclxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmREaWZmaWN1bHR5JylcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcclxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcclxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XHJcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxyXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxyXG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gJydcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnXHJcbiAgfVxyXG5cclxuICBnZXQgbW9kaWZpZWRSZXN1bHQgKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLl9tb2RpZmllZFJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLl9tb2RpZmllZFJlc3VsdFxyXG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllcikge1xyXG4gICAgICBjb25zdCBtb2RpZmllZCA9IHRoaXMuZGljZXMudG90YWwgKyB0aGlzLmZsYXREaWNlTW9kaWZpZXJcclxuICAgICAgaWYgKG1vZGlmaWVkIDwgMSkgcmV0dXJuIDFcclxuICAgICAgaWYgKG1vZGlmaWVkID4gMTAwKSByZXR1cm4gMTAwXHJcbiAgICAgIHJldHVybiBtb2RpZmllZFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGljZXMudG90YWxcclxuICB9XHJcblxyXG4gIHNldCBtb2RpZmllZFJlc3VsdCAoeCkge1xyXG4gICAgdGhpcy5fbW9kaWZpZWRSZXN1bHQgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgZmxhdERpY2VNb2RpZmllclN0cmluZyAoKSB7XHJcbiAgICBpZiAoIXRoaXMuZmxhdERpY2VNb2RpZmllcikgcmV0dXJuIG51bGxcclxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gYCske3RoaXMuZmxhdERpY2VNb2RpZmllcn1gXHJcbiAgICByZXR1cm4gdGhpcy5mbGF0RGljZU1vZGlmaWVyLnRvU3RyaW5nKClcclxuICB9XHJcblxyXG4gIGdldCBpc0Z1bWJsZSAoKSB7XHJcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID49IHRoaXMuZnVtYmxlVGhyZXNob2xkXHJcbiAgfVxyXG5cclxuICBnZXQgaXNDcml0aWNhbCAoKSB7XHJcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMVxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzRXh0cmVtZVN1Y2Nlc3MgKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxyXG4gIH1cclxuXHJcbiAgZ2V0IHBhc3NlZCAoKSB7XHJcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGlmICh0aGlzLmx1Y2tTcGVudCkgcmV0dXJuIHRoaXMuZGlmZmljdWx0eSA8PSB0aGlzLnN1Y2Nlc3NMZXZlbFxyXG4gICAgcmV0dXJuIHRoaXMuc3VjY2VzVGhyZXNob2xkID49IHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgdGhpcy5pc0NyaXRpY2FsXHJcbiAgfVxyXG5cclxuICBnZXQgZmFpbGVkICgpIHtcclxuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgcmV0dXJuICF0aGlzLnBhc3NlZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzU2ltcGxlUm9sbCAoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMucmF3VmFsdWUgPT09ICd1bmRlZmluZWQnXHJcbiAgfVxyXG5cclxuICBnZXQgaGFzQm9udXMgKCkge1xyXG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc1BlbmFsdHkgKCkge1xyXG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyIDwgMCkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc01vZGlmaWVyICgpIHtcclxuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciAhPT0gMCkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpY2VNb2RpZmllciAoKSB7XHJcbiAgICBpZiAodGhpcy5fZGljZU1vZGlmaWVyKSByZXR1cm4gdGhpcy5fZGljZU1vZGlmaWVyXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgc2V0IGRpY2VNb2RpZmllciAoeCkge1xyXG4gICAgdGhpcy5fZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoeClcclxuICB9XHJcblxyXG4gIGdldCBuYW1lICgpIHtcclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XHJcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zaG9ydE5hbWVcclxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXHJcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyh0aGlzLmNoYXJhY3RlcmlzdGljKT8ubGFiZWxcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcclxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdsY2snKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxyXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGdldCBzaG9ydE5hbWUgKCkge1xyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcclxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxyXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcclxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcclxuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5zaG9ydFxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXHJcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGZ1bGxOYW1lICgpIHtcclxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPVxyXG4gICAgICB0aGlzLl9kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcclxuICAgICAgICA/IGZhbHNlXHJcbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxyXG4gICAgY29uc3QgbW9kaWZpZXIgPVxyXG4gICAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPiAwXHJcbiAgICAgICAgPyBgKyR7dGhpcy5fZGljZU1vZGlmaWVyfWBcclxuICAgICAgICA6IHRoaXMuX2RpY2VNb2RpZmllci50b1N0cmluZygpXHJcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgYENvQzcuTGlua0NoZWNrJHshZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XHJcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xyXG4gICAgICB9YCxcclxuICAgICAgeyBkaWZmaWN1bHR5LCBtb2RpZmllciwgbmFtZTogdGhpcy5uYW1lIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGdldCByb2xsZWQgKCkge1xyXG4gICAgaWYgKHRoaXMuZGljZSkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgY2hlY2sgZnJvbSBhbiBIVE1MRWxlbWVudCBvciBhIGNoYXQgY2FyZC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICBUaGUgSFRNTEVsZW1lbnQgdGhhdCBpcyBhIHJvbGwtcmVzdWx0IG9yIGEgY2hhdCBjYXJkIGNvbnRhaW5pbmcgYSBzaW5nbGUgcm9sbC1yZXN1bHQuXHJcbiAgICogQHJldHVybiB7Q29DN0NoZWNrfSAgICAgIEEgQ29DN0NoZWNrLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xyXG4gICAgY29uc3Qgcm9sbFJlc3VsdCA9IGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpXHJcbiAgICAgID8gY2FyZFxyXG4gICAgICA6IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcclxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyb2xsUmVzdWx0LCBjaGVjaylcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcclxuICAgIGNoZWNrLm1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxyXG4gICAgcmV0dXJuIGNoZWNrXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgcHVzaCAoY2FyZCwgcHVibGlzaCA9IHRydWUpIHtcclxuICAgIGNvbnN0IG9sZENoZWNrID0gQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpIC8vIFRPRE86IFJlZmFjdG9yaW5nXHJcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcclxuICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxyXG4gICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXHJcbiAgICBjb25zdCBza2lsbElkID0gY2FyZC5kYXRhc2V0LnNraWxsSWRcclxuICAgIGNvbnN0IGNoYXJhYyA9IGNhcmQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xyXG4gICAgY29uc3QgaXRlbUlkID0gY2FyZC5kYXRhc2V0Lml0ZW1JZFxyXG4gICAgY29uc3QgZGljZU1vZCA9IGNhcmQuZGF0YXNldC5kaWNlTW9kXHJcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gY2FyZC5kYXRhc2V0LmRpZmZpY3VsdHlcclxuXHJcbiAgICBsZXQgcHVzaGVkUm9sbFxyXG4gICAgaWYgKHNraWxsSWQpIHtcclxuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZCwgc2tpbGxJZCwgaXRlbUlkLCBkaWNlTW9kLCBkaWZmaWN1bHR5KVxyXG4gICAgfSBlbHNlIGlmIChjaGFyYWMpIHtcclxuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgICBwdXNoZWRSb2xsLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcclxuICAgICAgcHVzaGVkUm9sbC5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgICBwdXNoZWRSb2xsLmFjdG9yID0gYWN0b3JJZFxyXG4gICAgICBwdXNoZWRSb2xsLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjXHJcbiAgICB9IGVsc2UgcmV0dXJuXHJcbiAgICBpZiAob2xkQ2hlY2sudXVpZCkge1xyXG4gICAgICBwdXNoZWRSb2xsLmNvbnRleHQgPSBvbGRDaGVjay5jb250ZXh0XHJcbiAgICAgIHB1c2hlZFJvbGwudXVpZCA9IG9sZENoZWNrLnV1aWRcclxuICAgIH1cclxuICAgIGlmIChvbGRDaGVjay5wYXJlbnQpIHB1c2hlZFJvbGwucGFyZW50ID0gb2xkQ2hlY2sucGFyZW50XHJcbiAgICBwdXNoZWRSb2xsLnB1c2hpbmcgPSB0cnVlXHJcbiAgICBhd2FpdCBwdXNoZWRSb2xsLnJvbGwoKVxyXG4gICAgaWYgKHB1Ymxpc2gpIHB1c2hlZFJvbGwudG9NZXNzYWdlKHRydWUsIGNhcmQpXHJcbiAgfVxyXG5cclxuICBnZXQgdG9rZW4gKCkge1xyXG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXHJcbiAgfVxyXG5cclxuICBzZXQgYWN0b3IgKHgpIHtcclxuICAgIHRoaXMuYWN0b3JLZXkgPSB4XHJcbiAgICBpZiAoeCA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX2FjdG9yID0geFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoeCBpbnN0YW5jZW9mIEFjdG9yKSB7XHJcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICB0aGlzLl9hY3RvciA9IHhcclxuICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcclxuICAgICAgaWYgKHgudG9rZW4gJiYgeC50b2tlbi5zY2VuZSAmJiB4LnRva2VuLnNjZW5lLmlkKSB7XHJcbiAgICAgICAgdGhpcy5hY3RvcktleSA9IGAke3gudG9rZW4uc2NlbmUuaWR9LiR7eC50b2tlbi5pZH1gXHJcbiAgICAgIH0gZWxzZSB0aGlzLmFjdG9yS2V5ID0geC5pZCAvLyBSRUZBQ1RPUklORyAoMilcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHguaW5jbHVkZXMoJy4nKSkge1xyXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB4LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLl9hY3Rvci5uYW1lIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXHJcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuXHJcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxyXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm5cclxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSB0b2tlbi5hY3RvclxyXG4gICAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdG9rZW4ubmFtZVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHgpXHJcbiAgICB0aGlzLmFjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXHJcbiAgfVxyXG5cclxuICBnZXQgc3VjY2Vzc0xldmVsSWNvbnMgKCkge1xyXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHJldHVybiBudWxsXHJcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiBudWxsXHJcbiAgICBpZiAodGhpcy5zdWNjZXNzTGV2ZWwgPj0gdGhpcy5kaWZmaWN1bHR5KSB7XHJcbiAgICAgIGNvbnN0IGljb25zID0gW11cclxuICAgICAgZm9yIChcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgIGluZGV4IDwgdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxO1xyXG4gICAgICAgIGluZGV4KytcclxuICAgICAgKSB7XHJcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzQ3JpdGljYWwgPyAnbWVkYWwnIDogJ3N0YXInKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3NIaW50ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TdWNjZXNMZXZlbEhpbnQnLCB7XHJcbiAgICAgICAgdmFsdWU6IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNDcml0aWNhbCA/ICdjcml0aWNhbCcgOiAnc3VjY2VzcycsXHJcbiAgICAgICAgaGludDogc3VjY2Vzc0hpbnQsXHJcbiAgICAgICAgaWNvbnNcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaWNvbnMgPSBbXVxyXG4gICAgICBjb25zdCBzdWNjZXNzTGV2ZWwgPSB0aGlzLmlzRnVtYmxlID8gLTEgOiB0aGlzLnN1Y2Nlc3NMZXZlbFxyXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5kaWZmaWN1bHR5IC0gc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XHJcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzRnVtYmxlID8gJ3NrdWxsJyA6ICdzcGlkZXInKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGZhaWx1cmVIaW50ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWlsdXJlTGV2ZWxIaW50Jywge1xyXG4gICAgICAgIHZhbHVlOiB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWxcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0Z1bWJsZSA/ICdmdW1ibGUnIDogJ2ZhaWx1cmUnLFxyXG4gICAgICAgIGhpbnQ6IGZhaWx1cmVIaW50LFxyXG4gICAgICAgIGljb25zXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBpc0JsaW5kICgpIHtcclxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcclxuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxyXG4gIH1cclxuXHJcbiAgc2V0IGlzQmxpbmQgKHgpIHtcclxuICAgIHRoaXMuX2lzQmxpbmQgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgdW5rbm93bkRpZmZpY3VsdHkgKCkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsIHx8XHJcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSB8fFxyXG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUhhcmQgfHxcclxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmRpZmZpY3VsdHlcclxuICB9XHJcblxyXG4gIGdldCByb2xsTW9kZSAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcclxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxyXG4gIH1cclxuXHJcbiAgc2V0IHJvbGxNb2RlICh4KSB7XHJcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxyXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XHJcbiAgfVxyXG5cclxuICBzZXQgc2tpbGwgKHgpIHtcclxuICAgIHRoaXMuX3NraWxsID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxyXG4gICAgdGhpcy5za2lsbElkID0geFxyXG4gIH1cclxuXHJcbiAgc2V0IGl0ZW0gKHgpIHtcclxuICAgIHRoaXMuX2l0ZW0gPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXHJcbiAgICBpZiAodGhpcy5faXRlbT8udHlwZSA9PT0gJ3dlYXBvbicpIHtcclxuICAgICAgdGhpcy5pdGVtSWQgPSB4XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9pdGVtID0gdW5kZWZpbmVkXHJcbiAgICAgIHRoaXMuaXRlbUlkID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0SXRlbUZyb21JZCAoeCkge1xyXG4gICAgaWYgKHggPT0gbnVsbCkgcmV0dXJuIG51bGxcclxuICAgIGlmICh4IGluc3RhbmNlb2YgSXRlbSkgcmV0dXJuIHhcclxuICAgIGlmICh0aGlzLl9hY3RvcikgcmV0dXJuIHRoaXMuX2FjdG9yLml0ZW1zLmdldCh4KVxyXG4gICAgcmV0dXJuIGdhbWUuaXRlbXMuZ2V0KHgpXHJcbiAgfVxyXG5cclxuICBnZXQgYWN0b3IgKCkge1xyXG4gICAgaWYgKCF0aGlzLl9hY3RvciB8fCAhdGhpcy5fYWN0b3I/LmlkKSB7XHJcbiAgICAgIGlmICh0aGlzLmFjdG9yS2V5KSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxyXG4gICAgICBpZiAodGhpcy5hY3RvcklkKSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAgIGlmICghdGhpcy5fYWN0b3IpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgaXNEdW1teTogdHJ1ZSxcclxuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3JOYW1lID8gdGhpcy5hY3Rvck5hbWUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBpZDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgaW1nOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnLFxyXG4gICAgICAgICAgcG9ydHJhaXQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0b3IuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcclxuICAgICAgY29uc3QgYWN0b3IgPSBuZXcgQ29DQWN0b3IodGhpcy5fYWN0b3IpXHJcbiAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3JcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9hY3RvclxyXG4gIH1cclxuXHJcbiAgZ2V0IHNraWxsICgpIHtcclxuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5za2lsbElkKSB7XHJcbiAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5pdGVtKSB7XHJcbiAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCAmJiAhdGhpcy53ZWFwb25BbHRTa2lsbCkge1xyXG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkKVxyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgJiZcclxuICAgICAgICAgIHRoaXMud2VhcG9uQWx0U2tpbGxcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9za2lsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGl0ZW0gKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pdGVtICYmIHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHtcclxuICAgICAgdGhpcy5faXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1cclxuICB9XHJcblxyXG4gIGdldCBkaXNwbGF5UmVzdWx0VHlwZSAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCAoKSB7XHJcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJylcclxuICB9XHJcblxyXG4gIGdldCBkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiB0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxyXG4gIH1cclxuXHJcbiAgZ2V0IGRvbnREaXNwbGF5U3VjY2Vzc0xldmVsICgpIHtcclxuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiAhdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcclxuICB9XHJcblxyXG4gIGdldCBpbWFnZSAoKSB7XHJcbiAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuaW1nXHJcbiAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLmltZ1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGxpbmsgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0TGlua0VsZW1lbnQoKS5vdXRlckhUTUxcclxuICB9XHJcblxyXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xyXG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXHJcbiAgfVxyXG5cclxuICBnZXRMaW5rRWxlbWVudCAoY2xhc3NlcyA9IG51bGwpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIGNsczogWydjb2M3LWxpbmsnLCAnY29jNy1yb2xsJ10uY29uY2F0KGNsYXNzZXMpLFxyXG4gICAgICBkYXRhc2V0OiB7IGNoZWNrOiAnY2hlY2snIH0sXHJcbiAgICAgIGljb246IHRoaXMuaW1hZ2VcclxuICAgICAgICA/IGA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7dGhpcy5pbWFnZX0pXCI+PC9kaXY+YFxyXG4gICAgICAgIDogJzxpIGNsYXNzPVwiZmFzIGZhLWRpY2VcIj48L2k+JyxcclxuICAgICAgYmxpbmQ6IHRoaXMuaXNCbGluZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxyXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyF0aGlzLl9kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcclxuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXHJcbiAgICAgIH1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICBtb2RpZmllcjogdGhpcy5fZGljZU1vZGlmaWVyLFxyXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG4gICAgYS50aXRsZSA9IHRpdGxlXHJcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXHJcbiAgICBhLmlubmVySFRNTCA9IGAke2RhdGEuYmxpbmQgPyAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPicgOiAnJ30ke1xyXG4gICAgICBkYXRhLmljb25cclxuICAgIH0ke3RoaXMubmFtZX1gXHJcblxyXG4gICAgcmV0dXJuIGFcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGwgKGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXHJcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0ob3B0aW9ucylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIGNoZWNrIHdpdGggdGhlIHByb3ZpZGVkIGRhdGFcclxuICAgKiBQcm9jZXNzIHJvbGwgZGF0YSB0byBhIGZvcm1hdCB0aGF0IGNhbiBiZSBmZWQgdG8gY3JlYXRlKClcclxuICAgKiBAcGFyYW0geyp9IHJvbGxEYXRhIEEgcm9sbCBkYXRhIHN0cnVjdHVyZSBhcyByZXR1cm5lZCBieSBhY3Rvci5maW5kXHJcbiAgICogQHJldHVybnMgQSBjaGVjayB3aXRoIHRoZSByb2xsIGRhdGEgcHJvdmlkZWRcclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlRnJvbUFjdG9yUm9sbERhdGEgKHJvbGxEYXRhKSB7XHJcbiAgICBjb25zdCByb2xsID0ge31cclxuICAgIC8vIGNoZWNrIE1vZGlmaWVyXHJcbiAgICBpZiAocm9sbERhdGEuZGlmZmljdWx0eSkgcm9sbC5kaWZmaWN1bHR5ID0gcm9sbERhdGEuZGlmZmljdWx0eVxyXG4gICAgaWYgKHJvbGxEYXRhLmRpY2VNb2RpZmllcikgcm9sbC5kaWNlTW9kaWZpZXIgPSByb2xsRGF0YS5kaWNlTW9kaWZpZXJcclxuICAgIGlmIChyb2xsRGF0YS5kZW55UHVzaCA9PT0gdHJ1ZSkgcm9sbC5kZW55UHVzaCA9IHRydWVcclxuICAgIGlmIChyb2xsRGF0YS5mbGF0RGljZU1vZGlmaWVyKSB7XHJcbiAgICAgIHJvbGwuZmxhdERpY2VNb2RpZmllciA9IHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXJcclxuICAgIH1cclxuICAgIGlmIChyb2xsRGF0YS5mbGF0VGhyZXNob2xkTW9kaWZpZXIpIHtcclxuICAgICAgcm9sbC5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByb2xsRGF0YS5mbGF0VGhyZXNob2xkTW9kaWZpZXJcclxuICAgIH1cclxuICAgIC8vIEFjdG9yXHJcbiAgICBpZiAocm9sbERhdGEuYWN0b3I/LmFjdG9yS2V5KSByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEuYWN0b3IuYWN0b3JLZXlcclxuICAgIGVsc2UgaWYgKHJvbGxEYXRhLmFjdG9yPy5uYW1lKSByb2xsLmFjdG9yTmFtZSA9IHJvbGxEYXRhLmFjdG9yLm5hbWVcclxuICAgIC8vIENoZWNrIHR5cGVcclxuICAgIHN3aXRjaCAocm9sbERhdGEudHlwZSkge1xyXG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLmNoYXJhY3RlcmlzdGljOlxyXG4gICAgICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSByb2xsRGF0YS52YWx1ZT8ua2V5XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5hdHRyaWJ1dGU6XHJcbiAgICAgICAgcm9sbC5hdHRyaWJ1dGUgPSByb2xsRGF0YS52YWx1ZT8ua2V5XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5pdGVtOlxyXG4gICAgICAgIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS52YWx1ZS5hY3Rvci5hY3RvcktleVxyXG4gICAgICAgIGlmIChyb2xsRGF0YS52YWx1ZT8udHlwZSA9PT0gJ3NraWxsJykgcm9sbC5za2lsbCA9IHJvbGxEYXRhLnZhbHVlLmlkXHJcbiAgICAgICAgZWxzZSByb2xsLml0ZW0gPSByb2xsRGF0YS52YWx1ZS5pZFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuc2tpbGw6XHJcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XHJcbiAgICAgICAgcm9sbC5za2lsbCA9IHJvbGxEYXRhLnZhbHVlLmlkXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS52YWx1ZTpcclxuICAgICAgICByb2xsLmRpc3BsYXlOYW1lID0gcm9sbERhdGEudmFsdWUubmFtZVxyXG4gICAgICAgIHJvbGwucmF3VmFsdWUgPSByb2xsRGF0YS52YWx1ZS50aHJlc2hvbGRcclxuICAgICAgICBicmVha1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ29DN0NoZWNrLmNyZWF0ZShyb2xsKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZSAoe1xyXG4gICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcclxuICAgIGRpY2VNb2RpZmllciA9IG51bGwsXHJcbiAgICBhY3RvcktleSA9IG51bGwsXHJcbiAgICBjaGFyYWN0ZXJpc3RpYyA9IG51bGwsXHJcbiAgICBhdHRyaWJ1dGUgPSBudWxsLFxyXG4gICAgcmF3VmFsdWUgPSAwLFxyXG4gICAgaXRlbSA9IG51bGwsXHJcbiAgICBza2lsbCA9IG51bGwsXHJcbiAgICBmbGF0RGljZU1vZGlmaWVyID0gMCxcclxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXHJcbiAgICBkaXNwbGF5TmFtZSA9IG51bGwsXHJcbiAgICBhY3Rvck5hbWUgPSBudWxsLFxyXG4gICAgZGVueVB1c2ggPSB1bmRlZmluZWRcclxuICB9ID0ge30pIHtcclxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgaWYgKGRlbnlQdXNoID09PSB0cnVlKSBjaGVjay5kZW55UHVzaCA9IHRydWVcclxuICAgIGlmIChkaWNlTW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllclxyXG4gICAgaWYgKGZsYXREaWNlTW9kaWZpZXIpIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXHJcbiAgICBpZiAoZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XHJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxyXG4gICAgfVxyXG4gICAgaWYgKGRpc3BsYXlOYW1lKSBjaGVjay5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lXHJcbiAgICBpZiAoYWN0b3JLZXkpIGNoZWNrLmFjdG9yID0gYWN0b3JLZXlcclxuICAgIGlmIChhY3Rvck5hbWUpIGNoZWNrLmFjdG9yTmFtZSA9IGFjdG9yTmFtZVxyXG4gICAgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkgY2hlY2sucmF3VmFsdWUgPSBOdW1iZXIocmF3VmFsdWUpXHJcbiAgICBpZiAoY2hlY2suYWN0b3IgJiYgIWNoZWNrLmFjdG9yLmlzRHVtbXkpIHtcclxuICAgICAgLy8gVE9ETyA6IEFkZCBjaGVjayBmb3IgdmFsaWRpdHkgb2YgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSwgc2tpbGxJZFxyXG4gICAgICBpZiAoc2tpbGwpIGNoZWNrLnNraWxsID0gc2tpbGxcclxuICAgICAgLy8gVE9ETyA6IHRyeSByZXRyaWV2ZSBza2lsbCBieSBuYW1lXHJcbiAgICAgIGVsc2UgaWYgKGNoYXJhY3RlcmlzdGljKSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljXHJcbiAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZSkgY2hlY2suYXR0cmlidXRlID0gYXR0cmlidXRlXHJcbiAgICAgIGVsc2UgaWYgKGl0ZW0pIGNoZWNrLml0ZW0gPSBpdGVtXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hlY2tcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoY2hhciwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XHJcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXHJcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgdGhpcy5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJcclxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGxBdHRyaWJ1dGUgKGF0dHJpYiwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XHJcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXHJcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgdGhpcy5hdHRyaWJ1dGUgPSBhdHRyaWJcclxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcclxuICB9XHJcblxyXG4gIGFzeW5jIHJvbGxWYWx1ZSAodmFsLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcclxuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcclxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XHJcbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsXHJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXHJcbiAgfVxyXG5cclxuICBnZXQgcm9sbGVkU3VjY2Vzc0xldmVsICgpIHtcclxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NMZXZlbFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX3BlcmZvcm0gKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgdGhpcy5kaWNlID1cclxuICAgICAgb3B0aW9ucy5yb2xsIHx8XHJcbiAgICAgIChhd2FpdCBDb0M3RGljZS5yb2xsKHRoaXMuZGljZU1vZGlmaWVyLCB0aGlzLnJvbGxNb2RlLCB0aGlzLmlzQmxpbmQpKVxyXG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiAhZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xyXG4gICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy5mb3JjZURTTikge1xyXG4gICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRpY2Uucm9sbClcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRpY2VzID0ge1xyXG4gICAgICB0ZW5zOiBbXSxcclxuICAgICAgdW5pdDoge1xyXG4gICAgICAgIHZhbHVlOiB0aGlzLmRpY2UudW5pdC50b3RhbFxyXG4gICAgICB9LFxyXG4gICAgICB0b3RhbDogdGhpcy5kaWNlLnRvdGFsLFxyXG4gICAgICB0ZW5SZXN1bHQ6IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsLFxyXG4gICAgICBoYXNCb251czogISF0aGlzLmRpY2VNb2RpZmllcixcclxuICAgICAgYm9udXM6IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSxcclxuICAgICAgYm9udXNUeXBlOlxyXG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDwgMFxyXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllclBlbmFsdHknKVxyXG4gICAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJyksXHJcbiAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1heCA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAwIDogOTBcclxuICAgIGNvbnN0IG1pbiA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAgOiAwXHJcbiAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmRpY2UudG90YWwgLSB0aGlzLmRpY2UudW5pdC50b3RhbFxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaWNlLnRlbnMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBkaWUgPSB7fVxyXG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXHJcbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XHJcbiAgICAgICAgc2VsZWN0ZWQgPSAxMDFcclxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXHJcbiAgICAgICAgaWYgKHRoaXMuZGljZXMuaGFzQm9udXMpIHtcclxuICAgICAgICAgIGRpZS5pc01heCA9IHRydWVcclxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRpZS5pc01pbiA9IHRydWVcclxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxyXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcclxuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtaW4pIGRpZS5pc01pbiA9IHRydWVcclxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYoIGRpZS52YWx1ZSA9PSAxMDApIGRpZS52YWx1ZSA9IFwiMDBcIjtcclxuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29tcHV0ZUNoZWNrICgpIHtcclxuICAgIHRoaXMuaXNVbmtub3duID0gdGhpcy51bmtub3duRGlmZmljdWx0eVxyXG5cclxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXIpIHtcclxuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlIYXJkKSB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcclxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUpIHtcclxuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCkge1xyXG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50ZW5Pbmx5T25lRGllID0gdGhpcy5kaWNlcy50ZW5zLmxlbmd0aCA9PT0gMVxyXG5cclxuICAgIHRoaXMuaXNWYWx1ZSA9IGZhbHNlXHJcbiAgICB0aGlzLmlzQ2hhcmFjdGlyaXN0aWMgPSBmYWxzZVxyXG4gICAgdGhpcy5pc1NraWxsID0gZmFsc2VcclxuICAgIHRoaXMuaXNJdGVtID0gZmFsc2VcclxuICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSBmYWxzZVxyXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSB7XHJcbiAgICAgIHRoaXMuZGVueVB1c2ggPSB0cnVlXHJcbiAgICAgIHRoaXMuZGVueUx1Y2sgPSB0cnVlXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IgPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLmlzVmFsdWUgPSB0cnVlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xyXG4gICAgICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IHRydWVcclxuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cclxuICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5za2lsbCkge1xyXG4gICAgICAgIHRoaXMuaXNTa2lsbCA9IHRydWVcclxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcclxuICAgICAgICB0aGlzLmlzQXR0cmlidXRlID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcclxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5yYXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5oYXJkVGhyZXNob2xkKSB7XHJcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmRcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQpIHtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yYXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5mdW1ibGVUaHJlc2hvbGQgPD0gdGhpcy5tb2RpZmllZFJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XHJcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XHJcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkU3VjY2VzcycpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XHJcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxyXG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxyXG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRnVtYmxlJylcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcclxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHtcclxuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSAnJ1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1NpbXBsZVJvbGwpIHtcclxuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc3NSZXF1aXJlZCcsIHtcclxuICAgICAgICBzdWNjZXNzUmVxdWlyZWQ6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XHJcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1Vua25vd24gJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XHJcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gdGhpcy5mYWlsZWRcclxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0aGlzLnBhc3NlZFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaGFzTWFsZnVuY3Rpb24gPSBmYWxzZVxyXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcclxuXHJcbiAgICBpZiAodGhpcy5pdGVtKSB7XHJcbiAgICAgIHRoaXMuaXNJdGVtID0gdHJ1ZVxyXG4gICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbikge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIE51bWJlcih0aGlzLm1vZGlmaWVkUmVzdWx0KSA+PSBOdW1iZXIodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbilcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuaGFzTWFsZnVuY3Rpb24gPSB0cnVlXHJcbiAgICAgICAgICB0aGlzLm1hbGZ1bmN0aW9uVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYWxmdW5jdGlvbicsIHtcclxuICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaXRlbS5uYW1lXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZUl0ZW1GbGFnKENvQzdJdGVtLmZsYWdzLm1hbGZ1bmN0aW9uKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgdGhpcy5jYW5CZVB1c2hlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdGhpcy5jYW5CZVB1c2hlZCA9IHRoaXMuc2tpbGwgPyB0aGlzLnNraWxsLmNhbkJlUHVzaGVkKCkgOiBmYWxzZVxyXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYyAhPSBudWxsKSB0aGlzLmNhbkJlUHVzaGVkID0gdHJ1ZVxyXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXHJcbiAgICAgIGlmICh0aGlzLmRlbnlQdXNoKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuZGVueUx1Y2sgJiYgdGhpcy5hY3Rvcikge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXRoaXMubHVja1NwZW50ICYmXHJcbiAgICAgICAgIXRoaXMucGFzc2VkICYmXHJcbiAgICAgICAgIXRoaXMuaXNGdW1ibGUgJiZcclxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgJiZcclxuICAgICAgICAhdGhpcy51bmtub3duRGlmZmljdWx0eVxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAodGhpcy5za2lsbCB8fCB0aGlzLmNoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgICAgICBjb25zdCBsdWNrTmVlZGVkID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuc3VjY2VzVGhyZXNob2xkXHJcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci5sdWNrID4gbHVja05lZWRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhc0Vub3VnaEx1Y2sgPSB0cnVlXHJcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZCA9IGx1Y2tOZWVkZWRcclxuICAgICAgICAgICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XHJcbiAgICAgICAgICAgICAgbHVja05lZWRlZFZhbHVlOiBsdWNrTmVlZGVkXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMubHVja1NwZW50KSB7XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxyXG5cclxuICAgICAgICAvLyBDYW4ndCBzcGVuZCBsdWNrIG9uIHB1c2hlZCByb2xscy5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAhdGhpcy5wdXNoaW5nICYmXHJcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ2xjaycgJiZcclxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnc2FuJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnVua25vd25EaWZmaWN1bHR5ICYmXHJcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxyXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICAgJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgLy8gUkVGQUNUT1JJTkcgKDEpXHJcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXHJcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVja1xyXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xyXG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyICYmXHJcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmhhcmRUaHJlc2hvbGRcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxyXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxyXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCAvLyBSRUZBQ1RPUklORyAoMSlcclxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuaGFyZFRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcclxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXHJcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgJiZcclxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XHJcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgICAnQ29DNy5FeHRyZW1lRGlmZmljdWx0eSdcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxyXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5leHRyZW1lVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxyXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2sgLy8gUkVGQUNUT1JJTkcgKDEpXHJcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoID4gMFxyXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FuQXdhcmRFeHBlcmllbmNlID1cclxuICAgICAgdGhpcy5za2lsbCAmJiAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxyXG5cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5wYXNzZWQgJiZcclxuICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPD0gMCAmJlxyXG4gICAgICB0aGlzLnNraWxsICYmXHJcbiAgICAgICF0aGlzLnNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLm5veHBnYWluICYmXHJcbiAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxyXG4gICAgICAhdGhpcy5mb3JjZWQgJiZcclxuICAgICAgIXRoaXMuaXNCbGluZCAmJlxyXG4gICAgICAhdGhpcy5pc1Vua25vd25cclxuICAgICkge1xyXG4gICAgICB0aGlzLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBhcmVudCkge1xyXG4gICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLnBhcmVudClcclxuICAgICAgaWYgKHBhcmVudCAmJiAndXBkYXRlUm9sbCcgaW4gcGFyZW50KSB7XHJcbiAgICAgICAgYXdhaXQgcGFyZW50LnVwZGF0ZVJvbGwodGhpcy5KU09OUm9sbFN0cmluZylcclxuICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBSb2xsICR7dGhpcy51dWlkfSBkZXBlbmRzIG9mICR7dGhpcy5wYXJlbnR9YClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hvd0RpY2VSb2xsICgpIHtcclxuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XHJcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cclxuICAgICAgZm9yIChjb25zdCBkaWVSZXN1bHQgb2YgdGhpcy5kaWNlcy50ZW5zKSB7XHJcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcclxuICAgICAgfVxyXG4gICAgICBkaWNlUmVzdWx0cy5wdXNoKHRoaXMuZGljZXMudW5pdC52YWx1ZSlcclxuXHJcbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xyXG4gICAgICAgIGZvcm11bGE6IGAke3RoaXMuZGljZXMudGVucy5sZW5ndGh9ZDEwMCsxZDEwYCxcclxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcclxuICAgICAgICB3aGlzcGVyOiBudWxsLFxyXG4gICAgICAgIGJsaW5kOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgY3NzQ2xhc3MgKCkge1xyXG4gICAgbGV0IGNzc0NsYXNzID0gJydcclxuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnc3VjY2VzcydcclxuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnZmFpbHVyZSdcclxuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdzdWNjZXNzIGNyaXRpY2FsJ1xyXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdmYWlsdXJlIGZ1bWJsZSdcclxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGNzc0NsYXNzICs9ICcgcmVndWxhci1zdWNjZXNzJ1xyXG4gICAgfVxyXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgY3NzQ2xhc3MgKz0gJyBoYXJkLXN1Y2Nlc3MnXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBjc3NDbGFzcyArPSAnIGV4dHJlbWUtc3VjY2VzcydcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY3NzQ2xhc3NcclxuICB9XHJcblxyXG4gIGdldCBjc3NDbGFzc0xpc3QgKCkge1xyXG4gICAgY29uc3QgY3NzQ2xhc3MgPSBbXVxyXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJylcclxuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScpXHJcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycsICdjcml0aWNhbCcpXHJcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnLCAnZnVtYmxlJylcclxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGNzc0NsYXNzLnB1c2goJ3JlZ3VsYXItc3VjY2VzcycpXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBjc3NDbGFzcy5wdXNoKCdoYXJkLXN1Y2Nlc3MnKVxyXG4gICAgfVxyXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgY3NzQ2xhc3MucHVzaCgnZXh0cmVtZS1zdWNjZXNzJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY3NzQ2xhc3NcclxuICB9XHJcblxyXG4gIGdldCBwbGF5ZXJDc3NDbGFzcyAoKSB7XHJcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MgfHwgdGhpcy5mb3JjZWRTdWNjZXNzKSByZXR1cm4gJ3N1Y2Nlc3MnXHJcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUgfHwgdGhpcy5mb3JjZWRGYWlsdXJlKSByZXR1cm4gJ2ZhaWx1cmUnXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBncmFkZUNoZWNrICh1cGdyYWRlaW5kZXgsIHVwZGF0ZSA9IHRydWUpIHtcclxuICAgIGNvbnN0IGluY3JlYXNlZFN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzc1t1cGdyYWRlaW5kZXhdXHJcbiAgICBjb25zdCBsdWNrQW1vdW50ID1cclxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KSB8fFxyXG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tUb1NwZW5kKSAvLyBSRUZBQ1RPUklORyAoMSlcclxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcclxuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxyXG4gICAgICA/IDBcclxuICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxyXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxyXG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID1cclxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpIHx8XHJcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MuZGlmZmljdWx0eSkgLy8gUkVGQUNUT1JJTkcgKDEpXHJcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxyXG4gICAgaWYgKHRoaXMuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcclxuICAgIH1cclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB1cGdyYWRlaW5kZXggKyAxOyBpbmRleCsrKSB7XHJcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xyXG4gICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcclxuICAgIH1cclxuICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxyXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxyXG4gICAgaWYgKHVwZGF0ZSkgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlVXBncmFkZXMgKCkge1xyXG4gICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxyXG4gICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxyXG4gICAgdGhpcy5sdWNrTmVlZGVkID0gMFxyXG4gICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gbnVsbFxyXG4gICAgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICBmb3JjZVBhc3MgKGx1Y2tBbW91bnQgPSBudWxsLCB1cGRhdGUgPSB0cnVlKSB7XHJcbiAgICBpZiAobHVja0Ftb3VudCkge1xyXG4gICAgICB0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KVxyXG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHRoaXMuZGlmZmljdWx0eVxyXG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcclxuICAgICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcclxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcclxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxyXG4gICAgICAgID8gMFxyXG4gICAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcclxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxyXG4gICAgICB0aGlzLmNvbXB1dGVDaGVjaygpXHJcbiAgICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5mb3JjZWQgPSB0cnVlXHJcbiAgICAgIHRoaXMuZm9yY2VkU3VjY2VzcyA9IHRydWVcclxuICAgICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIsIHVwZGF0ZSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSwgdXBkYXRlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb3JjZUZhaWwgKHVwZGF0ZSA9IHRydWUpIHtcclxuICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxyXG4gICAgdGhpcy5mb3JjZWRGYWlsdXJlID0gdHJ1ZVxyXG4gICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XHJcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlLCB1cGRhdGUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSAtIDEsIHVwZGF0ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9mb3JjZUNoZWNrIChoaWdoLCBsb3csIHVwZGF0ZSA9IHRydWUpIHtcclxuICAgIGxldCB0b3RhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChoaWdoIC0gbG93KSkgKyBsb3cgKyAxXHJcbiAgICBjb25zdCB1bml0VG90YWwgPSB0b3RhbCAlIDEwXHJcbiAgICBsZXQgdGVuVG90YWwgPSBNYXRoLmZsb29yKHRvdGFsIC8gMTApXHJcbiAgICBjb25zdCB0ZW5zID0gW11cclxuXHJcbiAgICBsZXQgaGFzRW5vdWdoID0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpID09PSB0ZW5zLmxlbmd0aFxyXG4gICAgd2hpbGUgKCFoYXNFbm91Z2gpIHtcclxuICAgICAgbGV0IHRlbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxyXG4gICAgICBsZXQgcm9sbCA9IHRlbiAqIDEwICsgdW5pdFRvdGFsXHJcbiAgICAgIGlmIChyb2xsID09PSAwKSB7XHJcbiAgICAgICAgcm9sbCA9IDEwMFxyXG4gICAgICAgIHRlbiA9IDEwMFxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmhhc1BlbmFsdHkgJiYgcm9sbCA8PSBoaWdoKSB7XHJcbiAgICAgICAgdGVucy5wdXNoKHRlbilcclxuICAgICAgICBpZiAocm9sbCA+IHRvdGFsKSB0b3RhbCA9IHJvbGxcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5oYXNCb251cyAmJiByb2xsID4gbG93KSB7XHJcbiAgICAgICAgdGVucy5wdXNoKHRlbilcclxuICAgICAgICBpZiAocm9sbCA8IHRvdGFsKSB0b3RhbCA9IHJvbGxcclxuICAgICAgfVxyXG4gICAgICBoYXNFbm91Z2ggPSB0ZW5zLmxlbmd0aCA9PT0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5zZXJ0IHJlc3VsdCBhdCByYW5kb20gcG9zaXRpb24uXHJcbiAgICBpZiAodGVuVG90YWwgPT09IDEwICYmIHVuaXRUb3RhbCA9PT0gMCkge1xyXG4gICAgICB0ZW5Ub3RhbCA9IDEwMFxyXG4gICAgfVxyXG4gICAgdGVucy5zcGxpY2UoXHJcbiAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlbnMubGVuZ3RoICsgMSksXHJcbiAgICAgIDAsXHJcbiAgICAgIHRlblRvdGFsID09PSAxMCA/IDAgOiB0ZW5Ub3RhbFxyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuZGljZXMudGVucyA9IFtdXHJcbiAgICB0aGlzLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0VG90YWxcclxuICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPSB0b3RhbFxyXG4gICAgdGhpcy5kaWNlcy50b3RhbCA9IHRvdGFsXHJcbiAgICB0aGlzLmRpY2VzLnRlblJlc3VsdCA9IHRvdGFsIC0gdW5pdFRvdGFsXHJcblxyXG4gICAgY29uc3QgbWF4ID0gdW5pdFRvdGFsID09PSAwID8gMTAwIDogOTBcclxuICAgIGNvbnN0IG1pbiA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwIDogMFxyXG4gICAgbGV0IHNlbGVjdGVkID0gdG90YWwgLSB1bml0VG90YWxcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZGllID0ge31cclxuICAgICAgZGllLnZhbHVlID0gdGVuc1tpXVxyXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xyXG4gICAgICAgIHNlbGVjdGVkID0gMTAxXHJcbiAgICAgICAgZGllLnNlbGVjdGVkID0gdHJ1ZVxyXG4gICAgICAgIGlmICh0aGlzLmhhc0JvbnVzKSB7XHJcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXHJcbiAgICAgICAgICBkaWUuaXNNaW4gPSBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXHJcbiAgICAgICAgICBkaWUuaXNNYXggPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtYXgpIGRpZS5pc01heCA9IHRydWVcclxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXHJcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXHJcbiAgICAgICAgZWxzZSBkaWUuaXNNaW4gPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XHJcbiAgICAgIHRoaXMuZGljZXMudGVucy5wdXNoKGRpZSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXHJcbiAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcclxuICB9XHJcblxyXG4gIGZvcmNlU3VjY2Vzc0xldmVsIChzdWNjZXNzTGV2ZWwsIHVwZGF0ZSA9IHRydWUpIHtcclxuICAgIGxldCBoaWdoLCBsb3dcclxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSAxMDBcclxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSBzdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XHJcbiAgICAgICAgaGlnaCA9IDEwMFxyXG4gICAgICB9IGVsc2UgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxyXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcclxuICAgIH1cclxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXHJcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxyXG4gICAgfVxyXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcclxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSBzdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxyXG4gICAgICBsb3cgPSAxXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSAxXHJcbiAgICAgIGxvdyA9IDBcclxuICAgIH1cclxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXHJcbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxyXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcclxuICB9XHJcblxyXG4gIGluY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XHJcbiAgICBsZXQgaGlnaCwgbG93XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcclxuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XHJcbiAgICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcclxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXHJcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxyXG4gICAgfVxyXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxyXG4gICAgICBsb3cgPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBoaWdoID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxyXG4gICAgICBsb3cgPSAwXHJcbiAgICB9XHJcbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxyXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcclxuICB9XHJcblxyXG4gIGRlY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XHJcbiAgICBsZXQgaGlnaCwgbG93XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBoaWdoID0gMTAwXHJcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxyXG4gICAgfVxyXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcclxuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxyXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcclxuICAgIH1cclxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcclxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXHJcbiAgICB9XHJcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xyXG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXHJcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxyXG4gICAgfVxyXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XHJcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcclxuICAgICAgbG93ID0gMVxyXG4gICAgfVxyXG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcclxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXHJcbiAgfVxyXG5cclxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcclxuICAgIHRoaXMuZmxhZ2dlZEZvckRldmVsb3BtZW50ID0gdHJ1ZVxyXG4gICAgaWYgKHRoaXMuc2tpbGwpIGF3YWl0IHRoaXMuc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXHJcbiAgfVxyXG5cclxuICBzZXQgZGlmZmljdWx0eSAoeCkge1xyXG4gICAgdGhpcy5fZGlmZmljdWx0eSA9IHBhcnNlSW50KHgpXHJcbiAgfVxyXG5cclxuICBnZXQgZGlmZmljdWx0eSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlmZmljdWx0eVxyXG4gIH1cclxuXHJcbiAgc2V0IGZsYXZvciAoeCkge1xyXG4gICAgdGhpcy5fZmxhdm9yID0geFxyXG4gIH1cclxuXHJcbiAgc2V0IGNvbnRleHQgKHgpIHtcclxuICAgIHRoaXMuX2NvbnRleHQgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgY29udGV4dCAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2NvbnRleHQpIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0XHJcbiAgfVxyXG5cclxuICBzZXQgcGFyZW50ICh4KSB7XHJcbiAgICBpZiAoIXRoaXMudXVpZCkgdGhpcy51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcclxuICAgIHRoaXMucGFyZW50VXVpZCA9IHhcclxuICB9XHJcblxyXG4gIGdldCBwYXJlbnQgKCkge1xyXG4gICAgaWYgKCF0aGlzLnBhcmVudFV1aWQpIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiB0aGlzLnBhcmVudFV1aWRcclxuICB9XHJcblxyXG4gIGdldCBmbGF2b3IgKCkge1xyXG4gICAgaWYgKHRoaXMuX2ZsYXZvcikgcmV0dXJuIHRoaXMuX2ZsYXZvclxyXG4gICAgbGV0IGZsYXZvciA9ICcnXHJcbiAgICBpZiAodGhpcy5hY3Rvcj8uc3lzdGVtKSB7XHJcbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XHJcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMuc2tpbGwubmFtZSxcclxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxyXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLml0ZW0pIHtcclxuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkl0ZW1DaGVja1Jlc3VsdCcsIHtcclxuICAgICAgICAgIGl0ZW06IHRoaXMuaXRlbS5uYW1lLFxyXG4gICAgICAgICAgc2tpbGw6IHRoaXMuc2tpbGwubmFtZSxcclxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxyXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcclxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxyXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xyXG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XHJcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcclxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XHJcbiAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXHJcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmbGF2b3IpIHtcclxuICAgICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xyXG4gICAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jhd1ZhbHVlJywge1xyXG4gICAgICAgICAgICByYXd2YWx1ZTogdGhpcy5yYXdWYWx1ZSxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnB1c2hpbmcpIHtcclxuICAgICAgZmxhdm9yID0gYCR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QdXNoaW5nJyl9ICR7Zmxhdm9yfWBcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmxhdm9yXHJcbiAgfVxyXG5cclxuICBnZXQgdG9vbHRpcEhlYWRlciAoKSB7XHJcbiAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcclxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xyXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcclxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxyXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSArIGAgKCR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWV9JSlgXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XHJcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcclxuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXHJcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcclxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSArXHJcbiAgICAgICAgYCAoJHt0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWV9JSlgXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnNraWxsKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcclxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XHJcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcclxuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXHJcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSArIGAgKCR7dGhpcy5za2lsbC52YWx1ZX0lKWBcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcclxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xyXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcclxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSArIGAgKCR7dGhpcy5yYXdWYWx1ZVN0cmluZ30lKWBcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEh0bWxSb2xsRWxlbWVudCAob3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXHJcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBtZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcclxuICAgIGlmIChodG1sKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRIdG1sUm9sbCAob3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXHJcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBtZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcclxuICAgIHJldHVybiBodG1sIHx8IHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdG9NZXNzYWdlIChwdXNoaW5nID0gZmFsc2UpIHtcclxuICAgIC8vIElmIGNhcmQgaXMgcHJvdmlkZWQgYXR0dGFjaGVkIHRoZSByb2xsIHRvIHRoZSBjYXJkLiBJZiBVUklEIHByb3ZpZGVkIGF0dGFjaCBhdCB0aGlzIHBvc2l0aW9uLj9cclxuICAgIHRoaXMucHVzaGluZyA9IHB1c2hpbmdcclxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xyXG5cclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcclxuXHJcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XHJcbiAgICBsZXQgc3BlYWtlclxyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcclxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikge1xyXG4gICAgICAgIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlbi5kb2N1bWVudFxyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IuaXNEdW1teSkge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdG9yLm5hbWUpIHNwZWFrZXIgPSB7IGFsaWFzOiB0aGlzLmFjdG9yLm5hbWUgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxyXG4gICAgICB9XHJcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yPy51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXHJcblxyXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XHJcbiAgICAgIHVzZXI6IHVzZXIuaWQsXHJcbiAgICAgIHNwZWFrZXIsXHJcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXHJcbiAgICAgIGNvbnRlbnQ6IGh0bWwsXHJcbiAgICAgIGZsYWdzOiB7XHJcbiAgICAgICAgQ29DNzoge1xyXG4gICAgICAgICAgdHlwZTogQ29DN0NoZWNrLmNhcmRUeXBlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMudXVpZCkgY2hhdERhdGEuZmxhZ3MuQ29DNy51dWlkID0gdGhpcy51dWlkXHJcbiAgICBpZiAodGhpcy5jb250ZXh0KSBjaGF0RGF0YS5mbGFncy5Db0M3LmNvbnRleHQgPSB0aGlzLmNvbnRleHRcclxuXHJcbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykge1xyXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICBjaGF0RGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXHJcbiAgICAgICAgY2hhdERhdGEuZmxhdm9yID0gYFske3RoaXMuYWN0b3IubmFtZX1dICR7Y2hhdERhdGEuZmxhdm9yfWBcclxuICAgICAgICBjaGF0RGF0YS5mbGFncyA9IHtcclxuICAgICAgICAgIENvQzc6IHtcclxuICAgICAgICAgICAgR01TZWxmUm9sbDogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGNoYXREYXRhLnNwZWFrZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICBjaGF0RGF0YS5mbGFncy5Db0M3Lm9yaWdpbmFsU3BlYWtlciA9IGR1cGxpY2F0ZShjaGF0RGF0YS5zcGVha2VyKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0JykpIHtcclxuICAgICAgICAgICAgY2FzZSAnb3duZXJzJzpcclxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSB0aGlzLmFjdG9yLm93bmVyc1xyXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBjYXNlICdldmVyeW9uZSc6XHJcbiAgICAgICAgICAgICAgZGVsZXRlIGNoYXREYXRhLnNwZWFrZXJcclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gZ2FtZS51c2Vycy5wbGF5ZXJzXHJcbiAgICAgICAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSlcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XHJcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcclxuXHJcbiAgICAvLyBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKCBjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSk7XHJcbiAgICBpZiAodGhpcy5kaWNlPy5yb2xsICYmICF0aGlzLmRpY2U/LmhpZGVEaWNlKSB7XHJcbiAgICAgIGNoYXREYXRhLnJvbGwgPSB0aGlzLmRpY2Uucm9sbFxyXG4gICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTExcclxuICAgICAgY2hhdERhdGEucm9sbE1vZGUgPSB0aGlzLmlzQmxpbmQgPyAnYmxpbmRyb2xsJyA6IHRoaXMucm9sbE1vZGVcclxuICAgIH1cclxuXHJcbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcclxuICAgICAgcmV0dXJuIG1zZ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSBtYWtlUHVibGljICBXaWxsIGNoYW5nZSB0aGUgcm9sbCBtb2RlIHRvIHB1YmxpY1xyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IG1ha2VQdWJsaWMgPSBmYWxzZSwgZm9yY2VSb2xsID0gZmFsc2UgfSA9IHt9KSB7XHJcbiAgICBpZiAobWFrZVB1YmxpYykgdGhpcy5yb2xsTW9kZSA9IGZhbHNlIC8vIHJlc2V0IHJvbGwgbW9kZVxyXG5cclxuICAgIGNvbnN0IGNoYXREYXRhID0geyBmbGF2b3I6IHRoaXMuZmxhdm9yIH1cclxuXHJcbiAgICBpZiAobWFrZVB1YmxpYykge1xyXG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gW11cclxuICAgICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxyXG4gICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhKVxyXG4gICAgfSAvLyBlbHNlIHtcclxuICAgIC8vIGNoYXREYXRhLndoaXNwZXIgPSBbXVxyXG4gICAgLy8gY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxyXG4gICAgLy8gQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcclxuICAgIC8vIH1cclxuXHJcbiAgICBpZiAoY2hhdERhdGEuYmxpbmQpIHtcclxuICAgICAgdGhpcy5pc0JsaW5kID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxyXG4gICAgbGV0IG5ld0NvbnRlbnQgPSBodG1sXHJcblxyXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuICQucGFyc2VIVE1MKGh0bWwpWzBdIC8vIElmIG5vIG1lc3NhZ2VJZCByZXR1cm4gdGhlIEhUTUxFbGVtZW50IGNvbnRhaW5pbmcgdGhlIHJvbGwuXHJcbiAgICAvLyBJZiBubyBtZXNzYWdlSWRcclxuXHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuY29udGVudClbMF1cclxuICAgIGlmICghaHRtbE1lc3NhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpKSB7XHJcbiAgICAgIGNvbnN0IGh0bWxDaGVjayA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXHJcbiAgICAgIGNvbnN0IHJvbGxSZXN1bHRFbGVtZW50ID0gaHRtbE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcclxuICAgICAgaWYgKHJvbGxSZXN1bHRFbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgcm9sbFJlc3VsdEVsZW1lbnQucmVwbGFjZVdpdGgoaHRtbENoZWNrKVxyXG4gICAgICB9XHJcbiAgICAgIG5ld0NvbnRlbnQgPSBodG1sTWVzc2FnZS5vdXRlckhUTUxcclxuICAgIH1cclxuXHJcbiAgICBjaGF0RGF0YS5jb250ZW50ID0gbmV3Q29udGVudFxyXG5cclxuICAgIGlmIChDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTCA9PT0gbWVzc2FnZS50eXBlKSB7XHJcbiAgICAgIGlmIChtZXNzYWdlLndoaXNwZXI/Lmxlbmd0aCkge1xyXG4gICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxyXG4gICAgICB9IGVsc2UgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxyXG4gICAgfVxyXG5cclxuICAgIGlmIChmb3JjZVJvbGwgJiYgdGhpcy5kaWNlPy5yb2xsICYmIChnYW1lLnVzZXIuaXNHTSB8fCAhdGhpcy5pc0JsaW5kKSkge1xyXG4gICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRpY2Uucm9sbClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZShjaGF0RGF0YSlcclxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxyXG4gICAgcmV0dXJuIG1zZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcclxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXHJcbiAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gZmFsc2VcclxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSBmYWxzZVxyXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IGZhbHNlXHJcbiAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IGZhbHNlXHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlSZWd1bGFyJykge1xyXG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5SGFyZCcpIHtcclxuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUV4dHJlbWUnKSB7XHJcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlDcml0aWNhbCcpIHtcclxuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxyXG4gICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHRvb2x0aXAgKCkge1xyXG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxyXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL3JvbGwtdG9vbHRpcC5odG1sJyxcclxuICAgICAgdGhpc1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGlubGluZUNoZWNrICgpIHtcclxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUtY2hlY2snKVxyXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWNoZWNrLXJlc3VsdCcpXHJcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2NvYzctaW5saW5lJylcclxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzTGlzdClcclxuICAgIGEudGl0bGUgPSB0aGlzLnRvb2x0aXBIZWFkZXJcclxuICAgIGEuZGF0YXNldC5yb2xsID0gZXNjYXBlKHRoaXMuSlNPTlJvbGxTdHJpbmcpIC8vIFRPRE8hSU1QT1JUQU5UISEhXHJcbiAgICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPiAke1xyXG4gICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8ICc/PydcclxuICAgIH1gXHJcbiAgICByZXR1cm4gYVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJvbGxUb29sVGlwICgpIHtcclxuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGNvbnN0IHBhcnRzID0gW11cclxuICAgIGNvbnN0IHRlbnMgPSB0aGlzLmRpY2VzLnRlbnMubWFwKHIgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3VsdDogci52YWx1ZSxcclxuICAgICAgICBzZWxlY3RlZDogci5zZWxlY3RlZCxcclxuICAgICAgICBjbGFzc2VzOiBbXHJcbiAgICAgICAgICAnZGllJyxcclxuICAgICAgICAgICdkMTAnLFxyXG4gICAgICAgICAgIXIuc2VsZWN0ZWQgPyAnZGlzY2FyZGVkJyA6IG51bGwsXHJcbiAgICAgICAgICByLmlzTWluID8gJ21pbicgOiBudWxsLFxyXG4gICAgICAgICAgci5pc01heCA/ICdtYXgnIDogbnVsbFxyXG4gICAgICAgIF1cclxuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjKVxyXG4gICAgICAgICAgLmpvaW4oJyAnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgY29uc3QgdW5pdCA9IFtcclxuICAgICAge1xyXG4gICAgICAgIHJlc3VsdDogdGhpcy5kaWNlcy51bml0LnZhbHVlLFxyXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgIGNsYXNzZXM6ICdkaWUgZDEwJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcblxyXG4gICAgcGFydHMucHVzaCh7XHJcbiAgICAgIGZvcm11bGE6IHRoaXMudG9vbHRpcEhlYWRlcixcclxuICAgICAgdG90YWw6IHRoaXMubW9kaWZpZWRSZXN1bHQsXHJcbiAgICAgIGljb25zOiB0aGlzLnN1Y2Nlc3NMZXZlbEljb25zLFxyXG4gICAgICBjbGFzczogdGhpcy5jc3NDbGFzcyxcclxuICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCxcclxuICAgICAgcmVzdWx0VHlwZTogdGhpcy5yZXN1bHRUeXBlLFxyXG4gICAgICBmYWNlOiAxMCxcclxuICAgICAgcm9sbHM6IFsuLi50ZW5zLCAuLi51bml0XVxyXG4gICAgfSlcclxuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcclxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXHJcbiAgICAgIHsgcGFydHMgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0IEpTT05Sb2xsRGF0YSAoKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLkpTT05Sb2xsU3RyaW5nKVxyXG4gIH1cclxuXHJcbiAgZ2V0IEpTT05Sb2xsU3RyaW5nICgpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xyXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbSddXHJcbiAgICAgIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZyb21EYXRhIChkYXRhKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgQ29DN0NoZWNrKCksIGRhdGEpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZnJvbVJvbGxTdHJpbmcgKGRhdGFTdHJpbmcpIHtcclxuICAgIGxldCBkYXRhXHJcbiAgICB0cnkge1xyXG4gICAgICBkYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShkYXRhU3RyaW5nKSlcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlKVxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIENvQzdDaGVjay5mcm9tRGF0YShkYXRhKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGFsdGVyIChjaGVjaywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcclxuICAgICAgY2FzZSAndXNlTHVjayc6IHtcclxuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcclxuICAgICAgICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0Lmx1Y2tBbW91bnQpXHJcbiAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudCwgb3B0aW9ucy51cGRhdGUpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMudGFyZ2V0LmRhdGFzZXQuaW5kZXgpXHJcbiAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4LCBvcHRpb25zLnVwZGF0ZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcclxuICAgICAgICBjaGVjay5mb3JjZVBhc3MobnVsbCwgb3B0aW9ucy51cGRhdGUpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcclxuICAgICAgICBjaGVjay5mb3JjZUZhaWwob3B0aW9ucy51cGRhdGUpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcclxuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xyXG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKG9wdGlvbnMudXBkYXRlKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcclxuICAgICAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcclxuICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGZhbHNlXHJcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcclxuICAgICAgICBpZiAob3B0aW9ucy51cGRhdGUpIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcclxuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcclxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxyXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgJ3B1c2gnOiB7XHJcbiAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxyXG4gICAgICAgIGNoZWNrLnB1c2hpbmcgPSB0cnVlXHJcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBfb25DbGlja0lubGluZVJvbGwgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG5cclxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1jaGVjay1yZXN1bHQnKSkge1xyXG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcclxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9jb2xsYXBzZUlubGluZVJlc3VsdChhKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX2NvbGxhcHNlSW5saW5lUmVzdWx0IChhKSB7XHJcbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWlubGluZS1jaGVjaycpKSByZXR1cm5cclxuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxyXG4gICAgY29uc3QgdG9vbHRpcCA9IGEucXVlcnlTZWxlY3RvcignLmNvYzctY2hlY2stdG9vbHRpcCcpXHJcbiAgICBpZiAodG9vbHRpcCkgdG9vbHRpcC5yZW1vdmUoKVxyXG4gICAgcmV0dXJuIGEuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIF9leHBhbmRJbmxpbmVSZXN1bHQgKGEpIHtcclxuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxyXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSByZXR1cm5cclxuXHJcbiAgICAvLyBDcmVhdGUgYSBuZXcgdG9vbHRpcFxyXG4gICAgY29uc3QgY2hlY2sgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICBuZXcgQ29DN0NoZWNrKCksXHJcbiAgICAgIEpTT04ucGFyc2UodW5lc2NhcGUoYS5kYXRhc2V0LnJvbGwpKVxyXG4gICAgKSAvLyBUT0RPIDogZmluZCBzdHJpbmdpZnkgdW5lc2NhcGUgISEgMjAyMTAyMDVcclxuICAgIGlmIChjaGVjay5zdGFuZGJ5KSByZXR1cm5cclxuXHJcbiAgICBjb25zdCB0aXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdGlwLmlubmVySFRNTCA9IGF3YWl0IGNoZWNrLnJvbGxUb29sVGlwXHJcblxyXG4gICAgLy8gQWRkIHRoZSB0b29sdGlwXHJcbiAgICBjb25zdCB0b29sdGlwID0gdGlwLmNoaWxkcmVuWzBdXHJcbiAgICBhLmFwcGVuZENoaWxkKHRvb2x0aXApXHJcbiAgICBhLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJylcclxuXHJcbiAgICAvLyBTZXQgdGhlIHBvc2l0aW9uXHJcbiAgICBjb25zdCBwYSA9IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuICAgIGNvbnN0IHB0ID0gdG9vbHRpcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG4gICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5taW4oXHJcbiAgICAgIHBhLngsXHJcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gKHB0LndpZHRoICsgMylcclxuICAgICl9cHhgXHJcbiAgICB0b29sdGlwLnN0eWxlLnRvcCA9IGAke01hdGgubWluKFxyXG4gICAgICBwYS55ICsgcGEuaGVpZ2h0ICsgMyxcclxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gKHB0LmhlaWdodCArIDMpXHJcbiAgICApfXB4YFxyXG4gICAgY29uc3QgemkgPSBnZXRDb21wdXRlZFN0eWxlKGEpLnpJbmRleFxyXG4gICAgdG9vbHRpcC5zdHlsZS56SW5kZXggPSBOdW1iZXIuaXNOdW1lcmljKHppKSA/IHppICsgMSA6IDEwMFxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBTYW5EYXRhRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuICAgIGh0bWwuZmluZCgnOmNoZWNrYm94JykuY2xpY2soKCkgPT4gdGhpcy5fdG9nZ2xlSW5wdXQoaHRtbCkpXHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlSW5wdXQgKGh0bWwpIHtcclxuICAgIGh0bWwuZmluZCgnKltuYW1lPVwiY3VzdG9tbmFtZVwiXScpLnRvZ2dsZSgpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcclxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9zYW5kYXRhLmh0bWwnLFxyXG4gICAgICBvcHRpb25zXHJcbiAgICApXHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXHJcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTYW5EYXRhRGlhbG9nKHtcclxuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxyXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcclxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3cnKSwgLy8gVE9ETzogUmVtb3ZlIFNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZFxyXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXHJcbiAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgVmFsaWRhdGU6IHtcclxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XHJcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2FuLWRhdGEtZm9ybScpKVxyXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0OiAnVmFsaWRhdGUnLFxyXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxyXG4gICAgICB9KVxyXG4gICAgICBkbGcucmVuZGVyKHRydWUpXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXHJcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzJ1xyXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcclxuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vcm9sbC1kaWFsb2cuanMnXHJcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xyXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXHJcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xyXG5pbXBvcnQgeyBTYW5EYXRhRGlhbG9nIH0gZnJvbSAnLi9zYW5kYXRhLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2xpbmsuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0NoYXRNZXNzYWdlIHtcclxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9BVFRSSUJVVEUgKCkge1xyXG4gICAgcmV0dXJuICdSL0FUJ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMgKCkge1xyXG4gICAgcmV0dXJuICdSL0NIJ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ09NQkFUICgpIHtcclxuICAgIHJldHVybiAnUi9DTydcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX1NLSUxMICgpIHtcclxuICAgIHJldHVybiAnUi9TSydcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0VOQ09VTlRFUiAoKSB7XHJcbiAgICByZXR1cm4gJ1IvRUMnXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9DT01CSU5FRCAoKSB7XHJcbiAgICByZXR1cm4gJ0MvQ08nXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9HUk9VUCAoKSB7XHJcbiAgICByZXR1cm4gJ0MvR1InXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9OT1JNQUwgKCkge1xyXG4gICAgcmV0dXJuICdDL05PJ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfT1BQT1NFRCAoKSB7XHJcbiAgICByZXR1cm4gJ0MvT1AnXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9TQU5fQ0hFQ0sgKCkge1xyXG4gICAgcmV0dXJuICdDL1NDJ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9ORSAoKSB7XHJcbiAgICByZXR1cm4gJ0MvTk8nXHJcbiAgfVxyXG5cclxuICAvLyBzdGF0aWMgZ2V0IFJPTExfVE9fQ0hBVCAoKSB7XHJcbiAgLy8gICByZXR1cm4gJ1IvQ0gnXHJcbiAgLy8gfVxyXG5cclxuICAvLyBzdGF0aWMgZ2V0IFJPTExfVE9fQ0xJUEJPQVJEICgpIHtcclxuICAvLyAgIHJldHVybiAnUi9DTCdcclxuICAvLyB9XHJcblxyXG4gIHN0YXRpYyBjYXJkVHlwZXMgKGNvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQpIHtcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuICAgIGNvbnN0IHNlbGVjdCA9IHtcclxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXTogJ0NvQzcuUmVndWxhclJvbGxDYXJkJyxcclxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURdOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJyxcclxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRF06ICdDb0M3Lk9wcG9zZWRSb2xsQ2FyZCdcclxuICAgICAgLy8gW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfR1JPVVBdOiAnQ29DNy5Hcm91cFJvbGxDYXJkJyAtIE5ZSVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICBjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFICYmXHJcbiAgICAgIGNvbmZpZy5hdHRyaWJ1dGUgPT09ICdzYW4nXHJcbiAgICApIHtcclxuICAgICAgc2VsZWN0W0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXSA9ICdDb0M3LlNhbml0eUxvc3NFbmNvdW50ZXInXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VsZWN0XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbm9ybWFsaXplUmVxdWVzdCAob3B0aW9ucykge1xyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgdHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgIHR5cGVvZiBvcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSKVxyXG4gICAgKSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lsbElkICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmIChvcHRpb25zLmFjdG9yLml0ZW1zLmdldChvcHRpb25zLnNraWxsSWQpKSB7XHJcbiAgICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY29uc3Qgc2tpbGxJZHMgPSBvcHRpb25zLmFjdG9yLmdldFNraWxsc0J5TmFtZShvcHRpb25zLnNraWxsTmFtZSlcclxuICAgICAgICBpZiAoc2tpbGxJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgb3B0aW9ucy5za2lsbElkID0gc2tpbGxJZHNbMF0uaWRcclxuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBbJ2xjaycsICdzYW4nXS5pbmNsdWRlcyhvcHRpb25zLmF0dHJpYnV0ZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1tcclxuICAgICAgICAgIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcclxuICAgICAgICBdICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICApIHtcclxuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgdHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgIHR5cGVvZiBvcHRpb25zLnJvbGxUeXBlID09PSAndW5kZWZpbmVkJ1xyXG4gICAgKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xyXG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsJylcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICAhW1xyXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORUQsXHJcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUCxcclxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcclxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQsXHJcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcclxuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLmNhcmRUeXBlKVxyXG4gICAgKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xyXG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckludmFsaWRDYXJkVHlwZScpXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgIVtcclxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxyXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXHJcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXHJcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVJcclxuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLnJvbGxUeXBlKVxyXG4gICAgKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xyXG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckludmFsaWRSb2xsVHlwZScpXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxyXG4gICAgICAgIHNoaWZ0S2V5OiBvcHRpb25zLmZhc3RGb3J3YXJkID8/IG9wdGlvbnMuZXZlbnQ/LnNoaWZ0S2V5ID8/IG9wdGlvbnMuZmFzdEZvcndhcmQgPz8gZmFsc2UsXHJcbiAgICAgICAgYWx0S2V5OiBvcHRpb25zLmV2ZW50Py5hbHRLZXkgPz8gZmFsc2UsXHJcbiAgICAgICAgaXNDdHJsS2V5OiBpc0N0cmxLZXkob3B0aW9ucy5ldmVudCA/PyBmYWxzZSksXHJcbiAgICAgICAgY3JlYXRlRW5jb3VudGVyOiBvcHRpb25zLmNyZWF0ZUVuY291bnRlciA/PyBmYWxzZSxcclxuICAgICAgICBvcGVuTGlua1Rvb2w6IG9wdGlvbnMub3BlbkxpbmtUb29sID8/IGZhbHNlLFxyXG4gICAgICAgIHNlbmRUb0NoYXQ6IG9wdGlvbnMuc2VuZFRvQ2hhdCA/PyBmYWxzZSxcclxuICAgICAgICBzZW5kVG9DbGlwYm9hcmQ6IG9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID8/IGZhbHNlLFxyXG4gICAgICAgIGlzQ29tYmF0OlxyXG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdjb21iYXQnKSA/PyBmYWxzZSxcclxuICAgICAgICBwcmV2ZW50U3RhbmRieTogb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA/PyBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBkaWFsb2dPcHRpb25zOiB7XHJcbiAgICAgICAgcm9sbFR5cGU6IG9wdGlvbnMucm9sbFR5cGUsXHJcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXHJcbiAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICBjaGF0TWVzc2FnZTogb3B0aW9ucy5jaGF0TWVzc2FnZSA/PyB0cnVlLFxyXG4gICAgICAgIGZvcmNlZENhcmRUeXBlOiBvcHRpb25zLmZvcmNlZENhcmRUeXBlID8/IGZhbHNlLFxyXG4gICAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUpIHtcclxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMOlxyXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUM6XHJcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEU6XHJcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XHJcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuc2tpbGxJZCA9XHJcbiAgICAgICAgICBvcHRpb25zLnNraWxsSWQgPz9cclxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaXRlbUlkID1cclxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5pdGVtSWRcclxuICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9XHJcbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljID8/XHJcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xyXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9XHJcbiAgICAgICAgICBvcHRpb25zLmF0dHJpYnV0ZSA/P1xyXG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXHJcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXHJcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9XHJcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQgPz9cclxuICAgICAgICAgIG9wdGlvbnMuYWN0b3IuaWRcclxuICAgICAgICBjb25maWcub3B0aW9ucy50b2tlbktleSA9XHJcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQgPz9cclxuICAgICAgICAgIG9wdGlvbnMuYWN0b3IudG9rZW5LZXlcclxuICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbCA9XHJcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWx0ZXJuYXRpdi1za2lsbCcpXHJcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IgPSBvcHRpb25zLmFjdG9yXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwgJiZcclxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ29tYmF0XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KGNvbmZpZy5vcHRpb25zLml0ZW1JZClcclxuICAgICAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWUgPSBpdGVtLm5hbWVcclxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICAgICh0eXBlb2YgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvciA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckFjdG9yJylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxyXG4gICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XHJcbiAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAhZ2FtZS51c2VyLmlzR00gJiZcclxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbXHJcbiAgICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcclxuICAgICAgICAgICAgXT8udmFsdWVcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxyXG4gICAgICAgICAgICAhY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXVxyXG4gICAgICAgICAgICAgID8udmFsdWVcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLldlYXBvbicpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuYWx0S2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lciA9XHJcbiAgICAgICAgICBjb25maWcub3B0aW9ucy5hY3Rvci5oYXNQbGF5ZXJPd25lciA/PyBmYWxzZVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PVxyXG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPVxyXG4gICAgICAgICAgICBjb25maWcub3B0aW9ucy5pc0N0cmxLZXlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZhbHNlXHJcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdERpY2VNb2RpZmllciA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gMFxyXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHkgPVxyXG4gICAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5ID8/XHJcbiAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsW1xyXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JylcclxuICAgICAgICAgIF1cclxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gMFxyXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDBcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbmZpZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHRyaWdnZXIgKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgY29uc3QgY29uZmlnID0gQ29DN0NoYXRNZXNzYWdlLm5vcm1hbGl6ZVJlcXVlc3Qob3B0aW9ucylcclxuICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICAoY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5KSAmJlxyXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxyXG4gICAgICBbXHJcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXHJcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcclxuICAgICAgXS5pbmNsdWRlcyhjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSlcclxuICAgICkge1xyXG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlTGluayhjb25maWcpXHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2hhdCB8fCBjb25maWcub3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQgfHwgY29uZmlnLm9wdGlvbnMub3BlbkxpbmtUb29sIHx8IGNvbmZpZy5vcHRpb25zLmNyZWF0ZUVuY291bnRlcikgJiZcclxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcclxuICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FID09PSBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkpIHtcclxuICAgICAgICBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlUm9sbChjb25maWcpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIENvQzdDaGF0TWVzc2FnZS5ydW5Sb2xsKGNvbmZpZylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVMaW5rIChjb25maWcpIHtcclxuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUpIHtcclxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcclxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxyXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUOlxyXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XHJcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29uc3QgbGlua0RhdGEgPSB7XHJcbiAgICAgICAgICAgIGNoZWNrOiAnY2hlY2snLFxyXG4gICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgIGhhc1BsYXllck93bmVyOiBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lcixcclxuICAgICAgICAgICAgYWN0b3JLZXk6IGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxyXG4gICAgICAgICAgICBmb3JjZU1vZGlmaWVyczogY29uZmlnLm9wdGlvbnMuc2hpZnRLZXlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBsaW5rRGF0YS50eXBlID0gJ3NraWxsJ1xyXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLnNraWxsSWRcclxuICAgICAgICAgICAgKT8uc2hvcnROYW1lXHJcbiAgICAgICAgICAgIGlmICghbGlua0RhdGEubmFtZSkgcmV0dXJuXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cclxuICAgICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxpbmtEYXRhLnR5cGUgPSAnY2hhcmFjdGVyaXN0aWMnXHJcbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XHJcbiAgICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKChjb25maWcub3B0aW9ucy5hbHRLZXkgfHwgY29uZmlnLm9wdGlvbnMuY3JlYXRlRW5jb3VudGVyKSAmJiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPT09ICdzYW4nKSB7XHJcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSAnc2FubG9zcydcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsaW5rRGF0YS50eXBlID0gJ2F0dHJpYnV0ZSdcclxuICAgICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gJ2l0ZW0nXHJcbiAgICAgICAgICAgIGxpbmtEYXRhLnR5cGUgPSAnd2VhcG9uJ1xyXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMud2VhcG9uTmFtZVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XHJcbiAgICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSAnc2FubG9zcydcclxuICAgICAgICAgICAgbGlua0RhdGEuc2FuTWluID0gY29uZmlnLm9wdGlvbnMuYWN0b3I/LnN5c3RlbT8uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcclxuICAgICAgICAgICAgbGlua0RhdGEuc2FuTWF4ID0gY29uZmlnLm9wdGlvbnMuYWN0b3I/LnN5c3RlbT8uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXHJcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhblJlYXNvbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlPy5sZW5ndGhcclxuICAgICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXHJcbiAgICAgICAgICAgICAgOiBjb25maWcub3B0aW9ucy5hY3Rvci5uYW1lXHJcbiAgICAgICAgICAgIGxpbmtEYXRhLnRva2VuS2V5ID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuYWN0b3JLZXlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XHJcbiAgICAgICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQpIHtcclxuICAgICAgICAgICAgQ29DN0xpbmsuZnJvbURhdGEobGlua0RhdGEpLnRoZW4obGluayA9PiBsaW5rLnNlbmRUb0NoYXQoKSlcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkKSB7XHJcbiAgICAgICAgICAgIENvQzdMaW5rLmZyb21EYXRhKGxpbmtEYXRhKS50aGVuKGxpbmsgPT4gbGluay5zZW5kVG9DbGlwYm9hcmQoKSlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuZnJvbUxpbmtEYXRhKGxpbmtEYXRhKS50aGVuKGRsZyA9PlxyXG4gICAgICAgICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZVJvbGwgKGNvbmZpZykge1xyXG4gICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShjb25maWcuZGlhbG9nT3B0aW9ucylcclxuICAgIGlmICh1c2FnZSkge1xyXG4gICAgICBjb25zdCBjYXJkVHlwZSA9IHVzYWdlLmdldCgnY2FyZFR5cGUnKVxyXG4gICAgICBpZiAoY2FyZFR5cGUpIHtcclxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9IGNhcmRUeXBlXHJcbiAgICAgIH1cclxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcclxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcclxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllciA9IE51bWJlcihcclxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKVxyXG4gICAgICApXHJcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcclxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBydW5Sb2xsIChjb25maWcpIHtcclxuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpIHtcclxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDSzpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCBzYW5EYXRhID0gYXdhaXQgU2FuRGF0YURpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBwcm9tcHRMYWJlbDogdHJ1ZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGlmIChzYW5EYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBzYW5NaW4gPSBzYW5EYXRhLmdldCgnc2FuTWluJykgfHwgMFxyXG4gICAgICAgICAgICBsZXQgc2FuTWF4ID0gc2FuRGF0YS5nZXQoJ3Nhbk1heCcpIHx8IDBcclxuICAgICAgICAgICAgY29uc3Qgc2FuUmVhc29uID0gc2FuRGF0YS5nZXQoJ3NhblJlYXNvbicpXHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NaW4pKSkgc2FuTWluID0gTnVtYmVyKHNhbk1pbilcclxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWF4KSkpIHNhbk1heCA9IE51bWJlcihzYW5NYXgpXHJcblxyXG4gICAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKFxyXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxyXG4gICAgICAgICAgICAgIHsgc2FuTWluLCBzYW5NYXgsIHNhblJlYXNvbiB9LFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNhbk1vZGlmaWVyOiBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllcixcclxuICAgICAgICAgICAgICAgIHNhbkRpZmZpY3VsdHk6IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgICAgICBmYXN0Rm9yd2FyZDogY29uZmlnLm9wdGlvbnMuc2hpZnRLZXlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTDoge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXJcclxuICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eVxyXG4gICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XHJcbiAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcclxuICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcclxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllclxyXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllclxyXG4gICAgICAgIGNoZWNrLnN0YW5kYnkgPVxyXG4gICAgICAgICAgIWNvbmZpZy5vcHRpb25zLnByZXZlbnRTdGFuZGJ5ICYmXHJcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcclxuICAgICAgICAgIGdhbWUudXNlci5pc0dNICYmXHJcbiAgICAgICAgICBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lclxyXG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xyXG4gICAgICAgICAgY2hlY2suc2tpbGwgPSBjb25maWcub3B0aW9ucy5za2lsbElkXHJcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2hhdE1lc3NhZ2UpIHtcclxuICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZXN1bHQ6IGNoZWNrLm1vZGlmaWVkUmVzdWx0LFxyXG4gICAgICAgICAgc3VjY2Vzc0xldmVsOiBjaGVjay5yb2xsZWRTdWNjZXNzTGV2ZWwsXHJcbiAgICAgICAgICBpc0Z1bWJsZTogY2hlY2suaXNGdW1ibGUsXHJcbiAgICAgICAgICBpc0NyaXRpY2FsOiBjaGVjay5pc0NyaXRpY2FsLFxyXG4gICAgICAgICAgc3VjY2Vzc0xldmVsczoge1xyXG4gICAgICAgICAgICAxOiBjaGVjay5yZWd1bGFyVGhyZXNob2xkLFxyXG4gICAgICAgICAgICAyOiBjaGVjay5oYXJkVGhyZXNob2xkLFxyXG4gICAgICAgICAgICAzOiBjaGVjay5leHRyZW1lVGhyZXNob2xkXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcGFzc2VkOiBjaGVjay5wYXNzZWRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQ6XHJcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRDpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcclxuICAgICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3RvcklkXHJcbiAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcclxuICAgICAgICAgIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcclxuICAgICAgICAgIGNoZWNrLmF0dHJpYnV0ZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxyXG4gICAgICAgICAgY2hlY2suc2tpbGxJZCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcclxuICAgICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxyXG4gICAgICAgICAgY2hlY2suaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXHJcbiAgICAgICAgICBsZXQgZGF0YSA9IHt9XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBkYXRhID0ge1xyXG4gICAgICAgICAgICAgIHR5cGU6IE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxyXG4gICAgICAgICAgICAgIGNvbWJhdDogY29uZmlnLm9wdGlvbnMuaXNDb21iYXQsXHJcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBjb25maWcub3B0aW9ucy5pdGVtSWRcclxuICAgICAgICAgICAgY2hlY2sud2VhcG9uQWx0U2tpbGwgPSBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbFxyXG4gICAgICAgICAgICBjaGVjay5kZW55UHVzaCA9IHRydWUgLy8gT3Bwb3NlZCByb2xsZWQgY2FuJ3QgYmUgcHVzaGVkLlxyXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0ge1xyXG4gICAgICAgICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcclxuICAgICAgICAgICAgICBhY3Rpb246ICduZXcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRhdGEucm9sbCA9IGNoZWNrLkpTT05Sb2xsRGF0YVxyXG4gICAgICAgICAgZGF0YS5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmNhcmRUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cclxuXHJcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4vY29jNy1jaGF0LW1lc3NhZ2UuanMnXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFJvbGxEaWFsb2cge1xyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xyXG4gICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbCA9IHt9XHJcbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xyXG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLnVua25vd24gPSB0cnVlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XHJcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9IHRydWVcclxuICAgICAgfVxyXG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcclxuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5oYXJkID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xyXG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGlmKCB1bmRlZmluZWQgPT0gb3B0aW9ucy5hc2tWYWx1ZSkgb3B0aW9ucy5hc2tWYWx1ZSA9IHRydWU7XHJcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXHJcbiAgICBjb25zdCB1bmtub3duRGlmZmljdWx0eURlZmF1bHQgPVxyXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgYWxsb3dGbGF0RGljZU1vZGlmaWVyOlxyXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicpICYmXHJcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXHJcbiAgICAgIGFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyOlxyXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJykgJiZcclxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxyXG4gICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLFxyXG4gICAgICB1bmtub3duRGlmZmljdWx0eURlZmF1bHQsXHJcbiAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlLFxyXG4gICAgICBvcHRpb25zXHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAoIW9wdGlvbnMuZm9yY2VkQ2FyZFR5cGUgPz8gdHJ1ZSlcclxuICAgICkge1xyXG4gICAgICBkYXRhLmNhcmRUeXBlcyA9IENvQzdDaGF0TWVzc2FnZS5jYXJkVHlwZXMob3B0aW9ucylcclxuICAgIH1cclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcclxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9ib251cy5odG1sJyxcclxuICAgICAgZGF0YVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXHJcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xyXG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXHJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcclxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzU2VsZWN0aW9uV2luZG93JyksXHJcbiAgICAgICAgY29udGVudDogaHRtbCxcclxuICAgICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgICByb2xsOiB7XHJcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xyXG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI2JvbnVzLXJvbGwtZm9ybScpKVxyXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0OiAncm9sbCcsXHJcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XHJcbiAgICAgIH0pXHJcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBBY3RpdmVFZmZlY3QsIGZvdW5kcnksIGdhbWUsIFJvbGwgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29DN0FjdGl2ZUVmZmVjdCBleHRlbmRzIEFjdGl2ZUVmZmVjdCB7XHJcbiAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgYXBwbHkgKGFjdG9yLCBjaGFuZ2UpIHtcclxuICAgIGlmICghaXNOYU4oTnVtYmVyKGNoYW5nZS52YWx1ZSkpKSBjaGFuZ2UudmFsdWUgPSBOdW1iZXIoY2hhbmdlLnZhbHVlKVxyXG4gICAgY29uc3QgcmVzdWx0ID0gc3VwZXIuYXBwbHkoYWN0b3IsIGNoYW5nZSlcclxuICAgIGNvbnN0IGV2YWx1YXRlZCA9IGlzTmFOKHJlc3VsdCkgPyBwYXJzZShyZXN1bHQpIDogcmVzdWx0XHJcbiAgICBpZiAoaXNOYU4oZXZhbHVhdGVkKSkgcmV0dXJuIHJlc3VsdFxyXG4gICAgcmV0dXJuIGV2YWx1YXRlZFxyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQXBwbHkgYW4gQWN0aXZlRWZmZWN0IHRoYXQgdXNlcyBhIE1VTFRJUExZIGFwcGxpY2F0aW9uIG1vZGUuXHJcbiAgICogQ2hhbmdlcyB3aGljaCBNVUxUSVBMWSBtdXN0IGJlIG51bWVyaWMgdG8gYWxsb3cgZm9yIG11bHRpcGxpY2F0aW9uLlxyXG4gICAqIEBwYXJhbSB7QWN0b3J9IGFjdG9yICAgICAgICAgICAgICAgICAgIFRoZSBBY3RvciB0byB3aG9tIHRoaXMgZWZmZWN0IHNob3VsZCBiZSBhcHBsaWVkXHJcbiAgICogQHBhcmFtIHtkYXRhLkVmZmVjdENoYW5nZURhdGF9IGNoYW5nZSAgVGhlIGNoYW5nZSBkYXRhIGJlaW5nIGFwcGxpZWRcclxuICAgKiBAcmV0dXJuIHsqfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgcmVzdWx0aW5nIGFwcGxpZWQgdmFsdWVcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9hcHBseU11bHRpcGx5IChhY3RvciwgY2hhbmdlKSB7XHJcbiAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IGNoYW5nZVxyXG4gICAgY29uc3QgY3VycmVudCA9IGZvdW5kcnkudXRpbHMuZ2V0UHJvcGVydHkoYWN0b3IsIGtleSlcclxuICAgIGNvbnN0IG4gPSBOdW1iZXIuZnJvbVN0cmluZyh2YWx1ZSlcclxuXHJcbiAgICBsZXQgdXBkYXRlXHJcblxyXG4gICAgY29uc3Qgc3RyVXBkYXRlID0gYCR7Y3VycmVudH0qJHtTdHJpbmcodmFsdWUpfWBcclxuICAgIGlmICghaXNOYU4ocGFyc2Uoc3RyVXBkYXRlKSkpIHVwZGF0ZSA9IFN0cmluZyhwYXJzZShzdHJVcGRhdGUpKVxyXG4gICAgZWxzZSBpZiAoUm9sbC52YWxpZGF0ZShzdHJVcGRhdGUpKSB1cGRhdGUgPSBzdHJVcGRhdGVcclxuICAgIGVsc2UgaWYgKHR5cGVvZiBjdXJyZW50ICE9PSAnbnVtYmVyJyB8fCBpc05hTihuKSkgcmV0dXJuIG51bGxcclxuICAgIGVsc2UgdXBkYXRlID0gY3VycmVudCAqIG5cclxuICAgIGZvdW5kcnkudXRpbHMuc2V0UHJvcGVydHkoYWN0b3IsIGtleSwgdXBkYXRlKVxyXG4gICAgcmV0dXJuIHVwZGF0ZVxyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQXBwbHkgYW4gQWN0aXZlRWZmZWN0IHRoYXQgdXNlcyBhbiBBREQgYXBwbGljYXRpb24gbW9kZS5cclxuICAgKiBUaGUgd2F5IHRoYXQgZWZmZWN0cyBhcmUgYWRkZWQgZGVwZW5kcyBvbiB0aGUgZGF0YSB0eXBlIG9mIHRoZSBjdXJyZW50IHZhbHVlLlxyXG4gICAqXHJcbiAgICogSWYgdGhlIGN1cnJlbnQgdmFsdWUgaXMgbnVsbCwgdGhlIGNoYW5nZSB2YWx1ZSBpcyBhc3NpZ25lZCBkaXJlY3RseS5cclxuICAgKiBJZiB0aGUgY3VycmVudCB0eXBlIGlzIGEgc3RyaW5nLCB0aGUgY2hhbmdlIHZhbHVlIGlzIGNvbmNhdGVuYXRlZC5cclxuICAgKiBJZiB0aGUgY3VycmVudCB0eXBlIGlzIGEgbnVtYmVyLCB0aGUgY2hhbmdlIHZhbHVlIGlzIGNhc3QgdG8gbnVtZXJpYyBhbmQgYWRkZWQuXHJcbiAgICogSWYgdGhlIGN1cnJlbnQgdHlwZSBpcyBhbiBhcnJheSwgdGhlIGNoYW5nZSB2YWx1ZSBpcyBhcHBlbmRlZCB0byB0aGUgZXhpc3RpbmcgYXJyYXkgaWYgaXQgbWF0Y2hlcyBpbiB0eXBlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBY3Rvcn0gYWN0b3IgICAgICAgICAgICAgICAgICAgVGhlIEFjdG9yIHRvIHdob20gdGhpcyBlZmZlY3Qgc2hvdWxkIGJlIGFwcGxpZWRcclxuICAgKiBAcGFyYW0ge2RhdGEuRWZmZWN0Q2hhbmdlRGF0YX0gY2hhbmdlICBUaGUgY2hhbmdlIGRhdGEgYmVpbmcgYXBwbGllZFxyXG4gICAqIEByZXR1cm4geyp9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSByZXN1bHRpbmcgYXBwbGllZCB2YWx1ZVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX2FwcGx5QWRkIChhY3RvciwgY2hhbmdlKSB7XHJcbiAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IGNoYW5nZVxyXG4gICAgY29uc3QgY3VycmVudCA9IGZvdW5kcnkudXRpbHMuZ2V0UHJvcGVydHkoYWN0b3IsIGtleSkgPz8gbnVsbFxyXG4gICAgY29uc3QgY3QgPSBmb3VuZHJ5LnV0aWxzLmdldFR5cGUoY3VycmVudClcclxuICAgIGxldCB1cGRhdGUgPSBudWxsXHJcblxyXG4gICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0eXBlcyBvZiB0aGUgY3VycmVudCBkYXRhXHJcbiAgICBzd2l0Y2ggKGN0KSB7XHJcbiAgICAgIGNhc2UgJ251bGwnOlxyXG4gICAgICAgIHVwZGF0ZSA9IHZhbHVlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCBzdHJVcGRhdGUgPSBgJHtjdXJyZW50fSske1N0cmluZyh2YWx1ZSl9YFxyXG4gICAgICAgICAgICAucmVwbGFjZSgnKysnLCAnKycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCcrLScsICctJylcclxuICAgICAgICAgIGlmICghaXNOYU4ocGFyc2Uoc3RyVXBkYXRlKSkpIHVwZGF0ZSA9IFN0cmluZyhwYXJzZShzdHJVcGRhdGUpKVxyXG4gICAgICAgICAgZWxzZSBpZiAoUm9sbC52YWxpZGF0ZShzdHJVcGRhdGUpKSB1cGRhdGUgPSBzdHJVcGRhdGVcclxuICAgICAgICAgIGVsc2UgdXBkYXRlID0gY3VycmVudCArIFN0cmluZyh2YWx1ZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnbnVtYmVyJzp7XHJcbiAgICAgICAgY29uc3QgbiA9IE51bWJlci5mcm9tU3RyaW5nKHZhbHVlKVxyXG4gICAgICAgIGlmICghaXNOYU4obikpIHVwZGF0ZSA9IGN1cnJlbnQgKyBuXHJcbiAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdBcnJheSc6e1xyXG4gICAgICAgIGNvbnN0IGF0ID0gZm91bmRyeS51dGlscy5nZXRUeXBlKGN1cnJlbnRbMF0pXHJcbiAgICAgICAgaWYgKCFjdXJyZW50Lmxlbmd0aCB8fCBmb3VuZHJ5LnV0aWxzLmdldFR5cGUodmFsdWUpID09PSBhdCkgeyB1cGRhdGUgPSBjdXJyZW50LmNvbmNhdChbdmFsdWVdKSB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh1cGRhdGUgIT09IG51bGwpIGZvdW5kcnkudXRpbHMuc2V0UHJvcGVydHkoYWN0b3IsIGtleSwgdXBkYXRlKVxyXG4gICAgcmV0dXJuIHVwZGF0ZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFuYWdlIEFjdGl2ZSBFZmZlY3QgaW5zdGFuY2VzIHRocm91Z2ggdGhlIEFjdG9yIFNoZWV0IHZpYSBlZmZlY3QgY29udHJvbCBidXR0b25zLlxyXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgICAgICBUaGUgbGVmdC1jbGljayBldmVudCBvbiB0aGUgZWZmZWN0IGNvbnRyb2xcclxuICAgKiBAcGFyYW0ge0FjdG9yfEl0ZW19IG93bmVyICAgICAgVGhlIG93bmluZyBkb2N1bWVudCB3aGljaCBtYW5hZ2VzIHRoaXMgZWZmZWN0XHJcbiAgICogQHJldHVybnMge1Byb21pc2V8bnVsbH0gICAgICAgIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjaGFuZ2VzIGFyZSBjb21wbGV0ZS5cclxuICAgKi9cclxuICBzdGF0aWMgb25NYW5hZ2VBY3RpdmVFZmZlY3QgKGV2ZW50LCBvd25lcikge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaScpXHJcbiAgICBjb25zdCBlZmZlY3QgPSBsaS5kYXRhc2V0LmVmZmVjdElkXHJcbiAgICAgID8gb3duZXIuZWZmZWN0cy5nZXQobGkuZGF0YXNldC5lZmZlY3RJZClcclxuICAgICAgOiBudWxsXHJcbiAgICBzd2l0Y2ggKGEuZGF0YXNldC5hY3Rpb24pIHtcclxuICAgICAgY2FzZSAnY3JlYXRlJzpcclxuICAgICAgICByZXR1cm4gb3duZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcclxuICAgICAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXHJcbiAgICAgICAgICAgIG9yaWdpbjogb3duZXIudXVpZCxcclxuICAgICAgICAgICAgJ2R1cmF0aW9uLnJvdW5kcyc6XHJcbiAgICAgICAgICAgICAgbGkuZGF0YXNldC5lZmZlY3RUeXBlID09PSAndGVtcG9yYXJ5JyA/IDEgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGRpc2FibGVkOiBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICdpbmFjdGl2ZSdcclxuICAgICAgICAgIH1cclxuICAgICAgICBdKVxyXG4gICAgICBjYXNlICdlZGl0JzpcclxuICAgICAgICByZXR1cm4gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKVxyXG4gICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgIHJldHVybiBlZmZlY3QuZGVsZXRlKClcclxuICAgICAgY2FzZSAndG9nZ2xlJzpcclxuICAgICAgICByZXR1cm4gZWZmZWN0LnVwZGF0ZSh7IGRpc2FibGVkOiAhZWZmZWN0LmRpc2FibGVkIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBwcmVwYXJlRGF0YSAoKSB7XHJcbiAgLy8gICBzdXBlci5wcmVwYXJlRGF0YSgpXHJcbiAgLy8gfVxyXG5cclxuICBwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMgKCkge1xyXG4gICAgc3VwZXIucHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzKClcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgaW4gVjEwIG9ubHkgISFcclxuICBfcHJlcGFyZUR1cmF0aW9uICgpIHtcclxuICAgIHN1cGVyLl9wcmVwYXJlRHVyYXRpb24oKVxyXG5cclxuICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvblxyXG4gICAgaWYgKE51bWJlci5pc051bWVyaWMoZHVyYXRpb24uc2Vjb25kcykpIHtcclxuICAgICAgbGV0IGxhYmVsID0gZHVyYXRpb24ubGFiZWxcclxuICAgICAgaWYgKGR1cmF0aW9uLnNlY29uZHMgPiAzNjAwKSB7XHJcbiAgICAgICAgbGFiZWwgPSBuZXcgRGF0ZShkdXJhdGlvbi5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTkpXHJcbiAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24uc2Vjb25kcyA+IDEwMCkge1xyXG4gICAgICAgIGxhYmVsID0gbmV3IERhdGUoZHVyYXRpb24uc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTQsIDE5KVxyXG4gICAgICB9XHJcbiAgICAgIGR1cmF0aW9uLmxhYmVsID0gbGFiZWxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIC8vIGdldCBkdXJhdGlvbiAoKSB7XHJcbiAgLy8gICBjb25zdCBkID0gdGhpcy5kYXRhLmR1cmF0aW9uXHJcbiAgLy8gICBjb25zdCBkdXJhdGlvbiA9IHN1cGVyLmR1cmF0aW9uXHJcbiAgLy8gICBpZiAoTnVtYmVyLmlzTnVtZXJpYyhkLnNlY29uZHMpKSB7XHJcbiAgLy8gICAgIGxldCBsYWJlbCA9IGR1cmF0aW9uLmxhYmVsXHJcbiAgLy8gICAgIGlmIChkLnNlY29uZHMgPiAzNjAwKSB7XHJcbiAgLy8gICAgICAgbGFiZWwgPSBuZXcgRGF0ZShkLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxOSlcclxuICAvLyAgICAgfSBlbHNlIGlmIChkLnNlY29uZHMgPiAxMDApIHtcclxuICAvLyAgICAgICBsYWJlbCA9IG5ldyBEYXRlKGQuc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTQsIDE5KVxyXG4gIC8vICAgICB9XHJcbiAgLy8gICAgIGR1cmF0aW9uLmxhYmVsID0gbGFiZWxcclxuICAvLyAgIH1cclxuICAvLyAgIHJldHVybiBkdXJhdGlvblxyXG4gIC8vIH1cclxuXHJcbiAgLy8gc2V0IGR1cmF0aW9uICh4KSB7XHJcbiAgLy8gICBzdXBlci5kdXJhdGlvbiA9IHhcclxuICAvLyB9XHJcblxyXG4gIGdldCBpc1N0YXR1cyAoKSB7XHJcbiAgICBjb25zdCBzdGF0dXNJZCA9IHRoaXMuZ2V0RmxhZygnY29yZScsICdzdGF0dXNJZCcpXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAndGVtcG9JbnNhbmUnLFxyXG4gICAgICAnaW5kZWZJbnNhbmUnLFxyXG4gICAgICAnY3JpdGljYWxXb3VuZHMnLFxyXG4gICAgICAnZHlpbmcnLFxyXG4gICAgICAnZGVhZCcsXHJcbiAgICAgICd1bmNvbnNjaW91cycsXHJcbiAgICAgICdwcm9uZSdcclxuICAgIF0uaW5jbHVkZXMoc3RhdHVzSWQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMgKGVmZmVjdHMsIHsgc3RhdHVzID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7XHJcbiAgICAgIHRlbXBvcmFyeToge1xyXG4gICAgICAgIHR5cGU6ICd0ZW1wb3JhcnknLFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1RlbXBvcmFyeScpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIHBhc3NpdmU6IHtcclxuICAgICAgICB0eXBlOiAncGFzc2l2ZScsXHJcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnUGFzc2l2ZScpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIGluYWN0aXZlOiB7XHJcbiAgICAgICAgdHlwZTogJ2luYWN0aXZlJyxcclxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdJbmFjdGl2ZScpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1cHByZXNzZWQ6IHtcclxuICAgICAgICB0eXBlOiAnc3VwcHJlc3NlZCcsXHJcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU3VwcHJlc3NlZCcpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdLFxyXG4gICAgICAgIGluZm86IFtnYW1lLmkxOG4ubG9jYWxpemUoJ1VuYXZhaWxhYmxlJyldXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgIGNhdGVnb3JpZXMuc3RhdHVzID0ge1xyXG4gICAgICAgIHR5cGU6ICdzdGF0dXMnLFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1N0YXR1cycpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhY3RpdmUgZWZmZWN0cywgY2xhc3NpZnlpbmcgdGhlbSBpbnRvIGNhdGVnb3JpZXNcclxuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XHJcbiAgICAgIGUuX2dldFNvdXJjZU5hbWUoKSAvLyBUcmlnZ2VyIGEgbG9va3VwIGZvciB0aGUgc291cmNlIG5hbWVcclxuICAgICAgaWYgKGUuaXNTdXBwcmVzc2VkKSBjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5wdXNoKGUpXHJcbiAgICAgIGVsc2UgaWYgKGUuaXNTdGF0dXMpIGNhdGVnb3JpZXMuc3RhdHVzLmVmZmVjdHMucHVzaChlKVxyXG4gICAgICBlbHNlIGlmIChlLmRpc2FibGVkKSBjYXRlZ29yaWVzLmluYWN0aXZlLmVmZmVjdHMucHVzaChlKVxyXG4gICAgICBlbHNlIGlmIChlLmlzVGVtcG9yYXJ5KSBjYXRlZ29yaWVzLnRlbXBvcmFyeS5lZmZlY3RzLnB1c2goZSlcclxuICAgICAgZWxzZSBjYXRlZ29yaWVzLnBhc3NpdmUuZWZmZWN0cy5wdXNoKGUpXHJcbiAgICB9XHJcblxyXG4gICAgY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmhpZGRlbiA9ICFjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5sZW5ndGhcclxuICAgIHJldHVybiBjYXRlZ29yaWVzXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXMgKGVmZmVjdHMpIHtcclxuICAgIGxldCBjb3VudCA9IDBcclxuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7XHJcbiAgICAgIGFjdGl2ZToge1xyXG4gICAgICAgIHR5cGU6ICdhY3RpdmUnLFxyXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0FjdGl2ZScpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIGluYWN0aXZlOiB7XHJcbiAgICAgICAgdHlwZTogJ2luYWN0aXZlJyxcclxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdJbmFjdGl2ZScpLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhY3RpdmUgZWZmZWN0cywgY2xhc3NpZnlpbmcgdGhlbSBpbnRvIGNhdGVnb3JpZXNcclxuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XHJcbiAgICAgIGNvdW50ICs9IDFcclxuICAgICAgZS5fZ2V0U291cmNlTmFtZSgpIC8vIFRyaWdnZXIgYSBsb29rdXAgZm9yIHRoZSBzb3VyY2UgbmFtZVxyXG4gICAgICBpZiAoZS5pc1N1cHByZXNzZWQgfHwgZS5kaXNhYmxlZCkgY2F0ZWdvcmllcy5pbmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcclxuICAgICAgZWxzZSBjYXRlZ29yaWVzLmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY291bnQgPiAwKSBjYXRlZ29yaWVzLmV4cGVuZGVkID0gdHJ1ZVxyXG4gICAgcmV0dXJuIGNhdGVnb3JpZXNcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlIChzdHIpIHtcclxuICBjb25zdCByZWdFeCA9IC9eWytcXC0qLykoXFxkXSskL1xyXG4gIGlmICghcmVnRXguZXhlYyhzdHIpKSByZXR1cm4gTmFOXHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBuZXcgUm9sbChzdHIpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsXHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuIE5hTlxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCxnYW1lICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3Q29udGV4dE1lbnUge1xyXG4gIGJpbmQgKG1lbnUsIGh0bWwsIGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrXHJcbiAgICB0aGlzLl9odG1sID0gaHRtbFxyXG4gICAgdGhpcy5fbWVudSA9IG1lbnVcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG1lbnVUcmlnZ2VyID0gaHRtbC5maW5kKGBbZGF0YS1jb250ZXh0LW1lbnU9JHttZW51LmlkfV1gKSAvLyBGaW5kIGFsbCBtZW51IHRyaWdnZXJzLlxyXG4gICAgICBpZiAobWVudVRyaWdnZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLy8gSWYgdGhlcmUgaXMgbm8gdHJpZ2dlciwgZG8gbm90IGNvbnRpbnVlLlxyXG4gICAgICBtZW51VHJpZ2dlci5jb250ZXh0bWVudSh0aGlzLl9vbkNvbnRleHRNZW51LmJpbmQodGhpcykpIC8vIEF0dGFjaCB0aGUgaGFuZGxlci5cclxuICAgICAgY29uc3QgbWVudUVsZW1lbnQgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlTWVudShtZW51KSAvLyBCdWlsZCB0aGUgbWVudVxyXG4gICAgICBtZW51RWxlbWVudC5vbignY2xpY2snLFxyXG4gICAgICAgICcubWVudS1hY3Rpb24nLFxyXG4gICAgICAgIHRoaXMuX29uTWVudUFjdGlvbi5iaW5kKHRoaXMpKVxyXG4gICAgICAvLyBjb25zdCBkb2N1bWVudE1lbnUgPSB0aGlzLm1lbnVDb250YWluZXIuZmluZChgLmNvbnRleHQtbWVudS13cmFwcGVyLiR7bWVudS5pZH1gKVxyXG4gICAgICBpZiAodGhpcy5tZW51Lmxlbmd0aCAhPT0gMCkgdGhpcy5tZW51LnJlcGxhY2VXaXRoKG1lbnVFbGVtZW50KVxyXG4gICAgICBlbHNlIHRoaXMubWVudUNvbnRhaW5lci5hcHBlbmQobWVudUVsZW1lbnQpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IG1lbnVDb250YWluZXIgKCkge1xyXG4gICAgbGV0IG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXHJcbiAgICBpZiAobWVudUNvbnRhaW5lci5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5faHRtbC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtZW51LWNvbnRhaW5lclwiPjwvZGl2PicpXHJcbiAgICAgIG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWVudUNvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgZ2V0IG1lbnUgKCkge1xyXG4gICAgLy8gY29uc3QgbWVudUNvbnRhaW5lciA9IHRoaXMubWVudUNvbnRhaW5lclxyXG4gICAgLy8gaWYgKCFtZW51Q29udGFpbmVyIHx8IG1lbnVDb250YWluZXIubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIHRoaXMubWVudUNvbnRhaW5lci5maW5kKGAuY29udGV4dC1tZW51LXdyYXBwZXIuJHt0aGlzLl9tZW51LmlkfWApXHJcbiAgfVxyXG5cclxuICBfb25NZW51QWN0aW9uIChldmVudCkge1xyXG4gICAgLy8gY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgLy8gaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JyYW5jaCcpKSByZXR1cm5cclxuICAgIHJldHVybiB0aGlzLl9jYWxsYmFjayhldmVudCwgdGhpcy50YXJnZXQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2xvc2VBbGwgKCkge1xyXG4gICAgY29uc3QgbWVudUNvbnRhaW5lcnMgPSAkKCdib2R5JykuZmluZCgnLm1lbnUtY29udGFpbmVyJylcclxuICAgIGNvbnN0IG1lbnVzID0gbWVudUNvbnRhaW5lcnMuZmluZCgnLmNvbnRleHQtbWVudS13cmFwcGVyJylcclxuICAgIG1lbnVzLmVhY2goZnVuY3Rpb24gKGksIG0pIHsgbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbicgfSlcclxuICAgIC8vIGJvZHkuZmluZCgnLm1lbnUtd3JhcHBlcicpLmhpZGUoKVxyXG4gIH1cclxuXHJcbiAgX29uQ29udGV4dE1lbnUgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCh0cnVlKVxyXG4gICAgQ29DN0NvbnRleHRNZW51LmNsb3NlQWxsKCkgLy8gT25seSAxIG1lbnUgY2FuIGJlIG9wZW4uXHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudD8uY3VycmVudFRhcmdldFxyXG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcclxuICAgIGlmICghdGFyZ2V0KSByZXR1cm5cclxuICAgIGNvbnN0IG1lbnVOYW1lID0gdGFyZ2V0LmRhdGFzZXQ/LmNvbnRleHRNZW51XHJcbiAgICBpZiAobWVudU5hbWUgPT09IHRoaXMuX21lbnUuaWQpIHtcclxuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMubWVudVxyXG4gICAgICBpZiAod3JhcHBlci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViTWVudSA9IHdyYXBwZXIuZmluZCgnLnN1Yi1tZW51JylcclxuICAgICAgICBsZXQgbGVmdCA9IGV2ZW50LmNsaWVudFhcclxuICAgICAgICBsZXQgdG9wID0gZXZlbnQuY2xpZW50WVxyXG4gICAgICAgIGNvbnN0IG1lbnVIZWlnaHQgPSB3cmFwcGVyLm91dGVySGVpZ2h0KClcclxuICAgICAgICBjb25zdCBtZW51V2lkdGggPSB3cmFwcGVyLm91dGVyV2lkdGgoKVxyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBtZW51SGVpZ2h0ICsgdG9wKSB7XHJcbiAgICAgICAgICB0b3AgPSB0b3AgLSBtZW51SGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQpIHtcclxuICAgICAgICAgIGxlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIG1lbnVXaWR0aFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3ViTWVudS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCBtZW51V2lkdGggKyBsZWZ0ICsgc3ViTWVudS5vdXRlcldpZHRoKCkpIHtcclxuICAgICAgICAgICAgc3ViTWVudS5jc3Moe1xyXG4gICAgICAgICAgICAgIHJpZ2h0OiBgJHttZW51V2lkdGggLSA1fXB4YCxcclxuICAgICAgICAgICAgICBsZWZ0OiAnJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3ViTWVudS5jc3Moe1xyXG4gICAgICAgICAgICAgIGxlZnQ6IGAke21lbnVXaWR0aCAtIDV9cHhgLFxyXG4gICAgICAgICAgICAgIHJpZ2h0OiAnJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB3cmFwcGVyLmNzcyh7XHJcbiAgICAgICAgICBsZWZ0OiBgJHtsZWZ0fXB4YCxcclxuICAgICAgICAgIHRvcDogYCR7dG9wfXB4YCxcclxuICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjYW5TZWUgKHZpc2liaWxpdHkpIHtcclxuICAgIHN3aXRjaCAodmlzaWJpbGl0eS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIGNhc2UgJ2dtJzpcclxuICAgICAgICByZXR1cm4gZ2FtZS51c2VyLmlzR01cclxuICAgICAgY2FzZSAndHJ1c3RlZCc6XHJcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc1RydXN0ZWRcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIENyZWF0ZU1lbnUgKG1lbnUpIHtcclxuICAgIGNvbnN0IGNsYXNzZXMgPSB0eXBlb2YgbWVudS5jbGFzc2VzID09PSAnc3RyaW5nJyA/IFttZW51LmNsYXNzZXNdIDogbWVudS5jbGFzc2VzXHJcbiAgICBjbGFzc2VzLnB1c2goJ2NvbnRleHQtbWVudS13cmFwcGVyJylcclxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCc8ZGl2PjwvZGl2PicpXHJcbiAgICB3cmFwcGVyLmFkZENsYXNzKG1lbnUuaWQpXHJcbiAgICBjbGFzc2VzLmZvckVhY2goYyA9PiB3cmFwcGVyLmFkZENsYXNzKGMpKVxyXG4gICAgaWYgKG1lbnUuc2VjdGlvbikge1xyXG4gICAgICBtZW51LnNlY3Rpb24uZm9yRWFjaChzID0+IHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24ocywgeyBtdWx0aTogdHJ1ZSB9KVxyXG4gICAgICAgIGlmIChzZWN0aW9uKSB3cmFwcGVyLmFwcGVuZChzZWN0aW9uKVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc2VjdGlvbiA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVTZWN0aW9uKG1lbnUpXHJcbiAgICAgIGlmIChzZWN0aW9uKSB3cmFwcGVyLmFwcGVuZChzZWN0aW9uKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHdyYXBwZXJcclxuICB9XHJcblxyXG4gIHN0YXRpYyBDcmVhdGVTZWN0aW9uIChzLCB7IG11bHRpID0gZmFsc2UsIHN1Yk1lbnUgPSBmYWxzZSB9ID0ge30pIHtcclxuICAgIGlmICghcy5pdGVtcykgcmV0dXJuIG51bGxcclxuICAgIGlmIChzLnZpc2liaWxpdHkgJiYgIUNvQzdDb250ZXh0TWVudS5jYW5TZWUocy52aXNpYmlsaXR5KSkgcmV0dXJuIG51bGxcclxuICAgIGNvbnN0IGNsYXNzZXMgPSBzLmNsYXNzZXMgPyB0eXBlb2Ygcy5jbGFzc2VzID09PSAnc3RyaW5nJyA/IFtzLmNsYXNzZXNdIDogcy5jbGFzc2VzIDogW11cclxuICAgIGlmIChtdWx0aSkgY2xhc3Nlcy5wdXNoKCdtZW51LXNlY3Rpb24nKVxyXG4gICAgaWYgKHN1Yk1lbnUpIGNsYXNzZXMucHVzaCgnc3ViLW1lbnUnKVxyXG4gICAgY29uc3Qgc2VjdGlvbiA9ICQoJzx1bD48L3VsPicpXHJcbiAgICBjbGFzc2VzLmZvckVhY2goYyA9PiBzZWN0aW9uLmFkZENsYXNzKGMpKVxyXG4gICAgcy5pdGVtcy5mb3JFYWNoKGkgPT4ge1xyXG4gICAgICBjb25zdCBsaSA9ICQoJzxsaT48L2xpPicpXHJcbiAgICAgIGxpLmFkZENsYXNzKCdtZW51LWl0ZW0nKVxyXG4gICAgICBpZiAoaS5hY3Rpb24pIHtcclxuICAgICAgICBsaS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxyXG4gICAgICAgIGxpLmF0dHIoJ2RhdGEtYWN0aW9uJywgaS5hY3Rpb24pXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBpLmxhYmVsID09PSAnc3RyaW5nJykgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWx9PC9zcGFuPmApXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChpLmxhYmVsLmljb24pIGxpLmFwcGVuZChgPGkgY2xhc3M9XCIke2kubGFiZWwuaWNvbn1cIj48L2k+YClcclxuICAgICAgICBpZiAoaS5sYWJlbC50ZXh0KSBsaS5hcHBlbmQoYDxzcGFuPiR7aS5sYWJlbC50ZXh0fTwvc3Bhbj5gKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpLnN1Yk1lbnUpIHtcclxuICAgICAgICBsaS5hZGRDbGFzcygnc3ViLW1lbnUtYnV0dG9uJylcclxuICAgICAgICBsaS5hcHBlbmQoJzxpIGNsYXNzPVwiZmFzIGZhLWNhcmV0LXJpZ2h0XCI+PC9pPicpXHJcbiAgICAgICAgY29uc3Qgc3ViID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24oaS5zdWJNZW51LCB7IHN1Yk1lbnU6IHRydWUgfSlcclxuICAgICAgICBpZiAoc3ViKSBsaS5hcHBlbmQoc3ViKVxyXG4gICAgICB9XHJcbiAgICAgIHNlY3Rpb24uYXBwZW5kKGxpKVxyXG4gICAgfSlcclxuICAgIHJldHVybiBzZWN0aW9uXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDaGF0TWVzc2FnZSwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGZvdW5kcnksIGdhbWUsIGdldFByb3BlcnR5LCBIb29rcywgSXRlbSwgbWVyZ2VPYmplY3QsIFJvbGwsIFRleHRFZGl0b3IsIHVpICovXHJcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi8uLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi8uLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcclxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcclxuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi8uLi9pdGVtcy9pdGVtLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuLi8uLi9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMnXHJcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXHJcbmltcG9ydCB7IENvQzdDb25DaGVjayB9IGZyb20gJy4uLy4uL2NoYXQvY29uY2hlY2suanMnXHJcbmltcG9ydCB7IGNoYXRIZWxwZXIsIGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vLi4vYXBwcy9wYXJzZXIuanMnXHJcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcclxuaW1wb3J0IHsgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXHJcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXHJcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vLi4vYXBwcy9saW5rLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q29udGV4dE1lbnUgfSBmcm9tICcuLi8uLi9jb250ZXh0LW1lbnUuanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9yU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG5cclxuICAgIHNoZWV0RGF0YS5zaG93SGlkZGVuRGV2TWVudSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxyXG5cclxuICAgIHNoZWV0RGF0YS5jYW5EcmFnVG9rZW4gPSAhIXRoaXMudG9rZW4gJiYgZ2FtZS51c2VyLmlzR01cclxuICAgIHNoZWV0RGF0YS5saW5rZWRBY3RvciA9IHRoaXMuYWN0b3IucHJvdG90eXBlVG9rZW4/LmFjdG9yTGluayA9PT0gdHJ1ZVxyXG4gICAgc2hlZXREYXRhLmlzVG9rZW4gPSB0aGlzLmFjdG9yLmlzVG9rZW5cclxuICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSA9IHt9XHJcbiAgICBzaGVldERhdGEuc2tpbGxzID0ge31cclxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHMgPSB7fVxyXG4gICAgc2hlZXREYXRhLndlYXBvbnMgPSB7fVxyXG4gICAgc2hlZXREYXRhLnJhbmdlV3BuID0gW11cclxuICAgIHNoZWV0RGF0YS5tZWxlZVdwbiA9IFtdXHJcbiAgICBzaGVldERhdGEuYWN0b3JGbGFncyA9IHt9XHJcblxyXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPVxyXG4gICAgICB0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInXHJcbiAgICAgICAgPyBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKHRoaXMuYWN0b3IuZWZmZWN0cylcclxuICAgICAgICA6IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxyXG5cclxuICAgIHNoZWV0RGF0YS5wZXJtaXNzaW9uTGltaXRlZCA9ICFnYW1lLnVzZXIuaXNHTSAmJiAodGhpcy5hY3Rvci5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA/PyB0aGlzLmFjdG9yLm93bmVyc2hpcC5kZWZhdWx0KSA9PT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5MSU1JVEVEXHJcblxyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIHNoZWV0RGF0YS5hbGxvd1VubG9jayA9XHJcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxyXG4gICAgICBnYW1lLnVzZXIuaXNHTSB8fFxyXG4gICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcclxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXHJcbiAgICBpZiAoXHJcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnY3JlYXRpb24nICYmXHJcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxyXG4gICAgKSB7XHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgIT09ICd2ZWhpY2xlJykge1xyXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcclxuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzID0ge1xyXG4gICAgICAgICAgc3RyOiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TVFInLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXHJcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjb246IHtcclxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkNPTicsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbicsXHJcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzaXo6IHtcclxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlNJWicsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnLFxyXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZGV4OiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5ERVgnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxyXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYXBwOiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5BUFAnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJyxcclxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGludDoge1xyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuSU5UJyxcclxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJyxcclxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHBvdzoge1xyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuUE9XJyxcclxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxyXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZWR1OiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5FRFUnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nLFxyXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMgPSB7XHJcbiAgICAgICAgICBocDoge1xyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgbWF4OiBudWxsLFxyXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcclxuICAgICAgICAgICAgbGFiZWw6ICdIaXQgcG9pbnRzJyxcclxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1wOiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBtYXg6IG51bGwsXHJcbiAgICAgICAgICAgIHNob3J0OiAnSFAnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ01hZ2ljIHBvaW50cycsXHJcbiAgICAgICAgICAgIGF1dG86IHRydWVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBsY2s6IHsgdmFsdWU6IG51bGwsIHNob3J0OiAnTENLJywgbGFiZWw6ICdMdWNrJyB9LFxyXG4gICAgICAgICAgc2FuOiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBtYXg6IDk5LFxyXG4gICAgICAgICAgICBzaG9ydDogJ1NBTicsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnU2FuaXR5JyxcclxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1vdjoge1xyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgc2hvcnQ6ICdNT1YnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ01vdmVtZW50IHJhdGUnLFxyXG4gICAgICAgICAgICBhdXRvOiB0cnVlXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZGI6IHtcclxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgICAgIHNob3J0OiAnREInLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0RhbWFnZSBib251cycsXHJcbiAgICAgICAgICAgIGF1dG86IHRydWVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBidWlsZDoge1xyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgc2hvcnQ6ICdCTEQnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0J1aWxkJyxcclxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGFybW9yOiB7IHZhbHVlOiBudWxsLCBhdXRvOiBmYWxzZSB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkpIHtcclxuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5ID0ge1xyXG4gICAgICAgICAgcGVyc29uYWxEZXNjcmlwdGlvbjogeyB0eXBlOiAnc3RyaW5nJywgdmFsdWU6ICcnIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zID0ge1xyXG4gICAgICAgICAgb2NjdXBhdGlvbjogJycsXHJcbiAgICAgICAgICBhZ2U6ICcnLFxyXG4gICAgICAgICAgc2V4OiAnJyxcclxuICAgICAgICAgIHJlc2lkZW5jZTogJycsXHJcbiAgICAgICAgICBiaXJ0aHBsYWNlOiAnJyxcclxuICAgICAgICAgIGFyY2hldHlwZTogJycsXHJcbiAgICAgICAgICBvcmdhbml6YXRpb246ICcnLFxyXG4gICAgICAgICAgcGxheWVybmFtZTogJydcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzID0geyBsb2NrZWQ6IHRydWUsIG1hbnVhbENyZWRpdDogZmFsc2UgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jcmVkaXQpIHtcclxuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0ID0ge1xyXG4gICAgICAgICAgbW9uZXRhcnlTeW1ib2w6IG51bGwsXHJcbiAgICAgICAgICBtdWx0aXBsaWVyOiBudWxsLFxyXG4gICAgICAgICAgc3BlbnQ6IG51bGwsXHJcbiAgICAgICAgICBhc3NldHNEZXRhaWxzOiBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCkge1xyXG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCA9IHtcclxuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxyXG4gICAgICAgICAgb2NjdXBhdGlvbjogbnVsbCxcclxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5KSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5ID0gW11cclxuXHJcbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUFyY2hldHlwZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJylcclxuICAgICAgc2hlZXREYXRhLnB1bHBSdWxlT3JnYW5pemF0aW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoXHJcbiAgICAgICAgJ0NvQzcnLFxyXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc0RlYWQgPSB0aGlzLmFjdG9yLmRlYWRcclxuICAgIHNoZWV0RGF0YS5pc0R5aW5nID0gdGhpcy5hY3Rvci5keWluZ1xyXG5cclxuICAgIGlmIChzaGVldERhdGEuaXRlbXMpIHtcclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNoZWV0RGF0YS5pdGVtcykge1xyXG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXHJcbiAgICAgICAgLy8gY2UgYmxvYyBkZXZyYWl0IGV0cmUgZMOpcGxhY8OpIGRhbnMgbGUgYmxvYyBfdXBkYXRlRm9ybURhdGFcclxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XHJcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XHJcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xyXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci50eXBlICE9PSAnY2hhcmFjdGVyJykge1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGl0ZW0uc3lzdGVtLnZhbHVlKSkpIHtcclxuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXHJcbiAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge31cclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcclxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XHJcbiAgICAgICAgICAgICAgKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy4nKSkge1xyXG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnN1YnN0cmluZyg1KVxyXG4gICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoaXRlbS5zeXN0ZW0udmFsdWUsIHBhcnNlZCkuZXZhbHVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApLnRvdGFsXHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlU2tpbGxGb3JtdWxhJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnN5c3RlbS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWVcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcclxuICAgICAgICAgICAgICAgICAgYFtDT0M3XSAoQWN0b3I6JHt0aGlzLm5hbWV9KSBFdmFsdWF0aW5nIHNraWxsICR7aXRlbS5uYW1lfToke2l0ZW0uc3lzdGVtLnZhbHVlfSB0byAke3ZhbHVlfWBcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnZhbHVlJzogdmFsdWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXHJcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnJhd1ZhbHVlID0gc2tpbGwucmF3VmFsdWVcclxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSBza2lsbC52YWx1ZVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcclxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYmFzZSA9IGF3YWl0IHNraWxsLmFzeW5jQmFzZSgpXHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0udmFsdWUpIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBwYXJ0IG9mIG1pZ3JhdGlvbiBvciBkb25lIGF0IGluaXQgIVxyXG4gICAgICAgICAgICAgIC8vIFdhcyBkb25lIHdoZW4gc2tpbGwgdmFsdWUgd2FzIGNoYW5nZWQgdG8gYmFzZSArIGFkanVzdGVtZW50XHJcbiAgICAgICAgICAgICAgY29uc3QgZXhwID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcclxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcclxuICAgICAgICAgICAgICAgIDogMFxyXG4gICAgICAgICAgICAgIGxldCB1cGRhdGVkRXhwID0gZXhwICsgcGFyc2VJbnQoaXRlbS5zeXN0ZW0udmFsdWUpIC0gc2tpbGwudmFsdWVcclxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxyXG4gICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcclxuICAgICAgICAgICAgICAgIGBbQ09DN10gVXBkYXRpbmcgc2tpbGwgJHtza2lsbC5uYW1lfSBleHBlcmllbmNlLiBFeHBlcmllbmNlIG1pc3Npbmc6ICR7dXBkYXRlZEV4cH1gXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXHJcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IHVwZGF0ZWRFeHAsXHJcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0udmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXSlcclxuICAgICAgICAgICAgICBpZiAoIWl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzKSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cyA9IHt9XHJcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHVwZGF0ZWRFeHBcclxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHNraWxsLnJhd1ZhbHVlXHJcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSBza2lsbC52YWx1ZSAvLyBBQ1RJVkVfRUZGRUNUIG5lY2Vzc2FyeSB0byBhcHBseSBlZmZlY3RzXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSBza2lsbC52YWx1ZSAvLyBBQ1RJVkVfRUZGRUNUIG5lY2Vzc2FyeSB0byBhcHBseSBlZmZlY3RzXHJcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGlzdCA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdXHJcbiAgICAgICAgaWYgKCFsaXN0KSB7XHJcbiAgICAgICAgICBsaXN0ID0gW11cclxuICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gbGlzdFxyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0LnB1c2goaXRlbSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcclxuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbVR5cGVdLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZWRvbmRhbnQgYXZlYyBtYXRyaWNlIGl0ZW1ieXR5cGVcclxuICAgICAgc2hlZXREYXRhLnNraWxscyA9IHNoZWV0RGF0YS5pdGVtc1xyXG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcpXHJcbiAgICAgICAgLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxyXG5cclxuICAgICAgc2hlZXREYXRhLm1lbGVlU2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXHJcbiAgICAgICAgc2tpbGwgPT5cclxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPT09IHRydWVcclxuICAgICAgKVxyXG4gICAgICBzaGVldERhdGEucmFuZ2VTa2lsbHMgPSBzaGVldERhdGEuc2tpbGxzLmZpbHRlcihcclxuICAgICAgICBza2lsbCA9PlxyXG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXHJcbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID09PSB0cnVlXHJcbiAgICAgIClcclxuXHJcbiAgICAgIGNvbnN0IGNidFNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxyXG4gICAgICAgIHNraWxsID0+IHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZVxyXG4gICAgICApXHJcbiAgICAgIGlmIChjYnRTa2lsbHMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGNidFNraWxscykge1xyXG4gICAgICAgICAgc2hlZXREYXRhLmNvbWJhdFNraWxsc1tza2lsbC5faWRdID0gc2tpbGxcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHdlYXBvbnMgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUud2VhcG9uXHJcblxyXG4gICAgICBpZiAod2VhcG9ucykge1xyXG4gICAgICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIHdlYXBvbnMpIHtcclxuICAgICAgICAgIHdlYXBvbi51c2VzQWx0ZXJuYXRlU2tpbGwgPVxyXG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0byA9PT0gdHJ1ZSB8fFxyXG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZVxyXG4gICAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLmFtbW8pIHdlYXBvbi5zeXN0ZW0uYW1tbyA9IDBcclxuXHJcbiAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSB0cnVlXHJcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9ICcnO1xyXG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gMDtcclxuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gJyc7XHJcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSAwO1xyXG4gICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyA6IHNpIGwnSUQgbidlc3RzIHBhcyBkw6lmaW5pZSBtYWlzIHF1J3VuIG5vbSBhIMOpdMOpIGRvbm7DqSwgdXRpbGlzZXIgY2Ugbm9tIGV0IHRhbnRlciBkZSByZXRyb3V2ZXIgbGUgc2tpbGxcclxuICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gOiBhdmFudCBkJ2Fzc2lnZXIgbGUgc2tpbGwgdsOpcmlmaWVyIHF1J2lsIGV4aXN0ZSB0b3Vqb3Vycy5cclxuICAgICAgICAgICAgLy8gc2kgaWwgbidleGlzdGUgcGx1cyBpbCBmYXV0IGxlIHJldHJvdXZlciBvdSBwYXNzZXIgc2tpbGxzZXQgYSBmYWxzZS5cclxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkXSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxyXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxyXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsLnZhbHVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAhPT0gJycpIHtcclxuICAgICAgICAgICAgICBpZiAoc2hlZXREYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxyXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gc2tpbGwudmFsdWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB3ZWFwb24uc3lzdGVtLl9wcm9wZXJ0aWVzID0gW11cclxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSB7fVxyXG4gICAgICAgICAgICBwcm9wZXJ0eS5pZCA9IGtleVxyXG4gICAgICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcclxuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxyXG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc2hlZXREYXRhLndlYXBvbnNbd2VhcG9uLl9pZF0gPSB3ZWFwb25cclxuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkgc2hlZXREYXRhLnJhbmdlV3BuLnB1c2god2VhcG9uKVxyXG4gICAgICAgICAgZWxzZSBzaGVldERhdGEubWVsZWVXcG4ucHVzaCh3ZWFwb24pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMudG9rZW5cclxuICAgICAgc2hlZXREYXRhLnRva2VuSWQgPSB0b2tlblxyXG4gICAgICAgID8gYCR7dG9rZW4ucGFyZW50Py5pZCA/IHRva2VuLnBhcmVudC5pZCA6ICdUT0tFTid9LiR7dG9rZW4uaWR9YFxyXG4gICAgICAgIDogbnVsbCAvLyBSRUZBQ1RPUklORyAoMilcclxuXHJcbiAgICAgIHNoZWV0RGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSBmYWxzZVxyXG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykge1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hhcmFjdGVyaXN0aWMgb2YgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xyXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSkgY2hhcmFjdGVyaXN0aWMuZWRpdGFibGUgPSB0cnVlXHJcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXJkID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDIpXHJcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDUpXHJcblxyXG4gICAgICAgICAgLy8gSWYgbm8gdmFsdWUgJiYgbm8gZm9ybXVsYSBkb24ndCBkaXNwbGF5IGNoYXJhYy5cclxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgIWNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcclxuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZGlzcGxheSA9IGZhbHNlXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIGlmIGFueSBjaGFyYWN0ZXJpc3RpYyBoYXMgbm8gdmFsdWUgYnV0IGhhcyBhIGZvcm11bGEuXHJcbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlICYmIGNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcclxuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNoZWV0RGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPVxyXG4gICAgICAgICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIHx8XHJcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciBjb21wYXQgd2l0aCBwcmV2aW91cyBjaGFyYWN0ZXJzIHRlc3QgaWYgYXV0byBpcyBkZWZpbmllZCwgaWYgbm90IHdlIGRlZmluZSBpdFxyXG4gICAgaWYgKCFbJ3ZlaGljbGUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXModGhpcy5hY3Rvci50eXBlKSkge1xyXG4gICAgICBjb25zdCBhdXRvID0gdGhpcy5hY3Rvci5jaGVja1VuZGVmaW5lZEF1dG8oKVxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0gPSBtZXJnZU9iamVjdChzaGVldERhdGEuZGF0YS5zeXN0ZW0sIGF1dG8pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvID0gZmFsc2VcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAuYXV0byA9IGZhbHNlXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi5hdXRvID0gZmFsc2VcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8gPSBmYWxzZVxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvID0gZmFsc2VcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuYnVpbGQuYXV0byA9IGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSBudWxsXHJcbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gbnVsbFxyXG5cclxuICAgIGlmICghWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5hY3Rvci50eXBlKSkge1xyXG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSBpbnN0YW5jZW9mIEFycmF5ICYmIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeVswXS5pc0ZpcnN0ID0gdHJ1ZVxyXG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPSBmYWxzZVxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9IGZhbHNlXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9IGZhbHNlXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPSBmYWxzZVxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9IGZhbHNlXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPSBmYWxzZVxyXG5cclxuICAgIHNoZWV0RGF0YS5oYXNDb25kaXRpb25zID1cclxuICAgICAgdGhpcy5hY3Rvci5lZmZlY3RzLnNpemUgPiAwIHx8XHJcbiAgICAgICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKS5maWx0ZXIoXHJcbiAgICAgICAgICBjb25kaXRpb24gPT4gdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25dLnZhbHVlXHJcbiAgICAgICAgKS5sZW5ndGggPiAwKVxyXG5cclxuICAgIHJldHVybiBzaGVldERhdGFcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgc3RhdGljIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xyXG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3JzaGVldCkpIHtcclxuICAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlZEZvcm11bGFcclxuICB9XHJcblxyXG4gIGdldCB0b2tlbktleSAoKSB7XHJcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2UuanMgZ2V0IHRva2VuS2V5KCk6IERFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcclxuICAgIC8vIGlmKCB0aGlzLnRva2VuKSByZXR1cm4gYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAgLy9SRUZBQ1RPUklORyAoMilcclxuICAgIC8vIHJldHVybiB0aGlzLmFjdG9yLmlkO1xyXG4gIH1cclxuXHJcbiAgb25DbG9zZVNoZWV0ICgpIHtcclxuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxyXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cclxuICAgKi9cclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuXHJcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcclxuICAgICAgaWYgKCF0aGlzLm1lbnVzKSB0aGlzLm1lbnVzID0gW11cclxuXHJcbiAgICAgIGNvbnN0IHJvbGxNZW51ID0ge1xyXG4gICAgICAgIGlkOiAnc2tpbGwtcm9sbCcsXHJcbiAgICAgICAgY2xhc3NlczogJ3JvbGwtbWVudScsXHJcbiAgICAgICAgc2VjdGlvbjogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjbGFzc2VzOiAnbWFpbicsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyb2xsJywgbGFiZWw6ICdSb2xsJyB9LFxyXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnb3Bwb3NlZC1yb2xsJywgbGFiZWw6ICdPcHBvc2VkIHJvbGwnIH0sXHJcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb21iaW5lZC1yb2xsJywgbGFiZWw6ICdDb21iaW5lZCByb2xsJyB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGNsYXNzZXM6ICdrZWVwZXInLFxyXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiAnZ20nLFxyXG4gICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB7IGljb246ICdmYXMgZmEtbGluaycsIHRleHQ6ICdMaW5rJyB9LFxyXG4gICAgICAgICAgICAgICAgc3ViTWVudToge1xyXG4gICAgICAgICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29weS10by1jbGlwYm9hcmQnLCBsYWJlbDogJ0NvcHkgdG8gY2xpcC1ib2FyZCcgfVxyXG4gICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3JlcXVlc3Qtcm9sbCcsIGxhYmVsOiAnUmVxdWVzdCByb2xsJyB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNhbk1lbnUgPSB7XHJcbiAgICAgICAgaWQ6ICdzYW4tcm9sbCcsXHJcbiAgICAgICAgY2xhc3NlczogJ3JvbGwtbWVudScsXHJcbiAgICAgICAgc2VjdGlvbjogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjbGFzc2VzOiAnbWFpbicsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdlbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfSxcclxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3JvbGwnLCBsYWJlbDogJ1JvbGwnIH0sXHJcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdvcHBvc2VkLXJvbGwnLCBsYWJlbDogJ09wcG9zZWQgcm9sbCcgfSxcclxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvbWJpbmVkLXJvbGwnLCBsYWJlbDogJ0NvbWJpbmVkIHJvbGwnIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2xhc3NlczogJ2tlZXBlcicsXHJcbiAgICAgICAgICAgIHZpc2liaWxpdHk6ICd0cnVzdGVkJyxcclxuICAgICAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3JlcXVlc3Qtcm9sbCcsIGxhYmVsOiAnUmVxdWVzdCByb2xsJyB9LFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB7IGljb246ICdmYXMgZmEtbGluaycsIHRleHQ6ICdMaW5rJyB9LFxyXG4gICAgICAgICAgICAgICAgc3ViTWVudToge1xyXG4gICAgICAgICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29weS10by1jbGlwYm9hcmQnLCBsYWJlbDogJ0NvcHkgdG8gY2xpcC1ib2FyZCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstZW5jb3VudGVyJywgbGFiZWw6ICdFbmNvdW50ZXInIH1cclxuICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgcm9sbENvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXHJcbiAgICAgIHJvbGxDb250ZXh0TWVudS5iaW5kKHJvbGxNZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcclxuICAgICAgdGhpcy5tZW51cy5wdXNoKHJvbGxDb250ZXh0TWVudSlcclxuXHJcbiAgICAgIGNvbnN0IHNhbkNvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXHJcbiAgICAgIHNhbkNvbnRleHRNZW51LmJpbmQoc2FuTWVudSwgaHRtbCwgdGhpcy5fb25Db250ZXh0TWVudUNsaWNrLmJpbmQodGhpcykpXHJcbiAgICAgIHRoaXMubWVudXMucHVzaChzYW5Db250ZXh0TWVudSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcclxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxyXG4gICAgICBodG1sXHJcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcclxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxyXG4gICAgICBodG1sXHJcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxyXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gY29udGV4dCBtZW51IGJpbmRcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXHJcbiAgICAgIC5jbGljayh0aGlzLl9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdC5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZScpLmNsaWNrKHRoaXMuX29uUm9sbFNraWxsVGVzdC5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtaW1hZ2UnKS5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxyXG4gICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQXR0cmliVGVzdC5iaW5kKHRoaXMpKVxyXG5cclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy50b2tlbi1kcmFnLWhhbmRsZScpXHJcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25EcmFnVG9rZW5TdGFydC5iaW5kKHRoaXMpKVxyXG5cclxuICAgIC8vIE93bmVyIE9ubHkgTGlzdGVuZXJzXHJcbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyICYmIHR5cGVvZiB0aGlzLmFjdG9yLmNvbXBlbmRpdW0gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcclxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0NoYXJhY3RlcmlzdGljKGV2ZW50KSlcclxuICAgICAgaHRtbFxyXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsJylcclxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0F0dHJpYnV0ZShldmVudCkpXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLnNhbi1jaGVjaycpXHJcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdTYW5DaGVjayhldmVudCkpXHJcblxyXG4gICAgICBodG1sXHJcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXHJcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcclxuXHJcbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXHJcbiAgICAgIGh0bWwuZmluZCgnLmZsYWcnKS5jbGljayh0aGlzLl9vbkZsYWdDbGlja2VkLmJpbmQodGhpcykpXHJcbiAgICAgIGh0bWwuZmluZCgnLmZvcm11bGEnKS5jbGljayh0aGlzLl9vbkZvcm11bGFDbGlja2VkLmJpbmQodGhpcykpXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLnJvbGwtY2hhcmFjdGVyaXRpY3MnKVxyXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLmF2ZXJhZ2UtY2hhcmFjdGVyaXRpY3MnKVxyXG4gICAgICAgIC5jbGljayh0aGlzLl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXHJcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxyXG4gICAgICBodG1sLmZpbmQoJy5hdXRvLXRvZ2dsZScpLmNsaWNrKHRoaXMuX29uQXV0b1RvZ2dsZS5iaW5kKHRoaXMpKVxyXG5cclxuICAgICAgLy8gU3RhdHVzIG1vbml0b3JcclxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNIHx8IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJykpIHtcclxuICAgICAgICBodG1sLmZpbmQoJy5yZXNldC1jb3VudGVyJykuY2xpY2sodGhpcy5fb25SZXNldENvdW50ZXIuYmluZCh0aGlzKSlcclxuICAgICAgICBodG1sXHJcbiAgICAgICAgICAuZmluZCgnLmNvbmRpdGlvbi1tb25pdG9yJylcclxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkNvbmRpdGlvblRvZ2dsZS5iaW5kKHRoaXMpKVxyXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWR5aW5nJykuY2xpY2sodGhpcy5oZWFsLmJpbmQodGhpcykpXHJcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZGVhZCcpLmNsaWNrKHRoaXMucmV2aXZlLmJpbmQodGhpcykpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGh0bWwuZmluZCgnLmR5aW5nLWNoZWNrJykuY2xpY2sodGhpcy5jaGVja0ZvckRlYXRoLmJpbmQodGhpcykpXHJcblxyXG4gICAgICBodG1sLmZpbmQoJy5pdGVtIC5pdGVtLWltYWdlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtUm9sbChldmVudCkpXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcclxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Sb2xsKGV2ZW50KSlcclxuICAgICAgaHRtbFxyXG4gICAgICAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcclxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25FZmZlY3QoZXZlbnQpKVxyXG4gICAgICAvLyBodG1sXHJcbiAgICAgIC8vICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxyXG4gICAgICAvLyAgIC5rZXlkb3duKChldmVudCkgPT4ge1xyXG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcclxuICAgICAgLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdwb2ludGVyJylcclxuICAgICAgLy8gICAgIH1cclxuICAgICAgLy8gICB9KVxyXG4gICAgICAvLyBodG1sXHJcbiAgICAgIC8vICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxyXG4gICAgICAvLyAgIC5rZXlkb3duKChldmVudCkgPT4ge1xyXG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcclxuICAgICAgLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdwb2ludGVyJylcclxuICAgICAgLy8gICAgIH1cclxuICAgICAgLy8gICB9KVxyXG4gICAgICBodG1sXHJcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tc2tpbGwucm9sbGFibGUnKVxyXG4gICAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vbldlYXBvblNraWxsUm9sbChldmVudCkpXHJcbiAgICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLnJlbG9hZC13ZWFwb24nKVxyXG4gICAgICAgIC5vbignY29udGV4dG1lbnUnLCBldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXHJcbiAgICAgIGh0bWwuZmluZCgnLmFkZC1hbW1vJykuY2xpY2sodGhpcy5fb25BZGRBbW8uYmluZCh0aGlzKSlcclxuICAgICAgaHRtbC5maW5kKCcucmVhZC1vbmx5JykuZGJsY2xpY2sodGhpcy5fdG9nZ2xlUmVhZE9ubHkuYmluZCh0aGlzKSlcclxuICAgICAgaHRtbC5vbignY2xpY2snLCAnLndlYXBvbi1kYW1hZ2UnLCB0aGlzLl9vbldlYXBvbkRhbWFnZS5iaW5kKHRoaXMpKVxyXG5cclxuICAgICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXHJcbiAgICAgIGh0bWwuZmluZCgnLml0ZW1zLWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSXRlbUhlYWRlci5iaW5kKHRoaXMpKVxyXG4gICAgICBodG1sLmZpbmQoJy5zZWN0aW9uLWhlYWRlcicpLmNsaWNrKHRoaXMuX29uU2VjdGlvbkhlYWRlci5iaW5kKHRoaXMpKVxyXG5cclxuICAgICAgY29uc3Qgd2hlZWxJbnB1dHMgPSBodG1sLmZpbmQoJy5hdHRyaWJ1dGUtdmFsdWUnKVxyXG4gICAgICBmb3IgKGNvbnN0IHdoZWVsSW5wdXQgb2Ygd2hlZWxJbnB1dHMpIHtcclxuICAgICAgICB3aGVlbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnQgPT4gdGhpcy5fb25XaGVlbChldmVudCksIHtcclxuICAgICAgICAgIHBhc3NpdmU6IHRydWVcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxyXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxyXG5cclxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCkpXHJcbiAgICBodG1sLmZpbmQoJy5pdGVtLXBvcHVwJykuY2xpY2sodGhpcy5fb25JdGVtUG9wdXAuYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBVcGRhdGUgSW52ZW50b3J5IEl0ZW1cclxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuZGJsY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxyXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxyXG5cclxuICAgIC8vIERlbGV0ZSBJbnZlbnRvcnkgSXRlbVxyXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XHJcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXHJcbiAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpLCB7XHJcbiAgICAgICAgc3RyaWN0OiB0cnVlXHJcbiAgICAgIH0pXHJcbiAgICAgIGF3YWl0IGl0ZW1Ub0RlbGV0ZS5kZWxldGUoKVxyXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxyXG4gICAgfSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcclxuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2Jvb2snOlxyXG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxyXG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcclxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxyXG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICd3ZWFwb24nOlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge31cclxuICAgICAgICAgICAgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5tZWxlZSkge1xyXG4gICAgICAgICAgICAgIHByb3BlcnRpZXMubWVsZWUgPSB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnJuZ2QpIHtcclxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnJuZ2QgPSB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldiwgcHJvcGVydGllcylcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gaHRtbC5maW5kKCcuY2xlYW4tc2tpbGwtbGlzdCcpLmNsaWNrKCgpID0+IHtcclxuICAgIC8vICAgdGhpcy5hY3Rvci5jbGVhblNraWxscygpXHJcbiAgICAvLyB9KVxyXG5cclxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxyXG5cclxuICAgIGh0bWwuZmluZCgnLmFkZC1uZXctc2VjdGlvbicpLmNsaWNrKCgpID0+IHtcclxuICAgICAgdGhpcy5hY3Rvci5jcmVhdGVCaW9TZWN0aW9uKClcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNlY3Rpb24nKS5jbGljayhldiA9PiB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXHJcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XHJcbiAgICAgIClcclxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxyXG4gICAgfSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXHJcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XHJcbiAgICAgIClcclxuICAgICAgdGhpcy5hY3Rvci5tb3ZlQmlvU2VjdGlvblVwKGluZGV4KVxyXG4gICAgfSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tZG93bicpLmNsaWNrKGV2ID0+IHtcclxuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcclxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcclxuICAgICAgKVxyXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uRG93bihpbmRleClcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCcuZGV2ZWxvcG1lbnQtZmxhZycpLmRibGNsaWNrKGV2ID0+IHtcclxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxyXG4gICAgICApXHJcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXHJcbiAgICB9KVxyXG5cclxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcclxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcclxuICAgICAgKVxyXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCcuYXJjaGV0eXBlLXNraWxsLWZsYWcuY2xpY2thYmxlJykuY2xpY2soZXYgPT4ge1xyXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXHJcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXHJcbiAgICAgIClcclxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnYXJjaGV0eXBlJylcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtZGV2ZWxvcGVtZW50JykuY2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxyXG4gICAgfSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICBpZiAoIWV2ZW50LmRldGFpbCB8fCBldmVudC5kZXRhaWwgPT09IDEpIHtcclxuICAgICAgICB0aGlzLmFjdG9yLmRldmVsb3BMdWNrKGV2ZW50LnNoaWZ0S2V5KVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGh0bWwuZmluZCgnLmNsZWFyX2NvbmRpdGlvbnMnKS5jbGljayhldmVudCA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zdCBkaXNhYmxlID0ge31cclxuICAgICAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBpbiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKSB7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgIT09XHJcbiAgICAgICAgICAgICAgJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25dLnZhbHVlID09PSB0cnVlXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgZGlzYWJsZVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb259LnZhbHVlYF0gPSBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGlzYWJsZSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGUoZGlzYWJsZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuYWN0b3IuZWZmZWN0cy5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcclxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuYWN0b3IuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCdhLmNvYzctbGluaycpLm9uKCdjbGljaycsIGV2ZW50ID0+IENvQzdQYXJzZXIuX29uQ2hlY2soZXZlbnQpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbmsnKVxyXG4gICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IENvQzdQYXJzZXIuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgdXNlZCBmb3IgZGV2IHB1cnBvc2VzIG9ubHkgIVxyXG4gICAgICovXHJcbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XHJcbiAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpKSByZXR1cm4gbnVsbFxyXG4gICAgICBhd2FpdCBJdGVtLmNyZWF0ZSh7XHJcbiAgICAgICAgbmFtZTogJ19fQ29DN0ludGVybmFsSXRlbV9fJyxcclxuICAgICAgICB0eXBlOiAnaXRlbSdcclxuICAgICAgfSlcclxuICAgICAgLy8gY29uc3QgZWZmZWN0cyA9IGF3YWl0IGl0ZW0uY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcclxuICAgICAgLy8gICB7XHJcbiAgICAgIC8vICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVmZmVjdE5ldycpLFxyXG4gICAgICAvLyAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXHJcbiAgICAgIC8vICAgICBvcmlnaW46IG51bGwsXHJcbiAgICAgIC8vICAgICAnZHVyYXRpb24ucm91bmRzJzogdW5kZWZpbmVkLFxyXG4gICAgICAvLyAgICAgZGlzYWJsZWQ6IHRydWVcclxuICAgICAgLy8gICB9XHJcbiAgICAgIC8vIF0pXHJcbiAgICAgIC8vIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbMF1cclxuICAgICAgLy8gYXdhaXQgZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKVxyXG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oICdlZmZlY3QgY3JlYXRlZCAhJylcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdlZmZlY3QgY3JlYXRlZCAhJylcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKVxyXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBTa2lsbEVudGVyLmJpbmQodGhpcykpXHJcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcclxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxyXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxyXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBBdHRyaWJ1dGVFbnRlci5iaW5kKHRoaXMpKVxyXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5hdXRvLXRvZ2dsZScpXHJcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEF1dG9FbnRlci5iaW5kKHRoaXMpKVxyXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5pdGVtLWNvbnRyb2wuZGV2ZWxvcG1lbnQtZmxhZycpXHJcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxyXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBBY3RpdmUgRWZmZWN0c1xyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLmVmZmVjdC1jb250cm9sJylcclxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuYWN0b3IpKVxyXG4gIH1cclxuXHJcbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxyXG4gICAgaWYgKGRlbGF5ID4gMCkge1xyXG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcclxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBpc0NvbWJhdCA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbGFzc0xpc3Q/LmNvbnRhaW5zKFxyXG4gICAgICAgICAgICAnY29tYmF0J1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXHJcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBpdGVtLmRhdGFzZXQuc2tpbGxJZFxyXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxyXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgaXNDb21iYXQgPyAnQ29DNy5Ub29sVGlwQ29tYmF0JyA6ICdDb0M3LlRvb2xUaXBTa2lsbCcsXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2tpbGw6IHNraWxsLm5hbWUsXHJcbiAgICAgICAgICAgICAgICByZWd1bGFyOiBza2lsbC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyAyKSxcclxuICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyA1KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICAgICAgICB0b29sVGlwID1cclxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xyXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XHJcbiAgICAgICAgICAgICAgICAgIG90aGVyOlxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgIDogJydcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sIGRlbGF5KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxyXG4gICAgaWYgKGRlbGF5ID4gMCkge1xyXG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcclxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBjaGFyID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5jaGFyLWJveCcpXHJcbiAgICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICd1bmRlZmluZWQnICYmICEhY2hhcikge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFySWQgPSBjaGFyLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcclxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSBzaGVldC5hY3Rvci5jaGFyYWN0ZXJpc3RpY3NbY2hhcklkXVxyXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xyXG4gICAgICAgICAgICAgIHNraWxsOiBjaGFyYWN0ZXJpc3RpYy5sYWJlbCxcclxuICAgICAgICAgICAgICByZWd1bGFyOiBjaGFyYWN0ZXJpc3RpYy52YWx1ZSA/PyAwLFxyXG4gICAgICAgICAgICAgIGhhcmQ6IGNoYXJhY3RlcmlzdGljLmhhcmQgPz8gMCxcclxuICAgICAgICAgICAgICBleHRyZW1lOiBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID8/IDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgICAgICAgICAgdG9vbFRpcCA9XHJcbiAgICAgICAgICAgICAgICB0b29sVGlwICtcclxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xyXG4gICAgICAgICAgICAgICAgICBvdGhlcjpcclxuICAgICAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcclxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxyXG4gICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBkZWxheSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvb2xUaXBBdHRyaWJ1dGVFbnRlciAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXHJcbiAgICBpZiAoZGVsYXkgPiAwKSB7XHJcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xyXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuYXR0cmlidXRlJylcclxuICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmliICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVJZCA9IGF0dHJpYi5kYXRhc2V0LmF0dHJpYlxyXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9ICcnXHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBzaGVldC5hY3Rvci5zeXN0ZW0uYXR0cmlic1thdHRyaWJ1dGVJZF1cclxuICAgICAgICAgICAgc3dpdGNoIChhdHRyaWJ1dGVJZCkge1xyXG4gICAgICAgICAgICAgIGNhc2UgJ2xjayc6XHJcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XHJcbiAgICAgICAgICAgICAgICAgIHNraWxsOiBhdHRyaWJ1dGVzLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXHJcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcclxuICAgICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDUpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRvb2xUaXAgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgb3RoZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICBjYXNlICdkYic6XHJcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBEQicpXHJcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICBjYXNlICdzYW4nOlxyXG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNhbml0eScsIHtcclxuICAgICAgICAgICAgICAgICAgc2tpbGw6ICdTYW5pdHknLFxyXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXHJcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcclxuICAgICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDUpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRvb2xUaXAgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgb3RoZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwS2VlcGVyU2FuaXR5JykgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSwgZGVsYXkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b29sVGlwQXV0b0VudGVyIChldmVudCkge1xyXG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcclxuICAgIGlmIChkZWxheSA+IDApIHtcclxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCB0b29sVGlwID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBBdXRvVG9nZ2xlJylcclxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBkZWxheSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxyXG4gICAgaWYgKGRlbGF5ID4gMCkge1xyXG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcclxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5pdGVtJylcclxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gc2hlZXQuYWN0b3IuaXRlbXMuZ2V0KHNraWxsSWQpXHJcbiAgICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBTa2lsbEZsYWdUb2dnbGUnLCB7XHJcbiAgICAgICAgICAgICAgc3RhdHVzOiBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50XHJcbiAgICAgICAgICAgICAgICAgID8gJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ2dlZCdcclxuICAgICAgICAgICAgICAgICAgOiAnQ29DNy5Ub29sVGlwU2tpbGxVbmZsYWdnZWQnXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSwgZGVsYXkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25Db250ZXh0TWVudUNsaWNrIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCB0YXJnZXRUeXBlID0gdGFyZ2V0LmRhdGFzZXQ/LnRhcmdldFR5cGVcclxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xyXG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcclxuICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxyXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0YXJnZXRUeXBlKSB7XHJcbiAgICAgIGNhc2UgKCdza2lsbCcpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxyXG4gICAgICAgIHJvbGxPcHRpb25zLnNraWxsSWQgPSB0YXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXHJcblxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgKCdjaGFyYWN0ZXJpc3RpYycpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xyXG4gICAgICAgIHJvbGxPcHRpb25zLmNoYXJhY3RlcmlzdGljID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFyLWJveCcpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgY2FzZSAoJ2F0dHJpYnV0ZScpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcclxuICAgICAgICByb2xsT3B0aW9ucy5hdHRyaWJ1dGUgPSB0YXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xyXG4gICAgICBjYXNlICgncm9sbCcpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICgnb3Bwb3NlZC1yb2xsJyk6XHJcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICgnY29tYmluZWQtcm9sbCcpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgKCdyZXF1ZXN0LXJvbGwnKTpcclxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXHJcbiAgICAgICAgcm9sbE9wdGlvbnMucHJldmVudFN0YW5kYnkgPSBmYWxzZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcclxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxyXG4gICAgICAgIHJvbGxPcHRpb25zLm9wZW5MaW5rVG9vbCA9IHRydWVcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XHJcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcclxuICAgICAgICByb2xsT3B0aW9ucy5zZW5kVG9DaGF0ID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXHJcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgKCdsaW5rLWVuY291bnRlcicpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXHJcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgKCdlbmNvdW50ZXInKTpcclxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXHJcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxyXG4gICAgICAgIHJvbGxPcHRpb25zLmZhc3RGb3J3YXJkID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcblxyXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIocm9sbE9wdGlvbnMpXHJcbiAgfVxyXG5cclxuICBfb25SZW5kZXJJdGVtU2hlZXQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxyXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxyXG4gICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXHJcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXHJcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxyXG4gICAgY29uc3QgbWVzc2FnZSA9IHtcclxuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxyXG4gICAgICBzY2VuZTogbnVsbCxcclxuICAgICAgYWN0b3JUbzogdGhpcy5hY3Rvci5pZCxcclxuICAgICAgaXRlbTogaXRlbS5pZFxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudG9rZW4/LmFjdG9yKSB7XHJcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxyXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcclxuICAgIH1cclxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcclxuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxyXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlLm93bmVyc2hpcCkpIHtcclxuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xyXG4gICAgICAgICAgdmlzaWJsZSA9IHZpc2libGUgfHwgdiAhPT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2aXNpYmxlXHJcbiAgICB9KVxyXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcclxuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XHJcbiAgICAgIGNvbnRlbnQgPVxyXG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXHJcbiAgICB9XHJcbiAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcclxuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcclxuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFVzZXJUb0dpdmVUbycpLFxyXG4gICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgY29uZmlybToge1xyXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcclxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgZm9ybURhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmFsdWUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0OiAnY29uZmlybScsXHJcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XHJcbiAgICAgIH0pXHJcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxyXG4gIH1cclxuXHJcbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xyXG4gICAgc3VwZXIuX29uRHJhZ1N0YXJ0KGV2ZW50KVxyXG4gICAgaWYgKHRoaXMudG9rZW4pIHtcclxuICAgICAgY29uc3QgZHJhZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXHJcbiAgICAgIGRyYWdEYXRhLnRva2VuVXVpZCA9IHRoaXMudG9rZW4udXVpZFxyXG4gICAgICBkcmFnRGF0YS50b2tlbklkID0gdGhpcy50b2tlbi5pZFxyXG4gICAgICBkcmFnRGF0YS5zY2VuZUlkID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcclxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25EcmFnQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIENvQzdUeXBlOiAnbGluaycsXHJcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcclxuICAgICAgY2hlY2s6ICdjaGVjaycsXHJcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXHJcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxyXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcclxuICAgICAgbmFtZTogYm94LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWMsXHJcbiAgICAgIGljb246IG51bGwsXHJcbiAgICAgIGRvY3VtZW50OiB7XHJcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxyXG4gICAgICAgIHV1aWQ6IHRoaXMuZG9jdW1lbnQudXVpZFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxyXG4gIH1cclxuXHJcbiAgX29uRHJhZ0F0dHJpYnV0ZSAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcclxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxyXG4gICAgICBjaGVjazogJ2NoZWNrJyxcclxuICAgICAgdHlwZTogJ2F0dHJpYnV0ZScsXHJcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxyXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcclxuICAgICAgbmFtZTogYm94LmRhdGFzZXQuYXR0cmliLFxyXG4gICAgICBpY29uOiBudWxsLFxyXG4gICAgICBkb2N1bWVudDoge1xyXG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcclxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcclxuICB9XHJcblxyXG4gIF9vbkRyYWdTYW5DaGVjayAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHNhbk1pbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5wYXNzJylcclxuICAgIGNvbnN0IHNhbk1heCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5mYWlsZWQnKVxyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcclxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxyXG4gICAgICBjaGVjazogJ3Nhbmxvc3MnLFxyXG4gICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcclxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXHJcbiAgICAgIHNhbk1pbjogc2FuTWluLmlubmVyVGV4dCxcclxuICAgICAgc2FuTWF4OiBzYW5NYXguaW5uZXJUZXh0LFxyXG4gICAgICBpY29uOiBudWxsLFxyXG4gICAgICBkb2N1bWVudDoge1xyXG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcclxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxyXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcclxuICAgIGlmIChkYXRhLmxpbmtUeXBlID09PSAnY29jNy1saW5rJykge1xyXG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnZWZmZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShkYXRhKVxyXG4gICAgICAgIGlmIChsaW5rLl9saW5rRGF0YS5lZmZlY3QpIHtcclxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtsaW5rLl9saW5rRGF0YS5lZmZlY3RdKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNvbmRpdGlvblRvZ2dsZSAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY29uZGl0aW9uKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlQ29uZGl0aW9uKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyByZXZpdmUgKCkge1xyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmFjdG9yLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBoZWFsICgpIHtcclxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXHJcbiAgICAgIHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW5LZXkgOiB0aGlzLmFjdG9yLmlkXHJcbiAgICApXHJcbiAgICBjb25DaGVjay5zdGF5QWxpdmUgPSB0cnVlXHJcbiAgICBjb25DaGVjay50b01lc3NhZ2UoZXZlbnQuc2hpZnRLZXkpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25EcmFnVG9rZW5TdGFydCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIHR5cGU6ICdUb2tlbicsXHJcbiAgICAgIHV1aWQ6IHRoaXMudG9rZW4udXVpZFxyXG4gICAgfVxyXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uUmVzZXRDb3VudGVyIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldERhaWx5U2FuaXR5KClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkF1dG9Ub2dnbGUgKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykpIHtcclxuICAgICAgY29uc3QgYXR0cmliID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWJcclxuICAgICAgdGhpcy5hY3Rvci50b2dnbGVBdHRyaWJBdXRvKGF0dHJpYilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcclxuICAgIClcclxuICAgIGlmICh3ZWFwb24pIHtcclxuICAgICAgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KFxyXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSxcclxuICAgICAgICBpc0N0cmxLZXkoZXZlbnQpXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHJvbGwgdGhlIGFjdG9yIGNoYXJhY3RlcmlzdGljIGZyb20gZm9ybXVsYSB3aGVuIHBvc3NpYmxlLlxyXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcclxuICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcclxuICAgIHRoaXMuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxyXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcclxuICAgIEhvb2tzLmNhbGwoJ2FjdG9yTG9ja0NsaWNrZWRDb0M3JywgWyFpc0xvY2tlZF0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25GbGFnQ2xpY2tlZCAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IGZsYWdOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcclxuICAgIHRoaXMuYWN0b3IudG9nZ2xlQWN0b3JGbGFnKGZsYWdOYW1lKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uRm9ybXVsYUNsaWNrZWQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uV2hlZWwgKGV2ZW50KSB7XHJcbiAgICBsZXQgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB8fCBudWxsXHJcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xyXG4gICAgICB2YWx1ZSA9IHZhbHVlID09PSAwID8gMCA6IHZhbHVlIC0gMVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7XHJcbiAgICAgIHZhbHVlID0gdmFsdWUgKyAxXHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUpIHtcclxuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOlxyXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0SHAodmFsdWUpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOlxyXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAodmFsdWUpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzpcclxuICAgICAgICB0aGlzLmFjdG9yLnNldFNhbih2YWx1ZSlcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxyXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0THVjayh2YWx1ZSlcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzpcclxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlUmVhZE9ubHkgKGV2ZW50KSB7XHJcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5ID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHlcclxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgncmVhZC1vbmx5JylcclxuICB9XHJcblxyXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXHJcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcclxuXHJcbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxyXG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XHJcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXHJcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHtcclxuICAgICAgICBzdW1tYXJ5LnJlbW92ZSgpXHJcbiAgICAgICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxyXG5cclxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcclxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLmxhYmVscykge1xyXG4gICAgICAgIGxhYmVscy5hcHBlbmQoXHJcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxyXG5cclxuICAgICAgZGl2LmFwcGVuZChcclxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcclxuICAgICAgKVxyXG5cclxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcclxuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcclxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1zcGVjaWFsXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsfTwvZGl2PmBcclxuICAgICAgICApXHJcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxyXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykge1xyXG4gICAgICAgIHByb3BzLmFwcGVuZChcclxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXHJcblxyXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcclxuICAgICAgQ29DN1BhcnNlci5iaW5kRXZlbnRzSGFuZGxlcihkaXYpXHJcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwLCAoKSA9PiBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcclxuICAgIH1cclxuICAgIC8vICQoZXZlbnQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25TZWN0aW9uSGVhZGVyIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgLy8gbGV0IHNlY3Rpb24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ3NlY3Rpb24nKSxcclxuICAgIC8vICBwYW5uZWxDbGFzcyA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YSgncGFubmVsJyksXHJcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XHJcbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XHJcbiAgICBjb25zdCBzZWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdzZWN0aW9uJylcclxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxyXG4gICAgaWYgKHR5cGVvZiBwYW5uZWxDbGFzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVyblxyXG4gICAgY29uc3QgcGFubmVsID0gJChzZWN0aW9uKS5maW5kKGAucGFubmVsLiR7cGFubmVsQ2xhc3N9YClcclxuXHJcbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XHJcbiAgICBpZiAocGFubmVsLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XHJcbiAgICAgIC8vIENvdWxkIHJlbW92ZSBleHBhbmRlZCBjbGFzcyBhbmQgdXNlIChwYW5uZWwuaXMoJzp2aXNpYmxlJykpXHJcbiAgICAgIHBhbm5lbC5zbGlkZVVwKDIwMCwgKCkgPT4gcGFubmVsLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGBkYXRhLnBhbm5lbC4ke3Bhbm5lbENsYXNzfS5leHBhbmRlZGApXHJcblxyXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoXHJcbiAgICAgIHsgW2NhbWVsRmxhZ106ICFwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykgfSxcclxuICAgICAgeyByZW5kZXI6IGZhbHNlIH0pXHJcbiAgfVxyXG5cclxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJylcclxuICAgIGlmIChsaS5pcygnOnZpc2libGUnKSkgbGkuc2xpZGVVcCgyMDApXHJcbiAgICBlbHNlIGxpLnNsaWRlRG93bigyMDApXHJcbiAgfVxyXG5cclxuICBfb25JdGVtSGVhZGVyIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3Qgb2wgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLm5leHQoJ29sJylcclxuICAgIGlmIChvbC5pcygnOnZpc2libGUnKSkgb2wuc2xpZGVVcCgyMDApXHJcbiAgICBlbHNlIG9sLnNsaWRlRG93bigyMDApXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25JdGVtUG9wdXAgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxyXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcclxuXHJcbiAgICBDb0M3QWN0b3JTaGVldC5wb3B1cFNraWxsKGl0ZW0pXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgcG9wdXBTa2lsbCAoc2tpbGwpIHtcclxuICAgIHNraWxsLnN5c3RlbS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBza2lsbC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgIHsgYXN5bmM6IGZhbHNlIH1cclxuICAgIClcclxuICAgIC8vIGdhbWUuQ29DNy5lbnJpY2hlciggc2tpbGwuZGF0YS5kYXRhLmRlc2NyaXB0aW9uLmVucmljaGVkVmFsdWUpO1xyXG4gICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyhcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxEZXRhaWxzV2luZG93JyksXHJcbiAgICAgICAgY29udGVudDogc2tpbGwsXHJcbiAgICAgICAgYnV0dG9uczoge30sXHJcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2tpbGwnXSxcclxuICAgICAgICB3aWR0aDogNTIwLFxyXG4gICAgICAgIGhlaWdodDogNDgwLFxyXG4gICAgICAgIHNjcm9sbFk6IFsnLml0ZW0tZGVzY3JpcHRpb24nXSxcclxuICAgICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1kZXRhaWxzLmh0bWwnXHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSByb2xsaW5nIG9mIGFuIGl0ZW0gZnJvbSB0aGUgQWN0b3Igc2hlZXQsIG9idGFpbmluZyB0aGUgSXRlbSBpbnN0YW5jZSBhbmQgZGlzcGF0Y2hpbmcgdG8gaXQncyByb2xsIG1ldGhvZFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgYXN5bmMgX29uSXRlbVJvbGwgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAvLyBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWQ7XHJcbiAgICAvLyBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkO1xyXG4gICAgLy8gY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQ7XHJcbiAgICAvLyBsZXQgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKCk7XHJcblxyXG4gICAgLy8gY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXk7XHJcbiAgICAvLyBjaGVjay5pdGVtID0gaXRlbUlkO1xyXG4gICAgLy8gY2hlY2sucm9sbCgpO1xyXG4gICAgLy8gY2hlY2sudG9NZXNzYWdlKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25FZmZlY3QgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBlZmZlY3RJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmVmZmVjdElkXHJcbiAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmFjdG9yLmVmZmVjdHMuZ2V0KGVmZmVjdElkKVxyXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgY29uc3QgbGluayA9IG5ldyBDb0M3TGluaygpXHJcbiAgICAgIGF3YWl0IGxpbmsuc2V0RGF0YSh7IHR5cGU6ICdlZmZlY3QnLCBvYmplY3Q6IGVmZmVjdCB9KVxyXG4gICAgICBjb25zdCBsaW5rRGlhbG9nID0gbmV3IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cobGluaylcclxuICAgICAgbGlua0RpYWxvZy5yZW5kZXIodHJ1ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbldlYXBvblJvbGwgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcclxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gZXZlbnQuc2hpZnRLZXlcclxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcclxuICAgIC8vIGNvbnN0IGFjdG9yS2V5ID0gIXRoaXMudG9rZW4/IHRoaXMuYWN0b3IuYWN0b3JLZXkgOiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmRhdGEuX2lkfWA7IC8vUkVGQUNUT1JJTkcgKDIpXHJcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqKiovXHJcbiAgICBsZXQgYWN0b3JLZXlcclxuICAgIGlmICghdGhpcy50b2tlbikgYWN0b3JLZXkgPSB0aGlzLmFjdG9yLmlkXHJcbiAgICAvLyBTaGVldCB3YXMgb3BlbmVkIGZyb20gYWN0b3IgZGlyZWN0b3J5XHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gT3BlbmVkIGZyb20gdG9rZW5cclxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbiAmJiBnYW1lLmFjdG9ycy50b2tlbnNbdGhpcy50b2tlbi5pZF0pIHtcclxuICAgICAgICBhY3RvcktleSA9IGBUT0tFTi4ke3RoaXMudG9rZW4uaWR9YFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFjdG9yS2V5ID0gYCR7dGhpcy50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy50b2tlbi5pZH1gXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSAmJiBnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcclxuICAgICAgICBjaGVjazogJ2l0ZW0nLFxyXG4gICAgICAgIHR5cGU6ICd3ZWFwb24nLFxyXG4gICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lLFxyXG4gICAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxyXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuZnJvbUxpbmtEYXRhKGxpbmtEYXRhKS50aGVuKGRsZyA9PlxyXG4gICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcclxuICAgICAgKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHByb2NlZWRXaXRob3V0VGFyZ2V0XHJcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplIDw9IDApIHtcclxuICAgICAgICBwcm9jZWVkV2l0aG91dFRhcmdldCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgdGl0bGU6ICcgJyxcclxuICAgICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1RhcmdldFNlbGVjdGVkJywge1xyXG4gICAgICAgICAgICAgIHdlYXBvbjogd2VhcG9uLm5hbWVcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcclxuICAgICAgICAgICAgICBjYW5jZWw6IHtcclxuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcHJvY2VlZDoge1xyXG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2FuY2VsJyxcclxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAwIHx8IHByb2NlZWRXaXRob3V0VGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xyXG4gICAgICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XHJcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2FyblRvb01hbnlUYXJnZXQnKSlcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcihhY3RvcktleSwgaXRlbUlkLCBmYXN0Rm9yd2FyZClcclxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxyXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25SZWxvYWRXZWFwb24gKGV2ZW50KSB7XHJcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcclxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcclxuICAgICAgOiBudWxsXHJcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXHJcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXHJcbiAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnJlbG9hZCgpXHJcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMikge1xyXG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5zZXRCdWxsZXRzKDApXHJcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLnNob290QnVsbGV0cygxKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uQWRkQW1vIChldmVudCkge1xyXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXHJcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXHJcbiAgICAgIDogbnVsbFxyXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxyXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxyXG4gICAgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25XZWFwb25Ta2lsbFJvbGwgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcclxuICAgIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcclxuICAgIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkXHJcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJylcclxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcclxuICAgICAgOiBudWxsXHJcblxyXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuXHJcbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoKVxyXG4gICAgICBpZiAodXNhZ2UpIHtcclxuICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXHJcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXHJcbiAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcclxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XHJcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcclxuICAgIGNoZWNrLml0ZW0gPSBpdGVtSWRcclxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxyXG4gICAgY2hlY2sudG9NZXNzYWdlKClcclxuXHJcbiAgICAvLyBIQUNLOiBqdXN0IHRvIHBvcCB0aGUgYWR2YW5jZWQgcm9sbCB3aW5kb3dcclxuICAgIC8vIGNoZWNrLml0ZW0ucm9sbCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uV2VhcG9uRGFtYWdlIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcclxuICAgIGNvbnN0IHJhbmdlID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uLWRhbWFnZScpLmRhdGFzZXQucmFuZ2VcclxuICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xyXG4gICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXksXHJcbiAgICAgIHJhbmdlXHJcbiAgICB9KVxyXG4gICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSB0aGlzLmFjdG9yLnRva2VuS2V5XHJcbiAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBpdGVtSWRcclxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcclxuICAgIC8vIGNvbnNvbGUubG9nKCAnV2VhcG9uIGRhbWFnZSBDbGlja2VkJyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25PcHBvc2VkUm9sbCAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliID09PSAnZGInKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcclxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRCxcclxuICAgICAgZXZlbnQsXHJcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWxhYmVsJykpIHtcclxuICAgICAgZGF0YS5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcclxuICAgIH0gZWxzZSBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F0dHJpYnV0ZS1sYWJlbCcpKSB7XHJcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcclxuICAgICAgZGF0YS5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURcclxuICAgIH1cclxuXHJcbiAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihkYXRhKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xyXG4gICAqIEAgIHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXHJcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcclxuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xyXG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxyXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcclxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcclxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcclxuICAgICAgICBjaGFyYWN0ZXJpc3RpYzogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxyXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XHJcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXHJcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxyXG4gICAgICAgIGV2ZW50LFxyXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Sb2xsQXR0cmliVGVzdCAoZXZlbnQpIHtcclxuICAgIC8vIEZMQVRNT0RJRklFUlxyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgYXR0cmliID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXHJcbiAgICBpZiAoYXR0cmliID09PSAnZGInKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhL14tezAsMX1cXGQrJC8udGVzdChcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoXHJcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxyXG4gICAgICAgIClcclxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgICAgIGlmICghaXNOYU4oci50b3RhbCkgJiYgIShyLnRvdGFsID09PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcclxuICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNEYW1hZ2VSb2xsJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xyXG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XHJcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXHJcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxyXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxyXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxyXG4gICAgICAgIGF0dHJpYnV0ZTogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIsXHJcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcclxuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXHJcbiAgICAgICAgY2FyZFR5cGU6XHJcbiAgICAgICAgZXZlbnQuYWx0S2V5ICYmIGF0dHJpYiA9PT0gJ3NhbidcclxuICAgICAgICAgID8gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcclxuICAgICAgICAgIDogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXHJcbiAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX29uUm9sbFNraWxsVGVzdCAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXHJcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcclxuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xyXG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxyXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcclxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcclxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcclxuICAgICAgICBza2lsbElkOiBldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWQsXHJcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcclxuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcclxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXHJcbiAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XHJcblxyXG4gIC8vICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxyXG4gIC8vICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwge2VkaXRvcnM6IHRoaXMuZWRpdG9yc30pO1xyXG4gIC8vICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XHJcbiAgLy8gIGlmICggdXBkYXRlRGF0YSApIGRhdGEgPSBtZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKTtcclxuICAvLyAgZWxzZSBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpO1xyXG5cclxuICAvLyAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxyXG4gIC8vICBjb25zdCBkYW1hZ2UgPSBkYXRhLmRhdGE/LmRhbWFnZTtcclxuICAvLyAgaWYgKCBkYW1hZ2UgKSBkYW1hZ2UucGFydHMgPSBPYmplY3QudmFsdWVzKGRhbWFnZT8ucGFydHMgfHwge30pLm1hcChkID0+IFtkWzBdIHx8ICcnLCBkWzFdIHx8ICcnXSk7XHJcblxyXG4gIC8vICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcclxuICAvLyAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSk7XHJcbiAgLy8gfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAvKipcclxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xyXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuXHJcbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XHJcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ191cGRhdGVPYmplY3QnKTtcclxuICAgIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCAgIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIENmLiBzaGVldC5qcygyNDMpXHJcbiAgICBjb25zdCBvdmVycmlkZXMgPSBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QodGhpcy5hY3Rvci5vdmVycmlkZXMpXHJcbiAgICBjb25zdCBuYW1lID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/Lm5hbWVcclxuICAgIGlmIChuYW1lICYmIG92ZXJyaWRlcyAmJiBvdmVycmlkZXNbbmFtZV0pIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRWZmZWN0QXBwbGllZENhbnRPdmVycmlkZScsIHsgbmFtZSB9KVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1hZGp1c3RtZW50JykpIHtcclxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcclxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICA/IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXHJcbiAgICAgICAgICAgICAgOiBudWxsXHJcblxyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHtcclxuICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogbnVsbFxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV06IHZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlZGl0UmF0aW5nU2tpbGxOYW1lKSA9PT0gaXRlbS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgKGl0ZW0udmFsdWUgfHwgMCkgLVxyXG4gICAgICAgICAgICAgICAgKGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlIHx8IDApXHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPlxyXG4gICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4KSB8fFxyXG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxyXG4gICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWluKVxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyZWRpdE91dE9mUmFuZ2UnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluOiBOdW1iZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heDogTnVtYmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xyXG4gICAgICAgICAgLy8gVE9ETyA6IGNoZWNrIHdoeSBTQU4gb25seSA/XHJcbiAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFNhbihcclxuICAgICAgICAgICAgICBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEhwKFxyXG4gICAgICAgICAgICAgIHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XHJcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZVRleHRBcmVhKGV2ZW50LmN1cnJlbnRUYXJnZXQpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmlvLXNlY3Rpb24tdmFsdWUnKSkge1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcclxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XHJcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcclxuICAgICAgICAgIClcclxuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlQmlvVGl0bGUoaW5kZXgsIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25wYy1za2lsbC1zY29yZScpKSB7XHJcbiAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBpZiAoc2tpbGwpIHtcclxuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1uYW1lJykgfHxcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge31cclxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcclxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXHJcbiAgICAgICAgICAgICAgZGF0YVsnc3lzdGVtLnNraWxsTmFtZSddID0gcGFydHMuc2tpbGxOYW1lXHJcbiAgICAgICAgICAgICAgZGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoZGF0YSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtZm9ybXVsYScpKSB7XHJcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxyXG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcclxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xyXG4gICAgICAgICAgLy8gdGVzdGVyIHNpIGxlIGRiIHJldG91cm7DqSBlc3QgdmFsaWRlLlxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJ1xyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcclxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbGUgc2tpbGwgYXNzb2Npw6kgYSBsJ2FybWUgYSBjaGFuZ8OpXHJcbiAgICAgICAgLy8gVE9ETyA6IEZhY3RvcmlzYXRpb24gZHUgc3dpdGNoXHJcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcclxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dlYXBvbi1za2lsbCcpKSB7XHJcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcclxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgaWYgKHdlYXBvbiAmJiBza2lsbCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xyXG4gICAgICAgICAgICAgIGNhc2UgJ21haW4nOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxyXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IHNraWxsLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgIGNhc2UgJ2FsdGVybmF0aXYnOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxyXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSc6IHNraWxsLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMZSBub20gZGUgbCdhcm1lIGEgY2hhbmfDqVxyXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xyXG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXHJcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgaWYgKHdlYXBvbikge1xyXG4gICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHsgbmFtZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXHJcbiAgICAgICAgLy8gVE9ETyA6IEZhY3RvcmlzYXRpb24gZHUgc3dpdGNoXHJcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5yYW5nZS5ub3JtYWwgLi4uKVxyXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xyXG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXHJcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgaWYgKHdlYXBvbikge1xyXG4gICAgICAgICAgICAvLyB0ZXN0ZSBsYSB2YWxpZGl0w6kgZGUgbGEgZm9ybXVsZS5cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXHJcbiAgICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcclxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZUZvcm11bGEnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xyXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcclxuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uLy4uL2FwcHMvcGFyc2VyLmpzJ1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcclxuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXHJcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcclxuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcydcclxuXHJcbi8qKlxyXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3TlBDU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XHJcbiAgLyoqXHJcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XHJcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcclxuICAgKi9cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG5cclxuICAgIC8vIFRPRE8gOiBkbyB3ZSBuZWVkIHRoYXQgP1xyXG4gICAgc2hlZXREYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcclxuICAgIHNoZWV0RGF0YS5kaXNwbGF5Rm9ybXVsYSA9ICh0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKSB8fCBmYWxzZSlcclxuXHJcbiAgICBzaGVldERhdGEuaGFzU2FuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXHJcbiAgICBzaGVldERhdGEuaGFzTXAgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSAhPT0gbnVsbFxyXG4gICAgc2hlZXREYXRhLmhhc0x1Y2sgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUgIT09IG51bGxcclxuXHJcbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IGZhbHNlXHJcblxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XHJcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcclxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcclxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxyXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XHJcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XHJcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XHJcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxyXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcclxuICAgICAgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XHJcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxyXG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcclxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxyXG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XHJcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcclxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgfHxcclxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XHJcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcclxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5wZXJzb25hbERlc2NyaXB0aW9uPy52YWx1ZSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XHJcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXHJcblxyXG4gICAgICBjb25zdCBzYW5sb3NzTWVudSA9IHtcclxuICAgICAgICBpZDogJ3Nhbi1sb3NzLXJvbGwnLFxyXG4gICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxyXG4gICAgICAgIHNlY3Rpb246IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxyXG4gICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcclxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxyXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29weS10by1jbGlwYm9hcmQnLCBsYWJlbDogJ0NvcHkgdG8gY2xpcC1ib2FyZCcgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc2FubG9zc0NvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXHJcbiAgICAgIHNhbmxvc3NDb250ZXh0TWVudS5iaW5kKHNhbmxvc3NNZW51LCBodG1sLCB0aGlzLl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrLmJpbmQodGhpcykpXHJcbiAgICAgIHRoaXMubWVudXMucHVzaChzYW5sb3NzQ29udGV4dE1lbnUpXHJcbiAgICB9XHJcblxyXG4gICAgaHRtbC5maW5kKCcucm9sbC1zYW4nKS5jbGljayh0aGlzLl9vblNhbkNoZWNrLmJpbmQodGhpcykpXHJcbiAgICAvLyBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XHJcbiAgICAvLyAgIGh0bWxcclxuICAgIC8vICAgICAuZmluZCgnW25hbWU9XCJkYXRhLmF0dHJpYnMuaHAudmFsdWVcIl0nKVxyXG4gICAgLy8gICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXHJcbiAgICAvLyB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljayAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xyXG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIsXHJcbiAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxyXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXHJcbiAgICAgIGV2ZW50LFxyXG4gICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0ssXHJcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcclxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxyXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcclxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAoJ3NlbmQtY2hhdCcpOlxyXG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXHJcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxyXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAoJ2NvcHktdG8tY2xpcGJvYXJkJyk6XHJcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcclxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXHJcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBpZiAoXHJcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcclxuICAgICAgIXRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWRcclxuICAgICkge1xyXG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpICYmXHJcbiAgICAgIGdhbWUudXNlci5pc0dNXHJcbiAgICApIHtcclxuICAgICAgbGV0IGRpZmZpY3VsdHksIG1vZGlmaWVyXHJcbiAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcclxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAodXNhZ2UpIHtcclxuICAgICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXHJcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcclxuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxyXG4gICAgICAgIHNhbk1pbjogdGhpcy5hY3Rvci5zeXN0ZW0uc3BlY2lhbC5zYW5Mb3NzLmNoZWNrUGFzc2VkLFxyXG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zeXN0ZW0uc3BlY2lhbC5zYW5Mb3NzLmNoZWNrRmFpbGxlZCxcclxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxyXG4gICAgICAgICAgPyB0aGlzLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXHJcbiAgICAgICAgICA6IHRoaXMuYWN0b3IubmFtZSxcclxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xyXG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgbW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSBsaW5rRGF0YS5tb2RpZmllciA9IG1vZGlmaWVyXHJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XHJcbiAgICAgIGNvbnN0IGxpbmsgPSBDb0M3UGFyc2VyLmNyZWF0ZUNvQzdMaW5rKGxpbmtEYXRhKVxyXG4gICAgICBpZiAobGluaykge1xyXG4gICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcclxuICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XHJcbiAgICAgICAgICAgIGNoZWNrOiBsaW5rXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc2FuRGF0YSA9IHtcclxuICAgICAgICBzYW5NYXg6IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrRmFpbGxlZCxcclxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxyXG4gICAgICAgIHNhblJlYXNvbjogdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZT8ubGVuZ3RoXHJcbiAgICAgICAgICA/IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGVcclxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxyXG4gICAgICAgIHRva2VuS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XHJcbiAgICAgIH1cclxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2xvc2VTaGVldCAoKSB7XHJcbiAgICB0aGlzLmFjdG9yLnVuc2V0QWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXHJcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XHJcbiAgICogQHJldHVybnMge09iamVjdH1cclxuICAgKi9cclxuXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYyddLFxyXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvbnBjLXNoZWV0Lmh0bWwnLFxyXG4gICAgICB3aWR0aDogNTgwLFxyXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxyXG4gICAgICBtaW5pbWl6YWJsZTogdHJ1ZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXHJcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG5cclxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcclxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdCkge1xyXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtc2NvcmUnKSkge1xyXG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcclxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5uYW1lLFxyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmb3JjZUF1dG8gKGFwcCwgaHRtbCkge1xyXG4gICAgaHRtbC5oZWlnaHQoJ2F1dG8nKVxyXG4gIH1cclxuXHJcbiAgc2V0UG9zaXRpb24gKGEpIHtcclxuICAgIHN1cGVyLnNldFBvc2l0aW9uKGEpXHJcbiAgICBDb0M3TlBDU2hlZXQuZm9yY2VBdXRvKGEsIHRoaXMuX2VsZW1lbnQpXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xyXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuL25wYy1zaGVldC5qcydcclxuXHJcbi8qKlxyXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3Q3JlYXR1cmVTaGVldCBleHRlbmRzIENvQzdOUENTaGVldCB7XHJcbiAgLyoqXHJcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XHJcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcclxuICAgKi9cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSB0cnVlXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgQWN0b3IgU2hlZXRcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICducGMnLCAnY3JlYXR1cmUnXVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cclxuZXhwb3J0IGNsYXNzIENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNyddLFxyXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUxvc3NUeXBlRGlhbG9nVGl0bGUnKSxcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2FuaXR5LWxvc3MtdHlwZS5oYnMnLFxyXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldERhdGEgKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG4gICAgZGF0YS5pc0ltbXVuaXR5ID0gZGF0YS5vYmplY3QudHlwZSA9PT0gJ2ltbXVuaXR5J1xyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBodG1sLmZpbmQoJy5maWVsZF90eXBlJykuY2hhbmdlKHRoaXMuX29uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcykpXHJcbiAgICBodG1sLmZpbmQoJy5kaWFsb2ctYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b25DbGljay5iaW5kKHRoaXMpKVxyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuICB9XHJcblxyXG4gIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5idXR0b24gPT09ICdhZGQnKSB7XHJcbiAgICAgIGNvbnN0IGh0bWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy53aW5kb3ctY29udGVudCcpXHJcbiAgICAgIGNvbnN0IHR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcclxuICAgICAgY29uc3QgbmFtZSA9IGh0bWwuZmluZCgnLmZpZWxkX25hbWUnKS52YWwoKVxyXG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGh0bWwuZmluZCgnLmZpZWxkX3ZhbHVlJykudmFsKCkpXHJcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPVxyXG4gICAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzID8/IFtdXHJcbiAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XHJcbiAgICAgICAgdHlwZTogbmFtZSxcclxuICAgICAgICB0b3RhbExvc3M6IHZhbHVlLFxyXG4gICAgICAgIGltbXVuaXR5OiB0eXBlID09PSAnaW1tdW5pdHknXHJcbiAgICAgIH0pXHJcbiAgICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gbGVmdC50eXBlLmxvY2FsZUNvbXBhcmUocmlnaHQudHlwZSlcclxuICAgICAgfSlcclxuICAgICAgdGhpcy5vYmplY3QuYWN0b3IudXBkYXRlKHsgJ2RhdGEuc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcclxuICAgIH1cclxuICAgIHRoaXMuY2xvc2UoKVxyXG4gIH1cclxuXHJcbiAgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xyXG4gICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcclxuICAgIHRoaXMub2JqZWN0Lm5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcclxuICAgIHRoaXMub2JqZWN0LnR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcclxuICAgIHRoaXMucmVuZGVyKHRydWUpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHt9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIEZvbnRGYWNlLCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXHJcbmltcG9ydCB7IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcydcclxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdDaGFyYWN0ZXJTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcclxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XHJcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQ29DN0NoYXJhY3RlclNoZWV0Jykge1xyXG4gICAgICBpZiAoIXRoaXMuc3VtbWFyaXplZCkgdGhpcy5zdW1tYXJpemVkID0gZmFsc2VcclxuICAgICAgbGV0IGJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXHJcbiAgICAgIGJ1dHRvbnMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbGFiZWw6IHRoaXMuc3VtbWFyaXplZFxyXG4gICAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYXhpbWl6ZScpXHJcbiAgICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1bW1hcml6ZScpLFxyXG4gICAgICAgICAgY2xhc3M6ICd0ZXN0LWV4dHJhLWljb24nLFxyXG4gICAgICAgICAgaWNvbjogdGhpcy5zdW1tYXJpemVkXHJcbiAgICAgICAgICAgID8gJ2ZhcyBmYS13aW5kb3ctbWF4aW1pemUnXHJcbiAgICAgICAgICAgIDogJ2ZhcyBmYS13aW5kb3ctbWluaW1pemUnLFxyXG4gICAgICAgICAgb25jbGljazogZXZlbnQgPT4gdGhpcy50b2dnbGVTaGVldE1vZGUoZXZlbnQpXHJcbiAgICAgICAgfS8qICxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICBjbGFzczogJ2RyYWctdGVzdC10aGluZ3knLFxyXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZDEwJyxcclxuICAgICAgICAgIG9uZHJhZ3N0YXJ0OiAoKSA9PiB1aS5ub3RpZmljYXRpb25zLmluZm8oJ2RyYWcgc3RhcnRlZCcpXHJcbiAgICAgICAgfSAqL1xyXG4gICAgICBdLmNvbmNhdChidXR0b25zKVxyXG4gICAgICByZXR1cm4gYnV0dG9uc1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZVNoZWV0TW9kZSAoZXZlbnQpIHtcclxuICAgIHRoaXMuc3VtbWFyaXplZCA9ICF0aGlzLnN1bW1hcml6ZWRcclxuICAgIGF3YWl0IHRoaXMuY2xvc2UoKVxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuc3VtbWFyaXplZFxyXG4gICAgICA/IHtcclxuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhY3RvcicsICdjaGFyYWN0ZXInLCAnc3VtbWFyaXplZCddLFxyXG4gICAgICAgICAgaGVpZ2h0OiAyMDAsXHJcbiAgICAgICAgICByZXNpemFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgd2lkdGg6IDcwMFxyXG4gICAgICAgIH1cclxuICAgICAgOiBDb0M3Q2hhcmFjdGVyU2hlZXQuZGVmYXVsdE9wdGlvbnNcclxuICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUsIG9wdGlvbnMpXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmlzRWRpdGFibGUgJiZcclxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJykgPT09ICd1bmRlZmluZWQnXHJcbiAgICApIHtcclxuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnLCBmYWxzZSlcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXHJcbiAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKSA9PT0gJ3VuZGVmaW5lZCdcclxuICAgICkge1xyXG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nLCB0cnVlKVxyXG4gICAgfVxyXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdE1vZGVWYWx1ZSA9XHJcbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJykgPz8gZmFsc2VcclxuICAgIHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiA9XHJcbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID8/IHRydWVcclxuICAgIHNoZWV0RGF0YS5zaG93SWNvbnNPbmx5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd0ljb25zT25seScpXHJcblxyXG4gICAgaWYgKHRoaXMuYWN0b3Iub2NjdXBhdGlvbikge1xyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3Mub2NjdXBhdGlvbiA9IHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5uYW1lXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gdHJ1ZVxyXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gZmFsc2VcclxuXHJcbiAgICBpZiAodGhpcy5hY3Rvci5hcmNoZXR5cGUpIHtcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlLm5hbWVcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZVNldCA9IHRydWVcclxuICAgIH0gZWxzZSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MuYXJjaGV0eXBlU2V0ID0gZmFsc2VcclxuXHJcbiAgICBzaGVldERhdGEudG90YWxFeHBlcmllbmNlID0gdGhpcy5hY3Rvci5leHBlcmllbmNlUG9pbnRzXHJcbiAgICBzaGVldERhdGEudG90YWxPY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnRcclxuICAgIHNoZWV0RGF0YS5pbnZhbGlkT2NjdXBhdGlvblBvaW50cyA9XHJcbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudCkgIT09XHJcbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnN5c3RlbS5kZXZlbG9wbWVudD8ub2NjdXBhdGlvbilcclxuICAgIHNoZWV0RGF0YS50b3RhbEFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnRcclxuICAgIHNoZWV0RGF0YS5pbnZhbGlkQXJjaGV0eXBlUG9pbnRzID1cclxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnQpICE9PVxyXG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LmFyY2hldHlwZSlcclxuICAgIHNoZWV0RGF0YS50b3RhbFBlcnNvbmFsID0gdGhpcy5hY3Rvci5wZXJzb25hbFBvaW50c1NwZW50XHJcbiAgICBzaGVldERhdGEuaW52YWxpZFBlcnNvbmFsUG9pbnRzID1cclxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudCkgIT09XHJcbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnN5c3RlbS5kZXZlbG9wbWVudD8ucGVyc29uYWwpXHJcbiAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4ID0gTnVtYmVyKFxyXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XHJcbiAgICApXHJcbiAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWluID0gTnVtYmVyKFxyXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWluXHJcbiAgICApXHJcbiAgICBzaGVldERhdGEuaW52YWxpZENyZWRpdFJhdGluZyA9XHJcbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA+XHJcbiAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNYXggfHxcclxuICAgICAgdGhpcy5hY3Rvci5jcmVkaXRSYXRpbmdTa2lsbD8uc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uIDxcclxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01pblxyXG4gICAgc2hlZXREYXRhLnB1bHBUYWxlbnRDb3VudCA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxyXG4gICAgICA/IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxyXG4gICAgICA6IDBcclxuICAgIHNoZWV0RGF0YS5taW5QdWxwVGFsZW50cyA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5zeXN0ZW0udGFsZW50c1xyXG4gICAgICA/IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5zeXN0ZW0udGFsZW50c1xyXG4gICAgICA6IDBcclxuICAgIHNoZWV0RGF0YS5pbnZhbGlkUHVscFRhbGVudHMgPSBzaGVldERhdGEucHVscFRhbGVudENvdW50IDwgc2hlZXREYXRhLm1pblB1bHBUYWxlbnRzXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc0RldmVsb3BtZW50UGhhc2UgPSB0aGlzLmFjdG9yLmhhc0RldmVsb3BtZW50UGhhc2VcclxuXHJcbiAgICBzaGVldERhdGEuYWxsb3dEZXZlbG9wbWVudCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpXHJcbiAgICBzaGVldERhdGEuYWxsb3dDaGFyQ3JlYXRpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJylcclxuICAgIHNoZWV0RGF0YS5kZXZlbG9wbWVudFJvbGxGb3JMdWNrID0gZ2FtZS5zZXR0aW5ncy5nZXQoXHJcbiAgICAgICdDb0M3JyxcclxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXHJcbiAgICApXHJcbiAgICBzaGVldERhdGEuc2hvd0RldlBhbm5lbCA9IHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50IHx8IHNoZWV0RGF0YS5hbGxvd0NoYXJDcmVhdGlvblxyXG5cclxuICAgIHNoZWV0RGF0YS5tYW51YWxDcmVkaXQgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnbWFudWFsQ3JlZGl0JylcclxuICAgIGlmICghc2hlZXREYXRhLm1hbnVhbENyZWRpdCkge1xyXG4gICAgICBzaGVldERhdGEuY3JlZGl0ID0ge31cclxuICAgICAgbGV0IGZhY3RvclxyXG4gICAgICBsZXQgbW9uZXRhcnlTeW1ib2xcclxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0KSB7XHJcbiAgICAgICAgZmFjdG9yID0gMVxyXG4gICAgICAgIG1vbmV0YXJ5U3ltYm9sID0gJyQnXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yID0gcGFyc2VJbnQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdC5tdWx0aXBsaWVyKVxyXG4gICAgICAgICAgPyBwYXJzZUludChzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpXHJcbiAgICAgICAgICA6IDFcclxuICAgICAgICBtb25ldGFyeVN5bWJvbCA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jcmVkaXQubW9uZXRhcnlTeW1ib2xcclxuICAgICAgICAgID8gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdC5tb25ldGFyeVN5bWJvbFxyXG4gICAgICAgICAgOiAnJCdcclxuICAgICAgfVxyXG5cclxuICAgICAgc2hlZXREYXRhLmNyZWRpdC5zcGVuZGluZ0xldmVsID0gYCR7bW9uZXRhcnlTeW1ib2x9JHt0aGlzLmFjdG9yLnNwZW5kaW5nTGV2ZWwgKiBmYWN0b3J9YFxyXG4gICAgICBzaGVldERhdGEuY3JlZGl0LmFzc2V0cyA9IGAke21vbmV0YXJ5U3ltYm9sfSR7dGhpcy5hY3Rvci5hc3NldHMgKiBmYWN0b3J9YFxyXG4gICAgICBzaGVldERhdGEuY3JlZGl0LmNhc2ggPSBgJHttb25ldGFyeVN5bWJvbH0ke3RoaXMuYWN0b3IuY2FzaCAqIGZhY3Rvcn1gXHJcbiAgICB9XHJcblxyXG4gICAgc2hlZXREYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxyXG5cclxuICAgIHNoZWV0RGF0YS5zdW1tYXJpemVkID0gdGhpcy5zdW1tYXJpemVkICYmICFzaGVldERhdGEucGVybWlzc2lvbkxpbWl0ZWRcclxuICAgIHNoZWV0RGF0YS5za2lsbExpc3QgPSBbXVxyXG4gICAgbGV0IHByZXZpb3VzU3BlYyA9ICcnXHJcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHNoZWV0RGF0YS5za2lsbHMpIHtcclxuICAgICAgaWYgKHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5KSB7XHJcbiAgICAgICAgaWYgKHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcclxuICAgICAgICAgIGlmIChwcmV2aW91c1NwZWMgIT09IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvbikge1xyXG4gICAgICAgICAgICBwcmV2aW91c1NwZWMgPSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cclxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgICBpc1NwZWNpYWxpemF0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgIG5hbWU6IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzaGVldERhdGEuc2tpbGxMaXN0LnB1c2goc2tpbGwpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlID0gWy4uLnNoZWV0RGF0YS5za2lsbHNdLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgcmV0dXJuIGIuc3lzdGVtLnZhbHVlIC0gYS5zeXN0ZW0udmFsdWVcclxuICAgIH0pXHJcbiAgICBzaGVldERhdGEudG9wU2tpbGxzID0gWy4uLnNoZWV0RGF0YS5za2lsbHNCeVZhbHVlXS5zbGljZSgwLCAxNClcclxuICAgIHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlID0gc2hlZXREYXRhLnNraWxsc0J5VmFsdWUuZmlsdGVyKFxyXG4gICAgICBza2lsbCA9PiBzaGVldERhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnJhcml0eVxyXG4gICAgKVxyXG4gICAgc2hlZXREYXRhLnRvcFdlYXBvbnMgPSBbLi4uc2hlZXREYXRhLm1lbGVlV3BuLCAuLi5zaGVldERhdGEucmFuZ2VXcG5dXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGEuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlIC0gYi5zeXN0ZW0uc2tpbGwubWFpbj8udmFsdWVcclxuICAgICAgfSlcclxuICAgICAgLnJldmVyc2UoKVxyXG4gICAgICAuc2xpY2UoMCwgMylcclxuICAgIHNoZWV0RGF0YS5kaXNwbGF5UGxheWVyTmFtZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxyXG4gICAgICAnQ29DNycsXHJcbiAgICAgICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnXHJcbiAgICApXHJcbiAgICBpZiAoc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lICYmICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSkge1xyXG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJVc2VyXHJcbiAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLnBsYXllcm5hbWUgPSB1c2VyLm5hbWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5za2lsbHMubGVuZ3RoID09PSAwXHJcblxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XHJcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcclxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcclxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxyXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XHJcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XHJcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XHJcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxyXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcclxuICAgICAgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XHJcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxyXG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxyXG5cclxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyB8fFxyXG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XHJcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XHJcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyB8fFxyXG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzIHx8XHJcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZEJhY2tzdG9yeSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxyXG4gIH1cclxuXHJcbiAgX3NhdmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLl9zYXZlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXHJcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbJy5yaWdodC1wYW5lbCAudGFiLmRldmVsb3BtZW50IG9sJ11cclxuICAgIHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggPSBzZWxlY3RvcnMucmVkdWNlKChwb3MsIHNlbCkgPT4ge1xyXG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXHJcbiAgICAgIHBvc1tzZWxdID0gQXJyYXkuZnJvbShlbCkubWFwKGVsID0+IGVsLnNjcm9sbExlZnQpXHJcbiAgICAgIHJldHVybiBwb3NcclxuICAgIH0sIHt9KVxyXG4gIH1cclxuXHJcbiAgX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXHJcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbJy5yaWdodC1wYW5lbCAudGFiLmRldmVsb3BtZW50IG9sJ11cclxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggfHwge31cclxuICAgIGZvciAoY29uc3Qgc2VsIG9mIHNlbGVjdG9ycykge1xyXG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXHJcbiAgICAgIGVsLmVhY2goKGksIGVsKSA9PiB7IGVsLnNjcm9sbExlZnQgPSBwb3NpdGlvbnNbc2VsXT8uW2ldIHx8IDAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnY2hhcmFjdGVyJ10sXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL2luZGV4Lmh0bWwnLFxyXG4gICAgICB3aWR0aDogNjg3LFxyXG4gICAgICBoZWlnaHQ6IDYyMyxcclxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXHJcbiAgICAgIHNjcm9sbFk6IFsnLnJpZ2h0LXBhbmVsIC50YWInXSxcclxuICAgICAgdGFiczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXHJcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXHJcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG5cclxuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIpIHtcclxuICAgICAgLy8gTU9ESUY6IDAuOC54IG93bmVyIGRlcHJlY2F0ZWQgID0+IGlzT3duZXJcclxuICAgICAgaHRtbFxyXG4gICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZS5mbGFnZ2VkNGRldicpXHJcbiAgICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2tpbGxEZXYoZXZlbnQpKVxyXG4gICAgICBodG1sXHJcbiAgICAgICAgLmZpbmQoJy5yZXNldC1vY2N1cGF0aW9uJylcclxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldE9jY3VwYXRpb24oKSlcclxuICAgICAgaHRtbFxyXG4gICAgICAgIC5maW5kKCcucmVzZXQtYXJjaGV0eXBlJylcclxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldEFyY2hldHlwZSgpKVxyXG4gICAgICBodG1sLmZpbmQoJy5vcGVuLWl0ZW0nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZXRhaWxzKGV2ZW50KSlcclxuICAgICAgLy8gaHRtbFxyXG4gICAgICAvLyAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXHJcbiAgICAgIC8vICAgLmNoYW5nZShhc3luYyBldmVudCA9PntcclxuICAgICAgLy8gICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgLy8gICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgIC8vICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoIGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnZhbHVlKVxyXG4gICAgICAvLyAgICAgaWYoICFpc05hTih2YWx1ZSkpIGF3YWl0IHRoaXMuYWN0b3Iuc2V0SHAoZXZlbnQpXHJcbiAgICAgIC8vICAgICBlbHNlIHVpLm5vdGlmaWNhdGlvbnMud2FybignRXJyb3IgcGFyc2luZyBIUCB2YWx1ZScpXHJcbiAgICAgIC8vICAgfSlcclxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLWxpc3QtbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICB0aGlzLnRvZ2dsZVNraWxsTGlzdE1vZGUoZXZlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS11bmNvbW1vbi1tb2RlJykuY2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUoZXZlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICAgIGh0bWxcclxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1hZGQnKVxyXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uQWRkU2FuaXR5TG9zc1JlYXNvbi5iaW5kKHRoaXMpKVxyXG4gICAgICAgIGh0bWxcclxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1kZWxldGUnKVxyXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbi5iaW5kKHRoaXMpKVxyXG4gICAgICAgIGh0bWxcclxuICAgICAgICAgIC5maW5kKCcudG9nZ2xlLWtlZXBlci1mbGFncycpXHJcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Ub2dnbGVLZWVwZXJGbGFncy5iaW5kKHRoaXMpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25Ub2dnbGVLZWVwZXJGbGFncyAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcpIHtcclxuICAgICAgY2FzZSAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCc6XHJcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRGbGFnKFxyXG4gICAgICAgICAgJ0NvQzcnLFxyXG4gICAgICAgICAgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLFxyXG4gICAgICAgICAgIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxyXG4gICAgICAgIClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdteXRob3NIYXJkZW5lZCc6XHJcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJywgIXRoaXMuYWN0b3IubXl0aG9zSGFyZGVuZWQpXHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkFkZFNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBuZXcgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlcihcclxuICAgICAge1xyXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLFxyXG4gICAgICAgIHR5cGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXHJcbiAgICAgIH0sXHJcbiAgICAgIHt9XHJcbiAgICApLnJlbmRlcih0cnVlKVxyXG4gIH1cclxuXHJcbiAgX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IG9mZnNldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcclxuICAgICAgLmNsb3Nlc3QoJy5mbGV4cm93JylcclxuICAgICAgLmRhdGEoJ29mZnNldCcpXHJcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gdGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxyXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zcGxpY2Uob2Zmc2V0LCAxKVxyXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xyXG4gICAgICByZXR1cm4gbGVmdC50eXBlLmxvY2FsZUNvbXBhcmUocmlnaHQudHlwZSlcclxuICAgIH0pXHJcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZVNraWxsTGlzdE1vZGUgKGV2ZW50KSB7XHJcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXHJcbiAgICAgICdDb0M3JyxcclxuICAgICAgJ3NraWxsTGlzdE1vZGUnLFxyXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXHJcbiAgfVxyXG5cclxuICBhc3luYyB0b2dnbGVTa2lsbFVuY29tbW9uTW9kZSAoZXZlbnQpIHtcclxuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcclxuICAgICAgJ0NvQzcnLFxyXG4gICAgICAnc2tpbGxTaG93VW5jb21tb24nLFxyXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJylcclxuICAgIClcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uU2tpbGxEZXYgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXHJcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmRldmVsb3BTa2lsbChza2lsbElkLCBldmVudC5zaGlmdEtleSlcclxuICB9XHJcblxyXG4gIF9vbkl0ZW1EZXRhaWxzIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgdHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXHJcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvclt0eXBlXVxyXG4gICAgaWYgKGl0ZW0pIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVuZGVyU2hlZXQgKHNoZWV0LCBodG1sKSB7XHJcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnKSkge1xyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpLnRvTG93ZXJDYXNlKCkgPT09XHJcbiAgICAgICAgICAnbnVsbCdcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxyXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcclxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcclxuICAgICAgICAgICAgJy0tbWFpbi1zaGVldC1iZycsXHJcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLy8gY29uc3QgYm9yZGVySW1hZ2UgPSBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScpO1xyXG4gICAgICAgICAgLy8gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnLCAnJyk7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJykgIT09ICdzbGljZSdcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uaHJlZj8uZW5kc1dpdGgoJ2NvYzdnLmNzcycpKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3R5bGVTaGVldCkge1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LnJ1bGVzW2ldLnNlbGVjdG9yVGV4dCA9PT0gJy5zaGVldFYyLmNoYXJhY3RlciBmb3JtJ1xyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNzc1J1bGVJbmRleCA9IGlcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNzc1J1bGVJbmRleCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IENTU1N0eWxlID0gc3R5bGVTaGVldC5ydWxlc1tjc3NSdWxlSW5kZXhdLnN0eWxlXHJcbiAgICAgICAgICAgICAgQ1NTU3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JvcmRlci1pbWFnZScpXHJcbiAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoXHJcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCcsXHJcbiAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvJzpcclxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW4nOlxyXG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvbnRhaW4nKVxyXG4gICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY292ZXInOlxyXG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJykpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBnYW1lLnNldHRpbmdzXHJcbiAgICAgICAgICAgIC5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJylcclxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXHJcbiAgICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcclxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcclxuICAgICAgICAgICAgJy0tb3RoZXItc2hlZXQtYmcnLFxyXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09XHJcbiAgICAgICAgICAnbnVsbCdcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxyXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWltYWdlJyxcclxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcclxuICAgICAgICAgICAgJy0tbWFpbi1zaGVldC1pbWFnZScsXHJcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJylcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpKSB7XHJcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXHJcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcclxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJylcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InKSkge1xyXG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxyXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcclxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKSkge1xyXG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxyXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGl2ZS1jb2xvcicsXHJcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnKSkge1xyXG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKCctLXNraWxsLWxlbmd0aCcsICdhdXRvJylcclxuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1zcGVjaWFsaXphdGlvbi1sZW5ndGgnLCAnYXV0bycpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Rm9udCA9IG5ldyBGb250RmFjZShcclxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxyXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JylcclxuICAgICAgICApXHJcbiAgICAgICAgY3VzdG9tU2hlZXRGb250XHJcbiAgICAgICAgICAubG9hZCgpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9hZGVkRmFjZSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tU2hlZXRDdXJzaXZlRm9udCA9IG5ldyBGb250RmFjZShcclxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxyXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpLFxyXG4gICAgICAgICAgeyB3ZWlnaHQ6ICdib2xkJyB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnRcclxuICAgICAgICAgIC5sb2FkKClcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcclxuICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJykpIHtcclxuICAgICAgICBjb25zdCBzaXplID0gYCR7Z2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpfXB4YFxyXG4gICAgICAgIGlmIChzaXplICE9PSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJykpIHtcclxuICAgICAgICAgICQoJzpyb290JykuY3NzKCdmb250LXNpemUnLCBzaXplKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2Ygc2hlZXQuYWN0b3I/LnN5c3RlbS5wYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0LmFjdG9yLnN5c3RlbS5wYW5uZWwpKSB7XHJcbiAgICAgICAgY29uc3QgcGFubmVsQ2xhc3MgPSBjaGF0SGVscGVyLmNhbWVsQ2FzZVRvSHlwaGVuKGtleSlcclxuICAgICAgICBjb25zdCBwYW5uZWwgPSBodG1sLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxyXG4gICAgICAgIGlmICh2YWx1ZS5leHBhbmRlZCkgcGFubmVsLmFkZENsYXNzKCdleHBhbmRlZCcpXHJcbiAgICAgICAgZWxzZSBwYW5uZWwucmVtb3ZlQ2xhc3MoJ2V4cGFuZGVkJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSAqL1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdDb21iYXQge1xyXG4gIHN0YXRpYyByZW5kZXJDb21iYXRUcmFja2VyIChhcHAsIGh0bWwsIGRhdGEpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRDb21iYXQgPSBkYXRhLmNvbWJhdHNbZGF0YS5jdXJyZW50SW5kZXggLSAxXVxyXG4gICAgaWYgKCFjdXJyZW50Q29tYmF0KSByZXR1cm5cclxuXHJcbiAgICAvLyBUT0RPIDogU2kgbGUgY29tYmF0IGVzdCBkZWphIGRlYnV0w6kgYXZhbnQgY2hhcmdlbWVudCBsYSBmb25jdGlvbiBkJ2luaXRpYXRpdmUgcG9pbnRlIHZlcnMgbCdhbmNpZW5uZS5cclxuICAgIC8vIGxhIGZvbmN0aW9uIGF0dHJpYnXDqWUgZXN0IGRhdGEuY29tYmF0LnJvbGxJbml0aWF0aXZlXHJcbiAgICBodG1sLmZpbmQoJy5jb21iYXRhbnQnKS5lYWNoKChpLCBlbCkgPT4ge1xyXG4gICAgICAvLyBpZiggZ2FtZS5jb21iYXQuc3RhcnRlZCl7XHJcblxyXG4gICAgICBjb25zdCBjb21iSWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tYmF0YW50LWlkJylcclxuICAgICAgY29uc3QgY29tYmF0YW50Q29udHJvbHNEaXYgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY29tYmF0YW50LWNvbnRyb2xzJylcclxuICAgICAgLy8gY29uc3QgY29tYmF0YW50ID0gZ2FtZS5jb21iYXQuZ2V0Q29tYmF0YW50KGNvbWJJZCk7XHJcbiAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGN1cnJlbnRDb21iYXQuY29tYmF0YW50cy5nZXQoY29tYklkKVxyXG5cclxuICAgICAgaWYgKGNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XHJcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcclxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFjdGl2ZSBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICdDb0M3LlB1dEd1bkF3YXknXHJcbiAgICAgICAgICApfVwiIGRhdGEtY29udHJvbD1cImRyYXdHdW5cIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tcmV2b2x2ZXJcIj48L2k+PC9hPmBcclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcclxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgJ0NvQzcuRHJhd0d1bidcclxuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSA9PT0gJ29wdGlvbmFsJyAmJlxyXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0JylcclxuICAgICAgKSB7XHJcbiAgICAgICAgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlKSB7XHJcbiAgICAgICAgICBjb25zdCB0b2tlbkluaXRpYXRpdmUgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4taW5pdGlhdGl2ZScpXHJcbiAgICAgICAgICBjb25zdCBpbml0aWF0aXZlVGVzdCA9IHRva2VuSW5pdGlhdGl2ZS5xdWVyeVNlbGVjdG9yKCcuaW5pdGlhdGl2ZScpXHJcbiAgICAgICAgICBjb25zdCByb2xsID1cclxuICAgICAgICAgICAgMTAwICogY29tYmF0YW50LmluaXRpYXRpdmUgLSAxMDAgKiBNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKVxyXG4gICAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKSkge1xyXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxyXG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmdW1ibGUnKVxyXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxyXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxyXG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmYWlsdXJlJylcclxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXHJcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XHJcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ3JlZ3VsYXItc3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlSZWd1bGFyJ1xyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcclxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnaGFyZC1zdWNjZXNzJylcclxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUhhcmQnXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxyXG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdleHRyZW1lLXN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5RXh0cmVtZSdcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxyXG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdjcml0aWNhbCcpXHJcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlDcml0aWNhbCdcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoY29tYmF0YW50LmluaXRpYXRpdmUgPCAwKSB7XHJcbiAgICAgICAgY29uc3QgaDQgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4tbmFtZScpLnF1ZXJ5U2VsZWN0b3IoJ2g0JylcclxuICAgICAgICBjb25zdCBzcGFuID0gZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5pbml0aWF0aXZlJylcclxuICAgICAgICBoNC5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcclxuICAgICAgICBoNC5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcclxuICAgICAgICBzcGFuLnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcclxuXHJcbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnZGFya3JlZCdcclxuICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JsYWNrJ1xyXG4gICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgaHRtbC5maW5kKCcuYWRkLWluaXQnKS5jbGljayhldmVudCA9PiBDb0M3Q29tYmF0Ll9vblRvZ2dsZUd1bihldmVudCkpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlR3VuIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGxpID0gYnRuLmNsb3Nlc3QoJy5jb21iYXRhbnQnKVxyXG4gICAgY29uc3QgYyA9IGF3YWl0IGdhbWUuY29tYmF0LmNvbWJhdGFudHMuZ2V0KGxpLmRhdGFzZXQuY29tYmF0YW50SWQpXHJcbiAgICBpZiAoYy5hY3Rvci5pc093bmVyKSB7XHJcbiAgICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcclxuICAgICAgICBhd2FpdCBjLnNldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJywgZmFsc2UpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIHRydWUpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdJbml0ID0gYXdhaXQgYy5hY3Rvci5yb2xsSW5pdGlhdGl2ZSghIWMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSlcclxuICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcclxuICAgICAgaWYgKGMuaW5pdGlhdGl2ZSA8IG5ld0luaXQpIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcclxuICAgIH0gZWxzZSBnYW1lLmNvbWJhdC5zZXRJbml0aWF0aXZlKGMuaWQsIG5ld0luaXQpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUm9sbCBpbml0aWF0aXZlIGZvciBvbmUgb3IgbXVsdGlwbGUgQ29tYmF0YW50cyB3aXRoaW4gdGhlIENvbWJhdCBlbnRpdHlcclxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGlkcyAgICAgQSBDb21iYXRhbnQgaWQgb3IgQXJyYXkgb2YgaWRzIGZvciB3aGljaCB0byByb2xsXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aGljaCBtb2RpZnkgaG93IGluaXRpYXRpdmUgcm9sbHMgYXJlIGNyZWF0ZWQgb3IgcHJlc2VudGVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbb3B0aW9ucy5mb3JtdWxhXSAgICAgICAgIEEgbm9uLWRlZmF1bHQgaW5pdGlhdGl2ZSBmb3JtdWxhIHRvIHJvbGwuIE90aGVyd2lzZSB0aGUgc3lzdGVtIGRlZmF1bHQgaXMgdXNlZC5cclxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51cGRhdGVUdXJuPXRydWVdICAgICBVcGRhdGUgdGhlIENvbWJhdCB0dXJuIGFmdGVyIGFkZGluZyBuZXcgaW5pdGlhdGl2ZSBzY29yZXMgdG8ga2VlcCB0aGUgdHVybiBvbiB0aGUgc2FtZSBDb21iYXRhbnQuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5tZXNzYWdlT3B0aW9ucz17fV0gICAgQWRkaXRpb25hbCBvcHRpb25zIHdpdGggd2hpY2ggdG8gY3VzdG9taXplIGNyZWF0ZWQgQ2hhdCBNZXNzYWdlc1xyXG4gKiBAcmV0dXJuIHtQcm9taXNlPENvbWJhdD59ICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgQ29tYmF0IGVudGl0eSBvbmNlIHVwZGF0ZXMgYXJlIGNvbXBsZXRlLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJvbGxJbml0aWF0aXZlIChcclxuICBpZHMsXHJcbiAgeyBmb3JtdWxhID0gbnVsbCwgdXBkYXRlVHVybiA9IHRydWUsIG1lc3NhZ2VPcHRpb25zID0ge30gfSA9IHt9XHJcbikge1xyXG4gIC8vIEl0ZXJhdGUgb3ZlciBDb21iYXRhbnRzLCBwZXJmb3JtaW5nIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgZWFjaFxyXG4gIGNvbnN0IHVwZGF0ZXMgPSBbXVxyXG4gIGZvciAoY29uc3QgWywgaWRdIG9mIGlkcy5lbnRyaWVzKCkpIHtcclxuICAgIC8vIEdldCBDb21iYXRhbnQgZGF0YSAobm9uLXN0cmljdGx5KVxyXG4gICAgY29uc3QgY29tYmF0YW50ID0gdGhpcy5jb21iYXRhbnRzLmdldChpZClcclxuXHJcbiAgICAvLyBQcm9kdWNlIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgdGhlIENvbWJhdGFudFxyXG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IGNvbWJhdGFudC5hY3Rvci5yb2xsSW5pdGlhdGl2ZShcclxuICAgICAgISFjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKVxyXG4gICAgKVxyXG4gICAgdXBkYXRlcy5wdXNoKHsgX2lkOiBpZCwgaW5pdGlhdGl2ZTogcm9sbCB9KVxyXG4gIH1cclxuICBpZiAoIXVwZGF0ZXMubGVuZ3RoKSByZXR1cm4gdGhpc1xyXG5cclxuICAvLyBVcGRhdGUgbXVsdGlwbGUgY29tYmF0YW50c1xyXG4gIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0NvbWJhdGFudCcsIHVwZGF0ZXMpXHJcblxyXG4gIHJldHVybiB0aGlzXHJcbn1cclxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBleHBhbmRPYmplY3QsIGZvdW5kcnksIGdhbWUsIGlzTmV3ZXJWZXJzaW9uLCBtZXJnZU9iamVjdCwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXHJcblxyXG5leHBvcnQgY2xhc3MgVXBkYXRlciB7XHJcbiAgc3RhdGljIGFzeW5jIGNoZWNrRm9yVXBkYXRlICgpIHtcclxuICAgIGNvbnN0IHN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJylcclxuXHJcbiAgICBjb25zdCBydW5NaWdyYXRlID0gaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgc3lzdGVtVXBkYXRlVmVyc2lvbiA/PyAnMCcpXHJcbiAgICB0aGlzLnVwZGF0ZWRNb2R1bGVzID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nKSB8fCB7fVxyXG4gICAgdGhpcy5jdXJyZW50TW9kdWxlcyA9IHt9XHJcbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xyXG4gICAgICBpZiAoIVsnQ29DNycsICd3b3JsZCddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpICYmIFsnQWN0b3InLCAnSXRlbScsICdTY2VuZSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEudHlwZSkpIHtcclxuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmN1cnJlbnRNb2R1bGVzLCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSkge1xyXG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIGNoZWNrIGVhY2ggbW9kdWxlIG9uY2VcclxuICAgICAgICAgIGNvbnN0IG1vZHVsZSA9IGdhbWUubW9kdWxlcy5nZXQocGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSlcclxuICAgICAgICAgIGlmIChtb2R1bGUpIHtcclxuICAgICAgICAgICAgaWYgKHJ1bk1pZ3JhdGUgfHwgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnVwZGF0ZWRNb2R1bGVzLCBtb2R1bGUuaWQpIHx8IFN0cmluZyh0aGlzLnVwZGF0ZWRNb2R1bGVzW21vZHVsZS5pZF0pICE9PSBTdHJpbmcobW9kdWxlLnZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgICAgLy8gQSBtaWdyYXRpb24gaXMgcmVxdWlyZWQsIG1vZHVsZSBoYXMgbm90IGJlZW4gdXBkYXRlZCBiZWZvcmUsIG9yIHRoZSB2ZXJzaW9uIG51bWJlciBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZHVsZXNbbW9kdWxlLmlkXSA9IG1vZHVsZS52ZXJzaW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChydW5NaWdyYXRlIHx8IE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgICAgbmV3IERpYWxvZyh7XHJcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcclxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICAgID8gJ0NvQzcuTWlncmF0ZS5NZXNzYWdlJ1xyXG4gICAgICAgICAgICAgIDogJ0NvQzcuTWlncmF0ZS5XaXRoTW9kdWxlc01lc3NhZ2UnLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdmVyc2lvbjogZ2FtZS5zeXN0ZW0udmVyc2lvbixcclxuICAgICAgICAgICAgICBtb2R1bGVzOlxyXG4gICAgICAgICAgICAgICAgJzx1bD48bGk+JyArXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKVxyXG4gICAgICAgICAgICAgICAgICAubWFwKG1vZCA9PiBnYW1lLm1vZHVsZXMuZ2V0KG1vZCkudGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc8L2xpPjxsaT4nKSArXHJcbiAgICAgICAgICAgICAgICAnPC9saT48L3VsPidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIGJ1dHRvbnM6IHtcclxuICAgICAgICAgICAgdXBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblVwZGF0ZScpLFxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiBVcGRhdGVyLnVwZGF0ZSgpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNraXA6IHtcclxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uU2tpcCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBuZXcgRGlhbG9nKHtcclxuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxyXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkdNUmVxdWlyZWQnLCB7XHJcbiAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb25cclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgICBPSzoge1xyXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Pa2F5JylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgdXBkYXRlICgpIHtcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlRG9jdW1lbnRzKClcclxuXHJcbiAgICAvLyAvLyBJZiB3ZSBwdXQgdXAgYSB0ZW1wb3Jhcnkgc2NlbmUgcmV0dXJuIHRoZSB1c2VyIGFuZCByZW1vdmUgaXRcclxuICAgIC8vIGlmIChcclxuICAgIC8vICAgdHlwZW9mIHRoaXMudGVtcG9yYXJ5U2NlbmUgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgIT09ICd1bmRlZmluZWQnXHJcbiAgICAvLyApIHtcclxuICAgIC8vICAgYXdhaXQgdGhpcy5vcmlnaW5hbFNjZW5lLnZpZXcoKVxyXG4gICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXHJcbiAgICAvLyAgIGF3YWl0IHRoaXMudGVtcG9yYXJ5U2NlbmUuZGVsZXRlKClcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBNaWdyYXRlIFNldHRpbmdzIGlmIFB1bHAgUnVsZXMgaXMgZW5hYmxlZCB0dXJuIG9uIGFsbCBydWxlc1xyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpKSB7XHJcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRG91YmxlTWF4SGVhbHRoJywgdHJ1ZSlcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrJywgdHJ1ZSlcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnLCB0cnVlKVxyXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZU9yZ2FuaXphdGlvbicsIHRydWUpXHJcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycsIHRydWUpXHJcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknLCB0cnVlKVxyXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzJywgdHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZXR0aW5ncyA9IG1lcmdlT2JqZWN0KHRoaXMudXBkYXRlZE1vZHVsZXMgfHwge30sIHRoaXMuY3VycmVudE1vZHVsZXMpXHJcbiAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVkTW9kdWxlVmVyc2lvbicsIHNldHRpbmdzKVxyXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLnZlcnNpb24pXHJcblxyXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5Db21wbGV0ZScpLCB7XHJcbiAgICAgIHBlcm1hbmVudDogdHJ1ZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVEb2N1bWVudHMgKCkge1xyXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBBY3RvcnNcclxuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gdGhpcy5taWdyYXRlQWN0b3JEYXRhKGFjdG9yLnRvT2JqZWN0KCkpXHJcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgQWN0b3IgZG9jdW1lbnQgJHthY3Rvci5uYW1lfWApXHJcbiAgICAgICAgICBhd2FpdCBhY3Rvci51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcclxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckFjdG9yJywge1xyXG4gICAgICAgICAgbmFtZTogYWN0b3IubmFtZSxcclxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXHJcbiAgICAgICAgfSlcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBJdGVtc1xyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoaXRlbS50b09iamVjdCgpKVxyXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEl0ZW0gZG9jdW1lbnQgJHtpdGVtLm5hbWV9YClcclxuICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXHJcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JJdGVtJywge1xyXG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICB9KVxyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNaWdyYXRlIFdvcmxkIFRhYmxlc1xyXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVUYWJsZURhdGEodGFibGUudG9PYmplY3QoKSlcclxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBUYWJsZSBkb2N1bWVudCAke3RhYmxlLm5hbWV9YClcclxuICAgICAgICAgIGF3YWl0IHRhYmxlLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxyXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yVGFibGUnLCB7XHJcbiAgICAgICAgICBuYW1lOiB0YWJsZS5uYW1lLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICB9KVxyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNaWdyYXRlIE1hY3Jvc1xyXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEobWFjcm8udG9PYmplY3QoKSlcclxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBNYWNybyBkb2N1bWVudCAke21hY3JvLm5hbWV9YClcclxuICAgICAgICAgIGF3YWl0IG1hY3JvLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxyXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yTWFjcm8nLCB7XHJcbiAgICAgICAgICBuYW1lOiBtYWNyby5uYW1lLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICB9KVxyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNaWdyYXRlIFNjZW5lcyBbVG9rZW5dIEFjdG9yc1xyXG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVTY2VuZURhdGEoc2NlbmUpXHJcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgU2NlbmUgZG9jdW1lbnQgJHtzY2VuZS5uYW1lfWApXHJcbiAgICAgICAgICAvLyBpZiAoXHJcbiAgICAgICAgICAvLyAgIHNjZW5lLmlkID09PSBnYW1lLnNjZW5lcy5jdXJyZW50LmlkICYmXHJcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLnRlbXBvcmFyeVNjZW5lID09PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgLy8gICB0eXBlb2YgdGhpcy5vcmlnaW5hbFNjZW5lID09PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICAgLy8gKSB7XHJcbiAgICAgICAgICAvLyAgIHRoaXMudGVtcG9yYXJ5U2NlbmUgPSBhd2FpdCBTY2VuZS5jcmVhdGUoe1xyXG4gICAgICAgICAgLy8gICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcclxuICAgICAgICAgIC8vICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwMDAwJ1xyXG4gICAgICAgICAgLy8gICB9KVxyXG4gICAgICAgICAgLy8gICB0aGlzLm9yaWdpbmFsU2NlbmUgPSBzY2VuZVxyXG4gICAgICAgICAgLy8gICBhd2FpdCBEcmF3aW5nRG9jdW1lbnQuY3JlYXRlKFxyXG4gICAgICAgICAgLy8gICAgIHtcclxuICAgICAgICAgIC8vICAgICAgIGF1dGhvcjogZ2FtZS51c2VyLmlkLFxyXG4gICAgICAgICAgLy8gICAgICAgc2hhcGU6IHtcclxuICAgICAgICAgIC8vICAgICAgICAgdHlwZTogJ3InLFxyXG4gICAgICAgICAgLy8gICAgICAgICB3aWR0aDogMTYwMCxcclxuICAgICAgICAgIC8vICAgICAgICAgaGVpZ2h0OiAyMDBcclxuICAgICAgICAgIC8vICAgICAgIH0sXHJcbiAgICAgICAgICAvLyAgICAgICB4OiAyMjAwLFxyXG4gICAgICAgICAgLy8gICAgICAgeTogMjIwMCxcclxuICAgICAgICAgIC8vICAgICAgIHo6IDAsXHJcbiAgICAgICAgICAvLyAgICAgICBzdHJva2VXaWR0aDogMCxcclxuICAgICAgICAgIC8vICAgICAgIHRleHQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcclxuICAgICAgICAgIC8vICAgICAgIGZvbnRGYW1pbHk6ICdTaWduaWthJyxcclxuICAgICAgICAgIC8vICAgICAgIGZvbnRTaXplOiAxMjgsXHJcbiAgICAgICAgICAvLyAgICAgICB0ZXh0Q29sb3I6ICcjRkZGRkZGJyxcclxuICAgICAgICAgIC8vICAgICAgIHRleHRBbHBoYTogMSxcclxuICAgICAgICAgIC8vICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgICAvLyAgICAgICBsb2NrZWQ6IHRydWVcclxuICAgICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgICAgLy8gICAgIHtcclxuICAgICAgICAgIC8vICAgICAgIHBhcmVudDogdGhpcy50ZW1wb3JhcnlTY2VuZVxyXG4gICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgIC8vICAgKVxyXG4gICAgICAgICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLnZpZXcoKVxyXG4gICAgICAgICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXHJcbiAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjZW5lLnRva2Vucy5mb3JFYWNoKHQgPT4gKHQuX2FjdG9yID0gbnVsbCkpXHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxyXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yU2NlbmUnLCB7XHJcbiAgICAgICAgICBuYW1lOiBzY2VuZS5uYW1lLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICB9KVxyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNaWdyYXRlIFdvcmxkIENvbXBlbmRpdW0gUGFja3NcclxuICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lICE9PSAnQ29DNycgJiZcclxuICAgICAgICBbJ0FjdG9yJywgJ0l0ZW0nLCAnTWFjcm8nLCAnUm9sbFRhYmxlJywgJ1NjZW5lJ10uaW5jbHVkZXMoXHJcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcclxuICAgICAgICApXHJcbiAgICAgICkge1xyXG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBtaWdyYXRlQWN0b3JEYXRhIChhY3Rvcikge1xyXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XHJcblxyXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JBcnR3b3JrKGFjdG9yLCB1cGRhdGVEYXRhKVxyXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMoYWN0b3IsIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZShhY3RvciwgdXBkYXRlRGF0YSlcclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zKGFjdG9yLCB1cGRhdGVEYXRhKVxyXG5cclxuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3IgSXRlbXNcclxuICAgIGlmIChhY3Rvci5pdGVtcykge1xyXG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPVxyXG4gICAgICAgICAgaSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpLnRvT2JqZWN0KCkgOiBpXHJcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxyXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KGl0ZW1VcGRhdGUpKSB7XHJcbiAgICAgICAgICBpdGVtVXBkYXRlLl9pZCA9IGl0ZW1EYXRhLl9pZFxyXG4gICAgICAgICAgYXJyLnB1c2goZXhwYW5kT2JqZWN0KGl0ZW1VcGRhdGUpKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyXHJcbiAgICAgIH0sIFtdKVxyXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGEuaXRlbXMgPSBpdGVtc1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBtaWdyYXRlQ29tcGVuZGl1bURhdGEgKHBhY2spIHtcclxuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHBhY2subWV0YWRhdGEudHlwZVxyXG4gICAgaWYgKFxyXG4gICAgICAhWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZScsICdTY2VuZSddLmluY2x1ZGVzKGRvY3VtZW50VHlwZSlcclxuICAgICkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBVbmxvY2sgdGhlIHBhY2sgZm9yIGVkaXRpbmdcclxuICAgIGNvbnN0IHdhc0xvY2tlZCA9IHBhY2subG9ja2VkXHJcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogZmFsc2UgfSlcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwYWNrLm1pZ3JhdGUoKVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdwYWNrIG1pZ3JhdGUgZmFpbGVkJywgcGFjaywgZXJyKVxyXG4gICAgfVxyXG4gICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxyXG5cclxuICAgIC8vIEl0ZXJhdGUgb3ZlciBjb21wZW5kaXVtIGVudHJpZXMgLSBhcHBseWluZyBmaW5lLXR1bmVkIG1pZ3JhdGlvbiBmdW5jdGlvbnNcclxuICAgIGZvciAoY29uc3QgZG9jIG9mIGRvY3VtZW50cykge1xyXG4gICAgICBsZXQgdXBkYXRlRGF0YSA9IHt9XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgc3dpdGNoIChkb2N1bWVudFR5cGUpIHtcclxuICAgICAgICAgIGNhc2UgJ0FjdG9yJzpcclxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShkb2MudG9PYmplY3QoKSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ0l0ZW0nOlxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoZG9jLnRvT2JqZWN0KCkpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdNYWNybyc6XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEoZG9jLnRvT2JqZWN0KCkpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlICdSb2xsVGFibGUnOlxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKGRvYy50b09iamVjdCgpKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnU2NlbmUnOlxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKGRvYylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcclxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2RvY3VtZW50VHlwZX0gZG9jdW1lbnQgJHtkb2MubmFtZX0gaW4gQ29tcGVuZGl1bSAke3BhY2suY29sbGVjdGlvbn1gXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHVwZGF0ZURhdGEpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcclxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckRvY3VtZW50UGFjaycsIHtcclxuICAgICAgICAgIG5hbWU6IGRvYy5uYW1lLFxyXG4gICAgICAgICAgY29sbGVjdGlvbjogcGFjay5jb2xsZWN0aW9uLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICB9KVxyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBcHBseSB0aGUgb3JpZ2luYWwgbG9ja2VkIHN0YXR1cyBmb3IgdGhlIHBhY2tcclxuICAgIGF3YWl0IHBhY2suY29uZmlndXJlKHsgbG9ja2VkOiB3YXNMb2NrZWQgfSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBtaWdyYXRlSXRlbURhdGEgKGl0ZW0pIHtcclxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxyXG5cclxuICAgIC8vIFVwZGF0ZSBXb3JsZCBJdGVtXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUVtYmVkZGVkdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQXJ0d29yayhpdGVtLCB1cGRhdGVEYXRhKVxyXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkKGl0ZW0sIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkKGl0ZW0sIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UoaXRlbSwgdXBkYXRlRGF0YSlcclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtU2V0dXBFcmFzKGl0ZW0sIHVwZGF0ZURhdGEpXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbXYxMChpdGVtLCB1cGRhdGVEYXRhKVxyXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rVW5pdHMoaXRlbSwgdXBkYXRlRGF0YSlcclxuXHJcbiAgICByZXR1cm4gdXBkYXRlRGF0YVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIG1pZ3JhdGVNYWNyb0RhdGEgKHRhYmxlKSB7XHJcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cclxuXHJcbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVNYWNyb0FydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXHJcblxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIHN0YXRpYyBtaWdyYXRlVGFibGVEYXRhICh0YWJsZSkge1xyXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XHJcblxyXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXHJcbiAgICBVcGRhdGVyLl9taWdyYXRlVGFibGVBcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxyXG5cclxuICAgIHJldHVybiB1cGRhdGVEYXRhXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbWlncmF0ZVNjZW5lRGF0YSAoc2NlbmUpIHtcclxuICAgIGNvbnN0IHJldHVybnMgPSB7XHJcbiAgICAgIHRva2VuczogW11cclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygc2NlbmUudG9rZW5zICE9PSAndW5kZWZpbmVkJyAmJiBzY2VuZS50b2tlbnMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybnMudG9rZW5zID0gc2NlbmUudG9rZW5zLm1hcCh0b2tlbiA9PiB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRva2VuLnRvT2JqZWN0KClcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cclxuICAgICAgICBVcGRhdGVyLl9taWdyYXRlVG9rZW5BcnR3b3JrKHQsIHVwZGF0ZURhdGEpXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCkge1xyXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0LCB1cGRhdGVEYXRhKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXQuYWN0b3JJZCB8fCB0LmFjdG9yTGluaykge1xyXG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIWdhbWUuYWN0b3JzLmhhcyh0LmFjdG9ySWQpKSB7XHJcbiAgICAgICAgICB0LmFjdG9ySWQgPSBudWxsXHJcbiAgICAgICAgICB0LmFjdG9yRGF0YSA9IHt9XHJcbiAgICAgICAgfSBlbHNlIGlmICghdC5hY3RvckxpbmspIHtcclxuICAgICAgICAgIGNvbnN0IGFjdG9yRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHQuYWN0b3JEYXRhKVxyXG4gICAgICAgICAgYWN0b3JEYXRhLnR5cGUgPSB0b2tlbi5hY3Rvcj8udHlwZVxyXG4gICAgICAgICAgY29uc3QgdXBkYXRlID0gVXBkYXRlci5taWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YSlcclxuICAgICAgICAgIDtbJ2l0ZW1zJywgJ2VmZmVjdHMnXS5mb3JFYWNoKGVtYmVkZGVkTmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXBkYXRlW2VtYmVkZGVkTmFtZV0/Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXcgTWFwKHVwZGF0ZVtlbWJlZGRlZE5hbWVdLm1hcCh1ID0+IFt1Ll9pZCwgdV0pKVxyXG4gICAgICAgICAgICB0LmFjdG9yRGF0YVtlbWJlZGRlZE5hbWVdLmZvckVhY2gob3JpZ2luYWwgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IHVwZGF0ZXMuZ2V0KG9yaWdpbmFsLl9pZClcclxuICAgICAgICAgICAgICBpZiAodXBkYXRlKSBtZXJnZU9iamVjdChvcmlnaW5hbCwgdXBkYXRlKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBkZWxldGUgdXBkYXRlW2VtYmVkZGVkTmFtZV1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBtZXJnZU9iamVjdCh0LmFjdG9yRGF0YSwgdXBkYXRlKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldHVybnNcclxuICB9XHJcblxyXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKFxyXG4gICAgICBbXHJcbiAgICAgICAgJ2FyY2hldHlwZScsXHJcbiAgICAgICAgJ2NoYXNlJyxcclxuICAgICAgICAnaXRlbScsXHJcbiAgICAgICAgJ29jY3VwYXRpb24nLFxyXG4gICAgICAgICdzZXR1cCcsXHJcbiAgICAgICAgJ3NraWxsJyxcclxuICAgICAgICAnc3BlbGwnLFxyXG4gICAgICAgICdzdGF0dXMnLFxyXG4gICAgICAgICd0YWxlbnQnLFxyXG4gICAgICAgICd3ZWFwb24nXHJcbiAgICAgIF0uaW5jbHVkZXMoaXRlbS50eXBlKVxyXG4gICAgKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XHJcbiAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBrZWVwZXI6ICcnXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbiA9PT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcclxuICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgIGtlZXBlcjogJydcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSAnJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBkYXRlRGF0YVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBkYXRlRGF0YVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcclxuICAgIGxldCBpbWFnZSA9IFN0cmluZyhpdGVtLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXHJcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcclxuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cclxuICAgIH1cclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcclxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XHJcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxyXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10uaW1nID1cclxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcclxuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXHJcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cclxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcclxuICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcclxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XHJcbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNwZWxscykpIHtcclxuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXHJcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddID0gaXRlbS5zeXN0ZW0uc3BlbGxzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ11ba10uaW1nID1cclxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcclxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xyXG4gICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcclxuICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5pbWcgPVxyXG4gICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1cGRhdGVEYXRhXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdzcGVsbCcgJiYgdHlwZW9mIGl0ZW0uc3lzdGVtLmNvc3QgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jYXN0aW5nVGltZSddID0gaXRlbS5zeXN0ZW0uY2FzdGluZ1RpbWUgfHwgJydcclxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLmhpdFBvaW50cyddID0gaXRlbS5zeXN0ZW0uY29zdC5ocCB8fCAwXHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5tYWdpY1BvaW50cyddID0gaXRlbS5zeXN0ZW0uY29zdC5tcCB8fCAwXHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uc3lzdGVtLmNvc3Quc2FuIHx8IDBcclxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLnBvd2VyJ10gPSBpdGVtLnN5c3RlbS5jb3N0LnBvdyB8fCAwXHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5vdGhlcnMnXSA9ICcnXHJcblxyXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jb3N0J10gPSBudWxsXHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxyXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQm9vayBhdXRvbWF0aW9uIHdhcyBpbmNyZWFzZWQgaW4gMC42LjVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIERvY3VtZW50IGRhdGEgZXhwcmVzc2VkIGFzIGEgcGxhaW4gb2JqZWN0XHJcbiAgICogQHBhcmFtIHtqc29ufSB1cGRhdGVEYXRhIERpZmZlcmVudGlhbCB1cGRhdGUgZGF0YSB3aGljaCBtb2RpZmllcyB0aGUgZXhpc3RpbmcgdmFsdWVzIG9mIHRoaXMgZG9jdW1lbnQgZGF0YVxyXG4gICAqIEByZXR1cm5zIHtqc29ufSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcclxuICAgKi9cclxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCAoaXRlbSwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XHJcbiAgICAgIC8qKiBJZiBib29rIHN0aWxsIGhhcyB0aGUgc3lzdGVtLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCBrZXkgdGhlbiBydW4gbWlncmF0ZSBvbiBpdCAqL1xyXG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF1dGhvciddID0gaXRlbS5zeXN0ZW0uYXV0aG9yIHx8ICcnXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRhdGUnXSA9IGl0ZW0uc3lzdGVtLmRhdGUgfHwgJydcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubGFuZ3VhZ2UnXSA9IGl0ZW0uc3lzdGVtLmxhbmd1YWdlIHx8ICcnXHJcbiAgICAgICAgLyoqIEZpZWxkcyBjaGFuZ2VkIGZyb20gbnVsbC9zdHJpbmcgZGVmYXVsdHMgdG8gaW50ZWdlciB0byAwICovXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNhbml0eUxvc3MnXSA9IGl0ZW0uc3lzdGVtLnNhbkxvc3MgfHwgMFxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5teXRob3NSYXRpbmcpIHx8IDBcclxuICAgICAgICAvKiogUmVuYW1lZC9tb3ZlZCBmaWVsZHMgKi9cclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29udGVudCddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udW5pZGVudGlmaWVkXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXNcclxuICAgICAgICAvKiogTmV3IGZpZWxkcyBzZXQgZGVmYXVsdCB2YWx1ZXMgKi9cclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGlmZmljdWx0eUxldmVsJ10gPSAncmVndWxhcidcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZnVsbFN0dWRpZXMnXSA9IDBcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5pdGlhbFJlYWRpbmcnXSA9IGZhbHNlXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmtlZXBlck5vdGVzJ10gPSAnJ1xyXG4gICAgICAgIC8qKiBNb3ZlIGFuZCByZW5hbWUgZ2FpbiBmaWVsZHMgdG8gZ2FpbnMsIGRlZmF1bHQgTmFOIHZhbHVlcyB0byAwICovXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCddID1cclxuICAgICAgICAgIE51bWJlcihpdGVtLnN5c3RlbS5nYWluLmN0aHVsaHVNeXRob3MuQ01JKSB8fCAwXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWwnXSA9XHJcbiAgICAgICAgICBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5jdGh1bGh1TXl0aG9zLkNNRikgfHwgMFxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vY2N1bHQnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5nYWluLm9jY3VsdCkgfHwgMFxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vdGhlcnMnXSA9IFtdXHJcbiAgICAgICAgLyoqIE5ldyBzdHVkeSBmaWVsZCBkZWZhdWx0IG5lY2Vzc2FyeSB0byBpbnRlZ2VyIG9mIHdlZWtzU3R1ZHlUaW1lIG9yIDAgaWYgbm90IHNldCAqL1xyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zdHVkeSddID0ge1xyXG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5zeXN0ZW0ud2Vla3NTdHVkeVRpbWUpIHx8IDAsXHJcbiAgICAgICAgICBwcm9ncmVzczogMCxcclxuICAgICAgICAgIHVuaXRzOiAnQ29DNy53ZWVrcydcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIFJlbW92ZSBvbGQga2V5cyAqL1xyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPXNhbkxvc3MnXSA9IG51bGxcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWdhaW4nXSA9IG51bGxcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT11bmlkZW50aWZpZWQnXSA9IG51bGxcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy4tPW90aGVyJ10gPSBudWxsXHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09cHJvcGVydGllcyddID0gbnVsbFxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWZsYWdzJ10gPSBudWxsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1cGRhdGVEYXRhXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XHJcbiAgICBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnN0dWR5LnVuaXRzID09PSAndW5kZWZpbmVkJ1xyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZSAoaXRlbSwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xyXG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLm5vdGVzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cclxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyICsgaXRlbS5zeXN0ZW0ubm90ZXNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ubm90ZXNcclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09bm90ZXMnXSA9IG51bGxcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cclxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXMgKyB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ11cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXNcclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09a2VlcGVyTm90ZXMnXSA9IG51bGxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlSXRlbUVtYmVkZGVkdjEwIChpdGVtLCB1cGRhdGVEYXRhKSB7XHJcbiAgICBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcclxuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5ncm91cHNbb10uc2tpbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxyXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9IGl0ZW0uc3lzdGVtLmdyb3Vwc1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoWydzZXR1cCddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcclxuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgaXRlbS5zeXN0ZW0uaXRlbXNba10uc3lzdGVtID0gdi5kYXRhXHJcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID0gaXRlbS5zeXN0ZW0uaXRlbXNcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKFsnYXJjaGV0eXBlJywgJ29jY3VwYXRpb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XHJcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXHJcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9IGl0ZW0uc3lzdGVtLnNraWxsc1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoWydib29rJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xyXG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNwZWxscykpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxyXG4gICAgICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ10gPSBpdGVtLnN5c3RlbS5zcGVsbHNcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlSXRlbXYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKFxyXG4gICAgICBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcclxuICAgICAgKHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXHJcbiAgICApIHtcclxuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXHJcbiAgICAgIC8vIFVwZGF0ZSBQb2xpc2ggZG9kZ2UgdHJhbnNsYXRpb24gZnJvbSBVbmlraSB0byBVbmlrIHRvIG1hdGNoIHVwZGF0ZSB0byBsYW5nL3BsLmpzb25cclxuICAgICAgaWYgKHVwZGF0ZURhdGEubmFtZSA9PT0gJ1VuaWtpJykge1xyXG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcclxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXHJcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgID8gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcclxuICAgICAgICAgIDogaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cclxuICAgICAgKVxyXG4gICAgICB1cGRhdGVEYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxyXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXHJcbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xyXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcclxuICAgICAgICAgICh0eXBlb2Ygdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICcnKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9IHYubmFtZVxyXG4gICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPT09ICdVbmlraScpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9ICdVbmlrJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lLFxyXG4gICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcclxuICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gcGFydHMubmFtZVxyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10uc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gcGFydHMuc3BlY2lhbGl6YXRpb25cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcclxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxyXG4gICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxyXG4gICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxyXG4gICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcclxuICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cclxuICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcclxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPT09ICdVbmlraScpIHtcclxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSAnVW5paydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXHJcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lLFxyXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXHJcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gcGFydHMubmFtZVxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5za2lsbE5hbWUgPVxyXG4gICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9XHJcbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xyXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXHJcbiAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXHJcbiAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPT09ICdVbmlraScpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPSAnVW5paydcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUsXHJcbiAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxyXG4gICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cclxuICAgICAgICAgIClcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gcGFydHMubmFtZVxyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPVxyXG4gICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlSXRlbVNldHVwRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xyXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5lcmFzKSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUuc2VsZWN0ZWQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZXJhcy4nICsga2V5XSA9IHZhbHVlLnNlbGVjdGVkXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XHJcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoYWN0b3IuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcclxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgIHR5cGVvZiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlPy5zcmMgIT09ICd1bmRlZmluZWQnXHJcbiAgICApIHtcclxuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpLm1hdGNoKFxyXG4gICAgICAgIC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvXHJcbiAgICAgIClcclxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVsncHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMnXSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGFjdG9yLmVmZmVjdHMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGFjdG9yLmVmZmVjdHMpKSB7XHJcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcclxuICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YS5lZmZlY3RzID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHNba10uaWNvbiA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XHJcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5kZXNjcmlwdGlvbiA9PT0gJ3VuZGVmaW5lZCdcclxuICAgICAgKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XHJcbiAgICAgICAgICBrZWVwZXI6ICcnXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBkYXRlRGF0YVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcclxuICAgIGlmIChcclxuICAgICAgYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiZcclxuICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbT8uZW5jb3VudGVyZWRDcmVhdHVyZXMgIT09ICd1bmRlZmluZWQnXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgZ3JvdXBzID0ge31cclxuICAgICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgYWN0b3Iuc3lzdGVtLmVuY291bnRlcmVkQ3JlYXR1cmVzKSB7XHJcbiAgICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAwKSB7XHJcbiAgICAgICAgICBncm91cHNbc2FuaXR5TG9zc0V2ZW50Lm5hbWVdID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPz8gMCxcclxuICAgICAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gW11cclxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIGdyb3Vwcykge1xyXG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XHJcbiAgICAgICAgICB0eXBlOiBuYW1lLFxyXG4gICAgICAgICAgdG90YWxMb3NzOiBncm91cHNbbmFtZV0sXHJcbiAgICAgICAgICBpbW11bml0eTogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJ10gPSBzYW5pdHlMb3NzRXZlbnRzXHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVuY291bnRlcmVkQ3JlYXR1cmVzJ10gPSBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcclxuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAodHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXMgIT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMgPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gZmFsc2VcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy51bmNvbnNjaW91cy52YWx1ZSddID0gZmFsc2VcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5keWluZy52YWx1ZSddID0gZmFsc2VcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5kZWFkLnZhbHVlJ10gPSBmYWxzZVxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSBmYWxzZVxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmluZGVmSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcy52YWx1ZVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuY3JpdGljYWxXb3VuZHMudmFsdWUnXSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzLnZhbHVlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy51bmNvbnNjaW91cy52YWx1ZSddID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmc/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmcudmFsdWVcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5kZWFkPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQudmFsdWVcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmRlYWQudmFsdWUnXSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lLnZhbHVlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmUudmFsdWVcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZS52YWx1ZVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuaW5kZWZJbnNhbmUudmFsdWUnXSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgY29uc3QgZWZmZWN0cyA9IGFjdG9yLmVmZmVjdHNcclxuICAgICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGVmZmVjdHMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlZmZlY3QgPSBlZmZlY3RzW2ldXHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZWZmZWN0Lmljb24ubWF0Y2goXHJcbiAgICAgICAgICAgICAgL1xcLyhoYW5naW5nLXNwaWRlcnx0ZW50YWNsZXMtc2t1bGx8YXJtLXNsaW5nfGhlYXJ0LWJlYXRzfHRvbWJzdG9uZXxrbm9ja2VkLW91dC1zdGFyc3xmYWxsaW5nfHNrdWxsfHVuY29uc2Npb3VzKVxcLi9cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICBsZXQgc3RhdHVzSWQgPSAnJ1xyXG4gICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmdpbmctc3BpZGVyJzpcclxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAndGVtcG9JbnNhbmUnXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlICd0ZW50YWNsZXMtc2t1bGwnOlxyXG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdpbmRlZkluc2FuZSdcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FybS1zbGluZyc6XHJcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2NyaXRpY2FsV291bmRzJ1xyXG4gICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhcnQtYmVhdHMnOlxyXG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdkeWluZydcclxuICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbWJzdG9uZSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdza3VsbCc6XHJcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2RlYWQnXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlICdrbm9ja2VkLW91dC1zdGFycyc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1bmNvbnNjaW91cyc6XHJcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3VuY29uc2Npb3VzJ1xyXG4gICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZmFsbGluZyc6XHJcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3Byb25lJ1xyXG4gICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoc3RhdHVzSWQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZURhdGFbYHN5c3RlbS5jb25kaXRpb25zLiR7c3RhdHVzSWR9LnZhbHVlYF0pIHtcclxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtzdGF0dXNJZH0udmFsdWVgXSA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgIT09IHN0YXR1c0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVmZmVjdHNbaV0gPSBtZXJnZU9iamVjdChlZmZlY3QsIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29yZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGVmZmVjdHNcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c3RhdHVzJ10gPSBudWxsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1cGRhdGVEYXRhXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIChhY3RvciwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKFsnbnBjJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkgJiYgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3BlY2lhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbCddID0ge1xyXG4gICAgICAgICAgY2hlY2tQYXNzZWQ6IG51bGwsXHJcbiAgICAgICAgICBjaGVja0ZhaWxsZWQ6IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0YWNrc1BlclJvdW5kID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRhY2tzUGVyUm91bmQnXSA9IDFcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IChhY3RvciwgdXBkYXRlRGF0YSkge1xyXG4gICAgaWYgKFxyXG4gICAgICBhY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJyAmJlxyXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5zYW4gIT09ICd1bmRlZmluZWQnXHJcbiAgICApIHtcclxuICAgICAgY29uc3Qgb25lRmlmdGhTYW5pdHkgPSBNYXRoLmNlaWwoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcclxuICAgICAgKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxyXG4gICAgICB9XHJcbiAgICAgIGlmIChcclxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9ICcgLyAnICsgb25lRmlmdGhTYW5pdHlcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJ10gPSAwXHJcbiAgICAgIH1cclxuICAgICAgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XHJcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPT09IG51bGxcclxuICAgICAgKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlJ10gPSAwXHJcbiAgICAgIH1cclxuICAgICAgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XHJcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXggPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4J10gPSBvbmVGaWZ0aFNhbml0eVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09IG51bGxcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJ10gPSBvbmVGaWZ0aFNhbml0eVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChcclxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIGFjdG9yLnN5c3RlbS5ub3RlcyA9PT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubm90ZXMnXSA9ICcnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1cGRhdGVEYXRhXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX21pZ3JhdGVNYWNyb0FydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XHJcbiAgICBjb25zdCBpbWFnZSA9IFN0cmluZyh0YWJsZS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxyXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBkYXRlRGF0YVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9taWdyYXRlVGFibGVBcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xyXG4gICAgbGV0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXHJcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcclxuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlLnJlc3VsdHMpKSB7XHJcbiAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcclxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLnJlc3VsdHMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHMgPSB0YWJsZS5yZXN1bHRzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVwZGF0ZURhdGEucmVzdWx0c1trXS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIHN0YXRpYyBfbWlncmF0ZVRva2VuQXJ0d29yayAodG9rZW4sIHVwZGF0ZURhdGEpIHtcclxuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRva2VuLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXHJcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcclxuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cclxuICAgIH1cclxuICAgIHJldHVybiB1cGRhdGVEYXRhXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lICovXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXHJcbi8qKlxyXG4gKiBuYW1lQ2hhcmFjdGVycyBsaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYmUgcGFydCBvZiBhIFtdIGZvciBjaGFyYWN0ZXIsIHNraWxsLCBvciB3ZWFwb24gbmFtZXMgdXNlZCBpbiBicmFja2V0IGV4cHJlc3Npb24uXHJcbiAqXHJcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRlc2NyaXB0aW9uXCIgbGFuZyBrZXkgdG8gc2hvdyBpbiB0aGUgbGFuZ3VhZ2Ugc2VsZWN0aW9uIGRpYWxvZyBib3guXHJcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBEYW1hZ2UgQm9udXMgZS5nLiBEQjogXCJkYk5vbmVcIi5cclxuICogXCJrZXlzLjxsYW5ndWFnZT4uYXJtb3JOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIEFybW91ciBCb251cyBlLmcuIEFybW9yOiBcImFybW9yTm9uZVwiLlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIGF0dGFja3MgZS5nLiBBdHRhY2tzIFBlciBSb3VuZDogXCJhdHRhY2tzUGVyUm91bmROb25lXCIuXHJcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIHNhbml0eSBsb3NzIGUuZy4gU0FOIGxvc3M6IFwic2FuTG9zc05vbmVcIi5cclxuICogXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIGRhbWFnZSBib251cyBpbiBhdHRyaWJ1dGVzIGFuZCB3ZWFwb24gZGFtYWdlIGUuZy4gREI6IFwiZnVsbGRiXCIgLyBXZWFwb24gNTAlICgyNS8xMCksIGRhbWFnZSAxRDYgKyBcImZ1bGxkYlwiLlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5oYWxmZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgaGFsZiBkYW1hZ2UgYm9udXMgaW4gd2VhcG9uIGRhbWFnZSBlLmcuIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiaGFsZmRiXCIuXHJcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24gb2YgdGV4dC5cclxuICogXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgSWYgdGhlcmUgaXMgbm8gY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24sIGFkZCB0aGlzIHNlY3Rpb24gd2VyZSBpdCBwcm9iYWJseSBpcywgdGhpcyBuZWVkcyB0byBtYXRjaGVkIGJ5IFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIuXHJcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Ta2lsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBza2lsbHMgc2VjdGlvbiBvZiB0ZXh0LlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uTGFuZ2F1Z2VzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgbGFuZ3VhZ2VzIHNlY3Rpb24gb2YgdGV4dC5cclxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNwZWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNwZWxscyBzZWN0aW9uIG9mIHRleHQuXHJcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbmRndW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgaGFuZGd1biB0eXBlLlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5yaWZsZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSByaWZsZSB0eXBlLlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zbWJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgc3VibWFjaGluZSBndW4gdHlwZS5cclxuICogXCJrZXlzLjxsYW5ndWFnZT4ubWFjaGluZUd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBtYWNoaW5lIGd1biB0eXBlLlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5sYXVuY2hlZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBsYXVuY2hlZCB0eXBlLlxyXG4gKiBcImtleXMuPGxhbmd1YWdlPi5leGFtcGxlXCIgU3RyaW5nIHRoYXQgc2hvdWxkIHNob3cgYXMgYSBwbGFjZWhvbGRlciBleGFtcGxlLlxyXG4gKlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYWdlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFnZT4uXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ub2NjdXBhdGlvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgb2NjdXBhdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxvY2N1cGF0aW9uPi5cclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zdHJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHN0cmVuZ3RoIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHN0cj4uXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uY29uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb25zdGl0dXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8Y29uPi5cclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zaXpcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNpemUgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2l6Pi5cclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5pbnRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGludGVsbGlnZW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxpbnQ+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnBvd1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgcG93ZXIgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8cG93Pi5cclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kZXhcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRleHRlcml0eSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkZXg+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFwcFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXBwZWFyYW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhcHA+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmVkdVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZWR1Y2F0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGVkdT4uXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2FuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW5pdHkgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzYW4+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmhwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBoaXQgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxocD4uXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubXBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1hZ2ljIHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bXA+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkYW1hZ2UgYm9udXMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRiPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5kYk5vbmVcIiB0aGVuIDAuXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYnVpbGRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGJ1aWxkIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxidWlsZD4uXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXJtb3JcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIHRoZW4gMC5cclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5tb3ZcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1vdmVtZW50IHJhdGUgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG1vdj4uXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubGNrXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBsdWNrIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxsY2s+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXR0YWNrcyBwZXIgcm91bmQsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXR0YWNrc1BlclJvdW5kPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgdGhlbiAwLlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhbkxvc3NcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNhbiBsb3NzIG1pbi9tYXgsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuTG9zcz4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uc2FuTG9zc05vbmVcIiB0aGVuIG5vbmUuXHJcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ud2VhcG9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIHdlYXBvbiA8bmFtZT4sIG9wdGlvbmFsIDxwZXJjZW50YWdlPiwgYW5kIDxkYW1hZ2U+LiBEYW1hZ2UgY2FuIGNvbnRhaW4gXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgYW5kIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiLlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvbkRvZGdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiBkb2RnZSBza2lsbCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNraWxsXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBza2lsbCBzZWN0aW9uIHNraWxsIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4gYW5kIDxwZXJjZW50YWdlPi5cclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5ndWVzc1N0YXJ0Q29tYmF0XCIgUmVndWxhciBleHByZXNzaW9uIGlmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGZpbmQgdGhlc2UgYXJlIGxpa2VseSB0byBiZSB0aGUgZmlyc3Qgd2VhcG9uIG5hbWUsIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIGlzIHRoZW4gYWRkZWQgYmVmb3JlIGl0IHRvIGdldCB0aGUgZ3JvdXBzXHJcbiAqXHJcbiAqIFRoZXNlIHNob3VsZCBub3QgYmUgZWRpdGVkIGFzIHRoZXkgc2hvdWxkIHdvcmsgYXMgaXNcclxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5uYW1lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+LlxyXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNlY3Rpb25zXCIgUmVndWxhciBleHByZXNzaW9uIHRvIHNwbGl0IHRleHQgaW50byBjb21iYXQsIHNraWxsLCBsYW5ndWFnZSwgYW5kIHNwZWxscyBzZWN0aW9uXHJcbiAqXHJcbiAqIElmIHRoZXJlIGlzIG5ldyBmdW5jdGlvbmFsaXR5IGNoZWNrIGZvciB0aGlzIHN0cmluZyBpbiB0aGUgdHJhbnNsYXRpb25zIC8ga2V5cyBmb3IgeW91ciBsYW5ndWFnZSBcIk5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRFwiXHJcbiAqL1xyXG5jb25zdCBuYW1lQ2hhcmFjdGVycyA9XHJcbiAgJ1xcXFx1MzAwMFxcXFx1MzQwMC1cXFxcdTREQkZcXFxcdTRFMDAtXFxcXHU5RkZGXFxcXHdcXFxcKFxcXFwpXFxcXC1cXFxcLyZcIlxcJycgK1xyXG4gIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoXHJcbiAgICAnYcyBZcyBacyBb8yBw6DDqMOsw7LDucOAw4jDjMOSw5nDocOpw63Ds8O6w73DgcOJw43Dk8Oaw53DosOqw67DtMO7w4LDisOOw5TDm8Ojw7HDtcODxIDDkcOVw6TDq8Ovw7bDvMO/w4TDi8OPw5bDnMW4w6DDqMOnw4fDn8OYw7jDhcOlw4bDpsWT4oCc4oCdwqvCu8SFxIfEmcWCxYTDs8WbxbrFvMSExIbEmMWBxYPDk8WaxbnFuydcclxuICApXHJcblxyXG5jb25zdCBrZXlzID0ge1xyXG4gIGVuOiB7XHJcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuRW5nbGlzaCcsXHJcbiAgICBkYk5vbmU6ICdub25lJyxcclxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxyXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxyXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcclxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQicgKyAnKScsXHJcbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcclxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrcycgKyAnKVs6XFxuXScsXHJcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcclxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ3NraWxscycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXHJcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdsYW5ndWFnZXMnICsgJylbOlxcbl0nLFxyXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzJyArICcpWzpcXG5dJyxcclxuICAgIGhhbmRndW46XHJcbiAgICAgICcoPzx0eXBlPicgK1xyXG4gICAgICAnIEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcclxuICAgICAgJyknLFxyXG4gICAgcmlmbGU6XHJcbiAgICAgICcoPzx0eXBlPicgKyAnUmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCcgKyAnKScsXHJcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxyXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcclxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgKyAnKScsXHJcbiAgICBleGFtcGxlOlxyXG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIGFnZSAyN1xcblNUUiA3NSBDT04gNjAgU0laIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9XIDUwIEVEVSA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbkJ1aWxkOiAxIE1vdmU6IDcgTVA6IDEwIEx1Y2s6IDQwIEFybW9yOiAxXFxuQXR0YWNrcyBwZXIgcm91bmQ6IDMgU0FOIGxvc3M6IDFkNC8xZDhcXG5Db21iYXRcXG5CaXRlIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGFtYWdlIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkYW1hZ2UgMUQ4KzFcXG5Eb2RnZSA1MCUgKDI1LzEwKVxcblNraWxsc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VhZ2VzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5TcGVsbHM6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xyXG4gIH0sXHJcbiAgZGU6IHtcclxuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5HZXJtYW4nLFxyXG4gICAgZGJOb25lOiAnbm9uZScsXHJcbiAgICBhcm1vck5vbmU6ICdub25lJyxcclxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcclxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXHJcbiAgICBkaWNlU2hvcnQ6ICd3fGQnLFxyXG4gICAgZnVsbGRiOiAnKCcgKyAnU2NoYWRlbnNib251c3xTYicgKyAnKScsXHJcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgU2NoYWRlbnNib251c3xTYi8yJyArICcpJyxcclxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdLYW1wZnxBbmdyaWZmOnxBTkdSSUZGRScgKyAnKVs6XFxuXScsXHJcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0thbXBmJyArICdcXG4nLFxyXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnRmVydGlna2VpdGVuJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcclxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ1NwcmFjaGVuJyArICcpWzpcXG5dJyxcclxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1phdWJlcicgKyAnKVs6XFxuXScsXHJcbiAgICBoYW5kZ3VuOlxyXG4gICAgICAnKD88dHlwZT4nICtcclxuICAgICAgJyBHdW58UmV2b2x2ZXJ8UGlzdG9sZXxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xyXG4gICAgICAnKScsXHJcbiAgICByaWZsZTpcclxuICAgICAgJyg/PHR5cGU+JyArXHJcbiAgICAgICdHZXdlaHJ8U2Nocm90ZmxpbnRlfENhcmFiaW5lcnxLYXJhYmluZXJ8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZWZhbnRlbicgK1xyXG4gICAgICAnKScsXHJcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxyXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcclxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmF0ZXxEeW5hbWl0JyArICcpJyxcclxuICAgIGV4YW1wbGU6XHJcbiAgICAgICdWb3JuYW1lIE5hY2huYW1lXFxuQWx0ZXI6IDI5XFxuQmVydWY6IEVpbiBCZXJ1ZlxcblNUIDUwXFxuTUEgNjBcXG5LTyA2MFxcbkdFIDYwXFxuR1IgNTVcXG5FUiA2NVxcbklOIDgwXFxuQkkgODVcXG5UcmVmZmVycHVua3RlOiAxMVxcbkdlaXN0aWdlIFN0YWJpbGl0w6R0OiA2MFxcblNjaGFkZW5zYm9udXM6IDBcXG5TdGF0dXI6IDBcXG5NYWdpZXB1bmt0ZTogMTJcXG5CZXdlZ3VuZ3N3ZWl0ZTogOFxcblxcbkthbXBmXFxuQW5ncmlmZmU6IDFcXG5IYW5kZ2VtZW5nZSAzMCUgKDE1LzYpLCBTY2hhZGVuIDFEM1xcbk1lc3NlciAzMCUgKDE1LzYpLCBTY2hhZGVuIDFENFxcbkF1c3dlaWNoZW4gMzAlICgxNS82KVxcblxcbkZlcnRpZ2tlaXRlbjogQW50aHJvcG9sb2dpZSA3MCUgKDM1LzE0KSwgQXJjaMOkb2xvZ2llIDMwJSAoMTUvNiksIEJpYmxpb3RoZWtzbnV0enVuZyA1MCUgKDI1LzEwKSwgRXJzdGUgSGlsZmUgNTAlICgyNS8xMCksIEZpbmFuemtyYWZ0IDQwJSAoMjAvOCksIEdlc2NoaWNodGUgNjAlICgzMC8xMiksIEtsZXR0ZXJuIDUwJSAoMjUvMTApXFxuXFxuU3ByYWNoZW46IEVuZ2xpc2NoIDg1JSAoNDIvMTcpOyBEZXV0c2NoIDQ1JSAoMjIvOSksIExhdGVpbiA0NSUgKDIyLzkpJ1xyXG4gIH0sXHJcbiAgcGw6IHtcclxuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5Qb2xpc2gnLFxyXG4gICAgZGJOb25lOiAnYnJhaycsXHJcbiAgICBhcm1vck5vbmU6ICdicmFrJyxcclxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdicmFrJyxcclxuICAgIHNhbkxvc3NOb25lOiAnYnJhaycsXHJcbiAgICBkaWNlU2hvcnQ6ICdrfGQnLFxyXG4gICAgZnVsbGRiOiAnKCcgKyAnTW9keWZpa2F0b3IgT2JyYcW8ZcWEfE1PJyArICcpJyxcclxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBNT3xNTy8yJyArICcpJyxcclxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdXYWxrYXxBdGFraScgKyAnKVs6XFxuXScsXHJcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ1dhbGthJyArICdcXG4nLFxyXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnVW1pZWrEmXRub8WbY2knICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxyXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnSsSZenlraScgKyAnKVs6XFxuXScsXHJcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYWtsxJljaWEnICsgJylbOlxcbl0nLFxyXG4gICAgaGFuZGd1bjpcclxuICAgICAgJyg/PHR5cGU+JyArXHJcbiAgICAgICcgUGlzdG9sZXR8UmV3b2x3ZXJ8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXHJcbiAgICAgICcpJyxcclxuICAgIHJpZmxlOlxyXG4gICAgICAnKD88dHlwZT4nICtcclxuICAgICAgJ0thcmFiaW58U3RyemVsYmF8V2lhdHLDs3drYXxHYXJhbmR8R2F1Z2UgfExlZS1FbmZpZWxkfFN0cnplbGJhIG5hIHPFgm9uaWUnICtcclxuICAgICAgJyknLFxyXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1Bpc3RvbGV0IG1hc3p5bm93eXxUaG9tcHNvbicgKyAnKScsXHJcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxyXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW/Fgm90b3dhfEdyYW5hdHxMYXNrYSBkeW5hbWl0dXxEeW5hbWl0JyArICcpJyxcclxuICAgIGV4YW1wbGU6XHJcbiAgICAgICdQcnp5a8WCYWRvd2EgcG9zdGHEhywgMjcgbGF0XFxuQmlibGlvdGVrYXJ6XFxuUyA3NSBLT04gNjAgQkMgODAgWlIgNzAgV1lHIDYwIElOVCA4MFxcbk1PQyA1MCBXWUsgODUgUCA1NSBQVyAxNCBNTzogMUQ0XFxuS3J6ZXBhOiAxIFJ1Y2g6IDcgUE06IDEwIFN6Y3rEmcWbY2llOiA0MCBQYW5jZXJ6OiAxXFxuQXRha2kgdyBydW5kemllOiAzIFV0cmF0YSBQb2N6eXRhbG5vxZtjaTogMUs0LzFLOFxcbldhbGthXFxuVWdyeXppZW5pZSA1MCUgKDI1LzEwKSwgb2JyYcW8ZW5pYSAxSzZcXG5XYWxrYSAzMCUgKDE1LzYpLCBvYnJhxbxlbmlhIDFLM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBvYnJhxbxlbmlhIDFLOCsxXFxuVW5payA1MCUgKDI1LzEwKVxcblVtaWVqxJl0bm/Fm2NpXFxuVHJlc3VyYSBad2llcnrEhXQgNTUlLCBVcm9rIE9zb2Jpc3R5IDMwJSwgUGllcndzemEgUG9tb2MgMjUlLCBVa3J5d2FuaWUgMjAlLFxcbk5hc8WCdWNoaXdhbmllIDUwJSwgTWVkeWN5bmEgNDUlLCBQcnpla29ueXdhbmllIDI1JSwgUHN5Y2hvbG9naWEgNzUlLFxcbk5hdWthIChBc3Ryb25vbWlhKSA5MCUsIE5hdWthIChCb3RhbmlrYSkgMzUlLCBOYXVrYSAoWm9vbG9naWEpIDEwJSxcXG5TcG9zdHJ6ZWdhd2N6b8WbxIcgMzUlLCBVa3J5d2FuaWUgMTAlXFxuSsSZenlraTogQW5naWVsc2tpIDgwJSwgRWtsbyA1JS5cXG5aYWtsxJljaWE6IFByenl6d2FuaWUgTlBDLCBPZGVzxYJhbmllIE5QQy4nXHJcbiAgfSxcclxuICBmcjoge1xyXG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkZyZW5jaCcsXHJcbiAgICBkYk5vbmU6ICdBY3VuZScsXHJcbiAgICBhcm1vck5vbmU6ICcoPzpBY3VuZXxhdWN1bmUpJyxcclxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdBY3VuZScsXHJcbiAgICBzYW5Mb3NzTm9uZTogJ0FjdW5lJyxcclxuICAgIGZ1bGxkYjogJygnICsgJ0JEfEJvbnVzIGF1eCBkb21tYWdlc3xJbXBhY3R8SW1wJyArICcpJyxcclxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBJbXB8SW1wLzInICsgJyknLFxyXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0NvbWJhdHxBcm1lc3xBdHRhcXVlcycgKyAnKVs6XFxuXScsXHJcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcclxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0NvbXDDqXRlbmNlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXHJcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWVzPycgKyAnKVxcXFxzKls6XFxuXScsXHJcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdTb3J0aWzDqGdlc1xcXFxzKnxTb3J0cycgKyAnKVs6XFxuXScsXHJcbiAgICBoYW5kZ3VuOlxyXG4gICAgICAnKD88dHlwZT4nICtcclxuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGV0fERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xyXG4gICAgICAnKScsXHJcbiAgICByaWZsZTogJyg/PHR5cGU+JyArICdDYXJhYmluZXxMZWUtRW5maWVsZHxGdXNpbCcgKyAnKScsXHJcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU01HfFRob21wc29uJyArICcpJyxcclxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xNaXRyYWlsbGV1c2UnICsgJyknLFxyXG4gICAgbGF1bmNoZWQ6XHJcbiAgICAgICcoPzx0eXBlPicgK1xyXG4gICAgICAnQm9vbWVyYW5nIGRlIGd1ZXJyZXxKYXZlbGluZXxQaWVycmV8U2h1cmlrZW58QsOidG9uIGRlIGR5bmFtaXRlfENvY2t0YWlsIE1vbG90b3Z8R3JlbmFkZSDDoCBtYWlufE1vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgK1xyXG4gICAgICAnKScsXHJcbiAgICBleGFtcGxlOlxyXG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGFuc1xcbkZPUiA3NSBDT04gNjAgVEFJIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9VIDUwIMOJRFUgODUgU0FOIDU1IFBWIDE0IEJEOiAxRDRcXG5DYXJydXJlOiAxIE12dDogNyBQTTogMTAgQ2hhbmNlOiA0MCBBcm11cmU6IDFcXG5BdHRhcXVlcyBwYXIgcm91bmQgMyBQZXJ0ZSBkZSBTQU46IDFkNC8xZDhcXG5BdHRhcXVlc1xcbkJpdGUgNTAlICgyNS8xMCksIGRvbW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZG9tbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZG9tbWFnZSAxRDgrMVxcbkVzcXVpdmVyIDUwJSAoMjUvMTApXFxuQ29tcMOpdGVuY2VzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWU6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNvcnRpbMOoZ2VzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcclxuICB9LFxyXG4gIGVzOiB7XHJcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuU3BhbmlzaCcsXHJcbiAgICBkYk5vbmU6ICduaW5ndW5hJyxcclxuICAgIGFybW9yTm9uZTogJ25pbmd1bmEnLFxyXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25pbmd1bm8nLFxyXG4gICAgc2FuTG9zc05vbmU6ICdubycsXHJcbiAgICBmdWxsZGI6ICcoJyArICdCRHxiZHxib25pZmljYWNpw7NuIGRlIGRhw7FvJyArICcpJyxcclxuICAgIGhhbGZkYjogJygnICsgJ8K9fG1lZGlvIGRhw7FvfG1pdGFkfGRhw7FvIGEgbGEgbWl0YWQnICsgJyknLFxyXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0NvbWJhdGV8QXJtYXMnICsgJylbOlxcbl0nLFxyXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXRlJyArICdcXG4nLFxyXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnSGFiaWxpZGFkZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxyXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnSWRpb21hc3xMZW5ndWFqZXN8TGVuZ3VhcycgKyAnKVs6XFxuXScsXHJcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdDb25qdXJvc3xIZWNoaXpvcycgKyAnKVs6XFxuXScsXHJcbiAgICBoYW5kZ3VuOlxyXG4gICAgICAnKD88dHlwZT4nICtcclxuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGF8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXHJcbiAgICAgICcpJyxcclxuICAgIHJpZmxlOlxyXG4gICAgICAnKD88dHlwZT4nICtcclxuICAgICAgJ1JpZmxlfENhcmFiaW5hfExlZS1FbmZpZWxkfENhemEgRWxlZmFudGVzfEZ1c2lsfEVzY29wZXRhfEdhbGdhfFJlY29ydGFkYScgK1xyXG4gICAgICAnKScsXHJcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3ViZnVzaWx8VGhvbXBzb24nICsgJyknLFxyXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfEFtZXRyYWxsYWRvcmEnICsgJyknLFxyXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmFuYWRhfERpbmFtaXRhJyArICcpJyxcclxuICAgIGV4YW1wbGU6XHJcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYcOxb3NcXG5GVUUgNzUgQ09OIDYwIFRBTSA4MCBERVMgNzAgQVBBIDYwIElOVCA4MFxcblBPRCA1MCBFRFUgODUgQ09SIDU1IFBWIDE0IEJEOiAxRDRcXG5Db3JwdWxlbmNpYTogMSBNb3ZpbWllbnRvOiA3IFBNOiAxMCBTdWVydGU6IDQwIEFybWFkdXJhOiAxXFxuTsO6bWVybyBkZSBBdGFxdWVzIDMgUMOpcmRpZGEgZGUgY29yZHVyYTogMWQ0LzFkOFxcbkNvbWJhdGVcXG5CaXRlIDUwJSAoMjUvMTApLCBkYcOxbyAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYcOxbyAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGHDsW8gMUQ4KzFcXG5Fc3F1aXZhciA1MCUgKDI1LzEwKVxcbkhhYmlsaWRhZGVzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5JZGlvbWFzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Db25qdXJvczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXHJcbiAgfSxcclxuICAnemgtVFcnOiB7XHJcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuVHJhZGl0aW9uYWxDaGluZXNlJyxcclxuICAgIGRiTm9uZTogJ25vbmUnLFxyXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXHJcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXHJcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxyXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCfOWCt+Wus+WKoOWAvCcgKyAnKScsXHJcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cclxuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxyXG4gICAgc2VjdGlvbkNvbWJhdHM6XHJcbiAgICAgICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzfOaIsOmspeaKgOiDvXzmiLDprKXliJfooah85q2m5ZmoJyArICcpWzpcXG5dJyxcclxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxyXG4gICAgc2VjdGlvblNraWxsczpcclxuICAgICAgJ1xcbig/OicgKyAnKD86U2tpbGxzfOaKgOiDveWIl+ihqCknICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxyXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3VhZ2VzfOiqnuiogCcgKyAnKVs6XFxuXScsXHJcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHN85ZKS5paH5YiX6KGofOWSkuaWhycgKyAnKVs6XFxuXScsXHJcbiAgICBoYW5kZ3VuOlxyXG4gICAgICAnKD88dHlwZT4nICtcclxuICAgICAgJyDpgYLnmbzmp418XFxcXC4yMuefreWPo+iHquWLleaJi+anjXxcXFxcLjI155+t5Y+j5omL5qeNKOWWrueuoSl8XFxcXC4zMuaIljdcXFxcLjY1bW3lt6bovKrmiYvmp418XFxcXC4zMuaIljdcXFxcLjY1bW3oh6rli5XmiYvmp418XFxcXC4zNTcgTWFnbnVt5bem6Lyq5omL5qeNfFxcXFwuMzjmiJY5bW3lt6bovKrmiYvmp418XFxcXC4zOOiHquWLleaJi+anjXzosp3pm7floZRNOXzmoLzmtJvlhYsxN3w5bW3oh6rli5XmiYvmp4186a2v5qC8UDA4fFxcXFwuNDHlt6bovKrmiYvmp418XFxcXC40NOmmrOagvOWNl+W3pui8quaJi+anjXxcXFxcLjQ15bem6Lyq5omL5qeNfFxcXFwuNDXoh6rli5XmiYvmp4185rKZ5ryg5LmL6be5fEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcclxuICAgICAgJyknLFxyXG4gICAgcmlmbGU6XHJcbiAgICAgICcoPzx0eXBlPicgK1xyXG4gICAgICAn5q2l5qeNfOWNoeizk+anjXzljYroh6rli5XmraXmp41854216LGh5qeNfFJpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICtcclxuICAgICAgJyknLFxyXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29ufOihnemLkuanjScgKyAnKScsXHJcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN85qmf5qeNJyArICcpJyxcclxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZeeIhueCuOeJqXzmiYvmprTlvYh86YeN5q2m5ZmoJyArICcpJyxcclxuICAgIGV4YW1wbGU6XHJcbiAgICAgICfnpLrnr4Top5LoibIsIOW5tOm9oSAyN1xcbuWKm+mHjyA3NSDpq5Tos6ogNjAg6auU5Z6LIDgwIOaVj+aNtyA3MCDlpJboso4gNjAg5pm65YqbIDgwXFxu5oSP5b+XIDUwIOaVmeiCsiA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbumrlOagvDogMSBNb3ZlOiA3IE1QOiAxMCDlubjpgYs6IDQwIOitt+eUsjogMVxcbuaUu+aTiuasoeaVuDogMyDnkIbmmbrllqrlpLE6IDFkNC8xZDhcXG7miLDprKXliJfooahcXG7lkqwgNTAlICgyNS8xMCksIOWCt+WusyAxRDZcXG7nqbrmiYsgMzAlICgxNS82KSwg5YK35a6zIDFEM1xcbuaJi+anjSA0MCUgKDIwLzgpLCDlgrflrrMgMUQ4KzFcXG7ploPpgb8gNTAlICgyNS8xMClcXG7mioDog73liJfooahcXG7li5XnianpprTppIogNTUlLCDlj5bmgoUgMzAlLCDmgKXmlZEgMjUlLCDmvZvooYwgMjAlLFxcbuiBhuiBvSA1MCUsIOiXpeWtuCA0NSUsIOeyvuelnuWIhuaekCAyNSUsIOW/g+eQhuWtuCA3NSUsXFxu56eR5a24ICjlj7jms5Xnp5HlrbgpIDkwJSwg56eR5a24ICjlr4bnorzlrbgpIDM1JSwgXFxu5YG15p+lIDM1JSwg5Zas6KOdIDEwJVxcbuiqnuiogDog57K16KqeIDgwJSwg6K6A5ZSHIDUlLlxcbuWSkuaWhzog5Y+s5ZaaIE5QQywg5oyH5o+uIE5QQy4nXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCB0cmFuc2xhdGlvbnMgPSB7XHJcbiAgZW46IHtcclxuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcclxuICAgIG9jY3VwYXRpb246XHJcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXHJcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFInICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0laJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2FuOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnU0FOfFNhbml0eScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGhwOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnSFB8SGl0IHBvaW50cycgKyAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgbXA6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGRiOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXHJcbiAgICAgIGtleXMuZW4uZGJOb25lICtcclxuICAgICAgJylbLFxcXFxzXFxuXSonLFxyXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdCdWlsZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcm1vcjpcclxuICAgICAgJyg/PCFbYS16XSknICtcclxuICAgICAgJ0FybW9yJyArXHJcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXHJcbiAgICAgIGtleXMuZW4uYXJtb3JOb25lICtcclxuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcclxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBhdHRhY2tzUGVyUm91bmQ6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3MnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xyXG4gICAgICBrZXlzLmVuLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xyXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXHJcbiAgICBzYW5Mb3NzOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3MnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcclxuICAgICAga2V5cy5lbi5zYW5Mb3NzTm9uZSArXHJcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxyXG4gICAgd2VhcG9uOlxyXG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xyXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXHJcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xyXG4gICAgICAnZGFtYWdlJyArXHJcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXHJcbiAgICAgIGtleXMuZW4uZnVsbGRiICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5lbi5oYWxmZGIgK1xyXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxyXG4gICAgd2VhcG9uRG9kZ2U6XHJcbiAgICAgICcoPzxuYW1lPicgK1xyXG4gICAgICAnRG9kZ2UnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcclxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcclxuICAgIHNraWxsOlxyXG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xyXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXHJcbiAgICAgICddKyg/PCEnICtcclxuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcclxuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxyXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICdGaWdodGluZ3xGaXJlYXJtc3xCcmF3bHxCaXRlJyArICcpJyxcclxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxyXG4gICAgc2VjdGlvbnM6XHJcbiAgICAgICcoJyArXHJcbiAgICAgIGtleXMuZW4uc2VjdGlvbkNvbWJhdHMgK1xyXG4gICAgICAnfCcgK1xyXG4gICAgICBrZXlzLmVuLnNlY3Rpb25Ta2lsbHMgK1xyXG4gICAgICAnfCcgK1xyXG4gICAgICBrZXlzLmVuLnNlY3Rpb25MYW5nYXVnZXMgK1xyXG4gICAgICAnfCcgK1xyXG4gICAgICBrZXlzLmVuLnNlY3Rpb25TcGVsbHMgK1xyXG4gICAgICAnKSdcclxuICB9LFxyXG4gIGRlOiB7XHJcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdBbHRlcicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcclxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ0JlcnVmJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxyXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1QnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdHUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU4nICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01BJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdHRScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnRVInICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0JJJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBzYW46XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdnU3xTVEF8R2Vpc3RpZ2UgU3RhYmlsaXTDpHQnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBocDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1RQfFRyZWZmZXJwdW5rdGUnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIG1wOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnTVB8TWFnaWVwdW5rdGUnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGRiOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEfFdcXFxcZCspP3wnICtcclxuICAgICAga2V5cy5kZS5kYk5vbmUgK1xyXG4gICAgICAnKVssXFxcXHNcXG5dKicsXHJcbiAgICBidWlsZDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1N0YXR1cnxTdGF0LicgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxyXG4gICAgYXJtb3I6XHJcbiAgICAgICcoPzwhW2Etel0pJyArXHJcbiAgICAgICdQYW56ZXJ1bmcnICtcclxuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcclxuICAgICAga2V5cy5kZS5hcm1vck5vbmUgK1xyXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxyXG4gICAgbW92OlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnQld8QmV3ZWd1bmdzd2VpdGUnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxyXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnR2zDvGNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBhdHRhY2tzUGVyUm91bmQ6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdBbmdyaWZmZSBwcm8gUnVuZGV8QW5ncmlmZmV8UHJvIFJ1bmRlJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcclxuICAgICAga2V5cy5kZS5hdHRhY2tzUGVyUm91bmROb25lICtcclxuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2FuTG9zczpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1N0YWJpbGl0w6R0c3Zlcmx1c3QnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcclxuICAgICAga2V5cy5kZS5zYW5Mb3NzTm9uZSArXHJcbiAgICAgICd8XFxcXGRbRFddP1srXFxcXGRdKlxcXFwvXFxcXGRbRFddP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxyXG4gICAgd2VhcG9uOlxyXG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xyXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXHJcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xyXG4gICAgICAnU2NoYWRlbicgK1xyXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrd3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXHJcbiAgICAgIGtleXMuZGUuZnVsbGRiICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5kZS5oYWxmZGIgK1xyXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZHx3KT9cXFxcZCspKikrKVxcXFwpPycsXHJcbiAgICB3ZWFwb25Eb2RnZTpcclxuICAgICAgJyg/PG5hbWU+JyArXHJcbiAgICAgICdBdXN3ZWljaGVuJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXHJcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXHJcbiAgICBza2lsbDpcclxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcclxuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xyXG4gICAgICAnXSsoPzwhJyArXHJcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXHJcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLDtdP1xcXFxzKicsXHJcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxyXG4gICAgICAnKF58KD88ISwpXFxuKSgnICtcclxuICAgICAgJ0FuZ3JpZmZlfEhhbmRnZW1lbmdlfE5haGthbXBmfEZhdXN0ZmV1ZXJ3YWZmZXxCZWnDn2VuJyArXHJcbiAgICAgICcpJyxcclxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxyXG4gICAgc2VjdGlvbnM6XHJcbiAgICAgICcoJyArXHJcbiAgICAgIGtleXMuZGUuc2VjdGlvbkNvbWJhdHMgK1xyXG4gICAgICAnfCcgK1xyXG4gICAgICBrZXlzLmRlLnNlY3Rpb25Ta2lsbHMgK1xyXG4gICAgICAnfCcgK1xyXG4gICAgICBrZXlzLmRlLnNlY3Rpb25MYW5nYXVnZXMgK1xyXG4gICAgICAnfCcgK1xyXG4gICAgICBrZXlzLmRlLnNlY3Rpb25TcGVsbHMgK1xyXG4gICAgICAnKSdcclxuICB9LFxyXG4gIHBsOiB7XHJcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKScgKyAnXFxcXHMrKD86JyArICdsYXRhfGxhdHxyb2snICsgJylbLFxcXFxzXSonLFxyXG4gICAgb2NjdXBhdGlvbjogJ1ssXFxcXHNdKicgKyAnWmF3w7NkJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxyXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnUycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdCQycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNT0MnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ1pSJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdXWUcnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ1dZSycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2FuOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnUHxQb2N6eXRhbG5vxZvEhycgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGhwOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnUFd8UHVua3R5IFd5dHJ6eW1hxYJvxZtjaScgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgbXA6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdQTXxQdW5rdHkgTWFnaWknICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGRiOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEfEtcXFxcZCspP3wnICtcclxuICAgICAga2V5cy5wbC5kYk5vbmUgK1xyXG4gICAgICAnKVssXFxcXHNcXG5dKicsXHJcbiAgICBidWlsZDogJyg/PCFbYS16XSknICsgJ0tyemVwYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcm1vcjpcclxuICAgICAgJyg/PCFbYS16XSknICtcclxuICAgICAgJ1BhbmNlcnonICtcclxuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcclxuICAgICAga2V5cy5wbC5hcm1vck5vbmUgK1xyXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxyXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnUnVjaCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcclxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N6Y3rEmcWbY2llJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBhdHRhY2tzUGVyUm91bmQ6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdBdGFraSB3IHJ1bmR6aWV8IyBBdGFraScgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXHJcbiAgICAgIGtleXMucGwuYXR0YWNrc1BlclJvdW5kTm9uZSArXHJcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcclxuICAgIHNhbkxvc3M6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdVdHJhdGEgUG9jenl0YWxub8WbY2l8dXRyYXRhIFAnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcclxuICAgICAga2V5cy5wbC5zYW5Mb3NzTm9uZSArXHJcbiAgICAgICd8XFxcXGRbREtdP1srXFxcXGRdKlxcXFwvXFxcXGRbREtdP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxyXG4gICAgd2VhcG9uOlxyXG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xyXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXHJcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xyXG4gICAgICAnb2JyYcW8ZW5pYScgK1xyXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQra3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXHJcbiAgICAgIGtleXMucGwuZnVsbGRiICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5wbC5oYWxmZGIgK1xyXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxyXG4gICAgd2VhcG9uRG9kZ2U6XHJcbiAgICAgICcoPzxuYW1lPicgK1xyXG4gICAgICAnVW5paycgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxyXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxyXG4gICAgc2tpbGw6XHJcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXHJcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcclxuICAgICAgJ10rKD88IScgK1xyXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xyXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXHJcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxyXG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ1dhbGthfEJyb8WEIFBhbG5hfEJpamF0eWthfFVncnl6aWVuaWUnICsgJyknLFxyXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXHJcbiAgICBzZWN0aW9uczpcclxuICAgICAgJygnICtcclxuICAgICAga2V5cy5wbC5zZWN0aW9uQ29tYmF0cyArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXMucGwuc2VjdGlvblNraWxscyArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXMucGwuc2VjdGlvbkxhbmdhdWdlcyArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXMucGwuc2VjdGlvblNwZWxscyArXHJcbiAgICAgICcpJ1xyXG4gIH0sXHJcbiAgZnI6IHtcclxuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspXFxcXHMqJyArICdhbnMnICsgJyg/IVthLXpdKVssXFxcXHNdKicsXHJcbiAgICBvY2N1cGF0aW9uOlxyXG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxyXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnRk9SJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1UnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICfDiURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBzYW46XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdTQU58U2FudMOpIE1lbnRhbGUnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBocDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1BWfFBvaW50cyBkZSB2aWUnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIG1wOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnUE18UG9pbnRzIGRlIG1hZ2llJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBkYjpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAga2V5cy5mci5mdWxsZGIgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xyXG4gICAgICBrZXlzLmZyLmRiTm9uZSArXHJcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcclxuICAgIGJ1aWxkOlxyXG4gICAgICAnKD88IVthLXpdKScgKyAnQ2FycnVyZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcm1vcjpcclxuICAgICAgJyg/PCFbYS16XSknICtcclxuICAgICAgJ0FybXVyZXxQcm90ZWN0aW9uJyArXHJcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXHJcbiAgICAgIGtleXMuZnIuYXJtb3JOb25lICtcclxuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcclxuICAgIG1vdjpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ012dHxNb3V2ZW1lbnR8RMOpcGxhY2VtZW50JyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcclxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0NoYW5jZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgYXR0YWNrc1BlclJvdW5kOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnQXR0YXF1ZXMgcGFyIHJvdW5kJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcclxuICAgICAga2V5cy5mci5hdHRhY2tzUGVyUm91bmROb25lICtcclxuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2FuTG9zczpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1BlcnRlIGRlIFNhbnTDqSBtZW50YWxlfFBlcnRlIGRlIFNBTicgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xyXG4gICAgICBrZXlzLmZyLnNhbkxvc3NOb25lICtcclxuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXHJcbiAgICB3ZWFwb246XHJcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXHJcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcclxuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXHJcbiAgICAgICdkb21tYWdlfGTDqWfDonRzJyArXHJcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xyXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXMuZnIuaGFsZmRiICtcclxuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcclxuICAgIHdlYXBvbkRvZGdlOlxyXG4gICAgICAnKD88bmFtZT4nICtcclxuICAgICAgJ0VzcXVpdmVyPycgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxyXG4gICAgc2tpbGw6XHJcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXHJcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcclxuICAgICAgJ10rKD88IScgK1xyXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xyXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXHJcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxyXG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0F1IGNvbnRhY3R8w4AgZGlzdGFuY2V8Q29tYmF0IHJhcHByb2Now6l8Qml0ZScgKyAnKScsXHJcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcclxuICAgIHNlY3Rpb25zOlxyXG4gICAgICAnKCcgK1xyXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Db21iYXRzICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5mci5zZWN0aW9uU2tpbGxzICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5mci5zZWN0aW9uTGFuZ2F1Z2VzICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5mci5zZWN0aW9uU3BlbGxzICtcclxuICAgICAgJyknXHJcbiAgfSxcclxuICBlczoge1xyXG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2Fbw7HDkV1vcycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcclxuICAgIG9jY3VwYXRpb246XHJcbiAgICAgICdbLFxcXFxzXSonICsgJ09jdXBhY2nDs24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXHJcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGVUUnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnVEFNJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPRCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVTJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUEEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2FuOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnQ09SfENvcmR1cmEnICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBocDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1BWfFB1bnRvcyBkZSB2aWRhfFBcXFxcLiA/VlxcXFwuJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBtcDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ1BNfFB1bnRvcyBNw6FnaWNvc3xQdW50b3MgZGUgTWFnaWEnICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGRiOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXHJcbiAgICAgIGtleXMuZXMuZGJOb25lICtcclxuICAgICAgJylbLFxcXFxzXFxuXSonLFxyXG4gICAgYnVpbGQ6XHJcbiAgICAgICcoPzwhW2Etel0pJyArICdDb3JwdWxlbmNpYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcm1vcjpcclxuICAgICAgJyg/PCFbYS16XSknICtcclxuICAgICAgJ0FybWFkdXJhJyArXHJcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXHJcbiAgICAgIGtleXMuZXMuYXJtb3JOb25lICtcclxuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcclxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmltaWVudG8nICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdTdWVydGUnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGF0dGFja3NQZXJSb3VuZDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ07Dum1lcm8gZGUgQXRhcXVlcycgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXHJcbiAgICAgIGtleXMuZXMuYXR0YWNrc1BlclJvdW5kTm9uZSArXHJcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcclxuICAgIHNhbkxvc3M6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgICdQw6lyZGlkYSBkZSBjb3JkdXJhfFDDqXJkaWRhIGRlIENPUicgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xyXG4gICAgICBrZXlzLmVzLnNhbkxvc3NOb25lICtcclxuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXHJcbiAgICB3ZWFwb246XHJcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXHJcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcclxuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXHJcbiAgICAgICdkYcOxbycgK1xyXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xyXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXMuZXMuaGFsZmRiICtcclxuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcclxuICAgIHdlYXBvbkRvZGdlOlxyXG4gICAgICAnKD88bmFtZT4nICtcclxuICAgICAgJ0VzcXVpdmFyJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXHJcbiAgICBza2lsbDpcclxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcclxuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xyXG4gICAgICAnXSsoPzwhJyArXHJcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXHJcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcclxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XHJcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQ29tYmF0aXJ8QXJtYXMgZGUgZnVlZ298QnJhd2x8Qml0ZScgKyAnKScsXHJcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcclxuICAgIHNlY3Rpb25zOlxyXG4gICAgICAnKCcgK1xyXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Db21iYXRzICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5lcy5zZWN0aW9uU2tpbGxzICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5lcy5zZWN0aW9uTGFuZ2F1Z2VzICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5cy5lcy5zZWN0aW9uU3BlbGxzICtcclxuICAgICAgJyknXHJcbiAgfSxcclxuICAnemgtVFcnOiB7XHJcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2V85bm06b2hJyArICcoXFxcXHMqOik/XFxcXHMqKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxyXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXHJcbiAgICBvY2N1cGF0aW9uOlxyXG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxyXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSfOWKm+mHjycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OfOmrlOizqicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0lafOmrlOWeiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UfOaZuuWKmycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XfOaEj+W/lycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYfOaVj+aNtycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQfOWkluiyjicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVfOaVmeiCsicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgc2FuOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnU0FOfFNhbml0eXznkIbmmbonICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBocDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ0hQfEhpdCBwb2ludHN855Sf5ZG9JyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXHJcbiAgICBtcDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxyXG4gICAgZGI6XHJcbiAgICAgICcoPzwhW2Etel0pKD86JyArXHJcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcclxuICAgICAga2V5c1snemgtVFcnXS5kYk5vbmUgK1xyXG4gICAgICAnKVssXFxcXHNcXG5dKicsXHJcbiAgICBidWlsZDpcclxuICAgICAgJyg/PCFbYS16XSknICsgJ0J1aWxkfOmrlOagvCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBhcm1vcjpcclxuICAgICAgJyg/PCFbYS16XSknICtcclxuICAgICAgJ0FybW9yfOitt+eUsicgK1xyXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKig/PGFybW9yPicgK1xyXG4gICAgICBrZXlzWyd6aC1UVyddLmFybW9yTm9uZSArXHJcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXHJcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZlJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxyXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVja3zlubjpgYsnICsgJyhcXFxccyo6KT9cXFxccyooPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcclxuICAgIGF0dGFja3NQZXJSb3VuZDpcclxuICAgICAgJyg/PCFbYS16XSkoPzonICtcclxuICAgICAgJ0F0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrc3zmlLvmk4rmrKHmlbh8IyDmlLvmk4onICtcclxuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88YXR0YWNrc1BlclJvdW5kPicgK1xyXG4gICAgICBrZXlzWyd6aC1UVyddLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xyXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXHJcbiAgICBzYW5Mb3NzOlxyXG4gICAgICAnKD88IVthLXpdKSg/OicgK1xyXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3N855CG5pm65Zaq5aSxfFNBTuWAvOaQjeWksXxTQU7lgLzllqrlpLF85omjU0FOJyArXHJcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbkxvc3M+JyArXHJcbiAgICAgIGtleXNbJ3poLVRXJ10uc2FuTG9zc05vbmUgK1xyXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcclxuICAgIHdlYXBvbjpcclxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcclxuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xyXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcclxuICAgICAgJ2RhbWFnZXzlgrflrrMnICtcclxuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXHJcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcclxuICAgICAgJ3wnICtcclxuICAgICAga2V5c1snemgtVFcnXS5oYWxmZGIgK1xyXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxyXG4gICAgd2VhcG9uRG9kZ2U6XHJcbiAgICAgICcoPzxuYW1lPicgK1xyXG4gICAgICAnRG9kZ2V86ZaD6YG/fOmWg+i6sicgK1xyXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcclxuICAgIHNraWxsOlxyXG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xyXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXHJcbiAgICAgICddKyg/PCEnICtcclxuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcclxuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxyXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICfov5HmiLDmioDog7185bCE5pOK5oqA6IO9fEJyYXdsfEJpdGUnICsgJyknLFxyXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXHJcbiAgICBzZWN0aW9uczpcclxuICAgICAgJygnICtcclxuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uQ29tYmF0cyArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNraWxscyArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkxhbmdhdWdlcyArXHJcbiAgICAgICd8JyArXHJcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNwZWxscyArXHJcbiAgICAgICcpJ1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyUmVnRXhwIHtcclxuICBzdGF0aWMgY2hlY2tMYW5ndWFnZSAobGFuZyA9IG51bGwpIHtcclxuICAgIGlmICghbGFuZykge1xyXG4gICAgICBsYW5nID0gZ2FtZS5pMThuLmxhbmdcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgdHJhbnNsYXRpb25zW2xhbmddID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBsYW5nID0gJ2VuJ1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxhbmdcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRFeGFtcGxlVGV4dCAobGFuZykge1xyXG4gICAgbGV0IGV4YW1wbGUgPSBrZXlzLmVuLmV4YW1wbGVcclxuICAgIGlmICh0eXBlb2Yga2V5c1tsYW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgZXhhbXBsZSA9IGtleXNbbGFuZ10uZXhhbXBsZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGV4YW1wbGVcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRUcmFuc2xhdGlvbnMgKCkge1xyXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cclxuICAgIGZvciAoY29uc3Qga2V5IGluIGtleXMpIHtcclxuICAgICAgb3V0cHV0W2tleV0gPSBrZXlzW2tleV0uZGVzY3JpcHRpb25cclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRLZXlzIChsYW5nKSB7XHJcbiAgICByZXR1cm4ga2V5c1tsYW5nXSB8fCBrZXlzLmVuXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0UmVndWxhckV4cHJlc3Npb25zIChsYW5nKSB7XHJcbiAgICByZXR1cm4gdHJhbnNsYXRpb25zW2xhbmddIHx8IHRyYW5zbGF0aW9ucy5lblxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZHVwbGljYXRlLCBnYW1lLCB1aSAqL1xyXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xyXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcclxuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtcy9pdGVtLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuLyoqXHJcbiAqIENvQzdBY3RvckltcG9ydGVyIGhlbHBlciBjbGFzcyB0byBpbXBvcnQgYW4gQWN0b3IgZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXIge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMucGFyc2VkID0ge31cclxuICAgIHRoaXMuaXRlbUxvY2F0aW9ucyA9ICcnXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGFzTnVtYmVyICgpIHtcclxuICAgIHJldHVybiAnbidcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgYXNTdHJpbmcgKCkge1xyXG4gICAgcmV0dXJuICdzJ1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0UmVnRXgsIGdldCBSZWdFeHAgb2JqZWN0IGlmIG5vdCBjdXJyZW50bHkgYSBSZWdFeHAgb2JqZWN0XHJcbiAgICogQHBhcmFtIHtNaXhlZH0gcmVnZXggUmVnRXhwIG9yIHN0cmluZ1xyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgaWYgc3RyaW5nIHdhcyBzdXBwbGllZCBpbiByZWdleCBsaXN0IG9mIG1vZGlmaWVycyB0byBhZGQgdG8gdGhlIFJlZ0V4cFxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB9XHJcbiAgICovXHJcbiAgZ2V0UmVnRXggKHJlZ2V4LCBtb2RpZmllcnMgPSAnaXUnKSB7XHJcbiAgICBpZiAocmVnZXguY29uc3RydWN0b3I/Lm5hbWUgPT09ICdSZWdFeHAnKSB7XHJcbiAgICAgIHJldHVybiByZWdleFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG1vZGlmaWVycylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGNsZWFuU3RyaW5nLCByZW1vdmVzIG5ldyBsaW5lIGFuZCBjYXJyaWVyIHJldHVybiBjaGFyYWN0ZXIgYW5kIGxhdGVyYWwgc3BhY2VzIGZyb20gYSBzdHJpbmdcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNsZWFuXHJcbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIGNsZWFuZWQgc3RyaW5nXHJcbiAgICovXHJcbiAgY2xlYW5TdHJpbmcgKHMpIHtcclxuICAgIHJldHVybiBzXHJcbiAgICAgIC5yZXBsYWNlKC8oXFxufFxccikvZywgJyAnKVxyXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcclxuICAgICAgLnJlcGxhY2UoL1xccypcXC4/XFxzKlxcLj8kLywgJycpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiB0cmFuc2xhdGVSb2xsLCB0cmFuc2xhdGVzIGxhbmd1YWdlIHNwZWNpZmljIHNob3J0Zm9ybSBvZiBkaWNlIChEKSBpbiByb2xsc1xyXG4gICAqIEV4YW1wbGUgZm9yIEdlcm1hbiByb2xsczogMVc0ID0+IDFENC5cclxuICAgKiBEaWNlIHNob3J0Zm9ybSBpcyBjb25maWd1cmVkIHVzaW5nIGtleXMuZGljZVNob3J0XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHMgdGhlIHJvbGwgdG8gYmUgdHJhbnNsYXRlZFxyXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSB0cmFuc2xhdGVkIHJvbGxcclxuICAgKi9cclxuICB0cmFuc2xhdGVSb2xsIChzKSB7XHJcbiAgICBpZiAodHlwZW9mIHMgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gc1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmtleXMuZGljZVNob3J0ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoXHJcbiAgICAgICAgJyg/PG4xPlxcXFxkKyknICsgdGhpcy5rZXlzLmRpY2VTaG9ydCArICcoPzxuMj5cXFxcZCspJyxcclxuICAgICAgICAnaXVnJ1xyXG4gICAgICApXHJcbiAgICAgIHJldHVybiBzLnJlcGxhY2UocmVnRXgsICckPG4xPkQkPG4yPicpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gc1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogdG9IVE1MLCBjb252ZXJ0cyBhIHN0cmluZyB0byBIVE1MIHN0cmlwaW5nIG91dCBlbXB0eSBsaW5lcyBvciBsaW5lcyB0aGF0IGNvbnRhaW4ganVzdCAsIG9yIC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNvbnZlcnRcclxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcclxuICAgKi9cclxuICB0b0hUTUwgKHMpIHtcclxuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuICcnXHJcbiAgICB9XHJcbiAgICBzID0gc1xyXG4gICAgICAudHJpbSgpXHJcbiAgICAgIC5zcGxpdCgnXFxuJylcclxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHNdKyQvLCAnJykpXHJcbiAgICAgIC5maWx0ZXIodGV4dCA9PiB0ZXh0KVxyXG4gICAgICAuam9pbignPC9wPjxwPicpXHJcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuICcnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBjaGVjayBleHBlY3RzIGEga2V5IGZyb20gdGhpcy5yZWdFeCB3aWxsIGF0dGVtcHQgdG8gbWF0Y2ggdGhlIHRleHRcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcmVnRXhLZXkga2V5IGluIHRoaXMucmVnRXhcclxuICAgKiBAcGFyYW0ge0pTT059XHJcbiAgICogLSByZW1vdmVGcm9tVGV4dCByZW1vdmUgZnJvbSB0aGlzLnRleHRcclxuICAgKiAtIHNhdmVLZXlzIGFkZCBncm91cCBrZXlzIHRvIHRoaXMucGFyc2VkXHJcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxyXG4gICAqIC0gdGV4dCBJZiBzZXQgdXNlIHRoaXMgaW5zdGVhZCBvZiB0aGlzLnRleHRcclxuICAgKiAtIHJlcXVpcmVkR3JvdXAgSWYgbm90IGZhbHNlIHJlcXVpcmUgc3BlY2lmaWVkIGtleSBpbiBSZWdFeHAgZ3JvdXBzXHJcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XHJcbiAgICovXHJcbiAgY2hlY2sgKFxyXG4gICAgcmVnRXhLZXksXHJcbiAgICB7XHJcbiAgICAgIHJlbW92ZUZyb21UZXh0ID0gdHJ1ZSxcclxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxyXG4gICAgICB0eXBlID0gQ29DN0FjdG9ySW1wb3J0ZXIuYXNTdHJpbmcsXHJcbiAgICAgIHRleHQgPSBmYWxzZSxcclxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXHJcbiAgICB9ID0ge31cclxuICApIHtcclxuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxyXG4gICAgbGV0IHJlZ0V4cCA9IGZhbHNlXHJcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnRXhbcmVnRXhLZXldICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5rZXlzW3JlZ0V4S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgcmVnRXhwID0gdGhpcy5nZXRSZWdFeCh0aGlzLmtleXNbcmVnRXhLZXldKVxyXG4gICAgfVxyXG4gICAgaWYgKHJlZ0V4cCAhPT0gZmFsc2UpIHtcclxuICAgICAgaWYgKHRleHQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNoZWNrID0gcmVnRXhwLmV4ZWModGV4dClcclxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgY2hlY2sgIT09IG51bGwgJiZcclxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcclxuICAgICAgICAgIHR5cGVvZiAoY2hlY2suZ3JvdXBzIHx8IHt9KVtyZXF1aXJlZEdyb3VwXSAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICkge1xyXG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxyXG4gICAgICAgIGlmIChyZW1vdmVGcm9tVGV4dCkge1xyXG4gICAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2UoY2hlY2tbMF0udHJpbSgpLCAnXFxuJykudHJpbSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzYXZlS2V5cykge1xyXG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoY2hlY2suZ3JvdXBzKSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICBjYXNlIENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IFN0cmluZyhjaGVjay5ncm91cHNba2V5XSkucmVwbGFjZSgnXFxuJywgJyAnKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICBjYXNlIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyOlxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBOdW1iZXIoY2hlY2suZ3JvdXBzW2tleV0pXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gTnVtYmVyKGNoZWNrLmdyb3Vwc1trZXldKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBvdXRwdXRbJy1zb3VyY2UnXSA9IGNoZWNrWzBdXHJcbiAgICAgICAgb3V0cHV0WyctaW5kZXgnXSA9IGNoZWNrLmluZGV4XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgY29tYmF0IHNlY3Rpb25cclxuICAgKiBAcmV0dXJucyB2b2lkXHJcbiAgICovXHJcbiAgcHJvY2Vzc0NvbWJhdCAodGV4dCkge1xyXG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXHJcbiAgICB9XHJcbiAgICBsZXQgd2VhcG9uXHJcbiAgICBsZXQgZG9kZ2VcclxuICAgIGxldCBuZXdsaW5lXHJcbiAgICBsZXQgbGFzdFBlcmNlbnQgPSBmYWxzZVxyXG4gICAgbGV0IG1heExvb3BzID0gNDBcclxuICAgIGRvIHtcclxuICAgICAgbWF4TG9vcHMtLVxyXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcclxuICAgICAgaWYgKFxyXG4gICAgICAgIChkb2RnZSA9IHRoaXMuY2hlY2soJ3dlYXBvbkRvZGdlJywgeyBzYXZlS2V5czogZmFsc2UsIHRleHQgfSkpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoZG9kZ2VbJy1zb3VyY2UnXSwgJ1xcbicpXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5za2lsbHMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxyXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihkb2RnZS5wZXJjZW50YWdlKSxcclxuICAgICAgICAgIHB1c2g6IGZhbHNlXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAod2VhcG9uID0gdGhpcy5jaGVjaygnd2VhcG9uJywge1xyXG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxyXG4gICAgICAgICAgdGV4dCxcclxuICAgICAgICAgIHJlcXVpcmVkR3JvdXA6IGxhc3RQZXJjZW50ID09PSBmYWxzZSA/ICdwZXJjZW50YWdlJyA6IGZhbHNlXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2Uod2VhcG9uWyctc291cmNlJ10sICdcXG4nKVxyXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxyXG4gICAgICAgIGxldCBkYW1hZ2UgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5jbGVhblN0cmluZyh3ZWFwb24uZGFtYWdlIHx8ICcnKSlcclxuICAgICAgICBjb25zdCBpc1JhbmdlZCA9ICEhKFxyXG4gICAgICAgICAgdGhpcy5jaGVjaygnaGFuZGd1bicsIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSxcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcclxuICAgICAgICAgIH0pIHx8XHJcbiAgICAgICAgICB0aGlzLmNoZWNrKCdyaWZsZScsIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSxcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcclxuICAgICAgICAgIH0pIHx8XHJcbiAgICAgICAgICB0aGlzLmNoZWNrKCdzbWInLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXHJcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcclxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXHJcbiAgICAgICAgICB9KSB8fFxyXG4gICAgICAgICAgdGhpcy5jaGVjaygnbWFjaGluZUd1bicsIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSxcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcclxuICAgICAgICAgIH0pIHx8XHJcbiAgICAgICAgICB0aGlzLmNoZWNrKCdsYXVuY2hlZCcsIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSxcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHdlYXBvbi5wZXJjZW50YWdlICE9PSBudWxsICYmXHJcbiAgICAgICAgICB0eXBlb2Ygd2VhcG9uLnBlcmNlbnRhZ2UgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IE51bWJlcih3ZWFwb24ucGVyY2VudGFnZSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGFzdFBlcmNlbnQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmb3VuZFxyXG4gICAgICAgIGxldCBhaGRiID0gZmFsc2VcclxuICAgICAgICBsZXQgYWRkYiA9IGZhbHNlXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxyXG4gICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXHJcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmhhbGZkYiArXHJcbiAgICAgICAgICAgICAgJylcXFxccyooJyArXHJcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXHJcbiAgICAgICAgICAgICAgJyk/Wy0rXT9cXFxccyooJyArXHJcbiAgICAgICAgICAgICAgdGhpcy5wYXJzZWQuZGIucmVwbGFjZSgvXlstK10vLCAnJykgK1xyXG4gICAgICAgICAgICAgICcpPydcclxuICAgICAgICAgICkuZXhlYyhkYW1hZ2UpXHJcbiAgICAgICAgICBpZiAoZm91bmQpIHtcclxuICAgICAgICAgICAgYWhkYiA9IHRydWVcclxuICAgICAgICAgICAgZGFtYWdlID0gZGFtYWdlLnJlcGxhY2UoZm91bmRbMF0sICcnKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxyXG4gICAgICAgICAgICAgICdcXFxccypbKy1dP1xcXFxzKignICtcclxuICAgICAgICAgICAgICAgIHRoaXMua2V5cy5mdWxsZGIgK1xyXG4gICAgICAgICAgICAgICAgJylcXFxccypbLStdP1xcXFxzKignICtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkLmRiLnJlcGxhY2UoL15bLStdLywgJycpICtcclxuICAgICAgICAgICAgICAgICcpPydcclxuICAgICAgICAgICAgKS5leGVjKGRhbWFnZSlcclxuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgYWRkYiA9IHRydWVcclxuICAgICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlIChmb3VuZClcclxuICAgICAgICBjb25zdCBkYW1hZ2VzID0gZGFtYWdlLnNwbGl0KCcvJylcclxuICAgICAgICBjb25zdCBpc1Nob3RndW4gPSBkYW1hZ2VzLmxlbmd0aCA9PT0gM1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgdHlwZTogJ3dlYXBvbicsXHJcbiAgICAgICAgICBzeXN0ZW06IHtcclxuICAgICAgICAgICAgc2tpbGw6IHtcclxuICAgICAgICAgICAgICBpZDogbGFzdFBlcmNlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvcGVydGllczoge30sXHJcbiAgICAgICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXNTaG90Z3VuID8gMTAgOiAwLFxyXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBkYW1hZ2VzWzBdXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBsb25nOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXNTaG90Z3VuID8gMjAgOiAwLFxyXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGV4dHJlbWU6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXHJcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGlzU2hvdGd1biA/IGRhbWFnZXNbMl0gOiAnJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xyXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1biA9IGlzU2hvdGd1blxyXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMucm5nZCA9IGlzUmFuZ2VkIHx8IGlzU2hvdGd1blxyXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkXHJcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5haGRiID0gYWhkYlxyXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWRkYiA9IGFkZGJcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzID0gW11cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXHJcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eKC4rKVxcbi8pKSkge1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UobmV3bGluZVswXSwgJ1xcbicpXHJcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcclxuICAgICAgICB0ZXh0ID0gJydcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXHJcbiAgICBpZiAobWF4TG9vcHMgPT09IDApIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRXZWFwb25UZXh0JylcclxuICAgICAgKVxyXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHdlYXBvbnM6JywgdGV4dClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHByb2Nlc3NTa2lsbHMgZXh0cmFjdHMgc2tpbGxzIC8gbGFuZ3VhZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgc2tpbGxzIC8gbGFuZ3VhZ2Ugc2VjdGlvblxyXG4gICAqIEByZXR1cm5zIHZvaWRcclxuICAgKi9cclxuICBwcm9jZXNzU2tpbGxzICh0ZXh0LCBrZXkgPSAnc2tpbGxzJykge1xyXG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxyXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRleHQgPSBicmVha3NbMF1cclxuICAgIH1cclxuICAgIGxldCBza2lsbFxyXG4gICAgbGV0IG1heExvb3BzID0gNDBcclxuICAgIGRvIHtcclxuICAgICAgbWF4TG9vcHMtLVxyXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcclxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pXHJcbiAgICAgIGlmIChza2lsbCkge1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2Uoc2tpbGxbJy1zb3VyY2UnXSwgJ1xcbicpXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKHNraWxsLm5hbWUpLFxyXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihza2lsbC5wZXJjZW50YWdlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gd2hpbGUgKG1heExvb3BzID4gMCAmJiBza2lsbClcclxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVW5leHBlY3RlZFNraWxsc1RleHQnKVxyXG4gICAgICApXHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgc2tpbGxzOicsIHRleHQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIHNwZWxsIHNlY3Rpb25cclxuICAgKiBAcmV0dXJucyB2b2lkXHJcbiAgICovXHJcbiAgcHJvY2Vzc1NwZWxscyAodGV4dCkge1xyXG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxyXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRleHQgPSBicmVha3NbMF1cclxuICAgIH1cclxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKSwvKVxyXG4gICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2UodGV4dC50cmltKCksICdcXG4nKVxyXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHNBcnIpIHtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5zcGVsbHMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdGhpcy5wYXJzZWQuc3BlbGxzID0gW11cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBhcnNlZC5zcGVsbHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHNwZWxsKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHBhcnNlQ2hhcmFjdGVyIGV4dHJhY3RzIGluZm9ybWF0aW9uIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uIG9mIGFuIGVudGl0eSAoTlBDIG9yIENyZWF0dXJlKVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgZW50aXR5XHJcbiAgICogQHJldHVybnMgZXh0cmFjdGVkRGF0YSBvYmplY3Qgd2l0aCB0aGUgZW50aXR5IGRhdGFcclxuICAgKi9cclxuICBhc3luYyBwYXJzZUNoYXJhY3RlciAodGV4dCkge1xyXG4gICAgLy8gUmVwbGFjZSBcIkVuIERhc2hcIiBhbmQgXCJFbSBEYXNoXCIgZGFzaGVzIHdpdGggLSBhbmQgXCJSaWdodCBTaW5nbGUgUXVvdGF0aW9uIE1hcmtcIiB3aXRoICdcclxuICAgIHRoaXMudGV4dCA9IFN0cmluZyh0ZXh0KVxyXG4gICAgICAudHJpbSgpXHJcbiAgICAgIC5yZXBsYWNlKC9cXHUyMDEzfFxcdTIwMTR8XFx1MjIxMi9nLCAnLScpXHJcbiAgICAgIC5yZXBsYWNlKC9cXHUyMDE5L2csIFwiJ1wiKVxyXG4gICAgICAucmVwbGFjZSgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS9nLCAnJylcclxuICAgIC8vIEVhcmxpZXN0IGNoYXJhY3RlciB0aGF0IGhhcyBiZWVuIHVzZWQsIHRvIHdvcmsgb3V0IHRoZSBoZWFkZXJcclxuICAgIGxldCBtaW4gPSB0aGlzLnRleHQubGVuZ3RoXHJcbiAgICAvLyBTVFIsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XHJcbiAgICBsZXQgY2hlY2sgPSB0aGlzLmNoZWNrKCdzdHInLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pW1xyXG4gICAgICAnLWluZGV4J1xyXG4gICAgXVxyXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcclxuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcclxuICAgIH1cclxuICAgIC8vIENPTiwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcclxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnY29uJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cclxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XHJcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXHJcbiAgICB9XHJcbiAgICAvLyBTSVosIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XHJcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ3NpeicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXHJcbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xyXG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxyXG4gICAgfVxyXG4gICAgLy8gSU5ULCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxyXG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdpbnQnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxyXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcclxuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcclxuICAgIH1cclxuICAgIC8vIFBPVywgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcclxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygncG93JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cclxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XHJcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXHJcbiAgICB9XHJcbiAgICAvLyBERVgsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XHJcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2RleCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXHJcbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xyXG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxyXG4gICAgfVxyXG4gICAgLy8gQVBQLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxyXG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhcHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxyXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcclxuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcclxuICAgIH1cclxuICAgIC8vIEVEVSwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcclxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZWR1JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cclxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XHJcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXHJcbiAgICB9XHJcbiAgICAvLyBTQU4sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XHJcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ3NhbicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXHJcbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xyXG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxyXG4gICAgfVxyXG4gICAgLy8gSFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XHJcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2hwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cclxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XHJcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXHJcbiAgICB9XHJcbiAgICAvLyBNUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcclxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbXAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxyXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcclxuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcclxuICAgIH1cclxuICAgIC8vIFdvcmsgb3V0IHRoZSBoZWFkZXIgYmFzZWQgb24gcHJldmlvdXMgbWluaW11bSBtYXRjaGVkIGNoYXJhY3RlclxyXG4gICAgbGV0IGhlYWRlclxyXG4gICAgaWYgKG1pbiA+IDApIHtcclxuICAgICAgaGVhZGVyID0gdGhpcy50ZXh0LnN1YnN0cigwLCBtaW4pXHJcbiAgICAgIC8vIEdldCBuYW1lIGZyb20gaGVhZGVyXHJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbmFtZScsIHsgdGV4dDogaGVhZGVyIH0pXHJcbiAgICAgIGlmIChjaGVjayA9PT0gZmFsc2UpIHtcclxuICAgICAgICAvLyBJZiBub3QgZm91bmQgdXNlIGRlZmF1bHQgTlBDIG5hbWVcclxuICAgICAgICB0aGlzLnBhcnNlZC5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkVW5uYW1lZENoYXJhY3RlcicpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIG5hbWUgZnJvbSBoZWFkZXJcclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcclxuICAgICAgfVxyXG4gICAgICAvLyBHZXQgYWdlIGZyb20gaGVhZGVyXHJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYWdlJywgeyB0ZXh0OiBoZWFkZXIgfSlcclxuICAgICAgaWYgKGNoZWNrICE9PSBmYWxzZSkge1xyXG4gICAgICAgIC8vIElmIGZvdW5kIHJlbW92ZSBhZ2UgZnJvbSBoZWFkZXJcclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcclxuICAgICAgfVxyXG4gICAgICAvLyBHZXQgb2NjdXBhdGlvbiBmcm9tIGhlYWRlclxyXG4gICAgICBpZiAoIXRoaXMuY2hlY2soJ29jY3VwYXRpb24nLCB7IHRleHQ6IGhlYWRlciB9KSAmJiBoZWFkZXIudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgIC8vIElmIG9jY3VwYXRpb24gaXMgbm90IGZvdW5kIGJ1dCB0aGVyZSBpcyBhIGhlYWRlciBzZXQgdGhlIG9jY3VwYXRpb24gdG8gdGhlIHJlbWFpbmluZyBoZWFkZXJcclxuICAgICAgICBsZXQgb2NjdXBhdGlvbiA9IGhlYWRlclxyXG4gICAgICAgIGlmIChoZWFkZXIuaW5kZXhPZignLicpID4gLTEpIHtcclxuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZnVsbCBzdG9wIGp1c3QgdXNlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBoZWFkZXIgYXMgdGhlIG9jY3VwYXRpb25cclxuICAgICAgICAgIG9jY3VwYXRpb24gPSBoZWFkZXIuc3Vic3RyKDAsIGhlYWRlci5pbmRleE9mKCcuJykgKyAxKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvblxyXG4gICAgICAgICAgLnJlcGxhY2UoLyhbXFxuXFxyXSspL2csICcgJylcclxuICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgIC5yZXBsYWNlKC8sJC8sICcnKVxyXG4gICAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKG9jY3VwYXRpb24udHJpbSgpLCAnXFxuJylcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVGhlcmUgaXMgbm8gaGVhZGVyIHNldCBkZWZhdWx0IE5QQyBuYW1lXHJcbiAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcclxuICAgIH1cclxuICAgIC8vIElmIHRoZXJlIGlzIGFuIG9jY3VwYXRpb24gYnV0IG5vIGFnZSBjaGVjayBpZiB0aGUgb2NjdXBhdGlvbiBzdGFydHMgbnVtYmVyIHNwbGl0IGFnZSBhbmQgb2NjdXBhdGlvblxyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgdHlwZW9mIHRoaXMucGFyc2VkLmFnZSA9PT0gJ3VuZGVmaW5lZCdcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvY2N1cGF0aW9uQWdlID0gdGhpcy5wYXJzZWQub2NjdXBhdGlvbi5tYXRjaChcclxuICAgICAgICAvXig/PGFnZT5cXGQrKSwoPzxvY2N1cGF0aW9uPi4rKSQvXHJcbiAgICAgIClcclxuICAgICAgaWYgKG9jY3VwYXRpb25BZ2UpIHtcclxuICAgICAgICB0aGlzLnBhcnNlZC5hZ2UgPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5hZ2VcclxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvbkFnZS5ncm91cHMub2NjdXBhdGlvbi50cmltKClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gR2V0IGRhbWFnZSBib251cywgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcclxuICAgIGlmIChcclxuICAgICAgIXRoaXMuY2hlY2soJ2RiJykgfHxcclxuICAgICAgdGhpcy5jaGVjaygnZGJOb25lJywge1xyXG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcclxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXHJcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuZGJcclxuICAgICAgfSlcclxuICAgICkge1xyXG4gICAgICB0aGlzLnBhcnNlZC5kYiA9ICcwJ1xyXG4gICAgfVxyXG4gICAgdGhpcy5wYXJzZWQuZGIgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuZGIpXHJcbiAgICAvLyBHZXQgYnVpbGRcclxuICAgIHRoaXMuY2hlY2soJ2J1aWxkJylcclxuICAgIC8vIEdldCBhcm1vciwgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcclxuICAgIGlmIChcclxuICAgICAgIXRoaXMuY2hlY2soJ2FybW9yJykgfHxcclxuICAgICAgdGhpcy5jaGVjaygnYXJtb3JOb25lJywge1xyXG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcclxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXHJcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuYXJtb3JcclxuICAgICAgfSlcclxuICAgICkge1xyXG4gICAgICB0aGlzLnBhcnNlZC5hcm1vciA9ICcwJ1xyXG4gICAgfVxyXG4gICAgLy8gR2V0IG1vdmVtZW50XHJcbiAgICB0aGlzLmNoZWNrKCdtb3YnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pXHJcbiAgICAvLyBHZXQgbHVja1xyXG4gICAgdGhpcy5jaGVjaygnbGNrJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxyXG4gICAgLy8gR2V0IHNhbml0eSBsb3NzXHJcbiAgICB0aGlzLmNoZWNrKCdzYW5Mb3NzJylcclxuICAgIHRoaXMucGFyc2VkLnNhbkxvc3MgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuc2FuTG9zcylcclxuICAgIC8vIEdldCBhdHRhY2tzIHBlciByb3VuZCwgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kJykgJiZcclxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kTm9uZScsIHtcclxuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXHJcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxyXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmF0dGFja3NQZXJSb3VuZFxyXG4gICAgICB9KVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMucGFyc2VkLmF0dGFja3NQZXJSb3VuZCA9ICcwJ1xyXG4gICAgfVxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBjb21iYXQgc2VjdGlvblxyXG4gICAgdGhpcy50ZXh0ID0gJ1xcbicgKyB0aGlzLnRleHRcclxuICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXHJcbiAgICBpZiAodGhpcy50ZXh0Lm1hdGNoKHNlY3Rpb25zKSA9PT0gbnVsbCkge1xyXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBjb21iYXQgc2VjdGlvbiBndWVzcyB3aGVyZSBpdCBzdGFydHNcclxuICAgICAgc2VjdGlvbnMgPSB0aGlzLmNoZWNrKCdndWVzc1N0YXJ0Q29tYmF0Jywge1xyXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcclxuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgaWYgKHNlY3Rpb25zKSB7XHJcbiAgICAgICAgLy8gQWRkIGEgaGVhZGVyIHRvIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IHNlY3Rpb25cclxuICAgICAgICB0aGlzLnRleHQgPSBbXHJcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2UoMCwgc2VjdGlvbnNbJy1pbmRleCddKSxcclxuICAgICAgICAgIHRoaXMua2V5cy5uZXdDb21iYXRIZWFkZXIsXHJcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2Uoc2VjdGlvbnNbJy1pbmRleCddKVxyXG4gICAgICAgIF0uam9pbignJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gU3BsaXQgdGhlIHNlY3Rpb25zIENvbWJhdCwgU2tpbGxzLCBMYW5ndWFnZXMsIGFuZCBTcGVsbHNcclxuICAgIGNvbnN0IHJlZ0V4cFNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCh0aGlzLnJlZ0V4LnNlY3Rpb25zLCAnaScpXHJcbiAgICBzZWN0aW9ucyA9IHRoaXMudGV4dC5zcGxpdChyZWdFeHBTZWN0aW9ucylcclxuICAgIGlmIChzZWN0aW9ucyAhPT0gbnVsbCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBzZWN0aW9ucy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXHJcbiAgICAgICAgICApICE9PSBudWxsICYmXHJcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBjb21iYXRcclxuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxyXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXHJcbiAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgIHRoaXMucHJvY2Vzc0NvbWJhdChzZWN0aW9uc1tpICsgMV0pXHJcbiAgICAgICAgICBpKytcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Ta2lsbHMgKyAnKScsICdpJylcclxuICAgICAgICAgICkgIT09IG51bGwgJiZcclxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIHNraWxsc1xyXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcclxuICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSlcclxuICAgICAgICAgIGkrK1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcclxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkxhbmdhdWdlcyArICcpJywgJ2knKVxyXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICApIHtcclxuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgbGFuZ3VhZ2VzXHJcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcclxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxyXG4gICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdLCAnbGFuZ3VhZ2VzJylcclxuICAgICAgICAgIGkrK1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcclxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvblNwZWxscyArICcpJywgJ2knKVxyXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICApIHtcclxuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc3BlbGxzXHJcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcclxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxyXG4gICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVsbHMoc2VjdGlvbnNbaSArIDFdKVxyXG4gICAgICAgICAgaSsrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBBbnkgcmVtYWluaW5nIHRleHQgYWRkIHRvIEdNIG5vdGVzIHNvIHlvdSBjYW4gZWFzaWx5IHNlZSBpZiB0aGVyZSBhcmUgYW55IG9idmlvdXMgaXNzdWUgb3IganVzdCBnZW5lcmFsIG5vdGVzXHJcbiAgICB0aGlzLnBhcnNlZC5nbW5vdGVzID0gdGhpcy50b0hUTUwodGhpcy50ZXh0KVxyXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkXHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQXR0cmliQXV0byAoa2V5LCBhdHRyaWJWYWx1ZSwgY2hlY2ssIHVwZGF0ZURhdGEpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgoMCwgTnVtYmVyKGF0dHJpYlZhbHVlKSlcclxuICAgIGlmICh2YWx1ZSAhPT0gTnVtYmVyKGNoZWNrKSkge1xyXG4gICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0uYXV0b2BdID0gZmFsc2VcclxuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LnZhbHVlYF0gPSB2YWx1ZVxyXG4gICAgICBpZiAoa2V5ID09PSAnYnVpbGQnKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LmN1cnJlbnRgXSA9IHZhbHVlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9Lm1heGBdID0gdmFsdWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhbiBlbnRpdHkgKGBucGNgIG9yIGBjcmVhdHVyZWApIGZyb20gdGhlIG9iamVjdCB3aXRoIHRoZSBhbHJlYWR5IHBhcnNlZCBlbnRpdHkgZGF0YVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFyYWN0ZXJEYXRhIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXJcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0XHJcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgY3JlYXRlZCBmb3VuZHJ5IGBBY3RvcmBcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVFbnRpdHkgKGNoYXJhY3RlckRhdGEsIGVudGl0eVR5cGUpIHtcclxuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9XHJcbiAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMuY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzKClcclxuICAgIGlmIChlbnRpdHlUeXBlICE9PSAnbnBjJykge1xyXG4gICAgICBlbnRpdHlUeXBlID0gJ2NyZWF0dXJlJ1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xyXG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXHJcbiAgICAgIHR5cGU6IGVudGl0eVR5cGUsXHJcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxyXG4gICAgICBkYXRhOiBjaGFyYWN0ZXJEYXRhLmFjdG9yXHJcbiAgICB9XHJcbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxyXG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgY2hhcmFjdGVyRGF0YS5pdGVtcywge1xyXG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcclxuICAgIH0pXHJcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cclxuICAgIGxldCB2YWx1ZSA9IDBcclxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcclxuICAgICAgICAnaHAnLFxyXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocC52YWx1ZSxcclxuICAgICAgICBucGMuaHBNYXgsXHJcbiAgICAgICAgdXBkYXRlRGF0YVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXHJcbiAgICAgICAgJ21wJyxcclxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubXAudmFsdWUsXHJcbiAgICAgICAgbnBjLm1wTWF4LFxyXG4gICAgICAgIHVwZGF0ZURhdGFcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubW92Py52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcclxuICAgICAgICAnbW92JyxcclxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubW92LnZhbHVlLFxyXG4gICAgICAgIG5wYy5tb3YsXHJcbiAgICAgICAgdXBkYXRlRGF0YVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXHJcbiAgICAgICAgJ2J1aWxkJyxcclxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQudmFsdWUsXHJcbiAgICAgICAgbnBjLmJ1aWxkLFxyXG4gICAgICAgIHVwZGF0ZURhdGFcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGI/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB2YWx1ZSA9IFN0cmluZyhjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGIudmFsdWUpLnJlcGxhY2UoL15cXCtcXHMqLywgJycpXHJcbiAgICAgIGlmICh2YWx1ZSAhPT0gU3RyaW5nKG5wYy5kYikpIHtcclxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5kYi5hdXRvJ10gPSBmYWxzZVxyXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJ10gPSB2YWx1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZURhdGE6JywgdXBkYXRlRGF0YSlcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBucGMudXBkYXRlKHVwZGF0ZURhdGEpXHJcbiAgICB9XHJcbiAgICBjb25zdCB1cGRhdGVJdGVtRGF0YSA9IFtdXHJcbiAgICBsZXQgbGFzdFdlYXBvblNraWxsID0gbnVsbFxyXG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHRoaXMud2VhcG9uU2tpbGxzKSB7XHJcbiAgICAgIGlmIChwYWlyWzBdICE9PSBmYWxzZSkge1xyXG4gICAgICAgIGxhc3RXZWFwb25Ta2lsbCA9IG5wYy5pdGVtcy5maWx0ZXIoXHJcbiAgICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclswXS5uYW1lICYmXHJcbiAgICAgICAgICAgIGkudHlwZSA9PT0gJ3NraWxsJyAmJlxyXG4gICAgICAgICAgICBOdW1iZXIoaS5zeXN0ZW0udmFsdWUpID09PSBOdW1iZXIocGFpclswXS5zeXN0ZW0udmFsdWUpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHdlYXBvbiA9IG5wYy5pdGVtcy5maWx0ZXIoXHJcbiAgICAgICAgaSA9PiBpLm5hbWUgPT09IHBhaXJbMV0ubmFtZSAmJlxyXG4gICAgICAgICAgaS50eXBlID09PSAnd2VhcG9uJyAmJlxyXG4gICAgICAgICAgaS5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSA9PT0gcGFpclsxXS5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZVxyXG4gICAgICApXHJcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XHJcbiAgICAgICAgdXBkYXRlSXRlbURhdGEucHVzaCh7XHJcbiAgICAgICAgICBfaWQ6IHdlYXBvblswXS5pZCxcclxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IGxhc3RXZWFwb25Ta2lsbFswXS5pZCxcclxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJzogbGFzdFdlYXBvblNraWxsWzBdLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodXBkYXRlSXRlbURhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZUl0ZW1EYXRhOicsIHVwZGF0ZUl0ZW1EYXRhKVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IG5wYy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZUl0ZW1EYXRhKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5wY1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogYWN0b3JEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBkYXRhXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHBjIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXIgYXMgcmV0dXJuZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXHJcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcclxuICAgKi9cclxuICBhY3RvckRhdGEgKHBjKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IHt9LFxyXG4gICAgICBhdHRyaWJzOiB7fSxcclxuICAgICAgaW5mb3M6IHt9LFxyXG4gICAgICBzcGVjaWFsOiB7fSxcclxuICAgICAgZGVzY3JpcHRpb246IHtcclxuICAgICAgICBrZWVwZXI6ICcnXHJcbiAgICAgIH0sXHJcbiAgICAgIGZsYWdzOiB7XHJcbiAgICAgICAgbG9ja2VkOiBmYWxzZSxcclxuICAgICAgICBkaXNwbGF5Rm9ybXVsYTogZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xyXG4gICAgICAnc3RyJyxcclxuICAgICAgJ2NvbicsXHJcbiAgICAgICdzaXonLFxyXG4gICAgICAnZGV4JyxcclxuICAgICAgJ2FwcCcsXHJcbiAgICAgICdpbnQnLFxyXG4gICAgICAncG93JyxcclxuICAgICAgJ2VkdSdcclxuICAgIF0pIHtcclxuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XHJcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3NhbicsICdtb3YnLCAnYnVpbGQnLCAnYXJtb3InLCAnbGNrJywgJ2hwJywgJ21wJ10pIHtcclxuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGRhdGEuYXR0cmlic1trZXldID0ge1xyXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihwY1trZXldKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBwYy5kYiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgZGF0YS5hdHRyaWJzLmRiID0ge1xyXG4gICAgICAgIHZhbHVlOiBwYy5kYlxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ2FnZScsICdvY2N1cGF0aW9uJ10pIHtcclxuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGRhdGEuaW5mb3Nba2V5XSA9IHBjW2tleV1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBwYy5zYW5Mb3NzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBjb25zdCBbcGFzc2VkLCBmYWlsZWRdID0gcGMuc2FuTG9zcy5zcGxpdCgnLycpXHJcbiAgICAgIGRhdGEuc3BlY2lhbC5zYW5Mb3NzID0ge1xyXG4gICAgICAgIGNoZWNrUGFzc2VkOiBwYXNzZWQsXHJcbiAgICAgICAgY2hlY2tGYWlsbGVkOiBmYWlsZWRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzUGVyUm91bmQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGRhdGEuc3BlY2lhbC5hdHRhY2tzUGVyUm91bmQgPSBOdW1iZXIocGMuYXR0YWNrc1BlclJvdW5kKVxyXG4gICAgfVxyXG4gICAgZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXIgPSBwYy5nbW5vdGVzXHJcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICBjb25zb2xlLmRlYnVnKCdhY3RvckRhdGE6JywgZGF0YSlcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhXHJcbiAgICovXHJcbiAgYXN5bmMgaXRlbXNEYXRhIChwYykge1xyXG4gICAgY29uc3QgaXRlbXMgPSBbXVxyXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxyXG4gICAgLy8gV2VhcG9uIHNraWxsc1xyXG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XHJcbiAgICAgICAgbGV0IHNraWxsID0gZmFsc2VcclxuICAgICAgICBpZiAoYXR0YWNrLnN5c3RlbT8uc2tpbGw/LmlkICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMud2VhcG9uU2tpbGwoYXR0YWNrKVxyXG4gICAgICAgICAgaXRlbXMucHVzaChza2lsbClcclxuICAgICAgICB9XHJcbiAgICAgICAgYXR0YWNrLnN5c3RlbS5za2lsbC5pZCA9IG51bGxcclxuICAgICAgICBpdGVtcy5wdXNoKGF0dGFjaylcclxuICAgICAgICB0aGlzLndlYXBvblNraWxscy5wdXNoKFtza2lsbCwgYXR0YWNrXSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gU2tpbGxzXHJcbiAgICBpZiAodHlwZW9mIHBjLnNraWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5za2lsbHMpIHtcclxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIHNraWxsLm5hbWUsIHtcclxuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxyXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gc2tpbGwudmFsdWVcclxuICAgICAgICAgIGlmICh0eXBlb2Ygc2tpbGwucHVzaCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0ge31cclxuICAgICAgICAgIGlmICh0eXBlb2Ygc2tpbGwucHVzaCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5wdXNoID0gc2tpbGwucHVzaFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCBvcHRpb25zKSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIExhbmd1YWdlc1xyXG4gICAgaWYgKHR5cGVvZiBwYy5sYW5ndWFnZXMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMubGFuZ3VhZ2VzKSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lLCB7XHJcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcclxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXHJcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpdGVtcy5wdXNoKFxyXG4gICAgICAgICAgICBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCB7XHJcbiAgICAgICAgICAgICAgaW1nOiBDb0M3SXRlbS5pY29uTGFuZ3VhZ2UsXHJcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246ICdMYW5ndWFnZSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFNwZWxsc1xyXG4gICAgaWYgKHR5cGVvZiBwYy5zcGVsbHMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBwYy5zcGVsbHMpIHtcclxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdzcGVsbCcsIG5hbWUsIHtcclxuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxyXG4gICAgICAgICAgaXRlbXMucHVzaChkdXBsaWNhdGUoY2xvbmVkKSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNwZWxsKG5hbWUpKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGl0ZW1zXHJcbiAgfVxyXG5cclxuICAvKiogd2VhcG9uU2tpbGwgdHJpZXMgdG8gZ3Vlc3Mgd2hhdCBraW5kIG9mIHdlYXBvbiBza2lsbCB0byB1c2UgZm9yIHdlYXBvbiBmcm9tIGl0J3MgbmFtZVxyXG4gICAqIEBwYXJhbSB3ZWFwb246IEpTT04sIHdlYXBvbiBkYXRhXHJcbiAgICovXHJcbiAgYXN5bmMgd2VhcG9uU2tpbGwgKHdlYXBvbikge1xyXG4gICAgbGV0IHNraWxsID0gbnVsbFxyXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgoJ2hhbmRndW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xyXG4gICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdIYW5kZ3VuJywge1xyXG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcclxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xyXG4gICAgICB9KVxyXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgSGFuZGd1biBza2lsbDogJHtza2lsbH1gKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ3JpZmxlJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcclxuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUvU2hvdGd1bicsIHtcclxuICAgICAgICBjb21iYXQ6IHRydWUsXHJcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcclxuICAgICAgfSlcclxuICAgICAgaWYgKCFza2lsbCkge1xyXG4gICAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1JpZmxlJywge1xyXG4gICAgICAgICAgY29tYmF0OiB0cnVlLFxyXG4gICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmICghc2tpbGwpIHtcclxuICAgICAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1Nob3RndW4nLCB7XHJcbiAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcclxuICAgICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBSaWZsZSBza2lsbDogJHtza2lsbH1gKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ3NtYicpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XHJcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1N1Ym1hY2hpbmUgR3VuJywge1xyXG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcclxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xyXG4gICAgICB9KVxyXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgU3VibWFjaGluZSBHdW4gc2tpbGw6ICR7c2tpbGx9YClcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdtYWNoaW5lR3VuJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcclxuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTWFjaGluZSBHdW4nLCB7XHJcbiAgICAgICAgY29tYmF0OiB0cnVlLFxyXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ2xhdW5jaGVkJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcclxuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTGF1bmNoJywge1xyXG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcclxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xyXG4gICAgICB9KVxyXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgTGF1bmNoIHNraWxsOiAke3NraWxsfWApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChza2lsbCAhPT0gbnVsbCAmJiB0eXBlb2Ygc2tpbGwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGNvbnN0IHNraWxsQ2xvbmUgPSBza2lsbC5jbG9uZSh7XHJcbiAgICAgICAgc3lzdGVtOiB7XHJcbiAgICAgICAgICB2YWx1ZTogd2VhcG9uLnN5c3RlbT8uc2tpbGw/LmlkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4gc2tpbGxDbG9uZVxyXG4gICAgfVxyXG4gICAgY29uc3QgZmlyZWFybXMgPSB3ZWFwb24uc3lzdGVtPy5wcm9wZXJ0aWVzPy5ybmdkXHJcbiAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXHJcbiAgICAgIHdlYXBvbi5uYW1lLFxyXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgZmlyZWFybXNcclxuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcclxuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXHJcbiAgICAgIClcclxuICAgIClcclxuICAgIGNvbnN0IG5ld1NraWxsID0ge1xyXG4gICAgICB0eXBlOiAnc2tpbGwnLFxyXG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxyXG4gICAgICBzeXN0ZW06IHtcclxuICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcclxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXHJcbiAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcclxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXHJcbiAgICAgICAgICBmaXJlYXJtOiBmaXJlYXJtcyxcclxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmFzZTogd2VhcG9uLnN5c3RlbT8uc2tpbGw/LmlkLFxyXG4gICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcclxuICAgICAgY29uc29sZS5kZWJ1ZyhcclxuICAgICAgICBgV2VhcG9uIHNraWxsIG5vdCBmb3VuZCBmb3IgJHt3ZWFwb24ubmFtZX0sIGNyZWF0aW5nIGEgbmV3IG9uZWAsXHJcbiAgICAgICAgbmV3U2tpbGxcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1NraWxsXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBuZWVkc0NvbnZlcnNpb24gZG9lcyBhbiBldmFsdWF0aW9uIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gbnBjIG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byA3dGggRWRpdGlvblxyXG4gICAqIFJldHVybnMgYGZhbHNlYCB3aGVuIGFueSBvZiB0aGUgQ2hhcmFjdGVyaXN0aWNzIHZhbHVlIGl0J3MgYWJvdmUgMjlcclxuICAgKi9cclxuICBuZWVkc0NvbnZlcnNpb24gKG5wYykge1xyXG4gICAgbGV0IG5lZWRzQ29udmVyc2lvblJlc3VsdCA9IHRydWVcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIFtcclxuICAgICAgJ3N0cicsXHJcbiAgICAgICdjb24nLFxyXG4gICAgICAnc2l6JyxcclxuICAgICAgJ2RleCcsXHJcbiAgICAgICdhcHAnLFxyXG4gICAgICAnaW50JyxcclxuICAgICAgJ3BvdycsXHJcbiAgICAgICdlZHUnXHJcbiAgICBdKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbnBjW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG5wY1trZXldID4gMzApIHtcclxuICAgICAgICBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICBjb25zb2xlLmRlYnVnKCduZWVkc0NvbnZlcnNpb246JywgbmVlZHNDb252ZXJzaW9uUmVzdWx0KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5lZWRzQ29udmVyc2lvblJlc3VsdFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogY3JlYXRlQWN0b3IgbWFpbiBtZXRob2QgdG8gY3JlYXRlIGFuIGBBY3RvcmAgZnJvbSBhIGdpdmUgdXNlciBpbnB1dCwgdGFrZXMgb24gYWNjb3VudCB0aGUgbGFuZywgZW50aXR5IHR5cGUsXHJcbiAgICogdGhlIGNvbnZlcnQgdG8gNyBFZGl0aW9uIGZsYWcsIGFuZCB0aGUgcmF3IGVudGl0eSBkYXRhLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dHMgaW5wdXRzIGZyb20gdGhlIGZvcm0gdG8gY3JlYXRlIGFuIEFjdG9yXHJcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgZm91bmRyeSBgQWN0b3JgIGZyb20gdGhlIGdpdmVuIGBpbnB1dGAgb3B0aW9uc1xyXG4gICAqL1xyXG4gIGFzeW5jIGNyZWF0ZUFjdG9yIChpbnB1dHMpIHtcclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZUFjdG9yOicsIGlucHV0cylcclxuICAgIH1cclxuICAgIGNvbnN0IGxhbmcgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKGlucHV0cy5sYW5nKVxyXG4gICAgdGhpcy5rZXlzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0S2V5cyhsYW5nKVxyXG4gICAgdGhpcy5yZWdFeCA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFJlZ3VsYXJFeHByZXNzaW9ucyhsYW5nKVxyXG4gICAgdGhpcy5pdGVtTG9jYXRpb25zID0gaW5wdXRzLnNvdXJjZVxyXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcclxuICAgICAgY29uc29sZS5kZWJ1ZygnUmVndWxhciBFeHByZXNzaW9uczonLCBsYW5nLCB0aGlzLmtleXMsIHRoaXMucmVnRXgpXHJcbiAgICB9XHJcbiAgICBsZXQgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5wYXJzZUNoYXJhY3RlcihpbnB1dHMudGV4dClcclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3BhcnNlQ2hhcmFjdGVyOicsIGNoYXJhY3RlcilcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgKGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWd1ZXNzJyAmJlxyXG4gICAgICAgIHRoaXMubmVlZHNDb252ZXJzaW9uKGNoYXJhY3RlcikpIHx8XHJcbiAgICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWNvbnZlcnQnXHJcbiAgICApIHtcclxuICAgICAgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5jb252ZXJ0N0UoY2hhcmFjdGVyKVxyXG4gICAgfVxyXG4gICAgY29uc3QgY2hhcmFjdGVyRGF0YSA9IHtcclxuICAgICAgbmFtZTogY2hhcmFjdGVyLm5hbWUsXHJcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yRGF0YShjaGFyYWN0ZXIpLFxyXG4gICAgICBpdGVtczogYXdhaXQgdGhpcy5pdGVtc0RhdGEoY2hhcmFjdGVyKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgaW5wdXRzLnRlc3RNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBpbnB1dHMudGVzdE1vZGUgPT09IHRydWUpIHtcclxuICAgICAgcmV0dXJuIGNoYXJhY3RlckRhdGFcclxuICAgIH1cclxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IHRoaXMuY3JlYXRlRW50aXR5KGNoYXJhY3RlckRhdGEsIGlucHV0cy5lbnRpdHkpXHJcbiAgICByZXR1cm4gbnBjXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBjb252ZXJ0N0UgQ29udmVydHMgdGhlIGdpdmVuIGVudGl0eSBmcm9tIDYgZWRpdGlvbiB0byA3IGVkaXRpb25cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdGhlIGVudGl0eSBvYmplY3QgYXMgb2J0YWluZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXHJcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxyXG4gICAqL1xyXG4gIGFzeW5jIGNvbnZlcnQ3RSAoY3JlYXR1cmUpIHtcclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ0NvbnZlcnRpbmcgbnBjJywgY3JlYXR1cmUpXHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdyddKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgY3JlYXR1cmVba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjcmVhdHVyZVtrZXldICo9IDVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjcmVhdHVyZS5lZHUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcclxuICAgICAgICBjcmVhdHVyZS5lZHUgKj0gNVxyXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmVkdSA8PSAyNikge1xyXG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBjcmVhdHVyZS5lZHUgPj0yOFxyXG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZGIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDQnKSB7XHJcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMVxyXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNicpIHtcclxuICAgICAgICBjcmVhdHVyZS5kYiA9IC0yXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NvbnZlcnQ3RTogJywgY3JlYXR1cmUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXR1cmVcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIEZpbGUsIEZpbGVQaWNrZXIsIGdhbWUsIHVpICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3RGlyZWN0b3J5UGlja2VyIGV4dGVuZHMgRmlsZVBpY2tlciB7XHJcbiAgZ2V0IHRpdGxlICgpIHtcclxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpXHJcbiAgfVxyXG5cclxuICBfb25TdWJtaXQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBwYXRoID0gZXZlbnQudGFyZ2V0LnRhcmdldC52YWx1ZVxyXG4gICAgY29uc3QgYWN0aXZlU291cmNlID0gdGhpcy5hY3RpdmVTb3VyY2VcclxuICAgIGNvbnN0IGJ1Y2tldCA9IGV2ZW50LnRhcmdldC5idWNrZXQgPyBldmVudC50YXJnZXQuYnVja2V0LnZhbHVlIDogbnVsbFxyXG4gICAgdGhpcy5maWVsZC52YWx1ZSA9IENvQzdEaXJlY3RvcnlQaWNrZXIuZm9ybWF0KHtcclxuICAgICAgYWN0aXZlU291cmNlLFxyXG4gICAgICBidWNrZXQsXHJcbiAgICAgIHBhdGhcclxuICAgIH0pXHJcbiAgICB0aGlzLmNsb3NlKClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBEZWZhdWx0RGlyZWN0b3J5ICh2YWwpIHtcclxuICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnJyA6IFN0cmluZyh2YWwpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZm9ybWF0ICh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlLmJ1Y2tldCAhPT0gbnVsbFxyXG4gICAgICA/IGBbJHt2YWx1ZS5hY3RpdmVTb3VyY2V9OiR7dmFsdWUuYnVja2V0fV0gJHt2YWx1ZS5wYXRofWBcclxuICAgICAgOiBgWyR7dmFsdWUuYWN0aXZlU291cmNlfV0gJHt2YWx1ZS5wYXRofWBcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwYXJzZSAocmF3KSB7XHJcbiAgICBjb25zdCBzdHIgPSByYXcgPz8gJydcclxuICAgIGNvbnN0IG1hdGNoZXMgPSBzdHIubWF0Y2goL15cXFsoW146XSspKDooLispKT9cXF1cXHMqKC4rKT8kL3UpXHJcblxyXG4gICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhY3RpdmVTb3VyY2U6IG1hdGNoZXNbMV0sXHJcbiAgICAgICAgYnVja2V0OiBtYXRjaGVzWzNdID8/ICcnLFxyXG4gICAgICAgIGN1cnJlbnQ6IG1hdGNoZXNbNF1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWN0aXZlU291cmNlOiAnZGF0YScsXHJcbiAgICAgIGJ1Y2tldDogbnVsbCxcclxuICAgICAgY3VycmVudDogc3RyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJvY2Vzc0h0bWwgKGh0bWwpIHtcclxuICAgICQoaHRtbClcclxuICAgICAgLmZpbmQoJ2lucHV0W2RhdGEtZHR5cGU9XCJEZWZhdWx0RGlyZWN0b3J5XCJdJylcclxuICAgICAgLmVhY2goKGksIGVsKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5wdXQgPSAkKGVsKVxyXG4gICAgICAgIGlucHV0LnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSlcclxuICAgICAgICBpZiAoIWlucHV0Lm5leHQoKS5sZW5ndGgpIHtcclxuICAgICAgICAgIGNvbnN0IHBpY2tlciA9IG5ldyBDb0M3RGlyZWN0b3J5UGlja2VyKHtcclxuICAgICAgICAgICAgZmllbGQ6IGlucHV0WzBdLFxyXG4gICAgICAgICAgICAuLi5Db0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKGlucHV0LnZhbCgpKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGNvbnN0IHBpY2tlckJ1dHRvbiA9ICQoXHJcbiAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtcGlja2VyXCIgdGl0bGU9XCInICtcclxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpICtcclxuICAgICAgICAgICAgICAnXCI+PGkgY2xhc3M9XCJmYXMgZmEtZmlsZS1pbXBvcnQgZmEtZndcIj48L2k+PC9idXR0b24+J1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEZWZhdWx0RGlyZWN0b3J5KClcclxuICAgICAgICAgIHBpY2tlckJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBpY2tlci5yZW5kZXIodHJ1ZSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBpbnB1dC5wYXJlbnQoKS5hcHBlbmQocGlja2VyQnV0dG9uKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG5cclxuICAgICQoaHRtbCkuZmluZCgnb2wuZmlsZXMtbGlzdCcpLnJlbW92ZSgpXHJcbiAgICAkKGh0bWwpLmZpbmQoJ2Zvb3RlciBkaXYnKS5yZW1vdmUoKVxyXG4gICAgJChodG1sKS5maW5kKCdmb290ZXIgYnV0dG9uJykudGV4dChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZURlZmF1bHREaXJlY3RvcnkgKCkge1xyXG4gICAgY29uc3QgcGFyc2VkID0gQ29DN0RpcmVjdG9yeVBpY2tlci5wYXJzZShcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxyXG4gICAgKVxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEaXJlY3RvcnkoXHJcbiAgICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcclxuICAgICAgICBwYXJzZWQuY3VycmVudCxcclxuICAgICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgaWYgKCFlLnN0YXJ0c1dpdGgoJ0VFWElTVCcpKSB7XHJcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyVXBsb2FkRXJyb3InKVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSAoZmlsZSwgZmlsZW5hbWUpIHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXHJcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rob2xlVXBsb2FkRGlyZWN0b3J5JylcclxuICAgIClcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgRmlsZVBpY2tlci51cGxvYWQoXHJcbiAgICAgIHBhcnNlZC5hY3RpdmVTb3VyY2UsXHJcbiAgICAgIHBhcnNlZC5jdXJyZW50LFxyXG4gICAgICBuZXcgRmlsZShbZmlsZV0sIGZpbGVuYW1lLCB7XHJcbiAgICAgICAgdHlwZTogJ2ltYWdlL3BuZydcclxuICAgICAgfSksXHJcbiAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cclxuICAgIClcclxuICAgIGlmICghcmVzcG9uc2UucGF0aCkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWxlVXBsb2FkRXJyb3InKSlcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyc2VkLmN1cnJlbnQgKyAnLycgKyBmaWxlbmFtZVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZHVwbGljYXRlLCBnYW1lLCB1aSwgZmV0Y2ggKi9cclxuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXHJcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcclxuXHJcbi8qKlxyXG4gKiBDb0M3QWN0b3JJbXBvcnRlciBoZWxwZXIgY2xhc3MgdG8gaW1wb3J0IGFuIEFjdG9yIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB7XHJcbiAgLyoqXHJcbiAgICogQ29tcG9zZSB0aGUgQmFja3N0b3J5IGZyb20gdGhlIGRpZmZlcmVudCBibG9ja3MuXHJcbiAgICogQHBhcmFtIHt9IGJhY2tzdG9yeUpTT04gRGhvbGVIb3VzZSBiYWNrc3RvcnkgSlNPTlxyXG4gICAqIEByZXR1cm5zIEhUTUwgd2l0aCB0aGUgZm9ybWF0dGVkIGJhY2tzdG9yeVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRCYWNrc3RvcnkgKGJhY2tzdG9yeUpTT04pIHtcclxuICAgIGNvbnN0IHNlY3Rpb25zID0gW1xyXG4gICAgICBbJ2Rlc2NyaXB0aW9uJywgJ0Rlc2NyaXB0aW9uJ10sXHJcbiAgICAgIFsndHJhaXRzJywgJ1RyYWl0cyddLFxyXG4gICAgICBbJ2lkZW9sb2d5JywgJ0lkZW9sb2d5J10sXHJcbiAgICAgIFsnaW5qdXJ1ZXMnLCAnSW5qdXJpZXMnLCAnaW5qdXJpZXMnXSxcclxuICAgICAgWydwZW9wbGUnLCAnUGVvcGxlJ10sXHJcbiAgICAgIFsncGhvYmlhcycsICdQaG9iaWFzJ10sXHJcbiAgICAgIFsnbG9jYXRpb25zJywgJ0xvY2F0aW9ucyddLFxyXG4gICAgICBbJ3RvbWVzJywgJ1RvbWVzJ10sXHJcbiAgICAgIFsncG9zc2Vzc2lvbnMnLCAnUG9zc2Vzc2lvbnMnXSxcclxuICAgICAgWydlbmNvdW50ZXJzJywgJ0VuY291bnRlcnMnXVxyXG4gICAgXVxyXG4gICAgY29uc3QgYmFja3N0b3J5ID0ge1xyXG4gICAgICBibG9jazogW10sXHJcbiAgICAgIHNlY3Rpb25zOiBbXVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHNlY3Rpb25zKSB7XHJcbiAgICAgIGlmIChiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dICE9PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWN0aW9uWzJdID09PSAndW5kZWZpbmVkJyB8fCBzZWN0aW9uWzJdID09PSAnJykge1xyXG4gICAgICAgICAgc2VjdGlvblsyXSA9IHNlY3Rpb25bMF1cclxuICAgICAgICB9XHJcbiAgICAgICAgYmFja3N0b3J5LmJsb2NrLnB1c2goXHJcbiAgICAgICAgICBgPGgzPiR7c2VjdGlvblsxXX08L2gzPlxcbjxkaXYgY2xhc3M9XCIke3NlY3Rpb25bMl19XCI+XFxuJHtcclxuICAgICAgICAgICAgYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxyXG4gICAgICAgICAgfVxcbjwvZGl2PmBcclxuICAgICAgICApXHJcbiAgICAgICAgYmFja3N0b3J5LnNlY3Rpb25zLnB1c2goe1xyXG4gICAgICAgICAgdGl0bGU6IHNlY3Rpb25bMV0sXHJcbiAgICAgICAgICB2YWx1ZTogYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGJhY2tzdG9yeS5ibG9jayA9XHJcbiAgICAgICc8aDI+QmFja3N0b3J5PC9oMj5cXG4nICsgYmFja3N0b3J5LmJsb2NrLmpvaW4oJ1xcbicsIGJhY2tzdG9yeS5ibG9jaylcclxuICAgIHJldHVybiBiYWNrc3RvcnlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtKU09OfSBkaG9sZUhvdXNlRGF0YSBEaG9sZUhvdXNlSlNPTlxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSAoZGhvbGVIb3VzZURhdGEsIG9wdGlvbnMpIHtcclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2U6JywgZGhvbGVIb3VzZURhdGEpXHJcbiAgICB9XHJcbiAgICBkaG9sZUhvdXNlRGF0YSA9IGRob2xlSG91c2VEYXRhLkludmVzdGlnYXRvclxyXG4gICAgY29uc3QgYmFja3N0b3JpZXMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZ2V0QmFja3N0b3J5KFxyXG4gICAgICBkaG9sZUhvdXNlRGF0YS5CYWNrc3RvcnlcclxuICAgIClcclxuICAgIGNvbnN0IGNEYXRhID0ge1xyXG4gICAgICBuYW1lOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuTmFtZSxcclxuICAgICAgYWN0b3I6IHtcclxuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcclxuICAgICAgICAgIHN0cjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNUUiwgMTApIH0sXHJcbiAgICAgICAgICBjb246IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5DT04sIDEwKSB9LFxyXG4gICAgICAgICAgc2l6OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU0laLCAxMCkgfSxcclxuICAgICAgICAgIGRleDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRFWCwgMTApIH0sXHJcbiAgICAgICAgICBhcHA6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5BUFAsIDEwKSB9LFxyXG4gICAgICAgICAgaW50OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSU5ULCAxMCkgfSxcclxuICAgICAgICAgIHBvdzogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlBPVywgMTApIH0sXHJcbiAgICAgICAgICBlZHU6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5FRFUsIDEwKSB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdHRyaWJzOiB7XHJcbiAgICAgICAgICBzYW46IHtcclxuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHksIDEwKSxcclxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5TWF4LCAxMCksXHJcbiAgICAgICAgICAgIGRhaWx5TGltaXQ6IE1hdGguZmxvb3IoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eSAvIDUpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaHA6IHtcclxuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5IaXRQdHMsIDEwKSxcclxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzTWF4LCAxMClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtcDoge1xyXG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzLCAxMCksXHJcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzTWF4LCAxMClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBsY2s6IHtcclxuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5MdWNrLCAxMClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtb3Y6IHtcclxuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5Nb3ZlLCAxMCksXHJcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1vdmUsIDEwKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGRiOiB7IHZhbHVlOiBkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuRGFtYWdlQm9udXMgfSxcclxuICAgICAgICAgIGJ1aWxkOiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuQnVpbGQsIDEwKSB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmZvczoge1xyXG4gICAgICAgICAgb2NjdXBhdGlvbjogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk9jY3VwYXRpb24sXHJcbiAgICAgICAgICBhZ2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5BZ2UsXHJcbiAgICAgICAgICBzZXg6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5HZW5kZXIsXHJcbiAgICAgICAgICByZXNpZGVuY2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5SZXNpZGVuY2UsXHJcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQmlydGhwbGFjZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmFja3N0b3J5OiBiYWNrc3Rvcmllcy5ibG9jayxcclxuICAgICAgICBiaW9ncmFwaHk6IGJhY2tzdG9yaWVzLnNlY3Rpb25zLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICBrZWVwZXI6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EaG9sZUhvdXNlQWN0b3JJbXBvcnRlclNvdXJjZScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBza2lsbHM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0U2tpbGxzKFxyXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlNraWxscy5Ta2lsbCA/PyBbXSxcclxuICAgICAgICBvcHRpb25zXHJcbiAgICAgICksXHJcbiAgICAgIHBvc3Nlc2lvbnM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0UG9zc2Vzc2lvbnMoXHJcbiAgICAgICAgZGhvbGVIb3VzZURhdGEuUG9zc2Vzc2lvbnM/Lml0ZW0gPz8gW10sXHJcbiAgICAgICAgb3B0aW9uc1xyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY0RhdGFcclxuICB9XHJcblxyXG4gIHN0YXRpYyBtYWtlU2tpbGxOYW1lIChuYW1lLCBzcGVjaWFsaXphdGlvbikge1xyXG4gICAgaWYgKHNwZWNpYWxpemF0aW9uID09PSAnTm9uZScpIHtcclxuICAgICAgc3BlY2lhbGl6YXRpb24gPSAnQW55J1xyXG4gICAgfVxyXG4gICAgaWYgKG5hbWUgPT09ICdMYW5ndWFnZSAoT3RoZXIpJyB8fCBuYW1lID09PSAnTGFuZ3VhZ2UgKE93biknKSB7XHJcbiAgICAgIG5hbWUgPSAnTGFuZ3VhZ2UnXHJcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdPcGVyYXRlIEhlYXZ5IE1hY2hpbmUnKSB7XHJcbiAgICAgIG5hbWUgPSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lcnknXHJcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdUaHJvdycgJiYgc3BlY2lhbGl6YXRpb24gPT09ICcnKSB7XHJcbiAgICAgIG5hbWUgPSAnRmlnaHRpbmcnXHJcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ1Rocm93J1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2tpbGxOYW1lOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyBuYW1lIDogc3BlY2lhbGl6YXRpb24sXHJcbiAgICAgIHNwZWNpYWxpemF0aW9uOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6IG5hbWUsXHJcbiAgICAgIG5hbWU6IG5hbWUgKyAoc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiAnICgnICsgc3BlY2lhbGl6YXRpb24gKyAnKScpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFNraWxscyAoZGhvbGVIb3VzZXNraWxscywgb3B0aW9ucykge1xyXG4gICAgY29uc3Qgc2tpbGxzID0gW11cclxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGhvbGVIb3VzZXNraWxscykge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgc2tpbGwuc3Vic2tpbGwgPT09ICdOb25lJyAmJlxyXG4gICAgICAgIHNraWxsLnZhbHVlID09PSAnMScgJiZcclxuICAgICAgICBza2lsbC5oYWxmID09PSAnMCcgJiZcclxuICAgICAgICBza2lsbC5maWZ0aCA9PT0gJzAnXHJcbiAgICAgICkge1xyXG4gICAgICAgIGNvbnRpbnVlXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIubWFrZVNraWxsTmFtZShcclxuICAgICAgICBza2lsbC5uYW1lLFxyXG4gICAgICAgIHNraWxsLnN1YnNraWxsID8/ICcnXHJcbiAgICAgIClcclxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XHJcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZSxcclxuICAgICAgICBmYWxsYmFja0FueTogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxyXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxyXG4gICAgICAgIGNsb25lZC5uYW1lID0gcGFydHMubmFtZVxyXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXHJcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2xvbmVkID0gQ29DQWN0b3IuZW1wdHlTa2lsbChcclxuICAgICAgICAgIHBhcnRzLnNraWxsTmFtZSxcclxuICAgICAgICAgIHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246XHJcbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICcnID8gZmFsc2UgOiBwYXJ0cy5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cclxuICAgICAgICBpZiAocGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICdGaWdodGluZycpIHtcclxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcclxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXHJcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpcmVhcm1zJykge1xyXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSB0cnVlXHJcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID0gdHJ1ZVxyXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSBpZiAocGFydHMuc2tpbGxOYW1lID09PSAnRG9kZ2UnKSB7XHJcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ0FueScpIHtcclxuICAgICAgICBjbG9uZWQubmFtZSA9IGNsb25lZC5uYW1lLnJlcGxhY2UoJyAoQW55KScsICcgKE5vbmUpJylcclxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9ICdOb25lJ1xyXG4gICAgICB9XHJcbiAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxyXG4gICAgICBjbG9uZWQuc3lzdGVtLnZhbHVlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXHJcbiAgICAgIGNsb25lZC5zeXN0ZW0uZmxhZ3MgPSBjbG9uZWQuc3lzdGVtLmZsYWdzID8/IHt9XHJcbiAgICAgIGNsb25lZC5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiA9XHJcbiAgICAgICAgc2tpbGwub2NjdXBhdGlvbiA9PT0gdHJ1ZSB8fCBza2lsbC5vY2N1cGF0aW9uID09PSAndHJ1ZSdcclxuICAgICAgc2tpbGxzLnB1c2goY2xvbmVkKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNraWxsc1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZpbmRXZWFwb25Ta2lsbElkIChza2lsbE5hbWUsIGNoYXJhY3Rlcikge1xyXG4gICAgY29uc3Qgc2tpbGxzID0gY2hhcmFjdGVyLmdldEVtYmVkZGVkQ29sbGVjdGlvbignSXRlbScpXHJcbiAgICBjb25zdCBjaGVja05hbWUgPSBza2lsbE5hbWUucmVwbGFjZSgvXlxcKCguKylcXCkkLywgJyQxJylcclxuICAgIGNvbnN0IGNoYXJhY3RlclNraWxsID0gc2tpbGxzLmZpbmQoaSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gY2hlY2tOYW1lIHx8XHJcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZT8uaW5kZXhPZihjaGVja05hbWUpID4gLTFcclxuICAgICAgKVxyXG4gICAgfSlcclxuICAgIHJldHVybiBjaGFyYWN0ZXJTa2lsbFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RQb3NzZXNzaW9ucyAoZGhvbGVob3VzZVBvc3Nlc3Npb25zLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBpdGVtcyA9IFtdXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGhvbGVob3VzZVBvc3Nlc3Npb25zKSB7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ2l0ZW0nLCBpdGVtLmRlc2NyaXB0aW9uLCB7XHJcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZVxyXG4gICAgICB9KVxyXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxyXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNsb25lZCA9IHtcclxuICAgICAgICAgIG5hbWU6IGl0ZW0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaXRlbXMucHVzaChjbG9uZWQpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXRlbXNcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0V2VhcG9ucyAoZGhvbGVob3VzZVdlYXBvbnMsIGNoYXJhY3Rlciwgb3B0aW9ucykge1xyXG4gICAgY29uc3Qgd2VhcG9ucyA9IFtdXHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGhvbGVob3VzZVdlYXBvbnMpKSB7XHJcbiAgICAgIGRob2xlaG91c2VXZWFwb25zID0gW2Rob2xlaG91c2VXZWFwb25zXVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCB3ZWFwb24gb2YgZGhvbGVob3VzZVdlYXBvbnMpIHtcclxuICAgICAgY29uc3Qgc2tpbGwgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZmluZFdlYXBvblNraWxsSWQoXHJcbiAgICAgICAgd2VhcG9uLnNraWxsbmFtZSxcclxuICAgICAgICBjaGFyYWN0ZXJcclxuICAgICAgKVxyXG4gICAgICBjb25zdCBkYW1hZ2UgPSB3ZWFwb24uZGFtYWdlLnJlcGxhY2UoL1xcK0RCL2ksICcnKVxyXG4gICAgICBjb25zdCBhZGRiID0gZGFtYWdlICE9PSB3ZWFwb24uZGFtYWdlXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3dlYXBvbicsIHdlYXBvbi5uYW1lLCB7XHJcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZVxyXG4gICAgICB9KVxyXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxyXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxyXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGw/Lm5hbWUgPz8gJydcclxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsLm1haW4uaWQgPSBza2lsbD8uaWQgPz8gJydcclxuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlID0gY2xvbmVkLnN5c3RlbS5yYW5nZSA/PyB7fVxyXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID0gY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwgPz8ge31cclxuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UgPSBkYW1hZ2VcclxuICAgICAgICBjbG9uZWQuc3lzdGVtLmFtbW8gPSB3ZWFwb24uYW1tb1xyXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ubWFsZnVuY3Rpb24gPSB3ZWFwb24ubWFsZlxyXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcyA9IGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcyA/PyB7fVxyXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSA9XHJcbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlXHJcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QgPVxyXG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtID8/IGZhbHNlXHJcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIgPSBhZGRiXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2xvbmVkID0ge1xyXG4gICAgICAgICAgbmFtZTogd2VhcG9uLm5hbWUsXHJcbiAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcclxuICAgICAgICAgIHN5c3RlbToge1xyXG4gICAgICAgICAgICBza2lsbDoge1xyXG4gICAgICAgICAgICAgIG1haW46IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHNraWxsPy5uYW1lID8/ICcnLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHNraWxsPy5pZCA/PyAnJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgICAgICBub3JtYWw6IHtcclxuICAgICAgICAgICAgICAgIGRhbWFnZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYW1tbzogd2VhcG9uLmFtbW8sXHJcbiAgICAgICAgICAgIG1hbGZ1bmN0aW9uOiB3ZWFwb24ubWFsZixcclxuICAgICAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgICAgIG1lbGVlOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlLFxyXG4gICAgICAgICAgICAgIHJuZ2Q6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlyZWFybSA/PyBmYWxzZSxcclxuICAgICAgICAgICAgICBhZGRiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgd2VhcG9ucy5wdXNoKGNsb25lZClcclxuICAgIH1cclxuICAgIHJldHVybiB3ZWFwb25zXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgc2F2ZVBvcnRyYWl0IChiYXNlNjRQb3J0cmFpdCwgZmlsZU5hbWUpIHtcclxuICAgIGNvbnN0IGJhc2U2NFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArIGJhc2U2NFBvcnRyYWl0XHJcbiAgICApXHJcbiAgICBjb25zdCBpbWFnZUJsb2IgPSBhd2FpdCBiYXNlNjRSZXNwb25zZS5ibG9iKClcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gQ29DN0RpcmVjdG9yeVBpY2tlci51cGxvYWRUb0RlZmF1bHREaXJlY3RvcnkoXHJcbiAgICAgIGltYWdlQmxvYixcclxuICAgICAgZmlsZU5hbWVcclxuICAgIClcclxuICAgIHJldHVybiBmaWxlUGF0aFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIChkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSwgb3B0aW9ucykge1xyXG4gICAgaWYgKCFnYW1lLnVzZXI/LmNhbignRklMRVNfVVBMT0FEJykpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIGNvbnN0IGNoYXJhY3RlckRhdGEgPVxyXG4gICAgICBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuY29udmVydERob2xlSG91c2VDaGFyYWN0ZXJEYXRhKFxyXG4gICAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLFxyXG4gICAgICAgIG9wdGlvbnNcclxuICAgICAgKVxyXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0NoYXJhY3RlciBEYXRhOicsIGNoYXJhY3RlckRhdGEpXHJcbiAgICB9XHJcbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxyXG4gICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXHJcbiAgICBpZiAoIUNvQzdEaXJlY3RvcnlQaWNrZXIuY3JlYXRlRGVmYXVsdERpcmVjdG9yeSgpKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xyXG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXHJcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxyXG4gICAgICBmb2xkZXI6IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlci5pZCxcclxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxyXG4gICAgfVxyXG4gICAgY29uc3QgbnBjID0gYXdhaXQgQWN0b3IuY3JlYXRlKGFjdG9yRGF0YSlcclxuICAgIC8vIElmIHBvc3NpYmxlIHVwbG9hZCB0aGUgaW1hZ2UgcG9ydHJhaXRcclxuICAgIGlmIChcclxuICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLlBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdD8ubGVuZ3RoID4gMTBcclxuICAgICkge1xyXG4gICAgICBjb25zdCBmaWxlTmFtZSA9ICdhdmF0YXItJyArIG5wYy5pZCArICcucG5nJ1xyXG4gICAgICBjb25zdCBwb3J0cmFpdCA9IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5zYXZlUG9ydHJhaXQoXHJcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLlBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdCxcclxuICAgICAgICBmaWxlTmFtZVxyXG4gICAgICApXHJcbiAgICAgIGlmIChwb3J0cmFpdCAhPT0gZmFsc2UpIHtcclxuICAgICAgICBucGMudXBkYXRlKHtcclxuICAgICAgICAgIGltZzogcG9ydHJhaXRcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnSXRlbXM6ICcsIGNoYXJhY3RlckRhdGEuaXRlbXMpXHJcbiAgICB9XHJcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnNraWxscywge1xyXG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcclxuICAgIH0pXHJcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnBvc3Nlc2lvbnMsIHtcclxuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXHJcbiAgICB9KVxyXG4gICAgY29uc3Qgd2VhcG9ucyA9IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0V2VhcG9ucyhcclxuICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLldlYXBvbnM/LndlYXBvbiA/PyBbXSxcclxuICAgICAgbnBjLFxyXG4gICAgICBvcHRpb25zXHJcbiAgICApXHJcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnV2VhcG9uczogJywgd2VhcG9ucylcclxuICAgIH1cclxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHdlYXBvbnMsIHtcclxuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBucGNcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBIb29rcywgbWVyZ2VPYmplY3QsIHVpLCBGaWxlUmVhZGVyICovXHJcblxyXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlciB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXIuanMnXHJcbmltcG9ydCB7IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB9IGZyb20gJy4vZGhvbGVob3VzZV9pbXBvcnRlci5qcydcclxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItaW1wb3J0ZXInXSxcclxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJyksXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2FjdG9yLWltcG9ydGVyLmh0bWwnLFxyXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcclxuICAgICAgd2lkdGg6IDYwMCxcclxuICAgICAgaGVpZ2h0OiAnYXV0bydcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKiogQG92ZXJyaWRlICovXHJcbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXHJcblxyXG4gICAgZGF0YS5pbXBvcnRUeXBlID0gZGF0YS5vYmplY3QuaW1wb3J0VHlwZVxyXG4gICAgZGF0YS5jb252ZXJ0NkUgPSBkYXRhLm9iamVjdC5jb252ZXJ0NkVcclxuICAgIGRhdGEuc291cmNlID0gZGF0YS5vYmplY3Quc291cmNlXHJcbiAgICBkYXRhLmNoYXJhY3RlckRhdGEgPSBkYXRhLm9iamVjdC5jaGFyYWN0ZXJEYXRhXHJcbiAgICBkYXRhLmNhblVwbG9hZCA9IGdhbWUudXNlcj8uY2FuKCdGSUxFU19VUExPQUQnKVxyXG4gICAgaWYgKFsnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoZGF0YS5pbXBvcnRUeXBlKSkge1xyXG4gICAgICBkYXRhLmxhbmd1YWdlcyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFRyYW5zbGF0aW9ucygpXHJcbiAgICAgIGRhdGEubGFuZ3VhZ2UgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKFxyXG4gICAgICAgIGRhdGEub2JqZWN0Lmxhbmd1YWdlXHJcbiAgICAgIClcclxuICAgICAgZGF0YS5wbGFjZWhvbGRlciA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KGRhdGEubGFuZ3VhZ2UpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG5cclxuICAgIGh0bWwuZmluZCgnI2Rob2xlaG91c2UtY2hhcmFjdGVyLXByZXZpZXcnKS5oaWRlKClcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJyNjb2MtZW50aXR5LXR5cGUsI2NvYy1lbnRpdHktbGFuZycpXHJcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJyNkaG9sZWhvdXNlLWpzb24tZmlsZS1waWNrZXInKVxyXG4gICAgICAuY2hhbmdlKHRoaXMuX29uSlNPTkZpbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxyXG5cclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJylcclxuICAgICAgLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkID0gJCh0aGlzKVxyXG4gICAgICAgICAgLnZhbCgpXHJcbiAgICAgICAgICAubWF0Y2goL1tcXHVkYmMwLVxcdWRiZmVdW1xcdWRjMDAtXFx1ZGZmZl0vKVxyXG4gICAgICAgIGNvbnN0IHByb21wdCA9ICQoJyNjb2MtcHJvbXB0JylcclxuICAgICAgICBpZiAocHJvbXB0LmRhdGEoJ2V4dGVuZGVkJykgJiYgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkKSB7XHJcbiAgICAgICAgICBwcm9tcHRcclxuICAgICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRleHRGaWVsZEludmFsaWRDaGFyYWN0ZXJzJykpXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwcm9tcHQuaHRtbChwcm9tcHQuZGF0YSgndGV4dCcpKS5yZW1vdmVDbGFzcygnZXJyb3InKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLnRyaWdnZXIoJ2tleXVwJylcclxuXHJcbiAgICBodG1sLmZpbmQoJy5zdWJtaXQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25DbGlja1N1Ym1pdC5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5maW5kKCdmb3JtJykuc3VibWl0KGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIGdldElucHV0cyBleHRyYWN0cyB0aGUgZGF0YSBmcm9tIHRoZSBpbnB1dCBmaWVsZHMgYW5kXHJcbiAgICogYWRkcyBhIGAuYCBhdCB0aGUgZW5kIGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldElucHV0cyAoZm9ybSkge1xyXG4gICAgY29uc3QgaW5wdXRzID0ge31cclxuICAgIGlucHV0cy5lbnRpdHkgPSBmb3JtLmZpbmQoJyNjb2MtZW50aXR5LXR5cGUnKS52YWwoKS50cmltKClcclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2VudGl0eSB0eXBlOicsIGlucHV0cy5lbnRpdHkpXHJcbiAgICB9XHJcbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID0gZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS52YWwoKS50cmltKClcclxuICAgIH1cclxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlucHV0cy5sYW5nID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShcclxuICAgICAgICBmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS52YWwoKS50cmltKClcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKGZvcm0uZmluZCgnI3NvdXJjZScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgaW5wdXRzLnNvdXJjZSA9IGZvcm0uZmluZCgnI3NvdXJjZScpLnZhbCgpLnRyaW0oKVxyXG4gICAgfVxyXG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlucHV0cy50ZXh0ID0gZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLnZhbCgpLnRyaW0oKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3JlY2VpdmVkIHRleHQnLCAnIyMnICsgaW5wdXRzLnRleHQgKyAnIyMnKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlucHV0c1xyXG4gIH1cclxuXHJcbiAgX29uSlNPTkZpbGVTZWxlY3RlZCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGpzb25GaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1qc29uLWZpbGUtcGlja2VyJylcclxuICAgIGNvbnN0IHBvcnRyYWl0SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgJ2Rob2xlaG91c2UtY2hhcmFjdGVyLXBvcnRyYWl0J1xyXG4gICAgKVxyXG4gICAgY29uc3QgY2hhcmFjdGVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWNoYXJhY3Rlci1uYW1lJylcclxuICAgIGNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1jaGFyYWN0ZXItcHJldmlldycpXHJcbiAgICBjb25zdCBmaWxlID0ganNvbkZpbGVJbnB1dC5maWxlc1swXVxyXG4gICAgY29uc3QgZGlhbG9nID0gdGhpc1xyXG4gICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcclxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBkaWFsb2cuY2hhcmFjdGVySlNPTiA9IEpTT04ucGFyc2UoZmlsZVJlYWRlci5yZXN1bHQpXHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAkKCcjY29jLXByb21wdCcpXHJcbiAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZEpTT04nKSlcclxuICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwZXJzb25hbERldGFpbHMgPVxyXG4gICAgICAgIGRpYWxvZy5jaGFyYWN0ZXJKU09OPy5JbnZlc3RpZ2F0b3I/LlBlcnNvbmFsRGV0YWlsc1xyXG4gICAgICBpZiAoIXBlcnNvbmFsRGV0YWlscykge1xyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGhvbGVIb3VzZUludmFsaWRBY3RvcicpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIGNoYXJhY3Rlck5hbWUudGV4dENvbnRlbnQgPSBwZXJzb25hbERldGFpbHMuTmFtZVxyXG4gICAgICBwb3J0cmFpdEltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArIHBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdFxyXG4gICAgICBwcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICAgICQoJy5kaWFsb2cuYWN0b3ItaW1wb3J0ZXInKS5oZWlnaHQoJ2F1dG8nKVxyXG4gICAgfVxyXG4gICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpXHJcbiAgfVxyXG5cclxuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XHJcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNsaWNrU3VibWl0IChldmVudCkge1xyXG4gICAgY29uc3QgaWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uXHJcbiAgICBpZiAoaWQgPT09ICdubycpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnZ2V0RXhhbXBsZU5vdycpIHtcclxuICAgICAgY29uc3QgY29udGVudCA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KFxyXG4gICAgICAgIHRoaXMub2JqZWN0Lmxhbmd1YWdlXHJcbiAgICAgIClcclxuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoY29udGVudCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29waWVkJykpXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnaW1wb3J0Jykge1xyXG4gICAgICBjb25zdCBhcHAgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Rpdi5kaWFsb2cuYWN0b3ItaW1wb3J0ZXInKVxyXG4gICAgICBhcHAuaGlkZSgpXHJcbiAgICAgIGNvbnN0IGZvcm0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxyXG4gICAgICBjb25zdCBpbnB1dHMgPSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5nZXRJbnB1dHMoZm9ybSlcclxuICAgICAgaWYgKGlucHV0cy5lbnRpdHkgPT09ICdkaG9sZWhvdXNlJyAmJiB0aGlzLmNoYXJhY3RlckpTT04pIHtcclxuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPVxyXG4gICAgICAgICAgYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlKFxyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckpTT04sXHJcbiAgICAgICAgICAgIHsgc291cmNlOiBpbnB1dHMuc291cmNlIH1cclxuICAgICAgICAgIClcclxuICAgICAgICBpZiAoY2hhcmFjdGVyICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnY2hhcmFjdGVyOicsIGNoYXJhY3RlcilcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BY3RvckltcG9ydGVkJywge1xyXG4gICAgICAgICAgICAgIGFjdG9yVHlwZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkNoYXJhY3RlcicpLFxyXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogY2hhcmFjdGVyLm5hbWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGF3YWl0IGNoYXJhY3Rlci5zaGVldC5yZW5kZXIodHJ1ZSlcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcHAuc2hvdygpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGlucHV0cy50ZXh0ICYmIGlucHV0cy50ZXh0ICE9PSAnJykge1xyXG4gICAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmltcG9ydEFjdG9yKGlucHV0cylcclxuICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAuc2hvdygpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBAb3ZlcnJpZGVcclxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxyXG4gICAqL1xyXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xyXG4gICAgdGhpcy5vYmplY3QuaW1wb3J0VHlwZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LXR5cGUnXVxyXG4gICAgdGhpcy5vYmplY3QuY2hhcmFjdGVyRGF0YSA9IGZvcm1EYXRhWydjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJ10/LnRyaW0oKVxyXG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWNvbnZlcnQtNkUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdGhpcy5vYmplY3QuY29udmVydDZFID0gZm9ybURhdGFbJ2NvYy1jb252ZXJ0LTZFJ11cclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1lbnRpdHktbGFuZyddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LWxhbmcnXVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YS5zb3VyY2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMub2JqZWN0LnNvdXJjZSA9IGZvcm1EYXRhLnNvdXJjZVxyXG4gICAgfVxyXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXHJcbiAgICogQHBhcmFtIHtodG1sfSBodG1sXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChpbnB1dHMpIHtcclxuICAgIGlmIChpbnB1dHMudGV4dFtpbnB1dHMudGV4dC5sZW5ndGhdICE9PSAnLicpIHtcclxuICAgICAgaW5wdXRzLnRleHQgKz0gJy4nIC8vIEFkZCBhIGRvdCBhIHRoZSBlbmQgdG8gaGVscCB0aGUgcmVnZXggZmluZCB0aGUgZW5kXHJcbiAgICB9XHJcbiAgICBjb25zdCBhY3RvciA9IG5ldyBDb0M3QWN0b3JJbXBvcnRlcigpXHJcbiAgICBjb25zdCBjcmVhdGVkQWN0b3IgPSBhd2FpdCBhY3Rvci5jcmVhdGVBY3RvcihpbnB1dHMpXHJcbiAgICAvLyBBY3RvciBjcmVhdGVkLCBOb3RpZnkgdGhlIHVzZXIgYW5kIHNob3cgdGhlIHNoZWV0LlxyXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcclxuICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEFjdG9yOicsIGNyZWF0ZWRBY3RvcilcclxuICAgIH1cclxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BY3RvckltcG9ydGVkJywge1xyXG4gICAgICAgIGFjdG9yVHlwZTogY3JlYXRlZEFjdG9yLnR5cGU/LnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgYWN0b3JOYW1lOiBjcmVhdGVkQWN0b3IubmFtZVxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gICAgYXdhaXQgY3JlYXRlZEFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxyXG4gICAgLy8gY29uc3QgdXBkYXRlZCA9IGF3YWl0IFVwZGF0ZXIudXBkYXRlQWN0b3IobnBjKVxyXG4gICAgLy8gY29uc29sZS5kZWJ1ZygndXBkYXRlZDonLCB1cGRhdGVkKVxyXG4gIH1cclxuXHJcbiAgLy8gLyoqXHJcbiAgLy8gICogY3JlYXRlIGl0J3MgdGhlIGRlZmF1bHQgd2ViIHRvIGNyYXRlIHRoZSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZ1xyXG4gIC8vICAqL1xyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgb3B0aW9ucy5pbXBvcnRUeXBlID0gb3B0aW9ucy5pbXBvcnRUeXBlID8/ICducGMnXHJcbiAgICBvcHRpb25zLmxhbmd1YWdlID1cclxuICAgICAgb3B0aW9ucy5sYW5ndWFnZSA/PyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKG51bGwpXHJcbiAgICBvcHRpb25zLmNvbnZlcnQ2RSA9IG9wdGlvbnMubGFuZ3VhZ2UgPz8gJ2NvYy1ndWVzcydcclxuICAgIG9wdGlvbnMuc291cmNlID0gb3B0aW9ucy5zb3VyY2UgPz8gJ2l3bXMnXHJcbiAgICBvcHRpb25zLmNoYXJhY3RlckRhdGEgPSBvcHRpb25zLmNoYXJhY3RlckRhdGEgPz8gJydcclxuXHJcbiAgICBuZXcgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cob3B0aW9ucykucmVuZGVyKHRydWUpXHJcbiAgfVxyXG59XHJcblxyXG5Ib29rcy5vbmNlKCdyZWFkeScsICgpID0+IHtcclxuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnQ29DNy1JbXBvcnRlci1UZXN0cycpPy5hY3RpdmUpIHtcclxuICAgIHdpbmRvdy5Db0M3QWN0b3JJbXBvcnRlciA9IENvQzdBY3RvckltcG9ydGVyXHJcbiAgfVxyXG59KVxyXG4iLCIvKiBnbG9iYWwgY2FudmFzLCBmb3VuZHJ5LCBnYW1lLCBQbGFjZWFibGVzTGF5ZXIgKi9cclxuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuL2NoYXQuanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcclxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgfSBmcm9tICcuL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzJ1xyXG5cclxuY2xhc3MgQ29DN01lbnVMYXllciBleHRlbmRzIFBsYWNlYWJsZXNMYXllciB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgc3VwZXIoKVxyXG4gICAgdGhpcy5vYmplY3RzID0ge31cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgbGF5ZXJPcHRpb25zICgpIHtcclxuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmxheWVyT3B0aW9ucywge1xyXG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxyXG4gICAgICB6SW5kZXg6IDYwXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBkb2N1bWVudE5hbWUgKCkge1xyXG4gICAgcmV0dXJuICdUb2tlbidcclxuICB9XHJcblxyXG4gIGdldCBwbGFjZWFibGVzICgpIHtcclxuICAgIHJldHVybiBbXVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdNZW51IHtcclxuICBzdGF0aWMgZ2V0QnV0dG9ucyAoY29udHJvbHMpIHtcclxuICAgIGNhbnZhcy5jb2M3Z210b29scyA9IG5ldyBDb0M3TWVudUxheWVyKClcclxuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIGNvbnN0IHNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXHJcbiAgICBjb250cm9scy5wdXNoKHtcclxuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcclxuICAgICAgdGl0bGU6ICdDb0M3LkdtVG9vbHMnLFxyXG4gICAgICBsYXllcjogJ2NvYzdnbXRvb2xzJyxcclxuICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJyxcclxuICAgICAgdmlzaWJsZTogaXNLZWVwZXIsXHJcbiAgICAgIHRvb2xzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxyXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxyXG4gICAgICAgICAgbmFtZTogJ2RldnBoYXNlJyxcclxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyksXHJcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRGV2UGhhc2UnLFxyXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlRGV2UGhhc2UodG9nZ2xlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxyXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLWVkaXQnLFxyXG4gICAgICAgICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxyXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXHJcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQ2hhckNyZWF0aW9uTW9kZScsXHJcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT5cclxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24odG9nZ2xlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLXBsdXMnLFxyXG4gICAgICAgICAgbmFtZTogJ2FjdG9yLWltcG9ydCcsXHJcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQWN0b3JJbXBvcnRlcicsXHJcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxyXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1jZXJ0aWZpY2F0ZScsXHJcbiAgICAgICAgICBjbGFzczogJ3hwX3RvZ2dsZScsXHJcbiAgICAgICAgICBuYW1lOiAneHB0b2dnbGUnLFxyXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSxcclxuICAgICAgICAgIHRpdGxlOiAnQ29DNy50b2dnbGVYUCcsXHJcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVYUEdhaW4odG9nZ2xlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tY2FyZC1qb2tlcicsXHJcbiAgICAgICAgICBuYW1lOiAnZmFrZXJvbGwnLFxyXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkZha2VSb2xsJyxcclxuICAgICAgICAgIG9uQ2xpY2s6IENvQzdDaGF0LmZha2VSb2xsTWVzc2FnZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1tb29uJyxcclxuICAgICAgICAgIG5hbWU6ICdzdGFydHJlc3QnLFxyXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnN0YXJ0UmVzdCcsXHJcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldFRhcmdldCgpXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KVxyXG4gICAgaWYgKHNob3dIaWRkZW5EZXZNZW51KSB7XHJcbiAgICAgIGNhbnZhcy5jb2M3RGV2VG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXHJcbiAgICAgIGNvbnRyb2xzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6ICdjb2M3RGV2TWVudScsXHJcbiAgICAgICAgdGl0bGU6XHJcbiAgICAgICAgICBcIkRldiB0b29scy4gSWYgeW91IGRvbid0IGtub3cgd2hhdCBpdCBpcywgeW91IGRvbid0IG5lZWQgaXQgYW5kIHlvdSBzaG91bGRuJ3QgdXNlIGl0ICEhXCIsXHJcbiAgICAgICAgbGF5ZXI6ICdjb2M3RGV2VG9vbHMnLFxyXG4gICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLXBvbGljZS1iYWRnZScsXHJcbiAgICAgICAgdmlzaWJsZTogaXNLZWVwZXIsXHJcbiAgICAgICAgdG9vbHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxyXG4gICAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1kaWNlLWZpcmUnLFxyXG4gICAgICAgICAgICBuYW1lOiAnYWx3YXlzQ3JpdCcsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIHJvbGxzIHdpbGwgY3JpdCcsXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZSA9PiB7XHJcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgPSB0b2dnbGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxyXG4gICAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1maXJlLWV4dGluZ3Vpc2hlcicsXHJcbiAgICAgICAgICAgIG5hbWU6ICdhbHdheXNGdW1ibGUnLFxyXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIHJvbGxzIHdpbGwgZnVtYmxlJyxcclxuICAgICAgICAgICAgb25DbGljazogdG9nZ2xlID0+IHtcclxuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlID0gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbmRlckNvbnRyb2xzIChhcHAsIGh0bWwsIGRhdGEpIHtcclxuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIGNvbnN0IGtlZXBlck1lbnUgPSBodG1sLmZpbmQoJy5nYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJykucGFyZW50KClcclxuICAgIGtlZXBlck1lbnUuYWRkQ2xhc3MoJ2NvYzctbWVudScpXHJcbiAgICBpZiAoaXNLZWVwZXIpIHtcclxuICAgICAga2VlcGVyTWVudS5hZnRlcihcclxuICAgICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1jcmVhdGUtbGlua1wiIHRpdGxlPVwiJyArXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpICtcclxuICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1saW5rXCI+PC9pPjwvbGk+J1xyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBrZWVwZXJNZW51LmFmdGVyKFxyXG4gICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1kaWNlLXJvbGxcIiB0aXRsZT1cIicgK1xyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpICtcclxuICAgICAgICAnXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT48L2xpPidcclxuICAgIClcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1kaWNlLXJvbGwnKVxyXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN1V0aWxpdGllcy5yb2xsRGljZShldmVudCkpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctY3JlYXRlLWxpbmsnKVxyXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN0xpbmtDcmVhdGlvbkRpYWxvZy5jcmVhdGUoZXZlbnQpKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cclxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vbGluay5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3Q2FudmFzIHtcclxuICBzdGF0aWMgZ2V0IENPQzdfVFlQRVNfU1VQUE9SVEVEICgpIHtcclxuICAgIHJldHVybiBbJ2xpbmsnLCAnY2hhc2UnXVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIG9uRHJvcFNvbWV0aGluZyAoY2FudmFzLCBkYXRhKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGRhdGEuQ29DN1R5cGUgJiZcclxuICAgICAgQ29DN0NhbnZhcy5DT0M3X1RZUEVTX1NVUFBPUlRFRC5pbmNsdWRlcyhkYXRhLkNvQzdUeXBlKVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGdyaWRTaXplID0gY2FudmFzLnNjZW5lLmdyaWRcclxuICAgICAgY29uc3QgeCA9IGRhdGEueCAtIGdyaWRTaXplIC8gMlxyXG4gICAgICBjb25zdCB5ID0gZGF0YS55IC0gZ3JpZFNpemUgLyAyXHJcbiAgICAgIGNvbnN0IGhlaWdodCA9IGdyaWRTaXplXHJcbiAgICAgIGNvbnN0IHdpZHRoID0gZ3JpZFNpemVcclxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XHJcbiAgICAgICAgY29uc3QgYyA9IG9iai5jZW50ZXJcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXHJcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLnksIHksIHkgKyBoZWlnaHQpXHJcbiAgICAgICAgKVxyXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxyXG4gICAgICBpZiAoIWRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSBkcm9wVGFyZ2V0VG9rZW5zID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkIC8vIElmIG5vIHRhcmdldCB3aGlzcGVyIHRvIHNlbGVjdGVkIHRva2VuXHJcbiAgICAgIHN3aXRjaCAoZGF0YS5Db0M3VHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2xpbmsnOlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEoZGF0YSlcclxuICAgICAgICAgICAgaWYgKCFsaW5rLmxpbmspIHtcclxuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdJbnZhbGlkIGxpbmsnKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxyXG4gICAgICAgICAgICBvcHRpb24uc3BlYWtlciA9IHtcclxuICAgICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxpbmsuaXMuZWZmZWN0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgdG8gZXZlcnlvbmUgPyBvciBvbmx5IHBsYXllcnMgPyBvciBub2JvZHlcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGRyb3BUYXJnZXRUb2tlbnMpIHtcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgdC5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmsuX2xpbmtEYXRhLmVmZmVjdFxyXG4gICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAoIWRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3aGlzcGVyVGFyZ2V0cyA9IGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgIHUgPT4gISF1LmNoYXJhY3RlclxyXG4gICAgICAgICAgICAgICAgKSAvLyBVc2VyIHdpdGggYXQgbGVhc3QgYSBjaGFyYWN0ZXJcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdSBvZiB3aGlzcGVyVGFyZ2V0cykge1xyXG4gICAgICAgICAgICAgICAgICBvcHRpb24ud2hpc3BlciA9IFt1XVxyXG4gICAgICAgICAgICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHUuY2hhcmFjdGVyLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjaGVjazogbGluay5saW5rXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGRyb3BUYXJnZXRUb2tlbnMpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHQuYWN0b3IuaGFzUGxheWVyT3duZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24ud2hpc3BlciA9IHQuYWN0b3Iub3duZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVRhcmdldENoZWNrUmVxdWVzdGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0LmFjdG9yLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrOiBsaW5rLmxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgaWYgKGRhdGEuZG9jVXVpZCAmJiBkYXRhLmNhbGxCYWNrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKGRhdGEuZG9jVXVpZClcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIGRvY1tkYXRhLmNhbGxCYWNrXSAmJlxyXG4gICAgICAgICAgICAgIHR5cGVvZiBkb2NbZGF0YS5jYWxsQmFja10gPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRhdGEuc2NlbmUgPSBjYW52YXMuc2NlbmUudXVpZFxyXG4gICAgICAgICAgICAgICAgZG9jW2RhdGEuY2FsbEJhY2tdKGRhdGEpXHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBnYW1lLCBTZXR0aW5ncyAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN1NldHRpbmdzRGlyZWN0b3J5IGV4dGVuZHMgU2V0dGluZ3Mge1xyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnI3NldHRpbmdzLWdhbWUnKVxyXG4gICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cInRyaWdnZXItZGF0YS1taWdyYXRpb25cIj48aSBjbGFzcz1cImZhcyBmYS13cmVuY2hcIj48L2k+ICcgK1xyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQnV0dG9uJykgK1xyXG4gICAgICAgICAgICAnPC9idXR0b24+J1xyXG4gICAgICAgIClcclxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1kYXRhLW1pZ3JhdGlvbicpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICBuZXcgRGlhbG9nKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclRpdGxlJyksXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJDb250ZW50cycpLFxyXG4gICAgICAgICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgICAgICAgbWlncmF0ZToge1xyXG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclJlc3RhcnQnKSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nLCAwKVxyXG4gICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGNsb3NlOiB7XHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtYmFuXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDYW5jZWwnKSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7fVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ2Nsb3NlJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHt9XHJcbiAgICAgICAgKS5yZW5kZXIodHJ1ZSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIENvbXBlbmRpdW1EaXJlY3RvcnksIERpYWxvZywgZ2FtZSAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgZXh0ZW5kcyBDb21wZW5kaXVtRGlyZWN0b3J5IHtcclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuICAgIGxldCB0cmFuc2xhdGVkID0gZmFsc2VcclxuICAgIGlmIChnYW1lLmkxOG4ubGFuZyA9PT0gJ2VuJykge1xyXG4gICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ2FtZS5iYWJlbGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBPYmplY3QudmFsdWVzKGdhbWUuYmFiZWxlLm1vZHVsZXMpKSB7XHJcbiAgICAgICAgaWYgKHYubGFuZyA9PT0gZ2FtZS5pMThuLmxhbmcpIHtcclxuICAgICAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXRyYW5zbGF0ZWQpIHtcclxuICAgICAgaHRtbFxyXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXHJcbiAgICAgICAgLmFwcGVuZChcclxuICAgICAgICAgICc8YSBjbGFzcz1cImNvbXBlbmRpdW0tdHJhbnNsYXRpb25cIiB0aXRsZT1cIicgK1xyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcclxuICAgICAgICAgICAgJ1wiPicgK1xyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcclxuICAgICAgICAgICAgJzwvYT4nXHJcbiAgICAgICAgKVxyXG4gICAgICBodG1sLmZpbmQoJy5jb21wZW5kaXVtLXRyYW5zbGF0aW9uJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxyXG4gICAgICAgICAgJzxwPicgK1xyXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlV2FybmluZycpICtcclxuICAgICAgICAgICc8L3A+JyArXHJcbiAgICAgICAgICAnPHA+JyArXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsQmFiZWxlJykgK1xyXG4gICAgICAgICAgJzwvcD4nICtcclxuICAgICAgICAgICc8cD4nICtcclxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxUcmFuc2xhdGlvbicpICtcclxuICAgICAgICAgICc8L3A+JyArXHJcbiAgICAgICAgICAnPHA+JyArXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVFbmFibGVUcmFuc2xhdGlvbicpICtcclxuICAgICAgICAgICc8L3A+JyArXHJcbiAgICAgICAgICAnPHA+JyArXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVOb1RyYW5zbGF0aW9uJykgK1xyXG4gICAgICAgICAgJzwvcD4nXHJcbiAgICAgICAgbmV3IERpYWxvZyhcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJyksXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGJ1dHRvbnM6IHt9LFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAge31cclxuICAgICAgICApLnJlbmRlcih0cnVlKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgQWN0b3JEaXJlY3RvcnksIENPTlNULCBnYW1lICovXHJcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JEaXJlY3RvcnkgZXh0ZW5kcyBBY3RvckRpcmVjdG9yeSB7XHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgaWYgKGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlKSB7XHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxyXG4gICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAnPGEgY2xhc3M9XCJhY3Rvci1pbXBvcnRcIj4nICtcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKSArXHJcbiAgICAgICAgICAgICc8L2E+J1xyXG4gICAgICAgIClcclxuICAgICAgaHRtbC5maW5kKCcuYWN0b3ItaW1wb3J0JykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmNyZWF0ZSgpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBnYW1lLCBtZXJnZU9iamVjdCwgUm9sbCwgcmVuZGVyVGVtcGxhdGUsIHVpICovXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXHJcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcclxuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xyXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3BlbnRhZ3JhbS1yb3NlLnN2ZydcclxuICAgIH1cclxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XHJcbiAgfVxyXG5cclxuICBhc3luYyBjYXN0ICgpIHtcclxuICAgIGlmICghdGhpcy5pc093bmVkKSB7XHJcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cclxuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXHJcbiAgICB9XHJcbiAgICBjb25zdCBjb3N0cyA9IHRoaXMuc3lzdGVtLmNvc3RzXHJcbiAgICBjb25zdCBsb3NzZXMgPSBbXVxyXG4gICAgbGV0IGNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50c1xyXG4gICAgY29zdHMubWFnaWNQb2ludHMgPSBDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShjb3N0cy5tYWdpY1BvaW50cylcclxuICAgICAgPyAoYXdhaXQgbmV3IFJvbGwoY29zdHMubWFnaWNQb2ludHMpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcclxuICAgICAgOiBwYXJzZUludChjb3N0cy5tYWdpY1BvaW50cylcclxuICAgIGlmIChcclxuICAgICAgY29zdHMubWFnaWNQb2ludHMgJiZcclxuICAgICAgY29zdHMubWFnaWNQb2ludHMgPiB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXHJcbiAgICApIHtcclxuICAgICAgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udmVydGVkSGl0UG9pbnRzID1cclxuICAgICAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzIC0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxyXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZE1hZ2ljUG9pbnRzID0gY29zdHMubWFnaWNQb2ludHMgLSBjb252ZXJ0ZWRIaXRQb2ludHNcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgdGl0bGU6ICcgJyxcclxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm90RW5vdWdoTWFnaWNQb2ludHMnLCB7XHJcbiAgICAgICAgICAgIGFjdG9yTWFnaWNQb2ludHM6IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUsXHJcbiAgICAgICAgICAgIGNvbnZlcnRlZEhpdFBvaW50cyxcclxuICAgICAgICAgICAgY29udmVydGVkTWFnaWNQb2ludHMsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsTWFnaWNQb2ludHM6IGNvc3RzLm1hZ2ljUG9pbnRzLFxyXG4gICAgICAgICAgICBzcGVsbDogdGhpcy5uYW1lXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGJ1dHRvbnM6IHtcclxuICAgICAgICAgICAgY2FuY2VsOiB7XHJcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcclxuICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcm9jZWVkOiB7XHJcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvc3RzLmhpdFBvaW50cyA9IGNvbnZlcnRlZEhpdFBvaW50c1xyXG4gICAgICAgICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgPSBjb252ZXJ0ZWRNYWdpY1BvaW50c1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBkZWZhdWx0OiAnY2FuY2VsJyxcclxuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnXVxyXG4gICAgICAgIH1cclxuICAgICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxyXG4gICAgICB9KVxyXG4gICAgICBpZiAoIWNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cykgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb3N0cykpIHtcclxuICAgICAgaWYgKCF2YWx1ZSB8fCBOdW1iZXIodmFsdWUpID09PSAwKSBjb250aW51ZVxyXG4gICAgICBsb3NzZXMucHVzaChhd2FpdCB0aGlzLnJlc29sdmVMb3NzZXMoa2V5LCB2YWx1ZSkpXHJcbiAgICB9XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2NoYXQuaHRtbCdcclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWVcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXNjcmlwdGlvbiwgbG9zc2VzIH0pXHJcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcclxuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxyXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXHJcbiAgICAgIGZsYXZvcjogdGhpcy5uYW1lLFxyXG4gICAgICBjb250ZW50OiBodG1sXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVzb2x2ZUxvc3NlcyAoY2hhcmFjdGVyaXN0aWMsIHZhbHVlKSB7XHJcbiAgICBsZXQgY2hhcmFjdGVyaXN0aWNOYW1lXHJcbiAgICBsZXQgbG9zc1xyXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKHZhbHVlKSkge1xyXG4gICAgICBsb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsb3NzID0gcGFyc2VJbnQodmFsdWUpXHJcbiAgICB9XHJcbiAgICBjb25zdCBhY3RvckRhdGEgPSB0aGlzLmFjdG9yLnN5c3RlbVxyXG4gICAgc3dpdGNoIChjaGFyYWN0ZXJpc3RpYykge1xyXG4gICAgICBjYXNlICdoaXRQb2ludHMnOlxyXG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IaXRQb2ludHMnKVxyXG4gICAgICAgIHRoaXMuYWN0b3IuZGVhbERhbWFnZShsb3NzLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnc2FuaXR5JzpcclxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5UG9pbnRzJylcclxuICAgICAgICB0aGlzLmdyYW50U2FuaXR5TG9zcyhsb3NzKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ21hZ2ljUG9pbnRzJzpcclxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFnaWNQb2ludHMnKVxyXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAoYWN0b3JEYXRhLmF0dHJpYnMubXAudmFsdWUgLSBsb3NzKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3Bvd2VyJzpcclxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXHJcbiAgICAgICAgdGhpcy5hY3Rvci51cGRhdGUoe1xyXG4gICAgICAgICAgJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJzpcclxuICAgICAgICAgICAgYWN0b3JEYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLSBsb3NzXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiB7IGNoYXJhY3RlcmlzdGljTmFtZSwgbG9zcyB9XHJcbiAgfVxyXG5cclxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXHJcbiAgYXN5bmMgZ3JhbnRTYW5pdHlMb3NzICh2YWx1ZSkge1xyXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcclxuICAgIGxldCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHt9KVxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcclxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxyXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2FzdGluZ1NwZWxsJywge1xyXG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcclxuICAgICAgfSksXHJcbiAgICAgIGNvbnRlbnQ6IGh0bWxcclxuICAgIH0pXHJcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgbWVzc2FnZS5nZXRIVE1MKClcclxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSB2YWx1ZVxyXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cclxuICAgICAgaHRtbC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcclxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcclxuICAgICAgICAgIHNhbkRhdGE6IHtcclxuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxyXG4gICAgICAgICAgICBzYW5NYXg6IHNhbml0eUxvc3NcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXHJcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxyXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5yb2xsU2FuTG9zcygpXHJcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZSAoZGF0YSwgY29udGV4dCkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgdHlwZW9mIHRoaXMuY29udGV4dC5ib29rSWQgIT09ICd1bmRlZmluZWQnXHJcbiAgICApIHtcclxuICAgICAgbGV0IGl0ZW1cclxuICAgICAgbGV0IGJvb2tcclxuICAgICAgLy8gbGV0IHNwZWxsRGF0YVxyXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmNvbnRleHQuYm9va0lkKVxyXG4gICAgICAgIGJvb2sgPSBpdGVtLnRvT2JqZWN0KClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBib29rID0gdGhpcy5jb250ZXh0LnBhcmVudC5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZCkudG9PYmplY3QoKVxyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suc3lzdGVtLnNwZWxscy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGJvb2suc3lzdGVtLnNwZWxsc1tpXS5faWQgPT09IHRoaXMuaWQpIHtcclxuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxsc1tpXSA9IG1lcmdlT2JqZWN0KGJvb2suc3lzdGVtLnNwZWxsc1tpXSwgZGF0YSlcclxuICAgICAgICAgIC8vIHNwZWxsRGF0YSA9IGJvb2suc3lzdGVtLnNwZWxsc1tpXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcclxuICAgICAgICAgICdzeXN0ZW0uc3BlbGxzJzogYm9vay5zeXN0ZW0uc3BlbGxzXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnNoZWV0Lm9iamVjdCA9IG5ldyBDb0M3U3BlbGwoXHJcbiAgICAgICAgICBib29rLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiBzcGVsbC5faWQgPT09IHRoaXMuaWQpLFxyXG4gICAgICAgICAgdGhpcy5jb250ZXh0XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5wYXJlbnQudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbYm9va10pXHJcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxyXG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcclxuICAgICAgICAgIHRoaXMuY29udGV4dFxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZHVwbGljYXRlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cclxuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXHJcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL3NwZWxsL2RhdGEuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XHJcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xyXG4gICAgfVxyXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcclxuICB9XHJcblxyXG4gIC8qKiBDb252ZXJ0IHRoZSBkaWZmaWN1bHR5IG9uIHRoZSBzZWxlY3QgZWxlbWVudCB0byBhIGZvcm1hdCBhY2NlcHRlZCAqL1xyXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xyXG4gICAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XHJcbiAgICAgIGNhc2UgJ2hhcmQnOlxyXG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcclxuICAgICAgY2FzZSAnZXh0cmVtZSc6XHJcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxyXG4gICAgICBjYXNlICdjcml0aWNhbCc6XHJcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcclxuICAgICAgY2FzZSAndW5yZWFkYWJsZSc6XHJcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvciB0aGUgZnV0dXJlOiBhZGQgYWR2YW5jZWQgcnVsZXMgZm9yIGxlYXJuaW5nIHNwZWxscywgcGcuIDE3NlxyXG4gICAqIEBwYXJhbSBbe0RvY3VtZW50fV0gc3BlbGxzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxyXG4gICAqL1xyXG4gIGFzeW5jIGFkZFNwZWxscyAoc3BlbGxzKSB7XHJcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5zeXN0ZW0uc3BlbGxzXHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuc3lzdGVtLnNwZWxscylcclxuICAgICAgOiBbXVxyXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHMpIHtcclxuICAgICAgY29sbGVjdGlvbi5wdXNoKHNwZWxsKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiBjb2xsZWN0aW9uIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBzcGVsbERldGFpbCAoaW5kZXgpIHtcclxuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnN5c3RlbS5zcGVsbHNbaW5kZXhdXHJcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmFjdG9yID8gdGhpcy5hY3RvciA6IG51bGxcclxuICAgIGNvbnN0IHNwZWxsID0gbmV3IENvQzdTcGVsbChkYXRhLCB7IHBhcmVudCwgYm9va0lkOiB0aGlzLmlkIH0pXHJcbiAgICBpZiAoaXNLZWVwZXIgfHwgc3BlbGwuc3lzdGVtLmxlYXJuZWQpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHNwZWxsLnNoZWV0LnJlbmRlcih0cnVlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlcyBhbGwgdGhlIGxvZ2ljIGludm9sdmluZyB0aGUgYXR0ZW1wdCBvZiBpbml0aWFsIHJlYWRpbmdcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQHNlZSBsaXN0ZW4gQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXHJcbiAgICovXHJcbiAgYXN5bmMgYXR0ZW1wdEluaXRpYWxSZWFkaW5nICgpIHtcclxuICAgIC8qKiBDb252ZXJ0cyB0aGUgZGlmZmljdWx0eSB2YWx1ZSB0byBzb21ldGhpbmcgYWNjZXB0ZWQgYnkgQ29DN0NoZWNrICovXHJcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0Jvb2suY29udmVydERpZmZpY3VsdHkoXHJcbiAgICAgIHRoaXMuc3lzdGVtLmRpZmZpY3VsdHlMZXZlbFxyXG4gICAgKVxyXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSB0aGlzLnN5c3RlbS5sYW5ndWFnZVxyXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5nZXRTa2lsbHNCeU5hbWUobGFuZ3VhZ2UpXHJcbiAgICBpZiAoIXNraWxsKSB7XHJcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cclxuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXHJcbiAgICB9IGVsc2UgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAvKipcclxuICAgICAgICogVGhlIEFjdG9yIHdobyBvd25zIHRoaXMgZG9lcyBub3QgaGF2ZSB0aGUgc2tpbGwgb2ZcclxuICAgICAgICogdGhlIGxhbmd1YWdlIGluIHdoaWNoIGl0IHdhcyB3cml0dGVuXHJcbiAgICAgICAqL1xyXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25MYW5ndWFnZScsIHsgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSB9KVxyXG4gICAgICApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcclxuICAgICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxyXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxyXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcclxuICAgICAgY2hlY2suY29udGV4dCA9ICdJTklUSUFMX1JFQURJTkcnXHJcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVhZEF0dGVtcHQnLCB7XHJcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxyXG4gICAgICAgIGxhbmd1YWdlLFxyXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuc3lzdGVtLmRpZmZpY3VsdHlMZXZlbFxyXG4gICAgICB9KVxyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcclxuICAgICAgcmV0dXJuIGF3YWl0IGNoZWNrLnRvTWVzc2FnZSgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJdHMgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgaW50ZXJhY3RzIGluIHNvbWUgd2F5IHdpdGggcHJvZ3Jlc3MgYmFyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ3Jlc2V0JyB8fCAnaW5jcmVhc2UnIHx8ICdkZWNyZWFzZSdcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUganVzdCBzbyB0aGF0IHByb2dyZXNzIGlzIG5vdCBncmVhdGVyIHRoYW4gbmVjZXNzYXJ5XHJcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxyXG4gICAqL1xyXG4gIGFzeW5jIGNoYW5nZVByb2dyZXNzIChtb2RlLCB2YWx1ZSkge1xyXG4gICAgaWYgKCF0aGlzLmlzT3duZWQgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xyXG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXHJcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XHJcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cclxuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcclxuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXHJcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLnR5cGUubXl0aG9zICYmIG1vZGUgIT09ICdyZXNldCcpIHtcclxuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE15dGhvc1RvbWUnKSlcclxuICAgIH1cclxuICAgIGNvbnN0IG5lY2Vzc2FyeSA9IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxyXG4gICAgbGV0IGZ1bGxTdHVkeSA9IHRoaXMuc3lzdGVtLmZ1bGxTdHVkeVxyXG4gICAgbGV0IHByb2dyZXNzID0gdGhpcy5zeXN0ZW0uc3R1ZHkucHJvZ3Jlc3NcclxuICAgIGlmIChpc05hTihwcm9ncmVzcykpIHtcclxuICAgICAgLyoqIEl0IHNlZW1zIGEgbGl0dGxlIGltcG9zc2libGUsIGJ1dCB5b3UgbmV2ZXIga25vdyAqL1xyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUgJiYgcHJvZ3Jlc3MgPiB2YWx1ZSkge1xyXG4gICAgICAvKipcclxuICAgICAgICogUHJvZ3Jlc3MgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHZhbHVlIGVudGVyZWQgYnkgdXNlciBhcyBuZWNlc3NhcnksXHJcbiAgICAgICAqIHJlc2V0IHByb2dyZXNzIHRvIGJlIGVxdWFsIG5lY2Vzc2FyeSBhbmQgY29tcGxldGUgZnVsbCBzdHVkeVxyXG4gICAgICAgKi9cclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgICdzeXN0ZW0uZnVsbFN0dWR5JzogKytmdWxsU3R1ZHksXHJcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHZhbHVlXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbXBsZXRlRnVsbFN0dWR5KClcclxuICAgIH1cclxuICAgIGlmIChtb2RlID09PSAnaW5jcmVhc2UnICYmIHByb2dyZXNzIDwgbmVjZXNzYXJ5KSB7XHJcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGluY3JlYXNlIHByb2dyZXNzICovXHJcbiAgICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiArK3Byb2dyZXNzXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChwcm9ncmVzcyA9PT0gbmVjZXNzYXJ5KSB7XHJcbiAgICAgICAgLyoqIENvbXBsZXRlIGZ1bGwgc3R1ZHkgaWYgcHJvZ3Jlc3MgaXMgZXF1YWwgbmVjZXNzYXJ5ICovXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5IH0pXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ3JhbnRGdWxsU3R1ZHkoKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdkZWNyZWFzZScgJiYgcHJvZ3Jlc3MgPiAwKSB7XHJcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byBkZWNyZWFzZSBwcm9ncmVzcyAqL1xyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xyXG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAtLXByb2dyZXNzXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjaGVja0V4aGF1c3Rpb24gKCkge1xyXG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3I/LmN0aHVsaHVNeXRob3NcclxuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuc3lzdGVtLm15dGhvc1JhdGluZ1xyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSB7XHJcbiAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlID49IG15dGhvc1JhdGluZykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiB0aGlzLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvb2tIYXNOb3RoaW5nTW9yZVRvVGVhY2gnLCB7XHJcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXHJcbiAgICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdyYW50RnVsbFN0dWR5ICgpIHtcclxuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MpIHJldHVyblxyXG4gICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxyXG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3IuY3RodWxodU15dGhvc1xyXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cclxuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuc3lzdGVtLm15dGhvc1JhdGluZ1xyXG4gICAgbGV0IG15dGhvc0ZpbmFsID0gdGhpcy5zeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbFxyXG4gICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCA+IG15dGhvc1JhdGluZykge1xyXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IG15dGhvc0ZpbmFsOyBpbmRleCsrKSB7XHJcbiAgICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCAtIGluZGV4IDw9IG15dGhvc1JhdGluZykge1xyXG4gICAgICAgICAgbXl0aG9zRmluYWwgLT0gaW5kZXhcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlYWRlciBhdXRvbWF0aWNhbGx5IGdhaW5zIGEgc2tpbGwgdGljayBmb3IgdGhlXHJcbiAgICAgKiBsYW5ndWFnZSBpbiB3aGljaCB0aGUgYm9vayBpcyB3cml0dGVuXHJcbiAgICAgKi9cclxuICAgIGRldmVsb3BtZW50cy5wdXNoKFxyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkN0aHVsaHVNeXRob3NOYW1lJyksXHJcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zRmluYWwpXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5sYW5ndWFnZSxcclxuICAgICAgICBnYWluOiAnZGV2ZWxvcG1lbnQnXHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcclxuICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgJ3N5c3RlbS5mdWxsU3R1ZGllcyc6ICsrdGhpcy5zeXN0ZW0uZnVsbFN0dWRpZXNcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcclxuICAgKi9cclxuICBhc3luYyBncmFudEluaXRpYWxSZWFkaW5nICgpIHtcclxuICAgIC8qKiBJZiBpbml0aWFsIHJlYWRpbmcgaGFzIGFscmVhZHkgYmVlbiBkb25lIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8gaGVyZSAqL1xyXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSByZXR1cm5cclxuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXHJcbiAgICBjb25zdCBteXRob3MgPSB7XHJcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwsXHJcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUubXl0aG9zXHJcbiAgICB9XHJcbiAgICBjb25zdCBvY2N1bHQgPSB7XHJcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5vY2N1bHQsXHJcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUub2NjdWx0XHJcbiAgICB9XHJcbiAgICBjb25zdCBvdGhlciA9IHtcclxuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLm90aGVycyxcclxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vdGhlclxyXG4gICAgfVxyXG4gICAgaWYgKG15dGhvcy50eXBlICYmIG15dGhvcy5nYWlucykge1xyXG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkN0aHVsaHVNeXRob3NOYW1lJyksXHJcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zLmdhaW5zKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgaWYgKG9jY3VsdC50eXBlICYmIG9jY3VsdC5nYWlucykge1xyXG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9jY3VsdCcpLFxyXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG9jY3VsdC5nYWlucylcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmIChvdGhlci50eXBlKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygb3RoZXIuZ2FpbnMpIHtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2tpbGwubmFtZS5tYXRjaCgvXiguKykgXFwoKC4rKVxcKSQvKVxyXG4gICAgICAgIC8qKiBTYW5pdGl6YXRpb24gdG8gZGVhbCB3aXRoIHNwZWNpYWxpemF0aW9ucyAqL1xyXG4gICAgICAgIGlmIChwYXR0ZXJuKSB7XHJcbiAgICAgICAgICBza2lsbC5zcGVjaWFsaXphdGlvbiA9IHBhdHRlcm5bMV1cclxuICAgICAgICAgIHNraWxsLm5hbWUgPSBwYXR0ZXJuWzJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChza2lsbC52YWx1ZSAhPT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgICAgc2tpbGwudmFsdWUgPSAoXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKHNraWxsLnZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcclxuICAgICAgICAgICkudG90YWxcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNraWxsLnZhbHVlKSB7XHJcbiAgICAgICAgICBkZXZlbG9wbWVudHMucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXHJcbiAgICAgICAgICAgIGdhaW46IHNraWxsLnZhbHVlLFxyXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc2tpbGwuc3BlY2lhbGl6YXRpb25cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXHJcbiAgICBpZiAoKG15dGhvcy50eXBlIHx8IG9jY3VsdC50eXBlKSAmJiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxyXG4gICAgfVxyXG4gICAgLyoqIE1hcmsgaW5pdGlhbCByZWFkaW5nIGFzIGNvbXBsZXRlICovXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmluaXRpYWxSZWFkaW5nJzogdHJ1ZSB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0l0ZW19IHNwZWxsbGVhcm5lZCBUaGUgc3BlbGwgdGhhdCB3YXMgbGVhcm5lZCBzdWNjZXNzZnVsbHkgZnJvbSBib29rXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBhc3luYyBncmFudFNwZWxsTGVhcm5pbmcgKHNwZWxsbGVhcm5lZCkge1xyXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiB0aGlzLnN5c3RlbS5zcGVsbHMpIHtcclxuICAgICAgaWYgKHNwZWxsLl9pZCA9PT0gc3BlbGxsZWFybmVkLl9pZCkge1xyXG4gICAgICAgIHNwZWxsLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxyXG4gICAgICAgIC8vIERvZXMgdGhlIGFjdG9yIGFscmVhZHkgaGFzIGEgc3BlbGwgb2YgdGhhdCBuYW1lPyBUaGVuIGRvIG5vdCBhZGQgdGhlIHNwZWxsXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTcGVsbCA9IGF3YWl0IHRoaXMuYWN0b3IuaXRlbXMuZmluZChcclxuICAgICAgICAgIGl0ZW0gPT5cclxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc3BlbGwnICYmIGl0ZW0ubmFtZSA9PT0gc3BlbGxsZWFybmVkLm5hbWVcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKCFleGlzdGluZ1NwZWxsKSB7XHJcbiAgICAgICAgICBzcGVsbGxlYXJuZWQuc3lzdGVtLmxlYXJuZWQgPSB0cnVlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVsbEFscmVhZHlMZWFybmVkJywge1xyXG4gICAgICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcclxuICAgICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gU2F2ZSBzcGVsbCBsaXN0IG9mIGJvb2tcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiB0aGlzLnN5c3RlbS5zcGVsbHMgfSlcclxuICAgIC8vIEFkZCBsZWFybmVkIHNwZWxsIHRvIGFjdG9yXHJcbiAgICBpZiAoc3BlbGxsZWFybmVkLnN5c3RlbS5sZWFybmVkKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZWxsU3VjY2Vzc2Z1bGx5TGVhcm5lZCcsIHtcclxuICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcclxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIClcclxuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcclxuICAgICAgICBkdXBsaWNhdGUoc3BlbGxsZWFybmVkKVxyXG4gICAgICBdKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVjZWl2ZXMgYW4gQXJyYXkgb2Ygc2tpbGxzIGFuZCBoYW5kbGVzIGFsbCB0aGUgbG9naWMgdG8gZGV2ZWxvcCB0aGVtXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcclxuICAgKi9cclxuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xyXG4gICAgaWYgKGRldmVsb3BtZW50cy5sZW5ndGggPT09IDApIHJldHVyblxyXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcclxuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXHJcbiAgICAgIGlmICghZGV2ZWxvcG1lbnQuZ2FpbikgY29udGludWVcclxuICAgICAgbGV0IHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5nZXRTa2lsbHNCeU5hbWUoZGV2ZWxvcG1lbnQubmFtZSlcclxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxyXG4gICAgICAgKiBGaXJzdCwgY2hlY2sgaWYgdGhlcmUgaXMgYW55IHNraWxsIGluIHRoZSBnYW1lIHdpdGggdGhlIHNhbWUgbmFtZVxyXG4gICAgICAgKiBJbiB0aGUgbGFzdCBhbHRlcm5hdGl2ZSBqdXN0IGNyZWF0ZSBhIG5ldyBnZW5lcmljIHNraWxsXHJcbiAgICAgICAqL1xyXG4gICAgICBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTa2lsbCA9IGF3YWl0IGdhbWUuaXRlbXMuZmluZChcclxuICAgICAgICAgIGl0ZW0gPT5cclxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc2tpbGwnICYmIGl0ZW0ubmFtZSA9PT0gZGV2ZWxvcG1lbnQubmFtZVxyXG4gICAgICAgIClcclxuICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbCkge1xyXG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xyXG4gICAgICAgICAgICBkdXBsaWNhdGUoZXhpc3RpbmdTa2lsbClcclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVTa2lsbChkZXZlbG9wbWVudC5uYW1lLCAwKVxyXG4gICAgICAgICAgaWYgKGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxyXG4gICAgICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiBkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBza2lsbCA9IHNraWxsWzBdXHJcbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cclxuICAgICAgICBhd2FpdCBza2lsbC5mbGFnRm9yRGV2ZWxvcGVtZW50KClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiB0aGUgcmVjZWl2ZWQgdmFsdWUgZ2FpbmVkIGlzIG51bWVyaWMsIGVuc3VyZSB0aGF0IHRoZSBhbW91bnRcclxuICAgICAgICAgKiB3aWxsIG5vdCBleGNlZWQgdGhlIG1heGltdW0gdmFsdWUgb2YgOTlcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluID4gOTkpIHtcclxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gZGV2ZWxvcG1lbnQuZ2FpbjsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcclxuICAgICAgICAgICAgICBkZXZlbG9wbWVudC5nYWluIC09IGluZGV4XHJcbiAgICAgICAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXHJcbiAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc2hvd0RldmVsb3BtZW50c1RhYmxlKGRldmVsb3BtZW50cylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN1YnNlcXVlbnQgcGVyaW9kcyBvZiBmdWxsIHN0dWR5IG1heSBiZSB1bmRlcnRha2VuLCB0aGUgZGlmZmVyZW5jZSBiZWluZ1xyXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXHJcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcclxuICAgKi9cclxuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IDAgfSlcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XHJcbiAgICAgICdzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5ICogMlxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKiBCeXBhc3MgdGhlIFNhbml0eSBjaGVjayBhbmQganVzdCByb2xsIHRoZSBkYW1hZ2UgKi9cclxuICBhc3luYyByb2xsU2FuaXR5TG9zcyAoKSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3lzdGVtLnNhbml0eUxvc3NcclxuICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICcnKSByZXR1cm5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gU2FuQ2hlY2tDYXJkLnRlbXBsYXRlXHJcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXHJcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcclxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlYWRpbmdNeXRob3NUb21lJywge1xyXG4gICAgICAgIGJvb2s6IHRoaXMubmFtZVxyXG4gICAgICB9KSxcclxuICAgICAgY29udGVudDogaHRtbFxyXG4gICAgfSlcclxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxyXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgY29uc3Qgc2FuaXR5TG9zcyA9IChhd2FpdCBuZXcgUm9sbCh2YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxyXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cclxuICAgICAgaHRtbC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcclxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcclxuICAgICAgICAgIHNhbkRhdGE6IHtcclxuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxyXG4gICAgICAgICAgICBzYW5NYXg6IHNhbml0eUxvc3NcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXHJcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxyXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5yb2xsU2FuTG9zcygpXHJcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgYSB0YWJsZSBpbiB0aGUgY2hhdCB3aXRoIGFsbCBza2lsbCBkZXZlbG9wbWVudHMgb2J0YWluZWRcclxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGRldmVsb3BtZW50c1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXHJcbiAgICovXHJcbiAgYXN5bmMgc2hvd0RldmVsb3BtZW50c1RhYmxlIChkZXZlbG9wbWVudHMpIHtcclxuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXHJcbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xyXG4gICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcclxuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGV2ZWxvcG1lbnQuZ2FpbiA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBgKyR7ZGV2ZWxvcG1lbnQuZ2Fpbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXHJcbiAgICAgICAgKX1gXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXZlbG9wbWVudC5odG1sJ1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7IGRldmVsb3BtZW50cyB9KVxyXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcclxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxyXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXHJcbiAgICAgIGNvbnRlbnQ6IGh0bWxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBhdHRlbXB0U3BlbGxMZWFybmluZyAoaWQpIHtcclxuICAgIGlmICghdGhpcy5pc093bmVkKSB7XHJcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cclxuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSB7XHJcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cclxuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcclxuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXHJcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBjb25zdCBzcGVsbCA9IHRoaXMuc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHtcclxuICAgICAgcmV0dXJuIHNwZWxsLl9pZCA9PT0gaWRcclxuICAgIH0pXHJcbiAgICBpZiAoc3BlbGwpIHtcclxuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcclxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXHJcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcclxuICAgICAgY2hlY2sucGFyZW50ID0gdGhpcy51dWlkXHJcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XHJcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxyXG4gICAgICAgIHNwZWxsOiBzcGVsbC5uYW1lXHJcbiAgICAgIH0pXHJcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnU1BFTExfTEVBUk5JTkcnXHJcbiAgICAgIGNoZWNrLnNwZWxsID0gc3BlbGxcclxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxyXG4gICAgICBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIExpc3RlbiB0byBjaGFuZ2VzIG9uIHRoZSBjaGVjayBjYXJkICovXHJcbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xyXG4gICAgY29uc3QgY2hlY2sgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbClcclxuXHJcbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXHJcbiAgICBpZiAoY2hlY2sucGFzc2VkKSB7XHJcbiAgICAgIGlmIChjaGVjay5jb250ZXh0ID09PSAnSU5JVElBTF9SRUFESU5HJykge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxyXG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdTUEVMTF9MRUFSTklORycpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ncmFudFNwZWxsTGVhcm5pbmcoY2hlY2suc3BlbGwpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBkZWVwQ2xvbmUsIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCBIb29rcywgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCBzb2NrZXRsaWIsIHVpICovXHJcblxyXG5jb25zdCBFQ0NfQ0xBU1MgPSAnZW5oYW5jZWQtY2hhdC1jYXJkJ1xyXG5cclxuY29uc3QgUEVSTUlTU0lPTl9UWVBFID0ge1xyXG4gIEdNOiAnZ20nLCAvLyB1c2VyIGlzIEdNXHJcbiAgTk9UX0dNOiAnIWdtJywgLy8gdXNlciBpcyBOT1QgZ20gKGhpZGUgdG8gR00gaW4gY2FzZSBvZiB2aXNpYmlsaXR5KVxyXG4gIFNQRUFLRVI6ICdzcGVha2VyJywgLy8gdGhlIHNwZWFrZXIgaXMgYW4gYWN0b3IgY29udHJvbGVkL293bmVkIGJ5IHRoZSB1c2VyXHJcbiAgVVNFUjogJ3VzZXInLCAvLyB0aGUgdXNlciBpcyB0aGUgbWVzc2FnZSdzIGF1dGhvclxyXG4gIEVWRVJZT05FOiAnYWxsJywgLy8gZXF1aXZhbGVudCB0byBlbXB0eSBzdHJpbmdcclxuICBCTEFDS0xJU1Q6ICdibGFja2xpc3QnIC8vIGludmVydCB0aGUgbG9naWNcclxufVxyXG5cclxuY29uc3QgU1RBVEUgPSB7XHJcbiAgT046ICdzd2l0Y2hlZC1vbicsXHJcbiAgT0ZGOiAnc3dpdGNoZWQtb2ZmJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdEVDQyAoLi4uY2FyZGNsYXNzKSB7XHJcbiAgLy8gSG9va3Mub25jZSgnaW5pdCcsIGZ1bmN0aW9uICgpIHtcclxuICAvLyB9KVxyXG5cclxuICBIb29rcy5vbigncmVuZGVyQ2hhdExvZycsIChhcHAsIGh0bWwsIGRhdGEpID0+XHJcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLmluamVjdENTUyhhcHAsIGh0bWwsIGRhdGEpXHJcbiAgKVxyXG5cclxuICBIb29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnJlZ2lzdGVyKGNhcmRjbGFzcylcclxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0ID0gc29ja2V0bGliLnJlZ2lzdGVyU3lzdGVtKGdhbWUuc3lzdGVtLmlkKSAvLyBTb2NrZXQgaXMgYXR0YWNoZWQgdG8gY3VycmVudCBzeXN0ZW1cclxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCd1cGRhdGVNZXNzYWdlJywgdXBkYXRlTWVzc2FnZSlcclxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdHTVVwZGF0ZScsIEdNVXBkYXRlKVxyXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ2FkdmlzZScsIGFkdmlzZSlcclxuICAgIC8vIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcclxuICB9KVxyXG5cclxuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxyXG4gICAgRW5oYW5jZWRDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXHJcbiAgKVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlIChtZXNzYWdlSWQsIG5ld0NvbnRlbnQpIHtcclxuICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcclxuXHJcbiAgYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcclxuICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnRcclxuICB9KVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBHTVVwZGF0ZSAoZGF0YSwgb3B0aW9ucywgY2FyZENsYXNzTmFtZSwgbWVzc2FnZUlkID0gdW5kZWZpbmVkKSB7XHJcbiAgY29uc3QgY2FyZCA9IGF3YWl0IEVuaGFuY2VkQ2hhdENhcmQuZnJvbURhdGEoXHJcbiAgICBkYXRhLFxyXG4gICAgb3B0aW9ucyxcclxuICAgIGNhcmRDbGFzc05hbWUsXHJcbiAgICBtZXNzYWdlSWRcclxuICApXHJcbiAgYXdhaXQgY2FyZC5HTVVwZGF0ZSgpXHJcbiAgLy8gY29uc3QgZGlmZiA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCggZGF0YSwgY2FyZC50b09iamVjdCgpKVxyXG4gIHJldHVybiBjYXJkLnRvT2JqZWN0KClcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYWR2aXNlICgpIHt9XHJcblxyXG5jbGFzcyBFbmhhbmNlZENoYXRDYXJkTGliIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLnR5cGVzID0gbmV3IE1hcCgpXHJcbiAgICB0aGlzLnNvY2tldCA9IG51bGxcclxuICAgIC8vIHRoaXMuZW5oYW5jZWRDaGF0Q2FyZENsYXNzID0gRW5oYW5jZWRDaGF0Q2FyZFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGluamVjdENTUyAoKSB7XHJcbiAgICBsZXQgc3R5bGUgPSAkKCdoZWFkJykuZmluZCgnc3R5bGUnKVxyXG4gICAgaWYgKCFzdHlsZT8ubGVuZ3RoKSB7XHJcbiAgICAgICQoJ2hlYWQnKS5hcHBlbmQoJCgnPHN0eWxlICB0eXBlPVwidGV4dC9jc3NcIj48L3N0eWxlPicpKVxyXG4gICAgICBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXHJcbiAgICB9XHJcbiAgICBzdHlsZS5hcHBlbmQoXHJcbiAgICAgIGAuZWNjLXJlc3RyaWN0ZWQge2NvbG9yOiByZWR9XHJcbiAgICAuZWNjLXJlc3RyaWN0ZWQ6aG92ZXIge2N1cnNvcjogbm90LWFsbG93ZWR9YFxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldCBzb2NrZXQgKHgpIHtcclxuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYikge1xyXG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxyXG4gICAgfVxyXG4gICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQgPSB4XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IHNvY2tldCAoKSB7XHJcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRUNDIG5vdCBJbml0aWFsaXplZCcpXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRUNDIG5vIHNvY2tldCcpXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCB0eXBlcyAoKSB7XHJcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcclxuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYiA9IG5ldyBFbmhhbmNlZENoYXRDYXJkTGliKClcclxuICAgIH1cclxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3RvcnMpIHtcclxuICAgIGNhcmRDb25zdHJ1Y3RvcnMuZm9yRWFjaChjYXJkQ29uc3RydWN0b3IgPT4ge1xyXG4gICAgICBpZiAoIUVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuZ2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lKSkge1xyXG4gICAgICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuc2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lLCBjYXJkQ29uc3RydWN0b3IpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyBzdGF0aWMgZ21fb25Ub2dnbGUgKGRhdGEpe1xyXG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZ21fb25Ub2dnbGUnKVxyXG4gIC8vIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QnlQYXRoIChvYmosIHBhdGgsIHZhbHVlKSB7XHJcbiAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcclxuICBsZXQgbyA9IG9ialxyXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XHJcbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV0gPSB2YWx1ZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCeVBhdGggKG9iaiwgcGF0aCkge1xyXG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXHJcbiAgbGV0IG8gPSBvYmpcclxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICBvID0gb1twYXJ0c1tpXV1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XHJcbiAgLy8gc3RhdGljIHJlZ2lzdGVyIChjYXJkQ29uc3RydWN0b3IpIHtcclxuICAvLyAgIEVuaGFuY2VkQ2hhdENhcmRMaWIucmVnaXN0ZXIoY2FyZENvbnN0cnVjdG9yKVxyXG4gIC8vIH1cclxuXHJcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhXHJcbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncykgdGhpcy5kYXRhLmZsYWdzID0ge31cclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgb25seSBvbmNlIGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2UgdG8gY2hhdC5cclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBhc3luYyBpbml0aWFsaXplICgpIHt9XHJcblxyXG4gIGdldCBvcHRpb25zICgpIHtcclxuICAgIHJldHVybiBtZXJnZU9iamVjdCh0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKVxyXG4gIH1cclxuXHJcbiAgc2V0IG9wdGlvbnMgKHgpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSB4XHJcbiAgfVxyXG5cclxuICBnZXQgdGVtcGxhdGUgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzPy5qb2luKCcgJylcclxuICB9XHJcblxyXG4gIGdldCBzcGVha2VyICgpIHtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMub29jKSByZXR1cm4gZ2FtZS51c2VyXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmXHJcbiAgICAgIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHRoaXMub3B0aW9ucy5zcGVha2VyKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdhbWUudXNlclxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XHJcbiAgICAvLyBhd2FpdCB0aGlzLmFzc2lnbk9iamVjdHMoKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2FyZDogdGhpcyxcclxuICAgICAgZmxhZ3M6IHRoaXMuZmxhZ3MsXHJcbiAgICAgIGRhdGE6IHRoaXMudG9PYmplY3QoKSxcclxuICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxyXG4gICAgICBjc3M6IHRoaXMuY3NzQ2xhc3NlcyxcclxuICAgICAgdXNlcjogZ2FtZS51c2VyLFxyXG4gICAgICBzcGVha2VyOiB0aGlzLnNwZWFrZXJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvT2JqZWN0ICgpIHtcclxuICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm5cclxuICAgIGNvbnN0IGRhdGEgPSB7fVxyXG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkpIHtcclxuICAgICAgY29uc3QgdiA9IHRoaXMuZGF0YVtrXVxyXG4gICAgICBpZiAodiBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgIGRhdGFba10gPSB2LnRvT2JqZWN0ID8gdi50b09iamVjdCgpIDogZGVlcENsb25lKHYpXHJcbiAgICAgIH0gZWxzZSBkYXRhW2tdID0gdlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xyXG4gICAgLy8gTWFwIGVjYyBjYXJkIHR5cGUgaWYgbm90IHJlZ2lzdGVyZWQgYWxyZWFkeVxyXG4gICAgLy8gdGhpcy5yZWdpc3RlckVDQ0NsYXNzKClcclxuXHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKVxyXG5cclxuICAgIC8vIFB1Ymxpc2ggYnkgY3VycmVudCB1c2VyIGJ5IGRlZmF1bHQgdW5sZXNzIG9wdGlvbnMuR01jaGF0Q2FyZFxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0RGF0YSgpXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcclxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cclxuICAgIGlmICh0aGlzLm9wdGlvbnMuYXR0YWNoT2JqZWN0KSB7XHJcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXHJcbiAgICB9XHJcbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxyXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXHJcblxyXG4gICAgY29uc3Qgc3BlYWtlciA9XHJcbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmICF0aGlzLm9wdGlvbnMub29jXHJcbiAgICAgICAgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHRoaXMub3B0aW9ucy5zcGVha2VyKVxyXG4gICAgICAgIDoge31cclxuXHJcbiAgICAvLyBjb25zdCB1c2VySWQgPSB0aGlzLm9wdGlvbnMudXNlcklkID8gdGhpcy5vcHRpb25zLnVzZXJJZCA6IGdhbWUudXNlci5pZFxyXG5cclxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcclxuICAgICAge1xyXG4gICAgICAgIC8vIHVzZXI6IHVzZXJJZCxcclxuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXHJcbiAgICAgICAgc3BlYWtlcixcclxuICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMudGl0bGUpLFxyXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcclxuICAgICAgfSxcclxuICAgICAgb3B0aW9ubmFsQ2hhdERhdGFcclxuICAgIClcclxuXHJcbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcclxuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykgY2hhdERhdGEud2hpc3BlciA9IFtnYW1lLnVzZXIuaWRdXHJcbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxyXG5cclxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xyXG4gICAgICByZXR1cm4gbXNnXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgYXR0YWNoT2JqZWN0ID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIC8vIFRPRE8gdGhlIHdob2xlIGZ1bmN0aW9uIGhhcyB0byBiZSBleGVjdXRlZCBieSBHTSBpZiBvcHRpb25zLkdNY2hhdENhcmRcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcHV0ZSkgYXdhaXQgdGhpcy5sb2NhbENvbXB1dGUoKVxyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5HTVVwZGF0ZSkgYXdhaXQgdGhpcy5FeGVjdXRlR01VcGRhdGUoKVxyXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkge1xyXG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXREYXRhKClcclxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIGRhdGEpXHJcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXHJcblxyXG4gICAgICAvLyBBdHRhY2ggdGhlIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cclxuICAgICAgaWYgKGF0dGFjaE9iamVjdCAmJiAhdGhpcy5kYXRhLkVFQ19BQ1RJT04/LmRldGFjaERhdGEpIHtcclxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5vYmplY3REYXRhU3RyaW5nKVxyXG4gICAgICB9XHJcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXHJcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMub3B0aW9ucy5jbGFzc2VzKVxyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxyXG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldC5leGVjdXRlQXNHTShcclxuICAgICAgICAndXBkYXRlTWVzc2FnZScsXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlSWQsXHJcbiAgICAgICAgaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxyXG4gICAgICApXHJcbiAgICAgIC8vIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXHJcblxyXG4gICAgICAvLyBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XHJcbiAgICAgIC8vIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUwgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxyXG4gICAgICAvLyB9KSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XHJcbiAgICAgIC8vIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XHJcbiAgICAgIC8vIHJldHVybiBtc2cgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIC8vIGh0bWwub24oXHJcbiAgICAvLyAgICdjbGljaycsXHJcbiAgICAvLyAgIGAuJHtFQ0NfQ0xBU1N9IC5lY2MtcmFkaW8tc3dpdGNoYCxcclxuICAgIC8vICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxyXG4gICAgLy8gKVxyXG4gICAgaHRtbC5vbignY2hhbmdlJywgJ2lucHV0LHNlbGVjdCx0ZXh0YXJlYScsIHRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcykpXHJcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCwgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcclxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLnN1Ym1pdGAsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXHJcbiAgICBodG1sLm9uKCdmb2N1c291dCcsIGAuJHtFQ0NfQ0xBU1N9IGlucHV0YCwgdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSlcclxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gYnV0dG9uYCwgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcclxuICAgIGh0bWwub24oJ2tleWRvd24nLCBgLiR7RUNDX0NMQVNTfSBmb3JtYCwgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBjb25zdCB2aXNpID0gaHRtbC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxyXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAvLyAgIGNvbnN0IGVsID0gdmlzaVtpXTtcclxuICAgIC8vICAgYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKVxyXG5cclxuICAgIC8vIH1cclxuXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxyXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0VmlzaWJpbGl0eShlbCkpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCdbZGF0YS1lY2MtcGVybWlzc2lvbnNdJylcclxuICAgICAgLmVhY2goYXN5bmMgKGksIGVsKSA9PiBhd2FpdCB0aGlzLnNldFBlcm1pc3Npb24oZWwpKVxyXG4gICAgaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCkuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0U3RhdGUoZWwpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZChgLiR7RUNDX0NMQVNTfSBpbnB1dFt0eXBlPVwicmFkaW9cIl1gKVxyXG4gICAgICAuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0UmFkaW9TdGF0ZShlbCkpXHJcbiAgICAvLyBodG1sLmZpbmQoYC4ke0VDQ19DTEFTU30gLmVjYy1yYWRpby1zd2l0Y2hgKS5lYWNoKCAoaSwgZWwpID0+IHRoaXMuc2V0U3RhdGUoZWwpKVxyXG4gIH1cclxuXHJcbiAgc2V0U3RhdGUgKGVsZW1lbnQpIHtcclxuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXHJcbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0LmZsYWcpIHtcclxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgIHRoaXMuZmxhZ3NbZWxlbWVudC5kYXRhc2V0LmZsYWddID8gU1RBVEUuT04gOiBTVEFURS5PRkZcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5uYW1lKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIGVsZW1lbnQuZGF0YXNldC5uYW1lKVxyXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsdWUgPyBTVEFURS5PTiA6IFNUQVRFLk9GRilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFJhZGlvU3RhdGUgKGVsZW1lbnQpIHtcclxuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5uYW1lKSByZXR1cm5cclxuICAgIGNvbnN0IHNwbGl0ZWQgPSBlbGVtZW50Lm5hbWUuc3BsaXQoJy4nKVxyXG4gICAgaWYgKHNwbGl0ZWRbMF0udG9Mb3dlckNhc2UoKSAhPT0gJ2RhdGEnKSByZXR1cm5cclxuICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YVtzcGxpdGVkWzFdXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgaWYgKHRoaXMuZGF0YVtzcGxpdGVkWzFdXSA9PT0gZWxlbWVudC52YWx1ZSkge1xyXG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0VmlzaWJpbGl0eSAoZWxlbWVudCkge1xyXG4gICAgaWYgKCFlbGVtZW50LmRhdGFzZXQuZWNjVmlzaWJpbGl0eSkgcmV0dXJuXHJcbiAgICBjb25zdCBjYW5Zb3VTZWUgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Zpc2liaWxpdHksIHRydWUpXHJcbiAgICBpZiAoIWNhbllvdVNlZSkgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRQZXJtaXNzaW9uIChlbGVtZW50KSB7XHJcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucykgcmV0dXJuXHJcbiAgICBjb25zdCBjYW5Zb3VNb2QgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKVxyXG4gICAgaWYgKCFjYW5Zb3VNb2QpIHtcclxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlY2MtcmVzdHJpY3RlZCcpXHJcbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdpbnB1dCcpKSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ3JhbmdlJykgJChlbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXHJcbiAgICAgICAgZWxzZSAkKGVsZW1lbnQpLmF0dHIoJ3JlYWRvbmx5JywgdHJ1ZSlcclxuICAgICAgfVxyXG4gICAgICBpZiAoJChlbGVtZW50KS5pcygnc2VsZWN0JykpICQoZWxlbWVudCkuYXR0cignZGlzYWJsZWQnLCB0cnVlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBhcyBwZXJtaXNzaW9uIGFnYWluc3QgYSBzdHJpbmcgb2YgYWxsb3dlZCBwZXJzb25zLlxyXG4gICAqIElmIHRoZSBzdHJpbmcgaXMgZW1wdHkgcGVybWlzc2lvbiBhcmUgYWxsIGdyYW50ZWRcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdHJpY3RlZFRvICAgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgc2V0IG9mIHBsYXllciBhbGxvd2VkLiBWYWx1ZSBjYW4gYmUgb3duZXIsIGdtLCBwbGF5ZXJzLCB1dWlkIHNlcGFyYXRlZCBieSBzcGFjZVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaW9uICAgICAgICBpZiB0cnVlIGdtIHdpbGwgYmUgY29uc2lkZXJlZCBmb3IgcGVybWlzc2lvbnMuIGZhbHNlID0gZ20gaGFzIGFsd2F5cyByaWdodC4gdHJ1ZSBHTSBwZXJtaXNzaW9uIHdpbGwgYmUgY2hlY2tlZFxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgYXN5bmMgaGFzUGVybSAocmVzdHJpY3RlZFRvLCB2aXNpb24gPSBmYWxzZSkge1xyXG4gICAgaWYgKCFyZXN0cmljdGVkVG8ubGVuZ3RoKSByZXR1cm4gdHJ1ZVxyXG4gICAgbGV0IHBlcm1pc3Npb25zQXJyYXkgPSByZXN0cmljdGVkVG8uc3BsaXQoJyAnKVxyXG4gICAgY29uc3Qgd2hpdGVMaXN0ID0gIXBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkJMQUNLTElTVClcclxuICAgIGlmICghd2hpdGVMaXN0KSB7XHJcbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcclxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1RcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIGlmICghdmlzaW9uKSByZXR1cm4gdHJ1ZSAvLyBHTSBjYW4gYWx3YXlzIG1vZGlmeSBldmVyeXRoaW5nICEgTmFoXHJcbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5HTSkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcclxuICAgICAgfVxyXG4gICAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuTk9UX0dNKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuR00pXHJcbiAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXHJcbiAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLk5PVF9HTVxyXG4gICAgKVxyXG5cclxuICAgIC8vICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy9JZiBwYXNzIHRoZSBmaWx0ZXIgcmV0dXJuIGZhbHNlIHVubGVzcyBpdCdzIGEgYmxhY2tsaXN0XHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9IFBFUk1JU1NJT05fVFlQRS5HTSlcclxuICAgIC8vIH1cclxuXHJcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuVVNFUikpIHtcclxuICAgICAgaWYgKHRoaXMubWVzc2FnZS5pc0F1dGhvcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0IC8vIGlzQXV0aG9yIHZzIHVzZXIuaXNPd25lciA/XHJcbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcclxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5VU0VSXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuU1BFQUtFUikpIHtcclxuICAgICAgY29uc3Qgc3BlYWtlciA9IHRoaXMubWVzc2FnZS5kYXRhLnNwZWFrZXJcclxuICAgICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xyXG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQoXHJcbiAgICAgICAgICBgU2NlbmUuJHtzcGVha2VyLnNjZW5lfS5Ub2tlbi4ke3NwZWFrZXIudG9rZW59YFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiAoYWN0b3IpIHtcclxuICAgICAgICAgIGlmIChhY3Rvci5pc093bmVyKSByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoc3BlYWtlci5hY3Rvcikge1xyXG4gICAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXHJcbiAgICAgICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIGVsc2UgaWYgKHNwZWFrZXIudXNlcikge1xyXG4gICAgICAvLyAgIGlmIChnYW1lLnVzZXIuaWQgPT0gc3BlYWtlci51c2VyKSByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcclxuICAgICAgLy8gfVxyXG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXHJcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuU1BFQUtFUlxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICAvLyBBbGwgZmlsdGVyIHBhc3NlZCwgYXJyYXkgc2hvdWxkIGNvbnRhaW5zIG9ubHkgdXVpZHMgb3IgYWN0b3IvdG9rZW4gaWRzXHJcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5sZW5ndGgpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgdXVpZCA9IHBlcm1pc3Npb25zQXJyYXlbaV1cclxuICAgICAgICBsZXQgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZCh1dWlkKVxyXG4gICAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHV1aWQpXHJcbiAgICAgICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgICAgICByZXR1cm4gYWN0b3IuaXNPd25lclxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGBVbmFibGUgdG8gZmluZCBhY3RvciAke3V1aWR9YClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vIElmIHBhc3MgdGhlIGZpbHRlciByZXR1cm4gZmFsc2UgdW5sZXNzIGl0J3MgYSBibGFja2xpc3RcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXHJcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSBodG1sTWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7RUNDX0NMQVNTfWApXHJcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IEVuaGFuY2VkQ2hhdENhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChodG1sQ2FyZEVsZW1lbnQpXHJcbiAgICBpZiAoIWNhcmQpIHJldHVyblxyXG4gICAgY2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGZsYWdzICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuZmxhZ3NcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZS5cclxuICAgKiBAcmV0dXJuc1xyXG4gICAqL1xyXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cclxuICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgbG9jYWwgY2xpZW50XHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cclxuICAgKiBUaGlzIGlzIGNhbGxlZCBieSBvbmUgb2YgdGhlIEdNIGNsaWVudHMuXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBhc3luYyBHTVVwZGF0ZSAoKSB7fVxyXG5cclxuICBhc3luYyBFeGVjdXRlR01VcGRhdGUgKCkge1xyXG4gICAgY29uc3QgbmV3RGF0YSA9IGF3YWl0IGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKFxyXG4gICAgICAnR01VcGRhdGUnLFxyXG4gICAgICB0aGlzLnRvT2JqZWN0KCksXHJcbiAgICAgIHRoaXMuX29wdGlvbnMsXHJcbiAgICAgIHRoaXMuY29uc3RydWN0b3IubmFtZSxcclxuICAgICAgdGhpcy5tZXNzYWdlSWRcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmRhdGEgPSBuZXdEYXRhXHJcbiAgICBhd2FpdCB0aGlzLmFzc2lnbk9iamVjdHMoKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXHJcbiAgICogaWYgYSBtZXRob2Qgd2l0aCB0aGF0IG5hbWUgZXhpc3QgaXQgd2lsbCBiZSB0cmlnZ2VyZWQuXHJcbiAgICovXHJcbiAgYXN5bmMgX29uQnV0dG9uIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuXHJcbiAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJyAvLyBBdm9pZCBtdWx0aXBsZSBwdXNoXHJcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldC5hY3Rpb25cclxuXHJcbiAgICBsZXQgZm9ybVVwZGF0ZVxyXG4gICAgbGV0IGFjdGlvblVwZGF0ZSA9IGZhbHNlXHJcblxyXG4gICAgLy8gaWYgKCdzdWJtaXQnID09IHRhcmdldC50eXBlKSB7XHJcbiAgICAvLyAgIGNvbnNvbGUud2FybignQnV0dG9uIGlzIGFsc28gYSBzdWJtaXQnKVxyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIFBlcmZvcm0gY2FyZCB1cGRhdGUgZmlyc3RcclxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXHJcbiAgICBpZiAoY2FyZCkgZm9ybVVwZGF0ZSA9IHRoaXMuX3VwZGF0ZShjYXJkKVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYENvdWxkIG5vdCBmaW5kIGEgRUVDIGNsYXNzIGZvciB0aGlzIGNhcmQ6ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWBcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9yaWdpbmFsRGlzcGxheVN0eWxlID0gdGFyZ2V0LnN0eWxlLmRpc3BsYXlcclxuXHJcbiAgICBpZiAoIWFjdGlvbikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ25vIGFjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBidXR0b24nKVxyXG4gICAgICBpZiAoIWZvcm1VcGRhdGUpIHJldHVybiAvLyBJZiB0aGUgZm9ybSB3YXMgdXBkYXRlZCB3ZSBzdGlsbCB1cGRhdGUgdGhlIGNhcmRcclxuICAgIH1cclxuICAgIGlmICghdGhpc1thY3Rpb25dKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybihgbm8gJHthY3Rpb259IGFjdGlvbiBmb3VuZCBmb3IgdGhpcyBjYXJkYClcclxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1thY3Rpb25dKSB7XHJcbiAgICAgIGFjdGlvblVwZGF0ZSA9IGF3YWl0IHRoaXNbYWN0aW9uXSh7IGV2ZW50LCB1cGRhdGVDYXJkOiBmYWxzZSB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChmb3JtVXBkYXRlIHx8IGFjdGlvblVwZGF0ZSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgICBlbHNlIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5U3R5bGVcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSBldmVudFxyXG4gICAqIEByZXR1cm5zIGZhbHNlIGlmIGtleSBpcyBlbnRlciB0byBhdm9pZCBnbG9iYWwgc3VibWlzc2lvblxyXG4gICAqL1xyXG4gIF9vbktleSAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHRoaXMuX29uU3VibWl0KGV2ZW50KVxyXG4gICAgcmV0dXJuIGV2ZW50LmtleSAhPT0gJ0VudGVyJ1xyXG4gIH1cclxuXHJcbiAgX29uQ2hhbmdlIChldmVudCkge1xyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fb25TdWJtaXQoZXZlbnQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25TdWJtaXQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWVcclxuICAgIGlmICh0YWdOYW1lID09PSAnQlVUVE9OJyAmJiAnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIC8vXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcclxuICAgIGlmICghY2FyZCkgcmV0dXJuXHJcbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXHJcbiAgICBpZiAodXBkYXRlcykgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZSB0aGUgZm9ybSBmcm9tIHRoZSBjYXJkIGFuZCB1cGRhdGUgdGhlIGRhdGEgc3RydWN0dXJlXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgX3VwZGF0ZSAoY2FyZCkge1xyXG4gICAgY29uc3QgZm9ybXMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKVxyXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBmb3JtID0gZm9ybXNbaV1cclxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxyXG4gICAgICBjb25zdCBkYXRhID0gZmQub2JqZWN0XHJcbiAgICAgIC8vIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QoXHJcbiAgICAgIC8vICAgdGhpcy5kYXRhLFxyXG4gICAgICAvLyAgIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpXHJcbiAgICAgIC8vIClcclxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBrZXkpXHJcbiAgICAgICAgaWYgKCEob2xkVmFsdWUgPT09IHZhbHVlKSkge1xyXG4gICAgICAgICAgc2V0QnlQYXRoKHRoaXMsIGtleSwgdmFsdWUpXHJcbiAgICAgICAgICB1cGRhdGVzID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZXNcclxuICB9XHJcblxyXG4gIGdldCBtZXNzYWdlICgpIHtcclxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxyXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHNldCBtZXNzYWdlICh4KSB7XHJcbiAgICB0aGlzLl9tZXNzYWdlID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XHJcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXHJcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcclxuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYXR0YWNoT2JqZWN0OiB0cnVlLFxyXG4gICAgICBjbGFzc2VzOiBbRUNDX0NMQVNTXSxcclxuICAgICAgZXhjbHVkZTogW10sXHJcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJyxcclxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXHJcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcclxuICAgICAgb29jOiBmYWxzZSwgLy8gICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vb2M9ZmFsc2VdICBVc2UgdGhlIHNwZWFrZXIvZ2V0c3BlYWtlci4gaWYgdHJ1ZSB1c2UgdGhlIHVzZXIgaW5zdGVhZFxyXG4gICAgICBjb21wdXRlOiB0cnVlLCAvLyAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY29tcHV0ZS5sb2NhbD10cnVlXSBpbnZvcXVlIHRoZSBjb21wdXRlIG1ldGhvZCBhcyBsb2NhbCB1c2VyID0+IG5lZWQgdG8gb3ZlcnJpZGUgbG9jYWxDb21wdXRlXHJcbiAgICAgIEdNVXBkYXRlOiBmYWxzZSAvLyAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY29tcHV0ZS5HTT1mYWxzZV0gaW52b3F1ZSB0aGUgR01VcGRhdGUgbWV0aG9kIGFzIEdNID0+IG5lZWQgdG8gb3ZlcnJpZGUgR01VcGRhdGVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBvYmplY3REYXRhU3RyaW5nICgpIHtcclxuICAgIGNvbnN0IHNhdmVEYXRhID0ge1xyXG4gICAgICBkYXRhOiB0aGlzLmRhdGEsXHJcbiAgICAgIG9wdGlvbnM6IHRoaXMuX29wdGlvbnNcclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzYXZlRGF0YSwgKGtleSwgdmFsdWUpID0+IHtcclxuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldCByb2xsTW9kZSAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcclxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxyXG4gIH1cclxuXHJcbiAgc2V0IHJvbGxNb2RlICh4KSB7XHJcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxyXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxyXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxyXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcclxuICAgIHJldHVybiBjYXJkXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmRhdGEuY29udGVudClbMF1cclxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXHJcbiAgICBjYXJkLm1lc3NhZ2UgPSBtZXNzYWdlXHJcbiAgICByZXR1cm4gY2FyZFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGh0bW1sQ2FyZCkge1xyXG4gICAgaWYgKCFodG1tbENhcmQpIHJldHVyblxyXG4gICAgaWYgKCFodG1tbENhcmQuZGF0YXNldC5lY2NDbGFzcykgcmV0dXJuXHJcbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkgcmV0dXJuXHJcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSlcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBodG1tbENhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxyXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZnJvbURhdGEoXHJcbiAgICAgIGNhcmREYXRhLmRhdGEsXHJcbiAgICAgIGNhcmREYXRhLm9wdGlvbnMsXHJcbiAgICAgIGh0bW1sQ2FyZC5kYXRhc2V0LmVjY0NsYXNzLFxyXG4gICAgICBtZXNzYWdlSWRcclxuICAgIClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSwgb3B0aW9ucywgY2FyZENsYXNzTmFtZSwgbWVzc2FnZUlkID0gdW5kZWZpbmVkKSB7XHJcbiAgICBjb25zdCBDYXJkQ2xhc3MgPSBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzLmdldChjYXJkQ2xhc3NOYW1lKVxyXG5cclxuICAgIGlmICghQ2FyZENsYXNzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVua25vd24gY2hhdCBjYXJkIHR5cGU6ICR7Y2FyZENsYXNzTmFtZX1gKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZENsYXNzKGRhdGEsIG9wdGlvbnMpXHJcbiAgICBpZiAobWVzc2FnZUlkKSBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxyXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3RzKClcclxuICAgIHJldHVybiBjYXJkXHJcbiAgfVxyXG5cclxuICBzZXREYXRhIChuYW1lKSB7XHJcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXHJcbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgdHJ1ZSlcclxuICB9XHJcblxyXG4gIHVuc2V0RGF0YSAobmFtZSkge1xyXG4gICAgaWYgKCFuYW1lICYmICEoJC50eXBlKG5hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxyXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIGZhbHNlKVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRGF0YSAobmFtZSkge1xyXG4gICAgaWYgKCFuYW1lICYmICEoJC50eXBlKG5hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxyXG4gICAgY29uc3QgdmFsdWUgPSBnZXRCeVBhdGgodGhpcywgbmFtZSlcclxuICAgIHNldEJ5UGF0aCh0aGlzLCBuYW1lLCAhdmFsdWUpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XHJcbiAgICAvLyBjb25zdCBhbnN3ZXIgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5leGVjdXRlQXNHTSgnZ21fb25Ub2dnbGUnLCB7XHJcbiAgICAvLyAgIGV2ZW50OiBldmVudCxcclxuICAgIC8vICAgY2FyZDogdGhpc1xyXG4gICAgLy8gfSlcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBpZiAoJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiB0aGlzLl9vbkJ1dHRvbihldmVudClcclxuICAgIGlmIChcclxuICAgICAgdGFyZ2V0ICYmXHJcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiZcclxuICAgICAgIWdhbWUudXNlci5pc0dNXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xyXG4gICAgICA/IGBkYXRhLmZsYWdzLiR7dGFyZ2V0LmRhdGFzZXQuZmxhZ31gXHJcbiAgICAgIDogdGFyZ2V0LmRhdGFzZXQubmFtZVxyXG4gICAgaWYgKCFuYW1lKSByZXR1cm5cclxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5jbG9zZXN0KCcuZWNjLXJhZGlvJylcclxuICAgIGlmICghdG9nZ2xlKSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlRGF0YShuYW1lKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZWNjLXN3aXRjaCcpXHJcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XHJcbiAgICAgICAgY29uc3QgYk5hbWUgPSBiLmRhdGFzZXQuZmxhZ1xyXG4gICAgICAgICAgPyBgZGF0YS5mbGFncy4ke2IuZGF0YXNldC5mbGFnfWBcclxuICAgICAgICAgIDogYi5kYXRhc2V0Lm5hbWVcclxuICAgICAgICB0aGlzLnVuc2V0RGF0YShiTmFtZSlcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNldERhdGEobmFtZSlcclxuICAgIH1cclxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XHJcbiAgICAgIGlmIChjYXJkKSB0aGlzLl91cGRhdGUoY2FyZClcclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBTdWJtaXQgb24gY2hhbmdlID9cclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXHJcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcclxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcclxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9KSB7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhXHJcbiAgfVxyXG5cclxuICBfZmV0Y2ggKCkge1xyXG4gICAgaWYgKCF0aGlzLl9kb2MgJiYgdGhpcy5kYXRhLmRvY1V1aWQpIHtcclxuICAgICAgdGhpcy5fZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xyXG4gICAgICBpZiAodGhpcy5fZG9jKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLl9kb2MuY29uc3RydWN0b3I/Lm5hbWUpIHtcclxuICAgICAgICAgIGNhc2UgJ1Rva2VuRG9jdW1lbnQnOlxyXG4gICAgICAgICAgICB0aGlzLl9hY3RvciA9IHRoaXMuX2RvYy5hY3RvclxyXG4gICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgIGNhc2UgJ0NvQ0FjdG9yJzpcclxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2NcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgdGhpcy5fYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEuZG9jVXVpZClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBhY3RvciAoKSB7XHJcbiAgICB0aGlzLl9mZXRjaCgpXHJcbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcclxuICB9XHJcblxyXG4gIGdldCBpc0FjdG9yICgpIHtcclxuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzQWN0aXZlICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuYWN0aXZlIHx8IGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQga2V5ICgpIHtcclxuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUuYWN0b3JLZXlcclxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGljb24gKCkge1xyXG4gICAgaWYgKCF0aGlzLmlzQWN0b3IpIHtcclxuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUuaW1nXHJcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgZHJpdmVyICgpIHtcclxuICAgIGlmICghdGhpcy5fZHJpdmVyKSB7XHJcbiAgICAgIHRoaXMuX2RyaXZlciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2RyaXZlclxyXG4gIH1cclxuXHJcbiAgZ2V0IHZlaGljbGUgKCkge1xyXG4gICAgaWYgKHRoaXMuZGF0YS52ZWhpY2xlS2V5KSB7XHJcbiAgICAgIHRoaXMuX3ZlaGljbGUgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEudmVoaWNsZUtleSlcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl92ZWhpY2xlXHJcbiAgfVxyXG5cclxuICBnZXQgaGFzQWN0b3IgKCkge1xyXG4gICAgcmV0dXJuICEhdGhpcy5hY3RvclxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc1ZlaGljbGUgKCkge1xyXG4gICAgcmV0dXJuICEhdGhpcy52ZWhpY2xlXHJcbiAgfVxyXG5cclxuICBnZXQgbmFtZSAoKSB7XHJcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLm5hbWVcclxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXHJcbiAgICByZXR1cm4gdGhpcy5kYXRhLm5hbWUgfHwgdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgbW92ICgpIHtcclxuICAgIGlmICghdGhpcy5kYXRhLm1vdikge1xyXG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSB0aGlzLmRhdGEubW92ID0gdGhpcy52ZWhpY2xlLm1vdlxyXG4gICAgICBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB0aGlzLmRhdGEubW92ID0gdGhpcy5hY3Rvci5tb3ZcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kYXRhLm1vdikge1xyXG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSkpIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IHRydWVcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gZmFsc2VcclxuICAgICAgICB0aGlzLmRhdGEubW92ID0gdW5kZWZpbmVkXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdlxyXG4gIH1cclxuXHJcbiAgZ2V0IHV1aWQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YS51dWlkXHJcbiAgfVxyXG5cclxuICBnZXQgaGFzTWF4Qm9udXNEaWNlICgpIHtcclxuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXHJcbiAgfVxyXG5cclxuICBnZXQgYm9udXNEaWNlICgpIHtcclxuICAgIGlmIChcclxuICAgICAgaXNOYU4odGhpcy5kYXRhLmJvbnVzRGljZSkgfHxcclxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA8IDAgfHxcclxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA+IDJcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5ib251c0RpY2VcclxuICB9XHJcblxyXG4gIHNldCBib251c0RpY2UgKHgpIHtcclxuICAgIGlmIChpc05hTih4KSkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdCb251cyBkaWNlIGNhbiBPbmx5IGJlIGEgbnVtYmVyJylcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBpZiAoeCA+IDIpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTWF4IDIgYm9udXMgZGljZScpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKHggPCAwKSB7XHJcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ05vIG5lZ2F0aXYgYm9udXMgZGljZScpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHhcclxuICB9XHJcblxyXG4gIGdldCBocCAoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YS5ocCkge1xyXG4gICAgICB0aGlzLmRhdGEuaHAgPSAwXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xyXG4gICAgICB0aGlzLmRhdGEuaHAgPSB0aGlzLmFjdG9yLmhwXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5ocFxyXG4gIH1cclxuXHJcbiAgc2V0IGhwICh4KSB7XHJcbiAgICB0aGlzLmRhdGEuaHAgPSB4XHJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xyXG4gICAgICB0aGlzLmFjdG9yLnNldEhwKHgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRCb251c0RpY2UgKCkge1xyXG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPj0gMikge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdBbHJlYWR5IGhhdmUgbWF4IGJvbnVzIGRpY2UnKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgKz0gMVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQm9udXNEaWNlICgpIHtcclxuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlIDw9IDApIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIDAgYm9udXMgZGljZScpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSAtPSAxXHJcbiAgfVxyXG5cclxuICByZXNldEJvbnVzRGljZSAoKSB7XHJcbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlID0gMFxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc0JvbnVzRGljZSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYXNPbmVCb251c0RpY2UgfHwgdGhpcy5oYXNUd29Cb251c0RpY2VcclxuICB9XHJcblxyXG4gIGdldCBoYXNPbmVCb251c0RpY2UgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDFcclxuICB9XHJcblxyXG4gIGdldCBoYXNUd29Cb251c0RpY2UgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDJcclxuICB9XHJcblxyXG4gIGdldCBjYW5Bc3Npc3QgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYXNzaXN0Py5sZW5ndGggPiAwXHJcbiAgfVxyXG5cclxuICBnZXQgY2FuQmVDYXV0aW91cyAoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuaGFzTWF4Qm9udXNEaWNlXHJcbiAgfVxyXG5cclxuICBnZXQgYXNzaXN0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuYXNzaXN0IHx8IFtdXHJcbiAgfVxyXG5cclxuICBnZXQgZGV4ICgpIHtcclxuICAgIGlmICghdGhpcy5kYXRhLmRleCkge1xyXG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlICYmIHRoaXMuaGFzRHJpdmVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuZHJpdmVyLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZGF0YS5kZXgpIHtcclxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpKSB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSB0cnVlXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IDBcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmRhdGEuZGV4XHJcbiAgfVxyXG5cclxuICBnZXQgaGFzQUd1blJlYWR5ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuaGFzQUd1blJlYWR5IHx8IGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgaW5pdGlhdGl2ZSAoKSB7XHJcbiAgICBsZXQgaW5pdCA9IHRoaXMuZGV4XHJcbiAgICBpZiAodGhpcy5oYXNBR3VuUmVhZHkpIHtcclxuICAgICAgaW5pdCArPSA1MFxyXG4gICAgfVxyXG4gICAgLy8gaWYoIHRoaXMuc3BlZWRDaGVjayl7XHJcbiAgICAvLyAgIGlmKHRoaXMuc3BlZWRDaGVjay5zY29yZSkgaW5pdCArPSB0aGlzLnNwZWVkQ2hlY2suc2NvcmUvMTAwXHJcbiAgICAvLyB9XHJcblxyXG4gICAgcmV0dXJuIGluaXRcclxuICB9XHJcblxyXG4gIGdldCBpc0NoYXNlciAoKSB7XHJcbiAgICByZXR1cm4gISF0aGlzLmRhdGEuY2hhc2VyXHJcbiAgfVxyXG5cclxuICBnZXQgaXNQcmV5ICgpIHtcclxuICAgIHJldHVybiAhdGhpcy5pc0NoYXNlclxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzVmFsaWQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzVmFsaWREZXggJiYgdGhpcy5oYXNWYWxpZE1vdlxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc1ZhbGlkRGV4ICgpIHtcclxuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc1ZhbGlkTW92ICgpIHtcclxuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc0RyaXZlciAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYXNWZWhpY2xlICYmIHRoaXMuaGFzQWN0b3JcclxuICB9XHJcblxyXG4gIGdldCBtb3ZBZGp1c3RtZW50ICgpIHtcclxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ucm9sbERhdGFTdHJpbmcpIHtcclxuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcclxuICAgICAgaWYgKHJvbGwpIHtcclxuICAgICAgICBpZiAoIXJvbGwuc3RhbmRieSkge1xyXG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcclxuICAgICAgICAgIGVsc2UgaWYgKHJvbGwuZmFpbGVkKSByZXR1cm4gLTFcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAwXHJcbiAgfVxyXG5cclxuICBnZXQgYWRqdXN0ZWRNb3YgKCkge1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGlmIChpc05hTihOdW1iZXIodGhpcy5tb3YpKSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgcmV0dXJuIE51bWJlcih0aGlzLm1vdikgKyB0aGlzLm1vdkFkanVzdG1lbnRcclxuICB9XHJcblxyXG4gIGdldCBoYXNNb3ZBZGp1c3RtZW50ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcclxuICB9XHJcblxyXG4gIGdldCBoYXNCb251c01vdiAoKSB7XHJcbiAgICBpZiAodGhpcy5kYXRhLm1vdkFkanVzdG1lbnQgPiAwKSByZXR1cm4gdHJ1ZVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgaGFzTWFsdXNNb3YgKCkge1xyXG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IG9wdGlvbnMoKXtcclxuICAvLyAgcmV0dXJuIHtcclxuICAvLyAgICBleGNsdWRlOiBbXSxcclxuICAvLyAgICBleGNsdWRlU3RhcnRXaXRoOiAnXydcclxuICAvLyAgfTtcclxuICAvLyB9XHJcblxyXG4gIC8vIGdldCBkYXRhU3RyaW5nKCl7XHJcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xyXG4gIC8vICAgIGlmKCBudWxsID09PSB2YWx1ZSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAvLyAgICBpZiggdGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAvLyAgICByZXR1cm4gdmFsdWU7XHJcbiAgLy8gIH0pO1xyXG4gIC8vIH1cclxuXHJcbiAgdG9vU2xvdyAoKSB7XHJcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBpbmNsdWRlSW5DaGFzZSAoKSB7XHJcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSBmYWxzZVxyXG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZXNjYXBlZCAoKSB7XHJcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IHRydWVcclxuICB9XHJcblxyXG4gIHNldCBzbG93ZXN0ICh4KSB7XHJcbiAgICB0aGlzLmRhdGEuc2xvd2VzdCA9IHhcclxuICB9XHJcblxyXG4gIGdldCBzbG93ZXN0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuc2xvd2VzdFxyXG4gIH1cclxuXHJcbiAgc2V0IGZhc3Rlc3QgKHgpIHtcclxuICAgIHRoaXMuZGF0YS5mYXN0ZXN0ID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IGZhc3Rlc3QgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5mYXN0ZXN0XHJcbiAgfVxyXG5cclxuICBjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMgKG1pbk1vdikge1xyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2YgdGhpcy5tb3ZlbWVudEFjdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgdHlwZW9mIHRoaXMuYWRqdXN0ZWRNb3YgPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgIGlzTmFOKG1pbk1vdilcclxuICAgICkge1xyXG4gICAgICB0aGlzLm1vdmVtZW50QWN0aW9uID0gMFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDEgKyAodGhpcy5hZGp1c3RlZE1vdiAtIG1pbk1vdilcclxuICAgIH1cclxuICAgIC8vIGlmKCB0aGlzLm1vdmVtZW50QWN0aW9uIDwgMCkgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcclxuICB9XHJcblxyXG4gIHNldCBtb3ZlbWVudEFjdGlvbiAoeCkge1xyXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0geFxyXG4gIH1cclxuXHJcbiAgZ2V0IG1vdmVtZW50QWN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25cclxuICB9XHJcblxyXG4gIHNldCBjdXJyZW50TW92ZW1lbnRBY3Rpb25zICh4KSB7XHJcbiAgICB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHhcclxuICB9XHJcblxyXG4gIGdldCBjdXJyZW50TW92ZW1lbnRBY3Rpb25zICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyB8fCAwXHJcbiAgfVxyXG5cclxuICBnZXQgaGFzTWF4TXZ0QWN0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID49IHRoaXMubW92ZW1lbnRBY3Rpb25cclxuICB9XHJcblxyXG4gIGdldCBoYXNOb012dEFjdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8PSAwXHJcbiAgfVxyXG5cclxuICBhZGRNb3ZlbWVudEFjdGlvbnMgKHggPSAxKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxyXG4gICAgaWYgKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IHRoaXMubW92ZW1lbnRBY3Rpb24pIHtcclxuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWx0ZXJNb3ZlbWVudEFjdGlvbnMgKHgpIHtcclxuICAgIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyArPSB4XHJcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xyXG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgbW92ZW1lbnRBY3Rpb25BcnJheSAoKSB7XHJcbiAgICBjb25zdCBiYXNlQXJyYXkgPSBBcnJheSh0aGlzLm1vdmVtZW50QWN0aW9uKS5maWxsKCdiYXNlJylcclxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9uczsgaSsrKSB7XHJcbiAgICAgICAgYmFzZUFycmF5W2ldID0gJ2Jhc2UgYXZhaWxhYmxlJ1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBiYXNlQXJyYXlcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMCkge1xyXG4gICAgICBjb25zdCBkZWZpY2l0QXJyYXkgPSBBcnJheShNYXRoLmFicyh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMpKS5maWxsKFxyXG4gICAgICAgICdkZWZpY2l0J1xyXG4gICAgICApXHJcbiAgICAgIHJldHVybiBkZWZpY2l0QXJyYXkuY29uY2F0KGJhc2VBcnJheSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBjc3NDbGFzcyAoKSB7XHJcbiAgICBjb25zdCBjc3NDbGFzc2VzID0gW11cclxuICAgIGlmICh0aGlzLmlzQ2hhc2VyKSBjc3NDbGFzc2VzLnB1c2goJ2NoYXNlcicpXHJcbiAgICBlbHNlIGNzc0NsYXNzZXMucHVzaCgncHJleScpXHJcbiAgICBpZiAodGhpcy5kYXRhLmV4Y2x1ZGVkKSBjc3NDbGFzc2VzLnB1c2goJ2V4Y2x1ZGVkJywgJ3Rvb19zbG93JylcclxuICAgIGlmICh0aGlzLmRhdGEuZXNjYXBlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdlc2NhcGVkJylcclxuICAgIGlmICh0aGlzLmRhdGEuZmFzdGVzdCkgY3NzQ2xhc3Nlcy5wdXNoKCdmYXN0ZXN0JylcclxuICAgIGlmICh0aGlzLmRhdGEuc2xvd2VzdCkgY3NzQ2xhc3Nlcy5wdXNoKCdzbG93ZXN0JylcclxuICAgIGlmICh0aGlzLmRhdGEuYWN0aXZlKSBjc3NDbGFzc2VzLnB1c2goJ2FjdGl2ZScpXHJcbiAgICBpZiAodGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPD0gMCkgY3NzQ2xhc3Nlcy5wdXNoKCduby1hY3Rpb25zJylcclxuICAgIHJldHVybiBjc3NDbGFzc2VzLmpvaW4oJyAnKVxyXG4gIH1cclxuXHJcbiAgZ2V0IHNwZWVkQ2hlY2sgKCkge1xyXG4gICAgY29uc3QgY2hlY2sgPSB7fVxyXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxyXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5zY29yZSkgY2hlY2suc2NvcmUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5zY29yZVxyXG4gICAgY2hlY2suY3NzQ2xhc3NlcyA9ICcnXHJcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnJvbGxEYXRhU3RyaW5nKSB7XHJcbiAgICAgIGNoZWNrLnJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcodGhpcy5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpXHJcbiAgICAgIGlmIChjaGVjay5yb2xsKSB7XHJcbiAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkgfHwgY2hlY2sucm9sbC5oYXNDYXJkKSB7XHJcbiAgICAgICAgICBjaGVjay5yb2xsZWQgPSB0cnVlXHJcbiAgICAgICAgICBjaGVjay5pbmxpbmVSb2xsID0gY2hlY2sucm9sbC5pbmxpbmVDaGVjay5vdXRlckhUTUxcclxuICAgICAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJ3JvbGxlZCdcclxuICAgICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5KSB7XHJcbiAgICAgICAgICAgIGlmIChjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcclxuICAgICAgICAgICAgICBjaGVjay5tb2RpZmllckNzcyA9ICd1cGdyYWRlJ1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoZWNrLnJvbGwuZmFpbGVkKSBjaGVjay5tb2RpZmllckNzcyA9ICdkb3duZ3JhZGUnXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICBjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcclxuICAgICAgICAgICAgICBjaGVjay5yb2xsLmZhaWxlZFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBjaGVjay5oYXNNb2RpZmllciA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHtcclxuICAgICAgY2hlY2sub3B0aW9ucyA9IFtdXHJcbiAgICAgIGZvciAoY29uc3QgYyBvZiBbJ2NvbiddKSB7XHJcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB0aGlzLmFjdG9yLmdldENoYXJhY3RlcmlzdGljKGMpXHJcbiAgICAgICAgaWYgKGNoYXJhY3RlcmlzdGljPy52YWx1ZSkgY2hlY2sub3B0aW9ucy5wdXNoKGNoYXJhY3RlcmlzdGljLmxhYmVsKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5hY3Rvci5kcml2ZVNraWxscykge1xyXG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLnBpbG90U2tpbGxzKSB7XHJcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcclxuICAgICAgfVxyXG4gICAgICBjaGVjay5oYXNPcHRpb25zID0gISFjaGVjay5vcHRpb25zLmxlbmd0aFxyXG5cclxuICAgICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxyXG4gICAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgICAgY29uc3QgZ2FtZUl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcclxuICAgICAgICAgIGlmIChnYW1lSXRlbSkgaXRlbSA9IHRoaXMuYWN0b3IuZmluZChnYW1lSXRlbS5uYW1lKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxyXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXHJcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXHJcbiAgICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXHJcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcclxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XHJcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcclxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcclxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcclxuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcclxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxyXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XHJcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcclxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcclxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdhdHRyaWJ1dGUnXHJcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXHJcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZSlcclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2l0ZW0nICYmIGl0ZW0udmFsdWUuZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xyXG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXHJcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcclxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcclxuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcclxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxyXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcclxuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxyXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxyXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xyXG4gICAgICAgICAgICBjaGVjay5pc0NoYXJhY3RlcmlzdGljID0gdHJ1ZVxyXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXHJcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcclxuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxyXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxyXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcclxuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXHJcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcclxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xyXG4gICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXHJcbiAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xyXG4gICAgICAgICAgY2hlY2sucmVmID0gaXRlbVxyXG4gICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0ubmFtZVxyXG4gICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcclxuICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXHJcbiAgICAgICAgICBjaGVjay5yZWZTZXQgPSBmYWxzZVxyXG4gICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLmJhc2VcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUgJiYgdGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSB7XHJcbiAgICAgIGNoZWNrLm5hbWUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5uYW1lXHJcbiAgICAgIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcclxuICAgICAgY2hlY2sucmVmU2V0ID0gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICBjaGVjay5jYW5CZVJvbGxlZCA9IHRydWVcclxuXHJcbiAgICBpZiAoIWNoZWNrLnJvbGxlZCAmJiAhY2hlY2suc2NvcmUpIHtcclxuICAgICAgY2hlY2suY3NzQ2xhc3NlcyArPSAnIGludmFsaWQnXHJcbiAgICAgIGNoZWNrLmNhbkJlUm9sbGVkID0gZmFsc2VcclxuICAgIH1cclxuICAgIGNoZWNrLmlzVmFsaWQgPSBjaGVjay5yb2xsZWQgJiYgIWlzTmFOKGNoZWNrLnNjb3JlKVxyXG5cclxuICAgIHJldHVybiBjaGVja1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeVJvbGVBbmREZXggKGEsIGIpIHtcclxuICBpZiAoIWEgJiYgYikgcmV0dXJuIDFcclxuICBpZiAoIWIgJiYgYSkgcmV0dXJuIC0xXHJcbiAgaWYgKCFhICYmICFiKSByZXR1cm4gMFxyXG4gIC8vIFB1dCBjaGFzZXJzIGZpcnN0XHJcbiAgaWYgKGIuY2hhc2VyICYmICFhLmNoYXNlcikgcmV0dXJuIDFcclxuICBpZiAoYS5jaGFzZXIgJiYgIWIuY2hhc2VyKSByZXR1cm4gLTFcclxuICAvLyBJZiBzYW1ldHlwZSBzb3J0IGJ5IGRleFxyXG4gIHJldHVybiBhLmRleCAtIGIuZGV4XHJcbn1cclxuIiwiLyogZ2xvYmFsIGR1cGxpY2F0ZSwgZm91bmRyeSwgZ2FtZSwgbWVyZ2VPYmplY3QsIFJvbGwsIHVpICovXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBFbmhhbmNlZENoYXRDYXJkIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcclxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xyXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi8uLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcclxuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGFzZU9ic3RhY2xlQ2FyZCBleHRlbmRzIEVuaGFuY2VkQ2hhdENhcmQge1xyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xyXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5odG1sJyxcclxuICAgICAgR01VcGRhdGU6IHRydWVcclxuICAgIH0pXHJcbiAgICBvcHRpb25zLmNsYXNzZXMucHVzaCgnb2JzdGFjbGUtY2FyZCcpXHJcbiAgICByZXR1cm4gb3B0aW9uc1xyXG4gIH1cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIGFzeW5jIGdldERhdGEgKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG5cclxuICAgIGRhdGEuc3RhdHVzID0gW11cclxuICAgIGRhdGEuc3RyaW5ncyA9IHt9XHJcbiAgICBkYXRhLmRpc3BsYXlBY3Rvck9uQ2FyZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXHJcbiAgICAvLyBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLnBhcnRpY2lwYW50RGF0YSlcclxuXHJcbiAgICBkYXRhLnN0YXR1cy5wdXNoKHtcclxuICAgICAgbmFtZTpcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpICsgYCA6JHt0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0fWBcclxuICAgIH0pXHJcblxyXG4gICAgZGF0YS5jYXJkLmJyZWFrYWJsZU9ic3RhY2xlID1cclxuICAgICAgZGF0YS5kYXRhLm9ic3RhY2xlPy5iYXJyaWVyICYmIGRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgLy8gVE9ETzogQ2hlY2sgaWYgdXNlZnVsbFxyXG4gICAgZGF0YS5jYXJkLnZhbGlkQ2hlY2sgPSBmYWxzZVxyXG5cclxuICAgIGlmIChcclxuICAgICAgZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkICYmXHJcbiAgICAgIChkYXRhLmRhdGEub2JzdGFjbGUuaGF6YXJkIHx8XHJcbiAgICAgICAgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmICFkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSlcclxuICAgICkge1xyXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gdHJ1ZVxyXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxyXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Py5hY3Rvcikge1xyXG4gICAgICBkYXRhLnNraWxsID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5maW5kKGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpXHJcbiAgICAgIGRhdGEuY2hlY2tPcHRpb25zID0gdGhpcy5jaGFzZS5nZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyhcclxuICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkXHJcbiAgICAgIClcclxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcclxuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXHJcbiAgICAgICAgZGF0YS52YWxpZFNraWxsID0gdHJ1ZVxyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XHJcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXHJcbiAgICAgIGRhdGEuZHVtbXlBY3RvciA9IHRydWVcclxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XHJcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhLmRhdGEuYm9udXNEaWNlKSBkYXRhLmRhdGEuYm9udXNEaWNlID0gMFxyXG5cclxuICAgIGlmIChcclxuICAgICAgZGF0YS5kYXRhLmJvbnVzRGljZSA8IDIgJiZcclxuICAgICAgZGF0YS5kYXRhLnRvdGFsQWN0aW9uQ29zdCA8IGRhdGEuZGF0YS5tb3ZlbWVudEFjdGlvblxyXG4gICAgKSB7XHJcbiAgICAgIGRhdGEuY2FuVGFrZUNhdXRpb3VzQXBwcm9hY2ggPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgZGF0YS5jdXN0b21XZWFwb24gPSBmYWxzZVxyXG4gICAgaWYgKHRoaXMuZGF0YS53ZWFwb25DaG9pY2UgPT09ICcwJykge1xyXG4gICAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IHRydWVcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS52YWxpZENoZWNrKSB7XHJcbiAgICAgIGxldCBjaGVja05hbWUsIHZhbHVlXHJcbiAgICAgIGlmIChkYXRhLnNraWxsKSB7XHJcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5za2lsbC52YWx1ZS5uYW1lXHJcbiAgICAgICAgdmFsdWUgPSBkYXRhLnNraWxsLnZhbHVlLnZhbHVlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxyXG4gICAgICAgIHZhbHVlID0gZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkXHJcbiAgICAgIH1cclxuICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFza1JvbGwnLCB7XHJcbiAgICAgICAgbmFtZTogY2hlY2tOYW1lLFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChkYXRhLmRhdGEuYm9udXNEaWNlICE9PSAwKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5ib251c0RpY2UgPiAwKSB7XHJcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgrJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXHJcbiAgICAgICAgfSBlbHNlIGRhdGEuc3RyaW5ncy5jaGVja1JvbGxSZXF1ZXN0ICs9IGAgKCR7ZGF0YS5kYXRhLmJvbnVzRGljZX0pYFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuZGF0YS5zdGF0ZXM/Lm9ic3RhY2xlRGVmaW5lZCkge1xyXG4gICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWNpbmdPYnN0YWNsZScsIHtcclxuICAgICAgICB0eXBlOiBkYXRhLmRhdGEub2JzdGFjbGUuYmFycmllclxyXG4gICAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUJhcnJpZXInKVxyXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUhhemFyZCcpXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUubmFtZSkge1xyXG4gICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgKz0gYCAoJHtkYXRhLmRhdGEub2JzdGFjbGUubmFtZX0pYFxyXG4gICAgICB9XHJcblxyXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSB0cnVlXHJcbiAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IGZhbHNlXHJcbiAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xyXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmFycmllcicpIH0pXHJcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHtcclxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQnJlYWthYmxlJykgfSlcclxuICAgICAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcclxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHsgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhemFyZCcpIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XHJcbiAgICAgICAgaWYgKCFkYXRhLnZhbGlkQ2hlY2spIHtcclxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZENoZWNrJyksXHJcbiAgICAgICAgICAgIGNzczogJ2Vycm9yJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGRhdGEuc3RyaW5ncy5FbnRlclZhbHVlVGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLFxyXG4gICAgICAgICAgICB7IG5hbWU6IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgaWYgKCFkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIGRhdGEuZGF0YS5zdGF0ZXMuY2FuQXNrUm9sbCA9IGZhbHNlXHJcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YS52YWxpZFNraWxsKSB7XHJcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcclxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRTa2lsbCcpLFxyXG4gICAgICAgICAgICBjc3M6ICd3YXJuaW5nJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWspIHtcclxuICAgICAgICBsZXQgZGFtYWdlU3RhdHVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrRG93bicpXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsKSB7XHJcbiAgICAgICAgICBkYW1hZ2VTdGF0dXMgKz0gYCA6ICR7dGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsLnRvdGFsfWBcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiBkYW1hZ2VTdGF0dXNcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURhbWFnZVJvbGxlZCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsIDw9IDApIHtcclxuICAgICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlRGFtYWdlID1cclxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9EYW1hZ2VEZWFsdCcpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhLmlubGluZURhbWFnZVJvbGwgPSBjcmVhdGVJbmxpbmVSb2xsKFxyXG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbFxyXG4gICAgICAgICAgICApPy5vdXRlckhUTUxcclxuICAgICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlRGFtYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EYW1hZ2VEZWFsdCcsIHtcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YS5pbmxpbmVEYW1hZ2VSb2xsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xyXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVnb3RpYXRlJykgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHtcclxuICAgICAgICBjb25zdCBjYXV0aW91c1N0YXR1cyA9IHtcclxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYXV0aW91cycpLFxyXG4gICAgICAgICAgY3NzOiAnJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCA+IDEpIHtcclxuICAgICAgICAgIGNhdXRpb3VzU3RhdHVzLmNzcyA9ICdzdHJvbmcnXHJcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2F1dGlvdXNBcHByb2FjaFR5cGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICdDb0M3LkJlaW5nVmVyeUNhdXRpb3VzJ1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2F1dGlvdXNBcHByb2FjaFR5cGUgPVxyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmVpbmdDYXV0aW91cycpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIGNhdXRpb3VzU3RhdHVzLmNzcyArPSAnIGNvbnN1bWUnXHJcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaChjYXV0aW91c1N0YXR1cylcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaykge1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWUgLy8gT24gaGF6YXJkLCB5b3UgcGFzcyBldmVuIGlmIHlvdSBmYWlsIHlvdXIgcm9sbFxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcclxuICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgJ0NvQzcuT2JzdGFjbGVQYXNzZWQnXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2subHVja1NwZW50KSB7XHJcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAgICAgICAnQ29DNy5Hb3RMdWNreSdcclxuICAgICAgICAgICAgKX0pYFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TdWNjZXNzJyksXHJcbiAgICAgICAgICAgIGNzczogJ3N1Y2Nlc3MnXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaXNGdW1ibGUpIHtcclxuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZ1bWJsZScpXHJcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcclxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpLFxyXG4gICAgICAgICAgICBjc3M6ICdmdW1ibGUnXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGYWlsJylcclxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpLFxyXG4gICAgICAgICAgICBjc3M6ICdmYWlsdXJlJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSB7XHJcbiAgICAgICAgZGF0YS5zdHJpbmdzLnBsYXllckludGVudGlvbnMgPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAnQ29DNy5UcnlUb05lZ290aWF0ZUhhemFyZCdcclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmJhcnJpZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xyXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLnBsYXllckludGVudGlvbnMgPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICdDb0M3LlRyeVRvR2V0UGFzdEJhcnJpZXJzJ1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrKSB7XHJcbiAgICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UcnlUb0JyZWFrJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jaGVja1JvbGxlZCkge1xyXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcclxuICAgICAgICAvLyBJZiB0aGUgY2FyZCBpcyByZXNvbHZlZCB0aGUgY2hlY2sgaXMgZnJvemVuXHJcbiAgICAgICAgZGF0YS5odG1sQ2hlY2sgPSBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pbmxpbmVDaGVjaz8ub3V0ZXJIVE1MXHJcbiAgICAgIH0gZWxzZSBkYXRhLmh0bWxDaGVjayA9IGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmdldEh0bWxSb2xsKClcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGwpIHtcclxuICAgIC8vICAgaWYgKCFkYXRhLmRhdGEuYXJtb3IpIHtcclxuICAgIC8vICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3RvcilcclxuICAgIC8vICAgICAgIGRhdGEuZGF0YS5hcm1vciA9XHJcbiAgICAvLyAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChkYXRhLmRhdGEuYXJtb3IpIHtcclxuICAgIC8vICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS5hcm1vcikpKSBkYXRhLmRhdGEuYXJtb3IgPSBudWxsXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH1cclxuXHJcbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcclxuICAgICAgZGF0YS5wbGF5ZXJEYW1hZ2VUYWtlbiA9IGZhbHNlXHJcbiAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZhbHNlXHJcblxyXG4gICAgICAvLyBIYXMgdGhlIG9ic3RhY2xlIGNoYW5nZWQgP1xyXG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXHJcbiAgICAgIGlmIChkaWZmLmNoYW5nZXMpIHtcclxuICAgICAgICBkYXRhLm9ic3RhbGNlRGVmaW5pdGlvbkNoYW5nZWQgPSB0cnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElzIHBsYXllciB0YWtpbmcgZGFtYWdlXHJcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlKSB7XHJcbiAgICAgICAgZGF0YS5wbGF5ZXJEYW1hZ2VUYWtlbiA9IHRydWVcclxuICAgICAgICBkYXRhLmlubGluZURhbWFnZVRha2VuUm9sbCA9IGNyZWF0ZUlubGluZVJvbGwoXHJcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXHJcbiAgICAgICAgKT8ub3V0ZXJIVE1MXHJcbiAgICAgICAgLy8gaWYgKGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuIDwgMClcclxuICAgICAgICAvLyAgIGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxyXG5cclxuICAgICAgICBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09IDApIHtcclxuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VUYWtlTm9EYW1hZ2UnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuZGFtYWdlVGFrZW4gPSBnYW1lLmkxOG4uZm9ybWF0KFxyXG4gICAgICAgICAgICAnQ29DNy5Zb3VUYWtlU29tZURhbWFnZScsXHJcbiAgICAgICAgICAgIHsgYW1vdW50OiBkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xyXG4gICAgICAgICAgbmFtZTpcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvdGFsRGFtYWdlJykgK1xyXG4gICAgICAgICAgICBgIDoke2RhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VufWBcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcclxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkICYmXHJcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmVcclxuICAgICAgKSB7XHJcbiAgICAgICAgZGF0YS5hY3Rpb25Mb3N0ID0gdHJ1ZVxyXG4gICAgICAgIGRhdGEuc3RyaW5ncy5hY3Rpb25Mb3N0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LllvdUxvc3RUaW1lJylcclxuICAgICAgICBkYXRhLmlubGluZUFjdGlvbkxvc3RSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcclxuICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGxcclxuICAgICAgICApPy5vdXRlckhUTUxcclxuICAgICAgfVxyXG5cclxuICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhcmRSZXNvbHZlZCcpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2xvc2VkKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGEubW92ZVBsYXllcikge1xyXG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTW92ZVRvTG9jYXRpb24nKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAnQ29DNy5Eb250TW92ZVRvTG9jYXRpb24nXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH1cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIGFzeW5jIEdNVXBkYXRlICgpIHtcclxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgY29uc29sZS5lcnJvcignQ29DNzogR01VcGRhdGUgY2FsbGVkIGZyb20gbm9uIEdNIHVzZXInKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xyXG4gICAgICAvLyBDYXJkIGlzIHJlc29sdmVkLCBjb21wdXRlIGFsbCBmb3JtdWxhcyBhbmQgZGFtYWdlLlxyXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGw/LnRvdGFsKSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxEYW1hZ2UgPSB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsLnRvdGFsXHJcbiAgICAgICAgY29uc3QgYXJtb3JWYWx1ZSA9IHRoaXMuZGF0YS5mbGFncy5pZ25vcmVBcm1vciA/IDAgOiB0aGlzLmRhdGEuYXJtb3JcclxuICAgICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JWYWx1ZSkpIHtcclxuICAgICAgICAgIHRoaXMuZGF0YS5hcm1vciA9IChcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoYXJtb3JWYWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICAgICAgICApLnRvdGFsXHJcbiAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oTnVtYmVyKGFybW9yVmFsdWUpKSkge1xyXG4gICAgICAgICAgdGhpcy5kYXRhLmFybW9yID0gTnVtYmVyKGFybW9yVmFsdWUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSB0b3RhbERhbWFnZSAtIHRoaXMuZGF0YS5hcm1vclxyXG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9IDBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMpIHtcclxuICAgICAgICB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzID0gdHJ1ZSAvLyBCeSBkZWZhdWx0IHJlZmxlY3QgY2hhbmdlc1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEubW92ZVBsYXllcikge1xyXG4gICAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID1cclxuICAgICAgICAgICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlIHx8IHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpICYmXHJcbiAgICAgICAgICAhdGhpcy5kYXRhLnN0YXRlcy5mYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWRcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmXHJcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAmJlxyXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlKSB7XHJcbiAgICAgICAgICB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSA9XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEuZmxhZ3Mub2JzdGFjbGVEZXN0b3llZCkge1xyXG4gICAgICAgICAgdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQgPVxyXG4gICAgICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzIC0gdGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPD0gMFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xyXG4gICAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25BcnJheSA9IGR1cGxpY2F0ZShcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcclxuICAgICAgKVxyXG4gICAgICB0aGlzLmRhdGEuRUVDX0FDVElPTiA9IHsgZGV0YWNoRGF0YTogdHJ1ZSB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQG92ZXJyaWRlICovXHJcbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XHJcblxyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICBhc3luYyBhc3NpZ25PYmplY3RzICgpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrICYmXHJcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcclxuICAgICkge1xyXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YSh0aGlzLmRhdGEub2JqZWN0cy5jaGVjaylcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGwgJiZcclxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcclxuICAgICkge1xyXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKFxyXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbFxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWREYW1hZ2VSb2xsICYmXHJcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKFxyXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGxcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkQWN0aW9uUm9sbCAmJlxyXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcclxuICAgICkge1xyXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gUm9sbC5mcm9tRGF0YShcclxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICBhc3luYyBpbml0aWFsaXplICgpIHtcclxuICAgIC8vIGNvbnN0IGNoYXNlID0gYXdhaXQgZnJvbVV1aWQodGhpcy5kYXRhLmNoYXNlVXVpZClcclxuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuXHJcbiAgICBpZiAodHlwZW9mIHRoaXMuY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhPy51dWlkID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YSA9IHt9XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5zdGF0ZXMgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cclxuXHJcbiAgICAvLyBjb25zdCBsb2NhdGlvbiA9IGNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxyXG4gICAgdGhpcy5kYXRhLm9ic3RhY2xlID0gdGhpcy5sb2NhdGlvbj8ub2JzdGFjbGVEZXRhaWxzIC8vIEZlZWQgdGhlIG9ic3RhY2xlIGRlZmluaXRpb25cclxuICAgIC8vIHRoaXMuZGF0YS5wYXJ0aWNpcGFudERhdGEgPSBjaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGFcclxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQgPSB0aGlzLmNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YS51dWlkXHJcblxyXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnREYXRhPy5ib251c0RpY2UgPiAwKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSB0aGlzLnBhcnRpY2lwYW50RGF0YS5ib251c0RpY2VcclxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXHJcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5oYXNCb251c0RpY2UgPSB0aGlzLnBhcnRpY2lwYW50Lmhhc0JvbnVzRGljZVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkFycmF5ID0gZHVwbGljYXRlKFxyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcclxuICAgIClcclxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHRoaXMucGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xyXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCA9IDBcclxuICB9XHJcblxyXG4gIGdldCBwYXJ0aWNpcGFudCAoKSB7XHJcbiAgICBpZiAoIXRoaXMucGFydGljaXBhbnREYXRhKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAvLyBpZiAoIXRoaXMuX3BhcnRpY2lwYW50KVxyXG4gICAgLy8gICB0aGlzLl9wYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpXHJcbiAgICAvLyByZXR1cm4gdGhpcy5fcGFydGljaXBhbnRcclxuICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKSAvLyBUTyBSRVNFVFxyXG4gIH1cclxuXHJcbiAgZ2V0IHBhcnRpY2lwYW50RGF0YSAoKSB7XHJcbiAgICBpZiAoIXRoaXMuY2hhc2UpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGlmICghdGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0UGFydGljaXBhbnREYXRhKHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpXHJcbiAgfVxyXG5cclxuICBnZXQgbG9jYXRpb24gKCkge1xyXG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICByZXR1cm4gdGhpcy5jaGFzZS5nZXRMb2NhdGlvbkRhdGEodGhpcy5kYXRhLmxvY2F0aW9uVXVpZClcclxuICB9XHJcblxyXG4gIGdldCBvYnN0YWNsZSAoKSB7XHJcbiAgICBpZiAoIXRoaXMubG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLm9ic3RhY2xlRGV0YWlsc1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNoYXNlICgpIHtcclxuICAgIGlmICghdGhpcy5kYXRhLmNoYXNlVXVpZCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKCF0aGlzLl9jaGFzZSkgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxyXG4gICAgcmV0dXJuIHRoaXMuX2NoYXNlXHJcbiAgfVxyXG5cclxuICBnZXQgcm9sbCAoKSB7XHJcbiAgICBsZXQgcm9sbERhdGFcclxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpIHtcclxuICAgICAgY29uc3QgYWN0b3JTa2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChcclxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lXHJcbiAgICAgIClcclxuICAgICAgaWYgKHR5cGVvZiBhY3RvclNraWxsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJvbGxEYXRhID0gYWN0b3JTa2lsbFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvbGxEYXRhID0ge1xyXG4gICAgICAgICAgdHlwZTogJ3ZhbHVlJyxcclxuICAgICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXHJcbiAgICAgICAgICAgIHRocmVzaG9sZDogdGhpcy5kYXRhLmNoZWNrVGhyZXNob2xkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJvbGxEYXRhLmFjdG9yID0geyBhY3RvcktleTogdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5pZCB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcclxuICAgICAgICByb2xsRGF0YSA9IHtcclxuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXHJcbiAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxyXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGFjdG9yOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMucGFydGljaXBhbnQubmFtZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHJvbGxEYXRhKSB7XHJcbiAgICAgIHJvbGxEYXRhLmRpY2VNb2RpZmllciA9IHRoaXMuZGF0YT8uYm9udXNEaWNlIHx8IDBcclxuICAgICAgcm9sbERhdGEuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxyXG4gICAgICByb2xsRGF0YS5kZW55UHVzaCA9IHRydWVcclxuICAgIH1cclxuICAgIHJldHVybiByb2xsRGF0YSB8fCB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCB2YWxpZEZhaWxlZFJvbGxzICgpIHtcclxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmUpIHJldHVybiBmYWxzZVxyXG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UpIHtcclxuICAgICAgY29uc3QgZGFtYWdlID1cclxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xyXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2V9YFxyXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2VcclxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UpIHJldHVybiBmYWxzZVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlICYmXHJcbiAgICAgICAgIVJvbGwudmFsaWRhdGUoZGFtYWdlKSAvLyBWYWxpZGF0ZSBvbmx5IHRha2UgYSBzdHJpbmcsIGlmIGRhbWFnZSBpcyBhIG51bWJlciBjb252ZXJ0IHRvIGEgc3RyaW5nXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCAmJiB0aGlzLmRhdGEub2JzdGFjbGUuaGFzQWN0aW9uQ29zdCkge1xyXG4gICAgICBjb25zdCBhY3Rpb25Db3N0ID1cclxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgPT09ICdudW1iZXInXHJcbiAgICAgICAgICA/IGAke3RoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0fWBcclxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3RcclxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCkgcmV0dXJuIGZhbHNlXHJcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCAmJiAhUm9sbC52YWxpZGF0ZShhY3Rpb25Db3N0KSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgZ2V0IHdlYXBvbnNPcHRpb25zICgpIHtcclxuICAgIGNvbnN0IHdlYXBvbnMgPSBbXVxyXG4gICAgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvcj8uaXRlbVR5cGVzPy53ZWFwb24/LmZvckVhY2godyA9PiB7XHJcbiAgICAgIGxldCBmb3JtdWxhID0gdy5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZVxyXG4gICAgICBsZXQgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXHJcbiAgICAgIGlmIChkYiA9PT0gbnVsbCB8fCBOdW1iZXIoZGIpID09PSAwKSB7XHJcbiAgICAgICAgZGIgPSAnJ1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRiID0gYCR7ZGJ9YFxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZGIgJiYgIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxyXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXHJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoYmQpIGZvcm11bGEgPSBmb3JtdWxhICsgZGIgKyAnLzInXHJcbiAgICAgIHdlYXBvbnMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogYCR7dy5kYXRhLm5hbWV9ICgke2Zvcm11bGF9KWAsXHJcbiAgICAgICAgZGFtYWdlOiBmb3JtdWxhLFxyXG4gICAgICAgIHV1aWQ6IHcudXVpZFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIHdlYXBvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAhd2VhcG9ucy5maW5kKHcgPT5cclxuICAgICAgICB3Lm5hbWVcclxuICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAuc3RhcnRzV2l0aChcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyk/LnRvVXBwZXJDYXNlKClcclxuICAgICAgICAgIClcclxuICAgICAgKVxyXG4gICAgKSB7XHJcbiAgICAgIGxldCBkYiA9ICcnXHJcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XHJcbiAgICAgICAgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXHJcbiAgICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcclxuICAgICAgICBpZiAoZGIgPT09IG51bGwgfHwgTnVtYmVyKGRiKSA9PT0gMCkgZGIgPSAnJ1xyXG4gICAgICB9XHJcblxyXG4gICAgICB3ZWFwb25zLnVuc2hpZnQoe1xyXG4gICAgICAgIG5hbWU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFybWVkV2VhcG9uTmFtZScpfSAoMUQzJHtkYn0pYCxcclxuICAgICAgICBkYW1hZ2U6IGAxRDMke2RifWAsXHJcbiAgICAgICAgdXVpZDogJ3VuYXJtZWQnXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgd2VhcG9ucy5wdXNoKHtcclxuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk90aGVyJyksXHJcbiAgICAgIGRhbWFnZTogdGhpcy5kYXRhPy5jdXN0b21XZWFwb25EYW1hZ2UgfHwgbnVsbCxcclxuICAgICAgdXVpZDogMFxyXG4gICAgfSlcclxuICAgIHJldHVybiB3ZWFwb25zXHJcbiAgfVxyXG5cclxuICBnZXQgdXNlZFdlYXBvbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YT8ud2VhcG9uQ2hvaWNlKSB7XHJcbiAgICAgIGlmICghdGhpcy53ZWFwb25zT3B0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgICBpZiAoIXRoaXMuZGF0YSkgdGhpcy5kYXRhID0ge30gLy8gdXNlbGVzcyAhISFcclxuICAgICAgdGhpcy5kYXRhLndlYXBvbkNob2ljZSA9IHRoaXMud2VhcG9uc09wdGlvbnNbMF0udXVpZFxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmRhdGEud2VhcG9uQ2hvaWNlKSB7XHJcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMud2VhcG9uc09wdGlvbnMuZmluZChcclxuICAgICAgICBlID0+IGUudXVpZCA9PT0gdGhpcy5kYXRhLndlYXBvbkNob2ljZVxyXG4gICAgICApXHJcbiAgICAgIGlmICh3ZWFwb24pIHJldHVybiB3ZWFwb25cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBpbmZsaWN0ZWREYW1hZ2VGb3JtdWxhICgpIHtcclxuICAgIGlmICh0aGlzLnVzZWRXZWFwb24pIHtcclxuICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy51c2VkV2VhcG9uXHJcbiAgICAgIGlmICh3ZWFwb24gJiYgd2VhcG9uLmRhbWFnZSAmJiBSb2xsLnZhbGlkYXRlKHdlYXBvbi5kYW1hZ2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIHdlYXBvbi5kYW1hZ2VcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgdmFsaWRPYnN0YWNsZURhbWFnZSAoKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcclxuICAgICAgIWlzTmFOKE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSkgJiZcclxuICAgICAgTnVtYmVyKHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMpID4gMCAmJlxyXG4gICAgICB0aGlzLmluZmxpY3RlZERhbWFnZUZvcm11bGFcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXQgc3RyaW5ncyAoKSB7XHJcbiAgICBjb25zdCBzdHJpbmdzID0ge31cclxuICAgIHN0cmluZ3MuZGFtYWdlUm9sbFJlcXVlc3QgPSB0aGlzLnVzZWRXZWFwb24ubmFtZVxyXG5cclxuICAgIHJldHVybiBzdHJpbmdzXHJcbiAgfVxyXG5cclxuICAvLyBBY3Rpb25zIDpcclxuICBhc3luYyB2YWxpZGF0ZUNhcmQgKG9wdGlvbnMpIHtcclxuICAgIGxldCBsb2FjdGlvbkNoYW5nZWRcclxuICAgIGxldCBwYXJ0aWNpcGFudENoYWdlZCA9IGZhbHNlXHJcbiAgICBjb25zdCBvYnN0YWNsZVVwZGF0ZSA9IHt9XHJcbiAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMgPSB7fVxyXG4gICAgY29uc3QgcGFydGljaXBhbnRVcGRhdGUgPSB7fVxyXG4gICAgaWYgKHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XHJcbiAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcclxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGUgPSBmYWxzZVxyXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gZmFsc2VcclxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmxpc3RDaGFuZ2VzKClcclxuICAgIGlmIChkaWZmLmNoYW5nZXMpIHtcclxuICAgICAgaWYgKHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkaWZmLm9ic3RhY2xlKSkge1xyXG4gICAgICAgICAgaWYgKGtleSAhPT0gJ3R5cGUnKSB7XHJcbiAgICAgICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlsc1t2YWx1ZS5rZXldID0gdmFsdWUubmV3XHJcbiAgICAgICAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPiAwICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHtcclxuICAgICAgbGV0IHJlbWFpbmluZ0hwID0gdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50c1xyXG4gICAgICByZW1haW5pbmdIcCAtPSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZVxyXG4gICAgICBpZiAocmVtYWluaW5nSHAgPCAwKSByZW1haW5pbmdIcCA9IDBcclxuICAgICAgaWYgKHRoaXMub2JzdGFjbGUuSGl0UG9pbnRzICE9PSByZW1haW5pbmdIcCkge1xyXG4gICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxyXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxyXG4gICAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA+IDApIHtcclxuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXHJcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kZWFsRGFtYWdlKFxyXG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4sXHJcbiAgICAgICAgICB7IGlnbm9yZUFybW9yOiB0cnVlIH1cclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuaHAgPSB0aGlzLnBhcnRpY2lwYW50RGF0YS5ocFxyXG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwIC09IHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuXHJcbiAgICAgICAgaWYgKHBhcnRpY2lwYW50VXBkYXRlLmhwIDwgMCkgcGFydGljaXBhbnRVcGRhdGUuaHAgPSAwXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCA+IDApIHtcclxuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXHJcbiAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPVxyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcclxuICAgICAgcGFydGljaXBhbnRVcGRhdGUuY3VycmVudE1vdmVtZW50QWN0aW9ucyAtPSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZSAvLyBCb251cyBkaWNlIGF3YXJkZWQgZHVyaW5nIGZsb3cgYXJlIGJlaW5nIGNvbnN1bWVkXHJcblxyXG4gICAgaWYgKHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSB7XHJcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxyXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ib251c0RpY2UgPSAwXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIWlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpICYmXHJcbiAgICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSAhPT0gdGhpcy5wYXJ0aWNpcGFudC5ib251c0RpY2VcclxuICAgICAgKSB7XHJcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gdGhpcy5kYXRhLmJvbnVzRGljZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XHJcbiAgICAgIGxldCB0YXJnZXRMb2NhdGlvblxyXG4gICAgICBpZiAodGhpcy5kYXRhLmZvcndhcmQpIHtcclxuICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHRoaXMubG9jYXRpb25cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25TaGlmdCh0aGlzLmxvY2F0aW9uLnV1aWQsIHtcclxuICAgICAgICAgIHNraXA6IC0xXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRhcmdldExvY2F0aW9uLnV1aWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS51dWlkLFxyXG4gICAgICAgICAgdGFyZ2V0TG9jYXRpb24udXVpZCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgYWN0aXZhdGVMb2NhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlbmRlcjogZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAobG9hY3Rpb25DaGFuZ2VkKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuY2hhc2UudXBkYXRlTG9jYXRpb24odGhpcy5sb2NhdGlvbi51dWlkLCBvYnN0YWNsZVVwZGF0ZSwge1xyXG4gICAgICAgIHJlbmRlcjogZmFsc2VcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmIChwYXJ0aWNpcGFudENoYWdlZCkge1xyXG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZVBhcnRpY2lwYW50KFxyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLnV1aWQsXHJcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUsXHJcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jbG9zZWQgPSB0cnVlXHJcbiAgICBhd2FpdCB0aGlzLmNoYXNlLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpIC8vIFJlbmRlciB3aWxsIGJlIGRvbmUgdGhlcmUgIVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlZmluZU9ic3RhY2xlIChvcHRpb25zKSB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YS5zdGF0ZXMpIHRoaXMuZGF0YS5zdGF0ZXMgPSB7fVxyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURlZmluZWQgPSB0cnVlXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSAob3B0aW9ucykge1xyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSB0cnVlXHJcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGFzeW5jIHRyeVRvQnJlYWtEb3duT2JzdGFjbGUgKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSB0cnVlXHJcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IHRydWVcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBhc3luYyBjYW5jZWxPYnN0YWNsZURlZmluaXRpb24gKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gZmFsc2VcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IGZhbHNlXHJcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGFzeW5jIGNhbmNlbEJyZWFrT3JQYXNzQ2hvaWNlIChvcHRpb25zKSB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHJldHVybiB0aGlzLmNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbigpXHJcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb0JyZWFrID0gZmFsc2VcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBhc3luYyByZXF1ZXN0Um9sbCAob3B0aW9ucykge1xyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkID0gdHJ1ZVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGFzeW5jIHRha2VDYXV0aW91c0FwcHJvYWNoIChvcHRpb25zKSB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2ggPSAwXHJcbiAgICB0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoICs9IDFcclxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgKz0gMVxyXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXHJcbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5oYXNCb251c0RpY2UgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uIDw9IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QpIHsgLy8gQWxsIG1vdiBhY3Rpb24gaGF2ZSBiZWVuIHVzZWQgdG8gdGFrZSBjdWF0aW91cyBhcHByb2FjaC5cclxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSBmYWxzZSAvLyBEbyBub3QgY29uc3VtZSB0aGUgYm9udXMgZGljZS5cclxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXHJcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gZmFsc2VcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBhc3luYyByb2xsU2tpbGxDaGVjayAob3B0aW9ucykge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgcmV0dXJuXHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxyXG4gICAgaWYgKCF0aGlzLnJvbGwpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90aGluZ1RvUm9sbCcpKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cclxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrID0gQ29DN0NoZWNrLmNyZWF0ZUZyb21BY3RvclJvbGxEYXRhKHRoaXMucm9sbClcclxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMuY2hlY2spIHJldHVybiBmYWxzZVxyXG4gICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZGVueVB1c2ggPSB0cnVlIC8vIE9ic3RhY2xlIGNoZWNrIGNhbid0IGJlIHB1c2hlZFxyXG4gICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxyXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXHJcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmNoZWNrUm9sbGVkID0gdHJ1ZVxyXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJylcclxuICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcclxuICAgICAgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXHJcbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuYXJtb3IgPT09ICd1bmRlZmluZWQnICYmIHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcclxuICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPVxyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZSB8fCAwXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXNlTHVjayAob3B0aW9ucykge1xyXG4gICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLCAndXNlTHVjaycsIHtcclxuICAgICAgdGFyZ2V0OiBvcHRpb25zLmV2ZW50LmN1cnJlbnRUYXJnZXQsXHJcbiAgICAgIHVwZGF0ZTogZmFsc2VcclxuICAgIH0pXHJcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XHJcbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxyXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcclxuICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcm9sbEZhaWxDb25zZXF1ZW5jZXMgKG9wdGlvbnMpIHtcclxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cclxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrPy5pc0ZhaWx1cmUpIHtcclxuICAgICAgY29uc3QgZGFtYWdlID1cclxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xyXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2V9YFxyXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2VcclxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbCA9IG5ldyBSb2xsKGRhbWFnZSlcclxuICAgICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcclxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlXHJcbiAgICAgICkge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxyXG4gICAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xyXG4gICAgICAgICAgICA/IGAke3RoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0fWBcclxuICAgICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxyXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwgPSBuZXcgUm9sbChhY3Rpb25Db3N0KVxyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxyXG4gICAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gKHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwudG90YWwgLSAxKSAvLyAxIGFjdGlvbiBhbHJlYWR5IHNwZW5kIGZvciBza2lsbCBjaGVja1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5mYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQgPSB0cnVlXHJcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBhc3luYyBhc2tSb2xsT2JzdGFjbGVEYW1hZ2UgKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBhc3luYyByb2xsT2JzdGFjbGVEYW1hZ2UgKG9wdGlvbnMpIHtcclxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cclxuICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IG5ldyBSb2xsKHRoaXMudXNlZFdlYXBvbj8uZGFtYWdlKVxyXG4gICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcclxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbClcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEYW1hZ2VSb2xsZWQgPSB0cnVlXHJcbiAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcclxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIC8vIExpc3QgYWxsIGNoYW5nZXNcclxuICBsaXN0Q2hhbmdlcyAodmFsaWRhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgZGlmZiA9IHtcclxuICAgICAgb2JzdGFjbGU6IHt9LFxyXG4gICAgICBwbGF5ZXI6IHt9LFxyXG4gICAgICBjaGFuZ2VzOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgY29uc3QgbmFtZXMgPSB7XHJcbiAgICAgIGJhcnJpZXI6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXHJcbiAgICAgIGhhemFyZDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcclxuICAgICAgaGFzSGl0UG9pbnRzOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQnJlYWthYmxlJyksXHJcbiAgICAgIEhpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpLFxyXG4gICAgICBoYXNBY3Rpb25Db3N0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpLFxyXG4gICAgICBmYWlsZWRBY3Rpb25Db3N0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpLFxyXG4gICAgICBoYXNEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodEJhY2snKSxcclxuICAgICAgZmFpbGVkQ2hlY2tEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25EYW1hZ2UnKSxcclxuICAgICAgY2hlY2tOYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hlY2snKSxcclxuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5hbWUnKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWxpZGF0ZSAmJiAhdGhpcy5kYXRhLnZhbGlkYXRpb24pIHtcclxuICAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24gPSB7fVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld09ic3RhY2xlID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxyXG4gICAgICB0aGlzLm9ic3RhY2xlLFxyXG4gICAgICB0aGlzLmRhdGEub2JzdGFjbGVcclxuICAgIClcclxuICAgIC8vIGNvbnN0IG9sZE9ic3RhY2xlID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KHRoaXMuZGF0YS5vYnN0YWNsZSwgdGhpcy5vYnN0YWNsZSlcclxuXHJcbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKG5ld09ic3RhY2xlKSkge1xyXG4gICAgICAvLyBpZiAoJ2JhcnJpZXInID09IGtleSB8fCAnaGF6YXJkJyA9PSBrZXkpXHJcbiAgICAgIC8vIHtcclxuICAgICAgLy8gICBkaWZmLmNoYW5nZXMgPSB0cnVlXHJcbiAgICAgIC8vICAgZGlmZi5vYnN0YWNsZS50eXBlID0ge1xyXG4gICAgICAvLyAgICAgb2xkOiBnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgIC8vICAgICAgIHRoaXMub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xyXG4gICAgICAvLyAgICAgKSxcclxuICAgICAgLy8gICAgIG5ldzogZ2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAvLyAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xyXG4gICAgICAvLyAgICAgKSxcclxuICAgICAgLy8gICAgIGtleTogJ3R5cGUnLFxyXG4gICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKVxyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gICBpZiAodmFsaWRhdGUpIHtcclxuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uW2tleV0gPSB0cnVlXHJcbiAgICAgIC8vICAgICB0aGlzLmRhdGEudmFsaWRhdGlvbi50eXBlID0gdHJ1ZVxyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gfVxyXG4gICAgICAvLyBlbHNlXHJcbiAgICAgIC8vIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICEoXHJcbiAgICAgICAgICAobmV3T2JzdGFjbGVba2V5XSA9PT0gJycgJiYgdGhpcy5vYnN0YWNsZVtrZXldID09PSBudWxsKSB8fFxyXG4gICAgICAgICAgKCFpc05hTihOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkpICYmXHJcbiAgICAgICAgICAgIE51bWJlcihuZXdPYnN0YWNsZVtrZXldKSA9PT0gdGhpcy5vYnN0YWNsZVtrZXldKVxyXG4gICAgICAgIClcclxuICAgICAgKSB7XHJcbiAgICAgICAgZGlmZi5jaGFuZ2VzID0gdHJ1ZVxyXG5cclxuICAgICAgICBkaWZmLm9ic3RhY2xlW2tleV0gPSB7XHJcbiAgICAgICAgICBvbGQ6IHRoaXMub2JzdGFjbGVba2V5XSxcclxuICAgICAgICAgIG5ldzogbmV3T2JzdGFjbGVba2V5XSxcclxuICAgICAgICAgIG5hbWU6IG5hbWVzW2tleV0sXHJcbiAgICAgICAgICBrZXlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkYXRlKSB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGlmZlxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCBtZXJnZU9iamVjdCwgTm9ybWFsaXplZFJlY3RhbmdsZSwgVG9rZW4sIFRva2VuRG9jdW1lbnQsIHVpICovXHJcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xyXG5pbXBvcnQgeyBDaGFzZU9ic3RhY2xlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXHJcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xyXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXHJcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCwgc29ydEJ5Um9sZUFuZERleCB9IGZyb20gJy4vcGFydGljaXBhbnQuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlIGV4dGVuZHMgQ29DN0l0ZW0ge1xyXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xyXG4gICAgfVxyXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcclxuICB9XHJcblxyXG4gIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHNcclxuICBnZXQgcGFydGljaXBhbnRzICgpIHtcclxuICAgIGNvbnN0IHBMaXN0ID0gW11cclxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgIC5maWx0ZXIocCA9PiAhcC5jaGFzZXIpXHJcbiAgICAgIC5tYXAocCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcclxuICAgICAgfSlcclxuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgICAgLmZpbHRlcihwID0+IHAuY2hhc2VyKVxyXG4gICAgICAubWFwKHAgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXHJcbiAgICAgIH0pXHJcbiAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcclxuICAgICAgLy8gcC5pbmRleCA9IHBMaXN0Lmxlbmd0aCAtIDFcclxuICAgICAgcC5hc3Npc3QgPSBbXVxyXG4gICAgICBpZiAocC5jaGFzZXIpIHtcclxuICAgICAgICBwLmFzc2lzdCA9IGNoYXNlcnNcclxuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXHJcbiAgICAgICAgICAubWFwKGMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHAuYXNzaXN0ID0gcHJleXNcclxuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXHJcbiAgICAgICAgICAubWFwKGMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBhcnRpY3BhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHApXHJcbiAgICAgIC8vIHBhcnRpY3BhbnQubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24oIHBhcnRpY3BhbnQudXVpZCkgLy8gUmVjdXJzaXZpdHlcclxuICAgICAgcExpc3QucHVzaChwYXJ0aWNwYW50KVxyXG4gICAgfSlcclxuICAgIHJldHVybiBwTGlzdFxyXG4gIH1cclxuXHJcbiAgZ2V0IHBhcnRpY2lwYW50c09iamVjdCAoKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xyXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxyXG4gICAgfSlcclxuICAgIHJldHVybiBwYXJ0aWNpcGFudHNcclxuICB9XHJcblxyXG4gIGdldCBhY3RpdmVQYXJ0aWNpcGFudERhdGEgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXHJcbiAgfVxyXG5cclxuICBnZXQgYWN0aXZlQWN0b3IgKCkge1xyXG4gICAgY29uc3QgcCA9IHRoaXMuYWN0aXZlUGFydGljaXBhbnREYXRhXHJcbiAgICBpZiAoIXApIHJldHVybiB1bmRlZmluZWRcclxuICAgIGlmIChwLmRvY1V1aWQpIHtcclxuICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHAuZG9jVXVpZClcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCBwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92ICgpIHtcclxuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMuc29ydChcclxuICAgICAgKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92XHJcbiAgICApXHJcbiAgICBwTGlzdC5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcclxuICAgIH0pXHJcbiAgICByZXR1cm4gcExpc3RcclxuICB9XHJcblxyXG4gIGdldCBwYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUgKCkge1xyXG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxyXG4gICAgICAoYSwgYikgPT4gYi5pbml0aWF0aXZlIC0gYS5pbml0aWF0aXZlXHJcbiAgICApXHJcbiAgICBwTGlzdC5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcclxuICAgIH0pXHJcbiAgICByZXR1cm4gcExpc3RcclxuICB9XHJcblxyXG4gIGdldCBwcmV5cyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIXAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKSB8fCBbXVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNoYXNlcnMgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbHRlcihwID0+IHAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKSB8fCBbXVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFsbEhhdmVWYWxpZE1vdiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZXZlcnkoZSA9PiBlLmhhc1ZhbGlkTW92KVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFsbEhhdmVTcGVlZFJvbGwgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmV2ZXJ5KHAgPT4gcC5zcGVlZENoZWNrPy5yb2xsZWQpXHJcbiAgfVxyXG5cclxuICBnZXRQYXJ0aWNpcGFudExvY2F0aW9uIChwYXJ0aWNpcGFudFV1aWQpIHtcclxuICAgIGlmICghdGhpcy5zeXN0ZW0ubG9jYXRpb25zPy5saXN0Py5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zXHJcblxyXG4gICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnMuZmluZChsID0+IHtcclxuICAgICAgY29uc3QgbHAgPSBsLnBhcnRpY2lwYW50cz8uZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxyXG4gICAgICByZXR1cm4gISFscFxyXG4gICAgfSlcclxuICAgIGlmIChsb2NhdGlvbikge1xyXG4gICAgICByZXR1cm4gbG9jYXRpb25cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldFBhcnRpY2lwYW50RGF0YSAocGFydGljaXBhbnRVdWlkKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKFxyXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXHJcbiAgICApXHJcbiAgICBpZiAocGFydGljaXBhbnQpIHJldHVybiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShwYXJ0aWNpcGFudCkgLy8gVE9ETyA6IGNoZWNrIGlmIHdlIG5lZWQgdG8gZHVwbGljYXRlXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXRQYXJ0aWNpcGFudCAocGFydGljaXBhbnRVdWlkKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudERhdGEgPSB0aGlzLmdldFBhcnRpY2lwYW50RGF0YShwYXJ0aWNpcGFudFV1aWQpXHJcbiAgICBpZiAocGFydGljaXBhbnREYXRhKSByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudERhdGEpXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBnZXQgbmV4dEFjdGl2ZVBhcnRpY2lwYW50ICgpIHtcclxuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUuZmluZChcclxuICAgICAgcCA9PiBwLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IDBcclxuICAgIClcclxuICB9XHJcblxyXG4gIGdldCBzbG93ZXN0UHJleSAoKSB7XHJcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMucGFydGljaXBhbnRzXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmFkanVzdGVkTW92IC0gYi5hZGp1c3RlZE1vdilcclxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzUHJleSlcclxuICAgIGlmIChwcmV5cy5sZW5ndGggPiAwKSByZXR1cm4gcHJleXNbMF1cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIGdldCBmYXN0ZXN0Q2hhc2VyICgpIHtcclxuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnBhcnRpY2lwYW50c1xyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXHJcbiAgICAgID8uZmlsdGVyKHAgPT4gcC5pc0NoYXNlcilcclxuICAgIGlmIChjaGFzZXJzLmxlbmd0aCA+IDApIHJldHVybiBjaGFzZXJzLnNsaWNlKC0xKS5wb3AoKVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdHVhbFBhcnRpY2lwYW50cyAoKSB7XHJcbiAgICBjb25zdCBzbG93ZXN0UHJleSA9IHRoaXMuc2xvd2VzdFByZXlcclxuICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmZhc3Rlc3RDaGFzZXJcclxuICAgIGxldCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzXHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluY2x1ZGVMYXRlY29tZXJzICYmIHNsb3dlc3RQcmV5KSB7XHJcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICBwLmlzUHJleSB8fCAocC5pc0NoYXNlciAmJiBwLmFkanVzdGVkTW92ID49IHNsb3dlc3RQcmV5LmFkanVzdGVkTW92KVxyXG4gICAgICAgIClcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluY2x1ZGVFc2NhcGVkICYmIGZhc3Rlc3RDaGFzZXIpIHtcclxuICAgICAgcExpc3QgPSBwTGlzdC5maWx0ZXIocCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIHAuaXNDaGFzZXIgfHwgKHAuaXNQcmV5ICYmIHAuYWRqdXN0ZWRNb3YgPD0gZmFzdGVzdENoYXNlci5hZGp1c3RlZE1vdilcclxuICAgICAgICApXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBMaXN0XHJcbiAgfVxyXG5cclxuICBnZXQgc2xvd2VzdFBhcnRpY2lwYW50ICgpIHtcclxuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92XHJcbiAgICBpZiAocExpc3QubGVuZ3RoID4gMCkgcmV0dXJuIHBMaXN0WzBdXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudHMgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLmNsZWFuUGFydGljaXBhbnRMaXN0KGxpc3QpXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoXHJcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXHJcbiAgICAgIHsgcmVuZGVyIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVBhcnRpY2lwYW50IChwYXJ0aWNpYW50VXVpZCwgdXBkYXRlRGF0YSwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgY29uc3QgdXBkYXRlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodXBkYXRlRGF0YSlcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KFxyXG4gICAgICBwID0+IHBhcnRpY2lhbnRVdWlkID09PSBwLnV1aWRcclxuICAgIClcclxuICAgIGlmIChwYXJ0aWNpcGFudEluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcclxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QocGFydGljaXBhbnRzW3BhcnRpY2lwYW50SW5kZXhdLCB1cGRhdGUsIHtcclxuICAgICAgb3ZlcndyaXRlOiB0cnVlXHJcbiAgICB9KVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlciB9KVxyXG4gIH1cclxuXHJcbiAgY2xlYW5QYXJ0aWNpcGFudExpc3QgKGxpc3QpIHtcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBsaXN0IHx8IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcclxuICAgIGxpc3QuZm9yRWFjaChwID0+IHtcclxuICAgICAgbGV0IGRhdGFcclxuICAgICAgaWYgKHAuY29uc3RydWN0b3IubmFtZSA9PT0gJ19wYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICBkYXRhID0gcC5kYXRhXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGF0YSA9IHBcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KHBhcnRpY2lwYW50c0RhdGEsIGRhdGEudXVpZClcclxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGEucHVzaChkYXRhKVxyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnREYXRhTWlzc2luZycpKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gZGF0YVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFcclxuICB9XHJcblxyXG4gIGFzeW5jIGFzc2lzdFBhcnRpY2lwYW50IChcclxuICAgIGFzc2lzdGFudFV1aWQsXHJcbiAgICBiZW5lZmljaWFyeVV1aWQsXHJcbiAgICB7IHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBhc3Npc3RhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KGFzc2lzdGFudFV1aWQpXHJcbiAgICBjb25zdCBiZW5lZmljaWFyeSA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYmVuZWZpY2lhcnlVdWlkKVxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxyXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgIClcclxuICAgIGNvbnN0IGFzc2lzdGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXHJcbiAgICAgIHAgPT4gYXNzaXN0YW50VXVpZCA9PT0gcC51dWlkXHJcbiAgICApXHJcbiAgICBjb25zdCBiZW5lZmljaWFyeUluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXHJcbiAgICAgIHAgPT4gYmVuZWZpY2lhcnlVdWlkID09PSBwLnV1aWRcclxuICAgIClcclxuXHJcbiAgICBpZiAoIWFzc2lzdGFudCB8fCAhYmVuZWZpY2lhcnkpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnROb3RGb3VuZCcpKVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJlbmVmaWNpYXJ5Lmhhc01heEJvbnVzRGljZSkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JCZW5lZmljaWFyeUF0TWF4Qm9udXMnLCB7XHJcbiAgICAgICAgICBuYW1lOiBiZW5lZmljaWFyeS5uYW1lXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xyXG4gICAgICBpZiAoYXNzaXN0YW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAxKSB7XHJcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcclxuICAgICAgICAgICAgYXNzaXN0YW50VXVpZCxcclxuICAgICAgICAgICAgYWN0aW9uczogYXNzaXN0YW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgfVxyXG4gICAgICBhc3Npc3RhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoLTEpXHJcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbYXNzaXN0YW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYXNzaXN0YW50LmRhdGEpXHJcbiAgICB9XHJcblxyXG4gICAgYmVuZWZpY2lhcnkuYWRkQm9udXNEaWNlKClcclxuICAgIHBhcnRpY2lwYW50c0RhdGFbYmVuZWZpY2lhcnlJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcclxuICAgICAgYmVuZWZpY2lhcnkuZGF0YVxyXG4gICAgKVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXHJcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXHJcbiAgICAgIHsgcmVuZGVyIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZUJvbnVzRGljZSAocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxyXG5cclxuICAgIGlmICghcGFydGljaXBhbnQpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xyXG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxyXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgIClcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcclxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxyXG4gICAgKVxyXG4gICAgaWYgKHBhcnRpY2lwYW50LmJvbnVzRGljZSA+PSBkaWNlTnVtYmVyKSBwYXJ0aWNpcGFudC5yZW1vdmVCb251c0RpY2UoKVxyXG4gICAgZWxzZSBwYXJ0aWNpcGFudC5hZGRCb251c0RpY2UoKVxyXG4gICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxyXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXHJcbiAgICApXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcclxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcclxuICAgICAgeyByZW5kZXIgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY2F1dGlvdXNBcHByb2FjaCAoXHJcbiAgICBwYXJ0aWNpcGFudFV1aWQsXHJcbiAgICB7IHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxyXG5cclxuICAgIGlmICghcGFydGljaXBhbnQpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xyXG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxyXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgIClcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcclxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxyXG4gICAgKVxyXG4gICAgaWYgKHBhcnRpY2lwYW50Lmhhc01heEJvbnVzRGljZSkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JQYXJ0aWNpcGFudEF0TWF4Qm9udXMnLCB7XHJcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xyXG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudE5vdEVub3VnaE1vdmVtZW50Jywge1xyXG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXHJcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgfVxyXG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcclxuICAgIH1cclxuICAgIHBhcnRpY2lwYW50LmFkZEJvbnVzRGljZSgpXHJcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXHJcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcclxuICAgIClcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxyXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxyXG4gICAgICB7IHJlbmRlciB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50TW92ZW1lbnRBY3Rpb24gKFxyXG4gICAgcGFydGljaXBhbnRVdWlkLFxyXG4gICAgY291bnQsXHJcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxyXG5cclxuICAgIGlmICghcGFydGljaXBhbnQpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xyXG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxyXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgIClcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcclxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxyXG4gICAgKVxyXG5cclxuICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKGNvdW50KVxyXG5cclxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcclxuICAgICAgcGFydGljaXBhbnQuZGF0YVxyXG4gICAgKVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXHJcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXHJcbiAgICAgIHsgcmVuZGVyIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGFzeW5jIGFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiAoe1xyXG4gICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXHJcbiAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcclxuICAgIHJlbmRlciA9IHRydWUsXHJcbiAgICBodG1sID0gbnVsbFxyXG4gIH0gPSB7fSkge1xyXG4gICAgY29uc3QgYWN0aXZlUGFydGljaXBhbnQgPSB0aGlzLm5leHRBY3RpdmVQYXJ0aWNpcGFudFxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcclxuICAgICAgYWN0aXZhdGVMb2NhdGlvbixcclxuICAgICAgcmVuZGVyLFxyXG4gICAgICBodG1sXHJcbiAgICB9XHJcbiAgICBpZiAoIWFjdGl2ZVBhcnRpY2lwYW50KSByZXR1cm4gdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KHVuZGVmaW5lZCwgb3B0aW9ucylcclxuICAgIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQoYWN0aXZlUGFydGljaXBhbnQudXVpZCwgb3B0aW9ucylcclxuICB9XHJcblxyXG4gIGFzeW5jIGFjdGl2YXRlUGFydGljaXBhbnQgKFxyXG4gICAgcGFydGljaXBhbnRVdWlkLFxyXG4gICAge1xyXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcclxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXHJcbiAgICAgIHJlbmRlciA9IHRydWUsXHJcbiAgICAgIGh0bWwgPSBudWxsXHJcbiAgICB9ID0ge31cclxuICApIHtcclxuICAgIGNvbnN0IGRhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhKHBhcnRpY2lwYW50VXVpZCwge1xyXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxyXG4gICAgICBhY3RpdmVMb2NhdGlvbjogYWN0aXZhdGVMb2NhdGlvbixcclxuICAgICAgaHRtbFxyXG4gICAgfSlcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGRhdGFVcGRhdGUsIHsgcmVuZGVyIH0pXHJcbiAgfVxyXG5cclxuICBnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSAoXHJcbiAgICBwYXJ0aWNpcGFudFV1aWQsXHJcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBwVXVpZCA9IHBhcnRpY2lwYW50VXVpZFxyXG4gICAgLy8gICA/IHBhcnRpY2lwYW50VXVpZFxyXG4gICAgLy8gICA6IHRoaXMucGFydGljaXBhbnRzQnlJbml0aWF0aXZlWzBdPy51dWlkXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlID0ge31cclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcclxuICAgICAgOiBbXVxyXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgIGRlbGV0ZSBwLmFjdGl2ZVxyXG4gICAgICBpZiAocFV1aWQgJiYgcFV1aWQgPT09IHAudXVpZCkgcC5hY3RpdmUgPSB0cnVlXHJcbiAgICB9KVxyXG4gICAgcGFydGljaXBhbnRzRGF0YVVwZGF0ZVsnc3lzdGVtLnBhcnRpY2lwYW50cyddID0gcGFydGljaXBhbnRzXHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnRMb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwVXVpZClcclxuICAgIGxldCBsb2NhdGlvbnNEYXRhVXBkYXRlID0gbnVsbFxyXG4gICAgaWYgKHBhcnRpY2lwYW50TG9jYXRpb24pIHtcclxuICAgICAgaWYgKGFjdGl2YXRlTG9jYXRpb24pIHtcclxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YShcclxuICAgICAgICAgIHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCxcclxuICAgICAgICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiwgaHRtbCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2UgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcclxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0ge31cclxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID1cclxuICAgICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxyXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cclxuICAgICAgICAgIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24ocGFydGljaXBhbnRMb2NhdGlvbi51dWlkLCB7XHJcbiAgICAgICAgICAgIGh0bWxcclxuICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKHVuZGVmaW5lZCwge1xyXG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb25cclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAobG9jYXRpb25zRGF0YVVwZGF0ZSkge1xyXG4gICAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcclxuICAgICAgICBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlLFxyXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVcclxuICAgICAgKVxyXG4gICAgfSBlbHNlIHJldHVybiBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlXHJcbiAgfVxyXG5cclxuICBhY3RpdmVQYXJ0aWNpcGFudE9ic3RhY2xlQ2hlY2sgKFxyXG4gICAgbG9jYXRpb25VdWlkLFxyXG4gICAgeyBtb3ZlUGFydGljaXBhbnQgPSB0cnVlIH0gPSB7fVxyXG4gICkge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDaGFzZU9ic3RhY2xlQ2FyZCh7XHJcbiAgICAgIGNoYXNlVXVpZDogdGhpcy51dWlkLFxyXG4gICAgICBsb2NhdGlvblV1aWQsXHJcbiAgICAgIG1vdmVQYXJ0aWNpcGFudCxcclxuICAgICAgZm9yd2FyZDogbG9jYXRpb25VdWlkICE9PSB0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWRcclxuICAgIH0pXHJcbiAgICBjYXJkLnRvTWVzc2FnZSgpXHJcblxyXG4gICAgLy8gY29uc3QgdGVzdCA9IG5ldyB0ZXN0Q2FyZCgpXHJcbiAgICAvLyB0ZXN0LmluaXRpYWxpemUoe30pXHJcbiAgICAvLyB0ZXN0LnRvTWVzc2FnZSgpXHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgcm91bmRzXHJcblxyXG4gIGFzeW5jIHByb2dyZXNzVG9OZXh0Um91bmQgKHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcclxuICAgICAgOiBbXVxyXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgIGlmIChwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCBwLm1vdmVtZW50QWN0aW9uKSB7XHJcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHAubW92ZW1lbnRBY3Rpb25cclxuICAgICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcC5tb3ZlbWVudEFjdGlvbikge1xyXG4gICAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcC5tb3ZlbWVudEFjdGlvblxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXHJcbiAgICB0aGlzLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybih7IHJlbmRlciB9KVxyXG4gIH1cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGxTdHJpbmcpIHtcclxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGxTdHJpbmcpXHJcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICAgIDogW11cclxuICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC5yb2xsVXVpZCA9PT0gcm9sbC51dWlkKVxyXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgZGF0YTogcm9sbFN0cmluZyxcclxuICAgICAgICB0eXBlOiAnaW52b2tlJyxcclxuICAgICAgICBtZXRob2Q6ICd1cGRhdGVSb2xsJyxcclxuICAgICAgICBpdGVtOiB0aGlzLnV1aWRcclxuICAgICAgfVxyXG4gICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBoYW5kbGUgbG9jYXRpb25zXHJcbiAgZ2V0IGxvY2F0aW9ucyAoKSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN0YXJ0ZWRcclxuICAgICAgPyB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxyXG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXHJcbiAgICAgICAgOiBbXVxyXG4gICAgICA6IHRoaXMuaW5pdFRyYWNrXHJcbiAgICB0aGlzLnByb2Nlc3NMb2NhdGlvbnMobG9jYXRpb25zKVxyXG4gICAgcmV0dXJuIGxvY2F0aW9uc1xyXG4gIH1cclxuXHJcbiAgZ2V0TG9jYXRpb25EYXRhIChsb2NhdGlvblV1aWQsIHsgZHVwbGljYXRlRGF0YSA9IHRydWUgfSA9IHt9KSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGVEYXRhXHJcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5sb2NhdGlvbnMpXHJcbiAgICAgIDogdGhpcy5sb2NhdGlvbnNcclxuICAgIHJldHVybiBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc0xvY2F0aW9ucyAobG9jYXRpb25zKSB7XHJcbiAgICBpZiAoIWxvY2F0aW9ucz8ubGVuZ3RoKSByZXR1cm5cclxuICAgIGxvY2F0aW9uc1swXS5maXJzdCA9IHRydWVcclxuXHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbG9jYXRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBjb25zdCBjbGFzc2VzID0gW11cclxuICAgICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnNbaW5kZXhdXHJcbiAgICAgIGlmICghbG9jYXRpb24ubmFtZSkgY2xhc3Nlcy5wdXNoKCdlbXB0eScpXHJcbiAgICAgIGlmIChsb2NhdGlvbi5hY3RpdmUpIGNsYXNzZXMucHVzaCgnYWN0aXZlJylcclxuICAgICAgaWYgKGxvY2F0aW9uLmluaXQgJiYgIXRoaXMuc3RhcnRlZCkgY2xhc3Nlcy5wdXNoKCdpbml0JylcclxuICAgICAgbG9jYXRpb24uY3NzQ2xhc3NlcyA9IGNsYXNzZXMuam9pbignICcpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLmxhc3QgPSB0cnVlXHJcblxyXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XHJcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcclxuICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICEocCA9PT0gbnVsbCkpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgZWxlbSA9IGwucGFydGljaXBhbnRzW2ldIC8vIEluaXQgdHJhY2sgPSBvbmx5IHV1aWQsIHVwZGF0ZSBsb2NhdGlvbiBsaXN0IGNoYW5nZSBmb3IgdXVpZFxyXG5cclxuICAgICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFR5cGUgOiAke3R5cGVvZiBlbGVtfWApXHJcbiAgICAgICAgICBsZXQgcFxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBlbGVtID09PSAnc3RyaW5nJyB8fCBlbGVtIGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHAgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IGVsZW0gPT09IHAudXVpZCkgLy8gUmV0cmlldmUgcGFydGljaXBhbnQgZGF0YSBmcm9tIGxpc3QuXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICBwID0gdW5kZWZpbmVkIC8vIHBhcnRpY2lwYW50IGlzIGFscmVhZHkgcHJvY2Vzc2VkLlxyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50QWxyZWFkeVByb2Nlc3NlZCcpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH0gZWxzZSBwID0gdW5kZWZpbmVkXHJcblxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IG5ldyBfcGFydGljaXBhbnQocCkgLy8gcmVwbGFjZSB1dWlkIHdpdGggX3BhcnRpY2lwYW50XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBwYXJ0aWNpcGFudHMucHVzaCggbnVsbClcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICAnVW5kZWZpbmVkIHBhdGljaXBhbnQgd2hpbGUgcHJvY2Vzc2luZyBwYXJ0aWNpcGFudHMgYXJyYXknXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMuc29ydChzb3J0QnlSb2xlQW5kRGV4KSAvLyBUT0RPIDogdGVzdCBpZiBzb3J0aW5nIHdvcmtzXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgaW5pdFRyYWNrICgpIHtcclxuICAgIGlmIChcclxuICAgICAgIXRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0IHx8XHJcbiAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCA9PT0gMFxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBbXSAvLyAhISEhISEhIGxvY2F0aW9ucyB2cyBpbml0IGxvY2F0aW9ucyAhISFcclxuXHJcbiAgICBjb25zdCBpbml0ID0gdGhpcy5zdGFydGluZ0xpbmVcclxuICAgIGxldCBsb2NhdGlvbnNJbmRleFN0YXJ0LCBpbml0SW5kZXhTdGFydCwgbG9jYXRpb25zTGVuZ3RoXHJcbiAgICBpZiAoaW5pdC5sZW5ndGggPD0gMCkgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcclxuICAgIGVsc2UgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPj0gaW5pdC5sZW5ndGgpIHtcclxuICAgICAgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcclxuICAgIH0gZWxzZSBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gaW5pdC5sZW5ndGggLSB0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4XHJcblxyXG4gICAgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPD0gMCkgaW5pdEluZGV4U3RhcnQgPSAwXHJcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDw9IGluaXQubGVuZ3RoKSBpbml0SW5kZXhTdGFydCA9IDBcclxuICAgIGVsc2UgaW5pdEluZGV4U3RhcnQgPSB0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IC0gaW5pdC5sZW5ndGhcclxuXHJcbiAgICBpZiAobG9jYXRpb25zSW5kZXhTdGFydCA9PT0gMCkge1xyXG4gICAgICBsb2NhdGlvbnNMZW5ndGggPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9XHJcbiAgICAgICAgdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoICsgbG9jYXRpb25zSW5kZXhTdGFydFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpbml0Lmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8IDApIHtcclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICAgIGluZGV4IDwgTWF0aC5hYnModGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCk7XHJcbiAgICAgICAgICBpbmRleCsrXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpbml0LnB1c2goe1xyXG4gICAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxyXG4gICAgICAgICAgICBpbml0OiB0cnVlLFxyXG4gICAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNoYXNlTG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zKVxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9uc0xlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBsZXQgbG9jYXRpb24gPSB7fVxyXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBbXVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgaW5kZXggPj0gbG9jYXRpb25zSW5kZXhTdGFydCAmJlxyXG4gICAgICAgIGluZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydCA8IGNoYXNlTG9jYXRpb25zLmxpc3QubGVuZ3RoXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxvY2F0aW9uID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXHJcbiAgICAgICAgICBjaGFzZUxvY2F0aW9ucy5saXN0W2luZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydF1cclxuICAgICAgICApXHJcbiAgICAgICAgbG9jYXRpb24uaW5pdCA9IGZhbHNlXHJcbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpbmRleCA+PSBpbml0SW5kZXhTdGFydCAmJiBpbmRleCAtIGluaXRJbmRleFN0YXJ0IDwgaW5pdC5sZW5ndGgpIHtcclxuICAgICAgICBtZXJnZU9iamVjdChsb2NhdGlvbiwgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XSwge1xyXG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcclxuICAgICAgfVxyXG4gICAgICBsb2NhdGlvbi5maXJzdCA9IGZhbHNlXHJcbiAgICAgIGxvY2F0aW9uLmVuZCA9IGZhbHNlXHJcbiAgICAgIGxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsb2NhdGlvbnNcclxuICB9XHJcblxyXG4gIGdldCBzdGFydGluZ0xpbmUgKCkge1xyXG4gICAgLy8gR2V0IHByZXlzIGFuZCBjaGVjayBmb3IgZXNjYXBlZFxyXG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnN5c3RlbS5pbmNsdWRlRXNjYXBlZFxyXG4gICAgICA/IHRoaXMucHJleXNcclxuICAgICAgOiB0aGlzLnByZXlzPy5maWx0ZXIocCA9PiAhcC5kYXRhLmVzY2FwZWQpXHJcbiAgICAvLyBHZXQgY2hhc2Vyc1xyXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuc3lzdGVtLmluY2x1ZGVMYXRlY29tZXJzXHJcbiAgICAgID8gdGhpcy5jaGFzZXJzXHJcbiAgICAgIDogdGhpcy5jaGFzZXJzPy5maWx0ZXIoYyA9PiAhYy5kYXRhLmV4Y2x1ZGVkKVxyXG5cclxuICAgIC8vIFJlY3Vyc2l2aXR5ICEhIHdpdGggZ2V0UGFydGljaXBhbnRMb2NhdGlvbiBhbmQgZ2V0IHBhcnRpY2lwYW50c1xyXG5cclxuICAgIC8vIElmIG5vIHByZXkgb3Igbm8gY2hhc3NlclxyXG4gICAgLy8gaWYgKDAgPT0gY2hhc2Vycy5sZW5ndGgpIHtcclxuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBjaGFzZXJzJylcclxuICAgIC8vICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgLy8gfVxyXG4gICAgLy8gaWYgKDAgPT0gcHJleXMubGVuZ3RoKSB7XHJcbiAgICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gcHJleXMnKVxyXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gQnVpbGQgc3RhcnRpbmcgdHJhY2tcclxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBbXVxyXG5cclxuICAgIGNvbnN0IGNoYXNlcnNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YoY2hhc2VycylcclxuICAgIGNvbnN0IGNoYXNlcnNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YoY2hhc2VycylcclxuICAgIGNvbnN0IHByZXlzTWluTW92ID0gdGhpcy5maW5kTWluTW92KHByZXlzKVxyXG4gICAgY29uc3QgcHJleXNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YocHJleXMpXHJcblxyXG4gICAgaWYgKGNoYXNlcnNNaW5Nb3YgIT09IC0xICYmIGNoYXNlcnNNYXhNb3YgIT09IC0xKSB7XHJcbiAgICAgIC8vIEFkZCBjaGFzZXJzIHRvIHRoZSB0cmFjay5cclxuICAgICAgZm9yIChsZXQgbW92ID0gY2hhc2Vyc01pbk1vdjsgbW92IDw9IGNoYXNlcnNNYXhNb3Y7IG1vdisrKSB7XHJcbiAgICAgICAgLy8gRmluZCBhbGwgd2l0aCB0aGF0IG1vdlxyXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xyXG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcclxuICAgICAgICAgIGluaXQ6IHRydWUsXHJcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdCA9IGNoYXNlcnNcclxuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXHJcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kZXggLSBiLmRleClcclxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XHJcbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGNoYXNlVHJhY2sucHVzaChsb2NhdGlvbilcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWRkIHNwYWNlIGJldHdlZW4gY2hhc2VycyBhbmQgcHJleXMuXHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN5c3RlbS5zdGFydGluZ1JhbmdlOyBpbmRleCsrKSB7XHJcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKHtcclxuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXHJcbiAgICAgICAgICBpbml0OiB0cnVlLFxyXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJleXNNaW5Nb3YgIT09IC0xICYmIHByZXlzTWF4TW92ICE9PSAtMSkge1xyXG4gICAgICAvLyBBZGQgcHJleXMgdG8gdGhlIHRyYWNrLlxyXG4gICAgICBmb3IgKGxldCBtb3YgPSBwcmV5c01pbk1vdjsgbW92IDw9IHByZXlzTWF4TW92OyBtb3YrKykge1xyXG4gICAgICAgIC8vIEZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcclxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcclxuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXHJcbiAgICAgICAgICBpbml0OiB0cnVlLFxyXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBwcmV5c1xyXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PT0gcC5hZGp1c3RlZE1vdilcclxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxyXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cclxuICAgICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHAudXVpZClcclxuICAgICAgICApXHJcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNoYXNlVHJhY2tcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uc0xpc3QgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIC8vIFJlbW92ZSBhbGwgdW5uZWNlc3NhcnkgaXRlbXMgKGNzc0NsYXNzLCApXHJcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxpc3QpXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcclxuICAgICAgeyAnc3lzdGVtLmxvY2F0aW9ucy5saXN0JzogdXBkYXRlZExpc3QgfSxcclxuICAgICAgeyByZW5kZXIgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlTG9jYXRpb24gKGxvY2F0aW9uVXVpZCwgdXBkYXRlRGF0YSwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xyXG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXHJcbiAgICBjb25zdCB1cGRhdGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh1cGRhdGVEYXRhKVxyXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcclxuICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcclxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QobG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLCB1cGRhdGUsIHtcclxuICAgICAgb3ZlcndyaXRlOiB0cnVlXHJcbiAgICB9KVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcclxuICB9XHJcblxyXG4gIGNsZWFuTG9jYXRpb25zTGlzdCAobGlzdCkge1xyXG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShsaXN0KVxyXG4gICAgY29uc3QgcGFydGlwYW50c1V1aWRBcnJheSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5tYXAocCA9PiBwLnV1aWQpXHJcblxyXG4gICAgdXBkYXRlZExpc3QuZm9yRWFjaChsID0+IHtcclxuICAgICAgLy8gZGVsZXRlIGwuYWN0aXZlXHJcbiAgICAgIGRlbGV0ZSBsLmNzc0NsYXNzZXNcclxuICAgICAgZGVsZXRlIGwuZmlyc3RcclxuICAgICAgZGVsZXRlIGwubGFzdFxyXG4gICAgICBkZWxldGUgbC5lbmRcclxuICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIShwID09PSBudWxsKSkgLy8gUmVtb3ZlIG51bGwgZWxlbWVudHNcclxuICAgICAgICAgIC8vIFJlcGxhY2UgX1BhcnRpY2lwYW50cyBieSB1dWlkXHJcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHNbaV0uZGF0YT8udXVpZCkge1xyXG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IGwucGFydGljaXBhbnRzW2ldLmRhdGEudXVpZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHVua293biBwYXJ0aWNpY3BhbnRzXHJcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxyXG4gICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZExpc3RcclxuICB9XHJcblxyXG4gIGFzeW5jIGluc2VydExvY2F0aW9uIChcclxuICAgIGluc2VydEF0VXVpZCxcclxuICAgIHsgc2hpZnQgPSAwLCBsb2NEYXRhID0ge30sIHJlbmRlciA9IHRydWUgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICBkZWxldGUgbC5hY3RpdmVcclxuICAgIH0pXHJcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGluc2VydEF0VXVpZCA9PT0gbC51dWlkKVxyXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3TG9jYXRpb25JbmRleCA9IGxvY2F0aW9uSW5kZXggKyBzaGlmdFxyXG4gICAgaWYgKG5ld0xvY2F0aW9uSW5kZXggPiBsb2NhdGlvbnMubGVuZ3RoKSByZXR1cm4gZmFsc2VcclxuICAgIGNvbnN0IG5ld0xvY2F0aW9uID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUobG9jRGF0YSlcclxuICAgIG5ld0xvY2F0aW9uLnV1aWQgPSB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpXHJcbiAgICBuZXdMb2NhdGlvbi5pbml0ID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmluaXRcclxuICAgIG5ld0xvY2F0aW9uLmFjdGl2ZSA9IHRydWVcclxuICAgIGxvY2F0aW9ucy5zcGxpY2UobmV3TG9jYXRpb25JbmRleCwgMCwgbmV3TG9jYXRpb24pXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbW92ZUxvY2F0aW9uICh1dWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gdXVpZCA9PT0gbC51dWlkKVxyXG4gICAgbG9jYXRpb25zLnNwbGljZShsb2NhdGlvbkluZGV4LCAxKVxyXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XHJcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxyXG4gICAgfSlcclxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBsZXQgaW5kZXggPSBsb2NhdGlvbkluZGV4IC0gMVxyXG4gICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCA9IDBcclxuICAgICAgbG9jYXRpb25zW2luZGV4XS5hY3RpdmUgPSB0cnVlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGFjdGl2YXRlTG9jYXRpb24gKFxyXG4gICAgbG9jYXRpb25VdWlkLFxyXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cclxuICApIHtcclxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKGxvY2F0aW9uVXVpZCwge1xyXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uXHJcbiAgICB9KVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSwgeyByZW5kZXIgfSlcclxuICB9XHJcblxyXG4gIGdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhICh7XHJcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcclxuICAgIGh0bWwgPSBudWxsXHJcbiAgfSA9IHt9KSB7XHJcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XHJcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXHJcbiAgICAgIDogW11cclxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICBkZWxldGUgbC5hY3RpdmVcclxuICAgIH0pXHJcbiAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubG9jYXRpb25zLmxpc3QnXSA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcclxuXHJcbiAgICBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xyXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID0gMFxyXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9IC0xXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBkYXRlRGF0YVxyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEgKFxyXG4gICAgbG9jYXRpb25VdWlkLFxyXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBpZiAoIWxvY2F0aW9uVXVpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSh7XHJcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxyXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxyXG4gICAgICA6IFtdXHJcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcclxuICAgICAgZGVsZXRlIGwuYWN0aXZlXHJcbiAgICAgIGlmIChsb2NhdGlvblV1aWQgPT09IGwudXVpZCkgbC5hY3RpdmUgPSB0cnVlXHJcbiAgICB9KVxyXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXHJcbiAgICAvLyBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcclxuICAgIGlmIChzY3JvbGxUb0xvY2F0aW9uKSB7XHJcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxyXG4gICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxyXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9XHJcbiAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihsb2NhdGlvblV1aWQsIHsgaHRtbCB9KVxyXG4gICAgICAvLyBhd2FpdCB0aGlzLnNldGNoYXNlVHJhY2tTY3JvbGwoe1xyXG4gICAgICAvLyAgIGZyb206IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbixcclxuICAgICAgLy8gICB0bzogdGhpcy5jaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvblxyXG4gICAgICAvLyB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcclxuICB9XHJcblxyXG4gIC8vIExvY2F0aW9ucyBuYXZpZ2F0aW9uXHJcbiAgZ2V0IGFjdGl2ZUxvY2F0aW9uICgpIHtcclxuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnMuZmluZChsID0+IGwuYWN0aXZlKVxyXG4gICAgaWYgKCFsb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKGxvY2F0aW9uLnBhcnRpY2lwYW50cz8ubGVuZ3RoKSBsb2NhdGlvbi5oYXNQYXJ0aWNpcGFudCA9IHRydWVcclxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxyXG4gICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxyXG4gICAgICBpZiAodGVzdCkge1xyXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXHJcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbG9jYXRpb25cclxuICB9XHJcblxyXG4gIGdldCBwcmV2aW91c0xvY2F0aW9uICgpIHtcclxuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcclxuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5sb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC5hY3RpdmUpXHJcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IDApIHJldHVybiB1bmRlZmluZWRcclxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnNbYWN0aXZlSW5kZXggLSAxXVxyXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXHJcbiAgICBpZiAoYWN0b3IpIHtcclxuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXHJcbiAgICAgIGlmICh0ZXN0KSB7XHJcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcclxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBsb2NhdGlvblxyXG4gIH1cclxuXHJcbiAgZ2V0IG5leHRMb2NhdGlvbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxyXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSB0aGlzLmxvY2F0aW9ucy5sZW5ndGggLSAxKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4ICsgMV1cclxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxyXG4gICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxyXG4gICAgICBpZiAodGVzdCkge1xyXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXHJcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbG9jYXRpb25cclxuICB9XHJcblxyXG4gIGFzeW5jIGxvY2F0b3JEcm9wcGVkIChkYXRhKSB7XHJcbiAgICBhd2FpdCB0aGlzLnNldExvY2F0aW9uQ29vcmRpbmF0ZXMoXHJcbiAgICAgIGRhdGEubG9jYXRpb25VdWlkLFxyXG4gICAgICBkYXRhLngsXHJcbiAgICAgIGRhdGEueSxcclxuICAgICAgZGF0YS5zY2VuZVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0TG9jYXRpb25Db29yZGluYXRlcyAoXHJcbiAgICBsb2NhdGlvblV1aWQsXHJcbiAgICB4LFxyXG4gICAgeSxcclxuICAgIHNjZW5lSWQsXHJcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXHJcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXMgPSB7IHgsIHksIHNjZW5lOiBzY2VuZUlkIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyAoeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xyXG4gICAgaWYgKHRoaXMuYWN0aXZlTG9jYXRpb24pIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzKHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZCwge1xyXG4gICAgICAgIHJlbmRlclxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzIChsb2NhdGlvblV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxyXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcclxuICAgIGRlbGV0ZSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXNcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcclxuICB9XHJcblxyXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudEhhdmVBY3RpdmVMb2NhdGlvblNraWxsICgpe1xyXG4gIC8vICAgaWYoICF0aGlzLmFjdGl2ZUFjdG9yKSByZXR1cm4gZmFsc2VcclxuICAvLyAgIGlmKCB0aGlzLmFjdGl2ZUFjdG9yLmZpbmQoIHRoaXMuYWN0aXZlTG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpKSByZXR1cm4gdHJ1ZVxyXG4gIC8vICAgcmV0dXJuIGZhbHNlXHJcbiAgLy8gfVxyXG5cclxuICAvLyBIYW5kbGUgbWVjaGFuaWNzXHJcbiAgYXN5bmMgY3V0VG9UaGVDaGFzZSAoKSB7XHJcbiAgICBpZiAoIXRoaXMuYWxsSGF2ZVNwZWVkUm9sbCkge1xyXG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEFsbEhhdmVTcGVlZFJvbGwnKSlcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aCA8IDIpIHtcclxuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZWVkTWluMlBhcnRpY2lwYW50cycpKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFsbEhhdmVWYWxpZE1vdikge1xyXG4gICAgICAvLyBUT0RPIDogQ2hlY2sgZm9yIHNwZWVkIHJvbGwgPz9cclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBtb3ZlbWVudCBhY3Rpb25zXHJcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXHJcbiAgICAgIGNvbnN0IG1pbk1vdiA9IHRoaXMuZmluZE1pbk1vdih0aGlzLmFjdHVhbFBhcnRpY2lwYW50cylcclxuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgLy8gcC5kYXRhLm1vdmVtZW50QWN0aW9uID0gMSArIChwLmFkanVzdGVkTW92IC0gbWluTW92KVxyXG4gICAgICAgIHAuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKG1pbk1vdilcclxuICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwLm1vdmVtZW50QWN0aW9uXHJcbiAgICAgICAgcC5ib251c0RpY2UgPSAwXHJcbiAgICAgIH0pXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdCh0aGlzLmxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXHJcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVzdGFydCAoKSB7XHJcbiAgICAvLyBhd2FpdCB0aGlzLmNsZWFuTG9jYXRpb25zKCkgLy9UcmFuc2ZlcnJlZCBpbiB1cGRhdGVMb2NhdGlvbkxpc3RcclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zLmZpbHRlcihsID0+ICFsLmluaXQpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAobG9jYXRpb25zW2ldLnBhcnRpY2lwYW50cykgbG9jYXRpb25zW2ldLnBhcnRpY2lwYW50cyA9IFtdXHJcbiAgICAgIGlmIChsb2NhdGlvbnNbaV0uYWN0aXZlKSBkZWxldGUgbG9jYXRpb25zW2ldLmFjdGl2ZVxyXG4gICAgfVxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcclxuICAgICAgOiBbXVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNpcGFudHNEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChwYXJ0aWNpcGFudHNEYXRhW2ldLmFjdGl2ZSkgZGVsZXRlIHBhcnRpY2lwYW50c0RhdGFbaV0uYWN0aXZlXHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLnNldGNoYXNlVHJhY2tTY3JvbGwoMCwgMCwgeyByZW5kZXI6IGZhbHNlIH0pXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50c0RhdGEsIHsgcmVuZGVyOiBmYWxzZSB9KVxyXG4gICAgYXdhaXQgdGhpcy5zdG9wKClcclxuICB9XHJcblxyXG4gIGdldExvY2F0aW9uU2hpZnQgKGxvY2F0aW9uVXVpZCwgeyBza2lwID0gMSB9ID0ge30pIHtcclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxyXG4gICAgY29uc3Qgb3JpZ2luSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXHJcbiAgICBjb25zdCBkZXN0aW5hdGlvbkluZGV4ID0gb3JpZ2luSW5kZXggKyBza2lwXHJcbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcclxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4ID49IGxvY2F0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV1cclxuICAgIH1cclxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4IDwgMCkgcmV0dXJuIGxvY2F0aW9uc1swXVxyXG4gICAgcmV0dXJuIGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XSAvLyBFUlJPUiBNT1ZFIDIgRk9SIFNLSVAgKzFcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbW92ZVBhcnRpY2lwYW50IChwYXJ0aWNpcGFudFV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcclxuICAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcclxuICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcclxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZW1vdmVQYXJ0aWNpcGFudCcpLFxyXG4gICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50SGludCcsIHtcclxuICAgICAgICBuYW1lOiBwLm5hbWVcclxuICAgICAgfSl9PC9wPmAsXHJcbiAgICAgIHllczogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcclxuICAgICAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICAgIClcclxuICAgICAgICBjb25zdCBuZXdQYXJ0aWNpcGFudHNEYXRhID0gcGFydGljaXBhbnRzRGF0YS5maWx0ZXIoXHJcbiAgICAgICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gcC51dWlkXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uc0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcclxuICAgICAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGxvY2F0aW9uc0RhdGEuZm9yRWFjaChsID0+IHtcclxuICAgICAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgdXVpZCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHV1aWRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMobmV3UGFydGljaXBhbnRzRGF0YSwgeyByZW5kZXI6IGZhbHNlIH0pXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoXHJcbiAgICBwYXJ0aWNpcGFudCxcclxuICAgIHtcclxuICAgICAgcmVuZGVyID0gdHJ1ZSxcclxuICAgICAgbG9jYXRpb25VdWlkID0gbnVsbCxcclxuICAgICAgcmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxyXG4gICAgICB1cGRhdGUgPSBmYWxzZVxyXG4gICAgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICA6IFtdXHJcblxyXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWRcclxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZCkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkXHJcbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS51cGRhdGUpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZVxyXG5cclxuICAgIGlmICghcGFydGljaXBhbnQudXVpZCkge1xyXG4gICAgICBsZXQgdW5pcXVlID0gZmFsc2VcclxuICAgICAgd2hpbGUgKCF1bmlxdWUpIHtcclxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxyXG4gICAgICAgIHVuaXF1ZSA9XHJcbiAgICAgICAgICBwYXJ0aWNpcGFudHNEYXRhLmZpbHRlcihwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZCkubGVuZ3RoID09PSAwXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodXBkYXRlKSB7XHJcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24pIHtcclxuICAgICAgICBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb25cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKVxyXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW2luZGV4XSA9IHBhcnRpY2lwYW50LmRhdGFcclxuICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNEYXRhLnB1c2gocGFydGljaXBhbnQuZGF0YSlcclxuXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7XHJcbiAgICAgIHJlbmRlcjogcmVuZGVyICYmICF0aGlzLnN0YXJ0ZWQgJiYgIXRoaXMucmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnNcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKSB7XHJcbiAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLnNsb3dlc3RQYXJ0aWNpcGFudD8uYWRqdXN0ZWRNb3ZcclxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcclxuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiBwLmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhzbG93ZXN0KSlcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7XHJcbiAgICAgICAgcmVuZGVyOiByZW5kZXIgJiYgIXRoaXMuc3RhcnRlZFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5zdGFydGVkICYmXHJcbiAgICAgICEocGFydGljaXBhbnQuZGF0YS5lc2NhcGVkIHx8IHBhcnRpY2lwYW50LmRhdGEuZXhjbHVkZWQpXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgbG9jYXRpb25zRGF0YSA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XHJcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgICAgICA6IFtdXHJcblxyXG4gICAgICBpZiAobG9jYXRpb25zRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yRW1wdHlMb2NhdGlvbnNMaXN0JylcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zRGF0YS5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcclxuICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSBsb2NhdGlvbkluZGV4ID0gMFxyXG4gICAgICBpZiAoIWxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzKSB7XHJcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMgPSBbXVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChcclxuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5maW5kSW5kZXgoXHJcbiAgICAgICAgICBwID0+IHAgPT09IHBhcnRpY2lwYW50LnV1aWRcclxuICAgICAgICApID09PSAtMVxyXG4gICAgICApIHtcclxuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50LnV1aWQpXHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBlZGl0UGFydGljaXBhbnQgKFxyXG4gICAgcGFydGljaXBhbnRVdWlkLFxyXG4gICAge1xyXG4gICAgICB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxyXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcclxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXHJcbiAgICAgIGFjdGl2YXRlUGFydGljaXBhbnQgPSB0cnVlLFxyXG4gICAgICByZW5kZXIgPSB0cnVlXHJcbiAgICB9ID0ge31cclxuICApIHt9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1vdmUgYSBwYXJ0aWNpcGFudCBmb3IgYSBudW1iZXIgb2YgbG9jYXRpb25zLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHBhcnRpY2lwYW50VXVpZCAgICAgVXVpZCBvZiBwYXJ0aWNpcGFudFxyXG4gICAqIEBwYXJhbSB7Kn0gbG9jYXRpb25Nb3ZlZCAgICAgICAgICAgICAgICAgTnVtYmVyIG9mIGxvY2F0aW9ucyBtb3ZyZWRcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAgICAgICAgICAgICAgICAgICAgICAgIFRvdGFsIG51bWJlciBvZiBsb2NhdGlvbnMgY3Jvc3NlZFxyXG4gICAqL1xyXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudCAoXHJcbiAgICBwYXJ0aWNpcGFudFV1aWQsXHJcbiAgICBsb2NhdGlvbk1vdmVkLFxyXG4gICAge1xyXG4gICAgICB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxyXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcclxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXHJcbiAgICAgIGFjdGl2YXRlUGFydGljaXBhbnQgPSB0cnVlLFxyXG4gICAgICByZW5kZXIgPSB0cnVlXHJcbiAgICB9ID0ge31cclxuICApIHtcclxuICAgIC8vIGNvbnN0IHNlbGVjdG9yID0gYCNpdGVtLSR7dGhpcy5pZH0gLmNoYXNlLXRyYWNrYFxyXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgbW92ZVBhcnRpY2lwYW50IDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcclxuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlXHJcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+XHJcbiAgICAgIGwucGFydGljaXBhbnRzPy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpXHJcbiAgICApXHJcbiAgICBsZXQgZGVzdGluYXRpb25JbmRleCA9IG9yaWdpbkluZGV4ICsgbG9jYXRpb25Nb3ZlZFxyXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPiBsb2NhdGlvbnMubGVuZ3RoIC0gMSkge1xyXG4gICAgICBkZXN0aW5hdGlvbkluZGV4ID0gbG9jYXRpb25zLmxlbmd0aCAtIDFcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IDApIHtcclxuICAgICAgZGVzdGluYXRpb25JbmRleCA9IDBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b3RhbE1vdmUgPSBkZXN0aW5hdGlvbkluZGV4IC0gb3JpZ2luSW5kZXhcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXHJcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgKVxyXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxyXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXHJcbiAgICApXHJcblxyXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xyXG4gICAgICBpZiAoIXBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcclxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XHJcbiAgICAgICAgICAgIHBhcnRpY2lwYW50VXVpZDogdGhpcy5wYXJ0aWNpcGFudFV1aWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgfVxyXG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IE1hdGguYWJzKHRvdGFsTW92ZSkpIHtcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudE5vdEVub3VnaE1vdmVtZW50Jywge1xyXG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXHJcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgfVxyXG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygwIC0gTWF0aC5hYnModG90YWxNb3ZlKSlcclxuICAgICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxyXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGFcclxuICAgICAgKVxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShcclxuICAgICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxyXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XHJcbiAgICAgIClcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvdGFsTW92ZSAhPT0gMCkge1xyXG4gICAgICBhd2FpdCB0aGlzLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXHJcbiAgICAgICAgcGFydGljaXBhbnRVdWlkLFxyXG4gICAgICAgIGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XS51dWlkLFxyXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XHJcbiAgICAgIClcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjdGl2YXRlUGFydGljaXBhbnQpIHtcclxuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwge1xyXG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb24sXHJcbiAgICAgICAgYWN0aXZhdGVMb2NhdGlvbixcclxuICAgICAgICByZW5kZXI6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhY3RpdmF0ZUxvY2F0aW9uICYmICFhY3RpdmF0ZVBhcnRpY2lwYW50KSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVMb2NhdGlvbihsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0udXVpZCwge1xyXG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb24sXHJcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICBtb2RpZmllZCA9IHRydWVcclxuICAgIH1cclxuXHJcbiAgICBpZiAobW9kaWZpZWQgJiYgcmVuZGVyKSBhd2FpdCB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxyXG4gICAgcmV0dXJuIHRvdGFsTW92ZVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgbW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiAoXHJcbiAgICBwYXJ0aWNpcGFudFV1aWQsXHJcbiAgICBsb2NhdGlvblV1aWQsXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxyXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcclxuICAgICAgYW5pbWF0ZSA9IG51bGwsXHJcbiAgICAgIG1vdmVUb2tlbiA9IHRydWUsXHJcbiAgICAgIHJlbmRlciA9IHRydWVcclxuICAgIH0gPSB7fVxyXG4gICkge1xyXG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXHJcblxyXG4gICAgLy8gRmluZCBkZXN0aW5hdGlvbiBsb2NhdGlvbi5cclxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcclxuICAgIGlmICghZGVzdGluYXRpb24pIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICBgRmFpbGVkIHRvIG1vdmUgJHtwYXJ0aWNpcGFudFV1aWR9LiBMb2NhdGlvbiAke2xvY2F0aW9uVXVpZH0gdW5rbm93bmBcclxuICAgICAgKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIG9yaWdpbiBsb2NhdGlvblxyXG4gICAgY29uc3Qgb3JpZ2luID0gbG9jYXRpb25zLmZpbmQobCA9PlxyXG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxyXG4gICAgKVxyXG5cclxuICAgIGlmICghb3JpZ2luKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmaW5kICR7cGFydGljaXBhbnRVdWlkfSBpbiBsb2NhdGlvbnNgKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cykgZGVzdGluYXRpb24ucGFydGljaXBhbnRzID0gW11cclxuICAgIGlmIChkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMuaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKSkgcmV0dXJuIC8vIG1vdmluZyBwYXJ0aWNwYW50IHRvIGEgbG9jYXRpb24gaGUgYWxyZWFkeSBvY2N1cGllc1xyXG4gICAgZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnRVdWlkKVxyXG4gICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleClcclxuXHJcbiAgICBjb25zdCBvbGRQYXJ0aWNpcGFudHNMaXN0ID0gb3JpZ2luLnBhcnRpY2lwYW50cy5maWx0ZXIoXHJcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwXHJcbiAgICApXHJcbiAgICBvcmlnaW4ucGFydGljaXBhbnRzID0gb2xkUGFydGljaXBhbnRzTGlzdFxyXG5cclxuICAgIGlmIChtb3ZlVG9rZW4gJiYgZGVzdGluYXRpb24uY29vcmRpbmF0ZXMpIHtcclxuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcclxuICAgICAgY29uc3QgcGFydGljcGFudERvY3VtZW50ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoXHJcbiAgICAgICAgcGFydGljaXBhbnQ/LmRhdGE/LmRvY1V1aWRcclxuICAgICAgKVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcGFydGljcGFudERvY3VtZW50ICYmXHJcbiAgICAgICAgIShcclxuICAgICAgICAgIC8qIHBhcnRpY3BhbnREb2N1bWVudC5pc1Rva2VuIHx8ICovIChcclxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50IGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCB8fFxyXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQ/Lm9iamVjdCBpbnN0YW5jZW9mIFRva2VuXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ05vIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFjdG9yJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmUgIT09IGdhbWUuc2NlbmVzLnZpZXdlZC51dWlkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0NhdXRpb24gdGhlIHNjZW5lIGlzIG5vdCB0aGUgYWN0aXZlIHNjZW5lJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcnRpY3BhbnREb2N1bWVudC5wYXJlbnQ/LnV1aWQgIT09IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lKSB7XHJcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JUb2tlbk5vdE9uU2NlbmUnKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBzY2VuZSA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KFxyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgbGV0IHggPSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy54XHJcbiAgICAgICAgICBjb25zdCB5ID0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMueVxyXG4gICAgICAgICAgbGV0IHRhcmdldFJlY3QgPSBuZXcgTm9ybWFsaXplZFJlY3RhbmdsZShcclxuICAgICAgICAgICAgeCxcclxuICAgICAgICAgICAgeSxcclxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC53aWR0aCxcclxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC5oZWlnaHRcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFtdXHJcbiAgICAgICAgICBsZXQgZm91bmRGcmVlU3BhY2UgPSBmYWxzZVxyXG4gICAgICAgICAgd2hpbGUgKCFmb3VuZEZyZWVTcGFjZSkge1xyXG4gICAgICAgICAgICBjb25zdCBvdmVybGFwaW5nVG9rZW4gPSBzY2VuZS50b2tlbnMuZmluZCh0ID0+IHtcclxuICAgICAgICAgICAgICBpZiAodC5pZCA9PT0gcGFydGljcGFudERvY3VtZW50LmlkKSByZXR1cm4gZmFsc2UgLy8gWW91IGNhbid0IG92ZXJsYXAgd2l0aCB5b3Vyc2VsZlxyXG4gICAgICAgICAgICAgIHJldHVybiB0Lm9iamVjdC5ib3VuZHMuaW50ZXJzZWN0cyh0YXJnZXRSZWN0KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgeCA9IG92ZXJsYXBpbmdUb2tlbi5vYmplY3QuYm91bmRzLnJpZ2h0ICsgMVxyXG4gICAgICAgICAgICAgIHRhcmdldFJlY3QgPSBuZXcgTm9ybWFsaXplZFJlY3RhbmdsZShcclxuICAgICAgICAgICAgICAgIHgsXHJcbiAgICAgICAgICAgICAgICB5LFxyXG4gICAgICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC53aWR0aCxcclxuICAgICAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3QuaGVpZ2h0XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9IGVsc2UgZm91bmRGcmVlU3BhY2UgPSB0cnVlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdXBkYXRlLnB1c2goe1xyXG4gICAgICAgICAgICBfaWQ6IHBhcnRpY3BhbnREb2N1bWVudC5pZCxcclxuICAgICAgICAgICAgeCxcclxuICAgICAgICAgICAgeVxyXG4gICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAvLyBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2goIHBVdWlkID0+e1xyXG4gICAgICAgICAgLy8gICBjb25zdCBwID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwVXVpZClcclxuICAgICAgICAgIC8vICAgY29uc3QgcERvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBwPy5kYXRhPy5kb2NVdWlkKVxyXG4gICAgICAgICAgLy8gICBpZiggcERvYyBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgJiYgcERvYy5vYmplY3QgaW5zdGFuY2VvZiBUb2tlbil7XHJcbiAgICAgICAgICAvLyAgICAgdXBkYXRlcyA9IHRydWVcclxuICAgICAgICAgIC8vICAgICB1cGRhdGUucHVzaCh7XHJcbiAgICAgICAgICAvLyAgICAgICBfaWQ6IHBEb2MuaWQsXHJcbiAgICAgICAgICAvLyAgICAgICB4OngsXHJcbiAgICAgICAgICAvLyAgICAgICB5OnlcclxuICAgICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgICAgLy8gICAgIGlmKCBwRG9jLm9iamVjdC53aWR0aCkgeCArPSBwRG9jLm9iamVjdC53aWR0aFxyXG4gICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAvLyB9KVxyXG4gICAgICAgICAgY29uc3Qgc2hvd1Rva2VuTW92ZW1lbnQgPVxyXG4gICAgICAgICAgICB0eXBlb2YgYW5pbWF0ZSA9PT0gJ2Jvb2xlYW4nXHJcbiAgICAgICAgICAgICAgPyBhbmltYXRlXHJcbiAgICAgICAgICAgICAgOiB0aGlzLnN5c3RlbS5zaG93VG9rZW5Nb3ZlbWVudFxyXG4gICAgICAgICAgYXdhaXQgcGFydGljcGFudERvY3VtZW50LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cyhcclxuICAgICAgICAgICAgJ1Rva2VuJyxcclxuICAgICAgICAgICAgdXBkYXRlLFxyXG4gICAgICAgICAgICB7IGFuaW1hdGU6IHNob3dUb2tlbk1vdmVtZW50IH1cclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxyXG4gIH1cclxuXHJcbiAgLy8gSGFuZGxlIHNjcm9sbGluZ1xyXG4gIGFzeW5jIHNldGNoYXNlVHJhY2tTY3JvbGwgKHtcclxuICAgIGZyb20gPSB1bmRlZmluZWQsXHJcbiAgICB0byA9IC0xLFxyXG4gICAgcmVuZGVyID0gdHJ1ZVxyXG4gIH0gPSB7fSkge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXHJcbiAgICAgIHtcclxuICAgICAgICAnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nOlxyXG4gICAgICAgICAgdW5kZWZpbmVkID09PSBmcm9tID8gdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIDogZnJvbSxcclxuICAgICAgICAnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJzpcclxuICAgICAgICAgIHVuZGVmaW5lZCA9PT0gdG8gPyB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gOiB0b1xyXG4gICAgICB9LFxyXG4gICAgICB7IHJlbmRlciB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXQgY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiAoKSB7XHJcbiAgICBjb25zdCBodG1sID0gdGhpcy5zaGVldD8uX2VsZW1lbnRcclxuICAgIGlmICghaHRtbCkgcmV0dXJuIC0xXHJcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxyXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcclxuICAgIC8vIGNvbnN0IHNlbGVjdG9yID0gYCNpdGVtLSR7dGhpcy5pZH0gLmNoYXNlLXRyYWNrYFxyXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgREFUQSA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpfWApXHJcbiAgICAvLyByZXR1cm4gJCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KClcclxuXHJcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBEQVRBIDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKCcjaXRlbS1WTmh0cXhBMndKSm5XU3RUIC5jaGFzZS10cmFjaycpLnNjcm9sbExlZnQoKX0uQ2hhc2UgdHJhY2sgb2Zmc2V0OiAke2NoYXNlVHJhY2suc2Nyb2xsTGVmdH0sIERvY3VtZW50IG9mZnNldDoke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpdGVtLVZOaHRxeEEyd0pKbldTdFQnKS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKS5zY3JvbGxMZWZ0fWApXHJcbiAgICByZXR1cm4gY2hhc2VUcmFjay5zY3JvbGxMZWZ0XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm4gdGhlIG9mZnNldCBwb3NpdGlvbiBvZiB0aGUgYWN0aXZlIGxvY2F0aW9uXHJcbiAgICogdGhlIGNlbnRlciBvZiB0aGUgYWN0aXZlIGxvY2F0aW9uIHdpbGwgYmUgY2VudGVyZWRcclxuICAgKiBpbiB0aGUgcGFyZW50LlxyXG4gICAqL1xyXG4gIGdldCBjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMuYWN0aXZlTG9jYXRpb24pIHJldHVybiAtMVxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24odGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24gKGxvY2F0aW9uVXVpZCwgeyBodG1sID0gbnVsbCB9KSB7XHJcbiAgICBjb25zdCBodG1sRWxlbWVudCA9IGh0bWwgfHwgdGhpcy5zaGVldD8uX2VsZW1lbnRcclxuICAgIGlmICghaHRtbEVsZW1lbnQgfHwgIWh0bWxFbGVtZW50WzBdKSByZXR1cm4gLTFcclxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sRWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxyXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcclxuICAgIGNvbnN0IGFjdGl2ZUxvY2F0aW9uRWxlbWVudCA9IGNoYXNlVHJhY2sucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC5jaGFzZS1sb2NhdGlvbltkYXRhLXV1aWQ9XCIke2xvY2F0aW9uVXVpZH1cIl1gXHJcbiAgICApXHJcbiAgICBpZiAoIWFjdGl2ZUxvY2F0aW9uRWxlbWVudCkgcmV0dXJuIC0xXHJcbiAgICBjb25zdCBsZWZ0U2Nyb2xsID1cclxuICAgICAgYWN0aXZlTG9jYXRpb25FbGVtZW50Lm9mZnNldExlZnQgK1xyXG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQuY2xpZW50V2lkdGggLyAyIC1cclxuICAgICAgY2hhc2VUcmFjay5jbGllbnRXaWR0aCAvIDJcclxuICAgIHJldHVybiBsZWZ0U2Nyb2xsIDwgMCA/IDAgOiBNYXRoLmZsb29yKGxlZnRTY3JvbGwpXHJcbiAgfVxyXG5cclxuICAvLyBTaG91bGQgYmUgcmVtb3ZlZFxyXG4gIGZpbmRNaW5Nb3YgKGxpc3QpIHtcclxuICAgIGlmICghbGlzdD8ubGVuZ3RoKSByZXR1cm4gLTFcclxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cclxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxyXG4gICAgKS5hZGp1c3RlZE1vdlxyXG4gIH1cclxuXHJcbiAgZmluZE1heE1vdiAobGlzdCkge1xyXG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxyXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxyXG4gICAgICBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XHJcbiAgICApLmFkanVzdGVkTW92XHJcbiAgfVxyXG5cclxuICAvLyBVdGlsaXRpZXNcclxuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcclxuICAgIHJldHVybiBsaXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcclxuICB9XHJcblxyXG4gIGdldCBzdGFydGVkICgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcpXHJcbiAgfVxyXG5cclxuICBhc3luYyBzdGFydCAoKSB7XHJcbiAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcclxuICAgIGNvbnN0IHJlbVNpemUgPSBOdW1iZXIocmVtU3RyaW5nLnJlcGxhY2UoJ3B4JywgJycpKVxyXG4gICAgY29uc3QgcENvdW50ID0gdGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMubGVuZ3RoXHJcbiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplLCA0MCAqIHJlbVNpemUpXHJcbiAgICB0aGlzLnNoZWV0Ll90YWJzWzBdLmFjdGl2ZSA9ICdzZXR1cCdcclxuICAgIHRoaXMuc2hlZXQucG9zaXRpb24ud2lkdGggPSB3aWR0aFxyXG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnLCB0cnVlKVxyXG4gICAgYXdhaXQgdGhpcy5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc3RvcCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy51bnNldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcpXHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZU5ld1V1aWQgKCkge1xyXG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXHJcbiAgfVxyXG5cclxuICBnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAocGFydGljaXBhbnRVdWlkKSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5hY3RvcikgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAgY29uc3QgbGlzdCA9IFtdXHJcbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cclxuICAgICAgbGlzdC5wdXNoKFxyXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcclxuICAgICAgKVxyXG4gICAgKVxyXG4gICAgbGlzdC5wdXNoKFxyXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAnQ29DNy5MdWNrJ1xyXG4gICAgICApfSlgXHJcbiAgICApXHJcbiAgICBsaXN0LnB1c2goXHJcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICdDb0M3LlNBTidcclxuICAgICAgKX0pYFxyXG4gICAgKVxyXG4gICAgcGFydGljaXBhbnQuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiBsaXN0LnB1c2gocy5uYW1lKSlcclxuICAgIHJldHVybiBsaXN0XHJcbiAgfVxyXG5cclxuICBnZXQgYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKCkge1xyXG4gICAgY29uc3QgcGFydGljaWNwYW50RGF0YSA9IHRoaXMuYWN0aXZlUGFydGljaXBhbnREYXRhXHJcbiAgICBpZiAoIXBhcnRpY2ljcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiB0aGlzLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKHBhcnRpY2ljcGFudERhdGEudXVpZClcclxuICB9XHJcblxyXG4gIGdldCBhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKCkge1xyXG4gICAgY29uc3QgbGlzdCA9IFtdXHJcbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cclxuICAgICAgbGlzdC5wdXNoKFxyXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcclxuICAgICAgKVxyXG4gICAgKVxyXG4gICAgbGlzdC5wdXNoKFxyXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcclxuICAgICAgICAnQ29DNy5MdWNrJ1xyXG4gICAgICApfSlgXHJcbiAgICApXHJcbiAgICBsaXN0LnB1c2goXHJcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICdDb0M3LlNBTidcclxuICAgICAgKX0pYFxyXG4gICAgKVxyXG5cclxuICAgIGdhbWUuQ29DNy5za2lsbExpc3Q/LmZvckVhY2gocyA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhbGlzdC5pbmNsdWRlcyhzLm5hbWUpICYmXHJcbiAgICAgICAgIXMubmFtZVxyXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgIC5pbmNsdWRlcyhgKCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJyl9KWAudG9Mb3dlckNhc2UoKSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcclxuICAgICAgfVxyXG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XHJcbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICBpZiAocC5hY3Rvcikge1xyXG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXMocy5uYW1lKSkgbGlzdC5wdXNoKHMubmFtZSlcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGxpc3Quc29ydChJbnRsLkNvbGxhdG9yKCkuY29tcGFyZSlcclxuICB9XHJcblxyXG4gIGdldCBhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NTaG9ydCAoKSB7XHJcbiAgICBjb25zdCBsaXN0ID0gW11cclxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PiBsaXN0LnB1c2goYCR7Yy5sYWJlbH1gKSlcclxuICAgIGxpc3QucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpfWApXHJcbiAgICBsaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWApXHJcblxyXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFsaXN0LmluY2x1ZGVzKHMubmFtZSkgJiZcclxuICAgICAgICAhcy5uYW1lXHJcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgLmluY2x1ZGVzKGAoJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKX0pYC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICApIHtcclxuICAgICAgICBsaXN0LnB1c2gocy5uYW1lKVxyXG4gICAgICB9XHJcbiAgICB9KSAvLyBUT0RPOiBSZW1vdmUgPz9cclxuICAgIHRoaXMucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgIGlmIChwLmFjdG9yKSB7XHJcbiAgICAgICAgcC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgIGlmICghbGlzdC5pbmNsdWRlcyhzLm5hbWUpKSBsaXN0LnB1c2gocy5uYW1lKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gbGlzdC5zb3J0KEludGwuQ29sbGF0b3IoKS5jb21wYXJlKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYW4gdGhlIGRhdGEgb2YgYWxsIHBhcmFzaXRlIHBhcnRpY2lwYW50cyBpbiBsb2NhdGlvbnMuXHJcbiAgICogU2hvdWxkIG5ldmVyIGhhcHBlblxyXG4gICAqL1xyXG4gIC8vIGFzeW5jIGNsZWFuTG9jYXRpb25zICgpIHtcclxuICAvLyAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAvLyAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xyXG4gIC8vICAgICBjb25zdCBwYXJ0aXBhbnRzVXVpZEFycmF5ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLm1hcChwID0+IHAudXVpZClcclxuICAvLyAgICAgaWYgKGwucGFydGljaXBhbnRzKSB7XHJcbiAgLy8gICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxyXG4gIC8vICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxyXG4gIC8vICAgICAgIClcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSlcclxuICAvLyAgIHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXHJcbiAgLy8gfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lICovXHJcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XHJcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgaWYgKHR5cGVvZiBkYXRhLnN5c3RlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBkYXRhLnN5c3RlbSA9IHt9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY29uc3RydWN0ID0gQ29DN1NraWxsLmd1ZXNzTmFtZVBhcnRzKGRhdGEubmFtZSlcclxuICAgICAgaWYgKCFjb25zdHJ1Y3QuaXNTcGVjaWFsaXphdGlvbikge1xyXG4gICAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IGRhdGEubmFtZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IGNvbnN0cnVjdC5za2lsbE5hbWVcclxuICAgICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGNvbnN0cnVjdC5zcGVjaWFsaXphdGlvblxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5zeXN0ZW0ucHJvcGVydGllcyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMgPSB7fVxyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXHJcbiAgICAgICAgaWYgKGNvbnN0cnVjdC5pc0ZpZ2h0aW5nIHx8IGNvbnN0cnVjdC5pc0ZpcmVhcm1zKSB7XHJcbiAgICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9IHRydWVcclxuICAgICAgICAgIGlmIChjb25zdHJ1Y3QuaXNGaWdodGluZykge1xyXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBndWVzc05hbWVQYXJ0cyAoc2tpbGxOYW1lKSB7XHJcbiAgICBjb25zdCBvdXRwdXQgPSB7XHJcbiAgICAgIHNraWxsTmFtZSxcclxuICAgICAgc3BlY2lhbGl6YXRpb246ICcnLFxyXG4gICAgICBpc1NwZWNpYWxpemF0aW9uOiBmYWxzZSxcclxuICAgICAgaXNGaWdodGluZzogZmFsc2UsXHJcbiAgICAgIGlzRmlyZWFybXM6IGZhbHNlXHJcbiAgICB9XHJcbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaCgvXiguKylcXHMqXFwoKFteKV0rKVxcKSQvKVxyXG4gICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgIG91dHB1dC5za2lsbE5hbWUgPSBtYXRjaFsyXS50cmltKClcclxuICAgICAgb3V0cHV0LnNwZWNpYWxpemF0aW9uID0gbWF0Y2hbMV0udHJpbSgpXHJcbiAgICAgIG91dHB1dC5pc1NwZWNpYWxpemF0aW9uID0gdHJ1ZVxyXG4gICAgICBpZiAob3V0cHV0LnNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnKSkge1xyXG4gICAgICAgIG91dHB1dC5pc0ZpZ2h0aW5nID0gdHJ1ZVxyXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dC5zcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnKSkge1xyXG4gICAgICAgIG91dHB1dC5pc0ZpcmVhcm1zID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0cHV0XHJcbiAgfVxyXG5cclxuICBnZXQgaGFzQWN0aXZlRWZmZWN0cyAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVFZmZlY3RzLmxlbmd0aCA+IDBcclxuICB9XHJcblxyXG4gIGdldCBhY3RpdmVFZmZlY3RzICgpIHtcclxuICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5lZmZlY3RzKSB7XHJcbiAgICAgIGNvbnN0IGVmZmVjdEtleUZ1bGwgPSBgc2tpbGwuJHt0aGlzLm5hbWV9YC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgIGNvbnN0IGVmZmVjdEtleVNob3J0ID0gYHNraWxsLiR7dGhpcy5zeXN0ZW0uc2tpbGxOYW1lfWAudG9Mb3dlckNhc2UoKVxyXG4gICAgICBsZXQgY2hhbmdlcyA9IHRoaXMucGFyZW50LmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUuZGlzYWJsZWQgfHwgZS5pc1N1cHByZXNzZWQpIHJldHVybiBjaGFuZ2VzXHJcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMuY29uY2F0KFxyXG4gICAgICAgICAgZS5kYXRhLmNoYW5nZXMubWFwKGMgPT4ge1xyXG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcclxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXHJcbiAgICAgICAgICAgIGMucHJpb3JpdHkgPSBjLnByaW9yaXR5ID8/IGMubW9kZSAqIDEwXHJcbiAgICAgICAgICAgIHJldHVybiBjXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgfSwgW10pXHJcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXHJcbiAgICAgIGNoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihcclxuICAgICAgICBlID0+XHJcbiAgICAgICAgICBlLmtleS50b0xvd2VyQ2FzZSgpID09PSBlZmZlY3RLZXlTaG9ydCB8fFxyXG4gICAgICAgICAgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gZWZmZWN0S2V5RnVsbFxyXG4gICAgICApXHJcbiAgICAgIHJldHVybiBjaGFuZ2VzXHJcbiAgICB9XHJcbiAgICByZXR1cm4gW11cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgdGhlIHZhbHVlIG9mIHRoZSBza2lsbCBzY29yZSB1bmFmZmVjdGVkIGJ5IGFjdGl2ZSBlZmZlY3RzXHJcbiAgICovXHJcbiAgZ2V0IHJhd1ZhbHVlICgpIHtcclxuICAgIGxldCB2YWx1ZSA9IDBcclxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XHJcbiAgICAgIC8vIEZvciBhbiBhY3RvciB3aXRoIGV4cGVyaWVuY2Ugd2UgbmVlZCB0byBjYWxjdWxhdGUgc2tpbGwgdmFsdWVcclxuICAgICAgdmFsdWUgPSB0aGlzLmJhc2VcclxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LnBlcnNvbmFsXHJcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpXHJcbiAgICAgICAgOiAwXHJcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uXHJcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbilcclxuICAgICAgICA6IDBcclxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcclxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKVxyXG4gICAgICAgIDogMFxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSAmJlxyXG4gICAgICAgIHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5hcmNoZXR5cGVcclxuICAgICAgKSB7XHJcbiAgICAgICAgdmFsdWUgKz0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRm9yIGFsbCBvdGhlcnMgYWN0b3Igd2Ugc3RvcmUgdGhlIHZhbHVlIGRpcmVjdGx5XHJcbiAgICAgIHZhbHVlID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0udmFsdWUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gIWlzTmFOKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB0aGUgc2tpbGwncyB2YWx1ZSBhZnRlciBhY3RpdmUgZWZmZWN0cyBoYXZlIGJlZW4gYXBwbGllZFxyXG4gICAqL1xyXG4gIGdldCB2YWx1ZSAoKSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyZW50Py5zeXN0ZW0uc2tpbGxzPy5bYCR7dGhpcy5zeXN0ZW0uc2tpbGxOYW1lfWBdXHJcbiAgICAgID8udmFsdWVcclxuICAgIHJldHVybiB2YWx1ZSB8fCB0aGlzLnJhd1ZhbHVlXHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVWYWx1ZSAodmFsdWUpIHtcclxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XHJcbiAgICAgIGNvbnN0IGRlbHRhID0gcGFyc2VJbnQodmFsdWUpIC0gdGhpcy5yYXdWYWx1ZVxyXG4gICAgICBjb25zdCBleHAgPVxyXG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxyXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxyXG4gICAgICAgICAgOiAwKSArIGRlbHRhXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBpbmNyZWFzZUV4cGVyaWVuY2UgKHgpIHtcclxuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXHJcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xyXG4gICAgICBjb25zdCBleHAgPVxyXG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxyXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxyXG4gICAgICAgICAgOiAwKSArIHBhcnNlSW50KHgpXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcclxuICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IHZhbHVlICgpIHtcclxuICAvLyAgIGxldCBwVmFsdWVcclxuICAvLyAgIGlmKCB0aGlzLnBhcmVudCl7XHJcblxyXG4gIC8vICAgfVxyXG4gIC8vICAgY29uc3QgdmFsdWUgPSBzdXBlci52YWx1ZVxyXG4gIC8vICAgbGV0IHVwZGF0ZWQgPSB2YWx1ZVxyXG4gIC8vICAgZm9yIChjb25zdCBjaGFuZ2Ugb2YgdGhpcy5hY3RpdmVFZmZlY3RzKSB7XHJcbiAgLy8gICAgIGNvbnN0IG1vZGlmaWVyID0gTnVtYmVyLmZyb21TdHJpbmcoY2hhbmdlLnZhbHVlKVxyXG4gIC8vICAgICBpZiAoIWlzTmFOKG1vZGlmaWVyKSkge1xyXG4gIC8vICAgICAgIGNvbnN0IG1vZGVzID0gQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFU1xyXG4gIC8vICAgICAgIHN3aXRjaCAoY2hhbmdlLm1vZGUpIHtcclxuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuQUREOlxyXG4gIC8vICAgICAgICAgICB1cGRhdGVkICs9IG1vZGlmaWVyXHJcbiAgLy8gICAgICAgICAgIGJyZWFrXHJcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLk1VTFRJUExZOlxyXG4gIC8vICAgICAgICAgICB1cGRhdGVkID0gTWF0aC5yb3VuZCh1cGRhdGVkICogbW9kaWZpZXIpXHJcbiAgLy8gICAgICAgICAgIGJyZWFrXHJcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLk9WRVJSSURFOlxyXG4gIC8vICAgICAgICAgICB1cGRhdGVkID0gbW9kaWZpZXJcclxuICAvLyAgICAgICAgICAgYnJlYWtcclxuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuVVBHUkFERTpcclxuICAvLyAgICAgICAgICAgaWYgKG1vZGlmZXIgPiB1cGRhdGVkKSB1cGRhdGVkID0gbW9kaWZpZXJcclxuICAvLyAgICAgICAgICAgYnJlYWtcclxuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuRE9XTkdSQURFOlxyXG4gIC8vICAgICAgICAgICBpZiAobW9kaWZlciA8IHVwZGF0ZWQpIHVwZGF0ZWQgPSBtb2RpZmllclxyXG4gIC8vICAgICAgICAgICBicmVha1xyXG4gIC8vICAgICAgIH1cclxuICAvLyAgICAgfVxyXG4gIC8vICAgfVxyXG4gIC8vICAgaWYgKCFpc05hTih1cGRhdGVkKSAmJiB1cGRhdGVkICE9IHZhbHVlKSB7XHJcbiAgLy8gICAgIGlmICh1cGRhdGVkIDwgMCkgdXBkYXRlZCA9IDBcclxuICAvLyAgICAgcmV0dXJuIHVwZGF0ZWRcclxuICAvLyAgIH0gcmV0dXJuIHZhbHVlXHJcbiAgLy8gfVxyXG59XHJcbiIsImltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3IuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN1ZlaGljbGUgZXh0ZW5kcyBDb0NBY3RvciB7XHJcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvamVlcC5zdmcnXHJcbiAgICB9XHJcbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd0J1aWxkICgpIHtcclxuICAgIHJldHVybiB0aGlzLmJ1aWxkXHJcbiAgfVxyXG5cclxuICBnZXQgYnVpbGQgKCkge1xyXG4gICAgY29uc3QgYnVpbGQgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlKVxyXG4gICAgcmV0dXJuIGlzTmFOKGJ1aWxkKSA/IG51bGwgOiBidWlsZFxyXG4gIH1cclxuXHJcbiAgZ2V0IGhwICgpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSBudWxsIHx8XHJcbiAgICAgIHVuZGVmaW5lZCA9PT0gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50IHx8XHJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gJydcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdGhpcy5idWlsZFxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcclxuICAgIH1cclxuICAgIGNvbnN0IGhwID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50KVxyXG4gICAgcmV0dXJuIGlzTmFOKGhwKSA/IG51bGwgOiBocFxyXG4gIH1cclxuXHJcbiAgZ2V0IGhwTWF4ICgpIHtcclxuICAgIHJldHVybiB0aGlzLmJ1aWxkXHJcbiAgfVxyXG5cclxuICBnZXQgcmF3SHBNYXggKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlID4gdGhpcy5idWlsZCkgdmFsdWUgPSB0aGlzLmJ1aWxkXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCc6IHZhbHVlIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgcmF3RGIgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGJcclxuICB9XHJcblxyXG4gIGdldCBkYiAoKSB7XHJcbiAgICBjb25zdCBkYiA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuZGI/LnZhbHVlKVxyXG4gICAgcmV0dXJuIGlzTmFOKGRiKSA/IG51bGwgOiBkYlxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd01vdiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tb3ZcclxuICB9XHJcblxyXG4gIGdldCBtb3YgKCkge1xyXG4gICAgY29uc3QgbW92ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3Y/LnZhbHVlKVxyXG4gICAgcmV0dXJuIGlzTmFOKG1vdikgPyBudWxsIDogbW92XHJcbiAgfVxyXG5cclxuICBnZXQgbXBNYXggKCkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5tYXgpIHx8IDBcclxuICB9XHJcblxyXG4gIGdldCByYXdNcE1heCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tcE1heFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNhbk1heCAoKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd1Nhbk1heCAoKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgRGljZVRlcm0gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZSBleHRlbmRzIERpY2VUZXJtIHtcclxuICBjb25zdHJ1Y3RvciAodGVybURhdGEpIHtcclxuICAgIHN1cGVyKHRlcm1EYXRhKVxyXG4gICAgdGhpcy5mYWNlcyA9IDEwXHJcbiAgfVxyXG5cclxuICBnZXQgdG90YWwgKCkge1xyXG4gICAgY29uc3QgdG90YWwgPSBzdXBlci50b3RhbFxyXG4gICAgcmV0dXJuIHRvdGFsID09PSAxMCA/IDAgOiB0b3RhbCAqIDEwXHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qKiBAb3ZlcnJpZGUgKi9cclxuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XHJcbiAgICByZXR1cm4gJ3QnXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi9kZWNhZGVyLWRpZS5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZU90aGVyIGV4dGVuZHMgQ29DN0RlY2FkZXJEaWUge1xyXG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcclxuICAgIHJldHVybiAnbydcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xyXG5jb25zdCBTRVRUSU5HUyA9IHtcclxuICBwdWxwUnVsZXM6IHtcclxuICAgIG5hbWU6ICcnLFxyXG4gICAgaGludDogJycsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9LFxyXG4gIGluaXRpYXRpdmVSdWxlOiB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGUnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiAnYmFzaWMnLFxyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgY2hvaWNlczoge1xyXG4gICAgICBiYXNpYzogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlQmFzaWMnLFxyXG4gICAgICBvcHRpb25hbDogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlT3B0aW9uYWwnXHJcbiAgICB9LFxyXG4gICAgb25DaGFuZ2U6IHJ1bGUgPT4gX3NldEluaXRpYXRpdmVPcHRpb25zKHJ1bGUpXHJcbiAgfSxcclxuICBkZXZlbG9wbWVudFJvbGxGb3JMdWNrOiB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaycsXHJcbiAgICBoaW50OiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVja0hpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IGZhbHNlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSxcclxuICBwdWxwUnVsZURvdWJsZU1heEhlYWx0aDoge1xyXG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRvdWJsZU1heEhlYWx0aC5OYW1lJyxcclxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Eb3VibGVNYXhIZWFsdGguSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9LFxyXG4gIHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjazoge1xyXG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRldmVsb3BtZW50Um9sbEx1Y2suTmFtZScsXHJcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5IaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiBmYWxzZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0sXHJcbiAgcHVscFJ1bGVBcmNoZXR5cGU6IHtcclxuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuTmFtZScsXHJcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuQXJjaGV0eXBlLkhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IGZhbHNlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSxcclxuICBwdWxwUnVsZU9yZ2FuaXphdGlvbjoge1xyXG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLk9yZ2FuaXphdGlvbi5OYW1lJyxcclxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Pcmdhbml6YXRpb24uSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9LFxyXG4gIHB1bHBSdWxlVGFsZW50czoge1xyXG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLlRhbGVudHMuTmFtZScsXHJcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5IaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiBmYWxzZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0sXHJcbiAgcHVscFJ1bGVGYXN0ZXJSZWNvdmVyeToge1xyXG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5Lk5hbWUnLFxyXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5LkhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IGZhbHNlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSxcclxuICBwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzOiB7XHJcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuTmFtZScsXHJcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9LFxyXG4gIG9wcG9zZWRSb2xsVGllQnJlYWtlcjoge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLk9wcG9zZWRSb2xsVGllQnJlYWtlcicsXHJcbiAgICBoaW50OiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VySGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9zZXRJbml0aWF0aXZlT3B0aW9ucyAocnVsZSkge1xyXG4gIGxldCBkZWNpbWFscyA9IDBcclxuICBzd2l0Y2ggKHJ1bGUpIHtcclxuICAgIGNhc2UgJ29wdGlvbmFsJzpcclxuICAgICAgZGVjaW1hbHMgPSAyXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdiYXNpYyc6XHJcbiAgICAgIGRlY2ltYWxzID0gMFxyXG4gICAgICBicmVha1xyXG4gIH1cclxuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XHJcbiAgICBmb3JtdWxhOiBudWxsLFxyXG4gICAgZGVjaW1hbHNcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgdGl0bGU6ICdTRVRUSU5HUy5UaXRsZVJ1bGVzJyxcclxuICAgICAgaWQ6ICdydWxlcy1zZXR0aW5ncycsXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9zeXN0ZW0vcnVsZS1zZXR0aW5ncy5odG1sJyxcclxuICAgICAgd2lkdGg6IDU1MCxcclxuICAgICAgaGVpZ2h0OiAnYXV0bycsXHJcbiAgICAgIGNsb3NlT25TdWJtaXQ6IHRydWVcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7fVxyXG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xyXG4gICAgICB0cnVlOiBmYWxzZSxcclxuICAgICAgZmFsc2U6IGZhbHNlXHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcclxuICAgICAgb3B0aW9uc1trXSA9IHtcclxuICAgICAgICB2YWx1ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCBrKSxcclxuICAgICAgICBzZXR0aW5nOiB2XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGsubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XHJcbiAgICAgICAgcHVscFJ1bGVzW29wdGlvbnNba10udmFsdWVdID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBvcHRpb25zLnB1bHBTZWxlY3Rpb24gPSBwdWxwUnVsZXMudHJ1ZVxyXG4gICAgICA/IHB1bHBSdWxlcy5mYWxzZVxyXG4gICAgICAgID8gJ3NvbWUnXHJcbiAgICAgICAgOiAnYWxsJ1xyXG4gICAgICA6ICdub25lJ1xyXG4gICAgcmV0dXJuIG9wdGlvbnNcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZWdpc3RlclNldHRpbmdzICgpIHtcclxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xyXG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgaywgdilcclxuICAgIH1cclxuICAgIF9zZXRJbml0aWF0aXZlT3B0aW9ucyhnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpKVxyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcjcHVscFJ1bGVzU2VsZWN0JylcclxuICAgICAgLm9uKCdjaGFuZ2UnLCBldmVudCA9PiB0aGlzLm9uQ2hhbmdlUHVscFNlbGVjdChldmVudCkpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxyXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbkNsaWNrUHVscChldmVudCkpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCdidXR0b25bbmFtZT1yZXNldF0nKVxyXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vblJlc2V0RGVmYXVsdHMoZXZlbnQpKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2VQdWxwU2VsZWN0IChldmVudCkge1xyXG4gICAgY29uc3QgdmFsID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS52YWwoKVxyXG4gICAgaWYgKHZhbCA9PT0gJ25vbmUnIHx8IHZhbCA9PT0gJ2FsbCcpIHtcclxuICAgICAgJCgnI3J1bGVzLXNldHRpbmdzJylcclxuICAgICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcclxuICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcclxuICAgICAgICAgIGlmICh2YWwgPT09ICdub25lJykge1xyXG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgZmFsc2UpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DbGlja1B1bHAgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XHJcbiAgICAgIHRydWU6IGZhbHNlLFxyXG4gICAgICBmYWxzZTogZmFsc2VcclxuICAgIH1cclxuICAgICQoJyNydWxlcy1zZXR0aW5ncycpXHJcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxyXG4gICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpXHJcbiAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgcHVscFJ1bGVzLnRydWUgPSB0cnVlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHB1bHBSdWxlcy5mYWxzZSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAkKCcjcHVscFJ1bGVzU2VsZWN0JykudmFsKFxyXG4gICAgICBwdWxwUnVsZXMudHJ1ZSA/IChwdWxwUnVsZXMuZmFsc2UgPyAnc29tZScgOiAnYWxsJykgOiAnbm9uZSdcclxuICAgIClcclxuICB9XHJcblxyXG4gIGFzeW5jIG9uUmVzZXREZWZhdWx0cyAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGZvciBhd2FpdCAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xyXG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGssIHY/LmRlZmF1bHQpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGRhdGEpIHtcclxuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcclxuICAgICAgdHJ1ZTogZmFsc2UsXHJcbiAgICAgIGZhbHNlOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgZm9yIGF3YWl0IChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoU0VUVElOR1MpKSB7XHJcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3Jywga2V5LCBkYXRhW2tleV0pXHJcbiAgICAgIGlmIChrZXkubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XHJcbiAgICAgICAgcHVscFJ1bGVzW2RhdGFba2V5XV0gPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlcycsIHB1bHBSdWxlcy50cnVlICYmICFwdWxwUnVsZXMuZmFsc2UpXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cclxuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN0FyY2hldHlwZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcclxuICAvKipcclxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcclxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXHJcbiAgICovXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXHJcblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXHJcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnc2tpbGxzJykpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxyXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnc2tpbGxzJykpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdza2lsbCcsIGNvbGxlY3Rpb25OYW1lID0gJ3NraWxscycpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXHJcblxyXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXHJcblxyXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcclxuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcclxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xyXG4gICAgICAgIGNvbnRpbnVlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcclxuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcclxuICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0pKVxyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcclxuICB9XHJcblxyXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxyXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XHJcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXHJcbiAgICB9KVxyXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvblxyXG5cclxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XHJcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcclxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXHJcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXHJcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cclxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcclxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXHJcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxyXG4gICAgfVxyXG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcclxuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKS5kYXRhKCdpdGVtLWlkJylcclxuICAgIGlmIChpdGVtSW5kZXgpIGF3YWl0IHRoaXMucmVtb3ZlSXRlbShpdGVtSW5kZXgsIGNvbGxlY3Rpb25OYW1lKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVtb3ZlSXRlbSAoaXRlbUlkLCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcclxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChzID0+IHtcclxuICAgICAgcmV0dXJuIHMuX2lkID09PSBpdGVtSWRcclxuICAgIH0pXHJcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcclxuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXHJcbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcclxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9hcmNoZXR5cGUuaHRtbCcsXHJcbiAgICAgIHdpZHRoOiA1MjAsXHJcbiAgICAgIGhlaWdodDogNDgwLFxyXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxyXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcclxuICAgICAgdGFiczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxyXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldERhdGEgKCkge1xyXG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuXHJcbiAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cclxuICAgIGZvciAoY29uc3QgW2tleSwgc2VsZWN0ZWRdIG9mIE9iamVjdC5lbnRyaWVzKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1xyXG4gICAgKSkge1xyXG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICBjb25zdCBjaGFyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxyXG4gICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjaGFyYWNOYW1lKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWRTdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkU3VnZ2VzdGVkVHJhaXRzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5sZW5ndGggPT09IDBcclxuXHJcbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxyXG5cclxuICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nID0gJydcclxuICAgIGNvbnN0IG9yU3RyaW5nID0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpfSBgXHJcbiAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGgpIHtcclxuICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmcgKz0gY29yZUNoYXJhY3RlcmlzdGljcy5qb2luKG9yU3RyaW5nKVxyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXHJcblxyXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXHJcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdWxwVGFsZW50cycpfTogJHtzaGVldERhdGEuZGF0YS5zeXN0ZW0udGFsZW50c31gXHJcbiAgICApXHJcbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcclxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzUG9pbnRzJyl9OiAke3NoZWV0RGF0YS5kYXRhLnN5c3RlbS5ib251c1BvaW50c31gXHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIHJldHVybiBzaGVldERhdGFcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIENvQzdCb29rU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL21haW4uaHRtbCcsXHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdpdGVtJywgJ2Jvb2snXSxcclxuICAgICAgd2lkdGg6IDUwMCxcclxuICAgICAgaGVpZ2h0OiAnYXV0bycsXHJcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXHJcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuc3BlbGxzJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxyXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXHJcbiAgICAgIHRhYnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcclxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcclxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxyXG4gICAgc2hlZXREYXRhLmluaXRpYWxSZWFkaW5nID0gdGhpcy5pdGVtLnN5c3RlbS5pbml0aWFsUmVhZGluZ1xyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIHNoZWV0RGF0YS5pc093bmVyID0gdGhpcy5pdGVtLmlzT3duZXJcclxuICAgIHNoZWV0RGF0YS5zcGVsbHNMZWFybmVkID0gdGhpcy5zcGVsbHNMZWFybmVkXHJcbiAgICBzaGVldERhdGEuZXhoYXVzdGVkID0gKGF3YWl0IHRoaXMuaXRlbS5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlXHJcbiAgICBzaGVldERhdGEuc3R1ZHlDb21wbGV0ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5LnByb2dyZXNzID09PSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuICAgIHNoZWV0RGF0YS5zcGVsbExpc3RFbXB0eSA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzLmxlbmd0aCA9PT0gMFxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkQ29udGVudCA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNvbnRlbnQsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICBnZXQgc3BlbGxzTGVhcm5lZCAoKSB7XHJcbiAgICBsZXQgYW1vdW50ID0gMFxyXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcclxuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XHJcbiAgICAgIGlmIChzcGVsbC5zeXN0ZW0ubGVhcm5lZCkgYW1vdW50KytcclxuICAgIH1cclxuICAgIHJldHVybiBgJHthbW91bnR9IC8gJHtzcGVsbHMubGVuZ3RofWBcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRJbml0aWFsUmVhZGluZygpXHJcbiAgICB9KVxyXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25EZWxldGUoZXZlbnQpKVxyXG4gICAgaHRtbC5maW5kKCcuZWRpdC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxyXG4gICAgaHRtbC5maW5kKCcuc3BlbGwtbmFtZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxyXG4gICAgaHRtbC5maW5kKCcudGVhY2gtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XHJcbiAgICAgIGNvbnN0IGlkID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdsaScpLmRhdGEoJ2lkJylcclxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRTcGVsbExlYXJuaW5nKGlkKVxyXG4gICAgfSlcclxuICAgIGh0bWwuZmluZCgnW25hbWU9XCJzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XCJdJykuY2hhbmdlKGV2ZW50ID0+IHtcclxuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxyXG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ3Jlc2V0JywgdmFsdWUpXHJcbiAgICB9KVxyXG4gICAgaHRtbC5maW5kKCcjaW5jcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnaW5jcmVhc2UnKVxyXG4gICAgfSlcclxuICAgIGh0bWwuZmluZCgnI2RlY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2RlY3JlYXNlJylcclxuICAgIH0pXHJcbiAgICBodG1sLmZpbmQoJy5hZGQtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XHJcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdhZGQnKVxyXG4gICAgfSlcclxuICAgIGh0bWwuZmluZCgnLmNoYW5nZS1vdGhlci1nYWlucycpLmNoYW5nZShldmVudCA9PiB7XHJcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdjaGFuZ2UnKVxyXG4gICAgfSlcclxuICAgIGh0bWwuZmluZCgnI3JlZG8tZnVsbC1zdHVkeScpLmNsaWNrKCgpID0+IHtcclxuICAgICAgdGhpcy5pdGVtLnJlZG9GdWxsU3R1ZHkoKVxyXG4gICAgfSlcclxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ3JlbW92ZScpXHJcbiAgICB9KVxyXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblNwZWxsRGV0YWlsIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcclxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cclxuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0uc3BlbGxEZXRhaWwoaW5kZXgpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkZWxldGUgYSBzcGVsbCBvbiB0aGUgc2hlZXRcclxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XHJcbiAgICovXHJcbiAgYXN5bmMgX29uRGVsZXRlIChldmVudCkge1xyXG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgcmV0dXJuXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xyXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxyXG4gICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xyXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcclxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5zcGVsbHMpXHJcbiAgICAgIDogW11cclxuICAgIGlmIChpbmRleCA+PSAwKSBzcGVsbHMuc3BsaWNlKGluZGV4LCAxKVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IHNwZWxscyB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZHJhZ3MgYW4gaXRlbSB0byB0aGUgc2hlZXRcclxuICAgKiBGaWx0ZXJzIG9ubHkgJ3NwZWxsJyBpdGVtcyBhbmQgaW5zZXJ0cyB0aGVtIGluIGEgQHR5cGUge0FycmF5fVxyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXHJcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcclxuICAgKi9cclxuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdzcGVsbCcpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuXHJcbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcclxuXHJcbiAgICBjb25zdCBzcGVsbHMgPSBbXVxyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XHJcbiAgICAgIGlmICghaXRlbSB8fCAhWydza2lsbCcsICdzcGVsbCddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIGNvbnRpbnVlXHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdzcGVsbCcpIHtcclxuICAgICAgICBzcGVsbHMucHVzaChpdGVtKVxyXG4gICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiB0aGlzLml0ZW0uc3lzdGVtLnR5cGUub3RoZXIpIHtcclxuICAgICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKG51bGwsICdhZGQnLCB7IG5hbWU6IGl0ZW0ubmFtZSB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLml0ZW0uYWRkU3BlbGxzKHNwZWxscylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXHJcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XHJcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcclxuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xyXG4gICAqL1xyXG4gIG1vZGlmeVR5cGUgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXHJcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNb2RpZnkgSXRlbSBkYXRhIGJhc2VkIG9uIHVzZXIgaW50ZXJhY3Rpb25zIHdpdGggdGhlIG90aGVyIHNraWxsXHJcbiAgICogZ2FpbnMgdGFibGUgb24gZGV0YWlscyB0YWIgb24gdGhpcyBzaGVldFxyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ2FkZCcgfHwgJ2NoYW5nZScgfHwgJ3JlbW92ZSdcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XHJcbiAgICovXHJcbiAgYXN5bmMgbW9kaWZ5T3RoZXJzR2FpbnMgKGV2ZW50LCBtb2RlLCBvcHRpb25zID0ge30pIHtcclxuICAgIC8qKiBObyBuZWVkIHRvIGNoZWNrIGlmIHVzZXIgaXMgR00gYmVjYXVzZSBvbmx5IHRoZXkgY2FuIHNlZSBkZXRhaWxzIHRhYiAqL1xyXG4gICAgbGV0IGluZGV4ID0gbnVsbFxyXG4gICAgbGV0IGVsZW1lbnQgPSBudWxsXHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXHJcbiAgICAgIGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCd0cicpLmRhdGEoJ2luZGV4JylcclxuICAgICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5nYWlucy5vdGhlcnNcclxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5nYWlucy5vdGhlcnMpXHJcbiAgICAgIDogW11cclxuICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGFkZCBhIG5ldyBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xyXG4gICAgICAgIHNraWxscy5wdXNoKHtcclxuICAgICAgICAgIC8qKiBuZXcgc2tpbGwgKi9cclxuICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSB8fCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmV3U2tpbGxOYW1lJyksXHJcbiAgICAgICAgICAvKiogZGV2ZWxvcG1lbnQgYnkgZGVmYXVsdCwgdmFsdWUgY2FuIGFsc28gYmUgMWQ2IG9yIDFkMTAgKi9cclxuICAgICAgICAgIHZhbHVlOiAnZGV2ZWxvcG1lbnQnXHJcbiAgICAgICAgfSlcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdjaGFuZ2UnOlxyXG4gICAgICAgIC8qKiBVc2VyIGNoYW5nZWQgbmFtZSAoaW5wdXQpIG9yIHZhbHVlIChzZWxlY3QpIG9mIGEgc2tpbGwgb24gdGFibGUgKi9cclxuICAgICAgICBza2lsbHNbaW5kZXhdID0ge1xyXG4gICAgICAgICAgbmFtZTogZWxlbWVudC5pcygnaW5wdXQnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLm5hbWUsXHJcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5pcygnc2VsZWN0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS52YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdyZW1vdmUnOlxyXG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byByZW1vdmUgYSBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSBza2lsbHMuc3BsaWNlKGluZGV4LCAxKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdhaW5zLm90aGVycyc6IHNraWxscyB9KVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuLi8uLi9hcHBzL3BhcnNlci5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3Q29udGFpbmVyU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcclxuICAvKipcclxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICdzdG9yYWdlJ10sXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvc3RvcmFnZS1zaGVldC5odG1sJyxcclxuICAgICAgd2lkdGg6IDY3MixcclxuICAgICAgaGVpZ2h0OiA3NjUsXHJcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcclxuICAgICAgdGFiczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXHJcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXHJcbiAgICAgICAgICBpbml0aWFsOiAnaXRlbXMnXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXHJcblxyXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5hY3Rvci5pdGVtcy50b09iamVjdCgpIHx8IFtdXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcclxuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkge1xyXG4gICAgICAgIGNvbnRpbnVlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XHJcbiAgICAgICAgY29udGludWVcclxuICAgICAgfVxyXG4gICAgICBpdGVtcy5wdXNoKGl0ZW0udG9PYmplY3QoKSlcclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgaXRlbXMgfSlcclxuICB9XHJcblxyXG4gIG9uQ2xvc2VTaGVldCAoKSB7fVxyXG5cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXHJcbiAgICBzaGVldERhdGEuZWRpdGFibGUgPSB0aGlzLmlzRWRpdGFibGVcclxuXHJcbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxyXG4gICAgaWYgKHNoZWV0RGF0YS5pdGVtcykge1xyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcclxuICAgICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlLFxyXG4gICAgICAgICAgICBpdGVtLnR5cGVcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gW11cclxuICAgICAgICB9XHJcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0ucHVzaChpdGVtKVxyXG4gICAgICB9XHJcbiAgICAgIGZvciAoY29uc3QgaXRlbVR5cGUgaW4gc2hlZXREYXRhLml0ZW1zQnlUeXBlKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0RGF0YS5hbGxvd1VubG9jayA9XHJcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxyXG4gICAgICBnYW1lLnVzZXIuaXNHTVxyXG5cclxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxyXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XHJcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXHJcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cclxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxyXG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPVxyXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxyXG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cclxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XHJcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJlxyXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxyXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID1cclxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3dlYXBvbicpIHx8XHJcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XHJcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcclxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxyXG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxyXG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcclxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuXHJcbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldiA9PiB7XHJcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXHJcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcclxuICAgICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXHJcblxyXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXHJcbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKHRoaXMuX29uSXRlbVN1bW1hcnkuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcclxuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcclxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcclxuICAgICAgICBzdHJpY3Q6IHRydWVcclxuICAgICAgfSlcclxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXHJcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXHJcbiAgICB9KVxyXG5cclxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xyXG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnYm9vayc6XHJcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5Qm9vayhldilcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnaXRlbSc6XHJcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5SXRlbShldilcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxyXG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdzcGVsbCc6XHJcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U3BlbGwoZXYpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XHJcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2KVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5sb2NrJykuY2xpY2sodGhpcy5fb25Mb2NrQ2xpY2tlZC5iaW5kKHRoaXMpKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uTG9ja0NsaWNrZWQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXHJcbiAgICB0aGlzLmFjdG9yLmxvY2tlZCA9ICFpc0xvY2tlZFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uVHJhZGVJdGVtIChldmVudCkge1xyXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcclxuICAgIGxldCBjb250ZW50ID0gJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFVzZXJUb0dpdmVUbycpXHJcbiAgICBjb25zdCBtZXNzYWdlID0ge1xyXG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXHJcbiAgICAgIHNjZW5lOiBudWxsLFxyXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxyXG4gICAgICBpdGVtOiBpdGVtLmlkXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcclxuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXHJcbiAgICAgIG1lc3NhZ2Uuc2NlbmUgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxyXG4gICAgfVxyXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xyXG4gICAgICBpZiAoIVsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZScsICdjb250YWluZXInXS5pbmNsdWRlcyhlLnR5cGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IGUuaWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlXHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xyXG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XHJcbiAgICAgICAgICB2aXNpYmxlID1cclxuICAgICAgICAgICAgdmlzaWJsZSB8fFxyXG4gICAgICAgICAgICB2ICE9PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZpc2libGVcclxuICAgIH0pXHJcbiAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xyXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcclxuICAgICAgY29udGVudCA9XHJcbiAgICAgICAgY29udGVudCArICc8b3B0aW9uIHZhbHVlPVwiJyArIGFjdG9yLmlkICsgJ1wiPicgKyBhY3Rvci5uYW1lICsgJzwvb3B0aW9uPidcclxuICAgIH1cclxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xyXG4gICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XHJcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXHJcbiAgICAgIGNvbnRlbnQsXHJcbiAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcclxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3Rmb3JtJykpXHJcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XHJcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UuYWN0b3JUbyA9IHZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbXRyYWRlaXRlbXRvJywgbWVzc2FnZSlcclxuICB9XHJcblxyXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXHJcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcclxuXHJcbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxyXG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XHJcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXHJcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcclxuXHJcbiAgICAgIGNvbnN0IGxhYmVscyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsc1wiPjwvZGl2PicpXHJcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcclxuICAgICAgICBsYWJlbHMuYXBwZW5kKFxyXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsXCI+PHNwYW4gY2xhc3M9XCJsYWJlbC1uYW1lXCI+JHtwLm5hbWV9IDo8L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbC12YWx1ZVwiPiR7cC52YWx1ZX08L3NwYW4+PC9kaXY+YFxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBkaXYuYXBwZW5kKGxhYmVscylcclxuXHJcbiAgICAgIGRpdi5hcHBlbmQoXHJcbiAgICAgICAgJChgPGRpdiBjbGFzcz1cIml0ZW0tZGVzY3JpcHRpb25cIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnZhbHVlfTwvZGl2PmApXHJcbiAgICAgIClcclxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcclxuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcclxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1zcGVjaWFsXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsfTwvZGl2PmBcclxuICAgICAgICApXHJcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxyXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykge1xyXG4gICAgICAgIHByb3BzLmFwcGVuZChcclxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXHJcblxyXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcclxuICAgICAgQ29DN1BhcnNlci5iaW5kRXZlbnRzSGFuZGxlcihkaXYpXHJcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxyXG4gICAgfVxyXG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcclxuICAgIC8vICQoZXZlbnQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJyk7XHJcbiAgfVxyXG5cclxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCdsaScpLnNsaWRlVG9nZ2xlKDIwMClcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIERyYWdEcm9wLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIHVpICovXHJcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcclxuaW1wb3J0IHsgX3BhcnRpY2lwYW50IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvcGFydGljaXBhbnQuanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xyXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZEFjdG9yVG9DaGFzZScpLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5odG1sJyxcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlciddLFxyXG4gICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcclxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXHJcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxyXG4gICAgICB3aWR0aDogMzAwLFxyXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG5cclxuICAgIGNvbnN0IHBhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xyXG4gICAgICBkcm9wU2VsZWN0b3I6ICcuZm9ybS1jb250YWluZXInLFxyXG4gICAgICBwZXJtaXNzaW9uczogeyBkcm9wOiBnYW1lLnVzZXIuaXNHTSB9LFxyXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XHJcbiAgICB9KVxyXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXHJcblxyXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcGFydGljaXBhbnQnKS5jbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRoaXMub2JqZWN0ID0ge31cclxuICAgICAgdGhpcy5fYWN0b3IgPSBudWxsXHJcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIGh0bWwuZmluZCgnLmZvb2QtY2hhaW4nKS5jbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRoaXMub2JqZWN0LmNoYXNlciA9ICF0aGlzLm9iamVjdC5jaGFzZXJcclxuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgaHRtbC5maW5kKCdbZGF0YS1hY3Rpb25dJykuY2xpY2sodGhpcy5fb25BY3Rpb24uYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBodG1sLmZpbmQoJ2J1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGlmICghdGhpcy5vYmplY3QuaW5pdGlhdGl2ZSkge1xyXG4gICAgICBjb25zdCBpbml0ID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZmluZChcclxuICAgICAgICBjID0+IGMua2V5ID09PSAnZGV4J1xyXG4gICAgICApXHJcbiAgICAgIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBpbml0LmxhYmVsXHJcbiAgICAgIC8vIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgIC8vICAgJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJ1xyXG4gICAgICAvLyApfSAoJHtpbml0LnNob3J0TmFtZX0pYFxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLm9iamVjdC5zcGVlZENoZWNrKSB7XHJcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxyXG4gICAgICAgIGMgPT4gYy5rZXkgPT09ICdjb24nXHJcbiAgICAgIClcclxuICAgICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcclxuICAgICAgICBuYW1lOiBzcGVlZENoZWNrLmxhYmVsXHJcbiAgICAgIH1cclxuICAgICAgLy8gdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcclxuICAgICAgLy8gICBuYW1lOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke1xyXG4gICAgICAvLyAgICAgc3BlZWRDaGVjay5zaG9ydE5hbWVcclxuICAgICAgLy8gICB9KWBcclxuICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmFsaWRhdGVQYXJ0aWNpcGFudCgpXHJcblxyXG4gICAgLy8gY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3I/LmZpbmQoIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/Lm5hbWUpXHJcbiAgICAvLyBpZiggc3BlZWRDaGVjayl7XHJcbiAgICAvLyAgIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sgPSBzcGVlZENoZWNrXHJcbiAgICAvLyB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxyXG5cclxuICAgIGRhdGEucGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxyXG4gICAgaWYgKGRhdGEub2JqZWN0LnNwZWVkQ2hlY2submFtZSAmJiB0aGlzLmFjdG9yKSB7XHJcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lKVxyXG4gICAgICBpZiAoc3BlZWRDaGVjaykge1xyXG4gICAgICAgIGRhdGEub2JqZWN0LnNwZWVkQ2hlY2suc2NvcmUgPSBzcGVlZENoZWNrLnZhbHVlLnZhbHVlXHJcbiAgICAgICAgZGF0YS5zcGVlZENoZWNrUmVhZE9ubHkgPSB0cnVlXHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgZGF0YS5wYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlICYmXHJcbiAgICAgICAgIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/LnNjb3JlXHJcbiAgICAgICkge1xyXG4gICAgICAgIGRhdGEub2JqZWN0LnNwZWVkQ2hlY2suc2NvcmUgPSBkYXRhLnBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLm9iamVjdC5pbml0aWF0aXZlICYmIHRoaXMuYWN0b3IpIHtcclxuICAgICAgY29uc3QgaW5pdGlhdGl2ZSA9IHRoaXMuYWN0b3IuZmluZChkYXRhLm9iamVjdC5pbml0aWF0aXZlKVxyXG4gICAgICBpZiAoaW5pdGlhdGl2ZSkge1xyXG4gICAgICAgIGRhdGEub2JqZWN0LmRleCA9IGluaXRpYXRpdmUudmFsdWUudmFsdWVcclxuICAgICAgICBkYXRhLmluaXRSZWFkT25seSA9IHRydWVcclxuICAgICAgfSBlbHNlIGRhdGEub2JqZWN0LmRleCA9IGRhdGEucGFydGljaXBhbnQuaW5pdGlhdGl2ZVxyXG4gICAgfVxyXG5cclxuICAgIGRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXHJcbiAgICBkYXRhLmNoYXNlID0gdGhpcy5jaGFzZVxyXG4gICAgZGF0YS5kYXRhID0gdGhpcy5kYXRhXHJcblxyXG4gICAgZGF0YS5vcHRpb25zTGlzdCA9IHt9XHJcbiAgICBpZiAodGhpcy5jaGFzZSkge1xyXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QgPVxyXG4gICAgICAgIHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnRcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xyXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QgPSBbXVxyXG4gICAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cclxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChgJHtjLmxhYmVsfWApXHJcbiAgICAgIClcclxuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0LnB1c2goXHJcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gXHJcbiAgICAgIClcclxuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0LnB1c2goXHJcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWBcclxuICAgICAgKVxyXG4gICAgICB0aGlzLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT5cclxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChzLm5hbWUpXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNoYXNlICgpIHtcclxuICAgIGlmICghdGhpcy5fY2hhc2UpIHtcclxuICAgICAgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLm9iamVjdC5jaGFzZVV1aWQpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fY2hhc2VcclxuICB9XHJcblxyXG4gIGdldCBhY3RvciAoKSB7XHJcbiAgICBpZiAoIXRoaXMub2JqZWN0LmRvY1V1aWQpIHJldHVybiBudWxsXHJcbiAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XHJcbiAgICAgIHRoaXMuX2FjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5vYmplY3QuZG9jVXVpZClcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9hY3RvclxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XHJcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMsIGZvcm1EYXRhKVxyXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGRyb3BTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXHJcbiAgICBjb25zdCBkcm9wRGF0YSA9IEpTT04ucGFyc2UoZHJvcFN0cmluZylcclxuXHJcbiAgICBjb25zdCBkb2NVdWlkID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhKGRyb3BEYXRhKVxyXG5cclxuICAgIHRoaXMub2JqZWN0LmRvY1V1aWQgPSBkb2NVdWlkXHJcblxyXG4gICAgLy8gSWYgYWN0b3IgaXMgY29udHJvbGxlZCBieSBHTSBvbmx5IHdlIGFzc3VtZSBoZSBpcyBhIGNoYXNlclxyXG4gICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcclxuICAgIGlmICh0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKSB7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkFjdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXHJcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICBjYXNlICdjaGFzZS1jYW5jZWwnOlxyXG4gICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2NoYXNlLWFkZCc6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmNoYXNlLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICEocGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gJiYgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gPiAwKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXHJcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRG9lc05vdE1lZXRNaW5pbXVtUmVxVG9CZUFkZGVkJylcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5vdmVycmlkZU1vdmVtZW50QWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XHJcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHBhcnRpY2lwYW50LmFkanVzdGVkTW92KSkge1xyXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQubW92ID0gc2xvd2VzdC5hZGp1c3RlZE1vdlxyXG4gICAgICAgICAgICAgIH0gLyoqIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5tb3YgPVxyXG4gICAgICAgICAgICAgICAgICBzbG93ZXN0LmFkanVzdGVkTW92ICsgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gLSAxXHJcbiAgICAgICAgICAgICAgfSAqL1xyXG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGF3YWl0IHRoaXMuY2hhc2UuYWRkUGFydGljaXBhbnQocGFydGljaXBhbnQsIHtcclxuICAgICAgICAgICAgbG9jYXRpb25VdWlkOiB0aGlzLm9iamVjdC5sb2NhdGlvblV1aWQsXHJcbiAgICAgICAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zOiB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCxcclxuICAgICAgICAgICAgdXBkYXRlOiB0aGlzLm9iamVjdC51cGRhdGVcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgJ3JvbGwtc3BlZWQtY2hlY2snOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcclxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlNldCkge1xyXG4gICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpXHJcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICByb2xsLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNDaGFyYWN0ZXJpc3RpYykge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcclxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XHJcbiAgICAgICAgICAgICAgcm9sbC5za2lsbCA9IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmXHJcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcclxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbEF0dHJpYnV0ZShwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXHJcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXHJcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcclxuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHBhcnRpY2lwYW50Lm5hbWUgPyBwYXJ0aWNpcGFudC5uYW1lIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSB7XHJcbiAgICAgICAgICAgICAgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suY3JlYXRlKHJvbGxEYXRhKVxyXG4gICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxyXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXHJcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5vYmplY3QsIHBhcnRpY2lwYW50LmRhdGEpXHJcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhbGlkYXRlUGFydGljaXBhbnQgKCkge1xyXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxyXG4gICAgaWYgKCF0aGlzLmRhdGEpIHRoaXMuZGF0YSA9IHt9XHJcbiAgICB0aGlzLm9iamVjdC5leGNsdWRlZCA9IGZhbHNlXHJcbiAgICB0aGlzLm9iamVjdC5lc2NhcGVkID0gZmFsc2VcclxuICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcclxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gZmFsc2VcclxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkRlbHRhID0gMFxyXG5cclxuICAgIGlmICghdGhpcy5kYXRhLm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24pIHtcclxuICAgICAgY29uc3Qgc2xvd2VzdFByZXkgPSB0aGlzLmNoYXNlLnNsb3dlc3RQcmV5XHJcbiAgICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmNoYXNlLmZhc3Rlc3RDaGFzZXJcclxuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XHJcblxyXG4gICAgICBpZiAocGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPCBzbG93ZXN0Py5hZGp1c3RlZE1vdikge1xyXG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gdHJ1ZVxyXG4gICAgICAgIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uID0gMVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcclxuICAgICAgICBwYXJ0aWNpcGFudC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMoc2xvd2VzdD8uYWRqdXN0ZWRNb3YpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzQ2hhc2VyKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2xvd2VzdFByZXkgJiZcclxuICAgICAgICAgICF0aGlzLmNoYXNlLmRhdGEuZGF0YS5pbmNsdWRlTGFzdENvbW1lcnMgJiZcclxuICAgICAgICAgIHBhcnRpY2lwYW50LmFkanVzdGVkTW92IDwgc2xvd2VzdFByZXkuYWRqdXN0ZWRNb3ZcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMub2JqZWN0LmV4Y2x1ZGVkID0gdHJ1ZVxyXG4gICAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSB0cnVlXHJcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb1Nsb3cnKVxyXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzUHJleSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGZhc3Rlc3RDaGFzZXIgJiZcclxuICAgICAgICAgICF0aGlzLmNoYXNlLmRhdGEuZGF0YS5pbmNsdWRlRXNjYXBlZCAmJlxyXG4gICAgICAgICAgcGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPiBmYXN0ZXN0Q2hhc2VyLmFkanVzdGVkTW92XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLm9iamVjdC5lc2NhcGVkID0gdHJ1ZVxyXG4gICAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSB0cnVlXHJcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb0Zhc3QnKVxyXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xyXG4gICAgaWYgKGRhdGEuZHJvcERhdGEpIHtcclxuICAgICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkYXRhLmRyb3BEYXRhKVxyXG4gICAgICBpZiAoZG9jVXVpZCkgZGF0YS5kb2NVdWlkID0gZG9jVXVpZFxyXG4gICAgICBkZWxldGUgZGF0YS5kcm9wRGF0YVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyKGRhdGEpLnJlbmRlcih0cnVlKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCBEcmFnRHJvcCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZsYXR0ZW5PYmplY3QsIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGdhbWUsIGdldFR5cGUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IsIHVpICovXHJcbmltcG9ydCB7IENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXHJcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcclxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXHJcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4vcGFydGljaXBhbnQuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbScsICdjaGFzZSddLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvY2hhc2UuaHRtbCcsXHJcbiAgICAgIHdpZHRoOiA1NTAsXHJcbiAgICAgIGhlaWdodDogNTAwLFxyXG4gICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgIHRhYnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxyXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxyXG4gICAgICAgICAgaW5pdGlhbDogJ3BhcnRpY2lwYW50cydcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIG9wdGlvbnNcclxuXHJcbiAgICAvLyBjbG9zZU9uU3VibWl0OiBmYWxzZSxcclxuICAgIC8vIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xyXG4gICAgcmV0dXJuICdjb2M3Q2hhc2VTaGVldCdcclxuICB9XHJcblxyXG4gIC8vIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAvLyBhc3luYyByZW5kZXIoZm9yY2UsIG9wdGlvbnMpIHtcclxuICAvLyAgIHJldHVybiBzdXBlci5yZW5kZXIoZm9yY2UsIG9wdGlvbnMpO1xyXG4gIC8vIH1cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG5cclxuICBnZXREYXRhIChvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucylcclxuXHJcbiAgICBzaGVldERhdGEucGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c09iamVjdFxyXG4gICAgc2hlZXREYXRhLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmVcclxuICAgIHNoZWV0RGF0YS5wcmV5cyA9IHRoaXMuaXRlbS5wcmV5c1xyXG4gICAgc2hlZXREYXRhLmNoYXNlcnMgPSB0aGlzLml0ZW0uY2hhc2Vyc1xyXG5cclxuICAgIHNoZWV0RGF0YS5wcmV5c01pbk1vdiA9IHNoZWV0RGF0YS5wcmV5cy5sZW5ndGggPyBzaGVldERhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXHJcblxyXG4gICAgc2hlZXREYXRhLnByZXlzTWF4TW92ID0gc2hlZXREYXRhLnByZXlzLmxlbmd0aCA/IHNoZWV0RGF0YS5wcmV5cy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcclxuXHJcbiAgICBzaGVldERhdGEuY2hhc2Vyc01pbk1vdiA9IHNoZWV0RGF0YS5jaGFzZXJzLmxlbmd0aCA/IHNoZWV0RGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxyXG5cclxuICAgIHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92ID0gc2hlZXREYXRhLmNoYXNlcnMubGVuZ3RoID8gc2hlZXREYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXHJcblxyXG4gICAgc2hlZXREYXRhLmNoYXNlcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPCBzaGVldERhdGEucHJleXNNaW5Nb3YpIHtcclxuICAgICAgICBwLnRvb1Nsb3coKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHAuaW5jbHVkZUluQ2hhc2UoKVxyXG4gICAgICB9XHJcbiAgICAgIHAuZmFzdGVzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92XHJcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWluTW92XHJcbiAgICB9KVxyXG5cclxuICAgIHNoZWV0RGF0YS5wcmV5cy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA+IHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92KSB7XHJcbiAgICAgICAgcC5lc2NhcGVkKClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwLmluY2x1ZGVJbkNoYXNlKClcclxuICAgICAgfVxyXG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEucHJleXNNYXhNb3ZcclxuICAgICAgcC5zbG93ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLnByZXlzTWluTW92XHJcbiAgICB9KVxyXG5cclxuICAgIHNoZWV0RGF0YS5sb2NhdGlvbnMgPSB0aGlzLml0ZW0ubG9jYXRpb25zXHJcbiAgICBzaGVldERhdGEuYWxsSGF2ZVZhbGlkTW92ID0gdGhpcy5hbGxIYXZlVmFsaWRNb3ZcclxuICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbiA9IHRoaXMuaXRlbS5hY3RpdmVMb2NhdGlvblxyXG4gICAgaWYgKHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbikge1xyXG4gICAgICBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24udGl0bGUgPSBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXNcclxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTG9jYXRpb25Db29yZGluYXRlJywge1xyXG4gICAgICAgICAgeDogc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzLngsXHJcbiAgICAgICAgICB5OiBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXMueVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRHJhZ09uQ2FudmFzJylcclxuICAgIH1cclxuICAgIHNoZWV0RGF0YS5wcmV2aW91c0xvY2F0aW9uID0gdGhpcy5pdGVtLnByZXZpb3VzTG9jYXRpb25cclxuICAgIHNoZWV0RGF0YS5uZXh0TG9jYXRpb24gPSB0aGlzLml0ZW0ubmV4dExvY2F0aW9uXHJcbiAgICBzaGVldERhdGEuc3RhcnRlZCA9IHRoaXMuaXRlbS5zdGFydGVkXHJcblxyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiBzaGVldERhdGFcclxuICB9XHJcblxyXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudCAoKSB7XHJcbiAgLy8gICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKSByZXR1cm4gdW5kZWZpbmVkXHJcbiAgLy8gICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcclxuICAvLyAgIGlmICghcGFydGljaXBhbnQpIHJldHVybiB1bmRlZmluZWRcclxuICAvLyAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50KVxyXG4gIC8vIH1cclxuXHJcbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50TG9jYXRpb24gKCkge1xyXG4gIC8vICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cykgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIC8vICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXHJcbiAgLy8gfVxyXG5cclxuICAvKiogQG92ZXJyaWRlICovXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgLy8gaHRtbC5maW5kKCcuY2hhc2UtdHJhY2snKS5yZWFkeShhc3luYyBodG1sID0+IGF3YWl0IHRoaXMuX29uU2hlZXRSZWFkeShodG1sKSlcclxuXHJcbiAgICAvLyBIYW5kbGUgRHJvcHJvd25cclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5kcm9wZG93bi1lbGVtZW50JylcclxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQoZXZlbnQpKVxyXG5cclxuICAgIGh0bWwuZmluZCgnLmRyb3BidG4nKS5jbGljayhldmVudCA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgICBjb25zdCBkcm9wZG93biA9IHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24nKVxyXG4gICAgICBjb25zdCBkcm9wZG93bkNvbnRlbnQgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXHJcbiAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcclxuICAgIH0pXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxyXG4gICAgICAubW91c2VsZWF2ZShldmVudCA9PlxyXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXHJcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXHJcbiAgICAgIClcclxuXHJcbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxyXG5cclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5waW4tbG9jYXRpb24nKVxyXG4gICAgICAuY29udGV4dG1lbnUodGhpcy5jbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxyXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcclxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcclxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXHJcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxyXG5cclxuICAgIGh0bWwuZmluZCgnLnAtc2lkZScpLmNsaWNrKHRoaXMuX29uQ2hhbmdlU2lkZS5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25EZWxldGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcm9sbCcpLmNsaWNrKHRoaXMuX29uUmVzZXRSb2xsLmJpbmQodGhpcykpXHJcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtZHJpdmVyJykuY2xpY2sodGhpcy5fb25EZWxldGVEcml2ZXIuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcclxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxyXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcclxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxyXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5hZGQtc2lnbicpLmNsaWNrKHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5yb2xsLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25Sb2xsUGFydGljaXBhbnQuYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXHJcblxyXG4gICAgaHRtbC5maW5kKCcubmFtZS1jb250YWluZXInKS5jbGljayh0aGlzLl9vbkxvY2F0aW9uQ2xpY2suYmluZCh0aGlzKSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5vYnN0YWNsZS10eXBlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVR5cGVDbGljay5iaW5kKHRoaXMpKVxyXG4gICAgLy8gaHRtbC5maW5kKCcub2JzdGFjbGUtdG9nZ2xlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVRvZ2dsZUNsaWNrLmJpbmQodGhpcykpXHJcbiAgICBodG1sLmZpbmQoJy50b2dnbGUnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50LWNvbnRyb2wnKVxyXG4gICAgICAuY2xpY2sodGhpcy5fb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXHJcblxyXG4gICAgaHRtbC5maW5kKCcuY2hhc2UtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uQ2hhc2VDb250cm9sQ2xpY2tlZC5iaW5kKHRoaXMpKVxyXG5cclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5sb2NhdGlvbi1jb250cm9sJylcclxuICAgICAgLmNsaWNrKHRoaXMuX29uTG9jYXRpb25Db250cm9sQ2xpY2suYmluZCh0aGlzKSlcclxuICAgIC8vIGh0bWxcclxuICAgIC8vICAgLmZpbmQoJy5tb3ZlbWVudC1hY3Rpb24gLmRlY3JlYXNlJylcclxuICAgIC8vICAgLmNsaWNrKHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zLmJpbmQodGhpcywgLTEpKVxyXG4gICAgLy8gaHRtbFxyXG4gICAgLy8gICAuZmluZCgnLm1vdmVtZW50LWFjdGlvbiAuaW5jcmVhc2UnKVxyXG4gICAgLy8gICAuY2xpY2sodGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMuYmluZCh0aGlzLCAxKSlcclxuXHJcbiAgICAvLyBodG1sXHJcbiAgICAvLyAuZmluZCgnLnBpbi1sb2NhdGlvbicpXHJcbiAgICAvLyAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQoZXZlbnQpKVxyXG5cclxuICAgIGNvbnN0IHBpbkxvY2F0aW9uU2VsZWN0b3JEcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XHJcbiAgICAgIGRyYWdTZWxlY3RvcjogJy5waW4tbG9jYXRpb24nLFxyXG4gICAgICBwZXJtaXNzaW9uczoge1xyXG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxyXG4gICAgICB9LFxyXG4gICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgcGluTG9jYXRpb25TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcclxuXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcclxuICAgICAgZHJvcFNlbGVjdG9yOiAnLnBhcnRpY2lwYW50JyxcclxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxyXG4gICAgfSlcclxuICAgIHBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxyXG5cclxuICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xyXG4gICAgICBkcm9wU2VsZWN0b3I6ICcubmV3LXBhcnRpY2lwYW50JyxcclxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XHJcbiAgICB9KVxyXG4gICAgbmV3UGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXHJcblxyXG4gICAgaWYgKHRoaXMuaXRlbS5zdGFydGVkKSB7XHJcbiAgICAgIGh0bWxcclxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uIC5jaGFzZS1wYXJ0aWNpcGFudCcpXHJcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrLmJpbmQodGhpcykpXHJcblxyXG4gICAgICBjb25zdCBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wID0gbmV3IERyYWdEcm9wKHtcclxuICAgICAgICBkcmFnU2VsZWN0b3I6ICcuY2hhc2UtcGFydGljaXBhbnQnLFxyXG4gICAgICAgIGRyb3BTZWxlY3RvcjogJy5jaGFzZS1sb2NhdGlvbicsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IHtcclxuICAgICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgZHJvcDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGxiYWNrczoge1xyXG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcclxuICAgICAgICAgIGRyb3A6IHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcyksXHJcbiAgICAgICAgICBkcmFnb3ZlcjogdGhpcy5fb25EcmFnRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcC5iaW5kKGh0bWxbMF0pXHJcblxyXG4gICAgICBodG1sXHJcbiAgICAgICAgLmZpbmQoJy5jaGFzZS1sb2NhdGlvbicpXHJcbiAgICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZShldmVudCkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcclxuICAgIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XHJcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcclxuICAgIGxldCBkYXRhID0gZmQub2JqZWN0XHJcbiAgICBpZiAodXBkYXRlRGF0YSkge1xyXG4gICAgICBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayB0aGF0IHN0YXJ0aW5nIHBvc2l0aW9uIGlzIG5vdCBvdXRzaWRlIG9mIGNoYXNlIHJhbmdlLlxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoICYmXHJcbiAgICAgIGRhdGEuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxyXG4gICAgKSB7XHJcbiAgICAgIGRhdGEuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHtcclxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICAvLyBIYW5kbGUgcGFydGljaXBhbnRzIGFycmF5XHJcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cykpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IGspXHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgdWkubm90aWZpY2F0aW9ucy5lcnJvcignUGFydGljaXBhbnQgdGFibGUgY29ycnVwdGVkJylcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydGljaXBhbnRzW2luZGV4XVxyXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHYpXHJcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbCwgY2xlYW5lZClcclxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0gPSBvcmlnaW5hbFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XHJcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxyXG4gICAgICAvLyBIYW5kbGUgbG9jYXRpb25zIGxpc3RcclxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcclxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXHJcbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXHJcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxyXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZGVsZXRlIGRhdGEubG9jYXRpb25zXHJcbiAgICAgIGRhdGEuc3lzdGVtLmxvY2F0aW9ucyA9IHsgbGlzdDogbG9jYXRpb25zIH1cclxuICAgIH1cclxuICAgIC8vIGNvbnN0IHBhcnRpY2lwYW50cyA9IGRhdGEuc3lzdGVtPy5wYXJ0aWNpcGFudHM7XHJcbiAgICAvLyBpZiggcGFydGljaXBhbnRzKSBkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMgPSBPYmplY3QudmFsdWVzKCBwYXJ0aWNpcGFudHMpLm1hcCggcCA9PiBjbGVhbihwKSk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXHJcbiAgICByZXR1cm4gZmxhdHRlbk9iamVjdChkYXRhKVxyXG4gIH1cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIC8vIGFzeW5jIF9vblN1Ym1pdCguLi5hcmdzKSB7XHJcbiAgLy8gIGF3YWl0IHN1cGVyLl9vblN1Ym1pdCguLi5hcmdzKTtcclxuICAvLyB9XHJcblxyXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3Qgb3ZlcnJpZGUgPSB0YXJnZXQ/LmRhdGFzZXQ/Lm92ZXJyaWRlID09PSAndHJ1ZSdcclxuICAgIGlmICh0YXJnZXQ/Lm5hbWU/LmluY2x1ZGVzKCcuaHAnKSkge1xyXG4gICAgICBjb25zdCBbLCAsIHV1aWRdID0gdGFyZ2V0Lm5hbWUuc3BsaXQoJy4nKVxyXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudCh1dWlkKVxyXG4gICAgICBpZiAocGFydGljaXBhbnQgJiYgcGFydGljaXBhbnQuYWN0b3IpIHtcclxuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcih0YXJnZXQudmFsdWUpKSkge1xyXG4gICAgICAgICAgYXdhaXQgcGFydGljaXBhbnQuYWN0b3Iuc2V0SHAoTnVtYmVyKHRhcmdldC52YWx1ZSkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAob3ZlcnJpZGUpIHtcclxuICAgICAgY29uc3QgWywgdHlwZSwgdXVpZCwgc3ViVHlwZSwgZGF0YV0gPSB0YXJnZXQubmFtZS5zcGxpdCgnLicpXHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdHlwZSA9PT0gJ3BhcnRpY2lwYW50cycgJiZcclxuICAgICAgICAhaXNOYU4oaW5kZXgpICYmXHJcbiAgICAgICAgc3ViVHlwZSA9PT0gJ3NwZWVkLWNoZWNrJ1xyXG4gICAgICApIHtcclxuICAgICAgICBpZiAoZGF0YSA9PT0gJ25hbWUnKSB7XHJcbiAgICAgICAgICAvLyBDaGFuZ2luZyBuYW1lIHdpbGwgcmVtb3ZlIGFsbCBvdGhlciByZWYgIVxyXG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgICAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXHJcbiAgICAgICAgICAgIDogW11cclxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2spIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5pZFxyXG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnR5cGVcclxuICAgICAgICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sgPSB7fVxyXG4gICAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLm5hbWUgPSB0YXJnZXQudmFsdWVcclxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBzZXRTY3JvbGwgKGFwcCwgaHRtbCwgZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhLmVkaXRhYmxlKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgY29uc3QgaW5pdGlhbE9wZW5pbmcgPSBodG1sWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2luZG93LWFwcCcpXHJcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxyXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm5cclxuXHJcbiAgICBsZXQgc3RhcnQgPSBkYXRhLmRhdGEuc2Nyb2xsPy5jaGFzZVRyYWNrLmZyb21cclxuICAgIGxldCBlbmQgPSBkYXRhLmRhdGEuc2Nyb2xsPy5jaGFzZVRyYWNrLnRvXHJcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBzdGFydCA9IDBcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZW5kID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBlbmQgPSAtMVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpbml0aWFsT3BlbmluZykge1xyXG4gICAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcclxuICAgICAgY29uc3QgcmVtU2l6ZSA9IE51bWJlcihyZW1TdHJpbmcucmVwbGFjZSgncHgnLCAnJykpXHJcbiAgICAgIGlmIChhcHAuaXRlbS5zdGFydGVkKSB7XHJcbiAgICAgICAgY29uc3QgcENvdW50ID0gYXBwLml0ZW0uYWN0dWFsUGFydGljaXBhbnRzPy5sZW5ndGhcclxuICAgICAgICBjb25zdCB3aWR0aCA9IChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplXHJcbiAgICAgICAgYXBwLmFjdGl2YXRlVGFiKCdzZXR1cCcpXHJcbiAgICAgICAgLy8gYXBwLl90YWJzWzBdLmFjdGl2ZSA9ICdzZXR1cCdcclxuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSBNYXRoLm1heCh3aWR0aCwgNDAgKiByZW1TaXplKVxyXG4gICAgICAgIC8vIGh0bWwuY3NzKCd3aWR0aCcsIGAke3dpZHRofXB4YClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSA0NSAqIHJlbVNpemVcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYXdhaXQgYXBwLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKHsgaHRtbCB9KSAvLyBodG1sIGlzIG5vdCByZW5kZXJlZCwgZWxlbWVudCBoYXZlIHNpemUgPSAwXHJcbiAgICAgIC8vIGlmIChlbmQgPiAwKSB7XHJcbiAgICAgIC8vICAgc3RhcnQgPSAwXHJcbiAgICAgIC8vIH0gZWxzZSBpZiAoc3RhcnQgPiAwKSB7XHJcbiAgICAgIC8vICAgZW5kID0gc3RhcnRcclxuICAgICAgLy8gICBzdGFydCA9IDBcclxuICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzdGFydCAmJiBzdGFydCAhPT0gLTEpIHtcclxuICAgICAgY2hhc2VUcmFjay5zY3JvbGxUbyh7XHJcbiAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgIGxlZnQ6IHN0YXJ0LFxyXG4gICAgICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW5kICE9PSAtMSkge1xyXG4gICAgICBjaGFzZVRyYWNrLnNjcm9sbFRvKHtcclxuICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgbGVmdDogZW5kLFxyXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGF3YWl0IGFwcC5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IH0pXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgb25DbG9zZSAoYXBwLCBodG1sKSB7XHJcbiAgICBhcHAuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiAtMSB9KVxyXG4gIH1cclxuXHJcbiAgLy8gYXN5bmMgX29uU2hlZXRSZWFkeSAoaHRtbCkge1xyXG4gIC8vICAgY29uc3QgdHJhY2sgPSBodG1sLmZpbmQoJy5jaGFzZS10cmFjaycpXHJcbiAgLy8gICBjb25zdCBlbGVtZW50ID0gJCh0cmFjaykuZmluZCgnLmFjdGl2ZScpXHJcblxyXG4gIC8vICAgY29uc3QgZWxlbWVudGxlZnQgPSBlbGVtZW50WzBdLm9mZnNldExlZnRcclxuICAvLyAgIGNvbnN0IGRpdldpZHRoID0gdHJhY2tbMF0uY2xpZW50V2lkdGhcclxuICAvLyAgIGxldCBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gZWxlbWVudGxlZnQgLSBkaXZXaWR0aCAvIDJcclxuICAvLyAgIGlmIChlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IDwgMCkgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IDBcclxuXHJcbiAgLy8gICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW0udHJhY2tTY3JvbGxQb3NpdGlvblxyXG4gIC8vICAgaWYgKCF0cmFjay5sZW5ndGgpIHJldHVyblxyXG4gIC8vICAgaWYgKCFzY3JvbGxQb3NpdGlvbikgcmV0dXJuXHJcbiAgLy8gICBjb25zdCB0cmFja0VsZW1lbnQgPSB0cmFja1swXVxyXG4gIC8vICAgdHJhY2tFbGVtZW50LnNjcm9sbFRvKHtcclxuICAvLyAgICAgdG9wOiAwLFxyXG4gIC8vICAgICBsZWZ0OiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0LFxyXG4gIC8vICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXHJcbiAgLy8gICB9KVxyXG5cclxuICAvLyAgIC8vVE9ETyA6IGNvdWxkZCB1c2UgcGFyZW50Lm9mZnNldFRvcCBldCBjaGlsZC5vZmZzZXRUb3AgdG8gY2VudGVyIHRoZSBhY3RpdmUgZWxlbWVudFxyXG5cclxuICAvLyAgIC8vIGNvbnN0IGFjdGl2ZSA9IGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyLmFjdGl2ZScpXHJcbiAgLy8gICAvLyBpZiggYWN0aXZlKXtcclxuICAvLyAgIC8vICAgY29uc3QgZWxlbWVudCA9IGFjdGl2ZVswXVxyXG4gIC8vICAgLy8gICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiZW5kXCIsIGlubGluZTogXCJjZW50ZXJcIn0pXHJcbiAgLy8gICAvLyBlbGVtZW50LnNjcm9sbEludG9WaWV3KGZhbHNlKVxyXG4gIC8vICAgLy8gfVxyXG4gIC8vICAgLy8gfSlcclxuICAvLyB9XHJcblxyXG4gIGZpbmRQYXJ0aWNpcGFudEluZGV4ICh1dWlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxyXG4gIH1cclxuXHJcbiAgZmluZExvY2F0aW9uSW5kZXggKHV1aWQpIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcclxuICB9XHJcblxyXG4gIGZpbmRMb2NhdGlvbiAodXVpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QuZmluZChwID0+IHAudXVpZCA9PT0gdXVpZClcclxuICB9XHJcblxyXG4gIGZpbmRJbmRleCAobGlzdCwgdXVpZCkge1xyXG4gICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50Jyk/LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxyXG4gICAgY29uc3QgYXNzaXN0YW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXHJcbiAgICBjb25zdCBiZW5lZmljaWFyeVV1aWQgPSB0YXJnZXQuZGF0YXNldC5iZW5lZmljaWFyeVV1aWRcclxuICAgIGF3YWl0IHRoaXMuaXRlbS5hc3Npc3RQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkLCBiZW5lZmljaWFyeVV1aWQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICAvLyBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmxvY2F0aW9uLm9ic3RhY2xlJylcclxuICAgIC8vIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXHJcbiAgICAvLyBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgIC8vIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXHJcbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCd0b2dnbGUnKVxyXG4gICAgY29uc3QgZGF0YSA9IGV4cGFuZE9iamVjdCh7XHJcbiAgICAgIFt0b2dnbGVdOiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3dpdGNoZWQtb24nKVxyXG4gICAgfSlcclxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xyXG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcclxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcclxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXHJcbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXHJcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxyXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBhc3luYyBfb25PYnN0YWNsZVRvZ2dsZUNsaWNrIChldmVudCkge1xyXG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gIC8vICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpXHJcbiAgLy8gICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxyXG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXHJcbiAgLy8gICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxyXG4gIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlID0gIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZVxyXG4gIC8vICAgaWYgKCFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzKSB7XHJcbiAgLy8gICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMgPSB7XHJcbiAgLy8gICAgICAgYmFycmllcjogdHJ1ZVxyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9XHJcbiAgLy8gICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXHJcbiAgLy8gfVxyXG5cclxuICBhc3luYyBfb25PYnN0YWNsZVR5cGVDbGljayAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxyXG4gICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxyXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcclxuICAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xyXG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge31cclxuICAgIH1cclxuICAgIGNvbnN0IG9ic3RhY2xlID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlsc1xyXG4gICAgY29uc3QgdHlwZSA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JhcnJpZXInKSA/ICdiYXJyaWVyJyA6ICdoYXphcmQnXHJcbiAgICBjb25zdCBhY3RpdmUgPSBvYnN0YWNsZVt0eXBlXVxyXG4gICAgb2JzdGFjbGUuYmFycmllciA9IGZhbHNlXHJcbiAgICBvYnN0YWNsZS5oYXphcmQgPSBmYWxzZVxyXG4gICAgb2JzdGFjbGVbdHlwZV0gPSAhYWN0aXZlXHJcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhYWN0aXZlXHJcbiAgICAvLyBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmFycmllcicpKSB7XHJcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXHJcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxyXG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXHJcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gIWxvY2F0aW9uc1tcclxuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XHJcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcclxuICAgIC8vIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGF6YXJkJykpIHtcclxuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xyXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcclxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXHJcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXHJcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxyXG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcclxuICAgIC8vIH1cclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ2xpY2sgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcclxuICAgIGNvbnN0IGxVdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlTG9jYXRpb24obFV1aWQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Mb2NhdGlvbkNvbnRyb2xDbGljayAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cclxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0LmFjdGlvblxyXG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXHJcbiAgICBjb25zdCBsVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcclxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbW92ZUxvY2F0aW9uKGxVdWlkKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2FkZC1hZnRlcic6XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmluc2VydExvY2F0aW9uKGxVdWlkLCB7IHNoaWZ0OiAxIH0pXHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGNhc2UgJ2FkZC1iZWZvcmUnOlxyXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5pbnNlcnRMb2NhdGlvbihsVXVpZCwgeyBzaGlmdDogMCB9KVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICdhZGQtcGFydGljaXBhbnQnOlxyXG4gICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHtcclxuICAgICAgICAgIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQsXHJcbiAgICAgICAgICBsb2NhdGlvblV1aWQ6IGxVdWlkLFxyXG4gICAgICAgICAgZHJvcERhdGE6IHt9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKGBMb2NhdGlvbiAke2xVdWlkfSBDbGlja2VkLiBBY3Rpb246ICR7YWN0aW9ufWApXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50Q2xpY2sgKGV2ZW50KSB7XHJcbiAgICBjb25zdCBwVXVpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldD8udXVpZFxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlUGFydGljaXBhbnQocFV1aWQpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxyXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duJykpIHJldHVyblxyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudFV1aWQpIHJldHVyblxyXG4gICAgc3dpdGNoICh0YXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcclxuICAgICAgY2FzZSAnZHJhd0d1bic6XHJcbiAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVQYXJ0aWNpcGFudEd1bihwYXJ0aWNpcGFudFV1aWQpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnZGVjcmVhc2VBY3Rpb25zJzpcclxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygtMSwgZXZlbnQpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnaW5jcmVhc2VBY3Rpb25zJzpcclxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygxLCBldmVudClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdtb3ZlQmFja3dhcmQnOlxyXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCAtMSwgeyByZW5kZXI6IHRydWUgfSlcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdtb3ZlRm9yd2FyZCc6XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIDEsIHsgcmVuZGVyOiB0cnVlIH0pXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnYWN0aXZhdGVQYXJ0aWNpcGFudCc6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcclxuICAgICAgY2FzZSAnYm9udXNEaWNlJzpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCBkaWNlTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQuY291bnRcclxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVCb251c0RpY2UocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyKVxyXG4gICAgICAgICAgdGhpcy5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2NhdXRpb3VzQXBwcm9hY2gnOlxyXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5jYXV0aW91c0FwcHJvYWNoKHBhcnRpY2lwYW50VXVpZClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdlZGl0UGFydGljaXBhbnQnOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcclxuICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocGFydGljaXBhbnRVdWlkKVxyXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWQgPSB0aGlzLml0ZW0udXVpZFxyXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWQgPSBsb2NhdGlvbi51dWlkXHJcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZSA9IHRydWVcclxuICAgICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHBhcnRpY2lwYW50LmRhdGEpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3JlbW92ZVBhcnRpY2lwYW50JzpcclxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICB0aGlzLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNoYXNlQ29udHJvbENsaWNrZWQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKT8uZGF0YXNldD8udXVpZFxyXG4gICAgaWYgKCFsb2NhdGlvblV1aWQpIHJldHVyblxyXG4gICAgc3dpdGNoICh0YXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcclxuICAgICAgY2FzZSAnb2JzdGFjbGUtc2tpbGwtY2hlY2snOlxyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW0uYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrKGxvY2F0aW9uVXVpZClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucyAoY291bnQsIGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgcGFydGljaXBhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcclxuICAgIGlmICghcGFydGljaXBhbnRVdWlkKSByZXR1cm5cclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcclxuICAgIGlmIChwYXJ0aWNpcGFudC5oYXNNYXhNdnRBY3Rpb25zICYmIGNvdW50ID4gMCkgcmV0dXJuXHJcbiAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucyhjb3VudClcclxuXHJcbiAgICAvLyBjb25zdCBzaGVldCA9IHRhcmdldC5jbG9zZXN0KCcuY29jNy5pdGVtLmNoYXNlJylcclxuICAgIC8vIGNvbnN0IGNoYXNlVHJhY2sgPSBzaGVldC5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxyXG4gICAgLy8gaWYgKGNoYXNlVHJhY2spXHJcbiAgICAvLyAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoe1xyXG4gICAgLy8gICAgICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBjaGFzZVRyYWNrLnNjcm9sbExlZnRcclxuICAgIC8vICAgfSlcclxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25CdXR0b25DbGljayAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0Py5hY3Rpb25cclxuICAgIGlmICghYWN0aW9uKSByZXR1cm5cclxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ2luaXQnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICFpc05hTih0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCkgJiZcclxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsID4gMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgbG9jYXRpb25zID0gQXJyYXkuYXBwbHkoXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIEFycmF5KHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsKVxyXG4gICAgICAgICAgKS5tYXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KSB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgbG9jYXRpb25zWzBdLm5hbWUgPSAnU3RhcnQnXHJcbiAgICAgICAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubmFtZSA9ICdFbmQnXHJcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdyZXNldCc6XHJcbiAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xyXG4gICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzZXRDaGFzZScpfWAsXHJcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2VIaW50Jyl9PC9wPmAsXHJcbiAgICAgICAgICB5ZXM6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QoW10pXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS5zdG9wKClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICdjdXQyY2hhc2UnOlxyXG4gICAgICAgIGlmICh0aGlzLml0ZW0uYWxsSGF2ZVNwZWVkUm9sbCkge1xyXG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xyXG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1DdXQyQ2hhc2UnKX1gLFxyXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXHJcbiAgICAgICAgICAgICAgJ0NvQzcuQ29uZmlybUN1dDJDaGFzZUhpbnQnXHJcbiAgICAgICAgICAgICl9PC9wPmAsXHJcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLmN1dFRvVGhlQ2hhc2UoKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RBbGxIYXZlU3BlZWRSb2xsJykpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICdyZXN0YXJ0JzpcclxuICAgICAgICBEaWFsb2cuY29uZmlybSh7XHJcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2UnKX1gLFxyXG4gICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAnQ29DNy5Db25maXJtUmVzdGFydENoYXNlSGludCdcclxuICAgICAgICAgICl9PC9wPmAsXHJcbiAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5yZXN0YXJ0KClcclxuICAgICAgICB9KVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBjYXNlICduZXh0Um91bmQnOlxyXG4gICAgICAgIGlmICh0aGlzLml0ZW0ubmV4dEFjdGl2ZVBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgICBEaWFsb2cuY29uZmlybSh7XHJcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybU5leHRDaGFzZVJvdW5kJyl9YCxcclxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxyXG4gICAgICAgICAgICAgICdDb0M3LkNvbmZpcm1OZXh0Q2hhc2VSb3VuZEhpbnQnXHJcbiAgICAgICAgICAgICl9PC9wPmAsXHJcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2UgdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxyXG4gICAgICAgIGJyZWFrXHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2FuUGluTG9jYXRpb25EcmFnU3RhcnQgKHNlbGVjdG9yKSB7XHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChldmVudCkge1xyXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ2kuaWNvbicpXHJcbiAgICBjb25zdCBkcmFnSWNvbiA9IGEucXVlcnlTZWxlY3RvcignLnBpbi1pbWFnZScpXHJcblxyXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShkcmFnSWNvbiwgMCwgZHJhZ0ljb24uaGVpZ2h0KVxyXG5cclxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IGEuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcclxuICAgIGNvbnN0IGRhdGEgPSB7fVxyXG5cclxuICAgIGRhdGEudHlwZSA9ICdsb2NhdG9yJ1xyXG4gICAgZGF0YS5Db0M3VHlwZSA9ICdjaGFzZSdcclxuICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxyXG4gICAgZGF0YS5sb2NhdGlvblV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXHJcbiAgICBkYXRhLmRvY1V1aWQgPSB0aGlzLml0ZW0udXVpZFxyXG4gICAgZGF0YS5jYWxsQmFjayA9ICdsb2NhdG9yRHJvcHBlZCdcclxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXHJcblxyXG4gICAgLy8gY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWQsIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQgfVxyXG4gICAgLy8gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxyXG4gIH1cclxuXHJcbiAgX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKHNlbGVjdG9yKSB7XHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AgKHNlbGVjdG9yKSB7XHJcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKGRyYWdFdmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGRyYWdEYXRhID0geyB1dWlkOiB0YXJnZXQuZGF0YXNldC51dWlkLCB0eXBlOiAncGFydGljaXBhbnQnIH1cclxuICAgIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoZHJhZ0V2ZW50KSB7XHJcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcclxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXHJcblxyXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdEcm9wcGVkJylcclxuICAgIHRoaXMuX29uRHJhZ0xlYXZlKGRyYWdFdmVudClcclxuXHJcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgbG9jYXRpb25VdWlkID0gdGFyZ2V0LmRhdGFzZXQudXVpZFxyXG5cclxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdwYXJ0aWNpcGFudCcpIHtcclxuICAgICAgY29uc3Qgb2xkTG9jYXRpb24gPSB0aGlzLmZpbmRMb2NhdGlvbihsb2NhdGlvblV1aWQpXHJcbiAgICAgIGlmIChvbGRMb2NhdGlvbikge1xyXG4gICAgICAgIGlmIChvbGRMb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKGRhdGEudXVpZCkpIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxyXG4gICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihkYXRhLnV1aWQsIGxvY2F0aW9uVXVpZClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHtcclxuICAgICAgICBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkLFxyXG4gICAgICAgIGxvY2F0aW9uVXVpZCxcclxuICAgICAgICBkcm9wRGF0YTogZGF0YVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX29uRHJhZ092ZXIgKGRyYWdFdmVudCkge1xyXG4gICAgdGhpcy5fb25EcmFnRW50ZXIoZHJhZ0V2ZW50KVxyXG4gIH1cclxuXHJcbiAgX29uRHJhZ0VudGVyIChkcmFnRXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcclxuICB9XHJcblxyXG4gIF9vbkRyYWdMZWF2ZSAoZHJhZ0V2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgdGFyZ2V0LmNsYXNzTGlzdD8ucmVtb3ZlKCdkcmFnLW92ZXInKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgdXVpZCA9IHRhcmdldC5kYXRhc2V0Py51dWlkXHJcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxyXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcclxuICAgIGF3YWl0IHRoaXMuYWx0ZXJQYXJ0aWNpcGFudChkYXRhLCB1dWlkKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uQWRkUGFydGljaXBhbnQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBkYXRhID0geyBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkIH1cclxuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHtcclxuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcclxuICAgICAgZGF0YS5kcm9wRGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcclxuICAgIH1cclxuICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKGRhdGEpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Sb2xsUGFydGljaXBhbnQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudEVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcclxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudEVsZW1lbnQuZGF0YXNldC51dWlkXHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICA6IFtdXHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50c1tpbmRleF0pXHJcbiAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcclxuICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxyXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXHJcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxyXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxVdWlkID0gcm9sbC51dWlkXHJcbiAgICAgIHJvbGwuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxyXG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIHBhcnRpY2lwYW50LmFjdG9yLnBsYXllcikge1xyXG4gICAgICAgIHJvbGwuc3RhbmRieSA9IHRydWVcclxuICAgICAgICByb2xsLnN0YW5kYnlUZXh0ID0gJ0NvQzcuQ2hhc2UnXHJcbiAgICAgICAgcm9sbC5zdGFuZGJ5UmlnaHRJY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcclxuICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYyhwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXHJcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxyXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcclxuICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzU2tpbGwpIHtcclxuICAgICAgICByb2xsLnNraWxsID0gcGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZcclxuICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxyXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcclxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXHJcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xyXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbEF0dHJpYnV0ZShwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXHJcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxyXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XHJcbiAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xyXG4gICAgICAgIHJhd1ZhbHVlOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXHJcbiAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxyXG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcclxuICAgICAgcm9sbC5wYXJlbnQgPSB0aGlzLml0ZW0udXVpZFxyXG4gICAgICBhd2FpdCByb2xsLnJvbGwoKVxyXG4gICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXHJcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcclxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXHJcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXHJcbiAgfVxyXG5cclxuICBfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKVxyXG4gIH1cclxuXHJcbiAgX29uRHJhZ0xlYXZlUGFydGljaXBhbnQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJylcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNoYW5nZVNpZGUgKGV2ZW50KSB7XHJcbiAgICAvLyBjb25zdCB0ZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLm5DZG9DeW9pdWR0anJOa3UnKTtcclxuICAgIC8vIGNvbnN0IGl0ZW1UZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdJdGVtLnBsSUVtTlJQNk83UHZlTnYucm9sbC5xMnNBenNIdDRGc3FzZGZEJyk7XHJcblxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcclxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcclxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXHJcbiAgICAgIDogW11cclxuICAgIHBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyID0gIXBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyXHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25EZWxldGVEcml2ZXIgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXHJcbiAgICBjb25zdCB1dWlkID0gZHJpdmVyLmRhdGFzZXQudXVpZFxyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcclxuICAgICAgOiBbXVxyXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXHJcbiAgICBkZWxldGUgcGFydGljaXBhbnQuZG9jVXVpZFxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uRGVsZXRlUGFydGljaXBhbnQgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxyXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xyXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcclxuICAgICAgOiBbXVxyXG4gICAgcGFydGljaXBhbnRzLnNwbGljZShpbmRleCwgMSlcclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vblJlc2V0Um9sbCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXHJcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICA6IFtdXHJcbiAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50IChkYXRhLCB1dWlkKSB7XHJcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcclxuICAgIGlmIChkYXRhLnRva2VuVXVpZCkgZG9jVXVpZCA9IGRhdGEudG9rZW5VdWlkXHJcbiAgICBlbHNlIHtcclxuICAgICAgZG9jVXVpZCA9XHJcbiAgICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxyXG4gICAgICAgICAgPyBgU2NlbmUuJHtkYXRhLnNjZW5lSWR9LlRva2VuLiR7ZGF0YS50b2tlbklkfWBcclxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcclxuICAgICAgZG9jVXVpZCA9IGRhdGEudXVpZFxyXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XHJcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcclxuICAgICAgaWYgKCFhY3RvciAmJiBkYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xyXG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cclxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxyXG5cclxuICAgIHN3aXRjaCAoZGF0YS50eXBlPy50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIGNhc2UgJ2FjdG9yJzpcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdpdGVtJzpcclxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xyXG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxyXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XHJcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxyXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XHJcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOkNoZWNrIGZvciBzcGVlZCBjaGVjaywgaWYgbm9uZSBhZGQgc3BlZWRjaGVja1xyXG4gICAgLy8gc3BlZWRDaGVjayA9IHtcclxuICAgIC8vICAgaWQ6ICdzdHInXHJcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcclxuICAgIC8vIH1cclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICA6IFtdXHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcclxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxyXG4gICAgaWYgKG9sZFBhcnRpY2lwYW50Lm1vdikgZGVsZXRlIG9sZFBhcnRpY2lwYW50Lm1vdlxyXG4gICAgbWVyZ2VPYmplY3Qob2xkUGFydGljaXBhbnQsIHBhcnRpY2lwYW50KVxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzICgpIHtcclxuICAgIGF3YWl0IHRoaXMuaXRlbS5jbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKGRhdGEpIHtcclxuICAgIC8vIGxldCBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxyXG4gICAgLy8gICAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ReUZUaWlFWmlYOXZUZmlDJ1xyXG4gICAgLy8gKVxyXG4gICAgLy8gcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcclxuICAgIC8vICAgJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4udWJMemhlNTdKT1RITUlyOSdcclxuICAgIC8vIClcclxuICAgIC8vIHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoJ0FjdG9yLnVpWTNjYXBTVWVMTHZTTGknKVxyXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uUXlGVGlpRVppWDl2VGZpQy5JdGVtLkdyT0hlTFhmZUVwaHNSTVonKVxyXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggXCJTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLllxc05RUERoRkNQbFNScUpcIilcclxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIFwiU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ZcXNOUVBEaEZDUGxTUnFKLkl0ZW0uOEpFblRqSk9HRlhtbDR3a1wiKVxyXG5cclxuICAgIC8vIHRyeSB0byBmaW5kIGEgdmFsaWQgZG9jdW1lbnRcclxuICAgIGxldCBkb2NVdWlkLCBhY3RvclxyXG4gICAgaWYgKGRhdGEudG9rZW5VdWlkKSBkb2NVdWlkID0gZGF0YS50b2tlblV1aWRcclxuICAgIGVsc2Uge1xyXG4gICAgICBkb2NVdWlkID1cclxuICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXHJcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxyXG4gICAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleSB8fCBkYXRhLmlkXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xyXG4gICAgICBkb2NVdWlkID0gZGF0YS51dWlkXHJcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcclxuICAgICAgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxyXG4gICAgICBpZiAoIWFjdG9yICYmIGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XHJcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxyXG4gICAgaWYgKGRvY1V1aWQpIHBhcnRpY2lwYW50LmRvY1V1aWQgPSBkb2NVdWlkXHJcblxyXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgY2FzZSAnYWN0b3InOlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2l0ZW0nOlxyXG4gICAgICAgIGlmIChkYXRhLmlkKSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoZGF0YS5pZClcclxuICAgICAgICAgIGlmIChpdGVtPy5kYXRhPy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XHJcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcclxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XHJcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcclxuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XHJcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcclxuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrIGNvbiBub24gdmVoaWNsZSwgZHJpdmUgYXV0byBmb3IgdmVoaWNsZVxyXG4gICAgLy8gc3BlZWRDaGVjayA9IHtcclxuICAgIC8vICAgaWQ6ICdjb24nXHJcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcclxuICAgIC8vIH1cclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50LnNwZWVkQ2hlY2spIHtcclxuICAgICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnZlaGljbGUpIHtcclxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xyXG4gICAgICAgICAgaWQ6ICdjb24nLFxyXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcclxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNvbnN0aXR1dGlvbicpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XHJcbiAgICAgICAgICB0eXBlOiAnaXRlbScsXHJcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRHJpdmVBdXRvU2tpbGxOYW1lJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICA6IFtdXHJcblxyXG4gICAgbGV0IHVuaXF1ZSA9IGZhbHNlXHJcbiAgICB3aGlsZSAoIXVuaXF1ZSkge1xyXG4gICAgICBwYXJ0aWNpcGFudC51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcclxuICAgICAgdW5pcXVlID1cclxuICAgICAgICBwYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKS5sZW5ndGggPT09IDBcclxuICAgIH1cclxuXHJcbiAgICBwYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudClcclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZVBhcnRpY2lwYW50R3VuIChwYXJ0aWNpcGFudFV1aWQpIHtcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXHJcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxyXG4gICAgICA6IFtdXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm5cclxuICAgIHBhcnRpY2lwYW50Lmhhc0FHdW5SZWFkeSA9ICFwYXJ0aWNpcGFudC5oYXNBR3VuUmVhZHlcclxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYW4gKG9iaikge1xyXG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XHJcbiAgICBjb25zdCB0cCA9IGdldFR5cGUob2JqW3Byb3BOYW1lXSlcclxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcpIHtcclxuICAgICAgb2JqW3Byb3BOYW1lXSA9IGNsZWFuKG9ialtwcm9wTmFtZV0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRwID09PSAnT2JqZWN0JyAmJiAhT2JqZWN0LmVudHJpZXMob2JqW3Byb3BOYW1lXSkubGVuZ3RoKSB7XHJcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXHJcbiAgICB9IGVsc2UgaWYgKHRwID09PSAnc3RyaW5nJyAmJiAhb2JqW3Byb3BOYW1lXS5sZW5ndGgpIHtcclxuICAgICAgb2JqW3Byb3BOYW1lXSA9IG51bGxcclxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFpc05hTihOdW1iZXIob2JqW3Byb3BOYW1lXSkpKSB7XHJcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBOdW1iZXIob2JqW3Byb3BOYW1lXSlcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG9ialxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXHJcbi8qKlxyXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvQzdJdGVtU2hlZXRWMiBleHRlbmRzIEl0ZW1TaGVldCB7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XHJcbiAgICogQHJldHVybnMge09iamVjdH1cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcclxuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xyXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJ10sXHJcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9pdGVtLXNoZWV0VjIuaHRtbCcsXHJcbiAgICAgIHdpZHRoOiA1MDAsXHJcbiAgICAgIGhlaWdodDogNDUwLFxyXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcclxuICAgICAgdGFiczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxyXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XHJcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcclxuICAgKi9cclxuICBnZXREYXRhIChvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucylcclxuXHJcbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5pdGVtLmVmZmVjdHMsIHsgc3RhdHVzOiBmYWxzZSB9KVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcclxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXHJcbiAgICovXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXHJcblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLmVmZmVjdC1jb250cm9sJylcclxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xyXG5cclxuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi9pdGVtLXNoZWV0VjIuanMnXHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0IGV4dGVuZHMgQ29DN0l0ZW1TaGVldFYyIHtcclxuICAvKipcclxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIHdpZHRoOiA1MjUsXHJcbiAgICAgIGhlaWdodDogNTA2XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgRHJhZ0Ryb3AsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXHJcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcclxuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcclxuXHJcbi8qKlxyXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvQzdPY2N1cGF0aW9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xyXG4gIC8qKlxyXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxyXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cclxuICAgKi9cclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcclxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cclxuXHJcbiAgICBodG1sXHJcbiAgICAgIC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JylcclxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcclxuICAgIGh0bWxcclxuICAgICAgLmZpbmQoJy5pdGVtLWRlbGV0ZScpXHJcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcclxuXHJcbiAgICBodG1sLmZpbmQoJy5ncm91cC1pdGVtLWRlbGV0ZScpLmNsaWNrKHRoaXMuX29uR3JvdXBJdGVtRGVsZXRlLmJpbmQodGhpcykpXHJcbiAgICBodG1sLmZpbmQoJy5ncm91cC1jb250cm9sJykuY2xpY2sodGhpcy5fb25Hcm91cENvbnRyb2wuYmluZCh0aGlzKSlcclxuXHJcbiAgICBjb25zdCBkcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XHJcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5kcm9wcGFibGUnLFxyXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxyXG4gICAgfSlcclxuICAgIGRyYWdEcm9wLmJpbmQoaHRtbFswXSlcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuXHJcbiAgICBjb25zdCBvcHRpb25hbFNraWxsID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsYXNzTGlzdD8uY29udGFpbnMoJ29wdGlvbmFsLXNraWxscycpXHJcbiAgICBjb25zdCBvbCA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5jbG9zZXN0KCdvbCcpXHJcbiAgICBjb25zdCBpbmRleCA9IG9sPy5kYXRhc2V0Py5ncm91cFxyXG5cclxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxyXG5cclxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxyXG4gICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpIDogW11cclxuXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcclxuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcclxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xyXG4gICAgICAgIGNvbnRpbnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvcHRpb25hbFNraWxsKSB7XHJcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcclxuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcclxuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZSAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIG1haW4gZG9uJ3QgYWRkIGl0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZ3JvdXBzW2luZGV4XS5za2lsbHMuZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gZ3JvdXAgZG9uJ3QgYWRkIGl0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBncm91cHNbaW5kZXhdLnNraWxscyA9IGdyb3Vwc1tpbmRleF0uc2tpbGxzLmNvbmNhdChbaXRlbV0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcclxuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcclxuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBzYW1lIHNraWxsIGlzIGluIG9uZSBvZiB0aGUgZ3JvdXAgcmVtb3ZlIGl0IGZyb20gdGhlIGdyb3Vwc1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGdyb3Vwc1tpXS5za2lsbHMuZmluZEluZGV4KFxyXG4gICAgICAgICAgICAgIGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICBncm91cHNbaV0uc2tpbGxzLnNwbGljZShpbmRleCwgMSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0pKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Hcm91cENvbnRyb2wgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG5cclxuICAgIC8vIEFkZCBuZXcgZGFtYWdlIGNvbXBvbmVudFxyXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtZ3JvdXAnKSkge1xyXG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcclxuICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNcclxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7XHJcbiAgICAgICAgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMuY29uY2F0KFt7IG9wdGlvbnM6IDAsIHNraWxsczogW10gfV0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZW1vdmUtZ3JvdXAnKSkge1xyXG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcclxuICAgICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxyXG4gICAgICBjb25zdCBvbCA9IGEuY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpXHJcbiAgICAgIGdyb3Vwcy5zcGxpY2UoTnVtYmVyKG9sLmRhdGFzZXQuZ3JvdXApLCAxKVxyXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXHJcbiAgICBjb25zdCBsaSA9IG9iai5wYXJlbnRzKCcuaXRlbScpXHJcbiAgICBjb25zdCBncm91cCA9IG9iai5jbG9zZXN0KCcuZ3JvdXAnKVxyXG4gICAgbGV0IGl0ZW1cclxuICAgIGlmIChncm91cC5sZW5ndGgpIHtcclxuICAgICAgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzW2dyb3VwLmRhdGEoJ2dyb3VwJyldW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xyXG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcclxuICAgICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvblxyXG5cclxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XHJcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcclxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXHJcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXHJcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cclxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcclxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXHJcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxyXG4gICAgfVxyXG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcclxuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKS5kYXRhKCdpdGVtLWlkJylcclxuICAgIGlmIChpdGVtSW5kZXgpIGF3YWl0IHRoaXMucmVtb3ZlSXRlbShpdGVtSW5kZXgsIGNvbGxlY3Rpb25OYW1lKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uR3JvdXBJdGVtRGVsZXRlIChldmVudCkge1xyXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCcuaXRlbScpXHJcbiAgICBjb25zdCBvbCA9IGxpLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxyXG4gICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxyXG4gICAgZ3JvdXBzW051bWJlcihvbC5kYXRhc2V0Lmdyb3VwKV0uc2tpbGxzLnNwbGljZShcclxuICAgICAgTnVtYmVyKGxpLmRhdGFzZXQuaXRlbUluZGV4KSxcclxuICAgICAgMVxyXG4gICAgKVxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyByZW1vdmVJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xyXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KHMgPT4ge1xyXG4gICAgICByZXR1cm4gcy5faWQgPT09IGl0ZW1JZFxyXG4gICAgfSlcclxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xyXG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cclxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxyXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL29jY3VwYXRpb24uaHRtbCcsXHJcbiAgICAgIHdpZHRoOiA1MjUsXHJcbiAgICAgIGhlaWdodDogNDgwLFxyXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxyXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcclxuICAgICAgdGFiczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxyXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldERhdGEgKCkge1xyXG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuXHJcbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLmxlbmd0aCA9PT0gMFxyXG5cclxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXHJcblxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW4gPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXggPCBsZW47IGluZGV4KyspIHtcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uaXNFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscy5sZW5ndGggPT09IDBcclxuXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcclxuICAgIH1cclxuXHJcbiAgICBzaGVldERhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9IENvQzdPY2N1cGF0aW9uU2hlZXQub2NjdXBhdGlvblBvaW50c1N0cmluZyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKVxyXG5cclxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXHJcblxyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLnR5cGUpKSB7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA/IENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA6IG51bGwpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgb2NjdXBhdGlvblBvaW50c1N0cmluZyAob2NjdXBhdGlvblNraWxsUG9pbnRzKSB7XHJcbiAgICBjb25zdCBvcHRpb25uYWwgPSBbXVxyXG4gICAgY29uc3QgbWFuZGF0b3J5ID0gW11cclxuICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcclxuICAgICAgaWYgKGNhcmFjLm11bHRpcGxpZXIpIHtcclxuICAgICAgICBjb25zdCBjYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXHJcbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmIGNhcmFjLm9wdGlvbmFsKSB7XHJcbiAgICAgICAgICBvcHRpb25uYWwucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgIWNhcmFjLm9wdGlvbmFsKSB7XHJcbiAgICAgICAgICBtYW5kYXRvcnkucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSAnJ1xyXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcclxuICAgIGlmIChtYW5kYXRvcnkubGVuZ3RoKSBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG1hbmRhdG9yeS5qb2luKCcgKyAnKVxyXG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgbWFuZGF0b3J5Lmxlbmd0aCkge1xyXG4gICAgICBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IGAgKyAoJHtvcHRpb25uYWwuam9pbihvclN0cmluZyl9KWBcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmICFtYW5kYXRvcnkubGVuZ3RoKSB7XHJcbiAgICAgIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gb3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1N0cmluZ1xyXG4gIH1cclxuXHJcbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XHJcbiAgICBjb25zdCBzeXN0ZW0gPSBleHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cclxuICAgIGlmIChzeXN0ZW0uZ3JvdXBzKSB7XHJcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBPYmplY3QudmFsdWVzKFxyXG4gICAgICAgIHN5c3RlbS5ncm91cHMgfHwgW11cclxuICAgICAgKVxyXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgZm9ybURhdGFbYHN5c3RlbS5ncm91cHMuJHtpbmRleH0uc2tpbGxzYF0gPSBkdXBsaWNhdGUoXHJcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xyXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXHJcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN1NldHVwU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xyXG4gIC8qKlxyXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxyXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cclxuICAgKi9cclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXHJcblxyXG4gICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ2l0ZW1zJykpXHJcbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ2l0ZW1zJykpXHJcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcclxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1zZWN0aW9uJykuY2xpY2sodGhpcy5fb25SZW1vdmVTZWN0aW9uLmJpbmQodGhpcykpXHJcbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxyXG5cclxuICAgIC8vIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGFzeW5jIGV2ID0+IHtcclxuICAgIC8vICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJyk7XHJcbiAgICAvLyAgIGNvbnN0IGl0ZW1EYXRhID0gdGhpcy5nZXRJdGVtKGxpLmRhdGEoJ2l0ZW1JZCcpLCAnc2tpbGxzJyk7XHJcbiAgICAvLyAgIGRlbGV0ZSBpdGVtRGF0YS5faWQ7XHJcbiAgICAvLyAgIGRlbGV0ZSBpdGVtRGF0YS5mb2xkZXI7XHJcbiAgICAvLyAgIGNvbnN0IGl0ZW0gPSBuZXcgQ29DN0l0ZW0oaXRlbURhdGEpO1xyXG4gICAgLy8gICBhd2FpdCBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKTsgLy9tYXJjaGUgcGFzICEhXHJcbiAgICAvLyB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eVxyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxyXG4gICAgICBwcm9wZXJ0eUlkLFxyXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25Ecm9wIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxyXG5cclxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XHJcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIGNvbnRpbnVlXHJcbiAgICAgIGlmICghWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xyXG4gICAgICAgIGNvbnRpbnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XHJcbiAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29sbGVjdGlvbi5wdXNoKGR1cGxpY2F0ZShpdGVtKSlcclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25SZW1vdmVTZWN0aW9uIChldmVudCkge1xyXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxyXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMpXHJcbiAgICBiaW8uc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcclxuICAgIGNvbnN0IGJpbyA9IHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucykgOiBbXVxyXG4gICAgYmlvLnB1c2gobnVsbClcclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmJpb1NlY3Rpb25zJzogYmlvIH0pXHJcbiAgfVxyXG5cclxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xyXG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxyXG4gICAgfSlcclxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25cclxuXHJcbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxyXG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XHJcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXHJcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxyXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxyXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XHJcbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXHJcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxyXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcclxuICAgIH1cclxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XHJcbiAgICBjb25zdCBpdGVtSW5kZXggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJykuZGF0YSgnaXRlbS1pZCcpXHJcbiAgICBpZiAoaXRlbUluZGV4KSBhd2FpdCB0aGlzLnJlbW92ZUl0ZW0oaXRlbUluZGV4LCBjb2xsZWN0aW9uTmFtZSlcclxuICB9XHJcblxyXG4gIGdldEl0ZW0gKGl0ZW1JZCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcclxuICAgICAgcmV0dXJuIHMuX2lkID09PSBpdGVtSWRcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyByZW1vdmVJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xyXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KHMgPT4ge1xyXG4gICAgICByZXR1cm4gcy5faWQgPT09IGl0ZW1JZFxyXG4gICAgfSlcclxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xyXG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV1cclxuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSlcclxuICAgICAgICA6IFtdXHJcbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcclxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzZXR1cCddLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc2V0dXAuaHRtbCcsXHJcbiAgICAgIHdpZHRoOiA1MjUsXHJcbiAgICAgIGhlaWdodDogNTMwLFxyXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxyXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcclxuICAgICAgdGFiczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxyXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldERhdGEgKCkge1xyXG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuXHJcbiAgICBzaGVldERhdGEuc2tpbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5pdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSA9PT0gJ3NraWxsJylcclxuICAgIHNoZWV0RGF0YS5vdGhlckl0ZW1zID0gdGhpcy5pdGVtLnN5c3RlbS5pdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcclxuXHJcbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxyXG4gICAgc2hlZXREYXRhLml0ZW1zTGlzdEVtcHR5ID0gc2hlZXREYXRhLm90aGVySXRlbXMubGVuZ3RoID09PSAwXHJcblxyXG4gICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcclxuXHJcbiAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xyXG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XHJcbiAgICAgICAgaWQ6IGtleSxcclxuICAgICAgICBuYW1lOiB2YWx1ZSxcclxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0uZXJhc1trZXldID09PSB0cnVlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hlZXREYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmFja3N0b3J5LFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIHJldHVybiBzaGVldERhdGFcclxuICB9XHJcblxyXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xyXG4gICAgY29uc3Qgc3lzdGVtID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXHJcbiAgICBpZiAoc3lzdGVtLmJpb1NlY3Rpb25zKSB7XHJcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uYmlvU2VjdGlvbnMnXSA9IE9iamVjdC52YWx1ZXMoXHJcbiAgICAgICAgc3lzdGVtLmJpb1NlY3Rpb25zIHx8IFtdXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldD8ubmFtZSA9PT0gJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnKSB7XHJcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldD8ubmFtZSA9PT0gJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCcpIHtcclxuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcclxuICAgIH1cclxuXHJcbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cclxuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcclxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcclxuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XHJcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcclxuICAgIHN1cGVyKC4uLmFyZ3MpXHJcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2l0ZW0nXSxcclxuICAgICAgd2lkdGg6IDUyMCxcclxuICAgICAgaGVpZ2h0OiA0ODAsXHJcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxyXG4gICAgICB0YWJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXHJcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXHJcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgLyoqIEBvdmVycmlkZSAqL1xyXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XHJcbiAgICByZXR1cm4gYHN5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvJHt0aGlzLml0ZW0udHlwZX0tc2hlZXQuaHRtbGBcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XHJcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcclxuICAgKi9cclxuICBnZXREYXRhICgpIHtcclxuICAgIC8vIHRoaXMuaXRlbS5jaGVja1NraWxsUHJvcGVydGllcygpO1xyXG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuXHJcbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMoXHJcbiAgICAgIHRoaXMuaXRlbS5lZmZlY3RzXHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzID0gW11cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xyXG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XHJcbiAgICAgICAgaWQ6IGtleSxcclxuICAgICAgICBuYW1lOiB2YWx1ZSxcclxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcclxuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xyXG4gICAgICAgIGlkOiBrZXksXHJcbiAgICAgICAgbmFtZTogdmFsdWUsXHJcbiAgICAgICAgaXNFbmFibGVkOiB0aGlzLml0ZW0uc3lzdGVtLmVyYXNba2V5XSA9PT0gdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc1NwZWNpYWxpemVkID0gdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWxcclxuICAgIHNoZWV0RGF0YS5jYW5Nb2RpZnlTcGVjID1cclxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtICYmXHJcbiAgICAgICF0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmdcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAvKipcclxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcclxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXHJcbiAgICovXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXHJcblxyXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0LnByb3BlcnR5XHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXHJcbiAgICAgIHByb3BlcnR5SWQsXHJcbiAgICAgIGlzQ3RybEtleShldmVudClcclxuICAgIClcclxuICB9XHJcblxyXG4gIC8vIGFzeW5jIF9vbkNsaWNrQXR0cmlidXRlQ29udHJvbChldmVudCkge1xyXG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAvLyAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gIC8vICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvbjtcclxuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XHJcbiAgLy8gICBjb25zdCBmb3JtID0gdGhpcy5mb3JtO1xyXG5cclxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXHJcbiAgLy8gICBpZiAoYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XHJcbiAgLy8gICAgIGNvbnN0IG5rID0gT2JqZWN0LmtleXMoYXR0cnMpLmxlbmd0aCArIDE7XHJcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIC8vICAgICBuZXdLZXkuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJkYXRhLmF0dHJpYnV0ZXMuYXR0ciR7bmt9LmtleVwiIHZhbHVlPVwiYXR0ciR7bmt9XCIvPmA7XHJcbiAgLy8gICAgIG5ld0tleSA9IG5ld0tleS5jaGlsZHJlblswXTtcclxuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xyXG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XHJcbiAgLy8gICB9XHJcblxyXG4gIC8vICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGF0dHJpYnV0ZVxyXG4gIC8vICAgZWxzZSBpZiAoYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XHJcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcclxuICAvLyAgICAgbGkucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsaSk7XHJcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXHJcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIC8vIF91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKSB7XHJcbiAgLy8gICAvLyBIYW5kbGUgdGhlIGZyZWUtZm9ybSBhdHRyaWJ1dGVzIGxpc3RcclxuICAvLyAgIGNvbnN0IGZvcmQgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpO1xyXG4gIC8vICAgY29uc3QgZm9ybUF0dHJzID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKS5kYXRhLmF0dHJpYnV0ZXMgfHwge307XHJcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XHJcbiAgLy8gICAgIGxldCBrID0gdltcImtleVwiXS50cmltKCk7XHJcbiAgLy8gICAgIGlmICgvW1xcc1xcLl0vLnRlc3QoaykpIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFwiQXR0cmlidXRlIGtleXMgbWF5IG5vdCBjb250YWluIHNwYWNlcyBvciBwZXJpb2RzXCIpO1xyXG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcclxuICAvLyAgICAgb2JqW2tdID0gdjtcclxuICAvLyAgICAgcmV0dXJuIG9iajtcclxuICAvLyAgIH0sIHt9KTtcclxuXHJcbiAgLy8gICAvLyBSZW1vdmUgYXR0cmlidXRlcyB3aGljaCBhcmUgbm8gbG9uZ2VyIHVzZWRcclxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XHJcbiAgLy8gICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgYXR0cmlidXRlc1tgLT0ke2t9YF0gPSBudWxsO1xyXG4gIC8vICAgfVxyXG5cclxuICAvLyAgIC8vIFJlLWNvbWJpbmUgZm9ybURhdGFcclxuICAvLyAgIGZvcm1EYXRhID0gT2JqZWN0LmVudHJpZXMoZm9ybURhdGEpLmZpbHRlcihlID0+ICFlWzBdLnN0YXJ0c1dpdGgoXCJkYXRhLmF0dHJpYnV0ZXNcIikpLnJlZHVjZSgob2JqLCBlKSA9PiB7XHJcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XHJcbiAgLy8gICAgIHJldHVybiBvYmo7XHJcbiAgLy8gICB9LCB7IF9pZDogdGhpcy5vYmplY3QuX2lkLCBcImRhdGEuYXR0cmlidXRlc1wiOiBhdHRyaWJ1dGVzIH0pO1xyXG5cclxuICAvLyAgIC8vIFVwZGF0ZSB0aGUgSXRlbVxyXG4gIC8vICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSk7XHJcbiAgLy8gfVxyXG5cclxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcclxuICAgIGNvbnN0IHNraWxsTmFtZSA9IGZvcm1EYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5za2lsbE5hbWVcclxuICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcclxuICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb24gPSBmb3JtRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxyXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc2tpbGxOYW1lXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL21haW4uaHRtbCcsXHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdpdGVtJywgJ3NwZWxsJ10sXHJcbiAgICAgIHdpZHRoOiA1MDAsXHJcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxyXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxyXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXHJcbiAgICAgIHRhYnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcclxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcclxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXHJcbiAgICBzaGVldERhdGEuaXNPd25lciA9IHRoaXMuaXRlbS5pc093bmVyXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xyXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcclxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXHJcbiAgICBodG1sLmZpbmQoJyNjYXN0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgIHRoaXMuaXRlbS5jYXN0KClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUb2dnbGUgdGhlIGNoZWNrYm94ZXMgZm9yIHR5cGUgd2hlbiB1c2VyIGNsaWNrcyBvbiB0aGUgY29ycmVzcG9uZGluZ1xyXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXHJcbiAgICogQHJldHVybnMge2pRdWVyeS5FdmVudH0gY2xpY2tcclxuICAgKi9cclxuICBtb2RpZnlUeXBlIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xyXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xyXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN1N0YXR1c1NoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcclxuICAvKipcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzdGF0dXMnXSxcclxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3N0YXR1cy5odG1sJyxcclxuICAgICAgd2lkdGg6IDUyNSxcclxuICAgICAgaGVpZ2h0OiA0ODAsXHJcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxyXG4gICAgICB0YWJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXHJcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXHJcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLmVmZmVjdC1jb250cm9sJylcclxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXHJcbiAgfVxyXG5cclxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxyXG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXHJcbiAgICovXHJcbiAgZ2V0RGF0YSAoKSB7XHJcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcclxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLml0ZW0uZWZmZWN0cywgeyBzdGF0dXM6IGZhbHNlIH0pXHJcblxyXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cclxuXHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uc3lzdGVtLnR5cGUpKSB7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxyXG4gICAgICAgICAgQ09DNy5zdGF0dXNUeXBlW2tleV0gPyBDT0M3LnN0YXR1c1R5cGVba2V5XSA6IG51bGxcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXMsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb0M3VGFsZW50U2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XHJcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcclxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3RhbGVudCddLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvdGFsZW50Lmh0bWwnLFxyXG4gICAgICB3aWR0aDogNTI1LFxyXG4gICAgICBoZWlnaHQ6IDQ4MCxcclxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXHJcbiAgICAgIHRhYnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcclxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcclxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxyXG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXHJcbiAgICovXHJcbiAgZ2V0RGF0YSAoKSB7XHJcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcclxuXHJcbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuaXRlbS5zeXN0ZW0udHlwZSkpIHtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXHJcbiAgICAgICAgICBDT0M3LnRhbGVudFR5cGVba2V5XSA/IENPQzcudGFsZW50VHlwZVtrZXldIDogbnVsbFxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cclxuICAgIHJldHVybiBzaGVldERhdGFcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xyXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDb0M3VmVoaWNsZVNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2FjdG9yJywgJ2l0ZW0nLCAndmVoaWNsZSddLFxyXG4gICAgICB3aWR0aDogNTU1LFxyXG4gICAgICBoZWlnaHQ6IDQyMCxcclxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3ZlaGljbGUuaHRtbCcsXHJcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuYWN0b3InLCBkcm9wU2VsZWN0b3I6ICcuZHJvcFpvbmUnIH1dLFxyXG4gICAgICB0YWJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcclxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcclxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXREYXRhICgpIHtcclxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMud2FybihcclxuICAgIC8vICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4cGVyaW1lbnRhbEZlYXR1cmVzV2FybmluZycpXHJcbiAgICAvLyApXHJcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcclxuXHJcbiAgICBzaGVldERhdGEucHJvcGVydGllcyA9IFtdXHJcbiAgICBpZiAodGhpcy5hY3Rvci5zeXN0ZW0ucHJvcGVydGllcy5hcm1lZCkge1xyXG4gICAgICBzaGVldERhdGEucHJvcGVydGllcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1lZFZlaGljbGUnKSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXHJcbiAgICBpZiAodHlwZW9mIGV4cGFuZGVkID09PSAndW5kZWZpbmVkJykgc2hlZXREYXRhLmV4cGFuZGVkID0gdHJ1ZVxyXG4gICAgZWxzZSBzaGVldERhdGEuZXhwYW5kZWQgPSBleHBhbmRlZFxyXG4gICAgaWYgKHNoZWV0RGF0YS5leHBhbmRlZCkge1xyXG4gICAgICBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSA0MjBcclxuICAgIH0gZWxzZSBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSAnYXV0bydcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxyXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXMsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICAvLyBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2hlZXREYXRhLmRhdGEudHlwZSkpIHtcclxuICAgIC8vICAgaWYoIHZhbHVlKSBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaCggQ09DNy5ib29rVHlwZVtrZXldP0NPQzcuYm9va1R5cGVba2V5XTpudWxsKTtcclxuICAgIC8vIH1cclxuICAgIHJldHVybiBzaGVldERhdGFcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XHJcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxyXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxyXG4gICAgaHRtbFxyXG4gICAgICAuZmluZCgnLnJlbW92ZS1hcm1vcicpXHJcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcclxuICAgIGh0bWwuZmluZCgnLmV4cGFuZC1idXR0b24nKS5jbGljayh0aGlzLl9vblRvZ2dsZUV4cGFuZC5iaW5kKHRoaXMpKVxyXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxyXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcclxuICAgIC8vIGh0bWwub24oJ2Ryb3AnLCAoZXZlbnQpID0+IHRoaXMuX29uRHJvcChldmVudCkpO1xyXG4gICAgLy8gaHRtbC5maW5kKCcuc3BlbGwgLnNwZWxsLW5hbWUgaDQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsU3VtbWFyeShldmVudCkpO1xyXG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcclxuICAgIGNvbnN0IGV4cGFuZGVkID0gdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJylcclxuICAgIGlmIChleHBhbmRlZCkge1xyXG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxyXG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9ICdhdXRvJyAvLyBSZXNldCB0aGUgc3RvcmVkIHBvc2l0aW9uIHRvIGZvcmNlIHRvIHJlY2FsY3VsYXRlIHdpbmRvdyBzaXplIFRPRE86IFN0b3JlIHByZXZpb3VzIHBvc2l0aW9uIHRvIHJlc3RvcmUgaXQgaW5zdGVhZCBvZiBhdXRvXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJywgIWV4cGFuZGVkKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uQWRkQXJtb3IgKCkge1xyXG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKFxyXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxyXG4gICAgKVxyXG4gICAgbG9jYXRpb25zLnB1c2goeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9KVxyXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBfb25SZW1vdmVBcm1vciAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcclxuICAgIGNvbnN0IGxvY2F0aW9uID0gYnV0dG9uLmNsb3Nlc3QoJy5hcm1vcicpXHJcbiAgICBjb25zdCBpbmRleCA9IGxvY2F0aW9uLmRhdGFzZXQuaW5kZXhcclxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZShcclxuICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgbnVsbFxyXG4gICAgKVxyXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxyXG4gICAgbG9jYXRpb25zLnNwbGljZShpbmRleCwgMSlcclxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxyXG4gIH1cclxuXHJcbiAgb25DbG9zZVNoZWV0ICgpIHtcclxuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXHJcbiAgICAvLyB0aGlzLmFjdG9yLmxvY2tlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcclxuICAgIGNvbnN0IHN5c3RlbSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxyXG4gICAgaWYgKHN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucykge1xyXG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJ10gPSBPYmplY3QudmFsdWVzKFxyXG4gICAgICAgIHN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXHJcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXHJcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29DN1dlYXBvblNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcclxuICAvKipcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXHJcbiAgICAgIHdpZHRoOiA1NDUsXHJcbiAgICAgIGhlaWdodDogNDgwLFxyXG4gICAgICB0YWJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtdGFicycsXHJcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXHJcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgZ2V0IHRlbXBsYXRlICgpIHtcclxuICAgIGNvbnN0IHBhdGggPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcydcclxuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XHJcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcclxuICAgKi9cclxuICBnZXREYXRhICgpIHtcclxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxyXG5cclxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbCA9IFtdXHJcblxyXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcclxuICAgIGlmIChzaGVldERhdGEuaGFzT3duZXIpIHtcclxuICAgICAgc2hlZXREYXRhLmZpcmVhcm1Ta2lsbHMgPSB0aGlzLmFjdG9yLmZpcmVhcm1Ta2lsbHNcclxuICAgICAgc2hlZXREYXRhLmZpZ2h0aW5nU2tpbGxzID0gdGhpcy5hY3Rvci5maWdodGluZ1NraWxsc1xyXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcclxuICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcclxuICAgIH1cclxuXHJcbiAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMgPSBbXVxyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xyXG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XHJcbiAgICAgICAgaWQ6IGtleSxcclxuICAgICAgICBuYW1lOiB2YWx1ZSxcclxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcclxuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xyXG4gICAgICAgIHByaWNlOiB0aGlzLml0ZW0uc3lzdGVtLnByaWNlW2tleV0gPz8gMCxcclxuICAgICAgICBpZDoga2V5LFxyXG4gICAgICAgIG5hbWU6IHZhbHVlLFxyXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5lcmFzW2tleV0gPT09IHRydWVcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzaGVldERhdGEudXNlc0FsdGVybmF0ZVNraWxsID1cclxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcclxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QgPT09IHRydWUgfHxcclxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnRocm93biA9PT0gdHJ1ZVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXHJcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uU3BlY2lhbCA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnNwZWNpYWwsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcclxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcclxuICAgICAge1xyXG4gICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXHJcbiAgICByZXR1cm4gc2hlZXREYXRhXHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAvKipcclxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcclxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXHJcbiAgICovXHJcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcclxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXHJcblxyXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxyXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxyXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcclxuICAgIGh0bWwuZmluZCgnLndlYXBvbi1wcm9wZXJ0eScpLmNsaWNrKHRoaXMuX29uUHJvcGVydHlDbGljay5iaW5kKHRoaXMpKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IGV2ZW50XHJcbiAgICovXHJcbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcclxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcclxuICAgICAgcHJvcGVydHlJZCxcclxuICAgICAgaXNDdHJsS2V5KGV2ZW50KVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgX29uUHJvcGVydHlDbGljayAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tcHJvcGVydHknKS5kYXRhc2V0LnByb3BlcnR5XHJcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkocHJvcGVydHlJZClcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIGdhbWUsIEhvb2tzICovXHJcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXHJcblxyXG5hc3luYyBmdW5jdGlvbiBwZXJmb3JtRmlsdGVyIChlKSB7XHJcbiAgY29uc3QgYXBwSWQgPSBlLmN1cnJlbnRUYXJnZXQubmFtZS5yZXBsYWNlKC9eY29jN1teMC05XSsoXFxkKykkLywgJyQxJylcclxuICBjb25zdCBhcHAgPSAkKCcjYXBwLScgKyBhcHBJZClcclxuICBjb25zdCB0eXBlID0gYXBwLmZpbmQoJ3NlbGVjdFtuYW1lPWNvYzd0eXBlJyArIGFwcElkICsgJ10nKS52YWwoKVxyXG4gIGNvbnN0IG5hbWUgPSBhcHAuZmluZCgnaW5wdXRbbmFtZT1zZWFyY2hdJykudmFsKClcclxuICBjb25zdCBlcmFFbGVtZW50ID0gYXBwLmZpbmQoJ3NlbGVjdFtuYW1lPWNvYzdlcmEnICsgYXBwSWQgKyAnXScpXHJcbiAgbGV0IGVyYSA9ICcnXHJcbiAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICBjYXNlICdzZXR1cCc6XHJcbiAgICBjYXNlICdza2lsbCc6XHJcbiAgICBjYXNlICd3ZWFwb24nOlxyXG4gICAgICBlcmFFbGVtZW50LmNsb3Nlc3QoJ2Rpdi5lcmFfc2VsZWN0Jykuc2hvdygpXHJcbiAgICAgIGVyYSA9IGVyYUVsZW1lbnQudmFsKClcclxuICAgICAgYnJlYWtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIGVyYUVsZW1lbnQuY2xvc2VzdCgnZGl2LmVyYV9zZWxlY3QnKS5oaWRlKClcclxuICB9XHJcbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnBhY2tzLmdldChhcHAuZGF0YSgncGFja0lkJykpPy5nZXREb2N1bWVudHMoKVxyXG4gIGlmICh0eXBlb2YgaXRlbXMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICByZXR1cm5cclxuICB9XHJcbiAgY29uc3Qgc2hvdyA9IFtdXHJcbiAgY29uc3QgbmFtZUZpbHRlciA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShuYW1lKSwgJ2knKVxyXG4gIGZvciAoY29uc3QgWywgaXRlbV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbXMpKSB7XHJcbiAgICBsZXQgZmlsdGVyID0gdHJ1ZVxyXG4gICAgaWYgKGZpbHRlciAmJiBuYW1lICE9PSAnJykge1xyXG4gICAgICBmaWx0ZXIgPSBpdGVtLm5hbWUubWF0Y2gobmFtZUZpbHRlcilcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXIgJiYgdHlwZSAhPT0gJycpIHtcclxuICAgICAgZmlsdGVyID0gaXRlbS50eXBlID09PSB0eXBlXHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVyICYmIGVyYSAhPT0gJycpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGl0ZW0uc3lzdGVtLmVyYXNbZXJhXSA9PT0gZmFsc2UgfHxcclxuICAgICAgICBpdGVtLnN5c3RlbS5lcmFzW2VyYV0gPT09IHRydWVcclxuICAgICAgKSB7XHJcbiAgICAgICAgZmlsdGVyID0gaXRlbS5zeXN0ZW0uZXJhc1tlcmFdXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlsdGVyID0gaXRlbS5zeXN0ZW0uZXJhc1tlcmFdPy5zZWxlY3RlZCA/PyBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVyKSB7XHJcbiAgICAgIHNob3cucHVzaChpdGVtLmlkKVxyXG4gICAgfVxyXG4gIH1cclxuICBhcHAuZmluZCgnb2wuZGlyZWN0b3J5LWxpc3QgbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IHNob3cuaW5jbHVkZXModGhpcy5kYXRhc2V0LmRvY3VtZW50SWQpXHJcbiAgICAgID8gJ2ZsZXgnXHJcbiAgICAgIDogJ25vbmUnXHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBlbmRpdW1GaWx0ZXIgKCkge1xyXG4gIEhvb2tzLm9uKCdyZW5kZXJDb21wZW5kaXVtJywgYXN5bmMgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xyXG4gICAgaWYgKGFwcC5jb2xsZWN0aW9uLmRvY3VtZW50TmFtZSA9PT0gJ0l0ZW0nKSB7XHJcbiAgICAgIGNvbnN0IHR5cGVzID0gWy4uLm5ldyBTZXQoZGF0YS5pbmRleC5maWx0ZXIoaSA9PiBpLm5hbWUgIT09ICcjW0NGX3RlbXBFbnRpdHldJykubWFwKGl0ZW0gPT4gaXRlbS50eXBlKSldXHJcbiAgICAgIGNvbnN0IHNlbGVjdCA9IFtdXHJcbiAgICAgIHNlbGVjdC5wdXNoKFxyXG4gICAgICAgICc8b3B0aW9uIHZhbHVlPVwiXCI+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbGwnKSArICc8L29wdGlvbj4nXHJcbiAgICAgIClcclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdhcmNoZXR5cGUnKSkge1xyXG4gICAgICAgIHNlbGVjdC5wdXNoKFxyXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJhcmNoZXR5cGVcIj4nICtcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkFyY2hldHlwZScpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdib29rJykpIHtcclxuICAgICAgICBzZWxlY3QucHVzaChcclxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiYm9va1wiPicgK1xyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQm9vaycpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdpdGVtJykpIHtcclxuICAgICAgICBzZWxlY3QucHVzaChcclxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiaXRlbVwiPicgK1xyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuSXRlbScpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdvY2N1cGF0aW9uJykpIHtcclxuICAgICAgICBzZWxlY3QucHVzaChcclxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwib2NjdXBhdGlvblwiPicgK1xyXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuT2NjdXBhdGlvbicpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzZXR1cCcpKSB7XHJcbiAgICAgICAgc2VsZWN0LnB1c2goXHJcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNldHVwXCI+JyArXHJcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5TZXR1cCcpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdza2lsbCcpKSB7XHJcbiAgICAgICAgc2VsZWN0LnB1c2goXHJcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNraWxsXCI+JyArXHJcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzcGVsbCcpKSB7XHJcbiAgICAgICAgc2VsZWN0LnB1c2goXHJcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNwZWxsXCI+JyArXHJcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5TcGVsbCcpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzdGF0dXMnKSkge1xyXG4gICAgICAgIHNlbGVjdC5wdXNoKFxyXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzdGF0dXNcIj4nICtcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlN0YXR1cycpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCd0YWxlbnQnKSkge1xyXG4gICAgICAgIHNlbGVjdC5wdXNoKFxyXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ0YWxlbnRcIj4nICtcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlRhbGVudCcpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCd3ZWFwb24nKSkge1xyXG4gICAgICAgIHNlbGVjdC5wdXNoKFxyXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ3ZWFwb25cIj4nICtcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLldlYXBvbicpICtcclxuICAgICAgICAgICAgJzwvb3B0aW9uPidcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgZXJhcyA9IFtdXHJcbiAgICAgIGVyYXMucHVzaChcclxuICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIlwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWxsJykgKyAnPC9vcHRpb24+J1xyXG4gICAgICApXHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcclxuICAgICAgICBlcmFzLnB1c2goXHJcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xyXG4gICAgICAgICAgICBrZXkgK1xyXG4gICAgICAgICAgICAnXCI+JyArXHJcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSkgK1xyXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBodG1sLmRhdGEoJ3BhY2tJZCcsIGFwcC5tZXRhZGF0YS5pZClcclxuICAgICAgaHRtbFxyXG4gICAgICAgIC5maW5kKCdoZWFkZXIuZGlyZWN0b3J5LWhlYWRlcicpXHJcbiAgICAgICAgLmFmdGVyKFxyXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb21wZW5kaXVtZmlsdGVyXCI+JyArXHJcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRlci1zZWFyY2ggZmxleHJvd1wiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzd0eXBlJyArIGFwcC5hcHBJZCArICdcIiBzdHlsZT1cIlwiPicgKyBzZWxlY3Quam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JyArXHJcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRlci1zZWFyY2ggZmxleHJvdyBlcmFfc2VsZWN0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3ZXJhJyArIGFwcC5hcHBJZCArICdcIiBzdHlsZT1cIlwiPicgKyBlcmFzLmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2PicgK1xyXG4gICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICApXHJcbiAgICAgIGh0bWwuZmluZCgnc2VsZWN0JykuY2hhbmdlKHBlcmZvcm1GaWx0ZXIuYmluZCh0aGlzKSlcclxuICAgICAgaHRtbC5maW5kKCdpbnB1dCcpLmtleXVwKHBlcmZvcm1GaWx0ZXIuYmluZCh0aGlzKSlcclxuICAgIH1cclxuICB9KVxyXG59XHJcbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xyXG5pbXBvcnQgeyBjb25maWd1cmVEb2N1bWVudHMgfSBmcm9tICcuLi9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMnXHJcbmltcG9ydCB7IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIH0gZnJvbSAnLi4vc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcydcclxuaW1wb3J0IHsgcmVnaXN0ZXJTZXR0aW5ncyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMnXHJcbmltcG9ydCB7IHJlZ2lzdGVyU2hlZXRzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMnXHJcbmltcG9ydCB7IGhhbmRsZWJhcnNIZWxwZXIgfSBmcm9tICcuLi9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzJ1xyXG5pbXBvcnQgeyBjb21wZW5kaXVtRmlsdGVyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xyXG4gIEhvb2tzLm9uY2UoJ2luaXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25maWd1cmVEb2N1bWVudHMoKVxyXG4gICAgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMoKVxyXG4gICAgcmVnaXN0ZXJTZXR0aW5ncygpXHJcbiAgICByZWdpc3RlclNoZWV0cygpXHJcbiAgICBoYW5kbGViYXJzSGVscGVyKClcclxuICAgIGNvbXBlbmRpdW1GaWx0ZXIoKVxyXG4gIH0pXHJcbn1cclxuIiwiLyogZ2xvYmFsIENPTkZJRyAqL1xyXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcclxuaW1wb3J0IHsgQ29DN0Jvb2sgfSBmcm9tICcuLi9pdGVtcy9ib29rL2RhdGEuanMnXHJcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcclxuaW1wb3J0IHsgQ29DN1NwZWxsIH0gZnJvbSAnLi4vaXRlbXMvc3BlbGwvZGF0YS5qcydcclxuaW1wb3J0IHsgQ29DN0NoYXNlIH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvZGF0YS5qcydcclxuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vYWN0aXZlLWVmZmVjdC5qcydcclxuaW1wb3J0IHsgQ29DN1NraWxsIH0gZnJvbSAnLi4vaXRlbXMvc2tpbGwvZGF0YS5qcydcclxuaW1wb3J0IHsgQ29DN1ZlaGljbGUgfSBmcm9tICcuLi9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZURvY3VtZW50cyAoKSB7XHJcbiAgQ09ORklHLkFjdGl2ZUVmZmVjdC5kb2N1bWVudENsYXNzID0gQ29DN0FjdGl2ZUVmZmVjdFxyXG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzID0gQ29DQWN0b3JcclxuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzID0ge1xyXG4gICAgdmVoaWNsZTogQ29DN1ZlaGljbGVcclxuICB9XHJcbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA9IENvQzdJdGVtXHJcbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzID0ge1xyXG4gICAgYm9vazogQ29DN0Jvb2ssXHJcbiAgICBzcGVsbDogQ29DN1NwZWxsLFxyXG4gICAgY2hhc2U6IENvQzdDaGFzZSxcclxuICAgIHNraWxsOiBDb0M3U2tpbGxcclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cclxuXHJcbi8qKlxyXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcclxuICogUHJlLWxvYWRlZCB0ZW1wbGF0ZXMgYXJlIGNvbXBpbGVkIGFuZCBjYWNoZWQgZm9yIGZhc3QgYWNjZXNzIHdoZW4gcmVuZGVyaW5nXHJcbiAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgLyoqIERlZmluZSB0ZW1wbGF0ZSBwYXRocyB0byBsb2FkICovXHJcbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcclxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtc2tpbGxzLmh0bWwnLFxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1jb21iYXQuaHRtbCcsXHJcblxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWludmVudG9yeS5odG1sJyxcclxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnktaXRlbXMuaHRtbCcsXHJcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYmFja2dyb3VuZC5odG1sJyxcclxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NvbW1vbi9hY3RpdmUtZWZmZWN0cy5oYnMnLFxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcclxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1rZWVwZXItbXl0aG9zLWVub3VudGVycy5oYnMnLFxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXNraWxscy12Mi5odG1sJyxcclxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jaGFyYWN0ZXItZGV2ZWxvcG1lbnQtdjIuaHRtbCcsXHJcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvZGV2ZWxvcG1lbnQtY29udHJvbHMuaHRtbCcsXHJcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvdml0YWxzLmh0bWwnLFxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NvbWJhdC5odG1sJyxcclxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXItc2hlZXQtdjIuaHRtbCcsXHJcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL3N1bW1hcnkuaHRtbCcsXHJcblxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXRhaWxzLmh0bWwnLFxyXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvZGV0YWlscy5odG1sJ1xyXG4gIF1cclxuXHJcbiAgLyoqIExvYWQgdGhlIHRlbXBsYXRlIHBhcnRzICovXHJcbiAgcmV0dXJuIGxvYWRUZW1wbGF0ZXModGVtcGxhdGVQYXRocylcclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBnYW1lLCB1aSAqL1xyXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUuanMnXHJcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllT3RoZXIgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyB9IGZyb20gJy4vZ2FtZS1ydWxlcy5qcydcclxuaW1wb3J0IHsgQ29DN0RpcmVjdG9yeVBpY2tlciB9IGZyb20gJy4vY29jNy1kaXJlY3RvcnktcGlja2VyLmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2V0dGluZ3MgKCkge1xyXG4gIC8qKlxyXG4gICAqIFJ1bGVzXHJcbiAgICovXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3Rlck1lbnUoJ0NvQzcnLCAnZ2FtZVJ1bGVzJywge1xyXG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTmFtZScsXHJcbiAgICBsYWJlbDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTGFiZWwnLFxyXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuSGludCcsXHJcbiAgICBpY29uOiAnZmFzIGZhLWJvb2snLFxyXG4gICAgdHlwZTogQ29DN0dhbWVSdWxlU2V0dGluZ3MsXHJcbiAgICByZXN0cmljdGVkOiB0cnVlXHJcbiAgfSlcclxuICBDb0M3R2FtZVJ1bGVTZXR0aW5ncy5yZWdpc3RlclNldHRpbmdzKClcclxuXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd1c2VDb250ZXh0TWVudXMnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuVXNlQ29udGV4dE1lbnVzJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Vc2VDb250ZXh0TWVudXNIaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhbixcclxuICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgfSlcclxuXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScsIHtcclxuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRob2xlVXBsb2FkLkRpcmVjdG9yeS5OYW1lJyxcclxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLkRob2xlVXBsb2FkLkRpcmVjdG9yeS5IaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgdHlwZTogQ29DN0RpcmVjdG9yeVBpY2tlci5EZWZhdWx0RGlyZWN0b3J5LFxyXG4gICAgZGVmYXVsdDogJ1tkYXRhXSB3b3JsZHMvJyArIGdhbWUud29ybGQuaWQgKyAnL2Rob2xlLWltYWdlcydcclxuICB9KVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWF0aXZlXHJcbiAgICovXHJcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0RGljZXMnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlcycsXHJcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlc0hpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0Jywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlJbml0QXNUZXh0JyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dEhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcblxyXG4gIC8qKlxyXG4gICAqIFJvbGwgY3VzdG9taXNhaW9uc1xyXG4gICAqL1xyXG4gIC8qKiBTdGFuZGJ5IHJvbGxzIG1hZGUgYnkgR00gZnJvbSBwbGF5ZXIgc2hlZXQgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xscycsXHJcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xsc0hpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCBkaWNlIG1vZGlmaWVyICovXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXREaWNlTW9kaWZpZXInLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVyJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXJIaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSlcclxuICAvKiogQWxsb3cgdXNhZ2Ugb2YgYSBmbGF0IHRocmVzaG9sZCBtb2RpZmllciAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLkFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVySGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5Jywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlZmF1bHREaWZmaWN1bHR5JyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eUhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiAncmVndWxhcicsXHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBjaG9pY2VzOiB7XHJcbiAgICAgIHJlZ3VsYXI6ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlSZWd1bGFyJyxcclxuICAgICAgdW5rbm93bjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVVua25vd24nXHJcbiAgICB9XHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5TZWxmUm9sbFdoaXNwZXJUYXJnZXQnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldEhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiAnZXZlcnlvbmUnLFxyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgY2hvaWNlczoge1xyXG4gICAgICBub2JvZHk6ICdTRVRUSU5HUy5Eb05vdEFkdmlzZScsXHJcbiAgICAgIG93bmVyczogJ1NFVFRJTkdTLkFkdmlzZU93bmVyc09ubHknLFxyXG4gICAgICBldmVyeW9uZTogJ1NFVFRJTkdTLkFkdmlzZUFsbFBsYXllcidcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvKipcclxuICAgKiBDaGF0IENhcmRzXHJcbiAgICovXHJcbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gbW9kaWZ5IGNoYXQgY2FyZHMgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLlRydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZEhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9KVxyXG4gIC8qKiBUcnVzdGVkIHBsYXllcnMgd2lsbCBiZSBhbGxvd2VkIHRvIHNlZSBjaGF0IGNhcmRzIHByaXZhdGUgc2VjdGlvbnMgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuU2VlQ2hhdENhcmQnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZEhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9KVxyXG4gIC8qKiBTZXQgdGhlIG5lZWQgdG8gZGlzcGxheSBhY3RvciBpbWFnZSBvbiBjaGF0IGNhcmRzICovXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUFjdG9yT25DYXJkJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmRIaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnLFxyXG4gICAgc2NvcGU6ICdjbGllbnQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9KVxyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheVJlc3VsdFR5cGUnLFxyXG4gICAgc2NvcGU6ICdjbGllbnQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSlcclxuICAvKiogU2V0IHRoZSB1c2Ugb2YgdG9rZW4gaW5zdGVhZCBvZiBwb3J0cmFpdHMgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZVRva2VuJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZVRva2VuJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Vc2VUb2tlbkhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9KVxyXG5cclxuICAvKipcclxuICAgKiBTY2VuZSBTZXR0aW5nc1xyXG4gICAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnMnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICBkZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2dyaWRTcGFjZXMnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXNIaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLkNoZWNrRWxldmF0aW9uJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbkhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcblxyXG4gIC8qKlxyXG4gICAqIEdhbWUgQXJ0d29yayBTZXR0aW5nc1xyXG4gICAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrJyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZUltYWdlJywge1xyXG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZScsXHJcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlSGludCcsXHJcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RpbWUtdHJhcC5zdmcnLFxyXG4gICAgICB0eXBlOiBTdHJpbmdcclxuICAgIH0pXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlVGV4dCcsIHtcclxuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dCcsXHJcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHRIaW50JyxcclxuICAgICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgZGVmYXVsdDogJ1RoZSBCbGluZCBJZGlvdCBHb2QgaXMgZHJlYW1pbmcuLi4nLFxyXG4gICAgICB0eXBlOiBTdHJpbmdcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaGVldCBzZXR0aW5nc1xyXG4gICAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0Jywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0b29sVGlwRGVsYXknLCB7XHJcbiAgICBuYW1lOiAnQ29DNy50b29sVGlwRGVsYXknLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiAyMDAwLFxyXG4gICAgdHlwZTogTnVtYmVyXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJY29uc09ubHknLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1Muc2hvd0ljb25zT25seScsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgLyoqIEFsbG93IHBsYXllciB0byB1bmxvY2sgdGhlIHNoZWV0IG91dHNpZGUgb2YgY3JlYXRpb24gbW9kZSAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLlBsYXllclVubG9ja1NoZWV0TW9kZScsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6ICdhbHdheXMnLFxyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgY2hvaWNlczoge1xyXG4gICAgICBhbHdheXM6ICdTRVRUSU5HUy5BbHdheXNFZGl0YWJsZScsXHJcbiAgICAgIGNyZWF0aW9uOiAnU0VUVElOR1MuQ3JlYXRpb25Nb2RlT25seScsXHJcbiAgICAgIG5ldmVyOiAnU0VUVElOR1MuTmV2ZXJFZGl0YWJsZSdcclxuICAgIH1cclxuICB9KVxyXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gbW9kaWZ5IHN0YXR1cyAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGUnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5Jywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5JyxcclxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeUhpbnQnLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IHRydWUsXHJcbiAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW5cclxuICB9KVxyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmsnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcclxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsIHtcclxuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmQnLFxyXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZEhpbnQnLFxyXG4gICAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpIDQgcmVwZWF0XCIsXHJcbiAgICAgIHR5cGU6IFN0cmluZ1xyXG4gICAgfSlcclxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLCB7XHJcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScsXHJcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6ICdzbGljZScsXHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgY2hvaWNlczoge1xyXG4gICAgICAgIHNsaWNlOiAnU0VUVElOR1MuQmFja2dyb3VuZFNsaWNlJyxcclxuICAgICAgICBhdXRvOiAnU0VUVElOR1MuQmFja2dyb3VuZEF1dG8nLFxyXG4gICAgICAgIGNvbnRhaW46ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ29udGFpbicsXHJcbiAgICAgICAgY292ZXI6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ292ZXInXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsIHtcclxuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsXHJcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmRIaW50JyxcclxuICAgICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgZGVmYXVsdDogXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJylcIixcclxuICAgICAgdHlwZTogU3RyaW5nXHJcbiAgICB9KVxyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScsIHtcclxuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlJyxcclxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlSGludCcsXHJcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvdGVudGFjbGVzLndlYnAnKVwiLFxyXG4gICAgICB0eXBlOiBTdHJpbmdcclxuICAgIH0pXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJywge1xyXG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3InLFxyXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3JIaW50JyxcclxuICAgICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgZGVmYXVsdDogJ3JnYmEoNDMsNTUsODMsMSknLFxyXG4gICAgICB0eXBlOiBTdHJpbmdcclxuICAgIH0pXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InLCB7XHJcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9yJyxcclxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3JIaW50JyxcclxuICAgICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcclxuICAgICAgdHlwZTogU3RyaW5nXHJcbiAgICB9KVxyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsIHtcclxuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJyxcclxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9ySGludCcsXHJcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXHJcbiAgICAgIHR5cGU6IFN0cmluZ1xyXG4gICAgfSlcclxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLCB7XHJcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsXHJcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aEhpbnQnLFxyXG4gICAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICB0eXBlOiBCb29sZWFuXHJcbiAgICB9KVxyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnLCB7XHJcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnQnLFxyXG4gICAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICBkZWZhdWx0OiAnJyxcclxuICAgICAgdHlwZTogU3RyaW5nXHJcbiAgICB9KVxyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJywge1xyXG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250Qm9sZCcsXHJcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6ICcnLFxyXG4gICAgICB0eXBlOiBTdHJpbmdcclxuICAgIH0pXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnLCB7XHJcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnRTaXplJyxcclxuICAgICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgZGVmYXVsdDogMTYsXHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgb25DaGFuZ2U6IHNpemUgPT4gX3NldFJvb3RGb250U2l6ZShzaXplKVxyXG4gICAgfSlcclxuXHJcbiAgICBmdW5jdGlvbiBfc2V0Um9vdEZvbnRTaXplIChzaXplKSB7XHJcbiAgICAgICQoJzpyb290JykuY3NzKCdmb250LXNpemUnLCBzaXplKVxyXG4gICAgICB1aS5zaWRlYmFyLnJlbmRlcih0cnVlKVxyXG4gICAgICBmb3IgKGNvbnN0IFssIHddIG9mIE9iamVjdC5lbnRyaWVzKHVpLndpbmRvd3MpKSB7XHJcbiAgICAgICAgdy5yZW5kZXIodHJ1ZSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2VhcG9uc1xyXG4gICAqL1xyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnLCB7XHJcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmQnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRBbW1vJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW8nLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW9IaW50JyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuXHJcbiAgfSlcclxuXHJcbiAgLyoqXHJcbiAgICogQ2hhc2VzXHJcbiAgICovXHJcbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xyXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsIHtcclxuICAvLyAgIG5hbWU6ICdTRVRUSU5HUy5DaGFzZVNob3dUb2tlbk1vdmVtZW50JyxcclxuICAvLyAgIGhpbnQ6ICdTRVRUSU5HUy5DaGFzZVNob3dUb2tlbk1vdmVtZW50SGludCcsXHJcbiAgLy8gICBzY29wZTogJ3dvcmxkJyxcclxuICAvLyAgIGNvbmZpZzogdHJ1ZSxcclxuICAvLyAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgLy8gICB0eXBlOiBCb29sZWFuXHJcbiAgLy8gfSlcclxuXHJcbiAgLyoqXHJcbiAgICogRGljZSBTbyBOaWNlXHJcbiAgICovXHJcbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcclxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3luY0RpY2UzZCcsIHtcclxuICAgICAgbmFtZTogJ1NFVFRJTkdTLlN5bmNEaWNlM0QnLFxyXG4gICAgICBoaW50OiAnU0VUVElOR1MuU3luY0RpY2UzREhpbnQnLFxyXG4gICAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICB0eXBlOiBCb29sZWFuXHJcbiAgICB9KVxyXG4gICAgY29uc3QgW3ZlcnNpb25dID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LnZlcnNpb24uc3BsaXQoJy4nKVxyXG4gICAgaWYgKCFpc05hTihOdW1iZXIodmVyc2lvbikpICYmIE51bWJlcih2ZXJzaW9uKSA+PSAzKSB7XHJcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllQm9udXMnLCB7XHJcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzJyxcclxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllQm9udXNIaW50JyxcclxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXHJcbiAgICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICAgIGRlZmF1bHQ6ICdicm9uemUnLFxyXG4gICAgICAgIHR5cGU6IFN0cmluZ1xyXG4gICAgICB9KVxyXG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknLCB7XHJcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHknLFxyXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5SGludCcsXHJcbiAgICAgICAgc2NvcGU6ICdjbGllbnQnLFxyXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgICBkZWZhdWx0OiAnYmxvb2Rtb29uJyxcclxuICAgICAgICB0eXBlOiBTdHJpbmdcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldmVsb3BlciBhbmQgZGVidWcgc2V0dGluZ3NcclxuICAgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlYnVnbW9kZScsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5EZWJ1Z01vZGUnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLkRlYnVnTW9kZUhpbnQnLFxyXG4gICAgc2NvcGU6ICdjbGllbnQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhbixcclxuICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlcycsXHJcbiAgICBoaW50OiAnU0VUVElOR1MuU2hvd0V4cGVyaW1lbnRhbEZlYXR1cmVzSGludCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICBkZWZhdWx0OiBmYWxzZVxyXG4gIH0pXHJcbiAgLyoqXHJcbiAgICogT3RoZXIgc2V0dGluZ3NcclxuICAgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnLCB7XHJcbiAgICBuYW1lOiAnSGlkZGVuIGRldiBtZW51JyxcclxuICAgIGhpbnQ6ICdVc2UgYXQgeW91ciBvd24gcmlzaycsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgZGVmYXVsdDogZmFsc2VcclxuICB9KVxyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywge1xyXG4gICAgbmFtZTogJ0RldiBwaGFzZWQgYWxsb3dlZCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgZGVmYXVsdDogZmFsc2VcclxuICB9KVxyXG4gIC8qKiBGZWF0OiB3ZWxjb21lIG1lc3NhZ2UgKi9cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxyXG4gICAgaGludDogJ1NFVFRJTkdTLnNob3dXZWxjb21lTWVzc2FnZScsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgdHlwZTogQm9vbGVhblxyXG4gIH0pXHJcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywge1xyXG4gICAgbmFtZTogJ0NoYXIgY3JlYXRpb24gYWxsb3dlZCcsXHJcbiAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgZGVmYXVsdDogZmFsc2VcclxuICB9KVxyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHtcclxuICAgIG5hbWU6ICdTeXN0ZW0gdXBkYXRlIHZlcnNpb24nLFxyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IGZhbHNlLFxyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZGVmYXVsdDogJzAnXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywge1xyXG4gICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICBjb25maWc6IGZhbHNlLFxyXG4gICAgZGVmYXVsdDoge31cclxuICB9KVxyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAneHBFbmFibGVkJywge1xyXG4gICAgbmFtZTogJ0VuYWJsZSBYUCBnYWluJyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiBmYWxzZSxcclxuICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICBkZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCB7XHJcbiAgICBuYW1lOiAnU2hvdyBjaGFuZ2Vsb2cvaW5zdHJ1Y3Rpb25zJyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiBmYWxzZSxcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGRlZmF1bHQ6ICcwJ1xyXG4gIH0pXHJcbiAgLyoqIFNldCBhbiBpbml0aWF0aXZlIGZvcm11bGEgZm9yIHRoZSBzeXN0ZW0gKi9cclxuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XHJcbiAgICBmb3JtdWxhOiAnQGNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxyXG4gICAgZGVjaW1hbHM6IDRcclxuICB9XHJcbiAgQ09ORklHLmRlYnVnLmhvb2tzID0gISFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWJ1Z21vZGUnKVxyXG4gIENPTkZJRy5EaWNlLnRlcm1zLnQgPSBDb0M3RGVjYWRlckRpZVxyXG4gIENPTkZJRy5EaWNlLnRlcm1zLm8gPSBDb0M3RGVjYWRlckRpZU90aGVyXHJcbn1cclxuIiwiLyogZ2xvYmFsIEFjdG9ycywgQWN0b3JTaGVldCwgSXRlbXMsIEl0ZW1TaGVldCAqL1xyXG5pbXBvcnQgeyBDb0M3QXJjaGV0eXBlU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvYXJjaGV0eXBlLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Qm9va1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvYm9vay9zaGVldC5qcydcclxuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXHJcbmltcG9ydCB7IENvQzdDb250YWluZXJTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hhc2VTaGVldCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXHJcbmltcG9ydCB7IENvQzdJdGVtU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvaXRlbS1zaGVldC5qcydcclxuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcydcclxuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXHJcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcclxuaW1wb3J0IHsgQ29DN1NldHVwU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2V0dXAuanMnXHJcbmltcG9ydCB7IENvQzdTa2lsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NraWxsLmpzJ1xyXG5pbXBvcnQgeyBDb0M3U3BlbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL3NoZWV0LmpzJ1xyXG5pbXBvcnQgeyBDb0M3U3RhdHVzU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc3RhdHVzLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VGFsZW50U2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvdGFsZW50LmpzJ1xyXG5pbXBvcnQgeyBDb0M3VmVoaWNsZVNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzJ1xyXG5pbXBvcnQgeyBDb0M3V2VhcG9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvd2VhcG9uLXNoZWV0LmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2hlZXRzICgpIHtcclxuICBBY3RvcnMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgQWN0b3JTaGVldClcclxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdOUENTaGVldCwge1xyXG4gICAgdHlwZXM6IFsnbnBjJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3VmVoaWNsZVNoZWV0LCB7XHJcbiAgICB0eXBlczogWyd2ZWhpY2xlJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q3JlYXR1cmVTaGVldCwge1xyXG4gICAgdHlwZXM6IFsnY3JlYXR1cmUnXSxcclxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDb250YWluZXJTaGVldCwge1xyXG4gICAgdHlwZXM6IFsnY29udGFpbmVyJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhcmFjdGVyU2hlZXQsIHtcclxuICAgIHR5cGVzOiBbJ2NoYXJhY3RlciddLFxyXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcclxuICB9KVxyXG4gIEl0ZW1zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEl0ZW1TaGVldClcclxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NraWxsU2hlZXQsIHtcclxuICAgIHR5cGVzOiBbJ3NraWxsJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdXZWFwb25TaGVldCwge1xyXG4gICAgdHlwZXM6IFsnd2VhcG9uJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdCb29rU2hlZXQsIHtcclxuICAgIHR5cGVzOiBbJ2Jvb2snXSxcclxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NwZWxsU2hlZXQsIHtcclxuICAgIHR5cGVzOiBbJ3NwZWxsJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdUYWxlbnRTaGVldCwge1xyXG4gICAgdHlwZXM6IFsndGFsZW50J10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTdGF0dXNTaGVldCwge1xyXG4gICAgdHlwZXM6IFsnc3RhdHVzJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdPY2N1cGF0aW9uU2hlZXQsIHtcclxuICAgIHR5cGVzOiBbJ29jY3VwYXRpb24nXSxcclxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0FyY2hldHlwZVNoZWV0LCB7XHJcbiAgICB0eXBlczogWydhcmNoZXR5cGUnXSxcclxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NldHVwU2hlZXQsIHtcclxuICAgIHR5cGVzOiBbJ3NldHVwJ10sXHJcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gIH0pXHJcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDaGFzZVNoZWV0LCB7XHJcbiAgICB0eXBlczogWydjaGFzZSddLFxyXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcclxuICB9KVxyXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0LCB7IHR5cGVzOiBbJ2l0ZW0nXSB9KVxyXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0VjIsIHtcclxuICAgIHR5cGVzOiBbJ2l0ZW0nXSxcclxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXHJcbiAgfSlcclxufVxyXG4iLCIvKiBnbG9iYWwgSGFuZGxlYmFycyAqL1xyXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXHJcblxyXG5leHBvcnQgY29uc3QgaGFuZGxlYmFyc0hlbHBlciA9IGZ1bmN0aW9uICgpIHtcclxuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdyb2xsQWN0b3JJbWcnLCBmdW5jdGlvbiAoYWN0b3JLZXkpIHtcclxuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KGFjdG9yS2V5KVxyXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xyXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xyXG4gIH0pXHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cclxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRFNORmFjZXMge1xyXG4gIGNvbnN0cnV0b3IgKCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9ICcnXHJcbiAgfVxyXG5cclxuICBzZXRGYWNlcyAoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWQgPSBnYW1lLnVzZXIuZ2V0RmxhZygnZGljZS1zby1uaWNlJywgJ2FwcGVhcmFuY2UnKT8uZ2xvYmFsXHJcbiAgICAgIC5zeXN0ZW1cclxuICAgIGlmIChzZWxlY3RlZCAhPT0gdGhpcy5zZWxlY3RlZCkge1xyXG4gICAgICBsZXQgZGF0YVxyXG4gICAgICBsZXQgZGVzdGluYXRpb25cclxuICAgICAgbGV0IHNvdXJjZURpZSA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc2VsZWN0ZWRdPy5kaWNlLmZpbmQoXHJcbiAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkMTAwJ1xyXG4gICAgICApXHJcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlRGllID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHNvdXJjZURpZSA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZS5maW5kKFxyXG4gICAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkMTAwJ1xyXG4gICAgICAgIClcclxuICAgICAgICBzZWxlY3RlZCA9ICdzdGFuZGFyZCdcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHNvdXJjZURpZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBkZXN0aW5hdGlvbiA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZS5maW5kSW5kZXgoXHJcbiAgICAgICAgICBkID0+IGQudHlwZSA9PT0gJ2R0J1xyXG4gICAgICAgIClcclxuICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgc291cmNlRGllKVxyXG4gICAgICAgIGRhdGEudHlwZSA9ICdkdCdcclxuICAgICAgICBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2VbZGVzdGluYXRpb25dID1cclxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oc291cmNlRGllLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZGF0YSlcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWRcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cclxuZXhwb3J0IGNsYXNzIENvQzdUb29sdGlwcyB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5Ub29sVGlwSG92ZXIgPSBudWxsXHJcbiAgICB0aGlzLnRvb2xUaXBUaW1lciA9IG51bGxcclxuICB9XHJcblxyXG4gIGRpc3BsYXlUb29sVGlwICh0b29sVGlwKSB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLlRvb2xUaXBIb3Zlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG4gICAgICBpZiAoIWlzTmFOKGJvdW5kcy5sZWZ0IHx8ICcnKSAmJiAhaXNOYU4oYm91bmRzLnRvcCB8fCAnJykpIHtcclxuICAgICAgICBsZXQgbGVmdCA9IGJvdW5kcy5sZWZ0XHJcbiAgICAgICAgbGV0IHRvcCA9IGJvdW5kcy50b3BcclxuICAgICAgICBjb25zdCBoZWlnaHRUZXh0ID0gJCh0aGlzLlRvb2xUaXBIb3Zlcikub3V0ZXJIZWlnaHQoKVxyXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJoZWxwLXRvb2x0aXBcIj4nICsgdG9vbFRpcCArICc8L2Rpdj4nKVxyXG4gICAgICAgIGNvbnN0IHRpcCA9ICQoJyNoZWxwLXRvb2x0aXAnKVxyXG4gICAgICAgIGNvbnN0IGhlaWdodFRpcCA9IHRpcC5vdXRlckhlaWdodCgpXHJcbiAgICAgICAgY29uc3Qgd2lkdGhUaXAgPSB0aXAub3V0ZXJXaWR0aCgpXHJcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IGhlaWdodFRleHQgKiAxLjUgKyBoZWlnaHRUaXAgKyB0b3ApIHtcclxuICAgICAgICAgIHRvcCA9IHRvcCAtIGhlaWdodFRpcFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0b3AgPSB0b3AgKyBoZWlnaHRUZXh0ICogMS41XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpZHRoVGlwICsgbGVmdCkge1xyXG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gd2lkdGhUaXBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGlwLmNzcyh7XHJcbiAgICAgICAgICBsZWZ0OiBsZWZ0ICsgJ3B4JyxcclxuICAgICAgICAgIHRvcDogdG9wICsgJ3B4J1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvb2xUaXBMZWF2ZSAoZXZlbnQpIHtcclxuICAgIGlmIChnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lcilcclxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gbnVsbFxyXG4gICAgICAkKCcjaGVscC10b29sdGlwJykucmVtb3ZlKClcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIE11dGF0aW9uT2JzZXJ2ZXIsIFRvdXIsIHVpICovXHJcbmxldCBDb0M3VG91ciA9IGNsYXNzIGludGVybmFsQ29DN1RvdXIge31cclxuaWYgKHR5cGVvZiBUb3VyICE9PSAndW5kZWZpbmVkJykge1xyXG4gIENvQzdUb3VyID0gY2xhc3MgaW50ZXJuYWxDb0M3VG91ciBleHRlbmRzIFRvdXIge1xyXG4gICAgYXN5bmMgd2FpdEZvckVsZW1lbnQgKHNlbGVjdG9yKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXHJcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xyXG4gICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX3ByZVN0ZXAgKCkge1xyXG4gICAgICBhd2FpdCBzdXBlci5fcHJlU3RlcCgpXHJcblxyXG4gICAgICAvLyBDbG9zZSBjdXJyZW50bHkgb3BlbiBhcHBsaWNhdGlvbnNcclxuICAgICAgaWYgKHRoaXMuc3RlcEluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBhcHAgb2YgT2JqZWN0LnZhbHVlcyh1aS53aW5kb3dzKSkge1xyXG4gICAgICAgICAgYXBwLmNsb3NlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcilcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfcG9zdFN0ZXAgKCkge1xyXG4gICAgICBhd2FpdCBzdXBlci5fcG9zdFN0ZXAoKVxyXG4gICAgICBpZiAodGhpcy5zdGVwSW5kZXggPCAwIHx8ICF0aGlzLmhhc05leHQpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTdGVwLmFjdGlvbikge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5pc1Jlc2V0dGluZykge1xyXG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSBmYWxzZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcblxyXG4gICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFN0ZXAuYWN0aW9uKSB7XHJcbiAgICAgICAgY2FzZSAnY2xpY2snOlxyXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKS5jbGljaygpXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVzZXQgKCkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XHJcbiAgICAgICAgdGhpcy5pc1Jlc2V0dGluZyA9IHRydWVcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBzdXBlci5yZXNldCgpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBDb0M3VG91ciB9XHJcbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xyXG5pbXBvcnQgeyBDb0M3VG91ciB9IGZyb20gJy4uL2FwcHMvY29jNy10b3VyLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIGV4dGVuZHMgQ29DN1RvdXIge1xyXG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcclxuICAgIHN1cGVyKG1lcmdlT2JqZWN0KHtcclxuICAgICAgdGl0bGU6ICdFbmFibGUgb3B0aW9uYWwvdmFyaWFudCBydWxlcy4nLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIGhvdyB0byBlbmFibGUgUHVscCBDdGh1bGh1IHJ1bGVzLCBvciBvdGhlciB2YXJpYW50IHJ1bGVzJyxcclxuICAgICAgY2FuQmVSZXN1bWVkOiBmYWxzZSxcclxuICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgc3RlcHM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ2dvdG8tc2V0dGluZ3MnLFxyXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS10YWI9XCJzZXR0aW5nc1wiXScsXHJcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZScsXHJcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnLFxyXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ2dvdG8tY29uZmlndXJlJyxcclxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtYWN0aW9uPVwiY29uZmlndXJlXCJdJyxcclxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZScsXHJcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JyxcclxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdnb3RvLXN5c3RlbS1zZXR0aW5ncycsXHJcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWNhdGVnb3J5PVwic3lzdGVtXCJdJyxcclxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJyxcclxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzQ29udGVudCcsXHJcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnZ290by1nYW1lLXJ1bGVzJyxcclxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtY2F0ZWdvcnk9XCJzeXN0ZW1cIl0gW2RhdGEta2V5PVwiQ29DNy5nYW1lUnVsZXNcIl0nLFxyXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc1RpdGxlJyxcclxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnLFxyXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ3NhdmUtZ2FtZS1ydWxlcycsXHJcbiAgICAgICAgICBzZWxlY3RvcjogJyNydWxlcy1zZXR0aW5ncyBbbmFtZT1zdWJtaXRdJyxcclxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZScsXHJcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50J1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgbG9jYWxpemF0aW9uOiB7XHJcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZSc6ICdHYW1lIFNldHRpbmdzJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIEdhbWUgU2V0dGluZ3MgdGFiJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmUgU2V0dGluZ3MnLFxyXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZUNvbnRlbnQnOiAnQ2xpY2sgb24gdGhlIENvbmZpZ3VyZSBTZXR0aW5ncyBidXR0b24nLFxyXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdGVtIFNldHRpbmdzJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIFN5c3RlbSBTZXR0aW5ncyB0YWInLFxyXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc1RpdGxlJzogJ0NvbmZpZ3VyZSBWYXJpYW50L09wdGlvbmFsIFJ1bGVzJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcyBidXR0b24nLFxyXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdmUgcnVsZSBjaGFuZ2VzJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50JzogJ09uY2UgeW91IGhhdmUgbWFkZSB5b3VyIGNoYW5nZXMgY2xpY2sgb24gdGhlIFNhdmUgQ2hhbmdlcyBidXR0b24nXHJcbiAgICAgIH1cclxuICAgIH0sIGNvbmZpZykpXHJcbiAgfVxyXG5cclxuICBhc3luYyBfcHJlU3RlcCAoKSB7XHJcbiAgICBhd2FpdCBzdXBlci5fcHJlU3RlcCgpXHJcblxyXG4gICAgaWYgKHRoaXMuY3VycmVudFN0ZXAuaWQgPT09ICdnb3RvLWdhbWUtcnVsZXMnKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQoJy5jYXRlZ29yeS1maWx0ZXIuc3lzdGVtLmFjdGl2ZScpXHJcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcilcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRW4gfSBmcm9tICcuL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0ZyIGV4dGVuZHMgRW5hYmxlVmFyaWFudFJ1bGVzRW4ge1xyXG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcclxuICAgIHN1cGVyKHtcclxuICAgICAgdGl0bGU6ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbm5lbGxlcy4nLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0FjdGl2ZXogbGVzIHLDqGdsZXMgb3B0aW9uZWxsZXMgZXQgUHVscCBDdGh1bGh1JyxcclxuICAgICAgbG9jYWxpemF0aW9uOiB7XHJcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZSc6ICdQYXJhbcOodHJlcycsXHJcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NDb250ZW50JzogJ091dnJpciBsXFwnb25nbGV0IFwiUGFyYW3DqHRyZXNcIicsXHJcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnOiAnQ29uZmlndXJhdGlvbiBkZXMgb3B0aW9ucycsXHJcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGlxdWV6IHN1ciBcIkNvbmZpZ3VyYXRpb24gZGVzIG9wdGlvbnNcIicsXHJcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZSc6ICdTeXN0w6htZSBkZSBqZXUnLFxyXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzQ29udGVudCc6ICdPdXZyZXogbFxcJ29uZ2xldCBcIlN5c3TDqG1lIGRlIGpldVwiJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXMnLFxyXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnOiAnQ2xpY2tleiBzdXIgbGUgYm91dHRvbiBcIkNvbmZpZ3VyZXIgbGVzIHZhcmlhbnRlcy9yw6hnbGVzIG9wdGlvbm5lbGxlc1wiJyxcclxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZSc6ICdTYXV2ZWdhcmRlciBsZXMgbW9kaWZpY2F0aW9ucycsXHJcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdBcHJlcyBhdm9pciBjaG9pc2lzIGxlcyBvcHRpb25zIGNsaXF1ZXogc3VyIGxlIGJvdXRvbiBcIlNhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zXCInXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcywgaXNOZXdlclZlcnNpb24gKi9cclxuaW1wb3J0IHsgQ29DN1Rvb2x0aXBzIH0gZnJvbSAnLi4vYXBwcy90b29sdGlwcy5qcydcclxuLy8gaW1wb3J0IHsgQ29DN1dlbGNvbWVNZXNzYWdlIH0gZnJvbSAnLi4vYXBwcy93ZWxjb21lLW1lc3NhZ2UuanMnXHJcbmltcG9ydCB7IHJlZ2lzdGVyVG91cnMgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXRvdXJzLmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XHJcbiAgSG9va3Mub25jZSgncmVhZHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2FsbCBvZiBDdGh1bGh1IDd0aCBFZGl0aW9uIHwgUmVhZHknKVxyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScpICYmIGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIC8qKiBUaGlzIHdpbGwgcHJvbXB0IHRoZSB3ZWxjb21lIG1lc3NhZ2Ugd2hlbiBpdCBpcyAgZmluaXNoZWQgKi9cclxuICAgICAgLy8gYXdhaXQgQ29DN1dlbGNvbWVNZXNzYWdlLmNyZWF0ZSgpXHJcbiAgICB9XHJcbiAgICBnYW1lLkNvQzdUb29sdGlwcyA9IG5ldyBDb0M3VG9vbHRpcHMoKVxyXG5cclxuICAgIGNvbnN0IGluc3RydWN0aW9uc1ZlcnNpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJylcclxuICAgIGlmIChpc05ld2VyVmVyc2lvbihnYW1lLnN5c3RlbS52ZXJzaW9uLCBpbnN0cnVjdGlvbnNWZXJzaW9uID8/ICcwJykpIHtcclxuICAgICAgbGV0IGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xyXG4gICAgICBjb25zdCByZWFkTWUgPSB7XHJcbiAgICAgICAgZW46ICdzeEIyT1hiZndWNk0wbnlRJ1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgcmVhZE1lW2xhbmddID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGxhbmcgPSAnZW4nXHJcbiAgICAgIH1cclxuICAgICAgKGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnN5c3RlbS1kb2MnKS5nZXREb2N1bWVudChyZWFkTWVbbGFuZ10pKS5zaGVldC5yZW5kZXIodHJ1ZSlcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycsIGdhbWUuc3lzdGVtLnZlcnNpb24pXHJcbiAgICB9XHJcbiAgICByZWdpc3RlclRvdXJzKClcclxuICB9KVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lICovXHJcbmltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0VuIH0gZnJvbSAnLi4vdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMnXHJcbmltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0ZyIH0gZnJvbSAnLi4vdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZnIuanMnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJUb3VycyAoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcclxuICAgIGNvbnN0IHRvdXJzID0ge1xyXG4gICAgICBlbjoge1xyXG4gICAgICAgICdlbmFibGUtdmFyaWFudC1ydWxlcyc6IEVuYWJsZVZhcmlhbnRSdWxlc0VuXHJcbiAgICAgIH0sXHJcbiAgICAgIGZyOiB7XHJcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRnJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB0b3Vyc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgbGFuZyA9ICdlbidcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgdG91ck5hbWUgaW4gdG91cnNbbGFuZ10pIHtcclxuICAgICAgZ2FtZS50b3Vycy5yZWdpc3RlcignQ29DNycsIHRvdXJOYW1lLCBuZXcgdG91cnNbbGFuZ11bdG91ck5hbWVdKCkpXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUT1VSIEVSUk9SJywgZXJyKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBJbml0IGZyb20gJy4vaW5pdC5qcydcclxuaW1wb3J0ICogYXMgRGljZVNvTmljZVJlYWR5IGZyb20gJy4vZGljZS1zby1uaWNlLXJlYWR5LmpzJ1xyXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUm9sbFN0YXJ0IGZyb20gJy4vZGljZS1zby1uaWNlLXJvbGwtc3RhcnQuanMnXHJcbmltcG9ydCAqIGFzIFJlYWR5IGZyb20gJy4vcmVhZHkuanMnXHJcbmltcG9ydCAqIGFzIFJlbmRlckFjdG9yU2hlZXQgZnJvbSAnLi9yZW5kZXItYWN0b3Itc2hlZXQuanMnXHJcbmltcG9ydCAqIGFzIFJlbmRlckNoYXRNZXNzYWdlIGZyb20gJy4vcmVuZGVyLWNoYXQtbWVzc2FnZS5qcydcclxuaW1wb3J0ICogYXMgUmVuZGVyRGlhbG9nIGZyb20gJy4vcmVuZGVyLWRpYWxvZy5qcydcclxuaW1wb3J0ICogYXMgUmVuZGVySXRlbVNoZWV0IGZyb20gJy4vcmVuZGVyLWl0ZW0tc2hlZXQuanMnXHJcbmltcG9ydCAqIGFzIFJlbmRlclBhdXNlIGZyb20gJy4vcmVuZGVyLXBhdXNlLmpzJ1xyXG5pbXBvcnQgKiBhcyBSZW5kZXJTZXR0aW5nc0NvbmZpZyBmcm9tICcuL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMnXHJcblxyXG5leHBvcnQgY29uc3QgQ29DN0hvb2tzID0ge1xyXG4gIGxpc3RlbiAoKSB7XHJcbiAgICBJbml0Lmxpc3RlbigpXHJcbiAgICBSZWFkeS5saXN0ZW4oKVxyXG4gICAgUmVuZGVyQWN0b3JTaGVldC5saXN0ZW4oKVxyXG4gICAgUmVuZGVyQ2hhdE1lc3NhZ2UubGlzdGVuKClcclxuICAgIFJlbmRlckRpYWxvZy5saXN0ZW4oKVxyXG4gICAgUmVuZGVySXRlbVNoZWV0Lmxpc3RlbigpXHJcbiAgICBSZW5kZXJQYXVzZS5saXN0ZW4oKVxyXG4gICAgRGljZVNvTmljZVJlYWR5Lmxpc3RlbigpXHJcbiAgICBEaWNlU29OaWNlUm9sbFN0YXJ0Lmxpc3RlbigpXHJcbiAgICBSZW5kZXJTZXR0aW5nc0NvbmZpZy5saXN0ZW4oKVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XHJcbiAgSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXHJcbn1cclxuIiwiLyogZ2xvYmFsIEhvb2tzICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xyXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsICgpID0+IHt9KVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcclxuICBIb29rcy5vbigncmVuZGVyRGlhbG9nJywgKGRpYWxvZywgaHRtbCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybSA9IGh0bWwuZmluZCgnZm9ybScpXHJcbiAgICBpZiAoZm9ybS5pcygnI2RvY3VtZW50LWNyZWF0ZScpICYmIGZvcm0uZmluZCgnc2VsZWN0JykubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIGNvbnN0IGVudGl0eUNyZWF0ZVNlbGVjdFRhZyA9IGZvcm0uZmluZChcIltuYW1lPSd0eXBlJ11cIilcclxuICAgICAgY29uc3QgZW50aXR5U29ydGVkTGlzdCA9IFtdXHJcbiAgICAgIGNvbnN0IHNob3dFeHBlcmltZW50YWwgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KFxyXG4gICAgICAgICdDb0M3JyxcclxuICAgICAgICAnZXhwZXJpbWVudGFsRmVhdHVyZXMnXHJcbiAgICAgIClcclxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmNoaWxkcmVuKCkuZWFjaCgobywgZW50aXR5T3B0aW9uKSA9PiB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gZW50aXR5T3B0aW9uLnRleHRDb250ZW50Py5jYXBpdGFsaXplKClcclxuICAgICAgICBpZiAoZ2FtZS5pMThuLmhhcyhgQ29DNy5FbnRpdGllcy4ke2tleX1gKSkge1xyXG4gICAgICAgICAgZW50aXR5T3B0aW9uLnRleHRDb250ZW50ID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG93RXhwZXJpbWVudGFsIHx8ICFbJ3ZlaGljbGUnXS5pbmNsdWRlcyhlbnRpdHlPcHRpb24udmFsdWUpKSB7XHJcbiAgICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnB1c2goZW50aXR5T3B0aW9uKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmVtcHR5KClcclxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmFwcGVuZChcclxuICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnNvcnQoKGZpcnN0LCBzZWNvbmQpID0+XHJcbiAgICAgICAgICBmaXJzdC5pbm5lclRleHQubG9jYWxlQ29tcGFyZShzZWNvbmQuaW5uZXJUZXh0KVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgICBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYWN0b3InKSB7XHJcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnY2hhcmFjdGVyJylcclxuICAgICAgfSBlbHNlIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdib29rJykge1xyXG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2l0ZW0nKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xyXG4gIEhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcclxuICBIb29rcy5vbigncmVuZGVyUGF1c2UnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge1xyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJykge1xyXG4gICAgICAgIGh0bWwuZmluZCgnaW1nJykucmVtb3ZlKClcclxuICAgICAgfVxyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpICE9PSAnJykge1xyXG4gICAgICAgIGh0bWwuZmluZCgnaW1nJykuYXR0cignc3JjJywgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0JykgIT09ICcnKSB7XHJcbiAgICAgICAgaHRtbC5maW5kKCdoMycpLmh0bWwoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0JykpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG59XHJcbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xyXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRTTkZhY2VzIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRzbi1mYWNlcy5qcydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xyXG4gIEhvb2tzLm9uY2UoJ2RpY2VTb05pY2VSZWFkeScsIGRpY2UzZCA9PiB7XHJcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XHJcbiAgICAgIHR5cGU6ICdkdCcsXHJcbiAgICAgIGxhYmVsczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCcsICc2MCcsICc3MCcsICc4MCcsICc5MCcsICcwMCddLFxyXG4gICAgICBmb250U2NhbGU6IDAuNzUsXHJcbiAgICAgIHN5c3RlbTogJ3N0YW5kYXJkJ1xyXG4gICAgfSlcclxuICAgIGRpY2UzZC5hZGREaWNlUHJlc2V0KHtcclxuICAgICAgdHlwZTogJ2RvJyxcclxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXHJcbiAgICAgIGZvbnRTY2FsZTogMC43NSxcclxuICAgICAgc3lzdGVtOiAnc3RhbmRhcmQnXHJcbiAgICB9KVxyXG4gICAgZ2FtZS5Db0M3RGVjYWRlckRTTkZhY2VzID0gbmV3IENvQzdEZWNhZGVyRFNORmFjZXMoKVxyXG4gIH0pXHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xyXG4gIEhvb2tzLm9uKCdkaWNlU29OaWNlUm9sbFN0YXJ0JywgZGljZTNkID0+IHtcclxuICAgIGdhbWUuQ29DN0RlY2FkZXJEU05GYWNlcy5zZXRGYWNlcygpXHJcbiAgfSlcclxufVxyXG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cclxuaW1wb3J0IHsgQ29DN0RpcmVjdG9yeVBpY2tlciB9IGZyb20gJy4uL3NjcmlwdHMvY29jNy1kaXJlY3RvcnktcGlja2VyLmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XHJcbiAgSG9va3Mub24oJ3JlbmRlclNldHRpbmdzQ29uZmlnJywgKGFwcCwgaHRtbCwgdXNlcikgPT4ge1xyXG4gICAgQ29DN0RpcmVjdG9yeVBpY2tlci5wcm9jZXNzSHRtbChodG1sKVxyXG4gIH0pXHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUsIHNvY2tldGxpYiwgdWkgKi9cclxuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENvQzdTb2NrZXQgKCkge1xyXG4gIGdhbWUuQ29DN3NvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbSgnQ29DNycpXHJcbiAgZ2FtZS5Db0M3c29ja2V0LnJlZ2lzdGVyKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIGdtY3JlYXRlbWVzc2FnZWFzKVxyXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ210cmFkZWl0ZW10bycsIGdtdHJhZGVpdGVtdG8pXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdtY3JlYXRlbWVzc2FnZWFzIChkYXRhKSB7XHJcbiAgY29uc3QgbWVsZWVUYXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KFxyXG4gICAgZGF0YS50YXJnZXRLZXksXHJcbiAgICBkYXRhLm1lc3NhZ2VJZCxcclxuICAgIGRhdGEuZmFzdEZvcndhcmRcclxuICApXHJcbiAgbWVsZWVUYXJnZXQuaW5pdGlhdG9yS2V5ID0gZGF0YS5hY3RvcktleVxyXG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBtZWxlZVRhcmdldC5jcmVhdGVDaGF0Q2FyZCgpXHJcbiAgcmV0dXJuIG1lc3NhZ2VcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ210cmFkZWl0ZW10byAoZGF0YSkge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgYWN0b3JcclxuICAgIGlmIChkYXRhLnNjZW5lKSB7XHJcbiAgICAgIGFjdG9yID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmUpLnRva2Vucy5nZXQoZGF0YS5hY3RvckZyb20pLmFjdG9yXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChkYXRhLmFjdG9yRnJvbSlcclxuICAgIH1cclxuICAgIGNvbnN0IGl0ZW0gPSBhY3Rvci5pdGVtcy5nZXQoZGF0YS5pdGVtKVxyXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IGdhbWUuYWN0b3JzXHJcbiAgICAgIC5nZXQoZGF0YS5hY3RvclRvKVxyXG4gICAgICAuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXHJcbiAgICBpZiAoY3JlYXRlZCkge1xyXG4gICAgICBhY3Rvci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLmlkXSlcclxuICAgIH1cclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGUpXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbiAgcmV0dXJuIHRydWVcclxufVxyXG4iLCIvKiBnbG9iYWwgZnJvbVV1aWQsIGdhbWUsIHVpICovXHJcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXHJcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xyXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgQ29DN1N5c3RlbVNvY2tldCB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkYXRhLnR5cGVdICAgICAgICAgICAgICAgIEFjdGlvbiB0byBydW5cclxuICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IFtkYXRhLmxpc3RlbmVyXSAgb25seSB0aGlzIHNwZWNmaWMgdXNlciBzaG91bGQgcnVuIHRoZSBhY3Rpb25cclxuICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBjYWxsU29ja2V0IChkYXRhKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEubGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGlmIChnYW1lLnVzZXIuaWQgPT09IGRhdGEubGlzdGVuZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcbiAgICAgICAgICBjYXNlIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlOlxyXG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBjYXNlIENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZTpcclxuICAgICAgICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2ludm9rZSc6XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YS5pdGVtKVxyXG4gICAgICAgICAgICAgIGl0ZW1bZGF0YS5tZXRob2RdKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ3VwZGF0ZUNoYXInOlxyXG4gICAgICAgICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlcXVlc3QgS2VlcGVyIGFjdGlvbiwgaWYgeW91IGFyZSBhIGtlZXBlciBydW4geW91cnNlbGYsIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBHTSBzaG93IGVycm9yXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cclxuICAgKi9cclxuICBzdGF0aWMgcmVxdWVzdEtlZXBlckFjdGlvbiAoZGF0YSkge1xyXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgICAgIGRhdGEubGlzdGVuZXIgPSBnYW1lLnVzZXIuaWRcclxuICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00pXHJcbiAgICAgIGlmIChrZWVwZXJzLmxlbmd0aCkge1xyXG4gICAgICAgIGRhdGEubGlzdGVuZXIgPSBrZWVwZXJzWzBdLmlkXHJcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXHJcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nS2VlcGVyVXNlcicpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXF1ZXN0IHVzZXIgYWN0aW9uXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSB1c2VySWQgICAgICBPbmx5IHRoaXMgdXNlciBpZCBzaG91bGQgcnVuIHRoZSBhY3Rpb24uXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBlcnJvcklmTWlzc2luZyAgSWYgcmVxdWVzdGluZyBhIHNwZWNpZmljIHVzZXIgc2hvdWxkIHJ1biB0aGUgYWN0aW9uIGVycm9yIGlmIHVzZXIgbm90IGZvdW5kIC8gbG9nZ2VkIGluLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZVNlbGYgICAgIElmIHJ1bm5pbmcgYXMgYWxsIHVzZXJzIHNob3VsZCB0aGUgY3VycmVudCB1c2VyIGFsc28gcnVuIHRoZSBhY3Rpb24uXHJcbiAgICogQHJldHVybiB7dm9pZH1cclxuICAgKi9cclxuICBzdGF0aWMgcmVxdWVzdFVzZXJBY3Rpb24gKFxyXG4gICAgZGF0YSxcclxuICAgIHsgdXNlcklkID0gbnVsbCwgZXJyb3JJZk1pc3NpbmcgPSB0cnVlLCBpbmNsdWRlU2VsZiA9IHRydWUgfSA9IHt9XHJcbiAgKSB7XHJcbiAgICBpZiAodXNlcklkICYmIHR5cGVvZiB1c2VySWQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGlmICh1c2VySWQgPT09IGdhbWUudXNlci5pZCkge1xyXG4gICAgICAgIGRhdGEubGlzdGVuZXIgPSBnYW1lLnVzZXIuaWRcclxuICAgICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB1c2VyID0gZ2FtZS51c2Vycy5nZXQodXNlcklkKVxyXG4gICAgICAgIGlmICh0eXBlb2YgdXNlci5pZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdXNlci5hY3RpdmUpIHtcclxuICAgICAgICAgIGRhdGEubGlzdGVuZXIgPSB1c2VyLmlkXHJcbiAgICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXHJcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvcklmTWlzc2luZykge1xyXG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nVXNlcicpKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGluY2x1ZGVTZWxmKSB7XHJcbiAgICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXHJcbiAgICAgIH1cclxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgQ29tYmF0LCBDT05GSUcsIGdhbWUsIEhvb2tzLCBJdGVtRGlyZWN0b3J5LCB0aW55TUNFICovXHJcbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXHJcbmltcG9ydCB7IENvQzdDcmVhdHVyZVNoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcclxuaW1wb3J0IHsgQ29DN0NvbWJhdCwgcm9sbEluaXRpYXRpdmUgfSBmcm9tICcuL2NvbWJhdC5qcydcclxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyBVcGRhdGVyIH0gZnJvbSAnLi91cGRhdGVyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXHJcbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuL2FwcHMvcGFyc2VyLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xyXG5pbXBvcnQgeyBDb0M3TWVudSB9IGZyb20gJy4vbWVudS5qcydcclxuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXHJcbmltcG9ydCB7IENvQzdDYW52YXMgfSBmcm9tICcuL2FwcHMvY2FudmFzLmpzJ1xyXG5pbXBvcnQgeyBDb0M3U2V0dGluZ3NEaXJlY3RvcnkgfSBmcm9tICcuL3NldHRpbmdzLWRpcmVjdG9yeS5qcydcclxuaW1wb3J0IHsgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgfSBmcm9tICcuL2NvbXBlbmRpdW0tZGlyZWN0b3J5LmpzJ1xyXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcclxuaW1wb3J0IHsgQ29DN0hvb2tzIH0gZnJvbSAnLi9ob29rcy9pbmRleC5qcydcclxuaW1wb3J0ICogYXMgRGljZUJvdCBmcm9tICcuL2RpY2Vib3QuanMnXHJcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xyXG5pbXBvcnQgeyBDb0M3Q2hhc2VTaGVldCB9IGZyb20gJy4vaXRlbXMvY2hhc2Uvc2hlZXQuanMnXHJcbmltcG9ydCB7IENvQzdTb2NrZXQgfSBmcm9tICcuL2hvb2tzL3NvY2tldC5qcydcclxuaW1wb3J0IHsgQ29DN1N5c3RlbVNvY2tldCB9IGZyb20gJy4vYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMnXHJcbmltcG9ydCB7IERyb3BBY3RvclNoZWV0RGF0YSB9IGZyb20gJy4vaG9va3MvZHJvcC1hY3Rvci1zaGVldC1kYXRhLmpzJ1xyXG5cclxuLy8gQ2FyZCBpbml0XHJcbmltcG9ydCB7IGluaXRFQ0MgfSBmcm9tICcuL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXHJcbmltcG9ydCB7IENoYXNlT2JzdGFjbGVDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xyXG5pbXBvcnQgeyBDb0M3Q29udGV4dE1lbnUgfSBmcm9tICcuL2NvbnRleHQtbWVudS5qcydcclxuXHJcbkhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcclxuICBjb25zdCBzeXN0ZW1UYWIgPSAkKGFwcC5mb3JtKS5maW5kKCcudGFiW2RhdGEtdGFiPXN5c3RlbV0nKVxyXG4gIHN5c3RlbVRhYlxyXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUluaXREaWNlc10nKVxyXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcclxuICAgIC5iZWZvcmUoXHJcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVJbml0aWF0aXZlJykgK1xyXG4gICAgICAgICc8L2gyPidcclxuICAgIClcclxuICBzeXN0ZW1UYWJcclxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN0YW5ieUdNUm9sbHNdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbCcpICtcclxuICAgICAgICAnPC9oMj4nXHJcbiAgICApXHJcbiAgc3lzdGVtVGFiXHJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC50cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZF0nKVxyXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcclxuICAgIC5iZWZvcmUoXHJcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGF0Q2FyZHMnKSArXHJcbiAgICAgICAgJzwvaDI+J1xyXG4gICAgKVxyXG4gIHN5c3RlbVRhYlxyXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZW5hYmxlU3RhdHVzSWNvbnNdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2NlbmUnKSArXHJcbiAgICAgICAgJzwvaDI+J1xyXG4gICAgKVxyXG4gIHN5c3RlbVRhYlxyXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwub3ZlcnJpZGVHYW1lQXJ0d29ya10nKVxyXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcclxuICAgIC5iZWZvcmUoXHJcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xyXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVHYW1lQXJ0d29yaycpICtcclxuICAgICAgICAnPC9oMj4nXHJcbiAgICApXHJcbiAgc3lzdGVtVGFiXHJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXRdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2hlZXQnKSArXHJcbiAgICAgICAgJzwvaDI+J1xyXG4gICAgKVxyXG4gIHN5c3RlbVRhYlxyXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcmVnYXJkVXNlUGVyUm91bmRdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlV2VhcG9uJykgK1xyXG4gICAgICAgICc8L2gyPidcclxuICAgIClcclxuICBzeXN0ZW1UYWJcclxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN5bmNEaWNlM2RdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGljZVNvTmljZScpICtcclxuICAgICAgICAnPC9oMj4nXHJcbiAgICApXHJcbiAgc3lzdGVtVGFiXHJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kZWJ1Z21vZGVdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGV2ZWxvcGVyRGVidWcnKSArXHJcbiAgICAgICAgJzwvaDI+J1xyXG4gICAgKVxyXG4gIHN5c3RlbVRhYlxyXG4gICAgLmZpbmQoJ3NlbGVjdFtuYW1lPUNvQzdcXFxcLmJvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGVdJylcclxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXHJcbiAgICAuYmVmb3JlKFxyXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcclxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbFRhYmxlJykgK1xyXG4gICAgICAgICc8L2gyPidcclxuICAgIClcclxuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXHJcbiAgLy8gc3lzdGVtVGFiXHJcbiAgLy8gICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5jaGFzZVNob3dUb2tlbk1vdmVtZW50XScpXHJcbiAgLy8gICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxyXG4gIC8vICAgLmJlZm9yZShcclxuICAvLyAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXHJcbiAgLy8gICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXNlU2V0dGluZ3MnKSArXHJcbiAgLy8gICAgICAgJzwvaDI+J1xyXG4gIC8vICAgKVxyXG59KVxyXG5cclxuSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICBnYW1lLkNvQzcgPSB7XHJcbiAgICBtYWNyb3M6IHtcclxuICAgICAgc2tpbGxDaGVjazogQ29DN1V0aWxpdGllcy5za2lsbENoZWNrTWFjcm8sXHJcbiAgICAgIHdlYXBvbkNoZWNrOiBDb0M3VXRpbGl0aWVzLndlYXBvbkNoZWNrTWFjcm8sXHJcbiAgICAgIGNoZWNrOiBDb0M3VXRpbGl0aWVzLmNoZWNrTWFjcm9cclxuICAgIH0sXHJcbiAgICBjYXJkczoge1xyXG4gICAgICBEYW1hZ2VDYXJkXHJcbiAgICB9LFxyXG4gICAgZGV2OiB7XHJcbiAgICAgIGRpY2U6IHtcclxuICAgICAgICBhbHdheXNDcml0OiBmYWxzZSxcclxuICAgICAgICBhbHdheXNGdW1ibGU6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgQ29tYmF0LnByb3RvdHlwZS5yb2xsSW5pdGlhdGl2ZSA9IHJvbGxJbml0aWF0aXZlXHJcbn0pXHJcblxyXG5pbml0RUNDKENoYXNlT2JzdGFjbGVDYXJkKVxyXG5cclxuSG9va3Mub24oJ3JlbmRlckNvbWJhdFRyYWNrZXInLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxyXG4gIENvQzdDb21iYXQucmVuZGVyQ29tYmF0VHJhY2tlcihhcHAsIGh0bWwsIGRhdGEpXHJcbilcclxuXHJcbkRpY2VCb3QubGlzdGVuKClcclxuQ29DN0hvb2tzLmxpc3RlbigpXHJcblxyXG5Ib29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBDb0M3U29ja2V0KVxyXG5cclxuSG9va3Mub25jZSgnc2V0dXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgLy8gTG9jYWxpemUgQ09ORklHIG9iamVjdHMgb25jZSB1cC1mcm9udFxyXG4gIGNvbnN0IHRvTG9jYWxpemUgPSBbXHJcbiAgICAnc3BlbGxQcm9wZXJ0aWVzJyxcclxuICAgICdib29rVHlwZScsXHJcbiAgICAndGFsZW50VHlwZScsXHJcbiAgICAnb2NjdXBhdGlvblByb3BlcnRpZXMnLFxyXG4gICAgJ3N0YXR1c1R5cGUnXHJcbiAgXVxyXG5cclxuICBmb3IgKGNvbnN0IG8gb2YgdG9Mb2NhbGl6ZSkge1xyXG4gICAgY29uc3QgbG9jYWxpemVkID0gT2JqZWN0LmVudHJpZXMoQ09DN1tvXSkubWFwKGUgPT4ge1xyXG4gICAgICByZXR1cm4gW2VbMF0sIGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKV1cclxuICAgIH0pXHJcbiAgICBDT0M3W29dID0gbG9jYWxpemVkLnJlZHVjZSgob2JqLCBlKSA9PiB7XHJcbiAgICAgIG9ialtlWzBdXSA9IGVbMV1cclxuICAgICAgcmV0dXJuIG9ialxyXG4gICAgfSwge30pXHJcbiAgfVxyXG5cclxuICBsZXQgZWZmZWN0SW5kZXggPSBDT05GSUcuc3RhdHVzRWZmZWN0cy5maW5kSW5kZXgoXHJcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLmRlYWRcclxuICApXHJcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xyXG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxyXG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90b21ic3RvbmUuc3ZnJ1xyXG4gIH1cclxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcclxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMudW5jb25zY2lvdXNcclxuICApXHJcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xyXG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxyXG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9rbm9ja2VkLW91dC1zdGFycy5zdmcnXHJcbiAgfVxyXG4gIENPTkZJRy5zdGF0dXNFZmZlY3RzLnVuc2hpZnQoXHJcbiAgICB7XHJcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSxcclxuICAgICAgbGFiZWw6ICdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyxcclxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6IENPQzcuc3RhdHVzLmluZGVmSW5zYW5lLFxyXG4gICAgICBsYWJlbDogJ0NvQzcuSW5zYW5pdHlOYW1lJyxcclxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyxcclxuICAgICAgbGFiZWw6ICdDb0M3LkNyaXRpY2FsV291bmRzJyxcclxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvYXJtLXNsaW5nLnN2ZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5keWluZyxcclxuICAgICAgbGFiZWw6ICdDb0M3LkR5aW5nJyxcclxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xyXG4gICAgfVxyXG4gIClcclxufSlcclxuXHJcbkhvb2tzLm9uKCdjcmVhdGVBY3RpdmVFZmZlY3QnLCAoZGF0YSwgb3B0aW9ucywgdXNlcklkKSA9PiB7XHJcbiAgaWYgKFxyXG4gICAgZ2FtZS51c2VySWQgPT09IHVzZXJJZCAmJlxyXG4gICAgdHlwZW9mIGRhdGEuZmxhZ3MuY29yZSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgIHR5cGVvZiBkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQgIT09ICd1bmRlZmluZWQnXHJcbiAgKSB7XHJcbiAgICBzd2l0Y2ggKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCkge1xyXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxyXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxyXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxyXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxyXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxyXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XHJcbiAgICAgICAgZGF0YS5wYXJlbnQuc2V0Q29uZGl0aW9uKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCwge1xyXG4gICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zdCByZWFsVGltZSA9IGRhdGEuZmxhZ3MuQ29DNz8ucmVhbFRpbWVcclxuICAgICAgICAgIGxldCBkdXJhdGlvbiA9IG51bGxcclxuICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24/LnJvdW5kc1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChyZWFsVGltZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uPy5zZWNvbmRzXHJcbiAgICAgICAgICAgIGlmICghaXNOYU4oZHVyYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgZHVyYXRpb24gPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gMzYwMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGF0YS5wYXJlbnQuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCB7XHJcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlYWxUaW1lLFxyXG4gICAgICAgICAgICBkdXJhdGlvblxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcbn0pXHJcblxyXG5Ib29rcy5vbignZGVsZXRlQWN0aXZlRWZmZWN0JywgKGRhdGEsIG9wdGlvbnMsIHVzZXJJZCkgPT4ge1xyXG4gIGlmIChcclxuICAgIGdhbWUudXNlcklkID09PSB1c2VySWQgJiZcclxuICAgIHR5cGVvZiBkYXRhLmZsYWdzLmNvcmUgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICB0eXBlb2YgZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkICE9PSAndW5kZWZpbmVkJ1xyXG4gICkge1xyXG4gICAgc3dpdGNoIChkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQpIHtcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcclxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxyXG4gICAgICAgIGRhdGEucGFyZW50LnVuc2V0Q29uZGl0aW9uKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCwge1xyXG4gICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59KVxyXG5cclxuLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGl0ZW0gY2FsbGVkICdfX0NvQzdJbnRlcm5hbEl0ZW1fXydcclxuLy8gVGhpcyBpdGVtIGlzIHVzZWQgZm9yIGludGVybmFsIHB1cnBvc2VzIGFuZCBzaG91bGQgbm90IGJlIHNlZW4gYnkgYW55b25lXHJcbkhvb2tzLm9uKCdjaGFuZ2VTaWRlYmFyVGFiJywgZGlyZWN0b3J5ID0+IHtcclxuICBpZiAoZGlyZWN0b3J5IGluc3RhbmNlb2YgSXRlbURpcmVjdG9yeSkge1xyXG4gICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZmluZChpID0+IGkubmFtZSA9PT0gJ19fQ29DN0ludGVybmFsSXRlbV9fJylcclxuICAgIGlmIChpdGVtKSB7XHJcbiAgICAgIGNvbnN0IGh0bWwgPSBkaXJlY3RvcnkuX2VsZW1lbnRcclxuICAgICAgY29uc3QgaXRlbUVsZW1lbnQgPSBodG1sLmZpbmQoYFtkYXRhLWRvY3VtZW50LWlkPScke2l0ZW0uaWR9J11gKVxyXG4gICAgICBpZiAoaXRlbUVsZW1lbnQpIGl0ZW1FbGVtZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH1cclxuICB9XHJcbn0pXHJcblxyXG5Ib29rcy5vbignaG90YmFyRHJvcCcsIGFzeW5jIChiYXIsIGRhdGEsIHNsb3QpID0+IHtcclxuICByZXR1cm4gQ29DN1V0aWxpdGllcy5jcmVhdGVNYWNybyhiYXIsIGRhdGEsIHNsb3QpXHJcbn0pXHJcblxyXG5Ib29rcy5vbigncmVuZGVyQ2hhdExvZycsIChhcHAsIGh0bWwsIGRhdGEpID0+XHJcbiAgQ29DN0NoYXQuY2hhdExpc3RlbmVycyhhcHAsIGh0bWwsIGRhdGEpXHJcbilcclxuSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cclxuICBDb0M3Q2hhdC5yZW5kZXJNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXHJcbilcclxuSG9va3Mub24oJ3VwZGF0ZUNoYXRNZXNzYWdlJywgKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcikgPT5cclxuICBDb0M3Q2hhdC5vblVwZGF0ZUNoYXRNZXNzYWdlKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcilcclxuKVxyXG5cclxuSG9va3Mub24oJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xyXG4gIGF3YWl0IFVwZGF0ZXIuY2hlY2tGb3JVcGRhdGUoKVxyXG5cclxuICAvLyBnYW1lLkNvQzcubWVudXMgPSBuZXcgQ29DN01lbnUoKTtcclxuXHJcbiAgYWN0aXZhdGVHbG9iYWxMaXN0ZW5lcigpXHJcblxyXG4gIC8vIHNldEdsb2JhbENzc1ZhcigpXHJcblxyXG4gIGNvbmZpZ3VyZVRpbnlNQ0UoKVxyXG5cclxuICBnYW1lLkNvQzcuc2tpbGxMaXN0ID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc2tpbGxzJyk/LmdldERvY3VtZW50cygpXHJcblxyXG4gIGdhbWUuc29ja2V0Lm9uKCdzeXN0ZW0uQ29DNycsIGFzeW5jIGRhdGEgPT4ge1xyXG4gICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXHJcbiAgfSlcclxuXHJcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4XCI6IFwiUGhvYmlhcyBpbmRleFwiLFxyXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIHBob2JpYXMgdGFibGVcIixcclxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleFwiOiBcIk1hbmlhcyBpbmRleFwiLFxyXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgbWFuaWFzIHRhYmxlXCIsXHJcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGVcIjogXCJTYW1wbGUgcGhvYmlhcyB0YWJsZVwiLFxyXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlTWFuaWFzVGFibGVcIjogXCJTYW1wbGUgTWFuaWFzIHRhYmxlXCIsXHJcblxyXG4gIGZ1bmN0aW9uIF90YWJsZVNldHRpbmdzQ2hhbmdlZCAodGFibGUsIGlkKSB7XHJcbiAgICBpZiAoaWQgPT09ICdub25lJykgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBudWxsXHJcbiAgICBlbHNlIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gZ2FtZS50YWJsZXMuZ2V0KGlkKVxyXG4gIH1cclxuXHJcbiAgLy8gZnVuY3Rpb24gX3RhYmxlSW5kZXhDaGFuZ2VkKCB0YWJsZSwgaW5kZXgpe1xyXG4gIC8vICBnYW1lLkNvQzcudGFibGVzW3RhYmxlXT1pbmRleDtcclxuICAvLyB9XHJcblxyXG4gIGNvbnN0IHRhYmxlQ2hvaWNlID0geyBub25lOiAnU0VUVElOR1MuTGV0S2VlcGVyRGVjaWRlJyB9XHJcbiAgZm9yIChjb25zdCB0IG9mIGdhbWUudGFibGVzKSB7XHJcbiAgICB0YWJsZUNob2ljZVt0Ll9pZF0gPSB0Lm5hbWVcclxuICB9XHJcblxyXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcclxuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogJ25vbmUnLFxyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXHJcbiAgICBvbkNoYW5nZTogaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCdib3V0T2ZNYWRuZXNzX1N1bW1hcnknLCBpZClcclxuICB9KVxyXG5cclxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJywge1xyXG4gICAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJyxcclxuICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgY29uZmlnOiB0cnVlLFxyXG4gICAgZGVmYXVsdDogJ25vbmUnLFxyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXHJcbiAgICBvbkNoYW5nZTogaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCdib3V0T2ZNYWRuZXNzX1JlYWxUaW1lJywgaWQpXHJcbiAgfSlcclxuXHJcbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4Jyx7XHJcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcclxuICAvLyAgaGludDogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50JyxcclxuICAvLyAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcclxuICAvLyAgZGVmYXVsdDogOSxcclxuICAvLyAgdHlwZTogTnVtYmVyLFxyXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxyXG4gIC8vIH0pO1xyXG5cclxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xyXG4gIC8vICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4JyxcclxuICAvLyAgaGludDogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleEhpbnQnLFxyXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcclxuICAvLyAgY29uZmlnOiB0cnVlLFxyXG4gIC8vICBkZWZhdWx0OiAxMCxcclxuICAvLyAgdHlwZTogTnVtYmVyLFxyXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ21hbmlhc0luZGV4JywgaWQpXHJcbiAgLy8gfSk7XHJcblxyXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJyx7XHJcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGUnLFxyXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcclxuICAvLyAgY29uZmlnOiB0cnVlLFxyXG4gIC8vICBkZWZhdWx0OiAnbm9uZScsXHJcbiAgLy8gIHR5cGU6IFN0cmluZyxcclxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXHJcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCAncGhvYmlhcycsIGlkKVxyXG4gIC8vIH0pO1xyXG5cclxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJyx7XHJcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXHJcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxyXG4gIC8vICBjb25maWc6IHRydWUsXHJcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcclxuICAvLyAgdHlwZTogU3RyaW5nLFxyXG4gIC8vICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcclxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcclxuICAvLyB9KTtcclxuXHJcbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcclxuICAgIGJvdXRPZk1hZG5lc3NfU3VtbWFyeTpcclxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpID09PSAnbm9uZSdcclxuICAgICAgICA/IG51bGxcclxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcclxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKVxyXG4gICAgICAgICksXHJcbiAgICBib3V0T2ZNYWRuZXNzX1JlYWxUaW1lOlxyXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpID09PSAnbm9uZSdcclxuICAgICAgICA/IG51bGxcclxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcclxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJylcclxuICAgICAgICApXHJcbiAgICAvLyBtYW5pYXNJbmRleDogZ2Uuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnKSxcclxuICAgIC8vIHBob2JpYXNJbmRleDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc01hbmlhc0luZGV4JyksXHJcbiAgICAvLyBwaG9iaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKT9udWxsOmdhbWUudGFibGVzLmdldChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnKSksXHJcbiAgICAvLyBtYW5pYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSksXHJcbiAgfVxyXG59KVxyXG5cclxuLy8gSG9va3Mub24oJ3ByZUNyZWF0ZUFjdG9yJywgKGNyZWF0ZURhdGEpID0+IENvQ0FjdG9yLmluaXRUb2tlbiggY3JlYXRlRGF0YSkpO1xyXG5cclxuSG9va3Mub24oXHJcbiAgJ3JlbmRlckNvQzdDaGFzZVNoZWV0JyxcclxuICAvKiogYXN5bmMgKi8gKGFwcCwgaHRtbCwgZGF0YSkgPT5cclxuICAgIC8qKiBhd2FpdCAqLyBDb0M3Q2hhc2VTaGVldC5zZXRTY3JvbGwoYXBwLCBodG1sLCBkYXRhKVxyXG4pXHJcblxyXG5Ib29rcy5vbignY2xvc2VDb0M3Q2hhc2VTaGVldCcsIChhcHAsIGh0bWwpID0+XHJcbiAgQ29DN0NoYXNlU2hlZXQub25DbG9zZShhcHAsIGh0bWwpXHJcbilcclxuXHJcbi8vIENhbGxlZCBvbiBjbG9zaW5nIGEgY2hhcmFjdGVyIHNoZWV0IHRvIGxvY2sgaXQgb24gZ2V0dGluZyBpdCB0byBkaXNwbGF5IHZhbHVlc1xyXG5Ib29rcy5vbignY2xvc2VBY3RvclNoZWV0JywgY2hhcmFjdGVyU2hlZXQgPT4gY2hhcmFjdGVyU2hlZXQub25DbG9zZVNoZWV0KCkpXHJcbkhvb2tzLm9uKCdyZW5kZXJDb0M3Q3JlYXR1cmVTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XHJcbiAgQ29DN0NyZWF0dXJlU2hlZXQuZm9yY2VBdXRvKGFwcCwgaHRtbCwgZGF0YSlcclxuKVxyXG5Ib29rcy5vbigncmVuZGVyQ29DN05QQ1NoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cclxuICBDb0M3TlBDU2hlZXQuZm9yY2VBdXRvKGFwcCwgaHRtbCwgZGF0YSlcclxuKVxyXG4vLyBIb29rcy5vbigndXBkYXRlQWN0b3InLCAoYWN0b3IsIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZUFjdG9yKCBhY3RvciwgZGF0YVVwZGF0ZSkpO1xyXG4vLyBIb29rcy5vbigndXBkYXRlVG9rZW4nLCAoc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKSk7XHJcblxyXG5Ib29rcy5vbignY2hhdE1lc3NhZ2UnLCBDb0M3VXRpbGl0aWVzLlBhcnNlQ2hhdEVudHJ5KVxyXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlVG9rZW4nLCAoIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpID0+IENvQ0FjdG9yLnByZUNyZWF0ZVRva2VuKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSlcclxuLy8gSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXHJcbi8vIEhvb2tzLm9uKFwicmVuZGVyQ2hhdExvZ1wiLCAoYXBwLCBodG1sLCBkYXRhKSA9PiBDb0M3SXRlbS5jaGF0TGlzdGVuZXJzKGh0bWwpKTtcclxuXHJcbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgKC8qIGNvbnRyb2xzICovKSA9PiB7XHJcbiAgLy8gaWYoIGdhbWUudXNlci5pc0dNKXtcclxuICAvLyAgbGV0IGdyb3VwID0gY29udHJvbHMuZmluZChiID0+IGIubmFtZSA9PSAndG9rZW4nKTtcclxuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XHJcbiAgLy8gICAgdG9nZ2xlOiB0cnVlLFxyXG4gIC8vICAgIGljb24gOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXHJcbiAgLy8gICAgbmFtZTogJ2RldnBoYXNlJyxcclxuICAvLyAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxyXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKT8gZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5EZXZQaGFzZURpc2FibGVkJyksXHJcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXHJcbiAgLy8gIH0pO1xyXG4gIC8vICBncm91cC50b29scy5wdXNoKHtcclxuICAvLyAgICB0b2dnbGU6IHRydWUsXHJcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmFzIGZhLXVzZXItZWRpdCcsXHJcbiAgLy8gICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxyXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxyXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJyksXHJcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24oKVxyXG4gIC8vICB9KTtcclxuICAvLyB9XHJcbn0pXHJcblxyXG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVDb250cm9scycsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcclxuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lTmF2aWdhdGlvbicsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcclxuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXHJcbkhvb2tzLm9uKCdyZW5kZXJKb3VybmFsUGFnZVNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcclxuSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBDb0M3UGFyc2VyLlBhcnNlU2hlZXRDb250ZW50KVxyXG4vLyBDaGF0IGNvbW1hbmQgcHJvY2Vzc2luZ1xyXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlQ2hhdE1lc3NhZ2UnLCBDb0M3UGFyc2VyLlBhcnNlTWVzc2FnZSk7XHJcbi8vIEhvb2tzLm9uKCdjcmVhdGVDaGF0TWVzc2FnZScsIENvQzdDaGF0LmNyZWF0ZUNoYXRNZXNzYWdlSG9vayk7XHJcbkhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcclxuICBDb0M3Q2hhdC5yZW5kZXJDaGF0TWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxyXG4gIENvQzdQYXJzZXIuUGFyc2VNZXNzYWdlKGFwcCwgaHRtbCwgZGF0YSlcclxufSlcclxuLy8gU2hlZXQgY3NzIG9wdGlvbnNcclxuLy8gSG9va3Mub24oJ3JlbmRlckNvQzdDaGFyYWN0ZXJTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldCk7XHJcbkhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KVxyXG5Ib29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KVxyXG5cclxuLy8gSG9va3Mub24oJ2Ryb3BDYW52YXNEYXRhJywgQ29DN1BhcnNlci5vbkRyb3BTb21ldGhpbmcpO1xyXG5Ib29rcy5vbignZ2V0U2NlbmVDb250cm9sQnV0dG9ucycsIENvQzdNZW51LmdldEJ1dHRvbnMpXHJcbkhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgQ29DN01lbnUucmVuZGVyQ29udHJvbHMpXHJcblxyXG5Ib29rcy5vbignZHJvcENhbnZhc0RhdGEnLCBDb0M3Q2FudmFzLm9uRHJvcFNvbWV0aGluZylcclxuXHJcbkhvb2tzLm9uKCdkcm9wQWN0b3JTaGVldERhdGEnLCBEcm9wQWN0b3JTaGVldERhdGEpXHJcblxyXG5mdW5jdGlvbiBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyICgpIHtcclxuICBjb25zdCBib2R5ID0gJCgnYm9keScpXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwpXHJcbiAgYm9keS5vbignY2xpY2snLCAnYS5jb2M3LWlubGluZS1jaGVjaycsIENvQzdDaGVjay5fb25DbGlja0lubGluZVJvbGwpXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX29uTGVmdENsaWNrKVxyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJhdGlvbiBvZiBUaW55TUNFIGVkaXRvclxyXG4gKi9cclxuZnVuY3Rpb24gY29uZmlndXJlVGlueU1DRSAoKSB7XHJcbiAgLy8gQWRkIG9uIGRyb3AgZXZlbnQgdG8gdGlueU1DRSB0byBoZW5kbGUgdGhlIGxpbmtzIGRyb3BcclxuICB0aW55TUNFLlBsdWdpbk1hbmFnZXIuYWRkKCdDb0M3X0VkaXRvcl9PbkRyb3AnLCBmdW5jdGlvbiAoZWRpdG9yKSB7XHJcbiAgICBlZGl0b3Iub24oJ2Ryb3AnLCBldmVudCA9PiBDb0M3UGFyc2VyLm9uRWRpdG9yRHJvcChldmVudCwgZWRpdG9yKSlcclxuICB9KVxyXG5cclxuICAvLyBBZGQgY3VzdG9tIHBsdWdpbnMgdG8gbGlzdCBvZiBwbHVnaW5zLlxyXG4gIC8vIENPTkZJRy5UaW55TUNFLnBsdWdpbnMgPSBgQ29DN19FZGl0b3JfT25Jbml0IENvQzdfRWRpdG9yX09uRHJvcCAke0NPTkZJRy5UaW55TUNFLnBsdWdpbnN9YFxyXG4gIENPTkZJRy5UaW55TUNFLnBsdWdpbnMgPSBgQ29DN19FZGl0b3JfT25Ecm9wICR7Q09ORklHLlRpbnlNQ0UucGx1Z2luc31gXHJcbiAgLy9cclxuICAvLyAgaWYgKGdhbWUudXNlci5pc0dNKSB7XHJcbiAgLy8gICAgLy8gRGVmaW5lIGNzcyBhbmQgbWVudSBmb3Iga2VlcGVyIG9ubHkgYmxvY2tzXHJcbiAgLy8gICAgQ09ORklHLlRpbnlNQ0UuY29udGVudF9jc3MucHVzaCgnL3N5c3RlbXMvQ29DNy9hc3NldHMvbWNlLmNzcycpXHJcbiAgLy8gICAgQ09ORklHLlRpbnlNQ0Uuc3R5bGVfZm9ybWF0cy5wdXNoKHtcclxuICAvLyAgICAgIHRpdGxlOiAnQ29DNycsXHJcbiAgLy8gICAgICBpdGVtczogW1xyXG4gIC8vICAgICAgICB7XHJcbiAgLy8gICAgICAgICAgdGl0bGU6ICdLZWVwZXIgT25seScsXHJcbiAgLy8gICAgICAgICAgYmxvY2s6ICdzZWN0aW9uJyxcclxuICAvLyAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyLW9ubHknLFxyXG4gIC8vICAgICAgICAgIHdyYXBwZXI6IHRydWVcclxuICAvLyAgICAgICAgfVxyXG4gIC8vICAgICAgXVxyXG4gIC8vICAgIH0pXHJcbiAgLy8gIH0gZWxzZSB7XHJcbiAgLy8gICAgLy8gUHJldmVudCBwbGF5ZXIgdG8gZWRpdCBhbmQgdmlldyBzb3VyY2UgY29kZSBpZiBzZXR0aW5ncyBpcyBkaXNhYmxlZFxyXG4gIC8vICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlUGxheWVyU291cmNlQ29kZScpKVxyXG4gIC8vICAgICAgQ09ORklHLlRpbnlNQ0UudG9vbGJhciA9IENPTkZJRy5UaW55TUNFLnRvb2xiYXIucmVwbGFjZSgnIGNvZGUnLCAnJylcclxuICAvLyAgICAvLyBIaWRlIGtlZXBlciBvbmx5IGJsb2NrcyB0byBwbGF5ZXJzXHJcbiAgLy8gICAgQ09ORklHLlRpbnlNQ0UuY29udGVudF9zdHlsZSA9ICcua2VlcGVyLW9ubHkge2Rpc3BsYXk6IG5vbmV9J1xyXG4gIC8vICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9vbkxlZnRDbGljayAoZXZlbnQpIHtcclxuICByZXR1cm4gZXZlbnQuc2hpZnRLZXlcclxufVxyXG5cclxuQ09ORklHLnVpLnNldHRpbmdzID0gQ29DN1NldHRpbmdzRGlyZWN0b3J5XHJcbkNPTkZJRy51aS5jb21wZW5kaXVtID0gQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnlcclxuQ09ORklHLnVpLmFjdG9ycyA9IENvQzdBY3RvckRpcmVjdG9yeVxyXG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIEhvb2tzLCBSb2xsLCB1aSAqL1xyXG5cclxuLyoqXHJcbiAqQ2FsbG9mQ3RodWxodSg3dGhFZC4pIERlZmluZSB5b3VyIG93biBjb21tYW5kc1xyXG4gKkhlcmUsIHdlIHJlY2VpdmUgdGhlIGNoYXQgTWVzc2FnZXMgYW5kIGRldGVybWluZSBlYWNoIGNvbW1hbmQuXHJcbiAqWy9DQ11EZWZpbmUgYSBjb21tYW5kIHRvIGp1ZGdlIGEgbm9ybWFsIGRpY2UuXHJcbiAqWy9DQlJdIENvbW1hbmQgdG8gZGVmaW5lIHRoZSBkZWNpc2lvbiBvbiBjb21iaW5hdGlvbiByb2xscy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xyXG4gIEhvb2tzLm9uKCdjaGF0TWVzc2FnZScsIChodG1sLCBjb250ZW50KSA9PiB7XHJcbiAgICAvLyBJJ20gY3VycmVudGx5IHVzaW5nIGl0IGZvciB0ZXN0aW5nIGJvbnVzIGRpY2UuXHJcbiAgICBpZiAoY29udGVudC5tYXRjaCgvXlxcLyhjYnJ8Y2MpL2kpKSB7XHJcbiAgICAgIC8vIEV4dHJhY3RpbmcgbnVtYmVycyBmcm9tIGNvbWJpbmF0aW9uIHJvbGxzXHJcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gY29udGVudC5tYXRjaCgvKFxcZCspL2cpXHJcbiAgICAgIGlmIChjb21tYW5kcykge1xyXG4gICAgICAgIG5ldyBSb2xsKCcxZDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KS50aGVuKHIgPT4ge1xyXG4gICAgICAgICAgY29uc3QgcyA9IHIucmVzdWx0XHJcbiAgICAgICAgICBjb25zdCByZXMgPSBjb21tYW5kc1xyXG4gICAgICAgICAgICAubWFwKG0gPT4ge1xyXG4gICAgICAgICAgICAgIGxldCByZXMgPSAnJ1xyXG4gICAgICAgICAgICAgIGlmIChzIDw9IDEpIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gMTAwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcclxuICAgICAgICAgICAgICBlbHNlIGlmIChzIDw9IG0gLyA1KSB7XHJcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtIC8gMikge1xyXG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcclxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDk2KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobSA8IDUwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcclxuICAgICAgICAgICAgICAgIGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxyXG4gICAgICAgICAgICAgIH0gZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXHJcbiAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBmaXJzdCByZXN1bHRzLlxyXG4gICAgICAgICAgICAgIHJlcyArPSAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsdWUnKSArICcgJyArIG1cclxuICAgICAgICAgICAgICByZXR1cm4gcmVzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5qb2luKCcgLyAnKVxyXG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXHJcbiAgICAgICAgICAgIGZsYXZvcjogcmVzXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIGNvbW1hbmQnKVxyXG4gICAgICB9XHJcbiAgICAgIC8vIHJldHVybiB0byBhdm9pZCBlcnJvcnMgaW4gdGhlIGNvbW1hbmQuXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIERyb3BBY3RvclNoZWV0RGF0YSAoYWN0b3IsIHNoZWV0LCBkYXRhKSB7XHJcbiAgaWYgKGRhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGRhdGEuYWN0b3JJZCkge1xyXG4gICAgaWYgKGFjdG9yLmRhdGEuX2lkID09PSBkYXRhLmFjdG9ySWQpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgYWN0b3JGcm9tID0gbnVsbFxyXG4gICAgaWYgKGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWQpIHtcclxuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmVJZCkudG9rZW5zLmdldChkYXRhLnRva2VuSWQpLmFjdG9yXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3RvckZyb20gPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvcklkKVxyXG4gICAgfVxyXG4gICAgc3dpdGNoIChhY3Rvci5kYXRhLnR5cGUpIHtcclxuICAgICAgY2FzZSAnY2hhcmFjdGVyJzpcclxuICAgICAgY2FzZSAnbnBjJzpcclxuICAgICAgY2FzZSAnY3JlYXR1cmUnOlxyXG4gICAgICAgIGlmICghWydjaGFzZSddLmluY2x1ZGVzKGRhdGEuZGF0YS50eXBlKSkge1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3ZlaGljbGUnOlxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICBjYXNlICdjb250YWluZXInOlxyXG4gICAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0b3JGcm9tKSB7XHJcbiAgICAgIGFjdG9yRnJvbS5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhLmRhdGEuX2lkXSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNvQzdEaWNlIiwic3RhdGljIiwibW9kaWYiLCJyb2xsTW9kZSIsImhpZGVEaWNlIiwicm9sbCIsImFsdGVybmF0aXZlRGljZSIsImdhbWUiLCJtb2R1bGVzIiwiZ2V0IiwiYWN0aXZlIiwic2V0dGluZ3MiLCJDb0M3IiwiZGV2IiwiZGljZSIsImFsd2F5c0NyaXQiLCJSb2xsIiwiZnJvbURhdGEiLCJjcml0MDEiLCJhbHdheXNGdW1ibGUiLCJmdW1ibGU5OSIsInJlcGVhdCIsIk1hdGgiLCJhYnMiLCJhc3luYyIsInJlc3VsdCIsInVuaXQiLCJ0b3RhbCIsInJlc3VsdHMiLCJ0ZW5zIiwiZCIsIkNPTkZJRyIsIkRpY2UiLCJ0ZXJtcyIsInQiLCJwdXNoIiwiaW5jbHVkZXMiLCJtYXgiLCJmaWx0ZXIiLCJsZW5ndGgiLCJtaW4iLCJzeW5jRGljZSIsImNoYXREYXRhIiwid2hpc3BlciIsImJsaW5kIiwiQ2hhdE1lc3NhZ2UiLCJhcHBseVJvbGxNb2RlIiwiZGljZTNkIiwic2hvd0ZvclJvbGwiLCJ1c2VyIiwib3B0aW9ucyIsInBvb2wiLCJrZXlzIiwiT2JqZWN0IiwibWFwIiwidiIsInBhcnNlSW50IiwicGVuYWx0eURpY2UiLCJib251c0RpY2UiLCJoYXNEU04iLCJqb2luIiwiZ3JvdXBzIiwiYmFzZURpZSIsImJhc2VTZXQiLCJvdXRwdXQiLCJrZXkiLCJtb2RpZmllciIsIm9mZnNldCIsImNsYXNzIiwiZm9ybXVsYSIsImV2YWx1YXRlZCIsIm51bWJlciIsImZhY2VzIiwibW9kaWZpZXJzIiwib3BlcmF0b3IiLCJDT0M3IiwibnZjdCIsImRya2EiLCJkZHRzIiwiZ2xpdCIsInB1bHAiLCJtZHJuIiwic3RyIiwiY29uIiwic2l6IiwiZGV4IiwiYXBwIiwiaW50IiwicG93IiwiZWR1Iiwibm9hZGp1c3RtZW50cyIsIm5veHBnYWluIiwic3BlY2lhbCIsInJhcml0eSIsImNvbWJhdCIsImZpZ2h0aW5nIiwiZmlyZWFybSIsIm1lbGVlIiwicm5nZCIsIm1udnIiLCJ0aHJvd24iLCJzaG90Z3VuIiwiZGJybCIsImltcGwiLCJicnN0IiwiYXV0byIsImFoZGIiLCJhZGRiIiwic2xudCIsInNwY2wiLCJtb250IiwiYmxzdCIsInN0dW4iLCJyYXJlIiwiYnVybiIsImNhbGwiLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwibW9kZXJuIiwiYWN0b3IiLCJhY3RvcnNoZWV0Iiwic3RhdHVzIiwidGVtcG9JbnNhbmUiLCJpbmRlZkluc2FuZSIsInVuY29uc2Npb3VzIiwiY3JpdGljYWxXb3VuZHMiLCJkeWluZyIsInByb25lIiwiZGVhZCIsIm5ld0Jvb2tOYW1lIiwibmV3U2tpbGxOYW1lIiwibmV3U3BlbGxOYW1lIiwibmV3SXRlbU5hbWUiLCJuZXdXZWFwb25OYW1lIiwiY3JlYXR1cmVGaWdodGluZ1NraWxsIiwiZG9kZ2VTa2lsbE5hbWUiLCJjcmVkaXRSYXRpbmdTa2lsbE5hbWUiLCJDdGh1bGh1TXl0aG9zTmFtZSIsImZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIiwiZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSIsImNvbWJhdENhcmRzIiwiZmlnaHRCYWNrIiwiZG9kZ2UiLCJtYW5ldXZlciIsIm5vUmVzcG9uc2UiLCJDb0M3VXRpbGl0aWVzIiwieCIsImlzTmFOIiwiTnVtYmVyIiwidmFsaWRhdGUiLCJodG1sIiwiY29udGVudCIsIm1hdGNoIiwidG9Mb3dlckNhc2UiLCJzdGFydHNXaXRoIiwic2V0VGltZW91dCIsIl9FeGVjQ29tbWFuZCIsInNwbGl0IiwicmVwbGFjZSIsImNoZWNrIiwiQ29DN0NoZWNrIiwidGhyZXNob2xkIiwiZmxhdERpY2VNb2RpZmllciIsImZsYXRUaHJlc2hvbGRNb2RpZmllciIsImVzY2FwZWQiLCJkaWZmaWN1bHR5IiwiZGlmZmljdWx0eUxldmVsIiwicmVndWxhciIsImRpY2VNb2RpZmllciIsImFzayIsInRocmVzaG9sZFN0ciIsImRpZmZpY3VsdHlTdHIiLCJjb252ZXJ0RGlmZmljdWx0eSIsImRpYWxvZ09wdGlvbnMiLCJhc2tWYWx1ZSIsInVzYWdlIiwiUm9sbERpYWxvZyIsImNyZWF0ZSIsInJhd1ZhbHVlIiwidW5kZWZpbmVkIiwic3BlYWtlciIsImdldFNwZWFrZXIiLCJ0b2tlbiIsInNjZW5lIiwiY2hhdEhlbHBlciIsImdldEFjdG9yRnJvbUtleSIsImFjdG9ycyIsInRvTWVzc2FnZSIsInVpIiwibm90aWZpY2F0aW9ucyIsImluZm9zIiwiYWN0b3JTdHJpbmciLCJ0b2tlbnMiLCJ2YWx1ZXMiLCJmaW5kIiwibmFtZSIsImEiLCJjaGFyIiwiY2hhcktleSIsInNob3J0IiwiaTE4biIsImxvY2FsaXplIiwibGFiZWwiLCJ2YWx1ZSIsImVudHJpZXMiLCJzeXN0ZW0iLCJ0ZW1wbGF0ZSIsIkFjdG9yIiwidGVtcGxhdGVzIiwiY2hhcmFjdGVyaXN0aWNzIiwiU3RyaW5nIiwidW5rbm93biIsImhhcmQiLCJleHRyZW1lIiwiY3JpdGljYWwiLCJza2lsbCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJza2lsbENoZWNrIiwic2hpZnRLZXkiLCJ3YXJuIiwid2VhcG9uIiwiYmFzZUFjdG9yIiwic2NlbmVzIiwiZ2V0RG9jdW1lbnRDbGFzcyIsInRvSlNPTiIsInBhcmVudCIsIndlYXBvbkNoZWNrIiwicm9sbERpY2UiLCJiYXIiLCJkYXRhIiwic2xvdCIsInR5cGUiLCJpdGVtIiwiZnJvbVV1aWQiLCJ1dWlkIiwiY29tbWFuZCIsIkNvQzdJdGVtIiwiaXNBbnlTcGVjIiwibWFjcm8iLCJtYWNyb3MiLCJjb250ZW50cyIsIm0iLCJNYWNybyIsImltZyIsImFzc2lnbkhvdGJhck1hY3JvIiwidG9nZ2xlIiwic2V0IiwiaW5mbyIsInNvY2tldCIsImVtaXQiLCJ1cGRhdGVDaGFyU2hlZXRzIiwiSG9va3MiLCJ1c2VycyIsImNoZWNrT3B0aW9ucyIsInBsYXllclRva2VuSWRzIiwidSIsImNoYXJhY3RlciIsImlkIiwic2VsZWN0ZWRQbGF5ZXJJZHMiLCJjYW52YXMiLCJjb250cm9sbGVkIiwiZm9yRWFjaCIsImNoZWNrZWQiLCJEaWFsb2ciLCJ0aXRsZSIsImJ1dHRvbnMiLCJjYWxsYmFjayIsInRhcmdldHMiLCJhbGwiLCJzdGFydFJlc3QiLCJyZW5kZXIiLCJjaGF0Q29udGVudCIsInF1aWNrSGVhbGVyIiwiaXRlbXMiLCJpc0NyaXRpY2FsV291bmRzIiwiaGFzQ29uZGl0aW9uU3RhdHVzIiwiZGFpbHlTYW5pdHlMb3NzIiwiYXR0cmlicyIsInNhbiIsImRhaWx5TG9zcyIsImhwVmFsdWUiLCJocCIsImhwTWF4IiwibXBWYWx1ZSIsIm1wIiwibXBNYXgiLCJoZWFsQW1vdW50IiwiZm9ybWF0IiwidXBkYXRlIiwiZmxvb3IiLCJob3VycyIsIm1hZ2ljQW1vdW50IiwiY2VpbCIsIkNPTlNUIiwiQ0hBVF9NRVNTQUdFX1RZUEVTIiwiT1RIRVIiLCJmYXN0Rm9yd2FyZCIsImlzR00iLCJ0b2tlbktleSIsInRrIiwic2hlZXQiLCJyZW5kZXJlZCIsImlzT3duZXIiLCJlbnRpdHlUeXBlIiwib3JpZ2luYWxFdmVudCIsImRhdGFMaXN0IiwiSlNPTiIsInBhcnNlIiwiZGF0YVRyYW5zZmVyIiwiZ2V0RGF0YSIsImRvY3VtZW50TmFtZSIsImZvbGRlciIsImVyciIsInRleHQiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3aW5kb3ciLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJ0ZXh0QXJlYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwiYm9keSIsImFwcGVuZENoaWxkIiwiZm9jdXMiLCJzZWxlY3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWNDb21tYW5kIiwiRXJyb3IiLCJyZW1vdmUiLCJjYXRjaCIsImVycm9yIiwic3RyaW5nIiwibGVuIiwicVN0cmluZyIsImN1cnJlbnQiLCJpIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsInRvU3RyaW5nIiwiaiIsIm9iaiIsInBhdGgiLCJwYXJ0cyIsIm8iLCJkb2MiLCJkb2NOYW1lIiwiZG9jSWQiLCJzbGljZSIsImNvbGxlY3Rpb24iLCJpbnN0YW5jZSIsImVtYmVkZGVkTmFtZSIsImVtYmVkZGVkSWQiLCJnZXRFbWJlZGRlZERvY3VtZW50IiwiaWRlbnRpZmllcnMiLCJkcm9wRGF0YSIsImRvY1V1aWQiLCJ0b2tlblV1aWQiLCJzY2VuZUlkIiwidG9rZW5JZCIsImFjdG9ySWQiLCJhY3RvcktleSIsImlzRG9jdW1lbnRVdWlkIiwiaXNEb2N1bWVudFV1aWRQYWNrIiwiU2Zyb21VdWlkIiwidG9rZW5EYXRhIiwiVG9rZW4iLCJkdXBsaWNhdGUiLCJnZXREb2N1bWVudEZyb21LZXkiLCJjb25zdHJ1Y3RvciIsImZvbGRlck5hbWUiLCJpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIiLCJmb2xkZXJzIiwiZW50cnkiLCJGb2xkZXIiLCJleGlzdGluZyIsIm9NIiwic291cmNlIiwic3Vic3RyaW5nIiwicHJvcGVydGllcyIsInBhY2siLCJwYWNrcyIsIm1ldGFkYXRhIiwicGFja2FnZSIsImdldERvY3VtZW50cyIsImZhbGxiYWNrQW55IiwiZ3Vlc3NJdGVtIiwiYiIsIm5vcm1hbGl6ZSIsInRvTG9jYWxlTG93ZXJDYXNlIiwibG9jYWxlQ29tcGFyZSIsImNyZWF0ZUlubGluZVJvbGwiLCJjbHMiLCJkYXRhc2V0IiwiZXNjYXBlIiwic3RyaW5naWZ5IiwiY2xhc3NMaXN0IiwiYWRkIiwiayIsImlubmVySFRNTCIsImlzQ3RybEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5Iiwia2V5Q29kZSIsInRvVXBwZXJDYXNlIiwibWVzc2FnZSIsIm1lc3NhZ2VEYXRhIiwiZmxhdm9yIiwiV0hJU1BFUiIsIlJPTEwiLCJESUNFX1JPTExfTU9ERVMiLCJTRUxGIiwidGhlbiIsIm1zZyIsImdldFRva2VuRnJvbUtleSIsImFsaWFzIiwib2JqZWN0IiwiZWxlbWVudCIsIm9iamVjdE5hbWUiLCJwcm9wIiwiYXR0YWNoT2JqZWN0VG9FbGVtZW50IiwiZGVzZXJpYWxpemUiLCJzIiwib2JqUHJvcCIsImluZGV4T2YiLCJvYmpOYW1lIiwidG9rZW5Eb2MiLCJnZXRBY3RvclRva2VuIiwicHJvdG90eXBlVG9rZW4iLCJ0ZXh0dXJlIiwic3JjIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImdyaWQiLCJ1bml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJzaXplIiwibWVhc3VyZURpc3RhbmNlcyIsImdyaWRTcGFjZXMiLCJlbGV2YXRpb24iLCJzcXJ0IiwiQ29DN1JvbGwiLCJjYXJkIiwicm9sbERpdiIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRPYmplY3RGcm9tRWxlbWVudCIsInJlc3VsdFR5cGUiLCJ0aGlzIiwic3VjY2Vzc0xldmVsIiwiZnVtYmxlIiwiZmFpbHVyZSIsIml0ZW1JZCIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiaGFzQm9udXMiLCJib251cyIsImJvbnVzVHlwZSIsInRlbkRpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGllIiwic2VsZWN0ZWQiLCJpc01heCIsImlzTWluIiwidW5pdERpZSIsImluY3JlYXNlU3VjY2VzcyIsImlzbCIsIm5ld1N1Y2Nlc0xldmVsIiwibHVja05lZWRlZCIsImx1Y2tOZWVkZWRUeHQiLCJsdWNrTmVlZGVkVmFsdWUiLCJyb2xsVHlwZSIsInNpZGUiLCJhY3Rpb24iLCJyZWZNZXNzYWdlSWQiLCJyZWZlcmVuY2VNZXNzYWdlSWQiLCJkaWNlTW9kIiwiaXNGdW1ibGUiLCJpc0NyaXRpY2FsIiwiY2hhcmFjdGVyaXN0aWMiLCJpc1Rva2VuIiwiaHRtbEVsZW1lbnQiLCJnZXRGcm9tQ2hlY2siLCJhdHRhY2hUb0VsZW1lbnQiLCJDb0M3RGFtYWdlIiwiZGFtYWdlU3RyaW5nIiwiZGFtYWdlIiwicm9sbHMiLCJyIiwiQ2hhdENhcmRBY3RvciIsImRpc3BsYXlBY3Rvck9uQ2FyZCIsImlzQmxpbmQiLCJfaXNCbGluZCIsIl9yb2xsTW9kZSIsInRhcmdldGVkVG9rZW5zIiwidGFyZ2V0IiwidGFyZ2V0VG9rZW4iLCJ0YXJnZXRBY3RvciIsIl90YXJnZXRUb2tlbiIsIl90YXJnZXRLZXkiLCJwb3AiLCJfdGFyZ2V0QWN0b3IiLCJ0YXJnZXRLZXkiLCJoYXNUYXJnZXQiLCJza2lsbHMiLCJnZXRXZWFwb25Ta2lsbHMiLCJ0YXJnZXRJbWciLCJnZXRBY3RvckltZ0Zyb21LZXkiLCJ0YXJnZXROYW1lIiwiYWN0b3JJbWciLCJzcGVha2VyRGF0YSIsImdldFdoaXNwZXJSZWNpcGllbnRzIiwicmVwbGFjZXIiLCJKU09OUm9sbERhdGEiLCJTYW5DaGVja0NhcmQiLCJzYW5EYXRhIiwic3VwZXIiLCJCb29sZWFuIiwic2FuUmVhc29uIiwic2FuTW9kaWZpZXIiLCJzYW5EaWZmaWN1bHR5Iiwic3RhdGUiLCJzYW5Mb3NzU291cmNlIiwiaW52b2x1bnRhcnlBY3Rpb24iLCJzYW5Sb2xsZWQiLCJzYW5DaGVjayIsImlzRmFpbHVyZSIsInNhbkxvc3NGb3JtdWxhIiwic2FuTWF4IiwiZmFpbGVkIiwic2FuTWluIiwicGFzc2VkIiwic2FuTG9zdFRvUmVhc29uIiwibWF4UG9zc2libGVTYW5Mb3NzIiwibWF4TG9zc1RvU2FuUmVhc29uIiwibWF4U2FuTG9zcyIsImV2YWx1YXRlIiwibWF4aW1pemUiLCJzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQiLCJmaXJzdEVuY291bnRlciIsIm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQiLCJpc0FjdG9yTG9vc2luZ1NhbiIsImhhc1RlbXBvSW5zYW5lIiwiaW1tdW5lVG9DcmVhdHVyZSIsImJvdXREdXJhdGlvblRleHQiLCJib3V0RHVyYXRpb24iLCJib3V0UmVhbFRpbWUiLCJib3V0U3VtbWFyeSIsInlvdUdhaW5DdGh1bGh1TXl0aG9zU3RyaW5nIiwibXl0aG9zR2FpbiIsImtlZXBDcmVhdHVyZVNhbkRhdGEiLCJmaW5pc2giLCJhcHBseVNhbkxvc3MiLCJib3V0UmVzdWx0IiwiZW50ZXJCb3V0T2ZNYWRuZXNzIiwiYm91dE9mTWFkbmVzc1Jlc29sdmVkIiwiYm91dE9mTWFkbmVzc092ZXIiLCJ0cmlnZ2VySW5zYW5pdHkiLCJ1bnNldENvbmRpdGlvbiIsImN0aHVsaHVNeXRob3NBd2FyZGVkIiwiYW1vdW50R2FpbmVkIiwiZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkiLCJjdGh1bGh1TXl0aG9zU2tpbGwiLCJvbGRWYWx1ZSIsImFkanVzdG1lbnRzIiwiZXhwZXJpZW5jZSIsImlzQnlwYXNzZWQiLCJhdHRyaWJ1dGUiLCJfcGVyZm9ybSIsImZvcmNlRFNOIiwiaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQiLCJzYW5Mb3NzUm9sbGVkIiwiaWdub3JlU2FuQ2hlY2siLCJzYW5Mb3NzIiwibGltaXRlZExvc3NUb0NyZWF0dXJlIiwibWluaW1pemUiLCJpbW11bmVBbHJlYWR5SW5Cb3V0Iiwic2FuTG9zc0FwcGxpZWQiLCJpbnRSb2xsZWQiLCJpbnNhbml0eSIsInNhbkxvc3NSb2xsIiwic2hvd1JvbGxEaWNlM2QiLCJsb29zZVNhbiIsImFjdG9yTG9zdFNhbiIsInBlcm1hbmVudGx5SW5zYW5lIiwiaGFzSW5kZWZJbnNhbmUiLCJzaGFrZW4iLCJpbnNhbml0eVRhYmxlUm9sbGVkIiwiZGFpbHlTYW5Mb3NzIiwiZGFpbHlTYW5MaW1pdCIsInRlbXBvcmFyeUluc2FuZSIsImluZGVmaW5pdGVseUluc2FuZSIsIm1lbW9yeVJlcHJlc3NlZCIsImludENoZWNrIiwiaW50RGlmZmljdWx0eSIsImludE1vZGlmaWVyIiwiYWxyZWFkeUluc2FuZSIsInNldENvbmRpdGlvbiIsInNldFJlYXNvblNhbkxvc3MiLCJfX2lubGluZVNhbkNoZWNrIiwiaW5saW5lQ2hlY2siLCJvdXRlckhUTUwiLCJfX2lubGluZVNhbkxvc3NSb2xsIiwiX19pbmxpbmVJbnRDaGVjayIsInJlbmRlclRlbXBsYXRlIiwiaHRtbENhcmRFbGVtZW50IiwiJCIsInBhcnNlSFRNTCIsImNoYXRNZXNzYWdlIiwibWVzc2FnZXMiLCJtZXNzYWdlSWQiLCJjaGF0IiwidXBkYXRlTWVzc2FnZSIsImFyZ3MiLCJjaGF0Q2FyZCIsInNheSIsImh0bWxDYXJkIiwiZ2V0RnJvbUNhcmQiLCJzYW5DaGVja0NhcmREYXRhIiwidW5lc2NhcGUiLCJzYW5DaGVja0NhcmQiLCJhc3NpZ24iLCJjbG9zZXN0IiwiQ29DN0NvbkNoZWNrIiwiZGVueVB1c2giLCJfYWN0b3JJZCIsImlzU3VjY2VzcyIsImlzUm9sbGVkIiwiY29uQ2hlY2siLCJodG1sQ2hlY2siLCJnZXRGcm9tRWxlbWVudCIsInJvbGxDb24iLCJyZXBsYWNlV2l0aCIsImdldENoZWNrRWxlbWVudCIsImhpZGVEaWNlUmVzdWx0Iiwic3RheUFsaXZlIiwiYXBwbGllZCIsIlNraWxsU2VsZWN0RGlhbG9nIiwiYWN0aXZhdGVMaXN0ZW5lcnMiLCJjbGljayIsIl9vblNlbGVjdFNraWxsQ2xpY2tlZCIsImxpIiwiY3VycmVudFRhcmdldCIsImluZGV4IiwiZGlzcGxheSIsImFkZGVkIiwiaW5uZXJUZXh0Iiwib3B0aW9uc0NvdW50IiwiY2xvc2UiLCJjbGFzc2VzIiwiUG9pbnRTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbkNsaWNrZWQiLCJpdGVtTGlzdCIsIm9wdGlvbmFsIiwidG9nZ2xlQ2xhc3MiLCJtdWx0aXBsaWVyIiwicmVzb2x2ZWQiLCJjb250YWlucyIsIkNoYXJhY1NlbGVjdERpYWxvZyIsIkNoYXJhY1JvbGxEaWFsb2ciLCJyb2xsZWQiLCJvbiIsIl9vbkNoYW5nZUlucHV0IiwiX29uU3VibWl0IiwiX29uUm9sbENoYXJhY3RlcmlzdGljIiwiX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25SZXNldENoYXJhY3RlcmlzdGljIiwiX29uQnV0dG9uIiwiY2hhcmFjS2V5Iiwicm9sbENoYXJhY3RlcmlzdGljIiwiaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyIsImRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJyZXNldENoYXJhY3RlcmlzdGljIiwiY2hlY2tUb3RhbCIsImlucHV0IiwiX2VsZW1lbnQiLCJsaXN0IiwicG9pbnRzIiwidmFsaWRhdGlvbiIsImVuYWJsZWQiLCJlbCIsInBvaW50c1dhcm5pbmciLCJTa2lsbFNwZWNTZWxlY3REaWFsb2ciLCJzcGVjaWFsaXphdGlvbk5hbWUiLCJiYXNlVmFsdWUiLCJoYXNTa2lsbHMiLCJiYXNlIiwiZm9ybURhdGEiLCJkbGciLCJzcGVjaWFsaXphdGlvbiIsIkZvcm1EYXRhIiwiZGVmYXVsdCIsIkNvQzdNZWxlZVJlc29sdGlvbiIsImluaXRpYXRvck1lc3NhZ2UiLCJ0YXJnZXRNZXNzYWdlIiwiQ29DN01lbGVlVGFyZ2V0IiwiZ2V0RnJvbU1lc3NhZ2VJZCIsImluaXRpYXRvciIsIkNvQzdNZWxlZUluaXRpYXRvciIsImluaXRpYXRvclRva2VuIiwicmVzdWx0U3RyaW5nIiwicm9sbERhbWFnZSIsIndpbm5lciIsIndpbm5lckltZyIsIndpbm5lclRpdGxlIiwibG9vc2VyIiwiY3JpdGljYWxEYW1hZ2UiLCJkb2N1bW1lbnQiLCJwYXJlbnRNZXNzYWdlSWQiLCJpbml0aWF0b3JLZXkiLCJvdXRudW1iZXJlZCIsInN1cnByaXNlZCIsImF1dG9TdWNjZXNzIiwiYWR2YW50YWdlIiwiZGlzYWR2YW50YWdlIiwiZG9kZ2luZyIsIm5vdFJlc3BvbmRpbmciLCJmaWdodGluZ0JhY2siLCJtYW5ldXZlcmluZyIsImFjdGlvblNlbGVjdGVkIiwiX2luaXRpYXRvcktleSIsIl9pbml0aWF0b3IiLCJtZWxlZUluaXRpYXRvciIsInB1Ymxpc2hVcGRhdGUiLCJmbGFnIiwiY2FtZWxGbGFnIiwiaHlwaGVuVG9DYW1lbENhc2UiLCJ0b2dnbGVGbGFnIiwidXBkYXRlQ2hhdENhcmQiLCJmbGFnTmFtZSIsIm93bmVycyIsImdtcyIsIm93bmVyc2hpcCIsIkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMiLCJPV05FUiIsInByb21wdCIsIndlYXBvbklkIiwicHVibGlzaCIsImlzVW5rb253biIsInJlc29sdXRpb25DYXJkIiwicmVzb2x1dGlvbk1lc3NhZ2UiLCJwcmVDcmVhdGVNZXNzYWdlIiwicm9sbEljb25zIiwicm9sbENvbG9yIiwicm9sbFRpdGxlIiwic3VjY2VzcyIsInVwZ3JhZGVSb2xsIiwibHVja0Ftb3VudCIsIm5ld1N1Y2Nlc3NMZXZlbCIsIm9sZENhcmQiLCJzcGVuZEx1Y2siLCJsdWNrU3BlbnQiLCJwcm9jZXNzZWQiLCJkaWNlUm9sbHMiLCJyZXN1bERldGFpbHMiLCJkaWNlVG90YWwiLCJDb0M3Q2hhdCIsIkNvQzdSYW5nZUluaXRpYXRvciIsImNvdmVyIiwidGFyZ2V0Q2FyZCIsInNpbmdsZVNob3QiLCJtdWx0aXBsZVNob3RzIiwiYnVyc3QiLCJmdWxsQXV0byIsImFpbWVkIiwidG90YWxCdWxsZXRzRmlyZWQiLCJfdGFyZ2V0cyIsIkNvQzdSYW5nZVRhcmdldCIsImdldERpc3RhbmNlIiwicm91bmRlZERpc3RhbmNlIiwicm91bmQiLCJkaXN0YW5jZVVuaXQiLCJkaXN0SW5ZZCIsInRvWWFyZHMiLCJwb2ludEJsYW5rUmFuZ2UiLCJiYXNlUmFuZ2UiLCJsb25nUmFuZ2UiLCJleHRyZW1lUmFuZ2UiLCJvdXRPZlJhbmdlIiwibWFpbldlYXBvblNraWxsIiwibWFpbiIsImF1dG9XZWFwb25Ta2lsbCIsImFsdGVybmF0aXYiLCJhdXRvRmlyZSIsIm11bHRpVGFyZ2V0IiwiYWltaW5nIiwiX2FpbWluZyIsImdldEFjdG9yRmxhZyIsImFjdGl2ZVRhcmdldCIsInNob3RzIiwiX3Nob3RzIiwiY3VycmVudFNob3RSYW5rIiwiYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkiLCJzaG90RGlmZmljdWx0eSIsImRpZEFueVNob3RIaXQiLCJhbnlIaXQiLCJzdWNjZXNzZnVsSGl0cyIsImhpdHMiLCJoaXQiLCJzaG90Iiwic2hvdEZpcmVkIiwidG90YWxBbW1vIiwiZ2V0QnVsbGV0TGVmdCIsIm1heFNob3RzIiwidXNlc1BlclJvdW5kIiwiaWdub3JlQW1tbyIsImlnbm9yZVVzZXNQZXJSb3VuZCIsIm91dE9mQW1tbyIsIm91dE9mU2hvdHMiLCJ2b2xsZXlTaXplIiwiX3ZvbGxleVNpemUiLCJpc1ZvbGxleU1pblNpemUiLCJpc1ZvbGxleU1heFNpemUiLCJnZXRUYXJnZXRGcm9tS2V5IiwiY2FsY1RhcmdldHNEaWZmaWN1bHR5IiwicmFuZ2UiLCJub3JtYWwiLCJsb25nIiwiZGlmZmljdWx0eU5hbWUiLCJyZWxvYWQiLCJpbXBvc3NpYmxlIiwibGV2ZWwiLCJhZGRTaG90QXRDdXJyZW50VGFyZ2V0IiwiYWN0b3JOYW1lIiwiYnVsbGV0c1Nob3QiLCJ0cmFuc2l0QnVsbGV0cyIsImJ1bGxldHNTaG90VHJhbnNpdCIsInRyYW5zaXQiLCJidWxsZXRMZWZ0IiwicHJldmlvdXNTaG90Iiwid2VhcG9uTWFsZnVuY3Rpb24iLCJzaG9vdEF0VGFyZ2V0Iiwic2hvb3RCdWxsZXRzIiwiaGFzTWFsZnVuY3Rpb24iLCJidWxsZXRGaXJlZCIsImRldGFpbHMiLCJjaGFuZ2VWb2xsZXlTaXplIiwicGFzc1JvbGwiLCJyb2xsSW5kZXgiLCJ1cGdyYWRlaW5kZXgiLCJpbmNyZWFzZWRTdWNjZXNzIiwicmFuZ2VJbml0aWF0b3IiLCJjYXJkVGFyZ2V0cyIsImNhcmRTaG90cyIsImRhbWFnZVJvbGxzIiwiZHIiLCJkYW1hZ2VSb2xsIiwiaCIsImRhbWFnZUZvcm11bGEiLCJkYW1hZ2VEaWUiLCJnZXRNYWluRGllIiwibWF4RGFtYWdlIiwiY3JpdGljYWxEYW1hZ2VGb3JtdWxhIiwiaW1wYWxlIiwiY3JpdGljYWxEYW1hZ2VEaWUiLCJpbXBhbGluZ1Nob3RzIiwic3VjY2Vzc2Z1bFNob3RzIiwiZGVhbHQiLCJkYW1hZ2VSb2xsZWQiLCJkSW5kZXgiLCJ0b3RhbFRha2VuIiwidG90YWxBYnNvcmJlZCIsInJJbmRleCIsImRlYWx0QW1vdW50IiwiZGVhbERhbWFnZSIsInRha2VuIiwiYWJzb3JiZWQiLCJhcm1vciIsImRhbWFnZURlYWx0IiwiaW5NZWxlZSIsImJpZyIsIl9iaWciLCJidWlsZCIsInNtYWxsIiwiX3NtYWxsIiwiaXNGYXN0IiwibW92IiwiZmFzdCIsIl9mYXN0IiwiX2FjdG9yIiwiX3Rva2VuIiwic2l6ZVRleHQiLCJzaXplTGFiZWwiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJtZXJnZU9iamVjdCIsImRlZmF1bHRPcHRpb25zIiwiY3NzQ2xhc3NlcyIsIm9wdGlvbm5hbENoYXREYXRhIiwiZGF0YVN0cmluZyIsImNhcmRDbGFzcyIsImNvbXB1dGUiLCJjbG9zZWQiLCJzZXRGbGFnIiwiX29uVG9nZ2xlIiwiX29uS2V5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNhcmRzIiwiZnJvbUhUTUxDYXJkRWxlbWVudCIsInR5cGVkQ2FyZCIsImFzc2lnbk9iamVjdCIsIl91cGRhdGUiLCJmb3JtcyIsInVwZGF0ZXMiLCJmb3JtIiwiRm9ybURhdGFFeHRlbmRlZCIsInRvT2JqZWN0IiwiZGlmZk9iamVjdCIsImV4cGFuZE9iamVjdCIsIl9tZXNzYWdlIiwiX21lc3NhZ2VJZCIsImV4Y2x1ZGUiLCJleGNsdWRlU3RhcnRXaXRoIiwiZnJvbU1lc3NhZ2UiLCJjYXJkRWxlbWVudCIsImNhcmREYXRhIiwidW5zZXRGbGFnIiwiaXNUYXJnZXRPd25lciIsImlzS2VlcGVyIiwiRGFtYWdlQ2FyZCIsImNvbmNhdCIsIl9pbXBhbGUiLCJpc0RhbWFnZUZvcm11bGEiLCJpc0RhbWFnZU51bWJlciIsImlzQXJtb3JGb3J1bGEiLCJ0b3RhbERhbWFnZVN0cmluZyIsImlnbm9yZUFybW9yIiwibm9EYW1hZ2UiLCJoYXJkcm9sbGVkIiwiZGFtYWdlSW5mbGljdGVkIiwiX2h0bWxJbmxpbmVSb2xsIiwiX2h0bWxSb2xsIiwicm9sbEFybW9yIiwic2VsZWN0ZWRQbGF5ZXJzIiwib25lIiwiaWNvbiIsImNvbmZpcm1EYW1hZ2UiLCJ0d28iLCJpbmNsdWVzIiwiZGIiLCJyb2xsU3RyaW5nIiwiX2FybW9yIiwiUm9sbENhcmQiLCJnZXRIdG1sUm9sbCIsInNwYW4iLCJmcm9tTWVzc2FnZUlkIiwiZGVmYXVsdENvbmZpZyIsImdldEZsYWciLCJ0aW1lc3RhbXAiLCJEYXRlIiwicHJvY2VzcyIsImNvbmZpZyIsImZsYWdzIiwidXBkYXRlUm9sbCIsImZyb21HTSIsInJhbmsiLCJhZGRSb2xsRGF0YSIsImFkZFJvbGwiLCJyZW1vdmVSb2xsIiwic3BsaWNlIiwid2lubmVycyIsImxvb3NlcnMiLCJoYXNXaW5uZXIiLCJPcHBvc2VkQ2hlY2tDYXJkIiwiX29uQ2xpY2siLCJhdHRhY2tlclJvbGwiLCJhdHRhY2tlciIsImRlZmVuZGVyUm9sbCIsImRlZmVuZGVyIiwiZGVmZW5kZXJJc0RvZGdpbmciLCJkb2RnZVNraWxsIiwiYWR2YW50YWdlQXR0YWNrZXIiLCJfYWEiLCJ3aW5uZXJSb2xsc0RhbWFnZSIsIl9hZCIsImFkdmFudGFnZURlZmVuZGVyIiwiaXNUaWUiLCJ3aW5uZXJDb3VudCIsIm5lZWRzVGllQnJlYWtlciIsImNvdW50IiwiaXNBdHRhY2tNYW5ldXZlciIsInJlc3VsdFRleHQiLCJjbG9zZUNhcmQiLCJkYW1hZ2VDaGF0Q2FyZCIsImlzRXh0cmVtZVN1Y2Nlc3MiLCJhbHRlciIsInNvcnQiLCJ0aWUiLCJtb2RpZmllZFJlc3VsdCIsIndpbkNvdW50IiwiQ29tYmluZWRDaGVja0NhcmQiLCJzdWNjZXNzQ291bnQiLCJtYWluQWN0b3JLZXkiLCJhbnkiLCJjaGVja0dNSW5pdGlhdG9yIiwiX3JvbGwiLCJzaWxlbnQiLCJoaWRlU3VjY2VzcyIsImFzc2lnblJvbGwiLCJjb21iaW5lZFJvbGwiLCJBdWRpb0hlbHBlciIsInBsYXkiLCJzb3VuZHMiLCJDSEFUX0NPQzdfTUVTU0FHRSIsInBsYXllcnMiLCJHTVNlbGZSb2xsIiwicmVtb3ZlV2lzcGVyVGFyZ2V0cyIsImZha2VSb2xsIiwiX29uQ2hhdENhcmRBY3Rpb24iLCJfb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQiLCJfb25DaGF0Q2FyZFJhZGlvU3dpdGNoIiwiX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2giLCJfb25DaGF0Q2FyZFZvbGxleVNpemUiLCJfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCIsIl9vblRvZ2dsZVNlbGVjdGVkIiwiX29uVGFyZ2V0U2VsZWN0IiwiX29uT3BlbkFjdG9yIiwiQ29DN1BhcnNlciIsIl9vbkNoZWNrIiwiX29uRHJhZ0NvQzdMaW5rIiwiX29uSW5saW5lIiwiYmluZExpc3Rlcm5lcnMiLCJzY3JvbGxCb3R0b20iLCJjaGVja1JldmVhbGVkIiwicmV2ZWFsQ2hlY2siLCJiaW5kTGlzdGVuZXJzIiwicmVtb3ZlQ2xhc3MiLCJtb3VzZWxlYXZlIiwiZGVmZW5kYW50SWQiLCJpbml0aWF0b3JJZCIsInVwZGF0ZUNvbWJhdENhcmRUYXJnZXQiLCJ1c2VyT25seSIsImdldEF0dHJpYnV0ZSIsImdtT25seSIsInpvbmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlbGVtIiwiZ21WaXNpYmxlT25seSIsImlzVHJ1c3RlZCIsIm93bmVyVmlzaWJsZU9ubHkiLCJfZ2V0QWN0b3JGcm9tS2V5IiwiX2dldENoYXRDYXJkQWN0b3IiLCJwYXJlbnRFbGVtZW50Iiwib3duZXJPbmx5IiwiZ21TZWxlY3RPbmx5IiwiYWN0aW9uVHlwZVN0cmluZyIsInRhcmdldHNTZWxlY3RvciIsImJvcmRlciIsInRhcmdldFRvRGlzcGxheSIsInVwZGF0ZVNlbGVjdGVkIiwiZHJvcERvd25Cb3hlcyIsImRwZG5Cb3giLCJzZWxlY3RlZEJveCIsImJ1dHRvbiIsImFjdGlvblR5cGUiLCJkZWZlbmRlckNob2ljZSIsInNraWxsVmFsdWUiLCJza2lsbE5hbWUiLCJpdGVtTmFtZSIsIndlYXBvbk5hbWUiLCJfY29sbGFwc2VJbmxpbmVSZXN1bHQiLCJfZXhwYW5kSW5saW5lUmVzdWx0Iiwib3B0aW9uTGlzdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwcm9wZXJ0eSIsInJhbmdlQ2FyZCIsInVwZGF0ZUNhcmRTd2l0Y2giLCJvd25uZXIiLCJnZXRUb2tlbiIsIm1lc3NJZCIsIm9yaWdpbk1lc3NhZ2UiLCJtZWxlZUNhcmQiLCJyb2xsUmVzdWx0IiwidXBncmFkZUluZGV4IiwiZm9yY2VQYXNzIiwidXBncmFkZUNoZWNrIiwiZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciIsIm5ld0NhcmQiLCJjbG9uZU5vZGUiLCJwdXNoZWRSb2xsIiwiZGVmZW5kZXJLZXkiLCJnZXRBY3RvckZyb21Ub2tlbiIsInJlc3BvbnNlVHlwZSIsInBlcmZvcm1Ta2lsbENoZWNrIiwicHVibGlzaENoZWNrUmVzdWx0IiwicHVibGlzaE5vUmVwb25zZVJlc3VsdCIsImRlYWxlciIsInJlc29sdmVDYXJkIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJzdGFuZGJ5IiwiZm9yY2VSb2xsIiwiZmxhZ0ZvckRldmVsb3BlbWVudCIsImNsZWFyU2FuTG9zc1JlYXNvbiIsInJvbGxTYW4iLCJhZHZhbmNlU3RhdGUiLCJyb2xsU2FuTG9zcyIsInJvbGxJbnQiLCJDb0M3c29ja2V0IiwiZXhlY3V0ZUFzR00iLCJfaWQiLCJyb2xsRGFtYWdlQnV0dG9uIiwiQ29DQWN0b3IiLCJjb250ZXh0IiwiZG9jdW1lbnRDbGFzc2VzIiwiZXh0ZW5kZWQiLCJpbml0aWFsaXplIiwiY3JlYXR1cmVJbml0IiwicHJlcGFyZUJhc2VEYXRhIiwiZGFpbHlMaW1pdCIsIm9uZUZpZnRoU2FuaXR5IiwicmF3TW92IiwicmF3RGIiLCJyYXdCdWlsZCIsInByZXBhcmVFbWJlZGRlZERvY3VtZW50cyIsInByZXBhcmVEZXJpdmVkRGF0YSIsInJhd0hwTWF4IiwicmF3TXBNYXgiLCJyYXdTYW5NYXgiLCJmaWx0ZXJNYXRyaXgiLCJjaGFuZ2VzIiwiZWZmZWN0cyIsInJlZHVjZSIsImUiLCJkaXNhYmxlZCIsImlzU3VwcHJlc3NlZCIsImMiLCJmb3VuZHJ5IiwidXRpbHMiLCJlZmZlY3QiLCJwcmlvcml0eSIsIm1vZGUiLCJzZWxlY3RDaGFuZ2VzIiwiY2hhbmdlIiwiYXBwbHkiLCJhY3RvckxpbmsiLCJkaXNwb3NpdGlvbiIsInNpZ2h0IiwiZGV0ZWN0aW9uTW9kZXMiLCJjaGVja1VuZGVmaW5lZEF1dG8iLCJyZXR1cm5EYXRhIiwic2hvcnROYW1lIiwiY3JlYXRlRGF0YSIsImdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0IiwiaGFzQ29uZGl0aW9uVmFsdWUiLCJwb3J0cmFpdCIsInJlYWxUaW1lIiwiZHVyYXRpb24iLCJib3V0T2ZNYWRuZXNzVGFibGVJZCIsImRlc2NyaXB0aW9uIiwiYm91dE9mTWFkbmVzc1RhYmxlIiwidGFibGVzIiwidGFibGVSb2xsIiwiVEFCTEVfUkVTVUxUX1RZUEVTIiwiRE9DVU1FTlQiLCJkb2N1bWVudElkIiwiVGV4dEVkaXRvciIsImVucmljaEhUTUwiLCJpdGVtRGF0YSIsImNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwiVEVYVCIsImdldE5hbWVQYXJ0c1NwZWMiLCJzaG93U2hlZXQiLCJlbXB0eVNraWxsIiwicmVuZGVyU2hlZXQiLCJmaXJlYXJtcyIsInNraWxsRGF0YSIsInBlcnNvbmFsIiwib2NjdXBhdGlvbiIsImFyY2hldHlwZSIsImdldFNraWxsc0J5TmFtZSIsImF0dGFjayIsIndwblR5cGUiLCJjcmVhdGVkQXR0YWNrIiwiY29uc29sZSIsInNldEFjdG9yRmxhZyIsInF1YW50aXR5IiwiZ2V0SXRlbUlkQnlOYW1lIiwiY3JlYXRlQm9vayIsImNyZWF0ZVNwZWxsIiwiZW1wdHlTcGVsbCIsImNyZWF0ZVNraWxsIiwiY3JlYXRlSXRlbSIsIndlYXBvblByb3BlcnRpZXMiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImJpbyIsImJpb2dyYXBoeSIsImFyZWFOYW1lIiwiZGF0YUFycmF5IiwicHJvY2Vzc2VkRGF0YUFycmF5IiwiYmFzZUNhbGN1bGF0ZWQiLCJjYWxjdWxhdGVCYXNlIiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJza2lsbExpc3QiLCJleGlzdGluZ0l0ZW0iLCJzZXRJdGVtRmxhZyIsImdldE5hbWVXaXRob3V0U3BlYyIsIm1haW5Ta2lsbCIsImNyZWF0ZVdlYXBvblNraWxsIiwic2Vjb25kU2tpbGwiLCJlbmFibGVDaGFyYWN0ZXJpc2l0aWNzIiwiZ2V0Q2hhcmFjdGVyaXN0aWMiLCJsdWNrIiwidXBkYXRlRGF0YSIsIml0Iiwib3RoZXJzSXRlbXMiLCJhZGRVbmlxdWVJdGVtcyIsImFkZEl0ZW1zIiwiYmFja3N0b3J5Iiwic2VjdGlvbk5hbWUiLCJiaW9TZWN0aW9ucyIsImNyZWF0ZUJpb1NlY3Rpb24iLCJyZXNldEFyY2hldHlwZSIsImNvbmZpcm0iLCJ5ZXMiLCJkZWZhdWx0WWVzIiwiY29yZUNoYXJhYyIsImNvcmVDaGFyYWN0ZXJpc3RpY3MiLCJjaGFyYWMiLCJjaGFyRGlhbG9nRGF0YSIsImNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhIiwicmVzZXRPY2N1cGF0aW9uIiwicG9pbnRzRGlhbG9nRGF0YSIsIm9jY3VwYXRpb25Ta2lsbFBvaW50cyIsIm9wdGlvbmFsQ2hhciIsImRpYWxvZ0RhdGEiLCJza2lsbENvdW50IiwibWVyZ2VkIiwibWVyZ2VPcHRpb25hbFNraWxscyIsImNyZWRpdFJhdGluZ1NraWxsIiwiY3JlZGl0UmF0aW5nIiwiYXJjaGV0eXBlUG9pbnRzIiwib2NjdXBhdGlvblBvaW50cyIsInBlcnNvbmFsUG9pbnRzIiwiZ2V0SXRlbXNCeU5hbWUiLCJwYXJzZUZvcm11bGEiLCJwYXJzZWRGb3JtdWxhIiwicGFyc2VkIiwiZ2V0UHJvcGVydHkiLCJjaGFyTmFtZSIsImF0dHJpYk5hbWUiLCJsY2siLCJjYXJkVHlwZSIsIkNvQzdDaGF0TWVzc2FnZSIsIkNBUkRfVFlQRV9OT1JNQUwiLCJwcmV2ZW50U3RhbmRieSIsInRyaWdnZXIiLCJlcmFzZU9sZCIsIm9jY3VwYXRpb25Ta2lsbCIsImdldEl0ZW1GbGFnIiwidW5zZXRJdGVtRmxhZyIsImRlbGV0ZSIsImFyY2hldHlwZVNraWxsIiwic2V0THVjayIsImdldFJlYXNvblNhbkxvc3MiLCJzYW5pdHlMb3NzRXZlbnRzIiwidG90YWxMb3NzIiwiaW1tdW5pdHkiLCJmaW5kSW5kZXgiLCJyaWdodCIsInNhbk1heEZvcm11bGEiLCJzYW5pdHlMb3NzRXZlbnQiLCJzZXRTYW4iLCJjaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja0ZhaWxsZWQiLCJjaGVja0ZhaWxsZWQiLCJzYW5Mb3NzTWF4Iiwic2FuTG9zc01pbiIsImN0aHVsaHVNeXRob3MiLCJvY2N1cGF0aW9uUG9pbnRzU3BlbnQiLCJhcmNoZXR5cGVQb2ludHNTcGVudCIsImJvbnVzUG9pbnRzIiwiZXhwZXJpZW5jZVBvaW50cyIsInBlcnNvbmFsUG9pbnRzU3BlbnQiLCJoYXNEZXZlbG9wbWVudFBoYXNlIiwiZGV2ZWxvcGVtZW50Iiwib25seVJ1bk9uY2VQZXJTZXNzaW9uIiwibG9zcyIsImF0dHJpYiIsInVwZGF0ZWRLZXkiLCJzZXRBdHRyaWJBdXRvIiwic3VtIiwiTU9WIiwiYWdlIiwibG9ja2VkIiwiZ2V0SXRlbXNGcm9tTmFtZSIsImZsYWdWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwicm9sbEF0dHJpYnV0ZSIsImNoYXJhY3RlcmlzdGljTmFtZSIsImRpc3BsYXlOYW1lIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJfcmF3VmFsdWUiLCJ1cGRhdGVWYWx1ZSIsIndlYXBvbkRhdGEiLCJ3ZWFwb25zIiwiY3JlYXRlQ2hhdENhcmQiLCJoYXNHdW4iLCJkZW55THVjayIsImRlbnlCbGluZFRhbXBlcmluZyIsImZyb21VdWlkU3luYyIsInVzZXNBbHRlcm5hdGl2ZVNraWxsIiwibWF0Y2hlcyIsImV4ZWMiLCJhdHRyaWJLZXkiLCJhdHRyIiwicGlsb3RTa2lsbHMiLCJkcml2ZVNraWxscyIsInJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlIiwiYXZlcmFnZSIsImNoYXJWYWx1ZSIsInNraWxsc1JvbGxlZCIsImRldmVsb3BlbWVudEZsYWciLCJEaWUiLCJhdWdtZW50Iiwic2tpbGxNYXN0ZXJpbmdNZXNzYWdlIiwiYXVnbWVudERpZSIsImF1Z21lbnRTQU5EaWUiLCJzYW5HYWluZWQiLCJzYW5HYWluZWRNZXNzYWdlIiwiZGVidWciLCJzY29yZSIsImluY3JlYXNlRXhwZXJpZW5jZSIsInVuZmxhZ0ZvckRldmVsb3BlbWVudCIsImNoYW5nZWQiLCJjcmVhdGVNZXNzYWdlIiwiY3VycmVudEx1Y2siLCJwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2siLCJoaWdoZXJUaGFuQ3VycmVudEx1Y2siLCJhdWdtZW50Um9sbCIsImF1Z21lbnRWYWx1ZSIsImNvbmRpdGlvbk5hbWUiLCJjb25kaXRpb25WYWx1ZSIsImNvbmRpdGlvbnMiLCJmaWVsZCIsImZvcmNlVmFsdWUiLCJjb3JlIiwic3RhdHVzSWQiLCJjdXN0b20iLCJvdmVybGF5Iiwicm91bmRzIiwic2Vjb25kcyIsInN0YXR1c0VmZmVjdHMiLCJlZmZlY3REYXRhIiwidXBkYXRlRW1iZWRkZWREb2N1bWVudHMiLCJmaWVsZHMiLCJqdXN0VGhpcyIsImRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzIiwiY291bnRlciIsImZpZ2h0aW5nU2tpbGxzIiwic29ydEJ5TmFtZUtleSIsImNsb3NlQ29tYmF0V2VhcG9ucyIsIndlYXBvbkxpc3QiLCJmaXJlYXJtU2tpbGxzIiwiQ00iLCJteXRob3NIYXJkZW5lZCIsIkNSIiwic3BlbmRpbmdMZXZlbCIsImNhc2giLCJhc3NldHMiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJwbGF5ZXIiLCJjaGFyYWN0ZXJVc2VyIiwiaGVhbHRoQmVmb3JlIiwiZGFtYWdlVGFrZW4iLCJfc2V0SHAiLCJhcm1vckRhdGEiLCJncm9zc0RhbWFnZSIsImFybW9yVmFsdWUiLCJpc0Zvcm11bGEiLCJuZXREYW1hZ2UiLCJoYXNNYWpvcldvdW5kIiwibWFqb3JXb3VuZCIsIkNvQzdMaW5rIiwiX2xpbmtEYXRhIiwiTElOS19UWVBFIiwiQ0hFQ0siLCJDSEVDS19UWVBFIiwiU0tJTEwiLCJsaW5rRGF0YSIsIkNvQzdMaW5rQ3JlYXRpb25EaWFsb2ciLCJhdHRyaWJ1dGVzIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwibGluayIsInNldERhdGEiLCJUWVBFX0tFWVdPUkQiLCJDSEFSQUNfS0VZV09SRCIsIkFUVFJJQl9LRVlXT1JEIiwiU0tJTExfS0VZV09SRCIsIkVGRkVDVF9LRVlXT1JEIiwiU0FOTE9TUyIsIklURU0iLCJFRkZFQ1QiLCJDSEFSQUNURVJJU1RJQyIsIkFUVFJJQlVURSIsImlzQ2hlY2siLCJpcyIsImlzU2FubG9zcyIsInNhbmxvc3MiLCJpc0l0ZW0iLCJpc0VmZmVjdCIsInZhbGlkSXRlbSIsImZyb21Db21wZW5kaXVtIiwiZnJvbURpcmVjdG9yeSIsIl9pdGVtIiwiaGFzUGxheWVyT3duZXIiLCJmZXRjaEl0ZW0iLCJjaGFyYWN0ZXJpc3RpY0tleSIsImF0dHJpYnV0ZUtleSIsImZvcmNlTW9kaWZpZXJzIiwiaGFzTGFiZWwiLCJoYXNJY29uIiwiZGVlcENsb25lIiwiY2hlY2tUeXBlIiwiZWZmZWN0SXNUZW1wIiwidGludCIsInR1cm5zIiwic2VuZFRvQ2hhdCIsIm9wdGlvbiIsInNlbmRUb0NsaXBib2FyZCIsImNvcHlUb0NsaXBib2FyZCIsIkZvcm1BcHBsaWNhdGlvbiIsImRyYWdEcm9wIiwiZHJhZ1NlbGVjdG9yIiwiZHJvcFNlbGVjdG9yIiwiY2xvc2VPblN1Ym1pdCIsInN1Ym1pdE9uQ2xvc2UiLCJzdWJtaXRPbkNoYW5nZSIsIndpZHRoIiwiaGVpZ2h0IiwiY2hvaWNlcyIsImFsbG93Q3VzdG9tIiwibWluaW11bSIsIm1heGltdW0iLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwibW9kZXMiLCJBQ1RJVkVfRUZGRUNUX01PREVTIiwiZnJvbUdhbWUiLCJhc2tJZCIsImFza1BhY2siLCJpc1NldEZyb21HYW1lIiwic2VsZWN0ZWREaWZmaWN1bHR5IiwibGlua1R5cGUiLCJzZWxlY3RlZENoZWNrVHlwZSIsIl9vbkNsaWNrU3VibWl0IiwiX29uRWZmZWN0Q29udHJvbCIsIl9hZGRFZmZlY3RDaGFuZ2UiLCJzdWJtaXQiLCJwcmV2ZW50Q2xvc2UiLCJpZHgiLCJBREQiLCJfZ2V0U3VibWl0RGF0YSIsImZkIiwiZWRpdG9ycyIsIkFycmF5IiwiZnJvbSIsIkNvQzdUeXBlIiwidXBkYXRlRnJvbUxpbmsiLCJncm91cCIsImdyb3VwTmFtZSIsImZvcm1EYXRhRXgiLCJkaWZmRGF0YSIsImVkaXRvciIsInN0b3BQcm9wYWdhdGlvbiIsImRpc2FibGVGbGF0RGljZU1vZGlmaWVyIiwiY3JlYXRlQ29DN0xpbmsiLCJpbnNlcnRDb250ZW50IiwiaXNDb250ZW50VmlzaWJsZSIsInBhcnNlZENvbnRlbnQiLCJ3YWxrIiwiY3JlYXRlVHJlZVdhbGtlciIsIk5vZGVGaWx0ZXIiLCJTSE9XX1RFWFQiLCJuZXh0Tm9kZSIsImN1cnJlbnROb2RlIiwiX2dldFRleHROb2RlcyIsInJneCIsIlJlZ0V4cCIsIl9yZXBsYWNlVGV4dENvbnRlbnQiLCJfY3JlYXRlTGluayIsImxpbmtJY29uIiwibWF0Y2hBbGwiLCJkaWZmaWN1bHR5U3RyaW5nIiwiaHVtYW5OYW1lIiwiZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyIsImRyYWdnYWJsZSIsImNoYXJhY3RlcmlzdGljQ2hlY2siLCJhdHRyaWJ1dGVDaGVjayIsImdldFNwZWFrZXJBY3RvciIsIkl0ZW0iLCJpY29uTGFuZ3VhZ2UiLCJtYWxmdW5jdGlvbiIsInByb3BlcnR5SWQiLCJvdmVycmlkZSIsImNoZWNrZWRQcm9wcyIsImVyYXMiLCJtZWxlZVdlYXBvbiIsInByb3BOYW1lIiwicHJvcFZhbHVlIiwiaGFzUHJvcGVydHkiLCJpc0luY2x1ZGVkSW5TZXQiLCJzcGVjTmFtZVJlZ2V4IiwicXVvdGVSZWdFeHAiLCJlcmFzZUFkanVzdG1lbnQiLCJtYXhVc2VzUGVyUm91bmQiLCJtdWx0aVNob3QiLCJ1c2VzUGVyUm91bmRTdHJpbmciLCJza2lsbFByb3BlcnRpZXMiLCJfYmFzZSIsImFtbW8iLCJzZXRCdWxsZXRzIiwibWF4QnVsbGV0IiwiYnVsbGV0cyIsIm1heEJ1bGxldHMiLCJuZXdBcnJheSIsImdldENoYXREYXRhIiwiaHRtbE9wdGlvbnMiLCJsYWJlbHMiLCJwcm9wcyIsImZuIiwicCIsIl93ZWFwb25DaGF0RGF0YSIsInNraWxsTGFiZWwiLCJmb3VuZCIsImNhbkJlUHVzaGVkIiwiaXNEb2RnZSIsInB1c2hpbmciLCJpc1Vua25vd24iLCJfdXVpZCIsInJhbmRvbUlEIiwiaGFzQ2FyZCIsInJhd1ZhbHVlU3RyaW5nIiwiY3JpdGljYWxUaHJlc2hvbGQiLCJyZWd1bGFyVGhyZXNob2xkIiwiaGFyZFRocmVzaG9sZCIsImV4dHJlbWVUaHJlc2hvbGQiLCJmdW1ibGVUaHJlc2hvbGQiLCJzdWNjZXNUaHJlc2hvbGQiLCJfbW9kaWZpZWRSZXN1bHQiLCJtb2RpZmllZCIsImZsYXREaWNlTW9kaWZpZXJTdHJpbmciLCJpc1NpbXBsZVJvbGwiLCJoYXNQZW5hbHR5IiwiaGFzTW9kaWZpZXIiLCJfZGljZU1vZGlmaWVyIiwiZnVsbE5hbWUiLCJfZGlmZmljdWx0eSIsIm9sZENoZWNrIiwic3VjY2Vzc0xldmVsSWNvbnMiLCJ1bmtub3duRGlmZmljdWx0eSIsImljb25zIiwic3VjY2Vzc0hpbnQiLCJjc3NDbGFzcyIsImhpbnQiLCJmYWlsdXJlSGludCIsImdtRGlmZmljdWx0eUNyaXRpY2FsIiwiZ21EaWZmaWN1bHR5RXh0cmVtZSIsImdtRGlmZmljdWx0eUhhcmQiLCJnbURpZmZpY3VsdHlSZWd1bGFyIiwiX3NraWxsIiwiX2dldEl0ZW1Gcm9tSWQiLCJpc0R1bW15Iiwid2VhcG9uQWx0U2tpbGwiLCJkaXNwbGF5UmVzdWx0VHlwZSIsImRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCIsImRpc3BsYXlCb3RoU3VjY2Vzc0xldmVsIiwiZG9udERpc3BsYXlTdWNjZXNzTGV2ZWwiLCJpbWFnZSIsImdldExpbmtFbGVtZW50Iiwicm9sbERhdGEiLCJ2YWwiLCJyb2xsZWRTdWNjZXNzTGV2ZWwiLCJ0ZW5SZXN1bHQiLCJ0ZW5Pbmx5T25lRGllIiwiaXNWYWx1ZSIsImlzQ2hhcmFjdGlyaXN0aWMiLCJpc1NraWxsIiwiaXNBdHRyaWJ1dGUiLCJzdWNjZXNzUmVxdWlyZWQiLCJtYWxmdW5jdGlvblR4dCIsInRvZ2dsZUl0ZW1GbGFnIiwiaGFzRW5vdWdoTHVjayIsIm5leHRMZXZlbCIsImx1Y2tUb1NwZW5kIiwiY2FuSW5jcmVhc2VTdWNjZXNzIiwiY2FuQXdhcmRFeHBlcmllbmNlIiwiZm9yY2VkIiwiSlNPTlJvbGxTdHJpbmciLCJjc3NDbGFzc0xpc3QiLCJwbGF5ZXJDc3NDbGFzcyIsImZvcmNlZFN1Y2Nlc3MiLCJmb3JjZWRGYWlsdXJlIiwidG90YWxMdWNrU3BlbnQiLCJzaGlmdCIsInJlbW92ZVVwZ3JhZGVzIiwiZm9yY2VTdWNjZXNzTGV2ZWwiLCJfZm9yY2VDaGVjayIsImhpZ2giLCJsb3ciLCJyYW5kb20iLCJ1bml0VG90YWwiLCJ0ZW5Ub3RhbCIsImhhc0Vub3VnaCIsInRlbiIsImZsYWdnZWRGb3JEZXZlbG9wbWVudCIsIl9mbGF2b3IiLCJfY29udGV4dCIsInBhcmVudFV1aWQiLCJyYXd2YWx1ZSIsInRvb2x0aXBIZWFkZXIiLCJvcmlnaW5hbFNwZWFrZXIiLCJuZXdDb250ZW50IiwiaHRtbE1lc3NhZ2UiLCJyb2xsUmVzdWx0RWxlbWVudCIsInRvb2x0aXAiLCJyb2xsVG9vbFRpcCIsImZhY2UiLCJ0aXAiLCJjaGlsZHJlbiIsInBhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicHQiLCJpbm5lcldpZHRoIiwieSIsImlubmVySGVpZ2h0IiwiemkiLCJnZXRDb21wdXRlZFN0eWxlIiwiekluZGV4IiwiaXNOdW1lcmljIiwiU2FuRGF0YURpYWxvZyIsIl90b2dnbGVJbnB1dCIsIlZhbGlkYXRlIiwiUk9MTF9UWVBFX0FUVFJJQlVURSIsIlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyIsIlJPTExfVFlQRV9DT01CQVQiLCJST0xMX1RZUEVfU0tJTEwiLCJST0xMX1RZUEVfRU5DT1VOVEVSIiwiQ0FSRF9UWVBFX0NPTUJJTkVEIiwiQ0FSRF9UWVBFX0dST1VQIiwiQ0FSRF9UWVBFX09QUE9TRUQiLCJDQVJEX1RZUEVfU0FOX0NIRUNLIiwiQ0FSRF9UWVBFX05PTkUiLCJza2lsbElkcyIsImFsdEtleSIsImNyZWF0ZUVuY291bnRlciIsIm9wZW5MaW5rVG9vbCIsImlzQ29tYmF0IiwiZm9yY2VkQ2FyZFR5cGUiLCJoaWRlRGlmZmljdWx0eSIsImRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJub3JtYWxpemVSZXF1ZXN0IiwiY3JlYXRlTGluayIsImNyZWF0ZVJvbGwiLCJydW5Sb2xsIiwiZnJvbUxpbmtEYXRhIiwicHJvbXB0TGFiZWwiLCJzdWNjZXNzTGV2ZWxzIiwiZGlzcGF0Y2giLCJ1bmtub3duRGlmZmljdWx0eURlZmF1bHQiLCJhbGxvd0ZsYXREaWNlTW9kaWZpZXIiLCJhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllciIsImNhcmRUeXBlcyIsIkNvQzdBY3RpdmVFZmZlY3QiLCJBY3RpdmVFZmZlY3QiLCJfYXBwbHlNdWx0aXBseSIsIm4iLCJmcm9tU3RyaW5nIiwic3RyVXBkYXRlIiwic2V0UHJvcGVydHkiLCJfYXBwbHlBZGQiLCJnZXRUeXBlIiwiYXQiLCJvd25lciIsImVmZmVjdElkIiwib3JpZ2luIiwiZWZmZWN0VHlwZSIsIl9wcmVwYXJlRHVyYXRpb24iLCJ0b0lTT1N0cmluZyIsImlzU3RhdHVzIiwiY2F0ZWdvcmllcyIsInRlbXBvcmFyeSIsInBhc3NpdmUiLCJpbmFjdGl2ZSIsInN1cHByZXNzZWQiLCJfZ2V0U291cmNlTmFtZSIsImlzVGVtcG9yYXJ5IiwiaGlkZGVuIiwiZXhwZW5kZWQiLCJOYU4iLCJDb0M3Q29udGV4dE1lbnUiLCJtZW51IiwiX2NhbGxiYWNrIiwiX2h0bWwiLCJfbWVudSIsIm1lbnVUcmlnZ2VyIiwiY29udGV4dG1lbnUiLCJfb25Db250ZXh0TWVudSIsIm1lbnVFbGVtZW50IiwiQ3JlYXRlTWVudSIsIl9vbk1lbnVBY3Rpb24iLCJtZW51Q29udGFpbmVyIiwiZWFjaCIsInZpc2liaWxpdHkiLCJjbG9zZUFsbCIsIm1lbnVOYW1lIiwiY29udGV4dE1lbnUiLCJ3cmFwcGVyIiwic3ViTWVudSIsImNsaWVudFgiLCJjbGllbnRZIiwibWVudUhlaWdodCIsIm91dGVySGVpZ2h0IiwibWVudVdpZHRoIiwib3V0ZXJXaWR0aCIsImNzcyIsImFkZENsYXNzIiwic2VjdGlvbiIsIkNyZWF0ZVNlY3Rpb24iLCJtdWx0aSIsImNhblNlZSIsInN1YiIsIkNvQzdBY3RvclNoZWV0IiwiQWN0b3JTaGVldCIsInNoZWV0RGF0YSIsInNob3dIaWRkZW5EZXZNZW51IiwiY2FuRHJhZ1Rva2VuIiwibGlua2VkQWN0b3IiLCJpdGVtc0J5VHlwZSIsImNvbWJhdFNraWxscyIsInJhbmdlV3BuIiwibWVsZWVXcG4iLCJhY3RvckZsYWdzIiwicHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMiLCJwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsInBlcm1pc3Npb25MaW1pdGVkIiwiTElNSVRFRCIsImFsbG93VW5sb2NrIiwicGVyc29uYWxEZXNjcmlwdGlvbiIsInNleCIsInJlc2lkZW5jZSIsImJpcnRocGxhY2UiLCJvcmdhbml6YXRpb24iLCJwbGF5ZXJuYW1lIiwibWFudWFsQ3JlZGl0IiwiY3JlZGl0IiwibW9uZXRhcnlTeW1ib2wiLCJzcGVudCIsImFzc2V0c0RldGFpbHMiLCJkZXZlbG9wbWVudCIsInB1bHBSdWxlQXJjaGV0eXBlIiwicHVscFJ1bGVPcmdhbml6YXRpb24iLCJpc0RlYWQiLCJpc0R5aW5nIiwiaXRlbVRvVXBkYXRlIiwiYXN5bmNCYXNlIiwidXBkYXRlZEV4cCIsIml0ZW1UeXBlIiwibWVsZWVTa2lsbHMiLCJyYW5nZVNraWxscyIsImNidFNraWxscyIsInVzZXNBbHRlcm5hdGVTa2lsbCIsInNraWxsU2V0IiwiX3Byb3BlcnRpZXMiLCJoYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEiLCJlZGl0YWJsZSIsImlzRmlyc3QiLCJpc0xhc3QiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJtZW51cyIsInJvbGxNZW51Iiwic2FuTWVudSIsInJvbGxDb250ZXh0TWVudSIsIl9vbkNvbnRleHRNZW51Q2xpY2siLCJzYW5Db250ZXh0TWVudSIsIl9vbk9wcG9zZWRSb2xsIiwiX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0IiwiX29uUm9sbFNraWxsVGVzdCIsIl9vblJvbGxBdHRyaWJUZXN0IiwiX29uRHJhZ1Rva2VuU3RhcnQiLCJjb21wZW5kaXVtIiwiX29uRHJhZ0NoYXJhY3RlcmlzdGljIiwiX29uRHJhZ0F0dHJpYnV0ZSIsIl9vbkRyYWdTYW5DaGVjayIsIl9vbkxvY2tDbGlja2VkIiwiX29uRmxhZ0NsaWNrZWQiLCJfb25Gb3JtdWxhQ2xpY2tlZCIsIl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUiLCJfb25BdXRvVG9nZ2xlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25FZmZlY3QiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25SZWxvYWRXZWFwb24iLCJfb25BZGRBbW8iLCJkYmxjbGljayIsIl90b2dnbGVSZWFkT25seSIsIl9vbldlYXBvbkRhbWFnZSIsIl9vbkludmVudG9yeUhlYWRlciIsIl9vbkl0ZW1IZWFkZXIiLCJfb25TZWN0aW9uSGVhZGVyIiwid2hlZWxJbnB1dHMiLCJ3aGVlbElucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbldoZWVsIiwiX29uSXRlbVN1bW1hcnkiLCJfb25JdGVtUG9wdXAiLCJfb25SZW5kZXJJdGVtU2hlZXQiLCJldiIsInBhcmVudHMiLCJpdGVtVG9EZWxldGUiLCJzdHJpY3QiLCJzbGlkZVVwIiwiY3JlYXRlRW1wdHlCb29rIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlTa2lsbCIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVdlYXBvbiIsIl9vblRyYWRlSXRlbSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJkZXRhaWwiLCJkZXZlbG9wTHVjayIsImRpc2FibGUiLCJtb3VzZWVudGVyIiwidG9vbFRpcFNraWxsRW50ZXIiLCJDb0M3VG9vbHRpcHMiLCJ0b29sVGlwTGVhdmUiLCJ0b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlciIsInRvb2xUaXBBdHRyaWJ1dGVFbnRlciIsInRvb2xUaXBBdXRvRW50ZXIiLCJ0b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50Iiwib25NYW5hZ2VBY3RpdmVFZmZlY3QiLCJkZWxheSIsIlRvb2xUaXBIb3ZlciIsInRvb2xUaXBUaW1lciIsInRvb2xUaXAiLCJkaXNwbGF5VG9vbFRpcCIsImNoYXJJZCIsImF0dHJpYnV0ZUlkIiwidGFyZ2V0VHlwZSIsInJvbGxPcHRpb25zIiwiYWN0b3JGcm9tIiwiYWN0b3JUbyIsInZpc2libGUiLCJOT05FIiwiX29uRHJhZ1N0YXJ0IiwiZHJhZ0RhdGEiLCJib3giLCJfb25Ecm9wIiwidG9nZ2xlQ29uZGl0aW9uIiwicmVzZXREYWlseVNhbml0eSIsInRvZ2dsZUF0dHJpYkF1dG8iLCJ0b2dnbGVQcm9wZXJ0eSIsInJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImlzTG9ja2VkIiwidG9nZ2xlQWN0b3JGbGFnIiwiZGVsdGFZIiwic2V0SHAiLCJzZXRNcCIsInJlYWRPbmx5Iiwic2VjcmV0cyIsImhhc0NsYXNzIiwic3VtbWFyeSIsImRpdiIsInNwZWNpYWxEaXYiLCJoaWRlIiwiYmluZEV2ZW50c0hhbmRsZXIiLCJzbGlkZURvd24iLCJwYW5uZWxDbGFzcyIsInBhbm5lbCIsInNpYmxpbmdzIiwib2wiLCJuZXh0IiwicG9wdXBTa2lsbCIsImVucmljaGVkVmFsdWUiLCJzY3JvbGxZIiwicHJvY2VlZFdpdGhvdXRUYXJnZXQiLCJjYW5jZWwiLCJwcm9jZWVkIiwiYWRkQnVsbGV0IiwidGVzdCIsInJvbGxGb3JtdWxhIiwib3ZlcnJpZGVzIiwiZmxhdHRlbk9iamVjdCIsImNyZWRpdFZhbHVlIiwidXBkYXRlVGV4dEFyZWEiLCJ1cGRhdGVCaW9WYWx1ZSIsInVwZGF0ZUJpb1RpdGxlIiwic2VsZWN0ZWRJbmRleCIsIkNvQzdOUENTaGVldCIsImFsbG93Rm9ybXVsYSIsImRpc3BsYXlGb3JtdWxhIiwiaGFzU2FuIiwiaGFzTXAiLCJoYXNMdWNrIiwiaXNDcmVhdHVyZSIsImhhc0ludmVudG9yeSIsImVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiIsImVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIiLCJrZWVwZXIiLCJzYW5sb3NzTWVudSIsInNhbmxvc3NDb250ZXh0TWVudSIsIl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIiwiX29uU2FuQ2hlY2siLCJjaGVja1RhcmdldHMiLCJ1bnNldEFjdG9yRmxhZyIsInJlc2l6YWJsZSIsIm1pbmltaXphYmxlIiwiX3VwZGF0ZU9iamVjdCIsInNldENoYXJhY3RlcmlzdGljIiwic2V0UG9zaXRpb24iLCJmb3JjZUF1dG8iLCJDb0M3Q3JlYXR1cmVTaGVldCIsIkNvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIiLCJpc0ltbXVuaXR5IiwiX29uU2VsZWN0Q2hhbmdlIiwiX29uQnV0dG9uQ2xpY2siLCJDb0M3Q2hhcmFjdGVyU2hlZXQiLCJfZ2V0SGVhZGVyQnV0dG9ucyIsInN1bW1hcml6ZWQiLCJvbmNsaWNrIiwidG9nZ2xlU2hlZXRNb2RlIiwiaXNFZGl0YWJsZSIsInNraWxsTGlzdE1vZGVWYWx1ZSIsInNraWxsU2hvd1VuY29tbW9uIiwic2hvd0ljb25zT25seSIsIm9jY3VwYXRpb25TZXQiLCJhcmNoZXR5cGVTZXQiLCJ0b3RhbEV4cGVyaWVuY2UiLCJ0b3RhbE9jY3VwYXRpb24iLCJpbnZhbGlkT2NjdXBhdGlvblBvaW50cyIsInRvdGFsQXJjaGV0eXBlIiwiaW52YWxpZEFyY2hldHlwZVBvaW50cyIsInRvdGFsUGVyc29uYWwiLCJpbnZhbGlkUGVyc29uYWxQb2ludHMiLCJjcmVkaXRSYXRpbmdNYXgiLCJjcmVkaXRSYXRpbmdNaW4iLCJpbnZhbGlkQ3JlZGl0UmF0aW5nIiwicHVscFRhbGVudENvdW50IiwidGFsZW50IiwibWluUHVscFRhbGVudHMiLCJ0YWxlbnRzIiwiaW52YWxpZFB1bHBUYWxlbnRzIiwiYWxsb3dEZXZlbG9wbWVudCIsImFsbG93Q2hhckNyZWF0aW9uIiwiZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayIsInNob3dEZXZQYW5uZWwiLCJmYWN0b3IiLCJvbmVCbG9ja0JhY2tTdG9yeSIsInByZXZpb3VzU3BlYyIsImlzU3BlY2lhbGl6YXRpb24iLCJza2lsbHNCeVZhbHVlIiwidG9wU2tpbGxzIiwidG9wV2VhcG9ucyIsInJldmVyc2UiLCJkaXNwbGF5UGxheWVyTmFtZSIsInNraWxsTGlzdEVtcHR5IiwiZW5yaWNoZWRCYWNrc3RvcnkiLCJfc2F2ZVNjcm9sbFBvc2l0aW9ucyIsIl9zY3JvbGxQb3NpdGlvbnNYIiwicG9zIiwic2VsIiwic2Nyb2xsTGVmdCIsIl9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zIiwic2VsZWN0b3JzIiwicG9zaXRpb25zIiwiX29uU2tpbGxEZXYiLCJfb25JdGVtRGV0YWlscyIsInRvZ2dsZVNraWxsTGlzdE1vZGUiLCJ0b2dnbGVTa2lsbFVuY29tbW9uTW9kZSIsIl9vbkFkZFNhbml0eUxvc3NSZWFzb24iLCJfb25EZWxldGVTYW5pdHlMb3NzUmVhc29uIiwiX29uVG9nZ2xlS2VlcGVyRmxhZ3MiLCJkZXZlbG9wU2tpbGwiLCJzdHlsZVNoZWV0IiwiY3NzUnVsZUluZGV4Iiwic3R5bGVTaGVldHMiLCJocmVmIiwiZW5kc1dpdGgiLCJydWxlcyIsInNlbGVjdG9yVGV4dCIsIkNTU1N0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJGb250RmFjZSIsImxvYWQiLCJsb2FkZWRGYWNlIiwiZm9udHMiLCJ3ZWlnaHQiLCJjYW1lbENhc2VUb0h5cGhlbiIsImV4cGFuZGVkIiwiQ29DN0NvbWJhdCIsImN1cnJlbnRDb21iYXQiLCJjb21iYXRzIiwiY3VycmVudEluZGV4IiwiY29tYklkIiwiY29tYmF0YW50Q29udHJvbHNEaXYiLCJjb21iYXRhbnQiLCJjb21iYXRhbnRzIiwicHJlcGVuZCIsImluaXRpYXRpdmUiLCJ0b2tlbkluaXRpYXRpdmUiLCJpbml0aWF0aXZlVGVzdCIsImg0IiwiZm9udFdlaWdodCIsInRleHRTaGFkb3ciLCJjb2xvciIsImJhY2tncm91bmQiLCJfb25Ub2dnbGVHdW4iLCJjb21iYXRhbnRJZCIsIm5ld0luaXQiLCJyb2xsSW5pdGlhdGl2ZSIsInNldEluaXRpYXRpdmUiLCJpZHMiLCJVcGRhdGVyIiwic3lzdGVtVXBkYXRlVmVyc2lvbiIsInJ1bk1pZ3JhdGUiLCJpc05ld2VyVmVyc2lvbiIsInZlcnNpb24iLCJ1cGRhdGVkTW9kdWxlcyIsImN1cnJlbnRNb2R1bGVzIiwicGFja2FnZU5hbWUiLCJtb2R1bGUiLCJtb2QiLCJza2lwIiwiT0siLCJ1cGRhdGVEb2N1bWVudHMiLCJwZXJtYW5lbnQiLCJtaWdyYXRlQWN0b3JEYXRhIiwiaXNFbXB0eSIsImxvZyIsImVuZm9yY2VUeXBlcyIsIm1pZ3JhdGVJdGVtRGF0YSIsInRhYmxlIiwibWlncmF0ZVRhYmxlRGF0YSIsIm1pZ3JhdGVNYWNyb0RhdGEiLCJtaWdyYXRlU2NlbmVEYXRhIiwibWlncmF0ZUNvbXBlbmRpdW1EYXRhIiwiX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eSIsIl9taWdyYXRlQWN0b3JBcnR3b3JrIiwiX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIiwiX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIiwiX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZSIsIl9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyIsImFyciIsImRvY3VtZW50Q2xhc3MiLCJpdGVtVXBkYXRlIiwiZG9jdW1lbnRUeXBlIiwid2FzTG9ja2VkIiwiY29uZmlndXJlIiwibWlncmF0ZSIsImRvY3VtZW50cyIsIl9taWdyYXRlSXRlbUVtYmVkZGVkdjEwIiwiX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSIsIl9taWdyYXRlSXRlbUFydHdvcmsiLCJfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIiwiX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UiLCJfbWlncmF0ZUl0ZW1TZXR1cEVyYXMiLCJfbWlncmF0ZUl0ZW12MTAiLCJfbWlncmF0ZUl0ZW1Cb29rVW5pdHMiLCJfbWlncmF0ZU1hY3JvQXJ0d29yayIsIl9taWdyYXRlVGFibGVBcnR3b3JrIiwicmV0dXJucyIsIl9taWdyYXRlVG9rZW5BcnR3b3JrIiwiYWN0b3JEYXRhIiwiaGFzIiwiTWFwIiwib3JpZ2luYWwiLCJnIiwic3BlbGxzIiwiY29zdCIsImNhc3RpbmdUaW1lIiwidW5pZGVudGlmaWVkIiwiYXV0aG9yIiwiZGF0ZSIsImxhbmd1YWdlIiwibXl0aG9zUmF0aW5nIiwibm90ZXMiLCJnYWluIiwiQ01JIiwiQ01GIiwibmVjZXNzYXJ5Iiwid2Vla3NTdHVkeVRpbWUiLCJwcm9ncmVzcyIsInN0dWR5Iiwia2VlcGVyTm90ZXMiLCJlbmNvdW50ZXJlZENyZWF0dXJlcyIsImltIiwiYXR0YWNrc1BlclJvdW5kIiwiaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwiLCJuYW1lQ2hhcmFjdGVycyIsImVuIiwiZGJOb25lIiwiYXJtb3JOb25lIiwiYXR0YWNrc1BlclJvdW5kTm9uZSIsInNhbkxvc3NOb25lIiwiZnVsbGRiIiwiaGFsZmRiIiwic2VjdGlvbkNvbWJhdHMiLCJuZXdDb21iYXRIZWFkZXIiLCJzZWN0aW9uU2tpbGxzIiwic2VjdGlvbkxhbmdhdWdlcyIsInNlY3Rpb25TcGVsbHMiLCJoYW5kZ3VuIiwicmlmbGUiLCJzbWIiLCJtYWNoaW5lR3VuIiwibGF1bmNoZWQiLCJleGFtcGxlIiwiZGUiLCJkaWNlU2hvcnQiLCJwbCIsImZyIiwiZXMiLCJ0cmFuc2xhdGlvbnMiLCJ3ZWFwb25Eb2RnZSIsImd1ZXNzU3RhcnRDb21iYXQiLCJzZWN0aW9ucyIsIkNvQzdBY3RvckltcG9ydGVyUmVnRXhwIiwibGFuZyIsIkNvQzdBY3RvckltcG9ydGVyIiwiaXRlbUxvY2F0aW9ucyIsImFzTnVtYmVyIiwiYXNTdHJpbmciLCJnZXRSZWdFeCIsInJlZ2V4IiwiY2xlYW5TdHJpbmciLCJ0cmFuc2xhdGVSb2xsIiwicmVnRXgiLCJ0b0hUTUwiLCJ0cmltIiwicmVnRXhLZXkiLCJyZWdFeHAiLCJyZXF1aXJlZEdyb3VwIiwicmVtb3ZlRnJvbVRleHQiLCJzYXZlS2V5cyIsInByb2Nlc3NDb21iYXQiLCJuZXdsaW5lIiwiQ29DN0ltcG9ydGVyIiwibGFzdFBlcmNlbnQiLCJtYXhMb29wcyIsInBlcmNlbnRhZ2UiLCJpc1JhbmdlZCIsImRhbWFnZXMiLCJpc1Nob3RndW4iLCJhdHRhY2tzIiwicHJvY2Vzc1NraWxscyIsImJyZWFrcyIsInByb2Nlc3NTcGVsbHMiLCJzcGVsbHNBcnIiLCJzcGVsbCIsImhlYWRlciIsInN1YnN0ciIsIm9jY3VwYXRpb25BZ2UiLCJyZWdFeHBTZWN0aW9ucyIsImdtbm90ZXMiLCJkaXNhYmxlQXR0cmliQXV0byIsImF0dHJpYlZhbHVlIiwiY2hhcmFjdGVyRGF0YSIsImNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cyIsIm5wYyIsInVwZGF0ZUl0ZW1EYXRhIiwibGFzdFdlYXBvblNraWxsIiwicGFpciIsIndlYXBvblNraWxscyIsInBjIiwid2VhcG9uU2tpbGwiLCJjbG9uZWQiLCJsYW5ndWFnZXMiLCJjbG9uZSIsIm5ld1NraWxsIiwibmVlZHNDb252ZXJzaW9uIiwibmVlZHNDb252ZXJzaW9uUmVzdWx0IiwiaW5wdXRzIiwiY2hlY2tMYW5ndWFnZSIsImdldEtleXMiLCJnZXRSZWd1bGFyRXhwcmVzc2lvbnMiLCJwYXJzZUNoYXJhY3RlciIsImNvbnZlcnRGcm9tNkUiLCJjb252ZXJ0N0UiLCJpdGVtc0RhdGEiLCJ0ZXN0TW9kZSIsImNyZWF0ZUVudGl0eSIsImNyZWF0dXJlIiwiQ29DN0RpcmVjdG9yeVBpY2tlciIsIkZpbGVQaWNrZXIiLCJhY3RpdmVTb3VyY2UiLCJidWNrZXQiLCJyYXciLCJwaWNrZXIiLCJwaWNrZXJCdXR0b24iLCJjcmVhdGVEZWZhdWx0RGlyZWN0b3J5IiwiY3JlYXRlRGlyZWN0b3J5IiwiZmlsZSIsImZpbGVuYW1lIiwidXBsb2FkIiwiRmlsZSIsIkNvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciIsImJhY2tzdG9yeUpTT04iLCJibG9jayIsImRob2xlSG91c2VEYXRhIiwiSW52ZXN0aWdhdG9yIiwiYmFja3N0b3JpZXMiLCJnZXRCYWNrc3RvcnkiLCJCYWNrc3RvcnkiLCJQZXJzb25hbERldGFpbHMiLCJOYW1lIiwiQ2hhcmFjdGVyaXN0aWNzIiwiU1RSIiwiQ09OIiwiU0laIiwiREVYIiwiQVBQIiwiSU5UIiwiUE9XIiwiRURVIiwiU2FuaXR5IiwiU2FuaXR5TWF4IiwiSGl0UHRzIiwiSGl0UHRzTWF4IiwiTWFnaWNQdHMiLCJNYWdpY1B0c01heCIsIkx1Y2siLCJNb3ZlIiwiRGFtYWdlQm9udXMiLCJCdWlsZCIsIk9jY3VwYXRpb24iLCJBZ2UiLCJHZW5kZXIiLCJSZXNpZGVuY2UiLCJCaXJ0aHBsYWNlIiwiZXh0cmFjdFNraWxscyIsIlNraWxscyIsIlNraWxsIiwicG9zc2VzaW9ucyIsImV4dHJhY3RQb3NzZXNzaW9ucyIsIlBvc3Nlc3Npb25zIiwiZGhvbGVIb3VzZXNraWxscyIsInN1YnNraWxsIiwiaGFsZiIsImZpZnRoIiwibWFrZVNraWxsTmFtZSIsImdldEVtYmVkZGVkQ29sbGVjdGlvbiIsImNoZWNrTmFtZSIsImRob2xlaG91c2VQb3NzZXNzaW9ucyIsImRob2xlaG91c2VXZWFwb25zIiwiaXNBcnJheSIsImZpbmRXZWFwb25Ta2lsbElkIiwic2tpbGxuYW1lIiwibWFsZiIsImJhc2U2NFBvcnRyYWl0IiwiZmlsZU5hbWUiLCJiYXNlNjRSZXNwb25zZSIsImZldGNoIiwiaW1hZ2VCbG9iIiwiYmxvYiIsInVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSIsImRob2xlSG91c2VDaGFyYWN0ZXJEYXRhIiwiY2FuIiwiY29udmVydERob2xlSG91c2VDaGFyYWN0ZXJEYXRhIiwiUG9ydHJhaXQiLCJzYXZlUG9ydHJhaXQiLCJleHRyYWN0V2VhcG9ucyIsIldlYXBvbnMiLCJDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyIsImltcG9ydFR5cGUiLCJjb252ZXJ0NkUiLCJjYW5VcGxvYWQiLCJnZXRUcmFuc2xhdGlvbnMiLCJwbGFjZWhvbGRlciIsImdldEV4YW1wbGVUZXh0IiwiX29uQ2hhbmdlU3VibWl0IiwiX29uSlNPTkZpbGVTZWxlY3RlZCIsImNoYXJhY3RlcnNUb29FeHRlbmRlZCIsImpzb25GaWxlSW5wdXQiLCJnZXRFbGVtZW50QnlJZCIsInBvcnRyYWl0SW1hZ2UiLCJjaGFyYWN0ZXJOYW1lIiwicHJldmlldyIsImZpbGVzIiwiZGlhbG9nIiwiZmlsZVJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJjaGFyYWN0ZXJKU09OIiwicGVyc29uYWxEZXRhaWxzIiwidGV4dENvbnRlbnQiLCJyZWFkQXNUZXh0IiwiZ2V0SW5wdXRzIiwiY3JlYXRlTlBDRnJvbURob2xlSG91c2UiLCJhY3RvclR5cGUiLCJpbXBvcnRBY3RvciIsImNyZWF0ZWRBY3RvciIsImNyZWF0ZUFjdG9yIiwib25jZSIsIkNvQzdNZW51TGF5ZXIiLCJQbGFjZWFibGVzTGF5ZXIiLCJvYmplY3RzIiwibGF5ZXJPcHRpb25zIiwicGxhY2VhYmxlcyIsIkNvQzdNZW51IiwiY29udHJvbHMiLCJjb2M3Z210b29scyIsImxheWVyIiwidG9vbHMiLCJvbkNsaWNrIiwidG9nZ2xlRGV2UGhhc2UiLCJ0b2dnbGVDaGFyQ3JlYXRpb24iLCJ0b2dnbGVYUEdhaW4iLCJmYWtlUm9sbE1lc3NhZ2UiLCJnZXRUYXJnZXQiLCJjb2M3RGV2VG9vbHMiLCJrZWVwZXJNZW51IiwiYWZ0ZXIiLCJDb0M3Q2FudmFzIiwiQ09DN19UWVBFU19TVVBQT1JURUQiLCJncmlkU2l6ZSIsImRyb3BUYXJnZXRUb2tlbnMiLCJiZXR3ZWVuIiwid2hpc3BlclRhcmdldHMiLCJjYWxsQmFjayIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJyb2xlIiwiVVNFUl9QRVJNSVNTSU9OUyIsIkFDVE9SX0NSRUFURSIsImRlZmF1bHRSb2xlIiwiQ29DN1NwZWxsIiwiaXNPd25lZCIsImNvc3RzIiwibG9zc2VzIiwiY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzIiwibWFnaWNQb2ludHMiLCJjb252ZXJ0ZWRIaXRQb2ludHMiLCJjb252ZXJ0ZWRNYWdpY1BvaW50cyIsImFjdG9yTWFnaWNQb2ludHMiLCJvcmlnaW5hbE1hZ2ljUG9pbnRzIiwiaGl0UG9pbnRzIiwicmVzb2x2ZUxvc3NlcyIsImdyYW50U2FuaXR5TG9zcyIsImdldEhUTUwiLCJzYW5pdHlMb3NzIiwic2FuaXR5Q2hlY2siLCJieXBhc3NSb2xsU2FuIiwiYm9va0lkIiwiYm9vayIsIkNvQzdCb29rIiwibGVhcm5lZCIsImluaXRpYWxSZWFkaW5nIiwiZnVsbFN0dWR5IiwiY29tcGxldGVGdWxsU3R1ZHkiLCJjaGVja0V4aGF1c3Rpb24iLCJncmFudEZ1bGxTdHVkeSIsImFjdG9yTXl0aG9zVmFsdWUiLCJkZXZlbG9wbWVudHMiLCJteXRob3NGaW5hbCIsImdhaW5zIiwiZmluYWwiLCJncmFudFNraWxsRGV2ZWxvcG1lbnQiLCJyb2xsU2FuaXR5TG9zcyIsImZ1bGxTdHVkaWVzIiwib3RoZXJzIiwicGF0dGVybiIsInNwZWxsbGVhcm5lZCIsImV4aXN0aW5nU2tpbGwiLCJzaG93RGV2ZWxvcG1lbnRzVGFibGUiLCJmcm9tUm9sbFN0cmluZyIsImdyYW50SW5pdGlhbFJlYWRpbmciLCJncmFudFNwZWxsTGVhcm5pbmciLCJFQ0NfQ0xBU1MiLCJQRVJNSVNTSU9OX1RZUEUiLCJTVEFURSIsIkdNVXBkYXRlIiwiY2FyZENsYXNzTmFtZSIsIkVuaGFuY2VkQ2hhdENhcmQiLCJhZHZpc2UiLCJFbmhhbmNlZENoYXRDYXJkTGliIiwidHlwZXMiLCJlbmhhbmNlZENoYXRDYXJkc0xpYiIsImNhcmRDb25zdHJ1Y3RvcnMiLCJjYXJkQ29uc3RydWN0b3IiLCJzZXRCeVBhdGgiLCJnZXRCeVBhdGgiLCJvb2MiLCJhdHRhY2hPYmplY3QiLCJvYmplY3REYXRhU3RyaW5nIiwiZWNjQ2xhc3MiLCJsb2NhbENvbXB1dGUiLCJFeGVjdXRlR01VcGRhdGUiLCJFRUNfQUNUSU9OIiwiZGV0YWNoRGF0YSIsIl9vbkNoYW5nZSIsInNldFZpc2liaWxpdHkiLCJzZXRQZXJtaXNzaW9uIiwic2V0U3RhdGUiLCJzZXRSYWRpb1N0YXRlIiwic3BsaXRlZCIsImVjY1Zpc2liaWxpdHkiLCJoYXNQZXJtIiwiZWNjUGVybWlzc2lvbnMiLCJyZXN0cmljdGVkVG8iLCJ2aXNpb24iLCJwZXJtaXNzaW9uc0FycmF5Iiwid2hpdGVMaXN0IiwiaXNBdXRob3IiLCJuZXdEYXRhIiwiYXNzaWduT2JqZWN0cyIsImZvcm1VcGRhdGUiLCJhY3Rpb25VcGRhdGUiLCJvcmlnaW5hbERpc3BsYXlTdHlsZSIsInVwZGF0ZUNhcmQiLCJ0YWdOYW1lIiwic2F2ZURhdGEiLCJodG1tbENhcmQiLCJDYXJkQ2xhc3MiLCJ1bnNldERhdGEiLCJ0b2dnbGVEYXRhIiwiYk5hbWUiLCJfcGFydGljaXBhbnQiLCJfZmV0Y2giLCJfZG9jIiwiaXNBY3RvciIsImhhc0FjdG9yIiwiaGFzVmVoaWNsZSIsImlzQWN0aXZlIiwidmVoaWNsZSIsImRyaXZlciIsIl9kcml2ZXIiLCJ2ZWhpY2xlS2V5IiwiX3ZlaGljbGUiLCJoYXNWYWxpZE1vdiIsImhhc01heEJvbnVzRGljZSIsImFkZEJvbnVzRGljZSIsInJlbW92ZUJvbnVzRGljZSIsInJlc2V0Qm9udXNEaWNlIiwiaGFzQm9udXNEaWNlIiwiaGFzT25lQm9udXNEaWNlIiwiaGFzVHdvQm9udXNEaWNlIiwiY2FuQXNzaXN0IiwiYXNzaXN0IiwiY2FuQmVDYXV0aW91cyIsImhhc0RyaXZlciIsImhhc1ZhbGlkRGV4IiwiaGFzQUd1blJlYWR5IiwiaW5pdCIsImlzQ2hhc2VyIiwiY2hhc2VyIiwiaXNQcmV5IiwiaXNWYWxpZCIsIm1vdkFkanVzdG1lbnQiLCJzcGVlZENoZWNrIiwicm9sbERhdGFTdHJpbmciLCJhZGp1c3RlZE1vdiIsImhhc01vdkFkanVzdG1lbnQiLCJoYXNCb251c01vdiIsImhhc01hbHVzTW92IiwidG9vU2xvdyIsImV4Y2x1ZGVkIiwiaW5jbHVkZUluQ2hhc2UiLCJzbG93ZXN0IiwiZmFzdGVzdCIsImNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyIsIm1pbk1vdiIsIm1vdmVtZW50QWN0aW9uIiwiY3VycmVudE1vdmVtZW50QWN0aW9ucyIsImhhc01heE12dEFjdGlvbnMiLCJoYXNOb012dEFjdGlvbnMiLCJhZGRNb3ZlbWVudEFjdGlvbnMiLCJhbHRlck1vdmVtZW50QWN0aW9ucyIsIm1vdmVtZW50QWN0aW9uQXJyYXkiLCJiYXNlQXJyYXkiLCJmaWxsIiwiaW5saW5lUm9sbCIsIm1vZGlmaWVyQ3NzIiwiaGFzT3B0aW9ucyIsImdhbWVJdGVtIiwicmVmIiwicmVmU2V0IiwiaXNDaGFyYWN0ZXJpc3RpYyIsImNhbkJlUm9sbGVkIiwic29ydEJ5Um9sZUFuZERleCIsIkNoYXNlT2JzdGFjbGVDYXJkIiwic3RyaW5ncyIsInRvdGFsQWN0aW9uQ29zdCIsImJyZWFrYWJsZU9ic3RhY2xlIiwib2JzdGFjbGUiLCJiYXJyaWVyIiwiaGFzSGl0UG9pbnRzIiwidmFsaWRDaGVjayIsInN0YXRlcyIsIm9ic3RhY2xlRGVmaW5lZCIsImhhemFyZCIsInRyeVRvTmVnb3RpYXRlIiwidHJ5VG9CcmVhayIsImJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkIiwicGFydGljaXBhbnQiLCJjaGFzZSIsImdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwicGFydGljaXBhbnRVdWlkIiwidmFsaWRTa2lsbCIsImNoZWNrVGhyZXNob2xkIiwiYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwiZHVtbXlBY3RvciIsImNhblRha2VDYXV0aW91c0FwcHJvYWNoIiwiY3VzdG9tV2VhcG9uIiwid2VhcG9uQ2hvaWNlIiwiY2hlY2tSb2xsUmVxdWVzdCIsImNhbkFza1JvbGwiLCJFbnRlclZhbHVlVGl0bGUiLCJkYW1hZ2VTdGF0dXMiLCJvYnN0YWNsZURhbWFnZVJvbGwiLCJvYnN0YWNsZURhbWFnZVJvbGxlZCIsIm9ic3RhY2xlRGFtYWdlIiwiaW5saW5lRGFtYWdlUm9sbCIsInRvdGFsQ2F1dGlvdXNBcHByb2FjaCIsImNhdXRpb3VzU3RhdHVzIiwiY2F1dGlvdXNBcHByb2FjaFR5cGUiLCJjb25zdW1lQm9udXNEaWNlIiwibW92ZVBsYXllciIsIm9ic3RhY2xlUGFzc2VkIiwiY2hlY2tGYWlsZWQiLCJwbGF5ZXJBY3Rpb25EZWZpbmVkIiwicGxheWVySW50ZW50aW9ucyIsImNoZWNrUm9sbGVkIiwiY2FyZFJlc29sdmVkIiwicGxheWVyRGFtYWdlVGFrZW4iLCJvYnN0YWxjZURlZmluaXRpb25DaGFuZ2VkIiwibGlzdENoYW5nZXMiLCJoYXNEYW1hZ2UiLCJpbmxpbmVEYW1hZ2VUYWtlblJvbGwiLCJmYWlsZWREYW1hZ2VSb2xsIiwidG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiIsImhhc0FjdGlvbkNvc3QiLCJhY3Rpb25Mb3N0IiwiaW5saW5lQWN0aW9uTG9zdFJvbGwiLCJmYWlsZWRBY3Rpb25Sb2xsIiwiZmluYWxPdXRjb21lIiwidG90YWxEYW1hZ2UiLCJyZWZsZWN0T2JzdGFsZUNoYW5nZXMiLCJmYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQiLCJ0b3RhbE9ic3RhY2xlRGFtYWdlIiwib2JzdGFjbGVEZXN0b3llZCIsIkhpdFBvaW50cyIsImFjdGl2ZVBhcnRpY2lwYW50RGF0YSIsIm9ic3RhY2xlRGV0YWlscyIsInBhcnRpY2lwYW50RGF0YSIsImdldFBhcnRpY2lwYW50RGF0YSIsImdldExvY2F0aW9uRGF0YSIsImxvY2F0aW9uVXVpZCIsImNoYXNlVXVpZCIsIl9jaGFzZSIsImFjdG9yU2tpbGwiLCJ2YWxpZEZhaWxlZFJvbGxzIiwiZmFpbGVkQ2hlY2tEYW1hZ2UiLCJhY3Rpb25Db3N0IiwiZmFpbGVkQWN0aW9uQ29zdCIsIndlYXBvbnNPcHRpb25zIiwiaXRlbVR5cGVzIiwidyIsImFoYmQiLCJ1bnNoaWZ0IiwiY3VzdG9tV2VhcG9uRGFtYWdlIiwidXNlZFdlYXBvbiIsImluZmxpY3RlZERhbWFnZUZvcm11bGEiLCJ2YWxpZE9ic3RhY2xlRGFtYWdlIiwiZGFtYWdlUm9sbFJlcXVlc3QiLCJsb2FjdGlvbkNoYW5nZWQiLCJwYXJ0aWNpcGFudENoYWdlZCIsIm9ic3RhY2xlVXBkYXRlIiwicGFydGljaXBhbnRVcGRhdGUiLCJkaWZmIiwibmV3IiwicmVtYWluaW5nSHAiLCJ0YXJnZXRMb2NhdGlvbiIsImZvcndhcmQiLCJnZXRMb2NhdGlvblNoaWZ0IiwibW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiIsInNjcm9sbFRvTG9jYXRpb24iLCJhY3RpdmF0ZUxvY2F0aW9uIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVQYXJ0aWNpcGFudCIsImFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiIsImNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbiIsImNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIiwibmFtZXMiLCJuZXdPYnN0YWNsZSIsIm9sZCIsIkNvQzdDaGFzZSIsInBhcnRpY2lwYW50cyIsInBMaXN0IiwicHJleXMiLCJjaGFzZXJzIiwicGFydGljcGFudCIsInBhcnRpY2lwYW50c09iamVjdCIsImdldFBhcnRpY2lwYW50TG9jYXRpb24iLCJhY3RpdmVBY3RvciIsInBhcnRpY2lwYW50c0J5QWRqdXN0ZWRNb3YiLCJhY3R1YWxQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUiLCJhbGxIYXZlVmFsaWRNb3YiLCJldmVyeSIsImFsbEhhdmVTcGVlZFJvbGwiLCJsb2NhdGlvbnMiLCJzdGFydGVkIiwibCIsImxwIiwiZ2V0UGFydGljaXBhbnQiLCJuZXh0QWN0aXZlUGFydGljaXBhbnQiLCJzbG93ZXN0UHJleSIsImZhc3Rlc3RDaGFzZXIiLCJpbmNsdWRlTGF0ZWNvbWVycyIsImluY2x1ZGVFc2NhcGVkIiwic2xvd2VzdFBhcnRpY2lwYW50IiwicGFydGljaXBhbnRzRGF0YSIsImNsZWFuUGFydGljaXBhbnRMaXN0IiwicGFydGljaWFudFV1aWQiLCJwYXJ0aWNpcGFudEluZGV4Iiwib3ZlcndyaXRlIiwidXBkYXRlUGFydGljaXBhbnRzIiwiYXNzaXN0YW50VXVpZCIsImJlbmVmaWNpYXJ5VXVpZCIsImFzc2lzdGFudCIsImJlbmVmaWNpYXJ5IiwiYXNzaXN0YW50SW5kZXgiLCJiZW5lZmljaWFyeUluZGV4IiwidXNlTW92ZW1lbnRBY3Rpb25zIiwiYWN0aW9ucyIsImRpY2VOdW1iZXIiLCJhY3RpdmVQYXJ0aWNpcGFudCIsImFjdGl2YXRlUGFydGljaXBhbnQiLCJkYXRhVXBkYXRlIiwiZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEiLCJhY3RpdmVMb2NhdGlvbiIsInBVdWlkIiwicGFydGljaXBhbnRzRGF0YVVwZGF0ZSIsInBhcnRpY2lwYW50TG9jYXRpb24iLCJsb2NhdGlvbnNEYXRhVXBkYXRlIiwiZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEiLCJjaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIiwiZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24iLCJhY3RpdmVQYXJ0aWNpcGFudE9ic3RhY2xlQ2hlY2siLCJtb3ZlUGFydGljaXBhbnQiLCJyb2xsVXVpZCIsIm1ldGhvZCIsImluaXRUcmFjayIsInByb2Nlc3NMb2NhdGlvbnMiLCJkdXBsaWNhdGVEYXRhIiwiZmlyc3QiLCJsYXN0Iiwic3RhcnRpbmdMaW5lIiwibG9jYXRpb25zSW5kZXhTdGFydCIsImluaXRJbmRleFN0YXJ0IiwibG9jYXRpb25zTGVuZ3RoIiwic3RhcnRpbmdJbmRleCIsImdlbmVyYXRlTmV3VXVpZCIsImNoYXNlTG9jYXRpb25zIiwiZW5kIiwiY2hhc2VUcmFjayIsImNoYXNlcnNNaW5Nb3YiLCJmaW5kTWluTW92IiwiY2hhc2Vyc01heE1vdiIsImZpbmRNYXhNb3YiLCJwcmV5c01pbk1vdiIsInByZXlzTWF4TW92Iiwic3RhcnRpbmdSYW5nZSIsInVwZGF0ZWRMaXN0IiwiY2xlYW5Mb2NhdGlvbnNMaXN0IiwibG9jYXRpb25JbmRleCIsInVwZGF0ZUxvY2F0aW9uc0xpc3QiLCJwYXJ0aXBhbnRzVXVpZEFycmF5IiwiaW5zZXJ0QXRVdWlkIiwibmV3TG9jYXRpb25JbmRleCIsIm5ld0xvY2F0aW9uIiwibG9jRGF0YSIsImdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhIiwiaGFzUGFydGljaXBhbnQiLCJhY3RpdmVBY3Rvckhhc1NraWxsIiwiYWN0aXZlQWN0b3JUZXN0IiwicHJldmlvdXNMb2NhdGlvbiIsImFjdGl2ZUluZGV4IiwibmV4dExvY2F0aW9uIiwic2V0TG9jYXRpb25Db29yZGluYXRlcyIsImNvb3JkaW5hdGVzIiwiY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzIiwic3RhcnQiLCJzZXRjaGFzZVRyYWNrU2Nyb2xsIiwic3RvcCIsImRlc3RpbmF0aW9uSW5kZXgiLCJuZXdQYXJ0aWNpcGFudHNEYXRhIiwibG9jYXRpb25zRGF0YSIsInVuaXF1ZSIsInJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIiwibG9jYXRpb25Nb3ZlZCIsIm9yaWdpbkluZGV4IiwidG90YWxNb3ZlIiwiZGVzdGluYXRpb24iLCJvbGRQYXJ0aWNpcGFudHNMaXN0IiwibW92ZVRva2VuIiwicGFydGljcGFudERvY3VtZW50IiwiVG9rZW5Eb2N1bWVudCIsInZpZXdlZCIsInRhcmdldFJlY3QiLCJOb3JtYWxpemVkUmVjdGFuZ2xlIiwiZm91bmRGcmVlU3BhY2UiLCJvdmVybGFwaW5nVG9rZW4iLCJib3VuZHMiLCJpbnRlcnNlY3RzIiwic2hvd1Rva2VuTW92ZW1lbnQiLCJhbmltYXRlIiwidG8iLCJjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZUxvY2F0aW9uRWxlbWVudCIsImxlZnRTY3JvbGwiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJwcmV2IiwicmVtU3RyaW5nIiwicmVtU2l6ZSIsInBDb3VudCIsIl90YWJzIiwiYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwYXJ0aWNpY3BhbnREYXRhIiwiSW50bCIsIkNvbGxhdG9yIiwiY29tcGFyZSIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0IiwiQ29DN1NraWxsIiwiY29uc3RydWN0IiwiZ3Vlc3NOYW1lUGFydHMiLCJpc0ZpZ2h0aW5nIiwiaXNGaXJlYXJtcyIsImhhc0FjdGl2ZUVmZmVjdHMiLCJhY3RpdmVFZmZlY3RzIiwiZWZmZWN0S2V5RnVsbCIsImVmZmVjdEtleVNob3J0IiwiZGVsdGEiLCJleHAiLCJDb0M3VmVoaWNsZSIsIkNvQzdEZWNhZGVyRGllIiwiRGljZVRlcm0iLCJ0ZXJtRGF0YSIsIkRFTk9NSU5BVElPTiIsIkNvQzdEZWNhZGVyRGllT3RoZXIiLCJTRVRUSU5HUyIsInB1bHBSdWxlcyIsInNjb3BlIiwiaW5pdGlhdGl2ZVJ1bGUiLCJvbkNoYW5nZSIsInJ1bGUiLCJfc2V0SW5pdGlhdGl2ZU9wdGlvbnMiLCJwdWxwUnVsZURvdWJsZU1heEhlYWx0aCIsInB1bHBSdWxlVGFsZW50cyIsInB1bHBSdWxlRmFzdGVyUmVjb3ZlcnkiLCJwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzIiwib3Bwb3NlZFJvbGxUaWVCcmVha2VyIiwiZGVjaW1hbHMiLCJDb21iYXQiLCJDb0M3R2FtZVJ1bGVTZXR0aW5ncyIsInRydWUiLCJmYWxzZSIsInNldHRpbmciLCJwdWxwU2VsZWN0aW9uIiwicmVnaXN0ZXIiLCJvbkNoYW5nZVB1bHBTZWxlY3QiLCJvbkNsaWNrUHVscCIsIm9uUmVzZXREZWZhdWx0cyIsImNoZWNrYm94IiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiSXRlbVNoZWV0IiwiX29uSXRlbURlbGV0ZSIsImNvbGxlY3Rpb25OYW1lIiwiZ2V0RGF0YUZyb21Ecm9wRXZlbnQiLCJpdGVtSW5kZXgiLCJyZW1vdmVJdGVtIiwiaGFzT3duZXIiLCJpc0VtYmVkZGVkIiwiY2hhcmFjTmFtZSIsImVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSIsImVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMiLCJzdWdnZXN0ZWRPY2N1cGF0aW9ucyIsImVucmljaGVkU3VnZ2VzdGVkVHJhaXRzIiwic3VnZ2VzdGVkVHJhaXRzIiwiY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyIsIm9yU3RyaW5nIiwiaXRlbVByb3BlcnRpZXMiLCJDb0M3Qm9va1NoZWV0Iiwic3BlbGxzTGVhcm5lZCIsImV4aGF1c3RlZCIsInN0dWR5Q29tcGxldGVkIiwic3BlbGxMaXN0RW1wdHkiLCJlbnJpY2hlZENvbnRlbnQiLCJhdHRlbXB0SW5pdGlhbFJlYWRpbmciLCJfb25EZWxldGUiLCJfb25TcGVsbERldGFpbCIsImF0dGVtcHRTcGVsbExlYXJuaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJtb2RpZnlPdGhlcnNHYWlucyIsInJlZG9GdWxsU3R1ZHkiLCJtb2RpZnlUeXBlIiwic3BlbGxEZXRhaWwiLCJhZGRTcGVsbHMiLCJDb0M3Q29udGFpbmVyU2hlZXQiLCJzbGlkZVRvZ2dsZSIsIkNvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIiLCJEcmFnRHJvcCIsInBlcm1pc3Npb25zIiwiZHJvcCIsImNhbGxiYWNrcyIsIl9vbkRyb3BQYXJ0aWNpcGFudCIsIl9vbkFjdGlvbiIsInZhbGlkYXRlUGFydGljaXBhbnQiLCJzcGVlZENoZWNrUmVhZE9ubHkiLCJpbml0UmVhZE9ubHkiLCJvcHRpb25zTGlzdCIsInNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QiLCJkcm9wU3RyaW5nIiwiZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YSIsIm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24iLCJyZWNhbGN1bGF0aW9uTmVlZGVkIiwiYWRkUGFydGljaXBhbnQiLCJwYXJ0aWNpcGFudEV4Y2x1ZGVkIiwibW92ZW1lbnRBY3Rpb25EZWx0YSIsImluY2x1ZGVMYXN0Q29tbWVycyIsImV4Y2x1ZGVkQmVjYXVzZSIsIkNvQzdDaGFzZVNoZWV0IiwiY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzIiwiX29uRHJhZ0VudGVyUGFydGljaXBhbnQiLCJfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCIsIl9vbkNoYW5nZVNpZGUiLCJfb25EZWxldGVQYXJ0aWNpcGFudCIsIl9vblJlc2V0Um9sbCIsIl9vbkRlbGV0ZURyaXZlciIsIl9vbkFkZFBhcnRpY2lwYW50IiwiX29uUm9sbFBhcnRpY2lwYW50IiwiX29uTG9jYXRpb25DbGljayIsIl9vbk9ic3RhY2xlVHlwZUNsaWNrIiwiX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCIsIl9vbkNoYXNlQ29udHJvbENsaWNrZWQiLCJfb25Mb2NhdGlvbkNvbnRyb2xDbGljayIsImRyYWdzdGFydCIsIl9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydCIsIl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrIiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsImRyYWdvdmVyIiwiX29uRHJhZ0VudGVyIiwiX29uRHJhZ0xlYXZlIiwiY2xlYW5lZCIsImNsZWFuIiwib3JpZ2luYWxMb2NhdGlvbiIsInN1YlR5cGUiLCJmaW5kUGFydGljaXBhbnRJbmRleCIsImluaXRpYWxPcGVuaW5nIiwic2Nyb2xsIiwiYWN0aXZhdGVUYWIiLCJzY3JvbGxUbyIsImJlaGF2aW9yIiwiZmluZExvY2F0aW9uSW5kZXgiLCJmaW5kTG9jYXRpb24iLCJhc3Npc3RQYXJ0aWNpcGFudCIsImxVdWlkIiwicmVtb3ZlTG9jYXRpb24iLCJpbnNlcnRMb2NhdGlvbiIsInRvZ2dsZVBhcnRpY2lwYW50R3VuIiwiX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zIiwidG9nZ2xlQm9udXNEaWNlIiwiY2F1dGlvdXNBcHByb2FjaCIsInJlbW92ZVBhcnRpY2lwYW50IiwiY3V0VG9UaGVDaGFzZSIsInJlc3RhcnQiLCJwcm9ncmVzc1RvTmV4dFJvdW5kIiwic2VsZWN0b3IiLCJkcmFnSWNvbiIsInNldERyYWdJbWFnZSIsImxvY2F0aW9uRWxlbWVudCIsImRyYWdFdmVudCIsIm9sZExvY2F0aW9uIiwiX29uRHJhZ092ZXIiLCJhbHRlclBhcnRpY2lwYW50Iiwic3RhbmRieVRleHQiLCJzdGFuZGJ5UmlnaHRJY29uIiwib2xkUGFydGljaXBhbnQiLCJ0cCIsIkNvQzdJdGVtU2hlZXRWMiIsIkNvQzdJdGVtU2hlZXQiLCJDb0M3T2NjdXBhdGlvblNoZWV0IiwiX29uR3JvdXBJdGVtRGVsZXRlIiwiX29uR3JvdXBDb250cm9sIiwib3B0aW9uYWxTa2lsbCIsIm9jY3VwYXRpb25Qb2ludHNTdHJpbmciLCJvY2N1cGF0aW9uUHJvcGVydGllcyIsIm9wdGlvbm5hbCIsIm1hbmRhdG9yeSIsImNhcmFjIiwiY2FyYWNOYW1lIiwiQ29DN1NldHVwU2hlZXQiLCJfb25BZGRCaW8iLCJfb25SZW1vdmVTZWN0aW9uIiwiX29uQ2xpY2tUb2dnbGUiLCJnZXRJdGVtIiwib3RoZXJJdGVtcyIsIml0ZW1zTGlzdEVtcHR5IiwiX2VyYXMiLCJpc0VuYWJsZWQiLCJDb0M3U2tpbGxTaGVldCIsIl9zaGVldFRhYiIsImlzU3BlY2lhbGl6ZWQiLCJjYW5Nb2RpZnlTcGVjIiwiQ29DN1NwZWxsU2hlZXQiLCJjYXN0IiwiQ29DN1N0YXR1c1NoZWV0Iiwic3RhdHVzVHlwZSIsImVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyIsIkNvQzdUYWxlbnRTaGVldCIsInRhbGVudFR5cGUiLCJDb0M3VmVoaWNsZVNoZWV0IiwiYXJtZWQiLCJfb25BZGRBcm1vciIsIl9vblJlbW92ZUFybW9yIiwiX29uVG9nZ2xlRXhwYW5kIiwib2xkU2l6ZSIsIkNvQzdXZWFwb25TaGVldCIsImNvbWJhdFNraWxsIiwicHJpY2UiLCJlbnJpY2hlZERlc2NyaXB0aW9uU3BlY2lhbCIsIl9vblByb3BlcnR5Q2xpY2siLCJwZXJmb3JtRmlsdGVyIiwiYXBwSWQiLCJlcmFFbGVtZW50IiwiZXJhIiwibmFtZUZpbHRlciIsImxpc3RlbiIsImxvYWRUZW1wbGF0ZXMiLCJwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyIsInJlZ2lzdGVyTWVudSIsInJlc3RyaWN0ZWQiLCJyZWdpc3RlclNldHRpbmdzIiwiRGVmYXVsdERpcmVjdG9yeSIsIndvcmxkIiwibm9ib2R5IiwiZXZlcnlvbmUiLCJhbHdheXMiLCJjcmVhdGlvbiIsIm5ldmVyIiwiX3NldFJvb3RGb250U2l6ZSIsInNpZGViYXIiLCJ3aW5kb3dzIiwiY29udGFpbiIsImhvb2tzIiwiQWN0b3JzIiwidW5yZWdpc3RlclNoZWV0IiwicmVnaXN0ZXJTaGVldCIsIm1ha2VEZWZhdWx0IiwiSXRlbXMiLCJIYW5kbGViYXJzIiwicmVnaXN0ZXJIZWxwZXIiLCJTZXQiLCJrZXl1cCIsImNvbXBlbmRpdW1GaWx0ZXIiLCJDb0M3RGVjYWRlckRTTkZhY2VzIiwiY29uc3RydXRvciIsInNldEZhY2VzIiwiZ2xvYmFsIiwic291cmNlRGllIiwiRGljZUZhY3RvcnkiLCJzeXN0ZW1zIiwic3RhbmRhcmQiLCJoZWlnaHRUZXh0IiwiaGVpZ2h0VGlwIiwid2lkdGhUaXAiLCJjbGVhclRpbWVvdXQiLCJDb0M3VG91ciIsIlRvdXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwib2JzZXJ2ZXIiLCJkaXNjb25uZWN0Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJfcHJlU3RlcCIsInN0ZXBJbmRleCIsIndhaXRGb3JFbGVtZW50IiwiY3VycmVudFN0ZXAiLCJfcG9zdFN0ZXAiLCJoYXNOZXh0IiwiaXNSZXNldHRpbmciLCJyZXNldCIsIkVuYWJsZVZhcmlhbnRSdWxlc0VuIiwiY2FuQmVSZXN1bWVkIiwic3RlcHMiLCJsb2NhbGl6YXRpb24iLCJFbmFibGVWYXJpYW50UnVsZXNGciIsImluc3RydWN0aW9uc1ZlcnNpb24iLCJyZWFkTWUiLCJ0b3VycyIsInRvdXJOYW1lIiwicmVnaXN0ZXJUb3VycyIsIkNvQzdIb29rcyIsImVudGl0eUNyZWF0ZVNlbGVjdFRhZyIsImVudGl0eVNvcnRlZExpc3QiLCJzaG93RXhwZXJpbWVudGFsIiwiZW50aXR5T3B0aW9uIiwiY2FwaXRhbGl6ZSIsImVtcHR5Iiwic2Vjb25kIiwiYWRkRGljZVByZXNldCIsImZvbnRTY2FsZSIsInByb2Nlc3NIdG1sIiwiZ21jcmVhdGVtZXNzYWdlYXMiLCJtZWxlZVRhcmdldCIsImdtdHJhZGVpdGVtdG8iLCJDb0M3U3lzdGVtU29ja2V0IiwibGlzdGVuZXIiLCJjYWxsU29ja2V0Iiwia2VlcGVycyIsInVzZXJJZCIsImVycm9ySWZNaXNzaW5nIiwiaW5jbHVkZVNlbGYiLCJfb25MZWZ0Q2xpY2siLCJzeXN0ZW1UYWIiLCJiZWZvcmUiLCJza2lsbENoZWNrTWFjcm8iLCJ3ZWFwb25DaGVja01hY3JvIiwiY2hlY2tNYWNybyIsImNhcmRjbGFzcyIsImluamVjdENTUyIsInNvY2tldGxpYiIsInJlZ2lzdGVyU3lzdGVtIiwiaW5pdEVDQyIsInJlbmRlckNvbWJhdFRyYWNrZXIiLCJjb21tYW5kcyIsInJlcyIsInRvTG9jYWxpemUiLCJsb2NhbGl6ZWQiLCJlZmZlY3RJbmRleCIsImRpcmVjdG9yeSIsIkl0ZW1EaXJlY3RvcnkiLCJpdGVtRWxlbWVudCIsImNyZWF0ZU1hY3JvIiwiY2hhdExpc3RlbmVycyIsInJlbmRlck1lc3NhZ2VIb29rIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImNoZWNrRm9yVXBkYXRlIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwiYWN0aXZhdGVHbG9iYWxMaXN0ZW5lciIsInRpbnlNQ0UiLCJQbHVnaW5NYW5hZ2VyIiwib25FZGl0b3JEcm9wIiwiVGlueU1DRSIsInBsdWdpbnMiLCJ0YWJsZUNob2ljZSIsIm5vbmUiLCJib3V0T2ZNYWRuZXNzX1N1bW1hcnkiLCJib3V0T2ZNYWRuZXNzX1JlYWxUaW1lIiwic2V0U2Nyb2xsIiwib25DbG9zZSIsImNoYXJhY3RlclNoZWV0IiwiUGFyc2VDaGF0RW50cnkiLCJQYXJzZVNoZWV0Q29udGVudCIsInJlbmRlckNoYXRNZXNzYWdlSG9vayIsIlBhcnNlTWVzc2FnZSIsImdldEJ1dHRvbnMiLCJyZW5kZXJDb250cm9scyIsIm9uRHJvcFNvbWV0aGluZyJdLCJzb3VyY2VSb290IjoiIn0=